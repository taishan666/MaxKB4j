import{ay as d,az as m,aA as _,aB as c,bc as u,aF as f,b_ as w,cQ as h,cg as C,co as k}from"./chat-BFw4auTk.js";import{P as x,T as y,M as z,A as t,_ as I}from"./wecom.prod-DKW5jE45.js";const L={id:"wecom-qr",class:"wecom-qr flex"},b=d({__name:"wecomQrCode",props:{config:{}},setup(r){const s=m(),{login:i}=_(),l=c({}),g=c({isWeComLogin:!1}),n=r;return(async()=>{await w();const e={corpId:n.config.corp_id,agentId:n.config.agent_id},a=localStorage.getItem("MaxKB-locale")||h()||"en-US",p=window.location.origin;try{l.value=x({el:"#wecom-qr",params:{login_type:I.corpApp,appid:e.corpId||"",agentid:e.agentId,redirect_uri:p,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?t.zh:t.en,redirect_type:z.callback,panel_size:y.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:o}){i.wecomCallback(o).then(()=>{setTimeout(()=>{s.push({name:"home"})})})},onLoginFail(o){C(`${o.errMsg}`)}})}catch(o){console.error("Error initializing login panel:",o)}})(),(e,a)=>(f(),u("div",L))}}),v=k(b,[["__scopeId","data-v-1f970287"]]);export{v as default};
