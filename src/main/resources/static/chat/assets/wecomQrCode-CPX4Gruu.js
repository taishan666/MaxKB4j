import{ay as u,az as _,bi as f,aB as n,aA as w,ba as h,aF as y,bU as C,cQ as k,ca as b,ci as q}from"./chat-C--1ojLo.js";import{P as x,T as z,M as I,A as r,_ as L}from"./wecom.prod-DKW5jE45.js";const B={id:"wecom-qr",class:"wecom-qr flex"},M=u({__name:"wecomQrCode",props:{config:{}},setup(i){const l=_(),c=f(),{params:{accessToken:s}}=c,p=n({}),d=n({isWeComLogin:!1}),{chatUser:g}=w(),t=i;return(async()=>{await C();const o={corpId:t.config.corp_id,agentId:t.config.agent_id},a=localStorage.getItem("MaxKB-locale")||k()||"en-US",m=window.location.origin;try{p.value=x({el:"#wecom-qr",params:{login_type:L.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?r.zh:r.en,redirect_type:I.callback,panel_size:z.small},onCheckWeComLogin:d.value,async onLoginSuccess({code:e}){g.wecomCallback(e,s).then(()=>{setTimeout(()=>{l.push({name:"chat",params:{accessToken:s},query:c.query})})})},onLoginFail(e){b(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(y(),h("div",B))}}),S=q(M,[["__scopeId","data-v-78fde443"]]);export{S as default};
