import{cq as fe,cr as ve,aJ as F,aY as Z,aK as ne,aP as R,bn as pe,be as D,aQ as a,aZ as se,aL as y,aM as c,bk as Y,aR as o,b0 as ae,aT as n,a_ as W,b1 as k,aW as s,aV as E,aO as e,cs as le,aS as t,ct as ye,bm as de,cu as ie,aU as Q,cv as ge,bj as he,bi as ce,b9 as _e,bf as be,b5 as q,bb as re,co as G,cp as X,cw as b,cx as J,cy as j,b6 as Ae,cz as we,b7 as ee,cA as ke,cB as $e,cC as Ie,aN as Ce}from"./chat-4wXRqTZ9.js";import{_ as Re}from"./ResetPassword.vue_vue_type_script_setup_true_lang-7m8GnzoF.js";import{_ as Ee,s as H}from"./SettingAPIKeyDialog.vue_vue_type_script_setup_true_lang-BY8slKat.js";const me="/license",xe=M=>ve(`${me}/profile`,void 0,M),Se=(M,l)=>fe(`${me}/profile`,M,void 0,l),ue={getLicense:xe,putLicense:Se},De=["id"],Ne={class:"about-ui"},Pe={class:"flex"},Ke={class:"label"},Oe={class:"flex"},Te={class:"label"},Me={key:0,class:"color-danger"},Ue={class:"flex"},Ve={class:"label"},Le={class:"flex"},We={class:"label"},ze={class:"flex"},Be={class:"label"},Ge={class:"flex"},Fe={class:"label"},Xe={key:0,class:"mt-16 flex align-center"},je={class:"border-t text-center mt-16 p-16 pb-0"},He=F({__name:"AboutDialog",setup(M,{expose:l}){const{user:p,theme:d}=Z(),h=ne(()=>d.isDefaultTheme()),f=R(!1),g=R(!1),_=R(null),A=R(!1);pe(f,r=>{r||(A.value&&window.location.reload(),A.value=!1)});const N=()=>{p.showXpack()&&u(),f.value=!0},V=r=>{const $=new FormData;$.append("license_file",r.raw),ue.putLicense($,g).then(P=>{u(),A.value=!0})},w=ne(()=>p?p.getEditionName()==="PE"?D("layout.about.edition.professional"):p.getEditionName()==="EE"?D("layout.about.edition.enterprise"):D("layout.about.edition.community"):"-");function u(){ue.getLicense(g).then(r=>{var $;_.value=($=r.data)==null?void 0:$.license})}return l({open:N}),(r,$)=>{const P=a("LogoFull"),z=a("el-button"),i=a("el-upload"),m=a("el-text"),U=a("el-dialog"),K=se("hasPermission"),x=se("loading");return c(),y(U,{modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=S=>f.value=S),class:Y(["about-dialog border-r-6",h.value?"":"dialog-custom-header"])},{header:o(({titleId:S,titleClass:I})=>[n("div",{class:Y(["logo flex-center",I]),id:S},[t(P,{height:"59px"})],10,De)]),default:o(()=>{var S,I,O,L,B,C,v;return[ae((c(),W("div",Ne,[n("div",Pe,[n("span",Ke,s(r.$t("layout.about.authorize")),1),n("span",null,s(((S=_.value)==null?void 0:S.corporation)||"-"),1)]),n("div",Oe,[n("span",Te,s(r.$t("layout.about.expiredTime")),1),n("span",null,[E(s(((I=_.value)==null?void 0:I.expired)||"-")+" ",1),(O=_.value)!=null&&O.expired&&e(le)((L=_.value)==null?void 0:L.expired)?(c(),W("span",Me,"（"+s(e(le)((B=_.value)==null?void 0:B.expired))+"）",1)):k("",!0)])]),n("div",Ue,[n("span",Ve,s(r.$t("layout.about.edition.label")),1),n("span",null,s(w.value),1)]),n("div",Le,[n("span",We,s(r.$t("layout.about.version")),1),n("span",null,s(e(p).version),1)]),n("div",ze,[n("span",Be,s(r.$t("layout.about.serialNo")),1),n("span",null,s(((C=_.value)==null?void 0:C.serialNo)||"-"),1)]),n("div",Ge,[n("span",Fe,s(r.$t("layout.about.remark")),1),n("span",null,s(((v=_.value)==null?void 0:v.remark)||"-"),1)]),e(p).showXpack()?(c(),W("div",Xe,[ae((c(),y(i,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,"on-change":V},{default:o(()=>[t(z,{class:"border-primary mr-16"},{default:o(()=>[E(s(r.$t("layout.about.update"))+" License ",1)]),_:1})]),_:1})),[[K,new(e(ye))("ADMIN")]])])):k("",!0)])),[[x,g.value]]),n("div",je,[t(m,{type:"info"},{default:o(()=>[E(s(r.$t("layout.copyright")),1)]),_:1})])]}),_:1},8,["modelValue","class"])}}}),Ye={style:{"margin-top":"10px"}},qe={class:"vertical-middle lighter break-all"},Je={class:"mr-4"},Qe=F({__name:"APIKeyDialog",props:{userId:{type:String,default:""}},emits:["addData"],setup(M,{expose:l,emit:p}){const d=de(),{params:{id:h}}=d,f=window.location.origin+"/doc/",g=R(),_=R(!1),A=R(!1),N=R(null);pe(_,i=>{i||(N.value=null)});function V(i){g.value.open(i,"USER")}function w(i){he(`${D("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${i.secretKey}?`,D(D("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2")),{confirmButtonText:D("common.confirm"),cancelButtonText:D("common.cancel"),confirmButtonClass:"color-danger"}).then(()=>{H.delAPIKey(i.id,A).then(()=>{ce(D("common.deleteSuccess")),P()})}).catch(()=>{})}function u(i,m){const U={isActive:i},K=i?D("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):D("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");H.putAPIKey(m.id,U,A).then(x=>{ce(K),P()})}function r(){H.postAPIKey(A).then(i=>{P()})}const $=()=>{P(),_.value=!0};function P(){H.getAPIKey().then(i=>{i.data.sort((m,U)=>m.name<U.name?1:-1),N.value=i.data})}function z(){P()}return l({open:$}),(i,m)=>{const U=a("el-text"),K=a("AppIcon"),x=a("el-button"),S=a("el-card"),I=a("el-table-column"),O=a("el-switch"),L=a("el-tooltip"),B=a("el-table"),C=a("el-dialog");return c(),y(C,{title:i.$t("layout.apiKey"),modelValue:_.value,"onUpdate:modelValue":m[2]||(m[2]=v=>_.value=v),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[t(S,{shadow:"never",class:"layout-bg mb-16"},{default:o(()=>[t(U,{type:"info",class:"color-secondary"},{default:o(()=>[E(s(i.$t("layout.apiServiceAddress")),1)]),_:1}),n("p",Ye,[n("span",{class:"vertical-middle lighter break-all"},s(f)),t(x,{type:"primary",text:"",onClick:m[0]||(m[0]=v=>e(ie)(f))},{default:o(()=>[t(K,{iconName:"app-copy"})]),_:1})])]),_:1}),t(x,{type:"primary",class:"mb-16",onClick:r},{default:o(()=>[E(s(i.$t("common.create")),1)]),_:1}),t(B,{data:N.value,class:"mb-16",loading:A.value},{default:o(()=>[t(I,{prop:"secretKey",label:"API Key"},{default:o(({row:v})=>[n("span",qe,s(v.secretKey),1),t(x,{type:"primary",text:"",onClick:T=>e(ie)(v.secretKey)},{default:o(()=>[t(K,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),t(I,{label:i.$t("common.status.label"),width:"80"},{default:o(({row:v})=>[n("div",{onClick:m[1]||(m[1]=Q(()=>{},["stop"]))},[t(O,{size:"small",modelValue:v.isActive,"onUpdate:modelValue":T=>v.isActive=T,onChange:T=>u(T,v)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1},8,["label"]),t(I,{prop:"name",label:i.$t("common.createDate"),width:"170"},{default:o(({row:v})=>[E(s(e(ge)(v.createTime)),1)]),_:1},8,["label"]),t(I,{label:i.$t("common.setting"),align:"left",width:"80"},{default:o(({row:v})=>[n("span",Je,[t(L,{effect:"dark",content:i.$t("common.setting"),placement:"top"},{default:o(()=>[t(x,{type:"primary",text:"",onClick:Q(T=>V(v),["stop"])},{default:o(()=>[t(K,{iconName:"app-setting"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),t(L,{effect:"dark",content:i.$t("common.delete"),placement:"top"},{default:o(()=>[t(x,{type:"primary",text:"",onClick:T=>w(v)},{default:o(()=>[t(K,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),t(Ee,{ref_key:"SettingAPIKeyDialogRef",ref:g,onRefresh:z},null,512)]),_:1},8,["title","modelValue"])}}}),Ze={class:"flex-center cursor"},et={class:"ml-8 color-text-primary"},tt={class:"userInfo flex align-center"},ot={class:"mr-12 flex align-center"},nt={style:{width:"90%"}},st={class:"bold mb-4",style:{"font-size":"14px"}},at={class:"flex-between w-full"},lt={class:"flex-between w-full",style:{"line-height":"22px",padding:"12px 11px"}},it=F({__name:"index",setup(M){const{user:l,login:p}=Z(),d=_e(),h=R(),f=R(),g=R(),_=u=>{l.postUserLanguage(u)},A=()=>{var u;(u=h.value)==null||u.open()};function N(){f.value.open()}const V=()=>{var u;(u=g.value)==null||u.open()},w=()=>{p.logout().then(()=>{d.push({name:"login"})})};return be(()=>{var u;(u=l.userInfo)!=null&&u.is_edit_password}),(u,r)=>{var I;const $=a("el-avatar"),P=a("CaretBottom"),z=a("el-icon"),i=a("TagGroup"),m=a("el-dropdown-item"),U=a("ArrowRight"),K=a("Check"),x=a("el-dropdown-menu"),S=a("el-dropdown");return c(),W(q,null,[t(S,{trigger:"click",type:"primary"},{dropdown:o(()=>[t(x,{class:"avatar-dropdown"},{default:o(()=>{var O,L,B;return[n("div",tt,[n("div",ot,[t($,{size:30},{default:o(()=>r[3]||(r[3]=[n("img",{src:re,style:{width:"54%"},alt:""},null,-1)])),_:1,__:[3]})]),n("div",nt,[n("p",st,s((O=e(l).userInfo)==null?void 0:O.username),1),(L=e(l).userInfo)!=null&&L.role_name&&e(l).userInfo.role_name.length>0?(c(),W(q,{key:0},[e(G)([e(X).IS_EE,e(X).IS_PE],"OR")?(c(),y(i,{key:0,size:"small",tags:(B=e(l).userInfo)==null?void 0:B.role_name},null,8,["tags"])):k("",!0)],64)):k("",!0)])]),e(G)([e(b).EXTENDS_ADMIN,e(b).EXTENDS_WORKSPACE_MANAGE,e(b).ADMIN,e(b).WORKSPACE_MANAGE],"OR")?(c(),y(m,{key:0,class:"border-t",onClick:r[0]||(r[0]=C=>e(d).push({path:"/system/user"}))},{default:o(()=>[n("div",at,s(u.$t("views.system.title")),1)]),_:1})):k("",!0),e(G)(new(e(J))([e(b).ADMIN,e(b).WORKSPACE_MANAGE,e(b).USER],[e(j).CHANGE_PASSWORD],[],"OR"),"OR")?(c(),y(m,{key:1,onClick:V},{default:o(()=>[E(s(u.$t("views.login.resetPassword")),1)]),_:1})):k("",!0),n("div",null,[e(G)(new(e(J))([e(b).ADMIN],[e(j).SYSTEM_API_KEY_EDIT],[e(X).IS_EE,e(X).IS_PE],"OR"),"OR")?(c(),y(m,{key:0,class:"p-8",onClick:N},{default:o(()=>[E(s(u.$t("layout.apiKey")),1)]),_:1})):k("",!0)]),e(G)(new(e(J))([e(b).ADMIN,e(b).WORKSPACE_MANAGE,e(b).USER],[e(j).SWITCH_LANGUAGE],[],"OR"),"OR")?(c(),y(m,{key:2,style:{padding:"0"},onClick:r[1]||(r[1]=Q(()=>{},["stop"]))},{default:o(()=>[t(S,{class:"w-full",trigger:"hover",placement:"left-start"},{dropdown:o(()=>[t(x,{style:{width:"180px"}},{default:o(()=>[(c(!0),W(q,null,Ae(e(we),(C,v)=>(c(),y(m,{key:v,value:C.value,onClick:T=>_(C.value),class:"flex-between"},{default:o(()=>{var T,te,oe;return[n("span",{class:Y(C.value===((T=e(l).userInfo)==null?void 0:T.language)?"primary":"")},s(C.label),3),C.value===((te=e(l).userInfo)==null?void 0:te.language)?(c(),y(z,{key:0,class:Y(C.value===((oe=e(l).userInfo)==null?void 0:oe.language)?"primary":"")},{default:o(()=>[t(K)]),_:2},1032,["class"])):k("",!0)]}),_:2},1032,["value","onClick"]))),128))]),_:1})]),default:o(()=>[n("div",lt,[n("span",null,s(u.$t("layout.language")),1),t(z,null,{default:o(()=>[t(U)]),_:1})])]),_:1})]),_:1})):k("",!0),e(G)([e(b).ADMIN,e(j).ABOUT_READ],"OR")?(c(),y(m,{key:3,onClick:A},{default:o(()=>[E(s(u.$t("layout.about.title")),1)]),_:1})):k("",!0),t(m,{class:"border-t",onClick:w},{default:o(()=>[E(s(u.$t("layout.logout")),1)]),_:1})]}),_:1})]),default:o(()=>{var O;return[n("div",Ze,[t($,{size:30},{default:o(()=>r[2]||(r[2]=[n("img",{src:re,style:{width:"54%"},alt:""},null,-1)])),_:1,__:[2]}),n("span",et,s((O=e(l).userInfo)==null?void 0:O.username),1),t(z,{class:"el-icon--right"},{default:o(()=>[t(P)]),_:1})])]}),_:1}),t(Qe,{"user-id":(I=e(l).userInfo)==null?void 0:I.id,ref_key:"APIKeyDialogRef",ref:f},null,8,["user-id"]),t(Re,{ref_key:"resetPasswordRef",ref:g},null,512),t(He,{ref_key:"AboutDialogRef",ref:h},null,512)],64)}}}),ct=ee(it,[["__scopeId","data-v-3bf01337"]]),rt={class:"flex align-center"},ut=F({__name:"index",setup(M){const{theme:l}=Z();function p(d){window.open(d,"_blank")}return(d,h)=>{var _,A,N;const f=a("AppIcon"),g=a("el-tooltip");return c(),W("div",rt,[(_=e(l).themeInfo)!=null&&_.showProject?(c(),y(g,{key:0,effect:"dark",content:d.$t("layout.github"),placement:"top"},{default:o(()=>[t(f,{iconName:"app-github",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:h[0]||(h[0]=V=>{var w;return p((w=e(l).themeInfo)==null?void 0:w.projectUrl)})})]),_:1},8,["content"])):k("",!0),(A=e(l).themeInfo)!=null&&A.showUserManual?(c(),y(g,{key:1,effect:"dark",content:d.$t("layout.wiki"),placement:"top"},{default:o(()=>[t(f,{iconName:"app-user-manual",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:h[1]||(h[1]=V=>{var w;return p((w=e(l).themeInfo)==null?void 0:w.userManualUrl)})})]),_:1},8,["content"])):k("",!0),(N=e(l).themeInfo)!=null&&N.showForum?(c(),y(g,{key:2,effect:"dark",content:d.$t("layout.forum"),placement:"top"},{default:o(()=>[t(f,{iconName:"app-help",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:h[2]||(h[2]=V=>{var w;return p((w=e(l).themeInfo)==null?void 0:w.forumUrl)})})]),_:1},8,["content"])):k("",!0)])}}}),pt=ee(ut,[["__scopeId","data-v-24d0eacb"]]),dt={class:"app-top-bar-container border-b flex-center"},_t={class:"logo mt-4"},mt={class:"flex-between w-full align-center"},ft={class:"flex align-center mr-8"},vt=F({__name:"SystemHeader",setup(M){const l=_e();return(p,d)=>{const h=a("LogoFull"),f=a("el-divider"),g=a("AppIcon"),_=a("el-button");return c(),W("div",dt,[n("div",_t,[t(h)]),n("div",mt,[n("h4",null,[t(f,{class:"ml-16 mr-16",direction:"vertical"}),E(s(p.$t("views.system.title")),1)]),n("div",ft,[t(pt),t(f,{class:"ml-8 mr-8",direction:"vertical"}),e(G)([e(b).USER.getWorkspaceRole,e(b).EXTENDS_USER.getWorkspaceRole,e(b).EXTENDS_WORKSPACE_MANAGE.getWorkspaceRole,e(b).WORKSPACE_MANAGE.getWorkspaceRole],"OR")?(c(),y(_,{key:0,link:"",onClick:d[0]||(d[0]=A=>e(l).push({path:"/"})),style:{color:"var(--el-text-color-primary)"}},{default:o(()=>[t(g,{class:"mr-8",iconName:"app-workspace",style:{"font-size":"16px"}}),E(" "+s(p.$t("views.workspace.toWorkspace")),1)]),_:1})):k("",!0)])]),t(ct)])}}}),bt=ee(vt,[["__scopeId","data-v-c20e3067"]]),At=F({__name:"index",setup(M){const l=de(),p=R([]);return ke(()=>{const{name:d,meta:h}=l;d&&!p.value.includes(d)&&p.value.push(d)}),(d,h)=>{const f=a("router-view");return c(),y(f,null,{default:o(({Component:g})=>[t($e,{appear:"",name:"fade-transform",mode:"out-in"},{default:o(()=>[(c(),y(Ie,{include:p.value},[(c(),y(Ce(g),{key:e(l).path}))],1032,["include"]))]),_:2},1024)]),_:1})}}});export{ct as A,bt as S,pt as T,At as _};
