import{aJ as h,aP as n,be as D,bf as u,bq as V,bg as E,eP as B,aQ as p,aZ as q,b0 as N,aL as _,aM as $,aR as i,aS as d,ei as T,cI as S,bv as F}from"./chat-CJ-GWxNS.js";const U=h({__name:"BaseForm",props:{data:{},apiType:{}},setup(w,{expose:b}){const t=w,l=n({name:"",desc:"",embeddingModelId:""}),g=n(""),M=D({name:[{required:!0,message:u("views.knowledge.form.knowledgeName.requiredMessage"),trigger:"blur"}],desc:[{required:!0,message:u("views.knowledge.form.knowledgeDescription.requiredMessage"),trigger:"blur"}],embeddingModelId:[{required:!0,message:u("views.knowledge.form.EmbeddingModel.requiredMessage"),trigger:"change"}]}),r=n(),s=n(!1),v=n([]);V(()=>t.data,e=>{e&&JSON.stringify(e)!=="{}"&&(l.value.name=e.name,l.value.desc=e.desc,l.value.embeddingModelId=e.embeddingModelId,g.value=e.workspaceId||"",c())},{immediate:!0});function k(){if(r.value)return r.value.validate(e=>e)}function c(){s.value=!0;const e=t.apiType==="systemManage"?{modelType:"EMBEDDING",workspaceId:g.value}:{modelType:"EMBEDDING"};S({type:"model",systemType:t.apiType}).getSelectModelList(e).then(o=>{v.value=F.groupBy(o==null?void 0:o.data,"provider"),s.value=!1}).catch(()=>{s.value=!1})}return E(()=>{t.apiType!=="systemManage"&&c()}),B(()=>{var e;l.value={name:"",desc:"",embeddingModelId:""},(e=r.value)==null||e.clearValidate()}),b({validate:k,form:l}),(e,o)=>{const f=p("el-input"),m=p("el-form-item"),y=p("el-form"),I=q("loading");return N(($(),_(y,{ref_key:"FormRef",ref:r,model:l.value,rules:M,"label-position":"top","require-asterisk-position":"right"},{default:i(()=>[d(m,{label:e.$t("views.knowledge.form.knowledgeName.label"),prop:"name"},{default:i(()=>[d(f,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.name=a),placeholder:e.$t("views.knowledge.form.knowledgeName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:o[1]||(o[1]=a=>l.value.name=l.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(m,{label:e.$t("views.knowledge.form.knowledgeDescription.label"),prop:"desc"},{default:i(()=>[d(f,{modelValue:l.value.desc,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.desc=a),type:"textarea",placeholder:e.$t("views.knowledge.form.knowledgeDescription.placeholder"),maxlength:"256","show-word-limit":"",autosize:{minRows:3},onBlur:o[3]||(o[3]=a=>l.value.desc=l.value.desc.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(m,{label:e.$t("views.knowledge.form.EmbeddingModel.label"),prop:"embeddingModelId"},{default:i(()=>[d(T,{modelValue:l.value.embeddingModelId,"onUpdate:modelValue":o[4]||(o[4]=a=>l.value.embeddingModelId=a),placeholder:e.$t("views.knowledge.form.EmbeddingModel.placeholder"),options:v.value,"model-type":"EMBEDDING",showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[I,s.value]])}}});export{U as _};
