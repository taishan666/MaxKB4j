import{aJ as u,bc as _,bp as f,aP as r,aY as w,a_ as W,aM as L,bj as h,eV as y,eb as b,ba as C}from"./chat-ESISKCvw.js";import{c as k,W as T,a as q,b as s,d as x}from"./wecom.prod-CCkvMpRe.js";const z={id:"wecom-qr",class:"wecom-qr flex"},I=u({__name:"wecomQrCode",props:{config:{}},setup(i){const l=_(),n=f(),{params:{accessToken:t}}=n,p=r({}),g=r({isWeComLogin:!1}),{chatUser:d}=w(),c=i;return(async()=>{await h();const o={corpId:c.config.corp_id,agentId:c.config.agent_id},a=localStorage.getItem("MaxKB-locale")||y()||"en-US",m=window.location.origin;try{p.value=k({el:"#wecom-qr",params:{login_type:x.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?s.zh:s.en,redirect_type:q.callback,panel_size:T.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){d.wecomCallback(e,t).then(()=>{setTimeout(()=>{l.push({name:"chat",params:{accessToken:t},query:n.query})})})},onLoginFail(e){b(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(L(),W("div",z))}}),M=C(I,[["__scopeId","data-v-78fde443"]]);export{M as default};
