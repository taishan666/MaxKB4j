import{bf as A,bg as H,bh as M,ay as F,aB as f,b8 as L,aC as m,bq as G,aD as i,bo as S,ba as J,aF as g,aH as a,bp as k,aG as t,aK as _,aJ as p,bk as v,aI as E,aE as C,bY as O,bX as K,bZ as X,bm as U,ci as Y}from"./chat-BvM2GaQg.js";const w="/email_setting",Z=r=>M(`${w}`,void 0,r),j=(r,e)=>A(`${w}`,r,void 0,e),x=(r,e)=>H(`${w}`,r,void 0,e),h={getEmailSetting:Z,postTestEmail:j,putEmailSetting:x},z={class:"email-setting p-16-24"},Q={class:"ml-4 color-text-primary"},W={class:"email-setting__main p-16"},ee=F({__name:"index",setup(r){const e=f({email_host:"",email_port:"",email_host_user:"",email_host_password:"",email_use_tls:!1,email_use_ssl:!1}),b=f(),n=f(!1),T=L({email_host:[{required:!0,message:m("views.system.email.smtpHostPlaceholder"),trigger:"blur"}],email_port:[{required:!0,message:m("views.system.email.smtpPortPlaceholder"),trigger:"blur"}],email_host_user:[{required:!0,message:m("views.system.email.smtpUserPlaceholder"),trigger:"blur"}],email_host_password:[{required:!0,message:m("views.system.email.smtpPasswordPlaceholder"),trigger:"blur"}]}),y=async(l,s)=>{l&&await l.validate((c,V)=>{c&&(s?h.postTestEmail(e.value,n).then(d=>{U(m("views.system.testSuccess"))}):h.putEmailSetting(e.value,n).then(d=>{U(m("common.saveSuccess"))}))})};function D(){h.getEmailSetting(n).then(l=>{l.data&&JSON.stringify(l.data)!=="{}"&&(e.value=l.data)})}return G(()=>{D()}),(l,s)=>{const c=i("el-breadcrumb-item"),V=i("el-breadcrumb"),d=i("el-input"),u=i("el-form-item"),$=i("el-checkbox"),P=i("el-button"),q=i("el-form"),I=i("el-scrollbar"),N=i("el-card"),B=S("hasPermission"),R=S("loading");return g(),J("div",z,[a(V,{"separator-icon":"ArrowRight",class:"mb-16"},{default:t(()=>[a(c,null,{default:t(()=>[_(p(v(m)("views.system.subTitle")),1)]),_:1}),a(c,null,{default:t(()=>[E("h5",Q,p(l.$t("views.system.email.title")),1)]),_:1})]),_:1}),k((g(),C(N,{style:{"--el-card-padding":"16px"}},{default:t(()=>[a(I,null,{default:t(()=>[E("div",W,[a(q,{ref_key:"emailFormRef",ref:b,rules:T,model:e.value,"label-position":"top","require-asterisk-position":"right"},{default:t(()=>[a(u,{label:l.$t("views.system.email.smtpHost"),prop:"email_host"},{default:t(()=>[a(d,{modelValue:e.value.email_host,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.email_host=o),placeholder:l.$t("views.system.email.smtpHostPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:l.$t("views.system.email.smtpPort"),prop:"email_port"},{default:t(()=>[a(d,{modelValue:e.value.email_port,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.email_port=o),placeholder:l.$t("views.system.email.smtpPortPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:l.$t("views.system.email.smtpUser"),prop:"email_host_user"},{default:t(()=>[a(d,{modelValue:e.value.email_host_user,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.email_host_user=o),placeholder:l.$t("views.system.email.smtpUserPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:l.$t("views.system.password"),prop:"email_host_password"},{default:t(()=>[a(d,{modelValue:e.value.email_host_password,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.email_host_password=o),placeholder:l.$t("views.system.email.smtpPasswordPlaceholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,null,{default:t(()=>[a($,{modelValue:e.value.email_use_ssl,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.email_use_ssl=o)},{default:t(()=>[_(p(l.$t("views.system.email.enableSSL")),1)]),_:1},8,["modelValue"])]),_:1}),a(u,null,{default:t(()=>[a($,{modelValue:e.value.email_use_tls,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.email_use_tls=o)},{default:t(()=>[_(p(l.$t("views.system.email.enableTLS")),1)]),_:1},8,["modelValue"])]),_:1}),k((g(),C(P,{onClick:s[6]||(s[6]=o=>y(b.value)),type:"primary",disabled:n.value},{default:t(()=>[_(p(l.$t("common.save")),1)]),_:1},8,["disabled"])),[[B,new(v(O))([v(K).ADMIN],[v(X).EMAIL_SETTING_EDIT],[],"OR")]]),a(P,{onClick:s[7]||(s[7]=o=>y(b.value,"test")),disabled:n.value},{default:t(()=>[_(p(l.$t("views.system.test")),1)]),_:1},8,["disabled"])]),_:1},8,["rules","model"])])]),_:1})]),_:1})),[[R,n.value]])])}}}),se=Y(ee,[["__scopeId","data-v-230e14d4"]]);export{se as default};
