import{ay as _,az as u,b8 as f,aB as n,aA as w,bc as h,aF as y,b_ as C,cQ as k,cg as b,co as q}from"./chat-BFw4auTk.js";import{P as x,T as z,M as I,A as r,_ as L}from"./wecom.prod-DKW5jE45.js";const B={id:"wecom-qr",class:"wecom-qr flex"},M=_({__name:"wecomQrCode",props:{config:{}},setup(i){const l=u(),c=f(),{params:{accessToken:s}}=c,p=n({}),g=n({isWeComLogin:!1}),{chatUser:d}=w(),t=i;return(async()=>{await C();const o={corpId:t.config.corp_id,agentId:t.config.agent_id},a=localStorage.getItem("MaxKB-locale")||k()||"en-US",m=window.location.origin;try{p.value=x({el:"#wecom-qr",params:{login_type:L.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?r.zh:r.en,redirect_type:I.callback,panel_size:z.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){d.wecomCallback(e,s).then(()=>{setTimeout(()=>{l.push({name:"chat",params:{accessToken:s},query:c.query})})})},onLoginFail(e){b(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(y(),h("div",B))}}),S=q(M,[["__scopeId","data-v-78fde443"]]);export{S as default};
