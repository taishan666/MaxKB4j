import{aJ as te,aY as Ye,aP as A,aK as J,bp as ye,aL as k,aR as a,aQ as i,aS as e,aT as l,aW as c,aO as B,cw as de,aM as f,b7 as Te,bo as be,cG as X,aV as b,aU as oe,cx as Ze,bk as Xe,bc as y,bi as me,b9 as ea,b1 as H,bm as Le,a_ as Q,b5 as ve,b6 as Ae,eX as He,b3 as re,b2 as aa,bj as ta,bu as la,ea as oa,bd as Je,bh as Oe,eF as ia,fe as Fe,ff as na,f3 as Ce,aN as Ee,fg as j,fh as we,e7 as sa,eE as xe,fi as Ke,fj as ca,fk as pa,aZ as ua,b0 as ze,e2 as Me,cq as Qe,cr as Ve}from"./chat-ChhQLBW1.js";import{_ as ra}from"./SettingAPIKeyDialog.vue_vue_type_script_setup_true_lang-Dg-rVbNO.js";const da=""+new URL("window1-yunSyWkk.png",import.meta.url).href,va=""+new URL("window3-DjMr2HXo.png",import.meta.url).href,ma=""+new URL("window2-D3eE6zm4.png",import.meta.url).href,_a={class:"border"},fa={class:"title p-16 bold"},ga={class:"code layout-bg border-t p-8"},ha={class:"flex-between p-8"},wa={class:"bold"},Aa={class:"pre-wrap p-8 pt-0"},ya={class:"border"},ba={class:"title p-16 bold"},Da={class:"code layout-bg border-t p-8"},ka={class:"flex-between p-8"},Ia={class:"bold"},$a={class:"pre-wrap p-8 pt-0"},Va={class:"border"},Oa={class:"title p-16 bold"},Ca={class:"code layout-bg border-t p-8"},Sa={class:"flex-between p-8"},xa={class:"bold"},La={class:"pre-wrap p-8 pt-0"},Ea=te({__name:"EmbedDialog",props:{data:Object,apiInputParams:String},emits:["addData"],setup(z,{expose:w,emit:E}){const{application:x}=Ye(),O=z,U=A(!1),I=A(""),C=A(""),u=A(""),t=J(()=>O.apiInputParams?"?"+O.apiInputParams:""),n=J(()=>O.apiInputParams?"&"+O.apiInputParams:""),h=J(()=>O.apiInputParams?"?mode=mobile&"+O.apiInputParams:"?mode=mobile");return ye(U,d=>{d||(I.value="",C.value="",u.value="")}),w({open:d=>{I.value=`<iframe
src="${x.location+d+t.value}"
style="width: 100%; height: 100%;"
frameborder="0"
allow="microphone">
</iframe>
`,C.value=`<script
async
defer
src="${x.location}api/embed?protocol=${window.location.protocol.replace(":","")}&host=${window.location.host}&token=${d}${n.value}">
<\/script>
`,u.value=`<iframe
src="${x.location+d+h.value}"
style="width: 100%; height: 100%;"
frameborder="0"
allow="microphone">
</iframe>
`,U.value=!0}}),(d,p)=>{const g=i("AppIcon"),S=i("el-button"),D=i("el-scrollbar"),_=i("el-col"),r=i("el-row"),L=i("el-dialog");return f(),k(L,{title:d.$t("views.applicationOverview.appInfo.embedInWebsite"),modelValue:U.value,"onUpdate:modelValue":p[3]||(p[3]=o=>U.value=o),width:"900",class:"embed-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{default:a(()=>[e(r,{gutter:12},{default:a(()=>[e(_,{span:8},{default:a(()=>[l("div",_a,[l("p",fa,c(d.$t("views.applicationOverview.appInfo.EmbedDialog.fullscreenModeTitle")),1),p[4]||(p[4]=l("img",{src:da,alt:"",class:"ml-8",height:"150"},null,-1)),l("div",ga,[l("div",ha,[l("span",wa,c(d.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(S,{text:"",onClick:p[0]||(p[0]=o=>B(de)(I.value))},{default:a(()=>[e(g,{iconName:"app-copy"})]),_:1})]),e(D,{height:"150",always:""},{default:a(()=>[l("div",Aa,c(I.value),1)]),_:1})])])]),_:1}),e(_,{span:8},{default:a(()=>[l("div",ya,[l("p",ba,c(d.$t("views.applicationOverview.appInfo.EmbedDialog.mobileModeTitle")),1),p[5]||(p[5]=l("img",{src:va,alt:"",class:"ml-8",height:"150"},null,-1)),l("div",Da,[l("div",ka,[l("span",Ia,c(d.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(S,{text:"",onClick:p[1]||(p[1]=o=>B(de)(u.value))},{default:a(()=>[e(g,{iconName:"app-copy"})]),_:1})]),e(D,{height:"150",always:""},{default:a(()=>[l("div",$a,c(u.value),1)]),_:1})])])]),_:1}),e(_,{span:8},{default:a(()=>[l("div",Va,[l("p",Oa,c(d.$t("views.applicationOverview.appInfo.EmbedDialog.floatingModeTitle")),1),p[6]||(p[6]=l("img",{src:ma,alt:"",class:"ml-8",height:"150"},null,-1)),l("div",Ca,[l("div",Sa,[l("span",xa,c(d.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(S,{text:"",onClick:p[2]||(p[2]=o=>B(de)(C.value))},{default:a(()=>[e(g,{iconName:"app-copy"})]),_:1})]),e(D,{height:"150",always:""},{default:a(()=>[l("div",La,c(C.value),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])}}}),Ta=Te(Ea,[["__scopeId","data-v-e2a943f3"]]),Ua={class:"vertical-middle lighter break-all"},Ra={class:"mr-4"},Ba=te({__name:"APIKeyDialog",emits:["addData"],setup(z,{expose:w,emit:E}){const x=be(),{params:{id:O}}=x,U=J(()=>x.path.includes("resource-management")?"systemManage":"workspace"),I=A(),C=A(!1),u=A(!1),t=A(null);ye(C,D=>{D||(t.value=null)});function n(D){I.value.open(D,"APPLICATION")}function h(D){Xe(`${y("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${D.secretKey}?`,y("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2"),{confirmButtonText:y("common.confirm"),cancelButtonText:y("common.cancel"),confirmButtonClass:"color-danger"}).then(()=>{X({type:"applicationKey",systemType:U.value}).delAPIKey(O,D.id,u).then(()=>{me(y("common.deleteSuccess")),g()})}).catch(()=>{})}async function F(D){const _={isActive:!D.isActive},r=_.isActive?y("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):y("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");await X({type:"applicationKey",systemType:U.value}).putAPIKey(O,D.id,_,u).then(()=>(me(r),g(),!0)).catch(()=>!1)}function d(){X({type:"applicationKey",systemType:U.value}).postAPIKey(O,u).then(()=>{g()})}const p=()=>{g(),C.value=!0};function g(){X({type:"applicationKey",systemType:U.value}).getAPIKey(O,u).then(D=>{var _;(_=D.data)==null||_.sort((r,L)=>r.name<L.name?1:-1),t.value=D.data})}function S(){g()}return w({open:p}),(D,_)=>{const r=i("el-button"),L=i("AppIcon"),o=i("el-table-column"),s=i("el-switch"),P=i("el-tooltip"),V=i("el-table"),T=i("el-dialog");return f(),k(T,{title:"API Key",modelValue:C.value,"onUpdate:modelValue":_[1]||(_[1]=N=>C.value=N),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1,"align-center":""},{default:a(()=>[e(r,{type:"primary",class:"mb-16",onClick:d},{default:a(()=>[b(c(D.$t("common.create")),1)]),_:1}),e(V,{data:t.value,class:"mb-16",loading:u.value,height:"420"},{default:a(()=>[e(o,{prop:"secretKey",label:"API Key"},{default:a(({row:N})=>[l("span",Ua,c(N.secretKey),1),e(r,{type:"primary",text:"",onClick:q=>B(de)(N.secretKey)},{default:a(()=>[e(L,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),e(o,{label:D.$t("common.status.label"),width:"70"},{default:a(({row:N})=>[l("div",{onClick:_[0]||(_[0]=oe(()=>{},["stop"]))},[e(s,{size:"small",modelValue:N.isActive,"onUpdate:modelValue":q=>N.isActive=q,"before-change":()=>F(N)},null,8,["modelValue","onUpdate:modelValue","before-change"])])]),_:1},8,["label"]),e(o,{prop:"name",label:D.$t("common.createDate"),width:"170"},{default:a(({row:N})=>[b(c(B(Ze)(N.createTime)),1)]),_:1},8,["label"]),e(o,{label:D.$t("common.operation"),align:"left",width:"90"},{default:a(({row:N})=>[l("span",Ra,[e(P,{effect:"dark",content:D.$t("common.setting"),placement:"top"},{default:a(()=>[e(r,{type:"primary",text:"",onClick:oe(q=>n(N),["stop"])},{default:a(()=>[e(L,{iconName:"app-setting"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),e(P,{effect:"dark",content:D.$t("common.delete"),placement:"top"},{default:a(()=>[e(r,{type:"primary",text:"",onClick:q=>h(N)},{default:a(()=>[e(L,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),e(ra,{ref_key:"SettingAPIKeyDialogRef",ref:I,onRefresh:S},null,512)]),_:1},8,["modelValue"])}}}),Pa={class:"ml-4"},Na={class:"dialog-footer"},Fa=te({__name:"LimitDialog",emits:["refresh"],setup(z,{expose:w,emit:E}){const x=be(),{params:{id:O}}=x,U=J(()=>x.path.includes("resource-management")?"systemManage":"workspace"),I=E,C=A(),u=A({accessNum:0,whiteActive:!0,whiteList:"",authentication_value:"",authentication:!1}),t=A(!1),n=A(!1);ye(t,d=>{d||(u.value={accessNum:0,whiteActive:!0,whiteList:""})});const h=d=>{var p,g;u.value.accessNum=d.accessNum,u.value.whiteActive=d.whiteActive,u.value.whiteList=(p=d.whiteList)!=null&&p.length?(g=d.whiteList)==null?void 0:g.join(`
`):"",u.value.authentication_value=d.authentication_value,u.value.authentication=d.authentication,t.value=!0},F=async d=>{d&&await d.validate((p,g)=>{if(p){const S={whiteList:u.value.whiteList?u.value.whiteList.split(`
`):[],whiteActive:u.value.whiteActive,accessNum:u.value.accessNum,authentication:u.value.authentication,authentication_value:u.value.authentication_value};X({type:"application",systemType:U.value}).putAccessToken(O,S,n).then(()=>{I("refresh"),me(y("common.settingSuccess")),t.value=!1})}})};return w({open:h}),(d,p)=>{const g=i("el-input-number"),S=i("el-form-item"),D=i("el-switch"),_=i("el-input"),r=i("el-form"),L=i("el-button"),o=i("el-dialog");return f(),k(o,{title:d.$t("views.applicationOverview.appInfo.accessControl"),modelValue:t.value,"onUpdate:modelValue":p[6]||(p[6]=s=>t.value=s),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"650"},{footer:a(()=>[l("span",Na,[e(L,{onClick:p[4]||(p[4]=oe(s=>t.value=!1,["prevent"]))},{default:a(()=>[b(c(d.$t("common.cancel")),1)]),_:1}),e(L,{type:"primary",onClick:p[5]||(p[5]=s=>F(C.value)),loading:n.value},{default:a(()=>[b(c(d.$t("common.save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e(r,{"label-position":"top",ref_key:"limitFormRef",ref:C,model:u.value},{default:a(()=>[e(S,{label:d.$t("views.applicationOverview.appInfo.LimitDialog.clientQueryLimitLabel")},{default:a(()=>[e(g,{modelValue:u.value.accessNum,"onUpdate:modelValue":p[0]||(p[0]=s=>u.value.accessNum=s),min:0,step:1,max:1e4,"value-on-clear":0,"controls-position":"right",style:{width:"268px"},"step-strictly":""},null,8,["modelValue"]),l("span",Pa,c(d.$t("views.applicationOverview.appInfo.LimitDialog.timesDays")),1)]),_:1},8,["label"]),e(S,{label:d.$t("views.applicationOverview.appInfo.LimitDialog.whitelistLabel"),onClick:p[2]||(p[2]=oe(()=>{},["prevent"]))},{default:a(()=>[e(D,{size:"small",modelValue:u.value.whiteActive,"onUpdate:modelValue":p[1]||(p[1]=s=>u.value.whiteActive=s)},null,8,["modelValue"])]),_:1},8,["label"]),e(S,null,{default:a(()=>[e(_,{modelValue:u.value.whiteList,"onUpdate:modelValue":p[3]||(p[3]=s=>u.value.whiteList=s),placeholder:d.$t("views.applicationOverview.appInfo.LimitDialog.whitelistPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),Ka={class:"ml-4"},za={class:"mb-4 lighter"},Ma={class:"mb-16 lighter"},Qa=te({__name:"XPackLimitDrawer",emits:["refresh"],setup(z,{expose:w,emit:E}){const x=ea(),O=be(),{params:{id:U}}=O,I=J(()=>O.path.includes("resource-management")?"systemManage":"workspace"),C=E,u=A([]),t=A(),n=A({accessNum:0,whiteActive:!0,whiteList:"",authentication_value:{type:"password"},authentication:!1}),h=A(!1),F=A(!1);ye(h,_=>{_||(n.value={accessNum:0,whiteActive:!0,whiteList:""})});const d=_=>{var r,L;n.value.accessNum=_.accessNum,n.value.whiteActive=_.whiteActive,n.value.whiteList=(r=_.whiteList)!=null&&r.length?(L=_.whiteList)==null?void 0:L.join(`
`):"",n.value.authentication_value=_.authentication_value||{type:"password"},n.value.authentication_value.type==="password"&&!n.value.authentication_value.password_value&&S(),n.value.authentication=_.authentication,h.value=!0,X({type:"application",systemType:I.value}).getChatUserAuthType().then(o=>{u.value=o.data})},p=async _=>{_&&await _.validate((r,L)=>{if(r){const o={whiteList:n.value.whiteList?n.value.whiteList.split(`
`):[],whiteActive:n.value.whiteActive,accessNum:n.value.accessNum,authentication:n.value.authentication,authentication_value:n.value.authentication_value};X({type:"application",systemType:I.value}).putAccessToken(U,o,F).then(()=>{C("refresh"),me(y("common.settingSuccess")),h.value=!1})}})};function g(_=10){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",L=new Uint8Array(_);return window.crypto.getRandomValues(L),Array.from(L).map(o=>r[o%r.length]).join("")}function S(){n.value.authentication_value.password_value=g()}function D(){n.value.authentication&&!n.value.authentication_value.password_value&&(n.value.authentication_value={type:"password",password_value:g()})}return w({open:d}),(_,r)=>{const L=i("el-input-number"),o=i("el-form-item"),s=i("el-switch"),P=i("el-radio"),V=i("AppIcon"),T=i("el-button"),N=i("el-tooltip"),q=i("RefreshRight"),se=i("el-icon"),_e=i("el-input"),ce=i("el-card"),pe=i("el-checkbox"),De=i("el-checkbox-group"),W=i("el-radio-group"),fe=i("el-form"),ne=i("el-drawer");return f(),k(ne,{modelValue:h.value,"onUpdate:modelValue":r[13]||(r[13]=R=>h.value=R),size:"60%"},{header:a(()=>[l("h4",null,c(_.$t("views.applicationOverview.appInfo.accessControl")),1)]),footer:a(()=>[l("div",null,[e(T,{onClick:r[11]||(r[11]=oe(R=>h.value=!1,["prevent"]))},{default:a(()=>[b(c(_.$t("common.cancel")),1)]),_:1}),e(T,{type:"primary",onClick:r[12]||(r[12]=R=>p(t.value)),loading:F.value},{default:a(()=>[b(c(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e(fe,{"label-position":"top",ref_key:"limitFormRef",ref:t,model:n.value,"require-asterisk-position":"right"},{default:a(()=>[e(o,{label:_.$t("views.applicationOverview.appInfo.LimitDialog.clientQueryLimitLabel")},{default:a(()=>[e(L,{modelValue:n.value.accessNum,"onUpdate:modelValue":r[0]||(r[0]=R=>n.value.accessNum=R),min:0,step:1,max:1e4,"value-on-clear":0,"controls-position":"right",style:{width:"268px"},"step-strictly":""},null,8,["modelValue"]),l("span",Ka,c(_.$t("views.applicationOverview.appInfo.LimitDialog.timesDays")),1)]),_:1},8,["label"]),e(o,{label:_.$t("views.applicationOverview.appInfo.LimitDialog.authentication"),onClick:r[2]||(r[2]=oe(()=>{},["prevent"]))},{default:a(()=>[e(s,{size:"small",modelValue:n.value.authentication,"onUpdate:modelValue":r[1]||(r[1]=R=>n.value.authentication=R),onChange:D},null,8,["modelValue"])]),_:1},8,["label"]),n.value.authentication?(f(),k(W,{key:0,modelValue:n.value.authentication_value.type,"onUpdate:modelValue":r[7]||(r[7]=R=>n.value.authentication_value.type=R),class:"card__radio"},{default:a(()=>{var R;return[e(ce,{shadow:"never",class:Le(["mb-16",((R=n.value.authentication_value)==null?void 0:R.type)==="password"?"active":""])},{default:a(()=>[e(P,{value:"password",size:"large"},{default:a(()=>[l("p",za,c(_.$t("views.applicationOverview.appInfo.LimitDialog.authenticationValue")),1)]),_:1}),n.value.authentication_value.type==="password"?(f(),k(o,{key:0,class:"ml-24"},{default:a(()=>[e(_e,{class:"authentication-append-input",modelValue:n.value.authentication_value.password_value,"onUpdate:modelValue":r[4]||(r[4]=M=>n.value.authentication_value.password_value=M),readonly:"",style:{width:"268px"}},{append:a(()=>[e(N,{content:_.$t("common.copy"),placement:"top"},{default:a(()=>[e(T,{type:"primary",text:"",onClick:r[3]||(r[3]=M=>B(de)(n.value.authentication_value.password_value)),style:{margin:"0 0 0 4px !important"}},{default:a(()=>[e(V,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(N,{content:_.$t("common.refresh"),placement:"top"},{default:a(()=>[e(T,{onClick:S,type:"primary",text:"",style:{margin:"0 4px 0 0 !important"}},{default:a(()=>[e(se,null,{default:a(()=>[e(q)]),_:1})]),_:1})]),_:1},8,["content"])]),_:1},8,["modelValue"])]),_:1})):H("",!0)]),_:1},8,["class"]),e(ce,{shadow:"never",class:Le(["mb-16",n.value.authentication_value.type==="login"?"active":""])},{default:a(()=>[e(P,{value:"login",size:"large"},{default:a(()=>[l("p",Ma,[b(c(_.$t("views.system.authentication.title"))+" ",1),e(T,{type:"primary",link:"",onClick:r[5]||(r[5]=M=>B(x).push({name:"applicationChatUser"}))},{default:a(()=>[b(c(_.$t("views.applicationOverview.appInfo.LimitDialog.toSettingChatUser")),1)]),_:1})])]),_:1}),n.value.authentication_value.type==="login"?(f(),k(o,{key:0,label:_.$t("views.applicationOverview.appInfo.LimitDialog.loginMethod"),rules:[{required:!0,message:_.$t("views.applicationOverview.appInfo.LimitDialog.loginMethodRequired"),trigger:"change"}],prop:"authentication_value.login_value",class:"ml-24 border-t",style:{"padding-top":"16px"}},{default:a(()=>[e(De,{modelValue:n.value.authentication_value.login_value,"onUpdate:modelValue":r[6]||(r[6]=M=>n.value.authentication_value.login_value=M)},{default:a(()=>[(f(!0),Q(ve,null,Ae(u.value,M=>(f(),k(pe,{key:M.value,label:M.label,value:M.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):H("",!0)]),_:1},8,["class"])]}),_:1},8,["modelValue"])):H("",!0),e(o,{label:_.$t("views.applicationOverview.appInfo.LimitDialog.whitelistLabel"),onClick:r[9]||(r[9]=oe(()=>{},["prevent"]))},{default:a(()=>[e(s,{size:"small",modelValue:n.value.whiteActive,"onUpdate:modelValue":r[8]||(r[8]=R=>n.value.whiteActive=R)},null,8,["modelValue"])]),_:1},8,["label"]),n.value.whiteActive?(f(),k(o,{key:1},{default:a(()=>[e(_e,{modelValue:n.value.whiteList,"onUpdate:modelValue":r[10]||(r[10]=R=>n.value.whiteList=R),placeholder:_.$t("views.applicationOverview.appInfo.LimitDialog.whitelistPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})):H("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ja=Te(Qa,[["__scopeId","data-v-b88b4522"]]),Ya={class:"dialog-footer"},Xa=te({__name:"DisplaySettingDialog",emits:["refresh"],setup(z,{expose:w,emit:E}){const x=be(),{params:{id:O}}=x,U=J(()=>x.path.includes("resource-management")?"systemManage":"workspace"),I=E,C=A(),u=A({showSource:!1,showExec:!1,language:""}),t=A(null),n=A(!1),h=A(!1);ye(n,p=>{p||(u.value={showSource:!1,showExec:!1,language:""})});const F=(p,g)=>{t.value=g,u.value.showSource=p.showSource,u.value.showExec=p.showExec,u.value.language=p.language,n.value=!0},d=async p=>{p&&await p.validate((g,S)=>{g&&X({type:"application",systemType:U.value}).putAccessToken(O,u.value,h).then(()=>{I("refresh"),me(y("common.settingSuccess")),n.value=!1})})};return w({open:F}),(p,g)=>{const S=i("el-option"),D=i("el-select"),_=i("el-form-item"),r=i("el-checkbox"),L=i("el-space"),o=i("el-form"),s=i("el-button"),P=i("el-dialog");return f(),k(P,{title:p.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),modelValue:n.value,"onUpdate:modelValue":g[5]||(g[5]=V=>n.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"550"},{footer:a(()=>[l("span",Ya,[e(s,{onClick:g[3]||(g[3]=oe(V=>n.value=!1,["prevent"]))},{default:a(()=>[b(c(p.$t("common.cancel")),1)]),_:1}),e(s,{type:"primary",onClick:g[4]||(g[4]=V=>d(C.value)),loading:h.value},{default:a(()=>[b(c(p.$t("common.save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e(o,{"label-position":"top",ref_key:"displayFormRef",ref:C,model:u.value},{default:a(()=>[e(_,null,{default:a(()=>[l("span",null,c(p.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(D,{modelValue:u.value.language,"onUpdate:modelValue":g[0]||(g[0]=V=>u.value.language=V),clearable:""},{default:a(()=>[(f(!0),Q(ve,null,Ae(B(He),V=>(f(),k(S,{key:V.value,label:V.label,value:V.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:a(()=>[e(L,{direction:"vertical",alignment:"start",size:2},{default:a(()=>[e(r,{modelValue:u.value.showSource,"onUpdate:modelValue":g[1]||(g[1]=V=>u.value.showSource=V),label:p.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"]),e(r,{modelValue:u.value.showExec,"onUpdate:modelValue":g[2]||(g[2]=V=>u.value.showExec=V),label:p.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),Ha=""+new URL("display-bg2-BETnngP8.png",import.meta.url).href,Ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAAAOCAYAAABjJ6RkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7dyxDcJAEETRvcWkRIhWqIrKESEBsn3G7sG30XtFfE007fnabvMUj6lFBgDny5jbLz65XuIutgAD9bjmPmwzM6YAYKh1H7aWLUARwQUoIrgARQQXoIjgAhQRXIAiggtQRHABigguQJFctugBwFgZc7ZvvHuPJQAY4hi2x3nNH+AmFr6g66dUAAAAAElFTkSuQmCC",Ga="data:image/png;base64,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",qa=""+new URL("../MaxKB.gif",import.meta.url).href,Wa={class:"flex-between mb-8"},Za=["id"],et={class:"flex align-center"},at={class:"flex",style:{height:"570px"}},tt={class:"setting-preview border border-r-6 mr-16",style:{"min-width":"400px"}},lt={class:"flex-between"},ot={class:"flex align-center"},it={class:"mr-12 ml-24 flex"},nt=["src"],st={class:"ellipsis"},ct={class:"mr-16"},pt={class:"p-16",style:{position:"relative"}},ut={class:"flex"},rt={key:0,class:"avatar"},dt=["width"],vt={class:"flex mt-4",style:{"justify-content":"flex-end"}},mt=["width"],_t={key:0,class:"avatar ml-8"},ft={style:{position:"absolute",bottom:"0","padding-bottom":"8px","box-sizing":"border-box"},class:"p-16 text-center w-full"},gt={class:"float_icon"},ht={key:1,src:qa,height:"50px",style:{width:"40px",height:"40px",display:"block"}},wt={class:"p-8"},At={class:"mb-8"},yt={class:"mb-8"},bt={class:"mb-8"},Dt={class:"flex-between mb-8"},kt={class:"lighter"},It={class:"flex align-center"},$t={class:"flex-between mb-8"},Vt={class:"lighter"},Ot={class:"flex align-center"},Ct={class:"flex-between mb-8"},St={class:"lighter"},xt={class:"flex align-center"},Lt={class:"flex-between mb-8"},Et={class:"lighter"},Tt={class:"flex align-center"},Ut={class:"flex-between mb-8"},Rt={class:"lighter"},Bt={class:"border-t mt-8"},Pt={class:"flex-between mb-8"},Nt={class:"lighter"},Ft={class:"flex align-center"},Kt={class:"flex align-center"},zt={key:0},Mt={class:"dialog-footer"},je=te({__name:"XPackDisplaySettingDialog",emits:["refresh"],setup(z,{expose:w,emit:E}){Ye();const x=be(),{params:{id:O}}=x,U=J(()=>x.path.includes("resource-management")?"systemManage":"workspace"),I=E,C={showSource:!1,showExec:!1,language:"",showHistory:!0,draggable:!0,show_guide:!0,icon:"",icon_url:"",chat_background:"",chat_background_url:"",avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:y("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}},show_avatar:!0,show_user_avatar:!1},u=A(),t=A({showSource:!1,showExec:!1,language:"",icon:"",icon_url:"",showHistory:!1,draggable:!1,show_guide:!1,chat_background:"",chat_background_url:"",avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:y("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}},show_avatar:!0,show_user_avatar:!1}),n=A({avatar:"",float_icon:"",user_avatar:"",icon:"",chat_background:""}),h=A(!1),F=A(!1),d=A(null),p=J(()=>{var o,s;return{background:(o=t.value.custom_theme)==null?void 0:o.theme_color,color:(s=t.value.custom_theme)==null?void 0:s.header_font_color}});function g(){t.value=la.cloneDeep(C),n.value={avatar:"",float_icon:"",user_avatar:"",icon:"",chat_background:""}}const S=(o,s,P)=>{if((o==null?void 0:o.size)/1024/1024<10)t.value[P]=o.raw,n.value[P]=URL.createObjectURL(o.raw),t.value[`${P}_url`]="";else return oa(y("common.EditAvatarDialog.fileSizeExceeded")),!1},D=(o,s)=>{var P,V;d.value=s,t.value.showSource=o.showSource,t.value.showExec=o.showExec,t.value.showHistory=o.showHistory,t.value.language=o.language,t.value.draggable=o.draggable,t.value.show_guide=o.show_guide,n.value.avatar=o.avatar,n.value.icon=o.icon,n.value.chat_background=o.chat_background,n.value.float_icon=o.float_icon,n.value.user_avatar=o.user_avatar,t.value.disclaimer=o.disclaimer,t.value.disclaimer_value=o.disclaimer_value,t.value.disclaimer_value===y("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")&&(t.value.disclaimer_value=y("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")),t.value.avatar_url=o.avatar,t.value.chat_background_url=o.chat_background,t.value.icon_url=o.icon,t.value.user_avatar_url=o.user_avatar,t.value.float_icon_url=o.float_icon,t.value.show_avatar=o.show_avatar,t.value.show_user_avatar=o.show_user_avatar,t.value.custom_theme={theme_color:((P=o.custom_theme)==null?void 0:P.theme_color)||"",header_font_color:((V=o.custom_theme)==null?void 0:V.header_font_color)||"#1f2329"},t.value.float_location=o.float_location,h.value=!0},_=o=>{t.value.disclaimer_value=o},r=o=>{t.value.disclaimer=o},L=async o=>{o&&await o.validate((s,P)=>{if(s){const V=new FormData;Object.keys(t.value).map(T=>{["custom_theme","float_location"].includes(T)?V.append(T,JSON.stringify(t.value[T])):V.append(T,t.value[T])}),X({type:"application",systemType:U.value}).putXpackAccessToken(O,V,F).then(()=>{I("refresh"),me(y("common.settingSuccess")),h.value=!1})}})};return w({open:D}),(o,s)=>{const P=i("Refresh"),V=i("el-icon"),T=i("el-button"),N=i("el-divider"),q=i("el-avatar"),se=i("LogoIcon"),_e=i("AppIcon"),ce=i("Close"),pe=i("el-image"),De=i("auto-tooltip"),W=i("el-text"),fe=i("el-color-picker"),ne=i("el-col"),R=i("el-row"),M=i("el-option"),ge=i("el-select"),v=i("el-upload"),$=i("el-card"),K=i("el-checkbox"),Y=i("el-input-number"),Z=i("el-input"),ie=i("el-tooltip"),G=i("el-space"),ke=i("el-form"),Se=i("el-scrollbar"),Ie=i("el-dialog");return f(),k(Ie,{title:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),width:"900",modelValue:h.value,"onUpdate:modelValue":s[17]||(s[17]=ee=>h.value=ee),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"align-center":"",class:"display-setting-dialog"},{header:a(({titleId:ee,titleClass:he})=>[l("div",Wa,[l("h4",{id:ee,class:Le(he)},c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle")),11,Za),l("div",et,[e(T,{onClick:oe(g,["prevent"]),link:""},{default:a(()=>[e(V,{class:"mr-4"},{default:a(()=>[e(P)]),_:1}),b(" "+c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.restoreDefault")),1)]),_:1}),e(N,{direction:"vertical"})])])]),footer:a(()=>[l("span",Mt,[e(T,{onClick:s[15]||(s[15]=oe(ee=>h.value=!1,["prevent"]))},{default:a(()=>[b(c(o.$t("common.cancel")),1)]),_:1}),e(T,{type:"primary",onClick:s[16]||(s[16]=ee=>L(u.value)),loading:F.value},{default:a(()=>[b(c(o.$t("common.save")),1)]),_:1},8,["loading"])])]),default:a(()=>{var ee,he,$e;return[l("div",at,[l("div",tt,[l("div",{class:"setting-preview-container",style:re({backgroundImage:`url(${(ee=n.value)==null?void 0:ee.chat_background})`})},[l("div",{class:"setting-preview-header",style:re(p.value)},[l("div",lt,[l("div",ot,[l("div",it,[B(aa)((he=n.value)==null?void 0:he.icon)?(f(),k(q,{key:0,shape:"square",size:32,style:{background:"none"}},{default:a(()=>{var m;return[l("img",{src:(m=n.value)==null?void 0:m.icon,alt:""},null,8,nt)]}),_:1})):(f(),k(se,{key:1,height:"32px"}))]),l("h4",st,c((($e=d.value)==null?void 0:$e.name)||o.$t("views.application.form.appName.label")),1)]),l("div",ct,[e(T,{link:""},{default:a(()=>{var m;return[e(_e,{iconName:"app-magnify",style:re([{color:(m=t.value.custom_theme)==null?void 0:m.header_font_color},{"font-size":"20px"}])},null,8,["style"])]}),_:1}),e(T,{link:""},{default:a(()=>{var m;return[e(V,{size:20,class:"color-secondary",style:re({color:(m=t.value.custom_theme)==null?void 0:m.header_font_color})},{default:a(()=>[e(ce)]),_:1},8,["style"])]}),_:1})])])],4),l("div",null,[l("div",pt,[l("div",ut,[t.value.show_avatar?(f(),Q("div",rt,[n.value.avatar?(f(),k(pe,{key:0,src:n.value.avatar,alt:"",fit:"cover",style:{width:"28px",height:"28px",display:"block"}},null,8,["src"])):(f(),k(se,{key:1,height:"28px",style:{width:"28px",height:"28px",display:"block"}}))])):H("",!0),l("img",{src:Ha,alt:"",width:t.value.show_avatar?t.value.show_user_avatar?"232px":"270px":t.value.show_user_avatar?"260px":"300px"},null,8,dt)]),l("div",vt,[l("img",{src:Ja,alt:"",width:t.value.show_user_avatar?t.value.show_avatar?"227px":"255px":t.value.show_avatar?"265px":"292px",style:{"object-fit":"contain"}},null,8,mt),t.value.show_user_avatar?(f(),Q("div",_t,[n.value.user_avatar?(f(),k(pe,{key:0,src:n.value.user_avatar,alt:"",fit:"cover",style:{width:"28px",height:"28px",display:"block"}},null,8,["src"])):(f(),k(q,{key:1,size:28},{default:a(()=>s[18]||(s[18]=[l("img",{src:ta,style:{width:"50%"},alt:""},null,-1)])),_:1,__:[18]}))])):H("",!0)])]),l("div",ft,[s[19]||(s[19]=l("img",{src:Ga,alt:"",class:"w-full"},null,-1)),t.value.disclaimer?(f(),k(W,{key:0,type:"info",class:"mt-8",style:{"font-size":"12px"}},{default:a(()=>[e(De,{content:t.value.disclaimer_value},{default:a(()=>[b(c(t.value.disclaimer_value),1)]),_:1},8,["content"])]),_:1})):H("",!0)])])],4),l("div",gt,[n.value.float_icon?(f(),k(pe,{key:0,src:n.value.float_icon,alt:"",fit:"cover",style:{width:"40px",height:"40px",display:"block"}},null,8,["src"])):(f(),Q("img",ht))])]),e(Se,null,{default:a(()=>[l("div",wt,[e(ke,{ref_key:"displayFormRef",ref:u,model:t.value},{default:a(()=>[e(R,{class:"w-full mb-8"},{default:a(()=>[e(ne,{span:12},{default:a(()=>[l("h5",At,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.customThemeColor")),1),l("div",null,[e(fe,{modelValue:t.value.custom_theme.theme_color,"onUpdate:modelValue":s[0]||(s[0]=m=>t.value.custom_theme.theme_color=m)},null,8,["modelValue"]),b(" "+c(t.value.custom_theme.theme_color?"":o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.default")),1)])]),_:1}),e(ne,{span:12},{default:a(()=>[l("h5",yt,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.headerTitleFontColor")),1),e(fe,{modelValue:t.value.custom_theme.header_font_color,"onUpdate:modelValue":s[1]||(s[1]=m=>t.value.custom_theme.header_font_color=m)},null,8,["modelValue"])]),_:1})]),_:1}),e(R,{class:"w-full mb-8"},{default:a(()=>[l("h5",bt,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(ge,{modelValue:t.value.language,"onUpdate:modelValue":s[2]||(s[2]=m=>t.value.language=m),clearable:""},{default:a(()=>[(f(!0),Q(ve,null,Ae(B(He),m=>(f(),k(M,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e($,{shadow:"never",class:"mb-8"},{default:a(()=>[l("div",Dt,[l("span",kt,c(o.$t("views.application.title")+" LOGO"),1),l("span",It,[e(v,{class:"ml-8",ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(m,ae)=>S(m,ae,"icon")},{default:a(()=>[e(T,{size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])])]),e(W,{type:"info",size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e($,{shadow:"never",class:"mb-8"},{default:a(()=>[l("div",$t,[l("span",Vt,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.chatBackground")),1),l("span",Ot,[e(v,{class:"ml-8",ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(m,ae)=>S(m,ae,"chat_background")},{default:a(()=>[e(T,{size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])])]),e(W,{type:"info",size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.chatBackgroundMessage")),1)]),_:1})]),_:1}),e($,{shadow:"never",class:"mb-8"},{default:a(()=>[l("div",Ct,[l("span",St,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.AIAvatar")),1),l("span",xt,[e(K,{modelValue:t.value.show_avatar,"onUpdate:modelValue":s[3]||(s[3]=m=>t.value.show_avatar=m)},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.display")),1)]),_:1},8,["modelValue"]),e(v,{class:"ml-8",ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(m,ae)=>S(m,ae,"avatar")},{default:a(()=>[e(T,{size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])])]),e(W,{type:"info",size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e($,{shadow:"never",class:"mb-8"},{default:a(()=>[l("div",Lt,[l("span",Et,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.askUserAvatar")),1),l("span",Tt,[e(K,{modelValue:t.value.show_user_avatar,"onUpdate:modelValue":s[4]||(s[4]=m=>t.value.show_user_avatar=m)},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.display")),1)]),_:1},8,["modelValue"]),e(v,{class:"ml-8",ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(m,ae)=>S(m,ae,"user_avatar")},{default:a(()=>[e(T,{size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])])]),e(W,{type:"info",size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e($,{shadow:"never",class:"mb-8"},{default:a(()=>[l("div",Ut,[l("span",Rt,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.floatIcon")),1),e(v,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(m,ae)=>S(m,ae,"float_icon")},{default:a(()=>[e(T,{size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(W,{type:"info",size:"small"},{default:a(()=>[b(c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1}),l("div",Bt,[l("div",Pt,[l("span",Nt,c(o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconDefaultPosition")),1),e(K,{modelValue:t.value.draggable,"onUpdate:modelValue":s[5]||(s[5]=m=>t.value.draggable=m),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.draggablePosition")},null,8,["modelValue","label"])]),e(R,{gutter:8,class:"w-full mb-8"},{default:a(()=>[e(ne,{span:12},{default:a(()=>[l("div",Ft,[e(ge,{modelValue:t.value.float_location.x.type,"onUpdate:modelValue":s[6]||(s[6]=m=>t.value.float_location.x.type=m),style:{width:"80px"}},{default:a(()=>[e(M,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.left"),value:"left"},null,8,["label"]),e(M,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.right"),value:"right"},null,8,["label"])]),_:1},8,["modelValue"]),e(Y,{modelValue:t.value.float_location.x.value,"onUpdate:modelValue":s[7]||(s[7]=m=>t.value.float_location.x.value=m),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),s[20]||(s[20]=l("span",{class:"ml-4"},"px",-1))])]),_:1}),e(ne,{span:12},{default:a(()=>[l("div",Kt,[e(ge,{modelValue:t.value.float_location.y.type,"onUpdate:modelValue":s[8]||(s[8]=m=>t.value.float_location.y.type=m),style:{width:"80px"}},{default:a(()=>[e(M,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.top"),value:"top"},null,8,["label"]),e(M,{label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.bottom"),value:"bottom"},null,8,["label"])]),_:1},8,["modelValue"]),e(Y,{modelValue:t.value.float_location.y.value,"onUpdate:modelValue":s[9]||(s[9]=m=>t.value.float_location.y.value=m),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),s[21]||(s[21]=l("span",{class:"ml-4"},"px",-1))])]),_:1})]),_:1})])]),_:1}),e(G,{direction:"vertical",alignment:"start",size:2},{default:a(()=>[e(K,{modelValue:t.value.showSource,"onUpdate:modelValue":s[10]||(s[10]=m=>t.value.showSource=m),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"]),e(K,{modelValue:t.value.showExec,"onUpdate:modelValue":s[11]||(s[11]=m=>t.value.showExec=m),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail")},null,8,["modelValue","label"]),e(K,{modelValue:t.value.show_guide,"onUpdate:modelValue":s[12]||(s[12]=m=>t.value.show_guide=m),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.displayGuide")},null,8,["modelValue","label"]),e(K,{modelValue:t.value.disclaimer,"onUpdate:modelValue":s[13]||(s[13]=m=>t.value.disclaimer=m),label:o.$t("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimer"),onChange:r},null,8,["modelValue","label"]),t.value.disclaimer?(f(),Q("span",zt,[e(ie,{content:t.value.disclaimer_value,placement:"top"},{default:a(()=>[e(Z,{modelValue:t.value.disclaimer_value,"onUpdate:modelValue":s[14]||(s[14]=m=>t.value.disclaimer_value=m),style:{width:"422px","margin-bottom":"10px"},onChange:_,maxlength:128},null,8,["modelValue"])]),_:1},8,["content"])])):H("",!0)]),_:1})]),_:1},8,["model"])])]),_:1})])]}),_:1},8,["title","modelValue"])}}}),Qt=["id"],jt=te({__name:"LineCharts",props:{id:{type:String,default:"lineChartId"},width:{type:String,default:"100%"},height:{type:String,default:"200px"},option:{type:Object,required:!0}},setup(z){const w=z,E=["rgba(82, 133, 255, 1)","rgba(255, 207, 47, 1)"],x=["rgba(82, 133, 255, 0.2)","rgba(255, 207, 47, 0.2)"];function O(){var t,n,h,F;let I=Fe(document.getElementById(w.id));I==null&&(I=na(document.getElementById(w.id)));const C=[];(n=(t=w.option)==null?void 0:t.yData)!=null&&n.length&&((h=w.option)==null||h.yData.forEach((d,p)=>{C.push({itemStyle:{color:E[p]},areaStyle:d.area?{color:x[p]}:null,...d})}));const u={title:{text:(F=w.option)==null?void 0:F.title,textStyle:{fontSize:"16px"}},tooltip:{trigger:"axis",valueFormatter:d=>Ce(d)},legend:{right:0,itemWidth:8,textStyle:{color:"#646A73"},icon:"circle"},grid:{left:"1%",right:"1%",bottom:"0",top:"18%",containLabel:!0},xAxis:{type:"category",data:w.option.xData},yAxis:{type:"value",splitLine:{lineStyle:{color:"#EFF0F1"}},axisLabel:{formatter:d=>Ce(d)}},series:C};I.setOption(u,!0)}function U(){var I;(I=Fe(document.getElementById(w.id)))==null||I.resize()}return ye(()=>w.option,I=>{I&&Oe(()=>{O()})}),Je(()=>{Oe(()=>{O(),window.addEventListener("resize",U)})}),ia(()=>{window.removeEventListener("resize",U)}),(I,C)=>(f(),Q("div",{id:z.id,ref:"PieChartRef",style:re({height:z.height,width:z.width})},null,12,Qt))}}),Yt=te({name:"AppCharts"}),Xt=te({...Yt,props:{type:{type:String,default:"line"},height:{type:String,default:"200px"},dataZoom:Boolean,option:{type:Object,required:!0}},setup(z){const w={line:jt};return(E,x)=>(f(),k(Ee(w[z.type]),{height:z.height,option:z.option,dataZoom:z.dataZoom,class:"v-charts"},null,8,["height","option","dataZoom"]))}}),Ht={class:"flex align-center ml-8 mr-8"},Jt={class:"ml-12"},Gt={class:"color-secondary lighter mb-4"},qt={key:0,class:"flex align-baseline"},Wt={key:0,class:"ml-12",style:{color:"#f54a45"}},Zt={key:1,class:"flex align-center mr-8"},el={class:"ml-4"},al={class:"ml-4"},tl={class:"p-8"},ll=te({__name:"StatisticsCharts",props:{data:{type:Array,default:()=>[]}},setup(z){const w=z,E=J(()=>[{id:"customerCharts",name:y("views.applicationOverview.monitor.charts.customerTotal"),icon:"app-user",background:"#EBF1FF",color:"#3370FF",sum:[we(j(w.data,"customerNum")||0),we(j(w.data,"customerAddedCount")||0)],option:{title:y("views.applicationOverview.monitor.charts.customerTotal"),xData:j(w.data,"day"),yData:[{name:y("views.applicationOverview.monitor.charts.customerTotal"),type:"line",area:!0,data:j(w.data,"customerNum")},{name:y("views.applicationOverview.monitor.charts.customerNew"),type:"line",area:!0,data:j(w.data,"customerAddedCount")}]}},{id:"chatRecordCharts",name:y("views.applicationOverview.monitor.charts.queryCount"),icon:"app-question",background:"#FFF3E5",color:"#FF8800",sum:[we(j(w.data,"chatRecordCount")||0)],option:{title:y("views.applicationOverview.monitor.charts.queryCount"),xData:j(w.data,"day"),yData:[{type:"line",data:j(w.data,"chatRecordCount")}]}},{id:"tokensCharts",name:y("views.applicationOverview.monitor.charts.tokensTotal"),icon:"app-tokens",background:"#E5FBF8",color:"#00D6B9",sum:[we(j(w.data,"tokensNum")||0)],option:{title:y("views.applicationOverview.monitor.charts.tokensTotal"),xData:j(w.data,"day"),yData:[{type:"line",data:j(w.data,"tokensNum")}]}},{id:"starCharts",name:y("views.applicationOverview.monitor.charts.userSatisfaction"),icon:"app-user-stars",background:"#FEEDEC",color:"#F54A45",sum:[we(j(w.data,"starNum")||0),we(j(w.data,"trampleNum")||0)],option:{title:y("views.applicationOverview.monitor.charts.userSatisfaction"),xData:j(w.data,"day"),yData:[{name:y("views.applicationOverview.monitor.charts.approval"),type:"line",data:j(w.data,"starNum")},{name:y("views.applicationOverview.monitor.charts.disapproval"),type:"line",data:j(w.data,"trampleNum")}]}}]);return(x,O)=>{const U=i("appIcon"),I=i("el-avatar"),C=i("AppIcon"),u=i("el-card"),t=i("el-col"),n=i("el-row");return f(),Q(ve,null,[e(n,{gutter:16},{default:a(()=>[(f(!0),Q(ve,null,Ae(E.value,(h,F)=>(f(),k(t,{xs:12,sm:12,md:12,lg:6,xl:6,key:F,class:"mb-16"},{default:a(()=>[e(u,{shadow:"never"},{default:a(()=>{var d,p,g,S;return[l("div",Ht,[e(I,{size:40,shape:"square",style:re({background:h.background})},{default:a(()=>[e(U,{iconName:h.icon,style:re({fontSize:"24px",color:h.color})},null,8,["iconName","style"])]),_:2},1032,["style"]),l("div",Jt,[l("p",Gt,c(h.name),1),h.id!=="starCharts"?(f(),Q("div",qt,[l("h2",null,c(B(Ce)((d=h.sum)==null?void 0:d[0])),1),h.sum.length>1?(f(),Q("span",Wt,"+"+c(B(Ce)((p=h.sum)==null?void 0:p[1])),1)):H("",!0)])):(f(),Q("div",Zt,[e(C,{iconName:"app-like-color"}),l("h2",el,c((g=h.sum)==null?void 0:g[0]),1),e(C,{class:"ml-12",iconName:"app-oppose-color"}),l("h2",al,c((S=h.sum)==null?void 0:S[1]),1)]))])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}),e(n,{gutter:16},{default:a(()=>[(f(!0),Q(ve,null,Ae(E.value,(h,F)=>(f(),k(t,{xs:24,sm:24,md:24,lg:12,xl:12,key:F,class:"mb-16"},{default:a(()=>[e(u,{shadow:"never"},{default:a(()=>[l("div",tl,[e(Xt,{height:"316px",id:h.id,type:"line",option:h.option},null,8,["id","option"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}}),ol={class:"p-16-24"},il={class:"mb-16"},nl={class:"main-calc-height"},sl={class:"title-decoration-1 mb-16"},cl={class:"title flex align-center"},pl={class:"edit-avatar mr-12"},ul=["src"],rl={class:"flex"},dl={class:"mt-4 mb-16 url-height flex align-center",style:{"margin-bottom":"37px"}},vl={class:"vertical-middle lighter break-all ellipsis-1"},ml={class:"flex"},_l={class:"mt-4 mb-16 url-height"},fl={class:"flex align-center"},gl={class:"flex"},hl={class:"vertical-middle lighter break-all ellipsis-1"},wl={class:"title-decoration-1 mb-16"},Al={class:"mb-16"},yl=te({__name:"index",setup(z){const w=be(),{params:{id:E}}=w,x=J(()=>w.path.includes("resource-management")?"systemManage":"workspace"),O=J(()=>sa.application[x.value]),U=window.location.origin+"/chat-api-doc",I=window.location.origin+`${window.MaxKB.chatPrefix}/api/`,C=A(),u=A(),t=A({}),n=A(null),h=A(!1),F=J(()=>xe(L.value)?"?"+xe(L.value):""),d=J(()=>{var v;return`${window.location.origin}${window.MaxKB.chatPrefix}/`+((v=t.value)==null?void 0:v.accessToken)+F.value}),p=[{value:7,label:y("views.applicationOverview.monitor.pastDayOptions.past7Days")},{value:30,label:y("views.applicationOverview.monitor.pastDayOptions.past30Days")},{value:90,label:y("views.applicationOverview.monitor.pastDayOptions.past90Days")},{value:183,label:y("views.applicationOverview.monitor.pastDayOptions.past183Days")},{value:"other",label:y("common.custom")}],g=A(7),S=A(""),D=A({startTime:"",endTime:""}),_=A(!1),r=A([]),L=A([]);function o(v){window.open(v,"_blank")}const s=A(),P=Ke(null);function V(){Qe([Ve.IS_EE,Ve.IS_PE],"OR")?P.value=je:P.value=Xa,Oe(()=>{var v;P.value==je?X({type:"application",systemType:x.value}).getApplicationSetting(E).then($=>{var K;(K=s.value)==null||K.open($.data,n.value)}):(v=s.value)==null||v.open(t.value,n.value)})}const T=A(),N=Ke(null);function q(){Qe([Ve.IS_EE,Ve.IS_PE],"OR")?N.value=ja:N.value=Fa,Oe(()=>{T.value.open(t.value)})}function se(v){v!=="other"&&(D.value.startTime=ca(v),D.value.endTime=pa,ce())}function _e(v){D.value.startTime=v[0],D.value.endTime=v[1],ce()}function ce(){X({type:"application",systemType:x.value}).getStatistics(E,D.value,_).then(v=>{r.value=v.data})}function pe(){Xe(y("views.applicationOverview.appInfo.refreshToken.msgConfirm1"),y("views.applicationOverview.appInfo.refreshToken.msgConfirm2"),{confirmButtonText:y("common.confirm"),cancelButtonText:y("common.cancel")}).then(()=>{const v={accessTokenReset:!0},$=y("views.applicationOverview.appInfo.refreshToken.refreshSuccess");W(v,$)}).catch(()=>{})}async function De(v){const $={isActive:!v},K=$.isActive?y("common.status.enableSuccess"):y("common.status.disableSuccess");await W($,K).then(()=>!0).catch(()=>!1)}async function W(v,$){X({type:"application",systemType:x.value}).putAccessToken(E,v,h).then(K=>{t.value=K==null?void 0:K.data,me($)})}function fe(){C.value.open()}function ne(){var v;u.value.open((v=t.value)==null?void 0:v.accessToken)}function R(){X({type:"application",systemType:x.value}).getAccessToken(E,h).then(v=>{t.value=v==null?void 0:v.data})}function M(){X({type:"application",systemType:x.value}).getApplicationDetail(E,h).then(v=>{var $,K;n.value=v.data,(K=($=n.value.work_flow)==null?void 0:$.nodes)==null||K.filter(Y=>Y.id==="base-node").map(Y=>{L.value=Y.properties.api_input_field_list?Y.properties.api_input_field_list.map(Z=>({name:Z.variable,value:Z.default_value})):Y.properties.inputFieldList?Y.properties.inputFieldList.filter(Z=>Z.assignment_method==="api_input").map(Z=>({name:Z.variable,value:Z.default_value})):[]})})}function ge(){R()}return Je(()=>{M(),R(),se(g.value)}),(v,$)=>{const K=i("el-avatar"),Y=i("el-text"),Z=i("el-switch"),ie=i("AppIcon"),G=i("el-button"),ke=i("el-tooltip"),Se=i("RefreshRight"),Ie=i("el-icon"),ee=i("el-col"),he=i("Key"),$e=i("el-row"),m=i("el-card"),ae=i("el-option"),Ge=i("el-select"),qe=i("el-date-picker"),We=i("el-scrollbar"),Ue=ua("loading");return f(),Q("div",ol,[l("h2",il,c(v.$t("views.applicationOverview.title")),1),e(We,null,{default:a(()=>[l("div",nl,[e(m,{style:{"--el-card-padding":"24px"}},{default:a(()=>[l("h4",sl,c(v.$t("views.applicationOverview.appInfo.header")),1),ze((f(),k(m,{shadow:"never",class:"overview-card"},{default:a(()=>{var le;return[l("div",cl,[l("div",pl,[e(K,{shape:"square",size:32,style:{background:"none"}},{default:a(()=>{var ue;return[l("img",{src:B(Me)((ue=n.value)==null?void 0:ue.icon,B(Me)("./favicon.ico")),alt:""},null,8,ul)]}),_:1})]),l("h4",null,c(((le=n.value)==null?void 0:le.name)||"-"),1)]),e($e,{gutter:12},{default:a(()=>[e(ee,{span:12,class:"mt-16"},{default:a(()=>{var ue,Re,Be,Pe;return[l("div",rl,[e(Y,{type:"info"},{default:a(()=>[b(c(v.$t("views.applicationOverview.appInfo.publicAccessLink")),1)]),_:1}),e(Z,{modelValue:t.value.isActive,"onUpdate:modelValue":$[0]||($[0]=Ne=>t.value.isActive=Ne),class:"ml-8",size:"small","inline-prompt":"","active-text":v.$t("views.applicationOverview.appInfo.openText"),"inactive-text":v.$t("views.applicationOverview.appInfo.closeText"),"before-change":()=>De(t.value.isActive)},null,8,["modelValue","active-text","inactive-text","before-change"])]),l("div",dl,[l("span",vl,c(d.value),1),e(ke,{effect:"dark",content:v.$t("common.copy"),placement:"top"},{default:a(()=>[e(G,{type:"primary",text:"",onClick:$[1]||($[1]=Ne=>B(de)(d.value))},{default:a(()=>[e(ie,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(ke,{effect:"dark",content:v.$t("common.refresh"),placement:"top"},{default:a(()=>[e(G,{onClick:pe,type:"primary",text:"",style:{"margin-left":"1px"}},{default:a(()=>[e(Ie,null,{default:a(()=>[e(Se)]),_:1})]),_:1})]),_:1},8,["content"])]),l("div",null,[(ue=t.value)!=null&&ue.isActive?(f(),k(G,{key:0,disabled:!((Re=t.value)!=null&&Re.isActive),tag:"a",href:d.value,target:"_blank"},{default:a(()=>[e(ie,{iconName:"app-create-chat",class:"mr-4"}),b(" "+c(v.$t("views.application.operation.toChat")),1)]),_:1},8,["disabled","href"])):(f(),k(G,{key:1,disabled:!((Be=t.value)!=null&&Be.isActive)},{default:a(()=>[e(ie,{iconName:"app-create-chat",class:"mr-4"}),b(" "+c(v.$t("views.application.operation.toChat")),1)]),_:1},8,["disabled"])),O.value.overview_embed(B(E))?(f(),k(G,{key:2,disabled:!((Pe=t.value)!=null&&Pe.isActive),onClick:ne},{default:a(()=>[e(ie,{iconName:"app-export",class:"mr-4"}),b(" "+c(v.$t("views.applicationOverview.appInfo.embedInWebsite")),1)]),_:1},8,["disabled"])):H("",!0),O.value.overview_access(B(E))?(f(),k(G,{key:3,onClick:q},{default:a(()=>[e(ie,{iconName:"app-lock",class:"mr-4"}),b(" "+c(v.$t("views.applicationOverview.appInfo.accessControl")),1)]),_:1})):H("",!0),O.value.overview_display(B(E))?(f(),k(G,{key:4,onClick:V},{default:a(()=>[e(ie,{iconName:"app-setting",class:"mr-4"}),b(" "+c(v.$t("views.applicationOverview.appInfo.displaySetting")),1)]),_:1})):H("",!0)])]}),_:1}),e(ee,{span:12,class:"mt-16"},{default:a(()=>[l("div",ml,[e(Y,{type:"info"},{default:a(()=>[b(c(v.$t("views.applicationOverview.appInfo.apiAccessCredentials")),1)]),_:1})]),l("div",_l,[l("div",null,[e(Y,null,{default:a(()=>[b("API "+c(v.$t("common.fileUpload.document"))+" ",1)]),_:1}),e(G,{type:"primary",link:"",onClick:$[2]||($[2]=ue=>o(U)),class:"vertical-middle lighter break-all"},{default:a(()=>[b(c(U))]),_:1})]),l("div",fl,[l("span",gl,[e(Y,{style:{width:"80px"}},{default:a(()=>$[6]||($[6]=[b("Base URL",-1)])),_:1,__:[6]})]),l("span",hl,c(I+B(E)),1),e(ke,{effect:"dark",content:v.$t("common.copy"),placement:"top"},{default:a(()=>[e(G,{type:"primary",text:"",onClick:$[3]||($[3]=ue=>B(de)(I+B(E)))},{default:a(()=>[e(ie,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"])])]),l("div",null,[O.value.overview_api_key(B(E))?(f(),k(G,{key:0,onClick:fe},{default:a(()=>[e(Ie,{class:"mr-4"},{default:a(()=>[e(he)]),_:1}),b(" "+c(v.$t("views.applicationOverview.appInfo.apiKey")),1)]),_:1})):H("",!0)])]),_:1})]),_:1})]}),_:1})),[[Ue,h.value]])]),_:1}),e(m,{style:{"--el-card-padding":"24px"},class:"mt-16"},{default:a(()=>[l("h4",wl,c(v.$t("views.applicationOverview.monitor.monitoringStatistics")),1),l("div",Al,[e(Ge,{modelValue:g.value,"onUpdate:modelValue":$[4]||($[4]=le=>g.value=le),class:"mr-12",onChange:se,style:{width:"180px"}},{default:a(()=>[(f(),Q(ve,null,Ae(p,le=>e(ae,{key:le.value,label:le.label,value:le.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),g.value==="other"?(f(),k(qe,{key:0,modelValue:S.value,"onUpdate:modelValue":$[5]||($[5]=le=>S.value=le),type:"daterange","start-placeholder":v.$t("views.applicationOverview.monitor.startDatePlaceholder"),"end-placeholder":v.$t("views.applicationOverview.monitor.endDatePlaceholder"),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:_e},null,8,["modelValue","start-placeholder","end-placeholder"])):H("",!0)]),ze((f(),Q("div",null,[e(ll,{data:r.value},null,8,["data"])])),[[Ue,_.value]])]),_:1})])]),_:1}),e(Ta,{ref_key:"EmbedDialogRef",ref:u,data:n.value,"api-input-params":B(xe)(L.value)},null,8,["data","api-input-params"]),e(Ba,{ref_key:"APIKeyDialogRef",ref:C},null,512),(f(),k(Ee(N.value),{ref_key:"LimitDialogRef",ref:T,onRefresh:ge},null,544)),(f(),k(Ee(P.value),{ref_key:"DisplaySettingDialogRef",ref:s,onRefresh:ge},null,544))])}}}),kl=Te(yl,[["__scopeId","data-v-c57cc0c4"]]);export{kl as default};
