import{aJ as d,bb as m,aY as _,aP as t,a_ as u,aM as f,bi as w,eP as W,ea as L,b9 as h}from"./chat-DmcU5C5M.js";import{c as y,W as b,a as C,b as c,d as k}from"./wecom.prod-CCkvMpRe.js";const x={id:"wecom-qr",class:"wecom-qr flex"},z=d({__name:"wecomQrCode",props:{config:{}},setup(r){const i=m(),{login:s}=_(),l=t({}),g=t({isWeComLogin:!1}),n=r;return(async()=>{await w();const o={corpId:n.config.corp_id,agentId:n.config.agent_id},a=localStorage.getItem("MaxKB-locale")||W()||"en-US",p=window.location.origin;try{l.value=y({el:"#wecom-qr",params:{login_type:k.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:p,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?c.zh:c.en,redirect_type:C.callback,panel_size:b.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){s.wecomCallback(e).then(()=>{setTimeout(()=>{i.push({name:"home"})})})},onLoginFail(e){L(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(f(),u("div",x))}}),q=h(z,[["__scopeId","data-v-1f970287"]]);export{q as default};
