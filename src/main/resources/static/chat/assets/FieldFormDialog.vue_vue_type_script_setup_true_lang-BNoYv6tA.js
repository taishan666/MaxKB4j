import{aJ as D,aP as u,be as P,bf as T,bq as E,aQ as s,aL as L,aM as b,aR as n,aS as t,a_ as M,b8 as S,b9 as z,aU as V,aT as J,aV as _,aW as g,bv as O}from"./chat-ESISKCvw.js";const Q={class:"dialog-footer"},A=D({__name:"FieldFormDialog",emits:["refresh"],setup(W,{expose:y,emit:$}){const d=["string","int","dict","array","float"],w=$,f=u(),k=u(!1),m=u(!1),a=u({name:"",type:d[0],source:"reference",isRequired:!0}),q=P({name:[{required:!0,message:T("views.tool.form.paramName.placeholder"),trigger:"blur"}]}),r=u(!1);E(r,e=>{e||(a.value={name:"",type:d[0],source:"reference",isRequired:!0},m.value=!1)});const R=e=>{e&&(a.value=O.cloneDeep(e),m.value=!0),r.value=!0},C=async e=>{e&&await e.validate(l=>{l&&(w("refresh",a.value),r.value=!1)})};return y({open:R}),(e,l)=>{const N=s("el-input"),i=s("el-form-item"),p=s("el-option"),v=s("el-select"),U=s("el-switch"),B=s("el-form"),c=s("el-button"),F=s("el-dialog");return b(),L(F,{title:m.value?e.$t("common.param.editParam"):e.$t("common.param.addParam"),modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=o=>r.value=o),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":""},{footer:n(()=>[J("span",Q,[t(c,{onClick:l[6]||(l[6]=V(o=>r.value=!1,["prevent"]))},{default:n(()=>[_(g(e.$t("common.cancel")),1)]),_:1}),t(c,{type:"primary",onClick:l[7]||(l[7]=o=>C(f.value)),loading:k.value},{default:n(()=>[_(g(m.value?e.$t("common.save"):e.$t("common.add")),1)]),_:1},8,["loading"])])]),default:n(()=>[t(B,{"label-position":"top",ref_key:"fieldFormRef",ref:f,rules:q,model:a.value,"require-asterisk-position":"right"},{default:n(()=>[t(i,{label:e.$t("views.tool.form.paramName.label"),prop:"name"},{default:n(()=>[t(N,{modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>a.value.name=o),placeholder:e.$t("views.tool.form.paramName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:l[1]||(l[1]=o=>a.value.name=a.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(i,{label:e.$t("views.tool.form.dataType.label")},{default:n(()=>[t(v,{modelValue:a.value.type,"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.type=o)},{default:n(()=>[(b(),M(S,null,z(d,o=>t(p,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(i,{label:e.$t("views.tool.form.source.label")},{default:n(()=>[t(v,{modelValue:a.value.source,"onUpdate:modelValue":l[3]||(l[3]=o=>a.value.source=o)},{default:n(()=>[t(p,{label:e.$t("views.tool.form.source.reference"),value:"reference"},null,8,["label"]),t(p,{label:e.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(i,{label:e.$t("views.tool.form.required.label"),onClick:l[5]||(l[5]=V(()=>{},["prevent"]))},{default:n(()=>[t(U,{size:"small",modelValue:a.value.isRequired,"onUpdate:modelValue":l[4]||(l[4]=o=>a.value.isRequired=o)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}});export{A as _};
