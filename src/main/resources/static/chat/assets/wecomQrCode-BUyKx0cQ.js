import{aJ as d,bc as m,aY as _,aP as c,a_ as u,aM as f,bj as w,eR as W,ec as L,ba as h}from"./chat-CJ-GWxNS.js";import{c as y,W as C,a as b,b as t,d as k}from"./wecom.prod-CCkvMpRe.js";const x={id:"wecom-qr",class:"wecom-qr flex"},z=d({__name:"wecomQrCode",props:{config:{}},setup(r){const s=m(),{login:i}=_(),l=c({}),g=c({isWeComLogin:!1}),n=r;return(async()=>{await w();const o={corpId:n.config.corp_id,agentId:n.config.agent_id},a=localStorage.getItem("MaxKB-locale")||W()||"en-US",p=window.location.origin;try{l.value=y({el:"#wecom-qr",params:{login_type:k.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:p,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?t.zh:t.en,redirect_type:b.callback,panel_size:C.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){i.wecomCallback(e).then(()=>{setTimeout(()=>{s.push({name:"home"})})})},onLoginFail(e){L(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(f(),u("div",x))}}),q=h(z,[["__scopeId","data-v-1f970287"]]);export{q as default};
