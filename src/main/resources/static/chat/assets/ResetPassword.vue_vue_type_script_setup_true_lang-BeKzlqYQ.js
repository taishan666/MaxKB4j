import{aJ as B,bb as U,aY as q,aP as r,bf as i,aQ as u,aL as N,aM as S,aR as a,aS as l,aT as c,aW as p,aV as f,cg as x}from"./chat-DmcU5C5M.js";const D={class:"mb-8 lighter"},T={class:"dialog-footer"},J=B({__name:"ResetPassword",props:{emitConfirm:{type:Boolean}},emits:["confirm"],setup(v,{expose:P,emit:_}){const V=v,b=_,y=U(),{login:F}=q(),n=r(!1),o=r({password:"",rePassword:""}),m=r(),h=r();r(!1),r(!1),r(60);const C=r({password:[{required:!0,message:i("views.login.enterPassword"),trigger:"blur"},{min:6,max:20,message:i("views.login.loginForm.password.lengthMessage"),trigger:"blur"}],rePassword:[{required:!0,message:i("views.login.loginForm.rePassword.requiredMessage"),trigger:"blur"},{min:6,max:20,message:i("views.login.loginForm.password.lengthMessage"),trigger:"blur"},{validator:(e,s,d)=>{o.value.password!=o.value.rePassword?d(new Error(i("views.login.loginForm.rePassword.validatorMessage"))):d()},trigger:"blur"}]}),$=()=>{var e,s;o.value={password:"",rePassword:""},n.value=!0,(e=m.value)==null||e.resetFields(),(s=h.value)==null||s.resetFields()},R=()=>{var e;(e=m.value)==null||e.validate().then(()=>{if(V.emitConfirm)b("confirm",o.value);else return x.resetCurrentPassword(o.value).then(()=>{F.logout(),y.push({name:"login"})})})};return P({open:$,close:()=>{n.value=!1}}),(e,s)=>{const d=u("el-input"),w=u("el-form-item"),k=u("el-form"),g=u("el-button"),M=u("el-dialog");return S(),N(M,{modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=t=>n.value=t),title:e.$t("views.login.resetPassword"),"destroy-on-close":"","append-to-body":"","align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:a(()=>[c("div",T,[l(g,{onClick:s[2]||(s[2]=t=>n.value=!1)},{default:a(()=>[f(p(e.$t("common.cancel")),1)]),_:1}),l(g,{type:"primary",onClick:R},{default:a(()=>[f(p(e.$t("common.save")),1)]),_:1})])]),default:a(()=>[l(k,{class:"reset-password-form",ref_key:"resetPasswordFormRef1",ref:m,model:o.value,rules:C.value},{default:a(()=>[c("p",D,p(e.$t("views.login.newPassword")),1),l(w,{prop:"password",style:{"margin-bottom":"8px"}},{default:a(()=>[l(d,{type:"password",class:"input-item",modelValue:o.value.password,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.password=t),placeholder:e.$t("views.login.enterPassword"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1}),l(w,{prop:"rePassword"},{default:a(()=>[l(d,{type:"password",class:"input-item",modelValue:o.value.rePassword,"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.rePassword=t),placeholder:e.$t("views.login.enterPassword"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{J as _};
