const b=typeof window<"u"?window:void 0,S=typeof document<"u"?document:void 0,p=typeof navigator<"u"?navigator:void 0,P=typeof location<"u"?location:void 0;function Me(){return(P==null?void 0:P.href)||""}const y=(p==null?void 0:p.userAgent)||"",Ae=(p==null?void 0:p.platform)||"";var Ce;(Ce=y==null?void 0:y.match(/wxwork\/([\d.]+)/i))==null||Ce[1];Re();function Re(){const e=(p==null?void 0:p.maxTouchPoints)??1,t=/Mac/i.test(Ae);return t&&e>2?{isMac:!1,isIOS:!0}:{isMac:t,isIOS:/\b(iPhone|iPad|iPod)\b/i.test(y)}}const Le={config:"preVerifyJsApi",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareWechat:"menu:share:wechat",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress",getBrandWCPayRequest:"getBrandWCPayRequest"};for(const e of Object.keys(Le));function xe(...e){console.error("[wwsdk]",...e)}Me();function We(e,t,n){if(Oe(e))try{return e.call(n,t)}catch(o){xe(o)}}function Oe(e){return typeof e=="function"}let V=!!(b!=null&&b.WeixinJSBridge);Promise.resolve();V||new Promise(e=>{S==null||S.addEventListener("WeixinJSBridgeReady",()=>{V=!0,e()})});function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q,B,D,z,j,J,Y,G,H,K,$,Q,U,Z,X,ee,te,ne,oe,ae,re,ie,se,ce,le,ue,de;function Ie(e){const t=document.createElement("iframe"),{style:n}=t;n.display="block",n.border="none",n.background="transparent",t.referrerPolicy="origin",t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true");const o=Ne(e);return o&&o.appendChild(t),t}function Ne(e){return typeof e=="string"?document.querySelector(e):e}(function(e){e.CLProximityUnknown="0",e.CLProximityImmediate="1",e.CLProximityNear="2",e.CLProximityFar="3"})(q||(q={})),function(e){e.wgs84="wgs84",e.gcj02="gcj02"}(B||(B={})),function(e){e.wifi="wifi",e.network2g="2g",e.network3g="3g",e.network4g="4g",e.none="none",e.unknown="unknown"}(D||(D={})),function(e){e.video="video",e.image="image",e.file="file",e.video_and_image="video_and_image"}(z||(z={})),function(e){e.video="video",e.image="image",e.file="file"}(j||(j={})),function(e){e.original="original",e.compressed="compressed"}(J||(J={})),function(e){e.album="album",e.camera="camera"}(Y||(Y={})),function(e){e.normal="normal",e.batch="batch",e.front="front",e.batch_front="batch_front"}(G||(G={})),function(e){e[e.common=0]="common",e[e.corp_training=1]="corp_training",e[e.edu_normal_class=2]="edu_normal_class",e[e.edu_small_class=3]="edu_small_class"}(H||(H={})),function(e){e[e.other=0]="other",e[e.doc=3]="doc",e[e.sheet=4]="sheet",e[e.form=5]="form",e[e.slide=6]="slide",e[e.mindmap=7]="mindmap",e[e.flowchart=8]="flowchart",e[e.smartsheet=10]="smartsheet"}(K||(K={})),function(e){e[e.normal=0]="normal",e[e.scan=1]="scan"}($||($={})),function(e){e[e.chat=0]="chat",e[e.qrcode=1]="qrcode"}(Q||(Q={})),function(e){e.contact_profile="contact_profile",e.single_chat_tools="single_chat_tools",e.group_chat_tools="group_chat_tools",e.chat_attachment="chat_attachment",e.single_kf_tools="single_kf_tools",e.chain_single_chat_tools="chain_single_chat_tools",e.chain_group_chat_tools="chain_group_chat_tools",e.internal_group_chat_board="internal_group_chat_board",e.normal="normal"}(U||(U={})),function(e){e.permission="permission",e.datazone_permission="datazone_permission"}(Z||(Z={})),function(e){e.release="release",e.trial="trial",e.develop="develop"}(X||(X={})),function(e){e[e.internal=1]="internal",e[e.external=2]="external"}(ee||(ee={})),function(e){e[e.mediaid=1]="mediaid",e[e.url=2]="url",e[e.localId=4]="localId"}(te||(te={})),function(e){e.None="None",e.HWOpenTalk="HWOpenTalk",e.VoIP="VoIP",e.SystemCall="SystemCall"}(ne||(ne={})),function(e){e.qrCode="qrCode",e.barCode="barCode"}(oe||(oe={})),function(e){e.single="single",e.multi="multi"}(ae||(ae={})),function(e){e.department="department",e.user="user"}(re||(re={})),function(e){e.single="single",e.multi="multi"}(ie||(ie={})),function(e){e.department="department",e.user="user"}(se||(se={})),function(e){e[e.all=0]="all",e[e.unselected=1]="unselected"}(ce||(ce={})),function(e){e.single="single",e.multi="multi"}(le||(le={})),function(e){e.create_approval="10001",e.view_approval="10002"}(ue||(ue={})),function(e){e.link="link",e.text="text"}(de||(de={}));const Fe=Be();let Ve=0;function qe(){return`${Fe}-${Ve++}`}function Be(){return Math.random().toString(36).slice(2)}function De(e){return e&&typeof e=="object"?{...e,message:e.message,stack:e.stack}:e}function pe(e){try{return typeof e=="string"?JSON.parse(e):e}catch{}}function ze(e,t){const n=new Map;return{invoke:function(o,a){return a!=null&&a.dropResult?(e({type:"ww-iframe-handle:call",args:o},a),Promise.resolve(void 0)):new Promise((s,c)=>{const l=qe();n.set(l,{resolve:s,reject:c}),e({type:"ww-iframe-handle:call",uid:l,args:o},a)})},handleCallMessage:async function(o,a){if(!o.uid)return t(o.args,a);try{e({type:"ww-iframe-handle:response",uid:o.uid,kind:"resolve",args:await t(o.args,a)})}catch(s){throw e({type:"ww-iframe-handle:response",uid:o.uid,kind:"reject",args:De(s)}),s}},handleResponseMessage:function(o){const a=n.get(o.uid);a&&(a[o.kind](o.args),n.delete(o.uid))}}}function je(e,t,n){const o=[];let a=!1,s=!1;function c(i){if(i.origin!==t||e.contentWindow!==i.source)return;const r=pe(i.data);typeof(r==null?void 0:r.type)=="string"&&r.type.startsWith("ww-iframe-handle:")&&F(r,i)}window.addEventListener("message",c);const l=new MessageChannel;l.port1.onmessage=i=>{F(pe(i.data),i)};const{invoke:u,handleCallMessage:Ee,handleResponseMessage:ke}=ze(function(i,r){a?_(i,r):o.push({msg:i,opts:r})},n);function F(i,r){switch(i.type){case"ww-iframe-handle:ready":return function(w){if(!a){a=!0,w.supportChannel&&(_({type:"ww-iframe-handle:set-port",port:l.port2},{transfer:[l.port2],serialize:!1}),s=!0);for(const m of o)_(m.msg,m.opts)}}(i);case"ww-iframe-handle:call":return Ee(i,r);case"ww-iframe-handle:response":return void ke(i)}}function _(i,r){var m;const w=(r==null?void 0:r.serialize)===!1?i:JSON.stringify(i);s?l.port1.postMessage(w,r==null?void 0:r.transfer):(m=e.contentWindow)==null||m.postMessage(w,t,r==null?void 0:r.transfer)}return e.addEventListener("load",()=>{a||_({type:"ww-iframe-handle:init"})}),{el:e,invoke:u,dispose:function(){window.removeEventListener("message",c),l.port1.onmessage=null}}}function Je(e,t,n){We(t[e.name],e.payload||e.data,n)}for(var ut={},Ye="await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),Ge={},E=0,fe=Ye;E<fe.length;E++){var He=fe[E];Ge[He]=!0}var he,me,ge,f;(function(e){e.serviceApp="ServiceApp",e.corpApp="CorpApp"})(he||(he={})),function(e){e.zh="zh",e.en="en"}(me||(me={})),function(e){e.top="top",e.callback="callback",e.self="self"}(ge||(ge={})),function(e){e.middle="middle",e.small="small"}(f||(f={}));const _e={[f.middle]:["480px","416px"],[f.small]:["320px","380px"]};function dt(e){var l;const{width:t,height:n}=Ke((l=e.params)==null?void 0:l.panel_size),o=Ie(e.el),{style:a}=o;a.width=t,a.height=n;const{dispose:s}=je(o,"https://login.work.weixin.qq.com",u=>{if(u.type==="call")return Je(u,e);throw new Error(`Unknown message type '${u.type}'`)}),c=new URL("https://login.work.weixin.qq.com/wwlogin/sso/login");for(const u of Object.keys(e.params||{}))c.searchParams.set(u,e.params[u]);return c.searchParams.set("version","2.3.1"),o.src=c.href,{el:o,unmount(){var u;s(),(u=o.parentNode)==null||u.removeChild(o)}}}function Ke(e=f.middle){const t=_e[e]||_e[f.middle];return{width:t[0],height:t[1]}}function Te(e){return typeof Symbol=="function"?Symbol(e):e}var we;(function(e){e[e.int32=1]="int32",e[e.float64=2]="float64",e[e.boolean=3]="boolean",e[e.null=4]="null",e[e[void 0]=5]="undefined",e[e.valueRef=6]="valueRef"})(we||(we={}));var ye,ve;(function(e){e[e.set=1]="set",e[e.call=2]="call",e[e.dispose=3]="dispose"})(ye||(ye={})),function(e){e[e.value=1]="value",e[e.ref=2]="ref"}(ve||(ve={}));const O=Te("__WECOM_REFLECT_ID__");function $e(e,t){return t.get?t.get.call(e):t.value}function be(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function v(e,t){return $e(e,be(e,t,"get"))}function Qe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function C(e,t,n){Qe(e,t),t.set(e,n)}function Ue(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function T(e,t,n){return Ue(e,be(e,t,"set"),n),n}const x=new WeakMap,W=new WeakMap;function I(e,t){x.set(e,t),W.set(t,e)}function Se(e){return x.has(e)?x.get(e):e}function Pe(e){return W.has(e)?W.get(e):e}var k=new WeakMap,M=new WeakMap;let Ze=O;class Xe{setTransform(t){v(this,M).setTransform(t),v(this,k).call(this,"setTransform",[t])}constructor(t,n){g(this,Ze,void 0),C(this,k,{writable:!0,value:void 0}),C(this,M,{writable:!0,value:void 0}),T(this,k,t),T(this,M,n),t.bind(this),I(this,n)}}var A=new WeakMap,R=new WeakMap;let et=O;class L{addColorStop(t,n){v(this,R).addColorStop(t,n),v(this,A).call(this,"addColorStop",[t,n])}constructor(t,n){g(this,et,void 0),C(this,A,{writable:!0,value:void 0}),C(this,R,{writable:!0,value:void 0}),T(this,A,t),T(this,R,n),t.bind(this),I(this,n)}}const tt=["fillStyle","filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle"],nt=["direction","font","fontKerning","fontStretch","fontVariantCaps","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","textAlign","textBaseline","textRendering","wordSpacing"],ot=["arc","arcTo","beginPath","bezierCurveTo","clip","closePath","ellipse","lineTo","moveTo","quadraticCurveTo","rect","reset","resetTransform","restore","rotate","roundRect","save","scale","setLineDash","setTransform","transform","translate"],at=["clearRect","drawFocusIfNeeded","drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],rt=["getContextAttributes","getLineDash","getTransform","isContextLost","isPointInPath","isPointInStroke","measureText"],it=[["createConicGradient",L],["createLinearGradient",L],["createPattern",Xe],["createRadialGradient",L]],d=Te("__WECOM_INTERNAL__");let st=d,ct=O;class lt{constructor(t,n,o){g(this,"canvas",void 0),g(this,st,void 0),g(this,ct,void 0),this.canvas=t,this[d]={store:n,native:o,props:Object.create(null)},n.bind(this),I(this,o)}}const h=lt.prototype;for(const e of tt)Object.defineProperty(h,e,{configurable:!0,enumerable:!0,get(){const{native:t,props:n}=this[d];return n[e]??Pe(t[e])},set(t){const{store:n,props:o}=this[d];o[e]=Se(t),n.set(this,e,t)}});for(const e of nt)Object.defineProperty(h,e,{configurable:!0,enumerable:!0,get(){return Pe(this[d].native[e])},set(t){const{store:n,native:o}=this[d];o[e]=Se(t),n.set(this,e,t)}});for(const e of rt)h[e]=function(...t){const{native:n}=this[d];return N(n,e,t)};for(const e of ot)h[e]=function(...t){const{store:n,native:o}=this[d];N(o,e,t),n.call(this,e,t)};for(const e of at)h[e]=function(...t){const{store:n}=this[d];n.call(this,e,t)};for(const[e,t]of it)h[e]=function(...n){const{store:o,native:a}=this[d],s=N(a,e,n),c=new t(o,s);return o.call(this,e,n,c),c};function N(e,t,n){switch(n.length){case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4]);case 6:return e[t](n[0],n[1],n[2],n[3],n[4],n[5]);default:return e[t](...n)}}export{f as W,ge as a,me as b,dt as c,he as d};
