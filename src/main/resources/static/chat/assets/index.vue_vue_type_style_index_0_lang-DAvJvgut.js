import{aJ as L,bc as Q,bp as R,aK as c,aQ as p,aZ as W,a_ as h,b1 as k,aM as a,aL as m,aR as v,b8 as z,b9 as E,b0 as J,aS as A,aT as I,aW as C,e5 as H,ba as O,aY as U,f0 as Y,aP as K,bg as Z,eH as j,aO as q,e3 as V,b3 as G,ex as X,cH as F,cq as x}from"./chat-ESISKCvw.js";const ee={key:0,class:"sidebar-item"},ae={key:1},te=L({__name:"SidebarItem",props:{menu:{},activeMenu:{}},setup(N){const n=N,i=Q(),l=R(),{params:{id:d,type:t,from:f}}=l;function b(){return H(t)?n.menu.name!=="AppHitTest":!0}function w(e){H(t)&&(e==null?void 0:e.name)==="AppSetting"&&i.push({path:`/application/${f}/${d}/workflow`})}const o=c(()=>{var e,r,u,y,g;return n.activeMenu===n.menu.path?((e=n.menu.meta)==null?void 0:e.iconActive)||((u=(r=n.menu)==null?void 0:r.meta)==null?void 0:u.icon):(g=(y=n.menu)==null?void 0:y.meta)==null?void 0:g.icon});return(e,r)=>{var B,M;const u=p("AppIcon"),y=p("el-icon"),g=p("sidebar-item",!0),D=p("el-sub-menu"),_=p("el-menu-item"),P=W("hasPermission");return(!e.menu.meta||!e.menu.meta.hidden)&&b()?(a(),h("div",ee,[(B=e.menu)!=null&&B.children&&((M=e.menu)==null?void 0:M.children.length)>0?(a(),m(D,{key:0,index:e.menu.path,"popper-class":"sidebar-container-popper"},{title:v(()=>{var s;return[A(y,null,{default:v(()=>[e.menu.meta&&e.menu.meta.icon?(a(),m(u,{key:0,iconName:o.value,class:"sidebar-icon"},null,8,["iconName"])):k("",!0)]),_:1}),I("span",null,C(e.$t((s=e.menu.meta)==null?void 0:s.title)),1)]}),default:v(()=>{var s;return[(a(!0),h(z,null,E((s=e.menu)==null?void 0:s.children,($,S)=>{var T;return J((a(),m(g,{key:S,menu:$,activeMenu:e.activeMenu},null,8,["menu","activeMenu"])),[[P,(T=$.meta)==null?void 0:T.permission]])}),128))]}),_:1},8,["index"])):(a(),m(_,{key:1,ref:"subMenu",index:e.menu.path,"popper-class":"sidebar-popper",onClick:r[0]||(r[0]=s=>w(e.menu))},{title:v(()=>{var s;return[e.menu.meta&&e.menu.meta.icon?(a(),m(u,{key:0,iconName:o.value,class:"sidebar-icon"},null,8,["iconName"])):k("",!0),e.menu.meta&&e.menu.meta.title?(a(),h("span",ae,C(e.$t((s=e.menu.meta)==null?void 0:s.title)),1)):k("",!0)]}),_:1},8,["index"]))])):k("",!0)}}}),ne=O(te,[["__scopeId","data-v-0d71bc99"]]),se={class:"breadcrumb ml-4 mt-4 mb-12 flex"},oe={class:"flex align-center"},re=["src"],ue=["title"],ie=L({__name:"index",setup(N){const{common:n}=U(),i=R(),{meta:{activeMenu:l},params:{id:d,folderId:t},query:{isShared:f}}=i,b=c(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),w=c(()=>t==="share"||f==="true");Y((_,P)=>{n.saveBreadcrumb(null)});const o=K(!1),e=K(null),r=c(()=>l.includes("application")),u=c(()=>l.includes("knowledge")),y=c(()=>i.path.includes("shared")?"/system/shared"+l:i.path.includes("resource-management")?"/system/resource-management"+l:l);function g(){o.value=!0,F({type:"knowledge",isShared:w.value,systemType:b.value}).getKnowledgeDetail(d).then(_=>{e.value=_.data,o.value=!1}).catch(()=>{o.value=!1})}function D(){o.value=!0,F({type:"application",systemType:b.value}).getApplicationDetail(d).then(_=>{e.value=_.data,o.value=!1}).catch(()=>{o.value=!1})}return Z(()=>{u.value?g():r.value&&D()}),(_,P)=>{var M,s,$;const B=p("el-avatar");return a(),h("div",se,[A(j,{to:y.value,class:"mt-4"},null,8,["to"]),I("div",oe,[r.value?(a(),m(B,{key:0,shape:"square",size:24,style:{background:"none"},class:"mr-8"},{default:v(()=>{var S;return[I("img",{src:q(V)((S=e.value)==null?void 0:S.icon,q(V)("./favicon.ico")),alt:""},null,8,re)]}),_:1})):r.value?(a(),m(G,{key:1,height:"28px",style:{width:"28px",height:"28px",display:"block"},class:"mr-8"})):u.value?(a(),m(X,{key:2,type:(M=e.value)==null?void 0:M.type,class:"mr-8"},null,8,["type"])):k("",!0),I("div",{class:"ellipsis",title:(s=e.value)==null?void 0:s.name},C(($=e.value)==null?void 0:$.name),9,ue)])])}}}),le=O(ie,[["__scopeId","data-v-52e69a04"]]),ce={class:"sidebar p-8"},me={key:0},de=L({__name:"index",setup(N){const n=R(),i=c(()=>{const{meta:t}=n;return t==null?void 0:t.breadcrumb}),l=c(()=>{const{meta:t}=n;return x(t.parentPath,t.parentName)}),d=c(()=>{const{path:t,meta:f}=n;return f.active||t});return(t,f)=>{const b=p("el-menu"),w=p("el-scrollbar"),o=W("hasPermission");return a(),h("div",ce,[i.value?(a(),h("div",me,[A(le)])):k("",!0),A(w,{"wrap-class":"scrollbar-wrapper"},{default:v(()=>[A(b,{"default-active":d.value,router:""},{default:v(()=>[(a(!0),h(z,null,E(l.value,(e,r)=>{var u;return J((a(),m(ne,{key:r,menu:e,activeMenu:d.value},null,8,["menu","activeMenu"])),[[o,(u=e.meta)==null?void 0:u.permission]])}),128))]),_:1},8,["default-active"])]),_:1})])}}});export{de as _};
