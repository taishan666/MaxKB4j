import{cr as ve,cs as ye,aJ as G,aY as ee,aK as se,aP as R,bo as de,bf as S,aQ as l,aZ as ae,aL as y,aM as c,bl as Y,aR as o,b0 as le,aT as n,a_ as L,b1 as k,aW as s,aV as E,aO as e,ct as ie,aS as t,cu as ge,bn as _e,cv as ce,aU as Z,cw as he,bk as be,bj as re,bb as me,bg as we,b7 as q,bd as ue,cp as B,cq as X,cx as b,cy as J,cz as j,b8 as Ae,cA as ke,b9 as te,b5 as Q,cB as $e,cC as Ie,cD as Ce,aN as Re}from"./chat-DmcU5C5M.js";import{_ as Ee}from"./ResetPassword.vue_vue_type_script_setup_true_lang-BeKzlqYQ.js";import{_ as xe,s as H}from"./SettingAPIKeyDialog.vue_vue_type_script_setup_true_lang-CvHzRnAY.js";const fe="/license",De=M=>ye(`${fe}/profile`,void 0,M),Se=(M,a)=>ve(`${fe}/profile`,M,void 0,a),pe={getLicense:De,putLicense:Se},Ne=["id"],Pe={class:"about-ui"},Ke={class:"flex"},Oe={class:"label"},Te={class:"flex"},Me={class:"label"},Ue={key:0,class:"color-danger"},Ve={class:"flex"},Le={class:"label"},We={class:"flex"},ze={class:"label"},Be={class:"flex"},Ge={class:"label"},Fe={class:"flex"},Xe={class:"label"},je={key:0,class:"mt-16 flex align-center"},He={class:"border-t text-center mt-16 p-16 pb-0"},Ye=G({__name:"AboutDialog",setup(M,{expose:a}){const{user:p,theme:d}=ee(),g=se(()=>d.isDefaultTheme()),f=R(!1),h=R(!1),_=R(null),w=R(!1);de(f,r=>{r||(w.value&&window.location.reload(),w.value=!1)});const N=()=>{p.showXpack()&&u(),f.value=!0},A=r=>{const $=new FormData;$.append("license_file",r.raw),pe.putLicense($,h).then(P=>{u(),w.value=!0})},F=se(()=>p?p.getEditionName()==="PE"?S("layout.about.edition.professional"):p.getEditionName()==="EE"?S("layout.about.edition.enterprise"):S("layout.about.edition.community"):"-");function u(){pe.getLicense(h).then(r=>{var $;_.value=($=r.data)==null?void 0:$.license})}return a({open:N}),(r,$)=>{const P=l("LogoFull"),W=l("el-button"),i=l("el-upload"),m=l("el-text"),U=l("el-dialog"),K=ae("hasPermission"),x=ae("loading");return c(),y(U,{modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=D=>f.value=D),class:Y(["about-dialog border-r-6",g.value?"":"dialog-custom-header"])},{header:o(({titleId:D,titleClass:I})=>[n("div",{class:Y(["logo flex-center",I]),id:D},[t(P,{height:"59px"})],10,Ne)]),default:o(()=>{var D,I,O,V,z,C,v;return[le((c(),L("div",Pe,[n("div",Ke,[n("span",Oe,s(r.$t("layout.about.authorize")),1),n("span",null,s(((D=_.value)==null?void 0:D.corporation)||"-"),1)]),n("div",Te,[n("span",Me,s(r.$t("layout.about.expiredTime")),1),n("span",null,[E(s(((I=_.value)==null?void 0:I.expired)||"-")+" ",1),(O=_.value)!=null&&O.expired&&e(ie)((V=_.value)==null?void 0:V.expired)?(c(),L("span",Ue,"（"+s(e(ie)((z=_.value)==null?void 0:z.expired))+"）",1)):k("",!0)])]),n("div",Ve,[n("span",Le,s(r.$t("layout.about.edition.label")),1),n("span",null,s(F.value),1)]),n("div",We,[n("span",ze,s(r.$t("layout.about.version")),1),n("span",null,s(e(p).version),1)]),n("div",Be,[n("span",Ge,s(r.$t("layout.about.serialNo")),1),n("span",null,s(((C=_.value)==null?void 0:C.serialNo)||"-"),1)]),n("div",Fe,[n("span",Xe,s(r.$t("layout.about.remark")),1),n("span",null,s(((v=_.value)==null?void 0:v.remark)||"-"),1)]),e(p).showXpack()?(c(),L("div",je,[le((c(),y(i,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,"on-change":A},{default:o(()=>[t(W,{class:"border-primary mr-16"},{default:o(()=>[E(s(r.$t("layout.about.update"))+" License ",1)]),_:1})]),_:1})),[[K,new(e(ge))("ADMIN")]])])):k("",!0)])),[[x,h.value]]),n("div",He,[t(m,{type:"info"},{default:o(()=>[E(s(r.$t("layout.copyright")),1)]),_:1})])]}),_:1},8,["modelValue","class"])}}}),qe={style:{"margin-top":"10px"}},Je={class:"vertical-middle lighter break-all"},Qe={class:"mr-4"},Ze=G({__name:"APIKeyDialog",props:{userId:{type:String,default:""}},emits:["addData"],setup(M,{expose:a,emit:p}){const d=_e(),{params:{id:g}}=d,f=window.location.origin+"/doc/",h=R(),_=R(!1),w=R(!1),N=R(null);de(_,i=>{i||(N.value=null)});function A(i){h.value.open(i,"USER")}function F(i){be(`${S("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${i.secretKey}?`,S(S("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2")),{confirmButtonText:S("common.confirm"),cancelButtonText:S("common.cancel"),confirmButtonClass:"color-danger"}).then(()=>{H.delAPIKey(i.id,w).then(()=>{re(S("common.deleteSuccess")),P()})}).catch(()=>{})}function u(i,m){const U={isActive:i},K=i?S("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):S("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");H.putAPIKey(m.id,U,w).then(x=>{re(K),P()})}function r(){H.postAPIKey(w).then(i=>{P()})}const $=()=>{P(),_.value=!0};function P(){H.getAPIKey().then(i=>{i.data.sort((m,U)=>m.name<U.name?1:-1),N.value=i.data})}function W(){P()}return a({open:$}),(i,m)=>{const U=l("el-text"),K=l("AppIcon"),x=l("el-button"),D=l("el-card"),I=l("el-table-column"),O=l("el-switch"),V=l("el-tooltip"),z=l("el-table"),C=l("el-dialog");return c(),y(C,{title:i.$t("layout.apiKey"),modelValue:_.value,"onUpdate:modelValue":m[2]||(m[2]=v=>_.value=v),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[t(D,{shadow:"never",class:"layout-bg mb-16"},{default:o(()=>[t(U,{type:"info",class:"color-secondary"},{default:o(()=>[E(s(i.$t("layout.apiServiceAddress")),1)]),_:1}),n("p",qe,[n("span",{class:"vertical-middle lighter break-all"},s(f)),t(x,{type:"primary",text:"",onClick:m[0]||(m[0]=v=>e(ce)(f))},{default:o(()=>[t(K,{iconName:"app-copy"})]),_:1})])]),_:1}),t(x,{type:"primary",class:"mb-16",onClick:r},{default:o(()=>[E(s(i.$t("common.create")),1)]),_:1}),t(z,{data:N.value,class:"mb-16",loading:w.value},{default:o(()=>[t(I,{prop:"secretKey",label:"API Key"},{default:o(({row:v})=>[n("span",Je,s(v.secretKey),1),t(x,{type:"primary",text:"",onClick:T=>e(ce)(v.secretKey)},{default:o(()=>[t(K,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),t(I,{label:i.$t("common.status.label"),width:"80"},{default:o(({row:v})=>[n("div",{onClick:m[1]||(m[1]=Z(()=>{},["stop"]))},[t(O,{size:"small",modelValue:v.isActive,"onUpdate:modelValue":T=>v.isActive=T,onChange:T=>u(T,v)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1},8,["label"]),t(I,{prop:"name",label:i.$t("common.createDate"),width:"170"},{default:o(({row:v})=>[E(s(e(he)(v.createTime)),1)]),_:1},8,["label"]),t(I,{label:i.$t("common.setting"),align:"left",width:"80"},{default:o(({row:v})=>[n("span",Qe,[t(V,{effect:"dark",content:i.$t("common.setting"),placement:"top"},{default:o(()=>[t(x,{type:"primary",text:"",onClick:Z(T=>A(v),["stop"])},{default:o(()=>[t(K,{iconName:"app-setting"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),t(V,{effect:"dark",content:i.$t("common.delete"),placement:"top"},{default:o(()=>[t(x,{type:"primary",text:"",onClick:T=>F(v)},{default:o(()=>[t(K,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),t(xe,{ref_key:"SettingAPIKeyDialogRef",ref:h,onRefresh:W},null,512)]),_:1},8,["title","modelValue"])}}}),et={class:"flex-center cursor"},tt={class:"ml-8 color-text-primary"},ot={class:"userInfo flex align-center"},nt={class:"mr-12 flex align-center"},st={style:{width:"90%"}},at={class:"bold mb-4",style:{"font-size":"14px"}},lt={class:"flex-between w-full"},it={class:"flex-between w-full",style:{"line-height":"22px",padding:"12px 11px"}},ct=G({__name:"index",setup(M){const{user:a,login:p}=ee(),d=me(),g=R(),f=R(),h=R(),_=u=>{a.postUserLanguage(u)},w=()=>{var u;(u=g.value)==null||u.open()};function N(){f.value.open()}const A=()=>{var u;(u=h.value)==null||u.open()},F=()=>{p.logout().then(()=>{d.push({name:"login"})})};return we(()=>{var u;(u=a.userInfo)!=null&&u.is_edit_password}),(u,r)=>{var I;const $=l("el-avatar"),P=l("CaretBottom"),W=l("el-icon"),i=l("TagGroup"),m=l("el-dropdown-item"),U=l("ArrowRight"),K=l("Check"),x=l("el-dropdown-menu"),D=l("el-dropdown");return c(),L(q,null,[t(D,{trigger:"click",type:"primary"},{dropdown:o(()=>[t(x,{class:"avatar-dropdown"},{default:o(()=>{var O,V,z;return[n("div",ot,[n("div",nt,[t($,{size:30},{default:o(()=>r[3]||(r[3]=[n("img",{src:ue,style:{width:"54%"},alt:""},null,-1)])),_:1,__:[3]})]),n("div",st,[n("p",at,s((O=e(a).userInfo)==null?void 0:O.username),1),(V=e(a).userInfo)!=null&&V.role_name&&e(a).userInfo.role_name.length>0?(c(),L(q,{key:0},[e(B)([e(X).IS_EE,e(X).IS_PE],"OR")?(c(),y(i,{key:0,size:"small",tags:(z=e(a).userInfo)==null?void 0:z.role_name},null,8,["tags"])):k("",!0)],64)):k("",!0)])]),e(B)([e(b).EXTENDS_ADMIN,e(b).EXTENDS_WORKSPACE_MANAGE,e(b).ADMIN,e(b).WORKSPACE_MANAGE],"OR")?(c(),y(m,{key:0,class:"border-t",onClick:r[0]||(r[0]=C=>e(d).push({path:"/system/user"}))},{default:o(()=>[n("div",lt,s(u.$t("views.system.title")),1)]),_:1})):k("",!0),e(B)(new(e(J))([e(b).ADMIN,e(b).WORKSPACE_MANAGE,e(b).USER],[e(j).CHANGE_PASSWORD],[],"OR"),"OR")?(c(),y(m,{key:1,onClick:A},{default:o(()=>[E(s(u.$t("views.login.resetPassword")),1)]),_:1})):k("",!0),n("div",null,[e(B)(new(e(J))([e(b).ADMIN],[e(j).SYSTEM_API_KEY_EDIT],[e(X).IS_EE,e(X).IS_PE],"OR"),"OR")?(c(),y(m,{key:0,class:"p-8",onClick:N},{default:o(()=>[E(s(u.$t("layout.apiKey")),1)]),_:1})):k("",!0)]),e(B)(new(e(J))([e(b).ADMIN,e(b).WORKSPACE_MANAGE,e(b).USER],[e(j).SWITCH_LANGUAGE],[],"OR"),"OR")?(c(),y(m,{key:2,style:{padding:"0"},onClick:r[1]||(r[1]=Z(()=>{},["stop"]))},{default:o(()=>[t(D,{class:"w-full",trigger:"hover",placement:"left-start"},{dropdown:o(()=>[t(x,{style:{width:"180px"}},{default:o(()=>[(c(!0),L(q,null,Ae(e(ke),(C,v)=>(c(),y(m,{key:v,value:C.value,onClick:T=>_(C.value),class:"flex-between"},{default:o(()=>{var T,oe,ne;return[n("span",{class:Y(C.value===((T=e(a).userInfo)==null?void 0:T.language)?"primary":"")},s(C.label),3),C.value===((oe=e(a).userInfo)==null?void 0:oe.language)?(c(),y(W,{key:0,class:Y(C.value===((ne=e(a).userInfo)==null?void 0:ne.language)?"primary":"")},{default:o(()=>[t(K)]),_:2},1032,["class"])):k("",!0)]}),_:2},1032,["value","onClick"]))),128))]),_:1})]),default:o(()=>[n("div",it,[n("span",null,s(u.$t("layout.language")),1),t(W,null,{default:o(()=>[t(U)]),_:1})])]),_:1})]),_:1})):k("",!0),e(B)([e(b).ADMIN,e(j).ABOUT_READ],"OR")?(c(),y(m,{key:3,onClick:w},{default:o(()=>[E(s(u.$t("layout.about.title")),1)]),_:1})):k("",!0),t(m,{class:"border-t",onClick:F},{default:o(()=>[E(s(u.$t("layout.logout")),1)]),_:1})]}),_:1})]),default:o(()=>{var O;return[n("div",et,[t($,{size:30},{default:o(()=>r[2]||(r[2]=[n("img",{src:ue,style:{width:"54%"},alt:""},null,-1)])),_:1,__:[2]}),n("span",tt,s((O=e(a).userInfo)==null?void 0:O.username),1),t(W,{class:"el-icon--right"},{default:o(()=>[t(P)]),_:1})])]}),_:1}),t(Ze,{"user-id":(I=e(a).userInfo)==null?void 0:I.id,ref_key:"APIKeyDialogRef",ref:f},null,8,["user-id"]),t(Ee,{ref_key:"resetPasswordRef",ref:h},null,512),t(Ye,{ref_key:"AboutDialogRef",ref:g},null,512)],64)}}}),rt=te(ct,[["__scopeId","data-v-3bf01337"]]),ut={class:"flex align-center"},pt=G({__name:"index",setup(M){const{theme:a}=ee();function p(d){window.open(d,"_blank")}return(d,g)=>{var h,_,w;const f=l("el-tooltip");return c(),L("div",ut,[(h=e(a).themeInfo)!=null&&h.showProject?(c(),y(f,{key:0,effect:"dark",content:d.$t("layout.github"),placement:"top"},{default:o(()=>[t(Q,{iconName:"app-github",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:g[0]||(g[0]=N=>{var A;return p((A=e(a).themeInfo)==null?void 0:A.projectUrl)})})]),_:1},8,["content"])):k("",!0),(_=e(a).themeInfo)!=null&&_.showUserManual?(c(),y(f,{key:1,effect:"dark",content:d.$t("layout.wiki"),placement:"top"},{default:o(()=>[t(Q,{iconName:"app-user-manual",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:g[1]||(g[1]=N=>{var A;return p((A=e(a).themeInfo)==null?void 0:A.userManualUrl)})})]),_:1},8,["content"])):k("",!0),(w=e(a).themeInfo)!=null&&w.showForum?(c(),y(f,{key:2,effect:"dark",content:d.$t("layout.forum"),placement:"top"},{default:o(()=>[t(Q,{iconName:"app-help",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"},onClick:g[2]||(g[2]=N=>{var A;return p((A=e(a).themeInfo)==null?void 0:A.forumUrl)})})]),_:1},8,["content"])):k("",!0)])}}}),dt=te(pt,[["__scopeId","data-v-bff0fa46"]]),_t={class:"app-top-bar-container border-b flex-center"},mt={class:"logo mt-4"},ft={class:"flex-between w-full align-center"},vt={class:"flex align-center mr-8"},yt=G({__name:"SystemHeader",setup(M){const a=me();return(p,d)=>{const g=l("LogoFull"),f=l("el-divider"),h=l("AppIcon"),_=l("el-button");return c(),L("div",_t,[n("div",mt,[t(g)]),n("div",ft,[n("h4",null,[t(f,{class:"ml-16 mr-16",direction:"vertical"}),E(s(p.$t("views.system.title")),1)]),n("div",vt,[t(dt),t(f,{class:"ml-8 mr-8",direction:"vertical"}),e(B)([e(b).USER.getWorkspaceRole,e(b).EXTENDS_USER.getWorkspaceRole,e(b).EXTENDS_WORKSPACE_MANAGE.getWorkspaceRole,e(b).WORKSPACE_MANAGE.getWorkspaceRole],"OR")?(c(),y(_,{key:0,link:"",onClick:d[0]||(d[0]=w=>e(a).push({path:"/"})),style:{color:"var(--el-text-color-primary)"}},{default:o(()=>[t(h,{class:"mr-8",iconName:"app-workspace",style:{"font-size":"16px"}}),E(" "+s(p.$t("views.workspace.toWorkspace")),1)]),_:1})):k("",!0)])]),t(rt)])}}}),wt=te(yt,[["__scopeId","data-v-c20e3067"]]),At=G({__name:"index",setup(M){const a=_e(),p=R([]);return $e(()=>{const{name:d,meta:g}=a;d&&!p.value.includes(d)&&p.value.push(d)}),(d,g)=>{const f=l("router-view");return c(),y(f,null,{default:o(({Component:h})=>[t(Ie,{appear:"",name:"fade-transform",mode:"out-in"},{default:o(()=>[(c(),y(Ce,{include:p.value},[(c(),y(Re(h),{key:e(a).path}))],1032,["include"]))]),_:2},1024)]),_:1})}}});export{rt as A,wt as S,dt as T,At as _};
