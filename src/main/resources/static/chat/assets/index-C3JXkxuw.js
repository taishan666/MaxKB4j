import{cF as A,cr as B,cs as L,aJ as F,aP as b,be as H,bf as m,bg as O,aQ as i,aZ as S,a_ as J,aM as g,aS as a,b0 as E,aR as t,aV as _,aW as p,aO as c,aT as U,aL as k,cy as j,cx as z,cz as G,bj as T,b9 as Q}from"./chat-DmcU5C5M.js";const h="/email_setting",W=u=>L(`${h}`,void 0,u),Z=(u,e)=>A(`${h}`,u,void 0,e),K=(u,e)=>B(`${h}`,u,void 0,e),w={getEmailSetting:W,postTestEmail:Z,putEmailSetting:K},X={class:"email-setting p-16-24"},Y={class:"ml-4 color-text-primary"},x={class:"email-setting__main p-16"},ee=F({__name:"index",setup(u){const e=b({email_host:"",email_port:"",email_host_user:"",email_host_password:"",email_use_tls:!1,email_use_ssl:!1,from_email:""}),f=b(),n=b(!1),C=H({email_host:[{required:!0,message:m("views.system.email.smtpHostPlaceholder"),trigger:"blur"}],email_port:[{required:!0,message:m("views.system.email.smtpPortPlaceholder"),trigger:"blur"}],email_host_user:[{required:!0,message:m("views.system.email.smtpUserPlaceholder"),trigger:"blur"}],email_host_password:[{required:!0,message:m("views.system.email.smtpPasswordPlaceholder"),trigger:"blur"}],from_email:[{required:!0,message:m("views.system.email.sendEmailPlaceholder"),trigger:"blur"}]}),y=async(l,s)=>{l&&await l.validate((v,V)=>{v&&(s?w.postTestEmail(e.value,n).then(r=>{T(m("views.system.testSuccess"))}):w.putEmailSetting(e.value,n).then(r=>{T(m("common.saveSuccess"))}))})};function q(){w.getEmailSetting(n).then(l=>{l.data&&JSON.stringify(l.data)!=="{}"&&(e.value=l.data)})}return O(()=>{q()}),(l,s)=>{const v=i("el-breadcrumb-item"),V=i("el-breadcrumb"),r=i("el-input"),d=i("el-form-item"),P=i("el-checkbox"),$=i("el-button"),D=i("el-form"),N=i("el-scrollbar"),R=i("el-card"),I=S("hasPermission"),M=S("loading");return g(),J("div",X,[a(V,{"separator-icon":"ArrowRight",class:"mb-16"},{default:t(()=>[a(v,null,{default:t(()=>[_(p(c(m)("views.system.subTitle")),1)]),_:1}),a(v,null,{default:t(()=>[U("h5",Y,p(l.$t("views.system.email.title")),1)]),_:1})]),_:1}),E((g(),k(R,{style:{"--el-card-padding":"16px"}},{default:t(()=>[a(N,null,{default:t(()=>[U("div",x,[a(D,{ref_key:"emailFormRef",ref:f,rules:C,model:e.value,"label-position":"top","require-asterisk-position":"right"},{default:t(()=>[a(d,{label:l.$t("views.system.email.smtpHost"),prop:"email_host"},{default:t(()=>[a(r,{modelValue:e.value.email_host,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.email_host=o),placeholder:l.$t("views.system.email.smtpHostPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:l.$t("views.system.email.smtpPort"),prop:"email_port"},{default:t(()=>[a(r,{modelValue:e.value.email_port,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.email_port=o),placeholder:l.$t("views.system.email.smtpPortPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:l.$t("views.system.email.smtpUser"),prop:"email_host_user"},{default:t(()=>[a(r,{modelValue:e.value.email_host_user,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.email_host_user=o),placeholder:l.$t("views.system.email.smtpUserPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:l.$t("views.system.email.sendEmail"),prop:"from_email"},{default:t(()=>[a(r,{modelValue:e.value.from_email,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.from_email=o),placeholder:l.$t("views.system.email.sendEmailPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:l.$t("views.system.password"),prop:"email_host_password"},{default:t(()=>[a(r,{modelValue:e.value.email_host_password,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.email_host_password=o),placeholder:l.$t("views.system.email.smtpPasswordPlaceholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,null,{default:t(()=>[a(P,{modelValue:e.value.email_use_ssl,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.email_use_ssl=o)},{default:t(()=>[_(p(l.$t("views.system.email.enableSSL")),1)]),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:t(()=>[a(P,{modelValue:e.value.email_use_tls,"onUpdate:modelValue":s[6]||(s[6]=o=>e.value.email_use_tls=o)},{default:t(()=>[_(p(l.$t("views.system.email.enableTLS")),1)]),_:1},8,["modelValue"])]),_:1}),E((g(),k($,{onClick:s[7]||(s[7]=o=>y(f.value)),type:"primary",disabled:n.value},{default:t(()=>[_(p(l.$t("common.save")),1)]),_:1},8,["disabled"])),[[I,new(c(j))([c(z).ADMIN],[c(G).EMAIL_SETTING_EDIT],[],"OR")]]),a($,{onClick:s[8]||(s[8]=o=>y(f.value,"test")),disabled:n.value},{default:t(()=>[_(p(l.$t("views.system.test")),1)]),_:1},8,["disabled"])]),_:1},8,["rules","model"])])]),_:1})]),_:1})),[[M,n.value]])])}}}),se=Q(ee,[["__scopeId","data-v-a3bee137"]]);export{se as default};
