import{cp as Z,cr as q,cu as m,cx as p,cy as b,cB as t,cJ as i,cz as e,cA as l,cK as r,eR as le,cR as G,d1 as oe,dA as ae,eB as ne,cq as y,cZ as k,eS as K,d6 as ie,ct as me,eT as Y,cT as F,cU as ue,cv as re,cC as de,cD as ce,cH as pe,cF as S,cN as R,cE as he,cV as _e,cY as ve,eU as fe,eV as ge,dn as we}from"./index-27b17fb7.js";const ye={class:"login-preview mr-16"},be={class:"header"},$e={class:"tag flex-between"},Ve={class:"flex align-center"},Te=["src"],ke={key:1,src:le,height:"24px",class:"mr-8"},Ue={class:"ellipsis"},Le={class:"mb-24"},Pe={class:"mb-24"},Ce={class:"mb-24"},ze={class:"operate-container flex-between mt-12"},De=Z({__name:"LoginPreview",props:{data:{type:Object,default:null}},setup(U){const u=U,j=q(()=>u.data.icon?typeof u.data.icon=="string"?u.data.icon:URL.createObjectURL(u.data.icon):"");return(d,L)=>{const P=m("Close"),C=m("el-icon"),h=m("el-input"),o=m("el-form-item"),f=m("el-form"),g=m("el-button"),M=m("LoginContainer"),$=m("login-layout");return p(),b("div",ye,[t("div",be,[t("div",$e,[t("div",Ve,[u.data.icon?(p(),b("img",{key:0,src:j.value,alt:"",height:"20px",class:"mr-8"},null,8,Te)):(p(),b("img",ke)),t("span",Ue,i(U.data.title),1)]),e(C,null,{default:l(()=>[e(P)]),_:1})])]),e($,{style:{height:"530px"},lang:!1},{default:l(()=>[e(M,{subTitle:U.data.slogan,class:"login-container"},{default:l(()=>[L[0]||(L[0]=t("div",{class:"mask"},null,-1)),t("h2",Le,i(d.$t("views.login.title")),1),e(f,{class:"login-form"},{default:l(()=>[t("div",Pe,[e(o,null,{default:l(()=>[e(h,{size:"large",class:"input-item",placeholder:d.$t("views.user.userForm.form.username.placeholder")},null,8,["placeholder"])]),_:1})]),t("div",Ce,[e(o,null,{default:l(()=>[e(h,{type:"password",size:"large",class:"input-item",placeholder:d.$t("views.user.userForm.form.password.placeholder"),"show-password":""},null,8,["placeholder"])]),_:1})])]),_:1}),e(g,{size:"large",type:"primary",class:"w-full"},{default:l(()=>[r(i(d.$t("views.login.buttons.login")),1)]),_:1}),t("div",ze,[e(g,{class:"forgot-password",link:"",type:"primary"},{default:l(()=>[r(i(d.$t("views.login.forgotPassword"))+"? ",1)]),_:1})])]),_:1},8,["subTitle"])]),_:1})])}}});const Fe=G(De,[["__scopeId","data-v-87718916"]]),Se={class:"theme-setting"},Re={class:"p-16-24"},je={class:"p-24 pt-0"},Me={class:"app-card p-24"},Ne={class:"mb-16"},Be={key:0},Ie={class:"mt-16 mb-8"},Ae={class:"app-card p-24 mt-16"},Ee={class:"mb-16"},qe={class:"flex-between"},He={class:"mb-16"},Oe={class:"theme-preview"},Je={class:"theme-form"},Ke={class:"flex-between mb-8"},Ye={class:"lighter"},Ze={class:"flex-between mb-8"},Ge={class:"lighter"},Qe={class:"flex-between mb-8"},We={class:"lighter"},Xe={class:"mt-16"},xe={class:"app-card p-24 mt-16"},es={class:"mb-16"},ss={class:"flex-between"},ts={class:"mb-16"},ls={class:"theme-preview"},os={class:"theme-platform mr-16"},as={class:"flex-center h-full"},ns={class:"app-title-container cursor"},is={class:"logo flex-center"},ms={class:"flex-center"},us={class:"theme-form"},rs={class:"ml-24"},ds={class:"mt-4"},cs={class:"ml-24"},ps={class:"mt-4"},hs={class:"ml-24"},_s={class:"mt-16"},vs={class:"theme-setting__operate w-full p-16-24"},fs=Z({__name:"index",setup(U){const{user:u}=oe(),j=ae();ne((s,a)=>{u.setTheme(h.value)});const d=q(()=>u.themeInfo),L=q(()=>u.isDefaultTheme()),P=y(),C=y(!1),h=y(null),o=y({theme:"",icon:"",loginLogo:"",loginImage:"",title:"MaxKB4J",slogan:k("views.system.theme.defaultSlogan"),...K}),f=y(""),g=y(""),M=ie({title:[{required:!0,message:k("views.system.theme.websiteNamePlaceholder"),trigger:"blur"}],slogan:[{required:!0,message:k("views.system.theme.websiteSloganPlaceholder"),trigger:"blur"}]}),$=(s,a,w)=>{if((s==null?void 0:s.size)/1024/1024<10)o.value[w]=s.raw;else return ve(k("views.system.theme.fileMessageError")),!1;u.setTheme(o.value)};function Q(s){s!=="custom"&&(o.value.theme=s,u.setTheme(o.value))}function W(s){o.value.theme=s,u.setTheme(o.value)}function X(){u.setTheme(h.value),o.value=F.cloneDeep(d.value)}function H(s){o.value=s==="login"?{...o.value,theme:o.value.theme,...fe}:{...o.value,theme:o.value.theme,...K},u.setTheme(o.value)}const x=async(s,a)=>{s&&await s.validate((w,N)=>{if(w){let z=new FormData;Object.keys(o.value).map(c=>{z.append(c,o.value[c])}),ge.postThemeInfo(z,C).then(c=>{u.theme(),h.value=F.cloneDeep(o.value),we(k("views.system.theme.saveSuccess"))})}})};return me(()=>{u.isExpire()&&j.push({path:"/application"}),d.value&&(f.value=Y.some(s=>s.value===d.value.theme)?d.value.theme:"custom",g.value=d.value.theme,o.value=F.cloneDeep(d.value),h.value=F.cloneDeep(d.value))}),(s,a)=>{const w=m("el-radio-button"),N=m("el-radio-group"),z=m("el-color-picker"),c=m("el-button"),D=m("el-col"),B=m("el-upload"),_=m("el-text"),V=m("el-card"),T=m("el-input"),O=m("el-form-item"),ee=m("el-form"),J=m("el-row"),I=m("el-scrollbar"),se=m("LogoFull"),A=m("AppIcon"),E=m("el-checkbox"),te=ue("loading");return re((p(),b("div",Se,[t("h4",Re,i(s.$t("views.system.theme.title")),1),e(I,null,{default:l(()=>[t("div",je,[t("div",Me,[t("h5",Ne,i(s.$t("views.system.theme.platformDisplayTheme")),1),e(N,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=n=>f.value=n),class:"app-radio-button-group",onChange:Q},{default:l(()=>[(p(!0),b(de,null,ce(pe(Y),(n,v)=>(p(),S(w,{key:v,label:n.label,value:n.value},null,8,["label","value"]))),128)),e(w,{label:s.$t("views.system.theme.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"]),f.value==="custom"?(p(),b("div",Be,[t("h5",Ie,i(s.$t("views.system.theme.customTheme")),1),e(z,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=n=>g.value=n),onChange:W},null,8,["modelValue"])])):R("",!0)]),t("div",Ae,[t("h5",Ee,i(s.$t("views.system.theme.platformLoginSettings")),1),e(V,{shadow:"never",class:"layout-bg"},{default:l(()=>[t("div",qe,[t("h5",He,i(s.$t("views.system.theme.pagePreview")),1),e(c,{type:"primary",link:"",onClick:a[2]||(a[2]=n=>H("login"))},{default:l(()=>[r(i(s.$t("views.system.theme.restoreDefaults")),1)]),_:1})]),e(I,null,{default:l(()=>[t("div",Oe,[e(J,{gutter:8},{default:l(()=>[e(D,{span:16},{default:l(()=>[e(Fe,{data:o.value},null,8,["data"])]),_:1}),e(D,{span:8},{default:l(()=>[t("div",Je,[e(V,{shadow:"never",class:"mb-8"},{default:l(()=>[t("div",Ke,[t("span",Ye,i(s.$t("views.system.theme.websiteLogo")),1),e(B,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(n,v)=>$(n,v,"icon")},{default:l(()=>[e(c,{size:"small"},{default:l(()=>[r(i(s.$t("views.system.theme.replacePicture")),1)]),_:1})]),_:1},8,["on-change"])]),e(_,{type:"info",size:"small"},{default:l(()=>[r(i(s.$t("views.system.theme.websiteLogoTip")),1)]),_:1})]),_:1}),e(V,{shadow:"never",class:"mb-8"},{default:l(()=>[t("div",Ze,[t("span",Ge,i(s.$t("views.system.theme.loginLogo")),1),e(B,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(n,v)=>$(n,v,"loginLogo")},{default:l(()=>[e(c,{size:"small"},{default:l(()=>[r(i(s.$t("views.system.theme.replacePicture")),1)]),_:1})]),_:1},8,["on-change"])]),e(_,{type:"info",size:"small"},{default:l(()=>[r(i(s.$t("views.system.theme.loginLogoTip")),1)]),_:1})]),_:1}),e(V,{shadow:"never",class:"mb-8"},{default:l(()=>[t("div",Qe,[t("span",We,i(s.$t("views.system.theme.loginBackground")),1),e(B,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(n,v)=>$(n,v,"loginImage")},{default:l(()=>[e(c,{size:"small"},{default:l(()=>[r(i(s.$t("views.system.theme.replacePicture")),1)]),_:1})]),_:1},8,["on-change"])]),e(_,{type:"info",size:"small"},{default:l(()=>[r(i(s.$t("views.system.theme.loginBackgroundTip")),1)]),_:1})]),_:1}),e(ee,{ref_key:"themeFormRef",ref:P,model:o.value,"label-position":"top","require-asterisk-position":"right",rules:M,onSubmit:a[5]||(a[5]=he(()=>{},["prevent"]))},{default:l(()=>[e(O,{label:s.$t("views.system.theme.websiteName"),prop:"title"},{default:l(()=>[e(T,{modelValue:o.value.title,"onUpdate:modelValue":a[3]||(a[3]=n=>o.value.title=n),placeholder:s.$t("views.system.theme.websiteNamePlaceholder")},null,8,["modelValue","placeholder"]),e(_,{type:"info"},{default:l(()=>[r(i(s.$t("views.system.theme.websiteNameTip")),1)]),_:1})]),_:1},8,["label"]),e(O,{label:s.$t("views.system.theme.websiteSlogan"),prop:"slogan"},{default:l(()=>[e(T,{modelValue:o.value.slogan,"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.slogan=n),placeholder:s.$t("views.system.theme.websiteSloganPlaceholder"),maxlength:"64","show-word-limit":""},null,8,["modelValue","placeholder"]),e(_,{type:"info"},{default:l(()=>[r(i(s.$t("views.system.theme.websiteSloganTip")),1)]),_:1})]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1})]),_:1})])]),_:1}),t("div",Xe,[e(_,{type:"info"},{default:l(()=>[r(i(s.$t("views.system.theme.logoDefaultTip")),1)]),_:1})])]),_:1})]),t("div",xe,[t("h5",es,i(s.$t("views.system.theme.platformSetting")),1),e(V,{shadow:"never",class:"layout-bg"},{default:l(()=>[t("div",ss,[t("h5",ts,i(s.$t("views.system.theme.pagePreview")),1),e(c,{type:"primary",link:"",onClick:a[6]||(a[6]=n=>H("platform"))},{default:l(()=>[r(i(s.$t("views.system.theme.restoreDefaults")),1)]),_:1})]),e(I,null,{default:l(()=>[t("div",ls,[e(J,{gutter:8},{default:l(()=>[e(D,{span:16},{default:l(()=>[t("div",os,[t("div",{class:_e(["theme-platform-header border-b flex-between",L.value?"":"custom-header"])},[t("div",as,[t("div",ns,[t("div",is,[e(se,{height:"25px"})])])]),t("div",ms,[o.value.showProject?(p(),S(A,{key:0,iconName:"app-github",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"}})):R("",!0),o.value.showUserManual?(p(),S(A,{key:1,iconName:"app-reading",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"}})):R("",!0),o.value.showForum?(p(),S(A,{key:2,iconName:"app-help",class:"cursor color-secondary ml-8",style:{"font-size":"20px"}})):R("",!0)])],2)])]),_:1}),e(D,{span:8},{default:l(()=>[t("div",us,[t("div",null,[e(E,{modelValue:o.value.showUserManual,"onUpdate:modelValue":a[7]||(a[7]=n=>o.value.showUserManual=n),label:s.$t("views.system.theme.showUserManual")},null,8,["modelValue","label"]),t("div",rs,[e(T,{modelValue:o.value.userManualUrl,"onUpdate:modelValue":a[8]||(a[8]=n=>o.value.userManualUrl=n),placeholder:s.$t("views.system.theme.urlPlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",ds,[e(E,{modelValue:o.value.showForum,"onUpdate:modelValue":a[9]||(a[9]=n=>o.value.showForum=n),label:s.$t("views.system.theme.showForum")},null,8,["modelValue","label"]),t("div",cs,[e(T,{modelValue:o.value.forumUrl,"onUpdate:modelValue":a[10]||(a[10]=n=>o.value.forumUrl=n),placeholder:s.$t("views.system.theme.urlPlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",ps,[e(E,{modelValue:o.value.showProject,"onUpdate:modelValue":a[11]||(a[11]=n=>o.value.showProject=n),label:s.$t("views.system.theme.showProject")},null,8,["modelValue","label"]),t("div",hs,[e(T,{modelValue:o.value.projectUrl,"onUpdate:modelValue":a[12]||(a[12]=n=>o.value.projectUrl=n),placeholder:s.$t("views.system.theme.urlPlaceholder")},null,8,["modelValue","placeholder"])])])])]),_:1})]),_:1})])]),_:1}),t("div",_s,[e(_,{type:"info"},{default:l(()=>[r(i(s.$t("views.system.theme.defaultTip")),1)]),_:1})])]),_:1})])])]),_:1}),t("div",vs,[e(c,{onClick:X},{default:l(()=>[r(i(s.$t("views.system.theme.abandonUpdate")),1)]),_:1}),e(c,{type:"primary",onClick:a[13]||(a[13]=n=>x(P.value))},{default:l(()=>[r(i(s.$t("views.system.theme.saveAndApply")),1)]),_:1})])])),[[te,C.value]])}}});const ws=G(fs,[["__scopeId","data-v-3da755c5"]]);export{ws as default};
