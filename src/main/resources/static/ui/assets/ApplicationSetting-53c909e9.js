import{cp as W,cr as pe,cu as d,cx as c,cF as m,cA as a,cB as o,cW as ce,cz as t,du as E,eh as Le,cV as me,cq as v,di as re,cU as $e,cJ as s,cK as _,cN as F,cE as ke,cv as ne,cy as K,cC as ie,cD as se,ei as qe,d1 as vl,dy as fl,cZ as H,d6 as _l,ct as gl,d3 as be,d4 as Te,d5 as hl,cH as N,dt as G,dv as bl,dw as yl,cw as Ee,dD as wl,ej as $l,dn as kl,cQ as ye,cT as we,cR as Ml}from"./index-27b17fb7.js";import{A as Vl,T as Fl,a as Sl,b as Il,_ as Dl}from"./ReasoningParamSettingDialog.vue_vue_type_style_index_0_scope_true_lang-02d9bc77.js";import{_ as Cl}from"./EditAvatarDialog.vue_vue_type_script_setup_true_lang-4a551092.js";const Pl={class:"flex-between"},Rl={class:"flex align-center"},Al=W({name:"CardCheckbox"}),Tl=W({...Al,props:{data:{},modelValue:{},valueField:{}},emits:["update:modelValue","change"],setup(C,{emit:L}){const h=C,b=pe(()=>h.valueField?h.data[h.valueField]:h.data),g=L,w=()=>{const p=h.modelValue?h.modelValue:[];h.modelValue.includes(b.value)?g("update:modelValue",p.filter(y=>y!==b.value)):g("update:modelValue",[...p,b.value]),r()};function r(){g("change")}return(p,y)=>{const $=d("el-checkbox"),P=d("el-card");return c(),m(P,{shadow:"hover",class:me(["card-checkbox cursor",p.modelValue.includes(b.value)?"active":""]),onClick:w},{default:a(()=>[o("div",Pl,[o("div",Rl,[ce(p.$slots,"icon",{},()=>[t(E,{class:"mr-12 avatar-blue",shape:"square",size:32},{default:a(()=>y[0]||(y[0]=[o("img",{src:Le,style:{width:"58%"},alt:""},null,-1)])),_:1})]),ce(p.$slots,"default")]),t($,{modelValue:p.modelValue.includes(b.value),onChange:r},null,8,["modelValue"])])]),_:3},8,["class"])}}});const El={class:"flex-between mb-8"},Ll=["id"],ql={class:"flex align-center mr-8"},xl={class:"flex-between"},Ul={class:"max-height"},zl=["title"],Bl={class:"flex-between"},Nl={class:"flex"},Ol=W({__name:"AddMcpDialog",props:{data:{type:Array,default:()=>[]},loading:Boolean},emits:["addData","refresh"],setup(C,{expose:L,emit:h}){const b=C,g=h,w=v(!1),r=v([]),p=v(""),y=v(""),$=v([]),P=pe(()=>p.value?$.value.filter(n=>n.embeddingModelId===p.value):$.value);re(w,n=>{n||(r.value=[],p.value="",y.value="")}),re(y,n=>{n?$.value=b.data.filter(f=>f.name.includes(n)):$.value=b.data});function j(){r.value.length>0?p.value=b.data.filter(n=>n.id===r.value[0])[0].embeddingModelId:r.value.length===0&&(p.value="")}function J(){r.value=[],p.value=""}const Q=n=>{$.value=b.data,r.value=n,r.value.length>0&&(p.value=b.data.filter(f=>f.id===r.value[0])[0].embeddingModelId),w.value=!0},Z=()=>{g("addData",r.value),w.value=!1},X=()=>{g("refresh")};return L({open:Q}),(n,f)=>{const Y=d("Refresh"),ee=d("el-icon"),e=d("el-button"),te=d("el-divider"),q=d("el-text"),R=d("el-input"),x=d("el-col"),U=d("el-row"),le=d("el-scrollbar"),ae=d("el-dialog"),O=$e("loading");return c(),m(ae,{title:n.$t("views.application.applicationForm.dialog.addMcp"),modelValue:w.value,"onUpdate:modelValue":f[3]||(f[3]=k=>w.value=k),width:"600","append-to-body":"",class:"addDataset-dialog","align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1},{header:a(({titleId:k,titleClass:A})=>[o("div",El,[o("h4",{id:k,class:me(A)},s(n.$t("views.application.applicationForm.dialog.addMcp")),11,Ll),o("div",ql,[t(e,{link:"",class:"ml-16",onClick:X},{default:a(()=>[t(ee,{class:"mr-4"},{default:a(()=>[t(Y)]),_:1}),_(s(n.$t("common.refresh")),1)]),_:1}),t(te,{direction:"vertical"})])]),o("div",xl,[t(q,{type:"info",class:"color-secondary"},{default:a(()=>[_(s(n.$t("views.application.applicationForm.dialog.addMcpPlaceholder")),1)]),_:1}),t(R,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=T=>y.value=T),placeholder:n.$t("common.search"),"prefix-icon":"Search",class:"w-240",clearable:""},null,8,["modelValue","placeholder"])])]),footer:a(()=>[o("div",Bl,[o("div",Nl,[r.value.length>0?(c(),m(q,{key:0,type:"info",class:"color-secondary mr-8"},{default:a(()=>[_(s(n.$t("views.application.applicationForm.dialog.selected"))+" "+s(r.value.length)+" "+s(n.$t("views.application.applicationForm.dialog.countMcp")),1)]),_:1})):F("",!0),r.value.length>0?(c(),m(e,{key:1,link:"",type:"primary",onClick:J},{default:a(()=>[_(s(n.$t("common.clear")),1)]),_:1})):F("",!0)]),o("span",null,[t(e,{onClick:f[2]||(f[2]=ke(k=>w.value=!1,["prevent"]))},{default:a(()=>[_(s(n.$t("common.cancel")),1)]),_:1}),t(e,{type:"primary",onClick:Z},{default:a(()=>[_(s(n.$t("common.confirm")),1)]),_:1})])])]),default:a(()=>[t(le,null,{default:a(()=>[o("div",Ul,[ne((c(),m(U,{gutter:12},{default:a(()=>[(c(!0),K(ie,null,se(P.value,(k,A)=>(c(),m(x,{span:12,key:A,class:"mb-16"},{default:a(()=>[t(Tl,{"value-field":"id",data:k,modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=T=>r.value=T),onChange:j},{default:a(()=>[o("span",{class:"ellipsis cursor",title:k.name},s(k.name),9,zl)]),_:2},1032,["data","modelValue"])]),_:2},1024))),128))]),_:1})),[[O,C.loading]])])]),_:1})]),_:1},8,["title","modelValue"])}}});const Hl={class:"flex-between"},Gl={class:"flex align-center"},Kl=W({name:"CardCheckbox"}),Wl=W({...Kl,props:{data:{},modelValue:{},valueField:{}},emits:["update:modelValue","change"],setup(C,{emit:L}){const h=C,b=pe(()=>h.valueField?h.data[h.valueField]:h.data),g=L,w=()=>{const p=h.modelValue?h.modelValue:[];h.modelValue.includes(b.value)?g("update:modelValue",p.filter(y=>y!==b.value)):g("update:modelValue",[...p,b.value]),r()};function r(){g("change")}return(p,y)=>{const $=d("el-checkbox"),P=d("el-card");return c(),m(P,{shadow:"hover",class:me(["card-checkbox cursor",p.modelValue.includes(b.value)?"active":""]),onClick:w},{default:a(()=>[o("div",Hl,[o("div",Gl,[ce(p.$slots,"icon",{},()=>[t(E,{class:"mr-12 avatar-blue",shape:"square",size:32},{default:a(()=>y[0]||(y[0]=[o("img",{src:qe,style:{width:"58%"},alt:""},null,-1)])),_:1})]),ce(p.$slots,"default")]),t($,{modelValue:p.modelValue.includes(b.value),onChange:r},null,8,["modelValue"])])]),_:3},8,["class"])}}});const jl={class:"flex-between mb-8"},Jl=["id"],Ql={class:"flex align-center mr-8"},Zl={class:"flex-between"},Xl={class:"max-height"},Yl=["title"],ea={class:"flex-between"},la={class:"flex"},aa=W({__name:"AddFunctionDialog",props:{data:{type:Array,default:()=>[]},loading:Boolean},emits:["addData","refresh"],setup(C,{expose:L,emit:h}){const b=C,g=h,w=v(!1),r=v([]),p=v(""),y=v(""),$=v([]),P=pe(()=>p.value?$.value.filter(n=>n.embeddingModelId===p.value):$.value);re(w,n=>{n||(r.value=[],p.value="",y.value="")}),re(y,n=>{n?$.value=b.data.filter(f=>f.name.includes(n)):$.value=b.data});function j(){r.value.length>0?p.value=b.data.filter(n=>n.id===r.value[0])[0].embeddingModelId:r.value.length===0&&(p.value="")}function J(){r.value=[],p.value=""}const Q=n=>{$.value=b.data,r.value=n,r.value.length>0&&(p.value=b.data.filter(f=>f.id===r.value[0])[0].embeddingModelId),w.value=!0},Z=()=>{g("addData",r.value),w.value=!1},X=()=>{g("refresh")};return L({open:Q}),(n,f)=>{const Y=d("Refresh"),ee=d("el-icon"),e=d("el-button"),te=d("el-divider"),q=d("el-text"),R=d("el-input"),x=d("el-col"),U=d("el-row"),le=d("el-scrollbar"),ae=d("el-dialog"),O=$e("loading");return c(),m(ae,{title:n.$t("views.application.applicationForm.dialog.addDataset"),modelValue:w.value,"onUpdate:modelValue":f[3]||(f[3]=k=>w.value=k),width:"600","append-to-body":"",class:"addDataset-dialog","align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1},{header:a(({titleId:k,titleClass:A})=>[o("div",jl,[o("h4",{id:k,class:me(A)},s(n.$t("views.application.applicationForm.dialog.addFunction")),11,Jl),o("div",Ql,[t(e,{link:"",class:"ml-16",onClick:X},{default:a(()=>[t(ee,{class:"mr-4"},{default:a(()=>[t(Y)]),_:1}),_(s(n.$t("common.refresh")),1)]),_:1}),t(te,{direction:"vertical"})])]),o("div",Zl,[t(q,{type:"info",class:"color-secondary"},{default:a(()=>[_(s(n.$t("views.application.applicationForm.dialog.addFunctionPlaceholder")),1)]),_:1}),t(R,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=T=>y.value=T),placeholder:n.$t("common.search"),"prefix-icon":"Search",class:"w-240",clearable:""},null,8,["modelValue","placeholder"])])]),footer:a(()=>[o("div",ea,[o("div",la,[r.value.length>0?(c(),m(q,{key:0,type:"info",class:"color-secondary mr-8"},{default:a(()=>[_(s(n.$t("views.application.applicationForm.dialog.selected"))+" "+s(r.value.length)+" "+s(n.$t("views.application.applicationForm.dialog.countFunction")),1)]),_:1})):F("",!0),r.value.length>0?(c(),m(e,{key:1,link:"",type:"primary",onClick:J},{default:a(()=>[_(s(n.$t("common.clear")),1)]),_:1})):F("",!0)]),o("span",null,[t(e,{onClick:f[2]||(f[2]=ke(k=>w.value=!1,["prevent"]))},{default:a(()=>[_(s(n.$t("common.cancel")),1)]),_:1}),t(e,{type:"primary",onClick:Z},{default:a(()=>[_(s(n.$t("common.confirm")),1)]),_:1})])])]),default:a(()=>[t(le,null,{default:a(()=>[o("div",Xl,[ne((c(),m(U,{gutter:12},{default:a(()=>[(c(!0),K(ie,null,se(P.value,(k,A)=>(c(),m(x,{span:12,key:A,class:"mb-16"},{default:a(()=>[t(Wl,{"value-field":"id",data:k,modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=T=>r.value=T),onChange:j},{default:a(()=>[o("span",{class:"ellipsis cursor",title:k.desc},s(k.desc),9,Yl)]),_:2},1032,["data","modelValue"])]),_:2},1024))),128))]),_:1})),[[O,C.loading]])])]),_:1})]),_:1},8,["title","modelValue"])}}});const ta={class:"flex-between w-full"},oa={class:"p-24 mb-16",style:{"padding-bottom":"0"}},na={class:"title-decoration-1"},ia={class:"scrollbar-height-left"},sa={class:"flex-between"},da={class:"flex-between"},ua={class:"flex-between"},ca={class:"w-full"},ra={class:"flex-between"},pa={class:"flex align-center",style:{width:"80%"}},ma=["title"],va={class:"flex-between"},fa={class:"w-full"},_a={class:"flex-between"},ga={class:"flex align-center",style:{width:"80%"}},ha=["title"],ba={class:"flex-between"},ya={class:"w-full"},wa={class:"flex-between"},$a={class:"flex align-center",style:{width:"80%"}},ka=["title"],Ma={class:"flex-between"},Va={class:"mr-4"},Fa={key:0,class:"danger"},Sa={class:"flex"},Ia={class:"flex-between"},Da={class:"mr-4"},Ca={key:0,class:"danger"},Pa={class:"flex"},Ra={class:"w-full"},Aa={class:"flex-between w-full"},Ta={class:"title-decoration-1 mb-16"},Ea={class:"dialog-bg"},La={class:"flex align-center p-24"},qa=["src"],xa={class:"scrollbar-height"},Ua=W({__name:"ApplicationSetting",setup(C){const{model:L,application:h}=vl(),b=fl(),{params:{id:g}}=b,w=H("views.application.applicationForm.form.prompt.defaultPrompt",{data:"{data}",question:"{question}"}),r=H("views.application.applicationForm.dialog.defaultPrompt1",{question:"{question}"})+"<data></data>"+H("views.application.applicationForm.dialog.defaultPrompt2"),p=v(),y=v(),$=v(),P=v(),j=v(),J=v(),Q=v(),Z=v(),X=v(),n=v(!1),f=v(!1),Y=v(!1),ee=v(!1),e=v({name:"",desc:"",modelId:"",dialogueNumber:1,prologue:H("views.application.applicationForm.form.defaultPrologue"),datasetIdList:[],mcpIdList:[],datasetSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding",noReferencesSetting:{status:"ai_questioning",value:"{question}"}},modelSetting:{prompt:w,system:H("views.application.applicationForm.form.roleSettings.placeholder"),noReferencesPrompt:"{question}",reasoningContentEnable:!1},modelParamsSetting:{},problemOptimization:!1,problemOptimizationPrompt:r,sttModelId:"",ttsModelId:"",sttModelEnable:!1,sttAutoSend:!1,ttsModelEnable:!1,ttsType:"BROWSER",type:"SIMPLE"}),te=_l({name:[{required:!0,message:H("views.application.applicationForm.form.appName.placeholder"),trigger:"blur"}]}),q=v(null),R=v([]),x=v([]),U=v([]),le=v(null),ae=v(null),O=v(!1);function k(l){e.value.prologue=l}function A(l){e.value.modelSetting.system=l}function T(l){e.value.modelSetting={...e.value.modelSetting,...l}}const xe=async l=>{l&&await l.validate((i,S)=>{i&&h.asyncPutApplication(g,e.value,n).then(ve=>{kl(H("common.saveSuccess"))})})},Ue=l=>{var i;e.value.modelId=l,l?(i=p.value)==null||i.reset_default(l,g):Me({})},ze=()=>{var l;e.value.modelId&&((l=p.value)==null||l.open(e.value.modelId,g,e.value.modelParamsSetting))},Be=()=>{var l;e.value.ttsModelId&&((l=$.value)==null||l.open(e.value.ttsModelId,g,e.value.ttsModelParamsSetting))},Ne=()=>{var l;(l=P.value)==null||l.open(e.value)};function Oe(l){e.value={...e.value,...l}}function Me(l){e.value.modelParamsSetting=l}function Ve(l){e.value.ttsModelParamsSetting=l}function He(l){e.value.datasetIdList&&e.value.datasetIdList.splice(e.value.datasetIdList.indexOf(l),1)}function Ge(l){e.value.mcpIdList&&e.value.mcpIdList.splice(e.value.mcpIdList.indexOf(l),1)}function Ke(l){e.value.functionIdList&&e.value.functionIdList.splice(e.value.functionIdList.indexOf(l),1)}function We(l){e.value.datasetIdList=l}function je(l){e.value.mcpIdList=l}function Je(l){e.value.functionIdList=l}function Qe(){J.value.open(e.value.datasetIdList)}function Ze(){Q.value.open(e.value.mcpIdList)}function Xe(){Z.value.open(e.value.functionIdList)}function Fe(){h.asyncGetApplicationDetail(g,n).then(l=>{e.value=l.data,e.value.modelId=l.data.model,e.value.sttModelId=l.data.sttModel,e.value.ttsModelId=l.data.ttsModel,e.value.ttsType=l.data.ttsType,e.value.modelSetting.noReferencesPrompt=l.data.modelSetting.noReferencesPrompt||"{question}"})}function Se(){h.asyncGetApplicationDataset(g,f).then(l=>{R.value=l.data})}function Ie(){h.asyncGetApplicationMcp(g,Y).then(l=>{x.value=l.data})}function De(){h.asyncGetApplicationFunction(g,ee).then(l=>{U.value=l.data})}function Ce(){n.value=!0,ye.getApplicationModel(g).then(l=>{q.value=we.groupBy(l==null?void 0:l.data,"provider"),n.value=!1}).catch(()=>{n.value=!1})}function Ye(){n.value=!0,ye.getApplicationSTTModel(g).then(l=>{le.value=we.groupBy(l==null?void 0:l.data,"provider"),n.value=!1}).catch(()=>{n.value=!1})}function el(){n.value=!0,ye.getApplicationTTSModel(g).then(l=>{ae.value=we.groupBy(l==null?void 0:l.data,"provider"),n.value=!1}).catch(()=>{n.value=!1})}function ll(){var l;e.value.ttsModelId?(l=$.value)==null||l.reset_default(e.value.ttsModelId,g):Ve({})}function al(){e.value.ttsModelEnable||(e.value.ttsModelId="",e.value.ttsType="BROWSER")}function tl(){e.value.sttModelEnable||(e.value.sttModelId="")}function ol(){X.value.open(e.value)}function nl(){Fe()}return gl(()=>{Ce(),Se(),Ie(),De(),Fe(),Ye(),el()}),(l,i)=>{const S=d("el-button"),ve=d("el-input"),I=d("el-form-item"),il=d("el-input-number"),fe=d("Plus"),z=d("el-icon"),_e=d("el-text"),ge=d("Close"),he=d("el-card"),oe=d("el-col"),de=d("el-row"),Pe=d("el-checkbox"),Re=d("el-switch"),Ae=d("el-radio"),sl=d("el-radio-group"),dl=d("Operation"),ul=d("el-form"),cl=d("el-scrollbar"),rl=d("EditPen"),pl=d("AiChat"),ml=$e("loading");return c(),m($l,{class:"create-application"},{header:a(()=>[o("div",ta,[o("h3",null,s(l.$t("common.setting")),1),t(S,{type:"primary",onClick:i[0]||(i[0]=u=>xe(j.value)),disabled:n.value},{default:a(()=>[_(s(l.$t("views.application.applicationForm.buttons.publish")),1)]),_:1},8,["disabled"])])]),default:a(()=>[ne((c(),m(de,null,{default:a(()=>[t(oe,{span:10},{default:a(()=>[o("div",oa,[o("h4",na,s(l.$t("views.applicationOverview.appInfo.header")),1)]),o("div",ia,[t(cl,null,{default:a(()=>[t(ul,{"hide-required-asterisk":"",ref_key:"applicationFormRef",ref:j,model:e.value,rules:te,"label-position":"top","require-asterisk-position":"right",class:"p-24",style:{"padding-top":"0"}},{default:a(()=>[t(I,{prop:"name"},{label:a(()=>[o("div",sa,[o("span",null,[_(s(l.$t("views.application.applicationForm.form.appName.label"))+" ",1),i[19]||(i[19]=o("span",{class:"danger"},"*",-1))])])]),default:a(()=>[t(ve,{modelValue:e.value.name,"onUpdate:modelValue":i[1]||(i[1]=u=>e.value.name=u),maxlength:"64",placeholder:l.$t("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:i[2]||(i[2]=u=>{var M;return e.value.name=(M=e.value.name)==null?void 0:M.trim()})},null,8,["modelValue","placeholder"])]),_:1}),t(I,{label:l.$t("views.application.applicationForm.form.appDescription.label")},{default:a(()=>[t(ve,{modelValue:e.value.desc,"onUpdate:modelValue":i[3]||(i[3]=u=>e.value.desc=u),type:"textarea",placeholder:l.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(I,{label:l.$t("views.application.applicationForm.form.aiModel.label")},{label:a(()=>[o("div",da,[o("span",null,s(l.$t("views.application.applicationForm.form.aiModel.label")),1),t(S,{type:"primary",link:"",onClick:ze,disabled:!e.value.modelId},{default:a(()=>[_(s(l.$t("common.paramSetting")),1)]),_:1},8,["disabled"])])]),default:a(()=>[t(be,{modelValue:e.value.modelId,"onUpdate:modelValue":i[4]||(i[4]=u=>e.value.modelId=u),placeholder:l.$t("views.application.applicationForm.form.aiModel.placeholder"),options:q.value,onChange:Ue,onSubmitModel:Ce,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"]),t(I,{label:l.$t("views.application.applicationForm.form.roleSettings.label")},{default:a(()=>[t(Te,{title:l.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:e.value.modelSetting.system,"onUpdate:modelValue":i[5]||(i[5]=u=>e.value.modelSetting.system=u),style:{height:"120px"},onSubmitDialog:A,placeholder:l.$t("views.application.applicationForm.form.roleSettings.placeholder")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),t(I,{label:l.$t("views.application.applicationForm.form.historyRecord.label"),onClick:i[7]||(i[7]=ke(()=>{},["prevent"]))},{default:a(()=>[t(il,{modelValue:e.value.dialogueNumber,"onUpdate:modelValue":i[6]||(i[6]=u=>e.value.dialogueNumber=u),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),t(I,{label:"$t('views.application.applicationForm.form.relatedKnowledgeBase')"},{label:a(()=>[o("div",ua,[o("span",null,s(l.$t("views.application.applicationForm.form.relatedKnowledge.label")),1),o("div",null,[t(S,{type:"primary",link:"",onClick:Ne},{default:a(()=>[t(hl,{iconName:"app-operation",class:"mr-4"}),_(" "+s(l.$t("common.paramSetting")),1)]),_:1}),t(S,{type:"primary",link:"",onClick:Qe},{default:a(()=>[t(z,{class:"mr-4"},{default:a(()=>[t(fe)]),_:1}),_(" "+s(l.$t("common.add")),1)]),_:1})])])]),default:a(()=>{var u;return[o("div",ca,[((u=e.value.datasetIdList)==null?void 0:u.length)===0?(c(),m(_e,{key:0,type:"info"},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(c(),m(de,{key:1,gutter:12},{default:a(()=>[(c(!0),K(ie,null,se(e.value.datasetIdList,(M,B)=>(c(),m(oe,{xs:24,sm:24,md:24,lg:12,xl:12,class:"mb-8",key:B},{default:a(()=>[t(he,{class:"relate-dataset-card border-r-4",shadow:"never"},{default:a(()=>{var D,V,ue;return[o("div",ra,[o("div",pa,[((D=N(G)(R.value,M,"id"))==null?void 0:D.type)==="1"?(c(),m(E,{key:0,class:"mr-8 avatar-purple",shape:"square",size:32},{default:a(()=>i[20]||(i[20]=[o("img",{src:bl,style:{width:"58%"},alt:""},null,-1)])),_:1})):(c(),m(E,{key:1,class:"mr-8 avatar-blue",shape:"square",size:32},{default:a(()=>i[21]||(i[21]=[o("img",{src:yl,style:{width:"58%"},alt:""},null,-1)])),_:1})),o("span",{class:"ellipsis cursor",title:(V=N(G)(R.value,M,"id"))==null?void 0:V.name},s((ue=N(G)(R.value,M,"id"))==null?void 0:ue.name),9,ma)]),t(S,{text:"",onClick:za=>He(M)},{default:a(()=>[t(z,null,{default:a(()=>[t(ge)]),_:1})]),_:2},1032,["onClick"])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}))])]}),_:1}),t(I,{label:"$t('views.application.applicationForm.form.relatedMcp')"},{label:a(()=>[o("div",va,[o("span",null,s(l.$t("views.application.applicationForm.form.relatedMcp.label")),1),o("div",null,[t(S,{type:"primary",link:"",onClick:Ze},{default:a(()=>[t(z,{class:"mr-4"},{default:a(()=>[t(fe)]),_:1}),_(" "+s(l.$t("common.add")),1)]),_:1})])])]),default:a(()=>{var u;return[o("div",fa,[((u=e.value.mcpIdList)==null?void 0:u.length)===0?(c(),m(_e,{key:0,type:"info"},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.relatedMcp.placeholder")),1)]),_:1})):(c(),m(de,{key:1,gutter:12},{default:a(()=>[(c(!0),K(ie,null,se(e.value.mcpIdList,(M,B)=>(c(),m(oe,{xs:24,sm:24,md:24,lg:12,xl:12,class:"mb-8",key:B},{default:a(()=>[t(he,{class:"relate-dataset-card border-r-4",shadow:"never"},{default:a(()=>{var D,V;return[o("div",_a,[o("div",ga,[t(E,{class:"mr-8 avatar-blue",shape:"square",size:32},{default:a(()=>i[22]||(i[22]=[o("img",{src:Le,style:{width:"58%"},alt:""},null,-1)])),_:1}),o("span",{class:"ellipsis cursor",title:(D=N(G)(x.value,M,"id"))==null?void 0:D.name},s((V=N(G)(x.value,M,"id"))==null?void 0:V.name),9,ha)]),t(S,{text:"",onClick:ue=>Ge(M)},{default:a(()=>[t(z,null,{default:a(()=>[t(ge)]),_:1})]),_:2},1032,["onClick"])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}))])]}),_:1}),t(I,{label:"$t('views.application.applicationForm.form.relatedMcp')"},{label:a(()=>[o("div",ba,[o("span",null,s(l.$t("views.application.applicationForm.form.relatedFunction.label")),1),o("div",null,[t(S,{type:"primary",link:"",onClick:Xe},{default:a(()=>[t(z,{class:"mr-4"},{default:a(()=>[t(fe)]),_:1}),_(" "+s(l.$t("common.add")),1)]),_:1})])])]),default:a(()=>{var u;return[o("div",ya,[((u=e.value.functionIdList)==null?void 0:u.length)===0?(c(),m(_e,{key:0,type:"info"},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.relatedFunction.placeholder")),1)]),_:1})):(c(),m(de,{key:1,gutter:12},{default:a(()=>[(c(!0),K(ie,null,se(e.value.functionIdList,(M,B)=>(c(),m(oe,{xs:24,sm:24,md:24,lg:12,xl:12,class:"mb-8",key:B},{default:a(()=>[t(he,{class:"relate-dataset-card border-r-4",shadow:"never"},{default:a(()=>{var D,V;return[o("div",wa,[o("div",$a,[t(E,{class:"mr-8 avatar-blue",shape:"square",size:32},{default:a(()=>i[23]||(i[23]=[o("img",{src:qe,style:{width:"58%"},alt:""},null,-1)])),_:1}),o("span",{class:"ellipsis cursor",title:(D=N(G)(U.value,M,"id"))==null?void 0:D.name},s((V=N(G)(U.value,M,"id"))==null?void 0:V.name),9,ka)]),t(S,{text:"",onClick:ue=>Ke(M)},{default:a(()=>[t(z,null,{default:a(()=>[t(ge)]),_:1})]),_:2},1032,["onClick"])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}))])]}),_:1}),t(I,{label:l.$t("views.application.applicationForm.form.prologue")},{default:a(()=>[t(Te,{title:l.$t("views.application.applicationForm.form.prologue"),modelValue:e.value.prologue,"onUpdate:modelValue":i[8]||(i[8]=u=>e.value.prologue=u),style:{height:"150px"},onSubmitDialog:k},null,8,["title","modelValue"])]),_:1},8,["label"]),t(I,{prop:"sttModelId",rules:{required:e.value.sttModelEnable,message:l.$t("views.application.applicationForm.form.voiceInput.requiredMessage"),trigger:"change"}},{label:a(()=>[o("div",Ma,[o("span",Va,[_(s(l.$t("views.application.applicationForm.form.voiceInput.label"))+" ",1),e.value.sttModelEnable?(c(),K("span",Fa,"*")):F("",!0)]),o("div",Sa,[e.value.sttModelEnable?(c(),m(Pe,{key:0,modelValue:e.value.sttAutoSend,"onUpdate:modelValue":i[9]||(i[9]=u=>e.value.sttAutoSend=u)},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):F("",!0),t(Re,{class:"ml-8",size:"small",modelValue:e.value.sttModelEnable,"onUpdate:modelValue":i[10]||(i[10]=u=>e.value.sttModelEnable=u),onChange:tl},null,8,["modelValue"])])])]),default:a(()=>[ne(t(be,{modelValue:e.value.sttModelId,"onUpdate:modelValue":i[11]||(i[11]=u=>e.value.sttModelId=u),placeholder:l.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:le.value},null,8,["modelValue","placeholder","options"]),[[Ee,e.value.sttModelEnable]])]),_:1},8,["rules"]),t(I,{prop:"ttsModelId",rules:{required:e.value.ttsType==="TTS"&&e.value.ttsModelEnable,message:l.$t("views.application.applicationForm.form.voicePlay.requiredMessage"),trigger:"change"}},{label:a(()=>[o("div",Ia,[o("span",Da,[_(s(l.$t("views.application.applicationForm.form.voicePlay.label"))+" ",1),e.value.ttsType==="TTS"&&e.value.ttsModelEnable?(c(),K("span",Ca,"*")):F("",!0)]),o("div",Pa,[e.value.ttsModelEnable?(c(),m(Pe,{key:0,modelValue:e.value.ttsAutoplay,"onUpdate:modelValue":i[12]||(i[12]=u=>e.value.ttsAutoplay=u)},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):F("",!0),t(Re,{class:"ml-8",size:"small",modelValue:e.value.ttsModelEnable,"onUpdate:modelValue":i[13]||(i[13]=u=>e.value.ttsModelEnable=u),onChange:al},null,8,["modelValue"])])])]),default:a(()=>[o("div",Ra,[ne(t(sl,{modelValue:e.value.ttsType,"onUpdate:modelValue":i[14]||(i[14]=u=>e.value.ttsType=u),class:"mb-8"},{default:a(()=>[t(Ae,{value:"BROWSER"},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.voicePlay.browser")),1)]),_:1}),t(Ae,{value:"TTS"},{default:a(()=>[_(s(l.$t("views.application.applicationForm.form.voicePlay.tts")),1)]),_:1})]),_:1},8,["modelValue"]),[[Ee,e.value.ttsModelEnable]])]),o("div",Aa,[e.value.ttsType==="TTS"&&e.value.ttsModelEnable?(c(),m(be,{key:0,modelValue:e.value.ttsModelId,"onUpdate:modelValue":i[15]||(i[15]=u=>e.value.ttsModelId=u),placeholder:l.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:ae.value,onChange:i[16]||(i[16]=u=>ll())},null,8,["modelValue","placeholder","options"])):F("",!0),e.value.ttsType==="TTS"?(c(),m(S,{key:1,onClick:Be,disabled:!e.value.ttsModelId,class:"ml-8"},{default:a(()=>[t(z,null,{default:a(()=>[t(dl)]),_:1})]),_:1},8,["disabled"])):F("",!0)])]),_:1},8,["rules"])]),_:1},8,["model","rules"])]),_:1})])]),_:1}),t(oe,{span:14,class:"p-24 border-l"},{default:a(()=>{var u,M,B,D;return[o("h4",Ta,s(l.$t("views.application.applicationForm.title.appTest")),1),o("div",Ea,[o("div",La,[o("div",{class:"edit-avatar mr-12",onMouseenter:i[17]||(i[17]=V=>O.value=!0),onMouseleave:i[18]||(i[18]=V=>O.value=!1)},[N(wl)((u=e.value)==null?void 0:u.icon)?(c(),m(E,{key:0,shape:"square",size:32,style:{background:"none"}},{default:a(()=>{var V;return[o("img",{src:(V=e.value)==null?void 0:V.icon,alt:""},null,8,qa)]}),_:1})):(M=e.value)!=null&&M.name?(c(),m(E,{key:1,name:(B=e.value)==null?void 0:B.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):F("",!0),O.value?(c(),m(E,{key:2,shape:"square",class:"edit-mask",size:32,onClick:ol},{default:a(()=>[t(z,null,{default:a(()=>[t(rl)]),_:1})]),_:1})):F("",!0)],32),o("h4",null,s(((D=e.value)==null?void 0:D.name)||l.$t("views.application.applicationForm.form.appName.label")),1)]),o("div",xa,[t(pl,{applicationDetails:e.value,type:"debug-ai-chat"},null,8,["applicationDetails"])])])]}),_:1})]),_:1})),[[ml,n.value]]),t(Vl,{ref_key:"AIModeParamSettingDialogRef",ref:p,onRefresh:Me},null,512),t(Fl,{ref_key:"TTSModeParamSettingDialogRef",ref:$,onRefresh:Ve},null,512),t(Sl,{ref_key:"ParamSettingDialogRef",ref:P,onRefresh:Oe},null,512),t(Il,{ref_key:"AddDatasetDialogRef",ref:J,onAddData:We,data:R.value,onRefresh:Se,loading:f.value},null,8,["data","loading"]),t(Ol,{ref_key:"AddMcpDialogRef",ref:Q,onAddData:je,data:x.value,onRefresh:Ie,loading:Y.value},null,8,["data","loading"]),t(aa,{ref_key:"AddFunctionDialogRef",ref:Z,onAddData:Je,data:U.value,onRefresh:De,loading:ee.value},null,8,["data","loading"]),t(Cl,{ref_key:"EditAvatarDialogRef",ref:X,onRefresh:nl},null,512),t(Dl,{ref_key:"ReasoningParamSettingDialogRef",ref:y,onRefresh:T},null,512)]),_:1})}}});const Ha=Ml(Ua,[["__scopeId","data-v-5e3872a4"]]);export{Ha as default};
