var Nj=Object.defineProperty;var Rj=(e,t,n)=>t in e?Nj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wa=(e,t,n)=>(Rj(e,typeof t!="symbol"?t+"":t,n),n);import{aK as mv,aL as ys,aM as jr,aN as bS,aO as jd,aP as By,aQ as Of,aR as Wp,aS as vM,aT as Iu,aU as Uu,ah as ci,aV as kj,aW as dc,aX as Pw,aY as Cj,aZ as Uy,a_ as Lu,a$ as Gy,b0 as Dj,b1 as Av,b2 as nb,aF as Gu,b3 as jj,b4 as zp,b5 as yM,b6 as Hp,b7 as Id,z as Nw,b8 as Qr,b9 as rb,ba as Vy,bb as ms,bc as No,bd as wf,be as pc,bf as Tv,bg as Wy,bh as _s,bi as Sa,bj as qr,bk as ob,bl as Ij,bm as mM,bn as xf,bo as gM,bp as bM,bq as z1,br as Ki,ai as Fu,bs as Lj,bt as Fj,bu as ib,bv as _M,bw as Xp,bx as wM,ac as Rw,by as Mv,A as Pv,bz as Ry,bA as zy,af as EM,bB as OM,bC as $j,bD as gv,bE as Bj,bF as xM,bG as SM,bH as Uj,bI as AM,bJ as Gj,bK as Vj,bL as Wj,bM as zj,bN as Hj,bO as Sg,bP as Xj,bQ as Yj,bR as qj,bS as TM,bT as MM,bU as PM,bV as NM,bW as kw,bX as Kj,bY as Hy,bZ as RM,b_ as Zj,b$ as kM,c0 as CM,c1 as Jj,c2 as Qj,c3 as eI,c4 as $p,ae as tI,c5 as nI,c6 as rI,aH as oI,c7 as iI,ag as aI,c8 as lI,c9 as uI,ca as sI,cb as cI,ab as fI,aj as dI,cc as pI,aG as hI,cd as vI,ce as yI,cf as mI,cg as gI,ch as bI,ci as _I,aa as wI,cj as EI,ck as OI,ak as xI,cl as SI,p as AI,cm as TI,cn as MI,co as PI,cp as $r,cq as Et,cr as Oo,cs as NI,ct as zo,cu as ce,cv as Nl,cw as bv,cx as nt,cy as In,cz as F,cA as U,cB as me,cC as si,cD as Zi,cE as Sn,cF as Yt,cG as ov,cH as Jr,cI as iv,cJ as We,cK as Tt,cL as tg,cM as _S,cN as vr,cO as wS,cP as dg,cQ as Aa,cR as Xy,cS as Vu,cT as lt,cU as _v,cV as kd,cW as RI,cX as DM,cY as xa,cZ as Qt,c_ as Cw,c$ as ti,d0 as kI,d1 as Tf,d2 as Yp,d3 as jM,d4 as Dw,d5 as IM,T as CI,d6 as jw,d7 as wv,d8 as DI,d9 as jI,da as LM,db as II,dc as FM,dd as LI,de as FI,df as $I,dg as BI,dh as UI,di as $M,dj as Iw,dk as GI,dl as H1,dm as VI,dn as Bp,dp as WI,dq as _y,dr as zI,ds as ES,dt as p1,du as OS,dv as HI,dw as XI,Q as vy,dx as YI,dy as BM,dz as X1,dA as qI,dB as h1,dC as KI,dD as ZI}from"./index-eeff5fe9.js";import{A as ab,_ as JI,T as UM,a as QI,b as eL}from"./ReasoningParamSettingDialog.vue_vue_type_style_index_0_scope_true_lang-8198dc9e.js";import{b as GM,c as qp,v as Nv,d as tL,e as nL,g as VM,f as xS,a as rL,r as oL,h as iL}from"./reduce-8cfbdca2.js";import{h as aL,i as WM,j as lL,k as uL,l as sL,n as cL,o as fL,p as dL,q as pL,z as hL,f as vL,s as yL,a as mL,m as gL,b as bL,d as _L,e as wL,g as EL,c as OL,r as xL,u as SL}from"./zipObject-4e927105.js";import{_ as AL}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-70c619b8.js";var TL=0/0;function SS(e){return typeof e=="number"?e:mv(e)?TL:+e}function lb(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=ys(n),o=ys(o)):(n=SS(n),o=SS(o)),r=e(n,o)}return r}}var ML=lb(function(e,t){return e+t},0);const PL=ML;var NL="Expected a function";function RL(e,t){if(typeof t!="function")throw new TypeError(NL);return e=jr(e),function(){if(--e<1)return t.apply(this,arguments)}}var kL=bS&&new bS;const Ag=kL;var CL=Ag?function(e,t){return Ag.set(e,t),e}:jd;const zM=CL;function ky(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=By(e.prototype),o=e.apply(n,t);return Of(o)?o:n}}var DL=1;function jL(e,t,n){var o=t&DL,r=ky(e);function s(){var c=this&&this!==Wp&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var IL=Math.max;function HM(e,t,n,o){for(var r=-1,s=e.length,c=n.length,v=-1,h=t.length,g=IL(s-c,0),b=Array(h+g),w=!o;++v<h;)b[v]=t[v];for(;++r<c;)(w||r<s)&&(b[n[r]]=e[r]);for(;g--;)b[v++]=e[r++];return b}var LL=Math.max;function XM(e,t,n,o){for(var r=-1,s=e.length,c=-1,v=n.length,h=-1,g=t.length,b=LL(s-v,0),w=Array(b+g),O=!o;++r<b;)w[r]=e[r];for(var S=r;++h<g;)w[S+h]=t[h];for(;++c<v;)(O||r<s)&&(w[S+n[c]]=e[r++]);return w}function FL(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function ub(){}var $L=4294967295;function Yr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$L,this.__views__=[]}Yr.prototype=By(ub.prototype);Yr.prototype.constructor=Yr;var BL=Ag?function(e){return Ag.get(e)}:vM;const Lw=BL;var UL={};const sv=UL;var GL=Object.prototype,VL=GL.hasOwnProperty;function pg(e){for(var t=e.name+"",n=sv[t],o=VL.call(sv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function $u(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}$u.prototype=By(ub.prototype);$u.prototype.constructor=$u;function YM(e){if(e instanceof Yr)return e.clone();var t=new $u(e.__wrapped__,e.__chain__);return t.__actions__=Iu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var WL=Object.prototype,zL=WL.hasOwnProperty;function ie(e){if(Uu(e)&&!ci(e)&&!(e instanceof Yr)){if(e instanceof $u)return e;if(zL.call(e,"__wrapped__"))return YM(e)}return new $u(e)}ie.prototype=ub.prototype;ie.prototype.constructor=ie;function Y1(e){var t=pg(e),n=ie[t];if(typeof n!="function"||!(t in Yr.prototype))return!1;if(e===n)return!0;var o=Lw(n);return!!o&&e===o[0]}var HL=kj(zM);const qM=HL;var XL=/\{\n\/\* \[wrapped with (.+)\] \*/,YL=/,? & /;function qL(e){var t=e.match(XL);return t?t[1].split(YL):[]}var KL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ZL(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(KL,`{
/* [wrapped with `+t+`] */
`)}var JL=1,QL=2,e3=8,t3=16,n3=32,r3=64,o3=128,i3=256,a3=512,l3=[["ary",o3],["bind",JL],["bindKey",QL],["curry",e3],["curryRight",t3],["flip",a3],["partial",n3],["partialRight",r3],["rearg",i3]];function u3(e,t){return dc(l3,function(n){var o="_."+n[0];t&n[1]&&!Pw(e,o)&&e.push(o)}),e.sort()}function KM(e,t,n){var o=t+"";return Cj(e,ZL(o,u3(qL(o),n)))}var s3=1,c3=2,f3=4,d3=8,AS=32,TS=64;function ZM(e,t,n,o,r,s,c,v,h,g){var b=t&d3,w=b?c:void 0,O=b?void 0:c,S=b?s:void 0,P=b?void 0:s;t|=b?AS:TS,t&=~(b?TS:AS),t&f3||(t&=~(s3|c3));var A=[e,t,r,S,w,P,O,v,h,g],R=n.apply(void 0,A);return Y1(e)&&qM(R,A),R.placeholder=o,KM(R,e,t)}function Rv(e){var t=e;return t.placeholder}var p3=Math.min;function h3(e,t){for(var n=e.length,o=p3(t.length,n),r=Iu(e);o--;){var s=t[o];e[o]=Uy(s,n)?r[s]:void 0}return e}var MS="__lodash_placeholder__";function Cd(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===MS)&&(e[n]=MS,s[r++]=n)}return s}var v3=1,y3=2,m3=8,g3=16,b3=128,_3=512;function sb(e,t,n,o,r,s,c,v,h,g){var b=t&b3,w=t&v3,O=t&y3,S=t&(m3|g3),P=t&_3,A=O?void 0:ky(e);function R(){for(var j=arguments.length,k=Array(j),B=j;B--;)k[B]=arguments[B];if(S)var q=Rv(R),X=FL(k,q);if(o&&(k=HM(k,o,r,S)),s&&(k=XM(k,s,c,S)),j-=X,S&&j<g){var W=Cd(k,q);return ZM(e,t,sb,R.placeholder,n,k,W,v,h,g-j)}var ee=w?n:this,J=O?ee[e]:e;return j=k.length,v?k=h3(k,v):P&&j>1&&k.reverse(),b&&h<j&&(k.length=h),this&&this!==Wp&&this instanceof R&&(J=A||ky(J)),J.apply(ee,k)}return R}function w3(e,t,n){var o=ky(e);function r(){for(var s=arguments.length,c=Array(s),v=s,h=Rv(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==h&&c[s-1]!==h?[]:Cd(c,h);if(s-=g.length,s<n)return ZM(e,t,sb,r.placeholder,void 0,c,g,void 0,void 0,n-s);var b=this&&this!==Wp&&this instanceof r?o:e;return Lu(b,this,c)}return r}var E3=1;function O3(e,t,n,o){var r=t&E3,s=ky(e);function c(){for(var v=-1,h=arguments.length,g=-1,b=o.length,w=Array(b+h),O=this&&this!==Wp&&this instanceof c?s:e;++g<b;)w[g]=o[g];for(;h--;)w[g++]=arguments[++v];return Lu(O,r?n:this,w)}return c}var PS="__lodash_placeholder__",v1=1,x3=2,S3=4,NS=8,cy=128,RS=256,A3=Math.min;function T3(e,t){var n=e[1],o=t[1],r=n|o,s=r<(v1|x3|cy),c=o==cy&&n==NS||o==cy&&n==RS&&e[7].length<=t[8]||o==(cy|RS)&&t[7].length<=t[8]&&n==NS;if(!(s||c))return e;o&v1&&(e[2]=t[2],r|=n&v1?0:S3);var v=t[3];if(v){var h=e[3];e[3]=h?HM(h,v,t[4]):v,e[4]=h?Cd(e[3],PS):t[4]}return v=t[5],v&&(h=e[5],e[5]=h?XM(h,v,t[6]):v,e[6]=h?Cd(e[5],PS):t[6]),v=t[7],v&&(e[7]=v),o&cy&&(e[8]=e[8]==null?t[8]:A3(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var M3="Expected a function",kS=1,P3=2,y1=8,m1=16,g1=32,CS=64,DS=Math.max;function Mf(e,t,n,o,r,s,c,v){var h=t&P3;if(!h&&typeof e!="function")throw new TypeError(M3);var g=o?o.length:0;if(g||(t&=~(g1|CS),o=r=void 0),c=c===void 0?c:DS(jr(c),0),v=v===void 0?v:jr(v),g-=r?r.length:0,t&CS){var b=o,w=r;o=r=void 0}var O=h?void 0:Lw(e),S=[e,t,n,o,r,b,w,s,c,v];if(O&&T3(S,O),e=S[0],t=S[1],n=S[2],o=S[3],r=S[4],v=S[9]=S[9]===void 0?h?0:e.length:DS(S[9]-g,0),!v&&t&(y1|m1)&&(t&=~(y1|m1)),!t||t==kS)var P=jL(e,t,n);else t==y1||t==m1?P=w3(e,t,v):(t==g1||t==(kS|g1))&&!r.length?P=O3(e,t,n,o):P=sb.apply(void 0,S);var A=O?zM:qM;return KM(A(P,S),e,t)}var N3=128;function JM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Mf(e,N3,void 0,void 0,void 0,void 0,t)}var R3=Object.prototype,k3=R3.hasOwnProperty,C3=Gy(function(e,t){if(Dj(t)||Av(t)){nb(t,Gu(t),e);return}for(var n in t)k3.call(t,n)&&jj(e,n,t[n])});const D3=C3;var j3=Gy(function(e,t){nb(t,zp(t),e)});const jS=j3;var I3=Gy(function(e,t,n,o){nb(t,zp(t),e,o)});const Tg=I3;var L3=Gy(function(e,t,n,o){nb(t,Gu(t),e,o)});const F3=L3;function Fw(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:yM(e,t[n]);return r}var $3=Hp(Fw);const B3=$3;var U3="[object DOMException]",G3="[object Error]";function $w(e){if(!Uu(e))return!1;var t=Id(e);return t==G3||t==U3||typeof e.message=="string"&&typeof e.name=="string"&&!Nw(e)}var V3=Qr(function(e,t){try{return Lu(e,void 0,t)}catch(n){return $w(n)?n:new Error(n)}});const QM=V3;var W3="Expected a function";function eP(e,t){var n;if(typeof t!="function")throw new TypeError(W3);return e=jr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var z3=1,H3=32,Bw=Qr(function(e,t,n){var o=z3;if(n.length){var r=Cd(n,Rv(Bw));o|=H3}return Mf(e,o,t,n,r)});Bw.placeholder={};const tP=Bw;var X3=Hp(function(e,t){return dc(t,function(n){n=rb(n),Vy(e,n,tP(e[n],e))}),e});const Y3=X3;var q3=1,K3=2,Z3=32,Uw=Qr(function(e,t,n){var o=q3|K3;if(n.length){var r=Cd(n,Rv(Uw));o|=Z3}return Mf(t,o,e,n,r)});Uw.placeholder={};const J3=Uw;function Ld(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:ms(e,t,n)}var Q3="\\ud800-\\udfff",e8="\\u0300-\\u036f",t8="\\ufe20-\\ufe2f",n8="\\u20d0-\\u20ff",r8=e8+t8+n8,o8="\\ufe0e\\ufe0f",i8="\\u200d",a8=RegExp("["+i8+Q3+r8+o8+"]");function kv(e){return a8.test(e)}function l8(e){return e.split("")}var nP="\\ud800-\\udfff",u8="\\u0300-\\u036f",s8="\\ufe20-\\ufe2f",c8="\\u20d0-\\u20ff",f8=u8+s8+c8,d8="\\ufe0e\\ufe0f",p8="["+nP+"]",q1="["+f8+"]",K1="\\ud83c[\\udffb-\\udfff]",h8="(?:"+q1+"|"+K1+")",rP="[^"+nP+"]",oP="(?:\\ud83c[\\udde6-\\uddff]){2}",iP="[\\ud800-\\udbff][\\udc00-\\udfff]",v8="\\u200d",aP=h8+"?",lP="["+d8+"]?",y8="(?:"+v8+"(?:"+[rP,oP,iP].join("|")+")"+lP+aP+")*",m8=lP+aP+y8,g8="(?:"+[rP+q1+"?",q1,oP,iP,p8].join("|")+")",b8=RegExp(K1+"(?="+K1+")|"+g8+m8,"g");function _8(e){return e.match(b8)||[]}function gs(e){return kv(e)?_8(e):l8(e)}function uP(e){return function(t){t=No(t);var n=kv(t)?gs(t):void 0,o=n?n[0]:t.charAt(0),r=n?Ld(n,1).join(""):t.slice(1);return o[e]()+r}}var w8=uP("toUpperCase");const Gw=w8;function sP(e){return Gw(No(e).toLowerCase())}function Vw(e){return function(t){return e==null?void 0:e[t]}}var E8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},O8=Vw(E8);const x8=O8;var S8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,A8="\\u0300-\\u036f",T8="\\ufe20-\\ufe2f",M8="\\u20d0-\\u20ff",P8=A8+T8+M8,N8="["+P8+"]",R8=RegExp(N8,"g");function cP(e){return e=No(e),e&&e.replace(S8,x8).replace(R8,"")}var k8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function C8(e){return e.match(k8)||[]}var D8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function j8(e){return D8.test(e)}var fP="\\ud800-\\udfff",I8="\\u0300-\\u036f",L8="\\ufe20-\\ufe2f",F8="\\u20d0-\\u20ff",$8=I8+L8+F8,dP="\\u2700-\\u27bf",pP="a-z\\xdf-\\xf6\\xf8-\\xff",B8="\\xac\\xb1\\xd7\\xf7",U8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",G8="\\u2000-\\u206f",V8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hP="A-Z\\xc0-\\xd6\\xd8-\\xde",W8="\\ufe0e\\ufe0f",vP=B8+U8+G8+V8,yP="['’]",IS="["+vP+"]",z8="["+$8+"]",mP="\\d+",H8="["+dP+"]",gP="["+pP+"]",bP="[^"+fP+vP+mP+dP+pP+hP+"]",X8="\\ud83c[\\udffb-\\udfff]",Y8="(?:"+z8+"|"+X8+")",q8="[^"+fP+"]",_P="(?:\\ud83c[\\udde6-\\uddff]){2}",wP="[\\ud800-\\udbff][\\udc00-\\udfff]",Jh="["+hP+"]",K8="\\u200d",LS="(?:"+gP+"|"+bP+")",Z8="(?:"+Jh+"|"+bP+")",FS="(?:"+yP+"(?:d|ll|m|re|s|t|ve))?",$S="(?:"+yP+"(?:D|LL|M|RE|S|T|VE))?",EP=Y8+"?",OP="["+W8+"]?",J8="(?:"+K8+"(?:"+[q8,_P,wP].join("|")+")"+OP+EP+")*",Q8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tF=OP+EP+J8,nF="(?:"+[H8,_P,wP].join("|")+")"+tF,rF=RegExp([Jh+"?"+gP+"+"+FS+"(?="+[IS,Jh,"$"].join("|")+")",Z8+"+"+$S+"(?="+[IS,Jh+LS,"$"].join("|")+")",Jh+"?"+LS+"+"+FS,Jh+"+"+$S,eF,Q8,mP,nF].join("|"),"g");function oF(e){return e.match(rF)||[]}function xP(e,t,n){return e=No(e),t=n?void 0:t,t===void 0?j8(e)?oF(e):C8(e):e.match(t)||[]}var iF="['’]",aF=RegExp(iF,"g");function Cv(e){return function(t){return GM(xP(cP(t).replace(aF,"")),e,"")}}var lF=Cv(function(e,t,n){return t=t.toLowerCase(),e+(n?sP(t):t)});const uF=lF;var sF=Wp.isFinite,cF=Math.min;function Ww(e){var t=Math[e];return function(n,o){if(n=wf(n),o=o==null?0:cF(jr(o),292),o&&sF(n)){var r=(No(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(No(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var fF=Ww("ceil");const dF=fF;function SP(e){var t=ie(e);return t.__chain__=!0,t}var pF=Math.ceil,hF=Math.max;function vF(e,t,n){(n?pc(e,t,n):t===void 0)?t=1:t=hF(jr(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(pF(o/t));r<o;)c[s++]=ms(e,r,r+=t);return c}function Kp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function yF(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=wf(n),n=n===n?n:0),t!==void 0&&(t=wf(t),t=t===t?t:0),Kp(wf(e),t,n)}var mF=1,gF=4;function bF(e,t){return t=typeof t=="function"?t:void 0,Tv(e,mF|gF,t)}var _F=4;function wF(e,t){return t=typeof t=="function"?t:void 0,Tv(e,_F,t)}function EF(){return new $u(this.value(),this.__chain__)}function OF(e){for(var t=-1,n=e==null?0:e.length,o=0,r=[];++t<n;){var s=e[t];s&&(r[o++]=s)}return r}function xF(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Wy(ci(n)?Iu(n):[n],_s(t,1))}var SF="Expected a function";function AF(e){var t=e==null?0:e.length,n=qr;return e=t?Sa(e,function(o){if(typeof o[1]!="function")throw new TypeError(SF);return[n(o[0]),o[1]]}):[],Qr(function(o){for(var r=-1;++r<t;){var s=e[r];if(Lu(s[0],this,o))return Lu(s[1],this,o)}})}function AP(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function TF(e){var t=Gu(e);return function(n){return AP(n,e,t)}}var MF=1;function PF(e){return TF(Tv(e,MF))}function NF(e,t){return t==null||AP(e,t,Gu(t))}function RF(e,t,n,o){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(o,c,n(c),e)}return o}function kF(e,t,n,o){return ob(e,function(r,s,c){t(o,r,n(r),c)}),o}function cb(e,t){return function(n,o){var r=ci(n)?RF:kF,s=t?t():{};return r(n,e,qr(o),s)}}var CF=Object.prototype,DF=CF.hasOwnProperty,jF=cb(function(e,t,n){DF.call(e,n)?++e[n]:Vy(e,n,1)});const IF=jF;function LF(e,t){var n=By(e);return t==null?n:Ij(n,t)}var FF=8;function zw(e,t,n){t=n?void 0:t;var o=Mf(e,FF,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=zw.placeholder,o}zw.placeholder={};var $F=16;function Hw(e,t,n){t=n?void 0:t;var o=Mf(e,$F,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Hw.placeholder,o}Hw.placeholder={};function BF(e,t){return e==null||e!==e?t:e}function TP(e,t,n,o,r,s){return Of(e)&&Of(t)&&(s.set(t,e),mM(e,t,void 0,TP,s),s.delete(t)),e}var UF=Gy(function(e,t,n,o){mM(e,t,n,o)});const MP=UF;var GF=Qr(function(e){return e.push(void 0,TP),Lu(MP,void 0,e)});const VF=GF;var WF="Expected a function";function PP(e,t,n){if(typeof e!="function")throw new TypeError(WF);return setTimeout(function(){e.apply(void 0,n)},t)}var zF=Qr(function(e,t){return PP(e,1,t)});const HF=zF;var XF=Qr(function(e,t,n){return PP(e,wf(t)||0,n)});const YF=XF;var qF=200;function Yy(e,t,n,o){var r=-1,s=Pw,c=!0,v=e.length,h=[],g=t.length;if(!v)return h;n&&(t=Sa(t,xf(n))),o?(s=bM,c=!1):t.length>=qF&&(s=z1,c=!1,t=new gM(t));e:for(;++r<v;){var b=e[r],w=n==null?b:n(b);if(b=o||b!==0?b:0,c&&w===w){for(var O=g;O--;)if(t[O]===w)continue e;h.push(b)}else s(t,w,o)||h.push(b)}return h}var KF=Qr(function(e,t){return Ki(e)?Yy(e,_s(t,1,Ki,!0)):[]});const ZF=KF;var JF=Qr(function(e,t){var n=Fu(t);return Ki(n)&&(n=void 0),Ki(e)?Yy(e,_s(t,1,Ki,!0),qr(n)):[]});const QF=JF;var e4=Qr(function(e,t){var n=Fu(t);return Ki(n)&&(n=void 0),Ki(e)?Yy(e,_s(t,1,Ki,!0),void 0,n):[]});const t4=e4;var n4=lb(function(e,t){return e/t},1);const r4=n4;function o4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:jr(t),ms(e,t<0?0:t,o)):[]}function i4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:jr(t),t=o-t,ms(e,0,t<0?0:t)):[]}function fb(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?ms(e,o?0:s,o?s+1:r):ms(e,o?s+1:0,o?r:s)}function a4(e,t){return e&&e.length?fb(e,qr(t),!0,!0):[]}function l4(e,t){return e&&e.length?fb(e,qr(t),!0):[]}function u4(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var s4=Lj(!0);const NP=s4;function Xw(e,t){return e&&NP(e,t,Gu)}var c4=Fj(Xw,!0);const RP=c4;function BS(e,t){var n=ci(e)?u4:RP;return n(e,qp(t))}function f4(e,t,n){e=No(e),t=ys(t);var o=e.length;n=n===void 0?o:Kp(jr(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function d4(e,t){return Sa(t,function(n){return[n,e[n]]})}function p4(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var h4="[object Map]",v4="[object Set]";function kP(e){return function(t){var n=ib(t);return n==h4?_M(t):n==v4?p4(t):d4(t,e(t))}}var y4=kP(Gu);const US=y4;var m4=kP(zp);const GS=m4;var g4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b4=Vw(g4);const _4=b4;var CP=/[&<>"']/g,w4=RegExp(CP.source);function DP(e){return e=No(e),e&&w4.test(e)?e.replace(CP,_4):e}var jP=/[\\^$.*+?()[\]{}|]/g,E4=RegExp(jP.source);function O4(e){return e=No(e),e&&E4.test(e)?e.replace(jP,"\\$&"):e}function IP(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function x4(e,t){var n=!0;return ob(e,function(o,r,s){return n=!!t(o,r,s),n}),n}function S4(e,t,n){var o=ci(e)?IP:x4;return n&&pc(e,t,n)&&(t=void 0),o(e,qr(t))}var A4=4294967295;function LP(e){return e?Kp(jr(e),0,A4):0}function T4(e,t,n,o){var r=e.length;for(n=jr(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:jr(o),o<0&&(o+=r),o=n>o?0:LP(o);n<o;)e[n++]=t;return e}function M4(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&pc(e,t,n)&&(n=0,o=r),T4(e,t,n,o)):[]}function FP(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function P4(e,t){return FP(e,qr(t),Xp)}var N4=aL(wM);const R4=N4;function k4(e,t){return FP(e,qr(t),Xw)}function VS(e){return e&&e.length?e[0]:void 0}var C4=1/0;function D4(e,t){return _s(Rw(e,t),C4)}function j4(e,t,n){return n=n===void 0?1:jr(n),_s(Rw(e,t),n)}function I4(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:jr(t),_s(e,t)):[]}var L4=512;function F4(e){return Mf(e,L4)}var $4=Ww("floor");const B4=$4;var U4="Expected a function",G4=8,V4=32,W4=128,z4=256;function $P(e){return Hp(function(t){var n=t.length,o=n,r=$u.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(U4);if(r&&!c&&pg(s)=="wrapper")var c=new $u([],!0)}for(o=c?o:n;++o<n;){s=t[o];var v=pg(s),h=v=="wrapper"?Lw(s):void 0;h&&Y1(h[0])&&h[1]==(W4|G4|V4|z4)&&!h[4].length&&h[9]==1?c=c[pg(h[0])].apply(c,h[3]):c=s.length==1&&Y1(s)?c[v]():c.thru(s)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&ci(b))return c.plant(b).value();for(var w=0,O=n?t[w].apply(this,g):b;++w<n;)O=t[w].call(this,O);return O}})}var H4=$P();const X4=H4;var Y4=$P(!0);const q4=Y4;function K4(e,t){return e==null?e:NP(e,qp(t),zp)}function Z4(e,t){return e&&Xw(e,qp(t))}function db(e,t){return Mv(t,function(n){return Pv(e[n])})}function J4(e){return e==null?[]:db(e,Gu(e))}function Q4(e){return e==null?[]:db(e,zp(e))}var e$=Object.prototype,t$=e$.hasOwnProperty,n$=cb(function(e,t,n){t$.call(e,n)?e[n].push(t):Vy(e,n,[t])});const r$=n$;function pb(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=wf(t),n=wf(n)),e(t,n)}}var o$=pb(WM);const i$=o$;var a$=pb(function(e,t){return e>=t});const l$=a$;var u$=Math.max,s$=Math.min;function c$(e,t,n){return e>=s$(t,n)&&e<u$(t,n)}function f$(e,t,n){return t=Ry(t),n===void 0?(n=t,t=0):n=Ry(n),e=wf(e),c$(e,t,n)}var d$="[object String]";function hb(e){return typeof e=="string"||!ci(e)&&Uu(e)&&Id(e)==d$}var p$=Math.max;function h$(e,t,n,o){e=Av(e)?e:Nv(e),n=n&&!o?jr(n):0;var r=e.length;return n<0&&(n=p$(r+n,0)),hb(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&zy(e,t,n)>-1}var v$=Math.max;function y$(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:jr(n);return r<0&&(r=v$(o+r,0)),zy(e,t,r)}function m$(e){var t=e==null?0:e.length;return t?ms(e,0,-1):[]}var g$=Math.min;function Yw(e,t,n){for(var o=n?bM:Pw,r=e[0].length,s=e.length,c=s,v=Array(s),h=1/0,g=[];c--;){var b=e[c];c&&t&&(b=Sa(b,xf(t))),h=g$(b.length,h),v[c]=!n&&(t||r>=120&&b.length>=120)?new gM(c&&b):void 0}b=e[0];var w=-1,O=v[0];e:for(;++w<r&&g.length<h;){var S=b[w],P=t?t(S):S;if(S=n||S!==0?S:0,!(O?z1(O,P):o(g,P,n))){for(c=s;--c;){var A=v[c];if(!(A?z1(A,P):o(e[c],P,n)))continue e}O&&O.push(P),g.push(S)}}return g}function qw(e){return Ki(e)?e:[]}var b$=Qr(function(e){var t=Sa(e,qw);return t.length&&t[0]===e[0]?Yw(t):[]});const _$=b$;var w$=Qr(function(e){var t=Fu(e),n=Sa(e,qw);return t===Fu(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Yw(n,qr(t)):[]});const E$=w$;var O$=Qr(function(e){var t=Fu(e),n=Sa(e,qw);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?Yw(n,void 0,t):[]});const x$=O$;function S$(e,t,n,o){return Xp(e,function(r,s,c){t(o,n(r),s,c)}),o}function BP(e,t){return function(n,o){return S$(n,e,t(o),{})}}var A$=Object.prototype,T$=A$.toString,M$=BP(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=T$.call(t)),e[t]=n},EM(jd));const P$=M$;var UP=Object.prototype,N$=UP.hasOwnProperty,R$=UP.toString,k$=BP(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=R$.call(t)),N$.call(e,t)?e[t].push(n):e[t]=[n]},qr);const C$=k$;function qy(e,t,n){t=OM(t,e),e=$j(e,t);var o=e==null?e:e[rb(Fu(t))];return o==null?void 0:Lu(o,e,n)}var D$=Qr(qy);const j$=D$;var I$=Qr(function(e,t,n){var o=-1,r=typeof t=="function",s=Av(e)?Array(e.length):[];return ob(e,function(c){s[++o]=r?Lu(t,c,n):qy(c,t,n)}),s});const L$=I$;var F$="[object ArrayBuffer]";function $$(e){return Uu(e)&&Id(e)==F$}var WS=gv&&gv.isArrayBuffer,B$=WS?xf(WS):$$;const U$=B$;var G$="[object Boolean]";function V$(e){return e===!0||e===!1||Uu(e)&&Id(e)==G$}var W$="[object Date]";function z$(e){return Uu(e)&&Id(e)==W$}var zS=gv&&gv.isDate,H$=zS?xf(zS):z$;const X$=H$;function Y$(e){return Uu(e)&&e.nodeType===1&&!Nw(e)}function q$(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?Bj(e,t,void 0,n):!!o}var K$=Wp.isFinite;function Z$(e){return typeof e=="number"&&K$(e)}function GP(e){return typeof e=="number"&&e==jr(e)}function J$(e,t){return e===t||xM(e,t,SM(t))}function Q$(e,t,n){return n=typeof n=="function"?n:void 0,xM(e,t,SM(t),n)}var e5="[object Number]";function VP(e){return typeof e=="number"||Uu(e)&&Id(e)==e5}function t5(e){return VP(e)&&e!=+e}var n5=Uj?Pv:AM;const r5=n5;var o5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function i5(e){if(r5(e))throw new Error(o5);return Gj(e)}var a5="[object RegExp]";function l5(e){return Uu(e)&&Id(e)==a5}var HS=gv&&gv.isRegExp,u5=HS?xf(HS):l5;const Kw=u5;var XS=9007199254740991;function s5(e){return GP(e)&&e>=-XS&&e<=XS}var c5="[object WeakMap]";function f5(e){return Uu(e)&&ib(e)==c5}var d5="[object WeakSet]";function p5(e){return Uu(e)&&Id(e)==d5}var h5=1;function v5(e){return qr(typeof e=="function"?e:Tv(e,h5))}var y5=Array.prototype,m5=y5.join;function g5(e,t){return e==null?"":m5.call(e,t)}var b5=Cv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const _5=b5;var w5=cb(function(e,t,n){Vy(e,n,t)});const E5=w5;function O5(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var x5=Math.max,S5=Math.min;function A5(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=jr(n),r=r<0?x5(o+r,0):S5(r,o-1)),t===t?O5(e,t,r):Vj(e,Wj,r,!0)}var T5=Cv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const M5=T5;var P5=uP("toLowerCase");const N5=P5;var R5=pb(lL);const k5=R5;var C5=pb(function(e,t){return e<=t});const D5=C5;function j5(e,t){var n={};return t=qr(t),Xp(e,function(o,r,s){Vy(n,t(o,r,s),o)}),n}var I5=1;function L5(e){return zj(Tv(e,I5))}var F5=1;function $5(e,t){return Hj(e,Tv(t,F5))}function B5(e,t){return e&&e.length?uL(e,qr(t),WM):void 0}function Zw(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var U5=0/0;function WP(e,t){var n=e==null?0:e.length;return n?Zw(e,t)/n:U5}function G5(e){return WP(e,jd)}function V5(e,t){return WP(e,qr(t))}var W5=Qr(function(e,t){return function(n){return qy(n,e,t)}});const z5=W5;var H5=Qr(function(e,t){return function(n){return qy(e,n,t)}});const X5=H5;function zP(e,t,n){var o=Gu(t),r=db(t,o),s=!(Of(n)&&"chain"in n)||!!n.chain,c=Pv(e);return dc(r,function(v){var h=t[v];e[v]=h,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var b=e(this.__wrapped__),w=b.__actions__=Iu(this.__actions__);return w.push({func:h,args:arguments,thisArg:e}),b.__chain__=g,b}return h.apply(e,Wy([this.value()],arguments))})}),e}var Y5=lb(function(e,t){return e*t},1);const q5=Y5;var K5="Expected a function";function Ky(e){if(typeof e!="function")throw new TypeError(K5);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Z5(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var J5="[object Map]",Q5="[object Set]",b1=Sg?Sg.iterator:void 0;function HP(e){if(!e)return[];if(Av(e))return hb(e)?gs(e):Iu(e);if(b1&&e[b1])return Z5(e[b1]());var t=ib(e),n=t==J5?_M:t==Q5?Xj:Nv;return n(e)}function eB(){this.__values__===void 0&&(this.__values__=HP(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function XP(e,t){var n=e.length;if(n)return t+=t<0?n:0,Uy(t,n)?e[t]:void 0}function tB(e,t){return e&&e.length?XP(e,jr(t)):void 0}function nB(e){return e=jr(e),Qr(function(t){return XP(t,e)})}function YP(e,t){if(e==null)return{};var n=Sa(Yj(e),function(o){return[o]});return t=qr(t),qj(e,n,function(o,r){return t(o,r[0])})}function rB(e,t){return YP(e,Ky(qr(t)))}function oB(e){return eP(2,e)}function iB(e,t,n,o){return e==null?[]:(ci(t)||(t=t==null?[]:[t]),n=o?void 0:n,ci(n)||(n=n==null?[]:[n]),sL(e,t,n))}function Jw(e){return Hp(function(t){return t=Sa(t,xf(qr)),Qr(function(n){var o=this;return e(t,function(r){return Lu(r,o,n)})})})}var aB=Jw(Sa);const lB=aB;var uB=Qr;const sB=uB;var cB=Math.min,fB=sB(function(e,t){t=t.length==1&&ci(t[0])?Sa(t[0],xf(qr)):Sa(_s(t,1),xf(qr));var n=t.length;return Qr(function(o){for(var r=-1,s=cB(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Lu(e,this,o)})});const dB=fB;var pB=Jw(IP);const hB=pB;var vB=Jw(TM);const yB=vB;var mB=9007199254740991,gB=Math.floor;function Z1(e,t){var n="";if(!e||t<1||t>mB)return n;do t%2&&(n+=e),t=gB(t/2),t&&(e+=e);while(t);return n}var bB=MM("length");const _B=bB;var qP="\\ud800-\\udfff",wB="\\u0300-\\u036f",EB="\\ufe20-\\ufe2f",OB="\\u20d0-\\u20ff",xB=wB+EB+OB,SB="\\ufe0e\\ufe0f",AB="["+qP+"]",J1="["+xB+"]",Q1="\\ud83c[\\udffb-\\udfff]",TB="(?:"+J1+"|"+Q1+")",KP="[^"+qP+"]",ZP="(?:\\ud83c[\\udde6-\\uddff]){2}",JP="[\\ud800-\\udbff][\\udc00-\\udfff]",MB="\\u200d",QP=TB+"?",e2="["+SB+"]?",PB="(?:"+MB+"(?:"+[KP,ZP,JP].join("|")+")"+e2+QP+")*",NB=e2+QP+PB,RB="(?:"+[KP+J1+"?",J1,ZP,JP,AB].join("|")+")",YS=RegExp(Q1+"(?="+Q1+")|"+RB+NB,"g");function kB(e){for(var t=YS.lastIndex=0;YS.test(e);)++t;return t}function Dv(e){return kv(e)?kB(e):_B(e)}var CB=Math.ceil;function Mg(e,t){t=t===void 0?" ":ys(t);var n=t.length;if(n<2)return n?Z1(t,e):t;var o=Z1(t,CB(e/Dv(t)));return kv(t)?Ld(gs(o),0,e).join(""):o.slice(0,e)}var DB=Math.ceil,jB=Math.floor;function IB(e,t,n){e=No(e),t=jr(t);var o=t?Dv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Mg(jB(r),n)+e+Mg(DB(r),n)}function LB(e,t,n){e=No(e),t=jr(t);var o=t?Dv(e):0;return t&&o<t?e+Mg(t-o,n):e}function FB(e,t,n){e=No(e),t=jr(t);var o=t?Dv(e):0;return t&&o<t?Mg(t-o,n)+e:e}var $B=/^\s+/,BB=Wp.parseInt;function UB(e,t,n){return n||t==null?t=0:t&&(t=+t),BB(No(e).replace($B,""),t||0)}var GB=32,Qw=Qr(function(e,t){var n=Cd(t,Rv(Qw));return Mf(e,GB,void 0,t,n)});Qw.placeholder={};const t2=Qw;var VB=64,eE=Qr(function(e,t){var n=Cd(t,Rv(eE));return Mf(e,VB,void 0,t,n)});eE.placeholder={};const WB=eE;var zB=cb(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const HB=zB;function XB(e){for(var t,n=this;n instanceof ub;){var o=YM(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function YB(e){return function(t){return e==null?void 0:PM(e,t)}}function qB(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var KB=Array.prototype,qS=KB.splice;function tE(e,t,n,o){var r=o?qB:zy,s=-1,c=t.length,v=e;for(e===t&&(t=Iu(t)),n&&(v=Sa(e,xf(n)));++s<c;)for(var h=0,g=t[s],b=n?n(g):g;(h=r(v,b,h,o))>-1;)v!==e&&qS.call(v,h,1),qS.call(e,h,1);return e}function n2(e,t){return e&&e.length&&t&&t.length?tE(e,t):e}var ZB=Qr(n2);const JB=ZB;function QB(e,t,n){return e&&e.length&&t&&t.length?tE(e,t,qr(n)):e}function e6(e,t,n){return e&&e.length&&t&&t.length?tE(e,t,void 0,n):e}var t6=Array.prototype,n6=t6.splice;function r2(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Uy(r)?n6.call(e,r,1):NM(e,r)}}return e}var r6=Hp(function(e,t){var n=e==null?0:e.length,o=Fw(e,t);return r2(e,Sa(t,function(r){return Uy(r,n)?+r:r}).sort(cL)),o});const o6=r6;var i6=Math.floor,a6=Math.random;function nE(e,t){return e+i6(a6()*(t-e+1))}var l6=parseFloat,u6=Math.min,s6=Math.random;function c6(e,t,n){if(n&&typeof n!="boolean"&&pc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Ry(e),t===void 0?(t=e,e=0):t=Ry(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=s6();return u6(e+r*(t-e+l6("1e-"+((r+"").length-1))),t)}return nE(e,t)}var f6=fL(!0);const d6=f6;var p6=256,h6=Hp(function(e,t){return Mf(e,p6,void 0,void 0,void 0,t)});const v6=h6;function y6(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function m6(e,t,n){var o=ci(e)?y6:tL,r=arguments.length<3;return o(e,qr(t),n,r,RP)}function g6(e,t){var n=ci(e)?Mv:nL;return n(e,Ky(qr(t)))}function b6(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=qr(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return r2(e,r),n}function _6(e,t,n){return(n?pc(e,t,n):t===void 0)?t=1:t=jr(t),Z1(No(e),t)}function w6(){var e=arguments,t=No(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var E6="Expected a function";function O6(e,t){if(typeof e!="function")throw new TypeError(E6);return t=t===void 0?t:jr(t),Qr(e,t)}function x6(e,t,n){t=OM(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[rb(t[o])];s===void 0&&(o=r,s=n),e=Pv(s)?s.call(e):s}return e}var S6=Array.prototype,A6=S6.reverse;function ew(e){return e==null?e:A6.call(e)}var T6=Ww("round");const M6=T6;function o2(e){var t=e.length;return t?e[nE(0,t-1)]:void 0}function P6(e){return o2(Nv(e))}function N6(e){var t=ci(e)?o2:P6;return t(e)}function vb(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=nE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function R6(e,t){return vb(Iu(e),Kp(t,0,e.length))}function k6(e,t){var n=Nv(e);return vb(n,Kp(t,0,n.length))}function C6(e,t,n){(n?pc(e,t,n):t===void 0)?t=1:t=jr(t);var o=ci(e)?R6:k6;return o(e,t)}function D6(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:kw(e,t,n,o)}function j6(e){return vb(Iu(e))}function I6(e){return vb(Nv(e))}function L6(e){var t=ci(e)?j6:I6;return t(e)}var F6="[object Map]",$6="[object Set]";function B6(e){if(e==null)return 0;if(Av(e))return hb(e)?Dv(e):e.length;var t=ib(e);return t==F6||t==$6?e.size:Kj(e).length}function U6(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&pc(e,t,n)?(t=0,n=o):(t=t==null?0:jr(t),n=n===void 0?o:jr(n)),ms(e,t,n)):[]}var G6=Cv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const V6=G6;function W6(e,t){var n;return ob(e,function(o,r,s){return n=t(o,r,s),!n}),!!n}function z6(e,t,n){var o=ci(e)?TM:W6;return n&&pc(e,t,n)&&(t=void 0),o(e,qr(t))}var H6=4294967295,X6=H6-1,Y6=Math.floor,q6=Math.min;function rE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,h=mv(t),g=t===void 0;r<s;){var b=Y6((r+s)/2),w=n(e[b]),O=w!==void 0,S=w===null,P=w===w,A=mv(w);if(c)var R=o||P;else g?R=P&&(o||O):v?R=P&&O&&(o||!S):h?R=P&&O&&!S&&(o||!A):S||A?R=!1:R=o?w<=t:w<t;R?r=b+1:s=b}return q6(s,X6)}var K6=4294967295,Z6=K6>>>1;function yb(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=Z6){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!mv(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return rE(e,t,jd,n)}function J6(e,t){return yb(e,t)}function Q6(e,t,n){return rE(e,t,qr(n))}function eU(e,t){var n=e==null?0:e.length;if(n){var o=yb(e,t);if(o<n&&Hy(e[o],t))return o}return-1}function tU(e,t){return yb(e,t,!0)}function nU(e,t,n){return rE(e,t,qr(n),!0)}function rU(e,t){var n=e==null?0:e.length;if(n){var o=yb(e,t,!0)-1;if(Hy(e[o],t))return o}return-1}function i2(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],v=t?t(c):c;if(!n||!Hy(v,h)){var h=v;s[r++]=c===0?0:c}}return s}function oU(e){return e&&e.length?i2(e):[]}function iU(e,t){return e&&e.length?i2(e,qr(t)):[]}var aU=4294967295;function lU(e,t,n){return n&&typeof n!="number"&&pc(e,t,n)&&(t=n=void 0),n=n===void 0?aU:n>>>0,n?(e=No(e),e&&(typeof t=="string"||t!=null&&!Kw(t))&&(t=ys(t),!t&&kv(e))?Ld(gs(e),0,n):e.split(t,n)):[]}var uU="Expected a function",sU=Math.max;function cU(e,t){if(typeof e!="function")throw new TypeError(uU);return t=t==null?0:sU(jr(t),0),Qr(function(n){var o=n[t],r=Ld(n,0,t);return o&&Wy(r,o),Lu(e,this,r)})}var fU=Cv(function(e,t,n){return e+(n?" ":"")+Gw(t)});const dU=fU;function pU(e,t,n){return e=No(e),n=n==null?0:Kp(jr(n),0,e.length),t=ys(t),e.slice(n,n+t.length)==t}function hU(){return{}}function vU(){return""}function yU(){return!0}var mU=lb(function(e,t){return e-t},0);const gU=mU;function bU(e){return e&&e.length?Zw(e,jd):0}function _U(e,t){return e&&e.length?Zw(e,qr(t)):0}function wU(e){var t=e==null?0:e.length;return t?ms(e,1,t):[]}function EU(e,t,n){return e&&e.length?(t=n||t===void 0?1:jr(t),ms(e,0,t<0?0:t)):[]}function OU(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:jr(t),t=o-t,ms(e,t<0?0:t,o)):[]}function xU(e,t){return e&&e.length?fb(e,qr(t),!1,!0):[]}function SU(e,t){return e&&e.length?fb(e,qr(t)):[]}function AU(e,t){return t(e),e}var a2=Object.prototype,TU=a2.hasOwnProperty;function KS(e,t,n,o){return e===void 0||Hy(e,a2[n])&&!TU.call(o,n)?t:e}var MU={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function PU(e){return"\\"+MU[e]}var NU=/<%=([\s\S]+?)%>/g;const l2=NU;var RU=/<%-([\s\S]+?)%>/g;const kU=RU;var CU=/<%([\s\S]+?)%>/g;const DU=CU;var jU={escape:kU,evaluate:DU,interpolate:l2,variable:"",imports:{_:{escape:DP}}};const tw=jU;var IU="Invalid `variable` option passed into `_.template`",LU=/\b__p \+= '';/g,FU=/\b(__p \+=) '' \+/g,$U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,BU=/[()=,{}\[\]\/\s]/,UU=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ng=/($^)/,GU=/['\n\r\u2028\u2029\\]/g,VU=Object.prototype,ZS=VU.hasOwnProperty;function WU(e,t,n){var o=tw.imports._.templateSettings||tw;n&&pc(e,t,n)&&(t=void 0),e=No(e),t=Tg({},t,o,KS);var r=Tg({},t.imports,o.imports,KS),s=Gu(r),c=VM(r,s),v,h,g=0,b=t.interpolate||ng,w="__p += '",O=RegExp((t.escape||ng).source+"|"+b.source+"|"+(b===l2?UU:ng).source+"|"+(t.evaluate||ng).source+"|$","g"),S=ZS.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(R,j,k,B,q,X){return k||(k=B),w+=e.slice(g,X).replace(GU,PU),j&&(v=!0,w+=`' +
__e(`+j+`) +
'`),q&&(h=!0,w+=`';
`+q+`;
__p += '`),k&&(w+=`' +
((__t = (`+k+`)) == null ? '' : __t) +
'`),g=X+R.length,R}),w+=`';
`;var P=ZS.call(t,"variable")&&t.variable;if(!P)w=`with (obj) {
`+w+`
}
`;else if(BU.test(P))throw new Error(IU);w=(h?w.replace(LU,""):w).replace(FU,"$1").replace($U,"$1;"),w="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var A=QM(function(){return Function(s,S+"return "+w).apply(void 0,c)});if(A.source=w,$w(A))throw A;return A}function Zy(e,t){return t(e)}var zU=9007199254740991,_1=4294967295,HU=Math.min;function XU(e,t){if(e=jr(e),e<1||e>zU)return[];var n=_1,o=HU(e,_1);t=qp(t),e-=_1;for(var r=RM(o,t);++n<e;)t(n);return r}function YU(){return this}function u2(e,t){var n=e;return n instanceof Yr&&(n=n.value()),GM(t,function(o,r){return r.func.apply(r.thisArg,Wy([o],r.args))},n)}function w1(){return u2(this.__wrapped__,this.__actions__)}function qU(e){return No(e).toLowerCase()}function KU(e){return ci(e)?Sa(e,rb):mv(e)?[e]:Iu(Zj(No(e)))}var JS=9007199254740991;function ZU(e){return e?Kp(jr(e),-JS,JS):e===0?e:0}function JU(e){return No(e).toUpperCase()}function QU(e,t,n){var o=ci(e),r=o||kM(e)||CM(e);if(t=qr(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:Of(e)?n=Pv(s)?By(Jj(e)):{}:n={}}return(r?dc:Xp)(e,function(c,v,h){return t(n,c,v,h)}),n}function s2(e,t){for(var n=e.length;n--&&zy(t,e[n],0)>-1;);return n}function c2(e,t){for(var n=-1,o=e.length;++n<o&&zy(t,e[n],0)>-1;);return n}function eG(e,t,n){if(e=No(e),e&&(n||t===void 0))return Qj(e);if(!e||!(t=ys(t)))return e;var o=gs(e),r=gs(t),s=c2(o,r),c=s2(o,r)+1;return Ld(o,s,c).join("")}function tG(e,t,n){if(e=No(e),e&&(n||t===void 0))return e.slice(0,eI(e)+1);if(!e||!(t=ys(t)))return e;var o=gs(e),r=s2(o,gs(t))+1;return Ld(o,0,r).join("")}var nG=/^\s+/;function rG(e,t,n){if(e=No(e),e&&(n||t===void 0))return e.replace(nG,"");if(!e||!(t=ys(t)))return e;var o=gs(e),r=c2(o,gs(t));return Ld(o,r).join("")}var oG=30,iG="...",aG=/\w*$/;function lG(e,t){var n=oG,o=iG;if(Of(t)){var r="separator"in t?t.separator:r;n="length"in t?jr(t.length):n,o="omission"in t?ys(t.omission):o}e=No(e);var s=e.length;if(kv(e)){var c=gs(e);s=c.length}if(n>=s)return e;var v=n-Dv(o);if(v<1)return o;var h=c?Ld(c,0,v).join(""):e.slice(0,v);if(r===void 0)return h+o;if(c&&(v+=h.length-v),Kw(r)){if(e.slice(v).search(r)){var g,b=h;for(r.global||(r=RegExp(r.source,No(aG.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var w=g.index;h=h.slice(0,w===void 0?v:w)}}else if(e.indexOf(ys(r),v)!=v){var O=h.lastIndexOf(r);O>-1&&(h=h.slice(0,O))}return h+o}function uG(e){return JM(e,1)}var sG={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cG=Vw(sG);const fG=cG;var f2=/&(?:amp|lt|gt|quot|#39);/g,dG=RegExp(f2.source);function pG(e){return e=No(e),e&&dG.test(e)?e.replace(f2,fG):e}var hG=Qr(function(e){var t=Fu(e);return Ki(t)&&(t=void 0),$p(_s(e,1,Ki,!0),qr(t))});const vG=hG;var yG=Qr(function(e){var t=Fu(e);return t=typeof t=="function"?t:void 0,$p(_s(e,1,Ki,!0),void 0,t)});const mG=yG;function gG(e){return e&&e.length?$p(e):[]}function bG(e,t){return e&&e.length?$p(e,qr(t)):[]}function _G(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?$p(e,void 0,t):[]}function wG(e,t){return e==null?!0:NM(e,t)}var EG=Math.max;function oE(e){if(!(e&&e.length))return[];var t=0;return e=Mv(e,function(n){if(Ki(n))return t=EG(n.length,t),!0}),RM(t,function(n){return Sa(e,MM(n))})}function d2(e,t){if(!(e&&e.length))return[];var n=oE(e);return t==null?n:Sa(n,function(o){return Lu(t,void 0,o)})}function p2(e,t,n,o){return kw(e,t,n(PM(e,t)),o)}function OG(e,t,n){return e==null?e:p2(e,t,qp(n))}function xG(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:p2(e,t,qp(n),o)}var SG=Cv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const AG=SG;function TG(e){return e==null?[]:VM(e,zp(e))}var MG=Qr(function(e,t){return Ki(e)?Yy(e,t):[]});const PG=MG;function NG(e,t){return t2(qp(t),e)}var RG=Hp(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return Fw(s,e)};return t>1||this.__actions__.length||!(o instanceof Yr)||!Uy(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Zy,args:[r],thisArg:void 0}),new $u(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const kG=RG;function CG(){return SP(this)}function DG(){var e=this.__wrapped__;if(e instanceof Yr){var t=e;return this.__actions__.length&&(t=new Yr(this)),t=t.reverse(),t.__actions__.push({func:Zy,args:[ew],thisArg:void 0}),new $u(t,this.__chain__)}return this.thru(ew)}function iE(e,t,n){var o=e.length;if(o<2)return o?$p(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],v=-1;++v<o;)v!=r&&(s[r]=Yy(s[r]||c,e[v],t,n));return $p(_s(s,1),t,n)}var jG=Qr(function(e){return iE(Mv(e,Ki))});const IG=jG;var LG=Qr(function(e){var t=Fu(e);return Ki(t)&&(t=void 0),iE(Mv(e,Ki),qr(t))});const FG=LG;var $G=Qr(function(e){var t=Fu(e);return t=typeof t=="function"?t:void 0,iE(Mv(e,Ki),void 0,t)});const BG=$G;var UG=Qr(oE);const GG=UG;function VG(e,t){return dL(e||[],t||[],kw)}var WG=Qr(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,d2(e,n)});const zG=WG,Ln={chunk:vF,compact:OF,concat:xF,difference:ZF,differenceBy:QF,differenceWith:t4,drop:o4,dropRight:i4,dropRightWhile:a4,dropWhile:l4,fill:M4,findIndex:pL,findLastIndex:wM,first:VS,flatten:tI,flattenDeep:nI,flattenDepth:I4,fromPairs:rI,head:VS,indexOf:y$,initial:m$,intersection:_$,intersectionBy:E$,intersectionWith:x$,join:g5,last:Fu,lastIndexOf:A5,nth:tB,pull:JB,pullAll:n2,pullAllBy:QB,pullAllWith:e6,pullAt:o6,remove:b6,reverse:ew,slice:U6,sortedIndex:J6,sortedIndexBy:Q6,sortedIndexOf:eU,sortedLastIndex:tU,sortedLastIndexBy:nU,sortedLastIndexOf:rU,sortedUniq:oU,sortedUniqBy:iU,tail:wU,take:EU,takeRight:OU,takeRightWhile:xU,takeWhile:SU,union:oI,unionBy:vG,unionWith:mG,uniq:gG,uniqBy:bG,uniqWith:_G,unzip:oE,unzipWith:d2,without:PG,xor:IG,xorBy:FG,xorWith:BG,zip:GG,zipObject:hL,zipObjectDeep:VG,zipWith:zG},Ro={countBy:IF,each:xS,eachRight:BS,every:S4,filter:rL,find:vL,findLast:R4,flatMap:iI,flatMapDeep:D4,flatMapDepth:j4,forEach:xS,forEachRight:BS,groupBy:r$,includes:h$,invokeMap:L$,keyBy:E5,map:Rw,orderBy:iB,partition:HB,reduce:oL,reduceRight:m6,reject:g6,sample:N6,sampleSize:C6,shuffle:L6,size:B6,some:z6,sortBy:yL},HG={now:aI},Ai={after:RL,ary:JM,before:eP,bind:tP,bindKey:J3,curry:zw,curryRight:Hw,debounce:lI,defer:HF,delay:YF,flip:F4,memoize:uI,negate:Ky,once:oB,overArgs:dB,partial:t2,partialRight:WB,rearg:v6,rest:O6,spread:cU,throttle:sI,unary:uG,wrap:NG},ar={castArray:cI,clone:fI,cloneDeep:dI,cloneDeepWith:bF,cloneWith:wF,conformsTo:NF,eq:Hy,gt:i$,gte:l$,isArguments:pI,isArray:ci,isArrayBuffer:U$,isArrayLike:Av,isArrayLikeObject:Ki,isBoolean:V$,isBuffer:kM,isDate:X$,isElement:Y$,isEmpty:hI,isEqual:vI,isEqualWith:q$,isError:$w,isFinite:Z$,isFunction:Pv,isInteger:GP,isLength:yI,isMap:mI,isMatch:J$,isMatchWith:Q$,isNaN:t5,isNative:i5,isNil:gI,isNull:bI,isNumber:VP,isObject:Of,isObjectLike:Uu,isPlainObject:Nw,isRegExp:Kw,isSafeInteger:s5,isSet:_I,isString:hb,isSymbol:mv,isTypedArray:CM,isUndefined:wI,isWeakMap:f5,isWeakSet:p5,lt:k5,lte:D5,toArray:HP,toFinite:Ry,toInteger:jr,toLength:LP,toNumber:wf,toPlainObject:EI,toSafeInteger:ZU,toString:No},ll={add:PL,ceil:dF,divide:r4,floor:B4,max:mL,maxBy:B5,mean:G5,meanBy:V5,min:gL,minBy:bL,multiply:q5,round:M6,subtract:gU,sum:bU,sumBy:_U},aE={clamp:yF,inRange:f$,random:c6},wr={assign:D3,assignIn:jS,assignInWith:Tg,assignWith:F3,at:B3,create:LF,defaults:_L,defaultsDeep:VF,entries:US,entriesIn:GS,extend:jS,extendWith:Tg,findKey:P4,findLastKey:k4,forIn:wL,forInRight:K4,forOwn:EL,forOwnRight:Z4,functions:J4,functionsIn:Q4,get:yM,has:iL,hasIn:OI,invert:P$,invertBy:C$,invoke:j$,keys:Gu,keysIn:zp,mapKeys:j5,mapValues:OL,merge:xI,mergeWith:MP,omit:SI,omitBy:rB,pick:AI,pickBy:YP,result:x6,set:TI,setWith:D6,toPairs:US,toPairsIn:GS,transform:QU,unset:wG,update:OG,updateWith:xG,values:Nv,valuesIn:TG},hc={at:kG,chain:SP,commit:EF,lodash:ie,next:eB,plant:XB,reverse:DG,tap:AU,thru:Zy,toIterator:YU,toJSON:w1,value:w1,valueOf:w1,wrapperChain:CG},po={camelCase:uF,capitalize:sP,deburr:cP,endsWith:f4,escape:DP,escapeRegExp:O4,kebabCase:_5,lowerCase:M5,lowerFirst:N5,pad:IB,padEnd:LB,padStart:FB,parseInt:UB,repeat:_6,replace:w6,snakeCase:V6,split:lU,startCase:dU,startsWith:pU,template:WU,templateSettings:tw,toLower:qU,toUpper:JU,trim:eG,trimEnd:tG,trimStart:rG,truncate:lG,unescape:pG,upperCase:AG,upperFirst:Gw,words:xP},mo={attempt:QM,bindAll:Y3,cond:AF,conforms:PF,constant:EM,defaultTo:BF,flow:X4,flowRight:q4,identity:jd,iteratee:v5,matches:L5,matchesProperty:$5,method:z5,methodOf:X5,mixin:zP,noop:vM,nthArg:nB,over:lB,overEvery:hB,overSome:yB,property:MI,propertyOf:YB,range:xL,rangeRight:d6,stubArray:PI,stubFalse:AM,stubObject:hU,stubString:vU,stubTrue:yU,times:XU,toPath:KU,uniqueId:SL};function XG(){var e=new Yr(this.__wrapped__);return e.__actions__=Iu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Iu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Iu(this.__views__),e}function YG(){if(this.__filtered__){var e=new Yr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var qG=Math.max,KG=Math.min;function ZG(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=KG(t,e+c);break;case"takeRight":e=qG(e,t-c);break}}return{start:e,end:t}}var JG=1,QG=2,e7=Math.min;function t7(){var e=this.__wrapped__.value(),t=this.__dir__,n=ci(e),o=t<0,r=n?e.length:0,s=ZG(0,r,this.__views__),c=s.start,v=s.end,h=v-c,g=o?v:c-1,b=this.__iteratees__,w=b.length,O=0,S=e7(h,this.__takeCount__);if(!n||!o&&r==h&&S==h)return u2(e,this.__actions__);var P=[];e:for(;h--&&O<S;){g+=t;for(var A=-1,R=e[g];++A<w;){var j=b[A],k=j.iteratee,B=j.type,q=k(R);if(B==QG)R=q;else if(!q){if(B==JG)continue e;break e}}P[O++]=R}return P}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var n7="4.17.21",r7=2,o7=1,i7=3,h2=4294967295,a7=Array.prototype,l7=Object.prototype,v2=l7.hasOwnProperty,QS=Sg?Sg.iterator:void 0,u7=Math.max,eA=Math.min,lE=function(e){return function(t,n,o){if(o==null){var r=Of(n),s=r&&Gu(n),c=s&&s.length&&db(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(zP);ie.after=Ai.after;ie.ary=Ai.ary;ie.assign=wr.assign;ie.assignIn=wr.assignIn;ie.assignInWith=wr.assignInWith;ie.assignWith=wr.assignWith;ie.at=wr.at;ie.before=Ai.before;ie.bind=Ai.bind;ie.bindAll=mo.bindAll;ie.bindKey=Ai.bindKey;ie.castArray=ar.castArray;ie.chain=hc.chain;ie.chunk=Ln.chunk;ie.compact=Ln.compact;ie.concat=Ln.concat;ie.cond=mo.cond;ie.conforms=mo.conforms;ie.constant=mo.constant;ie.countBy=Ro.countBy;ie.create=wr.create;ie.curry=Ai.curry;ie.curryRight=Ai.curryRight;ie.debounce=Ai.debounce;ie.defaults=wr.defaults;ie.defaultsDeep=wr.defaultsDeep;ie.defer=Ai.defer;ie.delay=Ai.delay;ie.difference=Ln.difference;ie.differenceBy=Ln.differenceBy;ie.differenceWith=Ln.differenceWith;ie.drop=Ln.drop;ie.dropRight=Ln.dropRight;ie.dropRightWhile=Ln.dropRightWhile;ie.dropWhile=Ln.dropWhile;ie.fill=Ln.fill;ie.filter=Ro.filter;ie.flatMap=Ro.flatMap;ie.flatMapDeep=Ro.flatMapDeep;ie.flatMapDepth=Ro.flatMapDepth;ie.flatten=Ln.flatten;ie.flattenDeep=Ln.flattenDeep;ie.flattenDepth=Ln.flattenDepth;ie.flip=Ai.flip;ie.flow=mo.flow;ie.flowRight=mo.flowRight;ie.fromPairs=Ln.fromPairs;ie.functions=wr.functions;ie.functionsIn=wr.functionsIn;ie.groupBy=Ro.groupBy;ie.initial=Ln.initial;ie.intersection=Ln.intersection;ie.intersectionBy=Ln.intersectionBy;ie.intersectionWith=Ln.intersectionWith;ie.invert=wr.invert;ie.invertBy=wr.invertBy;ie.invokeMap=Ro.invokeMap;ie.iteratee=mo.iteratee;ie.keyBy=Ro.keyBy;ie.keys=Gu;ie.keysIn=wr.keysIn;ie.map=Ro.map;ie.mapKeys=wr.mapKeys;ie.mapValues=wr.mapValues;ie.matches=mo.matches;ie.matchesProperty=mo.matchesProperty;ie.memoize=Ai.memoize;ie.merge=wr.merge;ie.mergeWith=wr.mergeWith;ie.method=mo.method;ie.methodOf=mo.methodOf;ie.mixin=lE;ie.negate=Ky;ie.nthArg=mo.nthArg;ie.omit=wr.omit;ie.omitBy=wr.omitBy;ie.once=Ai.once;ie.orderBy=Ro.orderBy;ie.over=mo.over;ie.overArgs=Ai.overArgs;ie.overEvery=mo.overEvery;ie.overSome=mo.overSome;ie.partial=Ai.partial;ie.partialRight=Ai.partialRight;ie.partition=Ro.partition;ie.pick=wr.pick;ie.pickBy=wr.pickBy;ie.property=mo.property;ie.propertyOf=mo.propertyOf;ie.pull=Ln.pull;ie.pullAll=Ln.pullAll;ie.pullAllBy=Ln.pullAllBy;ie.pullAllWith=Ln.pullAllWith;ie.pullAt=Ln.pullAt;ie.range=mo.range;ie.rangeRight=mo.rangeRight;ie.rearg=Ai.rearg;ie.reject=Ro.reject;ie.remove=Ln.remove;ie.rest=Ai.rest;ie.reverse=Ln.reverse;ie.sampleSize=Ro.sampleSize;ie.set=wr.set;ie.setWith=wr.setWith;ie.shuffle=Ro.shuffle;ie.slice=Ln.slice;ie.sortBy=Ro.sortBy;ie.sortedUniq=Ln.sortedUniq;ie.sortedUniqBy=Ln.sortedUniqBy;ie.split=po.split;ie.spread=Ai.spread;ie.tail=Ln.tail;ie.take=Ln.take;ie.takeRight=Ln.takeRight;ie.takeRightWhile=Ln.takeRightWhile;ie.takeWhile=Ln.takeWhile;ie.tap=hc.tap;ie.throttle=Ai.throttle;ie.thru=Zy;ie.toArray=ar.toArray;ie.toPairs=wr.toPairs;ie.toPairsIn=wr.toPairsIn;ie.toPath=mo.toPath;ie.toPlainObject=ar.toPlainObject;ie.transform=wr.transform;ie.unary=Ai.unary;ie.union=Ln.union;ie.unionBy=Ln.unionBy;ie.unionWith=Ln.unionWith;ie.uniq=Ln.uniq;ie.uniqBy=Ln.uniqBy;ie.uniqWith=Ln.uniqWith;ie.unset=wr.unset;ie.unzip=Ln.unzip;ie.unzipWith=Ln.unzipWith;ie.update=wr.update;ie.updateWith=wr.updateWith;ie.values=wr.values;ie.valuesIn=wr.valuesIn;ie.without=Ln.without;ie.words=po.words;ie.wrap=Ai.wrap;ie.xor=Ln.xor;ie.xorBy=Ln.xorBy;ie.xorWith=Ln.xorWith;ie.zip=Ln.zip;ie.zipObject=Ln.zipObject;ie.zipObjectDeep=Ln.zipObjectDeep;ie.zipWith=Ln.zipWith;ie.entries=wr.toPairs;ie.entriesIn=wr.toPairsIn;ie.extend=wr.assignIn;ie.extendWith=wr.assignInWith;lE(ie,ie);ie.add=ll.add;ie.attempt=mo.attempt;ie.camelCase=po.camelCase;ie.capitalize=po.capitalize;ie.ceil=ll.ceil;ie.clamp=aE.clamp;ie.clone=ar.clone;ie.cloneDeep=ar.cloneDeep;ie.cloneDeepWith=ar.cloneDeepWith;ie.cloneWith=ar.cloneWith;ie.conformsTo=ar.conformsTo;ie.deburr=po.deburr;ie.defaultTo=mo.defaultTo;ie.divide=ll.divide;ie.endsWith=po.endsWith;ie.eq=ar.eq;ie.escape=po.escape;ie.escapeRegExp=po.escapeRegExp;ie.every=Ro.every;ie.find=Ro.find;ie.findIndex=Ln.findIndex;ie.findKey=wr.findKey;ie.findLast=Ro.findLast;ie.findLastIndex=Ln.findLastIndex;ie.findLastKey=wr.findLastKey;ie.floor=ll.floor;ie.forEach=Ro.forEach;ie.forEachRight=Ro.forEachRight;ie.forIn=wr.forIn;ie.forInRight=wr.forInRight;ie.forOwn=wr.forOwn;ie.forOwnRight=wr.forOwnRight;ie.get=wr.get;ie.gt=ar.gt;ie.gte=ar.gte;ie.has=wr.has;ie.hasIn=wr.hasIn;ie.head=Ln.head;ie.identity=jd;ie.includes=Ro.includes;ie.indexOf=Ln.indexOf;ie.inRange=aE.inRange;ie.invoke=wr.invoke;ie.isArguments=ar.isArguments;ie.isArray=ci;ie.isArrayBuffer=ar.isArrayBuffer;ie.isArrayLike=ar.isArrayLike;ie.isArrayLikeObject=ar.isArrayLikeObject;ie.isBoolean=ar.isBoolean;ie.isBuffer=ar.isBuffer;ie.isDate=ar.isDate;ie.isElement=ar.isElement;ie.isEmpty=ar.isEmpty;ie.isEqual=ar.isEqual;ie.isEqualWith=ar.isEqualWith;ie.isError=ar.isError;ie.isFinite=ar.isFinite;ie.isFunction=ar.isFunction;ie.isInteger=ar.isInteger;ie.isLength=ar.isLength;ie.isMap=ar.isMap;ie.isMatch=ar.isMatch;ie.isMatchWith=ar.isMatchWith;ie.isNaN=ar.isNaN;ie.isNative=ar.isNative;ie.isNil=ar.isNil;ie.isNull=ar.isNull;ie.isNumber=ar.isNumber;ie.isObject=Of;ie.isObjectLike=ar.isObjectLike;ie.isPlainObject=ar.isPlainObject;ie.isRegExp=ar.isRegExp;ie.isSafeInteger=ar.isSafeInteger;ie.isSet=ar.isSet;ie.isString=ar.isString;ie.isSymbol=ar.isSymbol;ie.isTypedArray=ar.isTypedArray;ie.isUndefined=ar.isUndefined;ie.isWeakMap=ar.isWeakMap;ie.isWeakSet=ar.isWeakSet;ie.join=Ln.join;ie.kebabCase=po.kebabCase;ie.last=Fu;ie.lastIndexOf=Ln.lastIndexOf;ie.lowerCase=po.lowerCase;ie.lowerFirst=po.lowerFirst;ie.lt=ar.lt;ie.lte=ar.lte;ie.max=ll.max;ie.maxBy=ll.maxBy;ie.mean=ll.mean;ie.meanBy=ll.meanBy;ie.min=ll.min;ie.minBy=ll.minBy;ie.stubArray=mo.stubArray;ie.stubFalse=mo.stubFalse;ie.stubObject=mo.stubObject;ie.stubString=mo.stubString;ie.stubTrue=mo.stubTrue;ie.multiply=ll.multiply;ie.nth=Ln.nth;ie.noop=mo.noop;ie.now=HG.now;ie.pad=po.pad;ie.padEnd=po.padEnd;ie.padStart=po.padStart;ie.parseInt=po.parseInt;ie.random=aE.random;ie.reduce=Ro.reduce;ie.reduceRight=Ro.reduceRight;ie.repeat=po.repeat;ie.replace=po.replace;ie.result=wr.result;ie.round=ll.round;ie.sample=Ro.sample;ie.size=Ro.size;ie.snakeCase=po.snakeCase;ie.some=Ro.some;ie.sortedIndex=Ln.sortedIndex;ie.sortedIndexBy=Ln.sortedIndexBy;ie.sortedIndexOf=Ln.sortedIndexOf;ie.sortedLastIndex=Ln.sortedLastIndex;ie.sortedLastIndexBy=Ln.sortedLastIndexBy;ie.sortedLastIndexOf=Ln.sortedLastIndexOf;ie.startCase=po.startCase;ie.startsWith=po.startsWith;ie.subtract=ll.subtract;ie.sum=ll.sum;ie.sumBy=ll.sumBy;ie.template=po.template;ie.times=mo.times;ie.toFinite=ar.toFinite;ie.toInteger=jr;ie.toLength=ar.toLength;ie.toLower=po.toLower;ie.toNumber=ar.toNumber;ie.toSafeInteger=ar.toSafeInteger;ie.toString=ar.toString;ie.toUpper=po.toUpper;ie.trim=po.trim;ie.trimEnd=po.trimEnd;ie.trimStart=po.trimStart;ie.truncate=po.truncate;ie.unescape=po.unescape;ie.uniqueId=mo.uniqueId;ie.upperCase=po.upperCase;ie.upperFirst=po.upperFirst;ie.each=Ro.forEach;ie.eachRight=Ro.forEachRight;ie.first=Ln.head;lE(ie,function(){var e={};return Xp(ie,function(t,n){v2.call(ie.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ie.VERSION=n7;(ie.templateSettings=po.templateSettings).imports._=ie;dc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ie[e].placeholder=ie});dc(["drop","take"],function(e,t){Yr.prototype[e]=function(n){n=n===void 0?1:u7(jr(n),0);var o=this.__filtered__&&!t?new Yr(this):this.clone();return o.__filtered__?o.__takeCount__=eA(n,o.__takeCount__):o.__views__.push({size:eA(n,h2),type:e+(o.__dir__<0?"Right":"")}),o},Yr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});dc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==o7||n==i7;Yr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:qr(r),type:n}),s.__filtered__=s.__filtered__||o,s}});dc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Yr.prototype[e]=function(){return this[n](1).value()[0]}});dc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Yr.prototype[e]=function(){return this.__filtered__?new Yr(this):this[n](1)}});Yr.prototype.compact=function(){return this.filter(jd)};Yr.prototype.find=function(e){return this.filter(e).head()};Yr.prototype.findLast=function(e){return this.reverse().find(e)};Yr.prototype.invokeMap=Qr(function(e,t){return typeof e=="function"?new Yr(this):this.map(function(n){return qy(n,e,t)})});Yr.prototype.reject=function(e){return this.filter(Ky(qr(e)))};Yr.prototype.slice=function(e,t){e=jr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Yr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=jr(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Yr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Yr.prototype.toArray=function(){return this.take(h2)};Xp(Yr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=ie[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(ie.prototype[t]=function(){var c=this.__wrapped__,v=o?[1]:arguments,h=c instanceof Yr,g=v[0],b=h||ci(c),w=function(j){var k=r.apply(ie,Wy([j],v));return o&&O?k[0]:k};b&&n&&typeof g=="function"&&g.length!=1&&(h=b=!1);var O=this.__chain__,S=!!this.__actions__.length,P=s&&!O,A=h&&!S;if(!s&&b){c=A?c:new Yr(this);var R=e.apply(c,v);return R.__actions__.push({func:Zy,args:[w],thisArg:void 0}),new $u(R,O)}return P&&A?e.apply(this,v):(R=this.thru(w),P?o?R.value()[0]:R.value():R)})});dc(["pop","push","shift","sort","splice","unshift"],function(e){var t=a7[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);ie.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(ci(s)?s:[],r)}return this[n](function(c){return t.apply(ci(c)?c:[],r)})}});Xp(Yr.prototype,function(e,t){var n=ie[t];if(n){var o=n.name+"";v2.call(sv,o)||(sv[o]=[]),sv[o].push({name:t,func:n})}});sv[sb(void 0,r7).name]=[{name:"wrapper",func:void 0}];Yr.prototype.clone=XG;Yr.prototype.reverse=YG;Yr.prototype.value=t7;ie.prototype.at=hc.at;ie.prototype.chain=hc.wrapperChain;ie.prototype.commit=hc.commit;ie.prototype.next=hc.next;ie.prototype.plant=hc.plant;ie.prototype.reverse=hc.reverse;ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=hc.value;ie.prototype.first=ie.prototype.head;QS&&(ie.prototype[QS]=hc.toIterator);const s7="/ui/assets/icon_or-f402edf4.svg",c7="/ui/assets/icon_and-2df352e1.svg",f7={class:"workflow-dropdown-menu border border-r-4"},d7={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},p7={key:0},h7=["onClick","onMousedown"],v7={class:"pre-wrap"},y7={class:"lighter"},m7={key:1,class:"ml-16 mt-8"},g7={class:"pre-wrap"},b7={class:"lighter"},_7=["onClick","onMousedown"],w7={class:"pre-wrap"},E7=["title"],O7={key:0},x7=["onClick","onMousedown"],S7={class:"pre-wrap",style:{width:"60%"}},A7=["title"],T7={class:"status-tag",style:{"margin-left":"auto"}},M7={key:1,class:"ml-16 mt-8"},P7=$r({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=Et(""),o=e,r=t,s=Et(!1),c=Et("base"),v=Et([]),h=Oo(()=>v.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=Et([]),b=Oo(()=>g.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),w=Oo(()=>NI.filter(A=>A.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function O(A,R,j){var k;if(R&&(A.properties.stepName=R.name,j=="function"&&(A.properties.nodeData={...R,function_lib_id:R.id,inputFieldList:R.inputFieldList.map(B=>({...B,value:B.source=="reference"?[]:""}))}),j=="application"))if(dg(R.type)){const q=R.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:R.name,icon:R.icon,application_id:R.id,api_input_field_list:R.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:R.workFlow.nodes[0].properties.user_input_field_list,...q?{...q.document?{documentList:[]}:{},...q.image?{imageList:[]}:{},...q.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:R.name,icon:R.icon,application_id:R.id};(k=o.workflowRef)==null||k.addNode(A),r("clickNodes",A)}function S(A,R,j){var k;if(R&&(A.properties.stepName=R.name,j=="function"&&(A.properties.nodeData={...R,function_lib_id:R.id,inputFieldList:R.inputFieldList.map(B=>({...B,value:B.source=="reference"?[]:""}))}),j=="application"))if(dg(R.type)){const q=R.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:R.name,icon:R.icon,application_id:R.id,api_input_field_list:R.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:R.workFlow.nodes[0].properties.user_input_field_list,...q?{...q.document?{documentList:[]}:{},...q.image?{imageList:[]}:{},...q.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:R.name,icon:R.icon,application_id:R.id};(k=o.workflowRef)==null||k.onmousedown(A),r("onmousedown",A)}function P(){Aa.listFunctionLib(o.id,s).then(A=>{v.value=A.data}),Aa.getApplicationList(o.id,s).then(A=>{g.value=A.data})}return zo(()=>{P()}),(A,R)=>{const j=ce("search"),k=ce("el-icon"),B=ce("el-input"),q=ce("el-text"),X=ce("el-scrollbar"),W=ce("el-tab-pane"),ee=ce("el-tag"),J=ce("el-tabs");return Nl((nt(),In("div",f7,[F(J,{modelValue:c.value,"onUpdate:modelValue":R[3]||(R[3]=L=>c.value=L),class:"workflow-dropdown-tabs"},{default:U(()=>[me("div",d7,[F(B,{modelValue:n.value,"onUpdate:modelValue":R[0]||(R[0]=L=>n.value=L),style:{width:"240px"},placeholder:A.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:U(()=>[F(k,{class:"el-input__icon"},{default:U(()=>[F(j)]),_:1})]),_:1},8,["modelValue","placeholder"])]),F(W,{label:A.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:U(()=>[F(X,{height:"400"},{default:U(()=>[w.value.length>0?(nt(),In("div",p7,[(nt(!0),In(si,null,Zi(w.value,(L,G)=>(nt(),In("div",{key:G,class:"workflow-dropdown-item cursor flex p-8-12",onClick:Sn(Y=>O(L),["stop"]),onMousedown:Sn(Y=>S(L),["stop"])},[(nt(),Yt(ov(Jr(iv)(`${L.type}-icon`)),{class:"mr-8 mt-4",size:32})),me("div",v7,[me("div",y7,We(L.label),1),F(q,{type:"info",size:"small"},{default:U(()=>[Tt(We(L.text),1)]),_:2},1024)])],40,h7))),128))])):(nt(),In("div",m7,[F(q,{type:"info"},{default:U(()=>[Tt(We(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),F(W,{label:A.$t("views.functionLib.title"),name:"function"},{default:U(()=>[F(X,{height:"400"},{default:U(()=>[me("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:R[1]||(R[1]=Sn(L=>O(Jr(tg)),["stop"])),onMousedown:R[2]||(R[2]=Sn(L=>S(Jr(tg)),["stop"]))},[(nt(),Yt(ov(Jr(iv)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),me("div",g7,[me("div",b7,We(Jr(tg).label),1),F(q,{type:"info",size:"small"},{default:U(()=>[Tt(We(Jr(tg).text),1)]),_:1})])],32),(nt(!0),In(si,null,Zi(h.value,(L,G)=>(nt(),In("div",{key:G,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:Sn(Y=>O(Jr(_S),L,"function"),["stop"]),onMousedown:Sn(Y=>S(Jr(_S),L,"function"),["stop"])},[(nt(),Yt(ov(Jr(iv)("function-lib-node-icon")),{class:"mr-8",size:32})),me("div",w7,[me("div",{class:"lighter ellipsis-1",title:L.name},We(L.name),9,E7),me("p",null,[L.desc?(nt(),Yt(q,{key:0,class:"ellipsis-1",type:"info",size:"small",title:L.desc},{default:U(()=>[Tt(We(L.desc),1)]),_:2},1032,["title"])):vr("",!0)])])],40,_7))),128))]),_:1})]),_:1},8,["label"]),F(W,{label:A.$t("views.application.title"),name:"application"},{default:U(()=>[F(X,{height:"400"},{default:U(()=>[b.value.length>0?(nt(),In("div",O7,[(nt(!0),In(si,null,Zi(b.value,(L,G)=>(nt(),In("div",{key:G,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:Sn(Y=>O(Jr(wS),L,"application"),["stop"]),onMousedown:Sn(Y=>S(Jr(wS),L,"application"),["stop"])},[(nt(),Yt(ov(Jr(iv)("application-node-icon")),{class:"mr-8",size:32,item:L},null,8,["item"])),me("div",S7,[me("div",{class:"lighter ellipsis",title:L.name},We(L.name),9,A7),me("p",null,[L.desc?(nt(),Yt(q,{key:0,class:"ellipsis",type:"info",size:"small",title:L.desc},{default:U(()=>[Tt(We(L.desc),1)]),_:2},1032,["title"])):vr("",!0)])]),me("div",T7,[Jr(dg)(L.type)?(nt(),Yt(ee,{key:0,type:"warning",style:{height:"22px"}},{default:U(()=>[Tt(We(A.$t("views.application.workflow")),1)]),_:1})):(nt(),Yt(ee,{key:1,class:"blue-tag",style:{height:"22px"}},{default:U(()=>[Tt(We(A.$t("views.application.simple")),1)]),_:1}))])],40,x7))),128))])):(nt(),In("div",M7,[F(q,{type:"info"},{default:U(()=>[Tt(We(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[bv,e.show]])}}});const y2=Xy(P7,[["__scopeId","data-v-2717b3b8"]]),N7={class:"flex-between"},R7={class:"flex align-center",style:{width:"70%"}},k7={class:"ellipsis-1 break-all"},C7={key:0,src:s7,alt:""},D7={key:1,src:c7,alt:""},j7={style:{width:"280px"},class:"p-12-16"},I7={class:"mt-8 lighter"},L7={class:"title-decoration-1 mb-8 mt-8"},F7=["onMouseenter"],$7={style:{"max-width":"92%"}},B7={class:"dialog-footer"},U7=$r({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Vu.config.globalProperties.$route,n=Et({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),o=Et(!1),r=Et(),s=Et(),c=Et(!1),v=Et({title:""}),h=Oo({set:L=>{lt.set(q.nodeModel.properties,"condition",L)},get:()=>q.nodeModel.properties.condition?q.nodeModel.properties.condition:(lt.set(q.nodeModel.properties,"condition","AND"),!0)}),g=Oo({set:L=>{lt.set(q.nodeModel.properties,"showNode",L)},get:()=>q.nodeModel.properties.showNode!==void 0?q.nodeModel.properties.showNode:(lt.set(q.nodeModel.properties,"showNode",!0),!0)}),b=L=>{L.ctrlKey||L.metaKey||L.stopPropagation()},w=Oo(()=>q.nodeModel.properties.status?q.nodeModel.properties.status:200);function O(){v.value.title=q.nodeModel.properties.stepName,c.value=!0}const S=async L=>{L&&await L.validate(G=>{var Y;G&&((Y=q.nodeModel.graphModel.nodes)!=null&&Y.some(H=>H.properties.stepName===v.value.title)?xa(Qt("views.applicationWorkflow.tip.repeatedNodeError")):(lt.set(q.nodeModel.properties,"stepName",v.value.title),c.value=!1,L.resetFields()))})},P=()=>{q.nodeModel.graphModel.clearSelectElements(),lt.set(q.nodeModel,"isSelected",!0),lt.set(q.nodeModel,"isHovered",!0),q.nodeModel.graphModel.toFront(q.nodeModel.id)},A=Et(null),R=()=>{q.nodeModel.graphModel.clearSelectElements();const L=q.nodeModel.graphModel.cloneNode(q.nodeModel.id);lt.set(L,"isSelected",!0),lt.set(L,"isHovered",!0),q.nodeModel.graphModel.toFront(L.id)},j=()=>{Cw(Qt("common.tip"),Qt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Qt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{q.nodeModel.graphModel.deleteNode(q.nodeModel.id)}),q.nodeModel.graphModel.eventCenter.emit("delete_node")},k=L=>{L.height&&(q.nodeModel.virtual||(n.value.stepContainerHeight=L.height,q.nodeModel.setHeight(n.value.stepContainerHeight)))};function B(L){var H,se,Re;const G=L.properties.width?L.properties.width:214,Y=q.nodeModel.graphModel.addNode({type:L.type,properties:L.properties,x:((H=r.value)==null?void 0:H.x)+G/2+200,y:((se=r.value)==null?void 0:se.y)-L.height});q.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:q.nodeModel.id,sourceAnchorId:(Re=r.value)==null?void 0:Re.id,targetNodeId:Y.id}),J()}const q=e,X=Oo(()=>{var L;return q.nodeModel.properties.config.fields?(L=q.nodeModel.properties.config.fields)==null?void 0:L.map(Y=>({label:Y.label,value:Y.value,globeLabel:`{{${q.nodeModel.properties.stepName}.${Y.value}}}`,globeValue:`{{context['${q.nodeModel.id}'].${Y.value}}}`})):[]});function W(L){return L!==ti.Base&&L!==ti.Start}const ee=L=>{o.value=!0,r.value=L},J=()=>{o.value=!1,r.value=void 0};return zo(()=>{lt.set(q.nodeModel,"openNodeMenu",L=>{o.value?J():ee(L)})}),(L,G)=>{var ge;const Y=ce("ArrowDownBold"),H=ce("el-icon"),se=ce("el-button"),Re=ce("el-option"),Se=ce("el-select"),ze=ce("el-dropdown"),Be=ce("MoreFilled"),Oe=ce("el-dropdown-item"),ae=ce("el-dropdown-menu"),ve=ce("el-alert"),Pe=ce("AppIcon"),Ke=ce("el-tooltip"),je=ce("el-collapse-transition"),at=ce("el-input"),gt=ce("el-form-item"),Mt=ce("el-form"),Xt=ce("el-dialog"),De=_v("resize");return nt(),In("div",{onMousedown:P,class:"workflow-node-container p-16",style:{overflow:"visible"}},[me("div",{class:kd(["step-container app-card p-16",{isSelected:q.nodeModel.isSelected,error:w.value!==200}]),style:{overflow:"visible"}},[Nl((nt(),In("div",null,[me("div",N7,[me("div",R7,[(nt(),Yt(ov(Jr(iv)(`${L.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(ge=L.nodeModel)==null?void 0:ge.properties.nodeData},null,8,["item"])),me("h4",k7,We(L.nodeModel.properties.stepName),1)]),me("div",{onMousemove:G[2]||(G[2]=Sn(()=>{},["stop"])),onMousedown:G[3]||(G[3]=Sn(()=>{},["stop"])),onKeydown:G[4]||(G[4]=Sn(()=>{},["stop"])),onClick:G[5]||(G[5]=Sn(()=>{},["stop"]))},[F(se,{text:"",onClick:G[0]||(G[0]=Ae=>g.value=!g.value)},{default:U(()=>[F(H,{class:kd(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:U(()=>[F(Y)]),_:1},8,["class"])]),_:1}),W(L.nodeModel.type)?(nt(),Yt(ze,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:U(()=>[me("div",j7,[me("h5",null,We(L.$t("views.applicationWorkflow.condition.title")),1),me("p",I7,[me("span",null,We(L.$t("views.applicationWorkflow.condition.front")),1),F(Se,{modelValue:h.value,"onUpdate:modelValue":G[1]||(G[1]=Ae=>h.value=Ae),size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[F(Re,{label:L.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),F(Re,{label:L.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),me("span",null,We(L.$t("views.applicationWorkflow.condition.text")),1)])])]),default:U(()=>[F(se,{text:""},{default:U(()=>[h.value==="OR"?(nt(),In("img",C7)):vr("",!0),h.value==="AND"?(nt(),In("img",D7)):vr("",!0)]),_:1})]),_:1})):vr("",!0),W(L.nodeModel.type)?(nt(),Yt(ze,{key:1,teleported:!1,trigger:"click"},{dropdown:U(()=>[F(ae,{style:{"min-width":"80px"}},{default:U(()=>[F(Oe,{onClick:O,class:"p-8"},{default:U(()=>[Tt(We(L.$t("common.rename")),1)]),_:1}),F(Oe,{onClick:R,class:"p-8"},{default:U(()=>[Tt(We(L.$t("common.copy")),1)]),_:1}),F(Oe,{onClick:j,class:"border-t p-8"},{default:U(()=>[Tt(We(L.$t("common.delete")),1)]),_:1})]),_:1})]),default:U(()=>[F(se,{text:""},{default:U(()=>[F(H,{class:"color-secondary"},{default:U(()=>[F(Be)]),_:1})]),_:1})]),_:1})):vr("",!0)],32)]),F(je,null,{default:U(()=>[Nl(me("div",{onMousedown:G[7]||(G[7]=Sn(()=>{},["stop"])),onKeydown:G[8]||(G[8]=Sn(()=>{},["stop"])),onClick:G[9]||(G[9]=Sn(()=>{},["stop"])),class:"mt-16"},[w.value!=200?(nt(),Yt(ve,{key:0,class:"mb-16",title:q.nodeModel.type==="application-node"?L.$t("views.applicationWorkflow.tip.applicationNodeError"):L.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):vr("",!0),RI(L.$slots,"default",{},void 0,!0),X.value.length>0?(nt(),In(si,{key:1},[me("h5",L7,We(L.$t("common.param.outputParam")),1),(nt(!0),In(si,null,Zi(X.value,(Ae,ht)=>(nt(),In("div",{key:ht,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:Wt=>A.value=ht,onMouseleave:G[6]||(G[6]=Wt=>A.value=null)},[me("span",$7,We(Ae.label)+" "+We("{"+Ae.value+"}"),1),A.value===ht?(nt(),Yt(Ke,{key:0,effect:"dark",content:L.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[F(se,{link:"",onClick:Wt=>Jr(DM)(Ae.globeLabel),style:{padding:"0"}},{default:U(()=>[F(Pe,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):vr("",!0)],40,F7))),128))],64)):vr("",!0)],544),[[bv,g.value]])]),_:3})])),[[De,k]])],2),F(je,null,{default:U(()=>[o.value?(nt(),Yt(y2,{key:0,onMousemove:G[10]||(G[10]=Sn(()=>{},["stop"])),onMousedown:G[11]||(G[11]=Sn(()=>{},["stop"])),onClick:G[12]||(G[12]=Sn(()=>{},["stop"])),onWheel:b,show:o.value,id:Jr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:B},null,8,["show","id"])):vr("",!0)]),_:1}),F(Xt,{title:L.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":G[17]||(G[17]=Ae=>c.value=Ae),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:G[18]||(G[18]=Sn(()=>{},["prevent"]))},{footer:U(()=>[me("span",B7,[F(se,{onClick:G[15]||(G[15]=Sn(Ae=>c.value=!1,["prevent"]))},{default:U(()=>[Tt(We(L.$t("common.cancel")),1)]),_:1}),F(se,{type:"primary",onClick:G[16]||(G[16]=Ae=>S(s.value))},{default:U(()=>[Tt(We(L.$t("common.save")),1)]),_:1})])]),default:U(()=>[F(Mt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:v.value},{default:U(()=>[F(gt,{prop:"title",rules:[{required:!0,message:L.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:U(()=>[F(at,{modelValue:v.value.title,"onUpdate:modelValue":G[13]||(G[13]=Ae=>v.value.title=Ae),onBlur:G[14]||(G[14]=Ae=>v.value.title=v.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const Ji=Xy(U7,[["__scopeId","data-v-8b52f518"]]),yi=$r({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=Oo({set:b=>{console.log("value",b),r("update:modelValue",b)},get:()=>o.modelValue}),c=Et([]),v=b=>(console.log("ctrlKey",b.ctrlKey),b.ctrlKey===!0?(b.preventDefault(),!0):(b.stopPropagation(),!0));function h(b){console.log("bool",b),b&&(c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(w=>w.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0))}return t({validate:()=>{const b=o.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(Qt("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(Qt("views.applicationWorkflow.variable.ReferencingError"));const w=s.value[0],O=s.value[1],S=b.find(P=>P.value===w);return S?S.children.some(P=>P.value===O)?Promise.resolve(""):(s.value=[],Promise.reject(Qt("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(Qt("views.applicationWorkflow.variable.NoReferencing")))}}),zo(()=>{c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(b=>b.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0)}),(b,w)=>{const O=ce("el-cascader");return nt(),Yt(O,kI({onWheel:v,teleported:!1,options:c.value,onVisibleChange:h},b.$attrs,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=S=>s.value=S),separator:" > "}),{default:U(({node:S,data:P})=>[me("span",{class:"flex align-center",onWheel:v},[(nt(),Yt(ov(Jr(iv)(`${P.type}-icon`)),{class:"mr-8",size:18})),Tt(We(P.label),1)],32)]),_:1},16,["options","modelValue"])}}}),G7={class:"title-decoration-1 mb-8"},V7={class:"flex-between w-full"},W7={class:"flex-between"},z7={class:"flex align-center"},H7={class:"mr-4"},X7={class:"flex-between w-full"},Y7=$r({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Tf(),n=X=>X.ctrlKey===!0?(X.preventDefault(),!0):(X.stopPropagation(),!0);function o(X){lt.set(g.nodeModel.properties.nodeData,"system",X)}const r=X=>{var W;X?(W=S.value)==null||W.reset_default(X,s):B({})},{params:{id:s}}=Vu.config.globalProperties.$route,v={modelId:"",system:"",prompt:`${Qt("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Qt("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${Qt("views.problem.title")}：
{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,questionReferenceAddress:["start-node","question"],datasetReferenceAddress:[],dialogueNumber:1,isResult:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",modelSetting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},h=Oo({get:()=>g.nodeModel.properties.nodeData?(g.nodeModel.properties.nodeData.modelSetting||lt.set(g.nodeModel.properties.nodeData,"modelSetting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),g.nodeModel.properties.nodeData):(lt.set(g.nodeModel.properties,"nodeData",v),g.nodeModel.properties.nodeData),set:X=>{lt.set(g.nodeModel.properties,"nodeData",X)}}),g=e,b=Et(),w=Et(),O=Et(null),S=Et(),P=Et(),A=()=>{var X;return Promise.all([w.value?w.value.validate():Promise.resolve(""),(X=b.value)==null?void 0:X.validate()]).catch(W=>Promise.reject({node:g.nodeModel,errMessage:W}))};function R(){s?Aa.getApplicationModel(s).then(X=>{O.value=lt.groupBy(X==null?void 0:X.data,"provider")}):t.asyncGetModel().then(X=>{O.value=lt.groupBy(X==null?void 0:X.data,"provider")})}const j=X=>{var W;X&&((W=S.value)==null||W.open(X,s,h.value.modelParamsSetting))},k=()=>{var X;(X=P.value)==null||X.open(h.value.modelSetting)};function B(X){lt.set(g.nodeModel.properties.nodeData,"modelParamsSetting",X)}function q(X){let W=lt.cloneDeep(g.nodeModel.properties.nodeData.modelSetting);W={...W,...X},lt.set(g.nodeModel.properties.nodeData,"modelSetting",W)}return zo(()=>{var X;R(),typeof((X=g.nodeModel.properties.nodeData)==null?void 0:X.isResult)>"u"&&Yp(g.nodeModel)&&lt.set(g.nodeModel.properties.nodeData,"isResult",!0),lt.set(g.nodeModel,"validate",A),h.value.dialogue_type||(h.value.dialogue_type="WORKFLOW")}),(X,W)=>{const ee=ce("Setting"),J=ce("el-icon"),L=ce("el-button"),G=ce("el-form-item"),Y=ce("el-option"),H=ce("el-select"),se=ce("el-input-number"),Re=ce("el-tooltip"),Se=ce("el-switch"),ze=ce("el-form"),Be=ce("el-card");return nt(),Yt(Ji,{nodeModel:X.nodeModel},{default:U(()=>[me("h5",G7,We(X.$t("views.applicationWorkflow.nodeSetting")),1),F(Be,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(ze,{onSubmit:W[11]||(W[11]=Sn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:b,"hide-required-asterisk":""},{default:U(()=>[F(G,{label:X.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:X.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[me("div",V7,[me("div",null,[me("span",null,[Tt(We(X.$t("views.application.applicationForm.form.aiModel.label")),1),W[12]||(W[12]=me("span",{class:"danger"},"*",-1))])]),F(L,{disabled:!h.value.modelId,type:"primary",link:"",onClick:W[0]||(W[0]=Oe=>j(h.value.modelId)),onRefreshForm:B},{default:U(()=>[F(J,null,{default:U(()=>[F(ee)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(jM,{onChange:r,onWheel:n,teleported:!1,modelValue:h.value.modelId,"onUpdate:modelValue":W[1]||(W[1]=Oe=>h.value.modelId=Oe),placeholder:X.$t("views.application.applicationForm.form.aiModel.placeholder"),options:O.value,onSubmitModel:R,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(G,{label:X.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(Dw,{title:X.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:h.value.system,"onUpdate:modelValue":W[2]||(W[2]=Oe=>h.value.system=Oe),style:{height:"100px"},onSubmitDialog:o,placeholder:X.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(G,{label:"知识库引用",prop:"datasetReferenceAddress",rules:{message:"请选择引用变量",trigger:"blur",required:!1}},{default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:w,nodeModel:X.nodeModel,class:"w-full",placeholder:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.datasetReferenceAddress,"onUpdate:modelValue":W[3]||(W[3]=Oe=>h.value.datasetReferenceAddress=Oe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1}),F(G,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:w,nodeModel:X.nodeModel,class:"w-full",placeholder:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.questionReferenceAddress,"onUpdate:modelValue":W[4]||(W[4]=Oe=>h.value.questionReferenceAddress=Oe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),F(G,{label:X.$t("views.application.applicationForm.form.historyRecord.label")},{label:U(()=>[me("div",W7,[me("div",null,We(X.$t("views.application.applicationForm.form.historyRecord.label")),1),F(H,{modelValue:h.value.dialogue_type,"onUpdate:modelValue":W[5]||(W[5]=Oe=>h.value.dialogue_type=Oe),type:"small",style:{width:"100px"}},{default:U(()=>[F(Y,{label:X.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),F(Y,{label:X.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[F(se,{modelValue:h.value.dialogueNumber,"onUpdate:modelValue":W[6]||(W[6]=Oe=>h.value.dialogueNumber=Oe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),F(G,{onClick:W[8]||(W[8]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",z7,[me("div",H7,[me("span",null,[Tt(We(X.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),W[13]||(W[13]=me("span",{class:"danger"},"*",-1))])]),F(Re,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(X.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(IM,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Se,{size:"small",modelValue:h.value.isResult,"onUpdate:modelValue":W[7]||(W[7]=Oe=>h.value.isResult=Oe)},null,8,["modelValue"])]),_:1}),F(G,{onClick:W[10]||(W[10]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",X7,[me("div",null,[me("span",null,We(X.$t("views.application.applicationForm.form.reasoningContent.label")),1)]),F(L,{type:"primary",link:"",onClick:k,onRefreshForm:B},{default:U(()=>[F(J,null,{default:U(()=>[F(ee)]),_:1})]),_:1})])]),default:U(()=>[F(Se,{size:"small",modelValue:h.value.modelSetting.reasoning_content_enable,"onUpdate:modelValue":W[9]||(W[9]=Oe=>h.value.modelSetting.reasoning_content_enable=Oe)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),F(ab,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:B},null,512),F(JI,{ref_key:"ReasoningParamSettingDialogRef",ref:P,onRefresh:q},null,512)]),_:1},8,["nodeModel"])}}});var nw={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var h in s)r.d(v,h,(function(g){return s[g]}).bind(null,h));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return X}),r.d(o,"b",function(){return q}),r.d(o,"c",function(){return Mt}),r.d(o,"d",function(){return Xt}),r.d(o,"e",function(){return j}),r.d(o,"f",function(){return B}),r.d(o,"g",function(){return j}),r.d(o,"h",function(){return gt}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return at}),r.d(o,"k",function(){return H});var s,c,v,h,g,b,w,O={},S=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(De,ge){for(var Ae in ge)De[Ae]=ge[Ae];return De}function R(De){var ge=De.parentNode;ge&&ge.removeChild(De)}function j(De,ge,Ae){var ht,Wt,Ot,rn={};for(Ot in ge)Ot=="key"?ht=ge[Ot]:Ot=="ref"?Wt=ge[Ot]:rn[Ot]=ge[Ot];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Ae),typeof De=="function"&&De.defaultProps!=null)for(Ot in De.defaultProps)rn[Ot]===void 0&&(rn[Ot]=De.defaultProps[Ot]);return k(De,rn,ht,Wt,null)}function k(De,ge,Ae,ht,Wt){var Ot={type:De,props:ge,key:Ae,ref:ht,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Wt??++v};return Wt==null&&c.vnode!=null&&c.vnode(Ot),Ot}function B(){return{current:null}}function q(De){return De.children}function X(De,ge){this.props=De,this.context=ge}function W(De,ge){if(ge==null)return De.__?W(De.__,De.__.__k.indexOf(De)+1):null;for(var Ae;ge<De.__k.length;ge++)if((Ae=De.__k[ge])!=null&&Ae.__e!=null)return Ae.__e;return typeof De.type=="function"?W(De):null}function ee(De){var ge,Ae;if((De=De.__)!=null&&De.__c!=null){for(De.__e=De.__c.base=null,ge=0;ge<De.__k.length;ge++)if((Ae=De.__k[ge])!=null&&Ae.__e!=null){De.__e=De.__c.base=Ae.__e;break}return ee(De)}}function J(De){(!De.__d&&(De.__d=!0)&&h.push(De)&&!L.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(L)}function L(){for(var De;L.__r=h.length;)De=h.sort(function(ge,Ae){return ge.__v.__b-Ae.__v.__b}),h=[],De.some(function(ge){var Ae,ht,Wt,Ot,rn,yn;ge.__d&&(rn=(Ot=(Ae=ge).__v).__e,(yn=Ae.__P)&&(ht=[],(Wt=A({},Ot)).__v=Ot.__v+1,Oe(yn,Ot,Wt,Ae.__n,yn.ownerSVGElement!==void 0,Ot.__h!=null?[rn]:null,ht,rn??W(Ot),Ot.__h),ae(ht,Ot),Ot.__e!=rn&&ee(Ot)))})}function G(De,ge,Ae,ht,Wt,Ot,rn,yn,Tn,pn){var ft,On,Fe,mn,Kn,ne,$n,xr=ht&&ht.__k||S,Ur=xr.length;for(Ae.__k=[],ft=0;ft<ge.length;ft++)if((mn=Ae.__k[ft]=(mn=ge[ft])==null||typeof mn=="boolean"?null:typeof mn=="string"||typeof mn=="number"||typeof mn=="bigint"?k(null,mn,null,null,mn):Array.isArray(mn)?k(q,{children:mn},null,null,null):mn.__b>0?k(mn.type,mn.props,mn.key,null,mn.__v):mn)!=null){if(mn.__=Ae,mn.__b=Ae.__b+1,(Fe=xr[ft])===null||Fe&&mn.key==Fe.key&&mn.type===Fe.type)xr[ft]=void 0;else for(On=0;On<Ur;On++){if((Fe=xr[On])&&mn.key==Fe.key&&mn.type===Fe.type){xr[On]=void 0;break}Fe=null}Oe(De,mn,Fe=Fe||O,Wt,Ot,rn,yn,Tn,pn),Kn=mn.__e,(On=mn.ref)&&Fe.ref!=On&&($n||($n=[]),Fe.ref&&$n.push(Fe.ref,null,mn),$n.push(On,mn.__c||Kn,mn)),Kn!=null?(ne==null&&(ne=Kn),typeof mn.type=="function"&&mn.__k===Fe.__k?mn.__d=Tn=Y(mn,Tn,De):Tn=se(De,mn,Fe,xr,Kn,Tn),typeof Ae.type=="function"&&(Ae.__d=Tn)):Tn&&Fe.__e==Tn&&Tn.parentNode!=De&&(Tn=W(Fe))}for(Ae.__e=ne,ft=Ur;ft--;)xr[ft]!=null&&(typeof Ae.type=="function"&&xr[ft].__e!=null&&xr[ft].__e==Ae.__d&&(Ae.__d=W(ht,ft+1)),Ke(xr[ft],xr[ft]));if($n)for(ft=0;ft<$n.length;ft++)Pe($n[ft],$n[++ft],$n[++ft])}function Y(De,ge,Ae){for(var ht,Wt=De.__k,Ot=0;Wt&&Ot<Wt.length;Ot++)(ht=Wt[Ot])&&(ht.__=De,ge=typeof ht.type=="function"?Y(ht,ge,Ae):se(Ae,ht,ht,Wt,ht.__e,ge));return ge}function H(De,ge){return ge=ge||[],De==null||typeof De=="boolean"||(Array.isArray(De)?De.some(function(Ae){H(Ae,ge)}):ge.push(De)),ge}function se(De,ge,Ae,ht,Wt,Ot){var rn,yn,Tn;if(ge.__d!==void 0)rn=ge.__d,ge.__d=void 0;else if(Ae==null||Wt!=Ot||Wt.parentNode==null)e:if(Ot==null||Ot.parentNode!==De)De.appendChild(Wt),rn=null;else{for(yn=Ot,Tn=0;(yn=yn.nextSibling)&&Tn<ht.length;Tn+=2)if(yn==Wt)break e;De.insertBefore(Wt,Ot),rn=Ot}return rn!==void 0?rn:Wt.nextSibling}function Re(De,ge,Ae){ge[0]==="-"?De.setProperty(ge,Ae):De[ge]=Ae==null?"":typeof Ae!="number"||P.test(ge)?Ae:Ae+"px"}function Se(De,ge,Ae,ht,Wt){var Ot;e:if(ge==="style")if(typeof Ae=="string")De.style.cssText=Ae;else{if(typeof ht=="string"&&(De.style.cssText=ht=""),ht)for(ge in ht)Ae&&ge in Ae||Re(De.style,ge,"");if(Ae)for(ge in Ae)ht&&Ae[ge]===ht[ge]||Re(De.style,ge,Ae[ge])}else if(ge[0]==="o"&&ge[1]==="n")Ot=ge!==(ge=ge.replace(/Capture$/,"")),ge=ge.toLowerCase()in De?ge.toLowerCase().slice(2):ge.slice(2),De.l||(De.l={}),De.l[ge+Ot]=Ae,Ae?ht||De.addEventListener(ge,Ot?Be:ze,Ot):De.removeEventListener(ge,Ot?Be:ze,Ot);else if(ge!=="dangerouslySetInnerHTML"){if(Wt)ge=ge.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(ge!=="href"&&ge!=="list"&&ge!=="form"&&ge!=="tabIndex"&&ge!=="download"&&ge in De)try{De[ge]=Ae??"";break e}catch{}typeof Ae=="function"||(Ae!=null&&(Ae!==!1||ge[0]==="a"&&ge[1]==="r")?De.setAttribute(ge,Ae):De.removeAttribute(ge))}}function ze(De){this.l[De.type+!1](c.event?c.event(De):De)}function Be(De){this.l[De.type+!0](c.event?c.event(De):De)}function Oe(De,ge,Ae,ht,Wt,Ot,rn,yn,Tn){var pn,ft,On,Fe,mn,Kn,ne,$n,xr,Ur,no,Dn=ge.type;if(ge.constructor!==void 0)return null;Ae.__h!=null&&(Tn=Ae.__h,yn=ge.__e=Ae.__e,ge.__h=null,Ot=[yn]),(pn=c.__b)&&pn(ge);try{e:if(typeof Dn=="function"){if($n=ge.props,xr=(pn=Dn.contextType)&&ht[pn.__c],Ur=pn?xr?xr.props.value:pn.__:ht,Ae.__c?ne=(ft=ge.__c=Ae.__c).__=ft.__E:("prototype"in Dn&&Dn.prototype.render?ge.__c=ft=new Dn($n,Ur):(ge.__c=ft=new X($n,Ur),ft.constructor=Dn,ft.render=je),xr&&xr.sub(ft),ft.props=$n,ft.state||(ft.state={}),ft.context=Ur,ft.__n=ht,On=ft.__d=!0,ft.__h=[]),ft.__s==null&&(ft.__s=ft.state),Dn.getDerivedStateFromProps!=null&&(ft.__s==ft.state&&(ft.__s=A({},ft.__s)),A(ft.__s,Dn.getDerivedStateFromProps($n,ft.__s))),Fe=ft.props,mn=ft.state,On)Dn.getDerivedStateFromProps==null&&ft.componentWillMount!=null&&ft.componentWillMount(),ft.componentDidMount!=null&&ft.__h.push(ft.componentDidMount);else{if(Dn.getDerivedStateFromProps==null&&$n!==Fe&&ft.componentWillReceiveProps!=null&&ft.componentWillReceiveProps($n,Ur),!ft.__e&&ft.shouldComponentUpdate!=null&&ft.shouldComponentUpdate($n,ft.__s,Ur)===!1||ge.__v===Ae.__v){ft.props=$n,ft.state=ft.__s,ge.__v!==Ae.__v&&(ft.__d=!1),ft.__v=ge,ge.__e=Ae.__e,ge.__k=Ae.__k,ge.__k.forEach(function(ko){ko&&(ko.__=ge)}),ft.__h.length&&rn.push(ft);break e}ft.componentWillUpdate!=null&&ft.componentWillUpdate($n,ft.__s,Ur),ft.componentDidUpdate!=null&&ft.__h.push(function(){ft.componentDidUpdate(Fe,mn,Kn)})}ft.context=Ur,ft.props=$n,ft.state=ft.__s,(pn=c.__r)&&pn(ge),ft.__d=!1,ft.__v=ge,ft.__P=De,pn=ft.render(ft.props,ft.state,ft.context),ft.state=ft.__s,ft.getChildContext!=null&&(ht=A(A({},ht),ft.getChildContext())),On||ft.getSnapshotBeforeUpdate==null||(Kn=ft.getSnapshotBeforeUpdate(Fe,mn)),no=pn!=null&&pn.type===q&&pn.key==null?pn.props.children:pn,G(De,Array.isArray(no)?no:[no],ge,Ae,ht,Wt,Ot,rn,yn,Tn),ft.base=ge.__e,ge.__h=null,ft.__h.length&&rn.push(ft),ne&&(ft.__E=ft.__=null),ft.__e=!1}else Ot==null&&ge.__v===Ae.__v?(ge.__k=Ae.__k,ge.__e=Ae.__e):ge.__e=ve(Ae.__e,ge,Ae,ht,Wt,Ot,rn,Tn);(pn=c.diffed)&&pn(ge)}catch(ko){ge.__v=null,(Tn||Ot!=null)&&(ge.__e=yn,ge.__h=!!Tn,Ot[Ot.indexOf(yn)]=null),c.__e(ko,ge,Ae)}}function ae(De,ge){c.__c&&c.__c(ge,De),De.some(function(Ae){try{De=Ae.__h,Ae.__h=[],De.some(function(ht){ht.call(Ae)})}catch(ht){c.__e(ht,Ae.__v)}})}function ve(De,ge,Ae,ht,Wt,Ot,rn,yn){var Tn,pn,ft,On=Ae.props,Fe=ge.props,mn=ge.type,Kn=0;if(mn==="svg"&&(Wt=!0),Ot!=null){for(;Kn<Ot.length;Kn++)if((Tn=Ot[Kn])&&"setAttribute"in Tn==!!mn&&(mn?Tn.localName===mn:Tn.nodeType===3)){De=Tn,Ot[Kn]=null;break}}if(De==null){if(mn===null)return document.createTextNode(Fe);De=Wt?document.createElementNS("http://www.w3.org/2000/svg",mn):document.createElement(mn,Fe.is&&Fe),Ot=null,yn=!1}if(mn===null)On===Fe||yn&&De.data===Fe||(De.data=Fe);else{if(Ot=Ot&&s.call(De.childNodes),pn=(On=Ae.props||O).dangerouslySetInnerHTML,ft=Fe.dangerouslySetInnerHTML,!yn){if(Ot!=null)for(On={},Kn=0;Kn<De.attributes.length;Kn++)On[De.attributes[Kn].name]=De.attributes[Kn].value;(ft||pn)&&(ft&&(pn&&ft.__html==pn.__html||ft.__html===De.innerHTML)||(De.innerHTML=ft&&ft.__html||""))}if(function(ne,$n,xr,Ur,no){var Dn;for(Dn in xr)Dn==="children"||Dn==="key"||Dn in $n||Se(ne,Dn,null,xr[Dn],Ur);for(Dn in $n)no&&typeof $n[Dn]!="function"||Dn==="children"||Dn==="key"||Dn==="value"||Dn==="checked"||xr[Dn]===$n[Dn]||Se(ne,Dn,$n[Dn],xr[Dn],Ur)}(De,Fe,On,Wt,yn),ft)ge.__k=[];else if(Kn=ge.props.children,G(De,Array.isArray(Kn)?Kn:[Kn],ge,Ae,ht,Wt&&mn!=="foreignObject",Ot,rn,Ot?Ot[0]:Ae.__k&&W(Ae,0),yn),Ot!=null)for(Kn=Ot.length;Kn--;)Ot[Kn]!=null&&R(Ot[Kn]);yn||("value"in Fe&&(Kn=Fe.value)!==void 0&&(Kn!==On.value||Kn!==De.value||mn==="progress"&&!Kn)&&Se(De,"value",Kn,On.value,!1),"checked"in Fe&&(Kn=Fe.checked)!==void 0&&Kn!==De.checked&&Se(De,"checked",Kn,On.checked,!1))}return De}function Pe(De,ge,Ae){try{typeof De=="function"?De(ge):De.current=ge}catch(ht){c.__e(ht,Ae)}}function Ke(De,ge,Ae){var ht,Wt;if(c.unmount&&c.unmount(De),(ht=De.ref)&&(ht.current&&ht.current!==De.__e||Pe(ht,null,ge)),(ht=De.__c)!=null){if(ht.componentWillUnmount)try{ht.componentWillUnmount()}catch(Ot){c.__e(Ot,ge)}ht.base=ht.__P=null}if(ht=De.__k)for(Wt=0;Wt<ht.length;Wt++)ht[Wt]&&Ke(ht[Wt],ge,typeof De.type!="function");Ae||De.__e==null||R(De.__e),De.__e=De.__d=void 0}function je(De,ge,Ae){return this.constructor(De,Ae)}function at(De,ge,Ae){var ht,Wt,Ot;c.__&&c.__(De,ge),Wt=(ht=typeof Ae=="function")?null:Ae&&Ae.__k||ge.__k,Ot=[],Oe(ge,De=(!ht&&Ae||ge).__k=j(q,null,[De]),Wt||O,O,ge.ownerSVGElement!==void 0,!ht&&Ae?[Ae]:Wt?null:ge.firstChild?s.call(ge.childNodes):null,Ot,!ht&&Ae?Ae:Wt?Wt.__e:ge.firstChild,ht),ae(Ot,De)}function gt(De,ge){at(De,ge,gt)}function Mt(De,ge,Ae){var ht,Wt,Ot,rn=A({},De.props);for(Ot in ge)Ot=="key"?ht=ge[Ot]:Ot=="ref"?Wt=ge[Ot]:rn[Ot]=ge[Ot];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Ae),k(De.type,rn,ht||De.key,Wt||De.ref,null)}function Xt(De,ge){var Ae={__c:ge="__cC"+w++,__:De,Consumer:function(ht,Wt){return ht.children(Wt)},Provider:function(ht){var Wt,Ot;return this.getChildContext||(Wt=[],(Ot={})[ge]=this,this.getChildContext=function(){return Ot},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&Wt.some(J)},this.sub=function(rn){Wt.push(rn);var yn=rn.componentWillUnmount;rn.componentWillUnmount=function(){Wt.splice(Wt.indexOf(rn),1),yn&&yn.call(rn)}}),ht.children}};return Ae.Provider.__=Ae.Consumer.contextType=Ae}s=S.slice,c={__e:function(De,ge){for(var Ae,ht,Wt;ge=ge.__;)if((Ae=ge.__c)&&!Ae.__)try{if((ht=Ae.constructor)&&ht.getDerivedStateFromError!=null&&(Ae.setState(ht.getDerivedStateFromError(De)),Wt=Ae.__d),Ae.componentDidCatch!=null&&(Ae.componentDidCatch(De),Wt=Ae.__d),Wt)return Ae.__E=Ae}catch(Ot){De=Ot}throw De}},v=0,X.prototype.setState=function(De,ge){var Ae;Ae=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof De=="function"&&(De=De(A({},Ae),this.props)),De&&A(Ae,De),De!=null&&this.__v&&(ge&&this.__h.push(ge),J(this))},X.prototype.forceUpdate=function(De){this.__v&&(this.__e=!0,De&&this.__h.push(De),J(this))},X.prototype.render=q,h=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,L.__r=0,w=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return J}),r.d(o,"b",function(){return Nc}),r.d(o,"c",function(){return Ma}),r.d(o,"d",function(){return Xn}),r.d(o,"e",function(){return qt}),r.d(o,"f",function(){return en}),r.d(o,"g",function(){return Bn}),r.d(o,"h",function(){return Mi}),r.d(o,"i",function(){return no}),r.d(o,"j",function(){return xn}),r.d(o,"k",function(){return dl}),r.d(o,"l",function(){return Oc}),r.d(o,"m",function(){return ne}),r.d(o,"n",function(){return lu}),r.d(o,"o",function(){return Y}),r.d(o,"p",function(){return Bf}),r.d(o,"q",function(){return pa}),r.d(o,"r",function(){return uu}),r.d(o,"s",function(){return oa}),r.d(o,"t",function(){return Co}),r.d(o,"u",function(){return Os}),r.d(o,"v",function(){return $f}),r.d(o,"w",function(){return Sc}),r.d(o,"x",function(){return ri}),r.d(o,"y",function(){return va}),r.d(o,"z",function(){return Uo}),r.d(o,"A",function(){return ii}),r.d(o,"B",function(){return na}),r.d(o,"C",function(){return pn}),r.d(o,"D",function(){return Ac}),r.d(o,"E",function(){return Gr}),r.d(o,"F",function(){return Wr}),r.d(o,"G",function(){return wc}),r.d(o,"H",function(){return _c}),r.d(o,"I",function(){return Tc}),r.d(o,"J",function(){return oi}),r.d(o,"K",function(){return Xe}),r.d(o,"L",function(){return ro}),r.d(o,"M",function(){return As});var v=[];Object.freeze(v);var h={};function g(){return++Pn.mobxGuid}function b(T){throw w(!1,T),"X"}function w(T,M){if(!T)throw new Error("[mobx] "+(M||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(h);function O(T){var M=!1;return function(){if(!M)return M=!0,T.apply(this,arguments)}}var S=function(){};function P(T){return T!==null&&typeof T=="object"}function A(T){if(T===null||typeof T!="object")return!1;var M=Object.getPrototypeOf(T);return M===Object.prototype||M===null}function R(T,M,$){Object.defineProperty(T,M,{enumerable:!1,writable:!0,configurable:!0,value:$})}function j(T,M){var $="isMobX"+T;return M.prototype[$]=!0,function(te){return P(te)&&te[$]===!0}}function k(T){return T instanceof Map}function B(T){return T instanceof Set}function q(T){var M=new Set;for(var $ in T)M.add($);return Object.getOwnPropertySymbols(T).forEach(function(te){Object.getOwnPropertyDescriptor(T,te).enumerable&&M.add(te)}),Array.from(M)}function X(T){return T&&T.toString?T.toString():new String(T).toString()}function W(T){return T===null?null:typeof T=="object"?""+T:T}var ee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:Object.getOwnPropertyNames,J=Symbol("mobx administration"),L=function(){function T(M){M===void 0&&(M="Atom@"+g()),this.name=M,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=On.NOT_TRACKING}return T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.reportObserved=function(){return Es(this)},T.prototype.reportChanged=function(){zi(),function(M){M.lowestObserverState!==On.STALE&&(M.lowestObserverState=On.STALE,M.observers.forEach(function($){$.dependenciesState===On.UP_TO_DATE&&($.isTracing!==Fe.NONE&&Ta($,M),$.onBecomeStale()),$.dependenciesState=On.STALE}))}(this),ta()},T.prototype.toString=function(){return this.name},T}(),G=j("Atom",L);function Y(T,M,$){M===void 0&&(M=S),$===void 0&&($=S);var te,ye=new L(T);return M!==S&&Lf("onBecomeObserved",ye,M,te),$!==S&&Gr(ye,$),ye}var H={identity:function(T,M){return T===M},structural:function(T,M){return Dt(T,M)},default:function(T,M){return Object.is(T,M)},shallow:function(T,M){return Dt(T,M,1)}},se=function(T,M){return se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,te){$.__proto__=te}||function($,te){for(var ye in te)te.hasOwnProperty(ye)&&($[ye]=te[ye])},se(T,M)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Re=function(){return Re=Object.assign||function(T){for(var M,$=1,te=arguments.length;$<te;$++)for(var ye in M=arguments[$])Object.prototype.hasOwnProperty.call(M,ye)&&(T[ye]=M[ye]);return T},Re.apply(this,arguments)};function Se(T){var M=typeof Symbol=="function"&&T[Symbol.iterator],$=0;return M?M.call(T):{next:function(){return T&&$>=T.length&&(T=void 0),{value:T&&T[$++],done:!T}}}}function ze(T,M){var $=typeof Symbol=="function"&&T[Symbol.iterator];if(!$)return T;var te,ye,Ge=$.call(T),vt=[];try{for(;(M===void 0||M-- >0)&&!(te=Ge.next()).done;)vt.push(te.value)}catch(zt){ye={error:zt}}finally{try{te&&!te.done&&($=Ge.return)&&$.call(Ge)}finally{if(ye)throw ye.error}}return vt}function Be(){for(var T=[],M=0;M<arguments.length;M++)T=T.concat(ze(arguments[M]));return T}var Oe=Symbol("mobx did run lazy initializers"),ae=Symbol("mobx pending decorators"),ve={},Pe={};function Ke(T,M){var $=M?ve:Pe;return $[T]||($[T]={configurable:!0,enumerable:M,get:function(){return je(this),this[T]},set:function(te){je(this),this[T]=te}})}function je(T){var M,$;if(T[Oe]!==!0){var te=T[ae];if(te){R(T,Oe,!0);var ye=Be(Object.getOwnPropertySymbols(te),Object.keys(te));try{for(var Ge=Se(ye),vt=Ge.next();!vt.done;vt=Ge.next()){var zt=te[vt.value];zt.propertyCreator(T,zt.prop,zt.descriptor,zt.decoratorTarget,zt.decoratorArguments)}}catch(bn){M={error:bn}}finally{try{vt&&!vt.done&&($=Ge.return)&&$.call(Ge)}finally{if(M)throw M.error}}}}}function at(T,M){return function(){var $,te=function(ye,Ge,vt,zt){if(zt===!0)return M(ye,Ge,vt,ye,$),null;if(!Object.prototype.hasOwnProperty.call(ye,ae)){var bn=ye[ae];R(ye,ae,Re({},bn))}return ye[ae][Ge]={prop:Ge,propertyCreator:M,descriptor:vt,decoratorTarget:ye,decoratorArguments:$},Ke(Ge,T)};return gt(arguments)?($=v,te.apply(null,arguments)):($=Array.prototype.slice.call(arguments),te)}}function gt(T){return(T.length===2||T.length===3)&&(typeof T[1]=="string"||typeof T[1]=="symbol")||T.length===4&&T[3]===!0}function Mt(T,M,$){return ri(T)?T:Array.isArray(T)?pn.array(T,{name:$}):A(T)?pn.object(T,void 0,{name:$}):k(T)?pn.map(T,{name:$}):B(T)?pn.set(T,{name:$}):T}function Xt(T){return T}function De(T){w(T);var M=at(!0,function(te,ye,Ge,vt,zt){var bn=Ge?Ge.initializer?Ge.initializer.call(te):Ge.value:void 0;ra(te).addObservableProp(ye,bn,T)}),$=(s!==void 0&&s.env,M);return $.enhancer=T,$}var ge={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ae(T){return T==null?ge:typeof T=="string"?{name:T,deep:!0,proxy:!0}:T}Object.freeze(ge);var ht=De(Mt),Wt=De(function(T,M,$){return T==null||ii(T)||va(T)||Uo(T)||Xo(T)?T:Array.isArray(T)?pn.array(T,{name:$,deep:!1}):A(T)?pn.object(T,void 0,{name:$,deep:!1}):k(T)?pn.map(T,{name:$,deep:!1}):B(T)?pn.set(T,{name:$,deep:!1}):b(!1)}),Ot=De(Xt),rn=De(function(T,M,$){return Dt(T,M)?M:T});function yn(T){return T.defaultDecorator?T.defaultDecorator.enhancer:T.deep===!1?Xt:Mt}var Tn={box:function(T,M){arguments.length>2&&ft("box");var $=Ae(M);return new Rr(T,yn($),$.name,!0,$.equals)},array:function(T,M){arguments.length>2&&ft("array");var $=Ae(M);return Il(T,yn($),$.name)},map:function(T,M){arguments.length>2&&ft("map");var $=Ae(M);return new Nc(T,yn($),$.name)},set:function(T,M){arguments.length>2&&ft("set");var $=Ae(M);return new Wa(T,yn($),$.name)},object:function(T,M,$){typeof arguments[1]=="string"&&ft("object");var te=Ae($);if(te.proxy===!1)return pa({},T,M,te);var ye=xs(te),Ge=pa({},void 0,void 0,te),vt=su(Ge);return Ff(vt,T,M,ye),vt},ref:Ot,shallow:Wt,deep:ht,struct:rn},pn=function(T,M,$){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ht.apply(null,arguments);if(ri(T))return T;var te=A(T)?pn.object(T,M,$):Array.isArray(T)?pn.array(T,M):k(T)?pn.map(T,M):B(T)?pn.set(T,M):T;if(te!==T)return te;b(!1)};function ft(T){b("Expected one or two arguments to observable."+T+". Did you accidentally try to use observable."+T+" as decorator?")}Object.keys(Tn).forEach(function(T){return pn[T]=Tn[T]});var On,Fe,mn=at(!1,function(T,M,$,te,ye){var Ge=$.get,vt=$.set,zt=ye[0]||{};ra(T).addComputedProp(T,M,Re({get:Ge,set:vt,context:T},zt))}),Kn=mn({equals:H.structural}),ne=function(T,M,$){if(typeof M=="string"||T!==null&&typeof T=="object"&&arguments.length===1)return mn.apply(null,arguments);var te=typeof M=="object"?M:{};return te.get=T,te.set=typeof M=="function"?M:te.set,te.name=te.name||T.name||"",new Ua(te)};ne.struct=Kn,function(T){T[T.NOT_TRACKING=-1]="NOT_TRACKING",T[T.UP_TO_DATE=0]="UP_TO_DATE",T[T.POSSIBLY_STALE=1]="POSSIBLY_STALE",T[T.STALE=2]="STALE"}(On||(On={})),function(T){T[T.NONE=0]="NONE",T[T.LOG=1]="LOG",T[T.BREAK=2]="BREAK"}(Fe||(Fe={}));var $n=function(T){this.cause=T};function xr(T){return T instanceof $n}function Ur(T){switch(T.dependenciesState){case On.UP_TO_DATE:return!1;case On.NOT_TRACKING:case On.STALE:return!0;case On.POSSIBLY_STALE:for(var M=en(!0),$=Ce(),te=T.observing,ye=te.length,Ge=0;Ge<ye;Ge++){var vt=te[Ge];if(fl(vt)){if(Pn.disableErrorBoundaries)vt.get();else try{vt.get()}catch{return ot($),qt(M),!0}if(T.dependenciesState===On.STALE)return ot($),qt(M),!0}}return Nn(T),ot($),qt(M),!1}}function no(){return Pn.trackingDerivation!==null}function Dn(T){var M=T.observers.size>0;Pn.computationDepth>0&&M&&b(!1),Pn.allowStateChanges||!M&&Pn.enforceActions!=="strict"||b(!1)}function ko(T,M,$){var te=en(!0);Nn(T),T.newObserving=new Array(T.observing.length+100),T.unboundDepsCount=0,T.runId=++Pn.runId;var ye,Ge=Pn.trackingDerivation;if(Pn.trackingDerivation=T,Pn.disableErrorBoundaries===!0)ye=M.call($);else try{ye=M.call($)}catch(vt){ye=new $n(vt)}return Pn.trackingDerivation=Ge,function(vt){for(var zt=vt.observing,bn=vt.observing=vt.newObserving,yr=On.UP_TO_DATE,ln=0,Vr=vt.unboundDepsCount,dr=0;dr<Vr;dr++)(Cr=bn[dr]).diffValue===0&&(Cr.diffValue=1,ln!==dr&&(bn[ln]=Cr),ln++),Cr.dependenciesState>yr&&(yr=Cr.dependenciesState);for(bn.length=ln,vt.newObserving=null,Vr=zt.length;Vr--;)(Cr=zt[Vr]).diffValue===0&&ho(Cr,vt),Cr.diffValue=0;for(;ln--;){var Cr;(Cr=bn[ln]).diffValue===1&&(Cr.diffValue=0,kf(Cr,vt))}yr!==On.UP_TO_DATE&&(vt.dependenciesState=yr,vt.onBecomeStale())}(T),qt(te),ye}function Ee(T){var M=T.observing;T.observing=[];for(var $=M.length;$--;)ho(M[$],T);T.dependenciesState=On.NOT_TRACKING}function Xe(T){var M=Ce();try{return T()}finally{ot(M)}}function Ce(){var T=Pn.trackingDerivation;return Pn.trackingDerivation=null,T}function ot(T){Pn.trackingDerivation=T}function en(T){var M=Pn.allowStateReads;return Pn.allowStateReads=T,M}function qt(T){Pn.allowStateReads=T}function Nn(T){if(T.dependenciesState!==On.UP_TO_DATE){T.dependenciesState=On.UP_TO_DATE;for(var M=T.observing,$=M.length;$--;)M[$].lowestObserverState=On.UP_TO_DATE}}var _r=0,ni=1,mi=Object.getOwnPropertyDescriptor(function(){},"name");mi&&mi.configurable;function Bo(T,M,$){var te=function(){return Ho(T,M,$||this,arguments)};return te.isMobxAction=!0,te}function Ho(T,M,$,te){var ye=xn();try{return M.apply($,te)}catch(Ge){throw ye.error=Ge,Ge}finally{Bn(ye)}}function xn(T,M,$){var te=0,ye=Ce();zi();var Ge={prevDerivation:ye,prevAllowStateChanges:or(!0),prevAllowStateReads:en(!0),notifySpy:!1,startTime:te,actionId:ni++,parentActionId:_r};return _r=Ge.actionId,Ge}function Bn(T){_r!==T.actionId&&b("invalid action stack. did you forget to finish an action?"),_r=T.parentActionId,T.error!==void 0&&(Pn.suppressReactionErrors=!0),Kr(T.prevAllowStateChanges),qt(T.prevAllowStateReads),ta(),ot(T.prevDerivation),T.notifySpy,Pn.suppressReactionErrors=!1}function Xn(T,M){var $,te=or(T);try{$=M()}finally{Kr(te)}return $}function or(T){var M=Pn.allowStateChanges;return Pn.allowStateChanges=T,M}function Kr(T){Pn.allowStateChanges=T}var Rr=function(T){function M($,te,ye,Ge,vt){ye===void 0&&(ye="ObservableValue@"+g()),vt===void 0&&(vt=H.default);var zt=T.call(this,ye)||this;return zt.enhancer=te,zt.name=ye,zt.equals=vt,zt.hasUnreportedChange=!1,zt.value=te($,void 0,ye),zt}return function($,te){function ye(){this.constructor=$}se($,te),$.prototype=te===null?Object.create(te):(ye.prototype=te.prototype,new ye)}(M,T),M.prototype.dehanceValue=function($){return this.dehancer!==void 0?this.dehancer($):$},M.prototype.set=function($){this.value,($=this.prepareNewValue($))!==Pn.UNCHANGED&&this.setNewValue($)},M.prototype.prepareNewValue=function($){if(Dn(this),Hi(this)){var te=Tr(this,{object:this,type:"update",newValue:$});if(!te)return Pn.UNCHANGED;$=te.newValue}return $=this.enhancer($,this.value,this.name),this.equals(this.value,$)?Pn.UNCHANGED:$},M.prototype.setNewValue=function($){var te=this.value;this.value=$,this.reportChanged(),ji(this)&&fi(this,{type:"update",object:this,newValue:$,oldValue:te})},M.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},M.prototype.intercept=function($){return ha(this,$)},M.prototype.observe=function($,te){return te&&$({object:this,type:"update",newValue:this.value,oldValue:void 0}),Pa(this,$)},M.prototype.toJSON=function(){return this.get()},M.prototype.toString=function(){return this.name+"["+this.value+"]"},M.prototype.valueOf=function(){return W(this.get())},M.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},M}(L),cl=j("ObservableValue",Rr),Ua=function(){function T(M){this.dependenciesState=On.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=On.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new $n(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Fe.NONE,w(M.get,"missing option for computed: get"),this.derivation=M.get,this.name=M.name||"ComputedValue@"+g(),M.set&&(this.setter=Bo(this.name+"-setter",M.set)),this.equals=M.equals||(M.compareStructural||M.struct?H.structural:H.default),this.scope=M.context,this.requiresReaction=!!M.requiresReaction,this.keepAlive=!!M.keepAlive}return T.prototype.onBecomeStale=function(){(function(M){M.lowestObserverState===On.UP_TO_DATE&&(M.lowestObserverState=On.POSSIBLY_STALE,M.observers.forEach(function($){$.dependenciesState===On.UP_TO_DATE&&($.dependenciesState=On.POSSIBLY_STALE,$.isTracing!==Fe.NONE&&Ta($,M),$.onBecomeStale())}))})(this)},T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Es(this),Ur(this)&&this.trackAndCompute()&&function($){$.lowestObserverState!==On.STALE&&($.lowestObserverState=On.STALE,$.observers.forEach(function(te){te.dependenciesState===On.POSSIBLY_STALE?te.dependenciesState=On.STALE:te.dependenciesState===On.UP_TO_DATE&&($.lowestObserverState=On.UP_TO_DATE)}))}(this)):Ur(this)&&(this.warnAboutUntrackedRead(),zi(),this.value=this.computeValue(!1),ta());var M=this.value;if(xr(M))throw M.cause;return M},T.prototype.peek=function(){var M=this.computeValue(!1);if(xr(M))throw M.cause;return M},T.prototype.set=function(M){if(this.setter){w(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,M)}finally{this.isRunningSetter=!1}}else w(!1,!1)},T.prototype.trackAndCompute=function(){var M=this.value,$=this.dependenciesState===On.NOT_TRACKING,te=this.computeValue(!0),ye=$||xr(M)||xr(te)||!this.equals(M,te);return ye&&(this.value=te),ye},T.prototype.computeValue=function(M){var $;if(this.isComputing=!0,Pn.computationDepth++,M)$=ko(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)$=this.derivation.call(this.scope);else try{$=this.derivation.call(this.scope)}catch(te){$=new $n(te)}return Pn.computationDepth--,this.isComputing=!1,$},T.prototype.suspend=function(){this.keepAlive||(Ee(this),this.value=void 0)},T.prototype.observe=function(M,$){var te=this,ye=!0,Ge=void 0;return Oc(function(){var vt=te.get();if(!ye||$){var zt=Ce();M({type:"update",object:te,newValue:vt,oldValue:Ge}),ot(zt)}ye=!1,Ge=vt})},T.prototype.warnAboutUntrackedRead=function(){},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},T.prototype.valueOf=function(){return W(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(),fl=j("ComputedValue",Ua),au=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ud={};function yc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:Ud}var fa=!0,Wu=!1,Pn=function(){var T=yc();return T.__mobxInstanceCount>0&&!T.__mobxGlobals&&(fa=!1),T.__mobxGlobals&&T.__mobxGlobals.version!==new au().version&&(fa=!1),fa?T.__mobxGlobals?(T.__mobxInstanceCount+=1,T.__mobxGlobals.UNCHANGED||(T.__mobxGlobals.UNCHANGED={}),T.__mobxGlobals):(T.__mobxInstanceCount=1,T.__mobxGlobals=new au):(setTimeout(function(){Wu||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new au)}();function kf(T,M){T.observers.add(M),T.lowestObserverState>M.dependenciesState&&(T.lowestObserverState=M.dependenciesState)}function ho(T,M){T.observers.delete(M),T.observers.size===0&&mc(T)}function mc(T){T.isPendingUnobservation===!1&&(T.isPendingUnobservation=!0,Pn.pendingUnobservations.push(T))}function zi(){Pn.inBatch++}function ta(){if(--Pn.inBatch==0){bc();for(var T=Pn.pendingUnobservations,M=0;M<T.length;M++){var $=T[M];$.isPendingUnobservation=!1,$.observers.size===0&&($.isBeingObserved&&($.isBeingObserved=!1,$.onBecomeUnobserved()),$ instanceof Ua&&$.suspend())}Pn.pendingUnobservations=[]}}function Es(T){var M=Pn.trackingDerivation;return M!==null?(M.runId!==T.lastAccessedBy&&(T.lastAccessedBy=M.runId,M.newObserving[M.unboundDepsCount++]=T,T.isBeingObserved||(T.isBeingObserved=!0,T.onBecomeObserved())),!0):(T.observers.size===0&&Pn.inBatch>0&&mc(T),!1)}function Ta(T,M){if(T.isTracing===Fe.BREAK){var $=[];da(Co(T),$,1),new Function(`debugger;
/*
Tracing '`+T.name+`'

You are entering this break point because derivation '`+T.name+"' is being traced and '"+M.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(T instanceof Ua?T.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+$.join(`
`)+`
*/
    `)()}}function da(T,M,$){M.length>=1e3?M.push("(and many more)"):(M.push(""+new Array($).join("	")+T.name),T.dependencies&&T.dependencies.forEach(function(te){return da(te,M,$+1)}))}var Ma=function(){function T(M,$,te,ye){M===void 0&&(M="Reaction@"+g()),ye===void 0&&(ye=!1),this.name=M,this.onInvalidate=$,this.errorHandler=te,this.requiresObservable=ye,this.observing=[],this.newObserving=[],this.dependenciesState=On.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Fe.NONE}return T.prototype.onBecomeStale=function(){this.schedule()},T.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),bc())},T.prototype.isScheduled=function(){return this._isScheduled},T.prototype.runReaction=function(){if(!this.isDisposed){if(zi(),this._isScheduled=!1,Ur(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(M){this.reportExceptionInDerivation(M)}}ta()}},T.prototype.track=function(M){if(!this.isDisposed){zi(),this._isRunning=!0;var $=ko(this,M,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ee(this),xr($)&&this.reportExceptionInDerivation($.cause),ta()}},T.prototype.reportExceptionInDerivation=function(M){var $=this;if(this.errorHandler)this.errorHandler(M,this);else{if(Pn.disableErrorBoundaries)throw M;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(te){return te(M,$)})}},T.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(zi(),Ee(this),ta()))},T.prototype.getDisposer=function(){var M=this.dispose.bind(this);return M[J]=this,M},T.prototype.toString=function(){return"Reaction["+this.name+"]"},T.prototype.trace=function(M){M===void 0&&(M=!1),function(){for(var $=[],te=0;te<arguments.length;te++)$[te]=arguments[te];var ye=!1;typeof $[$.length-1]=="boolean"&&(ye=$.pop());var Ge=Ir($);if(!Ge)return b(!1);Ge.isTracing,Fe.NONE,Ge.isTracing=ye?Fe.BREAK:Fe.LOG}(this,M)},T}(),gc=function(T){return T()};function bc(){Pn.inBatch>0||Pn.isRunningReactions||gc(Cf)}function Cf(){Pn.isRunningReactions=!0;for(var T=Pn.pendingReactions,M=0;T.length>0;){++M==100&&T.splice(0);for(var $=T.splice(0),te=0,ye=$.length;te<ye;te++)$[te].runReaction()}Pn.isRunningReactions=!1}var zu=j("Reaction",Ma);function Df(T){var M=gc;gc=function($){return T(function(){return M($)})}}function _c(T){return function(){}}function Gd(){b(!1)}function Cl(T){return function(M,$,te){if(te){if(te.value)return{value:Bo(T,te.value),enumerable:!1,configurable:!0,writable:!0};var ye=te.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Bo(T,ye.call(this))}}}return jf(T).apply(this,arguments)}}function jf(T){return function(M,$,te){Object.defineProperty(M,$,{configurable:!0,enumerable:!1,get:function(){},set:function(ye){R(this,$,dl(T,ye))}})}}var dl=function(T,M,$,te){return arguments.length===1&&typeof T=="function"?Bo(T.name||"<unnamed action>",T):arguments.length===2&&typeof M=="function"?Bo(T,M):arguments.length===1&&typeof T=="string"?Cl(T):te!==!0?Cl(M).apply(null,arguments):void R(T,M,Bo(T.name||M,$.value,this))};function wc(T,M){return Ho(typeof T=="string"?T:T.name||"<unnamed action>",typeof T=="function"?T:M,this,void 0)}function Os(T){return typeof T=="function"&&T.isMobxAction===!0}function Ec(T,M,$){R(T,M,Bo(M,$.bind(T)))}function Oc(T,M){M===void 0&&(M=h);var $,te=M&&M.name||T.name||"Autorun@"+g();if(!M.scheduler&&!M.delay)$=new Ma(te,function(){this.track(vt)},M.onError,M.requiresObservable);else{var ye=If(M),Ge=!1;$=new Ma(te,function(){Ge||(Ge=!0,ye(function(){Ge=!1,$.isDisposed||$.track(vt)}))},M.onError,M.requiresObservable)}function vt(){T($)}return $.schedule(),$.getDisposer()}dl.bound=function(T,M,$,te){return te===!0?(Ec(T,M,$.value),null):$?{configurable:!0,enumerable:!1,get:function(){return Ec(this,M,$.value||$.initializer.call(this)),this[M]},set:Gd}:{enumerable:!1,configurable:!0,set:function(ye){Ec(this,M,ye)},get:function(){}}};var Vd=function(T){return T()};function If(T){return T.scheduler?T.scheduler:T.delay?function(M){return setTimeout(M,T.delay)}:Vd}function Wr(T,M,$){$===void 0&&($=h);var te,ye,Ge,vt=$.name||"Reaction@"+g(),zt=dl(vt,$.onError?(te=$.onError,ye=M,function(){try{return ye.apply(this,arguments)}catch(go){te.call(this,go)}}):M),bn=!$.scheduler&&!$.delay,yr=If($),ln=!0,Vr=!1,dr=$.compareStructural?H.structural:$.equals||H.default,Cr=new Ma(vt,function(){ln||bn?ia():Vr||(Vr=!0,yr(ia))},$.onError,$.requiresObservable);function ia(){if(Vr=!1,!Cr.isDisposed){var go=!1;Cr.track(function(){var Yi=T(Cr);go=ln||!dr(Ge,Yi),Ge=Yi}),ln&&$.fireImmediately&&zt(Ge,Cr),ln||go!==!0||zt(Ge,Cr),ln&&(ln=!1)}}return Cr.schedule(),Cr.getDisposer()}function Gr(T,M,$){return Lf("onBecomeUnobserved",T,M,$)}function Lf(T,M,$,te){var ye=typeof te=="function"?oa(M,$):oa(M),Ge=typeof te=="function"?te:$,vt=T+"Listeners";return ye[vt]?ye[vt].add(Ge):ye[vt]=new Set([Ge]),typeof ye[T]!="function"?b(!1):function(){var zt=ye[vt];zt&&(zt.delete(Ge),zt.size===0&&delete ye[vt])}}function lu(T){var M=T.enforceActions,$=T.computedRequiresReaction,te=T.computedConfigurable,ye=T.disableErrorBoundaries,Ge=T.reactionScheduler,vt=T.reactionRequiresObservable,zt=T.observableRequiresReaction;if(T.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Wu=!0,fa&&(--yc().__mobxInstanceCount==0&&(yc().__mobxGlobals=void 0),Pn=new au)),M!==void 0){var bn=void 0;switch(M){case!0:case"observed":bn=!0;break;case!1:case"never":bn=!1;break;case"strict":case"always":bn="strict";break;default:b("Invalid value for 'enforceActions': '"+M+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=bn,Pn.allowStateChanges=bn!==!0&&bn!=="strict"}$!==void 0&&(Pn.computedRequiresReaction=!!$),vt!==void 0&&(Pn.reactionRequiresObservable=!!vt),zt!==void 0&&(Pn.observableRequiresReaction=!!zt,Pn.allowStateReads=!Pn.observableRequiresReaction),te!==void 0&&(Pn.computedConfigurable=!!te),ye!==void 0&&(Pn.disableErrorBoundaries=!!ye),Ge&&Df(Ge)}function pa(T,M,$,te){var ye=xs(te=Ae(te));return je(T),ra(T,te.name,ye.enhancer),M&&Ff(T,M,$,ye),T}function xs(T){return T.defaultDecorator||(T.deep===!1?Ot:ht)}function Ff(T,M,$,te){var ye,Ge;zi();try{var vt=ee(M);try{for(var zt=Se(vt),bn=zt.next();!bn.done;bn=zt.next()){var yr=bn.value,ln=Object.getOwnPropertyDescriptor(M,yr),Vr=($&&yr in $?$[yr]:ln.get?mn:te)(T,yr,ln,!0);Vr&&Object.defineProperty(T,yr,Vr)}}catch(dr){ye={error:dr}}finally{try{bn&&!bn.done&&(Ge=zt.return)&&Ge.call(zt)}finally{if(ye)throw ye.error}}}finally{ta()}}function Co(T,M){return Dl(oa(T,M))}function Dl(T){var M,$,te={name:T.name};return T.observing&&T.observing.length>0&&(te.dependencies=(M=T.observing,$=[],M.forEach(function(ye){$.indexOf(ye)===-1&&$.push(ye)}),$).map(Dl)),te}var jl=0;function Ss(){this.message="FLOW_CANCELLED"}function uu(T){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var M=T.name||"<unnamed flow>";return function(){var $,te=this,ye=arguments,Ge=++jl,vt=dl(M+" - runid: "+Ge+" - init",T).apply(te,ye),zt=void 0,bn=new Promise(function(yr,ln){var Vr=0;function dr(go){var Yi;zt=void 0;try{Yi=dl(M+" - runid: "+Ge+" - yield "+Vr++,vt.next).call(vt,go)}catch(pl){return ln(pl)}ia(Yi)}function Cr(go){var Yi;zt=void 0;try{Yi=dl(M+" - runid: "+Ge+" - yield "+Vr++,vt.throw).call(vt,go)}catch(pl){return ln(pl)}ia(Yi)}function ia(go){if(!go||typeof go.then!="function")return go.done?yr(go.value):(zt=Promise.resolve(go.value)).then(dr,Cr);go.then(ia,ln)}$=ln,dr(void 0)});return bn.cancel=dl(M+" - runid: "+Ge+" - cancel",function(){try{zt&&gi(zt);var yr=vt.return(void 0),ln=Promise.resolve(yr.value);ln.then(S,S),gi(ln),$(new Ss)}catch(Vr){$(Vr)}}),bn}}function gi(T){typeof T.cancel=="function"&&T.cancel()}function xc(T,M){if(T==null)return!1;if(M!==void 0){if(ii(T)===!1||!T[J].values.has(M))return!1;var $=oa(T,M);return fl($)}return fl(T)}function $f(T){return arguments.length>1?b(!1):xc(T)}function Sc(T,M){return typeof M!="string"?b(!1):xc(T,M)}function Ri(T,M){return T!=null&&(M!==void 0?!!ii(T)&&T[J].values.has(M):ii(T)||!!T[J]||G(T)||zu(T)||fl(T))}function ri(T){return arguments.length!==1&&b(!1),Ri(T)}function na(T){return ii(T)?T[J].getKeys():Uo(T)||Xo(T)?Array.from(T.keys()):va(T)?T.map(function(M,$){return $}):b(!1)}function ro(T){return ii(T)?na(T).map(function(M){return T[M]}):Uo(T)?na(T).map(function(M){return T.get(M)}):Xo(T)?Array.from(T.values()):va(T)?T.slice():b(!1)}function Bf(T){return ii(T)?na(T).map(function(M){return[M,T[M]]}):Uo(T)?na(T).map(function(M){return[M,T.get(M)]}):Xo(T)?Array.from(T.entries()):va(T)?T.map(function(M,$){return[$,M]}):b(!1)}function ki(T,M,$){if(arguments.length!==2||Xo(T))if(ii(T)){var te=T[J],ye=te.values.get(M);ye?te.write(M,$):te.addObservableProp(M,$,te.defaultEnhancer)}else if(Uo(T))T.set(M,$);else if(Xo(T))T.add(M);else{if(!va(T))return b(!1);typeof M!="number"&&(M=parseInt(M,10)),w(M>=0,"Not a valid index: '"+M+"'"),zi(),M>=T.length&&(T.length=M+1),T[M]=$,ta()}else{zi();var Ge=M;try{for(var vt in Ge)ki(T,vt,Ge[vt])}finally{ta()}}}function Ac(T,M,$,te){return typeof $=="function"?function(ye,Ge,vt,zt){return Mi(ye,Ge).observe(vt,zt)}(T,M,$,te):function(ye,Ge,vt){return Mi(ye).observe(Ge,vt)}(T,M,$)}Ss.prototype=Object.create(Error.prototype);var Uf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Ci(T,M,$,te){return te.detectCycles&&T.set(M,$),$}function Ti(T,M,$){if(!M.recurseEverything&&!ri(T)||typeof T!="object")return T;if(T===null)return null;if(T instanceof Date)return T;if(cl(T))return Ti(T.get(),M,$);if(ri(T)&&na(T),M.detectCycles===!0&&T!==null&&$.has(T))return $.get(T);if(va(T)||Array.isArray(T)){var te=Ci($,T,[],M),ye=T.map(function(dr){return Ti(dr,M,$)});te.length=ye.length;for(var Ge=0,vt=ye.length;Ge<vt;Ge++)te[Ge]=ye[Ge];return te}if(Xo(T)||Object.getPrototypeOf(T)===Set.prototype){if(M.exportMapsAsObjects===!1){var zt=Ci($,T,new Set,M);return T.forEach(function(dr){zt.add(Ti(dr,M,$))}),zt}var bn=Ci($,T,[],M);return T.forEach(function(dr){bn.push(Ti(dr,M,$))}),bn}if(Uo(T)||Object.getPrototypeOf(T)===Map.prototype){if(M.exportMapsAsObjects===!1){var yr=Ci($,T,new Map,M);return T.forEach(function(dr,Cr){yr.set(Cr,Ti(dr,M,$))}),yr}var ln=Ci($,T,{},M);return T.forEach(function(dr,Cr){ln[Cr]=Ti(dr,M,$)}),ln}var Vr=Ci($,T,{},M);return q(T).forEach(function(dr){Vr[dr]=Ti(T[dr],M,$)}),Vr}function Tc(T,M){var $;return typeof M=="boolean"&&(M={detectCycles:M}),M||(M=Uf),M.detectCycles=M.detectCycles===void 0?M.recurseEverything===!0:M.detectCycles===!0,M.detectCycles&&($=new Map),Ti(T,M,$)}function Ir(T){switch(T.length){case 0:return Pn.trackingDerivation;case 1:return oa(T[0]);case 2:return oa(T[0],T[1])}}function oi(T,M){M===void 0&&(M=void 0),zi();try{return T.apply(M)}finally{ta()}}function As(T,M,$){return arguments.length===1||M&&typeof M=="object"?Mc(T,M):Gf(T,M,$||{})}function Gf(T,M,$){var te;typeof $.timeout=="number"&&(te=setTimeout(function(){if(!Ge[J].isDisposed){Ge();var vt=new Error("WHEN_TIMEOUT");if(!$.onError)throw vt;$.onError(vt)}},$.timeout)),$.name=$.name||"When@"+g();var ye=Bo($.name+"-effect",M),Ge=Oc(function(vt){T()&&(vt.dispose(),te&&clearTimeout(te),ye())},$);return Ge}function Mc(T,M){var $,te=new Promise(function(ye,Ge){var vt=Gf(T,ye,Re(Re({},M),{onError:Ge}));$=function(){vt(),Ge("WHEN_CANCELLED")}});return te.cancel=$,te}function Ts(T){return T[J]}function Ga(T){return typeof T=="string"||typeof T=="number"||typeof T=="symbol"}var Di={has:function(T,M){if(M===J||M==="constructor"||M===Oe)return!0;var $=Ts(T);return Ga(M)?$.has(M):M in T},get:function(T,M){if(M===J||M==="constructor"||M===Oe)return T[M];var $=Ts(T),te=$.values.get(M);if(te instanceof L){var ye=te.get();return ye===void 0&&$.has(M),ye}return Ga(M)&&$.has(M),T[M]},set:function(T,M,$){return!!Ga(M)&&(ki(T,M,$),!0)},deleteProperty:function(T,M){return!!Ga(M)&&(Ts(T).remove(M),!0)},ownKeys:function(T){return Ts(T).keysAtom.reportObserved(),Reflect.ownKeys(T)},preventExtensions:function(T){return b("Dynamic observable objects cannot be frozen"),!1}};function su(T){var M=new Proxy(T,Di);return T[J].proxy=M,M}function Hi(T){return T.interceptors!==void 0&&T.interceptors.length>0}function ha(T,M){var $=T.interceptors||(T.interceptors=[]);return $.push(M),O(function(){var te=$.indexOf(M);te!==-1&&$.splice(te,1)})}function Tr(T,M){var $=Ce();try{for(var te=Be(T.interceptors||[]),ye=0,Ge=te.length;ye<Ge&&(w(!(M=te[ye](M))||M.type,"Intercept handlers should return nothing or a change object"),M);ye++);return M}finally{ot($)}}function ji(T){return T.changeListeners!==void 0&&T.changeListeners.length>0}function Pa(T,M){var $=T.changeListeners||(T.changeListeners=[]);return $.push(M),O(function(){var te=$.indexOf(M);te!==-1&&$.splice(te,1)})}function fi(T,M){var $=Ce(),te=T.changeListeners;if(te){for(var ye=0,Ge=(te=te.slice()).length;ye<Ge;ye++)te[ye](M);ot($)}}var cu={get:function(T,M){return M===J?T[J]:M==="length"?T[J].getArrayLength():typeof M=="number"?so.get.call(T,M):typeof M!="string"||isNaN(M)?so.hasOwnProperty(M)?so[M]:T[M]:so.get.call(T,parseInt(M))},set:function(T,M,$){return M==="length"&&T[J].setArrayLength($),typeof M=="number"&&so.set.call(T,M,$),typeof M=="symbol"||isNaN(M)?T[M]=$:so.set.call(T,parseInt(M),$),!0},preventExtensions:function(T){return b("Observable arrays cannot be frozen"),!1}};function Il(T,M,$,te){$===void 0&&($="ObservableArray@"+g()),te===void 0&&(te=!1);var ye,Ge,vt,zt=new Na($,M,te);ye=zt.values,Ge=J,vt=zt,Object.defineProperty(ye,Ge,{enumerable:!1,writable:!1,configurable:!0,value:vt});var bn=new Proxy(zt.values,cu);if(zt.proxy=bn,T&&T.length){var yr=or(!0);zt.spliceWithArray(0,0,T),Kr(yr)}return bn}var Na=function(){function T(M,$,te){this.owned=te,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new L(M||"ObservableArray@"+g()),this.enhancer=function(ye,Ge){return $(ye,Ge,M+"[..]")}}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.dehanceValues=function(M){return this.dehancer!==void 0&&M.length>0?M.map(this.dehancer):M},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.observe=function(M,$){return $===void 0&&($=!1),$&&M({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Pa(this,M)},T.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},T.prototype.setArrayLength=function(M){if(typeof M!="number"||M<0)throw new Error("[mobx.array] Out of range: "+M);var $=this.values.length;if(M!==$)if(M>$){for(var te=new Array(M-$),ye=0;ye<M-$;ye++)te[ye]=void 0;this.spliceWithArray($,0,te)}else this.spliceWithArray(M,$-M)},T.prototype.updateArrayLength=function(M,$){if(M!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=$},T.prototype.spliceWithArray=function(M,$,te){var ye=this;Dn(this.atom);var Ge=this.values.length;if(M===void 0?M=0:M>Ge?M=Ge:M<0&&(M=Math.max(0,Ge+M)),$=arguments.length===1?Ge-M:$==null?0:Math.max(0,Math.min($,Ge-M)),te===void 0&&(te=v),Hi(this)){var vt=Tr(this,{object:this.proxy,type:"splice",index:M,removedCount:$,added:te});if(!vt)return v;$=vt.removedCount,te=vt.added}te=te.length===0?te:te.map(function(bn){return ye.enhancer(bn,void 0)});var zt=this.spliceItemsIntoValues(M,$,te);return $===0&&te.length===0||this.notifyArraySplice(M,te,zt),this.dehanceValues(zt)},T.prototype.spliceItemsIntoValues=function(M,$,te){var ye;if(te.length<1e4)return(ye=this.values).splice.apply(ye,Be([M,$],te));var Ge=this.values.slice(M,M+$);return this.values=this.values.slice(0,M).concat(te,this.values.slice(M+$)),Ge},T.prototype.notifyArrayChildUpdate=function(M,$,te){var ye=!this.owned&&!1,Ge=ji(this),vt=Ge||ye?{object:this.proxy,type:"update",index:M,newValue:$,oldValue:te}:null;this.atom.reportChanged(),Ge&&fi(this,vt)},T.prototype.notifyArraySplice=function(M,$,te){var ye=!this.owned&&!1,Ge=ji(this),vt=Ge||ye?{object:this.proxy,type:"splice",index:M,removed:te,added:$,removedCount:te.length,addedCount:$.length}:null;this.atom.reportChanged(),Ge&&fi(this,vt)},T}(),so={intercept:function(T){return this[J].intercept(T)},observe:function(T,M){return M===void 0&&(M=!1),this[J].observe(T,M)},clear:function(){return this.splice(0)},replace:function(T){var M=this[J];return M.spliceWithArray(0,M.values.length,T)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(T,M){for(var $=[],te=2;te<arguments.length;te++)$[te-2]=arguments[te];var ye=this[J];switch(arguments.length){case 0:return[];case 1:return ye.spliceWithArray(T);case 2:return ye.spliceWithArray(T,M)}return ye.spliceWithArray(T,M,$)},spliceWithArray:function(T,M,$){return this[J].spliceWithArray(T,M,$)},push:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var $=this[J];return $.spliceWithArray($.values.length,0,T),$.values.length},pop:function(){return this.splice(Math.max(this[J].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var $=this[J];return $.spliceWithArray(0,0,T),$.values.length},reverse:function(){var T=this.slice();return T.reverse.apply(T,arguments)},sort:function(T){var M=this.slice();return M.sort.apply(M,arguments)},remove:function(T){var M=this[J],$=M.dehanceValues(M.values).indexOf(T);return $>-1&&(this.splice($,1),!0)},get:function(T){var M=this[J];if(M&&T<M.values.length)return M.atom.reportObserved(),M.dehanceValue(M.values[T])},set:function(T,M){var $=this[J],te=$.values;if(T<te.length){Dn($.atom);var ye=te[T];if(Hi($)){var Ge=Tr($,{type:"update",object:$.proxy,index:T,newValue:M});if(!Ge)return;M=Ge.newValue}(M=$.enhancer(M,ye))!==ye&&(te[T]=M,$.notifyArrayChildUpdate(T,M,ye))}else{if(T!==te.length)throw new Error("[mobx.array] Index out of bounds, "+T+" is larger than "+te.length);$.spliceWithArray(T,0,[M])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(T){typeof Array.prototype[T]=="function"&&(so[T]=function(){var M=this[J];M.atom.reportObserved();var $=M.dehanceValues(M.values);return $[T].apply($,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(T){typeof Array.prototype[T]=="function"&&(so[T]=function(M,$){var te=this,ye=this[J];return ye.atom.reportObserved(),ye.dehanceValues(ye.values)[T](function(Ge,vt){return M.call($,Ge,vt,te)},$)})}),["reduce","reduceRight"].forEach(function(T){so[T]=function(){var M=this,$=this[J];$.atom.reportObserved();var te=arguments[0];return arguments[0]=function(ye,Ge,vt){return Ge=$.dehanceValue(Ge),te(ye,Ge,vt,M)},$.values[T].apply($.values,arguments)}});var Hu,Va=j("ObservableArrayAdministration",Na);function va(T){return P(T)&&Va(T[J])}var Pc,Wd={},Nc=function(){function T(M,$,te){if($===void 0&&($=Mt),te===void 0&&(te="ObservableMap@"+g()),this.enhancer=$,this.name=te,this[Hu]=Wd,this._keysAtom=Y(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(M)}return T.prototype._has=function(M){return this._data.has(M)},T.prototype.has=function(M){var $=this;if(!Pn.trackingDerivation)return this._has(M);var te=this._hasMap.get(M);if(!te){var ye=te=new Rr(this._has(M),Xt,this.name+"."+X(M)+"?",!1);this._hasMap.set(M,ye),Gr(ye,function(){return $._hasMap.delete(M)})}return te.get()},T.prototype.set=function(M,$){var te=this._has(M);if(Hi(this)){var ye=Tr(this,{type:te?"update":"add",object:this,newValue:$,name:M});if(!ye)return this;$=ye.newValue}return te?this._updateValue(M,$):this._addValue(M,$),this},T.prototype.delete=function(M){var $=this;if(Dn(this._keysAtom),Hi(this)&&!(ye=Tr(this,{type:"delete",object:this,name:M})))return!1;if(this._has(M)){var te=ji(this),ye=te?{type:"delete",object:this,oldValue:this._data.get(M).value,name:M}:null;return oi(function(){$._keysAtom.reportChanged(),$._updateHasMapEntry(M,!1),$._data.get(M).setNewValue(void 0),$._data.delete(M)}),te&&fi(this,ye),!0}return!1},T.prototype._updateHasMapEntry=function(M,$){var te=this._hasMap.get(M);te&&te.setNewValue($)},T.prototype._updateValue=function(M,$){var te=this._data.get(M);if(($=te.prepareNewValue($))!==Pn.UNCHANGED){var ye=ji(this),Ge=ye?{type:"update",object:this,oldValue:te.value,name:M,newValue:$}:null;te.setNewValue($),ye&&fi(this,Ge)}},T.prototype._addValue=function(M,$){var te=this;Dn(this._keysAtom),oi(function(){var vt=new Rr($,te.enhancer,te.name+"."+X(M),!1);te._data.set(M,vt),$=vt.value,te._updateHasMapEntry(M,!0),te._keysAtom.reportChanged()});var ye=ji(this),Ge=ye?{type:"add",object:this,name:M,newValue:$}:null;ye&&fi(this,Ge)},T.prototype.get=function(M){return this.has(M)?this.dehanceValue(this._data.get(M).get()):this.dehanceValue(void 0)},T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},T.prototype.values=function(){var M=this,$=this.keys();return Mr({next:function(){var te=$.next(),ye=te.done,Ge=te.value;return{done:ye,value:ye?void 0:M.get(Ge)}}})},T.prototype.entries=function(){var M=this,$=this.keys();return Mr({next:function(){var te=$.next(),ye=te.done,Ge=te.value;return{done:ye,value:ye?void 0:[Ge,M.get(Ge)]}}})},T.prototype[Hu=J,Symbol.iterator]=function(){return this.entries()},T.prototype.forEach=function(M,$){var te,ye;try{for(var Ge=Se(this),vt=Ge.next();!vt.done;vt=Ge.next()){var zt=ze(vt.value,2),bn=zt[0],yr=zt[1];M.call($,yr,bn,this)}}catch(ln){te={error:ln}}finally{try{vt&&!vt.done&&(ye=Ge.return)&&ye.call(Ge)}finally{if(te)throw te.error}}},T.prototype.merge=function(M){var $=this;return Uo(M)&&(M=M.toJS()),oi(function(){var te=or(!0);try{A(M)?q(M).forEach(function(ye){return $.set(ye,M[ye])}):Array.isArray(M)?M.forEach(function(ye){var Ge=ze(ye,2),vt=Ge[0],zt=Ge[1];return $.set(vt,zt)}):k(M)?(M.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+M.constructor.name),M.forEach(function(ye,Ge){return $.set(Ge,ye)})):M!=null&&b("Cannot initialize map from "+M)}finally{Kr(te)}}),this},T.prototype.clear=function(){var M=this;oi(function(){Xe(function(){var $,te;try{for(var ye=Se(M.keys()),Ge=ye.next();!Ge.done;Ge=ye.next()){var vt=Ge.value;M.delete(vt)}}catch(zt){$={error:zt}}finally{try{Ge&&!Ge.done&&(te=ye.return)&&te.call(ye)}finally{if($)throw $.error}}})})},T.prototype.replace=function(M){var $=this;return oi(function(){var te,ye,Ge,vt,zt=function(Yo){if(k(Yo)||Uo(Yo))return Yo;if(Array.isArray(Yo))return new Map(Yo);if(A(Yo)){var $l=new Map;for(var vl in Yo)$l.set(vl,Yo[vl]);return $l}return b("Cannot convert to map from '"+Yo+"'")}(M),bn=new Map,yr=!1;try{for(var ln=Se($._data.keys()),Vr=ln.next();!Vr.done;Vr=ln.next()){var dr=Vr.value;if(!zt.has(dr))if($.delete(dr))yr=!0;else{var Cr=$._data.get(dr);bn.set(dr,Cr)}}}catch(Yo){te={error:Yo}}finally{try{Vr&&!Vr.done&&(ye=ln.return)&&ye.call(ln)}finally{if(te)throw te.error}}try{for(var ia=Se(zt.entries()),go=ia.next();!go.done;go=ia.next()){var Yi=ze(go.value,2),pl=(dr=Yi[0],Cr=Yi[1],$._data.has(dr));if($.set(dr,Cr),$._data.has(dr)){var hl=$._data.get(dr);bn.set(dr,hl),pl||(yr=!0)}}}catch(Yo){Ge={error:Yo}}finally{try{go&&!go.done&&(vt=ia.return)&&vt.call(ia)}finally{if(Ge)throw Ge.error}}if(!yr)if($._data.size!==bn.size)$._keysAtom.reportChanged();else for(var Fl=$._data.keys(),fu=bn.keys(),za=Fl.next(),du=fu.next();!za.done;){if(za.value!==du.value){$._keysAtom.reportChanged();break}za=Fl.next(),du=fu.next()}$._data=bn}),this},Object.defineProperty(T.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.toPOJO=function(){var M,$,te={};try{for(var ye=Se(this),Ge=ye.next();!Ge.done;Ge=ye.next()){var vt=ze(Ge.value,2),zt=vt[0],bn=vt[1];te[typeof zt=="symbol"?zt:X(zt)]=bn}}catch(yr){M={error:yr}}finally{try{Ge&&!Ge.done&&($=ye.return)&&$.call(ye)}finally{if(M)throw M.error}}return te},T.prototype.toJS=function(){return new Map(this)},T.prototype.toJSON=function(){return this.toPOJO()},T.prototype.toString=function(){var M=this;return this.name+"[{ "+Array.from(this.keys()).map(function($){return X($)+": "+M.get($)}).join(", ")+" }]"},T.prototype.observe=function(M,$){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T}(),Uo=j("ObservableMap",Nc),Ll={},Wa=function(){function T(M,$,te){if($===void 0&&($=Mt),te===void 0&&(te="ObservableSet@"+g()),this.name=te,this[Pc]=Ll,this._data=new Set,this._atom=Y(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(ye,Ge){return $(ye,Ge,te)},M&&this.replace(M)}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.clear=function(){var M=this;oi(function(){Xe(function(){var $,te;try{for(var ye=Se(M._data.values()),Ge=ye.next();!Ge.done;Ge=ye.next()){var vt=Ge.value;M.delete(vt)}}catch(zt){$={error:zt}}finally{try{Ge&&!Ge.done&&(te=ye.return)&&te.call(ye)}finally{if($)throw $.error}}})})},T.prototype.forEach=function(M,$){var te,ye;try{for(var Ge=Se(this),vt=Ge.next();!vt.done;vt=Ge.next()){var zt=vt.value;M.call($,zt,zt,this)}}catch(bn){te={error:bn}}finally{try{vt&&!vt.done&&(ye=Ge.return)&&ye.call(Ge)}finally{if(te)throw te.error}}},Object.defineProperty(T.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.add=function(M){var $=this;if(Dn(this._atom),Hi(this)&&!(ye=Tr(this,{type:"add",object:this,newValue:M})))return this;if(!this.has(M)){oi(function(){$._data.add($.enhancer(M,void 0)),$._atom.reportChanged()});var te=ji(this),ye=te?{type:"add",object:this,newValue:M}:null;te&&fi(this,ye)}return this},T.prototype.delete=function(M){var $=this;if(Hi(this)&&!(ye=Tr(this,{type:"delete",object:this,oldValue:M})))return!1;if(this.has(M)){var te=ji(this),ye=te?{type:"delete",object:this,oldValue:M}:null;return oi(function(){$._atom.reportChanged(),$._data.delete(M)}),te&&fi(this,ye),!0}return!1},T.prototype.has=function(M){return this._atom.reportObserved(),this._data.has(this.dehanceValue(M))},T.prototype.entries=function(){var M=0,$=Array.from(this.keys()),te=Array.from(this.values());return Mr({next:function(){var ye=M;return M+=1,ye<te.length?{value:[$[ye],te[ye]],done:!1}:{done:!0}}})},T.prototype.keys=function(){return this.values()},T.prototype.values=function(){this._atom.reportObserved();var M=this,$=0,te=Array.from(this._data.values());return Mr({next:function(){return $<te.length?{value:M.dehanceValue(te[$++]),done:!1}:{done:!0}}})},T.prototype.replace=function(M){var $=this;return Xo(M)&&(M=M.toJS()),oi(function(){var te=or(!0);try{Array.isArray(M)||B(M)?($.clear(),M.forEach(function(ye){return $.add(ye)})):M!=null&&b("Cannot initialize set from "+M)}finally{Kr(te)}}),this},T.prototype.observe=function(M,$){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.toJS=function(){return new Set(this)},T.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},T.prototype[Pc=J,Symbol.iterator]=function(){return this.values()},T}(),Xo=j("ObservableSet",Wa),Rc=function(){function T(M,$,te,ye){$===void 0&&($=new Map),this.target=M,this.values=$,this.name=te,this.defaultEnhancer=ye,this.keysAtom=new L(te+".keys")}return T.prototype.read=function(M){return this.values.get(M).get()},T.prototype.write=function(M,$){var te=this.target,ye=this.values.get(M);if(ye instanceof Ua)ye.set($);else{if(Hi(this)){if(!(vt=Tr(this,{type:"update",object:this.proxy||te,name:M,newValue:$})))return;$=vt.newValue}if(($=ye.prepareNewValue($))!==Pn.UNCHANGED){var Ge=ji(this),vt=Ge?{type:"update",object:this.proxy||te,oldValue:ye.value,name:M,newValue:$}:null;ye.setNewValue($),Ge&&fi(this,vt)}}},T.prototype.has=function(M){var $=this.pendingKeys||(this.pendingKeys=new Map),te=$.get(M);if(te)return te.get();var ye=!!this.values.get(M);return te=new Rr(ye,Xt,this.name+"."+X(M)+"?",!1),$.set(M,te),te.get()},T.prototype.addObservableProp=function(M,$,te){te===void 0&&(te=this.defaultEnhancer);var ye=this.target;if(Hi(this)){var Ge=Tr(this,{object:this.proxy||ye,name:M,type:"add",newValue:$});if(!Ge)return;$=Ge.newValue}var vt=new Rr($,te,this.name+"."+X(M),!1);this.values.set(M,vt),$=vt.value,Object.defineProperty(ye,M,function(zt){return ya[zt]||(ya[zt]={configurable:!0,enumerable:!0,get:function(){return this[J].read(zt)},set:function(bn){this[J].write(zt,bn)}})}(M)),this.notifyPropertyAddition(M,$)},T.prototype.addComputedProp=function(M,$,te){var ye,Ge,vt,zt=this.target;te.name=te.name||this.name+"."+X($),this.values.set($,new Ua(te)),(M===zt||(ye=M,Ge=$,!(vt=Object.getOwnPropertyDescriptor(ye,Ge))||vt.configurable!==!1&&vt.writable!==!1))&&Object.defineProperty(M,$,function(bn){return Ms[bn]||(Ms[bn]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Ii(this).read(bn)},set:function(yr){Ii(this).write(bn,yr)}})}($))},T.prototype.remove=function(M){if(this.values.has(M)){var $=this.target;if(Hi(this)&&!(bn=Tr(this,{object:this.proxy||$,name:M,type:"remove"})))return;try{zi();var te=ji(this),ye=!1,Ge=this.values.get(M),vt=Ge&&Ge.get();if(Ge&&Ge.set(void 0),this.keysAtom.reportChanged(),this.values.delete(M),this.pendingKeys){var zt=this.pendingKeys.get(M);zt&&zt.set(!1)}delete this.target[M];var bn=te?{type:"remove",object:this.proxy||$,oldValue:vt,name:M}:null;te&&fi(this,bn)}finally{ta()}}},T.prototype.illegalAccess=function(M,$){},T.prototype.observe=function(M,$){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.notifyPropertyAddition=function(M,$){var te=ji(this),ye=te?{type:"add",object:this.proxy||this.target,name:M,newValue:$}:null;if(te&&fi(this,ye),this.pendingKeys){var Ge=this.pendingKeys.get(M);Ge&&Ge.set(!0)}this.keysAtom.reportChanged()},T.prototype.getKeys=function(){var M,$;this.keysAtom.reportObserved();var te=[];try{for(var ye=Se(this.values),Ge=ye.next();!Ge.done;Ge=ye.next()){var vt=ze(Ge.value,2),zt=vt[0];vt[1]instanceof Rr&&te.push(zt)}}catch(bn){M={error:bn}}finally{try{Ge&&!Ge.done&&($=ye.return)&&$.call(ye)}finally{if(M)throw M.error}}return te},T}();function ra(T,M,$){if(M===void 0&&(M=""),$===void 0&&($=Mt),Object.prototype.hasOwnProperty.call(T,J))return T[J];A(T)||(M=(T.constructor.name||"ObservableObject")+"@"+g()),M||(M="ObservableObject@"+g());var te=new Rc(T,new Map,X(M),$);return R(T,J,te),te}var ya=Object.create(null),Ms=Object.create(null);function Ii(T){var M=T[J];return M||(je(T),T[J])}var Xi=j("ObservableObjectAdministration",Rc);function ii(T){return!!P(T)&&(je(T),Xi(T[J]))}function oa(T,M){if(typeof T=="object"&&T!==null){if(va(T))return M!==void 0&&b(!1),T[J].atom;if(Xo(T))return T[J];if(Uo(T)){var $=T;return M===void 0?$._keysAtom:((te=$._data.get(M)||$._hasMap.get(M))||b(!1),te)}var te;if(je(T),M&&!T[J]&&T[M],ii(T))return M?((te=T[J].values.get(M))||b(!1),te):b(!1);if(G(T)||fl(T)||zu(T))return T}else if(typeof T=="function"&&zu(T[J]))return T[J];return b(!1)}function Mi(T,M){return T||b("Expecting some object"),M!==void 0?Mi(oa(T,M)):G(T)||fl(T)||zu(T)||Uo(T)||Xo(T)?T:(je(T),T[J]?T[J]:void b(!1))}var ut=Object.prototype.toString;function Dt(T,M,$){return $===void 0&&($=-1),Ft(T,M,$)}function Ft(T,M,$,te,ye){if(T===M)return T!==0||1/T==1/M;if(T==null||M==null)return!1;if(T!=T)return M!=M;var Ge=typeof T;if(Ge!=="function"&&Ge!=="object"&&typeof M!="object")return!1;var vt=ut.call(T);if(vt!==ut.call(M))return!1;switch(vt){case"[object RegExp]":case"[object String]":return""+T==""+M;case"[object Number]":return+T!=+T?+M!=+M:+T==0?1/+T==1/M:+T==+M;case"[object Date]":case"[object Boolean]":return+T==+M;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(T)===Symbol.valueOf.call(M);case"[object Map]":case"[object Set]":$>=0&&$++}T=fn(T),M=fn(M);var zt=vt==="[object Array]";if(!zt){if(typeof T!="object"||typeof M!="object")return!1;var bn=T.constructor,yr=M.constructor;if(bn!==yr&&!(typeof bn=="function"&&bn instanceof bn&&typeof yr=="function"&&yr instanceof yr)&&"constructor"in T&&"constructor"in M)return!1}if($===0)return!1;$<0&&($=-1),ye=ye||[];for(var ln=(te=te||[]).length;ln--;)if(te[ln]===T)return ye[ln]===M;if(te.push(T),ye.push(M),zt){if((ln=T.length)!==M.length)return!1;for(;ln--;)if(!Ft(T[ln],M[ln],$-1,te,ye))return!1}else{var Vr=Object.keys(T),dr=void 0;if(ln=Vr.length,Object.keys(M).length!==ln)return!1;for(;ln--;)if(!lr(M,dr=Vr[ln])||!Ft(T[dr],M[dr],$-1,te,ye))return!1}return te.pop(),ye.pop(),!0}function fn(T){return va(T)?T.slice():k(T)||Uo(T)||B(T)||Xo(T)?Array.from(T.entries()):T}function lr(T,M){return Object.prototype.hasOwnProperty.call(T,M)}function Mr(T){return T[Symbol.iterator]=co,T}function co(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:_c,extras:{getDebugName:function(T,M){return(M!==void 0?oa(T,M):ii(T)||Uo(T)||Xo(T)?Mi(T):oa(T)).name}},$mobx:J})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),v=r(80),h=r(58),g=r(116),b="Array Iterator",w=h.set,O=h.getterFor(b);n.exports=g(Array,"Array",function(S,P){w(this,{type:b,target:s(S),index:0,kind:P})},function(){var S=O(this),P=S.target,A=S.kind,R=S.index++;return!P||R>=P.length?(S.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:R,done:!1}:A=="values"?{value:P[R],done:!1}:{value:[R,P[R]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),v=r(46),h=r(76),g=r(34),b=r(15),w=r(71),O=r(36),S=r(108),P=r(18),A=r(35),R=r(96),j=r(30),k=r(33),B=r(54),q=r(87),X=r(32),W=r(40),ee=r(41),J=r(86),L=r(39),G=r(69),Y=r(60),H=r(77),se=r(74),Re=r(139),Se=r(112),ze=r(50),Be=r(38),Oe=r(84),ae=r(98),ve=r(42),Pe=r(89),Ke=r(93),je=r(72),at=r(90),gt=r(28),Mt=r(140),Xt=r(141),De=r(78),ge=r(58),Ae=r(79).forEach,ht=Ke("hidden"),Wt="Symbol",Ot=gt("toPrimitive"),rn=ge.set,yn=ge.getterFor(Wt),Tn=Object.prototype,pn=c.Symbol,ft=pn&&pn.prototype,On=c.TypeError,Fe=c.QObject,mn=v("JSON","stringify"),Kn=ze.f,ne=Be.f,$n=Re.f,xr=Oe.f,Ur=b([].push),no=Pe("symbols"),Dn=Pe("op-symbols"),ko=Pe("string-to-symbol-registry"),Ee=Pe("symbol-to-string-registry"),Xe=Pe("wks"),Ce=!Fe||!Fe.prototype||!Fe.prototype.findChild,ot=O&&P(function(){return Y(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a!=7})?function(xn,Bn,Xn){var or=Kn(Tn,Bn);or&&delete Tn[Bn],ne(xn,Bn,Xn),or&&xn!==Tn&&ne(Tn,Bn,or)}:ne,en=function(xn,Bn){var Xn=no[xn]=Y(ft);return rn(Xn,{type:Wt,tag:xn,description:Bn}),O||(Xn.description=Bn),Xn},qt=function(xn,Bn,Xn){xn===Tn&&qt(Dn,Bn,Xn),X(xn);var or=J(Bn);return X(Xn),A(no,or)?(Xn.enumerable?(A(xn,ht)&&xn[ht][or]&&(xn[ht][or]=!1),Xn=Y(Xn,{enumerable:G(0,!1)})):(A(xn,ht)||ne(xn,ht,G(1,{})),xn[ht][or]=!0),ot(xn,or,Xn)):ne(xn,or,Xn)},Nn=function(xn,Bn){X(xn);var Xn=ee(Bn),or=H(Xn).concat(Bo(Xn));return Ae(or,function(Kr){O&&!g(_r,Xn,Kr)||qt(xn,Kr,Xn[Kr])}),xn},_r=function(xn){var Bn=J(xn),Xn=g(xr,this,Bn);return!(this===Tn&&A(no,Bn)&&!A(Dn,Bn))&&(!(Xn||!A(this,Bn)||!A(no,Bn)||A(this,ht)&&this[ht][Bn])||Xn)},ni=function(xn,Bn){var Xn=ee(xn),or=J(Bn);if(Xn!==Tn||!A(no,or)||A(Dn,or)){var Kr=Kn(Xn,or);return!Kr||!A(no,or)||A(Xn,ht)&&Xn[ht][or]||(Kr.enumerable=!0),Kr}},mi=function(xn){var Bn=$n(ee(xn)),Xn=[];return Ae(Bn,function(or){A(no,or)||A(je,or)||Ur(Xn,or)}),Xn},Bo=function(xn){var Bn=xn===Tn,Xn=$n(Bn?Dn:ee(xn)),or=[];return Ae(Xn,function(Kr){!A(no,Kr)||Bn&&!A(Tn,Kr)||Ur(or,no[Kr])}),or};if(S||(pn=function(){if(B(ft,this))throw On("Symbol is not a constructor");var xn=arguments.length&&arguments[0]!==void 0?L(arguments[0]):void 0,Bn=at(xn),Xn=function(or){this===Tn&&g(Xn,Dn,or),A(this,ht)&&A(this[ht],Bn)&&(this[ht][Bn]=!1),ot(this,Bn,G(1,or))};return O&&Ce&&ot(Tn,Bn,{configurable:!0,set:Xn}),en(Bn,xn)},ve(ft=pn.prototype,"toString",function(){return yn(this).tag}),ve(pn,"withoutSetter",function(xn){return en(at(xn),xn)}),Oe.f=_r,Be.f=qt,ze.f=ni,se.f=Re.f=mi,Se.f=Bo,Mt.f=function(xn){return en(gt(xn),xn)},O&&(ne(ft,"description",{configurable:!0,get:function(){return yn(this).description}}),w||ve(Tn,"propertyIsEnumerable",_r,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:pn}),Ae(H(Xe),function(xn){Xt(xn)}),s({target:Wt,stat:!0,forced:!S},{for:function(xn){var Bn=L(xn);if(A(ko,Bn))return ko[Bn];var Xn=pn(Bn);return ko[Bn]=Xn,Ee[Xn]=Bn,Xn},keyFor:function(xn){if(!q(xn))throw On(xn+" is not a symbol");if(A(Ee,xn))return Ee[xn]},useSetter:function(){Ce=!0},useSimple:function(){Ce=!1}}),s({target:"Object",stat:!0,forced:!S,sham:!O},{create:function(xn,Bn){return Bn===void 0?Y(xn):Nn(Y(xn),Bn)},defineProperty:qt,defineProperties:Nn,getOwnPropertyDescriptor:ni}),s({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:mi,getOwnPropertySymbols:Bo}),s({target:"Object",stat:!0,forced:P(function(){Se.f(1)})},{getOwnPropertySymbols:function(xn){return Se.f(W(xn))}}),mn&&s({target:"JSON",stat:!0,forced:!S||P(function(){var xn=pn();return mn([xn])!="[null]"||mn({a:xn})!="{}"||mn(Object(xn))!="{}"})},{stringify:function(xn,Bn,Xn){var or=ae(arguments),Kr=Bn;if((k(Bn)||xn!==void 0)&&!q(xn))return R(Bn)||(Bn=function(Rr,cl){if(j(Kr)&&(cl=g(Kr,this,Rr,cl)),!q(cl))return cl}),or[1]=Bn,h(mn,null,or)}}),!ft[Ot]){var Ho=ft.valueOf;ve(ft,Ot,function(xn){return g(Ho,this)})}De(pn,Wt),je[ht]=!0},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(3),g=r(57),b=r(28),w=b("iterator"),O=b("toStringTag"),S=h.values,P=function(R,j){if(R){if(R[w]!==S)try{g(R,w,S)}catch{R[w]=S}if(R[O]||g(R,O,j),c[j]){for(var k in h)if(R[k]!==h[k])try{g(R,k,h[k])}catch{R[k]=h[k]}}}};for(var A in c)P(s[A]&&s[A].prototype,A);P(v,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),v=r(58),h=r(116),g="String Iterator",b=v.set,w=v.getterFor(g);h(String,"String",function(O){b(this,{type:g,string:c(O),index:0})},function(){var O,S=w(this),P=S.string,A=S.index;return A>=P.length?{value:void 0,done:!0}:(O=s(P,A),S.index+=O.length,{value:O,done:!1})})},function(n,o,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),v=r(7),h=r(15),g=r(35),b=r(30),w=r(54),O=r(39),S=r(38).f,P=r(134),A=v.Symbol,R=A&&A.prototype;if(c&&b(A)&&(!("description"in R)||A().description!==void 0)){var j={},k=function(){var L=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),G=w(R,this)?new A(L):L===void 0?A():A(L);return L===""&&(j[G]=!0),G};P(k,A),k.prototype=R,R.constructor=k;var B=String(A("test"))=="Symbol(test)",q=h(R.toString),X=h(R.valueOf),W=/^Symbol\((.*)\)[^)]+$/,ee=h("".replace),J=h("".slice);S(R,"description",{configurable:!0,get:function(){var L=X(this),G=q(L);if(g(j,L))return"";var Y=B?J(G,7,-1):ee(G,W,"$1");return Y===""?void 0:Y}}),s({global:!0,forced:!0},{Symbol:k})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return h.a}),r.d(o,"c",function(){return h.e}),r.d(o,"h",function(){return W}),r.d(o,"i",function(){return B}),r.d(o,"j",function(){return j}),r.d(o,"b",function(){return ze}),r.d(o,"e",function(){return ve}),r.d(o,"f",function(){return Be}),r.d(o,"g",function(){return no});var s,c,v,h=r(0),g=0,b=[],w=h.i.__b,O=h.i.__r,S=h.i.diffed,P=h.i.__c,A=h.i.unmount;function R(Ee,Xe){h.i.__h&&h.i.__h(c,Ee,g||Xe),g=0;var Ce=c.__H||(c.__H={__:[],__h:[]});return Ee>=Ce.__.length&&Ce.__.push({}),Ce.__[Ee]}function j(Ee){return g=1,k(se,Ee)}function k(Ee,Xe,Ce){var ot=R(s++,2);return ot.t=Ee,ot.__c||(ot.__=[Ce?Ce(Xe):se(void 0,Xe),function(en){var qt=ot.t(ot.__[0],en);ot.__[0]!==qt&&(ot.__=[qt,ot.__[1]],ot.__c.setState({}))}],ot.__c=c),ot.__}function B(Ee,Xe){var Ce=R(s++,3);!h.i.__s&&H(Ce.__H,Xe)&&(Ce.__=Ee,Ce.__H=Xe,c.__H.__h.push(Ce))}function q(Ee,Xe){var Ce=R(s++,4);!h.i.__s&&H(Ce.__H,Xe)&&(Ce.__=Ee,Ce.__H=Xe,c.__h.push(Ce))}function X(Ee,Xe){var Ce=R(s++,7);return H(Ce.__H,Xe)&&(Ce.__=Ee(),Ce.__H=Xe,Ce.__h=Ee),Ce.__}function W(Ee,Xe){return g=8,X(function(){return Ee},Xe)}function ee(){var Ee;for(b.sort(function(Xe,Ce){return Xe.__v.__b-Ce.__v.__b});Ee=b.pop();)if(Ee.__P)try{Ee.__H.__h.forEach(G),Ee.__H.__h.forEach(Y),Ee.__H.__h=[]}catch(Xe){Ee.__H.__h=[],h.i.__e(Xe,Ee.__v)}}h.i.__b=function(Ee){c=null,w&&w(Ee)},h.i.__r=function(Ee){O&&O(Ee),s=0;var Xe=(c=Ee.__c).__H;Xe&&(Xe.__h.forEach(G),Xe.__h.forEach(Y),Xe.__h=[])},h.i.diffed=function(Ee){S&&S(Ee);var Xe=Ee.__c;Xe&&Xe.__H&&Xe.__H.__h.length&&(b.push(Xe)!==1&&v===h.i.requestAnimationFrame||((v=h.i.requestAnimationFrame)||L)(ee)),c=null},h.i.__c=function(Ee,Xe){Xe.some(function(Ce){try{Ce.__h.forEach(G),Ce.__h=Ce.__h.filter(function(ot){return!ot.__||Y(ot)})}catch(ot){Xe.some(function(en){en.__h&&(en.__h=[])}),Xe=[],h.i.__e(ot,Ce.__v)}}),P&&P(Ee,Xe)},h.i.unmount=function(Ee){A&&A(Ee);var Xe,Ce=Ee.__c;Ce&&Ce.__H&&(Ce.__H.__.forEach(function(ot){try{G(ot)}catch(en){Xe=en}}),Xe&&h.i.__e(Xe,Ce.__v))};var J=typeof requestAnimationFrame=="function";function L(Ee){var Xe,Ce=function(){clearTimeout(ot),J&&cancelAnimationFrame(Xe),setTimeout(Ee)},ot=setTimeout(Ce,100);J&&(Xe=requestAnimationFrame(Ce))}function G(Ee){var Xe=c,Ce=Ee.__c;typeof Ce=="function"&&(Ee.__c=void 0,Ce()),c=Xe}function Y(Ee){var Xe=c;Ee.__c=Ee.__(),c=Xe}function H(Ee,Xe){return!Ee||Ee.length!==Xe.length||Xe.some(function(Ce,ot){return Ce!==Ee[ot]})}function se(Ee,Xe){return typeof Xe=="function"?Xe(Ee):Xe}function Re(Ee,Xe){for(var Ce in Xe)Ee[Ce]=Xe[Ce];return Ee}function Se(Ee,Xe){for(var Ce in Ee)if(Ce!=="__source"&&!(Ce in Xe))return!0;for(var ot in Xe)if(ot!=="__source"&&Ee[ot]!==Xe[ot])return!0;return!1}function ze(Ee){this.props=Ee}function Be(Ee,Xe){function Ce(en){var qt=this.props.ref,Nn=qt==en.ref;return!Nn&&qt&&(qt.call?qt(null):qt.current=null),Xe?!Xe(this.props,en)||!Nn:Se(this.props,en)}function ot(en){return this.shouldComponentUpdate=Ce,Object(h.e)(Ee,en)}return ot.displayName="Memo("+(Ee.displayName||Ee.name)+")",ot.prototype.isReactComponent=!0,ot.__f=!0,ot}(ze.prototype=new h.a).isPureReactComponent=!0,ze.prototype.shouldComponentUpdate=function(Ee,Xe){return Se(this.props,Ee)||Se(this.state,Xe)};var Oe=h.i.__b;h.i.__b=function(Ee){Ee.type&&Ee.type.__f&&Ee.ref&&(Ee.props.ref=Ee.ref,Ee.ref=null),Oe&&Oe(Ee)};var ae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ve(Ee){function Xe(Ce,ot){var en=Re({},Ce);return delete en.ref,Ee(en,!(ot=Ce.ref||ot)||typeof ot=="object"&&!("current"in ot)?null:ot)}return Xe.$$typeof=ae,Xe.render=Xe,Xe.prototype.isReactComponent=Xe.__f=!0,Xe.displayName="ForwardRef("+(Ee.displayName||Ee.name)+")",Xe}var Pe=function(Ee,Xe){return Ee==null?null:Object(h.k)(Object(h.k)(Ee).map(Xe))},Ke={map:Pe,forEach:Pe,count:function(Ee){return Ee?Object(h.k)(Ee).length:0},only:function(Ee){var Xe=Object(h.k)(Ee);if(Xe.length!==1)throw"Children.only";return Xe[0]},toArray:h.k},je=h.i.__e;h.i.__e=function(Ee,Xe,Ce){if(Ee.then){for(var ot,en=Xe;en=en.__;)if((ot=en.__c)&&ot.__c)return Xe.__e==null&&(Xe.__e=Ce.__e,Xe.__k=Ce.__k),ot.__c(Ee,Xe)}je(Ee,Xe,Ce)};var at=h.i.unmount;function gt(Ee,Xe,Ce){return Ee&&(Ee.__c&&Ee.__c.__H&&(Ee.__c.__H.__.forEach(function(ot){typeof ot.__c=="function"&&ot.__c()}),Ee.__c.__H=null),(Ee=Re({},Ee)).__c!=null&&(Ee.__c.__P===Ce&&(Ee.__c.__P=Xe),Ee.__c=null),Ee.__k=Ee.__k&&Ee.__k.map(function(ot){return gt(ot,Xe,Ce)})),Ee}function Mt(Ee,Xe,Ce){return Ee&&(Ee.__v=null,Ee.__k=Ee.__k&&Ee.__k.map(function(ot){return Mt(ot,Xe,Ce)}),Ee.__c&&Ee.__c.__P===Xe&&(Ee.__e&&Ce.insertBefore(Ee.__e,Ee.__d),Ee.__c.__e=!0,Ee.__c.__P=Ce)),Ee}function Xt(){this.__u=0,this.t=null,this.__b=null}function De(Ee){var Xe=Ee.__.__c;return Xe&&Xe.__e&&Xe.__e(Ee)}function ge(){this.u=null,this.o=null}h.i.unmount=function(Ee){var Xe=Ee.__c;Xe&&Xe.__R&&Xe.__R(),Xe&&Ee.__h===!0&&(Ee.type=null),at&&at(Ee)},(Xt.prototype=new h.a).__c=function(Ee,Xe){var Ce=Xe.__c,ot=this;ot.t==null&&(ot.t=[]),ot.t.push(Ce);var en=De(ot.__v),qt=!1,Nn=function(){qt||(qt=!0,Ce.__R=null,en?en(_r):_r())};Ce.__R=Nn;var _r=function(){if(!--ot.__u){if(ot.state.__e){var mi=ot.state.__e;ot.__v.__k[0]=Mt(mi,mi.__c.__P,mi.__c.__O)}var Bo;for(ot.setState({__e:ot.__b=null});Bo=ot.t.pop();)Bo.forceUpdate()}},ni=Xe.__h===!0;ot.__u++||ni||ot.setState({__e:ot.__b=ot.__v.__k[0]}),Ee.then(Nn,Nn)},Xt.prototype.componentWillUnmount=function(){this.t=[]},Xt.prototype.render=function(Ee,Xe){if(this.__b){if(this.__v.__k){var Ce=document.createElement("div"),ot=this.__v.__k[0].__c;this.__v.__k[0]=gt(this.__b,Ce,ot.__O=ot.__P)}this.__b=null}var en=Xe.__e&&Object(h.e)(h.b,null,Ee.fallback);return en&&(en.__h=null),[Object(h.e)(h.b,null,Xe.__e?null:Ee.children),en]};var Ae=function(Ee,Xe,Ce){if(++Ce[1]===Ce[0]&&Ee.o.delete(Xe),Ee.props.revealOrder&&(Ee.props.revealOrder[0]!=="t"||!Ee.o.size))for(Ce=Ee.u;Ce;){for(;Ce.length>3;)Ce.pop()();if(Ce[1]<Ce[0])break;Ee.u=Ce=Ce[2]}};function ht(Ee){return this.getChildContext=function(){return Ee.context},Ee.children}function Wt(Ee){var Xe=this,Ce=Ee.i;Xe.componentWillUnmount=function(){Object(h.j)(null,Xe.l),Xe.l=null,Xe.i=null},Xe.i&&Xe.i!==Ce&&Xe.componentWillUnmount(),Ee.__v?(Xe.l||(Xe.i=Ce,Xe.l={nodeType:1,parentNode:Ce,childNodes:[],appendChild:function(ot){this.childNodes.push(ot),Xe.i.appendChild(ot)},insertBefore:function(ot,en){this.childNodes.push(ot),Xe.i.appendChild(ot)},removeChild:function(ot){this.childNodes.splice(this.childNodes.indexOf(ot)>>>1,1),Xe.i.removeChild(ot)}}),Object(h.j)(Object(h.e)(ht,{context:Xe.context},Ee.__v),Xe.l)):Xe.l&&Xe.componentWillUnmount()}(ge.prototype=new h.a).__e=function(Ee){var Xe=this,Ce=De(Xe.__v),ot=Xe.o.get(Ee);return ot[0]++,function(en){var qt=function(){Xe.props.revealOrder?(ot.push(en),Ae(Xe,Ee,ot)):en()};Ce?Ce(qt):qt()}},ge.prototype.render=function(Ee){this.u=null,this.o=new Map;var Xe=Object(h.k)(Ee.children);Ee.revealOrder&&Ee.revealOrder[0]==="b"&&Xe.reverse();for(var Ce=Xe.length;Ce--;)this.o.set(Xe[Ce],this.u=[1,0,this.u]);return Ee.children},ge.prototype.componentDidUpdate=ge.prototype.componentDidMount=function(){var Ee=this;this.o.forEach(function(Xe,Ce){Ae(Ee,Ce,Xe)})};var Ot=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=typeof document<"u",Tn=function(Ee){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ee)};h.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ee){Object.defineProperty(h.a.prototype,Ee,{configurable:!0,get:function(){return this["UNSAFE_"+Ee]},set:function(Xe){Object.defineProperty(this,Ee,{configurable:!0,writable:!0,value:Xe})}})});var pn=h.i.event;function ft(){}function On(){return this.cancelBubble}function Fe(){return this.defaultPrevented}h.i.event=function(Ee){return pn&&(Ee=pn(Ee)),Ee.persist=ft,Ee.isPropagationStopped=On,Ee.isDefaultPrevented=Fe,Ee.nativeEvent=Ee};var mn,Kn={configurable:!0,get:function(){return this.class}},ne=h.i.vnode;h.i.vnode=function(Ee){var Xe=Ee.type,Ce=Ee.props,ot=Ce;if(typeof Xe=="string"){var en=Xe.indexOf("-")===-1;for(var qt in ot={},Ce){var Nn=Ce[qt];yn&&qt==="children"&&Xe==="noscript"||qt==="value"&&"defaultValue"in Ce&&Nn==null||(qt==="defaultValue"&&"value"in Ce&&Ce.value==null?qt="value":qt==="download"&&Nn===!0?Nn="":/ondoubleclick/i.test(qt)?qt="ondblclick":/^onchange(textarea|input)/i.test(qt+Xe)&&!Tn(Ce.type)?qt="oninput":/^onfocus$/i.test(qt)?qt="onfocusin":/^onblur$/i.test(qt)?qt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(qt)?qt=qt.toLowerCase():en&&rn.test(qt)?qt=qt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Nn===null&&(Nn=void 0),ot[qt]=Nn)}Xe=="select"&&ot.multiple&&Array.isArray(ot.value)&&(ot.value=Object(h.k)(Ce.children).forEach(function(_r){_r.props.selected=ot.value.indexOf(_r.props.value)!=-1})),Xe=="select"&&ot.defaultValue!=null&&(ot.value=Object(h.k)(Ce.children).forEach(function(_r){_r.props.selected=ot.multiple?ot.defaultValue.indexOf(_r.props.value)!=-1:ot.defaultValue==_r.props.value})),Ee.props=ot,Ce.class!=Ce.className&&(Kn.enumerable="className"in Ce,Ce.className!=null&&(ot.class=Ce.className),Object.defineProperty(ot,"className",Kn))}Ee.$$typeof=Ot,ne&&ne(Ee)};var $n=h.i.__r;h.i.__r=function(Ee){$n&&$n(Ee),mn=Ee.__c};var xr={ReactCurrentDispatcher:{current:{readContext:function(Ee){return mn.__n[Ee.__c].props.value}}}};function Ur(Ee){return!!Ee&&Ee.$$typeof===Ot}var no=function(Ee,Xe){return Ee(Xe)},Dn=h.b,ko={useState:j,useReducer:k,useEffect:B,useLayoutEffect:q,useRef:function(Ee){return g=5,X(function(){return{current:Ee}},[])},useImperativeHandle:function(Ee,Xe,Ce){g=6,q(function(){typeof Ee=="function"?Ee(Xe()):Ee&&(Ee.current=Xe())},Ce==null?Ce:Ce.concat(Ee))},useMemo:X,useCallback:W,useContext:function(Ee){var Xe=c.context[Ee.__c],Ce=R(s++,9);return Ce.c=Ee,Xe?(Ce.__==null&&(Ce.__=!0,Xe.sub(c)),Xe.props.value):Ee.__},useDebugValue:function(Ee,Xe){h.i.useDebugValue&&h.i.useDebugValue(Xe?Xe(Ee):Ee)},version:"17.0.2",Children:Ke,render:function(Ee,Xe,Ce){return Xe.__k==null&&(Xe.textContent=""),Object(h.j)(Ee,Xe),typeof Ce=="function"&&Ce(),Ee?Ee.__c:null},hydrate:function(Ee,Xe,Ce){return Object(h.h)(Ee,Xe),typeof Ce=="function"&&Ce(),Ee?Ee.__c:null},unmountComponentAtNode:function(Ee){return!!Ee.__k&&(Object(h.j)(null,Ee),!0)},createPortal:function(Ee,Xe){return Object(h.e)(Wt,{__v:Ee,i:Xe})},createElement:h.e,createContext:h.d,createFactory:function(Ee){return h.e.bind(null,Ee)},cloneElement:function(Ee){return Ur(Ee)?h.c.apply(null,arguments):Ee},createRef:h.f,Fragment:h.b,isValidElement:Ur,findDOMNode:function(Ee){return Ee&&(Ee.base||Ee.nodeType===1&&Ee)||null},Component:h.a,PureComponent:ze,memo:Be,forwardRef:ve,flushSync:function(Ee,Xe){return Ee(Xe)},unstable_batchedUpdates:no,StrictMode:Dn,Suspense:Xt,SuspenseList:ge,lazy:function(Ee){var Xe,Ce,ot;function en(qt){if(Xe||(Xe=Ee()).then(function(Nn){Ce=Nn.default||Nn},function(Nn){ot=Nn}),ot)throw ot;if(!Ce)throw Xe;return Object(h.e)(Ce,qt)}return en.displayName="Lazy",en.__f=!0,en},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:xr};o.d=ko},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(187),g=r(57),b=function(O){if(O&&O.forEach!==h)try{g(O,"forEach",h)}catch{O.forEach=h}};for(var w in c)c[w]&&b(s[w]&&s[w].prototype);b(v)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),v=r(40),h=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){h(1)}),sham:!g},{getPrototypeOf:function(b){return h(v(b))}})},function(n,o,r){var s=r(16),c=r(46),v=r(76),h=r(203),g=r(165),b=r(32),w=r(33),O=r(60),S=r(18),P=c("Reflect","construct"),A=Object.prototype,R=[].push,j=S(function(){function q(){}return!(P(function(){},[],q)instanceof q)}),k=!S(function(){P(function(){})}),B=j||k;s({target:"Reflect",stat:!0,forced:B,sham:B},{construct:function(q,X){g(q),b(X);var W=arguments.length<3?q:g(arguments[2]);if(k&&!j)return P(q,X,W);if(q==W){switch(X.length){case 0:return new q;case 1:return new q(X[0]);case 2:return new q(X[0],X[1]);case 3:return new q(X[0],X[1],X[2]);case 4:return new q(X[0],X[1],X[2],X[3])}var ee=[null];return v(R,ee,X),new(v(h,q,ee))}var J=W.prototype,L=O(w(J)?J:A),G=v(q,L,X);return w(G)?G:L}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(h){return h&&v(c,h)}:function(h){return h&&function(){return c.apply(h,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,v=r(57),h=r(42),g=r(110),b=r(134),w=r(95);n.exports=function(O,S){var P,A,R,j,k,B=O.target,q=O.global,X=O.stat;if(P=q?s:X?s[B]||g(B,{}):(s[B]||{}).prototype)for(A in S){if(j=S[A],R=O.noTargetGet?(k=c(P,A))&&k.value:P[A],!w(q?A:B+(X?".":"#")+A,O.forced)&&R!==void 0){if(typeof j==typeof R)continue;b(j,R)}(O.sham||R&&R.sham)&&v(j,"sham",!0),h(P,A,j,O)}}},function(n,o,r){var s=r(16),c=r(7),v=r(96),h=r(99),g=r(33),b=r(75),w=r(45),O=r(41),S=r(63),P=r(28),A=r(81),R=r(98),j=A("slice"),k=P("species"),B=c.Array,q=Math.max;s({target:"Array",proto:!0,forced:!j},{slice:function(X,W){var ee,J,L,G=O(this),Y=w(G),H=b(X,Y),se=b(W===void 0?Y:W,Y);if(v(G)&&(ee=G.constructor,(h(ee)&&(ee===B||v(ee.prototype))||g(ee)&&(ee=ee[k])===null)&&(ee=void 0),ee===B||ee===void 0))return R(G,H,se);for(J=new(ee===void 0?B:ee)(q(se-H,0)),L=0;H<se;H++,L++)H in G&&S(J,L,G[H]);return J.length=L,J}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(h){return v(c(h))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,v=r(15),h=r(38).f,g=Function.prototype,b=v(g.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=v(w.exec);s&&!c&&h(g,"name",{configurable:!0,get:function(){try{return O(w,b(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),v=r(41),h=r(50).f,g=r(36),b=c(function(){h(1)});s({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(w,O){return h(v(w),O)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),v=r(135),h=r(41),g=r(50),b=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(w){for(var O,S,P=h(w),A=g.f,R=v(P),j={},k=0;R.length>k;)(S=A(P,O=R[k++]))!==void 0&&b(j,O,S);return j}})},,function(n,o,r){var s=r(16),c=r(7),v=r(18),h=r(96),g=r(33),b=r(40),w=r(45),O=r(63),S=r(115),P=r(81),A=r(28),R=r(70),j=A("isConcatSpreadable"),k=9007199254740991,B="Maximum allowed index exceeded",q=c.TypeError,X=R>=51||!v(function(){var J=[];return J[j]=!1,J.concat()[0]!==J}),W=P("concat"),ee=function(J){if(!g(J))return!1;var L=J[j];return L!==void 0?!!L:h(J)};s({target:"Array",proto:!0,forced:!X||!W},{concat:function(J){var L,G,Y,H,se,Re=b(this),Se=S(Re,0),ze=0;for(L=-1,Y=arguments.length;L<Y;L++)if(ee(se=L===-1?Re:arguments[L])){if(ze+(H=w(se))>k)throw q(B);for(G=0;G<H;G++,ze++)G in se&&O(Se,ze,se[G])}else{if(ze>=k)throw q(B);O(Se,ze++,se)}return Se.length=ze,Se}})},function(n,o,r){var s=r(7),c=r(89),v=r(35),h=r(90),g=r(108),b=r(132),w=c("wks"),O=s.Symbol,S=O&&O.for,P=b?O:O&&O.withoutSetter||h;n.exports=function(A){if(!v(w,A)||!g&&typeof w[A]!="string"){var R="Symbol."+A;g&&v(O,A)?w[A]=O[A]:w[A]=b&&S?S(R):P(R)}return w[A]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();o.a=v},function(n,o,r){var s=r(7),c=r(33),v=s.String,h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(h,g){return v(c(h),g)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),v=r(133),h=r(32),g=r(86),b=s.TypeError,w=Object.defineProperty;o.f=c?w:function(O,S,P){if(h(O),S=g(S),h(P),v)try{return w(O,S,P)}catch{}if("get"in P||"set"in P)throw b("Accessors not supported");return"value"in P&&(O[S]=P.value),O}},function(n,o,r){var s=r(7),c=r(97),v=s.String;n.exports=function(h){if(c(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(h)}},function(n,o,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(h){return v(c(h))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,o,r){var s=r(7),c=r(30),v=r(35),h=r(57),g=r(110),b=r(92),w=r(58),O=r(73).CONFIGURABLE,S=w.get,P=w.enforce,A=String(String).split("String");(n.exports=function(R,j,k,B){var q,X=!!B&&!!B.unsafe,W=!!B&&!!B.enumerable,ee=!!B&&!!B.noTargetGet,J=B&&B.name!==void 0?B.name:j;c(k)&&(String(J).slice(0,7)==="Symbol("&&(J="["+String(J).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(k,"name")||O&&k.name!==J)&&h(k,"name",J),(q=P(k)).source||(q.source=A.join(typeof J=="string"?J:""))),R!==s?(X?!ee&&R[j]&&(W=!0):delete R[j],W?R[j]=k:h(R,j,k)):W?R[j]=k:g(j,k)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||b(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return h}),r.d(o,"c",function(){return g}),r.d(o,"b",function(){return b}),r.d(o,"a",function(){return O});var c=r(10),v=function(S,P){var A=typeof Symbol=="function"&&S[Symbol.iterator];if(!A)return S;var R,j,k=A.call(S),B=[];try{for(;(P===void 0||P-- >0)&&!(R=k.next()).done;)B.push(R.value)}catch(q){j={error:q}}finally{try{R&&!R.done&&(A=k.return)&&A.call(k)}finally{if(j)throw j.error}}return B};function h(){var S=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){S(function(P){return P+1})},[])}function g(S){if(!S||typeof S!="object")return!1;var P=Object.getPrototypeOf(S);return!P||P===Object.prototype}function b(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var w={};function O(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:w}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),v=function(h){return c(h)?h:void 0};n.exports=function(h,g){return arguments.length<2?v(s[h]):s[h]&&s[h][g]}},function(n,o,r){var s=r(16),c=r(34),v=r(33),h=r(32),g=r(204),b=r(50),w=r(101);s({target:"Reflect",stat:!0},{get:function O(S,P){var A,R,j=arguments.length<3?S:arguments[2];return h(S)===j?S[P]:(A=b.f(S,P))?g(A)?A.value:A.get===void 0?void 0:c(A.get,j):v(R=w(S))?O(R,P,j):void 0}})},function(n,o,r){(function(s){var c=r(31),v=r(171),h=t&&!t.nodeType&&t,g=h&&typeof s=="object"&&s&&!s.nodeType&&s,b=g&&g.exports===h?c.a.Buffer:void 0,w=(b?b.isBuffer:void 0)||v.a;o.a=w}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v&&c.a.process,b=function(){try{var w=h&&h.require&&h.require("util").types;return w||g&&g.binding&&g.binding("util")}catch{}}();o.a=b}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),v=r(84),h=r(69),g=r(41),b=r(86),w=r(35),O=r(133),S=Object.getOwnPropertyDescriptor;o.f=s?S:function(P,A){if(P=g(P),A=b(A),O)try{return S(P,A)}catch{}if(w(P,A))return h(!c(v.f,P,A),P[A])}},function(n,o,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(h){return v(c(h),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(h,g,b){return c.f(h,g,v(1,b))}:function(h,g,b){return h[g]=b,h}},function(n,o,r){var s,c,v,h=r(175),g=r(7),b=r(15),w=r(33),O=r(57),S=r(35),P=r(109),A=r(93),R=r(72),j="Object already initialized",k=g.TypeError,B=g.WeakMap;if(h||P.state){var q=P.state||(P.state=new B),X=b(q.get),W=b(q.has),ee=b(q.set);s=function(L,G){if(W(q,L))throw new k(j);return G.facade=L,ee(q,L,G),G},c=function(L){return X(q,L)||{}},v=function(L){return W(q,L)}}else{var J=A("state");R[J]=!0,s=function(L,G){if(S(L,J))throw new k(j);return G.facade=L,O(L,J,G),G},c=function(L){return S(L,J)?L[J]:{}},v=function(L){return S(L,J)}}n.exports={set:s,get:c,has:v,enforce:function(L){return v(L)?c(L):s(L,{})},getterFor:function(L){return function(G){var Y;if(!w(G)||(Y=c(G)).type!==L)throw k("Incompatible receiver, "+L+" required");return Y}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,o,r){var s,c=r(32),v=r(176),h=r(111),g=r(72),b=r(138),w=r(91),O=r(93),S=O("IE_PROTO"),P=function(){},A=function(k){return"<script>"+k+"<\/script>"},R=function(k){k.write(A("")),k.close();var B=k.parentWindow.Object;return k=null,B},j=function(){try{s=new ActiveXObject("htmlfile")}catch{}var k,B;j=typeof document<"u"?document.domain&&s?R(s):((B=w("iframe")).style.display="none",b.appendChild(B),B.src="javascript:",(k=B.contentWindow.document).open(),k.write(A("document.F=Object")),k.close(),k.F):R(s);for(var q=h.length;q--;)delete j.prototype[h[q]];return j()};g[S]=!0,n.exports=Object.create||function(k,B){var q;return k!==null?(P.prototype=c(k),q=new P,P.prototype=null,q[S]=k):q=j(),B===void 0?q:v(q,B)}},function(n,o,r){var s=r(36),c=r(7),v=r(15),h=r(95),g=r(42),b=r(35),w=r(148),O=r(54),S=r(87),P=r(131),A=r(18),R=r(74).f,j=r(50).f,k=r(38).f,B=r(160),q=r(161).trim,X="Number",W=c.Number,ee=W.prototype,J=c.TypeError,L=v("".slice),G=v("".charCodeAt),Y=function(Be){var Oe=P(Be,"number");return typeof Oe=="bigint"?Oe:H(Oe)},H=function(Be){var Oe,ae,ve,Pe,Ke,je,at,gt,Mt=P(Be,"number");if(S(Mt))throw J("Cannot convert a Symbol value to a number");if(typeof Mt=="string"&&Mt.length>2){if(Mt=q(Mt),(Oe=G(Mt,0))===43||Oe===45){if((ae=G(Mt,2))===88||ae===120)return NaN}else if(Oe===48){switch(G(Mt,1)){case 66:case 98:ve=2,Pe=49;break;case 79:case 111:ve=8,Pe=55;break;default:return+Mt}for(je=(Ke=L(Mt,2)).length,at=0;at<je;at++)if((gt=G(Ke,at))<48||gt>Pe)return NaN;return parseInt(Ke,ve)}}return+Mt};if(h(X,!W(" 0o1")||!W("0b1")||W("+0x1"))){for(var se,Re=function(Be){var Oe=arguments.length<1?0:W(Y(Be)),ae=this;return O(ee,ae)&&A(function(){B(ae)})?w(Object(Oe),ae,Re):Oe},Se=s?R(W):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ze=0;Se.length>ze;ze++)b(W,se=Se[ze])&&!b(Re,se)&&k(Re,se,j(W,se));Re.prototype=ee,ee.constructor=Re,g(c,X,Re)}},function(n,o,r){var s=r(56);n.exports=function(c,v){var h=c[v];return h==null?void 0:s(h)}},function(n,o,r){var s=r(86),c=r(38),v=r(69);n.exports=function(h,g,b){var w=s(g);w in h?c.f(h,w,v(0,b)):h[w]=b}},function(n,o,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(h,g){return c(h),g===void 0?h:v?v(h,g):function(){return h.apply(g,arguments)}}},function(n,o,r){var s=r(16),c=r(15),v=r(85),h=r(41),g=r(121),b=c([].join),w=v!=Object,O=g("join",",");s({target:"Array",proto:!0,forced:w||!O},{join:function(S){return b(h(this),S===void 0?",":S)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,v=r(42),h=r(32),g=r(54),b=r(39),w=r(18),O=r(154),S="toString",P=RegExp.prototype,A=P.toString,R=s(O),j=w(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),k=c&&A.name!=S;(j||k)&&v(RegExp.prototype,S,function(){var B=h(this),q=b(B.source),X=B.flags;return"/"+q+"/"+b(X===void 0&&g(P,B)&&!("flags"in P)?R(B):X)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,v=r(7),h=r(55),g=v.process,b=v.Deno,w=g&&g.versions||b&&b.version,O=w&&w.v8;O&&(c=(s=O.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&h&&(!(s=h.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=h.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),v=Function.prototype,h=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),b=g&&(function(){}).name==="something",w=g&&(!s||s&&h(v,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:w}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,o,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(h,g){var b=s(h);return b<0?c(b+g,0):v(b,g)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,o,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(h,g,b){h&&!c(h=b?h:h.prototype,v)&&s(h,v,{configurable:!0,value:g})}},function(n,o,r){var s=r(64),c=r(15),v=r(85),h=r(40),g=r(45),b=r(115),w=c([].push),O=function(S){var P=S==1,A=S==2,R=S==3,j=S==4,k=S==6,B=S==7,q=S==5||k;return function(X,W,ee,J){for(var L,G,Y=h(X),H=v(Y),se=s(W,ee),Re=g(H),Se=0,ze=J||b,Be=P?ze(X,Re):A||B?ze(X,0):void 0;Re>Se;Se++)if((q||Se in H)&&(G=se(L=H[Se],Se,Y),S))if(P)Be[Se]=G;else if(G)switch(S){case 3:return!0;case 5:return L;case 6:return Se;case 2:w(Be,L)}else switch(S){case 4:return!1;case 7:w(Be,L)}return k?-1:R||j?j:Be}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),v=r(70),h=c("species");n.exports=function(g){return v>=51||!s(function(){var b=[];return(b.constructor={})[h]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(159),b=r(32),w=r(44),O=r(164),S=r(124),P=r(94),A=r(39),R=r(62),j=r(114),k=r(125),B=r(103),q=r(155),X=r(18),W=q.UNSUPPORTED_Y,ee=4294967295,J=Math.min,L=[].push,G=v(/./.exec),Y=v(L),H=v("".slice),se=!X(function(){var Re=/(?:)/,Se=Re.exec;Re.exec=function(){return Se.apply(this,arguments)};var ze="ab".split(Re);return ze.length!==2||ze[0]!=="a"||ze[1]!=="b"});h("split",function(Re,Se,ze){var Be;return Be="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Oe,ae){var ve=A(w(this)),Pe=ae===void 0?ee:ae>>>0;if(Pe===0)return[];if(Oe===void 0)return[ve];if(!g(Oe))return c(Se,ve,Oe,Pe);for(var Ke,je,at,gt=[],Mt=(Oe.ignoreCase?"i":"")+(Oe.multiline?"m":"")+(Oe.unicode?"u":"")+(Oe.sticky?"y":""),Xt=0,De=new RegExp(Oe.source,Mt+"g");(Ke=c(B,De,ve))&&!((je=De.lastIndex)>Xt&&(Y(gt,H(ve,Xt,Ke.index)),Ke.length>1&&Ke.index<ve.length&&s(L,gt,j(Ke,1)),at=Ke[0].length,Xt=je,gt.length>=Pe));)De.lastIndex===Ke.index&&De.lastIndex++;return Xt===ve.length?!at&&G(De,"")||Y(gt,""):Y(gt,H(ve,Xt)),gt.length>Pe?j(gt,0,Pe):gt}:"0".split(void 0,0).length?function(Oe,ae){return Oe===void 0&&ae===0?[]:c(Se,this,Oe,ae)}:Se,[function(Oe,ae){var ve=w(this),Pe=Oe==null?void 0:R(Oe,Re);return Pe?c(Pe,Oe,ve,ae):c(Be,A(ve),Oe,ae)},function(Oe,ae){var ve=b(this),Pe=A(Oe),Ke=ze(Be,ve,Pe,ae,Be!==Se);if(Ke.done)return Ke.value;var je=O(ve,RegExp),at=ve.unicode,gt=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(W?"g":"y"),Mt=new je(W?"^(?:"+ve.source+")":ve,gt),Xt=ae===void 0?ee:ae>>>0;if(Xt===0)return[];if(Pe.length===0)return k(Mt,Pe)===null?[Pe]:[];for(var De=0,ge=0,Ae=[];ge<Pe.length;){Mt.lastIndex=W?0:ge;var ht,Wt=k(Mt,W?H(Pe,ge):Pe);if(Wt===null||(ht=J(P(Mt.lastIndex+(W?ge:0)),Pe.length))===De)ge=S(Pe,ge,at);else{if(Y(Ae,H(Pe,De,ge)),Ae.length===Xt)return Ae;for(var Ot=1;Ot<=Wt.length-1;Ot++)if(Y(Ae,Wt[Ot]),Ae.length===Xt)return Ae;ge=De=ht}}return Y(Ae,H(Pe,De)),Ae}]},!se,W)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);o.f=v?function(h){var g=c(this,h);return!!g&&g.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),v=r(18),h=r(51),g=s.Object,b=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(w){return h(w)=="String"?b(w,""):g(w)}:g},function(n,o,r){var s=r(131),c=r(87);n.exports=function(v){var h=s(v,"string");return c(h)?h:h+""}},function(n,o,r){var s=r(7),c=r(46),v=r(30),h=r(54),g=r(132),b=s.Object;n.exports=g?function(w){return typeof w=="symbol"}:function(w){var O=c("Symbol");return v(O)&&h(O.prototype,b(w))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(v,h){return c[v]||(c[v]=h!==void 0?h:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,v=Math.random(),h=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+h(++c+v,36)}},function(n,o,r){var s=r(7),c=r(33),v=s.document,h=c(v)&&c(v.createElement);n.exports=function(g){return h?v.createElement(g):{}}},function(n,o,r){var s=r(15),c=r(30),v=r(109),h=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return h(g)}),n.exports=v.inspectSource},function(n,o,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(h){return v[h]||(v[h]=c(h))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),v=/#|\.prototype\./,h=function(S,P){var A=b[g(S)];return A==O||A!=w&&(c(P)?s(P):!!P)},g=h.normalize=function(S){return String(S).replace(v,".").toLowerCase()},b=h.data={},w=h.NATIVE="N",O=h.POLYFILL="P";n.exports=h},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),v=r(30),h=r(51),g=r(28)("toStringTag"),b=s.Object,w=h(function(){return arguments}())=="Arguments";n.exports=c?h:function(O){var S,P,A;return O===void 0?"Undefined":O===null?"Null":typeof(P=function(R,j){try{return R[j]}catch{}}(S=b(O),g))=="string"?P:w?h(S):(A=h(S))=="Object"&&v(S.callee)?"Arguments":A}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),v=r(30),h=r(97),g=r(46),b=r(92),w=function(){},O=[],S=g("Reflect","construct"),P=/^\s*(?:class|function)\b/,A=s(P.exec),R=!P.exec(w),j=function(k){if(!v(k))return!1;try{return S(w,O,k),!0}catch{return!1}};n.exports=!S||c(function(){var k;return j(j.call)||!j(Object)||!j(function(){k=!0})||k})?function(k){if(!v(k))return!1;switch(h(k)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!A(P,b(k))}:j},function(n,o,r){var s=r(28),c=r(60),v=r(38),h=s("unscopables"),g=Array.prototype;g[h]==null&&v.f(g,h,{configurable:!0,value:c(null)}),n.exports=function(b){g[h][b]=!0}},function(n,o,r){var s=r(7),c=r(35),v=r(30),h=r(40),g=r(93),b=r(143),w=g("IE_PROTO"),O=s.Object,S=O.prototype;n.exports=b?O.getPrototypeOf:function(P){var A=h(P);if(c(A,w))return A[w];var R=A.constructor;return v(R)&&A instanceof R?R.prototype:A instanceof O?S:null}},function(n,o,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,g=!1,b={};try{(h=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(w,O){return c(w),v(O),g?h(w,O):w.__proto__=O,w}}():void 0)},function(n,o,r){var s,c,v=r(34),h=r(15),g=r(39),b=r(154),w=r(155),O=r(89),S=r(60),P=r(58).get,A=r(190),R=r(191),j=O("native-string-replace",String.prototype.replace),k=RegExp.prototype.exec,B=k,q=h("".charAt),X=h("".indexOf),W=h("".replace),ee=h("".slice),J=(c=/b*/g,v(k,s=/a/,"a"),v(k,c,"a"),s.lastIndex!==0||c.lastIndex!==0),L=w.BROKEN_CARET,G=/()??/.exec("")[1]!==void 0;(J||G||L||A||R)&&(B=function(Y){var H,se,Re,Se,ze,Be,Oe,ae=this,ve=P(ae),Pe=g(Y),Ke=ve.raw;if(Ke)return Ke.lastIndex=ae.lastIndex,H=v(B,Ke,Pe),ae.lastIndex=Ke.lastIndex,H;var je=ve.groups,at=L&&ae.sticky,gt=v(b,ae),Mt=ae.source,Xt=0,De=Pe;if(at&&(gt=W(gt,"y",""),X(gt,"g")===-1&&(gt+="g"),De=ee(Pe,ae.lastIndex),ae.lastIndex>0&&(!ae.multiline||ae.multiline&&q(Pe,ae.lastIndex-1)!==`
`)&&(Mt="(?: "+Mt+")",De=" "+De,Xt++),se=new RegExp("^(?:"+Mt+")",gt)),G&&(se=new RegExp("^"+Mt+"$(?!\\s)",gt)),J&&(Re=ae.lastIndex),Se=v(k,at?se:ae,De),at?Se?(Se.input=ee(Se.input,Xt),Se[0]=ee(Se[0],Xt),Se.index=ae.lastIndex,ae.lastIndex+=Se[0].length):ae.lastIndex=0:J&&Se&&(ae.lastIndex=ae.global?Se.index+Se[0].length:Re),G&&Se&&Se.length>1&&v(j,Se[0],se,function(){for(ze=1;ze<arguments.length-2;ze++)arguments[ze]===void 0&&(Se[ze]=void 0)}),Se&&je)for(Se.groups=Be=S(null),ze=0;ze<je.length;ze++)Be[(Oe=je[ze])[0]]=Se[Oe[1]];return Se}),n.exports=B},function(n,o,r){var s=r(16),c=r(7),v=r(75),h=r(59),g=r(45),b=r(40),w=r(115),O=r(63),S=r(81)("splice"),P=c.TypeError,A=Math.max,R=Math.min,j=9007199254740991,k="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!S},{splice:function(B,q){var X,W,ee,J,L,G,Y=b(this),H=g(Y),se=v(B,H),Re=arguments.length;if(Re===0?X=W=0:Re===1?(X=0,W=H-se):(X=Re-2,W=R(A(h(q),0),H-se)),H+X-W>j)throw P(k);for(ee=w(Y,W),J=0;J<W;J++)(L=se+J)in Y&&O(ee,J,Y[L]);if(ee.length=W,X<W){for(J=se;J<H-W;J++)G=J+X,(L=J+W)in Y?Y[G]=Y[L]:delete Y[G];for(J=H;J>H-W+X;J--)delete Y[J-1]}else if(X>W)for(J=H-W;J>se;J--)G=J+X-1,(L=J+W-1)in Y?Y[G]=Y[L]:delete Y[G];for(J=0;J<X;J++)Y[J+se]=arguments[J+2];return Y.length=H-W+X,ee}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;o.a=function(w,O){if(O)return w.slice();var S=w.length,P=b?b(S):new w.constructor(S);return w.copy(P),P}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),v="__core-js_shared__",h=s[v]||c(v,{});n.exports=h},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,h){try{c(s,v,{value:h,configurable:!0,writable:!0})}catch{s[v]=h}return h}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),v=r(45),h=r(63),g=s.Array,b=Math.max;n.exports=function(w,O,S){for(var P=v(w),A=c(O,P),R=c(S===void 0?P:S,P),j=g(b(R-A,0)),k=0;A<R;A++,k++)h(j,k,w[A]);return j.length=k,j}},function(n,o,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,o,r){var s=r(16),c=r(34),v=r(71),h=r(73),g=r(30),b=r(180),w=r(101),O=r(102),S=r(78),P=r(57),A=r(42),R=r(28),j=r(80),k=r(142),B=h.PROPER,q=h.CONFIGURABLE,X=k.IteratorPrototype,W=k.BUGGY_SAFARI_ITERATORS,ee=R("iterator"),J="keys",L="values",G="entries",Y=function(){return this};n.exports=function(H,se,Re,Se,ze,Be,Oe){b(Re,se,Se);var ae,ve,Pe,Ke=function(ge){if(ge===ze&&Xt)return Xt;if(!W&&ge in gt)return gt[ge];switch(ge){case J:case L:case G:return function(){return new Re(this,ge)}}return function(){return new Re(this)}},je=se+" Iterator",at=!1,gt=H.prototype,Mt=gt[ee]||gt["@@iterator"]||ze&&gt[ze],Xt=!W&&Mt||Ke(ze),De=se=="Array"&&gt.entries||Mt;if(De&&(ae=w(De.call(new H)))!==Object.prototype&&ae.next&&(v||w(ae)===X||(O?O(ae,X):g(ae[ee])||A(ae,ee,Y)),S(ae,je,!0,!0),v&&(j[je]=Y)),B&&ze==L&&Mt&&Mt.name!==L&&(!v&&q?P(gt,"name",L):(at=!0,Xt=function(){return c(Mt,this)})),ze)if(ve={values:Ke(L),keys:Be?Xt:Ke(J),entries:Ke(G)},Oe)for(Pe in ve)(W||at||!(Pe in gt))&&A(gt,Pe,ve[Pe]);else s({target:se,proto:!0,forced:W||at},ve);return v&&!Oe||gt[ee]===Xt||A(gt,ee,Xt,{name:ze}),j[se]=Xt,ve}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(32),g=r(88),b=r(145),w=r(45),O=r(54),S=r(146),P=r(118),A=r(147),R=s.TypeError,j=function(B,q){this.stopped=B,this.result=q},k=j.prototype;n.exports=function(B,q,X){var W,ee,J,L,G,Y,H,se=X&&X.that,Re=!(!X||!X.AS_ENTRIES),Se=!(!X||!X.IS_ITERATOR),ze=!(!X||!X.INTERRUPTED),Be=c(q,se),Oe=function(ve){return W&&A(W,"normal",ve),new j(!0,ve)},ae=function(ve){return Re?(h(ve),ze?Be(ve[0],ve[1],Oe):Be(ve[0],ve[1])):ze?Be(ve,Oe):Be(ve)};if(Se)W=B;else{if(!(ee=P(B)))throw R(g(B)+" is not iterable");if(b(ee)){for(J=0,L=w(B);L>J;J++)if((G=ae(B[J]))&&O(k,G))return G;return new j(!1)}W=S(B,ee)}for(Y=W.next;!(H=v(Y,W)).done;){try{G=ae(H.value)}catch(ve){A(W,"throw",ve)}if(typeof G=="object"&&G&&O(k,G))return G}return new j(!1)}},function(n,o,r){var s=r(97),c=r(62),v=r(80),h=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,h)||c(g,"@@iterator")||v[s(g)]}},function(n,o,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(h,g){if(c(g,h))return h;throw v("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var v=0,h={next:function(){return{done:!!v++}},return:function(){c=!0}};h[s]=function(){return this},Array.from(h,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var w=!1;try{var O={};O[s]=function(){return{next:function(){return{done:w=!0}}}},g(O)}catch{}return w}},function(n,o,r){var s=r(18);n.exports=function(c,v){var h=[][c];return!!h&&s(function(){h.call(null,v||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),v=r(103),h=r(18),g=r(28),b=r(57),w=g("species"),O=RegExp.prototype;n.exports=function(S,P,A,R){var j=g(S),k=!h(function(){var W={};return W[j]=function(){return 7},""[S](W)!=7}),B=k&&!h(function(){var W=!1,ee=/a/;return S==="split"&&((ee={}).constructor={},ee.constructor[w]=function(){return ee},ee.flags="",ee[j]=/./[j]),ee.exec=function(){return W=!0,null},ee[j](""),!W});if(!k||!B||A){var q=s(/./[j]),X=P(j,""[S],function(W,ee,J,L,G){var Y=s(W),H=ee.exec;return H===v||H===O.exec?k&&!G?{done:!0,value:q(ee,J,L)}:{done:!0,value:Y(J,ee,L)}:{done:!1}});c(String.prototype,S,X[0]),c(O,j,X[1])}R&&b(O[j],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,v,h){return v+(h?s(c,v).length:1)}},function(n,o,r){var s=r(7),c=r(34),v=r(32),h=r(30),g=r(51),b=r(103),w=s.TypeError;n.exports=function(O,S){var P=O.exec;if(h(P)){var A=c(P,O,S);return A!==null&&v(A),A}if(g(O)==="RegExp")return c(b,O,S);throw w("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(18),b=r(32),w=r(30),O=r(59),S=r(94),P=r(39),A=r(44),R=r(124),j=r(62),k=r(201),B=r(125),q=r(28)("replace"),X=Math.max,W=Math.min,ee=v([].concat),J=v([].push),L=v("".indexOf),G=v("".slice),Y="a".replace(/./,"$0")==="$0",H=!!/./[q]&&/./[q]("a","$0")==="";h("replace",function(se,Re,Se){var ze=H?"$":"$0";return[function(Be,Oe){var ae=A(this),ve=Be==null?void 0:j(Be,q);return ve?c(ve,Be,ae,Oe):c(Re,P(ae),Be,Oe)},function(Be,Oe){var ae=b(this),ve=P(Be);if(typeof Oe=="string"&&L(Oe,ze)===-1&&L(Oe,"$<")===-1){var Pe=Se(Re,ae,ve,Oe);if(Pe.done)return Pe.value}var Ke=w(Oe);Ke||(Oe=P(Oe));var je=ae.global;if(je){var at=ae.unicode;ae.lastIndex=0}for(var gt=[];;){var Mt=B(ae,ve);if(Mt===null||(J(gt,Mt),!je))break;P(Mt[0])===""&&(ae.lastIndex=R(ve,S(ae.lastIndex),at))}for(var Xt,De="",ge=0,Ae=0;Ae<gt.length;Ae++){for(var ht=P((Mt=gt[Ae])[0]),Wt=X(W(O(Mt.index),ve.length),0),Ot=[],rn=1;rn<Mt.length;rn++)J(Ot,(Xt=Mt[rn])===void 0?Xt:String(Xt));var yn=Mt.groups;if(Ke){var Tn=ee([ht],Ot,Wt,ve);yn!==void 0&&J(Tn,yn);var pn=P(s(Oe,void 0,Tn))}else pn=k(ht,ve,Wt,Ot,yn,Oe);Wt>=ge&&(De+=G(ve,ge,Wt)+pn,ge=Wt+ht.length)}return De+G(ve,ge)}]},!!g(function(){var se=/./;return se.exec=function(){var Re=[];return Re.groups={a:"7"},Re},"".replace(se,"$<a>")!=="7"})||!Y||H)},function(n,o,r){var s=r(16),c=Math.hypot,v=Math.abs,h=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var w,O,S=0,P=0,A=arguments.length,R=0;P<A;)R<(w=v(arguments[P++]))?(S=S*(O=R/w)*O+1,R=w):S+=w>0?(O=w/R)*O:w;return R===1/0?1/0:R*h(S)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var h,g="Expected a function",b="__lodash_hash_undefined__",w="__lodash_placeholder__",O=16,S=32,P=64,A=128,R=256,j=1/0,k=9007199254740991,B=NaN,q=4294967295,X=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",S],["partialRight",P],["rearg",R]],W="[object Arguments]",ee="[object Array]",J="[object Boolean]",L="[object Date]",G="[object Error]",Y="[object Function]",H="[object GeneratorFunction]",se="[object Map]",Re="[object Number]",Se="[object Object]",ze="[object Promise]",Be="[object RegExp]",Oe="[object Set]",ae="[object String]",ve="[object Symbol]",Pe="[object WeakMap]",Ke="[object ArrayBuffer]",je="[object DataView]",at="[object Float32Array]",gt="[object Float64Array]",Mt="[object Int8Array]",Xt="[object Int16Array]",De="[object Int32Array]",ge="[object Uint8Array]",Ae="[object Uint8ClampedArray]",ht="[object Uint16Array]",Wt="[object Uint32Array]",Ot=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,ft=RegExp(Tn.source),On=RegExp(pn.source),Fe=/<%-([\s\S]+?)%>/g,mn=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/,xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/[\\^$.*+?()[\]{}|]/g,no=RegExp(Ur.source),Dn=/^\s+/,ko=/\s/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ce=/,? & /,ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,Nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,ni=/^[-+]0x[0-9a-f]+$/i,mi=/^0b[01]+$/i,Bo=/^\[object .+?Constructor\]$/,Ho=/^0o[0-7]+$/i,xn=/^(?:0|[1-9]\d*)$/,Bn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xn=/($^)/,or=/['\n\r\u2028\u2029\\]/g,Kr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rr="\\u2700-\\u27bf",cl="a-z\\xdf-\\xf6\\xf8-\\xff",Ua="A-Z\\xc0-\\xd6\\xd8-\\xde",fl="\\ufe0e\\ufe0f",au="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ud="['’]",yc="[\\ud800-\\udfff]",fa="["+au+"]",Wu="["+Kr+"]",Pn="\\d+",kf="[\\u2700-\\u27bf]",ho="["+cl+"]",mc="[^\\ud800-\\udfff"+au+Pn+Rr+cl+Ua+"]",zi="\\ud83c[\\udffb-\\udfff]",ta="[^\\ud800-\\udfff]",Es="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",da="["+Ua+"]",Ma="(?:"+ho+"|"+mc+")",gc="(?:"+da+"|"+mc+")",bc="(?:['’](?:d|ll|m|re|s|t|ve))?",Cf="(?:['’](?:D|LL|M|RE|S|T|VE))?",zu="(?:"+Wu+"|"+zi+")?",Df="[\\ufe0e\\ufe0f]?",_c=Df+zu+("(?:\\u200d(?:"+[ta,Es,Ta].join("|")+")"+Df+zu+")*"),Gd="(?:"+[kf,Es,Ta].join("|")+")"+_c,Cl="(?:"+[ta+Wu+"?",Wu,Es,Ta,yc].join("|")+")",jf=RegExp(Ud,"g"),dl=RegExp(Wu,"g"),wc=RegExp(zi+"(?="+zi+")|"+Cl+_c,"g"),Os=RegExp([da+"?"+ho+"+"+bc+"(?="+[fa,da,"$"].join("|")+")",gc+"+"+Cf+"(?="+[fa,da+Ma,"$"].join("|")+")",da+"?"+Ma+"+"+bc,da+"+"+Cf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,Gd].join("|"),"g"),Ec=RegExp("[\\u200d\\ud800-\\udfff"+Kr+fl+"]"),Oc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],If=-1,Wr={};Wr[at]=Wr[gt]=Wr[Mt]=Wr[Xt]=Wr[De]=Wr[ge]=Wr[Ae]=Wr[ht]=Wr[Wt]=!0,Wr[W]=Wr[ee]=Wr[Ke]=Wr[J]=Wr[je]=Wr[L]=Wr[G]=Wr[Y]=Wr[se]=Wr[Re]=Wr[Se]=Wr[Be]=Wr[Oe]=Wr[ae]=Wr[Pe]=!1;var Gr={};Gr[W]=Gr[ee]=Gr[Ke]=Gr[je]=Gr[J]=Gr[L]=Gr[at]=Gr[gt]=Gr[Mt]=Gr[Xt]=Gr[De]=Gr[se]=Gr[Re]=Gr[Se]=Gr[Be]=Gr[Oe]=Gr[ae]=Gr[ve]=Gr[ge]=Gr[Ae]=Gr[ht]=Gr[Wt]=!0,Gr[G]=Gr[Y]=Gr[Pe]=!1;var Lf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lu=parseFloat,pa=parseInt,xs=typeof s=="object"&&s&&s.Object===Object&&s,Ff=typeof self=="object"&&self&&self.Object===Object&&self,Co=xs||Ff||Function("return this")(),Dl=o&&!o.nodeType&&o,jl=Dl&&typeof c=="object"&&c&&!c.nodeType&&c,Ss=jl&&jl.exports===Dl,uu=Ss&&xs.process,gi=function(){try{var ut=jl&&jl.require&&jl.require("util").types;return ut||uu&&uu.binding&&uu.binding("util")}catch{}}(),xc=gi&&gi.isArrayBuffer,$f=gi&&gi.isDate,Sc=gi&&gi.isMap,Ri=gi&&gi.isRegExp,ri=gi&&gi.isSet,na=gi&&gi.isTypedArray;function ro(ut,Dt,Ft){switch(Ft.length){case 0:return ut.call(Dt);case 1:return ut.call(Dt,Ft[0]);case 2:return ut.call(Dt,Ft[0],Ft[1]);case 3:return ut.call(Dt,Ft[0],Ft[1],Ft[2])}return ut.apply(Dt,Ft)}function Bf(ut,Dt,Ft,fn){for(var lr=-1,Mr=ut==null?0:ut.length;++lr<Mr;){var co=ut[lr];Dt(fn,co,Ft(co),ut)}return fn}function ki(ut,Dt){for(var Ft=-1,fn=ut==null?0:ut.length;++Ft<fn&&Dt(ut[Ft],Ft,ut)!==!1;);return ut}function Ac(ut,Dt){for(var Ft=ut==null?0:ut.length;Ft--&&Dt(ut[Ft],Ft,ut)!==!1;);return ut}function Uf(ut,Dt){for(var Ft=-1,fn=ut==null?0:ut.length;++Ft<fn;)if(!Dt(ut[Ft],Ft,ut))return!1;return!0}function Ci(ut,Dt){for(var Ft=-1,fn=ut==null?0:ut.length,lr=0,Mr=[];++Ft<fn;){var co=ut[Ft];Dt(co,Ft,ut)&&(Mr[lr++]=co)}return Mr}function Ti(ut,Dt){return!!(ut!=null&&ut.length)&&su(ut,Dt,0)>-1}function Tc(ut,Dt,Ft){for(var fn=-1,lr=ut==null?0:ut.length;++fn<lr;)if(Ft(Dt,ut[fn]))return!0;return!1}function Ir(ut,Dt){for(var Ft=-1,fn=ut==null?0:ut.length,lr=Array(fn);++Ft<fn;)lr[Ft]=Dt(ut[Ft],Ft,ut);return lr}function oi(ut,Dt){for(var Ft=-1,fn=Dt.length,lr=ut.length;++Ft<fn;)ut[lr+Ft]=Dt[Ft];return ut}function As(ut,Dt,Ft,fn){var lr=-1,Mr=ut==null?0:ut.length;for(fn&&Mr&&(Ft=ut[++lr]);++lr<Mr;)Ft=Dt(Ft,ut[lr],lr,ut);return Ft}function Gf(ut,Dt,Ft,fn){var lr=ut==null?0:ut.length;for(fn&&lr&&(Ft=ut[--lr]);lr--;)Ft=Dt(Ft,ut[lr],lr,ut);return Ft}function Mc(ut,Dt){for(var Ft=-1,fn=ut==null?0:ut.length;++Ft<fn;)if(Dt(ut[Ft],Ft,ut))return!0;return!1}var Ts=ji("length");function Ga(ut,Dt,Ft){var fn;return Ft(ut,function(lr,Mr,co){if(Dt(lr,Mr,co))return fn=Mr,!1}),fn}function Di(ut,Dt,Ft,fn){for(var lr=ut.length,Mr=Ft+(fn?1:-1);fn?Mr--:++Mr<lr;)if(Dt(ut[Mr],Mr,ut))return Mr;return-1}function su(ut,Dt,Ft){return Dt==Dt?function(fn,lr,Mr){for(var co=Mr-1,T=fn.length;++co<T;)if(fn[co]===lr)return co;return-1}(ut,Dt,Ft):Di(ut,ha,Ft)}function Hi(ut,Dt,Ft,fn){for(var lr=Ft-1,Mr=ut.length;++lr<Mr;)if(fn(ut[lr],Dt))return lr;return-1}function ha(ut){return ut!=ut}function Tr(ut,Dt){var Ft=ut==null?0:ut.length;return Ft?cu(ut,Dt)/Ft:B}function ji(ut){return function(Dt){return Dt==null?h:Dt[ut]}}function Pa(ut){return function(Dt){return ut==null?h:ut[Dt]}}function fi(ut,Dt,Ft,fn,lr){return lr(ut,function(Mr,co,T){Ft=fn?(fn=!1,Mr):Dt(Ft,Mr,co,T)}),Ft}function cu(ut,Dt){for(var Ft,fn=-1,lr=ut.length;++fn<lr;){var Mr=Dt(ut[fn]);Mr!==h&&(Ft=Ft===h?Mr:Ft+Mr)}return Ft}function Il(ut,Dt){for(var Ft=-1,fn=Array(ut);++Ft<ut;)fn[Ft]=Dt(Ft);return fn}function Na(ut){return ut&&ut.slice(0,ii(ut)+1).replace(Dn,"")}function so(ut){return function(Dt){return ut(Dt)}}function Hu(ut,Dt){return Ir(Dt,function(Ft){return ut[Ft]})}function Va(ut,Dt){return ut.has(Dt)}function va(ut,Dt){for(var Ft=-1,fn=ut.length;++Ft<fn&&su(Dt,ut[Ft],0)>-1;);return Ft}function Pc(ut,Dt){for(var Ft=ut.length;Ft--&&su(Dt,ut[Ft],0)>-1;);return Ft}function Wd(ut,Dt){for(var Ft=ut.length,fn=0;Ft--;)ut[Ft]===Dt&&++fn;return fn}var Nc=Pa({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Uo=Pa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ll(ut){return"\\"+Lf[ut]}function Wa(ut){return Ec.test(ut)}function Xo(ut){var Dt=-1,Ft=Array(ut.size);return ut.forEach(function(fn,lr){Ft[++Dt]=[lr,fn]}),Ft}function Rc(ut,Dt){return function(Ft){return ut(Dt(Ft))}}function ra(ut,Dt){for(var Ft=-1,fn=ut.length,lr=0,Mr=[];++Ft<fn;){var co=ut[Ft];co!==Dt&&co!==w||(ut[Ft]=w,Mr[lr++]=Ft)}return Mr}function ya(ut){var Dt=-1,Ft=Array(ut.size);return ut.forEach(function(fn){Ft[++Dt]=fn}),Ft}function Ms(ut){var Dt=-1,Ft=Array(ut.size);return ut.forEach(function(fn){Ft[++Dt]=[fn,fn]}),Ft}function Ii(ut){return Wa(ut)?function(Dt){for(var Ft=wc.lastIndex=0;wc.test(Dt);)++Ft;return Ft}(ut):Ts(ut)}function Xi(ut){return Wa(ut)?function(Dt){return Dt.match(wc)||[]}(ut):function(Dt){return Dt.split("")}(ut)}function ii(ut){for(var Dt=ut.length;Dt--&&ko.test(ut.charAt(Dt)););return Dt}var oa=Pa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Mi=function ut(Dt){var Ft,fn=(Dt=Dt==null?Co:Mi.defaults(Co.Object(),Dt,Mi.pick(Co,Vd))).Array,lr=Dt.Date,Mr=Dt.Error,co=Dt.Function,T=Dt.Math,M=Dt.Object,$=Dt.RegExp,te=Dt.String,ye=Dt.TypeError,Ge=fn.prototype,vt=co.prototype,zt=M.prototype,bn=Dt["__core-js_shared__"],yr=vt.toString,ln=zt.hasOwnProperty,Vr=0,dr=(Ft=/[^.]+$/.exec(bn&&bn.keys&&bn.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",Cr=zt.toString,ia=yr.call(M),go=Co._,Yi=$("^"+yr.call(ln).replace(Ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pl=Ss?Dt.Buffer:h,hl=Dt.Symbol,Fl=Dt.Uint8Array,fu=pl?pl.allocUnsafe:h,za=Rc(M.getPrototypeOf,M),du=M.create,Yo=zt.propertyIsEnumerable,$l=Ge.splice,vl=hl?hl.isConcatSpreadable:h,Ha=hl?hl.iterator:h,Xa=hl?hl.toStringTag:h,Xu=function(){try{var d=Ja(M,"defineProperty");return d({},"",{}),d}catch{}}(),th=Dt.clearTimeout!==Co.clearTimeout&&Dt.clearTimeout,nh=lr&&lr.now!==Co.Date.now&&lr.now,zd=Dt.setTimeout!==Co.setTimeout&&Dt.setTimeout,kc=T.ceil,Yu=T.floor,Vf=M.getOwnPropertySymbols,rh=pl?pl.isBuffer:h,qu=Dt.isFinite,Cc=Ge.join,Wf=Rc(M.keys,M),Do=T.max,Li=T.min,zf=lr.now,Hf=Dt.parseInt,Ps=T.random,Bv=Ge.reverse,Ns=Ja(Dt,"DataView"),yl=Ja(Dt,"Map"),Dc=Ja(Dt,"Promise"),Ku=Ja(Dt,"Set"),pu=Ja(Dt,"WeakMap"),Rs=Ja(M,"create"),jc=pu&&new pu,hu={},Uv=Au(Ns),Ic=Au(yl),Gv=Au(Dc),Vv=Au(Ku),oh=Au(pu),Xf=hl?hl.prototype:h,Pi=Xf?Xf.valueOf:h,ih=Xf?Xf.toString:h;function re(d){if(To(d)&&!mr(d)&&!(d instanceof Pr)){if(d instanceof Ra)return d;if(ln.call(d,"__wrapped__"))return vd(d)}return new Ra(d)}var Zu=function(){function d(){}return function(m){if(!eo(m))return{};if(du)return du(m);d.prototype=m;var E=new d;return d.prototype=h,E}}();function Bl(){}function Ra(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=h}function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function bi(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var C=d[m];this.set(C[0],C[1])}}function Lr(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var C=d[m];this.set(C[0],C[1])}}function Ya(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var C=d[m];this.set(C[0],C[1])}}function Ul(d){var m=-1,E=d==null?0:d.length;for(this.__data__=new Ya;++m<E;)this.add(d[m])}function ma(d){var m=this.__data__=new Lr(d);this.size=m.size}function Yf(d,m){var E=mr(d),C=!E&&Mu(d),V=!E&&!C&&La(d),Z=!E&&!C&&!V&&Ze(d),de=E||C||V||Z,_e=de?Il(d.length,te):[],Le=_e.length;for(var pt in d)!m&&!ln.call(d,pt)||de&&(pt=="length"||V&&(pt=="offset"||pt=="parent")||Z&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||oo(pt,Le))||_e.push(pt);return _e}function qf(d){var m=d.length;return m?d[np(0,m-1)]:h}function Hd(d,m){return xl(di(d),vu(m,0,d.length))}function ah(d){return xl(di(d))}function Gl(d,m,E){(E!==h&&!ua(d[m],E)||E===h&&!(m in d))&&qa(d,m,E)}function jo(d,m,E){var C=d[m];ln.call(d,m)&&ua(C,E)&&(E!==h||m in d)||qa(d,m,E)}function ks(d,m){for(var E=d.length;E--;)if(ua(d[E][0],m))return E;return-1}function Xd(d,m,E,C){return vo(d,function(V,Z,de){m(C,V,E(V),de)}),C}function Vl(d,m){return d&&bl(m,It(m),d)}function qa(d,m,E){m=="__proto__"&&Xu?Xu(d,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):d[m]=E}function Lc(d,m){for(var E=-1,C=m.length,V=fn(C),Z=d==null;++E<C;)V[E]=Z?h:Vt(d,m[E]);return V}function vu(d,m,E){return d==d&&(E!==h&&(d=d<=E?d:E),m!==h&&(d=d>=m?d:m)),d}function ga(d,m,E,C,V,Z){var de,_e=1&m,Le=2&m,pt=4&m;if(E&&(de=V?E(d,C,V,Z):E(d)),de!==h)return de;if(!eo(d))return d;var mt=mr(d);if(mt){if(de=function(Pt){var Jt=Pt.length,fr=new Pt.constructor(Jt);return Jt&&typeof Pt[0]=="string"&&ln.call(Pt,"index")&&(fr.index=Pt.index,fr.input=Pt.input),fr}(d),!_e)return di(d,de)}else{var Ut=So(d),An=Ut==Y||Ut==H;if(La(d))return lp(d,_e);if(Ut==Se||Ut==W||An&&!V){if(de=Le||An?{}:Ou(d),!_e)return Le?function(Pt,Jt){return bl(Pt,Bs(Pt),Jt)}(d,function(Pt,Jt){return Pt&&bl(Jt,At(Jt),Pt)}(de,d)):function(Pt,Jt){return bl(Pt,$s(Pt),Jt)}(d,Vl(de,d))}else{if(!Gr[Ut])return V?d:{};de=function(Pt,Jt,fr){var gn=Pt.constructor;switch(Jt){case Ke:return Qu(Pt);case J:case L:return new gn(+Pt);case je:return function(rr,Dr){var Un=Dr?Qu(rr.buffer):rr.buffer;return new rr.constructor(Un,rr.byteOffset,rr.byteLength)}(Pt,fr);case at:case gt:case Mt:case Xt:case De:case ge:case Ae:case ht:case Wt:return fo(Pt,fr);case se:return new gn;case Re:case ae:return new gn(Pt);case Be:return function(rr){var Dr=new rr.constructor(rr.source,_r.exec(rr));return Dr.lastIndex=rr.lastIndex,Dr}(Pt);case Oe:return new gn;case ve:return ir=Pt,Pi?M(Pi.call(ir)):{}}var ir}(d,Ut,_e)}}Z||(Z=new ma);var En=Z.get(d);if(En)return En;Z.set(d,de),be(d)?d.forEach(function(Pt){de.add(ga(Pt,m,E,Pt,d,Z))}):_i(d)&&d.forEach(function(Pt,Jt){de.set(Jt,ga(Pt,m,E,Jt,d,Z))});var Yn=mt?h:(pt?Le?dd:qc:Le?At:It)(d);return ki(Yn||d,function(Pt,Jt){Yn&&(Pt=d[Jt=Pt]),jo(de,Jt,ga(Pt,m,E,Jt,d,Z))}),de}function Yd(d,m,E){var C=E.length;if(d==null)return!C;for(d=M(d);C--;){var V=E[C],Z=m[V],de=d[V];if(de===h&&!(V in d)||!Z(de))return!1}return!0}function qd(d,m,E){if(typeof d!="function")throw new ye(g);return ns(function(){d.apply(h,E)},m)}function Ka(d,m,E,C){var V=-1,Z=Ti,de=!0,_e=d.length,Le=[],pt=m.length;if(!_e)return Le;E&&(m=Ir(m,so(E))),C?(Z=Tc,de=!1):m.length>=200&&(Z=Va,de=!1,m=new Ul(m));e:for(;++V<_e;){var mt=d[V],Ut=E==null?mt:E(mt);if(mt=C||mt!==0?mt:0,de&&Ut==Ut){for(var An=pt;An--;)if(m[An]===Ut)continue e;Le.push(mt)}else Z(m,Ut,C)||Le.push(mt)}return Le}re.templateSettings={escape:Fe,evaluate:mn,interpolate:Kn,variable:"",imports:{_:re}},re.prototype=Bl.prototype,re.prototype.constructor=re,Ra.prototype=Zu(Bl.prototype),Ra.prototype.constructor=Ra,Pr.prototype=Zu(Bl.prototype),Pr.prototype.constructor=Pr,bi.prototype.clear=function(){this.__data__=Rs?Rs(null):{},this.size=0},bi.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},bi.prototype.get=function(d){var m=this.__data__;if(Rs){var E=m[d];return E===b?h:E}return ln.call(m,d)?m[d]:h},bi.prototype.has=function(d){var m=this.__data__;return Rs?m[d]!==h:ln.call(m,d)},bi.prototype.set=function(d,m){var E=this.__data__;return this.size+=this.has(d)?0:1,E[d]=Rs&&m===h?b:m,this},Lr.prototype.clear=function(){this.__data__=[],this.size=0},Lr.prototype.delete=function(d){var m=this.__data__,E=ks(m,d);return!(E<0)&&(E==m.length-1?m.pop():$l.call(m,E,1),--this.size,!0)},Lr.prototype.get=function(d){var m=this.__data__,E=ks(m,d);return E<0?h:m[E][1]},Lr.prototype.has=function(d){return ks(this.__data__,d)>-1},Lr.prototype.set=function(d,m){var E=this.__data__,C=ks(E,d);return C<0?(++this.size,E.push([d,m])):E[C][1]=m,this},Ya.prototype.clear=function(){this.size=0,this.__data__={hash:new bi,map:new(yl||Lr),string:new bi}},Ya.prototype.delete=function(d){var m=Fs(this,d).delete(d);return this.size-=m?1:0,m},Ya.prototype.get=function(d){return Fs(this,d).get(d)},Ya.prototype.has=function(d){return Fs(this,d).has(d)},Ya.prototype.set=function(d,m){var E=Fs(this,d),C=E.size;return E.set(d,m),this.size+=E.size==C?0:1,this},Ul.prototype.add=Ul.prototype.push=function(d){return this.__data__.set(d,b),this},Ul.prototype.has=function(d){return this.__data__.has(d)},ma.prototype.clear=function(){this.__data__=new Lr,this.size=0},ma.prototype.delete=function(d){var m=this.__data__,E=m.delete(d);return this.size=m.size,E},ma.prototype.get=function(d){return this.__data__.get(d)},ma.prototype.has=function(d){return this.__data__.has(d)},ma.prototype.set=function(d,m){var E=this.__data__;if(E instanceof Lr){var C=E.__data__;if(!yl||C.length<199)return C.push([d,m]),this.size=++E.size,this;E=this.__data__=new Ya(C)}return E.set(d,m),this.size=E.size,this};var vo=es(Rn),lh=es(lo,!0);function Kd(d,m){var E=!0;return vo(d,function(C,V,Z){return E=!!m(C,V,Z)}),E}function Io(d,m,E){for(var C=-1,V=d.length;++C<V;){var Z=d[C],de=m(Z);if(de!=null&&(_e===h?de==de&&!dt(de):E(de,_e)))var _e=de,Le=Z}return Le}function zr(d,m){var E=[];return vo(d,function(C,V,Z){m(C,V,Z)&&E.push(C)}),E}function qo(d,m,E,C,V){var Z=-1,de=d.length;for(E||(E=Zc),V||(V=[]);++Z<de;){var _e=d[Z];m>0&&E(_e)?m>1?qo(_e,m-1,E,C,V):oi(V,_e):C||(V[V.length]=_e)}return V}var Er=id(),ao=id(!0);function Rn(d,m){return d&&Er(d,m,It)}function lo(d,m){return d&&ao(d,m,It)}function Fc(d,m){return Ci(m,function(E){return Al(d[E])})}function ml(d,m){for(var E=0,C=(m=bu(m,d)).length;d!=null&&E<C;)d=d[tl(m[E++])];return E&&E==C?d:h}function Kf(d,m,E){var C=m(d);return mr(d)?C:oi(C,E(d))}function bo(d){return d==null?d===h?"[object Undefined]":"[object Null]":Xa&&Xa in M(d)?function(m){var E=ln.call(m,Xa),C=m[Xa];try{m[Xa]=h;var V=!0}catch{}var Z=Cr.call(m);return V&&(E?m[Xa]=C:delete m[Xa]),Z}(d):function(m){return Cr.call(m)}(d)}function xo(d,m){return d>m}function Zd(d,m){return d!=null&&ln.call(d,m)}function Jd(d,m){return d!=null&&m in M(d)}function $c(d,m,E){for(var C=E?Tc:Ti,V=d[0].length,Z=d.length,de=Z,_e=fn(Z),Le=1/0,pt=[];de--;){var mt=d[de];de&&m&&(mt=Ir(mt,so(m))),Le=Li(mt.length,Le),_e[de]=!E&&(m||V>=120&&mt.length>=120)?new Ul(de&&mt):h}mt=d[0];var Ut=-1,An=_e[0];e:for(;++Ut<V&&pt.length<Le;){var En=mt[Ut],Yn=m?m(En):En;if(En=E||En!==0?En:0,!(An?Va(An,Yn):C(pt,Yn,E))){for(de=Z;--de;){var Pt=_e[de];if(!(Pt?Va(Pt,Yn):C(d[de],Yn,E)))continue e}An&&An.push(Yn),pt.push(En)}}return pt}function Fi(d,m,E){var C=(d=Su(d,m=bu(m,d)))==null?d:d[tl($i(m))];return C==null?h:ro(C,d,E)}function Zf(d){return To(d)&&bo(d)==W}function Cs(d,m,E,C,V){return d===m||(d==null||m==null||!To(d)&&!To(m)?d!=d&&m!=m:function(Z,de,_e,Le,pt,mt){var Ut=mr(Z),An=mr(de),En=Ut?ee:So(Z),Yn=An?ee:So(de),Pt=(En=En==W?Se:En)==Se,Jt=(Yn=Yn==W?Se:Yn)==Se,fr=En==Yn;if(fr&&La(Z)){if(!La(de))return!1;Ut=!0,Pt=!1}if(fr&&!Pt)return mt||(mt=new ma),Ut||Ze(Z)?fd(Z,de,_e,Le,pt,mt):function(Un,er,Vo,rt,Ql,wi,Pu){switch(Vo){case je:if(Un.byteLength!=er.byteLength||Un.byteOffset!=er.byteOffset)return!1;Un=Un.buffer,er=er.buffer;case Ke:return!(Un.byteLength!=er.byteLength||!wi(new Fl(Un),new Fl(er)));case J:case L:case Re:return ua(+Un,+er);case G:return Un.name==er.name&&Un.message==er.message;case Be:case ae:return Un==er+"";case se:var us=Xo;case Oe:var bd=1&rt;if(us||(us=ya),Un.size!=er.size&&!bd)return!1;var Ep=Pu.get(Un);if(Ep)return Ep==er;rt|=2,Pu.set(Un,er);var sf=fd(us(Un),us(er),rt,Ql,wi,Pu);return Pu.delete(Un),sf;case ve:if(Pi)return Pi.call(Un)==Pi.call(er)}return!1}(Z,de,En,_e,Le,pt,mt);if(!(1&_e)){var gn=Pt&&ln.call(Z,"__wrapped__"),ir=Jt&&ln.call(de,"__wrapped__");if(gn||ir){var rr=gn?Z.value():Z,Dr=ir?de.value():de;return mt||(mt=new ma),pt(rr,Dr,_e,Le,mt)}}return fr?(mt||(mt=new ma),function(Un,er,Vo,rt,Ql,wi){var Pu=1&Vo,us=qc(Un),bd=us.length,Ep=qc(er).length;if(bd!=Ep&&!Pu)return!1;for(var sf=bd;sf--;){var qs=us[sf];if(!(Pu?qs in er:ln.call(er,qs)))return!1}var qv=wi.get(Un),Kv=wi.get(er);if(qv&&Kv)return qv==er&&Kv==Un;var Op=!0;wi.set(Un,er),wi.set(er,Un);for(var Th=Pu;++sf<bd;){var Ks=Un[qs=us[sf]],xp=er[qs];if(rt)var Zv=Pu?rt(xp,Ks,qs,er,Un,wi):rt(Ks,xp,qs,Un,er,wi);if(!(Zv===h?Ks===xp||Ql(Ks,xp,Vo,rt,wi):Zv)){Op=!1;break}Th||(Th=qs=="constructor")}if(Op&&!Th){var Zs=Un.constructor,Sp=er.constructor;Zs==Sp||!("constructor"in Un)||!("constructor"in er)||typeof Zs=="function"&&Zs instanceof Zs&&typeof Sp=="function"&&Sp instanceof Sp||(Op=!1)}return wi.delete(Un),wi.delete(er),Op}(Z,de,_e,Le,pt,mt)):!1}(d,m,E,C,Cs,V))}function ka(d,m,E,C){var V=E.length,Z=V,de=!C;if(d==null)return!Z;for(d=M(d);V--;){var _e=E[V];if(de&&_e[2]?_e[1]!==d[_e[0]]:!(_e[0]in d))return!1}for(;++V<Z;){var Le=(_e=E[V])[0],pt=d[Le],mt=_e[1];if(de&&_e[2]){if(pt===h&&!(Le in d))return!1}else{var Ut=new ma;if(C)var An=C(pt,mt,Le,d,m,Ut);if(!(An===h?Cs(mt,pt,3,C,Ut):An))return!1}}return!0}function yu(d){return!(!eo(d)||(m=d,dr&&dr in m))&&(Al(d)?Yi:Bo).test(Au(d));var m}function Wl(d){return typeof d=="function"?d:d==null?zn:typeof d=="object"?mr(d)?ep(d[0],d[1]):Qd(d):le(d)}function Ca(d){if(!xu(d))return Wf(d);var m=[];for(var E in M(d))ln.call(d,E)&&E!="constructor"&&m.push(E);return m}function uh(d){if(!eo(d))return function(V){var Z=[];if(V!=null)for(var de in M(V))Z.push(de);return Z}(d);var m=xu(d),E=[];for(var C in d)(C!="constructor"||!m&&ln.call(d,C))&&E.push(C);return E}function gl(d,m){return d<m}function ba(d,m){var E=-1,C=sa(d)?fn(d.length):[];return vo(d,function(V,Z,de){C[++E]=m(V,Z,de)}),C}function Qd(d){var m=Kc(d);return m.length==1&&m[0][2]?Gs(m[0][0],m[0][1]):function(E){return E===d||ka(E,d,m)}}function ep(d,m){return Yl(d)&&Ol(m)?Gs(tl(d),m):function(E){var C=Vt(E,d);return C===h&&C===m?_t(E,d):Cs(m,C,3)}}function Jf(d,m,E,C,V){d!==m&&Er(m,function(Z,de){if(V||(V=new ma),eo(Z))(function(Le,pt,mt,Ut,An,En,Yn){var Pt=kt(Le,mt),Jt=kt(pt,mt),fr=Yn.get(Jt);if(fr)return void Gl(Le,mt,fr);var gn=En?En(Pt,Jt,mt+"",Le,pt,Yn):h,ir=gn===h;if(ir){var rr=mr(Jt),Dr=!rr&&La(Jt),Un=!rr&&!Dr&&Ze(Jt);gn=Jt,rr||Dr||Un?mr(Pt)?gn=Pt:Jo(Pt)?gn=di(Pt):Dr?(ir=!1,gn=lp(Jt,!0)):Un?(ir=!1,gn=fo(Jt,!0)):gn=[]:I(Jt)||Mu(Jt)?(gn=Pt,Mu(Pt)?gn=Rt(Pt):eo(Pt)&&!Al(Pt)||(gn=Ou(Jt))):ir=!1}ir&&(Yn.set(Jt,gn),An(gn,Jt,Ut,En,Yn),Yn.delete(Jt)),Gl(Le,mt,gn)})(d,m,de,E,Jf,C,V);else{var _e=C?C(kt(d,de),Z,de+"",d,m,V):h;_e===h&&(_e=Z),Gl(d,de,_e)}},At)}function sh(d,m){var E=d.length;if(E)return oo(m+=m<0?E:0,E)?d[m]:h}function ch(d,m,E){m=m.length?Ir(m,function(Z){return mr(Z)?function(de){return ml(de,Z.length===1?Z[0]:Z)}:Z}):[zn];var C=-1;m=Ir(m,so(Jn()));var V=ba(d,function(Z,de,_e){var Le=Ir(m,function(pt){return pt(Z)});return{criteria:Le,index:++C,value:Z}});return function(Z,de){var _e=Z.length;for(Z.sort(de);_e--;)Z[_e]=Z[_e].value;return Z}(V,function(Z,de){return function(_e,Le,pt){for(var mt=-1,Ut=_e.criteria,An=Le.criteria,En=Ut.length,Yn=pt.length;++mt<En;){var Pt=Wc(Ut[mt],An[mt]);if(Pt)return mt>=Yn?Pt:Pt*(pt[mt]=="desc"?-1:1)}return _e.index-Le.index}(Z,de,E)})}function fh(d,m,E){for(var C=-1,V=m.length,Z={};++C<V;){var de=m[C],_e=ml(d,de);E(_e,de)&&mu(Z,bu(de,d),_e)}return Z}function tp(d,m,E,C){var V=C?Hi:su,Z=-1,de=m.length,_e=d;for(d===m&&(m=di(m)),E&&(_e=Ir(d,so(E)));++Z<de;)for(var Le=0,pt=m[Z],mt=E?E(pt):pt;(Le=V(_e,mt,Le,C))>-1;)_e!==d&&$l.call(_e,Le,1),$l.call(d,Le,1);return d}function Ds(d,m){for(var E=d?m.length:0,C=E-1;E--;){var V=m[E];if(E==C||V!==Z){var Z=V;oo(V)?$l.call(d,V,1):td(d,V)}}return d}function np(d,m){return d+Yu(Ps()*(m-d+1))}function Bc(d,m){var E="";if(!d||m<1||m>k)return E;do m%2&&(E+=d),(m=Yu(m/2))&&(d+=d);while(m);return E}function Or(d,m){return Qc(Jc(d,m,zn),d+"")}function Wv(d){return qf(gr(d))}function rp(d,m){var E=gr(d);return xl(E,vu(m,0,E.length))}function mu(d,m,E,C){if(!eo(d))return d;for(var V=-1,Z=(m=bu(m,d)).length,de=Z-1,_e=d;_e!=null&&++V<Z;){var Le=tl(m[V]),pt=E;if(Le==="__proto__"||Le==="constructor"||Le==="prototype")return d;if(V!=de){var mt=_e[Le];(pt=C?C(mt,Le,_e):h)===h&&(pt=eo(mt)?mt:oo(m[V+1])?[]:{})}jo(_e,Le,pt),_e=_e[Le]}return d}var Uc=jc?function(d,m){return jc.set(d,m),d}:zn,zv=Xu?function(d,m){return Xu(d,"toString",{configurable:!0,enumerable:!1,value:Nr(m),writable:!0})}:zn;function Hv(d){return xl(gr(d))}function Da(d,m,E){var C=-1,V=d.length;m<0&&(m=-m>V?0:V+m),(E=E>V?V:E)<0&&(E+=V),V=m>E?0:E-m>>>0,m>>>=0;for(var Z=fn(V);++C<V;)Z[C]=d[C+m];return Z}function op(d,m){var E;return vo(d,function(C,V,Z){return!(E=m(C,V,Z))}),!!E}function Qf(d,m,E){var C=0,V=d==null?C:d.length;if(typeof m=="number"&&m==m&&V<=2147483647){for(;C<V;){var Z=C+V>>>1,de=d[Z];de!==null&&!dt(de)&&(E?de<=m:de<m)?C=Z+1:V=Z}return V}return ed(d,m,zn,E)}function ed(d,m,E,C){var V=0,Z=d==null?0:d.length;if(Z===0)return 0;for(var de=(m=E(m))!=m,_e=m===null,Le=dt(m),pt=m===h;V<Z;){var mt=Yu((V+Z)/2),Ut=E(d[mt]),An=Ut!==h,En=Ut===null,Yn=Ut==Ut,Pt=dt(Ut);if(de)var Jt=C||Yn;else Jt=pt?Yn&&(C||An):_e?Yn&&An&&(C||!En):Le?Yn&&An&&!En&&(C||!Pt):!En&&!Pt&&(C?Ut<=m:Ut<m);Jt?V=mt+1:Z=mt}return Li(Z,4294967294)}function dh(d,m){for(var E=-1,C=d.length,V=0,Z=[];++E<C;){var de=d[E],_e=m?m(de):de;if(!E||!ua(_e,Le)){var Le=_e;Z[V++]=de===0?0:de}}return Z}function ip(d){return typeof d=="number"?d:dt(d)?B:+d}function aa(d){if(typeof d=="string")return d;if(mr(d))return Ir(d,aa)+"";if(dt(d))return ih?ih.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function gu(d,m,E){var C=-1,V=Ti,Z=d.length,de=!0,_e=[],Le=_e;if(E)de=!1,V=Tc;else if(Z>=200){var pt=m?null:sd(d);if(pt)return ya(pt);de=!1,V=Va,Le=new Ul}else Le=m?[]:_e;e:for(;++C<Z;){var mt=d[C],Ut=m?m(mt):mt;if(mt=E||mt!==0?mt:0,de&&Ut==Ut){for(var An=Le.length;An--;)if(Le[An]===Ut)continue e;m&&Le.push(Ut),_e.push(mt)}else V(Le,Ut,E)||(Le!==_e&&Le.push(Ut),_e.push(mt))}return _e}function td(d,m){return(d=Su(d,m=bu(m,d)))==null||delete d[tl($i(m))]}function Ju(d,m,E,C){return mu(d,m,E(ml(d,m)),C)}function Gc(d,m,E,C){for(var V=d.length,Z=C?V:-1;(C?Z--:++Z<V)&&m(d[Z],Z,d););return E?Da(d,C?0:Z,C?Z+1:V):Da(d,C?Z+1:0,C?V:Z)}function ph(d,m){var E=d;return E instanceof Pr&&(E=E.value()),As(m,function(C,V){return V.func.apply(V.thisArg,oi([C],V.args))},E)}function Vc(d,m,E){var C=d.length;if(C<2)return C?gu(d[0]):[];for(var V=-1,Z=fn(C);++V<C;)for(var de=d[V],_e=-1;++_e<C;)_e!=V&&(Z[V]=Ka(Z[V]||de,d[_e],m,E));return gu(qo(Z,1),m,E)}function nd(d,m,E){for(var C=-1,V=d.length,Z=m.length,de={};++C<V;){var _e=C<Z?m[C]:h;E(de,d[C],_e)}return de}function rd(d){return Jo(d)?d:[]}function od(d){return typeof d=="function"?d:zn}function bu(d,m){return mr(d)?d:Yl(d,m)?[d]:hp(bt(d))}var hh=Or;function _u(d,m,E){var C=d.length;return E=E===h?C:E,!m&&E>=C?d:Da(d,m,E)}var ap=th||function(d){return Co.clearTimeout(d)};function lp(d,m){if(m)return d.slice();var E=d.length,C=fu?fu(E):new d.constructor(E);return d.copy(C),C}function Qu(d){var m=new d.constructor(d.byteLength);return new Fl(m).set(new Fl(d)),m}function fo(d,m){var E=m?Qu(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.length)}function Wc(d,m){if(d!==m){var E=d!==h,C=d===null,V=d==d,Z=dt(d),de=m!==h,_e=m===null,Le=m==m,pt=dt(m);if(!_e&&!pt&&!Z&&d>m||Z&&de&&Le&&!_e&&!pt||C&&de&&Le||!E&&Le||!V)return 1;if(!C&&!Z&&!pt&&d<m||pt&&E&&V&&!C&&!Z||_e&&E&&V||!de&&V||!Le)return-1}return 0}function _o(d,m,E,C){for(var V=-1,Z=d.length,de=E.length,_e=-1,Le=m.length,pt=Do(Z-de,0),mt=fn(Le+pt),Ut=!C;++_e<Le;)mt[_e]=m[_e];for(;++V<de;)(Ut||V<Z)&&(mt[E[V]]=d[V]);for(;pt--;)mt[_e++]=d[V++];return mt}function zl(d,m,E,C){for(var V=-1,Z=d.length,de=-1,_e=E.length,Le=-1,pt=m.length,mt=Do(Z-_e,0),Ut=fn(mt+pt),An=!C;++V<mt;)Ut[V]=d[V];for(var En=V;++Le<pt;)Ut[En+Le]=m[Le];for(;++de<_e;)(An||V<Z)&&(Ut[En+E[de]]=d[V++]);return Ut}function di(d,m){var E=-1,C=d.length;for(m||(m=fn(C));++E<C;)m[E]=d[E];return m}function bl(d,m,E,C){var V=!E;E||(E={});for(var Z=-1,de=m.length;++Z<de;){var _e=m[Z],Le=C?C(E[_e],d[_e],_e,E,d):h;Le===h&&(Le=d[_e]),V?qa(E,_e,Le):jo(E,_e,Le)}return E}function Hl(d,m){return function(E,C){var V=mr(E)?Bf:Xd,Z=m?m():{};return V(E,d,Jn(C,2),Z)}}function wu(d){return Or(function(m,E){var C=-1,V=E.length,Z=V>1?E[V-1]:h,de=V>2?E[2]:h;for(Z=d.length>3&&typeof Z=="function"?(V--,Z):h,de&&Lo(E[0],E[1],de)&&(Z=V<3?h:Z,V=1),m=M(m);++C<V;){var _e=E[C];_e&&d(m,_e,C,Z)}return m})}function es(d,m){return function(E,C){if(E==null)return E;if(!sa(E))return d(E,C);for(var V=E.length,Z=m?V:-1,de=M(E);(m?Z--:++Z<V)&&C(de[Z],Z,de)!==!1;);return E}}function id(d){return function(m,E,C){for(var V=-1,Z=M(m),de=C(m),_e=de.length;_e--;){var Le=de[d?_e:++V];if(E(Z[Le],Le,Z)===!1)break}return m}}function ad(d){return function(m){var E=Wa(m=bt(m))?Xi(m):h,C=E?E[0]:m.charAt(0),V=E?_u(E,1).join(""):m.slice(1);return C[d]()+V}}function _l(d){return function(m){return As(Eo(sr(m).replace(jf,"")),d,"")}}function ts(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=Zu(d.prototype),C=d.apply(E,m);return eo(C)?C:E}}function ld(d){return function(m,E,C){var V=M(m);if(!sa(m)){var Z=Jn(E,3);m=It(m),E=function(_e){return Z(V[_e],_e,V)}}var de=d(m,E,C);return de>-1?V[Z?m[de]:de]:h}}function zc(d){return El(function(m){var E=m.length,C=E,V=Ra.prototype.thru;for(d&&m.reverse();C--;){var Z=m[C];if(typeof Z!="function")throw new ye(g);if(V&&!de&&Ls(Z)=="wrapper")var de=new Ra([],!0)}for(C=de?C:E;++C<E;){var _e=Ls(Z=m[C]),Le=_e=="wrapper"?pd(Z):h;de=Le&&Qa(Le[0])&&Le[1]==424&&!Le[4].length&&Le[9]==1?de[Ls(Le[0])].apply(de,Le[3]):Z.length==1&&Qa(Z)?de[_e]():de.thru(Z)}return function(){var pt=arguments,mt=pt[0];if(de&&pt.length==1&&mr(mt))return de.plant(mt).value();for(var Ut=0,An=E?m[Ut].apply(this,pt):mt;++Ut<E;)An=m[Ut].call(this,An);return An}})}function Eu(d,m,E,C,V,Z,de,_e,Le,pt){var mt=m&A,Ut=1&m,An=2&m,En=24&m,Yn=512&m,Pt=An?h:ts(d);return function Jt(){for(var fr=arguments.length,gn=fn(fr),ir=fr;ir--;)gn[ir]=arguments[ir];if(En)var rr=Xl(Jt),Dr=Wd(gn,rr);if(C&&(gn=_o(gn,C,V,En)),Z&&(gn=zl(gn,Z,de,En)),fr-=Dr,En&&fr<pt){var Un=ra(gn,rr);return Xc(d,m,Eu,Jt.placeholder,E,gn,Un,_e,Le,pt-fr)}var er=Ut?E:this,Vo=An?er[d]:d;return fr=gn.length,_e?gn=Vs(gn,_e):Yn&&fr>1&&gn.reverse(),mt&&Le<fr&&(gn.length=Le),this&&this!==Co&&this instanceof Jt&&(Vo=Pt||ts(Vo)),Vo.apply(er,gn)}}function up(d,m){return function(E,C){return function(V,Z,de,_e){return Rn(V,function(Le,pt,mt){Z(_e,de(Le),pt,mt)}),_e}(E,d,m(C),{})}}function js(d,m){return function(E,C){var V;if(E===h&&C===h)return m;if(E!==h&&(V=E),C!==h){if(V===h)return C;typeof E=="string"||typeof C=="string"?(E=aa(E),C=aa(C)):(E=ip(E),C=ip(C)),V=d(E,C)}return V}}function ud(d){return El(function(m){return m=Ir(m,so(Jn())),Or(function(E){var C=this;return d(m,function(V){return ro(V,C,E)})})})}function Hc(d,m){var E=(m=m===h?" ":aa(m)).length;if(E<2)return E?Bc(m,d):m;var C=Bc(m,kc(d/Ii(m)));return Wa(m)?_u(Xi(C),0,d).join(""):C.slice(0,d)}function wl(d){return function(m,E,C){return C&&typeof C!="number"&&Lo(m,E,C)&&(E=C=h),m=Ct(m),E===h?(E=m,m=0):E=Ct(E),function(V,Z,de,_e){for(var Le=-1,pt=Do(kc((Z-V)/(de||1)),0),mt=fn(pt);pt--;)mt[_e?pt:++Le]=V,V+=de;return mt}(m,E,C=C===h?m<E?1:-1:Ct(C),d)}}function Is(d){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Bt(m),E=Bt(E)),d(m,E)}}function Xc(d,m,E,C,V,Z,de,_e,Le,pt){var mt=8&m;m|=mt?S:P,4&(m&=~(mt?P:S))||(m&=-4);var Ut=[d,m,V,mt?Z:h,mt?de:h,mt?h:Z,mt?h:de,_e,Le,pt],An=E.apply(h,Ut);return Qa(d)&&dp(An,Ut),An.placeholder=C,hd(An,d,m)}function Yc(d){var m=T[d];return function(E,C){if(E=Bt(E),(C=C==null?0:Li(ct(C),292))&&qu(E)){var V=(bt(E)+"e").split("e");return+((V=(bt(m(V[0]+"e"+(+V[1]+C)))+"e").split("e"))[0]+"e"+(+V[1]-C))}return m(E)}}var sd=Ku&&1/ya(new Ku([,-0]))[1]==j?function(d){return new Ku(d)}:tt;function cd(d){return function(m){var E=So(m);return E==se?Xo(m):E==Oe?Ms(m):function(C,V){return Ir(V,function(Z){return[Z,C[Z]]})}(m,d(m))}}function Za(d,m,E,C,V,Z,de,_e){var Le=2&m;if(!Le&&typeof d!="function")throw new ye(g);var pt=C?C.length:0;if(pt||(m&=-97,C=V=h),de=de===h?de:Do(ct(de),0),_e=_e===h?_e:ct(_e),pt-=V?V.length:0,m&P){var mt=C,Ut=V;C=V=h}var An=Le?h:pd(d),En=[d,m,E,C,V,mt,Ut,Z,de,_e];if(An&&function(Pt,Jt){var fr=Pt[1],gn=Jt[1],ir=fr|gn,rr=ir<131,Dr=gn==A&&fr==8||gn==A&&fr==R&&Pt[7].length<=Jt[8]||gn==384&&Jt[7].length<=Jt[8]&&fr==8;if(!rr&&!Dr)return Pt;1&gn&&(Pt[2]=Jt[2],ir|=1&fr?0:4);var Un=Jt[3];if(Un){var er=Pt[3];Pt[3]=er?_o(er,Un,Jt[4]):Un,Pt[4]=er?ra(Pt[3],w):Jt[4]}(Un=Jt[5])&&(er=Pt[5],Pt[5]=er?zl(er,Un,Jt[6]):Un,Pt[6]=er?ra(Pt[5],w):Jt[6]),(Un=Jt[7])&&(Pt[7]=Un),gn&A&&(Pt[8]=Pt[8]==null?Jt[8]:Li(Pt[8],Jt[8])),Pt[9]==null&&(Pt[9]=Jt[9]),Pt[0]=Jt[0],Pt[1]=ir}(En,An),d=En[0],m=En[1],E=En[2],C=En[3],V=En[4],!(_e=En[9]=En[9]===h?Le?0:d.length:Do(En[9]-pt,0))&&24&m&&(m&=-25),m&&m!=1)Yn=m==8||m==O?function(Pt,Jt,fr){var gn=ts(Pt);return function ir(){for(var rr=arguments.length,Dr=fn(rr),Un=rr,er=Xl(ir);Un--;)Dr[Un]=arguments[Un];var Vo=rr<3&&Dr[0]!==er&&Dr[rr-1]!==er?[]:ra(Dr,er);return(rr-=Vo.length)<fr?Xc(Pt,Jt,Eu,ir.placeholder,h,Dr,Vo,h,h,fr-rr):ro(this&&this!==Co&&this instanceof ir?gn:Pt,this,Dr)}}(d,m,_e):m!=S&&m!=33||V.length?Eu.apply(h,En):function(Pt,Jt,fr,gn){var ir=1&Jt,rr=ts(Pt);return function Dr(){for(var Un=-1,er=arguments.length,Vo=-1,rt=gn.length,Ql=fn(rt+er),wi=this&&this!==Co&&this instanceof Dr?rr:Pt;++Vo<rt;)Ql[Vo]=gn[Vo];for(;er--;)Ql[Vo++]=arguments[++Un];return ro(wi,ir?fr:this,Ql)}}(d,m,E,C);else var Yn=function(Pt,Jt,fr){var gn=1&Jt,ir=ts(Pt);return function rr(){return(this&&this!==Co&&this instanceof rr?ir:Pt).apply(gn?fr:this,arguments)}}(d,m,E);return hd((An?Uc:dp)(Yn,En),d,m)}function sp(d,m,E,C){return d===h||ua(d,zt[E])&&!ln.call(C,E)?m:d}function cp(d,m,E,C,V,Z){return eo(d)&&eo(m)&&(Z.set(m,d),Jf(d,m,h,cp,Z),Z.delete(m)),d}function fp(d){return I(d)?h:d}function fd(d,m,E,C,V,Z){var de=1&E,_e=d.length,Le=m.length;if(_e!=Le&&!(de&&Le>_e))return!1;var pt=Z.get(d),mt=Z.get(m);if(pt&&mt)return pt==m&&mt==d;var Ut=-1,An=!0,En=2&E?new Ul:h;for(Z.set(d,m),Z.set(m,d);++Ut<_e;){var Yn=d[Ut],Pt=m[Ut];if(C)var Jt=de?C(Pt,Yn,Ut,m,d,Z):C(Yn,Pt,Ut,d,m,Z);if(Jt!==h){if(Jt)continue;An=!1;break}if(En){if(!Mc(m,function(fr,gn){if(!Va(En,gn)&&(Yn===fr||V(Yn,fr,E,C,Z)))return En.push(gn)})){An=!1;break}}else if(Yn!==Pt&&!V(Yn,Pt,E,C,Z)){An=!1;break}}return Z.delete(d),Z.delete(m),An}function El(d){return Qc(Jc(d,h,mp),d+"")}function qc(d){return Kf(d,It,$s)}function dd(d){return Kf(d,At,Bs)}var pd=jc?function(d){return jc.get(d)}:tt;function Ls(d){for(var m=d.name+"",E=hu[m],C=ln.call(hu,m)?E.length:0;C--;){var V=E[C],Z=V.func;if(Z==null||Z==d)return V.name}return m}function Xl(d){return(ln.call(re,"placeholder")?re:d).placeholder}function Jn(){var d=re.iteratee||uo;return d=d===uo?Wl:d,arguments.length?d(arguments[0],arguments[1]):d}function Fs(d,m){var E,C,V=d.__data__;return((C=typeof(E=m))=="string"||C=="number"||C=="symbol"||C=="boolean"?E!=="__proto__":E===null)?V[typeof m=="string"?"string":"hash"]:V.map}function Kc(d){for(var m=It(d),E=m.length;E--;){var C=m[E],V=d[C];m[E]=[C,V,Ol(V)]}return m}function Ja(d,m){var E=function(C,V){return C==null?h:C[V]}(d,m);return yu(E)?E:h}var $s=Vf?function(d){return d==null?[]:(d=M(d),Ci(Vf(d),function(m){return Yo.call(d,m)}))}:Ue,Bs=Vf?function(d){for(var m=[];d;)oi(m,$s(d)),d=za(d);return m}:Ue,So=bo;function Us(d,m,E){for(var C=-1,V=(m=bu(m,d)).length,Z=!1;++C<V;){var de=tl(m[C]);if(!(Z=d!=null&&E(d,de)))break;d=d[de]}return Z||++C!=V?Z:!!(V=d==null?0:d.length)&&Zl(V)&&oo(de,V)&&(mr(d)||Mu(d))}function Ou(d){return typeof d.constructor!="function"||xu(d)?{}:Zu(za(d))}function Zc(d){return mr(d)||Mu(d)||!!(vl&&d&&d[vl])}function oo(d,m){var E=typeof d;return!!(m=m??k)&&(E=="number"||E!="symbol"&&xn.test(d))&&d>-1&&d%1==0&&d<m}function Lo(d,m,E){if(!eo(E))return!1;var C=typeof m;return!!(C=="number"?sa(E)&&oo(m,E.length):C=="string"&&m in E)&&ua(E[m],d)}function Yl(d,m){if(mr(d))return!1;var E=typeof d;return!(E!="number"&&E!="symbol"&&E!="boolean"&&d!=null&&!dt(d))||$n.test(d)||!ne.test(d)||m!=null&&d in M(m)}function Qa(d){var m=Ls(d),E=re[m];if(typeof E!="function"||!(m in Pr.prototype))return!1;if(d===E)return!0;var C=pd(E);return!!C&&d===C[0]}(Ns&&So(new Ns(new ArrayBuffer(1)))!=je||yl&&So(new yl)!=se||Dc&&So(Dc.resolve())!=ze||Ku&&So(new Ku)!=Oe||pu&&So(new pu)!=Pe)&&(So=function(d){var m=bo(d),E=m==Se?d.constructor:h,C=E?Au(E):"";if(C)switch(C){case Uv:return je;case Ic:return se;case Gv:return ze;case Vv:return Oe;case oh:return Pe}return m});var el=bn?Al:He;function xu(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||zt)}function Ol(d){return d==d&&!eo(d)}function Gs(d,m){return function(E){return E!=null&&E[d]===m&&(m!==h||d in M(E))}}function Jc(d,m,E){return m=Do(m===h?d.length-1:m,0),function(){for(var C=arguments,V=-1,Z=Do(C.length-m,0),de=fn(Z);++V<Z;)de[V]=C[m+V];V=-1;for(var _e=fn(m+1);++V<m;)_e[V]=C[V];return _e[m]=E(de),ro(d,this,_e)}}function Su(d,m){return m.length<2?d:ml(d,Da(m,0,-1))}function Vs(d,m){for(var E=d.length,C=Li(m.length,E),V=di(d);C--;){var Z=m[C];d[C]=oo(Z,E)?V[Z]:h}return d}function kt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var dp=pp(Uc),ns=zd||function(d,m){return Co.setTimeout(d,m)},Qc=pp(zv);function hd(d,m,E){var C=m+"";return Qc(d,function(V,Z){var de=Z.length;if(!de)return V;var _e=de-1;return Z[_e]=(de>1?"& ":"")+Z[_e],Z=Z.join(de>2?", ":" "),V.replace(Ee,`{
/* [wrapped with `+Z+`] */
`)}(C,function(V,Z){return ki(X,function(de){var _e="_."+de[0];Z&de[1]&&!Ti(V,_e)&&V.push(_e)}),V.sort()}(function(V){var Z=V.match(Xe);return Z?Z[1].split(Ce):[]}(C),E)))}function pp(d){var m=0,E=0;return function(){var C=zf(),V=16-(C-E);if(E=C,V>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(h,arguments)}}function xl(d,m){var E=-1,C=d.length,V=C-1;for(m=m===h?C:m;++E<m;){var Z=np(E,V),de=d[Z];d[Z]=d[E],d[E]=de}return d.length=m,d}var hp=function(d){var m=Tu(d,function(C){return E.size===500&&E.clear(),C}),E=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(xr,function(E,C,V,Z){m.push(V?Z.replace(qt,"$1"):C||E)}),m});function tl(d){if(typeof d=="string"||dt(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function Au(d){if(d!=null){try{return yr.call(d)}catch{}try{return d+""}catch{}}return""}function vd(d){if(d instanceof Pr)return d.clone();var m=new Ra(d.__wrapped__,d.__chain__);return m.__actions__=di(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var vh=Or(function(d,m){return Jo(d)?Ka(d,qo(m,1,Jo,!0)):[]}),yh=Or(function(d,m){var E=$i(m);return Jo(E)&&(E=h),Jo(d)?Ka(d,qo(m,1,Jo,!0),Jn(E,2)):[]}),mh=Or(function(d,m){var E=$i(m);return Jo(E)&&(E=h),Jo(d)?Ka(d,qo(m,1,Jo,!0),h,E):[]});function vp(d,m,E){var C=d==null?0:d.length;if(!C)return-1;var V=E==null?0:ct(E);return V<0&&(V=Do(C+V,0)),Di(d,Jn(m,3),V)}function yp(d,m,E){var C=d==null?0:d.length;if(!C)return-1;var V=C-1;return E!==h&&(V=ct(E),V=E<0?Do(C+V,0):Li(V,C-1)),Di(d,Jn(m,3),V,!0)}function mp(d){return d!=null&&d.length?qo(d,1):[]}function gp(d){return d&&d.length?d[0]:h}var gh=Or(function(d){var m=Ir(d,rd);return m.length&&m[0]===d[0]?$c(m):[]}),bh=Or(function(d){var m=$i(d),E=Ir(d,rd);return m===$i(E)?m=h:E.pop(),E.length&&E[0]===d[0]?$c(E,Jn(m,2)):[]}),_h=Or(function(d){var m=$i(d),E=Ir(d,rd);return(m=typeof m=="function"?m:h)&&E.pop(),E.length&&E[0]===d[0]?$c(E,h,m):[]});function $i(d){var m=d==null?0:d.length;return m?d[m-1]:h}var rs=Or(ef);function ef(d,m){return d&&d.length&&m&&m.length?tp(d,m):d}var la=El(function(d,m){var E=d==null?0:d.length,C=Lc(d,m);return Ds(d,Ir(m,function(V){return oo(V,E)?+V:V}).sort(Wc)),C});function ja(d){return d==null?d:Bv.call(d)}var yd=Or(function(d){return gu(qo(d,1,Jo,!0))}),Bi=Or(function(d){var m=$i(d);return Jo(m)&&(m=h),gu(qo(d,1,Jo,!0),Jn(m,2))}),tf=Or(function(d){var m=$i(d);return m=typeof m=="function"?m:h,gu(qo(d,1,Jo,!0),h,m)});function os(d){if(!d||!d.length)return[];var m=0;return d=Ci(d,function(E){if(Jo(E))return m=Do(E.length,m),!0}),Il(m,function(E){return Ir(d,ji(E))})}function Ws(d,m){if(!d||!d.length)return[];var E=os(d);return m==null?E:Ir(E,function(C){return ro(m,h,C)})}var nf=Or(function(d,m){return Jo(d)?Ka(d,m):[]}),rf=Or(function(d){return Vc(Ci(d,Jo))}),zs=Or(function(d){var m=$i(d);return Jo(m)&&(m=h),Vc(Ci(d,Jo),Jn(m,2))}),Hs=Or(function(d){var m=$i(d);return m=typeof m=="function"?m:h,Vc(Ci(d,Jo),h,m)}),is=Or(os),ql=Or(function(d){var m=d.length,E=m>1?d[m-1]:h;return E=typeof E=="function"?(d.pop(),E):h,Ws(d,E)});function Ko(d){var m=re(d);return m.__chain__=!0,m}function of(d,m){return m(d)}var af=El(function(d){var m=d.length,E=m?d[0]:0,C=this.__wrapped__,V=function(Z){return Lc(Z,d)};return!(m>1||this.__actions__.length)&&C instanceof Pr&&oo(E)?((C=C.slice(E,+E+(m?1:0))).__actions__.push({func:of,args:[V],thisArg:h}),new Ra(C,this.__chain__).thru(function(Z){return m&&!Z.length&&Z.push(h),Z})):this.thru(V)}),Kl=Hl(function(d,m,E){ln.call(d,E)?++d[E]:qa(d,E,1)}),bp=ld(vp),Ui=ld(yp);function Zo(d,m){return(mr(d)?ki:vo)(d,Jn(m,3))}function wh(d,m){return(mr(d)?Ac:lh)(d,Jn(m,3))}var Ia=Hl(function(d,m,E){ln.call(d,E)?d[E].push(m):qa(d,E,[m])}),Fn=Or(function(d,m,E){var C=-1,V=typeof m=="function",Z=sa(d)?fn(d.length):[];return vo(d,function(de){Z[++C]=V?ro(m,de,E):Fi(de,m,E)}),Z}),md=Hl(function(d,m,E){qa(d,E,m)});function as(d,m){return(mr(d)?Ir:ba)(d,Jn(m,3))}var gd=Hl(function(d,m,E){d[E?0:1].push(m)},function(){return[[],[]]}),Eh=Or(function(d,m){if(d==null)return[];var E=m.length;return E>1&&Lo(d,m[0],m[1])?m=[]:E>2&&Lo(m[0],m[1],m[2])&&(m=[m[0]]),ch(d,qo(m,1),[])}),Xs=nh||function(){return Co.Date.now()};function Oh(d,m,E){return m=E?h:m,m=d&&m==null?d.length:m,Za(d,A,h,h,h,h,m)}function nl(d,m){var E;if(typeof m!="function")throw new ye(g);return d=ct(d),function(){return--d>0&&(E=m.apply(this,arguments)),d<=1&&(m=h),E}}var Ys=Or(function(d,m,E){var C=1;if(E.length){var V=ra(E,Xl(Ys));C|=S}return Za(d,C,m,E,V)}),ls=Or(function(d,m,E){var C=3;if(E.length){var V=ra(E,Xl(ls));C|=S}return Za(m,C,d,E,V)});function rl(d,m,E){var C,V,Z,de,_e,Le,pt=0,mt=!1,Ut=!1,An=!0;if(typeof d!="function")throw new ye(g);function En(ir){var rr=C,Dr=V;return C=V=h,pt=ir,de=d.apply(Dr,rr)}function Yn(ir){return pt=ir,_e=ns(Jt,m),mt?En(ir):de}function Pt(ir){var rr=ir-Le;return Le===h||rr>=m||rr<0||Ut&&ir-pt>=Z}function Jt(){var ir=Xs();if(Pt(ir))return fr(ir);_e=ns(Jt,function(rr){var Dr=m-(rr-Le);return Ut?Li(Dr,Z-(rr-pt)):Dr}(ir))}function fr(ir){return _e=h,An&&C?En(ir):(C=V=h,de)}function gn(){var ir=Xs(),rr=Pt(ir);if(C=arguments,V=this,Le=ir,rr){if(_e===h)return Yn(Le);if(Ut)return ap(_e),_e=ns(Jt,m),En(Le)}return _e===h&&(_e=ns(Jt,m)),de}return m=Bt(m)||0,eo(E)&&(mt=!!E.leading,Z=(Ut="maxWait"in E)?Do(Bt(E.maxWait)||0,m):Z,An="trailing"in E?!!E.trailing:An),gn.cancel=function(){_e!==h&&ap(_e),pt=0,C=Le=V=_e=h},gn.flush=function(){return _e===h?de:fr(Xs())},gn}var xh=Or(function(d,m){return qd(d,1,m)}),_p=Or(function(d,m,E){return qd(d,Bt(m)||0,E)});function Tu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new ye(g);var E=function(){var C=arguments,V=m?m.apply(this,C):C[0],Z=E.cache;if(Z.has(V))return Z.get(V);var de=d.apply(this,C);return E.cache=Z.set(V,de)||Z,de};return E.cache=new(Tu.Cache||Ya),E}function Sl(d){if(typeof d!="function")throw new ye(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}Tu.Cache=Ya;var Gi=hh(function(d,m){var E=(m=m.length==1&&mr(m[0])?Ir(m[0],so(Jn())):Ir(qo(m,1),so(Jn()))).length;return Or(function(C){for(var V=-1,Z=Li(C.length,E);++V<Z;)C[V]=m[V].call(this,C[V]);return ro(d,this,C)})}),Gn=Or(function(d,m){var E=ra(m,Xl(Gn));return Za(d,S,h,m,E)}),Ao=Or(function(d,m){var E=ra(m,Xl(Ao));return Za(d,P,h,m,E)}),Ni=El(function(d,m){return Za(d,R,h,h,h,m)});function ua(d,m){return d===m||d!=d&&m!=m}var Xv=Is(xo),Sh=Is(function(d,m){return d>=m}),Mu=Zf(function(){return arguments}())?Zf:function(d){return To(d)&&ln.call(d,"callee")&&!Yo.call(d,"callee")},mr=fn.isArray,Ah=xc?so(xc):function(d){return To(d)&&bo(d)==Ke};function sa(d){return d!=null&&Zl(d.length)&&!Al(d)}function Jo(d){return To(d)&&sa(d)}var La=rh||He,Yv=$f?so($f):function(d){return To(d)&&bo(d)==L};function lf(d){if(!To(d))return!1;var m=bo(d);return m==G||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!I(d)}function Al(d){if(!eo(d))return!1;var m=bo(d);return m==Y||m==H||m=="[object AsyncFunction]"||m=="[object Proxy]"}function wp(d){return typeof d=="number"&&d==ct(d)}function Zl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=k}function eo(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function To(d){return d!=null&&typeof d=="object"}var _i=Sc?so(Sc):function(d){return To(d)&&So(d)==se};function uf(d){return typeof d=="number"||To(d)&&bo(d)==Re}function I(d){if(!To(d)||bo(d)!=Se)return!1;var m=za(d);if(m===null)return!0;var E=ln.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&yr.call(E)==ia}var oe=Ri?so(Ri):function(d){return To(d)&&bo(d)==Be},be=ri?so(ri):function(d){return To(d)&&So(d)==Oe};function et(d){return typeof d=="string"||!mr(d)&&To(d)&&bo(d)==ae}function dt(d){return typeof d=="symbol"||To(d)&&bo(d)==ve}var Ze=na?so(na):function(d){return To(d)&&Zl(d.length)&&!!Wr[bo(d)]},st=Is(gl),Nt=Is(function(d,m){return d<=m});function jt(d){if(!d)return[];if(sa(d))return et(d)?Xi(d):di(d);if(Ha&&d[Ha])return function(E){for(var C,V=[];!(C=E.next()).done;)V.push(C.value);return V}(d[Ha]());var m=So(d);return(m==se?Xo:m==Oe?ya:gr)(d)}function Ct(d){return d?(d=Bt(d))===j||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function ct(d){var m=Ct(d),E=m%1;return m==m?E?m-E:m:0}function Gt(d){return d?vu(ct(d),0,q):0}function Bt(d){if(typeof d=="number")return d;if(dt(d))return B;if(eo(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=eo(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=Na(d);var E=mi.test(d);return E||Ho.test(d)?pa(d.slice(2),E?2:8):ni.test(d)?B:+d}function Rt(d){return bl(d,At(d))}function bt(d){return d==null?"":aa(d)}var Ve=wu(function(d,m){if(xu(m)||sa(m))bl(m,It(m),d);else for(var E in m)ln.call(m,E)&&jo(d,E,m[E])}),it=wu(function(d,m){bl(m,At(m),d)}),Lt=wu(function(d,m,E,C){bl(m,At(m),d,C)}),Kt=wu(function(d,m,E,C){bl(m,It(m),d,C)}),xt=El(Lc),Zt=Or(function(d,m){d=M(d);var E=-1,C=m.length,V=C>2?m[2]:h;for(V&&Lo(m[0],m[1],V)&&(C=1);++E<C;)for(var Z=m[E],de=At(Z),_e=-1,Le=de.length;++_e<Le;){var pt=de[_e],mt=d[pt];(mt===h||ua(mt,zt[pt])&&!ln.call(d,pt))&&(d[pt]=Z[pt])}return d}),St=Or(function(d){return d.push(h,cp),ro(Cn,h,d)});function Vt(d,m,E){var C=d==null?h:ml(d,m);return C===h?E:C}function _t(d,m){return d!=null&&Us(d,m,Jd)}var Ht=up(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),d[m]=E},Nr(zn)),Mn=up(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),ln.call(d,m)?d[m].push(E):d[m]=[E]},Jn),Wn=Or(Fi);function It(d){return sa(d)?Yf(d):Ca(d)}function At(d){return sa(d)?Yf(d,!0):uh(d)}var wt=wu(function(d,m,E){Jf(d,m,E)}),Cn=wu(function(d,m,E,C){Jf(d,m,E,C)}),tr=El(function(d,m){var E={};if(d==null)return E;var C=!1;m=Ir(m,function(Z){return Z=bu(Z,d),C||(C=Z.length>1),Z}),bl(d,dd(d),E),C&&(E=ga(E,7,fp));for(var V=m.length;V--;)td(E,m[V]);return E}),un=El(function(d,m){return d==null?{}:function(E,C){return fh(E,C,function(V,Z){return _t(E,Z)})}(d,m)});function Qn(d,m){if(d==null)return{};var E=Ir(dd(d),function(C){return[C]});return m=Jn(m),fh(d,E,function(C,V){return m(C,V[0])})}var Vn=cd(It),nr=cd(At);function gr(d){return d==null?[]:Hu(d,It(d))}var Mo=_l(function(d,m,E){return m=m.toLowerCase(),d+(E?Fo(m):m)});function Fo(d){return Qo(bt(d).toLowerCase())}function sr(d){return(d=bt(d))&&d.replace(Bn,Nc).replace(dl,"")}var Go=_l(function(d,m,E){return d+(E?"-":"")+m.toLowerCase()}),to=_l(function(d,m,E){return d+(E?" ":"")+m.toLowerCase()}),Po=ad("toLowerCase"),$o=_l(function(d,m,E){return d+(E?"_":"")+m.toLowerCase()}),wo=_l(function(d,m,E){return d+(E?" ":"")+Qo(m)}),yo=_l(function(d,m,E){return d+(E?" ":"")+m.toUpperCase()}),Qo=ad("toUpperCase");function Eo(d,m,E){return d=bt(d),(m=E?h:m)===h?function(C){return Oc.test(C)}(d)?function(C){return C.match(Os)||[]}(d):function(C){return C.match(ot)||[]}(d):d.match(m)||[]}var Zn=Or(function(d,m){try{return ro(d,h,m)}catch(E){return lf(E)?E:new Mr(E)}}),ai=El(function(d,m){return ki(m,function(E){E=tl(E),qa(d,E,Ys(d[E],d))}),d});function Nr(d){return function(){return d}}var kn=zc(),cr=zc(!0);function zn(d){return d}function uo(d){return Wl(typeof d=="function"?d:ga(d,1))}var Fa=Or(function(d,m){return function(E){return Fi(E,d,m)}}),Jl=Or(function(d,m){return function(E){return Fi(d,E,m)}});function he(d,m,E){var C=It(m),V=Fc(m,C);E!=null||eo(m)&&(V.length||!C.length)||(E=m,m=d,d=this,V=Fc(m,It(m)));var Z=!(eo(E)&&"chain"in E&&!E.chain),de=Al(d);return ki(V,function(_e){var Le=m[_e];d[_e]=Le,de&&(d.prototype[_e]=function(){var pt=this.__chain__;if(Z||pt){var mt=d(this.__wrapped__),Ut=mt.__actions__=di(this.__actions__);return Ut.push({func:Le,args:arguments,thisArg:d}),mt.__chain__=pt,mt}return Le.apply(d,oi([this.value()],arguments))})}),d}function tt(){}var qe=ud(Ir),tn=ud(Uf),pr=ud(Mc);function le(d){return Yl(d)?ji(tl(d)):function(m){return function(E){return ml(E,m)}}(d)}var Q=wl(),Te=wl(!0);function Ue(){return[]}function He(){return!1}var Ne=js(function(d,m){return d+m},0),Me=Yc("ceil"),Ie=js(function(d,m){return d/m},1),fe=Yc("floor"),we,ue=js(function(d,m){return d*m},1),$e=Yc("round"),Ye=js(function(d,m){return d-m},0);return re.after=function(d,m){if(typeof m!="function")throw new ye(g);return d=ct(d),function(){if(--d<1)return m.apply(this,arguments)}},re.ary=Oh,re.assign=Ve,re.assignIn=it,re.assignInWith=Lt,re.assignWith=Kt,re.at=xt,re.before=nl,re.bind=Ys,re.bindAll=ai,re.bindKey=ls,re.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return mr(d)?d:[d]},re.chain=Ko,re.chunk=function(d,m,E){m=(E?Lo(d,m,E):m===h)?1:Do(ct(m),0);var C=d==null?0:d.length;if(!C||m<1)return[];for(var V=0,Z=0,de=fn(kc(C/m));V<C;)de[Z++]=Da(d,V,V+=m);return de},re.compact=function(d){for(var m=-1,E=d==null?0:d.length,C=0,V=[];++m<E;){var Z=d[m];Z&&(V[C++]=Z)}return V},re.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),E=arguments[0],C=d;C--;)m[C-1]=arguments[C];return oi(mr(E)?di(E):[E],qo(m,1))},re.cond=function(d){var m=d==null?0:d.length,E=Jn();return d=m?Ir(d,function(C){if(typeof C[1]!="function")throw new ye(g);return[E(C[0]),C[1]]}):[],Or(function(C){for(var V=-1;++V<m;){var Z=d[V];if(ro(Z[0],this,C))return ro(Z[1],this,C)}})},re.conforms=function(d){return function(m){var E=It(m);return function(C){return Yd(C,m,E)}}(ga(d,1))},re.constant=Nr,re.countBy=Kl,re.create=function(d,m){var E=Zu(d);return m==null?E:Vl(E,m)},re.curry=function d(m,E,C){var V=Za(m,8,h,h,h,h,h,E=C?h:E);return V.placeholder=d.placeholder,V},re.curryRight=function d(m,E,C){var V=Za(m,O,h,h,h,h,h,E=C?h:E);return V.placeholder=d.placeholder,V},re.debounce=rl,re.defaults=Zt,re.defaultsDeep=St,re.defer=xh,re.delay=_p,re.difference=vh,re.differenceBy=yh,re.differenceWith=mh,re.drop=function(d,m,E){var C=d==null?0:d.length;return C?Da(d,(m=E||m===h?1:ct(m))<0?0:m,C):[]},re.dropRight=function(d,m,E){var C=d==null?0:d.length;return C?Da(d,0,(m=C-(m=E||m===h?1:ct(m)))<0?0:m):[]},re.dropRightWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3),!0,!0):[]},re.dropWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3),!0):[]},re.fill=function(d,m,E,C){var V=d==null?0:d.length;return V?(E&&typeof E!="number"&&Lo(d,m,E)&&(E=0,C=V),function(Z,de,_e,Le){var pt=Z.length;for((_e=ct(_e))<0&&(_e=-_e>pt?0:pt+_e),(Le=Le===h||Le>pt?pt:ct(Le))<0&&(Le+=pt),Le=_e>Le?0:Gt(Le);_e<Le;)Z[_e++]=de;return Z}(d,m,E,C)):[]},re.filter=function(d,m){return(mr(d)?Ci:zr)(d,Jn(m,3))},re.flatMap=function(d,m){return qo(as(d,m),1)},re.flatMapDeep=function(d,m){return qo(as(d,m),j)},re.flatMapDepth=function(d,m,E){return E=E===h?1:ct(E),qo(as(d,m),E)},re.flatten=mp,re.flattenDeep=function(d){return d!=null&&d.length?qo(d,j):[]},re.flattenDepth=function(d,m){return d!=null&&d.length?qo(d,m=m===h?1:ct(m)):[]},re.flip=function(d){return Za(d,512)},re.flow=kn,re.flowRight=cr,re.fromPairs=function(d){for(var m=-1,E=d==null?0:d.length,C={};++m<E;){var V=d[m];C[V[0]]=V[1]}return C},re.functions=function(d){return d==null?[]:Fc(d,It(d))},re.functionsIn=function(d){return d==null?[]:Fc(d,At(d))},re.groupBy=Ia,re.initial=function(d){return d!=null&&d.length?Da(d,0,-1):[]},re.intersection=gh,re.intersectionBy=bh,re.intersectionWith=_h,re.invert=Ht,re.invertBy=Mn,re.invokeMap=Fn,re.iteratee=uo,re.keyBy=md,re.keys=It,re.keysIn=At,re.map=as,re.mapKeys=function(d,m){var E={};return m=Jn(m,3),Rn(d,function(C,V,Z){qa(E,m(C,V,Z),C)}),E},re.mapValues=function(d,m){var E={};return m=Jn(m,3),Rn(d,function(C,V,Z){qa(E,V,m(C,V,Z))}),E},re.matches=function(d){return Qd(ga(d,1))},re.matchesProperty=function(d,m){return ep(d,ga(m,1))},re.memoize=Tu,re.merge=wt,re.mergeWith=Cn,re.method=Fa,re.methodOf=Jl,re.mixin=he,re.negate=Sl,re.nthArg=function(d){return d=ct(d),Or(function(m){return sh(m,d)})},re.omit=tr,re.omitBy=function(d,m){return Qn(d,Sl(Jn(m)))},re.once=function(d){return nl(2,d)},re.orderBy=function(d,m,E,C){return d==null?[]:(mr(m)||(m=m==null?[]:[m]),mr(E=C?h:E)||(E=E==null?[]:[E]),ch(d,m,E))},re.over=qe,re.overArgs=Gi,re.overEvery=tn,re.overSome=pr,re.partial=Gn,re.partialRight=Ao,re.partition=gd,re.pick=un,re.pickBy=Qn,re.property=le,re.propertyOf=function(d){return function(m){return d==null?h:ml(d,m)}},re.pull=rs,re.pullAll=ef,re.pullAllBy=function(d,m,E){return d&&d.length&&m&&m.length?tp(d,m,Jn(E,2)):d},re.pullAllWith=function(d,m,E){return d&&d.length&&m&&m.length?tp(d,m,h,E):d},re.pullAt=la,re.range=Q,re.rangeRight=Te,re.rearg=Ni,re.reject=function(d,m){return(mr(d)?Ci:zr)(d,Sl(Jn(m,3)))},re.remove=function(d,m){var E=[];if(!d||!d.length)return E;var C=-1,V=[],Z=d.length;for(m=Jn(m,3);++C<Z;){var de=d[C];m(de,C,d)&&(E.push(de),V.push(C))}return Ds(d,V),E},re.rest=function(d,m){if(typeof d!="function")throw new ye(g);return Or(d,m=m===h?m:ct(m))},re.reverse=ja,re.sampleSize=function(d,m,E){return m=(E?Lo(d,m,E):m===h)?1:ct(m),(mr(d)?Hd:rp)(d,m)},re.set=function(d,m,E){return d==null?d:mu(d,m,E)},re.setWith=function(d,m,E,C){return C=typeof C=="function"?C:h,d==null?d:mu(d,m,E,C)},re.shuffle=function(d){return(mr(d)?ah:Hv)(d)},re.slice=function(d,m,E){var C=d==null?0:d.length;return C?(E&&typeof E!="number"&&Lo(d,m,E)?(m=0,E=C):(m=m==null?0:ct(m),E=E===h?C:ct(E)),Da(d,m,E)):[]},re.sortBy=Eh,re.sortedUniq=function(d){return d&&d.length?dh(d):[]},re.sortedUniqBy=function(d,m){return d&&d.length?dh(d,Jn(m,2)):[]},re.split=function(d,m,E){return E&&typeof E!="number"&&Lo(d,m,E)&&(m=E=h),(E=E===h?q:E>>>0)?(d=bt(d))&&(typeof m=="string"||m!=null&&!oe(m))&&!(m=aa(m))&&Wa(d)?_u(Xi(d),0,E):d.split(m,E):[]},re.spread=function(d,m){if(typeof d!="function")throw new ye(g);return m=m==null?0:Do(ct(m),0),Or(function(E){var C=E[m],V=_u(E,0,m);return C&&oi(V,C),ro(d,this,V)})},re.tail=function(d){var m=d==null?0:d.length;return m?Da(d,1,m):[]},re.take=function(d,m,E){return d&&d.length?Da(d,0,(m=E||m===h?1:ct(m))<0?0:m):[]},re.takeRight=function(d,m,E){var C=d==null?0:d.length;return C?Da(d,(m=C-(m=E||m===h?1:ct(m)))<0?0:m,C):[]},re.takeRightWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3),!1,!0):[]},re.takeWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3)):[]},re.tap=function(d,m){return m(d),d},re.throttle=function(d,m,E){var C=!0,V=!0;if(typeof d!="function")throw new ye(g);return eo(E)&&(C="leading"in E?!!E.leading:C,V="trailing"in E?!!E.trailing:V),rl(d,m,{leading:C,maxWait:m,trailing:V})},re.thru=of,re.toArray=jt,re.toPairs=Vn,re.toPairsIn=nr,re.toPath=function(d){return mr(d)?Ir(d,tl):dt(d)?[d]:di(hp(bt(d)))},re.toPlainObject=Rt,re.transform=function(d,m,E){var C=mr(d),V=C||La(d)||Ze(d);if(m=Jn(m,4),E==null){var Z=d&&d.constructor;E=V?C?new Z:[]:eo(d)&&Al(Z)?Zu(za(d)):{}}return(V?ki:Rn)(d,function(de,_e,Le){return m(E,de,_e,Le)}),E},re.unary=function(d){return Oh(d,1)},re.union=yd,re.unionBy=Bi,re.unionWith=tf,re.uniq=function(d){return d&&d.length?gu(d):[]},re.uniqBy=function(d,m){return d&&d.length?gu(d,Jn(m,2)):[]},re.uniqWith=function(d,m){return m=typeof m=="function"?m:h,d&&d.length?gu(d,h,m):[]},re.unset=function(d,m){return d==null||td(d,m)},re.unzip=os,re.unzipWith=Ws,re.update=function(d,m,E){return d==null?d:Ju(d,m,od(E))},re.updateWith=function(d,m,E,C){return C=typeof C=="function"?C:h,d==null?d:Ju(d,m,od(E),C)},re.values=gr,re.valuesIn=function(d){return d==null?[]:Hu(d,At(d))},re.without=nf,re.words=Eo,re.wrap=function(d,m){return Gn(od(m),d)},re.xor=rf,re.xorBy=zs,re.xorWith=Hs,re.zip=is,re.zipObject=function(d,m){return nd(d||[],m||[],jo)},re.zipObjectDeep=function(d,m){return nd(d||[],m||[],mu)},re.zipWith=ql,re.entries=Vn,re.entriesIn=nr,re.extend=it,re.extendWith=Lt,he(re,re),re.add=Ne,re.attempt=Zn,re.camelCase=Mo,re.capitalize=Fo,re.ceil=Me,re.clamp=function(d,m,E){return E===h&&(E=m,m=h),E!==h&&(E=(E=Bt(E))==E?E:0),m!==h&&(m=(m=Bt(m))==m?m:0),vu(Bt(d),m,E)},re.clone=function(d){return ga(d,4)},re.cloneDeep=function(d){return ga(d,5)},re.cloneDeepWith=function(d,m){return ga(d,5,m=typeof m=="function"?m:h)},re.cloneWith=function(d,m){return ga(d,4,m=typeof m=="function"?m:h)},re.conformsTo=function(d,m){return m==null||Yd(d,m,It(m))},re.deburr=sr,re.defaultTo=function(d,m){return d==null||d!=d?m:d},re.divide=Ie,re.endsWith=function(d,m,E){d=bt(d),m=aa(m);var C=d.length,V=E=E===h?C:vu(ct(E),0,C);return(E-=m.length)>=0&&d.slice(E,V)==m},re.eq=ua,re.escape=function(d){return(d=bt(d))&&On.test(d)?d.replace(pn,Uo):d},re.escapeRegExp=function(d){return(d=bt(d))&&no.test(d)?d.replace(Ur,"\\$&"):d},re.every=function(d,m,E){var C=mr(d)?Uf:Kd;return E&&Lo(d,m,E)&&(m=h),C(d,Jn(m,3))},re.find=bp,re.findIndex=vp,re.findKey=function(d,m){return Ga(d,Jn(m,3),Rn)},re.findLast=Ui,re.findLastIndex=yp,re.findLastKey=function(d,m){return Ga(d,Jn(m,3),lo)},re.floor=fe,re.forEach=Zo,re.forEachRight=wh,re.forIn=function(d,m){return d==null?d:Er(d,Jn(m,3),At)},re.forInRight=function(d,m){return d==null?d:ao(d,Jn(m,3),At)},re.forOwn=function(d,m){return d&&Rn(d,Jn(m,3))},re.forOwnRight=function(d,m){return d&&lo(d,Jn(m,3))},re.get=Vt,re.gt=Xv,re.gte=Sh,re.has=function(d,m){return d!=null&&Us(d,m,Zd)},re.hasIn=_t,re.head=gp,re.identity=zn,re.includes=function(d,m,E,C){d=sa(d)?d:gr(d),E=E&&!C?ct(E):0;var V=d.length;return E<0&&(E=Do(V+E,0)),et(d)?E<=V&&d.indexOf(m,E)>-1:!!V&&su(d,m,E)>-1},re.indexOf=function(d,m,E){var C=d==null?0:d.length;if(!C)return-1;var V=E==null?0:ct(E);return V<0&&(V=Do(C+V,0)),su(d,m,V)},re.inRange=function(d,m,E){return m=Ct(m),E===h?(E=m,m=0):E=Ct(E),function(C,V,Z){return C>=Li(V,Z)&&C<Do(V,Z)}(d=Bt(d),m,E)},re.invoke=Wn,re.isArguments=Mu,re.isArray=mr,re.isArrayBuffer=Ah,re.isArrayLike=sa,re.isArrayLikeObject=Jo,re.isBoolean=function(d){return d===!0||d===!1||To(d)&&bo(d)==J},re.isBuffer=La,re.isDate=Yv,re.isElement=function(d){return To(d)&&d.nodeType===1&&!I(d)},re.isEmpty=function(d){if(d==null)return!0;if(sa(d)&&(mr(d)||typeof d=="string"||typeof d.splice=="function"||La(d)||Ze(d)||Mu(d)))return!d.length;var m=So(d);if(m==se||m==Oe)return!d.size;if(xu(d))return!Ca(d).length;for(var E in d)if(ln.call(d,E))return!1;return!0},re.isEqual=function(d,m){return Cs(d,m)},re.isEqualWith=function(d,m,E){var C=(E=typeof E=="function"?E:h)?E(d,m):h;return C===h?Cs(d,m,h,E):!!C},re.isError=lf,re.isFinite=function(d){return typeof d=="number"&&qu(d)},re.isFunction=Al,re.isInteger=wp,re.isLength=Zl,re.isMap=_i,re.isMatch=function(d,m){return d===m||ka(d,m,Kc(m))},re.isMatchWith=function(d,m,E){return E=typeof E=="function"?E:h,ka(d,m,Kc(m),E)},re.isNaN=function(d){return uf(d)&&d!=+d},re.isNative=function(d){if(el(d))throw new Mr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yu(d)},re.isNil=function(d){return d==null},re.isNull=function(d){return d===null},re.isNumber=uf,re.isObject=eo,re.isObjectLike=To,re.isPlainObject=I,re.isRegExp=oe,re.isSafeInteger=function(d){return wp(d)&&d>=-9007199254740991&&d<=k},re.isSet=be,re.isString=et,re.isSymbol=dt,re.isTypedArray=Ze,re.isUndefined=function(d){return d===h},re.isWeakMap=function(d){return To(d)&&So(d)==Pe},re.isWeakSet=function(d){return To(d)&&bo(d)=="[object WeakSet]"},re.join=function(d,m){return d==null?"":Cc.call(d,m)},re.kebabCase=Go,re.last=$i,re.lastIndexOf=function(d,m,E){var C=d==null?0:d.length;if(!C)return-1;var V=C;return E!==h&&(V=(V=ct(E))<0?Do(C+V,0):Li(V,C-1)),m==m?function(Z,de,_e){for(var Le=_e+1;Le--;)if(Z[Le]===de)return Le;return Le}(d,m,V):Di(d,ha,V,!0)},re.lowerCase=to,re.lowerFirst=Po,re.lt=st,re.lte=Nt,re.max=function(d){return d&&d.length?Io(d,zn,xo):h},re.maxBy=function(d,m){return d&&d.length?Io(d,Jn(m,2),xo):h},re.mean=function(d){return Tr(d,zn)},re.meanBy=function(d,m){return Tr(d,Jn(m,2))},re.min=function(d){return d&&d.length?Io(d,zn,gl):h},re.minBy=function(d,m){return d&&d.length?Io(d,Jn(m,2),gl):h},re.stubArray=Ue,re.stubFalse=He,re.stubObject=function(){return{}},re.stubString=function(){return""},re.stubTrue=function(){return!0},re.multiply=ue,re.nth=function(d,m){return d&&d.length?sh(d,ct(m)):h},re.noConflict=function(){return Co._===this&&(Co._=go),this},re.noop=tt,re.now=Xs,re.pad=function(d,m,E){d=bt(d);var C=(m=ct(m))?Ii(d):0;if(!m||C>=m)return d;var V=(m-C)/2;return Hc(Yu(V),E)+d+Hc(kc(V),E)},re.padEnd=function(d,m,E){d=bt(d);var C=(m=ct(m))?Ii(d):0;return m&&C<m?d+Hc(m-C,E):d},re.padStart=function(d,m,E){d=bt(d);var C=(m=ct(m))?Ii(d):0;return m&&C<m?Hc(m-C,E)+d:d},re.parseInt=function(d,m,E){return E||m==null?m=0:m&&(m=+m),Hf(bt(d).replace(Dn,""),m||0)},re.random=function(d,m,E){if(E&&typeof E!="boolean"&&Lo(d,m,E)&&(m=E=h),E===h&&(typeof m=="boolean"?(E=m,m=h):typeof d=="boolean"&&(E=d,d=h)),d===h&&m===h?(d=0,m=1):(d=Ct(d),m===h?(m=d,d=0):m=Ct(m)),d>m){var C=d;d=m,m=C}if(E||d%1||m%1){var V=Ps();return Li(d+V*(m-d+lu("1e-"+((V+"").length-1))),m)}return np(d,m)},re.reduce=function(d,m,E){var C=mr(d)?As:fi,V=arguments.length<3;return C(d,Jn(m,4),E,V,vo)},re.reduceRight=function(d,m,E){var C=mr(d)?Gf:fi,V=arguments.length<3;return C(d,Jn(m,4),E,V,lh)},re.repeat=function(d,m,E){return m=(E?Lo(d,m,E):m===h)?1:ct(m),Bc(bt(d),m)},re.replace=function(){var d=arguments,m=bt(d[0]);return d.length<3?m:m.replace(d[1],d[2])},re.result=function(d,m,E){var C=-1,V=(m=bu(m,d)).length;for(V||(V=1,d=h);++C<V;){var Z=d==null?h:d[tl(m[C])];Z===h&&(C=V,Z=E),d=Al(Z)?Z.call(d):Z}return d},re.round=$e,re.runInContext=ut,re.sample=function(d){return(mr(d)?qf:Wv)(d)},re.size=function(d){if(d==null)return 0;if(sa(d))return et(d)?Ii(d):d.length;var m=So(d);return m==se||m==Oe?d.size:Ca(d).length},re.snakeCase=$o,re.some=function(d,m,E){var C=mr(d)?Mc:op;return E&&Lo(d,m,E)&&(m=h),C(d,Jn(m,3))},re.sortedIndex=function(d,m){return Qf(d,m)},re.sortedIndexBy=function(d,m,E){return ed(d,m,Jn(E,2))},re.sortedIndexOf=function(d,m){var E=d==null?0:d.length;if(E){var C=Qf(d,m);if(C<E&&ua(d[C],m))return C}return-1},re.sortedLastIndex=function(d,m){return Qf(d,m,!0)},re.sortedLastIndexBy=function(d,m,E){return ed(d,m,Jn(E,2),!0)},re.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var E=Qf(d,m,!0)-1;if(ua(d[E],m))return E}return-1},re.startCase=wo,re.startsWith=function(d,m,E){return d=bt(d),E=E==null?0:vu(ct(E),0,d.length),m=aa(m),d.slice(E,E+m.length)==m},re.subtract=Ye,re.sum=function(d){return d&&d.length?cu(d,zn):0},re.sumBy=function(d,m){return d&&d.length?cu(d,Jn(m,2)):0},re.template=function(d,m,E){var C=re.templateSettings;E&&Lo(d,m,E)&&(m=h),d=bt(d),m=Lt({},m,C,sp);var V,Z,de=Lt({},m.imports,C.imports,sp),_e=It(de),Le=Hu(de,_e),pt=0,mt=m.interpolate||Xn,Ut="__p += '",An=$((m.escape||Xn).source+"|"+mt.source+"|"+(mt===Kn?Nn:Xn).source+"|"+(m.evaluate||Xn).source+"|$","g"),En="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++If+"]")+`
`;d.replace(An,function(Jt,fr,gn,ir,rr,Dr){return gn||(gn=ir),Ut+=d.slice(pt,Dr).replace(or,Ll),fr&&(V=!0,Ut+=`' +
__e(`+fr+`) +
'`),rr&&(Z=!0,Ut+=`';
`+rr+`;
__p += '`),gn&&(Ut+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),pt=Dr+Jt.length,Jt}),Ut+=`';
`;var Yn=ln.call(m,"variable")&&m.variable;if(Yn){if(en.test(Yn))throw new Mr("Invalid `variable` option passed into `_.template`")}else Ut=`with (obj) {
`+Ut+`
}
`;Ut=(Z?Ut.replace(Ot,""):Ut).replace(rn,"$1").replace(yn,"$1;"),Ut="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ut+`return __p
}`;var Pt=Zn(function(){return co(_e,En+"return "+Ut).apply(h,Le)});if(Pt.source=Ut,lf(Pt))throw Pt;return Pt},re.times=function(d,m){if((d=ct(d))<1||d>k)return[];var E=q,C=Li(d,q);m=Jn(m),d-=q;for(var V=Il(C,m);++E<d;)m(E);return V},re.toFinite=Ct,re.toInteger=ct,re.toLength=Gt,re.toLower=function(d){return bt(d).toLowerCase()},re.toNumber=Bt,re.toSafeInteger=function(d){return d?vu(ct(d),-9007199254740991,k):d===0?d:0},re.toString=bt,re.toUpper=function(d){return bt(d).toUpperCase()},re.trim=function(d,m,E){if((d=bt(d))&&(E||m===h))return Na(d);if(!d||!(m=aa(m)))return d;var C=Xi(d),V=Xi(m);return _u(C,va(C,V),Pc(C,V)+1).join("")},re.trimEnd=function(d,m,E){if((d=bt(d))&&(E||m===h))return d.slice(0,ii(d)+1);if(!d||!(m=aa(m)))return d;var C=Xi(d);return _u(C,0,Pc(C,Xi(m))+1).join("")},re.trimStart=function(d,m,E){if((d=bt(d))&&(E||m===h))return d.replace(Dn,"");if(!d||!(m=aa(m)))return d;var C=Xi(d);return _u(C,va(C,Xi(m))).join("")},re.truncate=function(d,m){var E=30,C="...";if(eo(m)){var V="separator"in m?m.separator:V;E="length"in m?ct(m.length):E,C="omission"in m?aa(m.omission):C}var Z=(d=bt(d)).length;if(Wa(d)){var de=Xi(d);Z=de.length}if(E>=Z)return d;var _e=E-Ii(C);if(_e<1)return C;var Le=de?_u(de,0,_e).join(""):d.slice(0,_e);if(V===h)return Le+C;if(de&&(_e+=Le.length-_e),oe(V)){if(d.slice(_e).search(V)){var pt,mt=Le;for(V.global||(V=$(V.source,bt(_r.exec(V))+"g")),V.lastIndex=0;pt=V.exec(mt);)var Ut=pt.index;Le=Le.slice(0,Ut===h?_e:Ut)}}else if(d.indexOf(aa(V),_e)!=_e){var An=Le.lastIndexOf(V);An>-1&&(Le=Le.slice(0,An))}return Le+C},re.unescape=function(d){return(d=bt(d))&&ft.test(d)?d.replace(Tn,oa):d},re.uniqueId=function(d){var m=++Vr;return bt(d)+m},re.upperCase=yo,re.upperFirst=Qo,re.each=Zo,re.eachRight=wh,re.first=gp,he(re,(we={},Rn(re,function(d,m){ln.call(re.prototype,m)||(we[m]=d)}),we),{chain:!1}),re.VERSION="4.17.21",ki(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){re[d].placeholder=re}),ki(["drop","take"],function(d,m){Pr.prototype[d]=function(E){E=E===h?1:Do(ct(E),0);var C=this.__filtered__&&!m?new Pr(this):this.clone();return C.__filtered__?C.__takeCount__=Li(E,C.__takeCount__):C.__views__.push({size:Li(E,q),type:d+(C.__dir__<0?"Right":"")}),C},Pr.prototype[d+"Right"]=function(E){return this.reverse()[d](E).reverse()}}),ki(["filter","map","takeWhile"],function(d,m){var E=m+1,C=E==1||E==3;Pr.prototype[d]=function(V){var Z=this.clone();return Z.__iteratees__.push({iteratee:Jn(V,3),type:E}),Z.__filtered__=Z.__filtered__||C,Z}}),ki(["head","last"],function(d,m){var E="take"+(m?"Right":"");Pr.prototype[d]=function(){return this[E](1).value()[0]}}),ki(["initial","tail"],function(d,m){var E="drop"+(m?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[E](1)}}),Pr.prototype.compact=function(){return this.filter(zn)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=Or(function(d,m){return typeof d=="function"?new Pr(this):this.map(function(E){return Fi(E,d,m)})}),Pr.prototype.reject=function(d){return this.filter(Sl(Jn(d)))},Pr.prototype.slice=function(d,m){d=ct(d);var E=this;return E.__filtered__&&(d>0||m<0)?new Pr(E):(d<0?E=E.takeRight(-d):d&&(E=E.drop(d)),m!==h&&(E=(m=ct(m))<0?E.dropRight(-m):E.take(m-d)),E)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(q)},Rn(Pr.prototype,function(d,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),C=/^(?:head|last)$/.test(m),V=re[C?"take"+(m=="last"?"Right":""):m],Z=C||/^find/.test(m);V&&(re.prototype[m]=function(){var de=this.__wrapped__,_e=C?[1]:arguments,Le=de instanceof Pr,pt=_e[0],mt=Le||mr(de),Ut=function(fr){var gn=V.apply(re,oi([fr],_e));return C&&An?gn[0]:gn};mt&&E&&typeof pt=="function"&&pt.length!=1&&(Le=mt=!1);var An=this.__chain__,En=!!this.__actions__.length,Yn=Z&&!An,Pt=Le&&!En;if(!Z&&mt){de=Pt?de:new Pr(this);var Jt=d.apply(de,_e);return Jt.__actions__.push({func:of,args:[Ut],thisArg:h}),new Ra(Jt,An)}return Yn&&Pt?d.apply(this,_e):(Jt=this.thru(Ut),Yn?C?Jt.value()[0]:Jt.value():Jt)})}),ki(["pop","push","shift","sort","splice","unshift"],function(d){var m=Ge[d],E=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",C=/^(?:pop|shift)$/.test(d);re.prototype[d]=function(){var V=arguments;if(C&&!this.__chain__){var Z=this.value();return m.apply(mr(Z)?Z:[],V)}return this[E](function(de){return m.apply(mr(de)?de:[],V)})}}),Rn(Pr.prototype,function(d,m){var E=re[m];if(E){var C=E.name+"";ln.call(hu,C)||(hu[C]=[]),hu[C].push({name:m,func:E})}}),hu[Eu(h,2).name]=[{name:"wrapper",func:h}],Pr.prototype.clone=function(){var d=new Pr(this.__wrapped__);return d.__actions__=di(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=di(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=di(this.__views__),d},Pr.prototype.reverse=function(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Pr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,E=mr(d),C=m<0,V=E?d.length:0,Z=function(Dr,Un,er){for(var Vo=-1,rt=er.length;++Vo<rt;){var Ql=er[Vo],wi=Ql.size;switch(Ql.type){case"drop":Dr+=wi;break;case"dropRight":Un-=wi;break;case"take":Un=Li(Un,Dr+wi);break;case"takeRight":Dr=Do(Dr,Un-wi)}}return{start:Dr,end:Un}}(0,V,this.__views__),de=Z.start,_e=Z.end,Le=_e-de,pt=C?_e:de-1,mt=this.__iteratees__,Ut=mt.length,An=0,En=Li(Le,this.__takeCount__);if(!E||!C&&V==Le&&En==Le)return ph(d,this.__actions__);var Yn=[];e:for(;Le--&&An<En;){for(var Pt=-1,Jt=d[pt+=m];++Pt<Ut;){var fr=mt[Pt],gn=fr.iteratee,ir=fr.type,rr=gn(Jt);if(ir==2)Jt=rr;else if(!rr){if(ir==1)continue e;break e}}Yn[An++]=Jt}return Yn},re.prototype.at=af,re.prototype.chain=function(){return Ko(this)},re.prototype.commit=function(){return new Ra(this.value(),this.__chain__)},re.prototype.next=function(){this.__values__===h&&(this.__values__=jt(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?h:this.__values__[this.__index__++]}},re.prototype.plant=function(d){for(var m,E=this;E instanceof Bl;){var C=vd(E);C.__index__=0,C.__values__=h,m?V.__wrapped__=C:m=C;var V=C;E=E.__wrapped__}return V.__wrapped__=d,m},re.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof Pr){var m=d;return this.__actions__.length&&(m=new Pr(this)),(m=m.reverse()).__actions__.push({func:of,args:[ja],thisArg:h}),new Ra(m,this.__chain__)}return this.thru(ja)},re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=function(){return ph(this.__wrapped__,this.__actions__)},re.prototype.first=re.prototype.head,Ha&&(re.prototype[Ha]=function(){return this}),re}();Co._=Mi,(v=(function(){return Mi}).call(o,r,o,c))===h||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),v=r(33),h=r(87),g=r(62),b=r(174),w=r(28),O=s.TypeError,S=w("toPrimitive");n.exports=function(P,A){if(!v(P)||h(P))return P;var R,j=g(P,S);if(j){if(A===void 0&&(A="default"),R=c(j,P,A),!v(R)||h(R))return R;throw O("Can't convert object to primitive value")}return A===void 0&&(A="number"),b(P,A)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),v=r(50),h=r(38);n.exports=function(g,b){for(var w=c(b),O=h.f,S=v.f,P=0;P<w.length;P++){var A=w[P];s(g,A)||O(g,A,S(b,A))}}},function(n,o,r){var s=r(46),c=r(15),v=r(74),h=r(112),g=r(32),b=c([].concat);n.exports=s("Reflect","ownKeys")||function(w){var O=v.f(g(w)),S=h.f;return S?b(O,S(w)):O}},function(n,o,r){var s=r(15),c=r(35),v=r(41),h=r(137).indexOf,g=r(72),b=s([].push);n.exports=function(w,O){var S,P=v(w),A=0,R=[];for(S in P)!c(g,S)&&c(P,S)&&b(R,S);for(;O.length>A;)c(P,S=O[A++])&&(~h(R,S)||b(R,S));return R}},function(n,o,r){var s=r(41),c=r(75),v=r(45),h=function(g){return function(b,w,O){var S,P=s(b),A=v(P),R=c(O,A);if(g&&w!=w){for(;A>R;)if((S=P[R++])!=S)return!0}else for(;A>R;R++)if((g||R in P)&&P[R]===w)return g||R||0;return!g&&-1}};n.exports={includes:h(!0),indexOf:h(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),v=r(74).f,h=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&s(b)=="Window"?function(w){try{return v(w)}catch{return h(g)}}(b):v(c(b))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),v=r(140),h=r(38).f;n.exports=function(g){var b=s.Symbol||(s.Symbol={});c(b,g)||h(b,g,{value:v.f(g)})}},function(n,o,r){var s,c,v,h=r(18),g=r(30),b=r(60),w=r(101),O=r(42),S=r(28),P=r(71),A=S("iterator"),R=!1;[].keys&&("next"in(v=[].keys())?(c=w(w(v)))!==Object.prototype&&(s=c):R=!0),s==null||h(function(){var j={};return s[A].call(j)!==j})?s={}:P&&(s=b(s)),g(s[A])||O(s,A,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:R}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),v=r(72),h=r(33),g=r(35),b=r(38).f,w=r(74),O=r(139),S=r(183),P=r(90),A=r(185),R=!1,j=P("meta"),k=0,B=function(X){b(X,j,{value:{objectID:"O"+k++,weakData:{}}})},q=n.exports={enable:function(){q.enable=function(){},R=!0;var X=w.f,W=c([].splice),ee={};ee[j]=1,X(ee).length&&(w.f=function(J){for(var L=X(J),G=0,Y=L.length;G<Y;G++)if(L[G]===j){W(L,G,1);break}return L},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(X,W){if(!h(X))return typeof X=="symbol"?X:(typeof X=="string"?"S":"P")+X;if(!g(X,j)){if(!S(X))return"F";if(!W)return"E";B(X)}return X[j].objectID},getWeakData:function(X,W){if(!g(X,j)){if(!S(X))return!0;if(!W)return!1;B(X)}return X[j].weakData},onFreeze:function(X){return A&&R&&S(X)&&!g(X,j)&&B(X),X}};v[j]=!0},function(n,o,r){var s=r(28),c=r(80),v=s("iterator"),h=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||h[v]===g)}},function(n,o,r){var s=r(7),c=r(34),v=r(56),h=r(32),g=r(88),b=r(118),w=s.TypeError;n.exports=function(O,S){var P=arguments.length<2?b(O):S;if(v(P))return h(c(P,O));throw w(g(O)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),v=r(62);n.exports=function(h,g,b){var w,O;c(h);try{if(!(w=v(h,"return"))){if(g==="throw")throw b;return b}w=s(w,h)}catch(S){O=!0,w=S}if(g==="throw")throw b;if(O)throw w;return c(w),b}},function(n,o,r){var s=r(30),c=r(33),v=r(102);n.exports=function(h,g,b){var w,O;return v&&s(w=g.constructor)&&w!==b&&c(O=w.prototype)&&O!==b.prototype&&v(h,O),h}},function(n,o,r){var s=r(42);n.exports=function(c,v,h){for(var g in v)s(c,g,v[g],h);return c}},function(n,o,r){var s=r(46),c=r(38),v=r(28),h=r(36),g=v("species");n.exports=function(b){var w=s(b),O=c.f;h&&w&&!w[g]&&O(w,g,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),v=r(39),h=r(44),g=s("".charAt),b=s("".charCodeAt),w=s("".slice),O=function(S){return function(P,A){var R,j,k=v(h(P)),B=c(A),q=k.length;return B<0||B>=q?S?"":void 0:(R=b(k,B))<55296||R>56319||B+1===q||(j=b(k,B+1))<56320||j>57343?S?g(k,B):R:S?w(k,B,B+2):j-56320+(R-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,o,r){var s=r(18),c=r(7).RegExp,v=s(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),h=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:v}},function(n,o,r){var s=r(16),c=r(79).find,v=r(100),h="find",g=!0;h in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),v(h)},function(n,o,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,o,r){var s=r(16),c=r(15),v=r(197),h=r(44),g=r(39),b=r(198),w=c("".indexOf);s({target:"String",proto:!0,forced:!b("includes")},{includes:function(O){return!!~w(g(h(this)),g(v(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(h){var g;return s(h)&&((g=h[v])!==void 0?!!g:c(h)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=r(162),g=s("".replace),b="["+h+"]",w=RegExp("^"+b+b+"*"),O=RegExp(b+b+"*$"),S=function(P){return function(A){var R=v(c(A));return 1&P&&(R=g(R,w,"")),2&P&&(R=g(R,O,"")),R}};n.exports={start:S(1),end:S(2),trim:S(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function g(k){if(r===setTimeout)return setTimeout(k,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(k,0);try{return r(k,0)}catch{try{return r.call(null,k,0)}catch{return r.call(this,k,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:h}catch{s=h}})();var b,w=[],O=!1,S=-1;function P(){O&&b&&(O=!1,b.length?w=b.concat(w):S=-1,w.length&&A())}function A(){if(!O){var k=g(P);O=!0;for(var B=w.length;B;){for(b=w,w=[];++S<B;)b&&b[S].run();S=-1,B=w.length}b=null,O=!1,function(q){if(s===clearTimeout)return clearTimeout(q);if((s===h||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(q);try{s(q)}catch{try{return s.call(null,q)}catch{return s.call(this,q)}}}(k)}}function R(k,B){this.fun=k,this.array=B}function j(){}c.nextTick=function(k){var B=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)B[q-1]=arguments[q];w.push(new R(k,B)),w.length!==1||O||g(A)},R.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=j,c.addListener=j,c.once=j,c.off=j,c.removeListener=j,c.removeAllListeners=j,c.emit=j,c.prependListener=j,c.prependOnceListener=j,c.listeners=function(k){return[]},c.binding=function(k){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(k){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(h,g){var b,w=s(h).constructor;return w===void 0||(b=s(w)[v])==null?g:c(b)}},function(n,o,r){var s=r(7),c=r(99),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),v=r(32),h=r(94),g=r(39),b=r(44),w=r(62),O=r(124),S=r(125);c("match",function(P,A,R){return[function(j){var k=b(this),B=j==null?void 0:w(j,P);return B?s(B,j,k):new RegExp(j)[P](g(k))},function(j){var k=v(this),B=g(j),q=R(A,k,B);if(q.done)return q.value;if(!k.global)return S(k,B);var X=k.unicode;k.lastIndex=0;for(var W,ee=[],J=0;(W=S(k,B))!==null;){var L=g(W[0]);ee[J]=L,L===""&&(k.lastIndex=O(B,h(k.lastIndex),X)),J++}return J===0?null:ee}]})},function(n,o,r){var s,c,v,h,g=r(7),b=r(76),w=r(64),O=r(30),S=r(35),P=r(18),A=r(138),R=r(98),j=r(91),k=r(169),B=r(128),q=g.setImmediate,X=g.clearImmediate,W=g.process,ee=g.Dispatch,J=g.Function,L=g.MessageChannel,G=g.String,Y=0,H={},se="onreadystatechange";try{s=g.location}catch{}var Re=function(Oe){if(S(H,Oe)){var ae=H[Oe];delete H[Oe],ae()}},Se=function(Oe){return function(){Re(Oe)}},ze=function(Oe){Re(Oe.data)},Be=function(Oe){g.postMessage(G(Oe),s.protocol+"//"+s.host)};q&&X||(q=function(Oe){var ae=R(arguments,1);return H[++Y]=function(){b(O(Oe)?Oe:J(Oe),void 0,ae)},c(Y),Y},X=function(Oe){delete H[Oe]},B?c=function(Oe){W.nextTick(Se(Oe))}:ee&&ee.now?c=function(Oe){ee.now(Se(Oe))}:L&&!k?(h=(v=new L).port2,v.port1.onmessage=ze,c=w(h.postMessage,h)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!P(Be)?(c=Be,g.addEventListener("message",ze,!1)):c=se in j("script")?function(Oe){A.appendChild(j("script")).onreadystatechange=function(){A.removeChild(this),Re(Oe)}}:function(Oe){setTimeout(Se(Oe),0)}),n.exports={set:q,clear:X}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(v){var h,g;this.promise=new v(function(b,w){if(h!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");h=b,g=w}),this.resolve=s(h),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return W});var c=r(1);function v(L){throw new Error("[mobx-utils] "+L)}function h(L,G){G===void 0&&(G="Illegal state"),L||v(G)}var g=function(L){return L&&L!==Object.prototype&&Object.getOwnPropertyNames(L).concat(g(Object.getPrototypeOf(L))||[])},b=function(L){return function(G){var Y=g(G);return Y.filter(function(H,se){return Y.indexOf(H)===se})}(L).filter(function(G){return G!=="constructor"&&!~G.indexOf("__")})},w="pending",O="fulfilled",S="rejected";function P(L){switch(this.state){case w:return L.pending&&L.pending(this.value);case S:return L.rejected&&L.rejected(this.value);case O:return L.fulfilled?L.fulfilled(this.value):this.value}}function A(L,G){if(h(arguments.length<=2,"fromPromise expects up to two arguments"),h(typeof L=="function"||typeof L=="object"&&L&&typeof L.then=="function","Please pass a promise or function to fromPromise"),L.isPromiseBasedObservable===!0)return L;typeof L=="function"&&(L=new Promise(L));var Y=L;L.then(Object(c.k)("observableFromPromise-resolve",function(se){Y.value=se,Y.state=O}),Object(c.k)("observableFromPromise-reject",function(se){Y.value=se,Y.state=S})),Y.isPromiseBasedObservable=!0,Y.case=P;var H=G&&G.state===O?G.value:void 0;return Object(c.q)(Y,{value:H,state:w},{},{deep:!1}),Y}(function(L){L.reject=Object(c.k)("fromPromise.reject",function(G){var Y=L(Promise.reject(G));return Y.state=S,Y.value=G,Y}),L.resolve=Object(c.k)("fromPromise.resolve",function(G){G===void 0&&(G=void 0);var Y=L(Promise.resolve(G));return Y.state=O,Y.value=G,Y})})(A||(A={}));var R=function(L,G,Y,H){var se,Re=arguments.length,Se=Re<3?G:H===null?H=Object.getOwnPropertyDescriptor(G,Y):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Se=Reflect.decorate(L,G,Y,H);else for(var ze=L.length-1;ze>=0;ze--)(se=L[ze])&&(Se=(Re<3?se(Se):Re>3?se(G,Y,Se):se(G,Y))||Se);return Re>3&&Se&&Object.defineProperty(G,Y,Se),Se};(function(){function L(G,Y){var H=this;Object(c.G)(function(){H.current=Y,H.subscription=G.subscribe(H)})}L.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},L.prototype.next=function(G){this.current=G},L.prototype.complete=function(){this.dispose()},L.prototype.error=function(G){this.current=G,this.dispose()},R([c.C.ref],L.prototype,"current",void 0),R([c.k.bound],L.prototype,"next",null),R([c.k.bound],L.prototype,"complete",null),R([c.k.bound],L.prototype,"error",null)})();var j=function(){return j=Object.assign||function(L){for(var G,Y=1,H=arguments.length;Y<H;Y++)for(var se in G=arguments[Y])Object.prototype.hasOwnProperty.call(G,se)&&(L[se]=G[se]);return L},j.apply(this,arguments)},k=function(L,G,Y,H){var se,Re=arguments.length,Se=Re<3?G:H===null?H=Object.getOwnPropertyDescriptor(G,Y):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Se=Reflect.decorate(L,G,Y,H);else for(var ze=L.length-1;ze>=0;ze--)(se=L[ze])&&(Se=(Re<3?se(Se):Re>3?se(G,Y,Se):se(G,Y))||Se);return Re>3&&Se&&Object.defineProperty(G,Y,Se),Se},B=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function L(G){var Y=this;this.model=G,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(H){return Y.localValues.has(H)},h(Object(c.A)(G),"createViewModel expects an observable object"),b(G).forEach(function(H){if(H!==c.a&&H!=="__mobxDidRunLazyInitializers"){if(h(B.indexOf(H)===-1,"The propertyname "+H+" is reserved and cannot be used with viewModels"),Object(c.w)(G,H)){var se=Object(c.h)(G,H).derivation;Y.localComputedValues.set(H,Object(c.m)(se.bind(Y)))}var Re=Object.getOwnPropertyDescriptor(G,H),Se=Re?{enumerable:Re.enumerable}:{};Object.defineProperty(Y,H,j(j({},Se),{configurable:!0,get:function(){return Object(c.w)(G,H)?Y.localComputedValues.get(H).get():Y.isPropertyDirty(H)?Y.localValues.get(H):Y.model[H]},set:Object(c.k)(function(ze){ze!==Y.model[H]?Y.localValues.set(H,ze):Y.localValues.delete(H)})}))}})}Object.defineProperty(L.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),L.prototype.submit=function(){var G=this;Object(c.B)(this.localValues).forEach(function(Y){var H=G.localValues.get(Y),se=G.model[Y];Object(c.y)(se)?se.replace(H):Object(c.z)(se)?(se.clear(),se.merge(H)):Object(c.v)(H)||(G.model[Y]=H)}),this.localValues.clear()},L.prototype.reset=function(){this.localValues.clear()},L.prototype.resetProperty=function(G){this.localValues.delete(G)},k([c.m],L.prototype,"isDirty",null),k([c.m],L.prototype,"changedValues",null),k([c.k.bound],L.prototype,"submit",null),k([c.k.bound],L.prototype,"reset",null),k([c.k.bound],L.prototype,"resetProperty",null)})();function q(L){if(!L)return"ROOT";for(var G=[];L.parent;)G.push(L.path),L=L.parent;return G.reverse().join("/")}function X(L){return Object(c.A)(L)||Object(c.y)(L)||Object(c.z)(L)}function W(L,G){var Y=new WeakMap;function H(Se){var ze=Y.get(Se.object);(function(Be,Oe){switch(Be.type){case"add":se(Be.newValue,Oe,Be.name);break;case"update":Re(Be.oldValue),se(Be.newValue,Oe,Be.name||""+Be.index);break;case"remove":case"delete":Re(Be.oldValue);break;case"splice":Be.removed.map(Re),Be.added.forEach(function(Pe,Ke){return se(Pe,Oe,""+(Be.index+Ke))});for(var ae=Be.index+Be.addedCount;ae<Be.object.length;ae++)if(X(Be.object[ae])){var ve=Y.get(Be.object[ae]);ve&&(ve.path=""+ae)}}})(Se,ze),G(Se,q(ze),L)}function se(Se,ze,Be){if(X(Se)){var Oe=Y.get(Se);if(Oe){if(Oe.parent!==ze||Oe.path!==Be)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+q(ze)+"/"+Be+"', but it already exists at '"+q(Oe.parent)+"/"+Oe.path+"'")}else{var ae={parent:ze,path:Be,dispose:Object(c.D)(Se,H)};Y.set(Se,ae),Object(c.p)(Se).forEach(function(ve){var Pe=ve[0];return se(ve[1],ae,Pe)})}}}function Re(Se){if(X(Se)){var ze=Y.get(Se);if(!ze)return;Y.delete(Se),ze.dispose(),Object(c.L)(Se).forEach(Re)}}return se(L,void 0,""),function(){Re(L)}}var ee,J=(ee=function(L,G){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,H){Y.__proto__=H}||function(Y,H){for(var se in H)H.hasOwnProperty(se)&&(Y[se]=H[se])},ee(L,G)},function(L,G){function Y(){this.constructor=L}ee(L,G),L.prototype=G===null?Object.create(G):(Y.prototype=G.prototype,new Y)});(function(L){function G(Y,H,se){var Re=se===void 0?{}:se,Se=Re.name,ze=Se===void 0?"ogm"+(1e3*Math.random()|0):Se,Be=Re.keyToName,Oe=Be===void 0?function(Pe){return""+Pe}:Be,ae=L.call(this)||this;ae._keyToName=Oe,ae._groupBy=H,ae._ogmInfoKey=Symbol("ogmInfo"+ze),ae._base=Y;for(var ve=0;ve<Y.length;ve++)ae._addItem(Y[ve]);return ae._disposeBaseObserver=Object(c.D)(ae._base,function(Pe){if(Pe.type==="splice")Object(c.J)(function(){for(var Ke=0,je=Pe.removed;Ke<je.length;Ke++){var at=je[Ke];ae._removeItem(at)}for(var gt=0,Mt=Pe.added;gt<Mt.length;gt++){var Xt=Mt[gt];ae._addItem(Xt)}});else{if(Pe.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ae._removeItem(Pe.oldValue),ae._addItem(Pe.newValue)})}}),ae}J(G,L),G.prototype.clear=function(){throw new Error("not supported")},G.prototype.delete=function(Y){throw new Error("not supported")},G.prototype.set=function(Y,H){throw new Error("not supported")},G.prototype.dispose=function(){this._disposeBaseObserver();for(var Y=0;Y<this._base.length;Y++){var H=this._base[Y];H[this._ogmInfoKey].reaction(),delete H[this._ogmInfoKey]}},G.prototype._getGroupArr=function(Y){var H=L.prototype.get.call(this,Y);return H===void 0&&(H=Object(c.C)([],{name:"GroupArray["+this._keyToName(Y)+"]",deep:!1}),L.prototype.set.call(this,Y,H)),H},G.prototype._removeFromGroupArr=function(Y,H){var se=L.prototype.get.call(this,Y);se.length===1?L.prototype.delete.call(this,Y):(H===se.length-1||(se[H]=se[se.length-1],se[H][this._ogmInfoKey].groupArrIndex=H),se.length--)},G.prototype._addItem=function(Y){var H=this,se=this._groupBy(Y),Re=this._getGroupArr(se),Se={groupByValue:se,groupArrIndex:Re.length,reaction:Object(c.F)(function(){return H._groupBy(Y)},function(ze,Be){var Oe=Y[H._ogmInfoKey];H._removeFromGroupArr(Oe.groupByValue,Oe.groupArrIndex);var ae=H._getGroupArr(ze),ve=ae.length;ae.push(Y),Oe.groupByValue=ze,Oe.groupArrIndex=ve})};Object.defineProperty(Y,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Se}),Re.push(Y)},G.prototype._removeItem=function(Y){var H=Y[this._ogmInfoKey];this._removeFromGroupArr(H.groupByValue,H.groupArrIndex),H.reaction(),delete Y[this._ogmInfoKey]}})(c.b),function(){function L(G,Y){this.base=G,this.args=Y,this.closestIdx=0,this.isDisposed=!1;for(var H=this.closest=this.root=G,se=0;se<this.args.length-1&&(H=H.get(Y[se]));se++)this.closest=H;this.closestIdx=se}return L.prototype.exists=function(){this.assertNotDisposed();var G=this.args.length;return this.closestIdx>=G-1&&this.closest.has(this.args[G-1])},L.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},L.prototype.set=function(G){this.assertNotDisposed();for(var Y=this.args.length,H=this.closest,se=this.closestIdx;se<Y-1;se++){var Re=new Map;H.set(this.args[se],Re),H=Re}this.closestIdx=Y-1,this.closest=H,H.set(this.args[Y-1],G)},L.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var G=this.args.length;this.closest.delete(this.args[G-1]);for(var Y=this.root,H=[Y],se=0;se<G-1;se++)Y=Y.get(this.args[se]),H.push(Y);for(se=H.length-1;se>0;se--)H[se].size===0&&H[se-1].delete(this.args[se-1]);this.isDisposed=!0},L.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},L}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,v,h){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)b[111+P]="f"+P;for(P=0;P<=9;++P)b[P+96]=P.toString();X.prototype.bind=function(W,ee,J){var L=this;return W=W instanceof Array?W:[W],L._bindMultiple.call(L,W,ee,J),L},X.prototype.unbind=function(W,ee){return this.bind.call(this,W,function(){},ee)},X.prototype.trigger=function(W,ee){var J=this;return J._directMap[W+":"+ee]&&J._directMap[W+":"+ee]({},W),J},X.prototype.reset=function(){var W=this;return W._callbacks={},W._directMap={},W},X.prototype.stopCallback=function(W,ee){if((" "+ee.className+" ").indexOf(" mousetrap ")>-1||q(ee,this.target))return!1;if("composedPath"in W&&typeof W.composedPath=="function"){var J=W.composedPath()[0];J!==W.target&&(ee=J)}return ee.tagName=="INPUT"||ee.tagName=="SELECT"||ee.tagName=="TEXTAREA"||ee.isContentEditable},X.prototype.handleKey=function(){var W=this;return W._handleKey.apply(W,arguments)},X.addKeycodes=function(W){for(var ee in W)W.hasOwnProperty(ee)&&(b[ee]=W[ee]);g=null},X.init=function(){var W=X(v);for(var ee in W)ee.charAt(0)!=="_"&&(X[ee]=function(J){return function(){return W[J].apply(W,arguments)}}(ee))},X.init(),c.Mousetrap=X,n.exports&&(n.exports=X),(s=(function(){return X}).call(o,r,o,n))===void 0||(n.exports=s)}function A(W,ee,J){W.addEventListener?W.addEventListener(ee,J,!1):W.attachEvent("on"+ee,J)}function R(W){if(W.type=="keypress"){var ee=String.fromCharCode(W.which);return W.shiftKey||(ee=ee.toLowerCase()),ee}return b[W.which]?b[W.which]:w[W.which]?w[W.which]:String.fromCharCode(W.which).toLowerCase()}function j(W){return W=="shift"||W=="ctrl"||W=="alt"||W=="meta"}function k(W,ee,J){return J||(J=function(){if(!g)for(var L in g={},b)L>95&&L<112||b.hasOwnProperty(L)&&(g[b[L]]=L);return g}()[W]?"keydown":"keypress"),J=="keypress"&&ee.length&&(J="keydown"),J}function B(W,ee){var J,L,G,Y=[];for(J=function(H){return H==="+"?["+"]:(H=H.replace(/\+{2}/g,"+plus")).split("+")}(W),G=0;G<J.length;++G)L=J[G],S[L]&&(L=S[L]),ee&&ee!="keypress"&&O[L]&&(L=O[L],Y.push("shift")),j(L)&&Y.push(L);return{key:L,modifiers:Y,action:ee=k(L,Y,ee)}}function q(W,ee){return W!==null&&W!==v&&(W===ee||q(W.parentNode,ee))}function X(W){var ee=this;if(W=W||v,!(ee instanceof X))return new X(W);ee.target=W,ee._callbacks={},ee._directMap={};var J,L={},G=!1,Y=!1,H=!1;function se(ae){ae=ae||{};var ve,Pe=!1;for(ve in L)ae[ve]?Pe=!0:L[ve]=0;Pe||(H=!1)}function Re(ae,ve,Pe,Ke,je,at){var gt,Mt,Xt,De,ge=[],Ae=Pe.type;if(!ee._callbacks[ae])return[];for(Ae=="keyup"&&j(ae)&&(ve=[ae]),gt=0;gt<ee._callbacks[ae].length;++gt)if(Mt=ee._callbacks[ae][gt],(Ke||!Mt.seq||L[Mt.seq]==Mt.level)&&Ae==Mt.action&&(Ae=="keypress"&&!Pe.metaKey&&!Pe.ctrlKey||(Xt=ve,De=Mt.modifiers,Xt.sort().join(",")===De.sort().join(",")))){var ht=!Ke&&Mt.combo==je,Wt=Ke&&Mt.seq==Ke&&Mt.level==at;(ht||Wt)&&ee._callbacks[ae].splice(gt,1),ge.push(Mt)}return ge}function Se(ae,ve,Pe,Ke){ee.stopCallback(ve,ve.target||ve.srcElement,Pe,Ke)||ae(ve,Pe)===!1&&(function(je){je.preventDefault?je.preventDefault():je.returnValue=!1}(ve),function(je){je.stopPropagation?je.stopPropagation():je.cancelBubble=!0}(ve))}function ze(ae){typeof ae.which!="number"&&(ae.which=ae.keyCode);var ve=R(ae);ve&&(ae.type!="keyup"||G!==ve?ee.handleKey(ve,function(Pe){var Ke=[];return Pe.shiftKey&&Ke.push("shift"),Pe.altKey&&Ke.push("alt"),Pe.ctrlKey&&Ke.push("ctrl"),Pe.metaKey&&Ke.push("meta"),Ke}(ae),ae):G=!1)}function Be(ae,ve,Pe,Ke){function je(Xt){return function(){H=Xt,++L[ae],clearTimeout(J),J=setTimeout(se,1e3)}}function at(Xt){Se(Pe,Xt,ae),Ke!=="keyup"&&(G=R(Xt)),setTimeout(se,10)}L[ae]=0;for(var gt=0;gt<ve.length;++gt){var Mt=gt+1===ve.length?at:je(Ke||B(ve[gt+1]).action);Oe(ve[gt],Mt,Ke,ae,gt)}}function Oe(ae,ve,Pe,Ke,je){ee._directMap[ae+":"+Pe]=ve;var at,gt=(ae=ae.replace(/\s+/g," ")).split(" ");gt.length>1?Be(ae,gt,ve,Pe):(at=B(ae,Pe),ee._callbacks[at.key]=ee._callbacks[at.key]||[],Re(at.key,at.modifiers,{type:at.action},Ke,ae,je),ee._callbacks[at.key][Ke?"unshift":"push"]({callback:ve,modifiers:at.modifiers,action:at.action,seq:Ke,level:je,combo:ae}))}ee._handleKey=function(ae,ve,Pe){var Ke,je=Re(ae,ve,Pe),at={},gt=0,Mt=!1;for(Ke=0;Ke<je.length;++Ke)je[Ke].seq&&(gt=Math.max(gt,je[Ke].level));for(Ke=0;Ke<je.length;++Ke)if(je[Ke].seq){if(je[Ke].level!=gt)continue;Mt=!0,at[je[Ke].seq]=1,Se(je[Ke].callback,Pe,je[Ke].combo,je[Ke].seq)}else Mt||Se(je[Ke].callback,Pe,je[Ke].combo);var Xt=Pe.type=="keypress"&&Y;Pe.type!=H||j(ae)||Xt||se(at),Y=Mt&&Pe.type=="keydown"},ee._bindMultiple=function(ae,ve,Pe){for(var Ke=0;Ke<ae.length;++Ke)Oe(ae[Ke],ve,Pe)},A(W,"keypress",ze),A(W,"keydown",ze),A(W,"keyup",ze)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),v=r(30),h=r(33),g=s.TypeError;n.exports=function(b,w){var O,S;if(w==="string"&&v(O=b.toString)&&!h(S=c(O,b))||v(O=b.valueOf)&&!h(S=c(O,b))||w!=="string"&&v(O=b.toString)&&!h(S=c(O,b)))return S;throw g("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),v=r(92),h=s.WeakMap;n.exports=c(h)&&/native code/.test(v(h))},function(n,o,r){var s=r(36),c=r(38),v=r(32),h=r(41),g=r(77);n.exports=s?Object.defineProperties:function(b,w){v(b);for(var O,S=h(w),P=g(w),A=P.length,R=0;A>R;)c.f(b,O=P[R++],S[O]);return b}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),v=r(99),h=r(33),g=r(28)("species"),b=s.Array;n.exports=function(w){var O;return c(w)&&(O=w.constructor,(v(O)&&(O===b||c(O.prototype))||h(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?b:O}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),h=r(78),g=r(80),b=function(){return this};n.exports=function(w,O,S,P){var A=O+" Iterator";return w.prototype=c(s,{next:v(+!P,S)}),h(w,A,!1,!0),g[A]=b,w}},function(n,o,r){var s=r(7),c=r(30),v=s.String,h=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw h("Can't set "+v(g)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(95),g=r(42),b=r(144),w=r(117),O=r(119),S=r(30),P=r(33),A=r(18),R=r(120),j=r(78),k=r(148);n.exports=function(B,q,X){var W=B.indexOf("Map")!==-1,ee=B.indexOf("Weak")!==-1,J=W?"set":"add",L=c[B],G=L&&L.prototype,Y=L,H={},se=function(ae){var ve=v(G[ae]);g(G,ae,ae=="add"?function(Pe){return ve(this,Pe===0?0:Pe),this}:ae=="delete"?function(Pe){return!(ee&&!P(Pe))&&ve(this,Pe===0?0:Pe)}:ae=="get"?function(Pe){return ee&&!P(Pe)?void 0:ve(this,Pe===0?0:Pe)}:ae=="has"?function(Pe){return!(ee&&!P(Pe))&&ve(this,Pe===0?0:Pe)}:function(Pe,Ke){return ve(this,Pe===0?0:Pe,Ke),this})};if(h(B,!S(L)||!(ee||G.forEach&&!A(function(){new L().entries().next()}))))Y=X.getConstructor(q,B,W,J),b.enable();else if(h(B,!0)){var Re=new Y,Se=Re[J](ee?{}:-0,1)!=Re,ze=A(function(){Re.has(1)}),Be=R(function(ae){new L(ae)}),Oe=!ee&&A(function(){for(var ae=new L,ve=5;ve--;)ae[J](ve,ve);return!ae.has(-0)});Be||((Y=q(function(ae,ve){O(ae,G);var Pe=k(new L,ae,Y);return ve!=null&&w(ve,Pe[J],{that:Pe,AS_ENTRIES:W}),Pe})).prototype=G,G.constructor=Y),(ze||Oe)&&(se("delete"),se("has"),W&&se("get")),(Oe||Se)&&se(J),ee&&G.clear&&delete G.clear}return H[B]=Y,s({global:!0,forced:Y!=L},H),j(Y,B),ee||X.setStrong(Y,B,W),Y}},function(n,o,r){var s=r(18),c=r(33),v=r(51),h=r(184),g=Object.isExtensible,b=s(function(){});n.exports=b||h?function(w){return!!c(w)&&(!h||v(w)!="ArrayBuffer")&&(!g||g(w))}:g},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),v=r(149),h=r(64),g=r(119),b=r(117),w=r(116),O=r(150),S=r(36),P=r(144).fastKey,A=r(58),R=A.set,j=A.getterFor;n.exports={getConstructor:function(k,B,q,X){var W=k(function(Y,H){g(Y,ee),R(Y,{type:B,index:c(null),first:void 0,last:void 0,size:0}),S||(Y.size=0),H!=null&&b(H,Y[X],{that:Y,AS_ENTRIES:q})}),ee=W.prototype,J=j(B),L=function(Y,H,se){var Re,Se,ze=J(Y),Be=G(Y,H);return Be?Be.value=se:(ze.last=Be={index:Se=P(H,!0),key:H,value:se,previous:Re=ze.last,next:void 0,removed:!1},ze.first||(ze.first=Be),Re&&(Re.next=Be),S?ze.size++:Y.size++,Se!=="F"&&(ze.index[Se]=Be)),Y},G=function(Y,H){var se,Re=J(Y),Se=P(H);if(Se!=="F")return Re.index[Se];for(se=Re.first;se;se=se.next)if(se.key==H)return se};return v(ee,{clear:function(){for(var Y=J(this),H=Y.index,se=Y.first;se;)se.removed=!0,se.previous&&(se.previous=se.previous.next=void 0),delete H[se.index],se=se.next;Y.first=Y.last=void 0,S?Y.size=0:this.size=0},delete:function(Y){var H=this,se=J(H),Re=G(H,Y);if(Re){var Se=Re.next,ze=Re.previous;delete se.index[Re.index],Re.removed=!0,ze&&(ze.next=Se),Se&&(Se.previous=ze),se.first==Re&&(se.first=Se),se.last==Re&&(se.last=ze),S?se.size--:H.size--}return!!Re},forEach:function(Y){for(var H,se=J(this),Re=h(Y,arguments.length>1?arguments[1]:void 0);H=H?H.next:se.first;)for(Re(H.value,H.key,this);H&&H.removed;)H=H.previous},has:function(Y){return!!G(this,Y)}}),v(ee,q?{get:function(Y){var H=G(this,Y);return H&&H.value},set:function(Y,H){return L(this,Y===0?0:Y,H)}}:{add:function(Y){return L(this,Y=Y===0?0:Y,Y)}}),S&&s(ee,"size",{get:function(){return J(this).size}}),W},setStrong:function(k,B,q){var X=B+" Iterator",W=j(B),ee=j(X);w(k,B,function(J,L){R(this,{type:X,target:J,state:W(J),kind:L,last:void 0})},function(){for(var J=ee(this),L=J.kind,G=J.last;G&&G.removed;)G=G.previous;return J.target&&(J.last=G=G?G.next:J.state.first)?L=="keys"?{value:G.key,done:!1}:L=="values"?{value:G.value,done:!1}:{value:[G.key,G.value],done:!1}:(J.target=void 0,{value:void 0,done:!0})},q?"entries":"values",!q,!0),O(B)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(40),g=r(189),b=r(145),w=r(99),O=r(45),S=r(63),P=r(146),A=r(118),R=s.Array;n.exports=function(j){var k=h(j),B=w(this),q=arguments.length,X=q>1?arguments[1]:void 0,W=X!==void 0;W&&(X=c(X,q>2?arguments[2]:void 0));var ee,J,L,G,Y,H,se=A(k),Re=0;if(!se||this==R&&b(se))for(ee=O(k),J=B?new this(ee):R(ee);ee>Re;Re++)H=W?X(k[Re],Re):k[Re],S(J,Re,H);else for(Y=(G=P(k,se)).next,J=B?new this:[];!(L=v(Y,G)).done;Re++)H=W?g(G,X,[L.value,Re],!0):L.value,S(J,Re,H);return J.length=Re,J}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(v,h,g,b){try{return b?h(s(g)[0],g[1]):h(g)}catch(w){c(v,"throw",w)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),v=r(56),h=r(40),g=r(45),b=r(39),w=r(18),O=r(193),S=r(121),P=r(194),A=r(195),R=r(70),j=r(196),k=[],B=c(k.sort),q=c(k.push),X=w(function(){k.sort(void 0)}),W=w(function(){k.sort(null)}),ee=S("sort"),J=!w(function(){if(R)return R<70;if(!(P&&P>3)){if(A)return!0;if(j)return j<603;var L,G,Y,H,se="";for(L=65;L<76;L++){switch(G=String.fromCharCode(L),L){case 66:case 69:case 70:case 72:Y=3;break;case 68:case 71:Y=4;break;default:Y=2}for(H=0;H<47;H++)k.push({k:G+H,v:Y})}for(k.sort(function(Re,Se){return Se.v-Re.v}),H=0;H<k.length;H++)G=k[H].k.charAt(0),se.charAt(se.length-1)!==G&&(se+=G);return se!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:X||!W||!ee||!J},{sort:function(L){L!==void 0&&v(L);var G=h(this);if(J)return L===void 0?B(G):B(G,L);var Y,H,se=[],Re=g(G);for(H=0;H<Re;H++)H in G&&q(se,G[H]);for(O(se,function(Se){return function(ze,Be){return Be===void 0?-1:ze===void 0?1:Se!==void 0?+Se(ze,Be)||0:b(ze)>b(Be)?1:-1}}(L)),Y=se.length,H=0;H<Y;)G[H]=se[H++];for(;H<Re;)delete G[H++];return G}})},function(n,o,r){var s=r(114),c=Math.floor,v=function(b,w){var O=b.length,S=c(O/2);return O<8?h(b,w):g(b,v(s(b,0,S),w),v(s(b,S),w),w)},h=function(b,w){for(var O,S,P=b.length,A=1;A<P;){for(S=A,O=b[A];S&&w(b[S-1],O)>0;)b[S]=b[--S];S!==A++&&(b[S]=O)}return b},g=function(b,w,O,S){for(var P=w.length,A=O.length,R=0,j=0;R<P||j<A;)b[R+j]=R<P&&j<A?S(w[R],O[j])<=0?w[R++]:O[j++]:R<P?w[R++]:O[j++];return b};n.exports=v},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(h){if(c(h))throw v("The method doesn't accept regular expressions");return h}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(h){return c(function(){return!!v[h]()||"​᠎"[h]()!=="​᠎"||s&&v[h].name!==h})}},function(n,o,r){var s=r(15),c=r(40),v=Math.floor,h=s("".charAt),g=s("".replace),b=s("".slice),w=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(S,P,A,R,j,k){var B=A+S.length,q=R.length,X=O;return j!==void 0&&(j=c(j),X=w),g(k,X,function(W,ee){var J;switch(h(ee,0)){case"$":return"$";case"&":return S;case"`":return b(P,0,A);case"'":return b(P,B);case"<":J=j[b(ee,1,-1)];break;default:var L=+ee;if(L===0)return W;if(L>q){var G=v(L/10);return G===0?W:G<=q?R[G-1]===void 0?h(ee,1):R[G-1]+h(ee,1):W}J=R[L-1]}return J===void 0?"":J})}},function(n,o,r){var s=r(36),c=r(15),v=r(34),h=r(18),g=r(77),b=r(112),w=r(84),O=r(40),S=r(85),P=Object.assign,A=Object.defineProperty,R=c([].concat);n.exports=!P||h(function(){if(s&&P({b:1},P(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var j={},k={},B=Symbol(),q="abcdefghijklmnopqrst";return j[B]=7,q.split("").forEach(function(X){k[X]=X}),P({},j)[B]!=7||g(P({},k)).join("")!=q})?function(j,k){for(var B=O(j),q=arguments.length,X=1,W=b.f,ee=w.f;q>X;)for(var J,L=S(arguments[X++]),G=W?R(g(L),W(L)):g(L),Y=G.length,H=0;Y>H;)J=G[H++],s&&!v(ee,L,J)||(B[J]=L[J]);return B}:P},function(n,o,r){var s=r(7),c=r(15),v=r(56),h=r(33),g=r(35),b=r(98),w=s.Function,O=c([].concat),S=c([].join),P={},A=function(R,j,k){if(!g(P,j)){for(var B=[],q=0;q<j;q++)B[q]="a["+q+"]";P[j]=w("C,a","return new C("+S(B,",")+")")}return P[j](R,k)};n.exports=w.bind||function(R){var j=v(this),k=j.prototype,B=b(arguments,1),q=function(){var X=O(B,b(arguments));return this instanceof q?A(j,X.length,X):j.apply(R,X)};return h(k)&&(q.prototype=k),q}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=/"/g,g=s("".replace);n.exports=function(b,w,O,S){var P=v(c(b)),A="<"+w;return O!==""&&(A+=" "+O+'="'+g(v(S),h,"&quot;")+'"'),A+">"+P+"</"+w+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,v,h,g=r(16),b=r(71),w=r(7),O=r(46),S=r(34),P=r(209),A=r(42),R=r(149),j=r(102),k=r(78),B=r(150),q=r(56),X=r(30),W=r(33),ee=r(119),J=r(92),L=r(117),G=r(120),Y=r(164),H=r(168).set,se=r(210),Re=r(213),Se=r(214),ze=r(170),Be=r(215),Oe=r(58),ae=r(95),ve=r(28),Pe=r(216),Ke=r(128),je=r(70),at=ve("species"),gt="Promise",Mt=Oe.getterFor(gt),Xt=Oe.set,De=Oe.getterFor(gt),ge=P&&P.prototype,Ae=P,ht=ge,Wt=w.TypeError,Ot=w.document,rn=w.process,yn=ze.f,Tn=yn,pn=!!(Ot&&Ot.createEvent&&w.dispatchEvent),ft=X(w.PromiseRejectionEvent),On="unhandledrejection",Fe=!1,mn=ae(gt,function(){var Ce=J(Ae),ot=Ce!==String(Ae);if(!ot&&je===66||b&&!ht.finally)return!0;if(je>=51&&/native code/.test(Ce))return!1;var en=new Ae(function(Nn){Nn(1)}),qt=function(Nn){Nn(function(){},function(){})};return(en.constructor={})[at]=qt,!(Fe=en.then(function(){})instanceof qt)||!ot&&Pe&&!ft}),Kn=mn||!G(function(Ce){Ae.all(Ce).catch(function(){})}),ne=function(Ce){var ot;return!(!W(Ce)||!X(ot=Ce.then))&&ot},$n=function(Ce,ot){if(!Ce.notified){Ce.notified=!0;var en=Ce.reactions;se(function(){for(var qt=Ce.value,Nn=Ce.state==1,_r=0;en.length>_r;){var ni,mi,Bo,Ho=en[_r++],xn=Nn?Ho.ok:Ho.fail,Bn=Ho.resolve,Xn=Ho.reject,or=Ho.domain;try{xn?(Nn||(Ce.rejection===2&&Dn(Ce),Ce.rejection=1),xn===!0?ni=qt:(or&&or.enter(),ni=xn(qt),or&&(or.exit(),Bo=!0)),ni===Ho.promise?Xn(Wt("Promise-chain cycle")):(mi=ne(ni))?S(mi,ni,Bn,Xn):Bn(ni)):Xn(qt)}catch(Kr){or&&!Bo&&or.exit(),Xn(Kr)}}Ce.reactions=[],Ce.notified=!1,ot&&!Ce.rejection&&Ur(Ce)})}},xr=function(Ce,ot,en){var qt,Nn;pn?((qt=Ot.createEvent("Event")).promise=ot,qt.reason=en,qt.initEvent(Ce,!1,!0),w.dispatchEvent(qt)):qt={promise:ot,reason:en},!ft&&(Nn=w["on"+Ce])?Nn(qt):Ce===On&&Se("Unhandled promise rejection",en)},Ur=function(Ce){S(H,w,function(){var ot,en=Ce.facade,qt=Ce.value;if(no(Ce)&&(ot=Be(function(){Ke?rn.emit("unhandledRejection",qt,en):xr(On,en,qt)}),Ce.rejection=Ke||no(Ce)?2:1,ot.error))throw ot.value})},no=function(Ce){return Ce.rejection!==1&&!Ce.parent},Dn=function(Ce){S(H,w,function(){var ot=Ce.facade;Ke?rn.emit("rejectionHandled",ot):xr("rejectionhandled",ot,Ce.value)})},ko=function(Ce,ot,en){return function(qt){Ce(ot,qt,en)}},Ee=function(Ce,ot,en){Ce.done||(Ce.done=!0,en&&(Ce=en),Ce.value=ot,Ce.state=2,$n(Ce,!0))},Xe=function(Ce,ot,en){if(!Ce.done){Ce.done=!0,en&&(Ce=en);try{if(Ce.facade===ot)throw Wt("Promise can't be resolved itself");var qt=ne(ot);qt?se(function(){var Nn={done:!1};try{S(qt,ot,ko(Xe,Nn,Ce),ko(Ee,Nn,Ce))}catch(_r){Ee(Nn,_r,Ce)}}):(Ce.value=ot,Ce.state=1,$n(Ce,!1))}catch(Nn){Ee({done:!1},Nn,Ce)}}};if(mn&&(ht=(Ae=function(Ce){ee(this,ht),q(Ce),S(s,this);var ot=Mt(this);try{Ce(ko(Xe,ot),ko(Ee,ot))}catch(en){Ee(ot,en)}}).prototype,(s=function(Ce){Xt(this,{type:gt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=R(ht,{then:function(Ce,ot){var en=De(this),qt=en.reactions,Nn=yn(Y(this,Ae));return Nn.ok=!X(Ce)||Ce,Nn.fail=X(ot)&&ot,Nn.domain=Ke?rn.domain:void 0,en.parent=!0,qt[qt.length]=Nn,en.state!=0&&$n(en,!1),Nn.promise},catch:function(Ce){return this.then(void 0,Ce)}}),c=function(){var Ce=new s,ot=Mt(Ce);this.promise=Ce,this.resolve=ko(Xe,ot),this.reject=ko(Ee,ot)},ze.f=yn=function(Ce){return Ce===Ae||Ce===v?new c(Ce):Tn(Ce)},!b&&X(P)&&ge!==Object.prototype)){h=ge.then,Fe||(A(ge,"then",function(Ce,ot){var en=this;return new Ae(function(qt,Nn){S(h,en,qt,Nn)}).then(Ce,ot)},{unsafe:!0}),A(ge,"catch",ht.catch,{unsafe:!0}));try{delete ge.constructor}catch{}j&&j(ge,ht)}g({global:!0,wrap:!0,forced:mn},{Promise:Ae}),k(Ae,gt,!1,!0),B(gt),v=O(gt),g({target:gt,stat:!0,forced:mn},{reject:function(Ce){var ot=yn(this);return S(ot.reject,void 0,Ce),ot.promise}}),g({target:gt,stat:!0,forced:b||mn},{resolve:function(Ce){return Re(b&&this===v?Ae:this,Ce)}}),g({target:gt,stat:!0,forced:Kn},{all:function(Ce){var ot=this,en=yn(ot),qt=en.resolve,Nn=en.reject,_r=Be(function(){var ni=q(ot.resolve),mi=[],Bo=0,Ho=1;L(Ce,function(xn){var Bn=Bo++,Xn=!1;Ho++,S(ni,ot,xn).then(function(or){Xn||(Xn=!0,mi[Bn]=or,--Ho||qt(mi))},Nn)}),--Ho||qt(mi)});return _r.error&&Nn(_r.value),en.promise},race:function(Ce){var ot=this,en=yn(ot),qt=en.reject,Nn=Be(function(){var _r=q(ot.resolve);L(Ce,function(ni){S(_r,ot,ni).then(en.resolve,qt)})});return Nn.error&&qt(Nn.value),en.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,v,h,g,b,w,O,S=r(7),P=r(64),A=r(50).f,R=r(168).set,j=r(169),k=r(211),B=r(212),q=r(128),X=S.MutationObserver||S.WebKitMutationObserver,W=S.document,ee=S.process,J=S.Promise,L=A(S,"queueMicrotask"),G=L&&L.value;G||(s=function(){var Y,H;for(q&&(Y=ee.domain)&&Y.exit();c;){H=c.fn,c=c.next;try{H()}catch(se){throw c?h():v=void 0,se}}v=void 0,Y&&Y.enter()},j||q||B||!X||!W?!k&&J&&J.resolve?((w=J.resolve(void 0)).constructor=J,O=P(w.then,w),h=function(){O(s)}):q?h=function(){ee.nextTick(s)}:(R=P(R,S),h=function(){R(s)}):(g=!0,b=W.createTextNode(""),new X(s).observe(b,{characterData:!0}),h=function(){b.data=g=!g})),n.exports=G||function(Y){var H={fn:Y,next:void 0};v&&(v.next=H),c||(c=H,h()),v=H}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),v=r(170);n.exports=function(h,g){if(s(h),c(g)&&g.constructor===h)return g;var b=v.f(h);return(0,b.resolve)(g),b.promise}},function(n,o,r){var s=r(7);n.exports=function(c,v){var h=s.console;h&&h.error&&(arguments.length==1?h.error(c):h.error(c,v))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),v=r(45);n.exports=function(h){for(var g=s(this),b=v(g),w=arguments.length,O=c(w>1?arguments[1]:void 0,b),S=w>2?arguments[2]:void 0,P=S===void 0?b:c(S,b);P>O;)g[O++]=h;return g}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(59),g=r(160),b=r(219),w=r(18),O=c.RangeError,S=c.String,P=Math.floor,A=v(b),R=v("".slice),j=v(1 .toFixed),k=function(W,ee,J){return ee===0?J:ee%2==1?k(W,ee-1,J*W):k(W*W,ee/2,J)},B=function(W,ee,J){for(var L=-1,G=J;++L<6;)G+=ee*W[L],W[L]=G%1e7,G=P(G/1e7)},q=function(W,ee){for(var J=6,L=0;--J>=0;)L+=W[J],W[J]=P(L/ee),L=L%ee*1e7},X=function(W){for(var ee=6,J="";--ee>=0;)if(J!==""||ee===0||W[ee]!==0){var L=S(W[ee]);J=J===""?L:J+A("0",7-L.length)+L}return J};s({target:"Number",proto:!0,forced:w(function(){return j(8e-5,3)!=="0.000"||j(.9,0)!=="1"||j(1.255,2)!=="1.25"||j(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!w(function(){j({})})},{toFixed:function(W){var ee,J,L,G,Y=g(this),H=h(W),se=[0,0,0,0,0,0],Re="",Se="0";if(H<0||H>20)throw O("Incorrect fraction digits");if(Y!=Y)return"NaN";if(Y<=-1e21||Y>=1e21)return S(Y);if(Y<0&&(Re="-",Y=-Y),Y>1e-21)if(J=(ee=function(ze){for(var Be=0,Oe=ze;Oe>=4096;)Be+=12,Oe/=4096;for(;Oe>=2;)Be+=1,Oe/=2;return Be}(Y*k(2,69,1))-69)<0?Y*k(2,-ee,1):Y/k(2,ee,1),J*=4503599627370496,(ee=52-ee)>0){for(B(se,0,J),L=H;L>=7;)B(se,1e7,0),L-=7;for(B(se,k(10,L,1),0),L=ee-1;L>=23;)q(se,1<<23),L-=23;q(se,1<<L),B(se,1,1),q(se,2),Se=X(se)}else B(se,0,J),B(se,1<<-ee,0),Se=X(se)+A("0",H);return Se=H>0?Re+((G=Se.length)<=H?"0."+A("0",H-G)+Se:R(Se,0,G-H)+"."+R(Se,G-H)):Re+Se}})},function(n,o,r){var s=r(7),c=r(59),v=r(39),h=r(44),g=s.RangeError;n.exports=function(b){var w=v(h(this)),O="",S=c(b);if(S<0||S==1/0)throw g("Wrong number of repetitions");for(;S>0;(S>>>=1)&&(w+=w))1&S&&(O+=w);return O}},function(n,o,r){var s=r(36),c=r(15),v=r(77),h=r(41),g=c(r(84).f),b=c([].push),w=function(O){return function(S){for(var P,A=h(S),R=v(A),j=R.length,k=0,B=[];j>k;)P=R[k++],s&&!g(A,P)||b(B,O?[P,A[P]]:A[P]);return B}};n.exports={entries:w(!0),values:w(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return ps}),r.d(o,"LogicFlow",function(){return d1}),r.d(o,"h",function(){return Fe.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return hf}),r.d(o,"RectNode",function(){return r0}),r.d(o,"CircleNode",function(){return l0}),r.d(o,"PolygonNode",function(){return d0}),r.d(o,"DiamondNode",function(){return y0}),r.d(o,"EllipseNode",function(){return w0}),r.d(o,"TextNode",function(){return x0}),r.d(o,"HtmlNode",function(){return M0}),r.d(o,"BaseEdge",function(){return ly}),r.d(o,"LineEdge",function(){return G0}),r.d(o,"PolylineEdge",function(){return X0}),r.d(o,"BezierEdge",function(){return Z0}),r.d(o,"Arrow",function(){return ij}),r.d(o,"BaseEdgeModel",function(){return md}),r.d(o,"BezierEdgeModel",function(){return s_}),r.d(o,"LineEdgeModel",function(){return Ni}),r.d(o,"PolylineEdgeModel",function(){return uf}),r.d(o,"BaseNodeModel",function(){return pf}),r.d(o,"CircleNodeModel",function(){return v_}),r.d(o,"DiamondNodeModel",function(){return __}),r.d(o,"EllipseNodeModel",function(){return x_}),r.d(o,"PolygonNodeModel",function(){return N_}),r.d(o,"RectNodeModel",function(){return D_}),r.d(o,"TextNodeModel",function(){return F_}),r.d(o,"HtmlNodeModel",function(){return U_}),r.d(o,"EditConfigModel",function(){return Kf}),r.d(o,"GraphModel",function(){return GE}),r.d(o,"SnaplineModel",function(){return Ax}),r.d(o,"Keyboard",function(){return dS}),r.d(o,"get",function(){return dO}),r.d(o,"defaults",function(){return hO}),r.d(o,"ElementState",function(){return zr}),r.d(o,"ModelType",function(){return Er}),r.d(o,"ElementType",function(){return ao}),r.d(o,"EventType",function(){return Rn}),r.d(o,"formateAnchorConnectValidateData",function(){return ql});var s={};r.r(s),r.d(s,"createUuid",function(){return el}),r.d(s,"refreshGraphId",function(){return xu}),r.d(s,"StepDrag",function(){return Q}),r.d(s,"setupEdgeModel",function(){return bt}),r.d(s,"isBboxOverLapping",function(){return Ve}),r.d(s,"filterRepeatPoints",function(){return it}),r.d(s,"getSimplePolyline",function(){return Lt}),r.d(s,"getExpandedBBox",function(){return Kt}),r.d(s,"pointDirection",function(){return xt}),r.d(s,"getExpandedBBoxPoint",function(){return Zt}),r.d(s,"mergeBBox",function(){return St}),r.d(s,"getBBoxOfPoints",function(){return Vt}),r.d(s,"getPointsFromBBox",function(){return _t}),r.d(s,"isPointOutsideBBox",function(){return Ht}),r.d(s,"getBBoxXCrossPoints",function(){return Mn}),r.d(s,"getBBoxYCrossPoints",function(){return Wn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return It}),r.d(s,"estimateDistance",function(){return At}),r.d(s,"costByPoints",function(){return wt}),r.d(s,"heuristicCostEstimate",function(){return Cn}),r.d(s,"rebuildPath",function(){return tr}),r.d(s,"removeClosePointFromOpenList",function(){return un}),r.d(s,"isSegmentsIntersected",function(){return Qn}),r.d(s,"isSegmentCrossingBBox",function(){return Vn}),r.d(s,"getNextNeighborPoints",function(){return nr}),r.d(s,"pathFinder",function(){return gr}),r.d(s,"getBoxByOriginNode",function(){return Mo}),r.d(s,"pointFilter",function(){return Fo}),r.d(s,"getPolylinePoints",function(){return sr}),r.d(s,"getLongestEdge",function(){return Go}),r.d(s,"isSegmentsInNode",function(){return to}),r.d(s,"isSegmentsCrossNode",function(){return Po}),r.d(s,"getCrossPointInRect",function(){return $o}),r.d(s,"segmentDirection",function(){return wo}),r.d(s,"points2PointsList",function(){return yo}),r.d(s,"getSimplePoints",function(){return Qo}),r.d(s,"getBytesLength",function(){return Zn}),r.d(s,"getTextWidth",function(){return Nr}),r.d(s,"getAppendAttributes",function(){return kn}),r.d(s,"getBezierControlPoints",function(){return cr}),r.d(s,"getBezierPoints",function(){return zn}),r.d(s,"getEndTangent",function(){return Fa}),r.d(s,"getClosestPointOfPolyline",function(){return Jl}),r.d(s,"pickEdgeConfig",function(){return he}),r.d(s,"twoPointDistance",function(){return tt}),r.d(s,"createEdgeGenerator",function(){return qe}),r.d(s,"snapToGrid",function(){return wl}),r.d(s,"getGridOffset",function(){return Is}),r.d(s,"sampleCubic",function(){return be}),r.d(s,"getThetaOfVector",function(){return dt}),r.d(s,"degrees",function(){return Ze}),r.d(s,"Vector",function(){return Z}),r.d(s,"Point",function(){return de}),r.d(s,"Matrix",function(){return Ks}),r.d(s,"RotateMatrix",function(){return xp}),r.d(s,"ScaleMatrix",function(){return Zv}),r.d(s,"TranslateMatrix",function(){return Zs});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var h=r(43),g=Object(h.b)("observerBatching");function b(a){a()}var w=!1;function O(){return w}function S(a){return Object(c.t)(a)}var P,A=1e4,R=new Set;function j(){P===void 0&&(P=setTimeout(k,1e4))}function k(){P=void 0;var a=Date.now();R.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,R.delete(i))}),R.size>0&&j()}var B=!1,q=[],X={};function W(a){return"observer"+a}function ee(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=X),O();var u,p=function(N){return function(){B?q.push(N):N()}}((l.useForceUpdate||h.d)()),f=v.d.useRef(null);if(!f.current){var y=new c.c(W(i),function(){_.mounted?p():(y.dispose(),f.current=null)}),_=function(N){return{cleanAt:Date.now()+A,reaction:N}}(y);f.current=_,u=f,R.add(u),j()}var x=f.current.reaction;return v.d.useDebugValue(x,S),v.d.useEffect(function(){var N;return N=f,R.delete(N),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(W(i),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(N){B=!0,q=[];try{var D=N();B=!1;var z=q.length>0?q:void 0;return v.d.useLayoutEffect(function(){z&&z.forEach(function(K){return K()})},[z]),D}finally{B=!1}}(function(){var N,D;if(x.track(function(){try{N=a()}catch(z){D=z}}),D)throw D;return N})}var J=function(){return J=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var p in i=arguments[l])Object.prototype.hasOwnProperty.call(i,p)&&(a[p]=i[p]);return a},J.apply(this,arguments)};function L(a,i){var l,u,p,f=J({forwardRef:!1},i),y=a.displayName||a.name,_=function(x,N){return ee(function(){return a(x,N)},y)};return _.displayName=y,l=f.forwardRef?Object(v.f)(Object(v.e)(_)):Object(v.f)(_),u=a,p=l,Object.keys(u).forEach(function(x){G[x]||Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(u,x))}),l.displayName=y,l}var G={$$typeof:!0,render:!0,compare:!0,type:!0};function Y(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:ee(u)}function H(a,i,l,u,p){var f=i==="children"?"render":"children",y=typeof a[i]=="function",_=typeof a[f]=="function";return y&&_?new Error("MobX Observer: Do not use children and render in the same time in`"+l):y||_?null:new Error("Invalid prop `"+p+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}Y.propTypes={children:H,render:H},Y.displayName="Observer";var se;(se=v.g)||(se=b),Object(c.n)({reactionScheduler:se}),Object(h.a)()[g]=!0;var Re=0,Se={};function ze(a){return Se[a]||(Se[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+Re+")";return Re++,l}(a)),Se[a]}function Be(a,i){if(Oe(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var p=0;p<l.length;p++)if(!Object.hasOwnProperty.call(i,l[p])||!Oe(a[l[p]],i[l[p]]))return!1;return!0}function Oe(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function ae(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var ve=ze("patchMixins"),Pe=ze("patchedDefinition");function Ke(a,i){for(var l=this,u=arguments.length,p=new Array(u>2?u-2:0),f=2;f<u;f++)p[f-2]=arguments[f];i.locks++;try{var y;return a!=null&&(y=a.apply(this,p)),y}finally{i.locks--,i.locks===0&&i.methods.forEach(function(_){_.apply(l,p)})}}function je(a,i){return function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];Ke.call.apply(Ke,[this,a,i].concat(u))}}function at(a,i,l){var u=function(_,x){var N=_[ve]=_[ve]||{},D=N[x]=N[x]||{};return D.locks=D.locks||0,D.methods=D.methods||[],D}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var p=Object.getOwnPropertyDescriptor(a,i);if(!p||!p[Pe]){var f=a[i],y=gt(a,i,p?p.enumerable:void 0,u,f);Object.defineProperty(a,i,y)}}function gt(a,i,l,u,p){var f,y=je(p,u);return(f={})[Pe]=!0,f.get=function(){return y},f.set=function(_){if(this===a)y=je(_,u);else{var x=gt(this,i,l,u,_);Object.defineProperty(this,i,x)}},f.configurable=!0,f.enumerable=l,f}var Mt=c.a||"$mobx",Xt=ze("isMobXReactObserver"),De=ze("isUnmounted"),ge=ze("skipRender"),Ae=ze("isForcingUpdate");function ht(a){var i=a.prototype;if(a[Xt]?Wt(i):a[Xt]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==v.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=rn;yn(i,"props"),yn(i,"state");var l=i.render;return i.render=function(){return Ot.call(this,l)},at(i,"componentWillUnmount",function(){var u;(u=this.render[Mt])===null||u===void 0||u.dispose(),this[De]=!0,!this.render[Mt]&&Wt(this)}),a}function Wt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function Ot(a){var i=this;ae(this,ge,!1),ae(this,Ae,!1);var l=Wt(this),u=a.bind(this),p=!1,f=new c.c(l+".render()",function(){if(!p&&(p=!0,i[De]!==!0)){var _=!0;try{ae(i,Ae,!0),i[ge]||v.a.prototype.forceUpdate.call(i),_=!1}finally{ae(i,Ae,!1),_&&f.dispose()}}});function y(){p=!1;var _=void 0,x=void 0;if(f.track(function(){try{x=Object(c.d)(!1,u)}catch(N){_=N}}),_)throw _;return x}return f.reactComponent=this,y[Mt]=f,this.render=y,y.call(this)}function rn(a,i){return this.state!==i||!Be(this.props,a)}function yn(a,i){var l=ze("reactProp_"+i+"_valueHolder"),u=ze("reactProp_"+i+"_atomHolder");function p(){return this[u]||ae(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[Ae]||Be(this[l],f)?ae(this,l,f):(ae(this,l,f),ae(this,ge,!0),p.call(this).reportChanged(),ae(this,ge,!1))}})}var Tn=typeof Symbol=="function"&&Symbol.for,pn=Tn?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(a){return null}).$$typeof,ft=Tn?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(a){return null}).$$typeof;function On(a){if(a.isMobxInjector,ft&&a.$$typeof===ft)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&a.$$typeof===pn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(Y,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(v.a,a)?ht(a):L(a)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Fe=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var mn=function(a,i){for(var l=-1,u=a==null?0:a.length,p=Array(u);++l<u;)p[l]=i(a[l],l,a);return p},Kn=function(){this.__data__=[],this.size=0},ne=function(a,i){return a===i||a!=a&&i!=i},$n=function(a,i){for(var l=a.length;l--;)if(ne(a[l][0],i))return l;return-1},xr=Array.prototype.splice,Ur=function(a){var i=this.__data__,l=$n(i,a);return!(l<0)&&(l==i.length-1?i.pop():xr.call(i,l,1),--this.size,!0)},no=function(a){var i=this.__data__,l=$n(i,a);return l<0?void 0:i[l][1]},Dn=function(a){return $n(this.__data__,a)>-1},ko=function(a,i){var l=this.__data__,u=$n(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function Ee(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Ee.prototype.clear=Kn,Ee.prototype.delete=Ur,Ee.prototype.get=no,Ee.prototype.has=Dn,Ee.prototype.set=ko;var Xe=Ee,Ce=function(){this.__data__=new Xe,this.size=0},ot=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},en=function(a){return this.__data__.get(a)},qt=function(a){return this.__data__.has(a)},Nn=r(31),_r=Nn.a.Symbol,ni=Object.prototype,mi=ni.hasOwnProperty,Bo=ni.toString,Ho=_r?_r.toStringTag:void 0,xn=function(a){var i=mi.call(a,Ho),l=a[Ho];try{a[Ho]=void 0;var u=!0}catch{}var p=Bo.call(a);return u&&(i?a[Ho]=l:delete a[Ho]),p},Bn=Object.prototype.toString,Xn=function(a){return Bn.call(a)},or=_r?_r.toStringTag:void 0,Kr=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":or&&or in Object(a)?xn(a):Xn(a)},Rr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},cl,Ua=function(a){if(!Rr(a))return!1;var i=Kr(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},fl=Nn.a["__core-js_shared__"],au=(cl=/[^.]+$/.exec(fl&&fl.keys&&fl.keys.IE_PROTO||""))?"Symbol(src)_1."+cl:"",Ud=function(a){return!!au&&au in a},yc=Function.prototype.toString,fa=function(a){if(a!=null){try{return yc.call(a)}catch{}try{return a+""}catch{}}return""},Wu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,kf=Object.prototype,ho=Pn.toString,mc=kf.hasOwnProperty,zi=RegExp("^"+ho.call(mc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=function(a){return!(!Rr(a)||Ud(a))&&(Ua(a)?zi:Wu).test(fa(a))},Es=function(a,i){return a==null?void 0:a[i]},Ta=function(a,i){var l=Es(a,i);return ta(l)?l:void 0},da=Ta(Nn.a,"Map"),Ma=Ta(Object,"create"),gc=function(){this.__data__=Ma?Ma(null):{},this.size=0},bc=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},Cf=Object.prototype.hasOwnProperty,zu=function(a){var i=this.__data__;if(Ma){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return Cf.call(i,a)?i[a]:void 0},Df=Object.prototype.hasOwnProperty,_c=function(a){var i=this.__data__;return Ma?i[a]!==void 0:Df.call(i,a)},Gd=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=Ma&&i===void 0?"__lodash_hash_undefined__":i,this};function Cl(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Cl.prototype.clear=gc,Cl.prototype.delete=bc,Cl.prototype.get=zu,Cl.prototype.has=_c,Cl.prototype.set=Gd;var jf=Cl,dl=function(){this.size=0,this.__data__={hash:new jf,map:new(da||Xe),string:new jf}},wc=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Os=function(a,i){var l=a.__data__;return wc(i)?l[typeof i=="string"?"string":"hash"]:l.map},Ec=function(a){var i=Os(this,a).delete(a);return this.size-=i?1:0,i},Oc=function(a){return Os(this,a).get(a)},Vd=function(a){return Os(this,a).has(a)},If=function(a,i){var l=Os(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function Wr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Wr.prototype.clear=dl,Wr.prototype.delete=Ec,Wr.prototype.get=Oc,Wr.prototype.has=Vd,Wr.prototype.set=If;var Gr=Wr,Lf=function(a,i){var l=this.__data__;if(l instanceof Xe){var u=l.__data__;if(!da||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new Gr(u)}return l.set(a,i),this.size=l.size,this};function lu(a){var i=this.__data__=new Xe(a);this.size=i.size}lu.prototype.clear=Ce,lu.prototype.delete=ot,lu.prototype.get=en,lu.prototype.has=qt,lu.prototype.set=Lf;var pa=lu,xs=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Ff=function(a){return this.__data__.has(a)};function Co(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new Gr;++i<l;)this.add(a[i])}Co.prototype.add=Co.prototype.push=xs,Co.prototype.has=Ff;var Dl=Co,jl=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Ss=function(a,i){return a.has(i)},uu=function(a,i,l,u,p,f){var y=1&l,_=a.length,x=i.length;if(_!=x&&!(y&&x>_))return!1;var N=f.get(a),D=f.get(i);if(N&&D)return N==i&&D==a;var z=-1,K=!0,pe=2&l?new Dl:void 0;for(f.set(a,i),f.set(i,a);++z<_;){var xe=a[z],ke=i[z];if(u)var Je=y?u(ke,xe,z,i,a,f):u(xe,ke,z,a,i,f);if(Je!==void 0){if(Je)continue;K=!1;break}if(pe){if(!jl(i,function(Qe,yt){if(!Ss(pe,yt)&&(xe===Qe||p(xe,Qe,l,u,f)))return pe.push(yt)})){K=!1;break}}else if(xe!==ke&&!p(xe,ke,l,u,f)){K=!1;break}}return f.delete(a),f.delete(i),K},gi=Nn.a.Uint8Array,xc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,p){l[++i]=[p,u]}),l},$f=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Sc=_r?_r.prototype:void 0,Ri=Sc?Sc.valueOf:void 0,ri=function(a,i,l,u,p,f,y){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!f(new gi(a),new gi(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ne(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var _=xc;case"[object Set]":var x=1&u;if(_||(_=$f),a.size!=i.size&&!x)return!1;var N=y.get(a);if(N)return N==i;u|=2,y.set(a,i);var D=uu(_(a),_(i),u,p,f,y);return y.delete(a),D;case"[object Symbol]":if(Ri)return Ri.call(a)==Ri.call(i)}return!1},na=function(a,i){for(var l=-1,u=i.length,p=a.length;++l<u;)a[p+l]=i[l];return a},ro=Array.isArray,Bf=function(a,i,l){var u=i(a);return ro(a)?u:na(u,l(a))},ki=function(a,i){for(var l=-1,u=a==null?0:a.length,p=0,f=[];++l<u;){var y=a[l];i(y,l,a)&&(f[p++]=y)}return f},Ac=function(){return[]},Uf=Object.prototype.propertyIsEnumerable,Ci=Object.getOwnPropertySymbols,Ti=Ci?function(a){return a==null?[]:(a=Object(a),ki(Ci(a),function(i){return Uf.call(a,i)}))}:Ac,Tc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},Ir=function(a){return a!=null&&typeof a=="object"},oi=function(a){return Ir(a)&&Kr(a)=="[object Arguments]"},As=Object.prototype,Gf=As.hasOwnProperty,Mc=As.propertyIsEnumerable,Ts=oi(function(){return arguments}())?oi:function(a){return Ir(a)&&Gf.call(a,"callee")&&!Mc.call(a,"callee")},Ga=Ts,Di=r(48),su=/^(?:0|[1-9]\d*)$/,Hi=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&su.test(a))&&a>-1&&a%1==0&&a<i},ha=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Tr={};Tr["[object Float32Array]"]=Tr["[object Float64Array]"]=Tr["[object Int8Array]"]=Tr["[object Int16Array]"]=Tr["[object Int32Array]"]=Tr["[object Uint8Array]"]=Tr["[object Uint8ClampedArray]"]=Tr["[object Uint16Array]"]=Tr["[object Uint32Array]"]=!0,Tr["[object Arguments]"]=Tr["[object Array]"]=Tr["[object ArrayBuffer]"]=Tr["[object Boolean]"]=Tr["[object DataView]"]=Tr["[object Date]"]=Tr["[object Error]"]=Tr["[object Function]"]=Tr["[object Map]"]=Tr["[object Number]"]=Tr["[object Object]"]=Tr["[object RegExp]"]=Tr["[object Set]"]=Tr["[object String]"]=Tr["[object WeakMap]"]=!1;var ji=function(a){return Ir(a)&&ha(a.length)&&!!Tr[Kr(a)]},Pa=function(a){return function(i){return a(i)}},fi=r(49),cu=fi.a&&fi.a.isTypedArray,Il=cu?Pa(cu):ji,Na=Object.prototype.hasOwnProperty,so=function(a,i){var l=ro(a),u=!l&&Ga(a),p=!l&&!u&&Object(Di.a)(a),f=!l&&!u&&!p&&Il(a),y=l||u||p||f,_=y?Tc(a.length,String):[],x=_.length;for(var N in a)!i&&!Na.call(a,N)||y&&(N=="length"||p&&(N=="offset"||N=="parent")||f&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Hi(N,x))||_.push(N);return _},Hu=Object.prototype,Va=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Hu)},va=function(a,i){return function(l){return a(i(l))}},Pc=va(Object.keys,Object),Wd=Object.prototype.hasOwnProperty,Nc=function(a){if(!Va(a))return Pc(a);var i=[];for(var l in Object(a))Wd.call(a,l)&&l!="constructor"&&i.push(l);return i},Uo=function(a){return a!=null&&ha(a.length)&&!Ua(a)},Ll=function(a){return Uo(a)?so(a):Nc(a)},Wa=function(a){return Bf(a,Ll,Ti)},Xo=Object.prototype.hasOwnProperty,Rc=function(a,i,l,u,p,f){var y=1&l,_=Wa(a),x=_.length;if(x!=Wa(i).length&&!y)return!1;for(var N=x;N--;){var D=_[N];if(!(y?D in i:Xo.call(i,D)))return!1}var z=f.get(a),K=f.get(i);if(z&&K)return z==i&&K==a;var pe=!0;f.set(a,i),f.set(i,a);for(var xe=y;++N<x;){var ke=a[D=_[N]],Je=i[D];if(u)var Qe=y?u(Je,ke,D,i,a,f):u(ke,Je,D,a,i,f);if(!(Qe===void 0?ke===Je||p(ke,Je,l,u,f):Qe)){pe=!1;break}xe||(xe=D=="constructor")}if(pe&&!xe){var yt=a.constructor,$t=i.constructor;yt==$t||!("constructor"in a)||!("constructor"in i)||typeof yt=="function"&&yt instanceof yt&&typeof $t=="function"&&$t instanceof $t||(pe=!1)}return f.delete(a),f.delete(i),pe},ra=Ta(Nn.a,"DataView"),ya=Ta(Nn.a,"Promise"),Ms=Ta(Nn.a,"Set"),Ii=Ta(Nn.a,"WeakMap"),Xi="[object Map]",ii="[object Promise]",oa="[object Set]",Mi="[object WeakMap]",ut="[object DataView]",Dt=fa(ra),Ft=fa(da),fn=fa(ya),lr=fa(Ms),Mr=fa(Ii),co=Kr;(ra&&co(new ra(new ArrayBuffer(1)))!=ut||da&&co(new da)!=Xi||ya&&co(ya.resolve())!=ii||Ms&&co(new Ms)!=oa||Ii&&co(new Ii)!=Mi)&&(co=function(a){var i=Kr(a),l=i=="[object Object]"?a.constructor:void 0,u=l?fa(l):"";if(u)switch(u){case Dt:return ut;case Ft:return Xi;case fn:return ii;case lr:return oa;case Mr:return Mi}return i});var T=co,M="[object Arguments]",$="[object Array]",te="[object Object]",ye=Object.prototype.hasOwnProperty,Ge=function(a,i,l,u,p,f){var y=ro(a),_=ro(i),x=y?$:T(a),N=_?$:T(i),D=(x=x==M?te:x)==te,z=(N=N==M?te:N)==te,K=x==N;if(K&&Object(Di.a)(a)){if(!Object(Di.a)(i))return!1;y=!0,D=!1}if(K&&!D)return f||(f=new pa),y||Il(a)?uu(a,i,l,u,p,f):ri(a,i,x,l,u,p,f);if(!(1&l)){var pe=D&&ye.call(a,"__wrapped__"),xe=z&&ye.call(i,"__wrapped__");if(pe||xe){var ke=pe?a.value():a,Je=xe?i.value():i;return f||(f=new pa),p(ke,Je,l,u,f)}}return!!K&&(f||(f=new pa),Rc(a,i,l,u,p,f))},vt=function a(i,l,u,p,f){return i===l||(i==null||l==null||!Ir(i)&&!Ir(l)?i!=i&&l!=l:Ge(i,l,u,p,a,f))},zt=function(a,i,l,u){var p=l.length,f=p,y=!u;if(a==null)return!f;for(a=Object(a);p--;){var _=l[p];if(y&&_[2]?_[1]!==a[_[0]]:!(_[0]in a))return!1}for(;++p<f;){var x=(_=l[p])[0],N=a[x],D=_[1];if(y&&_[2]){if(N===void 0&&!(x in a))return!1}else{var z=new pa;if(u)var K=u(N,D,x,a,i,z);if(!(K===void 0?vt(D,N,3,u,z):K))return!1}}return!0},bn=function(a){return a==a&&!Rr(a)},yr=function(a){for(var i=Ll(a),l=i.length;l--;){var u=i[l],p=a[u];i[l]=[u,p,bn(p)]}return i},ln=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Vr=function(a){var i=yr(a);return i.length==1&&i[0][2]?ln(i[0][0],i[0][1]):function(l){return l===a||zt(l,a,i)}},dr=function(a){return typeof a=="symbol"||Ir(a)&&Kr(a)=="[object Symbol]"},Cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ia=/^\w*$/,go=function(a,i){if(ro(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!dr(a))||ia.test(a)||!Cr.test(a)||i!=null&&a in Object(i)};function Yi(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,p=i?i.apply(this,u):u[0],f=l.cache;if(f.has(p))return f.get(p);var y=a.apply(this,u);return l.cache=f.set(p,y)||f,y};return l.cache=new(Yi.Cache||Gr),l}Yi.Cache=Gr;var pl=Yi,hl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fl=/\\(\\)?/g,fu=function(a){var i=pl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(hl,function(l,u,p,f){i.push(p?f.replace(Fl,"$1"):u||l)}),i}),za=_r?_r.prototype:void 0,du=za?za.toString:void 0,Yo=function a(i){if(typeof i=="string")return i;if(ro(i))return mn(i,a)+"";if(dr(i))return du?du.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},$l=function(a){return a==null?"":Yo(a)},vl=function(a,i){return ro(a)?a:go(a,i)?[a]:fu($l(a))},Ha=function(a){if(typeof a=="string"||dr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},Xa=function(a,i){for(var l=0,u=(i=vl(i,a)).length;a!=null&&l<u;)a=a[Ha(i[l++])];return l&&l==u?a:void 0},Xu=function(a,i,l){var u=a==null?void 0:Xa(a,i);return u===void 0?l:u},th=function(a,i){return a!=null&&i in Object(a)},nh=function(a,i,l){for(var u=-1,p=(i=vl(i,a)).length,f=!1;++u<p;){var y=Ha(i[u]);if(!(f=a!=null&&l(a,y)))break;a=a[y]}return f||++u!=p?f:!!(p=a==null?0:a.length)&&ha(p)&&Hi(y,p)&&(ro(a)||Ga(a))},zd=function(a,i){return a!=null&&nh(a,i,th)},kc=function(a,i){return go(a)&&bn(i)?ln(Ha(a),i):function(l){var u=Xu(l,a);return u===void 0&&u===i?zd(l,a):vt(i,u,3)}},Yu=function(a){return a},Vf=function(a){return function(i){return i==null?void 0:i[a]}},rh=function(a){return function(i){return Xa(i,a)}},qu=function(a){return go(a)?Vf(Ha(a)):rh(a)},Cc=function(a){return typeof a=="function"?a:a==null?Yu:typeof a=="object"?ro(a)?kc(a[0],a[1]):Vr(a):qu(a)},Wf=function(a){return function(i,l,u){for(var p=-1,f=Object(i),y=u(i),_=y.length;_--;){var x=y[a?_:++p];if(l(f[x],x,f)===!1)break}return i}}(),Do=function(a,i){return function(l,u){if(l==null)return l;if(!Uo(l))return a(l,u);for(var p=l.length,f=i?p:-1,y=Object(l);(i?f--:++f<p)&&u(y[f],f,y)!==!1;);return l}}(function(a,i){return a&&Wf(a,i,Ll)}),Li=function(a,i){var l=-1,u=Uo(a)?Array(a.length):[];return Do(a,function(p,f,y){u[++l]=i(p,f,y)}),u},zf=function(a,i){return(ro(a)?mn:Li)(a,Cc(i))};Object(c.n)({isolateGlobalState:!0});var Hf=function(){try{var a=Ta(Object,"defineProperty");return a({},"",{}),a}catch{}}(),Ps=function(a,i,l){i=="__proto__"&&Hf?Hf(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Bv=Object.prototype.hasOwnProperty,Ns=function(a,i,l){var u=a[i];Bv.call(a,i)&&ne(u,l)&&(l!==void 0||i in a)||Ps(a,i,l)},yl=function(a,i,l,u){var p=!l;l||(l={});for(var f=-1,y=i.length;++f<y;){var _=i[f],x=u?u(l[_],a[_],_,l,a):void 0;x===void 0&&(x=a[_]),p?Ps(l,_,x):Ns(l,_,x)}return l},Dc=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},Ku=Math.max,pu=function(a,i,l){return i=Ku(i===void 0?a.length-1:i,0),function(){for(var u=arguments,p=-1,f=Ku(u.length-i,0),y=Array(f);++p<f;)y[p]=u[i+p];p=-1;for(var _=Array(i+1);++p<i;)_[p]=u[p];return _[i]=l(y),Dc(a,this,_)}},Rs=function(a){return function(){return a}},jc=Hf?function(a,i){return Hf(a,"toString",{configurable:!0,enumerable:!1,value:Rs(i),writable:!0})}:Yu,hu=Date.now,Uv=function(a){var i=0,l=0;return function(){var u=hu(),p=16-(u-l);if(l=u,p>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},Ic=Uv(jc),Gv=function(a,i){return Ic(pu(a,i,Yu),a+"")},Vv=function(a,i,l){if(!Rr(l))return!1;var u=typeof i;return!!(u=="number"?Uo(l)&&Hi(i,l.length):u=="string"&&i in l)&&ne(l[i],a)},oh=function(a){return Gv(function(i,l){var u=-1,p=l.length,f=p>1?l[p-1]:void 0,y=p>2?l[2]:void 0;for(f=a.length>3&&typeof f=="function"?(p--,f):void 0,y&&Vv(l[0],l[1],y)&&(f=p<3?void 0:f,p=1),i=Object(i);++u<p;){var _=l[u];_&&a(i,_,u,f)}return i})},Xf=Object.prototype.hasOwnProperty,Pi=oh(function(a,i){if(Va(i)||Uo(i))yl(i,Ll(i),a);else for(var l in i)Xf.call(i,l)&&Ns(a,l,i[l])}),ih=function(a,i,l,u){if(!Rr(a))return a;for(var p=-1,f=(i=vl(i,a)).length,y=f-1,_=a;_!=null&&++p<f;){var x=Ha(i[p]),N=l;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(p!=y){var D=_[x];(N=u?u(D,x,_):void 0)===void 0&&(N=Rr(D)?D:Hi(i[p+1])?[]:{})}Ns(_,x,N),_=_[x]}return a},re=function(a,i,l){for(var u=-1,p=i.length,f={};++u<p;){var y=i[u],_=Xa(a,y);l(_,y)&&ih(f,vl(y,a),_)}return f},Zu=function(a,i){return re(a,i,function(l,u){return zd(a,u)})},Bl=_r?_r.isConcatSpreadable:void 0,Ra=function(a){return ro(a)||Ga(a)||!!(Bl&&a&&a[Bl])},Pr=function a(i,l,u,p,f){var y=-1,_=i.length;for(u||(u=Ra),f||(f=[]);++y<_;){var x=i[y];l>0&&u(x)?l>1?a(x,l-1,u,p,f):na(f,x):p||(f[f.length]=x)}return f},bi=function(a){return a!=null&&a.length?Pr(a,1):[]},Lr,Ya,Ul,ma,Yf,qf,Hd,ah,Gl,jo,ks,Xd,Vl,qa,Lc,vu,ga,Yd,qd,Ka=function(a){return Ic(pu(a,void 0,bi),a+"")}(function(a,i){return a==null?{}:Zu(a,i)});function vo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function lh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Kd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Io(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var zr,qo,Er,ao,Rn,lo,Fc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},ml=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Kf=(Ya=Io((Lr=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),vo(this,"isSilentMode",Ya,this),vo(this,"stopZoomGraph",Ul,this),vo(this,"stopScrollGraph",ma,this),vo(this,"stopMoveGraph",Yf,this),vo(this,"adjustEdge",qf,this),vo(this,"adjustEdgeMiddle",Hd,this),vo(this,"adjustEdgeStartAndEnd",ah,this),vo(this,"adjustNodePosition",Gl,this),vo(this,"hideAnchors",jo,this),vo(this,"allowRotation",ks,this),vo(this,"hoverOutline",Xd,this),vo(this,"nodeSelectedOutline",Vl,this),vo(this,"edgeSelectedOutline",qa,this),vo(this,"nodeTextEdit",Lc,this),vo(this,"edgeTextEdit",vu,this),vo(this,"nodeTextDraggable",ga,this),vo(this,"edgeTextDraggable",Yd,this),vo(this,"autoExpand",qd,this),Kd(this,"multipleSelectKey",""),Kd(this,"defaultConfig",{}),Pi(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var p=this.getConfigDetail(u);Pi(this,p)}},{key:"getConfigDetail",value:function(u){var p=u.isSilentMode,f=u.textEdit,y={};if(p===!1&&Pi(y,this.defaultConfig),p===!0&&p!==this.isSilentMode){var _=Ka(Fc,ml);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Pi(y,_)}f===!1&&Pi(y,{nodeTextEdit:!1,edgeTextEdit:!1});var x=Ka(u,ml);return Pi(y,x)}},{key:"getConfig",value:function(){return Ka(this,ml)}}])&&lh(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ul=Io(Lr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ma=Io(Lr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yf=Io(Lr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qf=Io(Lr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hd=Io(Lr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ah=Io(Lr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=Io(Lr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jo=Io(Lr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ks=Io(Lr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xd=Io(Lr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vl=Io(Lr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qa=Io(Lr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lc=Io(Lr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vu=Io(Lr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ga=Io(Lr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yd=Io(Lr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qd=Io(Lr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Io(Lr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Lr.prototype,"updateEditConfig"),Lr.prototype),Lr);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(qo||(qo={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(Er||(Er={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(ao||(ao={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(Rn||(Rn={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(lo||(lo={}));var bo,xo,Zd,Jd,$c,Fi,Zf,Cs,ka;function yu(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Wl(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Wl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ca(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function gl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ba(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(bo||(bo={}));var Qd={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},ep=(xo=function(){function a(u,p){(function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")})(this,a),gl(this,"MINI_SCALE_SIZE",.2),gl(this,"MAX_SCALE_SIZE",16),Ca(this,"SCALE_X",Zd,this),Ca(this,"SKEW_Y",Jd,this),Ca(this,"SKEW_X",$c,this),Ca(this,"SCALE_Y",Fi,this),Ca(this,"TRANSLATE_X",Zf,this),Ca(this,"TRANSLATE_Y",Cs,this),Ca(this,"ZOOM_SIZE",ka,this),gl(this,"eventCenter",void 0),gl(this,"translateLimitMinX",void 0),gl(this,"translateLimitMinY",void 0),gl(this,"translateLimitMaxX",void 0),gl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=p.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var p=yu(u,2),f=p[0],y=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var p=yu(u,2),f=p[0],y=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,p,f){var y=yu(u,2),_=y[0],x=y[1];return[_+p/this.SCALE_X,x+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,p){return[u/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,y=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Rn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,p){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,p,f,y){var _=yu(this.CanvasPointToHtmlPoint([u,p]),2),x=f/2-_[0],N=y/2-_[1];this.TRANSLATE_X+=x,this.TRANSLATE_Y+=N,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var p=yu(Array.isArray(u)&&u.length===4?u:Qd[u.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],l&&uh(i.prototype,l),a}(),Zd=ba(xo.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Jd=ba(xo.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$c=ba(xo.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fi=ba(xo.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Zf=ba(xo.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Cs=ba(xo.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ka=ba(xo.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),ba(xo.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"zoom"),xo.prototype),ba(xo.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"resetZoom"),xo.prototype),ba(xo.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"translate"),xo.prototype),ba(xo.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"focusOn"),xo.prototype),xo),Jf=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},sh=function(a,i){return a&&yl(i,Ll(i),a)},ch=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},fh=Object.prototype.hasOwnProperty,tp=function(a){if(!Rr(a))return ch(a);var i=Va(a),l=[];for(var u in a)(u!="constructor"||!i&&fh.call(a,u))&&l.push(u);return l},Ds=function(a){return Uo(a)?so(a,!0):tp(a)},np=function(a,i){return a&&yl(i,Ds(i),a)},Bc=r(107),Or=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},Wv=function(a,i){return yl(a,Ti(a),i)},rp=va(Object.getPrototypeOf,Object),mu=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)na(i,Ti(a)),a=rp(a);return i}:Ac,Uc=function(a,i){return yl(a,mu(a),i)},zv=function(a){return Bf(a,Ds,mu)},Hv=Object.prototype.hasOwnProperty,Da=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&Hv.call(a,"index")&&(l.index=a.index,l.input=a.input),l},op=function(a){var i=new a.constructor(a.byteLength);return new gi(i).set(new gi(a)),i},Qf=function(a,i){var l=i?op(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.byteLength)},ed=/\w*$/,dh=function(a){var i=new a.constructor(a.source,ed.exec(a));return i.lastIndex=a.lastIndex,i},ip=_r?_r.prototype:void 0,aa=ip?ip.valueOf:void 0,gu=function(a){return aa?Object(aa.call(a)):{}},td=function(a,i){var l=i?op(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},Ju=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return op(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return Qf(a,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return td(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return dh(a);case"[object Symbol]":return gu(a)}},Gc=Object.create,ph=function(){function a(){}return function(i){if(!Rr(i))return{};if(Gc)return Gc(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),Vc=function(a){return typeof a.constructor!="function"||Va(a)?{}:ph(rp(a))},nd=function(a){return Ir(a)&&T(a)=="[object Map]"},rd=fi.a&&fi.a.isMap,od=rd?Pa(rd):nd,bu=function(a){return Ir(a)&&T(a)=="[object Set]"},hh=fi.a&&fi.a.isSet,_u=hh?Pa(hh):bu,ap="[object Arguments]",lp="[object Function]",Qu="[object Object]",fo={};fo[ap]=fo["[object Array]"]=fo["[object ArrayBuffer]"]=fo["[object DataView]"]=fo["[object Boolean]"]=fo["[object Date]"]=fo["[object Float32Array]"]=fo["[object Float64Array]"]=fo["[object Int8Array]"]=fo["[object Int16Array]"]=fo["[object Int32Array]"]=fo["[object Map]"]=fo["[object Number]"]=fo["[object Object]"]=fo["[object RegExp]"]=fo["[object Set]"]=fo["[object String]"]=fo["[object Symbol]"]=fo["[object Uint8Array]"]=fo["[object Uint8ClampedArray]"]=fo["[object Uint16Array]"]=fo["[object Uint32Array]"]=!0,fo["[object Error]"]=fo[lp]=fo["[object WeakMap]"]=!1;var Wc=function a(i,l,u,p,f,y){var _,x=1&l,N=2&l,D=4&l;if(u&&(_=f?u(i,p,f,y):u(i)),_!==void 0)return _;if(!Rr(i))return i;var z=ro(i);if(z){if(_=Da(i),!x)return Or(i,_)}else{var K=T(i),pe=K==lp||K=="[object GeneratorFunction]";if(Object(Di.a)(i))return Object(Bc.a)(i,x);if(K==Qu||K==ap||pe&&!f){if(_=N||pe?{}:Vc(i),!x)return N?Uc(i,np(_,i)):Wv(i,sh(_,i))}else{if(!fo[K])return f?i:{};_=Ju(i,K,x)}}y||(y=new pa);var xe=y.get(i);if(xe)return xe;y.set(i,_),_u(i)?i.forEach(function(Je){_.add(a(Je,l,u,Je,i,y))}):od(i)&&i.forEach(function(Je,Qe){_.set(Qe,a(Je,l,u,Qe,i,y))});var ke=z?void 0:(D?N?zv:Wa:N?Ds:Ll)(i);return Jf(ke||i,function(Je,Qe){ke&&(Je=i[Qe=Je]),Ns(_,Qe,a(Je,l,u,Qe,i,y))}),_},_o=function(a){return Wc(a,5)},zl=function(a,i,l){(l!==void 0&&!ne(a[i],l)||l===void 0&&!(i in a))&&Ps(a,i,l)},di=function(a){return Ir(a)&&Uo(a)},bl=Function.prototype,Hl=Object.prototype,wu=bl.toString,es=Hl.hasOwnProperty,id=wu.call(Object),ad=function(a){if(!Ir(a)||Kr(a)!="[object Object]")return!1;var i=rp(a);if(i===null)return!0;var l=es.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&wu.call(l)==id},_l=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ts=function(a){return yl(a,Ds(a))},ld=function(a,i,l,u,p,f,y){var _=_l(a,l),x=_l(i,l),N=y.get(x);if(N)zl(a,l,N);else{var D=f?f(_,x,l+"",a,i,y):void 0,z=D===void 0;if(z){var K=ro(x),pe=!K&&Object(Di.a)(x),xe=!K&&!pe&&Il(x);D=x,K||pe||xe?ro(_)?D=_:di(_)?D=Or(_):pe?(z=!1,D=Object(Bc.a)(x,!0)):xe?(z=!1,D=td(x,!0)):D=[]:ad(x)||Ga(x)?(D=_,Ga(_)?D=ts(_):Rr(_)&&!Ua(_)||(D=Vc(x))):z=!1}z&&(y.set(x,D),p(D,x,u,f,y),y.delete(x)),zl(a,l,D)}},zc=function a(i,l,u,p,f){i!==l&&Wf(l,function(y,_){if(f||(f=new pa),Rr(y))ld(i,l,_,u,a,p,f);else{var x=p?p(_l(i,_),y,_+"",i,l,f):void 0;x===void 0&&(x=y),zl(i,_,x)}},Ds)},Eu=oh(function(a,i,l){zc(a,i,l)}),up={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},js=function(a){var i=_o(up);return a&&(i=Eu(i,a)),i};r(82),r(166);function ud(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var Hc=function(){function a(){var u,p,f;(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),f={},(p="_events")in(u=this)?Object.defineProperty(u,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[p]=f}var i,l;return i=a,(l=[{key:"on",value:function(u,p,f){var y=this;return u==null||u.split(",").forEach(function(_){_=_.trim(),y._events[_]||(y._events[_]=[]),y._events[_].push({callback:p,once:!!f})}),this}},{key:"once",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){return y=y.trim(),f.on(y,p,!0)})}},{key:"emit",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){var _=f._events[y]||[],x=f._events["*"]||[],N=function(D){for(var z=D.length,K=0;K<z;K++)if(D[K]){var pe=D[K],xe=pe.callback;pe.once&&(D.splice(K,1),D.length===0&&delete f._events[y],z--,K--),xe.apply(f,[p])}};N(_),N(x)})}},{key:"off",value:function(u,p){var f=this;return u||(this._events={}),u.split(",").forEach(function(y){if(p){for(var _=f._events[y]||[],x=_.length,N=0;N<x;N++)_[N].callback===p&&(_.splice(N,1),x--,N--);_.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&ud(i.prototype,l),a}();function wl(a,i){return i*Math.round(a/i)||a}function Is(a,i){return a%i}function Xc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Yc(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Yc(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yc(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var sd=function(a,i,l){var u=Xc(a,2),p=u[0],f=u[1],y=Xc(i,2),_=y[0],x=y[1],N=Xc(l,2),D=N[0],z=N[1];return p>_&&p<D&&f>x&&f<z},cd=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Za=function(a){return function(i,l,u){var p=Object(i);if(!Uo(i)){var f=Cc(l);i=Ll(i),l=function(_){return f(p[_],_,p)}}var y=a(i,l,u);return y>-1?p[f?i[y]:y]:void 0}},sp=function(a,i,l,u){for(var p=a.length,f=l+(u?1:-1);u?f--:++f<p;)if(i(a[f],f,a))return f;return-1},cp=/\s/,fp=function(a){for(var i=a.length;i--&&cp.test(a.charAt(i)););return i},fd=/^\s+/,El=function(a){return a&&a.slice(0,fp(a)+1).replace(fd,"")},qc=/^[-+]0x[0-9a-f]+$/i,dd=/^0b[01]+$/i,pd=/^0o[0-7]+$/i,Ls=parseInt,Xl=function(a){if(typeof a=="number")return a;if(dr(a))return NaN;if(Rr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Rr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=El(a);var l=dd.test(a);return l||pd.test(a)?Ls(a.slice(2),l?2:8):qc.test(a)?NaN:+a},Jn=1/0,Fs=function(a){return a?(a=Xl(a))===Jn||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},Kc=function(a){var i=Fs(a),l=i%1;return i==i?l?i-l:i:0},Ja=Math.max,$s,Bs=Za(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var p=l==null?0:Kc(l);return p<0&&(p=Ja(u+p,0)),sp(a,Cc(i),p)}),So=new Uint8Array(16);function Us(){if(!$s&&!($s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(So)}for(var Ou=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Zc=function(a){return typeof a=="string"&&Ou.test(a)},oo=[],Lo=0;Lo<256;++Lo)oo.push((Lo+256).toString(16).substr(1));var Yl=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(oo[a[i+0]]+oo[a[i+1]]+oo[a[i+2]]+oo[a[i+3]]+"-"+oo[a[i+4]]+oo[a[i+5]]+"-"+oo[a[i+6]]+oo[a[i+7]]+"-"+oo[a[i+8]]+oo[a[i+9]]+"-"+oo[a[i+10]]+oo[a[i+11]]+oo[a[i+12]]+oo[a[i+13]]+oo[a[i+14]]+oo[a[i+15]]).toLowerCase();if(!Zc(l))throw TypeError("Stringified UUID is invalid");return l},Qa=function(a,i,l){var u=(a=a||{}).random||(a.rng||Us)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){l=l||0;for(var p=0;p<16;++p)i[l+p]=u[p];return i}return Yl(u)},el=function(){return Qa()},xu=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,p){return u[p.id]=i+Qa(),p.id=u[p.id],u},{});return a.edges.forEach(function(u){u.id=i+Qa(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},Ol=(r(105),r(127),r(207),function(a,i,l){var u=a.x,p=a.y,f=i.x,y=i.y,_=l.x,x=l.y,N=(x-y)/(_-f),D=y-N*f;return u>=f&&u<=_&&p>=y&&p<=x&&Math.abs(p-N*u+D)<Number.EPSILON});function Gs(a){return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gs(a)}function Jc(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Su(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Jc(Object(l),!0).forEach(function(u){Vs(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Jc(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Vs(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var kt,dp,ns,Qc,hd,pp,xl,hp,tl,Au,vd,vh,yh,mh,vp,yp,mp,gp,gh,bh,_h,$i=function(a){return a.anchors},rs=function(a,i){for(var l,u=i.nodes,p=u.length-1;p>=0;p--){var f=u[p];if(yd(a,f)){var y=f.getTargetAnchor(a);if(y){var _={node:f,anchorIndex:y.index,anchor:y.anchor};l&&!ef(f,l.node,i)||(l=_)}}}return l},ef=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},la=function(a,i,l,u){return Math.hypot(a-l,i-u)},ja=function(a,i){var l=!1,u=Bi(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},yd=function(a,i){var l=!1,u=Bi(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Bi=function(a){var i=a.x,l=a.y,u=a.width,p=a.height;return{minX:i-u/2,minY:l-p/2,maxX:i+u/2,maxY:l+p/2,x:i,y:l,width:u,height:p,centerX:i,centerY:l}},tf=function(a,i,l){var u,p=function(y){var _=y,x=_.x,N=_.y,D=_.width,z=_.height,K=_.radius;return[{x:x-D/2+K,y:N-z/2+K,r:K},{x:x+D/2-K,y:N-z/2+K,r:K},{x:x-D/2+K,y:N+z/2-K,r:K},{x:x+D/2-K,y:N+z/2-K,r:K}]}(l),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(y){var _=la(a.x,a.y,y.x,y.y);_<f&&(f=_,u=y)}),os(a,i,u)},os=function(a,i,l){var u,p=l,f=p.x,y=p.y,_=p.r;if(i===lo.HORIZONTAL){var x=f-Math.sqrt(_*_-(a.y-y)*(a.y-y)),N=f+Math.sqrt(_*_-(a.y-y)*(a.y-y));u={x:Math.abs(x-a.x)<Math.abs(N-a.x)?x:N,y:a.y}}else if(i===lo.VERTICAL){var D=y-Math.sqrt(_*_-(a.x-f)*(a.x-f)),z=y+Math.sqrt(_*_-(a.x-f)*(a.x-f)),K=Math.abs(D-a.y)<Math.abs(z-a.y)?D:z;u={x:a.x,y:K}}return u},Ws=function(a,i){var l=i,u=!1,p=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,y=l.y-l.height/2+l.radius,_=l.y+l.height/2-l.radius,x=l.x,N=l.y,D=l.width,z=l.height;return a.y===N+z/2||a.y===N-z/2?u=a.x>p&&a.x<f:a.x!==x+D/2&&a.x!==x-D/2||(u=a.y>y&&a.y<_),u},nf=function(a,i,l){var u,p=l,f=p.x,y=p.y,_=p.rx,x=p.ry;if(i===lo.HORIZONTAL){var N=f-Math.sqrt(_*_-(a.y-y)*(a.y-y)*_*_/(x*x)),D=f+Math.sqrt(_*_-(a.y-y)*(a.y-y)*_*_/(x*x));u={x:Math.abs(N-a.x)<Math.abs(D-a.x)?N:D,y:a.y}}else if(i===lo.VERTICAL){var z=y-Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(_*_)),K=y+Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(_*_)),pe=Math.abs(z-a.y)<Math.abs(K-a.y)?z:K;u={x:a.x,y:pe}}return u},rf=function(a,i,l){for(var u,p=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],_=0;_<p.length;_++)y.push({start:p[_],end:p[(_+1)%p.length]});return y.forEach(function(x){var N=x.start,D=x.end,z=N,K=D;N.x>D.x&&(z=D,K=N);var pe={x:a.x,y:a.y};if(z.x===K.x&&i===lo.HORIZONTAL&&(pe={x:z.x,y:a.y}),z.y===K.y&&i===lo.VERTICAL&&(pe={x:a.x,y:z.y}),z.x!==K.x&&z.y!==K.y){var xe=(K.y-z.y)/(K.x-z.x),ke=(z.x*K.y-K.x*z.y)/(z.x-K.x);i===lo.HORIZONTAL?pe={x:(a.y-ke)/xe,y:a.y}:i===lo.VERTICAL&&(pe={x:a.x,y:xe*a.x+ke})}if(Ol(pe,N,D)){var Je=la(pe.x,pe.y,a.x,a.y);Je<f&&(f=Je,u=pe)}}),u},zs=function(a,i,l,u){var p=a.x,f=a.y;return i.x>a.x?p=a.x+l/2:i.x<a.x&&(p=a.x-l/2),i.y>a.y?f=a.y+u/2:i.y<a.y&&(f=a.y-u/2),{x:p,y:f}},Hs=function(a){var i=a.rows,l=a.style,u=a.rowsLength,p=a.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=p,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?i.forEach(function(_){var x=document.createElement("div");x.textContent=_,f.appendChild(x)}):f.textContent=i,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},is=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,p=0;return i&&i.forEach(function(f){var y=Zn(f);p=y>p?y:p}),{width:Math.ceil(p/2)*u+u/4,height:l*(u+2)+u/4}},ql=function(a){return Gs(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},Ko=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},of=1e3,af=999,Kl=function(){return++of};function bp(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Ui(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?bp(Object(l),!0).forEach(function(u){Ia(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):bp(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Zo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function wh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ia(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Fn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var md=(kt=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Ia(this,"id",""),Zo(this,"type",dp,this),Zo(this,"sourceNodeId",ns,this),Zo(this,"targetNodeId",Qc,this),Zo(this,"startPoint",hd,this),Zo(this,"endPoint",pp,this),Zo(this,"text",xl,this),Zo(this,"properties",hp,this),Zo(this,"points",tl,this),Zo(this,"pointsList",Au,this),Zo(this,"isSelected",vd,this),Zo(this,"isHovered",vh,this),Zo(this,"isHitable",yh,this),Zo(this,"draggable",mh,this),Zo(this,"visible",vp,this),Ia(this,"virtual",!1),Zo(this,"isAnimation",yp,this),Zo(this,"isShowAdjustPoint",mp,this),Ia(this,"graphModel",void 0),Zo(this,"zIndex",gp,this),Ia(this,"BaseType",ao.EDGE),Ia(this,"modelType",Er.EDGE),Zo(this,"state",gh,this),Ia(this,"additionStateData",void 0),Ia(this,"sourceAnchorId",""),Ia(this,"targetAnchorId",""),Ia(this,"menu",void 0),Ia(this,"customTextPosition",!1),Zo(this,"style",bh,this),Zo(this,"arrowConfig",_h,this),this.graphModel=p,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||el()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var _=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=_,Pi(this,he(u)),this.graphModel.overlapMode===bo.INCREASE&&(this.zIndex=u.zIndex||Kl()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ui(Ui({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ui({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return _o(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return _o(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?p.stroke:u.stroke;return Ui(Ui({},u),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return _o(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,p,f){var y,_,x=$i(u);return f&&(y=Bs(x,function(N){return N.id===f}))||x.forEach(function(N){var D=tt(N,p);(_===void 0||D<_)&&(_=D,y=N)}),y}},{key:"getEndAnchor",value:function(u,p){var f,y,_=this,x=$i(u);return p&&(f=Bs(x,function(N){return N.id===p}))||x.forEach(function(N){var D=tt(N,_.startPoint);(y===void 0||D<y)&&(y=D,f=N)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,_={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(_.text={x:p,y:f,value:y}),this.graphModel.overlapMode===bo.INCREASE&&(_.zIndex=this.zIndex),_}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,p){this.properties[u]=Ko(p),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Ui(Ui({},Object(c.I)(this.properties)),Ko(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var p=this.arrowConfig,f=p.markerEnd,y=p.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,p){this.style=Ui(Ui({},this.style),{},Ia({},u,Ko(p)))}},{key:"setStyles",value:function(u){this.style=Ui(Ui({},this.style),Ko(u))}},{key:"updateStyles",value:function(u){this.style=Ui({},Ko(u))}},{key:"formatText",value:function(u){var p=this.textPosition,f=p.x,y=p.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||y,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,p=u.x,f=u.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(u,p){if(this.text){var f=this.text,y=f.x,_=f.y,x=f.value,N=f.draggable,D=f.editable;this.text={value:x,draggable:N,x:y+u,y:_+p,editable:D}}}},{key:"setText",value:function(u){u&&Pi(this.text,u)}},{key:"updateText",value:function(u){this.text=Ui(Ui({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,p){this.startPoint.x+=u,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,p){this.endPoint.x+=u,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Pi(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var p=u.startPoint,f=u.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&wh(i.prototype,l),a}(),dp=Fn(kt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ns=Fn(kt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=Fn(kt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hd=Fn(kt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pp=Fn(kt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xl=Fn(kt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),hp=Fn(kt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tl=Fn(kt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Au=Fn(kt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vd=Fn(kt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vh=Fn(kt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yh=Fn(kt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),mh=Fn(kt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vp=Fn(kt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yp=Fn(kt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mp=Fn(kt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gp=Fn(kt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gh=Fn(kt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),bh=Fn(kt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_h=Fn(kt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Fn(kt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"sourceNode"),kt.prototype),Fn(kt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"targetNode"),kt.prototype),Fn(kt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"textPosition"),kt.prototype),Fn(kt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperty"),kt.prototype),Fn(kt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"deleteProperty"),kt.prototype),Fn(kt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperties"),kt.prototype),Fn(kt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"changeEdgeId"),kt.prototype),Fn(kt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyle"),kt.prototype),Fn(kt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyles"),kt.prototype),Fn(kt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStyles"),kt.prototype),Fn(kt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"formatText"),kt.prototype),Fn(kt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"resetTextPosition"),kt.prototype),Fn(kt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveText"),kt.prototype),Fn(kt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setText"),kt.prototype),Fn(kt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateText"),kt.prototype),Fn(kt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setAnchors"),kt.prototype),Fn(kt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setSelected"),kt.prototype),Fn(kt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHovered"),kt.prototype),Fn(kt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHitable"),kt.prototype),Fn(kt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"openEdgeAnimation"),kt.prototype),Fn(kt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"closeEdgeAnimation"),kt.prototype),Fn(kt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setElementState"),kt.prototype),Fn(kt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStartPoint"),kt.prototype),Fn(kt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveStartPoint"),kt.prototype),Fn(kt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateEndPoint"),kt.prototype),Fn(kt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveEndPoint"),kt.prototype),Fn(kt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setZIndex"),kt.prototype),Fn(kt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"initPoints"),kt.prototype),Fn(kt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAttributes"),kt.prototype),Fn(kt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"getAdjustStart"),kt.prototype),Fn(kt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"getAdjustEnd"),kt.prototype),Fn(kt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAfterAdjustStartAndEnd"),kt.prototype),kt),as=md;function gd(a){return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},gd(a)}function Eh(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xs(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Eh(Object(l),!0).forEach(function(u){Gi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Eh(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Oh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ys(){return Ys=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ls(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ys.apply(this,arguments)}function ls(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Sl(a))!==null;);return a}function rl(a,i){return rl=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},rl(a,i)}function xh(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Sl(a);if(i){var p=Sl(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _p(this,l)}}function _p(a,i){if(i&&(gd(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tu(a)}function Tu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Sl(a){return Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Sl(a)}function Gi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Gn,Ao,Ni=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&rl(f,y)})(p,a);var i,l,u=xh(p);function p(){var f;Oh(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Gi(Tu(f=u.call.apply(u,[this].concat(_))),"modelType",Er.LINE_EDGE),f}return i=p,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Xs(Xs({},Ys(Sl(p.prototype),"getEdgeStyle",this).call(this)),_o(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&nl(i.prototype,l),p}(as);function ua(a){return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ua(a)}function Xv(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Sh(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Sh(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sh(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Mu(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mr(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Mu(Object(l),!0).forEach(function(u){To(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Mu(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ah(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sa(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Jo(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function La(){return La=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Yv(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},La.apply(this,arguments)}function Yv(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=eo(a))!==null;);return a}function lf(a,i){return lf=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},lf(a,i)}function Al(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=eo(a);if(i){var p=eo(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wp(this,l)}}function wp(a,i){if(i&&(ua(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zl(a)}function Zl(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function eo(a){return eo=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},eo(a)}function To(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _i(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var uf=(Gn=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&lf(f,y)})(p,a);var i,l,u=Al(p);function p(){var f;sa(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return To(Zl(f=u.call.apply(u,[this].concat(_))),"modelType",Er.POLYLINE_EDGE),To(Zl(f),"draggingPointList",void 0),Ah(Zl(f),"dbClickPosition",Ao,Zl(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=30,La(eo(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return mr(mr({},La(eo(p.prototype),"getEdgeStyle",this).call(this)),_o(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var _=this.dbClickPosition;return{x:_.x,y:_.y}}var x=yo(this.points),N=Xv(Go(x),2),D=N[0],z=N[1];return{x:(D.x+z.x)/2,y:(D.y+z.y)/2}}},{key:"getAfterAnchor",value:function(f,y,_){var x,N;return _.forEach(function(D){var z;f===lo.HORIZONTAL?z=Math.abs(y.y-D.y):f===lo.VERTICAL&&(z=Math.abs(y.x-D.x)),(!N||N>z)&&(N=z,x=D)}),x}},{key:"getCrossPoint",value:function(f,y,_){var x;return f===lo.HORIZONTAL?x={x:_.x,y:y.y}:f===lo.VERTICAL&&(x={x:y.x,y:_.y}),x}},{key:"removeCrossPoints",value:function(f,y,_){var x=_.map(function(Qe){return Qe});if(f===1){var N=x[f],D=x[y],z=x[f-1];if(to(z,N,this.sourceNode)){if(Po(N,D,this.sourceNode)){var K=$o(N,D,this.sourceNode);K&&(x[f]=K,x.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(Qe){(Qe.x===z.x&&Qe.x===N.x||Qe.y===z.y&&Qe.y===N.y)&&la(Qe.x,Qe.y,N.x,N.y)<la(z.x,z.y,N.x,N.y)&&(x[f-1]=Qe)})}if(y===_.length-2){var pe=x[f],xe=x[y],ke=x[y+1];if(to(xe,ke,this.targetNode)){if(Po(pe,xe,this.targetNode)){var Je=$o(pe,xe,this.targetNode);Je&&(x[y]=Je,x.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(Qe){(Qe.x===ke.x&&Qe.x===xe.x||Qe.y===ke.y&&Qe.y===xe.y)&&la(Qe.x,Qe.y,xe.x,xe.y)<la(ke.x,ke.y,xe.x,xe.y)&&(x[y+1]=Qe)})}return x}},{key:"getDraggingPoints",value:function(f,y,_,x,N){var D=N.map(function(pe){return pe}),z=this.getAfterAnchor(f,_,x),K=this.getCrossPoint(f,_,z);return y==="start"?(D.unshift(K),D.unshift(z)):(D.push(K),D.push(z)),D}},{key:"updateCrossPoints",value:function(f){var y=f.map(function($t){return $t}),_=f[0],x=f[1],N=f[y.length-2],D=f[y.length-1],z=this.sourceNode,K=this.targetNode,pe=z.modelType,xe=K.modelType,ke=wo(_,x),Je=y[0];switch(pe){case Er.RECT_NODE:z.radius!==0&&(Ws(_,z)||(Je=tf(_,ke,z)));break;case Er.CIRCLE_NODE:Je=os(_,ke,z);break;case Er.ELLIPSE_NODE:Je=nf(_,ke,z);break;case Er.DIAMOND_NODE:case Er.POLYGON_NODE:Je=rf(_,ke,z)}Je&&(y[0]=Je);var Qe=wo(N,D),yt=y[y.length-1];switch(xe){case Er.RECT_NODE:K.radius!==0&&(Ws(D,K)||(yt=tf(D,Qe,K)));break;case Er.CIRCLE_NODE:yt=os(D,Qe,K);break;case Er.ELLIPSE_NODE:yt=nf(D,Qe,K);break;case Er.DIAMOND_NODE:case Er.POLYGON_NODE:yt=rf(D,Qe,K)}return yt&&(y[y.length-1]=yt),y}},{key:"getData",value:function(){var f=La(eo(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=sr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(N){N.x+=f,N.y+=y});var _=this.pointsList[0];this.startPoint=Object.assign({},_);var x=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},x),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var _=f.start,x=f.end,N=f.startIndex,D=f.endIndex,z=f.direction,K=this.pointsList,pe=K;return z===lo.HORIZONTAL?(K[N]={x:_.x,y:_.y+y.y},K[D]={x:x.x,y:x.y+y.y},pe=this.pointsList.map(function(xe){return xe})):z===lo.VERTICAL&&(K[N]={x:_.x+y.x,y:_.y},K[D]={x:x.x+y.x,y:x.y},pe=this.pointsList.map(function(xe){return xe})),this.updatePointsAfterDrag(pe),this.draggingPointList=pe,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},K[N]),end:Object.assign({},K[D]),startIndex:N,endIndex:D,direction:z}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var _=f.start,x=f.end,N=f.startIndex,D=f.endIndex,z=f.direction,K=this.pointsList;if(z===lo.HORIZONTAL){K[N]={x:_.x,y:_.y+y.y},K[D]={x:x.x,y:x.y+y.y};var pe=this.pointsList.map(function(sn){return sn});if(N!==0&&D!==this.pointsList.length-1&&(pe=this.removeCrossPoints(N,D,pe)),N===0){var xe={x:_.x,y:_.y+y.y};if(!ja(xe,this.sourceNode)){var ke=this.sourceNode.anchors;pe=this.getDraggingPoints(z,"start",xe,ke,pe)}}if(D===this.pointsList.length-1){var Je={x:x.x,y:x.y+y.y};if(!ja(Je,this.targetNode)){var Qe=this.targetNode.anchors;pe=this.getDraggingPoints(z,"end",Je,Qe,pe)}}this.updatePointsAfterDrag(pe),this.draggingPointList=pe}else if(z===lo.VERTICAL){K[N]={x:_.x+y.x,y:_.y},K[D]={x:x.x+y.x,y:x.y};var yt=this.pointsList.map(function(sn){return sn});if(N!==0&&D!==this.pointsList.length-1&&(yt=this.removeCrossPoints(N,D,yt)),N===0){var $t={x:_.x+y.x,y:_.y};if(!ja($t,this.sourceNode)){var hn=this.sourceNode.anchors;yt=this.getDraggingPoints(z,"start",$t,hn,yt)}}if(D===this.pointsList.length-1){var dn={x:x.x+y.x,y:x.y};if(!ja(dn,this.targetNode)){var Hn=this.targetNode.anchors;yt=this.getDraggingPoints(z,"end",dn,Hn,yt)}}this.updatePointsAfterDrag(yt),this.draggingPointList=yt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},K[N]),end:Object.assign({},K[D]),startIndex:N,endIndex:D,direction:z}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Fo(yo(this.points));this.pointsList=f.map(function(x){return x}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var _=f[f.length-1];this.endPoint=Object.assign({},_)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(_){return"".concat(_.x,",").concat(_.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,_=f.endPoint,x=f.sourceNode,N=f.targetNode,D=sr({x:y.x,y:y.y},{x:_.x,y:_.y},x,N,this.offset||0);this.pointsList=D,this.initPoints()}}])&&Jo(i.prototype,l),p}(as),Ao=_i(Gn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i(Gn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"initPoints"),Gn.prototype),_i(Gn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePoints"),Gn.prototype),_i(Gn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateStartPoint"),Gn.prototype),_i(Gn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveStartPoint"),Gn.prototype),_i(Gn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateEndPoint"),Gn.prototype),_i(Gn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveEndPoint"),Gn.prototype),_i(Gn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsList"),Gn.prototype),_i(Gn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendStart"),Gn.prototype),_i(Gn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendSimple"),Gn.prototype),_i(Gn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppend"),Gn.prototype),_i(Gn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendEnd"),Gn.prototype),_i(Gn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsAfterDrag"),Gn.prototype),_i(Gn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustStart"),Gn.prototype),_i(Gn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustEnd"),Gn.prototype),_i(Gn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateAfterAdjustStartAndEnd"),Gn.prototype),Gn),I=function(a){var i=a.start,l=a.end,u=a.offset,p=a.verticalLength,f=a.type,y={leftX:0,leftY:0,rightX:0,rightY:0},_=Math.atan((l.y-i.y)/(l.x-i.x)),x=Math.atan(u/p),N=Math.sqrt(p*p+u*u);return f==="start"?l.x>=i.x?(y.leftX=i.x+N*Math.sin(_+x),y.leftY=i.y-N*Math.cos(_+x),y.rightX=i.x-N*Math.sin(_-x),y.rightY=i.y+N*Math.cos(_-x)):(y.leftX=i.x-N*Math.sin(_+x),y.leftY=i.y+N*Math.cos(_+x),y.rightX=i.x+N*Math.sin(_-x),y.rightY=i.y-N*Math.cos(_-x)):f==="end"&&(l.x>=i.x?(y.leftX=l.x+N*Math.sin(_-x),y.leftY=l.y-N*Math.cos(_-x),y.rightX=l.x-N*Math.sin(_+x),y.rightY=l.y+N*Math.cos(_+x)):(y.leftX=l.x-N*Math.sin(_-x),y.leftY=l.y+N*Math.cos(_-x),y.rightX=l.x+N*Math.sin(_+x),y.rightY=l.y-N*Math.cos(_+x))),y},oe={x:1,y:0,z:0};function be(a,i,l,u,p){for(var f=function(xe){if(xe<0||xe>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-xe,3)+3*i.x*xe*Math.pow(1-xe,2)+3*l.x*Math.pow(xe,2)*(1-xe)+u.x*Math.pow(xe,3),y:a.y*Math.pow(1-xe,3)+3*i.y*xe*Math.pow(1-xe,2)+3*l.y*Math.pow(xe,2)*(1-xe)+u.y*Math.pow(xe,3)}},y=0,_=2,x=u.x,N=u.y,D=u;y<p&&_<50;){var z=D=f(1-_/100),K=z.x,pe=z.y;y=la(x,N,K,pe),_++}return D}function et(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function dt(a){return u=function(f,y){return f.x*y.y-f.y*y.x}(i=oe,l=a),p=Math.acos(function(f,y){var _=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(x,N,D){return x+N*_[D]})}(et(i),et(l))),u>=0?p:-p;var i,l,u,p}function Ze(a){return a*(180/Math.PI)}function st(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Nt(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?st(Object(l),!0).forEach(function(u){jt(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):st(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function jt(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ct(a){return function(i){if(Array.isArray(i))return Rt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Bt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(a){return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ct(a)}function Gt(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||Bt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bt(a,i){if(a){if(typeof a=="string")return Rt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Rt(a,i):void 0}}function Rt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var bt=function(a,i){var l;switch(a.type){case"line":default:l=new Ni(a,i);break;case"polyline":l=new uf(a,i)}return l},Ve=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},it=function(a){var i=[],l={};return a.forEach(function(u){var p="".concat(u.x,"-").concat(u.y);u.id=p,l[p]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Lt=function(a,i){var l=[a,{x:a.x,y:i.y},i];return it(l)},Kt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},xt=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?lo.HORIZONTAL:lo.VERTICAL},Zt=function(a,i,l){return xt(l,i)===lo.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},St=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),p=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return{centerX:(l+p)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:p,maxY:f,height:f-u,width:p-l}},Vt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(D){l.push(D.x),u.push(D.y)});var p=Math.min.apply(Math,l),f=Math.max.apply(Math,l),y=Math.min.apply(Math,u),_=Math.max.apply(Math,u),x=f-p,N=_-y;return i&&(x+=i,N+=i),{centerX:(p+f)/2,centerY:(y+_)/2,maxX:f,maxY:_,minX:p,minY:y,x:(p+f)/2,y:(y+_)/2,height:N,width:x}},_t=function(a){var i=a.minX,l=a.minY,u=a.maxX,p=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:p},{x:i,y:p}]},Ht=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},Mn=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},Wn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},It=function(a,i){return Mn(a,i.x).concat(Wn(a,i.y))},At=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},wt=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Cn=function(a,i,l,u,p){return At(a,i)+At(a,l)+wt(a,[i,l,u,p])},tr=function a(i,l,u,p,f){f||(f=0),i.unshift(l[p]),u[p]&&u[p]!==p&&f<=100&&a(i,l,u,u[p],f+1)},un=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},Qn=function(a,i,l,u){var p=i.x-a.x,f=i.y-a.y,y=u.x-l.x,_=u.y-l.y,x=(-f*(a.x-l.x)+p*(a.y-l.y))/(-y*f+p*_),N=(y*(a.y-l.y)-_*(a.x-l.x))/(-y*f+p*_);return x>=0&&x<=1&&N>=0&&N<=1},Vn=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=Gt(_t(l),4),p=u[0],f=u[1],y=u[2],_=u[3];return Qn(a,i,p,f)||Qn(a,i,p,_)||Qn(a,i,f,y)||Qn(a,i,y,_)},nr=function(a,i,l,u){var p=[];return a.forEach(function(f){f!==i&&(f.x!==i.x&&f.y!==i.y||Vn(f,i,l)||Vn(f,i,u)||p.push(f))}),it(p)},gr=function(a,i,l,u,p,f,y){var _=[],x=[i],N={},D={},z={};D[i.id]=0,z[i.id]=Cn(i,l,i);var K={};a.forEach(function(ke){K[ke.id]=ke});for(var pe=function(){var ke=void 0,Je=1/0;if(x.forEach(function(yt){z[yt.id]<Je&&(Je=z[yt.id],ke=yt)}),ke===l){var Qe=[];return tr(Qe,K,N,l.id),{v:Qe}}un(x,ke),_.push(ke),nr(a,ke,u,p).forEach(function(yt){if(_.indexOf(yt)===-1){x.indexOf(yt)===-1&&x.push(yt);var $t=z[ke.id]+At(ke,yt);D[yt.id]&&$t>=D[yt.id]||(N[yt.id]=ke.id,D[yt.id]=$t,z[yt.id]=D[yt.id]+Cn(yt,l,i,f,y))}})};x.length;){var xe=pe();if(ct(xe)==="object")return xe.v}return[i,l]},Mo=function(a){return Bi(a)},Fo=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],p=a[i+1];l.x===u.x&&u.x===p.x||l.y===u.y&&u.y===p.y?a.splice(i,1):i++}return a},sr=function(a,i,l,u,p){var f=Mo(l),y=Mo(u),_=Kt(f,p),x=Kt(y,p),N=Zt(_,f,a),D=Zt(x,y,i);if(Ve(_,x)){var z=Qo(a,i,N,D);return[a,N].concat(Ct(z),[D,i])}var K=Vt([N,D]),pe=St(_,K),xe=St(x,K),ke=[];ke=(ke=ke.concat(_t(pe))).concat(_t(xe));var Je={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[K,pe,xe].forEach(function(yt){ke=ke.concat(It(yt,Je).filter(function($t){return Ht($t,_)&&Ht($t,x)}))}),[{x:N.x,y:D.y},{x:D.x,y:N.y}].forEach(function(yt){Ht(yt,_)&&Ht(yt,x)&&ke.push(yt)}),ke.unshift(N),ke.push(D),ke=it(ke);var Qe=gr(ke,N,D,f,y,a,i);return Qe.unshift(a),Qe.push(i),Qe.length>2&&(Qe=Fo(Qe)),it(Qe)},Go=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],p=la(l.x,l.y,u.x,u.y),f=1;f<a.length-1;f++){var y=a[f],_=a[f+1],x=la(y.x,y.y,_.x,_.y);x>p&&(p=x,l=y,u=_)}i=[l,u]}return i},to=function(a,i,l){var u=ja(a,l),p=ja(i,l);return u&&p},Po=function(a,i,l){var u=ja(a,l),p=ja(i,l);return!(u&&p)&&(u||p)},$o=function(a,i,l){for(var u,p,f=Bi(l),y=_t(f),_=0;_<y.length;_++)Qn(a,i,y[_],y[(_+1)%y.length])&&(p=[y[_],y[(_+1)%y.length]]);return p&&(u=function(x,N,D,z){var K=(N.y-x.y)*(z.x-D.x)-(x.x-N.x)*(D.y-z.y);if(K===0)return!1;var pe=((N.x-x.x)*(z.x-D.x)*(D.y-x.y)+(N.y-x.y)*(z.x-D.x)*x.x-(z.y-D.y)*(N.x-x.x)*D.x)/K,xe=-((N.y-x.y)*(z.y-D.y)*(D.x-x.x)+(N.x-x.x)*(z.y-D.y)*x.y-(z.x-D.x)*(N.y-x.y)*D.y)/K;return(pe-x.x)*(pe-N.x)<=0&&(xe-x.y)*(xe-N.y)<=0&&(pe-D.x)*(pe-z.x)<=0&&(xe-D.y)*(xe-z.y)<=0&&{x:pe,y:xe}}(a,i,p[0],p[1])),u},wo=function(a,i){var l;return a.x===i.x?l=lo.VERTICAL:a.y===i.y&&(l=lo.HORIZONTAL),l},yo=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var p=Gt(u.split(","),2),f=p[0],y=p[1];l.push({x:Number(f),y:Number(y)})}),l},Qo=function(a,i,l,u){var p=[];if(wo(a,l)===wo(i,u))a.y===l.y?(p.push({x:l.x,y:(l.y+u.y)/2}),p.push({x:u.x,y:(l.y+u.y)/2})):(p.push({x:(l.x+u.x)/2,y:l.y}),p.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},y=Ol(f,a,l),_=Ol(f,i,u);if(y||_)f={x:u.x,y:l.y};else{var x=Eo(f,a,l),N=Eo(f,i,u);x&&N&&(f={x:u.x,y:l.y})}p.push(f)}return p},Eo=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Zn=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},ai=null,Nr=function(a,i){ai||(ai=document.createElement("canvas"));var l=ai.getContext("2d");return l.font=i,l.measureText(a).width},kn=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var p={start:l,end:u,offset:10,verticalLength:5},f=I(Nt(Nt({},p),{},{type:"start"})),y=I(Nt(Nt({},p),{},{type:"end"}));i="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},cr=function(a){var i=a.start,l=a.end,u=a.sourceNode,p=a.targetNode,f=a.offset,y=Bi(u),_=Bi(p),x=Kt(y,f),N=Kt(_,f);return{sNext:Zt(x,y,i),ePre:Zt(N,_,l)}},zn=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[uo(i[0]),uo(i[1]),uo(i[2]),uo(i[3])]},uo=function(a){var i=Gt(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},Fa=function(a,i){var l=Gt(a,4);return[be(l[0],l[1],l[2],l[3],i),a[3]]},Jl=function(a,i){for(var l,u=a.x,p=a.y,f=yo(i),y=Number.MAX_SAFE_INTEGER,_=[],x=0;x<f.length;x++)_.push({start:f[x],end:f[(x+1)%f.length]});if(_.forEach(function(K){var pe=K.start,xe=K.end;if(pe.x===xe.x){var ke={x:pe.x,y:p};if(Ol(ke,pe,xe)){var Je=Math.abs(pe.x-u);Je<y&&(y=Je,l=ke)}}else if(pe.y===xe.y){var Qe={x:u,y:pe.y};if(Ol(Qe,pe,xe)){var yt=Math.abs(pe.y-p);yt<y&&(y=yt,l=Qe)}}}),!l){var N=_[0],D=N.start,z=N.end;l={x:D.x+(z.x-D.x)/2,y:D.y+(z.y-D.y)/2}}return l},he=function(a){return Ka(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},tt=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function qe(a,i){return typeof i!="function"?function(l,u,p){return Object.assign({type:a.edgeType},p)}:function(l,u,p){var f=i(l,u,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:a.edgeType}}}r(208);var tn=function(){};function pr(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function le(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Q=function(){function a(u){var p=this,f=u.onDragStart,y=f===void 0?tn:f,_=u.onDragging,x=_===void 0?tn:_,N=u.onDragEnd,D=N===void 0?tn:N,z=u.eventType,K=z===void 0?"":z,pe=u.eventCenter,xe=pe===void 0?null:pe,ke=u.step,Je=ke===void 0?1:ke,Qe=u.isStopPropagation,yt=Qe===void 0||Qe,$t=u.model,hn=$t===void 0?null:$t,dn=u.data,Hn=dn===void 0?null:dn;(function(sn,jn){if(!(sn instanceof jn))throw new TypeError("Cannot call a class as a function")})(this,a),le(this,"onDragStart",void 0),le(this,"onDragging",void 0),le(this,"onDragEnd",void 0),le(this,"step",void 0),le(this,"isStopPropagation",void 0),le(this,"isDragging",!1),le(this,"isStartDragging",!1),le(this,"startX",0),le(this,"startY",0),le(this,"sumDeltaX",0),le(this,"sumDeltaY",0),le(this,"eventType",void 0),le(this,"eventCenter",void 0),le(this,"model",void 0),le(this,"data",void 0),le(this,"startTime",void 0),le(this,"handleMouseDown",function(sn){var jn,_n,kr,Fr=(jn=window)===null||jn===void 0?void 0:jn.document;if(sn.button===0){p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging=!0,p.startX=sn.clientX,p.startY=sn.clientY,Fr.addEventListener("mousemove",p.handleMouseMove,!1),Fr.addEventListener("mouseup",p.handleMouseUp,!1);var ur=(_n=p.model)===null||_n===void 0?void 0:_n.getData();(kr=p.eventCenter)===null||kr===void 0||kr.emit(Rn["".concat(p.eventType,"_MOUSEDOWN")],{e:sn,data:p.data||ur}),p.startTime=new Date().getTime()}}),le(this,"handleMouseMove",function(sn){if(p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=sn.clientX-p.startX,p.sumDeltaY+=sn.clientY-p.startY,p.startX=sn.clientX,p.startY=sn.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var jn,_n=p.sumDeltaX%p.step,kr=p.sumDeltaY%p.step,Fr=p.sumDeltaX-_n,ur=p.sumDeltaY-kr;p.sumDeltaX=_n,p.sumDeltaY=kr;var Hr,pi=(jn=p.model)===null||jn===void 0?void 0:jn.getData();p.isDragging||((Hr=p.eventCenter)===null||Hr===void 0||Hr.emit(Rn["".concat(p.eventType,"_DRAGSTART")],{e:sn,data:p.data||pi}),p.onDragStart({event:sn})),p.isDragging=!0,Promise.resolve().then(function(){var hi,_a;p.onDragging({deltaX:Fr,deltaY:ur,event:sn}),(hi=p.eventCenter)===null||hi===void 0||hi.emit(Rn["".concat(p.eventType,"_MOUSEMOVE")],{e:sn,data:p.data||pi}),(_a=p.eventCenter)===null||_a===void 0||_a.emit(Rn["".concat(p.eventType,"_DRAG")],{e:sn,data:p.data||pi})})}}),le(this,"handleMouseUp",function(sn){var jn=window.document;p.isStartDragging=!1,p.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var _n,kr,Fr;jn.removeEventListener("mousemove",p.handleMouseMove,!1),jn.removeEventListener("mouseup",p.handleMouseUp,!1);var ur=(_n=p.model)===null||_n===void 0?void 0:_n.getData();(kr=p.eventCenter)===null||kr===void 0||kr.emit(Rn["".concat(p.eventType,"_MOUSEUP")],{e:sn,data:p.data||ur}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:sn}),(Fr=p.eventCenter)===null||Fr===void 0||Fr.emit(Rn["".concat(p.eventType,"_DROP")],{e:sn,data:p.data||ur}))})}),le(this,"cancelDrag",function(){var sn,jn=(sn=window)===null||sn===void 0?void 0:sn.document;jn.removeEventListener("mousemove",p.handleMouseMove,!1),jn.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=y,this.onDragging=x,this.onDragEnd=D,this.step=Je,this.isStopPropagation=yt,this.eventType=K,this.eventCenter=xe,this.model=hn,this.data=Hn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&pr(i.prototype,l),a}();function Te(a){return Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Te(a)}function Ue(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function He(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ne(a,i,l){return i&&He(a.prototype,i),l&&He(a,l),a}function Me(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&d(a,i)}function Ie(a){var i=Ye();return function(){var l,u=m(a);if(i){var p=m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fe(this,l)}}function fe(a,i){if(i&&(Te(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(a)}function we(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ue(a){var i=typeof Map=="function"?new Map:void 0;return ue=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return $e(l,arguments,m(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,l)},ue(a)}function $e(a,i,l){return $e=Ye()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var _=new(Function.bind.apply(u,y));return f&&d(_,f.prototype),_},$e.apply(null,arguments)}function Ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a,i){return d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d(a,i)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},m(a)}function E(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function C(a,i){return a instanceof Z&&i instanceof Z}var V=function(a){Me(l,a);var i=Ie(l);function l(u,p,f){var y;return Ue(this,l),E(we(y=i.call(this,3)),"x",void 0),E(we(y),"y",void 0),E(we(y),"z",void 0),y[0]=u,y[1]=p,y[2]=f,y.x=u,y.y=p,y.z=f,Object.setPrototypeOf(we(y),l.prototype),y}return Ne(l,[{key:"add",value:function(u){if(C(this,u))return new Z(this.x+u.x,this.y+u.y);var p=this.z+u.z;return new de((this.x+u.x)/p,(this.y+u.y)/p)}},{key:"subtract",value:function(u){if(C(this,u))return new Z(this.x-u.x,this.y-u.y);var p=this.z-u.z;return p===0?new Z(this.x-u.x,this.y-u.y):new de((this.x-u.x)/p,(this.y-u.y)/p)}}]),l}(ue(Array)),Z=function(a){Me(l,a);var i=Ie(l);function l(u,p,f){var y;return Ue(this,l),y=i.call(this,u,p,f??0),Object.setPrototypeOf(we(y),l.prototype),y}return Ne(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var p=this;return u.reduce(function(f,y,_){return f+y*p[_]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var p=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return p>=0?f:-f}}]),l}(V),de=function(a){Me(l,a);var i=Ie(l);function l(u,p){var f;return Ue(this,l),f=i.call(this,u,p,1),Object.setPrototypeOf(we(f),l.prototype),f}return Ne(l,[{key:"toString",value:function(){return"Point"}}]),l}(V);r(67),r(218);function _e(a){return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_e(a)}function Le(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||mt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(a){return function(i){if(Array.isArray(i))return Ut(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||mt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mt(a,i){if(a){if(typeof a=="string")return Ut(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Ut(a,i):void 0}}function Ut(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function An(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function En(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yn(a,i,l){return i&&En(a.prototype,i),l&&En(a,l),a}function Pt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Un(a,i)}function Jt(a){var i=Dr();return function(){var l,u=er(a);if(i){var p=er(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fr(this,l)}}function fr(a,i){if(i&&(_e(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(a)}function gn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ir(a){var i=typeof Map=="function"?new Map:void 0;return ir=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return rr(l,arguments,er(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Un(p,l)},ir(a)}function rr(a,i,l){return rr=Dr()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var _=new(Function.bind.apply(u,y));return f&&Un(_,f.prototype),_},rr.apply(null,arguments)}function Dr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Un(a,i){return Un=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Un(a,i)}function er(a){return er=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},er(a)}function Vo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var rt,Ql,wi,Pu,us,bd,Ep,sf,qs,qv,Kv,Op,Th,Ks=function(a){Pt(l,a);var i=Jt(l);function l(){var u;An(this,l);for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];return Vo(gn(u=i.call(this,f.length)),"rows",void 0),Vo(gn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(_,x){u[x]=_}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(gn(u),l.prototype),u}return Yn(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return pt(this.map(function(p){return p[u]}))}},{key:"transpose",value:function(){for(var u=[],p=0;p<this.columns;p++)u.push(this.getColumn(p));return rr(l,u)}},{key:"cross",value:function(u){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),_=function(N){var D=u.getColumn(N);p[f][N]=y.reduce(function(z,K,pe){return z+K*D[pe]},0)},x=0;x<u.columns;x++)_(x);return rr(l,pt(p))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new de(u[0],u[1])})}},{key:"toString",value:function(){var u=Le(this[0],2),p=u[0],f=u[1],y=Le(this[1],2),_=y[0],x=y[1],N=Le(this[2],2),D=N[0],z=N[1];return"matrix(".concat(p," ").concat(f," ").concat(_," ").concat(x," ").concat(D," ").concat(z,")")}},{key:"translate",value:function(u,p){return this.cross(new Zs(u,p))}},{key:"rotate",value:function(u){return this.cross(new xp(u))}},{key:"scale",value:function(u,p){return this.cross(new Zv(u,p))}}]),l}(ir(Array)),xp=function(a){Pt(l,a);var i=Jt(l);function l(u){var p;return An(this,l),p=i.call(this,new Z(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new Z(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new Z(0,0,1)),Object.setPrototypeOf(gn(p),l.prototype),p}return Yn(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ks),Zv=function(a){Pt(l,a);var i=Jt(l);function l(u,p){var f;return An(this,l),Vo(gn(f=i.call(this,new Z(u,0,0),new Z(0,p,0),new Z(0,0,1))),"sx",void 0),Vo(gn(f),"sy",void 0),f.sx=u,f.sy=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ks),Zs=function(a){Pt(l,a);var i=Jt(l);function l(u,p){var f;return An(this,l),Vo(gn(f=i.call(this,new Z(1,0,0),new Z(0,1,0),new Z(u,p,1))),"tx",void 0),Vo(gn(f),"ty",void 0),f.tx=u,f.ty=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ks),Sp={node:!1,edge:!1},RR={node:!0,edge:!0};function FE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function om(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?FE(Object(l),!0).forEach(function(u){ss(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):FE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Mh(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||$E(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ph(a){return function(i){if(Array.isArray(i))return jb(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||$E(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $E(a,i){if(a){if(typeof a=="string")return jb(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?jb(a,i):void 0}}function jb(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function im(a){return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},im(a)}function Nu(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function kR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ss(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function qn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var BE,UE=200,GE=(rt=function(){function a(u){(function(pe,xe){if(!(pe instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,a),ss(this,"rootEl",void 0),Nu(this,"width",Ql,this),Nu(this,"height",wi,this),ss(this,"theme",void 0),ss(this,"eventCenter",void 0),ss(this,"modelMap",new Map),ss(this,"topElement",void 0),ss(this,"animation",void 0),ss(this,"idGenerator",void 0),ss(this,"edgeGenerator",void 0),ss(this,"nodeMoveRules",[]),ss(this,"customTrajectory",void 0),Nu(this,"edgeType",Pu,this),Nu(this,"nodes",us,this),Nu(this,"edges",bd,this),Nu(this,"overlapMode",Ep,this),Nu(this,"background",sf,this),Nu(this,"transformModel",qs,this),Nu(this,"editConfigModel",qv,this),Nu(this,"gridSize",Kv,this),Nu(this,"partial",Op,this),Nu(this,"fakerNode",Th,this);var p,f=u.container,y=u.background,_=y===void 0?{}:y,x=u.grid,N=u.idGenerator,D=u.edgeGenerator,z=u.animation,K=u.customTrajectory;this.background=_,im(x)==="object"&&(this.gridSize=x.size),this.rootEl=f,this.editConfigModel=new Kf(u),this.eventCenter=new Hc,this.transformModel=new ep(this.eventCenter,u),this.theme=js(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(p=z)&&typeof p!="boolean"?Eu(_o(Sp),p):_o(p===!0?RR:Sp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=N,this.customTrajectory=K,this.edgeGenerator=qe(this,D),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=el()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"modelsMap",get:function(){return[].concat(Ph(this.nodes),Ph(this.edges)).reduce(function(u,p){return u[p.id]=p,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(N){return u.push(N)}),this.edges.forEach(function(N){return u.push(N)}),u=u.sort(function(N,D){return N.zIndex-D.zIndex});for(var p=[],f=[-200,-200],y=[this.width+UE,this.height+UE],_=0;_<u.length;_++){var x=u[_];x.visible&&(!this.partial||x.isSelected||this.isElementInArea(x,f,y,!1,!1))&&p.push(x)}return p}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===zr.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===zr.TEXT_EDIT});return u||p}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(p){p.isSelected&&u.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&u.set(p.id,p)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(p){p.isSelected&&u.push(p)}),u}},{key:"getAreaElement",value:function(u,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=arguments.length>4&&arguments[4]!==void 0&&arguments[4],x=[],N=[];this.nodes.forEach(function(K){return N.push(K)}),this.edges.forEach(function(K){return N.push(K)});for(var D=0;D<N.length;D++){var z=N[D];_&&!z.visible||!this.isElementInArea(z,u,p,f,y)||x.push(z)}return x}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var p;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[u])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(u){var p=u.x,f=u.y,y=this.rootEl.getBoundingClientRect(),_={x:p-y.left,y:f-y.top},x=Mh(this.transformModel.HtmlPointToCanvasPoint([_.x,_.y]),2);return{domOverlayPosition:_,canvasOverlayPosition:{x:x[0],y:x[1]}}}},{key:"isElementInArea",value:function(u,p,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===ao.NODE){for(var x=Bi(u=u),N=x.minX,D=x.minY,z=x.maxX,K=x.maxY,pe=[{x:N,y:D},{x:z,y:D},{x:z,y:K},{x:N,y:K}],xe=_,ke=0;ke<pe.length;ke++){var Je=pe[ke],Qe=Je.x,yt=Je.y,$t=this.transformModel.CanvasPointToHtmlPoint([Qe,yt]),hn=Mh($t,2);if(Qe=hn[0],yt=hn[1],sd([Qe,yt],p,f)!==_){xe=!_;break}}return xe}if(u.BaseType===ao.EDGE){var dn=u=u,Hn=dn.startPoint,sn=dn.endPoint,jn=this.transformModel.CanvasPointToHtmlPoint([Hn.x,Hn.y]),_n=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),kr=sd(jn,p,f),Fr=sd(_n,p,f);return y?kr&&Fr:kr||Fr}return!1}},{key:"graphDataToModel",value:function(u){var p=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=zf(u.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=zf(u.edges,function(f){var y=p.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&u.push(y)});var p=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&p.push(y)}),{nodes:p,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,p=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){u=!0;break}p.push(y.getHistoryData())}if(u)return!1;for(var _=!1,x=[],N=0;N<this.edges.length;N++){var D=this.edges[N];if(D.isDragging){_=!0;break}x.push(D.getHistoryData())}return!_&&{nodes:p,edges:x}}},{key:"getEdgeModelById",value:function(u){var p;return(p=this.edgesMap[u])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var p=[],f=0;f<this.edges.length;f++){var y=this.edges[f],_=this.edges[f].sourceNodeId===u,x=this.edges[f].targetNodeId===u;(_||x)&&p.push(y)}return p}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(y){if(y.BaseType===ao.NODE&&f.nodes.push(y.getData()),y.BaseType===ao.EDGE){var _=y.getData(),x=p.get(_.sourceNodeId)&&p.get(_.targetNodeId);(u||x)&&f.edges.push(_)}}),f}},{key:"updateAttributes",value:function(u,p){this.getElement(u).updateAttributes(p)}},{key:"changeNodeId",value:function(u,p){return p||(p=el()),this.nodesMap[p]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=p),f.targetNodeId===u&&(f.targetNodeId=p)}),this.nodesMap[u].model.id=p,this.nodesMap[p]=this.nodesMap[u],p):""}},{key:"changeEdgeId",value:function(u,p){return p||(p=el()),this.edgesMap[p]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,p){return this.modelMap.set(u,p)}},{key:"toFront",value:function(u){var p,f,y,_=((p=this.nodesMap[u])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);_&&(this.overlapMode===bo.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),_.setZIndex(9999),this.topElement=_),this.overlapMode===bo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,p){var f,y,_,x=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[u])===null||y===void 0?void 0:y.model);x&&(typeof p=="number"&&(_=p),p==="top"&&(_=Kl()),p==="bottom"&&(_=--af),x.setZIndex(_))}},{key:"deleteNode",value:function(u){var p=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Rn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=Ko(u);y.id&&this.nodesMap[u.id]&&delete y.id;var _=this.getModelAfterSnapToGrid(y);this.nodes.push(_);var x=_.getData(),N={data:x};return f&&(N.e=f),this.eventCenter.emit(p,N),_}},{key:"getModelAfterSnapToGrid",value:function(u){var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,y=u.y;return f&&y&&(u.x=wl(f,this.gridSize),u.y=wl(y,this.gridSize),im(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-y)),new p(u,this)}},{key:"cloneNode",value:function(u){var p=this.getNodeModelById(u),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),p.setSelected(!1),y.getData()}},{key:"moveNode",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[u];if(_){var x=_.model,N=x.getMoveDistance(p,f,y),D=Mh(N,2);p=D[0],f=D[1],this.moveEdge(u,p,f)}}},{key:"moveNode2Coordinate",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[u];if(_){var x=_.model,N=x.x,D=x.y,z=p-N,K=f-D;this.moveNode(u,z,K,y)}}},{key:"editText",value:function(u){this.setElementStateById(u,zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var p=Ko(u),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var _=new y(om(om({},p),{},{type:f}),this),x=_.getData();return this.edges.push(_),this.eventCenter.emit(Rn.EDGE_ADD,{data:x}),_}},{key:"moveEdge",value:function(u,p,f){for(var y=0;y<this.edges.length;y++){var _=this.edges[y],x=_.textPosition,N=x.x,D=x.y,z=this.edges[y].sourceNodeId===u,K=this.edges[y].targetNodeId===u;z&&_.moveStartPoint(p,f),K&&_.moveEndPoint(p,f),(z||K)&&this.handleEdgeTextMove(_,N,D)}}},{key:"handleEdgeTextMove",value:function(u,p,f){var y;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Er.POLYLINE_EDGE&&(y=u.text)!==null&&y!==void 0&&y.value){var _=u.text,x=Jl(_,u.points);u.moveText(x.x-_.x,x.y-_.y)}else{var N=u.textPosition,D=N.x,z=N.y;u.moveText(D-p,z-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===p){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Rn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var p=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(p,1),this.eventCenter.emit(Rn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Rn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Rn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,p,f){this.nodes.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(zr.DEFAULT)}),this.edges.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(u,p){this.nodes.forEach(function(f){f.id===u&&f.updateText(p)}),this.edges.forEach(function(f){f.id===u&&f.updateText(p)})}},{key:"selectNodeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.nodesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.edgesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===bo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,p,f){for(var y=this,_=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=u.reduce(function(dn,Hn){var sn=y.nodesMap[Hn].model.getMoveDistance(p,f,_);return dn[Hn]=sn,dn},{}),N=0;N<this.edges.length;N++){var D=this.edges[N],z=D.textPosition,K=z.x,pe=z.y,xe=x[D.sourceNodeId],ke=x[D.targetNodeId],Je=void 0,Qe=void 0;if(xe&&ke&&D.modelType===Er.POLYLINE_EDGE){var yt=Mh(xe,2);Je=yt[0],Qe=yt[1],D.updatePointsList(Je,Qe)}else{if(xe){var $t=Mh(xe,2);Je=$t[0],Qe=$t[1],D.moveStartPoint(Je,Qe)}if(ke){var hn=Mh(ke,2);Je=hn[0],Qe=hn[1],D.moveEndPoint(Je,Qe)}}(xe||ke)&&this.handleEdgeTextMove(D,K,pe)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,p){var f=this.getNodeModelById(u);if(f){var y=f.getData();y.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var x=new _(y,this);this.nodes.splice(this.nodesMap[u].index,1,x),this.getNodeEdges(u).forEach(function(N){if(N.sourceNodeId===u){var D=zs(x,N.startPoint,x.width,x.height);N.updateStartPoint(D)}if(N.targetNodeId===u){var z=zs(x,N.endPoint,x.width,x.height);N.updateEndPoint(z)}})}}},{key:"changeEdgeType",value:function(u,p){var f=this.getEdgeModelById(u);if(f&&f.type!==p){var y=f.getData();y.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var x=new _(y,this);this.edges.splice(this.edgesMap[u].index,1,x)}}},{key:"getNodeIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetNodeId===u&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===u&&f.push(p.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===u&&f.push(p.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=js(om(om({},this.theme),u))}},{key:"resize",value:function(u,p){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,p=[],f=[];u.forEach(function(z){var K=z.x,pe=z.y,xe=z.width,ke=z.height,Je=z.getNodeStyle().strokeWidth,Qe=Je===void 0?0:Je,yt=K+xe/2+Qe,$t=K-xe/2-Qe,hn=pe+ke/2+Qe,dn=pe-ke/2-Qe;p=p.concat([yt,$t].filter(function(Hn){return!Number.isNaN(Hn)})),f=f.concat([hn,dn].filter(function(Hn){return!Number.isNaN(Hn)}))});var y=Math.min.apply(Math,Ph(p)),_=Math.max.apply(Math,Ph(p)),x=Math.min.apply(Math,Ph(f)),N=_-y||0,D=Math.max.apply(Math,Ph(f))-x||0;return{virtualRectWidth:N,virtualRectHeight:D,virtualRectCenterPositionX:y+N/2,virtualRectCenterPositionY:x+D/2}}},{key:"translateCenter",value:function(){var u=this.nodes,p=this.width,f=this.height,y=this.rootEl,_=this.transformModel;if(u.length){var x=p||y.clientWidth,N=f||y.clientHeight,D=this.getVirtualRectSize(),z=D.virtualRectCenterPositionX,K=D.virtualRectCenterPositionY;_.focusOn(z,K,x,N)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,_=this.height,x=this.rootEl,N=this.transformModel;if(f.length){var D=y||x.clientWidth,z=_||x.clientHeight,K=this.getVirtualRectSize(),pe=K.virtualRectWidth,xe=K.virtualRectHeight,ke=K.virtualRectCenterPositionX,Je=K.virtualRectCenterPositionY,Qe=(pe+p)/D,yt=(xe+u)/z,$t=0;$t=1/Math.max(Qe,yt);var hn=[D/2,z/2];N.zoom($t,hn),N.focusOn(ke,Je,D,z)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&kR(i.prototype,l),a}(),Ql=qn(rt.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wi=qn(rt.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pu=qn(rt.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=qn(rt.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bd=qn(rt.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ep=qn(rt.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bo.DEFAULT}}),sf=qn(rt.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs=qn(rt.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qv=qn(rt.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv=qn(rt.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Op=qn(rt.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Th=qn(rt.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(rt.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"nodesMap"),rt.prototype),qn(rt.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"edgesMap"),rt.prototype),qn(rt.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"modelsMap"),rt.prototype),qn(rt.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"sortElements"),rt.prototype),qn(rt.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"textEditElement"),rt.prototype),qn(rt.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"selectElements"),rt.prototype),qn(rt.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(rt.prototype,"selectNodes"),rt.prototype),qn(rt.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"setFakerNode"),rt.prototype),qn(rt.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"removeFakerNode"),rt.prototype),qn(rt.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"setModel"),rt.prototype),qn(rt.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"toFront"),rt.prototype),qn(rt.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"setElementZIndex"),rt.prototype),qn(rt.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"deleteNode"),rt.prototype),qn(rt.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"addNode"),rt.prototype),qn(rt.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"cloneNode"),rt.prototype),qn(rt.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"moveNode"),rt.prototype),qn(rt.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"moveNode2Coordinate"),rt.prototype),qn(rt.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"editText"),rt.prototype),qn(rt.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"addEdge"),rt.prototype),qn(rt.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"moveEdge"),rt.prototype),qn(rt.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"deleteEdgeBySourceAndTarget"),rt.prototype),qn(rt.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"deleteEdgeById"),rt.prototype),qn(rt.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"deleteEdgeBySource"),rt.prototype),qn(rt.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"deleteEdgeByTarget"),rt.prototype),qn(rt.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"setElementStateById"),rt.prototype),qn(rt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"updateText"),rt.prototype),qn(rt.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"selectNodeById"),rt.prototype),qn(rt.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"selectEdgeById"),rt.prototype),qn(rt.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"selectElementById"),rt.prototype),qn(rt.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"clearSelectElements"),rt.prototype),qn(rt.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"moveNodes"),rt.prototype),qn(rt.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"setDefaultEdgeType"),rt.prototype),qn(rt.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"changeNodeType"),rt.prototype),qn(rt.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"changeEdgeType"),rt.prototype),qn(rt.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"getNodeIncomingEdge"),rt.prototype),qn(rt.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"getNodeOutgoingEdge"),rt.prototype),qn(rt.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"getAnchorIncomingEdge"),rt.prototype),qn(rt.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"getAnchorOutcomingEdge"),rt.prototype),qn(rt.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"getNodeIncomingNode"),rt.prototype),qn(rt.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"getNodeOutgoingNode"),rt.prototype),qn(rt.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"setTheme"),rt.prototype),qn(rt.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"resize"),rt.prototype),qn(rt.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"clearData"),rt.prototype),qn(rt.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"translateCenter"),rt.prototype),qn(rt.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"fitView"),rt.prototype),qn(rt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"openEdgeAnimation"),rt.prototype),qn(rt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(rt.prototype,"closeEdgeAnimation"),rt.prototype),rt),CR=GE;function Ib(a){return Ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ib(a)}function Lb(){return Lb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Lb.apply(this,arguments)}function DR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Fb(a,i){return Fb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Fb(a,i)}function jR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=am(a);if(i){var p=am(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return IR(this,l)}}function IR(a,i){if(i&&(Ib(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Js(a)}function Js(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function am(a){return am=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},am(a)}function cf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var VE,LR=ps(BE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Fb(f,y)})(p,a);var i,l,u=jR(p);function p(f){var y;(function(D,z){if(!(D instanceof z))throw new TypeError("Cannot call a class as a function")})(this,p),cf(Js(y=u.call(this)),"stepDrag",void 0),cf(Js(y),"stepScrollX",0),cf(Js(y),"stepScrollY",0),cf(Js(y),"onDragging",function(D){var z=D.deltaX,K=D.deltaY;y.setState({isDragging:!0});var pe=y.props.graphModel,xe=pe.transformModel;pe.editConfigModel.stopMoveGraph!==!0&&xe.translate(z,K)}),cf(Js(y),"onDragEnd",function(){y.setState({isDragging:!1})}),cf(Js(y),"zoomHandler",function(D){var z=y.props,K=z.graphModel,pe=K.editConfigModel,xe=K.transformModel,ke=K.gridSize,Je=z.graphModel,Qe=D.deltaX,yt=D.deltaY;if(pe.stopScrollGraph||D.ctrlKey===!0){if(!pe.stopZoomGraph){D.preventDefault();var $t=Je.getPointByClient({x:D.clientX,y:D.clientY}).canvasOverlayPosition,hn=$t.x,dn=$t.y;xe.zoom(D.deltaY<0,[hn,dn])}}else{if(D.preventDefault(),y.stepScrollX+=Qe,y.stepScrollY+=yt,Math.abs(y.stepScrollX)>=ke){var Hn=y.stepScrollX%ke,sn=y.stepScrollX-Hn;xe.translate(-sn*xe.SCALE_X,0),y.stepScrollX=Hn}if(Math.abs(y.stepScrollY)>=ke){var jn=y.stepScrollY%ke,_n=y.stepScrollY-jn;xe.translate(0,-_n*xe.SCALE_Y),y.stepScrollY=jn}}}),cf(Js(y),"clickHandler",function(D){if(D.target.getAttribute("name")==="canvas-overlay"){var z=y.props.graphModel;z.selectElements.size>0&&z.clearSelectElements(),z.eventCenter.emit(Rn.BLANK_CLICK,{e:D})}}),cf(Js(y),"handleContextMenu",function(D){if(D.target.getAttribute("name")==="canvas-overlay"){D.preventDefault();var z=y.props.graphModel,K=z.getPointByClient({x:D.clientX,y:D.clientY});z.eventCenter.emit(Rn.BLANK_CONTEXTMENU,{e:D,position:K})}}),cf(Js(y),"mouseDownHandler",function(D){var z=y.props.graphModel,K=z.eventCenter,pe=z.editConfigModel,xe=z.transformModel.SCALE_X,ke=z.gridSize,Je=D.target,Qe=!pe.adjustEdge&&!pe.adjustNodePosition;(Je.getAttribute("name")==="canvas-overlay"||Qe)&&(pe.stopMoveGraph!==!0?(y.stepDrag.setStep(ke*xe),y.stepDrag.handleMouseDown(D)):K.emit(Rn.BLANK_MOUSEDOWN,{e:D}),y.clickHandler(D))});var _=f.graphModel,x=_.gridSize,N=_.eventCenter;return y.stepDrag=new Q({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:x,eventType:"BLANK",isStopPropagation:!1,eventCenter:N,model:null}),y.state={isDragging:!1},y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,_=y.children,x=y.dnd,N=this.state.isDragging;return Object(Fe.g)("svg",Lb({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:N?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},x.eventMap()),Object(Fe.g)("g",{transform:f},_))}}])&&DR(i.prototype,l),p}(Fe.a))||BE;function $b(a){return $b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$b(a)}function FR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function $R(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Bb(a,i){return Bb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Bb(a,i)}function BR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=lm(a);if(i){var p=lm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return UR(this,l)}}function UR(a,i){if(i&&($b(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function lm(a){return lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},lm(a)}var GR=ps(VE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Bb(f,y)})(p,a);var i,l,u=BR(p);function p(){return FR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,_=f.graphModel,x=y.getTools().map(function(N){return Object(Fe.g)(N,{graphModel:_,logicFlow:y.instance})});return y.components=x,x}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,_=f.graphModel,x=document.querySelector("#ToolOverlay_".concat(_.flowId)),N=y.getInstance();N.components.forEach(function(D){return D(N,x)}),N.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Fe.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&$R(i.prototype,l),p}(Fe.a))||VE;function Ub(a){return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ub(a)}function VR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function WR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Gb(a,i){return Gb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Gb(a,i)}function zR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=um(a);if(i){var p=um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return HR(this,l)}}function HR(a,i){if(i&&(Ub(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function um(a){return um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},um(a)}var WE,XR=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Gb(f,y)})(p,a);var i,l,u=zR(p);function p(){return VR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.background;return Object(Fe.g)("div",{className:"lf-background"},Object(Fe.g)("div",{style:f,className:"lf-background-area"}))}}])&&WR(i.prototype,l),p}(Fe.a);function Vb(a){return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Vb(a)}function YR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Wb(a,i){return Wb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Wb(a,i)}function KR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sm(a);if(i){var p=sm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ZR(this,l)}}function ZR(a,i){if(i&&(Vb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zE(a)}function zE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function sm(a){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sm(a)}function JR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var HE=ps(WE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Wb(f,y)})(p,a);var i,l,u=KR(p);function p(){var f;YR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return JR(zE(f=u.call.apply(u,[this].concat(_))),"id",el()),f}return i=p,(l=[{key:"renderDot",value:function(){var f=this.props,y=f.config,_=y.color,x=y.thickness,N=x===void 0?2:x,D=f.size,z=f.visible,K=Math.min(Math.max(2,N),D/2),pe=1;return z||(pe=0),Object(Fe.g)("rect",{width:K,height:K,rx:K/2,ry:K/2,fill:_,opacity:pe})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,_=y.color,x=y.thickness,N=x===void 0?1:x,D=f.size,z=f.visible,K=Math.min(Math.max(1,N),D/2),pe="M ".concat(D," 0 H0 M0 0 V0 ").concat(D),xe=1;return z||(xe=0),Object(Fe.g)("path",{d:pe,stroke:_,strokeWidth:K,opacity:xe})}},{key:"render",value:function(){var f=this.props,y=f.type,_=f.size,x=f.graphModel.transformModel,N=[x.SCALE_X,x.SKEW_Y,x.SKEW_X,x.SCALE_Y,x.TRANSLATE_X,x.TRANSLATE_Y].join(","),D="matrix(".concat(N,")");return Object(Fe.g)("div",{className:"lf-grid"},Object(Fe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Fe.g)("defs",null,Object(Fe.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:D,x:"0",y:"0",width:_,height:_},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object(Fe.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&qR(i.prototype,l),p}(Fe.a))||WE;HE.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function zb(a){return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},zb(a)}function QR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return XE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return XE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function XE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var YE,Nh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=QR(l,2),p=u[0],f=u[1];(p==="style"||zb(f)!=="object")&&(i[p]=f)}),Object(Fe.g)("line",i)};function Hb(a){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hb(a)}function qE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function cm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?qE(Object(l),!0).forEach(function(u){ek(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):qE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ek(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function tk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Xb(a,i){return Xb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Xb(a,i)}function rk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fm(a);if(i){var p=fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ok(this,l)}}function ok(a,i){if(i&&(Hb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function fm(a){return fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fm(a)}var KE,ik=ps(YE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Xb(f,y)})(p,a);var i,l,u=rk(p);function p(){return tk(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,_=f.isShowHorizontal,x=f.isShowVertical,N=f.getStyle(),D=y.x,z=D===void 0?0:D,K=y.y,pe=K===void 0?0:K,xe=cm(cm({x1:-1e5,y1:pe,x2:1e5,y2:pe},N),{},{stroke:_?N.stroke:"none"}),ke=cm(cm({x1:z,y1:-1e5,x2:z,y2:1e5},N),{},{stroke:x?N.stroke:"none"});return Object(Fe.g)("g",{className:"lf-snapline"},Object(Fe.g)(Nh,xe),Object(Fe.g)(Nh,ke))}}])&&nk(i.prototype,l),p}(Fe.a))||YE;function Yb(a){return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Yb(a)}function ak(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ZE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ZE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ZE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function _d(a){var i=a.x,l=a.y,u=a.width,p=a.height,f=a.className,y=a.radius,_=i-u/2,x=l-p/2,N={};return Object.entries(a).forEach(function(D){var z=ak(D,2),K=z[0],pe=z[1];Yb(pe)!=="object"&&(N[K]=pe)}),N.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(N.rx=y,N.ry=y),N.x=_,N.y=x,Object(Fe.g)("rect",N)}function qb(a){return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qb(a)}function Rh(){return Rh=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rh.apply(this,arguments)}function JE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function QE(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?JE(Object(l),!0).forEach(function(u){lk(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):JE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lk(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function uk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Kb(a,i){return Kb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Kb(a,i)}function ck(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=dm(a);if(i){var p=dm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fk(this,l)}}function fk(a,i){if(i&&(qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function dm(a){return dm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},dm(a)}_d.defaultProps={className:"",radius:""};var eO,dk=ps(KE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Kb(f,y)})(p,a);var i,l,u=ck(p);function p(){return uk(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,_=f.editConfigModel,x=_.hoverOutline,N=_.nodeSelectedOutline,D=[];return y.forEach(function(z){if(z.isHovered||z.isSelected){var K=z.isHovered,pe=z.isSelected,xe=z.x,ke=z.y,Je=z.width,Qe=z.height;if(N&&pe||x&&K){var yt=z.getOutlineStyle(),$t={};if(Object.keys(yt).forEach(function(dn){dn!=="hover"&&($t[dn]=yt[dn])}),K){var hn=yt.hover;$t=QE(QE({},$t),hn)}D.push(Object(Fe.g)(_d,Rh({transform:z.transform,className:"lf-outline-node",x:xe,y:ke,width:Je+10,height:Qe+10},$t)))}}}),D}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,_=f.editConfigModel,x=_.edgeSelectedOutline,N=_.hoverOutline,D=[],z=0;z<y.length;z++){var K=y[z];(x&&K.isSelected||N&&K.isHovered)&&(K.modelType===Er.LINE_EDGE?D.push(this.getLineOutline(K)):K.modelType===Er.POLYLINE_EDGE?D.push(this.getPolylineOutline(K)):K.modelType===Er.BEZIER_EDGE&&D.push(this.getBezierOutline(K)))}return D}},{key:"getLineOutline",value:function(f){var y=f.startPoint,_=f.endPoint,x=(y.x+_.x)/2,N=(y.y+_.y)/2,D=Math.abs(y.x-_.x)+10,z=Math.abs(y.y-_.y)+10,K=f.getOutlineStyle();return Object(Fe.g)(_d,Rh({className:"lf-outline-edge",x,y:N,width:D,height:z},K))}},{key:"getPolylineOutline",value:function(f){var y=f.points,_=yo(y),x=Vt(_,8),N=x.x,D=x.y,z=x.width,K=x.height,pe=f.getOutlineStyle();return Object(Fe.g)(_d,Rh({className:"lf-outline",x:N,y:D,width:z,height:K},pe))}},{key:"getBezierOutline",value:function(f){var y=f.path,_=zn(y),x=Vt(_,8),N=x.x,D=x.y,z=x.width,K=x.height,pe=f.getOutlineStyle();return Object(Fe.g)(_d,Rh({className:"lf-outline",x:N,y:D,width:z,height:K},pe))}},{key:"render",value:function(){return Object(Fe.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&sk(i.prototype,l),p}(Fe.a))||KE;function Zb(a){return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Zb(a)}function pk(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return tO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return tO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function kh(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.r,y=f===void 0?4:f,_=a.className,x={cx:l,cy:p,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(N){var D=pk(N,2),z=D[0],K=D[1];Zb(K)!=="object"&&(x[z]=K)}),x.className=_?"lf-basic-shape ".concat(_):"lf-basic-shape",Object(Fe.g)("circle",x)}function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function hk(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return nO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Jv(){return Jv=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Jv.apply(this,arguments)}function rO(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function oO(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function iO(a,i,l){return i&&oO(a.prototype,i),l&&oO(a,l),a}function aO(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Qb(a,i)}function Qb(a,i){return Qb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Qb(a,i)}function lO(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hm(a);if(i){var p=hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vk(this,l)}}function vk(a,i){if(i&&(Jb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pm(a)}function pm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function hm(a){return hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hm(a)}function e_(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var uO,sO=function(a){aO(l,a);var i=lO(l);function l(){var u;return rO(this,l),e_(pm(u=i.call(this)),"dragHandler",void 0),e_(pm(u),"onDragging",function(p){var f=p.event,y=u.props,_=y.graphModel,x=y.bezierModel,N=y.type,D=_.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,z=D.x,K=D.y;x.updateAdjustAnchor({x:z,y:K},N),_.eventCenter.emit(Rn.EDGE_ADJUST,{data:x.getData()})}),e_(pm(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new Q({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return iO(l,[{key:"render",value:function(){var u=this,p=this.props.position,f=p.x,y=p.y,_=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Fe.g)(kh,Jv({className:"lf-bezier-adjust-anchor",x:f,y},_,{onMouseDown:function(x){u.dragHandler.handleMouseDown(x)}}))}}]),l}(Fe.a),yk=ps(eO=function(a){aO(l,a);var i=lO(l);function l(){return rO(this,l),i.apply(this,arguments)}return iO(l,[{key:"getBezierAdjust",value:function(u,p){var f=u.path,y=u.id,_=hk(zn(f),4),x=_[0],N=_[1],D=_[2],z=_[3],K=u.getEdgeStyle().adjustLine,pe=[];return pe.push(Object(Fe.g)(Nh,Jv({x1:x.x,y1:x.y,x2:N.x,y2:N.y},K))),pe.push(Object(Fe.g)(sO,{position:N,bezierModel:u,graphModel:p,key:"".concat(y,"_ePre"),type:"sNext"})),pe.push(Object(Fe.g)(Nh,Jv({x1:z.x,y1:z.y,x2:D.x,y2:D.y},K))),pe.push(Object(Fe.g)(sO,{position:D,bezierModel:u,graphModel:p,key:"".concat(y,"_sNext"),type:"ePre"})),pe}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,p=u.edges,f=[],y=0;y<p.length;y++){var _=p[y];_.isSelected&&_.modelType===Er.BEZIER_EDGE&&_.draggable&&f.push(this.getBezierAdjust(_,u))}return f}},{key:"render",value:function(){return Object(Fe.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Fe.a))||eO;function t_(a){return t_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t_(a)}function mk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function n_(a,i){return n_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},n_(a,i)}function bk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=vm(a);if(i){var p=vm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _k(this,l)}}function _k(a,i){if(i&&(t_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function vm(a){return vm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},vm(a)}var cO,wk=ps(uO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&n_(f,y)})(p,a);var i,l,u=bk(p);function p(){return mk(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object(Fe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Fe.g)("g",{transform:f},y))}}])&&gk(i.prototype,l),p}(Fe.a))||uO;function r_(a){return r_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},r_(a)}function o_(){return o_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},o_.apply(this,arguments)}function Ek(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Ok(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function i_(a,i){return i_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},i_(a,i)}function xk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ym(a);if(i){var p=ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Sk(this,l)}}function Sk(a,i){if(i&&(r_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function ym(a){return ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ym(a)}var Ak=ps(cO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&i_(f,y)})(p,a);var i,l,u=xk(p);function p(){return Ek(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getComponent",value:function(f,y){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",x=this.props.getView,N=x(f.type);return Object(Fe.g)(N,{key:f.id,model:f,graphModel:y,overlay:_})}},{key:"render",value:function(){var f=this,y=this.props,_=y.graphModel,x=y.tool,N=y.options,D=y.dnd,z=y.snaplineModel,K={};N.width&&(K.width="".concat(_.width,"px")),N.height&&(K.height="".concat(_.height,"px"));var pe=N.grid,xe=_.fakerNode,ke=_.editConfigModel.adjustEdge;return Object(Fe.g)("div",{className:"lf-graph","flow-id":_.flowId,style:K},Object(Fe.g)(LR,{graphModel:_,dnd:D},Object(Fe.g)("g",{className:"lf-base"},zf(_.sortElements,function(Je){return f.getComponent(Je,_)})),xe?this.getComponent(xe,_):""),Object(Fe.g)(wk,{graphModel:_},Object(Fe.g)(dk,{graphModel:_}),ke?Object(Fe.g)(yk,{graphModel:_}):"",N.snapline!==!1?Object(Fe.g)(ik,{snaplineModel:z}):""),Object(Fe.g)(GR,{graphModel:_,tool:x}),N.background&&Object(Fe.g)(XR,{background:N.background}),N.grid&&Object(Fe.g)(HE,o_({},pe,{graphModel:_})))}}],l&&Ok(i.prototype,l),p}(Fe.a))||cO,Tk=Ak;function fO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?fO(Object(l),!0).forEach(function(u){ff(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):fO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Mk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ff(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Pk=function(){function a(u){var p=this;(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),ff(this,"nodeConfig",void 0),ff(this,"lf",void 0),ff(this,"fakerNode",void 0),ff(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),ff(this,"dragEnter",function(y){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(mm(mm({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),ff(this,"onDragOver",function(y){if(y.preventDefault(),p.fakerNode){var _=p.clientToLocalPoint({x:y.clientX,y:y.clientY}),x=_.x,N=_.y;p.fakerNode.moveTo(x,N);var D=p.fakerNode.getData();p.lf.setNodeSnapLine(D),p.lf.graphModel.eventCenter.emit(Rn.NODE_DND_DRAG,{data:D})}return!1}),ff(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),ff(this,"onDrop",function(y){p.lf.graphModel&&y&&p.nodeConfig&&(p.lf.addNode(mm(mm({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY})),Rn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=u.lf;this.lf=f}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var p=u.x,f=u.y,y=Xu(this.lf.options,["grid","size"]),_=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,x=_.x,N=_.y;return{x:wl(x,y),y:wl(N,y)}}},{key:"startDrag",value:function(u){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&Mk(i.prototype,l),a}();function dO(a){var i=a.container,l=a.grid,u=a.width,p=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=Eu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Eu({},hO,a)}var io,pO,hO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function a_(a){return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},a_(a)}function l_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return vO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return vO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function yO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function gm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?yO(Object(l),!0).forEach(function(u){mO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):yO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Nk(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Rk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function kk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qv(){return Qv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Ck(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Qv.apply(this,arguments)}function Ck(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=wd(a))!==null;);return a}function u_(a,i){return u_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},u_(a,i)}function Dk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=wd(a);if(i){var p=wd(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return jk(this,l)}}function jk(a,i){if(i&&(a_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bm(a)}function bm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function wd(a){return wd=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},wd(a)}function mO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function cs(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var s_=(io=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&u_(f,y)})(p,a);var i,l,u=Dk(p);function p(){var f;Rk(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return mO(bm(f=u.call.apply(u,[this].concat(_))),"modelType",Er.BEZIER_EDGE),Nk(bm(f),"path",pO,bm(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=100,Qv(wd(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return gm(gm({},Qv(wd(p.prototype),"getEdgeStyle",this).call(this)),_o(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(_){var x=_.x,N=_.y;f+=x,y+=N}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=Qv(wd(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return gm(gm({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return cr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=l_(f,4),_=y[0],x=y[1],N=y[2],D=y[3];return"M ".concat(_.x," ").concat(_.y,`
    C `).concat(x.x," ").concat(x.y,`,
    `).concat(N.x," ").concat(N.y,`,
    `).concat(D.x," ").concat(D.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,_=f.ePre;this.updatePath(y,_)}},{key:"updatePath",value:function(f,y){f=_o(f),y=_o(y);var _={x:this.startPoint.x,y:this.startPoint.y},x={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var N=this.getControls();f=N.sNext,y=N.ePre}this.pointsList=[_,f,y,x],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var _=l_(this.pointsList,3),x=_[1],N=_[2];x.x+=f,x.y+=y,this.updatePath(x,N)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var _=l_(this.pointsList,3),x=_[1],N=_[2];N.x+=f,N.y+=y,this.updatePath(x,N)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,_=f.endPoint,x=f.sourceNode,N=f.targetNode,D=cr({start:y,end:_,sourceNode:x,targetNode:N,offset:this.offset}),z=D.sNext,K=D.ePre;this.pointsList=[y,z,K,_],this.initPoints()}}])&&kk(i.prototype,l),p}(as),pO=cs(io.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cs(io.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"initPoints"),io.prototype),cs(io.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updatePoints"),io.prototype),cs(io.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateStartPoint"),io.prototype),cs(io.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateEndPoint"),io.prototype),cs(io.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"moveStartPoint"),io.prototype),cs(io.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"moveEndPoint"),io.prototype),cs(io.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateAdjustAnchor"),io.prototype),cs(io.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"getAdjustStart"),io.prototype),cs(io.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"getAdjustEnd"),io.prototype),cs(io.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateAfterAdjustStartAndEnd"),io.prototype),io),nn,gO,bO,_O,wO,EO,OO,xO,SO,AO,TO,MO,PO,NO,RO,kO,CO,DO,jO,IO,LO,FO,$O,Ik=function(a){return a==null};function Lk(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||BO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c_(a){return c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c_(a)}function BO(a,i){if(a){if(typeof a=="string")return UO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?UO(a,i):void 0}}function UO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function GO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ol(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?GO(Object(l),!0).forEach(function(u){Tl(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):GO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ei(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Fk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Tl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sr(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var df,VO,pf=(nn=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Tl(this,"id",""),Ei(this,"type",gO,this),Ei(this,"x",bO,this),Ei(this,"y",_O,this),Ei(this,"text",wO,this),Ei(this,"properties",EO,this),Ei(this,"_width",OO,this),Ei(this,"_height",xO,this),Ei(this,"anchorsOffset",SO,this),Ei(this,"isSelected",AO,this),Ei(this,"isHovered",TO,this),Ei(this,"isShowAnchor",MO,this),Ei(this,"isDragging",PO,this),Ei(this,"isHitable",NO,this),Ei(this,"draggable",RO,this),Ei(this,"visible",kO,this),Ei(this,"enableRotate",CO,this),Tl(this,"virtual",!1),Tl(this,"graphModel",void 0),Ei(this,"zIndex",DO,this),Ei(this,"state",jO,this),Ei(this,"autoToFront",IO,this),Ei(this,"style",LO,this),Ei(this,"transform",FO,this),Ei(this,"_rotate",$O,this),Tl(this,"BaseType",ao.NODE),Tl(this,"modelType",Er.NODE),Tl(this,"additionStateData",void 0),Tl(this,"targetRules",[]),Tl(this,"sourceRules",[]),Tl(this,"moveRules",[]),Tl(this,"hasSetTargetRules",!1),Tl(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var p=this.x,f=p===void 0?0:p,y=this.y,_=y===void 0?0:y;this.transform=new Zs(-f,-_).rotate(u).translate(f,_).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||el()}this.formatText(u),Pi(this,function(_){return Ka(_,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===bo.INCREASE&&(this.zIndex=u.zIndex||Kl())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,_=this.properties;Object(c.x)(_)&&(_=Object(c.I)(_));var x={id:this.id,type:this.type,x:this.x,y:this.y,properties:_};return this.rotate&&(x.rotate=this.rotate),this.graphModel.overlapMode===bo.INCREASE&&(x.zIndex=this.zIndex),y&&(x.text={x:p,y:f,value:y}),x}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return ol(ol({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return _o(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return _o(u)}},{key:"getAnchorStyle",value:function(u){var p=this.graphModel.theme.anchor;return _o(p)}},{key:"getAnchorLineStyle",value:function(u){var p=this.graphModel.theme.anchorLine;return _o(p)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return _o(u)}},{key:"isAllowConnectedAsSource",value:function(u,p,f,y){var _=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var x,N=!0,D=0;D<_.length;D++){var z=_[D];if(!z.validate.call(this,this,u,p,f,y)){N=!1,x=z.message;break}}return{isAllPass:N,msg:x}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,p,f,y){var _=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var x,N=!0,D=0;D<_.length;D++){var z=_[D];if(!z.validate.call(this,u,this,p,f,y)){N=!1,x=z.message;break}}return{isAllPass:N,msg:x}}},{key:"isAllowMoveNode",value:function(u,p){var f,y=!0,_=!0,x=function(z,K){var pe=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!pe){if(Array.isArray(z)||(pe=BO(z))||K&&z&&typeof z.length=="number"){pe&&(z=pe);var xe=0,ke=function(){};return{s:ke,n:function(){return xe>=z.length?{done:!0}:{done:!1,value:z[xe++]}},e:function($t){throw $t},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Je,Qe=!0,yt=!1;return{s:function(){pe=pe.call(z)},n:function(){var $t=pe.next();return Qe=$t.done,$t},e:function($t){yt=!0,Je=$t},f:function(){try{Qe||pe.return==null||pe.return()}finally{if(yt)throw Je}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(x.s();!(f=x.n()).done;){var N=(0,f.value)(this,u,p);if(!N)return!1;if(c_(N)==="object"){var D=N;if(D.x===!1&&D.y===!1)return!1;y=y&&D.x,_=_&&D.y}}}catch(z){x.e(z)}finally{x.f()}return{x:y,y:_}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,p=this.id,f=this.x,y=this.y;return u&&u.length>0?u.map(function(_,x){return _.length?(_=_,{id:"".concat(p,"_").concat(x),x:f+_[0],y:y+_[1]}):ol(ol({},_=_),{},{x:f+_.x,y:y+_.y,id:_.id||"".concat(p,"_").concat(x)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(p,f){for(var y,_=$i(f),x=Number.MAX_SAFE_INTEGER,N=0;N<_.length;N++){var D=la(p.x,p.y,_[N].x,_[N].y);D<x&&(x=D,y={index:N,anchor:Su(Su({},_[N]),{},{x:_[N].x,y:_[N].y,id:_[N].id})})}return y}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),p=this.x,f=this.y,y=this.rotate;return u.forEach(function(_){var x=_.x,N=_.y,D=Lk(new Ks([x,N,1]).translate(-p,-f).rotate(y).translate(p,f)[0],2),z=D[0],K=D[1];_.x=z,_.y=K}),u}},{key:"getAnchorInfo",value:function(u){if(!Ik(u))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,_=!1;if(f)y=!0,_=!0;else{var x=this.isAllowMoveNode(u,p);typeof x=="boolean"?(y=x,_=x):(y=x.x,_=x.y)}if(y){var N=this.x+u;this.x=N,this.text&&this.moveText(u,0)}if(_){var D=this.y+p;this.y=D,this.text&&this.moveText(0,p)}return y||_}},{key:"getMoveDistance",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,_=!1,x=0,N=0;if(f)y=!0,_=!0;else{var D=this.isAllowMoveNode(u,p);typeof D=="boolean"?(y=D,_=D):(y=D.x,_=D.y)}if(y&&u){var z=this.x+u;this.x=z,this.text&&this.moveText(u,0),x=u}if(_&&p){var K=this.y+p;this.y=K,this.text&&this.moveText(0,p),N=p}return[x,N]}},{key:"moveTo",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=u-this.x,_=p-this.y;return!(!f&&!this.isAllowMoveNode(y,_)||(this.text&&this.text&&this.moveText(y,_),this.x=u,this.y=p,0))}},{key:"moveText",value:function(u,p){var f=this.text,y=f.x,_=f.y,x=f.value,N=f.draggable,D=f.editable;this.text={value:x,editable:D,draggable:N,x:y+u,y:_+p}}},{key:"updateText",value:function(u){this.text=ol(ol({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"setProperty",value:function(u,p){this.properties=ol(ol({},Object(c.I)(this.properties)),{},Tl({},u,Ko(p))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=ol(ol({},Object(c.I)(this.properties)),Ko(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,p){this.style=ol(ol({},this.style),{},Tl({},u,Ko(p)))}},{key:"setStyles",value:function(u){this.style=ol(ol({},this.style),Ko(u))}},{key:"updateStyles",value:function(u){this.style=ol({},Ko(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Pi(this,u)}}],l&&Fk(i.prototype,l),a}(),gO=Sr(nn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),bO=Sr(nn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_O=Sr(nn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wO=Sr(nn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),EO=Sr(nn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),OO=Sr(nn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),xO=Sr(nn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),SO=Sr(nn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),AO=Sr(nn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),TO=Sr(nn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),MO=Sr(nn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),PO=Sr(nn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),NO=Sr(nn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),RO=Sr(nn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kO=Sr(nn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),CO=Sr(nn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),DO=Sr(nn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),jO=Sr(nn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),IO=Sr(nn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),LO=Sr(nn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),FO=Sr(nn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$O=Sr(nn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sr(nn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"incoming"),nn.prototype),Sr(nn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"outgoing"),nn.prototype),Sr(nn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"addNodeMoveRules"),nn.prototype),Sr(nn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"move"),nn.prototype),Sr(nn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"getMoveDistance"),nn.prototype),Sr(nn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveTo"),nn.prototype),Sr(nn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveText"),nn.prototype),Sr(nn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateText"),nn.prototype),Sr(nn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setSelected"),nn.prototype),Sr(nn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHovered"),nn.prototype),Sr(nn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setIsShowAnchor"),nn.prototype),Sr(nn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setEnableRotate"),nn.prototype),Sr(nn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHitable"),nn.prototype),Sr(nn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setElementState"),nn.prototype),Sr(nn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperty"),nn.prototype),Sr(nn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperties"),nn.prototype),Sr(nn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"deleteProperty"),nn.prototype),Sr(nn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyle"),nn.prototype),Sr(nn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyles"),nn.prototype),Sr(nn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateStyles"),nn.prototype),Sr(nn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setZIndex"),nn.prototype),Sr(nn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateAttributes"),nn.prototype),nn);function f_(a){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f_(a)}function WO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function zO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?WO(Object(l),!0).forEach(function(u){HO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):WO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function $k(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Bk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Uk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function d_(){return d_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Gk(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},d_.apply(this,arguments)}function Gk(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ch(a))!==null;);return a}function p_(a,i){return p_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},p_(a,i)}function Vk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ch(a);if(i){var p=Ch(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Wk(this,l)}}function Wk(a,i){if(i&&(f_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _m(a)}function _m(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ch(a){return Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ch(a)}function HO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function h_(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var $a,XO,YO,v_=(df=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&p_(f,y)})(p,a);var i,l,u=Vk(p);function p(){var f;Bk(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return HO(_m(f=u.call.apply(u,[this].concat(_))),"modelType",Er.CIRCLE_NODE),$k(_m(f),"r",VO,_m(f)),f}return i=p,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=d_(Ch(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return zO(zO({},f),_o(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.r;return[{x:f,y:y-_,id:"".concat(this.id,"_0")},{x:f+_,y,id:"".concat(this.id,"_1")},{x:f,y:y+_,id:"".concat(this.id,"_2")},{x:f-_,y,id:"".concat(this.id,"_3")}]}}])&&Uk(i.prototype,l),p}(pf),VO=h_(df.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),h_(df.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(df.prototype,"width"),df.prototype),h_(df.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(df.prototype,"height"),df.prototype),df);r(129);function y_(a){return y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},y_(a)}function m_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function KO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ZO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?KO(Object(l),!0).forEach(function(u){QO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):KO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function JO(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function zk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Hk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function g_(){return g_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Xk(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},g_.apply(this,arguments)}function Xk(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=jh(a))!==null;);return a}function b_(a,i){return b_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},b_(a,i)}function Yk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jh(a);if(i){var p=jh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return qk(this,l)}}function qk(a,i){if(i&&(y_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dh(a)}function Dh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function jh(a){return jh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jh(a)}function QO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ih(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Qs,ex,tx,__=($a=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&b_(f,y)})(p,a);var i,l,u=Yk(p);function p(){var f;zk(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return QO(Dh(f=u.call.apply(u,[this].concat(_))),"modelType",Er.DIAMOND_NODE),JO(Dh(f),"rx",XO,Dh(f)),JO(Dh(f),"ry",YO,Dh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=g_(jh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return ZO(ZO({},f),_o(y))}},{key:"points",get:function(){var f=this.x,y=this.y,_=this.rx,x=this.ry;return[[f,y-x],[f+_,y],[f,y+x],[f-_,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=m_(_,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=m_(_,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,_){var x=m_(y,2);return{x:x[0],y:x[1],id:"".concat(f.id,"_").concat(_)}})}}])&&Hk(i.prototype,l),p}(pf),XO=Ih($a.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),YO=Ih($a.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Ih($a.prototype,"points",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"points"),$a.prototype),Ih($a.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"pointsPosition"),$a.prototype),Ih($a.prototype,"width",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"width"),$a.prototype),Ih($a.prototype,"height",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"height"),$a.prototype),$a);function w_(a){return w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},w_(a)}function nx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function rx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?nx(Object(l),!0).forEach(function(u){ix(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):nx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ox(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Kk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Zk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function E_(){return E_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Jk(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},E_.apply(this,arguments)}function Jk(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Fh(a))!==null;);return a}function O_(a,i){return O_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},O_(a,i)}function Qk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fh(a);if(i){var p=Fh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return eC(this,l)}}function eC(a,i){if(i&&(w_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lh(a)}function Lh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Fh(a){return Fh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fh(a)}function ix(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function wm(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ru,ax,x_=(Qs=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&O_(f,y)})(p,a);var i,l,u=Qk(p);function p(){var f;Kk(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return ix(Lh(f=u.call.apply(u,[this].concat(_))),"modelType",Er.ELLIPSE_NODE),ox(Lh(f),"rx",ex,Lh(f)),ox(Lh(f),"ry",tx,Lh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=E_(Fh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return rx(rx({},f),_o(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.rx,x=this.ry;return[{x:f,y:y-x,id:"".concat(this.id,"_0")},{x:f+_,y,id:"".concat(this.id,"_1")},{x:f,y:y+x,id:"".concat(this.id,"_2")},{x:f-_,y,id:"".concat(this.id,"_3")}]}}])&&Zk(i.prototype,l),p}(pf),ex=wm(Qs.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),tx=wm(Qs.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),wm(Qs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"width"),Qs.prototype),wm(Qs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"height"),Qs.prototype),Qs);function S_(a){return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},S_(a)}function A_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return lx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return lx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ux(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function sx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ux(Object(l),!0).forEach(function(u){cx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ux(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function tC(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function nC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function T_(){return T_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=oC(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},T_.apply(this,arguments)}function oC(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=$h(a))!==null;);return a}function M_(a,i){return M_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},M_(a,i)}function iC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$h(a);if(i){var p=$h(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return aC(this,l)}}function aC(a,i){if(i&&(S_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Em(a)}function Em(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $h(a){return $h=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$h(a)}function cx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Om(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var P_,fx,N_=(Ru=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&M_(f,y)})(p,a);var i,l,u=iC(p);function p(){var f;nC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return cx(Em(f=u.call.apply(u,[this].concat(_))),"modelType",Er.POLYGON_NODE),tC(Em(f),"points",ax,Em(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=T_($h(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return sx(sx({},f),_o(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return this.points.map(function(N){return{x:N[0]+f-_/2,y:N[1]+y-x/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=A_(_,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=A_(_,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,_=this.y,x=this.width,N=this.height;return this.points.map(function(D,z){var K=A_(D,2),pe=K[0],xe=K[1];return{x:y+pe-x/2,y:_+xe-N/2,id:"".concat(f.id,"_").concat(z)}})}}])&&rC(i.prototype,l),p}(pf),ax=Om(Ru.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Om(Ru.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"pointsPosition"),Ru.prototype),Om(Ru.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"width"),Ru.prototype),Om(Ru.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"height"),Ru.prototype),Ru);function R_(a){return R_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},R_(a)}function dx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function px(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?dx(Object(l),!0).forEach(function(u){hx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):dx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lC(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function k_(){return k_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=cC(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},k_.apply(this,arguments)}function cC(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Bh(a))!==null;);return a}function C_(a,i){return C_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},C_(a,i)}function fC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bh(a);if(i){var p=Bh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dC(this,l)}}function dC(a,i){if(i&&(R_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xm(a)}function xm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bh(a){return Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bh(a)}function hx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ed,D_=(P_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&C_(f,y)})(p,a);var i,l,u=fC(p);function p(){var f;uC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return hx(xm(f=u.call.apply(u,[this].concat(_))),"modelType",Er.RECT_NODE),lC(xm(f),"radius",fx,xm(f)),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+_/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-_/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=k_(Bh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return px(px({},f),_o(y))}}])&&sC(i.prototype,l),p}(pf),fx=function(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(P_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P_);function j_(a){return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},j_(a)}function vx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function yx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?vx(Object(l),!0).forEach(function(u){gx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):vx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function pC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function I_(){return I_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=vC(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},I_.apply(this,arguments)}function vC(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Uh(a))!==null;);return a}function L_(a,i){return L_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},L_(a,i)}function yC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uh(a);if(i){var p=Uh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return mC(this,l)}}function mC(a,i){if(i&&(j_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mx(a)}function mx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uh(a){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uh(a)}function gx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function bx(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var F_=(Ed=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&L_(f,y)})(p,a);var i,l,u=yC(p);function p(){var f;pC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return gx(mx(f=u.call.apply(u,[this].concat(_))),"modelType",Er.TEXT_NODE),f}return i=p,(l=[{key:"getTextStyle",value:function(){var f=I_(Uh(p.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return yx(yx({},f),_o(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&hC(i.prototype,l),p}(pf),bx(Ed.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ed.prototype,"width"),Ed.prototype),bx(Ed.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ed.prototype,"height"),Ed.prototype),Ed);function $_(a){return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$_(a)}function gC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function B_(a,i){return B_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},B_(a,i)}function _C(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Sm(a);if(i){var p=Sm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wC(this,l)}}function wC(a,i){if(i&&($_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _x(a)}function _x(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Sm(a){return Sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Sm(a)}function EC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fs,wx,Ex,Ox,U_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&B_(f,y)})(p,a);var i,l,u=_C(p);function p(){var f;gC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return EC(_x(f=u.call.apply(u,[this].concat(_))),"modelType",Er.HTML_NODE),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+_/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-_/2,y,id:"".concat(this.id,"_3")}]}}])&&bC(i.prototype,l),p}(pf);function xx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function G_(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function OC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Sx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ey(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ax=(fs=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Sx(this,"graphModel",void 0),G_(this,"isShowHorizontal",wx,this),G_(this,"isShowVertical",Ex,this),G_(this,"position",Ox,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?xx(Object(f),!0).forEach(function(y){Sx(u,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):xx(Object(f)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,p){for(var f=u.x,y=u.y,_=!1,x=!1,N=0;N<p.length;N++){var D=p[N];if(D.id!==u.id&&(f===D.x&&(_=!0),y===D.y&&(x=!0),_&&x))break}return{isShowVertical:_,isShowHorizontal:x,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(u,p){var f,y,_=!1,x=u.id;if(x){var N=this.graphModel.fakerNode;if(N&&N.id===x)y=Bi(N);else{var D=this.graphModel.getNodeModelById(x);y=Bi(D)}}for(var z=0;z<p.length;z++){var K=p[z];if(K.id!==u.id){var pe=Bi(K);if(pe.minY===y.minY||pe.maxY===y.minY){_=!0,f=y.minY;break}if(pe.minY===y.maxY||pe.maxY===y.maxY){_=!0,f=y.maxY;break}}}return Pi({isShowHorizontal:_,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,p){var f,y,_=!1,x=u.id;if(x){var N=this.graphModel.fakerNode;if(N&&N.id===x)y=Bi(N);else{var D=this.graphModel.getNodeModelById(x);y=Bi(D)}}for(var z=0;z<p.length;z++){var K=p[z];if(K.id!==u.id){var pe=Bi(K);if(pe.minX===y.minX||pe.maxX===y.minX){_=!0,f=y.minX;break}if(pe.minX===y.maxX||pe.maxX===y.maxX){_=!0,f=y.maxX;break}}}return Pi({isShowVertical:_,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,p){var f=this.getCenterSnapLine(u,p),y=f.isShowHorizontal,_=f.isShowVertical;if(!y){var x=this.getHorizontalSnapline(u,p);x.isShowHorizontal&&(f.isShowHorizontal=x.isShowHorizontal,f.position.y=x.position.y)}if(!_){var N=this.getVerticalSnapline(u,p);N.isShowVertical&&(f.isShowVertical=N.isShowVertical,f.position.x=N.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var p=u.isShowHorizontal,f=u.isShowVertical,y=u.position;this.position=y,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var p=this.graphModel.nodes,f=this.getSnapLinePosition(u,p);this.setSnaplineInfo(f)}}],l&&OC(i.prototype,l),a}(),wx=ey(fs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ex=ey(fs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ox=ey(fs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ey(fs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"clearSnapline"),fs.prototype),ey(fs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"setNodeSnapLine"),fs.prototype),fs),ty=new Map,Tx=function(a){var i=el(),l=window.requestAnimationFrame(function u(){if(a(),ty.get(i)){var p=window.requestAnimationFrame(u);ty.set(i,p)}});return ty.set(i,l),i},Am=function(a){var i=ty.get(a);i&&(window.cancelAnimationFrame(i),ty.delete(a))};function V_(a){return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V_(a)}function ny(){return ny=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ny.apply(this,arguments)}function Mx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ry(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Mx(Object(l),!0).forEach(function(u){tc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Mx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Px(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Px(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Px(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function SC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function W_(a,i){return W_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},W_(a,i)}function AC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Tm(a);if(i){var p=Tm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return TC(this,l)}}function TC(a,i){if(i&&(V_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(a)}function ec(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tm(a){return Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tm(a)}function tc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var MC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&W_(f,y)})(p,a);var i,l,u=AC(p);function p(){var f;return function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),tc(ec(f=u.call(this)),"preTargetNode",void 0),tc(ec(f),"sourceRuleResults",void 0),tc(ec(f),"targetRuleResults",void 0),tc(ec(f),"dragHandler",void 0),tc(ec(f),"t",void 0),tc(ec(f),"onDragStart",function(y){var _=y.event,x=f.props,N=x.anchorData,D=x.nodeModel,z=x.graphModel;z.overlapMode,z.selectNodeById(D.id),D.autoToFront&&z.toFront(D.id),z.eventCenter.emit(Rn.ANCHOR_DRAGSTART,{data:N,e:_,nodeModel:D}),f.setState({startX:N.x,startY:N.y,endX:N.x,endY:N.y})}),tc(ec(f),"onDragging",function(y){var _=y.event,x=f.props,N=x.graphModel,D=x.nodeModel,z=x.anchorData,K=N.transformModel,pe=N.eventCenter,xe=N.width,ke=N.height,Je=N.editConfigModel,Qe=Je.autoExpand,yt=Je.stopMoveGraph,$t=_.clientX,hn=_.clientY,dn=N.getPointByClient({x:$t,y:hn}),Hn=dn.domOverlayPosition,sn=Hn.x,jn=Hn.y,_n=dn.canvasOverlayPosition,kr=_n.x,Fr=_n.y;f.t&&Am(f.t);var ur=[];sn<10?ur=[10,0]:sn+10>xe?ur=[-10,0]:jn<10?ur=[0,10]:jn+10>ke&&(ur=[0,-10]),f.setState({endX:kr,endY:Fr,dragging:!0}),f.moveAnchorEnd(kr,Fr),ur.length>0&&!yt&&Qe&&(f.t=Tx(function(){var Hr=xC(ur,2),pi=Hr[0],hi=Hr[1];K.translate(pi,hi);var _a=f.state,nu=_a.endX,ru=_a.endY;f.setState({endX:nu-pi,endY:ru-hi}),f.moveAnchorEnd(nu-pi,ru-hi)})),pe.emit(Rn.ANCHOR_DRAG,{data:z,e:_,nodeModel:D})}),tc(ec(f),"onDragEnd",function(y){var _=y.event;f.t&&Am(f.t);var x=f.checkEnd(_);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var N=f.props,D=N.graphModel,z=N.nodeModel,K=N.anchorData;D.eventCenter.emit(Rn.ANCHOR_DRAGEND,{data:K,e:_,nodeModel:z,edgeModel:x})}),tc(ec(f),"checkEnd",function(y){var _=f.props,x=_.graphModel,N=_.nodeModel,D=_.anchorData,z=D.x,K=D.y,pe=D.id,xe=(x.edgeType,f.state),ke=xe.endX,Je=xe.endY,Qe=xe.dragging,yt=rs({x:ke,y:Je},x);if(f.preTargetNode&&f.preTargetNode.state!==zr.DEFAULT&&f.preTargetNode.setElementState(zr.DEFAULT),Qe&&yt&&yt.node){var $t=yt.node,hn=yt.anchor.id,dn="".concat(N.id,"_").concat($t.id,"_").concat(hn,"_").concat(pe),Hn=f.sourceRuleResults.get(dn)||{},sn=Hn.isAllPass,jn=Hn.msg,_n=f.targetRuleResults.get(dn)||{},kr=_n.isAllPass,Fr=_n.msg;if(sn&&kr){$t.setElementState(zr.DEFAULT);var ur=x.edgeGenerator(N.getData(),x.getNodeModelById(yt.node.id).getData()),Hr=x.addEdge(ry(ry({},ur),{},{sourceNodeId:N.id,sourceAnchorId:pe,startPoint:{x:z,y:K},targetNodeId:yt.node.id,targetAnchorId:yt.anchor.id,endPoint:{x:yt.anchor.x,y:yt.anchor.y}})),pi=f.props.anchorData;return x.eventCenter.emit(Rn.ANCHOR_DROP,{data:pi,e:y,nodeModel:N,edgeModel:Hr}),Hr}var hi=$t.getData();return x.eventCenter.emit(Rn.CONNECTION_NOT_ALLOWED,{data:hi,msg:Fr||jn||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new Q({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return i=p,(l=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,_=f.style,x=f.node.getAnchorShape(y);if(x)return x;var N=y.x,D=y.y,z=ry(ry({},_),_.hover);return Object(Fe.g)("g",null,Object(Fe.g)(kh,ny({className:"lf-node-anchor-hover"},z,{x:N,y:D})),Object(Fe.g)(kh,ny({className:"lf-node-anchor"},_,{x:N,y:D})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,_=y.getAnchorIncomingEdge,x=y.getAnchorOutcomingEdge,N=f.anchorData.id;return{incomingEdgeList:_(N),outcomingEdgeList:x(N)}}},{key:"moveAnchorEnd",value:function(f,y){var _=this.props,x=_.graphModel,N=_.nodeModel,D=_.anchorData,z=rs({x:f,y},x);if(z){var K=z.node,pe=z.anchor.id;if(this.preTargetNode&&this.preTargetNode!==z.node&&this.preTargetNode.setElementState(zr.DEFAULT),D.id===pe)return;this.preTargetNode=K;var xe="".concat(N.id,"_").concat(K.id,"_").concat(pe,"_").concat(D.id);if(!this.targetRuleResults.has(xe)){var ke=z.anchor,Je=N.isAllowConnectedAsSource(K,D,ke),Qe=K.isAllowConnectedAsTarget(N,D,ke);this.sourceRuleResults.set(xe,ql(Je)),this.targetRuleResults.set(xe,ql(Qe))}var yt=this.sourceRuleResults.get(xe).isAllPass,$t=this.targetRuleResults.get(xe).isAllPass;yt&&$t?K.setElementState(zr.ALLOW_CONNECT):K.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,_=f.startY,x=f.endX,N=f.endY;return la(y,_,x,N)>10}},{key:"render",value:function(){var f=this,y=this.state,_=y.startX,x=y.startY,N=y.endX,D=y.endY,z=this.props,K=z.anchorData.edgeAddable,pe=z.edgeStyle;return Object(Fe.g)("g",{className:"lf-anchor"},Object(Fe.g)("g",{onMouseDown:function(xe){K!==!1&&f.dragHandler.handleMouseDown(xe)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(ry({sourcePoint:{x:_,y:x},targetPoint:{x:N,y:D}},pe)):Object(Fe.g)(Nh,ny({x1:_,y1:x,x2:N,y2:D},pe,{"pointer-events":"none"}))))}}])&&SC(i.prototype,l),p}(Fe.a);function Nx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function PC(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Nx(Object(l),!0).forEach(function(u){NC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Nx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function NC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function z_(a){return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z_(a)}function RC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Rx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Rx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function kx(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.value,y=a.fontSize,_=a.fill,x=_===void 0?"currentColor":_,N=a.overflowMode,D=N===void 0?"default":N,z=a.textWidth,K=z===void 0?"":z,pe=a.model,xe={textAnchor:"middle","dominant-baseline":"middle",x:l,y:p,fill:x};if(Object.entries(a).forEach(function(hn){var dn=RC(hn,2),Hn=dn[0],sn=dn[1];z_(sn)!=="object"&&(xe[Hn]=sn)}),f){var ke=String(f).split(/[\r\n]/g),Je=ke.length;if(D!=="default"){var Qe=pe.BaseType,yt=pe.modelType;if(Qe===ao.NODE&&yt!==Er.TEXT_NODE||Qe===ao.EDGE&&K)return function(hn){var dn=hn.value,Hn=hn.fontSize,sn=hn.model,jn=hn.fontFamily,_n=jn===void 0?"":jn,kr=hn.lineHeight,Fr=hn.wrapPadding,ur=Fr===void 0?"0, 0":Fr,Hr=hn.overflowMode,pi=hn.x,hi=hn.y,_a=sn.width,nu=sn.textHeight,ru=hn.textWidth||_a,oc=String(dn).split(/[\r\n]/g),Np=oc.length,Jm=Hs({rows:oc,style:{fontSize:"".concat(Hn,"px"),width:"".concat(ru,"px"),fontFamily:_n,lineHeight:kr,padding:ur},rowsLength:Np,className:"lf-get-text-height"}),Rp=sn.height>Jm?sn.height:Jm;nu&&(Rp=nu);var Sd=Hr==="ellipsis";return Sd&&(Rp=Hn+2),Object(Fe.g)("g",null,Object(Fe.g)("foreignObject",{width:ru,height:Rp,x:pi-ru/2,y:hi-Rp/2},Object(Fe.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Rp,width:ru,padding:ur}},Object(Fe.g)("div",{className:Sd?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Sd?oc.join(""):"",style:PC({},hn)},oc.map(function(Ad){return Object(Fe.g)("div",{className:"lf-node-text--auto-wrap-inner"},Ad)})))))}(a)}if(Je>1){var $t=ke.map(function(hn,dn){var Hn=(dn-(Je-1)/2)*(y+2);return Object(Fe.g)("tspan",{className:"lf-text-tspan",x:l,y:p+Hn},hn)});return Object(Fe.g)("text",xe,$t)}return Object(Fe.g)("text",xe,f)}}function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function X_(){return X_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},X_.apply(this,arguments)}function kC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Cx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Cx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function CC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Y_(a,i){return Y_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y_(a,i)}function DC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Mm(a);if(i){var p=Mm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return jC(this,l)}}function jC(a,i){if(i&&(H_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Od(a)}function Od(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Mm(a){return Mm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Mm(a)}function Ap(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Dx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Y_(f,y)})(p,a);var i,l,u=DC(p);function p(f){var y;(function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")})(this,p),Ap(Od(y=u.call(this)),"dragHandler",void 0),Ap(Od(y),"sumDeltaX",0),Ap(Od(y),"sumDeltaY",0),Ap(Od(y),"stepDrag",void 0),Ap(Od(y),"onDragging",function(x){var N=x.deltaX,D=x.deltaY,z=y.props,K=z.model,pe=kC(z.graphModel.transformModel.fixDeltaXY(N,D),2),xe=pe[0],ke=pe[1];K.moveText(xe,ke)}),Ap(Od(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(zr.TEXT_EDIT)}),Ap(Od(y),"mouseDownHandle",function(x){var N=y.props,D=N.draggable,z=N.model,K=N.graphModel.editConfigModel.nodeTextDraggable;(D||K)&&(y.stepDrag.model=z,y.stepDrag.handleMouseDown(x))}),f.model;var _=f.draggable;return y.stepDrag=new Q({onDragging:y.onDragging,step:1,isStopPropagation:_}),y}return i=p,(l=[{key:"getShape",value:function(){var f=this.props,y=f.model,_=f.graphModel,x=y.text,N=_.editConfigModel,D=x.value,z=x.x,K=x.y,pe=x.editable,xe=x.draggable,ke={x:z,y:K,className:"",value:D};pe?ke.className="lf-element-text":xe||N.nodeTextDraggable?ke.className="lf-text-draggable":ke.className="lf-text-disabled";var Je=y.getTextStyle();return Object(Fe.g)(kx,X_({},ke,Je,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Fe.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&CC(i.prototype,l),p}(Fe.a),IC=Xu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,jx=r(130);function q_(a){return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},q_(a)}function K_(){return K_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},K_.apply(this,arguments)}function LC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z_(a,i){return Z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z_(a,i)}function FC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Pm(a);if(i){var p=Pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return $C(this,l)}}function $C(a,i){if(i&&(q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gh(a)}function Gh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pm(a){return Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Pm(a)}function oy(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var BC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Z_(f,y)})(p,a);var i,l,u=FC(p);function p(f){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),oy(Gh(y=u.call(this,f)),"style",{}),oy(Gh(y),"defaultAngle",void 0),oy(Gh(y),"normal",void 0),oy(Gh(y),"stepperDrag",void 0),oy(Gh(y),"onDragging",function(_){var x,N=_.event,D=y.props,z=D.graphModel,K=D.nodeModel,pe=D.eventCenter,xe=z.selectNodes,ke=K.x,Je=K.y,Qe=N.clientX,yt=N.clientY,$t=z.getPointByClient({x:Qe,y:yt}).canvasOverlayPosition,hn=$t.x,dn=$t.y,Hn=new Z(hn-ke,dn-Je),sn=((x=y.normal)===null||x===void 0?void 0:x.angle(Hn))-y.defaultAngle,jn=new Zs(-ke,-Je).rotate(sn).translate(ke,Je).toString();K.transform=jn,K.rotate=sn;var _n=Object(jx.map)(xe,function(Fr){return Fr.id});_n.indexOf(K.id)===-1&&(_n=[K.id]);var kr=Object(jx.reduce)(_n,function(Fr,ur){var Hr=z.getNodeModelById(ur);return Fr[ur]=Hr==null?void 0:Hr.getMoveDistance(0,0,!1),Fr},{});_n.forEach(function(Fr){z.getNodeEdges(Fr).forEach(function(ur){if(kr[ur.sourceNodeId]){var Hr=z.getNodeModelById(ur.sourceNodeId).anchors.find(function(hi){return hi.id===ur.sourceAnchorId});ur.updateStartPoint(Hr)}if(kr[ur.targetNodeId]){var pi=z.getNodeModelById(ur.targetNodeId).anchors.find(function(hi){return hi.id===ur.targetAnchorId});ur.updateEndPoint(pi)}})}),pe.emit(Rn.NODE_ROTATE,{e:N,nodeModel:K})}),y.style=f.style,y.stepperDrag=new Q({onDragging:y.onDragging}),y}return i=p,(l=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,_=y.x,x=y.y,N=_+y.width/2+20,D=x-y.height/2-20;return this.normal=new Z(1,0),this.defaultAngle=this.normal.angle(new Z(N-_,D-x)),y.defaultAngle=this.defaultAngle,Object(Fe.g)("g",{className:"lf-rotate-control"},Object(Fe.g)("g",{onMouseDown:function(z){f.stepperDrag.handleMouseDown(z)}},Object(Fe.g)(kh,K_({},this.style,{cx:N,cy:D}))))}}])&&LC(i.prototype,l),p}(Fe.a);function J_(a){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J_(a)}var UC=["className"];function Nm(){return Nm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Nm.apply(this,arguments)}function GC(a,i){if(a==null)return{};var l,u,p=function(y,_){if(y==null)return{};var x,N,D={},z=Object.keys(y);for(N=0;N<z.length;N++)x=z[N],_.indexOf(x)>=0||(D[x]=y[x]);return D}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function Rm(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Ix(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Ix(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ix(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Lx(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Q_(a,i){return Q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Q_(a,i)}function VC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=km(a);if(i){var p=km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return WC(this,l)}}function WC(a,i){if(i&&(J_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qi(a)}function qi(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function km(a){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},km(a)}function ca(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var hf=function(a){(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),_&&Q_(y,_)})(f,a);var i,l,u,p=VC(f);function f(y){var _;(function(K,pe){if(!(K instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,f),ca(qi(_=p.call(this)),"t",void 0),ca(qi(_),"moveOffset",void 0),ca(qi(_),"stepDrag",void 0),ca(qi(_),"contextMenuTime",void 0),ca(qi(_),"mouseUpDrag",void 0),ca(qi(_),"startTime",void 0),ca(qi(_),"clickTimer",void 0),ca(qi(_),"modelDisposer",void 0),ca(qi(_),"onDragStart",function(K){var pe=K.event,xe=pe.clientX,ke=pe.clientY,Je=_.props,Qe=Je.model,yt=Je.graphModel.getPointByClient({x:xe,y:ke}).canvasOverlayPosition,$t=yt.x,hn=yt.y;_.moveOffset={x:Qe.x-$t,y:Qe.y-hn}}),ca(qi(_),"onDragging",function(K){var pe=K.event,xe=_.props,ke=xe.model,Je=xe.graphModel,Qe=Je.editConfigModel,yt=Qe.stopMoveGraph,$t=Qe.autoExpand,hn=Je.transformModel,dn=Je.selectNodes,Hn=Je.width,sn=Je.height,jn=Je.gridSize;ke.isDragging=!0;var _n=pe.clientX,kr=pe.clientY,Fr=Je.getPointByClient({x:_n,y:kr}).canvasOverlayPosition,ur=Fr.x,Hr=Fr.y,pi=Rm(hn.CanvasPointToHtmlPoint([ur,Hr]),2),hi=pi[0],_a=pi[1];if(ur+=_.moveOffset.x,Hr+=_.moveOffset.y,ur=wl(ur,jn),Hr=wl(Hr,jn),Hn&&sn){if(!$t||yt||!(hi<0||_a<0||hi>Hn||_a>sn)){var nu=Rm(hn.CanvasPointToHtmlPoint([ur-ke.width/2,Hr-ke.height/2]),2),ru=nu[0],oc=nu[1],Np=Rm(hn.CanvasPointToHtmlPoint([ur+ke.width/2,Hr+ke.height/2]),2),Jm=Np[0],Rp=Np[1],Sd=Math.max(jn,20),Ad=[];ru<0?Ad=[Sd,0]:Jm>Je.width?Ad=[-Sd,0]:oc<0?Ad=[0,Sd]:Rp>Je.height&&(Ad=[0,-Sd]),_.t&&Am(_.t);var Tj=new Zs(-ur,-Hr).rotate(ke.rotate).translate(ur,Hr).toString();ke.transform=Tj;var Qm=dn.map(function(eg){return eg.id});Qm.indexOf(ke.id)===-1&&(Qm=[ke.id]),Ad.length>0&&!yt&&$t?_.t=Tx(function(){var eg=Rm(Ad,2),mS=eg[0],gS=eg[1];hn.translate(mS,gS);var Mj=-mS/hn.SCALE_X,Pj=-gS/hn.SCALE_X;Je.moveNodes(Qm,Mj,Pj)}):Je.moveNodes(Qm,ur-ke.x,Hr-ke.y)}}else Je.moveNode2Coordinate(ke.id,ur,Hr)}),ca(qi(_),"onDragEnd",function(){_.t&&Am(_.t),_.props.model.isDragging=!1}),ca(qi(_),"handleMouseUp",function(){var K=_.props.model;_.mouseUpDrag=K.isDragging}),ca(qi(_),"handleClick",function(K){var pe=_.mouseUpDrag===!1;if(_.startTime){var xe=_.props,ke=xe.model,Je=xe.graphModel;if(pe){var Qe={data:ke.getData(),e:K,position:Je.getPointByClient({x:K.clientX,y:K.clientY}),isSelected:!1,isMultiple:!1},yt=K.button===2,$t=K.detail===2;if(!yt){var hn=Je.editConfigModel,dn=cd(K,hn);Qe.isMultiple=dn,ke.isSelected&&!$t&&dn?(Qe.isSelected=!1,ke.setSelected(!1)):(Je.selectNodeById(ke.id,dn),Qe.isSelected=!0,_.toFront()),$t?(hn.nodeTextEdit&&ke.text.editable&&(ke.setSelected(!1),Je.setElementStateById(ke.id,zr.TEXT_EDIT)),Je.eventCenter.emit(Rn.NODE_DBCLICK,Qe)):(Je.eventCenter.emit(Rn.ELEMENT_CLICK,Qe),Je.eventCenter.emit(Rn.NODE_CLICK,Qe))}}}}),ca(qi(_),"handleContextMenu",function(K){K.preventDefault();var pe=_.props,xe=pe.model,ke=pe.graphModel,Je=xe.getData(),Qe=ke.getPointByClient({x:K.clientX,y:K.clientY});ke.setElementStateById(xe.id,zr.SHOW_MENU,Qe.domOverlayPosition),xe.isSelected||ke.selectNodeById(xe.id),ke.eventCenter.emit(Rn.NODE_CONTEXTMENU,{data:Je,e:K,position:Qe}),_.toFront()}),ca(qi(_),"handleMouseDown",function(K){var pe=_.props,xe=pe.model,ke=pe.graphModel;_.startTime=new Date().getTime(),ke.editConfigModel.adjustNodePosition&&xe.draggable&&_.stepDrag&&_.stepDrag.handleMouseDown(K)}),ca(qi(_),"setHoverON",function(K){var pe=_.props,xe=pe.model,ke=pe.graphModel;if(!xe.isHovered){var Je=xe.getData();xe.setHovered(!0),ke.eventCenter.emit(Rn.NODE_MOUSEENTER,{data:Je,e:K})}}),ca(qi(_),"setHoverOFF",function(K){var pe=_.props,xe=pe.model,ke=pe.graphModel,Je=xe.getData();xe.isHovered&&(xe.setHovered(!1),ke.eventCenter.emit(Rn.NODE_MOUSELEAVE,{data:Je,e:K}))}),ca(qi(_),"onMouseOut",function(K){IC&&_.setHoverOFF(K)});var x=y.graphModel,N=x.gridSize,D=x.eventCenter,z=y.model;return _.stepDrag=new Q({onDragStart:_.onDragStart,onDragging:_.onDragging,onDragEnd:_.onDragEnd,step:N,eventType:"NODE",isStopPropagation:!1,eventCenter:D,model:z}),_.modelDisposer=Object(c.F)(function(){return _.props},function(K){K&&K.model&&_.stepDrag.setModel(K.model)}),_}return i=f,u=[{key:"getModel",value:function(y){return y}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,_=this.props,x=_.model,N=_.graphModel,D=x.isSelected,z=x.isHitable,K=x.isDragging,pe=x.isShowAnchor;return z&&(D||pe)&&!K?zf(x.anchors,function(xe,ke){var Je=x.getAnchorLineStyle(xe),Qe=x.getAnchorStyle(xe);return Object(Fe.g)(MC,{anchorData:xe,node:y,style:Qe,edgeStyle:Je,anchorIndex:ke,nodeModel:x,graphModel:N,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,_=y.model,x=y.graphModel,N=_.isSelected,D=_.isHitable,z=_.enableRotate,K=_.isHovered,pe=_.getRotateControlStyle().style;if(D&&(N||K)&&z)return Object(Fe.g)(BC,{graphModel:x,nodeModel:_,eventCenter:x.eventCenter,style:pe})}},{key:"getText",value:function(){var y=this.props,_=y.model,x=y.graphModel;if(_.state===zr.TEXT_EDIT)return"";if(_.text){var N=x.editConfigModel,D=!1;return(_.text.draggable||N.nodeTextDraggable)&&(D=!0),Object(Fe.g)(Dx,{editable:N.nodeTextEdit&&_.text.editable,model:_,graphModel:x,draggable:D})}}},{key:"getStateClassName",value:function(){var y=this.props.model,_=y.state,x=y.isDragging,N=y.isSelected,D="lf-node";switch(_){case zr.ALLOW_CONNECT:D+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:D+=" lf-node-not-allow";break;default:D+=" lf-node-default"}return x&&(D+=" lf-isDragging"),N&&(D+=" lf-node-selected"),D}},{key:"toFront",value:function(){var y=this.props,_=y.model,x=y.graphModel;_.autoToFront&&x.toFront(_.id)}},{key:"render",value:function(){var y,_=this.props,x=_.model,N=_.graphModel,D=N.editConfigModel,z=D.hideAnchors,K=D.adjustNodePosition,pe=D.allowRotation,xe=N.gridSize,ke=N.transformModel.SCALE_X,Je=x.isHitable,Qe=x.draggable,yt=x.transform,$t=x.getOuterGAttributes(),hn=$t.className,dn=hn===void 0?"":hn,Hn=GC($t,UC),sn=Object(Fe.g)("g",{className:"lf-node-content"},Object(Fe.g)("g",{transform:yt},this.getShape(),this.getText(),pe&&this.getRotateControl()),!z&&this.getAnchors());return Je?(K&&Qe&&this.stepDrag.setStep(xe*ke),y=Object(Fe.g)("g",Nm({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Hn),sn)):y=Object(Fe.g)("g",Nm({className:"".concat(this.getStateClassName()," ").concat(dn)},Hn),sn),y}}])&&Lx(i.prototype,l),u&&Lx(i,u),f}(Fe.a);function e0(a){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e0(a)}function t0(){return t0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},t0.apply(this,arguments)}function zC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function HC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function n0(a,i){return n0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},n0(a,i)}function XC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cm(a);if(i){var p=Cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return YC(this,l)}}function YC(a,i){if(i&&(e0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Cm(a){return Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Cm(a)}var r0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&n0(f,y)})(p,a);var i,l,u=XC(p);function p(){return zC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Fe.g)(_d,t0({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&HC(i.prototype,l),p}(hf);function o0(a){return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o0(a)}function i0(){return i0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},i0.apply(this,arguments)}function qC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function KC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a0(a,i){return a0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a0(a,i)}function ZC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Dm(a);if(i){var p=Dm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return JC(this,l)}}function JC(a,i){if(i&&(o0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Dm(a){return Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Dm(a)}var l0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a0(f,y)})(p,a);var i,l,u=ZC(p);function p(){return qC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.r,N=f.getNodeStyle();return Object(Fe.g)(kh,i0({},N,{x:y,y:_,r:x}))}}])&&KC(i.prototype,l),p}(hf);function u0(a){return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},u0(a)}function QC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Fx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Fx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function $x(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(p){var f=QC(p,2),y=f[0],_=f[1];u0(_)!=="object"&&(u[y]=_)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(p){return p.join(",")}).join(" "),Object(Fe.g)("polygon",u)}function s0(a){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},s0(a)}function c0(){return c0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},c0.apply(this,arguments)}function eD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function tD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function f0(a,i){return f0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},f0(a,i)}function nD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jm(a);if(i){var p=jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return rD(this,l)}}function rD(a,i){if(i&&(s0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function jm(a){return jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jm(a)}var d0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&f0(f,y)})(p,a);var i,l,u=nD(p);function p(){return eD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.width,N=f.height,D=f.points,z=f.getNodeStyle(),K={transform:"matrix(1 0 0 1 ".concat(y-x/2," ").concat(_-N/2,")")};return Object(Fe.g)("g",K,Object(Fe.g)($x,c0({},z,{points:D,x:y,y:_})))}}])&&tD(i.prototype,l),p}(hf);function p0(a){return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},p0(a)}function h0(){return h0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},h0.apply(this,arguments)}function oD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function iD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function v0(a,i){return v0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},v0(a,i)}function aD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Im(a);if(i){var p=Im(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return lD(this,l)}}function lD(a,i){if(i&&(p0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Im(a){return Im=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Im(a)}var y0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&v0(f,y)})(p,a);var i,l,u=aD(p);function p(){return oD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Fe.g)("g",null,Object(Fe.g)($x,h0({},y,{points:f.points,x:f.x,y:f.y})))}}])&&iD(i.prototype,l),p}(hf);function m0(a){return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},m0(a)}function uD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Bx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Bx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sD(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.rx,y=f===void 0?4:f,_=a.ry,x=_===void 0?4:_,N=a.className,D={cx:l,cy:p,rx:y,ry:x,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(z){var K=uD(z,2),pe=K[0],xe=K[1];m0(xe)!=="object"&&(D[pe]=xe)}),D.className=N?"lf-basic-shape ".concat(N):"lf-basic-shape",Object(Fe.g)("ellipse",D)}function g0(a){return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g0(a)}function b0(){return b0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},b0.apply(this,arguments)}function cD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function fD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function _0(a,i){return _0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},_0(a,i)}function dD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Lm(a);if(i){var p=Lm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return pD(this,l)}}function pD(a,i){if(i&&(g0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Lm(a){return Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lm(a)}var w0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&_0(f,y)})(p,a);var i,l,u=dD(p);function p(){return cD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Fe.g)(sD,b0({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&fD(i.prototype,l),p}(hf);function E0(a){return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E0(a)}function Ux(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Gx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Ux(Object(l),!0).forEach(function(u){hD(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Ux(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function hD(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function vD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function yD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function O0(a,i){return O0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},O0(a,i)}function mD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fm(a);if(i){var p=Fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return gD(this,l)}}function gD(a,i){if(i&&(E0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fm(a){return Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fm(a)}var x0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&O0(f,y)})(p,a);var i,l,u=mD(p);function p(){return vD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),_=f.width,x=f.height,N=f.x,D=f.y,z=Gx(Gx({},y.background),{},{x:N,y:D-1,width:_,height:x});return Object(Fe.g)(_d,z)}},{key:"getShape",value:function(){return Object(Fe.g)("g",null,this.getBackground())}}])&&yD(i.prototype,l),p}(hf);function S0(a){return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},S0(a)}function A0(){return A0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},A0.apply(this,arguments)}function bD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _D(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function T0(a,i){return T0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},T0(a,i)}function wD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$m(a);if(i){var p=$m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ED(this,l)}}function ED(a,i){if(i&&(S0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iy(a)}function iy(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $m(a){return $m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$m(a)}function Bm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var M0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&T0(f,y)})(p,a);var i,l,u=wD(p);function p(){var f;bD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Bm(iy(f=u.call.apply(u,[this].concat(_))),"ref",void 0),Bm(iy(f),"currentProperties",void 0),Bm(iy(f),"preProperties",void 0),Bm(iy(f),"setRef",function(N){f.ref=N}),f}return i=p,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.height,N=f.width,D=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Fe.g)("foreignObject",A0({},D,{x:y-N/2,y:_-x/2,width:N,height:x,ref:this.setRef}))}}])&&_D(i.prototype,l),p}(hf);function P0(a){return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},P0(a)}function N0(){return N0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},N0.apply(this,arguments)}function Vx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Tp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Vx(Object(l),!0).forEach(function(u){C0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Vx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function OD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function R0(a,i){return R0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R0(a,i)}function xD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Um(a);if(i){var p=Um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SD(this,l)}}function SD(a,i){if(i&&(P0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k0(a)}function k0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function C0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var AD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&R0(f,y)})(p,a);var i,l,u=xD(p);function p(f){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),C0(k0(y=u.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),C0(k0(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),_=f.text,x=f.width,N=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(N=Tp(Tp({},N),y.hover.background)),_&&_.value&&N.fill!=="transparent"){var D,z=y.fontSize,K=y.overflowMode,pe=y.lineHeight,xe=y.wrapPadding,ke=y.textWidth,Je=_.value,Qe=_.x,yt=_.y,$t=String(Je).split(/[\r\n]/g),hn=$t.length;if(K==="autoWrap"&&ke){var dn=Hs({rows:$t,style:{fontSize:"".concat(z,"px"),width:"".concat(ke,"px"),lineHeight:pe,padding:xe},rowsLength:hn,className:"lf-get-text-height"});D=Tp(Tp({},N),{},{x:Qe-1,y:yt-1,width:ke,height:dn})}else{$t&&$t.forEach(function(kr){Zn(kr)});var Hn=is({rows:$t,fontSize:z,rowsLength:hn}),sn=Hn.width,jn=Hn.height;if(K==="ellipsis"&&(sn=ke||x,jn=z+2),typeof N.wrapPadding=="string"){var _n=N.wrapPadding.split(",").filter(function(kr){return kr.trim()}).map(function(kr){return parseFloat(kr.trim())});_n.length>0&&_n.length<=4&&(_n.length===1?_n=[_n[0],_n[0],_n[0],_n[0]]:_n.length===2?_n=[_n[0],_n[1],_n[0],_n[1]]:_n.length===3&&(_n=[_n[0],_n[1],_n[2],_n[1]]),sn+=_n[1]+_n[3],jn+=_n[0]+_n[2],Qe+=(_n[1]-_n[3])/2,yt+=(_n[2]-_n[0])/2)}D=Tp(Tp({},N),{},{x:Qe-1,y:yt-1,width:sn,height:jn})}return Object(Fe.g)(_d,D)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,_=y.value,x=y.x,N=y.y;if(_){var D=Tp({x,y:N,className:"lf-element-text",value:_},f.getTextStyle());return Object(Fe.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Fe.g)(kx,N0({},D,{model:f})))}}}])&&OD(i.prototype,l),p}(Dx);function D0(a){return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},D0(a)}var nc,TD=["text","sourceAnchorId","targetAnchorId"];function Wx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function vf(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Wx(Object(l),!0).forEach(function(u){tu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Wx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function MD(a,i){if(a==null)return{};var l,u,p=function(y,_){if(y==null)return{};var x,N,D={},z=Object.keys(y);for(N=0;N<z.length;N++)x=z[N],_.indexOf(x)>=0||(D[x]=y[x]);return D}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function PD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return zx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ND(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function j0(a,i){return j0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},j0(a,i)}function RD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gm(a);if(i){var p=Gm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return kD(this,l)}}function kD(a,i){if(i&&(D0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eu(a)}function eu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gm(a){return Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gm(a)}function tu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(nc||(nc={}));var Hx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&j0(f,y)})(p,a);var i,l,u=RD(p);function p(f){var y;(function(D,z){if(!(D instanceof z))throw new TypeError("Cannot call a class as a function")})(this,p),tu(eu(y=u.call(this)),"stepDragData",void 0),tu(eu(y),"stepDrag",void 0),tu(eu(y),"oldEdge",void 0),tu(eu(y),"preTargetNode",void 0),tu(eu(y),"targetRuleResults",void 0),tu(eu(y),"sourceRuleResults",void 0),tu(eu(y),"handleMouseDown",function(D){y.stepDrag&&y.stepDrag.handleMouseDown(D)}),tu(eu(y),"onDragStart",function(){var D=y.props,z=D.x,K=D.y,pe=D.edgeModel,xe=pe.startPoint,ke=pe.endPoint,Je=pe.pointsList;y.oldEdge={startPoint:xe,endPoint:ke,pointsList:Je},y.setState({endX:z,endY:K,dragging:!0})}),tu(eu(y),"onDragging",function(D){var z=D.deltaX,K=D.deltaY,pe=y.state,xe=pe.endX,ke=pe.endY,Je=y.props,Qe=Je.graphModel,yt=Je.type,$t=Qe.transformModel,hn=Qe.editConfigModel,dn=PD($t.moveCanvasPointByHtml([xe,ke],z,K),2),Hn=dn[0],sn=dn[1];y.setState({endX:Hn,endY:sn,dragging:!0});var jn=y.props.edgeModel,_n=rs({x:xe,y:ke},Qe);if(_n&&_n.node&&y.isAllowAdjust(_n).pass){var kr,Fr=jn.startPoint,ur=jn.endPoint,Hr=jn.sourceNode,pi=jn.targetNode;yt===nc.SOURCE?kr={startPoint:{x:_n.anchor.x,y:_n.anchor.y},endPoint:{x:ur.x,y:ur.y},sourceNode:_n.node,targetNode:pi}:yt===nc.TARGET&&(kr={startPoint:{x:Fr.x,y:Fr.y},endPoint:{x:_n.anchor.x,y:_n.anchor.y},sourceNode:Hr,targetNode:_n.node}),jn.updateAfterAdjustStartAndEnd(kr)}else yt===nc.SOURCE?jn.updateStartPoint({x:Hn,y:sn}):yt===nc.TARGET&&jn.updateEndPoint({x:Hn,y:sn});jn.text.value&&hn.adjustEdge&&jn.setText(Object.assign({},jn.text,jn.textPosition))}),tu(eu(y),"onDragEnd",function(D){var z=D.event;try{var K;y.setState({dragging:!1});var pe=y.props,xe=pe.graphModel,ke=pe.edgeModel,Je=pe.type,Qe=y.state,yt=Qe.endX,$t=Qe.endY,hn=Qe.dragging,dn=rs({x:yt,y:$t},xe);if(!hn)return;var Hn,sn=!1;if(dn&&dn.node){var jn=y.isAllowAdjust(dn),_n=jn.pass,kr=jn.msg,Fr=jn.newTargetNode;if(_n){var ur=ke.getData(),Hr=ur.text,pi=ur.sourceAnchorId,hi=pi===void 0?"":pi,_a=ur.targetAnchorId;Hn=vf(vf({sourceAnchorId:hi,targetAnchorId:_a===void 0?"":_a},MD(ur,TD)),{},{text:(Hr==null?void 0:Hr.value)||""}),Je===nc.SOURCE?(Hn=vf(vf({},xe.edgeGenerator(xe.getNodeModelById(dn.node.id).getData(),xe.getNodeModelById(ke.targetNodeId).getData(),Hn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:ke.targetNodeId,endPoint:vf({},ke.endPoint)}),ke.sourceNodeId===dn.node.id&&ke.sourceAnchorId===dn.anchor.id&&(sn=!0)):Je===nc.TARGET&&(Hn=vf(vf({},xe.edgeGenerator(xe.getNodeModelById(ke.sourceNodeId).getData(),xe.getNodeModelById(dn.node.id).getData(),Hn)),{},{sourceNodeId:ke.sourceNodeId,startPoint:vf({},ke.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),ke.targetNodeId===dn.node.id&&ke.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var nu=Fr.getData();xe.eventCenter.emit(Rn.CONNECTION_NOT_ALLOWED,{data:nu,msg:kr})}}else sn=!0;if(sn)y.recoveryEdge();else{var ru=ke.getData();xe.deleteEdgeById(ke.id);var oc=xe.addEdge(vf({},Hn));xe.eventCenter.emit(Rn.EDGE_EXCHANGE_NODE,{data:{newEdge:oc.getData(),oldEdge:ru}})}(K=y.preTargetNode)===null||K===void 0||K.setElementState(zr.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(Rn.ADJUST_POINT_DRAGEND,{e:z,data:y.stepDragData})}}),tu(eu(y),"recoveryEdge",function(){var D=y.props.edgeModel,z=y.oldEdge,K=z.startPoint,pe=z.endPoint,xe=z.pointsList;D.updateStartPoint(K),D.updateEndPoint(pe),D.modelType!==Er.LINE_EDGE&&(D.pointsList=xe,D.initPoints())}),tu(eu(y),"getAdjustPointStyle",function(){var D=y.props,z=D.graphModel.theme;return D.edgeModel,z.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var _=f.type,x=f.edgeModel,N=f.graphModel.eventCenter;return y.stepDragData={type:_,edgeData:x.getData()},y.stepDrag=new Q({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:N,data:y.stepDragData}),y}return i=p,(l=[{key:"isAllowAdjust",value:function(f){var y=this.props,_=y.edgeModel,x=_.id,N=_.sourceNode,D=_.targetNode,z=_.sourceAnchorId,K=_.targetAnchorId,pe=y.type,xe=null,ke=null,Je=null,Qe=null;if(pe===nc.SOURCE?(xe=f.node,ke=D,Je=f.anchor,Qe=D.getAnchorInfo(K)):(xe=N,ke=f.node,Qe=f.anchor,Je=N.getAnchorInfo(z)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=f.node,Qe.id===Je.id)return{pass:!1,msg:"",newTargetNode:ke};var yt="".concat(xe.id,"_").concat(ke.id,"_").concat(Je.id,"_").concat(Qe.id);if(!this.targetRuleResults.has(yt)){var $t=xe.isAllowConnectedAsSource(ke,Je,Qe,x),hn=ke.isAllowConnectedAsTarget(xe,Je,Qe,x);this.sourceRuleResults.set(yt,ql($t)),this.targetRuleResults.set(yt,ql(hn))}var dn=this.sourceRuleResults.get(yt),Hn=dn.isAllPass,sn=dn.msg,jn=this.targetRuleResults.get(yt),_n=jn.isAllPass,kr=jn.msg,Fr=Hn&&_n?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return pe===nc.SOURCE?xe.setElementState(Fr):ke.setElementState(Fr),{pass:Hn&&_n,msg:kr||sn,newTargetNode:ke}}},{key:"render",value:function(){var f=this.props,y=f.x,_=f.y,x=f.getAdjustPointShape,N=f.edgeModel,D=this.state.dragging;return Object(Fe.g)("g",{pointerEvents:D?"none":"",onMouseDown:this.handleMouseDown},D?"":x(y,_,N))}}])&&ND(i.prototype,l),p}(Fe.a);function I0(a){return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},I0(a)}function ay(){return ay=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ay.apply(this,arguments)}function CD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Xx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Xx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function DD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function L0(a,i){return L0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},L0(a,i)}function ID(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vm(a);if(i){var p=Vm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return LD(this,l)}}function LD(a,i){if(i&&(I0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(a)}function ds(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vm(a){return Vm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vm(a)}function rc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ly=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&L0(f,y)})(p,a);var i,l,u=ID(p);function p(){var f;DD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return rc(ds(f=u.call.apply(u,[this].concat(_))),"startTime",void 0),rc(ds(f),"contextMenuTime",void 0),rc(ds(f),"clickTimer",void 0),rc(ds(f),"textRef",Object(Fe.f)()),rc(ds(f),"handleHover",function(N,D){var z=f.props,K=z.model,pe=z.graphModel.eventCenter;K.setHovered(N);var xe=N?Rn.EDGE_MOUSEENTER:Rn.EDGE_MOUSELEAVE,ke=K.getData();pe.emit(xe,{data:ke,e:D})}),rc(ds(f),"setHoverON",function(N){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,N))}),rc(ds(f),"setHoverOFF",function(N){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,N))}),rc(ds(f),"handleContextMenu",function(N){N.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var D=f.props,z=D.model,K=D.graphModel,pe=K.getPointByClient({x:N.clientX,y:N.clientY});K.setElementStateById(z.id,zr.SHOW_MENU,pe.domOverlayPosition),f.toFront(),z.isSelected||K.selectEdgeById(z.id);var xe=z==null?void 0:z.getData();K.eventCenter.emit(Rn.EDGE_CONTEXTMENU,{data:xe,e:N,position:pe})}),rc(ds(f),"handleMouseDown",function(N){N.stopPropagation(),f.startTime=new Date().getTime()}),rc(ds(f),"handleMouseUp",function(N){if(f.startTime&&!(new Date().getTime()-f.startTime>200||N.button===2)){var D=N.detail===2,z=f.props,K=z.model,pe=z.graphModel,xe=K==null?void 0:K.getData(),ke=pe.getPointByClient({x:N.clientX,y:N.clientY});if(D){var Je=pe.editConfigModel,Qe=pe.textEditElement;if(Qe&&Qe.id===K.id&&pe.setElementStateById(K.id,zr.DEFAULT),Je.edgeTextEdit&&K.text.editable&&pe.setElementStateById(K.id,zr.TEXT_EDIT),K.modelType===Er.POLYLINE_EDGE){var yt=K,$t=pe.getPointByClient({x:N.x,y:N.y}).canvasOverlayPosition,hn=$t.x,dn=$t.y,Hn=Jl({x:hn,y:dn},yt.points);yt.dbClickPosition=Hn}pe.eventCenter.emit(Rn.EDGE_DBCLICK,{data:xe,e:N,position:ke})}else pe.eventCenter.emit(Rn.ELEMENT_CLICK,{data:xe,e:N,position:ke}),pe.eventCenter.emit(Rn.EDGE_CLICK,{data:xe,e:N,position:ke});var sn=pe.editConfigModel;pe.selectEdgeById(K.id,cd(N,sn)),f.toFront()}}),f}return i=p,(l=[{key:"getShape",value:function(){return Object(Fe.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,_=f.graphModel;if(y.state===zr.TEXT_EDIT)return null;var x=!1,N=_.editConfigModel;return(y.text.draggable||N.edgeTextDraggable)&&(x=!0),Object(Fe.g)(AD,{ref:this.textRef,editable:N.edgeTextEdit&&y.text.editable,model:y,graphModel:_,draggable:x})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=f.isSelected;return{start:y,end:_,hover:this.state.hover,isSelected:x}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,_=f.getArrowStyle(),x=_.refY,N=x===void 0?0:x,D=_.refX,z=D===void 0?2:D,K=CD(this.getLastTwoPoints(),2),pe=K[0],xe=K[1],ke="auto";return pe!==null&&xe!==null&&(ke=Ze(dt({x:xe.x-pe.x,y:xe.y-pe.y,z:0}))),Object(Fe.g)("g",null,Object(Fe.g)("defs",null,Object(Fe.g)("marker",{id:"marker-start-".concat(y),refX:-z,refY:N,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Fe.g)("marker",{id:"marker-end-".concat(y),refX:z,refY:N,overflow:"visible",orient:ke,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Fe.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,_=f.strokeWidth,x=f.offset,N=f.verticalLength;return Object(Fe.g)("path",{stroke:y,fill:y,strokeWidth:_,transform:"rotate(180)",d:"M 0 0 L ".concat(x," -").concat(N," L ").concat(x," ").concat(N," Z")})}},{key:"getAdjustPointShape",value:function(f,y,_){var x=_.getAdjustPointStyle();return Object(Fe.g)(kh,ay({className:"lf-edge-adjust-point"},x,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,_=f.graphModel,x=y.getAdjustStart(),N=y.getAdjustEnd();return Object(Fe.g)("g",null,Object(Fe.g)(Hx,ay({type:"SOURCE"},x,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:_})),Object(Fe.g)(Hx,ay({type:"TARGET"},N,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:_})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Fe.g)("g",null)}},{key:"getAppend",value:function(){return Object(Fe.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,_=f.model;y.toFront(_.id)}},{key:"render",value:function(){var f=this.props,y=f.model,_=y.isSelected,x=y.isHitable,N=y.isShowAdjustPoint;return f.graphModel.animation,Object(Fe.g)("g",null,Object(Fe.g)("g",{className:["lf-edge",!x&&"pointer-none",_&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),N&&_?this.getAdjustPoints():"")}}])&&jD(i.prototype,l),p}(Fe.a);function F0(a){return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},F0(a)}function FD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Yx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Yx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var uy=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=FD(l,2),p=u[0],f=u[1],y=F0(f);p!=="style"&&y==="object"||(i[p]=f)}),Object(Fe.g)("path",i)};function $0(a){return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$0(a)}function B0(){return B0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},B0.apply(this,arguments)}function $D(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function BD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function U0(a,i){return U0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},U0(a,i)}function UD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wm(a);if(i){var p=Wm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return GD(this,l)}}function GD(a,i){if(i&&($0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Wm(a){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wm(a)}var G0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&U0(f,y)})(p,a);var i,l,u=UD(p);function p(){return $D(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=f.isAnimation,N=f.arrowConfig,D=f.getEdgeStyle(),z=f.getEdgeAnimationStyle(),K=z.strokeDasharray,pe=z.stroke,xe=z.strokeDashoffset,ke=z.animationName,Je=z.animationDuration,Qe=z.animationIterationCount,yt=z.animationTimingFunction,$t=z.animationDirection;return Object(Fe.g)(Nh,B0({},D,{x1:y.x,y1:y.y,x2:_.x,y2:_.y},N,x?{strokeDasharray:K,stroke:pe,style:{strokeDashoffset:xe,animationName:ke,animationDuration:Je,animationIterationCount:Qe,animationTimingFunction:yt,animationDirection:$t}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=kn({start:y,end:_}),N=x.d,D=x.strokeWidth,z=x.fill,K=x.strokeDasharray,pe=x.stroke;return Object(Fe.g)(uy,{d:N,fill:z,strokeWidth:D,stroke:pe,strokeDasharray:K})}}])&&BD(i.prototype,l),p}(ly);function V0(a){return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V0(a)}function VD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var WD=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=VD(l,2),p=u[0],f=u[1];(p==="style"||V0(f)!=="object")&&(i[p]=f)}),Object(Fe.g)("polyline",i)};function W0(a){return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W0(a)}function Kx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function zm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Kx(Object(l),!0).forEach(function(u){mf(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Kx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function z0(){return z0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},z0.apply(this,arguments)}function zD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Zx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function HD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function H0(a,i){return H0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},H0(a,i)}function XD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hm(a);if(i){var p=Hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return YD(this,l)}}function YD(a,i){if(i&&(W0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yf(a)}function yf(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Hm(a){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hm(a)}function mf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var X0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&H0(f,y)})(p,a);var i,l,u=XD(p);function p(){var f;return function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),mf(yf(f=u.call(this)),"drag",void 0),mf(yf(f),"isDragging",void 0),mf(yf(f),"isShowAdjustPointTemp",void 0),mf(yf(f),"appendInfo",void 0),mf(yf(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),mf(yf(f),"onDragging",function(y){var _=y.deltaX,x=y.deltaY,N=f.props,D=N.model,z=N.graphModel;f.isDragging=!0;var K=z.transformModel,pe=z.editConfigModel,xe=zD(K.fixDeltaXY(_,x),2),ke=xe[0],Je=xe[1],Qe=D,yt=pe.adjustEdgeMiddle;f.appendInfo=yt?Qe.dragAppendSimple(f.appendInfo,{x:ke,y:Je}):Qe.dragAppend(f.appendInfo,{x:ke,y:Je})}),mf(yf(f),"onDragEnd",function(){var y=f.props,_=y.model,x=y.graphModel.eventCenter,N=_;N.dragAppendEnd(),f.isDragging=!1,N.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,x.emit(Rn.EDGE_ADJUST,{data:N.getData()})}),mf(yf(f),"beforeDragStart",function(y,_){_.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=_}),f.drag=new Q({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,_=f.isAnimation,x=f.arrowConfig,N=f.getEdgeStyle(),D=f.getEdgeAnimationStyle(),z=D.strokeDasharray,K=D.stroke,pe=D.strokeDashoffset,xe=D.animationName,ke=D.animationDuration,Je=D.animationIterationCount,Qe=D.animationTimingFunction,yt=D.animationDirection;return Object(Fe.g)(WD,z0({points:y},N,x,_?{strokeDasharray:z,stroke:K,style:{strokeDashoffset:pe,animationName:xe,animationDuration:ke,animationIterationCount:Je,animationTimingFunction:Qe,animationDirection:yt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,_=f.isSelected,x={start:null,end:null,hover:this.state.hover,isSelected:_},N=yo(y);return N.length>=2&&(x.start=N[N.length-2],x.end=N[N.length-1]),x}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=yo(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,_=f.start,x=f.end;if(_.x===x.x&&_.y===x.y)y="";else{var N={start:_,end:x,offset:10,verticalLength:5},D=I(zm(zm({},N),{},{type:"start"})),z=I(zm(zm({},N),{},{type:"end"}));y="M".concat(D.leftX," ").concat(D.leftY,` 
      L`).concat(D.rightX," ").concat(D.rightY,` 
      L`).concat(z.rightX," ").concat(z.rightY,`
      L`).concat(z.leftX," ").concat(z.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),_=y.d,x=y.strokeWidth,N=y.fill,D=y.strokeDasharray,z=y.stroke;return Object(Fe.g)(uy,{d:_,fill:N,strokeWidth:x,stroke:z,strokeDasharray:D})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,_=y.model,x=y.graphModel,N=_.pointsList,D=_.draggable,z=[],K=N.length,pe=function(ke){var Je="lf-polyline-append",Qe={start:{x:N[ke].x,y:N[ke].y},end:{x:N[ke+1].x,y:N[ke+1].y},startIndex:ke,endIndex:ke+1,direction:"",dragAble:!0},yt=Object(Fe.g)("g",{className:Je},f.getAppendShape(Qe)),$t=x.editConfigModel,hn=$t.adjustEdge,dn=$t.adjustEdgeMiddle;if(hn&&D){var Hn=Qe.startIndex,sn=Qe.endIndex,jn=dn&&(Hn===0||sn===K-1);Qe.dragAble=!jn,Qe.start.x===Qe.end.x?(Qe.dragAble&&(Je+="-ew-resize"),Qe.direction=lo.VERTICAL):Qe.start.y===Qe.end.y&&(Qe.dragAble&&(Je+="-ns-resize"),Qe.direction=lo.HORIZONTAL),yt=Object(Fe.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(_n){return f.beforeDragStart(_n,Qe)}},Object(Fe.g)("g",{className:Je},f.getAppendShape(Qe)))}z.push(yt)},xe=0;xe<K-1;xe++)pe(xe);return Object(Fe.g)("g",null,z)}}])&&HD(i.prototype,l),p}(ly);function Y0(a){return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Y0(a)}function qD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Jx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function q0(){return q0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},q0.apply(this,arguments)}function KD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function K0(a,i){return K0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},K0(a,i)}function JD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Xm(a);if(i){var p=Xm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return QD(this,l)}}function QD(a,i){if(i&&(Y0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Xm(a){return Xm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Xm(a)}var Z0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&K0(f,y)})(p,a);var i,l,u=JD(p);function p(){return KD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),_=f.path,x=f.isAnimation,N=f.arrowConfig,D=f.getEdgeAnimationStyle(),z=D.strokeDasharray,K=D.stroke,pe=D.strokeDashoffset,xe=D.animationName,ke=D.animationDuration,Je=D.animationIterationCount,Qe=D.animationTimingFunction,yt=D.animationDirection;return Object(Fe.g)(uy,q0({d:_},y,N,x?{strokeDasharray:z,stroke:K,style:{strokeDashoffset:pe,animationName:xe,animationDuration:ke,animationIterationCount:Je,animationTimingFunction:Qe,animationDirection:yt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Fe.g)(uy,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,_=f.isSelected,x=f.getArrowStyle().offset,N=f.pointsList.map(function(z){return{x:z.x,y:z.y}}),D=qD(Fa(N,x),2);return{start:D[0],end:D[1],hover:y,isSelected:_}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,_=f.pointsList.map(function(x){return{x:x.x,y:x.y}});return Fa(_,y)}}])&&ZD(i.prototype,l),p}(ly);function J0(a){return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J0(a)}function Qx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ej(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function tj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Q0(a,i){return Q0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Q0(a,i)}function rj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ym(a);if(i){var p=Ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oj(this,l)}}function oj(a,i){if(i&&(J0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Ym(a){return Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ym(a)}var ij=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Q0(f,y)})(p,a);var i,l,u=rj(p);function p(){return tj(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,_=f.style,x=y.start,N=y.end,D={start:x,end:N,offset:_.offset,verticalLength:_.verticalLength,type:"end"},z=I(D),K=z.leftX,pe=z.leftY,xe=z.rightX,ke=z.rightY;return function(Je){for(var Qe=1;Qe<arguments.length;Qe++){var yt=arguments[Qe]!=null?arguments[Qe]:{};Qe%2?Qx(Object(yt),!0).forEach(function($t){ej(Je,$t,yt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Je,Object.getOwnPropertyDescriptors(yt)):Qx(Object(yt)).forEach(function($t){Object.defineProperty(Je,$t,Object.getOwnPropertyDescriptor(yt,$t))})}return Je}({d:"M".concat(K," ").concat(pe," L").concat(N.x," ").concat(N.y," L").concat(xe," ").concat(ke," z")},_)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,_=f.strokeWidth,x=f.stroke,N=f.fill;return Object(Fe.g)(uy,{d:y,fill:N,strokeWidth:_,stroke:x})}},{key:"render",value:function(){return Object(Fe.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&nj(i.prototype,l),p}(Fe.a),eS=function(a,i){return vt(a,i)},aj=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},e1=function(){return Nn.a.Date.now()},lj=Math.max,uj=Math.min,sj=function(a,i,l){var u,p,f,y,_,x,N=0,D=!1,z=!1,K=!0;if(typeof a!="function")throw new TypeError("Expected a function");function pe($t){var hn=u,dn=p;return u=p=void 0,N=$t,y=a.apply(dn,hn)}function xe($t){return N=$t,_=setTimeout(Je,i),D?pe($t):y}function ke($t){var hn=$t-x;return x===void 0||hn>=i||hn<0||z&&$t-N>=f}function Je(){var $t=e1();if(ke($t))return Qe($t);_=setTimeout(Je,function(hn){var dn=i-(hn-x);return z?uj(dn,f-(hn-N)):dn}($t))}function Qe($t){return _=void 0,K&&u?pe($t):(u=p=void 0,y)}function yt(){var $t=e1(),hn=ke($t);if(u=arguments,p=this,x=$t,hn){if(_===void 0)return xe(x);if(z)return clearTimeout(_),_=setTimeout(Je,i),pe(x)}return _===void 0&&(_=setTimeout(Je,i)),y}return i=Xl(i)||0,Rr(l)&&(D=!!l.leading,f=(z="maxWait"in l)?lj(Xl(l.maxWait)||0,i):f,K="trailing"in l?!!l.trailing:K),yt.cancel=function(){_!==void 0&&clearTimeout(_),N=0,u=x=p=_=void 0},yt.flush=function(){return _===void 0?y:Qe(e1())},yt},cj=r(172);function fj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function xd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var tS,nS,rS,dj=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),xd(this,"undos",[]),xd(this,"redos",[]),xd(this,"callbacks",[]),xd(this,"stopWatch",null),xd(this,"curData",null),xd(this,"maxSize",50),xd(this,"waitTime",100),xd(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){eS(aj(this.undos),u)||(this.undos.push(u),eS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Rn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var p=this.undos.pop();return this.curData=_o(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=_o(u),u}}},{key:"watch",value:function(u){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(cj.a)(u,sj(function(){var f=u.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&fj(i.prototype,l),a}();function t1(a){return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t1(a)}function pj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return oS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return oS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function iS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Mp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?iS(Object(l),!0).forEach(function(u){Pp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):iS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function aS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function n1(a,i){return n1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},n1(a,i)}function hj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qm(a);if(i){var p=qm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vj(this,l)}}function vj(a,i){if(i&&(t1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vh(a)}function Vh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qm(a){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qm(a)}function Pp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var lS,uS,sS,r1=ps((rS=nS=function(a){(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),_&&n1(y,_)})(f,a);var i,l,u,p=hj(f);function f(){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,f),Pp(Vh(y=p.call(this)),"ref",Object(Fe.f)()),Pp(Vh(y),"__prevText",{type:"",text:"",id:""}),Pp(Vh(y),"keyupHandler",function(_){var x=y.props.graphModel.textEditElement;_.key==="Enter"&&_.altKey&&x.setElementState(0)}),Pp(Vh(y),"inputHandler",function(_){var x=_.target.innerText,N=y.props.graphModel.textEditElement;y.__prevText={type:N.type,text:x.replace(/(\r\n)+$|(\n)+$/,""),id:N.id}}),Pp(Vh(y),"keydownHandler",function(_){_.stopPropagation()}),y.state={style:{left:0,top:0}},y}return i=f,u=[{key:"getDerivedStateFromProps",value:function(y){var _,x=y.graphModel,N=x.transformModel,D=x.theme,z=D.inputText,K=x.textEditElement;if(K){var pe;if((pe=K.text)===null||pe===void 0||!pe.value)if(K.BaseType===ao.EDGE){var xe=(K=K).text,ke=K.textPosition,Je=ke.x,Qe=ke.y;xe.x=Je,xe.y=Qe,K.setText(xe)}else K=K;var yt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(K.BaseType===ao.EDGE){var $t=D.edgeText,hn=$t.overflowMode,dn=$t.lineHeight,Hn=$t.wrapPadding,sn=$t.textWidth;sn&&hn==="autoWrap"&&(_=Mp(Mp({},yt),{},{width:sn,minWidth:sn,lineHeight:dn,padding:Hn}))}else if(K.BaseType===ao.NODE){var jn=D.nodeText,_n=jn.overflowMode,kr=jn.lineHeight,Fr=jn.wrapPadding,ur=jn.textWidth,Hr=K,pi=Hr.width,hi=Hr.modelType,_a=Hr.textWidth||ur||pi;(hi!==Er.TEXT_NODE&&_n==="autoWrap"||hi===Er.TEXT_NODE&&ur)&&(_=Mp(Mp({},yt),{},{width:_a,minWidth:_a,lineHeight:kr,padding:Fr}))}var nu=K.text,ru=nu.x,oc=nu.y,Np=pj(N.CanvasPointToHtmlPoint([ru,oc]),2);return{style:Mp(Mp({left:Np[0],top:Np[1]},_),z)}}}}],(l=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var _=this.__prevText,x=_.text,N=_.id;y.updateText(N,x),y.eventCenter.emit(Rn.TEXT_UPDATE,Mp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var _=document.createRange();_.selectNodeContents(y),_.collapse(!1);var x=window.getSelection();x.removeAllRanges(),x.addRange(_)}}},{key:"render",value:function(){var y,_=this.props.graphModel.textEditElement,x=this.state.style;return _?Object(Fe.g)("div",{contentEditable:!0,className:"lf-text-input",style:x,ref:this.ref,key:_.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=_.text)===null||y===void 0?void 0:y.value):null}}])&&aS(i.prototype,l),u&&aS(i,u),f}(Fe.a),Pp(nS,"toolName","textEdit"),tS=rS))||tS,yj=function(a){return a.modelType===Er.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,p=(l.x+u.x)/2,f=(l.y+u.y)/2,y=Math.abs(l.x-u.x)+10,_=Math.abs(l.y-u.y)+10;return{x:p-y/2,y:f-_/2,x1:p+y/2,y1:f+_/2}}(a):a.modelType===Er.POLYLINE_EDGE?function(i){var l=i.points,u=yo(l),p=Vt(u,8),f=p.x,y=p.y,_=p.width,x=p.height;return{x:f-_/2,y:y-x/2,x1:f+_/2,y1:y+x/2}}(a):a.modelType===Er.BEZIER_EDGE?function(i){var l=i.path,u=zn(l),p=Vt(u,8),f=p.x,y=p.y,_=p.width,x=p.height;return{x:f-_/2,y:y-x/2,x1:f+_/2,y1:y+x/2}}(a):void 0};function o1(a){return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o1(a)}function cS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(D){N=!0,y=D}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||fS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mj(a){return function(i){if(Array.isArray(i))return i1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||fS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fS(a,i){if(a){if(typeof a=="string")return i1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?i1(a,i):void 0}}function i1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function gj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a1(a,i){return a1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a1(a,i)}function bj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Km(a);if(i){var p=Km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _j(this,l)}}function _j(a,i){if(i&&(o1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wh(a)}function Wh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Km(a){return Km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Km(a)}function zh(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var l1=ps((sS=uS=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a1(f,y)})(p,a);var i,l,u=bj(p);function p(f){var y;(function(D,z){if(!(D instanceof z))throw new TypeError("Cannot call a class as a function")})(this,p),zh(Wh(y=u.call(this)),"stepDrag",void 0),zh(Wh(y),"handleMouseDown",function(D){y.stepDrag.handleMouseDown(D)}),zh(Wh(y),"handleWheelEvent",function(D){var z,K;D.preventDefault();var pe=D.deltaX,xe=D.deltaY,ke=D.clientX,Je=D.clientY,Qe=D.ctrlKey,yt=new WheelEvent("wheel",{deltaX:pe,deltaY:xe,clientX:ke,clientY:Je,ctrlKey:Qe});(z=y.props.logicFlow.container)===null||z===void 0||(K=z.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||K===void 0||K.dispatchEvent(yt)}),zh(Wh(y),"onDragging",function(D){var z=D.deltaX,K=D.deltaY,pe=y.props.graphModel,xe=pe.getSelectElements(!0);pe.moveNodes(xe.nodes.map(function(ke){return ke.id}),z,K)}),zh(Wh(y),"handleContextMenu",function(D){D.preventDefault();var z=y.props,K=z.graphModel,pe=z.graphModel,xe=pe.eventCenter,ke=pe.selectElements,Je=K.getPointByClient({x:D.clientX,y:D.clientY}),Qe={nodes:[],edges:[]};mj(ke.values()).forEach(function(yt){yt.BaseType===ao.NODE&&Qe.nodes.push(yt.getData()),yt.BaseType===ao.EDGE&&Qe.edges.push(yt.getData())}),xe.emit(Rn.SELECTION_CONTEXTMENU,{data:Qe,e:D,position:Je})});var _=f.graphModel,x=_.gridSize,N=_.eventCenter;return y.stepDrag=new Q({onDragging:y.onDragging,step:x,eventType:"SELECTION",eventCenter:N}),y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,_=f.transformModel;if(!(y.size<=1)){var x=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,D=Number.MIN_SAFE_INTEGER,z=Number.MIN_SAFE_INTEGER;y.forEach(function(ke){var Je={x:0,y:0,x1:0,y1:0};ke.BaseType===ao.NODE&&(Je=function(Qe){var yt=Qe.x,$t=Qe.y,hn=Qe.width,dn=Qe.height;return{x:yt-hn/2,y:$t-dn/2,x1:yt+hn/2,y1:$t+dn/2}}(ke)),ke.BaseType===ao.EDGE&&(Je=yj(ke)),x=Math.min(x,Je.x),N=Math.min(N,Je.y),D=Math.max(D,Je.x1),z=Math.max(z,Je.y1)});var K=cS(_.CanvasPointToHtmlPoint([x,N]),2);x=K[0],N=K[1];var pe=cS(_.CanvasPointToHtmlPoint([D,z]),2);D=pe[0],z=pe[1];var xe={left:"".concat(x-10,"px"),top:"".concat(N-10,"px"),width:"".concat(D-x+20,"px"),height:"".concat(z-N+20,"px")};return Object(Fe.g)("div",{className:"lf-multiple-select",style:xe,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&gj(i.prototype,l),p}(Fe.a),zh(uS,"toolName","multipleSelect"),lS=sS))||lS;function wj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Zm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ej=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Zm(this,"tools",void 0),Zm(this,"components",void 0),Zm(this,"toolMap",new Map),Zm(this,"instance",void 0),this.instance=u,this.isDisabledTool(r1.toolName)||this.registerTool(r1.toolName,r1),this.isDisabledTool(l1.toolName)||this.registerTool(l1.toolName,l1);var p=u.graphModel;p.eventCenter.on("".concat(Rn.GRAPH_TRANSFORM,",").concat(Rn.NODE_CLICK,",").concat(Rn.BLANK_CLICK," "),function(){var f=p.textEditElement,y=p.editConfigModel,_=y.edgeTextEdit,x=y.nodeTextEdit;(_||x)&&f&&p.textEditElement.setElementState(zr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,p){this.toolMap.set(u,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&wj(i.prototype,l),a}(),Oj=r(173),xj=r.n(Oj);function Sj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function u1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var dS=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),u1(this,"mousetrap",void 0),u1(this,"options",void 0),u1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var p=u.lf;this.target=p.container,this.mousetrap=new xj.a(this.target),u.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,p=this.options.keyboard.shortcuts;if(p)if(ro(p))p.forEach(function(x){var N=x.keys,D=x.callback,z=x.action;return u.on(N,D,z)});else{var f=p.keys,y=p.callback,_=p.action;this.on(f,y,_)}}},{key:"on",value:function(u,p,f){this.mousetrap.bind(this.getKeys(u),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,p){this.mousetrap.unbind(this.getKeys(u),p)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var p=this;return(Array.isArray(u)?u:[u]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Sj(i.prototype,l),a}(),Aj=dS,gf=null;function pS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function hS(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var Hh=40,s1=40;function c1(a){return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c1(a)}function vS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function sy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?vS(Object(l),!0).forEach(function(u){li(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):vS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function yS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function li(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var f1=Symbol("plugin register by Logicflow.use"),d1=function(){function a(p){var f,y,_=this;(function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")})(this,a),li(this,"container",void 0),li(this,"width",void 0),li(this,"height",void 0),li(this,"graphModel",void 0),li(this,"history",void 0),li(this,"viewMap",new Map),li(this,"tool",void 0),li(this,"keyboard",void 0),li(this,"dnd",void 0),li(this,"options",void 0),li(this,"snaplineModel",void 0),li(this,"components",[]),li(this,"plugins",void 0),li(this,"extension",{}),li(this,"adapterIn",void 0),li(this,"adapterOut",void 0),li(this,"getView",function(x){return _.viewMap.get(x)}),p=dO(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new CR(sy({},p)),this.tool=new Ej(this),this.history=new dj(this.graphModel.eventCenter),this.dnd=new Pk({lf:this}),this.keyboard=new Aj({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new Ax(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(x){var N=x.data;y.setNodeSnapLine(N)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(x,N){var D=x.keyboard,z=D.options.keyboard;D.on(["cmd + c","ctrl + c"],function(){if(s1=Hh,!z.enabled||N.textEditElement)return!0;var K=x.options.guards,pe=N.getSelectElements(!1);return K&&K.beforeClone&&!K.beforeClone(pe)||pe.nodes.length===0&&pe.edges.length===0?(gf=null,!0):((gf=pe).nodes.forEach(function(xe){return pS(xe,Hh)}),gf.edges.forEach(function(xe){return hS(xe,Hh)}),!1)}),D.on(["cmd + v","ctrl + v"],function(){if(!z.enabled||N.textEditElement)return!0;if(gf&&(gf.nodes||gf.edges)){x.clearSelectElements();var K=x.addElements(gf,s1);if(!K)return!0;K.nodes.forEach(function(pe){return x.selectElementById(pe.id,!0)}),K.edges.forEach(function(pe){return x.selectElementById(pe.id,!0)}),gf.nodes.forEach(function(pe){return pS(pe,Hh)}),gf.edges.forEach(function(pe){return hS(pe,Hh)}),s1+=Hh}return!1}),D.on(["cmd + z","ctrl + z"],function(){return!z.enabled||!!N.textEditElement||(x.undo(),!1)}),D.on(["cmd + y","ctrl + y"],function(){return!z.enabled||!!N.textEditElement||(x.redo(),!1)}),D.on(["backspace"],function(){if(!z.enabled||N.textEditElement)return!0;var K=N.getSelectElements(!0);return x.clearSelectElements(),K.edges.forEach(function(pe){return x.deleteEdge(pe.id)}),K.nodes.forEach(function(pe){return x.deleteNode(pe.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var _={BaseEdge:ly,BaseEdgeModel:md,BaseNode:hf,BaseNodeModel:pf,RectNode:r0,RectNodeModel:D_,CircleNode:l0,CircleNodeModel:v_,PolygonNode:d0,PolygonNodeModel:N_,TextNode:x0,TextNodeModel:F_,LineEdge:G0,LineEdgeModel:Ni,DiamondNode:y0,DiamondNodeModel:__,PolylineEdge:X0,PolylineEdgeModel:uf,BezierEdge:Z0,BezierEdgeModel:s_,EllipseNode:w0,EllipseNodeModel:x_,HtmlNode:M0,HtmlNodeModel:U_,h:Fe.g,type:p};this.viewMap.forEach(function(K){var pe=K.extendKey;pe&&(_[pe]=K)}),this.graphModel.modelMap.forEach(function(K){var pe=K.extendKey;pe&&(_[pe]=K)});var x=f(_),N=x.view,D=x.model,z=N;y&&!z.isObervered&&(z.isObervered=!0,z=On(z)),this.setView(p,z),this.graphModel.setModel(p,D)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=On(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){p.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:r0,model:D_,type:"rect"}),this.registerElement({type:"circle",view:l0,model:v_}),this.registerElement({type:"polygon",view:d0,model:N_}),this.registerElement({type:"line",view:G0,model:Ni}),this.registerElement({type:"polyline",view:X0,model:uf}),this.registerElement({type:"bezier",view:Z0,model:s_}),this.registerElement({type:"text",view:x0,model:F_}),this.registerElement({type:"ellipse",view:w0,model:x_}),this.registerElement({type:"diamond",view:y0,model:__}),this.registerElement({type:"html",view:M0,model:U_})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&y&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,y=p.coordinate,_=p.id;if(!y){var x=this.getNodeModelById(_);x&&(y=x.getData());var N=this.getEdgeModelById(_);N&&(y=N.textPosition)}var D=y,z=D.x,K=D.y;f.focusOn(z,K,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,y,_,x=this.getModelById(p);return!!x&&(y=(_=(li(f={},ao.NODE,this.deleteNode),li(f,ao.EDGE,this.deleteEdge),f)[x.BaseType])===null||_===void 0?void 0:_.call(this,p))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,y)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var y=f.getData(),_=this.options.guards,x=!_||!_.beforeDelete||_.beforeDelete(y);return x&&this.graphModel.deleteNode(p),x}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,y=this.graphModel.edgesMap[p];if(!y)return!1;var _=y.model.getData(),x=!f||!f.beforeDelete||f.beforeDelete(_);return x&&this.graphModel.deleteEdgeById(p),x}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,y=p.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,y=p.sourceNodeId,_=p.targetNodeId;if(y&&_){var x=[];return f.forEach(function(z){z.sourceNodeId===y&&z.targetNodeId===_&&x.push(z)}),x}if(y){var N=[];return f.forEach(function(z){z.sourceNodeId===y&&N.push(z)}),N}if(_){var D=[];return f.forEach(function(z){z.targetNodeId===_&&D.push(z)}),D}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.setProperties(Ko(f))}},{key:"deleteProperty",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,y=p.nodes,_=p.edges,x={},N={nodes:[],edges:[]},D=0;D<y.length;D++){var z=y[D],K=z.id,pe=this.addNode(z);if(!pe)return;K&&(x[K]=pe.id),N.nodes.push(pe)}return _.forEach(function(xe){var ke=xe.sourceNodeId,Je=xe.targetNodeId;x[ke]&&(ke=x[ke]),x[Je]&&(Je=x[Je]);var Qe=f.graphModel.addEdge(sy(sy({},xe),{},{sourceNodeId:ke,targetNodeId:Je}));N.edges.push(Qe)}),N}},{key:"getAreaElement",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],_=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,y,_,x).map(function(N){return N.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return this.adapterOut.apply(this,[p].concat(y))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,y=f.editConfigModel,_=f.transformModel;y.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&_.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=Ko(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=Ko(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,y=p.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=(p=this.plugins)!==null&&p!==void 0?p:a.extensions;_.forEach(function(x){var N=null,D=null;x[f1]?(N=x.extension,D=x.props):N=x;var z=N.pluginName||N.name;y.indexOf(z)===-1&&f.installPlugin(N,D)})}},{key:"installPlugin",value:function(p,f){if(c1(p)==="object"){var y=p.install,_=p.render;return y&&y.call(p,this,a),_&&this.components.push(_.bind(p)),void(this.extension[p.pluginName]=p)}var x=p,N=new x({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:f});N.render&&this.components.push(N.render.bind(N)),this.extension[x.pluginName]=N}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var y=new f(sy(sy({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(Ko(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Fe.j)(Object(Fe.g)(Tk,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Rn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],u=[{key:"use",value:function(p,f){var y,_,x=p.pluginName;x||(x=p.name);var N=(y=this.extensions.get(x))===null||y===void 0?void 0:y.extension;N&&N.destroy&&N.destroy(),this.extensions.set(x,(li(_={},f1,f1),li(_,"extension",p),li(_,"props",f),_))}}],l&&yS(i.prototype,l),u&&yS(i,u),a}();function ps(a){return On(a)}li(d1,"extensions",new Map),o.default=d1}])})})(nw,nw.exports);var cn=nw.exports;const q7=CI(cn);var K7=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),Z7=(globalThis==null?void 0:globalThis._ids)||new K7;function jv(){return Z7.next()}var m2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){m2(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+jv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){m2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var g2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pg=globalThis&&globalThis.__assign||function(){return Pg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Pg.apply(this,arguments)};(function(e){g2(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+jv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){g2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return cn.h("g",{},v,cn.h("circle",Pg(Pg({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var b2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),wy=globalThis&&globalThis.__assign||function(){return wy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wy.apply(this,arguments)};(function(e){b2(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+jv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){b2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.points,h=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",wy(wy({},h),{x:o,y:r,points:v})),cn.h("path",wy({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},h)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var _2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ng=globalThis&&globalThis.__assign||function(){return Ng=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ng.apply(this,arguments)};(function(e){_2(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+jv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){_2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Ng(Ng({},h),{x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var w2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),rw=globalThis&&globalThis.__assign||function(){return rw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},rw.apply(this,arguments)};(function(e){w2(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+jv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){w2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",rw({x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},h)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var E2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){E2(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+jv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){E2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var tA={width:40,height:40},nA={width:40,height:40},rA={width:40,height:40},oA={width:100,height:80},iA={width:100,height:80},J7=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),Q7=(globalThis==null?void 0:globalThis._ids)||new J7;function aA(){return Q7.next()}function O2(e){return Object.prototype.toString.call(e)}function e9(e){return"  ".repeat(e)}function Rg(e){var t=e;return O2(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Rg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Rg(n)})),t}function t9(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Rg(e)).replace(/"/g,"'")}return t}var Xh=`	
`;function hg(e,t,n){var o=e9(n),r="";if(t==="#text")return Xh+o+e;if(t==="#cdata-section")return Xh+o+"<![CDATA["+e+"]]>";if(t==="#comment")return Xh+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+t9(e)+'"';if(Array.isArray(e))e.forEach(function(h){r+=hg(h,t,n+1)});else if(O2(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":Xh+o)+"<"+t,s.forEach(function(h){h.charAt(0)==="-"?c+=hg(e[h],h,n+1):v+=hg(e[h],h,n+1)}),r+=c+(v!==""?">"+v+(Xh+o)+"</"+t+">":" />")}else r+=Xh+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function n9(e){var t="";for(var n in e)t+=hg(e[n],n,0);return t}var ul=function(){};ul.ObjTree=function(){return this};ul.ObjTree.VERSION="0.23";ul.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;ul.ObjTree.prototype.attr_prefix="-";ul.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};ul.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(b){var w;b&&b.responseXML&&b.responseXML.documentElement&&(w=s.parseDOM(b.responseXML.documentElement)),c(w,b),v&&v(b)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};ul.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};ul.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h==3||h==4||h==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};ul.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};ul.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};ul.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};ul.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};ul.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};ul.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var r9=function(e){return new ul.ObjTree().parseXML(e)},o9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ow=globalThis&&globalThis.__assign||function(){return ow=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ow.apply(this,arguments)},mb=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},cc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(cc||(cc={}));var x2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],lA=["properties","startPoint","endPoint","pointsList"];function uA(e){var t=e?lA.concat(e):lA;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var v=mb(c,2),h=v[0],g=v[1];typeof g!="object"?h.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(h)?s[h]=g:s["-"+h]=g:t.includes(h)?s["-"+h]=o(g):s[h]=o(g)}),s)}return o(n)}}function kg(e){var t={};return Object.entries(e).forEach(function(n){var o=mb(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Rg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=kg(s):Array.isArray(s)?t[r]=s.map(function(c){return kg(c)}):t[r]=s}),t}function i9(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var h=uA(n)(s.properties);Object.assign(v,h)}o.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,h=o.get(s.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(s.id):h["bpmn:incoming"]=[h["bpmn:incoming"],s.id]:h["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var b=uA(n)(s.properties);Object.assign(g,b)}return g});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[cc.FLOW]=r}function a9(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Fd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function l9(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===cc.FLOW){var v=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=s9(c,v)}else{var h=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(u9(c,h,s))}}})}return{nodes:t,edges:n}}function u9(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=sA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=sA(r,n,e);o.push(s)}return o}function sA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Fd.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(w){var O=mb(w,2),S=O[0],P=O[1];x2.indexOf(S)===-1&&(v||(v={}),v[S]=P)}),v&&(v=kg(v));var h;if(s&&(h={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];h.x=Number(g["-x"])+Number(g["-width"])/2,h.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:o,y:r,properties:v};return h&&(b.text=h),b}function s9(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(cA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(cA(o,e))}return n}function cA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(h){s<h.length&&(s=h.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(h){var g=mb(h,2),b=g[0],w=g[1];x2.indexOf(b)===-1&&(c||(c={}),c[b]=w)}),c&&(c=kg(c));var v={id:t["-id"],type:cc.FLOW,pointsList:e["di:waypoint"].map(function(h){return{x:Number(h["-x"]),y:Number(h["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Fd=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=ow({},n.processAttributes);i9(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};a9(v,r);var h=n.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":h};return g},this.adapterIn=function(r){if(r)return l9(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+aA()},this.definitionAttributes={"-id":"Definitions_"+aA(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Fd.shapeConfigMap.set(cc.START,{width:tA.width,height:tA.height});Fd.shapeConfigMap.set(cc.END,{width:nA.width,height:nA.height});Fd.shapeConfigMap.set(cc.GATEWAY,{width:rA.width,height:rA.height});Fd.shapeConfigMap.set(cc.SYSTEM,{width:oA.width,height:oA.height});Fd.shapeConfigMap.set(cc.USER,{width:iA.width,height:iA.height});(function(e){o9(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=r9(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var v=o.adapterOut(s,c);return n9(v)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Fd);var c9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),f9=(globalThis==null?void 0:globalThis._ids)||new c9;function d9(){return f9.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var fA=globalThis&&globalThis.__assign||function(){return fA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fA.apply(this,arguments)},p9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var dA=globalThis&&globalThis.__assign||function(){return dA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dA.apply(this,arguments)},h9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var pA=globalThis&&globalThis.__assign||function(){return pA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pA.apply(this,arguments)},v9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var hA=globalThis&&globalThis.__assign||function(){return hA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hA.apply(this,arguments)},y9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var vA=globalThis&&globalThis.__assign||function(){return vA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vA.apply(this,arguments)},m9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var yA=globalThis&&globalThis.__assign||function(){return yA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var mA=globalThis&&globalThis.__assign||function(){return mA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mA.apply(this,arguments)},g9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var uE,xi,S2,Lp,gA,A2,iw,T2,sE,aw,lw,uw={},M2=[],b9=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,cE=Array.isArray;function Nd(e,t){for(var n in t)e[n]=t[n];return e}function fE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ey(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?uE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return vg(e,c,o,r,null)}function vg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++S2,__i:-1,__u:0};return r==null&&xi.vnode!=null&&xi.vnode(s),s}function dE(e){return e.children}function cv(e,t){this.props=e,this.context=t}function Ev(e,t){if(t==null)return e.__?Ev(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Ev(e):null}function P2(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return P2(e)}}function bA(e){(!e.__d&&(e.__d=!0)&&Lp.push(e)&&!Cg.__r++||gA!==xi.debounceRendering)&&((gA=xi.debounceRendering)||A2)(Cg)}function Cg(){var e,t,n,o,r,s,c,v;for(Lp.sort(iw);e=Lp.shift();)e.__d&&(t=Lp.length,o=void 0,s=(r=(n=e).__v).__e,c=[],v=[],n.__P&&((o=Nd({},r)).__v=r.__v+1,xi.vnode&&xi.vnode(o),k2(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,c,s??Ev(r),!!(32&r.__u),v),o.__v=r.__v,o.__.__k[o.__i]=o,E9(c,o,v),o.__e!=s&&P2(o)),Lp.length>t&&Lp.sort(iw));Cg.__r=0}function N2(e,t,n,o,r,s,c,v,h,g,b){var w,O,S,P,A,R,j=o&&o.__k||M2,k=t.length;for(h=_9(n,t,j,h,k),w=0;w<k;w++)(S=n.__k[w])!=null&&(O=S.__i===-1?uw:j[S.__i]||uw,S.__i=w,R=k2(e,S,O,r,s,c,v,h,g,b),P=S.__e,S.ref&&O.ref!=S.ref&&(O.ref&&pE(O.ref,null,S),b.push(S.ref,S.__c||P,S)),A==null&&P!=null&&(A=P),4&S.__u||O.__k===S.__k?h=R2(S,h,e):typeof S.type=="function"&&R!==void 0?h=R:P&&(h=P.nextSibling),S.__u&=-7);return n.__e=A,h}function _9(e,t,n,o,r){var s,c,v,h,g,b=n.length,w=b,O=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=s+O,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?vg(null,c,null,null,null):cE(c)?vg(dE,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?vg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=w9(c,n,h,w))!==-1&&(w--,(v=n[g])&&(v.__u|=2)),v==null||v.__v===null?(g==-1&&O--,typeof c.type!="function"&&(c.__u|=4)):g!=h&&(g==h-1?O--:g==h+1?O++:(g>h?O--:O++,c.__u|=4))):e.__k[s]=null;if(w)for(s=0;s<b;s++)(v=n[s])!=null&&!(2&v.__u)&&(v.__e==o&&(o=Ev(v)),C2(v,v));return o}function R2(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=R2(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Ev(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function w9(e,t,n,o){var r,s,c=e.key,v=e.type,h=t[n];if(h===null||h&&c==h.key&&v===h.type&&!(2&h.__u))return n;if(o>(h!=null&&!(2&h.__u)?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((h=t[r])&&!(2&h.__u)&&c==h.key&&v===h.type)return r;r--}if(s<t.length){if((h=t[s])&&!(2&h.__u)&&c==h.key&&v===h.type)return s;s++}}return-1}function _A(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||b9.test(t)?n:n+"px"}function rg(e,t,n,o,r){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||_A(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||_A(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(T2,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=sE,e.addEventListener(t,s?lw:aw,s)):e.removeEventListener(t,s?lw:aw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function wA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=sE++;else if(t.t<n.u)return;return n(xi.event?xi.event(t):t)}}}function k2(e,t,n,o,r,s,c,v,h,g){var b,w,O,S,P,A,R,j,k,B,q,X,W,ee,J,L,G,Y=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),s=[v=t.__e=n.__e]),(b=xi.__b)&&b(t);e:if(typeof Y=="function")try{if(j=t.props,k="prototype"in Y&&Y.prototype.render,B=(b=Y.contextType)&&o[b.__c],q=b?B?B.props.value:b.__:o,n.__c?R=(w=t.__c=n.__c).__=w.__E:(k?t.__c=w=new Y(j,q):(t.__c=w=new cv(j,q),w.constructor=Y,w.render=x9),B&&B.sub(w),w.props=j,w.state||(w.state={}),w.context=q,w.__n=o,O=w.__d=!0,w.__h=[],w._sb=[]),k&&w.__s==null&&(w.__s=w.state),k&&Y.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Nd({},w.__s)),Nd(w.__s,Y.getDerivedStateFromProps(j,w.__s))),S=w.props,P=w.state,w.__v=t,O)k&&Y.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),k&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(k&&Y.getDerivedStateFromProps==null&&j!==S&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(j,q),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(j,w.__s,q)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(w.props=j,w.state=w.__s,w.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(H){H&&(H.__=t)}),X=0;X<w._sb.length;X++)w.__h.push(w._sb[X]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(j,w.__s,q),k&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(S,P,A)})}if(w.context=q,w.props=j,w.__P=e,w.__e=!1,W=xi.__r,ee=0,k){for(w.state=w.__s,w.__d=!1,W&&W(t),b=w.render(w.props,w.state,w.context),J=0;J<w._sb.length;J++)w.__h.push(w._sb[J]);w._sb=[]}else do w.__d=!1,W&&W(t),b=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++ee<25);w.state=w.__s,w.getChildContext!=null&&(o=Nd(Nd({},o),w.getChildContext())),k&&!O&&w.getSnapshotBeforeUpdate!=null&&(A=w.getSnapshotBeforeUpdate(S,P)),v=N2(e,cE(L=b!=null&&b.type===dE&&b.key==null?b.props.children:b)?L:[L],t,n,o,r,s,c,v,h,g),w.base=t.__e,t.__u&=-161,w.__h.length&&c.push(w),R&&(w.__E=w.__=null)}catch(H){if(t.__v=null,h||s!=null)if(H.then){for(t.__u|=h?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else for(G=s.length;G--;)fE(s[G]);else t.__e=n.__e,t.__k=n.__k;xi.__e(H,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=O9(n.__e,t,n,o,r,s,c,h,g);return(b=xi.diffed)&&b(t),128&t.__u?void 0:v}function E9(e,t,n){for(var o=0;o<n.length;o++)pE(n[o],n[++o],n[++o]);xi.__c&&xi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){xi.__e(s,r.__v)}})}function O9(e,t,n,o,r,s,c,v,h){var g,b,w,O,S,P,A,R=n.props,j=t.props,k=t.type;if(k=="svg"?r="http://www.w3.org/2000/svg":k=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((S=s[g])&&"setAttribute"in S==!!k&&(k?S.localName==k:S.nodeType==3)){e=S,s[g]=null;break}}if(e==null){if(k==null)return document.createTextNode(j);e=document.createElementNS(r,k,j.is&&j),v&&(xi.__m&&xi.__m(t,s),v=!1),s=null}if(k===null)R===j||v&&e.data===j||(e.data=j);else{if(s=s&&uE.call(e.childNodes),R=n.props||uw,!v&&s!=null)for(R={},g=0;g<e.attributes.length;g++)R[(S=e.attributes[g]).name]=S.value;for(g in R)if(S=R[g],g!="children"){if(g=="dangerouslySetInnerHTML")w=S;else if(!(g in j)){if(g=="value"&&"defaultValue"in j||g=="checked"&&"defaultChecked"in j)continue;rg(e,g,null,S,r)}}for(g in j)S=j[g],g=="children"?O=S:g=="dangerouslySetInnerHTML"?b=S:g=="value"?P=S:g=="checked"?A=S:v&&typeof S!="function"||R[g]===S||rg(e,g,S,R[g],r);if(b)v||w&&(b.__html===w.__html||b.__html===e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(w&&(e.innerHTML=""),N2(e,cE(O)?O:[O],t,n,o,k=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&Ev(n,0),v,h),s!=null)for(g=s.length;g--;)fE(s[g]);v||(g="value",k=="progress"&&P==null?e.removeAttribute("value"):P!==void 0&&(P!==e[g]||k=="progress"&&!P||k=="option"&&P!==R[g])&&rg(e,g,P,R[g],r),g="checked",A!==void 0&&A!==e[g]&&rg(e,g,A,R[g],r))}return e}function pE(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){xi.__e(r,n)}}function C2(e,t,n){var o,r;if(xi.unmount&&xi.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||pE(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){xi.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&C2(o[r],t,n||typeof e.type!="function");n||fE(e.__e),e.__c=e.__=e.__e=void 0}function x9(e,t,n){return this.constructor(e,n)}uE=M2.slice,xi={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},S2=0,cv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Nd({},this.state),typeof e=="function"&&(e=e(Nd({},n),this.props)),e&&Nd(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),bA(this))},cv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),bA(this))},cv.prototype.render=dE,Lp=[],A2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,iw=function(e,t){return e.__v.__b-t.__v.__b},Cg.__r=0,T2=/(PointerCapture)$|Capture$/i,sE=0,aw=wA(!1),lw=wA(!0);var Oy=globalThis&&globalThis.__assign||function(){return Oy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Oy.apply(this,arguments)};function hE(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,v=t-o/2,h=n-r/2,g=Oy(Oy({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:h});return cn.h("rect",Oy({},g))}hE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var av;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(av||(av={}));var S9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fp=globalThis&&globalThis.__assign||function(){return Fp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fp.apply(this,arguments)},A9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},T9=cn.LogicFlowUtil.StepDrag,M9=function(e){S9(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.x,g=v.y;o.nodeModel.x=h+s/2,o.nodeModel.y=g+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,h=r.width,g=r.height,b=r.PCTResizeInfo,w=r.pct,O=w===void 0?1:w,S=r.freezeWidth,P=S===void 0?!1:S,A=r.freezeHeight,R=A===void 0?!1:A,j={width:h,height:g,deltaX:c,deltaY:v};if(b){var k=4,B=0,q=0;switch(s){case 0:q=(c*-1-v)/k;break;case 1:q=(c-v)/k;break;case 2:q=(c+v)/k;break;case 3:q=(c*-1+v)/k;break}q!==0&&(B=Math.round(q/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+B,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+B,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var X=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),W=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(s){case 0:c=h-X,v=g-W;break;case 1:c=X-h,v=g-W;break;case 2:c=X-h,v=W-g;break;case 3:c=h-X,v=W-g;break}return j.width=X,j.height=W,j.deltaX=c/O,j.deltaY=v/O,j}switch(s){case 0:j.width=P?h:h-c*O,j.height=R?g:g-v*O;break;case 1:j.width=P?h:h+c*O,j.height=R?g:g-v*O;break;case 2:j.width=P?h:h+c*O,j.height=R?g:g+v*O;break;case 3:j.width=P?h:h-c*O,j.height=R?g:g+v*O;break}return j},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,v=o.getNodeEdges(s);v.sourceEdges.forEach(function(h){var g=c.find(function(b){return b.id===h.sourceAnchorId});h.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(h){var g=c.find(function(b){return b.id===h.targetAnchorId});h.updateEndPoint({x:g.x,y:g.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.x,b=v.y,w=v.width,O=v.height,S=v.radius,P=v.PCTResizeInfo,A=o.nodeModel,R=A.minWidth,j=A.minHeight,k=A.maxWidth,B=A.maxHeight,q=o.index,X=R===k,W=j===B,ee=o.getResize({index:q,deltaX:s,deltaY:c,width:w,height:O,PCTResizeInfo:P,pct:1,freezeWidth:X,freezeHeight:W});if(ee.width<R||ee.width>k||ee.height<j||ee.height>B){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:X?0:ee.deltaX,deltaY:W?0:ee.deltaY}),o.nodeModel.width=ee.width,o.nodeModel.height=ee.height,o.nodeModel.setProperties({nodeSize:{width:ee.width,height:ee.height}}),o.getNodeEdges(h);var J={x:g,y:b,width:w,height:O,radius:S},L={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:S};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:J,afterNode:L})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.rx,b=v.ry,w=v.x,O=v.y,S=v.PCTResizeInfo,P=o.index,A=o.nodeModel,R=A.minWidth,j=A.minHeight,k=A.maxWidth,B=A.maxHeight,q=R===k,X=j===B,W=g,ee=b,J=o.getResize({index:P,deltaX:s,deltaY:c,width:W,height:ee,PCTResizeInfo:S,pct:1/2,freezeWidth:q,freezeHeight:X});if(J.width<R/2||J.width>k/2||J.height<j/2||J.height>B/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:q?0:J.deltaX,deltaY:X?0:J.deltaY}),o.nodeModel.rx=J.width,o.nodeModel.ry=J.height,o.nodeModel.setProperties({nodeSize:{rx:J.width,ry:J.height}}),o.getNodeEdges(h);var L={x:w,y:O},G={rx:J.width,ry:J.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Fp(Fp({},L),{rx:g,ry:b}),afterNode:G})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel;v.id;var h=v.rx,g=v.ry,b=v.x,w=v.y,O=v.PCTResizeInfo,S=o.index,P=o.nodeModel,A=P.minWidth,R=P.minHeight,j=P.maxWidth,k=P.maxHeight,B=A===j,q=R===k,X=h,W=g,ee=o.getResize({index:S,deltaX:s,deltaY:c,width:X,height:W,PCTResizeInfo:O,pct:1/2,freezeWidth:B,freezeHeight:q});if(ee.width<A/2||ee.width>j/2||ee.height<R/2||ee.height>k/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:B?0:ee.deltaX,deltaY:q?0:ee.deltaY}),o.nodeModel.rx=ee.width,o.nodeModel.ry=ee.height,o.nodeModel.setProperties({nodeSize:{rx:ee.width,ry:ee.height}});var J={x:b,y:w,rx:h,ry:g},L={rx:ee.width,ry:ee.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:J,afterNode:L})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=o.nodeModel,h=v.id,g=v.modelType,b=v.type,w=Fp({id:h,modelType:g,type:b},s),O=Fp({id:h,modelType:g,type:b},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:w,newNodeSize:O})},o.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,h=o.graphModel.transformModel,g=o.nodeModel.modelType;s=A9(h.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===av.RECT_NODE||g===av.HTML_NODE?o.updateRect({deltaX:c,deltaY:v}):g===av.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:v}):g===av.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:v})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),v=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,v),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new T9({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],v=0;v<r.length;v++){var h=r[v];h.sourceNodeId===n?s.push(h):r[v].targetNodeId===n&&c.push(h)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Ey("g",{className:"lf-resize-control-"+s},Ey(hE,Fp({className:"lf-node-control"},{x:o,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(cv),P9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dg=globalThis&&globalThis.__assign||function(){return Dg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dg.apply(this,arguments)},gb=function(e){P9(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,v=o.width,h=o.height,g={minX:s-v/2,minY:c-h/2,maxX:s+v/2,maxY:c+h/2},b=g.minX,w=g.minY,O=g.maxX,S=g.maxY,P=[{x:b,y:w},{x:O,y:w},{x:O,y:S},{x:b,y:S}];return P.map(function(A,R){return Ey(M9,Dg({index:R},A,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Ey(hE,Dg({fill:"none"},v,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Ey("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(cv),D2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),N9=function(e){D2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),R9=function(e){D2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(gb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),j2={type:"rect",view:R9,model:N9},I2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){I2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){I2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(gb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var sw=globalThis&&globalThis.__assign||function(){return sw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sw.apply(this,arguments)};function k9(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,h=v===void 0?"transparent":v,g=e.stroke,b=g===void 0?"#000":g,w=e.points,O=e.className,S=O===void 0?"lf-basic-shape":O,P={fill:h,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:S};return P.points=w.map(function(A){return A.join(",")}).join(" "),cn.h("polygon",sw({},P))}var L2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)};(function(e){L2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){L2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(gb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(k9,cw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var F2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),C9=function(e){F2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),D9=function(e){F2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(gb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),$2={type:"html",view:D9,model:C9},B2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),jg=globalThis&&globalThis.__assign||function(){return jg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jg.apply(this,arguments)},j9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},I9=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j9(arguments[t]));return e},EA=500,OA=300,L9=-1e4;(function(e){B2(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=EA,n.unfoldedHight=OA,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=EA,this.height=OA,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=L9,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var h=o.childrenLastFoldStatus[s];h!==void 0&&h!==c.isFolded&&c.foldGroup(h)}o.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var v=s.id,h=s.sourceNodeId,g=s.targetNodeId,b=s.startPoint,w=s.endPoint,O=s.type,S=s.text,P=s.getProperties(),A={id:v+"__"+c,sourceNodeId:h,targetNodeId:g,startPoint:b,endPoint:w,type:O,properties:P,text:S==null?void 0:S.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var R=r.graphModel.group.getNodeGroup(g);R||(R=r.graphModel.getNodeModelById(g));var j=r.graphModel.group.getNodeGroup(h);j||(j=r.graphModel.getNodeModelById(h)),n&&s.visible!==!1&&(r.children.has(h)||r.id===h?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(R.id!==r.id||j.id!==r.id)&&r.createVirtualEdge(A),s.visible=!1),!n&&s.visible===!1&&(R&&R.isGroup&&R.isFolded?(A.targetNodeId=R.id,A.endPoint=void 0,r.createVirtualEdge(A)):j&&j.isGroup&&j.isFolded?(A.sourceNodeId=j.id,A.startPoint=void 0,r.createVirtualEdge(A)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=I9(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(j2.model);(function(e){B2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,h=n.properties;if(!h.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),w=o+g+8,O=r+g+8;return cn.h("rect",jg(jg({},b),{width:w,height:O,x:s-w/2,y:c-O/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(j2.view);var xA=globalThis&&globalThis.__assign||function(){return xA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xA.apply(this,arguments)};globalThis&&globalThis.__rest;var F9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var SA=globalThis&&globalThis.__assign||function(){return SA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},SA.apply(this,arguments)};globalThis&&globalThis.__values;var AA=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(this,arguments)};function $9(e){var t=function(o){AA(r,o);function r(s,c){var v=this;s.id||(s.id="Flow_"+d9());var h=xy(xy(xy({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=h,v=o.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){AA(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}$9();globalThis&&globalThis.__read;var TA={width:40,height:40},MA={width:40,height:40},PA={width:100,height:80},Ig={width:100,height:80},NA={width:100,height:80},RA={width:100,height:80},kA={width:100,height:80},CA={width:100,height:80},DA={width:100,height:80},jA={width:100,height:80},sl=function(){};sl.ObjTree=function(){return this};sl.ObjTree.VERSION="0.23";sl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;sl.ObjTree.prototype.attr_prefix="-";sl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};sl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(b){var w;b&&b.responseXML&&b.responseXML.documentElement&&(w=s.parseDOM(b.responseXML.documentElement)),c(w,b),v&&v(b)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};sl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};sl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h===3||h===4||h===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};sl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};sl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};sl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};sl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};sl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};sl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var B9=function(e){return new sl.ObjTree().parseXML(e)};function U2(e){return Object.prototype.toString.call(e)}function IA(e){return"  ".repeat(e)}function Lg(e){return U2(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Lg(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Lg(t)}):e}function U9(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Lg(e)).replace(/"/g,"'")}return t}var LA=`	
`;function yg(e,t,n){var o=IA(n),r="",s=LA+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+U9(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return yg(g,t,n+1)}).join("");else if(U2(e)==="[object Object]"){var c=Object.keys(e),v="",h=e["-json"]?LA+IA(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=yg(e[g],g,n+1):h+=yg(e[g],g,n+1)}),r+=v+(h!==""?">"+h+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function G9(e){var t="";for(var n in e)t+=yg(e[n],n,0);return t}var V9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fw.apply(this,arguments)},FA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},vE=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Iv=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},fv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Iv(arguments[t]));return e},al;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(al||(al={}));var G2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],W9=["properties","startPoint","endPoint","pointsList"],Fg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},V2=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},ju={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=ju[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=ju[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=ju[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=ju[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,v=t["-id"],h="",g="";try{for(var b=vE(Object.keys(t)),w=b.next();!w.done;w=b.next()){var O=w.value;O.includes("bpmn:")&&(r=Iv(O.split(":"),2),h=r[1],g=(s=t[O])===null||s===void 0?void 0:s["#text"])}}catch(S){n={error:S}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":h,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function z9(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(fv(W9,n||[])),c={in:new Set(fv(Fg.in,(o==null?void 0:o.in)||[])),out:new Set(fv(Fg.out,(o==null?void 0:o.out)||[]))};return ju=V2(ju,r),function(v){var h=v.nodes,g=v.edges;function b(w,O){var S,P,A;if((w==null?void 0:w.flag)!==1){var R;if((R=ju[w.type])&&R.out){var j=R.out(w),k=Object.keys(j);k.length>0&&k.forEach(function(G){w[G]=j[G]})}w!=null&&w.children&&(w.children=w.children.map(function(G){var Y=h.find(function(H){return H.id===G})||g.find(function(H){return H.id===G});return Y||{}}));var B={};if(typeof w=="string")return w;if(Array.isArray(w))return w.map(function(G){return b(G,"")}).filter(function(G){return G!=null});try{for(var q=vE(Object.entries(w)),X=q.next();!X.done;X=q.next()){var W=Iv(X.value,2),ee=W[0],J=W[1];if(((A=J)===null||A===void 0?void 0:A.flag)===1)return;var L=[O,ee].filter(function(G){return G}).join(".");c.out.has(L)||(typeof J!="object"?ee.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(ee)?B[ee]=J:B["-"+ee]=J:s.has(L)?B["-"+ee]=b(J,L):B[ee]=b(J,L))}}catch(G){S={error:G}}finally{try{X&&!X.done&&(P=q.return)&&P.call(q)}finally{if(S)throw S.error}}return B}}return b(v,"")}}function $g(e){var t,n,o={};try{for(var r=vE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Iv(s.value,2),v=c[0],h=c[1];v.indexOf("-")===0?o[v.substring(1)]=Lg(h):typeof h=="string"?o[v]=h:Object.prototype.toString.call(h)==="[object Object]"?o[v]=$g(h):Array.isArray(h)?o[v]=h.map(function(g){return $g(g)}):o[v]=h}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function H9(e,t,n){var o,r=new Map,s=z9(n)(t);s.nodes.forEach(function(v){var h=v["-id"],g=v["-type"],b=v.text,w=v.children,O=FA(v,["-id","-type","text","children"]),S={"-id":h};b!=null&&b["-value"]&&(S["-name"]=b["-value"]),O["-json"]&&(S["-json"]=O["-json"]),O["-properties"]&&Object.assign(S,O["-properties"]),w&&(S.children=w),e[g]||(e[g]=[]),e[g].push(S),r.set(h,S)});var c=s.edges.map(function(v){var h=v["-id"];v["-type"];var g=v["-sourceNodeId"],b=v["-targetNodeId"],w=v.text,O=FA(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),S=r.get(b);S["bpmn:incoming"]||(S["bpmn:incoming"]=[]),S["bpmn:incoming"].push(h);var P={"-id":h,"-sourceRef":g,"-targetRef":b};return w!=null&&w["-value"]&&(P["-name"]=w["-value"]),O["-json"]&&(P["-json"]=O["-json"]),O["-properties"]&&Object.assign(P,O["-properties"]),P});return t.edges.forEach(function(v){var h=v.sourceNodeId,g=v.id,b=r.get(h);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(v){var h={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(A){var R,j=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(B){j[B]&&j[B].forEach(function(q){h[B].add(q)})});var k=(R=e[A["-type"]])===null||R===void 0?void 0:R.findIndex(function(B){return B["-id"]===A["-id"]});k>=0&&e[A["-type"]].splice(k,1),r.delete(A["-id"]),v[A["-type"]]||(v[A["-type"]]=[]),v[A["-type"]].push(j)});var b=h["bpmn:incoming"],w=h["bpmn:outgoing"];w.forEach(function(A){b.has(A)&&g.push(A)});for(var O=function(A){var R=c.findIndex(function(j){return j["-id"]===g[A]});R>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[R]),c.splice(R,1)):A++,S=A},S,P=0;P<g.length;)O(P),P=S;delete v.children}),e[al.FLOW]=c,e}function X9(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=kl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var Y9=["bpmn:incoming","bpmn:outgoing"];function q9(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,h={in:new Set(fv(Fg.in,(v==null?void 0:v.in)||[])),out:new Set(fv(Fg.out,(v==null?void 0:v.out)||[]))};ju=V2(ju,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(O,S){S.forEach(function(P){try{Object.keys(O).forEach(function(A){try{P(A)}catch(R){console.error(R)}})}catch(A){console.error(A)}})})(b,[function(O){function S(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(R){var j;R.indexOf("bpmn:")===0&&!Y9.includes(R)&&(b[R]||(b[R]=[]),!Array.isArray(b[R])&&(b[R]=[b[R]]),Array.isArray(A[R])?(j=b[R]).push.apply(j,fv(A[R])):b[R].push(A[R]),Array.isArray(A[R])?A[R].forEach(function(k){!R.includes("Flow")&&A["-children"].push(k["-id"])}):!R.includes("Flow")&&A["-children"].push(A[R]["-id"]),delete A[R])})}if(O==="bpmn:subProcess"){var P=b[O];Array.isArray(P)?P.forEach(function(A){O==="bpmn:subProcess"&&S(A)}):S(P)}},function(O){var S=function(A){Object.keys(A).forEach(function(R){var j,k;if(R.includes("bpmn:")){var B={};ju[R]&&ju[R].in?(B=(k=(j=ju[R]).in)===null||k===void 0?void 0:k.call(j,R,ie.cloneDeep(A[R])),delete A[R]):P(A[R]);var q=void 0;(q=Reflect.ownKeys(B)).length>0&&q.forEach(function(X){Reflect.set(A,X,B[X])})}})};function P(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(R){P(R)}):typeof A=="object"&&S(A)}P(b[O])},function(O){if(O.indexOf("bpmn:")===0){var S=b[O];if(O==="bpmn:sequenceFlow"){var P=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=Z9(S,P)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var R=b[O],j=function(k){var B=k["-attachedToRef"],q=r.get(B);q["-boundaryEvents"]||(q["-boundaryEvents"]=[]),q["-boundaryEvents"].push(k["-id"])};Array.isArray(R)?R.forEach(function(k){j(k)}):j(R)}n=n.concat(K9(S,A,O))}}}])}var w=function(O,S,P){Object.keys(O).forEach(function(A){var R=P?P+"."+A:A;S.has(R)?delete O[A]:typeof O[A]=="object"&&w(O[A],S,R)})};return n.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,R=O.type;A[R]&&(O.type=A[R])}w(O,h.in,"")}),o.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,R=O.type;A[R]&&(O.type=A[R])}w(O,h.in,"")}),{nodes:n,edges:o}}function K9(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=$A(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=$A(r,n,e);o.push(s)}return o}function $A(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=kl.shapeConfigMap.get(t);v&&(o+=v.width/2,r+=v.height/2);var h={};Object.entries(n).forEach(function(O){var S=Iv(O,2),P=S[0],A=S[1];G2.includes(P)||(h[P]=A)}),h=$g(h);var g;if(c&&(g={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var w={id:e["-bpmnElement"],type:t,x:o,y:r,properties:h};return s&&(w.children=s),g&&(w.text=g),w}function Z9(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(BA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(BA(o,e))}return n}function BA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Iv(g,2),w=b[0],O=b[1];G2.includes(w)||(c[w]=O)}),c=$g(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),h={id:t["-id"],type:al.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var kl=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,v,h=fw({},n.processAttributes);H9(h,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":h["-id"]};X9(g,r);var b=n.definitionAttributes;b["bpmn:process"]=h,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var w={"bpmn:definitions":b};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var O=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,S=function(P){Array.isArray(P)&&P.forEach(function(A){return S(A)}),typeof P=="object"&&Object.keys(P).forEach(function(A){var R;(R=O[A])?(P[R]=ie.cloneDeep(P[A]),delete P[A],S(P[R])):S(P[A])})};S(w)}return w},this.adapterIn=function(r,s){if(r)return q9(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();kl.shapeConfigMap.set(al.START,{width:TA.width,height:TA.height});kl.shapeConfigMap.set(al.END,{width:MA.width,height:MA.height});kl.shapeConfigMap.set(al.INTERMEDIATE_CATCH,{width:Ig.width,height:Ig.height});kl.shapeConfigMap.set(al.INTERMEDIATE_THROW,{width:Ig.width,height:Ig.height});kl.shapeConfigMap.set(al.BOUNDARY,{width:PA.width,height:PA.height});kl.shapeConfigMap.set(al.PARALLEL_GATEWAY,{width:NA.width,height:NA.height});kl.shapeConfigMap.set(al.INCLUSIVE_GATEWAY,{width:RA.width,height:RA.height});kl.shapeConfigMap.set(al.EXCLUSIVE_GATEWAY,{width:kA.width,height:kA.height});kl.shapeConfigMap.set(al.SYSTEM,{width:CA.width,height:CA.height});kl.shapeConfigMap.set(al.USER,{width:DA.width,height:DA.height});kl.shapeConfigMap.set(al.SUBPROCESS,{width:jA.width,height:jA.height});(function(e){V9(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var v=B9(c);return o.adapterIn(v,o.props)},o.adapterXmlOut=function(c){var v=o.adapterOut(c,o.props);return G9(v)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(kl);var UA=globalThis&&globalThis.__assign||function(){return UA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},UA.apply(this,arguments)};globalThis&&globalThis.__read;var GA;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(GA||(GA={}));var J9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var Q9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var eV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var W2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),lv=globalThis&&globalThis.__assign||function(){return lv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lv.apply(this,arguments)},Sy=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},tV={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function nV(e){for(var t=e,n=1;n<t.length-1;){var o=Sy(t[n-1],2),r=o[0],s=o[1],c=Sy(t[n],2),v=c[0],h=c[1],g=Sy(t[n+1],2),b=g[0],w=g[1];r===v&&v===b||s===h&&h===w?t.splice(n,1):n++}return t}function rV(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function oV(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,h=""+s+c,g=tV[h]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var w=Sy(rV(t,h,g,v),2),O=w[0],S=w[1];O&&S&&(b+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+S[0]+" "+S[1],r=Sy(S,2),t[0]=r[0],t[1]=r[1])}return b}function iV(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=oV(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){W2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,h=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=nV(o.split(" ").map(function(S){return S.split(",").map(function(P){return+P})})),w=iV(b,v),O=lv(lv(lv({style:r?g:{}},h),s),{fill:"none"});return cn.h("path",lv({d:w},O))},t})(cn.PolylineEdge);(function(e){W2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var aV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var VA=globalThis&&globalThis.__assign||function(){return VA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},VA.apply(this,arguments)},WA=globalThis&&globalThis.__assign||function(){return WA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},WA.apply(this,arguments)},lV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let bb=!1;const Bg=jw({});function z2(e,t,n,o,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),bb&&(Bg[e]=DI($r({render:()=>wv(jI,{to:n},[wv(t,s(o,r))]),provide:()=>({getNode:()=>o,getGraph:()=>r})})))}function H2(e){bb&&delete Bg[e]}function Ug(){return bb}function uV(){return bb=!0,$r({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Bg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Bg[n])}),wv(si,{},t.map(n=>wv(n)))}}})}class Qi extends $2.view{constructor(n,o){super(n);wa(this,"isMounted");wa(this,"r");wa(this,"component");wa(this,"app");wa(this,"root");wa(this,"VueNode");wa(this,"up_node_field_dict");if(this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const s=n.graphModel.nodes.filter(c=>c.type===n.model.type);s.length-1>0&&r(s.length-1)}function r(s){var h;const c=s,v=n.model.properties.stepName+c;(h=n.graphModel.nodes)!=null&&h.some(g=>g.properties.stepName===v.trim())?r(c+1):n.model.properties.stepName=v}n.model.properties.config=II[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var o,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:Qt("views.applicationWorkflow.variable.global"),type:"global",children:((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Ug())z2(this.targetId(),this.component,n,o,r);else{this.r=wv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=FM({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r}}}),this.app.use(LI,{locale:FI}),this.app.use($I),this.app.use(BI),this.app.use(LM);for(const[c,v]of Object.entries(UI))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Ug()&&H2(this.targetId()),this.unmountVueComponent()}}class ea extends $2.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=LM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const h=c[v];if(h.id===s)return!0;if(n(h.id,s))return!0}return!1},o={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==ti.Base&&(this.type!==ti.Start&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let sV=class extends Qi{constructor(t){super(t,Y7)}};const cV={type:"ai-chat-node",model:ea,view:sV},fV=Object.freeze(Object.defineProperty({__proto__:null,default:cV},Symbol.toStringTag,{value:"Module"})),dV={class:"title-decoration-1 mb-8"},pV={class:"flex align-center"},hV={class:"mr-4"},vV=$r({__name:"index",props:{nodeModel:{}},setup(e){const t={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},{params:{id:n}}=Vu.config.globalProperties.$route,o=Et(),r=Oo({get:()=>(v.nodeModel.properties.nodeData||lt.set(v.nodeModel.properties,"nodeData",t),v.nodeModel.properties.nodeData),set:g=>{lt.set(v.nodeModel.properties,"nodeData",g)}});function s(g,b){const w=`${g}_list`;b?v.nodeModel.properties.nodeData[w]||lt.set(v.nodeModel.properties.nodeData,w,[]):delete v.nodeModel.properties.nodeData[w]}const c=()=>{if(!v.nodeModel.properties.nodeData.application_id){lt.set(v.nodeModel.properties,"status",500);return}Aa.getApplicationById(n,v.nodeModel.properties.nodeData.application_id).then(g=>{const b=v.nodeModel.properties.nodeData.api_input_field_list,w=v.nodeModel.properties.nodeData.user_input_field_list;if(dg(g.data.type)){const O=g.data.workFlow.nodes[0].properties.nodeData,S=g.data.workFlow.nodes[0].properties.api_input_field_list,P=g.data.workFlow.nodes[0].properties.user_input_field_list,A=S.map(B=>{const q=b.find(X=>X.variable==B.variable);return q?{...B,value:q.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});lt.set(v.nodeModel.properties.nodeData,"api_input_field_list",A);const R=P.map(B=>{const q=w.find(X=>X.field==B.field);return q?{...B,value:q.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});lt.set(v.nodeModel.properties.nodeData,"user_input_field_list",R);const j=O.file_upload_enable,k=O.file_upload_setting;j?(s("document",k.document),s("image",k.image),s("audio",k.audio)):["documentList","imageList","audioList"].forEach(B=>{delete v.nodeModel.properties.nodeData[B]}),lt.set(v.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{})},v=e,h=()=>{var g;return(g=o.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:v.nodeModel,errMessage:b}))};return zo(()=>{c(),lt.set(v.nodeModel,"validate",h)}),(g,b)=>{const w=ce("el-form-item"),O=ce("AppIcon"),S=ce("el-tooltip"),P=ce("el-switch"),A=ce("el-form"),R=ce("el-card");return nt(),Yt(Ji,{nodeModel:g.nodeModel},{default:U(()=>[me("h5",dV,We(g.$t("views.applicationWorkflow.nodeSetting")),1),F(R,{shadow:"never",class:"card-never"},{default:U(()=>[F(A,{onSubmit:b[6]||(b[6]=Sn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:o},{default:U(()=>[F(w,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(yi,{ref_key:"applicationNodeFormRef",ref:o,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=j=>r.value.questionReferenceAddress=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("documentList")||"documentList"in r.value?(nt(),Yt(w,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:U(()=>[F(yi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=j=>r.value.documentList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):vr("",!0),r.value.hasOwnProperty("imageList")||"imageList"in r.value?(nt(),Yt(w,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:U(()=>[F(yi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=j=>r.value.imageList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):vr("",!0),r.value.hasOwnProperty("audioList")||"audioList"in r.value?(nt(),Yt(w,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:U(()=>[F(yi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=j=>r.value.audioList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):vr("",!0),(nt(!0),In(si,null,Zi(r.value.api_input_field_list,(j,k)=>(nt(),In("div",{key:"api-input-"+k},[F(w,{label:j.variable,prop:"api_input_field_list."+k+".value",rules:[{required:j.is_required,message:`${g.$t("common.inputPlaceholder")}${j.variable}`,trigger:"blur"}]},{default:U(()=>[F(yi,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[k].value,"onUpdate:modelValue":B=>r.value.api_input_field_list[k].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(nt(!0),In(si,null,Zi(r.value.user_input_field_list,(j,k)=>(nt(),In("div",{key:"user-input-"+k},[F(w,{label:j.label,prop:"user_input_field_list."+k+".value",rules:[{required:j.required,message:`${g.$t("common.inputPlaceholder")}${j.label}`,trigger:"blur"}]},{default:U(()=>[F(yi,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[k].value,"onUpdate:modelValue":B=>r.value.user_input_field_list[k].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),F(w,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",pV,[me("div",hV,[me("span",null,[Tt(We(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[7]||(b[7]=me("span",{class:"danger"},"*",-1))])]),F(S,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(P,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=j=>r.value.isResult=j)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class yV extends Qi{constructor(t){super(t,vV)}}const mV={type:"application-node",model:ea,view:yV},gV=Object.freeze(Object.defineProperty({__proto__:null,default:mV},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(n),!0).forEach(function(o){bV(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function mg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mg=function(t){return typeof t}:mg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function bV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sf(){return Sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sf.apply(this,arguments)}function _V(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function wV(e,t){if(e==null)return{};var n=_V(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var EV="1.15.6";function Ef(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Pf=Ef(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Jy=Ef(/Edge/i),HA=Ef(/firefox/i),Ay=Ef(/safari/i)&&!Ef(/chrome/i)&&!Ef(/android/i),yE=Ef(/iP(ad|od|hone)/i),X2=Ef(/chrome/i)&&Ef(/android/i),Y2={capture:!1,passive:!1};function Zr(e,t,n){e.addEventListener(t,n,!Pf&&Y2)}function Xr(e,t,n){e.removeEventListener(t,n,!Pf&&Y2)}function Gg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function q2(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function vs(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Gg(e,t):Gg(e,t))||o&&e===n)return e;if(e===n)break}while(e=q2(e))}return null}var XA=/\s+/g;function ou(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(XA," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(XA," ")}}function br(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function dv(e,t){var n="";if(typeof e=="string")n=e;else do{var o=br(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function K2(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function sc(){var e=document.scrollingElement;return e||document.documentElement}function Wi(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,v,h,g,b,w;if(e!==window&&e.parentNode&&e!==sc()?(s=e.getBoundingClientRect(),c=s.top,v=s.left,h=s.bottom,g=s.right,b=s.height,w=s.width):(c=0,v=0,h=window.innerHeight,g=window.innerWidth,b=window.innerHeight,w=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Pf))do if(r&&r.getBoundingClientRect&&(br(r,"transform")!=="none"||n&&br(r,"position")!=="static")){var O=r.getBoundingClientRect();c-=O.top+parseInt(br(r,"border-top-width")),v-=O.left+parseInt(br(r,"border-left-width")),h=c+s.height,g=v+s.width;break}while(r=r.parentNode);if(o&&e!==window){var S=dv(r||e),P=S&&S.a,A=S&&S.d;S&&(c/=A,v/=P,w/=P,b/=A,h=c+b,g=v+w)}return{top:c,left:v,bottom:h,right:g,width:w,height:b}}}function YA(e,t,n){for(var o=Rd(e,!0),r=Wi(e)[t];o;){var s=Wi(o)[n],c=void 0;if(n==="top"||n==="left"?c=r>=s:c=r<=s,!c)return o;if(o===sc())break;o=Rd(o,!1)}return!1}function Ov(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==hr.ghost&&(o||c[s]!==hr.dragged)&&vs(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function mE(e,t){for(var n=e.lastElementChild;n&&(n===hr.ghost||br(n,"display")==="none"||t&&!Gg(n,t));)n=n.previousElementSibling;return n||null}function Du(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==hr.clone&&(!t||Gg(e,t))&&n++;return n}function qA(e){var t=0,n=0,o=sc();if(e)do{var r=dv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function OV(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Rd(e,t){if(!e||!e.getBoundingClientRect)return sc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=br(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return sc();if(o||t)return n;o=!0}}while(n=n.parentNode);return sc()}function xV(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function E1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Ty;function Z2(e,t){return function(){if(!Ty){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),Ty=setTimeout(function(){Ty=void 0},t)}}}function SV(){clearTimeout(Ty),Ty=void 0}function J2(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Q2(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function eN(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,v,h;if(!(!vs(r,t.draggable,e,!1)||r.animated||r===n)){var g=Wi(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,g.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,g.top),o.right=Math.max((v=o.right)!==null&&v!==void 0?v:-1/0,g.right),o.bottom=Math.max((h=o.bottom)!==null&&h!==void 0?h:-1/0,g.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Pl="Sortable"+new Date().getTime();function AV(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(br(r,"display")==="none"||r===hr.ghost)){e.push({target:r,rect:Wi(r)});var s=fc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=dv(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(OV(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var s=!1,c=0;e.forEach(function(v){var h=0,g=v.target,b=g.fromRect,w=Wi(g),O=g.prevFromRect,S=g.prevToRect,P=v.rect,A=dv(g,!0);A&&(w.top-=A.f,w.left-=A.e),g.toRect=w,g.thisAnimationDuration&&E1(O,w)&&!E1(b,w)&&(P.top-w.top)/(P.left-w.left)===(b.top-w.top)/(b.left-w.left)&&(h=MV(P,O,S,r.options)),E1(w,b)||(g.prevFromRect=b,g.prevToRect=w,h||(h=r.options.animation),r.animate(g,P,w,h)),h&&(s=!0,c=Math.max(c,h),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},h),g.thisAnimationDuration=h)}),clearTimeout(t),s?t=setTimeout(function(){typeof o=="function"&&o()},c):typeof o=="function"&&o(),e=[]},animate:function(o,r,s,c){if(c){br(o,"transition",""),br(o,"transform","");var v=dv(this.el),h=v&&v.a,g=v&&v.d,b=(r.left-s.left)/(h||1),w=(r.top-s.top)/(g||1);o.animatingX=!!b,o.animatingY=!!w,br(o,"transform","translate3d("+b+"px,"+w+"px,0)"),this.forRepaintDummy=TV(o),br(o,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),br(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){br(o,"transition",""),br(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},c)}}}}function TV(e){return e.offsetWidth}function MV(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Yh=[],O1={initializeByDefault:!0},Qy={mount:function(t){for(var n in O1)O1.hasOwnProperty(n)&&!(n in t)&&(t[n]=O1[n]);Yh.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Yh.push(t)},pluginEvent:function(t,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=t+"Global";Yh.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](fc({sortable:n},o)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](fc({sortable:n},o)))})},initializePlugins:function(t,n,o,r){Yh.forEach(function(v){var h=v.pluginName;if(!(!t.options[h]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[h]=g,Sf(o,g.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var o={};return Yh.forEach(function(r){typeof r.eventProperties=="function"&&Sf(o,r.eventProperties.call(n[r.pluginName],t))}),o},modifyOption:function(t,n,o){var r;return Yh.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],o))}),r}};function PV(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,v=e.fromEl,h=e.oldIndex,g=e.newIndex,b=e.oldDraggableIndex,w=e.newDraggableIndex,O=e.originalEvent,S=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[Pl],!!t){var A,R=t.options,j="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Pf&&!Jy?A=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(o,!0,!0)),A.to=c||n,A.from=v||n,A.item=r||n,A.clone=s,A.oldIndex=h,A.newIndex=g,A.oldDraggableIndex=b,A.newDraggableIndex=w,A.originalEvent=O,A.pullMode=S?S.lastPutMode:void 0;var k=fc(fc({},P),Qy.getEventProperties(o,t));for(var B in k)A[B]=k[B];n&&n.dispatchEvent(A),R[j]&&R[j].call(t,A)}}var NV=["evt"],Ml=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,s=wV(o,NV);Qy.pluginEvent.bind(hr)(t,n,fc({dragEl:vn,parentEl:Oi,ghostEl:Ar,rootEl:ui,nextEl:jp,lastDownEl:gg,cloneEl:vi,cloneHidden:Pd,dragStarted:yy,putSortable:Oa,activeSortable:hr.active,originalEvent:r,oldIndex:uv,oldDraggableIndex:My,newIndex:iu,newDraggableIndex:Md,hideGhostForTarget:oN,unhideGhostForTarget:iN,cloneNowHidden:function(){Pd=!0},cloneNowShown:function(){Pd=!1},dispatchSortableEvent:function(v){il({sortable:n,name:v,originalEvent:r})}},s))};function il(e){PV(fc({putSortable:Oa,cloneEl:vi,targetEl:vn,rootEl:ui,oldIndex:uv,oldDraggableIndex:My,newIndex:iu,newDraggableIndex:Md},e))}var vn,Oi,Ar,ui,jp,gg,vi,Pd,uv,iu,My,Md,og,Oa,Qh=!1,Vg=!1,Wg=[],kp,hs,x1,S1,KA,ZA,yy,qh,Py,Ny=!1,ig=!1,bg,Ba,A1=[],dw=!1,zg=[],_b=typeof document<"u",ag=yE,JA=Jy||Pf?"cssFloat":"float",RV=_b&&!X2&&!yE&&"draggable"in document.createElement("div"),tN=function(){if(_b){if(Pf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),nN=function(t,n){var o=br(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Ov(t,0,n),c=Ov(t,1,n),v=s&&br(s),h=c&&br(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Wi(s).width,b=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+Wi(c).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&v.float&&v.float!=="none"){var w=v.float==="left"?"left":"right";return c&&(h.clear==="both"||h.clear===w)?"vertical":"horizontal"}return s&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&o[JA]==="none"||c&&o[JA]==="none"&&g+b>r)?"vertical":"horizontal"},kV=function(t,n,o){var r=o?t.left:t.top,s=o?t.right:t.bottom,c=o?t.width:t.height,v=o?n.left:n.top,h=o?n.right:n.bottom,g=o?n.width:n.height;return r===v||s===h||r+c/2===v+g/2},CV=function(t,n){var o;return Wg.some(function(r){var s=r[Pl].options.emptyInsertThreshold;if(!(!s||mE(r))){var c=Wi(r),v=t>=c.left-s&&t<=c.right+s,h=n>=c.top-s&&n<=c.bottom+s;if(v&&h)return o=r}}),o},rN=function(t){function n(s,c){return function(v,h,g,b){var w=v.options.group.name&&h.options.group.name&&v.options.group.name===h.options.group.name;if(s==null&&(c||w))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(v,h,g,b),c)(v,h,g,b);var O=(c?v:h).options.group.name;return s===!0||typeof s=="string"&&s===O||s.join&&s.indexOf(O)>-1}}var o={},r=t.group;(!r||mg(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,t.group=o},oN=function(){!tN&&Ar&&br(Ar,"display","none")},iN=function(){!tN&&Ar&&br(Ar,"display","")};_b&&!X2&&document.addEventListener("click",function(e){if(Vg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Vg=!1,!1},!0);var Cp=function(t){if(vn){t=t.touches?t.touches[0]:t;var n=CV(t.clientX,t.clientY);if(n){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[Pl]._onDragOver(o)}}},DV=function(t){vn&&vn.parentNode[Pl]._isOutsideThisEl(t.target)};function hr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Sf({},t),e[Pl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nN(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:hr.supportPointer!==!1&&"PointerEvent"in window&&(!Ay||yE),emptyInsertThreshold:5};Qy.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);rN(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:RV,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Zr(e,"pointerdown",this._onTapStart):(Zr(e,"mousedown",this._onTapStart),Zr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Zr(e,"dragover",this),Zr(e,"dragenter",this)),Wg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Sf(this,AV())}hr.prototype={constructor:hr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(qh=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,vn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,r=this.options,s=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,h=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||h,b=r.filter;if(GV(o),!vn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Ay&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=vs(h,r.draggable,o,!1),!(h&&h.animated)&&gg!==h)){if(uv=Du(h),My=Du(h,r.draggable),typeof b=="function"){if(b.call(this,t,h,this)){il({sortable:n,rootEl:g,name:"filter",targetEl:h,toEl:o,fromEl:o}),Ml("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(w){if(w=vs(g,w.trim(),o,!1),w)return il({sortable:n,rootEl:w,name:"filter",targetEl:h,fromEl:o,toEl:o}),Ml("filter",n,{evt:t}),!0}),b)){s&&t.preventDefault();return}r.handle&&!vs(g,r.handle,o,!1)||this._prepareDragStart(t,v,h)}}},_prepareDragStart:function(t,n,o){var r=this,s=r.el,c=r.options,v=s.ownerDocument,h;if(o&&!vn&&o.parentNode===s){var g=Wi(o);if(ui=s,vn=o,Oi=vn.parentNode,jp=vn.nextSibling,gg=o,og=c.group,hr.dragged=vn,kp={target:vn,clientX:(n||t).clientX,clientY:(n||t).clientY},KA=kp.clientX-g.left,ZA=kp.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,vn.style["will-change"]="all",h=function(){if(Ml("delayEnded",r,{evt:t}),hr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!HA&&r.nativeDraggable&&(vn.draggable=!0),r._triggerDragStart(t,n),il({sortable:r,name:"choose",originalEvent:t}),ou(vn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(b){K2(vn,b.trim(),T1)}),Zr(v,"dragover",Cp),Zr(v,"mousemove",Cp),Zr(v,"touchmove",Cp),c.supportPointer?(Zr(v,"pointerup",r._onDrop),!this.nativeDraggable&&Zr(v,"pointercancel",r._onDrop)):(Zr(v,"mouseup",r._onDrop),Zr(v,"touchend",r._onDrop),Zr(v,"touchcancel",r._onDrop)),HA&&this.nativeDraggable&&(this.options.touchStartThreshold=4,vn.draggable=!0),Ml("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Jy||Pf))){if(hr.eventCanceled){this._onDrop();return}c.supportPointer?(Zr(v,"pointerup",r._disableDelayedDrag),Zr(v,"pointercancel",r._disableDelayedDrag)):(Zr(v,"mouseup",r._disableDelayedDrag),Zr(v,"touchend",r._disableDelayedDrag),Zr(v,"touchcancel",r._disableDelayedDrag)),Zr(v,"mousemove",r._delayedDragTouchMoveHandler),Zr(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&Zr(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(h,c.delay)}else h()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){vn&&T1(vn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Xr(t,"mouseup",this._disableDelayedDrag),Xr(t,"touchend",this._disableDelayedDrag),Xr(t,"touchcancel",this._disableDelayedDrag),Xr(t,"pointerup",this._disableDelayedDrag),Xr(t,"pointercancel",this._disableDelayedDrag),Xr(t,"mousemove",this._delayedDragTouchMoveHandler),Xr(t,"touchmove",this._delayedDragTouchMoveHandler),Xr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Zr(document,"pointermove",this._onTouchMove):n?Zr(document,"touchmove",this._onTouchMove):Zr(document,"mousemove",this._onTouchMove):(Zr(vn,"dragend",this),Zr(ui,"dragstart",this._onDragStart));try{document.selection?_g(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Qh=!1,ui&&vn){Ml("dragStarted",this,{evt:n}),this.nativeDraggable&&Zr(document,"dragover",DV);var o=this.options;!t&&ou(vn,o.dragClass,!1),ou(vn,o.ghostClass,!0),hr.active=this,t&&this._appendGhost(),il({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hs){this._lastX=hs.clientX,this._lastY=hs.clientY,oN();for(var t=document.elementFromPoint(hs.clientX,hs.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(hs.clientX,hs.clientY),t!==n);)n=t;if(vn.parentNode[Pl]._isOutsideThisEl(t),n)do{if(n[Pl]){var o=void 0;if(o=n[Pl]._onDragOver({clientX:hs.clientX,clientY:hs.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=q2(n));iN()}},_onTouchMove:function(t){if(kp){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Ar&&dv(Ar,!0),v=Ar&&c&&c.a,h=Ar&&c&&c.d,g=ag&&Ba&&qA(Ba),b=(s.clientX-kp.clientX+r.x)/(v||1)+(g?g[0]-A1[0]:0)/(v||1),w=(s.clientY-kp.clientY+r.y)/(h||1)+(g?g[1]-A1[1]:0)/(h||1);if(!hr.active&&!Qh){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Ar){c?(c.e+=b-(x1||0),c.f+=w-(S1||0)):c={a:1,b:0,c:0,d:1,e:b,f:w};var O="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");br(Ar,"webkitTransform",O),br(Ar,"mozTransform",O),br(Ar,"msTransform",O),br(Ar,"transform",O),x1=b,S1=w,hs=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ar){var t=this.options.fallbackOnBody?document.body:ui,n=Wi(vn,!0,ag,!0,t),o=this.options;if(ag){for(Ba=t;br(Ba,"position")==="static"&&br(Ba,"transform")==="none"&&Ba!==document;)Ba=Ba.parentNode;Ba!==document.body&&Ba!==document.documentElement?(Ba===document&&(Ba=sc()),n.top+=Ba.scrollTop,n.left+=Ba.scrollLeft):Ba=sc(),A1=qA(Ba)}Ar=vn.cloneNode(!0),ou(Ar,o.ghostClass,!1),ou(Ar,o.fallbackClass,!0),ou(Ar,o.dragClass,!0),br(Ar,"transition",""),br(Ar,"transform",""),br(Ar,"box-sizing","border-box"),br(Ar,"margin",0),br(Ar,"top",n.top),br(Ar,"left",n.left),br(Ar,"width",n.width),br(Ar,"height",n.height),br(Ar,"opacity","0.8"),br(Ar,"position",ag?"absolute":"fixed"),br(Ar,"zIndex","100000"),br(Ar,"pointerEvents","none"),hr.ghost=Ar,t.appendChild(Ar),br(Ar,"transform-origin",KA/parseInt(Ar.style.width)*100+"% "+ZA/parseInt(Ar.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,r=t.dataTransfer,s=o.options;if(Ml("dragStart",this,{evt:t}),hr.eventCanceled){this._onDrop();return}Ml("setupClone",this),hr.eventCanceled||(vi=Q2(vn),vi.removeAttribute("id"),vi.draggable=!1,vi.style["will-change"]="",this._hideClone(),ou(vi,this.options.chosenClass,!1),hr.clone=vi),o.cloneId=_g(function(){Ml("clone",o),!hr.eventCanceled&&(o.options.removeCloneOnHide||ui.insertBefore(vi,vn),o._hideClone(),il({sortable:o,name:"clone"}))}),!n&&ou(vn,s.dragClass,!0),n?(Vg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Xr(document,"mouseup",o._onDrop),Xr(document,"touchend",o._onDrop),Xr(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,vn)),Zr(document,"drop",o),br(vn,"transform","translateZ(0)")),Qh=!0,o._dragStartId=_g(o._dragStarted.bind(o,n,t)),Zr(document,"selectstart",o),yy=!0,window.getSelection().removeAllRanges(),Ay&&br(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,r,s,c,v=this.options,h=v.group,g=hr.active,b=og===h,w=v.sort,O=Oa||g,S,P=this,A=!1;if(dw)return;function R(Oe,ae){Ml(Oe,P,fc({evt:t,isOwner:b,axis:S?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:w,fromSortable:O,target:o,completed:k,onMove:function(Pe,Ke){return lg(ui,n,vn,r,Pe,Wi(Pe),t,Ke)},changed:B},ae))}function j(){R("dragOverAnimationCapture"),P.captureAnimationState(),P!==O&&O.captureAnimationState()}function k(Oe){return R("dragOverCompleted",{insertion:Oe}),Oe&&(b?g._hideClone():g._showClone(P),P!==O&&(ou(vn,Oa?Oa.options.ghostClass:g.options.ghostClass,!1),ou(vn,v.ghostClass,!0)),Oa!==P&&P!==hr.active?Oa=P:P===hr.active&&Oa&&(Oa=null),O===P&&(P._ignoreWhileAnimating=o),P.animateAll(function(){R("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(o===vn&&!vn.animated||o===n&&!o.animated)&&(qh=null),!v.dragoverBubble&&!t.rootEl&&o!==document&&(vn.parentNode[Pl]._isOutsideThisEl(t.target),!Oe&&Cp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),A=!0}function B(){iu=Du(vn),Md=Du(vn,v.draggable),il({sortable:P,name:"change",toEl:n,newIndex:iu,newDraggableIndex:Md,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=vs(o,v.draggable,n,!0),R("dragOver"),hr.eventCanceled)return A;if(vn.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||P._ignoreWhileAnimating===o)return k(!1);if(Vg=!1,g&&!v.disabled&&(b?w||(c=Oi!==ui):Oa===this||(this.lastPutMode=og.checkPull(this,g,vn,t))&&h.checkPut(this,g,vn,t))){if(S=this._getDirection(t,o)==="vertical",r=Wi(vn),R("dragOverValid"),hr.eventCanceled)return A;if(c)return Oi=ui,j(),this._hideClone(),R("revert"),hr.eventCanceled||(jp?ui.insertBefore(vn,jp):ui.appendChild(vn)),k(!0);var q=mE(n,v.draggable);if(!q||FV(t,S,this)&&!q.animated){if(q===vn)return k(!1);if(q&&n===t.target&&(o=q),o&&(s=Wi(o)),lg(ui,n,vn,r,o,s,t,!!o)!==!1)return j(),q&&q.nextSibling?n.insertBefore(vn,q.nextSibling):n.appendChild(vn),Oi=n,B(),k(!0)}else if(q&&LV(t,S,this)){var X=Ov(n,0,v,!0);if(X===vn)return k(!1);if(o=X,s=Wi(o),lg(ui,n,vn,r,o,s,t,!1)!==!1)return j(),n.insertBefore(vn,X),Oi=n,B(),k(!0)}else if(o.parentNode===n){s=Wi(o);var W=0,ee,J=vn.parentNode!==n,L=!kV(vn.animated&&vn.toRect||r,o.animated&&o.toRect||s,S),G=S?"top":"left",Y=YA(o,"top","top")||YA(vn,"top","top"),H=Y?Y.scrollTop:void 0;qh!==o&&(ee=s[G],Ny=!1,ig=!L&&v.invertSwap||J),W=$V(t,o,s,S,L?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,ig,qh===o);var se;if(W!==0){var Re=Du(vn);do Re-=W,se=Oi.children[Re];while(se&&(br(se,"display")==="none"||se===Ar))}if(W===0||se===o)return k(!1);qh=o,Py=W;var Se=o.nextElementSibling,ze=!1;ze=W===1;var Be=lg(ui,n,vn,r,o,s,t,ze);if(Be!==!1)return(Be===1||Be===-1)&&(ze=Be===1),dw=!0,setTimeout(IV,30),j(),ze&&!Se?n.appendChild(vn):o.parentNode.insertBefore(vn,ze?Se:o),Y&&J2(Y,0,H-Y.scrollTop),Oi=vn.parentNode,ee!==void 0&&!ig&&(bg=Math.abs(ee-Wi(o)[G])),B(),k(!0)}if(n.contains(vn))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Xr(document,"mousemove",this._onTouchMove),Xr(document,"touchmove",this._onTouchMove),Xr(document,"pointermove",this._onTouchMove),Xr(document,"dragover",Cp),Xr(document,"mousemove",Cp),Xr(document,"touchmove",Cp)},_offUpEvents:function(){var t=this.el.ownerDocument;Xr(t,"mouseup",this._onDrop),Xr(t,"touchend",this._onDrop),Xr(t,"pointerup",this._onDrop),Xr(t,"pointercancel",this._onDrop),Xr(t,"touchcancel",this._onDrop),Xr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(iu=Du(vn),Md=Du(vn,o.draggable),Ml("drop",this,{evt:t}),Oi=vn&&vn.parentNode,iu=Du(vn),Md=Du(vn,o.draggable),hr.eventCanceled){this._nulling();return}Qh=!1,ig=!1,Ny=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pw(this.cloneId),pw(this._dragStartId),this.nativeDraggable&&(Xr(document,"drop",this),Xr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ay&&br(document.body,"user-select",""),br(vn,"transform",""),t&&(yy&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Ar&&Ar.parentNode&&Ar.parentNode.removeChild(Ar),(ui===Oi||Oa&&Oa.lastPutMode!=="clone")&&vi&&vi.parentNode&&vi.parentNode.removeChild(vi),vn&&(this.nativeDraggable&&Xr(vn,"dragend",this),T1(vn),vn.style["will-change"]="",yy&&!Qh&&ou(vn,Oa?Oa.options.ghostClass:this.options.ghostClass,!1),ou(vn,this.options.chosenClass,!1),il({sortable:this,name:"unchoose",toEl:Oi,newIndex:null,newDraggableIndex:null,originalEvent:t}),ui!==Oi?(iu>=0&&(il({rootEl:Oi,name:"add",toEl:Oi,fromEl:ui,originalEvent:t}),il({sortable:this,name:"remove",toEl:Oi,originalEvent:t}),il({rootEl:Oi,name:"sort",toEl:Oi,fromEl:ui,originalEvent:t}),il({sortable:this,name:"sort",toEl:Oi,originalEvent:t})),Oa&&Oa.save()):iu!==uv&&iu>=0&&(il({sortable:this,name:"update",toEl:Oi,originalEvent:t}),il({sortable:this,name:"sort",toEl:Oi,originalEvent:t})),hr.active&&((iu==null||iu===-1)&&(iu=uv,Md=My),il({sortable:this,name:"end",toEl:Oi,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ml("nulling",this),ui=vn=Oi=Ar=jp=vi=gg=Pd=kp=hs=yy=iu=Md=uv=My=qh=Py=Oa=og=hr.dragged=hr.ghost=hr.clone=hr.active=null,zg.forEach(function(t){t.checked=!0}),zg.length=x1=S1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":vn&&(this._onDragOver(t),jV(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,r=0,s=o.length,c=this.options;r<s;r++)n=o[r],vs(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||UV(n));return t},sort:function(t,n){var o={},r=this.el;this.toArray().forEach(function(s,c){var v=r.children[c];vs(v,this.options.draggable,r,!1)&&(o[s]=v)},this),n&&this.captureAnimationState(),t.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return vs(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var r=Qy.modifyOption(this,t,n);typeof r<"u"?o[t]=r:o[t]=n,t==="group"&&rN(o)},destroy:function(){Ml("destroy",this);var t=this.el;t[Pl]=null,Xr(t,"mousedown",this._onTapStart),Xr(t,"touchstart",this._onTapStart),Xr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Xr(t,"dragover",this),Xr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Wg.splice(Wg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Pd){if(Ml("hideClone",this),hr.eventCanceled)return;br(vi,"display","none"),this.options.removeCloneOnHide&&vi.parentNode&&vi.parentNode.removeChild(vi),Pd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Pd){if(Ml("showClone",this),hr.eventCanceled)return;vn.parentNode==ui&&!this.options.group.revertClone?ui.insertBefore(vi,vn):jp?ui.insertBefore(vi,jp):ui.appendChild(vi),this.options.group.revertClone&&this.animate(vn,vi),br(vi,"display",""),Pd=!1}}};function jV(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function lg(e,t,n,o,r,s,c,v){var h,g=e[Pl],b=g.options.onMove,w;return window.CustomEvent&&!Pf&&!Jy?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=t,h.from=e,h.dragged=n,h.draggedRect=o,h.related=r||t,h.relatedRect=s||Wi(t),h.willInsertAfter=v,h.originalEvent=c,e.dispatchEvent(h),b&&(w=b.call(g,h,c)),w}function T1(e){e.draggable=!1}function IV(){dw=!1}function LV(e,t,n){var o=Wi(Ov(n.el,0,n.options,!0)),r=eN(n.el,n.options,Ar),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function FV(e,t,n){var o=Wi(mE(n.el,n.options.draggable)),r=eN(n.el,n.options,Ar),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function $V(e,t,n,o,r,s,c,v){var h=o?e.clientY:e.clientX,g=o?n.height:n.width,b=o?n.top:n.left,w=o?n.bottom:n.right,O=!1;if(!c){if(v&&bg<g*r){if(!Ny&&(Py===1?h>b+g*s/2:h<w-g*s/2)&&(Ny=!0),Ny)O=!0;else if(Py===1?h<b+bg:h>w-bg)return-Py}else if(h>b+g*(1-r)/2&&h<w-g*(1-r)/2)return BV(t)}return O=O||c,O&&(h<b+g*s/2||h>w-g*s/2)?h>b+g/2?1:-1:0}function BV(e){return Du(vn)<Du(e)?1:-1}function UV(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function GV(e){zg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&zg.push(o)}}function _g(e){return setTimeout(e,0)}function pw(e){return clearTimeout(e)}_b&&Zr(document,"touchmove",function(e){(hr.active||Qh)&&e.cancelable&&e.preventDefault()});hr.utils={on:Zr,off:Xr,css:br,find:K2,is:function(t,n){return!!vs(t,n,t,!1)},extend:xV,throttle:Z2,closest:vs,toggleClass:ou,clone:Q2,index:Du,nextTick:_g,cancelNextTick:pw,detectDirection:nN,getChild:Ov,expando:Pl};hr.get=function(e){return e[Pl]};hr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(hr.utils=fc(fc({},hr.utils),o.utils)),Qy.mount(o)})};hr.create=function(e,t){return new hr(e,t)};hr.version=EV;var Vi=[],my,hw,vw=!1,M1,P1,Hg,gy;function VV(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?Zr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Zr(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Zr(document,"touchmove",this._handleFallbackAutoScroll):Zr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Xr(document,"dragover",this._handleAutoScroll):(Xr(document,"pointermove",this._handleFallbackAutoScroll),Xr(document,"touchmove",this._handleFallbackAutoScroll),Xr(document,"mousemove",this._handleFallbackAutoScroll)),QA(),wg(),SV()},nulling:function(){Hg=hw=my=vw=gy=M1=P1=null,Vi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(s,c);if(Hg=n,o||this.options.forceAutoScrollFallback||Jy||Pf||Ay){N1(n,this.options,v,o);var h=Rd(v,!0);vw&&(!gy||s!==M1||c!==P1)&&(gy&&QA(),gy=setInterval(function(){var g=Rd(document.elementFromPoint(s,c),!0);g!==h&&(h=g,wg()),N1(n,r.options,g,o)},10),M1=s,P1=c)}else{if(!this.options.bubbleScroll||Rd(v,!0)===sc()){wg();return}N1(n,this.options,Rd(v,!1),!1)}}},Sf(e,{pluginName:"scroll",initializeByDefault:!0})}function wg(){Vi.forEach(function(e){clearInterval(e.pid)}),Vi=[]}function QA(){clearInterval(gy)}var N1=Z2(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,h=sc(),g=!1,b;hw!==n&&(hw=n,wg(),my=t.scroll,b=t.scrollFn,my===!0&&(my=Rd(n,!0)));var w=0,O=my;do{var S=O,P=Wi(S),A=P.top,R=P.bottom,j=P.left,k=P.right,B=P.width,q=P.height,X=void 0,W=void 0,ee=S.scrollWidth,J=S.scrollHeight,L=br(S),G=S.scrollLeft,Y=S.scrollTop;S===h?(X=B<ee&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),W=q<J&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(X=B<ee&&(L.overflowX==="auto"||L.overflowX==="scroll"),W=q<J&&(L.overflowY==="auto"||L.overflowY==="scroll"));var H=X&&(Math.abs(k-r)<=c&&G+B<ee)-(Math.abs(j-r)<=c&&!!G),se=W&&(Math.abs(R-s)<=c&&Y+q<J)-(Math.abs(A-s)<=c&&!!Y);if(!Vi[w])for(var Re=0;Re<=w;Re++)Vi[Re]||(Vi[Re]={});(Vi[w].vx!=H||Vi[w].vy!=se||Vi[w].el!==S)&&(Vi[w].el=S,Vi[w].vx=H,Vi[w].vy=se,clearInterval(Vi[w].pid),(H!=0||se!=0)&&(g=!0,Vi[w].pid=setInterval((function(){o&&this.layer===0&&hr.active._onTouchMove(Hg);var Se=Vi[this.layer].vy?Vi[this.layer].vy*v:0,ze=Vi[this.layer].vx?Vi[this.layer].vx*v:0;typeof b=="function"&&b.call(hr.dragged.parentNode[Pl],ze,Se,e,Hg,Vi[this.layer].el)!=="continue"||J2(Vi[this.layer].el,ze,Se)}).bind({layer:w}),24))),w++}while(t.bubbleScroll&&O!==h&&(O=Rd(O,!1)));vw=g}},30),aN=function(t){var n=t.originalEvent,o=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,h=t.unhideGhostForTarget;if(n){var g=o||s;v();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,w=document.elementFromPoint(b.clientX,b.clientY);h(),g&&!g.el.contains(w)&&(c("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function gE(){}gE.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=Ov(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:aN};Sf(gE,{pluginName:"revertOnSpill"});function bE(){}bE.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:aN};Sf(bE,{pluginName:"removeOnSpill"});hr.mount(new VV);hr.mount(bE,gE);const WV={class:"dialog-footer"},zV=$r({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Et(),s=Et(!1),c=Et(!1),v=Et({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),h=jw({name:[{required:!0,message:Qt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Qt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Qt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=Et(!1);$M(g,S=>{S||(v.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=S=>{S&&(v.value=lt.cloneDeep(S),c.value=!0),g.value=!0},w=()=>{g.value=!1,c.value=!1},O=async S=>{S&&await S.validate(P=>{P&&o("refresh",v.value)})};return t({open:b,close:w}),(S,P)=>{const A=ce("el-input"),R=ce("el-form-item"),j=ce("el-switch"),k=ce("el-form"),B=ce("el-button"),q=ce("el-dialog");return nt(),Yt(q,{title:c.value?S.$t("views.template.templateForm.title.editParam"):S.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":P[8]||(P[8]=X=>g.value=X),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":w,"append-to-body":""},{footer:U(()=>[me("span",WV,[F(B,{onClick:P[6]||(P[6]=Sn(X=>g.value=!1,["prevent"]))},{default:U(()=>[Tt(We(S.$t("common.cancel")),1)]),_:1}),F(B,{type:"primary",onClick:P[7]||(P[7]=X=>O(r.value)),loading:s.value},{default:U(()=>[Tt(We(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(k,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:v.value,"require-asterisk-position":"right"},{default:U(()=>[F(R,{label:S.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:U(()=>[F(A,{modelValue:v.value.variable,"onUpdate:modelValue":P[0]||(P[0]=X=>v.value.variable=X),placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:P[1]||(P[1]=X=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),F(R,{label:S.$t("dynamicsForm.paramForm.required.label"),onClick:P[3]||(P[3]=Sn(()=>{},["prevent"]))},{default:U(()=>[F(j,{size:"small",modelValue:v.value.is_required,"onUpdate:modelValue":P[2]||(P[2]=X=>v.value.is_required=X)},null,8,["modelValue"])]),_:1},8,["label"]),F(R,{label:S.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.is_required,message:S.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:U(()=>[F(A,{modelValue:v.value.default_value,"onUpdate:modelValue":P[4]||(P[4]=X=>v.value.default_value=X),placeholder:S.$t("dynamicsForm.default.placeholder"),onBlur:P[5]||(P[5]=X=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),HV={class:"flex-between mb-16"},XV={class:"lighter"},YV={class:"mr-4"},qV=$r({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Et(),o=Et(null),r=Et(),s=Et([]);function c(b,w){typeof w<"u"&&(o.value=w),r.value.open(b)}function v(b){s.value.splice(b,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function h(b){for(let O=0;O<s.value.length;O++)if(s.value[O].variable===b.variable&&o.value!==O){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}let w=t.nodeModel.properties.user_input_field_list;for(let O=0;O<w.length;O++)if(w[O].field===b.variable){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}o.value!==null?s.value.splice(o.value,1,b):s.value.push(b),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const w=n.value.$el.querySelector(".el-table__body-wrapper tbody");w&&hr.create(w,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const S=[...s.value],[P]=S.splice(O.oldIndex,1);S.splice(O.newIndex,0,P),s.value=S,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return zo(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(b=>b.assignment_method==="api_input").forEach(b=>{s.value.push(b)}),lt.set(t.nodeModel.properties,"api_input_field_list",s)}),(b,w)=>{var X;const O=ce("Plus"),S=ce("el-icon"),P=ce("el-button"),A=ce("el-table-column"),R=ce("el-switch"),j=ce("EditPen"),k=ce("el-tooltip"),B=ce("Delete"),q=ce("el-table");return nt(),In(si,null,[me("div",HV,[me("h5",XV,We(b.$t("views.template.templateForm.title.apiParamPassing")),1),F(P,{link:"",type:"primary",onClick:w[0]||(w[0]=W=>c())},{default:U(()=>[F(S,{class:"mr-4"},{default:U(()=>[F(O)]),_:1}),Tt(" "+We(b.$t("common.add")),1)]),_:1})]),((X=t.nodeModel.properties.api_input_field_list)==null?void 0:X.length)>0?(nt(),Yt(q,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[F(A,{prop:"variable",label:b.$t("dynamicsForm.paramForm.field.label")},null,8,["label"]),F(A,{prop:"default_value",label:b.$t("dynamicsForm.default.label")},null,8,["label"]),F(A,{label:b.$t("common.required")},{default:U(({row:W})=>[me("div",{onClick:w[1]||(w[1]=Sn(()=>{},["stop"]))},[F(R,{disabled:"",size:"small",modelValue:W.is_required,"onUpdate:modelValue":ee=>W.is_required=ee},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(A,{label:b.$t("common.operation"),align:"left",width:"90"},{default:U(({row:W,$index:ee})=>[me("span",YV,[F(k,{effect:"dark",content:b.$t("common.modify"),placement:"top"},{default:U(()=>[F(P,{type:"primary",text:"",onClick:Sn(J=>c(W,ee),["stop"])},{default:U(()=>[F(S,null,{default:U(()=>[F(j)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(k,{effect:"dark",content:b.$t("common.delete"),placement:"top"},{default:U(()=>[F(P,{type:"primary",text:"",onClick:J=>v(ee)},{default:U(()=>[F(S,null,{default:U(()=>[F(B)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):vr("",!0),F(zV,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:h},null,512)],64)}}}),KV={class:"dialog-footer"},ZV=$r({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Et(),s=Et(!1),c=Et(!1),v=Et(),h=(R,j)=>R.every(k=>GI.get(j,k,void 0)!==void 0),g=Oo(()=>{if(v.value){const R=v.value;switch(R.type){case"input":return h(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:R.attrs||{maxlength:20,minlength:0},field:R.field||R.variable,input_type:"TextInput",label:R.label||R.name,default_value:R.default_value,required:R.required!=null?R.required:R.is_required};case"select":return h(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:R.attrs||{},field:R.field||R.variable,input_type:"SingleSelect",label:R.label||R.name,default_value:R.default_value,required:R.required!=null?R.required:R.is_required,option_list:R.option_list?R.option_list:R.optionList.map(j=>({key:j,value:j}))};case"date":return h(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:R.field||R.variable,input_type:"DatePicker",label:R.label||R.name,default_value:R.default_value,required:R.required!=null?R.required:R.is_required,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:20,minlength:0}}}),b=Et(null),w=Et([{label:Qt("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:Qt("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:Qt("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:Qt("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:Qt("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:Qt("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:Qt("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),O=Et(!1),S=(R,j)=>{O.value=!0,R?(c.value=!0,v.value=lt.cloneDeep(R),b.value=j):v.value=null},P=()=>{O.value=!1,c.value=!1,b.value=null,v.value=null},A=async()=>{const R=r.value;R&&await R.validate().then(()=>{o("refresh",R==null?void 0:R.getData(),b.value),c.value=!1,v.value=null,b.value=null})};return t({open:S,close:P}),(R,j)=>{const k=ce("el-button"),B=ce("el-dialog");return nt(),Yt(B,{title:c.value?R.$t("views.template.templateForm.title.editParam"):R.$t("views.template.templateForm.title.addParam"),modelValue:O.value,"onUpdate:modelValue":j[2]||(j[2]=q=>O.value=q),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":P,"append-to-body":""},{footer:U(()=>[me("span",KV,[F(k,{onClick:Sn(P,["prevent"])},{default:U(()=>[Tt(We(R.$t("common.cancel")),1)]),_:1}),F(k,{type:"primary",onClick:j[1]||(j[1]=q=>A()),loading:s.value},{default:U(()=>[Tt(We(c.value?R.$t("common.save"):R.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(Iw,{modelValue:g.value,"onUpdate:modelValue":j[0]||(j[0]=q=>g.value=q),"label-position":"top","require-asterisk-position":"right",input_type_list:w.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),JV={class:"dialog-footer"},QV=$r({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Et(),s=Et(!1),c=Et({title:Qt("chat.userInput")}),v=jw({title:[{required:!0,message:Qt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),h=Et(!1),g=O=>{O&&(c.value=lt.cloneDeep(O)),h.value=!0},b=()=>{h.value=!1},w=async O=>{O&&await O.validate(S=>{S&&o("refresh",c.value)})};return t({open:g,close:b}),(O,S)=>{const P=ce("el-input"),A=ce("el-form-item"),R=ce("el-form"),j=ce("el-button"),k=ce("el-dialog");return nt(),Yt(k,{title:O.$t("common.setting"),modelValue:h.value,"onUpdate:modelValue":S[4]||(S[4]=B=>h.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:U(()=>[me("span",JV,[F(j,{onClick:S[2]||(S[2]=Sn(B=>h.value=!1,["prevent"]))},{default:U(()=>[Tt(We(O.$t("common.cancel")),1)]),_:1}),F(j,{type:"primary",onClick:S[3]||(S[3]=B=>w(r.value)),loading:s.value},{default:U(()=>[Tt(We(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(R,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:U(()=>[F(A,{label:O.$t("common.title"),prop:"title"},{default:U(()=>[F(P,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=B=>c.value.title=B),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=B=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),eW={class:"flex-between mb-16"},tW={class:"lighter"},nW={class:"ml-4"},rW=["title"],oW={key:0},iW=["title"],aW={key:1},lW=["title"],uW=["title"],sW={class:"mr-4"},cW=$r({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Et(),o=Et(),r=Et(),s=Et([]),c=Et({title:Qt("chat.userInput")});function v(P,A){o.value.open(P,A)}function h(){r.value.open(c.value)}function g(P){s.value.splice(P,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function b(P,A){for(let j=0;j<s.value.length;j++)if(s.value[j].field===P.field&&A!==j){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}let R=t.nodeModel.properties.api_input_field_list;for(let j=0;j<R.length;j++)if(R[j].variable===P.field){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}A!==null?s.value.splice(A,1,P):s.value.push(P),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function w(P){c.value=P,r.value.close()}const O=P=>{var A;if(P.input_type==="PasswordInput")return"******";if(P.default_value){const R=(A=P.option_list)==null?void 0:A.filter(j=>P.default_value.indexOf(j.value)>-1).map(j=>j.label).join(",");return R||P.default_value}if(P.default_value!==void 0)return P.default_value};function S(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&hr.create(A,{animation:150,ghostClass:"ghost-row",onEnd:R=>{if(R.oldIndex===void 0||R.newIndex===void 0)return;const j=[...s.value],[k]=j.splice(R.oldIndex,1);j.splice(R.newIndex,0,k),s.value=j,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return zo(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(P=>P.assignment_method==="user_input").forEach(P=>{s.value.push(P)}),s.value.forEach((P,A)=>{switch(P.label=P.label||P.name,P.field=P.field||P.variable,P.required=P.required||P.is_required,P.type){case"input":P.input_type="TextInput";break;case"select":P.input_type="SingleSelect";break;case"date":P.input_type="DatePicker";break}}),lt.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),lt.set(t.nodeModel.properties,"user_input_config",c),S()}),(P,A)=>{var Y;const R=ce("Setting"),j=ce("el-icon"),k=ce("el-button"),B=ce("Plus"),q=ce("el-table-column"),X=ce("el-tag"),W=ce("el-switch"),ee=ce("EditPen"),J=ce("el-tooltip"),L=ce("Delete"),G=ce("el-table");return nt(),In(si,null,[me("div",eW,[me("h5",tW,We(c.value.title),1),me("div",null,[F(k,{type:"primary",link:"",onClick:h},{default:U(()=>[F(j,null,{default:U(()=>[F(R)]),_:1})]),_:1}),me("span",nW,[F(k,{link:"",type:"primary",onClick:A[0]||(A[0]=H=>v())},{default:U(()=>[F(j,{class:"mr-4"},{default:U(()=>[F(B)]),_:1}),Tt(" "+We(P.$t("common.add")),1)]),_:1})])])]),((Y=t.nodeModel.properties.user_input_field_list)==null?void 0:Y.length)>0?(nt(),Yt(G,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[F(q,{prop:"field",label:P.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:H})=>[me("span",{title:H.field,class:"ellipsis-1"},We(H.field),9,rW)]),_:1},8,["label"]),F(q,{prop:"label",label:P.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:H})=>[H.label&&H.label.input_type==="TooltipLabel"?(nt(),In("span",oW,[me("span",{title:H.label.label,class:"ellipsis-1"},We(H.label.label),9,iW)])):(nt(),In("span",aW,[me("span",{title:H.label,class:"ellipsis-1"},We(H.label),9,lW)]))]),_:1},8,["label"]),F(q,{label:P.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:U(({row:H})=>[H.input_type==="TextInput"?(nt(),Yt(X,{key:0,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):vr("",!0),H.input_type==="PasswordInput"?(nt(),Yt(X,{key:1,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):vr("",!0),H.input_type==="Slider"?(nt(),Yt(X,{key:2,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):vr("",!0),H.input_type==="SwitchInput"?(nt(),Yt(X,{key:3,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):vr("",!0),H.input_type==="SingleSelect"?(nt(),Yt(X,{key:4,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):vr("",!0),H.input_type==="MultiSelect"?(nt(),Yt(X,{key:5,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):vr("",!0),H.input_type==="RadioCard"?(nt(),Yt(X,{key:6,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):vr("",!0),H.input_type==="DatePicker"?(nt(),Yt(X,{key:7,type:"info",class:"info-tag"},{default:U(()=>[Tt(We(P.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):vr("",!0)]),_:1},8,["label"]),F(q,{prop:"default_value",label:P.$t("dynamicsForm.default.label")},{default:U(({row:H})=>[me("span",{title:H.default_value,class:"ellipsis-1"},We(O(H)),9,uW)]),_:1},8,["label"]),F(q,{label:P.$t("common.required")},{default:U(({row:H})=>[me("div",{onClick:A[1]||(A[1]=Sn(()=>{},["stop"]))},[F(W,{disabled:"",size:"small",modelValue:H.required,"onUpdate:modelValue":se=>H.required=se},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(q,{label:P.$t("common.operation"),align:"left",width:"90"},{default:U(({row:H,$index:se})=>[me("span",sW,[F(J,{effect:"dark",content:P.$t("common.modify"),placement:"top"},{default:U(()=>[F(k,{type:"primary",text:"",onClick:Sn(Re=>v(H,se),["stop"])},{default:U(()=>[F(j,null,{default:U(()=>[F(ee)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(J,{effect:"dark",content:P.$t("common.delete"),placement:"top"},{default:U(()=>[F(k,{type:"primary",text:"",onClick:Re=>g(se)},{default:U(()=>[F(j,null,{default:U(()=>[F(L)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):vr("",!0),F(ZV,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:b},null,512),F(QV,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:w},null,512)],64)}}}),fW="/ui/assets/icon_file-doc-7cb7d059.svg",dW="/ui/assets/icon_file-image-e1249452.svg",pW="/ui/assets/icon_file-audio-d3fb5822.svg",hW={class:"flex-between"},vW={class:"flex align-center"},yW={class:"line-height-22 mt-4"},mW={class:"flex-between"},gW={class:"flex align-center"},bW={class:"line-height-22 mt-4"},_W={class:"flex-between"},wW={class:"flex align-center"},EW={class:"line-height-22 mt-4"},OW={class:"dialog-footer"},xW=$r({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=Et(!1),c=Et(!1),v=Et(),h=Et({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1});function g(O){s.value=!0,H1(()=>{h.value={...h.value,...O}})}function b(){s.value=!1}async function w(){const O=v.value;O&&await O.validate().then(()=>{o("refresh",h.value),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:g}),(O,S)=>{const P=ce("el-slider"),A=ce("el-form-item"),R=ce("el-text"),j=ce("el-checkbox"),k=ce("el-card"),B=ce("el-form"),q=ce("el-button"),X=ce("el-dialog");return nt(),Yt(X,{title:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":S[12]||(S[12]=W=>s.value=W),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":"",width:"600"},{footer:U(()=>[me("span",OW,[F(q,{onClick:Sn(b,["prevent"])},{default:U(()=>[Tt(We(O.$t("common.cancel")),1)]),_:1}),F(q,{type:"primary",onClick:S[11]||(S[11]=W=>w()),loading:c.value},{default:U(()=>[Tt(We(O.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(B,{"label-position":"top",ref_key:"fieldFormRef",ref:v,model:h.value,"require-asterisk-position":"right"},{default:U(()=>[F(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:U(()=>[F(P,{modelValue:h.value.maxFiles,"onUpdate:modelValue":S[0]||(S[0]=W=>h.value.maxFiles=W),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),F(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:U(()=>[F(P,{modelValue:h.value.fileLimit,"onUpdate:modelValue":S[1]||(S[1]=W=>h.value.fileLimit=W),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),F(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:U(()=>[F(k,{shadow:"hover",class:kd(["card-checkbox cursor w-full mb-8",h.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[4]||(S[4]=Sn(W=>h.value.document=!h.value.document,["stop"]))},{default:U(()=>[me("div",hW,[me("div",vW,[S[13]||(S[13]=me("img",{class:"mr-12",src:fW,alt:""},null,-1)),me("div",null,[me("p",yW,We(O.$t("common.fileUpload.document"))+"（TXT、MD、DOCX、HTML、CSV、XLSX、XLS、PDF） ",1),F(R,{class:"color-secondary"},{default:U(()=>[Tt(We(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})])]),F(j,{modelValue:h.value.document,"onUpdate:modelValue":S[2]||(S[2]=W=>h.value.document=W),onChange:S[3]||(S[3]=W=>h.value.document=!h.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),F(k,{shadow:"hover",class:kd(["card-checkbox cursor w-full mb-8",h.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[7]||(S[7]=Sn(W=>h.value.image=!h.value.image,["stop"]))},{default:U(()=>[me("div",mW,[me("div",gW,[S[14]||(S[14]=me("img",{class:"mr-12",src:dW,alt:""},null,-1)),me("div",null,[me("p",bW,We(O.$t("common.fileUpload.image"))+"（JPG、JPEG、PNG、GIF） ",1),F(R,{class:"color-secondary"},{default:U(()=>[Tt(We(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})])]),F(j,{modelValue:h.value.image,"onUpdate:modelValue":S[5]||(S[5]=W=>h.value.image=W),onChange:S[6]||(S[6]=W=>h.value.image=!h.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),F(k,{shadow:"hover",class:kd(["card-checkbox cursor w-full mb-8",h.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[10]||(S[10]=Sn(W=>h.value.audio=!h.value.audio,["stop"]))},{default:U(()=>[me("div",_W,[me("div",wW,[S[15]||(S[15]=me("img",{class:"mr-12",src:pW,alt:""},null,-1)),me("div",null,[me("p",EW,We(O.$t("common.fileUpload.audio"))+"（MP3、WAV、OGG、ACC、M4A） ",1),F(R,{class:"color-secondary"},{default:U(()=>[Tt(We(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})])]),F(j,{modelValue:h.value.audio,"onUpdate:modelValue":S[8]||(S[8]=W=>h.value.audio=W),onChange:S[9]||(S[9]=W=>h.value.audio=!h.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),SW={class:"flex-between"},AW={class:"flex align-center"},TW={class:"mr-4"},MW={class:"flex-between"},PW={class:"mr-4"},NW={class:"flex"},RW={class:"flex-between"},kW={class:"mr-4"},CW={class:"flex"},DW={class:"w-full"},jW={class:"flex-between w-full"},IW=$r({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Vu.config.globalProperties.$route,n=e,o=Et(null),r=Et(null),s=Et(),c=Et(),v=Et(),h=Et(),g={name:"",desc:"",prologue:Qt("views.application.applicationForm.form.defaultPrologue")},b=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0);function w(L){lt.set(n.nodeModel.properties.nodeData,"prologue",L)}const O=Oo({get:()=>(n.nodeModel.properties.nodeData||lt.set(n.nodeModel.properties,"nodeData",g),n.nodeModel.properties.nodeData),set:L=>{lt.set(n.nodeModel.properties,"nodeData",L)}}),S=Et(),P=()=>{var L;return O.value.ttsModelEnable&&!O.value.ttsModelId&&O.value.ttsType==="TTS"?Promise.reject({node:n.nodeModel,errMessage:Qt("views.application.applicationForm.form.voicePlay.requiredMessage")}):O.value.sttModelEnable&&!O.value.sttModelId?Promise.reject({node:n.nodeModel,errMessage:Qt("views.application.applicationForm.form.voiceInput.requiredMessage")}):(L=S.value)==null?void 0:L.validate().catch(G=>Promise.reject({node:n.nodeModel,errMessage:G}))};function A(){Aa.getApplicationSTTModel(t).then(L=>{o.value=lt.groupBy(L==null?void 0:L.data,"provider")})}function R(){Aa.getApplicationTTSModel(t).then(L=>{r.value=lt.groupBy(L==null?void 0:L.data,"provider")})}function j(){var L;O.value.ttsModelId?(L=s.value)==null||L.reset_default(O.value.ttsModelId,t):X({})}function k(){O.value.ttsModelEnable||(O.value.ttsModelId="",O.value.ttsType="BROWSER")}function B(){O.value.sttModelEnable||(O.value.sttModelId="")}const q=()=>{var G;const L=O.value.ttsModelId;if(!L){Bp(Qt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(G=s.value)==null||G.open(L,t,O.value.tts_model_params_setting)},X=L=>{O.value.tts_model_params_setting=L},W=()=>{const L={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1};O.value.file_upload_enable&&(O.value.file_upload_setting=O.value.file_upload_setting||L),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},ee=()=>{var L;(L=h.value)==null||L.open(O.value.file_upload_setting)},J=L=>{O.value.file_upload_setting=L};return zo(()=>{lt.set(n.nodeModel,"validate",P),n.nodeModel.properties.nodeData.ttsType||lt.set(n.nodeModel.properties.nodeData,"ttsType","BROWSER"),R(),A()}),(L,G)=>{const Y=ce("el-input"),H=ce("el-form-item"),se=ce("el-tooltip"),Re=ce("el-icon"),Se=ce("el-button"),ze=ce("el-switch"),Be=ce("el-checkbox"),Oe=ce("ModelSelect"),ae=ce("el-radio"),ve=ce("el-radio-group"),Pe=ce("Operation"),Ke=ce("el-form");return nt(),Yt(Ji,{nodeModel:L.nodeModel},{default:U(()=>[F(Ke,{onSubmit:G[13]||(G[13]=Sn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:U(()=>[F(H,{label:L.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Jr(Qt)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(Y,{modelValue:O.value.name,"onUpdate:modelValue":G[0]||(G[0]=je=>O.value.name=je),maxlength:"64",placeholder:Jr(Qt)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:G[1]||(G[1]=je=>{var at;return O.value.name=(at=O.value.name)==null?void 0:at.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),F(H,{label:L.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:U(()=>[F(Y,{modelValue:O.value.desc,"onUpdate:modelValue":G[2]||(G[2]=je=>O.value.desc=je),placeholder:L.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),F(H,{label:L.$t("views.application.applicationForm.form.prologue")},{default:U(()=>[F(Dw,{onWheel:b,title:L.$t("views.application.applicationForm.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":G[3]||(G[3]=je=>O.value.prologue=je),style:{height:"150px"},onSubmitDialog:w},null,8,["title","modelValue"])]),_:1},8,["label"]),F(H,null,{label:U(()=>[me("div",SW,[me("div",AW,[me("span",TW,We(L.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),F(se,{effect:"dark",content:L.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:U(()=>[F(IM,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),me("div",null,[O.value.file_upload_enable?(nt(),Yt(Se,{key:0,type:"primary",link:"",onClick:ee,class:"mr-4"},{default:U(()=>[F(Re,{class:"mr-4"},{default:U(()=>[F(Jr(VI))]),_:1})]),_:1})):vr("",!0),F(ze,{size:"small",modelValue:O.value.file_upload_enable,"onUpdate:modelValue":G[4]||(G[4]=je=>O.value.file_upload_enable=je),onChange:W},null,8,["modelValue"])])])]),_:1}),F(cW,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":L.nodeModel},null,8,["node-model"]),F(qV,{ref_key:"ApiInputFieldTableFef",ref:v,"node-model":L.nodeModel},null,8,["node-model"]),F(H,null,{label:U(()=>[me("div",MW,[me("span",PW,We(L.$t("views.application.applicationForm.form.voiceInput.label")),1),me("div",NW,[O.value.sttModelEnable?(nt(),Yt(Be,{key:0,modelValue:O.value.sttAutoSend,"onUpdate:modelValue":G[5]||(G[5]=je=>O.value.sttAutoSend=je)},{default:U(()=>[Tt(We(L.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):vr("",!0),F(ze,{class:"ml-8",size:"small",modelValue:O.value.sttModelEnable,"onUpdate:modelValue":G[6]||(G[6]=je=>O.value.sttModelEnable=je),onChange:B},null,8,["modelValue"])])])]),default:U(()=>[Nl(F(Oe,{onWheel:b,modelValue:O.value.sttModelId,"onUpdate:modelValue":G[7]||(G[7]=je=>O.value.sttModelId=je),placeholder:L.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:o.value},null,8,["modelValue","placeholder","options"]),[[bv,O.value.sttModelEnable]])]),_:1}),F(H,null,{label:U(()=>[me("div",RW,[me("span",kW,We(L.$t("views.application.applicationForm.form.voicePlay.label")),1),me("div",CW,[O.value.ttsModelEnable?(nt(),Yt(Be,{key:0,modelValue:O.value.ttsAutoplay,"onUpdate:modelValue":G[8]||(G[8]=je=>O.value.ttsAutoplay=je)},{default:U(()=>[Tt(We(L.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):vr("",!0),F(ze,{class:"ml-8",size:"small",modelValue:O.value.ttsModelEnable,"onUpdate:modelValue":G[9]||(G[9]=je=>O.value.ttsModelEnable=je),onChange:k},null,8,["modelValue"])])])]),default:U(()=>[me("div",DW,[Nl(F(ve,{modelValue:O.value.ttsType,"onUpdate:modelValue":G[10]||(G[10]=je=>O.value.ttsType=je)},{default:U(()=>[F(ae,{label:L.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),F(ae,{label:L.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[bv,O.value.ttsModelEnable]])]),me("div",jW,[O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(nt(),Yt(Oe,{key:0,onWheel:b,modelValue:O.value.ttsModelId,"onUpdate:modelValue":G[11]||(G[11]=je=>O.value.ttsModelId=je),placeholder:L.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:G[12]||(G[12]=je=>j())},null,8,["modelValue","placeholder","options"])):vr("",!0),O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(nt(),Yt(Se,{key:1,onClick:q,disabled:!O.value.ttsModelId,class:"ml-8"},{default:U(()=>[F(Re,null,{default:U(()=>[F(Re,null,{default:U(()=>[F(Pe)]),_:1})]),_:1})]),_:1},8,["disabled"])):vr("",!0)])]),_:1})]),_:1},8,["model"]),F(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:X},null,512),F(xW,{ref_key:"FileUploadSettingDialogRef",ref:h,"node-model":L.nodeModel,onRefresh:J},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const LW=Xy(IW,[["__scopeId","data-v-56d80d58"]]);class FW extends Qi{constructor(t){super(t,LW)}}class $W extends ea{constructor(t,n){super(t,n)}get_width(){return 600}}const BW={type:"base-node",model:$W,view:FW},UW=Object.freeze(Object.defineProperty({__proto__:null,default:BW},Symbol.toStringTag,{value:"Module"})),GW={class:"flex-between lighter"},VW={key:0,class:"info"},WW={key:0,class:"mt-8"},zW=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:_y(),type:"IF",condition:"and"},{conditions:[],id:_y(),type:"ELSE",condition:"and"}]},o=P=>P.ctrlKey===!0?(P.preventDefault(),!0):(P.stopPropagation(),!0),r=(P,A,R)=>{const k=lt.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(B=>B.id===A.id?{...B,height:P.height,index:R}:B);lt.set(t.nodeModel.properties,"branchConditionList",k),b(t.nodeModel.properties.nodeData.branch,!0)},s=Oo({get:()=>(t.nodeModel.properties.nodeData||(lt.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:P=>{lt.set(t.nodeModel.properties,"nodeData",P)}}),c=Et(),v=Et(),h=()=>{var A;const P=[(A=c.value)==null?void 0:A.validate(),...v.value.map(R=>R.validate())];return Promise.all(P).catch(R=>Promise.reject({node:t.nodeModel,errMessage:R}))};function g(){const P=lt.cloneDeep(t.nodeModel.properties.nodeData.branch),A={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(P.length-1),id:_y(),condition:"and"};P.splice(P.length-1,0,A),b(P,!0),lt.set(t.nodeModel.properties.nodeData,"branch",P)}function b(P,A){const R=lt.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),j=P.map((k,B)=>{const q=R.find(X=>X.id===k.id);if(q)return{index:B,height:q.height,id:k.id};if(A)return{index:B,height:12,id:k.id}}).filter(k=>k);lt.set(t.nodeModel.properties,"branchConditionList",j),t.nodeModel.refreshBranch()}function w(P){const A=lt.cloneDeep(t.nodeModel.properties.nodeData.branch);A[P].conditions.push({field:[],compare:"",value:""}),lt.set(t.nodeModel.properties.nodeData,"branch",A)}function O(P,A){const R=lt.cloneDeep(t.nodeModel.properties.nodeData.branch);if(R[P].conditions.splice(A,1),R[P].conditions.length===0){const k=R.splice(P,1).map(B=>t.nodeModel.id+"_"+B.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(B=>k.includes(B.sourceAnchorId)).map(B=>B.id)),b(R,!1),R.forEach((B,q)=>{B.type==="ELSE IF "+(q+1)&&(B.type="ELSE IF "+q)})}lt.set(t.nodeModel.properties.nodeData,"branch",R)}function S(P,A,R){if(P==="is_null"||P==="is_not_null"){const j=lt.cloneDeep(t.nodeModel.properties.nodeData.branch);j[A].conditions[R].value=1,lt.set(t.nodeModel.properties.nodeData,"branch",j)}}return zo(()=>{lt.set(t.nodeModel,"validate",h)}),(P,A)=>{const R=ce("el-option"),j=ce("el-select"),k=ce("el-form-item"),B=ce("el-col"),q=ce("el-input"),X=ce("Delete"),W=ce("el-icon"),ee=ce("el-button"),J=ce("el-row"),L=ce("Plus"),G=ce("el-card"),Y=ce("el-form"),H=_v("resize");return nt(),Yt(Ji,{nodeModel:P.nodeModel},{default:U(()=>[F(Y,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:A[0]||(A[0]=Sn(()=>{},["prevent"]))},{default:U(()=>[(nt(!0),In(si,null,Zi(s.value.branch,(se,Re)=>Nl((nt(),Yt(G,{key:se.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:U(()=>[me("div",GW,[Tt(We(se.type)+" ",1),se.conditions.length>1?(nt(),In("div",VW,[me("span",null,We(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),F(j,{teleported:!1,modelValue:se.condition,"onUpdate:modelValue":Se=>se.condition=Se,size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[F(R,{label:P.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),F(R,{label:P.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),me("span",null,We(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):vr("",!0)]),Re!==s.value.branch.length-1?(nt(),In("div",WW,[(nt(!0),In(si,null,Zi(se.conditions,(Se,ze)=>(nt(),Yt(J,{key:ze,gutter:8},{default:U(()=>[F(B,{span:11},{default:U(()=>[F(k,{prop:"branch."+Re+".conditions."+ze+".field",rules:{type:"array",required:!0,message:P.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[F(yi,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:P.nodeModel,class:"w-full",placeholder:P.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Se.field,"onUpdate:modelValue":Be=>Se.field=Be},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),F(B,{span:6},{default:U(()=>[F(k,{prop:"branch."+Re+".conditions."+ze+".compare",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:U(()=>[F(j,{onWheel:o,teleported:!1,modelValue:Se.compare,"onUpdate:modelValue":Be=>Se.compare=Be,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:Be=>S(Be,Re,ze)},{default:U(()=>[(nt(!0),In(si,null,Zi(Jr(WI),(Be,Oe)=>(nt(),Yt(R,{key:Oe,label:Be.label,value:Be.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),F(B,{span:6},{default:U(()=>[Se.compare!=="is_null"&&Se.compare!=="is_not_null"?(nt(),Yt(k,{key:0,prop:"branch."+Re+".conditions."+ze+".value",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:U(()=>[F(q,{modelValue:Se.value,"onUpdate:modelValue":Be=>Se.value=Be,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):vr("",!0)]),_:2},1024),F(B,{span:1},{default:U(()=>[F(ee,{disabled:Re===0&&ze===0,link:"",type:"info",class:"mt-4",onClick:Be=>O(Re,ze)},{default:U(()=>[F(W,null,{default:U(()=>[F(X)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):vr("",!0),Re!==s.value.branch.length-1?(nt(),Yt(ee,{key:1,link:"",type:"primary",onClick:Se=>w(Re)},{default:U(()=>[F(W,{class:"mr-4"},{default:U(()=>[F(L)]),_:1}),Tt(" "+We(P.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):vr("",!0)]),_:2},1024)),[[H,Se=>r(Se,se,Re)]])),128)),F(ee,{link:"",type:"primary",onClick:g},{default:U(()=>[F(W,{class:"mr-4"},{default:U(()=>[F(L)]),_:1}),Tt(" "+We(P.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class HW extends Qi{constructor(t){super(t,zW)}}const XW=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class YW extends ea{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=XW(c,g);h.push({x:n+r/2-10,y:v?o-s/2+75+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return h}}const qW={type:"condition-node",model:YW,view:HW},KW=Object.freeze(Object.defineProperty({__proto__:null,default:qW},Symbol.toStringTag,{value:"Module"})),ZW={class:"title-decoration-1 mb-8"},JW=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},o=Oo({get:()=>(t.nodeModel.properties.nodeData||lt.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{lt.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=ce("el-form-item"),v=ce("el-form"),h=ce("el-card");return nt(),Yt(Ji,{nodeModel:r.nodeModel},{default:U(()=>[me("h5",ZW,We(r.$t("views.applicationWorkflow.nodeSetting")),1),F(h,{shadow:"never",class:"card-never"},{default:U(()=>[F(v,{onSubmit:s[1]||(s[1]=Sn(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:U(()=>[F(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:U(()=>[F(yi,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:o.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let QW=class extends Qi{constructor(t){super(t,JW)}};const ez={type:"document-extract-node",model:ea,view:QW},tz=Object.freeze(Object.defineProperty({__proto__:null,default:ez},Symbol.toStringTag,{value:"Module"})),nz={class:"dialog-footer"},rz=$r({__name:"AddFormCollect",props:{title:{default:Qt("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=Et(!1),s=Et(),c=Et({}),v=Et(!1),h=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var w;(w=s.value)==null||w.validate().then(()=>{var O;o.addFormField((O=s.value)==null?void 0:O.getData()),g()})};return t({close:g,open:h}),(w,O)=>{const S=ce("el-button"),P=ce("el-dialog");return nt(),Yt(P,{title:w.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:U(()=>[me("span",nz,[F(S,{onClick:O[1]||(O[1]=Sn(A=>r.value=!1,["prevent"]))},{default:U(()=>[Tt(We(w.$t("common.cancel")),1)]),_:1}),F(S,{type:"primary",onClick:O[2]||(O[2]=A=>b()),loading:v.value},{default:U(()=>[Tt(We(w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(Iw,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),oz={class:"dialog-footer"},iz=$r({__name:"EditFormCollect",props:{title:{default:Qt("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=Et(!1),s=Et(),c=Et({}),v=Et(0),h=Et(!1),g=(O,S)=>{r.value=!0,c.value=O,v.value=S},b=()=>{r.value=!1,c.value={}},w=()=>{var O;(O=s.value)==null||O.validate().then(()=>{var S;o.editFormField((S=s.value)==null?void 0:S.getData(),v.value),b()})};return t({close:b,open:g}),(O,S)=>{const P=ce("el-button"),A=ce("el-dialog");return nt(),Yt(A,{title:O.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=R=>r.value=R),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:U(()=>[me("span",oz,[F(P,{onClick:S[1]||(S[1]=Sn(R=>r.value=!1,["prevent"]))},{default:U(()=>[Tt(We(O.$t("common.cancel")),1)]),_:1}),F(P,{type:"primary",onClick:S[2]||(S[2]=R=>w()),loading:h.value},{default:U(()=>[Tt(We(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(Iw,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=R=>c.value=R),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),az={class:"title-decoration-1 mb-8"},lz={class:"flex align-center"},uz={class:"mr-4"},sz={class:"flex-between"},cz={class:"lighter"},fz=["title"],dz={key:0},pz=["title"],hz={key:1},vz=["title"],yz=["title"],mz={class:"mr-4"},gz=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Et(),o=Et(),r=(k,B)=>{const q=S.value.form_field_list.map((X,W)=>B===W?lt.cloneDeep(k):lt.cloneDeep(X));S.value.form_field_list=q,c()},s=k=>{if(S.value.form_field_list.some(B=>B.field===k.field)){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+k.field);return}S.value.form_field_list=lt.cloneDeep([...S.value.form_field_list,k]),c()},c=()=>{const k=[{label:Qt("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"formData"},...S.value.form_field_list.map(B=>({value:B.field,label:typeof B.label=="string"?B.label:B.label.label}))];lt.set(t.nodeModel.properties.config,"fields",k),t.nodeModel.clear_next_node_field(!1),j()},v=Et(),h=Et(),g=()=>{var k;(k=v.value)==null||k.open()},b=(k,B)=>{var q;(q=h.value)==null||q.open(lt.cloneDeep(k),B)},w=k=>{S.value.form_field_list=S.value.form_field_list.filter(B=>B.field!==k.field),c()},O=Et({isResult:!0,form_content_format:`${Qt("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Qt("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),S=Oo({get:()=>(t.nodeModel.properties.nodeData||lt.set(t.nodeModel.properties,"nodeData",O.value),t.nodeModel.properties.nodeData),set:k=>{lt.set(t.nodeModel.properties,"nodeData",k)}}),P=k=>{var B;if(k.default_value){const q=(B=k.option_list)==null?void 0:B.filter(X=>k.default_value.indexOf(X.value)>-1).map(X=>X.label).join(",");return q||k.default_value}if(k.default_value!==void 0)return k.default_value},A=()=>{var k;return(k=n.value)==null?void 0:k.validate()};function R(k){lt.set(t.nodeModel.properties.nodeData,"form_content_format",k)}function j(){if(!o.value)return;const B=o.value.$el.querySelector(".el-table__body-wrapper tbody");B&&hr.create(B,{animation:150,ghostClass:"ghost-row",onEnd:q=>{if(q.oldIndex===void 0||q.newIndex===void 0)return;const X=[...S.value.form_field_list],[W]=X.splice(q.oldIndex,1);X.splice(q.newIndex,0,W),S.value.form_field_list=X,c()}})}return zo(()=>{lt.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(k,B)=>{const q=ce("AppIcon"),X=ce("el-tooltip"),W=ce("MdEditorMagnify"),ee=ce("el-form-item"),J=ce("Plus"),L=ce("el-icon"),G=ce("el-button"),Y=ce("el-table-column"),H=ce("el-tag"),se=ce("el-switch"),Re=ce("EditPen"),Se=ce("Delete"),ze=ce("el-table"),Be=ce("el-form"),Oe=ce("el-card");return nt(),Yt(Ji,{nodeModel:k.nodeModel},{default:U(()=>[me("h5",az,We(k.$t("views.applicationWorkflow.nodeSetting")),1),F(Oe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(Be,{onSubmit:B[4]||(B[4]=Sn(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:U(()=>[F(ee,{label:k.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",lz,[me("div",uz,[me("span",null,[Tt(We(k.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),B[5]||(B[5]=me("span",{class:"danger"},"*",-1))])]),F(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:U(()=>[F(q,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(W,{title:k.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:S.value.form_content_format,"onUpdate:modelValue":B[0]||(B[0]=ae=>S.value.form_content_format=ae),style:{height:"150px"},onSubmitDialog:R},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(ee,{label:k.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:B[3]||(B[3]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",sz,[me("h5",cz,We(k.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),F(G,{link:"",type:"primary",onClick:B[1]||(B[1]=ae=>g())},{default:U(()=>[F(L,{class:"mr-4"},{default:U(()=>[F(J)]),_:1}),Tt(" "+We(k.$t("common.add")),1)]),_:1})])]),default:U(()=>[S.value.form_field_list.length>0?(nt(),Yt(ze,{key:0,class:"border",data:S.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:U(()=>[F(Y,{prop:"field",label:k.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:ae})=>[me("span",{title:ae.field,class:"ellipsis-1"},We(ae.field),9,fz)]),_:1},8,["label"]),F(Y,{prop:"label",label:k.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:ae})=>[ae.label&&ae.label.input_type==="TooltipLabel"?(nt(),In("span",dz,[me("span",{title:ae.label.label,class:"ellipsis-1"},We(ae.label.label),9,pz)])):(nt(),In("span",hz,[me("span",{title:ae.label,class:"ellipsis-1"},We(ae.label),9,vz)]))]),_:1},8,["label"]),F(Y,{label:k.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:U(({row:ae})=>[F(H,{type:"info",class:"info-tag"},{default:U(()=>{var ve;return[Tt(We((ve=Jr(zI).find(Pe=>Pe.value===ae.input_type))==null?void 0:ve.label),1)]}),_:2},1024)]),_:1},8,["label"]),F(Y,{prop:"default_value",label:k.$t("dynamicsForm.default.label")},{default:U(({row:ae})=>[me("span",{title:ae.default_value,class:"ellipsis-1"},We(P(ae)),9,yz)]),_:1},8,["label"]),F(Y,{label:k.$t("common.required"),width:"85"},{default:U(({row:ae})=>[me("div",{onClick:B[2]||(B[2]=Sn(()=>{},["stop"]))},[F(se,{disabled:"",size:"small",modelValue:ae.required,"onUpdate:modelValue":ve=>ae.required=ve},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(Y,{label:k.$t("common.operation"),align:"left",width:"90"},{default:U(({row:ae,$index:ve})=>[me("span",mz,[F(X,{effect:"dark",content:k.$t("common.modify"),placement:"top"},{default:U(()=>[F(G,{type:"primary",text:"",onClick:Sn(Pe=>b(ae,ve),["stop"])},{default:U(()=>[F(L,null,{default:U(()=>[F(Re)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(X,{effect:"dark",content:k.$t("common.delete"),placement:"top"},{default:U(()=>[F(G,{type:"primary",text:"",onClick:Pe=>w(ae)},{default:U(()=>[F(L,null,{default:U(()=>[F(Se)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):vr("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(rz,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),F(iz,{ref_key:"editFormCollectRef",ref:h,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class bz extends Qi{constructor(t){super(t,gz)}}const _z={type:"form-node",model:ea,view:bz},wz=Object.freeze(Object.defineProperty({__proto__:null,default:_z},Symbol.toStringTag,{value:"Module"})),Ez={class:"title-decoration-1 mb-16"},Oz={class:"lighter mb-8"},xz={key:0},Sz={class:"flex-between"},Az={class:"flex"},Tz={class:"flex"},Mz={key:0,class:"danger"},Pz={class:"flex align-center"},Nz={class:"mr-4"},Rz=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Et(),{params:{id:o}}=Vu.config.globalProperties.$route,r={inputFieldList:[],isResult:!1},s=Oo({get:()=>(t.nodeModel.properties.nodeData||lt.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:g=>{lt.set(t.nodeModel.properties,"nodeData",g)}}),c=Et(),v=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},h=()=>{if(!t.nodeModel.properties.nodeData.function_lib_id){lt.set(t.nodeModel.properties,"status",500);return}Aa.getFunctionLib(o,t.nodeModel.properties.nodeData.function_lib_id).then(g=>{const b=t.nodeModel.properties.nodeData.inputFieldList,w=g.data.inputFieldList.map(O=>{const S=b.find(P=>P.name==O.name);return S&&S.source==O.source?{...O,value:JSON.parse(JSON.stringify(S.value))}:{...O,value:O.source=="reference"?[]:""}});lt.set(t.nodeModel.properties.nodeData,"inputFieldList",w),lt.set(t.nodeModel.properties,"status",g.data.isActive?200:500)}).catch(g=>{lt.set(t.nodeModel.properties,"status",500)})};return zo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Yp(t.nodeModel)&&lt.set(t.nodeModel.properties.nodeData,"isResult",!0),h(),lt.set(t.nodeModel,"validate",v)}),(g,b)=>{const w=ce("auto-tooltip"),O=ce("el-tag"),S=ce("el-input"),P=ce("el-form-item"),A=ce("el-text"),R=ce("el-card"),j=ce("AppIcon"),k=ce("el-tooltip"),B=ce("el-switch"),q=ce("el-form");return nt(),Yt(Ji,{nodeModel:g.nodeModel},{default:U(()=>[me("h5",Ez,We(g.$t("views.applicationWorkflow.nodeSetting")),1),me("h5",Oz,We(g.$t("common.param.inputParam")),1),F(q,{onSubmit:b[2]||(b[2]=Sn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[F(R,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var X;return[((X=s.value.inputFieldList)==null?void 0:X.length)>0?(nt(),In("div",xz,[(nt(!0),In(si,null,Zi(s.value.inputFieldList,(W,ee)=>(nt(),Yt(P,{key:W.name,label:W.name,prop:"inputFieldList."+ee+".value",rules:{required:W.is_required,message:W.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[me("div",Sz,[me("div",Az,[me("span",Tz,[F(w,{content:W.name,style:{"max-width":"130px"}},{default:U(()=>[Tt(We(W.name),1)]),_:2},1032,["content"]),W.is_required?(nt(),In("span",Mz,"*")):vr("",!0)]),F(O,{type:"info",class:"info-tag ml-4"},{default:U(()=>[Tt(We(W.type),1)]),_:2},1024)])])]),default:U(()=>[W.source==="reference"?(nt(),Yt(yi,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:W.value,"onUpdate:modelValue":J=>W.value=J},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(nt(),Yt(S,{key:1,modelValue:W.value,"onUpdate:modelValue":J=>W.value=J,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(nt(),Yt(A,{key:1,type:"info"},{default:U(()=>[Tt(We(g.$t("common.noData")),1)]),_:1}))]}),_:1}),F(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",Pz,[me("div",Nz,[me("span",null,[Tt(We(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[3]||(b[3]=me("span",{class:"danger"},"*",-1))])]),F(k,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(B,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[0]||(b[0]=X=>s.value.isResult=X)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class kz extends Qi{constructor(t){super(t,Rz)}}const Cz={type:"function-lib-node",model:ea,view:kz},Dz=Object.freeze(Object.defineProperty({__proto__:null,default:Cz},Symbol.toStringTag,{value:"Module"})),jz={class:"title-decoration-1 mb-16"},Iz={class:"flex-between"},Lz={class:"lighter mb-8"},Fz={key:0},$z={class:"flex-between"},Bz={class:"flex"},Uz={class:"flex"},Gz={key:0,class:"danger"},Vz={class:"lighter mb-8"},Wz={key:0,class:"mb-8"},zz={class:"flex align-center"},Hz={class:"mr-4"},Xz=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=Et(),r=Et(),s={code:"",inputFieldList:[],isResult:!1},c=Et(null),v=Et(!1),h=Oo({get:()=>(t.nodeModel.properties.nodeData||lt.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:A=>{lt.set(t.nodeModel.properties,"nodeData",A)}}),g=Et(),b=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(R=>Promise.reject({node:t.nodeModel,errMessage:R}))};function w(A){lt.set(t.nodeModel.properties.nodeData,"code",A)}function O(A,R){typeof R<"u"&&(c.value=R),o.value.open(A)}function S(A){const R=lt.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);R.splice(A,1),lt.set(t.nodeModel.properties.nodeData,"inputFieldList",R)}function P(A){const R=lt.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),j={...A,value:A.source==="reference"?[]:""};c.value!==null?R.splice(c.value,1,j):R.push(j),lt.set(t.nodeModel.properties.nodeData,"inputFieldList",R),c.value=null}return zo(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&Yp(t.nodeModel)&&lt.set(t.nodeModel.properties.nodeData,"isResult",!0),lt.set(t.nodeModel,"validate",b),setTimeout(()=>{v.value=!0},100)}),(A,R)=>{const j=ce("Plus"),k=ce("el-icon"),B=ce("el-button"),q=ce("auto-tooltip"),X=ce("el-tag"),W=ce("EditPen"),ee=ce("Delete"),J=ce("el-input"),L=ce("el-form-item"),G=ce("el-text"),Y=ce("el-card"),H=ce("CodemirrorEditor"),se=ce("AppIcon"),Re=ce("el-tooltip"),Se=ce("el-switch"),ze=ce("el-form");return nt(),Yt(Ji,{nodeModel:A.nodeModel},{default:U(()=>[me("h5",jz,We(A.$t("views.applicationWorkflow.nodeSetting")),1),me("div",Iz,[me("h5",Lz,We(A.$t("common.param.inputParam")),1),F(B,{link:"",type:"primary",onClick:R[0]||(R[0]=Be=>O())},{default:U(()=>[F(k,{class:"mr-4"},{default:U(()=>[F(j)]),_:1}),Tt(" "+We(A.$t("common.add")),1)]),_:1})]),F(ze,{onSubmit:R[4]||(R[4]=Sn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:h.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[F(Y,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var Be;return[((Be=h.value.inputFieldList)==null?void 0:Be.length)>0?(nt(),In("div",Fz,[(nt(!0),In(si,null,Zi(h.value.inputFieldList,(Oe,ae)=>(nt(),Yt(L,{key:ae,label:Oe.name,prop:"inputFieldList."+ae+".value",rules:{required:Oe.is_required,message:Oe.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[me("div",$z,[me("div",Bz,[me("span",Uz,[F(q,{content:Oe.name,style:{"max-width":"130px"}},{default:U(()=>[Tt(We(Oe.name),1)]),_:2},1032,["content"]),Oe.is_required?(nt(),In("span",Gz,"*")):vr("",!0)]),F(X,{type:"info",class:"info-tag ml-4"},{default:U(()=>[Tt(We(Oe.type),1)]),_:2},1024)]),me("div",null,[F(B,{text:"",onClick:Sn(ve=>O(Oe,ae),["stop"])},{default:U(()=>[F(k,null,{default:U(()=>[F(W)]),_:1})]),_:2},1032,["onClick"]),F(B,{text:"",onClick:ve=>S(ae),style:{"margin-left":"4px !important"}},{default:U(()=>[F(k,null,{default:U(()=>[F(ee)]),_:1})]),_:2},1032,["onClick"])])])]),default:U(()=>[Oe.source==="reference"?(nt(),Yt(yi,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Oe.value,"onUpdate:modelValue":ve=>Oe.value=ve,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(nt(),Yt(J,{key:1,modelValue:Oe.value,"onUpdate:modelValue":ve=>Oe.value=ve,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(nt(),Yt(G,{key:1,type:"info"},{default:U(()=>[Tt(We(A.$t("common.noData")),1)]),_:1}))]}),_:1}),me("h5",Vz,We(A.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(nt(),In("div",Wz,[F(H,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:h.value.code,"onUpdate:modelValue":R[1]||(R[1]=Be=>h.value.code=Be),onWheel:n,style:{height:"130px !important"},onSubmitDialog:w},null,8,["title","modelValue"])])):vr("",!0),F(L,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:R[3]||(R[3]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",zz,[me("div",Hz,[me("span",null,[Tt(We(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),R[5]||(R[5]=me("span",{class:"danger"},"*",-1))])]),F(Re,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(se,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Se,{size:"small",modelValue:h.value.isResult,"onUpdate:modelValue":R[2]||(R[2]=Be=>h.value.isResult=Be)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),F(AL,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class Yz extends Qi{constructor(t){super(t,Xz)}}const qz={type:"function-node",model:ea,view:Yz},Kz=Object.freeze(Object.defineProperty({__proto__:null,default:qz},Symbol.toStringTag,{value:"Module"})),Zz={class:"title-decoration-1 mb-8"},Jz={class:"flex-between w-full"},Qz={class:"flex align-center"},eH={class:"mr-4"},tH={class:"flex align-center"},nH={class:"mr-4"},rH={class:"flex align-center"},oH={class:"mr-4"},iH=$r({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Tf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=Et(null),s=Et(),c=Et(),v=()=>{var k;return(k=c.value)==null?void 0:k.validate().catch(B=>Promise.reject({node:o.nodeModel,errMessage:B}))},h=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),b={modelId:"",system:"",prompt:`{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},w=Oo({get:()=>(o.nodeModel.properties.nodeData||lt.set(o.nodeModel.properties,"nodeData",b),o.nodeModel.properties.nodeData),set:k=>{lt.set(o.nodeModel.properties,"nodeData",k)}});function O(){n?Aa.getApplicationTTIModel(n).then(k=>{r.value=lt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{r.value=lt.groupBy(k==null?void 0:k.data,"provider")})}const S=()=>{var k;w.value.modelId?(k=s.value)==null||k.reset_default(w.value.modelId,n):A({})},P=k=>{var B;k&&((B=s.value)==null||B.open(k,n,w.value.modelParamsSetting))};function A(k){lt.set(o.nodeModel.properties.nodeData,"modelParamsSetting",k)}function R(k){lt.set(o.nodeModel.properties.nodeData,"prompt",k)}function j(k){lt.set(o.nodeModel.properties.nodeData,"negative_prompt",k)}return zo(()=>{O(),lt.set(o.nodeModel,"validate",v)}),(k,B)=>{const q=ce("Setting"),X=ce("el-icon"),W=ce("el-button"),ee=ce("el-form-item"),J=ce("AppIcon"),L=ce("el-tooltip"),G=ce("MdEditorMagnify"),Y=ce("el-switch"),H=ce("el-form"),se=ce("el-card");return nt(),Yt(Ji,{"node-model":k.nodeModel},{default:U(()=>[me("h5",Zz,We(k.$t("views.applicationWorkflow.nodeSetting")),1),F(se,{shadow:"never",class:"card-never"},{default:U(()=>[F(H,{onSubmit:B[6]||(B[6]=Sn(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(ee,{label:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[me("div",Jz,[me("div",null,[me("span",null,[Tt(We(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),B[7]||(B[7]=me("span",{class:"danger"},"*",-1))])]),F(W,{disabled:!w.value.modelId,type:"primary",link:"",onClick:B[0]||(B[0]=Re=>P(w.value.modelId)),onRefreshForm:A},{default:U(()=>[F(X,null,{default:U(()=>[F(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(jM,{onChange:S,onWheel:h,teleported:!1,modelValue:w.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Re=>w.value.modelId=Re),placeholder:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(ee,{label:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",Qz,[me("div",eH,[me("span",null,[Tt(We(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),B[8]||(B[8]=me("span",{class:"danger"},"*",-1))])]),F(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:U(()=>[F(J,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(G,{onWheel:h,title:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:w.value.prompt,"onUpdate:modelValue":B[2]||(B[2]=Re=>w.value.prompt=Re),style:{height:"150px"},onSubmitDialog:R},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(ee,{label:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",tH,[me("div",nH,[me("span",null,We(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),F(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:U(()=>[F(J,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(G,{onWheel:h,title:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:w.value.negative_prompt,"onUpdate:modelValue":B[3]||(B[3]=Re=>w.value.negative_prompt=Re),placeholder:k.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:j},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),F(ee,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[5]||(B[5]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",rH,[me("div",oH,[me("span",null,[Tt(We(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),B[9]||(B[9]=me("span",{class:"danger"},"*",-1))])]),F(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(J,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Y,{size:"small",modelValue:w.value.isResult,"onUpdate:modelValue":B[4]||(B[4]=Re=>w.value.isResult=Re)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(ab,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});let aH=class extends Qi{constructor(t){super(t,iH)}};const lH={type:"image-generate-node",model:ea,view:aH},uH=Object.freeze(Object.defineProperty({__proto__:null,default:lH},Symbol.toStringTag,{value:"Module"})),sH={class:"title-decoration-1 mb-8"},cH={class:"flex-between w-full"},fH={class:"flex align-center"},dH={class:"mr-4"},pH={class:"flex-between"},hH={class:"flex align-center"},vH={class:"mr-4"},yH=$r({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Tf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=Et(null),s=Et(),c=Et(),v=Et(),h=()=>{var k;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(k=c.value)==null?void 0:k.validate()]).catch(B=>Promise.reject({node:o.nodeModel,errMessage:B}))},g=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),w={modelId:"",system:"",prompt:`{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},O=Oo({get:()=>(o.nodeModel.properties.nodeData||lt.set(o.nodeModel.properties,"nodeData",w),o.nodeModel.properties.nodeData),set:k=>{lt.set(o.nodeModel.properties,"nodeData",k)}});function S(){n?Aa.getApplicationImageModel(n).then(k=>{r.value=lt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{r.value=lt.groupBy(k==null?void 0:k.data,"provider")})}function P(k){lt.set(o.nodeModel.properties.nodeData,"system",k)}function A(k){lt.set(o.nodeModel.properties.nodeData,"prompt",k)}const R=k=>{var B;k&&((B=s.value)==null||B.open(k,n,O.value.modelParamsSetting))};function j(k){lt.set(o.nodeModel.properties.nodeData,"modelParamsSetting",k)}return zo(()=>{S(),lt.set(o.nodeModel,"validate",h)}),(k,B)=>{const q=ce("Setting"),X=ce("el-icon"),W=ce("el-button"),ee=ce("ModelSelect"),J=ce("el-form-item"),L=ce("MdEditorMagnify"),G=ce("AppIcon"),Y=ce("el-tooltip"),H=ce("el-option"),se=ce("el-select"),Re=ce("el-input-number"),Se=ce("el-switch"),ze=ce("el-form"),Be=ce("el-card");return nt(),Yt(Ji,{"node-model":k.nodeModel},{default:U(()=>[me("h5",sH,We(k.$t("views.applicationWorkflow.nodeSetting")),1),F(Be,{shadow:"never",class:"card-never"},{default:U(()=>[F(ze,{onSubmit:B[9]||(B[9]=Sn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(J,{label:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[me("div",cH,[me("div",null,[me("span",null,[Tt(We(Jr(Qt)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),B[10]||(B[10]=me("span",{class:"danger"},"*",-1))])]),F(W,{disabled:!O.value.modelId,type:"primary",link:"",onClick:B[0]||(B[0]=Oe=>R(O.value.modelId)),onRefreshForm:j},{default:U(()=>[F(X,null,{default:U(()=>[F(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(ee,{onWheel:g,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Oe=>O.value.modelId=Oe),placeholder:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(J,{label:k.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(L,{title:k.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=Oe=>O.value.system=Oe),style:{height:"100px"},onSubmitDialog:P,placeholder:k.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(J,{label:k.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",fH,[me("div",dH,[me("span",null,[Tt(We(k.$t("views.application.applicationForm.form.prompt.label")),1),B[11]||(B[11]=me("span",{class:"danger"},"*",-1))])]),F(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(L,{onWheel:g,title:k.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=Oe=>O.value.prompt=Oe),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(J,null,{label:U(()=>[me("div",pH,[me("div",null,We(k.$t("views.application.applicationForm.form.historyRecord.label")),1),F(se,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":B[4]||(B[4]=Oe=>O.value.dialogue_type=Oe),type:"small",style:{width:"100px"}},{default:U(()=>[F(H,{label:k.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),F(H,{label:k.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[F(Re,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":B[5]||(B[5]=Oe=>O.value.dialogueNumber=Oe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),F(J,{label:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),B[12]||(B[12]=me("span",{class:"danger"},"*",-1))]),default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:v,nodeModel:k.nodeModel,class:"w-full",placeholder:k.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.imageList,"onUpdate:modelValue":B[6]||(B[6]=Oe=>O.value.imageList=Oe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(J,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[8]||(B[8]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",hH,[me("div",vH,[me("span",null,[Tt(We(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),B[13]||(B[13]=me("span",{class:"danger"},"*",-1))])]),F(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Se,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":B[7]||(B[7]=Oe=>O.value.isResult=Oe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(ab,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});let mH=class extends Qi{constructor(t){super(t,yH)}};const gH={type:"image-understand-node",model:ea,view:mH},bH=Object.freeze(Object.defineProperty({__proto__:null,default:gH},Symbol.toStringTag,{value:"Module"})),_H={class:"title-decoration-1 mb-8"},wH={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},EH={class:"flex-between"},OH={class:"ml-4"},xH={class:"title-decoration-1 mb-8"},SH={key:0,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},AH={class:"flex-between"},TH={key:0,class:"danger"},MH={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},PH={class:"flex-between"},NH={key:0,class:"danger"},RH=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,kH=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Et(),o=Et(!1),r=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),s={mcp_tool:"",mcp_tools:[],mcp_servers:{url:"",transport:"sse"},mcp_server:"",tool_params:{},tool_form_field:[],params_nested:""};function c(O){lt.set(t.nodeModel.properties.node_data,"mcp_servers",O)}function v(){if(!g.value.mcp_servers){xa(Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(g.value.mcp_servers)}catch{xa(Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}console.log("mcp_servers",g.value.mcp_servers),Aa.getMcpTools({mcp_servers:g.value.mcp_servers},o).then(O=>{g.value.mcp_tools=O.data,Bp(Qt("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess"))})}function h(){var S,P,A,R;g.value.mcp_server=g.value.mcp_tools.filter(j=>j.name===g.value.mcp_tool)[0].server;const O=g.value.mcp_tools.filter(j=>j.name===g.value.mcp_tool)[0].args_schema;g.value.tool_form_field=[];for(const j in O.properties){let k=O.properties[j].properties;if(k){g.value.params_nested=j;for(const B in k)g.value.tool_form_field.push({field:B,label:{input_type:"TooltipLabel",label:B,attrs:{tooltip:k[B].description},props_info:{}},input_type:"TextInput",source:"custom",required:((S=O.properties[j].required)==null?void 0:S.indexOf(B))!==-1,props_info:{rules:[{required:((P=O.properties[j].required)==null?void 0:P.indexOf(B))!==-1,message:Qt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}else g.value.params_nested="",g.value.tool_form_field.push({field:j,label:{input_type:"TooltipLabel",label:j,attrs:{tooltip:O.properties[j].description},props_info:{}},input_type:"TextInput",source:"custom",required:((A=O.required)==null?void 0:A.indexOf(j))!==-1,props_info:{rules:[{required:((R=O.required)==null?void 0:R.indexOf(j))!==-1,message:Qt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}g.value.params_nested?g.value.tool_params={[g.value.params_nested]:{}}:g.value.tool_params={}}const g=Oo({get:()=>(t.nodeModel.properties.node_data||lt.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:O=>{lt.set(t.nodeModel.properties,"node_data",O)}}),b=Et(),w=async()=>{var S,P;let O=[(S=b.value)==null?void 0:S.validate(),(P=n.value)==null?void 0:P.validate()];return Promise.all(O).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};return zo(()=>{var O;typeof((O=t.nodeModel.properties.node_data)==null?void 0:O.is_result)>"u"&&Yp(t.nodeModel)&&lt.set(t.nodeModel.properties.node_data,"is_result",!0),lt.set(t.nodeModel,"validate",w)}),(O,S)=>{const P=ce("MdEditorMagnify"),A=ce("el-form-item"),R=ce("Plus"),j=ce("el-icon"),k=ce("el-button"),B=ce("AppIcon"),q=ce("el-tooltip"),X=ce("el-option"),W=ce("el-select"),ee=ce("el-form"),J=ce("el-input"),L=_v("loading");return nt(),Yt(Ji,{nodeModel:O.nodeModel},{default:U(()=>[me("h5",_H,We(O.$t("views.applicationWorkflow.nodeSetting")),1),me("div",wH,[F(ee,{onSubmit:S[3]||(S[3]=Sn(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:b,"hide-required-asterisk":""},{default:U(()=>[F(A,{label:"MCP Server Config"},{default:U(()=>[F(P,{onWheel:r,title:"MCP Server Config",modelValue:g.value.mcp_servers,"onUpdate:modelValue":S[0]||(S[0]=G=>g.value.mcp_servers=G),style:{height:"150px"},onSubmitDialog:c,placeholder:RH},null,8,["modelValue"])]),_:1}),F(A,null,{label:U(()=>[me("div",EH,[me("span",null,We(O.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),F(k,{type:"primary",link:"",onClick:S[1]||(S[1]=G=>v())},{default:U(()=>[F(j,{class:"mr-4"},{default:U(()=>[F(R)]),_:1}),Tt(" "+We(O.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:U(()=>[F(W,{modelValue:g.value.mcp_tool,"onUpdate:modelValue":S[2]||(S[2]=G=>g.value.mcp_tool=G),onChange:h},{default:U(()=>[(nt(!0),In(si,null,Zi(g.value.mcp_tools,G=>(nt(),Yt(X,{key:G.value,label:G.name,value:G.name,class:"flex align-center"},{default:U(()=>[F(q,{effect:"dark",content:G.description,placement:"top-start","popper-class":"max-w-350"},{default:U(()=>[F(B,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),me("span",OH,We(G.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),me("h5",xH,We(O.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),g.value.tool_params[g.value.params_nested]?(nt(),In("div",SH,[g.value.mcp_tool?Nl((nt(),Yt(ee,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[5]||(S[5]=Sn(()=>{},["prevent"]))},{default:U(()=>[(nt(!0),In(si,null,Zi(g.value.tool_form_field,G=>(nt(),Yt(A,{key:G.field,rules:[G.props_info.rules],required:G.required},{label:U(()=>[me("div",AH,[me("div",null,[F(ES,{label:G.label.label,tooltip:G.label.attrs.tooltip},null,8,["label","tooltip"]),G.required?(nt(),In("span",TH,"*")):vr("",!0)]),F(W,{teleported:!1,modelValue:G.source,"onUpdate:modelValue":Y=>G.source=Y,size:"small",style:{width:"85px"},onChange:S[4]||(S[4]=Y=>g.value.tool_params[g.value.params_nested]={})},{default:U(()=>[F(X,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(X,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[G.source==="custom"?(nt(),Yt(J,{key:0,modelValue:g.value.tool_params[g.value.params_nested][G.label.label],"onUpdate:modelValue":Y=>g.value.tool_params[g.value.params_nested][G.label.label]=Y},null,8,["modelValue","onUpdate:modelValue"])):(nt(),Yt(yi,{key:1,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[g.value.params_nested][G.label.label],"onUpdate:modelValue":Y=>g.value.tool_params[g.value.params_nested][G.label.label]=Y},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["rules","required"]))),128))]),_:1})),[[L,o.value]]):vr("",!0)])):(nt(),In("div",MH,[g.value.mcp_tool?Nl((nt(),Yt(ee,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[6]||(S[6]=Sn(()=>{},["prevent"]))},{default:U(()=>[(nt(!0),In(si,null,Zi(g.value.tool_form_field,G=>(nt(),Yt(A,{key:G.field,rules:[G.props_info.rules],required:G.required},{label:U(()=>[me("div",PH,[me("div",null,[F(ES,{label:G.label.label,tooltip:G.label.attrs.tooltip},null,8,["label","tooltip"]),G.required?(nt(),In("span",NH,"*")):vr("",!0)]),F(W,{teleported:!1,modelValue:G.source,"onUpdate:modelValue":Y=>G.source=Y,size:"small",style:{width:"85px"}},{default:U(()=>[F(X,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(X,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[G.source==="custom"?(nt(),Yt(J,{key:0,modelValue:g.value.tool_params[G.label.label],"onUpdate:modelValue":Y=>g.value.tool_params[G.label.label]=Y},null,8,["modelValue","onUpdate:modelValue"])):(nt(),Yt(yi,{key:1,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[G.label.label],"onUpdate:modelValue":Y=>g.value.tool_params[G.label.label]=Y},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["rules","required"]))),128))]),_:1})),[[L,o.value]]):vr("",!0)]))]),_:1},8,["nodeModel"])}}});class CH extends Qi{constructor(t){super(t,kH)}}const DH={type:"mcp-node",model:ea,view:CH},jH=Object.freeze(Object.defineProperty({__proto__:null,default:DH},Symbol.toStringTag,{value:"Module"})),IH={class:"title-decoration-1 mb-8"},LH={class:"flex-between"},FH={class:"flex align-center"},$H={class:"mr-4"},BH={class:"flex align-center"},UH={class:"mr-4"},GH=$r({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Tf(),n=Et(),o=k=>k.ctrlKey===!0?(k.preventDefault(),!0):(k.stopPropagation(),!0),r=k=>{var B;k?(B=n.value)==null||B.reset_default(k,v):b({})};function s(k){lt.set(S.nodeModel.properties.nodeData,"prompt",k)}function c(k){lt.set(S.nodeModel.properties.nodeData,"system",k)}const{params:{id:v}}=Vu.config.globalProperties.$route,h=`${Qt("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Qt("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={modelId:"",system:Qt("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:h,dialogueNumber:1,isResult:!1};function b(k){lt.set(S.nodeModel.properties.nodeData,"modelParamsSetting",k)}const w=k=>{var B;k&&((B=n.value)==null||B.open(k,v,O.value.modelParamsSetting))},O=Oo({get:()=>(S.nodeModel.properties.nodeData||lt.set(S.nodeModel.properties,"nodeData",g),S.nodeModel.properties.nodeData),set:k=>{lt.set(S.nodeModel.properties,"nodeData",k)}}),S=e,P=Et(),A=Et(null),R=()=>{var k;return(k=P.value)==null?void 0:k.validate().catch(B=>Promise.reject({node:S.nodeModel,errMessage:B}))};function j(){v?Aa.getApplicationModel(v).then(k=>{A.value=lt.groupBy(k==null?void 0:k.data,"provider")}):t.asyncGetModel().then(k=>{A.value=lt.groupBy(k==null?void 0:k.data,"provider")})}return zo(()=>{var k;j(),typeof((k=S.nodeModel.properties.nodeData)==null?void 0:k.isResult)>"u"&&Yp(S.nodeModel)&&lt.set(S.nodeModel.properties.nodeData,"isResult",!0),lt.set(S.nodeModel,"validate",R)}),(k,B)=>{const q=ce("Setting"),X=ce("el-icon"),W=ce("el-button"),ee=ce("ModelSelect"),J=ce("el-form-item"),L=ce("MdEditorMagnify"),G=ce("AppIcon"),Y=ce("EditPen"),H=ce("el-tooltip"),se=ce("el-input-number"),Re=ce("el-switch"),Se=ce("el-form"),ze=ce("el-card");return nt(),Yt(Ji,{nodeModel:k.nodeModel},{default:U(()=>[me("h5",IH,We(k.$t("views.applicationWorkflow.nodeSetting")),1),F(ze,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(Se,{onSubmit:B[7]||(B[7]=Sn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:P,"hide-required-asterisk":""},{default:U(()=>[F(J,{label:k.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:k.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[me("div",LH,[me("div",null,[me("span",null,[Tt(We(k.$t("views.application.applicationForm.form.aiModel.label")),1),B[8]||(B[8]=me("span",{class:"danger"},"*",-1))])]),F(W,{type:"primary",link:"",disabled:!O.value.modelId,onClick:B[0]||(B[0]=Be=>w(O.value.modelId)),onRefreshForm:b},{default:U(()=>[F(X,null,{default:U(()=>[F(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(ee,{onChange:r,onWheel:o,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Be=>O.value.modelId=Be),placeholder:k.$t("views.application.applicationForm.form.aiModel.placeholder"),options:A.value,onSubmitModel:j,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(J,{label:k.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(L,{title:k.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=Be=>O.value.system=Be),style:{height:"100px"},onSubmitDialog:c,placeholder:k.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(J,{label:k.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:k.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:U(()=>[me("div",FH,[me("div",$H,[me("span",null,[Tt(We(k.$t("views.application.applicationForm.form.prompt.label")),1),B[9]||(B[9]=me("span",{class:"danger"},"*",-1))])]),F(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"}),F(X,null,{default:U(()=>[F(Y)]),_:1})]),_:1})])]),default:U(()=>[F(L,{onWheel:o,title:k.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=Be=>O.value.prompt=Be),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(J,{label:k.$t("views.application.applicationForm.form.historyRecord.label")},{default:U(()=>[F(se,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":B[4]||(B[4]=Be=>O.value.dialogueNumber=Be),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),F(J,{label:k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[6]||(B[6]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",BH,[me("div",UH,[me("span",null,[Tt(We(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),B[10]||(B[10]=me("span",{class:"danger"},"*",-1))])]),F(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(k.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Re,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":B[5]||(B[5]=Be=>O.value.isResult=Be)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(ab,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:b},null,512)]),_:1},8,["nodeModel"])}}});class VH extends Qi{constructor(t){super(t,GH)}}const WH={type:"question-node",model:ea,view:VH},zH=Object.freeze(Object.defineProperty({__proto__:null,default:WH},Symbol.toStringTag,{value:"Module"})),HH={class:"flex-between"},XH={class:"flex align-center"},YH={class:"mr-4"},qH=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={replyType:"content",content:"",fields:[],isResult:!1},r=Oo({get:()=>(t.nodeModel.properties.nodeData||lt.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{lt.set(t.nodeModel.properties,"nodeData",g)}});function s(g){lt.set(t.nodeModel.properties.nodeData,"content",g)}const c=Et(),v=Et(),h=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return zo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Yp(t.nodeModel)&&lt.set(t.nodeModel.properties.nodeData,"isResult",!0),lt.set(t.nodeModel,"validate",h)}),(g,b)=>{const w=ce("el-option"),O=ce("el-select"),S=ce("el-form-item"),P=ce("AppIcon"),A=ce("el-tooltip"),R=ce("el-switch"),j=ce("el-form"),k=ce("el-card");return nt(),Yt(Ji,{nodeModel:g.nodeModel},{default:U(()=>[F(k,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(j,{onSubmit:b[5]||(b[5]=Sn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:U(()=>[F(S,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:U(()=>[me("div",HH,[me("span",null,We(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),F(O,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=B=>r.value.replyType=B),size:"small",style:{width:"85px"}},{default:U(()=>[F(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[r.value.replyType==="content"?(nt(),Yt(Dw,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=B=>r.value.content=B),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(nt(),Yt(yi,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=B=>r.value.fields=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),F(S,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",XH,[me("div",YH,[me("span",null,[Tt(We(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[6]||(b[6]=me("span",{class:"danger"},"*",-1))])]),F(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(R,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=B=>r.value.isResult=B)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class KH extends Qi{constructor(t){super(t,qH)}}const ZH={type:"reply-node",model:ea,view:KH},JH=Object.freeze(Object.defineProperty({__proto__:null,default:ZH},Symbol.toStringTag,{value:"Module"})),QH={class:"p-16"},eX={class:"flex align-center"},tX={class:"mr-4"},nX={class:"dialog-footer p-16"},rX=$r({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=Et(),s=Et({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=Et(!1),v=Et(!1);$M(c,b=>{b||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const h=b=>{s.value={...s.value,...lt.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((w,O)=>{w&&(o("refresh",lt.cloneDeep(s.value)),c.value=!1)})};return t({open:h}),(b,w)=>{const O=ce("AppIcon"),S=ce("el-tooltip"),P=ce("el-input-number"),A=ce("el-form-item"),R=ce("el-col"),j=ce("el-row"),k=ce("el-slider"),B=ce("el-form"),q=ce("el-scrollbar"),X=ce("el-button"),W=ce("el-dialog");return nt(),Yt(W,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":w[5]||(w[5]=ee=>c.value=ee),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[me("span",nX,[F(X,{onClick:w[3]||(w[3]=Sn(ee=>c.value=!1,["prevent"]))},{default:U(()=>[Tt(We(b.$t("common.cancel")),1)]),_:1}),F(X,{type:"primary",onClick:w[4]||(w[4]=ee=>g()),loading:v.value},{default:U(()=>[Tt(We(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[me("div",null,[F(q,{always:""},{default:U(()=>[me("div",QH,[F(B,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:U(()=>[F(j,{gutter:20},{default:U(()=>[F(R,{span:12},{default:U(()=>[F(A,null,{label:U(()=>[me("div",eX,[me("span",tX,"Score "+We(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),F(S,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:U(()=>[F(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:U(()=>[F(P,{modelValue:s.value.similarity,"onUpdate:modelValue":w[0]||(w[0]=ee=>s.value.similarity=ee),min:0,max:s.value.searchMode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),F(R,{span:12},{default:U(()=>[F(A,{label:b.$t("views.application.applicationForm.dialog.topReferences")},{default:U(()=>[F(P,{modelValue:s.value.topN,"onUpdate:modelValue":w[1]||(w[1]=ee=>s.value.topN=ee),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),F(A,{label:b.$t("views.application.applicationForm.dialog.maxCharacters")},{default:U(()=>[F(k,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":w[2]||(w[2]=ee=>s.value.maxParagraphCharNumber=ee),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}});const oX={class:"flex-between"},iX={class:"flex-between"},aX={class:"w-full"},lX={class:"flex-between"},uX={class:"flex-between"},sX=$r({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Tf(),n=e,o=Et(),{params:{id:r}}=Vu.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3}},c=Et(null),v=()=>{var j;(j=o.value)==null||j.open(b.value.reranker_setting)},h=j=>{const k=lt.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);k.splice(j,1),lt.set(n.nodeModel.properties.nodeData,"reranker_reference_list",k)},g=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),b=Oo({get:()=>(n.nodeModel.properties.nodeData||lt.set(n.nodeModel.properties,"nodeData",s),n.nodeModel.properties.nodeData),set:j=>{lt.set(n.nodeModel.properties,"nodeData",j)}});function w(j){lt.set(n.nodeModel.properties.nodeData,"reranker_setting",j)}function O(){r?Aa.getApplicationRerankerModel(r).then(j=>{c.value=lt.groupBy(j==null?void 0:j.data,"provider")}):t.asyncGetModel({modelType:"RERANKER"}).then(j=>{c.value=lt.groupBy(j==null?void 0:j.data,"provider")})}const S=()=>{const j=lt.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);j.push([]),lt.set(n.nodeModel.properties.nodeData,"reranker_reference_list",j)},P=Et(),A=Et(),R=()=>{var j;return Promise.all([A.value?A.value.validate():Promise.resolve(""),(j=P.value)==null?void 0:j.validate()]).catch(k=>Promise.reject({node:n.nodeModel,errMessage:k}))};return zo(()=>{O(),lt.set(n.nodeModel,"validate",R)}),(j,k)=>{const B=ce("Plus"),q=ce("el-icon"),X=ce("el-button"),W=ce("el-form-item"),ee=ce("el-col"),J=ce("Delete"),L=ce("el-row"),G=ce("Setting"),Y=ce("ModelSelect"),H=ce("el-form"),se=ce("el-card");return nt(),Yt(Ji,{nodeModel:j.nodeModel},{default:U(()=>[F(se,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(H,{onSubmit:k[2]||(k[2]=Sn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:P,"hide-required-asterisk":""},{default:U(()=>[F(W,{label:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:U(()=>[me("div",oX,[me("span",null,[Tt(We(j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),k[3]||(k[3]=me("span",{class:"danger"},"*",-1))]),F(X,{onClick:S,link:"",type:"primary"},{default:U(()=>[F(q,{class:"mr-4"},{default:U(()=>[F(B)]),_:1})]),_:1})])]),default:U(()=>[(nt(!0),In(si,null,Zi(b.value.reranker_reference_list,(Re,Se)=>(nt(),Yt(L,{gutter:8,style:{"margin-bottom":"8px"},key:Se},{default:U(()=>[F(ee,{span:22},{default:U(()=>[F(W,{prop:"reranker_reference_list."+Se,rules:{type:"array",required:!0,message:j.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[(nt(),Yt(yi,{key:Se,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:b.value.reranker_reference_list[Se],"onUpdate:modelValue":ze=>b.value.reranker_reference_list[Se]=ze},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),F(ee,{span:1},{default:U(()=>[F(X,{link:"",type:"info",class:"mt-4",onClick:ze=>h(Se)},{default:U(()=>[F(q,null,{default:U(()=>[F(J)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),F(W,{label:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[me("div",iX,[me("span",null,We(j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),F(X,{type:"primary",link:"",onClick:v},{default:U(()=>[F(q,null,{default:U(()=>[F(G)]),_:1})]),_:1})])]),default:U(()=>[me("div",aX,[F(L,null,{default:U(()=>[F(ee,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(" Score "+We(j.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),F(ee,{span:12,class:"lighter"},{default:U(()=>{var Re;return[Tt(We((Re=b.value.reranker_setting.similarity)==null?void 0:Re.toFixed(3)),1)]}),_:1}),F(ee,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(We(j.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),F(ee,{span:12,class:"lighter"},{default:U(()=>[Tt(We(b.value.reranker_setting.topN),1)]),_:1}),F(ee,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(We(j.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),F(ee,{span:12,class:"lighter"},{default:U(()=>[Tt(We(b.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),F(W,{label:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:U(()=>[me("div",lX,[me("span",null,[Tt(We(j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),k[4]||(k[4]=me("span",{class:"danger"},"*",-1))])])]),default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:A,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:b.value.questionReferenceAddress,"onUpdate:modelValue":k[0]||(k[0]=Re=>b.value.questionReferenceAddress=Re)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(W,{label:j.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:U(()=>[me("div",uX,[me("span",null,[Tt(We(j.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),k[5]||(k[5]=me("span",{class:"danger"},"*",-1))])])]),default:U(()=>[F(Y,{onWheel:g,teleported:!1,modelValue:b.value.reranker_model_id,"onUpdate:modelValue":k[1]||(k[1]=Re=>b.value.reranker_model_id=Re),placeholder:j.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:c.value,onSubmitModel:O,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),F(rX,{ref_key:"ParamSettingDialogRef",ref:o,onRefresh:w},null,512)]),_:1},8,["nodeModel"])}}});const cX=Xy(sX,[["__scopeId","data-v-3aae2e82"]]);class fX extends Qi{constructor(t){super(t,cX)}}const dX={type:"reranker-node",model:ea,view:fX},pX=Object.freeze(Object.defineProperty({__proto__:null,default:dX},Symbol.toStringTag,{value:"Module"}));var lN=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(lN||{});const hX={class:"title-decoration-1 mb-8"},vX={class:"flex-between"},yX={class:"w-full"},mX={class:"flex align-center",style:{"line-height":"20px"}},gX=["title"],bX={class:"flex-between"},_X={class:"w-full"},wX=$r({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:o}=Tf(),{params:{id:r}}=Vu.config.globalProperties.$route,s=e,c=Et(),v={datasetIdList:[],datasetSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[]},h=Oo({get:()=>(s.nodeModel.properties.nodeData||lt.set(s.nodeModel.properties,"nodeData",v),s.nodeModel.properties.nodeData),set:W=>{lt.set(s.nodeModel.properties,"nodeData",W)}}),g=Et(),b=Et(),w=Et(),O=Et([]),S=Et(!1);function P(W){lt.set(s.nodeModel.properties.nodeData,"datasetSetting",W.datasetSetting)}const A=()=>{var W;(W=b.value)==null||W.open(h.value,"WORK_FLOW")};function R(W){const ee=s.nodeModel.properties.nodeData.datasetIdList.filter(J=>J!==W);lt.set(s.nodeModel.properties.nodeData,"datasetIdList",ee)}function j(W){lt.set(s.nodeModel.properties.nodeData,"datasetIdList",W)}function k(){w.value&&w.value.open(h.value.datasetIdList)}function B(){r?n.asyncGetApplicationDataset(r,S).then(W=>{O.value=W.data}):t.asyncGetAllDataset(S).then(W=>{var ee;O.value=(ee=W.data)==null?void 0:ee.filter(J=>{var L;return J.userId===((L=o.userInfo)==null?void 0:L.id)})})}function q(){B()}const X=()=>{var W;return Promise.all([c.value.validate(),(W=g.value)==null?void 0:W.validate()]).catch(ee=>Promise.reject({node:s.nodeModel,errMessage:ee}))};return zo(()=>{B(),lt.set(s.nodeModel,"validate",X)}),(W,ee)=>{const J=ce("Plus"),L=ce("el-icon"),G=ce("el-button"),Y=ce("el-text"),H=ce("Close"),se=ce("el-form-item"),Re=ce("Setting"),Se=ce("el-col"),ze=ce("el-row"),Be=ce("el-form"),Oe=ce("el-card");return nt(),Yt(Ji,{nodeModel:W.nodeModel},{default:U(()=>[me("h5",hX,We(W.$t("views.applicationWorkflow.nodeSetting")),1),F(Oe,{shadow:"never",class:"card-never"},{default:U(()=>[F(Be,{onSubmit:ee[1]||(ee[1]=Sn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:U(()=>[F(se,{label:W.$t("views.log.selectDataset")},{label:U(()=>[me("div",vX,[me("span",null,We(W.$t("views.log.selectDataset")),1),F(G,{type:"primary",link:"",onClick:k},{default:U(()=>[F(L,null,{default:U(()=>[F(J)]),_:1})]),_:1})])]),default:U(()=>{var ae;return[me("div",yX,[((ae=h.value.datasetIdList)==null?void 0:ae.length)===0?(nt(),Yt(Y,{key:0,type:"info"},{default:U(()=>[Tt(We(W.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(nt(!0),In(si,{key:1},Zi(h.value.datasetIdList,(ve,Pe)=>{var Ke,je,at;return nt(),In("div",{key:Pe,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[me("div",mX,[((Ke=Jr(p1)(O.value,ve,"id"))==null?void 0:Ke.type)==="1"?(nt(),Yt(OS,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:U(()=>ee[2]||(ee[2]=[me("img",{src:HI,style:{width:"58%"},alt:""},null,-1)])),_:1})):(nt(),Yt(OS,{key:1,class:"mr-8 avatar-blue",shape:"square",size:20},{default:U(()=>ee[3]||(ee[3]=[me("img",{src:XI,style:{width:"58%"},alt:""},null,-1)])),_:1})),me("div",{class:"ellipsis",title:(je=Jr(p1)(O.value,ve,"id"))==null?void 0:je.name},We((at=Jr(p1)(O.value,ve,"id"))==null?void 0:at.name),9,gX)]),F(G,{text:"",onClick:gt=>R(ve)},{default:U(()=>[F(L,null,{default:U(()=>[F(H)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),F(se,{label:W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[me("div",bX,[me("span",null,We(W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),F(G,{type:"primary",link:"",onClick:A},{default:U(()=>[F(L,null,{default:U(()=>[F(Re)]),_:1})]),_:1})])]),default:U(()=>[me("div",_X,[F(ze,null,{default:U(()=>[F(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(We(W.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),F(Se,{span:12,class:"lighter"},{default:U(()=>[Tt(We(W.$t(Jr(lN)[h.value.datasetSetting.searchMode])),1)]),_:1}),F(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(We(W.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),F(Se,{span:12,class:"lighter"},{default:U(()=>{var ae;return[Tt(We((ae=h.value.datasetSetting.similarity)==null?void 0:ae.toFixed(3)),1)]}),_:1}),F(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(We(W.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),F(Se,{span:12,class:"lighter"},{default:U(()=>[Tt(We(h.value.datasetSetting.topN),1)]),_:1}),F(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(We(W.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),F(Se,{span:12,class:"lighter"},{default:U(()=>[Tt(We(h.value.datasetSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),F(se,{label:W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:c,nodeModel:W.nodeModel,class:"w-full",placeholder:W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.questionReferenceAddress,"onUpdate:modelValue":ee[0]||(ee[0]=ae=>h.value.questionReferenceAddress=ae)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),F(QI,{ref_key:"ParamSettingDialogRef",ref:b,onRefresh:P},null,512),F(eL,{ref_key:"AddDatasetDialogRef",ref:w,onAddData:j,data:O.value,onRefresh:q,loading:S.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class EX extends Qi{constructor(t){super(t,wX)}}const OX={type:"search-dataset-node",model:ea,view:EX},xX=Object.freeze(Object.defineProperty({__proto__:null,default:OX},Symbol.toStringTag,{value:"Module"})),SX={class:"title-decoration-1 mb-8"},AX={class:"flex-between w-full"},TX={class:"flex-between w-full"},MX={class:"flex align-center"},PX={class:"mr-4"},NX=$r({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Tf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=Et(null),s=Et(),c=Et(),v=()=>{var O;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(O=s.value)==null?void 0:O.validate()]).catch(S=>Promise.reject({node:o.nodeModel,errMessage:S}))},h=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),g={sttModelId:"",isResult:!0,audioList:[]},b=Oo({get:()=>(o.nodeModel.properties.nodeData||lt.set(o.nodeModel.properties,"nodeData",g),o.nodeModel.properties.nodeData),set:O=>{lt.set(o.nodeModel.properties,"nodeData",O)}});function w(){n?Aa.getApplicationSTTModel(n).then(O=>{r.value=lt.groupBy(O==null?void 0:O.data,"provider")}):t.asyncGetModel().then(O=>{r.value=lt.groupBy(O==null?void 0:O.data,"provider")})}return zo(()=>{w(),lt.set(o.nodeModel,"validate",v)}),(O,S)=>{const P=ce("ModelSelect"),A=ce("el-form-item"),R=ce("AppIcon"),j=ce("el-tooltip"),k=ce("el-switch"),B=ce("el-form"),q=ce("el-card");return nt(),Yt(Ji,{"node-model":O.nodeModel},{default:U(()=>[me("h5",SX,We(O.$t("views.applicationWorkflow.nodeSetting")),1),F(q,{shadow:"never",class:"card-never"},{default:U(()=>[F(B,{onSubmit:S[4]||(S[4]=Sn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:U(()=>[F(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.sttModel.label"),prop:"sttModelId",rules:{required:!0,message:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:U(()=>[me("div",AX,[me("div",null,[me("span",null,[Tt(We(O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),S[5]||(S[5]=me("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(P,{onWheel:h,teleported:!1,modelValue:b.value.sttModelId,"onUpdate:modelValue":S[0]||(S[0]=X=>b.value.sttModelId=X),placeholder:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:U(()=>[me("div",TX,[me("div",null,[me("span",null,[Tt(We(O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),S[6]||(S[6]=me("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:c,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:b.value.audioList,"onUpdate:modelValue":S[1]||(S[1]=X=>b.value.audioList=X)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(A,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",MX,[me("div",PX,[me("span",null,[Tt(We(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),S[7]||(S[7]=me("span",{class:"danger"},"*",-1))])]),F(j,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(R,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(k,{size:"small",modelValue:b.value.isResult,"onUpdate:modelValue":S[2]||(S[2]=X=>b.value.isResult=X)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class RX extends Qi{constructor(t){super(t,NX)}}const kX={type:"speech-to-text-node",model:ea,view:RX},CX=Object.freeze(Object.defineProperty({__proto__:null,default:kX},Symbol.toStringTag,{value:"Module"})),DX={class:"title-decoration-1 mb-8"},jX=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Et(!1),o=[{label:Qt("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Qt("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:Qt("chat.chatId"),value:"chatId"}],r=()=>{const v=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>lt.cloneDeep(g.properties.user_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),h=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>lt.cloneDeep(g.properties.api_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...v,...h]},s=()=>{const v=r();lt.set(t.nodeModel.properties.config,"globalFields",[...o,...v])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let v=lt.cloneDeep(t.nodeModel.properties.config.fields);const h=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.file_upload_enable).map(b=>lt.cloneDeep(b.properties.nodeData.file_upload_setting)).filter(b=>b);if(v=v.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"),h.length===0){lt.set(t.nodeModel.properties.config,"fields",v);return}let g=[];h[0].document&&g.push({label:Qt("common.fileUpload.document"),value:"document"}),h[0].image&&g.push({label:Qt("common.fileUpload.image"),value:"image"}),h[0].audio&&g.push({label:Qt("common.fileUpload.audio"),value:"audio"}),h[0].video&&g.push({label:Qt("common.fileUpload.video"),value:"video"}),lt.set(t.nodeModel.properties.config,"fields",[...v,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),zo(()=>{s(),c()}),(v,h)=>{const g=ce("AppIcon"),b=ce("el-button"),w=ce("el-tooltip");return nt(),Yt(Ji,{nodeModel:v.nodeModel},{default:U(()=>[me("h5",DX,We(v.$t("views.applicationWorkflow.variable.global")),1),(nt(!0),In(si,null,Zi(v.nodeModel.properties.config.globalFields,(O,S)=>(nt(),In("div",{key:S,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:h[0]||(h[0]=P=>n.value=!0),onMouseleave:h[1]||(h[1]=P=>n.value=!1)},[me("span",null,We(O.label)+" "+We("{"+O.value+"}"),1),n.value===!0?(nt(),Yt(w,{key:0,effect:"dark",content:v.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[F(b,{link:"",onClick:P=>Jr(DM)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:U(()=>[F(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):vr("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class IX extends Qi{constructor(t){super(t,jX)}}const LX={type:"start-node",model:ea,view:IX},FX=Object.freeze(Object.defineProperty({__proto__:null,default:LX},Symbol.toStringTag,{value:"Module"})),$X={class:"title-decoration-1 mb-8"},BX={class:"flex-between w-full"},UX={class:"flex-between w-full"},GX={class:"flex align-center"},VX={class:"mr-4"},WX=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=Et(),{model:n}=Tf(),{params:{id:o}}=Vu.config.globalProperties.$route,r=e,s=Et(null),c=Et(),v=Et(),h=()=>{var A;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(A=c.value)==null?void 0:A.validate()]).catch(R=>Promise.reject({node:r.nodeModel,errMessage:R}))},g=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),b={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},w=Oo({get:()=>(r.nodeModel.properties.nodeData||lt.set(r.nodeModel.properties,"nodeData",b),r.nodeModel.properties.nodeData),set:A=>{lt.set(r.nodeModel.properties,"nodeData",A)}});function O(){o?Aa.getApplicationTTSModel(o).then(A=>{s.value=lt.groupBy(A==null?void 0:A.data,"provider")}):n.asyncGetModel().then(A=>{s.value=lt.groupBy(A==null?void 0:A.data,"provider")})}const S=()=>{var R;const A=w.value.ttsModelId;if(!A){Bp(Qt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(R=t.value)==null||R.open(A,o,w.value.modelParamsSetting)},P=A=>{w.value.modelParamsSetting=A};return zo(()=>{O(),lt.set(r.nodeModel,"validate",h)}),(A,R)=>{const j=ce("Setting"),k=ce("el-icon"),B=ce("el-button"),q=ce("ModelSelect"),X=ce("el-form-item"),W=ce("AppIcon"),ee=ce("el-tooltip"),J=ce("el-switch"),L=ce("el-form"),G=ce("el-card");return nt(),Yt(Ji,{"node-model":A.nodeModel},{default:U(()=>[me("h5",$X,We(A.$t("views.applicationWorkflow.nodeSetting")),1),F(G,{shadow:"never",class:"card-never"},{default:U(()=>[F(L,{onSubmit:R[4]||(R[4]=Sn(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(X,{label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_Model.label"),prop:"ttsModelId",rules:{required:!0,message:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:U(()=>[me("div",BX,[me("div",null,[me("span",null,[Tt(We(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),R[5]||(R[5]=me("span",{class:"danger"},"*",-1))])]),F(B,{type:"primary",link:"",onClick:S,disabled:!w.value.ttsModelId,class:"mr-4"},{default:U(()=>[F(k,null,{default:U(()=>[F(j)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(q,{onWheel:g,teleported:!1,modelValue:w.value.ttsModelId,"onUpdate:modelValue":R[0]||(R[0]=Y=>w.value.ttsModelId=Y),placeholder:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(X,{prop:"content_list",label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:U(()=>[me("div",UX,[me("div",null,[me("span",null,[Tt(We(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),R[6]||(R[6]=me("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(yi,{ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:w.value.content_list,"onUpdate:modelValue":R[1]||(R[1]=Y=>w.value.content_list=Y)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(X,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:R[3]||(R[3]=Sn(()=>{},["prevent"]))},{label:U(()=>[me("div",GX,[me("div",VX,[me("span",null,[Tt(We(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),R[7]||(R[7]=me("span",{class:"danger"},"*",-1))])]),F(ee,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt(We(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(J,{size:"small",modelValue:w.value.isResult,"onUpdate:modelValue":R[2]||(R[2]=Y=>w.value.isResult=Y)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:P},null,512)]),_:1},8,["node-model"])}}});class zX extends Qi{constructor(t){super(t,WX)}}const HX={type:"text-to-speech-node",model:ea,view:zX},XX=Object.freeze(Object.defineProperty({__proto__:null,default:HX},Symbol.toStringTag,{value:"Module"})),YX={class:"flex-between"},qX={class:"flex-between mb-8"},KX={class:"lighter"},ZX={key:0,class:"flex w-full"},JX=$r({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r={variable_list:[{id:_y(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=Oo({get:()=>(t.nodeModel.properties.nodeData||lt.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:S=>{lt.set(t.nodeModel.properties,"nodeData",S)}}),c=Et(),v=Et(),h=Et(),g=async()=>{var P;let S=[(P=c.value)==null?void 0:P.validate(),...v.value.map(A=>A.validate())];return h.value&&(S=[...S,...v.value.map(A=>A.validate())]),Promise.all(S).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function b(){const S=lt.cloneDeep(t.nodeModel.properties.nodeData.variable_list),P={id:_y(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};S.push(P),lt.set(t.nodeModel.properties.nodeData,"variable_list",S)}function w(S){const P=lt.cloneDeep(t.nodeModel.properties.nodeData.variable_list);P.splice(S,1),lt.set(t.nodeModel.properties.nodeData,"variable_list",P)}function O(S){t.nodeModel.graphModel.nodes.map(P=>{P.id==="start-node"&&P.properties.config.globalFields.forEach(A=>{A.value===S.fields[1]&&(S.name=A.label)})})}return zo(()=>{var S;typeof((S=t.nodeModel.properties.nodeData)==null?void 0:S.isResult)>"u"&&Yp(t.nodeModel)&&lt.set(t.nodeModel.properties.nodeData,"isResult",!0),lt.set(t.nodeModel,"validate",g)}),(S,P)=>{const A=ce("Delete"),R=ce("el-icon"),j=ce("el-button"),k=ce("el-form-item"),B=ce("el-option"),q=ce("el-select"),X=ce("el-input"),W=ce("el-input-number"),ee=ce("CodemirrorEditor"),J=ce("el-card"),L=ce("Plus"),G=ce("el-form");return nt(),Yt(Ji,{nodeModel:S.nodeModel},{default:U(()=>[F(G,{onSubmit:P[0]||(P[0]=Sn(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[(nt(!0),In(si,null,Zi(s.value.variable_list,(Y,H)=>(nt(),Yt(J,{key:Y.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(k,{label:S.$t("views.applicationWorkflow.variable.label")},{label:U(()=>[me("div",YX,[me("div",null,[Tt(We(S.$t("views.applicationWorkflow.variable.label"))+" ",1),P[1]||(P[1]=me("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(nt(),Yt(j,{key:0,text:"",onClick:se=>w(H)},{default:U(()=>[F(R,null,{default:U(()=>[F(A)]),_:1})]),_:2},1032,["onClick"])):vr("",!0)])]),default:U(()=>[F(yi,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Y.fields,"onUpdate:modelValue":se=>Y.fields=se,global:!0,onChange:se=>O(Y)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),me("div",qX,[me("span",KX,[Tt(We(S.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),P[2]||(P[2]=me("span",{class:"danger"},"*",-1))]),F(q,{teleported:!1,modelValue:Y.source,"onUpdate:modelValue":se=>Y.source=se,size:"small",style:{width:"85px"}},{default:U(()=>[F(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),Y.source==="custom"?(nt(),In("div",ZX,[F(q,{modelValue:Y.type,"onUpdate:modelValue":se=>Y.type=se,style:{"max-width":"85px"},class:"mr-8",onChange:se=>s.value.variable_list[H].value=null},{default:U(()=>[(nt(),In(si,null,Zi(n,se=>F(B,{key:se,label:se,value:se},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),Y.type==="string"?(nt(),Yt(k,{key:0,prop:"variable_list."+H+".value",rules:{message:Jr(Qt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[F(X,{modelValue:Y.value,"onUpdate:modelValue":se=>Y.value=se,placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):Y.type==="num"?(nt(),Yt(k,{key:1,prop:"variable_list."+H+".value",rules:{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[F(W,{modelValue:Y.value,"onUpdate:modelValue":se=>Y.value=se},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):Y.type==="json"?(nt(),Yt(k,{key:2,class:"w-full",prop:"variable_list."+H+".value",rules:[{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(se,Re,Se)=>{try{JSON.parse(Re),Se()}catch{Se(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:U(()=>[F(ee,{title:"JSON",modelValue:Y.value,"onUpdate:modelValue":se=>Y.value=se,style:{height:"100px",width:"155px"},onSubmitDialog:se=>s.value.variable_list[H].value=se},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):vr("",!0)])):(nt(),Yt(k,{key:1},{default:U(()=>[F(yi,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:h,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Y.reference,"onUpdate:modelValue":se=>Y.reference=se},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),F(j,{link:"",type:"primary",onClick:b},{default:U(()=>[F(R,{class:"mr-4"},{default:U(()=>[F(L)]),_:1}),Tt(" "+We(S.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class QX extends Qi{constructor(t){super(t,JX)}}const eY={type:"variable-assign-node",model:ea,view:QX},tY=Object.freeze(Object.defineProperty({__proto__:null,default:eY},Symbol.toStringTag,{value:"Module"})),eT=$r({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Nl((nt(),In("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=Sn(()=>{},["stop"])),onClick:r[1]||(r[1]=Sn(()=>{},["stop"]))},[(nt(),In("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[me("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),me("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[bv,t.model.isHovered]])}});function nY(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const rY=32,oY=32;class iY extends cn.BezierEdge{constructor(){super();wa(this,"isMounted");wa(this,"customLineApp");wa(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");nY(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Ug()?z2(this.targetId(),eT,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=FM({render:()=>wv(eT,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Ug()&&H2(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=rY,customHeight:s=oY}=n.getProperties(),{startPoint:c,endPoint:v,path:h,isAnimation:g,arrowConfig:b}=n,w=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:S,strokeDashoffset:P,animationName:A,animationDuration:R,animationIterationCount:j,animationTimingFunction:k,animationDirection:B}=w,q={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},X=n.getEdgeStyle(),W={width:r,height:s};return setTimeout(()=>{const ee=document.getElementById(o);ee&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(ee))},0),delete X.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:h,...X,...b,...g?{strokeDasharray:O,stroke:S,style:{strokeDashoffset:P,animationName:A,animationDuration:R,animationIterationCount:j,animationTimingFunction:k,animationDirection:B}}:{}}),cn.h("foreignObject",{...q,y:q.y+5,x:q.x+5,style:{}},[cn.h("div",{id:o,style:{...W},className:"lf-custom-edge-wrapper"})])])}}class aY extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const lY={type:"app-edge",view:iY,model:aY},uY=$r({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var h;(h=t.lf)==null||h.zoom(!0,[0,0])}function o(){var h;(h=t.lf)==null||h.zoom(!1,[0,0])}function r(){var h,g,b;(h=t.lf)==null||h.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const s=()=>{var h;(h=t.lf)==null||h.extension.dagre.layout()},c=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(h,g)=>{const b=ce("ZoomOut"),w=ce("el-icon"),O=ce("el-tooltip"),S=ce("el-button"),P=ce("ZoomIn"),A=ce("AppIcon"),R=ce("el-divider"),j=ce("el-card");return nt(),Yt(j,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:U(()=>[F(S,{link:"",onClick:o},{default:U(()=>[F(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:U(()=>[F(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomOut")},{default:U(()=>[F(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:n},{default:U(()=>[F(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:U(()=>[F(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomIn")},{default:U(()=>[F(P)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:r},{default:U(()=>[F(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:U(()=>[F(A,{iconName:"app-fitview",title:h.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(R,{direction:"vertical"}),F(S,{link:"",onClick:c},{default:U(()=>[F(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:U(()=>[F(A,{style:{"font-size":"16px"},iconName:"app-retract",title:h.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:v},{default:U(()=>[F(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:U(()=>[F(A,{style:{"font-size":"16px"},iconName:"app-extend",title:h.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:s},{default:U(()=>[F(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:U(()=>[F(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:h.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let ic=null;function tT(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function nT(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const Kh=40;let ug=40;function sY(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var w,O;if(ug=Kh,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,h=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(h):!0)||h.nodes.length===0&&h.edges.length===0)return ic=null,!0;const b=h.nodes.filter(S=>S.type===ti.Start||S.type===ti.Base);if(b.length>0){xa(((O=(w=b[0])==null?void 0:w.properties)==null?void 0:O.stepName)+Qt("views.applicationWorkflow.tip.cannotCopy"));return}return ic=h,ic.nodes.forEach(S=>tT(S,Kh)),ic.edges.forEach(S=>nT(S,Kh)),Bp(Qt("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;if(ic&&(ic.nodes||ic.edges)){e.clearSelectElements();const v=e.addElements(ic,ug);if(!v)return!0;v.nodes.forEach(h=>e.selectElementById(h.id,!0)),v.edges.forEach(h=>e.selectElementById(h.id,!0)),ic.nodes.forEach(h=>tT(h,Kh)),ic.edges.forEach(h=>nT(h,Kh)),ug=ug+Kh}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(b=>e.deleteEdge(b.id));return}const h=v.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(h.length>0){xa(`${(g=h[0].properties)==null?void 0:g.stepName}${Qt("views.applicationWorkflow.delete.deleteMessage")}`);return}return Cw(Qt("common.tip"),Qt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Qt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;v.edges.forEach(b=>e.deleteEdge(b.id)),v.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class cY{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const fY=e=>typeof e=="string",rT=Array.isArray,Xg=e=>typeof e=="number",uN=e=>e!==null&&typeof e=="object",Yg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Yg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Yg(t[n])}),t}return e},Zh=(e,t)=>{const n=e[t];return uN(n)?n.cell:n},oT=(e,t,n)=>{let o;return n?o=n:Xg(e)?o=()=>e:o=()=>t,o},dY=(e,t)=>{if(e!=="next"&&e!=="prev")return t},iT=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let pY=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return iT(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&iT(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,dY)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var pv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(pv||(pv={}));function aT(e,t){var n=e.get(t)||0;e.set(t,n+1)}function lT(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function sN(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+pv.EDGE_KEY_DELIM+s+pv.EDGE_KEY_DELIM+(o===void 0?pv.DEFAULT_EDGE_NAME:o)}function uT(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return o!==void 0&&(c.name=o),c}function R1(e,t){return sN(e,t.v,t.w,t.name)}function sT(e){return typeof e=="function"}var hY=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},vY=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},yY=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:hY(t),edges:vY(t),value:t.graph()};return n.value===void 0&&delete n.value,n},mY=function(t){var n=new Lv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function fT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(o){gY(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function gY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _Y(e,t,n){return t&&dT(e.prototype,t),n&&dT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var wY={compound:!1,multigraph:!1,directed:!0},Lv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bY(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=pv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return sT(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var h=s===void 0?t.GRAPH_NODE:s,g=t.parent(h);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,h);var b=t.childrenMap.get(h);return b.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(h,b),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,h=new e({directed:s,multigraph:c,compound:v});if(h.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&h.setNode(b,t.node(b))}),t.edges().forEach(function(b){h.hasNode(b.v)&&h.hasNode(b.w)&&h.setEdgeObj(b,t.edge(b))}),v){var g=function(w){for(var O=t.parent(w);O!==void 0&&!h.hasNode(O);)O=t.parent(O);return O};h.nodes().forEach(function(b){h.setParent(b,g(b))})}return h},this.setDefaultEdgeLabel=function(r){return sT(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(R1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(R1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return yY(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=fT(fT({},wY),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return _Y(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,h=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,w=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var S;v==null||v.set(n,this.GRAPH_NODE),h==null||h.set(n,new Map),h!=null&&h.has(this.GRAPH_NODE)||h==null||h.set(this.GRAPH_NODE,new Map),h==null||(S=h.get(this.GRAPH_NODE))===null||S===void 0||S.set(n,!0)}return[g,b,w,O].forEach(function(P){return P.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(R){o.removeEdge(R.v,R.w,R.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,h=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,w,O;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(w=this.children(n))===null||w===void 0||w.forEach(function(A){return o.setParent(A)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var S=s.get(n),P=c.get(n);Array.from(S.values()).forEach(function(A){return r(A)}),Array.from(P.values()).forEach(function(A){return r(A)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),h.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,v,h=uT(this.isDirected(),n,o,s),g=R1(this.isDirected(),h),b=h.v,w=h.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(w),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,w,s)),Object.freeze(h),this.edgesMap.set(g,h);var O=this.predecessorsMap.get(w),S=this.successorsMap.get(b);return aT(O,b),aT(S,w),(c=this.inEdgesMap.get(w))===null||c===void 0||c.set(g,h),(v=this.outEdgesMap.get(b))===null||v===void 0||v.set(g,h),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=sN(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var v=uT(this.isDirected(),n,o,r),h=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var b=this.predecessorsMap.get(g),w=this.successorsMap.get(h);lT(b,h),lT(w,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(h).delete(s),this.edgeCountNum-=1}return this}}]),e}();Lv.fromJSON=mY;function pT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function EY(e,t,n){return t&&pT(e.prototype,t),n&&pT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function OY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cN=EY(function e(){var t=this;OY(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],v=c[0],h=c[1];r[n]=h,r[o]=v,s.set(v.key,o),s.set(h.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=o[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),xY=function(t,n){var o=new Lv,r=new Map,s=new cN,c;function v(b){var w=b.v===c?b.w:b.v,O=s.priority(w);if(O!==void 0){var S=n(b);S<O&&(r.set(w,c),s.decrease(w,S))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(b){s.add(b,Number.POSITIVE_INFINITY),o.setNode(b)}),s.decrease(t.nodes()[0],0);for(var h=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(h)throw new Error("Input graph is not connected: "+t.graph());h=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return o},SY=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var h=v.pop();if(!n.has(h)){var g,b;n.add(h),c.push(h),(g=t.successors(h))===null||g===void 0||g.forEach(function(w){return v.push(w)}),(b=t.predecessors(h))===null||b===void 0||b.forEach(function(w){return v.push(w)})}}c.length&&o.push(c)}),o},AY=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(v){return e(t,v,o,r,s,c)}),o&&c.push(n))},_E=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(h){if(t.hasNode(h))AY(t,h,o==="post",v,s,c);else throw new Error("Graph does not have node: "+h)}),c};function TY(e,t){return RY(e)||NY(e,t)||PY(e,t)||MY()}function MY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PY(e,t){if(e){if(typeof e=="string")return hT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hT(e,t)}}function hT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function NY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(h){s=!0,v=h}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return o}}function RY(e){if(Array.isArray(e))return e}var kY=function(){return 1},fN=function(t,n,o,r){return CY(t,n,o||kY,r||function(s){return t.outEdges(s)})},CY=function(t,n,o,r){var s=new Map,c=new cN,v,h,g=function(O){var S=O.v!==v?O.v:O.w,P=s.get(S),A=o(O),R=h.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+A);R<P.distance&&(P.distance=R,P.predecessor=v,c.decrease(S,R))};for(t.nodes().forEach(function(w){var O=w===n?0:Number.POSITIVE_INFINITY;s.set(w,{distance:O}),c.add(w,O)});c.size()>0&&(v=c.removeMin(),h=s.get(v),!(h&&h.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var b={};return Array.from(s.entries()).forEach(function(w){var O=TY(w,2),S=O[0],P=O[1];return b[String(S)]=P,b}),b},DY=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=fN(t,s,n,o),r}),r},dN=function(t){var n=0,o=[],r=new Map,s=[];function c(v){var h,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,o.push(v),(h=t.successors(v))===null||h===void 0||h.forEach(function(S){var P;if(r.has(S)){if(!((P=r.get(S))===null||P===void 0)&&P.onStack){var R=r.get(S);g.lowlink=Math.min(g.lowlink,R.index)}}else{c(S);var A=r.get(S);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var b=[],w;do{w=o.pop();var O=r.get(w);O.onStack=!1,b.push(w)}while(v!==w);s.push(b)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},jY=function(t){return dN(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function yw(e){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yw(e)}function vT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function IY(e,t,n){return t&&vT(e.prototype,t),n&&vT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cy(e,t)}function $Y(e){var t=pN();return function(){var o=Dy(e),r;if(t){var s=Dy(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return BY(this,r)}}function BY(e,t){if(t&&(yw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UY(e)}function UY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mw(e){var t=typeof Map=="function"?new Map:void 0;return mw=function(o){if(o===null||!GY(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return Eg(o,arguments,Dy(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Cy(r,o)},mw(e)}function Eg(e,t,n){return pN()?Eg=Reflect.construct:Eg=function(r,s,c){var v=[null];v.push.apply(v,s);var h=Function.bind.apply(r,v),g=new h;return c&&Cy(g,c.prototype),g},Eg.apply(null,arguments)}function pN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function GY(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Cy(e,t){return Cy=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Cy(e,t)}function Dy(e){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(e)}var gw=function(e){FY(n,e);var t=$Y(n);function n(){return LY(this,n),t.apply(this,arguments)}return IY(n)}(mw(Error));function hN(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new gw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new gw;return o}var VY=function(t){try{hN(t)}catch(n){if(n instanceof gw)return!1;throw n}return!0},WY=function(t,n){return _E(t,n,"post")},zY=function(t,n){return _E(t,n,"pre")},HY=function(){return 1};function XY(e,t,n){return YY(e,t||HY,n||function(o){return e.outEdges(o)})}function YY(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(v){s!==v&&(o[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var h=v.v===s?v.w:v.v,g=t(v);o[c][String(h)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=o[c];r.forEach(function(h){var g=String(h),b=o[g];r.forEach(function(w){var O=String(w),S=b[c],P=v[O],A=b[O],R=S.distance+P.distance;R<A.distance&&(A.distance=R,A.predecessor=P.predecessor)})})}),o}const qY=Object.freeze(Object.defineProperty({__proto__:null,components:SY,dfs:_E,dijkstra:fN,dijkstraAll:DY,findCycles:jY,floydWarshall:XY,isAcyclic:VY,postorder:WY,preorder:zY,prim:xY,tarjan:dN,topsort:hN},Symbol.toStringTag,{value:"Module"}));class KY extends pY{}class ZY extends Lv{}const JY=()=>1,QY=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=tq(e,t||JY);return(n=eq(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},eq=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)k1(e,t,n,c);for(;c=r.dequeue();)k1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){o=o.concat(k1(e,t,n,c,!0));break}}}return o},k1=(e,t,n,o,r)=>{var s,c;const v=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(h=>{const g=e.edge(h),b=e.node(h.v);r&&v.push({v:h.v,w:h.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,bw(t,n,b)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(h=>{const g=e.edge(h),b=h.w,w=e.node(b);w.in===void 0&&(w.in=0),w.in-=g,bw(t,n,w)}),e.removeNode(o.v),r?v:void 0},tq=(e,t)=>{const n=new ZY;let o=0,r=0;e.nodes().forEach(h=>{n.setNode(h,{v:h,in:0,out:0})}),e.edges().forEach(h=>{const g=n.edge(h)||0,b=(t==null?void 0:t(h))||1,w=g+b;n.setEdge(h.v,h.w,w),r=Math.max(r,n.node(h.v).out+=b),o=Math.max(o,n.node(h.w).in+=b)});const s=[],c=r+o+3;for(let h=0;h<c;h++)s.push(new KY);const v=o+1;return n.nodes().forEach(h=>{bw(s,v,n.node(h))}),{buckets:s,zeroIdx:v,graph:n}},bw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},nq=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?QY(e,t(e)):rq(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},rq=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},oq=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},yT={run:nq,undo:oq};class Af extends Lv{}const iq=(e,t)=>Number(e)-Number(t),Fv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},aq=e=>{const t=new Af().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},vN=e=>{const t=new Af({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},lq=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),mT=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let h,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),h=v*r/s,g=v):(r<0&&(c=-c),h=c,g=c*s/r),{x:n+h,y:o+g}},jy=e=>{const t=[],n=yN(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,v;return iq((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},uq=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},sq=e=>{const t=e.nodes(),n=t.filter(v=>{var h;return((h=e.node(v))===null||h===void 0?void 0:h.rank)!==void 0}).map(v=>e.node(v).rank),o=Math.min(...n),r=[];t.forEach(v=>{var h;const g=(((h=e.node(v))===null||h===void 0?void 0:h.rank)||0)-o;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const h=r[v];h===void 0?v%c!==0&&(s-=1):s&&(h==null||h.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=s)}))}},gT=(e,t,n,o)=>{const r={width:0,height:0};return Xg(n)&&Xg(o)&&(r.rank=n,r.order=o),Fv(e,"border",r,t)},yN=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},cq=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},mN=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},gN=(e,t)=>t(),wE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),fq=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>dq(e,t))},dq=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),h=v.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const g=e.graph();let b,w,O;for(O=0,++o;o<s;++O,++o)v.points=[],w={edgeLabel:v,width:0,height:0,edgeObj:t,rank:o},b=Fv(e,"edge",w,"_d"),o===h&&(w.width=v.width,w.height=v.height,w.dummy="edge-label",w.labelpos=v.labelpos),e.setEdge(n,b,{weight:v.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:v.weight},c)},pq=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},bT={run:fq,undo:pq},bN=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(h=>{const g=o(h.w),b=e.edge(h).minlen,w=g-b;w&&(v===void 0||w<v)&&(v=w)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},hq=e=>{var t;const n={};let o;const r=v=>{var h;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let b;return(h=e.outEdges(v))===null||h===void 0||h.forEach(w=>{const O=r(w.w),S=e.edge(w).minlen,P=O-S;P&&(b===void 0||P<b)&&(b=P)}),b||(b=0),(o===void 0||b<o)&&(o=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),o===void 0&&(o=0);const s={},c=(v,h)=>{var g;const b=e.node(v),w=isNaN(b.layer)?h:b.layer;(b.rank===void 0||b.rank<w)&&(b.rank=w),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(O=>{c(O.w,w+e.edge(O).minlen)}))};e.nodes().forEach(v=>{const h=e.node(v);h&&(isNaN(h.layer)?h.rank-=o:c(v,h.layer))})},Dd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,vq=e=>{const t=new Af({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;yq(t,e)<o;)r=_N(t,e),s=t.hasNode(r.v)?Dd(e,r):-Dd(e,r),wN(t,e,s);return t},yq=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!Dd(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},mq=e=>{const t=new Af({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;gq(t,e)<o;)r=_N(t,e),s=t.hasNode(r.v)?Dd(e,r):-Dd(e,r),wN(t,e,s);return t},gq=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,v=o===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Dd(t,s))&&(e.setNode(v,{}),e.setEdge(o,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},_N=(e,t)=>wE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Dd(t,n):1/0),wN=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:bq,postorder:_q}=qY,wq=e=>{const t=aq(e);bN(t);const n=vq(t);ON(n),EN(n,t);let o,r;for(;o=xq(n);)r=Sq(n,t,o),Aq(n,t,o,r)},EN=(e,t)=>{let n=_q(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{Eq(e,t,o)})},Eq=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=Oq(e,t,n)},Oq=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),h=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),h=v.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(g=>{const b=g.v===n,w=b?g.w:g.v;if(w!==s){const O=b===c,S=t.edge(g).weight;if(h+=O?S:-S,Mq(e,n,w)){const P=e.edgeFromArgs(n,w).cutvalue;h+=O?-P:P}}}),h},ON=(e,t=e.nodes()[0])=>{xN(e,{},1,t)},xN=(e,t,n,o,r)=>{var s;const c=n;let v=n;const h=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(g=>{t[g]||(v=xN(e,t,v,g,o))}),h.low=c,h.lim=v++,r?h.parent=r:delete h.parent,v},xq=e=>e.edges().find(t=>e.edge(t).cutvalue<0),Sq=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let v=s,h=!1;s.lim>c.lim&&(v=c,h=!0);const g=t.edges().filter(b=>h===_T(e,e.node(b.v),v)&&h!==_T(e,e.node(b.w),v));return wE(g,b=>Dd(t,b))},Aq=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),ON(e),EN(e,t),Tq(e,t)},Tq=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=bq(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},Mq=(e,t,n)=>e.hasEdge(t,n),_T=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,Pq=e=>{switch(e.graph().ranker){case"network-simplex":Rq(e);break;case"tight-tree":wT(e);break;case"longest-path":Nq(e);break;default:wT(e)}},Nq=bN,wT=e=>{hq(e),mq(e)},Rq=e=>{wq(e)},kq=e=>{var t;const n={};let o=0;const r=s=>{var c;const v=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},Cq=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),v=Math.max(t[n].lim,t[o].lim);let h,g;h=n;do h=e.parent(h),r.push(h);while(h&&(t[h].low>c||v>t[h].lim));for(g=h,h=o;h&&h!==g;)s.push(h),h=e.parent(h);return{lca:g,path:r.concat(s.reverse())}},Dq=e=>{var t;const n=kq(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,v=e.node(c);const h=v.edgeObj;if(!h)return;const g=Cq(e,n,h.v,h.w),b=g.path,w=g.lca;let O=0,S=b[O],P=!0;for(;c!==h.w;){if(v=e.node(c),P){for(;S!==w&&((r=e.node(S))===null||r===void 0?void 0:r.maxRank)<v.rank;)O++,S=b[O];S===w&&(P=!1)}if(!P){for(;O<b.length-1&&((s=e.node(b[O+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)O++;S=b[O]}e.setParent(c,S),c=e.successors(c)[0]}})},jq=e=>{var t;const n=Fv(e,"root",{},"_root"),o=Iq(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(h=>{e.edge(h).minlen*=c});const v=Lq(e)+1;(t=e.children())===null||t===void 0||t.forEach(h=>{SN(e,n,c,v,s,o,h)}),e.graph().nodeRankFactor=c},SN=(e,t,n,o,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const h=gT(e,"_bt"),g=gT(e,"_bb"),b=e.node(c);e.setParent(h,c),b.borderTop=h,e.setParent(g,c),b.borderBottom=g,v==null||v.forEach(w=>{SN(e,t,n,o,r,s,w);const O=e.node(w),S=O.borderTop?O.borderTop:w,P=O.borderBottom?O.borderBottom:w,A=O.borderTop?o:2*o,R=S!==P?1:r-s[c]+1;e.setEdge(h,S,{minlen:R,weight:A,nestingEdge:!0}),e.setEdge(P,g,{minlen:R,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,h,{weight:0,minlen:r+s[c]})},Iq=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>o(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},Lq=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},Fq=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},ET={run:jq,cleanup:Fq},$q=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)OT(e,"borderLeft","_bl",o,s,c),OT(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},OT=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],h=Fv(e,"border",c,n);r[t][s]=h,e.setParent(h,o),v&&e.setEdge(v,h,{weight:1})},Bq=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&AN(e)},Uq=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&Gq(e),(n==="lr"||n==="rl")&&(Vq(e),AN(e))},AN=e=>{e.nodes().forEach(t=>{xT(e.node(t))}),e.edges().forEach(t=>{xT(e.edge(t))})},xT=e=>{const t=e.width;e.width=e.height,e.height=t},Gq=e=>{e.nodes().forEach(t=>{C1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>C1(r)),o.hasOwnProperty("y")&&C1(o)})},C1=e=>{e!=null&&e.y&&(e.y=-e.y)},Vq=e=>{e.nodes().forEach(t=>{D1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>D1(r)),o.hasOwnProperty("x")&&D1(o)})},D1=e=>{const t=e.x;e.x=e.y,e.y=t},ST={adjust:Bq,undo:Uq};function Wq(e){return Array.isArray(e)}function _w(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const AT=function(e){if(Wq(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},TT=e=>{const t={},n=e.nodes().filter(b=>{var w;return!(!((w=e.children(b))===null||w===void 0)&&w.length)}),o=n.map(b=>e.node(b).rank),r=_w(o),s=[];for(let b=0;b<r+1;b++)s.push([]);const c=b=>{var w;if(t.hasOwnProperty(b))return;t[b]=!0;const O=e.node(b);isNaN(O.rank)||s[O.rank].push(b),(w=e.successors(b))===null||w===void 0||w.forEach(S=>c(S))},v=n.sort((b,w)=>e.node(b).rank-e.node(w).rank),g=v.filter(b=>e.node(b).fixorder!==void 0).sort((b,w)=>e.node(b).fixorder-e.node(w).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||s[e.node(b).rank].push(b),t[b]=!0}),v==null||v.forEach(c),s},zq=(e,t,n)=>{const o=lq(n,n.map((b,w)=>w)),s=t.map(b=>{var w;const O=(w=e.outEdges(b))===null||w===void 0?void 0:w.map(S=>({pos:o[S.w]||0,weight:e.edge(S).weight}));return O==null?void 0:O.sort((S,P)=>S.pos-P.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const h=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(b=>{if(b){let w=b.pos+c;h[w]+=b.weight;let O=0;for(;w>0;)w%2&&(O+=h[w+1]),w=w-1>>1,h[w]+=b.weight;g+=b.weight*O}}),g},MT=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=zq(e,t[o-1],t[o]);return n},Hq=(e,t,n)=>{const o=Xq(e),r=new Af({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),h=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,h||o),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const b=g.v===s?g.w:g.v,w=r.edgeFromArgs(b,s),O=w!==void 0?w.weight:0;r.setEdge(b,s,{weight:e.edge(g).weight+O})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},Xq=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},Yq=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,h;for(;c;){if(v=e.parent(c),v?(h=o[v],o[v]=c):(h=r,r=c),h&&h!==c){t.setEdge(h,c);return}c=v}})},qq=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),Kq=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((v,h)=>{s[v.v]={i:h,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const h=s[v.v],g=s[v.w];h!==void 0&&g!==void 0&&(g.indegree++,h.out.push(s[v.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,v=>!v.indegree);return Zq(c)},Zq=e=>{var t,n;const o=[],r=h=>g=>{g.merged||(g.barycenter===void 0||h.barycenter===void 0||g.barycenter>=h.barycenter)&&Jq(h,g)},s=h=>g=>{g.in.push(h),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const h=e.pop();o.push(h),(t=h.in.reverse())===null||t===void 0||t.forEach(g=>r(h)(g)),(n=h.out)===null||n===void 0||n.forEach(g=>s(h)(g))}const c=o.filter(h=>!h.merged),v=["vs","i","barycenter","weight"];return c.map(h=>{const g={};return v==null||v.forEach(b=>{h[b]!==void 0&&(g[b]=h[b])}),g})},Jq=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},Qq=(e,t,n,o)=>{const r=cq(e,O=>{const S=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return o?!S&&O.hasOwnProperty("barycenter"):S||O.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((O,S)=>-O.i- -S.i),v=[];let h=0,g=0,b=0;s==null||s.sort(eK(!!t,!!n)),b=PT(v,c,b),s==null||s.forEach(O=>{var S;b+=(S=O.vs)===null||S===void 0?void 0:S.length,v.push(O.vs),h+=O.barycenter*O.weight,g+=O.weight,b=PT(v,c,b)});const w={vs:v.flat()};return g&&(w.barycenter=h/g,w.weight=g),w},PT=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},eK=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},TN=(e,t,n,o,r,s)=>{var c,v,h,g;let b=e.children(t);const w=e.node(t),O=w?w.borderLeft:void 0,S=w?w.borderRight:void 0,P={};O&&(b=b==null?void 0:b.filter(k=>k!==O&&k!==S));const A=qq(e,b||[]);A==null||A.forEach(k=>{var B;if(!((B=e.children(k.v))===null||B===void 0)&&B.length){const q=TN(e,k.v,n,o,s);P[k.v]=q,q.hasOwnProperty("barycenter")&&nK(k,q)}});const R=Kq(A,n);tK(R,P),(c=R.filter(k=>k.vs.length>0))===null||c===void 0||c.forEach(k=>{const B=e.node(k.vs[0]);B&&(k.fixorder=B.fixorder,k.order=B.order)});const j=Qq(R,o,r,s);if(O&&(j.vs=[O,j.vs,S].flat(),!((v=e.predecessors(O))===null||v===void 0)&&v.length)){const k=e.node(((h=e.predecessors(O))===null||h===void 0?void 0:h[0])||""),B=e.node(((g=e.predecessors(S))===null||g===void 0?void 0:g[0])||"");j.hasOwnProperty("barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+k.order+B.order)/(j.weight+2),j.weight+=2}return j},tK=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},nK=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},rK=(e,t)=>{const n=yN(e),o=[],r=[];for(let b=1;b<n+1;b++)o.push(b);for(let b=n-1;b>-1;b--)r.push(b);const s=NT(e,o,"inEdges"),c=NT(e,r,"outEdges");let v=TT(e);j1(e,v);let h=Number.POSITIVE_INFINITY,g;for(let b=0,w=0;w<4;++b,++w){RT(b%2?s:c,b%4>=2,!1,t),v=jy(e);const O=MT(e,v);O<h&&(w=0,g=Yg(v),h=O)}v=TT(e),j1(e,v);for(let b=0,w=0;w<4;++b,++w){RT(b%2?s:c,b%4>=2,!0,t),v=jy(e);const O=MT(e,v);O<h&&(w=0,g=Yg(v),h=O)}j1(e,g)},NT=(e,t,n)=>t.map(o=>Hq(e,o,n)),RT=(e,t,n,o)=>{const r=new Af;e==null||e.forEach(s=>{var c;const v=s.graph().root,h=TN(s,v,r,t,n,o);for(let g=0;g<((c=h.vs)===null||c===void 0?void 0:c.length);g++){const b=s.node(h.vs[g]);b&&(b.order=g)}Yq(s,r,h.vs)})},j1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class oK extends Lv{}const iK=(e,t)=>{const n={},o=(r,s)=>{let c=0,v=0;const h=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((b,w)=>{var O;const S=lK(e,b),P=S?e.node(S).order:h;(S||b===g)&&((O=s.slice(v,w+1))===null||O===void 0||O.forEach(A=>{var R;(R=e.predecessors(A))===null||R===void 0||R.forEach(j=>{var k;const B=e.node(j),q=B.order;(q<c||P<q)&&!(B.dummy&&(!((k=e.node(A))===null||k===void 0)&&k.dummy))&&MN(n,j,A)})}),v=w+1,c=P)}),s};return t!=null&&t.length&&t.reduce(o),n},aK=(e,t)=>{const n={};function o(v,h,g,b,w){var O,S;let P;for(let A=h;A<g;A++)P=v[A],!((O=e.node(P))===null||O===void 0)&&O.dummy&&((S=e.predecessors(P))===null||S===void 0||S.forEach(R=>{const j=e.node(R);j.dummy&&(j.order<b||j.order>w)&&MN(n,R,P)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,h){const g=r(v);h.get(g)||(o(...v),h.set(g,!0))}const c=(v,h)=>{let g=-1,b,w=0;const O=new Map;return h==null||h.forEach((S,P)=>{var A;if(((A=e.node(S))===null||A===void 0?void 0:A.dummy)==="border"){const R=e.predecessors(S)||[];R.length&&(b=e.node(R[0]).order,s([h,w,P,g,b],O),w=P,g=b)}s([h,w,h.length,b,v.length],O)}),h};return t!=null&&t.length&&t.reduce(c),n},lK=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},MN=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},uK=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},sK=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((h,g)=>{r[h]=h,s[h]=h,c[h]=g})}),t==null||t.forEach(v=>{let h=-1;v==null||v.forEach(g=>{let b=o(g);if(b.length){b=b.sort((O,S)=>c[O]-c[S]);const w=(b.length-1)/2;for(let O=Math.floor(w),S=Math.ceil(w);O<=S;++O){const P=b[O];s[g]===g&&h<c[P]&&!uK(n,g,P)&&(s[P]=g,s[g]=r[g]=r[P],h=c[P])}}})}),{root:r,align:s}},cK=(e,t,n,o,r)=>{var s;const c={},v=fK(e,t,n,r),h=r?"borderLeft":"borderRight",g=(O,S)=>{let P=v.nodes(),A=P.pop();const R={};for(;A;)R[A]?O(A):(R[A]=!0,P.push(A),P=P.concat(S(A))),A=P.pop()},b=O=>{c[O]=(v.inEdges(O)||[]).reduce((S,P)=>Math.max(S,(c[P.v]||0)+v.edge(P)),0)},w=O=>{const S=(v.outEdges(O)||[]).reduce((A,R)=>Math.min(A,(c[R.w]||0)-v.edge(R)),Number.POSITIVE_INFINITY),P=e.node(O);S!==Number.POSITIVE_INFINITY&&P.borderType!==h&&(c[O]=Math.max(c[O],S))};return g(b,v.predecessors.bind(v)),g(w,v.successors.bind(v)),(s=Object.values(o))===null||s===void 0||s.forEach(O=>{c[O]=c[n[O]]}),c},fK=(e,t,n,o)=>{const r=new oK,s=e.graph(),c=vK(s.nodesep,s.edgesep,o);return t==null||t.forEach(v=>{let h;v==null||v.forEach(g=>{const b=n[g];if(r.setNode(b),h){const w=n[h],O=r.edgeFromArgs(w,b);r.setEdge(w,b,Math.max(c(e,g,h),O||0))}h=g})}),r},dK=(e,t)=>wE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const v=n[c],h=yK(e,c)/2;r=Math.max(v+h,r),s=Math.min(v-h,s)}),r-s});function pK(e,t){const n=Object.values(t),o=AT(n),r=_w(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,h=e[v];let g;if(h===t)return;const b=Object.values(h);g=c==="l"?o-AT(b):r-_w(b),g&&(e[v]={},Object.keys(h).forEach(w=>{e[v][w]=h[w]+g}))})})}const hK=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},vK=(e,t,n)=>(o,r,s)=>{const c=o.node(r),v=o.node(s);let h=0,g;if(h+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(h+=n?g:-g),g=0,h+=(c.dummy?t:e)/2,h+=(v.dummy?t:e)/2,h+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(h+=n?g:-g),g=0,h},yK=(e,t)=>e.node(t).width||0,mK=e=>{const t=jy(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=o+c/2}),o+=c+n})},gK=e=>{const t=jy(e),n=Object.assign(iK(e,t),aK(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(w=>Object.values(w).reverse()));const h=(c==="u"?e.predecessors:e.successors).bind(e),g=sK(e,r,n,h),b=cK(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(b).forEach(w=>b[w]=-b[w]),o[c+v]=b})});const s=dK(e,o);return s&&pK(o,s),hK(o,e.graph().align)},bK=e=>{var t;const n=vN(e);mK(n);const o=gK(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},_K=(e,t)=>{const o=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},wK=(e,t)=>{const n=t&&t.debugTiming?mN:gN;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{OK(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>RK(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{kK(o)});try{n("  runLayout",()=>{EK(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{xK(e,o)})})},EK=(e,t,n)=>{t("    removeSelfEdges",()=>{UK(e)}),t("    acyclic",()=>{yT.run(e)}),t("    nestingGraph.run",()=>{ET.run(e)}),t("    rank",()=>{Pq(vN(e))}),t("    injectEdgeLabelProxies",()=>{CK(e)}),t("    removeEmptyRanks",()=>{sq(e)}),t("    nestingGraph.cleanup",()=>{ET.cleanup(e)}),t("    normalizeRanks",()=>{uq(e)}),t("    assignRankMinMax",()=>{DK(e)}),t("    removeEdgeLabelProxies",()=>{jK(e)}),t("    normalize.run",()=>{bT.run(e)}),t("    parentDummyChains",()=>{Dq(e)}),t("    addBorderSegments",()=>{$q(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{_K(e,n.nodeOrder)}),t("    order",()=>{rK(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{GK(e)}),t("    adjustCoordinateSystem",()=>{ST.adjust(e)}),t("    position",()=>{bK(e)}),t("    positionSelfEdges",()=>{VK(e)}),t("    removeBorderNodes",()=>{BK(e)}),t("    normalize.undo",()=>{bT.undo(e)}),t("    fixupEdgeLabelCoords",()=>{FK(e)}),t("    undoCoordinateSystem",()=>{ST.undo(e)}),t("    translateGraph",()=>{IK(e)}),t("    assignNodeIntersects",()=>{LK(e)}),t("    reversePoints",()=>{$K(e)}),t("    acyclic.undo",()=>{yT.undo(e)})},OK=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},xK=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},SK=["nodesep","edgesep","ranksep","marginx","marginy"],AK={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},I1=["acyclicer","ranker","rankdir","align"],TK=["width","height","layer","fixorder"],MK={width:0,height:0},PK=["minlen","weight","width","height","labeloffset"],NK={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L1=["labelpos"],RK=e=>{const t=new Af({multigraph:!0,compound:!0}),n=$1(e.graph()),o={};return I1==null||I1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},AK,F1(n,SK),o)),e.nodes().forEach(r=>{const s=$1(e.node(r)),c=Object.assign(Object.assign({},MK),s),v=F1(c,TK);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=$1(e.edge(r)),c={};L1==null||L1.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},NK,F1(s,PK),c))}),t},kK=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},CK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Fv(e,"edge-proxy",s,"_ep")}})},DK=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},jK=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},IK=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,h=g=>{if(!g)return;const b=g.x,w=g.y,O=g.width,S=g.height;!isNaN(b)&&!isNaN(O)&&(t===void 0&&(t=b-O/2),t=Math.min(t,b-O/2),n=Math.max(n,b+O/2)),!isNaN(w)&&!isNaN(S)&&(o===void 0&&(o=w-S/2),o=Math.min(o,w-S/2),r=Math.max(r,w+S/2))};e.nodes().forEach(g=>{h(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&h(b)}),t-=c,o-=v,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=o)}),e.edges().forEach(g=>{var b;const w=e.edge(g);(b=w.points)===null||b===void 0||b.forEach(O=>{O.x-=t,O.y-=o}),w.hasOwnProperty("x")&&(w.x-=t),w.hasOwnProperty("y")&&(w.y-=o)}),s.width=n-t+c,s.height=r-o+v},LK=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(mT(o,s)),n.points.push(mT(r,c))})},FK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},$K=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},BK=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),h=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(h==null?void 0:h.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((h==null?void 0:h.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},UK=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},GK=e=>{const t=jy(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+o,(c=v.selfEdges)===null||c===void 0||c.forEach(h=>{Fv(e,"selfedge",{width:h.label.width,height:h.label.height,rank:v.rank,order:s+ ++o,e:h.e,label:h.label},"_se")}),delete v.selfEdges})})},VK=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,v=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},F1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},$1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},WK={layout:wK,util:{time:mN,notime:gN}};class zK extends cY{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:v,rankdir:h,combos:g,begin:b,radial:w,comboEdges:O=[],vedges:S=[]}=s;if(!c)return;const P=s.edges||[],A=new Af({multigraph:!0,compound:!0});s.nodeMap={};const R={};c.forEach(H=>{s.nodeMap[H.id]=H,H.comboId&&(R[H.comboId]=R[H.comboId]||[],R[H.comboId].push(H.id))});let j=[];const k={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(H=>{k[H]=!0,j.push(s.nodeMap[H])}),c.forEach(H=>{k[H.id]||j.push(H)})):j=c;let B;v?rT(v)?B=()=>v:B=()=>[v,v]:B=H=>H.size?rT(H.size)?H.size:uN(H.size)?[H.size.width||40,H.size.height||40]:[H.size,H.size]:[40,40];const q=oT(s.ranksep,50,s.ranksepFunc),X=oT(s.nodesep,50,s.nodesepFunc);let W=X,ee=q;(h==="LR"||h==="RL")&&(W=q,ee=X),A.setDefaultEdgeLabel(()=>({})),A.setGraph(s);const J={};this.sortByCombo&&g&&g.forEach(H=>{if(J[H.id]=H,H.collapsed){const se=B(H),Re=ee(H),Se=W(H),ze=se[0]+2*Se,Be=se[1]+2*Re;A.setNode(H.id,{width:ze,height:Be})}H.parentId&&(J[H.parentId]||A.setNode(H.parentId,{}),A.setParent(H.id,H.parentId))}),j.filter(H=>H.layout!==!1).forEach(H=>{const se=B(H),Re=ee(H),Se=W(H),ze=se[0]+2*Se,Be=se[1]+2*Re,Oe=H.layer;Xg(Oe)?A.setNode(H.id,{width:ze,height:Be,layer:Oe}):A.setNode(H.id,{width:ze,height:Be}),this.sortByCombo&&H.comboId&&(J[H.comboId]||(J[H.comboId]={id:H.comboId},A.setNode(H.comboId,{})),A.setParent(H.id,H.comboId))}),P.forEach(H=>{const se=Zh(H,"source"),Re=Zh(H,"target");this.layoutNode(se)&&this.layoutNode(Re)&&A.setEdge(se,Re,{weight:H.weight||1})}),(n=O==null?void 0:O.concat(S||[]))===null||n===void 0||n.forEach(H=>{var se,Re;const{source:Se,target:ze}=H,Be=!((se=J[Se])===null||se===void 0)&&se.collapsed?[Se]:R[Se]||[Se],Oe=!((Re=J[ze])===null||Re===void 0)&&Re.collapsed?[ze]:R[ze]||[ze];Be.forEach(ae=>{Oe.forEach(ve=>{A.setEdge(ae,ve,{weight:H.weight||1})})})});let L;!((o=s.preset)===null||o===void 0)&&o.nodes&&(L=new Af({multigraph:!0,compound:!0}),s.preset.nodes.forEach(H=>{L==null||L.setNode(H.id,H)})),WK.layout(A,{prevGraph:L,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const G=[0,0];if(b){let H=1/0,se=1/0;A.nodes().forEach(Re=>{const Se=A.node(Re);H>Se.x&&(H=Se.x),se>Se.y&&(se=Se.y)}),A.edges().forEach(Re=>{var Se;(Se=A.edge(Re).points)===null||Se===void 0||Se.forEach(Be=>{H>Be.x&&(H=Be.x),se>Be.y&&(se=Be.y)})}),G[0]=b[0]-H,G[1]=b[1]-se}const Y=h==="LR"||h==="RL";if(w){const{focusNode:H,ranksep:se,getRadialPos:Re}=this,Se=fY(H)?H:H==null?void 0:H.id,ze=Se?(r=A.node(Se))===null||r===void 0?void 0:r._rank:0,Be=[],Oe=Y?"y":"x",ae=Y?"height":"width";let ve=1/0,Pe=-1/0;A.nodes().forEach(ge=>{const Ae=A.node(ge);if(!s.nodeMap[ge])return;const ht=X(s.nodeMap[ge]);if(ze===0)Be[Ae._rank]||(Be[Ae._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Be[Ae._rank].nodes.push(ge),Be[Ae._rank].totalWidth+=ht*2+Ae[ae],Be[Ae._rank].maxSize<Math.max(Ae.width,Ae.height)&&(Be[Ae._rank].maxSize=Math.max(Ae.width,Ae.height));else{const rn=Ae._rank-ze;if(rn===0)Be[rn]||(Be[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),Be[rn].nodes.push(ge),Be[rn].totalWidth+=ht*2+Ae[ae],Be[rn].maxSize<Math.max(Ae.width,Ae.height)&&(Be[rn].maxSize=Math.max(Ae.width,Ae.height));else{const yn=Math.abs(rn);Be[yn]||(Be[yn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Be[yn].totalWidth+=ht*2+Ae[ae],Be[yn].maxSize<Math.max(Ae.width,Ae.height)&&(Be[yn].maxSize=Math.max(Ae.width,Ae.height)),rn<0?Be[yn].left.push(ge):Be[yn].right.push(ge)}}const Wt=Ae[Oe]-Ae[ae]/2-ht,Ot=Ae[Oe]+Ae[ae]/2+ht;Wt<ve&&(ve=Wt),Ot>Pe&&(Pe=Ot)});let Ke=se||50;const je={},at=(Pe-ve)/.9,gt=[(ve+Pe-at)*.5,(ve+Pe+at)*.5],Mt=(ge,Ae,ht=-1/0,Wt=[0,1])=>{let Ot=ht;return ge.forEach(rn=>{const yn=A.node(rn);je[rn]=Ae;const{x:Tn,y:pn}=Re(yn[Oe],gt,at,Ae,Wt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Tn+G[0],s.nodeMap[rn].y=pn+G[1],s.nodeMap[rn]._order=yn._order;const ft=q(s.nodeMap[rn]);Ot<ft&&(Ot=ft)}),Ot};let Xt=!0;const De=0;Be.forEach(ge=>{var Ae,ht,Wt,Ot,rn,yn,Tn;if(!(!((Ae=ge==null?void 0:ge.nodes)===null||Ae===void 0)&&Ae.length)&&!(!((ht=ge==null?void 0:ge.left)===null||ht===void 0)&&ht.length)&&!(!((Wt=ge==null?void 0:ge.right)===null||Wt===void 0)&&Wt.length))return;if(Xt&&ge.nodes.length===1){const ft=ge.nodes[0];if(!s.nodeMap[ft])return;s.nodeMap[ft].x=G[0],s.nodeMap[ft].y=G[1],je[ge.nodes[0]]=0,Ke=q(s.nodeMap[ft]),Xt=!1;return}Ke=Math.max(Ke,ge.totalWidth/(2*Math.PI));let pn=-1/0;if(ze===0||!((Ot=ge.nodes)===null||Ot===void 0)&&Ot.length)pn=Mt(ge.nodes,Ke,pn,[0,1]);else{const ft=((rn=ge.left)===null||rn===void 0?void 0:rn.length)/(((yn=ge.left)===null||yn===void 0?void 0:yn.length)+((Tn=ge.right)===null||Tn===void 0?void 0:Tn.length));pn=Mt(ge.left,Ke,pn,[0,ft]),pn=Mt(ge.right,Ke,pn,[ft+.05,1])}Ke+=pn,Xt=!1,De-ge.maxSize}),A.edges().forEach(ge=>{var Ae,ht,Wt;const Ot=A.edge(ge),rn=P.findIndex(yn=>{const Tn=Zh(yn,"source"),pn=Zh(yn,"target");return Tn===ge.v&&pn===ge.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[rn].type!=="loop"){const yn=Oe==="x"?"y":"x",Tn=(Ae=Ot==null?void 0:Ot.points)===null||Ae===void 0?void 0:Ae.slice(1,Ot.points.length-1),pn=[],ft=(ht=A.node(ge.v))===null||ht===void 0?void 0:ht[yn],On=ft-((Wt=A.node(ge.w))===null||Wt===void 0?void 0:Wt[yn]),Fe=je[ge.v],mn=Fe-je[ge.w];Tn==null||Tn.forEach(Kn=>{const ne=(Kn[yn]-ft)/On*mn+Fe,$n=Re(Kn[Oe],gt,at,ne);pn.push({x:$n.x+G[0],y:$n.y+G[1]})}),P[rn].controlPoints=pn}})}else{const H=new Set,Re=h==="BT"||h==="RL"?(Oe,ae)=>ae-Oe:(Oe,ae)=>Oe-ae;A.nodes().forEach(Oe=>{const ae=A.node(Oe);if(!ae)return;let ve=this.nodeMap[Oe];ve||(ve=g==null?void 0:g.find(Pe=>Pe.id===Oe)),ve&&(ve.x=ae.x+G[0],ve.y=ae.y+G[1],ve._order=ae._order,H.add(Y?ve.x:ve.y))});const Se=Array.from(H).sort(Re),ze=Y?(Oe,ae)=>Oe.x!==ae.x:(Oe,ae)=>Oe.y!==ae.y,Be=Y?(Oe,ae,ve)=>{const Pe=Math.max(ae.y,ve.y),Ke=Math.min(ae.y,ve.y);return Oe.filter(je=>je.y<=Pe&&je.y>=Ke)}:(Oe,ae,ve)=>{const Pe=Math.max(ae.x,ve.x),Ke=Math.min(ae.x,ve.x);return Oe.filter(je=>je.x<=Pe&&je.x>=Ke)};A.edges().forEach(Oe=>{var ae;const ve=A.edge(Oe),Pe=P.findIndex(Ke=>{const je=Zh(Ke,"source"),at=Zh(Ke,"target");return je===Oe.v&&at===Oe.w});if(!(Pe<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[Pe].type!=="loop"){(ae=ve==null?void 0:ve.points)===null||ae===void 0||ae.forEach(at=>{at.x+=G[0],at.y+=G[1]});const Ke=s.nodeMap[Oe.v],je=s.nodeMap[Oe.w];P[Pe].controlPoints=HK(ve==null?void 0:ve.points,Ke,je,Se,Y,ze,Be)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:P}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const HK=(e,t,n,o,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:h,y:g}=t,{x:b,y:w}=n;if(r&&(h=t.y,g=t.x,b=n.y,w=n.x),w!==g&&h!==b){const O=o.indexOf(g),S=o[O+1];if(S){const R=v[0],j=r?{x:(g+S)/2,y:(R==null?void 0:R.y)||b}:{x:(R==null?void 0:R.x)||b,y:(g+S)/2};(!R||s(R,j))&&v.unshift(j)}const P=o.indexOf(w),A=Math.abs(P-O);if(A===1)v=c(v,t,n),v.length||v.push(r?{x:(g+w)/2,y:h}:{x:h,y:(g+w)/2});else if(A>1){const R=o[P-1];if(R){const j=v[v.length-1],k=r?{x:(w+R)/2,y:(j==null?void 0:j.y)||b}:{x:(j==null?void 0:j.x)||h,y:(w+R)/2};(!j||s(j,k))&&v.push(k)}}}}return v};var kT,CT,DT,jT;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(kT||(kT={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(CT||(CT={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(DT||(DT={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(jT||(jT={}));var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EE(e,t){return e(t={exports:{}},t.exports),t.exports}var XK=function(){this.__data__=[],this.size=0},$v=function(e,t){return e===t||e!=e&&t!=t},wb=function(e,t){for(var n=e.length;n--;)if($v(e[n][0],t))return n;return-1},YK=Array.prototype.splice,qK=function(e){var t=this.__data__,n=wb(t,e);return!(n<0)&&(n==t.length-1?t.pop():YK.call(t,n,1),--this.size,!0)},KK=function(e){var t=this.__data__,n=wb(t,e);return n<0?void 0:t[n][1]},ZK=function(e){return wb(this.__data__,e)>-1},JK=function(e,t){var n=this.__data__,o=wb(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function ev(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ev.prototype.clear=XK,ev.prototype.delete=qK,ev.prototype.get=KK,ev.prototype.has=ZK,ev.prototype.set=JK;var Eb=ev,QK=function(){this.__data__=new Eb,this.size=0},eZ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},tZ=function(e){return this.__data__.get(e)},nZ=function(e){return this.__data__.has(e)},PN=typeof sg=="object"&&sg&&sg.Object===Object&&sg,rZ=typeof self=="object"&&self&&self.Object===Object&&self,ws=PN||rZ||Function("return this")(),Bu=ws.Symbol,NN=Object.prototype,oZ=NN.hasOwnProperty,iZ=NN.toString,fy=Bu?Bu.toStringTag:void 0,aZ=function(e){var t=oZ.call(e,fy),n=e[fy];try{e[fy]=void 0;var o=!0}catch{}var r=iZ.call(e);return o&&(t?e[fy]=n:delete e[fy]),r},lZ=Object.prototype.toString,uZ=function(e){return lZ.call(e)},IT=Bu?Bu.toStringTag:void 0,$d=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":IT&&IT in Object(e)?aZ(e):uZ(e)},Rl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},LT,em=function(e){if(!Rl(e))return!1;var t=$d(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},B1=ws["__core-js_shared__"],FT=(LT=/[^.]+$/.exec(B1&&B1.keys&&B1.keys.IE_PROTO||""))?"Symbol(src)_1."+LT:"",sZ=function(e){return!!FT&&FT in e},cZ=Function.prototype.toString,Zp=function(e){if(e!=null){try{return cZ.call(e)}catch{}try{return e+""}catch{}}return""},fZ=/^\[object .+?Constructor\]$/,dZ=Function.prototype,pZ=Object.prototype,hZ=dZ.toString,vZ=pZ.hasOwnProperty,yZ=RegExp("^"+hZ.call(vZ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mZ=function(e){return!(!Rl(e)||sZ(e))&&(em(e)?yZ:fZ).test(Zp(e))},gZ=function(e,t){return e==null?void 0:e[t]},Jp=function(e,t){var n=gZ(e,t);return mZ(n)?n:void 0},Iy=Jp(ws,"Map"),Ly=Jp(Object,"create"),bZ=function(){this.__data__=Ly?Ly(null):{},this.size=0},_Z=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wZ=Object.prototype.hasOwnProperty,EZ=function(e){var t=this.__data__;if(Ly){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return wZ.call(t,e)?t[e]:void 0},OZ=Object.prototype.hasOwnProperty,xZ=function(e){var t=this.__data__;return Ly?t[e]!==void 0:OZ.call(t,e)},SZ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ly&&t===void 0?"__lodash_hash_undefined__":t,this};function tv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}tv.prototype.clear=bZ,tv.prototype.delete=_Z,tv.prototype.get=EZ,tv.prototype.has=xZ,tv.prototype.set=SZ;var $T=tv,AZ=function(){this.size=0,this.__data__={hash:new $T,map:new(Iy||Eb),string:new $T}},TZ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Ob=function(e,t){var n=e.__data__;return TZ(t)?n[typeof t=="string"?"string":"hash"]:n.map},MZ=function(e){var t=Ob(this,e).delete(e);return this.size-=t?1:0,t},PZ=function(e){return Ob(this,e).get(e)},NZ=function(e){return Ob(this,e).has(e)},RZ=function(e,t){var n=Ob(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function nv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}nv.prototype.clear=AZ,nv.prototype.delete=MZ,nv.prototype.get=PZ,nv.prototype.has=NZ,nv.prototype.set=RZ;var xb=nv,kZ=function(e,t){var n=this.__data__;if(n instanceof Eb){var o=n.__data__;if(!Iy||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new xb(o)}return n.set(e,t),this.size=n.size,this};function rv(e){var t=this.__data__=new Eb(e);this.size=t.size}rv.prototype.clear=QK,rv.prototype.delete=eZ,rv.prototype.get=tZ,rv.prototype.has=nZ,rv.prototype.set=kZ;var hv=rv,OE=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},qg=function(){try{var e=Jp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Sb=function(e,t,n){t=="__proto__"&&qg?qg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},CZ=Object.prototype.hasOwnProperty,Ab=function(e,t,n){var o=e[t];CZ.call(e,t)&&$v(o,n)&&(n!==void 0||t in e)||Sb(e,t,n)},tm=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],h=o?o(n[v],e[v],v,n,e):void 0;h===void 0&&(h=e[v]),r?Sb(n,v,h):Ab(n,v,h)}return n},DZ=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},bs=function(e){return e!=null&&typeof e=="object"},BT=function(e){return bs(e)&&$d(e)=="[object Arguments]"},RN=Object.prototype,jZ=RN.hasOwnProperty,IZ=RN.propertyIsEnumerable,xv=BT(function(){return arguments}())?BT:function(e){return bs(e)&&jZ.call(e,"callee")&&!IZ.call(e,"callee")},Si=Array.isArray,LZ=function(){return!1},Up=EE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=(r?r.isBuffer:void 0)||LZ;e.exports=s}),FZ=/^(?:0|[1-9]\d*)$/,Tb=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&FZ.test(e))&&e>-1&&e%1==0&&e<t},xE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ei={};ei["[object Float32Array]"]=ei["[object Float64Array]"]=ei["[object Int8Array]"]=ei["[object Int16Array]"]=ei["[object Int32Array]"]=ei["[object Uint8Array]"]=ei["[object Uint8ClampedArray]"]=ei["[object Uint16Array]"]=ei["[object Uint32Array]"]=!0,ei["[object Arguments]"]=ei["[object Array]"]=ei["[object ArrayBuffer]"]=ei["[object Boolean]"]=ei["[object DataView]"]=ei["[object Date]"]=ei["[object Error]"]=ei["[object Function]"]=ei["[object Map]"]=ei["[object Number]"]=ei["[object Object]"]=ei["[object RegExp]"]=ei["[object Set]"]=ei["[object String]"]=ei["[object WeakMap]"]=!1;var $Z=function(e){return bs(e)&&xE(e.length)&&!!ei[$d(e)]},Mb=function(e){return function(t){return e(t)}},Sv=EE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&PN.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),UT=Sv&&Sv.isTypedArray,nm=UT?Mb(UT):$Z,BZ=Object.prototype.hasOwnProperty,kN=function(e,t){var n=Si(e),o=!n&&xv(e),r=!n&&!o&&Up(e),s=!n&&!o&&!r&&nm(e),c=n||o||r||s,v=c?DZ(e.length,String):[],h=v.length;for(var g in e)!t&&!BZ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Tb(g,h))||v.push(g);return v},UZ=Object.prototype,Pb=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||UZ)},CN=function(e,t){return function(n){return e(t(n))}},GZ=CN(Object.keys,Object),VZ=Object.prototype.hasOwnProperty,SE=function(e){if(!Pb(e))return GZ(e);var t=[];for(var n in Object(e))VZ.call(e,n)&&n!="constructor"&&t.push(n);return t},Nf=function(e){return e!=null&&xE(e.length)&&!em(e)},Bd=function(e){return Nf(e)?kN(e):SE(e)},WZ=function(e,t){return e&&tm(t,Bd(t),e)},zZ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},HZ=Object.prototype.hasOwnProperty,XZ=function(e){if(!Rl(e))return zZ(e);var t=Pb(e),n=[];for(var o in e)(o!="constructor"||!t&&HZ.call(e,o))&&n.push(o);return n},Qp=function(e){return Nf(e)?kN(e,!0):XZ(e)},YZ=function(e,t){return e&&tm(t,Qp(t),e)},DN=EE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var h=c.length,g=s?s(h):new c.constructor(h);return c.copy(g),g}}),jN=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},IN=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},LN=function(){return[]},qZ=Object.prototype.propertyIsEnumerable,GT=Object.getOwnPropertySymbols,AE=GT?function(e){return e==null?[]:(e=Object(e),IN(GT(e),function(t){return qZ.call(e,t)}))}:LN,KZ=function(e,t){return tm(e,AE(e),t)},TE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},Nb=CN(Object.getPrototypeOf,Object),FN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)TE(t,AE(e)),e=Nb(e);return t}:LN,ZZ=function(e,t){return tm(e,FN(e),t)},$N=function(e,t,n){var o=t(e);return Si(e)?o:TE(o,n(e))},ww=function(e){return $N(e,Bd,AE)},JZ=function(e){return $N(e,Qp,FN)},Ew=Jp(ws,"DataView"),Ow=Jp(ws,"Promise"),vv=Jp(ws,"Set"),xw=Jp(ws,"WeakMap"),QZ=Zp(Ew),eJ=Zp(Iy),tJ=Zp(Ow),nJ=Zp(vv),rJ=Zp(xw),Ip=$d;(Ew&&Ip(new Ew(new ArrayBuffer(1)))!="[object DataView]"||Iy&&Ip(new Iy)!="[object Map]"||Ow&&Ip(Ow.resolve())!="[object Promise]"||vv&&Ip(new vv)!="[object Set]"||xw&&Ip(new xw)!="[object WeakMap]")&&(Ip=function(e){var t=$d(e),n=t=="[object Object]"?e.constructor:void 0,o=n?Zp(n):"";if(o)switch(o){case QZ:return"[object DataView]";case eJ:return"[object Map]";case tJ:return"[object Promise]";case nJ:return"[object Set]";case rJ:return"[object WeakMap]"}return t});var Gp=Ip,oJ=Object.prototype.hasOwnProperty,iJ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&oJ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Kg=ws.Uint8Array,ME=function(e){var t=new e.constructor(e.byteLength);return new Kg(t).set(new Kg(e)),t},aJ=function(e,t){var n=t?ME(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},lJ=/\w*$/,uJ=function(e){var t=new e.constructor(e.source,lJ.exec(e));return t.lastIndex=e.lastIndex,t},VT=Bu?Bu.prototype:void 0,WT=VT?VT.valueOf:void 0,sJ=function(e){return WT?Object(WT.call(e)):{}},BN=function(e,t){var n=t?ME(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},cJ=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return ME(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return aJ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return BN(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return uJ(e);case"[object Set]":return new o;case"[object Symbol]":return sJ(e)}},zT=Object.create,UN=function(){function e(){}return function(t){if(!Rl(t))return{};if(zT)return zT(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),GN=function(e){return typeof e.constructor!="function"||Pb(e)?{}:UN(Nb(e))},fJ=function(e){return bs(e)&&Gp(e)=="[object Map]"},HT=Sv&&Sv.isMap,dJ=HT?Mb(HT):fJ,pJ=function(e){return bs(e)&&Gp(e)=="[object Set]"},XT=Sv&&Sv.isSet,hJ=XT?Mb(XT):pJ,Wo={};Wo["[object Arguments]"]=Wo["[object Array]"]=Wo["[object ArrayBuffer]"]=Wo["[object DataView]"]=Wo["[object Boolean]"]=Wo["[object Date]"]=Wo["[object Float32Array]"]=Wo["[object Float64Array]"]=Wo["[object Int8Array]"]=Wo["[object Int16Array]"]=Wo["[object Int32Array]"]=Wo["[object Map]"]=Wo["[object Number]"]=Wo["[object Object]"]=Wo["[object RegExp]"]=Wo["[object Set]"]=Wo["[object String]"]=Wo["[object Symbol]"]=Wo["[object Uint8Array]"]=Wo["[object Uint8ClampedArray]"]=Wo["[object Uint16Array]"]=Wo["[object Uint32Array]"]=!0,Wo["[object Error]"]=Wo["[object Function]"]=Wo["[object WeakMap]"]=!1;var VN=function e(t,n,o,r,s,c){var v,h=1&n,g=2&n,b=4&n;if(o&&(v=s?o(t,r,s,c):o(t)),v!==void 0)return v;if(!Rl(t))return t;var w=Si(t);if(w){if(v=iJ(t),!h)return jN(t,v)}else{var O=Gp(t),S=O=="[object Function]"||O=="[object GeneratorFunction]";if(Up(t))return DN(t,h);if(O=="[object Object]"||O=="[object Arguments]"||S&&!s){if(v=g||S?{}:GN(t),!h)return g?ZZ(t,YZ(v,t)):KZ(t,WZ(v,t))}else{if(!Wo[O])return s?t:{};v=cJ(t,O,h)}}c||(c=new hv);var P=c.get(t);if(P)return P;c.set(t,v),hJ(t)?t.forEach(function(R){v.add(e(R,n,o,R,t,c))}):dJ(t)&&t.forEach(function(R,j){v.set(j,e(R,n,o,j,t,c))});var A=w?void 0:(b?g?JZ:ww:g?Qp:Bd)(t);return OE(A||t,function(R,j){A&&(R=t[j=R]),Ab(v,j,e(R,n,o,j,t,c))}),v},vJ=function(e){return VN(e,4)},PE=function(e){return function(){return e}},NE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),v=c.length;v--;){var h=c[e?v:++r];if(n(s[h],h,s)===!1)break}return t}}(),RE=function(e,t){return e&&NE(e,t,Bd)},Rb=function(e,t){return function(n,o){if(n==null)return n;if(!Nf(n))return e(n,o);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&o(c[s],s,c)!==!1;);return n}}(RE),eh=function(e){return e},WN=function(e){return typeof e=="function"?e:eh},zN=function(e,t){return(Si(e)?OE:Rb)(e,WN(t))},HN=zN,yJ=function(e,t){var n=[];return Rb(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},mJ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},gJ=function(e){return this.__data__.has(e)};function Og(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new xb;++t<n;)this.add(e[t])}Og.prototype.add=Og.prototype.push=mJ,Og.prototype.has=gJ;var XN=Og,bJ=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},YN=function(e,t){return e.has(t)},qN=function(e,t,n,o,r,s){var c=1&n,v=e.length,h=t.length;if(v!=h&&!(c&&h>v))return!1;var g=s.get(e),b=s.get(t);if(g&&b)return g==t&&b==e;var w=-1,O=!0,S=2&n?new XN:void 0;for(s.set(e,t),s.set(t,e);++w<v;){var P=e[w],A=t[w];if(o)var R=c?o(A,P,w,t,e,s):o(P,A,w,e,t,s);if(R!==void 0){if(R)continue;O=!1;break}if(S){if(!bJ(t,function(j,k){if(!YN(S,k)&&(P===j||r(P,j,n,o,s)))return S.push(k)})){O=!1;break}}else if(P!==A&&!r(P,A,n,o,s)){O=!1;break}}return s.delete(e),s.delete(t),O},_J=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},kE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},YT=Bu?Bu.prototype:void 0,U1=YT?YT.valueOf:void 0,wJ=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Kg(e),new Kg(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $v(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=_J;case"[object Set]":var h=1&o;if(v||(v=kE),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;o|=2,c.set(e,t);var b=qN(v(e),v(t),o,r,s,c);return c.delete(e),b;case"[object Symbol]":if(U1)return U1.call(e)==U1.call(t)}return!1},EJ=Object.prototype.hasOwnProperty,OJ=function(e,t,n,o,r,s){var c=1&n,v=ww(e),h=v.length;if(h!=ww(t).length&&!c)return!1;for(var g=h;g--;){var b=v[g];if(!(c?b in t:EJ.call(t,b)))return!1}var w=s.get(e),O=s.get(t);if(w&&O)return w==t&&O==e;var S=!0;s.set(e,t),s.set(t,e);for(var P=c;++g<h;){var A=e[b=v[g]],R=t[b];if(o)var j=c?o(R,A,b,t,e,s):o(A,R,b,e,t,s);if(!(j===void 0?A===R||r(A,R,n,o,s):j)){S=!1;break}P||(P=b=="constructor")}if(S&&!P){var k=e.constructor,B=t.constructor;k==B||!("constructor"in e)||!("constructor"in t)||typeof k=="function"&&k instanceof k&&typeof B=="function"&&B instanceof B||(S=!1)}return s.delete(e),s.delete(t),S},qT=Object.prototype.hasOwnProperty,xJ=function(e,t,n,o,r,s){var c=Si(e),v=Si(t),h=c?"[object Array]":Gp(e),g=v?"[object Array]":Gp(t),b=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",w=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=h==g;if(O&&Up(e)){if(!Up(t))return!1;c=!0,b=!1}if(O&&!b)return s||(s=new hv),c||nm(e)?qN(e,t,n,o,r,s):wJ(e,t,h,n,o,r,s);if(!(1&n)){var S=b&&qT.call(e,"__wrapped__"),P=w&&qT.call(t,"__wrapped__");if(S||P){var A=S?e.value():e,R=P?t.value():t;return s||(s=new hv),r(A,R,n,o,s)}}return!!O&&(s||(s=new hv),OJ(e,t,n,o,r,s))},KN=function e(t,n,o,r,s){return t===n||(t==null||n==null||!bs(t)&&!bs(n)?t!=t&&n!=n:xJ(t,n,o,r,e,s))},SJ=function(e,t,n,o){var r=n.length,s=r,c=!o;if(e==null)return!s;for(e=Object(e);r--;){var v=n[r];if(c&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++r<s;){var h=(v=n[r])[0],g=e[h],b=v[1];if(c&&v[2]){if(g===void 0&&!(h in e))return!1}else{var w=new hv;if(o)var O=o(g,b,h,e,t,w);if(!(O===void 0?KN(b,g,3,o,w):O))return!1}}return!0},ZN=function(e){return e==e&&!Rl(e)},AJ=function(e){for(var t=Bd(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,ZN(r)]}return t},JN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},TJ=function(e){var t=AJ(e);return t.length==1&&t[0][2]?JN(t[0][0],t[0][1]):function(n){return n===e||SJ(n,e,t)}},Vp=function(e){return typeof e=="symbol"||bs(e)&&$d(e)=="[object Symbol]"},MJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,PJ=/^\w*$/,CE=function(e,t){if(Si(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Vp(e))||PJ.test(e)||!MJ.test(e)||t!=null&&e in Object(t)};function DE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new(DE.Cache||xb),n}DE.Cache=xb;var NJ=DE,RJ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kJ=/\\(\\)?/g,CJ=function(e){var t=NJ(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(RJ,function(n,o,r,s){t.push(r?s.replace(kJ,"$1"):o||n)}),t}),yv=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},KT=Bu?Bu.prototype:void 0,ZT=KT?KT.toString:void 0,DJ=function e(t){if(typeof t=="string")return t;if(Si(t))return yv(t,e)+"";if(Vp(t))return ZT?ZT.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},QN=function(e){return e==null?"":DJ(e)},kb=function(e,t){return Si(e)?e:CE(e,t)?[e]:CJ(QN(e))},rm=function(e){if(typeof e=="string"||Vp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Cb=function(e,t){for(var n=0,o=(t=kb(t,e)).length;e!=null&&n<o;)e=e[rm(t[n++])];return n&&n==o?e:void 0},jJ=function(e,t,n){var o=e==null?void 0:Cb(e,t);return o===void 0?n:o},IJ=function(e,t){return e!=null&&t in Object(e)},eR=function(e,t,n){for(var o=-1,r=(t=kb(t,e)).length,s=!1;++o<r;){var c=rm(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&xE(r)&&Tb(c,r)&&(Si(e)||xv(e))},tR=function(e,t){return e!=null&&eR(e,t,IJ)},LJ=function(e,t){return CE(e)&&ZN(t)?JN(rm(e),t):function(n){var o=jJ(n,e);return o===void 0&&o===t?tR(n,e):KN(t,o,3)}},nR=function(e){return function(t){return t==null?void 0:t[e]}},FJ=function(e){return function(t){return Cb(t,e)}},$J=function(e){return CE(e)?nR(rm(e)):FJ(e)},Rf=function(e){return typeof e=="function"?e:e==null?eh:typeof e=="object"?Si(e)?LJ(e[0],e[1]):TJ(e):$J(e)},rR=function(e,t){return(Si(e)?IN:yJ)(e,Rf(t))},BJ=Object.prototype.hasOwnProperty,UJ=function(e,t){return e!=null&&BJ.call(e,t)},oR=function(e,t){return e!=null&&eR(e,t,UJ)},GJ=Object.prototype.hasOwnProperty,VJ=function(e){if(e==null)return!0;if(Nf(e)&&(Si(e)||typeof e=="string"||typeof e.splice=="function"||Up(e)||nm(e)||xv(e)))return!e.length;var t=Gp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Pb(e))return!SE(e).length;for(var n in e)if(GJ.call(e,n))return!1;return!0},iR=function(e){return e===void 0},aR=function(e,t){var n=-1,o=Nf(e)?Array(e.length):[];return Rb(e,function(r,s,c){o[++n]=t(r,s,c)}),o},lR=function(e,t){return(Si(e)?yv:aR)(e,Rf(t))},WJ=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},zJ=function(e,t,n,o,r){return r(e,function(s,c,v){n=o?(o=!1,s):t(n,s,c,v)}),n},uR=function(e,t,n){var o=Si(e)?WJ:zJ,r=arguments.length<3;return o(e,Rf(t),n,r,Rb)},HJ=function(e){return typeof e=="string"||!Si(e)&&bs(e)&&$d(e)=="[object String]"},XJ=nR("length"),YJ=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),qJ=function(e){return YJ.test(e)},KJ="[\\ud800-\\udfff]",Sw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Aw="\\ud83c[\\udffb-\\udfff]",sR="[^\\ud800-\\udfff]",cR="(?:\\ud83c[\\udde6-\\uddff]){2}",fR="[\\ud800-\\udbff][\\udc00-\\udfff]",JT="(?:"+Sw+"|"+Aw+")?",ZJ="[\\ufe0e\\ufe0f]?"+JT+("(?:\\u200d(?:"+[sR,cR,fR].join("|")+")[\\ufe0e\\ufe0f]?"+JT+")*"),JJ="(?:"+[sR+Sw+"?",Sw,cR,fR,KJ].join("|")+")",QT=RegExp(Aw+"(?="+Aw+")|"+JJ+ZJ,"g"),QJ=function(e){for(var t=QT.lastIndex=0;QT.test(e);)++t;return t},eQ=function(e){return qJ(e)?QJ(e):XJ(e)},tQ=function(e){if(e==null)return 0;if(Nf(e))return HJ(e)?eQ(e):e.length;var t=Gp(e);return t=="[object Map]"||t=="[object Set]"?e.size:SE(e).length},nQ=function(e,t,n){var o=Si(e),r=o||Up(e)||nm(e);if(t=Rf(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:Rl(e)&&em(s)?UN(Nb(e)):{}}return(r?OE:RE)(e,function(c,v,h){return t(n,c,v,h)}),n},eM=Bu?Bu.isConcatSpreadable:void 0,rQ=function(e){return Si(e)||xv(e)||!!(eM&&e&&e[eM])},jE=function e(t,n,o,r,s){var c=-1,v=t.length;for(o||(o=rQ),s||(s=[]);++c<v;){var h=t[c];n>0&&o(h)?n>1?e(h,n-1,o,r,s):TE(s,h):r||(s[s.length]=h)}return s},oQ=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},tM=Math.max,dR=function(e,t,n){return t=tM(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=tM(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=o[r];return v[t]=n(c),oQ(e,this,v)}},iQ=qg?function(e,t){return qg(e,"toString",{configurable:!0,enumerable:!1,value:PE(t),writable:!0})}:eh,aQ=Date.now,pR=function(e){var t=0,n=0;return function(){var o=aQ(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(iQ),Db=function(e,t){return pR(dR(e,t,eh),e+"")},hR=function(e,t,n,o){for(var r=e.length,s=n+(o?1:-1);o?s--:++s<r;)if(t(e[s],s,e))return s;return-1},lQ=function(e){return e!=e},uQ=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},sQ=function(e,t,n){return t==t?uQ(e,t,n):hR(e,lQ,n)},cQ=function(e,t){return!!(e!=null&&e.length)&&sQ(e,t,0)>-1},fQ=function(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1},dQ=function(){},pQ=vv&&1/kE(new vv([,-0]))[1]==1/0?function(e){return new vv(e)}:dQ,hQ=function(e,t,n){var o=-1,r=cQ,s=e.length,c=!0,v=[],h=v;if(n)c=!1,r=fQ;else if(s>=200){var g=t?null:pQ(e);if(g)return kE(g);c=!1,r=YN,h=new XN}else h=t?[]:v;e:for(;++o<s;){var b=e[o],w=t?t(b):b;if(b=n||b!==0?b:0,c&&w==w){for(var O=h.length;O--;)if(h[O]===w)continue e;t&&h.push(w),v.push(b)}else r(h,w,n)||(h!==v&&h.push(w),v.push(b))}return v},vR=function(e){return bs(e)&&Nf(e)},vQ=Db(function(e){return hQ(jE(e,1,vR,!0))}),yQ=function(e,t){return yv(t,function(n){return e[n]})},Zg,yR=function(e){return e==null?[]:yQ(e,Bd(e))};try{Zg={clone:vJ,constant:PE,each:HN,filter:rR,has:oR,isArray:Si,isEmpty:VJ,isFunction:em,isUndefined:iR,keys:Bd,map:lR,reduce:uR,size:tQ,transform:nQ,union:vQ,values:yR}}catch{}Zg||(Zg=window._);var wn=Zg,IE=Br;function Br(e){this._isDirected=!wn.has(e,"directed")||e.directed,this._isMultigraph=!!wn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!wn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=wn.constant(void 0),this._defaultEdgeLabelFn=wn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function nM(e,t){e[t]?e[t]++:e[t]=1}function rM(e,t){--e[t]||delete e[t]}function by(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(wn.isUndefined(o)?"\0":o)}function mQ(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return o&&(v.name=o),v}function G1(e,t){return by(e,t.v,t.w,t.name)}Br.prototype._nodeCount=0,Br.prototype._edgeCount=0,Br.prototype.isDirected=function(){return this._isDirected},Br.prototype.isMultigraph=function(){return this._isMultigraph},Br.prototype.isCompound=function(){return this._isCompound},Br.prototype.setGraph=function(e){return this._label=e,this},Br.prototype.graph=function(){return this._label},Br.prototype.setDefaultNodeLabel=function(e){return wn.isFunction(e)||(e=wn.constant(e)),this._defaultNodeLabelFn=e,this},Br.prototype.nodeCount=function(){return this._nodeCount},Br.prototype.nodes=function(){return wn.keys(this._nodes)},Br.prototype.sources=function(){var e=this;return wn.filter(this.nodes(),function(t){return wn.isEmpty(e._in[t])})},Br.prototype.sinks=function(){var e=this;return wn.filter(this.nodes(),function(t){return wn.isEmpty(e._out[t])})},Br.prototype.setNodes=function(e,t){var n=arguments,o=this;return wn.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Br.prototype.setNode=function(e,t){return wn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Br.prototype.node=function(e){return this._nodes[e]},Br.prototype.hasNode=function(e){return wn.has(this._nodes,e)},Br.prototype.removeNode=function(e){var t=this;if(wn.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],wn.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),wn.each(wn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],wn.each(wn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Br.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(wn.isUndefined(t))t="\0";else{for(var n=t+="";!wn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Br.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Br.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Br.prototype.children=function(e){if(wn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return wn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Br.prototype.predecessors=function(e){var t=this._preds[e];if(t)return wn.keys(t)},Br.prototype.successors=function(e){var t=this._sucs[e];if(t)return wn.keys(t)},Br.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return wn.union(t,this.successors(e))},Br.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Br.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;wn.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),wn.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&wn.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Br.prototype.setDefaultEdgeLabel=function(e){return wn.isFunction(e)||(e=wn.constant(e)),this._defaultEdgeLabelFn=e,this},Br.prototype.edgeCount=function(){return this._edgeCount},Br.prototype.edges=function(){return wn.values(this._edgeObjs)},Br.prototype.setPath=function(e,t){var n=this,o=arguments;return wn.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Br.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,wn.isUndefined(n)||(n=""+n);var c=by(this._isDirected,e,t,n);if(wn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!wn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var v=mQ(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,nM(this._preds[t],e),nM(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Br.prototype.edge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):by(this._isDirected,e,t,n);return this._edgeLabels[o]},Br.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):by(this._isDirected,e,t,n);return wn.has(this._edgeLabels,o)},Br.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):by(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],rM(this._preds[t],e),rM(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Br.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=wn.values(n);return t?wn.filter(o,function(r){return r.v===t}):o}},Br.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=wn.values(n);return t?wn.filter(o,function(r){return r.w===t}):o}},Br.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var oM={Graph:IE,version:"2.1.8"},gQ={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:bQ(e),edges:_Q(e)};return wn.isUndefined(e.graph())||(t.value=wn.clone(e.graph())),t},read:function(e){var t=new IE(e.options).setGraph(e.value);return wn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),wn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function bQ(e){return wn.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return wn.isUndefined(n)||(r.value=n),wn.isUndefined(o)||(r.parent=o),r})}function _Q(e){return wn.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return wn.isUndefined(t.name)||(o.name=t.name),wn.isUndefined(n)||(o.value=n),o})}var wQ=function(e){var t,n={},o=[];function r(s){wn.has(n,s)||(n[s]=!0,t.push(s),wn.each(e.successors(s),r),wn.each(e.predecessors(s),r))}return wn.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},mR=Cu;function Cu(){this._arr=[],this._keyIndices={}}Cu.prototype.size=function(){return this._arr.length},Cu.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Cu.prototype.has=function(e){return wn.has(this._keyIndices,e)},Cu.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Cu.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Cu.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!wn.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},Cu.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Cu.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Cu.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Cu.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},Cu.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var gR=function(e,t,n,o){return function(r,s,c,v){var h,g,b={},w=new mR,O=function(S){var P=S.v!==h?S.v:S.w,A=b[P],R=c(S),j=g.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+R);j<A.distance&&(A.distance=j,A.predecessor=h,w.decrease(P,j))};for(r.nodes().forEach(function(S){var P=S===s?0:Number.POSITIVE_INFINITY;b[S]={distance:P},w.add(S,P)});w.size()>0&&(h=w.removeMin(),(g=b[h]).distance!==Number.POSITIVE_INFINITY);)v(h).forEach(O);return b}(e,String(t),n||EQ,o||function(r){return e.outEdges(r)})},EQ=wn.constant(1),OQ=function(e,t,n){return wn.transform(e.nodes(),function(o,r){o[r]=gR(e,r,t,n)},{})},bR=function(e){var t=0,n=[],o={},r=[];function s(c){var v=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){wn.has(o,b)?o[b].onStack&&(v.lowlink=Math.min(v.lowlink,o[b].index)):(s(b),v.lowlink=Math.min(v.lowlink,o[b].lowlink))}),v.lowlink===v.index){var h,g=[];do h=n.pop(),o[h].onStack=!1,g.push(h);while(c!==h);r.push(g)}}return e.nodes().forEach(function(c){wn.has(o,c)||s(c)}),r},xQ=function(e){return wn.filter(bR(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},SQ=function(e,t,n){return function(o,r,s){var c={},v=o.nodes();return v.forEach(function(h){c[h]={},c[h][h]={distance:0},v.forEach(function(g){h!==g&&(c[h][g]={distance:Number.POSITIVE_INFINITY})}),s(h).forEach(function(g){var b=g.v===h?g.w:g.v,w=r(g);c[h][b]={distance:w,predecessor:h}})}),v.forEach(function(h){var g=c[h];v.forEach(function(b){var w=c[b];v.forEach(function(O){var S=w[h],P=g[O],A=w[O],R=S.distance+P.distance;R<A.distance&&(A.distance=R,A.predecessor=P.predecessor)})})}),c}(e,t||AQ,n||function(o){return e.outEdges(o)})},AQ=wn.constant(1),V1=_R;function _R(e){var t={},n={},o=[];if(wn.each(e.sinks(),function r(s){if(wn.has(n,s))throw new Jg;wn.has(t,s)||(n[s]=!0,t[s]=!0,wn.each(e.predecessors(s),r),delete n[s],o.push(s))}),wn.size(t)!==e.nodeCount())throw new Jg;return o}function Jg(){}_R.CycleException=Jg,Jg.prototype=new Error;var iM=function(e,t,n){wn.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return wn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);wR(e,c,n==="post",s,o,r)}),r};function wR(e,t,n,o,r,s){wn.has(o,t)||(o[t]=!0,n||s.push(t),wn.each(r(t),function(c){wR(e,c,n,o,r,s)}),n&&s.push(t))}var Qg,TQ={Graph:oM.Graph,json:gQ,alg:{components:wQ,dijkstra:gR,dijkstraAll:OQ,findCycles:xQ,floydWarshall:SQ,isAcyclic:function(e){try{V1(e)}catch(t){if(t instanceof V1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return iM(e,t,"post")},preorder:function(e,t){return iM(e,t,"pre")},prim:function(e,t){var n,o=new IE,r={},s=new mR;function c(h){var g=h.v===n?h.w:h.v,b=s.priority(g);if(b!==void 0){var w=t(h);w<b&&(r[g]=n,s.decrease(g,w))}}if(e.nodeCount()===0)return o;wn.each(e.nodes(),function(h){s.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),wn.has(r,n))o.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:bR,topsort:V1},version:oM.version};try{Qg=TQ}catch{}Qg||(Qg=window.graphlib);var vc=Qg,MQ=function(e){return VN(e,5)},Fy=function(e,t,n){if(!Rl(n))return!1;var o=typeof t;return!!(o=="number"?Nf(n)&&Tb(t,n.length):o=="string"&&t in n)&&$v(n[t],e)},ER=Object.prototype,PQ=ER.hasOwnProperty,NQ=Db(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&Fy(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=Qp(s),v=-1,h=c.length;++v<h;){var g=c[v],b=e[g];(b===void 0||$v(b,ER[g])&&!PQ.call(e,g))&&(e[g]=s[g])}return e}),RQ=function(e){return function(t,n,o){var r=Object(t);if(!Nf(t)){var s=Rf(n);t=Bd(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},kQ=/^\s+|\s+$/g,CQ=/^[-+]0x[0-9a-f]+$/i,DQ=/^0b[01]+$/i,jQ=/^0o[0-7]+$/i,IQ=parseInt,LQ=function(e){if(typeof e=="number")return e;if(Vp(e))return NaN;if(Rl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Rl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(kQ,"");var n=DQ.test(e);return n||jQ.test(e)?IQ(e.slice(2),n?2:8):CQ.test(e)?NaN:+e},xg=function(e){return e?(e=LQ(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},FQ=function(e){var t=xg(e),n=t%1;return t==t?n?t-n:t:0},$Q=Math.max,BQ=RQ(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:FQ(n);return r<0&&(r=$Q(o+r,0)),hR(e,Rf(t),r)}),OR=function(e){return e!=null&&e.length?jE(e,1):[]},UQ=function(e,t){return e==null?e:NE(e,WN(t),Qp)},GQ=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},VQ=function(e,t){var n={};return t=Rf(t),RE(e,function(o,r,s){Sb(n,r,t(o,r,s))}),n},LE=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(v===void 0?c==c&&!Vp(c):n(c,v)))var v=c,h=s}return h},WQ=function(e,t){return e>t},zQ=function(e){return e&&e.length?LE(e,eh,WQ):void 0},Tw=function(e,t,n){(n!==void 0&&!$v(e[t],n)||n===void 0&&!(t in e))&&Sb(e,t,n)},HQ=Function.prototype,XQ=Object.prototype,xR=HQ.toString,YQ=XQ.hasOwnProperty,qQ=xR.call(Object),KQ=function(e){if(!bs(e)||$d(e)!="[object Object]")return!1;var t=Nb(e);if(t===null)return!0;var n=YQ.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&xR.call(n)==qQ},Mw=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},ZQ=function(e){return tm(e,Qp(e))},JQ=function(e,t,n,o,r,s,c){var v=Mw(e,n),h=Mw(t,n),g=c.get(h);if(g)Tw(e,n,g);else{var b=s?s(v,h,n+"",e,t,c):void 0,w=b===void 0;if(w){var O=Si(h),S=!O&&Up(h),P=!O&&!S&&nm(h);b=h,O||S||P?Si(v)?b=v:vR(v)?b=jN(v):S?(w=!1,b=DN(h,!0)):P?(w=!1,b=BN(h,!0)):b=[]:KQ(h)||xv(h)?(b=v,xv(v)?b=ZQ(v):Rl(v)&&!em(v)||(b=GN(h))):w=!1}w&&(c.set(h,b),r(b,h,o,s,c),c.delete(h)),Tw(e,n,b)}},QQ=function e(t,n,o,r,s){t!==n&&NE(n,function(c,v){if(s||(s=new hv),Rl(c))JQ(t,n,v,o,e,r,s);else{var h=r?r(Mw(t,v),c,v+"",t,n,s):void 0;h===void 0&&(h=c),Tw(t,v,h)}},Qp)},eee=function(e){return Db(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&Fy(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var v=n[o];v&&e(t,v,o,s)}return t})}(function(e,t,n){QQ(e,t,n)}),SR=function(e,t){return e<t},tee=function(e){return e&&e.length?LE(e,eh,SR):void 0},nee=function(e,t){return e&&e.length?LE(e,Rf(t),SR):void 0},ree=function(){return ws.Date.now()},oee=function(e,t,n,o){if(!Rl(e))return e;for(var r=-1,s=(t=kb(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var h=rm(t[r]),g=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(r!=c){var b=v[h];(g=o?o(b,h,v):void 0)===void 0&&(g=Rl(b)?b:Tb(t[r+1])?[]:{})}Ab(v,h,g),v=v[h]}return e},iee=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],v=Cb(e,c);n(v,c)&&oee(s,kb(c,e),v)}return s},aee=function(e,t){return iee(e,t,function(n,o){return tR(e,o)})},lee=function(e){return pR(dR(e,void 0,OR),e+"")}(function(e,t){return e==null?{}:aee(e,t)}),uee=Math.ceil,see=Math.max,cee=function(e,t,n,o){for(var r=-1,s=see(uee((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++r]=e,e+=n;return c},fee=function(e){return function(t,n,o){return o&&typeof o!="number"&&Fy(t,n,o)&&(n=o=void 0),t=xg(t),n===void 0?(n=t,t=0):n=xg(n),o=o===void 0?t<n?1:-1:xg(o),cee(t,n,o,e)}}(),dee=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},pee=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=Vp(e),c=t!==void 0,v=t===null,h=t==t,g=Vp(t);if(!v&&!g&&!s&&e>t||s&&c&&h&&!v&&!g||o&&c&&h||!n&&h||!r)return 1;if(!o&&!s&&!g&&e<t||g&&n&&r&&!o&&!s||v&&n&&r||!c&&r||!h)return-1}return 0},hee=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++o<c;){var h=pee(r[o],s[o]);if(h)return o>=v?h:h*(n[o]=="desc"?-1:1)}return e.index-t.index},vee=function(e,t,n){t=t.length?yv(t,function(s){return Si(s)?function(c){return Cb(c,s.length===1?s[0]:s)}:s}):[eh];var o=-1;t=yv(t,Mb(Rf));var r=aR(e,function(s,c,v){return{criteria:yv(t,function(h){return h(s)}),index:++o,value:s}});return dee(r,function(s,c){return hee(s,c,n)})},yee=Db(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Fy(e,t[0],t[1])?t=[]:n>2&&Fy(t[0],t[1],t[2])&&(t=[t[0]]),vee(e,jE(t,1),[])}),mee=0,gee=function(e){var t=++mee;return QN(e)+t},bee=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var v=o<s?t[o]:void 0;n(c,e[o],v)}return c},eb,_ee=function(e,t){return bee(e||[],t||[],Ab)};try{eb={cloneDeep:MQ,constant:PE,defaults:NQ,each:HN,filter:rR,find:BQ,flatten:OR,forEach:zN,forIn:UQ,has:oR,isUndefined:iR,last:GQ,map:lR,mapValues:VQ,max:zQ,merge:eee,min:tee,minBy:nee,now:ree,pick:lee,range:fee,reduce:uR,sortBy:yee,uniqueId:gee,values:yR,zipObject:_ee}}catch{}eb||(eb=window._);var wee=eb;vc.Graph;wee.constant(1);vc.Graph;vc.Graph;vc.alg.preorder;vc.alg.postorder;vc.Graph;vc.Graph;vc.Graph;vc.Graph;vc.Graph;function $y(e){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$y(e)}function Eee(e,t){if($y(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if($y(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oee(e){var t=Eee(e,"string");return $y(t)=="symbol"?t:t+""}function an(e,t,n){return(t=Oee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xee=typeof vy=="object"&&vy&&vy.Object===Object&&vy,AR=xee,See=AR,Aee=typeof self=="object"&&self&&self.Object===Object&&self,Tee=See||Aee||Function("return this")(),Mee=Tee,Pee=Mee,Nee=Pee.Symbol,TR=Nee,aM=TR;aM&&aM.toStringTag;var lM=TR;lM&&lM.toStringTag;var tb={exports:{}};tb.exports;(function(e,t){var n=AR,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,v=function(){try{var h=r&&r.require&&r.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v})(tb,tb.exports);var Ree=tb.exports,uM=Ree;uM&&uM.isTypedArray;var MR={exports:{}},PR={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(PR);var kee=PR.exports;(function(e){var t=kee.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var o,r={},s=Object.prototype,c=s.hasOwnProperty,v=Object.defineProperty||function(ae,ve,Pe){ae[ve]=Pe.value},h=typeof Symbol=="function"?Symbol:{},g=h.iterator||"@@iterator",b=h.asyncIterator||"@@asyncIterator",w=h.toStringTag||"@@toStringTag";function O(ae,ve,Pe){return Object.defineProperty(ae,ve,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),ae[ve]}try{O({},"")}catch{O=function(Pe,Ke,je){return Pe[Ke]=je}}function S(ae,ve,Pe,Ke){var je=ve&&ve.prototype instanceof q?ve:q,at=Object.create(je.prototype),gt=new Be(Ke||[]);return v(at,"_invoke",{value:se(ae,Pe,gt)}),at}function P(ae,ve,Pe){try{return{type:"normal",arg:ae.call(ve,Pe)}}catch(Ke){return{type:"throw",arg:Ke}}}r.wrap=S;var A="suspendedStart",R="suspendedYield",j="executing",k="completed",B={};function q(){}function X(){}function W(){}var ee={};O(ee,g,function(){return this});var J=Object.getPrototypeOf,L=J&&J(J(Oe([])));L&&L!==s&&c.call(L,g)&&(ee=L);var G=W.prototype=q.prototype=Object.create(ee);function Y(ae){["next","throw","return"].forEach(function(ve){O(ae,ve,function(Pe){return this._invoke(ve,Pe)})})}function H(ae,ve){function Pe(je,at,gt,Mt){var Xt=P(ae[je],ae,at);if(Xt.type!=="throw"){var De=Xt.arg,ge=De.value;return ge&&t(ge)=="object"&&c.call(ge,"__await")?ve.resolve(ge.__await).then(function(Ae){Pe("next",Ae,gt,Mt)},function(Ae){Pe("throw",Ae,gt,Mt)}):ve.resolve(ge).then(function(Ae){De.value=Ae,gt(De)},function(Ae){return Pe("throw",Ae,gt,Mt)})}Mt(Xt.arg)}var Ke;v(this,"_invoke",{value:function(at,gt){function Mt(){return new ve(function(Xt,De){Pe(at,gt,Xt,De)})}return Ke=Ke?Ke.then(Mt,Mt):Mt()}})}function se(ae,ve,Pe){var Ke=A;return function(je,at){if(Ke===j)throw Error("Generator is already running");if(Ke===k){if(je==="throw")throw at;return{value:o,done:!0}}for(Pe.method=je,Pe.arg=at;;){var gt=Pe.delegate;if(gt){var Mt=Re(gt,Pe);if(Mt){if(Mt===B)continue;return Mt}}if(Pe.method==="next")Pe.sent=Pe._sent=Pe.arg;else if(Pe.method==="throw"){if(Ke===A)throw Ke=k,Pe.arg;Pe.dispatchException(Pe.arg)}else Pe.method==="return"&&Pe.abrupt("return",Pe.arg);Ke=j;var Xt=P(ae,ve,Pe);if(Xt.type==="normal"){if(Ke=Pe.done?k:R,Xt.arg===B)continue;return{value:Xt.arg,done:Pe.done}}Xt.type==="throw"&&(Ke=k,Pe.method="throw",Pe.arg=Xt.arg)}}}function Re(ae,ve){var Pe=ve.method,Ke=ae.iterator[Pe];if(Ke===o)return ve.delegate=null,Pe==="throw"&&ae.iterator.return&&(ve.method="return",ve.arg=o,Re(ae,ve),ve.method==="throw")||Pe!=="return"&&(ve.method="throw",ve.arg=new TypeError("The iterator does not provide a '"+Pe+"' method")),B;var je=P(Ke,ae.iterator,ve.arg);if(je.type==="throw")return ve.method="throw",ve.arg=je.arg,ve.delegate=null,B;var at=je.arg;return at?at.done?(ve[ae.resultName]=at.value,ve.next=ae.nextLoc,ve.method!=="return"&&(ve.method="next",ve.arg=o),ve.delegate=null,B):at:(ve.method="throw",ve.arg=new TypeError("iterator result is not an object"),ve.delegate=null,B)}function Se(ae){var ve={tryLoc:ae[0]};1 in ae&&(ve.catchLoc=ae[1]),2 in ae&&(ve.finallyLoc=ae[2],ve.afterLoc=ae[3]),this.tryEntries.push(ve)}function ze(ae){var ve=ae.completion||{};ve.type="normal",delete ve.arg,ae.completion=ve}function Be(ae){this.tryEntries=[{tryLoc:"root"}],ae.forEach(Se,this),this.reset(!0)}function Oe(ae){if(ae||ae===""){var ve=ae[g];if(ve)return ve.call(ae);if(typeof ae.next=="function")return ae;if(!isNaN(ae.length)){var Pe=-1,Ke=function je(){for(;++Pe<ae.length;)if(c.call(ae,Pe))return je.value=ae[Pe],je.done=!1,je;return je.value=o,je.done=!0,je};return Ke.next=Ke}}throw new TypeError(t(ae)+" is not iterable")}return X.prototype=W,v(G,"constructor",{value:W,configurable:!0}),v(W,"constructor",{value:X,configurable:!0}),X.displayName=O(W,w,"GeneratorFunction"),r.isGeneratorFunction=function(ae){var ve=typeof ae=="function"&&ae.constructor;return!!ve&&(ve===X||(ve.displayName||ve.name)==="GeneratorFunction")},r.mark=function(ae){return Object.setPrototypeOf?Object.setPrototypeOf(ae,W):(ae.__proto__=W,O(ae,w,"GeneratorFunction")),ae.prototype=Object.create(G),ae},r.awrap=function(ae){return{__await:ae}},Y(H.prototype),O(H.prototype,b,function(){return this}),r.AsyncIterator=H,r.async=function(ae,ve,Pe,Ke,je){je===void 0&&(je=Promise);var at=new H(S(ae,ve,Pe,Ke),je);return r.isGeneratorFunction(ve)?at:at.next().then(function(gt){return gt.done?gt.value:at.next()})},Y(G),O(G,w,"Generator"),O(G,g,function(){return this}),O(G,"toString",function(){return"[object Generator]"}),r.keys=function(ae){var ve=Object(ae),Pe=[];for(var Ke in ve)Pe.push(Ke);return Pe.reverse(),function je(){for(;Pe.length;){var at=Pe.pop();if(at in ve)return je.value=at,je.done=!1,je}return je.done=!0,je}},r.values=Oe,Be.prototype={constructor:Be,reset:function(ve){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(ze),!ve)for(var Pe in this)Pe.charAt(0)==="t"&&c.call(this,Pe)&&!isNaN(+Pe.slice(1))&&(this[Pe]=o)},stop:function(){this.done=!0;var ve=this.tryEntries[0].completion;if(ve.type==="throw")throw ve.arg;return this.rval},dispatchException:function(ve){if(this.done)throw ve;var Pe=this;function Ke(De,ge){return gt.type="throw",gt.arg=ve,Pe.next=De,ge&&(Pe.method="next",Pe.arg=o),!!ge}for(var je=this.tryEntries.length-1;je>=0;--je){var at=this.tryEntries[je],gt=at.completion;if(at.tryLoc==="root")return Ke("end");if(at.tryLoc<=this.prev){var Mt=c.call(at,"catchLoc"),Xt=c.call(at,"finallyLoc");if(Mt&&Xt){if(this.prev<at.catchLoc)return Ke(at.catchLoc,!0);if(this.prev<at.finallyLoc)return Ke(at.finallyLoc)}else if(Mt){if(this.prev<at.catchLoc)return Ke(at.catchLoc,!0)}else{if(!Xt)throw Error("try statement without catch or finally");if(this.prev<at.finallyLoc)return Ke(at.finallyLoc)}}}},abrupt:function(ve,Pe){for(var Ke=this.tryEntries.length-1;Ke>=0;--Ke){var je=this.tryEntries[Ke];if(je.tryLoc<=this.prev&&c.call(je,"finallyLoc")&&this.prev<je.finallyLoc){var at=je;break}}at&&(ve==="break"||ve==="continue")&&at.tryLoc<=Pe&&Pe<=at.finallyLoc&&(at=null);var gt=at?at.completion:{};return gt.type=ve,gt.arg=Pe,at?(this.method="next",this.next=at.finallyLoc,B):this.complete(gt)},complete:function(ve,Pe){if(ve.type==="throw")throw ve.arg;return ve.type==="break"||ve.type==="continue"?this.next=ve.arg:ve.type==="return"?(this.rval=this.arg=ve.arg,this.method="return",this.next="end"):ve.type==="normal"&&Pe&&(this.next=Pe),B},finish:function(ve){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Ke=this.tryEntries[Pe];if(Ke.finallyLoc===ve)return this.complete(Ke.completion,Ke.afterLoc),ze(Ke),B}},catch:function(ve){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Ke=this.tryEntries[Pe];if(Ke.tryLoc===ve){var je=Ke.completion;if(je.type==="throw"){var at=je.arg;ze(Ke)}return at}}throw Error("illegal catch attempt")},delegateYield:function(ve,Pe,Ke){return this.delegate={iterator:Oe(ve),resultName:Pe,nextLoc:Ke},this.method==="next"&&(this.arg=o),B}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(MR);var Cee=MR.exports,W1=Cee();try{regeneratorRuntime=W1}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=W1:Function("r","regeneratorRuntime = r")(W1)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var sM;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(sM||(sM={}));var cM;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(cM||(cM={}));var fM;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(fM||(fM={}));var dM;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(dM||(dM={}));var Dee={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(vy,function(){var n=function(I){return I instanceof Uint8Array||I instanceof Uint16Array||I instanceof Uint32Array||I instanceof Int8Array||I instanceof Int16Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof Float64Array||I instanceof Uint8ClampedArray},o=function(I,oe){for(var be=Object.keys(oe),et=0;et<be.length;++et)I[be[et]]=oe[be[et]];return I},r=`
`;function s(I){return typeof atob<"u"?atob(I):"base64:"+I}function c(I){var oe=new Error("(regl) "+I);throw console.error(oe),oe}function v(I,oe){I||c(oe)}function h(I){return I?": "+I:""}function g(I,oe,be){I in oe||c("unknown parameter ("+I+")"+h(be)+". possible values: "+Object.keys(oe).join())}function b(I,oe){n(I)||c("invalid parameter type"+h(oe)+". must be a typed array")}function w(I,oe){switch(oe){case"number":return typeof I=="number";case"object":return typeof I=="object";case"string":return typeof I=="string";case"boolean":return typeof I=="boolean";case"function":return typeof I=="function";case"undefined":return typeof I>"u";case"symbol":return typeof I=="symbol"}}function O(I,oe,be){w(I,oe)||c("invalid parameter type"+h(be)+". expected "+oe+", got "+typeof I)}function S(I,oe){I>=0&&(I|0)===I||c("invalid parameter type, ("+I+")"+h(oe)+". must be a nonnegative integer")}function P(I,oe,be){oe.indexOf(I)<0&&c("invalid value"+h(be)+". must be one of: "+oe)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function R(I){Object.keys(I).forEach(function(oe){A.indexOf(oe)<0&&c('invalid regl constructor argument "'+oe+'". must be one of '+A)})}function j(I,oe){for(I=I+"";I.length<oe;)I=" "+I;return I}function k(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B(I,oe){this.number=I,this.line=oe,this.errors=[]}function q(I,oe,be){this.file=I,this.line=oe,this.message=be}function X(){var I=new Error,oe=(I.stack||I).toString(),be=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(oe);if(be)return be[1];var et=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(oe);return et?et[1]:"unknown"}function W(){var I=new Error,oe=(I.stack||I).toString(),be=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(oe);if(be)return be[1];var et=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(oe);return et?et[1]:"unknown"}function ee(I,oe){var be=I.split(`
`),et=1,dt=0,Ze={unknown:new k,0:new k};Ze.unknown.name=Ze[0].name=oe||X(),Ze.unknown.lines.push(new B(0,""));for(var st=0;st<be.length;++st){var Nt=be[st],jt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Nt);if(jt)switch(jt[1]){case"line":var Ct=/(\d+)(\s+\d+)?/.exec(jt[2]);Ct&&(et=Ct[1]|0,Ct[2]&&(dt=Ct[2]|0,dt in Ze||(Ze[dt]=new k)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(jt[2]);ct&&(Ze[dt].name=ct[1]?s(ct[2]):ct[2]);break}Ze[dt].lines.push(new B(et++,Nt))}return Object.keys(Ze).forEach(function(Gt){var Bt=Ze[Gt];Bt.lines.forEach(function(Rt){Bt.index[Rt.number]=Rt})}),Ze}function J(I){var oe=[];return I.split(`
`).forEach(function(be){if(!(be.length<5)){var et=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);et?oe.push(new q(et[1]|0,et[2]|0,et[3].trim())):be.length>0&&oe.push(new q("unknown",0,be))}}),oe}function L(I,oe){oe.forEach(function(be){var et=I[be.file];if(et){var dt=et.index[be.line];if(dt){dt.errors.push(be),et.hasErrors=!0;return}}I.unknown.hasErrors=!0,I.unknown.lines[0].errors.push(be)})}function G(I,oe,be,et,dt){if(!I.getShaderParameter(oe,I.COMPILE_STATUS)){var Ze=I.getShaderInfoLog(oe),st=et===I.FRAGMENT_SHADER?"fragment":"vertex";Be(be,"string",st+" shader source must be a string",dt);var Nt=ee(be,dt),jt=J(Ze);L(Nt,jt),Object.keys(Nt).forEach(function(Ct){var ct=Nt[Ct];if(!ct.hasErrors)return;var Gt=[""],Bt=[""];function Rt(bt,Ve){Gt.push(bt),Bt.push(Ve||"")}Rt("file number "+Ct+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(bt){if(bt.errors.length>0){Rt(j(bt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Rt(bt.line+r,"color:red; background-color:yellow; font-weight:bold");var Ve=0;bt.errors.forEach(function(it){var Lt=it.message,Kt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lt);if(Kt){var xt=Kt[1];switch(Lt=Kt[2],xt){case"assign":xt="=";break}Ve=Math.max(bt.line.indexOf(xt,Ve),0)}else Ve=0;Rt(j("| ",6)),Rt(j("^^^",Ve+3)+r,"font-weight:bold"),Rt(j("| ",6)),Rt(Lt+r,"font-weight:bold")}),Rt(j("| ",6)+r)}else Rt(j(bt.number,4)+"|  "),Rt(bt.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Bt[0]=Gt.join("%c"),console.log.apply(console,Bt)):console.log(Gt.join(""))}),v.raise("Error compiling "+st+" shader, "+Nt[0].name)}}function Y(I,oe,be,et,dt){if(!I.getProgramParameter(oe,I.LINK_STATUS)){var Ze=I.getProgramInfoLog(oe),st=ee(be,dt),Nt=ee(et,dt),jt='Error linking program with vertex shader, "'+Nt[0].name+'", and fragment shader "'+st[0].name+'"';typeof document<"u"?console.log("%c"+jt+r+"%c"+Ze,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(jt+r+Ze),v.raise(jt)}}function H(I){I._commandRef=X()}function se(I,oe,be,et){H(I);function dt(jt){return jt?et.id(jt):0}I._fragId=dt(I.static.frag),I._vertId=dt(I.static.vert);function Ze(jt,Ct){Object.keys(Ct).forEach(function(ct){jt[et.id(ct)]=!0})}var st=I._uniformSet={};Ze(st,oe.static),Ze(st,oe.dynamic);var Nt=I._attributeSet={};Ze(Nt,be.static),Ze(Nt,be.dynamic),I._hasCount="count"in I.static||"count"in I.dynamic||"elements"in I.static||"elements"in I.dynamic}function Re(I,oe){var be=W();c(I+" in command "+(oe||X())+(be==="unknown"?"":" called from "+be))}function Se(I,oe,be){I||Re(oe,be||X())}function ze(I,oe,be,et){I in oe||Re("unknown parameter ("+I+")"+h(be)+". possible values: "+Object.keys(oe).join(),et||X())}function Be(I,oe,be,et){w(I,oe)||Re("invalid parameter type"+h(be)+". expected "+oe+", got "+typeof I,et||X())}function Oe(I){I()}function ae(I,oe,be){I.texture?P(I.texture._texture.internalformat,oe,"unsupported texture format for attachment"):P(I.renderbuffer._renderbuffer.format,be,"unsupported renderbuffer format for attachment")}var ve=33071,Pe=9728,Ke=9984,je=9985,at=9986,gt=9987,Mt=5120,Xt=5121,De=5122,ge=5123,Ae=5124,ht=5125,Wt=5126,Ot=32819,rn=32820,yn=33635,Tn=34042,pn=36193,ft={};ft[Mt]=ft[Xt]=1,ft[De]=ft[ge]=ft[pn]=ft[yn]=ft[Ot]=ft[rn]=2,ft[Ae]=ft[ht]=ft[Wt]=ft[Tn]=4;function On(I,oe){return I===rn||I===Ot||I===yn?2:I===Tn?4:ft[I]*oe}function Fe(I){return!(I&I-1)&&!!I}function mn(I,oe,be){var et,dt=oe.width,Ze=oe.height,st=oe.channels;v(dt>0&&dt<=be.maxTextureSize&&Ze>0&&Ze<=be.maxTextureSize,"invalid texture shape"),(I.wrapS!==ve||I.wrapT!==ve)&&v(Fe(dt)&&Fe(Ze),"incompatible wrap mode for texture, both width and height must be power of 2"),oe.mipmask===1?dt!==1&&Ze!==1&&v(I.minFilter!==Ke&&I.minFilter!==at&&I.minFilter!==je&&I.minFilter!==gt,"min filter requires mipmap"):(v(Fe(dt)&&Fe(Ze),"texture must be a square power of 2 to support mipmapping"),v(oe.mipmask===(dt<<1)-1,"missing or incomplete mipmap data")),oe.type===Wt&&(be.extensions.indexOf("oes_texture_float_linear")<0&&v(I.minFilter===Pe&&I.magFilter===Pe,"filter not supported, must enable oes_texture_float_linear"),v(!I.genMipmaps,"mipmap generation not supported with float textures"));var Nt=oe.images;for(et=0;et<16;++et)if(Nt[et]){var jt=dt>>et,Ct=Ze>>et;v(oe.mipmask&1<<et,"missing mipmap data");var ct=Nt[et];if(v(ct.width===jt&&ct.height===Ct,"invalid shape for mip images"),v(ct.format===oe.format&&ct.internalformat===oe.internalformat&&ct.type===oe.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Gt=Math.ceil(On(ct.type,st)*jt/ct.unpackAlignment)*ct.unpackAlignment;v(ct.data.byteLength===Gt*Ct,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else I.genMipmaps||v((oe.mipmask&1<<et)===0,"extra mipmap data");oe.compressed&&v(!I.genMipmaps,"mipmap generation for compressed images not supported")}function Kn(I,oe,be,et){var dt=I.width,Ze=I.height,st=I.channels;v(dt>0&&dt<=et.maxTextureSize&&Ze>0&&Ze<=et.maxTextureSize,"invalid texture shape"),v(dt===Ze,"cube map must be square"),v(oe.wrapS===ve&&oe.wrapT===ve,"wrap mode not supported by cube map");for(var Nt=0;Nt<be.length;++Nt){var jt=be[Nt];v(jt.width===dt&&jt.height===Ze,"inconsistent cube map face shape"),oe.genMipmaps&&(v(!jt.compressed,"can not generate mipmap for compressed textures"),v(jt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ct=jt.images,ct=0;ct<16;++ct){var Gt=Ct[ct];if(Gt){var Bt=dt>>ct,Rt=Ze>>ct;v(jt.mipmask&1<<ct,"missing mipmap data"),v(Gt.width===Bt&&Gt.height===Rt,"invalid shape for mip images"),v(Gt.format===I.format&&Gt.internalformat===I.internalformat&&Gt.type===I.type,"incompatible type for mip image"),Gt.compressed||(Gt.data?v(Gt.data.byteLength===Bt*Rt*Math.max(On(Gt.type,st),Gt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Gt.element||Gt.copy)}}}}var ne=o(v,{optional:Oe,raise:c,commandRaise:Re,command:Se,parameter:g,commandParameter:ze,constructor:R,type:O,commandType:Be,isTypedArray:b,nni:S,oneOf:P,shaderError:G,linkError:Y,callSite:W,saveCommandRef:H,saveDrawInfo:se,framebufferFormat:ae,guessCommand:X,texture2D:mn,textureCube:Kn}),$n=0,xr=0,Ur=5,no=6;function Dn(I,oe){this.id=$n++,this.type=I,this.data=oe}function ko(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ee(I){if(I.length===0)return[];var oe=I.charAt(0),be=I.charAt(I.length-1);if(I.length>1&&oe===be&&(oe==='"'||oe==="'"))return['"'+ko(I.substr(1,I.length-2))+'"'];var et=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);if(et)return Ee(I.substr(0,et.index)).concat(Ee(et[1])).concat(Ee(I.substr(et.index+et[0].length)));var dt=I.split(".");if(dt.length===1)return['"'+ko(I)+'"'];for(var Ze=[],st=0;st<dt.length;++st)Ze=Ze.concat(Ee(dt[st]));return Ze}function Xe(I){return"["+Ee(I).join("][")+"]"}function Ce(I,oe){return new Dn(I,Xe(oe+""))}function ot(I){return typeof I=="function"&&!I._reglType||I instanceof Dn}function en(I,oe){if(typeof I=="function")return new Dn(xr,I);if(typeof I=="number"||typeof I=="boolean")return new Dn(Ur,I);if(Array.isArray(I))return new Dn(no,I.map((be,et)=>en(be,oe+"["+et+"]")));if(I instanceof Dn)return I;ne(!1,"invalid option type in uniform "+oe)}var qt={DynamicVariable:Dn,define:Ce,isDynamic:ot,unbox:en,accessor:Xe},Nn={next:typeof requestAnimationFrame=="function"?function(I){return requestAnimationFrame(I)}:function(I){return setTimeout(I,16)},cancel:typeof cancelAnimationFrame=="function"?function(I){return cancelAnimationFrame(I)}:clearTimeout},_r=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ni(){var I={"":0},oe=[""];return{id:function(be){var et=I[be];return et||(et=I[be]=oe.length,oe.push(be),et)},str:function(be){return oe[be]}}}function mi(I,oe,be){var et=document.createElement("canvas");o(et.style,{border:0,margin:0,padding:0,top:0,left:0}),I.appendChild(et),I===document.body&&(et.style.position="absolute",o(I.style,{margin:0,padding:0}));function dt(){var Nt=window.innerWidth,jt=window.innerHeight;if(I!==document.body){var Ct=I.getBoundingClientRect();Nt=Ct.right-Ct.left,jt=Ct.bottom-Ct.top}et.width=be*Nt,et.height=be*jt,o(et.style,{width:Nt+"px",height:jt+"px"})}var Ze;I!==document.body&&typeof ResizeObserver=="function"?(Ze=new ResizeObserver(function(){setTimeout(dt)}),Ze.observe(I)):window.addEventListener("resize",dt,!1);function st(){Ze?Ze.disconnect():window.removeEventListener("resize",dt),I.removeChild(et)}return dt(),{canvas:et,onDestroy:st}}function Bo(I,oe){function be(et){try{return I.getContext(et,oe)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}function Ho(I){return typeof I.nodeName=="string"&&typeof I.appendChild=="function"&&typeof I.getBoundingClientRect=="function"}function xn(I){return typeof I.drawArrays=="function"||typeof I.drawElements=="function"}function Bn(I){return typeof I=="string"?I.split():(ne(Array.isArray(I),"invalid extension array"),I)}function Xn(I){return typeof I=="string"?(ne(typeof document<"u","not supported outside of DOM"),document.querySelector(I)):I}function or(I){var oe=I||{},be,et,dt,Ze,st={},Nt=[],jt=[],Ct=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Gt=function(bt){bt&&ne.raise(bt)},Bt=function(){};if(typeof oe=="string"?(ne(typeof document<"u","selector queries only supported in DOM enviroments"),be=document.querySelector(oe),ne(be,"invalid query string for element")):typeof oe=="object"?Ho(oe)?be=oe:xn(oe)?(Ze=oe,dt=Ze.canvas):(ne.constructor(oe),"gl"in oe?Ze=oe.gl:"canvas"in oe?dt=Xn(oe.canvas):"container"in oe&&(et=Xn(oe.container)),"attributes"in oe&&(st=oe.attributes,ne.type(st,"object","invalid context attributes")),"extensions"in oe&&(Nt=Bn(oe.extensions)),"optionalExtensions"in oe&&(jt=Bn(oe.optionalExtensions)),"onDone"in oe&&(ne.type(oe.onDone,"function","invalid or missing onDone callback"),Gt=oe.onDone),"profile"in oe&&(ct=!!oe.profile),"pixelRatio"in oe&&(Ct=+oe.pixelRatio,ne(Ct>0,"invalid pixel ratio"))):ne.raise("invalid arguments to regl"),be&&(be.nodeName.toLowerCase()==="canvas"?dt=be:et=be),!Ze){if(!dt){ne(typeof document<"u","must manually specify webgl context outside of DOM environments");var Rt=mi(et||document.body,Gt,Ct);if(!Rt)return null;dt=Rt.canvas,Bt=Rt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),Ze=Bo(dt,st)}return Ze?{gl:Ze,canvas:dt,container:et,extensions:Nt,optionalExtensions:jt,pixelRatio:Ct,profile:ct,onDone:Gt,onDestroy:Bt}:(Bt(),Gt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kr(I,oe){var be={};function et(st){ne.type(st,"string","extension name must be string");var Nt=st.toLowerCase(),jt;try{jt=be[Nt]=I.getExtension(Nt)}catch{}return!!jt}for(var dt=0;dt<oe.extensions.length;++dt){var Ze=oe.extensions[dt];if(!et(Ze))return oe.onDestroy(),oe.onDone('"'+Ze+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return oe.optionalExtensions.forEach(et),{extensions:be,restore:function(){Object.keys(be).forEach(function(st){if(be[st]&&!et(st))throw new Error("(regl): error restoring extension "+st)})}}}function Rr(I,oe){for(var be=Array(I),et=0;et<I;++et)be[et]=oe(et);return be}var cl=5120,Ua=5121,fl=5122,au=5123,Ud=5124,yc=5125,fa=5126;function Wu(I){for(var oe=16;oe<=1<<28;oe*=16)if(I<=oe)return oe;return 0}function Pn(I){var oe,be;return oe=(I>65535)<<4,I>>>=oe,be=(I>255)<<3,I>>>=be,oe|=be,be=(I>15)<<2,I>>>=be,oe|=be,be=(I>3)<<1,I>>>=be,oe|=be,oe|I>>1}function kf(){var I=Rr(8,function(){return[]});function oe(Ze){var st=Wu(Ze),Nt=I[Pn(st)>>2];return Nt.length>0?Nt.pop():new ArrayBuffer(st)}function be(Ze){I[Pn(Ze.byteLength)>>2].push(Ze)}function et(Ze,st){var Nt=null;switch(Ze){case cl:Nt=new Int8Array(oe(st),0,st);break;case Ua:Nt=new Uint8Array(oe(st),0,st);break;case fl:Nt=new Int16Array(oe(2*st),0,st);break;case au:Nt=new Uint16Array(oe(2*st),0,st);break;case Ud:Nt=new Int32Array(oe(4*st),0,st);break;case yc:Nt=new Uint32Array(oe(4*st),0,st);break;case fa:Nt=new Float32Array(oe(4*st),0,st);break;default:return null}return Nt.length!==st?Nt.subarray(0,st):Nt}function dt(Ze){be(Ze.buffer)}return{alloc:oe,free:be,allocType:et,freeType:dt}}var ho=kf();ho.zero=kf();var mc=3408,zi=3410,ta=3411,Es=3412,Ta=3413,da=3414,Ma=3415,gc=33901,bc=33902,Cf=3379,zu=3386,Df=34921,_c=36347,Gd=36348,Cl=35661,jf=35660,dl=34930,wc=36349,Os=34076,Ec=34024,Oc=7936,Vd=7937,If=7938,Wr=35724,Gr=34047,Lf=36063,lu=34852,pa=3553,xs=34067,Ff=34069,Co=33984,Dl=6408,jl=5126,Ss=5121,uu=36160,gi=36053,xc=36064,$f=16384,Sc=function(I,oe){var be=1;oe.ext_texture_filter_anisotropic&&(be=I.getParameter(Gr));var et=1,dt=1;oe.webgl_draw_buffers&&(et=I.getParameter(lu),dt=I.getParameter(Lf));var Ze=!!oe.oes_texture_float;if(Ze){var st=I.createTexture();I.bindTexture(pa,st),I.texImage2D(pa,0,Dl,1,1,0,Dl,jl,null);var Nt=I.createFramebuffer();if(I.bindFramebuffer(uu,Nt),I.framebufferTexture2D(uu,xc,pa,st,0),I.bindTexture(pa,null),I.checkFramebufferStatus(uu)!==gi)Ze=!1;else{I.viewport(0,0,1,1),I.clearColor(1,0,0,1),I.clear($f);var jt=ho.allocType(jl,4);I.readPixels(0,0,1,1,Dl,jl,jt),I.getError()?Ze=!1:(I.deleteFramebuffer(Nt),I.deleteTexture(st),Ze=jt[0]===1),ho.freeType(jt)}}var Ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Ct){var Gt=I.createTexture(),Bt=ho.allocType(Ss,36);I.activeTexture(Co),I.bindTexture(xs,Gt),I.texImage2D(Ff,0,Dl,3,3,0,Dl,Ss,Bt),ho.freeType(Bt),I.bindTexture(xs,null),I.deleteTexture(Gt),ct=!I.getError()}return{colorBits:[I.getParameter(zi),I.getParameter(ta),I.getParameter(Es),I.getParameter(Ta)],depthBits:I.getParameter(da),stencilBits:I.getParameter(Ma),subpixelBits:I.getParameter(mc),extensions:Object.keys(oe).filter(function(Rt){return!!oe[Rt]}),maxAnisotropic:be,maxDrawbuffers:et,maxColorAttachments:dt,pointSizeDims:I.getParameter(gc),lineWidthDims:I.getParameter(bc),maxViewportDims:I.getParameter(zu),maxCombinedTextureUnits:I.getParameter(Cl),maxCubeMapSize:I.getParameter(Os),maxRenderbufferSize:I.getParameter(Ec),maxTextureUnits:I.getParameter(dl),maxTextureSize:I.getParameter(Cf),maxAttributes:I.getParameter(Df),maxVertexUniforms:I.getParameter(_c),maxVertexTextureUnits:I.getParameter(jf),maxVaryingVectors:I.getParameter(Gd),maxFragmentUniforms:I.getParameter(wc),glsl:I.getParameter(Wr),renderer:I.getParameter(Vd),vendor:I.getParameter(Oc),version:I.getParameter(If),readFloat:Ze,npotTextureCube:ct}};function Ri(I){return!!I&&typeof I=="object"&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&typeof I.offset=="number"&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||n(I.data))}var ri=function(I){return Object.keys(I).map(function(oe){return I[oe]})},na={shape:Ci,flatten:Uf};function ro(I,oe,be){for(var et=0;et<oe;++et)be[et]=I[et]}function Bf(I,oe,be,et){for(var dt=0,Ze=0;Ze<oe;++Ze)for(var st=I[Ze],Nt=0;Nt<be;++Nt)et[dt++]=st[Nt]}function ki(I,oe,be,et,dt,Ze){for(var st=Ze,Nt=0;Nt<oe;++Nt)for(var jt=I[Nt],Ct=0;Ct<be;++Ct)for(var ct=jt[Ct],Gt=0;Gt<et;++Gt)dt[st++]=ct[Gt]}function Ac(I,oe,be,et,dt){for(var Ze=1,st=be+1;st<oe.length;++st)Ze*=oe[st];var Nt=oe[be];if(oe.length-be===4){var jt=oe[be+1],Ct=oe[be+2],ct=oe[be+3];for(st=0;st<Nt;++st)ki(I[st],jt,Ct,ct,et,dt),dt+=Ze}else for(st=0;st<Nt;++st)Ac(I[st],oe,be+1,et,dt),dt+=Ze}function Uf(I,oe,be,et){var dt=1;if(oe.length)for(var Ze=0;Ze<oe.length;++Ze)dt*=oe[Ze];else dt=0;var st=et||ho.allocType(be,dt);switch(oe.length){case 0:break;case 1:ro(I,oe[0],st);break;case 2:Bf(I,oe[0],oe[1],st);break;case 3:ki(I,oe[0],oe[1],oe[2],st,0);break;default:Ac(I,oe,0,st,0)}return st}function Ci(I){for(var oe=[],be=I;be.length;be=be[0])oe.push(be.length);return oe}var Ti={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Tc=5120,Ir=5122,oi=5124,As=5121,Gf=5123,Mc=5125,Ts=5126,Ga=5126,Di={int8:Tc,int16:Ir,int32:oi,uint8:As,uint16:Gf,uint32:Mc,float:Ts,float32:Ga},su=35048,Hi=35040,ha={dynamic:su,stream:Hi,static:35044},Tr=na.flatten,ji=na.shape,Pa=35044,fi=35040,cu=5121,Il=5126,Na=[];Na[5120]=1,Na[5122]=2,Na[5124]=4,Na[5121]=1,Na[5123]=2,Na[5125]=4,Na[5126]=4;function so(I){return Ti[Object.prototype.toString.call(I)]|0}function Hu(I,oe){for(var be=0;be<oe.length;++be)I[be]=oe[be]}function Va(I,oe,be,et,dt,Ze,st){for(var Nt=0,jt=0;jt<be;++jt)for(var Ct=0;Ct<et;++Ct)I[Nt++]=oe[dt*jt+Ze*Ct+st]}function va(I,oe,be,et){var dt=0,Ze={};function st(Ve){this.id=dt++,this.buffer=I.createBuffer(),this.type=Ve,this.usage=Pa,this.byteLength=0,this.dimension=1,this.dtype=cu,this.persistentData=null,be.profile&&(this.stats={size:0})}st.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)},st.prototype.destroy=function(){Bt(this)};var Nt=[];function jt(Ve,it){var Lt=Nt.pop();return Lt||(Lt=new st(Ve)),Lt.bind(),Gt(Lt,it,fi,0,1,!1),Lt}function Ct(Ve){Nt.push(Ve)}function ct(Ve,it,Lt){Ve.byteLength=it.byteLength,I.bufferData(Ve.type,it,Lt)}function Gt(Ve,it,Lt,Kt,xt,Zt){var St;if(Ve.usage=Lt,Array.isArray(it)){if(Ve.dtype=Kt||Il,it.length>0){var Vt;if(Array.isArray(it[0])){St=ji(it);for(var _t=1,Ht=1;Ht<St.length;++Ht)_t*=St[Ht];Ve.dimension=_t,Vt=Tr(it,St,Ve.dtype),ct(Ve,Vt,Lt),Zt?Ve.persistentData=Vt:ho.freeType(Vt)}else if(typeof it[0]=="number"){Ve.dimension=xt;var Mn=ho.allocType(Ve.dtype,it.length);Hu(Mn,it),ct(Ve,Mn,Lt),Zt?Ve.persistentData=Mn:ho.freeType(Mn)}else n(it[0])?(Ve.dimension=it[0].length,Ve.dtype=Kt||so(it[0])||Il,Vt=Tr(it,[it.length,it[0].length],Ve.dtype),ct(Ve,Vt,Lt),Zt?Ve.persistentData=Vt:ho.freeType(Vt)):ne.raise("invalid buffer data")}}else if(n(it))Ve.dtype=Kt||so(it),Ve.dimension=xt,ct(Ve,it,Lt),Zt&&(Ve.persistentData=new Uint8Array(new Uint8Array(it.buffer)));else if(Ri(it)){St=it.shape;var Wn=it.stride,It=it.offset,At=0,wt=0,Cn=0,tr=0;St.length===1?(At=St[0],wt=1,Cn=Wn[0],tr=0):St.length===2?(At=St[0],wt=St[1],Cn=Wn[0],tr=Wn[1]):ne.raise("invalid shape"),Ve.dtype=Kt||so(it.data)||Il,Ve.dimension=wt;var un=ho.allocType(Ve.dtype,At*wt);Va(un,it.data,At,wt,Cn,tr,It),ct(Ve,un,Lt),Zt?Ve.persistentData=un:ho.freeType(un)}else it instanceof ArrayBuffer?(Ve.dtype=cu,Ve.dimension=xt,ct(Ve,it,Lt),Zt&&(Ve.persistentData=new Uint8Array(new Uint8Array(it)))):ne.raise("invalid buffer data")}function Bt(Ve){oe.bufferCount--,et(Ve);var it=Ve.buffer;ne(it,"buffer must not be deleted already"),I.deleteBuffer(it),Ve.buffer=null,delete Ze[Ve.id]}function Rt(Ve,it,Lt,Kt){oe.bufferCount++;var xt=new st(it);Ze[xt.id]=xt;function Zt(_t){var Ht=Pa,Mn=null,Wn=0,It=0,At=1;return Array.isArray(_t)||n(_t)||Ri(_t)||_t instanceof ArrayBuffer?Mn=_t:typeof _t=="number"?Wn=_t|0:_t&&(ne.type(_t,"object","buffer arguments must be an object, a number or an array"),"data"in _t&&(ne(Mn===null||Array.isArray(Mn)||n(Mn)||Ri(Mn),"invalid data for buffer"),Mn=_t.data),"usage"in _t&&(ne.parameter(_t.usage,ha,"invalid buffer usage"),Ht=ha[_t.usage]),"type"in _t&&(ne.parameter(_t.type,Di,"invalid buffer type"),It=Di[_t.type]),"dimension"in _t&&(ne.type(_t.dimension,"number","invalid dimension"),At=_t.dimension|0),"length"in _t&&(ne.nni(Wn,"buffer length must be a nonnegative integer"),Wn=_t.length|0)),xt.bind(),Mn?Gt(xt,Mn,Ht,It,At,Kt):(Wn&&I.bufferData(xt.type,Wn,Ht),xt.dtype=It||cu,xt.usage=Ht,xt.dimension=At,xt.byteLength=Wn),be.profile&&(xt.stats.size=xt.byteLength*Na[xt.dtype]),Zt}function St(_t,Ht){ne(Ht+_t.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+_t.byteLength+" starting from offset "+Ht+" to a buffer of size "+xt.byteLength),I.bufferSubData(xt.type,Ht,_t)}function Vt(_t,Ht){var Mn=(Ht||0)|0,Wn;if(xt.bind(),n(_t)||_t instanceof ArrayBuffer)St(_t,Mn);else if(Array.isArray(_t)){if(_t.length>0)if(typeof _t[0]=="number"){var It=ho.allocType(xt.dtype,_t.length);Hu(It,_t),St(It,Mn),ho.freeType(It)}else if(Array.isArray(_t[0])||n(_t[0])){Wn=ji(_t);var At=Tr(_t,Wn,xt.dtype);St(At,Mn),ho.freeType(At)}else ne.raise("invalid buffer data")}else if(Ri(_t)){Wn=_t.shape;var wt=_t.stride,Cn=0,tr=0,un=0,Qn=0;Wn.length===1?(Cn=Wn[0],tr=1,un=wt[0],Qn=0):Wn.length===2?(Cn=Wn[0],tr=Wn[1],un=wt[0],Qn=wt[1]):ne.raise("invalid shape");var Vn=Array.isArray(_t.data)?xt.dtype:so(_t.data),nr=ho.allocType(Vn,Cn*tr);Va(nr,_t.data,Cn,tr,un,Qn,_t.offset),St(nr,Mn),ho.freeType(nr)}else ne.raise("invalid data for buffer subdata");return Zt}return Lt||Zt(Ve),Zt._reglType="buffer",Zt._buffer=xt,Zt.subdata=Vt,be.profile&&(Zt.stats=xt.stats),Zt.destroy=function(){Bt(xt)},Zt}function bt(){ri(Ze).forEach(function(Ve){Ve.buffer=I.createBuffer(),I.bindBuffer(Ve.type,Ve.buffer),I.bufferData(Ve.type,Ve.persistentData||Ve.byteLength,Ve.usage)})}return be.profile&&(oe.getTotalBufferSize=function(){var Ve=0;return Object.keys(Ze).forEach(function(it){Ve+=Ze[it].stats.size}),Ve}),{create:Rt,createStream:jt,destroyStream:Ct,clear:function(){ri(Ze).forEach(Bt),Nt.forEach(Bt)},getBuffer:function(Ve){return Ve&&Ve._buffer instanceof st?Ve._buffer:null},restore:bt,_initBuffer:Gt}}var Pc=0,Wd=0,Nc=1,Uo=1,Ll=4,Wa=4,Xo={points:Pc,point:Wd,lines:Nc,line:Uo,triangles:Ll,triangle:Wa,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Rc=0,ra=1,ya=4,Ms=5120,Ii=5121,Xi=5122,ii=5123,oa=5124,Mi=5125,ut=34963,Dt=35040,Ft=35044;function fn(I,oe,be,et){var dt={},Ze=0,st={uint8:Ii,uint16:ii};oe.oes_element_index_uint&&(st.uint32=Mi);function Nt(bt){this.id=Ze++,dt[this.id]=this,this.buffer=bt,this.primType=ya,this.vertCount=0,this.type=0}Nt.prototype.bind=function(){this.buffer.bind()};var jt=[];function Ct(bt){var Ve=jt.pop();return Ve||(Ve=new Nt(be.create(null,ut,!0,!1)._buffer)),Gt(Ve,bt,Dt,-1,-1,0,0),Ve}function ct(bt){jt.push(bt)}function Gt(bt,Ve,it,Lt,Kt,xt,Zt){bt.buffer.bind();var St;if(Ve){var Vt=Zt;!Zt&&(!n(Ve)||Ri(Ve)&&!n(Ve.data))&&(Vt=oe.oes_element_index_uint?Mi:ii),be._initBuffer(bt.buffer,Ve,it,Vt,3)}else I.bufferData(ut,xt,it),bt.buffer.dtype=St||Ii,bt.buffer.usage=it,bt.buffer.dimension=3,bt.buffer.byteLength=xt;if(St=Zt,!Zt){switch(bt.buffer.dtype){case Ii:case Ms:St=Ii;break;case ii:case Xi:St=ii;break;case Mi:case oa:St=Mi;break;default:ne.raise("unsupported type for element array")}bt.buffer.dtype=St}bt.type=St,ne(St!==Mi||!!oe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var _t=Kt;_t<0&&(_t=bt.buffer.byteLength,St===ii?_t>>=1:St===Mi&&(_t>>=2)),bt.vertCount=_t;var Ht=Lt;if(Lt<0){Ht=ya;var Mn=bt.buffer.dimension;Mn===1&&(Ht=Rc),Mn===2&&(Ht=ra),Mn===3&&(Ht=ya)}bt.primType=Ht}function Bt(bt){et.elementsCount--,ne(bt.buffer!==null,"must not double destroy elements"),delete dt[bt.id],bt.buffer.destroy(),bt.buffer=null}function Rt(bt,Ve){var it=be.create(null,ut,!0),Lt=new Nt(it._buffer);et.elementsCount++;function Kt(xt){if(!xt)it(),Lt.primType=ya,Lt.vertCount=0,Lt.type=Ii;else if(typeof xt=="number")it(xt),Lt.primType=ya,Lt.vertCount=xt|0,Lt.type=Ii;else{var Zt=null,St=Ft,Vt=-1,_t=-1,Ht=0,Mn=0;Array.isArray(xt)||n(xt)||Ri(xt)?Zt=xt:(ne.type(xt,"object","invalid arguments for elements"),"data"in xt&&(Zt=xt.data,ne(Array.isArray(Zt)||n(Zt)||Ri(Zt),"invalid data for element buffer")),"usage"in xt&&(ne.parameter(xt.usage,ha,"invalid element buffer usage"),St=ha[xt.usage]),"primitive"in xt&&(ne.parameter(xt.primitive,Xo,"invalid element buffer primitive"),Vt=Xo[xt.primitive]),"count"in xt&&(ne(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),_t=xt.count|0),"type"in xt&&(ne.parameter(xt.type,st,"invalid buffer type"),Mn=st[xt.type]),"length"in xt?Ht=xt.length|0:(Ht=_t,Mn===ii||Mn===Xi?Ht*=2:(Mn===Mi||Mn===oa)&&(Ht*=4))),Gt(Lt,Zt,St,Vt,_t,Ht,Mn)}return Kt}return Kt(bt),Kt._reglType="elements",Kt._elements=Lt,Kt.subdata=function(xt,Zt){return it.subdata(xt,Zt),Kt},Kt.destroy=function(){Bt(Lt)},Kt}return{create:Rt,createStream:Ct,destroyStream:ct,getElements:function(bt){return typeof bt=="function"&&bt._elements instanceof Nt?bt._elements:null},clear:function(){ri(dt).forEach(Bt)}}}var lr=new Float32Array(1),Mr=new Uint32Array(lr.buffer),co=5123;function T(I){for(var oe=ho.allocType(co,I.length),be=0;be<I.length;++be)if(isNaN(I[be]))oe[be]=65535;else if(I[be]===1/0)oe[be]=31744;else if(I[be]===-1/0)oe[be]=64512;else{lr[0]=I[be];var et=Mr[0],dt=et>>>31<<15,Ze=(et<<1>>>24)-127,st=et>>13&1024-1;if(Ze<-24)oe[be]=dt;else if(Ze<-14){var Nt=-14-Ze;oe[be]=dt+(st+1024>>Nt)}else Ze>15?oe[be]=dt+31744:oe[be]=dt+(Ze+15<<10)+st}return oe}function M(I){return Array.isArray(I)||n(I)}var $=function(I){return!(I&I-1)&&!!I},te=34467,ye=3553,Ge=34067,vt=34069,zt=6408,bn=6406,yr=6407,ln=6409,Vr=6410,dr=32854,Cr=32855,ia=36194,go=32819,Yi=32820,pl=33635,hl=34042,Fl=6402,fu=34041,za=35904,du=35906,Yo=36193,$l=33776,vl=33777,Ha=33778,Xa=33779,Xu=35986,th=35987,nh=34798,zd=35840,kc=35841,Yu=35842,Vf=35843,rh=36196,qu=5121,Cc=5123,Wf=5125,Do=5126,Li=10242,zf=10243,Hf=10497,Ps=33071,Bv=33648,Ns=10240,yl=10241,Dc=9728,Ku=9729,pu=9984,Rs=9985,jc=9986,hu=9987,Uv=33170,Ic=4352,Gv=4353,Vv=4354,oh=34046,Xf=3317,Pi=37440,ih=37441,re=37443,Zu=37444,Bl=33984,Ra=[pu,jc,Rs,hu],Pr=[0,ln,Vr,yr,zt],bi={};bi[ln]=bi[bn]=bi[Fl]=1,bi[fu]=bi[Vr]=2,bi[yr]=bi[za]=3,bi[zt]=bi[du]=4;function Lr(I){return"[object "+I+"]"}var Ya=Lr("HTMLCanvasElement"),Ul=Lr("OffscreenCanvas"),ma=Lr("CanvasRenderingContext2D"),Yf=Lr("ImageBitmap"),qf=Lr("HTMLImageElement"),Hd=Lr("HTMLVideoElement"),ah=Object.keys(Ti).concat([Ya,Ul,ma,Yf,qf,Hd]),Gl=[];Gl[qu]=1,Gl[Do]=4,Gl[Yo]=2,Gl[Cc]=2,Gl[Wf]=4;var jo=[];jo[dr]=2,jo[Cr]=2,jo[ia]=2,jo[fu]=4,jo[$l]=.5,jo[vl]=.5,jo[Ha]=1,jo[Xa]=1,jo[Xu]=.5,jo[th]=1,jo[nh]=1,jo[zd]=.5,jo[kc]=.25,jo[Yu]=.5,jo[Vf]=.25,jo[rh]=.5;function ks(I){return Array.isArray(I)&&(I.length===0||typeof I[0]=="number")}function Xd(I){if(!Array.isArray(I))return!1;var oe=I.length;return!(oe===0||!M(I[0]))}function Vl(I){return Object.prototype.toString.call(I)}function qa(I){return Vl(I)===Ya}function Lc(I){return Vl(I)===Ul}function vu(I){return Vl(I)===ma}function ga(I){return Vl(I)===Yf}function Yd(I){return Vl(I)===qf}function qd(I){return Vl(I)===Hd}function Ka(I){if(!I)return!1;var oe=Vl(I);return ah.indexOf(oe)>=0?!0:ks(I)||Xd(I)||Ri(I)}function vo(I){return Ti[Object.prototype.toString.call(I)]|0}function lh(I,oe){var be=oe.length;switch(I.type){case qu:case Cc:case Wf:case Do:var et=ho.allocType(I.type,be);et.set(oe),I.data=et;break;case Yo:I.data=T(oe);break;default:ne.raise("unsupported texture type, must specify a typed array")}}function Kd(I,oe){return ho.allocType(I.type===Yo?Do:I.type,oe)}function Io(I,oe){I.type===Yo?(I.data=T(oe),ho.freeType(oe)):I.data=oe}function zr(I,oe,be,et,dt,Ze){for(var st=I.width,Nt=I.height,jt=I.channels,Ct=st*Nt*jt,ct=Kd(I,Ct),Gt=0,Bt=0;Bt<Nt;++Bt)for(var Rt=0;Rt<st;++Rt)for(var bt=0;bt<jt;++bt)ct[Gt++]=oe[be*Rt+et*Bt+dt*bt+Ze];Io(I,ct)}function qo(I,oe,be,et,dt,Ze){var st;if(typeof jo[I]<"u"?st=jo[I]:st=bi[I]*Gl[oe],Ze&&(st*=6),dt){for(var Nt=0,jt=be;jt>=1;)Nt+=st*jt*jt,jt/=2;return Nt}else return st*be*et}function Er(I,oe,be,et,dt,Ze,st){var Nt={"don't care":Ic,"dont care":Ic,nice:Vv,fast:Gv},jt={repeat:Hf,clamp:Ps,mirror:Bv},Ct={nearest:Dc,linear:Ku},ct=o({mipmap:hu,"nearest mipmap nearest":pu,"linear mipmap nearest":Rs,"nearest mipmap linear":jc,"linear mipmap linear":hu},Ct),Gt={none:0,browser:Zu},Bt={uint8:qu,rgba4:go,rgb565:pl,"rgb5 a1":Yi},Rt={alpha:bn,luminance:ln,"luminance alpha":Vr,rgb:yr,rgba:zt,rgba4:dr,"rgb5 a1":Cr,rgb565:ia},bt={};oe.ext_srgb&&(Rt.srgb=za,Rt.srgba=du),oe.oes_texture_float&&(Bt.float32=Bt.float=Do),oe.oes_texture_half_float&&(Bt.float16=Bt["half float"]=Yo),oe.webgl_depth_texture&&(o(Rt,{depth:Fl,"depth stencil":fu}),o(Bt,{uint16:Cc,uint32:Wf,"depth stencil":hl})),oe.webgl_compressed_texture_s3tc&&o(bt,{"rgb s3tc dxt1":$l,"rgba s3tc dxt1":vl,"rgba s3tc dxt3":Ha,"rgba s3tc dxt5":Xa}),oe.webgl_compressed_texture_atc&&o(bt,{"rgb atc":Xu,"rgba atc explicit alpha":th,"rgba atc interpolated alpha":nh}),oe.webgl_compressed_texture_pvrtc&&o(bt,{"rgb pvrtc 4bppv1":zd,"rgb pvrtc 2bppv1":kc,"rgba pvrtc 4bppv1":Yu,"rgba pvrtc 2bppv1":Vf}),oe.webgl_compressed_texture_etc1&&(bt["rgb etc1"]=rh);var Ve=Array.prototype.slice.call(I.getParameter(te));Object.keys(bt).forEach(function(he){var tt=bt[he];Ve.indexOf(tt)>=0&&(Rt[he]=tt)});var it=Object.keys(Rt);be.textureFormats=it;var Lt=[];Object.keys(Rt).forEach(function(he){var tt=Rt[he];Lt[tt]=he});var Kt=[];Object.keys(Bt).forEach(function(he){var tt=Bt[he];Kt[tt]=he});var xt=[];Object.keys(Ct).forEach(function(he){var tt=Ct[he];xt[tt]=he});var Zt=[];Object.keys(ct).forEach(function(he){var tt=ct[he];Zt[tt]=he});var St=[];Object.keys(jt).forEach(function(he){var tt=jt[he];St[tt]=he});var Vt=it.reduce(function(he,tt){var qe=Rt[tt];return qe===ln||qe===bn||qe===ln||qe===Vr||qe===Fl||qe===fu||oe.ext_srgb&&(qe===za||qe===du)?he[qe]=qe:qe===Cr||tt.indexOf("rgba")>=0?he[qe]=zt:he[qe]=yr,he},{});function _t(){this.internalformat=zt,this.format=zt,this.type=qu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zu,this.width=0,this.height=0,this.channels=0}function Ht(he,tt){he.internalformat=tt.internalformat,he.format=tt.format,he.type=tt.type,he.compressed=tt.compressed,he.premultiplyAlpha=tt.premultiplyAlpha,he.flipY=tt.flipY,he.unpackAlignment=tt.unpackAlignment,he.colorSpace=tt.colorSpace,he.width=tt.width,he.height=tt.height,he.channels=tt.channels}function Mn(he,tt){if(!(typeof tt!="object"||!tt)){if("premultiplyAlpha"in tt&&(ne.type(tt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),he.premultiplyAlpha=tt.premultiplyAlpha),"flipY"in tt&&(ne.type(tt.flipY,"boolean","invalid texture flip"),he.flipY=tt.flipY),"alignment"in tt&&(ne.oneOf(tt.alignment,[1,2,4,8],"invalid texture unpack alignment"),he.unpackAlignment=tt.alignment),"colorSpace"in tt&&(ne.parameter(tt.colorSpace,Gt,"invalid colorSpace"),he.colorSpace=Gt[tt.colorSpace]),"type"in tt){var qe=tt.type;ne(oe.oes_texture_float||!(qe==="float"||qe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ne(oe.oes_texture_half_float||!(qe==="half float"||qe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ne(oe.webgl_depth_texture||!(qe==="uint16"||qe==="uint32"||qe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(qe,Bt,"invalid texture type"),he.type=Bt[qe]}var tn=he.width,pr=he.height,le=he.channels,Q=!1;"shape"in tt?(ne(Array.isArray(tt.shape)&&tt.shape.length>=2,"shape must be an array"),tn=tt.shape[0],pr=tt.shape[1],tt.shape.length===3&&(le=tt.shape[2],ne(le>0&&le<=4,"invalid number of channels"),Q=!0),ne(tn>=0&&tn<=be.maxTextureSize,"invalid width"),ne(pr>=0&&pr<=be.maxTextureSize,"invalid height")):("radius"in tt&&(tn=pr=tt.radius,ne(tn>=0&&tn<=be.maxTextureSize,"invalid radius")),"width"in tt&&(tn=tt.width,ne(tn>=0&&tn<=be.maxTextureSize,"invalid width")),"height"in tt&&(pr=tt.height,ne(pr>=0&&pr<=be.maxTextureSize,"invalid height")),"channels"in tt&&(le=tt.channels,ne(le>0&&le<=4,"invalid number of channels"),Q=!0)),he.width=tn|0,he.height=pr|0,he.channels=le|0;var Te=!1;if("format"in tt){var Ue=tt.format;ne(oe.webgl_depth_texture||!(Ue==="depth"||Ue==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(Ue,Rt,"invalid texture format");var He=he.internalformat=Rt[Ue];he.format=Vt[He],Ue in Bt&&("type"in tt||(he.type=Bt[Ue])),Ue in bt&&(he.compressed=!0),Te=!0}!Q&&Te?he.channels=bi[he.format]:Q&&!Te?he.channels!==Pr[he.format]&&(he.format=he.internalformat=Pr[he.channels]):Te&&Q&&ne(he.channels===bi[he.format],"number of channels inconsistent with specified format")}}function Wn(he){I.pixelStorei(Pi,he.flipY),I.pixelStorei(ih,he.premultiplyAlpha),I.pixelStorei(re,he.colorSpace),I.pixelStorei(Xf,he.unpackAlignment)}function It(){_t.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function At(he,tt){var qe=null;if(Ka(tt)?qe=tt:tt&&(ne.type(tt,"object","invalid pixel data type"),Mn(he,tt),"x"in tt&&(he.xOffset=tt.x|0),"y"in tt&&(he.yOffset=tt.y|0),Ka(tt.data)&&(qe=tt.data)),ne(!he.compressed||qe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),tt.copy){ne(!qe,"can not specify copy and data field for the same texture");var tn=dt.viewportWidth,pr=dt.viewportHeight;he.width=he.width||tn-he.xOffset,he.height=he.height||pr-he.yOffset,he.needsCopy=!0,ne(he.xOffset>=0&&he.xOffset<tn&&he.yOffset>=0&&he.yOffset<pr&&he.width>0&&he.width<=tn&&he.height>0&&he.height<=pr,"copy texture read out of bounds")}else if(!qe)he.width=he.width||1,he.height=he.height||1,he.channels=he.channels||4;else if(n(qe))he.channels=he.channels||4,he.data=qe,!("type"in tt)&&he.type===qu&&(he.type=vo(qe));else if(ks(qe))he.channels=he.channels||4,lh(he,qe),he.alignment=1,he.needsFree=!0;else if(Ri(qe)){var le=qe.data;!Array.isArray(le)&&he.type===qu&&(he.type=vo(le));var Q=qe.shape,Te=qe.stride,Ue,He,Ne,Me,Ie,fe;Q.length===3?(Ne=Q[2],fe=Te[2]):(ne(Q.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ne=1,fe=1),Ue=Q[0],He=Q[1],Me=Te[0],Ie=Te[1],he.alignment=1,he.width=Ue,he.height=He,he.channels=Ne,he.format=he.internalformat=Pr[Ne],he.needsFree=!0,zr(he,le,Me,Ie,fe,qe.offset)}else if(qa(qe)||Lc(qe)||vu(qe))qa(qe)||Lc(qe)?he.element=qe:he.element=qe.canvas,he.width=he.element.width,he.height=he.element.height,he.channels=4;else if(ga(qe))he.element=qe,he.width=qe.width,he.height=qe.height,he.channels=4;else if(Yd(qe))he.element=qe,he.width=qe.naturalWidth,he.height=qe.naturalHeight,he.channels=4;else if(qd(qe))he.element=qe,he.width=qe.videoWidth,he.height=qe.videoHeight,he.channels=4;else if(Xd(qe)){var we=he.width||qe[0].length,ue=he.height||qe.length,$e=he.channels;M(qe[0][0])?$e=$e||qe[0][0].length:$e=$e||1;for(var Ye=na.shape(qe),d=1,m=0;m<Ye.length;++m)d*=Ye[m];var E=Kd(he,d);na.flatten(qe,Ye,"",E),Io(he,E),he.alignment=1,he.width=we,he.height=ue,he.channels=$e,he.format=he.internalformat=Pr[$e],he.needsFree=!0}he.type===Do?ne(be.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):he.type===Yo&&ne(be.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function wt(he,tt,qe){var tn=he.element,pr=he.data,le=he.internalformat,Q=he.format,Te=he.type,Ue=he.width,He=he.height;Wn(he),tn?I.texImage2D(tt,qe,Q,Q,Te,tn):he.compressed?I.compressedTexImage2D(tt,qe,le,Ue,He,0,pr):he.needsCopy?(et(),I.copyTexImage2D(tt,qe,Q,he.xOffset,he.yOffset,Ue,He,0)):I.texImage2D(tt,qe,Q,Ue,He,0,Q,Te,pr||null)}function Cn(he,tt,qe,tn,pr){var le=he.element,Q=he.data,Te=he.internalformat,Ue=he.format,He=he.type,Ne=he.width,Me=he.height;Wn(he),le?I.texSubImage2D(tt,pr,qe,tn,Ue,He,le):he.compressed?I.compressedTexSubImage2D(tt,pr,qe,tn,Te,Ne,Me,Q):he.needsCopy?(et(),I.copyTexSubImage2D(tt,pr,qe,tn,he.xOffset,he.yOffset,Ne,Me)):I.texSubImage2D(tt,pr,qe,tn,Ne,Me,Ue,He,Q)}var tr=[];function un(){return tr.pop()||new It}function Qn(he){he.needsFree&&ho.freeType(he.data),It.call(he),tr.push(he)}function Vn(){_t.call(this),this.genMipmaps=!1,this.mipmapHint=Ic,this.mipmask=0,this.images=Array(16)}function nr(he,tt,qe){var tn=he.images[0]=un();he.mipmask=1,tn.width=he.width=tt,tn.height=he.height=qe,tn.channels=he.channels=4}function gr(he,tt){var qe=null;if(Ka(tt))qe=he.images[0]=un(),Ht(qe,he),At(qe,tt),he.mipmask=1;else if(Mn(he,tt),Array.isArray(tt.mipmap))for(var tn=tt.mipmap,pr=0;pr<tn.length;++pr)qe=he.images[pr]=un(),Ht(qe,he),qe.width>>=pr,qe.height>>=pr,At(qe,tn[pr]),he.mipmask|=1<<pr;else qe=he.images[0]=un(),Ht(qe,he),At(qe,tt),he.mipmask=1;Ht(he,he.images[0]),he.compressed&&(he.internalformat===$l||he.internalformat===vl||he.internalformat===Ha||he.internalformat===Xa)&&ne(he.width%4===0&&he.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Mo(he,tt){for(var qe=he.images,tn=0;tn<qe.length;++tn){if(!qe[tn])return;wt(qe[tn],tt,tn)}}var Fo=[];function sr(){var he=Fo.pop()||new Vn;_t.call(he),he.mipmask=0;for(var tt=0;tt<16;++tt)he.images[tt]=null;return he}function Go(he){for(var tt=he.images,qe=0;qe<tt.length;++qe)tt[qe]&&Qn(tt[qe]),tt[qe]=null;Fo.push(he)}function to(){this.minFilter=Dc,this.magFilter=Dc,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ic}function Po(he,tt){if("min"in tt){var qe=tt.min;ne.parameter(qe,ct),he.minFilter=ct[qe],Ra.indexOf(he.minFilter)>=0&&!("faces"in tt)&&(he.genMipmaps=!0)}if("mag"in tt){var tn=tt.mag;ne.parameter(tn,Ct),he.magFilter=Ct[tn]}var pr=he.wrapS,le=he.wrapT;if("wrap"in tt){var Q=tt.wrap;typeof Q=="string"?(ne.parameter(Q,jt),pr=le=jt[Q]):Array.isArray(Q)&&(ne.parameter(Q[0],jt),ne.parameter(Q[1],jt),pr=jt[Q[0]],le=jt[Q[1]])}else{if("wrapS"in tt){var Te=tt.wrapS;ne.parameter(Te,jt),pr=jt[Te]}if("wrapT"in tt){var Ue=tt.wrapT;ne.parameter(Ue,jt),le=jt[Ue]}}if(he.wrapS=pr,he.wrapT=le,"anisotropic"in tt){var He=tt.anisotropic;ne(typeof He=="number"&&He>=1&&He<=be.maxAnisotropic,"aniso samples must be between 1 and "),he.anisotropic=tt.anisotropic}if("mipmap"in tt){var Ne=!1;switch(typeof tt.mipmap){case"string":ne.parameter(tt.mipmap,Nt,"invalid mipmap hint"),he.mipmapHint=Nt[tt.mipmap],he.genMipmaps=!0,Ne=!0;break;case"boolean":Ne=he.genMipmaps=tt.mipmap;break;case"object":ne(Array.isArray(tt.mipmap),"invalid mipmap type"),he.genMipmaps=!1,Ne=!0;break;default:ne.raise("invalid mipmap type")}Ne&&!("min"in tt)&&(he.minFilter=pu)}}function $o(he,tt){I.texParameteri(tt,yl,he.minFilter),I.texParameteri(tt,Ns,he.magFilter),I.texParameteri(tt,Li,he.wrapS),I.texParameteri(tt,zf,he.wrapT),oe.ext_texture_filter_anisotropic&&I.texParameteri(tt,oh,he.anisotropic),he.genMipmaps&&(I.hint(Uv,he.mipmapHint),I.generateMipmap(tt))}var wo=0,yo={},Qo=be.maxTextureUnits,Eo=Array(Qo).map(function(){return null});function Zn(he){_t.call(this),this.mipmask=0,this.internalformat=zt,this.id=wo++,this.refCount=1,this.target=he,this.texture=I.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new to,st.profile&&(this.stats={size:0})}function ai(he){I.activeTexture(Bl),I.bindTexture(he.target,he.texture)}function Nr(){var he=Eo[0];he?I.bindTexture(he.target,he.texture):I.bindTexture(ye,null)}function kn(he){var tt=he.texture;ne(tt,"must not double destroy texture");var qe=he.unit,tn=he.target;qe>=0&&(I.activeTexture(Bl+qe),I.bindTexture(tn,null),Eo[qe]=null),I.deleteTexture(tt),he.texture=null,he.params=null,he.pixels=null,he.refCount=0,delete yo[he.id],Ze.textureCount--}o(Zn.prototype,{bind:function(){var he=this;he.bindCount+=1;var tt=he.unit;if(tt<0){for(var qe=0;qe<Qo;++qe){var tn=Eo[qe];if(tn){if(tn.bindCount>0)continue;tn.unit=-1}Eo[qe]=he,tt=qe;break}tt>=Qo&&ne.raise("insufficient number of texture units"),st.profile&&Ze.maxTextureUnits<tt+1&&(Ze.maxTextureUnits=tt+1),he.unit=tt,I.activeTexture(Bl+tt),I.bindTexture(he.target,he.texture)}return tt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&kn(this)}});function cr(he,tt){var qe=new Zn(ye);yo[qe.id]=qe,Ze.textureCount++;function tn(Q,Te){var Ue=qe.texInfo;to.call(Ue);var He=sr();return typeof Q=="number"?typeof Te=="number"?nr(He,Q|0,Te|0):nr(He,Q|0,Q|0):Q?(ne.type(Q,"object","invalid arguments to regl.texture"),Po(Ue,Q),gr(He,Q)):nr(He,1,1),Ue.genMipmaps&&(He.mipmask=(He.width<<1)-1),qe.mipmask=He.mipmask,Ht(qe,He),ne.texture2D(Ue,He,be),qe.internalformat=He.internalformat,tn.width=He.width,tn.height=He.height,ai(qe),Mo(He,ye),$o(Ue,ye),Nr(),Go(He),st.profile&&(qe.stats.size=qo(qe.internalformat,qe.type,He.width,He.height,Ue.genMipmaps,!1)),tn.format=Lt[qe.internalformat],tn.type=Kt[qe.type],tn.mag=xt[Ue.magFilter],tn.min=Zt[Ue.minFilter],tn.wrapS=St[Ue.wrapS],tn.wrapT=St[Ue.wrapT],tn}function pr(Q,Te,Ue,He){ne(!!Q,"must specify image data");var Ne=Te|0,Me=Ue|0,Ie=He|0,fe=un();return Ht(fe,qe),fe.width=0,fe.height=0,At(fe,Q),fe.width=fe.width||(qe.width>>Ie)-Ne,fe.height=fe.height||(qe.height>>Ie)-Me,ne(qe.type===fe.type&&qe.format===fe.format&&qe.internalformat===fe.internalformat,"incompatible format for texture.subimage"),ne(Ne>=0&&Me>=0&&Ne+fe.width<=qe.width&&Me+fe.height<=qe.height,"texture.subimage write out of bounds"),ne(qe.mipmask&1<<Ie,"missing mipmap data"),ne(fe.data||fe.element||fe.needsCopy,"missing image data"),ai(qe),Cn(fe,ye,Ne,Me,Ie),Nr(),Qn(fe),tn}function le(Q,Te){var Ue=Q|0,He=Te|0||Ue;if(Ue===qe.width&&He===qe.height)return tn;tn.width=qe.width=Ue,tn.height=qe.height=He,ai(qe);for(var Ne=0;qe.mipmask>>Ne;++Ne){var Me=Ue>>Ne,Ie=He>>Ne;if(!Me||!Ie)break;I.texImage2D(ye,Ne,qe.format,Me,Ie,0,qe.format,qe.type,null)}return Nr(),st.profile&&(qe.stats.size=qo(qe.internalformat,qe.type,Ue,He,!1,!1)),tn}return tn(he,tt),tn.subimage=pr,tn.resize=le,tn._reglType="texture2d",tn._texture=qe,st.profile&&(tn.stats=qe.stats),tn.destroy=function(){qe.decRef()},tn}function zn(he,tt,qe,tn,pr,le){var Q=new Zn(Ge);yo[Q.id]=Q,Ze.cubeCount++;var Te=new Array(6);function Ue(Me,Ie,fe,we,ue,$e){var Ye,d=Q.texInfo;for(to.call(d),Ye=0;Ye<6;++Ye)Te[Ye]=sr();if(typeof Me=="number"||!Me){var m=Me|0||1;for(Ye=0;Ye<6;++Ye)nr(Te[Ye],m,m)}else if(typeof Me=="object")if(Ie)gr(Te[0],Me),gr(Te[1],Ie),gr(Te[2],fe),gr(Te[3],we),gr(Te[4],ue),gr(Te[5],$e);else if(Po(d,Me),Mn(Q,Me),"faces"in Me){var E=Me.faces;for(ne(Array.isArray(E)&&E.length===6,"cube faces must be a length 6 array"),Ye=0;Ye<6;++Ye)ne(typeof E[Ye]=="object"&&!!E[Ye],"invalid input for cube map face"),Ht(Te[Ye],Q),gr(Te[Ye],E[Ye])}else for(Ye=0;Ye<6;++Ye)gr(Te[Ye],Me);else ne.raise("invalid arguments to cube map");for(Ht(Q,Te[0]),be.npotTextureCube||ne($(Q.width)&&$(Q.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?Q.mipmask=(Te[0].width<<1)-1:Q.mipmask=Te[0].mipmask,ne.textureCube(Q,d,Te,be),Q.internalformat=Te[0].internalformat,Ue.width=Te[0].width,Ue.height=Te[0].height,ai(Q),Ye=0;Ye<6;++Ye)Mo(Te[Ye],vt+Ye);for($o(d,Ge),Nr(),st.profile&&(Q.stats.size=qo(Q.internalformat,Q.type,Ue.width,Ue.height,d.genMipmaps,!0)),Ue.format=Lt[Q.internalformat],Ue.type=Kt[Q.type],Ue.mag=xt[d.magFilter],Ue.min=Zt[d.minFilter],Ue.wrapS=St[d.wrapS],Ue.wrapT=St[d.wrapT],Ye=0;Ye<6;++Ye)Go(Te[Ye]);return Ue}function He(Me,Ie,fe,we,ue){ne(!!Ie,"must specify image data"),ne(typeof Me=="number"&&Me===(Me|0)&&Me>=0&&Me<6,"invalid face");var $e=fe|0,Ye=we|0,d=ue|0,m=un();return Ht(m,Q),m.width=0,m.height=0,At(m,Ie),m.width=m.width||(Q.width>>d)-$e,m.height=m.height||(Q.height>>d)-Ye,ne(Q.type===m.type&&Q.format===m.format&&Q.internalformat===m.internalformat,"incompatible format for texture.subimage"),ne($e>=0&&Ye>=0&&$e+m.width<=Q.width&&Ye+m.height<=Q.height,"texture.subimage write out of bounds"),ne(Q.mipmask&1<<d,"missing mipmap data"),ne(m.data||m.element||m.needsCopy,"missing image data"),ai(Q),Cn(m,vt+Me,$e,Ye,d),Nr(),Qn(m),Ue}function Ne(Me){var Ie=Me|0;if(Ie!==Q.width){Ue.width=Q.width=Ie,Ue.height=Q.height=Ie,ai(Q);for(var fe=0;fe<6;++fe)for(var we=0;Q.mipmask>>we;++we)I.texImage2D(vt+fe,we,Q.format,Ie>>we,Ie>>we,0,Q.format,Q.type,null);return Nr(),st.profile&&(Q.stats.size=qo(Q.internalformat,Q.type,Ue.width,Ue.height,!1,!0)),Ue}}return Ue(he,tt,qe,tn,pr,le),Ue.subimage=He,Ue.resize=Ne,Ue._reglType="textureCube",Ue._texture=Q,st.profile&&(Ue.stats=Q.stats),Ue.destroy=function(){Q.decRef()},Ue}function uo(){for(var he=0;he<Qo;++he)I.activeTexture(Bl+he),I.bindTexture(ye,null),Eo[he]=null;ri(yo).forEach(kn),Ze.cubeCount=0,Ze.textureCount=0}st.profile&&(Ze.getTotalTextureSize=function(){var he=0;return Object.keys(yo).forEach(function(tt){he+=yo[tt].stats.size}),he});function Fa(){for(var he=0;he<Qo;++he){var tt=Eo[he];tt&&(tt.bindCount=0,tt.unit=-1,Eo[he]=null)}ri(yo).forEach(function(qe){qe.texture=I.createTexture(),I.bindTexture(qe.target,qe.texture);for(var tn=0;tn<32;++tn)if(qe.mipmask&1<<tn)if(qe.target===ye)I.texImage2D(ye,tn,qe.internalformat,qe.width>>tn,qe.height>>tn,0,qe.internalformat,qe.type,null);else for(var pr=0;pr<6;++pr)I.texImage2D(vt+pr,tn,qe.internalformat,qe.width>>tn,qe.height>>tn,0,qe.internalformat,qe.type,null);$o(qe.texInfo,qe.target)})}function Jl(){for(var he=0;he<Qo;++he){var tt=Eo[he];tt&&(tt.bindCount=0,tt.unit=-1,Eo[he]=null),I.activeTexture(Bl+he),I.bindTexture(ye,null),I.bindTexture(Ge,null)}}return{create2D:cr,createCube:zn,clear:uo,getTexture:function(he){return null},restore:Fa,refresh:Jl}}var ao=36161,Rn=32854,lo=32855,Fc=36194,ml=33189,Kf=36168,bo=34041,xo=35907,Zd=34836,Jd=34842,$c=34843,Fi=[];Fi[Rn]=2,Fi[lo]=2,Fi[Fc]=2,Fi[ml]=2,Fi[Kf]=1,Fi[bo]=4,Fi[xo]=4,Fi[Zd]=16,Fi[Jd]=8,Fi[$c]=6;function Zf(I,oe,be){return Fi[I]*oe*be}var Cs=function(I,oe,be,et,dt){var Ze={rgba4:Rn,rgb565:Fc,"rgb5 a1":lo,depth:ml,stencil:Kf,"depth stencil":bo};oe.ext_srgb&&(Ze.srgba=xo),oe.ext_color_buffer_half_float&&(Ze.rgba16f=Jd,Ze.rgb16f=$c),oe.webgl_color_buffer_float&&(Ze.rgba32f=Zd);var st=[];Object.keys(Ze).forEach(function(Rt){var bt=Ze[Rt];st[bt]=Rt});var Nt=0,jt={};function Ct(Rt){this.id=Nt++,this.refCount=1,this.renderbuffer=Rt,this.format=Rn,this.width=0,this.height=0,dt.profile&&(this.stats={size:0})}Ct.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(Rt){var bt=Rt.renderbuffer;ne(bt,"must not double destroy renderbuffer"),I.bindRenderbuffer(ao,null),I.deleteRenderbuffer(bt),Rt.renderbuffer=null,Rt.refCount=0,delete jt[Rt.id],et.renderbufferCount--}function Gt(Rt,bt){var Ve=new Ct(I.createRenderbuffer());jt[Ve.id]=Ve,et.renderbufferCount++;function it(Kt,xt){var Zt=0,St=0,Vt=Rn;if(typeof Kt=="object"&&Kt){var _t=Kt;if("shape"in _t){var Ht=_t.shape;ne(Array.isArray(Ht)&&Ht.length>=2,"invalid renderbuffer shape"),Zt=Ht[0]|0,St=Ht[1]|0}else"radius"in _t&&(Zt=St=_t.radius|0),"width"in _t&&(Zt=_t.width|0),"height"in _t&&(St=_t.height|0);"format"in _t&&(ne.parameter(_t.format,Ze,"invalid renderbuffer format"),Vt=Ze[_t.format])}else typeof Kt=="number"?(Zt=Kt|0,typeof xt=="number"?St=xt|0:St=Zt):Kt?ne.raise("invalid arguments to renderbuffer constructor"):Zt=St=1;if(ne(Zt>0&&St>0&&Zt<=be.maxRenderbufferSize&&St<=be.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===Ve.width&&St===Ve.height&&Vt===Ve.format))return it.width=Ve.width=Zt,it.height=Ve.height=St,Ve.format=Vt,I.bindRenderbuffer(ao,Ve.renderbuffer),I.renderbufferStorage(ao,Vt,Zt,St),ne(I.getError()===0,"invalid render buffer format"),dt.profile&&(Ve.stats.size=Zf(Ve.format,Ve.width,Ve.height)),it.format=st[Ve.format],it}function Lt(Kt,xt){var Zt=Kt|0,St=xt|0||Zt;return Zt===Ve.width&&St===Ve.height||(ne(Zt>0&&St>0&&Zt<=be.maxRenderbufferSize&&St<=be.maxRenderbufferSize,"invalid renderbuffer size"),it.width=Ve.width=Zt,it.height=Ve.height=St,I.bindRenderbuffer(ao,Ve.renderbuffer),I.renderbufferStorage(ao,Ve.format,Zt,St),ne(I.getError()===0,"invalid render buffer format"),dt.profile&&(Ve.stats.size=Zf(Ve.format,Ve.width,Ve.height))),it}return it(Rt,bt),it.resize=Lt,it._reglType="renderbuffer",it._renderbuffer=Ve,dt.profile&&(it.stats=Ve.stats),it.destroy=function(){Ve.decRef()},it}dt.profile&&(et.getTotalRenderbufferSize=function(){var Rt=0;return Object.keys(jt).forEach(function(bt){Rt+=jt[bt].stats.size}),Rt});function Bt(){ri(jt).forEach(function(Rt){Rt.renderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(ao,Rt.renderbuffer),I.renderbufferStorage(ao,Rt.format,Rt.width,Rt.height)}),I.bindRenderbuffer(ao,null)}return{create:Gt,clear:function(){ri(jt).forEach(ct)},restore:Bt}},ka=36160,yu=36161,Wl=3553,Ca=34069,uh=36064,gl=36096,ba=36128,Qd=33306,ep=36053,Jf=36054,sh=36055,ch=36057,fh=36061,tp=36193,Ds=5121,np=5126,Bc=6407,Or=6408,Wv=6402,rp=[Bc,Or],mu=[];mu[Or]=4,mu[Bc]=3;var Uc=[];Uc[Ds]=1,Uc[np]=4,Uc[tp]=2;var zv=32854,Hv=32855,Da=36194,op=33189,Qf=36168,ed=34041,dh=35907,ip=34836,aa=34842,gu=34843,td=[zv,Hv,Da,dh,aa,gu,ip],Ju={};Ju[ep]="complete",Ju[Jf]="incomplete attachment",Ju[ch]="incomplete dimensions",Ju[sh]="incomplete, missing attachment",Ju[fh]="unsupported";function Gc(I,oe,be,et,dt,Ze){var st={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],jt=["rgba4","rgb565","rgb5 a1"];oe.ext_srgb&&jt.push("srgba"),oe.ext_color_buffer_half_float&&jt.push("rgba16f","rgb16f"),oe.webgl_color_buffer_float&&jt.push("rgba32f");var Ct=["uint8"];oe.oes_texture_half_float&&Ct.push("half float","float16"),oe.oes_texture_float&&Ct.push("float","float32");function ct(It,At,wt){this.target=It,this.texture=At,this.renderbuffer=wt;var Cn=0,tr=0;At?(Cn=At.width,tr=At.height):wt&&(Cn=wt.width,tr=wt.height),this.width=Cn,this.height=tr}function Gt(It){It&&(It.texture&&It.texture._texture.decRef(),It.renderbuffer&&It.renderbuffer._renderbuffer.decRef())}function Bt(It,At,wt){if(It)if(It.texture){var Cn=It.texture._texture,tr=Math.max(1,Cn.width),un=Math.max(1,Cn.height);ne(tr===At&&un===wt,"inconsistent width/height for supplied texture"),Cn.refCount+=1}else{var Qn=It.renderbuffer._renderbuffer;ne(Qn.width===At&&Qn.height===wt,"inconsistent width/height for renderbuffer"),Qn.refCount+=1}}function Rt(It,At){At&&(At.texture?I.framebufferTexture2D(ka,It,At.target,At.texture._texture.texture,0):I.framebufferRenderbuffer(ka,It,yu,At.renderbuffer._renderbuffer.renderbuffer))}function bt(It){var At=Wl,wt=null,Cn=null,tr=It;typeof It=="object"&&(tr=It.data,"target"in It&&(At=It.target|0)),ne.type(tr,"function","invalid attachment data");var un=tr._reglType;return un==="texture2d"?(wt=tr,ne(At===Wl)):un==="textureCube"?(wt=tr,ne(At>=Ca&&At<Ca+6,"invalid cube map target")):un==="renderbuffer"?(Cn=tr,At=yu):ne.raise("invalid regl object for attachment"),new ct(At,wt,Cn)}function Ve(It,At,wt,Cn,tr){if(wt){var un=et.create2D({width:It,height:At,format:Cn,type:tr});return un._texture.refCount=0,new ct(Wl,un,null)}else{var Qn=dt.create({width:It,height:At,format:Cn});return Qn._renderbuffer.refCount=0,new ct(yu,null,Qn)}}function it(It){return It&&(It.texture||It.renderbuffer)}function Lt(It,At,wt){It&&(It.texture?It.texture.resize(At,wt):It.renderbuffer&&It.renderbuffer.resize(At,wt),It.width=At,It.height=wt)}var Kt=0,xt={};function Zt(){this.id=Kt++,xt[this.id]=this,this.framebuffer=I.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function St(It){It.colorAttachments.forEach(Gt),Gt(It.depthAttachment),Gt(It.stencilAttachment),Gt(It.depthStencilAttachment)}function Vt(It){var At=It.framebuffer;ne(At,"must not double destroy framebuffer"),I.deleteFramebuffer(At),It.framebuffer=null,Ze.framebufferCount--,delete xt[It.id]}function _t(It){var At;I.bindFramebuffer(ka,It.framebuffer);var wt=It.colorAttachments;for(At=0;At<wt.length;++At)Rt(uh+At,wt[At]);for(At=wt.length;At<be.maxColorAttachments;++At)I.framebufferTexture2D(ka,uh+At,Wl,null,0);I.framebufferTexture2D(ka,Qd,Wl,null,0),I.framebufferTexture2D(ka,gl,Wl,null,0),I.framebufferTexture2D(ka,ba,Wl,null,0),Rt(gl,It.depthAttachment),Rt(ba,It.stencilAttachment),Rt(Qd,It.depthStencilAttachment);var Cn=I.checkFramebufferStatus(ka);!I.isContextLost()&&Cn!==ep&&ne.raise("framebuffer configuration not supported, status = "+Ju[Cn]),I.bindFramebuffer(ka,st.next?st.next.framebuffer:null),st.cur=st.next,I.getError()}function Ht(It,At){var wt=new Zt;Ze.framebufferCount++;function Cn(un,Qn){var Vn;ne(st.next!==wt,"can not update framebuffer which is currently in use");var nr=0,gr=0,Mo=!0,Fo=!0,sr=null,Go=!0,to="rgba",Po="uint8",$o=1,wo=null,yo=null,Qo=null,Eo=!1;if(typeof un=="number")nr=un|0,gr=Qn|0||nr;else if(!un)nr=gr=1;else{ne.type(un,"object","invalid arguments for framebuffer");var Zn=un;if("shape"in Zn){var ai=Zn.shape;ne(Array.isArray(ai)&&ai.length>=2,"invalid shape for framebuffer"),nr=ai[0],gr=ai[1]}else"radius"in Zn&&(nr=gr=Zn.radius),"width"in Zn&&(nr=Zn.width),"height"in Zn&&(gr=Zn.height);("color"in Zn||"colors"in Zn)&&(sr=Zn.color||Zn.colors,Array.isArray(sr)&&ne(sr.length===1||oe.webgl_draw_buffers,"multiple render targets not supported")),sr||("colorCount"in Zn&&($o=Zn.colorCount|0,ne($o>0,"invalid color buffer count")),"colorTexture"in Zn&&(Go=!!Zn.colorTexture,to="rgba4"),"colorType"in Zn&&(Po=Zn.colorType,Go?(ne(oe.oes_texture_float||!(Po==="float"||Po==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ne(oe.oes_texture_half_float||!(Po==="half float"||Po==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Po==="half float"||Po==="float16"?(ne(oe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),to="rgba16f"):(Po==="float"||Po==="float32")&&(ne(oe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),to="rgba32f"),ne.oneOf(Po,Ct,"invalid color type")),"colorFormat"in Zn&&(to=Zn.colorFormat,Nt.indexOf(to)>=0?Go=!0:jt.indexOf(to)>=0?Go=!1:Go?ne.oneOf(Zn.colorFormat,Nt,"invalid color format for texture"):ne.oneOf(Zn.colorFormat,jt,"invalid color format for renderbuffer"))),("depthTexture"in Zn||"depthStencilTexture"in Zn)&&(Eo=!!(Zn.depthTexture||Zn.depthStencilTexture),ne(!Eo||oe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Zn&&(typeof Zn.depth=="boolean"?Mo=Zn.depth:(wo=Zn.depth,Fo=!1)),"stencil"in Zn&&(typeof Zn.stencil=="boolean"?Fo=Zn.stencil:(yo=Zn.stencil,Mo=!1)),"depthStencil"in Zn&&(typeof Zn.depthStencil=="boolean"?Mo=Fo=Zn.depthStencil:(Qo=Zn.depthStencil,Mo=!1,Fo=!1))}var Nr=null,kn=null,cr=null,zn=null;if(Array.isArray(sr))Nr=sr.map(bt);else if(sr)Nr=[bt(sr)];else for(Nr=new Array($o),Vn=0;Vn<$o;++Vn)Nr[Vn]=Ve(nr,gr,Go,to,Po);ne(oe.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ne(Nr.length<=be.maxColorAttachments,"too many color attachments, not supported"),nr=nr||Nr[0].width,gr=gr||Nr[0].height,wo?kn=bt(wo):Mo&&!Fo&&(kn=Ve(nr,gr,Eo,"depth","uint32")),yo?cr=bt(yo):Fo&&!Mo&&(cr=Ve(nr,gr,!1,"stencil","uint8")),Qo?zn=bt(Qo):!wo&&!yo&&Fo&&Mo&&(zn=Ve(nr,gr,Eo,"depth stencil","depth stencil")),ne(!!wo+!!yo+!!Qo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var uo=null;for(Vn=0;Vn<Nr.length;++Vn)if(Bt(Nr[Vn],nr,gr),ne(!Nr[Vn]||Nr[Vn].texture&&rp.indexOf(Nr[Vn].texture._texture.format)>=0||Nr[Vn].renderbuffer&&td.indexOf(Nr[Vn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Vn+" is invalid"),Nr[Vn]&&Nr[Vn].texture){var Fa=mu[Nr[Vn].texture._texture.format]*Uc[Nr[Vn].texture._texture.type];uo===null?uo=Fa:ne(uo===Fa,"all color attachments much have the same number of bits per pixel.")}return Bt(kn,nr,gr),ne(!kn||kn.texture&&kn.texture._texture.format===Wv||kn.renderbuffer&&kn.renderbuffer._renderbuffer.format===op,"invalid depth attachment for framebuffer object"),Bt(cr,nr,gr),ne(!cr||cr.renderbuffer&&cr.renderbuffer._renderbuffer.format===Qf,"invalid stencil attachment for framebuffer object"),Bt(zn,nr,gr),ne(!zn||zn.texture&&zn.texture._texture.format===ed||zn.renderbuffer&&zn.renderbuffer._renderbuffer.format===ed,"invalid depth-stencil attachment for framebuffer object"),St(wt),wt.width=nr,wt.height=gr,wt.colorAttachments=Nr,wt.depthAttachment=kn,wt.stencilAttachment=cr,wt.depthStencilAttachment=zn,Cn.color=Nr.map(it),Cn.depth=it(kn),Cn.stencil=it(cr),Cn.depthStencil=it(zn),Cn.width=wt.width,Cn.height=wt.height,_t(wt),Cn}function tr(un,Qn){ne(st.next!==wt,"can not resize a framebuffer which is currently in use");var Vn=Math.max(un|0,1),nr=Math.max(Qn|0||Vn,1);if(Vn===wt.width&&nr===wt.height)return Cn;for(var gr=wt.colorAttachments,Mo=0;Mo<gr.length;++Mo)Lt(gr[Mo],Vn,nr);return Lt(wt.depthAttachment,Vn,nr),Lt(wt.stencilAttachment,Vn,nr),Lt(wt.depthStencilAttachment,Vn,nr),wt.width=Cn.width=Vn,wt.height=Cn.height=nr,_t(wt),Cn}return Cn(It,At),o(Cn,{resize:tr,_reglType:"framebuffer",_framebuffer:wt,destroy:function(){Vt(wt),St(wt)},use:function(un){st.setFBO({framebuffer:Cn},un)}})}function Mn(It){var At=Array(6);function wt(tr){var un;ne(At.indexOf(st.next)<0,"can not update framebuffer which is currently in use");var Qn={color:null},Vn=0,nr=null,gr="rgba",Mo="uint8",Fo=1;if(typeof tr=="number")Vn=tr|0;else if(!tr)Vn=1;else{ne.type(tr,"object","invalid arguments for framebuffer");var sr=tr;if("shape"in sr){var Go=sr.shape;ne(Array.isArray(Go)&&Go.length>=2,"invalid shape for framebuffer"),ne(Go[0]===Go[1],"cube framebuffer must be square"),Vn=Go[0]}else"radius"in sr&&(Vn=sr.radius|0),"width"in sr?(Vn=sr.width|0,"height"in sr&&ne(sr.height===Vn,"must be square")):"height"in sr&&(Vn=sr.height|0);("color"in sr||"colors"in sr)&&(nr=sr.color||sr.colors,Array.isArray(nr)&&ne(nr.length===1||oe.webgl_draw_buffers,"multiple render targets not supported")),nr||("colorCount"in sr&&(Fo=sr.colorCount|0,ne(Fo>0,"invalid color buffer count")),"colorType"in sr&&(ne.oneOf(sr.colorType,Ct,"invalid color type"),Mo=sr.colorType),"colorFormat"in sr&&(gr=sr.colorFormat,ne.oneOf(sr.colorFormat,Nt,"invalid color format for texture"))),"depth"in sr&&(Qn.depth=sr.depth),"stencil"in sr&&(Qn.stencil=sr.stencil),"depthStencil"in sr&&(Qn.depthStencil=sr.depthStencil)}var to;if(nr)if(Array.isArray(nr))for(to=[],un=0;un<nr.length;++un)to[un]=nr[un];else to=[nr];else{to=Array(Fo);var Po={radius:Vn,format:gr,type:Mo};for(un=0;un<Fo;++un)to[un]=et.createCube(Po)}for(Qn.color=Array(to.length),un=0;un<to.length;++un){var $o=to[un];ne(typeof $o=="function"&&$o._reglType==="textureCube","invalid cube map"),Vn=Vn||$o.width,ne($o.width===Vn&&$o.height===Vn,"invalid cube map shape"),Qn.color[un]={target:Ca,data:to[un]}}for(un=0;un<6;++un){for(var wo=0;wo<to.length;++wo)Qn.color[wo].target=Ca+un;un>0&&(Qn.depth=At[0].depth,Qn.stencil=At[0].stencil,Qn.depthStencil=At[0].depthStencil),At[un]?At[un](Qn):At[un]=Ht(Qn)}return o(wt,{width:Vn,height:Vn,color:to})}function Cn(tr){var un,Qn=tr|0;if(ne(Qn>0&&Qn<=be.maxCubeMapSize,"invalid radius for cube fbo"),Qn===wt.width)return wt;var Vn=wt.color;for(un=0;un<Vn.length;++un)Vn[un].resize(Qn);for(un=0;un<6;++un)At[un].resize(Qn);return wt.width=wt.height=Qn,wt}return wt(It),o(wt,{faces:At,resize:Cn,_reglType:"framebufferCube",destroy:function(){At.forEach(function(tr){tr.destroy()})}})}function Wn(){st.cur=null,st.next=null,st.dirty=!0,ri(xt).forEach(function(It){It.framebuffer=I.createFramebuffer(),_t(It)})}return o(st,{getFramebuffer:function(It){if(typeof It=="function"&&It._reglType==="framebuffer"){var At=It._framebuffer;if(At instanceof Zt)return At}return null},create:Ht,createCube:Mn,clear:function(){ri(xt).forEach(Vt)},restore:Wn})}var ph=5126,Vc=34962;function nd(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ph,this.offset=0,this.stride=0,this.divisor=0}function rd(I,oe,be,et,dt){for(var Ze=be.maxAttributes,st=new Array(Ze),Nt=0;Nt<Ze;++Nt)st[Nt]=new nd;var jt=0,Ct={},ct={Record:nd,scope:{},state:st,currentVAO:null,targetVAO:null,restore:Bt()?xt:function(){},createVAO:Zt,getVAO:bt,destroyBuffer:Gt,setVAO:Bt()?Ve:it,clear:Bt()?Lt:function(){}};function Gt(St){for(var Vt=0;Vt<st.length;++Vt){var _t=st[Vt];_t.buffer===St&&(I.disableVertexAttribArray(Vt),_t.buffer=null)}}function Bt(){return oe.oes_vertex_array_object}function Rt(){return oe.angle_instanced_arrays}function bt(St){return typeof St=="function"&&St._vao?St._vao:null}function Ve(St){if(St!==ct.currentVAO){var Vt=Bt();St?Vt.bindVertexArrayOES(St.vao):Vt.bindVertexArrayOES(null),ct.currentVAO=St}}function it(St){if(St!==ct.currentVAO){if(St)St.bindAttrs();else for(var Vt=Rt(),_t=0;_t<st.length;++_t){var Ht=st[_t];Ht.buffer?(I.enableVertexAttribArray(_t),I.vertexAttribPointer(_t,Ht.size,Ht.type,Ht.normalized,Ht.stride,Ht.offfset),Vt&&Ht.divisor&&Vt.vertexAttribDivisorANGLE(_t,Ht.divisor)):(I.disableVertexAttribArray(_t),I.vertexAttrib4f(_t,Ht.x,Ht.y,Ht.z,Ht.w))}ct.currentVAO=St}}function Lt(){ri(Ct).forEach(function(St){St.destroy()})}function Kt(){this.id=++jt,this.attributes=[];var St=Bt();St?this.vao=St.createVertexArrayOES():this.vao=null,Ct[this.id]=this,this.buffers=[]}Kt.prototype.bindAttrs=function(){for(var St=Rt(),Vt=this.attributes,_t=0;_t<Vt.length;++_t){var Ht=Vt[_t];Ht.buffer?(I.enableVertexAttribArray(_t),I.bindBuffer(Vc,Ht.buffer.buffer),I.vertexAttribPointer(_t,Ht.size,Ht.type,Ht.normalized,Ht.stride,Ht.offset),St&&Ht.divisor&&St.vertexAttribDivisorANGLE(_t,Ht.divisor)):(I.disableVertexAttribArray(_t),I.vertexAttrib4f(_t,Ht.x,Ht.y,Ht.z,Ht.w))}for(var Mn=Vt.length;Mn<Ze;++Mn)I.disableVertexAttribArray(Mn)},Kt.prototype.refresh=function(){var St=Bt();St&&(St.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},Kt.prototype.destroy=function(){if(this.vao){var St=Bt();this===ct.currentVAO&&(ct.currentVAO=null,St.bindVertexArrayOES(null)),St.deleteVertexArrayOES(this.vao),this.vao=null}Ct[this.id]&&(delete Ct[this.id],et.vaoCount-=1)};function xt(){var St=Bt();St&&ri(Ct).forEach(function(Vt){Vt.refresh()})}function Zt(St){var Vt=new Kt;et.vaoCount+=1;function _t(Ht){ne(Array.isArray(Ht),"arguments to vertex array constructor must be an array"),ne(Ht.length<Ze,"too many attributes"),ne(Ht.length>0,"must specify at least one attribute");var Mn={},Wn=Vt.attributes;Wn.length=Ht.length;for(var It=0;It<Ht.length;++It){var At=Ht[It],wt=Wn[It]=new nd,Cn=At.data||At;if(Array.isArray(Cn)||n(Cn)||Ri(Cn)){var tr;Vt.buffers[It]&&(tr=Vt.buffers[It],n(Cn)&&tr._buffer.byteLength>=Cn.byteLength?tr.subdata(Cn):(tr.destroy(),Vt.buffers[It]=null)),Vt.buffers[It]||(tr=Vt.buffers[It]=dt.create(At,Vc,!1,!0)),wt.buffer=dt.getBuffer(tr),wt.size=wt.buffer.dimension|0,wt.normalized=!1,wt.type=wt.buffer.dtype,wt.offset=0,wt.stride=0,wt.divisor=0,wt.state=1,Mn[It]=1}else dt.getBuffer(At)?(wt.buffer=dt.getBuffer(At),wt.size=wt.buffer.dimension|0,wt.normalized=!1,wt.type=wt.buffer.dtype,wt.offset=0,wt.stride=0,wt.divisor=0,wt.state=1):dt.getBuffer(At.buffer)?(wt.buffer=dt.getBuffer(At.buffer),wt.size=(+At.size||wt.buffer.dimension)|0,wt.normalized=!!At.normalized||!1,"type"in At?(ne.parameter(At.type,Di,"invalid buffer type"),wt.type=Di[At.type]):wt.type=wt.buffer.dtype,wt.offset=(At.offset||0)|0,wt.stride=(At.stride||0)|0,wt.divisor=(At.divisor||0)|0,wt.state=1,ne(wt.size>=1&&wt.size<=4,"size must be between 1 and 4"),ne(wt.offset>=0,"invalid offset"),ne(wt.stride>=0&&wt.stride<=255,"stride must be between 0 and 255"),ne(wt.divisor>=0,"divisor must be positive"),ne(!wt.divisor||!!oe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in At?(ne(It>0,"first attribute must not be a constant"),wt.x=+At.x||0,wt.y=+At.y||0,wt.z=+At.z||0,wt.w=+At.w||0,wt.state=2):ne(!1,"invalid attribute spec for location "+It)}for(var un=0;un<Vt.buffers.length;++un)!Mn[un]&&Vt.buffers[un]&&(Vt.buffers[un].destroy(),Vt.buffers[un]=null);return Vt.refresh(),_t}return _t.destroy=function(){for(var Ht=0;Ht<Vt.buffers.length;++Ht)Vt.buffers[Ht]&&Vt.buffers[Ht].destroy();Vt.buffers.length=0,Vt.destroy()},_t._vao=Vt,_t._reglType="vao",_t(St)}return ct}var od=35632,bu=35633,hh=35718,_u=35721;function ap(I,oe,be,et){var dt={},Ze={};function st(Ve,it,Lt,Kt){this.name=Ve,this.id=it,this.location=Lt,this.info=Kt}function Nt(Ve,it){for(var Lt=0;Lt<Ve.length;++Lt)if(Ve[Lt].id===it.id){Ve[Lt].location=it.location;return}Ve.push(it)}function jt(Ve,it,Lt){var Kt=Ve===od?dt:Ze,xt=Kt[it];if(!xt){var Zt=oe.str(it);xt=I.createShader(Ve),I.shaderSource(xt,Zt),I.compileShader(xt),ne.shaderError(I,xt,Zt,Ve,Lt),Kt[it]=xt}return xt}var Ct={},ct=[],Gt=0;function Bt(Ve,it){this.id=Gt++,this.fragId=Ve,this.vertId=it,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,et.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Rt(Ve,it,Lt){var Kt,xt,Zt=jt(od,Ve.fragId),St=jt(bu,Ve.vertId),Vt=Ve.program=I.createProgram();if(I.attachShader(Vt,Zt),I.attachShader(Vt,St),Lt)for(Kt=0;Kt<Lt.length;++Kt){var _t=Lt[Kt];I.bindAttribLocation(Vt,_t[0],_t[1])}I.linkProgram(Vt),ne.linkError(I,Vt,oe.str(Ve.fragId),oe.str(Ve.vertId),it);var Ht=I.getProgramParameter(Vt,hh);et.profile&&(Ve.stats.uniformsCount=Ht);var Mn=Ve.uniforms;for(Kt=0;Kt<Ht;++Kt)if(xt=I.getActiveUniform(Vt,Kt),xt)if(xt.size>1)for(var Wn=0;Wn<xt.size;++Wn){var It=xt.name.replace("[0]","["+Wn+"]");Nt(Mn,new st(It,oe.id(It),I.getUniformLocation(Vt,It),xt))}else Nt(Mn,new st(xt.name,oe.id(xt.name),I.getUniformLocation(Vt,xt.name),xt));var At=I.getProgramParameter(Vt,_u);et.profile&&(Ve.stats.attributesCount=At);var wt=Ve.attributes;for(Kt=0;Kt<At;++Kt)xt=I.getActiveAttrib(Vt,Kt),xt&&Nt(wt,new st(xt.name,oe.id(xt.name),I.getAttribLocation(Vt,xt.name),xt))}et.profile&&(be.getMaxUniformsCount=function(){var Ve=0;return ct.forEach(function(it){it.stats.uniformsCount>Ve&&(Ve=it.stats.uniformsCount)}),Ve},be.getMaxAttributesCount=function(){var Ve=0;return ct.forEach(function(it){it.stats.attributesCount>Ve&&(Ve=it.stats.attributesCount)}),Ve});function bt(){dt={},Ze={};for(var Ve=0;Ve<ct.length;++Ve)Rt(ct[Ve],null,ct[Ve].attributes.map(function(it){return[it.location,it.name]}))}return{clear:function(){var Ve=I.deleteShader.bind(I);ri(dt).forEach(Ve),dt={},ri(Ze).forEach(Ve),Ze={},ct.forEach(function(it){I.deleteProgram(it.program)}),ct.length=0,Ct={},be.shaderCount=0},program:function(Ve,it,Lt,Kt){ne.command(Ve>=0,"missing vertex shader",Lt),ne.command(it>=0,"missing fragment shader",Lt);var xt=Ct[it];xt||(xt=Ct[it]={});var Zt=xt[Ve];if(Zt&&(Zt.refCount++,!Kt))return Zt;var St=new Bt(it,Ve);return be.shaderCount++,Rt(St,Lt,Kt),Zt||(xt[Ve]=St),ct.push(St),o(St,{destroy:function(){if(St.refCount--,St.refCount<=0){I.deleteProgram(St.program);var Vt=ct.indexOf(St);ct.splice(Vt,1),be.shaderCount--}xt[St.vertId].refCount<=0&&(I.deleteShader(Ze[St.vertId]),delete Ze[St.vertId],delete Ct[St.fragId][St.vertId]),Object.keys(Ct[St.fragId]).length||(I.deleteShader(dt[St.fragId]),delete dt[St.fragId],delete Ct[St.fragId])}})},restore:bt,shader:jt,frag:-1,vert:-1}}var lp=6408,Qu=5121,fo=3333,Wc=5126;function _o(I,oe,be,et,dt,Ze,st){function Nt(ct){var Gt;oe.next===null?(ne(dt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Gt=Qu):(ne(oe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Gt=oe.next.colorAttachments[0].texture._texture.type,Ze.oes_texture_float?(ne(Gt===Qu||Gt===Wc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Gt===Wc&&ne(st.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ne(Gt===Qu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Bt=0,Rt=0,bt=et.framebufferWidth,Ve=et.framebufferHeight,it=null;n(ct)?it=ct:ct&&(ne.type(ct,"object","invalid arguments to regl.read()"),Bt=ct.x|0,Rt=ct.y|0,ne(Bt>=0&&Bt<et.framebufferWidth,"invalid x offset for regl.read"),ne(Rt>=0&&Rt<et.framebufferHeight,"invalid y offset for regl.read"),bt=(ct.width||et.framebufferWidth-Bt)|0,Ve=(ct.height||et.framebufferHeight-Rt)|0,it=ct.data||null),it&&(Gt===Qu?ne(it instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Gt===Wc&&ne(it instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ne(bt>0&&bt+Bt<=et.framebufferWidth,"invalid width for read pixels"),ne(Ve>0&&Ve+Rt<=et.framebufferHeight,"invalid height for read pixels"),be();var Lt=bt*Ve*4;return it||(Gt===Qu?it=new Uint8Array(Lt):Gt===Wc&&(it=it||new Float32Array(Lt))),ne.isTypedArray(it,"data buffer for regl.read() must be a typedarray"),ne(it.byteLength>=Lt,"data buffer for regl.read() too small"),I.pixelStorei(fo,4),I.readPixels(Bt,Rt,bt,Ve,lp,Gt,it),it}function jt(ct){var Gt;return oe.setFBO({framebuffer:ct.framebuffer},function(){Gt=Nt(ct)}),Gt}function Ct(ct){return!ct||!("framebuffer"in ct)?Nt(ct):jt(ct)}return Ct}function zl(I){return Array.prototype.slice.call(I)}function di(I){return zl(I).join("")}function bl(){var I=0,oe=[],be=[];function et(Gt){for(var Bt=0;Bt<be.length;++Bt)if(be[Bt]===Gt)return oe[Bt];var Rt="g"+I++;return oe.push(Rt),be.push(Gt),Rt}function dt(){var Gt=[];function Bt(){Gt.push.apply(Gt,zl(arguments))}var Rt=[];function bt(){var Ve="v"+I++;return Rt.push(Ve),arguments.length>0&&(Gt.push(Ve,"="),Gt.push.apply(Gt,zl(arguments)),Gt.push(";")),Ve}return o(Bt,{def:bt,toString:function(){return di([Rt.length>0?"var "+Rt.join(",")+";":"",di(Gt)])}})}function Ze(){var Gt=dt(),Bt=dt(),Rt=Gt.toString,bt=Bt.toString;function Ve(it,Lt){Bt(it,Lt,"=",Gt.def(it,Lt),";")}return o(function(){Gt.apply(Gt,zl(arguments))},{def:Gt.def,entry:Gt,exit:Bt,save:Ve,set:function(it,Lt,Kt){Ve(it,Lt),Gt(it,Lt,"=",Kt,";")},toString:function(){return Rt()+bt()}})}function st(){var Gt=di(arguments),Bt=Ze(),Rt=Ze(),bt=Bt.toString,Ve=Rt.toString;return o(Bt,{then:function(){return Bt.apply(Bt,zl(arguments)),this},else:function(){return Rt.apply(Rt,zl(arguments)),this},toString:function(){var it=Ve();return it&&(it="else{"+it+"}"),di(["if(",Gt,"){",bt(),"}",it])}})}var Nt=dt(),jt={};function Ct(Gt,Bt){var Rt=[];function bt(){var xt="a"+Rt.length;return Rt.push(xt),xt}Bt=Bt||0;for(var Ve=0;Ve<Bt;++Ve)bt();var it=Ze(),Lt=it.toString,Kt=jt[Gt]=o(it,{arg:bt,toString:function(){return di(["function(",Rt.join(),"){",Lt(),"}"])}});return Kt}function ct(){var Gt=['"use strict";',Nt,"return {"];Object.keys(jt).forEach(function(bt){Gt.push('"',bt,'":',jt[bt].toString(),",")}),Gt.push("}");var Bt=di(Gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Rt=Function.apply(null,oe.concat(Bt));return Rt.apply(null,be)}return{global:Nt,link:et,block:dt,proc:Ct,scope:Ze,cond:st,compile:ct}}var Hl="xyzw".split(""),wu=5121,es=1,id=2,ad=0,_l=1,ts=2,ld=3,zc=4,Eu=5,up=6,js="dither",ud="blend.enable",Hc="blend.color",wl="blend.equation",Is="blend.func",Xc="depth.enable",Yc="depth.func",sd="depth.range",cd="depth.mask",Za="colorMask",sp="cull.enable",cp="cull.face",fp="frontFace",fd="lineWidth",El="polygonOffset.enable",qc="polygonOffset.offset",dd="sample.alpha",pd="sample.enable",Ls="sample.coverage",Xl="stencil.enable",Jn="stencil.mask",Fs="stencil.func",Kc="stencil.opFront",Ja="stencil.opBack",$s="scissor.enable",Bs="scissor.box",So="viewport",Us="profile",Ou="framebuffer",Zc="vert",oo="frag",Lo="elements",Yl="primitive",Qa="count",el="offset",xu="instances",Ol="vao",Gs="Width",Jc="Height",Su=Ou+Gs,Vs=Ou+Jc,kt=So+Gs,dp=So+Jc,ns="drawingBuffer",Qc=ns+Gs,hd=ns+Jc,pp=[Is,wl,Fs,Kc,Ja,Ls,So,Bs,qc],xl=34962,hp=34963,tl=35632,Au=35633,vd=3553,vh=34067,yh=2884,mh=3042,vp=3024,yp=2960,mp=2929,gp=3089,gh=32823,bh=32926,_h=32928,$i=5126,rs=35664,ef=35665,la=35666,ja=5124,yd=35667,Bi=35668,tf=35669,os=35670,Ws=35671,nf=35672,rf=35673,zs=35674,Hs=35675,is=35676,ql=35678,Ko=35680,of=4,af=1028,Kl=1029,bp=2304,Ui=2305,Zo=32775,wh=32776,Ia=519,Fn=7680,md=0,as=1,gd=32774,Eh=513,Xs=36160,Oh=36064,nl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ls={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},rl={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},xh={frag:tl,vert:Au},_p={cw:bp,ccw:Ui};function Tu(I){return Array.isArray(I)||n(I)||Ri(I)}function Sl(I){return I.sort(function(oe,be){return oe===So?-1:be===So?1:oe<be?-1:1})}function Gi(I,oe,be,et){this.thisDep=I,this.contextDep=oe,this.propDep=be,this.append=et}function Gn(I){return I&&!(I.thisDep||I.contextDep||I.propDep)}function Ao(I){return new Gi(!1,!1,!1,I)}function Ni(I,oe){var be=I.type;if(be===ad){var et=I.data.length;return new Gi(!0,et>=1,et>=2,oe)}else if(be===zc){var dt=I.data;return new Gi(dt.thisDep,dt.contextDep,dt.propDep,oe)}else{if(be===Eu)return new Gi(!1,!1,!1,oe);if(be===up){for(var Ze=!1,st=!1,Nt=!1,jt=0;jt<I.data.length;++jt){var Ct=I.data[jt];if(Ct.type===_l)Nt=!0;else if(Ct.type===ts)st=!0;else if(Ct.type===ld)Ze=!0;else if(Ct.type===ad){Ze=!0;var ct=Ct.data;ct>=1&&(st=!0),ct>=2&&(Nt=!0)}else Ct.type===zc&&(Ze=Ze||Ct.data.thisDep,st=st||Ct.data.contextDep,Nt=Nt||Ct.data.propDep)}return new Gi(Ze,st,Nt,oe)}else return new Gi(be===ld,be===ts,be===_l,oe)}}var ua=new Gi(!1,!1,!1,function(){});function Xv(I,oe,be,et,dt,Ze,st,Nt,jt,Ct,ct,Gt,Bt,Rt,bt){var Ve=Ct.Record,it={add:32774,subtract:32778,"reverse subtract":32779};be.ext_blend_minmax&&(it.min=Zo,it.max=wh);var Lt=be.angle_instanced_arrays,Kt=be.webgl_draw_buffers,xt={dirty:!0,profile:bt.profile},Zt={},St=[],Vt={},_t={};function Ht(le){return le.replace(".","_")}function Mn(le,Q,Te){var Ue=Ht(le);St.push(le),Zt[Ue]=xt[Ue]=!!Te,Vt[Ue]=Q}function Wn(le,Q,Te){var Ue=Ht(le);St.push(le),Array.isArray(Te)?(xt[Ue]=Te.slice(),Zt[Ue]=Te.slice()):xt[Ue]=Zt[Ue]=Te,_t[Ue]=Q}Mn(js,vp),Mn(ud,mh),Wn(Hc,"blendColor",[0,0,0,0]),Wn(wl,"blendEquationSeparate",[gd,gd]),Wn(Is,"blendFuncSeparate",[as,md,as,md]),Mn(Xc,mp,!0),Wn(Yc,"depthFunc",Eh),Wn(sd,"depthRange",[0,1]),Wn(cd,"depthMask",!0),Wn(Za,Za,[!0,!0,!0,!0]),Mn(sp,yh),Wn(cp,"cullFace",Kl),Wn(fp,fp,Ui),Wn(fd,fd,1),Mn(El,gh),Wn(qc,"polygonOffset",[0,0]),Mn(dd,bh),Mn(pd,_h),Wn(Ls,"sampleCoverage",[1,!1]),Mn(Xl,yp),Wn(Jn,"stencilMask",-1),Wn(Fs,"stencilFunc",[Ia,0,-1]),Wn(Kc,"stencilOpSeparate",[af,Fn,Fn,Fn]),Wn(Ja,"stencilOpSeparate",[Kl,Fn,Fn,Fn]),Mn($s,gp),Wn(Bs,"scissor",[0,0,I.drawingBufferWidth,I.drawingBufferHeight]),Wn(So,So,[0,0,I.drawingBufferWidth,I.drawingBufferHeight]);var It={gl:I,context:Bt,strings:oe,next:Zt,current:xt,draw:Gt,elements:Ze,buffer:dt,shader:ct,attributes:Ct.state,vao:Ct,uniforms:jt,framebuffer:Nt,extensions:be,timer:Rt,isBufferArgs:Tu},At={primTypes:Xo,compareFuncs:ls,blendFuncs:nl,blendEquations:it,stencilOps:rl,glTypes:Di,orientationType:_p};ne.optional(function(){It.isArrayLike=M}),Kt&&(At.backBuffer=[Kl],At.drawBuffer=Rr(et.maxDrawbuffers,function(le){return le===0?[0]:Rr(le,function(Q){return Oh+Q})}));var wt=0;function Cn(){var le=bl(),Q=le.link,Te=le.global;le.id=wt++,le.batchId="0";var Ue=Q(It),He=le.shared={props:"a0"};Object.keys(It).forEach(function(we){He[we]=Te.def(Ue,".",we)}),ne.optional(function(){le.CHECK=Q(ne),le.commandStr=ne.guessCommand(),le.command=Q(le.commandStr),le.assert=function(we,ue,$e){we("if(!(",ue,"))",this.CHECK,".commandRaise(",Q($e),",",this.command,");")},At.invalidBlendCombinations=Ys});var Ne=le.next={},Me=le.current={};Object.keys(_t).forEach(function(we){Array.isArray(xt[we])&&(Ne[we]=Te.def(He.next,".",we),Me[we]=Te.def(He.current,".",we))});var Ie=le.constants={};Object.keys(At).forEach(function(we){Ie[we]=Te.def(JSON.stringify(At[we]))}),le.invoke=function(we,ue){switch(ue.type){case ad:var $e=["this",He.context,He.props,le.batchId];return we.def(Q(ue.data),".call(",$e.slice(0,Math.max(ue.data.length+1,4)),")");case _l:return we.def(He.props,ue.data);case ts:return we.def(He.context,ue.data);case ld:return we.def("this",ue.data);case zc:return ue.data.append(le,we),ue.data.ref;case Eu:return ue.data.toString();case up:return ue.data.map(function(Ye){return le.invoke(we,Ye)})}},le.attribCache={};var fe={};return le.scopeAttrib=function(we){var ue=oe.id(we);if(ue in fe)return fe[ue];var $e=Ct.scope[ue];$e||($e=Ct.scope[ue]=new Ve);var Ye=fe[ue]=Q($e);return Ye},le}function tr(le){var Q=le.static,Te=le.dynamic,Ue;if(Us in Q){var He=!!Q[Us];Ue=Ao(function(Me,Ie){return He}),Ue.enable=He}else if(Us in Te){var Ne=Te[Us];Ue=Ni(Ne,function(Me,Ie){return Me.invoke(Ie,Ne)})}return Ue}function un(le,Q){var Te=le.static,Ue=le.dynamic;if(Ou in Te){var He=Te[Ou];return He?(He=Nt.getFramebuffer(He),ne.command(He,"invalid framebuffer object"),Ao(function(Me,Ie){var fe=Me.link(He),we=Me.shared;Ie.set(we.framebuffer,".next",fe);var ue=we.context;return Ie.set(ue,"."+Su,fe+".width"),Ie.set(ue,"."+Vs,fe+".height"),fe})):Ao(function(Me,Ie){var fe=Me.shared;Ie.set(fe.framebuffer,".next","null");var we=fe.context;return Ie.set(we,"."+Su,we+"."+Qc),Ie.set(we,"."+Vs,we+"."+hd),"null"})}else if(Ou in Ue){var Ne=Ue[Ou];return Ni(Ne,function(Me,Ie){var fe=Me.invoke(Ie,Ne),we=Me.shared,ue=we.framebuffer,$e=Ie.def(ue,".getFramebuffer(",fe,")");ne.optional(function(){Me.assert(Ie,"!"+fe+"||"+$e,"invalid framebuffer object")}),Ie.set(ue,".next",$e);var Ye=we.context;return Ie.set(Ye,"."+Su,$e+"?"+$e+".width:"+Ye+"."+Qc),Ie.set(Ye,"."+Vs,$e+"?"+$e+".height:"+Ye+"."+hd),$e})}else return null}function Qn(le,Q,Te){var Ue=le.static,He=le.dynamic;function Ne(fe){if(fe in Ue){var we=Ue[fe];ne.commandType(we,"object","invalid "+fe,Te.commandStr);var ue=!0,$e=we.x|0,Ye=we.y|0,d,m;return"width"in we?(d=we.width|0,ne.command(d>=0,"invalid "+fe,Te.commandStr)):ue=!1,"height"in we?(m=we.height|0,ne.command(m>=0,"invalid "+fe,Te.commandStr)):ue=!1,new Gi(!ue&&Q&&Q.thisDep,!ue&&Q&&Q.contextDep,!ue&&Q&&Q.propDep,function(V,Z){var de=V.shared.context,_e=d;"width"in we||(_e=Z.def(de,".",Su,"-",$e));var Le=m;return"height"in we||(Le=Z.def(de,".",Vs,"-",Ye)),[$e,Ye,_e,Le]})}else if(fe in He){var E=He[fe],C=Ni(E,function(V,Z){var de=V.invoke(Z,E);ne.optional(function(){V.assert(Z,de+"&&typeof "+de+'==="object"',"invalid "+fe)});var _e=V.shared.context,Le=Z.def(de,".x|0"),pt=Z.def(de,".y|0"),mt=Z.def('"width" in ',de,"?",de,".width|0:","(",_e,".",Su,"-",Le,")"),Ut=Z.def('"height" in ',de,"?",de,".height|0:","(",_e,".",Vs,"-",pt,")");return ne.optional(function(){V.assert(Z,mt+">=0&&"+Ut+">=0","invalid "+fe)}),[Le,pt,mt,Ut]});return Q&&(C.thisDep=C.thisDep||Q.thisDep,C.contextDep=C.contextDep||Q.contextDep,C.propDep=C.propDep||Q.propDep),C}else return Q?new Gi(Q.thisDep,Q.contextDep,Q.propDep,function(V,Z){var de=V.shared.context;return[0,0,Z.def(de,".",Su),Z.def(de,".",Vs)]}):null}var Me=Ne(So);if(Me){var Ie=Me;Me=new Gi(Me.thisDep,Me.contextDep,Me.propDep,function(fe,we){var ue=Ie.append(fe,we),$e=fe.shared.context;return we.set($e,"."+kt,ue[2]),we.set($e,"."+dp,ue[3]),ue})}return{viewport:Me,scissor_box:Ne(Bs)}}function Vn(le,Q){var Te=le.static,Ue=typeof Te[oo]=="string"&&typeof Te[Zc]=="string";if(Ue){if(Object.keys(Q.dynamic).length>0)return null;var He=Q.static,Ne=Object.keys(He);if(Ne.length>0&&typeof He[Ne[0]]=="number"){for(var Me=[],Ie=0;Ie<Ne.length;++Ie)ne(typeof He[Ne[Ie]]=="number","must specify all vertex attribute locations when using vaos"),Me.push([He[Ne[Ie]]|0,Ne[Ie]]);return Me}}return null}function nr(le,Q,Te){var Ue=le.static,He=le.dynamic;function Ne(ue){if(ue in Ue){var $e=oe.id(Ue[ue]);ne.optional(function(){ct.shader(xh[ue],$e,ne.guessCommand())});var Ye=Ao(function(){return $e});return Ye.id=$e,Ye}else if(ue in He){var d=He[ue];return Ni(d,function(m,E){var C=m.invoke(E,d),V=E.def(m.shared.strings,".id(",C,")");return ne.optional(function(){E(m.shared.shader,".shader(",xh[ue],",",V,",",m.command,");")}),V})}return null}var Me=Ne(oo),Ie=Ne(Zc),fe=null,we;return Gn(Me)&&Gn(Ie)?(fe=ct.program(Ie.id,Me.id,null,Te),we=Ao(function(ue,$e){return ue.link(fe)})):we=new Gi(Me&&Me.thisDep||Ie&&Ie.thisDep,Me&&Me.contextDep||Ie&&Ie.contextDep,Me&&Me.propDep||Ie&&Ie.propDep,function(ue,$e){var Ye=ue.shared.shader,d;Me?d=Me.append(ue,$e):d=$e.def(Ye,".",oo);var m;Ie?m=Ie.append(ue,$e):m=$e.def(Ye,".",Zc);var E=Ye+".program("+m+","+d;return ne.optional(function(){E+=","+ue.command}),$e.def(E+")")}),{frag:Me,vert:Ie,progVar:we,program:fe}}function gr(le,Q){var Te=le.static,Ue=le.dynamic;function He(){if(Lo in Te){var ue=Te[Lo];Tu(ue)?ue=Ze.getElements(Ze.create(ue,!0)):ue&&(ue=Ze.getElements(ue),ne.command(ue,"invalid elements",Q.commandStr));var $e=Ao(function(d,m){if(ue){var E=d.link(ue);return d.ELEMENTS=E,E}return d.ELEMENTS=null,null});return $e.value=ue,$e}else if(Lo in Ue){var Ye=Ue[Lo];return Ni(Ye,function(d,m){var E=d.shared,C=E.isBufferArgs,V=E.elements,Z=d.invoke(m,Ye),de=m.def("null"),_e=m.def(C,"(",Z,")"),Le=d.cond(_e).then(de,"=",V,".createStream(",Z,");").else(de,"=",V,".getElements(",Z,");");return ne.optional(function(){d.assert(Le.else,"!"+Z+"||"+de,"invalid elements")}),m.entry(Le),m.exit(d.cond(_e).then(V,".destroyStream(",de,");")),d.ELEMENTS=de,de})}return null}var Ne=He();function Me(){if(Yl in Te){var ue=Te[Yl];return ne.commandParameter(ue,Xo,"invalid primitve",Q.commandStr),Ao(function(Ye,d){return Xo[ue]})}else if(Yl in Ue){var $e=Ue[Yl];return Ni($e,function(Ye,d){var m=Ye.constants.primTypes,E=Ye.invoke(d,$e);return ne.optional(function(){Ye.assert(d,E+" in "+m,"invalid primitive, must be one of "+Object.keys(Xo))}),d.def(m,"[",E,"]")})}else if(Ne)return Gn(Ne)?Ne.value?Ao(function(Ye,d){return d.def(Ye.ELEMENTS,".primType")}):Ao(function(){return of}):new Gi(Ne.thisDep,Ne.contextDep,Ne.propDep,function(Ye,d){var m=Ye.ELEMENTS;return d.def(m,"?",m,".primType:",of)});return null}function Ie(ue,$e){if(ue in Te){var Ye=Te[ue]|0;return ne.command(!$e||Ye>=0,"invalid "+ue,Q.commandStr),Ao(function(m,E){return $e&&(m.OFFSET=Ye),Ye})}else if(ue in Ue){var d=Ue[ue];return Ni(d,function(m,E){var C=m.invoke(E,d);return $e&&(m.OFFSET=C,ne.optional(function(){m.assert(E,C+">=0","invalid "+ue)})),C})}else if($e&&Ne)return Ao(function(m,E){return m.OFFSET="0",0});return null}var fe=Ie(el,!0);function we(){if(Qa in Te){var ue=Te[Qa]|0;return ne.command(typeof ue=="number"&&ue>=0,"invalid vertex count",Q.commandStr),Ao(function(){return ue})}else if(Qa in Ue){var $e=Ue[Qa];return Ni($e,function(m,E){var C=m.invoke(E,$e);return ne.optional(function(){m.assert(E,"typeof "+C+'==="number"&&'+C+">=0&&"+C+"===("+C+"|0)","invalid vertex count")}),C})}else if(Ne)if(Gn(Ne)){if(Ne)return fe?new Gi(fe.thisDep,fe.contextDep,fe.propDep,function(m,E){var C=E.def(m.ELEMENTS,".vertCount-",m.OFFSET);return ne.optional(function(){m.assert(E,C+">=0","invalid vertex offset/element buffer too small")}),C}):Ao(function(m,E){return E.def(m.ELEMENTS,".vertCount")});var Ye=Ao(function(){return-1});return ne.optional(function(){Ye.MISSING=!0}),Ye}else{var d=new Gi(Ne.thisDep||fe.thisDep,Ne.contextDep||fe.contextDep,Ne.propDep||fe.propDep,function(m,E){var C=m.ELEMENTS;return m.OFFSET?E.def(C,"?",C,".vertCount-",m.OFFSET,":-1"):E.def(C,"?",C,".vertCount:-1")});return ne.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:Ne,primitive:Me(),count:we(),instances:Ie(xu,!1),offset:fe}}function Mo(le,Q){var Te=le.static,Ue=le.dynamic,He={};return St.forEach(function(Ne){var Me=Ht(Ne);function Ie(fe,we){if(Ne in Te){var ue=fe(Te[Ne]);He[Me]=Ao(function(){return ue})}else if(Ne in Ue){var $e=Ue[Ne];He[Me]=Ni($e,function(Ye,d){return we(Ye,d,Ye.invoke(d,$e))})}}switch(Ne){case sp:case ud:case js:case Xl:case Xc:case $s:case El:case dd:case pd:case cd:return Ie(function(fe){return ne.commandType(fe,"boolean",Ne,Q.commandStr),fe},function(fe,we,ue){return ne.optional(function(){fe.assert(we,"typeof "+ue+'==="boolean"',"invalid flag "+Ne,fe.commandStr)}),ue});case Yc:return Ie(function(fe){return ne.commandParameter(fe,ls,"invalid "+Ne,Q.commandStr),ls[fe]},function(fe,we,ue){var $e=fe.constants.compareFuncs;return ne.optional(function(){fe.assert(we,ue+" in "+$e,"invalid "+Ne+", must be one of "+Object.keys(ls))}),we.def($e,"[",ue,"]")});case sd:return Ie(function(fe){return ne.command(M(fe)&&fe.length===2&&typeof fe[0]=="number"&&typeof fe[1]=="number"&&fe[0]<=fe[1],"depth range is 2d array",Q.commandStr),fe},function(fe,we,ue){ne.optional(function(){fe.assert(we,fe.shared.isArrayLike+"("+ue+")&&"+ue+".length===2&&typeof "+ue+'[0]==="number"&&typeof '+ue+'[1]==="number"&&'+ue+"[0]<="+ue+"[1]","depth range must be a 2d array")});var $e=we.def("+",ue,"[0]"),Ye=we.def("+",ue,"[1]");return[$e,Ye]});case Is:return Ie(function(fe){ne.commandType(fe,"object","blend.func",Q.commandStr);var we="srcRGB"in fe?fe.srcRGB:fe.src,ue="srcAlpha"in fe?fe.srcAlpha:fe.src,$e="dstRGB"in fe?fe.dstRGB:fe.dst,Ye="dstAlpha"in fe?fe.dstAlpha:fe.dst;return ne.commandParameter(we,nl,Me+".srcRGB",Q.commandStr),ne.commandParameter(ue,nl,Me+".srcAlpha",Q.commandStr),ne.commandParameter($e,nl,Me+".dstRGB",Q.commandStr),ne.commandParameter(Ye,nl,Me+".dstAlpha",Q.commandStr),ne.command(Ys.indexOf(we+", "+$e)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+we+", "+$e+")",Q.commandStr),[nl[we],nl[$e],nl[ue],nl[Ye]]},function(fe,we,ue){var $e=fe.constants.blendFuncs;ne.optional(function(){fe.assert(we,ue+"&&typeof "+ue+'==="object"',"invalid blend func, must be an object")});function Ye(de,_e){var Le=we.def('"',de,_e,'" in ',ue,"?",ue,".",de,_e,":",ue,".",de);return ne.optional(function(){fe.assert(we,Le+" in "+$e,"invalid "+Ne+"."+de+_e+", must be one of "+Object.keys(nl))}),Le}var d=Ye("src","RGB"),m=Ye("dst","RGB");ne.optional(function(){var de=fe.constants.invalidBlendCombinations;fe.assert(we,de+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var E=we.def($e,"[",d,"]"),C=we.def($e,"[",Ye("src","Alpha"),"]"),V=we.def($e,"[",m,"]"),Z=we.def($e,"[",Ye("dst","Alpha"),"]");return[E,V,C,Z]});case wl:return Ie(function(fe){if(typeof fe=="string")return ne.commandParameter(fe,it,"invalid "+Ne,Q.commandStr),[it[fe],it[fe]];if(typeof fe=="object")return ne.commandParameter(fe.rgb,it,Ne+".rgb",Q.commandStr),ne.commandParameter(fe.alpha,it,Ne+".alpha",Q.commandStr),[it[fe.rgb],it[fe.alpha]];ne.commandRaise("invalid blend.equation",Q.commandStr)},function(fe,we,ue){var $e=fe.constants.blendEquations,Ye=we.def(),d=we.def(),m=fe.cond("typeof ",ue,'==="string"');return ne.optional(function(){function E(C,V,Z){fe.assert(C,Z+" in "+$e,"invalid "+V+", must be one of "+Object.keys(it))}E(m.then,Ne,ue),fe.assert(m.else,ue+"&&typeof "+ue+'==="object"',"invalid "+Ne),E(m.else,Ne+".rgb",ue+".rgb"),E(m.else,Ne+".alpha",ue+".alpha")}),m.then(Ye,"=",d,"=",$e,"[",ue,"];"),m.else(Ye,"=",$e,"[",ue,".rgb];",d,"=",$e,"[",ue,".alpha];"),we(m),[Ye,d]});case Hc:return Ie(function(fe){return ne.command(M(fe)&&fe.length===4,"blend.color must be a 4d array",Q.commandStr),Rr(4,function(we){return+fe[we]})},function(fe,we,ue){return ne.optional(function(){fe.assert(we,fe.shared.isArrayLike+"("+ue+")&&"+ue+".length===4","blend.color must be a 4d array")}),Rr(4,function($e){return we.def("+",ue,"[",$e,"]")})});case Jn:return Ie(function(fe){return ne.commandType(fe,"number",Me,Q.commandStr),fe|0},function(fe,we,ue){return ne.optional(function(){fe.assert(we,"typeof "+ue+'==="number"',"invalid stencil.mask")}),we.def(ue,"|0")});case Fs:return Ie(function(fe){ne.commandType(fe,"object",Me,Q.commandStr);var we=fe.cmp||"keep",ue=fe.ref||0,$e="mask"in fe?fe.mask:-1;return ne.commandParameter(we,ls,Ne+".cmp",Q.commandStr),ne.commandType(ue,"number",Ne+".ref",Q.commandStr),ne.commandType($e,"number",Ne+".mask",Q.commandStr),[ls[we],ue,$e]},function(fe,we,ue){var $e=fe.constants.compareFuncs;ne.optional(function(){function E(){fe.assert(we,Array.prototype.join.call(arguments,""),"invalid stencil.func")}E(ue+"&&typeof ",ue,'==="object"'),E('!("cmp" in ',ue,")||(",ue,".cmp in ",$e,")")});var Ye=we.def('"cmp" in ',ue,"?",$e,"[",ue,".cmp]",":",Fn),d=we.def(ue,".ref|0"),m=we.def('"mask" in ',ue,"?",ue,".mask|0:-1");return[Ye,d,m]});case Kc:case Ja:return Ie(function(fe){ne.commandType(fe,"object",Me,Q.commandStr);var we=fe.fail||"keep",ue=fe.zfail||"keep",$e=fe.zpass||"keep";return ne.commandParameter(we,rl,Ne+".fail",Q.commandStr),ne.commandParameter(ue,rl,Ne+".zfail",Q.commandStr),ne.commandParameter($e,rl,Ne+".zpass",Q.commandStr),[Ne===Ja?Kl:af,rl[we],rl[ue],rl[$e]]},function(fe,we,ue){var $e=fe.constants.stencilOps;ne.optional(function(){fe.assert(we,ue+"&&typeof "+ue+'==="object"',"invalid "+Ne)});function Ye(d){return ne.optional(function(){fe.assert(we,'!("'+d+'" in '+ue+")||("+ue+"."+d+" in "+$e+")","invalid "+Ne+"."+d+", must be one of "+Object.keys(rl))}),we.def('"',d,'" in ',ue,"?",$e,"[",ue,".",d,"]:",Fn)}return[Ne===Ja?Kl:af,Ye("fail"),Ye("zfail"),Ye("zpass")]});case qc:return Ie(function(fe){ne.commandType(fe,"object",Me,Q.commandStr);var we=fe.factor|0,ue=fe.units|0;return ne.commandType(we,"number",Me+".factor",Q.commandStr),ne.commandType(ue,"number",Me+".units",Q.commandStr),[we,ue]},function(fe,we,ue){ne.optional(function(){fe.assert(we,ue+"&&typeof "+ue+'==="object"',"invalid "+Ne)});var $e=we.def(ue,".factor|0"),Ye=we.def(ue,".units|0");return[$e,Ye]});case cp:return Ie(function(fe){var we=0;return fe==="front"?we=af:fe==="back"&&(we=Kl),ne.command(!!we,Me,Q.commandStr),we},function(fe,we,ue){return ne.optional(function(){fe.assert(we,ue+'==="front"||'+ue+'==="back"',"invalid cull.face")}),we.def(ue,'==="front"?',af,":",Kl)});case fd:return Ie(function(fe){return ne.command(typeof fe=="number"&&fe>=et.lineWidthDims[0]&&fe<=et.lineWidthDims[1],"invalid line width, must be a positive number between "+et.lineWidthDims[0]+" and "+et.lineWidthDims[1],Q.commandStr),fe},function(fe,we,ue){return ne.optional(function(){fe.assert(we,"typeof "+ue+'==="number"&&'+ue+">="+et.lineWidthDims[0]+"&&"+ue+"<="+et.lineWidthDims[1],"invalid line width")}),ue});case fp:return Ie(function(fe){return ne.commandParameter(fe,_p,Me,Q.commandStr),_p[fe]},function(fe,we,ue){return ne.optional(function(){fe.assert(we,ue+'==="cw"||'+ue+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),we.def(ue+'==="cw"?'+bp+":"+Ui)});case Za:return Ie(function(fe){return ne.command(M(fe)&&fe.length===4,"color.mask must be length 4 array",Q.commandStr),fe.map(function(we){return!!we})},function(fe,we,ue){return ne.optional(function(){fe.assert(we,fe.shared.isArrayLike+"("+ue+")&&"+ue+".length===4","invalid color.mask")}),Rr(4,function($e){return"!!"+ue+"["+$e+"]"})});case Ls:return Ie(function(fe){ne.command(typeof fe=="object"&&fe,Me,Q.commandStr);var we="value"in fe?fe.value:1,ue=!!fe.invert;return ne.command(typeof we=="number"&&we>=0&&we<=1,"sample.coverage.value must be a number between 0 and 1",Q.commandStr),[we,ue]},function(fe,we,ue){ne.optional(function(){fe.assert(we,ue+"&&typeof "+ue+'==="object"',"invalid sample.coverage")});var $e=we.def('"value" in ',ue,"?+",ue,".value:1"),Ye=we.def("!!",ue,".invert");return[$e,Ye]})}}),He}function Fo(le,Q){var Te=le.static,Ue=le.dynamic,He={};return Object.keys(Te).forEach(function(Ne){var Me=Te[Ne],Ie;if(typeof Me=="number"||typeof Me=="boolean")Ie=Ao(function(){return Me});else if(typeof Me=="function"){var fe=Me._reglType;fe==="texture2d"||fe==="textureCube"?Ie=Ao(function(we){return we.link(Me)}):fe==="framebuffer"||fe==="framebufferCube"?(ne.command(Me.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ne+'"',Q.commandStr),Ie=Ao(function(we){return we.link(Me.color[0])})):ne.commandRaise('invalid data for uniform "'+Ne+'"',Q.commandStr)}else M(Me)?Ie=Ao(function(we){var ue=we.global.def("[",Rr(Me.length,function($e){return ne.command(typeof Me[$e]=="number"||typeof Me[$e]=="boolean","invalid uniform "+Ne,we.commandStr),Me[$e]}),"]");return ue}):ne.commandRaise('invalid or missing data for uniform "'+Ne+'"',Q.commandStr);Ie.value=Me,He[Ne]=Ie}),Object.keys(Ue).forEach(function(Ne){var Me=Ue[Ne];He[Ne]=Ni(Me,function(Ie,fe){return Ie.invoke(fe,Me)})}),He}function sr(le,Q){var Te=le.static,Ue=le.dynamic,He={};return Object.keys(Te).forEach(function(Ne){var Me=Te[Ne],Ie=oe.id(Ne),fe=new Ve;if(Tu(Me))fe.state=es,fe.buffer=dt.getBuffer(dt.create(Me,xl,!1,!0)),fe.type=0;else{var we=dt.getBuffer(Me);if(we)fe.state=es,fe.buffer=we,fe.type=0;else if(ne.command(typeof Me=="object"&&Me,"invalid data for attribute "+Ne,Q.commandStr),"constant"in Me){var ue=Me.constant;fe.buffer="null",fe.state=id,typeof ue=="number"?fe.x=ue:(ne.command(M(ue)&&ue.length>0&&ue.length<=4,"invalid constant for attribute "+Ne,Q.commandStr),Hl.forEach(function(V,Z){Z<ue.length&&(fe[V]=ue[Z])}))}else{Tu(Me.buffer)?we=dt.getBuffer(dt.create(Me.buffer,xl,!1,!0)):we=dt.getBuffer(Me.buffer),ne.command(!!we,'missing buffer for attribute "'+Ne+'"',Q.commandStr);var $e=Me.offset|0;ne.command($e>=0,'invalid offset for attribute "'+Ne+'"',Q.commandStr);var Ye=Me.stride|0;ne.command(Ye>=0&&Ye<256,'invalid stride for attribute "'+Ne+'", must be integer betweeen [0, 255]',Q.commandStr);var d=Me.size|0;ne.command(!("size"in Me)||d>0&&d<=4,'invalid size for attribute "'+Ne+'", must be 1,2,3,4',Q.commandStr);var m=!!Me.normalized,E=0;"type"in Me&&(ne.commandParameter(Me.type,Di,"invalid type for attribute "+Ne,Q.commandStr),E=Di[Me.type]);var C=Me.divisor|0;"divisor"in Me&&(ne.command(C===0||Lt,'cannot specify divisor for attribute "'+Ne+'", instancing not supported',Q.commandStr),ne.command(C>=0,'invalid divisor for attribute "'+Ne+'"',Q.commandStr)),ne.optional(function(){var V=Q.commandStr,Z=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Me).forEach(function(de){ne.command(Z.indexOf(de)>=0,'unknown parameter "'+de+'" for attribute pointer "'+Ne+'" (valid parameters are '+Z+")",V)})}),fe.buffer=we,fe.state=es,fe.size=d,fe.normalized=m,fe.type=E||we.dtype,fe.offset=$e,fe.stride=Ye,fe.divisor=C}}He[Ne]=Ao(function(V,Z){var de=V.attribCache;if(Ie in de)return de[Ie];var _e={isStream:!1};return Object.keys(fe).forEach(function(Le){_e[Le]=fe[Le]}),fe.buffer&&(_e.buffer=V.link(fe.buffer),_e.type=_e.type||_e.buffer+".dtype"),de[Ie]=_e,_e})}),Object.keys(Ue).forEach(function(Ne){var Me=Ue[Ne];function Ie(fe,we){var ue=fe.invoke(we,Me),$e=fe.shared,Ye=fe.constants,d=$e.isBufferArgs,m=$e.buffer;ne.optional(function(){fe.assert(we,ue+"&&(typeof "+ue+'==="object"||typeof '+ue+'==="function")&&('+d+"("+ue+")||"+m+".getBuffer("+ue+")||"+m+".getBuffer("+ue+".buffer)||"+d+"("+ue+'.buffer)||("constant" in '+ue+"&&(typeof "+ue+'.constant==="number"||'+$e.isArrayLike+"("+ue+".constant))))",'invalid dynamic attribute "'+Ne+'"')});var E={isStream:we.def(!1)},C=new Ve;C.state=es,Object.keys(C).forEach(function(_e){E[_e]=we.def(""+C[_e])});var V=E.buffer,Z=E.type;we("if(",d,"(",ue,")){",E.isStream,"=true;",V,"=",m,".createStream(",xl,",",ue,");",Z,"=",V,".dtype;","}else{",V,"=",m,".getBuffer(",ue,");","if(",V,"){",Z,"=",V,".dtype;",'}else if("constant" in ',ue,"){",E.state,"=",id,";","if(typeof "+ue+'.constant === "number"){',E[Hl[0]],"=",ue,".constant;",Hl.slice(1).map(function(_e){return E[_e]}).join("="),"=0;","}else{",Hl.map(function(_e,Le){return E[_e]+"="+ue+".constant.length>"+Le+"?"+ue+".constant["+Le+"]:0;"}).join(""),"}}else{","if(",d,"(",ue,".buffer)){",V,"=",m,".createStream(",xl,",",ue,".buffer);","}else{",V,"=",m,".getBuffer(",ue,".buffer);","}",Z,'="type" in ',ue,"?",Ye.glTypes,"[",ue,".type]:",V,".dtype;",E.normalized,"=!!",ue,".normalized;");function de(_e){we(E[_e],"=",ue,".",_e,"|0;")}return de("size"),de("offset"),de("stride"),de("divisor"),we("}}"),we.exit("if(",E.isStream,"){",m,".destroyStream(",V,");","}"),E}He[Ne]=Ni(Me,Ie)}),He}function Go(le,Q){var Te=le.static,Ue=le.dynamic;if(Ol in Te){var He=Te[Ol];return He!==null&&Ct.getVAO(He)===null&&(He=Ct.createVAO(He)),Ao(function(Me){return Me.link(Ct.getVAO(He))})}else if(Ol in Ue){var Ne=Ue[Ol];return Ni(Ne,function(Me,Ie){var fe=Me.invoke(Ie,Ne);return Ie.def(Me.shared.vao+".getVAO("+fe+")")})}return null}function to(le){var Q=le.static,Te=le.dynamic,Ue={};return Object.keys(Q).forEach(function(He){var Ne=Q[He];Ue[He]=Ao(function(Me,Ie){return typeof Ne=="number"||typeof Ne=="boolean"?""+Ne:Me.link(Ne)})}),Object.keys(Te).forEach(function(He){var Ne=Te[He];Ue[He]=Ni(Ne,function(Me,Ie){return Me.invoke(Ie,Ne)})}),Ue}function Po(le,Q,Te,Ue,He){var Ne=le.static,Me=le.dynamic;ne.optional(function(){var de=[Ou,Zc,oo,Lo,Yl,el,Qa,xu,Us,Ol].concat(St);function _e(Le){Object.keys(Le).forEach(function(pt){ne.command(de.indexOf(pt)>=0,'unknown parameter "'+pt+'"',He.commandStr)})}_e(Ne),_e(Me)});var Ie=Vn(le,Q),fe=un(le),we=Qn(le,fe,He),ue=gr(le,He),$e=Mo(le,He),Ye=nr(le,He,Ie);function d(de){var _e=we[de];_e&&($e[de]=_e)}d(So),d(Ht(Bs));var m=Object.keys($e).length>0,E={framebuffer:fe,draw:ue,shader:Ye,state:$e,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(E.profile=tr(le),E.uniforms=Fo(Te,He),E.drawVAO=E.scopeVAO=Go(le),!E.drawVAO&&Ye.program&&!Ie&&be.angle_instanced_arrays){var C=!0,V=Ye.program.attributes.map(function(de){var _e=Q.static[de];return C=C&&!!_e,_e});if(C&&V.length>0){var Z=Ct.getVAO(Ct.createVAO(V));E.drawVAO=new Gi(null,null,null,function(de,_e){return de.link(Z)}),E.useVAO=!0}}return Ie?E.useVAO=!0:E.attributes=sr(Q,He),E.context=to(Ue),E}function $o(le,Q,Te){var Ue=le.shared,He=Ue.context,Ne=le.scope();Object.keys(Te).forEach(function(Me){Q.save(He,"."+Me);var Ie=Te[Me],fe=Ie.append(le,Q);Array.isArray(fe)?Ne(He,".",Me,"=[",fe.join(),"];"):Ne(He,".",Me,"=",fe,";")}),Q(Ne)}function wo(le,Q,Te,Ue){var He=le.shared,Ne=He.gl,Me=He.framebuffer,Ie;Kt&&(Ie=Q.def(He.extensions,".webgl_draw_buffers"));var fe=le.constants,we=fe.drawBuffer,ue=fe.backBuffer,$e;Te?$e=Te.append(le,Q):$e=Q.def(Me,".next"),Ue||Q("if(",$e,"!==",Me,".cur){"),Q("if(",$e,"){",Ne,".bindFramebuffer(",Xs,",",$e,".framebuffer);"),Kt&&Q(Ie,".drawBuffersWEBGL(",we,"[",$e,".colorAttachments.length]);"),Q("}else{",Ne,".bindFramebuffer(",Xs,",null);"),Kt&&Q(Ie,".drawBuffersWEBGL(",ue,");"),Q("}",Me,".cur=",$e,";"),Ue||Q("}")}function yo(le,Q,Te){var Ue=le.shared,He=Ue.gl,Ne=le.current,Me=le.next,Ie=Ue.current,fe=Ue.next,we=le.cond(Ie,".dirty");St.forEach(function(ue){var $e=Ht(ue);if(!($e in Te.state)){var Ye,d;if($e in Me){Ye=Me[$e],d=Ne[$e];var m=Rr(xt[$e].length,function(C){return we.def(Ye,"[",C,"]")});we(le.cond(m.map(function(C,V){return C+"!=="+d+"["+V+"]"}).join("||")).then(He,".",_t[$e],"(",m,");",m.map(function(C,V){return d+"["+V+"]="+C}).join(";"),";"))}else{Ye=we.def(fe,".",$e);var E=le.cond(Ye,"!==",Ie,".",$e);we(E),$e in Vt?E(le.cond(Ye).then(He,".enable(",Vt[$e],");").else(He,".disable(",Vt[$e],");"),Ie,".",$e,"=",Ye,";"):E(He,".",_t[$e],"(",Ye,");",Ie,".",$e,"=",Ye,";")}}}),Object.keys(Te.state).length===0&&we(Ie,".dirty=false;"),Q(we)}function Qo(le,Q,Te,Ue){var He=le.shared,Ne=le.current,Me=He.current,Ie=He.gl;Sl(Object.keys(Te)).forEach(function(fe){var we=Te[fe];if(!(Ue&&!Ue(we))){var ue=we.append(le,Q);if(Vt[fe]){var $e=Vt[fe];Gn(we)?ue?Q(Ie,".enable(",$e,");"):Q(Ie,".disable(",$e,");"):Q(le.cond(ue).then(Ie,".enable(",$e,");").else(Ie,".disable(",$e,");")),Q(Me,".",fe,"=",ue,";")}else if(M(ue)){var Ye=Ne[fe];Q(Ie,".",_t[fe],"(",ue,");",ue.map(function(d,m){return Ye+"["+m+"]="+d}).join(";"),";")}else Q(Ie,".",_t[fe],"(",ue,");",Me,".",fe,"=",ue,";")}})}function Eo(le,Q){Lt&&(le.instancing=Q.def(le.shared.extensions,".angle_instanced_arrays"))}function Zn(le,Q,Te,Ue,He){var Ne=le.shared,Me=le.stats,Ie=Ne.current,fe=Ne.timer,we=Te.profile;function ue(){return typeof performance>"u"?"Date.now()":"performance.now()"}var $e,Ye;function d(de){$e=Q.def(),de($e,"=",ue(),";"),typeof He=="string"?de(Me,".count+=",He,";"):de(Me,".count++;"),Rt&&(Ue?(Ye=Q.def(),de(Ye,"=",fe,".getNumPendingQueries();")):de(fe,".beginQuery(",Me,");"))}function m(de){de(Me,".cpuTime+=",ue(),"-",$e,";"),Rt&&(Ue?de(fe,".pushScopeStats(",Ye,",",fe,".getNumPendingQueries(),",Me,");"):de(fe,".endQuery();"))}function E(de){var _e=Q.def(Ie,".profile");Q(Ie,".profile=",de,";"),Q.exit(Ie,".profile=",_e,";")}var C;if(we){if(Gn(we)){we.enable?(d(Q),m(Q.exit),E("true")):E("false");return}C=we.append(le,Q),E(C)}else C=Q.def(Ie,".profile");var V=le.block();d(V),Q("if(",C,"){",V,"}");var Z=le.block();m(Z),Q.exit("if(",C,"){",Z,"}")}function ai(le,Q,Te,Ue,He){var Ne=le.shared;function Me(fe){switch(fe){case rs:case yd:case Ws:return 2;case ef:case Bi:case nf:return 3;case la:case tf:case rf:return 4;default:return 1}}function Ie(fe,we,ue){var $e=Ne.gl,Ye=Q.def(fe,".location"),d=Q.def(Ne.attributes,"[",Ye,"]"),m=ue.state,E=ue.buffer,C=[ue.x,ue.y,ue.z,ue.w],V=["buffer","normalized","offset","stride"];function Z(){Q("if(!",d,".buffer){",$e,".enableVertexAttribArray(",Ye,");}");var _e=ue.type,Le;if(ue.size?Le=Q.def(ue.size,"||",we):Le=we,Q("if(",d,".type!==",_e,"||",d,".size!==",Le,"||",V.map(function(mt){return d+"."+mt+"!=="+ue[mt]}).join("||"),"){",$e,".bindBuffer(",xl,",",E,".buffer);",$e,".vertexAttribPointer(",[Ye,Le,_e,ue.normalized,ue.stride,ue.offset],");",d,".type=",_e,";",d,".size=",Le,";",V.map(function(mt){return d+"."+mt+"="+ue[mt]+";"}).join(""),"}"),Lt){var pt=ue.divisor;Q("if(",d,".divisor!==",pt,"){",le.instancing,".vertexAttribDivisorANGLE(",[Ye,pt],");",d,".divisor=",pt,";}")}}function de(){Q("if(",d,".buffer){",$e,".disableVertexAttribArray(",Ye,");",d,".buffer=null;","}if(",Hl.map(function(_e,Le){return d+"."+_e+"!=="+C[Le]}).join("||"),"){",$e,".vertexAttrib4f(",Ye,",",C,");",Hl.map(function(_e,Le){return d+"."+_e+"="+C[Le]+";"}).join(""),"}")}m===es?Z():m===id?de():(Q("if(",m,"===",es,"){"),Z(),Q("}else{"),de(),Q("}"))}Ue.forEach(function(fe){var we=fe.name,ue=Te.attributes[we],$e;if(ue){if(!He(ue))return;$e=ue.append(le,Q)}else{if(!He(ua))return;var Ye=le.scopeAttrib(we);ne.optional(function(){le.assert(Q,Ye+".state","missing attribute "+we)}),$e={},Object.keys(new Ve).forEach(function(d){$e[d]=Q.def(Ye,".",d)})}Ie(le.link(fe),Me(fe.info.type),$e)})}function Nr(le,Q,Te,Ue,He){for(var Ne=le.shared,Me=Ne.gl,Ie,fe=0;fe<Ue.length;++fe){var we=Ue[fe],ue=we.name,$e=we.info.type,Ye=Te.uniforms[ue],d=le.link(we),m=d+".location",E;if(Ye){if(!He(Ye))continue;if(Gn(Ye)){var C=Ye.value;if(ne.command(C!==null&&typeof C<"u",'missing uniform "'+ue+'"',le.commandStr),$e===ql||$e===Ko){ne.command(typeof C=="function"&&($e===ql&&(C._reglType==="texture2d"||C._reglType==="framebuffer")||$e===Ko&&(C._reglType==="textureCube"||C._reglType==="framebufferCube")),"invalid texture for uniform "+ue,le.commandStr);var V=le.link(C._texture||C.color[0]._texture);Q(Me,".uniform1i(",m,",",V+".bind());"),Q.exit(V,".unbind();")}else if($e===zs||$e===Hs||$e===is){ne.optional(function(){ne.command(M(C),"invalid matrix for uniform "+ue,le.commandStr),ne.command($e===zs&&C.length===4||$e===Hs&&C.length===9||$e===is&&C.length===16,"invalid length for matrix uniform "+ue,le.commandStr)});var Z=le.global.def("new Float32Array(["+Array.prototype.slice.call(C)+"])"),de=2;$e===Hs?de=3:$e===is&&(de=4),Q(Me,".uniformMatrix",de,"fv(",m,",false,",Z,");")}else{switch($e){case $i:ne.commandType(C,"number","uniform "+ue,le.commandStr),Ie="1f";break;case rs:ne.command(M(C)&&C.length===2,"uniform "+ue,le.commandStr),Ie="2f";break;case ef:ne.command(M(C)&&C.length===3,"uniform "+ue,le.commandStr),Ie="3f";break;case la:ne.command(M(C)&&C.length===4,"uniform "+ue,le.commandStr),Ie="4f";break;case os:ne.commandType(C,"boolean","uniform "+ue,le.commandStr),Ie="1i";break;case ja:ne.commandType(C,"number","uniform "+ue,le.commandStr),Ie="1i";break;case Ws:ne.command(M(C)&&C.length===2,"uniform "+ue,le.commandStr),Ie="2i";break;case yd:ne.command(M(C)&&C.length===2,"uniform "+ue,le.commandStr),Ie="2i";break;case nf:ne.command(M(C)&&C.length===3,"uniform "+ue,le.commandStr),Ie="3i";break;case Bi:ne.command(M(C)&&C.length===3,"uniform "+ue,le.commandStr),Ie="3i";break;case rf:ne.command(M(C)&&C.length===4,"uniform "+ue,le.commandStr),Ie="4i";break;case tf:ne.command(M(C)&&C.length===4,"uniform "+ue,le.commandStr),Ie="4i";break}Q(Me,".uniform",Ie,"(",m,",",M(C)?Array.prototype.slice.call(C):C,");")}continue}else E=Ye.append(le,Q)}else{if(!He(ua))continue;E=Q.def(Ne.uniforms,"[",oe.id(ue),"]")}$e===ql?(ne(!Array.isArray(E),"must specify a scalar prop for textures"),Q("if(",E,"&&",E,'._reglType==="framebuffer"){',E,"=",E,".color[0];","}")):$e===Ko&&(ne(!Array.isArray(E),"must specify a scalar prop for cube maps"),Q("if(",E,"&&",E,'._reglType==="framebufferCube"){',E,"=",E,".color[0];","}")),ne.optional(function(){function Ut(Pt,Jt){le.assert(Q,Pt,'bad data or missing for uniform "'+ue+'".  '+Jt)}function An(Pt){ne(!Array.isArray(E),"must not specify an array type for uniform"),Ut("typeof "+E+'==="'+Pt+'"',"invalid type, expected "+Pt)}function En(Pt,Jt){Array.isArray(E)?ne(E.length===Pt,"must have length "+Pt):Ut(Ne.isArrayLike+"("+E+")&&"+E+".length==="+Pt,"invalid vector, should have length "+Pt,le.commandStr)}function Yn(Pt){ne(!Array.isArray(E),"must not specify a value type"),Ut("typeof "+E+'==="function"&&'+E+'._reglType==="texture'+(Pt===vd?"2d":"Cube")+'"',"invalid texture type",le.commandStr)}switch($e){case ja:An("number");break;case yd:En(2);break;case Bi:En(3);break;case tf:En(4);break;case $i:An("number");break;case rs:En(2);break;case ef:En(3);break;case la:En(4);break;case os:An("boolean");break;case Ws:En(2);break;case nf:En(3);break;case rf:En(4);break;case zs:En(4);break;case Hs:En(9);break;case is:En(16);break;case ql:Yn(vd);break;case Ko:Yn(vh);break}});var _e=1;switch($e){case ql:case Ko:var Le=Q.def(E,"._texture");Q(Me,".uniform1i(",m,",",Le,".bind());"),Q.exit(Le,".unbind();");continue;case ja:case os:Ie="1i";break;case yd:case Ws:Ie="2i",_e=2;break;case Bi:case nf:Ie="3i",_e=3;break;case tf:case rf:Ie="4i",_e=4;break;case $i:Ie="1f";break;case rs:Ie="2f",_e=2;break;case ef:Ie="3f",_e=3;break;case la:Ie="4f",_e=4;break;case zs:Ie="Matrix2fv";break;case Hs:Ie="Matrix3fv";break;case is:Ie="Matrix4fv";break}if(Q(Me,".uniform",Ie,"(",m,","),Ie.charAt(0)==="M"){var pt=Math.pow($e-zs+2,2),mt=le.global.def("new Float32Array(",pt,")");Array.isArray(E)?Q("false,(",Rr(pt,function(Ut){return mt+"["+Ut+"]="+E[Ut]}),",",mt,")"):Q("false,(Array.isArray(",E,")||",E," instanceof Float32Array)?",E,":(",Rr(pt,function(Ut){return mt+"["+Ut+"]="+E+"["+Ut+"]"}),",",mt,")")}else _e>1?Q(Rr(_e,function(Ut){return Array.isArray(E)?E[Ut]:E+"["+Ut+"]"})):(ne(!Array.isArray(E),"uniform value must not be an array"),Q(E));Q(");")}}function kn(le,Q,Te,Ue){var He=le.shared,Ne=He.gl,Me=He.draw,Ie=Ue.draw;function fe(){var Le=Ie.elements,pt,mt=Q;return Le?((Le.contextDep&&Ue.contextDynamic||Le.propDep)&&(mt=Te),pt=Le.append(le,mt)):pt=mt.def(Me,".",Lo),pt&&mt("if("+pt+")"+Ne+".bindBuffer("+hp+","+pt+".buffer.buffer);"),pt}function we(){var Le=Ie.count,pt,mt=Q;return Le?((Le.contextDep&&Ue.contextDynamic||Le.propDep)&&(mt=Te),pt=Le.append(le,mt),ne.optional(function(){Le.MISSING&&le.assert(Q,"false","missing vertex count"),Le.DYNAMIC&&le.assert(mt,pt+">=0","missing vertex count")})):(pt=mt.def(Me,".",Qa),ne.optional(function(){le.assert(mt,pt+">=0","missing vertex count")})),pt}var ue=fe();function $e(Le){var pt=Ie[Le];return pt?pt.contextDep&&Ue.contextDynamic||pt.propDep?pt.append(le,Te):pt.append(le,Q):Q.def(Me,".",Le)}var Ye=$e(Yl),d=$e(el),m=we();if(typeof m=="number"){if(m===0)return}else Te("if(",m,"){"),Te.exit("}");var E,C;Lt&&(E=$e(xu),C=le.instancing);var V=ue+".type",Z=Ie.elements&&Gn(Ie.elements);function de(){function Le(){Te(C,".drawElementsInstancedANGLE(",[Ye,m,V,d+"<<(("+V+"-"+wu+")>>1)",E],");")}function pt(){Te(C,".drawArraysInstancedANGLE(",[Ye,d,m,E],");")}ue?Z?Le():(Te("if(",ue,"){"),Le(),Te("}else{"),pt(),Te("}")):pt()}function _e(){function Le(){Te(Ne+".drawElements("+[Ye,m,V,d+"<<(("+V+"-"+wu+")>>1)"]+");")}function pt(){Te(Ne+".drawArrays("+[Ye,d,m]+");")}ue?Z?Le():(Te("if(",ue,"){"),Le(),Te("}else{"),pt(),Te("}")):pt()}Lt&&(typeof E!="number"||E>=0)?typeof E=="string"?(Te("if(",E,">0){"),de(),Te("}else if(",E,"<0){"),_e(),Te("}")):de():_e()}function cr(le,Q,Te,Ue,He){var Ne=Cn(),Me=Ne.proc("body",He);return ne.optional(function(){Ne.commandStr=Q.commandStr,Ne.command=Ne.link(Q.commandStr)}),Lt&&(Ne.instancing=Me.def(Ne.shared.extensions,".angle_instanced_arrays")),le(Ne,Me,Te,Ue),Ne.compile().body}function zn(le,Q,Te,Ue){Eo(le,Q),Te.useVAO?Te.drawVAO?Q(le.shared.vao,".setVAO(",Te.drawVAO.append(le,Q),");"):Q(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(Q(le.shared.vao,".setVAO(null);"),ai(le,Q,Te,Ue.attributes,function(){return!0})),Nr(le,Q,Te,Ue.uniforms,function(){return!0}),kn(le,Q,Q,Te)}function uo(le,Q){var Te=le.proc("draw",1);Eo(le,Te),$o(le,Te,Q.context),wo(le,Te,Q.framebuffer),yo(le,Te,Q),Qo(le,Te,Q.state),Zn(le,Te,Q,!1,!0);var Ue=Q.shader.progVar.append(le,Te);if(Te(le.shared.gl,".useProgram(",Ue,".program);"),Q.shader.program)zn(le,Te,Q,Q.shader.program);else{Te(le.shared.vao,".setVAO(null);");var He=le.global.def("{}"),Ne=Te.def(Ue,".id"),Me=Te.def(He,"[",Ne,"]");Te(le.cond(Me).then(Me,".call(this,a0);").else(Me,"=",He,"[",Ne,"]=",le.link(function(Ie){return cr(zn,le,Q,Ie,1)}),"(",Ue,");",Me,".call(this,a0);"))}Object.keys(Q.state).length>0&&Te(le.shared.current,".dirty=true;")}function Fa(le,Q,Te,Ue){le.batchId="a1",Eo(le,Q);function He(){return!0}ai(le,Q,Te,Ue.attributes,He),Nr(le,Q,Te,Ue.uniforms,He),kn(le,Q,Q,Te)}function Jl(le,Q,Te,Ue){Eo(le,Q);var He=Te.contextDep,Ne=Q.def(),Me="a0",Ie="a1",fe=Q.def();le.shared.props=fe,le.batchId=Ne;var we=le.scope(),ue=le.scope();Q(we.entry,"for(",Ne,"=0;",Ne,"<",Ie,";++",Ne,"){",fe,"=",Me,"[",Ne,"];",ue,"}",we.exit);function $e(V){return V.contextDep&&He||V.propDep}function Ye(V){return!$e(V)}if(Te.needsContext&&$o(le,ue,Te.context),Te.needsFramebuffer&&wo(le,ue,Te.framebuffer),Qo(le,ue,Te.state,$e),Te.profile&&$e(Te.profile)&&Zn(le,ue,Te,!1,!0),Ue)Te.useVAO?Te.drawVAO?$e(Te.drawVAO)?ue(le.shared.vao,".setVAO(",Te.drawVAO.append(le,ue),");"):we(le.shared.vao,".setVAO(",Te.drawVAO.append(le,we),");"):we(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(we(le.shared.vao,".setVAO(null);"),ai(le,we,Te,Ue.attributes,Ye),ai(le,ue,Te,Ue.attributes,$e)),Nr(le,we,Te,Ue.uniforms,Ye),Nr(le,ue,Te,Ue.uniforms,$e),kn(le,we,ue,Te);else{var d=le.global.def("{}"),m=Te.shader.progVar.append(le,ue),E=ue.def(m,".id"),C=ue.def(d,"[",E,"]");ue(le.shared.gl,".useProgram(",m,".program);","if(!",C,"){",C,"=",d,"[",E,"]=",le.link(function(V){return cr(Fa,le,Te,V,2)}),"(",m,");}",C,".call(this,a0[",Ne,"],",Ne,");")}}function he(le,Q){var Te=le.proc("batch",2);le.batchId="0",Eo(le,Te);var Ue=!1,He=!0;Object.keys(Q.context).forEach(function(d){Ue=Ue||Q.context[d].propDep}),Ue||($o(le,Te,Q.context),He=!1);var Ne=Q.framebuffer,Me=!1;Ne?(Ne.propDep?Ue=Me=!0:Ne.contextDep&&Ue&&(Me=!0),Me||wo(le,Te,Ne)):wo(le,Te,null),Q.state.viewport&&Q.state.viewport.propDep&&(Ue=!0);function Ie(d){return d.contextDep&&Ue||d.propDep}yo(le,Te,Q),Qo(le,Te,Q.state,function(d){return!Ie(d)}),(!Q.profile||!Ie(Q.profile))&&Zn(le,Te,Q,!1,"a1"),Q.contextDep=Ue,Q.needsContext=He,Q.needsFramebuffer=Me;var fe=Q.shader.progVar;if(fe.contextDep&&Ue||fe.propDep)Jl(le,Te,Q,null);else{var we=fe.append(le,Te);if(Te(le.shared.gl,".useProgram(",we,".program);"),Q.shader.program)Jl(le,Te,Q,Q.shader.program);else{Te(le.shared.vao,".setVAO(null);");var ue=le.global.def("{}"),$e=Te.def(we,".id"),Ye=Te.def(ue,"[",$e,"]");Te(le.cond(Ye).then(Ye,".call(this,a0,a1);").else(Ye,"=",ue,"[",$e,"]=",le.link(function(d){return cr(Jl,le,Q,d,2)}),"(",we,");",Ye,".call(this,a0,a1);"))}}Object.keys(Q.state).length>0&&Te(le.shared.current,".dirty=true;")}function tt(le,Q){var Te=le.proc("scope",3);le.batchId="a2";var Ue=le.shared,He=Ue.current;$o(le,Te,Q.context),Q.framebuffer&&Q.framebuffer.append(le,Te),Sl(Object.keys(Q.state)).forEach(function(Me){var Ie=Q.state[Me],fe=Ie.append(le,Te);M(fe)?fe.forEach(function(we,ue){Te.set(le.next[Me],"["+ue+"]",we)}):Te.set(Ue.next,"."+Me,fe)}),Zn(le,Te,Q,!0,!0),[Lo,el,Qa,xu,Yl].forEach(function(Me){var Ie=Q.draw[Me];Ie&&Te.set(Ue.draw,"."+Me,""+Ie.append(le,Te))}),Object.keys(Q.uniforms).forEach(function(Me){var Ie=Q.uniforms[Me].append(le,Te);Array.isArray(Ie)&&(Ie="["+Ie.join()+"]"),Te.set(Ue.uniforms,"["+oe.id(Me)+"]",Ie)}),Object.keys(Q.attributes).forEach(function(Me){var Ie=Q.attributes[Me].append(le,Te),fe=le.scopeAttrib(Me);Object.keys(new Ve).forEach(function(we){Te.set(fe,"."+we,Ie[we])})}),Q.scopeVAO&&Te.set(Ue.vao,".targetVAO",Q.scopeVAO.append(le,Te));function Ne(Me){var Ie=Q.shader[Me];Ie&&Te.set(Ue.shader,"."+Me,Ie.append(le,Te))}Ne(Zc),Ne(oo),Object.keys(Q.state).length>0&&(Te(He,".dirty=true;"),Te.exit(He,".dirty=true;")),Te("a1(",le.shared.context,",a0,",le.batchId,");")}function qe(le){if(!(typeof le!="object"||M(le))){for(var Q=Object.keys(le),Te=0;Te<Q.length;++Te)if(qt.isDynamic(le[Q[Te]]))return!0;return!1}}function tn(le,Q,Te){var Ue=Q.static[Te];if(!Ue||!qe(Ue))return;var He=le.global,Ne=Object.keys(Ue),Me=!1,Ie=!1,fe=!1,we=le.global.def("{}");Ne.forEach(function($e){var Ye=Ue[$e];if(qt.isDynamic(Ye)){typeof Ye=="function"&&(Ye=Ue[$e]=qt.unbox(Ye));var d=Ni(Ye,null);Me=Me||d.thisDep,fe=fe||d.propDep,Ie=Ie||d.contextDep}else{switch(He(we,".",$e,"="),typeof Ye){case"number":He(Ye);break;case"string":He('"',Ye,'"');break;case"object":Array.isArray(Ye)&&He("[",Ye.join(),"]");break;default:He(le.link(Ye));break}He(";")}});function ue($e,Ye){Ne.forEach(function(d){var m=Ue[d];if(qt.isDynamic(m)){var E=$e.invoke(Ye,m);Ye(we,".",d,"=",E,";")}})}Q.dynamic[Te]=new qt.DynamicVariable(zc,{thisDep:Me,contextDep:Ie,propDep:fe,ref:we,append:ue}),delete Q.static[Te]}function pr(le,Q,Te,Ue,He){var Ne=Cn();Ne.stats=Ne.link(He),Object.keys(Q.static).forEach(function(Ie){tn(Ne,Q,Ie)}),pp.forEach(function(Ie){tn(Ne,le,Ie)});var Me=Po(le,Q,Te,Ue,Ne);return uo(Ne,Me),tt(Ne,Me),he(Ne,Me),o(Ne.compile(),{destroy:function(){Me.shader.program.destroy()}})}return{next:Zt,current:xt,procs:function(){var le=Cn(),Q=le.proc("poll"),Te=le.proc("refresh"),Ue=le.block();Q(Ue),Te(Ue);var He=le.shared,Ne=He.gl,Me=He.next,Ie=He.current;Ue(Ie,".dirty=false;"),wo(le,Q),wo(le,Te,null,!0);var fe;Lt&&(fe=le.link(Lt)),be.oes_vertex_array_object&&Te(le.link(be.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var we=0;we<et.maxAttributes;++we){var ue=Te.def(He.attributes,"[",we,"]"),$e=le.cond(ue,".buffer");$e.then(Ne,".enableVertexAttribArray(",we,");",Ne,".bindBuffer(",xl,",",ue,".buffer.buffer);",Ne,".vertexAttribPointer(",we,",",ue,".size,",ue,".type,",ue,".normalized,",ue,".stride,",ue,".offset);").else(Ne,".disableVertexAttribArray(",we,");",Ne,".vertexAttrib4f(",we,",",ue,".x,",ue,".y,",ue,".z,",ue,".w);",ue,".buffer=null;"),Te($e),Lt&&Te(fe,".vertexAttribDivisorANGLE(",we,",",ue,".divisor);")}return Te(le.shared.vao,".currentVAO=null;",le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"),Object.keys(Vt).forEach(function(Ye){var d=Vt[Ye],m=Ue.def(Me,".",Ye),E=le.block();E("if(",m,"){",Ne,".enable(",d,")}else{",Ne,".disable(",d,")}",Ie,".",Ye,"=",m,";"),Te(E),Q("if(",m,"!==",Ie,".",Ye,"){",E,"}")}),Object.keys(_t).forEach(function(Ye){var d=_t[Ye],m=xt[Ye],E,C,V=le.block();if(V(Ne,".",d,"("),M(m)){var Z=m.length;E=le.global.def(Me,".",Ye),C=le.global.def(Ie,".",Ye),V(Rr(Z,function(de){return E+"["+de+"]"}),");",Rr(Z,function(de){return C+"["+de+"]="+E+"["+de+"];"}).join("")),Q("if(",Rr(Z,function(de){return E+"["+de+"]!=="+C+"["+de+"]"}).join("||"),"){",V,"}")}else E=Ue.def(Me,".",Ye),C=Ue.def(Ie,".",Ye),V(E,");",Ie,".",Ye,"=",E,";"),Q("if(",E,"!==",C,"){",V,"}");Te(V)}),le.compile()}(),compile:pr}}function Sh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Mu=34918,mr=34919,Ah=35007,sa=function(I,oe){if(!oe.ext_disjoint_timer_query)return null;var be=[];function et(){return be.pop()||oe.ext_disjoint_timer_query.createQueryEXT()}function dt(Lt){be.push(Lt)}var Ze=[];function st(Lt){var Kt=et();oe.ext_disjoint_timer_query.beginQueryEXT(Ah,Kt),Ze.push(Kt),Rt(Ze.length-1,Ze.length,Lt)}function Nt(){oe.ext_disjoint_timer_query.endQueryEXT(Ah)}function jt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ct=[];function ct(){return Ct.pop()||new jt}function Gt(Lt){Ct.push(Lt)}var Bt=[];function Rt(Lt,Kt,xt){var Zt=ct();Zt.startQueryIndex=Lt,Zt.endQueryIndex=Kt,Zt.sum=0,Zt.stats=xt,Bt.push(Zt)}var bt=[],Ve=[];function it(){var Lt,Kt,xt=Ze.length;if(xt!==0){Ve.length=Math.max(Ve.length,xt+1),bt.length=Math.max(bt.length,xt+1),bt[0]=0,Ve[0]=0;var Zt=0;for(Lt=0,Kt=0;Kt<Ze.length;++Kt){var St=Ze[Kt];oe.ext_disjoint_timer_query.getQueryObjectEXT(St,mr)?(Zt+=oe.ext_disjoint_timer_query.getQueryObjectEXT(St,Mu),dt(St)):Ze[Lt++]=St,bt[Kt+1]=Zt,Ve[Kt+1]=Lt}for(Ze.length=Lt,Lt=0,Kt=0;Kt<Bt.length;++Kt){var Vt=Bt[Kt],_t=Vt.startQueryIndex,Ht=Vt.endQueryIndex;Vt.sum+=bt[Ht]-bt[_t];var Mn=Ve[_t],Wn=Ve[Ht];Wn===Mn?(Vt.stats.gpuTime+=Vt.sum/1e6,Gt(Vt)):(Vt.startQueryIndex=Mn,Vt.endQueryIndex=Wn,Bt[Lt++]=Vt)}Bt.length=Lt}}return{beginQuery:st,endQuery:Nt,pushScopeStats:Rt,update:it,getNumPendingQueries:function(){return Ze.length},clear:function(){be.push.apply(be,Ze);for(var Lt=0;Lt<be.length;Lt++)oe.ext_disjoint_timer_query.deleteQueryEXT(be[Lt]);Ze.length=0,be.length=0},restore:function(){Ze.length=0,be.length=0}}},Jo=16384,La=256,Yv=1024,lf=34962,Al="webglcontextlost",wp="webglcontextrestored",Zl=1,eo=2,To=3;function _i(I,oe){for(var be=0;be<I.length;++be)if(I[be]===oe)return be;return-1}function uf(I){var oe=or(I);if(!oe)return null;var be=oe.gl,et=be.getContextAttributes(),dt=be.isContextLost(),Ze=Kr(be,oe);if(!Ze)return null;var st=ni(),Nt=Sh(),jt=Ze.extensions,Ct=sa(be,jt),ct=_r(),Gt=be.drawingBufferWidth,Bt=be.drawingBufferHeight,Rt={tick:0,time:0,viewportWidth:Gt,viewportHeight:Bt,framebufferWidth:Gt,framebufferHeight:Bt,drawingBufferWidth:Gt,drawingBufferHeight:Bt,pixelRatio:oe.pixelRatio},bt={},Ve={elements:null,primitive:4,count:-1,offset:0,instances:-1},it=Sc(be,jt),Lt=va(be,Nt,oe,xt),Kt=rd(be,jt,it,Nt,Lt);function xt(kn){return Kt.destroyBuffer(kn)}var Zt=fn(be,jt,Lt,Nt),St=ap(be,st,Nt,oe),Vt=Er(be,jt,it,function(){Mn.procs.poll()},Rt,Nt,oe),_t=Cs(be,jt,it,Nt,oe),Ht=Gc(be,jt,it,Vt,_t,Nt),Mn=Xv(be,st,jt,it,Lt,Zt,Vt,Ht,bt,Kt,St,Ve,Rt,Ct,oe),Wn=_o(be,Ht,Mn.procs.poll,Rt,et,jt,it),It=Mn.next,At=be.canvas,wt=[],Cn=[],tr=[],un=[oe.onDestroy],Qn=null;function Vn(){if(wt.length===0){Ct&&Ct.update(),Qn=null;return}Qn=Nn.next(Vn),Qo();for(var kn=wt.length-1;kn>=0;--kn){var cr=wt[kn];cr&&cr(Rt,null,0)}be.flush(),Ct&&Ct.update()}function nr(){!Qn&&wt.length>0&&(Qn=Nn.next(Vn))}function gr(){Qn&&(Nn.cancel(Vn),Qn=null)}function Mo(kn){kn.preventDefault(),dt=!0,gr(),Cn.forEach(function(cr){cr()})}function Fo(kn){be.getError(),dt=!1,Ze.restore(),St.restore(),Lt.restore(),Vt.restore(),_t.restore(),Ht.restore(),Kt.restore(),Ct&&Ct.restore(),Mn.procs.refresh(),nr(),tr.forEach(function(cr){cr()})}At&&(At.addEventListener(Al,Mo,!1),At.addEventListener(wp,Fo,!1));function sr(){wt.length=0,gr(),At&&(At.removeEventListener(Al,Mo),At.removeEventListener(wp,Fo)),St.clear(),Ht.clear(),_t.clear(),Vt.clear(),Zt.clear(),Lt.clear(),Kt.clear(),Ct&&Ct.clear(),un.forEach(function(kn){kn()})}function Go(kn){ne(!!kn,"invalid args to regl({...})"),ne.type(kn,"object","invalid args to regl({...})");function cr(He){var Ne=o({},He);delete Ne.uniforms,delete Ne.attributes,delete Ne.context,delete Ne.vao,"stencil"in Ne&&Ne.stencil.op&&(Ne.stencil.opBack=Ne.stencil.opFront=Ne.stencil.op,delete Ne.stencil.op);function Me(Ie){if(Ie in Ne){var fe=Ne[Ie];delete Ne[Ie],Object.keys(fe).forEach(function(we){Ne[Ie+"."+we]=fe[we]})}}return Me("blend"),Me("depth"),Me("cull"),Me("stencil"),Me("polygonOffset"),Me("scissor"),Me("sample"),"vao"in He&&(Ne.vao=He.vao),Ne}function zn(He,Ne){var Me={},Ie={};return Object.keys(He).forEach(function(fe){var we=He[fe];if(qt.isDynamic(we)){Ie[fe]=qt.unbox(we,fe);return}else if(Ne&&Array.isArray(we)){for(var ue=0;ue<we.length;++ue)if(qt.isDynamic(we[ue])){Ie[fe]=qt.unbox(we,fe);return}}Me[fe]=we}),{dynamic:Ie,static:Me}}var uo=zn(kn.context||{},!0),Fa=zn(kn.uniforms||{},!0),Jl=zn(kn.attributes||{},!1),he=zn(cr(kn),!1),tt={gpuTime:0,cpuTime:0,count:0},qe=Mn.compile(he,Jl,Fa,uo,tt),tn=qe.draw,pr=qe.batch,le=qe.scope,Q=[];function Te(He){for(;Q.length<He;)Q.push(null);return Q}function Ue(He,Ne){var Me;if(dt&&ne.raise("context lost"),typeof He=="function")return le.call(this,null,He,0);if(typeof Ne=="function")if(typeof He=="number")for(Me=0;Me<He;++Me)le.call(this,null,Ne,Me);else if(Array.isArray(He))for(Me=0;Me<He.length;++Me)le.call(this,He[Me],Ne,Me);else return le.call(this,He,Ne,0);else if(typeof He=="number"){if(He>0)return pr.call(this,Te(He|0),He|0)}else if(Array.isArray(He)){if(He.length)return pr.call(this,He,He.length)}else return tn.call(this,He)}return o(Ue,{stats:tt,destroy:function(){qe.destroy()}})}var to=Ht.setFBO=Go({framebuffer:qt.define.call(null,Zl,"framebuffer")});function Po(kn,cr){var zn=0;Mn.procs.poll();var uo=cr.color;uo&&(be.clearColor(+uo[0]||0,+uo[1]||0,+uo[2]||0,+uo[3]||0),zn|=Jo),"depth"in cr&&(be.clearDepth(+cr.depth),zn|=La),"stencil"in cr&&(be.clearStencil(cr.stencil|0),zn|=Yv),ne(!!zn,"called regl.clear with no buffer specified"),be.clear(zn)}function $o(kn){if(ne(typeof kn=="object"&&kn,"regl.clear() takes an object as input"),"framebuffer"in kn)if(kn.framebuffer&&kn.framebuffer_reglType==="framebufferCube")for(var cr=0;cr<6;++cr)to(o({framebuffer:kn.framebuffer.faces[cr]},kn),Po);else to(kn,Po);else Po(null,kn)}function wo(kn){ne.type(kn,"function","regl.frame() callback must be a function"),wt.push(kn);function cr(){var zn=_i(wt,kn);ne(zn>=0,"cannot cancel a frame twice");function uo(){var Fa=_i(wt,uo);wt[Fa]=wt[wt.length-1],wt.length-=1,wt.length<=0&&gr()}wt[zn]=uo}return nr(),{cancel:cr}}function yo(){var kn=It.viewport,cr=It.scissor_box;kn[0]=kn[1]=cr[0]=cr[1]=0,Rt.viewportWidth=Rt.framebufferWidth=Rt.drawingBufferWidth=kn[2]=cr[2]=be.drawingBufferWidth,Rt.viewportHeight=Rt.framebufferHeight=Rt.drawingBufferHeight=kn[3]=cr[3]=be.drawingBufferHeight}function Qo(){Rt.tick+=1,Rt.time=Zn(),yo(),Mn.procs.poll()}function Eo(){Vt.refresh(),yo(),Mn.procs.refresh(),Ct&&Ct.update()}function Zn(){return(_r()-ct)/1e3}Eo();function ai(kn,cr){ne.type(cr,"function","listener callback must be a function");var zn;switch(kn){case"frame":return wo(cr);case"lost":zn=Cn;break;case"restore":zn=tr;break;case"destroy":zn=un;break;default:ne.raise("invalid event, must be one of frame,lost,restore,destroy")}return zn.push(cr),{cancel:function(){for(var uo=0;uo<zn.length;++uo)if(zn[uo]===cr){zn[uo]=zn[zn.length-1],zn.pop();return}}}}var Nr=o(Go,{clear:$o,prop:qt.define.bind(null,Zl),context:qt.define.bind(null,eo),this:qt.define.bind(null,To),draw:Go({}),buffer:function(kn){return Lt.create(kn,lf,!1,!1)},elements:function(kn){return Zt.create(kn,!1)},texture:Vt.create2D,cube:Vt.createCube,renderbuffer:_t.create,framebuffer:Ht.create,framebufferCube:Ht.createCube,vao:Kt.createVAO,attributes:et,frame:wo,on:ai,limits:it,hasExtension:function(kn){return it.extensions.indexOf(kn.toLowerCase())>=0},read:Wn,destroy:sr,_gl:be,_refresh:Eo,poll:function(){Qo(),Ct&&Ct.update()},now:Zn,stats:Nt});return oe.onDone(null,Nr),Nr}return uf})})(Dee);var bf,dy,_f,ku,py,Td,hy,cg,ac,Dp,Ea,lc,uc,fg;bf={},an(bf,on.POINTS,"points"),an(bf,on.LINES,"lines"),an(bf,on.LINE_LOOP,"line loop"),an(bf,on.LINE_STRIP,"line strip"),an(bf,on.TRIANGLES,"triangles"),an(bf,on.TRIANGLE_FAN,"triangle fan"),an(bf,on.TRIANGLE_STRIP,"triangle strip");dy={},an(dy,on.STATIC_DRAW,"static"),an(dy,on.DYNAMIC_DRAW,"dynamic"),an(dy,on.STREAM_DRAW,"stream");_f={},an(_f,on.BYTE,"int8"),an(_f,on.UNSIGNED_INT,"int16"),an(_f,on.INT,"int32"),an(_f,on.UNSIGNED_BYTE,"uint8"),an(_f,on.UNSIGNED_SHORT,"uint16"),an(_f,on.UNSIGNED_INT,"uint32"),an(_f,on.FLOAT,"float");ku={},an(ku,on.ALPHA,"alpha"),an(ku,on.LUMINANCE,"luminance"),an(ku,on.LUMINANCE_ALPHA,"luminance alpha"),an(ku,on.RGB,"rgb"),an(ku,on.RGBA,"rgba"),an(ku,on.RGBA4,"rgba4"),an(ku,on.RGB5_A1,"rgb5 a1"),an(ku,on.RGB565,"rgb565"),an(ku,on.DEPTH_COMPONENT,"depth"),an(ku,on.DEPTH_STENCIL,"depth stencil");py={},an(py,on.DONT_CARE,"dont care"),an(py,on.NICEST,"nice"),an(py,on.FASTEST,"fast");Td={},an(Td,on.NEAREST,"nearest"),an(Td,on.LINEAR,"linear"),an(Td,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(Td,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(Td,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(Td,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");hy={},an(hy,on.REPEAT,"repeat"),an(hy,on.CLAMP_TO_EDGE,"clamp"),an(hy,on.MIRRORED_REPEAT,"mirror");cg={},an(cg,on.NONE,"none"),an(cg,on.BROWSER_DEFAULT_WEBGL,"browser");ac={},an(ac,on.NEVER,"never"),an(ac,on.ALWAYS,"always"),an(ac,on.LESS,"less"),an(ac,on.LEQUAL,"lequal"),an(ac,on.GREATER,"greater"),an(ac,on.GEQUAL,"gequal"),an(ac,on.EQUAL,"equal"),an(ac,on.NOTEQUAL,"notequal");Dp={},an(Dp,on.FUNC_ADD,"add"),an(Dp,on.MIN_EXT,"min"),an(Dp,on.MAX_EXT,"max"),an(Dp,on.FUNC_SUBTRACT,"subtract"),an(Dp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");Ea={},an(Ea,on.ZERO,"zero"),an(Ea,on.ONE,"one"),an(Ea,on.SRC_COLOR,"src color"),an(Ea,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(Ea,on.SRC_ALPHA,"src alpha"),an(Ea,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(Ea,on.DST_COLOR,"dst color"),an(Ea,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(Ea,on.DST_ALPHA,"dst alpha"),an(Ea,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(Ea,on.CONSTANT_COLOR,"constant color"),an(Ea,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(Ea,on.CONSTANT_ALPHA,"constant alpha"),an(Ea,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(Ea,on.SRC_ALPHA_SATURATE,"src alpha saturate");lc={},an(lc,on.NEVER,"never"),an(lc,on.ALWAYS,"always"),an(lc,on.LESS,"less"),an(lc,on.LEQUAL,"lequal"),an(lc,on.GREATER,"greater"),an(lc,on.GEQUAL,"gequal"),an(lc,on.EQUAL,"equal"),an(lc,on.NOTEQUAL,"notequal");uc={},an(uc,on.ZERO,"zero"),an(uc,on.KEEP,"keep"),an(uc,on.REPLACE,"replace"),an(uc,on.INVERT,"invert"),an(uc,on.INCR,"increment"),an(uc,on.DECR,"decrement"),an(uc,on.INCR_WRAP,"increment wrap"),an(uc,on.DECR_WRAP,"decrement wrap");fg={},an(fg,on.FRONT,"front"),an(fg,on.BACK,"back");var jee=Function.prototype,Iee=jee.toString;Iee.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class NR{constructor(){wa(this,"lf");wa(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new zK(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:o.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:w}=b;w.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}wa(NR,"pluginName","dagre");const Lee=$r({name:"WorkFlow"}),Fee=$r({...Lee,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":fV,"./nodes/application-node/index.ts":gV,"./nodes/base-node/index.ts":UW,"./nodes/condition-node/index.ts":KW,"./nodes/document-extract-node/index.ts":tz,"./nodes/form-node/index.ts":wz,"./nodes/function-lib-node/index.ts":Dz,"./nodes/function-node/index.ts":Kz,"./nodes/image-generate/index.ts":uH,"./nodes/image-understand/index.ts":bH,"./nodes/mcp-node/index.ts":jH,"./nodes/question-node/index.ts":zH,"./nodes/reply-node/index.ts":JH,"./nodes/reranker-node/index.ts":pX,"./nodes/search-dataset-node/index.ts":xX,"./nodes/speech-to-text-node/index.ts":CX,"./nodes/start-node/index.ts":FX,"./nodes/text-to-speech-node/index.ts":XX,"./nodes/variable-assign-node/index.ts":tY}),o=uV(),r=Et(""),s=e,c={nodes:[...YI]};Oo({get:()=>s.data?s.data:c,set:A=>A});const v=Et();zo(()=>{g()});const h=A=>{v.value.render(A)},g=A=>{const R=document.querySelector("#container");R&&(v.value=new q7({plugins:[NR],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:R}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),sY(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(j=>n[j].default),lY]),v.value.setDefaultEdgeType("app-edge"),v.value.render(A||{}),v.value.graphModel.eventCenter.on("delete_edge",j=>{j.forEach(k=>{v.value.deleteEdge(k)})}),v.value.graphModel.eventCenter.on("anchor:drop",j=>{j.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var j;(j=v.value)==null||j.fitView()},500))};return t({onmousedown:A=>{A.type&&v.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(A=>{var R;return(R=A==null?void 0:A.validate)==null?void 0:R.call(A)})),getGraphData:()=>v.value.getGraphData(),addNode:A=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:R,virtualRectCenterPositionY:j}=v.value.graphModel.getVirtualRectSize(),k=v.value.graphModel.addNode({type:A.type,properties:A.properties,x:R,y:j-v.value.graphModel.height/2});k.isSelected=!0,k.isHovered=!0,v.value.toFront(k.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:h}),(A,R)=>(nt(),In(si,null,[R[0]||(R[0]=me("div",{class:"workflow-app",id:"container"},null,-1)),v.value?(nt(),Yt(uY,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):vr("",!0),F(Jr(o),{"flow-id":r.value},null,8,["flow-id"])],64))}});const $ee={class:"workflow-publish-history border-l"},Bee={class:"border-b p-16-24"},Uee={class:"list-height pt-0"},Gee={class:"p-8 pt-0"},Vee={class:"flex-between"},Wee={style:{"max-width":"80%"}},zee={class:"text-center"},Hee=$r({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=BM(),{params:{id:o}}=n,r=t,s=Et(!1),c=Et([]),v=Et("");function h(A){v.value=A.id}function g(A){r("click",A)}function b(A){r("refreshVersion",A)}function w(A){A.writeStatus=!0}function O(A){A.writeStatus=!1}function S(A,R){if(A){const j={name:A};Aa.putWorkFlowVersion(o,R.id,j,s).then(()=>{Bp(Qt("common.modifySuccess")),R.writeStatus=!1,P()})}else xa(Qt("views.applicationWorkflow.tip.nameMessage"))}function P(){Aa.getWorkFlowVersion(o,s).then(A=>{c.value=A.data})}return zo(()=>{P()}),(A,R)=>{const j=ce("ReadWrite"),k=ce("el-tag"),B=ce("UserFilled"),q=ce("el-icon"),X=ce("AppAvatar"),W=ce("el-text"),ee=ce("MoreFilled"),J=ce("el-button"),L=ce("EditPen"),G=ce("el-dropdown-item"),Y=ce("RefreshLeft"),H=ce("el-dropdown-menu"),se=ce("el-dropdown"),Re=ce("common-list"),Se=ce("el-scrollbar"),ze=_v("loading");return nt(),In("div",$ee,[me("h4",Bee,We(A.$t("views.applicationWorkflow.setting.releaseHistory")),1),me("div",Uee,[F(Se,null,{default:U(()=>[me("div",Gee,[Nl((nt(),Yt(Re,{data:c.value,class:"mt-8",onClick:g,onMouseenter:h,onMouseleave:R[1]||(R[1]=Be=>v.value="")},{default:U(({row:Be,index:Oe})=>[me("div",Vee,[me("div",Wee,[me("h5",{class:kd([Oe===0?"primary":"","flex"])},[F(j,{onChange:ae=>S(ae,Be),data:Be.name||Jr(X1)(Be.updateTime),trigger:"manual",write:Be.writeStatus,onClose:ae=>O(Be)},null,8,["onChange","data","write","onClose"]),Oe===0?(nt(),Yt(k,{key:0,class:"default-tag ml-4"},{default:U(()=>[Tt(We(A.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):vr("",!0)],2),F(W,{type:"info",class:"color-secondary flex mt-8"},{default:U(()=>[F(X,{size:20,class:"avatar-grey mr-4"},{default:U(()=>[F(q,null,{default:U(()=>[F(B)]),_:1})]),_:1}),Tt(" "+We(Be.publish_user_name),1)]),_:2},1024)]),Nl(me("div",{onClick:R[0]||(R[0]=Sn(()=>{},["stop"]))},[F(se,{trigger:"click",teleported:!1},{dropdown:U(()=>[F(H,null,{default:U(()=>[F(G,{onClick:Sn(ae=>w(Be),["stop"])},{default:U(()=>[F(q,null,{default:U(()=>[F(L)]),_:1}),Tt(" "+We(A.$t("common.edit")),1)]),_:2},1032,["onClick"]),F(G,{onClick:ae=>b(Be)},{default:U(()=>[F(q,null,{default:U(()=>[F(Y)]),_:1}),Tt(" "+We(A.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:U(()=>[F(J,{text:""},{default:U(()=>[F(q,null,{default:U(()=>[F(ee)]),_:1})]),_:1})]),_:2},1024)],512),[[bv,v.value===Be.id]])])]),empty:U(()=>[me("div",zee,[F(W,{type:"info"},{default:U(()=>[Tt(We(A.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[ze,s.value]])])]),_:1})])])}}});const Xee=Xy(Hee,[["__scopeId","data-v-935cc16f"]]),pM=[ti.AiChat,ti.Reply,ti.FunctionLib,ti.FunctionLibCustom,ti.ImageUnderstandNode,ti.Application,ti.SpeechToTextNode,ti.TextToSpeechNode,ti.ImageGenerateNode,ti.McpNode];class hM{constructor(t){wa(this,"nodes");wa(this,"edges");wa(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===ti.Start);if(t.length==0)throw Qt("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Qt("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===ti.Base);if(t.length==0)throw Qt("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Qt("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===ti.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===ti.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==ti.Start&&n.id!==ti.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Qt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(o.length==0&&!pM.includes(t.type))throw Qt("views.applicationWorkflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==ti.Base&&t.type!==ti.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Qt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===ti.Condition){const n=t.properties.nodeData.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.needConnect1")}${o.type}${Qt("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(o=>o.sourceNodeId==t.id).length==0&&!pM.includes(t.type))throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.nodeUnavailable")}`}}const Yee={class:"application-workflow"},qee={class:"header border-b flex-between p-12-24"},Kee={class:"flex align-center"},Zee={key:0},Jee={key:0},Qee={key:1},ete={class:"ml-4"},tte={class:"flex-between"},nte={class:"flex align-center"},rte={class:"mr-12 ml-24 flex"},ote=["src"],ite={class:"mr-16"},ate={class:"scrollbar-height"},gte=$r({__name:"index",setup(e){const{user:t,application:n}=Tf(),o=qI(),r=BM(),s=Oo(()=>t.isDefaultTheme()),{params:{id:c}}=r;let v;const h=Et(),g=Et(),b=Et(!1),w=Et(null),O=Et(!1),S=Et(!1),P=Et(!1),A=Et(""),R=Et(!1),j=Et(!1),k=Et(!1),B=Et({}),q=Et(null);function X(){JSON.stringify(q.value)!==JSON.stringify(Oe())?Cw(Qt("common.tip"),Qt("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Qt("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Qt("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{ve(!0,!0)}).catch(je=>{je==="cancel"&&o.push({path:`/application/${c}/WORK_FLOW/overview`})}):o.push({path:`/application/${c}/WORK_FLOW/overview`})}function W(){k.value||(j.value=!1,k.value=!1)}function ee(je){je&&L(je),h1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&Pe(),j.value=!1,k.value=!1}function J(je){k.value=!0,B.value=je,L(je),Ke()}function L(je){var at;je.workFlow.nodes.map(gt=>{gt.properties.noRender=!0}),w.value.workFlow=je.workFlow,A.value=je==null?void 0:je.updateTime,(at=h.value)==null||at.clearGraphData(),H1(()=>{var gt;(gt=h.value)==null||gt.render(je.workFlow)})}function G(){ae(),h1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&Pe(),j.value=!1,k.value=!1}function Y(){j.value=!0}function H(je){je?Pe():Ke(),localStorage.setItem("workflowAutoSave",je.toString())}function se(je){O.value=!1}function Re(je){O.value=!1}function Se(){O.value=!1}async function ze(){var je;(je=h.value)==null||je.validate().then(async()=>{const at={workFlow:Oe()};await n.asyncPutApplication(c,at);const gt=new hM(at.workFlow);try{gt.is_valid()}catch(Mt){xa(Mt.toString());return}Aa.putPublishApplication(c,at,b).then(()=>{Bp(Qt("views.applicationWorkflow.tip.publicSuccess"))})}).catch(at=>{var Xt,De,ge,Ae;const gt=at.node,Mt=at.errMessage;if(typeof Mt=="string")xa(((Xt=at.node.properties)==null?void 0:Xt.stepName)+` ${Qt("views.applicationWorkflow.node").toLowerCase()} `+Mt.toLowerCase());else{const ht=Object.keys(Mt);xa(((De=gt.properties)==null?void 0:De.stepName)+` ${Qt("views.applicationWorkflow.node").toLowerCase()} `+((Ae=(ge=Mt[ht[0]])==null?void 0:ge[0])==null?void 0:Ae.message.toLowerCase()))}})}const Be=()=>{var je;(je=h.value)==null||je.validate().then(()=>{var Mt;const at=Oe(),gt=new hM(at);try{gt.is_valid(),w.value={...w.value,type:"WORK_FLOW",...(Mt=gt.get_base_node())==null?void 0:Mt.properties.nodeData,workFlow:Oe()},S.value=!0}catch(Xt){xa(Xt.toString())}}).catch(at=>{var Xt,De,ge,Ae;const gt=at.node,Mt=at.errMessage;if(typeof Mt=="string")xa(((Xt=at.node.properties)==null?void 0:Xt.stepName)+` ${Qt("views.applicationWorkflow.node")}，`+Mt);else{const ht=Object.keys(Mt);xa(((De=gt.properties)==null?void 0:De.stepName)+` ${Qt("views.applicationWorkflow.node")}，`+((Ae=(ge=Mt[ht[0]])==null?void 0:ge[0])==null?void 0:Ae.message))}})};function Oe(){var je;return(je=h.value)==null?void 0:je.getGraphData()}function ae(){n.asyncGetApplicationDetail(c).then(je=>{var at,gt,Mt;(at=je.data)==null||at.workFlow.nodes.map(Xt=>{Xt.properties.noRender=!0}),w.value=je.data,w.value.sttModelId=je.data.sttModel,w.value.ttsModelId=je.data.ttsModel,w.value.ttsType=je.data.ttsType,A.value=(gt=je.data)==null?void 0:gt.updateTime,(Mt=h.value)==null||Mt.clearGraphData(),H1(()=>{var Xt;(Xt=h.value)==null||Xt.render(w.value.workFlow),q.value=Oe()})})}function ve(je,at){const gt={workFlow:Oe()};b.value=at||!1,n.asyncPutApplication(c,gt).then(Mt=>{A.value=new Date,je&&(q.value=Oe(),Bp(Qt("common.saveSuccess")),at&&o.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{b.value=!1})}const Pe=()=>{v=setInterval(()=>{ve()},6e4)},Ke=()=>{v&&clearInterval(v)};return zo(()=>{ae();const je=localStorage.getItem("workflowAutoSave");R.value=je==="true",h1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&Pe()}),KI(()=>{var je;Ke(),(je=h.value)==null||je.clearGraphData()}),(je,at)=>{var Kn,ne;const gt=ce("back-button"),Mt=ce("el-text"),Xt=ce("el-button"),De=ce("el-divider"),ge=ce("Close"),Ae=ce("el-icon"),ht=ce("AppIcon"),Wt=ce("MoreFilled"),Ot=ce("el-dropdown-item"),rn=ce("el-switch"),yn=ce("el-dropdown-menu"),Tn=ce("el-dropdown"),pn=ce("el-collapse-transition"),ft=ce("AppAvatar"),On=ce("AiChat"),Fe=_v("click-outside"),mn=_v("loading");return Nl((nt(),In("div",Yee,[me("div",qee,[me("div",Kee,[F(gt,{onClick:X}),me("h4",null,We((Kn=w.value)==null?void 0:Kn.name),1),j.value&&k.value?(nt(),In("div",Zee,[F(Mt,{type:"info",class:"ml-16 color-secondary"},{default:U(()=>[Tt(We(je.$t("views.applicationWorkflow.info.previewVersion"))+" "+We(B.value.name||Jr(X1)(B.value.updateTime)),1)]),_:1})])):A.value?(nt(),Yt(Mt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:U(()=>[Tt(We(je.$t("views.applicationWorkflow.info.saveTime"))+We(Jr(X1)(A.value)),1)]),_:1})):vr("",!0)]),j.value&&k.value?(nt(),In("div",Jee,[F(Xt,{type:"primary",class:"mr-8",onClick:at[0]||(at[0]=$n=>ee())},{default:U(()=>[Tt(We(je.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),F(De,{direction:"vertical"}),F(Xt,{text:"",onClick:G},{default:U(()=>[F(Ae,null,{default:U(()=>[F(ge)]),_:1})]),_:1})])):(nt(),In("div",Qee,[F(Xt,{icon:"Plus",onClick:at[1]||(at[1]=$n=>O.value=!O.value)},{default:U(()=>[Tt(We(je.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),F(Xt,{onClick:Be,disabled:S.value},{default:U(()=>[F(ht,{iconName:"app-play-outlined",class:"mr-4"}),Tt(" "+We(je.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),F(Xt,{onClick:at[2]||(at[2]=$n=>ve(!0))},{default:U(()=>[F(ht,{iconName:"app-save-outlined",class:"mr-4"}),Tt(" "+We(je.$t("common.save")),1)]),_:1}),F(Xt,{type:"primary",onClick:ze},{default:U(()=>[Tt(We(je.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),F(Tn,{trigger:"click"},{dropdown:U(()=>[F(yn,null,{default:U(()=>[F(Ot,{onClick:Y},{default:U(()=>[F(ht,{iconName:"app-history-outlined"}),Tt(" "+We(je.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),F(Ot,null,{default:U(()=>[F(ht,{iconName:"app-save-outlined"}),Tt(" "+We(je.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),me("div",ete,[F(rn,{size:"small",modelValue:R.value,"onUpdate:modelValue":at[4]||(at[4]=$n=>R.value=$n),onChange:H},null,8,["modelValue"])])]),_:1})]),_:1})]),default:U(()=>[F(Xt,{text:"",onClick:at[3]||(at[3]=Sn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:U(()=>[F(Ae,{class:"rotate-90"},{default:U(()=>[F(Wt)]),_:1})]),_:1})]),_:1})]))]),F(pn,null,{default:U(()=>[Nl(F(y2,{show:O.value,id:Jr(c),onClickNodes:se,onOnmousedown:Re,workflowRef:h.value},null,8,["show","id","workflowRef"]),[[Fe,Se]])]),_:1}),me("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[w.value?(nt(),Yt(Fee,{key:0,ref_key:"workflowRef",ref:h,data:(ne=w.value)==null?void 0:ne.workFlow},null,8,["data"])):vr("",!0)],512),F(pn,null,{default:U(()=>{var $n,xr,Ur,no;return[S.value?(nt(),In("div",{key:0,class:kd(["workflow-debug-container",P.value?"enlarge":""])},[me("div",{class:kd(["workflow-debug-header",s.value?"":"custom-header"])},[me("div",tte,[me("div",nte,[me("div",rte,[Jr(ZI)(($n=w.value)==null?void 0:$n.icon)?(nt(),Yt(ft,{key:0,shape:"square",size:32,style:{background:"none"}},{default:U(()=>{var Dn;return[me("img",{src:(Dn=w.value)==null?void 0:Dn.icon,alt:""},null,8,ote)]}),_:1})):(xr=w.value)!=null&&xr.name?(nt(),Yt(ft,{key:1,name:(Ur=w.value)==null?void 0:Ur.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):vr("",!0)]),me("h4",null,We(((no=w.value)==null?void 0:no.name)||je.$t("views.application.applicationForm.form.appName.label")),1)]),me("div",ite,[F(Xt,{link:"",onClick:at[5]||(at[5]=Dn=>P.value=!P.value)},{default:U(()=>[F(ht,{iconName:P.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),F(Xt,{link:"",onClick:at[6]||(at[6]=Dn=>S.value=!1)},{default:U(()=>[F(Ae,{size:20,class:"color-secondary"},{default:U(()=>[F(ge)]),_:1})]),_:1})])])],2),me("div",ate,[F(On,{"application-details":w.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):vr("",!0)]}),_:1}),j.value?Nl((nt(),Yt(Xee,{key:0,onClick:J,onRefreshVersion:ee},null,512)),[[Fe,W]]):vr("",!0)])),[[mn,b.value]])}}});export{gte as default};
