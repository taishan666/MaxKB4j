import{cp as M,dA as A,cq as d,cZ as a,cu as m,cx as E,cF as k,cA as i,cz as l,cB as u,cJ as c,cK as w,cH as P,dQ as V,dn as R}from"./index-27b17fb7.js";const U={class:"mb-24"},L={class:"mb-24"},T={class:"mb-24"},Z={class:"mb-24"},B={class:"mb-24"},N={class:"mb-24"},S={class:"flex-between w-full"},D={class:"operate-container mt-12"},J=M({__name:"index",setup(x){const _=A(),r=d({username:"",password:"",rePassword:"",email:"",code:""}),F=d({username:[{required:!0,message:a("views.user.userForm.form.username.placeholder"),trigger:"blur"},{min:6,max:20,message:a("views.user.userForm.form.username.lengthMessage"),trigger:"blur"}],password:[{required:!0,message:a("views.user.userForm.form.password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:a("views.user.userForm.form.password.lengthMessage"),trigger:"blur"}],rePassword:[{required:!0,message:a("views.user.userForm.form.re_password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:a("views.user.userForm.form.password.lengthMessage"),trigger:"blur"},{validator:(e,s,o)=>{r.value.password!=r.value.rePassword?o(new Error(a("views.user.userForm.form.password.validatorMessage"))):o()},trigger:"blur"}],email:[{required:!0,message:a("views.user.userForm.form.email.requiredMessage"),trigger:"blur"},{validator:(e,s,o)=>{!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(s)&&s!=""?o(new Error(a("views.user.userForm.form.email.validatorEmail"))):o()},trigger:"blur"}],code:[{required:!0,message:a("views.login.verificationCode.placeholder")}]}),v=d(),C=()=>{var e;(e=v.value)==null||e.validate().then(()=>V.register(r.value)).then(()=>{_.push("login")})},h=d(!1),p=d(!1),g=d(60),$=()=>{var e;(e=v.value)==null||e.validateField("email",s=>{s&&V.sendEmit(r.value.email,"register",h).then(()=>{R(a("views.login.verificationCode.successMessage")),p.value=!0,b()})})},b=()=>{g.value<=0?(p.value=!1,g.value=60):setTimeout(()=>{g.value--,b()},1e3)};return(e,s)=>{const o=m("el-input"),n=m("el-form-item"),f=m("el-button"),z=m("el-form"),y=m("LoginContainer"),q=m("login-layout");return E(),k(q,null,{default:i(()=>[l(y,{subTitle:e.$t("views.system.theme.defaultSlogan")},{default:i(()=>[u("h2",U,c(e.$t("views.login.userRegister")),1),l(z,{class:"register-form",model:r.value,rules:F.value,ref_key:"registerFormRef",ref:v},{default:i(()=>[u("div",L,[l(n,{prop:"username"},{default:i(()=>[l(o,{size:"large",class:"input-item",modelValue:r.value.username,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.username=t),placeholder:e.$t("views.user.userForm.form.username.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),u("div",T,[l(n,{prop:"password"},{default:i(()=>[l(o,{type:"password",size:"large",class:"input-item",modelValue:r.value.password,"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.password=t),placeholder:e.$t("views.user.userForm.form.password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})]),u("div",Z,[l(n,{prop:"rePassword"},{default:i(()=>[l(o,{type:"password",size:"large",class:"input-item",modelValue:r.value.rePassword,"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.rePassword=t),placeholder:e.$t("views.user.userForm.form.re_password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})]),u("div",B,[l(n,{prop:"email"},{default:i(()=>[l(o,{size:"large",class:"input-item",modelValue:r.value.email,"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.email=t),placeholder:e.$t("views.user.userForm.form.email.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),u("div",N,[l(n,{prop:"code"},{default:i(()=>[u("div",S,[l(o,{size:"large",class:"code-input",modelValue:r.value.code,"onUpdate:modelValue":s[4]||(s[4]=t=>r.value.code=t),placeholder:e.$t("views.login.verificationCode.placeholder")},null,8,["modelValue","placeholder"]),l(f,{disabled:p.value,size:"large",class:"send-email-button ml-12",onClick:$,loading:h.value},{default:i(()=>[w(c(p.value?`${e.$t("views.login.verificationCode.resend")}（${g.value}s）`:e.$t("views.login.verificationCode.getVerificationCode")),1)]),_:1},8,["disabled","loading"])])]),_:1})])]),_:1},8,["model","rules"]),l(f,{size:"large",type:"primary",class:"w-full",onClick:C},{default:i(()=>[w(c(e.$t("views.login.buttons.register")),1)]),_:1}),u("div",D,[l(f,{class:"register",onClick:s[5]||(s[5]=t=>P(_).push("/login")),link:"",type:"primary",icon:"ArrowLeft"},{default:i(()=>[w(c(e.$t("views.login.buttons.backLogin")),1)]),_:1})])]),_:1},8,["subTitle"])]),_:1})}}});export{J as default};
