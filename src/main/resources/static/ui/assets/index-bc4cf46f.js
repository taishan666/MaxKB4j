import{dV as C,dW as B,dX as D,cp as L,cq as f,d6 as N,cZ as r,ct as T,cu as d,cU as F,cx as b,cF as H,cA as o,cB as V,cz as a,cv as R,cy as A,cK as _,cJ as v,dn as $,cR as J}from"./index-27b17fb7.js";const h="/email_setting",M=u=>C(`${h}`,void 0,u),z=(u,e)=>B(`${h}`,u,void 0,e),I=(u,e)=>D(`${h}`,u,void 0,e),g={getEmailSetting:M,postTestEmail:z,putEmailSetting:I},K={class:"email-setting main-calc-height"},O={class:"p-24"},W={class:"text-right"},X=L({__name:"index",setup(u){const e=f({email_host:"",email_port:"",email_host_user:"",email_host_password:"",email_use_tls:!1,email_use_ssl:!1,from_email:""}),c=f(),n=f(!1),P=N({email_host:[{required:!0,message:r("views.system.email.smtpHostPlaceholder"),trigger:"blur"}],email_port:[{required:!0,message:r("views.system.email.smtpPortPlaceholder"),trigger:"blur"}],email_host_user:[{required:!0,message:r("views.system.email.smtpUserPlaceholder"),trigger:"blur"}],email_host_password:[{required:!0,message:r("views.system.email.smtpPasswordPlaceholder"),trigger:"blur"}],from_email:[{required:!0,message:r("views.system.email.sendEmailPlaceholder"),trigger:"blur"}]}),w=async(l,s)=>{l&&await l.validate((m,i)=>{m&&(s?g.postTestEmail(e.value,n).then(p=>{$(r("views.system.testSuccess"))}):g.putEmailSetting(e.value,n).then(p=>{$(r("common.saveSuccess"))}))})};function S(){g.getEmailSetting(n).then(l=>{l.data&&JSON.stringify(l.data)!=="{}"&&(e.value=l.data)})}return T(()=>{S()}),(l,s)=>{const m=d("el-input"),i=d("el-form-item"),p=d("el-checkbox"),y=d("el-button"),U=d("el-form"),k=d("el-scrollbar"),E=d("LayoutContainer"),q=F("loading");return b(),H(E,{header:l.$t("views.system.email.title")},{default:o(()=>[V("div",K,[a(k,null,{default:o(()=>[R((b(),A("div",O,[a(U,{ref_key:"emailFormRef",ref:c,rules:P,model:e.value,"label-position":"top","require-asterisk-position":"right"},{default:o(()=>[a(i,{label:l.$t("views.system.email.smtpHost"),prop:"email_host"},{default:o(()=>[a(m,{modelValue:e.value.email_host,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.email_host=t),placeholder:l.$t("views.system.email.smtpHostPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:l.$t("views.system.email.smtpPort"),prop:"email_port"},{default:o(()=>[a(m,{modelValue:e.value.email_port,"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.email_port=t),placeholder:l.$t("views.system.email.smtpPortPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:l.$t("views.system.email.smtpUser"),prop:"email_host_user"},{default:o(()=>[a(m,{modelValue:e.value.email_host_user,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.email_host_user=t),placeholder:l.$t("views.system.email.smtpUserPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:l.$t("views.system.email.sendEmail"),prop:"from_email"},{default:o(()=>[a(m,{modelValue:e.value.from_email,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.from_email=t),placeholder:l.$t("views.system.email.sendEmailPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:l.$t("views.system.password"),prop:"email_host_password"},{default:o(()=>[a(m,{modelValue:e.value.email_host_password,"onUpdate:modelValue":s[4]||(s[4]=t=>e.value.email_host_password=t),placeholder:l.$t("views.system.email.smtpPasswordPlaceholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,null,{default:o(()=>[a(p,{modelValue:e.value.email_use_ssl,"onUpdate:modelValue":s[5]||(s[5]=t=>e.value.email_use_ssl=t)},{default:o(()=>[_(v(l.$t("views.system.email.enableSSL")),1)]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(p,{modelValue:e.value.email_use_tls,"onUpdate:modelValue":s[6]||(s[6]=t=>e.value.email_use_tls=t)},{default:o(()=>[_(v(l.$t("views.system.email.enableTLS")),1)]),_:1},8,["modelValue"])]),_:1}),a(y,{onClick:s[7]||(s[7]=t=>w(c.value,"test")),disabled:n.value},{default:o(()=>[_(v(l.$t("views.system.test")),1)]),_:1},8,["disabled"])]),_:1},8,["rules","model"]),V("div",W,[a(y,{onClick:s[8]||(s[8]=t=>w(c.value)),type:"primary",disabled:n.value},{default:o(()=>[_(v(l.$t("common.save")),1)]),_:1},8,["disabled"])])])),[[q,n.value]])]),_:1})])]),_:1},8,["header"])}}});const j=J(X,[["__scopeId","data-v-53e2ef7d"]]);export{j as default};
