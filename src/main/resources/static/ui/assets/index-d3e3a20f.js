var Nj=Object.defineProperty;var kj=(e,t,n)=>t in e?Nj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ea=(e,t,n)=>(kj(e,typeof t!="symbol"?t+"":t,n),n);import{aK as _v,aL as ys,aM as Ir,aN as wS,aO as Fd,aP as Uy,aQ as Sf,aR as Yp,aS as mM,aT as Lu,aU as Gu,ah as fi,aV as Rj,aW as dc,aX as Nw,aY as Dj,aZ as Gy,a_ as Fu,a$ as Vy,b0 as Cj,b1 as Mv,b2 as ob,aF as Vu,b3 as jj,b4 as qp,b5 as gM,b6 as Kp,b7 as $d,z as kw,b8 as Qr,b9 as ib,ba as Wy,bb as ms,bc as Ro,bd as Ef,be as pc,bf as Pv,bg as zy,bh as _s,bi as Sa,bj as qr,bk as ab,bl as Ij,bm as bM,bn as Af,bo as _M,bp as wM,bq as H1,br as ea,ai as $u,bs as Lj,bt as Fj,bu as lb,bv as EM,bw as Zp,bx as OM,ac as Rw,by as Nv,A as kv,bz as Ry,bA as Hy,af as xM,bB as SM,bC as $j,bD as wv,bE as Bj,bF as AM,bG as TM,bH as Uj,bI as MM,bJ as Gj,bK as Vj,bL as Wj,bM as zj,bN as Hj,bO as Tg,bP as Xj,bQ as Yj,bR as qj,bS as PM,bT as NM,bU as kM,bV as RM,bW as Dw,bX as Kj,bY as Xy,bZ as DM,b_ as Zj,b$ as CM,c0 as jM,c1 as Jj,c2 as Qj,c3 as eI,c4 as Vp,ae as tI,c5 as nI,c6 as rI,aH as oI,c7 as iI,ag as aI,c8 as lI,c9 as uI,ca as sI,cb as cI,ab as fI,aj as dI,cc as pI,aG as hI,cd as vI,ce as yI,cf as mI,cg as gI,ch as bI,ci as _I,aa as wI,cj as EI,ck as OI,ak as xI,cl as SI,p as AI,cm as TI,cn as MI,co as PI,cp as kr,cq as mt,cr as so,cs as NI,ct as xo,cu as re,cv as Ua,cw as Ev,cx as qe,cy as Dn,cz as C,cA as B,cB as he,cC as Yo,cD as Ci,cE as bn,cF as Rt,cG as lv,cH as Jr,cI as uv,cJ as Ue,cK as St,cL as rg,cM as ES,cN as tr,cO as OS,cP as hg,cQ as fa,cR as Yy,cS as Rl,cT as Ye,cU as jd,cV as Dd,cW as kI,cX as IM,cY as Ba,cZ as Zt,c_ as Cw,c$ as Xo,d0 as RI,d1 as hc,d2 as Bd,d3 as jw,d4 as Cd,d5 as Iw,T as DI,d6 as Lw,d7 as Ov,d8 as CI,d9 as jI,da as LM,db as II,dc as FM,dd as LI,de as FI,df as $I,dg as BI,dh as UI,di as $M,dj as Fw,dk as GI,dl as X1,dm as VI,dn as Wp,dp as Of,dq as WI,dr as zI,ds as xS,dt as h1,du as SS,dv as HI,dw as XI,Q as my,dx as YI,dy as BM,dz as Y1,dA as qI,dB as v1,dC as KI,dD as ZI}from"./index-ba87ae2c.js";import{A as qy,_ as JI,T as UM,a as QI,b as eL}from"./ReasoningParamSettingDialog.vue_vue_type_style_index_0_scope_true_lang-008f2e65.js";import{b as GM,c as Jp,v as Rv,d as tL,e as nL,g as VM,f as AS,a as rL,r as oL,h as iL}from"./reduce-543b0deb.js";import{h as aL,i as WM,j as lL,k as uL,l as sL,n as cL,o as fL,p as dL,q as pL,z as hL,f as vL,s as yL,a as mL,m as gL,b as bL,d as _L,e as wL,g as EL,c as OL,r as xL,u as SL}from"./zipObject-47615240.js";import{_ as AL}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-f5b83473.js";var TL=0/0;function TS(e){return typeof e=="number"?e:_v(e)?TL:+e}function ub(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=ys(n),o=ys(o)):(n=TS(n),o=TS(o)),r=e(n,o)}return r}}var ML=ub(function(e,t){return e+t},0);const PL=ML;var NL="Expected a function";function kL(e,t){if(typeof t!="function")throw new TypeError(NL);return e=Ir(e),function(){if(--e<1)return t.apply(this,arguments)}}var RL=wS&&new wS;const Mg=RL;var DL=Mg?function(e,t){return Mg.set(e,t),e}:Fd;const zM=DL;function Dy(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Uy(e.prototype),o=e.apply(n,t);return Sf(o)?o:n}}var CL=1;function jL(e,t,n){var o=t&CL,r=Dy(e);function s(){var c=this&&this!==Yp&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var IL=Math.max;function HM(e,t,n,o){for(var r=-1,s=e.length,c=n.length,h=-1,v=t.length,g=IL(s-c,0),b=Array(v+g),w=!o;++h<v;)b[h]=t[h];for(;++r<c;)(w||r<s)&&(b[n[r]]=e[r]);for(;g--;)b[h++]=e[r++];return b}var LL=Math.max;function XM(e,t,n,o){for(var r=-1,s=e.length,c=-1,h=n.length,v=-1,g=t.length,b=LL(s-h,0),w=Array(b+g),O=!o;++r<b;)w[r]=e[r];for(var S=r;++v<g;)w[S+v]=t[v];for(;++c<h;)(O||r<s)&&(w[S+n[c]]=e[r++]);return w}function FL(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function sb(){}var $L=4294967295;function Yr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$L,this.__views__=[]}Yr.prototype=Uy(sb.prototype);Yr.prototype.constructor=Yr;var BL=Mg?function(e){return Mg.get(e)}:mM;const $w=BL;var UL={};const dv=UL;var GL=Object.prototype,VL=GL.hasOwnProperty;function vg(e){for(var t=e.name+"",n=dv[t],o=VL.call(dv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function Bu(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Bu.prototype=Uy(sb.prototype);Bu.prototype.constructor=Bu;function YM(e){if(e instanceof Yr)return e.clone();var t=new Bu(e.__wrapped__,e.__chain__);return t.__actions__=Lu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var WL=Object.prototype,zL=WL.hasOwnProperty;function ae(e){if(Gu(e)&&!fi(e)&&!(e instanceof Yr)){if(e instanceof Bu)return e;if(zL.call(e,"__wrapped__"))return YM(e)}return new Bu(e)}ae.prototype=sb.prototype;ae.prototype.constructor=ae;function q1(e){var t=vg(e),n=ae[t];if(typeof n!="function"||!(t in Yr.prototype))return!1;if(e===n)return!0;var o=$w(n);return!!o&&e===o[0]}var HL=Rj(zM);const qM=HL;var XL=/\{\n\/\* \[wrapped with (.+)\] \*/,YL=/,? & /;function qL(e){var t=e.match(XL);return t?t[1].split(YL):[]}var KL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ZL(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(KL,`{
/* [wrapped with `+t+`] */
`)}var JL=1,QL=2,e3=8,t3=16,n3=32,r3=64,o3=128,i3=256,a3=512,l3=[["ary",o3],["bind",JL],["bindKey",QL],["curry",e3],["curryRight",t3],["flip",a3],["partial",n3],["partialRight",r3],["rearg",i3]];function u3(e,t){return dc(l3,function(n){var o="_."+n[0];t&n[1]&&!Nw(e,o)&&e.push(o)}),e.sort()}function KM(e,t,n){var o=t+"";return Dj(e,ZL(o,u3(qL(o),n)))}var s3=1,c3=2,f3=4,d3=8,MS=32,PS=64;function ZM(e,t,n,o,r,s,c,h,v,g){var b=t&d3,w=b?c:void 0,O=b?void 0:c,S=b?s:void 0,P=b?void 0:s;t|=b?MS:PS,t&=~(b?PS:MS),t&f3||(t&=~(s3|c3));var A=[e,t,r,S,w,P,O,h,v,g],k=n.apply(void 0,A);return q1(e)&&qM(k,A),k.placeholder=o,KM(k,e,t)}function Dv(e){var t=e;return t.placeholder}var p3=Math.min;function h3(e,t){for(var n=e.length,o=p3(t.length,n),r=Lu(e);o--;){var s=t[o];e[o]=Gy(s,n)?r[s]:void 0}return e}var NS="__lodash_placeholder__";function Id(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===NS)&&(e[n]=NS,s[r++]=n)}return s}var v3=1,y3=2,m3=8,g3=16,b3=128,_3=512;function cb(e,t,n,o,r,s,c,h,v,g){var b=t&b3,w=t&v3,O=t&y3,S=t&(m3|g3),P=t&_3,A=O?void 0:Dy(e);function k(){for(var j=arguments.length,R=Array(j),$=j;$--;)R[$]=arguments[$];if(S)var V=Dv(k),H=FL(R,V);if(o&&(R=HM(R,o,r,S)),s&&(R=XM(R,s,c,S)),j-=H,S&&j<g){var Y=Id(R,V);return ZM(e,t,cb,k.placeholder,n,R,Y,h,v,g-j)}var Q=w?n:this,W=O?Q[e]:e;return j=R.length,h?R=h3(R,h):P&&j>1&&R.reverse(),b&&v<j&&(R.length=v),this&&this!==Yp&&this instanceof k&&(W=A||Dy(W)),W.apply(Q,R)}return k}function w3(e,t,n){var o=Dy(e);function r(){for(var s=arguments.length,c=Array(s),h=s,v=Dv(r);h--;)c[h]=arguments[h];var g=s<3&&c[0]!==v&&c[s-1]!==v?[]:Id(c,v);if(s-=g.length,s<n)return ZM(e,t,cb,r.placeholder,void 0,c,g,void 0,void 0,n-s);var b=this&&this!==Yp&&this instanceof r?o:e;return Fu(b,this,c)}return r}var E3=1;function O3(e,t,n,o){var r=t&E3,s=Dy(e);function c(){for(var h=-1,v=arguments.length,g=-1,b=o.length,w=Array(b+v),O=this&&this!==Yp&&this instanceof c?s:e;++g<b;)w[g]=o[g];for(;v--;)w[g++]=arguments[++h];return Fu(O,r?n:this,w)}return c}var kS="__lodash_placeholder__",y1=1,x3=2,S3=4,RS=8,dy=128,DS=256,A3=Math.min;function T3(e,t){var n=e[1],o=t[1],r=n|o,s=r<(y1|x3|dy),c=o==dy&&n==RS||o==dy&&n==DS&&e[7].length<=t[8]||o==(dy|DS)&&t[7].length<=t[8]&&n==RS;if(!(s||c))return e;o&y1&&(e[2]=t[2],r|=n&y1?0:S3);var h=t[3];if(h){var v=e[3];e[3]=v?HM(v,h,t[4]):h,e[4]=v?Id(e[3],kS):t[4]}return h=t[5],h&&(v=e[5],e[5]=v?XM(v,h,t[6]):h,e[6]=v?Id(e[5],kS):t[6]),h=t[7],h&&(e[7]=h),o&dy&&(e[8]=e[8]==null?t[8]:A3(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var M3="Expected a function",CS=1,P3=2,m1=8,g1=16,b1=32,jS=64,IS=Math.max;function Pf(e,t,n,o,r,s,c,h){var v=t&P3;if(!v&&typeof e!="function")throw new TypeError(M3);var g=o?o.length:0;if(g||(t&=~(b1|jS),o=r=void 0),c=c===void 0?c:IS(Ir(c),0),h=h===void 0?h:Ir(h),g-=r?r.length:0,t&jS){var b=o,w=r;o=r=void 0}var O=v?void 0:$w(e),S=[e,t,n,o,r,b,w,s,c,h];if(O&&T3(S,O),e=S[0],t=S[1],n=S[2],o=S[3],r=S[4],h=S[9]=S[9]===void 0?v?0:e.length:IS(S[9]-g,0),!h&&t&(m1|g1)&&(t&=~(m1|g1)),!t||t==CS)var P=jL(e,t,n);else t==m1||t==g1?P=w3(e,t,h):(t==b1||t==(CS|b1))&&!r.length?P=O3(e,t,n,o):P=cb.apply(void 0,S);var A=O?zM:qM;return KM(A(P,S),e,t)}var N3=128;function JM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Pf(e,N3,void 0,void 0,void 0,void 0,t)}var k3=Object.prototype,R3=k3.hasOwnProperty,D3=Vy(function(e,t){if(Cj(t)||Mv(t)){ob(t,Vu(t),e);return}for(var n in t)R3.call(t,n)&&jj(e,n,t[n])});const C3=D3;var j3=Vy(function(e,t){ob(t,qp(t),e)});const LS=j3;var I3=Vy(function(e,t,n,o){ob(t,qp(t),e,o)});const Pg=I3;var L3=Vy(function(e,t,n,o){ob(t,Vu(t),e,o)});const F3=L3;function Bw(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:gM(e,t[n]);return r}var $3=Kp(Bw);const B3=$3;var U3="[object DOMException]",G3="[object Error]";function Uw(e){if(!Gu(e))return!1;var t=$d(e);return t==G3||t==U3||typeof e.message=="string"&&typeof e.name=="string"&&!kw(e)}var V3=Qr(function(e,t){try{return Fu(e,void 0,t)}catch(n){return Uw(n)?n:new Error(n)}});const QM=V3;var W3="Expected a function";function eP(e,t){var n;if(typeof t!="function")throw new TypeError(W3);return e=Ir(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var z3=1,H3=32,Gw=Qr(function(e,t,n){var o=z3;if(n.length){var r=Id(n,Dv(Gw));o|=H3}return Pf(e,o,t,n,r)});Gw.placeholder={};const tP=Gw;var X3=Kp(function(e,t){return dc(t,function(n){n=ib(n),Wy(e,n,tP(e[n],e))}),e});const Y3=X3;var q3=1,K3=2,Z3=32,Vw=Qr(function(e,t,n){var o=q3|K3;if(n.length){var r=Id(n,Dv(Vw));o|=Z3}return Pf(t,o,e,n,r)});Vw.placeholder={};const J3=Vw;function Ud(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:ms(e,t,n)}var Q3="\\ud800-\\udfff",e8="\\u0300-\\u036f",t8="\\ufe20-\\ufe2f",n8="\\u20d0-\\u20ff",r8=e8+t8+n8,o8="\\ufe0e\\ufe0f",i8="\\u200d",a8=RegExp("["+i8+Q3+r8+o8+"]");function Cv(e){return a8.test(e)}function l8(e){return e.split("")}var nP="\\ud800-\\udfff",u8="\\u0300-\\u036f",s8="\\ufe20-\\ufe2f",c8="\\u20d0-\\u20ff",f8=u8+s8+c8,d8="\\ufe0e\\ufe0f",p8="["+nP+"]",K1="["+f8+"]",Z1="\\ud83c[\\udffb-\\udfff]",h8="(?:"+K1+"|"+Z1+")",rP="[^"+nP+"]",oP="(?:\\ud83c[\\udde6-\\uddff]){2}",iP="[\\ud800-\\udbff][\\udc00-\\udfff]",v8="\\u200d",aP=h8+"?",lP="["+d8+"]?",y8="(?:"+v8+"(?:"+[rP,oP,iP].join("|")+")"+lP+aP+")*",m8=lP+aP+y8,g8="(?:"+[rP+K1+"?",K1,oP,iP,p8].join("|")+")",b8=RegExp(Z1+"(?="+Z1+")|"+g8+m8,"g");function _8(e){return e.match(b8)||[]}function gs(e){return Cv(e)?_8(e):l8(e)}function uP(e){return function(t){t=Ro(t);var n=Cv(t)?gs(t):void 0,o=n?n[0]:t.charAt(0),r=n?Ud(n,1).join(""):t.slice(1);return o[e]()+r}}var w8=uP("toUpperCase");const Ww=w8;function sP(e){return Ww(Ro(e).toLowerCase())}function zw(e){return function(t){return e==null?void 0:e[t]}}var E8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},O8=zw(E8);const x8=O8;var S8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,A8="\\u0300-\\u036f",T8="\\ufe20-\\ufe2f",M8="\\u20d0-\\u20ff",P8=A8+T8+M8,N8="["+P8+"]",k8=RegExp(N8,"g");function cP(e){return e=Ro(e),e&&e.replace(S8,x8).replace(k8,"")}var R8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function D8(e){return e.match(R8)||[]}var C8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function j8(e){return C8.test(e)}var fP="\\ud800-\\udfff",I8="\\u0300-\\u036f",L8="\\ufe20-\\ufe2f",F8="\\u20d0-\\u20ff",$8=I8+L8+F8,dP="\\u2700-\\u27bf",pP="a-z\\xdf-\\xf6\\xf8-\\xff",B8="\\xac\\xb1\\xd7\\xf7",U8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",G8="\\u2000-\\u206f",V8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hP="A-Z\\xc0-\\xd6\\xd8-\\xde",W8="\\ufe0e\\ufe0f",vP=B8+U8+G8+V8,yP="['’]",FS="["+vP+"]",z8="["+$8+"]",mP="\\d+",H8="["+dP+"]",gP="["+pP+"]",bP="[^"+fP+vP+mP+dP+pP+hP+"]",X8="\\ud83c[\\udffb-\\udfff]",Y8="(?:"+z8+"|"+X8+")",q8="[^"+fP+"]",_P="(?:\\ud83c[\\udde6-\\uddff]){2}",wP="[\\ud800-\\udbff][\\udc00-\\udfff]",tv="["+hP+"]",K8="\\u200d",$S="(?:"+gP+"|"+bP+")",Z8="(?:"+tv+"|"+bP+")",BS="(?:"+yP+"(?:d|ll|m|re|s|t|ve))?",US="(?:"+yP+"(?:D|LL|M|RE|S|T|VE))?",EP=Y8+"?",OP="["+W8+"]?",J8="(?:"+K8+"(?:"+[q8,_P,wP].join("|")+")"+OP+EP+")*",Q8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tF=OP+EP+J8,nF="(?:"+[H8,_P,wP].join("|")+")"+tF,rF=RegExp([tv+"?"+gP+"+"+BS+"(?="+[FS,tv,"$"].join("|")+")",Z8+"+"+US+"(?="+[FS,tv+$S,"$"].join("|")+")",tv+"?"+$S+"+"+BS,tv+"+"+US,eF,Q8,mP,nF].join("|"),"g");function oF(e){return e.match(rF)||[]}function xP(e,t,n){return e=Ro(e),t=n?void 0:t,t===void 0?j8(e)?oF(e):D8(e):e.match(t)||[]}var iF="['’]",aF=RegExp(iF,"g");function jv(e){return function(t){return GM(xP(cP(t).replace(aF,"")),e,"")}}var lF=jv(function(e,t,n){return t=t.toLowerCase(),e+(n?sP(t):t)});const uF=lF;var sF=Yp.isFinite,cF=Math.min;function Hw(e){var t=Math[e];return function(n,o){if(n=Ef(n),o=o==null?0:cF(Ir(o),292),o&&sF(n)){var r=(Ro(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(Ro(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var fF=Hw("ceil");const dF=fF;function SP(e){var t=ae(e);return t.__chain__=!0,t}var pF=Math.ceil,hF=Math.max;function vF(e,t,n){(n?pc(e,t,n):t===void 0)?t=1:t=hF(Ir(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(pF(o/t));r<o;)c[s++]=ms(e,r,r+=t);return c}function Qp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function yF(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Ef(n),n=n===n?n:0),t!==void 0&&(t=Ef(t),t=t===t?t:0),Qp(Ef(e),t,n)}var mF=1,gF=4;function bF(e,t){return t=typeof t=="function"?t:void 0,Pv(e,mF|gF,t)}var _F=4;function wF(e,t){return t=typeof t=="function"?t:void 0,Pv(e,_F,t)}function EF(){return new Bu(this.value(),this.__chain__)}function OF(e){for(var t=-1,n=e==null?0:e.length,o=0,r=[];++t<n;){var s=e[t];s&&(r[o++]=s)}return r}function xF(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return zy(fi(n)?Lu(n):[n],_s(t,1))}var SF="Expected a function";function AF(e){var t=e==null?0:e.length,n=qr;return e=t?Sa(e,function(o){if(typeof o[1]!="function")throw new TypeError(SF);return[n(o[0]),o[1]]}):[],Qr(function(o){for(var r=-1;++r<t;){var s=e[r];if(Fu(s[0],this,o))return Fu(s[1],this,o)}})}function AP(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function TF(e){var t=Vu(e);return function(n){return AP(n,e,t)}}var MF=1;function PF(e){return TF(Pv(e,MF))}function NF(e,t){return t==null||AP(e,t,Vu(t))}function kF(e,t,n,o){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(o,c,n(c),e)}return o}function RF(e,t,n,o){return ab(e,function(r,s,c){t(o,r,n(r),c)}),o}function fb(e,t){return function(n,o){var r=fi(n)?kF:RF,s=t?t():{};return r(n,e,qr(o),s)}}var DF=Object.prototype,CF=DF.hasOwnProperty,jF=fb(function(e,t,n){CF.call(e,n)?++e[n]:Wy(e,n,1)});const IF=jF;function LF(e,t){var n=Uy(e);return t==null?n:Ij(n,t)}var FF=8;function Xw(e,t,n){t=n?void 0:t;var o=Pf(e,FF,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Xw.placeholder,o}Xw.placeholder={};var $F=16;function Yw(e,t,n){t=n?void 0:t;var o=Pf(e,$F,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Yw.placeholder,o}Yw.placeholder={};function BF(e,t){return e==null||e!==e?t:e}function TP(e,t,n,o,r,s){return Sf(e)&&Sf(t)&&(s.set(t,e),bM(e,t,void 0,TP,s),s.delete(t)),e}var UF=Vy(function(e,t,n,o){bM(e,t,n,o)});const MP=UF;var GF=Qr(function(e){return e.push(void 0,TP),Fu(MP,void 0,e)});const VF=GF;var WF="Expected a function";function PP(e,t,n){if(typeof e!="function")throw new TypeError(WF);return setTimeout(function(){e.apply(void 0,n)},t)}var zF=Qr(function(e,t){return PP(e,1,t)});const HF=zF;var XF=Qr(function(e,t,n){return PP(e,Ef(t)||0,n)});const YF=XF;var qF=200;function Ky(e,t,n,o){var r=-1,s=Nw,c=!0,h=e.length,v=[],g=t.length;if(!h)return v;n&&(t=Sa(t,Af(n))),o?(s=wM,c=!1):t.length>=qF&&(s=H1,c=!1,t=new _M(t));e:for(;++r<h;){var b=e[r],w=n==null?b:n(b);if(b=o||b!==0?b:0,c&&w===w){for(var O=g;O--;)if(t[O]===w)continue e;v.push(b)}else s(t,w,o)||v.push(b)}return v}var KF=Qr(function(e,t){return ea(e)?Ky(e,_s(t,1,ea,!0)):[]});const ZF=KF;var JF=Qr(function(e,t){var n=$u(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,_s(t,1,ea,!0),qr(n)):[]});const QF=JF;var e4=Qr(function(e,t){var n=$u(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,_s(t,1,ea,!0),void 0,n):[]});const t4=e4;var n4=ub(function(e,t){return e/t},1);const r4=n4;function o4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),ms(e,t<0?0:t,o)):[]}function i4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,ms(e,0,t<0?0:t)):[]}function db(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?ms(e,o?0:s,o?s+1:r):ms(e,o?s+1:0,o?r:s)}function a4(e,t){return e&&e.length?db(e,qr(t),!0,!0):[]}function l4(e,t){return e&&e.length?db(e,qr(t),!0):[]}function u4(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var s4=Lj(!0);const NP=s4;function qw(e,t){return e&&NP(e,t,Vu)}var c4=Fj(qw,!0);const kP=c4;function GS(e,t){var n=fi(e)?u4:kP;return n(e,Jp(t))}function f4(e,t,n){e=Ro(e),t=ys(t);var o=e.length;n=n===void 0?o:Qp(Ir(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function d4(e,t){return Sa(t,function(n){return[n,e[n]]})}function p4(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var h4="[object Map]",v4="[object Set]";function RP(e){return function(t){var n=lb(t);return n==h4?EM(t):n==v4?p4(t):d4(t,e(t))}}var y4=RP(Vu);const VS=y4;var m4=RP(qp);const WS=m4;var g4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b4=zw(g4);const _4=b4;var DP=/[&<>"']/g,w4=RegExp(DP.source);function CP(e){return e=Ro(e),e&&w4.test(e)?e.replace(DP,_4):e}var jP=/[\\^$.*+?()[\]{}|]/g,E4=RegExp(jP.source);function O4(e){return e=Ro(e),e&&E4.test(e)?e.replace(jP,"\\$&"):e}function IP(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function x4(e,t){var n=!0;return ab(e,function(o,r,s){return n=!!t(o,r,s),n}),n}function S4(e,t,n){var o=fi(e)?IP:x4;return n&&pc(e,t,n)&&(t=void 0),o(e,qr(t))}var A4=4294967295;function LP(e){return e?Qp(Ir(e),0,A4):0}function T4(e,t,n,o){var r=e.length;for(n=Ir(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:Ir(o),o<0&&(o+=r),o=n>o?0:LP(o);n<o;)e[n++]=t;return e}function M4(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&pc(e,t,n)&&(n=0,o=r),T4(e,t,n,o)):[]}function FP(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function P4(e,t){return FP(e,qr(t),Zp)}var N4=aL(OM);const k4=N4;function R4(e,t){return FP(e,qr(t),qw)}function zS(e){return e&&e.length?e[0]:void 0}var D4=1/0;function C4(e,t){return _s(Rw(e,t),D4)}function j4(e,t,n){return n=n===void 0?1:Ir(n),_s(Rw(e,t),n)}function I4(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Ir(t),_s(e,t)):[]}var L4=512;function F4(e){return Pf(e,L4)}var $4=Hw("floor");const B4=$4;var U4="Expected a function",G4=8,V4=32,W4=128,z4=256;function $P(e){return Kp(function(t){var n=t.length,o=n,r=Bu.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(U4);if(r&&!c&&vg(s)=="wrapper")var c=new Bu([],!0)}for(o=c?o:n;++o<n;){s=t[o];var h=vg(s),v=h=="wrapper"?$w(s):void 0;v&&q1(v[0])&&v[1]==(W4|G4|V4|z4)&&!v[4].length&&v[9]==1?c=c[vg(v[0])].apply(c,v[3]):c=s.length==1&&q1(s)?c[h]():c.thru(s)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&fi(b))return c.plant(b).value();for(var w=0,O=n?t[w].apply(this,g):b;++w<n;)O=t[w].call(this,O);return O}})}var H4=$P();const X4=H4;var Y4=$P(!0);const q4=Y4;function K4(e,t){return e==null?e:NP(e,Jp(t),qp)}function Z4(e,t){return e&&qw(e,Jp(t))}function pb(e,t){return Nv(t,function(n){return kv(e[n])})}function J4(e){return e==null?[]:pb(e,Vu(e))}function Q4(e){return e==null?[]:pb(e,qp(e))}var e$=Object.prototype,t$=e$.hasOwnProperty,n$=fb(function(e,t,n){t$.call(e,n)?e[n].push(t):Wy(e,n,[t])});const r$=n$;function hb(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Ef(t),n=Ef(n)),e(t,n)}}var o$=hb(WM);const i$=o$;var a$=hb(function(e,t){return e>=t});const l$=a$;var u$=Math.max,s$=Math.min;function c$(e,t,n){return e>=s$(t,n)&&e<u$(t,n)}function f$(e,t,n){return t=Ry(t),n===void 0?(n=t,t=0):n=Ry(n),e=Ef(e),c$(e,t,n)}var d$="[object String]";function vb(e){return typeof e=="string"||!fi(e)&&Gu(e)&&$d(e)==d$}var p$=Math.max;function h$(e,t,n,o){e=Mv(e)?e:Rv(e),n=n&&!o?Ir(n):0;var r=e.length;return n<0&&(n=p$(r+n,0)),vb(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Hy(e,t,n)>-1}var v$=Math.max;function y$(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Ir(n);return r<0&&(r=v$(o+r,0)),Hy(e,t,r)}function m$(e){var t=e==null?0:e.length;return t?ms(e,0,-1):[]}var g$=Math.min;function Kw(e,t,n){for(var o=n?wM:Nw,r=e[0].length,s=e.length,c=s,h=Array(s),v=1/0,g=[];c--;){var b=e[c];c&&t&&(b=Sa(b,Af(t))),v=g$(b.length,v),h[c]=!n&&(t||r>=120&&b.length>=120)?new _M(c&&b):void 0}b=e[0];var w=-1,O=h[0];e:for(;++w<r&&g.length<v;){var S=b[w],P=t?t(S):S;if(S=n||S!==0?S:0,!(O?H1(O,P):o(g,P,n))){for(c=s;--c;){var A=h[c];if(!(A?H1(A,P):o(e[c],P,n)))continue e}O&&O.push(P),g.push(S)}}return g}function Zw(e){return ea(e)?e:[]}var b$=Qr(function(e){var t=Sa(e,Zw);return t.length&&t[0]===e[0]?Kw(t):[]});const _$=b$;var w$=Qr(function(e){var t=$u(e),n=Sa(e,Zw);return t===$u(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Kw(n,qr(t)):[]});const E$=w$;var O$=Qr(function(e){var t=$u(e),n=Sa(e,Zw);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?Kw(n,void 0,t):[]});const x$=O$;function S$(e,t,n,o){return Zp(e,function(r,s,c){t(o,n(r),s,c)}),o}function BP(e,t){return function(n,o){return S$(n,e,t(o),{})}}var A$=Object.prototype,T$=A$.toString,M$=BP(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=T$.call(t)),e[t]=n},xM(Fd));const P$=M$;var UP=Object.prototype,N$=UP.hasOwnProperty,k$=UP.toString,R$=BP(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=k$.call(t)),N$.call(e,t)?e[t].push(n):e[t]=[n]},qr);const D$=R$;function Zy(e,t,n){t=SM(t,e),e=$j(e,t);var o=e==null?e:e[ib($u(t))];return o==null?void 0:Fu(o,e,n)}var C$=Qr(Zy);const j$=C$;var I$=Qr(function(e,t,n){var o=-1,r=typeof t=="function",s=Mv(e)?Array(e.length):[];return ab(e,function(c){s[++o]=r?Fu(t,c,n):Zy(c,t,n)}),s});const L$=I$;var F$="[object ArrayBuffer]";function $$(e){return Gu(e)&&$d(e)==F$}var HS=wv&&wv.isArrayBuffer,B$=HS?Af(HS):$$;const U$=B$;var G$="[object Boolean]";function V$(e){return e===!0||e===!1||Gu(e)&&$d(e)==G$}var W$="[object Date]";function z$(e){return Gu(e)&&$d(e)==W$}var XS=wv&&wv.isDate,H$=XS?Af(XS):z$;const X$=H$;function Y$(e){return Gu(e)&&e.nodeType===1&&!kw(e)}function q$(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?Bj(e,t,void 0,n):!!o}var K$=Yp.isFinite;function Z$(e){return typeof e=="number"&&K$(e)}function GP(e){return typeof e=="number"&&e==Ir(e)}function J$(e,t){return e===t||AM(e,t,TM(t))}function Q$(e,t,n){return n=typeof n=="function"?n:void 0,AM(e,t,TM(t),n)}var e5="[object Number]";function VP(e){return typeof e=="number"||Gu(e)&&$d(e)==e5}function t5(e){return VP(e)&&e!=+e}var n5=Uj?kv:MM;const r5=n5;var o5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function i5(e){if(r5(e))throw new Error(o5);return Gj(e)}var a5="[object RegExp]";function l5(e){return Gu(e)&&$d(e)==a5}var YS=wv&&wv.isRegExp,u5=YS?Af(YS):l5;const Jw=u5;var qS=9007199254740991;function s5(e){return GP(e)&&e>=-qS&&e<=qS}var c5="[object WeakMap]";function f5(e){return Gu(e)&&lb(e)==c5}var d5="[object WeakSet]";function p5(e){return Gu(e)&&$d(e)==d5}var h5=1;function v5(e){return qr(typeof e=="function"?e:Pv(e,h5))}var y5=Array.prototype,m5=y5.join;function g5(e,t){return e==null?"":m5.call(e,t)}var b5=jv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const _5=b5;var w5=fb(function(e,t,n){Wy(e,n,t)});const E5=w5;function O5(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var x5=Math.max,S5=Math.min;function A5(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=Ir(n),r=r<0?x5(o+r,0):S5(r,o-1)),t===t?O5(e,t,r):Vj(e,Wj,r,!0)}var T5=jv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const M5=T5;var P5=uP("toLowerCase");const N5=P5;var k5=hb(lL);const R5=k5;var D5=hb(function(e,t){return e<=t});const C5=D5;function j5(e,t){var n={};return t=qr(t),Zp(e,function(o,r,s){Wy(n,t(o,r,s),o)}),n}var I5=1;function L5(e){return zj(Pv(e,I5))}var F5=1;function $5(e,t){return Hj(e,Pv(t,F5))}function B5(e,t){return e&&e.length?uL(e,qr(t),WM):void 0}function Qw(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var U5=0/0;function WP(e,t){var n=e==null?0:e.length;return n?Qw(e,t)/n:U5}function G5(e){return WP(e,Fd)}function V5(e,t){return WP(e,qr(t))}var W5=Qr(function(e,t){return function(n){return Zy(n,e,t)}});const z5=W5;var H5=Qr(function(e,t){return function(n){return Zy(e,n,t)}});const X5=H5;function zP(e,t,n){var o=Vu(t),r=pb(t,o),s=!(Sf(n)&&"chain"in n)||!!n.chain,c=kv(e);return dc(r,function(h){var v=t[h];e[h]=v,c&&(e.prototype[h]=function(){var g=this.__chain__;if(s||g){var b=e(this.__wrapped__),w=b.__actions__=Lu(this.__actions__);return w.push({func:v,args:arguments,thisArg:e}),b.__chain__=g,b}return v.apply(e,zy([this.value()],arguments))})}),e}var Y5=ub(function(e,t){return e*t},1);const q5=Y5;var K5="Expected a function";function Jy(e){if(typeof e!="function")throw new TypeError(K5);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Z5(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var J5="[object Map]",Q5="[object Set]",_1=Tg?Tg.iterator:void 0;function HP(e){if(!e)return[];if(Mv(e))return vb(e)?gs(e):Lu(e);if(_1&&e[_1])return Z5(e[_1]());var t=lb(e),n=t==J5?EM:t==Q5?Xj:Rv;return n(e)}function eB(){this.__values__===void 0&&(this.__values__=HP(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function XP(e,t){var n=e.length;if(n)return t+=t<0?n:0,Gy(t,n)?e[t]:void 0}function tB(e,t){return e&&e.length?XP(e,Ir(t)):void 0}function nB(e){return e=Ir(e),Qr(function(t){return XP(t,e)})}function YP(e,t){if(e==null)return{};var n=Sa(Yj(e),function(o){return[o]});return t=qr(t),qj(e,n,function(o,r){return t(o,r[0])})}function rB(e,t){return YP(e,Jy(qr(t)))}function oB(e){return eP(2,e)}function iB(e,t,n,o){return e==null?[]:(fi(t)||(t=t==null?[]:[t]),n=o?void 0:n,fi(n)||(n=n==null?[]:[n]),sL(e,t,n))}function eE(e){return Kp(function(t){return t=Sa(t,Af(qr)),Qr(function(n){var o=this;return e(t,function(r){return Fu(r,o,n)})})})}var aB=eE(Sa);const lB=aB;var uB=Qr;const sB=uB;var cB=Math.min,fB=sB(function(e,t){t=t.length==1&&fi(t[0])?Sa(t[0],Af(qr)):Sa(_s(t,1),Af(qr));var n=t.length;return Qr(function(o){for(var r=-1,s=cB(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Fu(e,this,o)})});const dB=fB;var pB=eE(IP);const hB=pB;var vB=eE(PM);const yB=vB;var mB=9007199254740991,gB=Math.floor;function J1(e,t){var n="";if(!e||t<1||t>mB)return n;do t%2&&(n+=e),t=gB(t/2),t&&(e+=e);while(t);return n}var bB=NM("length");const _B=bB;var qP="\\ud800-\\udfff",wB="\\u0300-\\u036f",EB="\\ufe20-\\ufe2f",OB="\\u20d0-\\u20ff",xB=wB+EB+OB,SB="\\ufe0e\\ufe0f",AB="["+qP+"]",Q1="["+xB+"]",ew="\\ud83c[\\udffb-\\udfff]",TB="(?:"+Q1+"|"+ew+")",KP="[^"+qP+"]",ZP="(?:\\ud83c[\\udde6-\\uddff]){2}",JP="[\\ud800-\\udbff][\\udc00-\\udfff]",MB="\\u200d",QP=TB+"?",e2="["+SB+"]?",PB="(?:"+MB+"(?:"+[KP,ZP,JP].join("|")+")"+e2+QP+")*",NB=e2+QP+PB,kB="(?:"+[KP+Q1+"?",Q1,ZP,JP,AB].join("|")+")",KS=RegExp(ew+"(?="+ew+")|"+kB+NB,"g");function RB(e){for(var t=KS.lastIndex=0;KS.test(e);)++t;return t}function Iv(e){return Cv(e)?RB(e):_B(e)}var DB=Math.ceil;function Ng(e,t){t=t===void 0?" ":ys(t);var n=t.length;if(n<2)return n?J1(t,e):t;var o=J1(t,DB(e/Iv(t)));return Cv(t)?Ud(gs(o),0,e).join(""):o.slice(0,e)}var CB=Math.ceil,jB=Math.floor;function IB(e,t,n){e=Ro(e),t=Ir(t);var o=t?Iv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Ng(jB(r),n)+e+Ng(CB(r),n)}function LB(e,t,n){e=Ro(e),t=Ir(t);var o=t?Iv(e):0;return t&&o<t?e+Ng(t-o,n):e}function FB(e,t,n){e=Ro(e),t=Ir(t);var o=t?Iv(e):0;return t&&o<t?Ng(t-o,n)+e:e}var $B=/^\s+/,BB=Yp.parseInt;function UB(e,t,n){return n||t==null?t=0:t&&(t=+t),BB(Ro(e).replace($B,""),t||0)}var GB=32,tE=Qr(function(e,t){var n=Id(t,Dv(tE));return Pf(e,GB,void 0,t,n)});tE.placeholder={};const t2=tE;var VB=64,nE=Qr(function(e,t){var n=Id(t,Dv(nE));return Pf(e,VB,void 0,t,n)});nE.placeholder={};const WB=nE;var zB=fb(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const HB=zB;function XB(e){for(var t,n=this;n instanceof sb;){var o=YM(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function YB(e){return function(t){return e==null?void 0:kM(e,t)}}function qB(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var KB=Array.prototype,ZS=KB.splice;function rE(e,t,n,o){var r=o?qB:Hy,s=-1,c=t.length,h=e;for(e===t&&(t=Lu(t)),n&&(h=Sa(e,Af(n)));++s<c;)for(var v=0,g=t[s],b=n?n(g):g;(v=r(h,b,v,o))>-1;)h!==e&&ZS.call(h,v,1),ZS.call(e,v,1);return e}function n2(e,t){return e&&e.length&&t&&t.length?rE(e,t):e}var ZB=Qr(n2);const JB=ZB;function QB(e,t,n){return e&&e.length&&t&&t.length?rE(e,t,qr(n)):e}function e6(e,t,n){return e&&e.length&&t&&t.length?rE(e,t,void 0,n):e}var t6=Array.prototype,n6=t6.splice;function r2(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Gy(r)?n6.call(e,r,1):RM(e,r)}}return e}var r6=Kp(function(e,t){var n=e==null?0:e.length,o=Bw(e,t);return r2(e,Sa(t,function(r){return Gy(r,n)?+r:r}).sort(cL)),o});const o6=r6;var i6=Math.floor,a6=Math.random;function oE(e,t){return e+i6(a6()*(t-e+1))}var l6=parseFloat,u6=Math.min,s6=Math.random;function c6(e,t,n){if(n&&typeof n!="boolean"&&pc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Ry(e),t===void 0?(t=e,e=0):t=Ry(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=s6();return u6(e+r*(t-e+l6("1e-"+((r+"").length-1))),t)}return oE(e,t)}var f6=fL(!0);const d6=f6;var p6=256,h6=Kp(function(e,t){return Pf(e,p6,void 0,void 0,void 0,t)});const v6=h6;function y6(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function m6(e,t,n){var o=fi(e)?y6:tL,r=arguments.length<3;return o(e,qr(t),n,r,kP)}function g6(e,t){var n=fi(e)?Nv:nL;return n(e,Jy(qr(t)))}function b6(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=qr(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return r2(e,r),n}function _6(e,t,n){return(n?pc(e,t,n):t===void 0)?t=1:t=Ir(t),J1(Ro(e),t)}function w6(){var e=arguments,t=Ro(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var E6="Expected a function";function O6(e,t){if(typeof e!="function")throw new TypeError(E6);return t=t===void 0?t:Ir(t),Qr(e,t)}function x6(e,t,n){t=SM(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[ib(t[o])];s===void 0&&(o=r,s=n),e=kv(s)?s.call(e):s}return e}var S6=Array.prototype,A6=S6.reverse;function tw(e){return e==null?e:A6.call(e)}var T6=Hw("round");const M6=T6;function o2(e){var t=e.length;return t?e[oE(0,t-1)]:void 0}function P6(e){return o2(Rv(e))}function N6(e){var t=fi(e)?o2:P6;return t(e)}function yb(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=oE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function k6(e,t){return yb(Lu(e),Qp(t,0,e.length))}function R6(e,t){var n=Rv(e);return yb(n,Qp(t,0,n.length))}function D6(e,t,n){(n?pc(e,t,n):t===void 0)?t=1:t=Ir(t);var o=fi(e)?k6:R6;return o(e,t)}function C6(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:Dw(e,t,n,o)}function j6(e){return yb(Lu(e))}function I6(e){return yb(Rv(e))}function L6(e){var t=fi(e)?j6:I6;return t(e)}var F6="[object Map]",$6="[object Set]";function B6(e){if(e==null)return 0;if(Mv(e))return vb(e)?Iv(e):e.length;var t=lb(e);return t==F6||t==$6?e.size:Kj(e).length}function U6(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&pc(e,t,n)?(t=0,n=o):(t=t==null?0:Ir(t),n=n===void 0?o:Ir(n)),ms(e,t,n)):[]}var G6=jv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const V6=G6;function W6(e,t){var n;return ab(e,function(o,r,s){return n=t(o,r,s),!n}),!!n}function z6(e,t,n){var o=fi(e)?PM:W6;return n&&pc(e,t,n)&&(t=void 0),o(e,qr(t))}var H6=4294967295,X6=H6-1,Y6=Math.floor,q6=Math.min;function iE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,h=t===null,v=_v(t),g=t===void 0;r<s;){var b=Y6((r+s)/2),w=n(e[b]),O=w!==void 0,S=w===null,P=w===w,A=_v(w);if(c)var k=o||P;else g?k=P&&(o||O):h?k=P&&O&&(o||!S):v?k=P&&O&&!S&&(o||!A):S||A?k=!1:k=o?w<=t:w<t;k?r=b+1:s=b}return q6(s,X6)}var K6=4294967295,Z6=K6>>>1;function mb(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=Z6){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!_v(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return iE(e,t,Fd,n)}function J6(e,t){return mb(e,t)}function Q6(e,t,n){return iE(e,t,qr(n))}function eU(e,t){var n=e==null?0:e.length;if(n){var o=mb(e,t);if(o<n&&Xy(e[o],t))return o}return-1}function tU(e,t){return mb(e,t,!0)}function nU(e,t,n){return iE(e,t,qr(n),!0)}function rU(e,t){var n=e==null?0:e.length;if(n){var o=mb(e,t,!0)-1;if(Xy(e[o],t))return o}return-1}function i2(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],h=t?t(c):c;if(!n||!Xy(h,v)){var v=h;s[r++]=c===0?0:c}}return s}function oU(e){return e&&e.length?i2(e):[]}function iU(e,t){return e&&e.length?i2(e,qr(t)):[]}var aU=4294967295;function lU(e,t,n){return n&&typeof n!="number"&&pc(e,t,n)&&(t=n=void 0),n=n===void 0?aU:n>>>0,n?(e=Ro(e),e&&(typeof t=="string"||t!=null&&!Jw(t))&&(t=ys(t),!t&&Cv(e))?Ud(gs(e),0,n):e.split(t,n)):[]}var uU="Expected a function",sU=Math.max;function cU(e,t){if(typeof e!="function")throw new TypeError(uU);return t=t==null?0:sU(Ir(t),0),Qr(function(n){var o=n[t],r=Ud(n,0,t);return o&&zy(r,o),Fu(e,this,r)})}var fU=jv(function(e,t,n){return e+(n?" ":"")+Ww(t)});const dU=fU;function pU(e,t,n){return e=Ro(e),n=n==null?0:Qp(Ir(n),0,e.length),t=ys(t),e.slice(n,n+t.length)==t}function hU(){return{}}function vU(){return""}function yU(){return!0}var mU=ub(function(e,t){return e-t},0);const gU=mU;function bU(e){return e&&e.length?Qw(e,Fd):0}function _U(e,t){return e&&e.length?Qw(e,qr(t)):0}function wU(e){var t=e==null?0:e.length;return t?ms(e,1,t):[]}function EU(e,t,n){return e&&e.length?(t=n||t===void 0?1:Ir(t),ms(e,0,t<0?0:t)):[]}function OU(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,ms(e,t<0?0:t,o)):[]}function xU(e,t){return e&&e.length?db(e,qr(t),!1,!0):[]}function SU(e,t){return e&&e.length?db(e,qr(t)):[]}function AU(e,t){return t(e),e}var a2=Object.prototype,TU=a2.hasOwnProperty;function JS(e,t,n,o){return e===void 0||Xy(e,a2[n])&&!TU.call(o,n)?t:e}var MU={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function PU(e){return"\\"+MU[e]}var NU=/<%=([\s\S]+?)%>/g;const l2=NU;var kU=/<%-([\s\S]+?)%>/g;const RU=kU;var DU=/<%([\s\S]+?)%>/g;const CU=DU;var jU={escape:RU,evaluate:CU,interpolate:l2,variable:"",imports:{_:{escape:CP}}};const nw=jU;var IU="Invalid `variable` option passed into `_.template`",LU=/\b__p \+= '';/g,FU=/\b(__p \+=) '' \+/g,$U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,BU=/[()=,{}\[\]\/\s]/,UU=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,og=/($^)/,GU=/['\n\r\u2028\u2029\\]/g,VU=Object.prototype,QS=VU.hasOwnProperty;function WU(e,t,n){var o=nw.imports._.templateSettings||nw;n&&pc(e,t,n)&&(t=void 0),e=Ro(e),t=Pg({},t,o,JS);var r=Pg({},t.imports,o.imports,JS),s=Vu(r),c=VM(r,s),h,v,g=0,b=t.interpolate||og,w="__p += '",O=RegExp((t.escape||og).source+"|"+b.source+"|"+(b===l2?UU:og).source+"|"+(t.evaluate||og).source+"|$","g"),S=QS.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(k,j,R,$,V,H){return R||(R=$),w+=e.slice(g,H).replace(GU,PU),j&&(h=!0,w+=`' +
__e(`+j+`) +
'`),V&&(v=!0,w+=`';
`+V+`;
__p += '`),R&&(w+=`' +
((__t = (`+R+`)) == null ? '' : __t) +
'`),g=H+k.length,k}),w+=`';
`;var P=QS.call(t,"variable")&&t.variable;if(!P)w=`with (obj) {
`+w+`
}
`;else if(BU.test(P))throw new Error(IU);w=(v?w.replace(LU,""):w).replace(FU,"$1").replace($U,"$1;"),w="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(v?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var A=QM(function(){return Function(s,S+"return "+w).apply(void 0,c)});if(A.source=w,Uw(A))throw A;return A}function Qy(e,t){return t(e)}var zU=9007199254740991,w1=4294967295,HU=Math.min;function XU(e,t){if(e=Ir(e),e<1||e>zU)return[];var n=w1,o=HU(e,w1);t=Jp(t),e-=w1;for(var r=DM(o,t);++n<e;)t(n);return r}function YU(){return this}function u2(e,t){var n=e;return n instanceof Yr&&(n=n.value()),GM(t,function(o,r){return r.func.apply(r.thisArg,zy([o],r.args))},n)}function E1(){return u2(this.__wrapped__,this.__actions__)}function qU(e){return Ro(e).toLowerCase()}function KU(e){return fi(e)?Sa(e,ib):_v(e)?[e]:Lu(Zj(Ro(e)))}var eA=9007199254740991;function ZU(e){return e?Qp(Ir(e),-eA,eA):e===0?e:0}function JU(e){return Ro(e).toUpperCase()}function QU(e,t,n){var o=fi(e),r=o||CM(e)||jM(e);if(t=qr(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:Sf(e)?n=kv(s)?Uy(Jj(e)):{}:n={}}return(r?dc:Zp)(e,function(c,h,v){return t(n,c,h,v)}),n}function s2(e,t){for(var n=e.length;n--&&Hy(t,e[n],0)>-1;);return n}function c2(e,t){for(var n=-1,o=e.length;++n<o&&Hy(t,e[n],0)>-1;);return n}function eG(e,t,n){if(e=Ro(e),e&&(n||t===void 0))return Qj(e);if(!e||!(t=ys(t)))return e;var o=gs(e),r=gs(t),s=c2(o,r),c=s2(o,r)+1;return Ud(o,s,c).join("")}function tG(e,t,n){if(e=Ro(e),e&&(n||t===void 0))return e.slice(0,eI(e)+1);if(!e||!(t=ys(t)))return e;var o=gs(e),r=s2(o,gs(t))+1;return Ud(o,0,r).join("")}var nG=/^\s+/;function rG(e,t,n){if(e=Ro(e),e&&(n||t===void 0))return e.replace(nG,"");if(!e||!(t=ys(t)))return e;var o=gs(e),r=c2(o,gs(t));return Ud(o,r).join("")}var oG=30,iG="...",aG=/\w*$/;function lG(e,t){var n=oG,o=iG;if(Sf(t)){var r="separator"in t?t.separator:r;n="length"in t?Ir(t.length):n,o="omission"in t?ys(t.omission):o}e=Ro(e);var s=e.length;if(Cv(e)){var c=gs(e);s=c.length}if(n>=s)return e;var h=n-Iv(o);if(h<1)return o;var v=c?Ud(c,0,h).join(""):e.slice(0,h);if(r===void 0)return v+o;if(c&&(h+=v.length-h),Jw(r)){if(e.slice(h).search(r)){var g,b=v;for(r.global||(r=RegExp(r.source,Ro(aG.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var w=g.index;v=v.slice(0,w===void 0?h:w)}}else if(e.indexOf(ys(r),h)!=h){var O=v.lastIndexOf(r);O>-1&&(v=v.slice(0,O))}return v+o}function uG(e){return JM(e,1)}var sG={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cG=zw(sG);const fG=cG;var f2=/&(?:amp|lt|gt|quot|#39);/g,dG=RegExp(f2.source);function pG(e){return e=Ro(e),e&&dG.test(e)?e.replace(f2,fG):e}var hG=Qr(function(e){var t=$u(e);return ea(t)&&(t=void 0),Vp(_s(e,1,ea,!0),qr(t))});const vG=hG;var yG=Qr(function(e){var t=$u(e);return t=typeof t=="function"?t:void 0,Vp(_s(e,1,ea,!0),void 0,t)});const mG=yG;function gG(e){return e&&e.length?Vp(e):[]}function bG(e,t){return e&&e.length?Vp(e,qr(t)):[]}function _G(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?Vp(e,void 0,t):[]}function wG(e,t){return e==null?!0:RM(e,t)}var EG=Math.max;function aE(e){if(!(e&&e.length))return[];var t=0;return e=Nv(e,function(n){if(ea(n))return t=EG(n.length,t),!0}),DM(t,function(n){return Sa(e,NM(n))})}function d2(e,t){if(!(e&&e.length))return[];var n=aE(e);return t==null?n:Sa(n,function(o){return Fu(t,void 0,o)})}function p2(e,t,n,o){return Dw(e,t,n(kM(e,t)),o)}function OG(e,t,n){return e==null?e:p2(e,t,Jp(n))}function xG(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:p2(e,t,Jp(n),o)}var SG=jv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const AG=SG;function TG(e){return e==null?[]:VM(e,qp(e))}var MG=Qr(function(e,t){return ea(e)?Ky(e,t):[]});const PG=MG;function NG(e,t){return t2(Jp(t),e)}var kG=Kp(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return Bw(s,e)};return t>1||this.__actions__.length||!(o instanceof Yr)||!Gy(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Qy,args:[r],thisArg:void 0}),new Bu(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const RG=kG;function DG(){return SP(this)}function CG(){var e=this.__wrapped__;if(e instanceof Yr){var t=e;return this.__actions__.length&&(t=new Yr(this)),t=t.reverse(),t.__actions__.push({func:Qy,args:[tw],thisArg:void 0}),new Bu(t,this.__chain__)}return this.thru(tw)}function lE(e,t,n){var o=e.length;if(o<2)return o?Vp(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],h=-1;++h<o;)h!=r&&(s[r]=Ky(s[r]||c,e[h],t,n));return Vp(_s(s,1),t,n)}var jG=Qr(function(e){return lE(Nv(e,ea))});const IG=jG;var LG=Qr(function(e){var t=$u(e);return ea(t)&&(t=void 0),lE(Nv(e,ea),qr(t))});const FG=LG;var $G=Qr(function(e){var t=$u(e);return t=typeof t=="function"?t:void 0,lE(Nv(e,ea),void 0,t)});const BG=$G;var UG=Qr(aE);const GG=UG;function VG(e,t){return dL(e||[],t||[],Dw)}var WG=Qr(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,d2(e,n)});const zG=WG,Ln={chunk:vF,compact:OF,concat:xF,difference:ZF,differenceBy:QF,differenceWith:t4,drop:o4,dropRight:i4,dropRightWhile:a4,dropWhile:l4,fill:M4,findIndex:pL,findLastIndex:OM,first:zS,flatten:tI,flattenDeep:nI,flattenDepth:I4,fromPairs:rI,head:zS,indexOf:y$,initial:m$,intersection:_$,intersectionBy:E$,intersectionWith:x$,join:g5,last:$u,lastIndexOf:A5,nth:tB,pull:JB,pullAll:n2,pullAllBy:QB,pullAllWith:e6,pullAt:o6,remove:b6,reverse:tw,slice:U6,sortedIndex:J6,sortedIndexBy:Q6,sortedIndexOf:eU,sortedLastIndex:tU,sortedLastIndexBy:nU,sortedLastIndexOf:rU,sortedUniq:oU,sortedUniqBy:iU,tail:wU,take:EU,takeRight:OU,takeRightWhile:xU,takeWhile:SU,union:oI,unionBy:vG,unionWith:mG,uniq:gG,uniqBy:bG,uniqWith:_G,unzip:aE,unzipWith:d2,without:PG,xor:IG,xorBy:FG,xorWith:BG,zip:GG,zipObject:hL,zipObjectDeep:VG,zipWith:zG},Do={countBy:IF,each:AS,eachRight:GS,every:S4,filter:rL,find:vL,findLast:k4,flatMap:iI,flatMapDeep:C4,flatMapDepth:j4,forEach:AS,forEachRight:GS,groupBy:r$,includes:h$,invokeMap:L$,keyBy:E5,map:Rw,orderBy:iB,partition:HB,reduce:oL,reduceRight:m6,reject:g6,sample:N6,sampleSize:D6,shuffle:L6,size:B6,some:z6,sortBy:yL},HG={now:aI},Ai={after:kL,ary:JM,before:eP,bind:tP,bindKey:J3,curry:Xw,curryRight:Yw,debounce:lI,defer:HF,delay:YF,flip:F4,memoize:uI,negate:Jy,once:oB,overArgs:dB,partial:t2,partialRight:WB,rearg:v6,rest:O6,spread:cU,throttle:sI,unary:uG,wrap:NG},lr={castArray:cI,clone:fI,cloneDeep:dI,cloneDeepWith:bF,cloneWith:wF,conformsTo:NF,eq:Xy,gt:i$,gte:l$,isArguments:pI,isArray:fi,isArrayBuffer:U$,isArrayLike:Mv,isArrayLikeObject:ea,isBoolean:V$,isBuffer:CM,isDate:X$,isElement:Y$,isEmpty:hI,isEqual:vI,isEqualWith:q$,isError:Uw,isFinite:Z$,isFunction:kv,isInteger:GP,isLength:yI,isMap:mI,isMatch:J$,isMatchWith:Q$,isNaN:t5,isNative:i5,isNil:gI,isNull:bI,isNumber:VP,isObject:Sf,isObjectLike:Gu,isPlainObject:kw,isRegExp:Jw,isSafeInteger:s5,isSet:_I,isString:vb,isSymbol:_v,isTypedArray:jM,isUndefined:wI,isWeakMap:f5,isWeakSet:p5,lt:R5,lte:C5,toArray:HP,toFinite:Ry,toInteger:Ir,toLength:LP,toNumber:Ef,toPlainObject:EI,toSafeInteger:ZU,toString:Ro},ul={add:PL,ceil:dF,divide:r4,floor:B4,max:mL,maxBy:B5,mean:G5,meanBy:V5,min:gL,minBy:bL,multiply:q5,round:M6,subtract:gU,sum:bU,sumBy:_U},uE={clamp:yF,inRange:f$,random:c6},wr={assign:C3,assignIn:LS,assignInWith:Pg,assignWith:F3,at:B3,create:LF,defaults:_L,defaultsDeep:VF,entries:VS,entriesIn:WS,extend:LS,extendWith:Pg,findKey:P4,findLastKey:R4,forIn:wL,forInRight:K4,forOwn:EL,forOwnRight:Z4,functions:J4,functionsIn:Q4,get:gM,has:iL,hasIn:OI,invert:P$,invertBy:D$,invoke:j$,keys:Vu,keysIn:qp,mapKeys:j5,mapValues:OL,merge:xI,mergeWith:MP,omit:SI,omitBy:rB,pick:AI,pickBy:YP,result:x6,set:TI,setWith:C6,toPairs:VS,toPairsIn:WS,transform:QU,unset:wG,update:OG,updateWith:xG,values:Rv,valuesIn:TG},vc={at:RG,chain:SP,commit:EF,lodash:ae,next:eB,plant:XB,reverse:CG,tap:AU,thru:Qy,toIterator:YU,toJSON:E1,value:E1,valueOf:E1,wrapperChain:DG},ho={camelCase:uF,capitalize:sP,deburr:cP,endsWith:f4,escape:CP,escapeRegExp:O4,kebabCase:_5,lowerCase:M5,lowerFirst:N5,pad:IB,padEnd:LB,padStart:FB,parseInt:UB,repeat:_6,replace:w6,snakeCase:V6,split:lU,startCase:dU,startsWith:pU,template:WU,templateSettings:nw,toLower:qU,toUpper:JU,trim:eG,trimEnd:tG,trimStart:rG,truncate:lG,unescape:pG,upperCase:AG,upperFirst:Ww,words:xP},go={attempt:QM,bindAll:Y3,cond:AF,conforms:PF,constant:xM,defaultTo:BF,flow:X4,flowRight:q4,identity:Fd,iteratee:v5,matches:L5,matchesProperty:$5,method:z5,methodOf:X5,mixin:zP,noop:mM,nthArg:nB,over:lB,overEvery:hB,overSome:yB,property:MI,propertyOf:YB,range:xL,rangeRight:d6,stubArray:PI,stubFalse:MM,stubObject:hU,stubString:vU,stubTrue:yU,times:XU,toPath:KU,uniqueId:SL};function XG(){var e=new Yr(this.__wrapped__);return e.__actions__=Lu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Lu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Lu(this.__views__),e}function YG(){if(this.__filtered__){var e=new Yr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var qG=Math.max,KG=Math.min;function ZG(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=KG(t,e+c);break;case"takeRight":e=qG(e,t-c);break}}return{start:e,end:t}}var JG=1,QG=2,eV=Math.min;function tV(){var e=this.__wrapped__.value(),t=this.__dir__,n=fi(e),o=t<0,r=n?e.length:0,s=ZG(0,r,this.__views__),c=s.start,h=s.end,v=h-c,g=o?h:c-1,b=this.__iteratees__,w=b.length,O=0,S=eV(v,this.__takeCount__);if(!n||!o&&r==v&&S==v)return u2(e,this.__actions__);var P=[];e:for(;v--&&O<S;){g+=t;for(var A=-1,k=e[g];++A<w;){var j=b[A],R=j.iteratee,$=j.type,V=R(k);if($==QG)k=V;else if(!V){if($==JG)continue e;break e}}P[O++]=k}return P}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var nV="4.17.21",rV=2,oV=1,iV=3,h2=4294967295,aV=Array.prototype,lV=Object.prototype,v2=lV.hasOwnProperty,tA=Tg?Tg.iterator:void 0,uV=Math.max,nA=Math.min,sE=function(e){return function(t,n,o){if(o==null){var r=Sf(n),s=r&&Vu(n),c=s&&s.length&&pb(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(zP);ae.after=Ai.after;ae.ary=Ai.ary;ae.assign=wr.assign;ae.assignIn=wr.assignIn;ae.assignInWith=wr.assignInWith;ae.assignWith=wr.assignWith;ae.at=wr.at;ae.before=Ai.before;ae.bind=Ai.bind;ae.bindAll=go.bindAll;ae.bindKey=Ai.bindKey;ae.castArray=lr.castArray;ae.chain=vc.chain;ae.chunk=Ln.chunk;ae.compact=Ln.compact;ae.concat=Ln.concat;ae.cond=go.cond;ae.conforms=go.conforms;ae.constant=go.constant;ae.countBy=Do.countBy;ae.create=wr.create;ae.curry=Ai.curry;ae.curryRight=Ai.curryRight;ae.debounce=Ai.debounce;ae.defaults=wr.defaults;ae.defaultsDeep=wr.defaultsDeep;ae.defer=Ai.defer;ae.delay=Ai.delay;ae.difference=Ln.difference;ae.differenceBy=Ln.differenceBy;ae.differenceWith=Ln.differenceWith;ae.drop=Ln.drop;ae.dropRight=Ln.dropRight;ae.dropRightWhile=Ln.dropRightWhile;ae.dropWhile=Ln.dropWhile;ae.fill=Ln.fill;ae.filter=Do.filter;ae.flatMap=Do.flatMap;ae.flatMapDeep=Do.flatMapDeep;ae.flatMapDepth=Do.flatMapDepth;ae.flatten=Ln.flatten;ae.flattenDeep=Ln.flattenDeep;ae.flattenDepth=Ln.flattenDepth;ae.flip=Ai.flip;ae.flow=go.flow;ae.flowRight=go.flowRight;ae.fromPairs=Ln.fromPairs;ae.functions=wr.functions;ae.functionsIn=wr.functionsIn;ae.groupBy=Do.groupBy;ae.initial=Ln.initial;ae.intersection=Ln.intersection;ae.intersectionBy=Ln.intersectionBy;ae.intersectionWith=Ln.intersectionWith;ae.invert=wr.invert;ae.invertBy=wr.invertBy;ae.invokeMap=Do.invokeMap;ae.iteratee=go.iteratee;ae.keyBy=Do.keyBy;ae.keys=Vu;ae.keysIn=wr.keysIn;ae.map=Do.map;ae.mapKeys=wr.mapKeys;ae.mapValues=wr.mapValues;ae.matches=go.matches;ae.matchesProperty=go.matchesProperty;ae.memoize=Ai.memoize;ae.merge=wr.merge;ae.mergeWith=wr.mergeWith;ae.method=go.method;ae.methodOf=go.methodOf;ae.mixin=sE;ae.negate=Jy;ae.nthArg=go.nthArg;ae.omit=wr.omit;ae.omitBy=wr.omitBy;ae.once=Ai.once;ae.orderBy=Do.orderBy;ae.over=go.over;ae.overArgs=Ai.overArgs;ae.overEvery=go.overEvery;ae.overSome=go.overSome;ae.partial=Ai.partial;ae.partialRight=Ai.partialRight;ae.partition=Do.partition;ae.pick=wr.pick;ae.pickBy=wr.pickBy;ae.property=go.property;ae.propertyOf=go.propertyOf;ae.pull=Ln.pull;ae.pullAll=Ln.pullAll;ae.pullAllBy=Ln.pullAllBy;ae.pullAllWith=Ln.pullAllWith;ae.pullAt=Ln.pullAt;ae.range=go.range;ae.rangeRight=go.rangeRight;ae.rearg=Ai.rearg;ae.reject=Do.reject;ae.remove=Ln.remove;ae.rest=Ai.rest;ae.reverse=Ln.reverse;ae.sampleSize=Do.sampleSize;ae.set=wr.set;ae.setWith=wr.setWith;ae.shuffle=Do.shuffle;ae.slice=Ln.slice;ae.sortBy=Do.sortBy;ae.sortedUniq=Ln.sortedUniq;ae.sortedUniqBy=Ln.sortedUniqBy;ae.split=ho.split;ae.spread=Ai.spread;ae.tail=Ln.tail;ae.take=Ln.take;ae.takeRight=Ln.takeRight;ae.takeRightWhile=Ln.takeRightWhile;ae.takeWhile=Ln.takeWhile;ae.tap=vc.tap;ae.throttle=Ai.throttle;ae.thru=Qy;ae.toArray=lr.toArray;ae.toPairs=wr.toPairs;ae.toPairsIn=wr.toPairsIn;ae.toPath=go.toPath;ae.toPlainObject=lr.toPlainObject;ae.transform=wr.transform;ae.unary=Ai.unary;ae.union=Ln.union;ae.unionBy=Ln.unionBy;ae.unionWith=Ln.unionWith;ae.uniq=Ln.uniq;ae.uniqBy=Ln.uniqBy;ae.uniqWith=Ln.uniqWith;ae.unset=wr.unset;ae.unzip=Ln.unzip;ae.unzipWith=Ln.unzipWith;ae.update=wr.update;ae.updateWith=wr.updateWith;ae.values=wr.values;ae.valuesIn=wr.valuesIn;ae.without=Ln.without;ae.words=ho.words;ae.wrap=Ai.wrap;ae.xor=Ln.xor;ae.xorBy=Ln.xorBy;ae.xorWith=Ln.xorWith;ae.zip=Ln.zip;ae.zipObject=Ln.zipObject;ae.zipObjectDeep=Ln.zipObjectDeep;ae.zipWith=Ln.zipWith;ae.entries=wr.toPairs;ae.entriesIn=wr.toPairsIn;ae.extend=wr.assignIn;ae.extendWith=wr.assignInWith;sE(ae,ae);ae.add=ul.add;ae.attempt=go.attempt;ae.camelCase=ho.camelCase;ae.capitalize=ho.capitalize;ae.ceil=ul.ceil;ae.clamp=uE.clamp;ae.clone=lr.clone;ae.cloneDeep=lr.cloneDeep;ae.cloneDeepWith=lr.cloneDeepWith;ae.cloneWith=lr.cloneWith;ae.conformsTo=lr.conformsTo;ae.deburr=ho.deburr;ae.defaultTo=go.defaultTo;ae.divide=ul.divide;ae.endsWith=ho.endsWith;ae.eq=lr.eq;ae.escape=ho.escape;ae.escapeRegExp=ho.escapeRegExp;ae.every=Do.every;ae.find=Do.find;ae.findIndex=Ln.findIndex;ae.findKey=wr.findKey;ae.findLast=Do.findLast;ae.findLastIndex=Ln.findLastIndex;ae.findLastKey=wr.findLastKey;ae.floor=ul.floor;ae.forEach=Do.forEach;ae.forEachRight=Do.forEachRight;ae.forIn=wr.forIn;ae.forInRight=wr.forInRight;ae.forOwn=wr.forOwn;ae.forOwnRight=wr.forOwnRight;ae.get=wr.get;ae.gt=lr.gt;ae.gte=lr.gte;ae.has=wr.has;ae.hasIn=wr.hasIn;ae.head=Ln.head;ae.identity=Fd;ae.includes=Do.includes;ae.indexOf=Ln.indexOf;ae.inRange=uE.inRange;ae.invoke=wr.invoke;ae.isArguments=lr.isArguments;ae.isArray=fi;ae.isArrayBuffer=lr.isArrayBuffer;ae.isArrayLike=lr.isArrayLike;ae.isArrayLikeObject=lr.isArrayLikeObject;ae.isBoolean=lr.isBoolean;ae.isBuffer=lr.isBuffer;ae.isDate=lr.isDate;ae.isElement=lr.isElement;ae.isEmpty=lr.isEmpty;ae.isEqual=lr.isEqual;ae.isEqualWith=lr.isEqualWith;ae.isError=lr.isError;ae.isFinite=lr.isFinite;ae.isFunction=lr.isFunction;ae.isInteger=lr.isInteger;ae.isLength=lr.isLength;ae.isMap=lr.isMap;ae.isMatch=lr.isMatch;ae.isMatchWith=lr.isMatchWith;ae.isNaN=lr.isNaN;ae.isNative=lr.isNative;ae.isNil=lr.isNil;ae.isNull=lr.isNull;ae.isNumber=lr.isNumber;ae.isObject=Sf;ae.isObjectLike=lr.isObjectLike;ae.isPlainObject=lr.isPlainObject;ae.isRegExp=lr.isRegExp;ae.isSafeInteger=lr.isSafeInteger;ae.isSet=lr.isSet;ae.isString=lr.isString;ae.isSymbol=lr.isSymbol;ae.isTypedArray=lr.isTypedArray;ae.isUndefined=lr.isUndefined;ae.isWeakMap=lr.isWeakMap;ae.isWeakSet=lr.isWeakSet;ae.join=Ln.join;ae.kebabCase=ho.kebabCase;ae.last=$u;ae.lastIndexOf=Ln.lastIndexOf;ae.lowerCase=ho.lowerCase;ae.lowerFirst=ho.lowerFirst;ae.lt=lr.lt;ae.lte=lr.lte;ae.max=ul.max;ae.maxBy=ul.maxBy;ae.mean=ul.mean;ae.meanBy=ul.meanBy;ae.min=ul.min;ae.minBy=ul.minBy;ae.stubArray=go.stubArray;ae.stubFalse=go.stubFalse;ae.stubObject=go.stubObject;ae.stubString=go.stubString;ae.stubTrue=go.stubTrue;ae.multiply=ul.multiply;ae.nth=Ln.nth;ae.noop=go.noop;ae.now=HG.now;ae.pad=ho.pad;ae.padEnd=ho.padEnd;ae.padStart=ho.padStart;ae.parseInt=ho.parseInt;ae.random=uE.random;ae.reduce=Do.reduce;ae.reduceRight=Do.reduceRight;ae.repeat=ho.repeat;ae.replace=ho.replace;ae.result=wr.result;ae.round=ul.round;ae.sample=Do.sample;ae.size=Do.size;ae.snakeCase=ho.snakeCase;ae.some=Do.some;ae.sortedIndex=Ln.sortedIndex;ae.sortedIndexBy=Ln.sortedIndexBy;ae.sortedIndexOf=Ln.sortedIndexOf;ae.sortedLastIndex=Ln.sortedLastIndex;ae.sortedLastIndexBy=Ln.sortedLastIndexBy;ae.sortedLastIndexOf=Ln.sortedLastIndexOf;ae.startCase=ho.startCase;ae.startsWith=ho.startsWith;ae.subtract=ul.subtract;ae.sum=ul.sum;ae.sumBy=ul.sumBy;ae.template=ho.template;ae.times=go.times;ae.toFinite=lr.toFinite;ae.toInteger=Ir;ae.toLength=lr.toLength;ae.toLower=ho.toLower;ae.toNumber=lr.toNumber;ae.toSafeInteger=lr.toSafeInteger;ae.toString=lr.toString;ae.toUpper=ho.toUpper;ae.trim=ho.trim;ae.trimEnd=ho.trimEnd;ae.trimStart=ho.trimStart;ae.truncate=ho.truncate;ae.unescape=ho.unescape;ae.uniqueId=go.uniqueId;ae.upperCase=ho.upperCase;ae.upperFirst=ho.upperFirst;ae.each=Do.forEach;ae.eachRight=Do.forEachRight;ae.first=Ln.head;sE(ae,function(){var e={};return Zp(ae,function(t,n){v2.call(ae.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ae.VERSION=nV;(ae.templateSettings=ho.templateSettings).imports._=ae;dc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ae[e].placeholder=ae});dc(["drop","take"],function(e,t){Yr.prototype[e]=function(n){n=n===void 0?1:uV(Ir(n),0);var o=this.__filtered__&&!t?new Yr(this):this.clone();return o.__filtered__?o.__takeCount__=nA(n,o.__takeCount__):o.__views__.push({size:nA(n,h2),type:e+(o.__dir__<0?"Right":"")}),o},Yr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});dc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==oV||n==iV;Yr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:qr(r),type:n}),s.__filtered__=s.__filtered__||o,s}});dc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Yr.prototype[e]=function(){return this[n](1).value()[0]}});dc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Yr.prototype[e]=function(){return this.__filtered__?new Yr(this):this[n](1)}});Yr.prototype.compact=function(){return this.filter(Fd)};Yr.prototype.find=function(e){return this.filter(e).head()};Yr.prototype.findLast=function(e){return this.reverse().find(e)};Yr.prototype.invokeMap=Qr(function(e,t){return typeof e=="function"?new Yr(this):this.map(function(n){return Zy(n,e,t)})});Yr.prototype.reject=function(e){return this.filter(Jy(qr(e)))};Yr.prototype.slice=function(e,t){e=Ir(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Yr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Ir(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Yr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Yr.prototype.toArray=function(){return this.take(h2)};Zp(Yr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=ae[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(ae.prototype[t]=function(){var c=this.__wrapped__,h=o?[1]:arguments,v=c instanceof Yr,g=h[0],b=v||fi(c),w=function(j){var R=r.apply(ae,zy([j],h));return o&&O?R[0]:R};b&&n&&typeof g=="function"&&g.length!=1&&(v=b=!1);var O=this.__chain__,S=!!this.__actions__.length,P=s&&!O,A=v&&!S;if(!s&&b){c=A?c:new Yr(this);var k=e.apply(c,h);return k.__actions__.push({func:Qy,args:[w],thisArg:void 0}),new Bu(k,O)}return P&&A?e.apply(this,h):(k=this.thru(w),P?o?k.value()[0]:k.value():k)})});dc(["pop","push","shift","sort","splice","unshift"],function(e){var t=aV[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);ae.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(fi(s)?s:[],r)}return this[n](function(c){return t.apply(fi(c)?c:[],r)})}});Zp(Yr.prototype,function(e,t){var n=ae[t];if(n){var o=n.name+"";v2.call(dv,o)||(dv[o]=[]),dv[o].push({name:t,func:n})}});dv[cb(void 0,rV).name]=[{name:"wrapper",func:void 0}];Yr.prototype.clone=XG;Yr.prototype.reverse=YG;Yr.prototype.value=tV;ae.prototype.at=vc.at;ae.prototype.chain=vc.wrapperChain;ae.prototype.commit=vc.commit;ae.prototype.next=vc.next;ae.prototype.plant=vc.plant;ae.prototype.reverse=vc.reverse;ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=vc.value;ae.prototype.first=ae.prototype.head;tA&&(ae.prototype[tA]=vc.toIterator);const sV="/ui/assets/icon_or-f402edf4.svg",cV="/ui/assets/icon_and-2df352e1.svg",fV={class:"workflow-dropdown-menu border border-r-4"},dV={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},pV={key:0},hV=["onClick","onMousedown"],vV={class:"pre-wrap"},yV={class:"lighter"},mV={key:1,class:"ml-16 mt-8"},gV={class:"pre-wrap"},bV={class:"lighter"},_V=["onClick","onMousedown"],wV={class:"pre-wrap"},EV=["title"],OV={key:0},xV=["onClick","onMousedown"],SV={class:"pre-wrap",style:{width:"60%"}},AV=["title"],TV={class:"status-tag",style:{"margin-left":"auto"}},MV={key:1,class:"ml-16 mt-8"},PV=kr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=mt(""),o=e,r=t,s=mt(!1),c=mt("base"),h=mt([]),v=so(()=>h.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=mt([]),b=so(()=>g.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),w=so(()=>NI.filter(A=>A.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function O(A,k,j){var R;if(k&&(A.properties.stepName=k.name,j=="function"&&(A.properties.nodeData={...k,function_lib_id:k.id,inputFieldList:k.inputFieldList.map($=>({...$,value:$.source=="reference"?[]:""}))}),j=="application"))if(hg(k.type)){const V=k.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id,api_input_field_list:k.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:k.workFlow.nodes[0].properties.user_input_field_list,...V?{...V.document?{documentList:[]}:{},...V.image?{imageList:[]}:{},...V.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id};(R=o.workflowRef)==null||R.addNode(A),r("clickNodes",A)}function S(A,k,j){var R;if(k&&(A.properties.stepName=k.name,j=="function"&&(A.properties.nodeData={...k,function_lib_id:k.id,inputFieldList:k.inputFieldList.map($=>({...$,value:$.source=="reference"?[]:""}))}),j=="application"))if(hg(k.type)){const V=k.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id,api_input_field_list:k.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:k.workFlow.nodes[0].properties.user_input_field_list,...V?{...V.document?{documentList:[]}:{},...V.image?{imageList:[]}:{},...V.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id};(R=o.workflowRef)==null||R.onmousedown(A),r("onmousedown",A)}function P(){fa.listFunctionLib(o.id,s).then(A=>{h.value=A.data}),fa.getApplicationList(o.id,s).then(A=>{g.value=A.data})}return xo(()=>{P()}),(A,k)=>{const j=re("search"),R=re("el-icon"),$=re("el-input"),V=re("el-text"),H=re("el-scrollbar"),Y=re("el-tab-pane"),Q=re("el-tag"),W=re("el-tabs");return Ua((qe(),Dn("div",fV,[C(W,{modelValue:c.value,"onUpdate:modelValue":k[3]||(k[3]=I=>c.value=I),class:"workflow-dropdown-tabs"},{default:B(()=>[he("div",dV,[C($,{modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=I=>n.value=I),style:{width:"240px"},placeholder:A.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:B(()=>[C(R,{class:"el-input__icon"},{default:B(()=>[C(j)]),_:1})]),_:1},8,["modelValue","placeholder"])]),C(Y,{label:A.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:B(()=>[C(H,{height:"400"},{default:B(()=>[w.value.length>0?(qe(),Dn("div",pV,[(qe(!0),Dn(Yo,null,Ci(w.value,(I,z)=>(qe(),Dn("div",{key:z,class:"workflow-dropdown-item cursor flex p-8-12",onClick:bn(K=>O(I),["stop"]),onMousedown:bn(K=>S(I),["stop"])},[(qe(),Rt(lv(Jr(uv)(`${I.type}-icon`)),{class:"mr-8 mt-4",size:32})),he("div",vV,[he("div",yV,Ue(I.label),1),C(V,{type:"info",size:"small"},{default:B(()=>[St(Ue(I.text),1)]),_:2},1024)])],40,hV))),128))])):(qe(),Dn("div",mV,[C(V,{type:"info"},{default:B(()=>[St(Ue(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),C(Y,{label:A.$t("views.functionLib.title"),name:"function"},{default:B(()=>[C(H,{height:"400"},{default:B(()=>[he("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:k[1]||(k[1]=bn(I=>O(Jr(rg)),["stop"])),onMousedown:k[2]||(k[2]=bn(I=>S(Jr(rg)),["stop"]))},[(qe(),Rt(lv(Jr(uv)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),he("div",gV,[he("div",bV,Ue(Jr(rg).label),1),C(V,{type:"info",size:"small"},{default:B(()=>[St(Ue(Jr(rg).text),1)]),_:1})])],32),(qe(!0),Dn(Yo,null,Ci(v.value,(I,z)=>(qe(),Dn("div",{key:z,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:bn(K=>O(Jr(ES),I,"function"),["stop"]),onMousedown:bn(K=>S(Jr(ES),I,"function"),["stop"])},[(qe(),Rt(lv(Jr(uv)("function-lib-node-icon")),{class:"mr-8",size:32})),he("div",wV,[he("div",{class:"lighter ellipsis-1",title:I.name},Ue(I.name),9,EV),he("p",null,[I.desc?(qe(),Rt(V,{key:0,class:"ellipsis-1",type:"info",size:"small",title:I.desc},{default:B(()=>[St(Ue(I.desc),1)]),_:2},1032,["title"])):tr("",!0)])])],40,_V))),128))]),_:1})]),_:1},8,["label"]),C(Y,{label:A.$t("views.application.title"),name:"application"},{default:B(()=>[C(H,{height:"400"},{default:B(()=>[b.value.length>0?(qe(),Dn("div",OV,[(qe(!0),Dn(Yo,null,Ci(b.value,(I,z)=>(qe(),Dn("div",{key:z,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:bn(K=>O(Jr(OS),I,"application"),["stop"]),onMousedown:bn(K=>S(Jr(OS),I,"application"),["stop"])},[(qe(),Rt(lv(Jr(uv)("application-node-icon")),{class:"mr-8",size:32,item:I},null,8,["item"])),he("div",SV,[he("div",{class:"lighter ellipsis",title:I.name},Ue(I.name),9,AV),he("p",null,[I.desc?(qe(),Rt(V,{key:0,class:"ellipsis",type:"info",size:"small",title:I.desc},{default:B(()=>[St(Ue(I.desc),1)]),_:2},1032,["title"])):tr("",!0)])]),he("div",TV,[Jr(hg)(I.type)?(qe(),Rt(Q,{key:0,type:"warning",style:{height:"22px"}},{default:B(()=>[St(Ue(A.$t("views.application.workflow")),1)]),_:1})):(qe(),Rt(Q,{key:1,class:"blue-tag",style:{height:"22px"}},{default:B(()=>[St(Ue(A.$t("views.application.simple")),1)]),_:1}))])],40,xV))),128))])):(qe(),Dn("div",MV,[C(V,{type:"info"},{default:B(()=>[St(Ue(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[Ev,e.show]])}}});const y2=Yy(PV,[["__scopeId","data-v-2717b3b8"]]),NV={class:"flex-between"},kV={class:"flex align-center",style:{width:"70%"}},RV={class:"ellipsis-1 break-all"},DV={key:0,src:sV,alt:""},CV={key:1,src:cV,alt:""},jV={style:{width:"280px"},class:"p-12-16"},IV={class:"mt-8 lighter"},LV={class:"title-decoration-1 mb-8 mt-8"},FV=["onMouseenter"],$V={style:{"max-width":"92%"}},BV={class:"dialog-footer"},UV=kr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Rl.config.globalProperties.$route,n=mt({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),o=mt(!1),r=mt(),s=mt(),c=mt(!1),h=mt({title:""}),v=so({set:I=>{Ye.set(V.nodeModel.properties,"condition",I)},get:()=>V.nodeModel.properties.condition?V.nodeModel.properties.condition:(Ye.set(V.nodeModel.properties,"condition","AND"),!0)}),g=so({set:I=>{Ye.set(V.nodeModel.properties,"showNode",I)},get:()=>V.nodeModel.properties.showNode!==void 0?V.nodeModel.properties.showNode:(Ye.set(V.nodeModel.properties,"showNode",!0),!0)}),b=I=>{I.ctrlKey||I.metaKey||I.stopPropagation()},w=so(()=>V.nodeModel.properties.status?V.nodeModel.properties.status:200);function O(){h.value.title=V.nodeModel.properties.stepName,c.value=!0}const S=async I=>{I&&await I.validate(z=>{var K;z&&((K=V.nodeModel.graphModel.nodes)!=null&&K.some(q=>q.properties.stepName===h.value.title)?Ba(Zt("views.applicationWorkflow.tip.repeatedNodeError")):(Ye.set(V.nodeModel.properties,"stepName",h.value.title),c.value=!1,I.resetFields()))})},P=()=>{V.nodeModel.graphModel.clearSelectElements(),Ye.set(V.nodeModel,"isSelected",!0),Ye.set(V.nodeModel,"isHovered",!0),V.nodeModel.graphModel.toFront(V.nodeModel.id)},A=mt(null),k=()=>{V.nodeModel.graphModel.clearSelectElements();const I=V.nodeModel.graphModel.cloneNode(V.nodeModel.id);Ye.set(I,"isSelected",!0),Ye.set(I,"isHovered",!0),V.nodeModel.graphModel.toFront(I.id)},j=()=>{Cw(Zt("common.tip"),Zt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Zt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{V.nodeModel.graphModel.deleteNode(V.nodeModel.id)}),V.nodeModel.graphModel.eventCenter.emit("delete_node")},R=I=>{I.height&&(V.nodeModel.virtual||(n.value.stepContainerHeight=I.height,V.nodeModel.setHeight(n.value.stepContainerHeight)))};function $(I){var q,ce,ke;const z=I.properties.width?I.properties.width:214,K=V.nodeModel.graphModel.addNode({type:I.type,properties:I.properties,x:((q=r.value)==null?void 0:q.x)+z/2+200,y:((ce=r.value)==null?void 0:ce.y)-I.height});V.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:V.nodeModel.id,sourceAnchorId:(ke=r.value)==null?void 0:ke.id,targetNodeId:K.id}),W()}const V=e,H=so(()=>{var I;return V.nodeModel.properties.config.fields?(I=V.nodeModel.properties.config.fields)==null?void 0:I.map(K=>({label:K.label,value:K.value,globeLabel:`{{${V.nodeModel.properties.stepName}.${K.value}}}`,globeValue:`{{context['${V.nodeModel.id}'].${K.value}}}`})):[]});function Y(I){return I!==Xo.Base&&I!==Xo.Start}const Q=I=>{o.value=!0,r.value=I},W=()=>{o.value=!1,r.value=void 0};return xo(()=>{Ye.set(V.nodeModel,"openNodeMenu",I=>{o.value?W():Q(I)})}),(I,z)=>{var ge;const K=re("ArrowDownBold"),q=re("el-icon"),ce=re("el-button"),ke=re("el-option"),Oe=re("el-select"),ze=re("el-dropdown"),Ie=re("MoreFilled"),Pe=re("el-dropdown-item"),le=re("el-dropdown-menu"),ye=re("el-alert"),Me=re("AppIcon"),We=re("el-tooltip"),je=re("el-collapse-transition"),it=re("el-input"),bt=re("el-form-item"),Mt=re("el-form"),Yt=re("el-dialog"),Ce=jd("resize");return qe(),Dn("div",{onMousedown:P,class:"workflow-node-container p-16",style:{overflow:"visible"}},[he("div",{class:Dd(["step-container app-card p-16",{isSelected:V.nodeModel.isSelected,error:w.value!==200}]),style:{overflow:"visible"}},[Ua((qe(),Dn("div",null,[he("div",NV,[he("div",kV,[(qe(),Rt(lv(Jr(uv)(`${I.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(ge=I.nodeModel)==null?void 0:ge.properties.nodeData},null,8,["item"])),he("h4",RV,Ue(I.nodeModel.properties.stepName),1)]),he("div",{onMousemove:z[2]||(z[2]=bn(()=>{},["stop"])),onMousedown:z[3]||(z[3]=bn(()=>{},["stop"])),onKeydown:z[4]||(z[4]=bn(()=>{},["stop"])),onClick:z[5]||(z[5]=bn(()=>{},["stop"]))},[C(ce,{text:"",onClick:z[0]||(z[0]=Se=>g.value=!g.value)},{default:B(()=>[C(q,{class:Dd(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:B(()=>[C(K)]),_:1},8,["class"])]),_:1}),Y(I.nodeModel.type)?(qe(),Rt(ze,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:B(()=>[he("div",jV,[he("h5",null,Ue(I.$t("views.applicationWorkflow.condition.title")),1),he("p",IV,[he("span",null,Ue(I.$t("views.applicationWorkflow.condition.front")),1),C(Oe,{modelValue:v.value,"onUpdate:modelValue":z[1]||(z[1]=Se=>v.value=Se),size:"small",style:{width:"60px",margin:"0 8px"}},{default:B(()=>[C(ke,{label:I.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),C(ke,{label:I.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),he("span",null,Ue(I.$t("views.applicationWorkflow.condition.text")),1)])])]),default:B(()=>[C(ce,{text:""},{default:B(()=>[v.value==="OR"?(qe(),Dn("img",DV)):tr("",!0),v.value==="AND"?(qe(),Dn("img",CV)):tr("",!0)]),_:1})]),_:1})):tr("",!0),Y(I.nodeModel.type)?(qe(),Rt(ze,{key:1,teleported:!1,trigger:"click"},{dropdown:B(()=>[C(le,{style:{"min-width":"80px"}},{default:B(()=>[C(Pe,{onClick:O,class:"p-8"},{default:B(()=>[St(Ue(I.$t("common.rename")),1)]),_:1}),C(Pe,{onClick:k,class:"p-8"},{default:B(()=>[St(Ue(I.$t("common.copy")),1)]),_:1}),C(Pe,{onClick:j,class:"border-t p-8"},{default:B(()=>[St(Ue(I.$t("common.delete")),1)]),_:1})]),_:1})]),default:B(()=>[C(ce,{text:""},{default:B(()=>[C(q,{class:"color-secondary"},{default:B(()=>[C(Ie)]),_:1})]),_:1})]),_:1})):tr("",!0)],32)]),C(je,null,{default:B(()=>[Ua(he("div",{onMousedown:z[7]||(z[7]=bn(()=>{},["stop"])),onKeydown:z[8]||(z[8]=bn(()=>{},["stop"])),onClick:z[9]||(z[9]=bn(()=>{},["stop"])),class:"mt-16"},[w.value!=200?(qe(),Rt(ye,{key:0,class:"mb-16",title:V.nodeModel.type==="application-node"?I.$t("views.applicationWorkflow.tip.applicationNodeError"):I.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):tr("",!0),kI(I.$slots,"default",{},void 0,!0),H.value.length>0?(qe(),Dn(Yo,{key:1},[he("h5",LV,Ue(I.$t("common.param.outputParam")),1),(qe(!0),Dn(Yo,null,Ci(H.value,(Se,ht)=>(qe(),Dn("div",{key:ht,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:zt=>A.value=ht,onMouseleave:z[6]||(z[6]=zt=>A.value=null)},[he("span",$V,Ue(Se.label)+" "+Ue("{"+Se.value+"}"),1),A.value===ht?(qe(),Rt(We,{key:0,effect:"dark",content:I.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:B(()=>[C(ce,{link:"",onClick:zt=>Jr(IM)(Se.globeLabel),style:{padding:"0"}},{default:B(()=>[C(Me,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):tr("",!0)],40,FV))),128))],64)):tr("",!0)],544),[[Ev,g.value]])]),_:3})])),[[Ce,R]])],2),C(je,null,{default:B(()=>[o.value?(qe(),Rt(y2,{key:0,onMousemove:z[10]||(z[10]=bn(()=>{},["stop"])),onMousedown:z[11]||(z[11]=bn(()=>{},["stop"])),onClick:z[12]||(z[12]=bn(()=>{},["stop"])),onWheel:b,show:o.value,id:Jr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:$},null,8,["show","id"])):tr("",!0)]),_:1}),C(Yt,{title:I.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":z[17]||(z[17]=Se=>c.value=Se),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:z[18]||(z[18]=bn(()=>{},["prevent"]))},{footer:B(()=>[he("span",BV,[C(ce,{onClick:z[15]||(z[15]=bn(Se=>c.value=!1,["prevent"]))},{default:B(()=>[St(Ue(I.$t("common.cancel")),1)]),_:1}),C(ce,{type:"primary",onClick:z[16]||(z[16]=Se=>S(s.value))},{default:B(()=>[St(Ue(I.$t("common.save")),1)]),_:1})])]),default:B(()=>[C(Mt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:h.value},{default:B(()=>[C(bt,{prop:"title",rules:[{required:!0,message:I.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:B(()=>[C(it,{modelValue:h.value.title,"onUpdate:modelValue":z[13]||(z[13]=Se=>h.value.title=Se),onBlur:z[14]||(z[14]=Se=>h.value.title=h.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const Ti=Yy(UV,[["__scopeId","data-v-8b52f518"]]),ko=kr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{},filterNodeKey:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=so({set:b=>{r("update:modelValue",b)},get:()=>o.modelValue}),c=mt([]),h=b=>(console.log("ctrlKey",b.ctrlKey),b.ctrlKey===!0?(b.preventDefault(),!0):(b.stopPropagation(),!0));function v(b){b&&(c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(w=>w.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0),c.value=c.value.filter(w=>o.filterNodeKey?w.type===o.filterNodeKey:!0))}return t({validate:()=>{const b=o.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(Zt("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(Zt("views.applicationWorkflow.variable.ReferencingError"));const w=s.value[0],O=s.value[1],S=b.find(P=>P.value===w);return S?S.children.some(P=>P.value===O)?Promise.resolve(""):(s.value=[],Promise.reject(Zt("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(Zt("views.applicationWorkflow.variable.NoReferencing")))}}),xo(()=>{console.warn("props.nodeModel",o.nodeModel.get_up_node_field_list(!1,!0)),c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(b=>b.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0),c.value=c.value.filter(b=>o.filterNodeKey?b.type===o.filterNodeKey:!0)}),(b,w)=>{const O=re("el-cascader");return qe(),Rt(O,RI({onWheel:h,teleported:!1,options:c.value,onVisibleChange:v},b.$attrs,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=S=>s.value=S),separator:" > ",clearable:!0}),{default:B(({node:S,data:P})=>[he("span",{class:"flex align-center",onWheel:h},[(qe(),Rt(lv(Jr(uv)(`${P.type}-icon`)),{class:"mr-8",size:18})),St(Ue(P.label),1)],32)]),_:1},16,["options","modelValue"])}}}),GV={class:"title-decoration-1 mb-8"},VV={class:"flex-between w-full"},WV={class:"flex-between"},zV={class:"flex align-center"},HV={class:"mr-4"},XV=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=V=>V.ctrlKey===!0?(V.preventDefault(),!0):(V.stopPropagation(),!0);function o(V){Ye.set(g.nodeModel.properties.nodeData,"system",V)}const r=V=>{var H;V?(H=S.value)==null||H.reset_default(V,s):R({})},{params:{id:s}}=Rl.config.globalProperties.$route,h={modelId:"",system:"",prompt:`${Zt("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Zt("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${Zt("views.problem.title")}：
{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,questionReferenceAddress:["start-node","question"],datasetReferenceAddress:[],dialogueNumber:1,isResult:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",modelSetting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},v=so({get:()=>g.nodeModel.properties.nodeData?(g.nodeModel.properties.nodeData.modelSetting||Ye.set(g.nodeModel.properties.nodeData,"modelSetting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),g.nodeModel.properties.nodeData):(Ye.set(g.nodeModel.properties,"nodeData",h),g.nodeModel.properties.nodeData),set:V=>{Ye.set(g.nodeModel.properties,"nodeData",V)}}),g=e,b=mt(),w=mt(),O=mt(null),S=mt(),P=mt(),A=()=>{var V;return Promise.all([w.value?w.value.validate():Promise.resolve(""),(V=b.value)==null?void 0:V.validate()]).catch(H=>Promise.reject({node:g.nodeModel,errMessage:H}))};function k(){s?fa.getApplicationModel(s).then(V=>{O.value=Ye.groupBy(V==null?void 0:V.data,"provider")}):t.asyncGetModel().then(V=>{O.value=Ye.groupBy(V==null?void 0:V.data,"provider")})}const j=V=>{var H;V&&((H=S.value)==null||H.open(V,s,v.value.modelParamsSetting))};function R(V){Ye.set(g.nodeModel.properties.nodeData,"modelParamsSetting",V)}function $(V){let H=Ye.cloneDeep(g.nodeModel.properties.nodeData.modelSetting);H={...H,...V},Ye.set(g.nodeModel.properties.nodeData,"modelSetting",H)}return xo(()=>{var V;k(),typeof((V=g.nodeModel.properties.nodeData)==null?void 0:V.isResult)>"u"&&Bd(g.nodeModel)&&Ye.set(g.nodeModel.properties.nodeData,"isResult",!0),Ye.set(g.nodeModel,"validate",A),v.value.dialogue_type||(v.value.dialogue_type="WORKFLOW")}),(V,H)=>{const Y=re("Setting"),Q=re("el-icon"),W=re("el-button"),I=re("el-form-item"),z=re("el-option"),K=re("el-select"),q=re("el-input-number"),ce=re("el-tooltip"),ke=re("el-switch"),Oe=re("el-form"),ze=re("el-card");return qe(),Rt(Ti,{nodeModel:V.nodeModel},{default:B(()=>[he("h5",GV,Ue(V.$t("views.applicationWorkflow.nodeSetting")),1),C(ze,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(Oe,{onSubmit:H[9]||(H[9]=bn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:b,"hide-required-asterisk":""},{default:B(()=>[C(I,{label:V.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:V.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:B(()=>[he("div",VV,[he("div",null,[he("span",null,[St(Ue(V.$t("views.application.applicationForm.form.aiModel.label")),1),H[10]||(H[10]=he("span",{class:"danger"},"*",-1))])]),C(W,{disabled:!v.value.modelId,type:"primary",link:"",onClick:H[0]||(H[0]=Ie=>j(v.value.modelId)),onRefreshForm:R},{default:B(()=>[C(Q,null,{default:B(()=>[C(Y)]),_:1})]),_:1},8,["disabled"])])]),default:B(()=>[C(jw,{onChange:r,onWheel:n,teleported:!1,modelValue:v.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=Ie=>v.value.modelId=Ie),placeholder:V.$t("views.application.applicationForm.form.aiModel.placeholder"),options:O.value,onSubmitModel:k,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(I,{label:V.$t("views.application.applicationForm.form.roleSettings.label")},{default:B(()=>[C(Cd,{title:V.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:v.value.system,"onUpdate:modelValue":H[2]||(H[2]=Ie=>v.value.system=Ie),style:{height:"100px"},onSubmitDialog:o,placeholder:V.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(I,{label:V.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.label"),prop:"datasetReferenceAddress",rules:{message:V.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.placeholder"),trigger:"blur",required:!1}},{default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:w,nodeModel:V.nodeModel,"filter-node-key":"search-dataset-node",class:"w-full",placeholder:V.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.placeholder"),modelValue:v.value.datasetReferenceAddress,"onUpdate:modelValue":H[3]||(H[3]=Ie=>v.value.datasetReferenceAddress=Ie)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(I,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:"用户问题",trigger:"blur",required:!0}},{default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:w,nodeModel:V.nodeModel,class:"w-full",placeholder:V.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:v.value.questionReferenceAddress,"onUpdate:modelValue":H[4]||(H[4]=Ie=>v.value.questionReferenceAddress=Ie)},null,8,["nodeModel","placeholder","modelValue"])]),_:1}),C(I,{label:V.$t("views.application.applicationForm.form.historyRecord.label")},{label:B(()=>[he("div",WV,[he("div",null,Ue(V.$t("views.application.applicationForm.form.historyRecord.label")),1),C(K,{modelValue:v.value.dialogue_type,"onUpdate:modelValue":H[5]||(H[5]=Ie=>v.value.dialogue_type=Ie),type:"small",style:{width:"100px"}},{default:B(()=>[C(z,{label:V.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),C(z,{label:V.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[C(q,{modelValue:v.value.dialogueNumber,"onUpdate:modelValue":H[6]||(H[6]=Ie=>v.value.dialogueNumber=Ie),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),C(I,{onClick:H[8]||(H[8]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",zV,[he("div",HV,[he("span",null,[St(Ue(V.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),H[11]||(H[11]=he("span",{class:"danger"},"*",-1))])]),C(ce,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(V.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(ke,{size:"small",modelValue:v.value.isResult,"onUpdate:modelValue":H[7]||(H[7]=Ie=>v.value.isResult=Ie)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:R},null,512),C(JI,{ref_key:"ReasoningParamSettingDialogRef",ref:P,onRefresh:$},null,512)]),_:1},8,["nodeModel"])}}});var rw={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,h){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:h})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var h=Object.create(null);if(r.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var v in s)r.d(h,v,(function(g){return s[g]}).bind(null,v));return h},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return H}),r.d(o,"b",function(){return V}),r.d(o,"c",function(){return Mt}),r.d(o,"d",function(){return Yt}),r.d(o,"e",function(){return j}),r.d(o,"f",function(){return $}),r.d(o,"g",function(){return j}),r.d(o,"h",function(){return bt}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return it}),r.d(o,"k",function(){return q});var s,c,h,v,g,b,w,O={},S=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(Ce,ge){for(var Se in ge)Ce[Se]=ge[Se];return Ce}function k(Ce){var ge=Ce.parentNode;ge&&ge.removeChild(Ce)}function j(Ce,ge,Se){var ht,zt,Ot,rn={};for(Ot in ge)Ot=="key"?ht=ge[Ot]:Ot=="ref"?zt=ge[Ot]:rn[Ot]=ge[Ot];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Se),typeof Ce=="function"&&Ce.defaultProps!=null)for(Ot in Ce.defaultProps)rn[Ot]===void 0&&(rn[Ot]=Ce.defaultProps[Ot]);return R(Ce,rn,ht,zt,null)}function R(Ce,ge,Se,ht,zt){var Ot={type:Ce,props:ge,key:Se,ref:ht,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:zt??++h};return zt==null&&c.vnode!=null&&c.vnode(Ot),Ot}function $(){return{current:null}}function V(Ce){return Ce.children}function H(Ce,ge){this.props=Ce,this.context=ge}function Y(Ce,ge){if(ge==null)return Ce.__?Y(Ce.__,Ce.__.__k.indexOf(Ce)+1):null;for(var Se;ge<Ce.__k.length;ge++)if((Se=Ce.__k[ge])!=null&&Se.__e!=null)return Se.__e;return typeof Ce.type=="function"?Y(Ce):null}function Q(Ce){var ge,Se;if((Ce=Ce.__)!=null&&Ce.__c!=null){for(Ce.__e=Ce.__c.base=null,ge=0;ge<Ce.__k.length;ge++)if((Se=Ce.__k[ge])!=null&&Se.__e!=null){Ce.__e=Ce.__c.base=Se.__e;break}return Q(Ce)}}function W(Ce){(!Ce.__d&&(Ce.__d=!0)&&v.push(Ce)&&!I.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(I)}function I(){for(var Ce;I.__r=v.length;)Ce=v.sort(function(ge,Se){return ge.__v.__b-Se.__v.__b}),v=[],Ce.some(function(ge){var Se,ht,zt,Ot,rn,yn;ge.__d&&(rn=(Ot=(Se=ge).__v).__e,(yn=Se.__P)&&(ht=[],(zt=A({},Ot)).__v=Ot.__v+1,Pe(yn,Ot,zt,Se.__n,yn.ownerSVGElement!==void 0,Ot.__h!=null?[rn]:null,ht,rn??Y(Ot),Ot.__h),le(ht,Ot),Ot.__e!=rn&&Q(Ot)))})}function z(Ce,ge,Se,ht,zt,Ot,rn,yn,Tn,pn){var ft,xn,$e,mn,Kn,ne,$n,xr=ht&&ht.__k||S,Ur=xr.length;for(Se.__k=[],ft=0;ft<ge.length;ft++)if((mn=Se.__k[ft]=(mn=ge[ft])==null||typeof mn=="boolean"?null:typeof mn=="string"||typeof mn=="number"||typeof mn=="bigint"?R(null,mn,null,null,mn):Array.isArray(mn)?R(V,{children:mn},null,null,null):mn.__b>0?R(mn.type,mn.props,mn.key,null,mn.__v):mn)!=null){if(mn.__=Se,mn.__b=Se.__b+1,($e=xr[ft])===null||$e&&mn.key==$e.key&&mn.type===$e.type)xr[ft]=void 0;else for(xn=0;xn<Ur;xn++){if(($e=xr[xn])&&mn.key==$e.key&&mn.type===$e.type){xr[xn]=void 0;break}$e=null}Pe(Ce,mn,$e=$e||O,zt,Ot,rn,yn,Tn,pn),Kn=mn.__e,(xn=mn.ref)&&$e.ref!=xn&&($n||($n=[]),$e.ref&&$n.push($e.ref,null,mn),$n.push(xn,mn.__c||Kn,mn)),Kn!=null?(ne==null&&(ne=Kn),typeof mn.type=="function"&&mn.__k===$e.__k?mn.__d=Tn=K(mn,Tn,Ce):Tn=ce(Ce,mn,$e,xr,Kn,Tn),typeof Se.type=="function"&&(Se.__d=Tn)):Tn&&$e.__e==Tn&&Tn.parentNode!=Ce&&(Tn=Y($e))}for(Se.__e=ne,ft=Ur;ft--;)xr[ft]!=null&&(typeof Se.type=="function"&&xr[ft].__e!=null&&xr[ft].__e==Se.__d&&(Se.__d=Y(ht,ft+1)),We(xr[ft],xr[ft]));if($n)for(ft=0;ft<$n.length;ft++)Me($n[ft],$n[++ft],$n[++ft])}function K(Ce,ge,Se){for(var ht,zt=Ce.__k,Ot=0;zt&&Ot<zt.length;Ot++)(ht=zt[Ot])&&(ht.__=Ce,ge=typeof ht.type=="function"?K(ht,ge,Se):ce(Se,ht,ht,zt,ht.__e,ge));return ge}function q(Ce,ge){return ge=ge||[],Ce==null||typeof Ce=="boolean"||(Array.isArray(Ce)?Ce.some(function(Se){q(Se,ge)}):ge.push(Ce)),ge}function ce(Ce,ge,Se,ht,zt,Ot){var rn,yn,Tn;if(ge.__d!==void 0)rn=ge.__d,ge.__d=void 0;else if(Se==null||zt!=Ot||zt.parentNode==null)e:if(Ot==null||Ot.parentNode!==Ce)Ce.appendChild(zt),rn=null;else{for(yn=Ot,Tn=0;(yn=yn.nextSibling)&&Tn<ht.length;Tn+=2)if(yn==zt)break e;Ce.insertBefore(zt,Ot),rn=Ot}return rn!==void 0?rn:zt.nextSibling}function ke(Ce,ge,Se){ge[0]==="-"?Ce.setProperty(ge,Se):Ce[ge]=Se==null?"":typeof Se!="number"||P.test(ge)?Se:Se+"px"}function Oe(Ce,ge,Se,ht,zt){var Ot;e:if(ge==="style")if(typeof Se=="string")Ce.style.cssText=Se;else{if(typeof ht=="string"&&(Ce.style.cssText=ht=""),ht)for(ge in ht)Se&&ge in Se||ke(Ce.style,ge,"");if(Se)for(ge in Se)ht&&Se[ge]===ht[ge]||ke(Ce.style,ge,Se[ge])}else if(ge[0]==="o"&&ge[1]==="n")Ot=ge!==(ge=ge.replace(/Capture$/,"")),ge=ge.toLowerCase()in Ce?ge.toLowerCase().slice(2):ge.slice(2),Ce.l||(Ce.l={}),Ce.l[ge+Ot]=Se,Se?ht||Ce.addEventListener(ge,Ot?Ie:ze,Ot):Ce.removeEventListener(ge,Ot?Ie:ze,Ot);else if(ge!=="dangerouslySetInnerHTML"){if(zt)ge=ge.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(ge!=="href"&&ge!=="list"&&ge!=="form"&&ge!=="tabIndex"&&ge!=="download"&&ge in Ce)try{Ce[ge]=Se??"";break e}catch{}typeof Se=="function"||(Se!=null&&(Se!==!1||ge[0]==="a"&&ge[1]==="r")?Ce.setAttribute(ge,Se):Ce.removeAttribute(ge))}}function ze(Ce){this.l[Ce.type+!1](c.event?c.event(Ce):Ce)}function Ie(Ce){this.l[Ce.type+!0](c.event?c.event(Ce):Ce)}function Pe(Ce,ge,Se,ht,zt,Ot,rn,yn,Tn){var pn,ft,xn,$e,mn,Kn,ne,$n,xr,Ur,no,jn=ge.type;if(ge.constructor!==void 0)return null;Se.__h!=null&&(Tn=Se.__h,yn=ge.__e=Se.__e,ge.__h=null,Ot=[yn]),(pn=c.__b)&&pn(ge);try{e:if(typeof jn=="function"){if($n=ge.props,xr=(pn=jn.contextType)&&ht[pn.__c],Ur=pn?xr?xr.props.value:pn.__:ht,Se.__c?ne=(ft=ge.__c=Se.__c).__=ft.__E:("prototype"in jn&&jn.prototype.render?ge.__c=ft=new jn($n,Ur):(ge.__c=ft=new H($n,Ur),ft.constructor=jn,ft.render=je),xr&&xr.sub(ft),ft.props=$n,ft.state||(ft.state={}),ft.context=Ur,ft.__n=ht,xn=ft.__d=!0,ft.__h=[]),ft.__s==null&&(ft.__s=ft.state),jn.getDerivedStateFromProps!=null&&(ft.__s==ft.state&&(ft.__s=A({},ft.__s)),A(ft.__s,jn.getDerivedStateFromProps($n,ft.__s))),$e=ft.props,mn=ft.state,xn)jn.getDerivedStateFromProps==null&&ft.componentWillMount!=null&&ft.componentWillMount(),ft.componentDidMount!=null&&ft.__h.push(ft.componentDidMount);else{if(jn.getDerivedStateFromProps==null&&$n!==$e&&ft.componentWillReceiveProps!=null&&ft.componentWillReceiveProps($n,Ur),!ft.__e&&ft.shouldComponentUpdate!=null&&ft.shouldComponentUpdate($n,ft.__s,Ur)===!1||ge.__v===Se.__v){ft.props=$n,ft.state=ft.__s,ge.__v!==Se.__v&&(ft.__d=!1),ft.__v=ge,ge.__e=Se.__e,ge.__k=Se.__k,ge.__k.forEach(function(Co){Co&&(Co.__=ge)}),ft.__h.length&&rn.push(ft);break e}ft.componentWillUpdate!=null&&ft.componentWillUpdate($n,ft.__s,Ur),ft.componentDidUpdate!=null&&ft.__h.push(function(){ft.componentDidUpdate($e,mn,Kn)})}ft.context=Ur,ft.props=$n,ft.state=ft.__s,(pn=c.__r)&&pn(ge),ft.__d=!1,ft.__v=ge,ft.__P=Ce,pn=ft.render(ft.props,ft.state,ft.context),ft.state=ft.__s,ft.getChildContext!=null&&(ht=A(A({},ht),ft.getChildContext())),xn||ft.getSnapshotBeforeUpdate==null||(Kn=ft.getSnapshotBeforeUpdate($e,mn)),no=pn!=null&&pn.type===V&&pn.key==null?pn.props.children:pn,z(Ce,Array.isArray(no)?no:[no],ge,Se,ht,zt,Ot,rn,yn,Tn),ft.base=ge.__e,ge.__h=null,ft.__h.length&&rn.push(ft),ne&&(ft.__E=ft.__=null),ft.__e=!1}else Ot==null&&ge.__v===Se.__v?(ge.__k=Se.__k,ge.__e=Se.__e):ge.__e=ye(Se.__e,ge,Se,ht,zt,Ot,rn,Tn);(pn=c.diffed)&&pn(ge)}catch(Co){ge.__v=null,(Tn||Ot!=null)&&(ge.__e=yn,ge.__h=!!Tn,Ot[Ot.indexOf(yn)]=null),c.__e(Co,ge,Se)}}function le(Ce,ge){c.__c&&c.__c(ge,Ce),Ce.some(function(Se){try{Ce=Se.__h,Se.__h=[],Ce.some(function(ht){ht.call(Se)})}catch(ht){c.__e(ht,Se.__v)}})}function ye(Ce,ge,Se,ht,zt,Ot,rn,yn){var Tn,pn,ft,xn=Se.props,$e=ge.props,mn=ge.type,Kn=0;if(mn==="svg"&&(zt=!0),Ot!=null){for(;Kn<Ot.length;Kn++)if((Tn=Ot[Kn])&&"setAttribute"in Tn==!!mn&&(mn?Tn.localName===mn:Tn.nodeType===3)){Ce=Tn,Ot[Kn]=null;break}}if(Ce==null){if(mn===null)return document.createTextNode($e);Ce=zt?document.createElementNS("http://www.w3.org/2000/svg",mn):document.createElement(mn,$e.is&&$e),Ot=null,yn=!1}if(mn===null)xn===$e||yn&&Ce.data===$e||(Ce.data=$e);else{if(Ot=Ot&&s.call(Ce.childNodes),pn=(xn=Se.props||O).dangerouslySetInnerHTML,ft=$e.dangerouslySetInnerHTML,!yn){if(Ot!=null)for(xn={},Kn=0;Kn<Ce.attributes.length;Kn++)xn[Ce.attributes[Kn].name]=Ce.attributes[Kn].value;(ft||pn)&&(ft&&(pn&&ft.__html==pn.__html||ft.__html===Ce.innerHTML)||(Ce.innerHTML=ft&&ft.__html||""))}if(function(ne,$n,xr,Ur,no){var jn;for(jn in xr)jn==="children"||jn==="key"||jn in $n||Oe(ne,jn,null,xr[jn],Ur);for(jn in $n)no&&typeof $n[jn]!="function"||jn==="children"||jn==="key"||jn==="value"||jn==="checked"||xr[jn]===$n[jn]||Oe(ne,jn,$n[jn],xr[jn],Ur)}(Ce,$e,xn,zt,yn),ft)ge.__k=[];else if(Kn=ge.props.children,z(Ce,Array.isArray(Kn)?Kn:[Kn],ge,Se,ht,zt&&mn!=="foreignObject",Ot,rn,Ot?Ot[0]:Se.__k&&Y(Se,0),yn),Ot!=null)for(Kn=Ot.length;Kn--;)Ot[Kn]!=null&&k(Ot[Kn]);yn||("value"in $e&&(Kn=$e.value)!==void 0&&(Kn!==xn.value||Kn!==Ce.value||mn==="progress"&&!Kn)&&Oe(Ce,"value",Kn,xn.value,!1),"checked"in $e&&(Kn=$e.checked)!==void 0&&Kn!==Ce.checked&&Oe(Ce,"checked",Kn,xn.checked,!1))}return Ce}function Me(Ce,ge,Se){try{typeof Ce=="function"?Ce(ge):Ce.current=ge}catch(ht){c.__e(ht,Se)}}function We(Ce,ge,Se){var ht,zt;if(c.unmount&&c.unmount(Ce),(ht=Ce.ref)&&(ht.current&&ht.current!==Ce.__e||Me(ht,null,ge)),(ht=Ce.__c)!=null){if(ht.componentWillUnmount)try{ht.componentWillUnmount()}catch(Ot){c.__e(Ot,ge)}ht.base=ht.__P=null}if(ht=Ce.__k)for(zt=0;zt<ht.length;zt++)ht[zt]&&We(ht[zt],ge,typeof Ce.type!="function");Se||Ce.__e==null||k(Ce.__e),Ce.__e=Ce.__d=void 0}function je(Ce,ge,Se){return this.constructor(Ce,Se)}function it(Ce,ge,Se){var ht,zt,Ot;c.__&&c.__(Ce,ge),zt=(ht=typeof Se=="function")?null:Se&&Se.__k||ge.__k,Ot=[],Pe(ge,Ce=(!ht&&Se||ge).__k=j(V,null,[Ce]),zt||O,O,ge.ownerSVGElement!==void 0,!ht&&Se?[Se]:zt?null:ge.firstChild?s.call(ge.childNodes):null,Ot,!ht&&Se?Se:zt?zt.__e:ge.firstChild,ht),le(Ot,Ce)}function bt(Ce,ge){it(Ce,ge,bt)}function Mt(Ce,ge,Se){var ht,zt,Ot,rn=A({},Ce.props);for(Ot in ge)Ot=="key"?ht=ge[Ot]:Ot=="ref"?zt=ge[Ot]:rn[Ot]=ge[Ot];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Se),R(Ce.type,rn,ht||Ce.key,zt||Ce.ref,null)}function Yt(Ce,ge){var Se={__c:ge="__cC"+w++,__:Ce,Consumer:function(ht,zt){return ht.children(zt)},Provider:function(ht){var zt,Ot;return this.getChildContext||(zt=[],(Ot={})[ge]=this,this.getChildContext=function(){return Ot},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&zt.some(W)},this.sub=function(rn){zt.push(rn);var yn=rn.componentWillUnmount;rn.componentWillUnmount=function(){zt.splice(zt.indexOf(rn),1),yn&&yn.call(rn)}}),ht.children}};return Se.Provider.__=Se.Consumer.contextType=Se}s=S.slice,c={__e:function(Ce,ge){for(var Se,ht,zt;ge=ge.__;)if((Se=ge.__c)&&!Se.__)try{if((ht=Se.constructor)&&ht.getDerivedStateFromError!=null&&(Se.setState(ht.getDerivedStateFromError(Ce)),zt=Se.__d),Se.componentDidCatch!=null&&(Se.componentDidCatch(Ce),zt=Se.__d),zt)return Se.__E=Se}catch(Ot){Ce=Ot}throw Ce}},h=0,H.prototype.setState=function(Ce,ge){var Se;Se=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof Ce=="function"&&(Ce=Ce(A({},Se),this.props)),Ce&&A(Se,Ce),Ce!=null&&this.__v&&(ge&&this.__h.push(ge),W(this))},H.prototype.forceUpdate=function(Ce){this.__v&&(this.__e=!0,Ce&&this.__h.push(Ce),W(this))},H.prototype.render=V,v=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,I.__r=0,w=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return W}),r.d(o,"b",function(){return kc}),r.d(o,"c",function(){return Ta}),r.d(o,"d",function(){return Xn}),r.d(o,"e",function(){return qt}),r.d(o,"f",function(){return en}),r.d(o,"g",function(){return Bn}),r.d(o,"h",function(){return ki}),r.d(o,"i",function(){return no}),r.d(o,"j",function(){return Sn}),r.d(o,"k",function(){return pl}),r.d(o,"l",function(){return xc}),r.d(o,"m",function(){return ne}),r.d(o,"n",function(){return uu}),r.d(o,"o",function(){return K}),r.d(o,"p",function(){return Uf}),r.d(o,"q",function(){return ha}),r.d(o,"r",function(){return su}),r.d(o,"s",function(){return oa}),r.d(o,"t",function(){return jo}),r.d(o,"u",function(){return Os}),r.d(o,"v",function(){return Bf}),r.d(o,"w",function(){return Ac}),r.d(o,"x",function(){return ii}),r.d(o,"y",function(){return ya}),r.d(o,"z",function(){return Vo}),r.d(o,"A",function(){return li}),r.d(o,"B",function(){return na}),r.d(o,"C",function(){return pn}),r.d(o,"D",function(){return Tc}),r.d(o,"E",function(){return Gr}),r.d(o,"F",function(){return Wr}),r.d(o,"G",function(){return Ec}),r.d(o,"H",function(){return wc}),r.d(o,"I",function(){return Mc}),r.d(o,"J",function(){return ai}),r.d(o,"K",function(){return Ke}),r.d(o,"L",function(){return ro}),r.d(o,"M",function(){return As});var h=[];Object.freeze(h);var v={};function g(){return++Pn.mobxGuid}function b(T){throw w(!1,T),"X"}function w(T,M){if(!T)throw new Error("[mobx] "+(M||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(v);function O(T){var M=!1;return function(){if(!M)return M=!0,T.apply(this,arguments)}}var S=function(){};function P(T){return T!==null&&typeof T=="object"}function A(T){if(T===null||typeof T!="object")return!1;var M=Object.getPrototypeOf(T);return M===Object.prototype||M===null}function k(T,M,U){Object.defineProperty(T,M,{enumerable:!1,writable:!0,configurable:!0,value:U})}function j(T,M){var U="isMobX"+T;return M.prototype[U]=!0,function(te){return P(te)&&te[U]===!0}}function R(T){return T instanceof Map}function $(T){return T instanceof Set}function V(T){var M=new Set;for(var U in T)M.add(U);return Object.getOwnPropertySymbols(T).forEach(function(te){Object.getOwnPropertyDescriptor(T,te).enumerable&&M.add(te)}),Array.from(M)}function H(T){return T&&T.toString?T.toString():new String(T).toString()}function Y(T){return T===null?null:typeof T=="object"?""+T:T}var Q=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:Object.getOwnPropertyNames,W=Symbol("mobx administration"),I=function(){function T(M){M===void 0&&(M="Atom@"+g()),this.name=M,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=xn.NOT_TRACKING}return T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.reportObserved=function(){return Es(this)},T.prototype.reportChanged=function(){qi(),function(M){M.lowestObserverState!==xn.STALE&&(M.lowestObserverState=xn.STALE,M.observers.forEach(function(U){U.dependenciesState===xn.UP_TO_DATE&&(U.isTracing!==$e.NONE&&Aa(U,M),U.onBecomeStale()),U.dependenciesState=xn.STALE}))}(this),ta()},T.prototype.toString=function(){return this.name},T}(),z=j("Atom",I);function K(T,M,U){M===void 0&&(M=S),U===void 0&&(U=S);var te,me=new I(T);return M!==S&&Ff("onBecomeObserved",me,M,te),U!==S&&Gr(me,U),me}var q={identity:function(T,M){return T===M},structural:function(T,M){return jt(T,M)},default:function(T,M){return Object.is(T,M)},shallow:function(T,M){return jt(T,M,1)}},ce=function(T,M){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,te){U.__proto__=te}||function(U,te){for(var me in te)te.hasOwnProperty(me)&&(U[me]=te[me])},ce(T,M)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var ke=function(){return ke=Object.assign||function(T){for(var M,U=1,te=arguments.length;U<te;U++)for(var me in M=arguments[U])Object.prototype.hasOwnProperty.call(M,me)&&(T[me]=M[me]);return T},ke.apply(this,arguments)};function Oe(T){var M=typeof Symbol=="function"&&T[Symbol.iterator],U=0;return M?M.call(T):{next:function(){return T&&U>=T.length&&(T=void 0),{value:T&&T[U++],done:!T}}}}function ze(T,M){var U=typeof Symbol=="function"&&T[Symbol.iterator];if(!U)return T;var te,me,Ve=U.call(T),vt=[];try{for(;(M===void 0||M-- >0)&&!(te=Ve.next()).done;)vt.push(te.value)}catch(Ht){me={error:Ht}}finally{try{te&&!te.done&&(U=Ve.return)&&U.call(Ve)}finally{if(me)throw me.error}}return vt}function Ie(){for(var T=[],M=0;M<arguments.length;M++)T=T.concat(ze(arguments[M]));return T}var Pe=Symbol("mobx did run lazy initializers"),le=Symbol("mobx pending decorators"),ye={},Me={};function We(T,M){var U=M?ye:Me;return U[T]||(U[T]={configurable:!0,enumerable:M,get:function(){return je(this),this[T]},set:function(te){je(this),this[T]=te}})}function je(T){var M,U;if(T[Pe]!==!0){var te=T[le];if(te){k(T,Pe,!0);var me=Ie(Object.getOwnPropertySymbols(te),Object.keys(te));try{for(var Ve=Oe(me),vt=Ve.next();!vt.done;vt=Ve.next()){var Ht=te[vt.value];Ht.propertyCreator(T,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(_n){M={error:_n}}finally{try{vt&&!vt.done&&(U=Ve.return)&&U.call(Ve)}finally{if(M)throw M.error}}}}}function it(T,M){return function(){var U,te=function(me,Ve,vt,Ht){if(Ht===!0)return M(me,Ve,vt,me,U),null;if(!Object.prototype.hasOwnProperty.call(me,le)){var _n=me[le];k(me,le,ke({},_n))}return me[le][Ve]={prop:Ve,propertyCreator:M,descriptor:vt,decoratorTarget:me,decoratorArguments:U},We(Ve,T)};return bt(arguments)?(U=h,te.apply(null,arguments)):(U=Array.prototype.slice.call(arguments),te)}}function bt(T){return(T.length===2||T.length===3)&&(typeof T[1]=="string"||typeof T[1]=="symbol")||T.length===4&&T[3]===!0}function Mt(T,M,U){return ii(T)?T:Array.isArray(T)?pn.array(T,{name:U}):A(T)?pn.object(T,void 0,{name:U}):R(T)?pn.map(T,{name:U}):$(T)?pn.set(T,{name:U}):T}function Yt(T){return T}function Ce(T){w(T);var M=it(!0,function(te,me,Ve,vt,Ht){var _n=Ve?Ve.initializer?Ve.initializer.call(te):Ve.value:void 0;ra(te).addObservableProp(me,_n,T)}),U=(s!==void 0&&s.env,M);return U.enhancer=T,U}var ge={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Se(T){return T==null?ge:typeof T=="string"?{name:T,deep:!0,proxy:!0}:T}Object.freeze(ge);var ht=Ce(Mt),zt=Ce(function(T,M,U){return T==null||li(T)||ya(T)||Vo(T)||Ko(T)?T:Array.isArray(T)?pn.array(T,{name:U,deep:!1}):A(T)?pn.object(T,void 0,{name:U,deep:!1}):R(T)?pn.map(T,{name:U,deep:!1}):$(T)?pn.set(T,{name:U,deep:!1}):b(!1)}),Ot=Ce(Yt),rn=Ce(function(T,M,U){return jt(T,M)?M:T});function yn(T){return T.defaultDecorator?T.defaultDecorator.enhancer:T.deep===!1?Yt:Mt}var Tn={box:function(T,M){arguments.length>2&&ft("box");var U=Se(M);return new Rr(T,yn(U),U.name,!0,U.equals)},array:function(T,M){arguments.length>2&&ft("array");var U=Se(M);return Ll(T,yn(U),U.name)},map:function(T,M){arguments.length>2&&ft("map");var U=Se(M);return new kc(T,yn(U),U.name)},set:function(T,M){arguments.length>2&&ft("set");var U=Se(M);return new za(T,yn(U),U.name)},object:function(T,M,U){typeof arguments[1]=="string"&&ft("object");var te=Se(U);if(te.proxy===!1)return ha({},T,M,te);var me=xs(te),Ve=ha({},void 0,void 0,te),vt=cu(Ve);return $f(vt,T,M,me),vt},ref:Ot,shallow:zt,deep:ht,struct:rn},pn=function(T,M,U){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ht.apply(null,arguments);if(ii(T))return T;var te=A(T)?pn.object(T,M,U):Array.isArray(T)?pn.array(T,M):R(T)?pn.map(T,M):$(T)?pn.set(T,M):T;if(te!==T)return te;b(!1)};function ft(T){b("Expected one or two arguments to observable."+T+". Did you accidentally try to use observable."+T+" as decorator?")}Object.keys(Tn).forEach(function(T){return pn[T]=Tn[T]});var xn,$e,mn=it(!1,function(T,M,U,te,me){var Ve=U.get,vt=U.set,Ht=me[0]||{};ra(T).addComputedProp(T,M,ke({get:Ve,set:vt,context:T},Ht))}),Kn=mn({equals:q.structural}),ne=function(T,M,U){if(typeof M=="string"||T!==null&&typeof T=="object"&&arguments.length===1)return mn.apply(null,arguments);var te=typeof M=="object"?M:{};return te.get=T,te.set=typeof M=="function"?M:te.set,te.name=te.name||T.name||"",new Ga(te)};ne.struct=Kn,function(T){T[T.NOT_TRACKING=-1]="NOT_TRACKING",T[T.UP_TO_DATE=0]="UP_TO_DATE",T[T.POSSIBLY_STALE=1]="POSSIBLY_STALE",T[T.STALE=2]="STALE"}(xn||(xn={})),function(T){T[T.NONE=0]="NONE",T[T.LOG=1]="LOG",T[T.BREAK=2]="BREAK"}($e||($e={}));var $n=function(T){this.cause=T};function xr(T){return T instanceof $n}function Ur(T){switch(T.dependenciesState){case xn.UP_TO_DATE:return!1;case xn.NOT_TRACKING:case xn.STALE:return!0;case xn.POSSIBLY_STALE:for(var M=en(!0),U=De(),te=T.observing,me=te.length,Ve=0;Ve<me;Ve++){var vt=te[Ve];if(dl(vt)){if(Pn.disableErrorBoundaries)vt.get();else try{vt.get()}catch{return at(U),qt(M),!0}if(T.dependenciesState===xn.STALE)return at(U),qt(M),!0}}return Nn(T),at(U),qt(M),!1}}function no(){return Pn.trackingDerivation!==null}function jn(T){var M=T.observers.size>0;Pn.computationDepth>0&&M&&b(!1),Pn.allowStateChanges||!M&&Pn.enforceActions!=="strict"||b(!1)}function Co(T,M,U){var te=en(!0);Nn(T),T.newObserving=new Array(T.observing.length+100),T.unboundDepsCount=0,T.runId=++Pn.runId;var me,Ve=Pn.trackingDerivation;if(Pn.trackingDerivation=T,Pn.disableErrorBoundaries===!0)me=M.call(U);else try{me=M.call(U)}catch(vt){me=new $n(vt)}return Pn.trackingDerivation=Ve,function(vt){for(var Ht=vt.observing,_n=vt.observing=vt.newObserving,yr=xn.UP_TO_DATE,ln=0,Vr=vt.unboundDepsCount,pr=0;pr<Vr;pr++)(Cr=_n[pr]).diffValue===0&&(Cr.diffValue=1,ln!==pr&&(_n[ln]=Cr),ln++),Cr.dependenciesState>yr&&(yr=Cr.dependenciesState);for(_n.length=ln,vt.newObserving=null,Vr=Ht.length;Vr--;)(Cr=Ht[Vr]).diffValue===0&&vo(Cr,vt),Cr.diffValue=0;for(;ln--;){var Cr;(Cr=_n[ln]).diffValue===1&&(Cr.diffValue=0,Df(Cr,vt))}yr!==xn.UP_TO_DATE&&(vt.dependenciesState=yr,vt.onBecomeStale())}(T),qt(te),me}function Ee(T){var M=T.observing;T.observing=[];for(var U=M.length;U--;)vo(M[U],T);T.dependenciesState=xn.NOT_TRACKING}function Ke(T){var M=De();try{return T()}finally{at(M)}}function De(){var T=Pn.trackingDerivation;return Pn.trackingDerivation=null,T}function at(T){Pn.trackingDerivation=T}function en(T){var M=Pn.allowStateReads;return Pn.allowStateReads=T,M}function qt(T){Pn.allowStateReads=T}function Nn(T){if(T.dependenciesState!==xn.UP_TO_DATE){T.dependenciesState=xn.UP_TO_DATE;for(var M=T.observing,U=M.length;U--;)M[U].lowestObserverState=xn.UP_TO_DATE}}var _r=0,oi=1,mi=Object.getOwnPropertyDescriptor(function(){},"name");mi&&mi.configurable;function Go(T,M,U){var te=function(){return qo(T,M,U||this,arguments)};return te.isMobxAction=!0,te}function qo(T,M,U,te){var me=Sn();try{return M.apply(U,te)}catch(Ve){throw me.error=Ve,Ve}finally{Bn(me)}}function Sn(T,M,U){var te=0,me=De();qi();var Ve={prevDerivation:me,prevAllowStateChanges:ir(!0),prevAllowStateReads:en(!0),notifySpy:!1,startTime:te,actionId:oi++,parentActionId:_r};return _r=Ve.actionId,Ve}function Bn(T){_r!==T.actionId&&b("invalid action stack. did you forget to finish an action?"),_r=T.parentActionId,T.error!==void 0&&(Pn.suppressReactionErrors=!0),Kr(T.prevAllowStateChanges),qt(T.prevAllowStateReads),ta(),at(T.prevDerivation),T.notifySpy,Pn.suppressReactionErrors=!1}function Xn(T,M){var U,te=ir(T);try{U=M()}finally{Kr(te)}return U}function ir(T){var M=Pn.allowStateChanges;return Pn.allowStateChanges=T,M}function Kr(T){Pn.allowStateChanges=T}var Rr=function(T){function M(U,te,me,Ve,vt){me===void 0&&(me="ObservableValue@"+g()),vt===void 0&&(vt=q.default);var Ht=T.call(this,me)||this;return Ht.enhancer=te,Ht.name=me,Ht.equals=vt,Ht.hasUnreportedChange=!1,Ht.value=te(U,void 0,me),Ht}return function(U,te){function me(){this.constructor=U}ce(U,te),U.prototype=te===null?Object.create(te):(me.prototype=te.prototype,new me)}(M,T),M.prototype.dehanceValue=function(U){return this.dehancer!==void 0?this.dehancer(U):U},M.prototype.set=function(U){this.value,(U=this.prepareNewValue(U))!==Pn.UNCHANGED&&this.setNewValue(U)},M.prototype.prepareNewValue=function(U){if(jn(this),Ki(this)){var te=Tr(this,{object:this,type:"update",newValue:U});if(!te)return Pn.UNCHANGED;U=te.newValue}return U=this.enhancer(U,this.value,this.name),this.equals(this.value,U)?Pn.UNCHANGED:U},M.prototype.setNewValue=function(U){var te=this.value;this.value=U,this.reportChanged(),$i(this)&&di(this,{type:"update",object:this,newValue:U,oldValue:te})},M.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},M.prototype.intercept=function(U){return va(this,U)},M.prototype.observe=function(U,te){return te&&U({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ma(this,U)},M.prototype.toJSON=function(){return this.get()},M.prototype.toString=function(){return this.name+"["+this.value+"]"},M.prototype.valueOf=function(){return Y(this.get())},M.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},M}(I),fl=j("ObservableValue",Rr),Ga=function(){function T(M){this.dependenciesState=xn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=xn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new $n(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$e.NONE,w(M.get,"missing option for computed: get"),this.derivation=M.get,this.name=M.name||"ComputedValue@"+g(),M.set&&(this.setter=Go(this.name+"-setter",M.set)),this.equals=M.equals||(M.compareStructural||M.struct?q.structural:q.default),this.scope=M.context,this.requiresReaction=!!M.requiresReaction,this.keepAlive=!!M.keepAlive}return T.prototype.onBecomeStale=function(){(function(M){M.lowestObserverState===xn.UP_TO_DATE&&(M.lowestObserverState=xn.POSSIBLY_STALE,M.observers.forEach(function(U){U.dependenciesState===xn.UP_TO_DATE&&(U.dependenciesState=xn.POSSIBLY_STALE,U.isTracing!==$e.NONE&&Aa(U,M),U.onBecomeStale())}))})(this)},T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Es(this),Ur(this)&&this.trackAndCompute()&&function(U){U.lowestObserverState!==xn.STALE&&(U.lowestObserverState=xn.STALE,U.observers.forEach(function(te){te.dependenciesState===xn.POSSIBLY_STALE?te.dependenciesState=xn.STALE:te.dependenciesState===xn.UP_TO_DATE&&(U.lowestObserverState=xn.UP_TO_DATE)}))}(this)):Ur(this)&&(this.warnAboutUntrackedRead(),qi(),this.value=this.computeValue(!1),ta());var M=this.value;if(xr(M))throw M.cause;return M},T.prototype.peek=function(){var M=this.computeValue(!1);if(xr(M))throw M.cause;return M},T.prototype.set=function(M){if(this.setter){w(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,M)}finally{this.isRunningSetter=!1}}else w(!1,!1)},T.prototype.trackAndCompute=function(){var M=this.value,U=this.dependenciesState===xn.NOT_TRACKING,te=this.computeValue(!0),me=U||xr(M)||xr(te)||!this.equals(M,te);return me&&(this.value=te),me},T.prototype.computeValue=function(M){var U;if(this.isComputing=!0,Pn.computationDepth++,M)U=Co(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)U=this.derivation.call(this.scope);else try{U=this.derivation.call(this.scope)}catch(te){U=new $n(te)}return Pn.computationDepth--,this.isComputing=!1,U},T.prototype.suspend=function(){this.keepAlive||(Ee(this),this.value=void 0)},T.prototype.observe=function(M,U){var te=this,me=!0,Ve=void 0;return xc(function(){var vt=te.get();if(!me||U){var Ht=De();M({type:"update",object:te,newValue:vt,oldValue:Ve}),at(Ht)}me=!1,Ve=vt})},T.prototype.warnAboutUntrackedRead=function(){},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},T.prototype.valueOf=function(){return Y(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(),dl=j("ComputedValue",Ga),lu=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},zd={};function mc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:zd}var da=!0,Wu=!1,Pn=function(){var T=mc();return T.__mobxInstanceCount>0&&!T.__mobxGlobals&&(da=!1),T.__mobxGlobals&&T.__mobxGlobals.version!==new lu().version&&(da=!1),da?T.__mobxGlobals?(T.__mobxInstanceCount+=1,T.__mobxGlobals.UNCHANGED||(T.__mobxGlobals.UNCHANGED={}),T.__mobxGlobals):(T.__mobxInstanceCount=1,T.__mobxGlobals=new lu):(setTimeout(function(){Wu||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new lu)}();function Df(T,M){T.observers.add(M),T.lowestObserverState>M.dependenciesState&&(T.lowestObserverState=M.dependenciesState)}function vo(T,M){T.observers.delete(M),T.observers.size===0&&gc(T)}function gc(T){T.isPendingUnobservation===!1&&(T.isPendingUnobservation=!0,Pn.pendingUnobservations.push(T))}function qi(){Pn.inBatch++}function ta(){if(--Pn.inBatch==0){_c();for(var T=Pn.pendingUnobservations,M=0;M<T.length;M++){var U=T[M];U.isPendingUnobservation=!1,U.observers.size===0&&(U.isBeingObserved&&(U.isBeingObserved=!1,U.onBecomeUnobserved()),U instanceof Ga&&U.suspend())}Pn.pendingUnobservations=[]}}function Es(T){var M=Pn.trackingDerivation;return M!==null?(M.runId!==T.lastAccessedBy&&(T.lastAccessedBy=M.runId,M.newObserving[M.unboundDepsCount++]=T,T.isBeingObserved||(T.isBeingObserved=!0,T.onBecomeObserved())),!0):(T.observers.size===0&&Pn.inBatch>0&&gc(T),!1)}function Aa(T,M){if(T.isTracing===$e.BREAK){var U=[];pa(jo(T),U,1),new Function(`debugger;
/*
Tracing '`+T.name+`'

You are entering this break point because derivation '`+T.name+"' is being traced and '"+M.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(T instanceof Ga?T.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+U.join(`
`)+`
*/
    `)()}}function pa(T,M,U){M.length>=1e3?M.push("(and many more)"):(M.push(""+new Array(U).join("	")+T.name),T.dependencies&&T.dependencies.forEach(function(te){return pa(te,M,U+1)}))}var Ta=function(){function T(M,U,te,me){M===void 0&&(M="Reaction@"+g()),me===void 0&&(me=!1),this.name=M,this.onInvalidate=U,this.errorHandler=te,this.requiresObservable=me,this.observing=[],this.newObserving=[],this.dependenciesState=xn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$e.NONE}return T.prototype.onBecomeStale=function(){this.schedule()},T.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),_c())},T.prototype.isScheduled=function(){return this._isScheduled},T.prototype.runReaction=function(){if(!this.isDisposed){if(qi(),this._isScheduled=!1,Ur(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(M){this.reportExceptionInDerivation(M)}}ta()}},T.prototype.track=function(M){if(!this.isDisposed){qi(),this._isRunning=!0;var U=Co(this,M,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ee(this),xr(U)&&this.reportExceptionInDerivation(U.cause),ta()}},T.prototype.reportExceptionInDerivation=function(M){var U=this;if(this.errorHandler)this.errorHandler(M,this);else{if(Pn.disableErrorBoundaries)throw M;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(te){return te(M,U)})}},T.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(qi(),Ee(this),ta()))},T.prototype.getDisposer=function(){var M=this.dispose.bind(this);return M[W]=this,M},T.prototype.toString=function(){return"Reaction["+this.name+"]"},T.prototype.trace=function(M){M===void 0&&(M=!1),function(){for(var U=[],te=0;te<arguments.length;te++)U[te]=arguments[te];var me=!1;typeof U[U.length-1]=="boolean"&&(me=U.pop());var Ve=Lr(U);if(!Ve)return b(!1);Ve.isTracing,$e.NONE,Ve.isTracing=me?$e.BREAK:$e.LOG}(this,M)},T}(),bc=function(T){return T()};function _c(){Pn.inBatch>0||Pn.isRunningReactions||bc(Cf)}function Cf(){Pn.isRunningReactions=!0;for(var T=Pn.pendingReactions,M=0;T.length>0;){++M==100&&T.splice(0);for(var U=T.splice(0),te=0,me=U.length;te<me;te++)U[te].runReaction()}Pn.isRunningReactions=!1}var zu=j("Reaction",Ta);function jf(T){var M=bc;bc=function(U){return T(function(){return M(U)})}}function wc(T){return function(){}}function Hd(){b(!1)}function Cl(T){return function(M,U,te){if(te){if(te.value)return{value:Go(T,te.value),enumerable:!1,configurable:!0,writable:!0};var me=te.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Go(T,me.call(this))}}}return If(T).apply(this,arguments)}}function If(T){return function(M,U,te){Object.defineProperty(M,U,{configurable:!0,enumerable:!1,get:function(){},set:function(me){k(this,U,pl(T,me))}})}}var pl=function(T,M,U,te){return arguments.length===1&&typeof T=="function"?Go(T.name||"<unnamed action>",T):arguments.length===2&&typeof M=="function"?Go(T,M):arguments.length===1&&typeof T=="string"?Cl(T):te!==!0?Cl(M).apply(null,arguments):void k(T,M,Go(T.name||M,U.value,this))};function Ec(T,M){return qo(typeof T=="string"?T:T.name||"<unnamed action>",typeof T=="function"?T:M,this,void 0)}function Os(T){return typeof T=="function"&&T.isMobxAction===!0}function Oc(T,M,U){k(T,M,Go(M,U.bind(T)))}function xc(T,M){M===void 0&&(M=v);var U,te=M&&M.name||T.name||"Autorun@"+g();if(!M.scheduler&&!M.delay)U=new Ta(te,function(){this.track(vt)},M.onError,M.requiresObservable);else{var me=Lf(M),Ve=!1;U=new Ta(te,function(){Ve||(Ve=!0,me(function(){Ve=!1,U.isDisposed||U.track(vt)}))},M.onError,M.requiresObservable)}function vt(){T(U)}return U.schedule(),U.getDisposer()}pl.bound=function(T,M,U,te){return te===!0?(Oc(T,M,U.value),null):U?{configurable:!0,enumerable:!1,get:function(){return Oc(this,M,U.value||U.initializer.call(this)),this[M]},set:Hd}:{enumerable:!1,configurable:!0,set:function(me){Oc(this,M,me)},get:function(){}}};var Xd=function(T){return T()};function Lf(T){return T.scheduler?T.scheduler:T.delay?function(M){return setTimeout(M,T.delay)}:Xd}function Wr(T,M,U){U===void 0&&(U=v);var te,me,Ve,vt=U.name||"Reaction@"+g(),Ht=pl(vt,U.onError?(te=U.onError,me=M,function(){try{return me.apply(this,arguments)}catch(bo){te.call(this,bo)}}):M),_n=!U.scheduler&&!U.delay,yr=Lf(U),ln=!0,Vr=!1,pr=U.compareStructural?q.structural:U.equals||q.default,Cr=new Ta(vt,function(){ln||_n?ia():Vr||(Vr=!0,yr(ia))},U.onError,U.requiresObservable);function ia(){if(Vr=!1,!Cr.isDisposed){var bo=!1;Cr.track(function(){var Ji=T(Cr);bo=ln||!pr(Ve,Ji),Ve=Ji}),ln&&U.fireImmediately&&Ht(Ve,Cr),ln||bo!==!0||Ht(Ve,Cr),ln&&(ln=!1)}}return Cr.schedule(),Cr.getDisposer()}function Gr(T,M,U){return Ff("onBecomeUnobserved",T,M,U)}function Ff(T,M,U,te){var me=typeof te=="function"?oa(M,U):oa(M),Ve=typeof te=="function"?te:U,vt=T+"Listeners";return me[vt]?me[vt].add(Ve):me[vt]=new Set([Ve]),typeof me[T]!="function"?b(!1):function(){var Ht=me[vt];Ht&&(Ht.delete(Ve),Ht.size===0&&delete me[vt])}}function uu(T){var M=T.enforceActions,U=T.computedRequiresReaction,te=T.computedConfigurable,me=T.disableErrorBoundaries,Ve=T.reactionScheduler,vt=T.reactionRequiresObservable,Ht=T.observableRequiresReaction;if(T.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Wu=!0,da&&(--mc().__mobxInstanceCount==0&&(mc().__mobxGlobals=void 0),Pn=new lu)),M!==void 0){var _n=void 0;switch(M){case!0:case"observed":_n=!0;break;case!1:case"never":_n=!1;break;case"strict":case"always":_n="strict";break;default:b("Invalid value for 'enforceActions': '"+M+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=_n,Pn.allowStateChanges=_n!==!0&&_n!=="strict"}U!==void 0&&(Pn.computedRequiresReaction=!!U),vt!==void 0&&(Pn.reactionRequiresObservable=!!vt),Ht!==void 0&&(Pn.observableRequiresReaction=!!Ht,Pn.allowStateReads=!Pn.observableRequiresReaction),te!==void 0&&(Pn.computedConfigurable=!!te),me!==void 0&&(Pn.disableErrorBoundaries=!!me),Ve&&jf(Ve)}function ha(T,M,U,te){var me=xs(te=Se(te));return je(T),ra(T,te.name,me.enhancer),M&&$f(T,M,U,me),T}function xs(T){return T.defaultDecorator||(T.deep===!1?Ot:ht)}function $f(T,M,U,te){var me,Ve;qi();try{var vt=Q(M);try{for(var Ht=Oe(vt),_n=Ht.next();!_n.done;_n=Ht.next()){var yr=_n.value,ln=Object.getOwnPropertyDescriptor(M,yr),Vr=(U&&yr in U?U[yr]:ln.get?mn:te)(T,yr,ln,!0);Vr&&Object.defineProperty(T,yr,Vr)}}catch(pr){me={error:pr}}finally{try{_n&&!_n.done&&(Ve=Ht.return)&&Ve.call(Ht)}finally{if(me)throw me.error}}}finally{ta()}}function jo(T,M){return jl(oa(T,M))}function jl(T){var M,U,te={name:T.name};return T.observing&&T.observing.length>0&&(te.dependencies=(M=T.observing,U=[],M.forEach(function(me){U.indexOf(me)===-1&&U.push(me)}),U).map(jl)),te}var Il=0;function Ss(){this.message="FLOW_CANCELLED"}function su(T){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var M=T.name||"<unnamed flow>";return function(){var U,te=this,me=arguments,Ve=++Il,vt=pl(M+" - runid: "+Ve+" - init",T).apply(te,me),Ht=void 0,_n=new Promise(function(yr,ln){var Vr=0;function pr(bo){var Ji;Ht=void 0;try{Ji=pl(M+" - runid: "+Ve+" - yield "+Vr++,vt.next).call(vt,bo)}catch(hl){return ln(hl)}ia(Ji)}function Cr(bo){var Ji;Ht=void 0;try{Ji=pl(M+" - runid: "+Ve+" - yield "+Vr++,vt.throw).call(vt,bo)}catch(hl){return ln(hl)}ia(Ji)}function ia(bo){if(!bo||typeof bo.then!="function")return bo.done?yr(bo.value):(Ht=Promise.resolve(bo.value)).then(pr,Cr);bo.then(ia,ln)}U=ln,pr(void 0)});return _n.cancel=pl(M+" - runid: "+Ve+" - cancel",function(){try{Ht&&gi(Ht);var yr=vt.return(void 0),ln=Promise.resolve(yr.value);ln.then(S,S),gi(ln),U(new Ss)}catch(Vr){U(Vr)}}),_n}}function gi(T){typeof T.cancel=="function"&&T.cancel()}function Sc(T,M){if(T==null)return!1;if(M!==void 0){if(li(T)===!1||!T[W].values.has(M))return!1;var U=oa(T,M);return dl(U)}return dl(T)}function Bf(T){return arguments.length>1?b(!1):Sc(T)}function Ac(T,M){return typeof M!="string"?b(!1):Sc(T,M)}function ji(T,M){return T!=null&&(M!==void 0?!!li(T)&&T[W].values.has(M):li(T)||!!T[W]||z(T)||zu(T)||dl(T))}function ii(T){return arguments.length!==1&&b(!1),ji(T)}function na(T){return li(T)?T[W].getKeys():Vo(T)||Ko(T)?Array.from(T.keys()):ya(T)?T.map(function(M,U){return U}):b(!1)}function ro(T){return li(T)?na(T).map(function(M){return T[M]}):Vo(T)?na(T).map(function(M){return T.get(M)}):Ko(T)?Array.from(T.values()):ya(T)?T.slice():b(!1)}function Uf(T){return li(T)?na(T).map(function(M){return[M,T[M]]}):Vo(T)?na(T).map(function(M){return[M,T.get(M)]}):Ko(T)?Array.from(T.entries()):ya(T)?T.map(function(M,U){return[U,M]}):b(!1)}function Ii(T,M,U){if(arguments.length!==2||Ko(T))if(li(T)){var te=T[W],me=te.values.get(M);me?te.write(M,U):te.addObservableProp(M,U,te.defaultEnhancer)}else if(Vo(T))T.set(M,U);else if(Ko(T))T.add(M);else{if(!ya(T))return b(!1);typeof M!="number"&&(M=parseInt(M,10)),w(M>=0,"Not a valid index: '"+M+"'"),qi(),M>=T.length&&(T.length=M+1),T[M]=U,ta()}else{qi();var Ve=M;try{for(var vt in Ve)Ii(T,vt,Ve[vt])}finally{ta()}}}function Tc(T,M,U,te){return typeof U=="function"?function(me,Ve,vt,Ht){return ki(me,Ve).observe(vt,Ht)}(T,M,U,te):function(me,Ve,vt){return ki(me).observe(Ve,vt)}(T,M,U)}Ss.prototype=Object.create(Error.prototype);var Gf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Li(T,M,U,te){return te.detectCycles&&T.set(M,U),U}function Ni(T,M,U){if(!M.recurseEverything&&!ii(T)||typeof T!="object")return T;if(T===null)return null;if(T instanceof Date)return T;if(fl(T))return Ni(T.get(),M,U);if(ii(T)&&na(T),M.detectCycles===!0&&T!==null&&U.has(T))return U.get(T);if(ya(T)||Array.isArray(T)){var te=Li(U,T,[],M),me=T.map(function(pr){return Ni(pr,M,U)});te.length=me.length;for(var Ve=0,vt=me.length;Ve<vt;Ve++)te[Ve]=me[Ve];return te}if(Ko(T)||Object.getPrototypeOf(T)===Set.prototype){if(M.exportMapsAsObjects===!1){var Ht=Li(U,T,new Set,M);return T.forEach(function(pr){Ht.add(Ni(pr,M,U))}),Ht}var _n=Li(U,T,[],M);return T.forEach(function(pr){_n.push(Ni(pr,M,U))}),_n}if(Vo(T)||Object.getPrototypeOf(T)===Map.prototype){if(M.exportMapsAsObjects===!1){var yr=Li(U,T,new Map,M);return T.forEach(function(pr,Cr){yr.set(Cr,Ni(pr,M,U))}),yr}var ln=Li(U,T,{},M);return T.forEach(function(pr,Cr){ln[Cr]=Ni(pr,M,U)}),ln}var Vr=Li(U,T,{},M);return V(T).forEach(function(pr){Vr[pr]=Ni(T[pr],M,U)}),Vr}function Mc(T,M){var U;return typeof M=="boolean"&&(M={detectCycles:M}),M||(M=Gf),M.detectCycles=M.detectCycles===void 0?M.recurseEverything===!0:M.detectCycles===!0,M.detectCycles&&(U=new Map),Ni(T,M,U)}function Lr(T){switch(T.length){case 0:return Pn.trackingDerivation;case 1:return oa(T[0]);case 2:return oa(T[0],T[1])}}function ai(T,M){M===void 0&&(M=void 0),qi();try{return T.apply(M)}finally{ta()}}function As(T,M,U){return arguments.length===1||M&&typeof M=="object"?Pc(T,M):Vf(T,M,U||{})}function Vf(T,M,U){var te;typeof U.timeout=="number"&&(te=setTimeout(function(){if(!Ve[W].isDisposed){Ve();var vt=new Error("WHEN_TIMEOUT");if(!U.onError)throw vt;U.onError(vt)}},U.timeout)),U.name=U.name||"When@"+g();var me=Go(U.name+"-effect",M),Ve=xc(function(vt){T()&&(vt.dispose(),te&&clearTimeout(te),me())},U);return Ve}function Pc(T,M){var U,te=new Promise(function(me,Ve){var vt=Vf(T,me,ke(ke({},M),{onError:Ve}));U=function(){vt(),Ve("WHEN_CANCELLED")}});return te.cancel=U,te}function Ts(T){return T[W]}function Va(T){return typeof T=="string"||typeof T=="number"||typeof T=="symbol"}var Fi={has:function(T,M){if(M===W||M==="constructor"||M===Pe)return!0;var U=Ts(T);return Va(M)?U.has(M):M in T},get:function(T,M){if(M===W||M==="constructor"||M===Pe)return T[M];var U=Ts(T),te=U.values.get(M);if(te instanceof I){var me=te.get();return me===void 0&&U.has(M),me}return Va(M)&&U.has(M),T[M]},set:function(T,M,U){return!!Va(M)&&(Ii(T,M,U),!0)},deleteProperty:function(T,M){return!!Va(M)&&(Ts(T).remove(M),!0)},ownKeys:function(T){return Ts(T).keysAtom.reportObserved(),Reflect.ownKeys(T)},preventExtensions:function(T){return b("Dynamic observable objects cannot be frozen"),!1}};function cu(T){var M=new Proxy(T,Fi);return T[W].proxy=M,M}function Ki(T){return T.interceptors!==void 0&&T.interceptors.length>0}function va(T,M){var U=T.interceptors||(T.interceptors=[]);return U.push(M),O(function(){var te=U.indexOf(M);te!==-1&&U.splice(te,1)})}function Tr(T,M){var U=De();try{for(var te=Ie(T.interceptors||[]),me=0,Ve=te.length;me<Ve&&(w(!(M=te[me](M))||M.type,"Intercept handlers should return nothing or a change object"),M);me++);return M}finally{at(U)}}function $i(T){return T.changeListeners!==void 0&&T.changeListeners.length>0}function Ma(T,M){var U=T.changeListeners||(T.changeListeners=[]);return U.push(M),O(function(){var te=U.indexOf(M);te!==-1&&U.splice(te,1)})}function di(T,M){var U=De(),te=T.changeListeners;if(te){for(var me=0,Ve=(te=te.slice()).length;me<Ve;me++)te[me](M);at(U)}}var fu={get:function(T,M){return M===W?T[W]:M==="length"?T[W].getArrayLength():typeof M=="number"?co.get.call(T,M):typeof M!="string"||isNaN(M)?co.hasOwnProperty(M)?co[M]:T[M]:co.get.call(T,parseInt(M))},set:function(T,M,U){return M==="length"&&T[W].setArrayLength(U),typeof M=="number"&&co.set.call(T,M,U),typeof M=="symbol"||isNaN(M)?T[M]=U:co.set.call(T,parseInt(M),U),!0},preventExtensions:function(T){return b("Observable arrays cannot be frozen"),!1}};function Ll(T,M,U,te){U===void 0&&(U="ObservableArray@"+g()),te===void 0&&(te=!1);var me,Ve,vt,Ht=new Pa(U,M,te);me=Ht.values,Ve=W,vt=Ht,Object.defineProperty(me,Ve,{enumerable:!1,writable:!1,configurable:!0,value:vt});var _n=new Proxy(Ht.values,fu);if(Ht.proxy=_n,T&&T.length){var yr=ir(!0);Ht.spliceWithArray(0,0,T),Kr(yr)}return _n}var Pa=function(){function T(M,U,te){this.owned=te,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new I(M||"ObservableArray@"+g()),this.enhancer=function(me,Ve){return U(me,Ve,M+"[..]")}}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.dehanceValues=function(M){return this.dehancer!==void 0&&M.length>0?M.map(this.dehancer):M},T.prototype.intercept=function(M){return va(this,M)},T.prototype.observe=function(M,U){return U===void 0&&(U=!1),U&&M({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ma(this,M)},T.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},T.prototype.setArrayLength=function(M){if(typeof M!="number"||M<0)throw new Error("[mobx.array] Out of range: "+M);var U=this.values.length;if(M!==U)if(M>U){for(var te=new Array(M-U),me=0;me<M-U;me++)te[me]=void 0;this.spliceWithArray(U,0,te)}else this.spliceWithArray(M,U-M)},T.prototype.updateArrayLength=function(M,U){if(M!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=U},T.prototype.spliceWithArray=function(M,U,te){var me=this;jn(this.atom);var Ve=this.values.length;if(M===void 0?M=0:M>Ve?M=Ve:M<0&&(M=Math.max(0,Ve+M)),U=arguments.length===1?Ve-M:U==null?0:Math.max(0,Math.min(U,Ve-M)),te===void 0&&(te=h),Ki(this)){var vt=Tr(this,{object:this.proxy,type:"splice",index:M,removedCount:U,added:te});if(!vt)return h;U=vt.removedCount,te=vt.added}te=te.length===0?te:te.map(function(_n){return me.enhancer(_n,void 0)});var Ht=this.spliceItemsIntoValues(M,U,te);return U===0&&te.length===0||this.notifyArraySplice(M,te,Ht),this.dehanceValues(Ht)},T.prototype.spliceItemsIntoValues=function(M,U,te){var me;if(te.length<1e4)return(me=this.values).splice.apply(me,Ie([M,U],te));var Ve=this.values.slice(M,M+U);return this.values=this.values.slice(0,M).concat(te,this.values.slice(M+U)),Ve},T.prototype.notifyArrayChildUpdate=function(M,U,te){var me=!this.owned&&!1,Ve=$i(this),vt=Ve||me?{object:this.proxy,type:"update",index:M,newValue:U,oldValue:te}:null;this.atom.reportChanged(),Ve&&di(this,vt)},T.prototype.notifyArraySplice=function(M,U,te){var me=!this.owned&&!1,Ve=$i(this),vt=Ve||me?{object:this.proxy,type:"splice",index:M,removed:te,added:U,removedCount:te.length,addedCount:U.length}:null;this.atom.reportChanged(),Ve&&di(this,vt)},T}(),co={intercept:function(T){return this[W].intercept(T)},observe:function(T,M){return M===void 0&&(M=!1),this[W].observe(T,M)},clear:function(){return this.splice(0)},replace:function(T){var M=this[W];return M.spliceWithArray(0,M.values.length,T)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(T,M){for(var U=[],te=2;te<arguments.length;te++)U[te-2]=arguments[te];var me=this[W];switch(arguments.length){case 0:return[];case 1:return me.spliceWithArray(T);case 2:return me.spliceWithArray(T,M)}return me.spliceWithArray(T,M,U)},spliceWithArray:function(T,M,U){return this[W].spliceWithArray(T,M,U)},push:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var U=this[W];return U.spliceWithArray(U.values.length,0,T),U.values.length},pop:function(){return this.splice(Math.max(this[W].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var U=this[W];return U.spliceWithArray(0,0,T),U.values.length},reverse:function(){var T=this.slice();return T.reverse.apply(T,arguments)},sort:function(T){var M=this.slice();return M.sort.apply(M,arguments)},remove:function(T){var M=this[W],U=M.dehanceValues(M.values).indexOf(T);return U>-1&&(this.splice(U,1),!0)},get:function(T){var M=this[W];if(M&&T<M.values.length)return M.atom.reportObserved(),M.dehanceValue(M.values[T])},set:function(T,M){var U=this[W],te=U.values;if(T<te.length){jn(U.atom);var me=te[T];if(Ki(U)){var Ve=Tr(U,{type:"update",object:U.proxy,index:T,newValue:M});if(!Ve)return;M=Ve.newValue}(M=U.enhancer(M,me))!==me&&(te[T]=M,U.notifyArrayChildUpdate(T,M,me))}else{if(T!==te.length)throw new Error("[mobx.array] Index out of bounds, "+T+" is larger than "+te.length);U.spliceWithArray(T,0,[M])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(T){typeof Array.prototype[T]=="function"&&(co[T]=function(){var M=this[W];M.atom.reportObserved();var U=M.dehanceValues(M.values);return U[T].apply(U,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(T){typeof Array.prototype[T]=="function"&&(co[T]=function(M,U){var te=this,me=this[W];return me.atom.reportObserved(),me.dehanceValues(me.values)[T](function(Ve,vt){return M.call(U,Ve,vt,te)},U)})}),["reduce","reduceRight"].forEach(function(T){co[T]=function(){var M=this,U=this[W];U.atom.reportObserved();var te=arguments[0];return arguments[0]=function(me,Ve,vt){return Ve=U.dehanceValue(Ve),te(me,Ve,vt,M)},U.values[T].apply(U.values,arguments)}});var Hu,Wa=j("ObservableArrayAdministration",Pa);function ya(T){return P(T)&&Wa(T[W])}var Nc,Yd={},kc=function(){function T(M,U,te){if(U===void 0&&(U=Mt),te===void 0&&(te="ObservableMap@"+g()),this.enhancer=U,this.name=te,this[Hu]=Yd,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(M)}return T.prototype._has=function(M){return this._data.has(M)},T.prototype.has=function(M){var U=this;if(!Pn.trackingDerivation)return this._has(M);var te=this._hasMap.get(M);if(!te){var me=te=new Rr(this._has(M),Yt,this.name+"."+H(M)+"?",!1);this._hasMap.set(M,me),Gr(me,function(){return U._hasMap.delete(M)})}return te.get()},T.prototype.set=function(M,U){var te=this._has(M);if(Ki(this)){var me=Tr(this,{type:te?"update":"add",object:this,newValue:U,name:M});if(!me)return this;U=me.newValue}return te?this._updateValue(M,U):this._addValue(M,U),this},T.prototype.delete=function(M){var U=this;if(jn(this._keysAtom),Ki(this)&&!(me=Tr(this,{type:"delete",object:this,name:M})))return!1;if(this._has(M)){var te=$i(this),me=te?{type:"delete",object:this,oldValue:this._data.get(M).value,name:M}:null;return ai(function(){U._keysAtom.reportChanged(),U._updateHasMapEntry(M,!1),U._data.get(M).setNewValue(void 0),U._data.delete(M)}),te&&di(this,me),!0}return!1},T.prototype._updateHasMapEntry=function(M,U){var te=this._hasMap.get(M);te&&te.setNewValue(U)},T.prototype._updateValue=function(M,U){var te=this._data.get(M);if((U=te.prepareNewValue(U))!==Pn.UNCHANGED){var me=$i(this),Ve=me?{type:"update",object:this,oldValue:te.value,name:M,newValue:U}:null;te.setNewValue(U),me&&di(this,Ve)}},T.prototype._addValue=function(M,U){var te=this;jn(this._keysAtom),ai(function(){var vt=new Rr(U,te.enhancer,te.name+"."+H(M),!1);te._data.set(M,vt),U=vt.value,te._updateHasMapEntry(M,!0),te._keysAtom.reportChanged()});var me=$i(this),Ve=me?{type:"add",object:this,name:M,newValue:U}:null;me&&di(this,Ve)},T.prototype.get=function(M){return this.has(M)?this.dehanceValue(this._data.get(M).get()):this.dehanceValue(void 0)},T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},T.prototype.values=function(){var M=this,U=this.keys();return Mr({next:function(){var te=U.next(),me=te.done,Ve=te.value;return{done:me,value:me?void 0:M.get(Ve)}}})},T.prototype.entries=function(){var M=this,U=this.keys();return Mr({next:function(){var te=U.next(),me=te.done,Ve=te.value;return{done:me,value:me?void 0:[Ve,M.get(Ve)]}}})},T.prototype[Hu=W,Symbol.iterator]=function(){return this.entries()},T.prototype.forEach=function(M,U){var te,me;try{for(var Ve=Oe(this),vt=Ve.next();!vt.done;vt=Ve.next()){var Ht=ze(vt.value,2),_n=Ht[0],yr=Ht[1];M.call(U,yr,_n,this)}}catch(ln){te={error:ln}}finally{try{vt&&!vt.done&&(me=Ve.return)&&me.call(Ve)}finally{if(te)throw te.error}}},T.prototype.merge=function(M){var U=this;return Vo(M)&&(M=M.toJS()),ai(function(){var te=ir(!0);try{A(M)?V(M).forEach(function(me){return U.set(me,M[me])}):Array.isArray(M)?M.forEach(function(me){var Ve=ze(me,2),vt=Ve[0],Ht=Ve[1];return U.set(vt,Ht)}):R(M)?(M.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+M.constructor.name),M.forEach(function(me,Ve){return U.set(Ve,me)})):M!=null&&b("Cannot initialize map from "+M)}finally{Kr(te)}}),this},T.prototype.clear=function(){var M=this;ai(function(){Ke(function(){var U,te;try{for(var me=Oe(M.keys()),Ve=me.next();!Ve.done;Ve=me.next()){var vt=Ve.value;M.delete(vt)}}catch(Ht){U={error:Ht}}finally{try{Ve&&!Ve.done&&(te=me.return)&&te.call(me)}finally{if(U)throw U.error}}})})},T.prototype.replace=function(M){var U=this;return ai(function(){var te,me,Ve,vt,Ht=function(Zo){if(R(Zo)||Vo(Zo))return Zo;if(Array.isArray(Zo))return new Map(Zo);if(A(Zo)){var Bl=new Map;for(var yl in Zo)Bl.set(yl,Zo[yl]);return Bl}return b("Cannot convert to map from '"+Zo+"'")}(M),_n=new Map,yr=!1;try{for(var ln=Oe(U._data.keys()),Vr=ln.next();!Vr.done;Vr=ln.next()){var pr=Vr.value;if(!Ht.has(pr))if(U.delete(pr))yr=!0;else{var Cr=U._data.get(pr);_n.set(pr,Cr)}}}catch(Zo){te={error:Zo}}finally{try{Vr&&!Vr.done&&(me=ln.return)&&me.call(ln)}finally{if(te)throw te.error}}try{for(var ia=Oe(Ht.entries()),bo=ia.next();!bo.done;bo=ia.next()){var Ji=ze(bo.value,2),hl=(pr=Ji[0],Cr=Ji[1],U._data.has(pr));if(U.set(pr,Cr),U._data.has(pr)){var vl=U._data.get(pr);_n.set(pr,vl),hl||(yr=!0)}}}catch(Zo){Ve={error:Zo}}finally{try{bo&&!bo.done&&(vt=ia.return)&&vt.call(ia)}finally{if(Ve)throw Ve.error}}if(!yr)if(U._data.size!==_n.size)U._keysAtom.reportChanged();else for(var $l=U._data.keys(),du=_n.keys(),Ha=$l.next(),pu=du.next();!Ha.done;){if(Ha.value!==pu.value){U._keysAtom.reportChanged();break}Ha=$l.next(),pu=du.next()}U._data=_n}),this},Object.defineProperty(T.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.toPOJO=function(){var M,U,te={};try{for(var me=Oe(this),Ve=me.next();!Ve.done;Ve=me.next()){var vt=ze(Ve.value,2),Ht=vt[0],_n=vt[1];te[typeof Ht=="symbol"?Ht:H(Ht)]=_n}}catch(yr){M={error:yr}}finally{try{Ve&&!Ve.done&&(U=me.return)&&U.call(me)}finally{if(M)throw M.error}}return te},T.prototype.toJS=function(){return new Map(this)},T.prototype.toJSON=function(){return this.toPOJO()},T.prototype.toString=function(){var M=this;return this.name+"[{ "+Array.from(this.keys()).map(function(U){return H(U)+": "+M.get(U)}).join(", ")+" }]"},T.prototype.observe=function(M,U){return Ma(this,M)},T.prototype.intercept=function(M){return va(this,M)},T}(),Vo=j("ObservableMap",kc),Fl={},za=function(){function T(M,U,te){if(U===void 0&&(U=Mt),te===void 0&&(te="ObservableSet@"+g()),this.name=te,this[Nc]=Fl,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(me,Ve){return U(me,Ve,te)},M&&this.replace(M)}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.clear=function(){var M=this;ai(function(){Ke(function(){var U,te;try{for(var me=Oe(M._data.values()),Ve=me.next();!Ve.done;Ve=me.next()){var vt=Ve.value;M.delete(vt)}}catch(Ht){U={error:Ht}}finally{try{Ve&&!Ve.done&&(te=me.return)&&te.call(me)}finally{if(U)throw U.error}}})})},T.prototype.forEach=function(M,U){var te,me;try{for(var Ve=Oe(this),vt=Ve.next();!vt.done;vt=Ve.next()){var Ht=vt.value;M.call(U,Ht,Ht,this)}}catch(_n){te={error:_n}}finally{try{vt&&!vt.done&&(me=Ve.return)&&me.call(Ve)}finally{if(te)throw te.error}}},Object.defineProperty(T.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.add=function(M){var U=this;if(jn(this._atom),Ki(this)&&!(me=Tr(this,{type:"add",object:this,newValue:M})))return this;if(!this.has(M)){ai(function(){U._data.add(U.enhancer(M,void 0)),U._atom.reportChanged()});var te=$i(this),me=te?{type:"add",object:this,newValue:M}:null;te&&di(this,me)}return this},T.prototype.delete=function(M){var U=this;if(Ki(this)&&!(me=Tr(this,{type:"delete",object:this,oldValue:M})))return!1;if(this.has(M)){var te=$i(this),me=te?{type:"delete",object:this,oldValue:M}:null;return ai(function(){U._atom.reportChanged(),U._data.delete(M)}),te&&di(this,me),!0}return!1},T.prototype.has=function(M){return this._atom.reportObserved(),this._data.has(this.dehanceValue(M))},T.prototype.entries=function(){var M=0,U=Array.from(this.keys()),te=Array.from(this.values());return Mr({next:function(){var me=M;return M+=1,me<te.length?{value:[U[me],te[me]],done:!1}:{done:!0}}})},T.prototype.keys=function(){return this.values()},T.prototype.values=function(){this._atom.reportObserved();var M=this,U=0,te=Array.from(this._data.values());return Mr({next:function(){return U<te.length?{value:M.dehanceValue(te[U++]),done:!1}:{done:!0}}})},T.prototype.replace=function(M){var U=this;return Ko(M)&&(M=M.toJS()),ai(function(){var te=ir(!0);try{Array.isArray(M)||$(M)?(U.clear(),M.forEach(function(me){return U.add(me)})):M!=null&&b("Cannot initialize set from "+M)}finally{Kr(te)}}),this},T.prototype.observe=function(M,U){return Ma(this,M)},T.prototype.intercept=function(M){return va(this,M)},T.prototype.toJS=function(){return new Set(this)},T.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},T.prototype[Nc=W,Symbol.iterator]=function(){return this.values()},T}(),Ko=j("ObservableSet",za),Rc=function(){function T(M,U,te,me){U===void 0&&(U=new Map),this.target=M,this.values=U,this.name=te,this.defaultEnhancer=me,this.keysAtom=new I(te+".keys")}return T.prototype.read=function(M){return this.values.get(M).get()},T.prototype.write=function(M,U){var te=this.target,me=this.values.get(M);if(me instanceof Ga)me.set(U);else{if(Ki(this)){if(!(vt=Tr(this,{type:"update",object:this.proxy||te,name:M,newValue:U})))return;U=vt.newValue}if((U=me.prepareNewValue(U))!==Pn.UNCHANGED){var Ve=$i(this),vt=Ve?{type:"update",object:this.proxy||te,oldValue:me.value,name:M,newValue:U}:null;me.setNewValue(U),Ve&&di(this,vt)}}},T.prototype.has=function(M){var U=this.pendingKeys||(this.pendingKeys=new Map),te=U.get(M);if(te)return te.get();var me=!!this.values.get(M);return te=new Rr(me,Yt,this.name+"."+H(M)+"?",!1),U.set(M,te),te.get()},T.prototype.addObservableProp=function(M,U,te){te===void 0&&(te=this.defaultEnhancer);var me=this.target;if(Ki(this)){var Ve=Tr(this,{object:this.proxy||me,name:M,type:"add",newValue:U});if(!Ve)return;U=Ve.newValue}var vt=new Rr(U,te,this.name+"."+H(M),!1);this.values.set(M,vt),U=vt.value,Object.defineProperty(me,M,function(Ht){return ma[Ht]||(ma[Ht]={configurable:!0,enumerable:!0,get:function(){return this[W].read(Ht)},set:function(_n){this[W].write(Ht,_n)}})}(M)),this.notifyPropertyAddition(M,U)},T.prototype.addComputedProp=function(M,U,te){var me,Ve,vt,Ht=this.target;te.name=te.name||this.name+"."+H(U),this.values.set(U,new Ga(te)),(M===Ht||(me=M,Ve=U,!(vt=Object.getOwnPropertyDescriptor(me,Ve))||vt.configurable!==!1&&vt.writable!==!1))&&Object.defineProperty(M,U,function(_n){return Ms[_n]||(Ms[_n]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Bi(this).read(_n)},set:function(yr){Bi(this).write(_n,yr)}})}(U))},T.prototype.remove=function(M){if(this.values.has(M)){var U=this.target;if(Ki(this)&&!(_n=Tr(this,{object:this.proxy||U,name:M,type:"remove"})))return;try{qi();var te=$i(this),me=!1,Ve=this.values.get(M),vt=Ve&&Ve.get();if(Ve&&Ve.set(void 0),this.keysAtom.reportChanged(),this.values.delete(M),this.pendingKeys){var Ht=this.pendingKeys.get(M);Ht&&Ht.set(!1)}delete this.target[M];var _n=te?{type:"remove",object:this.proxy||U,oldValue:vt,name:M}:null;te&&di(this,_n)}finally{ta()}}},T.prototype.illegalAccess=function(M,U){},T.prototype.observe=function(M,U){return Ma(this,M)},T.prototype.intercept=function(M){return va(this,M)},T.prototype.notifyPropertyAddition=function(M,U){var te=$i(this),me=te?{type:"add",object:this.proxy||this.target,name:M,newValue:U}:null;if(te&&di(this,me),this.pendingKeys){var Ve=this.pendingKeys.get(M);Ve&&Ve.set(!0)}this.keysAtom.reportChanged()},T.prototype.getKeys=function(){var M,U;this.keysAtom.reportObserved();var te=[];try{for(var me=Oe(this.values),Ve=me.next();!Ve.done;Ve=me.next()){var vt=ze(Ve.value,2),Ht=vt[0];vt[1]instanceof Rr&&te.push(Ht)}}catch(_n){M={error:_n}}finally{try{Ve&&!Ve.done&&(U=me.return)&&U.call(me)}finally{if(M)throw M.error}}return te},T}();function ra(T,M,U){if(M===void 0&&(M=""),U===void 0&&(U=Mt),Object.prototype.hasOwnProperty.call(T,W))return T[W];A(T)||(M=(T.constructor.name||"ObservableObject")+"@"+g()),M||(M="ObservableObject@"+g());var te=new Rc(T,new Map,H(M),U);return k(T,W,te),te}var ma=Object.create(null),Ms=Object.create(null);function Bi(T){var M=T[W];return M||(je(T),T[W])}var Zi=j("ObservableObjectAdministration",Rc);function li(T){return!!P(T)&&(je(T),Zi(T[W]))}function oa(T,M){if(typeof T=="object"&&T!==null){if(ya(T))return M!==void 0&&b(!1),T[W].atom;if(Ko(T))return T[W];if(Vo(T)){var U=T;return M===void 0?U._keysAtom:((te=U._data.get(M)||U._hasMap.get(M))||b(!1),te)}var te;if(je(T),M&&!T[W]&&T[M],li(T))return M?((te=T[W].values.get(M))||b(!1),te):b(!1);if(z(T)||dl(T)||zu(T))return T}else if(typeof T=="function"&&zu(T[W]))return T[W];return b(!1)}function ki(T,M){return T||b("Expecting some object"),M!==void 0?ki(oa(T,M)):z(T)||dl(T)||zu(T)||Vo(T)||Ko(T)?T:(je(T),T[W]?T[W]:void b(!1))}var ut=Object.prototype.toString;function jt(T,M,U){return U===void 0&&(U=-1),$t(T,M,U)}function $t(T,M,U,te,me){if(T===M)return T!==0||1/T==1/M;if(T==null||M==null)return!1;if(T!=T)return M!=M;var Ve=typeof T;if(Ve!=="function"&&Ve!=="object"&&typeof M!="object")return!1;var vt=ut.call(T);if(vt!==ut.call(M))return!1;switch(vt){case"[object RegExp]":case"[object String]":return""+T==""+M;case"[object Number]":return+T!=+T?+M!=+M:+T==0?1/+T==1/M:+T==+M;case"[object Date]":case"[object Boolean]":return+T==+M;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(T)===Symbol.valueOf.call(M);case"[object Map]":case"[object Set]":U>=0&&U++}T=fn(T),M=fn(M);var Ht=vt==="[object Array]";if(!Ht){if(typeof T!="object"||typeof M!="object")return!1;var _n=T.constructor,yr=M.constructor;if(_n!==yr&&!(typeof _n=="function"&&_n instanceof _n&&typeof yr=="function"&&yr instanceof yr)&&"constructor"in T&&"constructor"in M)return!1}if(U===0)return!1;U<0&&(U=-1),me=me||[];for(var ln=(te=te||[]).length;ln--;)if(te[ln]===T)return me[ln]===M;if(te.push(T),me.push(M),Ht){if((ln=T.length)!==M.length)return!1;for(;ln--;)if(!$t(T[ln],M[ln],U-1,te,me))return!1}else{var Vr=Object.keys(T),pr=void 0;if(ln=Vr.length,Object.keys(M).length!==ln)return!1;for(;ln--;)if(!ur(M,pr=Vr[ln])||!$t(T[pr],M[pr],U-1,te,me))return!1}return te.pop(),me.pop(),!0}function fn(T){return ya(T)?T.slice():R(T)||Vo(T)||$(T)||Ko(T)?Array.from(T.entries()):T}function ur(T,M){return Object.prototype.hasOwnProperty.call(T,M)}function Mr(T){return T[Symbol.iterator]=fo,T}function fo(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:wc,extras:{getDebugName:function(T,M){return(M!==void 0?oa(T,M):li(T)||Vo(T)||Ko(T)?ki(T):oa(T)).name}},$mobx:W})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),h=r(179);s||c(Object.prototype,"toString",h,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),h=r(80),v=r(58),g=r(116),b="Array Iterator",w=v.set,O=v.getterFor(b);n.exports=g(Array,"Array",function(S,P){w(this,{type:b,target:s(S),index:0,kind:P})},function(){var S=O(this),P=S.target,A=S.kind,k=S.index++;return!P||k>=P.length?(S.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:k,done:!1}:A=="values"?{value:P[k],done:!1}:{value:[k,P[k]],done:!1}},"values"),h.Arguments=h.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),h=r(46),v=r(76),g=r(34),b=r(15),w=r(71),O=r(36),S=r(108),P=r(18),A=r(35),k=r(96),j=r(30),R=r(33),$=r(54),V=r(87),H=r(32),Y=r(40),Q=r(41),W=r(86),I=r(39),z=r(69),K=r(60),q=r(77),ce=r(74),ke=r(139),Oe=r(112),ze=r(50),Ie=r(38),Pe=r(84),le=r(98),ye=r(42),Me=r(89),We=r(93),je=r(72),it=r(90),bt=r(28),Mt=r(140),Yt=r(141),Ce=r(78),ge=r(58),Se=r(79).forEach,ht=We("hidden"),zt="Symbol",Ot=bt("toPrimitive"),rn=ge.set,yn=ge.getterFor(zt),Tn=Object.prototype,pn=c.Symbol,ft=pn&&pn.prototype,xn=c.TypeError,$e=c.QObject,mn=h("JSON","stringify"),Kn=ze.f,ne=Ie.f,$n=ke.f,xr=Pe.f,Ur=b([].push),no=Me("symbols"),jn=Me("op-symbols"),Co=Me("string-to-symbol-registry"),Ee=Me("symbol-to-string-registry"),Ke=Me("wks"),De=!$e||!$e.prototype||!$e.prototype.findChild,at=O&&P(function(){return K(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a!=7})?function(Sn,Bn,Xn){var ir=Kn(Tn,Bn);ir&&delete Tn[Bn],ne(Sn,Bn,Xn),ir&&Sn!==Tn&&ne(Tn,Bn,ir)}:ne,en=function(Sn,Bn){var Xn=no[Sn]=K(ft);return rn(Xn,{type:zt,tag:Sn,description:Bn}),O||(Xn.description=Bn),Xn},qt=function(Sn,Bn,Xn){Sn===Tn&&qt(jn,Bn,Xn),H(Sn);var ir=W(Bn);return H(Xn),A(no,ir)?(Xn.enumerable?(A(Sn,ht)&&Sn[ht][ir]&&(Sn[ht][ir]=!1),Xn=K(Xn,{enumerable:z(0,!1)})):(A(Sn,ht)||ne(Sn,ht,z(1,{})),Sn[ht][ir]=!0),at(Sn,ir,Xn)):ne(Sn,ir,Xn)},Nn=function(Sn,Bn){H(Sn);var Xn=Q(Bn),ir=q(Xn).concat(Go(Xn));return Se(ir,function(Kr){O&&!g(_r,Xn,Kr)||qt(Sn,Kr,Xn[Kr])}),Sn},_r=function(Sn){var Bn=W(Sn),Xn=g(xr,this,Bn);return!(this===Tn&&A(no,Bn)&&!A(jn,Bn))&&(!(Xn||!A(this,Bn)||!A(no,Bn)||A(this,ht)&&this[ht][Bn])||Xn)},oi=function(Sn,Bn){var Xn=Q(Sn),ir=W(Bn);if(Xn!==Tn||!A(no,ir)||A(jn,ir)){var Kr=Kn(Xn,ir);return!Kr||!A(no,ir)||A(Xn,ht)&&Xn[ht][ir]||(Kr.enumerable=!0),Kr}},mi=function(Sn){var Bn=$n(Q(Sn)),Xn=[];return Se(Bn,function(ir){A(no,ir)||A(je,ir)||Ur(Xn,ir)}),Xn},Go=function(Sn){var Bn=Sn===Tn,Xn=$n(Bn?jn:Q(Sn)),ir=[];return Se(Xn,function(Kr){!A(no,Kr)||Bn&&!A(Tn,Kr)||Ur(ir,no[Kr])}),ir};if(S||(pn=function(){if($(ft,this))throw xn("Symbol is not a constructor");var Sn=arguments.length&&arguments[0]!==void 0?I(arguments[0]):void 0,Bn=it(Sn),Xn=function(ir){this===Tn&&g(Xn,jn,ir),A(this,ht)&&A(this[ht],Bn)&&(this[ht][Bn]=!1),at(this,Bn,z(1,ir))};return O&&De&&at(Tn,Bn,{configurable:!0,set:Xn}),en(Bn,Sn)},ye(ft=pn.prototype,"toString",function(){return yn(this).tag}),ye(pn,"withoutSetter",function(Sn){return en(it(Sn),Sn)}),Pe.f=_r,Ie.f=qt,ze.f=oi,ce.f=ke.f=mi,Oe.f=Go,Mt.f=function(Sn){return en(bt(Sn),Sn)},O&&(ne(ft,"description",{configurable:!0,get:function(){return yn(this).description}}),w||ye(Tn,"propertyIsEnumerable",_r,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:pn}),Se(q(Ke),function(Sn){Yt(Sn)}),s({target:zt,stat:!0,forced:!S},{for:function(Sn){var Bn=I(Sn);if(A(Co,Bn))return Co[Bn];var Xn=pn(Bn);return Co[Bn]=Xn,Ee[Xn]=Bn,Xn},keyFor:function(Sn){if(!V(Sn))throw xn(Sn+" is not a symbol");if(A(Ee,Sn))return Ee[Sn]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),s({target:"Object",stat:!0,forced:!S,sham:!O},{create:function(Sn,Bn){return Bn===void 0?K(Sn):Nn(K(Sn),Bn)},defineProperty:qt,defineProperties:Nn,getOwnPropertyDescriptor:oi}),s({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:mi,getOwnPropertySymbols:Go}),s({target:"Object",stat:!0,forced:P(function(){Oe.f(1)})},{getOwnPropertySymbols:function(Sn){return Oe.f(Y(Sn))}}),mn&&s({target:"JSON",stat:!0,forced:!S||P(function(){var Sn=pn();return mn([Sn])!="[null]"||mn({a:Sn})!="{}"||mn(Object(Sn))!="{}"})},{stringify:function(Sn,Bn,Xn){var ir=le(arguments),Kr=Bn;if((R(Bn)||Sn!==void 0)&&!V(Sn))return k(Bn)||(Bn=function(Rr,fl){if(j(Kr)&&(fl=g(Kr,this,Rr,fl)),!V(fl))return fl}),ir[1]=Bn,v(mn,null,ir)}}),!ft[Ot]){var qo=ft.valueOf;ye(ft,Ot,function(Sn){return g(qo,this)})}Ce(pn,zt),je[ht]=!0},function(n,o,r){var s=r(7),c=r(152),h=r(153),v=r(3),g=r(57),b=r(28),w=b("iterator"),O=b("toStringTag"),S=v.values,P=function(k,j){if(k){if(k[w]!==S)try{g(k,w,S)}catch{k[w]=S}if(k[O]||g(k,O,j),c[j]){for(var R in v)if(k[R]!==v[R])try{g(k,R,v[R])}catch{k[R]=v[R]}}}};for(var A in c)P(s[A]&&s[A].prototype,A);P(h,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),h=r(58),v=r(116),g="String Iterator",b=h.set,w=h.getterFor(g);v(String,"String",function(O){b(this,{type:g,string:c(O),index:0})},function(){var O,S=w(this),P=S.string,A=S.index;return A>=P.length?{value:void 0,done:!0}:(O=s(P,A),S.index+=O.length,{value:O,done:!1})})},function(n,o,r){(function(s){var c=function(h){return h&&h.Math==Math&&h};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),h=r(7),v=r(15),g=r(35),b=r(30),w=r(54),O=r(39),S=r(38).f,P=r(134),A=h.Symbol,k=A&&A.prototype;if(c&&b(A)&&(!("description"in k)||A().description!==void 0)){var j={},R=function(){var I=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),z=w(k,this)?new A(I):I===void 0?A():A(I);return I===""&&(j[z]=!0),z};P(R,A),R.prototype=k,k.constructor=R;var $=String(A("test"))=="Symbol(test)",V=v(k.toString),H=v(k.valueOf),Y=/^Symbol\((.*)\)[^)]+$/,Q=v("".replace),W=v("".slice);S(k,"description",{configurable:!0,get:function(){var I=H(this),z=V(I);if(g(j,I))return"";var K=$?W(z,7,-1):Q(z,Y,"$1");return K===""?void 0:K}}),s({global:!0,forced:!0},{Symbol:R})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return v.a}),r.d(o,"c",function(){return v.e}),r.d(o,"h",function(){return Y}),r.d(o,"i",function(){return $}),r.d(o,"j",function(){return j}),r.d(o,"b",function(){return ze}),r.d(o,"e",function(){return ye}),r.d(o,"f",function(){return Ie}),r.d(o,"g",function(){return no});var s,c,h,v=r(0),g=0,b=[],w=v.i.__b,O=v.i.__r,S=v.i.diffed,P=v.i.__c,A=v.i.unmount;function k(Ee,Ke){v.i.__h&&v.i.__h(c,Ee,g||Ke),g=0;var De=c.__H||(c.__H={__:[],__h:[]});return Ee>=De.__.length&&De.__.push({}),De.__[Ee]}function j(Ee){return g=1,R(ce,Ee)}function R(Ee,Ke,De){var at=k(s++,2);return at.t=Ee,at.__c||(at.__=[De?De(Ke):ce(void 0,Ke),function(en){var qt=at.t(at.__[0],en);at.__[0]!==qt&&(at.__=[qt,at.__[1]],at.__c.setState({}))}],at.__c=c),at.__}function $(Ee,Ke){var De=k(s++,3);!v.i.__s&&q(De.__H,Ke)&&(De.__=Ee,De.__H=Ke,c.__H.__h.push(De))}function V(Ee,Ke){var De=k(s++,4);!v.i.__s&&q(De.__H,Ke)&&(De.__=Ee,De.__H=Ke,c.__h.push(De))}function H(Ee,Ke){var De=k(s++,7);return q(De.__H,Ke)&&(De.__=Ee(),De.__H=Ke,De.__h=Ee),De.__}function Y(Ee,Ke){return g=8,H(function(){return Ee},Ke)}function Q(){var Ee;for(b.sort(function(Ke,De){return Ke.__v.__b-De.__v.__b});Ee=b.pop();)if(Ee.__P)try{Ee.__H.__h.forEach(z),Ee.__H.__h.forEach(K),Ee.__H.__h=[]}catch(Ke){Ee.__H.__h=[],v.i.__e(Ke,Ee.__v)}}v.i.__b=function(Ee){c=null,w&&w(Ee)},v.i.__r=function(Ee){O&&O(Ee),s=0;var Ke=(c=Ee.__c).__H;Ke&&(Ke.__h.forEach(z),Ke.__h.forEach(K),Ke.__h=[])},v.i.diffed=function(Ee){S&&S(Ee);var Ke=Ee.__c;Ke&&Ke.__H&&Ke.__H.__h.length&&(b.push(Ke)!==1&&h===v.i.requestAnimationFrame||((h=v.i.requestAnimationFrame)||I)(Q)),c=null},v.i.__c=function(Ee,Ke){Ke.some(function(De){try{De.__h.forEach(z),De.__h=De.__h.filter(function(at){return!at.__||K(at)})}catch(at){Ke.some(function(en){en.__h&&(en.__h=[])}),Ke=[],v.i.__e(at,De.__v)}}),P&&P(Ee,Ke)},v.i.unmount=function(Ee){A&&A(Ee);var Ke,De=Ee.__c;De&&De.__H&&(De.__H.__.forEach(function(at){try{z(at)}catch(en){Ke=en}}),Ke&&v.i.__e(Ke,De.__v))};var W=typeof requestAnimationFrame=="function";function I(Ee){var Ke,De=function(){clearTimeout(at),W&&cancelAnimationFrame(Ke),setTimeout(Ee)},at=setTimeout(De,100);W&&(Ke=requestAnimationFrame(De))}function z(Ee){var Ke=c,De=Ee.__c;typeof De=="function"&&(Ee.__c=void 0,De()),c=Ke}function K(Ee){var Ke=c;Ee.__c=Ee.__(),c=Ke}function q(Ee,Ke){return!Ee||Ee.length!==Ke.length||Ke.some(function(De,at){return De!==Ee[at]})}function ce(Ee,Ke){return typeof Ke=="function"?Ke(Ee):Ke}function ke(Ee,Ke){for(var De in Ke)Ee[De]=Ke[De];return Ee}function Oe(Ee,Ke){for(var De in Ee)if(De!=="__source"&&!(De in Ke))return!0;for(var at in Ke)if(at!=="__source"&&Ee[at]!==Ke[at])return!0;return!1}function ze(Ee){this.props=Ee}function Ie(Ee,Ke){function De(en){var qt=this.props.ref,Nn=qt==en.ref;return!Nn&&qt&&(qt.call?qt(null):qt.current=null),Ke?!Ke(this.props,en)||!Nn:Oe(this.props,en)}function at(en){return this.shouldComponentUpdate=De,Object(v.e)(Ee,en)}return at.displayName="Memo("+(Ee.displayName||Ee.name)+")",at.prototype.isReactComponent=!0,at.__f=!0,at}(ze.prototype=new v.a).isPureReactComponent=!0,ze.prototype.shouldComponentUpdate=function(Ee,Ke){return Oe(this.props,Ee)||Oe(this.state,Ke)};var Pe=v.i.__b;v.i.__b=function(Ee){Ee.type&&Ee.type.__f&&Ee.ref&&(Ee.props.ref=Ee.ref,Ee.ref=null),Pe&&Pe(Ee)};var le=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ye(Ee){function Ke(De,at){var en=ke({},De);return delete en.ref,Ee(en,!(at=De.ref||at)||typeof at=="object"&&!("current"in at)?null:at)}return Ke.$$typeof=le,Ke.render=Ke,Ke.prototype.isReactComponent=Ke.__f=!0,Ke.displayName="ForwardRef("+(Ee.displayName||Ee.name)+")",Ke}var Me=function(Ee,Ke){return Ee==null?null:Object(v.k)(Object(v.k)(Ee).map(Ke))},We={map:Me,forEach:Me,count:function(Ee){return Ee?Object(v.k)(Ee).length:0},only:function(Ee){var Ke=Object(v.k)(Ee);if(Ke.length!==1)throw"Children.only";return Ke[0]},toArray:v.k},je=v.i.__e;v.i.__e=function(Ee,Ke,De){if(Ee.then){for(var at,en=Ke;en=en.__;)if((at=en.__c)&&at.__c)return Ke.__e==null&&(Ke.__e=De.__e,Ke.__k=De.__k),at.__c(Ee,Ke)}je(Ee,Ke,De)};var it=v.i.unmount;function bt(Ee,Ke,De){return Ee&&(Ee.__c&&Ee.__c.__H&&(Ee.__c.__H.__.forEach(function(at){typeof at.__c=="function"&&at.__c()}),Ee.__c.__H=null),(Ee=ke({},Ee)).__c!=null&&(Ee.__c.__P===De&&(Ee.__c.__P=Ke),Ee.__c=null),Ee.__k=Ee.__k&&Ee.__k.map(function(at){return bt(at,Ke,De)})),Ee}function Mt(Ee,Ke,De){return Ee&&(Ee.__v=null,Ee.__k=Ee.__k&&Ee.__k.map(function(at){return Mt(at,Ke,De)}),Ee.__c&&Ee.__c.__P===Ke&&(Ee.__e&&De.insertBefore(Ee.__e,Ee.__d),Ee.__c.__e=!0,Ee.__c.__P=De)),Ee}function Yt(){this.__u=0,this.t=null,this.__b=null}function Ce(Ee){var Ke=Ee.__.__c;return Ke&&Ke.__e&&Ke.__e(Ee)}function ge(){this.u=null,this.o=null}v.i.unmount=function(Ee){var Ke=Ee.__c;Ke&&Ke.__R&&Ke.__R(),Ke&&Ee.__h===!0&&(Ee.type=null),it&&it(Ee)},(Yt.prototype=new v.a).__c=function(Ee,Ke){var De=Ke.__c,at=this;at.t==null&&(at.t=[]),at.t.push(De);var en=Ce(at.__v),qt=!1,Nn=function(){qt||(qt=!0,De.__R=null,en?en(_r):_r())};De.__R=Nn;var _r=function(){if(!--at.__u){if(at.state.__e){var mi=at.state.__e;at.__v.__k[0]=Mt(mi,mi.__c.__P,mi.__c.__O)}var Go;for(at.setState({__e:at.__b=null});Go=at.t.pop();)Go.forceUpdate()}},oi=Ke.__h===!0;at.__u++||oi||at.setState({__e:at.__b=at.__v.__k[0]}),Ee.then(Nn,Nn)},Yt.prototype.componentWillUnmount=function(){this.t=[]},Yt.prototype.render=function(Ee,Ke){if(this.__b){if(this.__v.__k){var De=document.createElement("div"),at=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,De,at.__O=at.__P)}this.__b=null}var en=Ke.__e&&Object(v.e)(v.b,null,Ee.fallback);return en&&(en.__h=null),[Object(v.e)(v.b,null,Ke.__e?null:Ee.children),en]};var Se=function(Ee,Ke,De){if(++De[1]===De[0]&&Ee.o.delete(Ke),Ee.props.revealOrder&&(Ee.props.revealOrder[0]!=="t"||!Ee.o.size))for(De=Ee.u;De;){for(;De.length>3;)De.pop()();if(De[1]<De[0])break;Ee.u=De=De[2]}};function ht(Ee){return this.getChildContext=function(){return Ee.context},Ee.children}function zt(Ee){var Ke=this,De=Ee.i;Ke.componentWillUnmount=function(){Object(v.j)(null,Ke.l),Ke.l=null,Ke.i=null},Ke.i&&Ke.i!==De&&Ke.componentWillUnmount(),Ee.__v?(Ke.l||(Ke.i=De,Ke.l={nodeType:1,parentNode:De,childNodes:[],appendChild:function(at){this.childNodes.push(at),Ke.i.appendChild(at)},insertBefore:function(at,en){this.childNodes.push(at),Ke.i.appendChild(at)},removeChild:function(at){this.childNodes.splice(this.childNodes.indexOf(at)>>>1,1),Ke.i.removeChild(at)}}),Object(v.j)(Object(v.e)(ht,{context:Ke.context},Ee.__v),Ke.l)):Ke.l&&Ke.componentWillUnmount()}(ge.prototype=new v.a).__e=function(Ee){var Ke=this,De=Ce(Ke.__v),at=Ke.o.get(Ee);return at[0]++,function(en){var qt=function(){Ke.props.revealOrder?(at.push(en),Se(Ke,Ee,at)):en()};De?De(qt):qt()}},ge.prototype.render=function(Ee){this.u=null,this.o=new Map;var Ke=Object(v.k)(Ee.children);Ee.revealOrder&&Ee.revealOrder[0]==="b"&&Ke.reverse();for(var De=Ke.length;De--;)this.o.set(Ke[De],this.u=[1,0,this.u]);return Ee.children},ge.prototype.componentDidUpdate=ge.prototype.componentDidMount=function(){var Ee=this;this.o.forEach(function(Ke,De){Se(Ee,De,Ke)})};var Ot=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=typeof document<"u",Tn=function(Ee){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ee)};v.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ee){Object.defineProperty(v.a.prototype,Ee,{configurable:!0,get:function(){return this["UNSAFE_"+Ee]},set:function(Ke){Object.defineProperty(this,Ee,{configurable:!0,writable:!0,value:Ke})}})});var pn=v.i.event;function ft(){}function xn(){return this.cancelBubble}function $e(){return this.defaultPrevented}v.i.event=function(Ee){return pn&&(Ee=pn(Ee)),Ee.persist=ft,Ee.isPropagationStopped=xn,Ee.isDefaultPrevented=$e,Ee.nativeEvent=Ee};var mn,Kn={configurable:!0,get:function(){return this.class}},ne=v.i.vnode;v.i.vnode=function(Ee){var Ke=Ee.type,De=Ee.props,at=De;if(typeof Ke=="string"){var en=Ke.indexOf("-")===-1;for(var qt in at={},De){var Nn=De[qt];yn&&qt==="children"&&Ke==="noscript"||qt==="value"&&"defaultValue"in De&&Nn==null||(qt==="defaultValue"&&"value"in De&&De.value==null?qt="value":qt==="download"&&Nn===!0?Nn="":/ondoubleclick/i.test(qt)?qt="ondblclick":/^onchange(textarea|input)/i.test(qt+Ke)&&!Tn(De.type)?qt="oninput":/^onfocus$/i.test(qt)?qt="onfocusin":/^onblur$/i.test(qt)?qt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(qt)?qt=qt.toLowerCase():en&&rn.test(qt)?qt=qt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Nn===null&&(Nn=void 0),at[qt]=Nn)}Ke=="select"&&at.multiple&&Array.isArray(at.value)&&(at.value=Object(v.k)(De.children).forEach(function(_r){_r.props.selected=at.value.indexOf(_r.props.value)!=-1})),Ke=="select"&&at.defaultValue!=null&&(at.value=Object(v.k)(De.children).forEach(function(_r){_r.props.selected=at.multiple?at.defaultValue.indexOf(_r.props.value)!=-1:at.defaultValue==_r.props.value})),Ee.props=at,De.class!=De.className&&(Kn.enumerable="className"in De,De.className!=null&&(at.class=De.className),Object.defineProperty(at,"className",Kn))}Ee.$$typeof=Ot,ne&&ne(Ee)};var $n=v.i.__r;v.i.__r=function(Ee){$n&&$n(Ee),mn=Ee.__c};var xr={ReactCurrentDispatcher:{current:{readContext:function(Ee){return mn.__n[Ee.__c].props.value}}}};function Ur(Ee){return!!Ee&&Ee.$$typeof===Ot}var no=function(Ee,Ke){return Ee(Ke)},jn=v.b,Co={useState:j,useReducer:R,useEffect:$,useLayoutEffect:V,useRef:function(Ee){return g=5,H(function(){return{current:Ee}},[])},useImperativeHandle:function(Ee,Ke,De){g=6,V(function(){typeof Ee=="function"?Ee(Ke()):Ee&&(Ee.current=Ke())},De==null?De:De.concat(Ee))},useMemo:H,useCallback:Y,useContext:function(Ee){var Ke=c.context[Ee.__c],De=k(s++,9);return De.c=Ee,Ke?(De.__==null&&(De.__=!0,Ke.sub(c)),Ke.props.value):Ee.__},useDebugValue:function(Ee,Ke){v.i.useDebugValue&&v.i.useDebugValue(Ke?Ke(Ee):Ee)},version:"17.0.2",Children:We,render:function(Ee,Ke,De){return Ke.__k==null&&(Ke.textContent=""),Object(v.j)(Ee,Ke),typeof De=="function"&&De(),Ee?Ee.__c:null},hydrate:function(Ee,Ke,De){return Object(v.h)(Ee,Ke),typeof De=="function"&&De(),Ee?Ee.__c:null},unmountComponentAtNode:function(Ee){return!!Ee.__k&&(Object(v.j)(null,Ee),!0)},createPortal:function(Ee,Ke){return Object(v.e)(zt,{__v:Ee,i:Ke})},createElement:v.e,createContext:v.d,createFactory:function(Ee){return v.e.bind(null,Ee)},cloneElement:function(Ee){return Ur(Ee)?v.c.apply(null,arguments):Ee},createRef:v.f,Fragment:v.b,isValidElement:Ur,findDOMNode:function(Ee){return Ee&&(Ee.base||Ee.nodeType===1&&Ee)||null},Component:v.a,PureComponent:ze,memo:Ie,forwardRef:ye,flushSync:function(Ee,Ke){return Ee(Ke)},unstable_batchedUpdates:no,StrictMode:jn,Suspense:Yt,SuspenseList:ge,lazy:function(Ee){var Ke,De,at;function en(qt){if(Ke||(Ke=Ee()).then(function(Nn){De=Nn.default||Nn},function(Nn){at=Nn}),at)throw at;if(!De)throw Ke;return Object(v.e)(De,qt)}return en.displayName="Lazy",en.__f=!0,en},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:xr};o.d=Co},function(n,o,r){var s=r(7),c=r(152),h=r(153),v=r(187),g=r(57),b=function(O){if(O&&O.forEach!==v)try{g(O,"forEach",v)}catch{O.forEach=v}};for(var w in c)c[w]&&b(s[w]&&s[w].prototype);b(h)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),h=r(40),v=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){v(1)}),sham:!g},{getPrototypeOf:function(b){return v(h(b))}})},function(n,o,r){var s=r(16),c=r(46),h=r(76),v=r(203),g=r(165),b=r(32),w=r(33),O=r(60),S=r(18),P=c("Reflect","construct"),A=Object.prototype,k=[].push,j=S(function(){function V(){}return!(P(function(){},[],V)instanceof V)}),R=!S(function(){P(function(){})}),$=j||R;s({target:"Reflect",stat:!0,forced:$,sham:$},{construct:function(V,H){g(V),b(H);var Y=arguments.length<3?V:g(arguments[2]);if(R&&!j)return P(V,H,Y);if(V==Y){switch(H.length){case 0:return new V;case 1:return new V(H[0]);case 2:return new V(H[0],H[1]);case 3:return new V(H[0],H[1],H[2]);case 4:return new V(H[0],H[1],H[2],H[3])}var Q=[null];return h(k,Q,H),new(h(v,V,Q))}var W=Y.prototype,I=O(w(W)?W:A),z=h(V,I,H);return w(z)?z:I}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,h=s&&s.bind(c);n.exports=s?function(v){return v&&h(c,v)}:function(v){return v&&function(){return c.apply(v,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,h=r(57),v=r(42),g=r(110),b=r(134),w=r(95);n.exports=function(O,S){var P,A,k,j,R,$=O.target,V=O.global,H=O.stat;if(P=V?s:H?s[$]||g($,{}):(s[$]||{}).prototype)for(A in S){if(j=S[A],k=O.noTargetGet?(R=c(P,A))&&R.value:P[A],!w(V?A:$+(H?".":"#")+A,O.forced)&&k!==void 0){if(typeof j==typeof k)continue;b(j,k)}(O.sham||k&&k.sham)&&h(j,"sham",!0),v(P,A,j,O)}}},function(n,o,r){var s=r(16),c=r(7),h=r(96),v=r(99),g=r(33),b=r(75),w=r(45),O=r(41),S=r(63),P=r(28),A=r(81),k=r(98),j=A("slice"),R=P("species"),$=c.Array,V=Math.max;s({target:"Array",proto:!0,forced:!j},{slice:function(H,Y){var Q,W,I,z=O(this),K=w(z),q=b(H,K),ce=b(Y===void 0?K:Y,K);if(h(z)&&(Q=z.constructor,(v(Q)&&(Q===$||h(Q.prototype))||g(Q)&&(Q=Q[R])===null)&&(Q=void 0),Q===$||Q===void 0))return k(z,q,ce);for(W=new(Q===void 0?$:Q)(V(ce-q,0)),I=0;q<ce;q++,I++)q in z&&S(W,I,z[q]);return W.length=I,W}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),h=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){h(1)})},{keys:function(v){return h(c(v))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,h=r(15),v=r(38).f,g=Function.prototype,b=h(g.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=h(w.exec);s&&!c&&v(g,"name",{configurable:!0,get:function(){try{return O(w,b(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),h=r(41),v=r(50).f,g=r(36),b=c(function(){v(1)});s({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(w,O){return v(h(w),O)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(h){Array.from(h)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),h=r(135),v=r(41),g=r(50),b=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(w){for(var O,S,P=v(w),A=g.f,k=h(P),j={},R=0;k.length>R;)(S=A(P,O=k[R++]))!==void 0&&b(j,O,S);return j}})},,function(n,o,r){var s=r(16),c=r(7),h=r(18),v=r(96),g=r(33),b=r(40),w=r(45),O=r(63),S=r(115),P=r(81),A=r(28),k=r(70),j=A("isConcatSpreadable"),R=9007199254740991,$="Maximum allowed index exceeded",V=c.TypeError,H=k>=51||!h(function(){var W=[];return W[j]=!1,W.concat()[0]!==W}),Y=P("concat"),Q=function(W){if(!g(W))return!1;var I=W[j];return I!==void 0?!!I:v(W)};s({target:"Array",proto:!0,forced:!H||!Y},{concat:function(W){var I,z,K,q,ce,ke=b(this),Oe=S(ke,0),ze=0;for(I=-1,K=arguments.length;I<K;I++)if(Q(ce=I===-1?ke:arguments[I])){if(ze+(q=w(ce))>R)throw V($);for(z=0;z<q;z++,ze++)z in ce&&O(Oe,ze,ce[z])}else{if(ze>=R)throw V($);O(Oe,ze++,ce)}return Oe.length=ze,Oe}})},function(n,o,r){var s=r(7),c=r(89),h=r(35),v=r(90),g=r(108),b=r(132),w=c("wks"),O=s.Symbol,S=O&&O.for,P=b?O:O&&O.withoutSetter||v;n.exports=function(A){if(!h(w,A)||!g&&typeof w[A]!="string"){var k="Symbol."+A;g&&h(O,A)?w[A]=O[A]:w[A]=b&&S?S(k):P(k)}return w[A]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,h=s.a||c||Function("return this")();o.a=h},function(n,o,r){var s=r(7),c=r(33),h=s.String,v=s.TypeError;n.exports=function(g){if(c(g))return g;throw v(h(g)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),h=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(v,g){return h(c(v),g)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),h=r(133),v=r(32),g=r(86),b=s.TypeError,w=Object.defineProperty;o.f=c?w:function(O,S,P){if(v(O),S=g(S),v(P),h)try{return w(O,S,P)}catch{}if("get"in P||"set"in P)throw b("Accessors not supported");return"value"in P&&(O[S]=P.value),O}},function(n,o,r){var s=r(7),c=r(97),h=s.String;n.exports=function(v){if(c(v)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(v)}},function(n,o,r){var s=r(7),c=r(44),h=s.Object;n.exports=function(v){return h(c(v))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(h){return s(c(h))}},function(n,o,r){var s=r(7),c=r(30),h=r(35),v=r(57),g=r(110),b=r(92),w=r(58),O=r(73).CONFIGURABLE,S=w.get,P=w.enforce,A=String(String).split("String");(n.exports=function(k,j,R,$){var V,H=!!$&&!!$.unsafe,Y=!!$&&!!$.enumerable,Q=!!$&&!!$.noTargetGet,W=$&&$.name!==void 0?$.name:j;c(R)&&(String(W).slice(0,7)==="Symbol("&&(W="["+String(W).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h(R,"name")||O&&R.name!==W)&&v(R,"name",W),(V=P(R)).source||(V.source=A.join(typeof W=="string"?W:""))),k!==s?(H?!Q&&k[j]&&(Y=!0):delete k[j],Y?k[j]=R:v(k,j,R)):Y?k[j]=R:g(j,R)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||b(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return v}),r.d(o,"c",function(){return g}),r.d(o,"b",function(){return b}),r.d(o,"a",function(){return O});var c=r(10),h=function(S,P){var A=typeof Symbol=="function"&&S[Symbol.iterator];if(!A)return S;var k,j,R=A.call(S),$=[];try{for(;(P===void 0||P-- >0)&&!(k=R.next()).done;)$.push(k.value)}catch(V){j={error:V}}finally{try{k&&!k.done&&(A=R.return)&&A.call(R)}finally{if(j)throw j.error}}return $};function v(){var S=h(Object(c.j)(0),2)[1];return Object(c.h)(function(){S(function(P){return P+1})},[])}function g(S){if(!S||typeof S!="object")return!1;var P=Object.getPrototypeOf(S);return!P||P===Object.prototype}function b(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var w={};function O(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:w}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),h=function(v){return c(v)?v:void 0};n.exports=function(v,g){return arguments.length<2?h(s[v]):s[v]&&s[v][g]}},function(n,o,r){var s=r(16),c=r(34),h=r(33),v=r(32),g=r(204),b=r(50),w=r(101);s({target:"Reflect",stat:!0},{get:function O(S,P){var A,k,j=arguments.length<3?S:arguments[2];return v(S)===j?S[P]:(A=b.f(S,P))?g(A)?A.value:A.get===void 0?void 0:c(A.get,j):h(k=w(S))?O(k,P,j):void 0}})},function(n,o,r){(function(s){var c=r(31),h=r(171),v=t&&!t.nodeType&&t,g=v&&typeof s=="object"&&s&&!s.nodeType&&s,b=g&&g.exports===v?c.a.Buffer:void 0,w=(b?b.isBuffer:void 0)||h.a;o.a=w}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),h=t&&!t.nodeType&&t,v=h&&typeof s=="object"&&s&&!s.nodeType&&s,g=v&&v.exports===h&&c.a.process,b=function(){try{var w=v&&v.require&&v.require("util").types;return w||g&&g.binding&&g.binding("util")}catch{}}();o.a=b}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),h=r(84),v=r(69),g=r(41),b=r(86),w=r(35),O=r(133),S=Object.getOwnPropertyDescriptor;o.f=s?S:function(P,A){if(P=g(P),A=b(A),O)try{return S(P,A)}catch{}if(w(P,A))return v(!c(h.f,P,A),P[A])}},function(n,o,r){var s=r(15),c=s({}.toString),h=s("".slice);n.exports=function(v){return h(c(v),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(h){return c(h)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),h=r(88),v=s.TypeError;n.exports=function(g){if(c(g))return g;throw v(h(g)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),h=r(69);n.exports=s?function(v,g,b){return c.f(v,g,h(1,b))}:function(v,g,b){return v[g]=b,v}},function(n,o,r){var s,c,h,v=r(175),g=r(7),b=r(15),w=r(33),O=r(57),S=r(35),P=r(109),A=r(93),k=r(72),j="Object already initialized",R=g.TypeError,$=g.WeakMap;if(v||P.state){var V=P.state||(P.state=new $),H=b(V.get),Y=b(V.has),Q=b(V.set);s=function(I,z){if(Y(V,I))throw new R(j);return z.facade=I,Q(V,I,z),z},c=function(I){return H(V,I)||{}},h=function(I){return Y(V,I)}}else{var W=A("state");k[W]=!0,s=function(I,z){if(S(I,W))throw new R(j);return z.facade=I,O(I,W,z),z},c=function(I){return S(I,W)?I[W]:{}},h=function(I){return S(I,W)}}n.exports={set:s,get:c,has:h,enforce:function(I){return h(I)?c(I):s(I,{})},getterFor:function(I){return function(z){var K;if(!w(z)||(K=c(z)).type!==I)throw R("Incompatible receiver, "+I+" required");return K}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var h=+c;return h!=h||h===0?0:(h>0?s:r)(h)}},function(n,o,r){var s,c=r(32),h=r(176),v=r(111),g=r(72),b=r(138),w=r(91),O=r(93),S=O("IE_PROTO"),P=function(){},A=function(R){return"<script>"+R+"<\/script>"},k=function(R){R.write(A("")),R.close();var $=R.parentWindow.Object;return R=null,$},j=function(){try{s=new ActiveXObject("htmlfile")}catch{}var R,$;j=typeof document<"u"?document.domain&&s?k(s):(($=w("iframe")).style.display="none",b.appendChild($),$.src="javascript:",(R=$.contentWindow.document).open(),R.write(A("document.F=Object")),R.close(),R.F):k(s);for(var V=v.length;V--;)delete j.prototype[v[V]];return j()};g[S]=!0,n.exports=Object.create||function(R,$){var V;return R!==null?(P.prototype=c(R),V=new P,P.prototype=null,V[S]=R):V=j(),$===void 0?V:h(V,$)}},function(n,o,r){var s=r(36),c=r(7),h=r(15),v=r(95),g=r(42),b=r(35),w=r(148),O=r(54),S=r(87),P=r(131),A=r(18),k=r(74).f,j=r(50).f,R=r(38).f,$=r(160),V=r(161).trim,H="Number",Y=c.Number,Q=Y.prototype,W=c.TypeError,I=h("".slice),z=h("".charCodeAt),K=function(Ie){var Pe=P(Ie,"number");return typeof Pe=="bigint"?Pe:q(Pe)},q=function(Ie){var Pe,le,ye,Me,We,je,it,bt,Mt=P(Ie,"number");if(S(Mt))throw W("Cannot convert a Symbol value to a number");if(typeof Mt=="string"&&Mt.length>2){if(Mt=V(Mt),(Pe=z(Mt,0))===43||Pe===45){if((le=z(Mt,2))===88||le===120)return NaN}else if(Pe===48){switch(z(Mt,1)){case 66:case 98:ye=2,Me=49;break;case 79:case 111:ye=8,Me=55;break;default:return+Mt}for(je=(We=I(Mt,2)).length,it=0;it<je;it++)if((bt=z(We,it))<48||bt>Me)return NaN;return parseInt(We,ye)}}return+Mt};if(v(H,!Y(" 0o1")||!Y("0b1")||Y("+0x1"))){for(var ce,ke=function(Ie){var Pe=arguments.length<1?0:Y(K(Ie)),le=this;return O(Q,le)&&A(function(){$(le)})?w(Object(Pe),le,ke):Pe},Oe=s?k(Y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ze=0;Oe.length>ze;ze++)b(Y,ce=Oe[ze])&&!b(ke,ce)&&R(ke,ce,j(Y,ce));ke.prototype=Q,Q.constructor=ke,g(c,H,ke)}},function(n,o,r){var s=r(56);n.exports=function(c,h){var v=c[h];return v==null?void 0:s(v)}},function(n,o,r){var s=r(86),c=r(38),h=r(69);n.exports=function(v,g,b){var w=s(g);w in v?c.f(v,w,h(0,b)):v[w]=b}},function(n,o,r){var s=r(15),c=r(56),h=s(s.bind);n.exports=function(v,g){return c(v),g===void 0?v:h?h(v,g):function(){return v.apply(g,arguments)}}},function(n,o,r){var s=r(16),c=r(15),h=r(85),v=r(41),g=r(121),b=c([].join),w=h!=Object,O=g("join",",");s({target:"Array",proto:!0,forced:w||!O},{join:function(S){return b(v(this),S===void 0?",":S)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,h=r(42),v=r(32),g=r(54),b=r(39),w=r(18),O=r(154),S="toString",P=RegExp.prototype,A=P.toString,k=s(O),j=w(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),R=c&&A.name!=S;(j||R)&&h(RegExp.prototype,S,function(){var $=v(this),V=b($.source),H=$.flags;return"/"+V+"/"+b(H===void 0&&g(P,$)&&!("flags"in P)?k($):H)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),h=r(100);s({target:"Array",proto:!0},{fill:c}),h("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,h=r(7),v=r(55),g=h.process,b=h.Deno,w=g&&g.versions||b&&b.version,O=w&&w.v8;O&&(c=(s=O.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&v&&(!(s=v.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=v.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),h=Function.prototype,v=s&&Object.getOwnPropertyDescriptor,g=c(h,"name"),b=g&&(function(){}).name==="something",w=g&&(!s||s&&v(h,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:w}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(h){return s(h,c)}},function(n,o,r){var s=r(59),c=Math.max,h=Math.min;n.exports=function(v,g){var b=s(v);return b<0?c(b+g,0):h(b,g)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,h=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?h.bind(s):function(){return h.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(h){return s(h,c)}},function(n,o,r){var s=r(38).f,c=r(35),h=r(28)("toStringTag");n.exports=function(v,g,b){v&&!c(v=b?v:v.prototype,h)&&s(v,h,{configurable:!0,value:g})}},function(n,o,r){var s=r(64),c=r(15),h=r(85),v=r(40),g=r(45),b=r(115),w=c([].push),O=function(S){var P=S==1,A=S==2,k=S==3,j=S==4,R=S==6,$=S==7,V=S==5||R;return function(H,Y,Q,W){for(var I,z,K=v(H),q=h(K),ce=s(Y,Q),ke=g(q),Oe=0,ze=W||b,Ie=P?ze(H,ke):A||$?ze(H,0):void 0;ke>Oe;Oe++)if((V||Oe in q)&&(z=ce(I=q[Oe],Oe,K),S))if(P)Ie[Oe]=z;else if(z)switch(S){case 3:return!0;case 5:return I;case 6:return Oe;case 2:w(Ie,I)}else switch(S){case 4:return!1;case 7:w(Ie,I)}return R?-1:k||j?j:Ie}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),h=r(70),v=c("species");n.exports=function(g){return h>=51||!s(function(){var b=[];return(b.constructor={})[v]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),h=r(15),v=r(123),g=r(159),b=r(32),w=r(44),O=r(164),S=r(124),P=r(94),A=r(39),k=r(62),j=r(114),R=r(125),$=r(103),V=r(155),H=r(18),Y=V.UNSUPPORTED_Y,Q=4294967295,W=Math.min,I=[].push,z=h(/./.exec),K=h(I),q=h("".slice),ce=!H(function(){var ke=/(?:)/,Oe=ke.exec;ke.exec=function(){return Oe.apply(this,arguments)};var ze="ab".split(ke);return ze.length!==2||ze[0]!=="a"||ze[1]!=="b"});v("split",function(ke,Oe,ze){var Ie;return Ie="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Pe,le){var ye=A(w(this)),Me=le===void 0?Q:le>>>0;if(Me===0)return[];if(Pe===void 0)return[ye];if(!g(Pe))return c(Oe,ye,Pe,Me);for(var We,je,it,bt=[],Mt=(Pe.ignoreCase?"i":"")+(Pe.multiline?"m":"")+(Pe.unicode?"u":"")+(Pe.sticky?"y":""),Yt=0,Ce=new RegExp(Pe.source,Mt+"g");(We=c($,Ce,ye))&&!((je=Ce.lastIndex)>Yt&&(K(bt,q(ye,Yt,We.index)),We.length>1&&We.index<ye.length&&s(I,bt,j(We,1)),it=We[0].length,Yt=je,bt.length>=Me));)Ce.lastIndex===We.index&&Ce.lastIndex++;return Yt===ye.length?!it&&z(Ce,"")||K(bt,""):K(bt,q(ye,Yt)),bt.length>Me?j(bt,0,Me):bt}:"0".split(void 0,0).length?function(Pe,le){return Pe===void 0&&le===0?[]:c(Oe,this,Pe,le)}:Oe,[function(Pe,le){var ye=w(this),Me=Pe==null?void 0:k(Pe,ke);return Me?c(Me,Pe,ye,le):c(Ie,A(ye),Pe,le)},function(Pe,le){var ye=b(this),Me=A(Pe),We=ze(Ie,ye,Me,le,Ie!==Oe);if(We.done)return We.value;var je=O(ye,RegExp),it=ye.unicode,bt=(ye.ignoreCase?"i":"")+(ye.multiline?"m":"")+(ye.unicode?"u":"")+(Y?"g":"y"),Mt=new je(Y?"^(?:"+ye.source+")":ye,bt),Yt=le===void 0?Q:le>>>0;if(Yt===0)return[];if(Me.length===0)return R(Mt,Me)===null?[Me]:[];for(var Ce=0,ge=0,Se=[];ge<Me.length;){Mt.lastIndex=Y?0:ge;var ht,zt=R(Mt,Y?q(Me,ge):Me);if(zt===null||(ht=W(P(Mt.lastIndex+(Y?ge:0)),Me.length))===Ce)ge=S(Me,ge,it);else{if(K(Se,q(Me,Ce,ge)),Se.length===Yt)return Se;for(var Ot=1;Ot<=zt.length-1;Ot++)if(K(Se,zt[Ot]),Se.length===Yt)return Se;ge=Ce=ht}}return K(Se,q(Me,Ce)),Se}]},!ce,Y)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,h=c&&!s.call({1:2},1);o.f=h?function(v){var g=c(this,v);return!!g&&g.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),h=r(18),v=r(51),g=s.Object,b=c("".split);n.exports=h(function(){return!g("z").propertyIsEnumerable(0)})?function(w){return v(w)=="String"?b(w,""):g(w)}:g},function(n,o,r){var s=r(131),c=r(87);n.exports=function(h){var v=s(h,"string");return c(v)?v:v+""}},function(n,o,r){var s=r(7),c=r(46),h=r(30),v=r(54),g=r(132),b=s.Object;n.exports=g?function(w){return typeof w=="symbol"}:function(w){var O=c("Symbol");return h(O)&&v(O.prototype,b(w))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(h,v){return c[h]||(c[h]=v!==void 0?v:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,h=Math.random(),v=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+v(++c+h,36)}},function(n,o,r){var s=r(7),c=r(33),h=s.document,v=c(h)&&c(h.createElement);n.exports=function(g){return v?h.createElement(g):{}}},function(n,o,r){var s=r(15),c=r(30),h=r(109),v=s(Function.toString);c(h.inspectSource)||(h.inspectSource=function(g){return v(g)}),n.exports=h.inspectSource},function(n,o,r){var s=r(89),c=r(90),h=s("keys");n.exports=function(v){return h[v]||(h[v]=c(v))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(h){return h>0?c(s(h),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),h=/#|\.prototype\./,v=function(S,P){var A=b[g(S)];return A==O||A!=w&&(c(P)?s(P):!!P)},g=v.normalize=function(S){return String(S).replace(h,".").toLowerCase()},b=v.data={},w=v.NATIVE="N",O=v.POLYFILL="P";n.exports=v},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),h=r(30),v=r(51),g=r(28)("toStringTag"),b=s.Object,w=v(function(){return arguments}())=="Arguments";n.exports=c?v:function(O){var S,P,A;return O===void 0?"Undefined":O===null?"Null":typeof(P=function(k,j){try{return k[j]}catch{}}(S=b(O),g))=="string"?P:w?v(S):(A=v(S))=="Object"&&h(S.callee)?"Arguments":A}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),h=r(30),v=r(97),g=r(46),b=r(92),w=function(){},O=[],S=g("Reflect","construct"),P=/^\s*(?:class|function)\b/,A=s(P.exec),k=!P.exec(w),j=function(R){if(!h(R))return!1;try{return S(w,O,R),!0}catch{return!1}};n.exports=!S||c(function(){var R;return j(j.call)||!j(Object)||!j(function(){R=!0})||R})?function(R){if(!h(R))return!1;switch(v(R)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return k||!!A(P,b(R))}:j},function(n,o,r){var s=r(28),c=r(60),h=r(38),v=s("unscopables"),g=Array.prototype;g[v]==null&&h.f(g,v,{configurable:!0,value:c(null)}),n.exports=function(b){g[v][b]=!0}},function(n,o,r){var s=r(7),c=r(35),h=r(30),v=r(40),g=r(93),b=r(143),w=g("IE_PROTO"),O=s.Object,S=O.prototype;n.exports=b?O.getPrototypeOf:function(P){var A=v(P);if(c(A,w))return A[w];var k=A.constructor;return h(k)&&A instanceof k?k.prototype:A instanceof O?S:null}},function(n,o,r){var s=r(15),c=r(32),h=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var v,g=!1,b={};try{(v=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(w,O){return c(w),h(O),g?v(w,O):w.__proto__=O,w}}():void 0)},function(n,o,r){var s,c,h=r(34),v=r(15),g=r(39),b=r(154),w=r(155),O=r(89),S=r(60),P=r(58).get,A=r(190),k=r(191),j=O("native-string-replace",String.prototype.replace),R=RegExp.prototype.exec,$=R,V=v("".charAt),H=v("".indexOf),Y=v("".replace),Q=v("".slice),W=(c=/b*/g,h(R,s=/a/,"a"),h(R,c,"a"),s.lastIndex!==0||c.lastIndex!==0),I=w.BROKEN_CARET,z=/()??/.exec("")[1]!==void 0;(W||z||I||A||k)&&($=function(K){var q,ce,ke,Oe,ze,Ie,Pe,le=this,ye=P(le),Me=g(K),We=ye.raw;if(We)return We.lastIndex=le.lastIndex,q=h($,We,Me),le.lastIndex=We.lastIndex,q;var je=ye.groups,it=I&&le.sticky,bt=h(b,le),Mt=le.source,Yt=0,Ce=Me;if(it&&(bt=Y(bt,"y",""),H(bt,"g")===-1&&(bt+="g"),Ce=Q(Me,le.lastIndex),le.lastIndex>0&&(!le.multiline||le.multiline&&V(Me,le.lastIndex-1)!==`
`)&&(Mt="(?: "+Mt+")",Ce=" "+Ce,Yt++),ce=new RegExp("^(?:"+Mt+")",bt)),z&&(ce=new RegExp("^"+Mt+"$(?!\\s)",bt)),W&&(ke=le.lastIndex),Oe=h(R,it?ce:le,Ce),it?Oe?(Oe.input=Q(Oe.input,Yt),Oe[0]=Q(Oe[0],Yt),Oe.index=le.lastIndex,le.lastIndex+=Oe[0].length):le.lastIndex=0:W&&Oe&&(le.lastIndex=le.global?Oe.index+Oe[0].length:ke),z&&Oe&&Oe.length>1&&h(j,Oe[0],ce,function(){for(ze=1;ze<arguments.length-2;ze++)arguments[ze]===void 0&&(Oe[ze]=void 0)}),Oe&&je)for(Oe.groups=Ie=S(null),ze=0;ze<je.length;ze++)Ie[(Pe=je[ze])[0]]=Oe[Pe[1]];return Oe}),n.exports=$},function(n,o,r){var s=r(16),c=r(7),h=r(75),v=r(59),g=r(45),b=r(40),w=r(115),O=r(63),S=r(81)("splice"),P=c.TypeError,A=Math.max,k=Math.min,j=9007199254740991,R="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!S},{splice:function($,V){var H,Y,Q,W,I,z,K=b(this),q=g(K),ce=h($,q),ke=arguments.length;if(ke===0?H=Y=0:ke===1?(H=0,Y=q-ce):(H=ke-2,Y=k(A(v(V),0),q-ce)),q+H-Y>j)throw P(R);for(Q=w(K,Y),W=0;W<Y;W++)(I=ce+W)in K&&O(Q,W,K[I]);if(Q.length=Y,H<Y){for(W=ce;W<q-Y;W++)z=W+H,(I=W+Y)in K?K[z]=K[I]:delete K[z];for(W=q;W>q-Y+H;W--)delete K[W-1]}else if(H>Y)for(W=q-Y;W>ce;W--)z=W+H-1,(I=W+Y-1)in K?K[z]=K[I]:delete K[z];for(W=0;W<H;W++)K[W+ce]=arguments[W+2];return K.length=q-Y+H,Q}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(h){return c(this,"a","name",h)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),h=t&&!t.nodeType&&t,v=h&&typeof s=="object"&&s&&!s.nodeType&&s,g=v&&v.exports===h?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;o.a=function(w,O){if(O)return w.slice();var S=w.length,P=b?b(S):new w.constructor(S);return w.copy(P),P}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),h="__core-js_shared__",v=s[h]||c(h,{});n.exports=v},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(h,v){try{c(s,h,{value:v,configurable:!0,writable:!0})}catch{s[h]=v}return v}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),h=r(45),v=r(63),g=s.Array,b=Math.max;n.exports=function(w,O,S){for(var P=h(w),A=c(O,P),k=c(S===void 0?P:S,P),j=g(b(k-A,0)),R=0;A<k;A++,R++)v(j,R,w[A]);return j.length=R,j}},function(n,o,r){var s=r(178);n.exports=function(c,h){return new(s(c))(h===0?0:h)}},function(n,o,r){var s=r(16),c=r(34),h=r(71),v=r(73),g=r(30),b=r(180),w=r(101),O=r(102),S=r(78),P=r(57),A=r(42),k=r(28),j=r(80),R=r(142),$=v.PROPER,V=v.CONFIGURABLE,H=R.IteratorPrototype,Y=R.BUGGY_SAFARI_ITERATORS,Q=k("iterator"),W="keys",I="values",z="entries",K=function(){return this};n.exports=function(q,ce,ke,Oe,ze,Ie,Pe){b(ke,ce,Oe);var le,ye,Me,We=function(ge){if(ge===ze&&Yt)return Yt;if(!Y&&ge in bt)return bt[ge];switch(ge){case W:case I:case z:return function(){return new ke(this,ge)}}return function(){return new ke(this)}},je=ce+" Iterator",it=!1,bt=q.prototype,Mt=bt[Q]||bt["@@iterator"]||ze&&bt[ze],Yt=!Y&&Mt||We(ze),Ce=ce=="Array"&&bt.entries||Mt;if(Ce&&(le=w(Ce.call(new q)))!==Object.prototype&&le.next&&(h||w(le)===H||(O?O(le,H):g(le[Q])||A(le,Q,K)),S(le,je,!0,!0),h&&(j[je]=K)),$&&ze==I&&Mt&&Mt.name!==I&&(!h&&V?P(bt,"name",I):(it=!0,Yt=function(){return c(Mt,this)})),ze)if(ye={values:We(I),keys:Ie?Yt:We(W),entries:We(z)},Pe)for(Me in ye)(Y||it||!(Me in bt))&&A(bt,Me,ye[Me]);else s({target:ce,proto:!0,forced:Y||it},ye);return h&&!Pe||bt[Q]===Yt||A(bt,Q,Yt,{name:ze}),j[ce]=Yt,ye}},function(n,o,r){var s=r(7),c=r(64),h=r(34),v=r(32),g=r(88),b=r(145),w=r(45),O=r(54),S=r(146),P=r(118),A=r(147),k=s.TypeError,j=function($,V){this.stopped=$,this.result=V},R=j.prototype;n.exports=function($,V,H){var Y,Q,W,I,z,K,q,ce=H&&H.that,ke=!(!H||!H.AS_ENTRIES),Oe=!(!H||!H.IS_ITERATOR),ze=!(!H||!H.INTERRUPTED),Ie=c(V,ce),Pe=function(ye){return Y&&A(Y,"normal",ye),new j(!0,ye)},le=function(ye){return ke?(v(ye),ze?Ie(ye[0],ye[1],Pe):Ie(ye[0],ye[1])):ze?Ie(ye,Pe):Ie(ye)};if(Oe)Y=$;else{if(!(Q=P($)))throw k(g($)+" is not iterable");if(b(Q)){for(W=0,I=w($);I>W;W++)if((z=le($[W]))&&O(R,z))return z;return new j(!1)}Y=S($,Q)}for(K=Y.next;!(q=h(K,Y)).done;){try{z=le(q.value)}catch(ye){A(Y,"throw",ye)}if(typeof z=="object"&&z&&O(R,z))return z}return new j(!1)}},function(n,o,r){var s=r(97),c=r(62),h=r(80),v=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,v)||c(g,"@@iterator")||h[s(g)]}},function(n,o,r){var s=r(7),c=r(54),h=s.TypeError;n.exports=function(v,g){if(c(g,v))return v;throw h("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var h=0,v={next:function(){return{done:!!h++}},return:function(){c=!0}};v[s]=function(){return this},Array.from(v,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var w=!1;try{var O={};O[s]=function(){return{next:function(){return{done:w=!0}}}},g(O)}catch{}return w}},function(n,o,r){var s=r(18);n.exports=function(c,h){var v=[][c];return!!v&&s(function(){v.call(null,h||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),h=r(103),v=r(18),g=r(28),b=r(57),w=g("species"),O=RegExp.prototype;n.exports=function(S,P,A,k){var j=g(S),R=!v(function(){var Y={};return Y[j]=function(){return 7},""[S](Y)!=7}),$=R&&!v(function(){var Y=!1,Q=/a/;return S==="split"&&((Q={}).constructor={},Q.constructor[w]=function(){return Q},Q.flags="",Q[j]=/./[j]),Q.exec=function(){return Y=!0,null},Q[j](""),!Y});if(!R||!$||A){var V=s(/./[j]),H=P(j,""[S],function(Y,Q,W,I,z){var K=s(Y),q=Q.exec;return q===h||q===O.exec?R&&!z?{done:!0,value:V(Q,W,I)}:{done:!0,value:K(W,Q,I)}:{done:!1}});c(String.prototype,S,H[0]),c(O,j,H[1])}k&&b(O[j],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,h,v){return h+(v?s(c,h).length:1)}},function(n,o,r){var s=r(7),c=r(34),h=r(32),v=r(30),g=r(51),b=r(103),w=s.TypeError;n.exports=function(O,S){var P=O.exec;if(v(P)){var A=c(P,O,S);return A!==null&&h(A),A}if(g(O)==="RegExp")return c(b,O,S);throw w("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),h=r(15),v=r(123),g=r(18),b=r(32),w=r(30),O=r(59),S=r(94),P=r(39),A=r(44),k=r(124),j=r(62),R=r(201),$=r(125),V=r(28)("replace"),H=Math.max,Y=Math.min,Q=h([].concat),W=h([].push),I=h("".indexOf),z=h("".slice),K="a".replace(/./,"$0")==="$0",q=!!/./[V]&&/./[V]("a","$0")==="";v("replace",function(ce,ke,Oe){var ze=q?"$":"$0";return[function(Ie,Pe){var le=A(this),ye=Ie==null?void 0:j(Ie,V);return ye?c(ye,Ie,le,Pe):c(ke,P(le),Ie,Pe)},function(Ie,Pe){var le=b(this),ye=P(Ie);if(typeof Pe=="string"&&I(Pe,ze)===-1&&I(Pe,"$<")===-1){var Me=Oe(ke,le,ye,Pe);if(Me.done)return Me.value}var We=w(Pe);We||(Pe=P(Pe));var je=le.global;if(je){var it=le.unicode;le.lastIndex=0}for(var bt=[];;){var Mt=$(le,ye);if(Mt===null||(W(bt,Mt),!je))break;P(Mt[0])===""&&(le.lastIndex=k(ye,S(le.lastIndex),it))}for(var Yt,Ce="",ge=0,Se=0;Se<bt.length;Se++){for(var ht=P((Mt=bt[Se])[0]),zt=H(Y(O(Mt.index),ye.length),0),Ot=[],rn=1;rn<Mt.length;rn++)W(Ot,(Yt=Mt[rn])===void 0?Yt:String(Yt));var yn=Mt.groups;if(We){var Tn=Q([ht],Ot,zt,ye);yn!==void 0&&W(Tn,yn);var pn=P(s(Pe,void 0,Tn))}else pn=R(ht,ye,zt,Ot,yn,Pe);zt>=ge&&(Ce+=z(ye,ge,zt)+pn,ge=zt+ht.length)}return Ce+z(ye,ge)}]},!!g(function(){var ce=/./;return ce.exec=function(){var ke=[];return ke.groups={a:"7"},ke},"".replace(ce,"$<a>")!=="7"})||!K||q)},function(n,o,r){var s=r(16),c=Math.hypot,h=Math.abs,v=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var w,O,S=0,P=0,A=arguments.length,k=0;P<A;)k<(w=h(arguments[P++]))?(S=S*(O=k/w)*O+1,k=w):S+=w>0?(O=w/k)*O:w;return k===1/0?1/0:k*v(S)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var h;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var v,g="Expected a function",b="__lodash_hash_undefined__",w="__lodash_placeholder__",O=16,S=32,P=64,A=128,k=256,j=1/0,R=9007199254740991,$=NaN,V=4294967295,H=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",S],["partialRight",P],["rearg",k]],Y="[object Arguments]",Q="[object Array]",W="[object Boolean]",I="[object Date]",z="[object Error]",K="[object Function]",q="[object GeneratorFunction]",ce="[object Map]",ke="[object Number]",Oe="[object Object]",ze="[object Promise]",Ie="[object RegExp]",Pe="[object Set]",le="[object String]",ye="[object Symbol]",Me="[object WeakMap]",We="[object ArrayBuffer]",je="[object DataView]",it="[object Float32Array]",bt="[object Float64Array]",Mt="[object Int8Array]",Yt="[object Int16Array]",Ce="[object Int32Array]",ge="[object Uint8Array]",Se="[object Uint8ClampedArray]",ht="[object Uint16Array]",zt="[object Uint32Array]",Ot=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,ft=RegExp(Tn.source),xn=RegExp(pn.source),$e=/<%-([\s\S]+?)%>/g,mn=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/,xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/[\\^$.*+?()[\]{}|]/g,no=RegExp(Ur.source),jn=/^\s+/,Co=/\s/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ke=/\{\n\/\* \[wrapped with (.+)\] \*/,De=/,? & /,at=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,Nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,oi=/^[-+]0x[0-9a-f]+$/i,mi=/^0b[01]+$/i,Go=/^\[object .+?Constructor\]$/,qo=/^0o[0-7]+$/i,Sn=/^(?:0|[1-9]\d*)$/,Bn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xn=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,Kr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rr="\\u2700-\\u27bf",fl="a-z\\xdf-\\xf6\\xf8-\\xff",Ga="A-Z\\xc0-\\xd6\\xd8-\\xde",dl="\\ufe0e\\ufe0f",lu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zd="['’]",mc="[\\ud800-\\udfff]",da="["+lu+"]",Wu="["+Kr+"]",Pn="\\d+",Df="[\\u2700-\\u27bf]",vo="["+fl+"]",gc="[^\\ud800-\\udfff"+lu+Pn+Rr+fl+Ga+"]",qi="\\ud83c[\\udffb-\\udfff]",ta="[^\\ud800-\\udfff]",Es="(?:\\ud83c[\\udde6-\\uddff]){2}",Aa="[\\ud800-\\udbff][\\udc00-\\udfff]",pa="["+Ga+"]",Ta="(?:"+vo+"|"+gc+")",bc="(?:"+pa+"|"+gc+")",_c="(?:['’](?:d|ll|m|re|s|t|ve))?",Cf="(?:['’](?:D|LL|M|RE|S|T|VE))?",zu="(?:"+Wu+"|"+qi+")?",jf="[\\ufe0e\\ufe0f]?",wc=jf+zu+("(?:\\u200d(?:"+[ta,Es,Aa].join("|")+")"+jf+zu+")*"),Hd="(?:"+[Df,Es,Aa].join("|")+")"+wc,Cl="(?:"+[ta+Wu+"?",Wu,Es,Aa,mc].join("|")+")",If=RegExp(zd,"g"),pl=RegExp(Wu,"g"),Ec=RegExp(qi+"(?="+qi+")|"+Cl+wc,"g"),Os=RegExp([pa+"?"+vo+"+"+_c+"(?="+[da,pa,"$"].join("|")+")",bc+"+"+Cf+"(?="+[da,pa+Ta,"$"].join("|")+")",pa+"?"+Ta+"+"+_c,pa+"+"+Cf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,Hd].join("|"),"g"),Oc=RegExp("[\\u200d\\ud800-\\udfff"+Kr+dl+"]"),xc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lf=-1,Wr={};Wr[it]=Wr[bt]=Wr[Mt]=Wr[Yt]=Wr[Ce]=Wr[ge]=Wr[Se]=Wr[ht]=Wr[zt]=!0,Wr[Y]=Wr[Q]=Wr[We]=Wr[W]=Wr[je]=Wr[I]=Wr[z]=Wr[K]=Wr[ce]=Wr[ke]=Wr[Oe]=Wr[Ie]=Wr[Pe]=Wr[le]=Wr[Me]=!1;var Gr={};Gr[Y]=Gr[Q]=Gr[We]=Gr[je]=Gr[W]=Gr[I]=Gr[it]=Gr[bt]=Gr[Mt]=Gr[Yt]=Gr[Ce]=Gr[ce]=Gr[ke]=Gr[Oe]=Gr[Ie]=Gr[Pe]=Gr[le]=Gr[ye]=Gr[ge]=Gr[Se]=Gr[ht]=Gr[zt]=!0,Gr[z]=Gr[K]=Gr[Me]=!1;var Ff={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uu=parseFloat,ha=parseInt,xs=typeof s=="object"&&s&&s.Object===Object&&s,$f=typeof self=="object"&&self&&self.Object===Object&&self,jo=xs||$f||Function("return this")(),jl=o&&!o.nodeType&&o,Il=jl&&typeof c=="object"&&c&&!c.nodeType&&c,Ss=Il&&Il.exports===jl,su=Ss&&xs.process,gi=function(){try{var ut=Il&&Il.require&&Il.require("util").types;return ut||su&&su.binding&&su.binding("util")}catch{}}(),Sc=gi&&gi.isArrayBuffer,Bf=gi&&gi.isDate,Ac=gi&&gi.isMap,ji=gi&&gi.isRegExp,ii=gi&&gi.isSet,na=gi&&gi.isTypedArray;function ro(ut,jt,$t){switch($t.length){case 0:return ut.call(jt);case 1:return ut.call(jt,$t[0]);case 2:return ut.call(jt,$t[0],$t[1]);case 3:return ut.call(jt,$t[0],$t[1],$t[2])}return ut.apply(jt,$t)}function Uf(ut,jt,$t,fn){for(var ur=-1,Mr=ut==null?0:ut.length;++ur<Mr;){var fo=ut[ur];jt(fn,fo,$t(fo),ut)}return fn}function Ii(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn&&jt(ut[$t],$t,ut)!==!1;);return ut}function Tc(ut,jt){for(var $t=ut==null?0:ut.length;$t--&&jt(ut[$t],$t,ut)!==!1;);return ut}function Gf(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn;)if(!jt(ut[$t],$t,ut))return!1;return!0}function Li(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length,ur=0,Mr=[];++$t<fn;){var fo=ut[$t];jt(fo,$t,ut)&&(Mr[ur++]=fo)}return Mr}function Ni(ut,jt){return!!(ut!=null&&ut.length)&&cu(ut,jt,0)>-1}function Mc(ut,jt,$t){for(var fn=-1,ur=ut==null?0:ut.length;++fn<ur;)if($t(jt,ut[fn]))return!0;return!1}function Lr(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length,ur=Array(fn);++$t<fn;)ur[$t]=jt(ut[$t],$t,ut);return ur}function ai(ut,jt){for(var $t=-1,fn=jt.length,ur=ut.length;++$t<fn;)ut[ur+$t]=jt[$t];return ut}function As(ut,jt,$t,fn){var ur=-1,Mr=ut==null?0:ut.length;for(fn&&Mr&&($t=ut[++ur]);++ur<Mr;)$t=jt($t,ut[ur],ur,ut);return $t}function Vf(ut,jt,$t,fn){var ur=ut==null?0:ut.length;for(fn&&ur&&($t=ut[--ur]);ur--;)$t=jt($t,ut[ur],ur,ut);return $t}function Pc(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn;)if(jt(ut[$t],$t,ut))return!0;return!1}var Ts=$i("length");function Va(ut,jt,$t){var fn;return $t(ut,function(ur,Mr,fo){if(jt(ur,Mr,fo))return fn=Mr,!1}),fn}function Fi(ut,jt,$t,fn){for(var ur=ut.length,Mr=$t+(fn?1:-1);fn?Mr--:++Mr<ur;)if(jt(ut[Mr],Mr,ut))return Mr;return-1}function cu(ut,jt,$t){return jt==jt?function(fn,ur,Mr){for(var fo=Mr-1,T=fn.length;++fo<T;)if(fn[fo]===ur)return fo;return-1}(ut,jt,$t):Fi(ut,va,$t)}function Ki(ut,jt,$t,fn){for(var ur=$t-1,Mr=ut.length;++ur<Mr;)if(fn(ut[ur],jt))return ur;return-1}function va(ut){return ut!=ut}function Tr(ut,jt){var $t=ut==null?0:ut.length;return $t?fu(ut,jt)/$t:$}function $i(ut){return function(jt){return jt==null?v:jt[ut]}}function Ma(ut){return function(jt){return ut==null?v:ut[jt]}}function di(ut,jt,$t,fn,ur){return ur(ut,function(Mr,fo,T){$t=fn?(fn=!1,Mr):jt($t,Mr,fo,T)}),$t}function fu(ut,jt){for(var $t,fn=-1,ur=ut.length;++fn<ur;){var Mr=jt(ut[fn]);Mr!==v&&($t=$t===v?Mr:$t+Mr)}return $t}function Ll(ut,jt){for(var $t=-1,fn=Array(ut);++$t<ut;)fn[$t]=jt($t);return fn}function Pa(ut){return ut&&ut.slice(0,li(ut)+1).replace(jn,"")}function co(ut){return function(jt){return ut(jt)}}function Hu(ut,jt){return Lr(jt,function($t){return ut[$t]})}function Wa(ut,jt){return ut.has(jt)}function ya(ut,jt){for(var $t=-1,fn=ut.length;++$t<fn&&cu(jt,ut[$t],0)>-1;);return $t}function Nc(ut,jt){for(var $t=ut.length;$t--&&cu(jt,ut[$t],0)>-1;);return $t}function Yd(ut,jt){for(var $t=ut.length,fn=0;$t--;)ut[$t]===jt&&++fn;return fn}var kc=Ma({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Vo=Ma({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fl(ut){return"\\"+Ff[ut]}function za(ut){return Oc.test(ut)}function Ko(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn,ur){$t[++jt]=[ur,fn]}),$t}function Rc(ut,jt){return function($t){return ut(jt($t))}}function ra(ut,jt){for(var $t=-1,fn=ut.length,ur=0,Mr=[];++$t<fn;){var fo=ut[$t];fo!==jt&&fo!==w||(ut[$t]=w,Mr[ur++]=$t)}return Mr}function ma(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn){$t[++jt]=fn}),$t}function Ms(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn){$t[++jt]=[fn,fn]}),$t}function Bi(ut){return za(ut)?function(jt){for(var $t=Ec.lastIndex=0;Ec.test(jt);)++$t;return $t}(ut):Ts(ut)}function Zi(ut){return za(ut)?function(jt){return jt.match(Ec)||[]}(ut):function(jt){return jt.split("")}(ut)}function li(ut){for(var jt=ut.length;jt--&&Co.test(ut.charAt(jt)););return jt}var oa=Ma({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ki=function ut(jt){var $t,fn=(jt=jt==null?jo:ki.defaults(jo.Object(),jt,ki.pick(jo,Xd))).Array,ur=jt.Date,Mr=jt.Error,fo=jt.Function,T=jt.Math,M=jt.Object,U=jt.RegExp,te=jt.String,me=jt.TypeError,Ve=fn.prototype,vt=fo.prototype,Ht=M.prototype,_n=jt["__core-js_shared__"],yr=vt.toString,ln=Ht.hasOwnProperty,Vr=0,pr=($t=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||""))?"Symbol(src)_1."+$t:"",Cr=Ht.toString,ia=yr.call(M),bo=jo._,Ji=U("^"+yr.call(ln).replace(Ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hl=Ss?jt.Buffer:v,vl=jt.Symbol,$l=jt.Uint8Array,du=hl?hl.allocUnsafe:v,Ha=Rc(M.getPrototypeOf,M),pu=M.create,Zo=Ht.propertyIsEnumerable,Bl=Ve.splice,yl=vl?vl.isConcatSpreadable:v,Xa=vl?vl.iterator:v,Ya=vl?vl.toStringTag:v,Xu=function(){try{var d=Qa(M,"defineProperty");return d({},"",{}),d}catch{}}(),oh=jt.clearTimeout!==jo.clearTimeout&&jt.clearTimeout,ih=ur&&ur.now!==jo.Date.now&&ur.now,qd=jt.setTimeout!==jo.setTimeout&&jt.setTimeout,Dc=T.ceil,Yu=T.floor,Wf=M.getOwnPropertySymbols,ah=hl?hl.isBuffer:v,qu=jt.isFinite,Cc=Ve.join,zf=Rc(M.keys,M),Io=T.max,Ui=T.min,Hf=ur.now,Xf=jt.parseInt,Ps=T.random,Gv=Ve.reverse,Ns=Qa(jt,"DataView"),ml=Qa(jt,"Map"),jc=Qa(jt,"Promise"),Ku=Qa(jt,"Set"),hu=Qa(jt,"WeakMap"),ks=Qa(M,"create"),Ic=hu&&new hu,vu={},Vv=Tu(Ns),Lc=Tu(ml),Wv=Tu(jc),zv=Tu(Ku),lh=Tu(hu),Yf=vl?vl.prototype:v,Ri=Yf?Yf.valueOf:v,uh=Yf?Yf.toString:v;function oe(d){if(Mo(d)&&!mr(d)&&!(d instanceof Pr)){if(d instanceof Na)return d;if(ln.call(d,"__wrapped__"))return yd(d)}return new Na(d)}var Zu=function(){function d(){}return function(m){if(!eo(m))return{};if(pu)return pu(m);d.prototype=m;var E=new d;return d.prototype=v,E}}();function Ul(){}function Na(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=v}function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function bi(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var D=d[m];this.set(D[0],D[1])}}function Fr(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var D=d[m];this.set(D[0],D[1])}}function qa(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var D=d[m];this.set(D[0],D[1])}}function Gl(d){var m=-1,E=d==null?0:d.length;for(this.__data__=new qa;++m<E;)this.add(d[m])}function ga(d){var m=this.__data__=new Fr(d);this.size=m.size}function qf(d,m){var E=mr(d),D=!E&&Pu(d),G=!E&&!D&&Ia(d),J=!E&&!D&&!G&&Qe(d),de=E||D||G||J,_e=de?Ll(d.length,te):[],Fe=_e.length;for(var pt in d)!m&&!ln.call(d,pt)||de&&(pt=="length"||G&&(pt=="offset"||pt=="parent")||J&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||oo(pt,Fe))||_e.push(pt);return _e}function Kf(d){var m=d.length;return m?d[ap(0,m-1)]:v}function Kd(d,m){return Sl(pi(d),yu(m,0,d.length))}function sh(d){return Sl(pi(d))}function Vl(d,m,E){(E!==v&&!ua(d[m],E)||E===v&&!(m in d))&&Ka(d,m,E)}function Lo(d,m,E){var D=d[m];ln.call(d,m)&&ua(D,E)&&(E!==v||m in d)||Ka(d,m,E)}function Rs(d,m){for(var E=d.length;E--;)if(ua(d[E][0],m))return E;return-1}function Zd(d,m,E,D){return yo(d,function(G,J,de){m(D,G,E(G),de)}),D}function Wl(d,m){return d&&_l(m,Lt(m),d)}function Ka(d,m,E){m=="__proto__"&&Xu?Xu(d,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):d[m]=E}function Fc(d,m){for(var E=-1,D=m.length,G=fn(D),J=d==null;++E<D;)G[E]=J?v:Wt(d,m[E]);return G}function yu(d,m,E){return d==d&&(E!==v&&(d=d<=E?d:E),m!==v&&(d=d>=m?d:m)),d}function ba(d,m,E,D,G,J){var de,_e=1&m,Fe=2&m,pt=4&m;if(E&&(de=G?E(d,D,G,J):E(d)),de!==v)return de;if(!eo(d))return d;var gt=mr(d);if(gt){if(de=function(Pt){var Qt=Pt.length,dr=new Pt.constructor(Qt);return Qt&&typeof Pt[0]=="string"&&ln.call(Pt,"index")&&(dr.index=Pt.index,dr.input=Pt.input),dr}(d),!_e)return pi(d,de)}else{var Gt=Ao(d),An=Gt==K||Gt==q;if(Ia(d))return fp(d,_e);if(Gt==Oe||Gt==Y||An&&!G){if(de=Fe||An?{}:xu(d),!_e)return Fe?function(Pt,Qt){return _l(Pt,Bs(Pt),Qt)}(d,function(Pt,Qt){return Pt&&_l(Qt,Tt(Qt),Pt)}(de,d)):function(Pt,Qt){return _l(Pt,$s(Pt),Qt)}(d,Wl(de,d))}else{if(!Gr[Gt])return G?d:{};de=function(Pt,Qt,dr){var gn=Pt.constructor;switch(Qt){case We:return Qu(Pt);case W:case I:return new gn(+Pt);case je:return function(or,jr){var Un=jr?Qu(or.buffer):or.buffer;return new or.constructor(Un,or.byteOffset,or.byteLength)}(Pt,dr);case it:case bt:case Mt:case Yt:case Ce:case ge:case Se:case ht:case zt:return po(Pt,dr);case ce:return new gn;case ke:case le:return new gn(Pt);case Ie:return function(or){var jr=new or.constructor(or.source,_r.exec(or));return jr.lastIndex=or.lastIndex,jr}(Pt);case Pe:return new gn;case ye:return ar=Pt,Ri?M(Ri.call(ar)):{}}var ar}(d,Gt,_e)}}J||(J=new ga);var On=J.get(d);if(On)return On;J.set(d,de),be(d)?d.forEach(function(Pt){de.add(ba(Pt,m,E,Pt,d,J))}):_i(d)&&d.forEach(function(Pt,Qt){de.set(Qt,ba(Pt,m,E,Qt,d,J))});var Yn=gt?v:(pt?Fe?pd:Kc:Fe?Tt:Lt)(d);return Ii(Yn||d,function(Pt,Qt){Yn&&(Pt=d[Qt=Pt]),Lo(de,Qt,ba(Pt,m,E,Qt,d,J))}),de}function Jd(d,m,E){var D=E.length;if(d==null)return!D;for(d=M(d);D--;){var G=E[D],J=m[G],de=d[G];if(de===v&&!(G in d)||!J(de))return!1}return!0}function Qd(d,m,E){if(typeof d!="function")throw new me(g);return ns(function(){d.apply(v,E)},m)}function Za(d,m,E,D){var G=-1,J=Ni,de=!0,_e=d.length,Fe=[],pt=m.length;if(!_e)return Fe;E&&(m=Lr(m,co(E))),D?(J=Mc,de=!1):m.length>=200&&(J=Wa,de=!1,m=new Gl(m));e:for(;++G<_e;){var gt=d[G],Gt=E==null?gt:E(gt);if(gt=D||gt!==0?gt:0,de&&Gt==Gt){for(var An=pt;An--;)if(m[An]===Gt)continue e;Fe.push(gt)}else J(m,Gt,D)||Fe.push(gt)}return Fe}oe.templateSettings={escape:$e,evaluate:mn,interpolate:Kn,variable:"",imports:{_:oe}},oe.prototype=Ul.prototype,oe.prototype.constructor=oe,Na.prototype=Zu(Ul.prototype),Na.prototype.constructor=Na,Pr.prototype=Zu(Ul.prototype),Pr.prototype.constructor=Pr,bi.prototype.clear=function(){this.__data__=ks?ks(null):{},this.size=0},bi.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},bi.prototype.get=function(d){var m=this.__data__;if(ks){var E=m[d];return E===b?v:E}return ln.call(m,d)?m[d]:v},bi.prototype.has=function(d){var m=this.__data__;return ks?m[d]!==v:ln.call(m,d)},bi.prototype.set=function(d,m){var E=this.__data__;return this.size+=this.has(d)?0:1,E[d]=ks&&m===v?b:m,this},Fr.prototype.clear=function(){this.__data__=[],this.size=0},Fr.prototype.delete=function(d){var m=this.__data__,E=Rs(m,d);return!(E<0)&&(E==m.length-1?m.pop():Bl.call(m,E,1),--this.size,!0)},Fr.prototype.get=function(d){var m=this.__data__,E=Rs(m,d);return E<0?v:m[E][1]},Fr.prototype.has=function(d){return Rs(this.__data__,d)>-1},Fr.prototype.set=function(d,m){var E=this.__data__,D=Rs(E,d);return D<0?(++this.size,E.push([d,m])):E[D][1]=m,this},qa.prototype.clear=function(){this.size=0,this.__data__={hash:new bi,map:new(ml||Fr),string:new bi}},qa.prototype.delete=function(d){var m=Fs(this,d).delete(d);return this.size-=m?1:0,m},qa.prototype.get=function(d){return Fs(this,d).get(d)},qa.prototype.has=function(d){return Fs(this,d).has(d)},qa.prototype.set=function(d,m){var E=Fs(this,d),D=E.size;return E.set(d,m),this.size+=E.size==D?0:1,this},Gl.prototype.add=Gl.prototype.push=function(d){return this.__data__.set(d,b),this},Gl.prototype.has=function(d){return this.__data__.has(d)},ga.prototype.clear=function(){this.__data__=new Fr,this.size=0},ga.prototype.delete=function(d){var m=this.__data__,E=m.delete(d);return this.size=m.size,E},ga.prototype.get=function(d){return this.__data__.get(d)},ga.prototype.has=function(d){return this.__data__.has(d)},ga.prototype.set=function(d,m){var E=this.__data__;if(E instanceof Fr){var D=E.__data__;if(!ml||D.length<199)return D.push([d,m]),this.size=++E.size,this;E=this.__data__=new qa(D)}return E.set(d,m),this.size=E.size,this};var yo=es(kn),ch=es(lo,!0);function ep(d,m){var E=!0;return yo(d,function(D,G,J){return E=!!m(D,G,J)}),E}function Fo(d,m,E){for(var D=-1,G=d.length;++D<G;){var J=d[D],de=m(J);if(de!=null&&(_e===v?de==de&&!dt(de):E(de,_e)))var _e=de,Fe=J}return Fe}function zr(d,m){var E=[];return yo(d,function(D,G,J){m(D,G,J)&&E.push(D)}),E}function Jo(d,m,E,D,G){var J=-1,de=d.length;for(E||(E=Jc),G||(G=[]);++J<de;){var _e=d[J];m>0&&E(_e)?m>1?Jo(_e,m-1,E,D,G):ai(G,_e):D||(G[G.length]=_e)}return G}var Er=ad(),ao=ad(!0);function kn(d,m){return d&&Er(d,m,Lt)}function lo(d,m){return d&&ao(d,m,Lt)}function $c(d,m){return Li(m,function(E){return Tl(d[E])})}function gl(d,m){for(var E=0,D=(m=_u(m,d)).length;d!=null&&E<D;)d=d[nl(m[E++])];return E&&E==D?d:v}function Zf(d,m,E){var D=m(d);return mr(d)?D:ai(D,E(d))}function _o(d){return d==null?d===v?"[object Undefined]":"[object Null]":Ya&&Ya in M(d)?function(m){var E=ln.call(m,Ya),D=m[Ya];try{m[Ya]=v;var G=!0}catch{}var J=Cr.call(m);return G&&(E?m[Ya]=D:delete m[Ya]),J}(d):function(m){return Cr.call(m)}(d)}function So(d,m){return d>m}function tp(d,m){return d!=null&&ln.call(d,m)}function np(d,m){return d!=null&&m in M(d)}function Bc(d,m,E){for(var D=E?Mc:Ni,G=d[0].length,J=d.length,de=J,_e=fn(J),Fe=1/0,pt=[];de--;){var gt=d[de];de&&m&&(gt=Lr(gt,co(m))),Fe=Ui(gt.length,Fe),_e[de]=!E&&(m||G>=120&&gt.length>=120)?new Gl(de&&gt):v}gt=d[0];var Gt=-1,An=_e[0];e:for(;++Gt<G&&pt.length<Fe;){var On=gt[Gt],Yn=m?m(On):On;if(On=E||On!==0?On:0,!(An?Wa(An,Yn):D(pt,Yn,E))){for(de=J;--de;){var Pt=_e[de];if(!(Pt?Wa(Pt,Yn):D(d[de],Yn,E)))continue e}An&&An.push(Yn),pt.push(On)}}return pt}function Gi(d,m,E){var D=(d=Au(d,m=_u(m,d)))==null?d:d[nl(Vi(m))];return D==null?v:ro(D,d,E)}function Jf(d){return Mo(d)&&_o(d)==Y}function Ds(d,m,E,D,G){return d===m||(d==null||m==null||!Mo(d)&&!Mo(m)?d!=d&&m!=m:function(J,de,_e,Fe,pt,gt){var Gt=mr(J),An=mr(de),On=Gt?Q:Ao(J),Yn=An?Q:Ao(de),Pt=(On=On==Y?Oe:On)==Oe,Qt=(Yn=Yn==Y?Oe:Yn)==Oe,dr=On==Yn;if(dr&&Ia(J)){if(!Ia(de))return!1;Gt=!0,Pt=!1}if(dr&&!Pt)return gt||(gt=new ga),Gt||Qe(J)?dd(J,de,_e,Fe,pt,gt):function(Un,er,zo,ot,eu,wi,Nu){switch(zo){case je:if(Un.byteLength!=er.byteLength||Un.byteOffset!=er.byteOffset)return!1;Un=Un.buffer,er=er.buffer;case We:return!(Un.byteLength!=er.byteLength||!wi(new $l(Un),new $l(er)));case W:case I:case ke:return ua(+Un,+er);case z:return Un.name==er.name&&Un.message==er.message;case Ie:case le:return Un==er+"";case ce:var us=Ko;case Pe:var _d=1&ot;if(us||(us=ma),Un.size!=er.size&&!_d)return!1;var Ap=Nu.get(Un);if(Ap)return Ap==er;ot|=2,Nu.set(Un,er);var cf=dd(us(Un),us(er),ot,eu,wi,Nu);return Nu.delete(Un),cf;case ye:if(Ri)return Ri.call(Un)==Ri.call(er)}return!1}(J,de,On,_e,Fe,pt,gt);if(!(1&_e)){var gn=Pt&&ln.call(J,"__wrapped__"),ar=Qt&&ln.call(de,"__wrapped__");if(gn||ar){var or=gn?J.value():J,jr=ar?de.value():de;return gt||(gt=new ga),pt(or,jr,_e,Fe,gt)}}return dr?(gt||(gt=new ga),function(Un,er,zo,ot,eu,wi){var Nu=1&zo,us=Kc(Un),_d=us.length,Ap=Kc(er).length;if(_d!=Ap&&!Nu)return!1;for(var cf=_d;cf--;){var qs=us[cf];if(!(Nu?qs in er:ln.call(er,qs)))return!1}var Zv=wi.get(Un),Jv=wi.get(er);if(Zv&&Jv)return Zv==er&&Jv==Un;var Tp=!0;wi.set(Un,er),wi.set(er,Un);for(var Nh=Nu;++cf<_d;){var Ks=Un[qs=us[cf]],Mp=er[qs];if(ot)var Qv=Nu?ot(Mp,Ks,qs,er,Un,wi):ot(Ks,Mp,qs,Un,er,wi);if(!(Qv===v?Ks===Mp||eu(Ks,Mp,zo,ot,wi):Qv)){Tp=!1;break}Nh||(Nh=qs=="constructor")}if(Tp&&!Nh){var Zs=Un.constructor,Pp=er.constructor;Zs==Pp||!("constructor"in Un)||!("constructor"in er)||typeof Zs=="function"&&Zs instanceof Zs&&typeof Pp=="function"&&Pp instanceof Pp||(Tp=!1)}return wi.delete(Un),wi.delete(er),Tp}(J,de,_e,Fe,pt,gt)):!1}(d,m,E,D,Ds,G))}function ka(d,m,E,D){var G=E.length,J=G,de=!D;if(d==null)return!J;for(d=M(d);G--;){var _e=E[G];if(de&&_e[2]?_e[1]!==d[_e[0]]:!(_e[0]in d))return!1}for(;++G<J;){var Fe=(_e=E[G])[0],pt=d[Fe],gt=_e[1];if(de&&_e[2]){if(pt===v&&!(Fe in d))return!1}else{var Gt=new ga;if(D)var An=D(pt,gt,Fe,d,m,Gt);if(!(An===v?Ds(gt,pt,3,D,Gt):An))return!1}}return!0}function mu(d){return!(!eo(d)||(m=d,pr&&pr in m))&&(Tl(d)?Ji:Go).test(Tu(d));var m}function zl(d){return typeof d=="function"?d:d==null?zn:typeof d=="object"?mr(d)?op(d[0],d[1]):rp(d):ue(d)}function Ra(d){if(!Su(d))return zf(d);var m=[];for(var E in M(d))ln.call(d,E)&&E!="constructor"&&m.push(E);return m}function fh(d){if(!eo(d))return function(G){var J=[];if(G!=null)for(var de in M(G))J.push(de);return J}(d);var m=Su(d),E=[];for(var D in d)(D!="constructor"||!m&&ln.call(d,D))&&E.push(D);return E}function bl(d,m){return d<m}function _a(d,m){var E=-1,D=sa(d)?fn(d.length):[];return yo(d,function(G,J,de){D[++E]=m(G,J,de)}),D}function rp(d){var m=Zc(d);return m.length==1&&m[0][2]?Gs(m[0][0],m[0][1]):function(E){return E===d||ka(E,d,m)}}function op(d,m){return ql(d)&&xl(m)?Gs(nl(d),m):function(E){var D=Wt(E,d);return D===v&&D===m?wt(E,d):Ds(m,D,3)}}function Qf(d,m,E,D,G){d!==m&&Er(m,function(J,de){if(G||(G=new ga),eo(J))(function(Fe,pt,gt,Gt,An,On,Yn){var Pt=Dt(Fe,gt),Qt=Dt(pt,gt),dr=Yn.get(Qt);if(dr)return void Vl(Fe,gt,dr);var gn=On?On(Pt,Qt,gt+"",Fe,pt,Yn):v,ar=gn===v;if(ar){var or=mr(Qt),jr=!or&&Ia(Qt),Un=!or&&!jr&&Qe(Qt);gn=Qt,or||jr||Un?mr(Pt)?gn=Pt:ti(Pt)?gn=pi(Pt):jr?(ar=!1,gn=fp(Qt,!0)):Un?(ar=!1,gn=po(Qt,!0)):gn=[]:F(Qt)||Pu(Qt)?(gn=Pt,Pu(Pt)?gn=kt(Pt):eo(Pt)&&!Tl(Pt)||(gn=xu(Qt))):ar=!1}ar&&(Yn.set(Qt,gn),An(gn,Qt,Gt,On,Yn),Yn.delete(Qt)),Vl(Fe,gt,gn)})(d,m,de,E,Qf,D,G);else{var _e=D?D(Dt(d,de),J,de+"",d,m,G):v;_e===v&&(_e=J),Vl(d,de,_e)}},Tt)}function dh(d,m){var E=d.length;if(E)return oo(m+=m<0?E:0,E)?d[m]:v}function ph(d,m,E){m=m.length?Lr(m,function(J){return mr(J)?function(de){return gl(de,J.length===1?J[0]:J)}:J}):[zn];var D=-1;m=Lr(m,co(Jn()));var G=_a(d,function(J,de,_e){var Fe=Lr(m,function(pt){return pt(J)});return{criteria:Fe,index:++D,value:J}});return function(J,de){var _e=J.length;for(J.sort(de);_e--;)J[_e]=J[_e].value;return J}(G,function(J,de){return function(_e,Fe,pt){for(var gt=-1,Gt=_e.criteria,An=Fe.criteria,On=Gt.length,Yn=pt.length;++gt<On;){var Pt=zc(Gt[gt],An[gt]);if(Pt)return gt>=Yn?Pt:Pt*(pt[gt]=="desc"?-1:1)}return _e.index-Fe.index}(J,de,E)})}function hh(d,m,E){for(var D=-1,G=m.length,J={};++D<G;){var de=m[D],_e=gl(d,de);E(_e,de)&&gu(J,_u(de,d),_e)}return J}function ip(d,m,E,D){var G=D?Ki:cu,J=-1,de=m.length,_e=d;for(d===m&&(m=pi(m)),E&&(_e=Lr(d,co(E)));++J<de;)for(var Fe=0,pt=m[J],gt=E?E(pt):pt;(Fe=G(_e,gt,Fe,D))>-1;)_e!==d&&Bl.call(_e,Fe,1),Bl.call(d,Fe,1);return d}function Cs(d,m){for(var E=d?m.length:0,D=E-1;E--;){var G=m[E];if(E==D||G!==J){var J=G;oo(G)?Bl.call(d,G,1):nd(d,G)}}return d}function ap(d,m){return d+Yu(Ps()*(m-d+1))}function Uc(d,m){var E="";if(!d||m<1||m>R)return E;do m%2&&(E+=d),(m=Yu(m/2))&&(d+=d);while(m);return E}function Or(d,m){return ef(Qc(d,m,zn),d+"")}function Hv(d){return Kf(gr(d))}function lp(d,m){var E=gr(d);return Sl(E,yu(m,0,E.length))}function gu(d,m,E,D){if(!eo(d))return d;for(var G=-1,J=(m=_u(m,d)).length,de=J-1,_e=d;_e!=null&&++G<J;){var Fe=nl(m[G]),pt=E;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return d;if(G!=de){var gt=_e[Fe];(pt=D?D(gt,Fe,_e):v)===v&&(pt=eo(gt)?gt:oo(m[G+1])?[]:{})}Lo(_e,Fe,pt),_e=_e[Fe]}return d}var Gc=Ic?function(d,m){return Ic.set(d,m),d}:zn,Xv=Xu?function(d,m){return Xu(d,"toString",{configurable:!0,enumerable:!1,value:Nr(m),writable:!0})}:zn;function Yv(d){return Sl(gr(d))}function Da(d,m,E){var D=-1,G=d.length;m<0&&(m=-m>G?0:G+m),(E=E>G?G:E)<0&&(E+=G),G=m>E?0:E-m>>>0,m>>>=0;for(var J=fn(G);++D<G;)J[D]=d[D+m];return J}function up(d,m){var E;return yo(d,function(D,G,J){return!(E=m(D,G,J))}),!!E}function ed(d,m,E){var D=0,G=d==null?D:d.length;if(typeof m=="number"&&m==m&&G<=2147483647){for(;D<G;){var J=D+G>>>1,de=d[J];de!==null&&!dt(de)&&(E?de<=m:de<m)?D=J+1:G=J}return G}return td(d,m,zn,E)}function td(d,m,E,D){var G=0,J=d==null?0:d.length;if(J===0)return 0;for(var de=(m=E(m))!=m,_e=m===null,Fe=dt(m),pt=m===v;G<J;){var gt=Yu((G+J)/2),Gt=E(d[gt]),An=Gt!==v,On=Gt===null,Yn=Gt==Gt,Pt=dt(Gt);if(de)var Qt=D||Yn;else Qt=pt?Yn&&(D||An):_e?Yn&&An&&(D||!On):Fe?Yn&&An&&!On&&(D||!Pt):!On&&!Pt&&(D?Gt<=m:Gt<m);Qt?G=gt+1:J=gt}return Ui(J,4294967294)}function vh(d,m){for(var E=-1,D=d.length,G=0,J=[];++E<D;){var de=d[E],_e=m?m(de):de;if(!E||!ua(_e,Fe)){var Fe=_e;J[G++]=de===0?0:de}}return J}function sp(d){return typeof d=="number"?d:dt(d)?$:+d}function aa(d){if(typeof d=="string")return d;if(mr(d))return Lr(d,aa)+"";if(dt(d))return uh?uh.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function bu(d,m,E){var D=-1,G=Ni,J=d.length,de=!0,_e=[],Fe=_e;if(E)de=!1,G=Mc;else if(J>=200){var pt=m?null:cd(d);if(pt)return ma(pt);de=!1,G=Wa,Fe=new Gl}else Fe=m?[]:_e;e:for(;++D<J;){var gt=d[D],Gt=m?m(gt):gt;if(gt=E||gt!==0?gt:0,de&&Gt==Gt){for(var An=Fe.length;An--;)if(Fe[An]===Gt)continue e;m&&Fe.push(Gt),_e.push(gt)}else G(Fe,Gt,E)||(Fe!==_e&&Fe.push(Gt),_e.push(gt))}return _e}function nd(d,m){return(d=Au(d,m=_u(m,d)))==null||delete d[nl(Vi(m))]}function Ju(d,m,E,D){return gu(d,m,E(gl(d,m)),D)}function Vc(d,m,E,D){for(var G=d.length,J=D?G:-1;(D?J--:++J<G)&&m(d[J],J,d););return E?Da(d,D?0:J,D?J+1:G):Da(d,D?J+1:0,D?G:J)}function yh(d,m){var E=d;return E instanceof Pr&&(E=E.value()),As(m,function(D,G){return G.func.apply(G.thisArg,ai([D],G.args))},E)}function Wc(d,m,E){var D=d.length;if(D<2)return D?bu(d[0]):[];for(var G=-1,J=fn(D);++G<D;)for(var de=d[G],_e=-1;++_e<D;)_e!=G&&(J[G]=Za(J[G]||de,d[_e],m,E));return bu(Jo(J,1),m,E)}function rd(d,m,E){for(var D=-1,G=d.length,J=m.length,de={};++D<G;){var _e=D<J?m[D]:v;E(de,d[D],_e)}return de}function od(d){return ti(d)?d:[]}function id(d){return typeof d=="function"?d:zn}function _u(d,m){return mr(d)?d:ql(d,m)?[d]:gp(_t(d))}var mh=Or;function wu(d,m,E){var D=d.length;return E=E===v?D:E,!m&&E>=D?d:Da(d,m,E)}var cp=oh||function(d){return jo.clearTimeout(d)};function fp(d,m){if(m)return d.slice();var E=d.length,D=du?du(E):new d.constructor(E);return d.copy(D),D}function Qu(d){var m=new d.constructor(d.byteLength);return new $l(m).set(new $l(d)),m}function po(d,m){var E=m?Qu(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.length)}function zc(d,m){if(d!==m){var E=d!==v,D=d===null,G=d==d,J=dt(d),de=m!==v,_e=m===null,Fe=m==m,pt=dt(m);if(!_e&&!pt&&!J&&d>m||J&&de&&Fe&&!_e&&!pt||D&&de&&Fe||!E&&Fe||!G)return 1;if(!D&&!J&&!pt&&d<m||pt&&E&&G&&!D&&!J||_e&&E&&G||!de&&G||!Fe)return-1}return 0}function wo(d,m,E,D){for(var G=-1,J=d.length,de=E.length,_e=-1,Fe=m.length,pt=Io(J-de,0),gt=fn(Fe+pt),Gt=!D;++_e<Fe;)gt[_e]=m[_e];for(;++G<de;)(Gt||G<J)&&(gt[E[G]]=d[G]);for(;pt--;)gt[_e++]=d[G++];return gt}function Hl(d,m,E,D){for(var G=-1,J=d.length,de=-1,_e=E.length,Fe=-1,pt=m.length,gt=Io(J-_e,0),Gt=fn(gt+pt),An=!D;++G<gt;)Gt[G]=d[G];for(var On=G;++Fe<pt;)Gt[On+Fe]=m[Fe];for(;++de<_e;)(An||G<J)&&(Gt[On+E[de]]=d[G++]);return Gt}function pi(d,m){var E=-1,D=d.length;for(m||(m=fn(D));++E<D;)m[E]=d[E];return m}function _l(d,m,E,D){var G=!E;E||(E={});for(var J=-1,de=m.length;++J<de;){var _e=m[J],Fe=D?D(E[_e],d[_e],_e,E,d):v;Fe===v&&(Fe=d[_e]),G?Ka(E,_e,Fe):Lo(E,_e,Fe)}return E}function Xl(d,m){return function(E,D){var G=mr(E)?Uf:Zd,J=m?m():{};return G(E,d,Jn(D,2),J)}}function Eu(d){return Or(function(m,E){var D=-1,G=E.length,J=G>1?E[G-1]:v,de=G>2?E[2]:v;for(J=d.length>3&&typeof J=="function"?(G--,J):v,de&&$o(E[0],E[1],de)&&(J=G<3?v:J,G=1),m=M(m);++D<G;){var _e=E[D];_e&&d(m,_e,D,J)}return m})}function es(d,m){return function(E,D){if(E==null)return E;if(!sa(E))return d(E,D);for(var G=E.length,J=m?G:-1,de=M(E);(m?J--:++J<G)&&D(de[J],J,de)!==!1;);return E}}function ad(d){return function(m,E,D){for(var G=-1,J=M(m),de=D(m),_e=de.length;_e--;){var Fe=de[d?_e:++G];if(E(J[Fe],Fe,J)===!1)break}return m}}function ld(d){return function(m){var E=za(m=_t(m))?Zi(m):v,D=E?E[0]:m.charAt(0),G=E?wu(E,1).join(""):m.slice(1);return D[d]()+G}}function wl(d){return function(m){return As(Oo(cr(m).replace(If,"")),d,"")}}function ts(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=Zu(d.prototype),D=d.apply(E,m);return eo(D)?D:E}}function ud(d){return function(m,E,D){var G=M(m);if(!sa(m)){var J=Jn(E,3);m=Lt(m),E=function(_e){return J(G[_e],_e,G)}}var de=d(m,E,D);return de>-1?G[J?m[de]:de]:v}}function Hc(d){return Ol(function(m){var E=m.length,D=E,G=Na.prototype.thru;for(d&&m.reverse();D--;){var J=m[D];if(typeof J!="function")throw new me(g);if(G&&!de&&Ls(J)=="wrapper")var de=new Na([],!0)}for(D=de?D:E;++D<E;){var _e=Ls(J=m[D]),Fe=_e=="wrapper"?hd(J):v;de=Fe&&el(Fe[0])&&Fe[1]==424&&!Fe[4].length&&Fe[9]==1?de[Ls(Fe[0])].apply(de,Fe[3]):J.length==1&&el(J)?de[_e]():de.thru(J)}return function(){var pt=arguments,gt=pt[0];if(de&&pt.length==1&&mr(gt))return de.plant(gt).value();for(var Gt=0,An=E?m[Gt].apply(this,pt):gt;++Gt<E;)An=m[Gt].call(this,An);return An}})}function Ou(d,m,E,D,G,J,de,_e,Fe,pt){var gt=m&A,Gt=1&m,An=2&m,On=24&m,Yn=512&m,Pt=An?v:ts(d);return function Qt(){for(var dr=arguments.length,gn=fn(dr),ar=dr;ar--;)gn[ar]=arguments[ar];if(On)var or=Yl(Qt),jr=Yd(gn,or);if(D&&(gn=wo(gn,D,G,On)),J&&(gn=Hl(gn,J,de,On)),dr-=jr,On&&dr<pt){var Un=ra(gn,or);return Yc(d,m,Ou,Qt.placeholder,E,gn,Un,_e,Fe,pt-dr)}var er=Gt?E:this,zo=An?er[d]:d;return dr=gn.length,_e?gn=Vs(gn,_e):Yn&&dr>1&&gn.reverse(),gt&&Fe<dr&&(gn.length=Fe),this&&this!==jo&&this instanceof Qt&&(zo=Pt||ts(zo)),zo.apply(er,gn)}}function dp(d,m){return function(E,D){return function(G,J,de,_e){return kn(G,function(Fe,pt,gt){J(_e,de(Fe),pt,gt)}),_e}(E,d,m(D),{})}}function js(d,m){return function(E,D){var G;if(E===v&&D===v)return m;if(E!==v&&(G=E),D!==v){if(G===v)return D;typeof E=="string"||typeof D=="string"?(E=aa(E),D=aa(D)):(E=sp(E),D=sp(D)),G=d(E,D)}return G}}function sd(d){return Ol(function(m){return m=Lr(m,co(Jn())),Or(function(E){var D=this;return d(m,function(G){return ro(G,D,E)})})})}function Xc(d,m){var E=(m=m===v?" ":aa(m)).length;if(E<2)return E?Uc(m,d):m;var D=Uc(m,Dc(d/Bi(m)));return za(m)?wu(Zi(D),0,d).join(""):D.slice(0,d)}function El(d){return function(m,E,D){return D&&typeof D!="number"&&$o(m,E,D)&&(E=D=v),m=Ct(m),E===v?(E=m,m=0):E=Ct(E),function(G,J,de,_e){for(var Fe=-1,pt=Io(Dc((J-G)/(de||1)),0),gt=fn(pt);pt--;)gt[_e?pt:++Fe]=G,G+=de;return gt}(m,E,D=D===v?m<E?1:-1:Ct(D),d)}}function Is(d){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ut(m),E=Ut(E)),d(m,E)}}function Yc(d,m,E,D,G,J,de,_e,Fe,pt){var gt=8&m;m|=gt?S:P,4&(m&=~(gt?P:S))||(m&=-4);var Gt=[d,m,G,gt?J:v,gt?de:v,gt?v:J,gt?v:de,_e,Fe,pt],An=E.apply(v,Gt);return el(d)&&yp(An,Gt),An.placeholder=D,vd(An,d,m)}function qc(d){var m=T[d];return function(E,D){if(E=Ut(E),(D=D==null?0:Ui(ct(D),292))&&qu(E)){var G=(_t(E)+"e").split("e");return+((G=(_t(m(G[0]+"e"+(+G[1]+D)))+"e").split("e"))[0]+"e"+(+G[1]-D))}return m(E)}}var cd=Ku&&1/ma(new Ku([,-0]))[1]==j?function(d){return new Ku(d)}:rt;function fd(d){return function(m){var E=Ao(m);return E==ce?Ko(m):E==Pe?Ms(m):function(D,G){return Lr(G,function(J){return[J,D[J]]})}(m,d(m))}}function Ja(d,m,E,D,G,J,de,_e){var Fe=2&m;if(!Fe&&typeof d!="function")throw new me(g);var pt=D?D.length:0;if(pt||(m&=-97,D=G=v),de=de===v?de:Io(ct(de),0),_e=_e===v?_e:ct(_e),pt-=G?G.length:0,m&P){var gt=D,Gt=G;D=G=v}var An=Fe?v:hd(d),On=[d,m,E,D,G,gt,Gt,J,de,_e];if(An&&function(Pt,Qt){var dr=Pt[1],gn=Qt[1],ar=dr|gn,or=ar<131,jr=gn==A&&dr==8||gn==A&&dr==k&&Pt[7].length<=Qt[8]||gn==384&&Qt[7].length<=Qt[8]&&dr==8;if(!or&&!jr)return Pt;1&gn&&(Pt[2]=Qt[2],ar|=1&dr?0:4);var Un=Qt[3];if(Un){var er=Pt[3];Pt[3]=er?wo(er,Un,Qt[4]):Un,Pt[4]=er?ra(Pt[3],w):Qt[4]}(Un=Qt[5])&&(er=Pt[5],Pt[5]=er?Hl(er,Un,Qt[6]):Un,Pt[6]=er?ra(Pt[5],w):Qt[6]),(Un=Qt[7])&&(Pt[7]=Un),gn&A&&(Pt[8]=Pt[8]==null?Qt[8]:Ui(Pt[8],Qt[8])),Pt[9]==null&&(Pt[9]=Qt[9]),Pt[0]=Qt[0],Pt[1]=ar}(On,An),d=On[0],m=On[1],E=On[2],D=On[3],G=On[4],!(_e=On[9]=On[9]===v?Fe?0:d.length:Io(On[9]-pt,0))&&24&m&&(m&=-25),m&&m!=1)Yn=m==8||m==O?function(Pt,Qt,dr){var gn=ts(Pt);return function ar(){for(var or=arguments.length,jr=fn(or),Un=or,er=Yl(ar);Un--;)jr[Un]=arguments[Un];var zo=or<3&&jr[0]!==er&&jr[or-1]!==er?[]:ra(jr,er);return(or-=zo.length)<dr?Yc(Pt,Qt,Ou,ar.placeholder,v,jr,zo,v,v,dr-or):ro(this&&this!==jo&&this instanceof ar?gn:Pt,this,jr)}}(d,m,_e):m!=S&&m!=33||G.length?Ou.apply(v,On):function(Pt,Qt,dr,gn){var ar=1&Qt,or=ts(Pt);return function jr(){for(var Un=-1,er=arguments.length,zo=-1,ot=gn.length,eu=fn(ot+er),wi=this&&this!==jo&&this instanceof jr?or:Pt;++zo<ot;)eu[zo]=gn[zo];for(;er--;)eu[zo++]=arguments[++Un];return ro(wi,ar?dr:this,eu)}}(d,m,E,D);else var Yn=function(Pt,Qt,dr){var gn=1&Qt,ar=ts(Pt);return function or(){return(this&&this!==jo&&this instanceof or?ar:Pt).apply(gn?dr:this,arguments)}}(d,m,E);return vd((An?Gc:yp)(Yn,On),d,m)}function pp(d,m,E,D){return d===v||ua(d,Ht[E])&&!ln.call(D,E)?m:d}function hp(d,m,E,D,G,J){return eo(d)&&eo(m)&&(J.set(m,d),Qf(d,m,v,hp,J),J.delete(m)),d}function vp(d){return F(d)?v:d}function dd(d,m,E,D,G,J){var de=1&E,_e=d.length,Fe=m.length;if(_e!=Fe&&!(de&&Fe>_e))return!1;var pt=J.get(d),gt=J.get(m);if(pt&&gt)return pt==m&&gt==d;var Gt=-1,An=!0,On=2&E?new Gl:v;for(J.set(d,m),J.set(m,d);++Gt<_e;){var Yn=d[Gt],Pt=m[Gt];if(D)var Qt=de?D(Pt,Yn,Gt,m,d,J):D(Yn,Pt,Gt,d,m,J);if(Qt!==v){if(Qt)continue;An=!1;break}if(On){if(!Pc(m,function(dr,gn){if(!Wa(On,gn)&&(Yn===dr||G(Yn,dr,E,D,J)))return On.push(gn)})){An=!1;break}}else if(Yn!==Pt&&!G(Yn,Pt,E,D,J)){An=!1;break}}return J.delete(d),J.delete(m),An}function Ol(d){return ef(Qc(d,v,wp),d+"")}function Kc(d){return Zf(d,Lt,$s)}function pd(d){return Zf(d,Tt,Bs)}var hd=Ic?function(d){return Ic.get(d)}:rt;function Ls(d){for(var m=d.name+"",E=vu[m],D=ln.call(vu,m)?E.length:0;D--;){var G=E[D],J=G.func;if(J==null||J==d)return G.name}return m}function Yl(d){return(ln.call(oe,"placeholder")?oe:d).placeholder}function Jn(){var d=oe.iteratee||uo;return d=d===uo?zl:d,arguments.length?d(arguments[0],arguments[1]):d}function Fs(d,m){var E,D,G=d.__data__;return((D=typeof(E=m))=="string"||D=="number"||D=="symbol"||D=="boolean"?E!=="__proto__":E===null)?G[typeof m=="string"?"string":"hash"]:G.map}function Zc(d){for(var m=Lt(d),E=m.length;E--;){var D=m[E],G=d[D];m[E]=[D,G,xl(G)]}return m}function Qa(d,m){var E=function(D,G){return D==null?v:D[G]}(d,m);return mu(E)?E:v}var $s=Wf?function(d){return d==null?[]:(d=M(d),Li(Wf(d),function(m){return Zo.call(d,m)}))}:Ge,Bs=Wf?function(d){for(var m=[];d;)ai(m,$s(d)),d=Ha(d);return m}:Ge,Ao=_o;function Us(d,m,E){for(var D=-1,G=(m=_u(m,d)).length,J=!1;++D<G;){var de=nl(m[D]);if(!(J=d!=null&&E(d,de)))break;d=d[de]}return J||++D!=G?J:!!(G=d==null?0:d.length)&&Jl(G)&&oo(de,G)&&(mr(d)||Pu(d))}function xu(d){return typeof d.constructor!="function"||Su(d)?{}:Zu(Ha(d))}function Jc(d){return mr(d)||Pu(d)||!!(yl&&d&&d[yl])}function oo(d,m){var E=typeof d;return!!(m=m??R)&&(E=="number"||E!="symbol"&&Sn.test(d))&&d>-1&&d%1==0&&d<m}function $o(d,m,E){if(!eo(E))return!1;var D=typeof m;return!!(D=="number"?sa(E)&&oo(m,E.length):D=="string"&&m in E)&&ua(E[m],d)}function ql(d,m){if(mr(d))return!1;var E=typeof d;return!(E!="number"&&E!="symbol"&&E!="boolean"&&d!=null&&!dt(d))||$n.test(d)||!ne.test(d)||m!=null&&d in M(m)}function el(d){var m=Ls(d),E=oe[m];if(typeof E!="function"||!(m in Pr.prototype))return!1;if(d===E)return!0;var D=hd(E);return!!D&&d===D[0]}(Ns&&Ao(new Ns(new ArrayBuffer(1)))!=je||ml&&Ao(new ml)!=ce||jc&&Ao(jc.resolve())!=ze||Ku&&Ao(new Ku)!=Pe||hu&&Ao(new hu)!=Me)&&(Ao=function(d){var m=_o(d),E=m==Oe?d.constructor:v,D=E?Tu(E):"";if(D)switch(D){case Vv:return je;case Lc:return ce;case Wv:return ze;case zv:return Pe;case lh:return Me}return m});var tl=_n?Tl:Xe;function Su(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function xl(d){return d==d&&!eo(d)}function Gs(d,m){return function(E){return E!=null&&E[d]===m&&(m!==v||d in M(E))}}function Qc(d,m,E){return m=Io(m===v?d.length-1:m,0),function(){for(var D=arguments,G=-1,J=Io(D.length-m,0),de=fn(J);++G<J;)de[G]=D[m+G];G=-1;for(var _e=fn(m+1);++G<m;)_e[G]=D[G];return _e[m]=E(de),ro(d,this,_e)}}function Au(d,m){return m.length<2?d:gl(d,Da(m,0,-1))}function Vs(d,m){for(var E=d.length,D=Ui(m.length,E),G=pi(d);D--;){var J=m[D];d[D]=oo(J,E)?G[J]:v}return d}function Dt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var yp=mp(Gc),ns=qd||function(d,m){return jo.setTimeout(d,m)},ef=mp(Xv);function vd(d,m,E){var D=m+"";return ef(d,function(G,J){var de=J.length;if(!de)return G;var _e=de-1;return J[_e]=(de>1?"& ":"")+J[_e],J=J.join(de>2?", ":" "),G.replace(Ee,`{
/* [wrapped with `+J+`] */
`)}(D,function(G,J){return Ii(H,function(de){var _e="_."+de[0];J&de[1]&&!Ni(G,_e)&&G.push(_e)}),G.sort()}(function(G){var J=G.match(Ke);return J?J[1].split(De):[]}(D),E)))}function mp(d){var m=0,E=0;return function(){var D=Hf(),G=16-(D-E);if(E=D,G>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(v,arguments)}}function Sl(d,m){var E=-1,D=d.length,G=D-1;for(m=m===v?D:m;++E<m;){var J=ap(E,G),de=d[J];d[J]=d[E],d[E]=de}return d.length=m,d}var gp=function(d){var m=Mu(d,function(D){return E.size===500&&E.clear(),D}),E=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(xr,function(E,D,G,J){m.push(G?J.replace(qt,"$1"):D||E)}),m});function nl(d){if(typeof d=="string"||dt(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function Tu(d){if(d!=null){try{return yr.call(d)}catch{}try{return d+""}catch{}}return""}function yd(d){if(d instanceof Pr)return d.clone();var m=new Na(d.__wrapped__,d.__chain__);return m.__actions__=pi(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var gh=Or(function(d,m){return ti(d)?Za(d,Jo(m,1,ti,!0)):[]}),bh=Or(function(d,m){var E=Vi(m);return ti(E)&&(E=v),ti(d)?Za(d,Jo(m,1,ti,!0),Jn(E,2)):[]}),_h=Or(function(d,m){var E=Vi(m);return ti(E)&&(E=v),ti(d)?Za(d,Jo(m,1,ti,!0),v,E):[]});function bp(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var G=E==null?0:ct(E);return G<0&&(G=Io(D+G,0)),Fi(d,Jn(m,3),G)}function _p(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var G=D-1;return E!==v&&(G=ct(E),G=E<0?Io(D+G,0):Ui(G,D-1)),Fi(d,Jn(m,3),G,!0)}function wp(d){return d!=null&&d.length?Jo(d,1):[]}function Ep(d){return d&&d.length?d[0]:v}var wh=Or(function(d){var m=Lr(d,od);return m.length&&m[0]===d[0]?Bc(m):[]}),Eh=Or(function(d){var m=Vi(d),E=Lr(d,od);return m===Vi(E)?m=v:E.pop(),E.length&&E[0]===d[0]?Bc(E,Jn(m,2)):[]}),Oh=Or(function(d){var m=Vi(d),E=Lr(d,od);return(m=typeof m=="function"?m:v)&&E.pop(),E.length&&E[0]===d[0]?Bc(E,v,m):[]});function Vi(d){var m=d==null?0:d.length;return m?d[m-1]:v}var rs=Or(tf);function tf(d,m){return d&&d.length&&m&&m.length?ip(d,m):d}var la=Ol(function(d,m){var E=d==null?0:d.length,D=Fc(d,m);return Cs(d,Lr(m,function(G){return oo(G,E)?+G:G}).sort(zc)),D});function Ca(d){return d==null?d:Gv.call(d)}var md=Or(function(d){return bu(Jo(d,1,ti,!0))}),Wi=Or(function(d){var m=Vi(d);return ti(m)&&(m=v),bu(Jo(d,1,ti,!0),Jn(m,2))}),nf=Or(function(d){var m=Vi(d);return m=typeof m=="function"?m:v,bu(Jo(d,1,ti,!0),v,m)});function os(d){if(!d||!d.length)return[];var m=0;return d=Li(d,function(E){if(ti(E))return m=Io(E.length,m),!0}),Ll(m,function(E){return Lr(d,$i(E))})}function Ws(d,m){if(!d||!d.length)return[];var E=os(d);return m==null?E:Lr(E,function(D){return ro(m,v,D)})}var rf=Or(function(d,m){return ti(d)?Za(d,m):[]}),of=Or(function(d){return Wc(Li(d,ti))}),zs=Or(function(d){var m=Vi(d);return ti(m)&&(m=v),Wc(Li(d,ti),Jn(m,2))}),Hs=Or(function(d){var m=Vi(d);return m=typeof m=="function"?m:v,Wc(Li(d,ti),v,m)}),is=Or(os),Kl=Or(function(d){var m=d.length,E=m>1?d[m-1]:v;return E=typeof E=="function"?(d.pop(),E):v,Ws(d,E)});function Qo(d){var m=oe(d);return m.__chain__=!0,m}function af(d,m){return m(d)}var lf=Ol(function(d){var m=d.length,E=m?d[0]:0,D=this.__wrapped__,G=function(J){return Fc(J,d)};return!(m>1||this.__actions__.length)&&D instanceof Pr&&oo(E)?((D=D.slice(E,+E+(m?1:0))).__actions__.push({func:af,args:[G],thisArg:v}),new Na(D,this.__chain__).thru(function(J){return m&&!J.length&&J.push(v),J})):this.thru(G)}),Zl=Xl(function(d,m,E){ln.call(d,E)?++d[E]:Ka(d,E,1)}),Op=ud(bp),zi=ud(_p);function ei(d,m){return(mr(d)?Ii:yo)(d,Jn(m,3))}function xh(d,m){return(mr(d)?Tc:ch)(d,Jn(m,3))}var ja=Xl(function(d,m,E){ln.call(d,E)?d[E].push(m):Ka(d,E,[m])}),Fn=Or(function(d,m,E){var D=-1,G=typeof m=="function",J=sa(d)?fn(d.length):[];return yo(d,function(de){J[++D]=G?ro(m,de,E):Gi(de,m,E)}),J}),gd=Xl(function(d,m,E){Ka(d,E,m)});function as(d,m){return(mr(d)?Lr:_a)(d,Jn(m,3))}var bd=Xl(function(d,m,E){d[E?0:1].push(m)},function(){return[[],[]]}),Sh=Or(function(d,m){if(d==null)return[];var E=m.length;return E>1&&$o(d,m[0],m[1])?m=[]:E>2&&$o(m[0],m[1],m[2])&&(m=[m[0]]),ph(d,Jo(m,1),[])}),Xs=ih||function(){return jo.Date.now()};function Ah(d,m,E){return m=E?v:m,m=d&&m==null?d.length:m,Ja(d,A,v,v,v,v,m)}function rl(d,m){var E;if(typeof m!="function")throw new me(g);return d=ct(d),function(){return--d>0&&(E=m.apply(this,arguments)),d<=1&&(m=v),E}}var Ys=Or(function(d,m,E){var D=1;if(E.length){var G=ra(E,Yl(Ys));D|=S}return Ja(d,D,m,E,G)}),ls=Or(function(d,m,E){var D=3;if(E.length){var G=ra(E,Yl(ls));D|=S}return Ja(m,D,d,E,G)});function ol(d,m,E){var D,G,J,de,_e,Fe,pt=0,gt=!1,Gt=!1,An=!0;if(typeof d!="function")throw new me(g);function On(ar){var or=D,jr=G;return D=G=v,pt=ar,de=d.apply(jr,or)}function Yn(ar){return pt=ar,_e=ns(Qt,m),gt?On(ar):de}function Pt(ar){var or=ar-Fe;return Fe===v||or>=m||or<0||Gt&&ar-pt>=J}function Qt(){var ar=Xs();if(Pt(ar))return dr(ar);_e=ns(Qt,function(or){var jr=m-(or-Fe);return Gt?Ui(jr,J-(or-pt)):jr}(ar))}function dr(ar){return _e=v,An&&D?On(ar):(D=G=v,de)}function gn(){var ar=Xs(),or=Pt(ar);if(D=arguments,G=this,Fe=ar,or){if(_e===v)return Yn(Fe);if(Gt)return cp(_e),_e=ns(Qt,m),On(Fe)}return _e===v&&(_e=ns(Qt,m)),de}return m=Ut(m)||0,eo(E)&&(gt=!!E.leading,J=(Gt="maxWait"in E)?Io(Ut(E.maxWait)||0,m):J,An="trailing"in E?!!E.trailing:An),gn.cancel=function(){_e!==v&&cp(_e),pt=0,D=Fe=G=_e=v},gn.flush=function(){return _e===v?de:dr(Xs())},gn}var Th=Or(function(d,m){return Qd(d,1,m)}),xp=Or(function(d,m,E){return Qd(d,Ut(m)||0,E)});function Mu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new me(g);var E=function(){var D=arguments,G=m?m.apply(this,D):D[0],J=E.cache;if(J.has(G))return J.get(G);var de=d.apply(this,D);return E.cache=J.set(G,de)||J,de};return E.cache=new(Mu.Cache||qa),E}function Al(d){if(typeof d!="function")throw new me(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}Mu.Cache=qa;var Hi=mh(function(d,m){var E=(m=m.length==1&&mr(m[0])?Lr(m[0],co(Jn())):Lr(Jo(m,1),co(Jn()))).length;return Or(function(D){for(var G=-1,J=Ui(D.length,E);++G<J;)D[G]=m[G].call(this,D[G]);return ro(d,this,D)})}),Gn=Or(function(d,m){var E=ra(m,Yl(Gn));return Ja(d,S,v,m,E)}),To=Or(function(d,m){var E=ra(m,Yl(To));return Ja(d,P,v,m,E)}),Di=Ol(function(d,m){return Ja(d,k,v,v,v,m)});function ua(d,m){return d===m||d!=d&&m!=m}var qv=Is(So),Mh=Is(function(d,m){return d>=m}),Pu=Jf(function(){return arguments}())?Jf:function(d){return Mo(d)&&ln.call(d,"callee")&&!Zo.call(d,"callee")},mr=fn.isArray,Ph=Sc?co(Sc):function(d){return Mo(d)&&_o(d)==We};function sa(d){return d!=null&&Jl(d.length)&&!Tl(d)}function ti(d){return Mo(d)&&sa(d)}var Ia=ah||Xe,Kv=Bf?co(Bf):function(d){return Mo(d)&&_o(d)==I};function uf(d){if(!Mo(d))return!1;var m=_o(d);return m==z||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!F(d)}function Tl(d){if(!eo(d))return!1;var m=_o(d);return m==K||m==q||m=="[object AsyncFunction]"||m=="[object Proxy]"}function Sp(d){return typeof d=="number"&&d==ct(d)}function Jl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=R}function eo(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function Mo(d){return d!=null&&typeof d=="object"}var _i=Ac?co(Ac):function(d){return Mo(d)&&Ao(d)==ce};function sf(d){return typeof d=="number"||Mo(d)&&_o(d)==ke}function F(d){if(!Mo(d)||_o(d)!=Oe)return!1;var m=Ha(d);if(m===null)return!0;var E=ln.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&yr.call(E)==ia}var ie=ji?co(ji):function(d){return Mo(d)&&_o(d)==Ie},be=ii?co(ii):function(d){return Mo(d)&&Ao(d)==Pe};function nt(d){return typeof d=="string"||!mr(d)&&Mo(d)&&_o(d)==le}function dt(d){return typeof d=="symbol"||Mo(d)&&_o(d)==ye}var Qe=na?co(na):function(d){return Mo(d)&&Jl(d.length)&&!!Wr[_o(d)]},st=Is(bl),Nt=Is(function(d,m){return d<=m});function It(d){if(!d)return[];if(sa(d))return nt(d)?Zi(d):pi(d);if(Xa&&d[Xa])return function(E){for(var D,G=[];!(D=E.next()).done;)G.push(D.value);return G}(d[Xa]());var m=Ao(d);return(m==ce?Ko:m==Pe?ma:gr)(d)}function Ct(d){return d?(d=Ut(d))===j||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function ct(d){var m=Ct(d),E=m%1;return m==m?E?m-E:m:0}function Vt(d){return d?yu(ct(d),0,V):0}function Ut(d){if(typeof d=="number")return d;if(dt(d))return $;if(eo(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=eo(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=Pa(d);var E=mi.test(d);return E||qo.test(d)?ha(d.slice(2),E?2:8):oi.test(d)?$:+d}function kt(d){return _l(d,Tt(d))}function _t(d){return d==null?"":aa(d)}var He=Eu(function(d,m){if(Su(m)||sa(m))_l(m,Lt(m),d);else for(var E in m)ln.call(m,E)&&Lo(d,E,m[E])}),lt=Eu(function(d,m){_l(m,Tt(m),d)}),Ft=Eu(function(d,m,E,D){_l(m,Tt(m),d,D)}),Kt=Eu(function(d,m,E,D){_l(m,Lt(m),d,D)}),xt=Ol(Fc),Jt=Or(function(d,m){d=M(d);var E=-1,D=m.length,G=D>2?m[2]:v;for(G&&$o(m[0],m[1],G)&&(D=1);++E<D;)for(var J=m[E],de=Tt(J),_e=-1,Fe=de.length;++_e<Fe;){var pt=de[_e],gt=d[pt];(gt===v||ua(gt,Ht[pt])&&!ln.call(d,pt))&&(d[pt]=J[pt])}return d}),At=Or(function(d){return d.push(v,hp),ro(Cn,v,d)});function Wt(d,m,E){var D=d==null?v:gl(d,m);return D===v?E:D}function wt(d,m){return d!=null&&Us(d,m,np)}var Xt=dp(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),d[m]=E},Nr(zn)),Mn=dp(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),ln.call(d,m)?d[m].push(E):d[m]=[E]},Jn),Wn=Or(Gi);function Lt(d){return sa(d)?qf(d):Ra(d)}function Tt(d){return sa(d)?qf(d,!0):fh(d)}var Et=Eu(function(d,m,E){Qf(d,m,E)}),Cn=Eu(function(d,m,E,D){Qf(d,m,E,D)}),nr=Ol(function(d,m){var E={};if(d==null)return E;var D=!1;m=Lr(m,function(J){return J=_u(J,d),D||(D=J.length>1),J}),_l(d,pd(d),E),D&&(E=ba(E,7,vp));for(var G=m.length;G--;)nd(E,m[G]);return E}),un=Ol(function(d,m){return d==null?{}:function(E,D){return hh(E,D,function(G,J){return wt(E,J)})}(d,m)});function Qn(d,m){if(d==null)return{};var E=Lr(pd(d),function(D){return[D]});return m=Jn(m),hh(d,E,function(D,G){return m(D,G[0])})}var Vn=fd(Lt),rr=fd(Tt);function gr(d){return d==null?[]:Hu(d,Lt(d))}var Po=wl(function(d,m,E){return m=m.toLowerCase(),d+(E?Bo(m):m)});function Bo(d){return ni(_t(d).toLowerCase())}function cr(d){return(d=_t(d))&&d.replace(Bn,kc).replace(pl,"")}var Wo=wl(function(d,m,E){return d+(E?"-":"")+m.toLowerCase()}),to=wl(function(d,m,E){return d+(E?" ":"")+m.toLowerCase()}),No=ld("toLowerCase"),Uo=wl(function(d,m,E){return d+(E?"_":"")+m.toLowerCase()}),Eo=wl(function(d,m,E){return d+(E?" ":"")+ni(m)}),mo=wl(function(d,m,E){return d+(E?" ":"")+m.toUpperCase()}),ni=ld("toUpperCase");function Oo(d,m,E){return d=_t(d),(m=E?v:m)===v?function(D){return xc.test(D)}(d)?function(D){return D.match(Os)||[]}(d):function(D){return D.match(at)||[]}(d):d.match(m)||[]}var Zn=Or(function(d,m){try{return ro(d,v,m)}catch(E){return uf(E)?E:new Mr(E)}}),ui=Ol(function(d,m){return Ii(m,function(E){E=nl(E),Ka(d,E,Ys(d[E],d))}),d});function Nr(d){return function(){return d}}var Rn=Hc(),fr=Hc(!0);function zn(d){return d}function uo(d){return zl(typeof d=="function"?d:ba(d,1))}var La=Or(function(d,m){return function(E){return Gi(E,d,m)}}),Ql=Or(function(d,m){return function(E){return Gi(d,E,m)}});function ve(d,m,E){var D=Lt(m),G=$c(m,D);E!=null||eo(m)&&(G.length||!D.length)||(E=m,m=d,d=this,G=$c(m,Lt(m)));var J=!(eo(E)&&"chain"in E&&!E.chain),de=Tl(d);return Ii(G,function(_e){var Fe=m[_e];d[_e]=Fe,de&&(d.prototype[_e]=function(){var pt=this.__chain__;if(J||pt){var gt=d(this.__wrapped__),Gt=gt.__actions__=pi(this.__actions__);return Gt.push({func:Fe,args:arguments,thisArg:d}),gt.__chain__=pt,gt}return Fe.apply(d,ai([this.value()],arguments))})}),d}function rt(){}var Je=sd(Lr),tn=sd(Gf),hr=sd(Pc);function ue(d){return ql(d)?$i(nl(d)):function(m){return function(E){return gl(E,m)}}(d)}var ee=El(),Ae=El(!0);function Ge(){return[]}function Xe(){return!1}var Ne=js(function(d,m){return d+m},0),Te=qc("ceil"),Le=js(function(d,m){return d/m},1),fe=qc("floor"),we,se=js(function(d,m){return d*m},1),Be=qc("round"),Ze=js(function(d,m){return d-m},0);return oe.after=function(d,m){if(typeof m!="function")throw new me(g);return d=ct(d),function(){if(--d<1)return m.apply(this,arguments)}},oe.ary=Ah,oe.assign=He,oe.assignIn=lt,oe.assignInWith=Ft,oe.assignWith=Kt,oe.at=xt,oe.before=rl,oe.bind=Ys,oe.bindAll=ui,oe.bindKey=ls,oe.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return mr(d)?d:[d]},oe.chain=Qo,oe.chunk=function(d,m,E){m=(E?$o(d,m,E):m===v)?1:Io(ct(m),0);var D=d==null?0:d.length;if(!D||m<1)return[];for(var G=0,J=0,de=fn(Dc(D/m));G<D;)de[J++]=Da(d,G,G+=m);return de},oe.compact=function(d){for(var m=-1,E=d==null?0:d.length,D=0,G=[];++m<E;){var J=d[m];J&&(G[D++]=J)}return G},oe.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),E=arguments[0],D=d;D--;)m[D-1]=arguments[D];return ai(mr(E)?pi(E):[E],Jo(m,1))},oe.cond=function(d){var m=d==null?0:d.length,E=Jn();return d=m?Lr(d,function(D){if(typeof D[1]!="function")throw new me(g);return[E(D[0]),D[1]]}):[],Or(function(D){for(var G=-1;++G<m;){var J=d[G];if(ro(J[0],this,D))return ro(J[1],this,D)}})},oe.conforms=function(d){return function(m){var E=Lt(m);return function(D){return Jd(D,m,E)}}(ba(d,1))},oe.constant=Nr,oe.countBy=Zl,oe.create=function(d,m){var E=Zu(d);return m==null?E:Wl(E,m)},oe.curry=function d(m,E,D){var G=Ja(m,8,v,v,v,v,v,E=D?v:E);return G.placeholder=d.placeholder,G},oe.curryRight=function d(m,E,D){var G=Ja(m,O,v,v,v,v,v,E=D?v:E);return G.placeholder=d.placeholder,G},oe.debounce=ol,oe.defaults=Jt,oe.defaultsDeep=At,oe.defer=Th,oe.delay=xp,oe.difference=gh,oe.differenceBy=bh,oe.differenceWith=_h,oe.drop=function(d,m,E){var D=d==null?0:d.length;return D?Da(d,(m=E||m===v?1:ct(m))<0?0:m,D):[]},oe.dropRight=function(d,m,E){var D=d==null?0:d.length;return D?Da(d,0,(m=D-(m=E||m===v?1:ct(m)))<0?0:m):[]},oe.dropRightWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!0,!0):[]},oe.dropWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!0):[]},oe.fill=function(d,m,E,D){var G=d==null?0:d.length;return G?(E&&typeof E!="number"&&$o(d,m,E)&&(E=0,D=G),function(J,de,_e,Fe){var pt=J.length;for((_e=ct(_e))<0&&(_e=-_e>pt?0:pt+_e),(Fe=Fe===v||Fe>pt?pt:ct(Fe))<0&&(Fe+=pt),Fe=_e>Fe?0:Vt(Fe);_e<Fe;)J[_e++]=de;return J}(d,m,E,D)):[]},oe.filter=function(d,m){return(mr(d)?Li:zr)(d,Jn(m,3))},oe.flatMap=function(d,m){return Jo(as(d,m),1)},oe.flatMapDeep=function(d,m){return Jo(as(d,m),j)},oe.flatMapDepth=function(d,m,E){return E=E===v?1:ct(E),Jo(as(d,m),E)},oe.flatten=wp,oe.flattenDeep=function(d){return d!=null&&d.length?Jo(d,j):[]},oe.flattenDepth=function(d,m){return d!=null&&d.length?Jo(d,m=m===v?1:ct(m)):[]},oe.flip=function(d){return Ja(d,512)},oe.flow=Rn,oe.flowRight=fr,oe.fromPairs=function(d){for(var m=-1,E=d==null?0:d.length,D={};++m<E;){var G=d[m];D[G[0]]=G[1]}return D},oe.functions=function(d){return d==null?[]:$c(d,Lt(d))},oe.functionsIn=function(d){return d==null?[]:$c(d,Tt(d))},oe.groupBy=ja,oe.initial=function(d){return d!=null&&d.length?Da(d,0,-1):[]},oe.intersection=wh,oe.intersectionBy=Eh,oe.intersectionWith=Oh,oe.invert=Xt,oe.invertBy=Mn,oe.invokeMap=Fn,oe.iteratee=uo,oe.keyBy=gd,oe.keys=Lt,oe.keysIn=Tt,oe.map=as,oe.mapKeys=function(d,m){var E={};return m=Jn(m,3),kn(d,function(D,G,J){Ka(E,m(D,G,J),D)}),E},oe.mapValues=function(d,m){var E={};return m=Jn(m,3),kn(d,function(D,G,J){Ka(E,G,m(D,G,J))}),E},oe.matches=function(d){return rp(ba(d,1))},oe.matchesProperty=function(d,m){return op(d,ba(m,1))},oe.memoize=Mu,oe.merge=Et,oe.mergeWith=Cn,oe.method=La,oe.methodOf=Ql,oe.mixin=ve,oe.negate=Al,oe.nthArg=function(d){return d=ct(d),Or(function(m){return dh(m,d)})},oe.omit=nr,oe.omitBy=function(d,m){return Qn(d,Al(Jn(m)))},oe.once=function(d){return rl(2,d)},oe.orderBy=function(d,m,E,D){return d==null?[]:(mr(m)||(m=m==null?[]:[m]),mr(E=D?v:E)||(E=E==null?[]:[E]),ph(d,m,E))},oe.over=Je,oe.overArgs=Hi,oe.overEvery=tn,oe.overSome=hr,oe.partial=Gn,oe.partialRight=To,oe.partition=bd,oe.pick=un,oe.pickBy=Qn,oe.property=ue,oe.propertyOf=function(d){return function(m){return d==null?v:gl(d,m)}},oe.pull=rs,oe.pullAll=tf,oe.pullAllBy=function(d,m,E){return d&&d.length&&m&&m.length?ip(d,m,Jn(E,2)):d},oe.pullAllWith=function(d,m,E){return d&&d.length&&m&&m.length?ip(d,m,v,E):d},oe.pullAt=la,oe.range=ee,oe.rangeRight=Ae,oe.rearg=Di,oe.reject=function(d,m){return(mr(d)?Li:zr)(d,Al(Jn(m,3)))},oe.remove=function(d,m){var E=[];if(!d||!d.length)return E;var D=-1,G=[],J=d.length;for(m=Jn(m,3);++D<J;){var de=d[D];m(de,D,d)&&(E.push(de),G.push(D))}return Cs(d,G),E},oe.rest=function(d,m){if(typeof d!="function")throw new me(g);return Or(d,m=m===v?m:ct(m))},oe.reverse=Ca,oe.sampleSize=function(d,m,E){return m=(E?$o(d,m,E):m===v)?1:ct(m),(mr(d)?Kd:lp)(d,m)},oe.set=function(d,m,E){return d==null?d:gu(d,m,E)},oe.setWith=function(d,m,E,D){return D=typeof D=="function"?D:v,d==null?d:gu(d,m,E,D)},oe.shuffle=function(d){return(mr(d)?sh:Yv)(d)},oe.slice=function(d,m,E){var D=d==null?0:d.length;return D?(E&&typeof E!="number"&&$o(d,m,E)?(m=0,E=D):(m=m==null?0:ct(m),E=E===v?D:ct(E)),Da(d,m,E)):[]},oe.sortBy=Sh,oe.sortedUniq=function(d){return d&&d.length?vh(d):[]},oe.sortedUniqBy=function(d,m){return d&&d.length?vh(d,Jn(m,2)):[]},oe.split=function(d,m,E){return E&&typeof E!="number"&&$o(d,m,E)&&(m=E=v),(E=E===v?V:E>>>0)?(d=_t(d))&&(typeof m=="string"||m!=null&&!ie(m))&&!(m=aa(m))&&za(d)?wu(Zi(d),0,E):d.split(m,E):[]},oe.spread=function(d,m){if(typeof d!="function")throw new me(g);return m=m==null?0:Io(ct(m),0),Or(function(E){var D=E[m],G=wu(E,0,m);return D&&ai(G,D),ro(d,this,G)})},oe.tail=function(d){var m=d==null?0:d.length;return m?Da(d,1,m):[]},oe.take=function(d,m,E){return d&&d.length?Da(d,0,(m=E||m===v?1:ct(m))<0?0:m):[]},oe.takeRight=function(d,m,E){var D=d==null?0:d.length;return D?Da(d,(m=D-(m=E||m===v?1:ct(m)))<0?0:m,D):[]},oe.takeRightWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!1,!0):[]},oe.takeWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3)):[]},oe.tap=function(d,m){return m(d),d},oe.throttle=function(d,m,E){var D=!0,G=!0;if(typeof d!="function")throw new me(g);return eo(E)&&(D="leading"in E?!!E.leading:D,G="trailing"in E?!!E.trailing:G),ol(d,m,{leading:D,maxWait:m,trailing:G})},oe.thru=af,oe.toArray=It,oe.toPairs=Vn,oe.toPairsIn=rr,oe.toPath=function(d){return mr(d)?Lr(d,nl):dt(d)?[d]:pi(gp(_t(d)))},oe.toPlainObject=kt,oe.transform=function(d,m,E){var D=mr(d),G=D||Ia(d)||Qe(d);if(m=Jn(m,4),E==null){var J=d&&d.constructor;E=G?D?new J:[]:eo(d)&&Tl(J)?Zu(Ha(d)):{}}return(G?Ii:kn)(d,function(de,_e,Fe){return m(E,de,_e,Fe)}),E},oe.unary=function(d){return Ah(d,1)},oe.union=md,oe.unionBy=Wi,oe.unionWith=nf,oe.uniq=function(d){return d&&d.length?bu(d):[]},oe.uniqBy=function(d,m){return d&&d.length?bu(d,Jn(m,2)):[]},oe.uniqWith=function(d,m){return m=typeof m=="function"?m:v,d&&d.length?bu(d,v,m):[]},oe.unset=function(d,m){return d==null||nd(d,m)},oe.unzip=os,oe.unzipWith=Ws,oe.update=function(d,m,E){return d==null?d:Ju(d,m,id(E))},oe.updateWith=function(d,m,E,D){return D=typeof D=="function"?D:v,d==null?d:Ju(d,m,id(E),D)},oe.values=gr,oe.valuesIn=function(d){return d==null?[]:Hu(d,Tt(d))},oe.without=rf,oe.words=Oo,oe.wrap=function(d,m){return Gn(id(m),d)},oe.xor=of,oe.xorBy=zs,oe.xorWith=Hs,oe.zip=is,oe.zipObject=function(d,m){return rd(d||[],m||[],Lo)},oe.zipObjectDeep=function(d,m){return rd(d||[],m||[],gu)},oe.zipWith=Kl,oe.entries=Vn,oe.entriesIn=rr,oe.extend=lt,oe.extendWith=Ft,ve(oe,oe),oe.add=Ne,oe.attempt=Zn,oe.camelCase=Po,oe.capitalize=Bo,oe.ceil=Te,oe.clamp=function(d,m,E){return E===v&&(E=m,m=v),E!==v&&(E=(E=Ut(E))==E?E:0),m!==v&&(m=(m=Ut(m))==m?m:0),yu(Ut(d),m,E)},oe.clone=function(d){return ba(d,4)},oe.cloneDeep=function(d){return ba(d,5)},oe.cloneDeepWith=function(d,m){return ba(d,5,m=typeof m=="function"?m:v)},oe.cloneWith=function(d,m){return ba(d,4,m=typeof m=="function"?m:v)},oe.conformsTo=function(d,m){return m==null||Jd(d,m,Lt(m))},oe.deburr=cr,oe.defaultTo=function(d,m){return d==null||d!=d?m:d},oe.divide=Le,oe.endsWith=function(d,m,E){d=_t(d),m=aa(m);var D=d.length,G=E=E===v?D:yu(ct(E),0,D);return(E-=m.length)>=0&&d.slice(E,G)==m},oe.eq=ua,oe.escape=function(d){return(d=_t(d))&&xn.test(d)?d.replace(pn,Vo):d},oe.escapeRegExp=function(d){return(d=_t(d))&&no.test(d)?d.replace(Ur,"\\$&"):d},oe.every=function(d,m,E){var D=mr(d)?Gf:ep;return E&&$o(d,m,E)&&(m=v),D(d,Jn(m,3))},oe.find=Op,oe.findIndex=bp,oe.findKey=function(d,m){return Va(d,Jn(m,3),kn)},oe.findLast=zi,oe.findLastIndex=_p,oe.findLastKey=function(d,m){return Va(d,Jn(m,3),lo)},oe.floor=fe,oe.forEach=ei,oe.forEachRight=xh,oe.forIn=function(d,m){return d==null?d:Er(d,Jn(m,3),Tt)},oe.forInRight=function(d,m){return d==null?d:ao(d,Jn(m,3),Tt)},oe.forOwn=function(d,m){return d&&kn(d,Jn(m,3))},oe.forOwnRight=function(d,m){return d&&lo(d,Jn(m,3))},oe.get=Wt,oe.gt=qv,oe.gte=Mh,oe.has=function(d,m){return d!=null&&Us(d,m,tp)},oe.hasIn=wt,oe.head=Ep,oe.identity=zn,oe.includes=function(d,m,E,D){d=sa(d)?d:gr(d),E=E&&!D?ct(E):0;var G=d.length;return E<0&&(E=Io(G+E,0)),nt(d)?E<=G&&d.indexOf(m,E)>-1:!!G&&cu(d,m,E)>-1},oe.indexOf=function(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var G=E==null?0:ct(E);return G<0&&(G=Io(D+G,0)),cu(d,m,G)},oe.inRange=function(d,m,E){return m=Ct(m),E===v?(E=m,m=0):E=Ct(E),function(D,G,J){return D>=Ui(G,J)&&D<Io(G,J)}(d=Ut(d),m,E)},oe.invoke=Wn,oe.isArguments=Pu,oe.isArray=mr,oe.isArrayBuffer=Ph,oe.isArrayLike=sa,oe.isArrayLikeObject=ti,oe.isBoolean=function(d){return d===!0||d===!1||Mo(d)&&_o(d)==W},oe.isBuffer=Ia,oe.isDate=Kv,oe.isElement=function(d){return Mo(d)&&d.nodeType===1&&!F(d)},oe.isEmpty=function(d){if(d==null)return!0;if(sa(d)&&(mr(d)||typeof d=="string"||typeof d.splice=="function"||Ia(d)||Qe(d)||Pu(d)))return!d.length;var m=Ao(d);if(m==ce||m==Pe)return!d.size;if(Su(d))return!Ra(d).length;for(var E in d)if(ln.call(d,E))return!1;return!0},oe.isEqual=function(d,m){return Ds(d,m)},oe.isEqualWith=function(d,m,E){var D=(E=typeof E=="function"?E:v)?E(d,m):v;return D===v?Ds(d,m,v,E):!!D},oe.isError=uf,oe.isFinite=function(d){return typeof d=="number"&&qu(d)},oe.isFunction=Tl,oe.isInteger=Sp,oe.isLength=Jl,oe.isMap=_i,oe.isMatch=function(d,m){return d===m||ka(d,m,Zc(m))},oe.isMatchWith=function(d,m,E){return E=typeof E=="function"?E:v,ka(d,m,Zc(m),E)},oe.isNaN=function(d){return sf(d)&&d!=+d},oe.isNative=function(d){if(tl(d))throw new Mr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return mu(d)},oe.isNil=function(d){return d==null},oe.isNull=function(d){return d===null},oe.isNumber=sf,oe.isObject=eo,oe.isObjectLike=Mo,oe.isPlainObject=F,oe.isRegExp=ie,oe.isSafeInteger=function(d){return Sp(d)&&d>=-9007199254740991&&d<=R},oe.isSet=be,oe.isString=nt,oe.isSymbol=dt,oe.isTypedArray=Qe,oe.isUndefined=function(d){return d===v},oe.isWeakMap=function(d){return Mo(d)&&Ao(d)==Me},oe.isWeakSet=function(d){return Mo(d)&&_o(d)=="[object WeakSet]"},oe.join=function(d,m){return d==null?"":Cc.call(d,m)},oe.kebabCase=Wo,oe.last=Vi,oe.lastIndexOf=function(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var G=D;return E!==v&&(G=(G=ct(E))<0?Io(D+G,0):Ui(G,D-1)),m==m?function(J,de,_e){for(var Fe=_e+1;Fe--;)if(J[Fe]===de)return Fe;return Fe}(d,m,G):Fi(d,va,G,!0)},oe.lowerCase=to,oe.lowerFirst=No,oe.lt=st,oe.lte=Nt,oe.max=function(d){return d&&d.length?Fo(d,zn,So):v},oe.maxBy=function(d,m){return d&&d.length?Fo(d,Jn(m,2),So):v},oe.mean=function(d){return Tr(d,zn)},oe.meanBy=function(d,m){return Tr(d,Jn(m,2))},oe.min=function(d){return d&&d.length?Fo(d,zn,bl):v},oe.minBy=function(d,m){return d&&d.length?Fo(d,Jn(m,2),bl):v},oe.stubArray=Ge,oe.stubFalse=Xe,oe.stubObject=function(){return{}},oe.stubString=function(){return""},oe.stubTrue=function(){return!0},oe.multiply=se,oe.nth=function(d,m){return d&&d.length?dh(d,ct(m)):v},oe.noConflict=function(){return jo._===this&&(jo._=bo),this},oe.noop=rt,oe.now=Xs,oe.pad=function(d,m,E){d=_t(d);var D=(m=ct(m))?Bi(d):0;if(!m||D>=m)return d;var G=(m-D)/2;return Xc(Yu(G),E)+d+Xc(Dc(G),E)},oe.padEnd=function(d,m,E){d=_t(d);var D=(m=ct(m))?Bi(d):0;return m&&D<m?d+Xc(m-D,E):d},oe.padStart=function(d,m,E){d=_t(d);var D=(m=ct(m))?Bi(d):0;return m&&D<m?Xc(m-D,E)+d:d},oe.parseInt=function(d,m,E){return E||m==null?m=0:m&&(m=+m),Xf(_t(d).replace(jn,""),m||0)},oe.random=function(d,m,E){if(E&&typeof E!="boolean"&&$o(d,m,E)&&(m=E=v),E===v&&(typeof m=="boolean"?(E=m,m=v):typeof d=="boolean"&&(E=d,d=v)),d===v&&m===v?(d=0,m=1):(d=Ct(d),m===v?(m=d,d=0):m=Ct(m)),d>m){var D=d;d=m,m=D}if(E||d%1||m%1){var G=Ps();return Ui(d+G*(m-d+uu("1e-"+((G+"").length-1))),m)}return ap(d,m)},oe.reduce=function(d,m,E){var D=mr(d)?As:di,G=arguments.length<3;return D(d,Jn(m,4),E,G,yo)},oe.reduceRight=function(d,m,E){var D=mr(d)?Vf:di,G=arguments.length<3;return D(d,Jn(m,4),E,G,ch)},oe.repeat=function(d,m,E){return m=(E?$o(d,m,E):m===v)?1:ct(m),Uc(_t(d),m)},oe.replace=function(){var d=arguments,m=_t(d[0]);return d.length<3?m:m.replace(d[1],d[2])},oe.result=function(d,m,E){var D=-1,G=(m=_u(m,d)).length;for(G||(G=1,d=v);++D<G;){var J=d==null?v:d[nl(m[D])];J===v&&(D=G,J=E),d=Tl(J)?J.call(d):J}return d},oe.round=Be,oe.runInContext=ut,oe.sample=function(d){return(mr(d)?Kf:Hv)(d)},oe.size=function(d){if(d==null)return 0;if(sa(d))return nt(d)?Bi(d):d.length;var m=Ao(d);return m==ce||m==Pe?d.size:Ra(d).length},oe.snakeCase=Uo,oe.some=function(d,m,E){var D=mr(d)?Pc:up;return E&&$o(d,m,E)&&(m=v),D(d,Jn(m,3))},oe.sortedIndex=function(d,m){return ed(d,m)},oe.sortedIndexBy=function(d,m,E){return td(d,m,Jn(E,2))},oe.sortedIndexOf=function(d,m){var E=d==null?0:d.length;if(E){var D=ed(d,m);if(D<E&&ua(d[D],m))return D}return-1},oe.sortedLastIndex=function(d,m){return ed(d,m,!0)},oe.sortedLastIndexBy=function(d,m,E){return td(d,m,Jn(E,2),!0)},oe.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var E=ed(d,m,!0)-1;if(ua(d[E],m))return E}return-1},oe.startCase=Eo,oe.startsWith=function(d,m,E){return d=_t(d),E=E==null?0:yu(ct(E),0,d.length),m=aa(m),d.slice(E,E+m.length)==m},oe.subtract=Ze,oe.sum=function(d){return d&&d.length?fu(d,zn):0},oe.sumBy=function(d,m){return d&&d.length?fu(d,Jn(m,2)):0},oe.template=function(d,m,E){var D=oe.templateSettings;E&&$o(d,m,E)&&(m=v),d=_t(d),m=Ft({},m,D,pp);var G,J,de=Ft({},m.imports,D.imports,pp),_e=Lt(de),Fe=Hu(de,_e),pt=0,gt=m.interpolate||Xn,Gt="__p += '",An=U((m.escape||Xn).source+"|"+gt.source+"|"+(gt===Kn?Nn:Xn).source+"|"+(m.evaluate||Xn).source+"|$","g"),On="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lf+"]")+`
`;d.replace(An,function(Qt,dr,gn,ar,or,jr){return gn||(gn=ar),Gt+=d.slice(pt,jr).replace(ir,Fl),dr&&(G=!0,Gt+=`' +
__e(`+dr+`) +
'`),or&&(J=!0,Gt+=`';
`+or+`;
__p += '`),gn&&(Gt+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),pt=jr+Qt.length,Qt}),Gt+=`';
`;var Yn=ln.call(m,"variable")&&m.variable;if(Yn){if(en.test(Yn))throw new Mr("Invalid `variable` option passed into `_.template`")}else Gt=`with (obj) {
`+Gt+`
}
`;Gt=(J?Gt.replace(Ot,""):Gt).replace(rn,"$1").replace(yn,"$1;"),Gt="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var Pt=Zn(function(){return fo(_e,On+"return "+Gt).apply(v,Fe)});if(Pt.source=Gt,uf(Pt))throw Pt;return Pt},oe.times=function(d,m){if((d=ct(d))<1||d>R)return[];var E=V,D=Ui(d,V);m=Jn(m),d-=V;for(var G=Ll(D,m);++E<d;)m(E);return G},oe.toFinite=Ct,oe.toInteger=ct,oe.toLength=Vt,oe.toLower=function(d){return _t(d).toLowerCase()},oe.toNumber=Ut,oe.toSafeInteger=function(d){return d?yu(ct(d),-9007199254740991,R):d===0?d:0},oe.toString=_t,oe.toUpper=function(d){return _t(d).toUpperCase()},oe.trim=function(d,m,E){if((d=_t(d))&&(E||m===v))return Pa(d);if(!d||!(m=aa(m)))return d;var D=Zi(d),G=Zi(m);return wu(D,ya(D,G),Nc(D,G)+1).join("")},oe.trimEnd=function(d,m,E){if((d=_t(d))&&(E||m===v))return d.slice(0,li(d)+1);if(!d||!(m=aa(m)))return d;var D=Zi(d);return wu(D,0,Nc(D,Zi(m))+1).join("")},oe.trimStart=function(d,m,E){if((d=_t(d))&&(E||m===v))return d.replace(jn,"");if(!d||!(m=aa(m)))return d;var D=Zi(d);return wu(D,ya(D,Zi(m))).join("")},oe.truncate=function(d,m){var E=30,D="...";if(eo(m)){var G="separator"in m?m.separator:G;E="length"in m?ct(m.length):E,D="omission"in m?aa(m.omission):D}var J=(d=_t(d)).length;if(za(d)){var de=Zi(d);J=de.length}if(E>=J)return d;var _e=E-Bi(D);if(_e<1)return D;var Fe=de?wu(de,0,_e).join(""):d.slice(0,_e);if(G===v)return Fe+D;if(de&&(_e+=Fe.length-_e),ie(G)){if(d.slice(_e).search(G)){var pt,gt=Fe;for(G.global||(G=U(G.source,_t(_r.exec(G))+"g")),G.lastIndex=0;pt=G.exec(gt);)var Gt=pt.index;Fe=Fe.slice(0,Gt===v?_e:Gt)}}else if(d.indexOf(aa(G),_e)!=_e){var An=Fe.lastIndexOf(G);An>-1&&(Fe=Fe.slice(0,An))}return Fe+D},oe.unescape=function(d){return(d=_t(d))&&ft.test(d)?d.replace(Tn,oa):d},oe.uniqueId=function(d){var m=++Vr;return _t(d)+m},oe.upperCase=mo,oe.upperFirst=ni,oe.each=ei,oe.eachRight=xh,oe.first=Ep,ve(oe,(we={},kn(oe,function(d,m){ln.call(oe.prototype,m)||(we[m]=d)}),we),{chain:!1}),oe.VERSION="4.17.21",Ii(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){oe[d].placeholder=oe}),Ii(["drop","take"],function(d,m){Pr.prototype[d]=function(E){E=E===v?1:Io(ct(E),0);var D=this.__filtered__&&!m?new Pr(this):this.clone();return D.__filtered__?D.__takeCount__=Ui(E,D.__takeCount__):D.__views__.push({size:Ui(E,V),type:d+(D.__dir__<0?"Right":"")}),D},Pr.prototype[d+"Right"]=function(E){return this.reverse()[d](E).reverse()}}),Ii(["filter","map","takeWhile"],function(d,m){var E=m+1,D=E==1||E==3;Pr.prototype[d]=function(G){var J=this.clone();return J.__iteratees__.push({iteratee:Jn(G,3),type:E}),J.__filtered__=J.__filtered__||D,J}}),Ii(["head","last"],function(d,m){var E="take"+(m?"Right":"");Pr.prototype[d]=function(){return this[E](1).value()[0]}}),Ii(["initial","tail"],function(d,m){var E="drop"+(m?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[E](1)}}),Pr.prototype.compact=function(){return this.filter(zn)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=Or(function(d,m){return typeof d=="function"?new Pr(this):this.map(function(E){return Gi(E,d,m)})}),Pr.prototype.reject=function(d){return this.filter(Al(Jn(d)))},Pr.prototype.slice=function(d,m){d=ct(d);var E=this;return E.__filtered__&&(d>0||m<0)?new Pr(E):(d<0?E=E.takeRight(-d):d&&(E=E.drop(d)),m!==v&&(E=(m=ct(m))<0?E.dropRight(-m):E.take(m-d)),E)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(V)},kn(Pr.prototype,function(d,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),D=/^(?:head|last)$/.test(m),G=oe[D?"take"+(m=="last"?"Right":""):m],J=D||/^find/.test(m);G&&(oe.prototype[m]=function(){var de=this.__wrapped__,_e=D?[1]:arguments,Fe=de instanceof Pr,pt=_e[0],gt=Fe||mr(de),Gt=function(dr){var gn=G.apply(oe,ai([dr],_e));return D&&An?gn[0]:gn};gt&&E&&typeof pt=="function"&&pt.length!=1&&(Fe=gt=!1);var An=this.__chain__,On=!!this.__actions__.length,Yn=J&&!An,Pt=Fe&&!On;if(!J&&gt){de=Pt?de:new Pr(this);var Qt=d.apply(de,_e);return Qt.__actions__.push({func:af,args:[Gt],thisArg:v}),new Na(Qt,An)}return Yn&&Pt?d.apply(this,_e):(Qt=this.thru(Gt),Yn?D?Qt.value()[0]:Qt.value():Qt)})}),Ii(["pop","push","shift","sort","splice","unshift"],function(d){var m=Ve[d],E=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",D=/^(?:pop|shift)$/.test(d);oe.prototype[d]=function(){var G=arguments;if(D&&!this.__chain__){var J=this.value();return m.apply(mr(J)?J:[],G)}return this[E](function(de){return m.apply(mr(de)?de:[],G)})}}),kn(Pr.prototype,function(d,m){var E=oe[m];if(E){var D=E.name+"";ln.call(vu,D)||(vu[D]=[]),vu[D].push({name:m,func:E})}}),vu[Ou(v,2).name]=[{name:"wrapper",func:v}],Pr.prototype.clone=function(){var d=new Pr(this.__wrapped__);return d.__actions__=pi(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=pi(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=pi(this.__views__),d},Pr.prototype.reverse=function(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Pr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,E=mr(d),D=m<0,G=E?d.length:0,J=function(jr,Un,er){for(var zo=-1,ot=er.length;++zo<ot;){var eu=er[zo],wi=eu.size;switch(eu.type){case"drop":jr+=wi;break;case"dropRight":Un-=wi;break;case"take":Un=Ui(Un,jr+wi);break;case"takeRight":jr=Io(jr,Un-wi)}}return{start:jr,end:Un}}(0,G,this.__views__),de=J.start,_e=J.end,Fe=_e-de,pt=D?_e:de-1,gt=this.__iteratees__,Gt=gt.length,An=0,On=Ui(Fe,this.__takeCount__);if(!E||!D&&G==Fe&&On==Fe)return yh(d,this.__actions__);var Yn=[];e:for(;Fe--&&An<On;){for(var Pt=-1,Qt=d[pt+=m];++Pt<Gt;){var dr=gt[Pt],gn=dr.iteratee,ar=dr.type,or=gn(Qt);if(ar==2)Qt=or;else if(!or){if(ar==1)continue e;break e}}Yn[An++]=Qt}return Yn},oe.prototype.at=lf,oe.prototype.chain=function(){return Qo(this)},oe.prototype.commit=function(){return new Na(this.value(),this.__chain__)},oe.prototype.next=function(){this.__values__===v&&(this.__values__=It(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?v:this.__values__[this.__index__++]}},oe.prototype.plant=function(d){for(var m,E=this;E instanceof Ul;){var D=yd(E);D.__index__=0,D.__values__=v,m?G.__wrapped__=D:m=D;var G=D;E=E.__wrapped__}return G.__wrapped__=d,m},oe.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof Pr){var m=d;return this.__actions__.length&&(m=new Pr(this)),(m=m.reverse()).__actions__.push({func:af,args:[Ca],thisArg:v}),new Na(m,this.__chain__)}return this.thru(Ca)},oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=function(){return yh(this.__wrapped__,this.__actions__)},oe.prototype.first=oe.prototype.head,Xa&&(oe.prototype[Xa]=function(){return this}),oe}();jo._=ki,(h=(function(){return ki}).call(o,r,o,c))===v||(c.exports=h)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),h=r(33),v=r(87),g=r(62),b=r(174),w=r(28),O=s.TypeError,S=w("toPrimitive");n.exports=function(P,A){if(!h(P)||v(P))return P;var k,j=g(P,S);if(j){if(A===void 0&&(A="default"),k=c(j,P,A),!h(k)||v(k))return k;throw O("Can't convert object to primitive value")}return A===void 0&&(A="number"),b(P,A)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),h=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),h=r(50),v=r(38);n.exports=function(g,b){for(var w=c(b),O=v.f,S=h.f,P=0;P<w.length;P++){var A=w[P];s(g,A)||O(g,A,S(b,A))}}},function(n,o,r){var s=r(46),c=r(15),h=r(74),v=r(112),g=r(32),b=c([].concat);n.exports=s("Reflect","ownKeys")||function(w){var O=h.f(g(w)),S=v.f;return S?b(O,S(w)):O}},function(n,o,r){var s=r(15),c=r(35),h=r(41),v=r(137).indexOf,g=r(72),b=s([].push);n.exports=function(w,O){var S,P=h(w),A=0,k=[];for(S in P)!c(g,S)&&c(P,S)&&b(k,S);for(;O.length>A;)c(P,S=O[A++])&&(~v(k,S)||b(k,S));return k}},function(n,o,r){var s=r(41),c=r(75),h=r(45),v=function(g){return function(b,w,O){var S,P=s(b),A=h(P),k=c(O,A);if(g&&w!=w){for(;A>k;)if((S=P[k++])!=S)return!0}else for(;A>k;k++)if((g||k in P)&&P[k]===w)return g||k||0;return!g&&-1}};n.exports={includes:v(!0),indexOf:v(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),h=r(74).f,v=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&s(b)=="Window"?function(w){try{return h(w)}catch{return v(g)}}(b):h(c(b))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),h=r(140),v=r(38).f;n.exports=function(g){var b=s.Symbol||(s.Symbol={});c(b,g)||v(b,g,{value:h.f(g)})}},function(n,o,r){var s,c,h,v=r(18),g=r(30),b=r(60),w=r(101),O=r(42),S=r(28),P=r(71),A=S("iterator"),k=!1;[].keys&&("next"in(h=[].keys())?(c=w(w(h)))!==Object.prototype&&(s=c):k=!0),s==null||v(function(){var j={};return s[A].call(j)!==j})?s={}:P&&(s=b(s)),g(s[A])||O(s,A,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:k}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),h=r(72),v=r(33),g=r(35),b=r(38).f,w=r(74),O=r(139),S=r(183),P=r(90),A=r(185),k=!1,j=P("meta"),R=0,$=function(H){b(H,j,{value:{objectID:"O"+R++,weakData:{}}})},V=n.exports={enable:function(){V.enable=function(){},k=!0;var H=w.f,Y=c([].splice),Q={};Q[j]=1,H(Q).length&&(w.f=function(W){for(var I=H(W),z=0,K=I.length;z<K;z++)if(I[z]===j){Y(I,z,1);break}return I},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(H,Y){if(!v(H))return typeof H=="symbol"?H:(typeof H=="string"?"S":"P")+H;if(!g(H,j)){if(!S(H))return"F";if(!Y)return"E";$(H)}return H[j].objectID},getWeakData:function(H,Y){if(!g(H,j)){if(!S(H))return!0;if(!Y)return!1;$(H)}return H[j].weakData},onFreeze:function(H){return A&&k&&S(H)&&!g(H,j)&&$(H),H}};h[j]=!0},function(n,o,r){var s=r(28),c=r(80),h=s("iterator"),v=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||v[h]===g)}},function(n,o,r){var s=r(7),c=r(34),h=r(56),v=r(32),g=r(88),b=r(118),w=s.TypeError;n.exports=function(O,S){var P=arguments.length<2?b(O):S;if(h(P))return v(c(P,O));throw w(g(O)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),h=r(62);n.exports=function(v,g,b){var w,O;c(v);try{if(!(w=h(v,"return"))){if(g==="throw")throw b;return b}w=s(w,v)}catch(S){O=!0,w=S}if(g==="throw")throw b;if(O)throw w;return c(w),b}},function(n,o,r){var s=r(30),c=r(33),h=r(102);n.exports=function(v,g,b){var w,O;return h&&s(w=g.constructor)&&w!==b&&c(O=w.prototype)&&O!==b.prototype&&h(v,O),v}},function(n,o,r){var s=r(42);n.exports=function(c,h,v){for(var g in h)s(c,g,h[g],v);return c}},function(n,o,r){var s=r(46),c=r(38),h=r(28),v=r(36),g=h("species");n.exports=function(b){var w=s(b),O=c.f;v&&w&&!w[g]&&O(w,g,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),h=r(39),v=r(44),g=s("".charAt),b=s("".charCodeAt),w=s("".slice),O=function(S){return function(P,A){var k,j,R=h(v(P)),$=c(A),V=R.length;return $<0||$>=V?S?"":void 0:(k=b(R,$))<55296||k>56319||$+1===V||(j=b(R,$+1))<56320||j>57343?S?g(R,$):k:S?w(R,$,$+2):j-56320+(k-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),h="";return c.global&&(h+="g"),c.ignoreCase&&(h+="i"),c.multiline&&(h+="m"),c.dotAll&&(h+="s"),c.unicode&&(h+="u"),c.sticky&&(h+="y"),h}},function(n,o,r){var s=r(18),c=r(7).RegExp,h=s(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),v=h||s(function(){return!c("a","y").sticky}),g=h||s(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:v,UNSUPPORTED_Y:h}},function(n,o,r){var s=r(16),c=r(79).find,h=r(100),v="find",g=!0;v in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),h(v)},function(n,o,r){var s=r(16),c=r(137).includes,h=r(100);s({target:"Array",proto:!0},{includes:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(n,o,r){var s=r(16),c=r(15),h=r(197),v=r(44),g=r(39),b=r(198),w=c("".indexOf);s({target:"String",proto:!0,forced:!b("includes")},{includes:function(O){return!!~w(g(v(this)),g(h(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),h=r(28)("match");n.exports=function(v){var g;return s(v)&&((g=v[h])!==void 0?!!g:c(v)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),h=r(39),v=r(162),g=s("".replace),b="["+v+"]",w=RegExp("^"+b+b+"*"),O=RegExp(b+b+"*$"),S=function(P){return function(A){var k=h(c(A));return 1&P&&(k=g(k,w,"")),2&P&&(k=g(k,O,"")),k}};n.exports={start:S(1),end:S(2),trim:S(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function h(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function g(R){if(r===setTimeout)return setTimeout(R,0);if((r===h||!r)&&setTimeout)return r=setTimeout,setTimeout(R,0);try{return r(R,0)}catch{try{return r.call(null,R,0)}catch{return r.call(this,R,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:h}catch{r=h}try{s=typeof clearTimeout=="function"?clearTimeout:v}catch{s=v}})();var b,w=[],O=!1,S=-1;function P(){O&&b&&(O=!1,b.length?w=b.concat(w):S=-1,w.length&&A())}function A(){if(!O){var R=g(P);O=!0;for(var $=w.length;$;){for(b=w,w=[];++S<$;)b&&b[S].run();S=-1,$=w.length}b=null,O=!1,function(V){if(s===clearTimeout)return clearTimeout(V);if((s===v||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(V);try{s(V)}catch{try{return s.call(null,V)}catch{return s.call(this,V)}}}(R)}}function k(R,$){this.fun=R,this.array=$}function j(){}c.nextTick=function(R){var $=new Array(arguments.length-1);if(arguments.length>1)for(var V=1;V<arguments.length;V++)$[V-1]=arguments[V];w.push(new k(R,$)),w.length!==1||O||g(A)},k.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=j,c.addListener=j,c.once=j,c.off=j,c.removeListener=j,c.removeAllListeners=j,c.emit=j,c.prependListener=j,c.prependOnceListener=j,c.listeners=function(R){return[]},c.binding=function(R){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(R){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),h=r(28)("species");n.exports=function(v,g){var b,w=s(v).constructor;return w===void 0||(b=s(w)[h])==null?g:c(b)}},function(n,o,r){var s=r(7),c=r(99),h=r(88),v=s.TypeError;n.exports=function(g){if(c(g))return g;throw v(h(g)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),h=r(32),v=r(94),g=r(39),b=r(44),w=r(62),O=r(124),S=r(125);c("match",function(P,A,k){return[function(j){var R=b(this),$=j==null?void 0:w(j,P);return $?s($,j,R):new RegExp(j)[P](g(R))},function(j){var R=h(this),$=g(j),V=k(A,R,$);if(V.done)return V.value;if(!R.global)return S(R,$);var H=R.unicode;R.lastIndex=0;for(var Y,Q=[],W=0;(Y=S(R,$))!==null;){var I=g(Y[0]);Q[W]=I,I===""&&(R.lastIndex=O($,v(R.lastIndex),H)),W++}return W===0?null:Q}]})},function(n,o,r){var s,c,h,v,g=r(7),b=r(76),w=r(64),O=r(30),S=r(35),P=r(18),A=r(138),k=r(98),j=r(91),R=r(169),$=r(128),V=g.setImmediate,H=g.clearImmediate,Y=g.process,Q=g.Dispatch,W=g.Function,I=g.MessageChannel,z=g.String,K=0,q={},ce="onreadystatechange";try{s=g.location}catch{}var ke=function(Pe){if(S(q,Pe)){var le=q[Pe];delete q[Pe],le()}},Oe=function(Pe){return function(){ke(Pe)}},ze=function(Pe){ke(Pe.data)},Ie=function(Pe){g.postMessage(z(Pe),s.protocol+"//"+s.host)};V&&H||(V=function(Pe){var le=k(arguments,1);return q[++K]=function(){b(O(Pe)?Pe:W(Pe),void 0,le)},c(K),K},H=function(Pe){delete q[Pe]},$?c=function(Pe){Y.nextTick(Oe(Pe))}:Q&&Q.now?c=function(Pe){Q.now(Oe(Pe))}:I&&!R?(v=(h=new I).port2,h.port1.onmessage=ze,c=w(v.postMessage,v)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!P(Ie)?(c=Ie,g.addEventListener("message",ze,!1)):c=ce in j("script")?function(Pe){A.appendChild(j("script")).onreadystatechange=function(){A.removeChild(this),ke(Pe)}}:function(Pe){setTimeout(Oe(Pe),0)}),n.exports={set:V,clear:H}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(h){var v,g;this.promise=new h(function(b,w){if(v!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");v=b,g=w}),this.resolve=s(v),this.reject=s(g)};n.exports.f=function(h){return new c(h)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return Y});var c=r(1);function h(I){throw new Error("[mobx-utils] "+I)}function v(I,z){z===void 0&&(z="Illegal state"),I||h(z)}var g=function(I){return I&&I!==Object.prototype&&Object.getOwnPropertyNames(I).concat(g(Object.getPrototypeOf(I))||[])},b=function(I){return function(z){var K=g(z);return K.filter(function(q,ce){return K.indexOf(q)===ce})}(I).filter(function(z){return z!=="constructor"&&!~z.indexOf("__")})},w="pending",O="fulfilled",S="rejected";function P(I){switch(this.state){case w:return I.pending&&I.pending(this.value);case S:return I.rejected&&I.rejected(this.value);case O:return I.fulfilled?I.fulfilled(this.value):this.value}}function A(I,z){if(v(arguments.length<=2,"fromPromise expects up to two arguments"),v(typeof I=="function"||typeof I=="object"&&I&&typeof I.then=="function","Please pass a promise or function to fromPromise"),I.isPromiseBasedObservable===!0)return I;typeof I=="function"&&(I=new Promise(I));var K=I;I.then(Object(c.k)("observableFromPromise-resolve",function(ce){K.value=ce,K.state=O}),Object(c.k)("observableFromPromise-reject",function(ce){K.value=ce,K.state=S})),K.isPromiseBasedObservable=!0,K.case=P;var q=z&&z.state===O?z.value:void 0;return Object(c.q)(K,{value:q,state:w},{},{deep:!1}),K}(function(I){I.reject=Object(c.k)("fromPromise.reject",function(z){var K=I(Promise.reject(z));return K.state=S,K.value=z,K}),I.resolve=Object(c.k)("fromPromise.resolve",function(z){z===void 0&&(z=void 0);var K=I(Promise.resolve(z));return K.state=O,K.value=z,K})})(A||(A={}));var k=function(I,z,K,q){var ce,ke=arguments.length,Oe=ke<3?z:q===null?q=Object.getOwnPropertyDescriptor(z,K):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(I,z,K,q);else for(var ze=I.length-1;ze>=0;ze--)(ce=I[ze])&&(Oe=(ke<3?ce(Oe):ke>3?ce(z,K,Oe):ce(z,K))||Oe);return ke>3&&Oe&&Object.defineProperty(z,K,Oe),Oe};(function(){function I(z,K){var q=this;Object(c.G)(function(){q.current=K,q.subscription=z.subscribe(q)})}I.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},I.prototype.next=function(z){this.current=z},I.prototype.complete=function(){this.dispose()},I.prototype.error=function(z){this.current=z,this.dispose()},k([c.C.ref],I.prototype,"current",void 0),k([c.k.bound],I.prototype,"next",null),k([c.k.bound],I.prototype,"complete",null),k([c.k.bound],I.prototype,"error",null)})();var j=function(){return j=Object.assign||function(I){for(var z,K=1,q=arguments.length;K<q;K++)for(var ce in z=arguments[K])Object.prototype.hasOwnProperty.call(z,ce)&&(I[ce]=z[ce]);return I},j.apply(this,arguments)},R=function(I,z,K,q){var ce,ke=arguments.length,Oe=ke<3?z:q===null?q=Object.getOwnPropertyDescriptor(z,K):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(I,z,K,q);else for(var ze=I.length-1;ze>=0;ze--)(ce=I[ze])&&(Oe=(ke<3?ce(Oe):ke>3?ce(z,K,Oe):ce(z,K))||Oe);return ke>3&&Oe&&Object.defineProperty(z,K,Oe),Oe},$=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function I(z){var K=this;this.model=z,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(q){return K.localValues.has(q)},v(Object(c.A)(z),"createViewModel expects an observable object"),b(z).forEach(function(q){if(q!==c.a&&q!=="__mobxDidRunLazyInitializers"){if(v($.indexOf(q)===-1,"The propertyname "+q+" is reserved and cannot be used with viewModels"),Object(c.w)(z,q)){var ce=Object(c.h)(z,q).derivation;K.localComputedValues.set(q,Object(c.m)(ce.bind(K)))}var ke=Object.getOwnPropertyDescriptor(z,q),Oe=ke?{enumerable:ke.enumerable}:{};Object.defineProperty(K,q,j(j({},Oe),{configurable:!0,get:function(){return Object(c.w)(z,q)?K.localComputedValues.get(q).get():K.isPropertyDirty(q)?K.localValues.get(q):K.model[q]},set:Object(c.k)(function(ze){ze!==K.model[q]?K.localValues.set(q,ze):K.localValues.delete(q)})}))}})}Object.defineProperty(I.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),I.prototype.submit=function(){var z=this;Object(c.B)(this.localValues).forEach(function(K){var q=z.localValues.get(K),ce=z.model[K];Object(c.y)(ce)?ce.replace(q):Object(c.z)(ce)?(ce.clear(),ce.merge(q)):Object(c.v)(q)||(z.model[K]=q)}),this.localValues.clear()},I.prototype.reset=function(){this.localValues.clear()},I.prototype.resetProperty=function(z){this.localValues.delete(z)},R([c.m],I.prototype,"isDirty",null),R([c.m],I.prototype,"changedValues",null),R([c.k.bound],I.prototype,"submit",null),R([c.k.bound],I.prototype,"reset",null),R([c.k.bound],I.prototype,"resetProperty",null)})();function V(I){if(!I)return"ROOT";for(var z=[];I.parent;)z.push(I.path),I=I.parent;return z.reverse().join("/")}function H(I){return Object(c.A)(I)||Object(c.y)(I)||Object(c.z)(I)}function Y(I,z){var K=new WeakMap;function q(Oe){var ze=K.get(Oe.object);(function(Ie,Pe){switch(Ie.type){case"add":ce(Ie.newValue,Pe,Ie.name);break;case"update":ke(Ie.oldValue),ce(Ie.newValue,Pe,Ie.name||""+Ie.index);break;case"remove":case"delete":ke(Ie.oldValue);break;case"splice":Ie.removed.map(ke),Ie.added.forEach(function(Me,We){return ce(Me,Pe,""+(Ie.index+We))});for(var le=Ie.index+Ie.addedCount;le<Ie.object.length;le++)if(H(Ie.object[le])){var ye=K.get(Ie.object[le]);ye&&(ye.path=""+le)}}})(Oe,ze),z(Oe,V(ze),I)}function ce(Oe,ze,Ie){if(H(Oe)){var Pe=K.get(Oe);if(Pe){if(Pe.parent!==ze||Pe.path!==Ie)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+V(ze)+"/"+Ie+"', but it already exists at '"+V(Pe.parent)+"/"+Pe.path+"'")}else{var le={parent:ze,path:Ie,dispose:Object(c.D)(Oe,q)};K.set(Oe,le),Object(c.p)(Oe).forEach(function(ye){var Me=ye[0];return ce(ye[1],le,Me)})}}}function ke(Oe){if(H(Oe)){var ze=K.get(Oe);if(!ze)return;K.delete(Oe),ze.dispose(),Object(c.L)(Oe).forEach(ke)}}return ce(I,void 0,""),function(){ke(I)}}var Q,W=(Q=function(I,z){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,q){K.__proto__=q}||function(K,q){for(var ce in q)q.hasOwnProperty(ce)&&(K[ce]=q[ce])},Q(I,z)},function(I,z){function K(){this.constructor=I}Q(I,z),I.prototype=z===null?Object.create(z):(K.prototype=z.prototype,new K)});(function(I){function z(K,q,ce){var ke=ce===void 0?{}:ce,Oe=ke.name,ze=Oe===void 0?"ogm"+(1e3*Math.random()|0):Oe,Ie=ke.keyToName,Pe=Ie===void 0?function(Me){return""+Me}:Ie,le=I.call(this)||this;le._keyToName=Pe,le._groupBy=q,le._ogmInfoKey=Symbol("ogmInfo"+ze),le._base=K;for(var ye=0;ye<K.length;ye++)le._addItem(K[ye]);return le._disposeBaseObserver=Object(c.D)(le._base,function(Me){if(Me.type==="splice")Object(c.J)(function(){for(var We=0,je=Me.removed;We<je.length;We++){var it=je[We];le._removeItem(it)}for(var bt=0,Mt=Me.added;bt<Mt.length;bt++){var Yt=Mt[bt];le._addItem(Yt)}});else{if(Me.type!=="update")throw new Error("illegal state");Object(c.J)(function(){le._removeItem(Me.oldValue),le._addItem(Me.newValue)})}}),le}W(z,I),z.prototype.clear=function(){throw new Error("not supported")},z.prototype.delete=function(K){throw new Error("not supported")},z.prototype.set=function(K,q){throw new Error("not supported")},z.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var q=this._base[K];q[this._ogmInfoKey].reaction(),delete q[this._ogmInfoKey]}},z.prototype._getGroupArr=function(K){var q=I.prototype.get.call(this,K);return q===void 0&&(q=Object(c.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),I.prototype.set.call(this,K,q)),q},z.prototype._removeFromGroupArr=function(K,q){var ce=I.prototype.get.call(this,K);ce.length===1?I.prototype.delete.call(this,K):(q===ce.length-1||(ce[q]=ce[ce.length-1],ce[q][this._ogmInfoKey].groupArrIndex=q),ce.length--)},z.prototype._addItem=function(K){var q=this,ce=this._groupBy(K),ke=this._getGroupArr(ce),Oe={groupByValue:ce,groupArrIndex:ke.length,reaction:Object(c.F)(function(){return q._groupBy(K)},function(ze,Ie){var Pe=K[q._ogmInfoKey];q._removeFromGroupArr(Pe.groupByValue,Pe.groupArrIndex);var le=q._getGroupArr(ze),ye=le.length;le.push(K),Pe.groupByValue=ze,Pe.groupArrIndex=ye})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Oe}),ke.push(K)},z.prototype._removeItem=function(K){var q=K[this._ogmInfoKey];this._removeFromGroupArr(q.groupByValue,q.groupArrIndex),q.reaction(),delete K[this._ogmInfoKey]}})(c.b),function(){function I(z,K){this.base=z,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var q=this.closest=this.root=z,ce=0;ce<this.args.length-1&&(q=q.get(K[ce]));ce++)this.closest=q;this.closestIdx=ce}return I.prototype.exists=function(){this.assertNotDisposed();var z=this.args.length;return this.closestIdx>=z-1&&this.closest.has(this.args[z-1])},I.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},I.prototype.set=function(z){this.assertNotDisposed();for(var K=this.args.length,q=this.closest,ce=this.closestIdx;ce<K-1;ce++){var ke=new Map;q.set(this.args[ce],ke),q=ke}this.closestIdx=K-1,this.closest=q,q.set(this.args[K-1],z)},I.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var z=this.args.length;this.closest.delete(this.args[z-1]);for(var K=this.root,q=[K],ce=0;ce<z-1;ce++)K=K.get(this.args[ce]),q.push(K);for(ce=q.length-1;ce>0;ce--)q[ce].size===0&&q[ce-1].delete(this.args[ce-1]);this.isDisposed=!0},I.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},I}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,h,v){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)b[111+P]="f"+P;for(P=0;P<=9;++P)b[P+96]=P.toString();H.prototype.bind=function(Y,Q,W){var I=this;return Y=Y instanceof Array?Y:[Y],I._bindMultiple.call(I,Y,Q,W),I},H.prototype.unbind=function(Y,Q){return this.bind.call(this,Y,function(){},Q)},H.prototype.trigger=function(Y,Q){var W=this;return W._directMap[Y+":"+Q]&&W._directMap[Y+":"+Q]({},Y),W},H.prototype.reset=function(){var Y=this;return Y._callbacks={},Y._directMap={},Y},H.prototype.stopCallback=function(Y,Q){if((" "+Q.className+" ").indexOf(" mousetrap ")>-1||V(Q,this.target))return!1;if("composedPath"in Y&&typeof Y.composedPath=="function"){var W=Y.composedPath()[0];W!==Y.target&&(Q=W)}return Q.tagName=="INPUT"||Q.tagName=="SELECT"||Q.tagName=="TEXTAREA"||Q.isContentEditable},H.prototype.handleKey=function(){var Y=this;return Y._handleKey.apply(Y,arguments)},H.addKeycodes=function(Y){for(var Q in Y)Y.hasOwnProperty(Q)&&(b[Q]=Y[Q]);g=null},H.init=function(){var Y=H(h);for(var Q in Y)Q.charAt(0)!=="_"&&(H[Q]=function(W){return function(){return Y[W].apply(Y,arguments)}}(Q))},H.init(),c.Mousetrap=H,n.exports&&(n.exports=H),(s=(function(){return H}).call(o,r,o,n))===void 0||(n.exports=s)}function A(Y,Q,W){Y.addEventListener?Y.addEventListener(Q,W,!1):Y.attachEvent("on"+Q,W)}function k(Y){if(Y.type=="keypress"){var Q=String.fromCharCode(Y.which);return Y.shiftKey||(Q=Q.toLowerCase()),Q}return b[Y.which]?b[Y.which]:w[Y.which]?w[Y.which]:String.fromCharCode(Y.which).toLowerCase()}function j(Y){return Y=="shift"||Y=="ctrl"||Y=="alt"||Y=="meta"}function R(Y,Q,W){return W||(W=function(){if(!g)for(var I in g={},b)I>95&&I<112||b.hasOwnProperty(I)&&(g[b[I]]=I);return g}()[Y]?"keydown":"keypress"),W=="keypress"&&Q.length&&(W="keydown"),W}function $(Y,Q){var W,I,z,K=[];for(W=function(q){return q==="+"?["+"]:(q=q.replace(/\+{2}/g,"+plus")).split("+")}(Y),z=0;z<W.length;++z)I=W[z],S[I]&&(I=S[I]),Q&&Q!="keypress"&&O[I]&&(I=O[I],K.push("shift")),j(I)&&K.push(I);return{key:I,modifiers:K,action:Q=R(I,K,Q)}}function V(Y,Q){return Y!==null&&Y!==h&&(Y===Q||V(Y.parentNode,Q))}function H(Y){var Q=this;if(Y=Y||h,!(Q instanceof H))return new H(Y);Q.target=Y,Q._callbacks={},Q._directMap={};var W,I={},z=!1,K=!1,q=!1;function ce(le){le=le||{};var ye,Me=!1;for(ye in I)le[ye]?Me=!0:I[ye]=0;Me||(q=!1)}function ke(le,ye,Me,We,je,it){var bt,Mt,Yt,Ce,ge=[],Se=Me.type;if(!Q._callbacks[le])return[];for(Se=="keyup"&&j(le)&&(ye=[le]),bt=0;bt<Q._callbacks[le].length;++bt)if(Mt=Q._callbacks[le][bt],(We||!Mt.seq||I[Mt.seq]==Mt.level)&&Se==Mt.action&&(Se=="keypress"&&!Me.metaKey&&!Me.ctrlKey||(Yt=ye,Ce=Mt.modifiers,Yt.sort().join(",")===Ce.sort().join(",")))){var ht=!We&&Mt.combo==je,zt=We&&Mt.seq==We&&Mt.level==it;(ht||zt)&&Q._callbacks[le].splice(bt,1),ge.push(Mt)}return ge}function Oe(le,ye,Me,We){Q.stopCallback(ye,ye.target||ye.srcElement,Me,We)||le(ye,Me)===!1&&(function(je){je.preventDefault?je.preventDefault():je.returnValue=!1}(ye),function(je){je.stopPropagation?je.stopPropagation():je.cancelBubble=!0}(ye))}function ze(le){typeof le.which!="number"&&(le.which=le.keyCode);var ye=k(le);ye&&(le.type!="keyup"||z!==ye?Q.handleKey(ye,function(Me){var We=[];return Me.shiftKey&&We.push("shift"),Me.altKey&&We.push("alt"),Me.ctrlKey&&We.push("ctrl"),Me.metaKey&&We.push("meta"),We}(le),le):z=!1)}function Ie(le,ye,Me,We){function je(Yt){return function(){q=Yt,++I[le],clearTimeout(W),W=setTimeout(ce,1e3)}}function it(Yt){Oe(Me,Yt,le),We!=="keyup"&&(z=k(Yt)),setTimeout(ce,10)}I[le]=0;for(var bt=0;bt<ye.length;++bt){var Mt=bt+1===ye.length?it:je(We||$(ye[bt+1]).action);Pe(ye[bt],Mt,We,le,bt)}}function Pe(le,ye,Me,We,je){Q._directMap[le+":"+Me]=ye;var it,bt=(le=le.replace(/\s+/g," ")).split(" ");bt.length>1?Ie(le,bt,ye,Me):(it=$(le,Me),Q._callbacks[it.key]=Q._callbacks[it.key]||[],ke(it.key,it.modifiers,{type:it.action},We,le,je),Q._callbacks[it.key][We?"unshift":"push"]({callback:ye,modifiers:it.modifiers,action:it.action,seq:We,level:je,combo:le}))}Q._handleKey=function(le,ye,Me){var We,je=ke(le,ye,Me),it={},bt=0,Mt=!1;for(We=0;We<je.length;++We)je[We].seq&&(bt=Math.max(bt,je[We].level));for(We=0;We<je.length;++We)if(je[We].seq){if(je[We].level!=bt)continue;Mt=!0,it[je[We].seq]=1,Oe(je[We].callback,Me,je[We].combo,je[We].seq)}else Mt||Oe(je[We].callback,Me,je[We].combo);var Yt=Me.type=="keypress"&&K;Me.type!=q||j(le)||Yt||ce(it),K=Mt&&Me.type=="keydown"},Q._bindMultiple=function(le,ye,Me){for(var We=0;We<le.length;++We)Pe(le[We],ye,Me)},A(Y,"keypress",ze),A(Y,"keydown",ze),A(Y,"keyup",ze)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),h=r(30),v=r(33),g=s.TypeError;n.exports=function(b,w){var O,S;if(w==="string"&&h(O=b.toString)&&!v(S=c(O,b))||h(O=b.valueOf)&&!v(S=c(O,b))||w!=="string"&&h(O=b.toString)&&!v(S=c(O,b)))return S;throw g("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),h=r(92),v=s.WeakMap;n.exports=c(v)&&/native code/.test(h(v))},function(n,o,r){var s=r(36),c=r(38),h=r(32),v=r(41),g=r(77);n.exports=s?Object.defineProperties:function(b,w){h(b);for(var O,S=v(w),P=g(w),A=P.length,k=0;A>k;)c.f(b,O=P[k++],S[O]);return b}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),h=r(99),v=r(33),g=r(28)("species"),b=s.Array;n.exports=function(w){var O;return c(w)&&(O=w.constructor,(h(O)&&(O===b||c(O.prototype))||v(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?b:O}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),h=r(69),v=r(78),g=r(80),b=function(){return this};n.exports=function(w,O,S,P){var A=O+" Iterator";return w.prototype=c(s,{next:h(+!P,S)}),v(w,A,!1,!0),g[A]=b,w}},function(n,o,r){var s=r(7),c=r(30),h=s.String,v=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw v("Can't set "+h(g)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),h=r(15),v=r(95),g=r(42),b=r(144),w=r(117),O=r(119),S=r(30),P=r(33),A=r(18),k=r(120),j=r(78),R=r(148);n.exports=function($,V,H){var Y=$.indexOf("Map")!==-1,Q=$.indexOf("Weak")!==-1,W=Y?"set":"add",I=c[$],z=I&&I.prototype,K=I,q={},ce=function(le){var ye=h(z[le]);g(z,le,le=="add"?function(Me){return ye(this,Me===0?0:Me),this}:le=="delete"?function(Me){return!(Q&&!P(Me))&&ye(this,Me===0?0:Me)}:le=="get"?function(Me){return Q&&!P(Me)?void 0:ye(this,Me===0?0:Me)}:le=="has"?function(Me){return!(Q&&!P(Me))&&ye(this,Me===0?0:Me)}:function(Me,We){return ye(this,Me===0?0:Me,We),this})};if(v($,!S(I)||!(Q||z.forEach&&!A(function(){new I().entries().next()}))))K=H.getConstructor(V,$,Y,W),b.enable();else if(v($,!0)){var ke=new K,Oe=ke[W](Q?{}:-0,1)!=ke,ze=A(function(){ke.has(1)}),Ie=k(function(le){new I(le)}),Pe=!Q&&A(function(){for(var le=new I,ye=5;ye--;)le[W](ye,ye);return!le.has(-0)});Ie||((K=V(function(le,ye){O(le,z);var Me=R(new I,le,K);return ye!=null&&w(ye,Me[W],{that:Me,AS_ENTRIES:Y}),Me})).prototype=z,z.constructor=K),(ze||Pe)&&(ce("delete"),ce("has"),Y&&ce("get")),(Pe||Oe)&&ce(W),Q&&z.clear&&delete z.clear}return q[$]=K,s({global:!0,forced:K!=I},q),j(K,$),Q||H.setStrong(K,$,Y),K}},function(n,o,r){var s=r(18),c=r(33),h=r(51),v=r(184),g=Object.isExtensible,b=s(function(){});n.exports=b||v?function(w){return!!c(w)&&(!v||h(w)!="ArrayBuffer")&&(!g||g(w))}:g},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),h=r(149),v=r(64),g=r(119),b=r(117),w=r(116),O=r(150),S=r(36),P=r(144).fastKey,A=r(58),k=A.set,j=A.getterFor;n.exports={getConstructor:function(R,$,V,H){var Y=R(function(K,q){g(K,Q),k(K,{type:$,index:c(null),first:void 0,last:void 0,size:0}),S||(K.size=0),q!=null&&b(q,K[H],{that:K,AS_ENTRIES:V})}),Q=Y.prototype,W=j($),I=function(K,q,ce){var ke,Oe,ze=W(K),Ie=z(K,q);return Ie?Ie.value=ce:(ze.last=Ie={index:Oe=P(q,!0),key:q,value:ce,previous:ke=ze.last,next:void 0,removed:!1},ze.first||(ze.first=Ie),ke&&(ke.next=Ie),S?ze.size++:K.size++,Oe!=="F"&&(ze.index[Oe]=Ie)),K},z=function(K,q){var ce,ke=W(K),Oe=P(q);if(Oe!=="F")return ke.index[Oe];for(ce=ke.first;ce;ce=ce.next)if(ce.key==q)return ce};return h(Q,{clear:function(){for(var K=W(this),q=K.index,ce=K.first;ce;)ce.removed=!0,ce.previous&&(ce.previous=ce.previous.next=void 0),delete q[ce.index],ce=ce.next;K.first=K.last=void 0,S?K.size=0:this.size=0},delete:function(K){var q=this,ce=W(q),ke=z(q,K);if(ke){var Oe=ke.next,ze=ke.previous;delete ce.index[ke.index],ke.removed=!0,ze&&(ze.next=Oe),Oe&&(Oe.previous=ze),ce.first==ke&&(ce.first=Oe),ce.last==ke&&(ce.last=ze),S?ce.size--:q.size--}return!!ke},forEach:function(K){for(var q,ce=W(this),ke=v(K,arguments.length>1?arguments[1]:void 0);q=q?q.next:ce.first;)for(ke(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(K){return!!z(this,K)}}),h(Q,V?{get:function(K){var q=z(this,K);return q&&q.value},set:function(K,q){return I(this,K===0?0:K,q)}}:{add:function(K){return I(this,K=K===0?0:K,K)}}),S&&s(Q,"size",{get:function(){return W(this).size}}),Y},setStrong:function(R,$,V){var H=$+" Iterator",Y=j($),Q=j(H);w(R,$,function(W,I){k(this,{type:H,target:W,state:Y(W),kind:I,last:void 0})},function(){for(var W=Q(this),I=W.kind,z=W.last;z&&z.removed;)z=z.previous;return W.target&&(W.last=z=z?z.next:W.state.first)?I=="keys"?{value:z.key,done:!1}:I=="values"?{value:z.value,done:!1}:{value:[z.key,z.value],done:!1}:(W.target=void 0,{value:void 0,done:!0})},V?"entries":"values",!V,!0),O($)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(h){return s(this,h,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),h=r(34),v=r(40),g=r(189),b=r(145),w=r(99),O=r(45),S=r(63),P=r(146),A=r(118),k=s.Array;n.exports=function(j){var R=v(j),$=w(this),V=arguments.length,H=V>1?arguments[1]:void 0,Y=H!==void 0;Y&&(H=c(H,V>2?arguments[2]:void 0));var Q,W,I,z,K,q,ce=A(R),ke=0;if(!ce||this==k&&b(ce))for(Q=O(R),W=$?new this(Q):k(Q);Q>ke;ke++)q=Y?H(R[ke],ke):R[ke],S(W,ke,q);else for(K=(z=P(R,ce)).next,W=$?new this:[];!(I=h(K,z)).done;ke++)q=Y?g(z,H,[I.value,ke],!0):I.value,S(W,ke,q);return W.length=ke,W}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(h,v,g,b){try{return b?v(s(g)[0],g[1]):v(g)}catch(w){c(h,"throw",w)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var h=c(".","s");return!(h.dotAll&&h.exec(`
`)&&h.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var h=c("(?<a>b)","g");return h.exec("b").groups.a!=="b"||"b".replace(h,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),h=r(56),v=r(40),g=r(45),b=r(39),w=r(18),O=r(193),S=r(121),P=r(194),A=r(195),k=r(70),j=r(196),R=[],$=c(R.sort),V=c(R.push),H=w(function(){R.sort(void 0)}),Y=w(function(){R.sort(null)}),Q=S("sort"),W=!w(function(){if(k)return k<70;if(!(P&&P>3)){if(A)return!0;if(j)return j<603;var I,z,K,q,ce="";for(I=65;I<76;I++){switch(z=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(q=0;q<47;q++)R.push({k:z+q,v:K})}for(R.sort(function(ke,Oe){return Oe.v-ke.v}),q=0;q<R.length;q++)z=R[q].k.charAt(0),ce.charAt(ce.length-1)!==z&&(ce+=z);return ce!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:H||!Y||!Q||!W},{sort:function(I){I!==void 0&&h(I);var z=v(this);if(W)return I===void 0?$(z):$(z,I);var K,q,ce=[],ke=g(z);for(q=0;q<ke;q++)q in z&&V(ce,z[q]);for(O(ce,function(Oe){return function(ze,Ie){return Ie===void 0?-1:ze===void 0?1:Oe!==void 0?+Oe(ze,Ie)||0:b(ze)>b(Ie)?1:-1}}(I)),K=ce.length,q=0;q<K;)z[q]=ce[q++];for(;q<ke;)delete z[q++];return z}})},function(n,o,r){var s=r(114),c=Math.floor,h=function(b,w){var O=b.length,S=c(O/2);return O<8?v(b,w):g(b,h(s(b,0,S),w),h(s(b,S),w),w)},v=function(b,w){for(var O,S,P=b.length,A=1;A<P;){for(S=A,O=b[A];S&&w(b[S-1],O)>0;)b[S]=b[--S];S!==A++&&(b[S]=O)}return b},g=function(b,w,O,S){for(var P=w.length,A=O.length,k=0,j=0;k<P||j<A;)b[k+j]=k<P&&j<A?S(w[k],O[j])<=0?w[k++]:O[j++]:k<P?w[k++]:O[j++];return b};n.exports=h},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),h=s.TypeError;n.exports=function(v){if(c(v))throw h("The method doesn't accept regular expressions");return v}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var h=/./;try{"/./"[c](h)}catch{try{return h[s]=!1,"/./"[c](h)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),h=r(162);n.exports=function(v){return c(function(){return!!h[v]()||"​᠎"[v]()!=="​᠎"||s&&h[v].name!==v})}},function(n,o,r){var s=r(15),c=r(40),h=Math.floor,v=s("".charAt),g=s("".replace),b=s("".slice),w=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(S,P,A,k,j,R){var $=A+S.length,V=k.length,H=O;return j!==void 0&&(j=c(j),H=w),g(R,H,function(Y,Q){var W;switch(v(Q,0)){case"$":return"$";case"&":return S;case"`":return b(P,0,A);case"'":return b(P,$);case"<":W=j[b(Q,1,-1)];break;default:var I=+Q;if(I===0)return Y;if(I>V){var z=h(I/10);return z===0?Y:z<=V?k[z-1]===void 0?v(Q,1):k[z-1]+v(Q,1):Y}W=k[I-1]}return W===void 0?"":W})}},function(n,o,r){var s=r(36),c=r(15),h=r(34),v=r(18),g=r(77),b=r(112),w=r(84),O=r(40),S=r(85),P=Object.assign,A=Object.defineProperty,k=c([].concat);n.exports=!P||v(function(){if(s&&P({b:1},P(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var j={},R={},$=Symbol(),V="abcdefghijklmnopqrst";return j[$]=7,V.split("").forEach(function(H){R[H]=H}),P({},j)[$]!=7||g(P({},R)).join("")!=V})?function(j,R){for(var $=O(j),V=arguments.length,H=1,Y=b.f,Q=w.f;V>H;)for(var W,I=S(arguments[H++]),z=Y?k(g(I),Y(I)):g(I),K=z.length,q=0;K>q;)W=z[q++],s&&!h(Q,I,W)||($[W]=I[W]);return $}:P},function(n,o,r){var s=r(7),c=r(15),h=r(56),v=r(33),g=r(35),b=r(98),w=s.Function,O=c([].concat),S=c([].join),P={},A=function(k,j,R){if(!g(P,j)){for(var $=[],V=0;V<j;V++)$[V]="a["+V+"]";P[j]=w("C,a","return new C("+S($,",")+")")}return P[j](k,R)};n.exports=w.bind||function(k){var j=h(this),R=j.prototype,$=b(arguments,1),V=function(){var H=O($,b(arguments));return this instanceof V?A(j,H.length,H):j.apply(k,H)};return v(R)&&(V.prototype=R),V}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),h=r(39),v=/"/g,g=s("".replace);n.exports=function(b,w,O,S){var P=h(c(b)),A="<"+w;return O!==""&&(A+=" "+O+'="'+g(h(S),v,"&quot;")+'"'),A+">"+P+"</"+w+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var h=""[c]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,h,v,g=r(16),b=r(71),w=r(7),O=r(46),S=r(34),P=r(209),A=r(42),k=r(149),j=r(102),R=r(78),$=r(150),V=r(56),H=r(30),Y=r(33),Q=r(119),W=r(92),I=r(117),z=r(120),K=r(164),q=r(168).set,ce=r(210),ke=r(213),Oe=r(214),ze=r(170),Ie=r(215),Pe=r(58),le=r(95),ye=r(28),Me=r(216),We=r(128),je=r(70),it=ye("species"),bt="Promise",Mt=Pe.getterFor(bt),Yt=Pe.set,Ce=Pe.getterFor(bt),ge=P&&P.prototype,Se=P,ht=ge,zt=w.TypeError,Ot=w.document,rn=w.process,yn=ze.f,Tn=yn,pn=!!(Ot&&Ot.createEvent&&w.dispatchEvent),ft=H(w.PromiseRejectionEvent),xn="unhandledrejection",$e=!1,mn=le(bt,function(){var De=W(Se),at=De!==String(Se);if(!at&&je===66||b&&!ht.finally)return!0;if(je>=51&&/native code/.test(De))return!1;var en=new Se(function(Nn){Nn(1)}),qt=function(Nn){Nn(function(){},function(){})};return(en.constructor={})[it]=qt,!($e=en.then(function(){})instanceof qt)||!at&&Me&&!ft}),Kn=mn||!z(function(De){Se.all(De).catch(function(){})}),ne=function(De){var at;return!(!Y(De)||!H(at=De.then))&&at},$n=function(De,at){if(!De.notified){De.notified=!0;var en=De.reactions;ce(function(){for(var qt=De.value,Nn=De.state==1,_r=0;en.length>_r;){var oi,mi,Go,qo=en[_r++],Sn=Nn?qo.ok:qo.fail,Bn=qo.resolve,Xn=qo.reject,ir=qo.domain;try{Sn?(Nn||(De.rejection===2&&jn(De),De.rejection=1),Sn===!0?oi=qt:(ir&&ir.enter(),oi=Sn(qt),ir&&(ir.exit(),Go=!0)),oi===qo.promise?Xn(zt("Promise-chain cycle")):(mi=ne(oi))?S(mi,oi,Bn,Xn):Bn(oi)):Xn(qt)}catch(Kr){ir&&!Go&&ir.exit(),Xn(Kr)}}De.reactions=[],De.notified=!1,at&&!De.rejection&&Ur(De)})}},xr=function(De,at,en){var qt,Nn;pn?((qt=Ot.createEvent("Event")).promise=at,qt.reason=en,qt.initEvent(De,!1,!0),w.dispatchEvent(qt)):qt={promise:at,reason:en},!ft&&(Nn=w["on"+De])?Nn(qt):De===xn&&Oe("Unhandled promise rejection",en)},Ur=function(De){S(q,w,function(){var at,en=De.facade,qt=De.value;if(no(De)&&(at=Ie(function(){We?rn.emit("unhandledRejection",qt,en):xr(xn,en,qt)}),De.rejection=We||no(De)?2:1,at.error))throw at.value})},no=function(De){return De.rejection!==1&&!De.parent},jn=function(De){S(q,w,function(){var at=De.facade;We?rn.emit("rejectionHandled",at):xr("rejectionhandled",at,De.value)})},Co=function(De,at,en){return function(qt){De(at,qt,en)}},Ee=function(De,at,en){De.done||(De.done=!0,en&&(De=en),De.value=at,De.state=2,$n(De,!0))},Ke=function(De,at,en){if(!De.done){De.done=!0,en&&(De=en);try{if(De.facade===at)throw zt("Promise can't be resolved itself");var qt=ne(at);qt?ce(function(){var Nn={done:!1};try{S(qt,at,Co(Ke,Nn,De),Co(Ee,Nn,De))}catch(_r){Ee(Nn,_r,De)}}):(De.value=at,De.state=1,$n(De,!1))}catch(Nn){Ee({done:!1},Nn,De)}}};if(mn&&(ht=(Se=function(De){Q(this,ht),V(De),S(s,this);var at=Mt(this);try{De(Co(Ke,at),Co(Ee,at))}catch(en){Ee(at,en)}}).prototype,(s=function(De){Yt(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=k(ht,{then:function(De,at){var en=Ce(this),qt=en.reactions,Nn=yn(K(this,Se));return Nn.ok=!H(De)||De,Nn.fail=H(at)&&at,Nn.domain=We?rn.domain:void 0,en.parent=!0,qt[qt.length]=Nn,en.state!=0&&$n(en,!1),Nn.promise},catch:function(De){return this.then(void 0,De)}}),c=function(){var De=new s,at=Mt(De);this.promise=De,this.resolve=Co(Ke,at),this.reject=Co(Ee,at)},ze.f=yn=function(De){return De===Se||De===h?new c(De):Tn(De)},!b&&H(P)&&ge!==Object.prototype)){v=ge.then,$e||(A(ge,"then",function(De,at){var en=this;return new Se(function(qt,Nn){S(v,en,qt,Nn)}).then(De,at)},{unsafe:!0}),A(ge,"catch",ht.catch,{unsafe:!0}));try{delete ge.constructor}catch{}j&&j(ge,ht)}g({global:!0,wrap:!0,forced:mn},{Promise:Se}),R(Se,bt,!1,!0),$(bt),h=O(bt),g({target:bt,stat:!0,forced:mn},{reject:function(De){var at=yn(this);return S(at.reject,void 0,De),at.promise}}),g({target:bt,stat:!0,forced:b||mn},{resolve:function(De){return ke(b&&this===h?Se:this,De)}}),g({target:bt,stat:!0,forced:Kn},{all:function(De){var at=this,en=yn(at),qt=en.resolve,Nn=en.reject,_r=Ie(function(){var oi=V(at.resolve),mi=[],Go=0,qo=1;I(De,function(Sn){var Bn=Go++,Xn=!1;qo++,S(oi,at,Sn).then(function(ir){Xn||(Xn=!0,mi[Bn]=ir,--qo||qt(mi))},Nn)}),--qo||qt(mi)});return _r.error&&Nn(_r.value),en.promise},race:function(De){var at=this,en=yn(at),qt=en.reject,Nn=Ie(function(){var _r=V(at.resolve);I(De,function(oi){S(_r,at,oi).then(en.resolve,qt)})});return Nn.error&&qt(Nn.value),en.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,h,v,g,b,w,O,S=r(7),P=r(64),A=r(50).f,k=r(168).set,j=r(169),R=r(211),$=r(212),V=r(128),H=S.MutationObserver||S.WebKitMutationObserver,Y=S.document,Q=S.process,W=S.Promise,I=A(S,"queueMicrotask"),z=I&&I.value;z||(s=function(){var K,q;for(V&&(K=Q.domain)&&K.exit();c;){q=c.fn,c=c.next;try{q()}catch(ce){throw c?v():h=void 0,ce}}h=void 0,K&&K.enter()},j||V||$||!H||!Y?!R&&W&&W.resolve?((w=W.resolve(void 0)).constructor=W,O=P(w.then,w),v=function(){O(s)}):V?v=function(){Q.nextTick(s)}:(k=P(k,S),v=function(){k(s)}):(g=!0,b=Y.createTextNode(""),new H(s).observe(b,{characterData:!0}),v=function(){b.data=g=!g})),n.exports=z||function(K){var q={fn:K,next:void 0};h&&(h.next=q),c||(c=q,v()),h=q}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),h=r(170);n.exports=function(v,g){if(s(v),c(g)&&g.constructor===v)return g;var b=h.f(v);return(0,b.resolve)(g),b.promise}},function(n,o,r){var s=r(7);n.exports=function(c,h){var v=s.console;v&&v.error&&(arguments.length==1?v.error(c):v.error(c,h))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),h=r(45);n.exports=function(v){for(var g=s(this),b=h(g),w=arguments.length,O=c(w>1?arguments[1]:void 0,b),S=w>2?arguments[2]:void 0,P=S===void 0?b:c(S,b);P>O;)g[O++]=v;return g}},function(n,o,r){var s=r(16),c=r(7),h=r(15),v=r(59),g=r(160),b=r(219),w=r(18),O=c.RangeError,S=c.String,P=Math.floor,A=h(b),k=h("".slice),j=h(1 .toFixed),R=function(Y,Q,W){return Q===0?W:Q%2==1?R(Y,Q-1,W*Y):R(Y*Y,Q/2,W)},$=function(Y,Q,W){for(var I=-1,z=W;++I<6;)z+=Q*Y[I],Y[I]=z%1e7,z=P(z/1e7)},V=function(Y,Q){for(var W=6,I=0;--W>=0;)I+=Y[W],Y[W]=P(I/Q),I=I%Q*1e7},H=function(Y){for(var Q=6,W="";--Q>=0;)if(W!==""||Q===0||Y[Q]!==0){var I=S(Y[Q]);W=W===""?I:W+A("0",7-I.length)+I}return W};s({target:"Number",proto:!0,forced:w(function(){return j(8e-5,3)!=="0.000"||j(.9,0)!=="1"||j(1.255,2)!=="1.25"||j(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!w(function(){j({})})},{toFixed:function(Y){var Q,W,I,z,K=g(this),q=v(Y),ce=[0,0,0,0,0,0],ke="",Oe="0";if(q<0||q>20)throw O("Incorrect fraction digits");if(K!=K)return"NaN";if(K<=-1e21||K>=1e21)return S(K);if(K<0&&(ke="-",K=-K),K>1e-21)if(W=(Q=function(ze){for(var Ie=0,Pe=ze;Pe>=4096;)Ie+=12,Pe/=4096;for(;Pe>=2;)Ie+=1,Pe/=2;return Ie}(K*R(2,69,1))-69)<0?K*R(2,-Q,1):K/R(2,Q,1),W*=4503599627370496,(Q=52-Q)>0){for($(ce,0,W),I=q;I>=7;)$(ce,1e7,0),I-=7;for($(ce,R(10,I,1),0),I=Q-1;I>=23;)V(ce,1<<23),I-=23;V(ce,1<<I),$(ce,1,1),V(ce,2),Oe=H(ce)}else $(ce,0,W),$(ce,1<<-Q,0),Oe=H(ce)+A("0",q);return Oe=q>0?ke+((z=Oe.length)<=q?"0."+A("0",q-z)+Oe:k(Oe,0,z-q)+"."+k(Oe,z-q)):ke+Oe}})},function(n,o,r){var s=r(7),c=r(59),h=r(39),v=r(44),g=s.RangeError;n.exports=function(b){var w=h(v(this)),O="",S=c(b);if(S<0||S==1/0)throw g("Wrong number of repetitions");for(;S>0;(S>>>=1)&&(w+=w))1&S&&(O+=w);return O}},function(n,o,r){var s=r(36),c=r(15),h=r(77),v=r(41),g=c(r(84).f),b=c([].push),w=function(O){return function(S){for(var P,A=v(S),k=h(A),j=k.length,R=0,$=[];j>R;)P=k[R++],s&&!g(A,P)||b($,O?[P,A[P]]:A[P]);return $}};n.exports={entries:w(!0),values:w(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return ps}),r.d(o,"LogicFlow",function(){return p1}),r.d(o,"h",function(){return $e.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return vf}),r.d(o,"RectNode",function(){return o0}),r.d(o,"CircleNode",function(){return u0}),r.d(o,"PolygonNode",function(){return p0}),r.d(o,"DiamondNode",function(){return m0}),r.d(o,"EllipseNode",function(){return E0}),r.d(o,"TextNode",function(){return S0}),r.d(o,"HtmlNode",function(){return P0}),r.d(o,"BaseEdge",function(){return sy}),r.d(o,"LineEdge",function(){return V0}),r.d(o,"PolylineEdge",function(){return Y0}),r.d(o,"BezierEdge",function(){return J0}),r.d(o,"Arrow",function(){return ij}),r.d(o,"BaseEdgeModel",function(){return gd}),r.d(o,"BezierEdgeModel",function(){return c_}),r.d(o,"LineEdgeModel",function(){return Di}),r.d(o,"PolylineEdgeModel",function(){return sf}),r.d(o,"BaseNodeModel",function(){return hf}),r.d(o,"CircleNodeModel",function(){return y_}),r.d(o,"DiamondNodeModel",function(){return w_}),r.d(o,"EllipseNodeModel",function(){return S_}),r.d(o,"PolygonNodeModel",function(){return k_}),r.d(o,"RectNodeModel",function(){return j_}),r.d(o,"TextNodeModel",function(){return $_}),r.d(o,"HtmlNodeModel",function(){return G_}),r.d(o,"EditConfigModel",function(){return Zf}),r.d(o,"GraphModel",function(){return WE}),r.d(o,"SnaplineModel",function(){return Mx}),r.d(o,"Keyboard",function(){return hS}),r.d(o,"get",function(){return hO}),r.d(o,"defaults",function(){return yO}),r.d(o,"ElementState",function(){return zr}),r.d(o,"ModelType",function(){return Er}),r.d(o,"ElementType",function(){return ao}),r.d(o,"EventType",function(){return kn}),r.d(o,"formateAnchorConnectValidateData",function(){return Kl});var s={};r.r(s),r.d(s,"createUuid",function(){return tl}),r.d(s,"refreshGraphId",function(){return Su}),r.d(s,"StepDrag",function(){return ee}),r.d(s,"setupEdgeModel",function(){return _t}),r.d(s,"isBboxOverLapping",function(){return He}),r.d(s,"filterRepeatPoints",function(){return lt}),r.d(s,"getSimplePolyline",function(){return Ft}),r.d(s,"getExpandedBBox",function(){return Kt}),r.d(s,"pointDirection",function(){return xt}),r.d(s,"getExpandedBBoxPoint",function(){return Jt}),r.d(s,"mergeBBox",function(){return At}),r.d(s,"getBBoxOfPoints",function(){return Wt}),r.d(s,"getPointsFromBBox",function(){return wt}),r.d(s,"isPointOutsideBBox",function(){return Xt}),r.d(s,"getBBoxXCrossPoints",function(){return Mn}),r.d(s,"getBBoxYCrossPoints",function(){return Wn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return Lt}),r.d(s,"estimateDistance",function(){return Tt}),r.d(s,"costByPoints",function(){return Et}),r.d(s,"heuristicCostEstimate",function(){return Cn}),r.d(s,"rebuildPath",function(){return nr}),r.d(s,"removeClosePointFromOpenList",function(){return un}),r.d(s,"isSegmentsIntersected",function(){return Qn}),r.d(s,"isSegmentCrossingBBox",function(){return Vn}),r.d(s,"getNextNeighborPoints",function(){return rr}),r.d(s,"pathFinder",function(){return gr}),r.d(s,"getBoxByOriginNode",function(){return Po}),r.d(s,"pointFilter",function(){return Bo}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return Wo}),r.d(s,"isSegmentsInNode",function(){return to}),r.d(s,"isSegmentsCrossNode",function(){return No}),r.d(s,"getCrossPointInRect",function(){return Uo}),r.d(s,"segmentDirection",function(){return Eo}),r.d(s,"points2PointsList",function(){return mo}),r.d(s,"getSimplePoints",function(){return ni}),r.d(s,"getBytesLength",function(){return Zn}),r.d(s,"getTextWidth",function(){return Nr}),r.d(s,"getAppendAttributes",function(){return Rn}),r.d(s,"getBezierControlPoints",function(){return fr}),r.d(s,"getBezierPoints",function(){return zn}),r.d(s,"getEndTangent",function(){return La}),r.d(s,"getClosestPointOfPolyline",function(){return Ql}),r.d(s,"pickEdgeConfig",function(){return ve}),r.d(s,"twoPointDistance",function(){return rt}),r.d(s,"createEdgeGenerator",function(){return Je}),r.d(s,"snapToGrid",function(){return El}),r.d(s,"getGridOffset",function(){return Is}),r.d(s,"sampleCubic",function(){return be}),r.d(s,"getThetaOfVector",function(){return dt}),r.d(s,"degrees",function(){return Qe}),r.d(s,"Vector",function(){return J}),r.d(s,"Point",function(){return de}),r.d(s,"Matrix",function(){return Ks}),r.d(s,"RotateMatrix",function(){return Mp}),r.d(s,"ScaleMatrix",function(){return Qv}),r.d(s,"TranslateMatrix",function(){return Zs});var c=r(1),h=r(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var v=r(43),g=Object(v.b)("observerBatching");function b(a){a()}var w=!1;function O(){return w}function S(a){return Object(c.t)(a)}var P,A=1e4,k=new Set;function j(){P===void 0&&(P=setTimeout(R,1e4))}function R(){P=void 0;var a=Date.now();k.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,k.delete(i))}),k.size>0&&j()}var $=!1,V=[],H={};function Y(a){return"observer"+a}function Q(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=H),O();var u,p=function(N){return function(){$?V.push(N):N()}}((l.useForceUpdate||v.d)()),f=h.d.useRef(null);if(!f.current){var y=new c.c(Y(i),function(){_.mounted?p():(y.dispose(),f.current=null)}),_=function(N){return{cleanAt:Date.now()+A,reaction:N}}(y);f.current=_,u=f,k.add(u),j()}var x=f.current.reaction;return h.d.useDebugValue(x,S),h.d.useEffect(function(){var N;return N=f,k.delete(N),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(Y(i),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(N){$=!0,V=[];try{var L=N();$=!1;var X=V.length>0?V:void 0;return h.d.useLayoutEffect(function(){X&&X.forEach(function(Z){return Z()})},[X]),L}finally{$=!1}}(function(){var N,L;if(x.track(function(){try{N=a()}catch(X){L=X}}),L)throw L;return N})}var W=function(){return W=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var p in i=arguments[l])Object.prototype.hasOwnProperty.call(i,p)&&(a[p]=i[p]);return a},W.apply(this,arguments)};function I(a,i){var l,u,p,f=W({forwardRef:!1},i),y=a.displayName||a.name,_=function(x,N){return Q(function(){return a(x,N)},y)};return _.displayName=y,l=f.forwardRef?Object(h.f)(Object(h.e)(_)):Object(h.f)(_),u=a,p=l,Object.keys(u).forEach(function(x){z[x]||Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(u,x))}),l.displayName=y,l}var z={$$typeof:!0,render:!0,compare:!0,type:!0};function K(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:Q(u)}function q(a,i,l,u,p){var f=i==="children"?"render":"children",y=typeof a[i]=="function",_=typeof a[f]=="function";return y&&_?new Error("MobX Observer: Do not use children and render in the same time in`"+l):y||_?null:new Error("Invalid prop `"+p+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}K.propTypes={children:q,render:q},K.displayName="Observer";var ce;(ce=h.g)||(ce=b),Object(c.n)({reactionScheduler:ce}),Object(v.a)()[g]=!0;var ke=0,Oe={};function ze(a){return Oe[a]||(Oe[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+ke+")";return ke++,l}(a)),Oe[a]}function Ie(a,i){if(Pe(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var p=0;p<l.length;p++)if(!Object.hasOwnProperty.call(i,l[p])||!Pe(a[l[p]],i[l[p]]))return!1;return!0}function Pe(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function le(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var ye=ze("patchMixins"),Me=ze("patchedDefinition");function We(a,i){for(var l=this,u=arguments.length,p=new Array(u>2?u-2:0),f=2;f<u;f++)p[f-2]=arguments[f];i.locks++;try{var y;return a!=null&&(y=a.apply(this,p)),y}finally{i.locks--,i.locks===0&&i.methods.forEach(function(_){_.apply(l,p)})}}function je(a,i){return function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];We.call.apply(We,[this,a,i].concat(u))}}function it(a,i,l){var u=function(_,x){var N=_[ye]=_[ye]||{},L=N[x]=N[x]||{};return L.locks=L.locks||0,L.methods=L.methods||[],L}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var p=Object.getOwnPropertyDescriptor(a,i);if(!p||!p[Me]){var f=a[i],y=bt(a,i,p?p.enumerable:void 0,u,f);Object.defineProperty(a,i,y)}}function bt(a,i,l,u,p){var f,y=je(p,u);return(f={})[Me]=!0,f.get=function(){return y},f.set=function(_){if(this===a)y=je(_,u);else{var x=bt(this,i,l,u,_);Object.defineProperty(this,i,x)}},f.configurable=!0,f.enumerable=l,f}var Mt=c.a||"$mobx",Yt=ze("isMobXReactObserver"),Ce=ze("isUnmounted"),ge=ze("skipRender"),Se=ze("isForcingUpdate");function ht(a){var i=a.prototype;if(a[Yt]?zt(i):a[Yt]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==h.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=rn;yn(i,"props"),yn(i,"state");var l=i.render;return i.render=function(){return Ot.call(this,l)},it(i,"componentWillUnmount",function(){var u;(u=this.render[Mt])===null||u===void 0||u.dispose(),this[Ce]=!0,!this.render[Mt]&&zt(this)}),a}function zt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function Ot(a){var i=this;le(this,ge,!1),le(this,Se,!1);var l=zt(this),u=a.bind(this),p=!1,f=new c.c(l+".render()",function(){if(!p&&(p=!0,i[Ce]!==!0)){var _=!0;try{le(i,Se,!0),i[ge]||h.a.prototype.forceUpdate.call(i),_=!1}finally{le(i,Se,!1),_&&f.dispose()}}});function y(){p=!1;var _=void 0,x=void 0;if(f.track(function(){try{x=Object(c.d)(!1,u)}catch(N){_=N}}),_)throw _;return x}return f.reactComponent=this,y[Mt]=f,this.render=y,y.call(this)}function rn(a,i){return this.state!==i||!Ie(this.props,a)}function yn(a,i){var l=ze("reactProp_"+i+"_valueHolder"),u=ze("reactProp_"+i+"_atomHolder");function p(){return this[u]||le(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[Se]||Ie(this[l],f)?le(this,l,f):(le(this,l,f),le(this,ge,!0),p.call(this).reportChanged(),le(this,ge,!1))}})}var Tn=typeof Symbol=="function"&&Symbol.for,pn=Tn?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(a){return null}).$$typeof,ft=Tn?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(a){return null}).$$typeof;function xn(a){if(a.isMobxInjector,ft&&a.$$typeof===ft)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&a.$$typeof===pn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var l=arguments;return Object(h.c)(K,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(h.a,a)?ht(a):I(a)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var $e=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var mn=function(a,i){for(var l=-1,u=a==null?0:a.length,p=Array(u);++l<u;)p[l]=i(a[l],l,a);return p},Kn=function(){this.__data__=[],this.size=0},ne=function(a,i){return a===i||a!=a&&i!=i},$n=function(a,i){for(var l=a.length;l--;)if(ne(a[l][0],i))return l;return-1},xr=Array.prototype.splice,Ur=function(a){var i=this.__data__,l=$n(i,a);return!(l<0)&&(l==i.length-1?i.pop():xr.call(i,l,1),--this.size,!0)},no=function(a){var i=this.__data__,l=$n(i,a);return l<0?void 0:i[l][1]},jn=function(a){return $n(this.__data__,a)>-1},Co=function(a,i){var l=this.__data__,u=$n(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function Ee(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Ee.prototype.clear=Kn,Ee.prototype.delete=Ur,Ee.prototype.get=no,Ee.prototype.has=jn,Ee.prototype.set=Co;var Ke=Ee,De=function(){this.__data__=new Ke,this.size=0},at=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},en=function(a){return this.__data__.get(a)},qt=function(a){return this.__data__.has(a)},Nn=r(31),_r=Nn.a.Symbol,oi=Object.prototype,mi=oi.hasOwnProperty,Go=oi.toString,qo=_r?_r.toStringTag:void 0,Sn=function(a){var i=mi.call(a,qo),l=a[qo];try{a[qo]=void 0;var u=!0}catch{}var p=Go.call(a);return u&&(i?a[qo]=l:delete a[qo]),p},Bn=Object.prototype.toString,Xn=function(a){return Bn.call(a)},ir=_r?_r.toStringTag:void 0,Kr=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":ir&&ir in Object(a)?Sn(a):Xn(a)},Rr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},fl,Ga=function(a){if(!Rr(a))return!1;var i=Kr(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},dl=Nn.a["__core-js_shared__"],lu=(fl=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||""))?"Symbol(src)_1."+fl:"",zd=function(a){return!!lu&&lu in a},mc=Function.prototype.toString,da=function(a){if(a!=null){try{return mc.call(a)}catch{}try{return a+""}catch{}}return""},Wu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,Df=Object.prototype,vo=Pn.toString,gc=Df.hasOwnProperty,qi=RegExp("^"+vo.call(gc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=function(a){return!(!Rr(a)||zd(a))&&(Ga(a)?qi:Wu).test(da(a))},Es=function(a,i){return a==null?void 0:a[i]},Aa=function(a,i){var l=Es(a,i);return ta(l)?l:void 0},pa=Aa(Nn.a,"Map"),Ta=Aa(Object,"create"),bc=function(){this.__data__=Ta?Ta(null):{},this.size=0},_c=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},Cf=Object.prototype.hasOwnProperty,zu=function(a){var i=this.__data__;if(Ta){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return Cf.call(i,a)?i[a]:void 0},jf=Object.prototype.hasOwnProperty,wc=function(a){var i=this.__data__;return Ta?i[a]!==void 0:jf.call(i,a)},Hd=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=Ta&&i===void 0?"__lodash_hash_undefined__":i,this};function Cl(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Cl.prototype.clear=bc,Cl.prototype.delete=_c,Cl.prototype.get=zu,Cl.prototype.has=wc,Cl.prototype.set=Hd;var If=Cl,pl=function(){this.size=0,this.__data__={hash:new If,map:new(pa||Ke),string:new If}},Ec=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Os=function(a,i){var l=a.__data__;return Ec(i)?l[typeof i=="string"?"string":"hash"]:l.map},Oc=function(a){var i=Os(this,a).delete(a);return this.size-=i?1:0,i},xc=function(a){return Os(this,a).get(a)},Xd=function(a){return Os(this,a).has(a)},Lf=function(a,i){var l=Os(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function Wr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Wr.prototype.clear=pl,Wr.prototype.delete=Oc,Wr.prototype.get=xc,Wr.prototype.has=Xd,Wr.prototype.set=Lf;var Gr=Wr,Ff=function(a,i){var l=this.__data__;if(l instanceof Ke){var u=l.__data__;if(!pa||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new Gr(u)}return l.set(a,i),this.size=l.size,this};function uu(a){var i=this.__data__=new Ke(a);this.size=i.size}uu.prototype.clear=De,uu.prototype.delete=at,uu.prototype.get=en,uu.prototype.has=qt,uu.prototype.set=Ff;var ha=uu,xs=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},$f=function(a){return this.__data__.has(a)};function jo(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new Gr;++i<l;)this.add(a[i])}jo.prototype.add=jo.prototype.push=xs,jo.prototype.has=$f;var jl=jo,Il=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Ss=function(a,i){return a.has(i)},su=function(a,i,l,u,p,f){var y=1&l,_=a.length,x=i.length;if(_!=x&&!(y&&x>_))return!1;var N=f.get(a),L=f.get(i);if(N&&L)return N==i&&L==a;var X=-1,Z=!0,pe=2&l?new jl:void 0;for(f.set(a,i),f.set(i,a);++X<_;){var xe=a[X],Re=i[X];if(u)var et=y?u(Re,xe,X,i,a,f):u(xe,Re,X,a,i,f);if(et!==void 0){if(et)continue;Z=!1;break}if(pe){if(!Il(i,function(tt,yt){if(!Ss(pe,yt)&&(xe===tt||p(xe,tt,l,u,f)))return pe.push(yt)})){Z=!1;break}}else if(xe!==Re&&!p(xe,Re,l,u,f)){Z=!1;break}}return f.delete(a),f.delete(i),Z},gi=Nn.a.Uint8Array,Sc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,p){l[++i]=[p,u]}),l},Bf=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Ac=_r?_r.prototype:void 0,ji=Ac?Ac.valueOf:void 0,ii=function(a,i,l,u,p,f,y){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!f(new gi(a),new gi(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ne(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var _=Sc;case"[object Set]":var x=1&u;if(_||(_=Bf),a.size!=i.size&&!x)return!1;var N=y.get(a);if(N)return N==i;u|=2,y.set(a,i);var L=su(_(a),_(i),u,p,f,y);return y.delete(a),L;case"[object Symbol]":if(ji)return ji.call(a)==ji.call(i)}return!1},na=function(a,i){for(var l=-1,u=i.length,p=a.length;++l<u;)a[p+l]=i[l];return a},ro=Array.isArray,Uf=function(a,i,l){var u=i(a);return ro(a)?u:na(u,l(a))},Ii=function(a,i){for(var l=-1,u=a==null?0:a.length,p=0,f=[];++l<u;){var y=a[l];i(y,l,a)&&(f[p++]=y)}return f},Tc=function(){return[]},Gf=Object.prototype.propertyIsEnumerable,Li=Object.getOwnPropertySymbols,Ni=Li?function(a){return a==null?[]:(a=Object(a),Ii(Li(a),function(i){return Gf.call(a,i)}))}:Tc,Mc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},Lr=function(a){return a!=null&&typeof a=="object"},ai=function(a){return Lr(a)&&Kr(a)=="[object Arguments]"},As=Object.prototype,Vf=As.hasOwnProperty,Pc=As.propertyIsEnumerable,Ts=ai(function(){return arguments}())?ai:function(a){return Lr(a)&&Vf.call(a,"callee")&&!Pc.call(a,"callee")},Va=Ts,Fi=r(48),cu=/^(?:0|[1-9]\d*)$/,Ki=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&cu.test(a))&&a>-1&&a%1==0&&a<i},va=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Tr={};Tr["[object Float32Array]"]=Tr["[object Float64Array]"]=Tr["[object Int8Array]"]=Tr["[object Int16Array]"]=Tr["[object Int32Array]"]=Tr["[object Uint8Array]"]=Tr["[object Uint8ClampedArray]"]=Tr["[object Uint16Array]"]=Tr["[object Uint32Array]"]=!0,Tr["[object Arguments]"]=Tr["[object Array]"]=Tr["[object ArrayBuffer]"]=Tr["[object Boolean]"]=Tr["[object DataView]"]=Tr["[object Date]"]=Tr["[object Error]"]=Tr["[object Function]"]=Tr["[object Map]"]=Tr["[object Number]"]=Tr["[object Object]"]=Tr["[object RegExp]"]=Tr["[object Set]"]=Tr["[object String]"]=Tr["[object WeakMap]"]=!1;var $i=function(a){return Lr(a)&&va(a.length)&&!!Tr[Kr(a)]},Ma=function(a){return function(i){return a(i)}},di=r(49),fu=di.a&&di.a.isTypedArray,Ll=fu?Ma(fu):$i,Pa=Object.prototype.hasOwnProperty,co=function(a,i){var l=ro(a),u=!l&&Va(a),p=!l&&!u&&Object(Fi.a)(a),f=!l&&!u&&!p&&Ll(a),y=l||u||p||f,_=y?Mc(a.length,String):[],x=_.length;for(var N in a)!i&&!Pa.call(a,N)||y&&(N=="length"||p&&(N=="offset"||N=="parent")||f&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Ki(N,x))||_.push(N);return _},Hu=Object.prototype,Wa=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Hu)},ya=function(a,i){return function(l){return a(i(l))}},Nc=ya(Object.keys,Object),Yd=Object.prototype.hasOwnProperty,kc=function(a){if(!Wa(a))return Nc(a);var i=[];for(var l in Object(a))Yd.call(a,l)&&l!="constructor"&&i.push(l);return i},Vo=function(a){return a!=null&&va(a.length)&&!Ga(a)},Fl=function(a){return Vo(a)?co(a):kc(a)},za=function(a){return Uf(a,Fl,Ni)},Ko=Object.prototype.hasOwnProperty,Rc=function(a,i,l,u,p,f){var y=1&l,_=za(a),x=_.length;if(x!=za(i).length&&!y)return!1;for(var N=x;N--;){var L=_[N];if(!(y?L in i:Ko.call(i,L)))return!1}var X=f.get(a),Z=f.get(i);if(X&&Z)return X==i&&Z==a;var pe=!0;f.set(a,i),f.set(i,a);for(var xe=y;++N<x;){var Re=a[L=_[N]],et=i[L];if(u)var tt=y?u(et,Re,L,i,a,f):u(Re,et,L,a,i,f);if(!(tt===void 0?Re===et||p(Re,et,l,u,f):tt)){pe=!1;break}xe||(xe=L=="constructor")}if(pe&&!xe){var yt=a.constructor,Bt=i.constructor;yt==Bt||!("constructor"in a)||!("constructor"in i)||typeof yt=="function"&&yt instanceof yt&&typeof Bt=="function"&&Bt instanceof Bt||(pe=!1)}return f.delete(a),f.delete(i),pe},ra=Aa(Nn.a,"DataView"),ma=Aa(Nn.a,"Promise"),Ms=Aa(Nn.a,"Set"),Bi=Aa(Nn.a,"WeakMap"),Zi="[object Map]",li="[object Promise]",oa="[object Set]",ki="[object WeakMap]",ut="[object DataView]",jt=da(ra),$t=da(pa),fn=da(ma),ur=da(Ms),Mr=da(Bi),fo=Kr;(ra&&fo(new ra(new ArrayBuffer(1)))!=ut||pa&&fo(new pa)!=Zi||ma&&fo(ma.resolve())!=li||Ms&&fo(new Ms)!=oa||Bi&&fo(new Bi)!=ki)&&(fo=function(a){var i=Kr(a),l=i=="[object Object]"?a.constructor:void 0,u=l?da(l):"";if(u)switch(u){case jt:return ut;case $t:return Zi;case fn:return li;case ur:return oa;case Mr:return ki}return i});var T=fo,M="[object Arguments]",U="[object Array]",te="[object Object]",me=Object.prototype.hasOwnProperty,Ve=function(a,i,l,u,p,f){var y=ro(a),_=ro(i),x=y?U:T(a),N=_?U:T(i),L=(x=x==M?te:x)==te,X=(N=N==M?te:N)==te,Z=x==N;if(Z&&Object(Fi.a)(a)){if(!Object(Fi.a)(i))return!1;y=!0,L=!1}if(Z&&!L)return f||(f=new ha),y||Ll(a)?su(a,i,l,u,p,f):ii(a,i,x,l,u,p,f);if(!(1&l)){var pe=L&&me.call(a,"__wrapped__"),xe=X&&me.call(i,"__wrapped__");if(pe||xe){var Re=pe?a.value():a,et=xe?i.value():i;return f||(f=new ha),p(Re,et,l,u,f)}}return!!Z&&(f||(f=new ha),Rc(a,i,l,u,p,f))},vt=function a(i,l,u,p,f){return i===l||(i==null||l==null||!Lr(i)&&!Lr(l)?i!=i&&l!=l:Ve(i,l,u,p,a,f))},Ht=function(a,i,l,u){var p=l.length,f=p,y=!u;if(a==null)return!f;for(a=Object(a);p--;){var _=l[p];if(y&&_[2]?_[1]!==a[_[0]]:!(_[0]in a))return!1}for(;++p<f;){var x=(_=l[p])[0],N=a[x],L=_[1];if(y&&_[2]){if(N===void 0&&!(x in a))return!1}else{var X=new ha;if(u)var Z=u(N,L,x,a,i,X);if(!(Z===void 0?vt(L,N,3,u,X):Z))return!1}}return!0},_n=function(a){return a==a&&!Rr(a)},yr=function(a){for(var i=Fl(a),l=i.length;l--;){var u=i[l],p=a[u];i[l]=[u,p,_n(p)]}return i},ln=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Vr=function(a){var i=yr(a);return i.length==1&&i[0][2]?ln(i[0][0],i[0][1]):function(l){return l===a||Ht(l,a,i)}},pr=function(a){return typeof a=="symbol"||Lr(a)&&Kr(a)=="[object Symbol]"},Cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ia=/^\w*$/,bo=function(a,i){if(ro(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!pr(a))||ia.test(a)||!Cr.test(a)||i!=null&&a in Object(i)};function Ji(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,p=i?i.apply(this,u):u[0],f=l.cache;if(f.has(p))return f.get(p);var y=a.apply(this,u);return l.cache=f.set(p,y)||f,y};return l.cache=new(Ji.Cache||Gr),l}Ji.Cache=Gr;var hl=Ji,vl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$l=/\\(\\)?/g,du=function(a){var i=hl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(vl,function(l,u,p,f){i.push(p?f.replace($l,"$1"):u||l)}),i}),Ha=_r?_r.prototype:void 0,pu=Ha?Ha.toString:void 0,Zo=function a(i){if(typeof i=="string")return i;if(ro(i))return mn(i,a)+"";if(pr(i))return pu?pu.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},Bl=function(a){return a==null?"":Zo(a)},yl=function(a,i){return ro(a)?a:bo(a,i)?[a]:du(Bl(a))},Xa=function(a){if(typeof a=="string"||pr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},Ya=function(a,i){for(var l=0,u=(i=yl(i,a)).length;a!=null&&l<u;)a=a[Xa(i[l++])];return l&&l==u?a:void 0},Xu=function(a,i,l){var u=a==null?void 0:Ya(a,i);return u===void 0?l:u},oh=function(a,i){return a!=null&&i in Object(a)},ih=function(a,i,l){for(var u=-1,p=(i=yl(i,a)).length,f=!1;++u<p;){var y=Xa(i[u]);if(!(f=a!=null&&l(a,y)))break;a=a[y]}return f||++u!=p?f:!!(p=a==null?0:a.length)&&va(p)&&Ki(y,p)&&(ro(a)||Va(a))},qd=function(a,i){return a!=null&&ih(a,i,oh)},Dc=function(a,i){return bo(a)&&_n(i)?ln(Xa(a),i):function(l){var u=Xu(l,a);return u===void 0&&u===i?qd(l,a):vt(i,u,3)}},Yu=function(a){return a},Wf=function(a){return function(i){return i==null?void 0:i[a]}},ah=function(a){return function(i){return Ya(i,a)}},qu=function(a){return bo(a)?Wf(Xa(a)):ah(a)},Cc=function(a){return typeof a=="function"?a:a==null?Yu:typeof a=="object"?ro(a)?Dc(a[0],a[1]):Vr(a):qu(a)},zf=function(a){return function(i,l,u){for(var p=-1,f=Object(i),y=u(i),_=y.length;_--;){var x=y[a?_:++p];if(l(f[x],x,f)===!1)break}return i}}(),Io=function(a,i){return function(l,u){if(l==null)return l;if(!Vo(l))return a(l,u);for(var p=l.length,f=i?p:-1,y=Object(l);(i?f--:++f<p)&&u(y[f],f,y)!==!1;);return l}}(function(a,i){return a&&zf(a,i,Fl)}),Ui=function(a,i){var l=-1,u=Vo(a)?Array(a.length):[];return Io(a,function(p,f,y){u[++l]=i(p,f,y)}),u},Hf=function(a,i){return(ro(a)?mn:Ui)(a,Cc(i))};Object(c.n)({isolateGlobalState:!0});var Xf=function(){try{var a=Aa(Object,"defineProperty");return a({},"",{}),a}catch{}}(),Ps=function(a,i,l){i=="__proto__"&&Xf?Xf(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Gv=Object.prototype.hasOwnProperty,Ns=function(a,i,l){var u=a[i];Gv.call(a,i)&&ne(u,l)&&(l!==void 0||i in a)||Ps(a,i,l)},ml=function(a,i,l,u){var p=!l;l||(l={});for(var f=-1,y=i.length;++f<y;){var _=i[f],x=u?u(l[_],a[_],_,l,a):void 0;x===void 0&&(x=a[_]),p?Ps(l,_,x):Ns(l,_,x)}return l},jc=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},Ku=Math.max,hu=function(a,i,l){return i=Ku(i===void 0?a.length-1:i,0),function(){for(var u=arguments,p=-1,f=Ku(u.length-i,0),y=Array(f);++p<f;)y[p]=u[i+p];p=-1;for(var _=Array(i+1);++p<i;)_[p]=u[p];return _[i]=l(y),jc(a,this,_)}},ks=function(a){return function(){return a}},Ic=Xf?function(a,i){return Xf(a,"toString",{configurable:!0,enumerable:!1,value:ks(i),writable:!0})}:Yu,vu=Date.now,Vv=function(a){var i=0,l=0;return function(){var u=vu(),p=16-(u-l);if(l=u,p>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},Lc=Vv(Ic),Wv=function(a,i){return Lc(hu(a,i,Yu),a+"")},zv=function(a,i,l){if(!Rr(l))return!1;var u=typeof i;return!!(u=="number"?Vo(l)&&Ki(i,l.length):u=="string"&&i in l)&&ne(l[i],a)},lh=function(a){return Wv(function(i,l){var u=-1,p=l.length,f=p>1?l[p-1]:void 0,y=p>2?l[2]:void 0;for(f=a.length>3&&typeof f=="function"?(p--,f):void 0,y&&zv(l[0],l[1],y)&&(f=p<3?void 0:f,p=1),i=Object(i);++u<p;){var _=l[u];_&&a(i,_,u,f)}return i})},Yf=Object.prototype.hasOwnProperty,Ri=lh(function(a,i){if(Wa(i)||Vo(i))ml(i,Fl(i),a);else for(var l in i)Yf.call(i,l)&&Ns(a,l,i[l])}),uh=function(a,i,l,u){if(!Rr(a))return a;for(var p=-1,f=(i=yl(i,a)).length,y=f-1,_=a;_!=null&&++p<f;){var x=Xa(i[p]),N=l;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(p!=y){var L=_[x];(N=u?u(L,x,_):void 0)===void 0&&(N=Rr(L)?L:Ki(i[p+1])?[]:{})}Ns(_,x,N),_=_[x]}return a},oe=function(a,i,l){for(var u=-1,p=i.length,f={};++u<p;){var y=i[u],_=Ya(a,y);l(_,y)&&uh(f,yl(y,a),_)}return f},Zu=function(a,i){return oe(a,i,function(l,u){return qd(a,u)})},Ul=_r?_r.isConcatSpreadable:void 0,Na=function(a){return ro(a)||Va(a)||!!(Ul&&a&&a[Ul])},Pr=function a(i,l,u,p,f){var y=-1,_=i.length;for(u||(u=Na),f||(f=[]);++y<_;){var x=i[y];l>0&&u(x)?l>1?a(x,l-1,u,p,f):na(f,x):p||(f[f.length]=x)}return f},bi=function(a){return a!=null&&a.length?Pr(a,1):[]},Fr,qa,Gl,ga,qf,Kf,Kd,sh,Vl,Lo,Rs,Zd,Wl,Ka,Fc,yu,ba,Jd,Qd,Za=function(a){return Lc(hu(a,void 0,bi),a+"")}(function(a,i){return a==null?{}:Zu(a,i)});function yo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function ch(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ep(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Fo(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var zr,Jo,Er,ao,kn,lo,$c={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},gl=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Zf=(qa=Fo((Fr=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),yo(this,"isSilentMode",qa,this),yo(this,"stopZoomGraph",Gl,this),yo(this,"stopScrollGraph",ga,this),yo(this,"stopMoveGraph",qf,this),yo(this,"adjustEdge",Kf,this),yo(this,"adjustEdgeMiddle",Kd,this),yo(this,"adjustEdgeStartAndEnd",sh,this),yo(this,"adjustNodePosition",Vl,this),yo(this,"hideAnchors",Lo,this),yo(this,"allowRotation",Rs,this),yo(this,"hoverOutline",Zd,this),yo(this,"nodeSelectedOutline",Wl,this),yo(this,"edgeSelectedOutline",Ka,this),yo(this,"nodeTextEdit",Fc,this),yo(this,"edgeTextEdit",yu,this),yo(this,"nodeTextDraggable",ba,this),yo(this,"edgeTextDraggable",Jd,this),yo(this,"autoExpand",Qd,this),ep(this,"multipleSelectKey",""),ep(this,"defaultConfig",{}),Ri(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var p=this.getConfigDetail(u);Ri(this,p)}},{key:"getConfigDetail",value:function(u){var p=u.isSilentMode,f=u.textEdit,y={};if(p===!1&&Ri(y,this.defaultConfig),p===!0&&p!==this.isSilentMode){var _=Za($c,gl);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Ri(y,_)}f===!1&&Ri(y,{nodeTextEdit:!1,edgeTextEdit:!1});var x=Za(u,gl);return Ri(y,x)}},{key:"getConfig",value:function(){return Za(this,gl)}}])&&ch(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=Fo(Fr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ga=Fo(Fr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qf=Fo(Fr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=Fo(Fr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kd=Fo(Fr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sh=Fo(Fr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vl=Fo(Fr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lo=Fo(Fr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rs=Fo(Fr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zd=Fo(Fr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=Fo(Fr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ka=Fo(Fr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fc=Fo(Fr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yu=Fo(Fr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ba=Fo(Fr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jd=Fo(Fr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qd=Fo(Fr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fo(Fr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Fr.prototype,"updateEditConfig"),Fr.prototype),Fr);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(Jo||(Jo={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(Er||(Er={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(ao||(ao={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(kn||(kn={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(lo||(lo={}));var _o,So,tp,np,Bc,Gi,Jf,Ds,ka;function mu(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return zl(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return zl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ra(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function fh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function bl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _a(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(_o||(_o={}));var rp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},op=(So=function(){function a(u,p){(function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")})(this,a),bl(this,"MINI_SCALE_SIZE",.2),bl(this,"MAX_SCALE_SIZE",16),Ra(this,"SCALE_X",tp,this),Ra(this,"SKEW_Y",np,this),Ra(this,"SKEW_X",Bc,this),Ra(this,"SCALE_Y",Gi,this),Ra(this,"TRANSLATE_X",Jf,this),Ra(this,"TRANSLATE_Y",Ds,this),Ra(this,"ZOOM_SIZE",ka,this),bl(this,"eventCenter",void 0),bl(this,"translateLimitMinX",void 0),bl(this,"translateLimitMinY",void 0),bl(this,"translateLimitMaxX",void 0),bl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=p.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var p=mu(u,2),f=p[0],y=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var p=mu(u,2),f=p[0],y=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,p,f){var y=mu(u,2),_=y[0],x=y[1];return[_+p/this.SCALE_X,x+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,p){return[u/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,y=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(kn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,p){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,p,f,y){var _=mu(this.CanvasPointToHtmlPoint([u,p]),2),x=f/2-_[0],N=y/2-_[1];this.TRANSLATE_X+=x,this.TRANSLATE_Y+=N,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var p=mu(Array.isArray(u)&&u.length===4?u:rp[u.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],l&&fh(i.prototype,l),a}(),tp=_a(So.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),np=_a(So.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bc=_a(So.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gi=_a(So.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Jf=_a(So.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ds=_a(So.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ka=_a(So.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),_a(So.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"zoom"),So.prototype),_a(So.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"resetZoom"),So.prototype),_a(So.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"translate"),So.prototype),_a(So.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"focusOn"),So.prototype),So),Qf=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},dh=function(a,i){return a&&ml(i,Fl(i),a)},ph=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},hh=Object.prototype.hasOwnProperty,ip=function(a){if(!Rr(a))return ph(a);var i=Wa(a),l=[];for(var u in a)(u!="constructor"||!i&&hh.call(a,u))&&l.push(u);return l},Cs=function(a){return Vo(a)?co(a,!0):ip(a)},ap=function(a,i){return a&&ml(i,Cs(i),a)},Uc=r(107),Or=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},Hv=function(a,i){return ml(a,Ni(a),i)},lp=ya(Object.getPrototypeOf,Object),gu=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)na(i,Ni(a)),a=lp(a);return i}:Tc,Gc=function(a,i){return ml(a,gu(a),i)},Xv=function(a){return Uf(a,Cs,gu)},Yv=Object.prototype.hasOwnProperty,Da=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&Yv.call(a,"index")&&(l.index=a.index,l.input=a.input),l},up=function(a){var i=new a.constructor(a.byteLength);return new gi(i).set(new gi(a)),i},ed=function(a,i){var l=i?up(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.byteLength)},td=/\w*$/,vh=function(a){var i=new a.constructor(a.source,td.exec(a));return i.lastIndex=a.lastIndex,i},sp=_r?_r.prototype:void 0,aa=sp?sp.valueOf:void 0,bu=function(a){return aa?Object(aa.call(a)):{}},nd=function(a,i){var l=i?up(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},Ju=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return up(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return ed(a,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nd(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return vh(a);case"[object Symbol]":return bu(a)}},Vc=Object.create,yh=function(){function a(){}return function(i){if(!Rr(i))return{};if(Vc)return Vc(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),Wc=function(a){return typeof a.constructor!="function"||Wa(a)?{}:yh(lp(a))},rd=function(a){return Lr(a)&&T(a)=="[object Map]"},od=di.a&&di.a.isMap,id=od?Ma(od):rd,_u=function(a){return Lr(a)&&T(a)=="[object Set]"},mh=di.a&&di.a.isSet,wu=mh?Ma(mh):_u,cp="[object Arguments]",fp="[object Function]",Qu="[object Object]",po={};po[cp]=po["[object Array]"]=po["[object ArrayBuffer]"]=po["[object DataView]"]=po["[object Boolean]"]=po["[object Date]"]=po["[object Float32Array]"]=po["[object Float64Array]"]=po["[object Int8Array]"]=po["[object Int16Array]"]=po["[object Int32Array]"]=po["[object Map]"]=po["[object Number]"]=po["[object Object]"]=po["[object RegExp]"]=po["[object Set]"]=po["[object String]"]=po["[object Symbol]"]=po["[object Uint8Array]"]=po["[object Uint8ClampedArray]"]=po["[object Uint16Array]"]=po["[object Uint32Array]"]=!0,po["[object Error]"]=po[fp]=po["[object WeakMap]"]=!1;var zc=function a(i,l,u,p,f,y){var _,x=1&l,N=2&l,L=4&l;if(u&&(_=f?u(i,p,f,y):u(i)),_!==void 0)return _;if(!Rr(i))return i;var X=ro(i);if(X){if(_=Da(i),!x)return Or(i,_)}else{var Z=T(i),pe=Z==fp||Z=="[object GeneratorFunction]";if(Object(Fi.a)(i))return Object(Uc.a)(i,x);if(Z==Qu||Z==cp||pe&&!f){if(_=N||pe?{}:Wc(i),!x)return N?Gc(i,ap(_,i)):Hv(i,dh(_,i))}else{if(!po[Z])return f?i:{};_=Ju(i,Z,x)}}y||(y=new ha);var xe=y.get(i);if(xe)return xe;y.set(i,_),wu(i)?i.forEach(function(et){_.add(a(et,l,u,et,i,y))}):id(i)&&i.forEach(function(et,tt){_.set(tt,a(et,l,u,tt,i,y))});var Re=X?void 0:(L?N?Xv:za:N?Cs:Fl)(i);return Qf(Re||i,function(et,tt){Re&&(et=i[tt=et]),Ns(_,tt,a(et,l,u,tt,i,y))}),_},wo=function(a){return zc(a,5)},Hl=function(a,i,l){(l!==void 0&&!ne(a[i],l)||l===void 0&&!(i in a))&&Ps(a,i,l)},pi=function(a){return Lr(a)&&Vo(a)},_l=Function.prototype,Xl=Object.prototype,Eu=_l.toString,es=Xl.hasOwnProperty,ad=Eu.call(Object),ld=function(a){if(!Lr(a)||Kr(a)!="[object Object]")return!1;var i=lp(a);if(i===null)return!0;var l=es.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Eu.call(l)==ad},wl=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ts=function(a){return ml(a,Cs(a))},ud=function(a,i,l,u,p,f,y){var _=wl(a,l),x=wl(i,l),N=y.get(x);if(N)Hl(a,l,N);else{var L=f?f(_,x,l+"",a,i,y):void 0,X=L===void 0;if(X){var Z=ro(x),pe=!Z&&Object(Fi.a)(x),xe=!Z&&!pe&&Ll(x);L=x,Z||pe||xe?ro(_)?L=_:pi(_)?L=Or(_):pe?(X=!1,L=Object(Uc.a)(x,!0)):xe?(X=!1,L=nd(x,!0)):L=[]:ld(x)||Va(x)?(L=_,Va(_)?L=ts(_):Rr(_)&&!Ga(_)||(L=Wc(x))):X=!1}X&&(y.set(x,L),p(L,x,u,f,y),y.delete(x)),Hl(a,l,L)}},Hc=function a(i,l,u,p,f){i!==l&&zf(l,function(y,_){if(f||(f=new ha),Rr(y))ud(i,l,_,u,a,p,f);else{var x=p?p(wl(i,_),y,_+"",i,l,f):void 0;x===void 0&&(x=y),Hl(i,_,x)}},Cs)},Ou=lh(function(a,i,l){Hc(a,i,l)}),dp={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},js=function(a){var i=wo(dp);return a&&(i=Ou(i,a)),i};r(82),r(166);function sd(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var Xc=function(){function a(){var u,p,f;(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),f={},(p="_events")in(u=this)?Object.defineProperty(u,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[p]=f}var i,l;return i=a,(l=[{key:"on",value:function(u,p,f){var y=this;return u==null||u.split(",").forEach(function(_){_=_.trim(),y._events[_]||(y._events[_]=[]),y._events[_].push({callback:p,once:!!f})}),this}},{key:"once",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){return y=y.trim(),f.on(y,p,!0)})}},{key:"emit",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){var _=f._events[y]||[],x=f._events["*"]||[],N=function(L){for(var X=L.length,Z=0;Z<X;Z++)if(L[Z]){var pe=L[Z],xe=pe.callback;pe.once&&(L.splice(Z,1),L.length===0&&delete f._events[y],X--,Z--),xe.apply(f,[p])}};N(_),N(x)})}},{key:"off",value:function(u,p){var f=this;return u||(this._events={}),u.split(",").forEach(function(y){if(p){for(var _=f._events[y]||[],x=_.length,N=0;N<x;N++)_[N].callback===p&&(_.splice(N,1),x--,N--);_.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&sd(i.prototype,l),a}();function El(a,i){return i*Math.round(a/i)||a}function Is(a,i){return a%i}function Yc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qc(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qc(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qc(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var cd=function(a,i,l){var u=Yc(a,2),p=u[0],f=u[1],y=Yc(i,2),_=y[0],x=y[1],N=Yc(l,2),L=N[0],X=N[1];return p>_&&p<L&&f>x&&f<X},fd=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Ja=function(a){return function(i,l,u){var p=Object(i);if(!Vo(i)){var f=Cc(l);i=Fl(i),l=function(_){return f(p[_],_,p)}}var y=a(i,l,u);return y>-1?p[f?i[y]:y]:void 0}},pp=function(a,i,l,u){for(var p=a.length,f=l+(u?1:-1);u?f--:++f<p;)if(i(a[f],f,a))return f;return-1},hp=/\s/,vp=function(a){for(var i=a.length;i--&&hp.test(a.charAt(i)););return i},dd=/^\s+/,Ol=function(a){return a&&a.slice(0,vp(a)+1).replace(dd,"")},Kc=/^[-+]0x[0-9a-f]+$/i,pd=/^0b[01]+$/i,hd=/^0o[0-7]+$/i,Ls=parseInt,Yl=function(a){if(typeof a=="number")return a;if(pr(a))return NaN;if(Rr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Rr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=Ol(a);var l=pd.test(a);return l||hd.test(a)?Ls(a.slice(2),l?2:8):Kc.test(a)?NaN:+a},Jn=1/0,Fs=function(a){return a?(a=Yl(a))===Jn||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},Zc=function(a){var i=Fs(a),l=i%1;return i==i?l?i-l:i:0},Qa=Math.max,$s,Bs=Ja(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var p=l==null?0:Zc(l);return p<0&&(p=Qa(u+p,0)),pp(a,Cc(i),p)}),Ao=new Uint8Array(16);function Us(){if(!$s&&!($s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(Ao)}for(var xu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Jc=function(a){return typeof a=="string"&&xu.test(a)},oo=[],$o=0;$o<256;++$o)oo.push(($o+256).toString(16).substr(1));var ql=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(oo[a[i+0]]+oo[a[i+1]]+oo[a[i+2]]+oo[a[i+3]]+"-"+oo[a[i+4]]+oo[a[i+5]]+"-"+oo[a[i+6]]+oo[a[i+7]]+"-"+oo[a[i+8]]+oo[a[i+9]]+"-"+oo[a[i+10]]+oo[a[i+11]]+oo[a[i+12]]+oo[a[i+13]]+oo[a[i+14]]+oo[a[i+15]]).toLowerCase();if(!Jc(l))throw TypeError("Stringified UUID is invalid");return l},el=function(a,i,l){var u=(a=a||{}).random||(a.rng||Us)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){l=l||0;for(var p=0;p<16;++p)i[l+p]=u[p];return i}return ql(u)},tl=function(){return el()},Su=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,p){return u[p.id]=i+el(),p.id=u[p.id],u},{});return a.edges.forEach(function(u){u.id=i+el(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},xl=(r(105),r(127),r(207),function(a,i,l){var u=a.x,p=a.y,f=i.x,y=i.y,_=l.x,x=l.y,N=(x-y)/(_-f),L=y-N*f;return u>=f&&u<=_&&p>=y&&p<=x&&Math.abs(p-N*u+L)<Number.EPSILON});function Gs(a){return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gs(a)}function Qc(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Au(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Qc(Object(l),!0).forEach(function(u){Vs(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Qc(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Vs(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Dt,yp,ns,ef,vd,mp,Sl,gp,nl,Tu,yd,gh,bh,_h,bp,_p,wp,Ep,wh,Eh,Oh,Vi=function(a){return a.anchors},rs=function(a,i){for(var l,u=i.nodes,p=u.length-1;p>=0;p--){var f=u[p];if(md(a,f)){var y=f.getTargetAnchor(a);if(y){var _={node:f,anchorIndex:y.index,anchor:y.anchor};l&&!tf(f,l.node,i)||(l=_)}}}return l},tf=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},la=function(a,i,l,u){return Math.hypot(a-l,i-u)},Ca=function(a,i){var l=!1,u=Wi(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},md=function(a,i){var l=!1,u=Wi(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Wi=function(a){var i=a.x,l=a.y,u=a.width,p=a.height;return{minX:i-u/2,minY:l-p/2,maxX:i+u/2,maxY:l+p/2,x:i,y:l,width:u,height:p,centerX:i,centerY:l}},nf=function(a,i,l){var u,p=function(y){var _=y,x=_.x,N=_.y,L=_.width,X=_.height,Z=_.radius;return[{x:x-L/2+Z,y:N-X/2+Z,r:Z},{x:x+L/2-Z,y:N-X/2+Z,r:Z},{x:x-L/2+Z,y:N+X/2-Z,r:Z},{x:x+L/2-Z,y:N+X/2-Z,r:Z}]}(l),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(y){var _=la(a.x,a.y,y.x,y.y);_<f&&(f=_,u=y)}),os(a,i,u)},os=function(a,i,l){var u,p=l,f=p.x,y=p.y,_=p.r;if(i===lo.HORIZONTAL){var x=f-Math.sqrt(_*_-(a.y-y)*(a.y-y)),N=f+Math.sqrt(_*_-(a.y-y)*(a.y-y));u={x:Math.abs(x-a.x)<Math.abs(N-a.x)?x:N,y:a.y}}else if(i===lo.VERTICAL){var L=y-Math.sqrt(_*_-(a.x-f)*(a.x-f)),X=y+Math.sqrt(_*_-(a.x-f)*(a.x-f)),Z=Math.abs(L-a.y)<Math.abs(X-a.y)?L:X;u={x:a.x,y:Z}}return u},Ws=function(a,i){var l=i,u=!1,p=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,y=l.y-l.height/2+l.radius,_=l.y+l.height/2-l.radius,x=l.x,N=l.y,L=l.width,X=l.height;return a.y===N+X/2||a.y===N-X/2?u=a.x>p&&a.x<f:a.x!==x+L/2&&a.x!==x-L/2||(u=a.y>y&&a.y<_),u},rf=function(a,i,l){var u,p=l,f=p.x,y=p.y,_=p.rx,x=p.ry;if(i===lo.HORIZONTAL){var N=f-Math.sqrt(_*_-(a.y-y)*(a.y-y)*_*_/(x*x)),L=f+Math.sqrt(_*_-(a.y-y)*(a.y-y)*_*_/(x*x));u={x:Math.abs(N-a.x)<Math.abs(L-a.x)?N:L,y:a.y}}else if(i===lo.VERTICAL){var X=y-Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(_*_)),Z=y+Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(_*_)),pe=Math.abs(X-a.y)<Math.abs(Z-a.y)?X:Z;u={x:a.x,y:pe}}return u},of=function(a,i,l){for(var u,p=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],_=0;_<p.length;_++)y.push({start:p[_],end:p[(_+1)%p.length]});return y.forEach(function(x){var N=x.start,L=x.end,X=N,Z=L;N.x>L.x&&(X=L,Z=N);var pe={x:a.x,y:a.y};if(X.x===Z.x&&i===lo.HORIZONTAL&&(pe={x:X.x,y:a.y}),X.y===Z.y&&i===lo.VERTICAL&&(pe={x:a.x,y:X.y}),X.x!==Z.x&&X.y!==Z.y){var xe=(Z.y-X.y)/(Z.x-X.x),Re=(X.x*Z.y-Z.x*X.y)/(X.x-Z.x);i===lo.HORIZONTAL?pe={x:(a.y-Re)/xe,y:a.y}:i===lo.VERTICAL&&(pe={x:a.x,y:xe*a.x+Re})}if(xl(pe,N,L)){var et=la(pe.x,pe.y,a.x,a.y);et<f&&(f=et,u=pe)}}),u},zs=function(a,i,l,u){var p=a.x,f=a.y;return i.x>a.x?p=a.x+l/2:i.x<a.x&&(p=a.x-l/2),i.y>a.y?f=a.y+u/2:i.y<a.y&&(f=a.y-u/2),{x:p,y:f}},Hs=function(a){var i=a.rows,l=a.style,u=a.rowsLength,p=a.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=p,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?i.forEach(function(_){var x=document.createElement("div");x.textContent=_,f.appendChild(x)}):f.textContent=i,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},is=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,p=0;return i&&i.forEach(function(f){var y=Zn(f);p=y>p?y:p}),{width:Math.ceil(p/2)*u+u/4,height:l*(u+2)+u/4}},Kl=function(a){return Gs(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},Qo=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},af=1e3,lf=999,Zl=function(){return++af};function Op(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function zi(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Op(Object(l),!0).forEach(function(u){ja(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Op(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ei(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function xh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ja(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Fn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var gd=(Dt=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),ja(this,"id",""),ei(this,"type",yp,this),ei(this,"sourceNodeId",ns,this),ei(this,"targetNodeId",ef,this),ei(this,"startPoint",vd,this),ei(this,"endPoint",mp,this),ei(this,"text",Sl,this),ei(this,"properties",gp,this),ei(this,"points",nl,this),ei(this,"pointsList",Tu,this),ei(this,"isSelected",yd,this),ei(this,"isHovered",gh,this),ei(this,"isHitable",bh,this),ei(this,"draggable",_h,this),ei(this,"visible",bp,this),ja(this,"virtual",!1),ei(this,"isAnimation",_p,this),ei(this,"isShowAdjustPoint",wp,this),ja(this,"graphModel",void 0),ei(this,"zIndex",Ep,this),ja(this,"BaseType",ao.EDGE),ja(this,"modelType",Er.EDGE),ei(this,"state",wh,this),ja(this,"additionStateData",void 0),ja(this,"sourceAnchorId",""),ja(this,"targetAnchorId",""),ja(this,"menu",void 0),ja(this,"customTextPosition",!1),ei(this,"style",Eh,this),ei(this,"arrowConfig",Oh,this),this.graphModel=p,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||tl()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var _=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=_,Ri(this,ve(u)),this.graphModel.overlapMode===_o.INCREASE&&(this.zIndex=u.zIndex||Zl()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return zi(zi({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return zi({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return wo(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return wo(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?p.stroke:u.stroke;return zi(zi({},u),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return wo(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,p,f){var y,_,x=Vi(u);return f&&(y=Bs(x,function(N){return N.id===f}))||x.forEach(function(N){var L=rt(N,p);(_===void 0||L<_)&&(_=L,y=N)}),y}},{key:"getEndAnchor",value:function(u,p){var f,y,_=this,x=Vi(u);return p&&(f=Bs(x,function(N){return N.id===p}))||x.forEach(function(N){var L=rt(N,_.startPoint);(y===void 0||L<y)&&(y=L,f=N)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,_={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(_.text={x:p,y:f,value:y}),this.graphModel.overlapMode===_o.INCREASE&&(_.zIndex=this.zIndex),_}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,p){this.properties[u]=Qo(p),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=zi(zi({},Object(c.I)(this.properties)),Qo(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var p=this.arrowConfig,f=p.markerEnd,y=p.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,p){this.style=zi(zi({},this.style),{},ja({},u,Qo(p)))}},{key:"setStyles",value:function(u){this.style=zi(zi({},this.style),Qo(u))}},{key:"updateStyles",value:function(u){this.style=zi({},Qo(u))}},{key:"formatText",value:function(u){var p=this.textPosition,f=p.x,y=p.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||y,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,p=u.x,f=u.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(u,p){if(this.text){var f=this.text,y=f.x,_=f.y,x=f.value,N=f.draggable,L=f.editable;this.text={value:x,draggable:N,x:y+u,y:_+p,editable:L}}}},{key:"setText",value:function(u){u&&Ri(this.text,u)}},{key:"updateText",value:function(u){this.text=zi(zi({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,p){this.startPoint.x+=u,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,p){this.endPoint.x+=u,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Ri(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var p=u.startPoint,f=u.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&xh(i.prototype,l),a}(),yp=Fn(Dt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ns=Fn(Dt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Fn(Dt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vd=Fn(Dt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mp=Fn(Dt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sl=Fn(Dt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),gp=Fn(Dt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),nl=Fn(Dt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tu=Fn(Dt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yd=Fn(Dt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gh=Fn(Dt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bh=Fn(Dt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_h=Fn(Dt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bp=Fn(Dt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_p=Fn(Dt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wp=Fn(Dt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ep=Fn(Dt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wh=Fn(Dt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Eh=Fn(Dt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Oh=Fn(Dt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Fn(Dt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"sourceNode"),Dt.prototype),Fn(Dt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"targetNode"),Dt.prototype),Fn(Dt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"textPosition"),Dt.prototype),Fn(Dt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperty"),Dt.prototype),Fn(Dt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"deleteProperty"),Dt.prototype),Fn(Dt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperties"),Dt.prototype),Fn(Dt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"changeEdgeId"),Dt.prototype),Fn(Dt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyle"),Dt.prototype),Fn(Dt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyles"),Dt.prototype),Fn(Dt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStyles"),Dt.prototype),Fn(Dt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"formatText"),Dt.prototype),Fn(Dt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"resetTextPosition"),Dt.prototype),Fn(Dt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveText"),Dt.prototype),Fn(Dt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setText"),Dt.prototype),Fn(Dt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateText"),Dt.prototype),Fn(Dt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setAnchors"),Dt.prototype),Fn(Dt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setSelected"),Dt.prototype),Fn(Dt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHovered"),Dt.prototype),Fn(Dt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHitable"),Dt.prototype),Fn(Dt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"openEdgeAnimation"),Dt.prototype),Fn(Dt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"closeEdgeAnimation"),Dt.prototype),Fn(Dt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setElementState"),Dt.prototype),Fn(Dt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStartPoint"),Dt.prototype),Fn(Dt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveStartPoint"),Dt.prototype),Fn(Dt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateEndPoint"),Dt.prototype),Fn(Dt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveEndPoint"),Dt.prototype),Fn(Dt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setZIndex"),Dt.prototype),Fn(Dt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"initPoints"),Dt.prototype),Fn(Dt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAttributes"),Dt.prototype),Fn(Dt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getAdjustStart"),Dt.prototype),Fn(Dt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getAdjustEnd"),Dt.prototype),Fn(Dt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAfterAdjustStartAndEnd"),Dt.prototype),Dt),as=gd;function bd(a){return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},bd(a)}function Sh(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xs(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Sh(Object(l),!0).forEach(function(u){Hi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Sh(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ah(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ys(){return Ys=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ls(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ys.apply(this,arguments)}function ls(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Al(a))!==null;);return a}function ol(a,i){return ol=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ol(a,i)}function Th(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Al(a);if(i){var p=Al(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return xp(this,l)}}function xp(a,i){if(i&&(bd(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mu(a)}function Mu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Al(a){return Al=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Al(a)}function Hi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Gn,To,Di=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&ol(f,y)})(p,a);var i,l,u=Th(p);function p(){var f;Ah(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Hi(Mu(f=u.call.apply(u,[this].concat(_))),"modelType",Er.LINE_EDGE),f}return i=p,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Xs(Xs({},Ys(Al(p.prototype),"getEdgeStyle",this).call(this)),wo(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&rl(i.prototype,l),p}(as);function ua(a){return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ua(a)}function qv(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Mh(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Mh(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mh(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Pu(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mr(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Pu(Object(l),!0).forEach(function(u){Mo(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Pu(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ph(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sa(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ti(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ia(){return Ia=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Kv(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ia.apply(this,arguments)}function Kv(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=eo(a))!==null;);return a}function uf(a,i){return uf=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},uf(a,i)}function Tl(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=eo(a);if(i){var p=eo(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Sp(this,l)}}function Sp(a,i){if(i&&(ua(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(a)}function Jl(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function eo(a){return eo=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},eo(a)}function Mo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _i(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var sf=(Gn=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&uf(f,y)})(p,a);var i,l,u=Tl(p);function p(){var f;sa(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Mo(Jl(f=u.call.apply(u,[this].concat(_))),"modelType",Er.POLYLINE_EDGE),Mo(Jl(f),"draggingPointList",void 0),Ph(Jl(f),"dbClickPosition",To,Jl(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=30,Ia(eo(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return mr(mr({},Ia(eo(p.prototype),"getEdgeStyle",this).call(this)),wo(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var _=this.dbClickPosition;return{x:_.x,y:_.y}}var x=mo(this.points),N=qv(Wo(x),2),L=N[0],X=N[1];return{x:(L.x+X.x)/2,y:(L.y+X.y)/2}}},{key:"getAfterAnchor",value:function(f,y,_){var x,N;return _.forEach(function(L){var X;f===lo.HORIZONTAL?X=Math.abs(y.y-L.y):f===lo.VERTICAL&&(X=Math.abs(y.x-L.x)),(!N||N>X)&&(N=X,x=L)}),x}},{key:"getCrossPoint",value:function(f,y,_){var x;return f===lo.HORIZONTAL?x={x:_.x,y:y.y}:f===lo.VERTICAL&&(x={x:y.x,y:_.y}),x}},{key:"removeCrossPoints",value:function(f,y,_){var x=_.map(function(tt){return tt});if(f===1){var N=x[f],L=x[y],X=x[f-1];if(to(X,N,this.sourceNode)){if(No(N,L,this.sourceNode)){var Z=Uo(N,L,this.sourceNode);Z&&(x[f]=Z,x.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(tt){(tt.x===X.x&&tt.x===N.x||tt.y===X.y&&tt.y===N.y)&&la(tt.x,tt.y,N.x,N.y)<la(X.x,X.y,N.x,N.y)&&(x[f-1]=tt)})}if(y===_.length-2){var pe=x[f],xe=x[y],Re=x[y+1];if(to(xe,Re,this.targetNode)){if(No(pe,xe,this.targetNode)){var et=Uo(pe,xe,this.targetNode);et&&(x[y]=et,x.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(tt){(tt.x===Re.x&&tt.x===xe.x||tt.y===Re.y&&tt.y===xe.y)&&la(tt.x,tt.y,xe.x,xe.y)<la(Re.x,Re.y,xe.x,xe.y)&&(x[y+1]=tt)})}return x}},{key:"getDraggingPoints",value:function(f,y,_,x,N){var L=N.map(function(pe){return pe}),X=this.getAfterAnchor(f,_,x),Z=this.getCrossPoint(f,_,X);return y==="start"?(L.unshift(Z),L.unshift(X)):(L.push(Z),L.push(X)),L}},{key:"updateCrossPoints",value:function(f){var y=f.map(function(Bt){return Bt}),_=f[0],x=f[1],N=f[y.length-2],L=f[y.length-1],X=this.sourceNode,Z=this.targetNode,pe=X.modelType,xe=Z.modelType,Re=Eo(_,x),et=y[0];switch(pe){case Er.RECT_NODE:X.radius!==0&&(Ws(_,X)||(et=nf(_,Re,X)));break;case Er.CIRCLE_NODE:et=os(_,Re,X);break;case Er.ELLIPSE_NODE:et=rf(_,Re,X);break;case Er.DIAMOND_NODE:case Er.POLYGON_NODE:et=of(_,Re,X)}et&&(y[0]=et);var tt=Eo(N,L),yt=y[y.length-1];switch(xe){case Er.RECT_NODE:Z.radius!==0&&(Ws(L,Z)||(yt=nf(L,tt,Z)));break;case Er.CIRCLE_NODE:yt=os(L,tt,Z);break;case Er.ELLIPSE_NODE:yt=rf(L,tt,Z);break;case Er.DIAMOND_NODE:case Er.POLYGON_NODE:yt=of(L,tt,Z)}return yt&&(y[y.length-1]=yt),y}},{key:"getData",value:function(){var f=Ia(eo(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(N){N.x+=f,N.y+=y});var _=this.pointsList[0];this.startPoint=Object.assign({},_);var x=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},x),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var _=f.start,x=f.end,N=f.startIndex,L=f.endIndex,X=f.direction,Z=this.pointsList,pe=Z;return X===lo.HORIZONTAL?(Z[N]={x:_.x,y:_.y+y.y},Z[L]={x:x.x,y:x.y+y.y},pe=this.pointsList.map(function(xe){return xe})):X===lo.VERTICAL&&(Z[N]={x:_.x+y.x,y:_.y},Z[L]={x:x.x+y.x,y:x.y},pe=this.pointsList.map(function(xe){return xe})),this.updatePointsAfterDrag(pe),this.draggingPointList=pe,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Z[N]),end:Object.assign({},Z[L]),startIndex:N,endIndex:L,direction:X}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var _=f.start,x=f.end,N=f.startIndex,L=f.endIndex,X=f.direction,Z=this.pointsList;if(X===lo.HORIZONTAL){Z[N]={x:_.x,y:_.y+y.y},Z[L]={x:x.x,y:x.y+y.y};var pe=this.pointsList.map(function(sn){return sn});if(N!==0&&L!==this.pointsList.length-1&&(pe=this.removeCrossPoints(N,L,pe)),N===0){var xe={x:_.x,y:_.y+y.y};if(!Ca(xe,this.sourceNode)){var Re=this.sourceNode.anchors;pe=this.getDraggingPoints(X,"start",xe,Re,pe)}}if(L===this.pointsList.length-1){var et={x:x.x,y:x.y+y.y};if(!Ca(et,this.targetNode)){var tt=this.targetNode.anchors;pe=this.getDraggingPoints(X,"end",et,tt,pe)}}this.updatePointsAfterDrag(pe),this.draggingPointList=pe}else if(X===lo.VERTICAL){Z[N]={x:_.x+y.x,y:_.y},Z[L]={x:x.x+y.x,y:x.y};var yt=this.pointsList.map(function(sn){return sn});if(N!==0&&L!==this.pointsList.length-1&&(yt=this.removeCrossPoints(N,L,yt)),N===0){var Bt={x:_.x+y.x,y:_.y};if(!Ca(Bt,this.sourceNode)){var hn=this.sourceNode.anchors;yt=this.getDraggingPoints(X,"start",Bt,hn,yt)}}if(L===this.pointsList.length-1){var dn={x:x.x+y.x,y:x.y};if(!Ca(dn,this.targetNode)){var Hn=this.targetNode.anchors;yt=this.getDraggingPoints(X,"end",dn,Hn,yt)}}this.updatePointsAfterDrag(yt),this.draggingPointList=yt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Z[N]),end:Object.assign({},Z[L]),startIndex:N,endIndex:L,direction:X}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Bo(mo(this.points));this.pointsList=f.map(function(x){return x}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var _=f[f.length-1];this.endPoint=Object.assign({},_)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(_){return"".concat(_.x,",").concat(_.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,_=f.endPoint,x=f.sourceNode,N=f.targetNode,L=cr({x:y.x,y:y.y},{x:_.x,y:_.y},x,N,this.offset||0);this.pointsList=L,this.initPoints()}}])&&ti(i.prototype,l),p}(as),To=_i(Gn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i(Gn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"initPoints"),Gn.prototype),_i(Gn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePoints"),Gn.prototype),_i(Gn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateStartPoint"),Gn.prototype),_i(Gn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveStartPoint"),Gn.prototype),_i(Gn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateEndPoint"),Gn.prototype),_i(Gn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveEndPoint"),Gn.prototype),_i(Gn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsList"),Gn.prototype),_i(Gn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendStart"),Gn.prototype),_i(Gn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendSimple"),Gn.prototype),_i(Gn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppend"),Gn.prototype),_i(Gn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendEnd"),Gn.prototype),_i(Gn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsAfterDrag"),Gn.prototype),_i(Gn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustStart"),Gn.prototype),_i(Gn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustEnd"),Gn.prototype),_i(Gn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateAfterAdjustStartAndEnd"),Gn.prototype),Gn),F=function(a){var i=a.start,l=a.end,u=a.offset,p=a.verticalLength,f=a.type,y={leftX:0,leftY:0,rightX:0,rightY:0},_=Math.atan((l.y-i.y)/(l.x-i.x)),x=Math.atan(u/p),N=Math.sqrt(p*p+u*u);return f==="start"?l.x>=i.x?(y.leftX=i.x+N*Math.sin(_+x),y.leftY=i.y-N*Math.cos(_+x),y.rightX=i.x-N*Math.sin(_-x),y.rightY=i.y+N*Math.cos(_-x)):(y.leftX=i.x-N*Math.sin(_+x),y.leftY=i.y+N*Math.cos(_+x),y.rightX=i.x+N*Math.sin(_-x),y.rightY=i.y-N*Math.cos(_-x)):f==="end"&&(l.x>=i.x?(y.leftX=l.x+N*Math.sin(_-x),y.leftY=l.y-N*Math.cos(_-x),y.rightX=l.x-N*Math.sin(_+x),y.rightY=l.y+N*Math.cos(_+x)):(y.leftX=l.x-N*Math.sin(_-x),y.leftY=l.y+N*Math.cos(_-x),y.rightX=l.x+N*Math.sin(_+x),y.rightY=l.y-N*Math.cos(_+x))),y},ie={x:1,y:0,z:0};function be(a,i,l,u,p){for(var f=function(xe){if(xe<0||xe>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-xe,3)+3*i.x*xe*Math.pow(1-xe,2)+3*l.x*Math.pow(xe,2)*(1-xe)+u.x*Math.pow(xe,3),y:a.y*Math.pow(1-xe,3)+3*i.y*xe*Math.pow(1-xe,2)+3*l.y*Math.pow(xe,2)*(1-xe)+u.y*Math.pow(xe,3)}},y=0,_=2,x=u.x,N=u.y,L=u;y<p&&_<50;){var X=L=f(1-_/100),Z=X.x,pe=X.y;y=la(x,N,Z,pe),_++}return L}function nt(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function dt(a){return u=function(f,y){return f.x*y.y-f.y*y.x}(i=ie,l=a),p=Math.acos(function(f,y){var _=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(x,N,L){return x+N*_[L]})}(nt(i),nt(l))),u>=0?p:-p;var i,l,u,p}function Qe(a){return a*(180/Math.PI)}function st(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Nt(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?st(Object(l),!0).forEach(function(u){It(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):st(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function It(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ct(a){return function(i){if(Array.isArray(i))return kt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Ut(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(a){return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ct(a)}function Vt(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||Ut(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ut(a,i){if(a){if(typeof a=="string")return kt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?kt(a,i):void 0}}function kt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var _t=function(a,i){var l;switch(a.type){case"line":default:l=new Di(a,i);break;case"polyline":l=new sf(a,i)}return l},He=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},lt=function(a){var i=[],l={};return a.forEach(function(u){var p="".concat(u.x,"-").concat(u.y);u.id=p,l[p]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Ft=function(a,i){var l=[a,{x:a.x,y:i.y},i];return lt(l)},Kt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},xt=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?lo.HORIZONTAL:lo.VERTICAL},Jt=function(a,i,l){return xt(l,i)===lo.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},At=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),p=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return{centerX:(l+p)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:p,maxY:f,height:f-u,width:p-l}},Wt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(L){l.push(L.x),u.push(L.y)});var p=Math.min.apply(Math,l),f=Math.max.apply(Math,l),y=Math.min.apply(Math,u),_=Math.max.apply(Math,u),x=f-p,N=_-y;return i&&(x+=i,N+=i),{centerX:(p+f)/2,centerY:(y+_)/2,maxX:f,maxY:_,minX:p,minY:y,x:(p+f)/2,y:(y+_)/2,height:N,width:x}},wt=function(a){var i=a.minX,l=a.minY,u=a.maxX,p=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:p},{x:i,y:p}]},Xt=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},Mn=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},Wn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},Lt=function(a,i){return Mn(a,i.x).concat(Wn(a,i.y))},Tt=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},Et=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Cn=function(a,i,l,u,p){return Tt(a,i)+Tt(a,l)+Et(a,[i,l,u,p])},nr=function a(i,l,u,p,f){f||(f=0),i.unshift(l[p]),u[p]&&u[p]!==p&&f<=100&&a(i,l,u,u[p],f+1)},un=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},Qn=function(a,i,l,u){var p=i.x-a.x,f=i.y-a.y,y=u.x-l.x,_=u.y-l.y,x=(-f*(a.x-l.x)+p*(a.y-l.y))/(-y*f+p*_),N=(y*(a.y-l.y)-_*(a.x-l.x))/(-y*f+p*_);return x>=0&&x<=1&&N>=0&&N<=1},Vn=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=Vt(wt(l),4),p=u[0],f=u[1],y=u[2],_=u[3];return Qn(a,i,p,f)||Qn(a,i,p,_)||Qn(a,i,f,y)||Qn(a,i,y,_)},rr=function(a,i,l,u){var p=[];return a.forEach(function(f){f!==i&&(f.x!==i.x&&f.y!==i.y||Vn(f,i,l)||Vn(f,i,u)||p.push(f))}),lt(p)},gr=function(a,i,l,u,p,f,y){var _=[],x=[i],N={},L={},X={};L[i.id]=0,X[i.id]=Cn(i,l,i);var Z={};a.forEach(function(Re){Z[Re.id]=Re});for(var pe=function(){var Re=void 0,et=1/0;if(x.forEach(function(yt){X[yt.id]<et&&(et=X[yt.id],Re=yt)}),Re===l){var tt=[];return nr(tt,Z,N,l.id),{v:tt}}un(x,Re),_.push(Re),rr(a,Re,u,p).forEach(function(yt){if(_.indexOf(yt)===-1){x.indexOf(yt)===-1&&x.push(yt);var Bt=X[Re.id]+Tt(Re,yt);L[yt.id]&&Bt>=L[yt.id]||(N[yt.id]=Re.id,L[yt.id]=Bt,X[yt.id]=L[yt.id]+Cn(yt,l,i,f,y))}})};x.length;){var xe=pe();if(ct(xe)==="object")return xe.v}return[i,l]},Po=function(a){return Wi(a)},Bo=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],p=a[i+1];l.x===u.x&&u.x===p.x||l.y===u.y&&u.y===p.y?a.splice(i,1):i++}return a},cr=function(a,i,l,u,p){var f=Po(l),y=Po(u),_=Kt(f,p),x=Kt(y,p),N=Jt(_,f,a),L=Jt(x,y,i);if(He(_,x)){var X=ni(a,i,N,L);return[a,N].concat(Ct(X),[L,i])}var Z=Wt([N,L]),pe=At(_,Z),xe=At(x,Z),Re=[];Re=(Re=Re.concat(wt(pe))).concat(wt(xe));var et={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[Z,pe,xe].forEach(function(yt){Re=Re.concat(Lt(yt,et).filter(function(Bt){return Xt(Bt,_)&&Xt(Bt,x)}))}),[{x:N.x,y:L.y},{x:L.x,y:N.y}].forEach(function(yt){Xt(yt,_)&&Xt(yt,x)&&Re.push(yt)}),Re.unshift(N),Re.push(L),Re=lt(Re);var tt=gr(Re,N,L,f,y,a,i);return tt.unshift(a),tt.push(i),tt.length>2&&(tt=Bo(tt)),lt(tt)},Wo=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],p=la(l.x,l.y,u.x,u.y),f=1;f<a.length-1;f++){var y=a[f],_=a[f+1],x=la(y.x,y.y,_.x,_.y);x>p&&(p=x,l=y,u=_)}i=[l,u]}return i},to=function(a,i,l){var u=Ca(a,l),p=Ca(i,l);return u&&p},No=function(a,i,l){var u=Ca(a,l),p=Ca(i,l);return!(u&&p)&&(u||p)},Uo=function(a,i,l){for(var u,p,f=Wi(l),y=wt(f),_=0;_<y.length;_++)Qn(a,i,y[_],y[(_+1)%y.length])&&(p=[y[_],y[(_+1)%y.length]]);return p&&(u=function(x,N,L,X){var Z=(N.y-x.y)*(X.x-L.x)-(x.x-N.x)*(L.y-X.y);if(Z===0)return!1;var pe=((N.x-x.x)*(X.x-L.x)*(L.y-x.y)+(N.y-x.y)*(X.x-L.x)*x.x-(X.y-L.y)*(N.x-x.x)*L.x)/Z,xe=-((N.y-x.y)*(X.y-L.y)*(L.x-x.x)+(N.x-x.x)*(X.y-L.y)*x.y-(X.x-L.x)*(N.y-x.y)*L.y)/Z;return(pe-x.x)*(pe-N.x)<=0&&(xe-x.y)*(xe-N.y)<=0&&(pe-L.x)*(pe-X.x)<=0&&(xe-L.y)*(xe-X.y)<=0&&{x:pe,y:xe}}(a,i,p[0],p[1])),u},Eo=function(a,i){var l;return a.x===i.x?l=lo.VERTICAL:a.y===i.y&&(l=lo.HORIZONTAL),l},mo=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var p=Vt(u.split(","),2),f=p[0],y=p[1];l.push({x:Number(f),y:Number(y)})}),l},ni=function(a,i,l,u){var p=[];if(Eo(a,l)===Eo(i,u))a.y===l.y?(p.push({x:l.x,y:(l.y+u.y)/2}),p.push({x:u.x,y:(l.y+u.y)/2})):(p.push({x:(l.x+u.x)/2,y:l.y}),p.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},y=xl(f,a,l),_=xl(f,i,u);if(y||_)f={x:u.x,y:l.y};else{var x=Oo(f,a,l),N=Oo(f,i,u);x&&N&&(f={x:u.x,y:l.y})}p.push(f)}return p},Oo=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Zn=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},ui=null,Nr=function(a,i){ui||(ui=document.createElement("canvas"));var l=ui.getContext("2d");return l.font=i,l.measureText(a).width},Rn=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var p={start:l,end:u,offset:10,verticalLength:5},f=F(Nt(Nt({},p),{},{type:"start"})),y=F(Nt(Nt({},p),{},{type:"end"}));i="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},fr=function(a){var i=a.start,l=a.end,u=a.sourceNode,p=a.targetNode,f=a.offset,y=Wi(u),_=Wi(p),x=Kt(y,f),N=Kt(_,f);return{sNext:Jt(x,y,i),ePre:Jt(N,_,l)}},zn=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[uo(i[0]),uo(i[1]),uo(i[2]),uo(i[3])]},uo=function(a){var i=Vt(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},La=function(a,i){var l=Vt(a,4);return[be(l[0],l[1],l[2],l[3],i),a[3]]},Ql=function(a,i){for(var l,u=a.x,p=a.y,f=mo(i),y=Number.MAX_SAFE_INTEGER,_=[],x=0;x<f.length;x++)_.push({start:f[x],end:f[(x+1)%f.length]});if(_.forEach(function(Z){var pe=Z.start,xe=Z.end;if(pe.x===xe.x){var Re={x:pe.x,y:p};if(xl(Re,pe,xe)){var et=Math.abs(pe.x-u);et<y&&(y=et,l=Re)}}else if(pe.y===xe.y){var tt={x:u,y:pe.y};if(xl(tt,pe,xe)){var yt=Math.abs(pe.y-p);yt<y&&(y=yt,l=tt)}}}),!l){var N=_[0],L=N.start,X=N.end;l={x:L.x+(X.x-L.x)/2,y:L.y+(X.y-L.y)/2}}return l},ve=function(a){return Za(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},rt=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function Je(a,i){return typeof i!="function"?function(l,u,p){return Object.assign({type:a.edgeType},p)}:function(l,u,p){var f=i(l,u,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:a.edgeType}}}r(208);var tn=function(){};function hr(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ue(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ee=function(){function a(u){var p=this,f=u.onDragStart,y=f===void 0?tn:f,_=u.onDragging,x=_===void 0?tn:_,N=u.onDragEnd,L=N===void 0?tn:N,X=u.eventType,Z=X===void 0?"":X,pe=u.eventCenter,xe=pe===void 0?null:pe,Re=u.step,et=Re===void 0?1:Re,tt=u.isStopPropagation,yt=tt===void 0||tt,Bt=u.model,hn=Bt===void 0?null:Bt,dn=u.data,Hn=dn===void 0?null:dn;(function(sn,In){if(!(sn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,a),ue(this,"onDragStart",void 0),ue(this,"onDragging",void 0),ue(this,"onDragEnd",void 0),ue(this,"step",void 0),ue(this,"isStopPropagation",void 0),ue(this,"isDragging",!1),ue(this,"isStartDragging",!1),ue(this,"startX",0),ue(this,"startY",0),ue(this,"sumDeltaX",0),ue(this,"sumDeltaY",0),ue(this,"eventType",void 0),ue(this,"eventCenter",void 0),ue(this,"model",void 0),ue(this,"data",void 0),ue(this,"startTime",void 0),ue(this,"handleMouseDown",function(sn){var In,wn,Dr,$r=(In=window)===null||In===void 0?void 0:In.document;if(sn.button===0){p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging=!0,p.startX=sn.clientX,p.startY=sn.clientY,$r.addEventListener("mousemove",p.handleMouseMove,!1),$r.addEventListener("mouseup",p.handleMouseUp,!1);var sr=(wn=p.model)===null||wn===void 0?void 0:wn.getData();(Dr=p.eventCenter)===null||Dr===void 0||Dr.emit(kn["".concat(p.eventType,"_MOUSEDOWN")],{e:sn,data:p.data||sr}),p.startTime=new Date().getTime()}}),ue(this,"handleMouseMove",function(sn){if(p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=sn.clientX-p.startX,p.sumDeltaY+=sn.clientY-p.startY,p.startX=sn.clientX,p.startY=sn.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var In,wn=p.sumDeltaX%p.step,Dr=p.sumDeltaY%p.step,$r=p.sumDeltaX-wn,sr=p.sumDeltaY-Dr;p.sumDeltaX=wn,p.sumDeltaY=Dr;var Hr,hi=(In=p.model)===null||In===void 0?void 0:In.getData();p.isDragging||((Hr=p.eventCenter)===null||Hr===void 0||Hr.emit(kn["".concat(p.eventType,"_DRAGSTART")],{e:sn,data:p.data||hi}),p.onDragStart({event:sn})),p.isDragging=!0,Promise.resolve().then(function(){var vi,wa;p.onDragging({deltaX:$r,deltaY:sr,event:sn}),(vi=p.eventCenter)===null||vi===void 0||vi.emit(kn["".concat(p.eventType,"_MOUSEMOVE")],{e:sn,data:p.data||hi}),(wa=p.eventCenter)===null||wa===void 0||wa.emit(kn["".concat(p.eventType,"_DRAG")],{e:sn,data:p.data||hi})})}}),ue(this,"handleMouseUp",function(sn){var In=window.document;p.isStartDragging=!1,p.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var wn,Dr,$r;In.removeEventListener("mousemove",p.handleMouseMove,!1),In.removeEventListener("mouseup",p.handleMouseUp,!1);var sr=(wn=p.model)===null||wn===void 0?void 0:wn.getData();(Dr=p.eventCenter)===null||Dr===void 0||Dr.emit(kn["".concat(p.eventType,"_MOUSEUP")],{e:sn,data:p.data||sr}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:sn}),($r=p.eventCenter)===null||$r===void 0||$r.emit(kn["".concat(p.eventType,"_DROP")],{e:sn,data:p.data||sr}))})}),ue(this,"cancelDrag",function(){var sn,In=(sn=window)===null||sn===void 0?void 0:sn.document;In.removeEventListener("mousemove",p.handleMouseMove,!1),In.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=y,this.onDragging=x,this.onDragEnd=L,this.step=et,this.isStopPropagation=yt,this.eventType=Z,this.eventCenter=xe,this.model=hn,this.data=Hn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&hr(i.prototype,l),a}();function Ae(a){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ae(a)}function Ge(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Xe(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ne(a,i,l){return i&&Xe(a.prototype,i),l&&Xe(a,l),a}function Te(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&d(a,i)}function Le(a){var i=Ze();return function(){var l,u=m(a);if(i){var p=m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fe(this,l)}}function fe(a,i){if(i&&(Ae(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(a)}function we(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function se(a){var i=typeof Map=="function"?new Map:void 0;return se=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return Be(l,arguments,m(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,l)},se(a)}function Be(a,i,l){return Be=Ze()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var _=new(Function.bind.apply(u,y));return f&&d(_,f.prototype),_},Be.apply(null,arguments)}function Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a,i){return d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d(a,i)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},m(a)}function E(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function D(a,i){return a instanceof J&&i instanceof J}var G=function(a){Te(l,a);var i=Le(l);function l(u,p,f){var y;return Ge(this,l),E(we(y=i.call(this,3)),"x",void 0),E(we(y),"y",void 0),E(we(y),"z",void 0),y[0]=u,y[1]=p,y[2]=f,y.x=u,y.y=p,y.z=f,Object.setPrototypeOf(we(y),l.prototype),y}return Ne(l,[{key:"add",value:function(u){if(D(this,u))return new J(this.x+u.x,this.y+u.y);var p=this.z+u.z;return new de((this.x+u.x)/p,(this.y+u.y)/p)}},{key:"subtract",value:function(u){if(D(this,u))return new J(this.x-u.x,this.y-u.y);var p=this.z-u.z;return p===0?new J(this.x-u.x,this.y-u.y):new de((this.x-u.x)/p,(this.y-u.y)/p)}}]),l}(se(Array)),J=function(a){Te(l,a);var i=Le(l);function l(u,p,f){var y;return Ge(this,l),y=i.call(this,u,p,f??0),Object.setPrototypeOf(we(y),l.prototype),y}return Ne(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var p=this;return u.reduce(function(f,y,_){return f+y*p[_]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var p=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return p>=0?f:-f}}]),l}(G),de=function(a){Te(l,a);var i=Le(l);function l(u,p){var f;return Ge(this,l),f=i.call(this,u,p,1),Object.setPrototypeOf(we(f),l.prototype),f}return Ne(l,[{key:"toString",value:function(){return"Point"}}]),l}(G);r(67),r(218);function _e(a){return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_e(a)}function Fe(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||gt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(a){return function(i){if(Array.isArray(i))return Gt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||gt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gt(a,i){if(a){if(typeof a=="string")return Gt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Gt(a,i):void 0}}function Gt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function An(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function On(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yn(a,i,l){return i&&On(a.prototype,i),l&&On(a,l),a}function Pt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Un(a,i)}function Qt(a){var i=jr();return function(){var l,u=er(a);if(i){var p=er(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dr(this,l)}}function dr(a,i){if(i&&(_e(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(a)}function gn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ar(a){var i=typeof Map=="function"?new Map:void 0;return ar=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return or(l,arguments,er(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Un(p,l)},ar(a)}function or(a,i,l){return or=jr()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var _=new(Function.bind.apply(u,y));return f&&Un(_,f.prototype),_},or.apply(null,arguments)}function jr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Un(a,i){return Un=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Un(a,i)}function er(a){return er=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},er(a)}function zo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ot,eu,wi,Nu,us,_d,Ap,cf,qs,Zv,Jv,Tp,Nh,Ks=function(a){Pt(l,a);var i=Qt(l);function l(){var u;An(this,l);for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];return zo(gn(u=i.call(this,f.length)),"rows",void 0),zo(gn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(_,x){u[x]=_}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(gn(u),l.prototype),u}return Yn(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return pt(this.map(function(p){return p[u]}))}},{key:"transpose",value:function(){for(var u=[],p=0;p<this.columns;p++)u.push(this.getColumn(p));return or(l,u)}},{key:"cross",value:function(u){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),_=function(N){var L=u.getColumn(N);p[f][N]=y.reduce(function(X,Z,pe){return X+Z*L[pe]},0)},x=0;x<u.columns;x++)_(x);return or(l,pt(p))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new de(u[0],u[1])})}},{key:"toString",value:function(){var u=Fe(this[0],2),p=u[0],f=u[1],y=Fe(this[1],2),_=y[0],x=y[1],N=Fe(this[2],2),L=N[0],X=N[1];return"matrix(".concat(p," ").concat(f," ").concat(_," ").concat(x," ").concat(L," ").concat(X,")")}},{key:"translate",value:function(u,p){return this.cross(new Zs(u,p))}},{key:"rotate",value:function(u){return this.cross(new Mp(u))}},{key:"scale",value:function(u,p){return this.cross(new Qv(u,p))}}]),l}(ar(Array)),Mp=function(a){Pt(l,a);var i=Qt(l);function l(u){var p;return An(this,l),p=i.call(this,new J(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new J(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new J(0,0,1)),Object.setPrototypeOf(gn(p),l.prototype),p}return Yn(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ks),Qv=function(a){Pt(l,a);var i=Qt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new J(u,0,0),new J(0,p,0),new J(0,0,1))),"sx",void 0),zo(gn(f),"sy",void 0),f.sx=u,f.sy=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ks),Zs=function(a){Pt(l,a);var i=Qt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new J(1,0,0),new J(0,1,0),new J(u,p,1))),"tx",void 0),zo(gn(f),"ty",void 0),f.tx=u,f.ty=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ks),Pp={node:!1,edge:!1},kk={node:!0,edge:!0};function BE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function am(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?BE(Object(l),!0).forEach(function(u){ss(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):BE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function kh(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||UE(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rh(a){return function(i){if(Array.isArray(i))return Ib(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||UE(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UE(a,i){if(a){if(typeof a=="string")return Ib(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Ib(a,i):void 0}}function Ib(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lm(a){return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lm(a)}function ku(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Rk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ss(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function qn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var GE,VE=200,WE=(ot=function(){function a(u){(function(pe,xe){if(!(pe instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,a),ss(this,"rootEl",void 0),ku(this,"width",eu,this),ku(this,"height",wi,this),ss(this,"theme",void 0),ss(this,"eventCenter",void 0),ss(this,"modelMap",new Map),ss(this,"topElement",void 0),ss(this,"animation",void 0),ss(this,"idGenerator",void 0),ss(this,"edgeGenerator",void 0),ss(this,"nodeMoveRules",[]),ss(this,"customTrajectory",void 0),ku(this,"edgeType",Nu,this),ku(this,"nodes",us,this),ku(this,"edges",_d,this),ku(this,"overlapMode",Ap,this),ku(this,"background",cf,this),ku(this,"transformModel",qs,this),ku(this,"editConfigModel",Zv,this),ku(this,"gridSize",Jv,this),ku(this,"partial",Tp,this),ku(this,"fakerNode",Nh,this);var p,f=u.container,y=u.background,_=y===void 0?{}:y,x=u.grid,N=u.idGenerator,L=u.edgeGenerator,X=u.animation,Z=u.customTrajectory;this.background=_,lm(x)==="object"&&(this.gridSize=x.size),this.rootEl=f,this.editConfigModel=new Zf(u),this.eventCenter=new Xc,this.transformModel=new op(this.eventCenter,u),this.theme=js(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(p=X)&&typeof p!="boolean"?Ou(wo(Pp),p):wo(p===!0?kk:Pp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=N,this.customTrajectory=Z,this.edgeGenerator=Je(this,L),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=tl()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"modelsMap",get:function(){return[].concat(Rh(this.nodes),Rh(this.edges)).reduce(function(u,p){return u[p.id]=p,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(N){return u.push(N)}),this.edges.forEach(function(N){return u.push(N)}),u=u.sort(function(N,L){return N.zIndex-L.zIndex});for(var p=[],f=[-200,-200],y=[this.width+VE,this.height+VE],_=0;_<u.length;_++){var x=u[_];x.visible&&(!this.partial||x.isSelected||this.isElementInArea(x,f,y,!1,!1))&&p.push(x)}return p}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===zr.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===zr.TEXT_EDIT});return u||p}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(p){p.isSelected&&u.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&u.set(p.id,p)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(p){p.isSelected&&u.push(p)}),u}},{key:"getAreaElement",value:function(u,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=arguments.length>4&&arguments[4]!==void 0&&arguments[4],x=[],N=[];this.nodes.forEach(function(Z){return N.push(Z)}),this.edges.forEach(function(Z){return N.push(Z)});for(var L=0;L<N.length;L++){var X=N[L];_&&!X.visible||!this.isElementInArea(X,u,p,f,y)||x.push(X)}return x}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var p;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[u])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(u){var p=u.x,f=u.y,y=this.rootEl.getBoundingClientRect(),_={x:p-y.left,y:f-y.top},x=kh(this.transformModel.HtmlPointToCanvasPoint([_.x,_.y]),2);return{domOverlayPosition:_,canvasOverlayPosition:{x:x[0],y:x[1]}}}},{key:"isElementInArea",value:function(u,p,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===ao.NODE){for(var x=Wi(u=u),N=x.minX,L=x.minY,X=x.maxX,Z=x.maxY,pe=[{x:N,y:L},{x:X,y:L},{x:X,y:Z},{x:N,y:Z}],xe=_,Re=0;Re<pe.length;Re++){var et=pe[Re],tt=et.x,yt=et.y,Bt=this.transformModel.CanvasPointToHtmlPoint([tt,yt]),hn=kh(Bt,2);if(tt=hn[0],yt=hn[1],cd([tt,yt],p,f)!==_){xe=!_;break}}return xe}if(u.BaseType===ao.EDGE){var dn=u=u,Hn=dn.startPoint,sn=dn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([Hn.x,Hn.y]),wn=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),Dr=cd(In,p,f),$r=cd(wn,p,f);return y?Dr&&$r:Dr||$r}return!1}},{key:"graphDataToModel",value:function(u){var p=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Hf(u.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=Hf(u.edges,function(f){var y=p.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&u.push(y)});var p=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&p.push(y)}),{nodes:p,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,p=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){u=!0;break}p.push(y.getHistoryData())}if(u)return!1;for(var _=!1,x=[],N=0;N<this.edges.length;N++){var L=this.edges[N];if(L.isDragging){_=!0;break}x.push(L.getHistoryData())}return!_&&{nodes:p,edges:x}}},{key:"getEdgeModelById",value:function(u){var p;return(p=this.edgesMap[u])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var p=[],f=0;f<this.edges.length;f++){var y=this.edges[f],_=this.edges[f].sourceNodeId===u,x=this.edges[f].targetNodeId===u;(_||x)&&p.push(y)}return p}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(y){if(y.BaseType===ao.NODE&&f.nodes.push(y.getData()),y.BaseType===ao.EDGE){var _=y.getData(),x=p.get(_.sourceNodeId)&&p.get(_.targetNodeId);(u||x)&&f.edges.push(_)}}),f}},{key:"updateAttributes",value:function(u,p){this.getElement(u).updateAttributes(p)}},{key:"changeNodeId",value:function(u,p){return p||(p=tl()),this.nodesMap[p]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=p),f.targetNodeId===u&&(f.targetNodeId=p)}),this.nodesMap[u].model.id=p,this.nodesMap[p]=this.nodesMap[u],p):""}},{key:"changeEdgeId",value:function(u,p){return p||(p=tl()),this.edgesMap[p]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,p){return this.modelMap.set(u,p)}},{key:"toFront",value:function(u){var p,f,y,_=((p=this.nodesMap[u])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);_&&(this.overlapMode===_o.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),_.setZIndex(9999),this.topElement=_),this.overlapMode===_o.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,p){var f,y,_,x=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[u])===null||y===void 0?void 0:y.model);x&&(typeof p=="number"&&(_=p),p==="top"&&(_=Zl()),p==="bottom"&&(_=--lf),x.setZIndex(_))}},{key:"deleteNode",value:function(u){var p=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(kn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=Qo(u);y.id&&this.nodesMap[u.id]&&delete y.id;var _=this.getModelAfterSnapToGrid(y);this.nodes.push(_);var x=_.getData(),N={data:x};return f&&(N.e=f),this.eventCenter.emit(p,N),_}},{key:"getModelAfterSnapToGrid",value:function(u){var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,y=u.y;return f&&y&&(u.x=El(f,this.gridSize),u.y=El(y,this.gridSize),lm(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-y)),new p(u,this)}},{key:"cloneNode",value:function(u){var p=this.getNodeModelById(u),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),p.setSelected(!1),y.getData()}},{key:"moveNode",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[u];if(_){var x=_.model,N=x.getMoveDistance(p,f,y),L=kh(N,2);p=L[0],f=L[1],this.moveEdge(u,p,f)}}},{key:"moveNode2Coordinate",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[u];if(_){var x=_.model,N=x.x,L=x.y,X=p-N,Z=f-L;this.moveNode(u,X,Z,y)}}},{key:"editText",value:function(u){this.setElementStateById(u,zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var p=Qo(u),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var _=new y(am(am({},p),{},{type:f}),this),x=_.getData();return this.edges.push(_),this.eventCenter.emit(kn.EDGE_ADD,{data:x}),_}},{key:"moveEdge",value:function(u,p,f){for(var y=0;y<this.edges.length;y++){var _=this.edges[y],x=_.textPosition,N=x.x,L=x.y,X=this.edges[y].sourceNodeId===u,Z=this.edges[y].targetNodeId===u;X&&_.moveStartPoint(p,f),Z&&_.moveEndPoint(p,f),(X||Z)&&this.handleEdgeTextMove(_,N,L)}}},{key:"handleEdgeTextMove",value:function(u,p,f){var y;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Er.POLYLINE_EDGE&&(y=u.text)!==null&&y!==void 0&&y.value){var _=u.text,x=Ql(_,u.points);u.moveText(x.x-_.x,x.y-_.y)}else{var N=u.textPosition,L=N.x,X=N.y;u.moveText(L-p,X-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===p){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(kn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var p=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(p,1),this.eventCenter.emit(kn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(kn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(kn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,p,f){this.nodes.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(zr.DEFAULT)}),this.edges.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(u,p){this.nodes.forEach(function(f){f.id===u&&f.updateText(p)}),this.edges.forEach(function(f){f.id===u&&f.updateText(p)})}},{key:"selectNodeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.nodesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.edgesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===_o.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,p,f){for(var y=this,_=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=u.reduce(function(dn,Hn){var sn=y.nodesMap[Hn].model.getMoveDistance(p,f,_);return dn[Hn]=sn,dn},{}),N=0;N<this.edges.length;N++){var L=this.edges[N],X=L.textPosition,Z=X.x,pe=X.y,xe=x[L.sourceNodeId],Re=x[L.targetNodeId],et=void 0,tt=void 0;if(xe&&Re&&L.modelType===Er.POLYLINE_EDGE){var yt=kh(xe,2);et=yt[0],tt=yt[1],L.updatePointsList(et,tt)}else{if(xe){var Bt=kh(xe,2);et=Bt[0],tt=Bt[1],L.moveStartPoint(et,tt)}if(Re){var hn=kh(Re,2);et=hn[0],tt=hn[1],L.moveEndPoint(et,tt)}}(xe||Re)&&this.handleEdgeTextMove(L,Z,pe)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,p){var f=this.getNodeModelById(u);if(f){var y=f.getData();y.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var x=new _(y,this);this.nodes.splice(this.nodesMap[u].index,1,x),this.getNodeEdges(u).forEach(function(N){if(N.sourceNodeId===u){var L=zs(x,N.startPoint,x.width,x.height);N.updateStartPoint(L)}if(N.targetNodeId===u){var X=zs(x,N.endPoint,x.width,x.height);N.updateEndPoint(X)}})}}},{key:"changeEdgeType",value:function(u,p){var f=this.getEdgeModelById(u);if(f&&f.type!==p){var y=f.getData();y.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var x=new _(y,this);this.edges.splice(this.edgesMap[u].index,1,x)}}},{key:"getNodeIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetNodeId===u&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===u&&f.push(p.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===u&&f.push(p.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=js(am(am({},this.theme),u))}},{key:"resize",value:function(u,p){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,p=[],f=[];u.forEach(function(X){var Z=X.x,pe=X.y,xe=X.width,Re=X.height,et=X.getNodeStyle().strokeWidth,tt=et===void 0?0:et,yt=Z+xe/2+tt,Bt=Z-xe/2-tt,hn=pe+Re/2+tt,dn=pe-Re/2-tt;p=p.concat([yt,Bt].filter(function(Hn){return!Number.isNaN(Hn)})),f=f.concat([hn,dn].filter(function(Hn){return!Number.isNaN(Hn)}))});var y=Math.min.apply(Math,Rh(p)),_=Math.max.apply(Math,Rh(p)),x=Math.min.apply(Math,Rh(f)),N=_-y||0,L=Math.max.apply(Math,Rh(f))-x||0;return{virtualRectWidth:N,virtualRectHeight:L,virtualRectCenterPositionX:y+N/2,virtualRectCenterPositionY:x+L/2}}},{key:"translateCenter",value:function(){var u=this.nodes,p=this.width,f=this.height,y=this.rootEl,_=this.transformModel;if(u.length){var x=p||y.clientWidth,N=f||y.clientHeight,L=this.getVirtualRectSize(),X=L.virtualRectCenterPositionX,Z=L.virtualRectCenterPositionY;_.focusOn(X,Z,x,N)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,_=this.height,x=this.rootEl,N=this.transformModel;if(f.length){var L=y||x.clientWidth,X=_||x.clientHeight,Z=this.getVirtualRectSize(),pe=Z.virtualRectWidth,xe=Z.virtualRectHeight,Re=Z.virtualRectCenterPositionX,et=Z.virtualRectCenterPositionY,tt=(pe+p)/L,yt=(xe+u)/X,Bt=0;Bt=1/Math.max(tt,yt);var hn=[L/2,X/2];N.zoom(Bt,hn),N.focusOn(Re,et,L,X)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&Rk(i.prototype,l),a}(),eu=qn(ot.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wi=qn(ot.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nu=qn(ot.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=qn(ot.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_d=qn(ot.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ap=qn(ot.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _o.DEFAULT}}),cf=qn(ot.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs=qn(ot.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zv=qn(ot.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jv=qn(ot.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Tp=qn(ot.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nh=qn(ot.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(ot.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"nodesMap"),ot.prototype),qn(ot.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"edgesMap"),ot.prototype),qn(ot.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"modelsMap"),ot.prototype),qn(ot.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"sortElements"),ot.prototype),qn(ot.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"textEditElement"),ot.prototype),qn(ot.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"selectElements"),ot.prototype),qn(ot.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"selectNodes"),ot.prototype),qn(ot.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setFakerNode"),ot.prototype),qn(ot.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"removeFakerNode"),ot.prototype),qn(ot.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setModel"),ot.prototype),qn(ot.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"toFront"),ot.prototype),qn(ot.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setElementZIndex"),ot.prototype),qn(ot.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteNode"),ot.prototype),qn(ot.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"addNode"),ot.prototype),qn(ot.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"cloneNode"),ot.prototype),qn(ot.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNode"),ot.prototype),qn(ot.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNode2Coordinate"),ot.prototype),qn(ot.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"editText"),ot.prototype),qn(ot.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"addEdge"),ot.prototype),qn(ot.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveEdge"),ot.prototype),qn(ot.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeBySourceAndTarget"),ot.prototype),qn(ot.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeById"),ot.prototype),qn(ot.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeBySource"),ot.prototype),qn(ot.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeByTarget"),ot.prototype),qn(ot.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setElementStateById"),ot.prototype),qn(ot.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"updateText"),ot.prototype),qn(ot.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectNodeById"),ot.prototype),qn(ot.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectEdgeById"),ot.prototype),qn(ot.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectElementById"),ot.prototype),qn(ot.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"clearSelectElements"),ot.prototype),qn(ot.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNodes"),ot.prototype),qn(ot.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setDefaultEdgeType"),ot.prototype),qn(ot.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"changeNodeType"),ot.prototype),qn(ot.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"changeEdgeType"),ot.prototype),qn(ot.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeIncomingEdge"),ot.prototype),qn(ot.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeOutgoingEdge"),ot.prototype),qn(ot.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getAnchorIncomingEdge"),ot.prototype),qn(ot.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getAnchorOutcomingEdge"),ot.prototype),qn(ot.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeIncomingNode"),ot.prototype),qn(ot.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeOutgoingNode"),ot.prototype),qn(ot.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setTheme"),ot.prototype),qn(ot.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"resize"),ot.prototype),qn(ot.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"clearData"),ot.prototype),qn(ot.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"translateCenter"),ot.prototype),qn(ot.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"fitView"),ot.prototype),qn(ot.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"openEdgeAnimation"),ot.prototype),qn(ot.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"closeEdgeAnimation"),ot.prototype),ot),Dk=WE;function Lb(a){return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Lb(a)}function Fb(){return Fb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Fb.apply(this,arguments)}function Ck(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function $b(a,i){return $b=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},$b(a,i)}function jk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=um(a);if(i){var p=um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Ik(this,l)}}function Ik(a,i){if(i&&(Lb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Js(a)}function Js(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function um(a){return um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},um(a)}function ff(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var zE,Lk=ps(GE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&$b(f,y)})(p,a);var i,l,u=jk(p);function p(f){var y;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),ff(Js(y=u.call(this)),"stepDrag",void 0),ff(Js(y),"stepScrollX",0),ff(Js(y),"stepScrollY",0),ff(Js(y),"onDragging",function(L){var X=L.deltaX,Z=L.deltaY;y.setState({isDragging:!0});var pe=y.props.graphModel,xe=pe.transformModel;pe.editConfigModel.stopMoveGraph!==!0&&xe.translate(X,Z)}),ff(Js(y),"onDragEnd",function(){y.setState({isDragging:!1})}),ff(Js(y),"zoomHandler",function(L){var X=y.props,Z=X.graphModel,pe=Z.editConfigModel,xe=Z.transformModel,Re=Z.gridSize,et=X.graphModel,tt=L.deltaX,yt=L.deltaY;if(pe.stopScrollGraph||L.ctrlKey===!0){if(!pe.stopZoomGraph){L.preventDefault();var Bt=et.getPointByClient({x:L.clientX,y:L.clientY}).canvasOverlayPosition,hn=Bt.x,dn=Bt.y;xe.zoom(L.deltaY<0,[hn,dn])}}else{if(L.preventDefault(),y.stepScrollX+=tt,y.stepScrollY+=yt,Math.abs(y.stepScrollX)>=Re){var Hn=y.stepScrollX%Re,sn=y.stepScrollX-Hn;xe.translate(-sn*xe.SCALE_X,0),y.stepScrollX=Hn}if(Math.abs(y.stepScrollY)>=Re){var In=y.stepScrollY%Re,wn=y.stepScrollY-In;xe.translate(0,-wn*xe.SCALE_Y),y.stepScrollY=In}}}),ff(Js(y),"clickHandler",function(L){if(L.target.getAttribute("name")==="canvas-overlay"){var X=y.props.graphModel;X.selectElements.size>0&&X.clearSelectElements(),X.eventCenter.emit(kn.BLANK_CLICK,{e:L})}}),ff(Js(y),"handleContextMenu",function(L){if(L.target.getAttribute("name")==="canvas-overlay"){L.preventDefault();var X=y.props.graphModel,Z=X.getPointByClient({x:L.clientX,y:L.clientY});X.eventCenter.emit(kn.BLANK_CONTEXTMENU,{e:L,position:Z})}}),ff(Js(y),"mouseDownHandler",function(L){var X=y.props.graphModel,Z=X.eventCenter,pe=X.editConfigModel,xe=X.transformModel.SCALE_X,Re=X.gridSize,et=L.target,tt=!pe.adjustEdge&&!pe.adjustNodePosition;(et.getAttribute("name")==="canvas-overlay"||tt)&&(pe.stopMoveGraph!==!0?(y.stepDrag.setStep(Re*xe),y.stepDrag.handleMouseDown(L)):Z.emit(kn.BLANK_MOUSEDOWN,{e:L}),y.clickHandler(L))});var _=f.graphModel,x=_.gridSize,N=_.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:x,eventType:"BLANK",isStopPropagation:!1,eventCenter:N,model:null}),y.state={isDragging:!1},y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,_=y.children,x=y.dnd,N=this.state.isDragging;return Object($e.g)("svg",Fb({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:N?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},x.eventMap()),Object($e.g)("g",{transform:f},_))}}])&&Ck(i.prototype,l),p}($e.a))||GE;function Bb(a){return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Bb(a)}function Fk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function $k(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ub(a,i){return Ub=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ub(a,i)}function Bk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sm(a);if(i){var p=sm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Uk(this,l)}}function Uk(a,i){if(i&&(Bb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function sm(a){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sm(a)}var Gk=ps(zE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Ub(f,y)})(p,a);var i,l,u=Bk(p);function p(){return Fk(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,_=f.graphModel,x=y.getTools().map(function(N){return Object($e.g)(N,{graphModel:_,logicFlow:y.instance})});return y.components=x,x}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,_=f.graphModel,x=document.querySelector("#ToolOverlay_".concat(_.flowId)),N=y.getInstance();N.components.forEach(function(L){return L(N,x)}),N.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object($e.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&$k(i.prototype,l),p}($e.a))||zE;function Gb(a){return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gb(a)}function Vk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Wk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Vb(a,i){return Vb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Vb(a,i)}function zk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cm(a);if(i){var p=cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Hk(this,l)}}function Hk(a,i){if(i&&(Gb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function cm(a){return cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},cm(a)}var HE,Xk=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Vb(f,y)})(p,a);var i,l,u=zk(p);function p(){return Vk(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.background;return Object($e.g)("div",{className:"lf-background"},Object($e.g)("div",{style:f,className:"lf-background-area"}))}}])&&Wk(i.prototype,l),p}($e.a);function Wb(a){return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Wb(a)}function Yk(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qk(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function zb(a,i){return zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},zb(a,i)}function Kk(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fm(a);if(i){var p=fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Zk(this,l)}}function Zk(a,i){if(i&&(Wb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XE(a)}function XE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fm(a){return fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fm(a)}function Jk(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var YE=ps(HE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&zb(f,y)})(p,a);var i,l,u=Kk(p);function p(){var f;Yk(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Jk(XE(f=u.call.apply(u,[this].concat(_))),"id",tl()),f}return i=p,(l=[{key:"renderDot",value:function(){var f=this.props,y=f.config,_=y.color,x=y.thickness,N=x===void 0?2:x,L=f.size,X=f.visible,Z=Math.min(Math.max(2,N),L/2),pe=1;return X||(pe=0),Object($e.g)("rect",{width:Z,height:Z,rx:Z/2,ry:Z/2,fill:_,opacity:pe})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,_=y.color,x=y.thickness,N=x===void 0?1:x,L=f.size,X=f.visible,Z=Math.min(Math.max(1,N),L/2),pe="M ".concat(L," 0 H0 M0 0 V0 ").concat(L),xe=1;return X||(xe=0),Object($e.g)("path",{d:pe,stroke:_,strokeWidth:Z,opacity:xe})}},{key:"render",value:function(){var f=this.props,y=f.type,_=f.size,x=f.graphModel.transformModel,N=[x.SCALE_X,x.SKEW_Y,x.SKEW_X,x.SCALE_Y,x.TRANSLATE_X,x.TRANSLATE_Y].join(","),L="matrix(".concat(N,")");return Object($e.g)("div",{className:"lf-grid"},Object($e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object($e.g)("defs",null,Object($e.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:L,x:"0",y:"0",width:_,height:_},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object($e.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&qk(i.prototype,l),p}($e.a))||HE;YE.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Hb(a){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hb(a)}function Qk(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var KE,Dh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=Qk(l,2),p=u[0],f=u[1];(p==="style"||Hb(f)!=="object")&&(i[p]=f)}),Object($e.g)("line",i)};function Xb(a){return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xb(a)}function ZE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function dm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ZE(Object(l),!0).forEach(function(u){eR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ZE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function eR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function tR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yb(a,i){return Yb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Yb(a,i)}function rR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=pm(a);if(i){var p=pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oR(this,l)}}function oR(a,i){if(i&&(Xb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function pm(a){return pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},pm(a)}var JE,iR=ps(KE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Yb(f,y)})(p,a);var i,l,u=rR(p);function p(){return tR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,_=f.isShowHorizontal,x=f.isShowVertical,N=f.getStyle(),L=y.x,X=L===void 0?0:L,Z=y.y,pe=Z===void 0?0:Z,xe=dm(dm({x1:-1e5,y1:pe,x2:1e5,y2:pe},N),{},{stroke:_?N.stroke:"none"}),Re=dm(dm({x1:X,y1:-1e5,x2:X,y2:1e5},N),{},{stroke:x?N.stroke:"none"});return Object($e.g)("g",{className:"lf-snapline"},Object($e.g)(Dh,xe),Object($e.g)(Dh,Re))}}])&&nR(i.prototype,l),p}($e.a))||KE;function qb(a){return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qb(a)}function aR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return QE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return QE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function wd(a){var i=a.x,l=a.y,u=a.width,p=a.height,f=a.className,y=a.radius,_=i-u/2,x=l-p/2,N={};return Object.entries(a).forEach(function(L){var X=aR(L,2),Z=X[0],pe=X[1];qb(pe)!=="object"&&(N[Z]=pe)}),N.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(N.rx=y,N.ry=y),N.x=_,N.y=x,Object($e.g)("rect",N)}function Kb(a){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kb(a)}function Ch(){return Ch=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Ch.apply(this,arguments)}function eO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function tO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?eO(Object(l),!0).forEach(function(u){lR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):eO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function uR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Zb(a,i){return Zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Zb(a,i)}function cR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hm(a);if(i){var p=hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fR(this,l)}}function fR(a,i){if(i&&(Kb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function hm(a){return hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hm(a)}wd.defaultProps={className:"",radius:""};var nO,dR=ps(JE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Zb(f,y)})(p,a);var i,l,u=cR(p);function p(){return uR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,_=f.editConfigModel,x=_.hoverOutline,N=_.nodeSelectedOutline,L=[];return y.forEach(function(X){if(X.isHovered||X.isSelected){var Z=X.isHovered,pe=X.isSelected,xe=X.x,Re=X.y,et=X.width,tt=X.height;if(N&&pe||x&&Z){var yt=X.getOutlineStyle(),Bt={};if(Object.keys(yt).forEach(function(dn){dn!=="hover"&&(Bt[dn]=yt[dn])}),Z){var hn=yt.hover;Bt=tO(tO({},Bt),hn)}L.push(Object($e.g)(wd,Ch({transform:X.transform,className:"lf-outline-node",x:xe,y:Re,width:et+10,height:tt+10},Bt)))}}}),L}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,_=f.editConfigModel,x=_.edgeSelectedOutline,N=_.hoverOutline,L=[],X=0;X<y.length;X++){var Z=y[X];(x&&Z.isSelected||N&&Z.isHovered)&&(Z.modelType===Er.LINE_EDGE?L.push(this.getLineOutline(Z)):Z.modelType===Er.POLYLINE_EDGE?L.push(this.getPolylineOutline(Z)):Z.modelType===Er.BEZIER_EDGE&&L.push(this.getBezierOutline(Z)))}return L}},{key:"getLineOutline",value:function(f){var y=f.startPoint,_=f.endPoint,x=(y.x+_.x)/2,N=(y.y+_.y)/2,L=Math.abs(y.x-_.x)+10,X=Math.abs(y.y-_.y)+10,Z=f.getOutlineStyle();return Object($e.g)(wd,Ch({className:"lf-outline-edge",x,y:N,width:L,height:X},Z))}},{key:"getPolylineOutline",value:function(f){var y=f.points,_=mo(y),x=Wt(_,8),N=x.x,L=x.y,X=x.width,Z=x.height,pe=f.getOutlineStyle();return Object($e.g)(wd,Ch({className:"lf-outline",x:N,y:L,width:X,height:Z},pe))}},{key:"getBezierOutline",value:function(f){var y=f.path,_=zn(y),x=Wt(_,8),N=x.x,L=x.y,X=x.width,Z=x.height,pe=f.getOutlineStyle();return Object($e.g)(wd,Ch({className:"lf-outline",x:N,y:L,width:X,height:Z},pe))}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&sR(i.prototype,l),p}($e.a))||JE;function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function pR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return rO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return rO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function jh(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.r,y=f===void 0?4:f,_=a.className,x={cx:l,cy:p,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(N){var L=pR(N,2),X=L[0],Z=L[1];Jb(Z)!=="object"&&(x[X]=Z)}),x.className=_?"lf-basic-shape ".concat(_):"lf-basic-shape",Object($e.g)("circle",x)}function Qb(a){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qb(a)}function hR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return oO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return oO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ey(){return ey=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ey.apply(this,arguments)}function iO(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function aO(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function lO(a,i,l){return i&&aO(a.prototype,i),l&&aO(a,l),a}function uO(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&e_(a,i)}function e_(a,i){return e_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e_(a,i)}function sO(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ym(a);if(i){var p=ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vR(this,l)}}function vR(a,i){if(i&&(Qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vm(a)}function vm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ym(a){return ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ym(a)}function t_(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var cO,fO=function(a){uO(l,a);var i=sO(l);function l(){var u;return iO(this,l),t_(vm(u=i.call(this)),"dragHandler",void 0),t_(vm(u),"onDragging",function(p){var f=p.event,y=u.props,_=y.graphModel,x=y.bezierModel,N=y.type,L=_.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,X=L.x,Z=L.y;x.updateAdjustAnchor({x:X,y:Z},N),_.eventCenter.emit(kn.EDGE_ADJUST,{data:x.getData()})}),t_(vm(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ee({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return lO(l,[{key:"render",value:function(){var u=this,p=this.props.position,f=p.x,y=p.y,_=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object($e.g)(jh,ey({className:"lf-bezier-adjust-anchor",x:f,y},_,{onMouseDown:function(x){u.dragHandler.handleMouseDown(x)}}))}}]),l}($e.a),yR=ps(nO=function(a){uO(l,a);var i=sO(l);function l(){return iO(this,l),i.apply(this,arguments)}return lO(l,[{key:"getBezierAdjust",value:function(u,p){var f=u.path,y=u.id,_=hR(zn(f),4),x=_[0],N=_[1],L=_[2],X=_[3],Z=u.getEdgeStyle().adjustLine,pe=[];return pe.push(Object($e.g)(Dh,ey({x1:x.x,y1:x.y,x2:N.x,y2:N.y},Z))),pe.push(Object($e.g)(fO,{position:N,bezierModel:u,graphModel:p,key:"".concat(y,"_ePre"),type:"sNext"})),pe.push(Object($e.g)(Dh,ey({x1:X.x,y1:X.y,x2:L.x,y2:L.y},Z))),pe.push(Object($e.g)(fO,{position:L,bezierModel:u,graphModel:p,key:"".concat(y,"_sNext"),type:"ePre"})),pe}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,p=u.edges,f=[],y=0;y<p.length;y++){var _=p[y];_.isSelected&&_.modelType===Er.BEZIER_EDGE&&_.draggable&&f.push(this.getBezierAdjust(_,u))}return f}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}($e.a))||nO;function n_(a){return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n_(a)}function mR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r_(a,i){return r_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r_(a,i)}function bR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=mm(a);if(i){var p=mm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _R(this,l)}}function _R(a,i){if(i&&(n_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function mm(a){return mm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},mm(a)}var dO,wR=ps(cO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r_(f,y)})(p,a);var i,l,u=bR(p);function p(){return mR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object($e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object($e.g)("g",{transform:f},y))}}])&&gR(i.prototype,l),p}($e.a))||cO;function o_(a){return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o_(a)}function i_(){return i_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},i_.apply(this,arguments)}function ER(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function OR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a_(a,i){return a_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a_(a,i)}function xR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gm(a);if(i){var p=gm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SR(this,l)}}function SR(a,i){if(i&&(o_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function gm(a){return gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},gm(a)}var AR=ps(dO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a_(f,y)})(p,a);var i,l,u=xR(p);function p(){return ER(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getComponent",value:function(f,y){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",x=this.props.getView,N=x(f.type);return Object($e.g)(N,{key:f.id,model:f,graphModel:y,overlay:_})}},{key:"render",value:function(){var f=this,y=this.props,_=y.graphModel,x=y.tool,N=y.options,L=y.dnd,X=y.snaplineModel,Z={};N.width&&(Z.width="".concat(_.width,"px")),N.height&&(Z.height="".concat(_.height,"px"));var pe=N.grid,xe=_.fakerNode,Re=_.editConfigModel.adjustEdge;return Object($e.g)("div",{className:"lf-graph","flow-id":_.flowId,style:Z},Object($e.g)(Lk,{graphModel:_,dnd:L},Object($e.g)("g",{className:"lf-base"},Hf(_.sortElements,function(et){return f.getComponent(et,_)})),xe?this.getComponent(xe,_):""),Object($e.g)(wR,{graphModel:_},Object($e.g)(dR,{graphModel:_}),Re?Object($e.g)(yR,{graphModel:_}):"",N.snapline!==!1?Object($e.g)(iR,{snaplineModel:X}):""),Object($e.g)(Gk,{graphModel:_,tool:x}),N.background&&Object($e.g)(Xk,{background:N.background}),N.grid&&Object($e.g)(YE,i_({},pe,{graphModel:_})))}}],l&&OR(i.prototype,l),p}($e.a))||dO,TR=AR;function pO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function bm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?pO(Object(l),!0).forEach(function(u){df(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function MR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function df(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var PR=function(){function a(u){var p=this;(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),df(this,"nodeConfig",void 0),df(this,"lf",void 0),df(this,"fakerNode",void 0),df(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),df(this,"dragEnter",function(y){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(bm(bm({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),df(this,"onDragOver",function(y){if(y.preventDefault(),p.fakerNode){var _=p.clientToLocalPoint({x:y.clientX,y:y.clientY}),x=_.x,N=_.y;p.fakerNode.moveTo(x,N);var L=p.fakerNode.getData();p.lf.setNodeSnapLine(L),p.lf.graphModel.eventCenter.emit(kn.NODE_DND_DRAG,{data:L})}return!1}),df(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),df(this,"onDrop",function(y){p.lf.graphModel&&y&&p.nodeConfig&&(p.lf.addNode(bm(bm({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY})),kn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=u.lf;this.lf=f}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var p=u.x,f=u.y,y=Xu(this.lf.options,["grid","size"]),_=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,x=_.x,N=_.y;return{x:El(x,y),y:El(N,y)}}},{key:"startDrag",value:function(u){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&MR(i.prototype,l),a}();function hO(a){var i=a.container,l=a.grid,u=a.width,p=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=Ou({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Ou({},yO,a)}var io,vO,yO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function l_(a){return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l_(a)}function u_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return mO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return mO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function gO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function _m(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?gO(Object(l),!0).forEach(function(u){bO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):gO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function NR(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function kR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function RR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ty(){return ty=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=DR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},ty.apply(this,arguments)}function DR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ed(a))!==null;);return a}function s_(a,i){return s_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s_(a,i)}function CR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ed(a);if(i){var p=Ed(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return jR(this,l)}}function jR(a,i){if(i&&(l_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wm(a)}function wm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ed(a){return Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ed(a)}function bO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function cs(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var c_=(io=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&s_(f,y)})(p,a);var i,l,u=CR(p);function p(){var f;kR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return bO(wm(f=u.call.apply(u,[this].concat(_))),"modelType",Er.BEZIER_EDGE),NR(wm(f),"path",vO,wm(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=100,ty(Ed(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return _m(_m({},ty(Ed(p.prototype),"getEdgeStyle",this).call(this)),wo(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(_){var x=_.x,N=_.y;f+=x,y+=N}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=ty(Ed(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return _m(_m({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return fr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=u_(f,4),_=y[0],x=y[1],N=y[2],L=y[3];return"M ".concat(_.x," ").concat(_.y,`
    C `).concat(x.x," ").concat(x.y,`,
    `).concat(N.x," ").concat(N.y,`,
    `).concat(L.x," ").concat(L.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,_=f.ePre;this.updatePath(y,_)}},{key:"updatePath",value:function(f,y){f=wo(f),y=wo(y);var _={x:this.startPoint.x,y:this.startPoint.y},x={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var N=this.getControls();f=N.sNext,y=N.ePre}this.pointsList=[_,f,y,x],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var _=u_(this.pointsList,3),x=_[1],N=_[2];x.x+=f,x.y+=y,this.updatePath(x,N)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var _=u_(this.pointsList,3),x=_[1],N=_[2];N.x+=f,N.y+=y,this.updatePath(x,N)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,_=f.endPoint,x=f.sourceNode,N=f.targetNode,L=fr({start:y,end:_,sourceNode:x,targetNode:N,offset:this.offset}),X=L.sNext,Z=L.ePre;this.pointsList=[y,X,Z,_],this.initPoints()}}])&&RR(i.prototype,l),p}(as),vO=cs(io.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cs(io.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"initPoints"),io.prototype),cs(io.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updatePoints"),io.prototype),cs(io.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateStartPoint"),io.prototype),cs(io.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateEndPoint"),io.prototype),cs(io.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"moveStartPoint"),io.prototype),cs(io.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"moveEndPoint"),io.prototype),cs(io.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateAdjustAnchor"),io.prototype),cs(io.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"getAdjustStart"),io.prototype),cs(io.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"getAdjustEnd"),io.prototype),cs(io.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(io.prototype,"updateAfterAdjustStartAndEnd"),io.prototype),io),nn,_O,wO,EO,OO,xO,SO,AO,TO,MO,PO,NO,kO,RO,DO,CO,jO,IO,LO,FO,$O,BO,UO,IR=function(a){return a==null};function LR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||GO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f_(a){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f_(a)}function GO(a,i){if(a){if(typeof a=="string")return VO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?VO(a,i):void 0}}function VO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function WO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function il(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?WO(Object(l),!0).forEach(function(u){Ml(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):WO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ei(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function FR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ml(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sr(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var pf,zO,hf=(nn=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Ml(this,"id",""),Ei(this,"type",_O,this),Ei(this,"x",wO,this),Ei(this,"y",EO,this),Ei(this,"text",OO,this),Ei(this,"properties",xO,this),Ei(this,"_width",SO,this),Ei(this,"_height",AO,this),Ei(this,"anchorsOffset",TO,this),Ei(this,"isSelected",MO,this),Ei(this,"isHovered",PO,this),Ei(this,"isShowAnchor",NO,this),Ei(this,"isDragging",kO,this),Ei(this,"isHitable",RO,this),Ei(this,"draggable",DO,this),Ei(this,"visible",CO,this),Ei(this,"enableRotate",jO,this),Ml(this,"virtual",!1),Ml(this,"graphModel",void 0),Ei(this,"zIndex",IO,this),Ei(this,"state",LO,this),Ei(this,"autoToFront",FO,this),Ei(this,"style",$O,this),Ei(this,"transform",BO,this),Ei(this,"_rotate",UO,this),Ml(this,"BaseType",ao.NODE),Ml(this,"modelType",Er.NODE),Ml(this,"additionStateData",void 0),Ml(this,"targetRules",[]),Ml(this,"sourceRules",[]),Ml(this,"moveRules",[]),Ml(this,"hasSetTargetRules",!1),Ml(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var p=this.x,f=p===void 0?0:p,y=this.y,_=y===void 0?0:y;this.transform=new Zs(-f,-_).rotate(u).translate(f,_).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||tl()}this.formatText(u),Ri(this,function(_){return Za(_,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===_o.INCREASE&&(this.zIndex=u.zIndex||Zl())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,_=this.properties;Object(c.x)(_)&&(_=Object(c.I)(_));var x={id:this.id,type:this.type,x:this.x,y:this.y,properties:_};return this.rotate&&(x.rotate=this.rotate),this.graphModel.overlapMode===_o.INCREASE&&(x.zIndex=this.zIndex),y&&(x.text={x:p,y:f,value:y}),x}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return il(il({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return wo(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return wo(u)}},{key:"getAnchorStyle",value:function(u){var p=this.graphModel.theme.anchor;return wo(p)}},{key:"getAnchorLineStyle",value:function(u){var p=this.graphModel.theme.anchorLine;return wo(p)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return wo(u)}},{key:"isAllowConnectedAsSource",value:function(u,p,f,y){var _=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var x,N=!0,L=0;L<_.length;L++){var X=_[L];if(!X.validate.call(this,this,u,p,f,y)){N=!1,x=X.message;break}}return{isAllPass:N,msg:x}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,p,f,y){var _=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var x,N=!0,L=0;L<_.length;L++){var X=_[L];if(!X.validate.call(this,u,this,p,f,y)){N=!1,x=X.message;break}}return{isAllPass:N,msg:x}}},{key:"isAllowMoveNode",value:function(u,p){var f,y=!0,_=!0,x=function(X,Z){var pe=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!pe){if(Array.isArray(X)||(pe=GO(X))||Z&&X&&typeof X.length=="number"){pe&&(X=pe);var xe=0,Re=function(){};return{s:Re,n:function(){return xe>=X.length?{done:!0}:{done:!1,value:X[xe++]}},e:function(Bt){throw Bt},f:Re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var et,tt=!0,yt=!1;return{s:function(){pe=pe.call(X)},n:function(){var Bt=pe.next();return tt=Bt.done,Bt},e:function(Bt){yt=!0,et=Bt},f:function(){try{tt||pe.return==null||pe.return()}finally{if(yt)throw et}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(x.s();!(f=x.n()).done;){var N=(0,f.value)(this,u,p);if(!N)return!1;if(f_(N)==="object"){var L=N;if(L.x===!1&&L.y===!1)return!1;y=y&&L.x,_=_&&L.y}}}catch(X){x.e(X)}finally{x.f()}return{x:y,y:_}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,p=this.id,f=this.x,y=this.y;return u&&u.length>0?u.map(function(_,x){return _.length?(_=_,{id:"".concat(p,"_").concat(x),x:f+_[0],y:y+_[1]}):il(il({},_=_),{},{x:f+_.x,y:y+_.y,id:_.id||"".concat(p,"_").concat(x)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(p,f){for(var y,_=Vi(f),x=Number.MAX_SAFE_INTEGER,N=0;N<_.length;N++){var L=la(p.x,p.y,_[N].x,_[N].y);L<x&&(x=L,y={index:N,anchor:Au(Au({},_[N]),{},{x:_[N].x,y:_[N].y,id:_[N].id})})}return y}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),p=this.x,f=this.y,y=this.rotate;return u.forEach(function(_){var x=_.x,N=_.y,L=LR(new Ks([x,N,1]).translate(-p,-f).rotate(y).translate(p,f)[0],2),X=L[0],Z=L[1];_.x=X,_.y=Z}),u}},{key:"getAnchorInfo",value:function(u){if(!IR(u))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,_=!1;if(f)y=!0,_=!0;else{var x=this.isAllowMoveNode(u,p);typeof x=="boolean"?(y=x,_=x):(y=x.x,_=x.y)}if(y){var N=this.x+u;this.x=N,this.text&&this.moveText(u,0)}if(_){var L=this.y+p;this.y=L,this.text&&this.moveText(0,p)}return y||_}},{key:"getMoveDistance",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,_=!1,x=0,N=0;if(f)y=!0,_=!0;else{var L=this.isAllowMoveNode(u,p);typeof L=="boolean"?(y=L,_=L):(y=L.x,_=L.y)}if(y&&u){var X=this.x+u;this.x=X,this.text&&this.moveText(u,0),x=u}if(_&&p){var Z=this.y+p;this.y=Z,this.text&&this.moveText(0,p),N=p}return[x,N]}},{key:"moveTo",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=u-this.x,_=p-this.y;return!(!f&&!this.isAllowMoveNode(y,_)||(this.text&&this.text&&this.moveText(y,_),this.x=u,this.y=p,0))}},{key:"moveText",value:function(u,p){var f=this.text,y=f.x,_=f.y,x=f.value,N=f.draggable,L=f.editable;this.text={value:x,editable:L,draggable:N,x:y+u,y:_+p}}},{key:"updateText",value:function(u){this.text=il(il({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"setProperty",value:function(u,p){this.properties=il(il({},Object(c.I)(this.properties)),{},Ml({},u,Qo(p))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=il(il({},Object(c.I)(this.properties)),Qo(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,p){this.style=il(il({},this.style),{},Ml({},u,Qo(p)))}},{key:"setStyles",value:function(u){this.style=il(il({},this.style),Qo(u))}},{key:"updateStyles",value:function(u){this.style=il({},Qo(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Ri(this,u)}}],l&&FR(i.prototype,l),a}(),_O=Sr(nn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wO=Sr(nn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),EO=Sr(nn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),OO=Sr(nn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),xO=Sr(nn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),SO=Sr(nn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),AO=Sr(nn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),TO=Sr(nn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),MO=Sr(nn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),PO=Sr(nn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),NO=Sr(nn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kO=Sr(nn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),RO=Sr(nn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),DO=Sr(nn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),CO=Sr(nn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jO=Sr(nn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),IO=Sr(nn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),LO=Sr(nn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),FO=Sr(nn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$O=Sr(nn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),BO=Sr(nn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=Sr(nn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sr(nn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"incoming"),nn.prototype),Sr(nn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"outgoing"),nn.prototype),Sr(nn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"addNodeMoveRules"),nn.prototype),Sr(nn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"move"),nn.prototype),Sr(nn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"getMoveDistance"),nn.prototype),Sr(nn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveTo"),nn.prototype),Sr(nn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveText"),nn.prototype),Sr(nn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateText"),nn.prototype),Sr(nn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setSelected"),nn.prototype),Sr(nn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHovered"),nn.prototype),Sr(nn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setIsShowAnchor"),nn.prototype),Sr(nn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setEnableRotate"),nn.prototype),Sr(nn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHitable"),nn.prototype),Sr(nn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setElementState"),nn.prototype),Sr(nn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperty"),nn.prototype),Sr(nn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperties"),nn.prototype),Sr(nn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"deleteProperty"),nn.prototype),Sr(nn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyle"),nn.prototype),Sr(nn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyles"),nn.prototype),Sr(nn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateStyles"),nn.prototype),Sr(nn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setZIndex"),nn.prototype),Sr(nn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateAttributes"),nn.prototype),nn);function d_(a){return d_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},d_(a)}function HO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function XO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?HO(Object(l),!0).forEach(function(u){YO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):HO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function $R(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function BR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function UR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p_(){return p_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=GR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},p_.apply(this,arguments)}function GR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ih(a))!==null;);return a}function h_(a,i){return h_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h_(a,i)}function VR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ih(a);if(i){var p=Ih(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return WR(this,l)}}function WR(a,i){if(i&&(d_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Em(a)}function Em(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ih(a){return Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ih(a)}function YO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function v_(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Fa,qO,KO,y_=(pf=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&h_(f,y)})(p,a);var i,l,u=VR(p);function p(){var f;BR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return YO(Em(f=u.call.apply(u,[this].concat(_))),"modelType",Er.CIRCLE_NODE),$R(Em(f),"r",zO,Em(f)),f}return i=p,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=p_(Ih(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return XO(XO({},f),wo(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.r;return[{x:f,y:y-_,id:"".concat(this.id,"_0")},{x:f+_,y,id:"".concat(this.id,"_1")},{x:f,y:y+_,id:"".concat(this.id,"_2")},{x:f-_,y,id:"".concat(this.id,"_3")}]}}])&&UR(i.prototype,l),p}(hf),zO=v_(pf.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),v_(pf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"width"),pf.prototype),v_(pf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"height"),pf.prototype),pf);r(129);function m_(a){return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},m_(a)}function g_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ZO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ZO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ZO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function JO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function QO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?JO(Object(l),!0).forEach(function(u){tx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):JO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ex(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function zR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function HR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function b_(){return b_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=XR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},b_.apply(this,arguments)}function XR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Fh(a))!==null;);return a}function __(a,i){return __=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},__(a,i)}function YR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fh(a);if(i){var p=Fh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return qR(this,l)}}function qR(a,i){if(i&&(m_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lh(a)}function Lh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Fh(a){return Fh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fh(a)}function tx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function $h(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Qs,nx,rx,w_=(Fa=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&__(f,y)})(p,a);var i,l,u=YR(p);function p(){var f;zR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return tx(Lh(f=u.call.apply(u,[this].concat(_))),"modelType",Er.DIAMOND_NODE),ex(Lh(f),"rx",qO,Lh(f)),ex(Lh(f),"ry",KO,Lh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=b_(Fh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return QO(QO({},f),wo(y))}},{key:"points",get:function(){var f=this.x,y=this.y,_=this.rx,x=this.ry;return[[f,y-x],[f+_,y],[f,y+x],[f-_,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=g_(_,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=g_(_,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,_){var x=g_(y,2);return{x:x[0],y:x[1],id:"".concat(f.id,"_").concat(_)}})}}])&&HR(i.prototype,l),p}(hf),qO=$h(Fa.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),KO=$h(Fa.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),$h(Fa.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"points"),Fa.prototype),$h(Fa.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"pointsPosition"),Fa.prototype),$h(Fa.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"width"),Fa.prototype),$h(Fa.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"height"),Fa.prototype),Fa);function E_(a){return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E_(a)}function ox(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ix(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ox(Object(l),!0).forEach(function(u){lx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ox(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ax(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function KR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function O_(){return O_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=JR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},O_.apply(this,arguments)}function JR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Uh(a))!==null;);return a}function x_(a,i){return x_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},x_(a,i)}function QR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uh(a);if(i){var p=Uh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return eD(this,l)}}function eD(a,i){if(i&&(E_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bh(a)}function Bh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uh(a){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uh(a)}function lx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Om(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ru,ux,S_=(Qs=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&x_(f,y)})(p,a);var i,l,u=QR(p);function p(){var f;KR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return lx(Bh(f=u.call.apply(u,[this].concat(_))),"modelType",Er.ELLIPSE_NODE),ax(Bh(f),"rx",nx,Bh(f)),ax(Bh(f),"ry",rx,Bh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=O_(Uh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return ix(ix({},f),wo(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.rx,x=this.ry;return[{x:f,y:y-x,id:"".concat(this.id,"_0")},{x:f+_,y,id:"".concat(this.id,"_1")},{x:f,y:y+x,id:"".concat(this.id,"_2")},{x:f-_,y,id:"".concat(this.id,"_3")}]}}])&&ZR(i.prototype,l),p}(hf),nx=Om(Qs.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),rx=Om(Qs.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Om(Qs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"width"),Qs.prototype),Om(Qs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"height"),Qs.prototype),Qs);function A_(a){return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A_(a)}function T_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return sx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return sx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function cx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function fx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?cx(Object(l),!0).forEach(function(u){dx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):cx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function tD(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function nD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function M_(){return M_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=oD(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},M_.apply(this,arguments)}function oD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Gh(a))!==null;);return a}function P_(a,i){return P_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},P_(a,i)}function iD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gh(a);if(i){var p=Gh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return aD(this,l)}}function aD(a,i){if(i&&(A_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xm(a)}function xm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gh(a){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gh(a)}function dx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sm(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var N_,px,k_=(Ru=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&P_(f,y)})(p,a);var i,l,u=iD(p);function p(){var f;nD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return dx(xm(f=u.call.apply(u,[this].concat(_))),"modelType",Er.POLYGON_NODE),tD(xm(f),"points",ux,xm(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=M_(Gh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return fx(fx({},f),wo(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return this.points.map(function(N){return{x:N[0]+f-_/2,y:N[1]+y-x/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=T_(_,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=T_(_,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,_=this.y,x=this.width,N=this.height;return this.points.map(function(L,X){var Z=T_(L,2),pe=Z[0],xe=Z[1];return{x:y+pe-x/2,y:_+xe-N/2,id:"".concat(f.id,"_").concat(X)}})}}])&&rD(i.prototype,l),p}(hf),ux=Sm(Ru.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Sm(Ru.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"pointsPosition"),Ru.prototype),Sm(Ru.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"width"),Ru.prototype),Sm(Ru.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"height"),Ru.prototype),Ru);function R_(a){return R_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},R_(a)}function hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function vx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?hx(Object(l),!0).forEach(function(u){yx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lD(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function D_(){return D_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=cD(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},D_.apply(this,arguments)}function cD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Vh(a))!==null;);return a}function C_(a,i){return C_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},C_(a,i)}function fD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vh(a);if(i){var p=Vh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dD(this,l)}}function dD(a,i){if(i&&(R_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Am(a)}function Am(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vh(a){return Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vh(a)}function yx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Od,j_=(N_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&C_(f,y)})(p,a);var i,l,u=fD(p);function p(){var f;uD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return yx(Am(f=u.call.apply(u,[this].concat(_))),"modelType",Er.RECT_NODE),lD(Am(f),"radius",px,Am(f)),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+_/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-_/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=D_(Vh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return vx(vx({},f),wo(y))}}])&&sD(i.prototype,l),p}(hf),px=function(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(N_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N_);function I_(a){return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},I_(a)}function mx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function gx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mx(Object(l),!0).forEach(function(u){_x(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function pD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function L_(){return L_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=vD(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},L_.apply(this,arguments)}function vD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Wh(a))!==null;);return a}function F_(a,i){return F_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F_(a,i)}function yD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wh(a);if(i){var p=Wh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return mD(this,l)}}function mD(a,i){if(i&&(I_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bx(a)}function bx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wh(a){return Wh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wh(a)}function _x(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function wx(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var $_=(Od=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F_(f,y)})(p,a);var i,l,u=yD(p);function p(){var f;pD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return _x(bx(f=u.call.apply(u,[this].concat(_))),"modelType",Er.TEXT_NODE),f}return i=p,(l=[{key:"getTextStyle",value:function(){var f=L_(Wh(p.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return gx(gx({},f),wo(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&hD(i.prototype,l),p}(hf),wx(Od.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Od.prototype,"width"),Od.prototype),wx(Od.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Od.prototype,"height"),Od.prototype),Od);function B_(a){return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B_(a)}function gD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function U_(a,i){return U_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},U_(a,i)}function _D(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Tm(a);if(i){var p=Tm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wD(this,l)}}function wD(a,i){if(i&&(B_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ex(a)}function Ex(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tm(a){return Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tm(a)}function ED(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fs,Ox,xx,Sx,G_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&U_(f,y)})(p,a);var i,l,u=_D(p);function p(){var f;gD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return ED(Ex(f=u.call.apply(u,[this].concat(_))),"modelType",Er.HTML_NODE),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+_/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-_/2,y,id:"".concat(this.id,"_3")}]}}])&&bD(i.prototype,l),p}(hf);function Ax(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function V_(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function OD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Tx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ny(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Mx=(fs=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Tx(this,"graphModel",void 0),V_(this,"isShowHorizontal",Ox,this),V_(this,"isShowVertical",xx,this),V_(this,"position",Sx,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?Ax(Object(f),!0).forEach(function(y){Tx(u,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):Ax(Object(f)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,p){for(var f=u.x,y=u.y,_=!1,x=!1,N=0;N<p.length;N++){var L=p[N];if(L.id!==u.id&&(f===L.x&&(_=!0),y===L.y&&(x=!0),_&&x))break}return{isShowVertical:_,isShowHorizontal:x,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(u,p){var f,y,_=!1,x=u.id;if(x){var N=this.graphModel.fakerNode;if(N&&N.id===x)y=Wi(N);else{var L=this.graphModel.getNodeModelById(x);y=Wi(L)}}for(var X=0;X<p.length;X++){var Z=p[X];if(Z.id!==u.id){var pe=Wi(Z);if(pe.minY===y.minY||pe.maxY===y.minY){_=!0,f=y.minY;break}if(pe.minY===y.maxY||pe.maxY===y.maxY){_=!0,f=y.maxY;break}}}return Ri({isShowHorizontal:_,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,p){var f,y,_=!1,x=u.id;if(x){var N=this.graphModel.fakerNode;if(N&&N.id===x)y=Wi(N);else{var L=this.graphModel.getNodeModelById(x);y=Wi(L)}}for(var X=0;X<p.length;X++){var Z=p[X];if(Z.id!==u.id){var pe=Wi(Z);if(pe.minX===y.minX||pe.maxX===y.minX){_=!0,f=y.minX;break}if(pe.minX===y.maxX||pe.maxX===y.maxX){_=!0,f=y.maxX;break}}}return Ri({isShowVertical:_,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,p){var f=this.getCenterSnapLine(u,p),y=f.isShowHorizontal,_=f.isShowVertical;if(!y){var x=this.getHorizontalSnapline(u,p);x.isShowHorizontal&&(f.isShowHorizontal=x.isShowHorizontal,f.position.y=x.position.y)}if(!_){var N=this.getVerticalSnapline(u,p);N.isShowVertical&&(f.isShowVertical=N.isShowVertical,f.position.x=N.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var p=u.isShowHorizontal,f=u.isShowVertical,y=u.position;this.position=y,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var p=this.graphModel.nodes,f=this.getSnapLinePosition(u,p);this.setSnaplineInfo(f)}}],l&&OD(i.prototype,l),a}(),Ox=ny(fs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xx=ny(fs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sx=ny(fs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny(fs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"clearSnapline"),fs.prototype),ny(fs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"setNodeSnapLine"),fs.prototype),fs),ry=new Map,Px=function(a){var i=tl(),l=window.requestAnimationFrame(function u(){if(a(),ry.get(i)){var p=window.requestAnimationFrame(u);ry.set(i,p)}});return ry.set(i,l),i},Mm=function(a){var i=ry.get(a);i&&(window.cancelAnimationFrame(i),ry.delete(a))};function W_(a){return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W_(a)}function oy(){return oy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},oy.apply(this,arguments)}function Nx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function iy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Nx(Object(l),!0).forEach(function(u){tc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Nx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return kx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return kx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function SD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function z_(a,i){return z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z_(a,i)}function AD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Pm(a);if(i){var p=Pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return TD(this,l)}}function TD(a,i){if(i&&(W_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(a)}function ec(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pm(a){return Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Pm(a)}function tc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var MD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&z_(f,y)})(p,a);var i,l,u=AD(p);function p(){var f;return function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),tc(ec(f=u.call(this)),"preTargetNode",void 0),tc(ec(f),"sourceRuleResults",void 0),tc(ec(f),"targetRuleResults",void 0),tc(ec(f),"dragHandler",void 0),tc(ec(f),"t",void 0),tc(ec(f),"onDragStart",function(y){var _=y.event,x=f.props,N=x.anchorData,L=x.nodeModel,X=x.graphModel;X.overlapMode,X.selectNodeById(L.id),L.autoToFront&&X.toFront(L.id),X.eventCenter.emit(kn.ANCHOR_DRAGSTART,{data:N,e:_,nodeModel:L}),f.setState({startX:N.x,startY:N.y,endX:N.x,endY:N.y})}),tc(ec(f),"onDragging",function(y){var _=y.event,x=f.props,N=x.graphModel,L=x.nodeModel,X=x.anchorData,Z=N.transformModel,pe=N.eventCenter,xe=N.width,Re=N.height,et=N.editConfigModel,tt=et.autoExpand,yt=et.stopMoveGraph,Bt=_.clientX,hn=_.clientY,dn=N.getPointByClient({x:Bt,y:hn}),Hn=dn.domOverlayPosition,sn=Hn.x,In=Hn.y,wn=dn.canvasOverlayPosition,Dr=wn.x,$r=wn.y;f.t&&Mm(f.t);var sr=[];sn<10?sr=[10,0]:sn+10>xe?sr=[-10,0]:In<10?sr=[0,10]:In+10>Re&&(sr=[0,-10]),f.setState({endX:Dr,endY:$r,dragging:!0}),f.moveAnchorEnd(Dr,$r),sr.length>0&&!yt&&tt&&(f.t=Px(function(){var Hr=xD(sr,2),hi=Hr[0],vi=Hr[1];Z.translate(hi,vi);var wa=f.state,ru=wa.endX,ou=wa.endY;f.setState({endX:ru-hi,endY:ou-vi}),f.moveAnchorEnd(ru-hi,ou-vi)})),pe.emit(kn.ANCHOR_DRAG,{data:X,e:_,nodeModel:L})}),tc(ec(f),"onDragEnd",function(y){var _=y.event;f.t&&Mm(f.t);var x=f.checkEnd(_);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var N=f.props,L=N.graphModel,X=N.nodeModel,Z=N.anchorData;L.eventCenter.emit(kn.ANCHOR_DRAGEND,{data:Z,e:_,nodeModel:X,edgeModel:x})}),tc(ec(f),"checkEnd",function(y){var _=f.props,x=_.graphModel,N=_.nodeModel,L=_.anchorData,X=L.x,Z=L.y,pe=L.id,xe=(x.edgeType,f.state),Re=xe.endX,et=xe.endY,tt=xe.dragging,yt=rs({x:Re,y:et},x);if(f.preTargetNode&&f.preTargetNode.state!==zr.DEFAULT&&f.preTargetNode.setElementState(zr.DEFAULT),tt&&yt&&yt.node){var Bt=yt.node,hn=yt.anchor.id,dn="".concat(N.id,"_").concat(Bt.id,"_").concat(hn,"_").concat(pe),Hn=f.sourceRuleResults.get(dn)||{},sn=Hn.isAllPass,In=Hn.msg,wn=f.targetRuleResults.get(dn)||{},Dr=wn.isAllPass,$r=wn.msg;if(sn&&Dr){Bt.setElementState(zr.DEFAULT);var sr=x.edgeGenerator(N.getData(),x.getNodeModelById(yt.node.id).getData()),Hr=x.addEdge(iy(iy({},sr),{},{sourceNodeId:N.id,sourceAnchorId:pe,startPoint:{x:X,y:Z},targetNodeId:yt.node.id,targetAnchorId:yt.anchor.id,endPoint:{x:yt.anchor.x,y:yt.anchor.y}})),hi=f.props.anchorData;return x.eventCenter.emit(kn.ANCHOR_DROP,{data:hi,e:y,nodeModel:N,edgeModel:Hr}),Hr}var vi=Bt.getData();return x.eventCenter.emit(kn.CONNECTION_NOT_ALLOWED,{data:vi,msg:$r||In||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return i=p,(l=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,_=f.style,x=f.node.getAnchorShape(y);if(x)return x;var N=y.x,L=y.y,X=iy(iy({},_),_.hover);return Object($e.g)("g",null,Object($e.g)(jh,oy({className:"lf-node-anchor-hover"},X,{x:N,y:L})),Object($e.g)(jh,oy({className:"lf-node-anchor"},_,{x:N,y:L})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,_=y.getAnchorIncomingEdge,x=y.getAnchorOutcomingEdge,N=f.anchorData.id;return{incomingEdgeList:_(N),outcomingEdgeList:x(N)}}},{key:"moveAnchorEnd",value:function(f,y){var _=this.props,x=_.graphModel,N=_.nodeModel,L=_.anchorData,X=rs({x:f,y},x);if(X){var Z=X.node,pe=X.anchor.id;if(this.preTargetNode&&this.preTargetNode!==X.node&&this.preTargetNode.setElementState(zr.DEFAULT),L.id===pe)return;this.preTargetNode=Z;var xe="".concat(N.id,"_").concat(Z.id,"_").concat(pe,"_").concat(L.id);if(!this.targetRuleResults.has(xe)){var Re=X.anchor,et=N.isAllowConnectedAsSource(Z,L,Re),tt=Z.isAllowConnectedAsTarget(N,L,Re);this.sourceRuleResults.set(xe,Kl(et)),this.targetRuleResults.set(xe,Kl(tt))}var yt=this.sourceRuleResults.get(xe).isAllPass,Bt=this.targetRuleResults.get(xe).isAllPass;yt&&Bt?Z.setElementState(zr.ALLOW_CONNECT):Z.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,_=f.startY,x=f.endX,N=f.endY;return la(y,_,x,N)>10}},{key:"render",value:function(){var f=this,y=this.state,_=y.startX,x=y.startY,N=y.endX,L=y.endY,X=this.props,Z=X.anchorData.edgeAddable,pe=X.edgeStyle;return Object($e.g)("g",{className:"lf-anchor"},Object($e.g)("g",{onMouseDown:function(xe){Z!==!1&&f.dragHandler.handleMouseDown(xe)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(iy({sourcePoint:{x:_,y:x},targetPoint:{x:N,y:L}},pe)):Object($e.g)(Dh,oy({x1:_,y1:x,x2:N,y2:L},pe,{"pointer-events":"none"}))))}}])&&SD(i.prototype,l),p}($e.a);function Rx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function PD(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Rx(Object(l),!0).forEach(function(u){ND(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Rx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ND(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function kD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Dx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Dx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Cx(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.value,y=a.fontSize,_=a.fill,x=_===void 0?"currentColor":_,N=a.overflowMode,L=N===void 0?"default":N,X=a.textWidth,Z=X===void 0?"":X,pe=a.model,xe={textAnchor:"middle","dominant-baseline":"middle",x:l,y:p,fill:x};if(Object.entries(a).forEach(function(hn){var dn=kD(hn,2),Hn=dn[0],sn=dn[1];H_(sn)!=="object"&&(xe[Hn]=sn)}),f){var Re=String(f).split(/[\r\n]/g),et=Re.length;if(L!=="default"){var tt=pe.BaseType,yt=pe.modelType;if(tt===ao.NODE&&yt!==Er.TEXT_NODE||tt===ao.EDGE&&Z)return function(hn){var dn=hn.value,Hn=hn.fontSize,sn=hn.model,In=hn.fontFamily,wn=In===void 0?"":In,Dr=hn.lineHeight,$r=hn.wrapPadding,sr=$r===void 0?"0, 0":$r,Hr=hn.overflowMode,hi=hn.x,vi=hn.y,wa=sn.width,ru=sn.textHeight,ou=hn.textWidth||wa,oc=String(dn).split(/[\r\n]/g),Cp=oc.length,eg=Hs({rows:oc,style:{fontSize:"".concat(Hn,"px"),width:"".concat(ou,"px"),fontFamily:wn,lineHeight:Dr,padding:sr},rowsLength:Cp,className:"lf-get-text-height"}),jp=sn.height>eg?sn.height:eg;ru&&(jp=ru);var Ad=Hr==="ellipsis";return Ad&&(jp=Hn+2),Object($e.g)("g",null,Object($e.g)("foreignObject",{width:ou,height:jp,x:hi-ou/2,y:vi-jp/2},Object($e.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:jp,width:ou,padding:sr}},Object($e.g)("div",{className:Ad?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Ad?oc.join(""):"",style:PD({},hn)},oc.map(function(Td){return Object($e.g)("div",{className:"lf-node-text--auto-wrap-inner"},Td)})))))}(a)}if(et>1){var Bt=Re.map(function(hn,dn){var Hn=(dn-(et-1)/2)*(y+2);return Object($e.g)("tspan",{className:"lf-text-tspan",x:l,y:p+Hn},hn)});return Object($e.g)("text",xe,Bt)}return Object($e.g)("text",xe,f)}}function X_(a){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},X_(a)}function Y_(){return Y_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Y_.apply(this,arguments)}function RD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return jx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function DD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function q_(a,i){return q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},q_(a,i)}function CD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Nm(a);if(i){var p=Nm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return jD(this,l)}}function jD(a,i){if(i&&(X_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xd(a)}function xd(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Nm(a){return Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nm(a)}function Np(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ix=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&q_(f,y)})(p,a);var i,l,u=CD(p);function p(f){var y;(function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")})(this,p),Np(xd(y=u.call(this)),"dragHandler",void 0),Np(xd(y),"sumDeltaX",0),Np(xd(y),"sumDeltaY",0),Np(xd(y),"stepDrag",void 0),Np(xd(y),"onDragging",function(x){var N=x.deltaX,L=x.deltaY,X=y.props,Z=X.model,pe=RD(X.graphModel.transformModel.fixDeltaXY(N,L),2),xe=pe[0],Re=pe[1];Z.moveText(xe,Re)}),Np(xd(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(zr.TEXT_EDIT)}),Np(xd(y),"mouseDownHandle",function(x){var N=y.props,L=N.draggable,X=N.model,Z=N.graphModel.editConfigModel.nodeTextDraggable;(L||Z)&&(y.stepDrag.model=X,y.stepDrag.handleMouseDown(x))}),f.model;var _=f.draggable;return y.stepDrag=new ee({onDragging:y.onDragging,step:1,isStopPropagation:_}),y}return i=p,(l=[{key:"getShape",value:function(){var f=this.props,y=f.model,_=f.graphModel,x=y.text,N=_.editConfigModel,L=x.value,X=x.x,Z=x.y,pe=x.editable,xe=x.draggable,Re={x:X,y:Z,className:"",value:L};pe?Re.className="lf-element-text":xe||N.nodeTextDraggable?Re.className="lf-text-draggable":Re.className="lf-text-disabled";var et=y.getTextStyle();return Object($e.g)(Cx,Y_({},Re,et,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object($e.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&DD(i.prototype,l),p}($e.a),ID=Xu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,Lx=r(130);function K_(a){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K_(a)}function Z_(){return Z_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Z_.apply(this,arguments)}function LD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function J_(a,i){return J_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},J_(a,i)}function FD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=km(a);if(i){var p=km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return $D(this,l)}}function $D(a,i){if(i&&(K_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zh(a)}function zh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function km(a){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},km(a)}function ay(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var BD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&J_(f,y)})(p,a);var i,l,u=FD(p);function p(f){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),ay(zh(y=u.call(this,f)),"style",{}),ay(zh(y),"defaultAngle",void 0),ay(zh(y),"normal",void 0),ay(zh(y),"stepperDrag",void 0),ay(zh(y),"onDragging",function(_){var x,N=_.event,L=y.props,X=L.graphModel,Z=L.nodeModel,pe=L.eventCenter,xe=X.selectNodes,Re=Z.x,et=Z.y,tt=N.clientX,yt=N.clientY,Bt=X.getPointByClient({x:tt,y:yt}).canvasOverlayPosition,hn=Bt.x,dn=Bt.y,Hn=new J(hn-Re,dn-et),sn=((x=y.normal)===null||x===void 0?void 0:x.angle(Hn))-y.defaultAngle,In=new Zs(-Re,-et).rotate(sn).translate(Re,et).toString();Z.transform=In,Z.rotate=sn;var wn=Object(Lx.map)(xe,function($r){return $r.id});wn.indexOf(Z.id)===-1&&(wn=[Z.id]);var Dr=Object(Lx.reduce)(wn,function($r,sr){var Hr=X.getNodeModelById(sr);return $r[sr]=Hr==null?void 0:Hr.getMoveDistance(0,0,!1),$r},{});wn.forEach(function($r){X.getNodeEdges($r).forEach(function(sr){if(Dr[sr.sourceNodeId]){var Hr=X.getNodeModelById(sr.sourceNodeId).anchors.find(function(vi){return vi.id===sr.sourceAnchorId});sr.updateStartPoint(Hr)}if(Dr[sr.targetNodeId]){var hi=X.getNodeModelById(sr.targetNodeId).anchors.find(function(vi){return vi.id===sr.targetAnchorId});sr.updateEndPoint(hi)}})}),pe.emit(kn.NODE_ROTATE,{e:N,nodeModel:Z})}),y.style=f.style,y.stepperDrag=new ee({onDragging:y.onDragging}),y}return i=p,(l=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,_=y.x,x=y.y,N=_+y.width/2+20,L=x-y.height/2-20;return this.normal=new J(1,0),this.defaultAngle=this.normal.angle(new J(N-_,L-x)),y.defaultAngle=this.defaultAngle,Object($e.g)("g",{className:"lf-rotate-control"},Object($e.g)("g",{onMouseDown:function(X){f.stepperDrag.handleMouseDown(X)}},Object($e.g)(jh,Z_({},this.style,{cx:N,cy:L}))))}}])&&LD(i.prototype,l),p}($e.a);function Q_(a){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q_(a)}var UD=["className"];function Rm(){return Rm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rm.apply(this,arguments)}function GD(a,i){if(a==null)return{};var l,u,p=function(y,_){if(y==null)return{};var x,N,L={},X=Object.keys(y);for(N=0;N<X.length;N++)x=X[N],_.indexOf(x)>=0||(L[x]=y[x]);return L}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function Dm(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Fx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Fx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function $x(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function e0(a,i){return e0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e0(a,i)}function VD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cm(a);if(i){var p=Cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return WD(this,l)}}function WD(a,i){if(i&&(Q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qi(a)}function Qi(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Cm(a){return Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Cm(a)}function ca(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var vf=function(a){(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),_&&e0(y,_)})(f,a);var i,l,u,p=VD(f);function f(y){var _;(function(Z,pe){if(!(Z instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,f),ca(Qi(_=p.call(this)),"t",void 0),ca(Qi(_),"moveOffset",void 0),ca(Qi(_),"stepDrag",void 0),ca(Qi(_),"contextMenuTime",void 0),ca(Qi(_),"mouseUpDrag",void 0),ca(Qi(_),"startTime",void 0),ca(Qi(_),"clickTimer",void 0),ca(Qi(_),"modelDisposer",void 0),ca(Qi(_),"onDragStart",function(Z){var pe=Z.event,xe=pe.clientX,Re=pe.clientY,et=_.props,tt=et.model,yt=et.graphModel.getPointByClient({x:xe,y:Re}).canvasOverlayPosition,Bt=yt.x,hn=yt.y;_.moveOffset={x:tt.x-Bt,y:tt.y-hn}}),ca(Qi(_),"onDragging",function(Z){var pe=Z.event,xe=_.props,Re=xe.model,et=xe.graphModel,tt=et.editConfigModel,yt=tt.stopMoveGraph,Bt=tt.autoExpand,hn=et.transformModel,dn=et.selectNodes,Hn=et.width,sn=et.height,In=et.gridSize;Re.isDragging=!0;var wn=pe.clientX,Dr=pe.clientY,$r=et.getPointByClient({x:wn,y:Dr}).canvasOverlayPosition,sr=$r.x,Hr=$r.y,hi=Dm(hn.CanvasPointToHtmlPoint([sr,Hr]),2),vi=hi[0],wa=hi[1];if(sr+=_.moveOffset.x,Hr+=_.moveOffset.y,sr=El(sr,In),Hr=El(Hr,In),Hn&&sn){if(!Bt||yt||!(vi<0||wa<0||vi>Hn||wa>sn)){var ru=Dm(hn.CanvasPointToHtmlPoint([sr-Re.width/2,Hr-Re.height/2]),2),ou=ru[0],oc=ru[1],Cp=Dm(hn.CanvasPointToHtmlPoint([sr+Re.width/2,Hr+Re.height/2]),2),eg=Cp[0],jp=Cp[1],Ad=Math.max(In,20),Td=[];ou<0?Td=[Ad,0]:eg>et.width?Td=[-Ad,0]:oc<0?Td=[0,Ad]:jp>et.height&&(Td=[0,-Ad]),_.t&&Mm(_.t);var Tj=new Zs(-sr,-Hr).rotate(Re.rotate).translate(sr,Hr).toString();Re.transform=Tj;var tg=dn.map(function(ng){return ng.id});tg.indexOf(Re.id)===-1&&(tg=[Re.id]),Td.length>0&&!yt&&Bt?_.t=Px(function(){var ng=Dm(Td,2),bS=ng[0],_S=ng[1];hn.translate(bS,_S);var Mj=-bS/hn.SCALE_X,Pj=-_S/hn.SCALE_X;et.moveNodes(tg,Mj,Pj)}):et.moveNodes(tg,sr-Re.x,Hr-Re.y)}}else et.moveNode2Coordinate(Re.id,sr,Hr)}),ca(Qi(_),"onDragEnd",function(){_.t&&Mm(_.t),_.props.model.isDragging=!1}),ca(Qi(_),"handleMouseUp",function(){var Z=_.props.model;_.mouseUpDrag=Z.isDragging}),ca(Qi(_),"handleClick",function(Z){var pe=_.mouseUpDrag===!1;if(_.startTime){var xe=_.props,Re=xe.model,et=xe.graphModel;if(pe){var tt={data:Re.getData(),e:Z,position:et.getPointByClient({x:Z.clientX,y:Z.clientY}),isSelected:!1,isMultiple:!1},yt=Z.button===2,Bt=Z.detail===2;if(!yt){var hn=et.editConfigModel,dn=fd(Z,hn);tt.isMultiple=dn,Re.isSelected&&!Bt&&dn?(tt.isSelected=!1,Re.setSelected(!1)):(et.selectNodeById(Re.id,dn),tt.isSelected=!0,_.toFront()),Bt?(hn.nodeTextEdit&&Re.text.editable&&(Re.setSelected(!1),et.setElementStateById(Re.id,zr.TEXT_EDIT)),et.eventCenter.emit(kn.NODE_DBCLICK,tt)):(et.eventCenter.emit(kn.ELEMENT_CLICK,tt),et.eventCenter.emit(kn.NODE_CLICK,tt))}}}}),ca(Qi(_),"handleContextMenu",function(Z){Z.preventDefault();var pe=_.props,xe=pe.model,Re=pe.graphModel,et=xe.getData(),tt=Re.getPointByClient({x:Z.clientX,y:Z.clientY});Re.setElementStateById(xe.id,zr.SHOW_MENU,tt.domOverlayPosition),xe.isSelected||Re.selectNodeById(xe.id),Re.eventCenter.emit(kn.NODE_CONTEXTMENU,{data:et,e:Z,position:tt}),_.toFront()}),ca(Qi(_),"handleMouseDown",function(Z){var pe=_.props,xe=pe.model,Re=pe.graphModel;_.startTime=new Date().getTime(),Re.editConfigModel.adjustNodePosition&&xe.draggable&&_.stepDrag&&_.stepDrag.handleMouseDown(Z)}),ca(Qi(_),"setHoverON",function(Z){var pe=_.props,xe=pe.model,Re=pe.graphModel;if(!xe.isHovered){var et=xe.getData();xe.setHovered(!0),Re.eventCenter.emit(kn.NODE_MOUSEENTER,{data:et,e:Z})}}),ca(Qi(_),"setHoverOFF",function(Z){var pe=_.props,xe=pe.model,Re=pe.graphModel,et=xe.getData();xe.isHovered&&(xe.setHovered(!1),Re.eventCenter.emit(kn.NODE_MOUSELEAVE,{data:et,e:Z}))}),ca(Qi(_),"onMouseOut",function(Z){ID&&_.setHoverOFF(Z)});var x=y.graphModel,N=x.gridSize,L=x.eventCenter,X=y.model;return _.stepDrag=new ee({onDragStart:_.onDragStart,onDragging:_.onDragging,onDragEnd:_.onDragEnd,step:N,eventType:"NODE",isStopPropagation:!1,eventCenter:L,model:X}),_.modelDisposer=Object(c.F)(function(){return _.props},function(Z){Z&&Z.model&&_.stepDrag.setModel(Z.model)}),_}return i=f,u=[{key:"getModel",value:function(y){return y}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,_=this.props,x=_.model,N=_.graphModel,L=x.isSelected,X=x.isHitable,Z=x.isDragging,pe=x.isShowAnchor;return X&&(L||pe)&&!Z?Hf(x.anchors,function(xe,Re){var et=x.getAnchorLineStyle(xe),tt=x.getAnchorStyle(xe);return Object($e.g)(MD,{anchorData:xe,node:y,style:tt,edgeStyle:et,anchorIndex:Re,nodeModel:x,graphModel:N,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,_=y.model,x=y.graphModel,N=_.isSelected,L=_.isHitable,X=_.enableRotate,Z=_.isHovered,pe=_.getRotateControlStyle().style;if(L&&(N||Z)&&X)return Object($e.g)(BD,{graphModel:x,nodeModel:_,eventCenter:x.eventCenter,style:pe})}},{key:"getText",value:function(){var y=this.props,_=y.model,x=y.graphModel;if(_.state===zr.TEXT_EDIT)return"";if(_.text){var N=x.editConfigModel,L=!1;return(_.text.draggable||N.nodeTextDraggable)&&(L=!0),Object($e.g)(Ix,{editable:N.nodeTextEdit&&_.text.editable,model:_,graphModel:x,draggable:L})}}},{key:"getStateClassName",value:function(){var y=this.props.model,_=y.state,x=y.isDragging,N=y.isSelected,L="lf-node";switch(_){case zr.ALLOW_CONNECT:L+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:L+=" lf-node-not-allow";break;default:L+=" lf-node-default"}return x&&(L+=" lf-isDragging"),N&&(L+=" lf-node-selected"),L}},{key:"toFront",value:function(){var y=this.props,_=y.model,x=y.graphModel;_.autoToFront&&x.toFront(_.id)}},{key:"render",value:function(){var y,_=this.props,x=_.model,N=_.graphModel,L=N.editConfigModel,X=L.hideAnchors,Z=L.adjustNodePosition,pe=L.allowRotation,xe=N.gridSize,Re=N.transformModel.SCALE_X,et=x.isHitable,tt=x.draggable,yt=x.transform,Bt=x.getOuterGAttributes(),hn=Bt.className,dn=hn===void 0?"":hn,Hn=GD(Bt,UD),sn=Object($e.g)("g",{className:"lf-node-content"},Object($e.g)("g",{transform:yt},this.getShape(),this.getText(),pe&&this.getRotateControl()),!X&&this.getAnchors());return et?(Z&&tt&&this.stepDrag.setStep(xe*Re),y=Object($e.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Hn),sn)):y=Object($e.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn)},Hn),sn),y}}])&&$x(i.prototype,l),u&&$x(i,u),f}($e.a);function t0(a){return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t0(a)}function n0(){return n0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},n0.apply(this,arguments)}function zD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function HD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r0(a,i){return r0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r0(a,i)}function XD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jm(a);if(i){var p=jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return YD(this,l)}}function YD(a,i){if(i&&(t0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function jm(a){return jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jm(a)}var o0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r0(f,y)})(p,a);var i,l,u=XD(p);function p(){return zD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object($e.g)(wd,n0({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&HD(i.prototype,l),p}(vf);function i0(a){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i0(a)}function a0(){return a0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},a0.apply(this,arguments)}function qD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function KD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function l0(a,i){return l0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l0(a,i)}function ZD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Im(a);if(i){var p=Im(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return JD(this,l)}}function JD(a,i){if(i&&(i0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Im(a){return Im=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Im(a)}var u0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&l0(f,y)})(p,a);var i,l,u=ZD(p);function p(){return qD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.r,N=f.getNodeStyle();return Object($e.g)(jh,a0({},N,{x:y,y:_,r:x}))}}])&&KD(i.prototype,l),p}(vf);function s0(a){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},s0(a)}function QD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Bx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Bx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ux(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(p){var f=QD(p,2),y=f[0],_=f[1];s0(_)!=="object"&&(u[y]=_)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(p){return p.join(",")}).join(" "),Object($e.g)("polygon",u)}function c0(a){return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c0(a)}function f0(){return f0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},f0.apply(this,arguments)}function eC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function tC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function d0(a,i){return d0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d0(a,i)}function nC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Lm(a);if(i){var p=Lm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return rC(this,l)}}function rC(a,i){if(i&&(c0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Lm(a){return Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lm(a)}var p0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&d0(f,y)})(p,a);var i,l,u=nC(p);function p(){return eC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.width,N=f.height,L=f.points,X=f.getNodeStyle(),Z={transform:"matrix(1 0 0 1 ".concat(y-x/2," ").concat(_-N/2,")")};return Object($e.g)("g",Z,Object($e.g)(Ux,f0({},X,{points:L,x:y,y:_})))}}])&&tC(i.prototype,l),p}(vf);function h0(a){return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h0(a)}function v0(){return v0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},v0.apply(this,arguments)}function oC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function iC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function y0(a,i){return y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},y0(a,i)}function aC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fm(a);if(i){var p=Fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return lC(this,l)}}function lC(a,i){if(i&&(h0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fm(a){return Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fm(a)}var m0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&y0(f,y)})(p,a);var i,l,u=aC(p);function p(){return oC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object($e.g)("g",null,Object($e.g)(Ux,v0({},y,{points:f.points,x:f.x,y:f.y})))}}])&&iC(i.prototype,l),p}(vf);function g0(a){return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g0(a)}function uC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Gx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Gx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sC(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.rx,y=f===void 0?4:f,_=a.ry,x=_===void 0?4:_,N=a.className,L={cx:l,cy:p,rx:y,ry:x,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(X){var Z=uC(X,2),pe=Z[0],xe=Z[1];g0(xe)!=="object"&&(L[pe]=xe)}),L.className=N?"lf-basic-shape ".concat(N):"lf-basic-shape",Object($e.g)("ellipse",L)}function b0(a){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},b0(a)}function _0(){return _0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},_0.apply(this,arguments)}function cC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function fC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function w0(a,i){return w0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},w0(a,i)}function dC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$m(a);if(i){var p=$m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return pC(this,l)}}function pC(a,i){if(i&&(b0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function $m(a){return $m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$m(a)}var E0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&w0(f,y)})(p,a);var i,l,u=dC(p);function p(){return cC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object($e.g)(sC,_0({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&fC(i.prototype,l),p}(vf);function O0(a){return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},O0(a)}function Vx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Wx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Vx(Object(l),!0).forEach(function(u){hC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Vx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function hC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function vC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function yC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function x0(a,i){return x0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},x0(a,i)}function mC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bm(a);if(i){var p=Bm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return gC(this,l)}}function gC(a,i){if(i&&(O0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Bm(a){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bm(a)}var S0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&x0(f,y)})(p,a);var i,l,u=mC(p);function p(){return vC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),_=f.width,x=f.height,N=f.x,L=f.y,X=Wx(Wx({},y.background),{},{x:N,y:L-1,width:_,height:x});return Object($e.g)(wd,X)}},{key:"getShape",value:function(){return Object($e.g)("g",null,this.getBackground())}}])&&yC(i.prototype,l),p}(vf);function A0(a){return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A0(a)}function T0(){return T0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},T0.apply(this,arguments)}function bC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _C(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function M0(a,i){return M0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},M0(a,i)}function wC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Um(a);if(i){var p=Um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return EC(this,l)}}function EC(a,i){if(i&&(A0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ly(a)}function ly(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function Gm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var P0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&M0(f,y)})(p,a);var i,l,u=wC(p);function p(){var f;bC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Gm(ly(f=u.call.apply(u,[this].concat(_))),"ref",void 0),Gm(ly(f),"currentProperties",void 0),Gm(ly(f),"preProperties",void 0),Gm(ly(f),"setRef",function(N){f.ref=N}),f}return i=p,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.height,N=f.width,L=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object($e.g)("foreignObject",T0({},L,{x:y-N/2,y:_-x/2,width:N,height:x,ref:this.setRef}))}}])&&_C(i.prototype,l),p}(vf);function N0(a){return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},N0(a)}function k0(){return k0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},k0.apply(this,arguments)}function zx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function kp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?zx(Object(l),!0).forEach(function(u){C0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):zx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function OC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function R0(a,i){return R0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R0(a,i)}function xC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vm(a);if(i){var p=Vm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SC(this,l)}}function SC(a,i){if(i&&(N0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0(a)}function D0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vm(a){return Vm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vm(a)}function C0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var AC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&R0(f,y)})(p,a);var i,l,u=xC(p);function p(f){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),C0(D0(y=u.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),C0(D0(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),_=f.text,x=f.width,N=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(N=kp(kp({},N),y.hover.background)),_&&_.value&&N.fill!=="transparent"){var L,X=y.fontSize,Z=y.overflowMode,pe=y.lineHeight,xe=y.wrapPadding,Re=y.textWidth,et=_.value,tt=_.x,yt=_.y,Bt=String(et).split(/[\r\n]/g),hn=Bt.length;if(Z==="autoWrap"&&Re){var dn=Hs({rows:Bt,style:{fontSize:"".concat(X,"px"),width:"".concat(Re,"px"),lineHeight:pe,padding:xe},rowsLength:hn,className:"lf-get-text-height"});L=kp(kp({},N),{},{x:tt-1,y:yt-1,width:Re,height:dn})}else{Bt&&Bt.forEach(function(Dr){Zn(Dr)});var Hn=is({rows:Bt,fontSize:X,rowsLength:hn}),sn=Hn.width,In=Hn.height;if(Z==="ellipsis"&&(sn=Re||x,In=X+2),typeof N.wrapPadding=="string"){var wn=N.wrapPadding.split(",").filter(function(Dr){return Dr.trim()}).map(function(Dr){return parseFloat(Dr.trim())});wn.length>0&&wn.length<=4&&(wn.length===1?wn=[wn[0],wn[0],wn[0],wn[0]]:wn.length===2?wn=[wn[0],wn[1],wn[0],wn[1]]:wn.length===3&&(wn=[wn[0],wn[1],wn[2],wn[1]]),sn+=wn[1]+wn[3],In+=wn[0]+wn[2],tt+=(wn[1]-wn[3])/2,yt+=(wn[2]-wn[0])/2)}L=kp(kp({},N),{},{x:tt-1,y:yt-1,width:sn,height:In})}return Object($e.g)(wd,L)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,_=y.value,x=y.x,N=y.y;if(_){var L=kp({x,y:N,className:"lf-element-text",value:_},f.getTextStyle());return Object($e.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object($e.g)(Cx,k0({},L,{model:f})))}}}])&&OC(i.prototype,l),p}(Ix);function j0(a){return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},j0(a)}var nc,TC=["text","sourceAnchorId","targetAnchorId"];function Hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function yf(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Hx(Object(l),!0).forEach(function(u){nu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function MC(a,i){if(a==null)return{};var l,u,p=function(y,_){if(y==null)return{};var x,N,L={},X=Object.keys(y);for(N=0;N<X.length;N++)x=X[N],_.indexOf(x)>=0||(L[x]=y[x]);return L}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function PC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Xx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Xx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function NC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function I0(a,i){return I0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},I0(a,i)}function kC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wm(a);if(i){var p=Wm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return RC(this,l)}}function RC(a,i){if(i&&(j0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tu(a)}function tu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wm(a){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wm(a)}function nu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(nc||(nc={}));var Yx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&I0(f,y)})(p,a);var i,l,u=kC(p);function p(f){var y;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),nu(tu(y=u.call(this)),"stepDragData",void 0),nu(tu(y),"stepDrag",void 0),nu(tu(y),"oldEdge",void 0),nu(tu(y),"preTargetNode",void 0),nu(tu(y),"targetRuleResults",void 0),nu(tu(y),"sourceRuleResults",void 0),nu(tu(y),"handleMouseDown",function(L){y.stepDrag&&y.stepDrag.handleMouseDown(L)}),nu(tu(y),"onDragStart",function(){var L=y.props,X=L.x,Z=L.y,pe=L.edgeModel,xe=pe.startPoint,Re=pe.endPoint,et=pe.pointsList;y.oldEdge={startPoint:xe,endPoint:Re,pointsList:et},y.setState({endX:X,endY:Z,dragging:!0})}),nu(tu(y),"onDragging",function(L){var X=L.deltaX,Z=L.deltaY,pe=y.state,xe=pe.endX,Re=pe.endY,et=y.props,tt=et.graphModel,yt=et.type,Bt=tt.transformModel,hn=tt.editConfigModel,dn=PC(Bt.moveCanvasPointByHtml([xe,Re],X,Z),2),Hn=dn[0],sn=dn[1];y.setState({endX:Hn,endY:sn,dragging:!0});var In=y.props.edgeModel,wn=rs({x:xe,y:Re},tt);if(wn&&wn.node&&y.isAllowAdjust(wn).pass){var Dr,$r=In.startPoint,sr=In.endPoint,Hr=In.sourceNode,hi=In.targetNode;yt===nc.SOURCE?Dr={startPoint:{x:wn.anchor.x,y:wn.anchor.y},endPoint:{x:sr.x,y:sr.y},sourceNode:wn.node,targetNode:hi}:yt===nc.TARGET&&(Dr={startPoint:{x:$r.x,y:$r.y},endPoint:{x:wn.anchor.x,y:wn.anchor.y},sourceNode:Hr,targetNode:wn.node}),In.updateAfterAdjustStartAndEnd(Dr)}else yt===nc.SOURCE?In.updateStartPoint({x:Hn,y:sn}):yt===nc.TARGET&&In.updateEndPoint({x:Hn,y:sn});In.text.value&&hn.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),nu(tu(y),"onDragEnd",function(L){var X=L.event;try{var Z;y.setState({dragging:!1});var pe=y.props,xe=pe.graphModel,Re=pe.edgeModel,et=pe.type,tt=y.state,yt=tt.endX,Bt=tt.endY,hn=tt.dragging,dn=rs({x:yt,y:Bt},xe);if(!hn)return;var Hn,sn=!1;if(dn&&dn.node){var In=y.isAllowAdjust(dn),wn=In.pass,Dr=In.msg,$r=In.newTargetNode;if(wn){var sr=Re.getData(),Hr=sr.text,hi=sr.sourceAnchorId,vi=hi===void 0?"":hi,wa=sr.targetAnchorId;Hn=yf(yf({sourceAnchorId:vi,targetAnchorId:wa===void 0?"":wa},MC(sr,TC)),{},{text:(Hr==null?void 0:Hr.value)||""}),et===nc.SOURCE?(Hn=yf(yf({},xe.edgeGenerator(xe.getNodeModelById(dn.node.id).getData(),xe.getNodeModelById(Re.targetNodeId).getData(),Hn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:Re.targetNodeId,endPoint:yf({},Re.endPoint)}),Re.sourceNodeId===dn.node.id&&Re.sourceAnchorId===dn.anchor.id&&(sn=!0)):et===nc.TARGET&&(Hn=yf(yf({},xe.edgeGenerator(xe.getNodeModelById(Re.sourceNodeId).getData(),xe.getNodeModelById(dn.node.id).getData(),Hn)),{},{sourceNodeId:Re.sourceNodeId,startPoint:yf({},Re.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),Re.targetNodeId===dn.node.id&&Re.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var ru=$r.getData();xe.eventCenter.emit(kn.CONNECTION_NOT_ALLOWED,{data:ru,msg:Dr})}}else sn=!0;if(sn)y.recoveryEdge();else{var ou=Re.getData();xe.deleteEdgeById(Re.id);var oc=xe.addEdge(yf({},Hn));xe.eventCenter.emit(kn.EDGE_EXCHANGE_NODE,{data:{newEdge:oc.getData(),oldEdge:ou}})}(Z=y.preTargetNode)===null||Z===void 0||Z.setElementState(zr.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(kn.ADJUST_POINT_DRAGEND,{e:X,data:y.stepDragData})}}),nu(tu(y),"recoveryEdge",function(){var L=y.props.edgeModel,X=y.oldEdge,Z=X.startPoint,pe=X.endPoint,xe=X.pointsList;L.updateStartPoint(Z),L.updateEndPoint(pe),L.modelType!==Er.LINE_EDGE&&(L.pointsList=xe,L.initPoints())}),nu(tu(y),"getAdjustPointStyle",function(){var L=y.props,X=L.graphModel.theme;return L.edgeModel,X.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var _=f.type,x=f.edgeModel,N=f.graphModel.eventCenter;return y.stepDragData={type:_,edgeData:x.getData()},y.stepDrag=new ee({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:N,data:y.stepDragData}),y}return i=p,(l=[{key:"isAllowAdjust",value:function(f){var y=this.props,_=y.edgeModel,x=_.id,N=_.sourceNode,L=_.targetNode,X=_.sourceAnchorId,Z=_.targetAnchorId,pe=y.type,xe=null,Re=null,et=null,tt=null;if(pe===nc.SOURCE?(xe=f.node,Re=L,et=f.anchor,tt=L.getAnchorInfo(Z)):(xe=N,Re=f.node,tt=f.anchor,et=N.getAnchorInfo(X)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=f.node,tt.id===et.id)return{pass:!1,msg:"",newTargetNode:Re};var yt="".concat(xe.id,"_").concat(Re.id,"_").concat(et.id,"_").concat(tt.id);if(!this.targetRuleResults.has(yt)){var Bt=xe.isAllowConnectedAsSource(Re,et,tt,x),hn=Re.isAllowConnectedAsTarget(xe,et,tt,x);this.sourceRuleResults.set(yt,Kl(Bt)),this.targetRuleResults.set(yt,Kl(hn))}var dn=this.sourceRuleResults.get(yt),Hn=dn.isAllPass,sn=dn.msg,In=this.targetRuleResults.get(yt),wn=In.isAllPass,Dr=In.msg,$r=Hn&&wn?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return pe===nc.SOURCE?xe.setElementState($r):Re.setElementState($r),{pass:Hn&&wn,msg:Dr||sn,newTargetNode:Re}}},{key:"render",value:function(){var f=this.props,y=f.x,_=f.y,x=f.getAdjustPointShape,N=f.edgeModel,L=this.state.dragging;return Object($e.g)("g",{pointerEvents:L?"none":"",onMouseDown:this.handleMouseDown},L?"":x(y,_,N))}}])&&NC(i.prototype,l),p}($e.a);function L0(a){return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},L0(a)}function uy(){return uy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},uy.apply(this,arguments)}function DC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function CC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function F0(a,i){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(a,i)}function IC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zm(a);if(i){var p=zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return LC(this,l)}}function LC(a,i){if(i&&(L0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(a)}function ds(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zm(a){return zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zm(a)}function rc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var sy=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F0(f,y)})(p,a);var i,l,u=IC(p);function p(){var f;CC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return rc(ds(f=u.call.apply(u,[this].concat(_))),"startTime",void 0),rc(ds(f),"contextMenuTime",void 0),rc(ds(f),"clickTimer",void 0),rc(ds(f),"textRef",Object($e.f)()),rc(ds(f),"handleHover",function(N,L){var X=f.props,Z=X.model,pe=X.graphModel.eventCenter;Z.setHovered(N);var xe=N?kn.EDGE_MOUSEENTER:kn.EDGE_MOUSELEAVE,Re=Z.getData();pe.emit(xe,{data:Re,e:L})}),rc(ds(f),"setHoverON",function(N){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,N))}),rc(ds(f),"setHoverOFF",function(N){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,N))}),rc(ds(f),"handleContextMenu",function(N){N.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var L=f.props,X=L.model,Z=L.graphModel,pe=Z.getPointByClient({x:N.clientX,y:N.clientY});Z.setElementStateById(X.id,zr.SHOW_MENU,pe.domOverlayPosition),f.toFront(),X.isSelected||Z.selectEdgeById(X.id);var xe=X==null?void 0:X.getData();Z.eventCenter.emit(kn.EDGE_CONTEXTMENU,{data:xe,e:N,position:pe})}),rc(ds(f),"handleMouseDown",function(N){N.stopPropagation(),f.startTime=new Date().getTime()}),rc(ds(f),"handleMouseUp",function(N){if(f.startTime&&!(new Date().getTime()-f.startTime>200||N.button===2)){var L=N.detail===2,X=f.props,Z=X.model,pe=X.graphModel,xe=Z==null?void 0:Z.getData(),Re=pe.getPointByClient({x:N.clientX,y:N.clientY});if(L){var et=pe.editConfigModel,tt=pe.textEditElement;if(tt&&tt.id===Z.id&&pe.setElementStateById(Z.id,zr.DEFAULT),et.edgeTextEdit&&Z.text.editable&&pe.setElementStateById(Z.id,zr.TEXT_EDIT),Z.modelType===Er.POLYLINE_EDGE){var yt=Z,Bt=pe.getPointByClient({x:N.x,y:N.y}).canvasOverlayPosition,hn=Bt.x,dn=Bt.y,Hn=Ql({x:hn,y:dn},yt.points);yt.dbClickPosition=Hn}pe.eventCenter.emit(kn.EDGE_DBCLICK,{data:xe,e:N,position:Re})}else pe.eventCenter.emit(kn.ELEMENT_CLICK,{data:xe,e:N,position:Re}),pe.eventCenter.emit(kn.EDGE_CLICK,{data:xe,e:N,position:Re});var sn=pe.editConfigModel;pe.selectEdgeById(Z.id,fd(N,sn)),f.toFront()}}),f}return i=p,(l=[{key:"getShape",value:function(){return Object($e.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,_=f.graphModel;if(y.state===zr.TEXT_EDIT)return null;var x=!1,N=_.editConfigModel;return(y.text.draggable||N.edgeTextDraggable)&&(x=!0),Object($e.g)(AC,{ref:this.textRef,editable:N.edgeTextEdit&&y.text.editable,model:y,graphModel:_,draggable:x})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=f.isSelected;return{start:y,end:_,hover:this.state.hover,isSelected:x}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,_=f.getArrowStyle(),x=_.refY,N=x===void 0?0:x,L=_.refX,X=L===void 0?2:L,Z=DC(this.getLastTwoPoints(),2),pe=Z[0],xe=Z[1],Re="auto";return pe!==null&&xe!==null&&(Re=Qe(dt({x:xe.x-pe.x,y:xe.y-pe.y,z:0}))),Object($e.g)("g",null,Object($e.g)("defs",null,Object($e.g)("marker",{id:"marker-start-".concat(y),refX:-X,refY:N,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object($e.g)("marker",{id:"marker-end-".concat(y),refX:X,refY:N,overflow:"visible",orient:Re,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object($e.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,_=f.strokeWidth,x=f.offset,N=f.verticalLength;return Object($e.g)("path",{stroke:y,fill:y,strokeWidth:_,transform:"rotate(180)",d:"M 0 0 L ".concat(x," -").concat(N," L ").concat(x," ").concat(N," Z")})}},{key:"getAdjustPointShape",value:function(f,y,_){var x=_.getAdjustPointStyle();return Object($e.g)(jh,uy({className:"lf-edge-adjust-point"},x,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,_=f.graphModel,x=y.getAdjustStart(),N=y.getAdjustEnd();return Object($e.g)("g",null,Object($e.g)(Yx,uy({type:"SOURCE"},x,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:_})),Object($e.g)(Yx,uy({type:"TARGET"},N,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:_})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object($e.g)("g",null)}},{key:"getAppend",value:function(){return Object($e.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,_=f.model;y.toFront(_.id)}},{key:"render",value:function(){var f=this.props,y=f.model,_=y.isSelected,x=y.isHitable,N=y.isShowAdjustPoint;return f.graphModel.animation,Object($e.g)("g",null,Object($e.g)("g",{className:["lf-edge",!x&&"pointer-none",_&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),N&&_?this.getAdjustPoints():"")}}])&&jC(i.prototype,l),p}($e.a);function $0(a){return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$0(a)}function FC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Kx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Kx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var cy=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=FC(l,2),p=u[0],f=u[1],y=$0(f);p!=="style"&&y==="object"||(i[p]=f)}),Object($e.g)("path",i)};function B0(a){return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B0(a)}function U0(){return U0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},U0.apply(this,arguments)}function $C(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function BC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function G0(a,i){return G0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},G0(a,i)}function UC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hm(a);if(i){var p=Hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return GC(this,l)}}function GC(a,i){if(i&&(B0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Hm(a){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hm(a)}var V0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&G0(f,y)})(p,a);var i,l,u=UC(p);function p(){return $C(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=f.isAnimation,N=f.arrowConfig,L=f.getEdgeStyle(),X=f.getEdgeAnimationStyle(),Z=X.strokeDasharray,pe=X.stroke,xe=X.strokeDashoffset,Re=X.animationName,et=X.animationDuration,tt=X.animationIterationCount,yt=X.animationTimingFunction,Bt=X.animationDirection;return Object($e.g)(Dh,U0({},L,{x1:y.x,y1:y.y,x2:_.x,y2:_.y},N,x?{strokeDasharray:Z,stroke:pe,style:{strokeDashoffset:xe,animationName:Re,animationDuration:et,animationIterationCount:tt,animationTimingFunction:yt,animationDirection:Bt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=Rn({start:y,end:_}),N=x.d,L=x.strokeWidth,X=x.fill,Z=x.strokeDasharray,pe=x.stroke;return Object($e.g)(cy,{d:N,fill:X,strokeWidth:L,stroke:pe,strokeDasharray:Z})}}])&&BC(i.prototype,l),p}(sy);function W0(a){return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W0(a)}function VC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Zx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var WC=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=VC(l,2),p=u[0],f=u[1];(p==="style"||W0(f)!=="object")&&(i[p]=f)}),Object($e.g)("polyline",i)};function z0(a){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z0(a)}function Jx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Jx(Object(l),!0).forEach(function(u){gf(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Jx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function H0(){return H0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},H0.apply(this,arguments)}function zC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function HC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function X0(a,i){return X0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},X0(a,i)}function XC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ym(a);if(i){var p=Ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return YC(this,l)}}function YC(a,i){if(i&&(z0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mf(a)}function mf(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ym(a){return Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ym(a)}function gf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Y0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&X0(f,y)})(p,a);var i,l,u=XC(p);function p(){var f;return function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),gf(mf(f=u.call(this)),"drag",void 0),gf(mf(f),"isDragging",void 0),gf(mf(f),"isShowAdjustPointTemp",void 0),gf(mf(f),"appendInfo",void 0),gf(mf(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),gf(mf(f),"onDragging",function(y){var _=y.deltaX,x=y.deltaY,N=f.props,L=N.model,X=N.graphModel;f.isDragging=!0;var Z=X.transformModel,pe=X.editConfigModel,xe=zC(Z.fixDeltaXY(_,x),2),Re=xe[0],et=xe[1],tt=L,yt=pe.adjustEdgeMiddle;f.appendInfo=yt?tt.dragAppendSimple(f.appendInfo,{x:Re,y:et}):tt.dragAppend(f.appendInfo,{x:Re,y:et})}),gf(mf(f),"onDragEnd",function(){var y=f.props,_=y.model,x=y.graphModel.eventCenter,N=_;N.dragAppendEnd(),f.isDragging=!1,N.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,x.emit(kn.EDGE_ADJUST,{data:N.getData()})}),gf(mf(f),"beforeDragStart",function(y,_){_.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=_}),f.drag=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,_=f.isAnimation,x=f.arrowConfig,N=f.getEdgeStyle(),L=f.getEdgeAnimationStyle(),X=L.strokeDasharray,Z=L.stroke,pe=L.strokeDashoffset,xe=L.animationName,Re=L.animationDuration,et=L.animationIterationCount,tt=L.animationTimingFunction,yt=L.animationDirection;return Object($e.g)(WC,H0({points:y},N,x,_?{strokeDasharray:X,stroke:Z,style:{strokeDashoffset:pe,animationName:xe,animationDuration:Re,animationIterationCount:et,animationTimingFunction:tt,animationDirection:yt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,_=f.isSelected,x={start:null,end:null,hover:this.state.hover,isSelected:_},N=mo(y);return N.length>=2&&(x.start=N[N.length-2],x.end=N[N.length-1]),x}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=mo(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,_=f.start,x=f.end;if(_.x===x.x&&_.y===x.y)y="";else{var N={start:_,end:x,offset:10,verticalLength:5},L=F(Xm(Xm({},N),{},{type:"start"})),X=F(Xm(Xm({},N),{},{type:"end"}));y="M".concat(L.leftX," ").concat(L.leftY,` 
      L`).concat(L.rightX," ").concat(L.rightY,` 
      L`).concat(X.rightX," ").concat(X.rightY,`
      L`).concat(X.leftX," ").concat(X.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),_=y.d,x=y.strokeWidth,N=y.fill,L=y.strokeDasharray,X=y.stroke;return Object($e.g)(cy,{d:_,fill:N,strokeWidth:x,stroke:X,strokeDasharray:L})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,_=y.model,x=y.graphModel,N=_.pointsList,L=_.draggable,X=[],Z=N.length,pe=function(Re){var et="lf-polyline-append",tt={start:{x:N[Re].x,y:N[Re].y},end:{x:N[Re+1].x,y:N[Re+1].y},startIndex:Re,endIndex:Re+1,direction:"",dragAble:!0},yt=Object($e.g)("g",{className:et},f.getAppendShape(tt)),Bt=x.editConfigModel,hn=Bt.adjustEdge,dn=Bt.adjustEdgeMiddle;if(hn&&L){var Hn=tt.startIndex,sn=tt.endIndex,In=dn&&(Hn===0||sn===Z-1);tt.dragAble=!In,tt.start.x===tt.end.x?(tt.dragAble&&(et+="-ew-resize"),tt.direction=lo.VERTICAL):tt.start.y===tt.end.y&&(tt.dragAble&&(et+="-ns-resize"),tt.direction=lo.HORIZONTAL),yt=Object($e.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(wn){return f.beforeDragStart(wn,tt)}},Object($e.g)("g",{className:et},f.getAppendShape(tt)))}X.push(yt)},xe=0;xe<Z-1;xe++)pe(xe);return Object($e.g)("g",null,X)}}])&&HC(i.prototype,l),p}(sy);function q0(a){return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},q0(a)}function qC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return eS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return eS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function eS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function K0(){return K0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},K0.apply(this,arguments)}function KC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z0(a,i){return Z0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z0(a,i)}function JC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qm(a);if(i){var p=qm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return QC(this,l)}}function QC(a,i){if(i&&(q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function qm(a){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qm(a)}var J0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Z0(f,y)})(p,a);var i,l,u=JC(p);function p(){return KC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),_=f.path,x=f.isAnimation,N=f.arrowConfig,L=f.getEdgeAnimationStyle(),X=L.strokeDasharray,Z=L.stroke,pe=L.strokeDashoffset,xe=L.animationName,Re=L.animationDuration,et=L.animationIterationCount,tt=L.animationTimingFunction,yt=L.animationDirection;return Object($e.g)(cy,K0({d:_},y,N,x?{strokeDasharray:X,stroke:Z,style:{strokeDashoffset:pe,animationName:xe,animationDuration:Re,animationIterationCount:et,animationTimingFunction:tt,animationDirection:yt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object($e.g)(cy,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,_=f.isSelected,x=f.getArrowStyle().offset,N=f.pointsList.map(function(X){return{x:X.x,y:X.y}}),L=qC(La(N,x),2);return{start:L[0],end:L[1],hover:y,isSelected:_}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,_=f.pointsList.map(function(x){return{x:x.x,y:x.y}});return La(_,y)}}])&&ZC(i.prototype,l),p}(sy);function Q0(a){return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q0(a)}function tS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ej(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function tj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function e1(a,i){return e1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e1(a,i)}function rj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Km(a);if(i){var p=Km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oj(this,l)}}function oj(a,i){if(i&&(Q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Km(a){return Km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Km(a)}var ij=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&e1(f,y)})(p,a);var i,l,u=rj(p);function p(){return tj(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,_=f.style,x=y.start,N=y.end,L={start:x,end:N,offset:_.offset,verticalLength:_.verticalLength,type:"end"},X=F(L),Z=X.leftX,pe=X.leftY,xe=X.rightX,Re=X.rightY;return function(et){for(var tt=1;tt<arguments.length;tt++){var yt=arguments[tt]!=null?arguments[tt]:{};tt%2?tS(Object(yt),!0).forEach(function(Bt){ej(et,Bt,yt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(yt)):tS(Object(yt)).forEach(function(Bt){Object.defineProperty(et,Bt,Object.getOwnPropertyDescriptor(yt,Bt))})}return et}({d:"M".concat(Z," ").concat(pe," L").concat(N.x," ").concat(N.y," L").concat(xe," ").concat(Re," z")},_)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,_=f.strokeWidth,x=f.stroke,N=f.fill;return Object($e.g)(cy,{d:y,fill:N,strokeWidth:_,stroke:x})}},{key:"render",value:function(){return Object($e.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&nj(i.prototype,l),p}($e.a),nS=function(a,i){return vt(a,i)},aj=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},t1=function(){return Nn.a.Date.now()},lj=Math.max,uj=Math.min,sj=function(a,i,l){var u,p,f,y,_,x,N=0,L=!1,X=!1,Z=!0;if(typeof a!="function")throw new TypeError("Expected a function");function pe(Bt){var hn=u,dn=p;return u=p=void 0,N=Bt,y=a.apply(dn,hn)}function xe(Bt){return N=Bt,_=setTimeout(et,i),L?pe(Bt):y}function Re(Bt){var hn=Bt-x;return x===void 0||hn>=i||hn<0||X&&Bt-N>=f}function et(){var Bt=t1();if(Re(Bt))return tt(Bt);_=setTimeout(et,function(hn){var dn=i-(hn-x);return X?uj(dn,f-(hn-N)):dn}(Bt))}function tt(Bt){return _=void 0,Z&&u?pe(Bt):(u=p=void 0,y)}function yt(){var Bt=t1(),hn=Re(Bt);if(u=arguments,p=this,x=Bt,hn){if(_===void 0)return xe(x);if(X)return clearTimeout(_),_=setTimeout(et,i),pe(x)}return _===void 0&&(_=setTimeout(et,i)),y}return i=Yl(i)||0,Rr(l)&&(L=!!l.leading,f=(X="maxWait"in l)?lj(Yl(l.maxWait)||0,i):f,Z="trailing"in l?!!l.trailing:Z),yt.cancel=function(){_!==void 0&&clearTimeout(_),N=0,u=x=p=_=void 0},yt.flush=function(){return _===void 0?y:tt(t1())},yt},cj=r(172);function fj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Sd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var rS,oS,iS,dj=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Sd(this,"undos",[]),Sd(this,"redos",[]),Sd(this,"callbacks",[]),Sd(this,"stopWatch",null),Sd(this,"curData",null),Sd(this,"maxSize",50),Sd(this,"waitTime",100),Sd(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){nS(aj(this.undos),u)||(this.undos.push(u),nS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(kn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var p=this.undos.pop();return this.curData=wo(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=wo(u),u}}},{key:"watch",value:function(u){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(cj.a)(u,sj(function(){var f=u.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&fj(i.prototype,l),a}();function n1(a){return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n1(a)}function pj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return aS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return aS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Rp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?lS(Object(l),!0).forEach(function(u){Dp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function uS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r1(a,i){return r1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r1(a,i)}function hj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zm(a);if(i){var p=Zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vj(this,l)}}function vj(a,i){if(i&&(n1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hh(a)}function Hh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zm(a){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zm(a)}function Dp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var sS,cS,fS,o1=ps((iS=oS=function(a){(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),_&&r1(y,_)})(f,a);var i,l,u,p=hj(f);function f(){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,f),Dp(Hh(y=p.call(this)),"ref",Object($e.f)()),Dp(Hh(y),"__prevText",{type:"",text:"",id:""}),Dp(Hh(y),"keyupHandler",function(_){var x=y.props.graphModel.textEditElement;_.key==="Enter"&&_.altKey&&x.setElementState(0)}),Dp(Hh(y),"inputHandler",function(_){var x=_.target.innerText,N=y.props.graphModel.textEditElement;y.__prevText={type:N.type,text:x.replace(/(\r\n)+$|(\n)+$/,""),id:N.id}}),Dp(Hh(y),"keydownHandler",function(_){_.stopPropagation()}),y.state={style:{left:0,top:0}},y}return i=f,u=[{key:"getDerivedStateFromProps",value:function(y){var _,x=y.graphModel,N=x.transformModel,L=x.theme,X=L.inputText,Z=x.textEditElement;if(Z){var pe;if((pe=Z.text)===null||pe===void 0||!pe.value)if(Z.BaseType===ao.EDGE){var xe=(Z=Z).text,Re=Z.textPosition,et=Re.x,tt=Re.y;xe.x=et,xe.y=tt,Z.setText(xe)}else Z=Z;var yt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(Z.BaseType===ao.EDGE){var Bt=L.edgeText,hn=Bt.overflowMode,dn=Bt.lineHeight,Hn=Bt.wrapPadding,sn=Bt.textWidth;sn&&hn==="autoWrap"&&(_=Rp(Rp({},yt),{},{width:sn,minWidth:sn,lineHeight:dn,padding:Hn}))}else if(Z.BaseType===ao.NODE){var In=L.nodeText,wn=In.overflowMode,Dr=In.lineHeight,$r=In.wrapPadding,sr=In.textWidth,Hr=Z,hi=Hr.width,vi=Hr.modelType,wa=Hr.textWidth||sr||hi;(vi!==Er.TEXT_NODE&&wn==="autoWrap"||vi===Er.TEXT_NODE&&sr)&&(_=Rp(Rp({},yt),{},{width:wa,minWidth:wa,lineHeight:Dr,padding:$r}))}var ru=Z.text,ou=ru.x,oc=ru.y,Cp=pj(N.CanvasPointToHtmlPoint([ou,oc]),2);return{style:Rp(Rp({left:Cp[0],top:Cp[1]},_),X)}}}}],(l=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var _=this.__prevText,x=_.text,N=_.id;y.updateText(N,x),y.eventCenter.emit(kn.TEXT_UPDATE,Rp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var _=document.createRange();_.selectNodeContents(y),_.collapse(!1);var x=window.getSelection();x.removeAllRanges(),x.addRange(_)}}},{key:"render",value:function(){var y,_=this.props.graphModel.textEditElement,x=this.state.style;return _?Object($e.g)("div",{contentEditable:!0,className:"lf-text-input",style:x,ref:this.ref,key:_.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=_.text)===null||y===void 0?void 0:y.value):null}}])&&uS(i.prototype,l),u&&uS(i,u),f}($e.a),Dp(oS,"toolName","textEdit"),rS=iS))||rS,yj=function(a){return a.modelType===Er.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,p=(l.x+u.x)/2,f=(l.y+u.y)/2,y=Math.abs(l.x-u.x)+10,_=Math.abs(l.y-u.y)+10;return{x:p-y/2,y:f-_/2,x1:p+y/2,y1:f+_/2}}(a):a.modelType===Er.POLYLINE_EDGE?function(i){var l=i.points,u=mo(l),p=Wt(u,8),f=p.x,y=p.y,_=p.width,x=p.height;return{x:f-_/2,y:y-x/2,x1:f+_/2,y1:y+x/2}}(a):a.modelType===Er.BEZIER_EDGE?function(i){var l=i.path,u=zn(l),p=Wt(u,8),f=p.x,y=p.y,_=p.width,x=p.height;return{x:f-_/2,y:y-x/2,x1:f+_/2,y1:y+x/2}}(a):void 0};function i1(a){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i1(a)}function dS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||pS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mj(a){return function(i){if(Array.isArray(i))return a1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||pS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pS(a,i){if(a){if(typeof a=="string")return a1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?a1(a,i):void 0}}function a1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function gj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function l1(a,i){return l1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l1(a,i)}function bj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jm(a);if(i){var p=Jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _j(this,l)}}function _j(a,i){if(i&&(i1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xh(a)}function Xh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jm(a){return Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jm(a)}function Yh(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var u1=ps((fS=cS=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&l1(f,y)})(p,a);var i,l,u=bj(p);function p(f){var y;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),Yh(Xh(y=u.call(this)),"stepDrag",void 0),Yh(Xh(y),"handleMouseDown",function(L){y.stepDrag.handleMouseDown(L)}),Yh(Xh(y),"handleWheelEvent",function(L){var X,Z;L.preventDefault();var pe=L.deltaX,xe=L.deltaY,Re=L.clientX,et=L.clientY,tt=L.ctrlKey,yt=new WheelEvent("wheel",{deltaX:pe,deltaY:xe,clientX:Re,clientY:et,ctrlKey:tt});(X=y.props.logicFlow.container)===null||X===void 0||(Z=X.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||Z===void 0||Z.dispatchEvent(yt)}),Yh(Xh(y),"onDragging",function(L){var X=L.deltaX,Z=L.deltaY,pe=y.props.graphModel,xe=pe.getSelectElements(!0);pe.moveNodes(xe.nodes.map(function(Re){return Re.id}),X,Z)}),Yh(Xh(y),"handleContextMenu",function(L){L.preventDefault();var X=y.props,Z=X.graphModel,pe=X.graphModel,xe=pe.eventCenter,Re=pe.selectElements,et=Z.getPointByClient({x:L.clientX,y:L.clientY}),tt={nodes:[],edges:[]};mj(Re.values()).forEach(function(yt){yt.BaseType===ao.NODE&&tt.nodes.push(yt.getData()),yt.BaseType===ao.EDGE&&tt.edges.push(yt.getData())}),xe.emit(kn.SELECTION_CONTEXTMENU,{data:tt,e:L,position:et})});var _=f.graphModel,x=_.gridSize,N=_.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,step:x,eventType:"SELECTION",eventCenter:N}),y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,_=f.transformModel;if(!(y.size<=1)){var x=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,X=Number.MIN_SAFE_INTEGER;y.forEach(function(Re){var et={x:0,y:0,x1:0,y1:0};Re.BaseType===ao.NODE&&(et=function(tt){var yt=tt.x,Bt=tt.y,hn=tt.width,dn=tt.height;return{x:yt-hn/2,y:Bt-dn/2,x1:yt+hn/2,y1:Bt+dn/2}}(Re)),Re.BaseType===ao.EDGE&&(et=yj(Re)),x=Math.min(x,et.x),N=Math.min(N,et.y),L=Math.max(L,et.x1),X=Math.max(X,et.y1)});var Z=dS(_.CanvasPointToHtmlPoint([x,N]),2);x=Z[0],N=Z[1];var pe=dS(_.CanvasPointToHtmlPoint([L,X]),2);L=pe[0],X=pe[1];var xe={left:"".concat(x-10,"px"),top:"".concat(N-10,"px"),width:"".concat(L-x+20,"px"),height:"".concat(X-N+20,"px")};return Object($e.g)("div",{className:"lf-multiple-select",style:xe,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&gj(i.prototype,l),p}($e.a),Yh(cS,"toolName","multipleSelect"),sS=fS))||sS;function wj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ej=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Qm(this,"tools",void 0),Qm(this,"components",void 0),Qm(this,"toolMap",new Map),Qm(this,"instance",void 0),this.instance=u,this.isDisabledTool(o1.toolName)||this.registerTool(o1.toolName,o1),this.isDisabledTool(u1.toolName)||this.registerTool(u1.toolName,u1);var p=u.graphModel;p.eventCenter.on("".concat(kn.GRAPH_TRANSFORM,",").concat(kn.NODE_CLICK,",").concat(kn.BLANK_CLICK," "),function(){var f=p.textEditElement,y=p.editConfigModel,_=y.edgeTextEdit,x=y.nodeTextEdit;(_||x)&&f&&p.textEditElement.setElementState(zr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,p){this.toolMap.set(u,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&wj(i.prototype,l),a}(),Oj=r(173),xj=r.n(Oj);function Sj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var hS=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),s1(this,"mousetrap",void 0),s1(this,"options",void 0),s1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var p=u.lf;this.target=p.container,this.mousetrap=new xj.a(this.target),u.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,p=this.options.keyboard.shortcuts;if(p)if(ro(p))p.forEach(function(x){var N=x.keys,L=x.callback,X=x.action;return u.on(N,L,X)});else{var f=p.keys,y=p.callback,_=p.action;this.on(f,y,_)}}},{key:"on",value:function(u,p,f){this.mousetrap.bind(this.getKeys(u),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,p){this.mousetrap.unbind(this.getKeys(u),p)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var p=this;return(Array.isArray(u)?u:[u]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Sj(i.prototype,l),a}(),Aj=hS,bf=null;function vS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function yS(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var qh=40,c1=40;function f1(a){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f1(a)}function mS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function fy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mS(Object(l),!0).forEach(function(u){si(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function gS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function si(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var d1=Symbol("plugin register by Logicflow.use"),p1=function(){function a(p){var f,y,_=this;(function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")})(this,a),si(this,"container",void 0),si(this,"width",void 0),si(this,"height",void 0),si(this,"graphModel",void 0),si(this,"history",void 0),si(this,"viewMap",new Map),si(this,"tool",void 0),si(this,"keyboard",void 0),si(this,"dnd",void 0),si(this,"options",void 0),si(this,"snaplineModel",void 0),si(this,"components",[]),si(this,"plugins",void 0),si(this,"extension",{}),si(this,"adapterIn",void 0),si(this,"adapterOut",void 0),si(this,"getView",function(x){return _.viewMap.get(x)}),p=hO(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new Dk(fy({},p)),this.tool=new Ej(this),this.history=new dj(this.graphModel.eventCenter),this.dnd=new PR({lf:this}),this.keyboard=new Aj({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new Mx(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(x){var N=x.data;y.setNodeSnapLine(N)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(x,N){var L=x.keyboard,X=L.options.keyboard;L.on(["cmd + c","ctrl + c"],function(){if(c1=qh,!X.enabled||N.textEditElement)return!0;var Z=x.options.guards,pe=N.getSelectElements(!1);return Z&&Z.beforeClone&&!Z.beforeClone(pe)||pe.nodes.length===0&&pe.edges.length===0?(bf=null,!0):((bf=pe).nodes.forEach(function(xe){return vS(xe,qh)}),bf.edges.forEach(function(xe){return yS(xe,qh)}),!1)}),L.on(["cmd + v","ctrl + v"],function(){if(!X.enabled||N.textEditElement)return!0;if(bf&&(bf.nodes||bf.edges)){x.clearSelectElements();var Z=x.addElements(bf,c1);if(!Z)return!0;Z.nodes.forEach(function(pe){return x.selectElementById(pe.id,!0)}),Z.edges.forEach(function(pe){return x.selectElementById(pe.id,!0)}),bf.nodes.forEach(function(pe){return vS(pe,qh)}),bf.edges.forEach(function(pe){return yS(pe,qh)}),c1+=qh}return!1}),L.on(["cmd + z","ctrl + z"],function(){return!X.enabled||!!N.textEditElement||(x.undo(),!1)}),L.on(["cmd + y","ctrl + y"],function(){return!X.enabled||!!N.textEditElement||(x.redo(),!1)}),L.on(["backspace"],function(){if(!X.enabled||N.textEditElement)return!0;var Z=N.getSelectElements(!0);return x.clearSelectElements(),Z.edges.forEach(function(pe){return x.deleteEdge(pe.id)}),Z.nodes.forEach(function(pe){return x.deleteNode(pe.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var _={BaseEdge:sy,BaseEdgeModel:gd,BaseNode:vf,BaseNodeModel:hf,RectNode:o0,RectNodeModel:j_,CircleNode:u0,CircleNodeModel:y_,PolygonNode:p0,PolygonNodeModel:k_,TextNode:S0,TextNodeModel:$_,LineEdge:V0,LineEdgeModel:Di,DiamondNode:m0,DiamondNodeModel:w_,PolylineEdge:Y0,PolylineEdgeModel:sf,BezierEdge:J0,BezierEdgeModel:c_,EllipseNode:E0,EllipseNodeModel:S_,HtmlNode:P0,HtmlNodeModel:G_,h:$e.g,type:p};this.viewMap.forEach(function(Z){var pe=Z.extendKey;pe&&(_[pe]=Z)}),this.graphModel.modelMap.forEach(function(Z){var pe=Z.extendKey;pe&&(_[pe]=Z)});var x=f(_),N=x.view,L=x.model,X=N;y&&!X.isObervered&&(X.isObervered=!0,X=xn(X)),this.setView(p,X),this.graphModel.setModel(p,L)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=xn(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){p.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:o0,model:j_,type:"rect"}),this.registerElement({type:"circle",view:u0,model:y_}),this.registerElement({type:"polygon",view:p0,model:k_}),this.registerElement({type:"line",view:V0,model:Di}),this.registerElement({type:"polyline",view:Y0,model:sf}),this.registerElement({type:"bezier",view:J0,model:c_}),this.registerElement({type:"text",view:S0,model:$_}),this.registerElement({type:"ellipse",view:E0,model:S_}),this.registerElement({type:"diamond",view:m0,model:w_}),this.registerElement({type:"html",view:P0,model:G_})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&y&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,y=p.coordinate,_=p.id;if(!y){var x=this.getNodeModelById(_);x&&(y=x.getData());var N=this.getEdgeModelById(_);N&&(y=N.textPosition)}var L=y,X=L.x,Z=L.y;f.focusOn(X,Z,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,y,_,x=this.getModelById(p);return!!x&&(y=(_=(si(f={},ao.NODE,this.deleteNode),si(f,ao.EDGE,this.deleteEdge),f)[x.BaseType])===null||_===void 0?void 0:_.call(this,p))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,y)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var y=f.getData(),_=this.options.guards,x=!_||!_.beforeDelete||_.beforeDelete(y);return x&&this.graphModel.deleteNode(p),x}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,y=this.graphModel.edgesMap[p];if(!y)return!1;var _=y.model.getData(),x=!f||!f.beforeDelete||f.beforeDelete(_);return x&&this.graphModel.deleteEdgeById(p),x}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,y=p.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,y=p.sourceNodeId,_=p.targetNodeId;if(y&&_){var x=[];return f.forEach(function(X){X.sourceNodeId===y&&X.targetNodeId===_&&x.push(X)}),x}if(y){var N=[];return f.forEach(function(X){X.sourceNodeId===y&&N.push(X)}),N}if(_){var L=[];return f.forEach(function(X){X.targetNodeId===_&&L.push(X)}),L}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.setProperties(Qo(f))}},{key:"deleteProperty",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,y=p.nodes,_=p.edges,x={},N={nodes:[],edges:[]},L=0;L<y.length;L++){var X=y[L],Z=X.id,pe=this.addNode(X);if(!pe)return;Z&&(x[Z]=pe.id),N.nodes.push(pe)}return _.forEach(function(xe){var Re=xe.sourceNodeId,et=xe.targetNodeId;x[Re]&&(Re=x[Re]),x[et]&&(et=x[et]);var tt=f.graphModel.addEdge(fy(fy({},xe),{},{sourceNodeId:Re,targetNodeId:et}));N.edges.push(tt)}),N}},{key:"getAreaElement",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],_=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,y,_,x).map(function(N){return N.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return this.adapterOut.apply(this,[p].concat(y))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,y=f.editConfigModel,_=f.transformModel;y.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&_.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=Qo(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=Qo(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,y=p.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=(p=this.plugins)!==null&&p!==void 0?p:a.extensions;_.forEach(function(x){var N=null,L=null;x[d1]?(N=x.extension,L=x.props):N=x;var X=N.pluginName||N.name;y.indexOf(X)===-1&&f.installPlugin(N,L)})}},{key:"installPlugin",value:function(p,f){if(f1(p)==="object"){var y=p.install,_=p.render;return y&&y.call(p,this,a),_&&this.components.push(_.bind(p)),void(this.extension[p.pluginName]=p)}var x=p,N=new x({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:f});N.render&&this.components.push(N.render.bind(N)),this.extension[x.pluginName]=N}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var y=new f(fy(fy({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(Qo(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object($e.j)(Object($e.g)(TR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(kn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],u=[{key:"use",value:function(p,f){var y,_,x=p.pluginName;x||(x=p.name);var N=(y=this.extensions.get(x))===null||y===void 0?void 0:y.extension;N&&N.destroy&&N.destroy(),this.extensions.set(x,(si(_={},d1,d1),si(_,"extension",p),si(_,"props",f),_))}}],l&&gS(i.prototype,l),u&&gS(i,u),a}();function ps(a){return xn(a)}si(p1,"extensions",new Map),o.default=p1}])})})(rw,rw.exports);var cn=rw.exports;const YV=DI(cn);var qV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),KV=(globalThis==null?void 0:globalThis._ids)||new qV;function Lv(){return KV.next()}var m2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){m2(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){m2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var g2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),kg=globalThis&&globalThis.__assign||function(){return kg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},kg.apply(this,arguments)};(function(e){g2(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){g2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,h=e.prototype.getShape.call(this);return cn.h("g",{},h,cn.h("circle",kg(kg({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var b2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ey=globalThis&&globalThis.__assign||function(){return Ey=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ey.apply(this,arguments)};(function(e){b2(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){b2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,h=n.points,v=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",Ey(Ey({},v),{x:o,y:r,points:h})),cn.h("path",Ey({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var _2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rg=globalThis&&globalThis.__assign||function(){return Rg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rg.apply(this,arguments)};(function(e){_2(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){_2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,h=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,h=n.radius,v=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Rg(Rg({},v),{x:o-s/2,y:r-c/2,rx:h,ry:h,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var w2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ow=globalThis&&globalThis.__assign||function(){return ow=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ow.apply(this,arguments)};(function(e){w2(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){w2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,h=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,h=n.radius,v=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",ow({x:o-s/2,y:r-c/2,rx:h,ry:h,width:s,height:c},v)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var E2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){E2(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){E2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var rA={width:40,height:40},oA={width:40,height:40},iA={width:40,height:40},aA={width:100,height:80},lA={width:100,height:80},ZV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),JV=(globalThis==null?void 0:globalThis._ids)||new ZV;function uA(){return JV.next()}function O2(e){return Object.prototype.toString.call(e)}function QV(e){return"  ".repeat(e)}function Dg(e){var t=e;return O2(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Dg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Dg(n)})),t}function e7(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Dg(e)).replace(/"/g,"'")}return t}var Kh=`	
`;function yg(e,t,n){var o=QV(n),r="";if(t==="#text")return Kh+o+e;if(t==="#cdata-section")return Kh+o+"<![CDATA["+e+"]]>";if(t==="#comment")return Kh+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+e7(e)+'"';if(Array.isArray(e))e.forEach(function(v){r+=yg(v,t,n+1)});else if(O2(e)==="[object Object]"){var s=Object.keys(e),c="",h="";r+=(n===0?"":Kh+o)+"<"+t,s.forEach(function(v){v.charAt(0)==="-"?c+=yg(e[v],v,n+1):h+=yg(e[v],v,n+1)}),r+=c+(h!==""?">"+h+(Kh+o)+"</"+t+">":" />")}else r+=Kh+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function t7(e){var t="";for(var n in e)t+=yg(e[n],n,0);return t}var sl=function(){};sl.ObjTree=function(){return this};sl.ObjTree.VERSION="0.23";sl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;sl.ObjTree.prototype.attr_prefix="-";sl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};sl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,h=o.onComplete;o.onComplete=function(b){var w;b&&b.responseXML&&b.responseXML.documentElement&&(w=s.parseDOM(b.responseXML.documentElement)),c(w,b),h&&h(b)}}else o.asynchronous=!1;var v;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(v=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(v=g.transport)}if(n)return v;if(v&&v.responseXML&&v.responseXML.documentElement)return this.parseDOM(v.responseXML.documentElement)};sl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};sl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var h=!0;n&&(h=!1);for(var r=0;r<e.childNodes.length&&h;r++){var v=e.childNodes[r].nodeType;v==3||v==4||v==8||(h=!1)}if(h){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};sl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};sl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};sl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),h=n.join("");return typeof e>"u"||e==null||(n.length>0?h.match(/\n/)?h="<"+e+c+`>
`+h+"</"+e+`>
`:h="<"+e+c+">"+h+"</"+e+`>
`:h="<"+e+c+` />
`),h};sl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};sl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};sl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var n7=function(e){return new sl.ObjTree().parseXML(e)},r7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),iw=globalThis&&globalThis.__assign||function(){return iw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iw.apply(this,arguments)},gb=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},cc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(cc||(cc={}));var x2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],sA=["properties","startPoint","endPoint","pointsList"];function cA(e){var t=e?sA.concat(e):sA;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var h=gb(c,2),v=h[0],g=h[1];typeof g!="object"?v.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(v)?s[v]=g:s["-"+v]=g:t.includes(v)?s["-"+v]=o(g):s[v]=o(g)}),s)}return o(n)}}function Cg(e){var t={};return Object.entries(e).forEach(function(n){var o=gb(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Dg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Cg(s):Array.isArray(s)?t[r]=s.map(function(c){return Cg(c)}):t[r]=s}),t}function o7(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,h={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(h["-name"]=s.text.value),s.properties){var v=cA(n)(s.properties);Object.assign(h,v)}o.set(s.id,h),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(h):e[s.type]=[e[s.type],h]:e[s.type]=h});var r=t.edges.map(function(s){var c,h,v=o.get(s.targetNodeId);v["bpmn:incoming"]?Array.isArray(v["bpmn:incoming"])?v["bpmn:incoming"].push(s.id):v["bpmn:incoming"]=[v["bpmn:incoming"],s.id]:v["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(h=s.text)===null||h===void 0?void 0:h.value),s.properties){var b=cA(n)(s.properties);Object.assign(g,b)}return g});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[cc.FLOW]=r}function i7(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(h){var v=h.x,g=h.y;return{"-x":v,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,h=n.x,v=n.y,g=Gd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),h-=s/2,v-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":h,"-y":v,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function a7(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===cc.FLOW){var h=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=u7(c,h)}else{var v=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(l7(c,v,s))}}})}return{nodes:t,edges:n}}function l7(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var h;Array.isArray(t)?h=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):h=t;var v=fA(h,n,c);o.push(v)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=fA(r,n,e);o.push(s)}return o}function fA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Gd.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var h;Object.entries(n).forEach(function(w){var O=gb(w,2),S=O[0],P=O[1];x2.indexOf(S)===-1&&(h||(h={}),h[S]=P)}),h&&(h=Cg(h));var v;if(s&&(v={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];v.x=Number(g["-x"])+Number(g["-width"])/2,v.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:o,y:r,properties:h};return v&&(b.text=v),b}function u7(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(dA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(dA(o,e))}return n}function dA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(v){s<v.length&&(s=v.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(v){var g=gb(v,2),b=g[0],w=g[1];x2.indexOf(b)===-1&&(c||(c={}),c[b]=w)}),c&&(c=Cg(c));var h={id:t["-id"],type:cc.FLOW,pointsList:e["di:waypoint"].map(function(v){return{x:Number(v["-x"]),y:Number(v["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var Gd=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=iw({},n.processAttributes);o7(c,r,s);var h={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};i7(h,r);var v=n.definitionAttributes;v["bpmn:process"]=c,v["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":h};var g={"bpmn:definitions":v};return g},this.adapterIn=function(r){if(r)return a7(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+uA()},this.definitionAttributes={"-id":"Definitions_"+uA(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Gd.shapeConfigMap.set(cc.START,{width:rA.width,height:rA.height});Gd.shapeConfigMap.set(cc.END,{width:oA.width,height:oA.height});Gd.shapeConfigMap.set(cc.GATEWAY,{width:iA.width,height:iA.height});Gd.shapeConfigMap.set(cc.SYSTEM,{width:aA.width,height:aA.height});Gd.shapeConfigMap.set(cc.USER,{width:lA.width,height:lA.height});(function(e){r7(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=n7(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var h=o.adapterOut(s,c);return t7(h)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Gd);var s7=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),c7=(globalThis==null?void 0:globalThis._ids)||new s7;function f7(){return c7.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var pA=globalThis&&globalThis.__assign||function(){return pA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pA.apply(this,arguments)},d7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var hA=globalThis&&globalThis.__assign||function(){return hA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hA.apply(this,arguments)},p7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var vA=globalThis&&globalThis.__assign||function(){return vA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vA.apply(this,arguments)},h7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var yA=globalThis&&globalThis.__assign||function(){return yA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA.apply(this,arguments)},v7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var mA=globalThis&&globalThis.__assign||function(){return mA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mA.apply(this,arguments)},y7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var gA=globalThis&&globalThis.__assign||function(){return gA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gA.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var bA=globalThis&&globalThis.__assign||function(){return bA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bA.apply(this,arguments)},m7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var cE,xi,S2,Up,_A,A2,aw,T2,fE,lw,uw,sw={},M2=[],g7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dE=Array.isArray;function kd(e,t){for(var n in t)e[n]=t[n];return e}function pE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Oy(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?cE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return mg(e,c,o,r,null)}function mg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++S2,__i:-1,__u:0};return r==null&&xi.vnode!=null&&xi.vnode(s),s}function hE(e){return e.children}function pv(e,t){this.props=e,this.context=t}function xv(e,t){if(t==null)return e.__?xv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?xv(e):null}function P2(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return P2(e)}}function wA(e){(!e.__d&&(e.__d=!0)&&Up.push(e)&&!jg.__r++||_A!==xi.debounceRendering)&&((_A=xi.debounceRendering)||A2)(jg)}function jg(){var e,t,n,o,r,s,c,h;for(Up.sort(aw);e=Up.shift();)e.__d&&(t=Up.length,o=void 0,s=(r=(n=e).__v).__e,c=[],h=[],n.__P&&((o=kd({},r)).__v=r.__v+1,xi.vnode&&xi.vnode(o),R2(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,c,s??xv(r),!!(32&r.__u),h),o.__v=r.__v,o.__.__k[o.__i]=o,w7(c,o,h),o.__e!=s&&P2(o)),Up.length>t&&Up.sort(aw));jg.__r=0}function N2(e,t,n,o,r,s,c,h,v,g,b){var w,O,S,P,A,k,j=o&&o.__k||M2,R=t.length;for(v=b7(n,t,j,v,R),w=0;w<R;w++)(S=n.__k[w])!=null&&(O=S.__i===-1?sw:j[S.__i]||sw,S.__i=w,k=R2(e,S,O,r,s,c,h,v,g,b),P=S.__e,S.ref&&O.ref!=S.ref&&(O.ref&&vE(O.ref,null,S),b.push(S.ref,S.__c||P,S)),A==null&&P!=null&&(A=P),4&S.__u||O.__k===S.__k?v=k2(S,v,e):typeof S.type=="function"&&k!==void 0?v=k:P&&(v=P.nextSibling),S.__u&=-7);return n.__e=A,v}function b7(e,t,n,o,r){var s,c,h,v,g,b=n.length,w=b,O=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(v=s+O,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?mg(null,c,null,null,null):dE(c)?mg(hE,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?mg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,h=null,(g=c.__i=_7(c,n,v,w))!==-1&&(w--,(h=n[g])&&(h.__u|=2)),h==null||h.__v===null?(g==-1&&O--,typeof c.type!="function"&&(c.__u|=4)):g!=v&&(g==v-1?O--:g==v+1?O++:(g>v?O--:O++,c.__u|=4))):e.__k[s]=null;if(w)for(s=0;s<b;s++)(h=n[s])!=null&&!(2&h.__u)&&(h.__e==o&&(o=xv(h)),D2(h,h));return o}function k2(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=k2(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=xv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _7(e,t,n,o){var r,s,c=e.key,h=e.type,v=t[n];if(v===null||v&&c==v.key&&h===v.type&&!(2&v.__u))return n;if(o>(v!=null&&!(2&v.__u)?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((v=t[r])&&!(2&v.__u)&&c==v.key&&h===v.type)return r;r--}if(s<t.length){if((v=t[s])&&!(2&v.__u)&&c==v.key&&h===v.type)return s;s++}}return-1}function EA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||g7.test(t)?n:n+"px"}function ig(e,t,n,o,r){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||EA(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||EA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(T2,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=fE,e.addEventListener(t,s?uw:lw,s)):e.removeEventListener(t,s?uw:lw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function OA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=fE++;else if(t.t<n.u)return;return n(xi.event?xi.event(t):t)}}}function R2(e,t,n,o,r,s,c,h,v,g){var b,w,O,S,P,A,k,j,R,$,V,H,Y,Q,W,I,z,K=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(v=!!(32&n.__u),s=[h=t.__e=n.__e]),(b=xi.__b)&&b(t);e:if(typeof K=="function")try{if(j=t.props,R="prototype"in K&&K.prototype.render,$=(b=K.contextType)&&o[b.__c],V=b?$?$.props.value:b.__:o,n.__c?k=(w=t.__c=n.__c).__=w.__E:(R?t.__c=w=new K(j,V):(t.__c=w=new pv(j,V),w.constructor=K,w.render=O7),$&&$.sub(w),w.props=j,w.state||(w.state={}),w.context=V,w.__n=o,O=w.__d=!0,w.__h=[],w._sb=[]),R&&w.__s==null&&(w.__s=w.state),R&&K.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=kd({},w.__s)),kd(w.__s,K.getDerivedStateFromProps(j,w.__s))),S=w.props,P=w.state,w.__v=t,O)R&&K.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),R&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(R&&K.getDerivedStateFromProps==null&&j!==S&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(j,V),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(j,w.__s,V)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(w.props=j,w.state=w.__s,w.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(q){q&&(q.__=t)}),H=0;H<w._sb.length;H++)w.__h.push(w._sb[H]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(j,w.__s,V),R&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(S,P,A)})}if(w.context=V,w.props=j,w.__P=e,w.__e=!1,Y=xi.__r,Q=0,R){for(w.state=w.__s,w.__d=!1,Y&&Y(t),b=w.render(w.props,w.state,w.context),W=0;W<w._sb.length;W++)w.__h.push(w._sb[W]);w._sb=[]}else do w.__d=!1,Y&&Y(t),b=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++Q<25);w.state=w.__s,w.getChildContext!=null&&(o=kd(kd({},o),w.getChildContext())),R&&!O&&w.getSnapshotBeforeUpdate!=null&&(A=w.getSnapshotBeforeUpdate(S,P)),h=N2(e,dE(I=b!=null&&b.type===hE&&b.key==null?b.props.children:b)?I:[I],t,n,o,r,s,c,h,v,g),w.base=t.__e,t.__u&=-161,w.__h.length&&c.push(w),k&&(w.__E=w.__=null)}catch(q){if(t.__v=null,v||s!=null)if(q.then){for(t.__u|=v?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;s[s.indexOf(h)]=null,t.__e=h}else for(z=s.length;z--;)pE(s[z]);else t.__e=n.__e,t.__k=n.__k;xi.__e(q,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):h=t.__e=E7(n.__e,t,n,o,r,s,c,v,g);return(b=xi.diffed)&&b(t),128&t.__u?void 0:h}function w7(e,t,n){for(var o=0;o<n.length;o++)vE(n[o],n[++o],n[++o]);xi.__c&&xi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){xi.__e(s,r.__v)}})}function E7(e,t,n,o,r,s,c,h,v){var g,b,w,O,S,P,A,k=n.props,j=t.props,R=t.type;if(R=="svg"?r="http://www.w3.org/2000/svg":R=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((S=s[g])&&"setAttribute"in S==!!R&&(R?S.localName==R:S.nodeType==3)){e=S,s[g]=null;break}}if(e==null){if(R==null)return document.createTextNode(j);e=document.createElementNS(r,R,j.is&&j),h&&(xi.__m&&xi.__m(t,s),h=!1),s=null}if(R===null)k===j||h&&e.data===j||(e.data=j);else{if(s=s&&cE.call(e.childNodes),k=n.props||sw,!h&&s!=null)for(k={},g=0;g<e.attributes.length;g++)k[(S=e.attributes[g]).name]=S.value;for(g in k)if(S=k[g],g!="children"){if(g=="dangerouslySetInnerHTML")w=S;else if(!(g in j)){if(g=="value"&&"defaultValue"in j||g=="checked"&&"defaultChecked"in j)continue;ig(e,g,null,S,r)}}for(g in j)S=j[g],g=="children"?O=S:g=="dangerouslySetInnerHTML"?b=S:g=="value"?P=S:g=="checked"?A=S:h&&typeof S!="function"||k[g]===S||ig(e,g,S,k[g],r);if(b)h||w&&(b.__html===w.__html||b.__html===e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(w&&(e.innerHTML=""),N2(e,dE(O)?O:[O],t,n,o,R=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&xv(n,0),h,v),s!=null)for(g=s.length;g--;)pE(s[g]);h||(g="value",R=="progress"&&P==null?e.removeAttribute("value"):P!==void 0&&(P!==e[g]||R=="progress"&&!P||R=="option"&&P!==k[g])&&ig(e,g,P,k[g],r),g="checked",A!==void 0&&A!==e[g]&&ig(e,g,A,k[g],r))}return e}function vE(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){xi.__e(r,n)}}function D2(e,t,n){var o,r;if(xi.unmount&&xi.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||vE(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){xi.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&D2(o[r],t,n||typeof e.type!="function");n||pE(e.__e),e.__c=e.__=e.__e=void 0}function O7(e,t,n){return this.constructor(e,n)}cE=M2.slice,xi={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(h){e=h}throw e}},S2=0,pv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=kd({},this.state),typeof e=="function"&&(e=e(kd({},n),this.props)),e&&kd(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),wA(this))},pv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),wA(this))},pv.prototype.render=hE,Up=[],A2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,aw=function(e,t){return e.__v.__b-t.__v.__b},jg.__r=0,T2=/(PointerCapture)$|Capture$/i,fE=0,lw=OA(!1),uw=OA(!0);var xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(this,arguments)};function yE(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,h=t-o/2,v=n-r/2,g=xy(xy({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:h,y:v});return cn.h("rect",xy({},g))}yE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var sv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(sv||(sv={}));var x7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gp=globalThis&&globalThis.__assign||function(){return Gp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Gp.apply(this,arguments)},S7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},A7=cn.LogicFlowUtil.StepDrag,T7=function(e){x7(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,h=o.nodeModel,v=h.x,g=h.y;o.nodeModel.x=v+s/2,o.nodeModel.y=g+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,h=r.deltaY,v=r.width,g=r.height,b=r.PCTResizeInfo,w=r.pct,O=w===void 0?1:w,S=r.freezeWidth,P=S===void 0?!1:S,A=r.freezeHeight,k=A===void 0?!1:A,j={width:v,height:g,deltaX:c,deltaY:h};if(b){var R=4,$=0,V=0;switch(s){case 0:V=(c*-1-h)/R;break;case 1:V=(c-h)/R;break;case 2:V=(c+h)/R;break;case 3:V=(c*-1+h)/R;break}V!==0&&($=Math.round(V/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+$,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+$,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var H=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),Y=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(s){case 0:c=v-H,h=g-Y;break;case 1:c=H-v,h=g-Y;break;case 2:c=H-v,h=Y-g;break;case 3:c=v-H,h=Y-g;break}return j.width=H,j.height=Y,j.deltaX=c/O,j.deltaY=h/O,j}switch(s){case 0:j.width=P?v:v-c*O,j.height=k?g:g-h*O;break;case 1:j.width=P?v:v+c*O,j.height=k?g:g-h*O;break;case 2:j.width=P?v:v+c*O,j.height=k?g:g+h*O;break;case 3:j.width=P?v:v-c*O,j.height=k?g:g+h*O;break}return j},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,h=o.getNodeEdges(s);h.sourceEdges.forEach(function(v){var g=c.find(function(b){return b.id===v.sourceAnchorId});v.updateStartPoint({x:g.x,y:g.y})}),h.targetEdges.forEach(function(v){var g=c.find(function(b){return b.id===v.targetAnchorId});v.updateEndPoint({x:g.x,y:g.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,h=o.nodeModel,v=h.id,g=h.x,b=h.y,w=h.width,O=h.height,S=h.radius,P=h.PCTResizeInfo,A=o.nodeModel,k=A.minWidth,j=A.minHeight,R=A.maxWidth,$=A.maxHeight,V=o.index,H=k===R,Y=j===$,Q=o.getResize({index:V,deltaX:s,deltaY:c,width:w,height:O,PCTResizeInfo:P,pct:1,freezeWidth:H,freezeHeight:Y});if(Q.width<k||Q.width>R||Q.height<j||Q.height>$){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:H?0:Q.deltaX,deltaY:Y?0:Q.deltaY}),o.nodeModel.width=Q.width,o.nodeModel.height=Q.height,o.nodeModel.setProperties({nodeSize:{width:Q.width,height:Q.height}}),o.getNodeEdges(v);var W={x:g,y:b,width:w,height:O,radius:S},I={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:S};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:W,afterNode:I})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,h=o.nodeModel,v=h.id,g=h.rx,b=h.ry,w=h.x,O=h.y,S=h.PCTResizeInfo,P=o.index,A=o.nodeModel,k=A.minWidth,j=A.minHeight,R=A.maxWidth,$=A.maxHeight,V=k===R,H=j===$,Y=g,Q=b,W=o.getResize({index:P,deltaX:s,deltaY:c,width:Y,height:Q,PCTResizeInfo:S,pct:1/2,freezeWidth:V,freezeHeight:H});if(W.width<k/2||W.width>R/2||W.height<j/2||W.height>$/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:V?0:W.deltaX,deltaY:H?0:W.deltaY}),o.nodeModel.rx=W.width,o.nodeModel.ry=W.height,o.nodeModel.setProperties({nodeSize:{rx:W.width,ry:W.height}}),o.getNodeEdges(v);var I={x:w,y:O},z={rx:W.width,ry:W.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Gp(Gp({},I),{rx:g,ry:b}),afterNode:z})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,h=o.nodeModel;h.id;var v=h.rx,g=h.ry,b=h.x,w=h.y,O=h.PCTResizeInfo,S=o.index,P=o.nodeModel,A=P.minWidth,k=P.minHeight,j=P.maxWidth,R=P.maxHeight,$=A===j,V=k===R,H=v,Y=g,Q=o.getResize({index:S,deltaX:s,deltaY:c,width:H,height:Y,PCTResizeInfo:O,pct:1/2,freezeWidth:$,freezeHeight:V});if(Q.width<A/2||Q.width>j/2||Q.height<k/2||Q.height>R/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:$?0:Q.deltaX,deltaY:V?0:Q.deltaY}),o.nodeModel.rx=Q.width,o.nodeModel.ry=Q.height,o.nodeModel.setProperties({nodeSize:{rx:Q.width,ry:Q.height}});var W={x:b,y:w,rx:v,ry:g},I={rx:Q.width,ry:Q.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:W,afterNode:I})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,h=o.nodeModel,v=h.id,g=h.modelType,b=h.type,w=Gp({id:v,modelType:g,type:b},s),O=Gp({id:v,modelType:g,type:b},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:w,newNodeSize:O})},o.onDragging=function(r){var s,c=r.deltaX,h=r.deltaY,v=o.graphModel.transformModel,g=o.nodeModel.modelType;s=S7(v.fixDeltaXY(c,h),2),c=s[0],h=s[1],g===sv.RECT_NODE||g===sv.HTML_NODE?o.updateRect({deltaX:c,deltaY:h}):g===sv.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:h}):g===sv.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:h})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),h=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,h),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new A7({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],h=0;h<r.length;h++){var v=r[h];v.sourceNodeId===n?s.push(v):r[h].targetNodeId===n&&c.push(v)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,h=c.getControlPointStyle();return Oy("g",{className:"lf-resize-control-"+s},Oy(yE,Gp({className:"lf-node-control"},{x:o,y:r},h,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(pv),M7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ig=globalThis&&globalThis.__assign||function(){return Ig=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ig.apply(this,arguments)},bb=function(e){M7(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,h=o.width,v=o.height,g={minX:s-h/2,minY:c-v/2,maxX:s+h/2,maxY:c+v/2},b=g.minX,w=g.minY,O=g.maxX,S=g.maxY,P=[{x:b,y:w},{x:O,y:w},{x:O,y:S},{x:b,y:S}];return P.map(function(A,k){return Oy(T7,Ig({index:k},A,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,h=n.getResizeOutlineStyle();return Oy(yE,Ig({fill:"none"},h,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Oy("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(pv),C2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),P7=function(e){C2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),N7=function(e){C2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),j2={type:"rect",view:N7,model:P7},I2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){I2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){I2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)};function k7(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,h=e.fill,v=h===void 0?"transparent":h,g=e.stroke,b=g===void 0?"#000":g,w=e.points,O=e.className,S=O===void 0?"lf-basic-shape":O,P={fill:v,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:S};return P.points=w.map(function(A){return A.join(",")}).join(" "),cn.h("polygon",cw({},P))}var L2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fw.apply(this,arguments)};(function(e){L2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){L2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(k7,fw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var F2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),R7=function(e){F2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),D7=function(e){F2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),$2={type:"html",view:D7,model:R7},B2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lg=globalThis&&globalThis.__assign||function(){return Lg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lg.apply(this,arguments)},C7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},j7=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C7(arguments[t]));return e},xA=500,SA=300,I7=-1e4;(function(e){B2(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=xA,n.unfoldedHight=SA,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=xA,this.height=SA,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=I7,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),h=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var v=o.childrenLastFoldStatus[s];v!==void 0&&v!==c.isFolded&&c.foldGroup(v)}o.childrenLastFoldStatus[s]=h,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var h=s.id,v=s.sourceNodeId,g=s.targetNodeId,b=s.startPoint,w=s.endPoint,O=s.type,S=s.text,P=s.getProperties(),A={id:h+"__"+c,sourceNodeId:v,targetNodeId:g,startPoint:b,endPoint:w,type:O,properties:P,text:S==null?void 0:S.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var k=r.graphModel.group.getNodeGroup(g);k||(k=r.graphModel.getNodeModelById(g));var j=r.graphModel.group.getNodeGroup(v);j||(j=r.graphModel.getNodeModelById(v)),n&&s.visible!==!1&&(r.children.has(v)||r.id===v?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(k.id!==r.id||j.id!==r.id)&&r.createVirtualEdge(A),s.visible=!1),!n&&s.visible===!1&&(k&&k.isGroup&&k.isFolded?(A.targetNodeId=k.id,A.endPoint=void 0,r.createVirtualEdge(A)):j&&j.isGroup&&j.isFolded?(A.sourceNodeId=j.id,A.startPoint=void 0,r.createVirtualEdge(A)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=j7(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(j2.model);(function(e){B2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,h=n.radius,v=n.properties;if(!v.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),w=o+g+8,O=r+g+8;return cn.h("rect",Lg(Lg({},b),{width:w,height:O,x:s-w/2,y:c-O/2,rx:h,ry:h}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(j2.view);var AA=globalThis&&globalThis.__assign||function(){return AA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},AA.apply(this,arguments)};globalThis&&globalThis.__rest;var L7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var TA=globalThis&&globalThis.__assign||function(){return TA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},TA.apply(this,arguments)};globalThis&&globalThis.__values;var MA=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sy=globalThis&&globalThis.__assign||function(){return Sy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Sy.apply(this,arguments)};function F7(e){var t=function(o){MA(r,o);function r(s,c){var h=this;s.id||(s.id="Flow_"+f7());var v=Sy(Sy(Sy({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=v,h=o.call(this,s,c)||this,h}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){MA(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}F7();globalThis&&globalThis.__read;var PA={width:40,height:40},NA={width:40,height:40},kA={width:100,height:80},Fg={width:100,height:80},RA={width:100,height:80},DA={width:100,height:80},CA={width:100,height:80},jA={width:100,height:80},IA={width:100,height:80},LA={width:100,height:80},cl=function(){};cl.ObjTree=function(){return this};cl.ObjTree.VERSION="0.23";cl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;cl.ObjTree.prototype.attr_prefix="-";cl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};cl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,h=o.onComplete;o.onComplete=function(b){var w;b&&b.responseXML&&b.responseXML.documentElement&&(w=s.parseDOM(b.responseXML.documentElement)),c(w,b),h&&h(b)}}else o.asynchronous=!1;var v;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(v=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(v=g.transport)}if(n)return v;if(v&&v.responseXML&&v.responseXML.documentElement)return this.parseDOM(v.responseXML.documentElement)};cl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};cl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var h=!0;n&&(h=!1);for(var r=0;r<e.childNodes.length&&h;r++){var v=e.childNodes[r].nodeType;v===3||v===4||v===8||(h=!1)}if(h){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};cl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};cl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};cl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),h=n.join("");return typeof e>"u"||e==null||(n.length>0?h.match(/\n/)?h="<"+e+c+`>
`+h+"</"+e+`>
`:h="<"+e+c+">"+h+"</"+e+`>
`:h="<"+e+c+` />
`),h};cl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};cl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};cl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var $7=function(e){return new cl.ObjTree().parseXML(e)};function U2(e){return Object.prototype.toString.call(e)}function FA(e){return"  ".repeat(e)}function $g(e){return U2(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=$g(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return $g(t)}):e}function B7(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify($g(e)).replace(/"/g,"'")}return t}var $A=`	
`;function gg(e,t,n){var o=FA(n),r="",s=$A+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+B7(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return gg(g,t,n+1)}).join("");else if(U2(e)==="[object Object]"){var c=Object.keys(e),h="",v=e["-json"]?$A+FA(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?h+=gg(e[g],g,n+1):v+=gg(e[g],g,n+1)}),r+=h+(v!==""?">"+v+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function U7(e){var t="";for(var n in e)t+=gg(e[n],n,0);return t}var G7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),dw=globalThis&&globalThis.__assign||function(){return dw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dw.apply(this,arguments)},BA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},mE=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fv=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},hv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fv(arguments[t]));return e},ll;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(ll||(ll={}));var G2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],V7=["properties","startPoint","endPoint","pointsList"],Bg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},V2=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},Iu={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,h=t["-id"],v="",g="";try{for(var b=mE(Object.keys(t)),w=b.next();!w.done;w=b.next()){var O=w.value;O.includes("bpmn:")&&(r=Fv(O.split(":"),2),v=r[1],g=(s=t[O])===null||s===void 0?void 0:s["#text"])}}catch(S){n={error:S}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}return{"-definitionId":h,"-definitionType":c,"-timerType":v,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function W7(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(hv(V7,n||[])),c={in:new Set(hv(Bg.in,(o==null?void 0:o.in)||[])),out:new Set(hv(Bg.out,(o==null?void 0:o.out)||[]))};return Iu=V2(Iu,r),function(h){var v=h.nodes,g=h.edges;function b(w,O){var S,P,A;if((w==null?void 0:w.flag)!==1){var k;if((k=Iu[w.type])&&k.out){var j=k.out(w),R=Object.keys(j);R.length>0&&R.forEach(function(z){w[z]=j[z]})}w!=null&&w.children&&(w.children=w.children.map(function(z){var K=v.find(function(q){return q.id===z})||g.find(function(q){return q.id===z});return K||{}}));var $={};if(typeof w=="string")return w;if(Array.isArray(w))return w.map(function(z){return b(z,"")}).filter(function(z){return z!=null});try{for(var V=mE(Object.entries(w)),H=V.next();!H.done;H=V.next()){var Y=Fv(H.value,2),Q=Y[0],W=Y[1];if(((A=W)===null||A===void 0?void 0:A.flag)===1)return;var I=[O,Q].filter(function(z){return z}).join(".");c.out.has(I)||(typeof W!="object"?Q.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(Q)?$[Q]=W:$["-"+Q]=W:s.has(I)?$["-"+Q]=b(W,I):$[Q]=b(W,I))}}catch(z){S={error:z}}finally{try{H&&!H.done&&(P=V.return)&&P.call(V)}finally{if(S)throw S.error}}return $}}return b(h,"")}}function Ug(e){var t,n,o={};try{for(var r=mE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Fv(s.value,2),h=c[0],v=c[1];h.indexOf("-")===0?o[h.substring(1)]=$g(v):typeof v=="string"?o[h]=v:Object.prototype.toString.call(v)==="[object Object]"?o[h]=Ug(v):Array.isArray(v)?o[h]=v.map(function(g){return Ug(g)}):o[h]=v}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function z7(e,t,n){var o,r=new Map,s=W7(n)(t);s.nodes.forEach(function(h){var v=h["-id"],g=h["-type"],b=h.text,w=h.children,O=BA(h,["-id","-type","text","children"]),S={"-id":v};b!=null&&b["-value"]&&(S["-name"]=b["-value"]),O["-json"]&&(S["-json"]=O["-json"]),O["-properties"]&&Object.assign(S,O["-properties"]),w&&(S.children=w),e[g]||(e[g]=[]),e[g].push(S),r.set(v,S)});var c=s.edges.map(function(h){var v=h["-id"];h["-type"];var g=h["-sourceNodeId"],b=h["-targetNodeId"],w=h.text,O=BA(h,["-id","-type","-sourceNodeId","-targetNodeId","text"]),S=r.get(b);S["bpmn:incoming"]||(S["bpmn:incoming"]=[]),S["bpmn:incoming"].push(v);var P={"-id":v,"-sourceRef":g,"-targetRef":b};return w!=null&&w["-value"]&&(P["-name"]=w["-value"]),O["-json"]&&(P["-json"]=O["-json"]),O["-properties"]&&Object.assign(P,O["-properties"]),P});return t.edges.forEach(function(h){var v=h.sourceNodeId,g=h.id,b=r.get(v);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(h){var v={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];h.children.forEach(function(A){var k,j=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function($){j[$]&&j[$].forEach(function(V){v[$].add(V)})});var R=(k=e[A["-type"]])===null||k===void 0?void 0:k.findIndex(function($){return $["-id"]===A["-id"]});R>=0&&e[A["-type"]].splice(R,1),r.delete(A["-id"]),h[A["-type"]]||(h[A["-type"]]=[]),h[A["-type"]].push(j)});var b=v["bpmn:incoming"],w=v["bpmn:outgoing"];w.forEach(function(A){b.has(A)&&g.push(A)});for(var O=function(A){var k=c.findIndex(function(j){return j["-id"]===g[A]});k>=0?(h["bpmn:sequenceFlow"]||(h["bpmn:sequenceFlow"]=[]),h["bpmn:sequenceFlow"].push(c[k]),c.splice(k,1)):A++,S=A},S,P=0;P<g.length;)O(P),P=S;delete h.children}),e[ll.FLOW]=c,e}function H7(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(h){var v=h.x,g=h.y;return{"-x":v,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,h=n.x,v=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),h-=s/2,v-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":h,"-y":v,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var X7=["bpmn:incoming","bpmn:outgoing"];function Y7(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,h=s.excludeFields,v={in:new Set(hv(Bg.in,(h==null?void 0:h.in)||[])),out:new Set(hv(Bg.out,(h==null?void 0:h.out)||[]))};Iu=V2(Iu,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(O,S){S.forEach(function(P){try{Object.keys(O).forEach(function(A){try{P(A)}catch(k){console.error(k)}})}catch(A){console.error(A)}})})(b,[function(O){function S(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(k){var j;k.indexOf("bpmn:")===0&&!X7.includes(k)&&(b[k]||(b[k]=[]),!Array.isArray(b[k])&&(b[k]=[b[k]]),Array.isArray(A[k])?(j=b[k]).push.apply(j,hv(A[k])):b[k].push(A[k]),Array.isArray(A[k])?A[k].forEach(function(R){!k.includes("Flow")&&A["-children"].push(R["-id"])}):!k.includes("Flow")&&A["-children"].push(A[k]["-id"]),delete A[k])})}if(O==="bpmn:subProcess"){var P=b[O];Array.isArray(P)?P.forEach(function(A){O==="bpmn:subProcess"&&S(A)}):S(P)}},function(O){var S=function(A){Object.keys(A).forEach(function(k){var j,R;if(k.includes("bpmn:")){var $={};Iu[k]&&Iu[k].in?($=(R=(j=Iu[k]).in)===null||R===void 0?void 0:R.call(j,k,ae.cloneDeep(A[k])),delete A[k]):P(A[k]);var V=void 0;(V=Reflect.ownKeys($)).length>0&&V.forEach(function(H){Reflect.set(A,H,$[H])})}})};function P(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(k){P(k)}):typeof A=="object"&&S(A)}P(b[O])},function(O){if(O.indexOf("bpmn:")===0){var S=b[O];if(O==="bpmn:sequenceFlow"){var P=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=K7(S,P)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var k=b[O],j=function(R){var $=R["-attachedToRef"],V=r.get($);V["-boundaryEvents"]||(V["-boundaryEvents"]=[]),V["-boundaryEvents"].push(R["-id"])};Array.isArray(k)?k.forEach(function(R){j(R)}):j(k)}n=n.concat(q7(S,A,O))}}}])}var w=function(O,S,P){Object.keys(O).forEach(function(A){var k=P?P+"."+A:A;S.has(k)?delete O[A]:typeof O[A]=="object"&&w(O[A],S,k)})};return n.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,k=O.type;A[k]&&(O.type=A[k])}w(O,v.in,"")}),o.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,k=O.type;A[k]&&(O.type=A[k])}w(O,v.in,"")}),{nodes:n,edges:o}}function q7(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var h;Array.isArray(t)?h=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):h=t;var v=UA(h,n,c);o.push(v)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=UA(r,n,e);o.push(s)}return o}function UA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],h=Dl.shapeConfigMap.get(t);h&&(o+=h.width/2,r+=h.height/2);var v={};Object.entries(n).forEach(function(O){var S=Fv(O,2),P=S[0],A=S[1];G2.includes(P)||(v[P]=A)}),v=Ug(v);var g;if(c&&(g={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var w={id:e["-bpmnElement"],type:t,x:o,y:r,properties:v};return s&&(w.children=s),g&&(w.text=g),w}function K7(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(GA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(GA(o,e))}return n}function GA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Fv(g,2),w=b[0],O=b[1];G2.includes(w)||(c[w]=O)}),c=Ug(c);var h=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),v={id:t["-id"],type:ll.FLOW,pointsList:h,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Dl=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,h,v=dw({},n.processAttributes);z7(v,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":v["-id"]};H7(g,r);var b=n.definitionAttributes;b["bpmn:process"]=v,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var w={"bpmn:definitions":b};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var O=(h=s==null?void 0:s.mapping)===null||h===void 0?void 0:h.out,S=function(P){Array.isArray(P)&&P.forEach(function(A){return S(A)}),typeof P=="object"&&Object.keys(P).forEach(function(A){var k;(k=O[A])?(P[k]=ae.cloneDeep(P[A]),delete P[A],S(P[k])):S(P[A])})};S(w)}return w},this.adapterIn=function(r,s){if(r)return Y7(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(ll.START,{width:PA.width,height:PA.height});Dl.shapeConfigMap.set(ll.END,{width:NA.width,height:NA.height});Dl.shapeConfigMap.set(ll.INTERMEDIATE_CATCH,{width:Fg.width,height:Fg.height});Dl.shapeConfigMap.set(ll.INTERMEDIATE_THROW,{width:Fg.width,height:Fg.height});Dl.shapeConfigMap.set(ll.BOUNDARY,{width:kA.width,height:kA.height});Dl.shapeConfigMap.set(ll.PARALLEL_GATEWAY,{width:RA.width,height:RA.height});Dl.shapeConfigMap.set(ll.INCLUSIVE_GATEWAY,{width:DA.width,height:DA.height});Dl.shapeConfigMap.set(ll.EXCLUSIVE_GATEWAY,{width:CA.width,height:CA.height});Dl.shapeConfigMap.set(ll.SYSTEM,{width:jA.width,height:jA.height});Dl.shapeConfigMap.set(ll.USER,{width:IA.width,height:IA.height});Dl.shapeConfigMap.set(ll.SUBPROCESS,{width:LA.width,height:LA.height});(function(e){G7(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var h=$7(c);return o.adapterIn(h,o.props)},o.adapterXmlOut=function(c){var h=o.adapterOut(c,o.props);return U7(h)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(Dl);var VA=globalThis&&globalThis.__assign||function(){return VA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},VA.apply(this,arguments)};globalThis&&globalThis.__read;var WA;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(WA||(WA={}));var Z7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var J7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var Q7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var W2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),cv=globalThis&&globalThis.__assign||function(){return cv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cv.apply(this,arguments)},Ay=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},e9={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function t9(e){for(var t=e,n=1;n<t.length-1;){var o=Ay(t[n-1],2),r=o[0],s=o[1],c=Ay(t[n],2),h=c[0],v=c[1],g=Ay(t[n+1],2),b=g[0],w=g[1];r===h&&h===b||s===v&&v===w?t.splice(n,1):n++}return t}function n9(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function r9(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var h=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,v=""+s+c,g=e9[v]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var w=Ay(n9(t,v,g,h),2),O=w[0],S=w[1];O&&S&&(b+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+S[0]+" "+S[1],r=Ay(S,2),t[0]=r[0],t[1]=r[1])}return b}function o9(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=r9(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){W2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,h=c===void 0?5:c,v=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=t9(o.split(" ").map(function(S){return S.split(",").map(function(P){return+P})})),w=o9(b,h),O=cv(cv(cv({style:r?g:{}},v),s),{fill:"none"});return cn.h("path",cv({d:w},O))},t})(cn.PolylineEdge);(function(e){W2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var i9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var zA=globalThis&&globalThis.__assign||function(){return zA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zA.apply(this,arguments)},HA=globalThis&&globalThis.__assign||function(){return HA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HA.apply(this,arguments)},a9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(h){c={error:h}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let _b=!1;const Gg=Lw({});function z2(e,t,n,o,r,s){s||(s=(c,h)=>({nodeModel:c,graph:h})),_b&&(Gg[e]=CI(kr({render:()=>Ov(jI,{to:n},[Ov(t,s(o,r))]),provide:()=>({getNode:()=>o,getGraph:()=>r})})))}function H2(e){_b&&delete Gg[e]}function Vg(){return _b}function l9(){return _b=!0,kr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Gg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Gg[n])}),Ov(Yo,{},t.map(n=>Ov(n)))}}})}class Mi extends $2.view{constructor(n,o){super(n);Ea(this,"isMounted");Ea(this,"r");Ea(this,"component");Ea(this,"app");Ea(this,"root");Ea(this,"VueNode");Ea(this,"up_node_field_dict");if(this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const s=n.graphModel.nodes.filter(c=>c.type===n.model.type);s.length-1>0&&r(s.length-1)}function r(s){var v;const c=s,h=n.model.properties.stepName+c;(v=n.graphModel.nodes)!=null&&v.some(g=>g.properties.stepName===h.trim())?r(c+1):n.model.properties.stepName=h}n.model.properties.config=II[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var o,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:Zt("views.applicationWorkflow.variable.global"),type:"global",children:((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((c,h)=>[...c,...h],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(h=>h.targetAnchorId==n.id):c=this.props.graphModel.edges.some(h=>h.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Vg())z2(this.targetId(),this.component,n,o,r);else{this.r=Ov(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=FM({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r}}}),this.app.use(LI,{locale:FI}),this.app.use($I),this.app.use(BI),this.app.use(LM);for(const[c,h]of Object.entries(UI))this.app.component(c,h);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Vg()&&H2(this.targetId()),this.unmountVueComponent()}}class Pi extends $2.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=LM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const h in c){const v=c[h];if(v.id===s)return!0;if(n(v.id,s))return!0}return!1},o={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,h)=>!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,h)=>h.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==Xo.Base&&(this.type!==Xo.Start&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let u9=class extends Mi{constructor(t){super(t,XV)}};const s9={type:"ai-chat-node",model:Pi,view:u9},c9=Object.freeze(Object.defineProperty({__proto__:null,default:s9},Symbol.toStringTag,{value:"Module"})),f9={class:"title-decoration-1 mb-8"},d9={class:"flex align-center"},p9={class:"mr-4"},h9=kr({__name:"index",props:{nodeModel:{}},setup(e){const t={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},{params:{id:n}}=Rl.config.globalProperties.$route,o=mt(),r=so({get:()=>(h.nodeModel.properties.nodeData||Ye.set(h.nodeModel.properties,"nodeData",t),h.nodeModel.properties.nodeData),set:g=>{Ye.set(h.nodeModel.properties,"nodeData",g)}});function s(g,b){const w=`${g}_list`;b?h.nodeModel.properties.nodeData[w]||Ye.set(h.nodeModel.properties.nodeData,w,[]):delete h.nodeModel.properties.nodeData[w]}const c=()=>{if(!h.nodeModel.properties.nodeData.application_id){Ye.set(h.nodeModel.properties,"status",500);return}fa.getApplicationById(n,h.nodeModel.properties.nodeData.application_id).then(g=>{const b=h.nodeModel.properties.nodeData.api_input_field_list,w=h.nodeModel.properties.nodeData.user_input_field_list;if(hg(g.data.type)){const O=g.data.workFlow.nodes[0].properties.nodeData,S=g.data.workFlow.nodes[0].properties.api_input_field_list,P=g.data.workFlow.nodes[0].properties.user_input_field_list,A=S.map($=>{const V=b.find(H=>H.variable==$.variable);return V?{...$,value:V.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});Ye.set(h.nodeModel.properties.nodeData,"api_input_field_list",A);const k=P.map($=>{const V=w.find(H=>H.field==$.field);return V?{...$,value:V.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});Ye.set(h.nodeModel.properties.nodeData,"user_input_field_list",k);const j=O.file_upload_enable,R=O.file_upload_setting;j?(s("document",R.document),s("image",R.image),s("audio",R.audio)):["documentList","imageList","audioList"].forEach($=>{delete h.nodeModel.properties.nodeData[$]}),Ye.set(h.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{})},h=e,v=()=>{var g;return(g=o.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:h.nodeModel,errMessage:b}))};return xo(()=>{c(),Ye.set(h.nodeModel,"validate",v)}),(g,b)=>{const w=re("el-form-item"),O=re("AppIcon"),S=re("el-tooltip"),P=re("el-switch"),A=re("el-form"),k=re("el-card");return qe(),Rt(Ti,{nodeModel:g.nodeModel},{default:B(()=>[he("h5",f9,Ue(g.$t("views.applicationWorkflow.nodeSetting")),1),C(k,{shadow:"never",class:"card-never"},{default:B(()=>[C(A,{onSubmit:b[6]||(b[6]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:o},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:B(()=>[C(ko,{ref_key:"applicationNodeFormRef",ref:o,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=j=>r.value.questionReferenceAddress=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("documentList")||"documentList"in r.value?(qe(),Rt(w,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:B(()=>[C(ko,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=j=>r.value.documentList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):tr("",!0),r.value.hasOwnProperty("imageList")||"imageList"in r.value?(qe(),Rt(w,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:B(()=>[C(ko,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=j=>r.value.imageList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):tr("",!0),r.value.hasOwnProperty("audioList")||"audioList"in r.value?(qe(),Rt(w,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:B(()=>[C(ko,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=j=>r.value.audioList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):tr("",!0),(qe(!0),Dn(Yo,null,Ci(r.value.api_input_field_list,(j,R)=>(qe(),Dn("div",{key:"api-input-"+R},[C(w,{label:j.variable,prop:"api_input_field_list."+R+".value",rules:[{required:j.is_required,message:`${g.$t("common.inputPlaceholder")}${j.variable}`,trigger:"blur"}]},{default:B(()=>[C(ko,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[R].value,"onUpdate:modelValue":$=>r.value.api_input_field_list[R].value=$},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(qe(!0),Dn(Yo,null,Ci(r.value.user_input_field_list,(j,R)=>(qe(),Dn("div",{key:"user-input-"+R},[C(w,{label:j.label,prop:"user_input_field_list."+R+".value",rules:[{required:j.required,message:`${g.$t("common.inputPlaceholder")}${j.label}`,trigger:"blur"}]},{default:B(()=>[C(ko,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[R].value,"onUpdate:modelValue":$=>r.value.user_input_field_list[R].value=$},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),C(w,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",d9,[he("div",p9,[he("span",null,[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[7]||(b[7]=he("span",{class:"danger"},"*",-1))])]),C(S,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(P,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=j=>r.value.isResult=j)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class v9 extends Mi{constructor(t){super(t,h9)}}const y9={type:"application-node",model:Pi,view:v9},m9=Object.freeze(Object.defineProperty({__proto__:null,default:y9},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(o){g9(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bg=function(t){return typeof t}:bg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function g9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tf(){return Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tf.apply(this,arguments)}function b9(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function _9(e,t){if(e==null)return{};var n=b9(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var w9="1.15.6";function xf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Nf=xf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),em=xf(/Edge/i),YA=xf(/firefox/i),Ty=xf(/safari/i)&&!xf(/chrome/i)&&!xf(/android/i),gE=xf(/iP(ad|od|hone)/i),X2=xf(/chrome/i)&&xf(/android/i),Y2={capture:!1,passive:!1};function Zr(e,t,n){e.addEventListener(t,n,!Nf&&Y2)}function Xr(e,t,n){e.removeEventListener(t,n,!Nf&&Y2)}function Wg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function q2(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function vs(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Wg(e,t):Wg(e,t))||o&&e===n)return e;if(e===n)break}while(e=q2(e))}return null}var qA=/\s+/g;function iu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(qA," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(qA," ")}}function br(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function vv(e,t){var n="";if(typeof e=="string")n=e;else do{var o=br(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function K2(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function sc(){var e=document.scrollingElement;return e||document.documentElement}function Yi(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,h,v,g,b,w;if(e!==window&&e.parentNode&&e!==sc()?(s=e.getBoundingClientRect(),c=s.top,h=s.left,v=s.bottom,g=s.right,b=s.height,w=s.width):(c=0,h=0,v=window.innerHeight,g=window.innerWidth,b=window.innerHeight,w=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Nf))do if(r&&r.getBoundingClientRect&&(br(r,"transform")!=="none"||n&&br(r,"position")!=="static")){var O=r.getBoundingClientRect();c-=O.top+parseInt(br(r,"border-top-width")),h-=O.left+parseInt(br(r,"border-left-width")),v=c+s.height,g=h+s.width;break}while(r=r.parentNode);if(o&&e!==window){var S=vv(r||e),P=S&&S.a,A=S&&S.d;S&&(c/=A,h/=P,w/=P,b/=A,v=c+b,g=h+w)}return{top:c,left:h,bottom:v,right:g,width:w,height:b}}}function KA(e,t,n){for(var o=Rd(e,!0),r=Yi(e)[t];o;){var s=Yi(o)[n],c=void 0;if(n==="top"||n==="left"?c=r>=s:c=r<=s,!c)return o;if(o===sc())break;o=Rd(o,!1)}return!1}function Sv(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==vr.ghost&&(o||c[s]!==vr.dragged)&&vs(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function bE(e,t){for(var n=e.lastElementChild;n&&(n===vr.ghost||br(n,"display")==="none"||t&&!Wg(n,t));)n=n.previousElementSibling;return n||null}function ju(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==vr.clone&&(!t||Wg(e,t))&&n++;return n}function ZA(e){var t=0,n=0,o=sc();if(e)do{var r=vv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function E9(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Rd(e,t){if(!e||!e.getBoundingClientRect)return sc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=br(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return sc();if(o||t)return n;o=!0}}while(n=n.parentNode);return sc()}function O9(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function O1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var My;function Z2(e,t){return function(){if(!My){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),My=setTimeout(function(){My=void 0},t)}}}function x9(){clearTimeout(My),My=void 0}function J2(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Q2(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function eN(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,h,v;if(!(!vs(r,t.draggable,e,!1)||r.animated||r===n)){var g=Yi(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,g.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,g.top),o.right=Math.max((h=o.right)!==null&&h!==void 0?h:-1/0,g.right),o.bottom=Math.max((v=o.bottom)!==null&&v!==void 0?v:-1/0,g.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Nl="Sortable"+new Date().getTime();function S9(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(br(r,"display")==="none"||r===vr.ghost)){e.push({target:r,rect:Yi(r)});var s=fc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=vv(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(E9(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var s=!1,c=0;e.forEach(function(h){var v=0,g=h.target,b=g.fromRect,w=Yi(g),O=g.prevFromRect,S=g.prevToRect,P=h.rect,A=vv(g,!0);A&&(w.top-=A.f,w.left-=A.e),g.toRect=w,g.thisAnimationDuration&&O1(O,w)&&!O1(b,w)&&(P.top-w.top)/(P.left-w.left)===(b.top-w.top)/(b.left-w.left)&&(v=T9(P,O,S,r.options)),O1(w,b)||(g.prevFromRect=b,g.prevToRect=w,v||(v=r.options.animation),r.animate(g,P,w,v)),v&&(s=!0,c=Math.max(c,v),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},v),g.thisAnimationDuration=v)}),clearTimeout(t),s?t=setTimeout(function(){typeof o=="function"&&o()},c):typeof o=="function"&&o(),e=[]},animate:function(o,r,s,c){if(c){br(o,"transition",""),br(o,"transform","");var h=vv(this.el),v=h&&h.a,g=h&&h.d,b=(r.left-s.left)/(v||1),w=(r.top-s.top)/(g||1);o.animatingX=!!b,o.animatingY=!!w,br(o,"transform","translate3d("+b+"px,"+w+"px,0)"),this.forRepaintDummy=A9(o),br(o,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),br(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){br(o,"transition",""),br(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},c)}}}}function A9(e){return e.offsetWidth}function T9(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Zh=[],x1={initializeByDefault:!0},tm={mount:function(t){for(var n in x1)x1.hasOwnProperty(n)&&!(n in t)&&(t[n]=x1[n]);Zh.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Zh.push(t)},pluginEvent:function(t,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=t+"Global";Zh.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](fc({sortable:n},o)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](fc({sortable:n},o)))})},initializePlugins:function(t,n,o,r){Zh.forEach(function(h){var v=h.pluginName;if(!(!t.options[v]&&!h.initializeByDefault)){var g=new h(t,n,t.options);g.sortable=t,g.options=t.options,t[v]=g,Tf(o,g.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var o={};return Zh.forEach(function(r){typeof r.eventProperties=="function"&&Tf(o,r.eventProperties.call(n[r.pluginName],t))}),o},modifyOption:function(t,n,o){var r;return Zh.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],o))}),r}};function M9(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,h=e.fromEl,v=e.oldIndex,g=e.newIndex,b=e.oldDraggableIndex,w=e.newDraggableIndex,O=e.originalEvent,S=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[Nl],!!t){var A,k=t.options,j="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Nf&&!em?A=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(o,!0,!0)),A.to=c||n,A.from=h||n,A.item=r||n,A.clone=s,A.oldIndex=v,A.newIndex=g,A.oldDraggableIndex=b,A.newDraggableIndex=w,A.originalEvent=O,A.pullMode=S?S.lastPutMode:void 0;var R=fc(fc({},P),tm.getEventProperties(o,t));for(var $ in R)A[$]=R[$];n&&n.dispatchEvent(A),k[j]&&k[j].call(t,A)}}var P9=["evt"],Pl=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,s=_9(o,P9);tm.pluginEvent.bind(vr)(t,n,fc({dragEl:vn,parentEl:Oi,ghostEl:Ar,rootEl:ci,nextEl:$p,lastDownEl:_g,cloneEl:yi,cloneHidden:Nd,dragStarted:gy,putSortable:xa,activeSortable:vr.active,originalEvent:r,oldIndex:fv,oldDraggableIndex:Py,newIndex:au,newDraggableIndex:Pd,hideGhostForTarget:oN,unhideGhostForTarget:iN,cloneNowHidden:function(){Nd=!0},cloneNowShown:function(){Nd=!1},dispatchSortableEvent:function(h){al({sortable:n,name:h,originalEvent:r})}},s))};function al(e){M9(fc({putSortable:xa,cloneEl:yi,targetEl:vn,rootEl:ci,oldIndex:fv,oldDraggableIndex:Py,newIndex:au,newDraggableIndex:Pd},e))}var vn,Oi,Ar,ci,$p,_g,yi,Nd,fv,au,Py,Pd,ag,xa,nv=!1,zg=!1,Hg=[],Ip,hs,S1,A1,JA,QA,gy,Jh,Ny,ky=!1,lg=!1,wg,$a,T1=[],pw=!1,Xg=[],wb=typeof document<"u",ug=gE,eT=em||Nf?"cssFloat":"float",N9=wb&&!X2&&!gE&&"draggable"in document.createElement("div"),tN=function(){if(wb){if(Nf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),nN=function(t,n){var o=br(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Sv(t,0,n),c=Sv(t,1,n),h=s&&br(s),v=c&&br(c),g=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+Yi(s).width,b=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Yi(c).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&h.float&&h.float!=="none"){var w=h.float==="left"?"left":"right";return c&&(v.clear==="both"||v.clear===w)?"vertical":"horizontal"}return s&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||g>=r&&o[eT]==="none"||c&&o[eT]==="none"&&g+b>r)?"vertical":"horizontal"},k9=function(t,n,o){var r=o?t.left:t.top,s=o?t.right:t.bottom,c=o?t.width:t.height,h=o?n.left:n.top,v=o?n.right:n.bottom,g=o?n.width:n.height;return r===h||s===v||r+c/2===h+g/2},R9=function(t,n){var o;return Hg.some(function(r){var s=r[Nl].options.emptyInsertThreshold;if(!(!s||bE(r))){var c=Yi(r),h=t>=c.left-s&&t<=c.right+s,v=n>=c.top-s&&n<=c.bottom+s;if(h&&v)return o=r}}),o},rN=function(t){function n(s,c){return function(h,v,g,b){var w=h.options.group.name&&v.options.group.name&&h.options.group.name===v.options.group.name;if(s==null&&(c||w))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(h,v,g,b),c)(h,v,g,b);var O=(c?h:v).options.group.name;return s===!0||typeof s=="string"&&s===O||s.join&&s.indexOf(O)>-1}}var o={},r=t.group;(!r||bg(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,t.group=o},oN=function(){!tN&&Ar&&br(Ar,"display","none")},iN=function(){!tN&&Ar&&br(Ar,"display","")};wb&&!X2&&document.addEventListener("click",function(e){if(zg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),zg=!1,!1},!0);var Lp=function(t){if(vn){t=t.touches?t.touches[0]:t;var n=R9(t.clientX,t.clientY);if(n){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[Nl]._onDragOver(o)}}},D9=function(t){vn&&vn.parentNode[Nl]._isOutsideThisEl(t.target)};function vr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Tf({},t),e[Nl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nN(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,h){c.setData("Text",h.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:vr.supportPointer!==!1&&"PointerEvent"in window&&(!Ty||gE),emptyInsertThreshold:5};tm.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);rN(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:N9,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Zr(e,"pointerdown",this._onTapStart):(Zr(e,"mousedown",this._onTapStart),Zr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Zr(e,"dragover",this),Zr(e,"dragenter",this)),Hg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Tf(this,S9())}vr.prototype={constructor:vr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Jh=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,vn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,r=this.options,s=r.preventOnFilter,c=t.type,h=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,v=(h||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||v,b=r.filter;if(U9(o),!vn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Ty&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=vs(v,r.draggable,o,!1),!(v&&v.animated)&&_g!==v)){if(fv=ju(v),Py=ju(v,r.draggable),typeof b=="function"){if(b.call(this,t,v,this)){al({sortable:n,rootEl:g,name:"filter",targetEl:v,toEl:o,fromEl:o}),Pl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(w){if(w=vs(g,w.trim(),o,!1),w)return al({sortable:n,rootEl:w,name:"filter",targetEl:v,fromEl:o,toEl:o}),Pl("filter",n,{evt:t}),!0}),b)){s&&t.preventDefault();return}r.handle&&!vs(g,r.handle,o,!1)||this._prepareDragStart(t,h,v)}}},_prepareDragStart:function(t,n,o){var r=this,s=r.el,c=r.options,h=s.ownerDocument,v;if(o&&!vn&&o.parentNode===s){var g=Yi(o);if(ci=s,vn=o,Oi=vn.parentNode,$p=vn.nextSibling,_g=o,ag=c.group,vr.dragged=vn,Ip={target:vn,clientX:(n||t).clientX,clientY:(n||t).clientY},JA=Ip.clientX-g.left,QA=Ip.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,vn.style["will-change"]="all",v=function(){if(Pl("delayEnded",r,{evt:t}),vr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!YA&&r.nativeDraggable&&(vn.draggable=!0),r._triggerDragStart(t,n),al({sortable:r,name:"choose",originalEvent:t}),iu(vn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(b){K2(vn,b.trim(),M1)}),Zr(h,"dragover",Lp),Zr(h,"mousemove",Lp),Zr(h,"touchmove",Lp),c.supportPointer?(Zr(h,"pointerup",r._onDrop),!this.nativeDraggable&&Zr(h,"pointercancel",r._onDrop)):(Zr(h,"mouseup",r._onDrop),Zr(h,"touchend",r._onDrop),Zr(h,"touchcancel",r._onDrop)),YA&&this.nativeDraggable&&(this.options.touchStartThreshold=4,vn.draggable=!0),Pl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(em||Nf))){if(vr.eventCanceled){this._onDrop();return}c.supportPointer?(Zr(h,"pointerup",r._disableDelayedDrag),Zr(h,"pointercancel",r._disableDelayedDrag)):(Zr(h,"mouseup",r._disableDelayedDrag),Zr(h,"touchend",r._disableDelayedDrag),Zr(h,"touchcancel",r._disableDelayedDrag)),Zr(h,"mousemove",r._delayedDragTouchMoveHandler),Zr(h,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&Zr(h,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(v,c.delay)}else v()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){vn&&M1(vn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Xr(t,"mouseup",this._disableDelayedDrag),Xr(t,"touchend",this._disableDelayedDrag),Xr(t,"touchcancel",this._disableDelayedDrag),Xr(t,"pointerup",this._disableDelayedDrag),Xr(t,"pointercancel",this._disableDelayedDrag),Xr(t,"mousemove",this._delayedDragTouchMoveHandler),Xr(t,"touchmove",this._delayedDragTouchMoveHandler),Xr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Zr(document,"pointermove",this._onTouchMove):n?Zr(document,"touchmove",this._onTouchMove):Zr(document,"mousemove",this._onTouchMove):(Zr(vn,"dragend",this),Zr(ci,"dragstart",this._onDragStart));try{document.selection?Eg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(nv=!1,ci&&vn){Pl("dragStarted",this,{evt:n}),this.nativeDraggable&&Zr(document,"dragover",D9);var o=this.options;!t&&iu(vn,o.dragClass,!1),iu(vn,o.ghostClass,!0),vr.active=this,t&&this._appendGhost(),al({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hs){this._lastX=hs.clientX,this._lastY=hs.clientY,oN();for(var t=document.elementFromPoint(hs.clientX,hs.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(hs.clientX,hs.clientY),t!==n);)n=t;if(vn.parentNode[Nl]._isOutsideThisEl(t),n)do{if(n[Nl]){var o=void 0;if(o=n[Nl]._onDragOver({clientX:hs.clientX,clientY:hs.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=q2(n));iN()}},_onTouchMove:function(t){if(Ip){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Ar&&vv(Ar,!0),h=Ar&&c&&c.a,v=Ar&&c&&c.d,g=ug&&$a&&ZA($a),b=(s.clientX-Ip.clientX+r.x)/(h||1)+(g?g[0]-T1[0]:0)/(h||1),w=(s.clientY-Ip.clientY+r.y)/(v||1)+(g?g[1]-T1[1]:0)/(v||1);if(!vr.active&&!nv){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Ar){c?(c.e+=b-(S1||0),c.f+=w-(A1||0)):c={a:1,b:0,c:0,d:1,e:b,f:w};var O="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");br(Ar,"webkitTransform",O),br(Ar,"mozTransform",O),br(Ar,"msTransform",O),br(Ar,"transform",O),S1=b,A1=w,hs=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ar){var t=this.options.fallbackOnBody?document.body:ci,n=Yi(vn,!0,ug,!0,t),o=this.options;if(ug){for($a=t;br($a,"position")==="static"&&br($a,"transform")==="none"&&$a!==document;)$a=$a.parentNode;$a!==document.body&&$a!==document.documentElement?($a===document&&($a=sc()),n.top+=$a.scrollTop,n.left+=$a.scrollLeft):$a=sc(),T1=ZA($a)}Ar=vn.cloneNode(!0),iu(Ar,o.ghostClass,!1),iu(Ar,o.fallbackClass,!0),iu(Ar,o.dragClass,!0),br(Ar,"transition",""),br(Ar,"transform",""),br(Ar,"box-sizing","border-box"),br(Ar,"margin",0),br(Ar,"top",n.top),br(Ar,"left",n.left),br(Ar,"width",n.width),br(Ar,"height",n.height),br(Ar,"opacity","0.8"),br(Ar,"position",ug?"absolute":"fixed"),br(Ar,"zIndex","100000"),br(Ar,"pointerEvents","none"),vr.ghost=Ar,t.appendChild(Ar),br(Ar,"transform-origin",JA/parseInt(Ar.style.width)*100+"% "+QA/parseInt(Ar.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,r=t.dataTransfer,s=o.options;if(Pl("dragStart",this,{evt:t}),vr.eventCanceled){this._onDrop();return}Pl("setupClone",this),vr.eventCanceled||(yi=Q2(vn),yi.removeAttribute("id"),yi.draggable=!1,yi.style["will-change"]="",this._hideClone(),iu(yi,this.options.chosenClass,!1),vr.clone=yi),o.cloneId=Eg(function(){Pl("clone",o),!vr.eventCanceled&&(o.options.removeCloneOnHide||ci.insertBefore(yi,vn),o._hideClone(),al({sortable:o,name:"clone"}))}),!n&&iu(vn,s.dragClass,!0),n?(zg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Xr(document,"mouseup",o._onDrop),Xr(document,"touchend",o._onDrop),Xr(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,vn)),Zr(document,"drop",o),br(vn,"transform","translateZ(0)")),nv=!0,o._dragStartId=Eg(o._dragStarted.bind(o,n,t)),Zr(document,"selectstart",o),gy=!0,window.getSelection().removeAllRanges(),Ty&&br(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,r,s,c,h=this.options,v=h.group,g=vr.active,b=ag===v,w=h.sort,O=xa||g,S,P=this,A=!1;if(pw)return;function k(Pe,le){Pl(Pe,P,fc({evt:t,isOwner:b,axis:S?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:w,fromSortable:O,target:o,completed:R,onMove:function(Me,We){return sg(ci,n,vn,r,Me,Yi(Me),t,We)},changed:$},le))}function j(){k("dragOverAnimationCapture"),P.captureAnimationState(),P!==O&&O.captureAnimationState()}function R(Pe){return k("dragOverCompleted",{insertion:Pe}),Pe&&(b?g._hideClone():g._showClone(P),P!==O&&(iu(vn,xa?xa.options.ghostClass:g.options.ghostClass,!1),iu(vn,h.ghostClass,!0)),xa!==P&&P!==vr.active?xa=P:P===vr.active&&xa&&(xa=null),O===P&&(P._ignoreWhileAnimating=o),P.animateAll(function(){k("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(o===vn&&!vn.animated||o===n&&!o.animated)&&(Jh=null),!h.dragoverBubble&&!t.rootEl&&o!==document&&(vn.parentNode[Nl]._isOutsideThisEl(t.target),!Pe&&Lp(t)),!h.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),A=!0}function $(){au=ju(vn),Pd=ju(vn,h.draggable),al({sortable:P,name:"change",toEl:n,newIndex:au,newDraggableIndex:Pd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=vs(o,h.draggable,n,!0),k("dragOver"),vr.eventCanceled)return A;if(vn.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||P._ignoreWhileAnimating===o)return R(!1);if(zg=!1,g&&!h.disabled&&(b?w||(c=Oi!==ci):xa===this||(this.lastPutMode=ag.checkPull(this,g,vn,t))&&v.checkPut(this,g,vn,t))){if(S=this._getDirection(t,o)==="vertical",r=Yi(vn),k("dragOverValid"),vr.eventCanceled)return A;if(c)return Oi=ci,j(),this._hideClone(),k("revert"),vr.eventCanceled||($p?ci.insertBefore(vn,$p):ci.appendChild(vn)),R(!0);var V=bE(n,h.draggable);if(!V||L9(t,S,this)&&!V.animated){if(V===vn)return R(!1);if(V&&n===t.target&&(o=V),o&&(s=Yi(o)),sg(ci,n,vn,r,o,s,t,!!o)!==!1)return j(),V&&V.nextSibling?n.insertBefore(vn,V.nextSibling):n.appendChild(vn),Oi=n,$(),R(!0)}else if(V&&I9(t,S,this)){var H=Sv(n,0,h,!0);if(H===vn)return R(!1);if(o=H,s=Yi(o),sg(ci,n,vn,r,o,s,t,!1)!==!1)return j(),n.insertBefore(vn,H),Oi=n,$(),R(!0)}else if(o.parentNode===n){s=Yi(o);var Y=0,Q,W=vn.parentNode!==n,I=!k9(vn.animated&&vn.toRect||r,o.animated&&o.toRect||s,S),z=S?"top":"left",K=KA(o,"top","top")||KA(vn,"top","top"),q=K?K.scrollTop:void 0;Jh!==o&&(Q=s[z],ky=!1,lg=!I&&h.invertSwap||W),Y=F9(t,o,s,S,I?1:h.swapThreshold,h.invertedSwapThreshold==null?h.swapThreshold:h.invertedSwapThreshold,lg,Jh===o);var ce;if(Y!==0){var ke=ju(vn);do ke-=Y,ce=Oi.children[ke];while(ce&&(br(ce,"display")==="none"||ce===Ar))}if(Y===0||ce===o)return R(!1);Jh=o,Ny=Y;var Oe=o.nextElementSibling,ze=!1;ze=Y===1;var Ie=sg(ci,n,vn,r,o,s,t,ze);if(Ie!==!1)return(Ie===1||Ie===-1)&&(ze=Ie===1),pw=!0,setTimeout(j9,30),j(),ze&&!Oe?n.appendChild(vn):o.parentNode.insertBefore(vn,ze?Oe:o),K&&J2(K,0,q-K.scrollTop),Oi=vn.parentNode,Q!==void 0&&!lg&&(wg=Math.abs(Q-Yi(o)[z])),$(),R(!0)}if(n.contains(vn))return R(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Xr(document,"mousemove",this._onTouchMove),Xr(document,"touchmove",this._onTouchMove),Xr(document,"pointermove",this._onTouchMove),Xr(document,"dragover",Lp),Xr(document,"mousemove",Lp),Xr(document,"touchmove",Lp)},_offUpEvents:function(){var t=this.el.ownerDocument;Xr(t,"mouseup",this._onDrop),Xr(t,"touchend",this._onDrop),Xr(t,"pointerup",this._onDrop),Xr(t,"pointercancel",this._onDrop),Xr(t,"touchcancel",this._onDrop),Xr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(au=ju(vn),Pd=ju(vn,o.draggable),Pl("drop",this,{evt:t}),Oi=vn&&vn.parentNode,au=ju(vn),Pd=ju(vn,o.draggable),vr.eventCanceled){this._nulling();return}nv=!1,lg=!1,ky=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hw(this.cloneId),hw(this._dragStartId),this.nativeDraggable&&(Xr(document,"drop",this),Xr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ty&&br(document.body,"user-select",""),br(vn,"transform",""),t&&(gy&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Ar&&Ar.parentNode&&Ar.parentNode.removeChild(Ar),(ci===Oi||xa&&xa.lastPutMode!=="clone")&&yi&&yi.parentNode&&yi.parentNode.removeChild(yi),vn&&(this.nativeDraggable&&Xr(vn,"dragend",this),M1(vn),vn.style["will-change"]="",gy&&!nv&&iu(vn,xa?xa.options.ghostClass:this.options.ghostClass,!1),iu(vn,this.options.chosenClass,!1),al({sortable:this,name:"unchoose",toEl:Oi,newIndex:null,newDraggableIndex:null,originalEvent:t}),ci!==Oi?(au>=0&&(al({rootEl:Oi,name:"add",toEl:Oi,fromEl:ci,originalEvent:t}),al({sortable:this,name:"remove",toEl:Oi,originalEvent:t}),al({rootEl:Oi,name:"sort",toEl:Oi,fromEl:ci,originalEvent:t}),al({sortable:this,name:"sort",toEl:Oi,originalEvent:t})),xa&&xa.save()):au!==fv&&au>=0&&(al({sortable:this,name:"update",toEl:Oi,originalEvent:t}),al({sortable:this,name:"sort",toEl:Oi,originalEvent:t})),vr.active&&((au==null||au===-1)&&(au=fv,Pd=Py),al({sortable:this,name:"end",toEl:Oi,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Pl("nulling",this),ci=vn=Oi=Ar=$p=yi=_g=Nd=Ip=hs=gy=au=Pd=fv=Py=Jh=Ny=xa=ag=vr.dragged=vr.ghost=vr.clone=vr.active=null,Xg.forEach(function(t){t.checked=!0}),Xg.length=S1=A1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":vn&&(this._onDragOver(t),C9(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,r=0,s=o.length,c=this.options;r<s;r++)n=o[r],vs(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||B9(n));return t},sort:function(t,n){var o={},r=this.el;this.toArray().forEach(function(s,c){var h=r.children[c];vs(h,this.options.draggable,r,!1)&&(o[s]=h)},this),n&&this.captureAnimationState(),t.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return vs(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var r=tm.modifyOption(this,t,n);typeof r<"u"?o[t]=r:o[t]=n,t==="group"&&rN(o)},destroy:function(){Pl("destroy",this);var t=this.el;t[Nl]=null,Xr(t,"mousedown",this._onTapStart),Xr(t,"touchstart",this._onTapStart),Xr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Xr(t,"dragover",this),Xr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Hg.splice(Hg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Nd){if(Pl("hideClone",this),vr.eventCanceled)return;br(yi,"display","none"),this.options.removeCloneOnHide&&yi.parentNode&&yi.parentNode.removeChild(yi),Nd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Nd){if(Pl("showClone",this),vr.eventCanceled)return;vn.parentNode==ci&&!this.options.group.revertClone?ci.insertBefore(yi,vn):$p?ci.insertBefore(yi,$p):ci.appendChild(yi),this.options.group.revertClone&&this.animate(vn,yi),br(yi,"display",""),Nd=!1}}};function C9(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function sg(e,t,n,o,r,s,c,h){var v,g=e[Nl],b=g.options.onMove,w;return window.CustomEvent&&!Nf&&!em?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=t,v.from=e,v.dragged=n,v.draggedRect=o,v.related=r||t,v.relatedRect=s||Yi(t),v.willInsertAfter=h,v.originalEvent=c,e.dispatchEvent(v),b&&(w=b.call(g,v,c)),w}function M1(e){e.draggable=!1}function j9(){pw=!1}function I9(e,t,n){var o=Yi(Sv(n.el,0,n.options,!0)),r=eN(n.el,n.options,Ar),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function L9(e,t,n){var o=Yi(bE(n.el,n.options.draggable)),r=eN(n.el,n.options,Ar),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function F9(e,t,n,o,r,s,c,h){var v=o?e.clientY:e.clientX,g=o?n.height:n.width,b=o?n.top:n.left,w=o?n.bottom:n.right,O=!1;if(!c){if(h&&wg<g*r){if(!ky&&(Ny===1?v>b+g*s/2:v<w-g*s/2)&&(ky=!0),ky)O=!0;else if(Ny===1?v<b+wg:v>w-wg)return-Ny}else if(v>b+g*(1-r)/2&&v<w-g*(1-r)/2)return $9(t)}return O=O||c,O&&(v<b+g*s/2||v>w-g*s/2)?v>b+g/2?1:-1:0}function $9(e){return ju(vn)<ju(e)?1:-1}function B9(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function U9(e){Xg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Xg.push(o)}}function Eg(e){return setTimeout(e,0)}function hw(e){return clearTimeout(e)}wb&&Zr(document,"touchmove",function(e){(vr.active||nv)&&e.cancelable&&e.preventDefault()});vr.utils={on:Zr,off:Xr,css:br,find:K2,is:function(t,n){return!!vs(t,n,t,!1)},extend:O9,throttle:Z2,closest:vs,toggleClass:iu,clone:Q2,index:ju,nextTick:Eg,cancelNextTick:hw,detectDirection:nN,getChild:Sv,expando:Nl};vr.get=function(e){return e[Nl]};vr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(vr.utils=fc(fc({},vr.utils),o.utils)),tm.mount(o)})};vr.create=function(e,t){return new vr(e,t)};vr.version=w9;var Xi=[],by,vw,yw=!1,P1,N1,Yg,_y;function G9(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?Zr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Zr(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Zr(document,"touchmove",this._handleFallbackAutoScroll):Zr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Xr(document,"dragover",this._handleAutoScroll):(Xr(document,"pointermove",this._handleFallbackAutoScroll),Xr(document,"touchmove",this._handleFallbackAutoScroll),Xr(document,"mousemove",this._handleFallbackAutoScroll)),tT(),Og(),x9()},nulling:function(){Yg=vw=by=yw=_y=P1=N1=null,Xi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,h=document.elementFromPoint(s,c);if(Yg=n,o||this.options.forceAutoScrollFallback||em||Nf||Ty){k1(n,this.options,h,o);var v=Rd(h,!0);yw&&(!_y||s!==P1||c!==N1)&&(_y&&tT(),_y=setInterval(function(){var g=Rd(document.elementFromPoint(s,c),!0);g!==v&&(v=g,Og()),k1(n,r.options,g,o)},10),P1=s,N1=c)}else{if(!this.options.bubbleScroll||Rd(h,!0)===sc()){Og();return}k1(n,this.options,Rd(h,!1),!1)}}},Tf(e,{pluginName:"scroll",initializeByDefault:!0})}function Og(){Xi.forEach(function(e){clearInterval(e.pid)}),Xi=[]}function tT(){clearInterval(_y)}var k1=Z2(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,h=t.scrollSpeed,v=sc(),g=!1,b;vw!==n&&(vw=n,Og(),by=t.scroll,b=t.scrollFn,by===!0&&(by=Rd(n,!0)));var w=0,O=by;do{var S=O,P=Yi(S),A=P.top,k=P.bottom,j=P.left,R=P.right,$=P.width,V=P.height,H=void 0,Y=void 0,Q=S.scrollWidth,W=S.scrollHeight,I=br(S),z=S.scrollLeft,K=S.scrollTop;S===v?(H=$<Q&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),Y=V<W&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(H=$<Q&&(I.overflowX==="auto"||I.overflowX==="scroll"),Y=V<W&&(I.overflowY==="auto"||I.overflowY==="scroll"));var q=H&&(Math.abs(R-r)<=c&&z+$<Q)-(Math.abs(j-r)<=c&&!!z),ce=Y&&(Math.abs(k-s)<=c&&K+V<W)-(Math.abs(A-s)<=c&&!!K);if(!Xi[w])for(var ke=0;ke<=w;ke++)Xi[ke]||(Xi[ke]={});(Xi[w].vx!=q||Xi[w].vy!=ce||Xi[w].el!==S)&&(Xi[w].el=S,Xi[w].vx=q,Xi[w].vy=ce,clearInterval(Xi[w].pid),(q!=0||ce!=0)&&(g=!0,Xi[w].pid=setInterval((function(){o&&this.layer===0&&vr.active._onTouchMove(Yg);var Oe=Xi[this.layer].vy?Xi[this.layer].vy*h:0,ze=Xi[this.layer].vx?Xi[this.layer].vx*h:0;typeof b=="function"&&b.call(vr.dragged.parentNode[Nl],ze,Oe,e,Yg,Xi[this.layer].el)!=="continue"||J2(Xi[this.layer].el,ze,Oe)}).bind({layer:w}),24))),w++}while(t.bubbleScroll&&O!==v&&(O=Rd(O,!1)));yw=g}},30),aN=function(t){var n=t.originalEvent,o=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,h=t.hideGhostForTarget,v=t.unhideGhostForTarget;if(n){var g=o||s;h();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,w=document.elementFromPoint(b.clientX,b.clientY);v(),g&&!g.el.contains(w)&&(c("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function _E(){}_E.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=Sv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:aN};Tf(_E,{pluginName:"revertOnSpill"});function wE(){}wE.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:aN};Tf(wE,{pluginName:"removeOnSpill"});vr.mount(new G9);vr.mount(wE,_E);const V9={class:"dialog-footer"},W9=kr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt(!1),c=mt(!1),h=mt({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),v=Lw({name:[{required:!0,message:Zt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Zt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Zt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=mt(!1);$M(g,S=>{S||(h.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=S=>{S&&(h.value=Ye.cloneDeep(S),c.value=!0),g.value=!0},w=()=>{g.value=!1,c.value=!1},O=async S=>{S&&await S.validate(P=>{P&&o("refresh",h.value)})};return t({open:b,close:w}),(S,P)=>{const A=re("el-input"),k=re("el-form-item"),j=re("el-switch"),R=re("el-form"),$=re("el-button"),V=re("el-dialog");return qe(),Rt(V,{title:c.value?S.$t("views.template.templateForm.title.editParam"):S.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":P[8]||(P[8]=H=>g.value=H),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":w,"append-to-body":""},{footer:B(()=>[he("span",V9,[C($,{onClick:P[6]||(P[6]=bn(H=>g.value=!1,["prevent"]))},{default:B(()=>[St(Ue(S.$t("common.cancel")),1)]),_:1}),C($,{type:"primary",onClick:P[7]||(P[7]=H=>O(r.value)),loading:s.value},{default:B(()=>[St(Ue(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:B(()=>[C(R,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:h.value,"require-asterisk-position":"right"},{default:B(()=>[C(k,{label:S.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:B(()=>[C(A,{modelValue:h.value.variable,"onUpdate:modelValue":P[0]||(P[0]=H=>h.value.variable=H),placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:P[1]||(P[1]=H=>h.value.variable=h.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(k,{label:S.$t("dynamicsForm.paramForm.required.label"),onClick:P[3]||(P[3]=bn(()=>{},["prevent"]))},{default:B(()=>[C(j,{size:"small",modelValue:h.value.is_required,"onUpdate:modelValue":P[2]||(P[2]=H=>h.value.is_required=H)},null,8,["modelValue"])]),_:1},8,["label"]),C(k,{label:S.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:h.value.is_required,message:S.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:B(()=>[C(A,{modelValue:h.value.default_value,"onUpdate:modelValue":P[4]||(P[4]=H=>h.value.default_value=H),placeholder:S.$t("dynamicsForm.default.placeholder"),onBlur:P[5]||(P[5]=H=>h.value.name=h.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),z9={class:"flex-between mb-16"},H9={class:"lighter"},X9={class:"mr-4"},Y9=kr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(null),r=mt(),s=mt([]);function c(b,w){typeof w<"u"&&(o.value=w),r.value.open(b)}function h(b){s.value.splice(b,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function v(b){for(let O=0;O<s.value.length;O++)if(s.value[O].variable===b.variable&&o.value!==O){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}let w=t.nodeModel.properties.user_input_field_list;for(let O=0;O<w.length;O++)if(w[O].field===b.variable){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}o.value!==null?s.value.splice(o.value,1,b):s.value.push(b),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const w=n.value.$el.querySelector(".el-table__body-wrapper tbody");w&&vr.create(w,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const S=[...s.value],[P]=S.splice(O.oldIndex,1);S.splice(O.newIndex,0,P),s.value=S,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return xo(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(b=>b.assignment_method==="api_input").forEach(b=>{s.value.push(b)}),Ye.set(t.nodeModel.properties,"api_input_field_list",s)}),(b,w)=>{var H;const O=re("Plus"),S=re("el-icon"),P=re("el-button"),A=re("el-table-column"),k=re("el-switch"),j=re("EditPen"),R=re("el-tooltip"),$=re("Delete"),V=re("el-table");return qe(),Dn(Yo,null,[he("div",z9,[he("h5",H9,Ue(b.$t("views.template.templateForm.title.apiParamPassing")),1),C(P,{link:"",type:"primary",onClick:w[0]||(w[0]=Y=>c())},{default:B(()=>[C(S,{class:"mr-4"},{default:B(()=>[C(O)]),_:1}),St(" "+Ue(b.$t("common.add")),1)]),_:1})]),((H=t.nodeModel.properties.api_input_field_list)==null?void 0:H.length)>0?(qe(),Rt(V,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:B(()=>[C(A,{prop:"variable",label:b.$t("dynamicsForm.paramForm.field.label")},null,8,["label"]),C(A,{prop:"default_value",label:b.$t("dynamicsForm.default.label")},null,8,["label"]),C(A,{label:b.$t("common.required")},{default:B(({row:Y})=>[he("div",{onClick:w[1]||(w[1]=bn(()=>{},["stop"]))},[C(k,{disabled:"",size:"small",modelValue:Y.is_required,"onUpdate:modelValue":Q=>Y.is_required=Q},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),C(A,{label:b.$t("common.operation"),align:"left",width:"90"},{default:B(({row:Y,$index:Q})=>[he("span",X9,[C(R,{effect:"dark",content:b.$t("common.modify"),placement:"top"},{default:B(()=>[C(P,{type:"primary",text:"",onClick:bn(W=>c(Y,Q),["stop"])},{default:B(()=>[C(S,null,{default:B(()=>[C(j)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),C(R,{effect:"dark",content:b.$t("common.delete"),placement:"top"},{default:B(()=>[C(P,{type:"primary",text:"",onClick:W=>h(Q)},{default:B(()=>[C(S,null,{default:B(()=>[C($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):tr("",!0),C(W9,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:v},null,512)],64)}}}),q9={class:"dialog-footer"},K9=kr({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt(!1),c=mt(!1),h=mt(),v=(k,j)=>k.every(R=>GI.get(j,R,void 0)!==void 0),g=so(()=>{if(h.value){const k=h.value;switch(k.type){case"input":return v(["field","input_type","label","required","attrs"],h.value)?h.value:{attrs:k.attrs||{maxlength:20,minlength:0},field:k.field||k.variable,input_type:"TextInput",label:k.label||k.name,default_value:k.default_value,required:k.required!=null?k.required:k.is_required};case"select":return v(["field","input_type","label","required","option_list"],h.value)?h.value:{attrs:k.attrs||{},field:k.field||k.variable,input_type:"SingleSelect",label:k.label||k.name,default_value:k.default_value,required:k.required!=null?k.required:k.is_required,option_list:k.option_list?k.option_list:k.optionList.map(j=>({key:j,value:j}))};case"date":return v(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],h.value)?h.value:{field:k.field||k.variable,input_type:"DatePicker",label:k.label||k.name,default_value:k.default_value,required:k.required!=null?k.required:k.is_required,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return h.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:20,minlength:0}}}),b=mt(null),w=mt([{label:Zt("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:Zt("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:Zt("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:Zt("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:Zt("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:Zt("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:Zt("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),O=mt(!1),S=(k,j)=>{O.value=!0,k?(c.value=!0,h.value=Ye.cloneDeep(k),b.value=j):h.value=null},P=()=>{O.value=!1,c.value=!1,b.value=null,h.value=null},A=async()=>{const k=r.value;k&&await k.validate().then(()=>{o("refresh",k==null?void 0:k.getData(),b.value),c.value=!1,h.value=null,b.value=null})};return t({open:S,close:P}),(k,j)=>{const R=re("el-button"),$=re("el-dialog");return qe(),Rt($,{title:c.value?k.$t("views.template.templateForm.title.editParam"):k.$t("views.template.templateForm.title.addParam"),modelValue:O.value,"onUpdate:modelValue":j[2]||(j[2]=V=>O.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":P,"append-to-body":""},{footer:B(()=>[he("span",q9,[C(R,{onClick:bn(P,["prevent"])},{default:B(()=>[St(Ue(k.$t("common.cancel")),1)]),_:1}),C(R,{type:"primary",onClick:j[1]||(j[1]=V=>A()),loading:s.value},{default:B(()=>[St(Ue(c.value?k.$t("common.save"):k.$t("common.add")),1)]),_:1},8,["loading"])])]),default:B(()=>[C(Fw,{modelValue:g.value,"onUpdate:modelValue":j[0]||(j[0]=V=>g.value=V),"label-position":"top","require-asterisk-position":"right",input_type_list:w.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),Z9={class:"dialog-footer"},J9=kr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt(!1),c=mt({title:Zt("chat.userInput")}),h=Lw({title:[{required:!0,message:Zt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),v=mt(!1),g=O=>{O&&(c.value=Ye.cloneDeep(O)),v.value=!0},b=()=>{v.value=!1},w=async O=>{O&&await O.validate(S=>{S&&o("refresh",c.value)})};return t({open:g,close:b}),(O,S)=>{const P=re("el-input"),A=re("el-form-item"),k=re("el-form"),j=re("el-button"),R=re("el-dialog");return qe(),Rt(R,{title:O.$t("common.setting"),modelValue:v.value,"onUpdate:modelValue":S[4]||(S[4]=$=>v.value=$),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:B(()=>[he("span",Z9,[C(j,{onClick:S[2]||(S[2]=bn($=>v.value=!1,["prevent"]))},{default:B(()=>[St(Ue(O.$t("common.cancel")),1)]),_:1}),C(j,{type:"primary",onClick:S[3]||(S[3]=$=>w(r.value)),loading:s.value},{default:B(()=>[St(Ue(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:B(()=>[C(k,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:c.value,"require-asterisk-position":"right"},{default:B(()=>[C(A,{label:O.$t("common.title"),prop:"title"},{default:B(()=>[C(P,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=$=>c.value.title=$),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=$=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Q9={class:"flex-between mb-16"},eW={class:"lighter"},tW={class:"ml-4"},nW=["title"],rW={key:0},oW=["title"],iW={key:1},aW=["title"],lW=["title"],uW={class:"mr-4"},sW=kr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(),r=mt(),s=mt([]),c=mt({title:Zt("chat.userInput")});function h(P,A){o.value.open(P,A)}function v(){r.value.open(c.value)}function g(P){s.value.splice(P,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function b(P,A){for(let j=0;j<s.value.length;j++)if(s.value[j].field===P.field&&A!==j){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}let k=t.nodeModel.properties.api_input_field_list;for(let j=0;j<k.length;j++)if(k[j].variable===P.field){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}A!==null?s.value.splice(A,1,P):s.value.push(P),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function w(P){c.value=P,r.value.close()}const O=P=>{var A;if(P.input_type==="PasswordInput")return"******";if(P.default_value){const k=(A=P.option_list)==null?void 0:A.filter(j=>P.default_value.indexOf(j.value)>-1).map(j=>j.label).join(",");return k||P.default_value}if(P.default_value!==void 0)return P.default_value};function S(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&vr.create(A,{animation:150,ghostClass:"ghost-row",onEnd:k=>{if(k.oldIndex===void 0||k.newIndex===void 0)return;const j=[...s.value],[R]=j.splice(k.oldIndex,1);j.splice(k.newIndex,0,R),s.value=j,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return xo(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(P=>P.assignment_method==="user_input").forEach(P=>{s.value.push(P)}),s.value.forEach((P,A)=>{switch(P.label=P.label||P.name,P.field=P.field||P.variable,P.required=P.required||P.is_required,P.type){case"input":P.input_type="TextInput";break;case"select":P.input_type="SingleSelect";break;case"date":P.input_type="DatePicker";break}}),Ye.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Ye.set(t.nodeModel.properties,"user_input_config",c),S()}),(P,A)=>{var K;const k=re("Setting"),j=re("el-icon"),R=re("el-button"),$=re("Plus"),V=re("el-table-column"),H=re("el-tag"),Y=re("el-switch"),Q=re("EditPen"),W=re("el-tooltip"),I=re("Delete"),z=re("el-table");return qe(),Dn(Yo,null,[he("div",Q9,[he("h5",eW,Ue(c.value.title),1),he("div",null,[C(R,{type:"primary",link:"",onClick:v},{default:B(()=>[C(j,null,{default:B(()=>[C(k)]),_:1})]),_:1}),he("span",tW,[C(R,{link:"",type:"primary",onClick:A[0]||(A[0]=q=>h())},{default:B(()=>[C(j,{class:"mr-4"},{default:B(()=>[C($)]),_:1}),St(" "+Ue(P.$t("common.add")),1)]),_:1})])])]),((K=t.nodeModel.properties.user_input_field_list)==null?void 0:K.length)>0?(qe(),Rt(z,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:B(()=>[C(V,{prop:"field",label:P.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:B(({row:q})=>[he("span",{title:q.field,class:"ellipsis-1"},Ue(q.field),9,nW)]),_:1},8,["label"]),C(V,{prop:"label",label:P.$t("dynamicsForm.paramForm.name.label")},{default:B(({row:q})=>[q.label&&q.label.input_type==="TooltipLabel"?(qe(),Dn("span",rW,[he("span",{title:q.label.label,class:"ellipsis-1"},Ue(q.label.label),9,oW)])):(qe(),Dn("span",iW,[he("span",{title:q.label,class:"ellipsis-1"},Ue(q.label),9,aW)]))]),_:1},8,["label"]),C(V,{label:P.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:B(({row:q})=>[q.input_type==="TextInput"?(qe(),Rt(H,{key:0,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):tr("",!0),q.input_type==="PasswordInput"?(qe(),Rt(H,{key:1,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):tr("",!0),q.input_type==="Slider"?(qe(),Rt(H,{key:2,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):tr("",!0),q.input_type==="SwitchInput"?(qe(),Rt(H,{key:3,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):tr("",!0),q.input_type==="SingleSelect"?(qe(),Rt(H,{key:4,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):tr("",!0),q.input_type==="MultiSelect"?(qe(),Rt(H,{key:5,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):tr("",!0),q.input_type==="RadioCard"?(qe(),Rt(H,{key:6,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):tr("",!0),q.input_type==="DatePicker"?(qe(),Rt(H,{key:7,type:"info",class:"info-tag"},{default:B(()=>[St(Ue(P.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):tr("",!0)]),_:1},8,["label"]),C(V,{prop:"default_value",label:P.$t("dynamicsForm.default.label")},{default:B(({row:q})=>[he("span",{title:q.default_value,class:"ellipsis-1"},Ue(O(q)),9,lW)]),_:1},8,["label"]),C(V,{label:P.$t("common.required")},{default:B(({row:q})=>[he("div",{onClick:A[1]||(A[1]=bn(()=>{},["stop"]))},[C(Y,{disabled:"",size:"small",modelValue:q.required,"onUpdate:modelValue":ce=>q.required=ce},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),C(V,{label:P.$t("common.operation"),align:"left",width:"90"},{default:B(({row:q,$index:ce})=>[he("span",uW,[C(W,{effect:"dark",content:P.$t("common.modify"),placement:"top"},{default:B(()=>[C(R,{type:"primary",text:"",onClick:bn(ke=>h(q,ce),["stop"])},{default:B(()=>[C(j,null,{default:B(()=>[C(Q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),C(W,{effect:"dark",content:P.$t("common.delete"),placement:"top"},{default:B(()=>[C(R,{type:"primary",text:"",onClick:ke=>g(ce)},{default:B(()=>[C(j,null,{default:B(()=>[C(I)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):tr("",!0),C(K9,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:b},null,512),C(J9,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:w},null,512)],64)}}}),cW="/ui/assets/icon_file-doc-7cb7d059.svg",fW="/ui/assets/icon_file-image-e1249452.svg",dW="/ui/assets/icon_file-audio-d3fb5822.svg",pW={class:"flex-between"},hW={class:"flex align-center"},vW={class:"line-height-22 mt-4"},yW={class:"flex-between"},mW={class:"flex align-center"},gW={class:"line-height-22 mt-4"},bW={class:"flex-between"},_W={class:"flex align-center"},wW={class:"line-height-22 mt-4"},EW={class:"dialog-footer"},OW=kr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=mt(!1),c=mt(!1),h=mt(),v=mt({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1});function g(O){s.value=!0,X1(()=>{v.value={...v.value,...O}})}function b(){s.value=!1}async function w(){const O=h.value;O&&await O.validate().then(()=>{o("refresh",v.value),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:g}),(O,S)=>{const P=re("el-slider"),A=re("el-form-item"),k=re("el-text"),j=re("el-checkbox"),R=re("el-card"),$=re("el-form"),V=re("el-button"),H=re("el-dialog");return qe(),Rt(H,{title:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":S[12]||(S[12]=Y=>s.value=Y),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":"",width:"600"},{footer:B(()=>[he("span",EW,[C(V,{onClick:bn(b,["prevent"])},{default:B(()=>[St(Ue(O.$t("common.cancel")),1)]),_:1}),C(V,{type:"primary",onClick:S[11]||(S[11]=Y=>w()),loading:c.value},{default:B(()=>[St(Ue(O.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:B(()=>[C($,{"label-position":"top",ref_key:"fieldFormRef",ref:h,model:v.value,"require-asterisk-position":"right"},{default:B(()=>[C(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:B(()=>[C(P,{modelValue:v.value.maxFiles,"onUpdate:modelValue":S[0]||(S[0]=Y=>v.value.maxFiles=Y),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:B(()=>[C(P,{modelValue:v.value.fileLimit,"onUpdate:modelValue":S[1]||(S[1]=Y=>v.value.fileLimit=Y),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:B(()=>[C(R,{shadow:"hover",class:Dd(["card-checkbox cursor w-full mb-8",v.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[4]||(S[4]=bn(Y=>v.value.document=!v.value.document,["stop"]))},{default:B(()=>[he("div",pW,[he("div",hW,[S[13]||(S[13]=he("img",{class:"mr-12",src:cW,alt:""},null,-1)),he("div",null,[he("p",vW,Ue(O.$t("common.fileUpload.document"))+"（TXT、MD、DOCX、HTML、CSV、XLSX、XLS、PDF） ",1),C(k,{class:"color-secondary"},{default:B(()=>[St(Ue(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})])]),C(j,{modelValue:v.value.document,"onUpdate:modelValue":S[2]||(S[2]=Y=>v.value.document=Y),onChange:S[3]||(S[3]=Y=>v.value.document=!v.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),C(R,{shadow:"hover",class:Dd(["card-checkbox cursor w-full mb-8",v.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[7]||(S[7]=bn(Y=>v.value.image=!v.value.image,["stop"]))},{default:B(()=>[he("div",yW,[he("div",mW,[S[14]||(S[14]=he("img",{class:"mr-12",src:fW,alt:""},null,-1)),he("div",null,[he("p",gW,Ue(O.$t("common.fileUpload.image"))+"（JPG、JPEG、PNG、GIF） ",1),C(k,{class:"color-secondary"},{default:B(()=>[St(Ue(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})])]),C(j,{modelValue:v.value.image,"onUpdate:modelValue":S[5]||(S[5]=Y=>v.value.image=Y),onChange:S[6]||(S[6]=Y=>v.value.image=!v.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),C(R,{shadow:"hover",class:Dd(["card-checkbox cursor w-full mb-8",v.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[10]||(S[10]=bn(Y=>v.value.audio=!v.value.audio,["stop"]))},{default:B(()=>[he("div",bW,[he("div",_W,[S[15]||(S[15]=he("img",{class:"mr-12",src:dW,alt:""},null,-1)),he("div",null,[he("p",wW,Ue(O.$t("common.fileUpload.audio"))+"（MP3、WAV、OGG、ACC、M4A） ",1),C(k,{class:"color-secondary"},{default:B(()=>[St(Ue(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})])]),C(j,{modelValue:v.value.audio,"onUpdate:modelValue":S[8]||(S[8]=Y=>v.value.audio=Y),onChange:S[9]||(S[9]=Y=>v.value.audio=!v.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),xW={class:"flex-between"},SW={class:"flex align-center"},AW={class:"mr-4"},TW={class:"flex-between"},MW={class:"mr-4"},PW={class:"flex"},NW={class:"flex-between"},kW={class:"mr-4"},RW={class:"flex"},DW={class:"w-full"},CW={class:"flex-between w-full"},jW=kr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Rl.config.globalProperties.$route,n=e,o=mt(null),r=mt(null),s=mt(),c=mt(),h=mt(),v=mt(),g={name:"",desc:"",prologue:Zt("views.application.applicationForm.form.defaultPrologue")},b=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0);function w(I){Ye.set(n.nodeModel.properties.nodeData,"prologue",I)}const O=so({get:()=>(n.nodeModel.properties.nodeData||Ye.set(n.nodeModel.properties,"nodeData",g),n.nodeModel.properties.nodeData),set:I=>{Ye.set(n.nodeModel.properties,"nodeData",I)}}),S=mt(),P=()=>{var I;return O.value.ttsModelEnable&&!O.value.ttsModelId&&O.value.ttsType==="TTS"?Promise.reject({node:n.nodeModel,errMessage:Zt("views.application.applicationForm.form.voicePlay.requiredMessage")}):O.value.sttModelEnable&&!O.value.sttModelId?Promise.reject({node:n.nodeModel,errMessage:Zt("views.application.applicationForm.form.voiceInput.requiredMessage")}):(I=S.value)==null?void 0:I.validate().catch(z=>Promise.reject({node:n.nodeModel,errMessage:z}))};function A(){fa.getApplicationSTTModel(t).then(I=>{o.value=Ye.groupBy(I==null?void 0:I.data,"provider")})}function k(){fa.getApplicationTTSModel(t).then(I=>{r.value=Ye.groupBy(I==null?void 0:I.data,"provider")})}function j(){var I;O.value.ttsModelId?(I=s.value)==null||I.reset_default(O.value.ttsModelId,t):H({})}function R(){O.value.ttsModelEnable||(O.value.ttsModelId="",O.value.ttsType="BROWSER")}function $(){O.value.sttModelEnable||(O.value.sttModelId="")}const V=()=>{var z;const I=O.value.ttsModelId;if(!I){Wp(Zt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(z=s.value)==null||z.open(I,t,O.value.tts_model_params_setting)},H=I=>{O.value.tts_model_params_setting=I},Y=()=>{const I={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1};O.value.file_upload_enable&&(O.value.file_upload_setting=O.value.file_upload_setting||I),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},Q=()=>{var I;(I=v.value)==null||I.open(O.value.file_upload_setting)},W=I=>{O.value.file_upload_setting=I};return xo(()=>{Ye.set(n.nodeModel,"validate",P),n.nodeModel.properties.nodeData.ttsType||Ye.set(n.nodeModel.properties.nodeData,"ttsType","BROWSER"),k(),A()}),(I,z)=>{const K=re("el-input"),q=re("el-form-item"),ce=re("el-tooltip"),ke=re("el-icon"),Oe=re("el-button"),ze=re("el-switch"),Ie=re("el-checkbox"),Pe=re("ModelSelect"),le=re("el-radio"),ye=re("el-radio-group"),Me=re("Operation"),We=re("el-form");return qe(),Rt(Ti,{nodeModel:I.nodeModel},{default:B(()=>[C(We,{onSubmit:z[13]||(z[13]=bn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:B(()=>[C(q,{label:I.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Jr(Zt)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:B(()=>[C(K,{modelValue:O.value.name,"onUpdate:modelValue":z[0]||(z[0]=je=>O.value.name=je),maxlength:"64",placeholder:Jr(Zt)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:z[1]||(z[1]=je=>{var it;return O.value.name=(it=O.value.name)==null?void 0:it.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),C(q,{label:I.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:B(()=>[C(K,{modelValue:O.value.desc,"onUpdate:modelValue":z[2]||(z[2]=je=>O.value.desc=je),placeholder:I.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(q,{label:I.$t("views.application.applicationForm.form.prologue")},{default:B(()=>[C(Cd,{onWheel:b,title:I.$t("views.application.applicationForm.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":z[3]||(z[3]=je=>O.value.prologue=je),style:{height:"150px"},onSubmitDialog:w},null,8,["title","modelValue"])]),_:1},8,["label"]),C(q,null,{label:B(()=>[he("div",xW,[he("div",SW,[he("span",AW,Ue(I.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),C(ce,{effect:"dark",content:I.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:B(()=>[C(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),he("div",null,[O.value.file_upload_enable?(qe(),Rt(Oe,{key:0,type:"primary",link:"",onClick:Q,class:"mr-4"},{default:B(()=>[C(ke,{class:"mr-4"},{default:B(()=>[C(Jr(VI))]),_:1})]),_:1})):tr("",!0),C(ze,{size:"small",modelValue:O.value.file_upload_enable,"onUpdate:modelValue":z[4]||(z[4]=je=>O.value.file_upload_enable=je),onChange:Y},null,8,["modelValue"])])])]),_:1}),C(sW,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":I.nodeModel},null,8,["node-model"]),C(Y9,{ref_key:"ApiInputFieldTableFef",ref:h,"node-model":I.nodeModel},null,8,["node-model"]),C(q,null,{label:B(()=>[he("div",TW,[he("span",MW,Ue(I.$t("views.application.applicationForm.form.voiceInput.label")),1),he("div",PW,[O.value.sttModelEnable?(qe(),Rt(Ie,{key:0,modelValue:O.value.sttAutoSend,"onUpdate:modelValue":z[5]||(z[5]=je=>O.value.sttAutoSend=je)},{default:B(()=>[St(Ue(I.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):tr("",!0),C(ze,{class:"ml-8",size:"small",modelValue:O.value.sttModelEnable,"onUpdate:modelValue":z[6]||(z[6]=je=>O.value.sttModelEnable=je),onChange:$},null,8,["modelValue"])])])]),default:B(()=>[Ua(C(Pe,{onWheel:b,modelValue:O.value.sttModelId,"onUpdate:modelValue":z[7]||(z[7]=je=>O.value.sttModelId=je),placeholder:I.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:o.value},null,8,["modelValue","placeholder","options"]),[[Ev,O.value.sttModelEnable]])]),_:1}),C(q,null,{label:B(()=>[he("div",NW,[he("span",kW,Ue(I.$t("views.application.applicationForm.form.voicePlay.label")),1),he("div",RW,[O.value.ttsModelEnable?(qe(),Rt(Ie,{key:0,modelValue:O.value.ttsAutoplay,"onUpdate:modelValue":z[8]||(z[8]=je=>O.value.ttsAutoplay=je)},{default:B(()=>[St(Ue(I.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):tr("",!0),C(ze,{class:"ml-8",size:"small",modelValue:O.value.ttsModelEnable,"onUpdate:modelValue":z[9]||(z[9]=je=>O.value.ttsModelEnable=je),onChange:R},null,8,["modelValue"])])])]),default:B(()=>[he("div",DW,[Ua(C(ye,{modelValue:O.value.ttsType,"onUpdate:modelValue":z[10]||(z[10]=je=>O.value.ttsType=je)},{default:B(()=>[C(le,{label:I.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),C(le,{label:I.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Ev,O.value.ttsModelEnable]])]),he("div",CW,[O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(qe(),Rt(Pe,{key:0,onWheel:b,modelValue:O.value.ttsModelId,"onUpdate:modelValue":z[11]||(z[11]=je=>O.value.ttsModelId=je),placeholder:I.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:z[12]||(z[12]=je=>j())},null,8,["modelValue","placeholder","options"])):tr("",!0),O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(qe(),Rt(Oe,{key:1,onClick:V,disabled:!O.value.ttsModelId,class:"ml-8"},{default:B(()=>[C(ke,null,{default:B(()=>[C(ke,null,{default:B(()=>[C(Me)]),_:1})]),_:1})]),_:1},8,["disabled"])):tr("",!0)])]),_:1})]),_:1},8,["model"]),C(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:H},null,512),C(OW,{ref_key:"FileUploadSettingDialogRef",ref:v,"node-model":I.nodeModel,onRefresh:W},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const IW=Yy(jW,[["__scopeId","data-v-56d80d58"]]);class LW extends Mi{constructor(t){super(t,IW)}}class FW extends Pi{constructor(t,n){super(t,n)}get_width(){return 600}}const $W={type:"base-node",model:FW,view:LW},BW=Object.freeze(Object.defineProperty({__proto__:null,default:$W},Symbol.toStringTag,{value:"Module"})),UW={class:"title-decoration-1 mb-8"},GW={class:"flex-between w-full"},VW={class:"flex-between"},WW={class:"flex-between lighter"},zW={key:0,class:"mt-8"},HW=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=e,o={modelId:"",system:"",questionReferenceAddress:["start-node","question"],dialogueNumber:1,branch:[{id:Of(),type:"分类 1",condition:""}]},r=H=>H.ctrlKey===!0?(H.preventDefault(),!0):(H.stopPropagation(),!0),s=(H,Y,Q)=>{const I=Ye.cloneDeep(n.nodeModel.properties.branchConditionList?n.nodeModel.properties.branchConditionList:[]).map(z=>z.id===Y.id?{...z,height:H.height,index:Q}:z);Ye.set(n.nodeModel.properties,"branchConditionList",I),A(n.nodeModel.properties.nodeData.branch,!0)},c=so({get:()=>(n.nodeModel.properties.nodeData||(Ye.set(n.nodeModel.properties,"nodeData",o),A(o.branch,!0)),n.nodeModel.properties.nodeData),set:H=>{Ye.set(n.nodeModel.properties,"nodeData",H)}});function h(H){Ye.set(n.nodeModel.properties.nodeData,"system",H)}const v=mt(null),g=mt(),b=mt(),w=mt(),O=()=>{var Y,Q;const H=[(Y=b.value)==null?void 0:Y.validate(),(Q=w.value)==null?void 0:Q.validate()];return Promise.all(H).catch(W=>Promise.reject({node:n.nodeModel,errMessage:W}))},{params:{id:S}}=Rl.config.globalProperties.$route;function P(){const H=Ye.cloneDeep(n.nodeModel.properties.nodeData.branch),Y={type:"分类 "+(H.length+1),id:Of(),condition:""};H.splice(H.length,0,Y),A(H,!0),Ye.set(n.nodeModel.properties.nodeData,"branch",H)}function A(H,Y){const Q=Ye.cloneDeep(n.nodeModel.properties.branchConditionList?n.nodeModel.properties.branchConditionList:[]),W=H.map((I,z)=>{const K=Q.find(q=>q.id===I.id);if(K)return{index:z,height:K.height,id:I.id};if(Y)return{index:z,height:100,id:I.id}}).filter(I=>I);Ye.set(n.nodeModel.properties,"branchConditionList",W),n.nodeModel.refreshBranch()}function k(H){const Y=Ye.cloneDeep(n.nodeModel.properties.nodeData.branch),W=Y.splice(H,1).map(I=>n.nodeModel.id+"_"+I.id+"_right");n.nodeModel.graphModel.eventCenter.emit("delete_edge",n.nodeModel.outgoing.edges.filter(I=>W.includes(I.sourceAnchorId)).map(I=>I.id)),A(Y,!1),Y.forEach((I,z)=>{I.type="分类 "+(z+1)}),Ye.set(n.nodeModel.properties.nodeData,"branch",Y)}const j=H=>{var Y;H&&((Y=g.value)==null||Y.open(H,S,c.value.modelParamsSetting))};function R(H){Ye.set(n.nodeModel.properties.nodeData,"modelParamsSetting",H)}function $(){S?fa.getApplicationModel(S).then(H=>{v.value=Ye.groupBy(H==null?void 0:H.data,"provider")}):t.asyncGetModel().then(H=>{v.value=Ye.groupBy(H==null?void 0:H.data,"provider")})}const V=H=>{var Y;H?(Y=g.value)==null||Y.reset_default(H,S):R({})};return xo(()=>{$(),Ye.set(n.nodeModel,"validate",O),c.value.dialogue_type||(c.value.dialogue_type="WORKFLOW")}),(H,Y)=>{const Q=re("Setting"),W=re("el-icon"),I=re("el-button"),z=re("el-form-item"),K=re("el-option"),q=re("el-select"),ce=re("el-input-number"),ke=re("el-input"),Oe=re("el-col"),ze=re("Delete"),Ie=re("el-row"),Pe=re("el-card"),le=re("Plus"),ye=re("el-form"),Me=jd("resize");return qe(),Rt(Ti,{nodeModel:H.nodeModel},{default:B(()=>[he("h5",UW,Ue(H.$t("views.applicationWorkflow.nodeSetting")),1),C(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(ye,{model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ClassificationNodeFormRef",ref:b,onSubmit:Y[6]||(Y[6]=bn(()=>{},["prevent"]))},{default:B(()=>[C(z,{label:H.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:H.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:B(()=>[he("div",GW,[he("div",null,[he("span",null,[St(Ue(H.$t("views.application.applicationForm.form.aiModel.label")),1),Y[7]||(Y[7]=he("span",{class:"danger"},"*",-1))])]),C(I,{disabled:!c.value.modelId,type:"primary",link:"",onClick:Y[0]||(Y[0]=We=>j(c.value.modelId)),onRefreshForm:R},{default:B(()=>[C(W,null,{default:B(()=>[C(Q)]),_:1})]),_:1},8,["disabled"])])]),default:B(()=>[C(jw,{onChange:V,onWheel:r,teleported:!1,modelValue:c.value.modelId,"onUpdate:modelValue":Y[1]||(Y[1]=We=>c.value.modelId=We),placeholder:H.$t("views.application.applicationForm.form.aiModel.placeholder"),options:v.value,onSubmitModel:$,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(z,{label:H.$t("views.application.applicationForm.form.roleSettings.label")},{default:B(()=>[C(Cd,{title:H.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:c.value.system,"onUpdate:modelValue":Y[2]||(Y[2]=We=>c.value.system=We),style:{height:"100px"},onSubmitDialog:h,placeholder:H.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(z,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:H.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:w,nodeModel:H.nodeModel,class:"w-full",placeholder:H.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:c.value.questionReferenceAddress,"onUpdate:modelValue":Y[3]||(Y[3]=We=>c.value.questionReferenceAddress=We)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),C(z,{label:H.$t("views.application.applicationForm.form.historyRecord.label")},{label:B(()=>[he("div",VW,[he("div",null,Ue(H.$t("views.application.applicationForm.form.historyRecord.label")),1),C(q,{modelValue:c.value.dialogue_type,"onUpdate:modelValue":Y[4]||(Y[4]=We=>c.value.dialogue_type=We),type:"small",style:{width:"100px"}},{default:B(()=>[C(K,{label:H.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),C(K,{label:H.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[C(ce,{modelValue:c.value.dialogueNumber,"onUpdate:modelValue":Y[5]||(Y[5]=We=>c.value.dialogueNumber=We),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),(qe(!0),Dn(Yo,null,Ci(c.value.branch,(We,je)=>Ua((qe(),Rt(Pe,{key:We.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:B(()=>[he("div",WW,Ue(We.type),1),je!==c.value.branch.length?(qe(),Dn("div",zW,[C(Ie,{gutter:8},{default:B(()=>[C(Oe,{span:23},{default:B(()=>[C(z,{prop:"branch."+je+".condition",rules:{required:!0,message:H.$t("views.applicationWorkflow.nodes.classificationNode.valueMessage"),trigger:"blur"}},{default:B(()=>[C(ke,{modelValue:We.condition,"onUpdate:modelValue":it=>We.condition=it,placeholder:H.$t("views.applicationWorkflow.nodes.classificationNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),C(Oe,{span:1},{default:B(()=>[C(I,{disabled:je===0,link:"",type:"info",class:"mt-4",onClick:it=>k(je)},{default:B(()=>[C(W,null,{default:B(()=>[C(ze)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):tr("",!0)]),_:2},1024)),[[Me,it=>s(it,We,je)]])),128)),C(I,{link:"",type:"primary",onClick:P},{default:B(()=>[C(W,{class:"mr-4"},{default:B(()=>[C(le)]),_:1}),St(" "+Ue(H.$t("views.applicationWorkflow.nodes.classificationNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:g,onRefresh:R},null,512)]),_:1},8,["nodeModel"])}}});class XW extends Mi{constructor(t){super(t,HW)}}const YW=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class qW extends Pi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const h=this.properties.showNode===void 0?!0:this.properties.showNode,v=[];if(v.push({x:n-r/2+10,y:h?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=YW(c,g);v.push({x:n+r/2-10,y:h?o-s/2+525+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return v}}const KW={type:"classification-node",model:qW,view:XW},ZW=Object.freeze(Object.defineProperty({__proto__:null,default:KW},Symbol.toStringTag,{value:"Module"})),JW={class:"flex-between lighter"},QW={key:0,class:"info"},ez={key:0,class:"mt-8"},tz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:Of(),type:"IF",condition:"and"},{conditions:[],id:Of(),type:"ELSE",condition:"and"}]},o=P=>P.ctrlKey===!0?(P.preventDefault(),!0):(P.stopPropagation(),!0),r=(P,A,k)=>{const R=Ye.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map($=>$.id===A.id?{...$,height:P.height,index:k}:$);Ye.set(t.nodeModel.properties,"branchConditionList",R),b(t.nodeModel.properties.nodeData.branch,!0)},s=so({get:()=>(t.nodeModel.properties.nodeData||(Ye.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:P=>{Ye.set(t.nodeModel.properties,"nodeData",P)}}),c=mt(),h=mt(),v=()=>{var A;const P=[(A=c.value)==null?void 0:A.validate(),...h.value.map(k=>k.validate())];return Promise.all(P).catch(k=>Promise.reject({node:t.nodeModel,errMessage:k}))};function g(){const P=Ye.cloneDeep(t.nodeModel.properties.nodeData.branch),A={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(P.length-1),id:Of(),condition:"and"};P.splice(P.length-1,0,A),b(P,!0),Ye.set(t.nodeModel.properties.nodeData,"branch",P)}function b(P,A){const k=Ye.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),j=P.map((R,$)=>{const V=k.find(H=>H.id===R.id);if(V)return{index:$,height:V.height,id:R.id};if(A)return{index:$,height:12,id:R.id}}).filter(R=>R);Ye.set(t.nodeModel.properties,"branchConditionList",j),t.nodeModel.refreshBranch()}function w(P){const A=Ye.cloneDeep(t.nodeModel.properties.nodeData.branch);A[P].conditions.push({field:[],compare:"",value:""}),Ye.set(t.nodeModel.properties.nodeData,"branch",A)}function O(P,A){const k=Ye.cloneDeep(t.nodeModel.properties.nodeData.branch);if(k[P].conditions.splice(A,1),k[P].conditions.length===0){const R=k.splice(P,1).map($=>t.nodeModel.id+"_"+$.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter($=>R.includes($.sourceAnchorId)).map($=>$.id)),b(k,!1),k.forEach(($,V)=>{$.type==="ELSE IF "+(V+1)&&($.type="ELSE IF "+V)})}Ye.set(t.nodeModel.properties.nodeData,"branch",k)}function S(P,A,k){if(P==="is_null"||P==="is_not_null"){const j=Ye.cloneDeep(t.nodeModel.properties.nodeData.branch);j[A].conditions[k].value=1,Ye.set(t.nodeModel.properties.nodeData,"branch",j)}}return xo(()=>{Ye.set(t.nodeModel,"validate",v)}),(P,A)=>{const k=re("el-option"),j=re("el-select"),R=re("el-form-item"),$=re("el-col"),V=re("el-input"),H=re("Delete"),Y=re("el-icon"),Q=re("el-button"),W=re("el-row"),I=re("Plus"),z=re("el-card"),K=re("el-form"),q=jd("resize");return qe(),Rt(Ti,{nodeModel:P.nodeModel},{default:B(()=>[C(K,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:A[0]||(A[0]=bn(()=>{},["prevent"]))},{default:B(()=>[(qe(!0),Dn(Yo,null,Ci(s.value.branch,(ce,ke)=>Ua((qe(),Rt(z,{key:ce.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:B(()=>[he("div",JW,[St(Ue(ce.type)+" ",1),ce.conditions.length>1?(qe(),Dn("div",QW,[he("span",null,Ue(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),C(j,{teleported:!1,modelValue:ce.condition,"onUpdate:modelValue":Oe=>ce.condition=Oe,size:"small",style:{width:"60px",margin:"0 8px"}},{default:B(()=>[C(k,{label:P.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),C(k,{label:P.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),he("span",null,Ue(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):tr("",!0)]),ke!==s.value.branch.length-1?(qe(),Dn("div",ez,[(qe(!0),Dn(Yo,null,Ci(ce.conditions,(Oe,ze)=>(qe(),Rt(W,{key:ze,gutter:8},{default:B(()=>[C($,{span:11},{default:B(()=>[C(R,{prop:"branch."+ke+".conditions."+ze+".field",rules:{type:"array",required:!0,message:P.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:B(()=>[C(ko,{ref_for:!0,ref_key:"nodeCascaderRef",ref:h,nodeModel:P.nodeModel,class:"w-full",placeholder:P.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Oe.field,"onUpdate:modelValue":Ie=>Oe.field=Ie},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),C($,{span:6},{default:B(()=>[C(R,{prop:"branch."+ke+".conditions."+ze+".compare",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:B(()=>[C(j,{onWheel:o,teleported:!1,modelValue:Oe.compare,"onUpdate:modelValue":Ie=>Oe.compare=Ie,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:Ie=>S(Ie,ke,ze)},{default:B(()=>[(qe(!0),Dn(Yo,null,Ci(Jr(WI),(Ie,Pe)=>(qe(),Rt(k,{key:Pe,label:Ie.label,value:Ie.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),C($,{span:6},{default:B(()=>[Oe.compare!=="is_null"&&Oe.compare!=="is_not_null"?(qe(),Rt(R,{key:0,prop:"branch."+ke+".conditions."+ze+".value",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:B(()=>[C(V,{modelValue:Oe.value,"onUpdate:modelValue":Ie=>Oe.value=Ie,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):tr("",!0)]),_:2},1024),C($,{span:1},{default:B(()=>[C(Q,{disabled:ke===0&&ze===0,link:"",type:"info",class:"mt-4",onClick:Ie=>O(ke,ze)},{default:B(()=>[C(Y,null,{default:B(()=>[C(H)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):tr("",!0),ke!==s.value.branch.length-1?(qe(),Rt(Q,{key:1,link:"",type:"primary",onClick:Oe=>w(ke)},{default:B(()=>[C(Y,{class:"mr-4"},{default:B(()=>[C(I)]),_:1}),St(" "+Ue(P.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):tr("",!0)]),_:2},1024)),[[q,Oe=>r(Oe,ce,ke)]])),128)),C(Q,{link:"",type:"primary",onClick:g},{default:B(()=>[C(Y,{class:"mr-4"},{default:B(()=>[C(I)]),_:1}),St(" "+Ue(P.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class nz extends Mi{constructor(t){super(t,tz)}}const rz=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class oz extends Pi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const h=this.properties.showNode===void 0?!0:this.properties.showNode,v=[];if(v.push({x:n-r/2+10,y:h?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=rz(c,g);v.push({x:n+r/2-10,y:h?o-s/2+75+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return v}}const iz={type:"condition-node",model:oz,view:nz},az=Object.freeze(Object.defineProperty({__proto__:null,default:iz},Symbol.toStringTag,{value:"Module"})),lz={class:"title-decoration-1 mb-8"},uz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},o=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{Ye.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=re("el-form-item"),h=re("el-form"),v=re("el-card");return qe(),Rt(Ti,{nodeModel:r.nodeModel},{default:B(()=>[he("h5",lz,Ue(r.$t("views.applicationWorkflow.nodeSetting")),1),C(v,{shadow:"never",class:"card-never"},{default:B(()=>[C(h,{onSubmit:s[1]||(s[1]=bn(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:B(()=>[C(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:B(()=>[C(ko,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:o.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let sz=class extends Mi{constructor(t){super(t,uz)}};const cz={type:"document-extract-node",model:Pi,view:sz},fz=Object.freeze(Object.defineProperty({__proto__:null,default:cz},Symbol.toStringTag,{value:"Module"})),dz={class:"flex-between"},pz={class:"flex-between"},hz={class:"flex-between"},vz={class:"flex-between"},yz={class:"mr-4"},mz={class:"flex align-center"},gz={class:"mr-4"},bz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={titleType:"content",title:"",titleReference:[],xAxisType:"content",xAxis:"",xAxisReference:[],yAxisType:"content",yAxis:"",yAxisReference:[],chartTypeType:"content",chartType:"line",chartTypeReference:[],isResult:!1},r=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{Ye.set(t.nodeModel.properties,"nodeData",g)}});function s(g){Ye.set(t.nodeModel.properties.nodeData,"content",g)}const c=mt(),h=mt(),v=()=>{var g;return Promise.all([h.value?h.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return xo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Bd(t.nodeModel)&&Ye.set(t.nodeModel.properties.nodeData,"isResult",!0),Ye.set(t.nodeModel,"validate",v)}),(g,b)=>{const w=re("el-option"),O=re("el-select"),S=re("el-form-item"),P=re("AppIcon"),A=re("el-tooltip"),k=re("el-switch"),j=re("el-form"),R=re("el-card");return qe(),Rt(Ti,{nodeModel:g.nodeModel},{default:B(()=>[C(R,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(j,{onSubmit:b[14]||(b[14]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"echartsNodeFormRef",ref:c},{default:B(()=>[C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.title.label")},{label:B(()=>[he("div",dz,[he("span",null,Ue(g.$t("views.applicationWorkflow.nodes.echartsNode.title.label")),1),C(O,{teleported:!1,modelValue:r.value.titleType,"onUpdate:modelValue":b[0]||(b[0]=$=>r.value.titleType=$),size:"small",style:{width:"85px"}},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.title.reference"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.title.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[r.value.titleType==="content"?(qe(),Rt(Cd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.title.label"),modelValue:r.value.title,"onUpdate:modelValue":b[1]||(b[1]=$=>r.value.title=$),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(qe(),Rt(ko,{key:1,ref_key:"nodeCascaderRef",ref:h,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.echartsNode.title.placeholder"),modelValue:r.value.titleReference,"onUpdate:modelValue":b[2]||(b[2]=$=>r.value.titleReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label")},{label:B(()=>[he("div",pz,[he("span",null,Ue(g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label")),1),C(O,{teleported:!1,modelValue:r.value.xAxisType,"onUpdate:modelValue":b[3]||(b[3]=$=>r.value.xAxisType=$),size:"small",style:{width:"85px"}},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.reference"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[r.value.xAxisType==="content"?(qe(),Rt(Cd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label"),modelValue:r.value.xAxis,"onUpdate:modelValue":b[4]||(b[4]=$=>r.value.xAxis=$),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(qe(),Rt(ko,{key:1,ref_key:"nodeCascaderRef",ref:h,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.placeholder"),modelValue:r.value.xAxisReference,"onUpdate:modelValue":b[5]||(b[5]=$=>r.value.xAxisReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label")},{label:B(()=>[he("div",hz,[he("span",null,Ue(g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label")),1),C(O,{teleported:!1,modelValue:r.value.yAxisType,"onUpdate:modelValue":b[6]||(b[6]=$=>r.value.yAxisType=$),size:"small",style:{width:"85px"}},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.reference"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[r.value.yAxisType==="content"?(qe(),Rt(Cd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label"),modelValue:r.value.yAxis,"onUpdate:modelValue":b[7]||(b[7]=$=>r.value.yAxis=$),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(qe(),Rt(ko,{key:1,ref_key:"nodeCascaderRef",ref:h,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.placeholder"),modelValue:r.value.yAxisReference,"onUpdate:modelValue":b[8]||(b[8]=$=>r.value.yAxisReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.label")},{label:B(()=>[he("div",vz,[he("div",yz,[he("span",null,Ue(g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.label")),1)]),C(O,{teleported:!1,modelValue:r.value.chartTypeType,"onUpdate:modelValue":b[9]||(b[9]=$=>r.value.chartTypeType=$),size:"small",style:{width:"85px"}},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.reference"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[r.value.chartTypeType==="content"?(qe(),Rt(O,{key:0,teleported:!1,modelValue:r.value.chartType,"onUpdate:modelValue":b[10]||(b[10]=$=>r.value.chartType=$),size:"small"},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.lineChart"),value:"line"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.barChart"),value:"bar"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.pieChart"),value:"pie"},null,8,["label"])]),_:1},8,["modelValue"])):(qe(),Rt(ko,{key:1,ref_key:"nodeCascaderRef",ref:h,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.placeholder"),modelValue:r.value.chartTypeReference,"onUpdate:modelValue":b[11]||(b[11]=$=>r.value.chartTypeReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[13]||(b[13]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",mz,[he("div",gz,[he("span",null,[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[15]||(b[15]=he("span",{class:"danger"},"*",-1))])]),C(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(k,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[12]||(b[12]=$=>r.value.isResult=$)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class _z extends Mi{constructor(t){super(t,bz)}}const wz={type:"echarts-node",model:Pi,view:_z},Ez=Object.freeze(Object.defineProperty({__proto__:null,default:wz},Symbol.toStringTag,{value:"Module"})),Oz={class:"dialog-footer"},xz=kr({__name:"AddFormCollect",props:{title:{default:Zt("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=mt(!1),s=mt(),c=mt({}),h=mt(!1),v=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var w;(w=s.value)==null||w.validate().then(()=>{var O;o.addFormField((O=s.value)==null?void 0:O.getData()),g()})};return t({close:g,open:v}),(w,O)=>{const S=re("el-button"),P=re("el-dialog");return qe(),Rt(P,{title:w.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:B(()=>[he("span",Oz,[C(S,{onClick:O[1]||(O[1]=bn(A=>r.value=!1,["prevent"]))},{default:B(()=>[St(Ue(w.$t("common.cancel")),1)]),_:1}),C(S,{type:"primary",onClick:O[2]||(O[2]=A=>b()),loading:h.value},{default:B(()=>[St(Ue(w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:B(()=>[C(Fw,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),Sz={class:"dialog-footer"},Az=kr({__name:"EditFormCollect",props:{title:{default:Zt("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=mt(!1),s=mt(),c=mt({}),h=mt(0),v=mt(!1),g=(O,S)=>{r.value=!0,c.value=O,h.value=S},b=()=>{r.value=!1,c.value={}},w=()=>{var O;(O=s.value)==null||O.validate().then(()=>{var S;o.editFormField((S=s.value)==null?void 0:S.getData(),h.value),b()})};return t({close:b,open:g}),(O,S)=>{const P=re("el-button"),A=re("el-dialog");return qe(),Rt(A,{title:O.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=k=>r.value=k),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:B(()=>[he("span",Sz,[C(P,{onClick:S[1]||(S[1]=bn(k=>r.value=!1,["prevent"]))},{default:B(()=>[St(Ue(O.$t("common.cancel")),1)]),_:1}),C(P,{type:"primary",onClick:S[2]||(S[2]=k=>w()),loading:v.value},{default:B(()=>[St(Ue(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:B(()=>[C(Fw,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=k=>c.value=k),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),Tz={class:"title-decoration-1 mb-8"},Mz={class:"flex align-center"},Pz={class:"mr-4"},Nz={class:"flex-between"},kz={class:"lighter"},Rz=["title"],Dz={key:0},Cz=["title"],jz={key:1},Iz=["title"],Lz=["title"],Fz={class:"mr-4"},$z=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(),r=(R,$)=>{const V=S.value.form_field_list.map((H,Y)=>$===Y?Ye.cloneDeep(R):Ye.cloneDeep(H));S.value.form_field_list=V,console.log("editFormField",R,$),c()},s=R=>{if(S.value.form_field_list.some($=>$.field===R.field)){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+R.field);return}S.value.form_field_list=Ye.cloneDeep([...S.value.form_field_list,R]),console.log("addFormField",R),c()},c=()=>{const R=[{label:Zt("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"formData"},...S.value.form_field_list.map($=>({value:$.field,label:typeof $.label=="string"?$.label:$.label.label}))];Ye.set(t.nodeModel.properties.config,"fields",R),t.nodeModel.clear_next_node_field(!1),j()},h=mt(),v=mt(),g=()=>{var R;(R=h.value)==null||R.open()},b=(R,$)=>{var V;(V=v.value)==null||V.open(Ye.cloneDeep(R),$)},w=R=>{S.value.form_field_list=S.value.form_field_list.filter($=>$.field!==R.field),c()},O=mt({isResult:!0,form_content_format:`${Zt("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Zt("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),S=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",O.value),t.nodeModel.properties.nodeData),set:R=>{Ye.set(t.nodeModel.properties,"nodeData",R)}}),P=R=>{var $;if(R.default_value){const V=($=R.option_list)==null?void 0:$.filter(H=>R.default_value.indexOf(H.value)>-1).map(H=>H.label).join(",");return V||R.default_value}if(R.default_value!==void 0)return R.default_value},A=()=>{var R;return(R=n.value)==null?void 0:R.validate()};function k(R){Ye.set(t.nodeModel.properties.nodeData,"form_content_format",R)}function j(){if(!o.value)return;const $=o.value.$el.querySelector(".el-table__body-wrapper tbody");$&&vr.create($,{animation:150,ghostClass:"ghost-row",onEnd:V=>{if(V.oldIndex===void 0||V.newIndex===void 0)return;const H=[...S.value.form_field_list],[Y]=H.splice(V.oldIndex,1);H.splice(V.newIndex,0,Y),S.value.form_field_list=H,c()}})}return xo(()=>{Ye.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(R,$)=>{const V=re("AppIcon"),H=re("el-tooltip"),Y=re("MdEditorMagnify"),Q=re("el-form-item"),W=re("Plus"),I=re("el-icon"),z=re("el-button"),K=re("el-table-column"),q=re("el-tag"),ce=re("el-switch"),ke=re("EditPen"),Oe=re("Delete"),ze=re("el-table"),Ie=re("el-form"),Pe=re("el-card");return qe(),Rt(Ti,{nodeModel:R.nodeModel},{default:B(()=>[he("h5",Tz,Ue(R.$t("views.applicationWorkflow.nodeSetting")),1),C(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(Ie,{onSubmit:$[4]||($[4]=bn(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:B(()=>[C(Q,{label:R.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:R.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:B(()=>[he("div",Mz,[he("div",Pz,[he("span",null,[St(Ue(R.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),$[5]||($[5]=he("span",{class:"danger"},"*",-1))])]),C(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:B(()=>[C(V,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(Y,{title:R.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:S.value.form_content_format,"onUpdate:modelValue":$[0]||($[0]=le=>S.value.form_content_format=le),style:{height:"150px"},onSubmitDialog:k},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:$[3]||($[3]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",Nz,[he("h5",kz,Ue(R.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),C(z,{link:"",type:"primary",onClick:$[1]||($[1]=le=>g())},{default:B(()=>[C(I,{class:"mr-4"},{default:B(()=>[C(W)]),_:1}),St(" "+Ue(R.$t("common.add")),1)]),_:1})])]),default:B(()=>[S.value.form_field_list.length>0?(qe(),Rt(ze,{key:0,class:"border",data:S.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:B(()=>[C(K,{prop:"field",label:R.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:B(({row:le})=>[he("span",{title:le.field,class:"ellipsis-1"},Ue(le.field),9,Rz)]),_:1},8,["label"]),C(K,{prop:"label",label:R.$t("dynamicsForm.paramForm.name.label")},{default:B(({row:le})=>[le.label&&le.label.input_type==="TooltipLabel"?(qe(),Dn("span",Dz,[he("span",{title:le.label.label,class:"ellipsis-1"},Ue(le.label.label),9,Cz)])):(qe(),Dn("span",jz,[he("span",{title:le.label,class:"ellipsis-1"},Ue(le.label),9,Iz)]))]),_:1},8,["label"]),C(K,{label:R.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:B(({row:le})=>[C(q,{type:"info",class:"info-tag"},{default:B(()=>{var ye;return[St(Ue((ye=Jr(zI).find(Me=>Me.value===le.input_type))==null?void 0:ye.label),1)]}),_:2},1024)]),_:1},8,["label"]),C(K,{prop:"default_value",label:R.$t("dynamicsForm.default.label")},{default:B(({row:le})=>[he("span",{title:le.default_value,class:"ellipsis-1"},Ue(P(le)),9,Lz)]),_:1},8,["label"]),C(K,{label:R.$t("common.required"),width:"85"},{default:B(({row:le})=>[he("div",{onClick:$[2]||($[2]=bn(()=>{},["stop"]))},[C(ce,{disabled:"",size:"small",modelValue:le.required,"onUpdate:modelValue":ye=>le.required=ye},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),C(K,{label:R.$t("common.operation"),align:"left",width:"90"},{default:B(({row:le,$index:ye})=>[he("span",Fz,[C(H,{effect:"dark",content:R.$t("common.modify"),placement:"top"},{default:B(()=>[C(z,{type:"primary",text:"",onClick:bn(Me=>b(le,ye),["stop"])},{default:B(()=>[C(I,null,{default:B(()=>[C(ke)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),C(H,{effect:"dark",content:R.$t("common.delete"),placement:"top"},{default:B(()=>[C(z,{type:"primary",text:"",onClick:Me=>w(le)},{default:B(()=>[C(I,null,{default:B(()=>[C(Oe)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):tr("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(xz,{ref_key:"addFormCollectRef",ref:h,addFormField:s},null,512),C(Az,{ref_key:"editFormCollectRef",ref:v,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class Bz extends Mi{constructor(t){super(t,$z)}}const Uz={type:"form-node",model:Pi,view:Bz},Gz=Object.freeze(Object.defineProperty({__proto__:null,default:Uz},Symbol.toStringTag,{value:"Module"})),Vz={class:"title-decoration-1 mb-16"},Wz={class:"lighter mb-8"},zz={key:0},Hz={class:"flex-between"},Xz={class:"flex"},Yz={class:"flex"},qz={key:0,class:"danger"},Kz={class:"flex align-center"},Zz={class:"mr-4"},Jz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(),{params:{id:o}}=Rl.config.globalProperties.$route,r={inputFieldList:[],isResult:!1},s=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:g=>{Ye.set(t.nodeModel.properties,"nodeData",g)}}),c=mt(),h=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},v=()=>{if(!t.nodeModel.properties.nodeData.function_lib_id){Ye.set(t.nodeModel.properties,"status",500);return}fa.getFunctionLib(o,t.nodeModel.properties.nodeData.function_lib_id).then(g=>{const b=t.nodeModel.properties.nodeData.inputFieldList,w=g.data.inputFieldList.map(O=>{const S=b.find(P=>P.name==O.name);return S&&S.source==O.source?{...O,value:JSON.parse(JSON.stringify(S.value))}:{...O,value:O.source=="reference"?[]:""}});Ye.set(t.nodeModel.properties.nodeData,"inputFieldList",w),Ye.set(t.nodeModel.properties,"status",g.data.isActive?200:500)}).catch(g=>{Ye.set(t.nodeModel.properties,"status",500)})};return xo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Bd(t.nodeModel)&&Ye.set(t.nodeModel.properties.nodeData,"isResult",!0),v(),Ye.set(t.nodeModel,"validate",h)}),(g,b)=>{const w=re("auto-tooltip"),O=re("el-tag"),S=re("el-input"),P=re("el-form-item"),A=re("el-text"),k=re("el-card"),j=re("AppIcon"),R=re("el-tooltip"),$=re("el-switch"),V=re("el-form");return qe(),Rt(Ti,{nodeModel:g.nodeModel},{default:B(()=>[he("h5",Vz,Ue(g.$t("views.applicationWorkflow.nodeSetting")),1),he("h5",Wz,Ue(g.$t("common.param.inputParam")),1),C(V,{onSubmit:b[2]||(b[2]=bn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:B(()=>[C(k,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:B(()=>{var H;return[((H=s.value.inputFieldList)==null?void 0:H.length)>0?(qe(),Dn("div",zz,[(qe(!0),Dn(Yo,null,Ci(s.value.inputFieldList,(Y,Q)=>(qe(),Rt(P,{key:Y.name,label:Y.name,prop:"inputFieldList."+Q+".value",rules:{required:Y.is_required,message:Y.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:B(()=>[he("div",Hz,[he("div",Xz,[he("span",Yz,[C(w,{content:Y.name,style:{"max-width":"130px"}},{default:B(()=>[St(Ue(Y.name),1)]),_:2},1032,["content"]),Y.is_required?(qe(),Dn("span",qz,"*")):tr("",!0)]),C(O,{type:"info",class:"info-tag ml-4"},{default:B(()=>[St(Ue(Y.type),1)]),_:2},1024)])])]),default:B(()=>[Y.source==="reference"?(qe(),Rt(ko,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Y.value,"onUpdate:modelValue":W=>Y.value=W},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(qe(),Rt(S,{key:1,modelValue:Y.value,"onUpdate:modelValue":W=>Y.value=W,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(qe(),Rt(A,{key:1,type:"info"},{default:B(()=>[St(Ue(g.$t("common.noData")),1)]),_:1}))]}),_:1}),C(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",Kz,[he("div",Zz,[he("span",null,[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[3]||(b[3]=he("span",{class:"danger"},"*",-1))])]),C(R,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C($,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[0]||(b[0]=H=>s.value.isResult=H)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class Qz extends Mi{constructor(t){super(t,Jz)}}const eH={type:"function-lib-node",model:Pi,view:Qz},tH=Object.freeze(Object.defineProperty({__proto__:null,default:eH},Symbol.toStringTag,{value:"Module"})),nH={class:"title-decoration-1 mb-16"},rH={class:"flex-between"},oH={class:"lighter mb-8"},iH={key:0},aH={class:"flex-between"},lH={class:"flex"},uH={class:"flex"},sH={key:0,class:"danger"},cH={class:"lighter mb-8"},fH={key:0,class:"mb-8"},dH={class:"flex align-center"},pH={class:"mr-4"},hH=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=mt(),r=mt(),s={code:"",inputFieldList:[],isResult:!1},c=mt(null),h=mt(!1),v=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:A=>{Ye.set(t.nodeModel.properties,"nodeData",A)}}),g=mt(),b=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(k=>Promise.reject({node:t.nodeModel,errMessage:k}))};function w(A){Ye.set(t.nodeModel.properties.nodeData,"code",A)}function O(A,k){typeof k<"u"&&(c.value=k),o.value.open(A)}function S(A){const k=Ye.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);k.splice(A,1),Ye.set(t.nodeModel.properties.nodeData,"inputFieldList",k)}function P(A){const k=Ye.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),j={...A,value:A.source==="reference"?[]:""};c.value!==null?k.splice(c.value,1,j):k.push(j),Ye.set(t.nodeModel.properties.nodeData,"inputFieldList",k),c.value=null}return xo(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&Bd(t.nodeModel)&&Ye.set(t.nodeModel.properties.nodeData,"isResult",!0),Ye.set(t.nodeModel,"validate",b),setTimeout(()=>{h.value=!0},100)}),(A,k)=>{const j=re("Plus"),R=re("el-icon"),$=re("el-button"),V=re("auto-tooltip"),H=re("el-tag"),Y=re("EditPen"),Q=re("Delete"),W=re("el-input"),I=re("el-form-item"),z=re("el-text"),K=re("el-card"),q=re("CodemirrorEditor"),ce=re("AppIcon"),ke=re("el-tooltip"),Oe=re("el-switch"),ze=re("el-form");return qe(),Rt(Ti,{nodeModel:A.nodeModel},{default:B(()=>[he("h5",nH,Ue(A.$t("views.applicationWorkflow.nodeSetting")),1),he("div",rH,[he("h5",oH,Ue(A.$t("common.param.inputParam")),1),C($,{link:"",type:"primary",onClick:k[0]||(k[0]=Ie=>O())},{default:B(()=>[C(R,{class:"mr-4"},{default:B(()=>[C(j)]),_:1}),St(" "+Ue(A.$t("common.add")),1)]),_:1})]),C(ze,{onSubmit:k[4]||(k[4]=bn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:v.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:B(()=>[C(K,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:B(()=>{var Ie;return[((Ie=v.value.inputFieldList)==null?void 0:Ie.length)>0?(qe(),Dn("div",iH,[(qe(!0),Dn(Yo,null,Ci(v.value.inputFieldList,(Pe,le)=>(qe(),Rt(I,{key:le,label:Pe.name,prop:"inputFieldList."+le+".value",rules:{required:Pe.is_required,message:Pe.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:B(()=>[he("div",aH,[he("div",lH,[he("span",uH,[C(V,{content:Pe.name,style:{"max-width":"130px"}},{default:B(()=>[St(Ue(Pe.name),1)]),_:2},1032,["content"]),Pe.is_required?(qe(),Dn("span",sH,"*")):tr("",!0)]),C(H,{type:"info",class:"info-tag ml-4"},{default:B(()=>[St(Ue(Pe.type),1)]),_:2},1024)]),he("div",null,[C($,{text:"",onClick:bn(ye=>O(Pe,le),["stop"])},{default:B(()=>[C(R,null,{default:B(()=>[C(Y)]),_:1})]),_:2},1032,["onClick"]),C($,{text:"",onClick:ye=>S(le),style:{"margin-left":"4px !important"}},{default:B(()=>[C(R,null,{default:B(()=>[C(Q)]),_:1})]),_:2},1032,["onClick"])])])]),default:B(()=>[Pe.source==="reference"?(qe(),Rt(ko,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Pe.value,"onUpdate:modelValue":ye=>Pe.value=ye,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(qe(),Rt(W,{key:1,modelValue:Pe.value,"onUpdate:modelValue":ye=>Pe.value=ye,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(qe(),Rt(z,{key:1,type:"info"},{default:B(()=>[St(Ue(A.$t("common.noData")),1)]),_:1}))]}),_:1}),he("h5",cH,Ue(A.$t("views.functionLib.functionForm.form.param.code")),1),h.value?(qe(),Dn("div",fH,[C(q,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:v.value.code,"onUpdate:modelValue":k[1]||(k[1]=Ie=>v.value.code=Ie),onWheel:n,style:{height:"130px !important"},onSubmitDialog:w},null,8,["title","modelValue"])])):tr("",!0),C(I,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:k[3]||(k[3]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",dH,[he("div",pH,[he("span",null,[St(Ue(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),k[5]||(k[5]=he("span",{class:"danger"},"*",-1))])]),C(ke,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(ce,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(Oe,{size:"small",modelValue:v.value.isResult,"onUpdate:modelValue":k[2]||(k[2]=Ie=>v.value.isResult=Ie)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),C(AL,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class vH extends Mi{constructor(t){super(t,hH)}}const yH={type:"function-node",model:Pi,view:vH},mH=Object.freeze(Object.defineProperty({__proto__:null,default:yH},Symbol.toStringTag,{value:"Module"})),gH={class:"title-decoration-1 mb-8"},bH={class:"flex-between w-full"},_H={class:"flex align-center"},wH={class:"mr-4"},EH={class:"flex align-center"},OH={class:"mr-4"},xH={class:"flex align-center"},SH={class:"mr-4"},AH=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=mt(null),s=mt(),c=mt(),h=()=>{var R;return(R=c.value)==null?void 0:R.validate().catch($=>Promise.reject({node:o.nodeModel,errMessage:$}))},v=R=>R.ctrlKey===!0?(R.preventDefault(),!0):(R.stopPropagation(),!0),b={modelId:"",system:"",prompt:`{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},w=so({get:()=>(o.nodeModel.properties.nodeData||Ye.set(o.nodeModel.properties,"nodeData",b),o.nodeModel.properties.nodeData),set:R=>{Ye.set(o.nodeModel.properties,"nodeData",R)}});function O(){n?fa.getApplicationTTIModel(n).then(R=>{r.value=Ye.groupBy(R==null?void 0:R.data,"provider")}):t.asyncGetModel().then(R=>{r.value=Ye.groupBy(R==null?void 0:R.data,"provider")})}const S=()=>{var R;w.value.modelId?(R=s.value)==null||R.reset_default(w.value.modelId,n):A({})},P=R=>{var $;R&&(($=s.value)==null||$.open(R,n,w.value.modelParamsSetting))};function A(R){Ye.set(o.nodeModel.properties.nodeData,"modelParamsSetting",R)}function k(R){Ye.set(o.nodeModel.properties.nodeData,"prompt",R)}function j(R){Ye.set(o.nodeModel.properties.nodeData,"negative_prompt",R)}return xo(()=>{O(),Ye.set(o.nodeModel,"validate",h)}),(R,$)=>{const V=re("Setting"),H=re("el-icon"),Y=re("el-button"),Q=re("el-form-item"),W=re("AppIcon"),I=re("el-tooltip"),z=re("MdEditorMagnify"),K=re("el-switch"),q=re("el-form"),ce=re("el-card");return qe(),Rt(Ti,{"node-model":R.nodeModel},{default:B(()=>[he("h5",gH,Ue(R.$t("views.applicationWorkflow.nodeSetting")),1),C(ce,{shadow:"never",class:"card-never"},{default:B(()=>[C(q,{onSubmit:$[6]||($[6]=bn(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:B(()=>[C(Q,{label:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:B(()=>[he("div",bH,[he("div",null,[he("span",null,[St(Ue(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),$[7]||($[7]=he("span",{class:"danger"},"*",-1))])]),C(Y,{disabled:!w.value.modelId,type:"primary",link:"",onClick:$[0]||($[0]=ke=>P(w.value.modelId)),onRefreshForm:A},{default:B(()=>[C(H,null,{default:B(()=>[C(V)]),_:1})]),_:1},8,["disabled"])])]),default:B(()=>[C(jw,{onChange:S,onWheel:v,teleported:!1,modelValue:w.value.modelId,"onUpdate:modelValue":$[1]||($[1]=ke=>w.value.modelId=ke),placeholder:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:R.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:B(()=>[he("div",_H,[he("div",wH,[he("span",null,[St(Ue(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),$[8]||($[8]=he("span",{class:"danger"},"*",-1))])]),C(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:B(()=>[C(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(z,{onWheel:v,title:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:w.value.prompt,"onUpdate:modelValue":$[2]||($[2]=ke=>w.value.prompt=ke),style:{height:"150px"},onSubmitDialog:k},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:R.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:B(()=>[he("div",EH,[he("div",OH,[he("span",null,Ue(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),C(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:B(()=>[C(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(z,{onWheel:v,title:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:w.value.negative_prompt,"onUpdate:modelValue":$[3]||($[3]=ke=>w.value.negative_prompt=ke),placeholder:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:j},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[5]||($[5]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",xH,[he("div",SH,[he("span",null,[St(Ue(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),$[9]||($[9]=he("span",{class:"danger"},"*",-1))])]),C(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(K,{size:"small",modelValue:w.value.isResult,"onUpdate:modelValue":$[4]||($[4]=ke=>w.value.isResult=ke)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});let TH=class extends Mi{constructor(t){super(t,AH)}};const MH={type:"image-generate-node",model:Pi,view:TH},PH=Object.freeze(Object.defineProperty({__proto__:null,default:MH},Symbol.toStringTag,{value:"Module"})),NH={class:"title-decoration-1 mb-8"},kH={class:"flex-between w-full"},RH={class:"flex align-center"},DH={class:"mr-4"},CH={class:"flex-between"},jH={class:"flex align-center"},IH={class:"mr-4"},LH=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=mt(null),s=mt(),c=mt(),h=mt(),v=()=>{var R;return Promise.all([h.value?h.value.validate():Promise.resolve(""),(R=c.value)==null?void 0:R.validate()]).catch($=>Promise.reject({node:o.nodeModel,errMessage:$}))},g=R=>R.ctrlKey===!0?(R.preventDefault(),!0):(R.stopPropagation(),!0),w={modelId:"",system:"",prompt:`{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},O=so({get:()=>(o.nodeModel.properties.nodeData||Ye.set(o.nodeModel.properties,"nodeData",w),o.nodeModel.properties.nodeData),set:R=>{Ye.set(o.nodeModel.properties,"nodeData",R)}});function S(){n?fa.getApplicationImageModel(n).then(R=>{r.value=Ye.groupBy(R==null?void 0:R.data,"provider")}):t.asyncGetModel().then(R=>{r.value=Ye.groupBy(R==null?void 0:R.data,"provider")})}function P(R){Ye.set(o.nodeModel.properties.nodeData,"system",R)}function A(R){Ye.set(o.nodeModel.properties.nodeData,"prompt",R)}const k=R=>{var $;R&&(($=s.value)==null||$.open(R,n,O.value.modelParamsSetting))};function j(R){Ye.set(o.nodeModel.properties.nodeData,"modelParamsSetting",R)}return xo(()=>{S(),Ye.set(o.nodeModel,"validate",v)}),(R,$)=>{const V=re("Setting"),H=re("el-icon"),Y=re("el-button"),Q=re("ModelSelect"),W=re("el-form-item"),I=re("MdEditorMagnify"),z=re("AppIcon"),K=re("el-tooltip"),q=re("el-option"),ce=re("el-select"),ke=re("el-input-number"),Oe=re("el-switch"),ze=re("el-form"),Ie=re("el-card");return qe(),Rt(Ti,{"node-model":R.nodeModel},{default:B(()=>[he("h5",NH,Ue(R.$t("views.applicationWorkflow.nodeSetting")),1),C(Ie,{shadow:"never",class:"card-never"},{default:B(()=>[C(ze,{onSubmit:$[9]||($[9]=bn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:B(()=>[C(W,{label:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:B(()=>[he("div",kH,[he("div",null,[he("span",null,[St(Ue(Jr(Zt)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),$[10]||($[10]=he("span",{class:"danger"},"*",-1))])]),C(Y,{disabled:!O.value.modelId,type:"primary",link:"",onClick:$[0]||($[0]=Pe=>k(O.value.modelId)),onRefreshForm:j},{default:B(()=>[C(H,null,{default:B(()=>[C(V)]),_:1})]),_:1},8,["disabled"])])]),default:B(()=>[C(Q,{onWheel:g,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":$[1]||($[1]=Pe=>O.value.modelId=Pe),placeholder:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.application.applicationForm.form.roleSettings.label")},{default:B(()=>[C(I,{title:R.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":$[2]||($[2]=Pe=>O.value.system=Pe),style:{height:"100px"},onSubmitDialog:P,placeholder:R.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(W,{label:R.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:R.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:B(()=>[he("div",RH,[he("div",DH,[he("span",null,[St(Ue(R.$t("views.application.applicationForm.form.prompt.label")),1),$[11]||($[11]=he("span",{class:"danger"},"*",-1))])]),C(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:B(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(I,{onWheel:g,title:R.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":$[3]||($[3]=Pe=>O.value.prompt=Pe),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(W,null,{label:B(()=>[he("div",CH,[he("div",null,Ue(R.$t("views.application.applicationForm.form.historyRecord.label")),1),C(ce,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":$[4]||($[4]=Pe=>O.value.dialogue_type=Pe),type:"small",style:{width:"100px"}},{default:B(()=>[C(q,{label:R.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),C(q,{label:R.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[C(ke,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":$[5]||($[5]=Pe=>O.value.dialogueNumber=Pe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),C(W,{label:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),$[12]||($[12]=he("span",{class:"danger"},"*",-1))]),default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:h,nodeModel:R.nodeModel,class:"w-full",placeholder:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.imageList,"onUpdate:modelValue":$[6]||($[6]=Pe=>O.value.imageList=Pe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[8]||($[8]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",jH,[he("div",IH,[he("span",null,[St(Ue(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),$[13]||($[13]=he("span",{class:"danger"},"*",-1))])]),C(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(Oe,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":$[7]||($[7]=Pe=>O.value.isResult=Pe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});let FH=class extends Mi{constructor(t){super(t,LH)}};const $H={type:"image-understand-node",model:Pi,view:FH},BH=Object.freeze(Object.defineProperty({__proto__:null,default:$H},Symbol.toStringTag,{value:"Module"})),UH={class:"title-decoration-1 mb-8"},GH={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},VH={class:"flex-between"},WH={class:"ml-4"},zH={class:"title-decoration-1 mb-8"},HH={key:0,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},XH={class:"flex-between"},YH={key:0,class:"danger"},qH={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},KH={class:"flex-between"},ZH={key:0,class:"danger"},JH=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(!1),r={mcpTool:"",mcp_tools:[],sseUrl:"",toolParams:{},tool_form_field:[],params_nested:""};function s(){if(!h.value.sseUrl){Ba(Zt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}fa.getMcpTools({sseUrl:h.value.sseUrl},o).then(b=>{h.value.mcp_tools=b.data,Wp(Zt("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess"))})}function c(){var w,O,S,P;h.value.sseUrl=h.value.mcp_tools.filter(A=>A.name===h.value.mcpTool)[0].server;const b=h.value.mcp_tools.filter(A=>A.name===h.value.mcpTool)[0].args_schema;h.value.tool_form_field=[];for(const A in b.properties){let k=b.properties[A].properties;if(k){h.value.params_nested=A;for(const j in k){let R="TextInput";k[j].type==="string"?R="TextInput":k[j].type==="number"?R="NumberInput":k[j].type==="boolean"?R="SwitchInput":(k[j].type==="array"||k[j].type==="object")&&(R="JsonInput"),console.log(k[j]),h.value.tool_form_field.push({field:j,label:{input_type:"TooltipLabel",label:j,attrs:{tooltip:k[j].description},props_info:{}},input_type:R,source:"referencing",required:((w=b.properties[A].required)==null?void 0:w.indexOf(j))!==-1,props_info:{rules:[{required:((O=b.properties[A].required)==null?void 0:O.indexOf(j))!==-1,message:Zt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{h.value.params_nested="";let j="TextInput";b.properties[A].type==="string"?j="TextInput":b.properties[A].type==="number"?j="NumberInput":b.properties[A].type==="boolean"?j="SwitchInput":(b.properties[A].type==="array"||b.properties[A].type==="object")&&(j="JsonInput"),console.log(b.properties[A]),h.value.tool_form_field.push({field:A,label:{input_type:"TooltipLabel",label:A,attrs:{tooltip:b.properties[A].description},props_info:{}},input_type:j,source:"referencing",required:((S=b.required)==null?void 0:S.indexOf(A))!==-1,props_info:{rules:[{required:((P=b.required)==null?void 0:P.indexOf(A))!==-1,message:Zt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}h.value.params_nested?h.value.toolParams={[h.value.params_nested]:{}}:h.value.toolParams={}}const h=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:b=>{Ye.set(t.nodeModel.properties,"nodeData",b)}}),v=mt(),g=async()=>{if(n.value){const b=h.value.tool_form_field.filter(w=>w.required).map(w=>w.label.label);if(b.length>0){for(const w of b)if(h.value.params_nested){if(!h.value.toolParams[h.value.params_nested][w])return Promise.reject({node:t.nodeModel,errMessage:w+Zt("dynamicsForm.tip.requiredMessage")})}else if(!h.value.toolParams[w])return Promise.reject({node:t.nodeModel,errMessage:w+Zt("dynamicsForm.tip.requiredMessage")})}}if(v.value){const b=Ye.cloneDeep(h.value);if(!b.sseUrl)return Promise.reject({node:t.nodeModel,errMessage:Zt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!b.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:Zt("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};return xo(()=>{var b;typeof((b=t.nodeModel.properties.nodeData)==null?void 0:b.is_result)>"u"&&Bd(t.nodeModel)&&Ye.set(t.nodeModel.properties.nodeData,"is_result",!0),Ye.set(t.nodeModel,"validate",g)}),(b,w)=>{const O=re("el-input"),S=re("el-form-item"),P=re("Plus"),A=re("el-icon"),k=re("el-button"),j=re("el-tooltip"),R=re("el-option"),$=re("el-select"),V=re("el-form"),H=re("el-input-number"),Y=re("el-switch"),Q=jd("loading");return qe(),Rt(Ti,{nodeModel:b.nodeModel},{default:B(()=>[he("h5",UH,Ue(b.$t("views.applicationWorkflow.nodeSetting")),1),he("div",GH,[C(V,{onSubmit:w[4]||(w[4]=bn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:v,"hide-required-asterisk":""},{default:B(()=>[C(S,{label:b.$t("views.mcpLib.mcpForm.form.mcpSseUrl.label")},{default:B(()=>[C(O,{modelValue:h.value.sseUrl,"onUpdate:modelValue":w[0]||(w[0]=W=>h.value.sseUrl=W),type:"textarea",placeholder:b.$t("views.mcpLib.mcpForm.form.mcpSseUrl.placeholder"),maxlength:"256","show-word-limit":"",autosize:{minRows:3},onBlur:w[1]||(w[1]=W=>{var I;return h.value.sseUrl=(I=h.value.sseUrl)==null?void 0:I.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(S,null,{label:B(()=>[he("div",VH,[he("span",null,Ue(b.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),C(k,{type:"primary",link:"",onClick:w[2]||(w[2]=W=>s())},{default:B(()=>[C(A,{class:"mr-4"},{default:B(()=>[C(P)]),_:1}),St(" "+Ue(b.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:B(()=>[C($,{modelValue:h.value.mcpTool,"onUpdate:modelValue":w[3]||(w[3]=W=>h.value.mcpTool=W),onChange:c,filterable:""},{default:B(()=>[(qe(!0),Dn(Yo,null,Ci(h.value.mcp_tools,W=>(qe(),Rt(R,{key:W.value,label:W.name,value:W.name,class:"flex align-center"},{default:B(()=>[C(j,{effect:"dark",content:W.description,placement:"top-start","popper-class":"max-w-350"},{default:B(()=>[C(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),he("span",WH,Ue(W.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),he("h5",zH,Ue(b.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),h.value.toolParams[h.value.params_nested]?(qe(),Dn("div",HH,[h.value.mcpTool?Ua((qe(),Rt(V,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:w[6]||(w[6]=bn(()=>{},["prevent"]))},{default:B(()=>[(qe(!0),Dn(Yo,null,Ci(h.value.tool_form_field,W=>(qe(),Rt(S,{key:W.field,required:W.required},{label:B(()=>[he("div",XH,[he("div",null,[C(xS,{label:W.label.label,tooltip:W.label.attrs.tooltip},null,8,["label","tooltip"]),W.required?(qe(),Dn("span",YH,"*")):tr("",!0)]),C($,{teleported:!1,modelValue:W.source,"onUpdate:modelValue":I=>W.source=I,size:"small",style:{width:"85px"},onChange:w[5]||(w[5]=I=>h.value.toolParams[h.value.params_nested]={})},{default:B(()=>[C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:B(()=>[W.source==="custom"&&W.input_type==="TextInput"?(qe(),Rt(O,{key:0,modelValue:h.value.toolParams[h.value.params_nested][W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[h.value.params_nested][W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="NumberInput"?(qe(),Rt(H,{key:1,modelValue:h.value.toolParams[h.value.params_nested][W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[h.value.params_nested][W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="SwitchInput"?(qe(),Rt(Y,{key:2,modelValue:h.value.toolParams[h.value.params_nested][W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[h.value.params_nested][W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="JsonInput"?(qe(),Rt(O,{key:3,modelValue:h.value.toolParams[h.value.params_nested][W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[h.value.params_nested][W.label.label]=I,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):tr("",!0),W.source==="referencing"?(qe(),Rt(ko,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.variable.placeholder"),modelValue:h.value.toolParams[h.value.params_nested][W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[h.value.params_nested][W.label.label]=I},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):tr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Q,o.value]]):tr("",!0)])):(qe(),Dn("div",qH,[h.value.mcpTool?Ua((qe(),Rt(V,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:w[7]||(w[7]=bn(()=>{},["prevent"]))},{default:B(()=>[(qe(!0),Dn(Yo,null,Ci(h.value.tool_form_field,W=>(qe(),Rt(S,{key:W.field,required:W.required},{label:B(()=>[he("div",KH,[he("div",null,[C(xS,{label:W.label.label,tooltip:W.label.attrs.tooltip},null,8,["label","tooltip"]),W.required?(qe(),Dn("span",ZH,"*")):tr("",!0)]),C($,{teleported:!1,modelValue:W.source,"onUpdate:modelValue":I=>W.source=I,size:"small",style:{width:"85px"}},{default:B(()=>[C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:B(()=>[W.source==="custom"&&W.input_type==="TextInput"?(qe(),Rt(O,{key:0,modelValue:h.value.toolParams[W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="NumberInput"?(qe(),Rt(H,{key:1,modelValue:h.value.toolParams[W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="SwitchInput"?(qe(),Rt(Y,{key:2,modelValue:h.value.toolParams[W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="JsonInput"?(qe(),Rt(O,{key:3,modelValue:h.value.toolParams[W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[W.label.label]=I,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):tr("",!0),W.source==="referencing"?(qe(),Rt(ko,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.variable.placeholder"),modelValue:h.value.toolParams[W.label.label],"onUpdate:modelValue":I=>h.value.toolParams[W.label.label]=I},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):tr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Q,o.value]]):tr("",!0)]))]),_:1},8,["nodeModel"])}}});class QH extends Mi{constructor(t){super(t,JH)}}const eX={type:"mcp-node",model:Pi,view:QH},tX=Object.freeze(Object.defineProperty({__proto__:null,default:eX},Symbol.toStringTag,{value:"Module"})),nX={class:"title-decoration-1 mb-8"},rX={class:"flex-between"},oX={class:"flex align-center"},iX={class:"mr-4"},aX={class:"flex align-center"},lX={class:"mr-4"},uX=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=mt(),o=R=>R.ctrlKey===!0?(R.preventDefault(),!0):(R.stopPropagation(),!0),r=R=>{var $;R?($=n.value)==null||$.reset_default(R,h):b({})};function s(R){Ye.set(S.nodeModel.properties.nodeData,"prompt",R)}function c(R){Ye.set(S.nodeModel.properties.nodeData,"system",R)}const{params:{id:h}}=Rl.config.globalProperties.$route,v=`${Zt("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Zt("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={modelId:"",system:Zt("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:v,dialogueNumber:1,isResult:!1};function b(R){Ye.set(S.nodeModel.properties.nodeData,"modelParamsSetting",R)}const w=R=>{var $;R&&(($=n.value)==null||$.open(R,h,O.value.modelParamsSetting))},O=so({get:()=>(S.nodeModel.properties.nodeData||Ye.set(S.nodeModel.properties,"nodeData",g),S.nodeModel.properties.nodeData),set:R=>{Ye.set(S.nodeModel.properties,"nodeData",R)}}),S=e,P=mt(),A=mt(null),k=()=>{var R;return(R=P.value)==null?void 0:R.validate().catch($=>Promise.reject({node:S.nodeModel,errMessage:$}))};function j(){h?fa.getApplicationModel(h).then(R=>{A.value=Ye.groupBy(R==null?void 0:R.data,"provider")}):t.asyncGetModel().then(R=>{A.value=Ye.groupBy(R==null?void 0:R.data,"provider")})}return xo(()=>{var R;j(),typeof((R=S.nodeModel.properties.nodeData)==null?void 0:R.isResult)>"u"&&Bd(S.nodeModel)&&Ye.set(S.nodeModel.properties.nodeData,"isResult",!0),Ye.set(S.nodeModel,"validate",k)}),(R,$)=>{const V=re("Setting"),H=re("el-icon"),Y=re("el-button"),Q=re("ModelSelect"),W=re("el-form-item"),I=re("MdEditorMagnify"),z=re("AppIcon"),K=re("EditPen"),q=re("el-tooltip"),ce=re("el-input-number"),ke=re("el-switch"),Oe=re("el-form"),ze=re("el-card");return qe(),Rt(Ti,{nodeModel:R.nodeModel},{default:B(()=>[he("h5",nX,Ue(R.$t("views.applicationWorkflow.nodeSetting")),1),C(ze,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(Oe,{onSubmit:$[7]||($[7]=bn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:P,"hide-required-asterisk":""},{default:B(()=>[C(W,{label:R.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:R.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:B(()=>[he("div",rX,[he("div",null,[he("span",null,[St(Ue(R.$t("views.application.applicationForm.form.aiModel.label")),1),$[8]||($[8]=he("span",{class:"danger"},"*",-1))])]),C(Y,{type:"primary",link:"",disabled:!O.value.modelId,onClick:$[0]||($[0]=Ie=>w(O.value.modelId)),onRefreshForm:b},{default:B(()=>[C(H,null,{default:B(()=>[C(V)]),_:1})]),_:1},8,["disabled"])])]),default:B(()=>[C(Q,{onChange:r,onWheel:o,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":$[1]||($[1]=Ie=>O.value.modelId=Ie),placeholder:R.$t("views.application.applicationForm.form.aiModel.placeholder"),options:A.value,onSubmitModel:j,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.application.applicationForm.form.roleSettings.label")},{default:B(()=>[C(I,{title:R.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":$[2]||($[2]=Ie=>O.value.system=Ie),style:{height:"100px"},onSubmitDialog:c,placeholder:R.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(W,{label:R.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:R.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:B(()=>[he("div",oX,[he("div",iX,[he("span",null,[St(Ue(R.$t("views.application.applicationForm.form.prompt.label")),1),$[9]||($[9]=he("span",{class:"danger"},"*",-1))])]),C(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:B(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"}),C(H,null,{default:B(()=>[C(K)]),_:1})]),_:1})])]),default:B(()=>[C(I,{onWheel:o,title:R.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":$[3]||($[3]=Ie=>O.value.prompt=Ie),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.application.applicationForm.form.historyRecord.label")},{default:B(()=>[C(ce,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":$[4]||($[4]=Ie=>O.value.dialogueNumber=Ie),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),C(W,{label:R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[6]||($[6]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",aX,[he("div",lX,[he("span",null,[St(Ue(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),$[10]||($[10]=he("span",{class:"danger"},"*",-1))])]),C(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(ke,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":$[5]||($[5]=Ie=>O.value.isResult=Ie)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:b},null,512)]),_:1},8,["nodeModel"])}}});class sX extends Mi{constructor(t){super(t,uX)}}const cX={type:"question-node",model:Pi,view:sX},fX=Object.freeze(Object.defineProperty({__proto__:null,default:cX},Symbol.toStringTag,{value:"Module"})),dX={class:"flex-between"},pX={class:"flex align-center"},hX={class:"mr-4"},vX=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={replyType:"content",content:"",fields:[],isResult:!1},r=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{Ye.set(t.nodeModel.properties,"nodeData",g)}});function s(g){Ye.set(t.nodeModel.properties.nodeData,"content",g)}const c=mt(),h=mt(),v=()=>{var g;return Promise.all([h.value?h.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return xo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Bd(t.nodeModel)&&Ye.set(t.nodeModel.properties.nodeData,"isResult",!0),Ye.set(t.nodeModel,"validate",v)}),(g,b)=>{const w=re("el-option"),O=re("el-select"),S=re("el-form-item"),P=re("AppIcon"),A=re("el-tooltip"),k=re("el-switch"),j=re("el-form"),R=re("el-card");return qe(),Rt(Ti,{nodeModel:g.nodeModel},{default:B(()=>[C(R,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(j,{onSubmit:b[5]||(b[5]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:B(()=>[C(S,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:B(()=>[he("div",dX,[he("span",null,Ue(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),C(O,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=$=>r.value.replyType=$),size:"small",style:{width:"85px"}},{default:B(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:B(()=>[r.value.replyType==="content"?(qe(),Rt(Cd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=$=>r.value.content=$),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(qe(),Rt(ko,{key:1,ref_key:"nodeCascaderRef",ref:h,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=$=>r.value.fields=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",pX,[he("div",hX,[he("span",null,[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[6]||(b[6]=he("span",{class:"danger"},"*",-1))])]),C(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(k,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=$=>r.value.isResult=$)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class yX extends Mi{constructor(t){super(t,vX)}}const mX={type:"reply-node",model:Pi,view:yX},gX=Object.freeze(Object.defineProperty({__proto__:null,default:mX},Symbol.toStringTag,{value:"Module"})),bX={class:"p-16"},_X={class:"flex align-center"},wX={class:"mr-4"},EX={class:"dialog-footer p-16"},OX=kr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=mt(!1),h=mt(!1);$M(c,b=>{b||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const v=b=>{s.value={...s.value,...Ye.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((w,O)=>{w&&(o("refresh",Ye.cloneDeep(s.value)),c.value=!1)})};return t({open:v}),(b,w)=>{const O=re("AppIcon"),S=re("el-tooltip"),P=re("el-input-number"),A=re("el-form-item"),k=re("el-col"),j=re("el-row"),R=re("el-slider"),$=re("el-form"),V=re("el-scrollbar"),H=re("el-button"),Y=re("el-dialog");return qe(),Rt(Y,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":w[5]||(w[5]=Q=>c.value=Q),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:B(()=>[he("span",EX,[C(H,{onClick:w[3]||(w[3]=bn(Q=>c.value=!1,["prevent"]))},{default:B(()=>[St(Ue(b.$t("common.cancel")),1)]),_:1}),C(H,{type:"primary",onClick:w[4]||(w[4]=Q=>g()),loading:h.value},{default:B(()=>[St(Ue(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:B(()=>[he("div",null,[C(V,{always:""},{default:B(()=>[he("div",bX,[C($,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:B(()=>[C(j,{gutter:20},{default:B(()=>[C(k,{span:12},{default:B(()=>[C(A,null,{label:B(()=>[he("div",_X,[he("span",wX,"Score "+Ue(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),C(S,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:B(()=>[C(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:B(()=>[C(P,{modelValue:s.value.similarity,"onUpdate:modelValue":w[0]||(w[0]=Q=>s.value.similarity=Q),min:0,max:s.value.searchMode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),C(k,{span:12},{default:B(()=>[C(A,{label:b.$t("views.application.applicationForm.dialog.topReferences")},{default:B(()=>[C(P,{modelValue:s.value.topN,"onUpdate:modelValue":w[1]||(w[1]=Q=>s.value.topN=Q),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C(A,{label:b.$t("views.application.applicationForm.dialog.maxCharacters")},{default:B(()=>[C(R,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":w[2]||(w[2]=Q=>s.value.maxParagraphCharNumber=Q),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}});const xX={class:"flex-between"},SX={class:"flex-between"},AX={class:"w-full"},TX={class:"flex-between"},MX={class:"flex-between"},PX=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=e,o=mt(),{params:{id:r}}=Rl.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3}},c=mt(null),h=()=>{var j;(j=o.value)==null||j.open(b.value.reranker_setting)},v=j=>{const R=Ye.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);R.splice(j,1),Ye.set(n.nodeModel.properties.nodeData,"reranker_reference_list",R)},g=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),b=so({get:()=>(n.nodeModel.properties.nodeData||Ye.set(n.nodeModel.properties,"nodeData",s),n.nodeModel.properties.nodeData),set:j=>{Ye.set(n.nodeModel.properties,"nodeData",j)}});function w(j){Ye.set(n.nodeModel.properties.nodeData,"reranker_setting",j)}function O(){r?fa.getApplicationRerankerModel(r).then(j=>{c.value=Ye.groupBy(j==null?void 0:j.data,"provider")}):t.asyncGetModel({modelType:"RERANKER"}).then(j=>{c.value=Ye.groupBy(j==null?void 0:j.data,"provider")})}const S=()=>{const j=Ye.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);j.push([]),Ye.set(n.nodeModel.properties.nodeData,"reranker_reference_list",j)},P=mt(),A=mt(),k=()=>{var j;return Promise.all([A.value?A.value.validate():Promise.resolve(""),(j=P.value)==null?void 0:j.validate()]).catch(R=>Promise.reject({node:n.nodeModel,errMessage:R}))};return xo(()=>{O(),Ye.set(n.nodeModel,"validate",k)}),(j,R)=>{const $=re("Plus"),V=re("el-icon"),H=re("el-button"),Y=re("el-form-item"),Q=re("el-col"),W=re("Delete"),I=re("el-row"),z=re("Setting"),K=re("ModelSelect"),q=re("el-form"),ce=re("el-card");return qe(),Rt(Ti,{nodeModel:j.nodeModel},{default:B(()=>[C(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(q,{onSubmit:R[2]||(R[2]=bn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:P,"hide-required-asterisk":""},{default:B(()=>[C(Y,{label:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:B(()=>[he("div",xX,[he("span",null,[St(Ue(j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),R[3]||(R[3]=he("span",{class:"danger"},"*",-1))]),C(H,{onClick:S,link:"",type:"primary"},{default:B(()=>[C(V,{class:"mr-4"},{default:B(()=>[C($)]),_:1})]),_:1})])]),default:B(()=>[(qe(!0),Dn(Yo,null,Ci(b.value.reranker_reference_list,(ke,Oe)=>(qe(),Rt(I,{gutter:8,style:{"margin-bottom":"8px"},key:Oe},{default:B(()=>[C(Q,{span:22},{default:B(()=>[C(Y,{prop:"reranker_reference_list."+Oe,rules:{type:"array",required:!0,message:j.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:B(()=>[(qe(),Rt(ko,{key:Oe,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:b.value.reranker_reference_list[Oe],"onUpdate:modelValue":ze=>b.value.reranker_reference_list[Oe]=ze},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),C(Q,{span:1},{default:B(()=>[C(H,{link:"",type:"info",class:"mt-4",onClick:ze=>v(Oe)},{default:B(()=>[C(V,null,{default:B(()=>[C(W)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),C(Y,{label:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:B(()=>[he("div",SX,[he("span",null,Ue(j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),C(H,{type:"primary",link:"",onClick:h},{default:B(()=>[C(V,null,{default:B(()=>[C(z)]),_:1})]),_:1})])]),default:B(()=>[he("div",AX,[C(I,null,{default:B(()=>[C(Q,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(" Score "+Ue(j.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),C(Q,{span:12,class:"lighter"},{default:B(()=>{var ke;return[St(Ue((ke=b.value.reranker_setting.similarity)==null?void 0:ke.toFixed(3)),1)]}),_:1}),C(Q,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(Ue(j.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),C(Q,{span:12,class:"lighter"},{default:B(()=>[St(Ue(b.value.reranker_setting.topN),1)]),_:1}),C(Q,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(Ue(j.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),C(Q,{span:12,class:"lighter"},{default:B(()=>[St(Ue(b.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),C(Y,{label:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:B(()=>[he("div",TX,[he("span",null,[St(Ue(j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),R[4]||(R[4]=he("span",{class:"danger"},"*",-1))])])]),default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:A,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:b.value.questionReferenceAddress,"onUpdate:modelValue":R[0]||(R[0]=ke=>b.value.questionReferenceAddress=ke)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(Y,{label:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.label"),prop:"reranker_model_id",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.placeholder"),trigger:"change"}},{label:B(()=>[he("div",MX,[he("span",null,[St(Ue(j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.label")),1),R[5]||(R[5]=he("span",{class:"danger"},"*",-1))])])]),default:B(()=>[C(K,{onWheel:g,teleported:!1,modelValue:b.value.reranker_model_id,"onUpdate:modelValue":R[1]||(R[1]=ke=>b.value.reranker_model_id=ke),placeholder:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.placeholder"),options:c.value,onSubmitModel:O,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),C(OX,{ref_key:"ParamSettingDialogRef",ref:o,onRefresh:w},null,512)]),_:1},8,["nodeModel"])}}});const NX=Yy(PX,[["__scopeId","data-v-8440f36a"]]);class kX extends Mi{constructor(t){super(t,NX)}}const RX={type:"reranker-node",model:Pi,view:kX},DX=Object.freeze(Object.defineProperty({__proto__:null,default:RX},Symbol.toStringTag,{value:"Module"}));var lN=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(lN||{});const CX={class:"title-decoration-1 mb-8"},jX={class:"flex-between"},IX={class:"w-full"},LX={class:"flex align-center",style:{"line-height":"20px"}},FX=["title"],$X={class:"flex-between"},BX={class:"w-full"},UX=kr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:o}=hc(),{params:{id:r}}=Rl.config.globalProperties.$route,s=e,c=mt(),h={datasetIdList:[],datasetSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[]},v=so({get:()=>(s.nodeModel.properties.nodeData||Ye.set(s.nodeModel.properties,"nodeData",h),s.nodeModel.properties.nodeData),set:Y=>{Ye.set(s.nodeModel.properties,"nodeData",Y)}}),g=mt(),b=mt(),w=mt(),O=mt([]),S=mt(!1);function P(Y){Ye.set(s.nodeModel.properties.nodeData,"datasetSetting",Y.datasetSetting)}const A=()=>{var Y;(Y=b.value)==null||Y.open(v.value,"WORK_FLOW")};function k(Y){const Q=s.nodeModel.properties.nodeData.datasetIdList.filter(W=>W!==Y);Ye.set(s.nodeModel.properties.nodeData,"datasetIdList",Q)}function j(Y){Ye.set(s.nodeModel.properties.nodeData,"datasetIdList",Y)}function R(){w.value&&w.value.open(v.value.datasetIdList)}function $(){r?n.asyncGetApplicationDataset(r,S).then(Y=>{O.value=Y.data}):t.asyncGetAllDataset(S).then(Y=>{var Q;O.value=(Q=Y.data)==null?void 0:Q.filter(W=>{var I;return W.userId===((I=o.userInfo)==null?void 0:I.id)})})}function V(){$()}const H=()=>{var Y;return Promise.all([c.value.validate(),(Y=g.value)==null?void 0:Y.validate()]).catch(Q=>Promise.reject({node:s.nodeModel,errMessage:Q}))};return xo(()=>{$(),Ye.set(s.nodeModel,"validate",H)}),(Y,Q)=>{const W=re("Plus"),I=re("el-icon"),z=re("el-button"),K=re("el-text"),q=re("Close"),ce=re("el-form-item"),ke=re("Setting"),Oe=re("el-col"),ze=re("el-row"),Ie=re("el-form"),Pe=re("el-card");return qe(),Rt(Ti,{nodeModel:Y.nodeModel},{default:B(()=>[he("h5",CX,Ue(Y.$t("views.applicationWorkflow.nodeSetting")),1),C(Pe,{shadow:"never",class:"card-never"},{default:B(()=>[C(Ie,{onSubmit:Q[1]||(Q[1]=bn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:B(()=>[C(ce,{label:Y.$t("views.log.selectDataset")},{label:B(()=>[he("div",jX,[he("span",null,Ue(Y.$t("views.log.selectDataset")),1),C(z,{type:"primary",link:"",onClick:R},{default:B(()=>[C(I,null,{default:B(()=>[C(W)]),_:1})]),_:1})])]),default:B(()=>{var le;return[he("div",IX,[((le=v.value.datasetIdList)==null?void 0:le.length)===0?(qe(),Rt(K,{key:0,type:"info"},{default:B(()=>[St(Ue(Y.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(qe(!0),Dn(Yo,{key:1},Ci(v.value.datasetIdList,(ye,Me)=>{var We,je,it;return qe(),Dn("div",{key:Me,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[he("div",LX,[((We=Jr(h1)(O.value,ye,"id"))==null?void 0:We.type)==="1"?(qe(),Rt(SS,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:B(()=>Q[2]||(Q[2]=[he("img",{src:HI,style:{width:"58%"},alt:""},null,-1)])),_:1})):(qe(),Rt(SS,{key:1,class:"mr-8 avatar-blue",shape:"square",size:20},{default:B(()=>Q[3]||(Q[3]=[he("img",{src:XI,style:{width:"58%"},alt:""},null,-1)])),_:1})),he("div",{class:"ellipsis",title:(je=Jr(h1)(O.value,ye,"id"))==null?void 0:je.name},Ue((it=Jr(h1)(O.value,ye,"id"))==null?void 0:it.name),9,FX)]),C(z,{text:"",onClick:bt=>k(ye)},{default:B(()=>[C(I,null,{default:B(()=>[C(q)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),C(ce,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:B(()=>[he("div",$X,[he("span",null,Ue(Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),C(z,{type:"primary",link:"",onClick:A},{default:B(()=>[C(I,null,{default:B(()=>[C(ke)]),_:1})]),_:1})])]),default:B(()=>[he("div",BX,[C(ze,null,{default:B(()=>[C(Oe,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(Ue(Y.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:B(()=>[St(Ue(Y.$t(Jr(lN)[v.value.datasetSetting.searchMode])),1)]),_:1}),C(Oe,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(Ue(Y.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:B(()=>{var le;return[St(Ue((le=v.value.datasetSetting.similarity)==null?void 0:le.toFixed(3)),1)]}),_:1}),C(Oe,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(Ue(Y.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:B(()=>[St(Ue(v.value.datasetSetting.topN),1)]),_:1}),C(Oe,{span:12,class:"color-secondary lighter"},{default:B(()=>[St(Ue(Y.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:B(()=>[St(Ue(v.value.datasetSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),C(ce,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:c,nodeModel:Y.nodeModel,class:"w-full",placeholder:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:v.value.questionReferenceAddress,"onUpdate:modelValue":Q[0]||(Q[0]=le=>v.value.questionReferenceAddress=le)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),C(QI,{ref_key:"ParamSettingDialogRef",ref:b,onRefresh:P},null,512),C(eL,{ref_key:"AddDatasetDialogRef",ref:w,onAddData:j,data:O.value,onRefresh:V,loading:S.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class GX extends Mi{constructor(t){super(t,UX)}}const VX={type:"search-dataset-node",model:Pi,view:GX},WX=Object.freeze(Object.defineProperty({__proto__:null,default:VX},Symbol.toStringTag,{value:"Module"})),zX={class:"title-decoration-1 mb-8"},HX={class:"flex-between w-full"},XX={class:"flex-between w-full"},YX={class:"flex align-center"},qX={class:"mr-4"},KX=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=mt(null),s=mt(),c=mt(),h=()=>{var O;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(O=s.value)==null?void 0:O.validate()]).catch(S=>Promise.reject({node:o.nodeModel,errMessage:S}))},v=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),g={sttModelId:"",isResult:!0,audioList:[]},b=so({get:()=>(o.nodeModel.properties.nodeData||Ye.set(o.nodeModel.properties,"nodeData",g),o.nodeModel.properties.nodeData),set:O=>{Ye.set(o.nodeModel.properties,"nodeData",O)}});function w(){n?fa.getApplicationSTTModel(n).then(O=>{r.value=Ye.groupBy(O==null?void 0:O.data,"provider")}):t.asyncGetModel().then(O=>{r.value=Ye.groupBy(O==null?void 0:O.data,"provider")})}return xo(()=>{w(),Ye.set(o.nodeModel,"validate",h)}),(O,S)=>{const P=re("ModelSelect"),A=re("el-form-item"),k=re("AppIcon"),j=re("el-tooltip"),R=re("el-switch"),$=re("el-form"),V=re("el-card");return qe(),Rt(Ti,{"node-model":O.nodeModel},{default:B(()=>[he("h5",zX,Ue(O.$t("views.applicationWorkflow.nodeSetting")),1),C(V,{shadow:"never",class:"card-never"},{default:B(()=>[C($,{onSubmit:S[4]||(S[4]=bn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:B(()=>[C(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.sttModel.label"),prop:"sttModelId",rules:{required:!0,message:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:B(()=>[he("div",HX,[he("div",null,[he("span",null,[St(Ue(O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),S[5]||(S[5]=he("span",{class:"danger"},"*",-1))])])])]),default:B(()=>[C(P,{onWheel:v,teleported:!1,modelValue:b.value.sttModelId,"onUpdate:modelValue":S[0]||(S[0]=H=>b.value.sttModelId=H),placeholder:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:B(()=>[he("div",XX,[he("div",null,[he("span",null,[St(Ue(O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),S[6]||(S[6]=he("span",{class:"danger"},"*",-1))])])])]),default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:c,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:b.value.audioList,"onUpdate:modelValue":S[1]||(S[1]=H=>b.value.audioList=H)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",YX,[he("div",qX,[he("span",null,[St(Ue(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),S[7]||(S[7]=he("span",{class:"danger"},"*",-1))])]),C(j,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(k,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(R,{size:"small",modelValue:b.value.isResult,"onUpdate:modelValue":S[2]||(S[2]=H=>b.value.isResult=H)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class ZX extends Mi{constructor(t){super(t,KX)}}const JX={type:"speech-to-text-node",model:Pi,view:ZX},QX=Object.freeze(Object.defineProperty({__proto__:null,default:JX},Symbol.toStringTag,{value:"Module"})),eY={class:"title-decoration-1 mb-8"},tY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(!1),o=[{label:Zt("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Zt("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:Zt("chat.chatId"),value:"chatId"}],r=()=>{const h=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Ye.cloneDeep(g.properties.user_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),v=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Ye.cloneDeep(g.properties.api_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...h,...v]},s=()=>{const h=r();Ye.set(t.nodeModel.properties.config,"globalFields",[...o,...h])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let h=Ye.cloneDeep(t.nodeModel.properties.config.fields);const v=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.file_upload_enable).map(b=>Ye.cloneDeep(b.properties.nodeData.file_upload_setting)).filter(b=>b);if(h=h.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"),v.length===0){Ye.set(t.nodeModel.properties.config,"fields",h);return}let g=[];v[0].document&&g.push({label:Zt("common.fileUpload.document"),value:"document"}),v[0].image&&g.push({label:Zt("common.fileUpload.image"),value:"image"}),v[0].audio&&g.push({label:Zt("common.fileUpload.audio"),value:"audio"}),v[0].video&&g.push({label:Zt("common.fileUpload.video"),value:"video"}),Ye.set(t.nodeModel.properties.config,"fields",[...h,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),xo(()=>{s(),c()}),(h,v)=>{const g=re("AppIcon"),b=re("el-button"),w=re("el-tooltip");return qe(),Rt(Ti,{nodeModel:h.nodeModel},{default:B(()=>[he("h5",eY,Ue(h.$t("views.applicationWorkflow.variable.global")),1),(qe(!0),Dn(Yo,null,Ci(h.nodeModel.properties.config.globalFields,(O,S)=>(qe(),Dn("div",{key:S,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:v[0]||(v[0]=P=>n.value=!0),onMouseleave:v[1]||(v[1]=P=>n.value=!1)},[he("span",null,Ue(O.label)+" "+Ue("{"+O.value+"}"),1),n.value===!0?(qe(),Rt(w,{key:0,effect:"dark",content:h.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:B(()=>[C(b,{link:"",onClick:P=>Jr(IM)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:B(()=>[C(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):tr("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class nY extends Mi{constructor(t){super(t,tY)}}const rY={type:"start-node",model:Pi,view:nY},oY=Object.freeze(Object.defineProperty({__proto__:null,default:rY},Symbol.toStringTag,{value:"Module"})),iY={class:"title-decoration-1 mb-8"},aY={class:"flex-between w-full"},lY={class:"flex-between w-full"},uY={class:"flex align-center"},sY={class:"mr-4"},cY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=mt(),{model:n}=hc(),{params:{id:o}}=Rl.config.globalProperties.$route,r=e,s=mt(null),c=mt(),h=mt(),v=()=>{var A;return Promise.all([h.value?h.value.validate():Promise.resolve(""),(A=c.value)==null?void 0:A.validate()]).catch(k=>Promise.reject({node:r.nodeModel,errMessage:k}))},g=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),b={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},w=so({get:()=>(r.nodeModel.properties.nodeData||Ye.set(r.nodeModel.properties,"nodeData",b),r.nodeModel.properties.nodeData),set:A=>{Ye.set(r.nodeModel.properties,"nodeData",A)}});function O(){o?fa.getApplicationTTSModel(o).then(A=>{s.value=Ye.groupBy(A==null?void 0:A.data,"provider")}):n.asyncGetModel().then(A=>{s.value=Ye.groupBy(A==null?void 0:A.data,"provider")})}const S=()=>{var k;const A=w.value.ttsModelId;if(!A){Wp(Zt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(k=t.value)==null||k.open(A,o,w.value.modelParamsSetting)},P=A=>{w.value.modelParamsSetting=A};return xo(()=>{O(),Ye.set(r.nodeModel,"validate",v)}),(A,k)=>{const j=re("Setting"),R=re("el-icon"),$=re("el-button"),V=re("ModelSelect"),H=re("el-form-item"),Y=re("AppIcon"),Q=re("el-tooltip"),W=re("el-switch"),I=re("el-form"),z=re("el-card");return qe(),Rt(Ti,{"node-model":A.nodeModel},{default:B(()=>[he("h5",iY,Ue(A.$t("views.applicationWorkflow.nodeSetting")),1),C(z,{shadow:"never",class:"card-never"},{default:B(()=>[C(I,{onSubmit:k[4]||(k[4]=bn(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:B(()=>[C(H,{label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_Model.label"),prop:"ttsModelId",rules:{required:!0,message:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:B(()=>[he("div",aY,[he("div",null,[he("span",null,[St(Ue(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),k[5]||(k[5]=he("span",{class:"danger"},"*",-1))])]),C($,{type:"primary",link:"",onClick:S,disabled:!w.value.ttsModelId,class:"mr-4"},{default:B(()=>[C(R,null,{default:B(()=>[C(j)]),_:1})]),_:1},8,["disabled"])])]),default:B(()=>[C(V,{onWheel:g,teleported:!1,modelValue:w.value.ttsModelId,"onUpdate:modelValue":k[0]||(k[0]=K=>w.value.ttsModelId=K),placeholder:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(H,{prop:"content_list",label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:B(()=>[he("div",lY,[he("div",null,[he("span",null,[St(Ue(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),k[6]||(k[6]=he("span",{class:"danger"},"*",-1))])])])]),default:B(()=>[C(ko,{ref_key:"nodeCascaderRef",ref:h,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:w.value.content_list,"onUpdate:modelValue":k[1]||(k[1]=K=>w.value.content_list=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(H,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:k[3]||(k[3]=bn(()=>{},["prevent"]))},{label:B(()=>[he("div",uY,[he("div",sY,[he("span",null,[St(Ue(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),k[7]||(k[7]=he("span",{class:"danger"},"*",-1))])]),C(Q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:B(()=>[St(Ue(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:B(()=>[C(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:B(()=>[C(W,{size:"small",modelValue:w.value.isResult,"onUpdate:modelValue":k[2]||(k[2]=K=>w.value.isResult=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:P},null,512)]),_:1},8,["node-model"])}}});class fY extends Mi{constructor(t){super(t,cY)}}const dY={type:"text-to-speech-node",model:Pi,view:fY},pY=Object.freeze(Object.defineProperty({__proto__:null,default:dY},Symbol.toStringTag,{value:"Module"})),hY={class:"title-decoration-1 mb-8"},vY={class:"flex-between lighter"},yY={key:0,class:"mt-8"},mY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:Of(),type:"选项 1",option:""}]},o=(b,w,O)=>{const P=Ye.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(A=>A.id===w.id?{...A,height:b.height,index:O}:A);Ye.set(t.nodeModel.properties,"branchConditionList",P),v(t.nodeModel.properties.nodeData.branch,!0)},r=so({get:()=>(t.nodeModel.properties.nodeData||(Ye.set(t.nodeModel.properties,"nodeData",n),v(n.branch,!0)),t.nodeModel.properties.nodeData),set:b=>{Ye.set(t.nodeModel.properties,"nodeData",b)}}),s=mt();mt();const c=()=>{var w;const b=[(w=s.value)==null?void 0:w.validate()];return Promise.all(b).catch(O=>Promise.reject({node:t.nodeModel,errMessage:O}))};Rl.config.globalProperties.$route;function h(){const b=Ye.cloneDeep(t.nodeModel.properties.nodeData.branch),w={type:"选项 "+(b.length+1),id:Of(),option:"选项 "+(b.length+1)};b.splice(b.length,0,w),v(b,!0),Ye.set(t.nodeModel.properties.nodeData,"branch",b)}function v(b,w){const O=Ye.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),S=b.map((P,A)=>{const k=O.find(j=>j.id===P.id);if(k)return{index:A,height:k.height,id:P.id};if(w)return{index:A,height:100,id:P.id}}).filter(P=>P);Ye.set(t.nodeModel.properties,"branchConditionList",S),t.nodeModel.refreshBranch()}function g(b){const w=Ye.cloneDeep(t.nodeModel.properties.nodeData.branch);if(w[b].conditions.length===0){const S=w.splice(b,1).map(P=>t.nodeModel.id+"_"+P.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(P=>S.includes(P.sourceAnchorId)).map(P=>P.id)),v(w,!1),w.forEach((P,A)=>{P.type="选项 "+(A+1)})}Ye.set(t.nodeModel.properties.nodeData,"branch",w)}return xo(()=>{Ye.set(t.nodeModel,"validate",c)}),(b,w)=>{const O=re("el-form-item"),S=re("el-input"),P=re("el-col"),A=re("Delete"),k=re("el-icon"),j=re("el-button"),R=re("el-row"),$=re("el-card"),V=re("Plus"),H=re("el-form"),Y=jd("resize");return qe(),Rt(Ti,{nodeModel:b.nodeModel},{default:B(()=>[he("h5",hY,Ue(b.$t("views.applicationWorkflow.nodeSetting")),1),C($,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(H,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:s,onSubmit:w[1]||(w[1]=bn(()=>{},["prevent"]))},{default:B(()=>[C(O,{label:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:B(()=>[C(Cd,{title:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":w[0]||(w[0]=Q=>r.value.labelName=Q),style:{height:"100px"},placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(qe(!0),Dn(Yo,null,Ci(r.value.branch,(Q,W)=>Ua((qe(),Rt($,{key:Q.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:B(()=>[he("div",vY,Ue(Q.type),1),W!==r.value.branch.length?(qe(),Dn("div",yY,[C(R,{gutter:8},{default:B(()=>[C(P,{span:23},{default:B(()=>[C(O,{prop:"branch."+W+".option",rules:{required:!0,message:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:B(()=>[C(S,{modelValue:Q.option,"onUpdate:modelValue":I=>Q.option=I,placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),C(P,{span:1},{default:B(()=>[C(j,{disabled:W===0,link:"",type:"info",class:"mt-4",onClick:I=>g(W)},{default:B(()=>[C(k,null,{default:B(()=>[C(A)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):tr("",!0)]),_:2},1024)),[[Y,I=>o(I,Q,W)]])),128)),C(j,{link:"",type:"primary",onClick:h},{default:B(()=>[C(k,{class:"mr-4"},{default:B(()=>[C(V)]),_:1}),St(" "+Ue(b.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class gY extends Mi{constructor(t){super(t,mY)}}const bY=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class _Y extends Pi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const h=this.properties.showNode===void 0?!0:this.properties.showNode,v=[];if(v.push({x:n-r/2+10,y:h?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=bY(c,g);v.push({x:n+r/2-10,y:h?o-s/2+275+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return v}}const wY={type:"user-select-node",model:_Y,view:gY},EY=Object.freeze(Object.defineProperty({__proto__:null,default:wY},Symbol.toStringTag,{value:"Module"})),OY={class:"flex-between"},xY={class:"flex-between mb-8"},SY={class:"lighter"},AY={key:0,class:"flex w-full"},TY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r={variable_list:[{id:Of(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=so({get:()=>(t.nodeModel.properties.nodeData||Ye.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:S=>{Ye.set(t.nodeModel.properties,"nodeData",S)}}),c=mt(),h=mt(),v=mt(),g=async()=>{var P;let S=[(P=c.value)==null?void 0:P.validate(),...h.value.map(A=>A.validate())];return v.value&&(S=[...S,...h.value.map(A=>A.validate())]),Promise.all(S).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function b(){const S=Ye.cloneDeep(t.nodeModel.properties.nodeData.variable_list),P={id:Of(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};S.push(P),Ye.set(t.nodeModel.properties.nodeData,"variable_list",S)}function w(S){const P=Ye.cloneDeep(t.nodeModel.properties.nodeData.variable_list);P.splice(S,1),Ye.set(t.nodeModel.properties.nodeData,"variable_list",P)}function O(S){t.nodeModel.graphModel.nodes.map(P=>{P.id==="start-node"&&P.properties.config.globalFields.forEach(A=>{A.value===S.fields[1]&&(S.name=A.label)})})}return xo(()=>{var S;typeof((S=t.nodeModel.properties.nodeData)==null?void 0:S.isResult)>"u"&&Bd(t.nodeModel)&&Ye.set(t.nodeModel.properties.nodeData,"isResult",!0),Ye.set(t.nodeModel,"validate",g)}),(S,P)=>{const A=re("Delete"),k=re("el-icon"),j=re("el-button"),R=re("el-form-item"),$=re("el-option"),V=re("el-select"),H=re("el-input"),Y=re("el-input-number"),Q=re("CodemirrorEditor"),W=re("el-card"),I=re("Plus"),z=re("el-form");return qe(),Rt(Ti,{nodeModel:S.nodeModel},{default:B(()=>[C(z,{onSubmit:P[0]||(P[0]=bn(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:B(()=>[(qe(!0),Dn(Yo,null,Ci(s.value.variable_list,(K,q)=>(qe(),Rt(W,{key:K.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:B(()=>[C(R,{label:S.$t("views.applicationWorkflow.variable.label")},{label:B(()=>[he("div",OY,[he("div",null,[St(Ue(S.$t("views.applicationWorkflow.variable.label"))+" ",1),P[1]||(P[1]=he("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(qe(),Rt(j,{key:0,text:"",onClick:ce=>w(q)},{default:B(()=>[C(k,null,{default:B(()=>[C(A)]),_:1})]),_:2},1032,["onClick"])):tr("",!0)])]),default:B(()=>[C(ko,{ref_for:!0,ref_key:"nodeCascaderRef",ref:h,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.fields,"onUpdate:modelValue":ce=>K.fields=ce,global:!0,onChange:ce=>O(K)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),he("div",xY,[he("span",SY,[St(Ue(S.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),P[2]||(P[2]=he("span",{class:"danger"},"*",-1))]),C(V,{teleported:!1,modelValue:K.source,"onUpdate:modelValue":ce=>K.source=ce,size:"small",style:{width:"85px"}},{default:B(()=>[C($,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C($,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),K.source==="custom"?(qe(),Dn("div",AY,[C(V,{modelValue:K.type,"onUpdate:modelValue":ce=>K.type=ce,style:{"max-width":"85px"},class:"mr-8",onChange:ce=>s.value.variable_list[q].value=null},{default:B(()=>[(qe(),Dn(Yo,null,Ci(n,ce=>C($,{key:ce,label:ce,value:ce},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),K.type==="string"?(qe(),Rt(R,{key:0,prop:"variable_list."+q+".value",rules:{message:Jr(Zt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:B(()=>[C(H,{modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce,placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):K.type==="num"?(qe(),Rt(R,{key:1,prop:"variable_list."+q+".value",rules:{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:B(()=>[C(Y,{modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):K.type==="json"?(qe(),Rt(R,{key:2,class:"w-full",prop:"variable_list."+q+".value",rules:[{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(ce,ke,Oe)=>{try{JSON.parse(ke),Oe()}catch{Oe(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:B(()=>[C(Q,{title:"JSON",modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce,style:{height:"100px",width:"155px"},onSubmitDialog:ce=>s.value.variable_list[q].value=ce},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):tr("",!0)])):(qe(),Rt(R,{key:1},{default:B(()=>[C(ko,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.reference,"onUpdate:modelValue":ce=>K.reference=ce},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),C(j,{link:"",type:"primary",onClick:b},{default:B(()=>[C(k,{class:"mr-4"},{default:B(()=>[C(I)]),_:1}),St(" "+Ue(S.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class MY extends Mi{constructor(t){super(t,TY)}}const PY={type:"variable-assign-node",model:Pi,view:MY},NY=Object.freeze(Object.defineProperty({__proto__:null,default:PY},Symbol.toStringTag,{value:"Module"})),nT=kr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Ua((qe(),Dn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=bn(()=>{},["stop"])),onClick:r[1]||(r[1]=bn(()=>{},["stop"]))},[(qe(),Dn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[he("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),he("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Ev,t.model.isHovered]])}});function kY(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const RY=32,DY=32;class CY extends cn.BezierEdge{constructor(){super();Ea(this,"isMounted");Ea(this,"customLineApp");Ea(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");kY(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Vg()?z2(this.targetId(),nT,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=FM({render:()=>Ov(nT,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Vg()&&H2(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=RY,customHeight:s=DY}=n.getProperties(),{startPoint:c,endPoint:h,path:v,isAnimation:g,arrowConfig:b}=n,w=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:S,strokeDashoffset:P,animationName:A,animationDuration:k,animationIterationCount:j,animationTimingFunction:R,animationDirection:$}=w,V={x:(c.x+h.x-r)/2,y:(c.y+h.y-s)/2,width:r,height:s},H=n.getEdgeStyle(),Y={width:r,height:s};return setTimeout(()=>{const Q=document.getElementById(o);Q&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(Q))},0),delete H.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:v,...H,...b,...g?{strokeDasharray:O,stroke:S,style:{strokeDashoffset:P,animationName:A,animationDuration:k,animationIterationCount:j,animationTimingFunction:R,animationDirection:$}}:{}}),cn.h("foreignObject",{...V,y:V.y+5,x:V.x+5,style:{}},[cn.h("div",{id:o,style:{...Y},className:"lf-custom-edge-wrapper"})])])}}class jY extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const IY={type:"app-edge",view:CY,model:jY},LY=kr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var v;(v=t.lf)==null||v.zoom(!0,[0,0])}function o(){var v;(v=t.lf)==null||v.zoom(!1,[0,0])}function r(){var v,g,b;(v=t.lf)==null||v.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const s=()=>{var v;(v=t.lf)==null||v.extension.dagre.layout()},c=()=>{var v;(v=t.lf)==null||v.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},h=()=>{var v;(v=t.lf)==null||v.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(v,g)=>{const b=re("ZoomOut"),w=re("el-icon"),O=re("el-tooltip"),S=re("el-button"),P=re("ZoomIn"),A=re("AppIcon"),k=re("el-divider"),j=re("el-card");return qe(),Rt(j,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:B(()=>[C(S,{link:"",onClick:o},{default:B(()=>[C(O,{class:"box-item",effect:"dark",content:v.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:B(()=>[C(w,{size:16,title:v.$t("views.applicationWorkflow.control.zoomOut")},{default:B(()=>[C(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:n},{default:B(()=>[C(O,{class:"box-item",effect:"dark",content:v.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:B(()=>[C(w,{size:16,title:v.$t("views.applicationWorkflow.control.zoomIn")},{default:B(()=>[C(P)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:r},{default:B(()=>[C(O,{class:"box-item",effect:"dark",content:v.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:B(()=>[C(A,{iconName:"app-fitview",title:v.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),C(k,{direction:"vertical"}),C(S,{link:"",onClick:c},{default:B(()=>[C(O,{class:"box-item",effect:"dark",content:v.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:B(()=>[C(A,{style:{"font-size":"16px"},iconName:"app-retract",title:v.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:h},{default:B(()=>[C(O,{class:"box-item",effect:"dark",content:v.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:B(()=>[C(A,{style:{"font-size":"16px"},iconName:"app-extend",title:v.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:s},{default:B(()=>[C(O,{class:"box-item",effect:"dark",content:v.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:B(()=>[C(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:v.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let ic=null;function rT(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function oT(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const Qh=40;let cg=40;function FY(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var w,O;if(cg=Qh,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:h}=e.options,v=t.getSelectElements(!1);if(!(h&&h.beforeClone?h.beforeClone(v):!0)||v.nodes.length===0&&v.edges.length===0)return ic=null,!0;const b=v.nodes.filter(S=>S.type===Xo.Start||S.type===Xo.Base);if(b.length>0){Ba(((O=(w=b[0])==null?void 0:w.properties)==null?void 0:O.stepName)+Zt("views.applicationWorkflow.tip.cannotCopy"));return}return ic=v,ic.nodes.forEach(S=>rT(S,Qh)),ic.edges.forEach(S=>oT(S,Qh)),Wp(Zt("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;if(ic&&(ic.nodes||ic.edges)){e.clearSelectElements();const h=e.addElements(ic,cg);if(!h)return!0;h.nodes.forEach(v=>e.selectElementById(v.id,!0)),h.edges.forEach(v=>e.selectElementById(v.id,!0)),ic.nodes.forEach(v=>rT(v,Qh)),ic.edges.forEach(v=>oT(v,Qh)),cg=cg+Qh}return!1},c=()=>{var g;const h=t.getSelectElements(!0);if(e.clearSelectElements(),h.nodes.length==0&&h.edges.length==0)return;if(h.edges.length>0&&h.nodes.length==0){h.edges.forEach(b=>e.deleteEdge(b.id));return}const v=h.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(v.length>0){Ba(`${(g=v[0].properties)==null?void 0:g.stepName}${Zt("views.applicationWorkflow.delete.deleteMessage")}`);return}return Cw(Zt("common.tip"),Zt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Zt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;h.edges.forEach(b=>e.deleteEdge(b.id)),h.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class $Y{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const BY=e=>typeof e=="string",iT=Array.isArray,qg=e=>typeof e=="number",uN=e=>e!==null&&typeof e=="object",Kg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Kg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Kg(t[n])}),t}return e},ev=(e,t)=>{const n=e[t];return uN(n)?n.cell:n},aT=(e,t,n)=>{let o;return n?o=n:qg(e)?o=()=>e:o=()=>t,o},UY=(e,t)=>{if(e!=="next"&&e!=="prev")return t},lT=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let GY=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return lT(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&lT(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,UY)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var yv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(yv||(yv={}));function uT(e,t){var n=e.get(t)||0;e.set(t,n+1)}function sT(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function sN(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+yv.EDGE_KEY_DELIM+s+yv.EDGE_KEY_DELIM+(o===void 0?yv.DEFAULT_EDGE_NAME:o)}function cT(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var h=c.v;c.v=c.w,c.w=h}return o!==void 0&&(c.name=o),c}function R1(e,t){return sN(e,t.v,t.w,t.name)}function fT(e){return typeof e=="function"}var VY=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},WY=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},zY=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:VY(t),edges:WY(t),value:t.graph()};return n.value===void 0&&delete n.value,n},HY=function(t){var n=new $v(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function pT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(o){XY(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function XY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qY(e,t,n){return t&&hT(e.prototype,t),n&&hT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var KY={compound:!1,multigraph:!1,directed:!0},$v=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};YY(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=yv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return fT(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,h;t.checkCompound();for(var v=s===void 0?t.GRAPH_NODE:s,g=t.parent(v);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,v);var b=t.childrenMap.get(v);return b.set(r,!0),(h=t.childrenMap)===null||h===void 0||h.set(v,b),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,h=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return h?Array.from(h.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,h=t.compound,v=new e({directed:s,multigraph:c,compound:h});if(v.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&v.setNode(b,t.node(b))}),t.edges().forEach(function(b){v.hasNode(b.v)&&v.hasNode(b.w)&&v.setEdgeObj(b,t.edge(b))}),h){var g=function(w){for(var O=t.parent(w);O!==void 0&&!v.hasNode(O);)O=t.parent(O);return O};v.nodes().forEach(function(b){v.setParent(b,g(b))})}return v},this.setDefaultEdgeLabel=function(r){return fT(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,h){return t.setEdge(c,h,s),h}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(R1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(R1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,h=r.name;return t.removeEdge(s,c,h)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(h){return!s||h.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(h){return!s||h.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return zY(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=pT(pT({},KY),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return qY(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,h=this.parentMap,v=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,w=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var S;h==null||h.set(n,this.GRAPH_NODE),v==null||v.set(n,new Map),v!=null&&v.has(this.GRAPH_NODE)||v==null||v.set(this.GRAPH_NODE,new Map),v==null||(S=v.get(this.GRAPH_NODE))===null||S===void 0||S.set(n,!0)}return[g,b,w,O].forEach(function(P){return P.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(k){o.removeEdge(k.v,k.w,k.name)},s=this.inEdgesMap,c=this.outEdgesMap,h=this.predecessorsMap,v=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,w,O;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(w=this.children(n))===null||w===void 0||w.forEach(function(A){return o.setParent(A)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var S=s.get(n),P=c.get(n);Array.from(S.values()).forEach(function(A){return r(A)}),Array.from(P.values()).forEach(function(A){return r(A)}),g.delete(n),s.delete(n),c.delete(n),h.delete(n),v.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,h,v=cT(this.isDirected(),n,o,s),g=R1(this.isDirected(),v),b=v.v,w=v.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(w),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,w,s)),Object.freeze(v),this.edgesMap.set(g,v);var O=this.predecessorsMap.get(w),S=this.successorsMap.get(b);return uT(O,b),uT(S,w),(c=this.inEdgesMap.get(w))===null||c===void 0||c.set(g,v),(h=this.outEdgesMap.get(b))===null||h===void 0||h.set(g,v),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=sN(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var h=cT(this.isDirected(),n,o,r),v=h.v,g=h.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var b=this.predecessorsMap.get(g),w=this.successorsMap.get(v);sT(b,v),sT(w,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(v).delete(s),this.edgeCountNum-=1}return this}}]),e}();$v.fromJSON=HY;function vT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ZY(e,t,n){return t&&vT(e.prototype,t),n&&vT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function JY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cN=ZY(function e(){var t=this;JY(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],h=c[0],v=c[1];r[n]=v,r[o]=h,s.set(h.key,o),s.set(v.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var h;if(s=c>>1,((h=o[s])===null||h===void 0?void 0:h.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),QY=function(t,n){var o=new $v,r=new Map,s=new cN,c;function h(b){var w=b.v===c?b.w:b.v,O=s.priority(w);if(O!==void 0){var S=n(b);S<O&&(r.set(w,c),s.decrease(w,S))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(b){s.add(b,Number.POSITIVE_INFINITY),o.setNode(b)}),s.decrease(t.nodes()[0],0);for(var v=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(v)throw new Error("Input graph is not connected: "+t.graph());v=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(h)}return o},eq=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],h=[s];h.length>0;){var v=h.pop();if(!n.has(v)){var g,b;n.add(v),c.push(v),(g=t.successors(v))===null||g===void 0||g.forEach(function(w){return h.push(w)}),(b=t.predecessors(v))===null||b===void 0||b.forEach(function(w){return h.push(w)})}}c.length&&o.push(c)}),o},tq=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(h){return e(t,h,o,r,s,c)}),o&&c.push(n))},EE=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],h=[];return r.forEach(function(v){if(t.hasNode(v))tq(t,v,o==="post",h,s,c);else throw new Error("Graph does not have node: "+v)}),c};function nq(e,t){return aq(e)||iq(e,t)||oq(e,t)||rq()}function rq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oq(e,t){if(e){if(typeof e=="string")return yT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yT(e,t)}}function yT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function iq(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,h;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(v){s=!0,h=v}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw h}}return o}}function aq(e){if(Array.isArray(e))return e}var lq=function(){return 1},fN=function(t,n,o,r){return uq(t,n,o||lq,r||function(s){return t.outEdges(s)})},uq=function(t,n,o,r){var s=new Map,c=new cN,h,v,g=function(O){var S=O.v!==h?O.v:O.w,P=s.get(S),A=o(O),k=v.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+A);k<P.distance&&(P.distance=k,P.predecessor=h,c.decrease(S,k))};for(t.nodes().forEach(function(w){var O=w===n?0:Number.POSITIVE_INFINITY;s.set(w,{distance:O}),c.add(w,O)});c.size()>0&&(h=c.removeMin(),v=s.get(h),!(v&&v.distance===Number.POSITIVE_INFINITY));)r(h).forEach(g);var b={};return Array.from(s.entries()).forEach(function(w){var O=nq(w,2),S=O[0],P=O[1];return b[String(S)]=P,b}),b},sq=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=fN(t,s,n,o),r}),r},dN=function(t){var n=0,o=[],r=new Map,s=[];function c(h){var v,g={onStack:!0,lowlink:n,index:n};if(r.set(h,g),n+=1,o.push(h),(v=t.successors(h))===null||v===void 0||v.forEach(function(S){var P;if(r.has(S)){if(!((P=r.get(S))===null||P===void 0)&&P.onStack){var k=r.get(S);g.lowlink=Math.min(g.lowlink,k.index)}}else{c(S);var A=r.get(S);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var b=[],w;do{w=o.pop();var O=r.get(w);O.onStack=!1,b.push(w)}while(h!==w);s.push(b)}}return t.nodes().forEach(function(h){r.has(h)||c(h)}),s},cq=function(t){return dN(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function mw(e){"@babel/helpers - typeof";return mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mw(e)}function mT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fq(e,t,n){return t&&mT(e.prototype,t),n&&mT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cy(e,t)}function hq(e){var t=pN();return function(){var o=jy(e),r;if(t){var s=jy(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return vq(this,r)}}function vq(e,t){if(t&&(mw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yq(e)}function yq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gw(e){var t=typeof Map=="function"?new Map:void 0;return gw=function(o){if(o===null||!mq(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return xg(o,arguments,jy(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Cy(r,o)},gw(e)}function xg(e,t,n){return pN()?xg=Reflect.construct:xg=function(r,s,c){var h=[null];h.push.apply(h,s);var v=Function.bind.apply(r,h),g=new v;return c&&Cy(g,c.prototype),g},xg.apply(null,arguments)}function pN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mq(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Cy(e,t){return Cy=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Cy(e,t)}function jy(e){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(e)}var bw=function(e){pq(n,e);var t=hq(n);function n(){return dq(this,n),t.apply(this,arguments)}return fq(n)}(gw(Error));function hN(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new bw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new bw;return o}var gq=function(t){try{hN(t)}catch(n){if(n instanceof bw)return!1;throw n}return!0},bq=function(t,n){return EE(t,n,"post")},_q=function(t,n){return EE(t,n,"pre")},wq=function(){return 1};function Eq(e,t,n){return Oq(e,t||wq,n||function(o){return e.outEdges(o)})}function Oq(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(h){s!==h&&(o[c][String(h)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(h){var v=h.v===s?h.w:h.v,g=t(h);o[c][String(v)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),h=o[c];r.forEach(function(v){var g=String(v),b=o[g];r.forEach(function(w){var O=String(w),S=b[c],P=h[O],A=b[O],k=S.distance+P.distance;k<A.distance&&(A.distance=k,A.predecessor=P.predecessor)})})}),o}const xq=Object.freeze(Object.defineProperty({__proto__:null,components:eq,dfs:EE,dijkstra:fN,dijkstraAll:sq,findCycles:cq,floydWarshall:Eq,isAcyclic:gq,postorder:bq,preorder:_q,prim:QY,tarjan:dN,topsort:hN},Symbol.toStringTag,{value:"Module"}));class Sq extends GY{}class Aq extends $v{}const Tq=()=>1,Mq=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=Nq(e,t||Tq);return(n=Pq(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},Pq=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)D1(e,t,n,c);for(;c=r.dequeue();)D1(e,t,n,c);if(e.nodeCount()){for(let h=t.length-2;h>0;--h)if(c=t[h].dequeue(),c){o=o.concat(D1(e,t,n,c,!0));break}}}return o},D1=(e,t,n,o,r)=>{var s,c;const h=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(v=>{const g=e.edge(v),b=e.node(v.v);r&&h.push({v:v.v,w:v.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,_w(t,n,b)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(v=>{const g=e.edge(v),b=v.w,w=e.node(b);w.in===void 0&&(w.in=0),w.in-=g,_w(t,n,w)}),e.removeNode(o.v),r?h:void 0},Nq=(e,t)=>{const n=new Aq;let o=0,r=0;e.nodes().forEach(v=>{n.setNode(v,{v,in:0,out:0})}),e.edges().forEach(v=>{const g=n.edge(v)||0,b=(t==null?void 0:t(v))||1,w=g+b;n.setEdge(v.v,v.w,w),r=Math.max(r,n.node(v.v).out+=b),o=Math.max(o,n.node(v.w).in+=b)});const s=[],c=r+o+3;for(let v=0;v<c;v++)s.push(new Sq);const h=o+1;return n.nodes().forEach(v=>{_w(s,h,n.node(v))}),{buckets:s,zeroIdx:h,graph:n}},_w=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},kq=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?Mq(e,t(e)):Rq(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},Rq=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(h=>{n[h.w]?t.push(h):r(h.w)}),delete n[s])};return e.nodes().forEach(r),t},Dq=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},gT={run:kq,undo:Dq};class Mf extends $v{}const Cq=(e,t)=>Number(e)-Number(t),Bv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},jq=e=>{const t=new Mf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},vN=e=>{const t=new Mf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},Iq=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),bT=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,h=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let v,g;return Math.abs(s)*c>Math.abs(r)*h?(s<0&&(h=-h),v=h*r/s,g=h):(r<0&&(c=-c),v=c,g=c*s/r),{x:n+v,y:o+g}},Iy=e=>{const t=[],n=yN(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,h;return Cq((c=e.node(r))===null||c===void 0?void 0:c.order,(h=e.node(s))===null||h===void 0?void 0:h.order)});return t},Lq=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},Fq=e=>{const t=e.nodes(),n=t.filter(h=>{var v;return((v=e.node(h))===null||v===void 0?void 0:v.rank)!==void 0}).map(h=>e.node(h).rank),o=Math.min(...n),r=[];t.forEach(h=>{var v;const g=(((v=e.node(h))===null||v===void 0?void 0:v.rank)||0)-o;r[g]||(r[g]=[]),r[g].push(h)});let s=0;const c=e.graph().nodeRankFactor||0;for(let h=0;h<r.length;h++){const v=r[h];v===void 0?h%c!==0&&(s-=1):s&&(v==null||v.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=s)}))}},_T=(e,t,n,o)=>{const r={width:0,height:0};return qg(n)&&qg(o)&&(r.rank=n,r.order=o),Bv(e,"border",r,t)},yN=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},$q=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},mN=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},gN=(e,t)=>t(),OE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),Bq=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>Uq(e,t))},Uq=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,h=e.edge(t),v=h.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const g=e.graph();let b,w,O;for(O=0,++o;o<s;++O,++o)h.points=[],w={edgeLabel:h,width:0,height:0,edgeObj:t,rank:o},b=Bv(e,"edge",w,"_d"),o===v&&(w.width=h.width,w.height=h.height,w.dummy="edge-label",w.labelpos=h.labelpos),e.setEdge(n,b,{weight:h.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:h.weight},c)},Gq=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},wT={run:Bq,undo:Gq},bN=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let h;return(s=e.outEdges(r))===null||s===void 0||s.forEach(v=>{const g=o(v.w),b=e.edge(v).minlen,w=g-b;w&&(h===void 0||w<h)&&(h=w)}),h||(h=0),c.rank=h,h};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},Vq=e=>{var t;const n={};let o;const r=h=>{var v;const g=e.node(h);if(!g)return 0;if(n[h])return g.rank;n[h]=!0;let b;return(v=e.outEdges(h))===null||v===void 0||v.forEach(w=>{const O=r(w.w),S=e.edge(w).minlen,P=O-S;P&&(b===void 0||P<b)&&(b=P)}),b||(b=0),(o===void 0||b<o)&&(o=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(h=>{e.node(h)&&r(h)}),o===void 0&&(o=0);const s={},c=(h,v)=>{var g;const b=e.node(h),w=isNaN(b.layer)?v:b.layer;(b.rank===void 0||b.rank<w)&&(b.rank=w),!s[h]&&(s[h]=!0,(g=e.outEdges(h))===null||g===void 0||g.map(O=>{c(O.w,w+e.edge(O).minlen)}))};e.nodes().forEach(h=>{const v=e.node(h);v&&(isNaN(v.layer)?v.rank-=o:c(h,v.layer))})},Ld=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,Wq=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;zq(t,e)<o;)r=_N(t,e),s=t.hasNode(r.v)?Ld(e,r):-Ld(e,r),wN(t,e,s);return t},zq=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!Ld(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},Hq=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;Xq(t,e)<o;)r=_N(t,e),s=t.hasNode(r.v)?Ld(e,r):-Ld(e,r),wN(t,e,s);return t},Xq=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,h=o===c?s.w:c;!e.hasNode(h)&&(t.node(h).layer!==void 0||!Ld(t,s))&&(e.setNode(h,{}),e.setEdge(o,h,{}),n(h))})};return e.nodes().forEach(n),e.nodeCount()},_N=(e,t)=>OE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Ld(t,n):1/0),wN=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:Yq,postorder:qq}=xq,Kq=e=>{const t=jq(e);bN(t);const n=Wq(t);ON(n),EN(n,t);let o,r;for(;o=Qq(n);)r=eK(n,t,o),tK(n,t,o,r)},EN=(e,t)=>{let n=qq(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{Zq(e,t,o)})},Zq=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=Jq(e,t,n)},Jq=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,h=t.edgeFromArgs(n,s),v=0;return h||(c=!1,h=t.edgeFromArgs(s,n)),v=h.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(g=>{const b=g.v===n,w=b?g.w:g.v;if(w!==s){const O=b===c,S=t.edge(g).weight;if(v+=O?S:-S,rK(e,n,w)){const P=e.edgeFromArgs(n,w).cutvalue;v+=O?-P:P}}}),v},ON=(e,t=e.nodes()[0])=>{xN(e,{},1,t)},xN=(e,t,n,o,r)=>{var s;const c=n;let h=n;const v=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(g=>{t[g]||(h=xN(e,t,h,g,o))}),v.low=c,v.lim=h++,r?v.parent=r:delete v.parent,h},Qq=e=>e.edges().find(t=>e.edge(t).cutvalue<0),eK=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let h=s,v=!1;s.lim>c.lim&&(h=c,v=!0);const g=t.edges().filter(b=>v===ET(e,e.node(b.v),h)&&v!==ET(e,e.node(b.w),h));return OE(g,b=>Ld(t,b))},tK=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),ON(e),EN(e,t),nK(e,t)},nK=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=Yq(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),h=!1;c||(c=t.edgeFromArgs(s,r),h=!0),t.node(r).rank=t.node(s).rank+(h?c.minlen:-c.minlen)})},rK=(e,t,n)=>e.hasEdge(t,n),ET=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,oK=e=>{switch(e.graph().ranker){case"network-simplex":aK(e);break;case"tight-tree":OT(e);break;case"longest-path":iK(e);break;default:OT(e)}},iK=bN,OT=e=>{Vq(e),Hq(e)},aK=e=>{Kq(e)},lK=e=>{var t;const n={};let o=0;const r=s=>{var c;const h=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:h,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},uK=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),h=Math.max(t[n].lim,t[o].lim);let v,g;v=n;do v=e.parent(v),r.push(v);while(v&&(t[v].low>c||h>t[v].lim));for(g=v,v=o;v&&v!==g;)s.push(v),v=e.parent(v);return{lca:g,path:r.concat(s.reverse())}},sK=e=>{var t;const n=lK(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,h=e.node(c);const v=h.edgeObj;if(!v)return;const g=uK(e,n,v.v,v.w),b=g.path,w=g.lca;let O=0,S=b[O],P=!0;for(;c!==v.w;){if(h=e.node(c),P){for(;S!==w&&((r=e.node(S))===null||r===void 0?void 0:r.maxRank)<h.rank;)O++,S=b[O];S===w&&(P=!1)}if(!P){for(;O<b.length-1&&((s=e.node(b[O+1]))===null||s===void 0?void 0:s.minRank)<=h.rank;)O++;S=b[O]}e.setParent(c,S),c=e.successors(c)[0]}})},cK=e=>{var t;const n=Bv(e,"root",{},"_root"),o=fK(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(v=>{e.edge(v).minlen*=c});const h=dK(e)+1;(t=e.children())===null||t===void 0||t.forEach(v=>{SN(e,n,c,h,s,o,v)}),e.graph().nodeRankFactor=c},SN=(e,t,n,o,r,s,c)=>{const h=e.children(c);if(!(h!=null&&h.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const v=_T(e,"_bt"),g=_T(e,"_bb"),b=e.node(c);e.setParent(v,c),b.borderTop=v,e.setParent(g,c),b.borderBottom=g,h==null||h.forEach(w=>{SN(e,t,n,o,r,s,w);const O=e.node(w),S=O.borderTop?O.borderTop:w,P=O.borderBottom?O.borderBottom:w,A=O.borderTop?o:2*o,k=S!==P?1:r-s[c]+1;e.setEdge(v,S,{minlen:k,weight:A,nestingEdge:!0}),e.setEdge(P,g,{minlen:k,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,v,{weight:0,minlen:r+s[c]})},fK=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(h=>o(h,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},dK=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},pK=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},xT={run:cK,cleanup:pK},hK=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,h=s.maxRank+1;c<h;c+=1)ST(e,"borderLeft","_bl",o,s,c),ST(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},ST=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},h=r[t][s-1],v=Bv(e,"border",c,n);r[t][s]=v,e.setParent(v,o),h&&e.setEdge(h,v,{weight:1})},vK=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&AN(e)},yK=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&mK(e),(n==="lr"||n==="rl")&&(gK(e),AN(e))},AN=e=>{e.nodes().forEach(t=>{AT(e.node(t))}),e.edges().forEach(t=>{AT(e.edge(t))})},AT=e=>{const t=e.width;e.width=e.height,e.height=t},mK=e=>{e.nodes().forEach(t=>{C1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>C1(r)),o.hasOwnProperty("y")&&C1(o)})},C1=e=>{e!=null&&e.y&&(e.y=-e.y)},gK=e=>{e.nodes().forEach(t=>{j1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>j1(r)),o.hasOwnProperty("x")&&j1(o)})},j1=e=>{const t=e.x;e.x=e.y,e.y=t},TT={adjust:vK,undo:yK};function bK(e){return Array.isArray(e)}function ww(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const MT=function(e){if(bK(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},PT=e=>{const t={},n=e.nodes().filter(b=>{var w;return!(!((w=e.children(b))===null||w===void 0)&&w.length)}),o=n.map(b=>e.node(b).rank),r=ww(o),s=[];for(let b=0;b<r+1;b++)s.push([]);const c=b=>{var w;if(t.hasOwnProperty(b))return;t[b]=!0;const O=e.node(b);isNaN(O.rank)||s[O.rank].push(b),(w=e.successors(b))===null||w===void 0||w.forEach(S=>c(S))},h=n.sort((b,w)=>e.node(b).rank-e.node(w).rank),g=h.filter(b=>e.node(b).fixorder!==void 0).sort((b,w)=>e.node(b).fixorder-e.node(w).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||s[e.node(b).rank].push(b),t[b]=!0}),h==null||h.forEach(c),s},_K=(e,t,n)=>{const o=Iq(n,n.map((b,w)=>w)),s=t.map(b=>{var w;const O=(w=e.outEdges(b))===null||w===void 0?void 0:w.map(S=>({pos:o[S.w]||0,weight:e.edge(S).weight}));return O==null?void 0:O.sort((S,P)=>S.pos-P.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const h=2*c-1;c-=1;const v=Array(h).fill(0,0,h);let g=0;return s==null||s.forEach(b=>{if(b){let w=b.pos+c;v[w]+=b.weight;let O=0;for(;w>0;)w%2&&(O+=v[w+1]),w=w-1>>1,v[w]+=b.weight;g+=b.weight*O}}),g},NT=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=_K(e,t[o-1],t[o]);return n},wK=(e,t,n)=>{const o=EK(e),r=new Mf({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const h=e.node(s),v=e.parent(s);(h.rank===t||h.minRank<=t&&t<=h.maxRank)&&(r.setNode(s),r.setParent(s,v||o),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const b=g.v===s?g.w:g.v,w=r.edgeFromArgs(b,s),O=w!==void 0?w.weight:0;r.setEdge(b,s,{weight:e.edge(g).weight+O})}),h.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:h.borderLeft[t],borderRight:h.borderRight[t]}))}),r},EK=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},OK=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),h,v;for(;c;){if(h=e.parent(c),h?(v=o[h],o[h]=c):(v=r,r=c),v&&v!==c){t.setEdge(v,c);return}c=h}})},xK=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),h=e.node(s.v);r.sum+=c.weight*h.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),SK=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((h,v)=>{s[h.v]={i:v,indegree:0,in:[],out:[],vs:[h.v]};const g=s[h.v];h.barycenter!==void 0&&(g.barycenter=h.barycenter,g.weight=h.weight)}),(n=t.edges())===null||n===void 0||n.forEach(h=>{const v=s[h.v],g=s[h.w];v!==void 0&&g!==void 0&&(g.indegree++,v.out.push(s[h.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,h=>!h.indegree);return AK(c)},AK=e=>{var t,n;const o=[],r=v=>g=>{g.merged||(g.barycenter===void 0||v.barycenter===void 0||g.barycenter>=v.barycenter)&&TK(v,g)},s=v=>g=>{g.in.push(v),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const v=e.pop();o.push(v),(t=v.in.reverse())===null||t===void 0||t.forEach(g=>r(v)(g)),(n=v.out)===null||n===void 0||n.forEach(g=>s(v)(g))}const c=o.filter(v=>!v.merged),h=["vs","i","barycenter","weight"];return c.map(v=>{const g={};return h==null||h.forEach(b=>{v[b]!==void 0&&(g[b]=v[b])}),g})},TK=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},MK=(e,t,n,o)=>{const r=$q(e,O=>{const S=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return o?!S&&O.hasOwnProperty("barycenter"):S||O.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((O,S)=>-O.i- -S.i),h=[];let v=0,g=0,b=0;s==null||s.sort(PK(!!t,!!n)),b=kT(h,c,b),s==null||s.forEach(O=>{var S;b+=(S=O.vs)===null||S===void 0?void 0:S.length,h.push(O.vs),v+=O.barycenter*O.weight,g+=O.weight,b=kT(h,c,b)});const w={vs:h.flat()};return g&&(w.barycenter=v/g,w.weight=g),w},kT=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},PK=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},TN=(e,t,n,o,r,s)=>{var c,h,v,g;let b=e.children(t);const w=e.node(t),O=w?w.borderLeft:void 0,S=w?w.borderRight:void 0,P={};O&&(b=b==null?void 0:b.filter(R=>R!==O&&R!==S));const A=xK(e,b||[]);A==null||A.forEach(R=>{var $;if(!(($=e.children(R.v))===null||$===void 0)&&$.length){const V=TN(e,R.v,n,o,s);P[R.v]=V,V.hasOwnProperty("barycenter")&&kK(R,V)}});const k=SK(A,n);NK(k,P),(c=k.filter(R=>R.vs.length>0))===null||c===void 0||c.forEach(R=>{const $=e.node(R.vs[0]);$&&(R.fixorder=$.fixorder,R.order=$.order)});const j=MK(k,o,r,s);if(O&&(j.vs=[O,j.vs,S].flat(),!((h=e.predecessors(O))===null||h===void 0)&&h.length)){const R=e.node(((v=e.predecessors(O))===null||v===void 0?void 0:v[0])||""),$=e.node(((g=e.predecessors(S))===null||g===void 0?void 0:g[0])||"");j.hasOwnProperty("barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+R.order+$.order)/(j.weight+2),j.weight+=2}return j},NK=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},kK=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},RK=(e,t)=>{const n=yN(e),o=[],r=[];for(let b=1;b<n+1;b++)o.push(b);for(let b=n-1;b>-1;b--)r.push(b);const s=RT(e,o,"inEdges"),c=RT(e,r,"outEdges");let h=PT(e);I1(e,h);let v=Number.POSITIVE_INFINITY,g;for(let b=0,w=0;w<4;++b,++w){DT(b%2?s:c,b%4>=2,!1,t),h=Iy(e);const O=NT(e,h);O<v&&(w=0,g=Kg(h),v=O)}h=PT(e),I1(e,h);for(let b=0,w=0;w<4;++b,++w){DT(b%2?s:c,b%4>=2,!0,t),h=Iy(e);const O=NT(e,h);O<v&&(w=0,g=Kg(h),v=O)}I1(e,g)},RT=(e,t,n)=>t.map(o=>wK(e,o,n)),DT=(e,t,n,o)=>{const r=new Mf;e==null||e.forEach(s=>{var c;const h=s.graph().root,v=TN(s,h,r,t,n,o);for(let g=0;g<((c=v.vs)===null||c===void 0?void 0:c.length);g++){const b=s.node(v.vs[g]);b&&(b.order=g)}OK(s,r,v.vs)})},I1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class DK extends $v{}const CK=(e,t)=>{const n={},o=(r,s)=>{let c=0,h=0;const v=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((b,w)=>{var O;const S=IK(e,b),P=S?e.node(S).order:v;(S||b===g)&&((O=s.slice(h,w+1))===null||O===void 0||O.forEach(A=>{var k;(k=e.predecessors(A))===null||k===void 0||k.forEach(j=>{var R;const $=e.node(j),V=$.order;(V<c||P<V)&&!($.dummy&&(!((R=e.node(A))===null||R===void 0)&&R.dummy))&&MN(n,j,A)})}),h=w+1,c=P)}),s};return t!=null&&t.length&&t.reduce(o),n},jK=(e,t)=>{const n={};function o(h,v,g,b,w){var O,S;let P;for(let A=v;A<g;A++)P=h[A],!((O=e.node(P))===null||O===void 0)&&O.dummy&&((S=e.predecessors(P))===null||S===void 0||S.forEach(k=>{const j=e.node(k);j.dummy&&(j.order<b||j.order>w)&&MN(n,k,P)}))}function r(h){return JSON.stringify(h.slice(1))}function s(h,v){const g=r(h);v.get(g)||(o(...h),v.set(g,!0))}const c=(h,v)=>{let g=-1,b,w=0;const O=new Map;return v==null||v.forEach((S,P)=>{var A;if(((A=e.node(S))===null||A===void 0?void 0:A.dummy)==="border"){const k=e.predecessors(S)||[];k.length&&(b=e.node(k[0]).order,s([v,w,P,g,b],O),w=P,g=b)}s([v,w,v.length,b,h.length],O)}),v};return t!=null&&t.length&&t.reduce(c),n},IK=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},MN=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},LK=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},FK=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(h=>{h==null||h.forEach((v,g)=>{r[v]=v,s[v]=v,c[v]=g})}),t==null||t.forEach(h=>{let v=-1;h==null||h.forEach(g=>{let b=o(g);if(b.length){b=b.sort((O,S)=>c[O]-c[S]);const w=(b.length-1)/2;for(let O=Math.floor(w),S=Math.ceil(w);O<=S;++O){const P=b[O];s[g]===g&&v<c[P]&&!LK(n,g,P)&&(s[P]=g,s[g]=r[g]=r[P],v=c[P])}}})}),{root:r,align:s}},$K=(e,t,n,o,r)=>{var s;const c={},h=BK(e,t,n,r),v=r?"borderLeft":"borderRight",g=(O,S)=>{let P=h.nodes(),A=P.pop();const k={};for(;A;)k[A]?O(A):(k[A]=!0,P.push(A),P=P.concat(S(A))),A=P.pop()},b=O=>{c[O]=(h.inEdges(O)||[]).reduce((S,P)=>Math.max(S,(c[P.v]||0)+h.edge(P)),0)},w=O=>{const S=(h.outEdges(O)||[]).reduce((A,k)=>Math.min(A,(c[k.w]||0)-h.edge(k)),Number.POSITIVE_INFINITY),P=e.node(O);S!==Number.POSITIVE_INFINITY&&P.borderType!==v&&(c[O]=Math.max(c[O],S))};return g(b,h.predecessors.bind(h)),g(w,h.successors.bind(h)),(s=Object.values(o))===null||s===void 0||s.forEach(O=>{c[O]=c[n[O]]}),c},BK=(e,t,n,o)=>{const r=new DK,s=e.graph(),c=WK(s.nodesep,s.edgesep,o);return t==null||t.forEach(h=>{let v;h==null||h.forEach(g=>{const b=n[g];if(r.setNode(b),v){const w=n[v],O=r.edgeFromArgs(w,b);r.setEdge(w,b,Math.max(c(e,g,v),O||0))}v=g})}),r},UK=(e,t)=>OE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const h=n[c],v=zK(e,c)/2;r=Math.max(h+v,r),s=Math.min(h-v,s)}),r-s});function GK(e,t){const n=Object.values(t),o=MT(n),r=ww(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const h=s+c,v=e[h];let g;if(v===t)return;const b=Object.values(v);g=c==="l"?o-MT(b):r-ww(b),g&&(e[h]={},Object.keys(v).forEach(w=>{e[h][w]=v[w]+g}))})})}const VK=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},WK=(e,t,n)=>(o,r,s)=>{const c=o.node(r),h=o.node(s);let v=0,g;if(v+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(v+=n?g:-g),g=0,v+=(c.dummy?t:e)/2,v+=(h.dummy?t:e)/2,v+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":g=h.width/2;break;case"r":g=-h.width/2;break}return g&&(v+=n?g:-g),g=0,v},zK=(e,t)=>e.node(t).width||0,HK=e=>{const t=Iy(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(h=>e.node(h).height),c=Math.max(...s,0);r==null||r.forEach(h=>{e.node(h).y=o+c/2}),o+=c+n})},XK=e=>{const t=Iy(e),n=Object.assign(CK(e,t),jK(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(h=>{h==="r"&&(r=r.map(w=>Object.values(w).reverse()));const v=(c==="u"?e.predecessors:e.successors).bind(e),g=FK(e,r,n,v),b=$K(e,r,g.root,g.align,h==="r");h==="r"&&Object.keys(b).forEach(w=>b[w]=-b[w]),o[c+h]=b})});const s=UK(e,o);return s&&GK(o,s),VK(o,e.graph().align)},YK=e=>{var t;const n=vN(e);HK(n);const o=XK(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},qK=(e,t)=>{const o=e.nodes().filter(c=>{var h;return!(!((h=e.children(c))===null||h===void 0)&&h.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const h=e.node(c);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=s[h.rank].length,s[h.rank].push(c))})},KK=(e,t)=>{const n=t&&t.debugTiming?mN:gN;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{JK(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>aZ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{lZ(o)});try{n("  runLayout",()=>{ZK(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{QK(e,o)})})},ZK=(e,t,n)=>{t("    removeSelfEdges",()=>{yZ(e)}),t("    acyclic",()=>{gT.run(e)}),t("    nestingGraph.run",()=>{xT.run(e)}),t("    rank",()=>{oK(vN(e))}),t("    injectEdgeLabelProxies",()=>{uZ(e)}),t("    removeEmptyRanks",()=>{Fq(e)}),t("    nestingGraph.cleanup",()=>{xT.cleanup(e)}),t("    normalizeRanks",()=>{Lq(e)}),t("    assignRankMinMax",()=>{sZ(e)}),t("    removeEdgeLabelProxies",()=>{cZ(e)}),t("    normalize.run",()=>{wT.run(e)}),t("    parentDummyChains",()=>{sK(e)}),t("    addBorderSegments",()=>{hK(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{qK(e,n.nodeOrder)}),t("    order",()=>{RK(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{mZ(e)}),t("    adjustCoordinateSystem",()=>{TT.adjust(e)}),t("    position",()=>{YK(e)}),t("    positionSelfEdges",()=>{gZ(e)}),t("    removeBorderNodes",()=>{vZ(e)}),t("    normalize.undo",()=>{wT.undo(e)}),t("    fixupEdgeLabelCoords",()=>{pZ(e)}),t("    undoCoordinateSystem",()=>{TT.undo(e)}),t("    translateGraph",()=>{fZ(e)}),t("    assignNodeIntersects",()=>{dZ(e)}),t("    reversePoints",()=>{hZ(e)}),t("    acyclic.undo",()=>{gT.undo(e)})},JK=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},QK=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},eZ=["nodesep","edgesep","ranksep","marginx","marginy"],tZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L1=["acyclicer","ranker","rankdir","align"],nZ=["width","height","layer","fixorder"],rZ={width:0,height:0},oZ=["minlen","weight","width","height","labeloffset"],iZ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},F1=["labelpos"],aZ=e=>{const t=new Mf({multigraph:!0,compound:!0}),n=B1(e.graph()),o={};return L1==null||L1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},tZ,$1(n,eZ),o)),e.nodes().forEach(r=>{const s=B1(e.node(r)),c=Object.assign(Object.assign({},rZ),s),h=$1(c,nZ);t.setNode(r,h),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=B1(e.edge(r)),c={};F1==null||F1.forEach(h=>{s[h]!==void 0&&(c[h]=s[h])}),t.setEdgeObj(r,Object.assign({},iZ,$1(s,oZ),c))}),t},lZ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},uZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Bv(e,"edge-proxy",s,"_ep")}})},sZ=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},cZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},fZ=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,h=s.marginy||0,v=g=>{if(!g)return;const b=g.x,w=g.y,O=g.width,S=g.height;!isNaN(b)&&!isNaN(O)&&(t===void 0&&(t=b-O/2),t=Math.min(t,b-O/2),n=Math.max(n,b+O/2)),!isNaN(w)&&!isNaN(S)&&(o===void 0&&(o=w-S/2),o=Math.min(o,w-S/2),r=Math.max(r,w+S/2))};e.nodes().forEach(g=>{v(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&v(b)}),t-=c,o-=h,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=o)}),e.edges().forEach(g=>{var b;const w=e.edge(g);(b=w.points)===null||b===void 0||b.forEach(O=>{O.x-=t,O.y-=o}),w.hasOwnProperty("x")&&(w.x-=t),w.hasOwnProperty("y")&&(w.y-=o)}),s.width=n-t+c,s.height=r-o+h},dZ=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(bT(o,s)),n.points.push(bT(r,c))})},pZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},hZ=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},vZ=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),h=e.node(s.borderBottom),v=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(v==null?void 0:v.x))||10,s.height=Math.abs((h==null?void 0:h.y)-(c==null?void 0:c.y))||10,s.x=((v==null?void 0:v.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},yZ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},mZ=e=>{const t=Iy(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const h=e.node(r);h.order=s+o,(c=h.selfEdges)===null||c===void 0||c.forEach(v=>{Bv(e,"selfedge",{width:v.label.width,height:v.label.height,rank:h.rank,order:s+ ++o,e:v.e,label:v.label},"_se")}),delete h.selfEdges})})},gZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,h=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-h},{x:r+5*c/6,y:s-h},{y:s,x:r+c},{x:r+5*c/6,y:s+h},{x:r+2*c/3,y:s+h}],n.label.x=n.x,n.label.y=n.y}})},$1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},B1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},bZ={layout:KK,util:{time:mN,notime:gN}};class _Z extends $Y{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:h,rankdir:v,combos:g,begin:b,radial:w,comboEdges:O=[],vedges:S=[]}=s;if(!c)return;const P=s.edges||[],A=new Mf({multigraph:!0,compound:!0});s.nodeMap={};const k={};c.forEach(q=>{s.nodeMap[q.id]=q,q.comboId&&(k[q.comboId]=k[q.comboId]||[],k[q.comboId].push(q.id))});let j=[];const R={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(q=>{R[q]=!0,j.push(s.nodeMap[q])}),c.forEach(q=>{R[q.id]||j.push(q)})):j=c;let $;h?iT(h)?$=()=>h:$=()=>[h,h]:$=q=>q.size?iT(q.size)?q.size:uN(q.size)?[q.size.width||40,q.size.height||40]:[q.size,q.size]:[40,40];const V=aT(s.ranksep,50,s.ranksepFunc),H=aT(s.nodesep,50,s.nodesepFunc);let Y=H,Q=V;(v==="LR"||v==="RL")&&(Y=V,Q=H),A.setDefaultEdgeLabel(()=>({})),A.setGraph(s);const W={};this.sortByCombo&&g&&g.forEach(q=>{if(W[q.id]=q,q.collapsed){const ce=$(q),ke=Q(q),Oe=Y(q),ze=ce[0]+2*Oe,Ie=ce[1]+2*ke;A.setNode(q.id,{width:ze,height:Ie})}q.parentId&&(W[q.parentId]||A.setNode(q.parentId,{}),A.setParent(q.id,q.parentId))}),j.filter(q=>q.layout!==!1).forEach(q=>{const ce=$(q),ke=Q(q),Oe=Y(q),ze=ce[0]+2*Oe,Ie=ce[1]+2*ke,Pe=q.layer;qg(Pe)?A.setNode(q.id,{width:ze,height:Ie,layer:Pe}):A.setNode(q.id,{width:ze,height:Ie}),this.sortByCombo&&q.comboId&&(W[q.comboId]||(W[q.comboId]={id:q.comboId},A.setNode(q.comboId,{})),A.setParent(q.id,q.comboId))}),P.forEach(q=>{const ce=ev(q,"source"),ke=ev(q,"target");this.layoutNode(ce)&&this.layoutNode(ke)&&A.setEdge(ce,ke,{weight:q.weight||1})}),(n=O==null?void 0:O.concat(S||[]))===null||n===void 0||n.forEach(q=>{var ce,ke;const{source:Oe,target:ze}=q,Ie=!((ce=W[Oe])===null||ce===void 0)&&ce.collapsed?[Oe]:k[Oe]||[Oe],Pe=!((ke=W[ze])===null||ke===void 0)&&ke.collapsed?[ze]:k[ze]||[ze];Ie.forEach(le=>{Pe.forEach(ye=>{A.setEdge(le,ye,{weight:q.weight||1})})})});let I;!((o=s.preset)===null||o===void 0)&&o.nodes&&(I=new Mf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(q=>{I==null||I.setNode(q.id,q)})),bZ.layout(A,{prevGraph:I,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const z=[0,0];if(b){let q=1/0,ce=1/0;A.nodes().forEach(ke=>{const Oe=A.node(ke);q>Oe.x&&(q=Oe.x),ce>Oe.y&&(ce=Oe.y)}),A.edges().forEach(ke=>{var Oe;(Oe=A.edge(ke).points)===null||Oe===void 0||Oe.forEach(Ie=>{q>Ie.x&&(q=Ie.x),ce>Ie.y&&(ce=Ie.y)})}),z[0]=b[0]-q,z[1]=b[1]-ce}const K=v==="LR"||v==="RL";if(w){const{focusNode:q,ranksep:ce,getRadialPos:ke}=this,Oe=BY(q)?q:q==null?void 0:q.id,ze=Oe?(r=A.node(Oe))===null||r===void 0?void 0:r._rank:0,Ie=[],Pe=K?"y":"x",le=K?"height":"width";let ye=1/0,Me=-1/0;A.nodes().forEach(ge=>{const Se=A.node(ge);if(!s.nodeMap[ge])return;const ht=H(s.nodeMap[ge]);if(ze===0)Ie[Se._rank]||(Ie[Se._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[Se._rank].nodes.push(ge),Ie[Se._rank].totalWidth+=ht*2+Se[le],Ie[Se._rank].maxSize<Math.max(Se.width,Se.height)&&(Ie[Se._rank].maxSize=Math.max(Se.width,Se.height));else{const rn=Se._rank-ze;if(rn===0)Ie[rn]||(Ie[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[rn].nodes.push(ge),Ie[rn].totalWidth+=ht*2+Se[le],Ie[rn].maxSize<Math.max(Se.width,Se.height)&&(Ie[rn].maxSize=Math.max(Se.width,Se.height));else{const yn=Math.abs(rn);Ie[yn]||(Ie[yn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ie[yn].totalWidth+=ht*2+Se[le],Ie[yn].maxSize<Math.max(Se.width,Se.height)&&(Ie[yn].maxSize=Math.max(Se.width,Se.height)),rn<0?Ie[yn].left.push(ge):Ie[yn].right.push(ge)}}const zt=Se[Pe]-Se[le]/2-ht,Ot=Se[Pe]+Se[le]/2+ht;zt<ye&&(ye=zt),Ot>Me&&(Me=Ot)});let We=ce||50;const je={},it=(Me-ye)/.9,bt=[(ye+Me-it)*.5,(ye+Me+it)*.5],Mt=(ge,Se,ht=-1/0,zt=[0,1])=>{let Ot=ht;return ge.forEach(rn=>{const yn=A.node(rn);je[rn]=Se;const{x:Tn,y:pn}=ke(yn[Pe],bt,it,Se,zt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Tn+z[0],s.nodeMap[rn].y=pn+z[1],s.nodeMap[rn]._order=yn._order;const ft=V(s.nodeMap[rn]);Ot<ft&&(Ot=ft)}),Ot};let Yt=!0;const Ce=0;Ie.forEach(ge=>{var Se,ht,zt,Ot,rn,yn,Tn;if(!(!((Se=ge==null?void 0:ge.nodes)===null||Se===void 0)&&Se.length)&&!(!((ht=ge==null?void 0:ge.left)===null||ht===void 0)&&ht.length)&&!(!((zt=ge==null?void 0:ge.right)===null||zt===void 0)&&zt.length))return;if(Yt&&ge.nodes.length===1){const ft=ge.nodes[0];if(!s.nodeMap[ft])return;s.nodeMap[ft].x=z[0],s.nodeMap[ft].y=z[1],je[ge.nodes[0]]=0,We=V(s.nodeMap[ft]),Yt=!1;return}We=Math.max(We,ge.totalWidth/(2*Math.PI));let pn=-1/0;if(ze===0||!((Ot=ge.nodes)===null||Ot===void 0)&&Ot.length)pn=Mt(ge.nodes,We,pn,[0,1]);else{const ft=((rn=ge.left)===null||rn===void 0?void 0:rn.length)/(((yn=ge.left)===null||yn===void 0?void 0:yn.length)+((Tn=ge.right)===null||Tn===void 0?void 0:Tn.length));pn=Mt(ge.left,We,pn,[0,ft]),pn=Mt(ge.right,We,pn,[ft+.05,1])}We+=pn,Yt=!1,Ce-ge.maxSize}),A.edges().forEach(ge=>{var Se,ht,zt;const Ot=A.edge(ge),rn=P.findIndex(yn=>{const Tn=ev(yn,"source"),pn=ev(yn,"target");return Tn===ge.v&&pn===ge.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[rn].type!=="loop"){const yn=Pe==="x"?"y":"x",Tn=(Se=Ot==null?void 0:Ot.points)===null||Se===void 0?void 0:Se.slice(1,Ot.points.length-1),pn=[],ft=(ht=A.node(ge.v))===null||ht===void 0?void 0:ht[yn],xn=ft-((zt=A.node(ge.w))===null||zt===void 0?void 0:zt[yn]),$e=je[ge.v],mn=$e-je[ge.w];Tn==null||Tn.forEach(Kn=>{const ne=(Kn[yn]-ft)/xn*mn+$e,$n=ke(Kn[Pe],bt,it,ne);pn.push({x:$n.x+z[0],y:$n.y+z[1]})}),P[rn].controlPoints=pn}})}else{const q=new Set,ke=v==="BT"||v==="RL"?(Pe,le)=>le-Pe:(Pe,le)=>Pe-le;A.nodes().forEach(Pe=>{const le=A.node(Pe);if(!le)return;let ye=this.nodeMap[Pe];ye||(ye=g==null?void 0:g.find(Me=>Me.id===Pe)),ye&&(ye.x=le.x+z[0],ye.y=le.y+z[1],ye._order=le._order,q.add(K?ye.x:ye.y))});const Oe=Array.from(q).sort(ke),ze=K?(Pe,le)=>Pe.x!==le.x:(Pe,le)=>Pe.y!==le.y,Ie=K?(Pe,le,ye)=>{const Me=Math.max(le.y,ye.y),We=Math.min(le.y,ye.y);return Pe.filter(je=>je.y<=Me&&je.y>=We)}:(Pe,le,ye)=>{const Me=Math.max(le.x,ye.x),We=Math.min(le.x,ye.x);return Pe.filter(je=>je.x<=Me&&je.x>=We)};A.edges().forEach(Pe=>{var le;const ye=A.edge(Pe),Me=P.findIndex(We=>{const je=ev(We,"source"),it=ev(We,"target");return je===Pe.v&&it===Pe.w});if(!(Me<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[Me].type!=="loop"){(le=ye==null?void 0:ye.points)===null||le===void 0||le.forEach(it=>{it.x+=z[0],it.y+=z[1]});const We=s.nodeMap[Pe.v],je=s.nodeMap[Pe.w];P[Me].controlPoints=wZ(ye==null?void 0:ye.points,We,je,Oe,K,ze,Ie)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:P}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const h=c*2*Math.PI;return{x:Math.cos(h)*r,y:Math.sin(h)*r}}getType(){return"dagre"}}const wZ=(e,t,n,o,r,s,c)=>{let h=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:v,y:g}=t,{x:b,y:w}=n;if(r&&(v=t.y,g=t.x,b=n.y,w=n.x),w!==g&&v!==b){const O=o.indexOf(g),S=o[O+1];if(S){const k=h[0],j=r?{x:(g+S)/2,y:(k==null?void 0:k.y)||b}:{x:(k==null?void 0:k.x)||b,y:(g+S)/2};(!k||s(k,j))&&h.unshift(j)}const P=o.indexOf(w),A=Math.abs(P-O);if(A===1)h=c(h,t,n),h.length||h.push(r?{x:(g+w)/2,y:v}:{x:v,y:(g+w)/2});else if(A>1){const k=o[P-1];if(k){const j=h[h.length-1],R=r?{x:(w+k)/2,y:(j==null?void 0:j.y)||b}:{x:(j==null?void 0:j.x)||v,y:(w+k)/2};(!j||s(j,R))&&h.push(R)}}}}return h};var CT,jT,IT,LT;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(CT||(CT={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jT||(jT={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IT||(IT={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LT||(LT={}));var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xE(e,t){return e(t={exports:{}},t.exports),t.exports}var EZ=function(){this.__data__=[],this.size=0},Uv=function(e,t){return e===t||e!=e&&t!=t},Eb=function(e,t){for(var n=e.length;n--;)if(Uv(e[n][0],t))return n;return-1},OZ=Array.prototype.splice,xZ=function(e){var t=this.__data__,n=Eb(t,e);return!(n<0)&&(n==t.length-1?t.pop():OZ.call(t,n,1),--this.size,!0)},SZ=function(e){var t=this.__data__,n=Eb(t,e);return n<0?void 0:t[n][1]},AZ=function(e){return Eb(this.__data__,e)>-1},TZ=function(e,t){var n=this.__data__,o=Eb(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function rv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}rv.prototype.clear=EZ,rv.prototype.delete=xZ,rv.prototype.get=SZ,rv.prototype.has=AZ,rv.prototype.set=TZ;var Ob=rv,MZ=function(){this.__data__=new Ob,this.size=0},PZ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},NZ=function(e){return this.__data__.get(e)},kZ=function(e){return this.__data__.has(e)},PN=typeof fg=="object"&&fg&&fg.Object===Object&&fg,RZ=typeof self=="object"&&self&&self.Object===Object&&self,ws=PN||RZ||Function("return this")(),Uu=ws.Symbol,NN=Object.prototype,DZ=NN.hasOwnProperty,CZ=NN.toString,py=Uu?Uu.toStringTag:void 0,jZ=function(e){var t=DZ.call(e,py),n=e[py];try{e[py]=void 0;var o=!0}catch{}var r=CZ.call(e);return o&&(t?e[py]=n:delete e[py]),r},IZ=Object.prototype.toString,LZ=function(e){return IZ.call(e)},FT=Uu?Uu.toStringTag:void 0,Vd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":FT&&FT in Object(e)?jZ(e):LZ(e)},kl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},$T,nm=function(e){if(!kl(e))return!1;var t=Vd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},U1=ws["__core-js_shared__"],BT=($T=/[^.]+$/.exec(U1&&U1.keys&&U1.keys.IE_PROTO||""))?"Symbol(src)_1."+$T:"",FZ=function(e){return!!BT&&BT in e},$Z=Function.prototype.toString,eh=function(e){if(e!=null){try{return $Z.call(e)}catch{}try{return e+""}catch{}}return""},BZ=/^\[object .+?Constructor\]$/,UZ=Function.prototype,GZ=Object.prototype,VZ=UZ.toString,WZ=GZ.hasOwnProperty,zZ=RegExp("^"+VZ.call(WZ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),HZ=function(e){return!(!kl(e)||FZ(e))&&(nm(e)?zZ:BZ).test(eh(e))},XZ=function(e,t){return e==null?void 0:e[t]},th=function(e,t){var n=XZ(e,t);return HZ(n)?n:void 0},Ly=th(ws,"Map"),Fy=th(Object,"create"),YZ=function(){this.__data__=Fy?Fy(null):{},this.size=0},qZ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},KZ=Object.prototype.hasOwnProperty,ZZ=function(e){var t=this.__data__;if(Fy){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return KZ.call(t,e)?t[e]:void 0},JZ=Object.prototype.hasOwnProperty,QZ=function(e){var t=this.__data__;return Fy?t[e]!==void 0:JZ.call(t,e)},eJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fy&&t===void 0?"__lodash_hash_undefined__":t,this};function ov(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ov.prototype.clear=YZ,ov.prototype.delete=qZ,ov.prototype.get=ZZ,ov.prototype.has=QZ,ov.prototype.set=eJ;var UT=ov,tJ=function(){this.size=0,this.__data__={hash:new UT,map:new(Ly||Ob),string:new UT}},nJ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},xb=function(e,t){var n=e.__data__;return nJ(t)?n[typeof t=="string"?"string":"hash"]:n.map},rJ=function(e){var t=xb(this,e).delete(e);return this.size-=t?1:0,t},oJ=function(e){return xb(this,e).get(e)},iJ=function(e){return xb(this,e).has(e)},aJ=function(e,t){var n=xb(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function iv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}iv.prototype.clear=tJ,iv.prototype.delete=rJ,iv.prototype.get=oJ,iv.prototype.has=iJ,iv.prototype.set=aJ;var Sb=iv,lJ=function(e,t){var n=this.__data__;if(n instanceof Ob){var o=n.__data__;if(!Ly||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sb(o)}return n.set(e,t),this.size=n.size,this};function av(e){var t=this.__data__=new Ob(e);this.size=t.size}av.prototype.clear=MZ,av.prototype.delete=PZ,av.prototype.get=NZ,av.prototype.has=kZ,av.prototype.set=lJ;var mv=av,SE=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},Zg=function(){try{var e=th(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ab=function(e,t,n){t=="__proto__"&&Zg?Zg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},uJ=Object.prototype.hasOwnProperty,Tb=function(e,t,n){var o=e[t];uJ.call(e,t)&&Uv(o,n)&&(n!==void 0||t in e)||Ab(e,t,n)},rm=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var h=t[s],v=o?o(n[h],e[h],h,n,e):void 0;v===void 0&&(v=e[h]),r?Ab(n,h,v):Tb(n,h,v)}return n},sJ=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},bs=function(e){return e!=null&&typeof e=="object"},GT=function(e){return bs(e)&&Vd(e)=="[object Arguments]"},kN=Object.prototype,cJ=kN.hasOwnProperty,fJ=kN.propertyIsEnumerable,Av=GT(function(){return arguments}())?GT:function(e){return bs(e)&&cJ.call(e,"callee")&&!fJ.call(e,"callee")},Si=Array.isArray,dJ=function(){return!1},zp=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=(r?r.isBuffer:void 0)||dJ;e.exports=s}),pJ=/^(?:0|[1-9]\d*)$/,Mb=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&pJ.test(e))&&e>-1&&e%1==0&&e<t},AE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ri={};ri["[object Float32Array]"]=ri["[object Float64Array]"]=ri["[object Int8Array]"]=ri["[object Int16Array]"]=ri["[object Int32Array]"]=ri["[object Uint8Array]"]=ri["[object Uint8ClampedArray]"]=ri["[object Uint16Array]"]=ri["[object Uint32Array]"]=!0,ri["[object Arguments]"]=ri["[object Array]"]=ri["[object ArrayBuffer]"]=ri["[object Boolean]"]=ri["[object DataView]"]=ri["[object Date]"]=ri["[object Error]"]=ri["[object Function]"]=ri["[object Map]"]=ri["[object Number]"]=ri["[object Object]"]=ri["[object RegExp]"]=ri["[object Set]"]=ri["[object String]"]=ri["[object WeakMap]"]=!1;var hJ=function(e){return bs(e)&&AE(e.length)&&!!ri[Vd(e)]},Pb=function(e){return function(t){return e(t)}},Tv=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&PN.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),VT=Tv&&Tv.isTypedArray,om=VT?Pb(VT):hJ,vJ=Object.prototype.hasOwnProperty,RN=function(e,t){var n=Si(e),o=!n&&Av(e),r=!n&&!o&&zp(e),s=!n&&!o&&!r&&om(e),c=n||o||r||s,h=c?sJ(e.length,String):[],v=h.length;for(var g in e)!t&&!vJ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Mb(g,v))||h.push(g);return h},yJ=Object.prototype,Nb=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||yJ)},DN=function(e,t){return function(n){return e(t(n))}},mJ=DN(Object.keys,Object),gJ=Object.prototype.hasOwnProperty,TE=function(e){if(!Nb(e))return mJ(e);var t=[];for(var n in Object(e))gJ.call(e,n)&&n!="constructor"&&t.push(n);return t},kf=function(e){return e!=null&&AE(e.length)&&!nm(e)},Wd=function(e){return kf(e)?RN(e):TE(e)},bJ=function(e,t){return e&&rm(t,Wd(t),e)},_J=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},wJ=Object.prototype.hasOwnProperty,EJ=function(e){if(!kl(e))return _J(e);var t=Nb(e),n=[];for(var o in e)(o!="constructor"||!t&&wJ.call(e,o))&&n.push(o);return n},nh=function(e){return kf(e)?RN(e,!0):EJ(e)},OJ=function(e,t){return e&&rm(t,nh(t),e)},CN=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,h){if(h)return c.slice();var v=c.length,g=s?s(v):new c.constructor(v);return c.copy(g),g}}),jN=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},IN=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},LN=function(){return[]},xJ=Object.prototype.propertyIsEnumerable,WT=Object.getOwnPropertySymbols,ME=WT?function(e){return e==null?[]:(e=Object(e),IN(WT(e),function(t){return xJ.call(e,t)}))}:LN,SJ=function(e,t){return rm(e,ME(e),t)},PE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},kb=DN(Object.getPrototypeOf,Object),FN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)PE(t,ME(e)),e=kb(e);return t}:LN,AJ=function(e,t){return rm(e,FN(e),t)},$N=function(e,t,n){var o=t(e);return Si(e)?o:PE(o,n(e))},Ew=function(e){return $N(e,Wd,ME)},TJ=function(e){return $N(e,nh,FN)},Ow=th(ws,"DataView"),xw=th(ws,"Promise"),gv=th(ws,"Set"),Sw=th(ws,"WeakMap"),MJ=eh(Ow),PJ=eh(Ly),NJ=eh(xw),kJ=eh(gv),RJ=eh(Sw),Bp=Vd;(Ow&&Bp(new Ow(new ArrayBuffer(1)))!="[object DataView]"||Ly&&Bp(new Ly)!="[object Map]"||xw&&Bp(xw.resolve())!="[object Promise]"||gv&&Bp(new gv)!="[object Set]"||Sw&&Bp(new Sw)!="[object WeakMap]")&&(Bp=function(e){var t=Vd(e),n=t=="[object Object]"?e.constructor:void 0,o=n?eh(n):"";if(o)switch(o){case MJ:return"[object DataView]";case PJ:return"[object Map]";case NJ:return"[object Promise]";case kJ:return"[object Set]";case RJ:return"[object WeakMap]"}return t});var Hp=Bp,DJ=Object.prototype.hasOwnProperty,CJ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&DJ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Jg=ws.Uint8Array,NE=function(e){var t=new e.constructor(e.byteLength);return new Jg(t).set(new Jg(e)),t},jJ=function(e,t){var n=t?NE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},IJ=/\w*$/,LJ=function(e){var t=new e.constructor(e.source,IJ.exec(e));return t.lastIndex=e.lastIndex,t},zT=Uu?Uu.prototype:void 0,HT=zT?zT.valueOf:void 0,FJ=function(e){return HT?Object(HT.call(e)):{}},BN=function(e,t){var n=t?NE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},$J=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return NE(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return jJ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return BN(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return LJ(e);case"[object Set]":return new o;case"[object Symbol]":return FJ(e)}},XT=Object.create,UN=function(){function e(){}return function(t){if(!kl(t))return{};if(XT)return XT(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),GN=function(e){return typeof e.constructor!="function"||Nb(e)?{}:UN(kb(e))},BJ=function(e){return bs(e)&&Hp(e)=="[object Map]"},YT=Tv&&Tv.isMap,UJ=YT?Pb(YT):BJ,GJ=function(e){return bs(e)&&Hp(e)=="[object Set]"},qT=Tv&&Tv.isSet,VJ=qT?Pb(qT):GJ,Ho={};Ho["[object Arguments]"]=Ho["[object Array]"]=Ho["[object ArrayBuffer]"]=Ho["[object DataView]"]=Ho["[object Boolean]"]=Ho["[object Date]"]=Ho["[object Float32Array]"]=Ho["[object Float64Array]"]=Ho["[object Int8Array]"]=Ho["[object Int16Array]"]=Ho["[object Int32Array]"]=Ho["[object Map]"]=Ho["[object Number]"]=Ho["[object Object]"]=Ho["[object RegExp]"]=Ho["[object Set]"]=Ho["[object String]"]=Ho["[object Symbol]"]=Ho["[object Uint8Array]"]=Ho["[object Uint8ClampedArray]"]=Ho["[object Uint16Array]"]=Ho["[object Uint32Array]"]=!0,Ho["[object Error]"]=Ho["[object Function]"]=Ho["[object WeakMap]"]=!1;var VN=function e(t,n,o,r,s,c){var h,v=1&n,g=2&n,b=4&n;if(o&&(h=s?o(t,r,s,c):o(t)),h!==void 0)return h;if(!kl(t))return t;var w=Si(t);if(w){if(h=CJ(t),!v)return jN(t,h)}else{var O=Hp(t),S=O=="[object Function]"||O=="[object GeneratorFunction]";if(zp(t))return CN(t,v);if(O=="[object Object]"||O=="[object Arguments]"||S&&!s){if(h=g||S?{}:GN(t),!v)return g?AJ(t,OJ(h,t)):SJ(t,bJ(h,t))}else{if(!Ho[O])return s?t:{};h=$J(t,O,v)}}c||(c=new mv);var P=c.get(t);if(P)return P;c.set(t,h),VJ(t)?t.forEach(function(k){h.add(e(k,n,o,k,t,c))}):UJ(t)&&t.forEach(function(k,j){h.set(j,e(k,n,o,j,t,c))});var A=w?void 0:(b?g?TJ:Ew:g?nh:Wd)(t);return SE(A||t,function(k,j){A&&(k=t[j=k]),Tb(h,j,e(k,n,o,j,t,c))}),h},WJ=function(e){return VN(e,4)},kE=function(e){return function(){return e}},RE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),h=c.length;h--;){var v=c[e?h:++r];if(n(s[v],v,s)===!1)break}return t}}(),DE=function(e,t){return e&&RE(e,t,Wd)},Rb=function(e,t){return function(n,o){if(n==null)return n;if(!kf(n))return e(n,o);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&o(c[s],s,c)!==!1;);return n}}(DE),rh=function(e){return e},WN=function(e){return typeof e=="function"?e:rh},zN=function(e,t){return(Si(e)?SE:Rb)(e,WN(t))},HN=zN,zJ=function(e,t){var n=[];return Rb(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},HJ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},XJ=function(e){return this.__data__.has(e)};function Sg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Sb;++t<n;)this.add(e[t])}Sg.prototype.add=Sg.prototype.push=HJ,Sg.prototype.has=XJ;var XN=Sg,YJ=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},YN=function(e,t){return e.has(t)},qN=function(e,t,n,o,r,s){var c=1&n,h=e.length,v=t.length;if(h!=v&&!(c&&v>h))return!1;var g=s.get(e),b=s.get(t);if(g&&b)return g==t&&b==e;var w=-1,O=!0,S=2&n?new XN:void 0;for(s.set(e,t),s.set(t,e);++w<h;){var P=e[w],A=t[w];if(o)var k=c?o(A,P,w,t,e,s):o(P,A,w,e,t,s);if(k!==void 0){if(k)continue;O=!1;break}if(S){if(!YJ(t,function(j,R){if(!YN(S,R)&&(P===j||r(P,j,n,o,s)))return S.push(R)})){O=!1;break}}else if(P!==A&&!r(P,A,n,o,s)){O=!1;break}}return s.delete(e),s.delete(t),O},qJ=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},CE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},KT=Uu?Uu.prototype:void 0,G1=KT?KT.valueOf:void 0,KJ=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Jg(e),new Jg(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Uv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=qJ;case"[object Set]":var v=1&o;if(h||(h=CE),e.size!=t.size&&!v)return!1;var g=c.get(e);if(g)return g==t;o|=2,c.set(e,t);var b=qN(h(e),h(t),o,r,s,c);return c.delete(e),b;case"[object Symbol]":if(G1)return G1.call(e)==G1.call(t)}return!1},ZJ=Object.prototype.hasOwnProperty,JJ=function(e,t,n,o,r,s){var c=1&n,h=Ew(e),v=h.length;if(v!=Ew(t).length&&!c)return!1;for(var g=v;g--;){var b=h[g];if(!(c?b in t:ZJ.call(t,b)))return!1}var w=s.get(e),O=s.get(t);if(w&&O)return w==t&&O==e;var S=!0;s.set(e,t),s.set(t,e);for(var P=c;++g<v;){var A=e[b=h[g]],k=t[b];if(o)var j=c?o(k,A,b,t,e,s):o(A,k,b,e,t,s);if(!(j===void 0?A===k||r(A,k,n,o,s):j)){S=!1;break}P||(P=b=="constructor")}if(S&&!P){var R=e.constructor,$=t.constructor;R==$||!("constructor"in e)||!("constructor"in t)||typeof R=="function"&&R instanceof R&&typeof $=="function"&&$ instanceof $||(S=!1)}return s.delete(e),s.delete(t),S},ZT=Object.prototype.hasOwnProperty,QJ=function(e,t,n,o,r,s){var c=Si(e),h=Si(t),v=c?"[object Array]":Hp(e),g=h?"[object Array]":Hp(t),b=(v=v=="[object Arguments]"?"[object Object]":v)=="[object Object]",w=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=v==g;if(O&&zp(e)){if(!zp(t))return!1;c=!0,b=!1}if(O&&!b)return s||(s=new mv),c||om(e)?qN(e,t,n,o,r,s):KJ(e,t,v,n,o,r,s);if(!(1&n)){var S=b&&ZT.call(e,"__wrapped__"),P=w&&ZT.call(t,"__wrapped__");if(S||P){var A=S?e.value():e,k=P?t.value():t;return s||(s=new mv),r(A,k,n,o,s)}}return!!O&&(s||(s=new mv),JJ(e,t,n,o,r,s))},KN=function e(t,n,o,r,s){return t===n||(t==null||n==null||!bs(t)&&!bs(n)?t!=t&&n!=n:QJ(t,n,o,r,e,s))},eQ=function(e,t,n,o){var r=n.length,s=r,c=!o;if(e==null)return!s;for(e=Object(e);r--;){var h=n[r];if(c&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++r<s;){var v=(h=n[r])[0],g=e[v],b=h[1];if(c&&h[2]){if(g===void 0&&!(v in e))return!1}else{var w=new mv;if(o)var O=o(g,b,v,e,t,w);if(!(O===void 0?KN(b,g,3,o,w):O))return!1}}return!0},ZN=function(e){return e==e&&!kl(e)},tQ=function(e){for(var t=Wd(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,ZN(r)]}return t},JN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},nQ=function(e){var t=tQ(e);return t.length==1&&t[0][2]?JN(t[0][0],t[0][1]):function(n){return n===e||eQ(n,e,t)}},Xp=function(e){return typeof e=="symbol"||bs(e)&&Vd(e)=="[object Symbol]"},rQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oQ=/^\w*$/,jE=function(e,t){if(Si(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Xp(e))||oQ.test(e)||!rQ.test(e)||t!=null&&e in Object(t)};function IE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new(IE.Cache||Sb),n}IE.Cache=Sb;var iQ=IE,aQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lQ=/\\(\\)?/g,uQ=function(e){var t=iQ(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(aQ,function(n,o,r,s){t.push(r?s.replace(lQ,"$1"):o||n)}),t}),bv=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},JT=Uu?Uu.prototype:void 0,QT=JT?JT.toString:void 0,sQ=function e(t){if(typeof t=="string")return t;if(Si(t))return bv(t,e)+"";if(Xp(t))return QT?QT.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},QN=function(e){return e==null?"":sQ(e)},Db=function(e,t){return Si(e)?e:jE(e,t)?[e]:uQ(QN(e))},im=function(e){if(typeof e=="string"||Xp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Cb=function(e,t){for(var n=0,o=(t=Db(t,e)).length;e!=null&&n<o;)e=e[im(t[n++])];return n&&n==o?e:void 0},cQ=function(e,t,n){var o=e==null?void 0:Cb(e,t);return o===void 0?n:o},fQ=function(e,t){return e!=null&&t in Object(e)},ek=function(e,t,n){for(var o=-1,r=(t=Db(t,e)).length,s=!1;++o<r;){var c=im(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&AE(r)&&Mb(c,r)&&(Si(e)||Av(e))},tk=function(e,t){return e!=null&&ek(e,t,fQ)},dQ=function(e,t){return jE(e)&&ZN(t)?JN(im(e),t):function(n){var o=cQ(n,e);return o===void 0&&o===t?tk(n,e):KN(t,o,3)}},nk=function(e){return function(t){return t==null?void 0:t[e]}},pQ=function(e){return function(t){return Cb(t,e)}},hQ=function(e){return jE(e)?nk(im(e)):pQ(e)},Rf=function(e){return typeof e=="function"?e:e==null?rh:typeof e=="object"?Si(e)?dQ(e[0],e[1]):nQ(e):hQ(e)},rk=function(e,t){return(Si(e)?IN:zJ)(e,Rf(t))},vQ=Object.prototype.hasOwnProperty,yQ=function(e,t){return e!=null&&vQ.call(e,t)},ok=function(e,t){return e!=null&&ek(e,t,yQ)},mQ=Object.prototype.hasOwnProperty,gQ=function(e){if(e==null)return!0;if(kf(e)&&(Si(e)||typeof e=="string"||typeof e.splice=="function"||zp(e)||om(e)||Av(e)))return!e.length;var t=Hp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Nb(e))return!TE(e).length;for(var n in e)if(mQ.call(e,n))return!1;return!0},ik=function(e){return e===void 0},ak=function(e,t){var n=-1,o=kf(e)?Array(e.length):[];return Rb(e,function(r,s,c){o[++n]=t(r,s,c)}),o},lk=function(e,t){return(Si(e)?bv:ak)(e,Rf(t))},bQ=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},_Q=function(e,t,n,o,r){return r(e,function(s,c,h){n=o?(o=!1,s):t(n,s,c,h)}),n},uk=function(e,t,n){var o=Si(e)?bQ:_Q,r=arguments.length<3;return o(e,Rf(t),n,r,Rb)},wQ=function(e){return typeof e=="string"||!Si(e)&&bs(e)&&Vd(e)=="[object String]"},EQ=nk("length"),OQ=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),xQ=function(e){return OQ.test(e)},SQ="[\\ud800-\\udfff]",Aw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Tw="\\ud83c[\\udffb-\\udfff]",sk="[^\\ud800-\\udfff]",ck="(?:\\ud83c[\\udde6-\\uddff]){2}",fk="[\\ud800-\\udbff][\\udc00-\\udfff]",eM="(?:"+Aw+"|"+Tw+")?",AQ="[\\ufe0e\\ufe0f]?"+eM+("(?:\\u200d(?:"+[sk,ck,fk].join("|")+")[\\ufe0e\\ufe0f]?"+eM+")*"),TQ="(?:"+[sk+Aw+"?",Aw,ck,fk,SQ].join("|")+")",tM=RegExp(Tw+"(?="+Tw+")|"+TQ+AQ,"g"),MQ=function(e){for(var t=tM.lastIndex=0;tM.test(e);)++t;return t},PQ=function(e){return xQ(e)?MQ(e):EQ(e)},NQ=function(e){if(e==null)return 0;if(kf(e))return wQ(e)?PQ(e):e.length;var t=Hp(e);return t=="[object Map]"||t=="[object Set]"?e.size:TE(e).length},kQ=function(e,t,n){var o=Si(e),r=o||zp(e)||om(e);if(t=Rf(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:kl(e)&&nm(s)?UN(kb(e)):{}}return(r?SE:DE)(e,function(c,h,v){return t(n,c,h,v)}),n},nM=Uu?Uu.isConcatSpreadable:void 0,RQ=function(e){return Si(e)||Av(e)||!!(nM&&e&&e[nM])},LE=function e(t,n,o,r,s){var c=-1,h=t.length;for(o||(o=RQ),s||(s=[]);++c<h;){var v=t[c];n>0&&o(v)?n>1?e(v,n-1,o,r,s):PE(s,v):r||(s[s.length]=v)}return s},DQ=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rM=Math.max,dk=function(e,t,n){return t=rM(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=rM(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var h=Array(t+1);++r<t;)h[r]=o[r];return h[t]=n(c),DQ(e,this,h)}},CQ=Zg?function(e,t){return Zg(e,"toString",{configurable:!0,enumerable:!1,value:kE(t),writable:!0})}:rh,jQ=Date.now,pk=function(e){var t=0,n=0;return function(){var o=jQ(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(CQ),jb=function(e,t){return pk(dk(e,t,rh),e+"")},hk=function(e,t,n,o){for(var r=e.length,s=n+(o?1:-1);o?s--:++s<r;)if(t(e[s],s,e))return s;return-1},IQ=function(e){return e!=e},LQ=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},FQ=function(e,t,n){return t==t?LQ(e,t,n):hk(e,IQ,n)},$Q=function(e,t){return!!(e!=null&&e.length)&&FQ(e,t,0)>-1},BQ=function(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1},UQ=function(){},GQ=gv&&1/CE(new gv([,-0]))[1]==1/0?function(e){return new gv(e)}:UQ,VQ=function(e,t,n){var o=-1,r=$Q,s=e.length,c=!0,h=[],v=h;if(n)c=!1,r=BQ;else if(s>=200){var g=t?null:GQ(e);if(g)return CE(g);c=!1,r=YN,v=new XN}else v=t?[]:h;e:for(;++o<s;){var b=e[o],w=t?t(b):b;if(b=n||b!==0?b:0,c&&w==w){for(var O=v.length;O--;)if(v[O]===w)continue e;t&&v.push(w),h.push(b)}else r(v,w,n)||(v!==h&&v.push(w),h.push(b))}return h},vk=function(e){return bs(e)&&kf(e)},WQ=jb(function(e){return VQ(LE(e,1,vk,!0))}),zQ=function(e,t){return bv(t,function(n){return e[n]})},Qg,yk=function(e){return e==null?[]:zQ(e,Wd(e))};try{Qg={clone:WJ,constant:kE,each:HN,filter:rk,has:ok,isArray:Si,isEmpty:gQ,isFunction:nm,isUndefined:ik,keys:Wd,map:lk,reduce:uk,size:NQ,transform:kQ,union:WQ,values:yk}}catch{}Qg||(Qg=window._);var En=Qg,FE=Br;function Br(e){this._isDirected=!En.has(e,"directed")||e.directed,this._isMultigraph=!!En.has(e,"multigraph")&&e.multigraph,this._isCompound=!!En.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=En.constant(void 0),this._defaultEdgeLabelFn=En.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oM(e,t){e[t]?e[t]++:e[t]=1}function iM(e,t){--e[t]||delete e[t]}function wy(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(En.isUndefined(o)?"\0":o)}function HQ(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var h={v:r,w:s};return o&&(h.name=o),h}function V1(e,t){return wy(e,t.v,t.w,t.name)}Br.prototype._nodeCount=0,Br.prototype._edgeCount=0,Br.prototype.isDirected=function(){return this._isDirected},Br.prototype.isMultigraph=function(){return this._isMultigraph},Br.prototype.isCompound=function(){return this._isCompound},Br.prototype.setGraph=function(e){return this._label=e,this},Br.prototype.graph=function(){return this._label},Br.prototype.setDefaultNodeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultNodeLabelFn=e,this},Br.prototype.nodeCount=function(){return this._nodeCount},Br.prototype.nodes=function(){return En.keys(this._nodes)},Br.prototype.sources=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._in[t])})},Br.prototype.sinks=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._out[t])})},Br.prototype.setNodes=function(e,t){var n=arguments,o=this;return En.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Br.prototype.setNode=function(e,t){return En.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Br.prototype.node=function(e){return this._nodes[e]},Br.prototype.hasNode=function(e){return En.has(this._nodes,e)},Br.prototype.removeNode=function(e){var t=this;if(En.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],En.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),En.each(En.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],En.each(En.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Br.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(En.isUndefined(t))t="\0";else{for(var n=t+="";!En.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Br.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Br.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Br.prototype.children=function(e){if(En.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return En.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Br.prototype.predecessors=function(e){var t=this._preds[e];if(t)return En.keys(t)},Br.prototype.successors=function(e){var t=this._sucs[e];if(t)return En.keys(t)},Br.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return En.union(t,this.successors(e))},Br.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Br.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;En.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),En.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&En.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Br.prototype.setDefaultEdgeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultEdgeLabelFn=e,this},Br.prototype.edgeCount=function(){return this._edgeCount},Br.prototype.edges=function(){return En.values(this._edgeObjs)},Br.prototype.setPath=function(e,t){var n=this,o=arguments;return En.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Br.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,En.isUndefined(n)||(n=""+n);var c=wy(this._isDirected,e,t,n);if(En.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!En.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var h=HQ(this._isDirected,e,t,n);return e=h.v,t=h.w,Object.freeze(h),this._edgeObjs[c]=h,oM(this._preds[t],e),oM(this._sucs[e],t),this._in[t][c]=h,this._out[e][c]=h,this._edgeCount++,this},Br.prototype.edge=function(e,t,n){var o=arguments.length===1?V1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n);return this._edgeLabels[o]},Br.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?V1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n);return En.has(this._edgeLabels,o)},Br.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?V1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],iM(this._preds[t],e),iM(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Br.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.v===t}):o}},Br.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.w===t}):o}},Br.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aM={Graph:FE,version:"2.1.8"},XQ={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:YQ(e),edges:qQ(e)};return En.isUndefined(e.graph())||(t.value=En.clone(e.graph())),t},read:function(e){var t=new FE(e.options).setGraph(e.value);return En.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),En.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function YQ(e){return En.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return En.isUndefined(n)||(r.value=n),En.isUndefined(o)||(r.parent=o),r})}function qQ(e){return En.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return En.isUndefined(t.name)||(o.name=t.name),En.isUndefined(n)||(o.value=n),o})}var KQ=function(e){var t,n={},o=[];function r(s){En.has(n,s)||(n[s]=!0,t.push(s),En.each(e.successors(s),r),En.each(e.predecessors(s),r))}return En.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},mk=Cu;function Cu(){this._arr=[],this._keyIndices={}}Cu.prototype.size=function(){return this._arr.length},Cu.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Cu.prototype.has=function(e){return En.has(this._keyIndices,e)},Cu.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Cu.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Cu.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!En.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},Cu.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Cu.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Cu.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Cu.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},Cu.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var gk=function(e,t,n,o){return function(r,s,c,h){var v,g,b={},w=new mk,O=function(S){var P=S.v!==v?S.v:S.w,A=b[P],k=c(S),j=g.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+k);j<A.distance&&(A.distance=j,A.predecessor=v,w.decrease(P,j))};for(r.nodes().forEach(function(S){var P=S===s?0:Number.POSITIVE_INFINITY;b[S]={distance:P},w.add(S,P)});w.size()>0&&(v=w.removeMin(),(g=b[v]).distance!==Number.POSITIVE_INFINITY);)h(v).forEach(O);return b}(e,String(t),n||ZQ,o||function(r){return e.outEdges(r)})},ZQ=En.constant(1),JQ=function(e,t,n){return En.transform(e.nodes(),function(o,r){o[r]=gk(e,r,t,n)},{})},bk=function(e){var t=0,n=[],o={},r=[];function s(c){var h=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){En.has(o,b)?o[b].onStack&&(h.lowlink=Math.min(h.lowlink,o[b].index)):(s(b),h.lowlink=Math.min(h.lowlink,o[b].lowlink))}),h.lowlink===h.index){var v,g=[];do v=n.pop(),o[v].onStack=!1,g.push(v);while(c!==v);r.push(g)}}return e.nodes().forEach(function(c){En.has(o,c)||s(c)}),r},QQ=function(e){return En.filter(bk(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},eee=function(e,t,n){return function(o,r,s){var c={},h=o.nodes();return h.forEach(function(v){c[v]={},c[v][v]={distance:0},h.forEach(function(g){v!==g&&(c[v][g]={distance:Number.POSITIVE_INFINITY})}),s(v).forEach(function(g){var b=g.v===v?g.w:g.v,w=r(g);c[v][b]={distance:w,predecessor:v}})}),h.forEach(function(v){var g=c[v];h.forEach(function(b){var w=c[b];h.forEach(function(O){var S=w[v],P=g[O],A=w[O],k=S.distance+P.distance;k<A.distance&&(A.distance=k,A.predecessor=P.predecessor)})})}),c}(e,t||tee,n||function(o){return e.outEdges(o)})},tee=En.constant(1),W1=_k;function _k(e){var t={},n={},o=[];if(En.each(e.sinks(),function r(s){if(En.has(n,s))throw new eb;En.has(t,s)||(n[s]=!0,t[s]=!0,En.each(e.predecessors(s),r),delete n[s],o.push(s))}),En.size(t)!==e.nodeCount())throw new eb;return o}function eb(){}_k.CycleException=eb,eb.prototype=new Error;var lM=function(e,t,n){En.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return En.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);wk(e,c,n==="post",s,o,r)}),r};function wk(e,t,n,o,r,s){En.has(o,t)||(o[t]=!0,n||s.push(t),En.each(r(t),function(c){wk(e,c,n,o,r,s)}),n&&s.push(t))}var tb,nee={Graph:aM.Graph,json:XQ,alg:{components:KQ,dijkstra:gk,dijkstraAll:JQ,findCycles:QQ,floydWarshall:eee,isAcyclic:function(e){try{W1(e)}catch(t){if(t instanceof W1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lM(e,t,"post")},preorder:function(e,t){return lM(e,t,"pre")},prim:function(e,t){var n,o=new FE,r={},s=new mk;function c(v){var g=v.v===n?v.w:v.v,b=s.priority(g);if(b!==void 0){var w=t(v);w<b&&(r[g]=n,s.decrease(g,w))}}if(e.nodeCount()===0)return o;En.each(e.nodes(),function(v){s.add(v,Number.POSITIVE_INFINITY),o.setNode(v)}),s.decrease(e.nodes()[0],0);for(var h=!1;s.size()>0;){if(n=s.removeMin(),En.has(r,n))o.setEdge(n,r[n]);else{if(h)throw new Error("Input graph is not connected: "+e);h=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:bk,topsort:W1},version:aM.version};try{tb=nee}catch{}tb||(tb=window.graphlib);var yc=tb,ree=function(e){return VN(e,5)},$y=function(e,t,n){if(!kl(n))return!1;var o=typeof t;return!!(o=="number"?kf(n)&&Mb(t,n.length):o=="string"&&t in n)&&Uv(n[t],e)},Ek=Object.prototype,oee=Ek.hasOwnProperty,iee=jb(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&$y(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=nh(s),h=-1,v=c.length;++h<v;){var g=c[h],b=e[g];(b===void 0||Uv(b,Ek[g])&&!oee.call(e,g))&&(e[g]=s[g])}return e}),aee=function(e){return function(t,n,o){var r=Object(t);if(!kf(t)){var s=Rf(n);t=Wd(t),n=function(h){return s(r[h],h,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},lee=/^\s+|\s+$/g,uee=/^[-+]0x[0-9a-f]+$/i,see=/^0b[01]+$/i,cee=/^0o[0-7]+$/i,fee=parseInt,dee=function(e){if(typeof e=="number")return e;if(Xp(e))return NaN;if(kl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=kl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(lee,"");var n=see.test(e);return n||cee.test(e)?fee(e.slice(2),n?2:8):uee.test(e)?NaN:+e},Ag=function(e){return e?(e=dee(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},pee=function(e){var t=Ag(e),n=t%1;return t==t?n?t-n:t:0},hee=Math.max,vee=aee(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:pee(n);return r<0&&(r=hee(o+r,0)),hk(e,Rf(t),r)}),Ok=function(e){return e!=null&&e.length?LE(e,1):[]},yee=function(e,t){return e==null?e:RE(e,WN(t),nh)},mee=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},gee=function(e,t){var n={};return t=Rf(t),DE(e,function(o,r,s){Ab(n,r,t(o,r,s))}),n},$E=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(h===void 0?c==c&&!Xp(c):n(c,h)))var h=c,v=s}return v},bee=function(e,t){return e>t},_ee=function(e){return e&&e.length?$E(e,rh,bee):void 0},Mw=function(e,t,n){(n!==void 0&&!Uv(e[t],n)||n===void 0&&!(t in e))&&Ab(e,t,n)},wee=Function.prototype,Eee=Object.prototype,xk=wee.toString,Oee=Eee.hasOwnProperty,xee=xk.call(Object),See=function(e){if(!bs(e)||Vd(e)!="[object Object]")return!1;var t=kb(e);if(t===null)return!0;var n=Oee.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&xk.call(n)==xee},Pw=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Aee=function(e){return rm(e,nh(e))},Tee=function(e,t,n,o,r,s,c){var h=Pw(e,n),v=Pw(t,n),g=c.get(v);if(g)Mw(e,n,g);else{var b=s?s(h,v,n+"",e,t,c):void 0,w=b===void 0;if(w){var O=Si(v),S=!O&&zp(v),P=!O&&!S&&om(v);b=v,O||S||P?Si(h)?b=h:vk(h)?b=jN(h):S?(w=!1,b=CN(v,!0)):P?(w=!1,b=BN(v,!0)):b=[]:See(v)||Av(v)?(b=h,Av(h)?b=Aee(h):kl(h)&&!nm(h)||(b=GN(v))):w=!1}w&&(c.set(v,b),r(b,v,o,s,c),c.delete(v)),Mw(e,n,b)}},Mee=function e(t,n,o,r,s){t!==n&&RE(n,function(c,h){if(s||(s=new mv),kl(c))Tee(t,n,h,o,e,r,s);else{var v=r?r(Pw(t,h),c,h+"",t,n,s):void 0;v===void 0&&(v=c),Mw(t,h,v)}},nh)},Pee=function(e){return jb(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&$y(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var h=n[o];h&&e(t,h,o,s)}return t})}(function(e,t,n){Mee(e,t,n)}),Sk=function(e,t){return e<t},Nee=function(e){return e&&e.length?$E(e,rh,Sk):void 0},kee=function(e,t){return e&&e.length?$E(e,Rf(t),Sk):void 0},Ree=function(){return ws.Date.now()},Dee=function(e,t,n,o){if(!kl(e))return e;for(var r=-1,s=(t=Db(t,e)).length,c=s-1,h=e;h!=null&&++r<s;){var v=im(t[r]),g=n;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(r!=c){var b=h[v];(g=o?o(b,v,h):void 0)===void 0&&(g=kl(b)?b:Mb(t[r+1])?[]:{})}Tb(h,v,g),h=h[v]}return e},Cee=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],h=Cb(e,c);n(h,c)&&Dee(s,Db(c,e),h)}return s},jee=function(e,t){return Cee(e,t,function(n,o){return tk(e,o)})},Iee=function(e){return pk(dk(e,void 0,Ok),e+"")}(function(e,t){return e==null?{}:jee(e,t)}),Lee=Math.ceil,Fee=Math.max,$ee=function(e,t,n,o){for(var r=-1,s=Fee(Lee((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++r]=e,e+=n;return c},Bee=function(e){return function(t,n,o){return o&&typeof o!="number"&&$y(t,n,o)&&(n=o=void 0),t=Ag(t),n===void 0?(n=t,t=0):n=Ag(n),o=o===void 0?t<n?1:-1:Ag(o),$ee(t,n,o,e)}}(),Uee=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Gee=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=Xp(e),c=t!==void 0,h=t===null,v=t==t,g=Xp(t);if(!h&&!g&&!s&&e>t||s&&c&&v&&!h&&!g||o&&c&&v||!n&&v||!r)return 1;if(!o&&!s&&!g&&e<t||g&&n&&r&&!o&&!s||h&&n&&r||!c&&r||!v)return-1}return 0},Vee=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,h=n.length;++o<c;){var v=Gee(r[o],s[o]);if(v)return o>=h?v:v*(n[o]=="desc"?-1:1)}return e.index-t.index},Wee=function(e,t,n){t=t.length?bv(t,function(s){return Si(s)?function(c){return Cb(c,s.length===1?s[0]:s)}:s}):[rh];var o=-1;t=bv(t,Pb(Rf));var r=ak(e,function(s,c,h){return{criteria:bv(t,function(v){return v(s)}),index:++o,value:s}});return Uee(r,function(s,c){return Vee(s,c,n)})},zee=jb(function(e,t){if(e==null)return[];var n=t.length;return n>1&&$y(e,t[0],t[1])?t=[]:n>2&&$y(t[0],t[1],t[2])&&(t=[t[0]]),Wee(e,LE(t,1),[])}),Hee=0,Xee=function(e){var t=++Hee;return QN(e)+t},Yee=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var h=o<s?t[o]:void 0;n(c,e[o],h)}return c},nb,qee=function(e,t){return Yee(e||[],t||[],Tb)};try{nb={cloneDeep:ree,constant:kE,defaults:iee,each:HN,filter:rk,find:vee,flatten:Ok,forEach:zN,forIn:yee,has:ok,isUndefined:ik,last:mee,map:lk,mapValues:gee,max:_ee,merge:Pee,min:Nee,minBy:kee,now:Ree,pick:Iee,range:Bee,reduce:uk,sortBy:zee,uniqueId:Xee,values:yk,zipObject:qee}}catch{}nb||(nb=window._);var Kee=nb;yc.Graph;Kee.constant(1);yc.Graph;yc.Graph;yc.alg.preorder;yc.alg.postorder;yc.Graph;yc.Graph;yc.Graph;yc.Graph;yc.Graph;function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}function Zee(e,t){if(By(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(By(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jee(e){var t=Zee(e,"string");return By(t)=="symbol"?t:t+""}function an(e,t,n){return(t=Jee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qee=typeof my=="object"&&my&&my.Object===Object&&my,Ak=Qee,ete=Ak,tte=typeof self=="object"&&self&&self.Object===Object&&self,nte=ete||tte||Function("return this")(),rte=nte,ote=rte,ite=ote.Symbol,Tk=ite,uM=Tk;uM&&uM.toStringTag;var sM=Tk;sM&&sM.toStringTag;var rb={exports:{}};rb.exports;(function(e,t){var n=Ak,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,h=function(){try{var v=r&&r.require&&r.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();e.exports=h})(rb,rb.exports);var ate=rb.exports,cM=ate;cM&&cM.isTypedArray;var Mk={exports:{}},Pk={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Pk);var lte=Pk.exports;(function(e){var t=lte.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var o,r={},s=Object.prototype,c=s.hasOwnProperty,h=Object.defineProperty||function(le,ye,Me){le[ye]=Me.value},v=typeof Symbol=="function"?Symbol:{},g=v.iterator||"@@iterator",b=v.asyncIterator||"@@asyncIterator",w=v.toStringTag||"@@toStringTag";function O(le,ye,Me){return Object.defineProperty(le,ye,{value:Me,enumerable:!0,configurable:!0,writable:!0}),le[ye]}try{O({},"")}catch{O=function(Me,We,je){return Me[We]=je}}function S(le,ye,Me,We){var je=ye&&ye.prototype instanceof V?ye:V,it=Object.create(je.prototype),bt=new Ie(We||[]);return h(it,"_invoke",{value:ce(le,Me,bt)}),it}function P(le,ye,Me){try{return{type:"normal",arg:le.call(ye,Me)}}catch(We){return{type:"throw",arg:We}}}r.wrap=S;var A="suspendedStart",k="suspendedYield",j="executing",R="completed",$={};function V(){}function H(){}function Y(){}var Q={};O(Q,g,function(){return this});var W=Object.getPrototypeOf,I=W&&W(W(Pe([])));I&&I!==s&&c.call(I,g)&&(Q=I);var z=Y.prototype=V.prototype=Object.create(Q);function K(le){["next","throw","return"].forEach(function(ye){O(le,ye,function(Me){return this._invoke(ye,Me)})})}function q(le,ye){function Me(je,it,bt,Mt){var Yt=P(le[je],le,it);if(Yt.type!=="throw"){var Ce=Yt.arg,ge=Ce.value;return ge&&t(ge)=="object"&&c.call(ge,"__await")?ye.resolve(ge.__await).then(function(Se){Me("next",Se,bt,Mt)},function(Se){Me("throw",Se,bt,Mt)}):ye.resolve(ge).then(function(Se){Ce.value=Se,bt(Ce)},function(Se){return Me("throw",Se,bt,Mt)})}Mt(Yt.arg)}var We;h(this,"_invoke",{value:function(it,bt){function Mt(){return new ye(function(Yt,Ce){Me(it,bt,Yt,Ce)})}return We=We?We.then(Mt,Mt):Mt()}})}function ce(le,ye,Me){var We=A;return function(je,it){if(We===j)throw Error("Generator is already running");if(We===R){if(je==="throw")throw it;return{value:o,done:!0}}for(Me.method=je,Me.arg=it;;){var bt=Me.delegate;if(bt){var Mt=ke(bt,Me);if(Mt){if(Mt===$)continue;return Mt}}if(Me.method==="next")Me.sent=Me._sent=Me.arg;else if(Me.method==="throw"){if(We===A)throw We=R,Me.arg;Me.dispatchException(Me.arg)}else Me.method==="return"&&Me.abrupt("return",Me.arg);We=j;var Yt=P(le,ye,Me);if(Yt.type==="normal"){if(We=Me.done?R:k,Yt.arg===$)continue;return{value:Yt.arg,done:Me.done}}Yt.type==="throw"&&(We=R,Me.method="throw",Me.arg=Yt.arg)}}}function ke(le,ye){var Me=ye.method,We=le.iterator[Me];if(We===o)return ye.delegate=null,Me==="throw"&&le.iterator.return&&(ye.method="return",ye.arg=o,ke(le,ye),ye.method==="throw")||Me!=="return"&&(ye.method="throw",ye.arg=new TypeError("The iterator does not provide a '"+Me+"' method")),$;var je=P(We,le.iterator,ye.arg);if(je.type==="throw")return ye.method="throw",ye.arg=je.arg,ye.delegate=null,$;var it=je.arg;return it?it.done?(ye[le.resultName]=it.value,ye.next=le.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=o),ye.delegate=null,$):it:(ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,$)}function Oe(le){var ye={tryLoc:le[0]};1 in le&&(ye.catchLoc=le[1]),2 in le&&(ye.finallyLoc=le[2],ye.afterLoc=le[3]),this.tryEntries.push(ye)}function ze(le){var ye=le.completion||{};ye.type="normal",delete ye.arg,le.completion=ye}function Ie(le){this.tryEntries=[{tryLoc:"root"}],le.forEach(Oe,this),this.reset(!0)}function Pe(le){if(le||le===""){var ye=le[g];if(ye)return ye.call(le);if(typeof le.next=="function")return le;if(!isNaN(le.length)){var Me=-1,We=function je(){for(;++Me<le.length;)if(c.call(le,Me))return je.value=le[Me],je.done=!1,je;return je.value=o,je.done=!0,je};return We.next=We}}throw new TypeError(t(le)+" is not iterable")}return H.prototype=Y,h(z,"constructor",{value:Y,configurable:!0}),h(Y,"constructor",{value:H,configurable:!0}),H.displayName=O(Y,w,"GeneratorFunction"),r.isGeneratorFunction=function(le){var ye=typeof le=="function"&&le.constructor;return!!ye&&(ye===H||(ye.displayName||ye.name)==="GeneratorFunction")},r.mark=function(le){return Object.setPrototypeOf?Object.setPrototypeOf(le,Y):(le.__proto__=Y,O(le,w,"GeneratorFunction")),le.prototype=Object.create(z),le},r.awrap=function(le){return{__await:le}},K(q.prototype),O(q.prototype,b,function(){return this}),r.AsyncIterator=q,r.async=function(le,ye,Me,We,je){je===void 0&&(je=Promise);var it=new q(S(le,ye,Me,We),je);return r.isGeneratorFunction(ye)?it:it.next().then(function(bt){return bt.done?bt.value:it.next()})},K(z),O(z,w,"Generator"),O(z,g,function(){return this}),O(z,"toString",function(){return"[object Generator]"}),r.keys=function(le){var ye=Object(le),Me=[];for(var We in ye)Me.push(We);return Me.reverse(),function je(){for(;Me.length;){var it=Me.pop();if(it in ye)return je.value=it,je.done=!1,je}return je.done=!0,je}},r.values=Pe,Ie.prototype={constructor:Ie,reset:function(ye){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(ze),!ye)for(var Me in this)Me.charAt(0)==="t"&&c.call(this,Me)&&!isNaN(+Me.slice(1))&&(this[Me]=o)},stop:function(){this.done=!0;var ye=this.tryEntries[0].completion;if(ye.type==="throw")throw ye.arg;return this.rval},dispatchException:function(ye){if(this.done)throw ye;var Me=this;function We(Ce,ge){return bt.type="throw",bt.arg=ye,Me.next=Ce,ge&&(Me.method="next",Me.arg=o),!!ge}for(var je=this.tryEntries.length-1;je>=0;--je){var it=this.tryEntries[je],bt=it.completion;if(it.tryLoc==="root")return We("end");if(it.tryLoc<=this.prev){var Mt=c.call(it,"catchLoc"),Yt=c.call(it,"finallyLoc");if(Mt&&Yt){if(this.prev<it.catchLoc)return We(it.catchLoc,!0);if(this.prev<it.finallyLoc)return We(it.finallyLoc)}else if(Mt){if(this.prev<it.catchLoc)return We(it.catchLoc,!0)}else{if(!Yt)throw Error("try statement without catch or finally");if(this.prev<it.finallyLoc)return We(it.finallyLoc)}}}},abrupt:function(ye,Me){for(var We=this.tryEntries.length-1;We>=0;--We){var je=this.tryEntries[We];if(je.tryLoc<=this.prev&&c.call(je,"finallyLoc")&&this.prev<je.finallyLoc){var it=je;break}}it&&(ye==="break"||ye==="continue")&&it.tryLoc<=Me&&Me<=it.finallyLoc&&(it=null);var bt=it?it.completion:{};return bt.type=ye,bt.arg=Me,it?(this.method="next",this.next=it.finallyLoc,$):this.complete(bt)},complete:function(ye,Me){if(ye.type==="throw")throw ye.arg;return ye.type==="break"||ye.type==="continue"?this.next=ye.arg:ye.type==="return"?(this.rval=this.arg=ye.arg,this.method="return",this.next="end"):ye.type==="normal"&&Me&&(this.next=Me),$},finish:function(ye){for(var Me=this.tryEntries.length-1;Me>=0;--Me){var We=this.tryEntries[Me];if(We.finallyLoc===ye)return this.complete(We.completion,We.afterLoc),ze(We),$}},catch:function(ye){for(var Me=this.tryEntries.length-1;Me>=0;--Me){var We=this.tryEntries[Me];if(We.tryLoc===ye){var je=We.completion;if(je.type==="throw"){var it=je.arg;ze(We)}return it}}throw Error("illegal catch attempt")},delegateYield:function(ye,Me,We){return this.delegate={iterator:Pe(ye),resultName:Me,nextLoc:We},this.method==="next"&&(this.arg=o),$}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Mk);var ute=Mk.exports,z1=ute();try{regeneratorRuntime=z1}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=z1:Function("r","regeneratorRuntime = r")(z1)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var fM;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(fM||(fM={}));var dM;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(dM||(dM={}));var pM;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(pM||(pM={}));var hM;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(hM||(hM={}));var ste={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(my,function(){var n=function(F){return F instanceof Uint8Array||F instanceof Uint16Array||F instanceof Uint32Array||F instanceof Int8Array||F instanceof Int16Array||F instanceof Int32Array||F instanceof Float32Array||F instanceof Float64Array||F instanceof Uint8ClampedArray},o=function(F,ie){for(var be=Object.keys(ie),nt=0;nt<be.length;++nt)F[be[nt]]=ie[be[nt]];return F},r=`
`;function s(F){return typeof atob<"u"?atob(F):"base64:"+F}function c(F){var ie=new Error("(regl) "+F);throw console.error(ie),ie}function h(F,ie){F||c(ie)}function v(F){return F?": "+F:""}function g(F,ie,be){F in ie||c("unknown parameter ("+F+")"+v(be)+". possible values: "+Object.keys(ie).join())}function b(F,ie){n(F)||c("invalid parameter type"+v(ie)+". must be a typed array")}function w(F,ie){switch(ie){case"number":return typeof F=="number";case"object":return typeof F=="object";case"string":return typeof F=="string";case"boolean":return typeof F=="boolean";case"function":return typeof F=="function";case"undefined":return typeof F>"u";case"symbol":return typeof F=="symbol"}}function O(F,ie,be){w(F,ie)||c("invalid parameter type"+v(be)+". expected "+ie+", got "+typeof F)}function S(F,ie){F>=0&&(F|0)===F||c("invalid parameter type, ("+F+")"+v(ie)+". must be a nonnegative integer")}function P(F,ie,be){ie.indexOf(F)<0&&c("invalid value"+v(be)+". must be one of: "+ie)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function k(F){Object.keys(F).forEach(function(ie){A.indexOf(ie)<0&&c('invalid regl constructor argument "'+ie+'". must be one of '+A)})}function j(F,ie){for(F=F+"";F.length<ie;)F=" "+F;return F}function R(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function $(F,ie){this.number=F,this.line=ie,this.errors=[]}function V(F,ie,be){this.file=F,this.line=ie,this.message=be}function H(){var F=new Error,ie=(F.stack||F).toString(),be=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ie);if(be)return be[1];var nt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ie);return nt?nt[1]:"unknown"}function Y(){var F=new Error,ie=(F.stack||F).toString(),be=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ie);if(be)return be[1];var nt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ie);return nt?nt[1]:"unknown"}function Q(F,ie){var be=F.split(`
`),nt=1,dt=0,Qe={unknown:new R,0:new R};Qe.unknown.name=Qe[0].name=ie||H(),Qe.unknown.lines.push(new $(0,""));for(var st=0;st<be.length;++st){var Nt=be[st],It=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Nt);if(It)switch(It[1]){case"line":var Ct=/(\d+)(\s+\d+)?/.exec(It[2]);Ct&&(nt=Ct[1]|0,Ct[2]&&(dt=Ct[2]|0,dt in Qe||(Qe[dt]=new R)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(It[2]);ct&&(Qe[dt].name=ct[1]?s(ct[2]):ct[2]);break}Qe[dt].lines.push(new $(nt++,Nt))}return Object.keys(Qe).forEach(function(Vt){var Ut=Qe[Vt];Ut.lines.forEach(function(kt){Ut.index[kt.number]=kt})}),Qe}function W(F){var ie=[];return F.split(`
`).forEach(function(be){if(!(be.length<5)){var nt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);nt?ie.push(new V(nt[1]|0,nt[2]|0,nt[3].trim())):be.length>0&&ie.push(new V("unknown",0,be))}}),ie}function I(F,ie){ie.forEach(function(be){var nt=F[be.file];if(nt){var dt=nt.index[be.line];if(dt){dt.errors.push(be),nt.hasErrors=!0;return}}F.unknown.hasErrors=!0,F.unknown.lines[0].errors.push(be)})}function z(F,ie,be,nt,dt){if(!F.getShaderParameter(ie,F.COMPILE_STATUS)){var Qe=F.getShaderInfoLog(ie),st=nt===F.FRAGMENT_SHADER?"fragment":"vertex";Ie(be,"string",st+" shader source must be a string",dt);var Nt=Q(be,dt),It=W(Qe);I(Nt,It),Object.keys(Nt).forEach(function(Ct){var ct=Nt[Ct];if(!ct.hasErrors)return;var Vt=[""],Ut=[""];function kt(_t,He){Vt.push(_t),Ut.push(He||"")}kt("file number "+Ct+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(_t){if(_t.errors.length>0){kt(j(_t.number,4)+"|  ","background-color:yellow; font-weight:bold"),kt(_t.line+r,"color:red; background-color:yellow; font-weight:bold");var He=0;_t.errors.forEach(function(lt){var Ft=lt.message,Kt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ft);if(Kt){var xt=Kt[1];switch(Ft=Kt[2],xt){case"assign":xt="=";break}He=Math.max(_t.line.indexOf(xt,He),0)}else He=0;kt(j("| ",6)),kt(j("^^^",He+3)+r,"font-weight:bold"),kt(j("| ",6)),kt(Ft+r,"font-weight:bold")}),kt(j("| ",6)+r)}else kt(j(_t.number,4)+"|  "),kt(_t.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Vt.join("%c"),console.log.apply(console,Ut)):console.log(Vt.join(""))}),h.raise("Error compiling "+st+" shader, "+Nt[0].name)}}function K(F,ie,be,nt,dt){if(!F.getProgramParameter(ie,F.LINK_STATUS)){var Qe=F.getProgramInfoLog(ie),st=Q(be,dt),Nt=Q(nt,dt),It='Error linking program with vertex shader, "'+Nt[0].name+'", and fragment shader "'+st[0].name+'"';typeof document<"u"?console.log("%c"+It+r+"%c"+Qe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(It+r+Qe),h.raise(It)}}function q(F){F._commandRef=H()}function ce(F,ie,be,nt){q(F);function dt(It){return It?nt.id(It):0}F._fragId=dt(F.static.frag),F._vertId=dt(F.static.vert);function Qe(It,Ct){Object.keys(Ct).forEach(function(ct){It[nt.id(ct)]=!0})}var st=F._uniformSet={};Qe(st,ie.static),Qe(st,ie.dynamic);var Nt=F._attributeSet={};Qe(Nt,be.static),Qe(Nt,be.dynamic),F._hasCount="count"in F.static||"count"in F.dynamic||"elements"in F.static||"elements"in F.dynamic}function ke(F,ie){var be=Y();c(F+" in command "+(ie||H())+(be==="unknown"?"":" called from "+be))}function Oe(F,ie,be){F||ke(ie,be||H())}function ze(F,ie,be,nt){F in ie||ke("unknown parameter ("+F+")"+v(be)+". possible values: "+Object.keys(ie).join(),nt||H())}function Ie(F,ie,be,nt){w(F,ie)||ke("invalid parameter type"+v(be)+". expected "+ie+", got "+typeof F,nt||H())}function Pe(F){F()}function le(F,ie,be){F.texture?P(F.texture._texture.internalformat,ie,"unsupported texture format for attachment"):P(F.renderbuffer._renderbuffer.format,be,"unsupported renderbuffer format for attachment")}var ye=33071,Me=9728,We=9984,je=9985,it=9986,bt=9987,Mt=5120,Yt=5121,Ce=5122,ge=5123,Se=5124,ht=5125,zt=5126,Ot=32819,rn=32820,yn=33635,Tn=34042,pn=36193,ft={};ft[Mt]=ft[Yt]=1,ft[Ce]=ft[ge]=ft[pn]=ft[yn]=ft[Ot]=ft[rn]=2,ft[Se]=ft[ht]=ft[zt]=ft[Tn]=4;function xn(F,ie){return F===rn||F===Ot||F===yn?2:F===Tn?4:ft[F]*ie}function $e(F){return!(F&F-1)&&!!F}function mn(F,ie,be){var nt,dt=ie.width,Qe=ie.height,st=ie.channels;h(dt>0&&dt<=be.maxTextureSize&&Qe>0&&Qe<=be.maxTextureSize,"invalid texture shape"),(F.wrapS!==ye||F.wrapT!==ye)&&h($e(dt)&&$e(Qe),"incompatible wrap mode for texture, both width and height must be power of 2"),ie.mipmask===1?dt!==1&&Qe!==1&&h(F.minFilter!==We&&F.minFilter!==it&&F.minFilter!==je&&F.minFilter!==bt,"min filter requires mipmap"):(h($e(dt)&&$e(Qe),"texture must be a square power of 2 to support mipmapping"),h(ie.mipmask===(dt<<1)-1,"missing or incomplete mipmap data")),ie.type===zt&&(be.extensions.indexOf("oes_texture_float_linear")<0&&h(F.minFilter===Me&&F.magFilter===Me,"filter not supported, must enable oes_texture_float_linear"),h(!F.genMipmaps,"mipmap generation not supported with float textures"));var Nt=ie.images;for(nt=0;nt<16;++nt)if(Nt[nt]){var It=dt>>nt,Ct=Qe>>nt;h(ie.mipmask&1<<nt,"missing mipmap data");var ct=Nt[nt];if(h(ct.width===It&&ct.height===Ct,"invalid shape for mip images"),h(ct.format===ie.format&&ct.internalformat===ie.internalformat&&ct.type===ie.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Vt=Math.ceil(xn(ct.type,st)*It/ct.unpackAlignment)*ct.unpackAlignment;h(ct.data.byteLength===Vt*Ct,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else F.genMipmaps||h((ie.mipmask&1<<nt)===0,"extra mipmap data");ie.compressed&&h(!F.genMipmaps,"mipmap generation for compressed images not supported")}function Kn(F,ie,be,nt){var dt=F.width,Qe=F.height,st=F.channels;h(dt>0&&dt<=nt.maxTextureSize&&Qe>0&&Qe<=nt.maxTextureSize,"invalid texture shape"),h(dt===Qe,"cube map must be square"),h(ie.wrapS===ye&&ie.wrapT===ye,"wrap mode not supported by cube map");for(var Nt=0;Nt<be.length;++Nt){var It=be[Nt];h(It.width===dt&&It.height===Qe,"inconsistent cube map face shape"),ie.genMipmaps&&(h(!It.compressed,"can not generate mipmap for compressed textures"),h(It.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ct=It.images,ct=0;ct<16;++ct){var Vt=Ct[ct];if(Vt){var Ut=dt>>ct,kt=Qe>>ct;h(It.mipmask&1<<ct,"missing mipmap data"),h(Vt.width===Ut&&Vt.height===kt,"invalid shape for mip images"),h(Vt.format===F.format&&Vt.internalformat===F.internalformat&&Vt.type===F.type,"incompatible type for mip image"),Vt.compressed||(Vt.data?h(Vt.data.byteLength===Ut*kt*Math.max(xn(Vt.type,st),Vt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Vt.element||Vt.copy)}}}}var ne=o(h,{optional:Pe,raise:c,commandRaise:ke,command:Oe,parameter:g,commandParameter:ze,constructor:k,type:O,commandType:Ie,isTypedArray:b,nni:S,oneOf:P,shaderError:z,linkError:K,callSite:Y,saveCommandRef:q,saveDrawInfo:ce,framebufferFormat:le,guessCommand:H,texture2D:mn,textureCube:Kn}),$n=0,xr=0,Ur=5,no=6;function jn(F,ie){this.id=$n++,this.type=F,this.data=ie}function Co(F){return F.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ee(F){if(F.length===0)return[];var ie=F.charAt(0),be=F.charAt(F.length-1);if(F.length>1&&ie===be&&(ie==='"'||ie==="'"))return['"'+Co(F.substr(1,F.length-2))+'"'];var nt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(F);if(nt)return Ee(F.substr(0,nt.index)).concat(Ee(nt[1])).concat(Ee(F.substr(nt.index+nt[0].length)));var dt=F.split(".");if(dt.length===1)return['"'+Co(F)+'"'];for(var Qe=[],st=0;st<dt.length;++st)Qe=Qe.concat(Ee(dt[st]));return Qe}function Ke(F){return"["+Ee(F).join("][")+"]"}function De(F,ie){return new jn(F,Ke(ie+""))}function at(F){return typeof F=="function"&&!F._reglType||F instanceof jn}function en(F,ie){if(typeof F=="function")return new jn(xr,F);if(typeof F=="number"||typeof F=="boolean")return new jn(Ur,F);if(Array.isArray(F))return new jn(no,F.map((be,nt)=>en(be,ie+"["+nt+"]")));if(F instanceof jn)return F;ne(!1,"invalid option type in uniform "+ie)}var qt={DynamicVariable:jn,define:De,isDynamic:at,unbox:en,accessor:Ke},Nn={next:typeof requestAnimationFrame=="function"?function(F){return requestAnimationFrame(F)}:function(F){return setTimeout(F,16)},cancel:typeof cancelAnimationFrame=="function"?function(F){return cancelAnimationFrame(F)}:clearTimeout},_r=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function oi(){var F={"":0},ie=[""];return{id:function(be){var nt=F[be];return nt||(nt=F[be]=ie.length,ie.push(be),nt)},str:function(be){return ie[be]}}}function mi(F,ie,be){var nt=document.createElement("canvas");o(nt.style,{border:0,margin:0,padding:0,top:0,left:0}),F.appendChild(nt),F===document.body&&(nt.style.position="absolute",o(F.style,{margin:0,padding:0}));function dt(){var Nt=window.innerWidth,It=window.innerHeight;if(F!==document.body){var Ct=F.getBoundingClientRect();Nt=Ct.right-Ct.left,It=Ct.bottom-Ct.top}nt.width=be*Nt,nt.height=be*It,o(nt.style,{width:Nt+"px",height:It+"px"})}var Qe;F!==document.body&&typeof ResizeObserver=="function"?(Qe=new ResizeObserver(function(){setTimeout(dt)}),Qe.observe(F)):window.addEventListener("resize",dt,!1);function st(){Qe?Qe.disconnect():window.removeEventListener("resize",dt),F.removeChild(nt)}return dt(),{canvas:nt,onDestroy:st}}function Go(F,ie){function be(nt){try{return F.getContext(nt,ie)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}function qo(F){return typeof F.nodeName=="string"&&typeof F.appendChild=="function"&&typeof F.getBoundingClientRect=="function"}function Sn(F){return typeof F.drawArrays=="function"||typeof F.drawElements=="function"}function Bn(F){return typeof F=="string"?F.split():(ne(Array.isArray(F),"invalid extension array"),F)}function Xn(F){return typeof F=="string"?(ne(typeof document<"u","not supported outside of DOM"),document.querySelector(F)):F}function ir(F){var ie=F||{},be,nt,dt,Qe,st={},Nt=[],It=[],Ct=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Vt=function(_t){_t&&ne.raise(_t)},Ut=function(){};if(typeof ie=="string"?(ne(typeof document<"u","selector queries only supported in DOM enviroments"),be=document.querySelector(ie),ne(be,"invalid query string for element")):typeof ie=="object"?qo(ie)?be=ie:Sn(ie)?(Qe=ie,dt=Qe.canvas):(ne.constructor(ie),"gl"in ie?Qe=ie.gl:"canvas"in ie?dt=Xn(ie.canvas):"container"in ie&&(nt=Xn(ie.container)),"attributes"in ie&&(st=ie.attributes,ne.type(st,"object","invalid context attributes")),"extensions"in ie&&(Nt=Bn(ie.extensions)),"optionalExtensions"in ie&&(It=Bn(ie.optionalExtensions)),"onDone"in ie&&(ne.type(ie.onDone,"function","invalid or missing onDone callback"),Vt=ie.onDone),"profile"in ie&&(ct=!!ie.profile),"pixelRatio"in ie&&(Ct=+ie.pixelRatio,ne(Ct>0,"invalid pixel ratio"))):ne.raise("invalid arguments to regl"),be&&(be.nodeName.toLowerCase()==="canvas"?dt=be:nt=be),!Qe){if(!dt){ne(typeof document<"u","must manually specify webgl context outside of DOM environments");var kt=mi(nt||document.body,Vt,Ct);if(!kt)return null;dt=kt.canvas,Ut=kt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),Qe=Go(dt,st)}return Qe?{gl:Qe,canvas:dt,container:nt,extensions:Nt,optionalExtensions:It,pixelRatio:Ct,profile:ct,onDone:Vt,onDestroy:Ut}:(Ut(),Vt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kr(F,ie){var be={};function nt(st){ne.type(st,"string","extension name must be string");var Nt=st.toLowerCase(),It;try{It=be[Nt]=F.getExtension(Nt)}catch{}return!!It}for(var dt=0;dt<ie.extensions.length;++dt){var Qe=ie.extensions[dt];if(!nt(Qe))return ie.onDestroy(),ie.onDone('"'+Qe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ie.optionalExtensions.forEach(nt),{extensions:be,restore:function(){Object.keys(be).forEach(function(st){if(be[st]&&!nt(st))throw new Error("(regl): error restoring extension "+st)})}}}function Rr(F,ie){for(var be=Array(F),nt=0;nt<F;++nt)be[nt]=ie(nt);return be}var fl=5120,Ga=5121,dl=5122,lu=5123,zd=5124,mc=5125,da=5126;function Wu(F){for(var ie=16;ie<=1<<28;ie*=16)if(F<=ie)return ie;return 0}function Pn(F){var ie,be;return ie=(F>65535)<<4,F>>>=ie,be=(F>255)<<3,F>>>=be,ie|=be,be=(F>15)<<2,F>>>=be,ie|=be,be=(F>3)<<1,F>>>=be,ie|=be,ie|F>>1}function Df(){var F=Rr(8,function(){return[]});function ie(Qe){var st=Wu(Qe),Nt=F[Pn(st)>>2];return Nt.length>0?Nt.pop():new ArrayBuffer(st)}function be(Qe){F[Pn(Qe.byteLength)>>2].push(Qe)}function nt(Qe,st){var Nt=null;switch(Qe){case fl:Nt=new Int8Array(ie(st),0,st);break;case Ga:Nt=new Uint8Array(ie(st),0,st);break;case dl:Nt=new Int16Array(ie(2*st),0,st);break;case lu:Nt=new Uint16Array(ie(2*st),0,st);break;case zd:Nt=new Int32Array(ie(4*st),0,st);break;case mc:Nt=new Uint32Array(ie(4*st),0,st);break;case da:Nt=new Float32Array(ie(4*st),0,st);break;default:return null}return Nt.length!==st?Nt.subarray(0,st):Nt}function dt(Qe){be(Qe.buffer)}return{alloc:ie,free:be,allocType:nt,freeType:dt}}var vo=Df();vo.zero=Df();var gc=3408,qi=3410,ta=3411,Es=3412,Aa=3413,pa=3414,Ta=3415,bc=33901,_c=33902,Cf=3379,zu=3386,jf=34921,wc=36347,Hd=36348,Cl=35661,If=35660,pl=34930,Ec=36349,Os=34076,Oc=34024,xc=7936,Xd=7937,Lf=7938,Wr=35724,Gr=34047,Ff=36063,uu=34852,ha=3553,xs=34067,$f=34069,jo=33984,jl=6408,Il=5126,Ss=5121,su=36160,gi=36053,Sc=36064,Bf=16384,Ac=function(F,ie){var be=1;ie.ext_texture_filter_anisotropic&&(be=F.getParameter(Gr));var nt=1,dt=1;ie.webgl_draw_buffers&&(nt=F.getParameter(uu),dt=F.getParameter(Ff));var Qe=!!ie.oes_texture_float;if(Qe){var st=F.createTexture();F.bindTexture(ha,st),F.texImage2D(ha,0,jl,1,1,0,jl,Il,null);var Nt=F.createFramebuffer();if(F.bindFramebuffer(su,Nt),F.framebufferTexture2D(su,Sc,ha,st,0),F.bindTexture(ha,null),F.checkFramebufferStatus(su)!==gi)Qe=!1;else{F.viewport(0,0,1,1),F.clearColor(1,0,0,1),F.clear(Bf);var It=vo.allocType(Il,4);F.readPixels(0,0,1,1,jl,Il,It),F.getError()?Qe=!1:(F.deleteFramebuffer(Nt),F.deleteTexture(st),Qe=It[0]===1),vo.freeType(It)}}var Ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Ct){var Vt=F.createTexture(),Ut=vo.allocType(Ss,36);F.activeTexture(jo),F.bindTexture(xs,Vt),F.texImage2D($f,0,jl,3,3,0,jl,Ss,Ut),vo.freeType(Ut),F.bindTexture(xs,null),F.deleteTexture(Vt),ct=!F.getError()}return{colorBits:[F.getParameter(qi),F.getParameter(ta),F.getParameter(Es),F.getParameter(Aa)],depthBits:F.getParameter(pa),stencilBits:F.getParameter(Ta),subpixelBits:F.getParameter(gc),extensions:Object.keys(ie).filter(function(kt){return!!ie[kt]}),maxAnisotropic:be,maxDrawbuffers:nt,maxColorAttachments:dt,pointSizeDims:F.getParameter(bc),lineWidthDims:F.getParameter(_c),maxViewportDims:F.getParameter(zu),maxCombinedTextureUnits:F.getParameter(Cl),maxCubeMapSize:F.getParameter(Os),maxRenderbufferSize:F.getParameter(Oc),maxTextureUnits:F.getParameter(pl),maxTextureSize:F.getParameter(Cf),maxAttributes:F.getParameter(jf),maxVertexUniforms:F.getParameter(wc),maxVertexTextureUnits:F.getParameter(If),maxVaryingVectors:F.getParameter(Hd),maxFragmentUniforms:F.getParameter(Ec),glsl:F.getParameter(Wr),renderer:F.getParameter(Xd),vendor:F.getParameter(xc),version:F.getParameter(Lf),readFloat:Qe,npotTextureCube:ct}};function ji(F){return!!F&&typeof F=="object"&&Array.isArray(F.shape)&&Array.isArray(F.stride)&&typeof F.offset=="number"&&F.shape.length===F.stride.length&&(Array.isArray(F.data)||n(F.data))}var ii=function(F){return Object.keys(F).map(function(ie){return F[ie]})},na={shape:Li,flatten:Gf};function ro(F,ie,be){for(var nt=0;nt<ie;++nt)be[nt]=F[nt]}function Uf(F,ie,be,nt){for(var dt=0,Qe=0;Qe<ie;++Qe)for(var st=F[Qe],Nt=0;Nt<be;++Nt)nt[dt++]=st[Nt]}function Ii(F,ie,be,nt,dt,Qe){for(var st=Qe,Nt=0;Nt<ie;++Nt)for(var It=F[Nt],Ct=0;Ct<be;++Ct)for(var ct=It[Ct],Vt=0;Vt<nt;++Vt)dt[st++]=ct[Vt]}function Tc(F,ie,be,nt,dt){for(var Qe=1,st=be+1;st<ie.length;++st)Qe*=ie[st];var Nt=ie[be];if(ie.length-be===4){var It=ie[be+1],Ct=ie[be+2],ct=ie[be+3];for(st=0;st<Nt;++st)Ii(F[st],It,Ct,ct,nt,dt),dt+=Qe}else for(st=0;st<Nt;++st)Tc(F[st],ie,be+1,nt,dt),dt+=Qe}function Gf(F,ie,be,nt){var dt=1;if(ie.length)for(var Qe=0;Qe<ie.length;++Qe)dt*=ie[Qe];else dt=0;var st=nt||vo.allocType(be,dt);switch(ie.length){case 0:break;case 1:ro(F,ie[0],st);break;case 2:Uf(F,ie[0],ie[1],st);break;case 3:Ii(F,ie[0],ie[1],ie[2],st,0);break;default:Tc(F,ie,0,st,0)}return st}function Li(F){for(var ie=[],be=F;be.length;be=be[0])ie.push(be.length);return ie}var Ni={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Mc=5120,Lr=5122,ai=5124,As=5121,Vf=5123,Pc=5125,Ts=5126,Va=5126,Fi={int8:Mc,int16:Lr,int32:ai,uint8:As,uint16:Vf,uint32:Pc,float:Ts,float32:Va},cu=35048,Ki=35040,va={dynamic:cu,stream:Ki,static:35044},Tr=na.flatten,$i=na.shape,Ma=35044,di=35040,fu=5121,Ll=5126,Pa=[];Pa[5120]=1,Pa[5122]=2,Pa[5124]=4,Pa[5121]=1,Pa[5123]=2,Pa[5125]=4,Pa[5126]=4;function co(F){return Ni[Object.prototype.toString.call(F)]|0}function Hu(F,ie){for(var be=0;be<ie.length;++be)F[be]=ie[be]}function Wa(F,ie,be,nt,dt,Qe,st){for(var Nt=0,It=0;It<be;++It)for(var Ct=0;Ct<nt;++Ct)F[Nt++]=ie[dt*It+Qe*Ct+st]}function ya(F,ie,be,nt){var dt=0,Qe={};function st(He){this.id=dt++,this.buffer=F.createBuffer(),this.type=He,this.usage=Ma,this.byteLength=0,this.dimension=1,this.dtype=fu,this.persistentData=null,be.profile&&(this.stats={size:0})}st.prototype.bind=function(){F.bindBuffer(this.type,this.buffer)},st.prototype.destroy=function(){Ut(this)};var Nt=[];function It(He,lt){var Ft=Nt.pop();return Ft||(Ft=new st(He)),Ft.bind(),Vt(Ft,lt,di,0,1,!1),Ft}function Ct(He){Nt.push(He)}function ct(He,lt,Ft){He.byteLength=lt.byteLength,F.bufferData(He.type,lt,Ft)}function Vt(He,lt,Ft,Kt,xt,Jt){var At;if(He.usage=Ft,Array.isArray(lt)){if(He.dtype=Kt||Ll,lt.length>0){var Wt;if(Array.isArray(lt[0])){At=$i(lt);for(var wt=1,Xt=1;Xt<At.length;++Xt)wt*=At[Xt];He.dimension=wt,Wt=Tr(lt,At,He.dtype),ct(He,Wt,Ft),Jt?He.persistentData=Wt:vo.freeType(Wt)}else if(typeof lt[0]=="number"){He.dimension=xt;var Mn=vo.allocType(He.dtype,lt.length);Hu(Mn,lt),ct(He,Mn,Ft),Jt?He.persistentData=Mn:vo.freeType(Mn)}else n(lt[0])?(He.dimension=lt[0].length,He.dtype=Kt||co(lt[0])||Ll,Wt=Tr(lt,[lt.length,lt[0].length],He.dtype),ct(He,Wt,Ft),Jt?He.persistentData=Wt:vo.freeType(Wt)):ne.raise("invalid buffer data")}}else if(n(lt))He.dtype=Kt||co(lt),He.dimension=xt,ct(He,lt,Ft),Jt&&(He.persistentData=new Uint8Array(new Uint8Array(lt.buffer)));else if(ji(lt)){At=lt.shape;var Wn=lt.stride,Lt=lt.offset,Tt=0,Et=0,Cn=0,nr=0;At.length===1?(Tt=At[0],Et=1,Cn=Wn[0],nr=0):At.length===2?(Tt=At[0],Et=At[1],Cn=Wn[0],nr=Wn[1]):ne.raise("invalid shape"),He.dtype=Kt||co(lt.data)||Ll,He.dimension=Et;var un=vo.allocType(He.dtype,Tt*Et);Wa(un,lt.data,Tt,Et,Cn,nr,Lt),ct(He,un,Ft),Jt?He.persistentData=un:vo.freeType(un)}else lt instanceof ArrayBuffer?(He.dtype=fu,He.dimension=xt,ct(He,lt,Ft),Jt&&(He.persistentData=new Uint8Array(new Uint8Array(lt)))):ne.raise("invalid buffer data")}function Ut(He){ie.bufferCount--,nt(He);var lt=He.buffer;ne(lt,"buffer must not be deleted already"),F.deleteBuffer(lt),He.buffer=null,delete Qe[He.id]}function kt(He,lt,Ft,Kt){ie.bufferCount++;var xt=new st(lt);Qe[xt.id]=xt;function Jt(wt){var Xt=Ma,Mn=null,Wn=0,Lt=0,Tt=1;return Array.isArray(wt)||n(wt)||ji(wt)||wt instanceof ArrayBuffer?Mn=wt:typeof wt=="number"?Wn=wt|0:wt&&(ne.type(wt,"object","buffer arguments must be an object, a number or an array"),"data"in wt&&(ne(Mn===null||Array.isArray(Mn)||n(Mn)||ji(Mn),"invalid data for buffer"),Mn=wt.data),"usage"in wt&&(ne.parameter(wt.usage,va,"invalid buffer usage"),Xt=va[wt.usage]),"type"in wt&&(ne.parameter(wt.type,Fi,"invalid buffer type"),Lt=Fi[wt.type]),"dimension"in wt&&(ne.type(wt.dimension,"number","invalid dimension"),Tt=wt.dimension|0),"length"in wt&&(ne.nni(Wn,"buffer length must be a nonnegative integer"),Wn=wt.length|0)),xt.bind(),Mn?Vt(xt,Mn,Xt,Lt,Tt,Kt):(Wn&&F.bufferData(xt.type,Wn,Xt),xt.dtype=Lt||fu,xt.usage=Xt,xt.dimension=Tt,xt.byteLength=Wn),be.profile&&(xt.stats.size=xt.byteLength*Pa[xt.dtype]),Jt}function At(wt,Xt){ne(Xt+wt.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+wt.byteLength+" starting from offset "+Xt+" to a buffer of size "+xt.byteLength),F.bufferSubData(xt.type,Xt,wt)}function Wt(wt,Xt){var Mn=(Xt||0)|0,Wn;if(xt.bind(),n(wt)||wt instanceof ArrayBuffer)At(wt,Mn);else if(Array.isArray(wt)){if(wt.length>0)if(typeof wt[0]=="number"){var Lt=vo.allocType(xt.dtype,wt.length);Hu(Lt,wt),At(Lt,Mn),vo.freeType(Lt)}else if(Array.isArray(wt[0])||n(wt[0])){Wn=$i(wt);var Tt=Tr(wt,Wn,xt.dtype);At(Tt,Mn),vo.freeType(Tt)}else ne.raise("invalid buffer data")}else if(ji(wt)){Wn=wt.shape;var Et=wt.stride,Cn=0,nr=0,un=0,Qn=0;Wn.length===1?(Cn=Wn[0],nr=1,un=Et[0],Qn=0):Wn.length===2?(Cn=Wn[0],nr=Wn[1],un=Et[0],Qn=Et[1]):ne.raise("invalid shape");var Vn=Array.isArray(wt.data)?xt.dtype:co(wt.data),rr=vo.allocType(Vn,Cn*nr);Wa(rr,wt.data,Cn,nr,un,Qn,wt.offset),At(rr,Mn),vo.freeType(rr)}else ne.raise("invalid data for buffer subdata");return Jt}return Ft||Jt(He),Jt._reglType="buffer",Jt._buffer=xt,Jt.subdata=Wt,be.profile&&(Jt.stats=xt.stats),Jt.destroy=function(){Ut(xt)},Jt}function _t(){ii(Qe).forEach(function(He){He.buffer=F.createBuffer(),F.bindBuffer(He.type,He.buffer),F.bufferData(He.type,He.persistentData||He.byteLength,He.usage)})}return be.profile&&(ie.getTotalBufferSize=function(){var He=0;return Object.keys(Qe).forEach(function(lt){He+=Qe[lt].stats.size}),He}),{create:kt,createStream:It,destroyStream:Ct,clear:function(){ii(Qe).forEach(Ut),Nt.forEach(Ut)},getBuffer:function(He){return He&&He._buffer instanceof st?He._buffer:null},restore:_t,_initBuffer:Vt}}var Nc=0,Yd=0,kc=1,Vo=1,Fl=4,za=4,Ko={points:Nc,point:Yd,lines:kc,line:Vo,triangles:Fl,triangle:za,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Rc=0,ra=1,ma=4,Ms=5120,Bi=5121,Zi=5122,li=5123,oa=5124,ki=5125,ut=34963,jt=35040,$t=35044;function fn(F,ie,be,nt){var dt={},Qe=0,st={uint8:Bi,uint16:li};ie.oes_element_index_uint&&(st.uint32=ki);function Nt(_t){this.id=Qe++,dt[this.id]=this,this.buffer=_t,this.primType=ma,this.vertCount=0,this.type=0}Nt.prototype.bind=function(){this.buffer.bind()};var It=[];function Ct(_t){var He=It.pop();return He||(He=new Nt(be.create(null,ut,!0,!1)._buffer)),Vt(He,_t,jt,-1,-1,0,0),He}function ct(_t){It.push(_t)}function Vt(_t,He,lt,Ft,Kt,xt,Jt){_t.buffer.bind();var At;if(He){var Wt=Jt;!Jt&&(!n(He)||ji(He)&&!n(He.data))&&(Wt=ie.oes_element_index_uint?ki:li),be._initBuffer(_t.buffer,He,lt,Wt,3)}else F.bufferData(ut,xt,lt),_t.buffer.dtype=At||Bi,_t.buffer.usage=lt,_t.buffer.dimension=3,_t.buffer.byteLength=xt;if(At=Jt,!Jt){switch(_t.buffer.dtype){case Bi:case Ms:At=Bi;break;case li:case Zi:At=li;break;case ki:case oa:At=ki;break;default:ne.raise("unsupported type for element array")}_t.buffer.dtype=At}_t.type=At,ne(At!==ki||!!ie.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var wt=Kt;wt<0&&(wt=_t.buffer.byteLength,At===li?wt>>=1:At===ki&&(wt>>=2)),_t.vertCount=wt;var Xt=Ft;if(Ft<0){Xt=ma;var Mn=_t.buffer.dimension;Mn===1&&(Xt=Rc),Mn===2&&(Xt=ra),Mn===3&&(Xt=ma)}_t.primType=Xt}function Ut(_t){nt.elementsCount--,ne(_t.buffer!==null,"must not double destroy elements"),delete dt[_t.id],_t.buffer.destroy(),_t.buffer=null}function kt(_t,He){var lt=be.create(null,ut,!0),Ft=new Nt(lt._buffer);nt.elementsCount++;function Kt(xt){if(!xt)lt(),Ft.primType=ma,Ft.vertCount=0,Ft.type=Bi;else if(typeof xt=="number")lt(xt),Ft.primType=ma,Ft.vertCount=xt|0,Ft.type=Bi;else{var Jt=null,At=$t,Wt=-1,wt=-1,Xt=0,Mn=0;Array.isArray(xt)||n(xt)||ji(xt)?Jt=xt:(ne.type(xt,"object","invalid arguments for elements"),"data"in xt&&(Jt=xt.data,ne(Array.isArray(Jt)||n(Jt)||ji(Jt),"invalid data for element buffer")),"usage"in xt&&(ne.parameter(xt.usage,va,"invalid element buffer usage"),At=va[xt.usage]),"primitive"in xt&&(ne.parameter(xt.primitive,Ko,"invalid element buffer primitive"),Wt=Ko[xt.primitive]),"count"in xt&&(ne(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),wt=xt.count|0),"type"in xt&&(ne.parameter(xt.type,st,"invalid buffer type"),Mn=st[xt.type]),"length"in xt?Xt=xt.length|0:(Xt=wt,Mn===li||Mn===Zi?Xt*=2:(Mn===ki||Mn===oa)&&(Xt*=4))),Vt(Ft,Jt,At,Wt,wt,Xt,Mn)}return Kt}return Kt(_t),Kt._reglType="elements",Kt._elements=Ft,Kt.subdata=function(xt,Jt){return lt.subdata(xt,Jt),Kt},Kt.destroy=function(){Ut(Ft)},Kt}return{create:kt,createStream:Ct,destroyStream:ct,getElements:function(_t){return typeof _t=="function"&&_t._elements instanceof Nt?_t._elements:null},clear:function(){ii(dt).forEach(Ut)}}}var ur=new Float32Array(1),Mr=new Uint32Array(ur.buffer),fo=5123;function T(F){for(var ie=vo.allocType(fo,F.length),be=0;be<F.length;++be)if(isNaN(F[be]))ie[be]=65535;else if(F[be]===1/0)ie[be]=31744;else if(F[be]===-1/0)ie[be]=64512;else{ur[0]=F[be];var nt=Mr[0],dt=nt>>>31<<15,Qe=(nt<<1>>>24)-127,st=nt>>13&1024-1;if(Qe<-24)ie[be]=dt;else if(Qe<-14){var Nt=-14-Qe;ie[be]=dt+(st+1024>>Nt)}else Qe>15?ie[be]=dt+31744:ie[be]=dt+(Qe+15<<10)+st}return ie}function M(F){return Array.isArray(F)||n(F)}var U=function(F){return!(F&F-1)&&!!F},te=34467,me=3553,Ve=34067,vt=34069,Ht=6408,_n=6406,yr=6407,ln=6409,Vr=6410,pr=32854,Cr=32855,ia=36194,bo=32819,Ji=32820,hl=33635,vl=34042,$l=6402,du=34041,Ha=35904,pu=35906,Zo=36193,Bl=33776,yl=33777,Xa=33778,Ya=33779,Xu=35986,oh=35987,ih=34798,qd=35840,Dc=35841,Yu=35842,Wf=35843,ah=36196,qu=5121,Cc=5123,zf=5125,Io=5126,Ui=10242,Hf=10243,Xf=10497,Ps=33071,Gv=33648,Ns=10240,ml=10241,jc=9728,Ku=9729,hu=9984,ks=9985,Ic=9986,vu=9987,Vv=33170,Lc=4352,Wv=4353,zv=4354,lh=34046,Yf=3317,Ri=37440,uh=37441,oe=37443,Zu=37444,Ul=33984,Na=[hu,Ic,ks,vu],Pr=[0,ln,Vr,yr,Ht],bi={};bi[ln]=bi[_n]=bi[$l]=1,bi[du]=bi[Vr]=2,bi[yr]=bi[Ha]=3,bi[Ht]=bi[pu]=4;function Fr(F){return"[object "+F+"]"}var qa=Fr("HTMLCanvasElement"),Gl=Fr("OffscreenCanvas"),ga=Fr("CanvasRenderingContext2D"),qf=Fr("ImageBitmap"),Kf=Fr("HTMLImageElement"),Kd=Fr("HTMLVideoElement"),sh=Object.keys(Ni).concat([qa,Gl,ga,qf,Kf,Kd]),Vl=[];Vl[qu]=1,Vl[Io]=4,Vl[Zo]=2,Vl[Cc]=2,Vl[zf]=4;var Lo=[];Lo[pr]=2,Lo[Cr]=2,Lo[ia]=2,Lo[du]=4,Lo[Bl]=.5,Lo[yl]=.5,Lo[Xa]=1,Lo[Ya]=1,Lo[Xu]=.5,Lo[oh]=1,Lo[ih]=1,Lo[qd]=.5,Lo[Dc]=.25,Lo[Yu]=.5,Lo[Wf]=.25,Lo[ah]=.5;function Rs(F){return Array.isArray(F)&&(F.length===0||typeof F[0]=="number")}function Zd(F){if(!Array.isArray(F))return!1;var ie=F.length;return!(ie===0||!M(F[0]))}function Wl(F){return Object.prototype.toString.call(F)}function Ka(F){return Wl(F)===qa}function Fc(F){return Wl(F)===Gl}function yu(F){return Wl(F)===ga}function ba(F){return Wl(F)===qf}function Jd(F){return Wl(F)===Kf}function Qd(F){return Wl(F)===Kd}function Za(F){if(!F)return!1;var ie=Wl(F);return sh.indexOf(ie)>=0?!0:Rs(F)||Zd(F)||ji(F)}function yo(F){return Ni[Object.prototype.toString.call(F)]|0}function ch(F,ie){var be=ie.length;switch(F.type){case qu:case Cc:case zf:case Io:var nt=vo.allocType(F.type,be);nt.set(ie),F.data=nt;break;case Zo:F.data=T(ie);break;default:ne.raise("unsupported texture type, must specify a typed array")}}function ep(F,ie){return vo.allocType(F.type===Zo?Io:F.type,ie)}function Fo(F,ie){F.type===Zo?(F.data=T(ie),vo.freeType(ie)):F.data=ie}function zr(F,ie,be,nt,dt,Qe){for(var st=F.width,Nt=F.height,It=F.channels,Ct=st*Nt*It,ct=ep(F,Ct),Vt=0,Ut=0;Ut<Nt;++Ut)for(var kt=0;kt<st;++kt)for(var _t=0;_t<It;++_t)ct[Vt++]=ie[be*kt+nt*Ut+dt*_t+Qe];Fo(F,ct)}function Jo(F,ie,be,nt,dt,Qe){var st;if(typeof Lo[F]<"u"?st=Lo[F]:st=bi[F]*Vl[ie],Qe&&(st*=6),dt){for(var Nt=0,It=be;It>=1;)Nt+=st*It*It,It/=2;return Nt}else return st*be*nt}function Er(F,ie,be,nt,dt,Qe,st){var Nt={"don't care":Lc,"dont care":Lc,nice:zv,fast:Wv},It={repeat:Xf,clamp:Ps,mirror:Gv},Ct={nearest:jc,linear:Ku},ct=o({mipmap:vu,"nearest mipmap nearest":hu,"linear mipmap nearest":ks,"nearest mipmap linear":Ic,"linear mipmap linear":vu},Ct),Vt={none:0,browser:Zu},Ut={uint8:qu,rgba4:bo,rgb565:hl,"rgb5 a1":Ji},kt={alpha:_n,luminance:ln,"luminance alpha":Vr,rgb:yr,rgba:Ht,rgba4:pr,"rgb5 a1":Cr,rgb565:ia},_t={};ie.ext_srgb&&(kt.srgb=Ha,kt.srgba=pu),ie.oes_texture_float&&(Ut.float32=Ut.float=Io),ie.oes_texture_half_float&&(Ut.float16=Ut["half float"]=Zo),ie.webgl_depth_texture&&(o(kt,{depth:$l,"depth stencil":du}),o(Ut,{uint16:Cc,uint32:zf,"depth stencil":vl})),ie.webgl_compressed_texture_s3tc&&o(_t,{"rgb s3tc dxt1":Bl,"rgba s3tc dxt1":yl,"rgba s3tc dxt3":Xa,"rgba s3tc dxt5":Ya}),ie.webgl_compressed_texture_atc&&o(_t,{"rgb atc":Xu,"rgba atc explicit alpha":oh,"rgba atc interpolated alpha":ih}),ie.webgl_compressed_texture_pvrtc&&o(_t,{"rgb pvrtc 4bppv1":qd,"rgb pvrtc 2bppv1":Dc,"rgba pvrtc 4bppv1":Yu,"rgba pvrtc 2bppv1":Wf}),ie.webgl_compressed_texture_etc1&&(_t["rgb etc1"]=ah);var He=Array.prototype.slice.call(F.getParameter(te));Object.keys(_t).forEach(function(ve){var rt=_t[ve];He.indexOf(rt)>=0&&(kt[ve]=rt)});var lt=Object.keys(kt);be.textureFormats=lt;var Ft=[];Object.keys(kt).forEach(function(ve){var rt=kt[ve];Ft[rt]=ve});var Kt=[];Object.keys(Ut).forEach(function(ve){var rt=Ut[ve];Kt[rt]=ve});var xt=[];Object.keys(Ct).forEach(function(ve){var rt=Ct[ve];xt[rt]=ve});var Jt=[];Object.keys(ct).forEach(function(ve){var rt=ct[ve];Jt[rt]=ve});var At=[];Object.keys(It).forEach(function(ve){var rt=It[ve];At[rt]=ve});var Wt=lt.reduce(function(ve,rt){var Je=kt[rt];return Je===ln||Je===_n||Je===ln||Je===Vr||Je===$l||Je===du||ie.ext_srgb&&(Je===Ha||Je===pu)?ve[Je]=Je:Je===Cr||rt.indexOf("rgba")>=0?ve[Je]=Ht:ve[Je]=yr,ve},{});function wt(){this.internalformat=Ht,this.format=Ht,this.type=qu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zu,this.width=0,this.height=0,this.channels=0}function Xt(ve,rt){ve.internalformat=rt.internalformat,ve.format=rt.format,ve.type=rt.type,ve.compressed=rt.compressed,ve.premultiplyAlpha=rt.premultiplyAlpha,ve.flipY=rt.flipY,ve.unpackAlignment=rt.unpackAlignment,ve.colorSpace=rt.colorSpace,ve.width=rt.width,ve.height=rt.height,ve.channels=rt.channels}function Mn(ve,rt){if(!(typeof rt!="object"||!rt)){if("premultiplyAlpha"in rt&&(ne.type(rt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ve.premultiplyAlpha=rt.premultiplyAlpha),"flipY"in rt&&(ne.type(rt.flipY,"boolean","invalid texture flip"),ve.flipY=rt.flipY),"alignment"in rt&&(ne.oneOf(rt.alignment,[1,2,4,8],"invalid texture unpack alignment"),ve.unpackAlignment=rt.alignment),"colorSpace"in rt&&(ne.parameter(rt.colorSpace,Vt,"invalid colorSpace"),ve.colorSpace=Vt[rt.colorSpace]),"type"in rt){var Je=rt.type;ne(ie.oes_texture_float||!(Je==="float"||Je==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ne(ie.oes_texture_half_float||!(Je==="half float"||Je==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ne(ie.webgl_depth_texture||!(Je==="uint16"||Je==="uint32"||Je==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(Je,Ut,"invalid texture type"),ve.type=Ut[Je]}var tn=ve.width,hr=ve.height,ue=ve.channels,ee=!1;"shape"in rt?(ne(Array.isArray(rt.shape)&&rt.shape.length>=2,"shape must be an array"),tn=rt.shape[0],hr=rt.shape[1],rt.shape.length===3&&(ue=rt.shape[2],ne(ue>0&&ue<=4,"invalid number of channels"),ee=!0),ne(tn>=0&&tn<=be.maxTextureSize,"invalid width"),ne(hr>=0&&hr<=be.maxTextureSize,"invalid height")):("radius"in rt&&(tn=hr=rt.radius,ne(tn>=0&&tn<=be.maxTextureSize,"invalid radius")),"width"in rt&&(tn=rt.width,ne(tn>=0&&tn<=be.maxTextureSize,"invalid width")),"height"in rt&&(hr=rt.height,ne(hr>=0&&hr<=be.maxTextureSize,"invalid height")),"channels"in rt&&(ue=rt.channels,ne(ue>0&&ue<=4,"invalid number of channels"),ee=!0)),ve.width=tn|0,ve.height=hr|0,ve.channels=ue|0;var Ae=!1;if("format"in rt){var Ge=rt.format;ne(ie.webgl_depth_texture||!(Ge==="depth"||Ge==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(Ge,kt,"invalid texture format");var Xe=ve.internalformat=kt[Ge];ve.format=Wt[Xe],Ge in Ut&&("type"in rt||(ve.type=Ut[Ge])),Ge in _t&&(ve.compressed=!0),Ae=!0}!ee&&Ae?ve.channels=bi[ve.format]:ee&&!Ae?ve.channels!==Pr[ve.format]&&(ve.format=ve.internalformat=Pr[ve.channels]):Ae&&ee&&ne(ve.channels===bi[ve.format],"number of channels inconsistent with specified format")}}function Wn(ve){F.pixelStorei(Ri,ve.flipY),F.pixelStorei(uh,ve.premultiplyAlpha),F.pixelStorei(oe,ve.colorSpace),F.pixelStorei(Yf,ve.unpackAlignment)}function Lt(){wt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Tt(ve,rt){var Je=null;if(Za(rt)?Je=rt:rt&&(ne.type(rt,"object","invalid pixel data type"),Mn(ve,rt),"x"in rt&&(ve.xOffset=rt.x|0),"y"in rt&&(ve.yOffset=rt.y|0),Za(rt.data)&&(Je=rt.data)),ne(!ve.compressed||Je instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),rt.copy){ne(!Je,"can not specify copy and data field for the same texture");var tn=dt.viewportWidth,hr=dt.viewportHeight;ve.width=ve.width||tn-ve.xOffset,ve.height=ve.height||hr-ve.yOffset,ve.needsCopy=!0,ne(ve.xOffset>=0&&ve.xOffset<tn&&ve.yOffset>=0&&ve.yOffset<hr&&ve.width>0&&ve.width<=tn&&ve.height>0&&ve.height<=hr,"copy texture read out of bounds")}else if(!Je)ve.width=ve.width||1,ve.height=ve.height||1,ve.channels=ve.channels||4;else if(n(Je))ve.channels=ve.channels||4,ve.data=Je,!("type"in rt)&&ve.type===qu&&(ve.type=yo(Je));else if(Rs(Je))ve.channels=ve.channels||4,ch(ve,Je),ve.alignment=1,ve.needsFree=!0;else if(ji(Je)){var ue=Je.data;!Array.isArray(ue)&&ve.type===qu&&(ve.type=yo(ue));var ee=Je.shape,Ae=Je.stride,Ge,Xe,Ne,Te,Le,fe;ee.length===3?(Ne=ee[2],fe=Ae[2]):(ne(ee.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ne=1,fe=1),Ge=ee[0],Xe=ee[1],Te=Ae[0],Le=Ae[1],ve.alignment=1,ve.width=Ge,ve.height=Xe,ve.channels=Ne,ve.format=ve.internalformat=Pr[Ne],ve.needsFree=!0,zr(ve,ue,Te,Le,fe,Je.offset)}else if(Ka(Je)||Fc(Je)||yu(Je))Ka(Je)||Fc(Je)?ve.element=Je:ve.element=Je.canvas,ve.width=ve.element.width,ve.height=ve.element.height,ve.channels=4;else if(ba(Je))ve.element=Je,ve.width=Je.width,ve.height=Je.height,ve.channels=4;else if(Jd(Je))ve.element=Je,ve.width=Je.naturalWidth,ve.height=Je.naturalHeight,ve.channels=4;else if(Qd(Je))ve.element=Je,ve.width=Je.videoWidth,ve.height=Je.videoHeight,ve.channels=4;else if(Zd(Je)){var we=ve.width||Je[0].length,se=ve.height||Je.length,Be=ve.channels;M(Je[0][0])?Be=Be||Je[0][0].length:Be=Be||1;for(var Ze=na.shape(Je),d=1,m=0;m<Ze.length;++m)d*=Ze[m];var E=ep(ve,d);na.flatten(Je,Ze,"",E),Fo(ve,E),ve.alignment=1,ve.width=we,ve.height=se,ve.channels=Be,ve.format=ve.internalformat=Pr[Be],ve.needsFree=!0}ve.type===Io?ne(be.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ve.type===Zo&&ne(be.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Et(ve,rt,Je){var tn=ve.element,hr=ve.data,ue=ve.internalformat,ee=ve.format,Ae=ve.type,Ge=ve.width,Xe=ve.height;Wn(ve),tn?F.texImage2D(rt,Je,ee,ee,Ae,tn):ve.compressed?F.compressedTexImage2D(rt,Je,ue,Ge,Xe,0,hr):ve.needsCopy?(nt(),F.copyTexImage2D(rt,Je,ee,ve.xOffset,ve.yOffset,Ge,Xe,0)):F.texImage2D(rt,Je,ee,Ge,Xe,0,ee,Ae,hr||null)}function Cn(ve,rt,Je,tn,hr){var ue=ve.element,ee=ve.data,Ae=ve.internalformat,Ge=ve.format,Xe=ve.type,Ne=ve.width,Te=ve.height;Wn(ve),ue?F.texSubImage2D(rt,hr,Je,tn,Ge,Xe,ue):ve.compressed?F.compressedTexSubImage2D(rt,hr,Je,tn,Ae,Ne,Te,ee):ve.needsCopy?(nt(),F.copyTexSubImage2D(rt,hr,Je,tn,ve.xOffset,ve.yOffset,Ne,Te)):F.texSubImage2D(rt,hr,Je,tn,Ne,Te,Ge,Xe,ee)}var nr=[];function un(){return nr.pop()||new Lt}function Qn(ve){ve.needsFree&&vo.freeType(ve.data),Lt.call(ve),nr.push(ve)}function Vn(){wt.call(this),this.genMipmaps=!1,this.mipmapHint=Lc,this.mipmask=0,this.images=Array(16)}function rr(ve,rt,Je){var tn=ve.images[0]=un();ve.mipmask=1,tn.width=ve.width=rt,tn.height=ve.height=Je,tn.channels=ve.channels=4}function gr(ve,rt){var Je=null;if(Za(rt))Je=ve.images[0]=un(),Xt(Je,ve),Tt(Je,rt),ve.mipmask=1;else if(Mn(ve,rt),Array.isArray(rt.mipmap))for(var tn=rt.mipmap,hr=0;hr<tn.length;++hr)Je=ve.images[hr]=un(),Xt(Je,ve),Je.width>>=hr,Je.height>>=hr,Tt(Je,tn[hr]),ve.mipmask|=1<<hr;else Je=ve.images[0]=un(),Xt(Je,ve),Tt(Je,rt),ve.mipmask=1;Xt(ve,ve.images[0]),ve.compressed&&(ve.internalformat===Bl||ve.internalformat===yl||ve.internalformat===Xa||ve.internalformat===Ya)&&ne(ve.width%4===0&&ve.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Po(ve,rt){for(var Je=ve.images,tn=0;tn<Je.length;++tn){if(!Je[tn])return;Et(Je[tn],rt,tn)}}var Bo=[];function cr(){var ve=Bo.pop()||new Vn;wt.call(ve),ve.mipmask=0;for(var rt=0;rt<16;++rt)ve.images[rt]=null;return ve}function Wo(ve){for(var rt=ve.images,Je=0;Je<rt.length;++Je)rt[Je]&&Qn(rt[Je]),rt[Je]=null;Bo.push(ve)}function to(){this.minFilter=jc,this.magFilter=jc,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Lc}function No(ve,rt){if("min"in rt){var Je=rt.min;ne.parameter(Je,ct),ve.minFilter=ct[Je],Na.indexOf(ve.minFilter)>=0&&!("faces"in rt)&&(ve.genMipmaps=!0)}if("mag"in rt){var tn=rt.mag;ne.parameter(tn,Ct),ve.magFilter=Ct[tn]}var hr=ve.wrapS,ue=ve.wrapT;if("wrap"in rt){var ee=rt.wrap;typeof ee=="string"?(ne.parameter(ee,It),hr=ue=It[ee]):Array.isArray(ee)&&(ne.parameter(ee[0],It),ne.parameter(ee[1],It),hr=It[ee[0]],ue=It[ee[1]])}else{if("wrapS"in rt){var Ae=rt.wrapS;ne.parameter(Ae,It),hr=It[Ae]}if("wrapT"in rt){var Ge=rt.wrapT;ne.parameter(Ge,It),ue=It[Ge]}}if(ve.wrapS=hr,ve.wrapT=ue,"anisotropic"in rt){var Xe=rt.anisotropic;ne(typeof Xe=="number"&&Xe>=1&&Xe<=be.maxAnisotropic,"aniso samples must be between 1 and "),ve.anisotropic=rt.anisotropic}if("mipmap"in rt){var Ne=!1;switch(typeof rt.mipmap){case"string":ne.parameter(rt.mipmap,Nt,"invalid mipmap hint"),ve.mipmapHint=Nt[rt.mipmap],ve.genMipmaps=!0,Ne=!0;break;case"boolean":Ne=ve.genMipmaps=rt.mipmap;break;case"object":ne(Array.isArray(rt.mipmap),"invalid mipmap type"),ve.genMipmaps=!1,Ne=!0;break;default:ne.raise("invalid mipmap type")}Ne&&!("min"in rt)&&(ve.minFilter=hu)}}function Uo(ve,rt){F.texParameteri(rt,ml,ve.minFilter),F.texParameteri(rt,Ns,ve.magFilter),F.texParameteri(rt,Ui,ve.wrapS),F.texParameteri(rt,Hf,ve.wrapT),ie.ext_texture_filter_anisotropic&&F.texParameteri(rt,lh,ve.anisotropic),ve.genMipmaps&&(F.hint(Vv,ve.mipmapHint),F.generateMipmap(rt))}var Eo=0,mo={},ni=be.maxTextureUnits,Oo=Array(ni).map(function(){return null});function Zn(ve){wt.call(this),this.mipmask=0,this.internalformat=Ht,this.id=Eo++,this.refCount=1,this.target=ve,this.texture=F.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new to,st.profile&&(this.stats={size:0})}function ui(ve){F.activeTexture(Ul),F.bindTexture(ve.target,ve.texture)}function Nr(){var ve=Oo[0];ve?F.bindTexture(ve.target,ve.texture):F.bindTexture(me,null)}function Rn(ve){var rt=ve.texture;ne(rt,"must not double destroy texture");var Je=ve.unit,tn=ve.target;Je>=0&&(F.activeTexture(Ul+Je),F.bindTexture(tn,null),Oo[Je]=null),F.deleteTexture(rt),ve.texture=null,ve.params=null,ve.pixels=null,ve.refCount=0,delete mo[ve.id],Qe.textureCount--}o(Zn.prototype,{bind:function(){var ve=this;ve.bindCount+=1;var rt=ve.unit;if(rt<0){for(var Je=0;Je<ni;++Je){var tn=Oo[Je];if(tn){if(tn.bindCount>0)continue;tn.unit=-1}Oo[Je]=ve,rt=Je;break}rt>=ni&&ne.raise("insufficient number of texture units"),st.profile&&Qe.maxTextureUnits<rt+1&&(Qe.maxTextureUnits=rt+1),ve.unit=rt,F.activeTexture(Ul+rt),F.bindTexture(ve.target,ve.texture)}return rt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Rn(this)}});function fr(ve,rt){var Je=new Zn(me);mo[Je.id]=Je,Qe.textureCount++;function tn(ee,Ae){var Ge=Je.texInfo;to.call(Ge);var Xe=cr();return typeof ee=="number"?typeof Ae=="number"?rr(Xe,ee|0,Ae|0):rr(Xe,ee|0,ee|0):ee?(ne.type(ee,"object","invalid arguments to regl.texture"),No(Ge,ee),gr(Xe,ee)):rr(Xe,1,1),Ge.genMipmaps&&(Xe.mipmask=(Xe.width<<1)-1),Je.mipmask=Xe.mipmask,Xt(Je,Xe),ne.texture2D(Ge,Xe,be),Je.internalformat=Xe.internalformat,tn.width=Xe.width,tn.height=Xe.height,ui(Je),Po(Xe,me),Uo(Ge,me),Nr(),Wo(Xe),st.profile&&(Je.stats.size=Jo(Je.internalformat,Je.type,Xe.width,Xe.height,Ge.genMipmaps,!1)),tn.format=Ft[Je.internalformat],tn.type=Kt[Je.type],tn.mag=xt[Ge.magFilter],tn.min=Jt[Ge.minFilter],tn.wrapS=At[Ge.wrapS],tn.wrapT=At[Ge.wrapT],tn}function hr(ee,Ae,Ge,Xe){ne(!!ee,"must specify image data");var Ne=Ae|0,Te=Ge|0,Le=Xe|0,fe=un();return Xt(fe,Je),fe.width=0,fe.height=0,Tt(fe,ee),fe.width=fe.width||(Je.width>>Le)-Ne,fe.height=fe.height||(Je.height>>Le)-Te,ne(Je.type===fe.type&&Je.format===fe.format&&Je.internalformat===fe.internalformat,"incompatible format for texture.subimage"),ne(Ne>=0&&Te>=0&&Ne+fe.width<=Je.width&&Te+fe.height<=Je.height,"texture.subimage write out of bounds"),ne(Je.mipmask&1<<Le,"missing mipmap data"),ne(fe.data||fe.element||fe.needsCopy,"missing image data"),ui(Je),Cn(fe,me,Ne,Te,Le),Nr(),Qn(fe),tn}function ue(ee,Ae){var Ge=ee|0,Xe=Ae|0||Ge;if(Ge===Je.width&&Xe===Je.height)return tn;tn.width=Je.width=Ge,tn.height=Je.height=Xe,ui(Je);for(var Ne=0;Je.mipmask>>Ne;++Ne){var Te=Ge>>Ne,Le=Xe>>Ne;if(!Te||!Le)break;F.texImage2D(me,Ne,Je.format,Te,Le,0,Je.format,Je.type,null)}return Nr(),st.profile&&(Je.stats.size=Jo(Je.internalformat,Je.type,Ge,Xe,!1,!1)),tn}return tn(ve,rt),tn.subimage=hr,tn.resize=ue,tn._reglType="texture2d",tn._texture=Je,st.profile&&(tn.stats=Je.stats),tn.destroy=function(){Je.decRef()},tn}function zn(ve,rt,Je,tn,hr,ue){var ee=new Zn(Ve);mo[ee.id]=ee,Qe.cubeCount++;var Ae=new Array(6);function Ge(Te,Le,fe,we,se,Be){var Ze,d=ee.texInfo;for(to.call(d),Ze=0;Ze<6;++Ze)Ae[Ze]=cr();if(typeof Te=="number"||!Te){var m=Te|0||1;for(Ze=0;Ze<6;++Ze)rr(Ae[Ze],m,m)}else if(typeof Te=="object")if(Le)gr(Ae[0],Te),gr(Ae[1],Le),gr(Ae[2],fe),gr(Ae[3],we),gr(Ae[4],se),gr(Ae[5],Be);else if(No(d,Te),Mn(ee,Te),"faces"in Te){var E=Te.faces;for(ne(Array.isArray(E)&&E.length===6,"cube faces must be a length 6 array"),Ze=0;Ze<6;++Ze)ne(typeof E[Ze]=="object"&&!!E[Ze],"invalid input for cube map face"),Xt(Ae[Ze],ee),gr(Ae[Ze],E[Ze])}else for(Ze=0;Ze<6;++Ze)gr(Ae[Ze],Te);else ne.raise("invalid arguments to cube map");for(Xt(ee,Ae[0]),be.npotTextureCube||ne(U(ee.width)&&U(ee.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?ee.mipmask=(Ae[0].width<<1)-1:ee.mipmask=Ae[0].mipmask,ne.textureCube(ee,d,Ae,be),ee.internalformat=Ae[0].internalformat,Ge.width=Ae[0].width,Ge.height=Ae[0].height,ui(ee),Ze=0;Ze<6;++Ze)Po(Ae[Ze],vt+Ze);for(Uo(d,Ve),Nr(),st.profile&&(ee.stats.size=Jo(ee.internalformat,ee.type,Ge.width,Ge.height,d.genMipmaps,!0)),Ge.format=Ft[ee.internalformat],Ge.type=Kt[ee.type],Ge.mag=xt[d.magFilter],Ge.min=Jt[d.minFilter],Ge.wrapS=At[d.wrapS],Ge.wrapT=At[d.wrapT],Ze=0;Ze<6;++Ze)Wo(Ae[Ze]);return Ge}function Xe(Te,Le,fe,we,se){ne(!!Le,"must specify image data"),ne(typeof Te=="number"&&Te===(Te|0)&&Te>=0&&Te<6,"invalid face");var Be=fe|0,Ze=we|0,d=se|0,m=un();return Xt(m,ee),m.width=0,m.height=0,Tt(m,Le),m.width=m.width||(ee.width>>d)-Be,m.height=m.height||(ee.height>>d)-Ze,ne(ee.type===m.type&&ee.format===m.format&&ee.internalformat===m.internalformat,"incompatible format for texture.subimage"),ne(Be>=0&&Ze>=0&&Be+m.width<=ee.width&&Ze+m.height<=ee.height,"texture.subimage write out of bounds"),ne(ee.mipmask&1<<d,"missing mipmap data"),ne(m.data||m.element||m.needsCopy,"missing image data"),ui(ee),Cn(m,vt+Te,Be,Ze,d),Nr(),Qn(m),Ge}function Ne(Te){var Le=Te|0;if(Le!==ee.width){Ge.width=ee.width=Le,Ge.height=ee.height=Le,ui(ee);for(var fe=0;fe<6;++fe)for(var we=0;ee.mipmask>>we;++we)F.texImage2D(vt+fe,we,ee.format,Le>>we,Le>>we,0,ee.format,ee.type,null);return Nr(),st.profile&&(ee.stats.size=Jo(ee.internalformat,ee.type,Ge.width,Ge.height,!1,!0)),Ge}}return Ge(ve,rt,Je,tn,hr,ue),Ge.subimage=Xe,Ge.resize=Ne,Ge._reglType="textureCube",Ge._texture=ee,st.profile&&(Ge.stats=ee.stats),Ge.destroy=function(){ee.decRef()},Ge}function uo(){for(var ve=0;ve<ni;++ve)F.activeTexture(Ul+ve),F.bindTexture(me,null),Oo[ve]=null;ii(mo).forEach(Rn),Qe.cubeCount=0,Qe.textureCount=0}st.profile&&(Qe.getTotalTextureSize=function(){var ve=0;return Object.keys(mo).forEach(function(rt){ve+=mo[rt].stats.size}),ve});function La(){for(var ve=0;ve<ni;++ve){var rt=Oo[ve];rt&&(rt.bindCount=0,rt.unit=-1,Oo[ve]=null)}ii(mo).forEach(function(Je){Je.texture=F.createTexture(),F.bindTexture(Je.target,Je.texture);for(var tn=0;tn<32;++tn)if(Je.mipmask&1<<tn)if(Je.target===me)F.texImage2D(me,tn,Je.internalformat,Je.width>>tn,Je.height>>tn,0,Je.internalformat,Je.type,null);else for(var hr=0;hr<6;++hr)F.texImage2D(vt+hr,tn,Je.internalformat,Je.width>>tn,Je.height>>tn,0,Je.internalformat,Je.type,null);Uo(Je.texInfo,Je.target)})}function Ql(){for(var ve=0;ve<ni;++ve){var rt=Oo[ve];rt&&(rt.bindCount=0,rt.unit=-1,Oo[ve]=null),F.activeTexture(Ul+ve),F.bindTexture(me,null),F.bindTexture(Ve,null)}}return{create2D:fr,createCube:zn,clear:uo,getTexture:function(ve){return null},restore:La,refresh:Ql}}var ao=36161,kn=32854,lo=32855,$c=36194,gl=33189,Zf=36168,_o=34041,So=35907,tp=34836,np=34842,Bc=34843,Gi=[];Gi[kn]=2,Gi[lo]=2,Gi[$c]=2,Gi[gl]=2,Gi[Zf]=1,Gi[_o]=4,Gi[So]=4,Gi[tp]=16,Gi[np]=8,Gi[Bc]=6;function Jf(F,ie,be){return Gi[F]*ie*be}var Ds=function(F,ie,be,nt,dt){var Qe={rgba4:kn,rgb565:$c,"rgb5 a1":lo,depth:gl,stencil:Zf,"depth stencil":_o};ie.ext_srgb&&(Qe.srgba=So),ie.ext_color_buffer_half_float&&(Qe.rgba16f=np,Qe.rgb16f=Bc),ie.webgl_color_buffer_float&&(Qe.rgba32f=tp);var st=[];Object.keys(Qe).forEach(function(kt){var _t=Qe[kt];st[_t]=kt});var Nt=0,It={};function Ct(kt){this.id=Nt++,this.refCount=1,this.renderbuffer=kt,this.format=kn,this.width=0,this.height=0,dt.profile&&(this.stats={size:0})}Ct.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(kt){var _t=kt.renderbuffer;ne(_t,"must not double destroy renderbuffer"),F.bindRenderbuffer(ao,null),F.deleteRenderbuffer(_t),kt.renderbuffer=null,kt.refCount=0,delete It[kt.id],nt.renderbufferCount--}function Vt(kt,_t){var He=new Ct(F.createRenderbuffer());It[He.id]=He,nt.renderbufferCount++;function lt(Kt,xt){var Jt=0,At=0,Wt=kn;if(typeof Kt=="object"&&Kt){var wt=Kt;if("shape"in wt){var Xt=wt.shape;ne(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Jt=Xt[0]|0,At=Xt[1]|0}else"radius"in wt&&(Jt=At=wt.radius|0),"width"in wt&&(Jt=wt.width|0),"height"in wt&&(At=wt.height|0);"format"in wt&&(ne.parameter(wt.format,Qe,"invalid renderbuffer format"),Wt=Qe[wt.format])}else typeof Kt=="number"?(Jt=Kt|0,typeof xt=="number"?At=xt|0:At=Jt):Kt?ne.raise("invalid arguments to renderbuffer constructor"):Jt=At=1;if(ne(Jt>0&&At>0&&Jt<=be.maxRenderbufferSize&&At<=be.maxRenderbufferSize,"invalid renderbuffer size"),!(Jt===He.width&&At===He.height&&Wt===He.format))return lt.width=He.width=Jt,lt.height=He.height=At,He.format=Wt,F.bindRenderbuffer(ao,He.renderbuffer),F.renderbufferStorage(ao,Wt,Jt,At),ne(F.getError()===0,"invalid render buffer format"),dt.profile&&(He.stats.size=Jf(He.format,He.width,He.height)),lt.format=st[He.format],lt}function Ft(Kt,xt){var Jt=Kt|0,At=xt|0||Jt;return Jt===He.width&&At===He.height||(ne(Jt>0&&At>0&&Jt<=be.maxRenderbufferSize&&At<=be.maxRenderbufferSize,"invalid renderbuffer size"),lt.width=He.width=Jt,lt.height=He.height=At,F.bindRenderbuffer(ao,He.renderbuffer),F.renderbufferStorage(ao,He.format,Jt,At),ne(F.getError()===0,"invalid render buffer format"),dt.profile&&(He.stats.size=Jf(He.format,He.width,He.height))),lt}return lt(kt,_t),lt.resize=Ft,lt._reglType="renderbuffer",lt._renderbuffer=He,dt.profile&&(lt.stats=He.stats),lt.destroy=function(){He.decRef()},lt}dt.profile&&(nt.getTotalRenderbufferSize=function(){var kt=0;return Object.keys(It).forEach(function(_t){kt+=It[_t].stats.size}),kt});function Ut(){ii(It).forEach(function(kt){kt.renderbuffer=F.createRenderbuffer(),F.bindRenderbuffer(ao,kt.renderbuffer),F.renderbufferStorage(ao,kt.format,kt.width,kt.height)}),F.bindRenderbuffer(ao,null)}return{create:Vt,clear:function(){ii(It).forEach(ct)},restore:Ut}},ka=36160,mu=36161,zl=3553,Ra=34069,fh=36064,bl=36096,_a=36128,rp=33306,op=36053,Qf=36054,dh=36055,ph=36057,hh=36061,ip=36193,Cs=5121,ap=5126,Uc=6407,Or=6408,Hv=6402,lp=[Uc,Or],gu=[];gu[Or]=4,gu[Uc]=3;var Gc=[];Gc[Cs]=1,Gc[ap]=4,Gc[ip]=2;var Xv=32854,Yv=32855,Da=36194,up=33189,ed=36168,td=34041,vh=35907,sp=34836,aa=34842,bu=34843,nd=[Xv,Yv,Da,vh,aa,bu,sp],Ju={};Ju[op]="complete",Ju[Qf]="incomplete attachment",Ju[ph]="incomplete dimensions",Ju[dh]="incomplete, missing attachment",Ju[hh]="unsupported";function Vc(F,ie,be,nt,dt,Qe){var st={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],It=["rgba4","rgb565","rgb5 a1"];ie.ext_srgb&&It.push("srgba"),ie.ext_color_buffer_half_float&&It.push("rgba16f","rgb16f"),ie.webgl_color_buffer_float&&It.push("rgba32f");var Ct=["uint8"];ie.oes_texture_half_float&&Ct.push("half float","float16"),ie.oes_texture_float&&Ct.push("float","float32");function ct(Lt,Tt,Et){this.target=Lt,this.texture=Tt,this.renderbuffer=Et;var Cn=0,nr=0;Tt?(Cn=Tt.width,nr=Tt.height):Et&&(Cn=Et.width,nr=Et.height),this.width=Cn,this.height=nr}function Vt(Lt){Lt&&(Lt.texture&&Lt.texture._texture.decRef(),Lt.renderbuffer&&Lt.renderbuffer._renderbuffer.decRef())}function Ut(Lt,Tt,Et){if(Lt)if(Lt.texture){var Cn=Lt.texture._texture,nr=Math.max(1,Cn.width),un=Math.max(1,Cn.height);ne(nr===Tt&&un===Et,"inconsistent width/height for supplied texture"),Cn.refCount+=1}else{var Qn=Lt.renderbuffer._renderbuffer;ne(Qn.width===Tt&&Qn.height===Et,"inconsistent width/height for renderbuffer"),Qn.refCount+=1}}function kt(Lt,Tt){Tt&&(Tt.texture?F.framebufferTexture2D(ka,Lt,Tt.target,Tt.texture._texture.texture,0):F.framebufferRenderbuffer(ka,Lt,mu,Tt.renderbuffer._renderbuffer.renderbuffer))}function _t(Lt){var Tt=zl,Et=null,Cn=null,nr=Lt;typeof Lt=="object"&&(nr=Lt.data,"target"in Lt&&(Tt=Lt.target|0)),ne.type(nr,"function","invalid attachment data");var un=nr._reglType;return un==="texture2d"?(Et=nr,ne(Tt===zl)):un==="textureCube"?(Et=nr,ne(Tt>=Ra&&Tt<Ra+6,"invalid cube map target")):un==="renderbuffer"?(Cn=nr,Tt=mu):ne.raise("invalid regl object for attachment"),new ct(Tt,Et,Cn)}function He(Lt,Tt,Et,Cn,nr){if(Et){var un=nt.create2D({width:Lt,height:Tt,format:Cn,type:nr});return un._texture.refCount=0,new ct(zl,un,null)}else{var Qn=dt.create({width:Lt,height:Tt,format:Cn});return Qn._renderbuffer.refCount=0,new ct(mu,null,Qn)}}function lt(Lt){return Lt&&(Lt.texture||Lt.renderbuffer)}function Ft(Lt,Tt,Et){Lt&&(Lt.texture?Lt.texture.resize(Tt,Et):Lt.renderbuffer&&Lt.renderbuffer.resize(Tt,Et),Lt.width=Tt,Lt.height=Et)}var Kt=0,xt={};function Jt(){this.id=Kt++,xt[this.id]=this,this.framebuffer=F.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function At(Lt){Lt.colorAttachments.forEach(Vt),Vt(Lt.depthAttachment),Vt(Lt.stencilAttachment),Vt(Lt.depthStencilAttachment)}function Wt(Lt){var Tt=Lt.framebuffer;ne(Tt,"must not double destroy framebuffer"),F.deleteFramebuffer(Tt),Lt.framebuffer=null,Qe.framebufferCount--,delete xt[Lt.id]}function wt(Lt){var Tt;F.bindFramebuffer(ka,Lt.framebuffer);var Et=Lt.colorAttachments;for(Tt=0;Tt<Et.length;++Tt)kt(fh+Tt,Et[Tt]);for(Tt=Et.length;Tt<be.maxColorAttachments;++Tt)F.framebufferTexture2D(ka,fh+Tt,zl,null,0);F.framebufferTexture2D(ka,rp,zl,null,0),F.framebufferTexture2D(ka,bl,zl,null,0),F.framebufferTexture2D(ka,_a,zl,null,0),kt(bl,Lt.depthAttachment),kt(_a,Lt.stencilAttachment),kt(rp,Lt.depthStencilAttachment);var Cn=F.checkFramebufferStatus(ka);!F.isContextLost()&&Cn!==op&&ne.raise("framebuffer configuration not supported, status = "+Ju[Cn]),F.bindFramebuffer(ka,st.next?st.next.framebuffer:null),st.cur=st.next,F.getError()}function Xt(Lt,Tt){var Et=new Jt;Qe.framebufferCount++;function Cn(un,Qn){var Vn;ne(st.next!==Et,"can not update framebuffer which is currently in use");var rr=0,gr=0,Po=!0,Bo=!0,cr=null,Wo=!0,to="rgba",No="uint8",Uo=1,Eo=null,mo=null,ni=null,Oo=!1;if(typeof un=="number")rr=un|0,gr=Qn|0||rr;else if(!un)rr=gr=1;else{ne.type(un,"object","invalid arguments for framebuffer");var Zn=un;if("shape"in Zn){var ui=Zn.shape;ne(Array.isArray(ui)&&ui.length>=2,"invalid shape for framebuffer"),rr=ui[0],gr=ui[1]}else"radius"in Zn&&(rr=gr=Zn.radius),"width"in Zn&&(rr=Zn.width),"height"in Zn&&(gr=Zn.height);("color"in Zn||"colors"in Zn)&&(cr=Zn.color||Zn.colors,Array.isArray(cr)&&ne(cr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),cr||("colorCount"in Zn&&(Uo=Zn.colorCount|0,ne(Uo>0,"invalid color buffer count")),"colorTexture"in Zn&&(Wo=!!Zn.colorTexture,to="rgba4"),"colorType"in Zn&&(No=Zn.colorType,Wo?(ne(ie.oes_texture_float||!(No==="float"||No==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ne(ie.oes_texture_half_float||!(No==="half float"||No==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):No==="half float"||No==="float16"?(ne(ie.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),to="rgba16f"):(No==="float"||No==="float32")&&(ne(ie.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),to="rgba32f"),ne.oneOf(No,Ct,"invalid color type")),"colorFormat"in Zn&&(to=Zn.colorFormat,Nt.indexOf(to)>=0?Wo=!0:It.indexOf(to)>=0?Wo=!1:Wo?ne.oneOf(Zn.colorFormat,Nt,"invalid color format for texture"):ne.oneOf(Zn.colorFormat,It,"invalid color format for renderbuffer"))),("depthTexture"in Zn||"depthStencilTexture"in Zn)&&(Oo=!!(Zn.depthTexture||Zn.depthStencilTexture),ne(!Oo||ie.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Zn&&(typeof Zn.depth=="boolean"?Po=Zn.depth:(Eo=Zn.depth,Bo=!1)),"stencil"in Zn&&(typeof Zn.stencil=="boolean"?Bo=Zn.stencil:(mo=Zn.stencil,Po=!1)),"depthStencil"in Zn&&(typeof Zn.depthStencil=="boolean"?Po=Bo=Zn.depthStencil:(ni=Zn.depthStencil,Po=!1,Bo=!1))}var Nr=null,Rn=null,fr=null,zn=null;if(Array.isArray(cr))Nr=cr.map(_t);else if(cr)Nr=[_t(cr)];else for(Nr=new Array(Uo),Vn=0;Vn<Uo;++Vn)Nr[Vn]=He(rr,gr,Wo,to,No);ne(ie.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ne(Nr.length<=be.maxColorAttachments,"too many color attachments, not supported"),rr=rr||Nr[0].width,gr=gr||Nr[0].height,Eo?Rn=_t(Eo):Po&&!Bo&&(Rn=He(rr,gr,Oo,"depth","uint32")),mo?fr=_t(mo):Bo&&!Po&&(fr=He(rr,gr,!1,"stencil","uint8")),ni?zn=_t(ni):!Eo&&!mo&&Bo&&Po&&(zn=He(rr,gr,Oo,"depth stencil","depth stencil")),ne(!!Eo+!!mo+!!ni<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var uo=null;for(Vn=0;Vn<Nr.length;++Vn)if(Ut(Nr[Vn],rr,gr),ne(!Nr[Vn]||Nr[Vn].texture&&lp.indexOf(Nr[Vn].texture._texture.format)>=0||Nr[Vn].renderbuffer&&nd.indexOf(Nr[Vn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Vn+" is invalid"),Nr[Vn]&&Nr[Vn].texture){var La=gu[Nr[Vn].texture._texture.format]*Gc[Nr[Vn].texture._texture.type];uo===null?uo=La:ne(uo===La,"all color attachments much have the same number of bits per pixel.")}return Ut(Rn,rr,gr),ne(!Rn||Rn.texture&&Rn.texture._texture.format===Hv||Rn.renderbuffer&&Rn.renderbuffer._renderbuffer.format===up,"invalid depth attachment for framebuffer object"),Ut(fr,rr,gr),ne(!fr||fr.renderbuffer&&fr.renderbuffer._renderbuffer.format===ed,"invalid stencil attachment for framebuffer object"),Ut(zn,rr,gr),ne(!zn||zn.texture&&zn.texture._texture.format===td||zn.renderbuffer&&zn.renderbuffer._renderbuffer.format===td,"invalid depth-stencil attachment for framebuffer object"),At(Et),Et.width=rr,Et.height=gr,Et.colorAttachments=Nr,Et.depthAttachment=Rn,Et.stencilAttachment=fr,Et.depthStencilAttachment=zn,Cn.color=Nr.map(lt),Cn.depth=lt(Rn),Cn.stencil=lt(fr),Cn.depthStencil=lt(zn),Cn.width=Et.width,Cn.height=Et.height,wt(Et),Cn}function nr(un,Qn){ne(st.next!==Et,"can not resize a framebuffer which is currently in use");var Vn=Math.max(un|0,1),rr=Math.max(Qn|0||Vn,1);if(Vn===Et.width&&rr===Et.height)return Cn;for(var gr=Et.colorAttachments,Po=0;Po<gr.length;++Po)Ft(gr[Po],Vn,rr);return Ft(Et.depthAttachment,Vn,rr),Ft(Et.stencilAttachment,Vn,rr),Ft(Et.depthStencilAttachment,Vn,rr),Et.width=Cn.width=Vn,Et.height=Cn.height=rr,wt(Et),Cn}return Cn(Lt,Tt),o(Cn,{resize:nr,_reglType:"framebuffer",_framebuffer:Et,destroy:function(){Wt(Et),At(Et)},use:function(un){st.setFBO({framebuffer:Cn},un)}})}function Mn(Lt){var Tt=Array(6);function Et(nr){var un;ne(Tt.indexOf(st.next)<0,"can not update framebuffer which is currently in use");var Qn={color:null},Vn=0,rr=null,gr="rgba",Po="uint8",Bo=1;if(typeof nr=="number")Vn=nr|0;else if(!nr)Vn=1;else{ne.type(nr,"object","invalid arguments for framebuffer");var cr=nr;if("shape"in cr){var Wo=cr.shape;ne(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),ne(Wo[0]===Wo[1],"cube framebuffer must be square"),Vn=Wo[0]}else"radius"in cr&&(Vn=cr.radius|0),"width"in cr?(Vn=cr.width|0,"height"in cr&&ne(cr.height===Vn,"must be square")):"height"in cr&&(Vn=cr.height|0);("color"in cr||"colors"in cr)&&(rr=cr.color||cr.colors,Array.isArray(rr)&&ne(rr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),rr||("colorCount"in cr&&(Bo=cr.colorCount|0,ne(Bo>0,"invalid color buffer count")),"colorType"in cr&&(ne.oneOf(cr.colorType,Ct,"invalid color type"),Po=cr.colorType),"colorFormat"in cr&&(gr=cr.colorFormat,ne.oneOf(cr.colorFormat,Nt,"invalid color format for texture"))),"depth"in cr&&(Qn.depth=cr.depth),"stencil"in cr&&(Qn.stencil=cr.stencil),"depthStencil"in cr&&(Qn.depthStencil=cr.depthStencil)}var to;if(rr)if(Array.isArray(rr))for(to=[],un=0;un<rr.length;++un)to[un]=rr[un];else to=[rr];else{to=Array(Bo);var No={radius:Vn,format:gr,type:Po};for(un=0;un<Bo;++un)to[un]=nt.createCube(No)}for(Qn.color=Array(to.length),un=0;un<to.length;++un){var Uo=to[un];ne(typeof Uo=="function"&&Uo._reglType==="textureCube","invalid cube map"),Vn=Vn||Uo.width,ne(Uo.width===Vn&&Uo.height===Vn,"invalid cube map shape"),Qn.color[un]={target:Ra,data:to[un]}}for(un=0;un<6;++un){for(var Eo=0;Eo<to.length;++Eo)Qn.color[Eo].target=Ra+un;un>0&&(Qn.depth=Tt[0].depth,Qn.stencil=Tt[0].stencil,Qn.depthStencil=Tt[0].depthStencil),Tt[un]?Tt[un](Qn):Tt[un]=Xt(Qn)}return o(Et,{width:Vn,height:Vn,color:to})}function Cn(nr){var un,Qn=nr|0;if(ne(Qn>0&&Qn<=be.maxCubeMapSize,"invalid radius for cube fbo"),Qn===Et.width)return Et;var Vn=Et.color;for(un=0;un<Vn.length;++un)Vn[un].resize(Qn);for(un=0;un<6;++un)Tt[un].resize(Qn);return Et.width=Et.height=Qn,Et}return Et(Lt),o(Et,{faces:Tt,resize:Cn,_reglType:"framebufferCube",destroy:function(){Tt.forEach(function(nr){nr.destroy()})}})}function Wn(){st.cur=null,st.next=null,st.dirty=!0,ii(xt).forEach(function(Lt){Lt.framebuffer=F.createFramebuffer(),wt(Lt)})}return o(st,{getFramebuffer:function(Lt){if(typeof Lt=="function"&&Lt._reglType==="framebuffer"){var Tt=Lt._framebuffer;if(Tt instanceof Jt)return Tt}return null},create:Xt,createCube:Mn,clear:function(){ii(xt).forEach(Wt)},restore:Wn})}var yh=5126,Wc=34962;function rd(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=yh,this.offset=0,this.stride=0,this.divisor=0}function od(F,ie,be,nt,dt){for(var Qe=be.maxAttributes,st=new Array(Qe),Nt=0;Nt<Qe;++Nt)st[Nt]=new rd;var It=0,Ct={},ct={Record:rd,scope:{},state:st,currentVAO:null,targetVAO:null,restore:Ut()?xt:function(){},createVAO:Jt,getVAO:_t,destroyBuffer:Vt,setVAO:Ut()?He:lt,clear:Ut()?Ft:function(){}};function Vt(At){for(var Wt=0;Wt<st.length;++Wt){var wt=st[Wt];wt.buffer===At&&(F.disableVertexAttribArray(Wt),wt.buffer=null)}}function Ut(){return ie.oes_vertex_array_object}function kt(){return ie.angle_instanced_arrays}function _t(At){return typeof At=="function"&&At._vao?At._vao:null}function He(At){if(At!==ct.currentVAO){var Wt=Ut();At?Wt.bindVertexArrayOES(At.vao):Wt.bindVertexArrayOES(null),ct.currentVAO=At}}function lt(At){if(At!==ct.currentVAO){if(At)At.bindAttrs();else for(var Wt=kt(),wt=0;wt<st.length;++wt){var Xt=st[wt];Xt.buffer?(F.enableVertexAttribArray(wt),F.vertexAttribPointer(wt,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Wt&&Xt.divisor&&Wt.vertexAttribDivisorANGLE(wt,Xt.divisor)):(F.disableVertexAttribArray(wt),F.vertexAttrib4f(wt,Xt.x,Xt.y,Xt.z,Xt.w))}ct.currentVAO=At}}function Ft(){ii(Ct).forEach(function(At){At.destroy()})}function Kt(){this.id=++It,this.attributes=[];var At=Ut();At?this.vao=At.createVertexArrayOES():this.vao=null,Ct[this.id]=this,this.buffers=[]}Kt.prototype.bindAttrs=function(){for(var At=kt(),Wt=this.attributes,wt=0;wt<Wt.length;++wt){var Xt=Wt[wt];Xt.buffer?(F.enableVertexAttribArray(wt),F.bindBuffer(Wc,Xt.buffer.buffer),F.vertexAttribPointer(wt,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),At&&Xt.divisor&&At.vertexAttribDivisorANGLE(wt,Xt.divisor)):(F.disableVertexAttribArray(wt),F.vertexAttrib4f(wt,Xt.x,Xt.y,Xt.z,Xt.w))}for(var Mn=Wt.length;Mn<Qe;++Mn)F.disableVertexAttribArray(Mn)},Kt.prototype.refresh=function(){var At=Ut();At&&(At.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},Kt.prototype.destroy=function(){if(this.vao){var At=Ut();this===ct.currentVAO&&(ct.currentVAO=null,At.bindVertexArrayOES(null)),At.deleteVertexArrayOES(this.vao),this.vao=null}Ct[this.id]&&(delete Ct[this.id],nt.vaoCount-=1)};function xt(){var At=Ut();At&&ii(Ct).forEach(function(Wt){Wt.refresh()})}function Jt(At){var Wt=new Kt;nt.vaoCount+=1;function wt(Xt){ne(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),ne(Xt.length<Qe,"too many attributes"),ne(Xt.length>0,"must specify at least one attribute");var Mn={},Wn=Wt.attributes;Wn.length=Xt.length;for(var Lt=0;Lt<Xt.length;++Lt){var Tt=Xt[Lt],Et=Wn[Lt]=new rd,Cn=Tt.data||Tt;if(Array.isArray(Cn)||n(Cn)||ji(Cn)){var nr;Wt.buffers[Lt]&&(nr=Wt.buffers[Lt],n(Cn)&&nr._buffer.byteLength>=Cn.byteLength?nr.subdata(Cn):(nr.destroy(),Wt.buffers[Lt]=null)),Wt.buffers[Lt]||(nr=Wt.buffers[Lt]=dt.create(Tt,Wc,!1,!0)),Et.buffer=dt.getBuffer(nr),Et.size=Et.buffer.dimension|0,Et.normalized=!1,Et.type=Et.buffer.dtype,Et.offset=0,Et.stride=0,Et.divisor=0,Et.state=1,Mn[Lt]=1}else dt.getBuffer(Tt)?(Et.buffer=dt.getBuffer(Tt),Et.size=Et.buffer.dimension|0,Et.normalized=!1,Et.type=Et.buffer.dtype,Et.offset=0,Et.stride=0,Et.divisor=0,Et.state=1):dt.getBuffer(Tt.buffer)?(Et.buffer=dt.getBuffer(Tt.buffer),Et.size=(+Tt.size||Et.buffer.dimension)|0,Et.normalized=!!Tt.normalized||!1,"type"in Tt?(ne.parameter(Tt.type,Fi,"invalid buffer type"),Et.type=Fi[Tt.type]):Et.type=Et.buffer.dtype,Et.offset=(Tt.offset||0)|0,Et.stride=(Tt.stride||0)|0,Et.divisor=(Tt.divisor||0)|0,Et.state=1,ne(Et.size>=1&&Et.size<=4,"size must be between 1 and 4"),ne(Et.offset>=0,"invalid offset"),ne(Et.stride>=0&&Et.stride<=255,"stride must be between 0 and 255"),ne(Et.divisor>=0,"divisor must be positive"),ne(!Et.divisor||!!ie.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Tt?(ne(Lt>0,"first attribute must not be a constant"),Et.x=+Tt.x||0,Et.y=+Tt.y||0,Et.z=+Tt.z||0,Et.w=+Tt.w||0,Et.state=2):ne(!1,"invalid attribute spec for location "+Lt)}for(var un=0;un<Wt.buffers.length;++un)!Mn[un]&&Wt.buffers[un]&&(Wt.buffers[un].destroy(),Wt.buffers[un]=null);return Wt.refresh(),wt}return wt.destroy=function(){for(var Xt=0;Xt<Wt.buffers.length;++Xt)Wt.buffers[Xt]&&Wt.buffers[Xt].destroy();Wt.buffers.length=0,Wt.destroy()},wt._vao=Wt,wt._reglType="vao",wt(At)}return ct}var id=35632,_u=35633,mh=35718,wu=35721;function cp(F,ie,be,nt){var dt={},Qe={};function st(He,lt,Ft,Kt){this.name=He,this.id=lt,this.location=Ft,this.info=Kt}function Nt(He,lt){for(var Ft=0;Ft<He.length;++Ft)if(He[Ft].id===lt.id){He[Ft].location=lt.location;return}He.push(lt)}function It(He,lt,Ft){var Kt=He===id?dt:Qe,xt=Kt[lt];if(!xt){var Jt=ie.str(lt);xt=F.createShader(He),F.shaderSource(xt,Jt),F.compileShader(xt),ne.shaderError(F,xt,Jt,He,Ft),Kt[lt]=xt}return xt}var Ct={},ct=[],Vt=0;function Ut(He,lt){this.id=Vt++,this.fragId=He,this.vertId=lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kt(He,lt,Ft){var Kt,xt,Jt=It(id,He.fragId),At=It(_u,He.vertId),Wt=He.program=F.createProgram();if(F.attachShader(Wt,Jt),F.attachShader(Wt,At),Ft)for(Kt=0;Kt<Ft.length;++Kt){var wt=Ft[Kt];F.bindAttribLocation(Wt,wt[0],wt[1])}F.linkProgram(Wt),ne.linkError(F,Wt,ie.str(He.fragId),ie.str(He.vertId),lt);var Xt=F.getProgramParameter(Wt,mh);nt.profile&&(He.stats.uniformsCount=Xt);var Mn=He.uniforms;for(Kt=0;Kt<Xt;++Kt)if(xt=F.getActiveUniform(Wt,Kt),xt)if(xt.size>1)for(var Wn=0;Wn<xt.size;++Wn){var Lt=xt.name.replace("[0]","["+Wn+"]");Nt(Mn,new st(Lt,ie.id(Lt),F.getUniformLocation(Wt,Lt),xt))}else Nt(Mn,new st(xt.name,ie.id(xt.name),F.getUniformLocation(Wt,xt.name),xt));var Tt=F.getProgramParameter(Wt,wu);nt.profile&&(He.stats.attributesCount=Tt);var Et=He.attributes;for(Kt=0;Kt<Tt;++Kt)xt=F.getActiveAttrib(Wt,Kt),xt&&Nt(Et,new st(xt.name,ie.id(xt.name),F.getAttribLocation(Wt,xt.name),xt))}nt.profile&&(be.getMaxUniformsCount=function(){var He=0;return ct.forEach(function(lt){lt.stats.uniformsCount>He&&(He=lt.stats.uniformsCount)}),He},be.getMaxAttributesCount=function(){var He=0;return ct.forEach(function(lt){lt.stats.attributesCount>He&&(He=lt.stats.attributesCount)}),He});function _t(){dt={},Qe={};for(var He=0;He<ct.length;++He)kt(ct[He],null,ct[He].attributes.map(function(lt){return[lt.location,lt.name]}))}return{clear:function(){var He=F.deleteShader.bind(F);ii(dt).forEach(He),dt={},ii(Qe).forEach(He),Qe={},ct.forEach(function(lt){F.deleteProgram(lt.program)}),ct.length=0,Ct={},be.shaderCount=0},program:function(He,lt,Ft,Kt){ne.command(He>=0,"missing vertex shader",Ft),ne.command(lt>=0,"missing fragment shader",Ft);var xt=Ct[lt];xt||(xt=Ct[lt]={});var Jt=xt[He];if(Jt&&(Jt.refCount++,!Kt))return Jt;var At=new Ut(lt,He);return be.shaderCount++,kt(At,Ft,Kt),Jt||(xt[He]=At),ct.push(At),o(At,{destroy:function(){if(At.refCount--,At.refCount<=0){F.deleteProgram(At.program);var Wt=ct.indexOf(At);ct.splice(Wt,1),be.shaderCount--}xt[At.vertId].refCount<=0&&(F.deleteShader(Qe[At.vertId]),delete Qe[At.vertId],delete Ct[At.fragId][At.vertId]),Object.keys(Ct[At.fragId]).length||(F.deleteShader(dt[At.fragId]),delete dt[At.fragId],delete Ct[At.fragId])}})},restore:_t,shader:It,frag:-1,vert:-1}}var fp=6408,Qu=5121,po=3333,zc=5126;function wo(F,ie,be,nt,dt,Qe,st){function Nt(ct){var Vt;ie.next===null?(ne(dt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Vt=Qu):(ne(ie.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Vt=ie.next.colorAttachments[0].texture._texture.type,Qe.oes_texture_float?(ne(Vt===Qu||Vt===zc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Vt===zc&&ne(st.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ne(Vt===Qu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,kt=0,_t=nt.framebufferWidth,He=nt.framebufferHeight,lt=null;n(ct)?lt=ct:ct&&(ne.type(ct,"object","invalid arguments to regl.read()"),Ut=ct.x|0,kt=ct.y|0,ne(Ut>=0&&Ut<nt.framebufferWidth,"invalid x offset for regl.read"),ne(kt>=0&&kt<nt.framebufferHeight,"invalid y offset for regl.read"),_t=(ct.width||nt.framebufferWidth-Ut)|0,He=(ct.height||nt.framebufferHeight-kt)|0,lt=ct.data||null),lt&&(Vt===Qu?ne(lt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Vt===zc&&ne(lt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ne(_t>0&&_t+Ut<=nt.framebufferWidth,"invalid width for read pixels"),ne(He>0&&He+kt<=nt.framebufferHeight,"invalid height for read pixels"),be();var Ft=_t*He*4;return lt||(Vt===Qu?lt=new Uint8Array(Ft):Vt===zc&&(lt=lt||new Float32Array(Ft))),ne.isTypedArray(lt,"data buffer for regl.read() must be a typedarray"),ne(lt.byteLength>=Ft,"data buffer for regl.read() too small"),F.pixelStorei(po,4),F.readPixels(Ut,kt,_t,He,fp,Vt,lt),lt}function It(ct){var Vt;return ie.setFBO({framebuffer:ct.framebuffer},function(){Vt=Nt(ct)}),Vt}function Ct(ct){return!ct||!("framebuffer"in ct)?Nt(ct):It(ct)}return Ct}function Hl(F){return Array.prototype.slice.call(F)}function pi(F){return Hl(F).join("")}function _l(){var F=0,ie=[],be=[];function nt(Vt){for(var Ut=0;Ut<be.length;++Ut)if(be[Ut]===Vt)return ie[Ut];var kt="g"+F++;return ie.push(kt),be.push(Vt),kt}function dt(){var Vt=[];function Ut(){Vt.push.apply(Vt,Hl(arguments))}var kt=[];function _t(){var He="v"+F++;return kt.push(He),arguments.length>0&&(Vt.push(He,"="),Vt.push.apply(Vt,Hl(arguments)),Vt.push(";")),He}return o(Ut,{def:_t,toString:function(){return pi([kt.length>0?"var "+kt.join(",")+";":"",pi(Vt)])}})}function Qe(){var Vt=dt(),Ut=dt(),kt=Vt.toString,_t=Ut.toString;function He(lt,Ft){Ut(lt,Ft,"=",Vt.def(lt,Ft),";")}return o(function(){Vt.apply(Vt,Hl(arguments))},{def:Vt.def,entry:Vt,exit:Ut,save:He,set:function(lt,Ft,Kt){He(lt,Ft),Vt(lt,Ft,"=",Kt,";")},toString:function(){return kt()+_t()}})}function st(){var Vt=pi(arguments),Ut=Qe(),kt=Qe(),_t=Ut.toString,He=kt.toString;return o(Ut,{then:function(){return Ut.apply(Ut,Hl(arguments)),this},else:function(){return kt.apply(kt,Hl(arguments)),this},toString:function(){var lt=He();return lt&&(lt="else{"+lt+"}"),pi(["if(",Vt,"){",_t(),"}",lt])}})}var Nt=dt(),It={};function Ct(Vt,Ut){var kt=[];function _t(){var xt="a"+kt.length;return kt.push(xt),xt}Ut=Ut||0;for(var He=0;He<Ut;++He)_t();var lt=Qe(),Ft=lt.toString,Kt=It[Vt]=o(lt,{arg:_t,toString:function(){return pi(["function(",kt.join(),"){",Ft(),"}"])}});return Kt}function ct(){var Vt=['"use strict";',Nt,"return {"];Object.keys(It).forEach(function(_t){Vt.push('"',_t,'":',It[_t].toString(),",")}),Vt.push("}");var Ut=pi(Vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),kt=Function.apply(null,ie.concat(Ut));return kt.apply(null,be)}return{global:Nt,link:nt,block:dt,proc:Ct,scope:Qe,cond:st,compile:ct}}var Xl="xyzw".split(""),Eu=5121,es=1,ad=2,ld=0,wl=1,ts=2,ud=3,Hc=4,Ou=5,dp=6,js="dither",sd="blend.enable",Xc="blend.color",El="blend.equation",Is="blend.func",Yc="depth.enable",qc="depth.func",cd="depth.range",fd="depth.mask",Ja="colorMask",pp="cull.enable",hp="cull.face",vp="frontFace",dd="lineWidth",Ol="polygonOffset.enable",Kc="polygonOffset.offset",pd="sample.alpha",hd="sample.enable",Ls="sample.coverage",Yl="stencil.enable",Jn="stencil.mask",Fs="stencil.func",Zc="stencil.opFront",Qa="stencil.opBack",$s="scissor.enable",Bs="scissor.box",Ao="viewport",Us="profile",xu="framebuffer",Jc="vert",oo="frag",$o="elements",ql="primitive",el="count",tl="offset",Su="instances",xl="vao",Gs="Width",Qc="Height",Au=xu+Gs,Vs=xu+Qc,Dt=Ao+Gs,yp=Ao+Qc,ns="drawingBuffer",ef=ns+Gs,vd=ns+Qc,mp=[Is,El,Fs,Zc,Qa,Ls,Ao,Bs,Kc],Sl=34962,gp=34963,nl=35632,Tu=35633,yd=3553,gh=34067,bh=2884,_h=3042,bp=3024,_p=2960,wp=2929,Ep=3089,wh=32823,Eh=32926,Oh=32928,Vi=5126,rs=35664,tf=35665,la=35666,Ca=5124,md=35667,Wi=35668,nf=35669,os=35670,Ws=35671,rf=35672,of=35673,zs=35674,Hs=35675,is=35676,Kl=35678,Qo=35680,af=4,lf=1028,Zl=1029,Op=2304,zi=2305,ei=32775,xh=32776,ja=519,Fn=7680,gd=0,as=1,bd=32774,Sh=513,Xs=36160,Ah=36064,rl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ls={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ol={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Th={frag:nl,vert:Tu},xp={cw:Op,ccw:zi};function Mu(F){return Array.isArray(F)||n(F)||ji(F)}function Al(F){return F.sort(function(ie,be){return ie===Ao?-1:be===Ao?1:ie<be?-1:1})}function Hi(F,ie,be,nt){this.thisDep=F,this.contextDep=ie,this.propDep=be,this.append=nt}function Gn(F){return F&&!(F.thisDep||F.contextDep||F.propDep)}function To(F){return new Hi(!1,!1,!1,F)}function Di(F,ie){var be=F.type;if(be===ld){var nt=F.data.length;return new Hi(!0,nt>=1,nt>=2,ie)}else if(be===Hc){var dt=F.data;return new Hi(dt.thisDep,dt.contextDep,dt.propDep,ie)}else{if(be===Ou)return new Hi(!1,!1,!1,ie);if(be===dp){for(var Qe=!1,st=!1,Nt=!1,It=0;It<F.data.length;++It){var Ct=F.data[It];if(Ct.type===wl)Nt=!0;else if(Ct.type===ts)st=!0;else if(Ct.type===ud)Qe=!0;else if(Ct.type===ld){Qe=!0;var ct=Ct.data;ct>=1&&(st=!0),ct>=2&&(Nt=!0)}else Ct.type===Hc&&(Qe=Qe||Ct.data.thisDep,st=st||Ct.data.contextDep,Nt=Nt||Ct.data.propDep)}return new Hi(Qe,st,Nt,ie)}else return new Hi(be===ud,be===ts,be===wl,ie)}}var ua=new Hi(!1,!1,!1,function(){});function qv(F,ie,be,nt,dt,Qe,st,Nt,It,Ct,ct,Vt,Ut,kt,_t){var He=Ct.Record,lt={add:32774,subtract:32778,"reverse subtract":32779};be.ext_blend_minmax&&(lt.min=ei,lt.max=xh);var Ft=be.angle_instanced_arrays,Kt=be.webgl_draw_buffers,xt={dirty:!0,profile:_t.profile},Jt={},At=[],Wt={},wt={};function Xt(ue){return ue.replace(".","_")}function Mn(ue,ee,Ae){var Ge=Xt(ue);At.push(ue),Jt[Ge]=xt[Ge]=!!Ae,Wt[Ge]=ee}function Wn(ue,ee,Ae){var Ge=Xt(ue);At.push(ue),Array.isArray(Ae)?(xt[Ge]=Ae.slice(),Jt[Ge]=Ae.slice()):xt[Ge]=Jt[Ge]=Ae,wt[Ge]=ee}Mn(js,bp),Mn(sd,_h),Wn(Xc,"blendColor",[0,0,0,0]),Wn(El,"blendEquationSeparate",[bd,bd]),Wn(Is,"blendFuncSeparate",[as,gd,as,gd]),Mn(Yc,wp,!0),Wn(qc,"depthFunc",Sh),Wn(cd,"depthRange",[0,1]),Wn(fd,"depthMask",!0),Wn(Ja,Ja,[!0,!0,!0,!0]),Mn(pp,bh),Wn(hp,"cullFace",Zl),Wn(vp,vp,zi),Wn(dd,dd,1),Mn(Ol,wh),Wn(Kc,"polygonOffset",[0,0]),Mn(pd,Eh),Mn(hd,Oh),Wn(Ls,"sampleCoverage",[1,!1]),Mn(Yl,_p),Wn(Jn,"stencilMask",-1),Wn(Fs,"stencilFunc",[ja,0,-1]),Wn(Zc,"stencilOpSeparate",[lf,Fn,Fn,Fn]),Wn(Qa,"stencilOpSeparate",[Zl,Fn,Fn,Fn]),Mn($s,Ep),Wn(Bs,"scissor",[0,0,F.drawingBufferWidth,F.drawingBufferHeight]),Wn(Ao,Ao,[0,0,F.drawingBufferWidth,F.drawingBufferHeight]);var Lt={gl:F,context:Ut,strings:ie,next:Jt,current:xt,draw:Vt,elements:Qe,buffer:dt,shader:ct,attributes:Ct.state,vao:Ct,uniforms:It,framebuffer:Nt,extensions:be,timer:kt,isBufferArgs:Mu},Tt={primTypes:Ko,compareFuncs:ls,blendFuncs:rl,blendEquations:lt,stencilOps:ol,glTypes:Fi,orientationType:xp};ne.optional(function(){Lt.isArrayLike=M}),Kt&&(Tt.backBuffer=[Zl],Tt.drawBuffer=Rr(nt.maxDrawbuffers,function(ue){return ue===0?[0]:Rr(ue,function(ee){return Ah+ee})}));var Et=0;function Cn(){var ue=_l(),ee=ue.link,Ae=ue.global;ue.id=Et++,ue.batchId="0";var Ge=ee(Lt),Xe=ue.shared={props:"a0"};Object.keys(Lt).forEach(function(we){Xe[we]=Ae.def(Ge,".",we)}),ne.optional(function(){ue.CHECK=ee(ne),ue.commandStr=ne.guessCommand(),ue.command=ee(ue.commandStr),ue.assert=function(we,se,Be){we("if(!(",se,"))",this.CHECK,".commandRaise(",ee(Be),",",this.command,");")},Tt.invalidBlendCombinations=Ys});var Ne=ue.next={},Te=ue.current={};Object.keys(wt).forEach(function(we){Array.isArray(xt[we])&&(Ne[we]=Ae.def(Xe.next,".",we),Te[we]=Ae.def(Xe.current,".",we))});var Le=ue.constants={};Object.keys(Tt).forEach(function(we){Le[we]=Ae.def(JSON.stringify(Tt[we]))}),ue.invoke=function(we,se){switch(se.type){case ld:var Be=["this",Xe.context,Xe.props,ue.batchId];return we.def(ee(se.data),".call(",Be.slice(0,Math.max(se.data.length+1,4)),")");case wl:return we.def(Xe.props,se.data);case ts:return we.def(Xe.context,se.data);case ud:return we.def("this",se.data);case Hc:return se.data.append(ue,we),se.data.ref;case Ou:return se.data.toString();case dp:return se.data.map(function(Ze){return ue.invoke(we,Ze)})}},ue.attribCache={};var fe={};return ue.scopeAttrib=function(we){var se=ie.id(we);if(se in fe)return fe[se];var Be=Ct.scope[se];Be||(Be=Ct.scope[se]=new He);var Ze=fe[se]=ee(Be);return Ze},ue}function nr(ue){var ee=ue.static,Ae=ue.dynamic,Ge;if(Us in ee){var Xe=!!ee[Us];Ge=To(function(Te,Le){return Xe}),Ge.enable=Xe}else if(Us in Ae){var Ne=Ae[Us];Ge=Di(Ne,function(Te,Le){return Te.invoke(Le,Ne)})}return Ge}function un(ue,ee){var Ae=ue.static,Ge=ue.dynamic;if(xu in Ae){var Xe=Ae[xu];return Xe?(Xe=Nt.getFramebuffer(Xe),ne.command(Xe,"invalid framebuffer object"),To(function(Te,Le){var fe=Te.link(Xe),we=Te.shared;Le.set(we.framebuffer,".next",fe);var se=we.context;return Le.set(se,"."+Au,fe+".width"),Le.set(se,"."+Vs,fe+".height"),fe})):To(function(Te,Le){var fe=Te.shared;Le.set(fe.framebuffer,".next","null");var we=fe.context;return Le.set(we,"."+Au,we+"."+ef),Le.set(we,"."+Vs,we+"."+vd),"null"})}else if(xu in Ge){var Ne=Ge[xu];return Di(Ne,function(Te,Le){var fe=Te.invoke(Le,Ne),we=Te.shared,se=we.framebuffer,Be=Le.def(se,".getFramebuffer(",fe,")");ne.optional(function(){Te.assert(Le,"!"+fe+"||"+Be,"invalid framebuffer object")}),Le.set(se,".next",Be);var Ze=we.context;return Le.set(Ze,"."+Au,Be+"?"+Be+".width:"+Ze+"."+ef),Le.set(Ze,"."+Vs,Be+"?"+Be+".height:"+Ze+"."+vd),Be})}else return null}function Qn(ue,ee,Ae){var Ge=ue.static,Xe=ue.dynamic;function Ne(fe){if(fe in Ge){var we=Ge[fe];ne.commandType(we,"object","invalid "+fe,Ae.commandStr);var se=!0,Be=we.x|0,Ze=we.y|0,d,m;return"width"in we?(d=we.width|0,ne.command(d>=0,"invalid "+fe,Ae.commandStr)):se=!1,"height"in we?(m=we.height|0,ne.command(m>=0,"invalid "+fe,Ae.commandStr)):se=!1,new Hi(!se&&ee&&ee.thisDep,!se&&ee&&ee.contextDep,!se&&ee&&ee.propDep,function(G,J){var de=G.shared.context,_e=d;"width"in we||(_e=J.def(de,".",Au,"-",Be));var Fe=m;return"height"in we||(Fe=J.def(de,".",Vs,"-",Ze)),[Be,Ze,_e,Fe]})}else if(fe in Xe){var E=Xe[fe],D=Di(E,function(G,J){var de=G.invoke(J,E);ne.optional(function(){G.assert(J,de+"&&typeof "+de+'==="object"',"invalid "+fe)});var _e=G.shared.context,Fe=J.def(de,".x|0"),pt=J.def(de,".y|0"),gt=J.def('"width" in ',de,"?",de,".width|0:","(",_e,".",Au,"-",Fe,")"),Gt=J.def('"height" in ',de,"?",de,".height|0:","(",_e,".",Vs,"-",pt,")");return ne.optional(function(){G.assert(J,gt+">=0&&"+Gt+">=0","invalid "+fe)}),[Fe,pt,gt,Gt]});return ee&&(D.thisDep=D.thisDep||ee.thisDep,D.contextDep=D.contextDep||ee.contextDep,D.propDep=D.propDep||ee.propDep),D}else return ee?new Hi(ee.thisDep,ee.contextDep,ee.propDep,function(G,J){var de=G.shared.context;return[0,0,J.def(de,".",Au),J.def(de,".",Vs)]}):null}var Te=Ne(Ao);if(Te){var Le=Te;Te=new Hi(Te.thisDep,Te.contextDep,Te.propDep,function(fe,we){var se=Le.append(fe,we),Be=fe.shared.context;return we.set(Be,"."+Dt,se[2]),we.set(Be,"."+yp,se[3]),se})}return{viewport:Te,scissor_box:Ne(Bs)}}function Vn(ue,ee){var Ae=ue.static,Ge=typeof Ae[oo]=="string"&&typeof Ae[Jc]=="string";if(Ge){if(Object.keys(ee.dynamic).length>0)return null;var Xe=ee.static,Ne=Object.keys(Xe);if(Ne.length>0&&typeof Xe[Ne[0]]=="number"){for(var Te=[],Le=0;Le<Ne.length;++Le)ne(typeof Xe[Ne[Le]]=="number","must specify all vertex attribute locations when using vaos"),Te.push([Xe[Ne[Le]]|0,Ne[Le]]);return Te}}return null}function rr(ue,ee,Ae){var Ge=ue.static,Xe=ue.dynamic;function Ne(se){if(se in Ge){var Be=ie.id(Ge[se]);ne.optional(function(){ct.shader(Th[se],Be,ne.guessCommand())});var Ze=To(function(){return Be});return Ze.id=Be,Ze}else if(se in Xe){var d=Xe[se];return Di(d,function(m,E){var D=m.invoke(E,d),G=E.def(m.shared.strings,".id(",D,")");return ne.optional(function(){E(m.shared.shader,".shader(",Th[se],",",G,",",m.command,");")}),G})}return null}var Te=Ne(oo),Le=Ne(Jc),fe=null,we;return Gn(Te)&&Gn(Le)?(fe=ct.program(Le.id,Te.id,null,Ae),we=To(function(se,Be){return se.link(fe)})):we=new Hi(Te&&Te.thisDep||Le&&Le.thisDep,Te&&Te.contextDep||Le&&Le.contextDep,Te&&Te.propDep||Le&&Le.propDep,function(se,Be){var Ze=se.shared.shader,d;Te?d=Te.append(se,Be):d=Be.def(Ze,".",oo);var m;Le?m=Le.append(se,Be):m=Be.def(Ze,".",Jc);var E=Ze+".program("+m+","+d;return ne.optional(function(){E+=","+se.command}),Be.def(E+")")}),{frag:Te,vert:Le,progVar:we,program:fe}}function gr(ue,ee){var Ae=ue.static,Ge=ue.dynamic;function Xe(){if($o in Ae){var se=Ae[$o];Mu(se)?se=Qe.getElements(Qe.create(se,!0)):se&&(se=Qe.getElements(se),ne.command(se,"invalid elements",ee.commandStr));var Be=To(function(d,m){if(se){var E=d.link(se);return d.ELEMENTS=E,E}return d.ELEMENTS=null,null});return Be.value=se,Be}else if($o in Ge){var Ze=Ge[$o];return Di(Ze,function(d,m){var E=d.shared,D=E.isBufferArgs,G=E.elements,J=d.invoke(m,Ze),de=m.def("null"),_e=m.def(D,"(",J,")"),Fe=d.cond(_e).then(de,"=",G,".createStream(",J,");").else(de,"=",G,".getElements(",J,");");return ne.optional(function(){d.assert(Fe.else,"!"+J+"||"+de,"invalid elements")}),m.entry(Fe),m.exit(d.cond(_e).then(G,".destroyStream(",de,");")),d.ELEMENTS=de,de})}return null}var Ne=Xe();function Te(){if(ql in Ae){var se=Ae[ql];return ne.commandParameter(se,Ko,"invalid primitve",ee.commandStr),To(function(Ze,d){return Ko[se]})}else if(ql in Ge){var Be=Ge[ql];return Di(Be,function(Ze,d){var m=Ze.constants.primTypes,E=Ze.invoke(d,Be);return ne.optional(function(){Ze.assert(d,E+" in "+m,"invalid primitive, must be one of "+Object.keys(Ko))}),d.def(m,"[",E,"]")})}else if(Ne)return Gn(Ne)?Ne.value?To(function(Ze,d){return d.def(Ze.ELEMENTS,".primType")}):To(function(){return af}):new Hi(Ne.thisDep,Ne.contextDep,Ne.propDep,function(Ze,d){var m=Ze.ELEMENTS;return d.def(m,"?",m,".primType:",af)});return null}function Le(se,Be){if(se in Ae){var Ze=Ae[se]|0;return ne.command(!Be||Ze>=0,"invalid "+se,ee.commandStr),To(function(m,E){return Be&&(m.OFFSET=Ze),Ze})}else if(se in Ge){var d=Ge[se];return Di(d,function(m,E){var D=m.invoke(E,d);return Be&&(m.OFFSET=D,ne.optional(function(){m.assert(E,D+">=0","invalid "+se)})),D})}else if(Be&&Ne)return To(function(m,E){return m.OFFSET="0",0});return null}var fe=Le(tl,!0);function we(){if(el in Ae){var se=Ae[el]|0;return ne.command(typeof se=="number"&&se>=0,"invalid vertex count",ee.commandStr),To(function(){return se})}else if(el in Ge){var Be=Ge[el];return Di(Be,function(m,E){var D=m.invoke(E,Be);return ne.optional(function(){m.assert(E,"typeof "+D+'==="number"&&'+D+">=0&&"+D+"===("+D+"|0)","invalid vertex count")}),D})}else if(Ne)if(Gn(Ne)){if(Ne)return fe?new Hi(fe.thisDep,fe.contextDep,fe.propDep,function(m,E){var D=E.def(m.ELEMENTS,".vertCount-",m.OFFSET);return ne.optional(function(){m.assert(E,D+">=0","invalid vertex offset/element buffer too small")}),D}):To(function(m,E){return E.def(m.ELEMENTS,".vertCount")});var Ze=To(function(){return-1});return ne.optional(function(){Ze.MISSING=!0}),Ze}else{var d=new Hi(Ne.thisDep||fe.thisDep,Ne.contextDep||fe.contextDep,Ne.propDep||fe.propDep,function(m,E){var D=m.ELEMENTS;return m.OFFSET?E.def(D,"?",D,".vertCount-",m.OFFSET,":-1"):E.def(D,"?",D,".vertCount:-1")});return ne.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:Ne,primitive:Te(),count:we(),instances:Le(Su,!1),offset:fe}}function Po(ue,ee){var Ae=ue.static,Ge=ue.dynamic,Xe={};return At.forEach(function(Ne){var Te=Xt(Ne);function Le(fe,we){if(Ne in Ae){var se=fe(Ae[Ne]);Xe[Te]=To(function(){return se})}else if(Ne in Ge){var Be=Ge[Ne];Xe[Te]=Di(Be,function(Ze,d){return we(Ze,d,Ze.invoke(d,Be))})}}switch(Ne){case pp:case sd:case js:case Yl:case Yc:case $s:case Ol:case pd:case hd:case fd:return Le(function(fe){return ne.commandType(fe,"boolean",Ne,ee.commandStr),fe},function(fe,we,se){return ne.optional(function(){fe.assert(we,"typeof "+se+'==="boolean"',"invalid flag "+Ne,fe.commandStr)}),se});case qc:return Le(function(fe){return ne.commandParameter(fe,ls,"invalid "+Ne,ee.commandStr),ls[fe]},function(fe,we,se){var Be=fe.constants.compareFuncs;return ne.optional(function(){fe.assert(we,se+" in "+Be,"invalid "+Ne+", must be one of "+Object.keys(ls))}),we.def(Be,"[",se,"]")});case cd:return Le(function(fe){return ne.command(M(fe)&&fe.length===2&&typeof fe[0]=="number"&&typeof fe[1]=="number"&&fe[0]<=fe[1],"depth range is 2d array",ee.commandStr),fe},function(fe,we,se){ne.optional(function(){fe.assert(we,fe.shared.isArrayLike+"("+se+")&&"+se+".length===2&&typeof "+se+'[0]==="number"&&typeof '+se+'[1]==="number"&&'+se+"[0]<="+se+"[1]","depth range must be a 2d array")});var Be=we.def("+",se,"[0]"),Ze=we.def("+",se,"[1]");return[Be,Ze]});case Is:return Le(function(fe){ne.commandType(fe,"object","blend.func",ee.commandStr);var we="srcRGB"in fe?fe.srcRGB:fe.src,se="srcAlpha"in fe?fe.srcAlpha:fe.src,Be="dstRGB"in fe?fe.dstRGB:fe.dst,Ze="dstAlpha"in fe?fe.dstAlpha:fe.dst;return ne.commandParameter(we,rl,Te+".srcRGB",ee.commandStr),ne.commandParameter(se,rl,Te+".srcAlpha",ee.commandStr),ne.commandParameter(Be,rl,Te+".dstRGB",ee.commandStr),ne.commandParameter(Ze,rl,Te+".dstAlpha",ee.commandStr),ne.command(Ys.indexOf(we+", "+Be)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+we+", "+Be+")",ee.commandStr),[rl[we],rl[Be],rl[se],rl[Ze]]},function(fe,we,se){var Be=fe.constants.blendFuncs;ne.optional(function(){fe.assert(we,se+"&&typeof "+se+'==="object"',"invalid blend func, must be an object")});function Ze(de,_e){var Fe=we.def('"',de,_e,'" in ',se,"?",se,".",de,_e,":",se,".",de);return ne.optional(function(){fe.assert(we,Fe+" in "+Be,"invalid "+Ne+"."+de+_e+", must be one of "+Object.keys(rl))}),Fe}var d=Ze("src","RGB"),m=Ze("dst","RGB");ne.optional(function(){var de=fe.constants.invalidBlendCombinations;fe.assert(we,de+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var E=we.def(Be,"[",d,"]"),D=we.def(Be,"[",Ze("src","Alpha"),"]"),G=we.def(Be,"[",m,"]"),J=we.def(Be,"[",Ze("dst","Alpha"),"]");return[E,G,D,J]});case El:return Le(function(fe){if(typeof fe=="string")return ne.commandParameter(fe,lt,"invalid "+Ne,ee.commandStr),[lt[fe],lt[fe]];if(typeof fe=="object")return ne.commandParameter(fe.rgb,lt,Ne+".rgb",ee.commandStr),ne.commandParameter(fe.alpha,lt,Ne+".alpha",ee.commandStr),[lt[fe.rgb],lt[fe.alpha]];ne.commandRaise("invalid blend.equation",ee.commandStr)},function(fe,we,se){var Be=fe.constants.blendEquations,Ze=we.def(),d=we.def(),m=fe.cond("typeof ",se,'==="string"');return ne.optional(function(){function E(D,G,J){fe.assert(D,J+" in "+Be,"invalid "+G+", must be one of "+Object.keys(lt))}E(m.then,Ne,se),fe.assert(m.else,se+"&&typeof "+se+'==="object"',"invalid "+Ne),E(m.else,Ne+".rgb",se+".rgb"),E(m.else,Ne+".alpha",se+".alpha")}),m.then(Ze,"=",d,"=",Be,"[",se,"];"),m.else(Ze,"=",Be,"[",se,".rgb];",d,"=",Be,"[",se,".alpha];"),we(m),[Ze,d]});case Xc:return Le(function(fe){return ne.command(M(fe)&&fe.length===4,"blend.color must be a 4d array",ee.commandStr),Rr(4,function(we){return+fe[we]})},function(fe,we,se){return ne.optional(function(){fe.assert(we,fe.shared.isArrayLike+"("+se+")&&"+se+".length===4","blend.color must be a 4d array")}),Rr(4,function(Be){return we.def("+",se,"[",Be,"]")})});case Jn:return Le(function(fe){return ne.commandType(fe,"number",Te,ee.commandStr),fe|0},function(fe,we,se){return ne.optional(function(){fe.assert(we,"typeof "+se+'==="number"',"invalid stencil.mask")}),we.def(se,"|0")});case Fs:return Le(function(fe){ne.commandType(fe,"object",Te,ee.commandStr);var we=fe.cmp||"keep",se=fe.ref||0,Be="mask"in fe?fe.mask:-1;return ne.commandParameter(we,ls,Ne+".cmp",ee.commandStr),ne.commandType(se,"number",Ne+".ref",ee.commandStr),ne.commandType(Be,"number",Ne+".mask",ee.commandStr),[ls[we],se,Be]},function(fe,we,se){var Be=fe.constants.compareFuncs;ne.optional(function(){function E(){fe.assert(we,Array.prototype.join.call(arguments,""),"invalid stencil.func")}E(se+"&&typeof ",se,'==="object"'),E('!("cmp" in ',se,")||(",se,".cmp in ",Be,")")});var Ze=we.def('"cmp" in ',se,"?",Be,"[",se,".cmp]",":",Fn),d=we.def(se,".ref|0"),m=we.def('"mask" in ',se,"?",se,".mask|0:-1");return[Ze,d,m]});case Zc:case Qa:return Le(function(fe){ne.commandType(fe,"object",Te,ee.commandStr);var we=fe.fail||"keep",se=fe.zfail||"keep",Be=fe.zpass||"keep";return ne.commandParameter(we,ol,Ne+".fail",ee.commandStr),ne.commandParameter(se,ol,Ne+".zfail",ee.commandStr),ne.commandParameter(Be,ol,Ne+".zpass",ee.commandStr),[Ne===Qa?Zl:lf,ol[we],ol[se],ol[Be]]},function(fe,we,se){var Be=fe.constants.stencilOps;ne.optional(function(){fe.assert(we,se+"&&typeof "+se+'==="object"',"invalid "+Ne)});function Ze(d){return ne.optional(function(){fe.assert(we,'!("'+d+'" in '+se+")||("+se+"."+d+" in "+Be+")","invalid "+Ne+"."+d+", must be one of "+Object.keys(ol))}),we.def('"',d,'" in ',se,"?",Be,"[",se,".",d,"]:",Fn)}return[Ne===Qa?Zl:lf,Ze("fail"),Ze("zfail"),Ze("zpass")]});case Kc:return Le(function(fe){ne.commandType(fe,"object",Te,ee.commandStr);var we=fe.factor|0,se=fe.units|0;return ne.commandType(we,"number",Te+".factor",ee.commandStr),ne.commandType(se,"number",Te+".units",ee.commandStr),[we,se]},function(fe,we,se){ne.optional(function(){fe.assert(we,se+"&&typeof "+se+'==="object"',"invalid "+Ne)});var Be=we.def(se,".factor|0"),Ze=we.def(se,".units|0");return[Be,Ze]});case hp:return Le(function(fe){var we=0;return fe==="front"?we=lf:fe==="back"&&(we=Zl),ne.command(!!we,Te,ee.commandStr),we},function(fe,we,se){return ne.optional(function(){fe.assert(we,se+'==="front"||'+se+'==="back"',"invalid cull.face")}),we.def(se,'==="front"?',lf,":",Zl)});case dd:return Le(function(fe){return ne.command(typeof fe=="number"&&fe>=nt.lineWidthDims[0]&&fe<=nt.lineWidthDims[1],"invalid line width, must be a positive number between "+nt.lineWidthDims[0]+" and "+nt.lineWidthDims[1],ee.commandStr),fe},function(fe,we,se){return ne.optional(function(){fe.assert(we,"typeof "+se+'==="number"&&'+se+">="+nt.lineWidthDims[0]+"&&"+se+"<="+nt.lineWidthDims[1],"invalid line width")}),se});case vp:return Le(function(fe){return ne.commandParameter(fe,xp,Te,ee.commandStr),xp[fe]},function(fe,we,se){return ne.optional(function(){fe.assert(we,se+'==="cw"||'+se+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),we.def(se+'==="cw"?'+Op+":"+zi)});case Ja:return Le(function(fe){return ne.command(M(fe)&&fe.length===4,"color.mask must be length 4 array",ee.commandStr),fe.map(function(we){return!!we})},function(fe,we,se){return ne.optional(function(){fe.assert(we,fe.shared.isArrayLike+"("+se+")&&"+se+".length===4","invalid color.mask")}),Rr(4,function(Be){return"!!"+se+"["+Be+"]"})});case Ls:return Le(function(fe){ne.command(typeof fe=="object"&&fe,Te,ee.commandStr);var we="value"in fe?fe.value:1,se=!!fe.invert;return ne.command(typeof we=="number"&&we>=0&&we<=1,"sample.coverage.value must be a number between 0 and 1",ee.commandStr),[we,se]},function(fe,we,se){ne.optional(function(){fe.assert(we,se+"&&typeof "+se+'==="object"',"invalid sample.coverage")});var Be=we.def('"value" in ',se,"?+",se,".value:1"),Ze=we.def("!!",se,".invert");return[Be,Ze]})}}),Xe}function Bo(ue,ee){var Ae=ue.static,Ge=ue.dynamic,Xe={};return Object.keys(Ae).forEach(function(Ne){var Te=Ae[Ne],Le;if(typeof Te=="number"||typeof Te=="boolean")Le=To(function(){return Te});else if(typeof Te=="function"){var fe=Te._reglType;fe==="texture2d"||fe==="textureCube"?Le=To(function(we){return we.link(Te)}):fe==="framebuffer"||fe==="framebufferCube"?(ne.command(Te.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ne+'"',ee.commandStr),Le=To(function(we){return we.link(Te.color[0])})):ne.commandRaise('invalid data for uniform "'+Ne+'"',ee.commandStr)}else M(Te)?Le=To(function(we){var se=we.global.def("[",Rr(Te.length,function(Be){return ne.command(typeof Te[Be]=="number"||typeof Te[Be]=="boolean","invalid uniform "+Ne,we.commandStr),Te[Be]}),"]");return se}):ne.commandRaise('invalid or missing data for uniform "'+Ne+'"',ee.commandStr);Le.value=Te,Xe[Ne]=Le}),Object.keys(Ge).forEach(function(Ne){var Te=Ge[Ne];Xe[Ne]=Di(Te,function(Le,fe){return Le.invoke(fe,Te)})}),Xe}function cr(ue,ee){var Ae=ue.static,Ge=ue.dynamic,Xe={};return Object.keys(Ae).forEach(function(Ne){var Te=Ae[Ne],Le=ie.id(Ne),fe=new He;if(Mu(Te))fe.state=es,fe.buffer=dt.getBuffer(dt.create(Te,Sl,!1,!0)),fe.type=0;else{var we=dt.getBuffer(Te);if(we)fe.state=es,fe.buffer=we,fe.type=0;else if(ne.command(typeof Te=="object"&&Te,"invalid data for attribute "+Ne,ee.commandStr),"constant"in Te){var se=Te.constant;fe.buffer="null",fe.state=ad,typeof se=="number"?fe.x=se:(ne.command(M(se)&&se.length>0&&se.length<=4,"invalid constant for attribute "+Ne,ee.commandStr),Xl.forEach(function(G,J){J<se.length&&(fe[G]=se[J])}))}else{Mu(Te.buffer)?we=dt.getBuffer(dt.create(Te.buffer,Sl,!1,!0)):we=dt.getBuffer(Te.buffer),ne.command(!!we,'missing buffer for attribute "'+Ne+'"',ee.commandStr);var Be=Te.offset|0;ne.command(Be>=0,'invalid offset for attribute "'+Ne+'"',ee.commandStr);var Ze=Te.stride|0;ne.command(Ze>=0&&Ze<256,'invalid stride for attribute "'+Ne+'", must be integer betweeen [0, 255]',ee.commandStr);var d=Te.size|0;ne.command(!("size"in Te)||d>0&&d<=4,'invalid size for attribute "'+Ne+'", must be 1,2,3,4',ee.commandStr);var m=!!Te.normalized,E=0;"type"in Te&&(ne.commandParameter(Te.type,Fi,"invalid type for attribute "+Ne,ee.commandStr),E=Fi[Te.type]);var D=Te.divisor|0;"divisor"in Te&&(ne.command(D===0||Ft,'cannot specify divisor for attribute "'+Ne+'", instancing not supported',ee.commandStr),ne.command(D>=0,'invalid divisor for attribute "'+Ne+'"',ee.commandStr)),ne.optional(function(){var G=ee.commandStr,J=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Te).forEach(function(de){ne.command(J.indexOf(de)>=0,'unknown parameter "'+de+'" for attribute pointer "'+Ne+'" (valid parameters are '+J+")",G)})}),fe.buffer=we,fe.state=es,fe.size=d,fe.normalized=m,fe.type=E||we.dtype,fe.offset=Be,fe.stride=Ze,fe.divisor=D}}Xe[Ne]=To(function(G,J){var de=G.attribCache;if(Le in de)return de[Le];var _e={isStream:!1};return Object.keys(fe).forEach(function(Fe){_e[Fe]=fe[Fe]}),fe.buffer&&(_e.buffer=G.link(fe.buffer),_e.type=_e.type||_e.buffer+".dtype"),de[Le]=_e,_e})}),Object.keys(Ge).forEach(function(Ne){var Te=Ge[Ne];function Le(fe,we){var se=fe.invoke(we,Te),Be=fe.shared,Ze=fe.constants,d=Be.isBufferArgs,m=Be.buffer;ne.optional(function(){fe.assert(we,se+"&&(typeof "+se+'==="object"||typeof '+se+'==="function")&&('+d+"("+se+")||"+m+".getBuffer("+se+")||"+m+".getBuffer("+se+".buffer)||"+d+"("+se+'.buffer)||("constant" in '+se+"&&(typeof "+se+'.constant==="number"||'+Be.isArrayLike+"("+se+".constant))))",'invalid dynamic attribute "'+Ne+'"')});var E={isStream:we.def(!1)},D=new He;D.state=es,Object.keys(D).forEach(function(_e){E[_e]=we.def(""+D[_e])});var G=E.buffer,J=E.type;we("if(",d,"(",se,")){",E.isStream,"=true;",G,"=",m,".createStream(",Sl,",",se,");",J,"=",G,".dtype;","}else{",G,"=",m,".getBuffer(",se,");","if(",G,"){",J,"=",G,".dtype;",'}else if("constant" in ',se,"){",E.state,"=",ad,";","if(typeof "+se+'.constant === "number"){',E[Xl[0]],"=",se,".constant;",Xl.slice(1).map(function(_e){return E[_e]}).join("="),"=0;","}else{",Xl.map(function(_e,Fe){return E[_e]+"="+se+".constant.length>"+Fe+"?"+se+".constant["+Fe+"]:0;"}).join(""),"}}else{","if(",d,"(",se,".buffer)){",G,"=",m,".createStream(",Sl,",",se,".buffer);","}else{",G,"=",m,".getBuffer(",se,".buffer);","}",J,'="type" in ',se,"?",Ze.glTypes,"[",se,".type]:",G,".dtype;",E.normalized,"=!!",se,".normalized;");function de(_e){we(E[_e],"=",se,".",_e,"|0;")}return de("size"),de("offset"),de("stride"),de("divisor"),we("}}"),we.exit("if(",E.isStream,"){",m,".destroyStream(",G,");","}"),E}Xe[Ne]=Di(Te,Le)}),Xe}function Wo(ue,ee){var Ae=ue.static,Ge=ue.dynamic;if(xl in Ae){var Xe=Ae[xl];return Xe!==null&&Ct.getVAO(Xe)===null&&(Xe=Ct.createVAO(Xe)),To(function(Te){return Te.link(Ct.getVAO(Xe))})}else if(xl in Ge){var Ne=Ge[xl];return Di(Ne,function(Te,Le){var fe=Te.invoke(Le,Ne);return Le.def(Te.shared.vao+".getVAO("+fe+")")})}return null}function to(ue){var ee=ue.static,Ae=ue.dynamic,Ge={};return Object.keys(ee).forEach(function(Xe){var Ne=ee[Xe];Ge[Xe]=To(function(Te,Le){return typeof Ne=="number"||typeof Ne=="boolean"?""+Ne:Te.link(Ne)})}),Object.keys(Ae).forEach(function(Xe){var Ne=Ae[Xe];Ge[Xe]=Di(Ne,function(Te,Le){return Te.invoke(Le,Ne)})}),Ge}function No(ue,ee,Ae,Ge,Xe){var Ne=ue.static,Te=ue.dynamic;ne.optional(function(){var de=[xu,Jc,oo,$o,ql,tl,el,Su,Us,xl].concat(At);function _e(Fe){Object.keys(Fe).forEach(function(pt){ne.command(de.indexOf(pt)>=0,'unknown parameter "'+pt+'"',Xe.commandStr)})}_e(Ne),_e(Te)});var Le=Vn(ue,ee),fe=un(ue),we=Qn(ue,fe,Xe),se=gr(ue,Xe),Be=Po(ue,Xe),Ze=rr(ue,Xe,Le);function d(de){var _e=we[de];_e&&(Be[de]=_e)}d(Ao),d(Xt(Bs));var m=Object.keys(Be).length>0,E={framebuffer:fe,draw:se,shader:Ze,state:Be,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(E.profile=nr(ue),E.uniforms=Bo(Ae,Xe),E.drawVAO=E.scopeVAO=Wo(ue),!E.drawVAO&&Ze.program&&!Le&&be.angle_instanced_arrays){var D=!0,G=Ze.program.attributes.map(function(de){var _e=ee.static[de];return D=D&&!!_e,_e});if(D&&G.length>0){var J=Ct.getVAO(Ct.createVAO(G));E.drawVAO=new Hi(null,null,null,function(de,_e){return de.link(J)}),E.useVAO=!0}}return Le?E.useVAO=!0:E.attributes=cr(ee,Xe),E.context=to(Ge),E}function Uo(ue,ee,Ae){var Ge=ue.shared,Xe=Ge.context,Ne=ue.scope();Object.keys(Ae).forEach(function(Te){ee.save(Xe,"."+Te);var Le=Ae[Te],fe=Le.append(ue,ee);Array.isArray(fe)?Ne(Xe,".",Te,"=[",fe.join(),"];"):Ne(Xe,".",Te,"=",fe,";")}),ee(Ne)}function Eo(ue,ee,Ae,Ge){var Xe=ue.shared,Ne=Xe.gl,Te=Xe.framebuffer,Le;Kt&&(Le=ee.def(Xe.extensions,".webgl_draw_buffers"));var fe=ue.constants,we=fe.drawBuffer,se=fe.backBuffer,Be;Ae?Be=Ae.append(ue,ee):Be=ee.def(Te,".next"),Ge||ee("if(",Be,"!==",Te,".cur){"),ee("if(",Be,"){",Ne,".bindFramebuffer(",Xs,",",Be,".framebuffer);"),Kt&&ee(Le,".drawBuffersWEBGL(",we,"[",Be,".colorAttachments.length]);"),ee("}else{",Ne,".bindFramebuffer(",Xs,",null);"),Kt&&ee(Le,".drawBuffersWEBGL(",se,");"),ee("}",Te,".cur=",Be,";"),Ge||ee("}")}function mo(ue,ee,Ae){var Ge=ue.shared,Xe=Ge.gl,Ne=ue.current,Te=ue.next,Le=Ge.current,fe=Ge.next,we=ue.cond(Le,".dirty");At.forEach(function(se){var Be=Xt(se);if(!(Be in Ae.state)){var Ze,d;if(Be in Te){Ze=Te[Be],d=Ne[Be];var m=Rr(xt[Be].length,function(D){return we.def(Ze,"[",D,"]")});we(ue.cond(m.map(function(D,G){return D+"!=="+d+"["+G+"]"}).join("||")).then(Xe,".",wt[Be],"(",m,");",m.map(function(D,G){return d+"["+G+"]="+D}).join(";"),";"))}else{Ze=we.def(fe,".",Be);var E=ue.cond(Ze,"!==",Le,".",Be);we(E),Be in Wt?E(ue.cond(Ze).then(Xe,".enable(",Wt[Be],");").else(Xe,".disable(",Wt[Be],");"),Le,".",Be,"=",Ze,";"):E(Xe,".",wt[Be],"(",Ze,");",Le,".",Be,"=",Ze,";")}}}),Object.keys(Ae.state).length===0&&we(Le,".dirty=false;"),ee(we)}function ni(ue,ee,Ae,Ge){var Xe=ue.shared,Ne=ue.current,Te=Xe.current,Le=Xe.gl;Al(Object.keys(Ae)).forEach(function(fe){var we=Ae[fe];if(!(Ge&&!Ge(we))){var se=we.append(ue,ee);if(Wt[fe]){var Be=Wt[fe];Gn(we)?se?ee(Le,".enable(",Be,");"):ee(Le,".disable(",Be,");"):ee(ue.cond(se).then(Le,".enable(",Be,");").else(Le,".disable(",Be,");")),ee(Te,".",fe,"=",se,";")}else if(M(se)){var Ze=Ne[fe];ee(Le,".",wt[fe],"(",se,");",se.map(function(d,m){return Ze+"["+m+"]="+d}).join(";"),";")}else ee(Le,".",wt[fe],"(",se,");",Te,".",fe,"=",se,";")}})}function Oo(ue,ee){Ft&&(ue.instancing=ee.def(ue.shared.extensions,".angle_instanced_arrays"))}function Zn(ue,ee,Ae,Ge,Xe){var Ne=ue.shared,Te=ue.stats,Le=Ne.current,fe=Ne.timer,we=Ae.profile;function se(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Be,Ze;function d(de){Be=ee.def(),de(Be,"=",se(),";"),typeof Xe=="string"?de(Te,".count+=",Xe,";"):de(Te,".count++;"),kt&&(Ge?(Ze=ee.def(),de(Ze,"=",fe,".getNumPendingQueries();")):de(fe,".beginQuery(",Te,");"))}function m(de){de(Te,".cpuTime+=",se(),"-",Be,";"),kt&&(Ge?de(fe,".pushScopeStats(",Ze,",",fe,".getNumPendingQueries(),",Te,");"):de(fe,".endQuery();"))}function E(de){var _e=ee.def(Le,".profile");ee(Le,".profile=",de,";"),ee.exit(Le,".profile=",_e,";")}var D;if(we){if(Gn(we)){we.enable?(d(ee),m(ee.exit),E("true")):E("false");return}D=we.append(ue,ee),E(D)}else D=ee.def(Le,".profile");var G=ue.block();d(G),ee("if(",D,"){",G,"}");var J=ue.block();m(J),ee.exit("if(",D,"){",J,"}")}function ui(ue,ee,Ae,Ge,Xe){var Ne=ue.shared;function Te(fe){switch(fe){case rs:case md:case Ws:return 2;case tf:case Wi:case rf:return 3;case la:case nf:case of:return 4;default:return 1}}function Le(fe,we,se){var Be=Ne.gl,Ze=ee.def(fe,".location"),d=ee.def(Ne.attributes,"[",Ze,"]"),m=se.state,E=se.buffer,D=[se.x,se.y,se.z,se.w],G=["buffer","normalized","offset","stride"];function J(){ee("if(!",d,".buffer){",Be,".enableVertexAttribArray(",Ze,");}");var _e=se.type,Fe;if(se.size?Fe=ee.def(se.size,"||",we):Fe=we,ee("if(",d,".type!==",_e,"||",d,".size!==",Fe,"||",G.map(function(gt){return d+"."+gt+"!=="+se[gt]}).join("||"),"){",Be,".bindBuffer(",Sl,",",E,".buffer);",Be,".vertexAttribPointer(",[Ze,Fe,_e,se.normalized,se.stride,se.offset],");",d,".type=",_e,";",d,".size=",Fe,";",G.map(function(gt){return d+"."+gt+"="+se[gt]+";"}).join(""),"}"),Ft){var pt=se.divisor;ee("if(",d,".divisor!==",pt,"){",ue.instancing,".vertexAttribDivisorANGLE(",[Ze,pt],");",d,".divisor=",pt,";}")}}function de(){ee("if(",d,".buffer){",Be,".disableVertexAttribArray(",Ze,");",d,".buffer=null;","}if(",Xl.map(function(_e,Fe){return d+"."+_e+"!=="+D[Fe]}).join("||"),"){",Be,".vertexAttrib4f(",Ze,",",D,");",Xl.map(function(_e,Fe){return d+"."+_e+"="+D[Fe]+";"}).join(""),"}")}m===es?J():m===ad?de():(ee("if(",m,"===",es,"){"),J(),ee("}else{"),de(),ee("}"))}Ge.forEach(function(fe){var we=fe.name,se=Ae.attributes[we],Be;if(se){if(!Xe(se))return;Be=se.append(ue,ee)}else{if(!Xe(ua))return;var Ze=ue.scopeAttrib(we);ne.optional(function(){ue.assert(ee,Ze+".state","missing attribute "+we)}),Be={},Object.keys(new He).forEach(function(d){Be[d]=ee.def(Ze,".",d)})}Le(ue.link(fe),Te(fe.info.type),Be)})}function Nr(ue,ee,Ae,Ge,Xe){for(var Ne=ue.shared,Te=Ne.gl,Le,fe=0;fe<Ge.length;++fe){var we=Ge[fe],se=we.name,Be=we.info.type,Ze=Ae.uniforms[se],d=ue.link(we),m=d+".location",E;if(Ze){if(!Xe(Ze))continue;if(Gn(Ze)){var D=Ze.value;if(ne.command(D!==null&&typeof D<"u",'missing uniform "'+se+'"',ue.commandStr),Be===Kl||Be===Qo){ne.command(typeof D=="function"&&(Be===Kl&&(D._reglType==="texture2d"||D._reglType==="framebuffer")||Be===Qo&&(D._reglType==="textureCube"||D._reglType==="framebufferCube")),"invalid texture for uniform "+se,ue.commandStr);var G=ue.link(D._texture||D.color[0]._texture);ee(Te,".uniform1i(",m,",",G+".bind());"),ee.exit(G,".unbind();")}else if(Be===zs||Be===Hs||Be===is){ne.optional(function(){ne.command(M(D),"invalid matrix for uniform "+se,ue.commandStr),ne.command(Be===zs&&D.length===4||Be===Hs&&D.length===9||Be===is&&D.length===16,"invalid length for matrix uniform "+se,ue.commandStr)});var J=ue.global.def("new Float32Array(["+Array.prototype.slice.call(D)+"])"),de=2;Be===Hs?de=3:Be===is&&(de=4),ee(Te,".uniformMatrix",de,"fv(",m,",false,",J,");")}else{switch(Be){case Vi:ne.commandType(D,"number","uniform "+se,ue.commandStr),Le="1f";break;case rs:ne.command(M(D)&&D.length===2,"uniform "+se,ue.commandStr),Le="2f";break;case tf:ne.command(M(D)&&D.length===3,"uniform "+se,ue.commandStr),Le="3f";break;case la:ne.command(M(D)&&D.length===4,"uniform "+se,ue.commandStr),Le="4f";break;case os:ne.commandType(D,"boolean","uniform "+se,ue.commandStr),Le="1i";break;case Ca:ne.commandType(D,"number","uniform "+se,ue.commandStr),Le="1i";break;case Ws:ne.command(M(D)&&D.length===2,"uniform "+se,ue.commandStr),Le="2i";break;case md:ne.command(M(D)&&D.length===2,"uniform "+se,ue.commandStr),Le="2i";break;case rf:ne.command(M(D)&&D.length===3,"uniform "+se,ue.commandStr),Le="3i";break;case Wi:ne.command(M(D)&&D.length===3,"uniform "+se,ue.commandStr),Le="3i";break;case of:ne.command(M(D)&&D.length===4,"uniform "+se,ue.commandStr),Le="4i";break;case nf:ne.command(M(D)&&D.length===4,"uniform "+se,ue.commandStr),Le="4i";break}ee(Te,".uniform",Le,"(",m,",",M(D)?Array.prototype.slice.call(D):D,");")}continue}else E=Ze.append(ue,ee)}else{if(!Xe(ua))continue;E=ee.def(Ne.uniforms,"[",ie.id(se),"]")}Be===Kl?(ne(!Array.isArray(E),"must specify a scalar prop for textures"),ee("if(",E,"&&",E,'._reglType==="framebuffer"){',E,"=",E,".color[0];","}")):Be===Qo&&(ne(!Array.isArray(E),"must specify a scalar prop for cube maps"),ee("if(",E,"&&",E,'._reglType==="framebufferCube"){',E,"=",E,".color[0];","}")),ne.optional(function(){function Gt(Pt,Qt){ue.assert(ee,Pt,'bad data or missing for uniform "'+se+'".  '+Qt)}function An(Pt){ne(!Array.isArray(E),"must not specify an array type for uniform"),Gt("typeof "+E+'==="'+Pt+'"',"invalid type, expected "+Pt)}function On(Pt,Qt){Array.isArray(E)?ne(E.length===Pt,"must have length "+Pt):Gt(Ne.isArrayLike+"("+E+")&&"+E+".length==="+Pt,"invalid vector, should have length "+Pt,ue.commandStr)}function Yn(Pt){ne(!Array.isArray(E),"must not specify a value type"),Gt("typeof "+E+'==="function"&&'+E+'._reglType==="texture'+(Pt===yd?"2d":"Cube")+'"',"invalid texture type",ue.commandStr)}switch(Be){case Ca:An("number");break;case md:On(2);break;case Wi:On(3);break;case nf:On(4);break;case Vi:An("number");break;case rs:On(2);break;case tf:On(3);break;case la:On(4);break;case os:An("boolean");break;case Ws:On(2);break;case rf:On(3);break;case of:On(4);break;case zs:On(4);break;case Hs:On(9);break;case is:On(16);break;case Kl:Yn(yd);break;case Qo:Yn(gh);break}});var _e=1;switch(Be){case Kl:case Qo:var Fe=ee.def(E,"._texture");ee(Te,".uniform1i(",m,",",Fe,".bind());"),ee.exit(Fe,".unbind();");continue;case Ca:case os:Le="1i";break;case md:case Ws:Le="2i",_e=2;break;case Wi:case rf:Le="3i",_e=3;break;case nf:case of:Le="4i",_e=4;break;case Vi:Le="1f";break;case rs:Le="2f",_e=2;break;case tf:Le="3f",_e=3;break;case la:Le="4f",_e=4;break;case zs:Le="Matrix2fv";break;case Hs:Le="Matrix3fv";break;case is:Le="Matrix4fv";break}if(ee(Te,".uniform",Le,"(",m,","),Le.charAt(0)==="M"){var pt=Math.pow(Be-zs+2,2),gt=ue.global.def("new Float32Array(",pt,")");Array.isArray(E)?ee("false,(",Rr(pt,function(Gt){return gt+"["+Gt+"]="+E[Gt]}),",",gt,")"):ee("false,(Array.isArray(",E,")||",E," instanceof Float32Array)?",E,":(",Rr(pt,function(Gt){return gt+"["+Gt+"]="+E+"["+Gt+"]"}),",",gt,")")}else _e>1?ee(Rr(_e,function(Gt){return Array.isArray(E)?E[Gt]:E+"["+Gt+"]"})):(ne(!Array.isArray(E),"uniform value must not be an array"),ee(E));ee(");")}}function Rn(ue,ee,Ae,Ge){var Xe=ue.shared,Ne=Xe.gl,Te=Xe.draw,Le=Ge.draw;function fe(){var Fe=Le.elements,pt,gt=ee;return Fe?((Fe.contextDep&&Ge.contextDynamic||Fe.propDep)&&(gt=Ae),pt=Fe.append(ue,gt)):pt=gt.def(Te,".",$o),pt&&gt("if("+pt+")"+Ne+".bindBuffer("+gp+","+pt+".buffer.buffer);"),pt}function we(){var Fe=Le.count,pt,gt=ee;return Fe?((Fe.contextDep&&Ge.contextDynamic||Fe.propDep)&&(gt=Ae),pt=Fe.append(ue,gt),ne.optional(function(){Fe.MISSING&&ue.assert(ee,"false","missing vertex count"),Fe.DYNAMIC&&ue.assert(gt,pt+">=0","missing vertex count")})):(pt=gt.def(Te,".",el),ne.optional(function(){ue.assert(gt,pt+">=0","missing vertex count")})),pt}var se=fe();function Be(Fe){var pt=Le[Fe];return pt?pt.contextDep&&Ge.contextDynamic||pt.propDep?pt.append(ue,Ae):pt.append(ue,ee):ee.def(Te,".",Fe)}var Ze=Be(ql),d=Be(tl),m=we();if(typeof m=="number"){if(m===0)return}else Ae("if(",m,"){"),Ae.exit("}");var E,D;Ft&&(E=Be(Su),D=ue.instancing);var G=se+".type",J=Le.elements&&Gn(Le.elements);function de(){function Fe(){Ae(D,".drawElementsInstancedANGLE(",[Ze,m,G,d+"<<(("+G+"-"+Eu+")>>1)",E],");")}function pt(){Ae(D,".drawArraysInstancedANGLE(",[Ze,d,m,E],");")}se?J?Fe():(Ae("if(",se,"){"),Fe(),Ae("}else{"),pt(),Ae("}")):pt()}function _e(){function Fe(){Ae(Ne+".drawElements("+[Ze,m,G,d+"<<(("+G+"-"+Eu+")>>1)"]+");")}function pt(){Ae(Ne+".drawArrays("+[Ze,d,m]+");")}se?J?Fe():(Ae("if(",se,"){"),Fe(),Ae("}else{"),pt(),Ae("}")):pt()}Ft&&(typeof E!="number"||E>=0)?typeof E=="string"?(Ae("if(",E,">0){"),de(),Ae("}else if(",E,"<0){"),_e(),Ae("}")):de():_e()}function fr(ue,ee,Ae,Ge,Xe){var Ne=Cn(),Te=Ne.proc("body",Xe);return ne.optional(function(){Ne.commandStr=ee.commandStr,Ne.command=Ne.link(ee.commandStr)}),Ft&&(Ne.instancing=Te.def(Ne.shared.extensions,".angle_instanced_arrays")),ue(Ne,Te,Ae,Ge),Ne.compile().body}function zn(ue,ee,Ae,Ge){Oo(ue,ee),Ae.useVAO?Ae.drawVAO?ee(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,ee),");"):ee(ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"):(ee(ue.shared.vao,".setVAO(null);"),ui(ue,ee,Ae,Ge.attributes,function(){return!0})),Nr(ue,ee,Ae,Ge.uniforms,function(){return!0}),Rn(ue,ee,ee,Ae)}function uo(ue,ee){var Ae=ue.proc("draw",1);Oo(ue,Ae),Uo(ue,Ae,ee.context),Eo(ue,Ae,ee.framebuffer),mo(ue,Ae,ee),ni(ue,Ae,ee.state),Zn(ue,Ae,ee,!1,!0);var Ge=ee.shader.progVar.append(ue,Ae);if(Ae(ue.shared.gl,".useProgram(",Ge,".program);"),ee.shader.program)zn(ue,Ae,ee,ee.shader.program);else{Ae(ue.shared.vao,".setVAO(null);");var Xe=ue.global.def("{}"),Ne=Ae.def(Ge,".id"),Te=Ae.def(Xe,"[",Ne,"]");Ae(ue.cond(Te).then(Te,".call(this,a0);").else(Te,"=",Xe,"[",Ne,"]=",ue.link(function(Le){return fr(zn,ue,ee,Le,1)}),"(",Ge,");",Te,".call(this,a0);"))}Object.keys(ee.state).length>0&&Ae(ue.shared.current,".dirty=true;")}function La(ue,ee,Ae,Ge){ue.batchId="a1",Oo(ue,ee);function Xe(){return!0}ui(ue,ee,Ae,Ge.attributes,Xe),Nr(ue,ee,Ae,Ge.uniforms,Xe),Rn(ue,ee,ee,Ae)}function Ql(ue,ee,Ae,Ge){Oo(ue,ee);var Xe=Ae.contextDep,Ne=ee.def(),Te="a0",Le="a1",fe=ee.def();ue.shared.props=fe,ue.batchId=Ne;var we=ue.scope(),se=ue.scope();ee(we.entry,"for(",Ne,"=0;",Ne,"<",Le,";++",Ne,"){",fe,"=",Te,"[",Ne,"];",se,"}",we.exit);function Be(G){return G.contextDep&&Xe||G.propDep}function Ze(G){return!Be(G)}if(Ae.needsContext&&Uo(ue,se,Ae.context),Ae.needsFramebuffer&&Eo(ue,se,Ae.framebuffer),ni(ue,se,Ae.state,Be),Ae.profile&&Be(Ae.profile)&&Zn(ue,se,Ae,!1,!0),Ge)Ae.useVAO?Ae.drawVAO?Be(Ae.drawVAO)?se(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,se),");"):we(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,we),");"):we(ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"):(we(ue.shared.vao,".setVAO(null);"),ui(ue,we,Ae,Ge.attributes,Ze),ui(ue,se,Ae,Ge.attributes,Be)),Nr(ue,we,Ae,Ge.uniforms,Ze),Nr(ue,se,Ae,Ge.uniforms,Be),Rn(ue,we,se,Ae);else{var d=ue.global.def("{}"),m=Ae.shader.progVar.append(ue,se),E=se.def(m,".id"),D=se.def(d,"[",E,"]");se(ue.shared.gl,".useProgram(",m,".program);","if(!",D,"){",D,"=",d,"[",E,"]=",ue.link(function(G){return fr(La,ue,Ae,G,2)}),"(",m,");}",D,".call(this,a0[",Ne,"],",Ne,");")}}function ve(ue,ee){var Ae=ue.proc("batch",2);ue.batchId="0",Oo(ue,Ae);var Ge=!1,Xe=!0;Object.keys(ee.context).forEach(function(d){Ge=Ge||ee.context[d].propDep}),Ge||(Uo(ue,Ae,ee.context),Xe=!1);var Ne=ee.framebuffer,Te=!1;Ne?(Ne.propDep?Ge=Te=!0:Ne.contextDep&&Ge&&(Te=!0),Te||Eo(ue,Ae,Ne)):Eo(ue,Ae,null),ee.state.viewport&&ee.state.viewport.propDep&&(Ge=!0);function Le(d){return d.contextDep&&Ge||d.propDep}mo(ue,Ae,ee),ni(ue,Ae,ee.state,function(d){return!Le(d)}),(!ee.profile||!Le(ee.profile))&&Zn(ue,Ae,ee,!1,"a1"),ee.contextDep=Ge,ee.needsContext=Xe,ee.needsFramebuffer=Te;var fe=ee.shader.progVar;if(fe.contextDep&&Ge||fe.propDep)Ql(ue,Ae,ee,null);else{var we=fe.append(ue,Ae);if(Ae(ue.shared.gl,".useProgram(",we,".program);"),ee.shader.program)Ql(ue,Ae,ee,ee.shader.program);else{Ae(ue.shared.vao,".setVAO(null);");var se=ue.global.def("{}"),Be=Ae.def(we,".id"),Ze=Ae.def(se,"[",Be,"]");Ae(ue.cond(Ze).then(Ze,".call(this,a0,a1);").else(Ze,"=",se,"[",Be,"]=",ue.link(function(d){return fr(Ql,ue,ee,d,2)}),"(",we,");",Ze,".call(this,a0,a1);"))}}Object.keys(ee.state).length>0&&Ae(ue.shared.current,".dirty=true;")}function rt(ue,ee){var Ae=ue.proc("scope",3);ue.batchId="a2";var Ge=ue.shared,Xe=Ge.current;Uo(ue,Ae,ee.context),ee.framebuffer&&ee.framebuffer.append(ue,Ae),Al(Object.keys(ee.state)).forEach(function(Te){var Le=ee.state[Te],fe=Le.append(ue,Ae);M(fe)?fe.forEach(function(we,se){Ae.set(ue.next[Te],"["+se+"]",we)}):Ae.set(Ge.next,"."+Te,fe)}),Zn(ue,Ae,ee,!0,!0),[$o,tl,el,Su,ql].forEach(function(Te){var Le=ee.draw[Te];Le&&Ae.set(Ge.draw,"."+Te,""+Le.append(ue,Ae))}),Object.keys(ee.uniforms).forEach(function(Te){var Le=ee.uniforms[Te].append(ue,Ae);Array.isArray(Le)&&(Le="["+Le.join()+"]"),Ae.set(Ge.uniforms,"["+ie.id(Te)+"]",Le)}),Object.keys(ee.attributes).forEach(function(Te){var Le=ee.attributes[Te].append(ue,Ae),fe=ue.scopeAttrib(Te);Object.keys(new He).forEach(function(we){Ae.set(fe,"."+we,Le[we])})}),ee.scopeVAO&&Ae.set(Ge.vao,".targetVAO",ee.scopeVAO.append(ue,Ae));function Ne(Te){var Le=ee.shader[Te];Le&&Ae.set(Ge.shader,"."+Te,Le.append(ue,Ae))}Ne(Jc),Ne(oo),Object.keys(ee.state).length>0&&(Ae(Xe,".dirty=true;"),Ae.exit(Xe,".dirty=true;")),Ae("a1(",ue.shared.context,",a0,",ue.batchId,");")}function Je(ue){if(!(typeof ue!="object"||M(ue))){for(var ee=Object.keys(ue),Ae=0;Ae<ee.length;++Ae)if(qt.isDynamic(ue[ee[Ae]]))return!0;return!1}}function tn(ue,ee,Ae){var Ge=ee.static[Ae];if(!Ge||!Je(Ge))return;var Xe=ue.global,Ne=Object.keys(Ge),Te=!1,Le=!1,fe=!1,we=ue.global.def("{}");Ne.forEach(function(Be){var Ze=Ge[Be];if(qt.isDynamic(Ze)){typeof Ze=="function"&&(Ze=Ge[Be]=qt.unbox(Ze));var d=Di(Ze,null);Te=Te||d.thisDep,fe=fe||d.propDep,Le=Le||d.contextDep}else{switch(Xe(we,".",Be,"="),typeof Ze){case"number":Xe(Ze);break;case"string":Xe('"',Ze,'"');break;case"object":Array.isArray(Ze)&&Xe("[",Ze.join(),"]");break;default:Xe(ue.link(Ze));break}Xe(";")}});function se(Be,Ze){Ne.forEach(function(d){var m=Ge[d];if(qt.isDynamic(m)){var E=Be.invoke(Ze,m);Ze(we,".",d,"=",E,";")}})}ee.dynamic[Ae]=new qt.DynamicVariable(Hc,{thisDep:Te,contextDep:Le,propDep:fe,ref:we,append:se}),delete ee.static[Ae]}function hr(ue,ee,Ae,Ge,Xe){var Ne=Cn();Ne.stats=Ne.link(Xe),Object.keys(ee.static).forEach(function(Le){tn(Ne,ee,Le)}),mp.forEach(function(Le){tn(Ne,ue,Le)});var Te=No(ue,ee,Ae,Ge,Ne);return uo(Ne,Te),rt(Ne,Te),ve(Ne,Te),o(Ne.compile(),{destroy:function(){Te.shader.program.destroy()}})}return{next:Jt,current:xt,procs:function(){var ue=Cn(),ee=ue.proc("poll"),Ae=ue.proc("refresh"),Ge=ue.block();ee(Ge),Ae(Ge);var Xe=ue.shared,Ne=Xe.gl,Te=Xe.next,Le=Xe.current;Ge(Le,".dirty=false;"),Eo(ue,ee),Eo(ue,Ae,null,!0);var fe;Ft&&(fe=ue.link(Ft)),be.oes_vertex_array_object&&Ae(ue.link(be.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var we=0;we<nt.maxAttributes;++we){var se=Ae.def(Xe.attributes,"[",we,"]"),Be=ue.cond(se,".buffer");Be.then(Ne,".enableVertexAttribArray(",we,");",Ne,".bindBuffer(",Sl,",",se,".buffer.buffer);",Ne,".vertexAttribPointer(",we,",",se,".size,",se,".type,",se,".normalized,",se,".stride,",se,".offset);").else(Ne,".disableVertexAttribArray(",we,");",Ne,".vertexAttrib4f(",we,",",se,".x,",se,".y,",se,".z,",se,".w);",se,".buffer=null;"),Ae(Be),Ft&&Ae(fe,".vertexAttribDivisorANGLE(",we,",",se,".divisor);")}return Ae(ue.shared.vao,".currentVAO=null;",ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"),Object.keys(Wt).forEach(function(Ze){var d=Wt[Ze],m=Ge.def(Te,".",Ze),E=ue.block();E("if(",m,"){",Ne,".enable(",d,")}else{",Ne,".disable(",d,")}",Le,".",Ze,"=",m,";"),Ae(E),ee("if(",m,"!==",Le,".",Ze,"){",E,"}")}),Object.keys(wt).forEach(function(Ze){var d=wt[Ze],m=xt[Ze],E,D,G=ue.block();if(G(Ne,".",d,"("),M(m)){var J=m.length;E=ue.global.def(Te,".",Ze),D=ue.global.def(Le,".",Ze),G(Rr(J,function(de){return E+"["+de+"]"}),");",Rr(J,function(de){return D+"["+de+"]="+E+"["+de+"];"}).join("")),ee("if(",Rr(J,function(de){return E+"["+de+"]!=="+D+"["+de+"]"}).join("||"),"){",G,"}")}else E=Ge.def(Te,".",Ze),D=Ge.def(Le,".",Ze),G(E,");",Le,".",Ze,"=",E,";"),ee("if(",E,"!==",D,"){",G,"}");Ae(G)}),ue.compile()}(),compile:hr}}function Mh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Pu=34918,mr=34919,Ph=35007,sa=function(F,ie){if(!ie.ext_disjoint_timer_query)return null;var be=[];function nt(){return be.pop()||ie.ext_disjoint_timer_query.createQueryEXT()}function dt(Ft){be.push(Ft)}var Qe=[];function st(Ft){var Kt=nt();ie.ext_disjoint_timer_query.beginQueryEXT(Ph,Kt),Qe.push(Kt),kt(Qe.length-1,Qe.length,Ft)}function Nt(){ie.ext_disjoint_timer_query.endQueryEXT(Ph)}function It(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ct=[];function ct(){return Ct.pop()||new It}function Vt(Ft){Ct.push(Ft)}var Ut=[];function kt(Ft,Kt,xt){var Jt=ct();Jt.startQueryIndex=Ft,Jt.endQueryIndex=Kt,Jt.sum=0,Jt.stats=xt,Ut.push(Jt)}var _t=[],He=[];function lt(){var Ft,Kt,xt=Qe.length;if(xt!==0){He.length=Math.max(He.length,xt+1),_t.length=Math.max(_t.length,xt+1),_t[0]=0,He[0]=0;var Jt=0;for(Ft=0,Kt=0;Kt<Qe.length;++Kt){var At=Qe[Kt];ie.ext_disjoint_timer_query.getQueryObjectEXT(At,mr)?(Jt+=ie.ext_disjoint_timer_query.getQueryObjectEXT(At,Pu),dt(At)):Qe[Ft++]=At,_t[Kt+1]=Jt,He[Kt+1]=Ft}for(Qe.length=Ft,Ft=0,Kt=0;Kt<Ut.length;++Kt){var Wt=Ut[Kt],wt=Wt.startQueryIndex,Xt=Wt.endQueryIndex;Wt.sum+=_t[Xt]-_t[wt];var Mn=He[wt],Wn=He[Xt];Wn===Mn?(Wt.stats.gpuTime+=Wt.sum/1e6,Vt(Wt)):(Wt.startQueryIndex=Mn,Wt.endQueryIndex=Wn,Ut[Ft++]=Wt)}Ut.length=Ft}}return{beginQuery:st,endQuery:Nt,pushScopeStats:kt,update:lt,getNumPendingQueries:function(){return Qe.length},clear:function(){be.push.apply(be,Qe);for(var Ft=0;Ft<be.length;Ft++)ie.ext_disjoint_timer_query.deleteQueryEXT(be[Ft]);Qe.length=0,be.length=0},restore:function(){Qe.length=0,be.length=0}}},ti=16384,Ia=256,Kv=1024,uf=34962,Tl="webglcontextlost",Sp="webglcontextrestored",Jl=1,eo=2,Mo=3;function _i(F,ie){for(var be=0;be<F.length;++be)if(F[be]===ie)return be;return-1}function sf(F){var ie=ir(F);if(!ie)return null;var be=ie.gl,nt=be.getContextAttributes(),dt=be.isContextLost(),Qe=Kr(be,ie);if(!Qe)return null;var st=oi(),Nt=Mh(),It=Qe.extensions,Ct=sa(be,It),ct=_r(),Vt=be.drawingBufferWidth,Ut=be.drawingBufferHeight,kt={tick:0,time:0,viewportWidth:Vt,viewportHeight:Ut,framebufferWidth:Vt,framebufferHeight:Ut,drawingBufferWidth:Vt,drawingBufferHeight:Ut,pixelRatio:ie.pixelRatio},_t={},He={elements:null,primitive:4,count:-1,offset:0,instances:-1},lt=Ac(be,It),Ft=ya(be,Nt,ie,xt),Kt=od(be,It,lt,Nt,Ft);function xt(Rn){return Kt.destroyBuffer(Rn)}var Jt=fn(be,It,Ft,Nt),At=cp(be,st,Nt,ie),Wt=Er(be,It,lt,function(){Mn.procs.poll()},kt,Nt,ie),wt=Ds(be,It,lt,Nt,ie),Xt=Vc(be,It,lt,Wt,wt,Nt),Mn=qv(be,st,It,lt,Ft,Jt,Wt,Xt,_t,Kt,At,He,kt,Ct,ie),Wn=wo(be,Xt,Mn.procs.poll,kt,nt,It,lt),Lt=Mn.next,Tt=be.canvas,Et=[],Cn=[],nr=[],un=[ie.onDestroy],Qn=null;function Vn(){if(Et.length===0){Ct&&Ct.update(),Qn=null;return}Qn=Nn.next(Vn),ni();for(var Rn=Et.length-1;Rn>=0;--Rn){var fr=Et[Rn];fr&&fr(kt,null,0)}be.flush(),Ct&&Ct.update()}function rr(){!Qn&&Et.length>0&&(Qn=Nn.next(Vn))}function gr(){Qn&&(Nn.cancel(Vn),Qn=null)}function Po(Rn){Rn.preventDefault(),dt=!0,gr(),Cn.forEach(function(fr){fr()})}function Bo(Rn){be.getError(),dt=!1,Qe.restore(),At.restore(),Ft.restore(),Wt.restore(),wt.restore(),Xt.restore(),Kt.restore(),Ct&&Ct.restore(),Mn.procs.refresh(),rr(),nr.forEach(function(fr){fr()})}Tt&&(Tt.addEventListener(Tl,Po,!1),Tt.addEventListener(Sp,Bo,!1));function cr(){Et.length=0,gr(),Tt&&(Tt.removeEventListener(Tl,Po),Tt.removeEventListener(Sp,Bo)),At.clear(),Xt.clear(),wt.clear(),Wt.clear(),Jt.clear(),Ft.clear(),Kt.clear(),Ct&&Ct.clear(),un.forEach(function(Rn){Rn()})}function Wo(Rn){ne(!!Rn,"invalid args to regl({...})"),ne.type(Rn,"object","invalid args to regl({...})");function fr(Xe){var Ne=o({},Xe);delete Ne.uniforms,delete Ne.attributes,delete Ne.context,delete Ne.vao,"stencil"in Ne&&Ne.stencil.op&&(Ne.stencil.opBack=Ne.stencil.opFront=Ne.stencil.op,delete Ne.stencil.op);function Te(Le){if(Le in Ne){var fe=Ne[Le];delete Ne[Le],Object.keys(fe).forEach(function(we){Ne[Le+"."+we]=fe[we]})}}return Te("blend"),Te("depth"),Te("cull"),Te("stencil"),Te("polygonOffset"),Te("scissor"),Te("sample"),"vao"in Xe&&(Ne.vao=Xe.vao),Ne}function zn(Xe,Ne){var Te={},Le={};return Object.keys(Xe).forEach(function(fe){var we=Xe[fe];if(qt.isDynamic(we)){Le[fe]=qt.unbox(we,fe);return}else if(Ne&&Array.isArray(we)){for(var se=0;se<we.length;++se)if(qt.isDynamic(we[se])){Le[fe]=qt.unbox(we,fe);return}}Te[fe]=we}),{dynamic:Le,static:Te}}var uo=zn(Rn.context||{},!0),La=zn(Rn.uniforms||{},!0),Ql=zn(Rn.attributes||{},!1),ve=zn(fr(Rn),!1),rt={gpuTime:0,cpuTime:0,count:0},Je=Mn.compile(ve,Ql,La,uo,rt),tn=Je.draw,hr=Je.batch,ue=Je.scope,ee=[];function Ae(Xe){for(;ee.length<Xe;)ee.push(null);return ee}function Ge(Xe,Ne){var Te;if(dt&&ne.raise("context lost"),typeof Xe=="function")return ue.call(this,null,Xe,0);if(typeof Ne=="function")if(typeof Xe=="number")for(Te=0;Te<Xe;++Te)ue.call(this,null,Ne,Te);else if(Array.isArray(Xe))for(Te=0;Te<Xe.length;++Te)ue.call(this,Xe[Te],Ne,Te);else return ue.call(this,Xe,Ne,0);else if(typeof Xe=="number"){if(Xe>0)return hr.call(this,Ae(Xe|0),Xe|0)}else if(Array.isArray(Xe)){if(Xe.length)return hr.call(this,Xe,Xe.length)}else return tn.call(this,Xe)}return o(Ge,{stats:rt,destroy:function(){Je.destroy()}})}var to=Xt.setFBO=Wo({framebuffer:qt.define.call(null,Jl,"framebuffer")});function No(Rn,fr){var zn=0;Mn.procs.poll();var uo=fr.color;uo&&(be.clearColor(+uo[0]||0,+uo[1]||0,+uo[2]||0,+uo[3]||0),zn|=ti),"depth"in fr&&(be.clearDepth(+fr.depth),zn|=Ia),"stencil"in fr&&(be.clearStencil(fr.stencil|0),zn|=Kv),ne(!!zn,"called regl.clear with no buffer specified"),be.clear(zn)}function Uo(Rn){if(ne(typeof Rn=="object"&&Rn,"regl.clear() takes an object as input"),"framebuffer"in Rn)if(Rn.framebuffer&&Rn.framebuffer_reglType==="framebufferCube")for(var fr=0;fr<6;++fr)to(o({framebuffer:Rn.framebuffer.faces[fr]},Rn),No);else to(Rn,No);else No(null,Rn)}function Eo(Rn){ne.type(Rn,"function","regl.frame() callback must be a function"),Et.push(Rn);function fr(){var zn=_i(Et,Rn);ne(zn>=0,"cannot cancel a frame twice");function uo(){var La=_i(Et,uo);Et[La]=Et[Et.length-1],Et.length-=1,Et.length<=0&&gr()}Et[zn]=uo}return rr(),{cancel:fr}}function mo(){var Rn=Lt.viewport,fr=Lt.scissor_box;Rn[0]=Rn[1]=fr[0]=fr[1]=0,kt.viewportWidth=kt.framebufferWidth=kt.drawingBufferWidth=Rn[2]=fr[2]=be.drawingBufferWidth,kt.viewportHeight=kt.framebufferHeight=kt.drawingBufferHeight=Rn[3]=fr[3]=be.drawingBufferHeight}function ni(){kt.tick+=1,kt.time=Zn(),mo(),Mn.procs.poll()}function Oo(){Wt.refresh(),mo(),Mn.procs.refresh(),Ct&&Ct.update()}function Zn(){return(_r()-ct)/1e3}Oo();function ui(Rn,fr){ne.type(fr,"function","listener callback must be a function");var zn;switch(Rn){case"frame":return Eo(fr);case"lost":zn=Cn;break;case"restore":zn=nr;break;case"destroy":zn=un;break;default:ne.raise("invalid event, must be one of frame,lost,restore,destroy")}return zn.push(fr),{cancel:function(){for(var uo=0;uo<zn.length;++uo)if(zn[uo]===fr){zn[uo]=zn[zn.length-1],zn.pop();return}}}}var Nr=o(Wo,{clear:Uo,prop:qt.define.bind(null,Jl),context:qt.define.bind(null,eo),this:qt.define.bind(null,Mo),draw:Wo({}),buffer:function(Rn){return Ft.create(Rn,uf,!1,!1)},elements:function(Rn){return Jt.create(Rn,!1)},texture:Wt.create2D,cube:Wt.createCube,renderbuffer:wt.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:Kt.createVAO,attributes:nt,frame:Eo,on:ui,limits:lt,hasExtension:function(Rn){return lt.extensions.indexOf(Rn.toLowerCase())>=0},read:Wn,destroy:cr,_gl:be,_refresh:Oo,poll:function(){ni(),Ct&&Ct.update()},now:Zn,stats:Nt});return ie.onDone(null,Nr),Nr}return sf})})(ste);var _f,hy,wf,Du,vy,Md,yy,dg,ac,Fp,Oa,lc,uc,pg;_f={},an(_f,on.POINTS,"points"),an(_f,on.LINES,"lines"),an(_f,on.LINE_LOOP,"line loop"),an(_f,on.LINE_STRIP,"line strip"),an(_f,on.TRIANGLES,"triangles"),an(_f,on.TRIANGLE_FAN,"triangle fan"),an(_f,on.TRIANGLE_STRIP,"triangle strip");hy={},an(hy,on.STATIC_DRAW,"static"),an(hy,on.DYNAMIC_DRAW,"dynamic"),an(hy,on.STREAM_DRAW,"stream");wf={},an(wf,on.BYTE,"int8"),an(wf,on.UNSIGNED_INT,"int16"),an(wf,on.INT,"int32"),an(wf,on.UNSIGNED_BYTE,"uint8"),an(wf,on.UNSIGNED_SHORT,"uint16"),an(wf,on.UNSIGNED_INT,"uint32"),an(wf,on.FLOAT,"float");Du={},an(Du,on.ALPHA,"alpha"),an(Du,on.LUMINANCE,"luminance"),an(Du,on.LUMINANCE_ALPHA,"luminance alpha"),an(Du,on.RGB,"rgb"),an(Du,on.RGBA,"rgba"),an(Du,on.RGBA4,"rgba4"),an(Du,on.RGB5_A1,"rgb5 a1"),an(Du,on.RGB565,"rgb565"),an(Du,on.DEPTH_COMPONENT,"depth"),an(Du,on.DEPTH_STENCIL,"depth stencil");vy={},an(vy,on.DONT_CARE,"dont care"),an(vy,on.NICEST,"nice"),an(vy,on.FASTEST,"fast");Md={},an(Md,on.NEAREST,"nearest"),an(Md,on.LINEAR,"linear"),an(Md,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(Md,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(Md,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(Md,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");yy={},an(yy,on.REPEAT,"repeat"),an(yy,on.CLAMP_TO_EDGE,"clamp"),an(yy,on.MIRRORED_REPEAT,"mirror");dg={},an(dg,on.NONE,"none"),an(dg,on.BROWSER_DEFAULT_WEBGL,"browser");ac={},an(ac,on.NEVER,"never"),an(ac,on.ALWAYS,"always"),an(ac,on.LESS,"less"),an(ac,on.LEQUAL,"lequal"),an(ac,on.GREATER,"greater"),an(ac,on.GEQUAL,"gequal"),an(ac,on.EQUAL,"equal"),an(ac,on.NOTEQUAL,"notequal");Fp={},an(Fp,on.FUNC_ADD,"add"),an(Fp,on.MIN_EXT,"min"),an(Fp,on.MAX_EXT,"max"),an(Fp,on.FUNC_SUBTRACT,"subtract"),an(Fp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");Oa={},an(Oa,on.ZERO,"zero"),an(Oa,on.ONE,"one"),an(Oa,on.SRC_COLOR,"src color"),an(Oa,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(Oa,on.SRC_ALPHA,"src alpha"),an(Oa,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(Oa,on.DST_COLOR,"dst color"),an(Oa,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(Oa,on.DST_ALPHA,"dst alpha"),an(Oa,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(Oa,on.CONSTANT_COLOR,"constant color"),an(Oa,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(Oa,on.CONSTANT_ALPHA,"constant alpha"),an(Oa,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(Oa,on.SRC_ALPHA_SATURATE,"src alpha saturate");lc={},an(lc,on.NEVER,"never"),an(lc,on.ALWAYS,"always"),an(lc,on.LESS,"less"),an(lc,on.LEQUAL,"lequal"),an(lc,on.GREATER,"greater"),an(lc,on.GEQUAL,"gequal"),an(lc,on.EQUAL,"equal"),an(lc,on.NOTEQUAL,"notequal");uc={},an(uc,on.ZERO,"zero"),an(uc,on.KEEP,"keep"),an(uc,on.REPLACE,"replace"),an(uc,on.INVERT,"invert"),an(uc,on.INCR,"increment"),an(uc,on.DECR,"decrement"),an(uc,on.INCR_WRAP,"increment wrap"),an(uc,on.DECR_WRAP,"decrement wrap");pg={},an(pg,on.FRONT,"front"),an(pg,on.BACK,"back");var cte=Function.prototype,fte=cte.toString;fte.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class Nk{constructor(){Ea(this,"lf");Ea(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new _Z(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:o.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:w}=b;w.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}Ea(Nk,"pluginName","dagre");const dte=kr({name:"WorkFlow"}),pte=kr({...dte,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":c9,"./nodes/application-node/index.ts":m9,"./nodes/base-node/index.ts":BW,"./nodes/classification-node/index.ts":ZW,"./nodes/condition-node/index.ts":az,"./nodes/document-extract-node/index.ts":fz,"./nodes/echarts-node/index.ts":Ez,"./nodes/form-node/index.ts":Gz,"./nodes/function-lib-node/index.ts":tH,"./nodes/function-node/index.ts":mH,"./nodes/image-generate/index.ts":PH,"./nodes/image-understand/index.ts":BH,"./nodes/mcp-node/index.ts":tX,"./nodes/question-node/index.ts":fX,"./nodes/reply-node/index.ts":gX,"./nodes/reranker-node/index.ts":DX,"./nodes/search-dataset-node/index.ts":WX,"./nodes/speech-to-text-node/index.ts":QX,"./nodes/start-node/index.ts":oY,"./nodes/text-to-speech-node/index.ts":pY,"./nodes/user-select-node/index.ts":EY,"./nodes/variable-assign-node/index.ts":NY}),o=l9(),r=mt(""),s=e,c={nodes:[...YI]};so({get:()=>s.data?s.data:c,set:A=>A});const h=mt();xo(()=>{g()});const v=A=>{h.value.render(A)},g=A=>{const k=document.querySelector("#container");k&&(h.value=new YV({plugins:[Nk],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:k}),h.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),h.value.on("graph:rendered",()=>{r.value=h.value.graphModel.flowId}),FY(h.value,h.value.graphModel),h.value.batchRegister([...Object.keys(n).map(j=>n[j].default),IY]),h.value.setDefaultEdgeType("app-edge"),h.value.render(A||{}),h.value.graphModel.eventCenter.on("delete_edge",j=>{j.forEach(R=>{h.value.deleteEdge(R)})}),h.value.graphModel.eventCenter.on("anchor:drop",j=>{j.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var j;(j=h.value)==null||j.fitView()},500))};return t({onmousedown:A=>{A.type&&h.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(h.value)},validate:()=>Promise.all(h.value.graphModel.nodes.map(A=>{var k;return(k=A==null?void 0:A.validate)==null?void 0:k.call(A)})),getGraphData:()=>h.value.getGraphData(),addNode:A=>{h.value.clearSelectElements();const{virtualRectCenterPositionX:k,virtualRectCenterPositionY:j}=h.value.graphModel.getVirtualRectSize(),R=h.value.graphModel.addNode({type:A.type,properties:A.properties,x:k,y:j-h.value.graphModel.height/2});R.isSelected=!0,R.isHovered=!0,h.value.toFront(R.id)},clearGraphData:()=>h.value.clearData(),renderGraphData:g,render:v}),(A,k)=>(qe(),Dn(Yo,null,[k[0]||(k[0]=he("div",{class:"workflow-app",id:"container"},null,-1)),h.value?(qe(),Rt(LY,{key:0,class:"workflow-control",lf:h.value},null,8,["lf"])):tr("",!0),C(Jr(o),{"flow-id":r.value},null,8,["flow-id"])],64))}});const hte={class:"workflow-publish-history border-l"},vte={class:"border-b p-16-24"},yte={class:"list-height pt-0"},mte={class:"p-8 pt-0"},gte={class:"flex-between"},bte={style:{"max-width":"80%"}},_te={class:"text-center"},wte=kr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=BM(),{params:{id:o}}=n,r=t,s=mt(!1),c=mt([]),h=mt("");function v(A){h.value=A.id}function g(A){r("click",A)}function b(A){r("refreshVersion",A)}function w(A){A.writeStatus=!0}function O(A){A.writeStatus=!1}function S(A,k){if(A){const j={name:A};fa.putWorkFlowVersion(o,k.id,j,s).then(()=>{Wp(Zt("common.modifySuccess")),k.writeStatus=!1,P()})}else Ba(Zt("views.applicationWorkflow.tip.nameMessage"))}function P(){fa.getWorkFlowVersion(o,s).then(A=>{c.value=A.data})}return xo(()=>{P()}),(A,k)=>{const j=re("ReadWrite"),R=re("el-tag"),$=re("UserFilled"),V=re("el-icon"),H=re("AppAvatar"),Y=re("el-text"),Q=re("MoreFilled"),W=re("el-button"),I=re("EditPen"),z=re("el-dropdown-item"),K=re("RefreshLeft"),q=re("el-dropdown-menu"),ce=re("el-dropdown"),ke=re("common-list"),Oe=re("el-scrollbar"),ze=jd("loading");return qe(),Dn("div",hte,[he("h4",vte,Ue(A.$t("views.applicationWorkflow.setting.releaseHistory")),1),he("div",yte,[C(Oe,null,{default:B(()=>[he("div",mte,[Ua((qe(),Rt(ke,{data:c.value,class:"mt-8",onClick:g,onMouseenter:v,onMouseleave:k[1]||(k[1]=Ie=>h.value="")},{default:B(({row:Ie,index:Pe})=>[he("div",gte,[he("div",bte,[he("h5",{class:Dd([Pe===0?"primary":"","flex"])},[C(j,{onChange:le=>S(le,Ie),data:Ie.name||Jr(Y1)(Ie.updateTime),trigger:"manual",write:Ie.writeStatus,onClose:le=>O(Ie)},null,8,["onChange","data","write","onClose"]),Pe===0?(qe(),Rt(R,{key:0,class:"default-tag ml-4"},{default:B(()=>[St(Ue(A.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):tr("",!0)],2),C(Y,{type:"info",class:"color-secondary flex mt-8"},{default:B(()=>[C(H,{size:20,class:"avatar-grey mr-4"},{default:B(()=>[C(V,null,{default:B(()=>[C($)]),_:1})]),_:1}),St(" "+Ue(Ie.publish_user_name),1)]),_:2},1024)]),Ua(he("div",{onClick:k[0]||(k[0]=bn(()=>{},["stop"]))},[C(ce,{trigger:"click",teleported:!1},{dropdown:B(()=>[C(q,null,{default:B(()=>[C(z,{onClick:bn(le=>w(Ie),["stop"])},{default:B(()=>[C(V,null,{default:B(()=>[C(I)]),_:1}),St(" "+Ue(A.$t("common.edit")),1)]),_:2},1032,["onClick"]),C(z,{onClick:le=>b(Ie)},{default:B(()=>[C(V,null,{default:B(()=>[C(K)]),_:1}),St(" "+Ue(A.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:B(()=>[C(W,{text:""},{default:B(()=>[C(V,null,{default:B(()=>[C(Q)]),_:1})]),_:1})]),_:2},1024)],512),[[Ev,h.value===Ie.id]])])]),empty:B(()=>[he("div",_te,[C(Y,{type:"info"},{default:B(()=>[St(Ue(A.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[ze,s.value]])])]),_:1})])])}}});const Ete=Yy(wte,[["__scopeId","data-v-935cc16f"]]),vM=[Xo.AiChat,Xo.Reply,Xo.FunctionLib,Xo.FunctionLibCustom,Xo.ImageUnderstandNode,Xo.Application,Xo.SpeechToTextNode,Xo.TextToSpeechNode,Xo.ImageGenerateNode,Xo.McpNode,Xo.Echarts];class yM{constructor(t){Ea(this,"nodes");Ea(this,"edges");Ea(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===Xo.Start);if(t.length==0)throw Zt("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Zt("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===Xo.Base);if(t.length==0)throw Zt("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Zt("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===Xo.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===Xo.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==Xo.Start&&n.id!==Xo.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Zt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(o.length==0&&!vM.includes(t.type))throw Zt("views.applicationWorkflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==Xo.Base&&t.type!==Xo.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Zt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===Xo.Condition){const n=t.properties.nodeData.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.needConnect1")}${o.type}${Zt("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(o=>o.sourceNodeId==t.id).length==0&&!vM.includes(t.type))throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.nodeUnavailable")}`}}const Ote={class:"application-workflow"},xte={class:"header border-b flex-between p-12-24"},Ste={class:"flex align-center"},Ate={key:0},Tte={key:0},Mte={key:1},Pte={class:"ml-4"},Nte={class:"flex-between"},kte={class:"flex align-center"},Rte={class:"mr-12 ml-24 flex"},Dte=["src"],Cte={class:"mr-16"},jte={class:"scrollbar-height"},Xte=kr({__name:"index",setup(e){const{user:t,application:n}=hc(),o=qI(),r=BM(),s=so(()=>t.isDefaultTheme()),{params:{id:c}}=r;let h;const v=mt(),g=mt(),b=mt(!1),w=mt(null),O=mt(!1),S=mt(!1),P=mt(!1),A=mt(""),k=mt(!1),j=mt(!1),R=mt(!1),$=mt({}),V=mt(null);function H(){JSON.stringify(V.value)!==JSON.stringify(Pe())?Cw(Zt("common.tip"),Zt("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Zt("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Zt("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{ye(!0,!0)}).catch(je=>{je==="cancel"&&o.push({path:`/application/${c}/WORK_FLOW/overview`})}):o.push({path:`/application/${c}/WORK_FLOW/overview`})}function Y(){R.value||(j.value=!1,R.value=!1)}function Q(je){je&&I(je),v1(`APPLICATION:MANAGE:${c}`,"AND")&&k.value&&Me(),j.value=!1,R.value=!1}function W(je){R.value=!0,$.value=je,I(je),We()}function I(je){var it;je.workFlow.nodes.map(bt=>{bt.properties.noRender=!0}),w.value.workFlow=je.workFlow,A.value=je==null?void 0:je.updateTime,(it=v.value)==null||it.clearGraphData(),X1(()=>{var bt;(bt=v.value)==null||bt.render(je.workFlow)})}function z(){le(),v1(`APPLICATION:MANAGE:${c}`,"AND")&&k.value&&Me(),j.value=!1,R.value=!1}function K(){j.value=!0}function q(je){je?Me():We(),localStorage.setItem("workflowAutoSave",je.toString())}function ce(je){O.value=!1}function ke(je){O.value=!1}function Oe(){O.value=!1}async function ze(){var je;(je=v.value)==null||je.validate().then(async()=>{const it={workFlow:Pe()};await n.asyncPutApplication(c,it);const bt=new yM(it.workFlow);try{bt.is_valid()}catch(Mt){Ba(Mt.toString());return}fa.putPublishApplication(c,it,b).then(()=>{Wp(Zt("views.applicationWorkflow.tip.publicSuccess"))})}).catch(it=>{var Yt,Ce,ge,Se;const bt=it.node,Mt=it.errMessage;if(typeof Mt=="string")Ba(((Yt=it.node.properties)==null?void 0:Yt.stepName)+` ${Zt("views.applicationWorkflow.node").toLowerCase()} `+Mt.toLowerCase());else{const ht=Object.keys(Mt);Ba(((Ce=bt.properties)==null?void 0:Ce.stepName)+` ${Zt("views.applicationWorkflow.node").toLowerCase()} `+((Se=(ge=Mt[ht[0]])==null?void 0:ge[0])==null?void 0:Se.message.toLowerCase()))}})}const Ie=()=>{var je;(je=v.value)==null||je.validate().then(()=>{var Mt;const it=Pe(),bt=new yM(it);try{bt.is_valid(),w.value={...w.value,type:"WORK_FLOW",...(Mt=bt.get_base_node())==null?void 0:Mt.properties.nodeData,workFlow:Pe()},S.value=!0}catch(Yt){Ba(Yt.toString())}}).catch(it=>{var Yt,Ce,ge,Se;const bt=it.node,Mt=it.errMessage;if(typeof Mt=="string")Ba(((Yt=it.node.properties)==null?void 0:Yt.stepName)+` ${Zt("views.applicationWorkflow.node")}，`+Mt);else{const ht=Object.keys(Mt);Ba(((Ce=bt.properties)==null?void 0:Ce.stepName)+` ${Zt("views.applicationWorkflow.node")}，`+((Se=(ge=Mt[ht[0]])==null?void 0:ge[0])==null?void 0:Se.message))}})};function Pe(){var je;return(je=v.value)==null?void 0:je.getGraphData()}function le(){n.asyncGetApplicationDetail(c).then(je=>{var it,bt,Mt;(it=je.data)==null||it.workFlow.nodes.map(Yt=>{Yt.properties.noRender=!0}),w.value=je.data,w.value.sttModelId=je.data.sttModel,w.value.ttsModelId=je.data.ttsModel,w.value.ttsType=je.data.ttsType,A.value=(bt=je.data)==null?void 0:bt.updateTime,(Mt=v.value)==null||Mt.clearGraphData(),X1(()=>{var Yt;(Yt=v.value)==null||Yt.render(w.value.workFlow),V.value=Pe()})})}function ye(je,it){const bt={workFlow:Pe()};b.value=it||!1,n.asyncPutApplication(c,bt).then(Mt=>{A.value=new Date,je&&(V.value=Pe(),Wp(Zt("common.saveSuccess")),it&&o.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{b.value=!1})}const Me=()=>{h=setInterval(()=>{ye()},6e4)},We=()=>{h&&clearInterval(h)};return xo(()=>{le();const je=localStorage.getItem("workflowAutoSave");k.value=je==="true",v1(`APPLICATION:MANAGE:${c}`,"AND")&&k.value&&Me()}),KI(()=>{var je;We(),(je=v.value)==null||je.clearGraphData()}),(je,it)=>{var Kn,ne;const bt=re("back-button"),Mt=re("el-text"),Yt=re("el-button"),Ce=re("el-divider"),ge=re("Close"),Se=re("el-icon"),ht=re("AppIcon"),zt=re("MoreFilled"),Ot=re("el-dropdown-item"),rn=re("el-switch"),yn=re("el-dropdown-menu"),Tn=re("el-dropdown"),pn=re("el-collapse-transition"),ft=re("AppAvatar"),xn=re("AiChat"),$e=jd("click-outside"),mn=jd("loading");return Ua((qe(),Dn("div",Ote,[he("div",xte,[he("div",Ste,[C(bt,{onClick:H}),he("h4",null,Ue((Kn=w.value)==null?void 0:Kn.name),1),j.value&&R.value?(qe(),Dn("div",Ate,[C(Mt,{type:"info",class:"ml-16 color-secondary"},{default:B(()=>[St(Ue(je.$t("views.applicationWorkflow.info.previewVersion"))+" "+Ue($.value.name||Jr(Y1)($.value.updateTime)),1)]),_:1})])):A.value?(qe(),Rt(Mt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:B(()=>[St(Ue(je.$t("views.applicationWorkflow.info.saveTime"))+Ue(Jr(Y1)(A.value)),1)]),_:1})):tr("",!0)]),j.value&&R.value?(qe(),Dn("div",Tte,[C(Yt,{type:"primary",class:"mr-8",onClick:it[0]||(it[0]=$n=>Q())},{default:B(()=>[St(Ue(je.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),C(Ce,{direction:"vertical"}),C(Yt,{text:"",onClick:z},{default:B(()=>[C(Se,null,{default:B(()=>[C(ge)]),_:1})]),_:1})])):(qe(),Dn("div",Mte,[C(Yt,{icon:"Plus",onClick:it[1]||(it[1]=$n=>O.value=!O.value)},{default:B(()=>[St(Ue(je.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),C(Yt,{onClick:Ie,disabled:S.value},{default:B(()=>[C(ht,{iconName:"app-play-outlined",class:"mr-4"}),St(" "+Ue(je.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),C(Yt,{onClick:it[2]||(it[2]=$n=>ye(!0))},{default:B(()=>[C(ht,{iconName:"app-save-outlined",class:"mr-4"}),St(" "+Ue(je.$t("common.save")),1)]),_:1}),C(Yt,{type:"primary",onClick:ze},{default:B(()=>[St(Ue(je.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),C(Tn,{trigger:"click"},{dropdown:B(()=>[C(yn,null,{default:B(()=>[C(Ot,{onClick:K},{default:B(()=>[C(ht,{iconName:"app-history-outlined"}),St(" "+Ue(je.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),C(Ot,null,{default:B(()=>[C(ht,{iconName:"app-save-outlined"}),St(" "+Ue(je.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),he("div",Pte,[C(rn,{size:"small",modelValue:k.value,"onUpdate:modelValue":it[4]||(it[4]=$n=>k.value=$n),onChange:q},null,8,["modelValue"])])]),_:1})]),_:1})]),default:B(()=>[C(Yt,{text:"",onClick:it[3]||(it[3]=bn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:B(()=>[C(Se,{class:"rotate-90"},{default:B(()=>[C(zt)]),_:1})]),_:1})]),_:1})]))]),C(pn,null,{default:B(()=>[Ua(C(y2,{show:O.value,id:Jr(c),onClickNodes:ce,onOnmousedown:ke,workflowRef:v.value},null,8,["show","id","workflowRef"]),[[$e,Oe]])]),_:1}),he("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[w.value?(qe(),Rt(pte,{key:0,ref_key:"workflowRef",ref:v,data:(ne=w.value)==null?void 0:ne.workFlow},null,8,["data"])):tr("",!0)],512),C(pn,null,{default:B(()=>{var $n,xr,Ur,no;return[S.value?(qe(),Dn("div",{key:0,class:Dd(["workflow-debug-container",P.value?"enlarge":""])},[he("div",{class:Dd(["workflow-debug-header",s.value?"":"custom-header"])},[he("div",Nte,[he("div",kte,[he("div",Rte,[Jr(ZI)(($n=w.value)==null?void 0:$n.icon)?(qe(),Rt(ft,{key:0,shape:"square",size:32,style:{background:"none"}},{default:B(()=>{var jn;return[he("img",{src:(jn=w.value)==null?void 0:jn.icon,alt:""},null,8,Dte)]}),_:1})):(xr=w.value)!=null&&xr.name?(qe(),Rt(ft,{key:1,name:(Ur=w.value)==null?void 0:Ur.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):tr("",!0)]),he("h4",null,Ue(((no=w.value)==null?void 0:no.name)||je.$t("views.application.applicationForm.form.appName.label")),1)]),he("div",Cte,[C(Yt,{link:"",onClick:it[5]||(it[5]=jn=>P.value=!P.value)},{default:B(()=>[C(ht,{iconName:P.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),C(Yt,{link:"",onClick:it[6]||(it[6]=jn=>S.value=!1)},{default:B(()=>[C(Se,{size:20,class:"color-secondary"},{default:B(()=>[C(ge)]),_:1})]),_:1})])])],2),he("div",jte,[C(xn,{"application-details":w.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):tr("",!0)]}),_:1}),j.value?Ua((qe(),Rt(Ete,{key:0,onClick:W,onRefreshVersion:Q},null,512)),[[$e,Y]]):tr("",!0)])),[[mn,b.value]])}}});export{Xte as default};
