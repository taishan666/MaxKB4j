import{cp as D,cq as i,d6 as E,cZ as T,di as z,cu as r,cx as b,cF as P,cA as n,cB as R,cz as t,cE as _,cK as V,cJ as w,cy as A,cC as J,cD as K,cT as M}from"./index-eeff5fe9.js";const O={class:"dialog-footer"},j=D({__name:"FieldFormDialog",emits:["refresh"],setup(S,{expose:g,emit:y}){const d=["string","int","dict","array","float"],F=y,c=i(),$=i(!1),u=i(!1),a=i({name:"",type:d[0],source:"reference",is_required:!0}),k=E({name:[{required:!0,message:T("views.functionLib.functionForm.form.paramName.placeholder"),trigger:"blur"}]}),s=i(!1);z(s,e=>{e||(a.value={name:"",type:d[0],source:"reference",is_required:!0},u.value=!1)});const L=e=>{e&&(a.value=M.cloneDeep(e),u.value=!0),s.value=!0},q=async e=>{e&&await e.validate(l=>{l&&(F("refresh",a.value),s.value=!1)})};return g({open:L}),(e,l)=>{const C=r("el-input"),m=r("el-form-item"),f=r("el-option"),p=r("el-select"),B=r("el-switch"),N=r("el-form"),v=r("el-button"),U=r("el-dialog");return b(),P(U,{title:u.value?e.$t("views.template.templateForm.title.editParam"):e.$t("views.template.templateForm.title.addParam"),modelValue:s.value,"onUpdate:modelValue":l[8]||(l[8]=o=>s.value=o),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":""},{footer:n(()=>[R("span",O,[t(v,{onClick:l[6]||(l[6]=_(o=>s.value=!1,["prevent"]))},{default:n(()=>[V(w(e.$t("common.cancel")),1)]),_:1}),t(v,{type:"primary",onClick:l[7]||(l[7]=o=>q(c.value)),loading:$.value},{default:n(()=>[V(w(u.value?e.$t("common.save"):e.$t("common.add")),1)]),_:1},8,["loading"])])]),default:n(()=>[t(N,{"label-position":"top",ref_key:"fieldFormRef",ref:c,rules:k,model:a.value,"require-asterisk-position":"right"},{default:n(()=>[t(m,{label:e.$t("views.functionLib.functionForm.form.paramName.label"),prop:"name"},{default:n(()=>[t(C,{modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>a.value.name=o),placeholder:e.$t("views.functionLib.functionForm.form.paramName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:l[1]||(l[1]=o=>a.value.name=a.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{label:e.$t("views.functionLib.functionForm.form.dataType.label")},{default:n(()=>[t(p,{modelValue:a.value.type,"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.type=o)},{default:n(()=>[(b(),A(J,null,K(d,o=>t(f,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e.$t("views.functionLib.functionForm.form.source.label")},{default:n(()=>[t(p,{modelValue:a.value.source,"onUpdate:modelValue":l[3]||(l[3]=o=>a.value.source=o)},{default:n(()=>[t(f,{label:e.$t("views.functionLib.functionForm.form.source.reference"),value:"reference"},null,8,["label"]),t(f,{label:e.$t("views.functionLib.functionForm.form.source.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e.$t("views.functionLib.functionForm.form.required.label"),onClick:l[5]||(l[5]=_(()=>{},["prevent"]))},{default:n(()=>[t(B,{size:"small",modelValue:a.value.is_required,"onUpdate:modelValue":l[4]||(l[4]=o=>a.value.is_required=o)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}});export{j as _};
