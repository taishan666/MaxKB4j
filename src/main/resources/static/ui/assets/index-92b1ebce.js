var kj=Object.defineProperty;var Nj=(e,t,n)=>t in e?kj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ea=(e,t,n)=>(Nj(e,typeof t!="symbol"?t+"":t,n),n);import{aK as _v,aL as ys,aM as Ir,aN as wS,aO as $d,aP as Uy,aQ as Sf,aR as Yp,aS as mM,aT as Lu,aU as Vu,ah as fi,aV as Rj,aW as dc,aX as kw,aY as Dj,aZ as Vy,a_ as Fu,a$ as Gy,b0 as Cj,b1 as Mv,b2 as ob,aF as Gu,b3 as jj,b4 as qp,b5 as gM,b6 as Kp,b7 as Bd,z as Nw,b8 as eo,b9 as ib,ba as Wy,bb as ms,bc as Ro,bd as Ef,be as pc,bf as Pv,bg as zy,bh as _s,bi as Sa,bj as qr,bk as ab,bl as Ij,bm as bM,bn as Af,bo as _M,bp as wM,bq as H1,br as ea,ai as $u,bs as Lj,bt as Fj,bu as lb,bv as EM,bw as Zp,bx as OM,ac as Rw,by as kv,A as Nv,bz as Ry,bA as Hy,af as xM,bB as SM,bC as $j,bD as wv,bE as Bj,bF as AM,bG as TM,bH as Uj,bI as MM,bJ as Vj,bK as Gj,bL as Wj,bM as zj,bN as Hj,bO as Tg,bP as Xj,bQ as Yj,bR as qj,bS as PM,bT as kM,bU as NM,bV as RM,bW as Dw,bX as Kj,bY as Xy,bZ as DM,b_ as Zj,b$ as CM,c0 as jM,c1 as Jj,c2 as Qj,c3 as eI,c4 as Gp,ae as tI,c5 as nI,c6 as rI,aH as oI,c7 as iI,ag as aI,c8 as lI,c9 as uI,ca as sI,cb as cI,ab as fI,aj as dI,cc as pI,aG as hI,cd as vI,ce as yI,cf as mI,cg as gI,ch as bI,ci as _I,aa as wI,cj as EI,ck as OI,ak as xI,cl as SI,p as AI,cm as TI,cn as MI,co as PI,cp as kr,cq as mt,cr as lo,cs as kI,ct as bo,cu as te,cv as Ua,cw as Ev,cx as Ve,cy as Dn,cz as C,cA as F,cB as fe,cC as Yo,cD as Ci,cE as bn,cF as _t,cG as lv,cH as Jr,cI as uv,cJ as $e,cK as At,cL as rg,cM as ES,cN as tr,cO as OS,cP as hg,cQ as fa,cR as Yy,cS as Rl,cT as He,cU as Id,cV as Cd,cW as NI,cX as IM,cY as Ba,cZ as Zt,c_ as Cw,c$ as Xo,d0 as RI,d1 as hc,d2 as Pf,d3 as jw,d4 as jd,d5 as Iw,T as DI,d6 as Lw,d7 as Ov,d8 as CI,d9 as jI,da as LM,db as II,dc as FM,dd as LI,de as FI,df as $I,dg as BI,dh as UI,di as $M,dj as Fw,dk as VI,dl as X1,dm as GI,dn as Wp,dp as Of,dq as WI,dr as zI,ds as xS,dt as h1,du as SS,dv as HI,dw as XI,Q as my,dx as YI,dy as BM,dz as Y1,dA as qI,dB as v1,dC as KI,dD as ZI}from"./index-2f436c9e.js";import{A as qy,_ as JI,T as UM,a as QI,b as eL}from"./ReasoningParamSettingDialog.vue_vue_type_style_index_0_scope_true_lang-832bdfe2.js";import{b as VM,c as Jp,v as Rv,d as tL,e as nL,g as GM,f as AS,a as rL,r as oL,h as iL}from"./reduce-abdcc061.js";import{h as aL,i as WM,j as lL,k as uL,l as sL,n as cL,o as fL,p as dL,q as pL,z as hL,f as vL,s as yL,a as mL,m as gL,b as bL,d as _L,e as wL,g as EL,c as OL,r as xL,u as SL}from"./zipObject-9e5df1bf.js";import{_ as AL}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-02594724.js";var TL=0/0;function TS(e){return typeof e=="number"?e:_v(e)?TL:+e}function ub(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=ys(n),o=ys(o)):(n=TS(n),o=TS(o)),r=e(n,o)}return r}}var ML=ub(function(e,t){return e+t},0);const PL=ML;var kL="Expected a function";function NL(e,t){if(typeof t!="function")throw new TypeError(kL);return e=Ir(e),function(){if(--e<1)return t.apply(this,arguments)}}var RL=wS&&new wS;const Mg=RL;var DL=Mg?function(e,t){return Mg.set(e,t),e}:$d;const zM=DL;function Dy(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Uy(e.prototype),o=e.apply(n,t);return Sf(o)?o:n}}var CL=1;function jL(e,t,n){var o=t&CL,r=Dy(e);function s(){var c=this&&this!==Yp&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var IL=Math.max;function HM(e,t,n,o){for(var r=-1,s=e.length,c=n.length,v=-1,h=t.length,g=IL(s-c,0),b=Array(h+g),w=!o;++v<h;)b[v]=t[v];for(;++r<c;)(w||r<s)&&(b[n[r]]=e[r]);for(;g--;)b[v++]=e[r++];return b}var LL=Math.max;function XM(e,t,n,o){for(var r=-1,s=e.length,c=-1,v=n.length,h=-1,g=t.length,b=LL(s-v,0),w=Array(b+g),O=!o;++r<b;)w[r]=e[r];for(var S=r;++h<g;)w[S+h]=t[h];for(;++c<v;)(O||r<s)&&(w[S+n[c]]=e[r++]);return w}function FL(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function sb(){}var $L=4294967295;function Yr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$L,this.__views__=[]}Yr.prototype=Uy(sb.prototype);Yr.prototype.constructor=Yr;var BL=Mg?function(e){return Mg.get(e)}:mM;const $w=BL;var UL={};const dv=UL;var VL=Object.prototype,GL=VL.hasOwnProperty;function vg(e){for(var t=e.name+"",n=dv[t],o=GL.call(dv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function Bu(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Bu.prototype=Uy(sb.prototype);Bu.prototype.constructor=Bu;function YM(e){if(e instanceof Yr)return e.clone();var t=new Bu(e.__wrapped__,e.__chain__);return t.__actions__=Lu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var WL=Object.prototype,zL=WL.hasOwnProperty;function ae(e){if(Vu(e)&&!fi(e)&&!(e instanceof Yr)){if(e instanceof Bu)return e;if(zL.call(e,"__wrapped__"))return YM(e)}return new Bu(e)}ae.prototype=sb.prototype;ae.prototype.constructor=ae;function q1(e){var t=vg(e),n=ae[t];if(typeof n!="function"||!(t in Yr.prototype))return!1;if(e===n)return!0;var o=$w(n);return!!o&&e===o[0]}var HL=Rj(zM);const qM=HL;var XL=/\{\n\/\* \[wrapped with (.+)\] \*/,YL=/,? & /;function qL(e){var t=e.match(XL);return t?t[1].split(YL):[]}var KL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ZL(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(KL,`{
/* [wrapped with `+t+`] */
`)}var JL=1,QL=2,e3=8,t3=16,n3=32,r3=64,o3=128,i3=256,a3=512,l3=[["ary",o3],["bind",JL],["bindKey",QL],["curry",e3],["curryRight",t3],["flip",a3],["partial",n3],["partialRight",r3],["rearg",i3]];function u3(e,t){return dc(l3,function(n){var o="_."+n[0];t&n[1]&&!kw(e,o)&&e.push(o)}),e.sort()}function KM(e,t,n){var o=t+"";return Dj(e,ZL(o,u3(qL(o),n)))}var s3=1,c3=2,f3=4,d3=8,MS=32,PS=64;function ZM(e,t,n,o,r,s,c,v,h,g){var b=t&d3,w=b?c:void 0,O=b?void 0:c,S=b?s:void 0,P=b?void 0:s;t|=b?MS:PS,t&=~(b?PS:MS),t&f3||(t&=~(s3|c3));var A=[e,t,r,S,w,P,O,v,h,g],k=n.apply(void 0,A);return q1(e)&&qM(k,A),k.placeholder=o,KM(k,e,t)}function Dv(e){var t=e;return t.placeholder}var p3=Math.min;function h3(e,t){for(var n=e.length,o=p3(t.length,n),r=Lu(e);o--;){var s=t[o];e[o]=Vy(s,n)?r[s]:void 0}return e}var kS="__lodash_placeholder__";function Ld(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===kS)&&(e[n]=kS,s[r++]=n)}return s}var v3=1,y3=2,m3=8,g3=16,b3=128,_3=512;function cb(e,t,n,o,r,s,c,v,h,g){var b=t&b3,w=t&v3,O=t&y3,S=t&(m3|g3),P=t&_3,A=O?void 0:Dy(e);function k(){for(var j=arguments.length,R=Array(j),B=j;B--;)R[B]=arguments[B];if(S)var G=Dv(k),H=FL(R,G);if(o&&(R=HM(R,o,r,S)),s&&(R=XM(R,s,c,S)),j-=H,S&&j<g){var Y=Ld(R,G);return ZM(e,t,cb,k.placeholder,n,R,Y,v,h,g-j)}var Q=w?n:this,W=O?Q[e]:e;return j=R.length,v?R=h3(R,v):P&&j>1&&R.reverse(),b&&h<j&&(R.length=h),this&&this!==Yp&&this instanceof k&&(W=A||Dy(W)),W.apply(Q,R)}return k}function w3(e,t,n){var o=Dy(e);function r(){for(var s=arguments.length,c=Array(s),v=s,h=Dv(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==h&&c[s-1]!==h?[]:Ld(c,h);if(s-=g.length,s<n)return ZM(e,t,cb,r.placeholder,void 0,c,g,void 0,void 0,n-s);var b=this&&this!==Yp&&this instanceof r?o:e;return Fu(b,this,c)}return r}var E3=1;function O3(e,t,n,o){var r=t&E3,s=Dy(e);function c(){for(var v=-1,h=arguments.length,g=-1,b=o.length,w=Array(b+h),O=this&&this!==Yp&&this instanceof c?s:e;++g<b;)w[g]=o[g];for(;h--;)w[g++]=arguments[++v];return Fu(O,r?n:this,w)}return c}var NS="__lodash_placeholder__",y1=1,x3=2,S3=4,RS=8,dy=128,DS=256,A3=Math.min;function T3(e,t){var n=e[1],o=t[1],r=n|o,s=r<(y1|x3|dy),c=o==dy&&n==RS||o==dy&&n==DS&&e[7].length<=t[8]||o==(dy|DS)&&t[7].length<=t[8]&&n==RS;if(!(s||c))return e;o&y1&&(e[2]=t[2],r|=n&y1?0:S3);var v=t[3];if(v){var h=e[3];e[3]=h?HM(h,v,t[4]):v,e[4]=h?Ld(e[3],NS):t[4]}return v=t[5],v&&(h=e[5],e[5]=h?XM(h,v,t[6]):v,e[6]=h?Ld(e[5],NS):t[6]),v=t[7],v&&(e[7]=v),o&dy&&(e[8]=e[8]==null?t[8]:A3(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var M3="Expected a function",CS=1,P3=2,m1=8,g1=16,b1=32,jS=64,IS=Math.max;function kf(e,t,n,o,r,s,c,v){var h=t&P3;if(!h&&typeof e!="function")throw new TypeError(M3);var g=o?o.length:0;if(g||(t&=~(b1|jS),o=r=void 0),c=c===void 0?c:IS(Ir(c),0),v=v===void 0?v:Ir(v),g-=r?r.length:0,t&jS){var b=o,w=r;o=r=void 0}var O=h?void 0:$w(e),S=[e,t,n,o,r,b,w,s,c,v];if(O&&T3(S,O),e=S[0],t=S[1],n=S[2],o=S[3],r=S[4],v=S[9]=S[9]===void 0?h?0:e.length:IS(S[9]-g,0),!v&&t&(m1|g1)&&(t&=~(m1|g1)),!t||t==CS)var P=jL(e,t,n);else t==m1||t==g1?P=w3(e,t,v):(t==b1||t==(CS|b1))&&!r.length?P=O3(e,t,n,o):P=cb.apply(void 0,S);var A=O?zM:qM;return KM(A(P,S),e,t)}var k3=128;function JM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,kf(e,k3,void 0,void 0,void 0,void 0,t)}var N3=Object.prototype,R3=N3.hasOwnProperty,D3=Gy(function(e,t){if(Cj(t)||Mv(t)){ob(t,Gu(t),e);return}for(var n in t)R3.call(t,n)&&jj(e,n,t[n])});const C3=D3;var j3=Gy(function(e,t){ob(t,qp(t),e)});const LS=j3;var I3=Gy(function(e,t,n,o){ob(t,qp(t),e,o)});const Pg=I3;var L3=Gy(function(e,t,n,o){ob(t,Gu(t),e,o)});const F3=L3;function Bw(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:gM(e,t[n]);return r}var $3=Kp(Bw);const B3=$3;var U3="[object DOMException]",V3="[object Error]";function Uw(e){if(!Vu(e))return!1;var t=Bd(e);return t==V3||t==U3||typeof e.message=="string"&&typeof e.name=="string"&&!Nw(e)}var G3=eo(function(e,t){try{return Fu(e,void 0,t)}catch(n){return Uw(n)?n:new Error(n)}});const QM=G3;var W3="Expected a function";function eP(e,t){var n;if(typeof t!="function")throw new TypeError(W3);return e=Ir(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var z3=1,H3=32,Vw=eo(function(e,t,n){var o=z3;if(n.length){var r=Ld(n,Dv(Vw));o|=H3}return kf(e,o,t,n,r)});Vw.placeholder={};const tP=Vw;var X3=Kp(function(e,t){return dc(t,function(n){n=ib(n),Wy(e,n,tP(e[n],e))}),e});const Y3=X3;var q3=1,K3=2,Z3=32,Gw=eo(function(e,t,n){var o=q3|K3;if(n.length){var r=Ld(n,Dv(Gw));o|=Z3}return kf(t,o,e,n,r)});Gw.placeholder={};const J3=Gw;function Ud(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:ms(e,t,n)}var Q3="\\ud800-\\udfff",e8="\\u0300-\\u036f",t8="\\ufe20-\\ufe2f",n8="\\u20d0-\\u20ff",r8=e8+t8+n8,o8="\\ufe0e\\ufe0f",i8="\\u200d",a8=RegExp("["+i8+Q3+r8+o8+"]");function Cv(e){return a8.test(e)}function l8(e){return e.split("")}var nP="\\ud800-\\udfff",u8="\\u0300-\\u036f",s8="\\ufe20-\\ufe2f",c8="\\u20d0-\\u20ff",f8=u8+s8+c8,d8="\\ufe0e\\ufe0f",p8="["+nP+"]",K1="["+f8+"]",Z1="\\ud83c[\\udffb-\\udfff]",h8="(?:"+K1+"|"+Z1+")",rP="[^"+nP+"]",oP="(?:\\ud83c[\\udde6-\\uddff]){2}",iP="[\\ud800-\\udbff][\\udc00-\\udfff]",v8="\\u200d",aP=h8+"?",lP="["+d8+"]?",y8="(?:"+v8+"(?:"+[rP,oP,iP].join("|")+")"+lP+aP+")*",m8=lP+aP+y8,g8="(?:"+[rP+K1+"?",K1,oP,iP,p8].join("|")+")",b8=RegExp(Z1+"(?="+Z1+")|"+g8+m8,"g");function _8(e){return e.match(b8)||[]}function gs(e){return Cv(e)?_8(e):l8(e)}function uP(e){return function(t){t=Ro(t);var n=Cv(t)?gs(t):void 0,o=n?n[0]:t.charAt(0),r=n?Ud(n,1).join(""):t.slice(1);return o[e]()+r}}var w8=uP("toUpperCase");const Ww=w8;function sP(e){return Ww(Ro(e).toLowerCase())}function zw(e){return function(t){return e==null?void 0:e[t]}}var E8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},O8=zw(E8);const x8=O8;var S8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,A8="\\u0300-\\u036f",T8="\\ufe20-\\ufe2f",M8="\\u20d0-\\u20ff",P8=A8+T8+M8,k8="["+P8+"]",N8=RegExp(k8,"g");function cP(e){return e=Ro(e),e&&e.replace(S8,x8).replace(N8,"")}var R8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function D8(e){return e.match(R8)||[]}var C8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function j8(e){return C8.test(e)}var fP="\\ud800-\\udfff",I8="\\u0300-\\u036f",L8="\\ufe20-\\ufe2f",F8="\\u20d0-\\u20ff",$8=I8+L8+F8,dP="\\u2700-\\u27bf",pP="a-z\\xdf-\\xf6\\xf8-\\xff",B8="\\xac\\xb1\\xd7\\xf7",U8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",V8="\\u2000-\\u206f",G8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hP="A-Z\\xc0-\\xd6\\xd8-\\xde",W8="\\ufe0e\\ufe0f",vP=B8+U8+V8+G8,yP="['’]",FS="["+vP+"]",z8="["+$8+"]",mP="\\d+",H8="["+dP+"]",gP="["+pP+"]",bP="[^"+fP+vP+mP+dP+pP+hP+"]",X8="\\ud83c[\\udffb-\\udfff]",Y8="(?:"+z8+"|"+X8+")",q8="[^"+fP+"]",_P="(?:\\ud83c[\\udde6-\\uddff]){2}",wP="[\\ud800-\\udbff][\\udc00-\\udfff]",tv="["+hP+"]",K8="\\u200d",$S="(?:"+gP+"|"+bP+")",Z8="(?:"+tv+"|"+bP+")",BS="(?:"+yP+"(?:d|ll|m|re|s|t|ve))?",US="(?:"+yP+"(?:D|LL|M|RE|S|T|VE))?",EP=Y8+"?",OP="["+W8+"]?",J8="(?:"+K8+"(?:"+[q8,_P,wP].join("|")+")"+OP+EP+")*",Q8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tF=OP+EP+J8,nF="(?:"+[H8,_P,wP].join("|")+")"+tF,rF=RegExp([tv+"?"+gP+"+"+BS+"(?="+[FS,tv,"$"].join("|")+")",Z8+"+"+US+"(?="+[FS,tv+$S,"$"].join("|")+")",tv+"?"+$S+"+"+BS,tv+"+"+US,eF,Q8,mP,nF].join("|"),"g");function oF(e){return e.match(rF)||[]}function xP(e,t,n){return e=Ro(e),t=n?void 0:t,t===void 0?j8(e)?oF(e):D8(e):e.match(t)||[]}var iF="['’]",aF=RegExp(iF,"g");function jv(e){return function(t){return VM(xP(cP(t).replace(aF,"")),e,"")}}var lF=jv(function(e,t,n){return t=t.toLowerCase(),e+(n?sP(t):t)});const uF=lF;var sF=Yp.isFinite,cF=Math.min;function Hw(e){var t=Math[e];return function(n,o){if(n=Ef(n),o=o==null?0:cF(Ir(o),292),o&&sF(n)){var r=(Ro(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(Ro(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var fF=Hw("ceil");const dF=fF;function SP(e){var t=ae(e);return t.__chain__=!0,t}var pF=Math.ceil,hF=Math.max;function vF(e,t,n){(n?pc(e,t,n):t===void 0)?t=1:t=hF(Ir(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(pF(o/t));r<o;)c[s++]=ms(e,r,r+=t);return c}function Qp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function yF(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Ef(n),n=n===n?n:0),t!==void 0&&(t=Ef(t),t=t===t?t:0),Qp(Ef(e),t,n)}var mF=1,gF=4;function bF(e,t){return t=typeof t=="function"?t:void 0,Pv(e,mF|gF,t)}var _F=4;function wF(e,t){return t=typeof t=="function"?t:void 0,Pv(e,_F,t)}function EF(){return new Bu(this.value(),this.__chain__)}function OF(e){for(var t=-1,n=e==null?0:e.length,o=0,r=[];++t<n;){var s=e[t];s&&(r[o++]=s)}return r}function xF(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return zy(fi(n)?Lu(n):[n],_s(t,1))}var SF="Expected a function";function AF(e){var t=e==null?0:e.length,n=qr;return e=t?Sa(e,function(o){if(typeof o[1]!="function")throw new TypeError(SF);return[n(o[0]),o[1]]}):[],eo(function(o){for(var r=-1;++r<t;){var s=e[r];if(Fu(s[0],this,o))return Fu(s[1],this,o)}})}function AP(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function TF(e){var t=Gu(e);return function(n){return AP(n,e,t)}}var MF=1;function PF(e){return TF(Pv(e,MF))}function kF(e,t){return t==null||AP(e,t,Gu(t))}function NF(e,t,n,o){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(o,c,n(c),e)}return o}function RF(e,t,n,o){return ab(e,function(r,s,c){t(o,r,n(r),c)}),o}function fb(e,t){return function(n,o){var r=fi(n)?NF:RF,s=t?t():{};return r(n,e,qr(o),s)}}var DF=Object.prototype,CF=DF.hasOwnProperty,jF=fb(function(e,t,n){CF.call(e,n)?++e[n]:Wy(e,n,1)});const IF=jF;function LF(e,t){var n=Uy(e);return t==null?n:Ij(n,t)}var FF=8;function Xw(e,t,n){t=n?void 0:t;var o=kf(e,FF,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Xw.placeholder,o}Xw.placeholder={};var $F=16;function Yw(e,t,n){t=n?void 0:t;var o=kf(e,$F,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Yw.placeholder,o}Yw.placeholder={};function BF(e,t){return e==null||e!==e?t:e}function TP(e,t,n,o,r,s){return Sf(e)&&Sf(t)&&(s.set(t,e),bM(e,t,void 0,TP,s),s.delete(t)),e}var UF=Gy(function(e,t,n,o){bM(e,t,n,o)});const MP=UF;var VF=eo(function(e){return e.push(void 0,TP),Fu(MP,void 0,e)});const GF=VF;var WF="Expected a function";function PP(e,t,n){if(typeof e!="function")throw new TypeError(WF);return setTimeout(function(){e.apply(void 0,n)},t)}var zF=eo(function(e,t){return PP(e,1,t)});const HF=zF;var XF=eo(function(e,t,n){return PP(e,Ef(t)||0,n)});const YF=XF;var qF=200;function Ky(e,t,n,o){var r=-1,s=kw,c=!0,v=e.length,h=[],g=t.length;if(!v)return h;n&&(t=Sa(t,Af(n))),o?(s=wM,c=!1):t.length>=qF&&(s=H1,c=!1,t=new _M(t));e:for(;++r<v;){var b=e[r],w=n==null?b:n(b);if(b=o||b!==0?b:0,c&&w===w){for(var O=g;O--;)if(t[O]===w)continue e;h.push(b)}else s(t,w,o)||h.push(b)}return h}var KF=eo(function(e,t){return ea(e)?Ky(e,_s(t,1,ea,!0)):[]});const ZF=KF;var JF=eo(function(e,t){var n=$u(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,_s(t,1,ea,!0),qr(n)):[]});const QF=JF;var e4=eo(function(e,t){var n=$u(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,_s(t,1,ea,!0),void 0,n):[]});const t4=e4;var n4=ub(function(e,t){return e/t},1);const r4=n4;function o4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),ms(e,t<0?0:t,o)):[]}function i4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,ms(e,0,t<0?0:t)):[]}function db(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?ms(e,o?0:s,o?s+1:r):ms(e,o?s+1:0,o?r:s)}function a4(e,t){return e&&e.length?db(e,qr(t),!0,!0):[]}function l4(e,t){return e&&e.length?db(e,qr(t),!0):[]}function u4(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var s4=Lj(!0);const kP=s4;function qw(e,t){return e&&kP(e,t,Gu)}var c4=Fj(qw,!0);const NP=c4;function VS(e,t){var n=fi(e)?u4:NP;return n(e,Jp(t))}function f4(e,t,n){e=Ro(e),t=ys(t);var o=e.length;n=n===void 0?o:Qp(Ir(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function d4(e,t){return Sa(t,function(n){return[n,e[n]]})}function p4(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var h4="[object Map]",v4="[object Set]";function RP(e){return function(t){var n=lb(t);return n==h4?EM(t):n==v4?p4(t):d4(t,e(t))}}var y4=RP(Gu);const GS=y4;var m4=RP(qp);const WS=m4;var g4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b4=zw(g4);const _4=b4;var DP=/[&<>"']/g,w4=RegExp(DP.source);function CP(e){return e=Ro(e),e&&w4.test(e)?e.replace(DP,_4):e}var jP=/[\\^$.*+?()[\]{}|]/g,E4=RegExp(jP.source);function O4(e){return e=Ro(e),e&&E4.test(e)?e.replace(jP,"\\$&"):e}function IP(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function x4(e,t){var n=!0;return ab(e,function(o,r,s){return n=!!t(o,r,s),n}),n}function S4(e,t,n){var o=fi(e)?IP:x4;return n&&pc(e,t,n)&&(t=void 0),o(e,qr(t))}var A4=4294967295;function LP(e){return e?Qp(Ir(e),0,A4):0}function T4(e,t,n,o){var r=e.length;for(n=Ir(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:Ir(o),o<0&&(o+=r),o=n>o?0:LP(o);n<o;)e[n++]=t;return e}function M4(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&pc(e,t,n)&&(n=0,o=r),T4(e,t,n,o)):[]}function FP(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function P4(e,t){return FP(e,qr(t),Zp)}var k4=aL(OM);const N4=k4;function R4(e,t){return FP(e,qr(t),qw)}function zS(e){return e&&e.length?e[0]:void 0}var D4=1/0;function C4(e,t){return _s(Rw(e,t),D4)}function j4(e,t,n){return n=n===void 0?1:Ir(n),_s(Rw(e,t),n)}function I4(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Ir(t),_s(e,t)):[]}var L4=512;function F4(e){return kf(e,L4)}var $4=Hw("floor");const B4=$4;var U4="Expected a function",V4=8,G4=32,W4=128,z4=256;function $P(e){return Kp(function(t){var n=t.length,o=n,r=Bu.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(U4);if(r&&!c&&vg(s)=="wrapper")var c=new Bu([],!0)}for(o=c?o:n;++o<n;){s=t[o];var v=vg(s),h=v=="wrapper"?$w(s):void 0;h&&q1(h[0])&&h[1]==(W4|V4|G4|z4)&&!h[4].length&&h[9]==1?c=c[vg(h[0])].apply(c,h[3]):c=s.length==1&&q1(s)?c[v]():c.thru(s)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&fi(b))return c.plant(b).value();for(var w=0,O=n?t[w].apply(this,g):b;++w<n;)O=t[w].call(this,O);return O}})}var H4=$P();const X4=H4;var Y4=$P(!0);const q4=Y4;function K4(e,t){return e==null?e:kP(e,Jp(t),qp)}function Z4(e,t){return e&&qw(e,Jp(t))}function pb(e,t){return kv(t,function(n){return Nv(e[n])})}function J4(e){return e==null?[]:pb(e,Gu(e))}function Q4(e){return e==null?[]:pb(e,qp(e))}var e$=Object.prototype,t$=e$.hasOwnProperty,n$=fb(function(e,t,n){t$.call(e,n)?e[n].push(t):Wy(e,n,[t])});const r$=n$;function hb(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Ef(t),n=Ef(n)),e(t,n)}}var o$=hb(WM);const i$=o$;var a$=hb(function(e,t){return e>=t});const l$=a$;var u$=Math.max,s$=Math.min;function c$(e,t,n){return e>=s$(t,n)&&e<u$(t,n)}function f$(e,t,n){return t=Ry(t),n===void 0?(n=t,t=0):n=Ry(n),e=Ef(e),c$(e,t,n)}var d$="[object String]";function vb(e){return typeof e=="string"||!fi(e)&&Vu(e)&&Bd(e)==d$}var p$=Math.max;function h$(e,t,n,o){e=Mv(e)?e:Rv(e),n=n&&!o?Ir(n):0;var r=e.length;return n<0&&(n=p$(r+n,0)),vb(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Hy(e,t,n)>-1}var v$=Math.max;function y$(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Ir(n);return r<0&&(r=v$(o+r,0)),Hy(e,t,r)}function m$(e){var t=e==null?0:e.length;return t?ms(e,0,-1):[]}var g$=Math.min;function Kw(e,t,n){for(var o=n?wM:kw,r=e[0].length,s=e.length,c=s,v=Array(s),h=1/0,g=[];c--;){var b=e[c];c&&t&&(b=Sa(b,Af(t))),h=g$(b.length,h),v[c]=!n&&(t||r>=120&&b.length>=120)?new _M(c&&b):void 0}b=e[0];var w=-1,O=v[0];e:for(;++w<r&&g.length<h;){var S=b[w],P=t?t(S):S;if(S=n||S!==0?S:0,!(O?H1(O,P):o(g,P,n))){for(c=s;--c;){var A=v[c];if(!(A?H1(A,P):o(e[c],P,n)))continue e}O&&O.push(P),g.push(S)}}return g}function Zw(e){return ea(e)?e:[]}var b$=eo(function(e){var t=Sa(e,Zw);return t.length&&t[0]===e[0]?Kw(t):[]});const _$=b$;var w$=eo(function(e){var t=$u(e),n=Sa(e,Zw);return t===$u(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Kw(n,qr(t)):[]});const E$=w$;var O$=eo(function(e){var t=$u(e),n=Sa(e,Zw);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?Kw(n,void 0,t):[]});const x$=O$;function S$(e,t,n,o){return Zp(e,function(r,s,c){t(o,n(r),s,c)}),o}function BP(e,t){return function(n,o){return S$(n,e,t(o),{})}}var A$=Object.prototype,T$=A$.toString,M$=BP(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=T$.call(t)),e[t]=n},xM($d));const P$=M$;var UP=Object.prototype,k$=UP.hasOwnProperty,N$=UP.toString,R$=BP(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=N$.call(t)),k$.call(e,t)?e[t].push(n):e[t]=[n]},qr);const D$=R$;function Zy(e,t,n){t=SM(t,e),e=$j(e,t);var o=e==null?e:e[ib($u(t))];return o==null?void 0:Fu(o,e,n)}var C$=eo(Zy);const j$=C$;var I$=eo(function(e,t,n){var o=-1,r=typeof t=="function",s=Mv(e)?Array(e.length):[];return ab(e,function(c){s[++o]=r?Fu(t,c,n):Zy(c,t,n)}),s});const L$=I$;var F$="[object ArrayBuffer]";function $$(e){return Vu(e)&&Bd(e)==F$}var HS=wv&&wv.isArrayBuffer,B$=HS?Af(HS):$$;const U$=B$;var V$="[object Boolean]";function G$(e){return e===!0||e===!1||Vu(e)&&Bd(e)==V$}var W$="[object Date]";function z$(e){return Vu(e)&&Bd(e)==W$}var XS=wv&&wv.isDate,H$=XS?Af(XS):z$;const X$=H$;function Y$(e){return Vu(e)&&e.nodeType===1&&!Nw(e)}function q$(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?Bj(e,t,void 0,n):!!o}var K$=Yp.isFinite;function Z$(e){return typeof e=="number"&&K$(e)}function VP(e){return typeof e=="number"&&e==Ir(e)}function J$(e,t){return e===t||AM(e,t,TM(t))}function Q$(e,t,n){return n=typeof n=="function"?n:void 0,AM(e,t,TM(t),n)}var e5="[object Number]";function GP(e){return typeof e=="number"||Vu(e)&&Bd(e)==e5}function t5(e){return GP(e)&&e!=+e}var n5=Uj?Nv:MM;const r5=n5;var o5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function i5(e){if(r5(e))throw new Error(o5);return Vj(e)}var a5="[object RegExp]";function l5(e){return Vu(e)&&Bd(e)==a5}var YS=wv&&wv.isRegExp,u5=YS?Af(YS):l5;const Jw=u5;var qS=9007199254740991;function s5(e){return VP(e)&&e>=-qS&&e<=qS}var c5="[object WeakMap]";function f5(e){return Vu(e)&&lb(e)==c5}var d5="[object WeakSet]";function p5(e){return Vu(e)&&Bd(e)==d5}var h5=1;function v5(e){return qr(typeof e=="function"?e:Pv(e,h5))}var y5=Array.prototype,m5=y5.join;function g5(e,t){return e==null?"":m5.call(e,t)}var b5=jv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const _5=b5;var w5=fb(function(e,t,n){Wy(e,n,t)});const E5=w5;function O5(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var x5=Math.max,S5=Math.min;function A5(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=Ir(n),r=r<0?x5(o+r,0):S5(r,o-1)),t===t?O5(e,t,r):Gj(e,Wj,r,!0)}var T5=jv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const M5=T5;var P5=uP("toLowerCase");const k5=P5;var N5=hb(lL);const R5=N5;var D5=hb(function(e,t){return e<=t});const C5=D5;function j5(e,t){var n={};return t=qr(t),Zp(e,function(o,r,s){Wy(n,t(o,r,s),o)}),n}var I5=1;function L5(e){return zj(Pv(e,I5))}var F5=1;function $5(e,t){return Hj(e,Pv(t,F5))}function B5(e,t){return e&&e.length?uL(e,qr(t),WM):void 0}function Qw(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var U5=0/0;function WP(e,t){var n=e==null?0:e.length;return n?Qw(e,t)/n:U5}function V5(e){return WP(e,$d)}function G5(e,t){return WP(e,qr(t))}var W5=eo(function(e,t){return function(n){return Zy(n,e,t)}});const z5=W5;var H5=eo(function(e,t){return function(n){return Zy(e,n,t)}});const X5=H5;function zP(e,t,n){var o=Gu(t),r=pb(t,o),s=!(Sf(n)&&"chain"in n)||!!n.chain,c=Nv(e);return dc(r,function(v){var h=t[v];e[v]=h,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var b=e(this.__wrapped__),w=b.__actions__=Lu(this.__actions__);return w.push({func:h,args:arguments,thisArg:e}),b.__chain__=g,b}return h.apply(e,zy([this.value()],arguments))})}),e}var Y5=ub(function(e,t){return e*t},1);const q5=Y5;var K5="Expected a function";function Jy(e){if(typeof e!="function")throw new TypeError(K5);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Z5(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var J5="[object Map]",Q5="[object Set]",_1=Tg?Tg.iterator:void 0;function HP(e){if(!e)return[];if(Mv(e))return vb(e)?gs(e):Lu(e);if(_1&&e[_1])return Z5(e[_1]());var t=lb(e),n=t==J5?EM:t==Q5?Xj:Rv;return n(e)}function eB(){this.__values__===void 0&&(this.__values__=HP(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function XP(e,t){var n=e.length;if(n)return t+=t<0?n:0,Vy(t,n)?e[t]:void 0}function tB(e,t){return e&&e.length?XP(e,Ir(t)):void 0}function nB(e){return e=Ir(e),eo(function(t){return XP(t,e)})}function YP(e,t){if(e==null)return{};var n=Sa(Yj(e),function(o){return[o]});return t=qr(t),qj(e,n,function(o,r){return t(o,r[0])})}function rB(e,t){return YP(e,Jy(qr(t)))}function oB(e){return eP(2,e)}function iB(e,t,n,o){return e==null?[]:(fi(t)||(t=t==null?[]:[t]),n=o?void 0:n,fi(n)||(n=n==null?[]:[n]),sL(e,t,n))}function eE(e){return Kp(function(t){return t=Sa(t,Af(qr)),eo(function(n){var o=this;return e(t,function(r){return Fu(r,o,n)})})})}var aB=eE(Sa);const lB=aB;var uB=eo;const sB=uB;var cB=Math.min,fB=sB(function(e,t){t=t.length==1&&fi(t[0])?Sa(t[0],Af(qr)):Sa(_s(t,1),Af(qr));var n=t.length;return eo(function(o){for(var r=-1,s=cB(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Fu(e,this,o)})});const dB=fB;var pB=eE(IP);const hB=pB;var vB=eE(PM);const yB=vB;var mB=9007199254740991,gB=Math.floor;function J1(e,t){var n="";if(!e||t<1||t>mB)return n;do t%2&&(n+=e),t=gB(t/2),t&&(e+=e);while(t);return n}var bB=kM("length");const _B=bB;var qP="\\ud800-\\udfff",wB="\\u0300-\\u036f",EB="\\ufe20-\\ufe2f",OB="\\u20d0-\\u20ff",xB=wB+EB+OB,SB="\\ufe0e\\ufe0f",AB="["+qP+"]",Q1="["+xB+"]",ew="\\ud83c[\\udffb-\\udfff]",TB="(?:"+Q1+"|"+ew+")",KP="[^"+qP+"]",ZP="(?:\\ud83c[\\udde6-\\uddff]){2}",JP="[\\ud800-\\udbff][\\udc00-\\udfff]",MB="\\u200d",QP=TB+"?",e2="["+SB+"]?",PB="(?:"+MB+"(?:"+[KP,ZP,JP].join("|")+")"+e2+QP+")*",kB=e2+QP+PB,NB="(?:"+[KP+Q1+"?",Q1,ZP,JP,AB].join("|")+")",KS=RegExp(ew+"(?="+ew+")|"+NB+kB,"g");function RB(e){for(var t=KS.lastIndex=0;KS.test(e);)++t;return t}function Iv(e){return Cv(e)?RB(e):_B(e)}var DB=Math.ceil;function kg(e,t){t=t===void 0?" ":ys(t);var n=t.length;if(n<2)return n?J1(t,e):t;var o=J1(t,DB(e/Iv(t)));return Cv(t)?Ud(gs(o),0,e).join(""):o.slice(0,e)}var CB=Math.ceil,jB=Math.floor;function IB(e,t,n){e=Ro(e),t=Ir(t);var o=t?Iv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return kg(jB(r),n)+e+kg(CB(r),n)}function LB(e,t,n){e=Ro(e),t=Ir(t);var o=t?Iv(e):0;return t&&o<t?e+kg(t-o,n):e}function FB(e,t,n){e=Ro(e),t=Ir(t);var o=t?Iv(e):0;return t&&o<t?kg(t-o,n)+e:e}var $B=/^\s+/,BB=Yp.parseInt;function UB(e,t,n){return n||t==null?t=0:t&&(t=+t),BB(Ro(e).replace($B,""),t||0)}var VB=32,tE=eo(function(e,t){var n=Ld(t,Dv(tE));return kf(e,VB,void 0,t,n)});tE.placeholder={};const t2=tE;var GB=64,nE=eo(function(e,t){var n=Ld(t,Dv(nE));return kf(e,GB,void 0,t,n)});nE.placeholder={};const WB=nE;var zB=fb(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const HB=zB;function XB(e){for(var t,n=this;n instanceof sb;){var o=YM(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function YB(e){return function(t){return e==null?void 0:NM(e,t)}}function qB(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var KB=Array.prototype,ZS=KB.splice;function rE(e,t,n,o){var r=o?qB:Hy,s=-1,c=t.length,v=e;for(e===t&&(t=Lu(t)),n&&(v=Sa(e,Af(n)));++s<c;)for(var h=0,g=t[s],b=n?n(g):g;(h=r(v,b,h,o))>-1;)v!==e&&ZS.call(v,h,1),ZS.call(e,h,1);return e}function n2(e,t){return e&&e.length&&t&&t.length?rE(e,t):e}var ZB=eo(n2);const JB=ZB;function QB(e,t,n){return e&&e.length&&t&&t.length?rE(e,t,qr(n)):e}function e6(e,t,n){return e&&e.length&&t&&t.length?rE(e,t,void 0,n):e}var t6=Array.prototype,n6=t6.splice;function r2(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Vy(r)?n6.call(e,r,1):RM(e,r)}}return e}var r6=Kp(function(e,t){var n=e==null?0:e.length,o=Bw(e,t);return r2(e,Sa(t,function(r){return Vy(r,n)?+r:r}).sort(cL)),o});const o6=r6;var i6=Math.floor,a6=Math.random;function oE(e,t){return e+i6(a6()*(t-e+1))}var l6=parseFloat,u6=Math.min,s6=Math.random;function c6(e,t,n){if(n&&typeof n!="boolean"&&pc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Ry(e),t===void 0?(t=e,e=0):t=Ry(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=s6();return u6(e+r*(t-e+l6("1e-"+((r+"").length-1))),t)}return oE(e,t)}var f6=fL(!0);const d6=f6;var p6=256,h6=Kp(function(e,t){return kf(e,p6,void 0,void 0,void 0,t)});const v6=h6;function y6(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function m6(e,t,n){var o=fi(e)?y6:tL,r=arguments.length<3;return o(e,qr(t),n,r,NP)}function g6(e,t){var n=fi(e)?kv:nL;return n(e,Jy(qr(t)))}function b6(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=qr(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return r2(e,r),n}function _6(e,t,n){return(n?pc(e,t,n):t===void 0)?t=1:t=Ir(t),J1(Ro(e),t)}function w6(){var e=arguments,t=Ro(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var E6="Expected a function";function O6(e,t){if(typeof e!="function")throw new TypeError(E6);return t=t===void 0?t:Ir(t),eo(e,t)}function x6(e,t,n){t=SM(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[ib(t[o])];s===void 0&&(o=r,s=n),e=Nv(s)?s.call(e):s}return e}var S6=Array.prototype,A6=S6.reverse;function tw(e){return e==null?e:A6.call(e)}var T6=Hw("round");const M6=T6;function o2(e){var t=e.length;return t?e[oE(0,t-1)]:void 0}function P6(e){return o2(Rv(e))}function k6(e){var t=fi(e)?o2:P6;return t(e)}function yb(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=oE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function N6(e,t){return yb(Lu(e),Qp(t,0,e.length))}function R6(e,t){var n=Rv(e);return yb(n,Qp(t,0,n.length))}function D6(e,t,n){(n?pc(e,t,n):t===void 0)?t=1:t=Ir(t);var o=fi(e)?N6:R6;return o(e,t)}function C6(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:Dw(e,t,n,o)}function j6(e){return yb(Lu(e))}function I6(e){return yb(Rv(e))}function L6(e){var t=fi(e)?j6:I6;return t(e)}var F6="[object Map]",$6="[object Set]";function B6(e){if(e==null)return 0;if(Mv(e))return vb(e)?Iv(e):e.length;var t=lb(e);return t==F6||t==$6?e.size:Kj(e).length}function U6(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&pc(e,t,n)?(t=0,n=o):(t=t==null?0:Ir(t),n=n===void 0?o:Ir(n)),ms(e,t,n)):[]}var V6=jv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const G6=V6;function W6(e,t){var n;return ab(e,function(o,r,s){return n=t(o,r,s),!n}),!!n}function z6(e,t,n){var o=fi(e)?PM:W6;return n&&pc(e,t,n)&&(t=void 0),o(e,qr(t))}var H6=4294967295,X6=H6-1,Y6=Math.floor,q6=Math.min;function iE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,h=_v(t),g=t===void 0;r<s;){var b=Y6((r+s)/2),w=n(e[b]),O=w!==void 0,S=w===null,P=w===w,A=_v(w);if(c)var k=o||P;else g?k=P&&(o||O):v?k=P&&O&&(o||!S):h?k=P&&O&&!S&&(o||!A):S||A?k=!1:k=o?w<=t:w<t;k?r=b+1:s=b}return q6(s,X6)}var K6=4294967295,Z6=K6>>>1;function mb(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=Z6){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!_v(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return iE(e,t,$d,n)}function J6(e,t){return mb(e,t)}function Q6(e,t,n){return iE(e,t,qr(n))}function eU(e,t){var n=e==null?0:e.length;if(n){var o=mb(e,t);if(o<n&&Xy(e[o],t))return o}return-1}function tU(e,t){return mb(e,t,!0)}function nU(e,t,n){return iE(e,t,qr(n),!0)}function rU(e,t){var n=e==null?0:e.length;if(n){var o=mb(e,t,!0)-1;if(Xy(e[o],t))return o}return-1}function i2(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],v=t?t(c):c;if(!n||!Xy(v,h)){var h=v;s[r++]=c===0?0:c}}return s}function oU(e){return e&&e.length?i2(e):[]}function iU(e,t){return e&&e.length?i2(e,qr(t)):[]}var aU=4294967295;function lU(e,t,n){return n&&typeof n!="number"&&pc(e,t,n)&&(t=n=void 0),n=n===void 0?aU:n>>>0,n?(e=Ro(e),e&&(typeof t=="string"||t!=null&&!Jw(t))&&(t=ys(t),!t&&Cv(e))?Ud(gs(e),0,n):e.split(t,n)):[]}var uU="Expected a function",sU=Math.max;function cU(e,t){if(typeof e!="function")throw new TypeError(uU);return t=t==null?0:sU(Ir(t),0),eo(function(n){var o=n[t],r=Ud(n,0,t);return o&&zy(r,o),Fu(e,this,r)})}var fU=jv(function(e,t,n){return e+(n?" ":"")+Ww(t)});const dU=fU;function pU(e,t,n){return e=Ro(e),n=n==null?0:Qp(Ir(n),0,e.length),t=ys(t),e.slice(n,n+t.length)==t}function hU(){return{}}function vU(){return""}function yU(){return!0}var mU=ub(function(e,t){return e-t},0);const gU=mU;function bU(e){return e&&e.length?Qw(e,$d):0}function _U(e,t){return e&&e.length?Qw(e,qr(t)):0}function wU(e){var t=e==null?0:e.length;return t?ms(e,1,t):[]}function EU(e,t,n){return e&&e.length?(t=n||t===void 0?1:Ir(t),ms(e,0,t<0?0:t)):[]}function OU(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,ms(e,t<0?0:t,o)):[]}function xU(e,t){return e&&e.length?db(e,qr(t),!1,!0):[]}function SU(e,t){return e&&e.length?db(e,qr(t)):[]}function AU(e,t){return t(e),e}var a2=Object.prototype,TU=a2.hasOwnProperty;function JS(e,t,n,o){return e===void 0||Xy(e,a2[n])&&!TU.call(o,n)?t:e}var MU={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function PU(e){return"\\"+MU[e]}var kU=/<%=([\s\S]+?)%>/g;const l2=kU;var NU=/<%-([\s\S]+?)%>/g;const RU=NU;var DU=/<%([\s\S]+?)%>/g;const CU=DU;var jU={escape:RU,evaluate:CU,interpolate:l2,variable:"",imports:{_:{escape:CP}}};const nw=jU;var IU="Invalid `variable` option passed into `_.template`",LU=/\b__p \+= '';/g,FU=/\b(__p \+=) '' \+/g,$U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,BU=/[()=,{}\[\]\/\s]/,UU=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,og=/($^)/,VU=/['\n\r\u2028\u2029\\]/g,GU=Object.prototype,QS=GU.hasOwnProperty;function WU(e,t,n){var o=nw.imports._.templateSettings||nw;n&&pc(e,t,n)&&(t=void 0),e=Ro(e),t=Pg({},t,o,JS);var r=Pg({},t.imports,o.imports,JS),s=Gu(r),c=GM(r,s),v,h,g=0,b=t.interpolate||og,w="__p += '",O=RegExp((t.escape||og).source+"|"+b.source+"|"+(b===l2?UU:og).source+"|"+(t.evaluate||og).source+"|$","g"),S=QS.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(k,j,R,B,G,H){return R||(R=B),w+=e.slice(g,H).replace(VU,PU),j&&(v=!0,w+=`' +
__e(`+j+`) +
'`),G&&(h=!0,w+=`';
`+G+`;
__p += '`),R&&(w+=`' +
((__t = (`+R+`)) == null ? '' : __t) +
'`),g=H+k.length,k}),w+=`';
`;var P=QS.call(t,"variable")&&t.variable;if(!P)w=`with (obj) {
`+w+`
}
`;else if(BU.test(P))throw new Error(IU);w=(h?w.replace(LU,""):w).replace(FU,"$1").replace($U,"$1;"),w="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var A=QM(function(){return Function(s,S+"return "+w).apply(void 0,c)});if(A.source=w,Uw(A))throw A;return A}function Qy(e,t){return t(e)}var zU=9007199254740991,w1=4294967295,HU=Math.min;function XU(e,t){if(e=Ir(e),e<1||e>zU)return[];var n=w1,o=HU(e,w1);t=Jp(t),e-=w1;for(var r=DM(o,t);++n<e;)t(n);return r}function YU(){return this}function u2(e,t){var n=e;return n instanceof Yr&&(n=n.value()),VM(t,function(o,r){return r.func.apply(r.thisArg,zy([o],r.args))},n)}function E1(){return u2(this.__wrapped__,this.__actions__)}function qU(e){return Ro(e).toLowerCase()}function KU(e){return fi(e)?Sa(e,ib):_v(e)?[e]:Lu(Zj(Ro(e)))}var eA=9007199254740991;function ZU(e){return e?Qp(Ir(e),-eA,eA):e===0?e:0}function JU(e){return Ro(e).toUpperCase()}function QU(e,t,n){var o=fi(e),r=o||CM(e)||jM(e);if(t=qr(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:Sf(e)?n=Nv(s)?Uy(Jj(e)):{}:n={}}return(r?dc:Zp)(e,function(c,v,h){return t(n,c,v,h)}),n}function s2(e,t){for(var n=e.length;n--&&Hy(t,e[n],0)>-1;);return n}function c2(e,t){for(var n=-1,o=e.length;++n<o&&Hy(t,e[n],0)>-1;);return n}function eV(e,t,n){if(e=Ro(e),e&&(n||t===void 0))return Qj(e);if(!e||!(t=ys(t)))return e;var o=gs(e),r=gs(t),s=c2(o,r),c=s2(o,r)+1;return Ud(o,s,c).join("")}function tV(e,t,n){if(e=Ro(e),e&&(n||t===void 0))return e.slice(0,eI(e)+1);if(!e||!(t=ys(t)))return e;var o=gs(e),r=s2(o,gs(t))+1;return Ud(o,0,r).join("")}var nV=/^\s+/;function rV(e,t,n){if(e=Ro(e),e&&(n||t===void 0))return e.replace(nV,"");if(!e||!(t=ys(t)))return e;var o=gs(e),r=c2(o,gs(t));return Ud(o,r).join("")}var oV=30,iV="...",aV=/\w*$/;function lV(e,t){var n=oV,o=iV;if(Sf(t)){var r="separator"in t?t.separator:r;n="length"in t?Ir(t.length):n,o="omission"in t?ys(t.omission):o}e=Ro(e);var s=e.length;if(Cv(e)){var c=gs(e);s=c.length}if(n>=s)return e;var v=n-Iv(o);if(v<1)return o;var h=c?Ud(c,0,v).join(""):e.slice(0,v);if(r===void 0)return h+o;if(c&&(v+=h.length-v),Jw(r)){if(e.slice(v).search(r)){var g,b=h;for(r.global||(r=RegExp(r.source,Ro(aV.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var w=g.index;h=h.slice(0,w===void 0?v:w)}}else if(e.indexOf(ys(r),v)!=v){var O=h.lastIndexOf(r);O>-1&&(h=h.slice(0,O))}return h+o}function uV(e){return JM(e,1)}var sV={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cV=zw(sV);const fV=cV;var f2=/&(?:amp|lt|gt|quot|#39);/g,dV=RegExp(f2.source);function pV(e){return e=Ro(e),e&&dV.test(e)?e.replace(f2,fV):e}var hV=eo(function(e){var t=$u(e);return ea(t)&&(t=void 0),Gp(_s(e,1,ea,!0),qr(t))});const vV=hV;var yV=eo(function(e){var t=$u(e);return t=typeof t=="function"?t:void 0,Gp(_s(e,1,ea,!0),void 0,t)});const mV=yV;function gV(e){return e&&e.length?Gp(e):[]}function bV(e,t){return e&&e.length?Gp(e,qr(t)):[]}function _V(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?Gp(e,void 0,t):[]}function wV(e,t){return e==null?!0:RM(e,t)}var EV=Math.max;function aE(e){if(!(e&&e.length))return[];var t=0;return e=kv(e,function(n){if(ea(n))return t=EV(n.length,t),!0}),DM(t,function(n){return Sa(e,kM(n))})}function d2(e,t){if(!(e&&e.length))return[];var n=aE(e);return t==null?n:Sa(n,function(o){return Fu(t,void 0,o)})}function p2(e,t,n,o){return Dw(e,t,n(NM(e,t)),o)}function OV(e,t,n){return e==null?e:p2(e,t,Jp(n))}function xV(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:p2(e,t,Jp(n),o)}var SV=jv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const AV=SV;function TV(e){return e==null?[]:GM(e,qp(e))}var MV=eo(function(e,t){return ea(e)?Ky(e,t):[]});const PV=MV;function kV(e,t){return t2(Jp(t),e)}var NV=Kp(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return Bw(s,e)};return t>1||this.__actions__.length||!(o instanceof Yr)||!Vy(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Qy,args:[r],thisArg:void 0}),new Bu(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const RV=NV;function DV(){return SP(this)}function CV(){var e=this.__wrapped__;if(e instanceof Yr){var t=e;return this.__actions__.length&&(t=new Yr(this)),t=t.reverse(),t.__actions__.push({func:Qy,args:[tw],thisArg:void 0}),new Bu(t,this.__chain__)}return this.thru(tw)}function lE(e,t,n){var o=e.length;if(o<2)return o?Gp(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],v=-1;++v<o;)v!=r&&(s[r]=Ky(s[r]||c,e[v],t,n));return Gp(_s(s,1),t,n)}var jV=eo(function(e){return lE(kv(e,ea))});const IV=jV;var LV=eo(function(e){var t=$u(e);return ea(t)&&(t=void 0),lE(kv(e,ea),qr(t))});const FV=LV;var $V=eo(function(e){var t=$u(e);return t=typeof t=="function"?t:void 0,lE(kv(e,ea),void 0,t)});const BV=$V;var UV=eo(aE);const VV=UV;function GV(e,t){return dL(e||[],t||[],Dw)}var WV=eo(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,d2(e,n)});const zV=WV,Ln={chunk:vF,compact:OF,concat:xF,difference:ZF,differenceBy:QF,differenceWith:t4,drop:o4,dropRight:i4,dropRightWhile:a4,dropWhile:l4,fill:M4,findIndex:pL,findLastIndex:OM,first:zS,flatten:tI,flattenDeep:nI,flattenDepth:I4,fromPairs:rI,head:zS,indexOf:y$,initial:m$,intersection:_$,intersectionBy:E$,intersectionWith:x$,join:g5,last:$u,lastIndexOf:A5,nth:tB,pull:JB,pullAll:n2,pullAllBy:QB,pullAllWith:e6,pullAt:o6,remove:b6,reverse:tw,slice:U6,sortedIndex:J6,sortedIndexBy:Q6,sortedIndexOf:eU,sortedLastIndex:tU,sortedLastIndexBy:nU,sortedLastIndexOf:rU,sortedUniq:oU,sortedUniqBy:iU,tail:wU,take:EU,takeRight:OU,takeRightWhile:xU,takeWhile:SU,union:oI,unionBy:vV,unionWith:mV,uniq:gV,uniqBy:bV,uniqWith:_V,unzip:aE,unzipWith:d2,without:PV,xor:IV,xorBy:FV,xorWith:BV,zip:VV,zipObject:hL,zipObjectDeep:GV,zipWith:zV},Do={countBy:IF,each:AS,eachRight:VS,every:S4,filter:rL,find:vL,findLast:N4,flatMap:iI,flatMapDeep:C4,flatMapDepth:j4,forEach:AS,forEachRight:VS,groupBy:r$,includes:h$,invokeMap:L$,keyBy:E5,map:Rw,orderBy:iB,partition:HB,reduce:oL,reduceRight:m6,reject:g6,sample:k6,sampleSize:D6,shuffle:L6,size:B6,some:z6,sortBy:yL},HV={now:aI},Pi={after:NL,ary:JM,before:eP,bind:tP,bindKey:J3,curry:Xw,curryRight:Yw,debounce:lI,defer:HF,delay:YF,flip:F4,memoize:uI,negate:Jy,once:oB,overArgs:dB,partial:t2,partialRight:WB,rearg:v6,rest:O6,spread:cU,throttle:sI,unary:uV,wrap:kV},lr={castArray:cI,clone:fI,cloneDeep:dI,cloneDeepWith:bF,cloneWith:wF,conformsTo:kF,eq:Xy,gt:i$,gte:l$,isArguments:pI,isArray:fi,isArrayBuffer:U$,isArrayLike:Mv,isArrayLikeObject:ea,isBoolean:G$,isBuffer:CM,isDate:X$,isElement:Y$,isEmpty:hI,isEqual:vI,isEqualWith:q$,isError:Uw,isFinite:Z$,isFunction:Nv,isInteger:VP,isLength:yI,isMap:mI,isMatch:J$,isMatchWith:Q$,isNaN:t5,isNative:i5,isNil:gI,isNull:bI,isNumber:GP,isObject:Sf,isObjectLike:Vu,isPlainObject:Nw,isRegExp:Jw,isSafeInteger:s5,isSet:_I,isString:vb,isSymbol:_v,isTypedArray:jM,isUndefined:wI,isWeakMap:f5,isWeakSet:p5,lt:R5,lte:C5,toArray:HP,toFinite:Ry,toInteger:Ir,toLength:LP,toNumber:Ef,toPlainObject:EI,toSafeInteger:ZU,toString:Ro},ul={add:PL,ceil:dF,divide:r4,floor:B4,max:mL,maxBy:B5,mean:V5,meanBy:G5,min:gL,minBy:bL,multiply:q5,round:M6,subtract:gU,sum:bU,sumBy:_U},uE={clamp:yF,inRange:f$,random:c6},wr={assign:C3,assignIn:LS,assignInWith:Pg,assignWith:F3,at:B3,create:LF,defaults:_L,defaultsDeep:GF,entries:GS,entriesIn:WS,extend:LS,extendWith:Pg,findKey:P4,findLastKey:R4,forIn:wL,forInRight:K4,forOwn:EL,forOwnRight:Z4,functions:J4,functionsIn:Q4,get:gM,has:iL,hasIn:OI,invert:P$,invertBy:D$,invoke:j$,keys:Gu,keysIn:qp,mapKeys:j5,mapValues:OL,merge:xI,mergeWith:MP,omit:SI,omitBy:rB,pick:AI,pickBy:YP,result:x6,set:TI,setWith:C6,toPairs:GS,toPairsIn:WS,transform:QU,unset:wV,update:OV,updateWith:xV,values:Rv,valuesIn:TV},vc={at:RV,chain:SP,commit:EF,lodash:ae,next:eB,plant:XB,reverse:CV,tap:AU,thru:Qy,toIterator:YU,toJSON:E1,value:E1,valueOf:E1,wrapperChain:DV},vo={camelCase:uF,capitalize:sP,deburr:cP,endsWith:f4,escape:CP,escapeRegExp:O4,kebabCase:_5,lowerCase:M5,lowerFirst:k5,pad:IB,padEnd:LB,padStart:FB,parseInt:UB,repeat:_6,replace:w6,snakeCase:G6,split:lU,startCase:dU,startsWith:pU,template:WU,templateSettings:nw,toLower:qU,toUpper:JU,trim:eV,trimEnd:tV,trimStart:rV,truncate:lV,unescape:pV,upperCase:AV,upperFirst:Ww,words:xP},_o={attempt:QM,bindAll:Y3,cond:AF,conforms:PF,constant:xM,defaultTo:BF,flow:X4,flowRight:q4,identity:$d,iteratee:v5,matches:L5,matchesProperty:$5,method:z5,methodOf:X5,mixin:zP,noop:mM,nthArg:nB,over:lB,overEvery:hB,overSome:yB,property:MI,propertyOf:YB,range:xL,rangeRight:d6,stubArray:PI,stubFalse:MM,stubObject:hU,stubString:vU,stubTrue:yU,times:XU,toPath:KU,uniqueId:SL};function XV(){var e=new Yr(this.__wrapped__);return e.__actions__=Lu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Lu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Lu(this.__views__),e}function YV(){if(this.__filtered__){var e=new Yr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var qV=Math.max,KV=Math.min;function ZV(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=KV(t,e+c);break;case"takeRight":e=qV(e,t-c);break}}return{start:e,end:t}}var JV=1,QV=2,eG=Math.min;function tG(){var e=this.__wrapped__.value(),t=this.__dir__,n=fi(e),o=t<0,r=n?e.length:0,s=ZV(0,r,this.__views__),c=s.start,v=s.end,h=v-c,g=o?v:c-1,b=this.__iteratees__,w=b.length,O=0,S=eG(h,this.__takeCount__);if(!n||!o&&r==h&&S==h)return u2(e,this.__actions__);var P=[];e:for(;h--&&O<S;){g+=t;for(var A=-1,k=e[g];++A<w;){var j=b[A],R=j.iteratee,B=j.type,G=R(k);if(B==QV)k=G;else if(!G){if(B==JV)continue e;break e}}P[O++]=k}return P}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var nG="4.17.21",rG=2,oG=1,iG=3,h2=4294967295,aG=Array.prototype,lG=Object.prototype,v2=lG.hasOwnProperty,tA=Tg?Tg.iterator:void 0,uG=Math.max,nA=Math.min,sE=function(e){return function(t,n,o){if(o==null){var r=Sf(n),s=r&&Gu(n),c=s&&s.length&&pb(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(zP);ae.after=Pi.after;ae.ary=Pi.ary;ae.assign=wr.assign;ae.assignIn=wr.assignIn;ae.assignInWith=wr.assignInWith;ae.assignWith=wr.assignWith;ae.at=wr.at;ae.before=Pi.before;ae.bind=Pi.bind;ae.bindAll=_o.bindAll;ae.bindKey=Pi.bindKey;ae.castArray=lr.castArray;ae.chain=vc.chain;ae.chunk=Ln.chunk;ae.compact=Ln.compact;ae.concat=Ln.concat;ae.cond=_o.cond;ae.conforms=_o.conforms;ae.constant=_o.constant;ae.countBy=Do.countBy;ae.create=wr.create;ae.curry=Pi.curry;ae.curryRight=Pi.curryRight;ae.debounce=Pi.debounce;ae.defaults=wr.defaults;ae.defaultsDeep=wr.defaultsDeep;ae.defer=Pi.defer;ae.delay=Pi.delay;ae.difference=Ln.difference;ae.differenceBy=Ln.differenceBy;ae.differenceWith=Ln.differenceWith;ae.drop=Ln.drop;ae.dropRight=Ln.dropRight;ae.dropRightWhile=Ln.dropRightWhile;ae.dropWhile=Ln.dropWhile;ae.fill=Ln.fill;ae.filter=Do.filter;ae.flatMap=Do.flatMap;ae.flatMapDeep=Do.flatMapDeep;ae.flatMapDepth=Do.flatMapDepth;ae.flatten=Ln.flatten;ae.flattenDeep=Ln.flattenDeep;ae.flattenDepth=Ln.flattenDepth;ae.flip=Pi.flip;ae.flow=_o.flow;ae.flowRight=_o.flowRight;ae.fromPairs=Ln.fromPairs;ae.functions=wr.functions;ae.functionsIn=wr.functionsIn;ae.groupBy=Do.groupBy;ae.initial=Ln.initial;ae.intersection=Ln.intersection;ae.intersectionBy=Ln.intersectionBy;ae.intersectionWith=Ln.intersectionWith;ae.invert=wr.invert;ae.invertBy=wr.invertBy;ae.invokeMap=Do.invokeMap;ae.iteratee=_o.iteratee;ae.keyBy=Do.keyBy;ae.keys=Gu;ae.keysIn=wr.keysIn;ae.map=Do.map;ae.mapKeys=wr.mapKeys;ae.mapValues=wr.mapValues;ae.matches=_o.matches;ae.matchesProperty=_o.matchesProperty;ae.memoize=Pi.memoize;ae.merge=wr.merge;ae.mergeWith=wr.mergeWith;ae.method=_o.method;ae.methodOf=_o.methodOf;ae.mixin=sE;ae.negate=Jy;ae.nthArg=_o.nthArg;ae.omit=wr.omit;ae.omitBy=wr.omitBy;ae.once=Pi.once;ae.orderBy=Do.orderBy;ae.over=_o.over;ae.overArgs=Pi.overArgs;ae.overEvery=_o.overEvery;ae.overSome=_o.overSome;ae.partial=Pi.partial;ae.partialRight=Pi.partialRight;ae.partition=Do.partition;ae.pick=wr.pick;ae.pickBy=wr.pickBy;ae.property=_o.property;ae.propertyOf=_o.propertyOf;ae.pull=Ln.pull;ae.pullAll=Ln.pullAll;ae.pullAllBy=Ln.pullAllBy;ae.pullAllWith=Ln.pullAllWith;ae.pullAt=Ln.pullAt;ae.range=_o.range;ae.rangeRight=_o.rangeRight;ae.rearg=Pi.rearg;ae.reject=Do.reject;ae.remove=Ln.remove;ae.rest=Pi.rest;ae.reverse=Ln.reverse;ae.sampleSize=Do.sampleSize;ae.set=wr.set;ae.setWith=wr.setWith;ae.shuffle=Do.shuffle;ae.slice=Ln.slice;ae.sortBy=Do.sortBy;ae.sortedUniq=Ln.sortedUniq;ae.sortedUniqBy=Ln.sortedUniqBy;ae.split=vo.split;ae.spread=Pi.spread;ae.tail=Ln.tail;ae.take=Ln.take;ae.takeRight=Ln.takeRight;ae.takeRightWhile=Ln.takeRightWhile;ae.takeWhile=Ln.takeWhile;ae.tap=vc.tap;ae.throttle=Pi.throttle;ae.thru=Qy;ae.toArray=lr.toArray;ae.toPairs=wr.toPairs;ae.toPairsIn=wr.toPairsIn;ae.toPath=_o.toPath;ae.toPlainObject=lr.toPlainObject;ae.transform=wr.transform;ae.unary=Pi.unary;ae.union=Ln.union;ae.unionBy=Ln.unionBy;ae.unionWith=Ln.unionWith;ae.uniq=Ln.uniq;ae.uniqBy=Ln.uniqBy;ae.uniqWith=Ln.uniqWith;ae.unset=wr.unset;ae.unzip=Ln.unzip;ae.unzipWith=Ln.unzipWith;ae.update=wr.update;ae.updateWith=wr.updateWith;ae.values=wr.values;ae.valuesIn=wr.valuesIn;ae.without=Ln.without;ae.words=vo.words;ae.wrap=Pi.wrap;ae.xor=Ln.xor;ae.xorBy=Ln.xorBy;ae.xorWith=Ln.xorWith;ae.zip=Ln.zip;ae.zipObject=Ln.zipObject;ae.zipObjectDeep=Ln.zipObjectDeep;ae.zipWith=Ln.zipWith;ae.entries=wr.toPairs;ae.entriesIn=wr.toPairsIn;ae.extend=wr.assignIn;ae.extendWith=wr.assignInWith;sE(ae,ae);ae.add=ul.add;ae.attempt=_o.attempt;ae.camelCase=vo.camelCase;ae.capitalize=vo.capitalize;ae.ceil=ul.ceil;ae.clamp=uE.clamp;ae.clone=lr.clone;ae.cloneDeep=lr.cloneDeep;ae.cloneDeepWith=lr.cloneDeepWith;ae.cloneWith=lr.cloneWith;ae.conformsTo=lr.conformsTo;ae.deburr=vo.deburr;ae.defaultTo=_o.defaultTo;ae.divide=ul.divide;ae.endsWith=vo.endsWith;ae.eq=lr.eq;ae.escape=vo.escape;ae.escapeRegExp=vo.escapeRegExp;ae.every=Do.every;ae.find=Do.find;ae.findIndex=Ln.findIndex;ae.findKey=wr.findKey;ae.findLast=Do.findLast;ae.findLastIndex=Ln.findLastIndex;ae.findLastKey=wr.findLastKey;ae.floor=ul.floor;ae.forEach=Do.forEach;ae.forEachRight=Do.forEachRight;ae.forIn=wr.forIn;ae.forInRight=wr.forInRight;ae.forOwn=wr.forOwn;ae.forOwnRight=wr.forOwnRight;ae.get=wr.get;ae.gt=lr.gt;ae.gte=lr.gte;ae.has=wr.has;ae.hasIn=wr.hasIn;ae.head=Ln.head;ae.identity=$d;ae.includes=Do.includes;ae.indexOf=Ln.indexOf;ae.inRange=uE.inRange;ae.invoke=wr.invoke;ae.isArguments=lr.isArguments;ae.isArray=fi;ae.isArrayBuffer=lr.isArrayBuffer;ae.isArrayLike=lr.isArrayLike;ae.isArrayLikeObject=lr.isArrayLikeObject;ae.isBoolean=lr.isBoolean;ae.isBuffer=lr.isBuffer;ae.isDate=lr.isDate;ae.isElement=lr.isElement;ae.isEmpty=lr.isEmpty;ae.isEqual=lr.isEqual;ae.isEqualWith=lr.isEqualWith;ae.isError=lr.isError;ae.isFinite=lr.isFinite;ae.isFunction=lr.isFunction;ae.isInteger=lr.isInteger;ae.isLength=lr.isLength;ae.isMap=lr.isMap;ae.isMatch=lr.isMatch;ae.isMatchWith=lr.isMatchWith;ae.isNaN=lr.isNaN;ae.isNative=lr.isNative;ae.isNil=lr.isNil;ae.isNull=lr.isNull;ae.isNumber=lr.isNumber;ae.isObject=Sf;ae.isObjectLike=lr.isObjectLike;ae.isPlainObject=lr.isPlainObject;ae.isRegExp=lr.isRegExp;ae.isSafeInteger=lr.isSafeInteger;ae.isSet=lr.isSet;ae.isString=lr.isString;ae.isSymbol=lr.isSymbol;ae.isTypedArray=lr.isTypedArray;ae.isUndefined=lr.isUndefined;ae.isWeakMap=lr.isWeakMap;ae.isWeakSet=lr.isWeakSet;ae.join=Ln.join;ae.kebabCase=vo.kebabCase;ae.last=$u;ae.lastIndexOf=Ln.lastIndexOf;ae.lowerCase=vo.lowerCase;ae.lowerFirst=vo.lowerFirst;ae.lt=lr.lt;ae.lte=lr.lte;ae.max=ul.max;ae.maxBy=ul.maxBy;ae.mean=ul.mean;ae.meanBy=ul.meanBy;ae.min=ul.min;ae.minBy=ul.minBy;ae.stubArray=_o.stubArray;ae.stubFalse=_o.stubFalse;ae.stubObject=_o.stubObject;ae.stubString=_o.stubString;ae.stubTrue=_o.stubTrue;ae.multiply=ul.multiply;ae.nth=Ln.nth;ae.noop=_o.noop;ae.now=HV.now;ae.pad=vo.pad;ae.padEnd=vo.padEnd;ae.padStart=vo.padStart;ae.parseInt=vo.parseInt;ae.random=uE.random;ae.reduce=Do.reduce;ae.reduceRight=Do.reduceRight;ae.repeat=vo.repeat;ae.replace=vo.replace;ae.result=wr.result;ae.round=ul.round;ae.sample=Do.sample;ae.size=Do.size;ae.snakeCase=vo.snakeCase;ae.some=Do.some;ae.sortedIndex=Ln.sortedIndex;ae.sortedIndexBy=Ln.sortedIndexBy;ae.sortedIndexOf=Ln.sortedIndexOf;ae.sortedLastIndex=Ln.sortedLastIndex;ae.sortedLastIndexBy=Ln.sortedLastIndexBy;ae.sortedLastIndexOf=Ln.sortedLastIndexOf;ae.startCase=vo.startCase;ae.startsWith=vo.startsWith;ae.subtract=ul.subtract;ae.sum=ul.sum;ae.sumBy=ul.sumBy;ae.template=vo.template;ae.times=_o.times;ae.toFinite=lr.toFinite;ae.toInteger=Ir;ae.toLength=lr.toLength;ae.toLower=vo.toLower;ae.toNumber=lr.toNumber;ae.toSafeInteger=lr.toSafeInteger;ae.toString=lr.toString;ae.toUpper=vo.toUpper;ae.trim=vo.trim;ae.trimEnd=vo.trimEnd;ae.trimStart=vo.trimStart;ae.truncate=vo.truncate;ae.unescape=vo.unescape;ae.uniqueId=_o.uniqueId;ae.upperCase=vo.upperCase;ae.upperFirst=vo.upperFirst;ae.each=Do.forEach;ae.eachRight=Do.forEachRight;ae.first=Ln.head;sE(ae,function(){var e={};return Zp(ae,function(t,n){v2.call(ae.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ae.VERSION=nG;(ae.templateSettings=vo.templateSettings).imports._=ae;dc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ae[e].placeholder=ae});dc(["drop","take"],function(e,t){Yr.prototype[e]=function(n){n=n===void 0?1:uG(Ir(n),0);var o=this.__filtered__&&!t?new Yr(this):this.clone();return o.__filtered__?o.__takeCount__=nA(n,o.__takeCount__):o.__views__.push({size:nA(n,h2),type:e+(o.__dir__<0?"Right":"")}),o},Yr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});dc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==oG||n==iG;Yr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:qr(r),type:n}),s.__filtered__=s.__filtered__||o,s}});dc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Yr.prototype[e]=function(){return this[n](1).value()[0]}});dc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Yr.prototype[e]=function(){return this.__filtered__?new Yr(this):this[n](1)}});Yr.prototype.compact=function(){return this.filter($d)};Yr.prototype.find=function(e){return this.filter(e).head()};Yr.prototype.findLast=function(e){return this.reverse().find(e)};Yr.prototype.invokeMap=eo(function(e,t){return typeof e=="function"?new Yr(this):this.map(function(n){return Zy(n,e,t)})});Yr.prototype.reject=function(e){return this.filter(Jy(qr(e)))};Yr.prototype.slice=function(e,t){e=Ir(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Yr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Ir(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Yr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Yr.prototype.toArray=function(){return this.take(h2)};Zp(Yr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=ae[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(ae.prototype[t]=function(){var c=this.__wrapped__,v=o?[1]:arguments,h=c instanceof Yr,g=v[0],b=h||fi(c),w=function(j){var R=r.apply(ae,zy([j],v));return o&&O?R[0]:R};b&&n&&typeof g=="function"&&g.length!=1&&(h=b=!1);var O=this.__chain__,S=!!this.__actions__.length,P=s&&!O,A=h&&!S;if(!s&&b){c=A?c:new Yr(this);var k=e.apply(c,v);return k.__actions__.push({func:Qy,args:[w],thisArg:void 0}),new Bu(k,O)}return P&&A?e.apply(this,v):(k=this.thru(w),P?o?k.value()[0]:k.value():k)})});dc(["pop","push","shift","sort","splice","unshift"],function(e){var t=aG[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);ae.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(fi(s)?s:[],r)}return this[n](function(c){return t.apply(fi(c)?c:[],r)})}});Zp(Yr.prototype,function(e,t){var n=ae[t];if(n){var o=n.name+"";v2.call(dv,o)||(dv[o]=[]),dv[o].push({name:t,func:n})}});dv[cb(void 0,rG).name]=[{name:"wrapper",func:void 0}];Yr.prototype.clone=XV;Yr.prototype.reverse=YV;Yr.prototype.value=tG;ae.prototype.at=vc.at;ae.prototype.chain=vc.wrapperChain;ae.prototype.commit=vc.commit;ae.prototype.next=vc.next;ae.prototype.plant=vc.plant;ae.prototype.reverse=vc.reverse;ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=vc.value;ae.prototype.first=ae.prototype.head;tA&&(ae.prototype[tA]=vc.toIterator);const sG="/ui/assets/icon_or-f402edf4.svg",cG="/ui/assets/icon_and-2df352e1.svg",fG={class:"workflow-dropdown-menu border border-r-4"},dG={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},pG={key:0},hG=["onClick","onMousedown"],vG={class:"pre-wrap"},yG={class:"lighter"},mG={key:1,class:"ml-16 mt-8"},gG={class:"pre-wrap"},bG={class:"lighter"},_G=["onClick","onMousedown"],wG={class:"pre-wrap"},EG=["title"],OG={key:0},xG=["onClick","onMousedown"],SG={class:"pre-wrap",style:{width:"60%"}},AG=["title"],TG={class:"status-tag",style:{"margin-left":"auto"}},MG={key:1,class:"ml-16 mt-8"},PG=kr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=mt(""),o=e,r=t,s=mt(!1),c=mt("base"),v=mt([]),h=lo(()=>v.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=mt([]),b=lo(()=>g.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),w=lo(()=>kI.filter(A=>A.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function O(A,k,j){var R;if(k&&(A.properties.stepName=k.name,j=="function"&&(A.properties.nodeData={...k,function_lib_id:k.id,inputFieldList:k.inputFieldList.map(B=>({...B,value:B.source=="reference"?[]:""}))}),j=="application"))if(hg(k.type)){const G=k.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id,api_input_field_list:k.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:k.workFlow.nodes[0].properties.user_input_field_list,...G?{...G.document?{documentList:[]}:{},...G.image?{imageList:[]}:{},...G.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id};(R=o.workflowRef)==null||R.addNode(A),r("clickNodes",A)}function S(A,k,j){var R;if(k&&(A.properties.stepName=k.name,j=="function"&&(A.properties.nodeData={...k,function_lib_id:k.id,inputFieldList:k.inputFieldList.map(B=>({...B,value:B.source=="reference"?[]:""}))}),j=="application"))if(hg(k.type)){const G=k.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id,api_input_field_list:k.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:k.workFlow.nodes[0].properties.user_input_field_list,...G?{...G.document?{documentList:[]}:{},...G.image?{imageList:[]}:{},...G.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:k.name,icon:k.icon,application_id:k.id};(R=o.workflowRef)==null||R.onmousedown(A),r("onmousedown",A)}function P(){fa.listFunctionLib(o.id,s).then(A=>{v.value=A.data}),fa.getApplicationList(o.id,s).then(A=>{g.value=A.data})}return bo(()=>{P()}),(A,k)=>{const j=te("search"),R=te("el-icon"),B=te("el-input"),G=te("el-text"),H=te("el-scrollbar"),Y=te("el-tab-pane"),Q=te("el-tag"),W=te("el-tabs");return Ua((Ve(),Dn("div",fG,[C(W,{modelValue:c.value,"onUpdate:modelValue":k[3]||(k[3]=I=>c.value=I),class:"workflow-dropdown-tabs"},{default:F(()=>[fe("div",dG,[C(B,{modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=I=>n.value=I),style:{width:"240px"},placeholder:A.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:F(()=>[C(R,{class:"el-input__icon"},{default:F(()=>[C(j)]),_:1})]),_:1},8,["modelValue","placeholder"])]),C(Y,{label:A.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:F(()=>[C(H,{height:"400"},{default:F(()=>[w.value.length>0?(Ve(),Dn("div",pG,[(Ve(!0),Dn(Yo,null,Ci(w.value,(I,z)=>(Ve(),Dn("div",{key:z,class:"workflow-dropdown-item cursor flex p-8-12",onClick:bn(K=>O(I),["stop"]),onMousedown:bn(K=>S(I),["stop"])},[(Ve(),_t(lv(Jr(uv)(`${I.type}-icon`)),{class:"mr-8 mt-4",size:32})),fe("div",vG,[fe("div",yG,$e(I.label),1),C(G,{type:"info",size:"small"},{default:F(()=>[At($e(I.text),1)]),_:2},1024)])],40,hG))),128))])):(Ve(),Dn("div",mG,[C(G,{type:"info"},{default:F(()=>[At($e(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),C(Y,{label:A.$t("views.functionLib.title"),name:"function"},{default:F(()=>[C(H,{height:"400"},{default:F(()=>[fe("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:k[1]||(k[1]=bn(I=>O(Jr(rg)),["stop"])),onMousedown:k[2]||(k[2]=bn(I=>S(Jr(rg)),["stop"]))},[(Ve(),_t(lv(Jr(uv)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),fe("div",gG,[fe("div",bG,$e(Jr(rg).label),1),C(G,{type:"info",size:"small"},{default:F(()=>[At($e(Jr(rg).text),1)]),_:1})])],32),(Ve(!0),Dn(Yo,null,Ci(h.value,(I,z)=>(Ve(),Dn("div",{key:z,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:bn(K=>O(Jr(ES),I,"function"),["stop"]),onMousedown:bn(K=>S(Jr(ES),I,"function"),["stop"])},[(Ve(),_t(lv(Jr(uv)("function-lib-node-icon")),{class:"mr-8",size:32})),fe("div",wG,[fe("div",{class:"lighter ellipsis-1",title:I.name},$e(I.name),9,EG),fe("p",null,[I.desc?(Ve(),_t(G,{key:0,class:"ellipsis-1",type:"info",size:"small",title:I.desc},{default:F(()=>[At($e(I.desc),1)]),_:2},1032,["title"])):tr("",!0)])])],40,_G))),128))]),_:1})]),_:1},8,["label"]),C(Y,{label:A.$t("views.application.title"),name:"application"},{default:F(()=>[C(H,{height:"400"},{default:F(()=>[b.value.length>0?(Ve(),Dn("div",OG,[(Ve(!0),Dn(Yo,null,Ci(b.value,(I,z)=>(Ve(),Dn("div",{key:z,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:bn(K=>O(Jr(OS),I,"application"),["stop"]),onMousedown:bn(K=>S(Jr(OS),I,"application"),["stop"])},[(Ve(),_t(lv(Jr(uv)("application-node-icon")),{class:"mr-8",size:32,item:I},null,8,["item"])),fe("div",SG,[fe("div",{class:"lighter ellipsis",title:I.name},$e(I.name),9,AG),fe("p",null,[I.desc?(Ve(),_t(G,{key:0,class:"ellipsis",type:"info",size:"small",title:I.desc},{default:F(()=>[At($e(I.desc),1)]),_:2},1032,["title"])):tr("",!0)])]),fe("div",TG,[Jr(hg)(I.type)?(Ve(),_t(Q,{key:0,type:"warning",style:{height:"22px"}},{default:F(()=>[At($e(A.$t("views.application.workflow")),1)]),_:1})):(Ve(),_t(Q,{key:1,class:"blue-tag",style:{height:"22px"}},{default:F(()=>[At($e(A.$t("views.application.simple")),1)]),_:1}))])],40,xG))),128))])):(Ve(),Dn("div",MG,[C(G,{type:"info"},{default:F(()=>[At($e(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[Ev,e.show]])}}});const y2=Yy(PG,[["__scopeId","data-v-2717b3b8"]]),kG={class:"flex-between"},NG={class:"flex align-center",style:{width:"70%"}},RG={class:"ellipsis-1 break-all"},DG={key:0,src:sG,alt:""},CG={key:1,src:cG,alt:""},jG={style:{width:"280px"},class:"p-12-16"},IG={class:"mt-8 lighter"},LG={class:"title-decoration-1 mb-8 mt-8"},FG=["onMouseenter"],$G={style:{"max-width":"92%"}},BG={class:"dialog-footer"},UG=kr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Rl.config.globalProperties.$route,n=mt({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),o=mt(!1),r=mt(),s=mt(),c=mt(!1),v=mt({title:""}),h=lo({set:I=>{He.set(G.nodeModel.properties,"condition",I)},get:()=>G.nodeModel.properties.condition?G.nodeModel.properties.condition:(He.set(G.nodeModel.properties,"condition","AND"),!0)}),g=lo({set:I=>{He.set(G.nodeModel.properties,"showNode",I)},get:()=>G.nodeModel.properties.showNode!==void 0?G.nodeModel.properties.showNode:(He.set(G.nodeModel.properties,"showNode",!0),!0)}),b=I=>{I.ctrlKey||I.metaKey||I.stopPropagation()},w=lo(()=>G.nodeModel.properties.status?G.nodeModel.properties.status:200);function O(){v.value.title=G.nodeModel.properties.stepName,c.value=!0}const S=async I=>{I&&await I.validate(z=>{var K;z&&((K=G.nodeModel.graphModel.nodes)!=null&&K.some(q=>q.properties.stepName===v.value.title)?Ba(Zt("views.applicationWorkflow.tip.repeatedNodeError")):(He.set(G.nodeModel.properties,"stepName",v.value.title),c.value=!1,I.resetFields()))})},P=()=>{G.nodeModel.graphModel.clearSelectElements(),He.set(G.nodeModel,"isSelected",!0),He.set(G.nodeModel,"isHovered",!0),G.nodeModel.graphModel.toFront(G.nodeModel.id)},A=mt(null),k=()=>{G.nodeModel.graphModel.clearSelectElements();const I=G.nodeModel.graphModel.cloneNode(G.nodeModel.id);He.set(I,"isSelected",!0),He.set(I,"isHovered",!0),G.nodeModel.graphModel.toFront(I.id)},j=()=>{Cw(Zt("common.tip"),Zt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Zt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{G.nodeModel.graphModel.deleteNode(G.nodeModel.id)}),G.nodeModel.graphModel.eventCenter.emit("delete_node")},R=I=>{I.height&&(G.nodeModel.virtual||(n.value.stepContainerHeight=I.height,G.nodeModel.setHeight(n.value.stepContainerHeight)))};function B(I){var q,ce,Ne;const z=I.properties.width?I.properties.width:214,K=G.nodeModel.graphModel.addNode({type:I.type,properties:I.properties,x:((q=r.value)==null?void 0:q.x)+z/2+200,y:((ce=r.value)==null?void 0:ce.y)-I.height});G.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:G.nodeModel.id,sourceAnchorId:(Ne=r.value)==null?void 0:Ne.id,targetNodeId:K.id}),W()}const G=e,H=lo(()=>{var I;return G.nodeModel.properties.config.fields?(I=G.nodeModel.properties.config.fields)==null?void 0:I.map(K=>({label:K.label,value:K.value,globeLabel:`{{${G.nodeModel.properties.stepName}.${K.value}}}`,globeValue:`{{context['${G.nodeModel.id}'].${K.value}}}`})):[]});function Y(I){return I!==Xo.Base&&I!==Xo.Start}const Q=I=>{o.value=!0,r.value=I},W=()=>{o.value=!1,r.value=void 0};return bo(()=>{He.set(G.nodeModel,"openNodeMenu",I=>{o.value?W():Q(I)})}),(I,z)=>{var ge;const K=te("ArrowDownBold"),q=te("el-icon"),ce=te("el-button"),Ne=te("el-option"),Oe=te("el-select"),Xe=te("el-dropdown"),Ie=te("MoreFilled"),Pe=te("el-dropdown-item"),le=te("el-dropdown-menu"),ye=te("el-alert"),Me=te("AppIcon"),ze=te("el-tooltip"),je=te("el-collapse-transition"),it=te("el-input"),bt=te("el-form-item"),Pt=te("el-form"),Yt=te("el-dialog"),Ce=Id("resize");return Ve(),Dn("div",{onMousedown:P,class:"workflow-node-container p-16",style:{overflow:"visible"}},[fe("div",{class:Cd(["step-container app-card p-16",{isSelected:G.nodeModel.isSelected,error:w.value!==200}]),style:{overflow:"visible"}},[Ua((Ve(),Dn("div",null,[fe("div",kG,[fe("div",NG,[(Ve(),_t(lv(Jr(uv)(`${I.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(ge=I.nodeModel)==null?void 0:ge.properties.nodeData},null,8,["item"])),fe("h4",RG,$e(I.nodeModel.properties.stepName),1)]),fe("div",{onMousemove:z[2]||(z[2]=bn(()=>{},["stop"])),onMousedown:z[3]||(z[3]=bn(()=>{},["stop"])),onKeydown:z[4]||(z[4]=bn(()=>{},["stop"])),onClick:z[5]||(z[5]=bn(()=>{},["stop"]))},[C(ce,{text:"",onClick:z[0]||(z[0]=Se=>g.value=!g.value)},{default:F(()=>[C(q,{class:Cd(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:F(()=>[C(K)]),_:1},8,["class"])]),_:1}),Y(I.nodeModel.type)?(Ve(),_t(Xe,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:F(()=>[fe("div",jG,[fe("h5",null,$e(I.$t("views.applicationWorkflow.condition.title")),1),fe("p",IG,[fe("span",null,$e(I.$t("views.applicationWorkflow.condition.front")),1),C(Oe,{modelValue:h.value,"onUpdate:modelValue":z[1]||(z[1]=Se=>h.value=Se),size:"small",style:{width:"60px",margin:"0 8px"}},{default:F(()=>[C(Ne,{label:I.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),C(Ne,{label:I.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),fe("span",null,$e(I.$t("views.applicationWorkflow.condition.text")),1)])])]),default:F(()=>[C(ce,{text:""},{default:F(()=>[h.value==="OR"?(Ve(),Dn("img",DG)):tr("",!0),h.value==="AND"?(Ve(),Dn("img",CG)):tr("",!0)]),_:1})]),_:1})):tr("",!0),Y(I.nodeModel.type)?(Ve(),_t(Xe,{key:1,teleported:!1,trigger:"click"},{dropdown:F(()=>[C(le,{style:{"min-width":"80px"}},{default:F(()=>[C(Pe,{onClick:O,class:"p-8"},{default:F(()=>[At($e(I.$t("common.rename")),1)]),_:1}),C(Pe,{onClick:k,class:"p-8"},{default:F(()=>[At($e(I.$t("common.copy")),1)]),_:1}),C(Pe,{onClick:j,class:"border-t p-8"},{default:F(()=>[At($e(I.$t("common.delete")),1)]),_:1})]),_:1})]),default:F(()=>[C(ce,{text:""},{default:F(()=>[C(q,{class:"color-secondary"},{default:F(()=>[C(Ie)]),_:1})]),_:1})]),_:1})):tr("",!0)],32)]),C(je,null,{default:F(()=>[Ua(fe("div",{onMousedown:z[7]||(z[7]=bn(()=>{},["stop"])),onKeydown:z[8]||(z[8]=bn(()=>{},["stop"])),onClick:z[9]||(z[9]=bn(()=>{},["stop"])),class:"mt-16"},[w.value!=200?(Ve(),_t(ye,{key:0,class:"mb-16",title:G.nodeModel.type==="application-node"?I.$t("views.applicationWorkflow.tip.applicationNodeError"):I.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):tr("",!0),NI(I.$slots,"default",{},void 0,!0),H.value.length>0?(Ve(),Dn(Yo,{key:1},[fe("h5",LG,$e(I.$t("common.param.outputParam")),1),(Ve(!0),Dn(Yo,null,Ci(H.value,(Se,ht)=>(Ve(),Dn("div",{key:ht,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:zt=>A.value=ht,onMouseleave:z[6]||(z[6]=zt=>A.value=null)},[fe("span",$G,$e(Se.label)+" "+$e("{"+Se.value+"}"),1),A.value===ht?(Ve(),_t(ze,{key:0,effect:"dark",content:I.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:F(()=>[C(ce,{link:"",onClick:zt=>Jr(IM)(Se.globeLabel),style:{padding:"0"}},{default:F(()=>[C(Me,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):tr("",!0)],40,FG))),128))],64)):tr("",!0)],544),[[Ev,g.value]])]),_:3})])),[[Ce,R]])],2),C(je,null,{default:F(()=>[o.value?(Ve(),_t(y2,{key:0,onMousemove:z[10]||(z[10]=bn(()=>{},["stop"])),onMousedown:z[11]||(z[11]=bn(()=>{},["stop"])),onClick:z[12]||(z[12]=bn(()=>{},["stop"])),onWheel:b,show:o.value,id:Jr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:B},null,8,["show","id"])):tr("",!0)]),_:1}),C(Yt,{title:I.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":z[17]||(z[17]=Se=>c.value=Se),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:z[18]||(z[18]=bn(()=>{},["prevent"]))},{footer:F(()=>[fe("span",BG,[C(ce,{onClick:z[15]||(z[15]=bn(Se=>c.value=!1,["prevent"]))},{default:F(()=>[At($e(I.$t("common.cancel")),1)]),_:1}),C(ce,{type:"primary",onClick:z[16]||(z[16]=Se=>S(s.value))},{default:F(()=>[At($e(I.$t("common.save")),1)]),_:1})])]),default:F(()=>[C(Pt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:v.value},{default:F(()=>[C(bt,{prop:"title",rules:[{required:!0,message:I.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:F(()=>[C(it,{modelValue:v.value.title,"onUpdate:modelValue":z[13]||(z[13]=Se=>v.value.title=Se),onBlur:z[14]||(z[14]=Se=>v.value.title=v.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const mi=Yy(UG,[["__scopeId","data-v-8b52f518"]]),Qr=kr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{},filterNodeKey:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=lo({set:b=>{r("update:modelValue",b)},get:()=>o.modelValue}),c=mt([]),v=b=>(console.log("ctrlKey",b.ctrlKey),b.ctrlKey===!0?(b.preventDefault(),!0):(b.stopPropagation(),!0));function h(b){b&&(c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(w=>w.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0),c.value=c.value.filter(w=>o.filterNodeKey?w.type===o.filterNodeKey:!0))}return t({validate:()=>{const b=o.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(Zt("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(Zt("views.applicationWorkflow.variable.ReferencingError"));const w=s.value[0],O=s.value[1],S=b.find(P=>P.value===w);return S?S.children.some(P=>P.value===O)?Promise.resolve(""):(s.value=[],Promise.reject(Zt("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(Zt("views.applicationWorkflow.variable.NoReferencing")))}}),bo(()=>{c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(b=>b.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0),c.value=c.value.filter(b=>o.filterNodeKey?b.type===o.filterNodeKey:!0)}),(b,w)=>{const O=te("el-cascader");return Ve(),_t(O,RI({onWheel:v,teleported:!1,options:c.value,onVisibleChange:h},b.$attrs,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=S=>s.value=S),separator:" > ",clearable:!0}),{default:F(({node:S,data:P})=>[fe("span",{class:"flex align-center",onWheel:v},[(Ve(),_t(lv(Jr(uv)(`${P.type}-icon`)),{class:"mr-8",size:18})),At($e(P.label),1)],32)]),_:1},16,["options","modelValue"])}}}),VG={class:"title-decoration-1 mb-8"},GG={class:"flex-between w-full"},WG={class:"flex-between"},zG={class:"flex align-center"},HG={class:"mr-4"},XG=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=G=>G.ctrlKey===!0?(G.preventDefault(),!0):(G.stopPropagation(),!0);function o(G){He.set(g.nodeModel.properties.nodeData,"system",G)}const r=G=>{var H;G?(H=S.value)==null||H.reset_default(G,s):R({})},{params:{id:s}}=Rl.config.globalProperties.$route,v={modelId:"",system:"",prompt:`${Zt("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Zt("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${Zt("views.problem.title")}：
{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,questionReferenceAddress:["start-node","question"],datasetReferenceAddress:[],dialogueNumber:1,isResult:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",modelSetting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},h=lo({get:()=>g.nodeModel.properties.nodeData?(g.nodeModel.properties.nodeData.modelSetting||He.set(g.nodeModel.properties.nodeData,"modelSetting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),g.nodeModel.properties.nodeData):(He.set(g.nodeModel.properties,"nodeData",v),g.nodeModel.properties.nodeData),set:G=>{He.set(g.nodeModel.properties,"nodeData",G)}}),g=e,b=mt(),w=mt(),O=mt(null),S=mt(),P=mt(),A=()=>{var G;return Promise.all([w.value?w.value.validate():Promise.resolve(""),(G=b.value)==null?void 0:G.validate()]).catch(H=>Promise.reject({node:g.nodeModel,errMessage:H}))};function k(){s?fa.getApplicationModel(s).then(G=>{O.value=He.groupBy(G==null?void 0:G.data,"provider")}):t.asyncGetModel().then(G=>{O.value=He.groupBy(G==null?void 0:G.data,"provider")})}const j=G=>{var H;G&&((H=S.value)==null||H.open(G,s,h.value.modelParamsSetting))};function R(G){He.set(g.nodeModel.properties.nodeData,"modelParamsSetting",G)}function B(G){let H=He.cloneDeep(g.nodeModel.properties.nodeData.modelSetting);H={...H,...G},He.set(g.nodeModel.properties.nodeData,"modelSetting",H)}return bo(()=>{var G;k(),typeof((G=g.nodeModel.properties.nodeData)==null?void 0:G.isResult)>"u"&&Pf(g.nodeModel)&&He.set(g.nodeModel.properties.nodeData,"isResult",!0),He.set(g.nodeModel,"validate",A),h.value.dialogue_type||(h.value.dialogue_type="WORKFLOW")}),(G,H)=>{const Y=te("Setting"),Q=te("el-icon"),W=te("el-button"),I=te("el-form-item"),z=te("el-option"),K=te("el-select"),q=te("el-input-number"),ce=te("el-tooltip"),Ne=te("el-switch"),Oe=te("el-form"),Xe=te("el-card");return Ve(),_t(mi,{nodeModel:G.nodeModel},{default:F(()=>[fe("h5",VG,$e(G.$t("views.applicationWorkflow.nodeSetting")),1),C(Xe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(Oe,{onSubmit:H[9]||(H[9]=bn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:b,"hide-required-asterisk":""},{default:F(()=>[C(I,{label:G.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:G.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:F(()=>[fe("div",GG,[fe("div",null,[fe("span",null,[At($e(G.$t("views.application.applicationForm.form.aiModel.label")),1),H[10]||(H[10]=fe("span",{class:"danger"},"*",-1))])]),C(W,{disabled:!h.value.modelId,type:"primary",link:"",onClick:H[0]||(H[0]=Ie=>j(h.value.modelId)),onRefreshForm:R},{default:F(()=>[C(Q,null,{default:F(()=>[C(Y)]),_:1})]),_:1},8,["disabled"])])]),default:F(()=>[C(jw,{onChange:r,onWheel:n,teleported:!1,modelValue:h.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=Ie=>h.value.modelId=Ie),placeholder:G.$t("views.application.applicationForm.form.aiModel.placeholder"),options:O.value,onSubmitModel:k,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(I,{label:G.$t("views.application.applicationForm.form.roleSettings.label")},{default:F(()=>[C(jd,{title:G.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:h.value.system,"onUpdate:modelValue":H[2]||(H[2]=Ie=>h.value.system=Ie),style:{height:"100px"},onSubmitDialog:o,placeholder:G.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(I,{label:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.label"),prop:"datasetReferenceAddress",rules:{message:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.placeholder"),trigger:"blur",required:!1}},{default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:w,nodeModel:G.nodeModel,"filter-node-key":"search-dataset-node",class:"w-full",placeholder:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.placeholder"),modelValue:h.value.datasetReferenceAddress,"onUpdate:modelValue":H[3]||(H[3]=Ie=>h.value.datasetReferenceAddress=Ie)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(I,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:"用户问题",trigger:"blur",required:!0}},{default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:w,nodeModel:G.nodeModel,class:"w-full",placeholder:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.questionReferenceAddress,"onUpdate:modelValue":H[4]||(H[4]=Ie=>h.value.questionReferenceAddress=Ie)},null,8,["nodeModel","placeholder","modelValue"])]),_:1}),C(I,{label:G.$t("views.application.applicationForm.form.historyRecord.label")},{label:F(()=>[fe("div",WG,[fe("div",null,$e(G.$t("views.application.applicationForm.form.historyRecord.label")),1),C(K,{modelValue:h.value.dialogue_type,"onUpdate:modelValue":H[5]||(H[5]=Ie=>h.value.dialogue_type=Ie),type:"small",style:{width:"100px"}},{default:F(()=>[C(z,{label:G.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),C(z,{label:G.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[C(q,{modelValue:h.value.dialogueNumber,"onUpdate:modelValue":H[6]||(H[6]=Ie=>h.value.dialogueNumber=Ie),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),C(I,{onClick:H[8]||(H[8]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",zG,[fe("div",HG,[fe("span",null,[At($e(G.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),H[11]||(H[11]=fe("span",{class:"danger"},"*",-1))])]),C(ce,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(G.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(Ne,{size:"small",modelValue:h.value.isResult,"onUpdate:modelValue":H[7]||(H[7]=Ie=>h.value.isResult=Ie)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:R},null,512),C(JI,{ref_key:"ReasoningParamSettingDialogRef",ref:P,onRefresh:B},null,512)]),_:1},8,["nodeModel"])}}});var rw={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var h in s)r.d(v,h,(function(g){return s[g]}).bind(null,h));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return H}),r.d(o,"b",function(){return G}),r.d(o,"c",function(){return Pt}),r.d(o,"d",function(){return Yt}),r.d(o,"e",function(){return j}),r.d(o,"f",function(){return B}),r.d(o,"g",function(){return j}),r.d(o,"h",function(){return bt}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return it}),r.d(o,"k",function(){return q});var s,c,v,h,g,b,w,O={},S=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(Ce,ge){for(var Se in ge)Ce[Se]=ge[Se];return Ce}function k(Ce){var ge=Ce.parentNode;ge&&ge.removeChild(Ce)}function j(Ce,ge,Se){var ht,zt,xt,rn={};for(xt in ge)xt=="key"?ht=ge[xt]:xt=="ref"?zt=ge[xt]:rn[xt]=ge[xt];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Se),typeof Ce=="function"&&Ce.defaultProps!=null)for(xt in Ce.defaultProps)rn[xt]===void 0&&(rn[xt]=Ce.defaultProps[xt]);return R(Ce,rn,ht,zt,null)}function R(Ce,ge,Se,ht,zt){var xt={type:Ce,props:ge,key:Se,ref:ht,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:zt??++v};return zt==null&&c.vnode!=null&&c.vnode(xt),xt}function B(){return{current:null}}function G(Ce){return Ce.children}function H(Ce,ge){this.props=Ce,this.context=ge}function Y(Ce,ge){if(ge==null)return Ce.__?Y(Ce.__,Ce.__.__k.indexOf(Ce)+1):null;for(var Se;ge<Ce.__k.length;ge++)if((Se=Ce.__k[ge])!=null&&Se.__e!=null)return Se.__e;return typeof Ce.type=="function"?Y(Ce):null}function Q(Ce){var ge,Se;if((Ce=Ce.__)!=null&&Ce.__c!=null){for(Ce.__e=Ce.__c.base=null,ge=0;ge<Ce.__k.length;ge++)if((Se=Ce.__k[ge])!=null&&Se.__e!=null){Ce.__e=Ce.__c.base=Se.__e;break}return Q(Ce)}}function W(Ce){(!Ce.__d&&(Ce.__d=!0)&&h.push(Ce)&&!I.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(I)}function I(){for(var Ce;I.__r=h.length;)Ce=h.sort(function(ge,Se){return ge.__v.__b-Se.__v.__b}),h=[],Ce.some(function(ge){var Se,ht,zt,xt,rn,yn;ge.__d&&(rn=(xt=(Se=ge).__v).__e,(yn=Se.__P)&&(ht=[],(zt=A({},xt)).__v=xt.__v+1,Pe(yn,xt,zt,Se.__n,yn.ownerSVGElement!==void 0,xt.__h!=null?[rn]:null,ht,rn??Y(xt),xt.__h),le(ht,xt),xt.__e!=rn&&Q(xt)))})}function z(Ce,ge,Se,ht,zt,xt,rn,yn,Tn,pn){var ft,xn,Be,mn,Kn,re,$n,xr=ht&&ht.__k||S,Ur=xr.length;for(Se.__k=[],ft=0;ft<ge.length;ft++)if((mn=Se.__k[ft]=(mn=ge[ft])==null||typeof mn=="boolean"?null:typeof mn=="string"||typeof mn=="number"||typeof mn=="bigint"?R(null,mn,null,null,mn):Array.isArray(mn)?R(G,{children:mn},null,null,null):mn.__b>0?R(mn.type,mn.props,mn.key,null,mn.__v):mn)!=null){if(mn.__=Se,mn.__b=Se.__b+1,(Be=xr[ft])===null||Be&&mn.key==Be.key&&mn.type===Be.type)xr[ft]=void 0;else for(xn=0;xn<Ur;xn++){if((Be=xr[xn])&&mn.key==Be.key&&mn.type===Be.type){xr[xn]=void 0;break}Be=null}Pe(Ce,mn,Be=Be||O,zt,xt,rn,yn,Tn,pn),Kn=mn.__e,(xn=mn.ref)&&Be.ref!=xn&&($n||($n=[]),Be.ref&&$n.push(Be.ref,null,mn),$n.push(xn,mn.__c||Kn,mn)),Kn!=null?(re==null&&(re=Kn),typeof mn.type=="function"&&mn.__k===Be.__k?mn.__d=Tn=K(mn,Tn,Ce):Tn=ce(Ce,mn,Be,xr,Kn,Tn),typeof Se.type=="function"&&(Se.__d=Tn)):Tn&&Be.__e==Tn&&Tn.parentNode!=Ce&&(Tn=Y(Be))}for(Se.__e=re,ft=Ur;ft--;)xr[ft]!=null&&(typeof Se.type=="function"&&xr[ft].__e!=null&&xr[ft].__e==Se.__d&&(Se.__d=Y(ht,ft+1)),ze(xr[ft],xr[ft]));if($n)for(ft=0;ft<$n.length;ft++)Me($n[ft],$n[++ft],$n[++ft])}function K(Ce,ge,Se){for(var ht,zt=Ce.__k,xt=0;zt&&xt<zt.length;xt++)(ht=zt[xt])&&(ht.__=Ce,ge=typeof ht.type=="function"?K(ht,ge,Se):ce(Se,ht,ht,zt,ht.__e,ge));return ge}function q(Ce,ge){return ge=ge||[],Ce==null||typeof Ce=="boolean"||(Array.isArray(Ce)?Ce.some(function(Se){q(Se,ge)}):ge.push(Ce)),ge}function ce(Ce,ge,Se,ht,zt,xt){var rn,yn,Tn;if(ge.__d!==void 0)rn=ge.__d,ge.__d=void 0;else if(Se==null||zt!=xt||zt.parentNode==null)e:if(xt==null||xt.parentNode!==Ce)Ce.appendChild(zt),rn=null;else{for(yn=xt,Tn=0;(yn=yn.nextSibling)&&Tn<ht.length;Tn+=2)if(yn==zt)break e;Ce.insertBefore(zt,xt),rn=xt}return rn!==void 0?rn:zt.nextSibling}function Ne(Ce,ge,Se){ge[0]==="-"?Ce.setProperty(ge,Se):Ce[ge]=Se==null?"":typeof Se!="number"||P.test(ge)?Se:Se+"px"}function Oe(Ce,ge,Se,ht,zt){var xt;e:if(ge==="style")if(typeof Se=="string")Ce.style.cssText=Se;else{if(typeof ht=="string"&&(Ce.style.cssText=ht=""),ht)for(ge in ht)Se&&ge in Se||Ne(Ce.style,ge,"");if(Se)for(ge in Se)ht&&Se[ge]===ht[ge]||Ne(Ce.style,ge,Se[ge])}else if(ge[0]==="o"&&ge[1]==="n")xt=ge!==(ge=ge.replace(/Capture$/,"")),ge=ge.toLowerCase()in Ce?ge.toLowerCase().slice(2):ge.slice(2),Ce.l||(Ce.l={}),Ce.l[ge+xt]=Se,Se?ht||Ce.addEventListener(ge,xt?Ie:Xe,xt):Ce.removeEventListener(ge,xt?Ie:Xe,xt);else if(ge!=="dangerouslySetInnerHTML"){if(zt)ge=ge.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(ge!=="href"&&ge!=="list"&&ge!=="form"&&ge!=="tabIndex"&&ge!=="download"&&ge in Ce)try{Ce[ge]=Se??"";break e}catch{}typeof Se=="function"||(Se!=null&&(Se!==!1||ge[0]==="a"&&ge[1]==="r")?Ce.setAttribute(ge,Se):Ce.removeAttribute(ge))}}function Xe(Ce){this.l[Ce.type+!1](c.event?c.event(Ce):Ce)}function Ie(Ce){this.l[Ce.type+!0](c.event?c.event(Ce):Ce)}function Pe(Ce,ge,Se,ht,zt,xt,rn,yn,Tn){var pn,ft,xn,Be,mn,Kn,re,$n,xr,Ur,ro,jn=ge.type;if(ge.constructor!==void 0)return null;Se.__h!=null&&(Tn=Se.__h,yn=ge.__e=Se.__e,ge.__h=null,xt=[yn]),(pn=c.__b)&&pn(ge);try{e:if(typeof jn=="function"){if($n=ge.props,xr=(pn=jn.contextType)&&ht[pn.__c],Ur=pn?xr?xr.props.value:pn.__:ht,Se.__c?re=(ft=ge.__c=Se.__c).__=ft.__E:("prototype"in jn&&jn.prototype.render?ge.__c=ft=new jn($n,Ur):(ge.__c=ft=new H($n,Ur),ft.constructor=jn,ft.render=je),xr&&xr.sub(ft),ft.props=$n,ft.state||(ft.state={}),ft.context=Ur,ft.__n=ht,xn=ft.__d=!0,ft.__h=[]),ft.__s==null&&(ft.__s=ft.state),jn.getDerivedStateFromProps!=null&&(ft.__s==ft.state&&(ft.__s=A({},ft.__s)),A(ft.__s,jn.getDerivedStateFromProps($n,ft.__s))),Be=ft.props,mn=ft.state,xn)jn.getDerivedStateFromProps==null&&ft.componentWillMount!=null&&ft.componentWillMount(),ft.componentDidMount!=null&&ft.__h.push(ft.componentDidMount);else{if(jn.getDerivedStateFromProps==null&&$n!==Be&&ft.componentWillReceiveProps!=null&&ft.componentWillReceiveProps($n,Ur),!ft.__e&&ft.shouldComponentUpdate!=null&&ft.shouldComponentUpdate($n,ft.__s,Ur)===!1||ge.__v===Se.__v){ft.props=$n,ft.state=ft.__s,ge.__v!==Se.__v&&(ft.__d=!1),ft.__v=ge,ge.__e=Se.__e,ge.__k=Se.__k,ge.__k.forEach(function(Co){Co&&(Co.__=ge)}),ft.__h.length&&rn.push(ft);break e}ft.componentWillUpdate!=null&&ft.componentWillUpdate($n,ft.__s,Ur),ft.componentDidUpdate!=null&&ft.__h.push(function(){ft.componentDidUpdate(Be,mn,Kn)})}ft.context=Ur,ft.props=$n,ft.state=ft.__s,(pn=c.__r)&&pn(ge),ft.__d=!1,ft.__v=ge,ft.__P=Ce,pn=ft.render(ft.props,ft.state,ft.context),ft.state=ft.__s,ft.getChildContext!=null&&(ht=A(A({},ht),ft.getChildContext())),xn||ft.getSnapshotBeforeUpdate==null||(Kn=ft.getSnapshotBeforeUpdate(Be,mn)),ro=pn!=null&&pn.type===G&&pn.key==null?pn.props.children:pn,z(Ce,Array.isArray(ro)?ro:[ro],ge,Se,ht,zt,xt,rn,yn,Tn),ft.base=ge.__e,ge.__h=null,ft.__h.length&&rn.push(ft),re&&(ft.__E=ft.__=null),ft.__e=!1}else xt==null&&ge.__v===Se.__v?(ge.__k=Se.__k,ge.__e=Se.__e):ge.__e=ye(Se.__e,ge,Se,ht,zt,xt,rn,Tn);(pn=c.diffed)&&pn(ge)}catch(Co){ge.__v=null,(Tn||xt!=null)&&(ge.__e=yn,ge.__h=!!Tn,xt[xt.indexOf(yn)]=null),c.__e(Co,ge,Se)}}function le(Ce,ge){c.__c&&c.__c(ge,Ce),Ce.some(function(Se){try{Ce=Se.__h,Se.__h=[],Ce.some(function(ht){ht.call(Se)})}catch(ht){c.__e(ht,Se.__v)}})}function ye(Ce,ge,Se,ht,zt,xt,rn,yn){var Tn,pn,ft,xn=Se.props,Be=ge.props,mn=ge.type,Kn=0;if(mn==="svg"&&(zt=!0),xt!=null){for(;Kn<xt.length;Kn++)if((Tn=xt[Kn])&&"setAttribute"in Tn==!!mn&&(mn?Tn.localName===mn:Tn.nodeType===3)){Ce=Tn,xt[Kn]=null;break}}if(Ce==null){if(mn===null)return document.createTextNode(Be);Ce=zt?document.createElementNS("http://www.w3.org/2000/svg",mn):document.createElement(mn,Be.is&&Be),xt=null,yn=!1}if(mn===null)xn===Be||yn&&Ce.data===Be||(Ce.data=Be);else{if(xt=xt&&s.call(Ce.childNodes),pn=(xn=Se.props||O).dangerouslySetInnerHTML,ft=Be.dangerouslySetInnerHTML,!yn){if(xt!=null)for(xn={},Kn=0;Kn<Ce.attributes.length;Kn++)xn[Ce.attributes[Kn].name]=Ce.attributes[Kn].value;(ft||pn)&&(ft&&(pn&&ft.__html==pn.__html||ft.__html===Ce.innerHTML)||(Ce.innerHTML=ft&&ft.__html||""))}if(function(re,$n,xr,Ur,ro){var jn;for(jn in xr)jn==="children"||jn==="key"||jn in $n||Oe(re,jn,null,xr[jn],Ur);for(jn in $n)ro&&typeof $n[jn]!="function"||jn==="children"||jn==="key"||jn==="value"||jn==="checked"||xr[jn]===$n[jn]||Oe(re,jn,$n[jn],xr[jn],Ur)}(Ce,Be,xn,zt,yn),ft)ge.__k=[];else if(Kn=ge.props.children,z(Ce,Array.isArray(Kn)?Kn:[Kn],ge,Se,ht,zt&&mn!=="foreignObject",xt,rn,xt?xt[0]:Se.__k&&Y(Se,0),yn),xt!=null)for(Kn=xt.length;Kn--;)xt[Kn]!=null&&k(xt[Kn]);yn||("value"in Be&&(Kn=Be.value)!==void 0&&(Kn!==xn.value||Kn!==Ce.value||mn==="progress"&&!Kn)&&Oe(Ce,"value",Kn,xn.value,!1),"checked"in Be&&(Kn=Be.checked)!==void 0&&Kn!==Ce.checked&&Oe(Ce,"checked",Kn,xn.checked,!1))}return Ce}function Me(Ce,ge,Se){try{typeof Ce=="function"?Ce(ge):Ce.current=ge}catch(ht){c.__e(ht,Se)}}function ze(Ce,ge,Se){var ht,zt;if(c.unmount&&c.unmount(Ce),(ht=Ce.ref)&&(ht.current&&ht.current!==Ce.__e||Me(ht,null,ge)),(ht=Ce.__c)!=null){if(ht.componentWillUnmount)try{ht.componentWillUnmount()}catch(xt){c.__e(xt,ge)}ht.base=ht.__P=null}if(ht=Ce.__k)for(zt=0;zt<ht.length;zt++)ht[zt]&&ze(ht[zt],ge,typeof Ce.type!="function");Se||Ce.__e==null||k(Ce.__e),Ce.__e=Ce.__d=void 0}function je(Ce,ge,Se){return this.constructor(Ce,Se)}function it(Ce,ge,Se){var ht,zt,xt;c.__&&c.__(Ce,ge),zt=(ht=typeof Se=="function")?null:Se&&Se.__k||ge.__k,xt=[],Pe(ge,Ce=(!ht&&Se||ge).__k=j(G,null,[Ce]),zt||O,O,ge.ownerSVGElement!==void 0,!ht&&Se?[Se]:zt?null:ge.firstChild?s.call(ge.childNodes):null,xt,!ht&&Se?Se:zt?zt.__e:ge.firstChild,ht),le(xt,Ce)}function bt(Ce,ge){it(Ce,ge,bt)}function Pt(Ce,ge,Se){var ht,zt,xt,rn=A({},Ce.props);for(xt in ge)xt=="key"?ht=ge[xt]:xt=="ref"?zt=ge[xt]:rn[xt]=ge[xt];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Se),R(Ce.type,rn,ht||Ce.key,zt||Ce.ref,null)}function Yt(Ce,ge){var Se={__c:ge="__cC"+w++,__:Ce,Consumer:function(ht,zt){return ht.children(zt)},Provider:function(ht){var zt,xt;return this.getChildContext||(zt=[],(xt={})[ge]=this,this.getChildContext=function(){return xt},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&zt.some(W)},this.sub=function(rn){zt.push(rn);var yn=rn.componentWillUnmount;rn.componentWillUnmount=function(){zt.splice(zt.indexOf(rn),1),yn&&yn.call(rn)}}),ht.children}};return Se.Provider.__=Se.Consumer.contextType=Se}s=S.slice,c={__e:function(Ce,ge){for(var Se,ht,zt;ge=ge.__;)if((Se=ge.__c)&&!Se.__)try{if((ht=Se.constructor)&&ht.getDerivedStateFromError!=null&&(Se.setState(ht.getDerivedStateFromError(Ce)),zt=Se.__d),Se.componentDidCatch!=null&&(Se.componentDidCatch(Ce),zt=Se.__d),zt)return Se.__E=Se}catch(xt){Ce=xt}throw Ce}},v=0,H.prototype.setState=function(Ce,ge){var Se;Se=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof Ce=="function"&&(Ce=Ce(A({},Se),this.props)),Ce&&A(Se,Ce),Ce!=null&&this.__v&&(ge&&this.__h.push(ge),W(this))},H.prototype.forceUpdate=function(Ce){this.__v&&(this.__e=!0,Ce&&this.__h.push(Ce),W(this))},H.prototype.render=G,h=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,I.__r=0,w=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return W}),r.d(o,"b",function(){return Nc}),r.d(o,"c",function(){return Ta}),r.d(o,"d",function(){return Xn}),r.d(o,"e",function(){return qt}),r.d(o,"f",function(){return en}),r.d(o,"g",function(){return Bn}),r.d(o,"h",function(){return Ni}),r.d(o,"i",function(){return ro}),r.d(o,"j",function(){return Sn}),r.d(o,"k",function(){return pl}),r.d(o,"l",function(){return xc}),r.d(o,"m",function(){return re}),r.d(o,"n",function(){return uu}),r.d(o,"o",function(){return K}),r.d(o,"p",function(){return Vf}),r.d(o,"q",function(){return ha}),r.d(o,"r",function(){return su}),r.d(o,"s",function(){return oa}),r.d(o,"t",function(){return jo}),r.d(o,"u",function(){return Os}),r.d(o,"v",function(){return Uf}),r.d(o,"w",function(){return Ac}),r.d(o,"x",function(){return ii}),r.d(o,"y",function(){return ya}),r.d(o,"z",function(){return Go}),r.d(o,"A",function(){return li}),r.d(o,"B",function(){return na}),r.d(o,"C",function(){return pn}),r.d(o,"D",function(){return Tc}),r.d(o,"E",function(){return Vr}),r.d(o,"F",function(){return Wr}),r.d(o,"G",function(){return Ec}),r.d(o,"H",function(){return wc}),r.d(o,"I",function(){return Mc}),r.d(o,"J",function(){return ai}),r.d(o,"K",function(){return Ke}),r.d(o,"L",function(){return oo}),r.d(o,"M",function(){return As});var v=[];Object.freeze(v);var h={};function g(){return++Pn.mobxGuid}function b(T){throw w(!1,T),"X"}function w(T,M){if(!T)throw new Error("[mobx] "+(M||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(h);function O(T){var M=!1;return function(){if(!M)return M=!0,T.apply(this,arguments)}}var S=function(){};function P(T){return T!==null&&typeof T=="object"}function A(T){if(T===null||typeof T!="object")return!1;var M=Object.getPrototypeOf(T);return M===Object.prototype||M===null}function k(T,M,U){Object.defineProperty(T,M,{enumerable:!1,writable:!0,configurable:!0,value:U})}function j(T,M){var U="isMobX"+T;return M.prototype[U]=!0,function(ne){return P(ne)&&ne[U]===!0}}function R(T){return T instanceof Map}function B(T){return T instanceof Set}function G(T){var M=new Set;for(var U in T)M.add(U);return Object.getOwnPropertySymbols(T).forEach(function(ne){Object.getOwnPropertyDescriptor(T,ne).enumerable&&M.add(ne)}),Array.from(M)}function H(T){return T&&T.toString?T.toString():new String(T).toString()}function Y(T){return T===null?null:typeof T=="object"?""+T:T}var Q=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:Object.getOwnPropertyNames,W=Symbol("mobx administration"),I=function(){function T(M){M===void 0&&(M="Atom@"+g()),this.name=M,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=xn.NOT_TRACKING}return T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.reportObserved=function(){return Es(this)},T.prototype.reportChanged=function(){qi(),function(M){M.lowestObserverState!==xn.STALE&&(M.lowestObserverState=xn.STALE,M.observers.forEach(function(U){U.dependenciesState===xn.UP_TO_DATE&&(U.isTracing!==Be.NONE&&Aa(U,M),U.onBecomeStale()),U.dependenciesState=xn.STALE}))}(this),ta()},T.prototype.toString=function(){return this.name},T}(),z=j("Atom",I);function K(T,M,U){M===void 0&&(M=S),U===void 0&&(U=S);var ne,me=new I(T);return M!==S&&$f("onBecomeObserved",me,M,ne),U!==S&&Vr(me,U),me}var q={identity:function(T,M){return T===M},structural:function(T,M){return jt(T,M)},default:function(T,M){return Object.is(T,M)},shallow:function(T,M){return jt(T,M,1)}},ce=function(T,M){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ne){U.__proto__=ne}||function(U,ne){for(var me in ne)ne.hasOwnProperty(me)&&(U[me]=ne[me])},ce(T,M)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Ne=function(){return Ne=Object.assign||function(T){for(var M,U=1,ne=arguments.length;U<ne;U++)for(var me in M=arguments[U])Object.prototype.hasOwnProperty.call(M,me)&&(T[me]=M[me]);return T},Ne.apply(this,arguments)};function Oe(T){var M=typeof Symbol=="function"&&T[Symbol.iterator],U=0;return M?M.call(T):{next:function(){return T&&U>=T.length&&(T=void 0),{value:T&&T[U++],done:!T}}}}function Xe(T,M){var U=typeof Symbol=="function"&&T[Symbol.iterator];if(!U)return T;var ne,me,We=U.call(T),vt=[];try{for(;(M===void 0||M-- >0)&&!(ne=We.next()).done;)vt.push(ne.value)}catch(Ht){me={error:Ht}}finally{try{ne&&!ne.done&&(U=We.return)&&U.call(We)}finally{if(me)throw me.error}}return vt}function Ie(){for(var T=[],M=0;M<arguments.length;M++)T=T.concat(Xe(arguments[M]));return T}var Pe=Symbol("mobx did run lazy initializers"),le=Symbol("mobx pending decorators"),ye={},Me={};function ze(T,M){var U=M?ye:Me;return U[T]||(U[T]={configurable:!0,enumerable:M,get:function(){return je(this),this[T]},set:function(ne){je(this),this[T]=ne}})}function je(T){var M,U;if(T[Pe]!==!0){var ne=T[le];if(ne){k(T,Pe,!0);var me=Ie(Object.getOwnPropertySymbols(ne),Object.keys(ne));try{for(var We=Oe(me),vt=We.next();!vt.done;vt=We.next()){var Ht=ne[vt.value];Ht.propertyCreator(T,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(_n){M={error:_n}}finally{try{vt&&!vt.done&&(U=We.return)&&U.call(We)}finally{if(M)throw M.error}}}}}function it(T,M){return function(){var U,ne=function(me,We,vt,Ht){if(Ht===!0)return M(me,We,vt,me,U),null;if(!Object.prototype.hasOwnProperty.call(me,le)){var _n=me[le];k(me,le,Ne({},_n))}return me[le][We]={prop:We,propertyCreator:M,descriptor:vt,decoratorTarget:me,decoratorArguments:U},ze(We,T)};return bt(arguments)?(U=v,ne.apply(null,arguments)):(U=Array.prototype.slice.call(arguments),ne)}}function bt(T){return(T.length===2||T.length===3)&&(typeof T[1]=="string"||typeof T[1]=="symbol")||T.length===4&&T[3]===!0}function Pt(T,M,U){return ii(T)?T:Array.isArray(T)?pn.array(T,{name:U}):A(T)?pn.object(T,void 0,{name:U}):R(T)?pn.map(T,{name:U}):B(T)?pn.set(T,{name:U}):T}function Yt(T){return T}function Ce(T){w(T);var M=it(!0,function(ne,me,We,vt,Ht){var _n=We?We.initializer?We.initializer.call(ne):We.value:void 0;ra(ne).addObservableProp(me,_n,T)}),U=(s!==void 0&&s.env,M);return U.enhancer=T,U}var ge={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Se(T){return T==null?ge:typeof T=="string"?{name:T,deep:!0,proxy:!0}:T}Object.freeze(ge);var ht=Ce(Pt),zt=Ce(function(T,M,U){return T==null||li(T)||ya(T)||Go(T)||Ko(T)?T:Array.isArray(T)?pn.array(T,{name:U,deep:!1}):A(T)?pn.object(T,void 0,{name:U,deep:!1}):R(T)?pn.map(T,{name:U,deep:!1}):B(T)?pn.set(T,{name:U,deep:!1}):b(!1)}),xt=Ce(Yt),rn=Ce(function(T,M,U){return jt(T,M)?M:T});function yn(T){return T.defaultDecorator?T.defaultDecorator.enhancer:T.deep===!1?Yt:Pt}var Tn={box:function(T,M){arguments.length>2&&ft("box");var U=Se(M);return new Rr(T,yn(U),U.name,!0,U.equals)},array:function(T,M){arguments.length>2&&ft("array");var U=Se(M);return Ll(T,yn(U),U.name)},map:function(T,M){arguments.length>2&&ft("map");var U=Se(M);return new Nc(T,yn(U),U.name)},set:function(T,M){arguments.length>2&&ft("set");var U=Se(M);return new za(T,yn(U),U.name)},object:function(T,M,U){typeof arguments[1]=="string"&&ft("object");var ne=Se(U);if(ne.proxy===!1)return ha({},T,M,ne);var me=xs(ne),We=ha({},void 0,void 0,ne),vt=cu(We);return Bf(vt,T,M,me),vt},ref:xt,shallow:zt,deep:ht,struct:rn},pn=function(T,M,U){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ht.apply(null,arguments);if(ii(T))return T;var ne=A(T)?pn.object(T,M,U):Array.isArray(T)?pn.array(T,M):R(T)?pn.map(T,M):B(T)?pn.set(T,M):T;if(ne!==T)return ne;b(!1)};function ft(T){b("Expected one or two arguments to observable."+T+". Did you accidentally try to use observable."+T+" as decorator?")}Object.keys(Tn).forEach(function(T){return pn[T]=Tn[T]});var xn,Be,mn=it(!1,function(T,M,U,ne,me){var We=U.get,vt=U.set,Ht=me[0]||{};ra(T).addComputedProp(T,M,Ne({get:We,set:vt,context:T},Ht))}),Kn=mn({equals:q.structural}),re=function(T,M,U){if(typeof M=="string"||T!==null&&typeof T=="object"&&arguments.length===1)return mn.apply(null,arguments);var ne=typeof M=="object"?M:{};return ne.get=T,ne.set=typeof M=="function"?M:ne.set,ne.name=ne.name||T.name||"",new Va(ne)};re.struct=Kn,function(T){T[T.NOT_TRACKING=-1]="NOT_TRACKING",T[T.UP_TO_DATE=0]="UP_TO_DATE",T[T.POSSIBLY_STALE=1]="POSSIBLY_STALE",T[T.STALE=2]="STALE"}(xn||(xn={})),function(T){T[T.NONE=0]="NONE",T[T.LOG=1]="LOG",T[T.BREAK=2]="BREAK"}(Be||(Be={}));var $n=function(T){this.cause=T};function xr(T){return T instanceof $n}function Ur(T){switch(T.dependenciesState){case xn.UP_TO_DATE:return!1;case xn.NOT_TRACKING:case xn.STALE:return!0;case xn.POSSIBLY_STALE:for(var M=en(!0),U=De(),ne=T.observing,me=ne.length,We=0;We<me;We++){var vt=ne[We];if(dl(vt)){if(Pn.disableErrorBoundaries)vt.get();else try{vt.get()}catch{return at(U),qt(M),!0}if(T.dependenciesState===xn.STALE)return at(U),qt(M),!0}}return kn(T),at(U),qt(M),!1}}function ro(){return Pn.trackingDerivation!==null}function jn(T){var M=T.observers.size>0;Pn.computationDepth>0&&M&&b(!1),Pn.allowStateChanges||!M&&Pn.enforceActions!=="strict"||b(!1)}function Co(T,M,U){var ne=en(!0);kn(T),T.newObserving=new Array(T.observing.length+100),T.unboundDepsCount=0,T.runId=++Pn.runId;var me,We=Pn.trackingDerivation;if(Pn.trackingDerivation=T,Pn.disableErrorBoundaries===!0)me=M.call(U);else try{me=M.call(U)}catch(vt){me=new $n(vt)}return Pn.trackingDerivation=We,function(vt){for(var Ht=vt.observing,_n=vt.observing=vt.newObserving,yr=xn.UP_TO_DATE,ln=0,Gr=vt.unboundDepsCount,pr=0;pr<Gr;pr++)(Cr=_n[pr]).diffValue===0&&(Cr.diffValue=1,ln!==pr&&(_n[ln]=Cr),ln++),Cr.dependenciesState>yr&&(yr=Cr.dependenciesState);for(_n.length=ln,vt.newObserving=null,Gr=Ht.length;Gr--;)(Cr=Ht[Gr]).diffValue===0&&yo(Cr,vt),Cr.diffValue=0;for(;ln--;){var Cr;(Cr=_n[ln]).diffValue===1&&(Cr.diffValue=0,Cf(Cr,vt))}yr!==xn.UP_TO_DATE&&(vt.dependenciesState=yr,vt.onBecomeStale())}(T),qt(ne),me}function Ee(T){var M=T.observing;T.observing=[];for(var U=M.length;U--;)yo(M[U],T);T.dependenciesState=xn.NOT_TRACKING}function Ke(T){var M=De();try{return T()}finally{at(M)}}function De(){var T=Pn.trackingDerivation;return Pn.trackingDerivation=null,T}function at(T){Pn.trackingDerivation=T}function en(T){var M=Pn.allowStateReads;return Pn.allowStateReads=T,M}function qt(T){Pn.allowStateReads=T}function kn(T){if(T.dependenciesState!==xn.UP_TO_DATE){T.dependenciesState=xn.UP_TO_DATE;for(var M=T.observing,U=M.length;U--;)M[U].lowestObserverState=xn.UP_TO_DATE}}var _r=0,oi=1,_i=Object.getOwnPropertyDescriptor(function(){},"name");_i&&_i.configurable;function Vo(T,M,U){var ne=function(){return qo(T,M,U||this,arguments)};return ne.isMobxAction=!0,ne}function qo(T,M,U,ne){var me=Sn();try{return M.apply(U,ne)}catch(We){throw me.error=We,We}finally{Bn(me)}}function Sn(T,M,U){var ne=0,me=De();qi();var We={prevDerivation:me,prevAllowStateChanges:ir(!0),prevAllowStateReads:en(!0),notifySpy:!1,startTime:ne,actionId:oi++,parentActionId:_r};return _r=We.actionId,We}function Bn(T){_r!==T.actionId&&b("invalid action stack. did you forget to finish an action?"),_r=T.parentActionId,T.error!==void 0&&(Pn.suppressReactionErrors=!0),Kr(T.prevAllowStateChanges),qt(T.prevAllowStateReads),ta(),at(T.prevDerivation),T.notifySpy,Pn.suppressReactionErrors=!1}function Xn(T,M){var U,ne=ir(T);try{U=M()}finally{Kr(ne)}return U}function ir(T){var M=Pn.allowStateChanges;return Pn.allowStateChanges=T,M}function Kr(T){Pn.allowStateChanges=T}var Rr=function(T){function M(U,ne,me,We,vt){me===void 0&&(me="ObservableValue@"+g()),vt===void 0&&(vt=q.default);var Ht=T.call(this,me)||this;return Ht.enhancer=ne,Ht.name=me,Ht.equals=vt,Ht.hasUnreportedChange=!1,Ht.value=ne(U,void 0,me),Ht}return function(U,ne){function me(){this.constructor=U}ce(U,ne),U.prototype=ne===null?Object.create(ne):(me.prototype=ne.prototype,new me)}(M,T),M.prototype.dehanceValue=function(U){return this.dehancer!==void 0?this.dehancer(U):U},M.prototype.set=function(U){this.value,(U=this.prepareNewValue(U))!==Pn.UNCHANGED&&this.setNewValue(U)},M.prototype.prepareNewValue=function(U){if(jn(this),Ki(this)){var ne=Tr(this,{object:this,type:"update",newValue:U});if(!ne)return Pn.UNCHANGED;U=ne.newValue}return U=this.enhancer(U,this.value,this.name),this.equals(this.value,U)?Pn.UNCHANGED:U},M.prototype.setNewValue=function(U){var ne=this.value;this.value=U,this.reportChanged(),$i(this)&&di(this,{type:"update",object:this,newValue:U,oldValue:ne})},M.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},M.prototype.intercept=function(U){return va(this,U)},M.prototype.observe=function(U,ne){return ne&&U({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ma(this,U)},M.prototype.toJSON=function(){return this.get()},M.prototype.toString=function(){return this.name+"["+this.value+"]"},M.prototype.valueOf=function(){return Y(this.get())},M.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},M}(I),fl=j("ObservableValue",Rr),Va=function(){function T(M){this.dependenciesState=xn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=xn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new $n(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Be.NONE,w(M.get,"missing option for computed: get"),this.derivation=M.get,this.name=M.name||"ComputedValue@"+g(),M.set&&(this.setter=Vo(this.name+"-setter",M.set)),this.equals=M.equals||(M.compareStructural||M.struct?q.structural:q.default),this.scope=M.context,this.requiresReaction=!!M.requiresReaction,this.keepAlive=!!M.keepAlive}return T.prototype.onBecomeStale=function(){(function(M){M.lowestObserverState===xn.UP_TO_DATE&&(M.lowestObserverState=xn.POSSIBLY_STALE,M.observers.forEach(function(U){U.dependenciesState===xn.UP_TO_DATE&&(U.dependenciesState=xn.POSSIBLY_STALE,U.isTracing!==Be.NONE&&Aa(U,M),U.onBecomeStale())}))})(this)},T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Es(this),Ur(this)&&this.trackAndCompute()&&function(U){U.lowestObserverState!==xn.STALE&&(U.lowestObserverState=xn.STALE,U.observers.forEach(function(ne){ne.dependenciesState===xn.POSSIBLY_STALE?ne.dependenciesState=xn.STALE:ne.dependenciesState===xn.UP_TO_DATE&&(U.lowestObserverState=xn.UP_TO_DATE)}))}(this)):Ur(this)&&(this.warnAboutUntrackedRead(),qi(),this.value=this.computeValue(!1),ta());var M=this.value;if(xr(M))throw M.cause;return M},T.prototype.peek=function(){var M=this.computeValue(!1);if(xr(M))throw M.cause;return M},T.prototype.set=function(M){if(this.setter){w(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,M)}finally{this.isRunningSetter=!1}}else w(!1,!1)},T.prototype.trackAndCompute=function(){var M=this.value,U=this.dependenciesState===xn.NOT_TRACKING,ne=this.computeValue(!0),me=U||xr(M)||xr(ne)||!this.equals(M,ne);return me&&(this.value=ne),me},T.prototype.computeValue=function(M){var U;if(this.isComputing=!0,Pn.computationDepth++,M)U=Co(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)U=this.derivation.call(this.scope);else try{U=this.derivation.call(this.scope)}catch(ne){U=new $n(ne)}return Pn.computationDepth--,this.isComputing=!1,U},T.prototype.suspend=function(){this.keepAlive||(Ee(this),this.value=void 0)},T.prototype.observe=function(M,U){var ne=this,me=!0,We=void 0;return xc(function(){var vt=ne.get();if(!me||U){var Ht=De();M({type:"update",object:ne,newValue:vt,oldValue:We}),at(Ht)}me=!1,We=vt})},T.prototype.warnAboutUntrackedRead=function(){},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},T.prototype.valueOf=function(){return Y(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(),dl=j("ComputedValue",Va),lu=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},zd={};function mc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:zd}var da=!0,Wu=!1,Pn=function(){var T=mc();return T.__mobxInstanceCount>0&&!T.__mobxGlobals&&(da=!1),T.__mobxGlobals&&T.__mobxGlobals.version!==new lu().version&&(da=!1),da?T.__mobxGlobals?(T.__mobxInstanceCount+=1,T.__mobxGlobals.UNCHANGED||(T.__mobxGlobals.UNCHANGED={}),T.__mobxGlobals):(T.__mobxInstanceCount=1,T.__mobxGlobals=new lu):(setTimeout(function(){Wu||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new lu)}();function Cf(T,M){T.observers.add(M),T.lowestObserverState>M.dependenciesState&&(T.lowestObserverState=M.dependenciesState)}function yo(T,M){T.observers.delete(M),T.observers.size===0&&gc(T)}function gc(T){T.isPendingUnobservation===!1&&(T.isPendingUnobservation=!0,Pn.pendingUnobservations.push(T))}function qi(){Pn.inBatch++}function ta(){if(--Pn.inBatch==0){_c();for(var T=Pn.pendingUnobservations,M=0;M<T.length;M++){var U=T[M];U.isPendingUnobservation=!1,U.observers.size===0&&(U.isBeingObserved&&(U.isBeingObserved=!1,U.onBecomeUnobserved()),U instanceof Va&&U.suspend())}Pn.pendingUnobservations=[]}}function Es(T){var M=Pn.trackingDerivation;return M!==null?(M.runId!==T.lastAccessedBy&&(T.lastAccessedBy=M.runId,M.newObserving[M.unboundDepsCount++]=T,T.isBeingObserved||(T.isBeingObserved=!0,T.onBecomeObserved())),!0):(T.observers.size===0&&Pn.inBatch>0&&gc(T),!1)}function Aa(T,M){if(T.isTracing===Be.BREAK){var U=[];pa(jo(T),U,1),new Function(`debugger;
/*
Tracing '`+T.name+`'

You are entering this break point because derivation '`+T.name+"' is being traced and '"+M.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(T instanceof Va?T.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+U.join(`
`)+`
*/
    `)()}}function pa(T,M,U){M.length>=1e3?M.push("(and many more)"):(M.push(""+new Array(U).join("	")+T.name),T.dependencies&&T.dependencies.forEach(function(ne){return pa(ne,M,U+1)}))}var Ta=function(){function T(M,U,ne,me){M===void 0&&(M="Reaction@"+g()),me===void 0&&(me=!1),this.name=M,this.onInvalidate=U,this.errorHandler=ne,this.requiresObservable=me,this.observing=[],this.newObserving=[],this.dependenciesState=xn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Be.NONE}return T.prototype.onBecomeStale=function(){this.schedule()},T.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),_c())},T.prototype.isScheduled=function(){return this._isScheduled},T.prototype.runReaction=function(){if(!this.isDisposed){if(qi(),this._isScheduled=!1,Ur(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(M){this.reportExceptionInDerivation(M)}}ta()}},T.prototype.track=function(M){if(!this.isDisposed){qi(),this._isRunning=!0;var U=Co(this,M,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ee(this),xr(U)&&this.reportExceptionInDerivation(U.cause),ta()}},T.prototype.reportExceptionInDerivation=function(M){var U=this;if(this.errorHandler)this.errorHandler(M,this);else{if(Pn.disableErrorBoundaries)throw M;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(ne){return ne(M,U)})}},T.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(qi(),Ee(this),ta()))},T.prototype.getDisposer=function(){var M=this.dispose.bind(this);return M[W]=this,M},T.prototype.toString=function(){return"Reaction["+this.name+"]"},T.prototype.trace=function(M){M===void 0&&(M=!1),function(){for(var U=[],ne=0;ne<arguments.length;ne++)U[ne]=arguments[ne];var me=!1;typeof U[U.length-1]=="boolean"&&(me=U.pop());var We=Lr(U);if(!We)return b(!1);We.isTracing,Be.NONE,We.isTracing=me?Be.BREAK:Be.LOG}(this,M)},T}(),bc=function(T){return T()};function _c(){Pn.inBatch>0||Pn.isRunningReactions||bc(jf)}function jf(){Pn.isRunningReactions=!0;for(var T=Pn.pendingReactions,M=0;T.length>0;){++M==100&&T.splice(0);for(var U=T.splice(0),ne=0,me=U.length;ne<me;ne++)U[ne].runReaction()}Pn.isRunningReactions=!1}var zu=j("Reaction",Ta);function If(T){var M=bc;bc=function(U){return T(function(){return M(U)})}}function wc(T){return function(){}}function Hd(){b(!1)}function Cl(T){return function(M,U,ne){if(ne){if(ne.value)return{value:Vo(T,ne.value),enumerable:!1,configurable:!0,writable:!0};var me=ne.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Vo(T,me.call(this))}}}return Lf(T).apply(this,arguments)}}function Lf(T){return function(M,U,ne){Object.defineProperty(M,U,{configurable:!0,enumerable:!1,get:function(){},set:function(me){k(this,U,pl(T,me))}})}}var pl=function(T,M,U,ne){return arguments.length===1&&typeof T=="function"?Vo(T.name||"<unnamed action>",T):arguments.length===2&&typeof M=="function"?Vo(T,M):arguments.length===1&&typeof T=="string"?Cl(T):ne!==!0?Cl(M).apply(null,arguments):void k(T,M,Vo(T.name||M,U.value,this))};function Ec(T,M){return qo(typeof T=="string"?T:T.name||"<unnamed action>",typeof T=="function"?T:M,this,void 0)}function Os(T){return typeof T=="function"&&T.isMobxAction===!0}function Oc(T,M,U){k(T,M,Vo(M,U.bind(T)))}function xc(T,M){M===void 0&&(M=h);var U,ne=M&&M.name||T.name||"Autorun@"+g();if(!M.scheduler&&!M.delay)U=new Ta(ne,function(){this.track(vt)},M.onError,M.requiresObservable);else{var me=Ff(M),We=!1;U=new Ta(ne,function(){We||(We=!0,me(function(){We=!1,U.isDisposed||U.track(vt)}))},M.onError,M.requiresObservable)}function vt(){T(U)}return U.schedule(),U.getDisposer()}pl.bound=function(T,M,U,ne){return ne===!0?(Oc(T,M,U.value),null):U?{configurable:!0,enumerable:!1,get:function(){return Oc(this,M,U.value||U.initializer.call(this)),this[M]},set:Hd}:{enumerable:!1,configurable:!0,set:function(me){Oc(this,M,me)},get:function(){}}};var Xd=function(T){return T()};function Ff(T){return T.scheduler?T.scheduler:T.delay?function(M){return setTimeout(M,T.delay)}:Xd}function Wr(T,M,U){U===void 0&&(U=h);var ne,me,We,vt=U.name||"Reaction@"+g(),Ht=pl(vt,U.onError?(ne=U.onError,me=M,function(){try{return me.apply(this,arguments)}catch(wo){ne.call(this,wo)}}):M),_n=!U.scheduler&&!U.delay,yr=Ff(U),ln=!0,Gr=!1,pr=U.compareStructural?q.structural:U.equals||q.default,Cr=new Ta(vt,function(){ln||_n?ia():Gr||(Gr=!0,yr(ia))},U.onError,U.requiresObservable);function ia(){if(Gr=!1,!Cr.isDisposed){var wo=!1;Cr.track(function(){var Ji=T(Cr);wo=ln||!pr(We,Ji),We=Ji}),ln&&U.fireImmediately&&Ht(We,Cr),ln||wo!==!0||Ht(We,Cr),ln&&(ln=!1)}}return Cr.schedule(),Cr.getDisposer()}function Vr(T,M,U){return $f("onBecomeUnobserved",T,M,U)}function $f(T,M,U,ne){var me=typeof ne=="function"?oa(M,U):oa(M),We=typeof ne=="function"?ne:U,vt=T+"Listeners";return me[vt]?me[vt].add(We):me[vt]=new Set([We]),typeof me[T]!="function"?b(!1):function(){var Ht=me[vt];Ht&&(Ht.delete(We),Ht.size===0&&delete me[vt])}}function uu(T){var M=T.enforceActions,U=T.computedRequiresReaction,ne=T.computedConfigurable,me=T.disableErrorBoundaries,We=T.reactionScheduler,vt=T.reactionRequiresObservable,Ht=T.observableRequiresReaction;if(T.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Wu=!0,da&&(--mc().__mobxInstanceCount==0&&(mc().__mobxGlobals=void 0),Pn=new lu)),M!==void 0){var _n=void 0;switch(M){case!0:case"observed":_n=!0;break;case!1:case"never":_n=!1;break;case"strict":case"always":_n="strict";break;default:b("Invalid value for 'enforceActions': '"+M+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=_n,Pn.allowStateChanges=_n!==!0&&_n!=="strict"}U!==void 0&&(Pn.computedRequiresReaction=!!U),vt!==void 0&&(Pn.reactionRequiresObservable=!!vt),Ht!==void 0&&(Pn.observableRequiresReaction=!!Ht,Pn.allowStateReads=!Pn.observableRequiresReaction),ne!==void 0&&(Pn.computedConfigurable=!!ne),me!==void 0&&(Pn.disableErrorBoundaries=!!me),We&&If(We)}function ha(T,M,U,ne){var me=xs(ne=Se(ne));return je(T),ra(T,ne.name,me.enhancer),M&&Bf(T,M,U,me),T}function xs(T){return T.defaultDecorator||(T.deep===!1?xt:ht)}function Bf(T,M,U,ne){var me,We;qi();try{var vt=Q(M);try{for(var Ht=Oe(vt),_n=Ht.next();!_n.done;_n=Ht.next()){var yr=_n.value,ln=Object.getOwnPropertyDescriptor(M,yr),Gr=(U&&yr in U?U[yr]:ln.get?mn:ne)(T,yr,ln,!0);Gr&&Object.defineProperty(T,yr,Gr)}}catch(pr){me={error:pr}}finally{try{_n&&!_n.done&&(We=Ht.return)&&We.call(Ht)}finally{if(me)throw me.error}}}finally{ta()}}function jo(T,M){return jl(oa(T,M))}function jl(T){var M,U,ne={name:T.name};return T.observing&&T.observing.length>0&&(ne.dependencies=(M=T.observing,U=[],M.forEach(function(me){U.indexOf(me)===-1&&U.push(me)}),U).map(jl)),ne}var Il=0;function Ss(){this.message="FLOW_CANCELLED"}function su(T){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var M=T.name||"<unnamed flow>";return function(){var U,ne=this,me=arguments,We=++Il,vt=pl(M+" - runid: "+We+" - init",T).apply(ne,me),Ht=void 0,_n=new Promise(function(yr,ln){var Gr=0;function pr(wo){var Ji;Ht=void 0;try{Ji=pl(M+" - runid: "+We+" - yield "+Gr++,vt.next).call(vt,wo)}catch(hl){return ln(hl)}ia(Ji)}function Cr(wo){var Ji;Ht=void 0;try{Ji=pl(M+" - runid: "+We+" - yield "+Gr++,vt.throw).call(vt,wo)}catch(hl){return ln(hl)}ia(Ji)}function ia(wo){if(!wo||typeof wo.then!="function")return wo.done?yr(wo.value):(Ht=Promise.resolve(wo.value)).then(pr,Cr);wo.then(ia,ln)}U=ln,pr(void 0)});return _n.cancel=pl(M+" - runid: "+We+" - cancel",function(){try{Ht&&wi(Ht);var yr=vt.return(void 0),ln=Promise.resolve(yr.value);ln.then(S,S),wi(ln),U(new Ss)}catch(Gr){U(Gr)}}),_n}}function wi(T){typeof T.cancel=="function"&&T.cancel()}function Sc(T,M){if(T==null)return!1;if(M!==void 0){if(li(T)===!1||!T[W].values.has(M))return!1;var U=oa(T,M);return dl(U)}return dl(T)}function Uf(T){return arguments.length>1?b(!1):Sc(T)}function Ac(T,M){return typeof M!="string"?b(!1):Sc(T,M)}function ji(T,M){return T!=null&&(M!==void 0?!!li(T)&&T[W].values.has(M):li(T)||!!T[W]||z(T)||zu(T)||dl(T))}function ii(T){return arguments.length!==1&&b(!1),ji(T)}function na(T){return li(T)?T[W].getKeys():Go(T)||Ko(T)?Array.from(T.keys()):ya(T)?T.map(function(M,U){return U}):b(!1)}function oo(T){return li(T)?na(T).map(function(M){return T[M]}):Go(T)?na(T).map(function(M){return T.get(M)}):Ko(T)?Array.from(T.values()):ya(T)?T.slice():b(!1)}function Vf(T){return li(T)?na(T).map(function(M){return[M,T[M]]}):Go(T)?na(T).map(function(M){return[M,T.get(M)]}):Ko(T)?Array.from(T.entries()):ya(T)?T.map(function(M,U){return[U,M]}):b(!1)}function Ii(T,M,U){if(arguments.length!==2||Ko(T))if(li(T)){var ne=T[W],me=ne.values.get(M);me?ne.write(M,U):ne.addObservableProp(M,U,ne.defaultEnhancer)}else if(Go(T))T.set(M,U);else if(Ko(T))T.add(M);else{if(!ya(T))return b(!1);typeof M!="number"&&(M=parseInt(M,10)),w(M>=0,"Not a valid index: '"+M+"'"),qi(),M>=T.length&&(T.length=M+1),T[M]=U,ta()}else{qi();var We=M;try{for(var vt in We)Ii(T,vt,We[vt])}finally{ta()}}}function Tc(T,M,U,ne){return typeof U=="function"?function(me,We,vt,Ht){return Ni(me,We).observe(vt,Ht)}(T,M,U,ne):function(me,We,vt){return Ni(me).observe(We,vt)}(T,M,U)}Ss.prototype=Object.create(Error.prototype);var Gf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Li(T,M,U,ne){return ne.detectCycles&&T.set(M,U),U}function ki(T,M,U){if(!M.recurseEverything&&!ii(T)||typeof T!="object")return T;if(T===null)return null;if(T instanceof Date)return T;if(fl(T))return ki(T.get(),M,U);if(ii(T)&&na(T),M.detectCycles===!0&&T!==null&&U.has(T))return U.get(T);if(ya(T)||Array.isArray(T)){var ne=Li(U,T,[],M),me=T.map(function(pr){return ki(pr,M,U)});ne.length=me.length;for(var We=0,vt=me.length;We<vt;We++)ne[We]=me[We];return ne}if(Ko(T)||Object.getPrototypeOf(T)===Set.prototype){if(M.exportMapsAsObjects===!1){var Ht=Li(U,T,new Set,M);return T.forEach(function(pr){Ht.add(ki(pr,M,U))}),Ht}var _n=Li(U,T,[],M);return T.forEach(function(pr){_n.push(ki(pr,M,U))}),_n}if(Go(T)||Object.getPrototypeOf(T)===Map.prototype){if(M.exportMapsAsObjects===!1){var yr=Li(U,T,new Map,M);return T.forEach(function(pr,Cr){yr.set(Cr,ki(pr,M,U))}),yr}var ln=Li(U,T,{},M);return T.forEach(function(pr,Cr){ln[Cr]=ki(pr,M,U)}),ln}var Gr=Li(U,T,{},M);return G(T).forEach(function(pr){Gr[pr]=ki(T[pr],M,U)}),Gr}function Mc(T,M){var U;return typeof M=="boolean"&&(M={detectCycles:M}),M||(M=Gf),M.detectCycles=M.detectCycles===void 0?M.recurseEverything===!0:M.detectCycles===!0,M.detectCycles&&(U=new Map),ki(T,M,U)}function Lr(T){switch(T.length){case 0:return Pn.trackingDerivation;case 1:return oa(T[0]);case 2:return oa(T[0],T[1])}}function ai(T,M){M===void 0&&(M=void 0),qi();try{return T.apply(M)}finally{ta()}}function As(T,M,U){return arguments.length===1||M&&typeof M=="object"?Pc(T,M):Wf(T,M,U||{})}function Wf(T,M,U){var ne;typeof U.timeout=="number"&&(ne=setTimeout(function(){if(!We[W].isDisposed){We();var vt=new Error("WHEN_TIMEOUT");if(!U.onError)throw vt;U.onError(vt)}},U.timeout)),U.name=U.name||"When@"+g();var me=Vo(U.name+"-effect",M),We=xc(function(vt){T()&&(vt.dispose(),ne&&clearTimeout(ne),me())},U);return We}function Pc(T,M){var U,ne=new Promise(function(me,We){var vt=Wf(T,me,Ne(Ne({},M),{onError:We}));U=function(){vt(),We("WHEN_CANCELLED")}});return ne.cancel=U,ne}function Ts(T){return T[W]}function Ga(T){return typeof T=="string"||typeof T=="number"||typeof T=="symbol"}var Fi={has:function(T,M){if(M===W||M==="constructor"||M===Pe)return!0;var U=Ts(T);return Ga(M)?U.has(M):M in T},get:function(T,M){if(M===W||M==="constructor"||M===Pe)return T[M];var U=Ts(T),ne=U.values.get(M);if(ne instanceof I){var me=ne.get();return me===void 0&&U.has(M),me}return Ga(M)&&U.has(M),T[M]},set:function(T,M,U){return!!Ga(M)&&(Ii(T,M,U),!0)},deleteProperty:function(T,M){return!!Ga(M)&&(Ts(T).remove(M),!0)},ownKeys:function(T){return Ts(T).keysAtom.reportObserved(),Reflect.ownKeys(T)},preventExtensions:function(T){return b("Dynamic observable objects cannot be frozen"),!1}};function cu(T){var M=new Proxy(T,Fi);return T[W].proxy=M,M}function Ki(T){return T.interceptors!==void 0&&T.interceptors.length>0}function va(T,M){var U=T.interceptors||(T.interceptors=[]);return U.push(M),O(function(){var ne=U.indexOf(M);ne!==-1&&U.splice(ne,1)})}function Tr(T,M){var U=De();try{for(var ne=Ie(T.interceptors||[]),me=0,We=ne.length;me<We&&(w(!(M=ne[me](M))||M.type,"Intercept handlers should return nothing or a change object"),M);me++);return M}finally{at(U)}}function $i(T){return T.changeListeners!==void 0&&T.changeListeners.length>0}function Ma(T,M){var U=T.changeListeners||(T.changeListeners=[]);return U.push(M),O(function(){var ne=U.indexOf(M);ne!==-1&&U.splice(ne,1)})}function di(T,M){var U=De(),ne=T.changeListeners;if(ne){for(var me=0,We=(ne=ne.slice()).length;me<We;me++)ne[me](M);at(U)}}var fu={get:function(T,M){return M===W?T[W]:M==="length"?T[W].getArrayLength():typeof M=="number"?fo.get.call(T,M):typeof M!="string"||isNaN(M)?fo.hasOwnProperty(M)?fo[M]:T[M]:fo.get.call(T,parseInt(M))},set:function(T,M,U){return M==="length"&&T[W].setArrayLength(U),typeof M=="number"&&fo.set.call(T,M,U),typeof M=="symbol"||isNaN(M)?T[M]=U:fo.set.call(T,parseInt(M),U),!0},preventExtensions:function(T){return b("Observable arrays cannot be frozen"),!1}};function Ll(T,M,U,ne){U===void 0&&(U="ObservableArray@"+g()),ne===void 0&&(ne=!1);var me,We,vt,Ht=new Pa(U,M,ne);me=Ht.values,We=W,vt=Ht,Object.defineProperty(me,We,{enumerable:!1,writable:!1,configurable:!0,value:vt});var _n=new Proxy(Ht.values,fu);if(Ht.proxy=_n,T&&T.length){var yr=ir(!0);Ht.spliceWithArray(0,0,T),Kr(yr)}return _n}var Pa=function(){function T(M,U,ne){this.owned=ne,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new I(M||"ObservableArray@"+g()),this.enhancer=function(me,We){return U(me,We,M+"[..]")}}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.dehanceValues=function(M){return this.dehancer!==void 0&&M.length>0?M.map(this.dehancer):M},T.prototype.intercept=function(M){return va(this,M)},T.prototype.observe=function(M,U){return U===void 0&&(U=!1),U&&M({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ma(this,M)},T.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},T.prototype.setArrayLength=function(M){if(typeof M!="number"||M<0)throw new Error("[mobx.array] Out of range: "+M);var U=this.values.length;if(M!==U)if(M>U){for(var ne=new Array(M-U),me=0;me<M-U;me++)ne[me]=void 0;this.spliceWithArray(U,0,ne)}else this.spliceWithArray(M,U-M)},T.prototype.updateArrayLength=function(M,U){if(M!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=U},T.prototype.spliceWithArray=function(M,U,ne){var me=this;jn(this.atom);var We=this.values.length;if(M===void 0?M=0:M>We?M=We:M<0&&(M=Math.max(0,We+M)),U=arguments.length===1?We-M:U==null?0:Math.max(0,Math.min(U,We-M)),ne===void 0&&(ne=v),Ki(this)){var vt=Tr(this,{object:this.proxy,type:"splice",index:M,removedCount:U,added:ne});if(!vt)return v;U=vt.removedCount,ne=vt.added}ne=ne.length===0?ne:ne.map(function(_n){return me.enhancer(_n,void 0)});var Ht=this.spliceItemsIntoValues(M,U,ne);return U===0&&ne.length===0||this.notifyArraySplice(M,ne,Ht),this.dehanceValues(Ht)},T.prototype.spliceItemsIntoValues=function(M,U,ne){var me;if(ne.length<1e4)return(me=this.values).splice.apply(me,Ie([M,U],ne));var We=this.values.slice(M,M+U);return this.values=this.values.slice(0,M).concat(ne,this.values.slice(M+U)),We},T.prototype.notifyArrayChildUpdate=function(M,U,ne){var me=!this.owned&&!1,We=$i(this),vt=We||me?{object:this.proxy,type:"update",index:M,newValue:U,oldValue:ne}:null;this.atom.reportChanged(),We&&di(this,vt)},T.prototype.notifyArraySplice=function(M,U,ne){var me=!this.owned&&!1,We=$i(this),vt=We||me?{object:this.proxy,type:"splice",index:M,removed:ne,added:U,removedCount:ne.length,addedCount:U.length}:null;this.atom.reportChanged(),We&&di(this,vt)},T}(),fo={intercept:function(T){return this[W].intercept(T)},observe:function(T,M){return M===void 0&&(M=!1),this[W].observe(T,M)},clear:function(){return this.splice(0)},replace:function(T){var M=this[W];return M.spliceWithArray(0,M.values.length,T)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(T,M){for(var U=[],ne=2;ne<arguments.length;ne++)U[ne-2]=arguments[ne];var me=this[W];switch(arguments.length){case 0:return[];case 1:return me.spliceWithArray(T);case 2:return me.spliceWithArray(T,M)}return me.spliceWithArray(T,M,U)},spliceWithArray:function(T,M,U){return this[W].spliceWithArray(T,M,U)},push:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var U=this[W];return U.spliceWithArray(U.values.length,0,T),U.values.length},pop:function(){return this.splice(Math.max(this[W].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var U=this[W];return U.spliceWithArray(0,0,T),U.values.length},reverse:function(){var T=this.slice();return T.reverse.apply(T,arguments)},sort:function(T){var M=this.slice();return M.sort.apply(M,arguments)},remove:function(T){var M=this[W],U=M.dehanceValues(M.values).indexOf(T);return U>-1&&(this.splice(U,1),!0)},get:function(T){var M=this[W];if(M&&T<M.values.length)return M.atom.reportObserved(),M.dehanceValue(M.values[T])},set:function(T,M){var U=this[W],ne=U.values;if(T<ne.length){jn(U.atom);var me=ne[T];if(Ki(U)){var We=Tr(U,{type:"update",object:U.proxy,index:T,newValue:M});if(!We)return;M=We.newValue}(M=U.enhancer(M,me))!==me&&(ne[T]=M,U.notifyArrayChildUpdate(T,M,me))}else{if(T!==ne.length)throw new Error("[mobx.array] Index out of bounds, "+T+" is larger than "+ne.length);U.spliceWithArray(T,0,[M])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(T){typeof Array.prototype[T]=="function"&&(fo[T]=function(){var M=this[W];M.atom.reportObserved();var U=M.dehanceValues(M.values);return U[T].apply(U,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(T){typeof Array.prototype[T]=="function"&&(fo[T]=function(M,U){var ne=this,me=this[W];return me.atom.reportObserved(),me.dehanceValues(me.values)[T](function(We,vt){return M.call(U,We,vt,ne)},U)})}),["reduce","reduceRight"].forEach(function(T){fo[T]=function(){var M=this,U=this[W];U.atom.reportObserved();var ne=arguments[0];return arguments[0]=function(me,We,vt){return We=U.dehanceValue(We),ne(me,We,vt,M)},U.values[T].apply(U.values,arguments)}});var Hu,Wa=j("ObservableArrayAdministration",Pa);function ya(T){return P(T)&&Wa(T[W])}var kc,Yd={},Nc=function(){function T(M,U,ne){if(U===void 0&&(U=Pt),ne===void 0&&(ne="ObservableMap@"+g()),this.enhancer=U,this.name=ne,this[Hu]=Yd,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(M)}return T.prototype._has=function(M){return this._data.has(M)},T.prototype.has=function(M){var U=this;if(!Pn.trackingDerivation)return this._has(M);var ne=this._hasMap.get(M);if(!ne){var me=ne=new Rr(this._has(M),Yt,this.name+"."+H(M)+"?",!1);this._hasMap.set(M,me),Vr(me,function(){return U._hasMap.delete(M)})}return ne.get()},T.prototype.set=function(M,U){var ne=this._has(M);if(Ki(this)){var me=Tr(this,{type:ne?"update":"add",object:this,newValue:U,name:M});if(!me)return this;U=me.newValue}return ne?this._updateValue(M,U):this._addValue(M,U),this},T.prototype.delete=function(M){var U=this;if(jn(this._keysAtom),Ki(this)&&!(me=Tr(this,{type:"delete",object:this,name:M})))return!1;if(this._has(M)){var ne=$i(this),me=ne?{type:"delete",object:this,oldValue:this._data.get(M).value,name:M}:null;return ai(function(){U._keysAtom.reportChanged(),U._updateHasMapEntry(M,!1),U._data.get(M).setNewValue(void 0),U._data.delete(M)}),ne&&di(this,me),!0}return!1},T.prototype._updateHasMapEntry=function(M,U){var ne=this._hasMap.get(M);ne&&ne.setNewValue(U)},T.prototype._updateValue=function(M,U){var ne=this._data.get(M);if((U=ne.prepareNewValue(U))!==Pn.UNCHANGED){var me=$i(this),We=me?{type:"update",object:this,oldValue:ne.value,name:M,newValue:U}:null;ne.setNewValue(U),me&&di(this,We)}},T.prototype._addValue=function(M,U){var ne=this;jn(this._keysAtom),ai(function(){var vt=new Rr(U,ne.enhancer,ne.name+"."+H(M),!1);ne._data.set(M,vt),U=vt.value,ne._updateHasMapEntry(M,!0),ne._keysAtom.reportChanged()});var me=$i(this),We=me?{type:"add",object:this,name:M,newValue:U}:null;me&&di(this,We)},T.prototype.get=function(M){return this.has(M)?this.dehanceValue(this._data.get(M).get()):this.dehanceValue(void 0)},T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},T.prototype.values=function(){var M=this,U=this.keys();return Mr({next:function(){var ne=U.next(),me=ne.done,We=ne.value;return{done:me,value:me?void 0:M.get(We)}}})},T.prototype.entries=function(){var M=this,U=this.keys();return Mr({next:function(){var ne=U.next(),me=ne.done,We=ne.value;return{done:me,value:me?void 0:[We,M.get(We)]}}})},T.prototype[Hu=W,Symbol.iterator]=function(){return this.entries()},T.prototype.forEach=function(M,U){var ne,me;try{for(var We=Oe(this),vt=We.next();!vt.done;vt=We.next()){var Ht=Xe(vt.value,2),_n=Ht[0],yr=Ht[1];M.call(U,yr,_n,this)}}catch(ln){ne={error:ln}}finally{try{vt&&!vt.done&&(me=We.return)&&me.call(We)}finally{if(ne)throw ne.error}}},T.prototype.merge=function(M){var U=this;return Go(M)&&(M=M.toJS()),ai(function(){var ne=ir(!0);try{A(M)?G(M).forEach(function(me){return U.set(me,M[me])}):Array.isArray(M)?M.forEach(function(me){var We=Xe(me,2),vt=We[0],Ht=We[1];return U.set(vt,Ht)}):R(M)?(M.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+M.constructor.name),M.forEach(function(me,We){return U.set(We,me)})):M!=null&&b("Cannot initialize map from "+M)}finally{Kr(ne)}}),this},T.prototype.clear=function(){var M=this;ai(function(){Ke(function(){var U,ne;try{for(var me=Oe(M.keys()),We=me.next();!We.done;We=me.next()){var vt=We.value;M.delete(vt)}}catch(Ht){U={error:Ht}}finally{try{We&&!We.done&&(ne=me.return)&&ne.call(me)}finally{if(U)throw U.error}}})})},T.prototype.replace=function(M){var U=this;return ai(function(){var ne,me,We,vt,Ht=function(Zo){if(R(Zo)||Go(Zo))return Zo;if(Array.isArray(Zo))return new Map(Zo);if(A(Zo)){var Bl=new Map;for(var yl in Zo)Bl.set(yl,Zo[yl]);return Bl}return b("Cannot convert to map from '"+Zo+"'")}(M),_n=new Map,yr=!1;try{for(var ln=Oe(U._data.keys()),Gr=ln.next();!Gr.done;Gr=ln.next()){var pr=Gr.value;if(!Ht.has(pr))if(U.delete(pr))yr=!0;else{var Cr=U._data.get(pr);_n.set(pr,Cr)}}}catch(Zo){ne={error:Zo}}finally{try{Gr&&!Gr.done&&(me=ln.return)&&me.call(ln)}finally{if(ne)throw ne.error}}try{for(var ia=Oe(Ht.entries()),wo=ia.next();!wo.done;wo=ia.next()){var Ji=Xe(wo.value,2),hl=(pr=Ji[0],Cr=Ji[1],U._data.has(pr));if(U.set(pr,Cr),U._data.has(pr)){var vl=U._data.get(pr);_n.set(pr,vl),hl||(yr=!0)}}}catch(Zo){We={error:Zo}}finally{try{wo&&!wo.done&&(vt=ia.return)&&vt.call(ia)}finally{if(We)throw We.error}}if(!yr)if(U._data.size!==_n.size)U._keysAtom.reportChanged();else for(var $l=U._data.keys(),du=_n.keys(),Ha=$l.next(),pu=du.next();!Ha.done;){if(Ha.value!==pu.value){U._keysAtom.reportChanged();break}Ha=$l.next(),pu=du.next()}U._data=_n}),this},Object.defineProperty(T.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.toPOJO=function(){var M,U,ne={};try{for(var me=Oe(this),We=me.next();!We.done;We=me.next()){var vt=Xe(We.value,2),Ht=vt[0],_n=vt[1];ne[typeof Ht=="symbol"?Ht:H(Ht)]=_n}}catch(yr){M={error:yr}}finally{try{We&&!We.done&&(U=me.return)&&U.call(me)}finally{if(M)throw M.error}}return ne},T.prototype.toJS=function(){return new Map(this)},T.prototype.toJSON=function(){return this.toPOJO()},T.prototype.toString=function(){var M=this;return this.name+"[{ "+Array.from(this.keys()).map(function(U){return H(U)+": "+M.get(U)}).join(", ")+" }]"},T.prototype.observe=function(M,U){return Ma(this,M)},T.prototype.intercept=function(M){return va(this,M)},T}(),Go=j("ObservableMap",Nc),Fl={},za=function(){function T(M,U,ne){if(U===void 0&&(U=Pt),ne===void 0&&(ne="ObservableSet@"+g()),this.name=ne,this[kc]=Fl,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(me,We){return U(me,We,ne)},M&&this.replace(M)}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.clear=function(){var M=this;ai(function(){Ke(function(){var U,ne;try{for(var me=Oe(M._data.values()),We=me.next();!We.done;We=me.next()){var vt=We.value;M.delete(vt)}}catch(Ht){U={error:Ht}}finally{try{We&&!We.done&&(ne=me.return)&&ne.call(me)}finally{if(U)throw U.error}}})})},T.prototype.forEach=function(M,U){var ne,me;try{for(var We=Oe(this),vt=We.next();!vt.done;vt=We.next()){var Ht=vt.value;M.call(U,Ht,Ht,this)}}catch(_n){ne={error:_n}}finally{try{vt&&!vt.done&&(me=We.return)&&me.call(We)}finally{if(ne)throw ne.error}}},Object.defineProperty(T.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.add=function(M){var U=this;if(jn(this._atom),Ki(this)&&!(me=Tr(this,{type:"add",object:this,newValue:M})))return this;if(!this.has(M)){ai(function(){U._data.add(U.enhancer(M,void 0)),U._atom.reportChanged()});var ne=$i(this),me=ne?{type:"add",object:this,newValue:M}:null;ne&&di(this,me)}return this},T.prototype.delete=function(M){var U=this;if(Ki(this)&&!(me=Tr(this,{type:"delete",object:this,oldValue:M})))return!1;if(this.has(M)){var ne=$i(this),me=ne?{type:"delete",object:this,oldValue:M}:null;return ai(function(){U._atom.reportChanged(),U._data.delete(M)}),ne&&di(this,me),!0}return!1},T.prototype.has=function(M){return this._atom.reportObserved(),this._data.has(this.dehanceValue(M))},T.prototype.entries=function(){var M=0,U=Array.from(this.keys()),ne=Array.from(this.values());return Mr({next:function(){var me=M;return M+=1,me<ne.length?{value:[U[me],ne[me]],done:!1}:{done:!0}}})},T.prototype.keys=function(){return this.values()},T.prototype.values=function(){this._atom.reportObserved();var M=this,U=0,ne=Array.from(this._data.values());return Mr({next:function(){return U<ne.length?{value:M.dehanceValue(ne[U++]),done:!1}:{done:!0}}})},T.prototype.replace=function(M){var U=this;return Ko(M)&&(M=M.toJS()),ai(function(){var ne=ir(!0);try{Array.isArray(M)||B(M)?(U.clear(),M.forEach(function(me){return U.add(me)})):M!=null&&b("Cannot initialize set from "+M)}finally{Kr(ne)}}),this},T.prototype.observe=function(M,U){return Ma(this,M)},T.prototype.intercept=function(M){return va(this,M)},T.prototype.toJS=function(){return new Set(this)},T.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},T.prototype[kc=W,Symbol.iterator]=function(){return this.values()},T}(),Ko=j("ObservableSet",za),Rc=function(){function T(M,U,ne,me){U===void 0&&(U=new Map),this.target=M,this.values=U,this.name=ne,this.defaultEnhancer=me,this.keysAtom=new I(ne+".keys")}return T.prototype.read=function(M){return this.values.get(M).get()},T.prototype.write=function(M,U){var ne=this.target,me=this.values.get(M);if(me instanceof Va)me.set(U);else{if(Ki(this)){if(!(vt=Tr(this,{type:"update",object:this.proxy||ne,name:M,newValue:U})))return;U=vt.newValue}if((U=me.prepareNewValue(U))!==Pn.UNCHANGED){var We=$i(this),vt=We?{type:"update",object:this.proxy||ne,oldValue:me.value,name:M,newValue:U}:null;me.setNewValue(U),We&&di(this,vt)}}},T.prototype.has=function(M){var U=this.pendingKeys||(this.pendingKeys=new Map),ne=U.get(M);if(ne)return ne.get();var me=!!this.values.get(M);return ne=new Rr(me,Yt,this.name+"."+H(M)+"?",!1),U.set(M,ne),ne.get()},T.prototype.addObservableProp=function(M,U,ne){ne===void 0&&(ne=this.defaultEnhancer);var me=this.target;if(Ki(this)){var We=Tr(this,{object:this.proxy||me,name:M,type:"add",newValue:U});if(!We)return;U=We.newValue}var vt=new Rr(U,ne,this.name+"."+H(M),!1);this.values.set(M,vt),U=vt.value,Object.defineProperty(me,M,function(Ht){return ma[Ht]||(ma[Ht]={configurable:!0,enumerable:!0,get:function(){return this[W].read(Ht)},set:function(_n){this[W].write(Ht,_n)}})}(M)),this.notifyPropertyAddition(M,U)},T.prototype.addComputedProp=function(M,U,ne){var me,We,vt,Ht=this.target;ne.name=ne.name||this.name+"."+H(U),this.values.set(U,new Va(ne)),(M===Ht||(me=M,We=U,!(vt=Object.getOwnPropertyDescriptor(me,We))||vt.configurable!==!1&&vt.writable!==!1))&&Object.defineProperty(M,U,function(_n){return Ms[_n]||(Ms[_n]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Bi(this).read(_n)},set:function(yr){Bi(this).write(_n,yr)}})}(U))},T.prototype.remove=function(M){if(this.values.has(M)){var U=this.target;if(Ki(this)&&!(_n=Tr(this,{object:this.proxy||U,name:M,type:"remove"})))return;try{qi();var ne=$i(this),me=!1,We=this.values.get(M),vt=We&&We.get();if(We&&We.set(void 0),this.keysAtom.reportChanged(),this.values.delete(M),this.pendingKeys){var Ht=this.pendingKeys.get(M);Ht&&Ht.set(!1)}delete this.target[M];var _n=ne?{type:"remove",object:this.proxy||U,oldValue:vt,name:M}:null;ne&&di(this,_n)}finally{ta()}}},T.prototype.illegalAccess=function(M,U){},T.prototype.observe=function(M,U){return Ma(this,M)},T.prototype.intercept=function(M){return va(this,M)},T.prototype.notifyPropertyAddition=function(M,U){var ne=$i(this),me=ne?{type:"add",object:this.proxy||this.target,name:M,newValue:U}:null;if(ne&&di(this,me),this.pendingKeys){var We=this.pendingKeys.get(M);We&&We.set(!0)}this.keysAtom.reportChanged()},T.prototype.getKeys=function(){var M,U;this.keysAtom.reportObserved();var ne=[];try{for(var me=Oe(this.values),We=me.next();!We.done;We=me.next()){var vt=Xe(We.value,2),Ht=vt[0];vt[1]instanceof Rr&&ne.push(Ht)}}catch(_n){M={error:_n}}finally{try{We&&!We.done&&(U=me.return)&&U.call(me)}finally{if(M)throw M.error}}return ne},T}();function ra(T,M,U){if(M===void 0&&(M=""),U===void 0&&(U=Pt),Object.prototype.hasOwnProperty.call(T,W))return T[W];A(T)||(M=(T.constructor.name||"ObservableObject")+"@"+g()),M||(M="ObservableObject@"+g());var ne=new Rc(T,new Map,H(M),U);return k(T,W,ne),ne}var ma=Object.create(null),Ms=Object.create(null);function Bi(T){var M=T[W];return M||(je(T),T[W])}var Zi=j("ObservableObjectAdministration",Rc);function li(T){return!!P(T)&&(je(T),Zi(T[W]))}function oa(T,M){if(typeof T=="object"&&T!==null){if(ya(T))return M!==void 0&&b(!1),T[W].atom;if(Ko(T))return T[W];if(Go(T)){var U=T;return M===void 0?U._keysAtom:((ne=U._data.get(M)||U._hasMap.get(M))||b(!1),ne)}var ne;if(je(T),M&&!T[W]&&T[M],li(T))return M?((ne=T[W].values.get(M))||b(!1),ne):b(!1);if(z(T)||dl(T)||zu(T))return T}else if(typeof T=="function"&&zu(T[W]))return T[W];return b(!1)}function Ni(T,M){return T||b("Expecting some object"),M!==void 0?Ni(oa(T,M)):z(T)||dl(T)||zu(T)||Go(T)||Ko(T)?T:(je(T),T[W]?T[W]:void b(!1))}var ut=Object.prototype.toString;function jt(T,M,U){return U===void 0&&(U=-1),$t(T,M,U)}function $t(T,M,U,ne,me){if(T===M)return T!==0||1/T==1/M;if(T==null||M==null)return!1;if(T!=T)return M!=M;var We=typeof T;if(We!=="function"&&We!=="object"&&typeof M!="object")return!1;var vt=ut.call(T);if(vt!==ut.call(M))return!1;switch(vt){case"[object RegExp]":case"[object String]":return""+T==""+M;case"[object Number]":return+T!=+T?+M!=+M:+T==0?1/+T==1/M:+T==+M;case"[object Date]":case"[object Boolean]":return+T==+M;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(T)===Symbol.valueOf.call(M);case"[object Map]":case"[object Set]":U>=0&&U++}T=fn(T),M=fn(M);var Ht=vt==="[object Array]";if(!Ht){if(typeof T!="object"||typeof M!="object")return!1;var _n=T.constructor,yr=M.constructor;if(_n!==yr&&!(typeof _n=="function"&&_n instanceof _n&&typeof yr=="function"&&yr instanceof yr)&&"constructor"in T&&"constructor"in M)return!1}if(U===0)return!1;U<0&&(U=-1),me=me||[];for(var ln=(ne=ne||[]).length;ln--;)if(ne[ln]===T)return me[ln]===M;if(ne.push(T),me.push(M),Ht){if((ln=T.length)!==M.length)return!1;for(;ln--;)if(!$t(T[ln],M[ln],U-1,ne,me))return!1}else{var Gr=Object.keys(T),pr=void 0;if(ln=Gr.length,Object.keys(M).length!==ln)return!1;for(;ln--;)if(!ur(M,pr=Gr[ln])||!$t(T[pr],M[pr],U-1,ne,me))return!1}return ne.pop(),me.pop(),!0}function fn(T){return ya(T)?T.slice():R(T)||Go(T)||B(T)||Ko(T)?Array.from(T.entries()):T}function ur(T,M){return Object.prototype.hasOwnProperty.call(T,M)}function Mr(T){return T[Symbol.iterator]=po,T}function po(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:wc,extras:{getDebugName:function(T,M){return(M!==void 0?oa(T,M):li(T)||Go(T)||Ko(T)?Ni(T):oa(T)).name}},$mobx:W})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),v=r(80),h=r(58),g=r(116),b="Array Iterator",w=h.set,O=h.getterFor(b);n.exports=g(Array,"Array",function(S,P){w(this,{type:b,target:s(S),index:0,kind:P})},function(){var S=O(this),P=S.target,A=S.kind,k=S.index++;return!P||k>=P.length?(S.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:k,done:!1}:A=="values"?{value:P[k],done:!1}:{value:[k,P[k]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),v=r(46),h=r(76),g=r(34),b=r(15),w=r(71),O=r(36),S=r(108),P=r(18),A=r(35),k=r(96),j=r(30),R=r(33),B=r(54),G=r(87),H=r(32),Y=r(40),Q=r(41),W=r(86),I=r(39),z=r(69),K=r(60),q=r(77),ce=r(74),Ne=r(139),Oe=r(112),Xe=r(50),Ie=r(38),Pe=r(84),le=r(98),ye=r(42),Me=r(89),ze=r(93),je=r(72),it=r(90),bt=r(28),Pt=r(140),Yt=r(141),Ce=r(78),ge=r(58),Se=r(79).forEach,ht=ze("hidden"),zt="Symbol",xt=bt("toPrimitive"),rn=ge.set,yn=ge.getterFor(zt),Tn=Object.prototype,pn=c.Symbol,ft=pn&&pn.prototype,xn=c.TypeError,Be=c.QObject,mn=v("JSON","stringify"),Kn=Xe.f,re=Ie.f,$n=Ne.f,xr=Pe.f,Ur=b([].push),ro=Me("symbols"),jn=Me("op-symbols"),Co=Me("string-to-symbol-registry"),Ee=Me("symbol-to-string-registry"),Ke=Me("wks"),De=!Be||!Be.prototype||!Be.prototype.findChild,at=O&&P(function(){return K(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a!=7})?function(Sn,Bn,Xn){var ir=Kn(Tn,Bn);ir&&delete Tn[Bn],re(Sn,Bn,Xn),ir&&Sn!==Tn&&re(Tn,Bn,ir)}:re,en=function(Sn,Bn){var Xn=ro[Sn]=K(ft);return rn(Xn,{type:zt,tag:Sn,description:Bn}),O||(Xn.description=Bn),Xn},qt=function(Sn,Bn,Xn){Sn===Tn&&qt(jn,Bn,Xn),H(Sn);var ir=W(Bn);return H(Xn),A(ro,ir)?(Xn.enumerable?(A(Sn,ht)&&Sn[ht][ir]&&(Sn[ht][ir]=!1),Xn=K(Xn,{enumerable:z(0,!1)})):(A(Sn,ht)||re(Sn,ht,z(1,{})),Sn[ht][ir]=!0),at(Sn,ir,Xn)):re(Sn,ir,Xn)},kn=function(Sn,Bn){H(Sn);var Xn=Q(Bn),ir=q(Xn).concat(Vo(Xn));return Se(ir,function(Kr){O&&!g(_r,Xn,Kr)||qt(Sn,Kr,Xn[Kr])}),Sn},_r=function(Sn){var Bn=W(Sn),Xn=g(xr,this,Bn);return!(this===Tn&&A(ro,Bn)&&!A(jn,Bn))&&(!(Xn||!A(this,Bn)||!A(ro,Bn)||A(this,ht)&&this[ht][Bn])||Xn)},oi=function(Sn,Bn){var Xn=Q(Sn),ir=W(Bn);if(Xn!==Tn||!A(ro,ir)||A(jn,ir)){var Kr=Kn(Xn,ir);return!Kr||!A(ro,ir)||A(Xn,ht)&&Xn[ht][ir]||(Kr.enumerable=!0),Kr}},_i=function(Sn){var Bn=$n(Q(Sn)),Xn=[];return Se(Bn,function(ir){A(ro,ir)||A(je,ir)||Ur(Xn,ir)}),Xn},Vo=function(Sn){var Bn=Sn===Tn,Xn=$n(Bn?jn:Q(Sn)),ir=[];return Se(Xn,function(Kr){!A(ro,Kr)||Bn&&!A(Tn,Kr)||Ur(ir,ro[Kr])}),ir};if(S||(pn=function(){if(B(ft,this))throw xn("Symbol is not a constructor");var Sn=arguments.length&&arguments[0]!==void 0?I(arguments[0]):void 0,Bn=it(Sn),Xn=function(ir){this===Tn&&g(Xn,jn,ir),A(this,ht)&&A(this[ht],Bn)&&(this[ht][Bn]=!1),at(this,Bn,z(1,ir))};return O&&De&&at(Tn,Bn,{configurable:!0,set:Xn}),en(Bn,Sn)},ye(ft=pn.prototype,"toString",function(){return yn(this).tag}),ye(pn,"withoutSetter",function(Sn){return en(it(Sn),Sn)}),Pe.f=_r,Ie.f=qt,Xe.f=oi,ce.f=Ne.f=_i,Oe.f=Vo,Pt.f=function(Sn){return en(bt(Sn),Sn)},O&&(re(ft,"description",{configurable:!0,get:function(){return yn(this).description}}),w||ye(Tn,"propertyIsEnumerable",_r,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:pn}),Se(q(Ke),function(Sn){Yt(Sn)}),s({target:zt,stat:!0,forced:!S},{for:function(Sn){var Bn=I(Sn);if(A(Co,Bn))return Co[Bn];var Xn=pn(Bn);return Co[Bn]=Xn,Ee[Xn]=Bn,Xn},keyFor:function(Sn){if(!G(Sn))throw xn(Sn+" is not a symbol");if(A(Ee,Sn))return Ee[Sn]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),s({target:"Object",stat:!0,forced:!S,sham:!O},{create:function(Sn,Bn){return Bn===void 0?K(Sn):kn(K(Sn),Bn)},defineProperty:qt,defineProperties:kn,getOwnPropertyDescriptor:oi}),s({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:_i,getOwnPropertySymbols:Vo}),s({target:"Object",stat:!0,forced:P(function(){Oe.f(1)})},{getOwnPropertySymbols:function(Sn){return Oe.f(Y(Sn))}}),mn&&s({target:"JSON",stat:!0,forced:!S||P(function(){var Sn=pn();return mn([Sn])!="[null]"||mn({a:Sn})!="{}"||mn(Object(Sn))!="{}"})},{stringify:function(Sn,Bn,Xn){var ir=le(arguments),Kr=Bn;if((R(Bn)||Sn!==void 0)&&!G(Sn))return k(Bn)||(Bn=function(Rr,fl){if(j(Kr)&&(fl=g(Kr,this,Rr,fl)),!G(fl))return fl}),ir[1]=Bn,h(mn,null,ir)}}),!ft[xt]){var qo=ft.valueOf;ye(ft,xt,function(Sn){return g(qo,this)})}Ce(pn,zt),je[ht]=!0},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(3),g=r(57),b=r(28),w=b("iterator"),O=b("toStringTag"),S=h.values,P=function(k,j){if(k){if(k[w]!==S)try{g(k,w,S)}catch{k[w]=S}if(k[O]||g(k,O,j),c[j]){for(var R in h)if(k[R]!==h[R])try{g(k,R,h[R])}catch{k[R]=h[R]}}}};for(var A in c)P(s[A]&&s[A].prototype,A);P(v,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),v=r(58),h=r(116),g="String Iterator",b=v.set,w=v.getterFor(g);h(String,"String",function(O){b(this,{type:g,string:c(O),index:0})},function(){var O,S=w(this),P=S.string,A=S.index;return A>=P.length?{value:void 0,done:!0}:(O=s(P,A),S.index+=O.length,{value:O,done:!1})})},function(n,o,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),v=r(7),h=r(15),g=r(35),b=r(30),w=r(54),O=r(39),S=r(38).f,P=r(134),A=v.Symbol,k=A&&A.prototype;if(c&&b(A)&&(!("description"in k)||A().description!==void 0)){var j={},R=function(){var I=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),z=w(k,this)?new A(I):I===void 0?A():A(I);return I===""&&(j[z]=!0),z};P(R,A),R.prototype=k,k.constructor=R;var B=String(A("test"))=="Symbol(test)",G=h(k.toString),H=h(k.valueOf),Y=/^Symbol\((.*)\)[^)]+$/,Q=h("".replace),W=h("".slice);S(k,"description",{configurable:!0,get:function(){var I=H(this),z=G(I);if(g(j,I))return"";var K=B?W(z,7,-1):Q(z,Y,"$1");return K===""?void 0:K}}),s({global:!0,forced:!0},{Symbol:R})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return h.a}),r.d(o,"c",function(){return h.e}),r.d(o,"h",function(){return Y}),r.d(o,"i",function(){return B}),r.d(o,"j",function(){return j}),r.d(o,"b",function(){return Xe}),r.d(o,"e",function(){return ye}),r.d(o,"f",function(){return Ie}),r.d(o,"g",function(){return ro});var s,c,v,h=r(0),g=0,b=[],w=h.i.__b,O=h.i.__r,S=h.i.diffed,P=h.i.__c,A=h.i.unmount;function k(Ee,Ke){h.i.__h&&h.i.__h(c,Ee,g||Ke),g=0;var De=c.__H||(c.__H={__:[],__h:[]});return Ee>=De.__.length&&De.__.push({}),De.__[Ee]}function j(Ee){return g=1,R(ce,Ee)}function R(Ee,Ke,De){var at=k(s++,2);return at.t=Ee,at.__c||(at.__=[De?De(Ke):ce(void 0,Ke),function(en){var qt=at.t(at.__[0],en);at.__[0]!==qt&&(at.__=[qt,at.__[1]],at.__c.setState({}))}],at.__c=c),at.__}function B(Ee,Ke){var De=k(s++,3);!h.i.__s&&q(De.__H,Ke)&&(De.__=Ee,De.__H=Ke,c.__H.__h.push(De))}function G(Ee,Ke){var De=k(s++,4);!h.i.__s&&q(De.__H,Ke)&&(De.__=Ee,De.__H=Ke,c.__h.push(De))}function H(Ee,Ke){var De=k(s++,7);return q(De.__H,Ke)&&(De.__=Ee(),De.__H=Ke,De.__h=Ee),De.__}function Y(Ee,Ke){return g=8,H(function(){return Ee},Ke)}function Q(){var Ee;for(b.sort(function(Ke,De){return Ke.__v.__b-De.__v.__b});Ee=b.pop();)if(Ee.__P)try{Ee.__H.__h.forEach(z),Ee.__H.__h.forEach(K),Ee.__H.__h=[]}catch(Ke){Ee.__H.__h=[],h.i.__e(Ke,Ee.__v)}}h.i.__b=function(Ee){c=null,w&&w(Ee)},h.i.__r=function(Ee){O&&O(Ee),s=0;var Ke=(c=Ee.__c).__H;Ke&&(Ke.__h.forEach(z),Ke.__h.forEach(K),Ke.__h=[])},h.i.diffed=function(Ee){S&&S(Ee);var Ke=Ee.__c;Ke&&Ke.__H&&Ke.__H.__h.length&&(b.push(Ke)!==1&&v===h.i.requestAnimationFrame||((v=h.i.requestAnimationFrame)||I)(Q)),c=null},h.i.__c=function(Ee,Ke){Ke.some(function(De){try{De.__h.forEach(z),De.__h=De.__h.filter(function(at){return!at.__||K(at)})}catch(at){Ke.some(function(en){en.__h&&(en.__h=[])}),Ke=[],h.i.__e(at,De.__v)}}),P&&P(Ee,Ke)},h.i.unmount=function(Ee){A&&A(Ee);var Ke,De=Ee.__c;De&&De.__H&&(De.__H.__.forEach(function(at){try{z(at)}catch(en){Ke=en}}),Ke&&h.i.__e(Ke,De.__v))};var W=typeof requestAnimationFrame=="function";function I(Ee){var Ke,De=function(){clearTimeout(at),W&&cancelAnimationFrame(Ke),setTimeout(Ee)},at=setTimeout(De,100);W&&(Ke=requestAnimationFrame(De))}function z(Ee){var Ke=c,De=Ee.__c;typeof De=="function"&&(Ee.__c=void 0,De()),c=Ke}function K(Ee){var Ke=c;Ee.__c=Ee.__(),c=Ke}function q(Ee,Ke){return!Ee||Ee.length!==Ke.length||Ke.some(function(De,at){return De!==Ee[at]})}function ce(Ee,Ke){return typeof Ke=="function"?Ke(Ee):Ke}function Ne(Ee,Ke){for(var De in Ke)Ee[De]=Ke[De];return Ee}function Oe(Ee,Ke){for(var De in Ee)if(De!=="__source"&&!(De in Ke))return!0;for(var at in Ke)if(at!=="__source"&&Ee[at]!==Ke[at])return!0;return!1}function Xe(Ee){this.props=Ee}function Ie(Ee,Ke){function De(en){var qt=this.props.ref,kn=qt==en.ref;return!kn&&qt&&(qt.call?qt(null):qt.current=null),Ke?!Ke(this.props,en)||!kn:Oe(this.props,en)}function at(en){return this.shouldComponentUpdate=De,Object(h.e)(Ee,en)}return at.displayName="Memo("+(Ee.displayName||Ee.name)+")",at.prototype.isReactComponent=!0,at.__f=!0,at}(Xe.prototype=new h.a).isPureReactComponent=!0,Xe.prototype.shouldComponentUpdate=function(Ee,Ke){return Oe(this.props,Ee)||Oe(this.state,Ke)};var Pe=h.i.__b;h.i.__b=function(Ee){Ee.type&&Ee.type.__f&&Ee.ref&&(Ee.props.ref=Ee.ref,Ee.ref=null),Pe&&Pe(Ee)};var le=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ye(Ee){function Ke(De,at){var en=Ne({},De);return delete en.ref,Ee(en,!(at=De.ref||at)||typeof at=="object"&&!("current"in at)?null:at)}return Ke.$$typeof=le,Ke.render=Ke,Ke.prototype.isReactComponent=Ke.__f=!0,Ke.displayName="ForwardRef("+(Ee.displayName||Ee.name)+")",Ke}var Me=function(Ee,Ke){return Ee==null?null:Object(h.k)(Object(h.k)(Ee).map(Ke))},ze={map:Me,forEach:Me,count:function(Ee){return Ee?Object(h.k)(Ee).length:0},only:function(Ee){var Ke=Object(h.k)(Ee);if(Ke.length!==1)throw"Children.only";return Ke[0]},toArray:h.k},je=h.i.__e;h.i.__e=function(Ee,Ke,De){if(Ee.then){for(var at,en=Ke;en=en.__;)if((at=en.__c)&&at.__c)return Ke.__e==null&&(Ke.__e=De.__e,Ke.__k=De.__k),at.__c(Ee,Ke)}je(Ee,Ke,De)};var it=h.i.unmount;function bt(Ee,Ke,De){return Ee&&(Ee.__c&&Ee.__c.__H&&(Ee.__c.__H.__.forEach(function(at){typeof at.__c=="function"&&at.__c()}),Ee.__c.__H=null),(Ee=Ne({},Ee)).__c!=null&&(Ee.__c.__P===De&&(Ee.__c.__P=Ke),Ee.__c=null),Ee.__k=Ee.__k&&Ee.__k.map(function(at){return bt(at,Ke,De)})),Ee}function Pt(Ee,Ke,De){return Ee&&(Ee.__v=null,Ee.__k=Ee.__k&&Ee.__k.map(function(at){return Pt(at,Ke,De)}),Ee.__c&&Ee.__c.__P===Ke&&(Ee.__e&&De.insertBefore(Ee.__e,Ee.__d),Ee.__c.__e=!0,Ee.__c.__P=De)),Ee}function Yt(){this.__u=0,this.t=null,this.__b=null}function Ce(Ee){var Ke=Ee.__.__c;return Ke&&Ke.__e&&Ke.__e(Ee)}function ge(){this.u=null,this.o=null}h.i.unmount=function(Ee){var Ke=Ee.__c;Ke&&Ke.__R&&Ke.__R(),Ke&&Ee.__h===!0&&(Ee.type=null),it&&it(Ee)},(Yt.prototype=new h.a).__c=function(Ee,Ke){var De=Ke.__c,at=this;at.t==null&&(at.t=[]),at.t.push(De);var en=Ce(at.__v),qt=!1,kn=function(){qt||(qt=!0,De.__R=null,en?en(_r):_r())};De.__R=kn;var _r=function(){if(!--at.__u){if(at.state.__e){var _i=at.state.__e;at.__v.__k[0]=Pt(_i,_i.__c.__P,_i.__c.__O)}var Vo;for(at.setState({__e:at.__b=null});Vo=at.t.pop();)Vo.forceUpdate()}},oi=Ke.__h===!0;at.__u++||oi||at.setState({__e:at.__b=at.__v.__k[0]}),Ee.then(kn,kn)},Yt.prototype.componentWillUnmount=function(){this.t=[]},Yt.prototype.render=function(Ee,Ke){if(this.__b){if(this.__v.__k){var De=document.createElement("div"),at=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,De,at.__O=at.__P)}this.__b=null}var en=Ke.__e&&Object(h.e)(h.b,null,Ee.fallback);return en&&(en.__h=null),[Object(h.e)(h.b,null,Ke.__e?null:Ee.children),en]};var Se=function(Ee,Ke,De){if(++De[1]===De[0]&&Ee.o.delete(Ke),Ee.props.revealOrder&&(Ee.props.revealOrder[0]!=="t"||!Ee.o.size))for(De=Ee.u;De;){for(;De.length>3;)De.pop()();if(De[1]<De[0])break;Ee.u=De=De[2]}};function ht(Ee){return this.getChildContext=function(){return Ee.context},Ee.children}function zt(Ee){var Ke=this,De=Ee.i;Ke.componentWillUnmount=function(){Object(h.j)(null,Ke.l),Ke.l=null,Ke.i=null},Ke.i&&Ke.i!==De&&Ke.componentWillUnmount(),Ee.__v?(Ke.l||(Ke.i=De,Ke.l={nodeType:1,parentNode:De,childNodes:[],appendChild:function(at){this.childNodes.push(at),Ke.i.appendChild(at)},insertBefore:function(at,en){this.childNodes.push(at),Ke.i.appendChild(at)},removeChild:function(at){this.childNodes.splice(this.childNodes.indexOf(at)>>>1,1),Ke.i.removeChild(at)}}),Object(h.j)(Object(h.e)(ht,{context:Ke.context},Ee.__v),Ke.l)):Ke.l&&Ke.componentWillUnmount()}(ge.prototype=new h.a).__e=function(Ee){var Ke=this,De=Ce(Ke.__v),at=Ke.o.get(Ee);return at[0]++,function(en){var qt=function(){Ke.props.revealOrder?(at.push(en),Se(Ke,Ee,at)):en()};De?De(qt):qt()}},ge.prototype.render=function(Ee){this.u=null,this.o=new Map;var Ke=Object(h.k)(Ee.children);Ee.revealOrder&&Ee.revealOrder[0]==="b"&&Ke.reverse();for(var De=Ke.length;De--;)this.o.set(Ke[De],this.u=[1,0,this.u]);return Ee.children},ge.prototype.componentDidUpdate=ge.prototype.componentDidMount=function(){var Ee=this;this.o.forEach(function(Ke,De){Se(Ee,De,Ke)})};var xt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=typeof document<"u",Tn=function(Ee){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ee)};h.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ee){Object.defineProperty(h.a.prototype,Ee,{configurable:!0,get:function(){return this["UNSAFE_"+Ee]},set:function(Ke){Object.defineProperty(this,Ee,{configurable:!0,writable:!0,value:Ke})}})});var pn=h.i.event;function ft(){}function xn(){return this.cancelBubble}function Be(){return this.defaultPrevented}h.i.event=function(Ee){return pn&&(Ee=pn(Ee)),Ee.persist=ft,Ee.isPropagationStopped=xn,Ee.isDefaultPrevented=Be,Ee.nativeEvent=Ee};var mn,Kn={configurable:!0,get:function(){return this.class}},re=h.i.vnode;h.i.vnode=function(Ee){var Ke=Ee.type,De=Ee.props,at=De;if(typeof Ke=="string"){var en=Ke.indexOf("-")===-1;for(var qt in at={},De){var kn=De[qt];yn&&qt==="children"&&Ke==="noscript"||qt==="value"&&"defaultValue"in De&&kn==null||(qt==="defaultValue"&&"value"in De&&De.value==null?qt="value":qt==="download"&&kn===!0?kn="":/ondoubleclick/i.test(qt)?qt="ondblclick":/^onchange(textarea|input)/i.test(qt+Ke)&&!Tn(De.type)?qt="oninput":/^onfocus$/i.test(qt)?qt="onfocusin":/^onblur$/i.test(qt)?qt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(qt)?qt=qt.toLowerCase():en&&rn.test(qt)?qt=qt.replace(/[A-Z0-9]/,"-$&").toLowerCase():kn===null&&(kn=void 0),at[qt]=kn)}Ke=="select"&&at.multiple&&Array.isArray(at.value)&&(at.value=Object(h.k)(De.children).forEach(function(_r){_r.props.selected=at.value.indexOf(_r.props.value)!=-1})),Ke=="select"&&at.defaultValue!=null&&(at.value=Object(h.k)(De.children).forEach(function(_r){_r.props.selected=at.multiple?at.defaultValue.indexOf(_r.props.value)!=-1:at.defaultValue==_r.props.value})),Ee.props=at,De.class!=De.className&&(Kn.enumerable="className"in De,De.className!=null&&(at.class=De.className),Object.defineProperty(at,"className",Kn))}Ee.$$typeof=xt,re&&re(Ee)};var $n=h.i.__r;h.i.__r=function(Ee){$n&&$n(Ee),mn=Ee.__c};var xr={ReactCurrentDispatcher:{current:{readContext:function(Ee){return mn.__n[Ee.__c].props.value}}}};function Ur(Ee){return!!Ee&&Ee.$$typeof===xt}var ro=function(Ee,Ke){return Ee(Ke)},jn=h.b,Co={useState:j,useReducer:R,useEffect:B,useLayoutEffect:G,useRef:function(Ee){return g=5,H(function(){return{current:Ee}},[])},useImperativeHandle:function(Ee,Ke,De){g=6,G(function(){typeof Ee=="function"?Ee(Ke()):Ee&&(Ee.current=Ke())},De==null?De:De.concat(Ee))},useMemo:H,useCallback:Y,useContext:function(Ee){var Ke=c.context[Ee.__c],De=k(s++,9);return De.c=Ee,Ke?(De.__==null&&(De.__=!0,Ke.sub(c)),Ke.props.value):Ee.__},useDebugValue:function(Ee,Ke){h.i.useDebugValue&&h.i.useDebugValue(Ke?Ke(Ee):Ee)},version:"17.0.2",Children:ze,render:function(Ee,Ke,De){return Ke.__k==null&&(Ke.textContent=""),Object(h.j)(Ee,Ke),typeof De=="function"&&De(),Ee?Ee.__c:null},hydrate:function(Ee,Ke,De){return Object(h.h)(Ee,Ke),typeof De=="function"&&De(),Ee?Ee.__c:null},unmountComponentAtNode:function(Ee){return!!Ee.__k&&(Object(h.j)(null,Ee),!0)},createPortal:function(Ee,Ke){return Object(h.e)(zt,{__v:Ee,i:Ke})},createElement:h.e,createContext:h.d,createFactory:function(Ee){return h.e.bind(null,Ee)},cloneElement:function(Ee){return Ur(Ee)?h.c.apply(null,arguments):Ee},createRef:h.f,Fragment:h.b,isValidElement:Ur,findDOMNode:function(Ee){return Ee&&(Ee.base||Ee.nodeType===1&&Ee)||null},Component:h.a,PureComponent:Xe,memo:Ie,forwardRef:ye,flushSync:function(Ee,Ke){return Ee(Ke)},unstable_batchedUpdates:ro,StrictMode:jn,Suspense:Yt,SuspenseList:ge,lazy:function(Ee){var Ke,De,at;function en(qt){if(Ke||(Ke=Ee()).then(function(kn){De=kn.default||kn},function(kn){at=kn}),at)throw at;if(!De)throw Ke;return Object(h.e)(De,qt)}return en.displayName="Lazy",en.__f=!0,en},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:xr};o.d=Co},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(187),g=r(57),b=function(O){if(O&&O.forEach!==h)try{g(O,"forEach",h)}catch{O.forEach=h}};for(var w in c)c[w]&&b(s[w]&&s[w].prototype);b(v)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),v=r(40),h=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){h(1)}),sham:!g},{getPrototypeOf:function(b){return h(v(b))}})},function(n,o,r){var s=r(16),c=r(46),v=r(76),h=r(203),g=r(165),b=r(32),w=r(33),O=r(60),S=r(18),P=c("Reflect","construct"),A=Object.prototype,k=[].push,j=S(function(){function G(){}return!(P(function(){},[],G)instanceof G)}),R=!S(function(){P(function(){})}),B=j||R;s({target:"Reflect",stat:!0,forced:B,sham:B},{construct:function(G,H){g(G),b(H);var Y=arguments.length<3?G:g(arguments[2]);if(R&&!j)return P(G,H,Y);if(G==Y){switch(H.length){case 0:return new G;case 1:return new G(H[0]);case 2:return new G(H[0],H[1]);case 3:return new G(H[0],H[1],H[2]);case 4:return new G(H[0],H[1],H[2],H[3])}var Q=[null];return v(k,Q,H),new(v(h,G,Q))}var W=Y.prototype,I=O(w(W)?W:A),z=v(G,I,H);return w(z)?z:I}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(h){return h&&v(c,h)}:function(h){return h&&function(){return c.apply(h,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,v=r(57),h=r(42),g=r(110),b=r(134),w=r(95);n.exports=function(O,S){var P,A,k,j,R,B=O.target,G=O.global,H=O.stat;if(P=G?s:H?s[B]||g(B,{}):(s[B]||{}).prototype)for(A in S){if(j=S[A],k=O.noTargetGet?(R=c(P,A))&&R.value:P[A],!w(G?A:B+(H?".":"#")+A,O.forced)&&k!==void 0){if(typeof j==typeof k)continue;b(j,k)}(O.sham||k&&k.sham)&&v(j,"sham",!0),h(P,A,j,O)}}},function(n,o,r){var s=r(16),c=r(7),v=r(96),h=r(99),g=r(33),b=r(75),w=r(45),O=r(41),S=r(63),P=r(28),A=r(81),k=r(98),j=A("slice"),R=P("species"),B=c.Array,G=Math.max;s({target:"Array",proto:!0,forced:!j},{slice:function(H,Y){var Q,W,I,z=O(this),K=w(z),q=b(H,K),ce=b(Y===void 0?K:Y,K);if(v(z)&&(Q=z.constructor,(h(Q)&&(Q===B||v(Q.prototype))||g(Q)&&(Q=Q[R])===null)&&(Q=void 0),Q===B||Q===void 0))return k(z,q,ce);for(W=new(Q===void 0?B:Q)(G(ce-q,0)),I=0;q<ce;q++,I++)q in z&&S(W,I,z[q]);return W.length=I,W}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(h){return v(c(h))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,v=r(15),h=r(38).f,g=Function.prototype,b=v(g.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=v(w.exec);s&&!c&&h(g,"name",{configurable:!0,get:function(){try{return O(w,b(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),v=r(41),h=r(50).f,g=r(36),b=c(function(){h(1)});s({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(w,O){return h(v(w),O)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),v=r(135),h=r(41),g=r(50),b=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(w){for(var O,S,P=h(w),A=g.f,k=v(P),j={},R=0;k.length>R;)(S=A(P,O=k[R++]))!==void 0&&b(j,O,S);return j}})},,function(n,o,r){var s=r(16),c=r(7),v=r(18),h=r(96),g=r(33),b=r(40),w=r(45),O=r(63),S=r(115),P=r(81),A=r(28),k=r(70),j=A("isConcatSpreadable"),R=9007199254740991,B="Maximum allowed index exceeded",G=c.TypeError,H=k>=51||!v(function(){var W=[];return W[j]=!1,W.concat()[0]!==W}),Y=P("concat"),Q=function(W){if(!g(W))return!1;var I=W[j];return I!==void 0?!!I:h(W)};s({target:"Array",proto:!0,forced:!H||!Y},{concat:function(W){var I,z,K,q,ce,Ne=b(this),Oe=S(Ne,0),Xe=0;for(I=-1,K=arguments.length;I<K;I++)if(Q(ce=I===-1?Ne:arguments[I])){if(Xe+(q=w(ce))>R)throw G(B);for(z=0;z<q;z++,Xe++)z in ce&&O(Oe,Xe,ce[z])}else{if(Xe>=R)throw G(B);O(Oe,Xe++,ce)}return Oe.length=Xe,Oe}})},function(n,o,r){var s=r(7),c=r(89),v=r(35),h=r(90),g=r(108),b=r(132),w=c("wks"),O=s.Symbol,S=O&&O.for,P=b?O:O&&O.withoutSetter||h;n.exports=function(A){if(!v(w,A)||!g&&typeof w[A]!="string"){var k="Symbol."+A;g&&v(O,A)?w[A]=O[A]:w[A]=b&&S?S(k):P(k)}return w[A]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();o.a=v},function(n,o,r){var s=r(7),c=r(33),v=s.String,h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(h,g){return v(c(h),g)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),v=r(133),h=r(32),g=r(86),b=s.TypeError,w=Object.defineProperty;o.f=c?w:function(O,S,P){if(h(O),S=g(S),h(P),v)try{return w(O,S,P)}catch{}if("get"in P||"set"in P)throw b("Accessors not supported");return"value"in P&&(O[S]=P.value),O}},function(n,o,r){var s=r(7),c=r(97),v=s.String;n.exports=function(h){if(c(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(h)}},function(n,o,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(h){return v(c(h))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,o,r){var s=r(7),c=r(30),v=r(35),h=r(57),g=r(110),b=r(92),w=r(58),O=r(73).CONFIGURABLE,S=w.get,P=w.enforce,A=String(String).split("String");(n.exports=function(k,j,R,B){var G,H=!!B&&!!B.unsafe,Y=!!B&&!!B.enumerable,Q=!!B&&!!B.noTargetGet,W=B&&B.name!==void 0?B.name:j;c(R)&&(String(W).slice(0,7)==="Symbol("&&(W="["+String(W).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(R,"name")||O&&R.name!==W)&&h(R,"name",W),(G=P(R)).source||(G.source=A.join(typeof W=="string"?W:""))),k!==s?(H?!Q&&k[j]&&(Y=!0):delete k[j],Y?k[j]=R:h(k,j,R)):Y?k[j]=R:g(j,R)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||b(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return h}),r.d(o,"c",function(){return g}),r.d(o,"b",function(){return b}),r.d(o,"a",function(){return O});var c=r(10),v=function(S,P){var A=typeof Symbol=="function"&&S[Symbol.iterator];if(!A)return S;var k,j,R=A.call(S),B=[];try{for(;(P===void 0||P-- >0)&&!(k=R.next()).done;)B.push(k.value)}catch(G){j={error:G}}finally{try{k&&!k.done&&(A=R.return)&&A.call(R)}finally{if(j)throw j.error}}return B};function h(){var S=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){S(function(P){return P+1})},[])}function g(S){if(!S||typeof S!="object")return!1;var P=Object.getPrototypeOf(S);return!P||P===Object.prototype}function b(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var w={};function O(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:w}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),v=function(h){return c(h)?h:void 0};n.exports=function(h,g){return arguments.length<2?v(s[h]):s[h]&&s[h][g]}},function(n,o,r){var s=r(16),c=r(34),v=r(33),h=r(32),g=r(204),b=r(50),w=r(101);s({target:"Reflect",stat:!0},{get:function O(S,P){var A,k,j=arguments.length<3?S:arguments[2];return h(S)===j?S[P]:(A=b.f(S,P))?g(A)?A.value:A.get===void 0?void 0:c(A.get,j):v(k=w(S))?O(k,P,j):void 0}})},function(n,o,r){(function(s){var c=r(31),v=r(171),h=t&&!t.nodeType&&t,g=h&&typeof s=="object"&&s&&!s.nodeType&&s,b=g&&g.exports===h?c.a.Buffer:void 0,w=(b?b.isBuffer:void 0)||v.a;o.a=w}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v&&c.a.process,b=function(){try{var w=h&&h.require&&h.require("util").types;return w||g&&g.binding&&g.binding("util")}catch{}}();o.a=b}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),v=r(84),h=r(69),g=r(41),b=r(86),w=r(35),O=r(133),S=Object.getOwnPropertyDescriptor;o.f=s?S:function(P,A){if(P=g(P),A=b(A),O)try{return S(P,A)}catch{}if(w(P,A))return h(!c(v.f,P,A),P[A])}},function(n,o,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(h){return v(c(h),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(h,g,b){return c.f(h,g,v(1,b))}:function(h,g,b){return h[g]=b,h}},function(n,o,r){var s,c,v,h=r(175),g=r(7),b=r(15),w=r(33),O=r(57),S=r(35),P=r(109),A=r(93),k=r(72),j="Object already initialized",R=g.TypeError,B=g.WeakMap;if(h||P.state){var G=P.state||(P.state=new B),H=b(G.get),Y=b(G.has),Q=b(G.set);s=function(I,z){if(Y(G,I))throw new R(j);return z.facade=I,Q(G,I,z),z},c=function(I){return H(G,I)||{}},v=function(I){return Y(G,I)}}else{var W=A("state");k[W]=!0,s=function(I,z){if(S(I,W))throw new R(j);return z.facade=I,O(I,W,z),z},c=function(I){return S(I,W)?I[W]:{}},v=function(I){return S(I,W)}}n.exports={set:s,get:c,has:v,enforce:function(I){return v(I)?c(I):s(I,{})},getterFor:function(I){return function(z){var K;if(!w(z)||(K=c(z)).type!==I)throw R("Incompatible receiver, "+I+" required");return K}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,o,r){var s,c=r(32),v=r(176),h=r(111),g=r(72),b=r(138),w=r(91),O=r(93),S=O("IE_PROTO"),P=function(){},A=function(R){return"<script>"+R+"<\/script>"},k=function(R){R.write(A("")),R.close();var B=R.parentWindow.Object;return R=null,B},j=function(){try{s=new ActiveXObject("htmlfile")}catch{}var R,B;j=typeof document<"u"?document.domain&&s?k(s):((B=w("iframe")).style.display="none",b.appendChild(B),B.src="javascript:",(R=B.contentWindow.document).open(),R.write(A("document.F=Object")),R.close(),R.F):k(s);for(var G=h.length;G--;)delete j.prototype[h[G]];return j()};g[S]=!0,n.exports=Object.create||function(R,B){var G;return R!==null?(P.prototype=c(R),G=new P,P.prototype=null,G[S]=R):G=j(),B===void 0?G:v(G,B)}},function(n,o,r){var s=r(36),c=r(7),v=r(15),h=r(95),g=r(42),b=r(35),w=r(148),O=r(54),S=r(87),P=r(131),A=r(18),k=r(74).f,j=r(50).f,R=r(38).f,B=r(160),G=r(161).trim,H="Number",Y=c.Number,Q=Y.prototype,W=c.TypeError,I=v("".slice),z=v("".charCodeAt),K=function(Ie){var Pe=P(Ie,"number");return typeof Pe=="bigint"?Pe:q(Pe)},q=function(Ie){var Pe,le,ye,Me,ze,je,it,bt,Pt=P(Ie,"number");if(S(Pt))throw W("Cannot convert a Symbol value to a number");if(typeof Pt=="string"&&Pt.length>2){if(Pt=G(Pt),(Pe=z(Pt,0))===43||Pe===45){if((le=z(Pt,2))===88||le===120)return NaN}else if(Pe===48){switch(z(Pt,1)){case 66:case 98:ye=2,Me=49;break;case 79:case 111:ye=8,Me=55;break;default:return+Pt}for(je=(ze=I(Pt,2)).length,it=0;it<je;it++)if((bt=z(ze,it))<48||bt>Me)return NaN;return parseInt(ze,ye)}}return+Pt};if(h(H,!Y(" 0o1")||!Y("0b1")||Y("+0x1"))){for(var ce,Ne=function(Ie){var Pe=arguments.length<1?0:Y(K(Ie)),le=this;return O(Q,le)&&A(function(){B(le)})?w(Object(Pe),le,Ne):Pe},Oe=s?k(Y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Xe=0;Oe.length>Xe;Xe++)b(Y,ce=Oe[Xe])&&!b(Ne,ce)&&R(Ne,ce,j(Y,ce));Ne.prototype=Q,Q.constructor=Ne,g(c,H,Ne)}},function(n,o,r){var s=r(56);n.exports=function(c,v){var h=c[v];return h==null?void 0:s(h)}},function(n,o,r){var s=r(86),c=r(38),v=r(69);n.exports=function(h,g,b){var w=s(g);w in h?c.f(h,w,v(0,b)):h[w]=b}},function(n,o,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(h,g){return c(h),g===void 0?h:v?v(h,g):function(){return h.apply(g,arguments)}}},function(n,o,r){var s=r(16),c=r(15),v=r(85),h=r(41),g=r(121),b=c([].join),w=v!=Object,O=g("join",",");s({target:"Array",proto:!0,forced:w||!O},{join:function(S){return b(h(this),S===void 0?",":S)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,v=r(42),h=r(32),g=r(54),b=r(39),w=r(18),O=r(154),S="toString",P=RegExp.prototype,A=P.toString,k=s(O),j=w(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),R=c&&A.name!=S;(j||R)&&v(RegExp.prototype,S,function(){var B=h(this),G=b(B.source),H=B.flags;return"/"+G+"/"+b(H===void 0&&g(P,B)&&!("flags"in P)?k(B):H)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,v=r(7),h=r(55),g=v.process,b=v.Deno,w=g&&g.versions||b&&b.version,O=w&&w.v8;O&&(c=(s=O.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&h&&(!(s=h.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=h.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),v=Function.prototype,h=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),b=g&&(function(){}).name==="something",w=g&&(!s||s&&h(v,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:w}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,o,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(h,g){var b=s(h);return b<0?c(b+g,0):v(b,g)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,o,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(h,g,b){h&&!c(h=b?h:h.prototype,v)&&s(h,v,{configurable:!0,value:g})}},function(n,o,r){var s=r(64),c=r(15),v=r(85),h=r(40),g=r(45),b=r(115),w=c([].push),O=function(S){var P=S==1,A=S==2,k=S==3,j=S==4,R=S==6,B=S==7,G=S==5||R;return function(H,Y,Q,W){for(var I,z,K=h(H),q=v(K),ce=s(Y,Q),Ne=g(q),Oe=0,Xe=W||b,Ie=P?Xe(H,Ne):A||B?Xe(H,0):void 0;Ne>Oe;Oe++)if((G||Oe in q)&&(z=ce(I=q[Oe],Oe,K),S))if(P)Ie[Oe]=z;else if(z)switch(S){case 3:return!0;case 5:return I;case 6:return Oe;case 2:w(Ie,I)}else switch(S){case 4:return!1;case 7:w(Ie,I)}return R?-1:k||j?j:Ie}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),v=r(70),h=c("species");n.exports=function(g){return v>=51||!s(function(){var b=[];return(b.constructor={})[h]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(159),b=r(32),w=r(44),O=r(164),S=r(124),P=r(94),A=r(39),k=r(62),j=r(114),R=r(125),B=r(103),G=r(155),H=r(18),Y=G.UNSUPPORTED_Y,Q=4294967295,W=Math.min,I=[].push,z=v(/./.exec),K=v(I),q=v("".slice),ce=!H(function(){var Ne=/(?:)/,Oe=Ne.exec;Ne.exec=function(){return Oe.apply(this,arguments)};var Xe="ab".split(Ne);return Xe.length!==2||Xe[0]!=="a"||Xe[1]!=="b"});h("split",function(Ne,Oe,Xe){var Ie;return Ie="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Pe,le){var ye=A(w(this)),Me=le===void 0?Q:le>>>0;if(Me===0)return[];if(Pe===void 0)return[ye];if(!g(Pe))return c(Oe,ye,Pe,Me);for(var ze,je,it,bt=[],Pt=(Pe.ignoreCase?"i":"")+(Pe.multiline?"m":"")+(Pe.unicode?"u":"")+(Pe.sticky?"y":""),Yt=0,Ce=new RegExp(Pe.source,Pt+"g");(ze=c(B,Ce,ye))&&!((je=Ce.lastIndex)>Yt&&(K(bt,q(ye,Yt,ze.index)),ze.length>1&&ze.index<ye.length&&s(I,bt,j(ze,1)),it=ze[0].length,Yt=je,bt.length>=Me));)Ce.lastIndex===ze.index&&Ce.lastIndex++;return Yt===ye.length?!it&&z(Ce,"")||K(bt,""):K(bt,q(ye,Yt)),bt.length>Me?j(bt,0,Me):bt}:"0".split(void 0,0).length?function(Pe,le){return Pe===void 0&&le===0?[]:c(Oe,this,Pe,le)}:Oe,[function(Pe,le){var ye=w(this),Me=Pe==null?void 0:k(Pe,Ne);return Me?c(Me,Pe,ye,le):c(Ie,A(ye),Pe,le)},function(Pe,le){var ye=b(this),Me=A(Pe),ze=Xe(Ie,ye,Me,le,Ie!==Oe);if(ze.done)return ze.value;var je=O(ye,RegExp),it=ye.unicode,bt=(ye.ignoreCase?"i":"")+(ye.multiline?"m":"")+(ye.unicode?"u":"")+(Y?"g":"y"),Pt=new je(Y?"^(?:"+ye.source+")":ye,bt),Yt=le===void 0?Q:le>>>0;if(Yt===0)return[];if(Me.length===0)return R(Pt,Me)===null?[Me]:[];for(var Ce=0,ge=0,Se=[];ge<Me.length;){Pt.lastIndex=Y?0:ge;var ht,zt=R(Pt,Y?q(Me,ge):Me);if(zt===null||(ht=W(P(Pt.lastIndex+(Y?ge:0)),Me.length))===Ce)ge=S(Me,ge,it);else{if(K(Se,q(Me,Ce,ge)),Se.length===Yt)return Se;for(var xt=1;xt<=zt.length-1;xt++)if(K(Se,zt[xt]),Se.length===Yt)return Se;ge=Ce=ht}}return K(Se,q(Me,Ce)),Se}]},!ce,Y)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);o.f=v?function(h){var g=c(this,h);return!!g&&g.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),v=r(18),h=r(51),g=s.Object,b=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(w){return h(w)=="String"?b(w,""):g(w)}:g},function(n,o,r){var s=r(131),c=r(87);n.exports=function(v){var h=s(v,"string");return c(h)?h:h+""}},function(n,o,r){var s=r(7),c=r(46),v=r(30),h=r(54),g=r(132),b=s.Object;n.exports=g?function(w){return typeof w=="symbol"}:function(w){var O=c("Symbol");return v(O)&&h(O.prototype,b(w))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(v,h){return c[v]||(c[v]=h!==void 0?h:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,v=Math.random(),h=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+h(++c+v,36)}},function(n,o,r){var s=r(7),c=r(33),v=s.document,h=c(v)&&c(v.createElement);n.exports=function(g){return h?v.createElement(g):{}}},function(n,o,r){var s=r(15),c=r(30),v=r(109),h=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return h(g)}),n.exports=v.inspectSource},function(n,o,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(h){return v[h]||(v[h]=c(h))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),v=/#|\.prototype\./,h=function(S,P){var A=b[g(S)];return A==O||A!=w&&(c(P)?s(P):!!P)},g=h.normalize=function(S){return String(S).replace(v,".").toLowerCase()},b=h.data={},w=h.NATIVE="N",O=h.POLYFILL="P";n.exports=h},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),v=r(30),h=r(51),g=r(28)("toStringTag"),b=s.Object,w=h(function(){return arguments}())=="Arguments";n.exports=c?h:function(O){var S,P,A;return O===void 0?"Undefined":O===null?"Null":typeof(P=function(k,j){try{return k[j]}catch{}}(S=b(O),g))=="string"?P:w?h(S):(A=h(S))=="Object"&&v(S.callee)?"Arguments":A}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),v=r(30),h=r(97),g=r(46),b=r(92),w=function(){},O=[],S=g("Reflect","construct"),P=/^\s*(?:class|function)\b/,A=s(P.exec),k=!P.exec(w),j=function(R){if(!v(R))return!1;try{return S(w,O,R),!0}catch{return!1}};n.exports=!S||c(function(){var R;return j(j.call)||!j(Object)||!j(function(){R=!0})||R})?function(R){if(!v(R))return!1;switch(h(R)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return k||!!A(P,b(R))}:j},function(n,o,r){var s=r(28),c=r(60),v=r(38),h=s("unscopables"),g=Array.prototype;g[h]==null&&v.f(g,h,{configurable:!0,value:c(null)}),n.exports=function(b){g[h][b]=!0}},function(n,o,r){var s=r(7),c=r(35),v=r(30),h=r(40),g=r(93),b=r(143),w=g("IE_PROTO"),O=s.Object,S=O.prototype;n.exports=b?O.getPrototypeOf:function(P){var A=h(P);if(c(A,w))return A[w];var k=A.constructor;return v(k)&&A instanceof k?k.prototype:A instanceof O?S:null}},function(n,o,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,g=!1,b={};try{(h=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(w,O){return c(w),v(O),g?h(w,O):w.__proto__=O,w}}():void 0)},function(n,o,r){var s,c,v=r(34),h=r(15),g=r(39),b=r(154),w=r(155),O=r(89),S=r(60),P=r(58).get,A=r(190),k=r(191),j=O("native-string-replace",String.prototype.replace),R=RegExp.prototype.exec,B=R,G=h("".charAt),H=h("".indexOf),Y=h("".replace),Q=h("".slice),W=(c=/b*/g,v(R,s=/a/,"a"),v(R,c,"a"),s.lastIndex!==0||c.lastIndex!==0),I=w.BROKEN_CARET,z=/()??/.exec("")[1]!==void 0;(W||z||I||A||k)&&(B=function(K){var q,ce,Ne,Oe,Xe,Ie,Pe,le=this,ye=P(le),Me=g(K),ze=ye.raw;if(ze)return ze.lastIndex=le.lastIndex,q=v(B,ze,Me),le.lastIndex=ze.lastIndex,q;var je=ye.groups,it=I&&le.sticky,bt=v(b,le),Pt=le.source,Yt=0,Ce=Me;if(it&&(bt=Y(bt,"y",""),H(bt,"g")===-1&&(bt+="g"),Ce=Q(Me,le.lastIndex),le.lastIndex>0&&(!le.multiline||le.multiline&&G(Me,le.lastIndex-1)!==`
`)&&(Pt="(?: "+Pt+")",Ce=" "+Ce,Yt++),ce=new RegExp("^(?:"+Pt+")",bt)),z&&(ce=new RegExp("^"+Pt+"$(?!\\s)",bt)),W&&(Ne=le.lastIndex),Oe=v(R,it?ce:le,Ce),it?Oe?(Oe.input=Q(Oe.input,Yt),Oe[0]=Q(Oe[0],Yt),Oe.index=le.lastIndex,le.lastIndex+=Oe[0].length):le.lastIndex=0:W&&Oe&&(le.lastIndex=le.global?Oe.index+Oe[0].length:Ne),z&&Oe&&Oe.length>1&&v(j,Oe[0],ce,function(){for(Xe=1;Xe<arguments.length-2;Xe++)arguments[Xe]===void 0&&(Oe[Xe]=void 0)}),Oe&&je)for(Oe.groups=Ie=S(null),Xe=0;Xe<je.length;Xe++)Ie[(Pe=je[Xe])[0]]=Oe[Pe[1]];return Oe}),n.exports=B},function(n,o,r){var s=r(16),c=r(7),v=r(75),h=r(59),g=r(45),b=r(40),w=r(115),O=r(63),S=r(81)("splice"),P=c.TypeError,A=Math.max,k=Math.min,j=9007199254740991,R="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!S},{splice:function(B,G){var H,Y,Q,W,I,z,K=b(this),q=g(K),ce=v(B,q),Ne=arguments.length;if(Ne===0?H=Y=0:Ne===1?(H=0,Y=q-ce):(H=Ne-2,Y=k(A(h(G),0),q-ce)),q+H-Y>j)throw P(R);for(Q=w(K,Y),W=0;W<Y;W++)(I=ce+W)in K&&O(Q,W,K[I]);if(Q.length=Y,H<Y){for(W=ce;W<q-Y;W++)z=W+H,(I=W+Y)in K?K[z]=K[I]:delete K[z];for(W=q;W>q-Y+H;W--)delete K[W-1]}else if(H>Y)for(W=q-Y;W>ce;W--)z=W+H-1,(I=W+Y-1)in K?K[z]=K[I]:delete K[z];for(W=0;W<H;W++)K[W+ce]=arguments[W+2];return K.length=q-Y+H,Q}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;o.a=function(w,O){if(O)return w.slice();var S=w.length,P=b?b(S):new w.constructor(S);return w.copy(P),P}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),v="__core-js_shared__",h=s[v]||c(v,{});n.exports=h},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,h){try{c(s,v,{value:h,configurable:!0,writable:!0})}catch{s[v]=h}return h}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),v=r(45),h=r(63),g=s.Array,b=Math.max;n.exports=function(w,O,S){for(var P=v(w),A=c(O,P),k=c(S===void 0?P:S,P),j=g(b(k-A,0)),R=0;A<k;A++,R++)h(j,R,w[A]);return j.length=R,j}},function(n,o,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,o,r){var s=r(16),c=r(34),v=r(71),h=r(73),g=r(30),b=r(180),w=r(101),O=r(102),S=r(78),P=r(57),A=r(42),k=r(28),j=r(80),R=r(142),B=h.PROPER,G=h.CONFIGURABLE,H=R.IteratorPrototype,Y=R.BUGGY_SAFARI_ITERATORS,Q=k("iterator"),W="keys",I="values",z="entries",K=function(){return this};n.exports=function(q,ce,Ne,Oe,Xe,Ie,Pe){b(Ne,ce,Oe);var le,ye,Me,ze=function(ge){if(ge===Xe&&Yt)return Yt;if(!Y&&ge in bt)return bt[ge];switch(ge){case W:case I:case z:return function(){return new Ne(this,ge)}}return function(){return new Ne(this)}},je=ce+" Iterator",it=!1,bt=q.prototype,Pt=bt[Q]||bt["@@iterator"]||Xe&&bt[Xe],Yt=!Y&&Pt||ze(Xe),Ce=ce=="Array"&&bt.entries||Pt;if(Ce&&(le=w(Ce.call(new q)))!==Object.prototype&&le.next&&(v||w(le)===H||(O?O(le,H):g(le[Q])||A(le,Q,K)),S(le,je,!0,!0),v&&(j[je]=K)),B&&Xe==I&&Pt&&Pt.name!==I&&(!v&&G?P(bt,"name",I):(it=!0,Yt=function(){return c(Pt,this)})),Xe)if(ye={values:ze(I),keys:Ie?Yt:ze(W),entries:ze(z)},Pe)for(Me in ye)(Y||it||!(Me in bt))&&A(bt,Me,ye[Me]);else s({target:ce,proto:!0,forced:Y||it},ye);return v&&!Pe||bt[Q]===Yt||A(bt,Q,Yt,{name:Xe}),j[ce]=Yt,ye}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(32),g=r(88),b=r(145),w=r(45),O=r(54),S=r(146),P=r(118),A=r(147),k=s.TypeError,j=function(B,G){this.stopped=B,this.result=G},R=j.prototype;n.exports=function(B,G,H){var Y,Q,W,I,z,K,q,ce=H&&H.that,Ne=!(!H||!H.AS_ENTRIES),Oe=!(!H||!H.IS_ITERATOR),Xe=!(!H||!H.INTERRUPTED),Ie=c(G,ce),Pe=function(ye){return Y&&A(Y,"normal",ye),new j(!0,ye)},le=function(ye){return Ne?(h(ye),Xe?Ie(ye[0],ye[1],Pe):Ie(ye[0],ye[1])):Xe?Ie(ye,Pe):Ie(ye)};if(Oe)Y=B;else{if(!(Q=P(B)))throw k(g(B)+" is not iterable");if(b(Q)){for(W=0,I=w(B);I>W;W++)if((z=le(B[W]))&&O(R,z))return z;return new j(!1)}Y=S(B,Q)}for(K=Y.next;!(q=v(K,Y)).done;){try{z=le(q.value)}catch(ye){A(Y,"throw",ye)}if(typeof z=="object"&&z&&O(R,z))return z}return new j(!1)}},function(n,o,r){var s=r(97),c=r(62),v=r(80),h=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,h)||c(g,"@@iterator")||v[s(g)]}},function(n,o,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(h,g){if(c(g,h))return h;throw v("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var v=0,h={next:function(){return{done:!!v++}},return:function(){c=!0}};h[s]=function(){return this},Array.from(h,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var w=!1;try{var O={};O[s]=function(){return{next:function(){return{done:w=!0}}}},g(O)}catch{}return w}},function(n,o,r){var s=r(18);n.exports=function(c,v){var h=[][c];return!!h&&s(function(){h.call(null,v||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),v=r(103),h=r(18),g=r(28),b=r(57),w=g("species"),O=RegExp.prototype;n.exports=function(S,P,A,k){var j=g(S),R=!h(function(){var Y={};return Y[j]=function(){return 7},""[S](Y)!=7}),B=R&&!h(function(){var Y=!1,Q=/a/;return S==="split"&&((Q={}).constructor={},Q.constructor[w]=function(){return Q},Q.flags="",Q[j]=/./[j]),Q.exec=function(){return Y=!0,null},Q[j](""),!Y});if(!R||!B||A){var G=s(/./[j]),H=P(j,""[S],function(Y,Q,W,I,z){var K=s(Y),q=Q.exec;return q===v||q===O.exec?R&&!z?{done:!0,value:G(Q,W,I)}:{done:!0,value:K(W,Q,I)}:{done:!1}});c(String.prototype,S,H[0]),c(O,j,H[1])}k&&b(O[j],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,v,h){return v+(h?s(c,v).length:1)}},function(n,o,r){var s=r(7),c=r(34),v=r(32),h=r(30),g=r(51),b=r(103),w=s.TypeError;n.exports=function(O,S){var P=O.exec;if(h(P)){var A=c(P,O,S);return A!==null&&v(A),A}if(g(O)==="RegExp")return c(b,O,S);throw w("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(18),b=r(32),w=r(30),O=r(59),S=r(94),P=r(39),A=r(44),k=r(124),j=r(62),R=r(201),B=r(125),G=r(28)("replace"),H=Math.max,Y=Math.min,Q=v([].concat),W=v([].push),I=v("".indexOf),z=v("".slice),K="a".replace(/./,"$0")==="$0",q=!!/./[G]&&/./[G]("a","$0")==="";h("replace",function(ce,Ne,Oe){var Xe=q?"$":"$0";return[function(Ie,Pe){var le=A(this),ye=Ie==null?void 0:j(Ie,G);return ye?c(ye,Ie,le,Pe):c(Ne,P(le),Ie,Pe)},function(Ie,Pe){var le=b(this),ye=P(Ie);if(typeof Pe=="string"&&I(Pe,Xe)===-1&&I(Pe,"$<")===-1){var Me=Oe(Ne,le,ye,Pe);if(Me.done)return Me.value}var ze=w(Pe);ze||(Pe=P(Pe));var je=le.global;if(je){var it=le.unicode;le.lastIndex=0}for(var bt=[];;){var Pt=B(le,ye);if(Pt===null||(W(bt,Pt),!je))break;P(Pt[0])===""&&(le.lastIndex=k(ye,S(le.lastIndex),it))}for(var Yt,Ce="",ge=0,Se=0;Se<bt.length;Se++){for(var ht=P((Pt=bt[Se])[0]),zt=H(Y(O(Pt.index),ye.length),0),xt=[],rn=1;rn<Pt.length;rn++)W(xt,(Yt=Pt[rn])===void 0?Yt:String(Yt));var yn=Pt.groups;if(ze){var Tn=Q([ht],xt,zt,ye);yn!==void 0&&W(Tn,yn);var pn=P(s(Pe,void 0,Tn))}else pn=R(ht,ye,zt,xt,yn,Pe);zt>=ge&&(Ce+=z(ye,ge,zt)+pn,ge=zt+ht.length)}return Ce+z(ye,ge)}]},!!g(function(){var ce=/./;return ce.exec=function(){var Ne=[];return Ne.groups={a:"7"},Ne},"".replace(ce,"$<a>")!=="7"})||!K||q)},function(n,o,r){var s=r(16),c=Math.hypot,v=Math.abs,h=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var w,O,S=0,P=0,A=arguments.length,k=0;P<A;)k<(w=v(arguments[P++]))?(S=S*(O=k/w)*O+1,k=w):S+=w>0?(O=w/k)*O:w;return k===1/0?1/0:k*h(S)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var h,g="Expected a function",b="__lodash_hash_undefined__",w="__lodash_placeholder__",O=16,S=32,P=64,A=128,k=256,j=1/0,R=9007199254740991,B=NaN,G=4294967295,H=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",S],["partialRight",P],["rearg",k]],Y="[object Arguments]",Q="[object Array]",W="[object Boolean]",I="[object Date]",z="[object Error]",K="[object Function]",q="[object GeneratorFunction]",ce="[object Map]",Ne="[object Number]",Oe="[object Object]",Xe="[object Promise]",Ie="[object RegExp]",Pe="[object Set]",le="[object String]",ye="[object Symbol]",Me="[object WeakMap]",ze="[object ArrayBuffer]",je="[object DataView]",it="[object Float32Array]",bt="[object Float64Array]",Pt="[object Int8Array]",Yt="[object Int16Array]",Ce="[object Int32Array]",ge="[object Uint8Array]",Se="[object Uint8ClampedArray]",ht="[object Uint16Array]",zt="[object Uint32Array]",xt=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,ft=RegExp(Tn.source),xn=RegExp(pn.source),Be=/<%-([\s\S]+?)%>/g,mn=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/,xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/[\\^$.*+?()[\]{}|]/g,ro=RegExp(Ur.source),jn=/^\s+/,Co=/\s/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ke=/\{\n\/\* \[wrapped with (.+)\] \*/,De=/,? & /,at=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,kn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,oi=/^[-+]0x[0-9a-f]+$/i,_i=/^0b[01]+$/i,Vo=/^\[object .+?Constructor\]$/,qo=/^0o[0-7]+$/i,Sn=/^(?:0|[1-9]\d*)$/,Bn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xn=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,Kr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rr="\\u2700-\\u27bf",fl="a-z\\xdf-\\xf6\\xf8-\\xff",Va="A-Z\\xc0-\\xd6\\xd8-\\xde",dl="\\ufe0e\\ufe0f",lu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zd="['’]",mc="[\\ud800-\\udfff]",da="["+lu+"]",Wu="["+Kr+"]",Pn="\\d+",Cf="[\\u2700-\\u27bf]",yo="["+fl+"]",gc="[^\\ud800-\\udfff"+lu+Pn+Rr+fl+Va+"]",qi="\\ud83c[\\udffb-\\udfff]",ta="[^\\ud800-\\udfff]",Es="(?:\\ud83c[\\udde6-\\uddff]){2}",Aa="[\\ud800-\\udbff][\\udc00-\\udfff]",pa="["+Va+"]",Ta="(?:"+yo+"|"+gc+")",bc="(?:"+pa+"|"+gc+")",_c="(?:['’](?:d|ll|m|re|s|t|ve))?",jf="(?:['’](?:D|LL|M|RE|S|T|VE))?",zu="(?:"+Wu+"|"+qi+")?",If="[\\ufe0e\\ufe0f]?",wc=If+zu+("(?:\\u200d(?:"+[ta,Es,Aa].join("|")+")"+If+zu+")*"),Hd="(?:"+[Cf,Es,Aa].join("|")+")"+wc,Cl="(?:"+[ta+Wu+"?",Wu,Es,Aa,mc].join("|")+")",Lf=RegExp(zd,"g"),pl=RegExp(Wu,"g"),Ec=RegExp(qi+"(?="+qi+")|"+Cl+wc,"g"),Os=RegExp([pa+"?"+yo+"+"+_c+"(?="+[da,pa,"$"].join("|")+")",bc+"+"+jf+"(?="+[da,pa+Ta,"$"].join("|")+")",pa+"?"+Ta+"+"+_c,pa+"+"+jf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,Hd].join("|"),"g"),Oc=RegExp("[\\u200d\\ud800-\\udfff"+Kr+dl+"]"),xc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ff=-1,Wr={};Wr[it]=Wr[bt]=Wr[Pt]=Wr[Yt]=Wr[Ce]=Wr[ge]=Wr[Se]=Wr[ht]=Wr[zt]=!0,Wr[Y]=Wr[Q]=Wr[ze]=Wr[W]=Wr[je]=Wr[I]=Wr[z]=Wr[K]=Wr[ce]=Wr[Ne]=Wr[Oe]=Wr[Ie]=Wr[Pe]=Wr[le]=Wr[Me]=!1;var Vr={};Vr[Y]=Vr[Q]=Vr[ze]=Vr[je]=Vr[W]=Vr[I]=Vr[it]=Vr[bt]=Vr[Pt]=Vr[Yt]=Vr[Ce]=Vr[ce]=Vr[Ne]=Vr[Oe]=Vr[Ie]=Vr[Pe]=Vr[le]=Vr[ye]=Vr[ge]=Vr[Se]=Vr[ht]=Vr[zt]=!0,Vr[z]=Vr[K]=Vr[Me]=!1;var $f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uu=parseFloat,ha=parseInt,xs=typeof s=="object"&&s&&s.Object===Object&&s,Bf=typeof self=="object"&&self&&self.Object===Object&&self,jo=xs||Bf||Function("return this")(),jl=o&&!o.nodeType&&o,Il=jl&&typeof c=="object"&&c&&!c.nodeType&&c,Ss=Il&&Il.exports===jl,su=Ss&&xs.process,wi=function(){try{var ut=Il&&Il.require&&Il.require("util").types;return ut||su&&su.binding&&su.binding("util")}catch{}}(),Sc=wi&&wi.isArrayBuffer,Uf=wi&&wi.isDate,Ac=wi&&wi.isMap,ji=wi&&wi.isRegExp,ii=wi&&wi.isSet,na=wi&&wi.isTypedArray;function oo(ut,jt,$t){switch($t.length){case 0:return ut.call(jt);case 1:return ut.call(jt,$t[0]);case 2:return ut.call(jt,$t[0],$t[1]);case 3:return ut.call(jt,$t[0],$t[1],$t[2])}return ut.apply(jt,$t)}function Vf(ut,jt,$t,fn){for(var ur=-1,Mr=ut==null?0:ut.length;++ur<Mr;){var po=ut[ur];jt(fn,po,$t(po),ut)}return fn}function Ii(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn&&jt(ut[$t],$t,ut)!==!1;);return ut}function Tc(ut,jt){for(var $t=ut==null?0:ut.length;$t--&&jt(ut[$t],$t,ut)!==!1;);return ut}function Gf(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn;)if(!jt(ut[$t],$t,ut))return!1;return!0}function Li(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length,ur=0,Mr=[];++$t<fn;){var po=ut[$t];jt(po,$t,ut)&&(Mr[ur++]=po)}return Mr}function ki(ut,jt){return!!(ut!=null&&ut.length)&&cu(ut,jt,0)>-1}function Mc(ut,jt,$t){for(var fn=-1,ur=ut==null?0:ut.length;++fn<ur;)if($t(jt,ut[fn]))return!0;return!1}function Lr(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length,ur=Array(fn);++$t<fn;)ur[$t]=jt(ut[$t],$t,ut);return ur}function ai(ut,jt){for(var $t=-1,fn=jt.length,ur=ut.length;++$t<fn;)ut[ur+$t]=jt[$t];return ut}function As(ut,jt,$t,fn){var ur=-1,Mr=ut==null?0:ut.length;for(fn&&Mr&&($t=ut[++ur]);++ur<Mr;)$t=jt($t,ut[ur],ur,ut);return $t}function Wf(ut,jt,$t,fn){var ur=ut==null?0:ut.length;for(fn&&ur&&($t=ut[--ur]);ur--;)$t=jt($t,ut[ur],ur,ut);return $t}function Pc(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn;)if(jt(ut[$t],$t,ut))return!0;return!1}var Ts=$i("length");function Ga(ut,jt,$t){var fn;return $t(ut,function(ur,Mr,po){if(jt(ur,Mr,po))return fn=Mr,!1}),fn}function Fi(ut,jt,$t,fn){for(var ur=ut.length,Mr=$t+(fn?1:-1);fn?Mr--:++Mr<ur;)if(jt(ut[Mr],Mr,ut))return Mr;return-1}function cu(ut,jt,$t){return jt==jt?function(fn,ur,Mr){for(var po=Mr-1,T=fn.length;++po<T;)if(fn[po]===ur)return po;return-1}(ut,jt,$t):Fi(ut,va,$t)}function Ki(ut,jt,$t,fn){for(var ur=$t-1,Mr=ut.length;++ur<Mr;)if(fn(ut[ur],jt))return ur;return-1}function va(ut){return ut!=ut}function Tr(ut,jt){var $t=ut==null?0:ut.length;return $t?fu(ut,jt)/$t:B}function $i(ut){return function(jt){return jt==null?h:jt[ut]}}function Ma(ut){return function(jt){return ut==null?h:ut[jt]}}function di(ut,jt,$t,fn,ur){return ur(ut,function(Mr,po,T){$t=fn?(fn=!1,Mr):jt($t,Mr,po,T)}),$t}function fu(ut,jt){for(var $t,fn=-1,ur=ut.length;++fn<ur;){var Mr=jt(ut[fn]);Mr!==h&&($t=$t===h?Mr:$t+Mr)}return $t}function Ll(ut,jt){for(var $t=-1,fn=Array(ut);++$t<ut;)fn[$t]=jt($t);return fn}function Pa(ut){return ut&&ut.slice(0,li(ut)+1).replace(jn,"")}function fo(ut){return function(jt){return ut(jt)}}function Hu(ut,jt){return Lr(jt,function($t){return ut[$t]})}function Wa(ut,jt){return ut.has(jt)}function ya(ut,jt){for(var $t=-1,fn=ut.length;++$t<fn&&cu(jt,ut[$t],0)>-1;);return $t}function kc(ut,jt){for(var $t=ut.length;$t--&&cu(jt,ut[$t],0)>-1;);return $t}function Yd(ut,jt){for(var $t=ut.length,fn=0;$t--;)ut[$t]===jt&&++fn;return fn}var Nc=Ma({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Go=Ma({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fl(ut){return"\\"+$f[ut]}function za(ut){return Oc.test(ut)}function Ko(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn,ur){$t[++jt]=[ur,fn]}),$t}function Rc(ut,jt){return function($t){return ut(jt($t))}}function ra(ut,jt){for(var $t=-1,fn=ut.length,ur=0,Mr=[];++$t<fn;){var po=ut[$t];po!==jt&&po!==w||(ut[$t]=w,Mr[ur++]=$t)}return Mr}function ma(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn){$t[++jt]=fn}),$t}function Ms(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn){$t[++jt]=[fn,fn]}),$t}function Bi(ut){return za(ut)?function(jt){for(var $t=Ec.lastIndex=0;Ec.test(jt);)++$t;return $t}(ut):Ts(ut)}function Zi(ut){return za(ut)?function(jt){return jt.match(Ec)||[]}(ut):function(jt){return jt.split("")}(ut)}function li(ut){for(var jt=ut.length;jt--&&Co.test(ut.charAt(jt)););return jt}var oa=Ma({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ni=function ut(jt){var $t,fn=(jt=jt==null?jo:Ni.defaults(jo.Object(),jt,Ni.pick(jo,Xd))).Array,ur=jt.Date,Mr=jt.Error,po=jt.Function,T=jt.Math,M=jt.Object,U=jt.RegExp,ne=jt.String,me=jt.TypeError,We=fn.prototype,vt=po.prototype,Ht=M.prototype,_n=jt["__core-js_shared__"],yr=vt.toString,ln=Ht.hasOwnProperty,Gr=0,pr=($t=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||""))?"Symbol(src)_1."+$t:"",Cr=Ht.toString,ia=yr.call(M),wo=jo._,Ji=U("^"+yr.call(ln).replace(Ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hl=Ss?jt.Buffer:h,vl=jt.Symbol,$l=jt.Uint8Array,du=hl?hl.allocUnsafe:h,Ha=Rc(M.getPrototypeOf,M),pu=M.create,Zo=Ht.propertyIsEnumerable,Bl=We.splice,yl=vl?vl.isConcatSpreadable:h,Xa=vl?vl.iterator:h,Ya=vl?vl.toStringTag:h,Xu=function(){try{var d=Qa(M,"defineProperty");return d({},"",{}),d}catch{}}(),oh=jt.clearTimeout!==jo.clearTimeout&&jt.clearTimeout,ih=ur&&ur.now!==jo.Date.now&&ur.now,qd=jt.setTimeout!==jo.setTimeout&&jt.setTimeout,Dc=T.ceil,Yu=T.floor,zf=M.getOwnPropertySymbols,ah=hl?hl.isBuffer:h,qu=jt.isFinite,Cc=We.join,Hf=Rc(M.keys,M),Io=T.max,Ui=T.min,Xf=ur.now,Yf=jt.parseInt,Ps=T.random,Vv=We.reverse,ks=Qa(jt,"DataView"),ml=Qa(jt,"Map"),jc=Qa(jt,"Promise"),Ku=Qa(jt,"Set"),hu=Qa(jt,"WeakMap"),Ns=Qa(M,"create"),Ic=hu&&new hu,vu={},Gv=Tu(ks),Lc=Tu(ml),Wv=Tu(jc),zv=Tu(Ku),lh=Tu(hu),qf=vl?vl.prototype:h,Ri=qf?qf.valueOf:h,uh=qf?qf.toString:h;function oe(d){if(Po(d)&&!mr(d)&&!(d instanceof Pr)){if(d instanceof ka)return d;if(ln.call(d,"__wrapped__"))return md(d)}return new ka(d)}var Zu=function(){function d(){}return function(m){if(!to(m))return{};if(pu)return pu(m);d.prototype=m;var E=new d;return d.prototype=h,E}}();function Ul(){}function ka(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=h}function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function Ei(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var D=d[m];this.set(D[0],D[1])}}function Fr(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var D=d[m];this.set(D[0],D[1])}}function qa(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var D=d[m];this.set(D[0],D[1])}}function Vl(d){var m=-1,E=d==null?0:d.length;for(this.__data__=new qa;++m<E;)this.add(d[m])}function ga(d){var m=this.__data__=new Fr(d);this.size=m.size}function Kf(d,m){var E=mr(d),D=!E&&Pu(d),V=!E&&!D&&Ia(d),J=!E&&!D&&!V&&Qe(d),pe=E||D||V||J,_e=pe?Ll(d.length,ne):[],Fe=_e.length;for(var pt in d)!m&&!ln.call(d,pt)||pe&&(pt=="length"||V&&(pt=="offset"||pt=="parent")||J&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||io(pt,Fe))||_e.push(pt);return _e}function Zf(d){var m=d.length;return m?d[ap(0,m-1)]:h}function Kd(d,m){return Sl(pi(d),yu(m,0,d.length))}function sh(d){return Sl(pi(d))}function Gl(d,m,E){(E!==h&&!ua(d[m],E)||E===h&&!(m in d))&&Ka(d,m,E)}function Lo(d,m,E){var D=d[m];ln.call(d,m)&&ua(D,E)&&(E!==h||m in d)||Ka(d,m,E)}function Rs(d,m){for(var E=d.length;E--;)if(ua(d[E][0],m))return E;return-1}function Zd(d,m,E,D){return mo(d,function(V,J,pe){m(D,V,E(V),pe)}),D}function Wl(d,m){return d&&_l(m,Lt(m),d)}function Ka(d,m,E){m=="__proto__"&&Xu?Xu(d,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):d[m]=E}function Fc(d,m){for(var E=-1,D=m.length,V=fn(D),J=d==null;++E<D;)V[E]=J?h:Wt(d,m[E]);return V}function yu(d,m,E){return d==d&&(E!==h&&(d=d<=E?d:E),m!==h&&(d=d>=m?d:m)),d}function ba(d,m,E,D,V,J){var pe,_e=1&m,Fe=2&m,pt=4&m;if(E&&(pe=V?E(d,D,V,J):E(d)),pe!==h)return pe;if(!to(d))return d;var gt=mr(d);if(gt){if(pe=function(kt){var Qt=kt.length,dr=new kt.constructor(Qt);return Qt&&typeof kt[0]=="string"&&ln.call(kt,"index")&&(dr.index=kt.index,dr.input=kt.input),dr}(d),!_e)return pi(d,pe)}else{var Vt=To(d),An=Vt==K||Vt==q;if(Ia(d))return fp(d,_e);if(Vt==Oe||Vt==Y||An&&!V){if(pe=Fe||An?{}:xu(d),!_e)return Fe?function(kt,Qt){return _l(kt,Bs(kt),Qt)}(d,function(kt,Qt){return kt&&_l(Qt,Mt(Qt),kt)}(pe,d)):function(kt,Qt){return _l(kt,$s(kt),Qt)}(d,Wl(pe,d))}else{if(!Vr[Vt])return V?d:{};pe=function(kt,Qt,dr){var gn=kt.constructor;switch(Qt){case ze:return Qu(kt);case W:case I:return new gn(+kt);case je:return function(or,jr){var Un=jr?Qu(or.buffer):or.buffer;return new or.constructor(Un,or.byteOffset,or.byteLength)}(kt,dr);case it:case bt:case Pt:case Yt:case Ce:case ge:case Se:case ht:case zt:return ho(kt,dr);case ce:return new gn;case Ne:case le:return new gn(kt);case Ie:return function(or){var jr=new or.constructor(or.source,_r.exec(or));return jr.lastIndex=or.lastIndex,jr}(kt);case Pe:return new gn;case ye:return ar=kt,Ri?M(Ri.call(ar)):{}}var ar}(d,Vt,_e)}}J||(J=new ga);var On=J.get(d);if(On)return On;J.set(d,pe),be(d)?d.forEach(function(kt){pe.add(ba(kt,m,E,kt,d,J))}):Oi(d)&&d.forEach(function(kt,Qt){pe.set(Qt,ba(kt,m,E,Qt,d,J))});var Yn=gt?h:(pt?Fe?hd:Kc:Fe?Mt:Lt)(d);return Ii(Yn||d,function(kt,Qt){Yn&&(kt=d[Qt=kt]),Lo(pe,Qt,ba(kt,m,E,Qt,d,J))}),pe}function Jd(d,m,E){var D=E.length;if(d==null)return!D;for(d=M(d);D--;){var V=E[D],J=m[V],pe=d[V];if(pe===h&&!(V in d)||!J(pe))return!1}return!0}function Qd(d,m,E){if(typeof d!="function")throw new me(g);return ns(function(){d.apply(h,E)},m)}function Za(d,m,E,D){var V=-1,J=ki,pe=!0,_e=d.length,Fe=[],pt=m.length;if(!_e)return Fe;E&&(m=Lr(m,fo(E))),D?(J=Mc,pe=!1):m.length>=200&&(J=Wa,pe=!1,m=new Vl(m));e:for(;++V<_e;){var gt=d[V],Vt=E==null?gt:E(gt);if(gt=D||gt!==0?gt:0,pe&&Vt==Vt){for(var An=pt;An--;)if(m[An]===Vt)continue e;Fe.push(gt)}else J(m,Vt,D)||Fe.push(gt)}return Fe}oe.templateSettings={escape:Be,evaluate:mn,interpolate:Kn,variable:"",imports:{_:oe}},oe.prototype=Ul.prototype,oe.prototype.constructor=oe,ka.prototype=Zu(Ul.prototype),ka.prototype.constructor=ka,Pr.prototype=Zu(Ul.prototype),Pr.prototype.constructor=Pr,Ei.prototype.clear=function(){this.__data__=Ns?Ns(null):{},this.size=0},Ei.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},Ei.prototype.get=function(d){var m=this.__data__;if(Ns){var E=m[d];return E===b?h:E}return ln.call(m,d)?m[d]:h},Ei.prototype.has=function(d){var m=this.__data__;return Ns?m[d]!==h:ln.call(m,d)},Ei.prototype.set=function(d,m){var E=this.__data__;return this.size+=this.has(d)?0:1,E[d]=Ns&&m===h?b:m,this},Fr.prototype.clear=function(){this.__data__=[],this.size=0},Fr.prototype.delete=function(d){var m=this.__data__,E=Rs(m,d);return!(E<0)&&(E==m.length-1?m.pop():Bl.call(m,E,1),--this.size,!0)},Fr.prototype.get=function(d){var m=this.__data__,E=Rs(m,d);return E<0?h:m[E][1]},Fr.prototype.has=function(d){return Rs(this.__data__,d)>-1},Fr.prototype.set=function(d,m){var E=this.__data__,D=Rs(E,d);return D<0?(++this.size,E.push([d,m])):E[D][1]=m,this},qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ei,map:new(ml||Fr),string:new Ei}},qa.prototype.delete=function(d){var m=Fs(this,d).delete(d);return this.size-=m?1:0,m},qa.prototype.get=function(d){return Fs(this,d).get(d)},qa.prototype.has=function(d){return Fs(this,d).has(d)},qa.prototype.set=function(d,m){var E=Fs(this,d),D=E.size;return E.set(d,m),this.size+=E.size==D?0:1,this},Vl.prototype.add=Vl.prototype.push=function(d){return this.__data__.set(d,b),this},Vl.prototype.has=function(d){return this.__data__.has(d)},ga.prototype.clear=function(){this.__data__=new Fr,this.size=0},ga.prototype.delete=function(d){var m=this.__data__,E=m.delete(d);return this.size=m.size,E},ga.prototype.get=function(d){return this.__data__.get(d)},ga.prototype.has=function(d){return this.__data__.has(d)},ga.prototype.set=function(d,m){var E=this.__data__;if(E instanceof Fr){var D=E.__data__;if(!ml||D.length<199)return D.push([d,m]),this.size=++E.size,this;E=this.__data__=new qa(D)}return E.set(d,m),this.size=E.size,this};var mo=es(Nn),ch=es(so,!0);function ep(d,m){var E=!0;return mo(d,function(D,V,J){return E=!!m(D,V,J)}),E}function Fo(d,m,E){for(var D=-1,V=d.length;++D<V;){var J=d[D],pe=m(J);if(pe!=null&&(_e===h?pe==pe&&!dt(pe):E(pe,_e)))var _e=pe,Fe=J}return Fe}function zr(d,m){var E=[];return mo(d,function(D,V,J){m(D,V,J)&&E.push(D)}),E}function Jo(d,m,E,D,V){var J=-1,pe=d.length;for(E||(E=Jc),V||(V=[]);++J<pe;){var _e=d[J];m>0&&E(_e)?m>1?Jo(_e,m-1,E,D,V):ai(V,_e):D||(V[V.length]=_e)}return V}var Er=ld(),uo=ld(!0);function Nn(d,m){return d&&Er(d,m,Lt)}function so(d,m){return d&&uo(d,m,Lt)}function $c(d,m){return Li(m,function(E){return Tl(d[E])})}function gl(d,m){for(var E=0,D=(m=_u(m,d)).length;d!=null&&E<D;)d=d[nl(m[E++])];return E&&E==D?d:h}function Jf(d,m,E){var D=m(d);return mr(d)?D:ai(D,E(d))}function Eo(d){return d==null?d===h?"[object Undefined]":"[object Null]":Ya&&Ya in M(d)?function(m){var E=ln.call(m,Ya),D=m[Ya];try{m[Ya]=h;var V=!0}catch{}var J=Cr.call(m);return V&&(E?m[Ya]=D:delete m[Ya]),J}(d):function(m){return Cr.call(m)}(d)}function Ao(d,m){return d>m}function tp(d,m){return d!=null&&ln.call(d,m)}function np(d,m){return d!=null&&m in M(d)}function Bc(d,m,E){for(var D=E?Mc:ki,V=d[0].length,J=d.length,pe=J,_e=fn(J),Fe=1/0,pt=[];pe--;){var gt=d[pe];pe&&m&&(gt=Lr(gt,fo(m))),Fe=Ui(gt.length,Fe),_e[pe]=!E&&(m||V>=120&&gt.length>=120)?new Vl(pe&&gt):h}gt=d[0];var Vt=-1,An=_e[0];e:for(;++Vt<V&&pt.length<Fe;){var On=gt[Vt],Yn=m?m(On):On;if(On=E||On!==0?On:0,!(An?Wa(An,Yn):D(pt,Yn,E))){for(pe=J;--pe;){var kt=_e[pe];if(!(kt?Wa(kt,Yn):D(d[pe],Yn,E)))continue e}An&&An.push(Yn),pt.push(On)}}return pt}function Vi(d,m,E){var D=(d=Au(d,m=_u(m,d)))==null?d:d[nl(Gi(m))];return D==null?h:oo(D,d,E)}function Qf(d){return Po(d)&&Eo(d)==Y}function Ds(d,m,E,D,V){return d===m||(d==null||m==null||!Po(d)&&!Po(m)?d!=d&&m!=m:function(J,pe,_e,Fe,pt,gt){var Vt=mr(J),An=mr(pe),On=Vt?Q:To(J),Yn=An?Q:To(pe),kt=(On=On==Y?Oe:On)==Oe,Qt=(Yn=Yn==Y?Oe:Yn)==Oe,dr=On==Yn;if(dr&&Ia(J)){if(!Ia(pe))return!1;Vt=!0,kt=!1}if(dr&&!kt)return gt||(gt=new ga),Vt||Qe(J)?pd(J,pe,_e,Fe,pt,gt):function(Un,er,zo,ot,eu,xi,ku){switch(zo){case je:if(Un.byteLength!=er.byteLength||Un.byteOffset!=er.byteOffset)return!1;Un=Un.buffer,er=er.buffer;case ze:return!(Un.byteLength!=er.byteLength||!xi(new $l(Un),new $l(er)));case W:case I:case Ne:return ua(+Un,+er);case z:return Un.name==er.name&&Un.message==er.message;case Ie:case le:return Un==er+"";case ce:var us=Ko;case Pe:var wd=1&ot;if(us||(us=ma),Un.size!=er.size&&!wd)return!1;var Ap=ku.get(Un);if(Ap)return Ap==er;ot|=2,ku.set(Un,er);var cf=pd(us(Un),us(er),ot,eu,xi,ku);return ku.delete(Un),cf;case ye:if(Ri)return Ri.call(Un)==Ri.call(er)}return!1}(J,pe,On,_e,Fe,pt,gt);if(!(1&_e)){var gn=kt&&ln.call(J,"__wrapped__"),ar=Qt&&ln.call(pe,"__wrapped__");if(gn||ar){var or=gn?J.value():J,jr=ar?pe.value():pe;return gt||(gt=new ga),pt(or,jr,_e,Fe,gt)}}return dr?(gt||(gt=new ga),function(Un,er,zo,ot,eu,xi){var ku=1&zo,us=Kc(Un),wd=us.length,Ap=Kc(er).length;if(wd!=Ap&&!ku)return!1;for(var cf=wd;cf--;){var qs=us[cf];if(!(ku?qs in er:ln.call(er,qs)))return!1}var Zv=xi.get(Un),Jv=xi.get(er);if(Zv&&Jv)return Zv==er&&Jv==Un;var Tp=!0;xi.set(Un,er),xi.set(er,Un);for(var kh=ku;++cf<wd;){var Ks=Un[qs=us[cf]],Mp=er[qs];if(ot)var Qv=ku?ot(Mp,Ks,qs,er,Un,xi):ot(Ks,Mp,qs,Un,er,xi);if(!(Qv===h?Ks===Mp||eu(Ks,Mp,zo,ot,xi):Qv)){Tp=!1;break}kh||(kh=qs=="constructor")}if(Tp&&!kh){var Zs=Un.constructor,Pp=er.constructor;Zs==Pp||!("constructor"in Un)||!("constructor"in er)||typeof Zs=="function"&&Zs instanceof Zs&&typeof Pp=="function"&&Pp instanceof Pp||(Tp=!1)}return xi.delete(Un),xi.delete(er),Tp}(J,pe,_e,Fe,pt,gt)):!1}(d,m,E,D,Ds,V))}function Na(d,m,E,D){var V=E.length,J=V,pe=!D;if(d==null)return!J;for(d=M(d);V--;){var _e=E[V];if(pe&&_e[2]?_e[1]!==d[_e[0]]:!(_e[0]in d))return!1}for(;++V<J;){var Fe=(_e=E[V])[0],pt=d[Fe],gt=_e[1];if(pe&&_e[2]){if(pt===h&&!(Fe in d))return!1}else{var Vt=new ga;if(D)var An=D(pt,gt,Fe,d,m,Vt);if(!(An===h?Ds(gt,pt,3,D,Vt):An))return!1}}return!0}function mu(d){return!(!to(d)||(m=d,pr&&pr in m))&&(Tl(d)?Ji:Vo).test(Tu(d));var m}function zl(d){return typeof d=="function"?d:d==null?zn:typeof d=="object"?mr(d)?op(d[0],d[1]):rp(d):ue(d)}function Ra(d){if(!Su(d))return Hf(d);var m=[];for(var E in M(d))ln.call(d,E)&&E!="constructor"&&m.push(E);return m}function fh(d){if(!to(d))return function(V){var J=[];if(V!=null)for(var pe in M(V))J.push(pe);return J}(d);var m=Su(d),E=[];for(var D in d)(D!="constructor"||!m&&ln.call(d,D))&&E.push(D);return E}function bl(d,m){return d<m}function _a(d,m){var E=-1,D=sa(d)?fn(d.length):[];return mo(d,function(V,J,pe){D[++E]=m(V,J,pe)}),D}function rp(d){var m=Zc(d);return m.length==1&&m[0][2]?Vs(m[0][0],m[0][1]):function(E){return E===d||Na(E,d,m)}}function op(d,m){return ql(d)&&xl(m)?Vs(nl(d),m):function(E){var D=Wt(E,d);return D===h&&D===m?Et(E,d):Ds(m,D,3)}}function ed(d,m,E,D,V){d!==m&&Er(m,function(J,pe){if(V||(V=new ga),to(J))(function(Fe,pt,gt,Vt,An,On,Yn){var kt=Dt(Fe,gt),Qt=Dt(pt,gt),dr=Yn.get(Qt);if(dr)return void Gl(Fe,gt,dr);var gn=On?On(kt,Qt,gt+"",Fe,pt,Yn):h,ar=gn===h;if(ar){var or=mr(Qt),jr=!or&&Ia(Qt),Un=!or&&!jr&&Qe(Qt);gn=Qt,or||jr||Un?mr(kt)?gn=kt:ti(kt)?gn=pi(kt):jr?(ar=!1,gn=fp(Qt,!0)):Un?(ar=!1,gn=ho(Qt,!0)):gn=[]:$(Qt)||Pu(Qt)?(gn=kt,Pu(kt)?gn=Rt(kt):to(kt)&&!Tl(kt)||(gn=xu(Qt))):ar=!1}ar&&(Yn.set(Qt,gn),An(gn,Qt,Vt,On,Yn),Yn.delete(Qt)),Gl(Fe,gt,gn)})(d,m,pe,E,ed,D,V);else{var _e=D?D(Dt(d,pe),J,pe+"",d,m,V):h;_e===h&&(_e=J),Gl(d,pe,_e)}},Mt)}function dh(d,m){var E=d.length;if(E)return io(m+=m<0?E:0,E)?d[m]:h}function ph(d,m,E){m=m.length?Lr(m,function(J){return mr(J)?function(pe){return gl(pe,J.length===1?J[0]:J)}:J}):[zn];var D=-1;m=Lr(m,fo(Jn()));var V=_a(d,function(J,pe,_e){var Fe=Lr(m,function(pt){return pt(J)});return{criteria:Fe,index:++D,value:J}});return function(J,pe){var _e=J.length;for(J.sort(pe);_e--;)J[_e]=J[_e].value;return J}(V,function(J,pe){return function(_e,Fe,pt){for(var gt=-1,Vt=_e.criteria,An=Fe.criteria,On=Vt.length,Yn=pt.length;++gt<On;){var kt=zc(Vt[gt],An[gt]);if(kt)return gt>=Yn?kt:kt*(pt[gt]=="desc"?-1:1)}return _e.index-Fe.index}(J,pe,E)})}function hh(d,m,E){for(var D=-1,V=m.length,J={};++D<V;){var pe=m[D],_e=gl(d,pe);E(_e,pe)&&gu(J,_u(pe,d),_e)}return J}function ip(d,m,E,D){var V=D?Ki:cu,J=-1,pe=m.length,_e=d;for(d===m&&(m=pi(m)),E&&(_e=Lr(d,fo(E)));++J<pe;)for(var Fe=0,pt=m[J],gt=E?E(pt):pt;(Fe=V(_e,gt,Fe,D))>-1;)_e!==d&&Bl.call(_e,Fe,1),Bl.call(d,Fe,1);return d}function Cs(d,m){for(var E=d?m.length:0,D=E-1;E--;){var V=m[E];if(E==D||V!==J){var J=V;io(V)?Bl.call(d,V,1):rd(d,V)}}return d}function ap(d,m){return d+Yu(Ps()*(m-d+1))}function Uc(d,m){var E="";if(!d||m<1||m>R)return E;do m%2&&(E+=d),(m=Yu(m/2))&&(d+=d);while(m);return E}function Or(d,m){return ef(Qc(d,m,zn),d+"")}function Hv(d){return Zf(gr(d))}function lp(d,m){var E=gr(d);return Sl(E,yu(m,0,E.length))}function gu(d,m,E,D){if(!to(d))return d;for(var V=-1,J=(m=_u(m,d)).length,pe=J-1,_e=d;_e!=null&&++V<J;){var Fe=nl(m[V]),pt=E;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return d;if(V!=pe){var gt=_e[Fe];(pt=D?D(gt,Fe,_e):h)===h&&(pt=to(gt)?gt:io(m[V+1])?[]:{})}Lo(_e,Fe,pt),_e=_e[Fe]}return d}var Vc=Ic?function(d,m){return Ic.set(d,m),d}:zn,Xv=Xu?function(d,m){return Xu(d,"toString",{configurable:!0,enumerable:!1,value:Nr(m),writable:!0})}:zn;function Yv(d){return Sl(gr(d))}function Da(d,m,E){var D=-1,V=d.length;m<0&&(m=-m>V?0:V+m),(E=E>V?V:E)<0&&(E+=V),V=m>E?0:E-m>>>0,m>>>=0;for(var J=fn(V);++D<V;)J[D]=d[D+m];return J}function up(d,m){var E;return mo(d,function(D,V,J){return!(E=m(D,V,J))}),!!E}function td(d,m,E){var D=0,V=d==null?D:d.length;if(typeof m=="number"&&m==m&&V<=2147483647){for(;D<V;){var J=D+V>>>1,pe=d[J];pe!==null&&!dt(pe)&&(E?pe<=m:pe<m)?D=J+1:V=J}return V}return nd(d,m,zn,E)}function nd(d,m,E,D){var V=0,J=d==null?0:d.length;if(J===0)return 0;for(var pe=(m=E(m))!=m,_e=m===null,Fe=dt(m),pt=m===h;V<J;){var gt=Yu((V+J)/2),Vt=E(d[gt]),An=Vt!==h,On=Vt===null,Yn=Vt==Vt,kt=dt(Vt);if(pe)var Qt=D||Yn;else Qt=pt?Yn&&(D||An):_e?Yn&&An&&(D||!On):Fe?Yn&&An&&!On&&(D||!kt):!On&&!kt&&(D?Vt<=m:Vt<m);Qt?V=gt+1:J=gt}return Ui(J,4294967294)}function vh(d,m){for(var E=-1,D=d.length,V=0,J=[];++E<D;){var pe=d[E],_e=m?m(pe):pe;if(!E||!ua(_e,Fe)){var Fe=_e;J[V++]=pe===0?0:pe}}return J}function sp(d){return typeof d=="number"?d:dt(d)?B:+d}function aa(d){if(typeof d=="string")return d;if(mr(d))return Lr(d,aa)+"";if(dt(d))return uh?uh.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function bu(d,m,E){var D=-1,V=ki,J=d.length,pe=!0,_e=[],Fe=_e;if(E)pe=!1,V=Mc;else if(J>=200){var pt=m?null:fd(d);if(pt)return ma(pt);pe=!1,V=Wa,Fe=new Vl}else Fe=m?[]:_e;e:for(;++D<J;){var gt=d[D],Vt=m?m(gt):gt;if(gt=E||gt!==0?gt:0,pe&&Vt==Vt){for(var An=Fe.length;An--;)if(Fe[An]===Vt)continue e;m&&Fe.push(Vt),_e.push(gt)}else V(Fe,Vt,E)||(Fe!==_e&&Fe.push(Vt),_e.push(gt))}return _e}function rd(d,m){return(d=Au(d,m=_u(m,d)))==null||delete d[nl(Gi(m))]}function Ju(d,m,E,D){return gu(d,m,E(gl(d,m)),D)}function Gc(d,m,E,D){for(var V=d.length,J=D?V:-1;(D?J--:++J<V)&&m(d[J],J,d););return E?Da(d,D?0:J,D?J+1:V):Da(d,D?J+1:0,D?V:J)}function yh(d,m){var E=d;return E instanceof Pr&&(E=E.value()),As(m,function(D,V){return V.func.apply(V.thisArg,ai([D],V.args))},E)}function Wc(d,m,E){var D=d.length;if(D<2)return D?bu(d[0]):[];for(var V=-1,J=fn(D);++V<D;)for(var pe=d[V],_e=-1;++_e<D;)_e!=V&&(J[V]=Za(J[V]||pe,d[_e],m,E));return bu(Jo(J,1),m,E)}function od(d,m,E){for(var D=-1,V=d.length,J=m.length,pe={};++D<V;){var _e=D<J?m[D]:h;E(pe,d[D],_e)}return pe}function id(d){return ti(d)?d:[]}function ad(d){return typeof d=="function"?d:zn}function _u(d,m){return mr(d)?d:ql(d,m)?[d]:gp(wt(d))}var mh=Or;function wu(d,m,E){var D=d.length;return E=E===h?D:E,!m&&E>=D?d:Da(d,m,E)}var cp=oh||function(d){return jo.clearTimeout(d)};function fp(d,m){if(m)return d.slice();var E=d.length,D=du?du(E):new d.constructor(E);return d.copy(D),D}function Qu(d){var m=new d.constructor(d.byteLength);return new $l(m).set(new $l(d)),m}function ho(d,m){var E=m?Qu(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.length)}function zc(d,m){if(d!==m){var E=d!==h,D=d===null,V=d==d,J=dt(d),pe=m!==h,_e=m===null,Fe=m==m,pt=dt(m);if(!_e&&!pt&&!J&&d>m||J&&pe&&Fe&&!_e&&!pt||D&&pe&&Fe||!E&&Fe||!V)return 1;if(!D&&!J&&!pt&&d<m||pt&&E&&V&&!D&&!J||_e&&E&&V||!pe&&V||!Fe)return-1}return 0}function Oo(d,m,E,D){for(var V=-1,J=d.length,pe=E.length,_e=-1,Fe=m.length,pt=Io(J-pe,0),gt=fn(Fe+pt),Vt=!D;++_e<Fe;)gt[_e]=m[_e];for(;++V<pe;)(Vt||V<J)&&(gt[E[V]]=d[V]);for(;pt--;)gt[_e++]=d[V++];return gt}function Hl(d,m,E,D){for(var V=-1,J=d.length,pe=-1,_e=E.length,Fe=-1,pt=m.length,gt=Io(J-_e,0),Vt=fn(gt+pt),An=!D;++V<gt;)Vt[V]=d[V];for(var On=V;++Fe<pt;)Vt[On+Fe]=m[Fe];for(;++pe<_e;)(An||V<J)&&(Vt[On+E[pe]]=d[V++]);return Vt}function pi(d,m){var E=-1,D=d.length;for(m||(m=fn(D));++E<D;)m[E]=d[E];return m}function _l(d,m,E,D){var V=!E;E||(E={});for(var J=-1,pe=m.length;++J<pe;){var _e=m[J],Fe=D?D(E[_e],d[_e],_e,E,d):h;Fe===h&&(Fe=d[_e]),V?Ka(E,_e,Fe):Lo(E,_e,Fe)}return E}function Xl(d,m){return function(E,D){var V=mr(E)?Vf:Zd,J=m?m():{};return V(E,d,Jn(D,2),J)}}function Eu(d){return Or(function(m,E){var D=-1,V=E.length,J=V>1?E[V-1]:h,pe=V>2?E[2]:h;for(J=d.length>3&&typeof J=="function"?(V--,J):h,pe&&$o(E[0],E[1],pe)&&(J=V<3?h:J,V=1),m=M(m);++D<V;){var _e=E[D];_e&&d(m,_e,D,J)}return m})}function es(d,m){return function(E,D){if(E==null)return E;if(!sa(E))return d(E,D);for(var V=E.length,J=m?V:-1,pe=M(E);(m?J--:++J<V)&&D(pe[J],J,pe)!==!1;);return E}}function ld(d){return function(m,E,D){for(var V=-1,J=M(m),pe=D(m),_e=pe.length;_e--;){var Fe=pe[d?_e:++V];if(E(J[Fe],Fe,J)===!1)break}return m}}function ud(d){return function(m){var E=za(m=wt(m))?Zi(m):h,D=E?E[0]:m.charAt(0),V=E?wu(E,1).join(""):m.slice(1);return D[d]()+V}}function wl(d){return function(m){return As(So(cr(m).replace(Lf,"")),d,"")}}function ts(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=Zu(d.prototype),D=d.apply(E,m);return to(D)?D:E}}function sd(d){return function(m,E,D){var V=M(m);if(!sa(m)){var J=Jn(E,3);m=Lt(m),E=function(_e){return J(V[_e],_e,V)}}var pe=d(m,E,D);return pe>-1?V[J?m[pe]:pe]:h}}function Hc(d){return Ol(function(m){var E=m.length,D=E,V=ka.prototype.thru;for(d&&m.reverse();D--;){var J=m[D];if(typeof J!="function")throw new me(g);if(V&&!pe&&Ls(J)=="wrapper")var pe=new ka([],!0)}for(D=pe?D:E;++D<E;){var _e=Ls(J=m[D]),Fe=_e=="wrapper"?vd(J):h;pe=Fe&&el(Fe[0])&&Fe[1]==424&&!Fe[4].length&&Fe[9]==1?pe[Ls(Fe[0])].apply(pe,Fe[3]):J.length==1&&el(J)?pe[_e]():pe.thru(J)}return function(){var pt=arguments,gt=pt[0];if(pe&&pt.length==1&&mr(gt))return pe.plant(gt).value();for(var Vt=0,An=E?m[Vt].apply(this,pt):gt;++Vt<E;)An=m[Vt].call(this,An);return An}})}function Ou(d,m,E,D,V,J,pe,_e,Fe,pt){var gt=m&A,Vt=1&m,An=2&m,On=24&m,Yn=512&m,kt=An?h:ts(d);return function Qt(){for(var dr=arguments.length,gn=fn(dr),ar=dr;ar--;)gn[ar]=arguments[ar];if(On)var or=Yl(Qt),jr=Yd(gn,or);if(D&&(gn=Oo(gn,D,V,On)),J&&(gn=Hl(gn,J,pe,On)),dr-=jr,On&&dr<pt){var Un=ra(gn,or);return Yc(d,m,Ou,Qt.placeholder,E,gn,Un,_e,Fe,pt-dr)}var er=Vt?E:this,zo=An?er[d]:d;return dr=gn.length,_e?gn=Gs(gn,_e):Yn&&dr>1&&gn.reverse(),gt&&Fe<dr&&(gn.length=Fe),this&&this!==jo&&this instanceof Qt&&(zo=kt||ts(zo)),zo.apply(er,gn)}}function dp(d,m){return function(E,D){return function(V,J,pe,_e){return Nn(V,function(Fe,pt,gt){J(_e,pe(Fe),pt,gt)}),_e}(E,d,m(D),{})}}function js(d,m){return function(E,D){var V;if(E===h&&D===h)return m;if(E!==h&&(V=E),D!==h){if(V===h)return D;typeof E=="string"||typeof D=="string"?(E=aa(E),D=aa(D)):(E=sp(E),D=sp(D)),V=d(E,D)}return V}}function cd(d){return Ol(function(m){return m=Lr(m,fo(Jn())),Or(function(E){var D=this;return d(m,function(V){return oo(V,D,E)})})})}function Xc(d,m){var E=(m=m===h?" ":aa(m)).length;if(E<2)return E?Uc(m,d):m;var D=Uc(m,Dc(d/Bi(m)));return za(m)?wu(Zi(D),0,d).join(""):D.slice(0,d)}function El(d){return function(m,E,D){return D&&typeof D!="number"&&$o(m,E,D)&&(E=D=h),m=Ct(m),E===h?(E=m,m=0):E=Ct(E),function(V,J,pe,_e){for(var Fe=-1,pt=Io(Dc((J-V)/(pe||1)),0),gt=fn(pt);pt--;)gt[_e?pt:++Fe]=V,V+=pe;return gt}(m,E,D=D===h?m<E?1:-1:Ct(D),d)}}function Is(d){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ut(m),E=Ut(E)),d(m,E)}}function Yc(d,m,E,D,V,J,pe,_e,Fe,pt){var gt=8&m;m|=gt?S:P,4&(m&=~(gt?P:S))||(m&=-4);var Vt=[d,m,V,gt?J:h,gt?pe:h,gt?h:J,gt?h:pe,_e,Fe,pt],An=E.apply(h,Vt);return el(d)&&yp(An,Vt),An.placeholder=D,yd(An,d,m)}function qc(d){var m=T[d];return function(E,D){if(E=Ut(E),(D=D==null?0:Ui(ct(D),292))&&qu(E)){var V=(wt(E)+"e").split("e");return+((V=(wt(m(V[0]+"e"+(+V[1]+D)))+"e").split("e"))[0]+"e"+(+V[1]-D))}return m(E)}}var fd=Ku&&1/ma(new Ku([,-0]))[1]==j?function(d){return new Ku(d)}:rt;function dd(d){return function(m){var E=To(m);return E==ce?Ko(m):E==Pe?Ms(m):function(D,V){return Lr(V,function(J){return[J,D[J]]})}(m,d(m))}}function Ja(d,m,E,D,V,J,pe,_e){var Fe=2&m;if(!Fe&&typeof d!="function")throw new me(g);var pt=D?D.length:0;if(pt||(m&=-97,D=V=h),pe=pe===h?pe:Io(ct(pe),0),_e=_e===h?_e:ct(_e),pt-=V?V.length:0,m&P){var gt=D,Vt=V;D=V=h}var An=Fe?h:vd(d),On=[d,m,E,D,V,gt,Vt,J,pe,_e];if(An&&function(kt,Qt){var dr=kt[1],gn=Qt[1],ar=dr|gn,or=ar<131,jr=gn==A&&dr==8||gn==A&&dr==k&&kt[7].length<=Qt[8]||gn==384&&Qt[7].length<=Qt[8]&&dr==8;if(!or&&!jr)return kt;1&gn&&(kt[2]=Qt[2],ar|=1&dr?0:4);var Un=Qt[3];if(Un){var er=kt[3];kt[3]=er?Oo(er,Un,Qt[4]):Un,kt[4]=er?ra(kt[3],w):Qt[4]}(Un=Qt[5])&&(er=kt[5],kt[5]=er?Hl(er,Un,Qt[6]):Un,kt[6]=er?ra(kt[5],w):Qt[6]),(Un=Qt[7])&&(kt[7]=Un),gn&A&&(kt[8]=kt[8]==null?Qt[8]:Ui(kt[8],Qt[8])),kt[9]==null&&(kt[9]=Qt[9]),kt[0]=Qt[0],kt[1]=ar}(On,An),d=On[0],m=On[1],E=On[2],D=On[3],V=On[4],!(_e=On[9]=On[9]===h?Fe?0:d.length:Io(On[9]-pt,0))&&24&m&&(m&=-25),m&&m!=1)Yn=m==8||m==O?function(kt,Qt,dr){var gn=ts(kt);return function ar(){for(var or=arguments.length,jr=fn(or),Un=or,er=Yl(ar);Un--;)jr[Un]=arguments[Un];var zo=or<3&&jr[0]!==er&&jr[or-1]!==er?[]:ra(jr,er);return(or-=zo.length)<dr?Yc(kt,Qt,Ou,ar.placeholder,h,jr,zo,h,h,dr-or):oo(this&&this!==jo&&this instanceof ar?gn:kt,this,jr)}}(d,m,_e):m!=S&&m!=33||V.length?Ou.apply(h,On):function(kt,Qt,dr,gn){var ar=1&Qt,or=ts(kt);return function jr(){for(var Un=-1,er=arguments.length,zo=-1,ot=gn.length,eu=fn(ot+er),xi=this&&this!==jo&&this instanceof jr?or:kt;++zo<ot;)eu[zo]=gn[zo];for(;er--;)eu[zo++]=arguments[++Un];return oo(xi,ar?dr:this,eu)}}(d,m,E,D);else var Yn=function(kt,Qt,dr){var gn=1&Qt,ar=ts(kt);return function or(){return(this&&this!==jo&&this instanceof or?ar:kt).apply(gn?dr:this,arguments)}}(d,m,E);return yd((An?Vc:yp)(Yn,On),d,m)}function pp(d,m,E,D){return d===h||ua(d,Ht[E])&&!ln.call(D,E)?m:d}function hp(d,m,E,D,V,J){return to(d)&&to(m)&&(J.set(m,d),ed(d,m,h,hp,J),J.delete(m)),d}function vp(d){return $(d)?h:d}function pd(d,m,E,D,V,J){var pe=1&E,_e=d.length,Fe=m.length;if(_e!=Fe&&!(pe&&Fe>_e))return!1;var pt=J.get(d),gt=J.get(m);if(pt&&gt)return pt==m&&gt==d;var Vt=-1,An=!0,On=2&E?new Vl:h;for(J.set(d,m),J.set(m,d);++Vt<_e;){var Yn=d[Vt],kt=m[Vt];if(D)var Qt=pe?D(kt,Yn,Vt,m,d,J):D(Yn,kt,Vt,d,m,J);if(Qt!==h){if(Qt)continue;An=!1;break}if(On){if(!Pc(m,function(dr,gn){if(!Wa(On,gn)&&(Yn===dr||V(Yn,dr,E,D,J)))return On.push(gn)})){An=!1;break}}else if(Yn!==kt&&!V(Yn,kt,E,D,J)){An=!1;break}}return J.delete(d),J.delete(m),An}function Ol(d){return ef(Qc(d,h,wp),d+"")}function Kc(d){return Jf(d,Lt,$s)}function hd(d){return Jf(d,Mt,Bs)}var vd=Ic?function(d){return Ic.get(d)}:rt;function Ls(d){for(var m=d.name+"",E=vu[m],D=ln.call(vu,m)?E.length:0;D--;){var V=E[D],J=V.func;if(J==null||J==d)return V.name}return m}function Yl(d){return(ln.call(oe,"placeholder")?oe:d).placeholder}function Jn(){var d=oe.iteratee||co;return d=d===co?zl:d,arguments.length?d(arguments[0],arguments[1]):d}function Fs(d,m){var E,D,V=d.__data__;return((D=typeof(E=m))=="string"||D=="number"||D=="symbol"||D=="boolean"?E!=="__proto__":E===null)?V[typeof m=="string"?"string":"hash"]:V.map}function Zc(d){for(var m=Lt(d),E=m.length;E--;){var D=m[E],V=d[D];m[E]=[D,V,xl(V)]}return m}function Qa(d,m){var E=function(D,V){return D==null?h:D[V]}(d,m);return mu(E)?E:h}var $s=zf?function(d){return d==null?[]:(d=M(d),Li(zf(d),function(m){return Zo.call(d,m)}))}:Ge,Bs=zf?function(d){for(var m=[];d;)ai(m,$s(d)),d=Ha(d);return m}:Ge,To=Eo;function Us(d,m,E){for(var D=-1,V=(m=_u(m,d)).length,J=!1;++D<V;){var pe=nl(m[D]);if(!(J=d!=null&&E(d,pe)))break;d=d[pe]}return J||++D!=V?J:!!(V=d==null?0:d.length)&&Jl(V)&&io(pe,V)&&(mr(d)||Pu(d))}function xu(d){return typeof d.constructor!="function"||Su(d)?{}:Zu(Ha(d))}function Jc(d){return mr(d)||Pu(d)||!!(yl&&d&&d[yl])}function io(d,m){var E=typeof d;return!!(m=m??R)&&(E=="number"||E!="symbol"&&Sn.test(d))&&d>-1&&d%1==0&&d<m}function $o(d,m,E){if(!to(E))return!1;var D=typeof m;return!!(D=="number"?sa(E)&&io(m,E.length):D=="string"&&m in E)&&ua(E[m],d)}function ql(d,m){if(mr(d))return!1;var E=typeof d;return!(E!="number"&&E!="symbol"&&E!="boolean"&&d!=null&&!dt(d))||$n.test(d)||!re.test(d)||m!=null&&d in M(m)}function el(d){var m=Ls(d),E=oe[m];if(typeof E!="function"||!(m in Pr.prototype))return!1;if(d===E)return!0;var D=vd(E);return!!D&&d===D[0]}(ks&&To(new ks(new ArrayBuffer(1)))!=je||ml&&To(new ml)!=ce||jc&&To(jc.resolve())!=Xe||Ku&&To(new Ku)!=Pe||hu&&To(new hu)!=Me)&&(To=function(d){var m=Eo(d),E=m==Oe?d.constructor:h,D=E?Tu(E):"";if(D)switch(D){case Gv:return je;case Lc:return ce;case Wv:return Xe;case zv:return Pe;case lh:return Me}return m});var tl=_n?Tl:qe;function Su(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function xl(d){return d==d&&!to(d)}function Vs(d,m){return function(E){return E!=null&&E[d]===m&&(m!==h||d in M(E))}}function Qc(d,m,E){return m=Io(m===h?d.length-1:m,0),function(){for(var D=arguments,V=-1,J=Io(D.length-m,0),pe=fn(J);++V<J;)pe[V]=D[m+V];V=-1;for(var _e=fn(m+1);++V<m;)_e[V]=D[V];return _e[m]=E(pe),oo(d,this,_e)}}function Au(d,m){return m.length<2?d:gl(d,Da(m,0,-1))}function Gs(d,m){for(var E=d.length,D=Ui(m.length,E),V=pi(d);D--;){var J=m[D];d[D]=io(J,E)?V[J]:h}return d}function Dt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var yp=mp(Vc),ns=qd||function(d,m){return jo.setTimeout(d,m)},ef=mp(Xv);function yd(d,m,E){var D=m+"";return ef(d,function(V,J){var pe=J.length;if(!pe)return V;var _e=pe-1;return J[_e]=(pe>1?"& ":"")+J[_e],J=J.join(pe>2?", ":" "),V.replace(Ee,`{
/* [wrapped with `+J+`] */
`)}(D,function(V,J){return Ii(H,function(pe){var _e="_."+pe[0];J&pe[1]&&!ki(V,_e)&&V.push(_e)}),V.sort()}(function(V){var J=V.match(Ke);return J?J[1].split(De):[]}(D),E)))}function mp(d){var m=0,E=0;return function(){var D=Xf(),V=16-(D-E);if(E=D,V>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(h,arguments)}}function Sl(d,m){var E=-1,D=d.length,V=D-1;for(m=m===h?D:m;++E<m;){var J=ap(E,V),pe=d[J];d[J]=d[E],d[E]=pe}return d.length=m,d}var gp=function(d){var m=Mu(d,function(D){return E.size===500&&E.clear(),D}),E=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(xr,function(E,D,V,J){m.push(V?J.replace(qt,"$1"):D||E)}),m});function nl(d){if(typeof d=="string"||dt(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function Tu(d){if(d!=null){try{return yr.call(d)}catch{}try{return d+""}catch{}}return""}function md(d){if(d instanceof Pr)return d.clone();var m=new ka(d.__wrapped__,d.__chain__);return m.__actions__=pi(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var gh=Or(function(d,m){return ti(d)?Za(d,Jo(m,1,ti,!0)):[]}),bh=Or(function(d,m){var E=Gi(m);return ti(E)&&(E=h),ti(d)?Za(d,Jo(m,1,ti,!0),Jn(E,2)):[]}),_h=Or(function(d,m){var E=Gi(m);return ti(E)&&(E=h),ti(d)?Za(d,Jo(m,1,ti,!0),h,E):[]});function bp(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var V=E==null?0:ct(E);return V<0&&(V=Io(D+V,0)),Fi(d,Jn(m,3),V)}function _p(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var V=D-1;return E!==h&&(V=ct(E),V=E<0?Io(D+V,0):Ui(V,D-1)),Fi(d,Jn(m,3),V,!0)}function wp(d){return d!=null&&d.length?Jo(d,1):[]}function Ep(d){return d&&d.length?d[0]:h}var wh=Or(function(d){var m=Lr(d,id);return m.length&&m[0]===d[0]?Bc(m):[]}),Eh=Or(function(d){var m=Gi(d),E=Lr(d,id);return m===Gi(E)?m=h:E.pop(),E.length&&E[0]===d[0]?Bc(E,Jn(m,2)):[]}),Oh=Or(function(d){var m=Gi(d),E=Lr(d,id);return(m=typeof m=="function"?m:h)&&E.pop(),E.length&&E[0]===d[0]?Bc(E,h,m):[]});function Gi(d){var m=d==null?0:d.length;return m?d[m-1]:h}var rs=Or(tf);function tf(d,m){return d&&d.length&&m&&m.length?ip(d,m):d}var la=Ol(function(d,m){var E=d==null?0:d.length,D=Fc(d,m);return Cs(d,Lr(m,function(V){return io(V,E)?+V:V}).sort(zc)),D});function Ca(d){return d==null?d:Vv.call(d)}var gd=Or(function(d){return bu(Jo(d,1,ti,!0))}),Wi=Or(function(d){var m=Gi(d);return ti(m)&&(m=h),bu(Jo(d,1,ti,!0),Jn(m,2))}),nf=Or(function(d){var m=Gi(d);return m=typeof m=="function"?m:h,bu(Jo(d,1,ti,!0),h,m)});function os(d){if(!d||!d.length)return[];var m=0;return d=Li(d,function(E){if(ti(E))return m=Io(E.length,m),!0}),Ll(m,function(E){return Lr(d,$i(E))})}function Ws(d,m){if(!d||!d.length)return[];var E=os(d);return m==null?E:Lr(E,function(D){return oo(m,h,D)})}var rf=Or(function(d,m){return ti(d)?Za(d,m):[]}),of=Or(function(d){return Wc(Li(d,ti))}),zs=Or(function(d){var m=Gi(d);return ti(m)&&(m=h),Wc(Li(d,ti),Jn(m,2))}),Hs=Or(function(d){var m=Gi(d);return m=typeof m=="function"?m:h,Wc(Li(d,ti),h,m)}),is=Or(os),Kl=Or(function(d){var m=d.length,E=m>1?d[m-1]:h;return E=typeof E=="function"?(d.pop(),E):h,Ws(d,E)});function Qo(d){var m=oe(d);return m.__chain__=!0,m}function af(d,m){return m(d)}var lf=Ol(function(d){var m=d.length,E=m?d[0]:0,D=this.__wrapped__,V=function(J){return Fc(J,d)};return!(m>1||this.__actions__.length)&&D instanceof Pr&&io(E)?((D=D.slice(E,+E+(m?1:0))).__actions__.push({func:af,args:[V],thisArg:h}),new ka(D,this.__chain__).thru(function(J){return m&&!J.length&&J.push(h),J})):this.thru(V)}),Zl=Xl(function(d,m,E){ln.call(d,E)?++d[E]:Ka(d,E,1)}),Op=sd(bp),zi=sd(_p);function ei(d,m){return(mr(d)?Ii:mo)(d,Jn(m,3))}function xh(d,m){return(mr(d)?Tc:ch)(d,Jn(m,3))}var ja=Xl(function(d,m,E){ln.call(d,E)?d[E].push(m):Ka(d,E,[m])}),Fn=Or(function(d,m,E){var D=-1,V=typeof m=="function",J=sa(d)?fn(d.length):[];return mo(d,function(pe){J[++D]=V?oo(m,pe,E):Vi(pe,m,E)}),J}),bd=Xl(function(d,m,E){Ka(d,E,m)});function as(d,m){return(mr(d)?Lr:_a)(d,Jn(m,3))}var _d=Xl(function(d,m,E){d[E?0:1].push(m)},function(){return[[],[]]}),Sh=Or(function(d,m){if(d==null)return[];var E=m.length;return E>1&&$o(d,m[0],m[1])?m=[]:E>2&&$o(m[0],m[1],m[2])&&(m=[m[0]]),ph(d,Jo(m,1),[])}),Xs=ih||function(){return jo.Date.now()};function Ah(d,m,E){return m=E?h:m,m=d&&m==null?d.length:m,Ja(d,A,h,h,h,h,m)}function rl(d,m){var E;if(typeof m!="function")throw new me(g);return d=ct(d),function(){return--d>0&&(E=m.apply(this,arguments)),d<=1&&(m=h),E}}var Ys=Or(function(d,m,E){var D=1;if(E.length){var V=ra(E,Yl(Ys));D|=S}return Ja(d,D,m,E,V)}),ls=Or(function(d,m,E){var D=3;if(E.length){var V=ra(E,Yl(ls));D|=S}return Ja(m,D,d,E,V)});function ol(d,m,E){var D,V,J,pe,_e,Fe,pt=0,gt=!1,Vt=!1,An=!0;if(typeof d!="function")throw new me(g);function On(ar){var or=D,jr=V;return D=V=h,pt=ar,pe=d.apply(jr,or)}function Yn(ar){return pt=ar,_e=ns(Qt,m),gt?On(ar):pe}function kt(ar){var or=ar-Fe;return Fe===h||or>=m||or<0||Vt&&ar-pt>=J}function Qt(){var ar=Xs();if(kt(ar))return dr(ar);_e=ns(Qt,function(or){var jr=m-(or-Fe);return Vt?Ui(jr,J-(or-pt)):jr}(ar))}function dr(ar){return _e=h,An&&D?On(ar):(D=V=h,pe)}function gn(){var ar=Xs(),or=kt(ar);if(D=arguments,V=this,Fe=ar,or){if(_e===h)return Yn(Fe);if(Vt)return cp(_e),_e=ns(Qt,m),On(Fe)}return _e===h&&(_e=ns(Qt,m)),pe}return m=Ut(m)||0,to(E)&&(gt=!!E.leading,J=(Vt="maxWait"in E)?Io(Ut(E.maxWait)||0,m):J,An="trailing"in E?!!E.trailing:An),gn.cancel=function(){_e!==h&&cp(_e),pt=0,D=Fe=V=_e=h},gn.flush=function(){return _e===h?pe:dr(Xs())},gn}var Th=Or(function(d,m){return Qd(d,1,m)}),xp=Or(function(d,m,E){return Qd(d,Ut(m)||0,E)});function Mu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new me(g);var E=function(){var D=arguments,V=m?m.apply(this,D):D[0],J=E.cache;if(J.has(V))return J.get(V);var pe=d.apply(this,D);return E.cache=J.set(V,pe)||J,pe};return E.cache=new(Mu.Cache||qa),E}function Al(d){if(typeof d!="function")throw new me(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}Mu.Cache=qa;var Hi=mh(function(d,m){var E=(m=m.length==1&&mr(m[0])?Lr(m[0],fo(Jn())):Lr(Jo(m,1),fo(Jn()))).length;return Or(function(D){for(var V=-1,J=Ui(D.length,E);++V<J;)D[V]=m[V].call(this,D[V]);return oo(d,this,D)})}),Vn=Or(function(d,m){var E=ra(m,Yl(Vn));return Ja(d,S,h,m,E)}),Mo=Or(function(d,m){var E=ra(m,Yl(Mo));return Ja(d,P,h,m,E)}),Di=Ol(function(d,m){return Ja(d,k,h,h,h,m)});function ua(d,m){return d===m||d!=d&&m!=m}var qv=Is(Ao),Mh=Is(function(d,m){return d>=m}),Pu=Qf(function(){return arguments}())?Qf:function(d){return Po(d)&&ln.call(d,"callee")&&!Zo.call(d,"callee")},mr=fn.isArray,Ph=Sc?fo(Sc):function(d){return Po(d)&&Eo(d)==ze};function sa(d){return d!=null&&Jl(d.length)&&!Tl(d)}function ti(d){return Po(d)&&sa(d)}var Ia=ah||qe,Kv=Uf?fo(Uf):function(d){return Po(d)&&Eo(d)==I};function uf(d){if(!Po(d))return!1;var m=Eo(d);return m==z||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!$(d)}function Tl(d){if(!to(d))return!1;var m=Eo(d);return m==K||m==q||m=="[object AsyncFunction]"||m=="[object Proxy]"}function Sp(d){return typeof d=="number"&&d==ct(d)}function Jl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=R}function to(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function Po(d){return d!=null&&typeof d=="object"}var Oi=Ac?fo(Ac):function(d){return Po(d)&&To(d)==ce};function sf(d){return typeof d=="number"||Po(d)&&Eo(d)==Ne}function $(d){if(!Po(d)||Eo(d)!=Oe)return!1;var m=Ha(d);if(m===null)return!0;var E=ln.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&yr.call(E)==ia}var ie=ji?fo(ji):function(d){return Po(d)&&Eo(d)==Ie},be=ii?fo(ii):function(d){return Po(d)&&To(d)==Pe};function nt(d){return typeof d=="string"||!mr(d)&&Po(d)&&Eo(d)==le}function dt(d){return typeof d=="symbol"||Po(d)&&Eo(d)==ye}var Qe=na?fo(na):function(d){return Po(d)&&Jl(d.length)&&!!Wr[Eo(d)]},st=Is(bl),Nt=Is(function(d,m){return d<=m});function It(d){if(!d)return[];if(sa(d))return nt(d)?Zi(d):pi(d);if(Xa&&d[Xa])return function(E){for(var D,V=[];!(D=E.next()).done;)V.push(D.value);return V}(d[Xa]());var m=To(d);return(m==ce?Ko:m==Pe?ma:gr)(d)}function Ct(d){return d?(d=Ut(d))===j||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function ct(d){var m=Ct(d),E=m%1;return m==m?E?m-E:m:0}function Gt(d){return d?yu(ct(d),0,G):0}function Ut(d){if(typeof d=="number")return d;if(dt(d))return B;if(to(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=to(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=Pa(d);var E=_i.test(d);return E||qo.test(d)?ha(d.slice(2),E?2:8):oi.test(d)?B:+d}function Rt(d){return _l(d,Mt(d))}function wt(d){return d==null?"":aa(d)}var Ye=Eu(function(d,m){if(Su(m)||sa(m))_l(m,Lt(m),d);else for(var E in m)ln.call(m,E)&&Lo(d,E,m[E])}),lt=Eu(function(d,m){_l(m,Mt(m),d)}),Ft=Eu(function(d,m,E,D){_l(m,Mt(m),d,D)}),Kt=Eu(function(d,m,E,D){_l(m,Lt(m),d,D)}),St=Ol(Fc),Jt=Or(function(d,m){d=M(d);var E=-1,D=m.length,V=D>2?m[2]:h;for(V&&$o(m[0],m[1],V)&&(D=1);++E<D;)for(var J=m[E],pe=Mt(J),_e=-1,Fe=pe.length;++_e<Fe;){var pt=pe[_e],gt=d[pt];(gt===h||ua(gt,Ht[pt])&&!ln.call(d,pt))&&(d[pt]=J[pt])}return d}),Tt=Or(function(d){return d.push(h,hp),oo(Cn,h,d)});function Wt(d,m,E){var D=d==null?h:gl(d,m);return D===h?E:D}function Et(d,m){return d!=null&&Us(d,m,np)}var Xt=dp(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),d[m]=E},Nr(zn)),Mn=dp(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),ln.call(d,m)?d[m].push(E):d[m]=[E]},Jn),Wn=Or(Vi);function Lt(d){return sa(d)?Kf(d):Ra(d)}function Mt(d){return sa(d)?Kf(d,!0):fh(d)}var Ot=Eu(function(d,m,E){ed(d,m,E)}),Cn=Eu(function(d,m,E,D){ed(d,m,E,D)}),nr=Ol(function(d,m){var E={};if(d==null)return E;var D=!1;m=Lr(m,function(J){return J=_u(J,d),D||(D=J.length>1),J}),_l(d,hd(d),E),D&&(E=ba(E,7,vp));for(var V=m.length;V--;)rd(E,m[V]);return E}),un=Ol(function(d,m){return d==null?{}:function(E,D){return hh(E,D,function(V,J){return Et(E,J)})}(d,m)});function Qn(d,m){if(d==null)return{};var E=Lr(hd(d),function(D){return[D]});return m=Jn(m),hh(d,E,function(D,V){return m(D,V[0])})}var Gn=dd(Lt),rr=dd(Mt);function gr(d){return d==null?[]:Hu(d,Lt(d))}var ko=wl(function(d,m,E){return m=m.toLowerCase(),d+(E?Bo(m):m)});function Bo(d){return ni(wt(d).toLowerCase())}function cr(d){return(d=wt(d))&&d.replace(Bn,Nc).replace(pl,"")}var Wo=wl(function(d,m,E){return d+(E?"-":"")+m.toLowerCase()}),no=wl(function(d,m,E){return d+(E?" ":"")+m.toLowerCase()}),No=ud("toLowerCase"),Uo=wl(function(d,m,E){return d+(E?"_":"")+m.toLowerCase()}),xo=wl(function(d,m,E){return d+(E?" ":"")+ni(m)}),go=wl(function(d,m,E){return d+(E?" ":"")+m.toUpperCase()}),ni=ud("toUpperCase");function So(d,m,E){return d=wt(d),(m=E?h:m)===h?function(D){return xc.test(D)}(d)?function(D){return D.match(Os)||[]}(d):function(D){return D.match(at)||[]}(d):d.match(m)||[]}var Zn=Or(function(d,m){try{return oo(d,h,m)}catch(E){return uf(E)?E:new Mr(E)}}),ui=Ol(function(d,m){return Ii(m,function(E){E=nl(E),Ka(d,E,Ys(d[E],d))}),d});function Nr(d){return function(){return d}}var Rn=Hc(),fr=Hc(!0);function zn(d){return d}function co(d){return zl(typeof d=="function"?d:ba(d,1))}var La=Or(function(d,m){return function(E){return Vi(E,d,m)}}),Ql=Or(function(d,m){return function(E){return Vi(d,E,m)}});function ve(d,m,E){var D=Lt(m),V=$c(m,D);E!=null||to(m)&&(V.length||!D.length)||(E=m,m=d,d=this,V=$c(m,Lt(m)));var J=!(to(E)&&"chain"in E&&!E.chain),pe=Tl(d);return Ii(V,function(_e){var Fe=m[_e];d[_e]=Fe,pe&&(d.prototype[_e]=function(){var pt=this.__chain__;if(J||pt){var gt=d(this.__wrapped__),Vt=gt.__actions__=pi(this.__actions__);return Vt.push({func:Fe,args:arguments,thisArg:d}),gt.__chain__=pt,gt}return Fe.apply(d,ai([this.value()],arguments))})}),d}function rt(){}var Je=cd(Lr),tn=cd(Gf),hr=cd(Pc);function ue(d){return ql(d)?$i(nl(d)):function(m){return function(E){return gl(E,m)}}(d)}var ee=El(),Ae=El(!0);function Ge(){return[]}function qe(){return!1}var ke=js(function(d,m){return d+m},0),Te=qc("ceil"),Le=js(function(d,m){return d/m},1),de=qc("floor"),we,se=js(function(d,m){return d*m},1),Ue=qc("round"),Ze=js(function(d,m){return d-m},0);return oe.after=function(d,m){if(typeof m!="function")throw new me(g);return d=ct(d),function(){if(--d<1)return m.apply(this,arguments)}},oe.ary=Ah,oe.assign=Ye,oe.assignIn=lt,oe.assignInWith=Ft,oe.assignWith=Kt,oe.at=St,oe.before=rl,oe.bind=Ys,oe.bindAll=ui,oe.bindKey=ls,oe.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return mr(d)?d:[d]},oe.chain=Qo,oe.chunk=function(d,m,E){m=(E?$o(d,m,E):m===h)?1:Io(ct(m),0);var D=d==null?0:d.length;if(!D||m<1)return[];for(var V=0,J=0,pe=fn(Dc(D/m));V<D;)pe[J++]=Da(d,V,V+=m);return pe},oe.compact=function(d){for(var m=-1,E=d==null?0:d.length,D=0,V=[];++m<E;){var J=d[m];J&&(V[D++]=J)}return V},oe.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),E=arguments[0],D=d;D--;)m[D-1]=arguments[D];return ai(mr(E)?pi(E):[E],Jo(m,1))},oe.cond=function(d){var m=d==null?0:d.length,E=Jn();return d=m?Lr(d,function(D){if(typeof D[1]!="function")throw new me(g);return[E(D[0]),D[1]]}):[],Or(function(D){for(var V=-1;++V<m;){var J=d[V];if(oo(J[0],this,D))return oo(J[1],this,D)}})},oe.conforms=function(d){return function(m){var E=Lt(m);return function(D){return Jd(D,m,E)}}(ba(d,1))},oe.constant=Nr,oe.countBy=Zl,oe.create=function(d,m){var E=Zu(d);return m==null?E:Wl(E,m)},oe.curry=function d(m,E,D){var V=Ja(m,8,h,h,h,h,h,E=D?h:E);return V.placeholder=d.placeholder,V},oe.curryRight=function d(m,E,D){var V=Ja(m,O,h,h,h,h,h,E=D?h:E);return V.placeholder=d.placeholder,V},oe.debounce=ol,oe.defaults=Jt,oe.defaultsDeep=Tt,oe.defer=Th,oe.delay=xp,oe.difference=gh,oe.differenceBy=bh,oe.differenceWith=_h,oe.drop=function(d,m,E){var D=d==null?0:d.length;return D?Da(d,(m=E||m===h?1:ct(m))<0?0:m,D):[]},oe.dropRight=function(d,m,E){var D=d==null?0:d.length;return D?Da(d,0,(m=D-(m=E||m===h?1:ct(m)))<0?0:m):[]},oe.dropRightWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3),!0,!0):[]},oe.dropWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3),!0):[]},oe.fill=function(d,m,E,D){var V=d==null?0:d.length;return V?(E&&typeof E!="number"&&$o(d,m,E)&&(E=0,D=V),function(J,pe,_e,Fe){var pt=J.length;for((_e=ct(_e))<0&&(_e=-_e>pt?0:pt+_e),(Fe=Fe===h||Fe>pt?pt:ct(Fe))<0&&(Fe+=pt),Fe=_e>Fe?0:Gt(Fe);_e<Fe;)J[_e++]=pe;return J}(d,m,E,D)):[]},oe.filter=function(d,m){return(mr(d)?Li:zr)(d,Jn(m,3))},oe.flatMap=function(d,m){return Jo(as(d,m),1)},oe.flatMapDeep=function(d,m){return Jo(as(d,m),j)},oe.flatMapDepth=function(d,m,E){return E=E===h?1:ct(E),Jo(as(d,m),E)},oe.flatten=wp,oe.flattenDeep=function(d){return d!=null&&d.length?Jo(d,j):[]},oe.flattenDepth=function(d,m){return d!=null&&d.length?Jo(d,m=m===h?1:ct(m)):[]},oe.flip=function(d){return Ja(d,512)},oe.flow=Rn,oe.flowRight=fr,oe.fromPairs=function(d){for(var m=-1,E=d==null?0:d.length,D={};++m<E;){var V=d[m];D[V[0]]=V[1]}return D},oe.functions=function(d){return d==null?[]:$c(d,Lt(d))},oe.functionsIn=function(d){return d==null?[]:$c(d,Mt(d))},oe.groupBy=ja,oe.initial=function(d){return d!=null&&d.length?Da(d,0,-1):[]},oe.intersection=wh,oe.intersectionBy=Eh,oe.intersectionWith=Oh,oe.invert=Xt,oe.invertBy=Mn,oe.invokeMap=Fn,oe.iteratee=co,oe.keyBy=bd,oe.keys=Lt,oe.keysIn=Mt,oe.map=as,oe.mapKeys=function(d,m){var E={};return m=Jn(m,3),Nn(d,function(D,V,J){Ka(E,m(D,V,J),D)}),E},oe.mapValues=function(d,m){var E={};return m=Jn(m,3),Nn(d,function(D,V,J){Ka(E,V,m(D,V,J))}),E},oe.matches=function(d){return rp(ba(d,1))},oe.matchesProperty=function(d,m){return op(d,ba(m,1))},oe.memoize=Mu,oe.merge=Ot,oe.mergeWith=Cn,oe.method=La,oe.methodOf=Ql,oe.mixin=ve,oe.negate=Al,oe.nthArg=function(d){return d=ct(d),Or(function(m){return dh(m,d)})},oe.omit=nr,oe.omitBy=function(d,m){return Qn(d,Al(Jn(m)))},oe.once=function(d){return rl(2,d)},oe.orderBy=function(d,m,E,D){return d==null?[]:(mr(m)||(m=m==null?[]:[m]),mr(E=D?h:E)||(E=E==null?[]:[E]),ph(d,m,E))},oe.over=Je,oe.overArgs=Hi,oe.overEvery=tn,oe.overSome=hr,oe.partial=Vn,oe.partialRight=Mo,oe.partition=_d,oe.pick=un,oe.pickBy=Qn,oe.property=ue,oe.propertyOf=function(d){return function(m){return d==null?h:gl(d,m)}},oe.pull=rs,oe.pullAll=tf,oe.pullAllBy=function(d,m,E){return d&&d.length&&m&&m.length?ip(d,m,Jn(E,2)):d},oe.pullAllWith=function(d,m,E){return d&&d.length&&m&&m.length?ip(d,m,h,E):d},oe.pullAt=la,oe.range=ee,oe.rangeRight=Ae,oe.rearg=Di,oe.reject=function(d,m){return(mr(d)?Li:zr)(d,Al(Jn(m,3)))},oe.remove=function(d,m){var E=[];if(!d||!d.length)return E;var D=-1,V=[],J=d.length;for(m=Jn(m,3);++D<J;){var pe=d[D];m(pe,D,d)&&(E.push(pe),V.push(D))}return Cs(d,V),E},oe.rest=function(d,m){if(typeof d!="function")throw new me(g);return Or(d,m=m===h?m:ct(m))},oe.reverse=Ca,oe.sampleSize=function(d,m,E){return m=(E?$o(d,m,E):m===h)?1:ct(m),(mr(d)?Kd:lp)(d,m)},oe.set=function(d,m,E){return d==null?d:gu(d,m,E)},oe.setWith=function(d,m,E,D){return D=typeof D=="function"?D:h,d==null?d:gu(d,m,E,D)},oe.shuffle=function(d){return(mr(d)?sh:Yv)(d)},oe.slice=function(d,m,E){var D=d==null?0:d.length;return D?(E&&typeof E!="number"&&$o(d,m,E)?(m=0,E=D):(m=m==null?0:ct(m),E=E===h?D:ct(E)),Da(d,m,E)):[]},oe.sortBy=Sh,oe.sortedUniq=function(d){return d&&d.length?vh(d):[]},oe.sortedUniqBy=function(d,m){return d&&d.length?vh(d,Jn(m,2)):[]},oe.split=function(d,m,E){return E&&typeof E!="number"&&$o(d,m,E)&&(m=E=h),(E=E===h?G:E>>>0)?(d=wt(d))&&(typeof m=="string"||m!=null&&!ie(m))&&!(m=aa(m))&&za(d)?wu(Zi(d),0,E):d.split(m,E):[]},oe.spread=function(d,m){if(typeof d!="function")throw new me(g);return m=m==null?0:Io(ct(m),0),Or(function(E){var D=E[m],V=wu(E,0,m);return D&&ai(V,D),oo(d,this,V)})},oe.tail=function(d){var m=d==null?0:d.length;return m?Da(d,1,m):[]},oe.take=function(d,m,E){return d&&d.length?Da(d,0,(m=E||m===h?1:ct(m))<0?0:m):[]},oe.takeRight=function(d,m,E){var D=d==null?0:d.length;return D?Da(d,(m=D-(m=E||m===h?1:ct(m)))<0?0:m,D):[]},oe.takeRightWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3),!1,!0):[]},oe.takeWhile=function(d,m){return d&&d.length?Gc(d,Jn(m,3)):[]},oe.tap=function(d,m){return m(d),d},oe.throttle=function(d,m,E){var D=!0,V=!0;if(typeof d!="function")throw new me(g);return to(E)&&(D="leading"in E?!!E.leading:D,V="trailing"in E?!!E.trailing:V),ol(d,m,{leading:D,maxWait:m,trailing:V})},oe.thru=af,oe.toArray=It,oe.toPairs=Gn,oe.toPairsIn=rr,oe.toPath=function(d){return mr(d)?Lr(d,nl):dt(d)?[d]:pi(gp(wt(d)))},oe.toPlainObject=Rt,oe.transform=function(d,m,E){var D=mr(d),V=D||Ia(d)||Qe(d);if(m=Jn(m,4),E==null){var J=d&&d.constructor;E=V?D?new J:[]:to(d)&&Tl(J)?Zu(Ha(d)):{}}return(V?Ii:Nn)(d,function(pe,_e,Fe){return m(E,pe,_e,Fe)}),E},oe.unary=function(d){return Ah(d,1)},oe.union=gd,oe.unionBy=Wi,oe.unionWith=nf,oe.uniq=function(d){return d&&d.length?bu(d):[]},oe.uniqBy=function(d,m){return d&&d.length?bu(d,Jn(m,2)):[]},oe.uniqWith=function(d,m){return m=typeof m=="function"?m:h,d&&d.length?bu(d,h,m):[]},oe.unset=function(d,m){return d==null||rd(d,m)},oe.unzip=os,oe.unzipWith=Ws,oe.update=function(d,m,E){return d==null?d:Ju(d,m,ad(E))},oe.updateWith=function(d,m,E,D){return D=typeof D=="function"?D:h,d==null?d:Ju(d,m,ad(E),D)},oe.values=gr,oe.valuesIn=function(d){return d==null?[]:Hu(d,Mt(d))},oe.without=rf,oe.words=So,oe.wrap=function(d,m){return Vn(ad(m),d)},oe.xor=of,oe.xorBy=zs,oe.xorWith=Hs,oe.zip=is,oe.zipObject=function(d,m){return od(d||[],m||[],Lo)},oe.zipObjectDeep=function(d,m){return od(d||[],m||[],gu)},oe.zipWith=Kl,oe.entries=Gn,oe.entriesIn=rr,oe.extend=lt,oe.extendWith=Ft,ve(oe,oe),oe.add=ke,oe.attempt=Zn,oe.camelCase=ko,oe.capitalize=Bo,oe.ceil=Te,oe.clamp=function(d,m,E){return E===h&&(E=m,m=h),E!==h&&(E=(E=Ut(E))==E?E:0),m!==h&&(m=(m=Ut(m))==m?m:0),yu(Ut(d),m,E)},oe.clone=function(d){return ba(d,4)},oe.cloneDeep=function(d){return ba(d,5)},oe.cloneDeepWith=function(d,m){return ba(d,5,m=typeof m=="function"?m:h)},oe.cloneWith=function(d,m){return ba(d,4,m=typeof m=="function"?m:h)},oe.conformsTo=function(d,m){return m==null||Jd(d,m,Lt(m))},oe.deburr=cr,oe.defaultTo=function(d,m){return d==null||d!=d?m:d},oe.divide=Le,oe.endsWith=function(d,m,E){d=wt(d),m=aa(m);var D=d.length,V=E=E===h?D:yu(ct(E),0,D);return(E-=m.length)>=0&&d.slice(E,V)==m},oe.eq=ua,oe.escape=function(d){return(d=wt(d))&&xn.test(d)?d.replace(pn,Go):d},oe.escapeRegExp=function(d){return(d=wt(d))&&ro.test(d)?d.replace(Ur,"\\$&"):d},oe.every=function(d,m,E){var D=mr(d)?Gf:ep;return E&&$o(d,m,E)&&(m=h),D(d,Jn(m,3))},oe.find=Op,oe.findIndex=bp,oe.findKey=function(d,m){return Ga(d,Jn(m,3),Nn)},oe.findLast=zi,oe.findLastIndex=_p,oe.findLastKey=function(d,m){return Ga(d,Jn(m,3),so)},oe.floor=de,oe.forEach=ei,oe.forEachRight=xh,oe.forIn=function(d,m){return d==null?d:Er(d,Jn(m,3),Mt)},oe.forInRight=function(d,m){return d==null?d:uo(d,Jn(m,3),Mt)},oe.forOwn=function(d,m){return d&&Nn(d,Jn(m,3))},oe.forOwnRight=function(d,m){return d&&so(d,Jn(m,3))},oe.get=Wt,oe.gt=qv,oe.gte=Mh,oe.has=function(d,m){return d!=null&&Us(d,m,tp)},oe.hasIn=Et,oe.head=Ep,oe.identity=zn,oe.includes=function(d,m,E,D){d=sa(d)?d:gr(d),E=E&&!D?ct(E):0;var V=d.length;return E<0&&(E=Io(V+E,0)),nt(d)?E<=V&&d.indexOf(m,E)>-1:!!V&&cu(d,m,E)>-1},oe.indexOf=function(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var V=E==null?0:ct(E);return V<0&&(V=Io(D+V,0)),cu(d,m,V)},oe.inRange=function(d,m,E){return m=Ct(m),E===h?(E=m,m=0):E=Ct(E),function(D,V,J){return D>=Ui(V,J)&&D<Io(V,J)}(d=Ut(d),m,E)},oe.invoke=Wn,oe.isArguments=Pu,oe.isArray=mr,oe.isArrayBuffer=Ph,oe.isArrayLike=sa,oe.isArrayLikeObject=ti,oe.isBoolean=function(d){return d===!0||d===!1||Po(d)&&Eo(d)==W},oe.isBuffer=Ia,oe.isDate=Kv,oe.isElement=function(d){return Po(d)&&d.nodeType===1&&!$(d)},oe.isEmpty=function(d){if(d==null)return!0;if(sa(d)&&(mr(d)||typeof d=="string"||typeof d.splice=="function"||Ia(d)||Qe(d)||Pu(d)))return!d.length;var m=To(d);if(m==ce||m==Pe)return!d.size;if(Su(d))return!Ra(d).length;for(var E in d)if(ln.call(d,E))return!1;return!0},oe.isEqual=function(d,m){return Ds(d,m)},oe.isEqualWith=function(d,m,E){var D=(E=typeof E=="function"?E:h)?E(d,m):h;return D===h?Ds(d,m,h,E):!!D},oe.isError=uf,oe.isFinite=function(d){return typeof d=="number"&&qu(d)},oe.isFunction=Tl,oe.isInteger=Sp,oe.isLength=Jl,oe.isMap=Oi,oe.isMatch=function(d,m){return d===m||Na(d,m,Zc(m))},oe.isMatchWith=function(d,m,E){return E=typeof E=="function"?E:h,Na(d,m,Zc(m),E)},oe.isNaN=function(d){return sf(d)&&d!=+d},oe.isNative=function(d){if(tl(d))throw new Mr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return mu(d)},oe.isNil=function(d){return d==null},oe.isNull=function(d){return d===null},oe.isNumber=sf,oe.isObject=to,oe.isObjectLike=Po,oe.isPlainObject=$,oe.isRegExp=ie,oe.isSafeInteger=function(d){return Sp(d)&&d>=-9007199254740991&&d<=R},oe.isSet=be,oe.isString=nt,oe.isSymbol=dt,oe.isTypedArray=Qe,oe.isUndefined=function(d){return d===h},oe.isWeakMap=function(d){return Po(d)&&To(d)==Me},oe.isWeakSet=function(d){return Po(d)&&Eo(d)=="[object WeakSet]"},oe.join=function(d,m){return d==null?"":Cc.call(d,m)},oe.kebabCase=Wo,oe.last=Gi,oe.lastIndexOf=function(d,m,E){var D=d==null?0:d.length;if(!D)return-1;var V=D;return E!==h&&(V=(V=ct(E))<0?Io(D+V,0):Ui(V,D-1)),m==m?function(J,pe,_e){for(var Fe=_e+1;Fe--;)if(J[Fe]===pe)return Fe;return Fe}(d,m,V):Fi(d,va,V,!0)},oe.lowerCase=no,oe.lowerFirst=No,oe.lt=st,oe.lte=Nt,oe.max=function(d){return d&&d.length?Fo(d,zn,Ao):h},oe.maxBy=function(d,m){return d&&d.length?Fo(d,Jn(m,2),Ao):h},oe.mean=function(d){return Tr(d,zn)},oe.meanBy=function(d,m){return Tr(d,Jn(m,2))},oe.min=function(d){return d&&d.length?Fo(d,zn,bl):h},oe.minBy=function(d,m){return d&&d.length?Fo(d,Jn(m,2),bl):h},oe.stubArray=Ge,oe.stubFalse=qe,oe.stubObject=function(){return{}},oe.stubString=function(){return""},oe.stubTrue=function(){return!0},oe.multiply=se,oe.nth=function(d,m){return d&&d.length?dh(d,ct(m)):h},oe.noConflict=function(){return jo._===this&&(jo._=wo),this},oe.noop=rt,oe.now=Xs,oe.pad=function(d,m,E){d=wt(d);var D=(m=ct(m))?Bi(d):0;if(!m||D>=m)return d;var V=(m-D)/2;return Xc(Yu(V),E)+d+Xc(Dc(V),E)},oe.padEnd=function(d,m,E){d=wt(d);var D=(m=ct(m))?Bi(d):0;return m&&D<m?d+Xc(m-D,E):d},oe.padStart=function(d,m,E){d=wt(d);var D=(m=ct(m))?Bi(d):0;return m&&D<m?Xc(m-D,E)+d:d},oe.parseInt=function(d,m,E){return E||m==null?m=0:m&&(m=+m),Yf(wt(d).replace(jn,""),m||0)},oe.random=function(d,m,E){if(E&&typeof E!="boolean"&&$o(d,m,E)&&(m=E=h),E===h&&(typeof m=="boolean"?(E=m,m=h):typeof d=="boolean"&&(E=d,d=h)),d===h&&m===h?(d=0,m=1):(d=Ct(d),m===h?(m=d,d=0):m=Ct(m)),d>m){var D=d;d=m,m=D}if(E||d%1||m%1){var V=Ps();return Ui(d+V*(m-d+uu("1e-"+((V+"").length-1))),m)}return ap(d,m)},oe.reduce=function(d,m,E){var D=mr(d)?As:di,V=arguments.length<3;return D(d,Jn(m,4),E,V,mo)},oe.reduceRight=function(d,m,E){var D=mr(d)?Wf:di,V=arguments.length<3;return D(d,Jn(m,4),E,V,ch)},oe.repeat=function(d,m,E){return m=(E?$o(d,m,E):m===h)?1:ct(m),Uc(wt(d),m)},oe.replace=function(){var d=arguments,m=wt(d[0]);return d.length<3?m:m.replace(d[1],d[2])},oe.result=function(d,m,E){var D=-1,V=(m=_u(m,d)).length;for(V||(V=1,d=h);++D<V;){var J=d==null?h:d[nl(m[D])];J===h&&(D=V,J=E),d=Tl(J)?J.call(d):J}return d},oe.round=Ue,oe.runInContext=ut,oe.sample=function(d){return(mr(d)?Zf:Hv)(d)},oe.size=function(d){if(d==null)return 0;if(sa(d))return nt(d)?Bi(d):d.length;var m=To(d);return m==ce||m==Pe?d.size:Ra(d).length},oe.snakeCase=Uo,oe.some=function(d,m,E){var D=mr(d)?Pc:up;return E&&$o(d,m,E)&&(m=h),D(d,Jn(m,3))},oe.sortedIndex=function(d,m){return td(d,m)},oe.sortedIndexBy=function(d,m,E){return nd(d,m,Jn(E,2))},oe.sortedIndexOf=function(d,m){var E=d==null?0:d.length;if(E){var D=td(d,m);if(D<E&&ua(d[D],m))return D}return-1},oe.sortedLastIndex=function(d,m){return td(d,m,!0)},oe.sortedLastIndexBy=function(d,m,E){return nd(d,m,Jn(E,2),!0)},oe.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var E=td(d,m,!0)-1;if(ua(d[E],m))return E}return-1},oe.startCase=xo,oe.startsWith=function(d,m,E){return d=wt(d),E=E==null?0:yu(ct(E),0,d.length),m=aa(m),d.slice(E,E+m.length)==m},oe.subtract=Ze,oe.sum=function(d){return d&&d.length?fu(d,zn):0},oe.sumBy=function(d,m){return d&&d.length?fu(d,Jn(m,2)):0},oe.template=function(d,m,E){var D=oe.templateSettings;E&&$o(d,m,E)&&(m=h),d=wt(d),m=Ft({},m,D,pp);var V,J,pe=Ft({},m.imports,D.imports,pp),_e=Lt(pe),Fe=Hu(pe,_e),pt=0,gt=m.interpolate||Xn,Vt="__p += '",An=U((m.escape||Xn).source+"|"+gt.source+"|"+(gt===Kn?kn:Xn).source+"|"+(m.evaluate||Xn).source+"|$","g"),On="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ff+"]")+`
`;d.replace(An,function(Qt,dr,gn,ar,or,jr){return gn||(gn=ar),Vt+=d.slice(pt,jr).replace(ir,Fl),dr&&(V=!0,Vt+=`' +
__e(`+dr+`) +
'`),or&&(J=!0,Vt+=`';
`+or+`;
__p += '`),gn&&(Vt+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),pt=jr+Qt.length,Qt}),Vt+=`';
`;var Yn=ln.call(m,"variable")&&m.variable;if(Yn){if(en.test(Yn))throw new Mr("Invalid `variable` option passed into `_.template`")}else Vt=`with (obj) {
`+Vt+`
}
`;Vt=(J?Vt.replace(xt,""):Vt).replace(rn,"$1").replace(yn,"$1;"),Vt="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var kt=Zn(function(){return po(_e,On+"return "+Vt).apply(h,Fe)});if(kt.source=Vt,uf(kt))throw kt;return kt},oe.times=function(d,m){if((d=ct(d))<1||d>R)return[];var E=G,D=Ui(d,G);m=Jn(m),d-=G;for(var V=Ll(D,m);++E<d;)m(E);return V},oe.toFinite=Ct,oe.toInteger=ct,oe.toLength=Gt,oe.toLower=function(d){return wt(d).toLowerCase()},oe.toNumber=Ut,oe.toSafeInteger=function(d){return d?yu(ct(d),-9007199254740991,R):d===0?d:0},oe.toString=wt,oe.toUpper=function(d){return wt(d).toUpperCase()},oe.trim=function(d,m,E){if((d=wt(d))&&(E||m===h))return Pa(d);if(!d||!(m=aa(m)))return d;var D=Zi(d),V=Zi(m);return wu(D,ya(D,V),kc(D,V)+1).join("")},oe.trimEnd=function(d,m,E){if((d=wt(d))&&(E||m===h))return d.slice(0,li(d)+1);if(!d||!(m=aa(m)))return d;var D=Zi(d);return wu(D,0,kc(D,Zi(m))+1).join("")},oe.trimStart=function(d,m,E){if((d=wt(d))&&(E||m===h))return d.replace(jn,"");if(!d||!(m=aa(m)))return d;var D=Zi(d);return wu(D,ya(D,Zi(m))).join("")},oe.truncate=function(d,m){var E=30,D="...";if(to(m)){var V="separator"in m?m.separator:V;E="length"in m?ct(m.length):E,D="omission"in m?aa(m.omission):D}var J=(d=wt(d)).length;if(za(d)){var pe=Zi(d);J=pe.length}if(E>=J)return d;var _e=E-Bi(D);if(_e<1)return D;var Fe=pe?wu(pe,0,_e).join(""):d.slice(0,_e);if(V===h)return Fe+D;if(pe&&(_e+=Fe.length-_e),ie(V)){if(d.slice(_e).search(V)){var pt,gt=Fe;for(V.global||(V=U(V.source,wt(_r.exec(V))+"g")),V.lastIndex=0;pt=V.exec(gt);)var Vt=pt.index;Fe=Fe.slice(0,Vt===h?_e:Vt)}}else if(d.indexOf(aa(V),_e)!=_e){var An=Fe.lastIndexOf(V);An>-1&&(Fe=Fe.slice(0,An))}return Fe+D},oe.unescape=function(d){return(d=wt(d))&&ft.test(d)?d.replace(Tn,oa):d},oe.uniqueId=function(d){var m=++Gr;return wt(d)+m},oe.upperCase=go,oe.upperFirst=ni,oe.each=ei,oe.eachRight=xh,oe.first=Ep,ve(oe,(we={},Nn(oe,function(d,m){ln.call(oe.prototype,m)||(we[m]=d)}),we),{chain:!1}),oe.VERSION="4.17.21",Ii(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){oe[d].placeholder=oe}),Ii(["drop","take"],function(d,m){Pr.prototype[d]=function(E){E=E===h?1:Io(ct(E),0);var D=this.__filtered__&&!m?new Pr(this):this.clone();return D.__filtered__?D.__takeCount__=Ui(E,D.__takeCount__):D.__views__.push({size:Ui(E,G),type:d+(D.__dir__<0?"Right":"")}),D},Pr.prototype[d+"Right"]=function(E){return this.reverse()[d](E).reverse()}}),Ii(["filter","map","takeWhile"],function(d,m){var E=m+1,D=E==1||E==3;Pr.prototype[d]=function(V){var J=this.clone();return J.__iteratees__.push({iteratee:Jn(V,3),type:E}),J.__filtered__=J.__filtered__||D,J}}),Ii(["head","last"],function(d,m){var E="take"+(m?"Right":"");Pr.prototype[d]=function(){return this[E](1).value()[0]}}),Ii(["initial","tail"],function(d,m){var E="drop"+(m?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[E](1)}}),Pr.prototype.compact=function(){return this.filter(zn)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=Or(function(d,m){return typeof d=="function"?new Pr(this):this.map(function(E){return Vi(E,d,m)})}),Pr.prototype.reject=function(d){return this.filter(Al(Jn(d)))},Pr.prototype.slice=function(d,m){d=ct(d);var E=this;return E.__filtered__&&(d>0||m<0)?new Pr(E):(d<0?E=E.takeRight(-d):d&&(E=E.drop(d)),m!==h&&(E=(m=ct(m))<0?E.dropRight(-m):E.take(m-d)),E)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(G)},Nn(Pr.prototype,function(d,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),D=/^(?:head|last)$/.test(m),V=oe[D?"take"+(m=="last"?"Right":""):m],J=D||/^find/.test(m);V&&(oe.prototype[m]=function(){var pe=this.__wrapped__,_e=D?[1]:arguments,Fe=pe instanceof Pr,pt=_e[0],gt=Fe||mr(pe),Vt=function(dr){var gn=V.apply(oe,ai([dr],_e));return D&&An?gn[0]:gn};gt&&E&&typeof pt=="function"&&pt.length!=1&&(Fe=gt=!1);var An=this.__chain__,On=!!this.__actions__.length,Yn=J&&!An,kt=Fe&&!On;if(!J&&gt){pe=kt?pe:new Pr(this);var Qt=d.apply(pe,_e);return Qt.__actions__.push({func:af,args:[Vt],thisArg:h}),new ka(Qt,An)}return Yn&&kt?d.apply(this,_e):(Qt=this.thru(Vt),Yn?D?Qt.value()[0]:Qt.value():Qt)})}),Ii(["pop","push","shift","sort","splice","unshift"],function(d){var m=We[d],E=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",D=/^(?:pop|shift)$/.test(d);oe.prototype[d]=function(){var V=arguments;if(D&&!this.__chain__){var J=this.value();return m.apply(mr(J)?J:[],V)}return this[E](function(pe){return m.apply(mr(pe)?pe:[],V)})}}),Nn(Pr.prototype,function(d,m){var E=oe[m];if(E){var D=E.name+"";ln.call(vu,D)||(vu[D]=[]),vu[D].push({name:m,func:E})}}),vu[Ou(h,2).name]=[{name:"wrapper",func:h}],Pr.prototype.clone=function(){var d=new Pr(this.__wrapped__);return d.__actions__=pi(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=pi(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=pi(this.__views__),d},Pr.prototype.reverse=function(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Pr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,E=mr(d),D=m<0,V=E?d.length:0,J=function(jr,Un,er){for(var zo=-1,ot=er.length;++zo<ot;){var eu=er[zo],xi=eu.size;switch(eu.type){case"drop":jr+=xi;break;case"dropRight":Un-=xi;break;case"take":Un=Ui(Un,jr+xi);break;case"takeRight":jr=Io(jr,Un-xi)}}return{start:jr,end:Un}}(0,V,this.__views__),pe=J.start,_e=J.end,Fe=_e-pe,pt=D?_e:pe-1,gt=this.__iteratees__,Vt=gt.length,An=0,On=Ui(Fe,this.__takeCount__);if(!E||!D&&V==Fe&&On==Fe)return yh(d,this.__actions__);var Yn=[];e:for(;Fe--&&An<On;){for(var kt=-1,Qt=d[pt+=m];++kt<Vt;){var dr=gt[kt],gn=dr.iteratee,ar=dr.type,or=gn(Qt);if(ar==2)Qt=or;else if(!or){if(ar==1)continue e;break e}}Yn[An++]=Qt}return Yn},oe.prototype.at=lf,oe.prototype.chain=function(){return Qo(this)},oe.prototype.commit=function(){return new ka(this.value(),this.__chain__)},oe.prototype.next=function(){this.__values__===h&&(this.__values__=It(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?h:this.__values__[this.__index__++]}},oe.prototype.plant=function(d){for(var m,E=this;E instanceof Ul;){var D=md(E);D.__index__=0,D.__values__=h,m?V.__wrapped__=D:m=D;var V=D;E=E.__wrapped__}return V.__wrapped__=d,m},oe.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof Pr){var m=d;return this.__actions__.length&&(m=new Pr(this)),(m=m.reverse()).__actions__.push({func:af,args:[Ca],thisArg:h}),new ka(m,this.__chain__)}return this.thru(Ca)},oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=function(){return yh(this.__wrapped__,this.__actions__)},oe.prototype.first=oe.prototype.head,Xa&&(oe.prototype[Xa]=function(){return this}),oe}();jo._=Ni,(v=(function(){return Ni}).call(o,r,o,c))===h||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),v=r(33),h=r(87),g=r(62),b=r(174),w=r(28),O=s.TypeError,S=w("toPrimitive");n.exports=function(P,A){if(!v(P)||h(P))return P;var k,j=g(P,S);if(j){if(A===void 0&&(A="default"),k=c(j,P,A),!v(k)||h(k))return k;throw O("Can't convert object to primitive value")}return A===void 0&&(A="number"),b(P,A)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),v=r(50),h=r(38);n.exports=function(g,b){for(var w=c(b),O=h.f,S=v.f,P=0;P<w.length;P++){var A=w[P];s(g,A)||O(g,A,S(b,A))}}},function(n,o,r){var s=r(46),c=r(15),v=r(74),h=r(112),g=r(32),b=c([].concat);n.exports=s("Reflect","ownKeys")||function(w){var O=v.f(g(w)),S=h.f;return S?b(O,S(w)):O}},function(n,o,r){var s=r(15),c=r(35),v=r(41),h=r(137).indexOf,g=r(72),b=s([].push);n.exports=function(w,O){var S,P=v(w),A=0,k=[];for(S in P)!c(g,S)&&c(P,S)&&b(k,S);for(;O.length>A;)c(P,S=O[A++])&&(~h(k,S)||b(k,S));return k}},function(n,o,r){var s=r(41),c=r(75),v=r(45),h=function(g){return function(b,w,O){var S,P=s(b),A=v(P),k=c(O,A);if(g&&w!=w){for(;A>k;)if((S=P[k++])!=S)return!0}else for(;A>k;k++)if((g||k in P)&&P[k]===w)return g||k||0;return!g&&-1}};n.exports={includes:h(!0),indexOf:h(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),v=r(74).f,h=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&s(b)=="Window"?function(w){try{return v(w)}catch{return h(g)}}(b):v(c(b))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),v=r(140),h=r(38).f;n.exports=function(g){var b=s.Symbol||(s.Symbol={});c(b,g)||h(b,g,{value:v.f(g)})}},function(n,o,r){var s,c,v,h=r(18),g=r(30),b=r(60),w=r(101),O=r(42),S=r(28),P=r(71),A=S("iterator"),k=!1;[].keys&&("next"in(v=[].keys())?(c=w(w(v)))!==Object.prototype&&(s=c):k=!0),s==null||h(function(){var j={};return s[A].call(j)!==j})?s={}:P&&(s=b(s)),g(s[A])||O(s,A,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:k}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),v=r(72),h=r(33),g=r(35),b=r(38).f,w=r(74),O=r(139),S=r(183),P=r(90),A=r(185),k=!1,j=P("meta"),R=0,B=function(H){b(H,j,{value:{objectID:"O"+R++,weakData:{}}})},G=n.exports={enable:function(){G.enable=function(){},k=!0;var H=w.f,Y=c([].splice),Q={};Q[j]=1,H(Q).length&&(w.f=function(W){for(var I=H(W),z=0,K=I.length;z<K;z++)if(I[z]===j){Y(I,z,1);break}return I},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(H,Y){if(!h(H))return typeof H=="symbol"?H:(typeof H=="string"?"S":"P")+H;if(!g(H,j)){if(!S(H))return"F";if(!Y)return"E";B(H)}return H[j].objectID},getWeakData:function(H,Y){if(!g(H,j)){if(!S(H))return!0;if(!Y)return!1;B(H)}return H[j].weakData},onFreeze:function(H){return A&&k&&S(H)&&!g(H,j)&&B(H),H}};v[j]=!0},function(n,o,r){var s=r(28),c=r(80),v=s("iterator"),h=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||h[v]===g)}},function(n,o,r){var s=r(7),c=r(34),v=r(56),h=r(32),g=r(88),b=r(118),w=s.TypeError;n.exports=function(O,S){var P=arguments.length<2?b(O):S;if(v(P))return h(c(P,O));throw w(g(O)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),v=r(62);n.exports=function(h,g,b){var w,O;c(h);try{if(!(w=v(h,"return"))){if(g==="throw")throw b;return b}w=s(w,h)}catch(S){O=!0,w=S}if(g==="throw")throw b;if(O)throw w;return c(w),b}},function(n,o,r){var s=r(30),c=r(33),v=r(102);n.exports=function(h,g,b){var w,O;return v&&s(w=g.constructor)&&w!==b&&c(O=w.prototype)&&O!==b.prototype&&v(h,O),h}},function(n,o,r){var s=r(42);n.exports=function(c,v,h){for(var g in v)s(c,g,v[g],h);return c}},function(n,o,r){var s=r(46),c=r(38),v=r(28),h=r(36),g=v("species");n.exports=function(b){var w=s(b),O=c.f;h&&w&&!w[g]&&O(w,g,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),v=r(39),h=r(44),g=s("".charAt),b=s("".charCodeAt),w=s("".slice),O=function(S){return function(P,A){var k,j,R=v(h(P)),B=c(A),G=R.length;return B<0||B>=G?S?"":void 0:(k=b(R,B))<55296||k>56319||B+1===G||(j=b(R,B+1))<56320||j>57343?S?g(R,B):k:S?w(R,B,B+2):j-56320+(k-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,o,r){var s=r(18),c=r(7).RegExp,v=s(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),h=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:v}},function(n,o,r){var s=r(16),c=r(79).find,v=r(100),h="find",g=!0;h in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),v(h)},function(n,o,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,o,r){var s=r(16),c=r(15),v=r(197),h=r(44),g=r(39),b=r(198),w=c("".indexOf);s({target:"String",proto:!0,forced:!b("includes")},{includes:function(O){return!!~w(g(h(this)),g(v(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(h){var g;return s(h)&&((g=h[v])!==void 0?!!g:c(h)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=r(162),g=s("".replace),b="["+h+"]",w=RegExp("^"+b+b+"*"),O=RegExp(b+b+"*$"),S=function(P){return function(A){var k=v(c(A));return 1&P&&(k=g(k,w,"")),2&P&&(k=g(k,O,"")),k}};n.exports={start:S(1),end:S(2),trim:S(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function g(R){if(r===setTimeout)return setTimeout(R,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(R,0);try{return r(R,0)}catch{try{return r.call(null,R,0)}catch{return r.call(this,R,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:h}catch{s=h}})();var b,w=[],O=!1,S=-1;function P(){O&&b&&(O=!1,b.length?w=b.concat(w):S=-1,w.length&&A())}function A(){if(!O){var R=g(P);O=!0;for(var B=w.length;B;){for(b=w,w=[];++S<B;)b&&b[S].run();S=-1,B=w.length}b=null,O=!1,function(G){if(s===clearTimeout)return clearTimeout(G);if((s===h||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(G);try{s(G)}catch{try{return s.call(null,G)}catch{return s.call(this,G)}}}(R)}}function k(R,B){this.fun=R,this.array=B}function j(){}c.nextTick=function(R){var B=new Array(arguments.length-1);if(arguments.length>1)for(var G=1;G<arguments.length;G++)B[G-1]=arguments[G];w.push(new k(R,B)),w.length!==1||O||g(A)},k.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=j,c.addListener=j,c.once=j,c.off=j,c.removeListener=j,c.removeAllListeners=j,c.emit=j,c.prependListener=j,c.prependOnceListener=j,c.listeners=function(R){return[]},c.binding=function(R){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(R){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(h,g){var b,w=s(h).constructor;return w===void 0||(b=s(w)[v])==null?g:c(b)}},function(n,o,r){var s=r(7),c=r(99),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),v=r(32),h=r(94),g=r(39),b=r(44),w=r(62),O=r(124),S=r(125);c("match",function(P,A,k){return[function(j){var R=b(this),B=j==null?void 0:w(j,P);return B?s(B,j,R):new RegExp(j)[P](g(R))},function(j){var R=v(this),B=g(j),G=k(A,R,B);if(G.done)return G.value;if(!R.global)return S(R,B);var H=R.unicode;R.lastIndex=0;for(var Y,Q=[],W=0;(Y=S(R,B))!==null;){var I=g(Y[0]);Q[W]=I,I===""&&(R.lastIndex=O(B,h(R.lastIndex),H)),W++}return W===0?null:Q}]})},function(n,o,r){var s,c,v,h,g=r(7),b=r(76),w=r(64),O=r(30),S=r(35),P=r(18),A=r(138),k=r(98),j=r(91),R=r(169),B=r(128),G=g.setImmediate,H=g.clearImmediate,Y=g.process,Q=g.Dispatch,W=g.Function,I=g.MessageChannel,z=g.String,K=0,q={},ce="onreadystatechange";try{s=g.location}catch{}var Ne=function(Pe){if(S(q,Pe)){var le=q[Pe];delete q[Pe],le()}},Oe=function(Pe){return function(){Ne(Pe)}},Xe=function(Pe){Ne(Pe.data)},Ie=function(Pe){g.postMessage(z(Pe),s.protocol+"//"+s.host)};G&&H||(G=function(Pe){var le=k(arguments,1);return q[++K]=function(){b(O(Pe)?Pe:W(Pe),void 0,le)},c(K),K},H=function(Pe){delete q[Pe]},B?c=function(Pe){Y.nextTick(Oe(Pe))}:Q&&Q.now?c=function(Pe){Q.now(Oe(Pe))}:I&&!R?(h=(v=new I).port2,v.port1.onmessage=Xe,c=w(h.postMessage,h)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!P(Ie)?(c=Ie,g.addEventListener("message",Xe,!1)):c=ce in j("script")?function(Pe){A.appendChild(j("script")).onreadystatechange=function(){A.removeChild(this),Ne(Pe)}}:function(Pe){setTimeout(Oe(Pe),0)}),n.exports={set:G,clear:H}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(v){var h,g;this.promise=new v(function(b,w){if(h!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");h=b,g=w}),this.resolve=s(h),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return Y});var c=r(1);function v(I){throw new Error("[mobx-utils] "+I)}function h(I,z){z===void 0&&(z="Illegal state"),I||v(z)}var g=function(I){return I&&I!==Object.prototype&&Object.getOwnPropertyNames(I).concat(g(Object.getPrototypeOf(I))||[])},b=function(I){return function(z){var K=g(z);return K.filter(function(q,ce){return K.indexOf(q)===ce})}(I).filter(function(z){return z!=="constructor"&&!~z.indexOf("__")})},w="pending",O="fulfilled",S="rejected";function P(I){switch(this.state){case w:return I.pending&&I.pending(this.value);case S:return I.rejected&&I.rejected(this.value);case O:return I.fulfilled?I.fulfilled(this.value):this.value}}function A(I,z){if(h(arguments.length<=2,"fromPromise expects up to two arguments"),h(typeof I=="function"||typeof I=="object"&&I&&typeof I.then=="function","Please pass a promise or function to fromPromise"),I.isPromiseBasedObservable===!0)return I;typeof I=="function"&&(I=new Promise(I));var K=I;I.then(Object(c.k)("observableFromPromise-resolve",function(ce){K.value=ce,K.state=O}),Object(c.k)("observableFromPromise-reject",function(ce){K.value=ce,K.state=S})),K.isPromiseBasedObservable=!0,K.case=P;var q=z&&z.state===O?z.value:void 0;return Object(c.q)(K,{value:q,state:w},{},{deep:!1}),K}(function(I){I.reject=Object(c.k)("fromPromise.reject",function(z){var K=I(Promise.reject(z));return K.state=S,K.value=z,K}),I.resolve=Object(c.k)("fromPromise.resolve",function(z){z===void 0&&(z=void 0);var K=I(Promise.resolve(z));return K.state=O,K.value=z,K})})(A||(A={}));var k=function(I,z,K,q){var ce,Ne=arguments.length,Oe=Ne<3?z:q===null?q=Object.getOwnPropertyDescriptor(z,K):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(I,z,K,q);else for(var Xe=I.length-1;Xe>=0;Xe--)(ce=I[Xe])&&(Oe=(Ne<3?ce(Oe):Ne>3?ce(z,K,Oe):ce(z,K))||Oe);return Ne>3&&Oe&&Object.defineProperty(z,K,Oe),Oe};(function(){function I(z,K){var q=this;Object(c.G)(function(){q.current=K,q.subscription=z.subscribe(q)})}I.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},I.prototype.next=function(z){this.current=z},I.prototype.complete=function(){this.dispose()},I.prototype.error=function(z){this.current=z,this.dispose()},k([c.C.ref],I.prototype,"current",void 0),k([c.k.bound],I.prototype,"next",null),k([c.k.bound],I.prototype,"complete",null),k([c.k.bound],I.prototype,"error",null)})();var j=function(){return j=Object.assign||function(I){for(var z,K=1,q=arguments.length;K<q;K++)for(var ce in z=arguments[K])Object.prototype.hasOwnProperty.call(z,ce)&&(I[ce]=z[ce]);return I},j.apply(this,arguments)},R=function(I,z,K,q){var ce,Ne=arguments.length,Oe=Ne<3?z:q===null?q=Object.getOwnPropertyDescriptor(z,K):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(I,z,K,q);else for(var Xe=I.length-1;Xe>=0;Xe--)(ce=I[Xe])&&(Oe=(Ne<3?ce(Oe):Ne>3?ce(z,K,Oe):ce(z,K))||Oe);return Ne>3&&Oe&&Object.defineProperty(z,K,Oe),Oe},B=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function I(z){var K=this;this.model=z,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(q){return K.localValues.has(q)},h(Object(c.A)(z),"createViewModel expects an observable object"),b(z).forEach(function(q){if(q!==c.a&&q!=="__mobxDidRunLazyInitializers"){if(h(B.indexOf(q)===-1,"The propertyname "+q+" is reserved and cannot be used with viewModels"),Object(c.w)(z,q)){var ce=Object(c.h)(z,q).derivation;K.localComputedValues.set(q,Object(c.m)(ce.bind(K)))}var Ne=Object.getOwnPropertyDescriptor(z,q),Oe=Ne?{enumerable:Ne.enumerable}:{};Object.defineProperty(K,q,j(j({},Oe),{configurable:!0,get:function(){return Object(c.w)(z,q)?K.localComputedValues.get(q).get():K.isPropertyDirty(q)?K.localValues.get(q):K.model[q]},set:Object(c.k)(function(Xe){Xe!==K.model[q]?K.localValues.set(q,Xe):K.localValues.delete(q)})}))}})}Object.defineProperty(I.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),I.prototype.submit=function(){var z=this;Object(c.B)(this.localValues).forEach(function(K){var q=z.localValues.get(K),ce=z.model[K];Object(c.y)(ce)?ce.replace(q):Object(c.z)(ce)?(ce.clear(),ce.merge(q)):Object(c.v)(q)||(z.model[K]=q)}),this.localValues.clear()},I.prototype.reset=function(){this.localValues.clear()},I.prototype.resetProperty=function(z){this.localValues.delete(z)},R([c.m],I.prototype,"isDirty",null),R([c.m],I.prototype,"changedValues",null),R([c.k.bound],I.prototype,"submit",null),R([c.k.bound],I.prototype,"reset",null),R([c.k.bound],I.prototype,"resetProperty",null)})();function G(I){if(!I)return"ROOT";for(var z=[];I.parent;)z.push(I.path),I=I.parent;return z.reverse().join("/")}function H(I){return Object(c.A)(I)||Object(c.y)(I)||Object(c.z)(I)}function Y(I,z){var K=new WeakMap;function q(Oe){var Xe=K.get(Oe.object);(function(Ie,Pe){switch(Ie.type){case"add":ce(Ie.newValue,Pe,Ie.name);break;case"update":Ne(Ie.oldValue),ce(Ie.newValue,Pe,Ie.name||""+Ie.index);break;case"remove":case"delete":Ne(Ie.oldValue);break;case"splice":Ie.removed.map(Ne),Ie.added.forEach(function(Me,ze){return ce(Me,Pe,""+(Ie.index+ze))});for(var le=Ie.index+Ie.addedCount;le<Ie.object.length;le++)if(H(Ie.object[le])){var ye=K.get(Ie.object[le]);ye&&(ye.path=""+le)}}})(Oe,Xe),z(Oe,G(Xe),I)}function ce(Oe,Xe,Ie){if(H(Oe)){var Pe=K.get(Oe);if(Pe){if(Pe.parent!==Xe||Pe.path!==Ie)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+G(Xe)+"/"+Ie+"', but it already exists at '"+G(Pe.parent)+"/"+Pe.path+"'")}else{var le={parent:Xe,path:Ie,dispose:Object(c.D)(Oe,q)};K.set(Oe,le),Object(c.p)(Oe).forEach(function(ye){var Me=ye[0];return ce(ye[1],le,Me)})}}}function Ne(Oe){if(H(Oe)){var Xe=K.get(Oe);if(!Xe)return;K.delete(Oe),Xe.dispose(),Object(c.L)(Oe).forEach(Ne)}}return ce(I,void 0,""),function(){Ne(I)}}var Q,W=(Q=function(I,z){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,q){K.__proto__=q}||function(K,q){for(var ce in q)q.hasOwnProperty(ce)&&(K[ce]=q[ce])},Q(I,z)},function(I,z){function K(){this.constructor=I}Q(I,z),I.prototype=z===null?Object.create(z):(K.prototype=z.prototype,new K)});(function(I){function z(K,q,ce){var Ne=ce===void 0?{}:ce,Oe=Ne.name,Xe=Oe===void 0?"ogm"+(1e3*Math.random()|0):Oe,Ie=Ne.keyToName,Pe=Ie===void 0?function(Me){return""+Me}:Ie,le=I.call(this)||this;le._keyToName=Pe,le._groupBy=q,le._ogmInfoKey=Symbol("ogmInfo"+Xe),le._base=K;for(var ye=0;ye<K.length;ye++)le._addItem(K[ye]);return le._disposeBaseObserver=Object(c.D)(le._base,function(Me){if(Me.type==="splice")Object(c.J)(function(){for(var ze=0,je=Me.removed;ze<je.length;ze++){var it=je[ze];le._removeItem(it)}for(var bt=0,Pt=Me.added;bt<Pt.length;bt++){var Yt=Pt[bt];le._addItem(Yt)}});else{if(Me.type!=="update")throw new Error("illegal state");Object(c.J)(function(){le._removeItem(Me.oldValue),le._addItem(Me.newValue)})}}),le}W(z,I),z.prototype.clear=function(){throw new Error("not supported")},z.prototype.delete=function(K){throw new Error("not supported")},z.prototype.set=function(K,q){throw new Error("not supported")},z.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var q=this._base[K];q[this._ogmInfoKey].reaction(),delete q[this._ogmInfoKey]}},z.prototype._getGroupArr=function(K){var q=I.prototype.get.call(this,K);return q===void 0&&(q=Object(c.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),I.prototype.set.call(this,K,q)),q},z.prototype._removeFromGroupArr=function(K,q){var ce=I.prototype.get.call(this,K);ce.length===1?I.prototype.delete.call(this,K):(q===ce.length-1||(ce[q]=ce[ce.length-1],ce[q][this._ogmInfoKey].groupArrIndex=q),ce.length--)},z.prototype._addItem=function(K){var q=this,ce=this._groupBy(K),Ne=this._getGroupArr(ce),Oe={groupByValue:ce,groupArrIndex:Ne.length,reaction:Object(c.F)(function(){return q._groupBy(K)},function(Xe,Ie){var Pe=K[q._ogmInfoKey];q._removeFromGroupArr(Pe.groupByValue,Pe.groupArrIndex);var le=q._getGroupArr(Xe),ye=le.length;le.push(K),Pe.groupByValue=Xe,Pe.groupArrIndex=ye})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Oe}),Ne.push(K)},z.prototype._removeItem=function(K){var q=K[this._ogmInfoKey];this._removeFromGroupArr(q.groupByValue,q.groupArrIndex),q.reaction(),delete K[this._ogmInfoKey]}})(c.b),function(){function I(z,K){this.base=z,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var q=this.closest=this.root=z,ce=0;ce<this.args.length-1&&(q=q.get(K[ce]));ce++)this.closest=q;this.closestIdx=ce}return I.prototype.exists=function(){this.assertNotDisposed();var z=this.args.length;return this.closestIdx>=z-1&&this.closest.has(this.args[z-1])},I.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},I.prototype.set=function(z){this.assertNotDisposed();for(var K=this.args.length,q=this.closest,ce=this.closestIdx;ce<K-1;ce++){var Ne=new Map;q.set(this.args[ce],Ne),q=Ne}this.closestIdx=K-1,this.closest=q,q.set(this.args[K-1],z)},I.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var z=this.args.length;this.closest.delete(this.args[z-1]);for(var K=this.root,q=[K],ce=0;ce<z-1;ce++)K=K.get(this.args[ce]),q.push(K);for(ce=q.length-1;ce>0;ce--)q[ce].size===0&&q[ce-1].delete(this.args[ce-1]);this.isDisposed=!0},I.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},I}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,v,h){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)b[111+P]="f"+P;for(P=0;P<=9;++P)b[P+96]=P.toString();H.prototype.bind=function(Y,Q,W){var I=this;return Y=Y instanceof Array?Y:[Y],I._bindMultiple.call(I,Y,Q,W),I},H.prototype.unbind=function(Y,Q){return this.bind.call(this,Y,function(){},Q)},H.prototype.trigger=function(Y,Q){var W=this;return W._directMap[Y+":"+Q]&&W._directMap[Y+":"+Q]({},Y),W},H.prototype.reset=function(){var Y=this;return Y._callbacks={},Y._directMap={},Y},H.prototype.stopCallback=function(Y,Q){if((" "+Q.className+" ").indexOf(" mousetrap ")>-1||G(Q,this.target))return!1;if("composedPath"in Y&&typeof Y.composedPath=="function"){var W=Y.composedPath()[0];W!==Y.target&&(Q=W)}return Q.tagName=="INPUT"||Q.tagName=="SELECT"||Q.tagName=="TEXTAREA"||Q.isContentEditable},H.prototype.handleKey=function(){var Y=this;return Y._handleKey.apply(Y,arguments)},H.addKeycodes=function(Y){for(var Q in Y)Y.hasOwnProperty(Q)&&(b[Q]=Y[Q]);g=null},H.init=function(){var Y=H(v);for(var Q in Y)Q.charAt(0)!=="_"&&(H[Q]=function(W){return function(){return Y[W].apply(Y,arguments)}}(Q))},H.init(),c.Mousetrap=H,n.exports&&(n.exports=H),(s=(function(){return H}).call(o,r,o,n))===void 0||(n.exports=s)}function A(Y,Q,W){Y.addEventListener?Y.addEventListener(Q,W,!1):Y.attachEvent("on"+Q,W)}function k(Y){if(Y.type=="keypress"){var Q=String.fromCharCode(Y.which);return Y.shiftKey||(Q=Q.toLowerCase()),Q}return b[Y.which]?b[Y.which]:w[Y.which]?w[Y.which]:String.fromCharCode(Y.which).toLowerCase()}function j(Y){return Y=="shift"||Y=="ctrl"||Y=="alt"||Y=="meta"}function R(Y,Q,W){return W||(W=function(){if(!g)for(var I in g={},b)I>95&&I<112||b.hasOwnProperty(I)&&(g[b[I]]=I);return g}()[Y]?"keydown":"keypress"),W=="keypress"&&Q.length&&(W="keydown"),W}function B(Y,Q){var W,I,z,K=[];for(W=function(q){return q==="+"?["+"]:(q=q.replace(/\+{2}/g,"+plus")).split("+")}(Y),z=0;z<W.length;++z)I=W[z],S[I]&&(I=S[I]),Q&&Q!="keypress"&&O[I]&&(I=O[I],K.push("shift")),j(I)&&K.push(I);return{key:I,modifiers:K,action:Q=R(I,K,Q)}}function G(Y,Q){return Y!==null&&Y!==v&&(Y===Q||G(Y.parentNode,Q))}function H(Y){var Q=this;if(Y=Y||v,!(Q instanceof H))return new H(Y);Q.target=Y,Q._callbacks={},Q._directMap={};var W,I={},z=!1,K=!1,q=!1;function ce(le){le=le||{};var ye,Me=!1;for(ye in I)le[ye]?Me=!0:I[ye]=0;Me||(q=!1)}function Ne(le,ye,Me,ze,je,it){var bt,Pt,Yt,Ce,ge=[],Se=Me.type;if(!Q._callbacks[le])return[];for(Se=="keyup"&&j(le)&&(ye=[le]),bt=0;bt<Q._callbacks[le].length;++bt)if(Pt=Q._callbacks[le][bt],(ze||!Pt.seq||I[Pt.seq]==Pt.level)&&Se==Pt.action&&(Se=="keypress"&&!Me.metaKey&&!Me.ctrlKey||(Yt=ye,Ce=Pt.modifiers,Yt.sort().join(",")===Ce.sort().join(",")))){var ht=!ze&&Pt.combo==je,zt=ze&&Pt.seq==ze&&Pt.level==it;(ht||zt)&&Q._callbacks[le].splice(bt,1),ge.push(Pt)}return ge}function Oe(le,ye,Me,ze){Q.stopCallback(ye,ye.target||ye.srcElement,Me,ze)||le(ye,Me)===!1&&(function(je){je.preventDefault?je.preventDefault():je.returnValue=!1}(ye),function(je){je.stopPropagation?je.stopPropagation():je.cancelBubble=!0}(ye))}function Xe(le){typeof le.which!="number"&&(le.which=le.keyCode);var ye=k(le);ye&&(le.type!="keyup"||z!==ye?Q.handleKey(ye,function(Me){var ze=[];return Me.shiftKey&&ze.push("shift"),Me.altKey&&ze.push("alt"),Me.ctrlKey&&ze.push("ctrl"),Me.metaKey&&ze.push("meta"),ze}(le),le):z=!1)}function Ie(le,ye,Me,ze){function je(Yt){return function(){q=Yt,++I[le],clearTimeout(W),W=setTimeout(ce,1e3)}}function it(Yt){Oe(Me,Yt,le),ze!=="keyup"&&(z=k(Yt)),setTimeout(ce,10)}I[le]=0;for(var bt=0;bt<ye.length;++bt){var Pt=bt+1===ye.length?it:je(ze||B(ye[bt+1]).action);Pe(ye[bt],Pt,ze,le,bt)}}function Pe(le,ye,Me,ze,je){Q._directMap[le+":"+Me]=ye;var it,bt=(le=le.replace(/\s+/g," ")).split(" ");bt.length>1?Ie(le,bt,ye,Me):(it=B(le,Me),Q._callbacks[it.key]=Q._callbacks[it.key]||[],Ne(it.key,it.modifiers,{type:it.action},ze,le,je),Q._callbacks[it.key][ze?"unshift":"push"]({callback:ye,modifiers:it.modifiers,action:it.action,seq:ze,level:je,combo:le}))}Q._handleKey=function(le,ye,Me){var ze,je=Ne(le,ye,Me),it={},bt=0,Pt=!1;for(ze=0;ze<je.length;++ze)je[ze].seq&&(bt=Math.max(bt,je[ze].level));for(ze=0;ze<je.length;++ze)if(je[ze].seq){if(je[ze].level!=bt)continue;Pt=!0,it[je[ze].seq]=1,Oe(je[ze].callback,Me,je[ze].combo,je[ze].seq)}else Pt||Oe(je[ze].callback,Me,je[ze].combo);var Yt=Me.type=="keypress"&&K;Me.type!=q||j(le)||Yt||ce(it),K=Pt&&Me.type=="keydown"},Q._bindMultiple=function(le,ye,Me){for(var ze=0;ze<le.length;++ze)Pe(le[ze],ye,Me)},A(Y,"keypress",Xe),A(Y,"keydown",Xe),A(Y,"keyup",Xe)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),v=r(30),h=r(33),g=s.TypeError;n.exports=function(b,w){var O,S;if(w==="string"&&v(O=b.toString)&&!h(S=c(O,b))||v(O=b.valueOf)&&!h(S=c(O,b))||w!=="string"&&v(O=b.toString)&&!h(S=c(O,b)))return S;throw g("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),v=r(92),h=s.WeakMap;n.exports=c(h)&&/native code/.test(v(h))},function(n,o,r){var s=r(36),c=r(38),v=r(32),h=r(41),g=r(77);n.exports=s?Object.defineProperties:function(b,w){v(b);for(var O,S=h(w),P=g(w),A=P.length,k=0;A>k;)c.f(b,O=P[k++],S[O]);return b}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),v=r(99),h=r(33),g=r(28)("species"),b=s.Array;n.exports=function(w){var O;return c(w)&&(O=w.constructor,(v(O)&&(O===b||c(O.prototype))||h(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?b:O}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),h=r(78),g=r(80),b=function(){return this};n.exports=function(w,O,S,P){var A=O+" Iterator";return w.prototype=c(s,{next:v(+!P,S)}),h(w,A,!1,!0),g[A]=b,w}},function(n,o,r){var s=r(7),c=r(30),v=s.String,h=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw h("Can't set "+v(g)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(95),g=r(42),b=r(144),w=r(117),O=r(119),S=r(30),P=r(33),A=r(18),k=r(120),j=r(78),R=r(148);n.exports=function(B,G,H){var Y=B.indexOf("Map")!==-1,Q=B.indexOf("Weak")!==-1,W=Y?"set":"add",I=c[B],z=I&&I.prototype,K=I,q={},ce=function(le){var ye=v(z[le]);g(z,le,le=="add"?function(Me){return ye(this,Me===0?0:Me),this}:le=="delete"?function(Me){return!(Q&&!P(Me))&&ye(this,Me===0?0:Me)}:le=="get"?function(Me){return Q&&!P(Me)?void 0:ye(this,Me===0?0:Me)}:le=="has"?function(Me){return!(Q&&!P(Me))&&ye(this,Me===0?0:Me)}:function(Me,ze){return ye(this,Me===0?0:Me,ze),this})};if(h(B,!S(I)||!(Q||z.forEach&&!A(function(){new I().entries().next()}))))K=H.getConstructor(G,B,Y,W),b.enable();else if(h(B,!0)){var Ne=new K,Oe=Ne[W](Q?{}:-0,1)!=Ne,Xe=A(function(){Ne.has(1)}),Ie=k(function(le){new I(le)}),Pe=!Q&&A(function(){for(var le=new I,ye=5;ye--;)le[W](ye,ye);return!le.has(-0)});Ie||((K=G(function(le,ye){O(le,z);var Me=R(new I,le,K);return ye!=null&&w(ye,Me[W],{that:Me,AS_ENTRIES:Y}),Me})).prototype=z,z.constructor=K),(Xe||Pe)&&(ce("delete"),ce("has"),Y&&ce("get")),(Pe||Oe)&&ce(W),Q&&z.clear&&delete z.clear}return q[B]=K,s({global:!0,forced:K!=I},q),j(K,B),Q||H.setStrong(K,B,Y),K}},function(n,o,r){var s=r(18),c=r(33),v=r(51),h=r(184),g=Object.isExtensible,b=s(function(){});n.exports=b||h?function(w){return!!c(w)&&(!h||v(w)!="ArrayBuffer")&&(!g||g(w))}:g},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),v=r(149),h=r(64),g=r(119),b=r(117),w=r(116),O=r(150),S=r(36),P=r(144).fastKey,A=r(58),k=A.set,j=A.getterFor;n.exports={getConstructor:function(R,B,G,H){var Y=R(function(K,q){g(K,Q),k(K,{type:B,index:c(null),first:void 0,last:void 0,size:0}),S||(K.size=0),q!=null&&b(q,K[H],{that:K,AS_ENTRIES:G})}),Q=Y.prototype,W=j(B),I=function(K,q,ce){var Ne,Oe,Xe=W(K),Ie=z(K,q);return Ie?Ie.value=ce:(Xe.last=Ie={index:Oe=P(q,!0),key:q,value:ce,previous:Ne=Xe.last,next:void 0,removed:!1},Xe.first||(Xe.first=Ie),Ne&&(Ne.next=Ie),S?Xe.size++:K.size++,Oe!=="F"&&(Xe.index[Oe]=Ie)),K},z=function(K,q){var ce,Ne=W(K),Oe=P(q);if(Oe!=="F")return Ne.index[Oe];for(ce=Ne.first;ce;ce=ce.next)if(ce.key==q)return ce};return v(Q,{clear:function(){for(var K=W(this),q=K.index,ce=K.first;ce;)ce.removed=!0,ce.previous&&(ce.previous=ce.previous.next=void 0),delete q[ce.index],ce=ce.next;K.first=K.last=void 0,S?K.size=0:this.size=0},delete:function(K){var q=this,ce=W(q),Ne=z(q,K);if(Ne){var Oe=Ne.next,Xe=Ne.previous;delete ce.index[Ne.index],Ne.removed=!0,Xe&&(Xe.next=Oe),Oe&&(Oe.previous=Xe),ce.first==Ne&&(ce.first=Oe),ce.last==Ne&&(ce.last=Xe),S?ce.size--:q.size--}return!!Ne},forEach:function(K){for(var q,ce=W(this),Ne=h(K,arguments.length>1?arguments[1]:void 0);q=q?q.next:ce.first;)for(Ne(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(K){return!!z(this,K)}}),v(Q,G?{get:function(K){var q=z(this,K);return q&&q.value},set:function(K,q){return I(this,K===0?0:K,q)}}:{add:function(K){return I(this,K=K===0?0:K,K)}}),S&&s(Q,"size",{get:function(){return W(this).size}}),Y},setStrong:function(R,B,G){var H=B+" Iterator",Y=j(B),Q=j(H);w(R,B,function(W,I){k(this,{type:H,target:W,state:Y(W),kind:I,last:void 0})},function(){for(var W=Q(this),I=W.kind,z=W.last;z&&z.removed;)z=z.previous;return W.target&&(W.last=z=z?z.next:W.state.first)?I=="keys"?{value:z.key,done:!1}:I=="values"?{value:z.value,done:!1}:{value:[z.key,z.value],done:!1}:(W.target=void 0,{value:void 0,done:!0})},G?"entries":"values",!G,!0),O(B)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(40),g=r(189),b=r(145),w=r(99),O=r(45),S=r(63),P=r(146),A=r(118),k=s.Array;n.exports=function(j){var R=h(j),B=w(this),G=arguments.length,H=G>1?arguments[1]:void 0,Y=H!==void 0;Y&&(H=c(H,G>2?arguments[2]:void 0));var Q,W,I,z,K,q,ce=A(R),Ne=0;if(!ce||this==k&&b(ce))for(Q=O(R),W=B?new this(Q):k(Q);Q>Ne;Ne++)q=Y?H(R[Ne],Ne):R[Ne],S(W,Ne,q);else for(K=(z=P(R,ce)).next,W=B?new this:[];!(I=v(K,z)).done;Ne++)q=Y?g(z,H,[I.value,Ne],!0):I.value,S(W,Ne,q);return W.length=Ne,W}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(v,h,g,b){try{return b?h(s(g)[0],g[1]):h(g)}catch(w){c(v,"throw",w)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),v=r(56),h=r(40),g=r(45),b=r(39),w=r(18),O=r(193),S=r(121),P=r(194),A=r(195),k=r(70),j=r(196),R=[],B=c(R.sort),G=c(R.push),H=w(function(){R.sort(void 0)}),Y=w(function(){R.sort(null)}),Q=S("sort"),W=!w(function(){if(k)return k<70;if(!(P&&P>3)){if(A)return!0;if(j)return j<603;var I,z,K,q,ce="";for(I=65;I<76;I++){switch(z=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(q=0;q<47;q++)R.push({k:z+q,v:K})}for(R.sort(function(Ne,Oe){return Oe.v-Ne.v}),q=0;q<R.length;q++)z=R[q].k.charAt(0),ce.charAt(ce.length-1)!==z&&(ce+=z);return ce!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:H||!Y||!Q||!W},{sort:function(I){I!==void 0&&v(I);var z=h(this);if(W)return I===void 0?B(z):B(z,I);var K,q,ce=[],Ne=g(z);for(q=0;q<Ne;q++)q in z&&G(ce,z[q]);for(O(ce,function(Oe){return function(Xe,Ie){return Ie===void 0?-1:Xe===void 0?1:Oe!==void 0?+Oe(Xe,Ie)||0:b(Xe)>b(Ie)?1:-1}}(I)),K=ce.length,q=0;q<K;)z[q]=ce[q++];for(;q<Ne;)delete z[q++];return z}})},function(n,o,r){var s=r(114),c=Math.floor,v=function(b,w){var O=b.length,S=c(O/2);return O<8?h(b,w):g(b,v(s(b,0,S),w),v(s(b,S),w),w)},h=function(b,w){for(var O,S,P=b.length,A=1;A<P;){for(S=A,O=b[A];S&&w(b[S-1],O)>0;)b[S]=b[--S];S!==A++&&(b[S]=O)}return b},g=function(b,w,O,S){for(var P=w.length,A=O.length,k=0,j=0;k<P||j<A;)b[k+j]=k<P&&j<A?S(w[k],O[j])<=0?w[k++]:O[j++]:k<P?w[k++]:O[j++];return b};n.exports=v},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(h){if(c(h))throw v("The method doesn't accept regular expressions");return h}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(h){return c(function(){return!!v[h]()||"​᠎"[h]()!=="​᠎"||s&&v[h].name!==h})}},function(n,o,r){var s=r(15),c=r(40),v=Math.floor,h=s("".charAt),g=s("".replace),b=s("".slice),w=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(S,P,A,k,j,R){var B=A+S.length,G=k.length,H=O;return j!==void 0&&(j=c(j),H=w),g(R,H,function(Y,Q){var W;switch(h(Q,0)){case"$":return"$";case"&":return S;case"`":return b(P,0,A);case"'":return b(P,B);case"<":W=j[b(Q,1,-1)];break;default:var I=+Q;if(I===0)return Y;if(I>G){var z=v(I/10);return z===0?Y:z<=G?k[z-1]===void 0?h(Q,1):k[z-1]+h(Q,1):Y}W=k[I-1]}return W===void 0?"":W})}},function(n,o,r){var s=r(36),c=r(15),v=r(34),h=r(18),g=r(77),b=r(112),w=r(84),O=r(40),S=r(85),P=Object.assign,A=Object.defineProperty,k=c([].concat);n.exports=!P||h(function(){if(s&&P({b:1},P(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var j={},R={},B=Symbol(),G="abcdefghijklmnopqrst";return j[B]=7,G.split("").forEach(function(H){R[H]=H}),P({},j)[B]!=7||g(P({},R)).join("")!=G})?function(j,R){for(var B=O(j),G=arguments.length,H=1,Y=b.f,Q=w.f;G>H;)for(var W,I=S(arguments[H++]),z=Y?k(g(I),Y(I)):g(I),K=z.length,q=0;K>q;)W=z[q++],s&&!v(Q,I,W)||(B[W]=I[W]);return B}:P},function(n,o,r){var s=r(7),c=r(15),v=r(56),h=r(33),g=r(35),b=r(98),w=s.Function,O=c([].concat),S=c([].join),P={},A=function(k,j,R){if(!g(P,j)){for(var B=[],G=0;G<j;G++)B[G]="a["+G+"]";P[j]=w("C,a","return new C("+S(B,",")+")")}return P[j](k,R)};n.exports=w.bind||function(k){var j=v(this),R=j.prototype,B=b(arguments,1),G=function(){var H=O(B,b(arguments));return this instanceof G?A(j,H.length,H):j.apply(k,H)};return h(R)&&(G.prototype=R),G}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=/"/g,g=s("".replace);n.exports=function(b,w,O,S){var P=v(c(b)),A="<"+w;return O!==""&&(A+=" "+O+'="'+g(v(S),h,"&quot;")+'"'),A+">"+P+"</"+w+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,v,h,g=r(16),b=r(71),w=r(7),O=r(46),S=r(34),P=r(209),A=r(42),k=r(149),j=r(102),R=r(78),B=r(150),G=r(56),H=r(30),Y=r(33),Q=r(119),W=r(92),I=r(117),z=r(120),K=r(164),q=r(168).set,ce=r(210),Ne=r(213),Oe=r(214),Xe=r(170),Ie=r(215),Pe=r(58),le=r(95),ye=r(28),Me=r(216),ze=r(128),je=r(70),it=ye("species"),bt="Promise",Pt=Pe.getterFor(bt),Yt=Pe.set,Ce=Pe.getterFor(bt),ge=P&&P.prototype,Se=P,ht=ge,zt=w.TypeError,xt=w.document,rn=w.process,yn=Xe.f,Tn=yn,pn=!!(xt&&xt.createEvent&&w.dispatchEvent),ft=H(w.PromiseRejectionEvent),xn="unhandledrejection",Be=!1,mn=le(bt,function(){var De=W(Se),at=De!==String(Se);if(!at&&je===66||b&&!ht.finally)return!0;if(je>=51&&/native code/.test(De))return!1;var en=new Se(function(kn){kn(1)}),qt=function(kn){kn(function(){},function(){})};return(en.constructor={})[it]=qt,!(Be=en.then(function(){})instanceof qt)||!at&&Me&&!ft}),Kn=mn||!z(function(De){Se.all(De).catch(function(){})}),re=function(De){var at;return!(!Y(De)||!H(at=De.then))&&at},$n=function(De,at){if(!De.notified){De.notified=!0;var en=De.reactions;ce(function(){for(var qt=De.value,kn=De.state==1,_r=0;en.length>_r;){var oi,_i,Vo,qo=en[_r++],Sn=kn?qo.ok:qo.fail,Bn=qo.resolve,Xn=qo.reject,ir=qo.domain;try{Sn?(kn||(De.rejection===2&&jn(De),De.rejection=1),Sn===!0?oi=qt:(ir&&ir.enter(),oi=Sn(qt),ir&&(ir.exit(),Vo=!0)),oi===qo.promise?Xn(zt("Promise-chain cycle")):(_i=re(oi))?S(_i,oi,Bn,Xn):Bn(oi)):Xn(qt)}catch(Kr){ir&&!Vo&&ir.exit(),Xn(Kr)}}De.reactions=[],De.notified=!1,at&&!De.rejection&&Ur(De)})}},xr=function(De,at,en){var qt,kn;pn?((qt=xt.createEvent("Event")).promise=at,qt.reason=en,qt.initEvent(De,!1,!0),w.dispatchEvent(qt)):qt={promise:at,reason:en},!ft&&(kn=w["on"+De])?kn(qt):De===xn&&Oe("Unhandled promise rejection",en)},Ur=function(De){S(q,w,function(){var at,en=De.facade,qt=De.value;if(ro(De)&&(at=Ie(function(){ze?rn.emit("unhandledRejection",qt,en):xr(xn,en,qt)}),De.rejection=ze||ro(De)?2:1,at.error))throw at.value})},ro=function(De){return De.rejection!==1&&!De.parent},jn=function(De){S(q,w,function(){var at=De.facade;ze?rn.emit("rejectionHandled",at):xr("rejectionhandled",at,De.value)})},Co=function(De,at,en){return function(qt){De(at,qt,en)}},Ee=function(De,at,en){De.done||(De.done=!0,en&&(De=en),De.value=at,De.state=2,$n(De,!0))},Ke=function(De,at,en){if(!De.done){De.done=!0,en&&(De=en);try{if(De.facade===at)throw zt("Promise can't be resolved itself");var qt=re(at);qt?ce(function(){var kn={done:!1};try{S(qt,at,Co(Ke,kn,De),Co(Ee,kn,De))}catch(_r){Ee(kn,_r,De)}}):(De.value=at,De.state=1,$n(De,!1))}catch(kn){Ee({done:!1},kn,De)}}};if(mn&&(ht=(Se=function(De){Q(this,ht),G(De),S(s,this);var at=Pt(this);try{De(Co(Ke,at),Co(Ee,at))}catch(en){Ee(at,en)}}).prototype,(s=function(De){Yt(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=k(ht,{then:function(De,at){var en=Ce(this),qt=en.reactions,kn=yn(K(this,Se));return kn.ok=!H(De)||De,kn.fail=H(at)&&at,kn.domain=ze?rn.domain:void 0,en.parent=!0,qt[qt.length]=kn,en.state!=0&&$n(en,!1),kn.promise},catch:function(De){return this.then(void 0,De)}}),c=function(){var De=new s,at=Pt(De);this.promise=De,this.resolve=Co(Ke,at),this.reject=Co(Ee,at)},Xe.f=yn=function(De){return De===Se||De===v?new c(De):Tn(De)},!b&&H(P)&&ge!==Object.prototype)){h=ge.then,Be||(A(ge,"then",function(De,at){var en=this;return new Se(function(qt,kn){S(h,en,qt,kn)}).then(De,at)},{unsafe:!0}),A(ge,"catch",ht.catch,{unsafe:!0}));try{delete ge.constructor}catch{}j&&j(ge,ht)}g({global:!0,wrap:!0,forced:mn},{Promise:Se}),R(Se,bt,!1,!0),B(bt),v=O(bt),g({target:bt,stat:!0,forced:mn},{reject:function(De){var at=yn(this);return S(at.reject,void 0,De),at.promise}}),g({target:bt,stat:!0,forced:b||mn},{resolve:function(De){return Ne(b&&this===v?Se:this,De)}}),g({target:bt,stat:!0,forced:Kn},{all:function(De){var at=this,en=yn(at),qt=en.resolve,kn=en.reject,_r=Ie(function(){var oi=G(at.resolve),_i=[],Vo=0,qo=1;I(De,function(Sn){var Bn=Vo++,Xn=!1;qo++,S(oi,at,Sn).then(function(ir){Xn||(Xn=!0,_i[Bn]=ir,--qo||qt(_i))},kn)}),--qo||qt(_i)});return _r.error&&kn(_r.value),en.promise},race:function(De){var at=this,en=yn(at),qt=en.reject,kn=Ie(function(){var _r=G(at.resolve);I(De,function(oi){S(_r,at,oi).then(en.resolve,qt)})});return kn.error&&qt(kn.value),en.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,v,h,g,b,w,O,S=r(7),P=r(64),A=r(50).f,k=r(168).set,j=r(169),R=r(211),B=r(212),G=r(128),H=S.MutationObserver||S.WebKitMutationObserver,Y=S.document,Q=S.process,W=S.Promise,I=A(S,"queueMicrotask"),z=I&&I.value;z||(s=function(){var K,q;for(G&&(K=Q.domain)&&K.exit();c;){q=c.fn,c=c.next;try{q()}catch(ce){throw c?h():v=void 0,ce}}v=void 0,K&&K.enter()},j||G||B||!H||!Y?!R&&W&&W.resolve?((w=W.resolve(void 0)).constructor=W,O=P(w.then,w),h=function(){O(s)}):G?h=function(){Q.nextTick(s)}:(k=P(k,S),h=function(){k(s)}):(g=!0,b=Y.createTextNode(""),new H(s).observe(b,{characterData:!0}),h=function(){b.data=g=!g})),n.exports=z||function(K){var q={fn:K,next:void 0};v&&(v.next=q),c||(c=q,h()),v=q}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),v=r(170);n.exports=function(h,g){if(s(h),c(g)&&g.constructor===h)return g;var b=v.f(h);return(0,b.resolve)(g),b.promise}},function(n,o,r){var s=r(7);n.exports=function(c,v){var h=s.console;h&&h.error&&(arguments.length==1?h.error(c):h.error(c,v))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),v=r(45);n.exports=function(h){for(var g=s(this),b=v(g),w=arguments.length,O=c(w>1?arguments[1]:void 0,b),S=w>2?arguments[2]:void 0,P=S===void 0?b:c(S,b);P>O;)g[O++]=h;return g}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(59),g=r(160),b=r(219),w=r(18),O=c.RangeError,S=c.String,P=Math.floor,A=v(b),k=v("".slice),j=v(1 .toFixed),R=function(Y,Q,W){return Q===0?W:Q%2==1?R(Y,Q-1,W*Y):R(Y*Y,Q/2,W)},B=function(Y,Q,W){for(var I=-1,z=W;++I<6;)z+=Q*Y[I],Y[I]=z%1e7,z=P(z/1e7)},G=function(Y,Q){for(var W=6,I=0;--W>=0;)I+=Y[W],Y[W]=P(I/Q),I=I%Q*1e7},H=function(Y){for(var Q=6,W="";--Q>=0;)if(W!==""||Q===0||Y[Q]!==0){var I=S(Y[Q]);W=W===""?I:W+A("0",7-I.length)+I}return W};s({target:"Number",proto:!0,forced:w(function(){return j(8e-5,3)!=="0.000"||j(.9,0)!=="1"||j(1.255,2)!=="1.25"||j(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!w(function(){j({})})},{toFixed:function(Y){var Q,W,I,z,K=g(this),q=h(Y),ce=[0,0,0,0,0,0],Ne="",Oe="0";if(q<0||q>20)throw O("Incorrect fraction digits");if(K!=K)return"NaN";if(K<=-1e21||K>=1e21)return S(K);if(K<0&&(Ne="-",K=-K),K>1e-21)if(W=(Q=function(Xe){for(var Ie=0,Pe=Xe;Pe>=4096;)Ie+=12,Pe/=4096;for(;Pe>=2;)Ie+=1,Pe/=2;return Ie}(K*R(2,69,1))-69)<0?K*R(2,-Q,1):K/R(2,Q,1),W*=4503599627370496,(Q=52-Q)>0){for(B(ce,0,W),I=q;I>=7;)B(ce,1e7,0),I-=7;for(B(ce,R(10,I,1),0),I=Q-1;I>=23;)G(ce,1<<23),I-=23;G(ce,1<<I),B(ce,1,1),G(ce,2),Oe=H(ce)}else B(ce,0,W),B(ce,1<<-Q,0),Oe=H(ce)+A("0",q);return Oe=q>0?Ne+((z=Oe.length)<=q?"0."+A("0",q-z)+Oe:k(Oe,0,z-q)+"."+k(Oe,z-q)):Ne+Oe}})},function(n,o,r){var s=r(7),c=r(59),v=r(39),h=r(44),g=s.RangeError;n.exports=function(b){var w=v(h(this)),O="",S=c(b);if(S<0||S==1/0)throw g("Wrong number of repetitions");for(;S>0;(S>>>=1)&&(w+=w))1&S&&(O+=w);return O}},function(n,o,r){var s=r(36),c=r(15),v=r(77),h=r(41),g=c(r(84).f),b=c([].push),w=function(O){return function(S){for(var P,A=h(S),k=v(A),j=k.length,R=0,B=[];j>R;)P=k[R++],s&&!g(A,P)||b(B,O?[P,A[P]]:A[P]);return B}};n.exports={entries:w(!0),values:w(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return ps}),r.d(o,"LogicFlow",function(){return p1}),r.d(o,"h",function(){return Be.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return vf}),r.d(o,"RectNode",function(){return o0}),r.d(o,"CircleNode",function(){return u0}),r.d(o,"PolygonNode",function(){return p0}),r.d(o,"DiamondNode",function(){return m0}),r.d(o,"EllipseNode",function(){return E0}),r.d(o,"TextNode",function(){return S0}),r.d(o,"HtmlNode",function(){return P0}),r.d(o,"BaseEdge",function(){return sy}),r.d(o,"LineEdge",function(){return G0}),r.d(o,"PolylineEdge",function(){return Y0}),r.d(o,"BezierEdge",function(){return J0}),r.d(o,"Arrow",function(){return ij}),r.d(o,"BaseEdgeModel",function(){return bd}),r.d(o,"BezierEdgeModel",function(){return c_}),r.d(o,"LineEdgeModel",function(){return Di}),r.d(o,"PolylineEdgeModel",function(){return sf}),r.d(o,"BaseNodeModel",function(){return hf}),r.d(o,"CircleNodeModel",function(){return y_}),r.d(o,"DiamondNodeModel",function(){return w_}),r.d(o,"EllipseNodeModel",function(){return S_}),r.d(o,"PolygonNodeModel",function(){return N_}),r.d(o,"RectNodeModel",function(){return j_}),r.d(o,"TextNodeModel",function(){return $_}),r.d(o,"HtmlNodeModel",function(){return V_}),r.d(o,"EditConfigModel",function(){return Jf}),r.d(o,"GraphModel",function(){return WE}),r.d(o,"SnaplineModel",function(){return Mx}),r.d(o,"Keyboard",function(){return hS}),r.d(o,"get",function(){return hO}),r.d(o,"defaults",function(){return yO}),r.d(o,"ElementState",function(){return zr}),r.d(o,"ModelType",function(){return Er}),r.d(o,"ElementType",function(){return uo}),r.d(o,"EventType",function(){return Nn}),r.d(o,"formateAnchorConnectValidateData",function(){return Kl});var s={};r.r(s),r.d(s,"createUuid",function(){return tl}),r.d(s,"refreshGraphId",function(){return Su}),r.d(s,"StepDrag",function(){return ee}),r.d(s,"setupEdgeModel",function(){return wt}),r.d(s,"isBboxOverLapping",function(){return Ye}),r.d(s,"filterRepeatPoints",function(){return lt}),r.d(s,"getSimplePolyline",function(){return Ft}),r.d(s,"getExpandedBBox",function(){return Kt}),r.d(s,"pointDirection",function(){return St}),r.d(s,"getExpandedBBoxPoint",function(){return Jt}),r.d(s,"mergeBBox",function(){return Tt}),r.d(s,"getBBoxOfPoints",function(){return Wt}),r.d(s,"getPointsFromBBox",function(){return Et}),r.d(s,"isPointOutsideBBox",function(){return Xt}),r.d(s,"getBBoxXCrossPoints",function(){return Mn}),r.d(s,"getBBoxYCrossPoints",function(){return Wn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return Lt}),r.d(s,"estimateDistance",function(){return Mt}),r.d(s,"costByPoints",function(){return Ot}),r.d(s,"heuristicCostEstimate",function(){return Cn}),r.d(s,"rebuildPath",function(){return nr}),r.d(s,"removeClosePointFromOpenList",function(){return un}),r.d(s,"isSegmentsIntersected",function(){return Qn}),r.d(s,"isSegmentCrossingBBox",function(){return Gn}),r.d(s,"getNextNeighborPoints",function(){return rr}),r.d(s,"pathFinder",function(){return gr}),r.d(s,"getBoxByOriginNode",function(){return ko}),r.d(s,"pointFilter",function(){return Bo}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return Wo}),r.d(s,"isSegmentsInNode",function(){return no}),r.d(s,"isSegmentsCrossNode",function(){return No}),r.d(s,"getCrossPointInRect",function(){return Uo}),r.d(s,"segmentDirection",function(){return xo}),r.d(s,"points2PointsList",function(){return go}),r.d(s,"getSimplePoints",function(){return ni}),r.d(s,"getBytesLength",function(){return Zn}),r.d(s,"getTextWidth",function(){return Nr}),r.d(s,"getAppendAttributes",function(){return Rn}),r.d(s,"getBezierControlPoints",function(){return fr}),r.d(s,"getBezierPoints",function(){return zn}),r.d(s,"getEndTangent",function(){return La}),r.d(s,"getClosestPointOfPolyline",function(){return Ql}),r.d(s,"pickEdgeConfig",function(){return ve}),r.d(s,"twoPointDistance",function(){return rt}),r.d(s,"createEdgeGenerator",function(){return Je}),r.d(s,"snapToGrid",function(){return El}),r.d(s,"getGridOffset",function(){return Is}),r.d(s,"sampleCubic",function(){return be}),r.d(s,"getThetaOfVector",function(){return dt}),r.d(s,"degrees",function(){return Qe}),r.d(s,"Vector",function(){return J}),r.d(s,"Point",function(){return pe}),r.d(s,"Matrix",function(){return Ks}),r.d(s,"RotateMatrix",function(){return Mp}),r.d(s,"ScaleMatrix",function(){return Qv}),r.d(s,"TranslateMatrix",function(){return Zs});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var h=r(43),g=Object(h.b)("observerBatching");function b(a){a()}var w=!1;function O(){return w}function S(a){return Object(c.t)(a)}var P,A=1e4,k=new Set;function j(){P===void 0&&(P=setTimeout(R,1e4))}function R(){P=void 0;var a=Date.now();k.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,k.delete(i))}),k.size>0&&j()}var B=!1,G=[],H={};function Y(a){return"observer"+a}function Q(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=H),O();var u,p=function(N){return function(){B?G.push(N):N()}}((l.useForceUpdate||h.d)()),f=v.d.useRef(null);if(!f.current){var y=new c.c(Y(i),function(){_.mounted?p():(y.dispose(),f.current=null)}),_=function(N){return{cleanAt:Date.now()+A,reaction:N}}(y);f.current=_,u=f,k.add(u),j()}var x=f.current.reaction;return v.d.useDebugValue(x,S),v.d.useEffect(function(){var N;return N=f,k.delete(N),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(Y(i),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(N){B=!0,G=[];try{var L=N();B=!1;var X=G.length>0?G:void 0;return v.d.useLayoutEffect(function(){X&&X.forEach(function(Z){return Z()})},[X]),L}finally{B=!1}}(function(){var N,L;if(x.track(function(){try{N=a()}catch(X){L=X}}),L)throw L;return N})}var W=function(){return W=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var p in i=arguments[l])Object.prototype.hasOwnProperty.call(i,p)&&(a[p]=i[p]);return a},W.apply(this,arguments)};function I(a,i){var l,u,p,f=W({forwardRef:!1},i),y=a.displayName||a.name,_=function(x,N){return Q(function(){return a(x,N)},y)};return _.displayName=y,l=f.forwardRef?Object(v.f)(Object(v.e)(_)):Object(v.f)(_),u=a,p=l,Object.keys(u).forEach(function(x){z[x]||Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(u,x))}),l.displayName=y,l}var z={$$typeof:!0,render:!0,compare:!0,type:!0};function K(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:Q(u)}function q(a,i,l,u,p){var f=i==="children"?"render":"children",y=typeof a[i]=="function",_=typeof a[f]=="function";return y&&_?new Error("MobX Observer: Do not use children and render in the same time in`"+l):y||_?null:new Error("Invalid prop `"+p+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}K.propTypes={children:q,render:q},K.displayName="Observer";var ce;(ce=v.g)||(ce=b),Object(c.n)({reactionScheduler:ce}),Object(h.a)()[g]=!0;var Ne=0,Oe={};function Xe(a){return Oe[a]||(Oe[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+Ne+")";return Ne++,l}(a)),Oe[a]}function Ie(a,i){if(Pe(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var p=0;p<l.length;p++)if(!Object.hasOwnProperty.call(i,l[p])||!Pe(a[l[p]],i[l[p]]))return!1;return!0}function Pe(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function le(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var ye=Xe("patchMixins"),Me=Xe("patchedDefinition");function ze(a,i){for(var l=this,u=arguments.length,p=new Array(u>2?u-2:0),f=2;f<u;f++)p[f-2]=arguments[f];i.locks++;try{var y;return a!=null&&(y=a.apply(this,p)),y}finally{i.locks--,i.locks===0&&i.methods.forEach(function(_){_.apply(l,p)})}}function je(a,i){return function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];ze.call.apply(ze,[this,a,i].concat(u))}}function it(a,i,l){var u=function(_,x){var N=_[ye]=_[ye]||{},L=N[x]=N[x]||{};return L.locks=L.locks||0,L.methods=L.methods||[],L}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var p=Object.getOwnPropertyDescriptor(a,i);if(!p||!p[Me]){var f=a[i],y=bt(a,i,p?p.enumerable:void 0,u,f);Object.defineProperty(a,i,y)}}function bt(a,i,l,u,p){var f,y=je(p,u);return(f={})[Me]=!0,f.get=function(){return y},f.set=function(_){if(this===a)y=je(_,u);else{var x=bt(this,i,l,u,_);Object.defineProperty(this,i,x)}},f.configurable=!0,f.enumerable=l,f}var Pt=c.a||"$mobx",Yt=Xe("isMobXReactObserver"),Ce=Xe("isUnmounted"),ge=Xe("skipRender"),Se=Xe("isForcingUpdate");function ht(a){var i=a.prototype;if(a[Yt]?zt(i):a[Yt]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==v.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=rn;yn(i,"props"),yn(i,"state");var l=i.render;return i.render=function(){return xt.call(this,l)},it(i,"componentWillUnmount",function(){var u;(u=this.render[Pt])===null||u===void 0||u.dispose(),this[Ce]=!0,!this.render[Pt]&&zt(this)}),a}function zt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function xt(a){var i=this;le(this,ge,!1),le(this,Se,!1);var l=zt(this),u=a.bind(this),p=!1,f=new c.c(l+".render()",function(){if(!p&&(p=!0,i[Ce]!==!0)){var _=!0;try{le(i,Se,!0),i[ge]||v.a.prototype.forceUpdate.call(i),_=!1}finally{le(i,Se,!1),_&&f.dispose()}}});function y(){p=!1;var _=void 0,x=void 0;if(f.track(function(){try{x=Object(c.d)(!1,u)}catch(N){_=N}}),_)throw _;return x}return f.reactComponent=this,y[Pt]=f,this.render=y,y.call(this)}function rn(a,i){return this.state!==i||!Ie(this.props,a)}function yn(a,i){var l=Xe("reactProp_"+i+"_valueHolder"),u=Xe("reactProp_"+i+"_atomHolder");function p(){return this[u]||le(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[Se]||Ie(this[l],f)?le(this,l,f):(le(this,l,f),le(this,ge,!0),p.call(this).reportChanged(),le(this,ge,!1))}})}var Tn=typeof Symbol=="function"&&Symbol.for,pn=Tn?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(a){return null}).$$typeof,ft=Tn?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(a){return null}).$$typeof;function xn(a){if(a.isMobxInjector,ft&&a.$$typeof===ft)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&a.$$typeof===pn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(K,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(v.a,a)?ht(a):I(a)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Be=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var mn=function(a,i){for(var l=-1,u=a==null?0:a.length,p=Array(u);++l<u;)p[l]=i(a[l],l,a);return p},Kn=function(){this.__data__=[],this.size=0},re=function(a,i){return a===i||a!=a&&i!=i},$n=function(a,i){for(var l=a.length;l--;)if(re(a[l][0],i))return l;return-1},xr=Array.prototype.splice,Ur=function(a){var i=this.__data__,l=$n(i,a);return!(l<0)&&(l==i.length-1?i.pop():xr.call(i,l,1),--this.size,!0)},ro=function(a){var i=this.__data__,l=$n(i,a);return l<0?void 0:i[l][1]},jn=function(a){return $n(this.__data__,a)>-1},Co=function(a,i){var l=this.__data__,u=$n(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function Ee(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Ee.prototype.clear=Kn,Ee.prototype.delete=Ur,Ee.prototype.get=ro,Ee.prototype.has=jn,Ee.prototype.set=Co;var Ke=Ee,De=function(){this.__data__=new Ke,this.size=0},at=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},en=function(a){return this.__data__.get(a)},qt=function(a){return this.__data__.has(a)},kn=r(31),_r=kn.a.Symbol,oi=Object.prototype,_i=oi.hasOwnProperty,Vo=oi.toString,qo=_r?_r.toStringTag:void 0,Sn=function(a){var i=_i.call(a,qo),l=a[qo];try{a[qo]=void 0;var u=!0}catch{}var p=Vo.call(a);return u&&(i?a[qo]=l:delete a[qo]),p},Bn=Object.prototype.toString,Xn=function(a){return Bn.call(a)},ir=_r?_r.toStringTag:void 0,Kr=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":ir&&ir in Object(a)?Sn(a):Xn(a)},Rr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},fl,Va=function(a){if(!Rr(a))return!1;var i=Kr(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},dl=kn.a["__core-js_shared__"],lu=(fl=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||""))?"Symbol(src)_1."+fl:"",zd=function(a){return!!lu&&lu in a},mc=Function.prototype.toString,da=function(a){if(a!=null){try{return mc.call(a)}catch{}try{return a+""}catch{}}return""},Wu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,Cf=Object.prototype,yo=Pn.toString,gc=Cf.hasOwnProperty,qi=RegExp("^"+yo.call(gc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=function(a){return!(!Rr(a)||zd(a))&&(Va(a)?qi:Wu).test(da(a))},Es=function(a,i){return a==null?void 0:a[i]},Aa=function(a,i){var l=Es(a,i);return ta(l)?l:void 0},pa=Aa(kn.a,"Map"),Ta=Aa(Object,"create"),bc=function(){this.__data__=Ta?Ta(null):{},this.size=0},_c=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},jf=Object.prototype.hasOwnProperty,zu=function(a){var i=this.__data__;if(Ta){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return jf.call(i,a)?i[a]:void 0},If=Object.prototype.hasOwnProperty,wc=function(a){var i=this.__data__;return Ta?i[a]!==void 0:If.call(i,a)},Hd=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=Ta&&i===void 0?"__lodash_hash_undefined__":i,this};function Cl(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Cl.prototype.clear=bc,Cl.prototype.delete=_c,Cl.prototype.get=zu,Cl.prototype.has=wc,Cl.prototype.set=Hd;var Lf=Cl,pl=function(){this.size=0,this.__data__={hash:new Lf,map:new(pa||Ke),string:new Lf}},Ec=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Os=function(a,i){var l=a.__data__;return Ec(i)?l[typeof i=="string"?"string":"hash"]:l.map},Oc=function(a){var i=Os(this,a).delete(a);return this.size-=i?1:0,i},xc=function(a){return Os(this,a).get(a)},Xd=function(a){return Os(this,a).has(a)},Ff=function(a,i){var l=Os(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function Wr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Wr.prototype.clear=pl,Wr.prototype.delete=Oc,Wr.prototype.get=xc,Wr.prototype.has=Xd,Wr.prototype.set=Ff;var Vr=Wr,$f=function(a,i){var l=this.__data__;if(l instanceof Ke){var u=l.__data__;if(!pa||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new Vr(u)}return l.set(a,i),this.size=l.size,this};function uu(a){var i=this.__data__=new Ke(a);this.size=i.size}uu.prototype.clear=De,uu.prototype.delete=at,uu.prototype.get=en,uu.prototype.has=qt,uu.prototype.set=$f;var ha=uu,xs=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Bf=function(a){return this.__data__.has(a)};function jo(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new Vr;++i<l;)this.add(a[i])}jo.prototype.add=jo.prototype.push=xs,jo.prototype.has=Bf;var jl=jo,Il=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Ss=function(a,i){return a.has(i)},su=function(a,i,l,u,p,f){var y=1&l,_=a.length,x=i.length;if(_!=x&&!(y&&x>_))return!1;var N=f.get(a),L=f.get(i);if(N&&L)return N==i&&L==a;var X=-1,Z=!0,he=2&l?new jl:void 0;for(f.set(a,i),f.set(i,a);++X<_;){var xe=a[X],Re=i[X];if(u)var et=y?u(Re,xe,X,i,a,f):u(xe,Re,X,a,i,f);if(et!==void 0){if(et)continue;Z=!1;break}if(he){if(!Il(i,function(tt,yt){if(!Ss(he,yt)&&(xe===tt||p(xe,tt,l,u,f)))return he.push(yt)})){Z=!1;break}}else if(xe!==Re&&!p(xe,Re,l,u,f)){Z=!1;break}}return f.delete(a),f.delete(i),Z},wi=kn.a.Uint8Array,Sc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,p){l[++i]=[p,u]}),l},Uf=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Ac=_r?_r.prototype:void 0,ji=Ac?Ac.valueOf:void 0,ii=function(a,i,l,u,p,f,y){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!f(new wi(a),new wi(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return re(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var _=Sc;case"[object Set]":var x=1&u;if(_||(_=Uf),a.size!=i.size&&!x)return!1;var N=y.get(a);if(N)return N==i;u|=2,y.set(a,i);var L=su(_(a),_(i),u,p,f,y);return y.delete(a),L;case"[object Symbol]":if(ji)return ji.call(a)==ji.call(i)}return!1},na=function(a,i){for(var l=-1,u=i.length,p=a.length;++l<u;)a[p+l]=i[l];return a},oo=Array.isArray,Vf=function(a,i,l){var u=i(a);return oo(a)?u:na(u,l(a))},Ii=function(a,i){for(var l=-1,u=a==null?0:a.length,p=0,f=[];++l<u;){var y=a[l];i(y,l,a)&&(f[p++]=y)}return f},Tc=function(){return[]},Gf=Object.prototype.propertyIsEnumerable,Li=Object.getOwnPropertySymbols,ki=Li?function(a){return a==null?[]:(a=Object(a),Ii(Li(a),function(i){return Gf.call(a,i)}))}:Tc,Mc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},Lr=function(a){return a!=null&&typeof a=="object"},ai=function(a){return Lr(a)&&Kr(a)=="[object Arguments]"},As=Object.prototype,Wf=As.hasOwnProperty,Pc=As.propertyIsEnumerable,Ts=ai(function(){return arguments}())?ai:function(a){return Lr(a)&&Wf.call(a,"callee")&&!Pc.call(a,"callee")},Ga=Ts,Fi=r(48),cu=/^(?:0|[1-9]\d*)$/,Ki=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&cu.test(a))&&a>-1&&a%1==0&&a<i},va=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Tr={};Tr["[object Float32Array]"]=Tr["[object Float64Array]"]=Tr["[object Int8Array]"]=Tr["[object Int16Array]"]=Tr["[object Int32Array]"]=Tr["[object Uint8Array]"]=Tr["[object Uint8ClampedArray]"]=Tr["[object Uint16Array]"]=Tr["[object Uint32Array]"]=!0,Tr["[object Arguments]"]=Tr["[object Array]"]=Tr["[object ArrayBuffer]"]=Tr["[object Boolean]"]=Tr["[object DataView]"]=Tr["[object Date]"]=Tr["[object Error]"]=Tr["[object Function]"]=Tr["[object Map]"]=Tr["[object Number]"]=Tr["[object Object]"]=Tr["[object RegExp]"]=Tr["[object Set]"]=Tr["[object String]"]=Tr["[object WeakMap]"]=!1;var $i=function(a){return Lr(a)&&va(a.length)&&!!Tr[Kr(a)]},Ma=function(a){return function(i){return a(i)}},di=r(49),fu=di.a&&di.a.isTypedArray,Ll=fu?Ma(fu):$i,Pa=Object.prototype.hasOwnProperty,fo=function(a,i){var l=oo(a),u=!l&&Ga(a),p=!l&&!u&&Object(Fi.a)(a),f=!l&&!u&&!p&&Ll(a),y=l||u||p||f,_=y?Mc(a.length,String):[],x=_.length;for(var N in a)!i&&!Pa.call(a,N)||y&&(N=="length"||p&&(N=="offset"||N=="parent")||f&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Ki(N,x))||_.push(N);return _},Hu=Object.prototype,Wa=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Hu)},ya=function(a,i){return function(l){return a(i(l))}},kc=ya(Object.keys,Object),Yd=Object.prototype.hasOwnProperty,Nc=function(a){if(!Wa(a))return kc(a);var i=[];for(var l in Object(a))Yd.call(a,l)&&l!="constructor"&&i.push(l);return i},Go=function(a){return a!=null&&va(a.length)&&!Va(a)},Fl=function(a){return Go(a)?fo(a):Nc(a)},za=function(a){return Vf(a,Fl,ki)},Ko=Object.prototype.hasOwnProperty,Rc=function(a,i,l,u,p,f){var y=1&l,_=za(a),x=_.length;if(x!=za(i).length&&!y)return!1;for(var N=x;N--;){var L=_[N];if(!(y?L in i:Ko.call(i,L)))return!1}var X=f.get(a),Z=f.get(i);if(X&&Z)return X==i&&Z==a;var he=!0;f.set(a,i),f.set(i,a);for(var xe=y;++N<x;){var Re=a[L=_[N]],et=i[L];if(u)var tt=y?u(et,Re,L,i,a,f):u(Re,et,L,a,i,f);if(!(tt===void 0?Re===et||p(Re,et,l,u,f):tt)){he=!1;break}xe||(xe=L=="constructor")}if(he&&!xe){var yt=a.constructor,Bt=i.constructor;yt==Bt||!("constructor"in a)||!("constructor"in i)||typeof yt=="function"&&yt instanceof yt&&typeof Bt=="function"&&Bt instanceof Bt||(he=!1)}return f.delete(a),f.delete(i),he},ra=Aa(kn.a,"DataView"),ma=Aa(kn.a,"Promise"),Ms=Aa(kn.a,"Set"),Bi=Aa(kn.a,"WeakMap"),Zi="[object Map]",li="[object Promise]",oa="[object Set]",Ni="[object WeakMap]",ut="[object DataView]",jt=da(ra),$t=da(pa),fn=da(ma),ur=da(Ms),Mr=da(Bi),po=Kr;(ra&&po(new ra(new ArrayBuffer(1)))!=ut||pa&&po(new pa)!=Zi||ma&&po(ma.resolve())!=li||Ms&&po(new Ms)!=oa||Bi&&po(new Bi)!=Ni)&&(po=function(a){var i=Kr(a),l=i=="[object Object]"?a.constructor:void 0,u=l?da(l):"";if(u)switch(u){case jt:return ut;case $t:return Zi;case fn:return li;case ur:return oa;case Mr:return Ni}return i});var T=po,M="[object Arguments]",U="[object Array]",ne="[object Object]",me=Object.prototype.hasOwnProperty,We=function(a,i,l,u,p,f){var y=oo(a),_=oo(i),x=y?U:T(a),N=_?U:T(i),L=(x=x==M?ne:x)==ne,X=(N=N==M?ne:N)==ne,Z=x==N;if(Z&&Object(Fi.a)(a)){if(!Object(Fi.a)(i))return!1;y=!0,L=!1}if(Z&&!L)return f||(f=new ha),y||Ll(a)?su(a,i,l,u,p,f):ii(a,i,x,l,u,p,f);if(!(1&l)){var he=L&&me.call(a,"__wrapped__"),xe=X&&me.call(i,"__wrapped__");if(he||xe){var Re=he?a.value():a,et=xe?i.value():i;return f||(f=new ha),p(Re,et,l,u,f)}}return!!Z&&(f||(f=new ha),Rc(a,i,l,u,p,f))},vt=function a(i,l,u,p,f){return i===l||(i==null||l==null||!Lr(i)&&!Lr(l)?i!=i&&l!=l:We(i,l,u,p,a,f))},Ht=function(a,i,l,u){var p=l.length,f=p,y=!u;if(a==null)return!f;for(a=Object(a);p--;){var _=l[p];if(y&&_[2]?_[1]!==a[_[0]]:!(_[0]in a))return!1}for(;++p<f;){var x=(_=l[p])[0],N=a[x],L=_[1];if(y&&_[2]){if(N===void 0&&!(x in a))return!1}else{var X=new ha;if(u)var Z=u(N,L,x,a,i,X);if(!(Z===void 0?vt(L,N,3,u,X):Z))return!1}}return!0},_n=function(a){return a==a&&!Rr(a)},yr=function(a){for(var i=Fl(a),l=i.length;l--;){var u=i[l],p=a[u];i[l]=[u,p,_n(p)]}return i},ln=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Gr=function(a){var i=yr(a);return i.length==1&&i[0][2]?ln(i[0][0],i[0][1]):function(l){return l===a||Ht(l,a,i)}},pr=function(a){return typeof a=="symbol"||Lr(a)&&Kr(a)=="[object Symbol]"},Cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ia=/^\w*$/,wo=function(a,i){if(oo(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!pr(a))||ia.test(a)||!Cr.test(a)||i!=null&&a in Object(i)};function Ji(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,p=i?i.apply(this,u):u[0],f=l.cache;if(f.has(p))return f.get(p);var y=a.apply(this,u);return l.cache=f.set(p,y)||f,y};return l.cache=new(Ji.Cache||Vr),l}Ji.Cache=Vr;var hl=Ji,vl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$l=/\\(\\)?/g,du=function(a){var i=hl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(vl,function(l,u,p,f){i.push(p?f.replace($l,"$1"):u||l)}),i}),Ha=_r?_r.prototype:void 0,pu=Ha?Ha.toString:void 0,Zo=function a(i){if(typeof i=="string")return i;if(oo(i))return mn(i,a)+"";if(pr(i))return pu?pu.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},Bl=function(a){return a==null?"":Zo(a)},yl=function(a,i){return oo(a)?a:wo(a,i)?[a]:du(Bl(a))},Xa=function(a){if(typeof a=="string"||pr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},Ya=function(a,i){for(var l=0,u=(i=yl(i,a)).length;a!=null&&l<u;)a=a[Xa(i[l++])];return l&&l==u?a:void 0},Xu=function(a,i,l){var u=a==null?void 0:Ya(a,i);return u===void 0?l:u},oh=function(a,i){return a!=null&&i in Object(a)},ih=function(a,i,l){for(var u=-1,p=(i=yl(i,a)).length,f=!1;++u<p;){var y=Xa(i[u]);if(!(f=a!=null&&l(a,y)))break;a=a[y]}return f||++u!=p?f:!!(p=a==null?0:a.length)&&va(p)&&Ki(y,p)&&(oo(a)||Ga(a))},qd=function(a,i){return a!=null&&ih(a,i,oh)},Dc=function(a,i){return wo(a)&&_n(i)?ln(Xa(a),i):function(l){var u=Xu(l,a);return u===void 0&&u===i?qd(l,a):vt(i,u,3)}},Yu=function(a){return a},zf=function(a){return function(i){return i==null?void 0:i[a]}},ah=function(a){return function(i){return Ya(i,a)}},qu=function(a){return wo(a)?zf(Xa(a)):ah(a)},Cc=function(a){return typeof a=="function"?a:a==null?Yu:typeof a=="object"?oo(a)?Dc(a[0],a[1]):Gr(a):qu(a)},Hf=function(a){return function(i,l,u){for(var p=-1,f=Object(i),y=u(i),_=y.length;_--;){var x=y[a?_:++p];if(l(f[x],x,f)===!1)break}return i}}(),Io=function(a,i){return function(l,u){if(l==null)return l;if(!Go(l))return a(l,u);for(var p=l.length,f=i?p:-1,y=Object(l);(i?f--:++f<p)&&u(y[f],f,y)!==!1;);return l}}(function(a,i){return a&&Hf(a,i,Fl)}),Ui=function(a,i){var l=-1,u=Go(a)?Array(a.length):[];return Io(a,function(p,f,y){u[++l]=i(p,f,y)}),u},Xf=function(a,i){return(oo(a)?mn:Ui)(a,Cc(i))};Object(c.n)({isolateGlobalState:!0});var Yf=function(){try{var a=Aa(Object,"defineProperty");return a({},"",{}),a}catch{}}(),Ps=function(a,i,l){i=="__proto__"&&Yf?Yf(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Vv=Object.prototype.hasOwnProperty,ks=function(a,i,l){var u=a[i];Vv.call(a,i)&&re(u,l)&&(l!==void 0||i in a)||Ps(a,i,l)},ml=function(a,i,l,u){var p=!l;l||(l={});for(var f=-1,y=i.length;++f<y;){var _=i[f],x=u?u(l[_],a[_],_,l,a):void 0;x===void 0&&(x=a[_]),p?Ps(l,_,x):ks(l,_,x)}return l},jc=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},Ku=Math.max,hu=function(a,i,l){return i=Ku(i===void 0?a.length-1:i,0),function(){for(var u=arguments,p=-1,f=Ku(u.length-i,0),y=Array(f);++p<f;)y[p]=u[i+p];p=-1;for(var _=Array(i+1);++p<i;)_[p]=u[p];return _[i]=l(y),jc(a,this,_)}},Ns=function(a){return function(){return a}},Ic=Yf?function(a,i){return Yf(a,"toString",{configurable:!0,enumerable:!1,value:Ns(i),writable:!0})}:Yu,vu=Date.now,Gv=function(a){var i=0,l=0;return function(){var u=vu(),p=16-(u-l);if(l=u,p>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},Lc=Gv(Ic),Wv=function(a,i){return Lc(hu(a,i,Yu),a+"")},zv=function(a,i,l){if(!Rr(l))return!1;var u=typeof i;return!!(u=="number"?Go(l)&&Ki(i,l.length):u=="string"&&i in l)&&re(l[i],a)},lh=function(a){return Wv(function(i,l){var u=-1,p=l.length,f=p>1?l[p-1]:void 0,y=p>2?l[2]:void 0;for(f=a.length>3&&typeof f=="function"?(p--,f):void 0,y&&zv(l[0],l[1],y)&&(f=p<3?void 0:f,p=1),i=Object(i);++u<p;){var _=l[u];_&&a(i,_,u,f)}return i})},qf=Object.prototype.hasOwnProperty,Ri=lh(function(a,i){if(Wa(i)||Go(i))ml(i,Fl(i),a);else for(var l in i)qf.call(i,l)&&ks(a,l,i[l])}),uh=function(a,i,l,u){if(!Rr(a))return a;for(var p=-1,f=(i=yl(i,a)).length,y=f-1,_=a;_!=null&&++p<f;){var x=Xa(i[p]),N=l;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(p!=y){var L=_[x];(N=u?u(L,x,_):void 0)===void 0&&(N=Rr(L)?L:Ki(i[p+1])?[]:{})}ks(_,x,N),_=_[x]}return a},oe=function(a,i,l){for(var u=-1,p=i.length,f={};++u<p;){var y=i[u],_=Ya(a,y);l(_,y)&&uh(f,yl(y,a),_)}return f},Zu=function(a,i){return oe(a,i,function(l,u){return qd(a,u)})},Ul=_r?_r.isConcatSpreadable:void 0,ka=function(a){return oo(a)||Ga(a)||!!(Ul&&a&&a[Ul])},Pr=function a(i,l,u,p,f){var y=-1,_=i.length;for(u||(u=ka),f||(f=[]);++y<_;){var x=i[y];l>0&&u(x)?l>1?a(x,l-1,u,p,f):na(f,x):p||(f[f.length]=x)}return f},Ei=function(a){return a!=null&&a.length?Pr(a,1):[]},Fr,qa,Vl,ga,Kf,Zf,Kd,sh,Gl,Lo,Rs,Zd,Wl,Ka,Fc,yu,ba,Jd,Qd,Za=function(a){return Lc(hu(a,void 0,Ei),a+"")}(function(a,i){return a==null?{}:Zu(a,i)});function mo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function ch(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ep(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Fo(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var zr,Jo,Er,uo,Nn,so,$c={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},gl=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Jf=(qa=Fo((Fr=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),mo(this,"isSilentMode",qa,this),mo(this,"stopZoomGraph",Vl,this),mo(this,"stopScrollGraph",ga,this),mo(this,"stopMoveGraph",Kf,this),mo(this,"adjustEdge",Zf,this),mo(this,"adjustEdgeMiddle",Kd,this),mo(this,"adjustEdgeStartAndEnd",sh,this),mo(this,"adjustNodePosition",Gl,this),mo(this,"hideAnchors",Lo,this),mo(this,"allowRotation",Rs,this),mo(this,"hoverOutline",Zd,this),mo(this,"nodeSelectedOutline",Wl,this),mo(this,"edgeSelectedOutline",Ka,this),mo(this,"nodeTextEdit",Fc,this),mo(this,"edgeTextEdit",yu,this),mo(this,"nodeTextDraggable",ba,this),mo(this,"edgeTextDraggable",Jd,this),mo(this,"autoExpand",Qd,this),ep(this,"multipleSelectKey",""),ep(this,"defaultConfig",{}),Ri(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var p=this.getConfigDetail(u);Ri(this,p)}},{key:"getConfigDetail",value:function(u){var p=u.isSilentMode,f=u.textEdit,y={};if(p===!1&&Ri(y,this.defaultConfig),p===!0&&p!==this.isSilentMode){var _=Za($c,gl);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Ri(y,_)}f===!1&&Ri(y,{nodeTextEdit:!1,edgeTextEdit:!1});var x=Za(u,gl);return Ri(y,x)}},{key:"getConfig",value:function(){return Za(this,gl)}}])&&ch(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vl=Fo(Fr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ga=Fo(Fr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=Fo(Fr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=Fo(Fr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kd=Fo(Fr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sh=Fo(Fr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=Fo(Fr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lo=Fo(Fr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rs=Fo(Fr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zd=Fo(Fr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=Fo(Fr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ka=Fo(Fr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fc=Fo(Fr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yu=Fo(Fr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ba=Fo(Fr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jd=Fo(Fr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qd=Fo(Fr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fo(Fr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Fr.prototype,"updateEditConfig"),Fr.prototype),Fr);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(Jo||(Jo={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(Er||(Er={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(uo||(uo={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(Nn||(Nn={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(so||(so={}));var Eo,Ao,tp,np,Bc,Vi,Qf,Ds,Na;function mu(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return zl(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return zl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ra(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function fh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function bl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _a(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(Eo||(Eo={}));var rp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},op=(Ao=function(){function a(u,p){(function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")})(this,a),bl(this,"MINI_SCALE_SIZE",.2),bl(this,"MAX_SCALE_SIZE",16),Ra(this,"SCALE_X",tp,this),Ra(this,"SKEW_Y",np,this),Ra(this,"SKEW_X",Bc,this),Ra(this,"SCALE_Y",Vi,this),Ra(this,"TRANSLATE_X",Qf,this),Ra(this,"TRANSLATE_Y",Ds,this),Ra(this,"ZOOM_SIZE",Na,this),bl(this,"eventCenter",void 0),bl(this,"translateLimitMinX",void 0),bl(this,"translateLimitMinY",void 0),bl(this,"translateLimitMaxX",void 0),bl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=p.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var p=mu(u,2),f=p[0],y=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var p=mu(u,2),f=p[0],y=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,p,f){var y=mu(u,2),_=y[0],x=y[1];return[_+p/this.SCALE_X,x+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,p){return[u/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,y=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Nn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,p){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,p,f,y){var _=mu(this.CanvasPointToHtmlPoint([u,p]),2),x=f/2-_[0],N=y/2-_[1];this.TRANSLATE_X+=x,this.TRANSLATE_Y+=N,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var p=mu(Array.isArray(u)&&u.length===4?u:rp[u.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],l&&fh(i.prototype,l),a}(),tp=_a(Ao.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),np=_a(Ao.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bc=_a(Ao.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vi=_a(Ao.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Qf=_a(Ao.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ds=_a(Ao.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Na=_a(Ao.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),_a(Ao.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(Ao.prototype,"zoom"),Ao.prototype),_a(Ao.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(Ao.prototype,"resetZoom"),Ao.prototype),_a(Ao.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(Ao.prototype,"translate"),Ao.prototype),_a(Ao.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(Ao.prototype,"focusOn"),Ao.prototype),Ao),ed=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},dh=function(a,i){return a&&ml(i,Fl(i),a)},ph=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},hh=Object.prototype.hasOwnProperty,ip=function(a){if(!Rr(a))return ph(a);var i=Wa(a),l=[];for(var u in a)(u!="constructor"||!i&&hh.call(a,u))&&l.push(u);return l},Cs=function(a){return Go(a)?fo(a,!0):ip(a)},ap=function(a,i){return a&&ml(i,Cs(i),a)},Uc=r(107),Or=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},Hv=function(a,i){return ml(a,ki(a),i)},lp=ya(Object.getPrototypeOf,Object),gu=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)na(i,ki(a)),a=lp(a);return i}:Tc,Vc=function(a,i){return ml(a,gu(a),i)},Xv=function(a){return Vf(a,Cs,gu)},Yv=Object.prototype.hasOwnProperty,Da=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&Yv.call(a,"index")&&(l.index=a.index,l.input=a.input),l},up=function(a){var i=new a.constructor(a.byteLength);return new wi(i).set(new wi(a)),i},td=function(a,i){var l=i?up(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.byteLength)},nd=/\w*$/,vh=function(a){var i=new a.constructor(a.source,nd.exec(a));return i.lastIndex=a.lastIndex,i},sp=_r?_r.prototype:void 0,aa=sp?sp.valueOf:void 0,bu=function(a){return aa?Object(aa.call(a)):{}},rd=function(a,i){var l=i?up(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},Ju=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return up(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return td(a,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rd(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return vh(a);case"[object Symbol]":return bu(a)}},Gc=Object.create,yh=function(){function a(){}return function(i){if(!Rr(i))return{};if(Gc)return Gc(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),Wc=function(a){return typeof a.constructor!="function"||Wa(a)?{}:yh(lp(a))},od=function(a){return Lr(a)&&T(a)=="[object Map]"},id=di.a&&di.a.isMap,ad=id?Ma(id):od,_u=function(a){return Lr(a)&&T(a)=="[object Set]"},mh=di.a&&di.a.isSet,wu=mh?Ma(mh):_u,cp="[object Arguments]",fp="[object Function]",Qu="[object Object]",ho={};ho[cp]=ho["[object Array]"]=ho["[object ArrayBuffer]"]=ho["[object DataView]"]=ho["[object Boolean]"]=ho["[object Date]"]=ho["[object Float32Array]"]=ho["[object Float64Array]"]=ho["[object Int8Array]"]=ho["[object Int16Array]"]=ho["[object Int32Array]"]=ho["[object Map]"]=ho["[object Number]"]=ho["[object Object]"]=ho["[object RegExp]"]=ho["[object Set]"]=ho["[object String]"]=ho["[object Symbol]"]=ho["[object Uint8Array]"]=ho["[object Uint8ClampedArray]"]=ho["[object Uint16Array]"]=ho["[object Uint32Array]"]=!0,ho["[object Error]"]=ho[fp]=ho["[object WeakMap]"]=!1;var zc=function a(i,l,u,p,f,y){var _,x=1&l,N=2&l,L=4&l;if(u&&(_=f?u(i,p,f,y):u(i)),_!==void 0)return _;if(!Rr(i))return i;var X=oo(i);if(X){if(_=Da(i),!x)return Or(i,_)}else{var Z=T(i),he=Z==fp||Z=="[object GeneratorFunction]";if(Object(Fi.a)(i))return Object(Uc.a)(i,x);if(Z==Qu||Z==cp||he&&!f){if(_=N||he?{}:Wc(i),!x)return N?Vc(i,ap(_,i)):Hv(i,dh(_,i))}else{if(!ho[Z])return f?i:{};_=Ju(i,Z,x)}}y||(y=new ha);var xe=y.get(i);if(xe)return xe;y.set(i,_),wu(i)?i.forEach(function(et){_.add(a(et,l,u,et,i,y))}):ad(i)&&i.forEach(function(et,tt){_.set(tt,a(et,l,u,tt,i,y))});var Re=X?void 0:(L?N?Xv:za:N?Cs:Fl)(i);return ed(Re||i,function(et,tt){Re&&(et=i[tt=et]),ks(_,tt,a(et,l,u,tt,i,y))}),_},Oo=function(a){return zc(a,5)},Hl=function(a,i,l){(l!==void 0&&!re(a[i],l)||l===void 0&&!(i in a))&&Ps(a,i,l)},pi=function(a){return Lr(a)&&Go(a)},_l=Function.prototype,Xl=Object.prototype,Eu=_l.toString,es=Xl.hasOwnProperty,ld=Eu.call(Object),ud=function(a){if(!Lr(a)||Kr(a)!="[object Object]")return!1;var i=lp(a);if(i===null)return!0;var l=es.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Eu.call(l)==ld},wl=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ts=function(a){return ml(a,Cs(a))},sd=function(a,i,l,u,p,f,y){var _=wl(a,l),x=wl(i,l),N=y.get(x);if(N)Hl(a,l,N);else{var L=f?f(_,x,l+"",a,i,y):void 0,X=L===void 0;if(X){var Z=oo(x),he=!Z&&Object(Fi.a)(x),xe=!Z&&!he&&Ll(x);L=x,Z||he||xe?oo(_)?L=_:pi(_)?L=Or(_):he?(X=!1,L=Object(Uc.a)(x,!0)):xe?(X=!1,L=rd(x,!0)):L=[]:ud(x)||Ga(x)?(L=_,Ga(_)?L=ts(_):Rr(_)&&!Va(_)||(L=Wc(x))):X=!1}X&&(y.set(x,L),p(L,x,u,f,y),y.delete(x)),Hl(a,l,L)}},Hc=function a(i,l,u,p,f){i!==l&&Hf(l,function(y,_){if(f||(f=new ha),Rr(y))sd(i,l,_,u,a,p,f);else{var x=p?p(wl(i,_),y,_+"",i,l,f):void 0;x===void 0&&(x=y),Hl(i,_,x)}},Cs)},Ou=lh(function(a,i,l){Hc(a,i,l)}),dp={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},js=function(a){var i=Oo(dp);return a&&(i=Ou(i,a)),i};r(82),r(166);function cd(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var Xc=function(){function a(){var u,p,f;(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),f={},(p="_events")in(u=this)?Object.defineProperty(u,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[p]=f}var i,l;return i=a,(l=[{key:"on",value:function(u,p,f){var y=this;return u==null||u.split(",").forEach(function(_){_=_.trim(),y._events[_]||(y._events[_]=[]),y._events[_].push({callback:p,once:!!f})}),this}},{key:"once",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){return y=y.trim(),f.on(y,p,!0)})}},{key:"emit",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){var _=f._events[y]||[],x=f._events["*"]||[],N=function(L){for(var X=L.length,Z=0;Z<X;Z++)if(L[Z]){var he=L[Z],xe=he.callback;he.once&&(L.splice(Z,1),L.length===0&&delete f._events[y],X--,Z--),xe.apply(f,[p])}};N(_),N(x)})}},{key:"off",value:function(u,p){var f=this;return u||(this._events={}),u.split(",").forEach(function(y){if(p){for(var _=f._events[y]||[],x=_.length,N=0;N<x;N++)_[N].callback===p&&(_.splice(N,1),x--,N--);_.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&cd(i.prototype,l),a}();function El(a,i){return i*Math.round(a/i)||a}function Is(a,i){return a%i}function Yc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qc(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qc(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qc(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var fd=function(a,i,l){var u=Yc(a,2),p=u[0],f=u[1],y=Yc(i,2),_=y[0],x=y[1],N=Yc(l,2),L=N[0],X=N[1];return p>_&&p<L&&f>x&&f<X},dd=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Ja=function(a){return function(i,l,u){var p=Object(i);if(!Go(i)){var f=Cc(l);i=Fl(i),l=function(_){return f(p[_],_,p)}}var y=a(i,l,u);return y>-1?p[f?i[y]:y]:void 0}},pp=function(a,i,l,u){for(var p=a.length,f=l+(u?1:-1);u?f--:++f<p;)if(i(a[f],f,a))return f;return-1},hp=/\s/,vp=function(a){for(var i=a.length;i--&&hp.test(a.charAt(i)););return i},pd=/^\s+/,Ol=function(a){return a&&a.slice(0,vp(a)+1).replace(pd,"")},Kc=/^[-+]0x[0-9a-f]+$/i,hd=/^0b[01]+$/i,vd=/^0o[0-7]+$/i,Ls=parseInt,Yl=function(a){if(typeof a=="number")return a;if(pr(a))return NaN;if(Rr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Rr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=Ol(a);var l=hd.test(a);return l||vd.test(a)?Ls(a.slice(2),l?2:8):Kc.test(a)?NaN:+a},Jn=1/0,Fs=function(a){return a?(a=Yl(a))===Jn||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},Zc=function(a){var i=Fs(a),l=i%1;return i==i?l?i-l:i:0},Qa=Math.max,$s,Bs=Ja(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var p=l==null?0:Zc(l);return p<0&&(p=Qa(u+p,0)),pp(a,Cc(i),p)}),To=new Uint8Array(16);function Us(){if(!$s&&!($s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(To)}for(var xu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Jc=function(a){return typeof a=="string"&&xu.test(a)},io=[],$o=0;$o<256;++$o)io.push(($o+256).toString(16).substr(1));var ql=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(io[a[i+0]]+io[a[i+1]]+io[a[i+2]]+io[a[i+3]]+"-"+io[a[i+4]]+io[a[i+5]]+"-"+io[a[i+6]]+io[a[i+7]]+"-"+io[a[i+8]]+io[a[i+9]]+"-"+io[a[i+10]]+io[a[i+11]]+io[a[i+12]]+io[a[i+13]]+io[a[i+14]]+io[a[i+15]]).toLowerCase();if(!Jc(l))throw TypeError("Stringified UUID is invalid");return l},el=function(a,i,l){var u=(a=a||{}).random||(a.rng||Us)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){l=l||0;for(var p=0;p<16;++p)i[l+p]=u[p];return i}return ql(u)},tl=function(){return el()},Su=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,p){return u[p.id]=i+el(),p.id=u[p.id],u},{});return a.edges.forEach(function(u){u.id=i+el(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},xl=(r(105),r(127),r(207),function(a,i,l){var u=a.x,p=a.y,f=i.x,y=i.y,_=l.x,x=l.y,N=(x-y)/(_-f),L=y-N*f;return u>=f&&u<=_&&p>=y&&p<=x&&Math.abs(p-N*u+L)<Number.EPSILON});function Vs(a){return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Vs(a)}function Qc(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Au(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Qc(Object(l),!0).forEach(function(u){Gs(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Qc(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Gs(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Dt,yp,ns,ef,yd,mp,Sl,gp,nl,Tu,md,gh,bh,_h,bp,_p,wp,Ep,wh,Eh,Oh,Gi=function(a){return a.anchors},rs=function(a,i){for(var l,u=i.nodes,p=u.length-1;p>=0;p--){var f=u[p];if(gd(a,f)){var y=f.getTargetAnchor(a);if(y){var _={node:f,anchorIndex:y.index,anchor:y.anchor};l&&!tf(f,l.node,i)||(l=_)}}}return l},tf=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},la=function(a,i,l,u){return Math.hypot(a-l,i-u)},Ca=function(a,i){var l=!1,u=Wi(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},gd=function(a,i){var l=!1,u=Wi(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Wi=function(a){var i=a.x,l=a.y,u=a.width,p=a.height;return{minX:i-u/2,minY:l-p/2,maxX:i+u/2,maxY:l+p/2,x:i,y:l,width:u,height:p,centerX:i,centerY:l}},nf=function(a,i,l){var u,p=function(y){var _=y,x=_.x,N=_.y,L=_.width,X=_.height,Z=_.radius;return[{x:x-L/2+Z,y:N-X/2+Z,r:Z},{x:x+L/2-Z,y:N-X/2+Z,r:Z},{x:x-L/2+Z,y:N+X/2-Z,r:Z},{x:x+L/2-Z,y:N+X/2-Z,r:Z}]}(l),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(y){var _=la(a.x,a.y,y.x,y.y);_<f&&(f=_,u=y)}),os(a,i,u)},os=function(a,i,l){var u,p=l,f=p.x,y=p.y,_=p.r;if(i===so.HORIZONTAL){var x=f-Math.sqrt(_*_-(a.y-y)*(a.y-y)),N=f+Math.sqrt(_*_-(a.y-y)*(a.y-y));u={x:Math.abs(x-a.x)<Math.abs(N-a.x)?x:N,y:a.y}}else if(i===so.VERTICAL){var L=y-Math.sqrt(_*_-(a.x-f)*(a.x-f)),X=y+Math.sqrt(_*_-(a.x-f)*(a.x-f)),Z=Math.abs(L-a.y)<Math.abs(X-a.y)?L:X;u={x:a.x,y:Z}}return u},Ws=function(a,i){var l=i,u=!1,p=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,y=l.y-l.height/2+l.radius,_=l.y+l.height/2-l.radius,x=l.x,N=l.y,L=l.width,X=l.height;return a.y===N+X/2||a.y===N-X/2?u=a.x>p&&a.x<f:a.x!==x+L/2&&a.x!==x-L/2||(u=a.y>y&&a.y<_),u},rf=function(a,i,l){var u,p=l,f=p.x,y=p.y,_=p.rx,x=p.ry;if(i===so.HORIZONTAL){var N=f-Math.sqrt(_*_-(a.y-y)*(a.y-y)*_*_/(x*x)),L=f+Math.sqrt(_*_-(a.y-y)*(a.y-y)*_*_/(x*x));u={x:Math.abs(N-a.x)<Math.abs(L-a.x)?N:L,y:a.y}}else if(i===so.VERTICAL){var X=y-Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(_*_)),Z=y+Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(_*_)),he=Math.abs(X-a.y)<Math.abs(Z-a.y)?X:Z;u={x:a.x,y:he}}return u},of=function(a,i,l){for(var u,p=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],_=0;_<p.length;_++)y.push({start:p[_],end:p[(_+1)%p.length]});return y.forEach(function(x){var N=x.start,L=x.end,X=N,Z=L;N.x>L.x&&(X=L,Z=N);var he={x:a.x,y:a.y};if(X.x===Z.x&&i===so.HORIZONTAL&&(he={x:X.x,y:a.y}),X.y===Z.y&&i===so.VERTICAL&&(he={x:a.x,y:X.y}),X.x!==Z.x&&X.y!==Z.y){var xe=(Z.y-X.y)/(Z.x-X.x),Re=(X.x*Z.y-Z.x*X.y)/(X.x-Z.x);i===so.HORIZONTAL?he={x:(a.y-Re)/xe,y:a.y}:i===so.VERTICAL&&(he={x:a.x,y:xe*a.x+Re})}if(xl(he,N,L)){var et=la(he.x,he.y,a.x,a.y);et<f&&(f=et,u=he)}}),u},zs=function(a,i,l,u){var p=a.x,f=a.y;return i.x>a.x?p=a.x+l/2:i.x<a.x&&(p=a.x-l/2),i.y>a.y?f=a.y+u/2:i.y<a.y&&(f=a.y-u/2),{x:p,y:f}},Hs=function(a){var i=a.rows,l=a.style,u=a.rowsLength,p=a.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=p,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?i.forEach(function(_){var x=document.createElement("div");x.textContent=_,f.appendChild(x)}):f.textContent=i,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},is=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,p=0;return i&&i.forEach(function(f){var y=Zn(f);p=y>p?y:p}),{width:Math.ceil(p/2)*u+u/4,height:l*(u+2)+u/4}},Kl=function(a){return Vs(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},Qo=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},af=1e3,lf=999,Zl=function(){return++af};function Op(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function zi(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Op(Object(l),!0).forEach(function(u){ja(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Op(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ei(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function xh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ja(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Fn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var bd=(Dt=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),ja(this,"id",""),ei(this,"type",yp,this),ei(this,"sourceNodeId",ns,this),ei(this,"targetNodeId",ef,this),ei(this,"startPoint",yd,this),ei(this,"endPoint",mp,this),ei(this,"text",Sl,this),ei(this,"properties",gp,this),ei(this,"points",nl,this),ei(this,"pointsList",Tu,this),ei(this,"isSelected",md,this),ei(this,"isHovered",gh,this),ei(this,"isHitable",bh,this),ei(this,"draggable",_h,this),ei(this,"visible",bp,this),ja(this,"virtual",!1),ei(this,"isAnimation",_p,this),ei(this,"isShowAdjustPoint",wp,this),ja(this,"graphModel",void 0),ei(this,"zIndex",Ep,this),ja(this,"BaseType",uo.EDGE),ja(this,"modelType",Er.EDGE),ei(this,"state",wh,this),ja(this,"additionStateData",void 0),ja(this,"sourceAnchorId",""),ja(this,"targetAnchorId",""),ja(this,"menu",void 0),ja(this,"customTextPosition",!1),ei(this,"style",Eh,this),ei(this,"arrowConfig",Oh,this),this.graphModel=p,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||tl()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var _=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=_,Ri(this,ve(u)),this.graphModel.overlapMode===Eo.INCREASE&&(this.zIndex=u.zIndex||Zl()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return zi(zi({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return zi({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return Oo(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return Oo(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?p.stroke:u.stroke;return zi(zi({},u),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return Oo(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,p,f){var y,_,x=Gi(u);return f&&(y=Bs(x,function(N){return N.id===f}))||x.forEach(function(N){var L=rt(N,p);(_===void 0||L<_)&&(_=L,y=N)}),y}},{key:"getEndAnchor",value:function(u,p){var f,y,_=this,x=Gi(u);return p&&(f=Bs(x,function(N){return N.id===p}))||x.forEach(function(N){var L=rt(N,_.startPoint);(y===void 0||L<y)&&(y=L,f=N)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,_={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(_.text={x:p,y:f,value:y}),this.graphModel.overlapMode===Eo.INCREASE&&(_.zIndex=this.zIndex),_}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,p){this.properties[u]=Qo(p),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=zi(zi({},Object(c.I)(this.properties)),Qo(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var p=this.arrowConfig,f=p.markerEnd,y=p.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,p){this.style=zi(zi({},this.style),{},ja({},u,Qo(p)))}},{key:"setStyles",value:function(u){this.style=zi(zi({},this.style),Qo(u))}},{key:"updateStyles",value:function(u){this.style=zi({},Qo(u))}},{key:"formatText",value:function(u){var p=this.textPosition,f=p.x,y=p.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||y,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,p=u.x,f=u.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(u,p){if(this.text){var f=this.text,y=f.x,_=f.y,x=f.value,N=f.draggable,L=f.editable;this.text={value:x,draggable:N,x:y+u,y:_+p,editable:L}}}},{key:"setText",value:function(u){u&&Ri(this.text,u)}},{key:"updateText",value:function(u){this.text=zi(zi({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,p){this.startPoint.x+=u,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,p){this.endPoint.x+=u,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Ri(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var p=u.startPoint,f=u.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&xh(i.prototype,l),a}(),yp=Fn(Dt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ns=Fn(Dt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Fn(Dt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yd=Fn(Dt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mp=Fn(Dt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sl=Fn(Dt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),gp=Fn(Dt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),nl=Fn(Dt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tu=Fn(Dt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),md=Fn(Dt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gh=Fn(Dt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bh=Fn(Dt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_h=Fn(Dt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bp=Fn(Dt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_p=Fn(Dt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wp=Fn(Dt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ep=Fn(Dt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wh=Fn(Dt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Eh=Fn(Dt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Oh=Fn(Dt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Fn(Dt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"sourceNode"),Dt.prototype),Fn(Dt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"targetNode"),Dt.prototype),Fn(Dt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"textPosition"),Dt.prototype),Fn(Dt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperty"),Dt.prototype),Fn(Dt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"deleteProperty"),Dt.prototype),Fn(Dt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperties"),Dt.prototype),Fn(Dt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"changeEdgeId"),Dt.prototype),Fn(Dt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyle"),Dt.prototype),Fn(Dt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyles"),Dt.prototype),Fn(Dt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStyles"),Dt.prototype),Fn(Dt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"formatText"),Dt.prototype),Fn(Dt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"resetTextPosition"),Dt.prototype),Fn(Dt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveText"),Dt.prototype),Fn(Dt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setText"),Dt.prototype),Fn(Dt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateText"),Dt.prototype),Fn(Dt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setAnchors"),Dt.prototype),Fn(Dt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setSelected"),Dt.prototype),Fn(Dt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHovered"),Dt.prototype),Fn(Dt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHitable"),Dt.prototype),Fn(Dt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"openEdgeAnimation"),Dt.prototype),Fn(Dt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"closeEdgeAnimation"),Dt.prototype),Fn(Dt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setElementState"),Dt.prototype),Fn(Dt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStartPoint"),Dt.prototype),Fn(Dt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveStartPoint"),Dt.prototype),Fn(Dt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateEndPoint"),Dt.prototype),Fn(Dt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveEndPoint"),Dt.prototype),Fn(Dt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setZIndex"),Dt.prototype),Fn(Dt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"initPoints"),Dt.prototype),Fn(Dt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAttributes"),Dt.prototype),Fn(Dt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getAdjustStart"),Dt.prototype),Fn(Dt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getAdjustEnd"),Dt.prototype),Fn(Dt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAfterAdjustStartAndEnd"),Dt.prototype),Dt),as=bd;function _d(a){return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_d(a)}function Sh(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xs(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Sh(Object(l),!0).forEach(function(u){Hi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Sh(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ah(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ys(){return Ys=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ls(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ys.apply(this,arguments)}function ls(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Al(a))!==null;);return a}function ol(a,i){return ol=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ol(a,i)}function Th(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Al(a);if(i){var p=Al(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return xp(this,l)}}function xp(a,i){if(i&&(_d(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mu(a)}function Mu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Al(a){return Al=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Al(a)}function Hi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Vn,Mo,Di=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&ol(f,y)})(p,a);var i,l,u=Th(p);function p(){var f;Ah(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Hi(Mu(f=u.call.apply(u,[this].concat(_))),"modelType",Er.LINE_EDGE),f}return i=p,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Xs(Xs({},Ys(Al(p.prototype),"getEdgeStyle",this).call(this)),Oo(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&rl(i.prototype,l),p}(as);function ua(a){return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ua(a)}function qv(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Mh(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Mh(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mh(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Pu(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mr(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Pu(Object(l),!0).forEach(function(u){Po(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Pu(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ph(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sa(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ti(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ia(){return Ia=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Kv(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ia.apply(this,arguments)}function Kv(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=to(a))!==null;);return a}function uf(a,i){return uf=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},uf(a,i)}function Tl(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=to(a);if(i){var p=to(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Sp(this,l)}}function Sp(a,i){if(i&&(ua(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(a)}function Jl(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function to(a){return to=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},to(a)}function Po(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Oi(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var sf=(Vn=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&uf(f,y)})(p,a);var i,l,u=Tl(p);function p(){var f;sa(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Po(Jl(f=u.call.apply(u,[this].concat(_))),"modelType",Er.POLYLINE_EDGE),Po(Jl(f),"draggingPointList",void 0),Ph(Jl(f),"dbClickPosition",Mo,Jl(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=30,Ia(to(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return mr(mr({},Ia(to(p.prototype),"getEdgeStyle",this).call(this)),Oo(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var _=this.dbClickPosition;return{x:_.x,y:_.y}}var x=go(this.points),N=qv(Wo(x),2),L=N[0],X=N[1];return{x:(L.x+X.x)/2,y:(L.y+X.y)/2}}},{key:"getAfterAnchor",value:function(f,y,_){var x,N;return _.forEach(function(L){var X;f===so.HORIZONTAL?X=Math.abs(y.y-L.y):f===so.VERTICAL&&(X=Math.abs(y.x-L.x)),(!N||N>X)&&(N=X,x=L)}),x}},{key:"getCrossPoint",value:function(f,y,_){var x;return f===so.HORIZONTAL?x={x:_.x,y:y.y}:f===so.VERTICAL&&(x={x:y.x,y:_.y}),x}},{key:"removeCrossPoints",value:function(f,y,_){var x=_.map(function(tt){return tt});if(f===1){var N=x[f],L=x[y],X=x[f-1];if(no(X,N,this.sourceNode)){if(No(N,L,this.sourceNode)){var Z=Uo(N,L,this.sourceNode);Z&&(x[f]=Z,x.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(tt){(tt.x===X.x&&tt.x===N.x||tt.y===X.y&&tt.y===N.y)&&la(tt.x,tt.y,N.x,N.y)<la(X.x,X.y,N.x,N.y)&&(x[f-1]=tt)})}if(y===_.length-2){var he=x[f],xe=x[y],Re=x[y+1];if(no(xe,Re,this.targetNode)){if(No(he,xe,this.targetNode)){var et=Uo(he,xe,this.targetNode);et&&(x[y]=et,x.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(tt){(tt.x===Re.x&&tt.x===xe.x||tt.y===Re.y&&tt.y===xe.y)&&la(tt.x,tt.y,xe.x,xe.y)<la(Re.x,Re.y,xe.x,xe.y)&&(x[y+1]=tt)})}return x}},{key:"getDraggingPoints",value:function(f,y,_,x,N){var L=N.map(function(he){return he}),X=this.getAfterAnchor(f,_,x),Z=this.getCrossPoint(f,_,X);return y==="start"?(L.unshift(Z),L.unshift(X)):(L.push(Z),L.push(X)),L}},{key:"updateCrossPoints",value:function(f){var y=f.map(function(Bt){return Bt}),_=f[0],x=f[1],N=f[y.length-2],L=f[y.length-1],X=this.sourceNode,Z=this.targetNode,he=X.modelType,xe=Z.modelType,Re=xo(_,x),et=y[0];switch(he){case Er.RECT_NODE:X.radius!==0&&(Ws(_,X)||(et=nf(_,Re,X)));break;case Er.CIRCLE_NODE:et=os(_,Re,X);break;case Er.ELLIPSE_NODE:et=rf(_,Re,X);break;case Er.DIAMOND_NODE:case Er.POLYGON_NODE:et=of(_,Re,X)}et&&(y[0]=et);var tt=xo(N,L),yt=y[y.length-1];switch(xe){case Er.RECT_NODE:Z.radius!==0&&(Ws(L,Z)||(yt=nf(L,tt,Z)));break;case Er.CIRCLE_NODE:yt=os(L,tt,Z);break;case Er.ELLIPSE_NODE:yt=rf(L,tt,Z);break;case Er.DIAMOND_NODE:case Er.POLYGON_NODE:yt=of(L,tt,Z)}return yt&&(y[y.length-1]=yt),y}},{key:"getData",value:function(){var f=Ia(to(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(N){N.x+=f,N.y+=y});var _=this.pointsList[0];this.startPoint=Object.assign({},_);var x=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},x),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var _=f.start,x=f.end,N=f.startIndex,L=f.endIndex,X=f.direction,Z=this.pointsList,he=Z;return X===so.HORIZONTAL?(Z[N]={x:_.x,y:_.y+y.y},Z[L]={x:x.x,y:x.y+y.y},he=this.pointsList.map(function(xe){return xe})):X===so.VERTICAL&&(Z[N]={x:_.x+y.x,y:_.y},Z[L]={x:x.x+y.x,y:x.y},he=this.pointsList.map(function(xe){return xe})),this.updatePointsAfterDrag(he),this.draggingPointList=he,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Z[N]),end:Object.assign({},Z[L]),startIndex:N,endIndex:L,direction:X}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var _=f.start,x=f.end,N=f.startIndex,L=f.endIndex,X=f.direction,Z=this.pointsList;if(X===so.HORIZONTAL){Z[N]={x:_.x,y:_.y+y.y},Z[L]={x:x.x,y:x.y+y.y};var he=this.pointsList.map(function(sn){return sn});if(N!==0&&L!==this.pointsList.length-1&&(he=this.removeCrossPoints(N,L,he)),N===0){var xe={x:_.x,y:_.y+y.y};if(!Ca(xe,this.sourceNode)){var Re=this.sourceNode.anchors;he=this.getDraggingPoints(X,"start",xe,Re,he)}}if(L===this.pointsList.length-1){var et={x:x.x,y:x.y+y.y};if(!Ca(et,this.targetNode)){var tt=this.targetNode.anchors;he=this.getDraggingPoints(X,"end",et,tt,he)}}this.updatePointsAfterDrag(he),this.draggingPointList=he}else if(X===so.VERTICAL){Z[N]={x:_.x+y.x,y:_.y},Z[L]={x:x.x+y.x,y:x.y};var yt=this.pointsList.map(function(sn){return sn});if(N!==0&&L!==this.pointsList.length-1&&(yt=this.removeCrossPoints(N,L,yt)),N===0){var Bt={x:_.x+y.x,y:_.y};if(!Ca(Bt,this.sourceNode)){var hn=this.sourceNode.anchors;yt=this.getDraggingPoints(X,"start",Bt,hn,yt)}}if(L===this.pointsList.length-1){var dn={x:x.x+y.x,y:x.y};if(!Ca(dn,this.targetNode)){var Hn=this.targetNode.anchors;yt=this.getDraggingPoints(X,"end",dn,Hn,yt)}}this.updatePointsAfterDrag(yt),this.draggingPointList=yt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Z[N]),end:Object.assign({},Z[L]),startIndex:N,endIndex:L,direction:X}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Bo(go(this.points));this.pointsList=f.map(function(x){return x}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var _=f[f.length-1];this.endPoint=Object.assign({},_)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(_){return"".concat(_.x,",").concat(_.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,_=f.endPoint,x=f.sourceNode,N=f.targetNode,L=cr({x:y.x,y:y.y},{x:_.x,y:_.y},x,N,this.offset||0);this.pointsList=L,this.initPoints()}}])&&ti(i.prototype,l),p}(as),Mo=Oi(Vn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oi(Vn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"initPoints"),Vn.prototype),Oi(Vn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePoints"),Vn.prototype),Oi(Vn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateStartPoint"),Vn.prototype),Oi(Vn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"moveStartPoint"),Vn.prototype),Oi(Vn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateEndPoint"),Vn.prototype),Oi(Vn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"moveEndPoint"),Vn.prototype),Oi(Vn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePointsList"),Vn.prototype),Oi(Vn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendStart"),Vn.prototype),Oi(Vn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendSimple"),Vn.prototype),Oi(Vn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppend"),Vn.prototype),Oi(Vn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendEnd"),Vn.prototype),Oi(Vn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePointsAfterDrag"),Vn.prototype),Oi(Vn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"getAdjustStart"),Vn.prototype),Oi(Vn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"getAdjustEnd"),Vn.prototype),Oi(Vn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateAfterAdjustStartAndEnd"),Vn.prototype),Vn),$=function(a){var i=a.start,l=a.end,u=a.offset,p=a.verticalLength,f=a.type,y={leftX:0,leftY:0,rightX:0,rightY:0},_=Math.atan((l.y-i.y)/(l.x-i.x)),x=Math.atan(u/p),N=Math.sqrt(p*p+u*u);return f==="start"?l.x>=i.x?(y.leftX=i.x+N*Math.sin(_+x),y.leftY=i.y-N*Math.cos(_+x),y.rightX=i.x-N*Math.sin(_-x),y.rightY=i.y+N*Math.cos(_-x)):(y.leftX=i.x-N*Math.sin(_+x),y.leftY=i.y+N*Math.cos(_+x),y.rightX=i.x+N*Math.sin(_-x),y.rightY=i.y-N*Math.cos(_-x)):f==="end"&&(l.x>=i.x?(y.leftX=l.x+N*Math.sin(_-x),y.leftY=l.y-N*Math.cos(_-x),y.rightX=l.x-N*Math.sin(_+x),y.rightY=l.y+N*Math.cos(_+x)):(y.leftX=l.x-N*Math.sin(_-x),y.leftY=l.y+N*Math.cos(_-x),y.rightX=l.x+N*Math.sin(_+x),y.rightY=l.y-N*Math.cos(_+x))),y},ie={x:1,y:0,z:0};function be(a,i,l,u,p){for(var f=function(xe){if(xe<0||xe>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-xe,3)+3*i.x*xe*Math.pow(1-xe,2)+3*l.x*Math.pow(xe,2)*(1-xe)+u.x*Math.pow(xe,3),y:a.y*Math.pow(1-xe,3)+3*i.y*xe*Math.pow(1-xe,2)+3*l.y*Math.pow(xe,2)*(1-xe)+u.y*Math.pow(xe,3)}},y=0,_=2,x=u.x,N=u.y,L=u;y<p&&_<50;){var X=L=f(1-_/100),Z=X.x,he=X.y;y=la(x,N,Z,he),_++}return L}function nt(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function dt(a){return u=function(f,y){return f.x*y.y-f.y*y.x}(i=ie,l=a),p=Math.acos(function(f,y){var _=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(x,N,L){return x+N*_[L]})}(nt(i),nt(l))),u>=0?p:-p;var i,l,u,p}function Qe(a){return a*(180/Math.PI)}function st(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Nt(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?st(Object(l),!0).forEach(function(u){It(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):st(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function It(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ct(a){return function(i){if(Array.isArray(i))return Rt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Ut(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(a){return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ct(a)}function Gt(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||Ut(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ut(a,i){if(a){if(typeof a=="string")return Rt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Rt(a,i):void 0}}function Rt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var wt=function(a,i){var l;switch(a.type){case"line":default:l=new Di(a,i);break;case"polyline":l=new sf(a,i)}return l},Ye=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},lt=function(a){var i=[],l={};return a.forEach(function(u){var p="".concat(u.x,"-").concat(u.y);u.id=p,l[p]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Ft=function(a,i){var l=[a,{x:a.x,y:i.y},i];return lt(l)},Kt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},St=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?so.HORIZONTAL:so.VERTICAL},Jt=function(a,i,l){return St(l,i)===so.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},Tt=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),p=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return{centerX:(l+p)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:p,maxY:f,height:f-u,width:p-l}},Wt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(L){l.push(L.x),u.push(L.y)});var p=Math.min.apply(Math,l),f=Math.max.apply(Math,l),y=Math.min.apply(Math,u),_=Math.max.apply(Math,u),x=f-p,N=_-y;return i&&(x+=i,N+=i),{centerX:(p+f)/2,centerY:(y+_)/2,maxX:f,maxY:_,minX:p,minY:y,x:(p+f)/2,y:(y+_)/2,height:N,width:x}},Et=function(a){var i=a.minX,l=a.minY,u=a.maxX,p=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:p},{x:i,y:p}]},Xt=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},Mn=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},Wn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},Lt=function(a,i){return Mn(a,i.x).concat(Wn(a,i.y))},Mt=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},Ot=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Cn=function(a,i,l,u,p){return Mt(a,i)+Mt(a,l)+Ot(a,[i,l,u,p])},nr=function a(i,l,u,p,f){f||(f=0),i.unshift(l[p]),u[p]&&u[p]!==p&&f<=100&&a(i,l,u,u[p],f+1)},un=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},Qn=function(a,i,l,u){var p=i.x-a.x,f=i.y-a.y,y=u.x-l.x,_=u.y-l.y,x=(-f*(a.x-l.x)+p*(a.y-l.y))/(-y*f+p*_),N=(y*(a.y-l.y)-_*(a.x-l.x))/(-y*f+p*_);return x>=0&&x<=1&&N>=0&&N<=1},Gn=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=Gt(Et(l),4),p=u[0],f=u[1],y=u[2],_=u[3];return Qn(a,i,p,f)||Qn(a,i,p,_)||Qn(a,i,f,y)||Qn(a,i,y,_)},rr=function(a,i,l,u){var p=[];return a.forEach(function(f){f!==i&&(f.x!==i.x&&f.y!==i.y||Gn(f,i,l)||Gn(f,i,u)||p.push(f))}),lt(p)},gr=function(a,i,l,u,p,f,y){var _=[],x=[i],N={},L={},X={};L[i.id]=0,X[i.id]=Cn(i,l,i);var Z={};a.forEach(function(Re){Z[Re.id]=Re});for(var he=function(){var Re=void 0,et=1/0;if(x.forEach(function(yt){X[yt.id]<et&&(et=X[yt.id],Re=yt)}),Re===l){var tt=[];return nr(tt,Z,N,l.id),{v:tt}}un(x,Re),_.push(Re),rr(a,Re,u,p).forEach(function(yt){if(_.indexOf(yt)===-1){x.indexOf(yt)===-1&&x.push(yt);var Bt=X[Re.id]+Mt(Re,yt);L[yt.id]&&Bt>=L[yt.id]||(N[yt.id]=Re.id,L[yt.id]=Bt,X[yt.id]=L[yt.id]+Cn(yt,l,i,f,y))}})};x.length;){var xe=he();if(ct(xe)==="object")return xe.v}return[i,l]},ko=function(a){return Wi(a)},Bo=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],p=a[i+1];l.x===u.x&&u.x===p.x||l.y===u.y&&u.y===p.y?a.splice(i,1):i++}return a},cr=function(a,i,l,u,p){var f=ko(l),y=ko(u),_=Kt(f,p),x=Kt(y,p),N=Jt(_,f,a),L=Jt(x,y,i);if(Ye(_,x)){var X=ni(a,i,N,L);return[a,N].concat(Ct(X),[L,i])}var Z=Wt([N,L]),he=Tt(_,Z),xe=Tt(x,Z),Re=[];Re=(Re=Re.concat(Et(he))).concat(Et(xe));var et={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[Z,he,xe].forEach(function(yt){Re=Re.concat(Lt(yt,et).filter(function(Bt){return Xt(Bt,_)&&Xt(Bt,x)}))}),[{x:N.x,y:L.y},{x:L.x,y:N.y}].forEach(function(yt){Xt(yt,_)&&Xt(yt,x)&&Re.push(yt)}),Re.unshift(N),Re.push(L),Re=lt(Re);var tt=gr(Re,N,L,f,y,a,i);return tt.unshift(a),tt.push(i),tt.length>2&&(tt=Bo(tt)),lt(tt)},Wo=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],p=la(l.x,l.y,u.x,u.y),f=1;f<a.length-1;f++){var y=a[f],_=a[f+1],x=la(y.x,y.y,_.x,_.y);x>p&&(p=x,l=y,u=_)}i=[l,u]}return i},no=function(a,i,l){var u=Ca(a,l),p=Ca(i,l);return u&&p},No=function(a,i,l){var u=Ca(a,l),p=Ca(i,l);return!(u&&p)&&(u||p)},Uo=function(a,i,l){for(var u,p,f=Wi(l),y=Et(f),_=0;_<y.length;_++)Qn(a,i,y[_],y[(_+1)%y.length])&&(p=[y[_],y[(_+1)%y.length]]);return p&&(u=function(x,N,L,X){var Z=(N.y-x.y)*(X.x-L.x)-(x.x-N.x)*(L.y-X.y);if(Z===0)return!1;var he=((N.x-x.x)*(X.x-L.x)*(L.y-x.y)+(N.y-x.y)*(X.x-L.x)*x.x-(X.y-L.y)*(N.x-x.x)*L.x)/Z,xe=-((N.y-x.y)*(X.y-L.y)*(L.x-x.x)+(N.x-x.x)*(X.y-L.y)*x.y-(X.x-L.x)*(N.y-x.y)*L.y)/Z;return(he-x.x)*(he-N.x)<=0&&(xe-x.y)*(xe-N.y)<=0&&(he-L.x)*(he-X.x)<=0&&(xe-L.y)*(xe-X.y)<=0&&{x:he,y:xe}}(a,i,p[0],p[1])),u},xo=function(a,i){var l;return a.x===i.x?l=so.VERTICAL:a.y===i.y&&(l=so.HORIZONTAL),l},go=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var p=Gt(u.split(","),2),f=p[0],y=p[1];l.push({x:Number(f),y:Number(y)})}),l},ni=function(a,i,l,u){var p=[];if(xo(a,l)===xo(i,u))a.y===l.y?(p.push({x:l.x,y:(l.y+u.y)/2}),p.push({x:u.x,y:(l.y+u.y)/2})):(p.push({x:(l.x+u.x)/2,y:l.y}),p.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},y=xl(f,a,l),_=xl(f,i,u);if(y||_)f={x:u.x,y:l.y};else{var x=So(f,a,l),N=So(f,i,u);x&&N&&(f={x:u.x,y:l.y})}p.push(f)}return p},So=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Zn=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},ui=null,Nr=function(a,i){ui||(ui=document.createElement("canvas"));var l=ui.getContext("2d");return l.font=i,l.measureText(a).width},Rn=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var p={start:l,end:u,offset:10,verticalLength:5},f=$(Nt(Nt({},p),{},{type:"start"})),y=$(Nt(Nt({},p),{},{type:"end"}));i="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},fr=function(a){var i=a.start,l=a.end,u=a.sourceNode,p=a.targetNode,f=a.offset,y=Wi(u),_=Wi(p),x=Kt(y,f),N=Kt(_,f);return{sNext:Jt(x,y,i),ePre:Jt(N,_,l)}},zn=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[co(i[0]),co(i[1]),co(i[2]),co(i[3])]},co=function(a){var i=Gt(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},La=function(a,i){var l=Gt(a,4);return[be(l[0],l[1],l[2],l[3],i),a[3]]},Ql=function(a,i){for(var l,u=a.x,p=a.y,f=go(i),y=Number.MAX_SAFE_INTEGER,_=[],x=0;x<f.length;x++)_.push({start:f[x],end:f[(x+1)%f.length]});if(_.forEach(function(Z){var he=Z.start,xe=Z.end;if(he.x===xe.x){var Re={x:he.x,y:p};if(xl(Re,he,xe)){var et=Math.abs(he.x-u);et<y&&(y=et,l=Re)}}else if(he.y===xe.y){var tt={x:u,y:he.y};if(xl(tt,he,xe)){var yt=Math.abs(he.y-p);yt<y&&(y=yt,l=tt)}}}),!l){var N=_[0],L=N.start,X=N.end;l={x:L.x+(X.x-L.x)/2,y:L.y+(X.y-L.y)/2}}return l},ve=function(a){return Za(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},rt=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function Je(a,i){return typeof i!="function"?function(l,u,p){return Object.assign({type:a.edgeType},p)}:function(l,u,p){var f=i(l,u,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:a.edgeType}}}r(208);var tn=function(){};function hr(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ue(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ee=function(){function a(u){var p=this,f=u.onDragStart,y=f===void 0?tn:f,_=u.onDragging,x=_===void 0?tn:_,N=u.onDragEnd,L=N===void 0?tn:N,X=u.eventType,Z=X===void 0?"":X,he=u.eventCenter,xe=he===void 0?null:he,Re=u.step,et=Re===void 0?1:Re,tt=u.isStopPropagation,yt=tt===void 0||tt,Bt=u.model,hn=Bt===void 0?null:Bt,dn=u.data,Hn=dn===void 0?null:dn;(function(sn,In){if(!(sn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,a),ue(this,"onDragStart",void 0),ue(this,"onDragging",void 0),ue(this,"onDragEnd",void 0),ue(this,"step",void 0),ue(this,"isStopPropagation",void 0),ue(this,"isDragging",!1),ue(this,"isStartDragging",!1),ue(this,"startX",0),ue(this,"startY",0),ue(this,"sumDeltaX",0),ue(this,"sumDeltaY",0),ue(this,"eventType",void 0),ue(this,"eventCenter",void 0),ue(this,"model",void 0),ue(this,"data",void 0),ue(this,"startTime",void 0),ue(this,"handleMouseDown",function(sn){var In,wn,Dr,$r=(In=window)===null||In===void 0?void 0:In.document;if(sn.button===0){p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging=!0,p.startX=sn.clientX,p.startY=sn.clientY,$r.addEventListener("mousemove",p.handleMouseMove,!1),$r.addEventListener("mouseup",p.handleMouseUp,!1);var sr=(wn=p.model)===null||wn===void 0?void 0:wn.getData();(Dr=p.eventCenter)===null||Dr===void 0||Dr.emit(Nn["".concat(p.eventType,"_MOUSEDOWN")],{e:sn,data:p.data||sr}),p.startTime=new Date().getTime()}}),ue(this,"handleMouseMove",function(sn){if(p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=sn.clientX-p.startX,p.sumDeltaY+=sn.clientY-p.startY,p.startX=sn.clientX,p.startY=sn.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var In,wn=p.sumDeltaX%p.step,Dr=p.sumDeltaY%p.step,$r=p.sumDeltaX-wn,sr=p.sumDeltaY-Dr;p.sumDeltaX=wn,p.sumDeltaY=Dr;var Hr,hi=(In=p.model)===null||In===void 0?void 0:In.getData();p.isDragging||((Hr=p.eventCenter)===null||Hr===void 0||Hr.emit(Nn["".concat(p.eventType,"_DRAGSTART")],{e:sn,data:p.data||hi}),p.onDragStart({event:sn})),p.isDragging=!0,Promise.resolve().then(function(){var vi,wa;p.onDragging({deltaX:$r,deltaY:sr,event:sn}),(vi=p.eventCenter)===null||vi===void 0||vi.emit(Nn["".concat(p.eventType,"_MOUSEMOVE")],{e:sn,data:p.data||hi}),(wa=p.eventCenter)===null||wa===void 0||wa.emit(Nn["".concat(p.eventType,"_DRAG")],{e:sn,data:p.data||hi})})}}),ue(this,"handleMouseUp",function(sn){var In=window.document;p.isStartDragging=!1,p.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var wn,Dr,$r;In.removeEventListener("mousemove",p.handleMouseMove,!1),In.removeEventListener("mouseup",p.handleMouseUp,!1);var sr=(wn=p.model)===null||wn===void 0?void 0:wn.getData();(Dr=p.eventCenter)===null||Dr===void 0||Dr.emit(Nn["".concat(p.eventType,"_MOUSEUP")],{e:sn,data:p.data||sr}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:sn}),($r=p.eventCenter)===null||$r===void 0||$r.emit(Nn["".concat(p.eventType,"_DROP")],{e:sn,data:p.data||sr}))})}),ue(this,"cancelDrag",function(){var sn,In=(sn=window)===null||sn===void 0?void 0:sn.document;In.removeEventListener("mousemove",p.handleMouseMove,!1),In.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=y,this.onDragging=x,this.onDragEnd=L,this.step=et,this.isStopPropagation=yt,this.eventType=Z,this.eventCenter=xe,this.model=hn,this.data=Hn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&hr(i.prototype,l),a}();function Ae(a){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ae(a)}function Ge(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qe(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ke(a,i,l){return i&&qe(a.prototype,i),l&&qe(a,l),a}function Te(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&d(a,i)}function Le(a){var i=Ze();return function(){var l,u=m(a);if(i){var p=m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return de(this,l)}}function de(a,i){if(i&&(Ae(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(a)}function we(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function se(a){var i=typeof Map=="function"?new Map:void 0;return se=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return Ue(l,arguments,m(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,l)},se(a)}function Ue(a,i,l){return Ue=Ze()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var _=new(Function.bind.apply(u,y));return f&&d(_,f.prototype),_},Ue.apply(null,arguments)}function Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a,i){return d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d(a,i)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},m(a)}function E(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function D(a,i){return a instanceof J&&i instanceof J}var V=function(a){Te(l,a);var i=Le(l);function l(u,p,f){var y;return Ge(this,l),E(we(y=i.call(this,3)),"x",void 0),E(we(y),"y",void 0),E(we(y),"z",void 0),y[0]=u,y[1]=p,y[2]=f,y.x=u,y.y=p,y.z=f,Object.setPrototypeOf(we(y),l.prototype),y}return ke(l,[{key:"add",value:function(u){if(D(this,u))return new J(this.x+u.x,this.y+u.y);var p=this.z+u.z;return new pe((this.x+u.x)/p,(this.y+u.y)/p)}},{key:"subtract",value:function(u){if(D(this,u))return new J(this.x-u.x,this.y-u.y);var p=this.z-u.z;return p===0?new J(this.x-u.x,this.y-u.y):new pe((this.x-u.x)/p,(this.y-u.y)/p)}}]),l}(se(Array)),J=function(a){Te(l,a);var i=Le(l);function l(u,p,f){var y;return Ge(this,l),y=i.call(this,u,p,f??0),Object.setPrototypeOf(we(y),l.prototype),y}return ke(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var p=this;return u.reduce(function(f,y,_){return f+y*p[_]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var p=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return p>=0?f:-f}}]),l}(V),pe=function(a){Te(l,a);var i=Le(l);function l(u,p){var f;return Ge(this,l),f=i.call(this,u,p,1),Object.setPrototypeOf(we(f),l.prototype),f}return ke(l,[{key:"toString",value:function(){return"Point"}}]),l}(V);r(67),r(218);function _e(a){return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_e(a)}function Fe(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||gt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(a){return function(i){if(Array.isArray(i))return Vt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||gt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gt(a,i){if(a){if(typeof a=="string")return Vt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Vt(a,i):void 0}}function Vt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function An(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function On(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yn(a,i,l){return i&&On(a.prototype,i),l&&On(a,l),a}function kt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Un(a,i)}function Qt(a){var i=jr();return function(){var l,u=er(a);if(i){var p=er(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dr(this,l)}}function dr(a,i){if(i&&(_e(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(a)}function gn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ar(a){var i=typeof Map=="function"?new Map:void 0;return ar=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return or(l,arguments,er(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Un(p,l)},ar(a)}function or(a,i,l){return or=jr()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var _=new(Function.bind.apply(u,y));return f&&Un(_,f.prototype),_},or.apply(null,arguments)}function jr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Un(a,i){return Un=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Un(a,i)}function er(a){return er=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},er(a)}function zo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ot,eu,xi,ku,us,wd,Ap,cf,qs,Zv,Jv,Tp,kh,Ks=function(a){kt(l,a);var i=Qt(l);function l(){var u;An(this,l);for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];return zo(gn(u=i.call(this,f.length)),"rows",void 0),zo(gn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(_,x){u[x]=_}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(gn(u),l.prototype),u}return Yn(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return pt(this.map(function(p){return p[u]}))}},{key:"transpose",value:function(){for(var u=[],p=0;p<this.columns;p++)u.push(this.getColumn(p));return or(l,u)}},{key:"cross",value:function(u){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),_=function(N){var L=u.getColumn(N);p[f][N]=y.reduce(function(X,Z,he){return X+Z*L[he]},0)},x=0;x<u.columns;x++)_(x);return or(l,pt(p))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new pe(u[0],u[1])})}},{key:"toString",value:function(){var u=Fe(this[0],2),p=u[0],f=u[1],y=Fe(this[1],2),_=y[0],x=y[1],N=Fe(this[2],2),L=N[0],X=N[1];return"matrix(".concat(p," ").concat(f," ").concat(_," ").concat(x," ").concat(L," ").concat(X,")")}},{key:"translate",value:function(u,p){return this.cross(new Zs(u,p))}},{key:"rotate",value:function(u){return this.cross(new Mp(u))}},{key:"scale",value:function(u,p){return this.cross(new Qv(u,p))}}]),l}(ar(Array)),Mp=function(a){kt(l,a);var i=Qt(l);function l(u){var p;return An(this,l),p=i.call(this,new J(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new J(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new J(0,0,1)),Object.setPrototypeOf(gn(p),l.prototype),p}return Yn(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ks),Qv=function(a){kt(l,a);var i=Qt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new J(u,0,0),new J(0,p,0),new J(0,0,1))),"sx",void 0),zo(gn(f),"sy",void 0),f.sx=u,f.sy=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ks),Zs=function(a){kt(l,a);var i=Qt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new J(1,0,0),new J(0,1,0),new J(u,p,1))),"tx",void 0),zo(gn(f),"ty",void 0),f.tx=u,f.ty=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ks),Pp={node:!1,edge:!1},NN={node:!0,edge:!0};function BE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function am(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?BE(Object(l),!0).forEach(function(u){ss(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):BE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Nh(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||UE(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rh(a){return function(i){if(Array.isArray(i))return Ib(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||UE(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UE(a,i){if(a){if(typeof a=="string")return Ib(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Ib(a,i):void 0}}function Ib(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lm(a){return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lm(a)}function Nu(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function RN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ss(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function qn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var VE,GE=200,WE=(ot=function(){function a(u){(function(he,xe){if(!(he instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,a),ss(this,"rootEl",void 0),Nu(this,"width",eu,this),Nu(this,"height",xi,this),ss(this,"theme",void 0),ss(this,"eventCenter",void 0),ss(this,"modelMap",new Map),ss(this,"topElement",void 0),ss(this,"animation",void 0),ss(this,"idGenerator",void 0),ss(this,"edgeGenerator",void 0),ss(this,"nodeMoveRules",[]),ss(this,"customTrajectory",void 0),Nu(this,"edgeType",ku,this),Nu(this,"nodes",us,this),Nu(this,"edges",wd,this),Nu(this,"overlapMode",Ap,this),Nu(this,"background",cf,this),Nu(this,"transformModel",qs,this),Nu(this,"editConfigModel",Zv,this),Nu(this,"gridSize",Jv,this),Nu(this,"partial",Tp,this),Nu(this,"fakerNode",kh,this);var p,f=u.container,y=u.background,_=y===void 0?{}:y,x=u.grid,N=u.idGenerator,L=u.edgeGenerator,X=u.animation,Z=u.customTrajectory;this.background=_,lm(x)==="object"&&(this.gridSize=x.size),this.rootEl=f,this.editConfigModel=new Jf(u),this.eventCenter=new Xc,this.transformModel=new op(this.eventCenter,u),this.theme=js(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(p=X)&&typeof p!="boolean"?Ou(Oo(Pp),p):Oo(p===!0?NN:Pp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=N,this.customTrajectory=Z,this.edgeGenerator=Je(this,L),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=tl()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"modelsMap",get:function(){return[].concat(Rh(this.nodes),Rh(this.edges)).reduce(function(u,p){return u[p.id]=p,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(N){return u.push(N)}),this.edges.forEach(function(N){return u.push(N)}),u=u.sort(function(N,L){return N.zIndex-L.zIndex});for(var p=[],f=[-200,-200],y=[this.width+GE,this.height+GE],_=0;_<u.length;_++){var x=u[_];x.visible&&(!this.partial||x.isSelected||this.isElementInArea(x,f,y,!1,!1))&&p.push(x)}return p}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===zr.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===zr.TEXT_EDIT});return u||p}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(p){p.isSelected&&u.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&u.set(p.id,p)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(p){p.isSelected&&u.push(p)}),u}},{key:"getAreaElement",value:function(u,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=arguments.length>4&&arguments[4]!==void 0&&arguments[4],x=[],N=[];this.nodes.forEach(function(Z){return N.push(Z)}),this.edges.forEach(function(Z){return N.push(Z)});for(var L=0;L<N.length;L++){var X=N[L];_&&!X.visible||!this.isElementInArea(X,u,p,f,y)||x.push(X)}return x}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var p;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[u])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(u){var p=u.x,f=u.y,y=this.rootEl.getBoundingClientRect(),_={x:p-y.left,y:f-y.top},x=Nh(this.transformModel.HtmlPointToCanvasPoint([_.x,_.y]),2);return{domOverlayPosition:_,canvasOverlayPosition:{x:x[0],y:x[1]}}}},{key:"isElementInArea",value:function(u,p,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],_=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===uo.NODE){for(var x=Wi(u=u),N=x.minX,L=x.minY,X=x.maxX,Z=x.maxY,he=[{x:N,y:L},{x:X,y:L},{x:X,y:Z},{x:N,y:Z}],xe=_,Re=0;Re<he.length;Re++){var et=he[Re],tt=et.x,yt=et.y,Bt=this.transformModel.CanvasPointToHtmlPoint([tt,yt]),hn=Nh(Bt,2);if(tt=hn[0],yt=hn[1],fd([tt,yt],p,f)!==_){xe=!_;break}}return xe}if(u.BaseType===uo.EDGE){var dn=u=u,Hn=dn.startPoint,sn=dn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([Hn.x,Hn.y]),wn=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),Dr=fd(In,p,f),$r=fd(wn,p,f);return y?Dr&&$r:Dr||$r}return!1}},{key:"graphDataToModel",value:function(u){var p=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Xf(u.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=Xf(u.edges,function(f){var y=p.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&u.push(y)});var p=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&p.push(y)}),{nodes:p,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,p=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){u=!0;break}p.push(y.getHistoryData())}if(u)return!1;for(var _=!1,x=[],N=0;N<this.edges.length;N++){var L=this.edges[N];if(L.isDragging){_=!0;break}x.push(L.getHistoryData())}return!_&&{nodes:p,edges:x}}},{key:"getEdgeModelById",value:function(u){var p;return(p=this.edgesMap[u])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var p=[],f=0;f<this.edges.length;f++){var y=this.edges[f],_=this.edges[f].sourceNodeId===u,x=this.edges[f].targetNodeId===u;(_||x)&&p.push(y)}return p}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(y){if(y.BaseType===uo.NODE&&f.nodes.push(y.getData()),y.BaseType===uo.EDGE){var _=y.getData(),x=p.get(_.sourceNodeId)&&p.get(_.targetNodeId);(u||x)&&f.edges.push(_)}}),f}},{key:"updateAttributes",value:function(u,p){this.getElement(u).updateAttributes(p)}},{key:"changeNodeId",value:function(u,p){return p||(p=tl()),this.nodesMap[p]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=p),f.targetNodeId===u&&(f.targetNodeId=p)}),this.nodesMap[u].model.id=p,this.nodesMap[p]=this.nodesMap[u],p):""}},{key:"changeEdgeId",value:function(u,p){return p||(p=tl()),this.edgesMap[p]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,p){return this.modelMap.set(u,p)}},{key:"toFront",value:function(u){var p,f,y,_=((p=this.nodesMap[u])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);_&&(this.overlapMode===Eo.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),_.setZIndex(9999),this.topElement=_),this.overlapMode===Eo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,p){var f,y,_,x=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[u])===null||y===void 0?void 0:y.model);x&&(typeof p=="number"&&(_=p),p==="top"&&(_=Zl()),p==="bottom"&&(_=--lf),x.setZIndex(_))}},{key:"deleteNode",value:function(u){var p=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Nn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=Qo(u);y.id&&this.nodesMap[u.id]&&delete y.id;var _=this.getModelAfterSnapToGrid(y);this.nodes.push(_);var x=_.getData(),N={data:x};return f&&(N.e=f),this.eventCenter.emit(p,N),_}},{key:"getModelAfterSnapToGrid",value:function(u){var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,y=u.y;return f&&y&&(u.x=El(f,this.gridSize),u.y=El(y,this.gridSize),lm(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-y)),new p(u,this)}},{key:"cloneNode",value:function(u){var p=this.getNodeModelById(u),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),p.setSelected(!1),y.getData()}},{key:"moveNode",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[u];if(_){var x=_.model,N=x.getMoveDistance(p,f,y),L=Nh(N,2);p=L[0],f=L[1],this.moveEdge(u,p,f)}}},{key:"moveNode2Coordinate",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=this.nodesMap[u];if(_){var x=_.model,N=x.x,L=x.y,X=p-N,Z=f-L;this.moveNode(u,X,Z,y)}}},{key:"editText",value:function(u){this.setElementStateById(u,zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var p=Qo(u),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var _=new y(am(am({},p),{},{type:f}),this),x=_.getData();return this.edges.push(_),this.eventCenter.emit(Nn.EDGE_ADD,{data:x}),_}},{key:"moveEdge",value:function(u,p,f){for(var y=0;y<this.edges.length;y++){var _=this.edges[y],x=_.textPosition,N=x.x,L=x.y,X=this.edges[y].sourceNodeId===u,Z=this.edges[y].targetNodeId===u;X&&_.moveStartPoint(p,f),Z&&_.moveEndPoint(p,f),(X||Z)&&this.handleEdgeTextMove(_,N,L)}}},{key:"handleEdgeTextMove",value:function(u,p,f){var y;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Er.POLYLINE_EDGE&&(y=u.text)!==null&&y!==void 0&&y.value){var _=u.text,x=Ql(_,u.points);u.moveText(x.x-_.x,x.y-_.y)}else{var N=u.textPosition,L=N.x,X=N.y;u.moveText(L-p,X-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===p){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var p=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(p,1),this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,p,f){this.nodes.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(zr.DEFAULT)}),this.edges.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(u,p){this.nodes.forEach(function(f){f.id===u&&f.updateText(p)}),this.edges.forEach(function(f){f.id===u&&f.updateText(p)})}},{key:"selectNodeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.nodesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.edgesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Eo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,p,f){for(var y=this,_=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=u.reduce(function(dn,Hn){var sn=y.nodesMap[Hn].model.getMoveDistance(p,f,_);return dn[Hn]=sn,dn},{}),N=0;N<this.edges.length;N++){var L=this.edges[N],X=L.textPosition,Z=X.x,he=X.y,xe=x[L.sourceNodeId],Re=x[L.targetNodeId],et=void 0,tt=void 0;if(xe&&Re&&L.modelType===Er.POLYLINE_EDGE){var yt=Nh(xe,2);et=yt[0],tt=yt[1],L.updatePointsList(et,tt)}else{if(xe){var Bt=Nh(xe,2);et=Bt[0],tt=Bt[1],L.moveStartPoint(et,tt)}if(Re){var hn=Nh(Re,2);et=hn[0],tt=hn[1],L.moveEndPoint(et,tt)}}(xe||Re)&&this.handleEdgeTextMove(L,Z,he)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,p){var f=this.getNodeModelById(u);if(f){var y=f.getData();y.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var x=new _(y,this);this.nodes.splice(this.nodesMap[u].index,1,x),this.getNodeEdges(u).forEach(function(N){if(N.sourceNodeId===u){var L=zs(x,N.startPoint,x.width,x.height);N.updateStartPoint(L)}if(N.targetNodeId===u){var X=zs(x,N.endPoint,x.width,x.height);N.updateEndPoint(X)}})}}},{key:"changeEdgeType",value:function(u,p){var f=this.getEdgeModelById(u);if(f&&f.type!==p){var y=f.getData();y.type=p;var _=this.getModel(p);if(!_)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var x=new _(y,this);this.edges.splice(this.edgesMap[u].index,1,x)}}},{key:"getNodeIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetNodeId===u&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===u&&f.push(p.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===u&&f.push(p.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=js(am(am({},this.theme),u))}},{key:"resize",value:function(u,p){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,p=[],f=[];u.forEach(function(X){var Z=X.x,he=X.y,xe=X.width,Re=X.height,et=X.getNodeStyle().strokeWidth,tt=et===void 0?0:et,yt=Z+xe/2+tt,Bt=Z-xe/2-tt,hn=he+Re/2+tt,dn=he-Re/2-tt;p=p.concat([yt,Bt].filter(function(Hn){return!Number.isNaN(Hn)})),f=f.concat([hn,dn].filter(function(Hn){return!Number.isNaN(Hn)}))});var y=Math.min.apply(Math,Rh(p)),_=Math.max.apply(Math,Rh(p)),x=Math.min.apply(Math,Rh(f)),N=_-y||0,L=Math.max.apply(Math,Rh(f))-x||0;return{virtualRectWidth:N,virtualRectHeight:L,virtualRectCenterPositionX:y+N/2,virtualRectCenterPositionY:x+L/2}}},{key:"translateCenter",value:function(){var u=this.nodes,p=this.width,f=this.height,y=this.rootEl,_=this.transformModel;if(u.length){var x=p||y.clientWidth,N=f||y.clientHeight,L=this.getVirtualRectSize(),X=L.virtualRectCenterPositionX,Z=L.virtualRectCenterPositionY;_.focusOn(X,Z,x,N)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,_=this.height,x=this.rootEl,N=this.transformModel;if(f.length){var L=y||x.clientWidth,X=_||x.clientHeight,Z=this.getVirtualRectSize(),he=Z.virtualRectWidth,xe=Z.virtualRectHeight,Re=Z.virtualRectCenterPositionX,et=Z.virtualRectCenterPositionY,tt=(he+p)/L,yt=(xe+u)/X,Bt=0;Bt=1/Math.max(tt,yt);var hn=[L/2,X/2];N.zoom(Bt,hn),N.focusOn(Re,et,L,X)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&RN(i.prototype,l),a}(),eu=qn(ot.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xi=qn(ot.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ku=qn(ot.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=qn(ot.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wd=qn(ot.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ap=qn(ot.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Eo.DEFAULT}}),cf=qn(ot.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs=qn(ot.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zv=qn(ot.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jv=qn(ot.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Tp=qn(ot.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kh=qn(ot.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(ot.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"nodesMap"),ot.prototype),qn(ot.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"edgesMap"),ot.prototype),qn(ot.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"modelsMap"),ot.prototype),qn(ot.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"sortElements"),ot.prototype),qn(ot.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"textEditElement"),ot.prototype),qn(ot.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"selectElements"),ot.prototype),qn(ot.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(ot.prototype,"selectNodes"),ot.prototype),qn(ot.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setFakerNode"),ot.prototype),qn(ot.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"removeFakerNode"),ot.prototype),qn(ot.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setModel"),ot.prototype),qn(ot.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"toFront"),ot.prototype),qn(ot.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setElementZIndex"),ot.prototype),qn(ot.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteNode"),ot.prototype),qn(ot.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"addNode"),ot.prototype),qn(ot.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"cloneNode"),ot.prototype),qn(ot.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNode"),ot.prototype),qn(ot.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNode2Coordinate"),ot.prototype),qn(ot.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"editText"),ot.prototype),qn(ot.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"addEdge"),ot.prototype),qn(ot.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveEdge"),ot.prototype),qn(ot.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeBySourceAndTarget"),ot.prototype),qn(ot.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeById"),ot.prototype),qn(ot.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeBySource"),ot.prototype),qn(ot.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"deleteEdgeByTarget"),ot.prototype),qn(ot.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setElementStateById"),ot.prototype),qn(ot.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"updateText"),ot.prototype),qn(ot.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectNodeById"),ot.prototype),qn(ot.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectEdgeById"),ot.prototype),qn(ot.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"selectElementById"),ot.prototype),qn(ot.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"clearSelectElements"),ot.prototype),qn(ot.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"moveNodes"),ot.prototype),qn(ot.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setDefaultEdgeType"),ot.prototype),qn(ot.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"changeNodeType"),ot.prototype),qn(ot.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"changeEdgeType"),ot.prototype),qn(ot.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeIncomingEdge"),ot.prototype),qn(ot.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeOutgoingEdge"),ot.prototype),qn(ot.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getAnchorIncomingEdge"),ot.prototype),qn(ot.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getAnchorOutcomingEdge"),ot.prototype),qn(ot.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeIncomingNode"),ot.prototype),qn(ot.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"getNodeOutgoingNode"),ot.prototype),qn(ot.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"setTheme"),ot.prototype),qn(ot.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"resize"),ot.prototype),qn(ot.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"clearData"),ot.prototype),qn(ot.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"translateCenter"),ot.prototype),qn(ot.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"fitView"),ot.prototype),qn(ot.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"openEdgeAnimation"),ot.prototype),qn(ot.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(ot.prototype,"closeEdgeAnimation"),ot.prototype),ot),DN=WE;function Lb(a){return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Lb(a)}function Fb(){return Fb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Fb.apply(this,arguments)}function CN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function $b(a,i){return $b=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},$b(a,i)}function jN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=um(a);if(i){var p=um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return IN(this,l)}}function IN(a,i){if(i&&(Lb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Js(a)}function Js(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function um(a){return um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},um(a)}function ff(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var zE,LN=ps(VE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&$b(f,y)})(p,a);var i,l,u=jN(p);function p(f){var y;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),ff(Js(y=u.call(this)),"stepDrag",void 0),ff(Js(y),"stepScrollX",0),ff(Js(y),"stepScrollY",0),ff(Js(y),"onDragging",function(L){var X=L.deltaX,Z=L.deltaY;y.setState({isDragging:!0});var he=y.props.graphModel,xe=he.transformModel;he.editConfigModel.stopMoveGraph!==!0&&xe.translate(X,Z)}),ff(Js(y),"onDragEnd",function(){y.setState({isDragging:!1})}),ff(Js(y),"zoomHandler",function(L){var X=y.props,Z=X.graphModel,he=Z.editConfigModel,xe=Z.transformModel,Re=Z.gridSize,et=X.graphModel,tt=L.deltaX,yt=L.deltaY;if(he.stopScrollGraph||L.ctrlKey===!0){if(!he.stopZoomGraph){L.preventDefault();var Bt=et.getPointByClient({x:L.clientX,y:L.clientY}).canvasOverlayPosition,hn=Bt.x,dn=Bt.y;xe.zoom(L.deltaY<0,[hn,dn])}}else{if(L.preventDefault(),y.stepScrollX+=tt,y.stepScrollY+=yt,Math.abs(y.stepScrollX)>=Re){var Hn=y.stepScrollX%Re,sn=y.stepScrollX-Hn;xe.translate(-sn*xe.SCALE_X,0),y.stepScrollX=Hn}if(Math.abs(y.stepScrollY)>=Re){var In=y.stepScrollY%Re,wn=y.stepScrollY-In;xe.translate(0,-wn*xe.SCALE_Y),y.stepScrollY=In}}}),ff(Js(y),"clickHandler",function(L){if(L.target.getAttribute("name")==="canvas-overlay"){var X=y.props.graphModel;X.selectElements.size>0&&X.clearSelectElements(),X.eventCenter.emit(Nn.BLANK_CLICK,{e:L})}}),ff(Js(y),"handleContextMenu",function(L){if(L.target.getAttribute("name")==="canvas-overlay"){L.preventDefault();var X=y.props.graphModel,Z=X.getPointByClient({x:L.clientX,y:L.clientY});X.eventCenter.emit(Nn.BLANK_CONTEXTMENU,{e:L,position:Z})}}),ff(Js(y),"mouseDownHandler",function(L){var X=y.props.graphModel,Z=X.eventCenter,he=X.editConfigModel,xe=X.transformModel.SCALE_X,Re=X.gridSize,et=L.target,tt=!he.adjustEdge&&!he.adjustNodePosition;(et.getAttribute("name")==="canvas-overlay"||tt)&&(he.stopMoveGraph!==!0?(y.stepDrag.setStep(Re*xe),y.stepDrag.handleMouseDown(L)):Z.emit(Nn.BLANK_MOUSEDOWN,{e:L}),y.clickHandler(L))});var _=f.graphModel,x=_.gridSize,N=_.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:x,eventType:"BLANK",isStopPropagation:!1,eventCenter:N,model:null}),y.state={isDragging:!1},y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,_=y.children,x=y.dnd,N=this.state.isDragging;return Object(Be.g)("svg",Fb({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:N?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},x.eventMap()),Object(Be.g)("g",{transform:f},_))}}])&&CN(i.prototype,l),p}(Be.a))||VE;function Bb(a){return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Bb(a)}function FN(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function $N(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ub(a,i){return Ub=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ub(a,i)}function BN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sm(a);if(i){var p=sm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return UN(this,l)}}function UN(a,i){if(i&&(Bb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function sm(a){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sm(a)}var VN=ps(zE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Ub(f,y)})(p,a);var i,l,u=BN(p);function p(){return FN(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,_=f.graphModel,x=y.getTools().map(function(N){return Object(Be.g)(N,{graphModel:_,logicFlow:y.instance})});return y.components=x,x}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,_=f.graphModel,x=document.querySelector("#ToolOverlay_".concat(_.flowId)),N=y.getInstance();N.components.forEach(function(L){return L(N,x)}),N.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Be.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&$N(i.prototype,l),p}(Be.a))||zE;function Vb(a){return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Vb(a)}function GN(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function WN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Gb(a,i){return Gb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Gb(a,i)}function zN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cm(a);if(i){var p=cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return HN(this,l)}}function HN(a,i){if(i&&(Vb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function cm(a){return cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},cm(a)}var HE,XN=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Gb(f,y)})(p,a);var i,l,u=zN(p);function p(){return GN(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.background;return Object(Be.g)("div",{className:"lf-background"},Object(Be.g)("div",{style:f,className:"lf-background-area"}))}}])&&WN(i.prototype,l),p}(Be.a);function Wb(a){return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Wb(a)}function YN(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function zb(a,i){return zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},zb(a,i)}function KN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fm(a);if(i){var p=fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ZN(this,l)}}function ZN(a,i){if(i&&(Wb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XE(a)}function XE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fm(a){return fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fm(a)}function JN(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var YE=ps(HE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&zb(f,y)})(p,a);var i,l,u=KN(p);function p(){var f;YN(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return JN(XE(f=u.call.apply(u,[this].concat(_))),"id",tl()),f}return i=p,(l=[{key:"renderDot",value:function(){var f=this.props,y=f.config,_=y.color,x=y.thickness,N=x===void 0?2:x,L=f.size,X=f.visible,Z=Math.min(Math.max(2,N),L/2),he=1;return X||(he=0),Object(Be.g)("rect",{width:Z,height:Z,rx:Z/2,ry:Z/2,fill:_,opacity:he})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,_=y.color,x=y.thickness,N=x===void 0?1:x,L=f.size,X=f.visible,Z=Math.min(Math.max(1,N),L/2),he="M ".concat(L," 0 H0 M0 0 V0 ").concat(L),xe=1;return X||(xe=0),Object(Be.g)("path",{d:he,stroke:_,strokeWidth:Z,opacity:xe})}},{key:"render",value:function(){var f=this.props,y=f.type,_=f.size,x=f.graphModel.transformModel,N=[x.SCALE_X,x.SKEW_Y,x.SKEW_X,x.SCALE_Y,x.TRANSLATE_X,x.TRANSLATE_Y].join(","),L="matrix(".concat(N,")");return Object(Be.g)("div",{className:"lf-grid"},Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Be.g)("defs",null,Object(Be.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:L,x:"0",y:"0",width:_,height:_},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object(Be.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&qN(i.prototype,l),p}(Be.a))||HE;YE.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Hb(a){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hb(a)}function QN(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var KE,Dh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=QN(l,2),p=u[0],f=u[1];(p==="style"||Hb(f)!=="object")&&(i[p]=f)}),Object(Be.g)("line",i)};function Xb(a){return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xb(a)}function ZE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function dm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ZE(Object(l),!0).forEach(function(u){eR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ZE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function eR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function tR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yb(a,i){return Yb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Yb(a,i)}function rR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=pm(a);if(i){var p=pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oR(this,l)}}function oR(a,i){if(i&&(Xb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function pm(a){return pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},pm(a)}var JE,iR=ps(KE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Yb(f,y)})(p,a);var i,l,u=rR(p);function p(){return tR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,_=f.isShowHorizontal,x=f.isShowVertical,N=f.getStyle(),L=y.x,X=L===void 0?0:L,Z=y.y,he=Z===void 0?0:Z,xe=dm(dm({x1:-1e5,y1:he,x2:1e5,y2:he},N),{},{stroke:_?N.stroke:"none"}),Re=dm(dm({x1:X,y1:-1e5,x2:X,y2:1e5},N),{},{stroke:x?N.stroke:"none"});return Object(Be.g)("g",{className:"lf-snapline"},Object(Be.g)(Dh,xe),Object(Be.g)(Dh,Re))}}])&&nR(i.prototype,l),p}(Be.a))||KE;function qb(a){return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},qb(a)}function aR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return QE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return QE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ed(a){var i=a.x,l=a.y,u=a.width,p=a.height,f=a.className,y=a.radius,_=i-u/2,x=l-p/2,N={};return Object.entries(a).forEach(function(L){var X=aR(L,2),Z=X[0],he=X[1];qb(he)!=="object"&&(N[Z]=he)}),N.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(N.rx=y,N.ry=y),N.x=_,N.y=x,Object(Be.g)("rect",N)}function Kb(a){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kb(a)}function Ch(){return Ch=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Ch.apply(this,arguments)}function eO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function tO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?eO(Object(l),!0).forEach(function(u){lR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):eO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function uR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Zb(a,i){return Zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Zb(a,i)}function cR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hm(a);if(i){var p=hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fR(this,l)}}function fR(a,i){if(i&&(Kb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function hm(a){return hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hm(a)}Ed.defaultProps={className:"",radius:""};var nO,dR=ps(JE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Zb(f,y)})(p,a);var i,l,u=cR(p);function p(){return uR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,_=f.editConfigModel,x=_.hoverOutline,N=_.nodeSelectedOutline,L=[];return y.forEach(function(X){if(X.isHovered||X.isSelected){var Z=X.isHovered,he=X.isSelected,xe=X.x,Re=X.y,et=X.width,tt=X.height;if(N&&he||x&&Z){var yt=X.getOutlineStyle(),Bt={};if(Object.keys(yt).forEach(function(dn){dn!=="hover"&&(Bt[dn]=yt[dn])}),Z){var hn=yt.hover;Bt=tO(tO({},Bt),hn)}L.push(Object(Be.g)(Ed,Ch({transform:X.transform,className:"lf-outline-node",x:xe,y:Re,width:et+10,height:tt+10},Bt)))}}}),L}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,_=f.editConfigModel,x=_.edgeSelectedOutline,N=_.hoverOutline,L=[],X=0;X<y.length;X++){var Z=y[X];(x&&Z.isSelected||N&&Z.isHovered)&&(Z.modelType===Er.LINE_EDGE?L.push(this.getLineOutline(Z)):Z.modelType===Er.POLYLINE_EDGE?L.push(this.getPolylineOutline(Z)):Z.modelType===Er.BEZIER_EDGE&&L.push(this.getBezierOutline(Z)))}return L}},{key:"getLineOutline",value:function(f){var y=f.startPoint,_=f.endPoint,x=(y.x+_.x)/2,N=(y.y+_.y)/2,L=Math.abs(y.x-_.x)+10,X=Math.abs(y.y-_.y)+10,Z=f.getOutlineStyle();return Object(Be.g)(Ed,Ch({className:"lf-outline-edge",x,y:N,width:L,height:X},Z))}},{key:"getPolylineOutline",value:function(f){var y=f.points,_=go(y),x=Wt(_,8),N=x.x,L=x.y,X=x.width,Z=x.height,he=f.getOutlineStyle();return Object(Be.g)(Ed,Ch({className:"lf-outline",x:N,y:L,width:X,height:Z},he))}},{key:"getBezierOutline",value:function(f){var y=f.path,_=zn(y),x=Wt(_,8),N=x.x,L=x.y,X=x.width,Z=x.height,he=f.getOutlineStyle();return Object(Be.g)(Ed,Ch({className:"lf-outline",x:N,y:L,width:X,height:Z},he))}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&sR(i.prototype,l),p}(Be.a))||JE;function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function pR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return rO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return rO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function jh(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.r,y=f===void 0?4:f,_=a.className,x={cx:l,cy:p,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(N){var L=pR(N,2),X=L[0],Z=L[1];Jb(Z)!=="object"&&(x[X]=Z)}),x.className=_?"lf-basic-shape ".concat(_):"lf-basic-shape",Object(Be.g)("circle",x)}function Qb(a){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qb(a)}function hR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return oO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return oO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ey(){return ey=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ey.apply(this,arguments)}function iO(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function aO(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function lO(a,i,l){return i&&aO(a.prototype,i),l&&aO(a,l),a}function uO(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&e_(a,i)}function e_(a,i){return e_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e_(a,i)}function sO(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ym(a);if(i){var p=ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vR(this,l)}}function vR(a,i){if(i&&(Qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vm(a)}function vm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ym(a){return ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ym(a)}function t_(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var cO,fO=function(a){uO(l,a);var i=sO(l);function l(){var u;return iO(this,l),t_(vm(u=i.call(this)),"dragHandler",void 0),t_(vm(u),"onDragging",function(p){var f=p.event,y=u.props,_=y.graphModel,x=y.bezierModel,N=y.type,L=_.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,X=L.x,Z=L.y;x.updateAdjustAnchor({x:X,y:Z},N),_.eventCenter.emit(Nn.EDGE_ADJUST,{data:x.getData()})}),t_(vm(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ee({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return lO(l,[{key:"render",value:function(){var u=this,p=this.props.position,f=p.x,y=p.y,_=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Be.g)(jh,ey({className:"lf-bezier-adjust-anchor",x:f,y},_,{onMouseDown:function(x){u.dragHandler.handleMouseDown(x)}}))}}]),l}(Be.a),yR=ps(nO=function(a){uO(l,a);var i=sO(l);function l(){return iO(this,l),i.apply(this,arguments)}return lO(l,[{key:"getBezierAdjust",value:function(u,p){var f=u.path,y=u.id,_=hR(zn(f),4),x=_[0],N=_[1],L=_[2],X=_[3],Z=u.getEdgeStyle().adjustLine,he=[];return he.push(Object(Be.g)(Dh,ey({x1:x.x,y1:x.y,x2:N.x,y2:N.y},Z))),he.push(Object(Be.g)(fO,{position:N,bezierModel:u,graphModel:p,key:"".concat(y,"_ePre"),type:"sNext"})),he.push(Object(Be.g)(Dh,ey({x1:X.x,y1:X.y,x2:L.x,y2:L.y},Z))),he.push(Object(Be.g)(fO,{position:L,bezierModel:u,graphModel:p,key:"".concat(y,"_sNext"),type:"ePre"})),he}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,p=u.edges,f=[],y=0;y<p.length;y++){var _=p[y];_.isSelected&&_.modelType===Er.BEZIER_EDGE&&_.draggable&&f.push(this.getBezierAdjust(_,u))}return f}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Be.a))||nO;function n_(a){return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n_(a)}function mR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r_(a,i){return r_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r_(a,i)}function bR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=mm(a);if(i){var p=mm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _R(this,l)}}function _R(a,i){if(i&&(n_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function mm(a){return mm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},mm(a)}var dO,wR=ps(cO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r_(f,y)})(p,a);var i,l,u=bR(p);function p(){return mR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Be.g)("g",{transform:f},y))}}])&&gR(i.prototype,l),p}(Be.a))||cO;function o_(a){return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o_(a)}function i_(){return i_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},i_.apply(this,arguments)}function ER(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function OR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a_(a,i){return a_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a_(a,i)}function xR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gm(a);if(i){var p=gm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SR(this,l)}}function SR(a,i){if(i&&(o_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function gm(a){return gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},gm(a)}var AR=ps(dO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a_(f,y)})(p,a);var i,l,u=xR(p);function p(){return ER(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getComponent",value:function(f,y){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",x=this.props.getView,N=x(f.type);return Object(Be.g)(N,{key:f.id,model:f,graphModel:y,overlay:_})}},{key:"render",value:function(){var f=this,y=this.props,_=y.graphModel,x=y.tool,N=y.options,L=y.dnd,X=y.snaplineModel,Z={};N.width&&(Z.width="".concat(_.width,"px")),N.height&&(Z.height="".concat(_.height,"px"));var he=N.grid,xe=_.fakerNode,Re=_.editConfigModel.adjustEdge;return Object(Be.g)("div",{className:"lf-graph","flow-id":_.flowId,style:Z},Object(Be.g)(LN,{graphModel:_,dnd:L},Object(Be.g)("g",{className:"lf-base"},Xf(_.sortElements,function(et){return f.getComponent(et,_)})),xe?this.getComponent(xe,_):""),Object(Be.g)(wR,{graphModel:_},Object(Be.g)(dR,{graphModel:_}),Re?Object(Be.g)(yR,{graphModel:_}):"",N.snapline!==!1?Object(Be.g)(iR,{snaplineModel:X}):""),Object(Be.g)(VN,{graphModel:_,tool:x}),N.background&&Object(Be.g)(XN,{background:N.background}),N.grid&&Object(Be.g)(YE,i_({},he,{graphModel:_})))}}],l&&OR(i.prototype,l),p}(Be.a))||dO,TR=AR;function pO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function bm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?pO(Object(l),!0).forEach(function(u){df(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function MR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function df(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var PR=function(){function a(u){var p=this;(function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),df(this,"nodeConfig",void 0),df(this,"lf",void 0),df(this,"fakerNode",void 0),df(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),df(this,"dragEnter",function(y){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(bm(bm({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),df(this,"onDragOver",function(y){if(y.preventDefault(),p.fakerNode){var _=p.clientToLocalPoint({x:y.clientX,y:y.clientY}),x=_.x,N=_.y;p.fakerNode.moveTo(x,N);var L=p.fakerNode.getData();p.lf.setNodeSnapLine(L),p.lf.graphModel.eventCenter.emit(Nn.NODE_DND_DRAG,{data:L})}return!1}),df(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),df(this,"onDrop",function(y){p.lf.graphModel&&y&&p.nodeConfig&&(p.lf.addNode(bm(bm({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY})),Nn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=u.lf;this.lf=f}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var p=u.x,f=u.y,y=Xu(this.lf.options,["grid","size"]),_=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,x=_.x,N=_.y;return{x:El(x,y),y:El(N,y)}}},{key:"startDrag",value:function(u){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&MR(i.prototype,l),a}();function hO(a){var i=a.container,l=a.grid,u=a.width,p=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=Ou({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Ou({},yO,a)}var ao,vO,yO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function l_(a){return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l_(a)}function u_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return mO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return mO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function gO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function _m(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?gO(Object(l),!0).forEach(function(u){bO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):gO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function kR(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function NR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function RR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ty(){return ty=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=DR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},ty.apply(this,arguments)}function DR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Od(a))!==null;);return a}function s_(a,i){return s_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s_(a,i)}function CR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Od(a);if(i){var p=Od(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return jR(this,l)}}function jR(a,i){if(i&&(l_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wm(a)}function wm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Od(a){return Od=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Od(a)}function bO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function cs(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var c_=(ao=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&s_(f,y)})(p,a);var i,l,u=CR(p);function p(){var f;NR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return bO(wm(f=u.call.apply(u,[this].concat(_))),"modelType",Er.BEZIER_EDGE),kR(wm(f),"path",vO,wm(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=100,ty(Od(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return _m(_m({},ty(Od(p.prototype),"getEdgeStyle",this).call(this)),Oo(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(_){var x=_.x,N=_.y;f+=x,y+=N}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=ty(Od(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(_){return{x:_.x,y:_.y}});return _m(_m({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return fr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=u_(f,4),_=y[0],x=y[1],N=y[2],L=y[3];return"M ".concat(_.x," ").concat(_.y,`
    C `).concat(x.x," ").concat(x.y,`,
    `).concat(N.x," ").concat(N.y,`,
    `).concat(L.x," ").concat(L.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,_=f.ePre;this.updatePath(y,_)}},{key:"updatePath",value:function(f,y){f=Oo(f),y=Oo(y);var _={x:this.startPoint.x,y:this.startPoint.y},x={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var N=this.getControls();f=N.sNext,y=N.ePre}this.pointsList=[_,f,y,x],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var _=u_(this.pointsList,3),x=_[1],N=_[2];x.x+=f,x.y+=y,this.updatePath(x,N)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var _=u_(this.pointsList,3),x=_[1],N=_[2];N.x+=f,N.y+=y,this.updatePath(x,N)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,_=f.endPoint,x=f.sourceNode,N=f.targetNode,L=fr({start:y,end:_,sourceNode:x,targetNode:N,offset:this.offset}),X=L.sNext,Z=L.ePre;this.pointsList=[y,X,Z,_],this.initPoints()}}])&&RR(i.prototype,l),p}(as),vO=cs(ao.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cs(ao.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"initPoints"),ao.prototype),cs(ao.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"updatePoints"),ao.prototype),cs(ao.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"updateStartPoint"),ao.prototype),cs(ao.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"updateEndPoint"),ao.prototype),cs(ao.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"moveStartPoint"),ao.prototype),cs(ao.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"moveEndPoint"),ao.prototype),cs(ao.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"updateAdjustAnchor"),ao.prototype),cs(ao.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"getAdjustStart"),ao.prototype),cs(ao.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"getAdjustEnd"),ao.prototype),cs(ao.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(ao.prototype,"updateAfterAdjustStartAndEnd"),ao.prototype),ao),nn,_O,wO,EO,OO,xO,SO,AO,TO,MO,PO,kO,NO,RO,DO,CO,jO,IO,LO,FO,$O,BO,UO,IR=function(a){return a==null};function LR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||VO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f_(a){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f_(a)}function VO(a,i){if(a){if(typeof a=="string")return GO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?GO(a,i):void 0}}function GO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function WO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function il(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?WO(Object(l),!0).forEach(function(u){Ml(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):WO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Si(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function FR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ml(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sr(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var pf,zO,hf=(nn=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Ml(this,"id",""),Si(this,"type",_O,this),Si(this,"x",wO,this),Si(this,"y",EO,this),Si(this,"text",OO,this),Si(this,"properties",xO,this),Si(this,"_width",SO,this),Si(this,"_height",AO,this),Si(this,"anchorsOffset",TO,this),Si(this,"isSelected",MO,this),Si(this,"isHovered",PO,this),Si(this,"isShowAnchor",kO,this),Si(this,"isDragging",NO,this),Si(this,"isHitable",RO,this),Si(this,"draggable",DO,this),Si(this,"visible",CO,this),Si(this,"enableRotate",jO,this),Ml(this,"virtual",!1),Ml(this,"graphModel",void 0),Si(this,"zIndex",IO,this),Si(this,"state",LO,this),Si(this,"autoToFront",FO,this),Si(this,"style",$O,this),Si(this,"transform",BO,this),Si(this,"_rotate",UO,this),Ml(this,"BaseType",uo.NODE),Ml(this,"modelType",Er.NODE),Ml(this,"additionStateData",void 0),Ml(this,"targetRules",[]),Ml(this,"sourceRules",[]),Ml(this,"moveRules",[]),Ml(this,"hasSetTargetRules",!1),Ml(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var p=this.x,f=p===void 0?0:p,y=this.y,_=y===void 0?0:y;this.transform=new Zs(-f,-_).rotate(u).translate(f,_).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||tl()}this.formatText(u),Ri(this,function(_){return Za(_,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===Eo.INCREASE&&(this.zIndex=u.zIndex||Zl())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,_=this.properties;Object(c.x)(_)&&(_=Object(c.I)(_));var x={id:this.id,type:this.type,x:this.x,y:this.y,properties:_};return this.rotate&&(x.rotate=this.rotate),this.graphModel.overlapMode===Eo.INCREASE&&(x.zIndex=this.zIndex),y&&(x.text={x:p,y:f,value:y}),x}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return il(il({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return Oo(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return Oo(u)}},{key:"getAnchorStyle",value:function(u){var p=this.graphModel.theme.anchor;return Oo(p)}},{key:"getAnchorLineStyle",value:function(u){var p=this.graphModel.theme.anchorLine;return Oo(p)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return Oo(u)}},{key:"isAllowConnectedAsSource",value:function(u,p,f,y){var _=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var x,N=!0,L=0;L<_.length;L++){var X=_[L];if(!X.validate.call(this,this,u,p,f,y)){N=!1,x=X.message;break}}return{isAllPass:N,msg:x}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,p,f,y){var _=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var x,N=!0,L=0;L<_.length;L++){var X=_[L];if(!X.validate.call(this,u,this,p,f,y)){N=!1,x=X.message;break}}return{isAllPass:N,msg:x}}},{key:"isAllowMoveNode",value:function(u,p){var f,y=!0,_=!0,x=function(X,Z){var he=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!he){if(Array.isArray(X)||(he=VO(X))||Z&&X&&typeof X.length=="number"){he&&(X=he);var xe=0,Re=function(){};return{s:Re,n:function(){return xe>=X.length?{done:!0}:{done:!1,value:X[xe++]}},e:function(Bt){throw Bt},f:Re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var et,tt=!0,yt=!1;return{s:function(){he=he.call(X)},n:function(){var Bt=he.next();return tt=Bt.done,Bt},e:function(Bt){yt=!0,et=Bt},f:function(){try{tt||he.return==null||he.return()}finally{if(yt)throw et}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(x.s();!(f=x.n()).done;){var N=(0,f.value)(this,u,p);if(!N)return!1;if(f_(N)==="object"){var L=N;if(L.x===!1&&L.y===!1)return!1;y=y&&L.x,_=_&&L.y}}}catch(X){x.e(X)}finally{x.f()}return{x:y,y:_}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,p=this.id,f=this.x,y=this.y;return u&&u.length>0?u.map(function(_,x){return _.length?(_=_,{id:"".concat(p,"_").concat(x),x:f+_[0],y:y+_[1]}):il(il({},_=_),{},{x:f+_.x,y:y+_.y,id:_.id||"".concat(p,"_").concat(x)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(p,f){for(var y,_=Gi(f),x=Number.MAX_SAFE_INTEGER,N=0;N<_.length;N++){var L=la(p.x,p.y,_[N].x,_[N].y);L<x&&(x=L,y={index:N,anchor:Au(Au({},_[N]),{},{x:_[N].x,y:_[N].y,id:_[N].id})})}return y}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),p=this.x,f=this.y,y=this.rotate;return u.forEach(function(_){var x=_.x,N=_.y,L=LR(new Ks([x,N,1]).translate(-p,-f).rotate(y).translate(p,f)[0],2),X=L[0],Z=L[1];_.x=X,_.y=Z}),u}},{key:"getAnchorInfo",value:function(u){if(!IR(u))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,_=!1;if(f)y=!0,_=!0;else{var x=this.isAllowMoveNode(u,p);typeof x=="boolean"?(y=x,_=x):(y=x.x,_=x.y)}if(y){var N=this.x+u;this.x=N,this.text&&this.moveText(u,0)}if(_){var L=this.y+p;this.y=L,this.text&&this.moveText(0,p)}return y||_}},{key:"getMoveDistance",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,_=!1,x=0,N=0;if(f)y=!0,_=!0;else{var L=this.isAllowMoveNode(u,p);typeof L=="boolean"?(y=L,_=L):(y=L.x,_=L.y)}if(y&&u){var X=this.x+u;this.x=X,this.text&&this.moveText(u,0),x=u}if(_&&p){var Z=this.y+p;this.y=Z,this.text&&this.moveText(0,p),N=p}return[x,N]}},{key:"moveTo",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=u-this.x,_=p-this.y;return!(!f&&!this.isAllowMoveNode(y,_)||(this.text&&this.text&&this.moveText(y,_),this.x=u,this.y=p,0))}},{key:"moveText",value:function(u,p){var f=this.text,y=f.x,_=f.y,x=f.value,N=f.draggable,L=f.editable;this.text={value:x,editable:L,draggable:N,x:y+u,y:_+p}}},{key:"updateText",value:function(u){this.text=il(il({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"setProperty",value:function(u,p){this.properties=il(il({},Object(c.I)(this.properties)),{},Ml({},u,Qo(p))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=il(il({},Object(c.I)(this.properties)),Qo(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,p){this.style=il(il({},this.style),{},Ml({},u,Qo(p)))}},{key:"setStyles",value:function(u){this.style=il(il({},this.style),Qo(u))}},{key:"updateStyles",value:function(u){this.style=il({},Qo(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Ri(this,u)}}],l&&FR(i.prototype,l),a}(),_O=Sr(nn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wO=Sr(nn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),EO=Sr(nn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),OO=Sr(nn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),xO=Sr(nn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),SO=Sr(nn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),AO=Sr(nn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),TO=Sr(nn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),MO=Sr(nn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),PO=Sr(nn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kO=Sr(nn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),NO=Sr(nn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),RO=Sr(nn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),DO=Sr(nn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),CO=Sr(nn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jO=Sr(nn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),IO=Sr(nn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),LO=Sr(nn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),FO=Sr(nn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$O=Sr(nn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),BO=Sr(nn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=Sr(nn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sr(nn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"incoming"),nn.prototype),Sr(nn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"outgoing"),nn.prototype),Sr(nn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"addNodeMoveRules"),nn.prototype),Sr(nn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"move"),nn.prototype),Sr(nn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"getMoveDistance"),nn.prototype),Sr(nn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveTo"),nn.prototype),Sr(nn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveText"),nn.prototype),Sr(nn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateText"),nn.prototype),Sr(nn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setSelected"),nn.prototype),Sr(nn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHovered"),nn.prototype),Sr(nn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setIsShowAnchor"),nn.prototype),Sr(nn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setEnableRotate"),nn.prototype),Sr(nn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHitable"),nn.prototype),Sr(nn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setElementState"),nn.prototype),Sr(nn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperty"),nn.prototype),Sr(nn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperties"),nn.prototype),Sr(nn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"deleteProperty"),nn.prototype),Sr(nn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyle"),nn.prototype),Sr(nn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyles"),nn.prototype),Sr(nn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateStyles"),nn.prototype),Sr(nn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setZIndex"),nn.prototype),Sr(nn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateAttributes"),nn.prototype),nn);function d_(a){return d_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},d_(a)}function HO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function XO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?HO(Object(l),!0).forEach(function(u){YO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):HO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function $R(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function BR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function UR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p_(){return p_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=VR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},p_.apply(this,arguments)}function VR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ih(a))!==null;);return a}function h_(a,i){return h_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h_(a,i)}function GR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ih(a);if(i){var p=Ih(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return WR(this,l)}}function WR(a,i){if(i&&(d_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Em(a)}function Em(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ih(a){return Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ih(a)}function YO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function v_(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Fa,qO,KO,y_=(pf=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&h_(f,y)})(p,a);var i,l,u=GR(p);function p(){var f;BR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return YO(Em(f=u.call.apply(u,[this].concat(_))),"modelType",Er.CIRCLE_NODE),$R(Em(f),"r",zO,Em(f)),f}return i=p,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=p_(Ih(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return XO(XO({},f),Oo(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.r;return[{x:f,y:y-_,id:"".concat(this.id,"_0")},{x:f+_,y,id:"".concat(this.id,"_1")},{x:f,y:y+_,id:"".concat(this.id,"_2")},{x:f-_,y,id:"".concat(this.id,"_3")}]}}])&&UR(i.prototype,l),p}(hf),zO=v_(pf.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),v_(pf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"width"),pf.prototype),v_(pf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"height"),pf.prototype),pf);r(129);function m_(a){return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},m_(a)}function g_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ZO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ZO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ZO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function JO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function QO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?JO(Object(l),!0).forEach(function(u){tx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):JO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ex(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function zR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function HR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function b_(){return b_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=XR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},b_.apply(this,arguments)}function XR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Fh(a))!==null;);return a}function __(a,i){return __=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},__(a,i)}function YR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fh(a);if(i){var p=Fh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return qR(this,l)}}function qR(a,i){if(i&&(m_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lh(a)}function Lh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Fh(a){return Fh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fh(a)}function tx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function $h(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Qs,nx,rx,w_=(Fa=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&__(f,y)})(p,a);var i,l,u=YR(p);function p(){var f;zR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return tx(Lh(f=u.call.apply(u,[this].concat(_))),"modelType",Er.DIAMOND_NODE),ex(Lh(f),"rx",qO,Lh(f)),ex(Lh(f),"ry",KO,Lh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=b_(Fh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return QO(QO({},f),Oo(y))}},{key:"points",get:function(){var f=this.x,y=this.y,_=this.rx,x=this.ry;return[[f,y-x],[f+_,y],[f,y+x],[f-_,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=g_(_,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=g_(_,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,_){var x=g_(y,2);return{x:x[0],y:x[1],id:"".concat(f.id,"_").concat(_)}})}}])&&HR(i.prototype,l),p}(hf),qO=$h(Fa.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),KO=$h(Fa.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),$h(Fa.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"points"),Fa.prototype),$h(Fa.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"pointsPosition"),Fa.prototype),$h(Fa.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"width"),Fa.prototype),$h(Fa.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"height"),Fa.prototype),Fa);function E_(a){return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E_(a)}function ox(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ix(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ox(Object(l),!0).forEach(function(u){lx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ox(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ax(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function KR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function O_(){return O_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=JR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},O_.apply(this,arguments)}function JR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Uh(a))!==null;);return a}function x_(a,i){return x_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},x_(a,i)}function QR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uh(a);if(i){var p=Uh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return eD(this,l)}}function eD(a,i){if(i&&(E_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bh(a)}function Bh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uh(a){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uh(a)}function lx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Om(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ru,ux,S_=(Qs=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&x_(f,y)})(p,a);var i,l,u=QR(p);function p(){var f;KR(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return lx(Bh(f=u.call.apply(u,[this].concat(_))),"modelType",Er.ELLIPSE_NODE),ax(Bh(f),"rx",nx,Bh(f)),ax(Bh(f),"ry",rx,Bh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=O_(Uh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return ix(ix({},f),Oo(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.rx,x=this.ry;return[{x:f,y:y-x,id:"".concat(this.id,"_0")},{x:f+_,y,id:"".concat(this.id,"_1")},{x:f,y:y+x,id:"".concat(this.id,"_2")},{x:f-_,y,id:"".concat(this.id,"_3")}]}}])&&ZR(i.prototype,l),p}(hf),nx=Om(Qs.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),rx=Om(Qs.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Om(Qs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"width"),Qs.prototype),Om(Qs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"height"),Qs.prototype),Qs);function A_(a){return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A_(a)}function T_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return sx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return sx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function cx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function fx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?cx(Object(l),!0).forEach(function(u){dx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):cx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function tD(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function nD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function M_(){return M_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=oD(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},M_.apply(this,arguments)}function oD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Vh(a))!==null;);return a}function P_(a,i){return P_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},P_(a,i)}function iD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vh(a);if(i){var p=Vh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return aD(this,l)}}function aD(a,i){if(i&&(A_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xm(a)}function xm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vh(a){return Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vh(a)}function dx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sm(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var k_,px,N_=(Ru=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&P_(f,y)})(p,a);var i,l,u=iD(p);function p(){var f;nD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return dx(xm(f=u.call.apply(u,[this].concat(_))),"modelType",Er.POLYGON_NODE),tD(xm(f),"points",ux,xm(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=M_(Vh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return fx(fx({},f),Oo(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return this.points.map(function(N){return{x:N[0]+f-_/2,y:N[1]+y-x/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=T_(_,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(_){var x=T_(_,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,_=this.y,x=this.width,N=this.height;return this.points.map(function(L,X){var Z=T_(L,2),he=Z[0],xe=Z[1];return{x:y+he-x/2,y:_+xe-N/2,id:"".concat(f.id,"_").concat(X)}})}}])&&rD(i.prototype,l),p}(hf),ux=Sm(Ru.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Sm(Ru.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"pointsPosition"),Ru.prototype),Sm(Ru.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"width"),Ru.prototype),Sm(Ru.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"height"),Ru.prototype),Ru);function R_(a){return R_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},R_(a)}function hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function vx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?hx(Object(l),!0).forEach(function(u){yx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lD(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function D_(){return D_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=cD(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},D_.apply(this,arguments)}function cD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Gh(a))!==null;);return a}function C_(a,i){return C_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},C_(a,i)}function fD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gh(a);if(i){var p=Gh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dD(this,l)}}function dD(a,i){if(i&&(R_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Am(a)}function Am(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gh(a){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gh(a)}function yx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var xd,j_=(k_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&C_(f,y)})(p,a);var i,l,u=fD(p);function p(){var f;uD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return yx(Am(f=u.call.apply(u,[this].concat(_))),"modelType",Er.RECT_NODE),lD(Am(f),"radius",px,Am(f)),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+_/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-_/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=D_(Gh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return vx(vx({},f),Oo(y))}}])&&sD(i.prototype,l),p}(hf),px=function(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(k_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k_);function I_(a){return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},I_(a)}function mx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function gx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mx(Object(l),!0).forEach(function(u){_x(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function pD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function L_(){return L_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=vD(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},L_.apply(this,arguments)}function vD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Wh(a))!==null;);return a}function F_(a,i){return F_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F_(a,i)}function yD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wh(a);if(i){var p=Wh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return mD(this,l)}}function mD(a,i){if(i&&(I_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bx(a)}function bx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wh(a){return Wh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wh(a)}function _x(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function wx(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var $_=(xd=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F_(f,y)})(p,a);var i,l,u=yD(p);function p(){var f;pD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return _x(bx(f=u.call.apply(u,[this].concat(_))),"modelType",Er.TEXT_NODE),f}return i=p,(l=[{key:"getTextStyle",value:function(){var f=L_(Wh(p.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return gx(gx({},f),Oo(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&hD(i.prototype,l),p}(hf),wx(xd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(xd.prototype,"width"),xd.prototype),wx(xd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(xd.prototype,"height"),xd.prototype),xd);function B_(a){return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B_(a)}function gD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function U_(a,i){return U_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},U_(a,i)}function _D(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Tm(a);if(i){var p=Tm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wD(this,l)}}function wD(a,i){if(i&&(B_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ex(a)}function Ex(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tm(a){return Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tm(a)}function ED(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fs,Ox,xx,Sx,V_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&U_(f,y)})(p,a);var i,l,u=_D(p);function p(){var f;gD(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return ED(Ex(f=u.call.apply(u,[this].concat(_))),"modelType",Er.HTML_NODE),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,_=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+_/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-_/2,y,id:"".concat(this.id,"_3")}]}}])&&bD(i.prototype,l),p}(hf);function Ax(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function G_(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function OD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Tx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ny(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,_){return _(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Mx=(fs=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Tx(this,"graphModel",void 0),G_(this,"isShowHorizontal",Ox,this),G_(this,"isShowVertical",xx,this),G_(this,"position",Sx,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?Ax(Object(f),!0).forEach(function(y){Tx(u,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):Ax(Object(f)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,p){for(var f=u.x,y=u.y,_=!1,x=!1,N=0;N<p.length;N++){var L=p[N];if(L.id!==u.id&&(f===L.x&&(_=!0),y===L.y&&(x=!0),_&&x))break}return{isShowVertical:_,isShowHorizontal:x,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(u,p){var f,y,_=!1,x=u.id;if(x){var N=this.graphModel.fakerNode;if(N&&N.id===x)y=Wi(N);else{var L=this.graphModel.getNodeModelById(x);y=Wi(L)}}for(var X=0;X<p.length;X++){var Z=p[X];if(Z.id!==u.id){var he=Wi(Z);if(he.minY===y.minY||he.maxY===y.minY){_=!0,f=y.minY;break}if(he.minY===y.maxY||he.maxY===y.maxY){_=!0,f=y.maxY;break}}}return Ri({isShowHorizontal:_,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,p){var f,y,_=!1,x=u.id;if(x){var N=this.graphModel.fakerNode;if(N&&N.id===x)y=Wi(N);else{var L=this.graphModel.getNodeModelById(x);y=Wi(L)}}for(var X=0;X<p.length;X++){var Z=p[X];if(Z.id!==u.id){var he=Wi(Z);if(he.minX===y.minX||he.maxX===y.minX){_=!0,f=y.minX;break}if(he.minX===y.maxX||he.maxX===y.maxX){_=!0,f=y.maxX;break}}}return Ri({isShowVertical:_,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,p){var f=this.getCenterSnapLine(u,p),y=f.isShowHorizontal,_=f.isShowVertical;if(!y){var x=this.getHorizontalSnapline(u,p);x.isShowHorizontal&&(f.isShowHorizontal=x.isShowHorizontal,f.position.y=x.position.y)}if(!_){var N=this.getVerticalSnapline(u,p);N.isShowVertical&&(f.isShowVertical=N.isShowVertical,f.position.x=N.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var p=u.isShowHorizontal,f=u.isShowVertical,y=u.position;this.position=y,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var p=this.graphModel.nodes,f=this.getSnapLinePosition(u,p);this.setSnaplineInfo(f)}}],l&&OD(i.prototype,l),a}(),Ox=ny(fs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xx=ny(fs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sx=ny(fs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny(fs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"clearSnapline"),fs.prototype),ny(fs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"setNodeSnapLine"),fs.prototype),fs),ry=new Map,Px=function(a){var i=tl(),l=window.requestAnimationFrame(function u(){if(a(),ry.get(i)){var p=window.requestAnimationFrame(u);ry.set(i,p)}});return ry.set(i,l),i},Mm=function(a){var i=ry.get(a);i&&(window.cancelAnimationFrame(i),ry.delete(a))};function W_(a){return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W_(a)}function oy(){return oy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},oy.apply(this,arguments)}function kx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function iy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?kx(Object(l),!0).forEach(function(u){tc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):kx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Nx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Nx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function SD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function z_(a,i){return z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z_(a,i)}function AD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Pm(a);if(i){var p=Pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return TD(this,l)}}function TD(a,i){if(i&&(W_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(a)}function ec(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pm(a){return Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Pm(a)}function tc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var MD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&z_(f,y)})(p,a);var i,l,u=AD(p);function p(){var f;return function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),tc(ec(f=u.call(this)),"preTargetNode",void 0),tc(ec(f),"sourceRuleResults",void 0),tc(ec(f),"targetRuleResults",void 0),tc(ec(f),"dragHandler",void 0),tc(ec(f),"t",void 0),tc(ec(f),"onDragStart",function(y){var _=y.event,x=f.props,N=x.anchorData,L=x.nodeModel,X=x.graphModel;X.overlapMode,X.selectNodeById(L.id),L.autoToFront&&X.toFront(L.id),X.eventCenter.emit(Nn.ANCHOR_DRAGSTART,{data:N,e:_,nodeModel:L}),f.setState({startX:N.x,startY:N.y,endX:N.x,endY:N.y})}),tc(ec(f),"onDragging",function(y){var _=y.event,x=f.props,N=x.graphModel,L=x.nodeModel,X=x.anchorData,Z=N.transformModel,he=N.eventCenter,xe=N.width,Re=N.height,et=N.editConfigModel,tt=et.autoExpand,yt=et.stopMoveGraph,Bt=_.clientX,hn=_.clientY,dn=N.getPointByClient({x:Bt,y:hn}),Hn=dn.domOverlayPosition,sn=Hn.x,In=Hn.y,wn=dn.canvasOverlayPosition,Dr=wn.x,$r=wn.y;f.t&&Mm(f.t);var sr=[];sn<10?sr=[10,0]:sn+10>xe?sr=[-10,0]:In<10?sr=[0,10]:In+10>Re&&(sr=[0,-10]),f.setState({endX:Dr,endY:$r,dragging:!0}),f.moveAnchorEnd(Dr,$r),sr.length>0&&!yt&&tt&&(f.t=Px(function(){var Hr=xD(sr,2),hi=Hr[0],vi=Hr[1];Z.translate(hi,vi);var wa=f.state,ru=wa.endX,ou=wa.endY;f.setState({endX:ru-hi,endY:ou-vi}),f.moveAnchorEnd(ru-hi,ou-vi)})),he.emit(Nn.ANCHOR_DRAG,{data:X,e:_,nodeModel:L})}),tc(ec(f),"onDragEnd",function(y){var _=y.event;f.t&&Mm(f.t);var x=f.checkEnd(_);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var N=f.props,L=N.graphModel,X=N.nodeModel,Z=N.anchorData;L.eventCenter.emit(Nn.ANCHOR_DRAGEND,{data:Z,e:_,nodeModel:X,edgeModel:x})}),tc(ec(f),"checkEnd",function(y){var _=f.props,x=_.graphModel,N=_.nodeModel,L=_.anchorData,X=L.x,Z=L.y,he=L.id,xe=(x.edgeType,f.state),Re=xe.endX,et=xe.endY,tt=xe.dragging,yt=rs({x:Re,y:et},x);if(f.preTargetNode&&f.preTargetNode.state!==zr.DEFAULT&&f.preTargetNode.setElementState(zr.DEFAULT),tt&&yt&&yt.node){var Bt=yt.node,hn=yt.anchor.id,dn="".concat(N.id,"_").concat(Bt.id,"_").concat(hn,"_").concat(he),Hn=f.sourceRuleResults.get(dn)||{},sn=Hn.isAllPass,In=Hn.msg,wn=f.targetRuleResults.get(dn)||{},Dr=wn.isAllPass,$r=wn.msg;if(sn&&Dr){Bt.setElementState(zr.DEFAULT);var sr=x.edgeGenerator(N.getData(),x.getNodeModelById(yt.node.id).getData()),Hr=x.addEdge(iy(iy({},sr),{},{sourceNodeId:N.id,sourceAnchorId:he,startPoint:{x:X,y:Z},targetNodeId:yt.node.id,targetAnchorId:yt.anchor.id,endPoint:{x:yt.anchor.x,y:yt.anchor.y}})),hi=f.props.anchorData;return x.eventCenter.emit(Nn.ANCHOR_DROP,{data:hi,e:y,nodeModel:N,edgeModel:Hr}),Hr}var vi=Bt.getData();return x.eventCenter.emit(Nn.CONNECTION_NOT_ALLOWED,{data:vi,msg:$r||In||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return i=p,(l=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,_=f.style,x=f.node.getAnchorShape(y);if(x)return x;var N=y.x,L=y.y,X=iy(iy({},_),_.hover);return Object(Be.g)("g",null,Object(Be.g)(jh,oy({className:"lf-node-anchor-hover"},X,{x:N,y:L})),Object(Be.g)(jh,oy({className:"lf-node-anchor"},_,{x:N,y:L})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,_=y.getAnchorIncomingEdge,x=y.getAnchorOutcomingEdge,N=f.anchorData.id;return{incomingEdgeList:_(N),outcomingEdgeList:x(N)}}},{key:"moveAnchorEnd",value:function(f,y){var _=this.props,x=_.graphModel,N=_.nodeModel,L=_.anchorData,X=rs({x:f,y},x);if(X){var Z=X.node,he=X.anchor.id;if(this.preTargetNode&&this.preTargetNode!==X.node&&this.preTargetNode.setElementState(zr.DEFAULT),L.id===he)return;this.preTargetNode=Z;var xe="".concat(N.id,"_").concat(Z.id,"_").concat(he,"_").concat(L.id);if(!this.targetRuleResults.has(xe)){var Re=X.anchor,et=N.isAllowConnectedAsSource(Z,L,Re),tt=Z.isAllowConnectedAsTarget(N,L,Re);this.sourceRuleResults.set(xe,Kl(et)),this.targetRuleResults.set(xe,Kl(tt))}var yt=this.sourceRuleResults.get(xe).isAllPass,Bt=this.targetRuleResults.get(xe).isAllPass;yt&&Bt?Z.setElementState(zr.ALLOW_CONNECT):Z.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,_=f.startY,x=f.endX,N=f.endY;return la(y,_,x,N)>10}},{key:"render",value:function(){var f=this,y=this.state,_=y.startX,x=y.startY,N=y.endX,L=y.endY,X=this.props,Z=X.anchorData.edgeAddable,he=X.edgeStyle;return Object(Be.g)("g",{className:"lf-anchor"},Object(Be.g)("g",{onMouseDown:function(xe){Z!==!1&&f.dragHandler.handleMouseDown(xe)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(iy({sourcePoint:{x:_,y:x},targetPoint:{x:N,y:L}},he)):Object(Be.g)(Dh,oy({x1:_,y1:x,x2:N,y2:L},he,{"pointer-events":"none"}))))}}])&&SD(i.prototype,l),p}(Be.a);function Rx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function PD(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Rx(Object(l),!0).forEach(function(u){kD(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Rx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function kD(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function ND(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Dx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Dx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Cx(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.value,y=a.fontSize,_=a.fill,x=_===void 0?"currentColor":_,N=a.overflowMode,L=N===void 0?"default":N,X=a.textWidth,Z=X===void 0?"":X,he=a.model,xe={textAnchor:"middle","dominant-baseline":"middle",x:l,y:p,fill:x};if(Object.entries(a).forEach(function(hn){var dn=ND(hn,2),Hn=dn[0],sn=dn[1];H_(sn)!=="object"&&(xe[Hn]=sn)}),f){var Re=String(f).split(/[\r\n]/g),et=Re.length;if(L!=="default"){var tt=he.BaseType,yt=he.modelType;if(tt===uo.NODE&&yt!==Er.TEXT_NODE||tt===uo.EDGE&&Z)return function(hn){var dn=hn.value,Hn=hn.fontSize,sn=hn.model,In=hn.fontFamily,wn=In===void 0?"":In,Dr=hn.lineHeight,$r=hn.wrapPadding,sr=$r===void 0?"0, 0":$r,Hr=hn.overflowMode,hi=hn.x,vi=hn.y,wa=sn.width,ru=sn.textHeight,ou=hn.textWidth||wa,oc=String(dn).split(/[\r\n]/g),Cp=oc.length,eg=Hs({rows:oc,style:{fontSize:"".concat(Hn,"px"),width:"".concat(ou,"px"),fontFamily:wn,lineHeight:Dr,padding:sr},rowsLength:Cp,className:"lf-get-text-height"}),jp=sn.height>eg?sn.height:eg;ru&&(jp=ru);var Td=Hr==="ellipsis";return Td&&(jp=Hn+2),Object(Be.g)("g",null,Object(Be.g)("foreignObject",{width:ou,height:jp,x:hi-ou/2,y:vi-jp/2},Object(Be.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:jp,width:ou,padding:sr}},Object(Be.g)("div",{className:Td?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Td?oc.join(""):"",style:PD({},hn)},oc.map(function(Md){return Object(Be.g)("div",{className:"lf-node-text--auto-wrap-inner"},Md)})))))}(a)}if(et>1){var Bt=Re.map(function(hn,dn){var Hn=(dn-(et-1)/2)*(y+2);return Object(Be.g)("tspan",{className:"lf-text-tspan",x:l,y:p+Hn},hn)});return Object(Be.g)("text",xe,Bt)}return Object(Be.g)("text",xe,f)}}function X_(a){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},X_(a)}function Y_(){return Y_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Y_.apply(this,arguments)}function RD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return jx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function DD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function q_(a,i){return q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},q_(a,i)}function CD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=km(a);if(i){var p=km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return jD(this,l)}}function jD(a,i){if(i&&(X_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sd(a)}function Sd(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function km(a){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},km(a)}function kp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ix=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&q_(f,y)})(p,a);var i,l,u=CD(p);function p(f){var y;(function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")})(this,p),kp(Sd(y=u.call(this)),"dragHandler",void 0),kp(Sd(y),"sumDeltaX",0),kp(Sd(y),"sumDeltaY",0),kp(Sd(y),"stepDrag",void 0),kp(Sd(y),"onDragging",function(x){var N=x.deltaX,L=x.deltaY,X=y.props,Z=X.model,he=RD(X.graphModel.transformModel.fixDeltaXY(N,L),2),xe=he[0],Re=he[1];Z.moveText(xe,Re)}),kp(Sd(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(zr.TEXT_EDIT)}),kp(Sd(y),"mouseDownHandle",function(x){var N=y.props,L=N.draggable,X=N.model,Z=N.graphModel.editConfigModel.nodeTextDraggable;(L||Z)&&(y.stepDrag.model=X,y.stepDrag.handleMouseDown(x))}),f.model;var _=f.draggable;return y.stepDrag=new ee({onDragging:y.onDragging,step:1,isStopPropagation:_}),y}return i=p,(l=[{key:"getShape",value:function(){var f=this.props,y=f.model,_=f.graphModel,x=y.text,N=_.editConfigModel,L=x.value,X=x.x,Z=x.y,he=x.editable,xe=x.draggable,Re={x:X,y:Z,className:"",value:L};he?Re.className="lf-element-text":xe||N.nodeTextDraggable?Re.className="lf-text-draggable":Re.className="lf-text-disabled";var et=y.getTextStyle();return Object(Be.g)(Cx,Y_({},Re,et,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Be.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&DD(i.prototype,l),p}(Be.a),ID=Xu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,Lx=r(130);function K_(a){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K_(a)}function Z_(){return Z_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Z_.apply(this,arguments)}function LD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function J_(a,i){return J_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},J_(a,i)}function FD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Nm(a);if(i){var p=Nm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return $D(this,l)}}function $D(a,i){if(i&&(K_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zh(a)}function zh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Nm(a){return Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nm(a)}function ay(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var BD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&J_(f,y)})(p,a);var i,l,u=FD(p);function p(f){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),ay(zh(y=u.call(this,f)),"style",{}),ay(zh(y),"defaultAngle",void 0),ay(zh(y),"normal",void 0),ay(zh(y),"stepperDrag",void 0),ay(zh(y),"onDragging",function(_){var x,N=_.event,L=y.props,X=L.graphModel,Z=L.nodeModel,he=L.eventCenter,xe=X.selectNodes,Re=Z.x,et=Z.y,tt=N.clientX,yt=N.clientY,Bt=X.getPointByClient({x:tt,y:yt}).canvasOverlayPosition,hn=Bt.x,dn=Bt.y,Hn=new J(hn-Re,dn-et),sn=((x=y.normal)===null||x===void 0?void 0:x.angle(Hn))-y.defaultAngle,In=new Zs(-Re,-et).rotate(sn).translate(Re,et).toString();Z.transform=In,Z.rotate=sn;var wn=Object(Lx.map)(xe,function($r){return $r.id});wn.indexOf(Z.id)===-1&&(wn=[Z.id]);var Dr=Object(Lx.reduce)(wn,function($r,sr){var Hr=X.getNodeModelById(sr);return $r[sr]=Hr==null?void 0:Hr.getMoveDistance(0,0,!1),$r},{});wn.forEach(function($r){X.getNodeEdges($r).forEach(function(sr){if(Dr[sr.sourceNodeId]){var Hr=X.getNodeModelById(sr.sourceNodeId).anchors.find(function(vi){return vi.id===sr.sourceAnchorId});sr.updateStartPoint(Hr)}if(Dr[sr.targetNodeId]){var hi=X.getNodeModelById(sr.targetNodeId).anchors.find(function(vi){return vi.id===sr.targetAnchorId});sr.updateEndPoint(hi)}})}),he.emit(Nn.NODE_ROTATE,{e:N,nodeModel:Z})}),y.style=f.style,y.stepperDrag=new ee({onDragging:y.onDragging}),y}return i=p,(l=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,_=y.x,x=y.y,N=_+y.width/2+20,L=x-y.height/2-20;return this.normal=new J(1,0),this.defaultAngle=this.normal.angle(new J(N-_,L-x)),y.defaultAngle=this.defaultAngle,Object(Be.g)("g",{className:"lf-rotate-control"},Object(Be.g)("g",{onMouseDown:function(X){f.stepperDrag.handleMouseDown(X)}},Object(Be.g)(jh,Z_({},this.style,{cx:N,cy:L}))))}}])&&LD(i.prototype,l),p}(Be.a);function Q_(a){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q_(a)}var UD=["className"];function Rm(){return Rm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rm.apply(this,arguments)}function VD(a,i){if(a==null)return{};var l,u,p=function(y,_){if(y==null)return{};var x,N,L={},X=Object.keys(y);for(N=0;N<X.length;N++)x=X[N],_.indexOf(x)>=0||(L[x]=y[x]);return L}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function Dm(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Fx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Fx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function $x(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function e0(a,i){return e0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e0(a,i)}function GD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cm(a);if(i){var p=Cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return WD(this,l)}}function WD(a,i){if(i&&(Q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qi(a)}function Qi(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Cm(a){return Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Cm(a)}function ca(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var vf=function(a){(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),_&&e0(y,_)})(f,a);var i,l,u,p=GD(f);function f(y){var _;(function(Z,he){if(!(Z instanceof he))throw new TypeError("Cannot call a class as a function")})(this,f),ca(Qi(_=p.call(this)),"t",void 0),ca(Qi(_),"moveOffset",void 0),ca(Qi(_),"stepDrag",void 0),ca(Qi(_),"contextMenuTime",void 0),ca(Qi(_),"mouseUpDrag",void 0),ca(Qi(_),"startTime",void 0),ca(Qi(_),"clickTimer",void 0),ca(Qi(_),"modelDisposer",void 0),ca(Qi(_),"onDragStart",function(Z){var he=Z.event,xe=he.clientX,Re=he.clientY,et=_.props,tt=et.model,yt=et.graphModel.getPointByClient({x:xe,y:Re}).canvasOverlayPosition,Bt=yt.x,hn=yt.y;_.moveOffset={x:tt.x-Bt,y:tt.y-hn}}),ca(Qi(_),"onDragging",function(Z){var he=Z.event,xe=_.props,Re=xe.model,et=xe.graphModel,tt=et.editConfigModel,yt=tt.stopMoveGraph,Bt=tt.autoExpand,hn=et.transformModel,dn=et.selectNodes,Hn=et.width,sn=et.height,In=et.gridSize;Re.isDragging=!0;var wn=he.clientX,Dr=he.clientY,$r=et.getPointByClient({x:wn,y:Dr}).canvasOverlayPosition,sr=$r.x,Hr=$r.y,hi=Dm(hn.CanvasPointToHtmlPoint([sr,Hr]),2),vi=hi[0],wa=hi[1];if(sr+=_.moveOffset.x,Hr+=_.moveOffset.y,sr=El(sr,In),Hr=El(Hr,In),Hn&&sn){if(!Bt||yt||!(vi<0||wa<0||vi>Hn||wa>sn)){var ru=Dm(hn.CanvasPointToHtmlPoint([sr-Re.width/2,Hr-Re.height/2]),2),ou=ru[0],oc=ru[1],Cp=Dm(hn.CanvasPointToHtmlPoint([sr+Re.width/2,Hr+Re.height/2]),2),eg=Cp[0],jp=Cp[1],Td=Math.max(In,20),Md=[];ou<0?Md=[Td,0]:eg>et.width?Md=[-Td,0]:oc<0?Md=[0,Td]:jp>et.height&&(Md=[0,-Td]),_.t&&Mm(_.t);var Tj=new Zs(-sr,-Hr).rotate(Re.rotate).translate(sr,Hr).toString();Re.transform=Tj;var tg=dn.map(function(ng){return ng.id});tg.indexOf(Re.id)===-1&&(tg=[Re.id]),Md.length>0&&!yt&&Bt?_.t=Px(function(){var ng=Dm(Md,2),bS=ng[0],_S=ng[1];hn.translate(bS,_S);var Mj=-bS/hn.SCALE_X,Pj=-_S/hn.SCALE_X;et.moveNodes(tg,Mj,Pj)}):et.moveNodes(tg,sr-Re.x,Hr-Re.y)}}else et.moveNode2Coordinate(Re.id,sr,Hr)}),ca(Qi(_),"onDragEnd",function(){_.t&&Mm(_.t),_.props.model.isDragging=!1}),ca(Qi(_),"handleMouseUp",function(){var Z=_.props.model;_.mouseUpDrag=Z.isDragging}),ca(Qi(_),"handleClick",function(Z){var he=_.mouseUpDrag===!1;if(_.startTime){var xe=_.props,Re=xe.model,et=xe.graphModel;if(he){var tt={data:Re.getData(),e:Z,position:et.getPointByClient({x:Z.clientX,y:Z.clientY}),isSelected:!1,isMultiple:!1},yt=Z.button===2,Bt=Z.detail===2;if(!yt){var hn=et.editConfigModel,dn=dd(Z,hn);tt.isMultiple=dn,Re.isSelected&&!Bt&&dn?(tt.isSelected=!1,Re.setSelected(!1)):(et.selectNodeById(Re.id,dn),tt.isSelected=!0,_.toFront()),Bt?(hn.nodeTextEdit&&Re.text.editable&&(Re.setSelected(!1),et.setElementStateById(Re.id,zr.TEXT_EDIT)),et.eventCenter.emit(Nn.NODE_DBCLICK,tt)):(et.eventCenter.emit(Nn.ELEMENT_CLICK,tt),et.eventCenter.emit(Nn.NODE_CLICK,tt))}}}}),ca(Qi(_),"handleContextMenu",function(Z){Z.preventDefault();var he=_.props,xe=he.model,Re=he.graphModel,et=xe.getData(),tt=Re.getPointByClient({x:Z.clientX,y:Z.clientY});Re.setElementStateById(xe.id,zr.SHOW_MENU,tt.domOverlayPosition),xe.isSelected||Re.selectNodeById(xe.id),Re.eventCenter.emit(Nn.NODE_CONTEXTMENU,{data:et,e:Z,position:tt}),_.toFront()}),ca(Qi(_),"handleMouseDown",function(Z){var he=_.props,xe=he.model,Re=he.graphModel;_.startTime=new Date().getTime(),Re.editConfigModel.adjustNodePosition&&xe.draggable&&_.stepDrag&&_.stepDrag.handleMouseDown(Z)}),ca(Qi(_),"setHoverON",function(Z){var he=_.props,xe=he.model,Re=he.graphModel;if(!xe.isHovered){var et=xe.getData();xe.setHovered(!0),Re.eventCenter.emit(Nn.NODE_MOUSEENTER,{data:et,e:Z})}}),ca(Qi(_),"setHoverOFF",function(Z){var he=_.props,xe=he.model,Re=he.graphModel,et=xe.getData();xe.isHovered&&(xe.setHovered(!1),Re.eventCenter.emit(Nn.NODE_MOUSELEAVE,{data:et,e:Z}))}),ca(Qi(_),"onMouseOut",function(Z){ID&&_.setHoverOFF(Z)});var x=y.graphModel,N=x.gridSize,L=x.eventCenter,X=y.model;return _.stepDrag=new ee({onDragStart:_.onDragStart,onDragging:_.onDragging,onDragEnd:_.onDragEnd,step:N,eventType:"NODE",isStopPropagation:!1,eventCenter:L,model:X}),_.modelDisposer=Object(c.F)(function(){return _.props},function(Z){Z&&Z.model&&_.stepDrag.setModel(Z.model)}),_}return i=f,u=[{key:"getModel",value:function(y){return y}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,_=this.props,x=_.model,N=_.graphModel,L=x.isSelected,X=x.isHitable,Z=x.isDragging,he=x.isShowAnchor;return X&&(L||he)&&!Z?Xf(x.anchors,function(xe,Re){var et=x.getAnchorLineStyle(xe),tt=x.getAnchorStyle(xe);return Object(Be.g)(MD,{anchorData:xe,node:y,style:tt,edgeStyle:et,anchorIndex:Re,nodeModel:x,graphModel:N,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,_=y.model,x=y.graphModel,N=_.isSelected,L=_.isHitable,X=_.enableRotate,Z=_.isHovered,he=_.getRotateControlStyle().style;if(L&&(N||Z)&&X)return Object(Be.g)(BD,{graphModel:x,nodeModel:_,eventCenter:x.eventCenter,style:he})}},{key:"getText",value:function(){var y=this.props,_=y.model,x=y.graphModel;if(_.state===zr.TEXT_EDIT)return"";if(_.text){var N=x.editConfigModel,L=!1;return(_.text.draggable||N.nodeTextDraggable)&&(L=!0),Object(Be.g)(Ix,{editable:N.nodeTextEdit&&_.text.editable,model:_,graphModel:x,draggable:L})}}},{key:"getStateClassName",value:function(){var y=this.props.model,_=y.state,x=y.isDragging,N=y.isSelected,L="lf-node";switch(_){case zr.ALLOW_CONNECT:L+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:L+=" lf-node-not-allow";break;default:L+=" lf-node-default"}return x&&(L+=" lf-isDragging"),N&&(L+=" lf-node-selected"),L}},{key:"toFront",value:function(){var y=this.props,_=y.model,x=y.graphModel;_.autoToFront&&x.toFront(_.id)}},{key:"render",value:function(){var y,_=this.props,x=_.model,N=_.graphModel,L=N.editConfigModel,X=L.hideAnchors,Z=L.adjustNodePosition,he=L.allowRotation,xe=N.gridSize,Re=N.transformModel.SCALE_X,et=x.isHitable,tt=x.draggable,yt=x.transform,Bt=x.getOuterGAttributes(),hn=Bt.className,dn=hn===void 0?"":hn,Hn=VD(Bt,UD),sn=Object(Be.g)("g",{className:"lf-node-content"},Object(Be.g)("g",{transform:yt},this.getShape(),this.getText(),he&&this.getRotateControl()),!X&&this.getAnchors());return et?(Z&&tt&&this.stepDrag.setStep(xe*Re),y=Object(Be.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Hn),sn)):y=Object(Be.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn)},Hn),sn),y}}])&&$x(i.prototype,l),u&&$x(i,u),f}(Be.a);function t0(a){return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t0(a)}function n0(){return n0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},n0.apply(this,arguments)}function zD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function HD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r0(a,i){return r0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r0(a,i)}function XD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jm(a);if(i){var p=jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return YD(this,l)}}function YD(a,i){if(i&&(t0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function jm(a){return jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jm(a)}var o0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r0(f,y)})(p,a);var i,l,u=XD(p);function p(){return zD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Be.g)(Ed,n0({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&HD(i.prototype,l),p}(vf);function i0(a){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i0(a)}function a0(){return a0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},a0.apply(this,arguments)}function qD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function KD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function l0(a,i){return l0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l0(a,i)}function ZD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Im(a);if(i){var p=Im(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return JD(this,l)}}function JD(a,i){if(i&&(i0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Im(a){return Im=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Im(a)}var u0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&l0(f,y)})(p,a);var i,l,u=ZD(p);function p(){return qD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.r,N=f.getNodeStyle();return Object(Be.g)(jh,a0({},N,{x:y,y:_,r:x}))}}])&&KD(i.prototype,l),p}(vf);function s0(a){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},s0(a)}function QD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Bx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Bx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ux(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(p){var f=QD(p,2),y=f[0],_=f[1];s0(_)!=="object"&&(u[y]=_)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(p){return p.join(",")}).join(" "),Object(Be.g)("polygon",u)}function c0(a){return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c0(a)}function f0(){return f0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},f0.apply(this,arguments)}function eC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function tC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function d0(a,i){return d0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d0(a,i)}function nC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Lm(a);if(i){var p=Lm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return rC(this,l)}}function rC(a,i){if(i&&(c0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Lm(a){return Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lm(a)}var p0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&d0(f,y)})(p,a);var i,l,u=nC(p);function p(){return eC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.width,N=f.height,L=f.points,X=f.getNodeStyle(),Z={transform:"matrix(1 0 0 1 ".concat(y-x/2," ").concat(_-N/2,")")};return Object(Be.g)("g",Z,Object(Be.g)(Ux,f0({},X,{points:L,x:y,y:_})))}}])&&tC(i.prototype,l),p}(vf);function h0(a){return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h0(a)}function v0(){return v0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},v0.apply(this,arguments)}function oC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function iC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function y0(a,i){return y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},y0(a,i)}function aC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fm(a);if(i){var p=Fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return lC(this,l)}}function lC(a,i){if(i&&(h0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fm(a){return Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fm(a)}var m0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&y0(f,y)})(p,a);var i,l,u=aC(p);function p(){return oC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Be.g)("g",null,Object(Be.g)(Ux,v0({},y,{points:f.points,x:f.x,y:f.y})))}}])&&iC(i.prototype,l),p}(vf);function g0(a){return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g0(a)}function uC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Vx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Vx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sC(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.rx,y=f===void 0?4:f,_=a.ry,x=_===void 0?4:_,N=a.className,L={cx:l,cy:p,rx:y,ry:x,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(X){var Z=uC(X,2),he=Z[0],xe=Z[1];g0(xe)!=="object"&&(L[he]=xe)}),L.className=N?"lf-basic-shape ".concat(N):"lf-basic-shape",Object(Be.g)("ellipse",L)}function b0(a){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},b0(a)}function _0(){return _0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},_0.apply(this,arguments)}function cC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function fC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function w0(a,i){return w0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},w0(a,i)}function dC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$m(a);if(i){var p=$m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return pC(this,l)}}function pC(a,i){if(i&&(b0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function $m(a){return $m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$m(a)}var E0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&w0(f,y)})(p,a);var i,l,u=dC(p);function p(){return cC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Be.g)(sC,_0({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&fC(i.prototype,l),p}(vf);function O0(a){return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},O0(a)}function Gx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Wx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Gx(Object(l),!0).forEach(function(u){hC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Gx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function hC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function vC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function yC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function x0(a,i){return x0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},x0(a,i)}function mC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bm(a);if(i){var p=Bm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return gC(this,l)}}function gC(a,i){if(i&&(O0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Bm(a){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bm(a)}var S0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&x0(f,y)})(p,a);var i,l,u=mC(p);function p(){return vC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),_=f.width,x=f.height,N=f.x,L=f.y,X=Wx(Wx({},y.background),{},{x:N,y:L-1,width:_,height:x});return Object(Be.g)(Ed,X)}},{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getBackground())}}])&&yC(i.prototype,l),p}(vf);function A0(a){return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A0(a)}function T0(){return T0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},T0.apply(this,arguments)}function bC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _C(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function M0(a,i){return M0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},M0(a,i)}function wC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Um(a);if(i){var p=Um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return EC(this,l)}}function EC(a,i){if(i&&(A0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ly(a)}function ly(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function Vm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var P0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&M0(f,y)})(p,a);var i,l,u=wC(p);function p(){var f;bC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return Vm(ly(f=u.call.apply(u,[this].concat(_))),"ref",void 0),Vm(ly(f),"currentProperties",void 0),Vm(ly(f),"preProperties",void 0),Vm(ly(f),"setRef",function(N){f.ref=N}),f}return i=p,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,_=f.y,x=f.height,N=f.width,L=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Be.g)("foreignObject",T0({},L,{x:y-N/2,y:_-x/2,width:N,height:x,ref:this.setRef}))}}])&&_C(i.prototype,l),p}(vf);function k0(a){return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},k0(a)}function N0(){return N0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},N0.apply(this,arguments)}function zx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Np(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?zx(Object(l),!0).forEach(function(u){C0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):zx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function OC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function R0(a,i){return R0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R0(a,i)}function xC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gm(a);if(i){var p=Gm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SC(this,l)}}function SC(a,i){if(i&&(k0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0(a)}function D0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gm(a){return Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gm(a)}function C0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var AC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&R0(f,y)})(p,a);var i,l,u=xC(p);function p(f){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),C0(D0(y=u.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),C0(D0(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),_=f.text,x=f.width,N=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(N=Np(Np({},N),y.hover.background)),_&&_.value&&N.fill!=="transparent"){var L,X=y.fontSize,Z=y.overflowMode,he=y.lineHeight,xe=y.wrapPadding,Re=y.textWidth,et=_.value,tt=_.x,yt=_.y,Bt=String(et).split(/[\r\n]/g),hn=Bt.length;if(Z==="autoWrap"&&Re){var dn=Hs({rows:Bt,style:{fontSize:"".concat(X,"px"),width:"".concat(Re,"px"),lineHeight:he,padding:xe},rowsLength:hn,className:"lf-get-text-height"});L=Np(Np({},N),{},{x:tt-1,y:yt-1,width:Re,height:dn})}else{Bt&&Bt.forEach(function(Dr){Zn(Dr)});var Hn=is({rows:Bt,fontSize:X,rowsLength:hn}),sn=Hn.width,In=Hn.height;if(Z==="ellipsis"&&(sn=Re||x,In=X+2),typeof N.wrapPadding=="string"){var wn=N.wrapPadding.split(",").filter(function(Dr){return Dr.trim()}).map(function(Dr){return parseFloat(Dr.trim())});wn.length>0&&wn.length<=4&&(wn.length===1?wn=[wn[0],wn[0],wn[0],wn[0]]:wn.length===2?wn=[wn[0],wn[1],wn[0],wn[1]]:wn.length===3&&(wn=[wn[0],wn[1],wn[2],wn[1]]),sn+=wn[1]+wn[3],In+=wn[0]+wn[2],tt+=(wn[1]-wn[3])/2,yt+=(wn[2]-wn[0])/2)}L=Np(Np({},N),{},{x:tt-1,y:yt-1,width:sn,height:In})}return Object(Be.g)(Ed,L)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,_=y.value,x=y.x,N=y.y;if(_){var L=Np({x,y:N,className:"lf-element-text",value:_},f.getTextStyle());return Object(Be.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Be.g)(Cx,N0({},L,{model:f})))}}}])&&OC(i.prototype,l),p}(Ix);function j0(a){return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},j0(a)}var nc,TC=["text","sourceAnchorId","targetAnchorId"];function Hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function yf(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Hx(Object(l),!0).forEach(function(u){nu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function MC(a,i){if(a==null)return{};var l,u,p=function(y,_){if(y==null)return{};var x,N,L={},X=Object.keys(y);for(N=0;N<X.length;N++)x=X[N],_.indexOf(x)>=0||(L[x]=y[x]);return L}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function PC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Xx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Xx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function kC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function I0(a,i){return I0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},I0(a,i)}function NC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wm(a);if(i){var p=Wm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return RC(this,l)}}function RC(a,i){if(i&&(j0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tu(a)}function tu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wm(a){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wm(a)}function nu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(nc||(nc={}));var Yx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&I0(f,y)})(p,a);var i,l,u=NC(p);function p(f){var y;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),nu(tu(y=u.call(this)),"stepDragData",void 0),nu(tu(y),"stepDrag",void 0),nu(tu(y),"oldEdge",void 0),nu(tu(y),"preTargetNode",void 0),nu(tu(y),"targetRuleResults",void 0),nu(tu(y),"sourceRuleResults",void 0),nu(tu(y),"handleMouseDown",function(L){y.stepDrag&&y.stepDrag.handleMouseDown(L)}),nu(tu(y),"onDragStart",function(){var L=y.props,X=L.x,Z=L.y,he=L.edgeModel,xe=he.startPoint,Re=he.endPoint,et=he.pointsList;y.oldEdge={startPoint:xe,endPoint:Re,pointsList:et},y.setState({endX:X,endY:Z,dragging:!0})}),nu(tu(y),"onDragging",function(L){var X=L.deltaX,Z=L.deltaY,he=y.state,xe=he.endX,Re=he.endY,et=y.props,tt=et.graphModel,yt=et.type,Bt=tt.transformModel,hn=tt.editConfigModel,dn=PC(Bt.moveCanvasPointByHtml([xe,Re],X,Z),2),Hn=dn[0],sn=dn[1];y.setState({endX:Hn,endY:sn,dragging:!0});var In=y.props.edgeModel,wn=rs({x:xe,y:Re},tt);if(wn&&wn.node&&y.isAllowAdjust(wn).pass){var Dr,$r=In.startPoint,sr=In.endPoint,Hr=In.sourceNode,hi=In.targetNode;yt===nc.SOURCE?Dr={startPoint:{x:wn.anchor.x,y:wn.anchor.y},endPoint:{x:sr.x,y:sr.y},sourceNode:wn.node,targetNode:hi}:yt===nc.TARGET&&(Dr={startPoint:{x:$r.x,y:$r.y},endPoint:{x:wn.anchor.x,y:wn.anchor.y},sourceNode:Hr,targetNode:wn.node}),In.updateAfterAdjustStartAndEnd(Dr)}else yt===nc.SOURCE?In.updateStartPoint({x:Hn,y:sn}):yt===nc.TARGET&&In.updateEndPoint({x:Hn,y:sn});In.text.value&&hn.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),nu(tu(y),"onDragEnd",function(L){var X=L.event;try{var Z;y.setState({dragging:!1});var he=y.props,xe=he.graphModel,Re=he.edgeModel,et=he.type,tt=y.state,yt=tt.endX,Bt=tt.endY,hn=tt.dragging,dn=rs({x:yt,y:Bt},xe);if(!hn)return;var Hn,sn=!1;if(dn&&dn.node){var In=y.isAllowAdjust(dn),wn=In.pass,Dr=In.msg,$r=In.newTargetNode;if(wn){var sr=Re.getData(),Hr=sr.text,hi=sr.sourceAnchorId,vi=hi===void 0?"":hi,wa=sr.targetAnchorId;Hn=yf(yf({sourceAnchorId:vi,targetAnchorId:wa===void 0?"":wa},MC(sr,TC)),{},{text:(Hr==null?void 0:Hr.value)||""}),et===nc.SOURCE?(Hn=yf(yf({},xe.edgeGenerator(xe.getNodeModelById(dn.node.id).getData(),xe.getNodeModelById(Re.targetNodeId).getData(),Hn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:Re.targetNodeId,endPoint:yf({},Re.endPoint)}),Re.sourceNodeId===dn.node.id&&Re.sourceAnchorId===dn.anchor.id&&(sn=!0)):et===nc.TARGET&&(Hn=yf(yf({},xe.edgeGenerator(xe.getNodeModelById(Re.sourceNodeId).getData(),xe.getNodeModelById(dn.node.id).getData(),Hn)),{},{sourceNodeId:Re.sourceNodeId,startPoint:yf({},Re.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),Re.targetNodeId===dn.node.id&&Re.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var ru=$r.getData();xe.eventCenter.emit(Nn.CONNECTION_NOT_ALLOWED,{data:ru,msg:Dr})}}else sn=!0;if(sn)y.recoveryEdge();else{var ou=Re.getData();xe.deleteEdgeById(Re.id);var oc=xe.addEdge(yf({},Hn));xe.eventCenter.emit(Nn.EDGE_EXCHANGE_NODE,{data:{newEdge:oc.getData(),oldEdge:ou}})}(Z=y.preTargetNode)===null||Z===void 0||Z.setElementState(zr.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(Nn.ADJUST_POINT_DRAGEND,{e:X,data:y.stepDragData})}}),nu(tu(y),"recoveryEdge",function(){var L=y.props.edgeModel,X=y.oldEdge,Z=X.startPoint,he=X.endPoint,xe=X.pointsList;L.updateStartPoint(Z),L.updateEndPoint(he),L.modelType!==Er.LINE_EDGE&&(L.pointsList=xe,L.initPoints())}),nu(tu(y),"getAdjustPointStyle",function(){var L=y.props,X=L.graphModel.theme;return L.edgeModel,X.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var _=f.type,x=f.edgeModel,N=f.graphModel.eventCenter;return y.stepDragData={type:_,edgeData:x.getData()},y.stepDrag=new ee({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:N,data:y.stepDragData}),y}return i=p,(l=[{key:"isAllowAdjust",value:function(f){var y=this.props,_=y.edgeModel,x=_.id,N=_.sourceNode,L=_.targetNode,X=_.sourceAnchorId,Z=_.targetAnchorId,he=y.type,xe=null,Re=null,et=null,tt=null;if(he===nc.SOURCE?(xe=f.node,Re=L,et=f.anchor,tt=L.getAnchorInfo(Z)):(xe=N,Re=f.node,tt=f.anchor,et=N.getAnchorInfo(X)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=f.node,tt.id===et.id)return{pass:!1,msg:"",newTargetNode:Re};var yt="".concat(xe.id,"_").concat(Re.id,"_").concat(et.id,"_").concat(tt.id);if(!this.targetRuleResults.has(yt)){var Bt=xe.isAllowConnectedAsSource(Re,et,tt,x),hn=Re.isAllowConnectedAsTarget(xe,et,tt,x);this.sourceRuleResults.set(yt,Kl(Bt)),this.targetRuleResults.set(yt,Kl(hn))}var dn=this.sourceRuleResults.get(yt),Hn=dn.isAllPass,sn=dn.msg,In=this.targetRuleResults.get(yt),wn=In.isAllPass,Dr=In.msg,$r=Hn&&wn?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return he===nc.SOURCE?xe.setElementState($r):Re.setElementState($r),{pass:Hn&&wn,msg:Dr||sn,newTargetNode:Re}}},{key:"render",value:function(){var f=this.props,y=f.x,_=f.y,x=f.getAdjustPointShape,N=f.edgeModel,L=this.state.dragging;return Object(Be.g)("g",{pointerEvents:L?"none":"",onMouseDown:this.handleMouseDown},L?"":x(y,_,N))}}])&&kC(i.prototype,l),p}(Be.a);function L0(a){return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},L0(a)}function uy(){return uy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},uy.apply(this,arguments)}function DC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function CC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function F0(a,i){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(a,i)}function IC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zm(a);if(i){var p=zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return LC(this,l)}}function LC(a,i){if(i&&(L0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(a)}function ds(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zm(a){return zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zm(a)}function rc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var sy=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F0(f,y)})(p,a);var i,l,u=IC(p);function p(){var f;CC(this,p);for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return rc(ds(f=u.call.apply(u,[this].concat(_))),"startTime",void 0),rc(ds(f),"contextMenuTime",void 0),rc(ds(f),"clickTimer",void 0),rc(ds(f),"textRef",Object(Be.f)()),rc(ds(f),"handleHover",function(N,L){var X=f.props,Z=X.model,he=X.graphModel.eventCenter;Z.setHovered(N);var xe=N?Nn.EDGE_MOUSEENTER:Nn.EDGE_MOUSELEAVE,Re=Z.getData();he.emit(xe,{data:Re,e:L})}),rc(ds(f),"setHoverON",function(N){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,N))}),rc(ds(f),"setHoverOFF",function(N){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,N))}),rc(ds(f),"handleContextMenu",function(N){N.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var L=f.props,X=L.model,Z=L.graphModel,he=Z.getPointByClient({x:N.clientX,y:N.clientY});Z.setElementStateById(X.id,zr.SHOW_MENU,he.domOverlayPosition),f.toFront(),X.isSelected||Z.selectEdgeById(X.id);var xe=X==null?void 0:X.getData();Z.eventCenter.emit(Nn.EDGE_CONTEXTMENU,{data:xe,e:N,position:he})}),rc(ds(f),"handleMouseDown",function(N){N.stopPropagation(),f.startTime=new Date().getTime()}),rc(ds(f),"handleMouseUp",function(N){if(f.startTime&&!(new Date().getTime()-f.startTime>200||N.button===2)){var L=N.detail===2,X=f.props,Z=X.model,he=X.graphModel,xe=Z==null?void 0:Z.getData(),Re=he.getPointByClient({x:N.clientX,y:N.clientY});if(L){var et=he.editConfigModel,tt=he.textEditElement;if(tt&&tt.id===Z.id&&he.setElementStateById(Z.id,zr.DEFAULT),et.edgeTextEdit&&Z.text.editable&&he.setElementStateById(Z.id,zr.TEXT_EDIT),Z.modelType===Er.POLYLINE_EDGE){var yt=Z,Bt=he.getPointByClient({x:N.x,y:N.y}).canvasOverlayPosition,hn=Bt.x,dn=Bt.y,Hn=Ql({x:hn,y:dn},yt.points);yt.dbClickPosition=Hn}he.eventCenter.emit(Nn.EDGE_DBCLICK,{data:xe,e:N,position:Re})}else he.eventCenter.emit(Nn.ELEMENT_CLICK,{data:xe,e:N,position:Re}),he.eventCenter.emit(Nn.EDGE_CLICK,{data:xe,e:N,position:Re});var sn=he.editConfigModel;he.selectEdgeById(Z.id,dd(N,sn)),f.toFront()}}),f}return i=p,(l=[{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,_=f.graphModel;if(y.state===zr.TEXT_EDIT)return null;var x=!1,N=_.editConfigModel;return(y.text.draggable||N.edgeTextDraggable)&&(x=!0),Object(Be.g)(AC,{ref:this.textRef,editable:N.edgeTextEdit&&y.text.editable,model:y,graphModel:_,draggable:x})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=f.isSelected;return{start:y,end:_,hover:this.state.hover,isSelected:x}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,_=f.getArrowStyle(),x=_.refY,N=x===void 0?0:x,L=_.refX,X=L===void 0?2:L,Z=DC(this.getLastTwoPoints(),2),he=Z[0],xe=Z[1],Re="auto";return he!==null&&xe!==null&&(Re=Qe(dt({x:xe.x-he.x,y:xe.y-he.y,z:0}))),Object(Be.g)("g",null,Object(Be.g)("defs",null,Object(Be.g)("marker",{id:"marker-start-".concat(y),refX:-X,refY:N,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Be.g)("marker",{id:"marker-end-".concat(y),refX:X,refY:N,overflow:"visible",orient:Re,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Be.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,_=f.strokeWidth,x=f.offset,N=f.verticalLength;return Object(Be.g)("path",{stroke:y,fill:y,strokeWidth:_,transform:"rotate(180)",d:"M 0 0 L ".concat(x," -").concat(N," L ").concat(x," ").concat(N," Z")})}},{key:"getAdjustPointShape",value:function(f,y,_){var x=_.getAdjustPointStyle();return Object(Be.g)(jh,uy({className:"lf-edge-adjust-point"},x,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,_=f.graphModel,x=y.getAdjustStart(),N=y.getAdjustEnd();return Object(Be.g)("g",null,Object(Be.g)(Yx,uy({type:"SOURCE"},x,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:_})),Object(Be.g)(Yx,uy({type:"TARGET"},N,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:_})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Be.g)("g",null)}},{key:"getAppend",value:function(){return Object(Be.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,_=f.model;y.toFront(_.id)}},{key:"render",value:function(){var f=this.props,y=f.model,_=y.isSelected,x=y.isHitable,N=y.isShowAdjustPoint;return f.graphModel.animation,Object(Be.g)("g",null,Object(Be.g)("g",{className:["lf-edge",!x&&"pointer-none",_&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),N&&_?this.getAdjustPoints():"")}}])&&jC(i.prototype,l),p}(Be.a);function $0(a){return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$0(a)}function FC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Kx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Kx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var cy=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=FC(l,2),p=u[0],f=u[1],y=$0(f);p!=="style"&&y==="object"||(i[p]=f)}),Object(Be.g)("path",i)};function B0(a){return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B0(a)}function U0(){return U0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},U0.apply(this,arguments)}function $C(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function BC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function V0(a,i){return V0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},V0(a,i)}function UC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hm(a);if(i){var p=Hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return VC(this,l)}}function VC(a,i){if(i&&(B0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Hm(a){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hm(a)}var G0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&V0(f,y)})(p,a);var i,l,u=UC(p);function p(){return $C(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=f.isAnimation,N=f.arrowConfig,L=f.getEdgeStyle(),X=f.getEdgeAnimationStyle(),Z=X.strokeDasharray,he=X.stroke,xe=X.strokeDashoffset,Re=X.animationName,et=X.animationDuration,tt=X.animationIterationCount,yt=X.animationTimingFunction,Bt=X.animationDirection;return Object(Be.g)(Dh,U0({},L,{x1:y.x,y1:y.y,x2:_.x,y2:_.y},N,x?{strokeDasharray:Z,stroke:he,style:{strokeDashoffset:xe,animationName:Re,animationDuration:et,animationIterationCount:tt,animationTimingFunction:yt,animationDirection:Bt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,_=f.endPoint,x=Rn({start:y,end:_}),N=x.d,L=x.strokeWidth,X=x.fill,Z=x.strokeDasharray,he=x.stroke;return Object(Be.g)(cy,{d:N,fill:X,strokeWidth:L,stroke:he,strokeDasharray:Z})}}])&&BC(i.prototype,l),p}(sy);function W0(a){return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W0(a)}function GC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Zx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var WC=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=GC(l,2),p=u[0],f=u[1];(p==="style"||W0(f)!=="object")&&(i[p]=f)}),Object(Be.g)("polyline",i)};function z0(a){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z0(a)}function Jx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Jx(Object(l),!0).forEach(function(u){gf(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Jx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function H0(){return H0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},H0.apply(this,arguments)}function zC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function HC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function X0(a,i){return X0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},X0(a,i)}function XC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ym(a);if(i){var p=Ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return YC(this,l)}}function YC(a,i){if(i&&(z0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mf(a)}function mf(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ym(a){return Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ym(a)}function gf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Y0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&X0(f,y)})(p,a);var i,l,u=XC(p);function p(){var f;return function(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}(this,p),gf(mf(f=u.call(this)),"drag",void 0),gf(mf(f),"isDragging",void 0),gf(mf(f),"isShowAdjustPointTemp",void 0),gf(mf(f),"appendInfo",void 0),gf(mf(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),gf(mf(f),"onDragging",function(y){var _=y.deltaX,x=y.deltaY,N=f.props,L=N.model,X=N.graphModel;f.isDragging=!0;var Z=X.transformModel,he=X.editConfigModel,xe=zC(Z.fixDeltaXY(_,x),2),Re=xe[0],et=xe[1],tt=L,yt=he.adjustEdgeMiddle;f.appendInfo=yt?tt.dragAppendSimple(f.appendInfo,{x:Re,y:et}):tt.dragAppend(f.appendInfo,{x:Re,y:et})}),gf(mf(f),"onDragEnd",function(){var y=f.props,_=y.model,x=y.graphModel.eventCenter,N=_;N.dragAppendEnd(),f.isDragging=!1,N.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,x.emit(Nn.EDGE_ADJUST,{data:N.getData()})}),gf(mf(f),"beforeDragStart",function(y,_){_.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=_}),f.drag=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,_=f.isAnimation,x=f.arrowConfig,N=f.getEdgeStyle(),L=f.getEdgeAnimationStyle(),X=L.strokeDasharray,Z=L.stroke,he=L.strokeDashoffset,xe=L.animationName,Re=L.animationDuration,et=L.animationIterationCount,tt=L.animationTimingFunction,yt=L.animationDirection;return Object(Be.g)(WC,H0({points:y},N,x,_?{strokeDasharray:X,stroke:Z,style:{strokeDashoffset:he,animationName:xe,animationDuration:Re,animationIterationCount:et,animationTimingFunction:tt,animationDirection:yt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,_=f.isSelected,x={start:null,end:null,hover:this.state.hover,isSelected:_},N=go(y);return N.length>=2&&(x.start=N[N.length-2],x.end=N[N.length-1]),x}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=go(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,_=f.start,x=f.end;if(_.x===x.x&&_.y===x.y)y="";else{var N={start:_,end:x,offset:10,verticalLength:5},L=$(Xm(Xm({},N),{},{type:"start"})),X=$(Xm(Xm({},N),{},{type:"end"}));y="M".concat(L.leftX," ").concat(L.leftY,` 
      L`).concat(L.rightX," ").concat(L.rightY,` 
      L`).concat(X.rightX," ").concat(X.rightY,`
      L`).concat(X.leftX," ").concat(X.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),_=y.d,x=y.strokeWidth,N=y.fill,L=y.strokeDasharray,X=y.stroke;return Object(Be.g)(cy,{d:_,fill:N,strokeWidth:x,stroke:X,strokeDasharray:L})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,_=y.model,x=y.graphModel,N=_.pointsList,L=_.draggable,X=[],Z=N.length,he=function(Re){var et="lf-polyline-append",tt={start:{x:N[Re].x,y:N[Re].y},end:{x:N[Re+1].x,y:N[Re+1].y},startIndex:Re,endIndex:Re+1,direction:"",dragAble:!0},yt=Object(Be.g)("g",{className:et},f.getAppendShape(tt)),Bt=x.editConfigModel,hn=Bt.adjustEdge,dn=Bt.adjustEdgeMiddle;if(hn&&L){var Hn=tt.startIndex,sn=tt.endIndex,In=dn&&(Hn===0||sn===Z-1);tt.dragAble=!In,tt.start.x===tt.end.x?(tt.dragAble&&(et+="-ew-resize"),tt.direction=so.VERTICAL):tt.start.y===tt.end.y&&(tt.dragAble&&(et+="-ns-resize"),tt.direction=so.HORIZONTAL),yt=Object(Be.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(wn){return f.beforeDragStart(wn,tt)}},Object(Be.g)("g",{className:et},f.getAppendShape(tt)))}X.push(yt)},xe=0;xe<Z-1;xe++)he(xe);return Object(Be.g)("g",null,X)}}])&&HC(i.prototype,l),p}(sy);function q0(a){return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},q0(a)}function qC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return eS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return eS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function eS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function K0(){return K0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},K0.apply(this,arguments)}function KC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z0(a,i){return Z0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z0(a,i)}function JC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qm(a);if(i){var p=qm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return QC(this,l)}}function QC(a,i){if(i&&(q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function qm(a){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qm(a)}var J0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Z0(f,y)})(p,a);var i,l,u=JC(p);function p(){return KC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),_=f.path,x=f.isAnimation,N=f.arrowConfig,L=f.getEdgeAnimationStyle(),X=L.strokeDasharray,Z=L.stroke,he=L.strokeDashoffset,xe=L.animationName,Re=L.animationDuration,et=L.animationIterationCount,tt=L.animationTimingFunction,yt=L.animationDirection;return Object(Be.g)(cy,K0({d:_},y,N,x?{strokeDasharray:X,stroke:Z,style:{strokeDashoffset:he,animationName:xe,animationDuration:Re,animationIterationCount:et,animationTimingFunction:tt,animationDirection:yt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Be.g)(cy,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,_=f.isSelected,x=f.getArrowStyle().offset,N=f.pointsList.map(function(X){return{x:X.x,y:X.y}}),L=qC(La(N,x),2);return{start:L[0],end:L[1],hover:y,isSelected:_}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,_=f.pointsList.map(function(x){return{x:x.x,y:x.y}});return La(_,y)}}])&&ZC(i.prototype,l),p}(sy);function Q0(a){return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q0(a)}function tS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ej(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function tj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function e1(a,i){return e1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e1(a,i)}function rj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Km(a);if(i){var p=Km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oj(this,l)}}function oj(a,i){if(i&&(Q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Km(a){return Km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Km(a)}var ij=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&e1(f,y)})(p,a);var i,l,u=rj(p);function p(){return tj(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,_=f.style,x=y.start,N=y.end,L={start:x,end:N,offset:_.offset,verticalLength:_.verticalLength,type:"end"},X=$(L),Z=X.leftX,he=X.leftY,xe=X.rightX,Re=X.rightY;return function(et){for(var tt=1;tt<arguments.length;tt++){var yt=arguments[tt]!=null?arguments[tt]:{};tt%2?tS(Object(yt),!0).forEach(function(Bt){ej(et,Bt,yt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(yt)):tS(Object(yt)).forEach(function(Bt){Object.defineProperty(et,Bt,Object.getOwnPropertyDescriptor(yt,Bt))})}return et}({d:"M".concat(Z," ").concat(he," L").concat(N.x," ").concat(N.y," L").concat(xe," ").concat(Re," z")},_)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,_=f.strokeWidth,x=f.stroke,N=f.fill;return Object(Be.g)(cy,{d:y,fill:N,strokeWidth:_,stroke:x})}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&nj(i.prototype,l),p}(Be.a),nS=function(a,i){return vt(a,i)},aj=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},t1=function(){return kn.a.Date.now()},lj=Math.max,uj=Math.min,sj=function(a,i,l){var u,p,f,y,_,x,N=0,L=!1,X=!1,Z=!0;if(typeof a!="function")throw new TypeError("Expected a function");function he(Bt){var hn=u,dn=p;return u=p=void 0,N=Bt,y=a.apply(dn,hn)}function xe(Bt){return N=Bt,_=setTimeout(et,i),L?he(Bt):y}function Re(Bt){var hn=Bt-x;return x===void 0||hn>=i||hn<0||X&&Bt-N>=f}function et(){var Bt=t1();if(Re(Bt))return tt(Bt);_=setTimeout(et,function(hn){var dn=i-(hn-x);return X?uj(dn,f-(hn-N)):dn}(Bt))}function tt(Bt){return _=void 0,Z&&u?he(Bt):(u=p=void 0,y)}function yt(){var Bt=t1(),hn=Re(Bt);if(u=arguments,p=this,x=Bt,hn){if(_===void 0)return xe(x);if(X)return clearTimeout(_),_=setTimeout(et,i),he(x)}return _===void 0&&(_=setTimeout(et,i)),y}return i=Yl(i)||0,Rr(l)&&(L=!!l.leading,f=(X="maxWait"in l)?lj(Yl(l.maxWait)||0,i):f,Z="trailing"in l?!!l.trailing:Z),yt.cancel=function(){_!==void 0&&clearTimeout(_),N=0,u=x=p=_=void 0},yt.flush=function(){return _===void 0?y:tt(t1())},yt},cj=r(172);function fj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ad(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var rS,oS,iS,dj=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Ad(this,"undos",[]),Ad(this,"redos",[]),Ad(this,"callbacks",[]),Ad(this,"stopWatch",null),Ad(this,"curData",null),Ad(this,"maxSize",50),Ad(this,"waitTime",100),Ad(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){nS(aj(this.undos),u)||(this.undos.push(u),nS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Nn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var p=this.undos.pop();return this.curData=Oo(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=Oo(u),u}}},{key:"watch",value:function(u){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(cj.a)(u,sj(function(){var f=u.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&fj(i.prototype,l),a}();function n1(a){return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n1(a)}function pj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||function(l,u){if(l){if(typeof l=="string")return aS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return aS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Rp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?lS(Object(l),!0).forEach(function(u){Dp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function uS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r1(a,i){return r1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r1(a,i)}function hj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zm(a);if(i){var p=Zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vj(this,l)}}function vj(a,i){if(i&&(n1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hh(a)}function Hh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zm(a){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zm(a)}function Dp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var sS,cS,fS,o1=ps((iS=oS=function(a){(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),_&&r1(y,_)})(f,a);var i,l,u,p=hj(f);function f(){var y;return function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}(this,f),Dp(Hh(y=p.call(this)),"ref",Object(Be.f)()),Dp(Hh(y),"__prevText",{type:"",text:"",id:""}),Dp(Hh(y),"keyupHandler",function(_){var x=y.props.graphModel.textEditElement;_.key==="Enter"&&_.altKey&&x.setElementState(0)}),Dp(Hh(y),"inputHandler",function(_){var x=_.target.innerText,N=y.props.graphModel.textEditElement;y.__prevText={type:N.type,text:x.replace(/(\r\n)+$|(\n)+$/,""),id:N.id}}),Dp(Hh(y),"keydownHandler",function(_){_.stopPropagation()}),y.state={style:{left:0,top:0}},y}return i=f,u=[{key:"getDerivedStateFromProps",value:function(y){var _,x=y.graphModel,N=x.transformModel,L=x.theme,X=L.inputText,Z=x.textEditElement;if(Z){var he;if((he=Z.text)===null||he===void 0||!he.value)if(Z.BaseType===uo.EDGE){var xe=(Z=Z).text,Re=Z.textPosition,et=Re.x,tt=Re.y;xe.x=et,xe.y=tt,Z.setText(xe)}else Z=Z;var yt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(Z.BaseType===uo.EDGE){var Bt=L.edgeText,hn=Bt.overflowMode,dn=Bt.lineHeight,Hn=Bt.wrapPadding,sn=Bt.textWidth;sn&&hn==="autoWrap"&&(_=Rp(Rp({},yt),{},{width:sn,minWidth:sn,lineHeight:dn,padding:Hn}))}else if(Z.BaseType===uo.NODE){var In=L.nodeText,wn=In.overflowMode,Dr=In.lineHeight,$r=In.wrapPadding,sr=In.textWidth,Hr=Z,hi=Hr.width,vi=Hr.modelType,wa=Hr.textWidth||sr||hi;(vi!==Er.TEXT_NODE&&wn==="autoWrap"||vi===Er.TEXT_NODE&&sr)&&(_=Rp(Rp({},yt),{},{width:wa,minWidth:wa,lineHeight:Dr,padding:$r}))}var ru=Z.text,ou=ru.x,oc=ru.y,Cp=pj(N.CanvasPointToHtmlPoint([ou,oc]),2);return{style:Rp(Rp({left:Cp[0],top:Cp[1]},_),X)}}}}],(l=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var _=this.__prevText,x=_.text,N=_.id;y.updateText(N,x),y.eventCenter.emit(Nn.TEXT_UPDATE,Rp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var _=document.createRange();_.selectNodeContents(y),_.collapse(!1);var x=window.getSelection();x.removeAllRanges(),x.addRange(_)}}},{key:"render",value:function(){var y,_=this.props.graphModel.textEditElement,x=this.state.style;return _?Object(Be.g)("div",{contentEditable:!0,className:"lf-text-input",style:x,ref:this.ref,key:_.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=_.text)===null||y===void 0?void 0:y.value):null}}])&&uS(i.prototype,l),u&&uS(i,u),f}(Be.a),Dp(oS,"toolName","textEdit"),rS=iS))||rS,yj=function(a){return a.modelType===Er.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,p=(l.x+u.x)/2,f=(l.y+u.y)/2,y=Math.abs(l.x-u.x)+10,_=Math.abs(l.y-u.y)+10;return{x:p-y/2,y:f-_/2,x1:p+y/2,y1:f+_/2}}(a):a.modelType===Er.POLYLINE_EDGE?function(i){var l=i.points,u=go(l),p=Wt(u,8),f=p.x,y=p.y,_=p.width,x=p.height;return{x:f-_/2,y:y-x/2,x1:f+_/2,y1:y+x/2}}(a):a.modelType===Er.BEZIER_EDGE?function(i){var l=i.path,u=zn(l),p=Wt(u,8),f=p.x,y=p.y,_=p.width,x=p.height;return{x:f-_/2,y:y-x/2,x1:f+_/2,y1:y+x/2}}(a):void 0};function i1(a){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i1(a)}function dS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,_=[],x=!0,N=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(_.push(f.value),!u||_.length!==u);x=!0);}catch(L){N=!0,y=L}finally{try{x||p.return==null||p.return()}finally{if(N)throw y}}return _}}(a,i)||pS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mj(a){return function(i){if(Array.isArray(i))return a1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||pS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pS(a,i){if(a){if(typeof a=="string")return a1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?a1(a,i):void 0}}function a1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function gj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function l1(a,i){return l1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l1(a,i)}function bj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jm(a);if(i){var p=Jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _j(this,l)}}function _j(a,i){if(i&&(i1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xh(a)}function Xh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jm(a){return Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jm(a)}function Yh(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var u1=ps((fS=cS=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&l1(f,y)})(p,a);var i,l,u=bj(p);function p(f){var y;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),Yh(Xh(y=u.call(this)),"stepDrag",void 0),Yh(Xh(y),"handleMouseDown",function(L){y.stepDrag.handleMouseDown(L)}),Yh(Xh(y),"handleWheelEvent",function(L){var X,Z;L.preventDefault();var he=L.deltaX,xe=L.deltaY,Re=L.clientX,et=L.clientY,tt=L.ctrlKey,yt=new WheelEvent("wheel",{deltaX:he,deltaY:xe,clientX:Re,clientY:et,ctrlKey:tt});(X=y.props.logicFlow.container)===null||X===void 0||(Z=X.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||Z===void 0||Z.dispatchEvent(yt)}),Yh(Xh(y),"onDragging",function(L){var X=L.deltaX,Z=L.deltaY,he=y.props.graphModel,xe=he.getSelectElements(!0);he.moveNodes(xe.nodes.map(function(Re){return Re.id}),X,Z)}),Yh(Xh(y),"handleContextMenu",function(L){L.preventDefault();var X=y.props,Z=X.graphModel,he=X.graphModel,xe=he.eventCenter,Re=he.selectElements,et=Z.getPointByClient({x:L.clientX,y:L.clientY}),tt={nodes:[],edges:[]};mj(Re.values()).forEach(function(yt){yt.BaseType===uo.NODE&&tt.nodes.push(yt.getData()),yt.BaseType===uo.EDGE&&tt.edges.push(yt.getData())}),xe.emit(Nn.SELECTION_CONTEXTMENU,{data:tt,e:L,position:et})});var _=f.graphModel,x=_.gridSize,N=_.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,step:x,eventType:"SELECTION",eventCenter:N}),y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,_=f.transformModel;if(!(y.size<=1)){var x=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,X=Number.MIN_SAFE_INTEGER;y.forEach(function(Re){var et={x:0,y:0,x1:0,y1:0};Re.BaseType===uo.NODE&&(et=function(tt){var yt=tt.x,Bt=tt.y,hn=tt.width,dn=tt.height;return{x:yt-hn/2,y:Bt-dn/2,x1:yt+hn/2,y1:Bt+dn/2}}(Re)),Re.BaseType===uo.EDGE&&(et=yj(Re)),x=Math.min(x,et.x),N=Math.min(N,et.y),L=Math.max(L,et.x1),X=Math.max(X,et.y1)});var Z=dS(_.CanvasPointToHtmlPoint([x,N]),2);x=Z[0],N=Z[1];var he=dS(_.CanvasPointToHtmlPoint([L,X]),2);L=he[0],X=he[1];var xe={left:"".concat(x-10,"px"),top:"".concat(N-10,"px"),width:"".concat(L-x+20,"px"),height:"".concat(X-N+20,"px")};return Object(Be.g)("div",{className:"lf-multiple-select",style:xe,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&gj(i.prototype,l),p}(Be.a),Yh(cS,"toolName","multipleSelect"),sS=fS))||sS;function wj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ej=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Qm(this,"tools",void 0),Qm(this,"components",void 0),Qm(this,"toolMap",new Map),Qm(this,"instance",void 0),this.instance=u,this.isDisabledTool(o1.toolName)||this.registerTool(o1.toolName,o1),this.isDisabledTool(u1.toolName)||this.registerTool(u1.toolName,u1);var p=u.graphModel;p.eventCenter.on("".concat(Nn.GRAPH_TRANSFORM,",").concat(Nn.NODE_CLICK,",").concat(Nn.BLANK_CLICK," "),function(){var f=p.textEditElement,y=p.editConfigModel,_=y.edgeTextEdit,x=y.nodeTextEdit;(_||x)&&f&&p.textEditElement.setElementState(zr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,p){this.toolMap.set(u,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&wj(i.prototype,l),a}(),Oj=r(173),xj=r.n(Oj);function Sj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var hS=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),s1(this,"mousetrap",void 0),s1(this,"options",void 0),s1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var p=u.lf;this.target=p.container,this.mousetrap=new xj.a(this.target),u.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,p=this.options.keyboard.shortcuts;if(p)if(oo(p))p.forEach(function(x){var N=x.keys,L=x.callback,X=x.action;return u.on(N,L,X)});else{var f=p.keys,y=p.callback,_=p.action;this.on(f,y,_)}}},{key:"on",value:function(u,p,f){this.mousetrap.bind(this.getKeys(u),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,p){this.mousetrap.unbind(this.getKeys(u),p)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var p=this;return(Array.isArray(u)?u:[u]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Sj(i.prototype,l),a}(),Aj=hS,bf=null;function vS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function yS(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var qh=40,c1=40;function f1(a){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f1(a)}function mS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function fy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mS(Object(l),!0).forEach(function(u){si(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function gS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function si(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var d1=Symbol("plugin register by Logicflow.use"),p1=function(){function a(p){var f,y,_=this;(function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")})(this,a),si(this,"container",void 0),si(this,"width",void 0),si(this,"height",void 0),si(this,"graphModel",void 0),si(this,"history",void 0),si(this,"viewMap",new Map),si(this,"tool",void 0),si(this,"keyboard",void 0),si(this,"dnd",void 0),si(this,"options",void 0),si(this,"snaplineModel",void 0),si(this,"components",[]),si(this,"plugins",void 0),si(this,"extension",{}),si(this,"adapterIn",void 0),si(this,"adapterOut",void 0),si(this,"getView",function(x){return _.viewMap.get(x)}),p=hO(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new DN(fy({},p)),this.tool=new Ej(this),this.history=new dj(this.graphModel.eventCenter),this.dnd=new PR({lf:this}),this.keyboard=new Aj({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new Mx(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(x){var N=x.data;y.setNodeSnapLine(N)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(x,N){var L=x.keyboard,X=L.options.keyboard;L.on(["cmd + c","ctrl + c"],function(){if(c1=qh,!X.enabled||N.textEditElement)return!0;var Z=x.options.guards,he=N.getSelectElements(!1);return Z&&Z.beforeClone&&!Z.beforeClone(he)||he.nodes.length===0&&he.edges.length===0?(bf=null,!0):((bf=he).nodes.forEach(function(xe){return vS(xe,qh)}),bf.edges.forEach(function(xe){return yS(xe,qh)}),!1)}),L.on(["cmd + v","ctrl + v"],function(){if(!X.enabled||N.textEditElement)return!0;if(bf&&(bf.nodes||bf.edges)){x.clearSelectElements();var Z=x.addElements(bf,c1);if(!Z)return!0;Z.nodes.forEach(function(he){return x.selectElementById(he.id,!0)}),Z.edges.forEach(function(he){return x.selectElementById(he.id,!0)}),bf.nodes.forEach(function(he){return vS(he,qh)}),bf.edges.forEach(function(he){return yS(he,qh)}),c1+=qh}return!1}),L.on(["cmd + z","ctrl + z"],function(){return!X.enabled||!!N.textEditElement||(x.undo(),!1)}),L.on(["cmd + y","ctrl + y"],function(){return!X.enabled||!!N.textEditElement||(x.redo(),!1)}),L.on(["backspace"],function(){if(!X.enabled||N.textEditElement)return!0;var Z=N.getSelectElements(!0);return x.clearSelectElements(),Z.edges.forEach(function(he){return x.deleteEdge(he.id)}),Z.nodes.forEach(function(he){return x.deleteNode(he.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var _={BaseEdge:sy,BaseEdgeModel:bd,BaseNode:vf,BaseNodeModel:hf,RectNode:o0,RectNodeModel:j_,CircleNode:u0,CircleNodeModel:y_,PolygonNode:p0,PolygonNodeModel:N_,TextNode:S0,TextNodeModel:$_,LineEdge:G0,LineEdgeModel:Di,DiamondNode:m0,DiamondNodeModel:w_,PolylineEdge:Y0,PolylineEdgeModel:sf,BezierEdge:J0,BezierEdgeModel:c_,EllipseNode:E0,EllipseNodeModel:S_,HtmlNode:P0,HtmlNodeModel:V_,h:Be.g,type:p};this.viewMap.forEach(function(Z){var he=Z.extendKey;he&&(_[he]=Z)}),this.graphModel.modelMap.forEach(function(Z){var he=Z.extendKey;he&&(_[he]=Z)});var x=f(_),N=x.view,L=x.model,X=N;y&&!X.isObervered&&(X.isObervered=!0,X=xn(X)),this.setView(p,X),this.graphModel.setModel(p,L)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=xn(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){p.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:o0,model:j_,type:"rect"}),this.registerElement({type:"circle",view:u0,model:y_}),this.registerElement({type:"polygon",view:p0,model:N_}),this.registerElement({type:"line",view:G0,model:Di}),this.registerElement({type:"polyline",view:Y0,model:sf}),this.registerElement({type:"bezier",view:J0,model:c_}),this.registerElement({type:"text",view:S0,model:$_}),this.registerElement({type:"ellipse",view:E0,model:S_}),this.registerElement({type:"diamond",view:m0,model:w_}),this.registerElement({type:"html",view:P0,model:V_})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&y&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,y=p.coordinate,_=p.id;if(!y){var x=this.getNodeModelById(_);x&&(y=x.getData());var N=this.getEdgeModelById(_);N&&(y=N.textPosition)}var L=y,X=L.x,Z=L.y;f.focusOn(X,Z,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,y,_,x=this.getModelById(p);return!!x&&(y=(_=(si(f={},uo.NODE,this.deleteNode),si(f,uo.EDGE,this.deleteEdge),f)[x.BaseType])===null||_===void 0?void 0:_.call(this,p))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,y)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var y=f.getData(),_=this.options.guards,x=!_||!_.beforeDelete||_.beforeDelete(y);return x&&this.graphModel.deleteNode(p),x}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,y=this.graphModel.edgesMap[p];if(!y)return!1;var _=y.model.getData(),x=!f||!f.beforeDelete||f.beforeDelete(_);return x&&this.graphModel.deleteEdgeById(p),x}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,y=p.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,y=p.sourceNodeId,_=p.targetNodeId;if(y&&_){var x=[];return f.forEach(function(X){X.sourceNodeId===y&&X.targetNodeId===_&&x.push(X)}),x}if(y){var N=[];return f.forEach(function(X){X.sourceNodeId===y&&N.push(X)}),N}if(_){var L=[];return f.forEach(function(X){X.targetNodeId===_&&L.push(X)}),L}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.setProperties(Qo(f))}},{key:"deleteProperty",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,y=p.nodes,_=p.edges,x={},N={nodes:[],edges:[]},L=0;L<y.length;L++){var X=y[L],Z=X.id,he=this.addNode(X);if(!he)return;Z&&(x[Z]=he.id),N.nodes.push(he)}return _.forEach(function(xe){var Re=xe.sourceNodeId,et=xe.targetNodeId;x[Re]&&(Re=x[Re]),x[et]&&(et=x[et]);var tt=f.graphModel.addEdge(fy(fy({},xe),{},{sourceNodeId:Re,targetNodeId:et}));N.edges.push(tt)}),N}},{key:"getAreaElement",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],_=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,y,_,x).map(function(N){return N.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return this.adapterOut.apply(this,[p].concat(y))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,y=f.editConfigModel,_=f.transformModel;y.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&_.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=Qo(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=Qo(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,y=p.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=(p=this.plugins)!==null&&p!==void 0?p:a.extensions;_.forEach(function(x){var N=null,L=null;x[d1]?(N=x.extension,L=x.props):N=x;var X=N.pluginName||N.name;y.indexOf(X)===-1&&f.installPlugin(N,L)})}},{key:"installPlugin",value:function(p,f){if(f1(p)==="object"){var y=p.install,_=p.render;return y&&y.call(p,this,a),_&&this.components.push(_.bind(p)),void(this.extension[p.pluginName]=p)}var x=p,N=new x({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:f});N.render&&this.components.push(N.render.bind(N)),this.extension[x.pluginName]=N}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var y=new f(fy(fy({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(Qo(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Be.j)(Object(Be.g)(TR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Nn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],u=[{key:"use",value:function(p,f){var y,_,x=p.pluginName;x||(x=p.name);var N=(y=this.extensions.get(x))===null||y===void 0?void 0:y.extension;N&&N.destroy&&N.destroy(),this.extensions.set(x,(si(_={},d1,d1),si(_,"extension",p),si(_,"props",f),_))}}],l&&gS(i.prototype,l),u&&gS(i,u),a}();function ps(a){return xn(a)}si(p1,"extensions",new Map),o.default=p1}])})})(rw,rw.exports);var cn=rw.exports;const YG=DI(cn);var qG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),KG=(globalThis==null?void 0:globalThis._ids)||new qG;function Lv(){return KG.next()}var m2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){m2(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){m2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var g2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ng=globalThis&&globalThis.__assign||function(){return Ng=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ng.apply(this,arguments)};(function(e){g2(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){g2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return cn.h("g",{},v,cn.h("circle",Ng(Ng({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var b2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ey=globalThis&&globalThis.__assign||function(){return Ey=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ey.apply(this,arguments)};(function(e){b2(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){b2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.points,h=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",Ey(Ey({},h),{x:o,y:r,points:v})),cn.h("path",Ey({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},h)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var _2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rg=globalThis&&globalThis.__assign||function(){return Rg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rg.apply(this,arguments)};(function(e){_2(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){_2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Rg(Rg({},h),{x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var w2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ow=globalThis&&globalThis.__assign||function(){return ow=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ow.apply(this,arguments)};(function(e){w2(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){w2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",ow({x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},h)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var E2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){E2(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){E2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var rA={width:40,height:40},oA={width:40,height:40},iA={width:40,height:40},aA={width:100,height:80},lA={width:100,height:80},ZG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),JG=(globalThis==null?void 0:globalThis._ids)||new ZG;function uA(){return JG.next()}function O2(e){return Object.prototype.toString.call(e)}function QG(e){return"  ".repeat(e)}function Dg(e){var t=e;return O2(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Dg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Dg(n)})),t}function e7(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Dg(e)).replace(/"/g,"'")}return t}var Kh=`	
`;function yg(e,t,n){var o=QG(n),r="";if(t==="#text")return Kh+o+e;if(t==="#cdata-section")return Kh+o+"<![CDATA["+e+"]]>";if(t==="#comment")return Kh+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+e7(e)+'"';if(Array.isArray(e))e.forEach(function(h){r+=yg(h,t,n+1)});else if(O2(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":Kh+o)+"<"+t,s.forEach(function(h){h.charAt(0)==="-"?c+=yg(e[h],h,n+1):v+=yg(e[h],h,n+1)}),r+=c+(v!==""?">"+v+(Kh+o)+"</"+t+">":" />")}else r+=Kh+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function t7(e){var t="";for(var n in e)t+=yg(e[n],n,0);return t}var sl=function(){};sl.ObjTree=function(){return this};sl.ObjTree.VERSION="0.23";sl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;sl.ObjTree.prototype.attr_prefix="-";sl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};sl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(b){var w;b&&b.responseXML&&b.responseXML.documentElement&&(w=s.parseDOM(b.responseXML.documentElement)),c(w,b),v&&v(b)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};sl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};sl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h==3||h==4||h==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};sl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};sl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};sl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};sl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};sl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};sl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var n7=function(e){return new sl.ObjTree().parseXML(e)},r7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),iw=globalThis&&globalThis.__assign||function(){return iw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iw.apply(this,arguments)},gb=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},cc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(cc||(cc={}));var x2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],sA=["properties","startPoint","endPoint","pointsList"];function cA(e){var t=e?sA.concat(e):sA;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var v=gb(c,2),h=v[0],g=v[1];typeof g!="object"?h.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(h)?s[h]=g:s["-"+h]=g:t.includes(h)?s["-"+h]=o(g):s[h]=o(g)}),s)}return o(n)}}function Cg(e){var t={};return Object.entries(e).forEach(function(n){var o=gb(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Dg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Cg(s):Array.isArray(s)?t[r]=s.map(function(c){return Cg(c)}):t[r]=s}),t}function o7(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var h=cA(n)(s.properties);Object.assign(v,h)}o.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,h=o.get(s.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(s.id):h["bpmn:incoming"]=[h["bpmn:incoming"],s.id]:h["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var b=cA(n)(s.properties);Object.assign(g,b)}return g});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[cc.FLOW]=r}function i7(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Vd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function a7(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===cc.FLOW){var v=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=u7(c,v)}else{var h=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(l7(c,h,s))}}})}return{nodes:t,edges:n}}function l7(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=fA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=fA(r,n,e);o.push(s)}return o}function fA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Vd.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(w){var O=gb(w,2),S=O[0],P=O[1];x2.indexOf(S)===-1&&(v||(v={}),v[S]=P)}),v&&(v=Cg(v));var h;if(s&&(h={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];h.x=Number(g["-x"])+Number(g["-width"])/2,h.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:o,y:r,properties:v};return h&&(b.text=h),b}function u7(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(dA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(dA(o,e))}return n}function dA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(h){s<h.length&&(s=h.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(h){var g=gb(h,2),b=g[0],w=g[1];x2.indexOf(b)===-1&&(c||(c={}),c[b]=w)}),c&&(c=Cg(c));var v={id:t["-id"],type:cc.FLOW,pointsList:e["di:waypoint"].map(function(h){return{x:Number(h["-x"]),y:Number(h["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Vd=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=iw({},n.processAttributes);o7(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};i7(v,r);var h=n.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":h};return g},this.adapterIn=function(r){if(r)return a7(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+uA()},this.definitionAttributes={"-id":"Definitions_"+uA(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Vd.shapeConfigMap.set(cc.START,{width:rA.width,height:rA.height});Vd.shapeConfigMap.set(cc.END,{width:oA.width,height:oA.height});Vd.shapeConfigMap.set(cc.GATEWAY,{width:iA.width,height:iA.height});Vd.shapeConfigMap.set(cc.SYSTEM,{width:aA.width,height:aA.height});Vd.shapeConfigMap.set(cc.USER,{width:lA.width,height:lA.height});(function(e){r7(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=n7(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var v=o.adapterOut(s,c);return t7(v)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Vd);var s7=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),c7=(globalThis==null?void 0:globalThis._ids)||new s7;function f7(){return c7.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var pA=globalThis&&globalThis.__assign||function(){return pA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pA.apply(this,arguments)},d7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var hA=globalThis&&globalThis.__assign||function(){return hA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hA.apply(this,arguments)},p7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var vA=globalThis&&globalThis.__assign||function(){return vA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vA.apply(this,arguments)},h7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var yA=globalThis&&globalThis.__assign||function(){return yA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA.apply(this,arguments)},v7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var mA=globalThis&&globalThis.__assign||function(){return mA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mA.apply(this,arguments)},y7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var gA=globalThis&&globalThis.__assign||function(){return gA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gA.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var bA=globalThis&&globalThis.__assign||function(){return bA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bA.apply(this,arguments)},m7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var cE,Ti,S2,Up,_A,A2,aw,T2,fE,lw,uw,sw={},M2=[],g7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dE=Array.isArray;function Rd(e,t){for(var n in t)e[n]=t[n];return e}function pE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Oy(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?cE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return mg(e,c,o,r,null)}function mg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++S2,__i:-1,__u:0};return r==null&&Ti.vnode!=null&&Ti.vnode(s),s}function hE(e){return e.children}function pv(e,t){this.props=e,this.context=t}function xv(e,t){if(t==null)return e.__?xv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?xv(e):null}function P2(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return P2(e)}}function wA(e){(!e.__d&&(e.__d=!0)&&Up.push(e)&&!jg.__r++||_A!==Ti.debounceRendering)&&((_A=Ti.debounceRendering)||A2)(jg)}function jg(){var e,t,n,o,r,s,c,v;for(Up.sort(aw);e=Up.shift();)e.__d&&(t=Up.length,o=void 0,s=(r=(n=e).__v).__e,c=[],v=[],n.__P&&((o=Rd({},r)).__v=r.__v+1,Ti.vnode&&Ti.vnode(o),R2(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,c,s??xv(r),!!(32&r.__u),v),o.__v=r.__v,o.__.__k[o.__i]=o,w7(c,o,v),o.__e!=s&&P2(o)),Up.length>t&&Up.sort(aw));jg.__r=0}function k2(e,t,n,o,r,s,c,v,h,g,b){var w,O,S,P,A,k,j=o&&o.__k||M2,R=t.length;for(h=b7(n,t,j,h,R),w=0;w<R;w++)(S=n.__k[w])!=null&&(O=S.__i===-1?sw:j[S.__i]||sw,S.__i=w,k=R2(e,S,O,r,s,c,v,h,g,b),P=S.__e,S.ref&&O.ref!=S.ref&&(O.ref&&vE(O.ref,null,S),b.push(S.ref,S.__c||P,S)),A==null&&P!=null&&(A=P),4&S.__u||O.__k===S.__k?h=N2(S,h,e):typeof S.type=="function"&&k!==void 0?h=k:P&&(h=P.nextSibling),S.__u&=-7);return n.__e=A,h}function b7(e,t,n,o,r){var s,c,v,h,g,b=n.length,w=b,O=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=s+O,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?mg(null,c,null,null,null):dE(c)?mg(hE,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?mg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=_7(c,n,h,w))!==-1&&(w--,(v=n[g])&&(v.__u|=2)),v==null||v.__v===null?(g==-1&&O--,typeof c.type!="function"&&(c.__u|=4)):g!=h&&(g==h-1?O--:g==h+1?O++:(g>h?O--:O++,c.__u|=4))):e.__k[s]=null;if(w)for(s=0;s<b;s++)(v=n[s])!=null&&!(2&v.__u)&&(v.__e==o&&(o=xv(v)),D2(v,v));return o}function N2(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=N2(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=xv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _7(e,t,n,o){var r,s,c=e.key,v=e.type,h=t[n];if(h===null||h&&c==h.key&&v===h.type&&!(2&h.__u))return n;if(o>(h!=null&&!(2&h.__u)?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((h=t[r])&&!(2&h.__u)&&c==h.key&&v===h.type)return r;r--}if(s<t.length){if((h=t[s])&&!(2&h.__u)&&c==h.key&&v===h.type)return s;s++}}return-1}function EA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||g7.test(t)?n:n+"px"}function ig(e,t,n,o,r){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||EA(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||EA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(T2,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=fE,e.addEventListener(t,s?uw:lw,s)):e.removeEventListener(t,s?uw:lw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function OA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=fE++;else if(t.t<n.u)return;return n(Ti.event?Ti.event(t):t)}}}function R2(e,t,n,o,r,s,c,v,h,g){var b,w,O,S,P,A,k,j,R,B,G,H,Y,Q,W,I,z,K=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),s=[v=t.__e=n.__e]),(b=Ti.__b)&&b(t);e:if(typeof K=="function")try{if(j=t.props,R="prototype"in K&&K.prototype.render,B=(b=K.contextType)&&o[b.__c],G=b?B?B.props.value:b.__:o,n.__c?k=(w=t.__c=n.__c).__=w.__E:(R?t.__c=w=new K(j,G):(t.__c=w=new pv(j,G),w.constructor=K,w.render=O7),B&&B.sub(w),w.props=j,w.state||(w.state={}),w.context=G,w.__n=o,O=w.__d=!0,w.__h=[],w._sb=[]),R&&w.__s==null&&(w.__s=w.state),R&&K.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Rd({},w.__s)),Rd(w.__s,K.getDerivedStateFromProps(j,w.__s))),S=w.props,P=w.state,w.__v=t,O)R&&K.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),R&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(R&&K.getDerivedStateFromProps==null&&j!==S&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(j,G),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(j,w.__s,G)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(w.props=j,w.state=w.__s,w.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(q){q&&(q.__=t)}),H=0;H<w._sb.length;H++)w.__h.push(w._sb[H]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(j,w.__s,G),R&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(S,P,A)})}if(w.context=G,w.props=j,w.__P=e,w.__e=!1,Y=Ti.__r,Q=0,R){for(w.state=w.__s,w.__d=!1,Y&&Y(t),b=w.render(w.props,w.state,w.context),W=0;W<w._sb.length;W++)w.__h.push(w._sb[W]);w._sb=[]}else do w.__d=!1,Y&&Y(t),b=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++Q<25);w.state=w.__s,w.getChildContext!=null&&(o=Rd(Rd({},o),w.getChildContext())),R&&!O&&w.getSnapshotBeforeUpdate!=null&&(A=w.getSnapshotBeforeUpdate(S,P)),v=k2(e,dE(I=b!=null&&b.type===hE&&b.key==null?b.props.children:b)?I:[I],t,n,o,r,s,c,v,h,g),w.base=t.__e,t.__u&=-161,w.__h.length&&c.push(w),k&&(w.__E=w.__=null)}catch(q){if(t.__v=null,h||s!=null)if(q.then){for(t.__u|=h?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else for(z=s.length;z--;)pE(s[z]);else t.__e=n.__e,t.__k=n.__k;Ti.__e(q,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=E7(n.__e,t,n,o,r,s,c,h,g);return(b=Ti.diffed)&&b(t),128&t.__u?void 0:v}function w7(e,t,n){for(var o=0;o<n.length;o++)vE(n[o],n[++o],n[++o]);Ti.__c&&Ti.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Ti.__e(s,r.__v)}})}function E7(e,t,n,o,r,s,c,v,h){var g,b,w,O,S,P,A,k=n.props,j=t.props,R=t.type;if(R=="svg"?r="http://www.w3.org/2000/svg":R=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((S=s[g])&&"setAttribute"in S==!!R&&(R?S.localName==R:S.nodeType==3)){e=S,s[g]=null;break}}if(e==null){if(R==null)return document.createTextNode(j);e=document.createElementNS(r,R,j.is&&j),v&&(Ti.__m&&Ti.__m(t,s),v=!1),s=null}if(R===null)k===j||v&&e.data===j||(e.data=j);else{if(s=s&&cE.call(e.childNodes),k=n.props||sw,!v&&s!=null)for(k={},g=0;g<e.attributes.length;g++)k[(S=e.attributes[g]).name]=S.value;for(g in k)if(S=k[g],g!="children"){if(g=="dangerouslySetInnerHTML")w=S;else if(!(g in j)){if(g=="value"&&"defaultValue"in j||g=="checked"&&"defaultChecked"in j)continue;ig(e,g,null,S,r)}}for(g in j)S=j[g],g=="children"?O=S:g=="dangerouslySetInnerHTML"?b=S:g=="value"?P=S:g=="checked"?A=S:v&&typeof S!="function"||k[g]===S||ig(e,g,S,k[g],r);if(b)v||w&&(b.__html===w.__html||b.__html===e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(w&&(e.innerHTML=""),k2(e,dE(O)?O:[O],t,n,o,R=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&xv(n,0),v,h),s!=null)for(g=s.length;g--;)pE(s[g]);v||(g="value",R=="progress"&&P==null?e.removeAttribute("value"):P!==void 0&&(P!==e[g]||R=="progress"&&!P||R=="option"&&P!==k[g])&&ig(e,g,P,k[g],r),g="checked",A!==void 0&&A!==e[g]&&ig(e,g,A,k[g],r))}return e}function vE(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ti.__e(r,n)}}function D2(e,t,n){var o,r;if(Ti.unmount&&Ti.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||vE(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){Ti.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&D2(o[r],t,n||typeof e.type!="function");n||pE(e.__e),e.__c=e.__=e.__e=void 0}function O7(e,t,n){return this.constructor(e,n)}cE=M2.slice,Ti={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},S2=0,pv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Rd({},this.state),typeof e=="function"&&(e=e(Rd({},n),this.props)),e&&Rd(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),wA(this))},pv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),wA(this))},pv.prototype.render=hE,Up=[],A2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,aw=function(e,t){return e.__v.__b-t.__v.__b},jg.__r=0,T2=/(PointerCapture)$|Capture$/i,fE=0,lw=OA(!1),uw=OA(!0);var xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(this,arguments)};function yE(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,v=t-o/2,h=n-r/2,g=xy(xy({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:h});return cn.h("rect",xy({},g))}yE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var sv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(sv||(sv={}));var x7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vp=globalThis&&globalThis.__assign||function(){return Vp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vp.apply(this,arguments)},S7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},A7=cn.LogicFlowUtil.StepDrag,T7=function(e){x7(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.x,g=v.y;o.nodeModel.x=h+s/2,o.nodeModel.y=g+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,h=r.width,g=r.height,b=r.PCTResizeInfo,w=r.pct,O=w===void 0?1:w,S=r.freezeWidth,P=S===void 0?!1:S,A=r.freezeHeight,k=A===void 0?!1:A,j={width:h,height:g,deltaX:c,deltaY:v};if(b){var R=4,B=0,G=0;switch(s){case 0:G=(c*-1-v)/R;break;case 1:G=(c-v)/R;break;case 2:G=(c+v)/R;break;case 3:G=(c*-1+v)/R;break}G!==0&&(B=Math.round(G/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+B,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+B,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var H=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),Y=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(s){case 0:c=h-H,v=g-Y;break;case 1:c=H-h,v=g-Y;break;case 2:c=H-h,v=Y-g;break;case 3:c=h-H,v=Y-g;break}return j.width=H,j.height=Y,j.deltaX=c/O,j.deltaY=v/O,j}switch(s){case 0:j.width=P?h:h-c*O,j.height=k?g:g-v*O;break;case 1:j.width=P?h:h+c*O,j.height=k?g:g-v*O;break;case 2:j.width=P?h:h+c*O,j.height=k?g:g+v*O;break;case 3:j.width=P?h:h-c*O,j.height=k?g:g+v*O;break}return j},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,v=o.getNodeEdges(s);v.sourceEdges.forEach(function(h){var g=c.find(function(b){return b.id===h.sourceAnchorId});h.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(h){var g=c.find(function(b){return b.id===h.targetAnchorId});h.updateEndPoint({x:g.x,y:g.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.x,b=v.y,w=v.width,O=v.height,S=v.radius,P=v.PCTResizeInfo,A=o.nodeModel,k=A.minWidth,j=A.minHeight,R=A.maxWidth,B=A.maxHeight,G=o.index,H=k===R,Y=j===B,Q=o.getResize({index:G,deltaX:s,deltaY:c,width:w,height:O,PCTResizeInfo:P,pct:1,freezeWidth:H,freezeHeight:Y});if(Q.width<k||Q.width>R||Q.height<j||Q.height>B){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:H?0:Q.deltaX,deltaY:Y?0:Q.deltaY}),o.nodeModel.width=Q.width,o.nodeModel.height=Q.height,o.nodeModel.setProperties({nodeSize:{width:Q.width,height:Q.height}}),o.getNodeEdges(h);var W={x:g,y:b,width:w,height:O,radius:S},I={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:S};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:W,afterNode:I})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.rx,b=v.ry,w=v.x,O=v.y,S=v.PCTResizeInfo,P=o.index,A=o.nodeModel,k=A.minWidth,j=A.minHeight,R=A.maxWidth,B=A.maxHeight,G=k===R,H=j===B,Y=g,Q=b,W=o.getResize({index:P,deltaX:s,deltaY:c,width:Y,height:Q,PCTResizeInfo:S,pct:1/2,freezeWidth:G,freezeHeight:H});if(W.width<k/2||W.width>R/2||W.height<j/2||W.height>B/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:G?0:W.deltaX,deltaY:H?0:W.deltaY}),o.nodeModel.rx=W.width,o.nodeModel.ry=W.height,o.nodeModel.setProperties({nodeSize:{rx:W.width,ry:W.height}}),o.getNodeEdges(h);var I={x:w,y:O},z={rx:W.width,ry:W.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Vp(Vp({},I),{rx:g,ry:b}),afterNode:z})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel;v.id;var h=v.rx,g=v.ry,b=v.x,w=v.y,O=v.PCTResizeInfo,S=o.index,P=o.nodeModel,A=P.minWidth,k=P.minHeight,j=P.maxWidth,R=P.maxHeight,B=A===j,G=k===R,H=h,Y=g,Q=o.getResize({index:S,deltaX:s,deltaY:c,width:H,height:Y,PCTResizeInfo:O,pct:1/2,freezeWidth:B,freezeHeight:G});if(Q.width<A/2||Q.width>j/2||Q.height<k/2||Q.height>R/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:B?0:Q.deltaX,deltaY:G?0:Q.deltaY}),o.nodeModel.rx=Q.width,o.nodeModel.ry=Q.height,o.nodeModel.setProperties({nodeSize:{rx:Q.width,ry:Q.height}});var W={x:b,y:w,rx:h,ry:g},I={rx:Q.width,ry:Q.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:W,afterNode:I})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=o.nodeModel,h=v.id,g=v.modelType,b=v.type,w=Vp({id:h,modelType:g,type:b},s),O=Vp({id:h,modelType:g,type:b},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:w,newNodeSize:O})},o.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,h=o.graphModel.transformModel,g=o.nodeModel.modelType;s=S7(h.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===sv.RECT_NODE||g===sv.HTML_NODE?o.updateRect({deltaX:c,deltaY:v}):g===sv.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:v}):g===sv.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:v})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),v=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,v),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new A7({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],v=0;v<r.length;v++){var h=r[v];h.sourceNodeId===n?s.push(h):r[v].targetNodeId===n&&c.push(h)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Oy("g",{className:"lf-resize-control-"+s},Oy(yE,Vp({className:"lf-node-control"},{x:o,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(pv),M7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ig=globalThis&&globalThis.__assign||function(){return Ig=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ig.apply(this,arguments)},bb=function(e){M7(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,v=o.width,h=o.height,g={minX:s-v/2,minY:c-h/2,maxX:s+v/2,maxY:c+h/2},b=g.minX,w=g.minY,O=g.maxX,S=g.maxY,P=[{x:b,y:w},{x:O,y:w},{x:O,y:S},{x:b,y:S}];return P.map(function(A,k){return Oy(T7,Ig({index:k},A,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Oy(yE,Ig({fill:"none"},v,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Oy("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(pv),C2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),P7=function(e){C2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),k7=function(e){C2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),j2={type:"rect",view:k7,model:P7},I2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){I2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){I2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)};function N7(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,h=v===void 0?"transparent":v,g=e.stroke,b=g===void 0?"#000":g,w=e.points,O=e.className,S=O===void 0?"lf-basic-shape":O,P={fill:h,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:S};return P.points=w.map(function(A){return A.join(",")}).join(" "),cn.h("polygon",cw({},P))}var L2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fw.apply(this,arguments)};(function(e){L2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){L2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(N7,fw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var F2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),R7=function(e){F2(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),D7=function(e){F2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),$2={type:"html",view:D7,model:R7},B2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lg=globalThis&&globalThis.__assign||function(){return Lg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lg.apply(this,arguments)},C7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},j7=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C7(arguments[t]));return e},xA=500,SA=300,I7=-1e4;(function(e){B2(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=xA,n.unfoldedHight=SA,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=xA,this.height=SA,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=I7,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var h=o.childrenLastFoldStatus[s];h!==void 0&&h!==c.isFolded&&c.foldGroup(h)}o.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var v=s.id,h=s.sourceNodeId,g=s.targetNodeId,b=s.startPoint,w=s.endPoint,O=s.type,S=s.text,P=s.getProperties(),A={id:v+"__"+c,sourceNodeId:h,targetNodeId:g,startPoint:b,endPoint:w,type:O,properties:P,text:S==null?void 0:S.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var k=r.graphModel.group.getNodeGroup(g);k||(k=r.graphModel.getNodeModelById(g));var j=r.graphModel.group.getNodeGroup(h);j||(j=r.graphModel.getNodeModelById(h)),n&&s.visible!==!1&&(r.children.has(h)||r.id===h?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(k.id!==r.id||j.id!==r.id)&&r.createVirtualEdge(A),s.visible=!1),!n&&s.visible===!1&&(k&&k.isGroup&&k.isFolded?(A.targetNodeId=k.id,A.endPoint=void 0,r.createVirtualEdge(A)):j&&j.isGroup&&j.isFolded?(A.sourceNodeId=j.id,A.startPoint=void 0,r.createVirtualEdge(A)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=j7(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(j2.model);(function(e){B2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,h=n.properties;if(!h.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),w=o+g+8,O=r+g+8;return cn.h("rect",Lg(Lg({},b),{width:w,height:O,x:s-w/2,y:c-O/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(j2.view);var AA=globalThis&&globalThis.__assign||function(){return AA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},AA.apply(this,arguments)};globalThis&&globalThis.__rest;var L7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var TA=globalThis&&globalThis.__assign||function(){return TA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},TA.apply(this,arguments)};globalThis&&globalThis.__values;var MA=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sy=globalThis&&globalThis.__assign||function(){return Sy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Sy.apply(this,arguments)};function F7(e){var t=function(o){MA(r,o);function r(s,c){var v=this;s.id||(s.id="Flow_"+f7());var h=Sy(Sy(Sy({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=h,v=o.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){MA(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}F7();globalThis&&globalThis.__read;var PA={width:40,height:40},kA={width:40,height:40},NA={width:100,height:80},Fg={width:100,height:80},RA={width:100,height:80},DA={width:100,height:80},CA={width:100,height:80},jA={width:100,height:80},IA={width:100,height:80},LA={width:100,height:80},cl=function(){};cl.ObjTree=function(){return this};cl.ObjTree.VERSION="0.23";cl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;cl.ObjTree.prototype.attr_prefix="-";cl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};cl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(b){var w;b&&b.responseXML&&b.responseXML.documentElement&&(w=s.parseDOM(b.responseXML.documentElement)),c(w,b),v&&v(b)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};cl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};cl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h===3||h===4||h===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};cl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};cl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};cl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};cl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};cl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};cl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var $7=function(e){return new cl.ObjTree().parseXML(e)};function U2(e){return Object.prototype.toString.call(e)}function FA(e){return"  ".repeat(e)}function $g(e){return U2(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=$g(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return $g(t)}):e}function B7(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify($g(e)).replace(/"/g,"'")}return t}var $A=`	
`;function gg(e,t,n){var o=FA(n),r="",s=$A+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+B7(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return gg(g,t,n+1)}).join("");else if(U2(e)==="[object Object]"){var c=Object.keys(e),v="",h=e["-json"]?$A+FA(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=gg(e[g],g,n+1):h+=gg(e[g],g,n+1)}),r+=v+(h!==""?">"+h+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function U7(e){var t="";for(var n in e)t+=gg(e[n],n,0);return t}var V7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),dw=globalThis&&globalThis.__assign||function(){return dw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dw.apply(this,arguments)},BA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},mE=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fv=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},hv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fv(arguments[t]));return e},ll;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(ll||(ll={}));var V2=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],G7=["properties","startPoint","endPoint","pointsList"],Bg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},G2=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},Iu={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,v=t["-id"],h="",g="";try{for(var b=mE(Object.keys(t)),w=b.next();!w.done;w=b.next()){var O=w.value;O.includes("bpmn:")&&(r=Fv(O.split(":"),2),h=r[1],g=(s=t[O])===null||s===void 0?void 0:s["#text"])}}catch(S){n={error:S}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":h,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function W7(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(hv(G7,n||[])),c={in:new Set(hv(Bg.in,(o==null?void 0:o.in)||[])),out:new Set(hv(Bg.out,(o==null?void 0:o.out)||[]))};return Iu=G2(Iu,r),function(v){var h=v.nodes,g=v.edges;function b(w,O){var S,P,A;if((w==null?void 0:w.flag)!==1){var k;if((k=Iu[w.type])&&k.out){var j=k.out(w),R=Object.keys(j);R.length>0&&R.forEach(function(z){w[z]=j[z]})}w!=null&&w.children&&(w.children=w.children.map(function(z){var K=h.find(function(q){return q.id===z})||g.find(function(q){return q.id===z});return K||{}}));var B={};if(typeof w=="string")return w;if(Array.isArray(w))return w.map(function(z){return b(z,"")}).filter(function(z){return z!=null});try{for(var G=mE(Object.entries(w)),H=G.next();!H.done;H=G.next()){var Y=Fv(H.value,2),Q=Y[0],W=Y[1];if(((A=W)===null||A===void 0?void 0:A.flag)===1)return;var I=[O,Q].filter(function(z){return z}).join(".");c.out.has(I)||(typeof W!="object"?Q.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(Q)?B[Q]=W:B["-"+Q]=W:s.has(I)?B["-"+Q]=b(W,I):B[Q]=b(W,I))}}catch(z){S={error:z}}finally{try{H&&!H.done&&(P=G.return)&&P.call(G)}finally{if(S)throw S.error}}return B}}return b(v,"")}}function Ug(e){var t,n,o={};try{for(var r=mE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Fv(s.value,2),v=c[0],h=c[1];v.indexOf("-")===0?o[v.substring(1)]=$g(h):typeof h=="string"?o[v]=h:Object.prototype.toString.call(h)==="[object Object]"?o[v]=Ug(h):Array.isArray(h)?o[v]=h.map(function(g){return Ug(g)}):o[v]=h}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function z7(e,t,n){var o,r=new Map,s=W7(n)(t);s.nodes.forEach(function(v){var h=v["-id"],g=v["-type"],b=v.text,w=v.children,O=BA(v,["-id","-type","text","children"]),S={"-id":h};b!=null&&b["-value"]&&(S["-name"]=b["-value"]),O["-json"]&&(S["-json"]=O["-json"]),O["-properties"]&&Object.assign(S,O["-properties"]),w&&(S.children=w),e[g]||(e[g]=[]),e[g].push(S),r.set(h,S)});var c=s.edges.map(function(v){var h=v["-id"];v["-type"];var g=v["-sourceNodeId"],b=v["-targetNodeId"],w=v.text,O=BA(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),S=r.get(b);S["bpmn:incoming"]||(S["bpmn:incoming"]=[]),S["bpmn:incoming"].push(h);var P={"-id":h,"-sourceRef":g,"-targetRef":b};return w!=null&&w["-value"]&&(P["-name"]=w["-value"]),O["-json"]&&(P["-json"]=O["-json"]),O["-properties"]&&Object.assign(P,O["-properties"]),P});return t.edges.forEach(function(v){var h=v.sourceNodeId,g=v.id,b=r.get(h);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(v){var h={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(A){var k,j=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(B){j[B]&&j[B].forEach(function(G){h[B].add(G)})});var R=(k=e[A["-type"]])===null||k===void 0?void 0:k.findIndex(function(B){return B["-id"]===A["-id"]});R>=0&&e[A["-type"]].splice(R,1),r.delete(A["-id"]),v[A["-type"]]||(v[A["-type"]]=[]),v[A["-type"]].push(j)});var b=h["bpmn:incoming"],w=h["bpmn:outgoing"];w.forEach(function(A){b.has(A)&&g.push(A)});for(var O=function(A){var k=c.findIndex(function(j){return j["-id"]===g[A]});k>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[k]),c.splice(k,1)):A++,S=A},S,P=0;P<g.length;)O(P),P=S;delete v.children}),e[ll.FLOW]=c,e}function H7(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var X7=["bpmn:incoming","bpmn:outgoing"];function Y7(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,h={in:new Set(hv(Bg.in,(v==null?void 0:v.in)||[])),out:new Set(hv(Bg.out,(v==null?void 0:v.out)||[]))};Iu=G2(Iu,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(O,S){S.forEach(function(P){try{Object.keys(O).forEach(function(A){try{P(A)}catch(k){console.error(k)}})}catch(A){console.error(A)}})})(b,[function(O){function S(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(k){var j;k.indexOf("bpmn:")===0&&!X7.includes(k)&&(b[k]||(b[k]=[]),!Array.isArray(b[k])&&(b[k]=[b[k]]),Array.isArray(A[k])?(j=b[k]).push.apply(j,hv(A[k])):b[k].push(A[k]),Array.isArray(A[k])?A[k].forEach(function(R){!k.includes("Flow")&&A["-children"].push(R["-id"])}):!k.includes("Flow")&&A["-children"].push(A[k]["-id"]),delete A[k])})}if(O==="bpmn:subProcess"){var P=b[O];Array.isArray(P)?P.forEach(function(A){O==="bpmn:subProcess"&&S(A)}):S(P)}},function(O){var S=function(A){Object.keys(A).forEach(function(k){var j,R;if(k.includes("bpmn:")){var B={};Iu[k]&&Iu[k].in?(B=(R=(j=Iu[k]).in)===null||R===void 0?void 0:R.call(j,k,ae.cloneDeep(A[k])),delete A[k]):P(A[k]);var G=void 0;(G=Reflect.ownKeys(B)).length>0&&G.forEach(function(H){Reflect.set(A,H,B[H])})}})};function P(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(k){P(k)}):typeof A=="object"&&S(A)}P(b[O])},function(O){if(O.indexOf("bpmn:")===0){var S=b[O];if(O==="bpmn:sequenceFlow"){var P=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=K7(S,P)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var k=b[O],j=function(R){var B=R["-attachedToRef"],G=r.get(B);G["-boundaryEvents"]||(G["-boundaryEvents"]=[]),G["-boundaryEvents"].push(R["-id"])};Array.isArray(k)?k.forEach(function(R){j(R)}):j(k)}n=n.concat(q7(S,A,O))}}}])}var w=function(O,S,P){Object.keys(O).forEach(function(A){var k=P?P+"."+A:A;S.has(k)?delete O[A]:typeof O[A]=="object"&&w(O[A],S,k)})};return n.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,k=O.type;A[k]&&(O.type=A[k])}w(O,h.in,"")}),o.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,k=O.type;A[k]&&(O.type=A[k])}w(O,h.in,"")}),{nodes:n,edges:o}}function q7(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=UA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=UA(r,n,e);o.push(s)}return o}function UA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=Dl.shapeConfigMap.get(t);v&&(o+=v.width/2,r+=v.height/2);var h={};Object.entries(n).forEach(function(O){var S=Fv(O,2),P=S[0],A=S[1];V2.includes(P)||(h[P]=A)}),h=Ug(h);var g;if(c&&(g={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var w={id:e["-bpmnElement"],type:t,x:o,y:r,properties:h};return s&&(w.children=s),g&&(w.text=g),w}function K7(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(VA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(VA(o,e))}return n}function VA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Fv(g,2),w=b[0],O=b[1];V2.includes(w)||(c[w]=O)}),c=Ug(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),h={id:t["-id"],type:ll.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var Dl=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,v,h=dw({},n.processAttributes);z7(h,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":h["-id"]};H7(g,r);var b=n.definitionAttributes;b["bpmn:process"]=h,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var w={"bpmn:definitions":b};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var O=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,S=function(P){Array.isArray(P)&&P.forEach(function(A){return S(A)}),typeof P=="object"&&Object.keys(P).forEach(function(A){var k;(k=O[A])?(P[k]=ae.cloneDeep(P[A]),delete P[A],S(P[k])):S(P[A])})};S(w)}return w},this.adapterIn=function(r,s){if(r)return Y7(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(ll.START,{width:PA.width,height:PA.height});Dl.shapeConfigMap.set(ll.END,{width:kA.width,height:kA.height});Dl.shapeConfigMap.set(ll.INTERMEDIATE_CATCH,{width:Fg.width,height:Fg.height});Dl.shapeConfigMap.set(ll.INTERMEDIATE_THROW,{width:Fg.width,height:Fg.height});Dl.shapeConfigMap.set(ll.BOUNDARY,{width:NA.width,height:NA.height});Dl.shapeConfigMap.set(ll.PARALLEL_GATEWAY,{width:RA.width,height:RA.height});Dl.shapeConfigMap.set(ll.INCLUSIVE_GATEWAY,{width:DA.width,height:DA.height});Dl.shapeConfigMap.set(ll.EXCLUSIVE_GATEWAY,{width:CA.width,height:CA.height});Dl.shapeConfigMap.set(ll.SYSTEM,{width:jA.width,height:jA.height});Dl.shapeConfigMap.set(ll.USER,{width:IA.width,height:IA.height});Dl.shapeConfigMap.set(ll.SUBPROCESS,{width:LA.width,height:LA.height});(function(e){V7(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var v=$7(c);return o.adapterIn(v,o.props)},o.adapterXmlOut=function(c){var v=o.adapterOut(c,o.props);return U7(v)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(Dl);var GA=globalThis&&globalThis.__assign||function(){return GA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},GA.apply(this,arguments)};globalThis&&globalThis.__read;var WA;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(WA||(WA={}));var Z7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var J7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var Q7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var W2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),cv=globalThis&&globalThis.__assign||function(){return cv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cv.apply(this,arguments)},Ay=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},eW={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function tW(e){for(var t=e,n=1;n<t.length-1;){var o=Ay(t[n-1],2),r=o[0],s=o[1],c=Ay(t[n],2),v=c[0],h=c[1],g=Ay(t[n+1],2),b=g[0],w=g[1];r===v&&v===b||s===h&&h===w?t.splice(n,1):n++}return t}function nW(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function rW(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,h=""+s+c,g=eW[h]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var w=Ay(nW(t,h,g,v),2),O=w[0],S=w[1];O&&S&&(b+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+S[0]+" "+S[1],r=Ay(S,2),t[0]=r[0],t[1]=r[1])}return b}function oW(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=rW(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){W2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,h=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=tW(o.split(" ").map(function(S){return S.split(",").map(function(P){return+P})})),w=oW(b,v),O=cv(cv(cv({style:r?g:{}},h),s),{fill:"none"});return cn.h("path",cv({d:w},O))},t})(cn.PolylineEdge);(function(e){W2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var iW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var zA=globalThis&&globalThis.__assign||function(){return zA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zA.apply(this,arguments)},HA=globalThis&&globalThis.__assign||function(){return HA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HA.apply(this,arguments)},aW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let _b=!1;const Vg=Lw({});function z2(e,t,n,o,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),_b&&(Vg[e]=CI(kr({render:()=>Ov(jI,{to:n},[Ov(t,s(o,r))]),provide:()=>({getNode:()=>o,getGraph:()=>r})})))}function H2(e){_b&&delete Vg[e]}function Gg(){return _b}function lW(){return _b=!0,kr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Vg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Vg[n])}),Ov(Yo,{},t.map(n=>Ov(n)))}}})}class gi extends $2.view{constructor(n,o){super(n);Ea(this,"isMounted");Ea(this,"r");Ea(this,"component");Ea(this,"app");Ea(this,"root");Ea(this,"VueNode");Ea(this,"up_node_field_dict");if(this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const s=n.graphModel.nodes.filter(c=>c.type===n.model.type);s.length-1>0&&r(s.length-1)}function r(s){var h;const c=s,v=n.model.properties.stepName+c;(h=n.graphModel.nodes)!=null&&h.some(g=>g.properties.stepName===v.trim())?r(c+1):n.model.properties.stepName=v}n.model.properties.config=II[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var o,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:Zt("views.applicationWorkflow.variable.global"),type:"global",children:((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Gg())z2(this.targetId(),this.component,n,o,r);else{this.r=Ov(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=FM({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r}}}),this.app.use(LI,{locale:FI}),this.app.use($I),this.app.use(BI),this.app.use(LM);for(const[c,v]of Object.entries(UI))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Gg()&&H2(this.targetId()),this.unmountVueComponent()}}class bi extends $2.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=LM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const h=c[v];if(h.id===s)return!0;if(n(h.id,s))return!0}return!1},o={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==Xo.Base&&(this.type!==Xo.Start&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let uW=class extends gi{constructor(t){super(t,XG)}};const sW={type:"ai-chat-node",model:bi,view:uW},cW=Object.freeze(Object.defineProperty({__proto__:null,default:sW},Symbol.toStringTag,{value:"Module"})),fW={class:"title-decoration-1 mb-8"},dW={class:"flex align-center"},pW={class:"mr-4"},hW=kr({__name:"index",props:{nodeModel:{}},setup(e){const t={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},{params:{id:n}}=Rl.config.globalProperties.$route,o=mt(),r=lo({get:()=>(v.nodeModel.properties.nodeData||He.set(v.nodeModel.properties,"nodeData",t),v.nodeModel.properties.nodeData),set:g=>{He.set(v.nodeModel.properties,"nodeData",g)}});function s(g,b){const w=`${g}_list`;b?v.nodeModel.properties.nodeData[w]||He.set(v.nodeModel.properties.nodeData,w,[]):delete v.nodeModel.properties.nodeData[w]}const c=()=>{if(!v.nodeModel.properties.nodeData.application_id){He.set(v.nodeModel.properties,"status",500);return}fa.getApplicationById(n,v.nodeModel.properties.nodeData.application_id).then(g=>{const b=v.nodeModel.properties.nodeData.api_input_field_list,w=v.nodeModel.properties.nodeData.user_input_field_list;if(hg(g.data.type)){const O=g.data.workFlow.nodes[0].properties.nodeData,S=g.data.workFlow.nodes[0].properties.api_input_field_list,P=g.data.workFlow.nodes[0].properties.user_input_field_list,A=S.map(B=>{const G=b.find(H=>H.variable==B.variable);return G?{...B,value:G.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});He.set(v.nodeModel.properties.nodeData,"api_input_field_list",A);const k=P.map(B=>{const G=w.find(H=>H.field==B.field);return G?{...B,value:G.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});He.set(v.nodeModel.properties.nodeData,"user_input_field_list",k);const j=O.file_upload_enable,R=O.file_upload_setting;j?(s("document",R.document),s("image",R.image),s("audio",R.audio)):["documentList","imageList","audioList"].forEach(B=>{delete v.nodeModel.properties.nodeData[B]}),He.set(v.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{})},v=e,h=()=>{var g;return(g=o.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:v.nodeModel,errMessage:b}))};return bo(()=>{c(),He.set(v.nodeModel,"validate",h)}),(g,b)=>{const w=te("el-form-item"),O=te("AppIcon"),S=te("el-tooltip"),P=te("el-switch"),A=te("el-form"),k=te("el-card");return Ve(),_t(mi,{nodeModel:g.nodeModel},{default:F(()=>[fe("h5",fW,$e(g.$t("views.applicationWorkflow.nodeSetting")),1),C(k,{shadow:"never",class:"card-never"},{default:F(()=>[C(A,{onSubmit:b[6]||(b[6]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:o},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:F(()=>[C(Qr,{ref_key:"applicationNodeFormRef",ref:o,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=j=>r.value.questionReferenceAddress=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("documentList")||"documentList"in r.value?(Ve(),_t(w,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:F(()=>[C(Qr,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=j=>r.value.documentList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):tr("",!0),r.value.hasOwnProperty("imageList")||"imageList"in r.value?(Ve(),_t(w,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:F(()=>[C(Qr,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=j=>r.value.imageList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):tr("",!0),r.value.hasOwnProperty("audioList")||"audioList"in r.value?(Ve(),_t(w,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:F(()=>[C(Qr,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=j=>r.value.audioList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):tr("",!0),(Ve(!0),Dn(Yo,null,Ci(r.value.api_input_field_list,(j,R)=>(Ve(),Dn("div",{key:"api-input-"+R},[C(w,{label:j.variable,prop:"api_input_field_list."+R+".value",rules:[{required:j.is_required,message:`${g.$t("common.inputPlaceholder")}${j.variable}`,trigger:"blur"}]},{default:F(()=>[C(Qr,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[R].value,"onUpdate:modelValue":B=>r.value.api_input_field_list[R].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Ve(!0),Dn(Yo,null,Ci(r.value.user_input_field_list,(j,R)=>(Ve(),Dn("div",{key:"user-input-"+R},[C(w,{label:j.label,prop:"user_input_field_list."+R+".value",rules:[{required:j.required,message:`${g.$t("common.inputPlaceholder")}${j.label}`,trigger:"blur"}]},{default:F(()=>[C(Qr,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[R].value,"onUpdate:modelValue":B=>r.value.user_input_field_list[R].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),C(w,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",dW,[fe("div",pW,[fe("span",null,[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[7]||(b[7]=fe("span",{class:"danger"},"*",-1))])]),C(S,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(P,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=j=>r.value.isResult=j)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class vW extends gi{constructor(t){super(t,hW)}}const yW={type:"application-node",model:bi,view:vW},mW=Object.freeze(Object.defineProperty({__proto__:null,default:yW},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(o){gW(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bg=function(t){return typeof t}:bg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function gW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tf(){return Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tf.apply(this,arguments)}function bW(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function _W(e,t){if(e==null)return{};var n=bW(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var wW="1.15.6";function xf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Nf=xf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),em=xf(/Edge/i),YA=xf(/firefox/i),Ty=xf(/safari/i)&&!xf(/chrome/i)&&!xf(/android/i),gE=xf(/iP(ad|od|hone)/i),X2=xf(/chrome/i)&&xf(/android/i),Y2={capture:!1,passive:!1};function Zr(e,t,n){e.addEventListener(t,n,!Nf&&Y2)}function Xr(e,t,n){e.removeEventListener(t,n,!Nf&&Y2)}function Wg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function q2(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function vs(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Wg(e,t):Wg(e,t))||o&&e===n)return e;if(e===n)break}while(e=q2(e))}return null}var qA=/\s+/g;function iu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(qA," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(qA," ")}}function br(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function vv(e,t){var n="";if(typeof e=="string")n=e;else do{var o=br(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function K2(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function sc(){var e=document.scrollingElement;return e||document.documentElement}function Yi(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,v,h,g,b,w;if(e!==window&&e.parentNode&&e!==sc()?(s=e.getBoundingClientRect(),c=s.top,v=s.left,h=s.bottom,g=s.right,b=s.height,w=s.width):(c=0,v=0,h=window.innerHeight,g=window.innerWidth,b=window.innerHeight,w=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Nf))do if(r&&r.getBoundingClientRect&&(br(r,"transform")!=="none"||n&&br(r,"position")!=="static")){var O=r.getBoundingClientRect();c-=O.top+parseInt(br(r,"border-top-width")),v-=O.left+parseInt(br(r,"border-left-width")),h=c+s.height,g=v+s.width;break}while(r=r.parentNode);if(o&&e!==window){var S=vv(r||e),P=S&&S.a,A=S&&S.d;S&&(c/=A,v/=P,w/=P,b/=A,h=c+b,g=v+w)}return{top:c,left:v,bottom:h,right:g,width:w,height:b}}}function KA(e,t,n){for(var o=Dd(e,!0),r=Yi(e)[t];o;){var s=Yi(o)[n],c=void 0;if(n==="top"||n==="left"?c=r>=s:c=r<=s,!c)return o;if(o===sc())break;o=Dd(o,!1)}return!1}function Sv(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==vr.ghost&&(o||c[s]!==vr.dragged)&&vs(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function bE(e,t){for(var n=e.lastElementChild;n&&(n===vr.ghost||br(n,"display")==="none"||t&&!Wg(n,t));)n=n.previousElementSibling;return n||null}function ju(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==vr.clone&&(!t||Wg(e,t))&&n++;return n}function ZA(e){var t=0,n=0,o=sc();if(e)do{var r=vv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function EW(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Dd(e,t){if(!e||!e.getBoundingClientRect)return sc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=br(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return sc();if(o||t)return n;o=!0}}while(n=n.parentNode);return sc()}function OW(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function O1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var My;function Z2(e,t){return function(){if(!My){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),My=setTimeout(function(){My=void 0},t)}}}function xW(){clearTimeout(My),My=void 0}function J2(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Q2(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function ek(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,v,h;if(!(!vs(r,t.draggable,e,!1)||r.animated||r===n)){var g=Yi(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,g.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,g.top),o.right=Math.max((v=o.right)!==null&&v!==void 0?v:-1/0,g.right),o.bottom=Math.max((h=o.bottom)!==null&&h!==void 0?h:-1/0,g.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var kl="Sortable"+new Date().getTime();function SW(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(br(r,"display")==="none"||r===vr.ghost)){e.push({target:r,rect:Yi(r)});var s=fc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=vv(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(EW(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var s=!1,c=0;e.forEach(function(v){var h=0,g=v.target,b=g.fromRect,w=Yi(g),O=g.prevFromRect,S=g.prevToRect,P=v.rect,A=vv(g,!0);A&&(w.top-=A.f,w.left-=A.e),g.toRect=w,g.thisAnimationDuration&&O1(O,w)&&!O1(b,w)&&(P.top-w.top)/(P.left-w.left)===(b.top-w.top)/(b.left-w.left)&&(h=TW(P,O,S,r.options)),O1(w,b)||(g.prevFromRect=b,g.prevToRect=w,h||(h=r.options.animation),r.animate(g,P,w,h)),h&&(s=!0,c=Math.max(c,h),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},h),g.thisAnimationDuration=h)}),clearTimeout(t),s?t=setTimeout(function(){typeof o=="function"&&o()},c):typeof o=="function"&&o(),e=[]},animate:function(o,r,s,c){if(c){br(o,"transition",""),br(o,"transform","");var v=vv(this.el),h=v&&v.a,g=v&&v.d,b=(r.left-s.left)/(h||1),w=(r.top-s.top)/(g||1);o.animatingX=!!b,o.animatingY=!!w,br(o,"transform","translate3d("+b+"px,"+w+"px,0)"),this.forRepaintDummy=AW(o),br(o,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),br(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){br(o,"transition",""),br(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},c)}}}}function AW(e){return e.offsetWidth}function TW(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Zh=[],x1={initializeByDefault:!0},tm={mount:function(t){for(var n in x1)x1.hasOwnProperty(n)&&!(n in t)&&(t[n]=x1[n]);Zh.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Zh.push(t)},pluginEvent:function(t,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=t+"Global";Zh.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](fc({sortable:n},o)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](fc({sortable:n},o)))})},initializePlugins:function(t,n,o,r){Zh.forEach(function(v){var h=v.pluginName;if(!(!t.options[h]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[h]=g,Tf(o,g.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var o={};return Zh.forEach(function(r){typeof r.eventProperties=="function"&&Tf(o,r.eventProperties.call(n[r.pluginName],t))}),o},modifyOption:function(t,n,o){var r;return Zh.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],o))}),r}};function MW(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,v=e.fromEl,h=e.oldIndex,g=e.newIndex,b=e.oldDraggableIndex,w=e.newDraggableIndex,O=e.originalEvent,S=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[kl],!!t){var A,k=t.options,j="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Nf&&!em?A=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(o,!0,!0)),A.to=c||n,A.from=v||n,A.item=r||n,A.clone=s,A.oldIndex=h,A.newIndex=g,A.oldDraggableIndex=b,A.newDraggableIndex=w,A.originalEvent=O,A.pullMode=S?S.lastPutMode:void 0;var R=fc(fc({},P),tm.getEventProperties(o,t));for(var B in R)A[B]=R[B];n&&n.dispatchEvent(A),k[j]&&k[j].call(t,A)}}var PW=["evt"],Pl=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,s=_W(o,PW);tm.pluginEvent.bind(vr)(t,n,fc({dragEl:vn,parentEl:Ai,ghostEl:Ar,rootEl:ci,nextEl:$p,lastDownEl:_g,cloneEl:yi,cloneHidden:Nd,dragStarted:gy,putSortable:xa,activeSortable:vr.active,originalEvent:r,oldIndex:fv,oldDraggableIndex:Py,newIndex:au,newDraggableIndex:kd,hideGhostForTarget:ok,unhideGhostForTarget:ik,cloneNowHidden:function(){Nd=!0},cloneNowShown:function(){Nd=!1},dispatchSortableEvent:function(v){al({sortable:n,name:v,originalEvent:r})}},s))};function al(e){MW(fc({putSortable:xa,cloneEl:yi,targetEl:vn,rootEl:ci,oldIndex:fv,oldDraggableIndex:Py,newIndex:au,newDraggableIndex:kd},e))}var vn,Ai,Ar,ci,$p,_g,yi,Nd,fv,au,Py,kd,ag,xa,nv=!1,zg=!1,Hg=[],Ip,hs,S1,A1,JA,QA,gy,Jh,ky,Ny=!1,lg=!1,wg,$a,T1=[],pw=!1,Xg=[],wb=typeof document<"u",ug=gE,eT=em||Nf?"cssFloat":"float",kW=wb&&!X2&&!gE&&"draggable"in document.createElement("div"),tk=function(){if(wb){if(Nf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),nk=function(t,n){var o=br(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Sv(t,0,n),c=Sv(t,1,n),v=s&&br(s),h=c&&br(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Yi(s).width,b=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+Yi(c).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&v.float&&v.float!=="none"){var w=v.float==="left"?"left":"right";return c&&(h.clear==="both"||h.clear===w)?"vertical":"horizontal"}return s&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&o[eT]==="none"||c&&o[eT]==="none"&&g+b>r)?"vertical":"horizontal"},NW=function(t,n,o){var r=o?t.left:t.top,s=o?t.right:t.bottom,c=o?t.width:t.height,v=o?n.left:n.top,h=o?n.right:n.bottom,g=o?n.width:n.height;return r===v||s===h||r+c/2===v+g/2},RW=function(t,n){var o;return Hg.some(function(r){var s=r[kl].options.emptyInsertThreshold;if(!(!s||bE(r))){var c=Yi(r),v=t>=c.left-s&&t<=c.right+s,h=n>=c.top-s&&n<=c.bottom+s;if(v&&h)return o=r}}),o},rk=function(t){function n(s,c){return function(v,h,g,b){var w=v.options.group.name&&h.options.group.name&&v.options.group.name===h.options.group.name;if(s==null&&(c||w))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(v,h,g,b),c)(v,h,g,b);var O=(c?v:h).options.group.name;return s===!0||typeof s=="string"&&s===O||s.join&&s.indexOf(O)>-1}}var o={},r=t.group;(!r||bg(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,t.group=o},ok=function(){!tk&&Ar&&br(Ar,"display","none")},ik=function(){!tk&&Ar&&br(Ar,"display","")};wb&&!X2&&document.addEventListener("click",function(e){if(zg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),zg=!1,!1},!0);var Lp=function(t){if(vn){t=t.touches?t.touches[0]:t;var n=RW(t.clientX,t.clientY);if(n){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[kl]._onDragOver(o)}}},DW=function(t){vn&&vn.parentNode[kl]._isOutsideThisEl(t.target)};function vr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Tf({},t),e[kl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nk(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:vr.supportPointer!==!1&&"PointerEvent"in window&&(!Ty||gE),emptyInsertThreshold:5};tm.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);rk(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:kW,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Zr(e,"pointerdown",this._onTapStart):(Zr(e,"mousedown",this._onTapStart),Zr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Zr(e,"dragover",this),Zr(e,"dragenter",this)),Hg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Tf(this,SW())}vr.prototype={constructor:vr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Jh=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,vn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,r=this.options,s=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,h=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||h,b=r.filter;if(UW(o),!vn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Ty&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=vs(h,r.draggable,o,!1),!(h&&h.animated)&&_g!==h)){if(fv=ju(h),Py=ju(h,r.draggable),typeof b=="function"){if(b.call(this,t,h,this)){al({sortable:n,rootEl:g,name:"filter",targetEl:h,toEl:o,fromEl:o}),Pl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(w){if(w=vs(g,w.trim(),o,!1),w)return al({sortable:n,rootEl:w,name:"filter",targetEl:h,fromEl:o,toEl:o}),Pl("filter",n,{evt:t}),!0}),b)){s&&t.preventDefault();return}r.handle&&!vs(g,r.handle,o,!1)||this._prepareDragStart(t,v,h)}}},_prepareDragStart:function(t,n,o){var r=this,s=r.el,c=r.options,v=s.ownerDocument,h;if(o&&!vn&&o.parentNode===s){var g=Yi(o);if(ci=s,vn=o,Ai=vn.parentNode,$p=vn.nextSibling,_g=o,ag=c.group,vr.dragged=vn,Ip={target:vn,clientX:(n||t).clientX,clientY:(n||t).clientY},JA=Ip.clientX-g.left,QA=Ip.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,vn.style["will-change"]="all",h=function(){if(Pl("delayEnded",r,{evt:t}),vr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!YA&&r.nativeDraggable&&(vn.draggable=!0),r._triggerDragStart(t,n),al({sortable:r,name:"choose",originalEvent:t}),iu(vn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(b){K2(vn,b.trim(),M1)}),Zr(v,"dragover",Lp),Zr(v,"mousemove",Lp),Zr(v,"touchmove",Lp),c.supportPointer?(Zr(v,"pointerup",r._onDrop),!this.nativeDraggable&&Zr(v,"pointercancel",r._onDrop)):(Zr(v,"mouseup",r._onDrop),Zr(v,"touchend",r._onDrop),Zr(v,"touchcancel",r._onDrop)),YA&&this.nativeDraggable&&(this.options.touchStartThreshold=4,vn.draggable=!0),Pl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(em||Nf))){if(vr.eventCanceled){this._onDrop();return}c.supportPointer?(Zr(v,"pointerup",r._disableDelayedDrag),Zr(v,"pointercancel",r._disableDelayedDrag)):(Zr(v,"mouseup",r._disableDelayedDrag),Zr(v,"touchend",r._disableDelayedDrag),Zr(v,"touchcancel",r._disableDelayedDrag)),Zr(v,"mousemove",r._delayedDragTouchMoveHandler),Zr(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&Zr(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(h,c.delay)}else h()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){vn&&M1(vn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Xr(t,"mouseup",this._disableDelayedDrag),Xr(t,"touchend",this._disableDelayedDrag),Xr(t,"touchcancel",this._disableDelayedDrag),Xr(t,"pointerup",this._disableDelayedDrag),Xr(t,"pointercancel",this._disableDelayedDrag),Xr(t,"mousemove",this._delayedDragTouchMoveHandler),Xr(t,"touchmove",this._delayedDragTouchMoveHandler),Xr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Zr(document,"pointermove",this._onTouchMove):n?Zr(document,"touchmove",this._onTouchMove):Zr(document,"mousemove",this._onTouchMove):(Zr(vn,"dragend",this),Zr(ci,"dragstart",this._onDragStart));try{document.selection?Eg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(nv=!1,ci&&vn){Pl("dragStarted",this,{evt:n}),this.nativeDraggable&&Zr(document,"dragover",DW);var o=this.options;!t&&iu(vn,o.dragClass,!1),iu(vn,o.ghostClass,!0),vr.active=this,t&&this._appendGhost(),al({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hs){this._lastX=hs.clientX,this._lastY=hs.clientY,ok();for(var t=document.elementFromPoint(hs.clientX,hs.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(hs.clientX,hs.clientY),t!==n);)n=t;if(vn.parentNode[kl]._isOutsideThisEl(t),n)do{if(n[kl]){var o=void 0;if(o=n[kl]._onDragOver({clientX:hs.clientX,clientY:hs.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=q2(n));ik()}},_onTouchMove:function(t){if(Ip){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Ar&&vv(Ar,!0),v=Ar&&c&&c.a,h=Ar&&c&&c.d,g=ug&&$a&&ZA($a),b=(s.clientX-Ip.clientX+r.x)/(v||1)+(g?g[0]-T1[0]:0)/(v||1),w=(s.clientY-Ip.clientY+r.y)/(h||1)+(g?g[1]-T1[1]:0)/(h||1);if(!vr.active&&!nv){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Ar){c?(c.e+=b-(S1||0),c.f+=w-(A1||0)):c={a:1,b:0,c:0,d:1,e:b,f:w};var O="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");br(Ar,"webkitTransform",O),br(Ar,"mozTransform",O),br(Ar,"msTransform",O),br(Ar,"transform",O),S1=b,A1=w,hs=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ar){var t=this.options.fallbackOnBody?document.body:ci,n=Yi(vn,!0,ug,!0,t),o=this.options;if(ug){for($a=t;br($a,"position")==="static"&&br($a,"transform")==="none"&&$a!==document;)$a=$a.parentNode;$a!==document.body&&$a!==document.documentElement?($a===document&&($a=sc()),n.top+=$a.scrollTop,n.left+=$a.scrollLeft):$a=sc(),T1=ZA($a)}Ar=vn.cloneNode(!0),iu(Ar,o.ghostClass,!1),iu(Ar,o.fallbackClass,!0),iu(Ar,o.dragClass,!0),br(Ar,"transition",""),br(Ar,"transform",""),br(Ar,"box-sizing","border-box"),br(Ar,"margin",0),br(Ar,"top",n.top),br(Ar,"left",n.left),br(Ar,"width",n.width),br(Ar,"height",n.height),br(Ar,"opacity","0.8"),br(Ar,"position",ug?"absolute":"fixed"),br(Ar,"zIndex","100000"),br(Ar,"pointerEvents","none"),vr.ghost=Ar,t.appendChild(Ar),br(Ar,"transform-origin",JA/parseInt(Ar.style.width)*100+"% "+QA/parseInt(Ar.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,r=t.dataTransfer,s=o.options;if(Pl("dragStart",this,{evt:t}),vr.eventCanceled){this._onDrop();return}Pl("setupClone",this),vr.eventCanceled||(yi=Q2(vn),yi.removeAttribute("id"),yi.draggable=!1,yi.style["will-change"]="",this._hideClone(),iu(yi,this.options.chosenClass,!1),vr.clone=yi),o.cloneId=Eg(function(){Pl("clone",o),!vr.eventCanceled&&(o.options.removeCloneOnHide||ci.insertBefore(yi,vn),o._hideClone(),al({sortable:o,name:"clone"}))}),!n&&iu(vn,s.dragClass,!0),n?(zg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Xr(document,"mouseup",o._onDrop),Xr(document,"touchend",o._onDrop),Xr(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,vn)),Zr(document,"drop",o),br(vn,"transform","translateZ(0)")),nv=!0,o._dragStartId=Eg(o._dragStarted.bind(o,n,t)),Zr(document,"selectstart",o),gy=!0,window.getSelection().removeAllRanges(),Ty&&br(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,r,s,c,v=this.options,h=v.group,g=vr.active,b=ag===h,w=v.sort,O=xa||g,S,P=this,A=!1;if(pw)return;function k(Pe,le){Pl(Pe,P,fc({evt:t,isOwner:b,axis:S?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:w,fromSortable:O,target:o,completed:R,onMove:function(Me,ze){return sg(ci,n,vn,r,Me,Yi(Me),t,ze)},changed:B},le))}function j(){k("dragOverAnimationCapture"),P.captureAnimationState(),P!==O&&O.captureAnimationState()}function R(Pe){return k("dragOverCompleted",{insertion:Pe}),Pe&&(b?g._hideClone():g._showClone(P),P!==O&&(iu(vn,xa?xa.options.ghostClass:g.options.ghostClass,!1),iu(vn,v.ghostClass,!0)),xa!==P&&P!==vr.active?xa=P:P===vr.active&&xa&&(xa=null),O===P&&(P._ignoreWhileAnimating=o),P.animateAll(function(){k("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(o===vn&&!vn.animated||o===n&&!o.animated)&&(Jh=null),!v.dragoverBubble&&!t.rootEl&&o!==document&&(vn.parentNode[kl]._isOutsideThisEl(t.target),!Pe&&Lp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),A=!0}function B(){au=ju(vn),kd=ju(vn,v.draggable),al({sortable:P,name:"change",toEl:n,newIndex:au,newDraggableIndex:kd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=vs(o,v.draggable,n,!0),k("dragOver"),vr.eventCanceled)return A;if(vn.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||P._ignoreWhileAnimating===o)return R(!1);if(zg=!1,g&&!v.disabled&&(b?w||(c=Ai!==ci):xa===this||(this.lastPutMode=ag.checkPull(this,g,vn,t))&&h.checkPut(this,g,vn,t))){if(S=this._getDirection(t,o)==="vertical",r=Yi(vn),k("dragOverValid"),vr.eventCanceled)return A;if(c)return Ai=ci,j(),this._hideClone(),k("revert"),vr.eventCanceled||($p?ci.insertBefore(vn,$p):ci.appendChild(vn)),R(!0);var G=bE(n,v.draggable);if(!G||LW(t,S,this)&&!G.animated){if(G===vn)return R(!1);if(G&&n===t.target&&(o=G),o&&(s=Yi(o)),sg(ci,n,vn,r,o,s,t,!!o)!==!1)return j(),G&&G.nextSibling?n.insertBefore(vn,G.nextSibling):n.appendChild(vn),Ai=n,B(),R(!0)}else if(G&&IW(t,S,this)){var H=Sv(n,0,v,!0);if(H===vn)return R(!1);if(o=H,s=Yi(o),sg(ci,n,vn,r,o,s,t,!1)!==!1)return j(),n.insertBefore(vn,H),Ai=n,B(),R(!0)}else if(o.parentNode===n){s=Yi(o);var Y=0,Q,W=vn.parentNode!==n,I=!NW(vn.animated&&vn.toRect||r,o.animated&&o.toRect||s,S),z=S?"top":"left",K=KA(o,"top","top")||KA(vn,"top","top"),q=K?K.scrollTop:void 0;Jh!==o&&(Q=s[z],Ny=!1,lg=!I&&v.invertSwap||W),Y=FW(t,o,s,S,I?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,lg,Jh===o);var ce;if(Y!==0){var Ne=ju(vn);do Ne-=Y,ce=Ai.children[Ne];while(ce&&(br(ce,"display")==="none"||ce===Ar))}if(Y===0||ce===o)return R(!1);Jh=o,ky=Y;var Oe=o.nextElementSibling,Xe=!1;Xe=Y===1;var Ie=sg(ci,n,vn,r,o,s,t,Xe);if(Ie!==!1)return(Ie===1||Ie===-1)&&(Xe=Ie===1),pw=!0,setTimeout(jW,30),j(),Xe&&!Oe?n.appendChild(vn):o.parentNode.insertBefore(vn,Xe?Oe:o),K&&J2(K,0,q-K.scrollTop),Ai=vn.parentNode,Q!==void 0&&!lg&&(wg=Math.abs(Q-Yi(o)[z])),B(),R(!0)}if(n.contains(vn))return R(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Xr(document,"mousemove",this._onTouchMove),Xr(document,"touchmove",this._onTouchMove),Xr(document,"pointermove",this._onTouchMove),Xr(document,"dragover",Lp),Xr(document,"mousemove",Lp),Xr(document,"touchmove",Lp)},_offUpEvents:function(){var t=this.el.ownerDocument;Xr(t,"mouseup",this._onDrop),Xr(t,"touchend",this._onDrop),Xr(t,"pointerup",this._onDrop),Xr(t,"pointercancel",this._onDrop),Xr(t,"touchcancel",this._onDrop),Xr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(au=ju(vn),kd=ju(vn,o.draggable),Pl("drop",this,{evt:t}),Ai=vn&&vn.parentNode,au=ju(vn),kd=ju(vn,o.draggable),vr.eventCanceled){this._nulling();return}nv=!1,lg=!1,Ny=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hw(this.cloneId),hw(this._dragStartId),this.nativeDraggable&&(Xr(document,"drop",this),Xr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ty&&br(document.body,"user-select",""),br(vn,"transform",""),t&&(gy&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Ar&&Ar.parentNode&&Ar.parentNode.removeChild(Ar),(ci===Ai||xa&&xa.lastPutMode!=="clone")&&yi&&yi.parentNode&&yi.parentNode.removeChild(yi),vn&&(this.nativeDraggable&&Xr(vn,"dragend",this),M1(vn),vn.style["will-change"]="",gy&&!nv&&iu(vn,xa?xa.options.ghostClass:this.options.ghostClass,!1),iu(vn,this.options.chosenClass,!1),al({sortable:this,name:"unchoose",toEl:Ai,newIndex:null,newDraggableIndex:null,originalEvent:t}),ci!==Ai?(au>=0&&(al({rootEl:Ai,name:"add",toEl:Ai,fromEl:ci,originalEvent:t}),al({sortable:this,name:"remove",toEl:Ai,originalEvent:t}),al({rootEl:Ai,name:"sort",toEl:Ai,fromEl:ci,originalEvent:t}),al({sortable:this,name:"sort",toEl:Ai,originalEvent:t})),xa&&xa.save()):au!==fv&&au>=0&&(al({sortable:this,name:"update",toEl:Ai,originalEvent:t}),al({sortable:this,name:"sort",toEl:Ai,originalEvent:t})),vr.active&&((au==null||au===-1)&&(au=fv,kd=Py),al({sortable:this,name:"end",toEl:Ai,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Pl("nulling",this),ci=vn=Ai=Ar=$p=yi=_g=Nd=Ip=hs=gy=au=kd=fv=Py=Jh=ky=xa=ag=vr.dragged=vr.ghost=vr.clone=vr.active=null,Xg.forEach(function(t){t.checked=!0}),Xg.length=S1=A1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":vn&&(this._onDragOver(t),CW(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,r=0,s=o.length,c=this.options;r<s;r++)n=o[r],vs(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||BW(n));return t},sort:function(t,n){var o={},r=this.el;this.toArray().forEach(function(s,c){var v=r.children[c];vs(v,this.options.draggable,r,!1)&&(o[s]=v)},this),n&&this.captureAnimationState(),t.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return vs(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var r=tm.modifyOption(this,t,n);typeof r<"u"?o[t]=r:o[t]=n,t==="group"&&rk(o)},destroy:function(){Pl("destroy",this);var t=this.el;t[kl]=null,Xr(t,"mousedown",this._onTapStart),Xr(t,"touchstart",this._onTapStart),Xr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Xr(t,"dragover",this),Xr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Hg.splice(Hg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Nd){if(Pl("hideClone",this),vr.eventCanceled)return;br(yi,"display","none"),this.options.removeCloneOnHide&&yi.parentNode&&yi.parentNode.removeChild(yi),Nd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Nd){if(Pl("showClone",this),vr.eventCanceled)return;vn.parentNode==ci&&!this.options.group.revertClone?ci.insertBefore(yi,vn):$p?ci.insertBefore(yi,$p):ci.appendChild(yi),this.options.group.revertClone&&this.animate(vn,yi),br(yi,"display",""),Nd=!1}}};function CW(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function sg(e,t,n,o,r,s,c,v){var h,g=e[kl],b=g.options.onMove,w;return window.CustomEvent&&!Nf&&!em?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=t,h.from=e,h.dragged=n,h.draggedRect=o,h.related=r||t,h.relatedRect=s||Yi(t),h.willInsertAfter=v,h.originalEvent=c,e.dispatchEvent(h),b&&(w=b.call(g,h,c)),w}function M1(e){e.draggable=!1}function jW(){pw=!1}function IW(e,t,n){var o=Yi(Sv(n.el,0,n.options,!0)),r=ek(n.el,n.options,Ar),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function LW(e,t,n){var o=Yi(bE(n.el,n.options.draggable)),r=ek(n.el,n.options,Ar),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function FW(e,t,n,o,r,s,c,v){var h=o?e.clientY:e.clientX,g=o?n.height:n.width,b=o?n.top:n.left,w=o?n.bottom:n.right,O=!1;if(!c){if(v&&wg<g*r){if(!Ny&&(ky===1?h>b+g*s/2:h<w-g*s/2)&&(Ny=!0),Ny)O=!0;else if(ky===1?h<b+wg:h>w-wg)return-ky}else if(h>b+g*(1-r)/2&&h<w-g*(1-r)/2)return $W(t)}return O=O||c,O&&(h<b+g*s/2||h>w-g*s/2)?h>b+g/2?1:-1:0}function $W(e){return ju(vn)<ju(e)?1:-1}function BW(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function UW(e){Xg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Xg.push(o)}}function Eg(e){return setTimeout(e,0)}function hw(e){return clearTimeout(e)}wb&&Zr(document,"touchmove",function(e){(vr.active||nv)&&e.cancelable&&e.preventDefault()});vr.utils={on:Zr,off:Xr,css:br,find:K2,is:function(t,n){return!!vs(t,n,t,!1)},extend:OW,throttle:Z2,closest:vs,toggleClass:iu,clone:Q2,index:ju,nextTick:Eg,cancelNextTick:hw,detectDirection:nk,getChild:Sv,expando:kl};vr.get=function(e){return e[kl]};vr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(vr.utils=fc(fc({},vr.utils),o.utils)),tm.mount(o)})};vr.create=function(e,t){return new vr(e,t)};vr.version=wW;var Xi=[],by,vw,yw=!1,P1,k1,Yg,_y;function VW(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?Zr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Zr(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Zr(document,"touchmove",this._handleFallbackAutoScroll):Zr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Xr(document,"dragover",this._handleAutoScroll):(Xr(document,"pointermove",this._handleFallbackAutoScroll),Xr(document,"touchmove",this._handleFallbackAutoScroll),Xr(document,"mousemove",this._handleFallbackAutoScroll)),tT(),Og(),xW()},nulling:function(){Yg=vw=by=yw=_y=P1=k1=null,Xi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(s,c);if(Yg=n,o||this.options.forceAutoScrollFallback||em||Nf||Ty){N1(n,this.options,v,o);var h=Dd(v,!0);yw&&(!_y||s!==P1||c!==k1)&&(_y&&tT(),_y=setInterval(function(){var g=Dd(document.elementFromPoint(s,c),!0);g!==h&&(h=g,Og()),N1(n,r.options,g,o)},10),P1=s,k1=c)}else{if(!this.options.bubbleScroll||Dd(v,!0)===sc()){Og();return}N1(n,this.options,Dd(v,!1),!1)}}},Tf(e,{pluginName:"scroll",initializeByDefault:!0})}function Og(){Xi.forEach(function(e){clearInterval(e.pid)}),Xi=[]}function tT(){clearInterval(_y)}var N1=Z2(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,h=sc(),g=!1,b;vw!==n&&(vw=n,Og(),by=t.scroll,b=t.scrollFn,by===!0&&(by=Dd(n,!0)));var w=0,O=by;do{var S=O,P=Yi(S),A=P.top,k=P.bottom,j=P.left,R=P.right,B=P.width,G=P.height,H=void 0,Y=void 0,Q=S.scrollWidth,W=S.scrollHeight,I=br(S),z=S.scrollLeft,K=S.scrollTop;S===h?(H=B<Q&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),Y=G<W&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(H=B<Q&&(I.overflowX==="auto"||I.overflowX==="scroll"),Y=G<W&&(I.overflowY==="auto"||I.overflowY==="scroll"));var q=H&&(Math.abs(R-r)<=c&&z+B<Q)-(Math.abs(j-r)<=c&&!!z),ce=Y&&(Math.abs(k-s)<=c&&K+G<W)-(Math.abs(A-s)<=c&&!!K);if(!Xi[w])for(var Ne=0;Ne<=w;Ne++)Xi[Ne]||(Xi[Ne]={});(Xi[w].vx!=q||Xi[w].vy!=ce||Xi[w].el!==S)&&(Xi[w].el=S,Xi[w].vx=q,Xi[w].vy=ce,clearInterval(Xi[w].pid),(q!=0||ce!=0)&&(g=!0,Xi[w].pid=setInterval((function(){o&&this.layer===0&&vr.active._onTouchMove(Yg);var Oe=Xi[this.layer].vy?Xi[this.layer].vy*v:0,Xe=Xi[this.layer].vx?Xi[this.layer].vx*v:0;typeof b=="function"&&b.call(vr.dragged.parentNode[kl],Xe,Oe,e,Yg,Xi[this.layer].el)!=="continue"||J2(Xi[this.layer].el,Xe,Oe)}).bind({layer:w}),24))),w++}while(t.bubbleScroll&&O!==h&&(O=Dd(O,!1)));yw=g}},30),ak=function(t){var n=t.originalEvent,o=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,h=t.unhideGhostForTarget;if(n){var g=o||s;v();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,w=document.elementFromPoint(b.clientX,b.clientY);h(),g&&!g.el.contains(w)&&(c("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function _E(){}_E.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=Sv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:ak};Tf(_E,{pluginName:"revertOnSpill"});function wE(){}wE.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:ak};Tf(wE,{pluginName:"removeOnSpill"});vr.mount(new VW);vr.mount(wE,_E);const GW={class:"dialog-footer"},WW=kr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt(!1),c=mt(!1),v=mt({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),h=Lw({name:[{required:!0,message:Zt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Zt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Zt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=mt(!1);$M(g,S=>{S||(v.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=S=>{S&&(v.value=He.cloneDeep(S),c.value=!0),g.value=!0},w=()=>{g.value=!1,c.value=!1},O=async S=>{S&&await S.validate(P=>{P&&o("refresh",v.value)})};return t({open:b,close:w}),(S,P)=>{const A=te("el-input"),k=te("el-form-item"),j=te("el-switch"),R=te("el-form"),B=te("el-button"),G=te("el-dialog");return Ve(),_t(G,{title:c.value?S.$t("views.template.templateForm.title.editParam"):S.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":P[8]||(P[8]=H=>g.value=H),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":w,"append-to-body":""},{footer:F(()=>[fe("span",GW,[C(B,{onClick:P[6]||(P[6]=bn(H=>g.value=!1,["prevent"]))},{default:F(()=>[At($e(S.$t("common.cancel")),1)]),_:1}),C(B,{type:"primary",onClick:P[7]||(P[7]=H=>O(r.value)),loading:s.value},{default:F(()=>[At($e(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:F(()=>[C(R,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:v.value,"require-asterisk-position":"right"},{default:F(()=>[C(k,{label:S.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:F(()=>[C(A,{modelValue:v.value.variable,"onUpdate:modelValue":P[0]||(P[0]=H=>v.value.variable=H),placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:P[1]||(P[1]=H=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(k,{label:S.$t("dynamicsForm.paramForm.required.label"),onClick:P[3]||(P[3]=bn(()=>{},["prevent"]))},{default:F(()=>[C(j,{size:"small",modelValue:v.value.is_required,"onUpdate:modelValue":P[2]||(P[2]=H=>v.value.is_required=H)},null,8,["modelValue"])]),_:1},8,["label"]),C(k,{label:S.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.is_required,message:S.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:F(()=>[C(A,{modelValue:v.value.default_value,"onUpdate:modelValue":P[4]||(P[4]=H=>v.value.default_value=H),placeholder:S.$t("dynamicsForm.default.placeholder"),onBlur:P[5]||(P[5]=H=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),zW={class:"flex-between mb-16"},HW={class:"lighter"},XW={class:"mr-4"},YW=kr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(null),r=mt(),s=mt([]);function c(b,w){typeof w<"u"&&(o.value=w),r.value.open(b)}function v(b){s.value.splice(b,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function h(b){for(let O=0;O<s.value.length;O++)if(s.value[O].variable===b.variable&&o.value!==O){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}let w=t.nodeModel.properties.user_input_field_list;for(let O=0;O<w.length;O++)if(w[O].field===b.variable){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}o.value!==null?s.value.splice(o.value,1,b):s.value.push(b),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const w=n.value.$el.querySelector(".el-table__body-wrapper tbody");w&&vr.create(w,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const S=[...s.value],[P]=S.splice(O.oldIndex,1);S.splice(O.newIndex,0,P),s.value=S,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return bo(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(b=>b.assignment_method==="api_input").forEach(b=>{s.value.push(b)}),He.set(t.nodeModel.properties,"api_input_field_list",s)}),(b,w)=>{var H;const O=te("Plus"),S=te("el-icon"),P=te("el-button"),A=te("el-table-column"),k=te("el-switch"),j=te("EditPen"),R=te("el-tooltip"),B=te("Delete"),G=te("el-table");return Ve(),Dn(Yo,null,[fe("div",zW,[fe("h5",HW,$e(b.$t("views.template.templateForm.title.apiParamPassing")),1),C(P,{link:"",type:"primary",onClick:w[0]||(w[0]=Y=>c())},{default:F(()=>[C(S,{class:"mr-4"},{default:F(()=>[C(O)]),_:1}),At(" "+$e(b.$t("common.add")),1)]),_:1})]),((H=t.nodeModel.properties.api_input_field_list)==null?void 0:H.length)>0?(Ve(),_t(G,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:F(()=>[C(A,{prop:"variable",label:b.$t("dynamicsForm.paramForm.field.label")},null,8,["label"]),C(A,{prop:"default_value",label:b.$t("dynamicsForm.default.label")},null,8,["label"]),C(A,{label:b.$t("common.required")},{default:F(({row:Y})=>[fe("div",{onClick:w[1]||(w[1]=bn(()=>{},["stop"]))},[C(k,{disabled:"",size:"small",modelValue:Y.is_required,"onUpdate:modelValue":Q=>Y.is_required=Q},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),C(A,{label:b.$t("common.operation"),align:"left",width:"90"},{default:F(({row:Y,$index:Q})=>[fe("span",XW,[C(R,{effect:"dark",content:b.$t("common.modify"),placement:"top"},{default:F(()=>[C(P,{type:"primary",text:"",onClick:bn(W=>c(Y,Q),["stop"])},{default:F(()=>[C(S,null,{default:F(()=>[C(j)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),C(R,{effect:"dark",content:b.$t("common.delete"),placement:"top"},{default:F(()=>[C(P,{type:"primary",text:"",onClick:W=>v(Q)},{default:F(()=>[C(S,null,{default:F(()=>[C(B)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):tr("",!0),C(WW,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:h},null,512)],64)}}}),qW={class:"dialog-footer"},KW=kr({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt(!1),c=mt(!1),v=mt(),h=(k,j)=>k.every(R=>VI.get(j,R,void 0)!==void 0),g=lo(()=>{if(v.value){const k=v.value;switch(k.type){case"input":return h(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:k.attrs||{maxlength:20,minlength:0},field:k.field||k.variable,input_type:"TextInput",label:k.label||k.name,default_value:k.default_value,required:k.required!=null?k.required:k.is_required};case"select":return h(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:k.attrs||{},field:k.field||k.variable,input_type:"SingleSelect",label:k.label||k.name,default_value:k.default_value,required:k.required!=null?k.required:k.is_required,option_list:k.option_list?k.option_list:k.optionList.map(j=>({key:j,value:j}))};case"date":return h(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:k.field||k.variable,input_type:"DatePicker",label:k.label||k.name,default_value:k.default_value,required:k.required!=null?k.required:k.is_required,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:20,minlength:0}}}),b=mt(null),w=mt([{label:Zt("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:Zt("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:Zt("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:Zt("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:Zt("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:Zt("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:Zt("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),O=mt(!1),S=(k,j)=>{O.value=!0,k?(c.value=!0,v.value=He.cloneDeep(k),b.value=j):v.value=null},P=()=>{O.value=!1,c.value=!1,b.value=null,v.value=null},A=async()=>{const k=r.value;k&&await k.validate().then(()=>{o("refresh",k==null?void 0:k.getData(),b.value),c.value=!1,v.value=null,b.value=null})};return t({open:S,close:P}),(k,j)=>{const R=te("el-button"),B=te("el-dialog");return Ve(),_t(B,{title:c.value?k.$t("views.template.templateForm.title.editParam"):k.$t("views.template.templateForm.title.addParam"),modelValue:O.value,"onUpdate:modelValue":j[2]||(j[2]=G=>O.value=G),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":P,"append-to-body":""},{footer:F(()=>[fe("span",qW,[C(R,{onClick:bn(P,["prevent"])},{default:F(()=>[At($e(k.$t("common.cancel")),1)]),_:1}),C(R,{type:"primary",onClick:j[1]||(j[1]=G=>A()),loading:s.value},{default:F(()=>[At($e(c.value?k.$t("common.save"):k.$t("common.add")),1)]),_:1},8,["loading"])])]),default:F(()=>[C(Fw,{modelValue:g.value,"onUpdate:modelValue":j[0]||(j[0]=G=>g.value=G),"label-position":"top","require-asterisk-position":"right",input_type_list:w.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),ZW={class:"dialog-footer"},JW=kr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt(!1),c=mt({title:Zt("chat.userInput")}),v=Lw({title:[{required:!0,message:Zt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),h=mt(!1),g=O=>{O&&(c.value=He.cloneDeep(O)),h.value=!0},b=()=>{h.value=!1},w=async O=>{O&&await O.validate(S=>{S&&o("refresh",c.value)})};return t({open:g,close:b}),(O,S)=>{const P=te("el-input"),A=te("el-form-item"),k=te("el-form"),j=te("el-button"),R=te("el-dialog");return Ve(),_t(R,{title:O.$t("common.setting"),modelValue:h.value,"onUpdate:modelValue":S[4]||(S[4]=B=>h.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:F(()=>[fe("span",ZW,[C(j,{onClick:S[2]||(S[2]=bn(B=>h.value=!1,["prevent"]))},{default:F(()=>[At($e(O.$t("common.cancel")),1)]),_:1}),C(j,{type:"primary",onClick:S[3]||(S[3]=B=>w(r.value)),loading:s.value},{default:F(()=>[At($e(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:F(()=>[C(k,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:F(()=>[C(A,{label:O.$t("common.title"),prop:"title"},{default:F(()=>[C(P,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=B=>c.value.title=B),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=B=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),QW={class:"flex-between mb-16"},e9={class:"lighter"},t9={class:"ml-4"},n9=["title"],r9={key:0},o9=["title"],i9={key:1},a9=["title"],l9=["title"],u9={class:"mr-4"},s9=kr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(),r=mt(),s=mt([]),c=mt({title:Zt("chat.userInput")});function v(P,A){o.value.open(P,A)}function h(){r.value.open(c.value)}function g(P){s.value.splice(P,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function b(P,A){for(let j=0;j<s.value.length;j++)if(s.value[j].field===P.field&&A!==j){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}let k=t.nodeModel.properties.api_input_field_list;for(let j=0;j<k.length;j++)if(k[j].variable===P.field){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}A!==null?s.value.splice(A,1,P):s.value.push(P),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function w(P){c.value=P,r.value.close()}const O=P=>{var A;if(P.input_type==="PasswordInput")return"******";if(P.default_value){const k=(A=P.option_list)==null?void 0:A.filter(j=>P.default_value.indexOf(j.value)>-1).map(j=>j.label).join(",");return k||P.default_value}if(P.default_value!==void 0)return P.default_value};function S(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&vr.create(A,{animation:150,ghostClass:"ghost-row",onEnd:k=>{if(k.oldIndex===void 0||k.newIndex===void 0)return;const j=[...s.value],[R]=j.splice(k.oldIndex,1);j.splice(k.newIndex,0,R),s.value=j,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return bo(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(P=>P.assignment_method==="user_input").forEach(P=>{s.value.push(P)}),s.value.forEach((P,A)=>{switch(P.label=P.label||P.name,P.field=P.field||P.variable,P.required=P.required||P.is_required,P.type){case"input":P.input_type="TextInput";break;case"select":P.input_type="SingleSelect";break;case"date":P.input_type="DatePicker";break}}),He.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),He.set(t.nodeModel.properties,"user_input_config",c),S()}),(P,A)=>{var K;const k=te("Setting"),j=te("el-icon"),R=te("el-button"),B=te("Plus"),G=te("el-table-column"),H=te("el-tag"),Y=te("el-switch"),Q=te("EditPen"),W=te("el-tooltip"),I=te("Delete"),z=te("el-table");return Ve(),Dn(Yo,null,[fe("div",QW,[fe("h5",e9,$e(c.value.title),1),fe("div",null,[C(R,{type:"primary",link:"",onClick:h},{default:F(()=>[C(j,null,{default:F(()=>[C(k)]),_:1})]),_:1}),fe("span",t9,[C(R,{link:"",type:"primary",onClick:A[0]||(A[0]=q=>v())},{default:F(()=>[C(j,{class:"mr-4"},{default:F(()=>[C(B)]),_:1}),At(" "+$e(P.$t("common.add")),1)]),_:1})])])]),((K=t.nodeModel.properties.user_input_field_list)==null?void 0:K.length)>0?(Ve(),_t(z,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:F(()=>[C(G,{prop:"field",label:P.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:F(({row:q})=>[fe("span",{title:q.field,class:"ellipsis-1"},$e(q.field),9,n9)]),_:1},8,["label"]),C(G,{prop:"label",label:P.$t("dynamicsForm.paramForm.name.label")},{default:F(({row:q})=>[q.label&&q.label.input_type==="TooltipLabel"?(Ve(),Dn("span",r9,[fe("span",{title:q.label.label,class:"ellipsis-1"},$e(q.label.label),9,o9)])):(Ve(),Dn("span",i9,[fe("span",{title:q.label,class:"ellipsis-1"},$e(q.label),9,a9)]))]),_:1},8,["label"]),C(G,{label:P.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:F(({row:q})=>[q.input_type==="TextInput"?(Ve(),_t(H,{key:0,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):tr("",!0),q.input_type==="PasswordInput"?(Ve(),_t(H,{key:1,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):tr("",!0),q.input_type==="Slider"?(Ve(),_t(H,{key:2,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):tr("",!0),q.input_type==="SwitchInput"?(Ve(),_t(H,{key:3,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):tr("",!0),q.input_type==="SingleSelect"?(Ve(),_t(H,{key:4,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):tr("",!0),q.input_type==="MultiSelect"?(Ve(),_t(H,{key:5,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):tr("",!0),q.input_type==="RadioCard"?(Ve(),_t(H,{key:6,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):tr("",!0),q.input_type==="DatePicker"?(Ve(),_t(H,{key:7,type:"info",class:"info-tag"},{default:F(()=>[At($e(P.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):tr("",!0)]),_:1},8,["label"]),C(G,{prop:"default_value",label:P.$t("dynamicsForm.default.label")},{default:F(({row:q})=>[fe("span",{title:q.default_value,class:"ellipsis-1"},$e(O(q)),9,l9)]),_:1},8,["label"]),C(G,{label:P.$t("common.required")},{default:F(({row:q})=>[fe("div",{onClick:A[1]||(A[1]=bn(()=>{},["stop"]))},[C(Y,{disabled:"",size:"small",modelValue:q.required,"onUpdate:modelValue":ce=>q.required=ce},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),C(G,{label:P.$t("common.operation"),align:"left",width:"90"},{default:F(({row:q,$index:ce})=>[fe("span",u9,[C(W,{effect:"dark",content:P.$t("common.modify"),placement:"top"},{default:F(()=>[C(R,{type:"primary",text:"",onClick:bn(Ne=>v(q,ce),["stop"])},{default:F(()=>[C(j,null,{default:F(()=>[C(Q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),C(W,{effect:"dark",content:P.$t("common.delete"),placement:"top"},{default:F(()=>[C(R,{type:"primary",text:"",onClick:Ne=>g(ce)},{default:F(()=>[C(j,null,{default:F(()=>[C(I)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):tr("",!0),C(KW,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:b},null,512),C(JW,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:w},null,512)],64)}}}),c9="/ui/assets/icon_file-doc-7cb7d059.svg",f9="/ui/assets/icon_file-image-e1249452.svg",d9="/ui/assets/icon_file-audio-d3fb5822.svg",p9={class:"flex-between"},h9={class:"flex align-center"},v9={class:"line-height-22 mt-4"},y9={class:"flex-between"},m9={class:"flex align-center"},g9={class:"line-height-22 mt-4"},b9={class:"flex-between"},_9={class:"flex align-center"},w9={class:"line-height-22 mt-4"},E9={class:"dialog-footer"},O9=kr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=mt(!1),c=mt(!1),v=mt(),h=mt({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1});function g(O){s.value=!0,X1(()=>{h.value={...h.value,...O}})}function b(){s.value=!1}async function w(){const O=v.value;O&&await O.validate().then(()=>{o("refresh",h.value),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:g}),(O,S)=>{const P=te("el-slider"),A=te("el-form-item"),k=te("el-text"),j=te("el-checkbox"),R=te("el-card"),B=te("el-form"),G=te("el-button"),H=te("el-dialog");return Ve(),_t(H,{title:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":S[12]||(S[12]=Y=>s.value=Y),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":"",width:"600"},{footer:F(()=>[fe("span",E9,[C(G,{onClick:bn(b,["prevent"])},{default:F(()=>[At($e(O.$t("common.cancel")),1)]),_:1}),C(G,{type:"primary",onClick:S[11]||(S[11]=Y=>w()),loading:c.value},{default:F(()=>[At($e(O.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:F(()=>[C(B,{"label-position":"top",ref_key:"fieldFormRef",ref:v,model:h.value,"require-asterisk-position":"right"},{default:F(()=>[C(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:F(()=>[C(P,{modelValue:h.value.maxFiles,"onUpdate:modelValue":S[0]||(S[0]=Y=>h.value.maxFiles=Y),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:F(()=>[C(P,{modelValue:h.value.fileLimit,"onUpdate:modelValue":S[1]||(S[1]=Y=>h.value.fileLimit=Y),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:F(()=>[C(R,{shadow:"hover",class:Cd(["card-checkbox cursor w-full mb-8",h.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[4]||(S[4]=bn(Y=>h.value.document=!h.value.document,["stop"]))},{default:F(()=>[fe("div",p9,[fe("div",h9,[S[13]||(S[13]=fe("img",{class:"mr-12",src:c9,alt:""},null,-1)),fe("div",null,[fe("p",v9,$e(O.$t("common.fileUpload.document"))+"（TXT、MD、DOCX、HTML、CSV、XLSX、XLS、PDF） ",1),C(k,{class:"color-secondary"},{default:F(()=>[At($e(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})])]),C(j,{modelValue:h.value.document,"onUpdate:modelValue":S[2]||(S[2]=Y=>h.value.document=Y),onChange:S[3]||(S[3]=Y=>h.value.document=!h.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),C(R,{shadow:"hover",class:Cd(["card-checkbox cursor w-full mb-8",h.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[7]||(S[7]=bn(Y=>h.value.image=!h.value.image,["stop"]))},{default:F(()=>[fe("div",y9,[fe("div",m9,[S[14]||(S[14]=fe("img",{class:"mr-12",src:f9,alt:""},null,-1)),fe("div",null,[fe("p",g9,$e(O.$t("common.fileUpload.image"))+"（JPG、JPEG、PNG、GIF） ",1),C(k,{class:"color-secondary"},{default:F(()=>[At($e(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})])]),C(j,{modelValue:h.value.image,"onUpdate:modelValue":S[5]||(S[5]=Y=>h.value.image=Y),onChange:S[6]||(S[6]=Y=>h.value.image=!h.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),C(R,{shadow:"hover",class:Cd(["card-checkbox cursor w-full mb-8",h.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:S[10]||(S[10]=bn(Y=>h.value.audio=!h.value.audio,["stop"]))},{default:F(()=>[fe("div",b9,[fe("div",_9,[S[15]||(S[15]=fe("img",{class:"mr-12",src:d9,alt:""},null,-1)),fe("div",null,[fe("p",w9,$e(O.$t("common.fileUpload.audio"))+"（MP3、WAV、OGG、ACC、M4A） ",1),C(k,{class:"color-secondary"},{default:F(()=>[At($e(O.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})])]),C(j,{modelValue:h.value.audio,"onUpdate:modelValue":S[8]||(S[8]=Y=>h.value.audio=Y),onChange:S[9]||(S[9]=Y=>h.value.audio=!h.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),x9={class:"flex-between"},S9={class:"flex align-center"},A9={class:"mr-4"},T9={class:"flex-between"},M9={class:"mr-4"},P9={class:"flex"},k9={class:"flex-between"},N9={class:"mr-4"},R9={class:"flex"},D9={class:"w-full"},C9={class:"flex-between w-full"},j9=kr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Rl.config.globalProperties.$route,n=e,o=mt(null),r=mt(null),s=mt(),c=mt(),v=mt(),h=mt(),g={name:"",desc:"",prologue:Zt("views.application.applicationForm.form.defaultPrologue")},b=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0);function w(I){He.set(n.nodeModel.properties.nodeData,"prologue",I)}const O=lo({get:()=>(n.nodeModel.properties.nodeData||He.set(n.nodeModel.properties,"nodeData",g),n.nodeModel.properties.nodeData),set:I=>{He.set(n.nodeModel.properties,"nodeData",I)}}),S=mt(),P=()=>{var I;return O.value.ttsModelEnable&&!O.value.ttsModelId&&O.value.ttsType==="TTS"?Promise.reject({node:n.nodeModel,errMessage:Zt("views.application.applicationForm.form.voicePlay.requiredMessage")}):O.value.sttModelEnable&&!O.value.sttModelId?Promise.reject({node:n.nodeModel,errMessage:Zt("views.application.applicationForm.form.voiceInput.requiredMessage")}):(I=S.value)==null?void 0:I.validate().catch(z=>Promise.reject({node:n.nodeModel,errMessage:z}))};function A(){fa.getApplicationSTTModel(t).then(I=>{o.value=He.groupBy(I==null?void 0:I.data,"provider")})}function k(){fa.getApplicationTTSModel(t).then(I=>{r.value=He.groupBy(I==null?void 0:I.data,"provider")})}function j(){var I;O.value.ttsModelId?(I=s.value)==null||I.reset_default(O.value.ttsModelId,t):H({})}function R(){O.value.ttsModelEnable||(O.value.ttsModelId="",O.value.ttsType="BROWSER")}function B(){O.value.sttModelEnable||(O.value.sttModelId="")}const G=()=>{var z;const I=O.value.ttsModelId;if(!I){Wp(Zt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(z=s.value)==null||z.open(I,t,O.value.tts_model_params_setting)},H=I=>{O.value.tts_model_params_setting=I},Y=()=>{const I={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1};O.value.file_upload_enable&&(O.value.file_upload_setting=O.value.file_upload_setting||I),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},Q=()=>{var I;(I=h.value)==null||I.open(O.value.file_upload_setting)},W=I=>{O.value.file_upload_setting=I};return bo(()=>{He.set(n.nodeModel,"validate",P),n.nodeModel.properties.nodeData.ttsType||He.set(n.nodeModel.properties.nodeData,"ttsType","BROWSER"),k(),A()}),(I,z)=>{const K=te("el-input"),q=te("el-form-item"),ce=te("el-tooltip"),Ne=te("el-icon"),Oe=te("el-button"),Xe=te("el-switch"),Ie=te("el-checkbox"),Pe=te("ModelSelect"),le=te("el-radio"),ye=te("el-radio-group"),Me=te("Operation"),ze=te("el-form");return Ve(),_t(mi,{nodeModel:I.nodeModel},{default:F(()=>[C(ze,{onSubmit:z[13]||(z[13]=bn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:F(()=>[C(q,{label:I.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Jr(Zt)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:F(()=>[C(K,{modelValue:O.value.name,"onUpdate:modelValue":z[0]||(z[0]=je=>O.value.name=je),maxlength:"64",placeholder:Jr(Zt)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:z[1]||(z[1]=je=>{var it;return O.value.name=(it=O.value.name)==null?void 0:it.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),C(q,{label:I.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:F(()=>[C(K,{modelValue:O.value.desc,"onUpdate:modelValue":z[2]||(z[2]=je=>O.value.desc=je),placeholder:I.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(q,{label:I.$t("views.application.applicationForm.form.prologue")},{default:F(()=>[C(jd,{onWheel:b,title:I.$t("views.application.applicationForm.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":z[3]||(z[3]=je=>O.value.prologue=je),style:{height:"150px"},onSubmitDialog:w},null,8,["title","modelValue"])]),_:1},8,["label"]),C(q,null,{label:F(()=>[fe("div",x9,[fe("div",S9,[fe("span",A9,$e(I.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),C(ce,{effect:"dark",content:I.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:F(()=>[C(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),fe("div",null,[O.value.file_upload_enable?(Ve(),_t(Oe,{key:0,type:"primary",link:"",onClick:Q,class:"mr-4"},{default:F(()=>[C(Ne,{class:"mr-4"},{default:F(()=>[C(Jr(GI))]),_:1})]),_:1})):tr("",!0),C(Xe,{size:"small",modelValue:O.value.file_upload_enable,"onUpdate:modelValue":z[4]||(z[4]=je=>O.value.file_upload_enable=je),onChange:Y},null,8,["modelValue"])])])]),_:1}),C(s9,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":I.nodeModel},null,8,["node-model"]),C(YW,{ref_key:"ApiInputFieldTableFef",ref:v,"node-model":I.nodeModel},null,8,["node-model"]),C(q,null,{label:F(()=>[fe("div",T9,[fe("span",M9,$e(I.$t("views.application.applicationForm.form.voiceInput.label")),1),fe("div",P9,[O.value.sttModelEnable?(Ve(),_t(Ie,{key:0,modelValue:O.value.sttAutoSend,"onUpdate:modelValue":z[5]||(z[5]=je=>O.value.sttAutoSend=je)},{default:F(()=>[At($e(I.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):tr("",!0),C(Xe,{class:"ml-8",size:"small",modelValue:O.value.sttModelEnable,"onUpdate:modelValue":z[6]||(z[6]=je=>O.value.sttModelEnable=je),onChange:B},null,8,["modelValue"])])])]),default:F(()=>[Ua(C(Pe,{onWheel:b,modelValue:O.value.sttModelId,"onUpdate:modelValue":z[7]||(z[7]=je=>O.value.sttModelId=je),placeholder:I.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:o.value},null,8,["modelValue","placeholder","options"]),[[Ev,O.value.sttModelEnable]])]),_:1}),C(q,null,{label:F(()=>[fe("div",k9,[fe("span",N9,$e(I.$t("views.application.applicationForm.form.voicePlay.label")),1),fe("div",R9,[O.value.ttsModelEnable?(Ve(),_t(Ie,{key:0,modelValue:O.value.ttsAutoplay,"onUpdate:modelValue":z[8]||(z[8]=je=>O.value.ttsAutoplay=je)},{default:F(()=>[At($e(I.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):tr("",!0),C(Xe,{class:"ml-8",size:"small",modelValue:O.value.ttsModelEnable,"onUpdate:modelValue":z[9]||(z[9]=je=>O.value.ttsModelEnable=je),onChange:R},null,8,["modelValue"])])])]),default:F(()=>[fe("div",D9,[Ua(C(ye,{modelValue:O.value.ttsType,"onUpdate:modelValue":z[10]||(z[10]=je=>O.value.ttsType=je)},{default:F(()=>[C(le,{label:I.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),C(le,{label:I.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Ev,O.value.ttsModelEnable]])]),fe("div",C9,[O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(Ve(),_t(Pe,{key:0,onWheel:b,modelValue:O.value.ttsModelId,"onUpdate:modelValue":z[11]||(z[11]=je=>O.value.ttsModelId=je),placeholder:I.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:z[12]||(z[12]=je=>j())},null,8,["modelValue","placeholder","options"])):tr("",!0),O.value.ttsType==="TTS"&&O.value.ttsModelEnable?(Ve(),_t(Oe,{key:1,onClick:G,disabled:!O.value.ttsModelId,class:"ml-8"},{default:F(()=>[C(Ne,null,{default:F(()=>[C(Ne,null,{default:F(()=>[C(Me)]),_:1})]),_:1})]),_:1},8,["disabled"])):tr("",!0)])]),_:1})]),_:1},8,["model"]),C(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:H},null,512),C(O9,{ref_key:"FileUploadSettingDialogRef",ref:h,"node-model":I.nodeModel,onRefresh:W},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const I9=Yy(j9,[["__scopeId","data-v-56d80d58"]]);class L9 extends gi{constructor(t){super(t,I9)}}class F9 extends bi{constructor(t,n){super(t,n)}get_width(){return 600}}const $9={type:"base-node",model:F9,view:L9},B9=Object.freeze(Object.defineProperty({__proto__:null,default:$9},Symbol.toStringTag,{value:"Module"})),U9={class:"title-decoration-1 mb-8"},V9={class:"flex-between w-full"},G9={class:"flex-between"},W9={class:"flex-between lighter"},z9={key:0,class:"mt-8"},H9=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=e,o={modelId:"",system:"",questionReferenceAddress:["start-node","question"],dialogueNumber:1,branch:[{id:Of(),type:"分类 1",condition:""}]},r=H=>H.ctrlKey===!0?(H.preventDefault(),!0):(H.stopPropagation(),!0),s=(H,Y,Q)=>{const I=He.cloneDeep(n.nodeModel.properties.branchConditionList?n.nodeModel.properties.branchConditionList:[]).map(z=>z.id===Y.id?{...z,height:H.height,index:Q}:z);He.set(n.nodeModel.properties,"branchConditionList",I),A(n.nodeModel.properties.nodeData.branch,!0)},c=lo({get:()=>(n.nodeModel.properties.nodeData||(He.set(n.nodeModel.properties,"nodeData",o),A(o.branch,!0)),n.nodeModel.properties.nodeData),set:H=>{He.set(n.nodeModel.properties,"nodeData",H)}});function v(H){He.set(n.nodeModel.properties.nodeData,"system",H)}const h=mt(null),g=mt(),b=mt(),w=mt(),O=()=>{var Y,Q;const H=[(Y=b.value)==null?void 0:Y.validate(),(Q=w.value)==null?void 0:Q.validate()];return Promise.all(H).catch(W=>Promise.reject({node:n.nodeModel,errMessage:W}))},{params:{id:S}}=Rl.config.globalProperties.$route;function P(){const H=He.cloneDeep(n.nodeModel.properties.nodeData.branch),Y={type:"分类 "+(H.length+1),id:Of(),condition:""};H.splice(H.length,0,Y),A(H,!0),He.set(n.nodeModel.properties.nodeData,"branch",H)}function A(H,Y){const Q=He.cloneDeep(n.nodeModel.properties.branchConditionList?n.nodeModel.properties.branchConditionList:[]),W=H.map((I,z)=>{const K=Q.find(q=>q.id===I.id);if(K)return{index:z,height:K.height,id:I.id};if(Y)return{index:z,height:100,id:I.id}}).filter(I=>I);He.set(n.nodeModel.properties,"branchConditionList",W),n.nodeModel.refreshBranch()}function k(H){const Y=He.cloneDeep(n.nodeModel.properties.nodeData.branch),W=Y.splice(H,1).map(I=>n.nodeModel.id+"_"+I.id+"_right");n.nodeModel.graphModel.eventCenter.emit("delete_edge",n.nodeModel.outgoing.edges.filter(I=>W.includes(I.sourceAnchorId)).map(I=>I.id)),A(Y,!1),Y.forEach((I,z)=>{I.type="分类 "+(z+1)}),He.set(n.nodeModel.properties.nodeData,"branch",Y)}const j=H=>{var Y;H&&((Y=g.value)==null||Y.open(H,S,c.value.modelParamsSetting))};function R(H){He.set(n.nodeModel.properties.nodeData,"modelParamsSetting",H)}function B(){S?fa.getApplicationModel(S).then(H=>{h.value=He.groupBy(H==null?void 0:H.data,"provider")}):t.asyncGetModel().then(H=>{h.value=He.groupBy(H==null?void 0:H.data,"provider")})}const G=H=>{var Y;H?(Y=g.value)==null||Y.reset_default(H,S):R({})};return bo(()=>{B(),He.set(n.nodeModel,"validate",O),c.value.dialogue_type||(c.value.dialogue_type="WORKFLOW")}),(H,Y)=>{const Q=te("Setting"),W=te("el-icon"),I=te("el-button"),z=te("el-form-item"),K=te("el-option"),q=te("el-select"),ce=te("el-input-number"),Ne=te("el-input"),Oe=te("el-col"),Xe=te("Delete"),Ie=te("el-row"),Pe=te("el-card"),le=te("Plus"),ye=te("el-form"),Me=Id("resize");return Ve(),_t(mi,{nodeModel:H.nodeModel},{default:F(()=>[fe("h5",U9,$e(H.$t("views.applicationWorkflow.nodeSetting")),1),C(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(ye,{model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ClassificationNodeFormRef",ref:b,onSubmit:Y[6]||(Y[6]=bn(()=>{},["prevent"]))},{default:F(()=>[C(z,{label:H.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:H.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:F(()=>[fe("div",V9,[fe("div",null,[fe("span",null,[At($e(H.$t("views.application.applicationForm.form.aiModel.label")),1),Y[7]||(Y[7]=fe("span",{class:"danger"},"*",-1))])]),C(I,{disabled:!c.value.modelId,type:"primary",link:"",onClick:Y[0]||(Y[0]=ze=>j(c.value.modelId)),onRefreshForm:R},{default:F(()=>[C(W,null,{default:F(()=>[C(Q)]),_:1})]),_:1},8,["disabled"])])]),default:F(()=>[C(jw,{onChange:G,onWheel:r,teleported:!1,modelValue:c.value.modelId,"onUpdate:modelValue":Y[1]||(Y[1]=ze=>c.value.modelId=ze),placeholder:H.$t("views.application.applicationForm.form.aiModel.placeholder"),options:h.value,onSubmitModel:B,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(z,{label:H.$t("views.application.applicationForm.form.roleSettings.label")},{default:F(()=>[C(jd,{title:H.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:c.value.system,"onUpdate:modelValue":Y[2]||(Y[2]=ze=>c.value.system=ze),style:{height:"100px"},onSubmitDialog:v,placeholder:H.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(z,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:H.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:w,nodeModel:H.nodeModel,class:"w-full",placeholder:H.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:c.value.questionReferenceAddress,"onUpdate:modelValue":Y[3]||(Y[3]=ze=>c.value.questionReferenceAddress=ze)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),C(z,{label:H.$t("views.application.applicationForm.form.historyRecord.label")},{label:F(()=>[fe("div",G9,[fe("div",null,$e(H.$t("views.application.applicationForm.form.historyRecord.label")),1),C(q,{modelValue:c.value.dialogue_type,"onUpdate:modelValue":Y[4]||(Y[4]=ze=>c.value.dialogue_type=ze),type:"small",style:{width:"100px"}},{default:F(()=>[C(K,{label:H.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),C(K,{label:H.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[C(ce,{modelValue:c.value.dialogueNumber,"onUpdate:modelValue":Y[5]||(Y[5]=ze=>c.value.dialogueNumber=ze),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),(Ve(!0),Dn(Yo,null,Ci(c.value.branch,(ze,je)=>Ua((Ve(),_t(Pe,{key:ze.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:F(()=>[fe("div",W9,$e(ze.type),1),je!==c.value.branch.length?(Ve(),Dn("div",z9,[C(Ie,{gutter:8},{default:F(()=>[C(Oe,{span:23},{default:F(()=>[C(z,{prop:"branch."+je+".condition",rules:{required:!0,message:H.$t("views.applicationWorkflow.nodes.classificationNode.valueMessage"),trigger:"blur"}},{default:F(()=>[C(Ne,{modelValue:ze.condition,"onUpdate:modelValue":it=>ze.condition=it,placeholder:H.$t("views.applicationWorkflow.nodes.classificationNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),C(Oe,{span:1},{default:F(()=>[C(I,{disabled:je===0,link:"",type:"info",class:"mt-4",onClick:it=>k(je)},{default:F(()=>[C(W,null,{default:F(()=>[C(Xe)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):tr("",!0)]),_:2},1024)),[[Me,it=>s(it,ze,je)]])),128)),C(I,{link:"",type:"primary",onClick:P},{default:F(()=>[C(W,{class:"mr-4"},{default:F(()=>[C(le)]),_:1}),At(" "+$e(H.$t("views.applicationWorkflow.nodes.classificationNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:g,onRefresh:R},null,512)]),_:1},8,["nodeModel"])}}});class X9 extends gi{constructor(t){super(t,H9)}}const Y9=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class q9 extends bi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=Y9(c,g);h.push({x:n+r/2-10,y:v?o-s/2+525+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return h}}const K9={type:"classification-node",model:q9,view:X9},Z9=Object.freeze(Object.defineProperty({__proto__:null,default:K9},Symbol.toStringTag,{value:"Module"})),J9={class:"flex-between lighter"},Q9={key:0,class:"info"},ez={key:0,class:"mt-8"},tz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:Of(),type:"IF",condition:"and"},{conditions:[],id:Of(),type:"ELSE",condition:"and"}]},o=P=>P.ctrlKey===!0?(P.preventDefault(),!0):(P.stopPropagation(),!0),r=(P,A,k)=>{const R=He.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(B=>B.id===A.id?{...B,height:P.height,index:k}:B);He.set(t.nodeModel.properties,"branchConditionList",R),b(t.nodeModel.properties.nodeData.branch,!0)},s=lo({get:()=>(t.nodeModel.properties.nodeData||(He.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:P=>{He.set(t.nodeModel.properties,"nodeData",P)}}),c=mt(),v=mt(),h=()=>{var A;const P=[(A=c.value)==null?void 0:A.validate(),...v.value.map(k=>k.validate())];return Promise.all(P).catch(k=>Promise.reject({node:t.nodeModel,errMessage:k}))};function g(){const P=He.cloneDeep(t.nodeModel.properties.nodeData.branch),A={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(P.length-1),id:Of(),condition:"and"};P.splice(P.length-1,0,A),b(P,!0),He.set(t.nodeModel.properties.nodeData,"branch",P)}function b(P,A){const k=He.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),j=P.map((R,B)=>{const G=k.find(H=>H.id===R.id);if(G)return{index:B,height:G.height,id:R.id};if(A)return{index:B,height:12,id:R.id}}).filter(R=>R);He.set(t.nodeModel.properties,"branchConditionList",j),t.nodeModel.refreshBranch()}function w(P){const A=He.cloneDeep(t.nodeModel.properties.nodeData.branch);A[P].conditions.push({field:[],compare:"",value:""}),He.set(t.nodeModel.properties.nodeData,"branch",A)}function O(P,A){const k=He.cloneDeep(t.nodeModel.properties.nodeData.branch);if(k[P].conditions.splice(A,1),k[P].conditions.length===0){const R=k.splice(P,1).map(B=>t.nodeModel.id+"_"+B.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(B=>R.includes(B.sourceAnchorId)).map(B=>B.id)),b(k,!1),k.forEach((B,G)=>{B.type==="ELSE IF "+(G+1)&&(B.type="ELSE IF "+G)})}He.set(t.nodeModel.properties.nodeData,"branch",k)}function S(P,A,k){if(P==="is_null"||P==="is_not_null"){const j=He.cloneDeep(t.nodeModel.properties.nodeData.branch);j[A].conditions[k].value=1,He.set(t.nodeModel.properties.nodeData,"branch",j)}}return bo(()=>{He.set(t.nodeModel,"validate",h)}),(P,A)=>{const k=te("el-option"),j=te("el-select"),R=te("el-form-item"),B=te("el-col"),G=te("el-input"),H=te("Delete"),Y=te("el-icon"),Q=te("el-button"),W=te("el-row"),I=te("Plus"),z=te("el-card"),K=te("el-form"),q=Id("resize");return Ve(),_t(mi,{nodeModel:P.nodeModel},{default:F(()=>[C(K,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:A[0]||(A[0]=bn(()=>{},["prevent"]))},{default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(s.value.branch,(ce,Ne)=>Ua((Ve(),_t(z,{key:ce.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:F(()=>[fe("div",J9,[At($e(ce.type)+" ",1),ce.conditions.length>1?(Ve(),Dn("div",Q9,[fe("span",null,$e(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),C(j,{teleported:!1,modelValue:ce.condition,"onUpdate:modelValue":Oe=>ce.condition=Oe,size:"small",style:{width:"60px",margin:"0 8px"}},{default:F(()=>[C(k,{label:P.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),C(k,{label:P.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),fe("span",null,$e(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):tr("",!0)]),Ne!==s.value.branch.length-1?(Ve(),Dn("div",ez,[(Ve(!0),Dn(Yo,null,Ci(ce.conditions,(Oe,Xe)=>(Ve(),_t(W,{key:Xe,gutter:8},{default:F(()=>[C(B,{span:11},{default:F(()=>[C(R,{prop:"branch."+Ne+".conditions."+Xe+".field",rules:{type:"array",required:!0,message:P.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:F(()=>[C(Qr,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:P.nodeModel,class:"w-full",placeholder:P.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Oe.field,"onUpdate:modelValue":Ie=>Oe.field=Ie},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),C(B,{span:6},{default:F(()=>[C(R,{prop:"branch."+Ne+".conditions."+Xe+".compare",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:F(()=>[C(j,{onWheel:o,teleported:!1,modelValue:Oe.compare,"onUpdate:modelValue":Ie=>Oe.compare=Ie,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:Ie=>S(Ie,Ne,Xe)},{default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(Jr(WI),(Ie,Pe)=>(Ve(),_t(k,{key:Pe,label:Ie.label,value:Ie.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),C(B,{span:6},{default:F(()=>[Oe.compare!=="is_null"&&Oe.compare!=="is_not_null"?(Ve(),_t(R,{key:0,prop:"branch."+Ne+".conditions."+Xe+".value",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:F(()=>[C(G,{modelValue:Oe.value,"onUpdate:modelValue":Ie=>Oe.value=Ie,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):tr("",!0)]),_:2},1024),C(B,{span:1},{default:F(()=>[C(Q,{disabled:Ne===0&&Xe===0,link:"",type:"info",class:"mt-4",onClick:Ie=>O(Ne,Xe)},{default:F(()=>[C(Y,null,{default:F(()=>[C(H)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):tr("",!0),Ne!==s.value.branch.length-1?(Ve(),_t(Q,{key:1,link:"",type:"primary",onClick:Oe=>w(Ne)},{default:F(()=>[C(Y,{class:"mr-4"},{default:F(()=>[C(I)]),_:1}),At(" "+$e(P.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):tr("",!0)]),_:2},1024)),[[q,Oe=>r(Oe,ce,Ne)]])),128)),C(Q,{link:"",type:"primary",onClick:g},{default:F(()=>[C(Y,{class:"mr-4"},{default:F(()=>[C(I)]),_:1}),At(" "+$e(P.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class nz extends gi{constructor(t){super(t,tz)}}const rz=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class oz extends bi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=rz(c,g);h.push({x:n+r/2-10,y:v?o-s/2+75+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return h}}const iz={type:"condition-node",model:oz,view:nz},az=Object.freeze(Object.defineProperty({__proto__:null,default:iz},Symbol.toStringTag,{value:"Module"})),lz={class:"flex-between"},uz={class:"mr-4"},sz={class:"flex-between"},cz={class:"flex-between"},fz={class:"flex-between"},dz={class:"flex-between"},pz={class:"flex-between"},hz={class:"flex-between"},vz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=h=>h.ctrlKey===!0?(h.preventDefault(),!0):(h.stopPropagation(),!0),o={databaseTypeType:"content",databaseType:"mysql",databaseTypeReference:[],hostType:"content",host:"",hostReference:[],portType:"content",port:3306,portReference:[],databaseNameType:"content",databaseName:"",databaseNameReference:[],usernameType:"content",username:"",usernameReference:[],passwordType:"content",password:"",passwordReference:[],sqlType:"content",sql:"",sqlReference:[],isResult:!1},r=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:h=>{He.set(t.nodeModel.properties,"nodeData",h)}}),s=mt(),c=mt(),v=()=>{var h;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(h=s.value)==null?void 0:h.validate()]).catch(g=>Promise.reject({node:t.nodeModel,errMessage:g}))};return bo(()=>{var h;typeof((h=t.nodeModel.properties.nodeData)==null?void 0:h.isResult)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"isResult",!0),He.set(t.nodeModel,"validate",v)}),(h,g)=>{const b=te("el-option"),w=te("el-select"),O=te("el-form-item"),S=te("el-input"),P=te("el-form"),A=te("el-card");return Ve(),_t(mi,{nodeModel:h.nodeModel},{default:F(()=>[C(A,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(P,{onSubmit:g[21]||(g[21]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"databaseNodeFormRef",ref:s},{default:F(()=>[C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")},{label:F(()=>[fe("div",lz,[fe("div",uz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")),1)]),C(w,{teleported:!1,modelValue:r.value.databaseTypeType,"onUpdate:modelValue":g[0]||(g[0]=k=>r.value.databaseTypeType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.databaseTypeType==="content"?(Ve(),_t(w,{key:0,teleported:!1,modelValue:r.value.databaseType,"onUpdate:modelValue":g[1]||(g[1]=k=>r.value.databaseType=k),size:"small"},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.mysql"),value:"mysql"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.postgresql"),value:"postgresql"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.sqlserver"),value:"sqlserver"},null,8,["label"])]),_:1},8,["modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseTypeReference,"onUpdate:modelValue":g[2]||(g[2]=k=>r.value.databaseTypeReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.host.label")},{label:F(()=>[fe("div",sz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.host.label")),1),C(w,{teleported:!1,modelValue:r.value.hostType,"onUpdate:modelValue":g[3]||(g[3]=k=>r.value.hostType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.hostType==="content"?(Ve(),_t(S,{key:0,placeholder:h.$t("views.applicationWorkflow.nodes.databaseNode.host.placeholder"),"show-word-limit":"",modelValue:r.value.host,"onUpdate:modelValue":g[4]||(g[4]=k=>r.value.host=k),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.hostReference,"onUpdate:modelValue":g[5]||(g[5]=k=>r.value.hostReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.port.label")},{label:F(()=>[fe("div",cz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.port.label")),1),C(w,{teleported:!1,modelValue:r.value.portType,"onUpdate:modelValue":g[6]||(g[6]=k=>r.value.portType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.portType==="content"?(Ve(),_t(S,{key:0,placeholder:h.$t("views.applicationWorkflow.nodes.databaseNode.port.placeholder"),"show-word-limit":"",modelValue:r.value.port,"onUpdate:modelValue":g[7]||(g[7]=k=>r.value.port=k),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.portReference,"onUpdate:modelValue":g[8]||(g[8]=k=>r.value.portReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")},{label:F(()=>[fe("div",fz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")),1),C(w,{teleported:!1,modelValue:r.value.databaseNameType,"onUpdate:modelValue":g[9]||(g[9]=k=>r.value.databaseNameType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.databaseNameType==="content"?(Ve(),_t(S,{key:0,placeholder:h.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.placeholder"),"show-word-limit":"",modelValue:r.value.databaseName,"onUpdate:modelValue":g[10]||(g[10]=k=>r.value.databaseName=k),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseNameReference,"onUpdate:modelValue":g[11]||(g[11]=k=>r.value.databaseNameReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.username.label")},{label:F(()=>[fe("div",dz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.username.label")),1),C(w,{teleported:!1,modelValue:r.value.usernameType,"onUpdate:modelValue":g[12]||(g[12]=k=>r.value.usernameType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.usernameType==="content"?(Ve(),_t(S,{key:0,placeholder:h.$t("views.applicationWorkflow.nodes.databaseNode.username.placeholder"),"show-word-limit":"",modelValue:r.value.username,"onUpdate:modelValue":g[13]||(g[13]=k=>r.value.username=k),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.usernameReference,"onUpdate:modelValue":g[14]||(g[14]=k=>r.value.usernameReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.password.label")},{label:F(()=>[fe("div",pz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.password.label")),1),C(w,{teleported:!1,modelValue:r.value.passwordType,"onUpdate:modelValue":g[15]||(g[15]=k=>r.value.passwordType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.passwordType==="content"?(Ve(),_t(S,{key:0,placeholder:h.$t("views.applicationWorkflow.nodes.databaseNode.password.placeholder"),"show-word-limit":"",modelValue:r.value.password,"onUpdate:modelValue":g[16]||(g[16]=k=>r.value.password=k),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.passwordReference,"onUpdate:modelValue":g[17]||(g[17]=k=>r.value.passwordReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(O,{label:h.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")},{label:F(()=>[fe("div",hz,[fe("span",null,$e(h.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")),1),C(w,{teleported:!1,modelValue:r.value.sqlType,"onUpdate:modelValue":g[18]||(g[18]=k=>r.value.sqlType=k),size:"small",style:{width:"85px"}},{default:F(()=>[C(b,{label:h.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(b,{label:h.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.sqlType==="content"?(Ve(),_t(S,{key:0,placeholder:h.$t("views.applicationWorkflow.nodes.databaseNode.sql.placeholder"),"show-word-limit":"",modelValue:r.value.sql,"onUpdate:modelValue":g[19]||(g[19]=k=>r.value.sql=k),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:h.nodeModel,class:"w-full",placeholder:h.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.sqlReference,"onUpdate:modelValue":g[20]||(g[20]=k=>r.value.sqlReference=k)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class yz extends gi{constructor(t){super(t,vz)}}const mz={type:"database-node",model:bi,view:yz},gz=Object.freeze(Object.defineProperty({__proto__:null,default:mz},Symbol.toStringTag,{value:"Module"})),bz={class:"title-decoration-1 mb-8"},_z=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},o=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{He.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=te("el-form-item"),v=te("el-form"),h=te("el-card");return Ve(),_t(mi,{nodeModel:r.nodeModel},{default:F(()=>[fe("h5",bz,$e(r.$t("views.applicationWorkflow.nodeSetting")),1),C(h,{shadow:"never",class:"card-never"},{default:F(()=>[C(v,{onSubmit:s[1]||(s[1]=bn(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:F(()=>[C(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:F(()=>[C(Qr,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:o.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let wz=class extends gi{constructor(t){super(t,_z)}};const Ez={type:"document-extract-node",model:bi,view:wz},Oz=Object.freeze(Object.defineProperty({__proto__:null,default:Ez},Symbol.toStringTag,{value:"Module"})),xz={class:"flex-between"},Sz={class:"flex-between"},Az={class:"flex-between"},Tz={class:"flex-between"},Mz={class:"mr-4"},Pz={class:"flex align-center"},kz={class:"mr-4"},Nz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={titleType:"content",title:"",titleReference:[],xAxisType:"content",xAxis:"",xAxisReference:[],yAxisType:"content",yAxis:"",yAxisReference:[],chartTypeType:"content",chartType:"line",chartTypeReference:[],isResult:!1},r=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{He.set(t.nodeModel.properties,"nodeData",g)}});function s(g){He.set(t.nodeModel.properties.nodeData,"content",g)}const c=mt(),v=mt(),h=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return bo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"isResult",!0),He.set(t.nodeModel,"validate",h)}),(g,b)=>{const w=te("el-option"),O=te("el-select"),S=te("el-form-item"),P=te("AppIcon"),A=te("el-tooltip"),k=te("el-switch"),j=te("el-form"),R=te("el-card");return Ve(),_t(mi,{nodeModel:g.nodeModel},{default:F(()=>[C(R,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(j,{onSubmit:b[14]||(b[14]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"echartsNodeFormRef",ref:c},{default:F(()=>[C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.title.label")},{label:F(()=>[fe("div",xz,[fe("span",null,$e(g.$t("views.applicationWorkflow.nodes.echartsNode.title.label")),1),C(O,{teleported:!1,modelValue:r.value.titleType,"onUpdate:modelValue":b[0]||(b[0]=B=>r.value.titleType=B),size:"small",style:{width:"85px"}},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.titleType==="content"?(Ve(),_t(jd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.title.label"),modelValue:r.value.title,"onUpdate:modelValue":b[1]||(b[1]=B=>r.value.title=B),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.titleReference,"onUpdate:modelValue":b[2]||(b[2]=B=>r.value.titleReference=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label")},{label:F(()=>[fe("div",Sz,[fe("span",null,$e(g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label")),1),C(O,{teleported:!1,modelValue:r.value.xAxisType,"onUpdate:modelValue":b[3]||(b[3]=B=>r.value.xAxisType=B),size:"small",style:{width:"85px"}},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.xAxisType==="content"?(Ve(),_t(jd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label"),modelValue:r.value.xAxis,"onUpdate:modelValue":b[4]||(b[4]=B=>r.value.xAxis=B),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.xAxisReference,"onUpdate:modelValue":b[5]||(b[5]=B=>r.value.xAxisReference=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label")},{label:F(()=>[fe("div",Az,[fe("span",null,$e(g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label")),1),C(O,{teleported:!1,modelValue:r.value.yAxisType,"onUpdate:modelValue":b[6]||(b[6]=B=>r.value.yAxisType=B),size:"small",style:{width:"85px"}},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.yAxisType==="content"?(Ve(),_t(jd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label"),modelValue:r.value.yAxis,"onUpdate:modelValue":b[7]||(b[7]=B=>r.value.yAxis=B),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.yAxisReference,"onUpdate:modelValue":b[8]||(b[8]=B=>r.value.yAxisReference=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.label")},{label:F(()=>[fe("div",Tz,[fe("div",Mz,[fe("span",null,$e(g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.label")),1)]),C(O,{teleported:!1,modelValue:r.value.chartTypeType,"onUpdate:modelValue":b[9]||(b[9]=B=>r.value.chartTypeType=B),size:"small",style:{width:"85px"}},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.chartTypeType==="content"?(Ve(),_t(O,{key:0,teleported:!1,modelValue:r.value.chartType,"onUpdate:modelValue":b[10]||(b[10]=B=>r.value.chartType=B),size:"small"},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.lineChart"),value:"line"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.barChart"),value:"bar"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.pieChart"),value:"pie"},null,8,["label"])]),_:1},8,["modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.placeholder"),modelValue:r.value.chartTypeReference,"onUpdate:modelValue":b[11]||(b[11]=B=>r.value.chartTypeReference=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[13]||(b[13]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",Pz,[fe("div",kz,[fe("span",null,[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[15]||(b[15]=fe("span",{class:"danger"},"*",-1))])]),C(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(k,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[12]||(b[12]=B=>r.value.isResult=B)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class Rz extends gi{constructor(t){super(t,Nz)}}const Dz={type:"echarts-node",model:bi,view:Rz},Cz=Object.freeze(Object.defineProperty({__proto__:null,default:Dz},Symbol.toStringTag,{value:"Module"})),jz={class:"dialog-footer"},Iz=kr({__name:"AddFormCollect",props:{title:{default:Zt("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=mt(!1),s=mt(),c=mt({}),v=mt(!1),h=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var w;(w=s.value)==null||w.validate().then(()=>{var O;o.addFormField((O=s.value)==null?void 0:O.getData()),g()})};return t({close:g,open:h}),(w,O)=>{const S=te("el-button"),P=te("el-dialog");return Ve(),_t(P,{title:w.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:F(()=>[fe("span",jz,[C(S,{onClick:O[1]||(O[1]=bn(A=>r.value=!1,["prevent"]))},{default:F(()=>[At($e(w.$t("common.cancel")),1)]),_:1}),C(S,{type:"primary",onClick:O[2]||(O[2]=A=>b()),loading:v.value},{default:F(()=>[At($e(w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:F(()=>[C(Fw,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),Lz={class:"dialog-footer"},Fz=kr({__name:"EditFormCollect",props:{title:{default:Zt("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=mt(!1),s=mt(),c=mt({}),v=mt(0),h=mt(!1),g=(O,S)=>{r.value=!0,c.value=O,v.value=S},b=()=>{r.value=!1,c.value={}},w=()=>{var O;(O=s.value)==null||O.validate().then(()=>{var S;o.editFormField((S=s.value)==null?void 0:S.getData(),v.value),b()})};return t({close:b,open:g}),(O,S)=>{const P=te("el-button"),A=te("el-dialog");return Ve(),_t(A,{title:O.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=k=>r.value=k),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:F(()=>[fe("span",Lz,[C(P,{onClick:S[1]||(S[1]=bn(k=>r.value=!1,["prevent"]))},{default:F(()=>[At($e(O.$t("common.cancel")),1)]),_:1}),C(P,{type:"primary",onClick:S[2]||(S[2]=k=>w()),loading:h.value},{default:F(()=>[At($e(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:F(()=>[C(Fw,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=k=>c.value=k),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),$z={class:"title-decoration-1 mb-8"},Bz={class:"flex align-center"},Uz={class:"mr-4"},Vz={class:"flex-between"},Gz={class:"lighter"},Wz=["title"],zz={key:0},Hz=["title"],Xz={key:1},Yz=["title"],qz=["title"],Kz={class:"mr-4"},Zz=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(),r=(R,B)=>{const G=S.value.form_field_list.map((H,Y)=>B===Y?He.cloneDeep(R):He.cloneDeep(H));S.value.form_field_list=G,console.log("editFormField",R,B),c()},s=R=>{if(S.value.form_field_list.some(B=>B.field===R.field)){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+R.field);return}S.value.form_field_list=He.cloneDeep([...S.value.form_field_list,R]),console.log("addFormField",R),c()},c=()=>{const R=[{label:Zt("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"formData"},...S.value.form_field_list.map(B=>({value:B.field,label:typeof B.label=="string"?B.label:B.label.label}))];He.set(t.nodeModel.properties.config,"fields",R),t.nodeModel.clear_next_node_field(!1),j()},v=mt(),h=mt(),g=()=>{var R;(R=v.value)==null||R.open()},b=(R,B)=>{var G;(G=h.value)==null||G.open(He.cloneDeep(R),B)},w=R=>{S.value.form_field_list=S.value.form_field_list.filter(B=>B.field!==R.field),c()},O=mt({isResult:!0,form_content_format:`${Zt("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Zt("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),S=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",O.value),t.nodeModel.properties.nodeData),set:R=>{He.set(t.nodeModel.properties,"nodeData",R)}}),P=R=>{var B;if(R.default_value){const G=(B=R.option_list)==null?void 0:B.filter(H=>R.default_value.indexOf(H.value)>-1).map(H=>H.label).join(",");return G||R.default_value}if(R.default_value!==void 0)return R.default_value},A=()=>{var R;return(R=n.value)==null?void 0:R.validate()};function k(R){He.set(t.nodeModel.properties.nodeData,"form_content_format",R)}function j(){if(!o.value)return;const B=o.value.$el.querySelector(".el-table__body-wrapper tbody");B&&vr.create(B,{animation:150,ghostClass:"ghost-row",onEnd:G=>{if(G.oldIndex===void 0||G.newIndex===void 0)return;const H=[...S.value.form_field_list],[Y]=H.splice(G.oldIndex,1);H.splice(G.newIndex,0,Y),S.value.form_field_list=H,c()}})}return bo(()=>{He.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(R,B)=>{const G=te("AppIcon"),H=te("el-tooltip"),Y=te("MdEditorMagnify"),Q=te("el-form-item"),W=te("Plus"),I=te("el-icon"),z=te("el-button"),K=te("el-table-column"),q=te("el-tag"),ce=te("el-switch"),Ne=te("EditPen"),Oe=te("Delete"),Xe=te("el-table"),Ie=te("el-form"),Pe=te("el-card");return Ve(),_t(mi,{nodeModel:R.nodeModel},{default:F(()=>[fe("h5",$z,$e(R.$t("views.applicationWorkflow.nodeSetting")),1),C(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(Ie,{onSubmit:B[4]||(B[4]=bn(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:F(()=>[C(Q,{label:R.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:R.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:F(()=>[fe("div",Bz,[fe("div",Uz,[fe("span",null,[At($e(R.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),B[5]||(B[5]=fe("span",{class:"danger"},"*",-1))])]),C(H,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:F(()=>[C(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(Y,{title:R.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:S.value.form_content_format,"onUpdate:modelValue":B[0]||(B[0]=le=>S.value.form_content_format=le),style:{height:"150px"},onSubmitDialog:k},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:B[3]||(B[3]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",Vz,[fe("h5",Gz,$e(R.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),C(z,{link:"",type:"primary",onClick:B[1]||(B[1]=le=>g())},{default:F(()=>[C(I,{class:"mr-4"},{default:F(()=>[C(W)]),_:1}),At(" "+$e(R.$t("common.add")),1)]),_:1})])]),default:F(()=>[S.value.form_field_list.length>0?(Ve(),_t(Xe,{key:0,class:"border",data:S.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:F(()=>[C(K,{prop:"field",label:R.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:F(({row:le})=>[fe("span",{title:le.field,class:"ellipsis-1"},$e(le.field),9,Wz)]),_:1},8,["label"]),C(K,{prop:"label",label:R.$t("dynamicsForm.paramForm.name.label")},{default:F(({row:le})=>[le.label&&le.label.input_type==="TooltipLabel"?(Ve(),Dn("span",zz,[fe("span",{title:le.label.label,class:"ellipsis-1"},$e(le.label.label),9,Hz)])):(Ve(),Dn("span",Xz,[fe("span",{title:le.label,class:"ellipsis-1"},$e(le.label),9,Yz)]))]),_:1},8,["label"]),C(K,{label:R.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:F(({row:le})=>[C(q,{type:"info",class:"info-tag"},{default:F(()=>{var ye;return[At($e((ye=Jr(zI).find(Me=>Me.value===le.input_type))==null?void 0:ye.label),1)]}),_:2},1024)]),_:1},8,["label"]),C(K,{prop:"default_value",label:R.$t("dynamicsForm.default.label")},{default:F(({row:le})=>[fe("span",{title:le.default_value,class:"ellipsis-1"},$e(P(le)),9,qz)]),_:1},8,["label"]),C(K,{label:R.$t("common.required"),width:"85"},{default:F(({row:le})=>[fe("div",{onClick:B[2]||(B[2]=bn(()=>{},["stop"]))},[C(ce,{disabled:"",size:"small",modelValue:le.required,"onUpdate:modelValue":ye=>le.required=ye},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),C(K,{label:R.$t("common.operation"),align:"left",width:"90"},{default:F(({row:le,$index:ye})=>[fe("span",Kz,[C(H,{effect:"dark",content:R.$t("common.modify"),placement:"top"},{default:F(()=>[C(z,{type:"primary",text:"",onClick:bn(Me=>b(le,ye),["stop"])},{default:F(()=>[C(I,null,{default:F(()=>[C(Ne)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),C(H,{effect:"dark",content:R.$t("common.delete"),placement:"top"},{default:F(()=>[C(z,{type:"primary",text:"",onClick:Me=>w(le)},{default:F(()=>[C(I,null,{default:F(()=>[C(Oe)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):tr("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(Iz,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),C(Fz,{ref_key:"editFormCollectRef",ref:h,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class Jz extends gi{constructor(t){super(t,Zz)}}const Qz={type:"form-node",model:bi,view:Jz},eH=Object.freeze(Object.defineProperty({__proto__:null,default:Qz},Symbol.toStringTag,{value:"Module"})),tH={class:"title-decoration-1 mb-16"},nH={class:"lighter mb-8"},rH={key:0},oH={class:"flex-between"},iH={class:"flex"},aH={class:"flex"},lH={key:0,class:"danger"},uH={class:"flex align-center"},sH={class:"mr-4"},cH=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(),{params:{id:o}}=Rl.config.globalProperties.$route,r={inputFieldList:[],isResult:!1},s=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:g=>{He.set(t.nodeModel.properties,"nodeData",g)}}),c=mt(),v=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},h=()=>{if(!t.nodeModel.properties.nodeData.function_lib_id){He.set(t.nodeModel.properties,"status",500);return}fa.getFunctionLib(o,t.nodeModel.properties.nodeData.function_lib_id).then(g=>{const b=t.nodeModel.properties.nodeData.inputFieldList,w=g.data.inputFieldList.map(O=>{const S=b.find(P=>P.name==O.name);return S&&S.source==O.source?{...O,value:JSON.parse(JSON.stringify(S.value))}:{...O,value:O.source=="reference"?[]:""}});He.set(t.nodeModel.properties.nodeData,"inputFieldList",w),He.set(t.nodeModel.properties,"status",g.data.isActive?200:500)}).catch(g=>{He.set(t.nodeModel.properties,"status",500)})};return bo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"isResult",!0),h(),He.set(t.nodeModel,"validate",v)}),(g,b)=>{const w=te("auto-tooltip"),O=te("el-tag"),S=te("el-input"),P=te("el-form-item"),A=te("el-text"),k=te("el-card"),j=te("AppIcon"),R=te("el-tooltip"),B=te("el-switch"),G=te("el-form");return Ve(),_t(mi,{nodeModel:g.nodeModel},{default:F(()=>[fe("h5",tH,$e(g.$t("views.applicationWorkflow.nodeSetting")),1),fe("h5",nH,$e(g.$t("common.param.inputParam")),1),C(G,{onSubmit:b[2]||(b[2]=bn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:F(()=>[C(k,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:F(()=>{var H;return[((H=s.value.inputFieldList)==null?void 0:H.length)>0?(Ve(),Dn("div",rH,[(Ve(!0),Dn(Yo,null,Ci(s.value.inputFieldList,(Y,Q)=>(Ve(),_t(P,{key:Y.name,label:Y.name,prop:"inputFieldList."+Q+".value",rules:{required:Y.is_required,message:Y.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:F(()=>[fe("div",oH,[fe("div",iH,[fe("span",aH,[C(w,{content:Y.name,style:{"max-width":"130px"}},{default:F(()=>[At($e(Y.name),1)]),_:2},1032,["content"]),Y.is_required?(Ve(),Dn("span",lH,"*")):tr("",!0)]),C(O,{type:"info",class:"info-tag ml-4"},{default:F(()=>[At($e(Y.type),1)]),_:2},1024)])])]),default:F(()=>[Y.source==="reference"?(Ve(),_t(Qr,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Y.value,"onUpdate:modelValue":W=>Y.value=W},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ve(),_t(S,{key:1,modelValue:Y.value,"onUpdate:modelValue":W=>Y.value=W,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ve(),_t(A,{key:1,type:"info"},{default:F(()=>[At($e(g.$t("common.noData")),1)]),_:1}))]}),_:1}),C(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",uH,[fe("div",sH,[fe("span",null,[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[3]||(b[3]=fe("span",{class:"danger"},"*",-1))])]),C(R,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(B,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[0]||(b[0]=H=>s.value.isResult=H)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class fH extends gi{constructor(t){super(t,cH)}}const dH={type:"function-lib-node",model:bi,view:fH},pH=Object.freeze(Object.defineProperty({__proto__:null,default:dH},Symbol.toStringTag,{value:"Module"})),hH={class:"title-decoration-1 mb-16"},vH={class:"flex-between"},yH={class:"lighter mb-8"},mH={key:0},gH={class:"flex-between"},bH={class:"flex"},_H={class:"flex"},wH={key:0,class:"danger"},EH={class:"lighter mb-8"},OH={key:0,class:"mb-8"},xH={class:"flex align-center"},SH={class:"mr-4"},AH=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=mt(),r=mt(),s={code:"",inputFieldList:[],isResult:!1},c=mt(null),v=mt(!1),h=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:A=>{He.set(t.nodeModel.properties,"nodeData",A)}}),g=mt(),b=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(k=>Promise.reject({node:t.nodeModel,errMessage:k}))};function w(A){He.set(t.nodeModel.properties.nodeData,"code",A)}function O(A,k){typeof k<"u"&&(c.value=k),o.value.open(A)}function S(A){const k=He.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);k.splice(A,1),He.set(t.nodeModel.properties.nodeData,"inputFieldList",k)}function P(A){const k=He.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),j={...A,value:A.source==="reference"?[]:""};c.value!==null?k.splice(c.value,1,j):k.push(j),He.set(t.nodeModel.properties.nodeData,"inputFieldList",k),c.value=null}return bo(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"isResult",!0),He.set(t.nodeModel,"validate",b),setTimeout(()=>{v.value=!0},100)}),(A,k)=>{const j=te("Plus"),R=te("el-icon"),B=te("el-button"),G=te("auto-tooltip"),H=te("el-tag"),Y=te("EditPen"),Q=te("Delete"),W=te("el-input"),I=te("el-form-item"),z=te("el-text"),K=te("el-card"),q=te("CodemirrorEditor"),ce=te("AppIcon"),Ne=te("el-tooltip"),Oe=te("el-switch"),Xe=te("el-form");return Ve(),_t(mi,{nodeModel:A.nodeModel},{default:F(()=>[fe("h5",hH,$e(A.$t("views.applicationWorkflow.nodeSetting")),1),fe("div",vH,[fe("h5",yH,$e(A.$t("common.param.inputParam")),1),C(B,{link:"",type:"primary",onClick:k[0]||(k[0]=Ie=>O())},{default:F(()=>[C(R,{class:"mr-4"},{default:F(()=>[C(j)]),_:1}),At(" "+$e(A.$t("common.add")),1)]),_:1})]),C(Xe,{onSubmit:k[4]||(k[4]=bn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:h.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:F(()=>[C(K,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:F(()=>{var Ie;return[((Ie=h.value.inputFieldList)==null?void 0:Ie.length)>0?(Ve(),Dn("div",mH,[(Ve(!0),Dn(Yo,null,Ci(h.value.inputFieldList,(Pe,le)=>(Ve(),_t(I,{key:le,label:Pe.name,prop:"inputFieldList."+le+".value",rules:{required:Pe.is_required,message:Pe.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:F(()=>[fe("div",gH,[fe("div",bH,[fe("span",_H,[C(G,{content:Pe.name,style:{"max-width":"130px"}},{default:F(()=>[At($e(Pe.name),1)]),_:2},1032,["content"]),Pe.is_required?(Ve(),Dn("span",wH,"*")):tr("",!0)]),C(H,{type:"info",class:"info-tag ml-4"},{default:F(()=>[At($e(Pe.type),1)]),_:2},1024)]),fe("div",null,[C(B,{text:"",onClick:bn(ye=>O(Pe,le),["stop"])},{default:F(()=>[C(R,null,{default:F(()=>[C(Y)]),_:1})]),_:2},1032,["onClick"]),C(B,{text:"",onClick:ye=>S(le),style:{"margin-left":"4px !important"}},{default:F(()=>[C(R,null,{default:F(()=>[C(Q)]),_:1})]),_:2},1032,["onClick"])])])]),default:F(()=>[Pe.source==="reference"?(Ve(),_t(Qr,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Pe.value,"onUpdate:modelValue":ye=>Pe.value=ye,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ve(),_t(W,{key:1,modelValue:Pe.value,"onUpdate:modelValue":ye=>Pe.value=ye,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ve(),_t(z,{key:1,type:"info"},{default:F(()=>[At($e(A.$t("common.noData")),1)]),_:1}))]}),_:1}),fe("h5",EH,$e(A.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(Ve(),Dn("div",OH,[C(q,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:h.value.code,"onUpdate:modelValue":k[1]||(k[1]=Ie=>h.value.code=Ie),onWheel:n,style:{height:"130px !important"},onSubmitDialog:w},null,8,["title","modelValue"])])):tr("",!0),C(I,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:k[3]||(k[3]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",xH,[fe("div",SH,[fe("span",null,[At($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),k[5]||(k[5]=fe("span",{class:"danger"},"*",-1))])]),C(Ne,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(ce,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(Oe,{size:"small",modelValue:h.value.isResult,"onUpdate:modelValue":k[2]||(k[2]=Ie=>h.value.isResult=Ie)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),C(AL,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class TH extends gi{constructor(t){super(t,AH)}}const MH={type:"function-node",model:bi,view:TH},PH=Object.freeze(Object.defineProperty({__proto__:null,default:MH},Symbol.toStringTag,{value:"Module"})),kH={class:"title-decoration-1 mb-8"},NH={class:"flex-between w-full"},RH={class:"flex align-center"},DH={class:"mr-4"},CH={class:"flex align-center"},jH={class:"mr-4"},IH={class:"flex align-center"},LH={class:"mr-4"},FH=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=mt(null),s=mt(),c=mt(),v=()=>{var R;return(R=c.value)==null?void 0:R.validate().catch(B=>Promise.reject({node:o.nodeModel,errMessage:B}))},h=R=>R.ctrlKey===!0?(R.preventDefault(),!0):(R.stopPropagation(),!0),b={modelId:"",system:"",prompt:`{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},w=lo({get:()=>(o.nodeModel.properties.nodeData||He.set(o.nodeModel.properties,"nodeData",b),o.nodeModel.properties.nodeData),set:R=>{He.set(o.nodeModel.properties,"nodeData",R)}});function O(){n?fa.getApplicationTTIModel(n).then(R=>{r.value=He.groupBy(R==null?void 0:R.data,"provider")}):t.asyncGetModel().then(R=>{r.value=He.groupBy(R==null?void 0:R.data,"provider")})}const S=()=>{var R;w.value.modelId?(R=s.value)==null||R.reset_default(w.value.modelId,n):A({})},P=R=>{var B;R&&((B=s.value)==null||B.open(R,n,w.value.modelParamsSetting))};function A(R){He.set(o.nodeModel.properties.nodeData,"modelParamsSetting",R)}function k(R){He.set(o.nodeModel.properties.nodeData,"prompt",R)}function j(R){He.set(o.nodeModel.properties.nodeData,"negative_prompt",R)}return bo(()=>{O(),He.set(o.nodeModel,"validate",v)}),(R,B)=>{const G=te("Setting"),H=te("el-icon"),Y=te("el-button"),Q=te("el-form-item"),W=te("AppIcon"),I=te("el-tooltip"),z=te("MdEditorMagnify"),K=te("el-switch"),q=te("el-form"),ce=te("el-card");return Ve(),_t(mi,{"node-model":R.nodeModel},{default:F(()=>[fe("h5",kH,$e(R.$t("views.applicationWorkflow.nodeSetting")),1),C(ce,{shadow:"never",class:"card-never"},{default:F(()=>[C(q,{onSubmit:B[6]||(B[6]=bn(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:F(()=>[C(Q,{label:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:F(()=>[fe("div",NH,[fe("div",null,[fe("span",null,[At($e(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),B[7]||(B[7]=fe("span",{class:"danger"},"*",-1))])]),C(Y,{disabled:!w.value.modelId,type:"primary",link:"",onClick:B[0]||(B[0]=Ne=>P(w.value.modelId)),onRefreshForm:A},{default:F(()=>[C(H,null,{default:F(()=>[C(G)]),_:1})]),_:1},8,["disabled"])])]),default:F(()=>[C(jw,{onChange:S,onWheel:h,teleported:!1,modelValue:w.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Ne=>w.value.modelId=Ne),placeholder:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:R.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:F(()=>[fe("div",RH,[fe("div",DH,[fe("span",null,[At($e(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),B[8]||(B[8]=fe("span",{class:"danger"},"*",-1))])]),C(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:F(()=>[C(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(z,{onWheel:h,title:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:w.value.prompt,"onUpdate:modelValue":B[2]||(B[2]=Ne=>w.value.prompt=Ne),style:{height:"150px"},onSubmitDialog:k},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:R.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:F(()=>[fe("div",CH,[fe("div",jH,[fe("span",null,$e(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),C(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:F(()=>[C(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(z,{onWheel:h,title:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:w.value.negative_prompt,"onUpdate:modelValue":B[3]||(B[3]=Ne=>w.value.negative_prompt=Ne),placeholder:R.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:j},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),C(Q,{label:R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[5]||(B[5]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",IH,[fe("div",LH,[fe("span",null,[At($e(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),B[9]||(B[9]=fe("span",{class:"danger"},"*",-1))])]),C(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(K,{size:"small",modelValue:w.value.isResult,"onUpdate:modelValue":B[4]||(B[4]=Ne=>w.value.isResult=Ne)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});let $H=class extends gi{constructor(t){super(t,FH)}};const BH={type:"image-generate-node",model:bi,view:$H},UH=Object.freeze(Object.defineProperty({__proto__:null,default:BH},Symbol.toStringTag,{value:"Module"})),VH={class:"title-decoration-1 mb-8"},GH={class:"flex-between w-full"},WH={class:"flex align-center"},zH={class:"mr-4"},HH={class:"flex-between"},XH={class:"flex align-center"},YH={class:"mr-4"},qH=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=mt(null),s=mt(),c=mt(),v=mt(),h=()=>{var R;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(R=c.value)==null?void 0:R.validate()]).catch(B=>Promise.reject({node:o.nodeModel,errMessage:B}))},g=R=>R.ctrlKey===!0?(R.preventDefault(),!0):(R.stopPropagation(),!0),w={modelId:"",system:"",prompt:`{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},O=lo({get:()=>(o.nodeModel.properties.nodeData||He.set(o.nodeModel.properties,"nodeData",w),o.nodeModel.properties.nodeData),set:R=>{He.set(o.nodeModel.properties,"nodeData",R)}});function S(){n?fa.getApplicationImageModel(n).then(R=>{r.value=He.groupBy(R==null?void 0:R.data,"provider")}):t.asyncGetModel().then(R=>{r.value=He.groupBy(R==null?void 0:R.data,"provider")})}function P(R){He.set(o.nodeModel.properties.nodeData,"system",R)}function A(R){He.set(o.nodeModel.properties.nodeData,"prompt",R)}const k=R=>{var B;R&&((B=s.value)==null||B.open(R,n,O.value.modelParamsSetting))};function j(R){He.set(o.nodeModel.properties.nodeData,"modelParamsSetting",R)}return bo(()=>{S(),He.set(o.nodeModel,"validate",h)}),(R,B)=>{const G=te("Setting"),H=te("el-icon"),Y=te("el-button"),Q=te("ModelSelect"),W=te("el-form-item"),I=te("MdEditorMagnify"),z=te("AppIcon"),K=te("el-tooltip"),q=te("el-option"),ce=te("el-select"),Ne=te("el-input-number"),Oe=te("el-switch"),Xe=te("el-form"),Ie=te("el-card");return Ve(),_t(mi,{"node-model":R.nodeModel},{default:F(()=>[fe("h5",VH,$e(R.$t("views.applicationWorkflow.nodeSetting")),1),C(Ie,{shadow:"never",class:"card-never"},{default:F(()=>[C(Xe,{onSubmit:B[9]||(B[9]=bn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:F(()=>[C(W,{label:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:F(()=>[fe("div",GH,[fe("div",null,[fe("span",null,[At($e(Jr(Zt)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),B[10]||(B[10]=fe("span",{class:"danger"},"*",-1))])]),C(Y,{disabled:!O.value.modelId,type:"primary",link:"",onClick:B[0]||(B[0]=Pe=>k(O.value.modelId)),onRefreshForm:j},{default:F(()=>[C(H,null,{default:F(()=>[C(G)]),_:1})]),_:1},8,["disabled"])])]),default:F(()=>[C(Q,{onWheel:g,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Pe=>O.value.modelId=Pe),placeholder:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.application.applicationForm.form.roleSettings.label")},{default:F(()=>[C(I,{title:R.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=Pe=>O.value.system=Pe),style:{height:"100px"},onSubmitDialog:P,placeholder:R.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(W,{label:R.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:R.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:F(()=>[fe("div",WH,[fe("div",zH,[fe("span",null,[At($e(R.$t("views.application.applicationForm.form.prompt.label")),1),B[11]||(B[11]=fe("span",{class:"danger"},"*",-1))])]),C(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:F(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(I,{onWheel:g,title:R.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=Pe=>O.value.prompt=Pe),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(W,null,{label:F(()=>[fe("div",HH,[fe("div",null,$e(R.$t("views.application.applicationForm.form.historyRecord.label")),1),C(ce,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":B[4]||(B[4]=Pe=>O.value.dialogue_type=Pe),type:"small",style:{width:"100px"}},{default:F(()=>[C(q,{label:R.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),C(q,{label:R.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[C(Ne,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":B[5]||(B[5]=Pe=>O.value.dialogueNumber=Pe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),C(W,{label:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),B[12]||(B[12]=fe("span",{class:"danger"},"*",-1))]),default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:v,nodeModel:R.nodeModel,class:"w-full",placeholder:R.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.imageList,"onUpdate:modelValue":B[6]||(B[6]=Pe=>O.value.imageList=Pe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[8]||(B[8]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",XH,[fe("div",YH,[fe("span",null,[At($e(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),B[13]||(B[13]=fe("span",{class:"danger"},"*",-1))])]),C(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(Oe,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":B[7]||(B[7]=Pe=>O.value.isResult=Pe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});let KH=class extends gi{constructor(t){super(t,qH)}};const ZH={type:"image-understand-node",model:bi,view:KH},JH=Object.freeze(Object.defineProperty({__proto__:null,default:ZH},Symbol.toStringTag,{value:"Module"})),QH={class:"title-decoration-1 mb-8"},eX={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},tX={class:"flex-between"},nX={class:"ml-4"},rX={class:"title-decoration-1 mb-8"},oX={key:0,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},iX={class:"flex-between"},aX={key:0,class:"danger"},lX={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},uX={class:"flex-between"},sX={key:0,class:"danger"},cX=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(),o=mt(!1),r={mcpTool:"",mcp_tools:[],sseUrl:"",toolParams:{},tool_form_field:[],params_nested:""};function s(){if(!v.value.sseUrl){Ba(Zt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}fa.getMcpTools({sseUrl:v.value.sseUrl},o).then(b=>{v.value.mcp_tools=b.data,Wp(Zt("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess"))})}function c(){var w,O,S,P;v.value.sseUrl=v.value.mcp_tools.filter(A=>A.name===v.value.mcpTool)[0].server;const b=v.value.mcp_tools.filter(A=>A.name===v.value.mcpTool)[0].args_schema;v.value.tool_form_field=[];for(const A in b.properties){let k=b.properties[A].properties;if(k){v.value.params_nested=A;for(const j in k){let R="TextInput";k[j].type==="string"?R="TextInput":k[j].type==="number"?R="NumberInput":k[j].type==="boolean"?R="SwitchInput":(k[j].type==="array"||k[j].type==="object")&&(R="JsonInput"),console.log(k[j]),v.value.tool_form_field.push({field:j,label:{input_type:"TooltipLabel",label:j,attrs:{tooltip:k[j].description},props_info:{}},input_type:R,source:"referencing",required:((w=b.properties[A].required)==null?void 0:w.indexOf(j))!==-1,props_info:{rules:[{required:((O=b.properties[A].required)==null?void 0:O.indexOf(j))!==-1,message:Zt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{v.value.params_nested="";let j="TextInput";b.properties[A].type==="string"?j="TextInput":b.properties[A].type==="number"?j="NumberInput":b.properties[A].type==="boolean"?j="SwitchInput":(b.properties[A].type==="array"||b.properties[A].type==="object")&&(j="JsonInput"),console.log(b.properties[A]),v.value.tool_form_field.push({field:A,label:{input_type:"TooltipLabel",label:A,attrs:{tooltip:b.properties[A].description},props_info:{}},input_type:j,source:"referencing",required:((S=b.required)==null?void 0:S.indexOf(A))!==-1,props_info:{rules:[{required:((P=b.required)==null?void 0:P.indexOf(A))!==-1,message:Zt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}v.value.params_nested?v.value.toolParams={[v.value.params_nested]:{}}:v.value.toolParams={}}const v=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:b=>{He.set(t.nodeModel.properties,"nodeData",b)}}),h=mt(),g=async()=>{if(n.value){const b=v.value.tool_form_field.filter(w=>w.required).map(w=>w.label.label);if(b.length>0){for(const w of b)if(v.value.params_nested){if(!v.value.toolParams[v.value.params_nested][w])return Promise.reject({node:t.nodeModel,errMessage:w+Zt("dynamicsForm.tip.requiredMessage")})}else if(!v.value.toolParams[w])return Promise.reject({node:t.nodeModel,errMessage:w+Zt("dynamicsForm.tip.requiredMessage")})}}if(h.value){const b=He.cloneDeep(v.value);if(!b.sseUrl)return Promise.reject({node:t.nodeModel,errMessage:Zt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!b.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:Zt("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};return bo(()=>{var b;typeof((b=t.nodeModel.properties.nodeData)==null?void 0:b.is_result)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"is_result",!0),He.set(t.nodeModel,"validate",g)}),(b,w)=>{const O=te("el-input"),S=te("el-form-item"),P=te("Plus"),A=te("el-icon"),k=te("el-button"),j=te("el-tooltip"),R=te("el-option"),B=te("el-select"),G=te("el-form"),H=te("el-input-number"),Y=te("el-switch"),Q=Id("loading");return Ve(),_t(mi,{nodeModel:b.nodeModel},{default:F(()=>[fe("h5",QH,$e(b.$t("views.applicationWorkflow.nodeSetting")),1),fe("div",eX,[C(G,{onSubmit:w[4]||(w[4]=bn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:h,"hide-required-asterisk":""},{default:F(()=>[C(S,{label:b.$t("views.mcpLib.mcpForm.form.mcpSseUrl.label")},{default:F(()=>[C(O,{modelValue:v.value.sseUrl,"onUpdate:modelValue":w[0]||(w[0]=W=>v.value.sseUrl=W),type:"textarea",placeholder:b.$t("views.mcpLib.mcpForm.form.mcpSseUrl.placeholder"),maxlength:"256","show-word-limit":"",autosize:{minRows:3},onBlur:w[1]||(w[1]=W=>{var I;return v.value.sseUrl=(I=v.value.sseUrl)==null?void 0:I.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(S,null,{label:F(()=>[fe("div",tX,[fe("span",null,$e(b.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),C(k,{type:"primary",link:"",onClick:w[2]||(w[2]=W=>s())},{default:F(()=>[C(A,{class:"mr-4"},{default:F(()=>[C(P)]),_:1}),At(" "+$e(b.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:F(()=>[C(B,{modelValue:v.value.mcpTool,"onUpdate:modelValue":w[3]||(w[3]=W=>v.value.mcpTool=W),onChange:c,filterable:""},{default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(v.value.mcp_tools,W=>(Ve(),_t(R,{key:W.value,label:W.name,value:W.name,class:"flex align-center"},{default:F(()=>[C(j,{effect:"dark",content:W.description,placement:"top-start","popper-class":"max-w-350"},{default:F(()=>[C(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),fe("span",nX,$e(W.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),fe("h5",rX,$e(b.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),v.value.toolParams[v.value.params_nested]?(Ve(),Dn("div",oX,[v.value.mcpTool?Ua((Ve(),_t(G,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:w[6]||(w[6]=bn(()=>{},["prevent"]))},{default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(v.value.tool_form_field,W=>(Ve(),_t(S,{key:W.field,required:W.required},{label:F(()=>[fe("div",iX,[fe("div",null,[C(xS,{label:W.label.label,tooltip:W.label.attrs.tooltip},null,8,["label","tooltip"]),W.required?(Ve(),Dn("span",aX,"*")):tr("",!0)]),C(B,{teleported:!1,modelValue:W.source,"onUpdate:modelValue":I=>W.source=I,size:"small",style:{width:"85px"},onChange:w[5]||(w[5]=I=>v.value.toolParams[v.value.params_nested]={})},{default:F(()=>[C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:F(()=>[W.source==="custom"&&W.input_type==="TextInput"?(Ve(),_t(O,{key:0,modelValue:v.value.toolParams[v.value.params_nested][W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[v.value.params_nested][W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="NumberInput"?(Ve(),_t(H,{key:1,modelValue:v.value.toolParams[v.value.params_nested][W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[v.value.params_nested][W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="SwitchInput"?(Ve(),_t(Y,{key:2,modelValue:v.value.toolParams[v.value.params_nested][W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[v.value.params_nested][W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="JsonInput"?(Ve(),_t(O,{key:3,modelValue:v.value.toolParams[v.value.params_nested][W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[v.value.params_nested][W.label.label]=I,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):tr("",!0),W.source==="referencing"?(Ve(),_t(Qr,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.toolParams[v.value.params_nested][W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[v.value.params_nested][W.label.label]=I},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):tr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Q,o.value]]):tr("",!0)])):(Ve(),Dn("div",lX,[v.value.mcpTool?Ua((Ve(),_t(G,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:w[7]||(w[7]=bn(()=>{},["prevent"]))},{default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(v.value.tool_form_field,W=>(Ve(),_t(S,{key:W.field,required:W.required},{label:F(()=>[fe("div",uX,[fe("div",null,[C(xS,{label:W.label.label,tooltip:W.label.attrs.tooltip},null,8,["label","tooltip"]),W.required?(Ve(),Dn("span",sX,"*")):tr("",!0)]),C(B,{teleported:!1,modelValue:W.source,"onUpdate:modelValue":I=>W.source=I,size:"small",style:{width:"85px"}},{default:F(()=>[C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(R,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:F(()=>[W.source==="custom"&&W.input_type==="TextInput"?(Ve(),_t(O,{key:0,modelValue:v.value.toolParams[W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="NumberInput"?(Ve(),_t(H,{key:1,modelValue:v.value.toolParams[W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="SwitchInput"?(Ve(),_t(Y,{key:2,modelValue:v.value.toolParams[W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[W.label.label]=I},null,8,["modelValue","onUpdate:modelValue"])):W.source==="custom"&&W.input_type==="JsonInput"?(Ve(),_t(O,{key:3,modelValue:v.value.toolParams[W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[W.label.label]=I,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):tr("",!0),W.source==="referencing"?(Ve(),_t(Qr,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.toolParams[W.label.label],"onUpdate:modelValue":I=>v.value.toolParams[W.label.label]=I},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):tr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[Q,o.value]]):tr("",!0)]))]),_:1},8,["nodeModel"])}}});class fX extends gi{constructor(t){super(t,cX)}}const dX={type:"mcp-node",model:bi,view:fX},pX=Object.freeze(Object.defineProperty({__proto__:null,default:dX},Symbol.toStringTag,{value:"Module"})),hX={class:"title-decoration-1 mb-8"},vX={class:"flex-between"},yX={class:"flex align-center"},mX={class:"mr-4"},gX={class:"flex align-center"},bX={class:"mr-4"},_X=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=mt(),o=R=>R.ctrlKey===!0?(R.preventDefault(),!0):(R.stopPropagation(),!0),r=R=>{var B;R?(B=n.value)==null||B.reset_default(R,v):b({})};function s(R){He.set(S.nodeModel.properties.nodeData,"prompt",R)}function c(R){He.set(S.nodeModel.properties.nodeData,"system",R)}const{params:{id:v}}=Rl.config.globalProperties.$route,h=`${Zt("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Zt("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={modelId:"",system:Zt("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:h,dialogueNumber:1,isResult:!1};function b(R){He.set(S.nodeModel.properties.nodeData,"modelParamsSetting",R)}const w=R=>{var B;R&&((B=n.value)==null||B.open(R,v,O.value.modelParamsSetting))},O=lo({get:()=>(S.nodeModel.properties.nodeData||He.set(S.nodeModel.properties,"nodeData",g),S.nodeModel.properties.nodeData),set:R=>{He.set(S.nodeModel.properties,"nodeData",R)}}),S=e,P=mt(),A=mt(null),k=()=>{var R;return(R=P.value)==null?void 0:R.validate().catch(B=>Promise.reject({node:S.nodeModel,errMessage:B}))};function j(){v?fa.getApplicationModel(v).then(R=>{A.value=He.groupBy(R==null?void 0:R.data,"provider")}):t.asyncGetModel().then(R=>{A.value=He.groupBy(R==null?void 0:R.data,"provider")})}return bo(()=>{var R;j(),typeof((R=S.nodeModel.properties.nodeData)==null?void 0:R.isResult)>"u"&&Pf(S.nodeModel)&&He.set(S.nodeModel.properties.nodeData,"isResult",!0),He.set(S.nodeModel,"validate",k)}),(R,B)=>{const G=te("Setting"),H=te("el-icon"),Y=te("el-button"),Q=te("ModelSelect"),W=te("el-form-item"),I=te("MdEditorMagnify"),z=te("AppIcon"),K=te("EditPen"),q=te("el-tooltip"),ce=te("el-input-number"),Ne=te("el-switch"),Oe=te("el-form"),Xe=te("el-card");return Ve(),_t(mi,{nodeModel:R.nodeModel},{default:F(()=>[fe("h5",hX,$e(R.$t("views.applicationWorkflow.nodeSetting")),1),C(Xe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(Oe,{onSubmit:B[7]||(B[7]=bn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:P,"hide-required-asterisk":""},{default:F(()=>[C(W,{label:R.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:R.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:F(()=>[fe("div",vX,[fe("div",null,[fe("span",null,[At($e(R.$t("views.application.applicationForm.form.aiModel.label")),1),B[8]||(B[8]=fe("span",{class:"danger"},"*",-1))])]),C(Y,{type:"primary",link:"",disabled:!O.value.modelId,onClick:B[0]||(B[0]=Ie=>w(O.value.modelId)),onRefreshForm:b},{default:F(()=>[C(H,null,{default:F(()=>[C(G)]),_:1})]),_:1},8,["disabled"])])]),default:F(()=>[C(Q,{onChange:r,onWheel:o,teleported:!1,modelValue:O.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Ie=>O.value.modelId=Ie),placeholder:R.$t("views.application.applicationForm.form.aiModel.placeholder"),options:A.value,onSubmitModel:j,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.application.applicationForm.form.roleSettings.label")},{default:F(()=>[C(I,{title:R.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=Ie=>O.value.system=Ie),style:{height:"100px"},onSubmitDialog:c,placeholder:R.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),C(W,{label:R.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:R.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:F(()=>[fe("div",yX,[fe("div",mX,[fe("span",null,[At($e(R.$t("views.application.applicationForm.form.prompt.label")),1),B[9]||(B[9]=fe("span",{class:"danger"},"*",-1))])]),C(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:F(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"}),C(H,null,{default:F(()=>[C(K)]),_:1})]),_:1})])]),default:F(()=>[C(I,{onWheel:o,title:R.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=Ie=>O.value.prompt=Ie),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),C(W,{label:R.$t("views.application.applicationForm.form.historyRecord.label")},{default:F(()=>[C(ce,{modelValue:O.value.dialogueNumber,"onUpdate:modelValue":B[4]||(B[4]=Ie=>O.value.dialogueNumber=Ie),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),C(W,{label:R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[6]||(B[6]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",gX,[fe("div",bX,[fe("span",null,[At($e(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),B[10]||(B[10]=fe("span",{class:"danger"},"*",-1))])]),C(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(R.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(Ne,{size:"small",modelValue:O.value.isResult,"onUpdate:modelValue":B[5]||(B[5]=Ie=>O.value.isResult=Ie)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(qy,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:b},null,512)]),_:1},8,["nodeModel"])}}});class wX extends gi{constructor(t){super(t,_X)}}const EX={type:"question-node",model:bi,view:wX},OX=Object.freeze(Object.defineProperty({__proto__:null,default:EX},Symbol.toStringTag,{value:"Module"})),xX={class:"flex-between"},SX={class:"flex align-center"},AX={class:"mr-4"},TX=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={replyType:"content",content:"",fields:[],isResult:!1},r=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{He.set(t.nodeModel.properties,"nodeData",g)}});function s(g){He.set(t.nodeModel.properties.nodeData,"content",g)}const c=mt(),v=mt(),h=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return bo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"isResult",!0),He.set(t.nodeModel,"validate",h)}),(g,b)=>{const w=te("el-option"),O=te("el-select"),S=te("el-form-item"),P=te("AppIcon"),A=te("el-tooltip"),k=te("el-switch"),j=te("el-form"),R=te("el-card");return Ve(),_t(mi,{nodeModel:g.nodeModel},{default:F(()=>[C(R,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(j,{onSubmit:b[5]||(b[5]=bn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:F(()=>[C(S,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:F(()=>[fe("div",xX,[fe("span",null,$e(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),C(O,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=B=>r.value.replyType=B),size:"small",style:{width:"85px"}},{default:F(()=>[C(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:F(()=>[r.value.replyType==="content"?(Ve(),_t(jd,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=B=>r.value.content=B),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ve(),_t(Qr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=B=>r.value.fields=B)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),C(S,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",SX,[fe("div",AX,[fe("span",null,[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[6]||(b[6]=fe("span",{class:"danger"},"*",-1))])]),C(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(k,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=B=>r.value.isResult=B)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class MX extends gi{constructor(t){super(t,TX)}}const PX={type:"reply-node",model:bi,view:MX},kX=Object.freeze(Object.defineProperty({__proto__:null,default:PX},Symbol.toStringTag,{value:"Module"})),NX={class:"p-16"},RX={class:"flex align-center"},DX={class:"mr-4"},CX={class:"dialog-footer p-16"},jX=kr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=mt(),s=mt({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=mt(!1),v=mt(!1);$M(c,b=>{b||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const h=b=>{s.value={...s.value,...He.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((w,O)=>{w&&(o("refresh",He.cloneDeep(s.value)),c.value=!1)})};return t({open:h}),(b,w)=>{const O=te("AppIcon"),S=te("el-tooltip"),P=te("el-input-number"),A=te("el-form-item"),k=te("el-col"),j=te("el-row"),R=te("el-slider"),B=te("el-form"),G=te("el-scrollbar"),H=te("el-button"),Y=te("el-dialog");return Ve(),_t(Y,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":w[5]||(w[5]=Q=>c.value=Q),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:F(()=>[fe("span",CX,[C(H,{onClick:w[3]||(w[3]=bn(Q=>c.value=!1,["prevent"]))},{default:F(()=>[At($e(b.$t("common.cancel")),1)]),_:1}),C(H,{type:"primary",onClick:w[4]||(w[4]=Q=>g()),loading:v.value},{default:F(()=>[At($e(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:F(()=>[fe("div",null,[C(G,{always:""},{default:F(()=>[fe("div",NX,[C(B,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:F(()=>[C(j,{gutter:20},{default:F(()=>[C(k,{span:12},{default:F(()=>[C(A,null,{label:F(()=>[fe("div",RX,[fe("span",DX,"Score "+$e(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),C(S,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:F(()=>[C(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:F(()=>[C(P,{modelValue:s.value.similarity,"onUpdate:modelValue":w[0]||(w[0]=Q=>s.value.similarity=Q),min:0,max:s.value.searchMode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),C(k,{span:12},{default:F(()=>[C(A,{label:b.$t("views.application.applicationForm.dialog.topReferences")},{default:F(()=>[C(P,{modelValue:s.value.topN,"onUpdate:modelValue":w[1]||(w[1]=Q=>s.value.topN=Q),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C(A,{label:b.$t("views.application.applicationForm.dialog.maxCharacters")},{default:F(()=>[C(R,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":w[2]||(w[2]=Q=>s.value.maxParagraphCharNumber=Q),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}});const IX={class:"flex-between"},LX={class:"flex-between"},FX={class:"w-full"},$X={class:"flex-between"},BX={class:"flex-between"},UX=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),n=e,o=mt(),{params:{id:r}}=Rl.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3}},c=mt(null),v=()=>{var j;(j=o.value)==null||j.open(b.value.reranker_setting)},h=j=>{const R=He.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);R.splice(j,1),He.set(n.nodeModel.properties.nodeData,"reranker_reference_list",R)},g=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),b=lo({get:()=>(n.nodeModel.properties.nodeData||He.set(n.nodeModel.properties,"nodeData",s),n.nodeModel.properties.nodeData),set:j=>{He.set(n.nodeModel.properties,"nodeData",j)}});function w(j){He.set(n.nodeModel.properties.nodeData,"reranker_setting",j)}function O(){r?fa.getApplicationRerankerModel(r).then(j=>{c.value=He.groupBy(j==null?void 0:j.data,"provider")}):t.asyncGetModel({modelType:"RERANKER"}).then(j=>{c.value=He.groupBy(j==null?void 0:j.data,"provider")})}const S=()=>{const j=He.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);j.push([]),He.set(n.nodeModel.properties.nodeData,"reranker_reference_list",j)},P=mt(),A=mt(),k=()=>{var j;return Promise.all([A.value?A.value.validate():Promise.resolve(""),(j=P.value)==null?void 0:j.validate()]).catch(R=>Promise.reject({node:n.nodeModel,errMessage:R}))};return bo(()=>{O(),He.set(n.nodeModel,"validate",k)}),(j,R)=>{const B=te("Plus"),G=te("el-icon"),H=te("el-button"),Y=te("el-form-item"),Q=te("el-col"),W=te("Delete"),I=te("el-row"),z=te("Setting"),K=te("ModelSelect"),q=te("el-form"),ce=te("el-card");return Ve(),_t(mi,{nodeModel:j.nodeModel},{default:F(()=>[C(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(q,{onSubmit:R[2]||(R[2]=bn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:P,"hide-required-asterisk":""},{default:F(()=>[C(Y,{label:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:F(()=>[fe("div",IX,[fe("span",null,[At($e(j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),R[3]||(R[3]=fe("span",{class:"danger"},"*",-1))]),C(H,{onClick:S,link:"",type:"primary"},{default:F(()=>[C(G,{class:"mr-4"},{default:F(()=>[C(B)]),_:1})]),_:1})])]),default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(b.value.reranker_reference_list,(Ne,Oe)=>(Ve(),_t(I,{gutter:8,style:{"margin-bottom":"8px"},key:Oe},{default:F(()=>[C(Q,{span:22},{default:F(()=>[C(Y,{prop:"reranker_reference_list."+Oe,rules:{type:"array",required:!0,message:j.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:F(()=>[(Ve(),_t(Qr,{key:Oe,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:b.value.reranker_reference_list[Oe],"onUpdate:modelValue":Xe=>b.value.reranker_reference_list[Oe]=Xe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),C(Q,{span:1},{default:F(()=>[C(H,{link:"",type:"info",class:"mt-4",onClick:Xe=>h(Oe)},{default:F(()=>[C(G,null,{default:F(()=>[C(W)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),C(Y,{label:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:F(()=>[fe("div",LX,[fe("span",null,$e(j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),C(H,{type:"primary",link:"",onClick:v},{default:F(()=>[C(G,null,{default:F(()=>[C(z)]),_:1})]),_:1})])]),default:F(()=>[fe("div",FX,[C(I,null,{default:F(()=>[C(Q,{span:12,class:"color-secondary lighter"},{default:F(()=>[At(" Score "+$e(j.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),C(Q,{span:12,class:"lighter"},{default:F(()=>{var Ne;return[At($e((Ne=b.value.reranker_setting.similarity)==null?void 0:Ne.toFixed(3)),1)]}),_:1}),C(Q,{span:12,class:"color-secondary lighter"},{default:F(()=>[At($e(j.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),C(Q,{span:12,class:"lighter"},{default:F(()=>[At($e(b.value.reranker_setting.topN),1)]),_:1}),C(Q,{span:12,class:"color-secondary lighter"},{default:F(()=>[At($e(j.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),C(Q,{span:12,class:"lighter"},{default:F(()=>[At($e(b.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),C(Y,{label:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:F(()=>[fe("div",$X,[fe("span",null,[At($e(j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),R[4]||(R[4]=fe("span",{class:"danger"},"*",-1))])])]),default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:A,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:b.value.questionReferenceAddress,"onUpdate:modelValue":R[0]||(R[0]=Ne=>b.value.questionReferenceAddress=Ne)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(Y,{label:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.label"),prop:"reranker_model_id",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.placeholder"),trigger:"change"}},{label:F(()=>[fe("div",BX,[fe("span",null,[At($e(j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.label")),1),R[5]||(R[5]=fe("span",{class:"danger"},"*",-1))])])]),default:F(()=>[C(K,{onWheel:g,teleported:!1,modelValue:b.value.reranker_model_id,"onUpdate:modelValue":R[1]||(R[1]=Ne=>b.value.reranker_model_id=Ne),placeholder:j.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.placeholder"),options:c.value,onSubmitModel:O,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),C(jX,{ref_key:"ParamSettingDialogRef",ref:o,onRefresh:w},null,512)]),_:1},8,["nodeModel"])}}});const VX=Yy(UX,[["__scopeId","data-v-8440f36a"]]);class GX extends gi{constructor(t){super(t,VX)}}const WX={type:"reranker-node",model:bi,view:GX},zX=Object.freeze(Object.defineProperty({__proto__:null,default:WX},Symbol.toStringTag,{value:"Module"}));var lk=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(lk||{});const HX={class:"title-decoration-1 mb-8"},XX={class:"flex-between"},YX={class:"w-full"},qX={class:"flex align-center",style:{"line-height":"20px"}},KX=["title"],ZX={class:"flex-between"},JX={class:"w-full"},QX=kr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:o}=hc(),{params:{id:r}}=Rl.config.globalProperties.$route,s=e,c=mt(),v={datasetIdList:[],datasetSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[]},h=lo({get:()=>(s.nodeModel.properties.nodeData||He.set(s.nodeModel.properties,"nodeData",v),s.nodeModel.properties.nodeData),set:Y=>{He.set(s.nodeModel.properties,"nodeData",Y)}}),g=mt(),b=mt(),w=mt(),O=mt([]),S=mt(!1);function P(Y){He.set(s.nodeModel.properties.nodeData,"datasetSetting",Y.datasetSetting)}const A=()=>{var Y;(Y=b.value)==null||Y.open(h.value,"WORK_FLOW")};function k(Y){const Q=s.nodeModel.properties.nodeData.datasetIdList.filter(W=>W!==Y);He.set(s.nodeModel.properties.nodeData,"datasetIdList",Q)}function j(Y){He.set(s.nodeModel.properties.nodeData,"datasetIdList",Y)}function R(){w.value&&w.value.open(h.value.datasetIdList)}function B(){r?n.asyncGetApplicationDataset(r,S).then(Y=>{O.value=Y.data}):t.asyncGetAllDataset(S).then(Y=>{var Q;O.value=(Q=Y.data)==null?void 0:Q.filter(W=>{var I;return W.userId===((I=o.userInfo)==null?void 0:I.id)})})}function G(){B()}const H=()=>{var Y;return Promise.all([c.value.validate(),(Y=g.value)==null?void 0:Y.validate()]).catch(Q=>Promise.reject({node:s.nodeModel,errMessage:Q}))};return bo(()=>{B(),He.set(s.nodeModel,"validate",H)}),(Y,Q)=>{const W=te("Plus"),I=te("el-icon"),z=te("el-button"),K=te("el-text"),q=te("Close"),ce=te("el-form-item"),Ne=te("Setting"),Oe=te("el-col"),Xe=te("el-row"),Ie=te("el-form"),Pe=te("el-card");return Ve(),_t(mi,{nodeModel:Y.nodeModel},{default:F(()=>[fe("h5",HX,$e(Y.$t("views.applicationWorkflow.nodeSetting")),1),C(Pe,{shadow:"never",class:"card-never"},{default:F(()=>[C(Ie,{onSubmit:Q[1]||(Q[1]=bn(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:F(()=>[C(ce,{label:Y.$t("views.log.selectDataset")},{label:F(()=>[fe("div",XX,[fe("span",null,$e(Y.$t("views.log.selectDataset")),1),C(z,{type:"primary",link:"",onClick:R},{default:F(()=>[C(I,null,{default:F(()=>[C(W)]),_:1})]),_:1})])]),default:F(()=>{var le;return[fe("div",YX,[((le=h.value.datasetIdList)==null?void 0:le.length)===0?(Ve(),_t(K,{key:0,type:"info"},{default:F(()=>[At($e(Y.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(Ve(!0),Dn(Yo,{key:1},Ci(h.value.datasetIdList,(ye,Me)=>{var ze,je,it;return Ve(),Dn("div",{key:Me,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[fe("div",qX,[((ze=Jr(h1)(O.value,ye,"id"))==null?void 0:ze.type)==="1"?(Ve(),_t(SS,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:F(()=>Q[2]||(Q[2]=[fe("img",{src:HI,style:{width:"58%"},alt:""},null,-1)])),_:1})):(Ve(),_t(SS,{key:1,class:"mr-8 avatar-blue",shape:"square",size:20},{default:F(()=>Q[3]||(Q[3]=[fe("img",{src:XI,style:{width:"58%"},alt:""},null,-1)])),_:1})),fe("div",{class:"ellipsis",title:(je=Jr(h1)(O.value,ye,"id"))==null?void 0:je.name},$e((it=Jr(h1)(O.value,ye,"id"))==null?void 0:it.name),9,KX)]),C(z,{text:"",onClick:bt=>k(ye)},{default:F(()=>[C(I,null,{default:F(()=>[C(q)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),C(ce,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:F(()=>[fe("div",ZX,[fe("span",null,$e(Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),C(z,{type:"primary",link:"",onClick:A},{default:F(()=>[C(I,null,{default:F(()=>[C(Ne)]),_:1})]),_:1})])]),default:F(()=>[fe("div",JX,[C(Xe,null,{default:F(()=>[C(Oe,{span:12,class:"color-secondary lighter"},{default:F(()=>[At($e(Y.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:F(()=>[At($e(Y.$t(Jr(lk)[h.value.datasetSetting.searchMode])),1)]),_:1}),C(Oe,{span:12,class:"color-secondary lighter"},{default:F(()=>[At($e(Y.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:F(()=>{var le;return[At($e((le=h.value.datasetSetting.similarity)==null?void 0:le.toFixed(3)),1)]}),_:1}),C(Oe,{span:12,class:"color-secondary lighter"},{default:F(()=>[At($e(Y.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:F(()=>[At($e(h.value.datasetSetting.topN),1)]),_:1}),C(Oe,{span:12,class:"color-secondary lighter"},{default:F(()=>[At($e(Y.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),C(Oe,{span:12,class:"lighter"},{default:F(()=>[At($e(h.value.datasetSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),C(ce,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:c,nodeModel:Y.nodeModel,class:"w-full",placeholder:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.questionReferenceAddress,"onUpdate:modelValue":Q[0]||(Q[0]=le=>h.value.questionReferenceAddress=le)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),C(QI,{ref_key:"ParamSettingDialogRef",ref:b,onRefresh:P},null,512),C(eL,{ref_key:"AddDatasetDialogRef",ref:w,onAddData:j,data:O.value,onRefresh:G,loading:S.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class eY extends gi{constructor(t){super(t,QX)}}const tY={type:"search-dataset-node",model:bi,view:eY},nY=Object.freeze(Object.defineProperty({__proto__:null,default:tY},Symbol.toStringTag,{value:"Module"})),rY={class:"title-decoration-1 mb-8"},oY={class:"flex-between w-full"},iY={class:"flex-between w-full"},aY={class:"flex align-center"},lY={class:"mr-4"},uY=kr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=hc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=mt(null),s=mt(),c=mt(),v=()=>{var O;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(O=s.value)==null?void 0:O.validate()]).catch(S=>Promise.reject({node:o.nodeModel,errMessage:S}))},h=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),g={sttModelId:"",isResult:!0,audioList:[]},b=lo({get:()=>(o.nodeModel.properties.nodeData||He.set(o.nodeModel.properties,"nodeData",g),o.nodeModel.properties.nodeData),set:O=>{He.set(o.nodeModel.properties,"nodeData",O)}});function w(){n?fa.getApplicationSTTModel(n).then(O=>{r.value=He.groupBy(O==null?void 0:O.data,"provider")}):t.asyncGetModel().then(O=>{r.value=He.groupBy(O==null?void 0:O.data,"provider")})}return bo(()=>{w(),He.set(o.nodeModel,"validate",v)}),(O,S)=>{const P=te("ModelSelect"),A=te("el-form-item"),k=te("AppIcon"),j=te("el-tooltip"),R=te("el-switch"),B=te("el-form"),G=te("el-card");return Ve(),_t(mi,{"node-model":O.nodeModel},{default:F(()=>[fe("h5",rY,$e(O.$t("views.applicationWorkflow.nodeSetting")),1),C(G,{shadow:"never",class:"card-never"},{default:F(()=>[C(B,{onSubmit:S[4]||(S[4]=bn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:F(()=>[C(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.sttModel.label"),prop:"sttModelId",rules:{required:!0,message:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:F(()=>[fe("div",oY,[fe("div",null,[fe("span",null,[At($e(O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),S[5]||(S[5]=fe("span",{class:"danger"},"*",-1))])])])]),default:F(()=>[C(P,{onWheel:h,teleported:!1,modelValue:b.value.sttModelId,"onUpdate:modelValue":S[0]||(S[0]=H=>b.value.sttModelId=H),placeholder:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:F(()=>[fe("div",iY,[fe("div",null,[fe("span",null,[At($e(O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),S[6]||(S[6]=fe("span",{class:"danger"},"*",-1))])])])]),default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:c,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:b.value.audioList,"onUpdate:modelValue":S[1]||(S[1]=H=>b.value.audioList=H)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(A,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",aY,[fe("div",lY,[fe("span",null,[At($e(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),S[7]||(S[7]=fe("span",{class:"danger"},"*",-1))])]),C(j,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(k,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(R,{size:"small",modelValue:b.value.isResult,"onUpdate:modelValue":S[2]||(S[2]=H=>b.value.isResult=H)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class sY extends gi{constructor(t){super(t,uY)}}const cY={type:"speech-to-text-node",model:bi,view:sY},fY=Object.freeze(Object.defineProperty({__proto__:null,default:cY},Symbol.toStringTag,{value:"Module"})),dY={class:"title-decoration-1 mb-8"},pY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=mt(!1),o=[{label:Zt("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Zt("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:Zt("chat.chatId"),value:"chatId"}],r=()=>{const v=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>He.cloneDeep(g.properties.user_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),h=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>He.cloneDeep(g.properties.api_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...v,...h]},s=()=>{const v=r();He.set(t.nodeModel.properties.config,"globalFields",[...o,...v])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let v=He.cloneDeep(t.nodeModel.properties.config.fields);const h=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.file_upload_enable).map(b=>He.cloneDeep(b.properties.nodeData.file_upload_setting)).filter(b=>b);if(v=v.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"),h.length===0){He.set(t.nodeModel.properties.config,"fields",v);return}let g=[];h[0].document&&g.push({label:Zt("common.fileUpload.document"),value:"document"}),h[0].image&&g.push({label:Zt("common.fileUpload.image"),value:"image"}),h[0].audio&&g.push({label:Zt("common.fileUpload.audio"),value:"audio"}),h[0].video&&g.push({label:Zt("common.fileUpload.video"),value:"video"}),He.set(t.nodeModel.properties.config,"fields",[...v,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),bo(()=>{s(),c()}),(v,h)=>{const g=te("AppIcon"),b=te("el-button"),w=te("el-tooltip");return Ve(),_t(mi,{nodeModel:v.nodeModel},{default:F(()=>[fe("h5",dY,$e(v.$t("views.applicationWorkflow.variable.global")),1),(Ve(!0),Dn(Yo,null,Ci(v.nodeModel.properties.config.globalFields,(O,S)=>(Ve(),Dn("div",{key:S,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:h[0]||(h[0]=P=>n.value=!0),onMouseleave:h[1]||(h[1]=P=>n.value=!1)},[fe("span",null,$e(O.label)+" "+$e("{"+O.value+"}"),1),n.value===!0?(Ve(),_t(w,{key:0,effect:"dark",content:v.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:F(()=>[C(b,{link:"",onClick:P=>Jr(IM)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:F(()=>[C(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):tr("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class hY extends gi{constructor(t){super(t,pY)}}const vY={type:"start-node",model:bi,view:hY},yY=Object.freeze(Object.defineProperty({__proto__:null,default:vY},Symbol.toStringTag,{value:"Module"})),mY={class:"title-decoration-1 mb-8"},gY={class:"flex-between w-full"},bY={class:"flex-between w-full"},_Y={class:"flex align-center"},wY={class:"mr-4"},EY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=mt(),{model:n}=hc(),{params:{id:o}}=Rl.config.globalProperties.$route,r=e,s=mt(null),c=mt(),v=mt(),h=()=>{var A;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(A=c.value)==null?void 0:A.validate()]).catch(k=>Promise.reject({node:r.nodeModel,errMessage:k}))},g=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),b={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},w=lo({get:()=>(r.nodeModel.properties.nodeData||He.set(r.nodeModel.properties,"nodeData",b),r.nodeModel.properties.nodeData),set:A=>{He.set(r.nodeModel.properties,"nodeData",A)}});function O(){o?fa.getApplicationTTSModel(o).then(A=>{s.value=He.groupBy(A==null?void 0:A.data,"provider")}):n.asyncGetModel().then(A=>{s.value=He.groupBy(A==null?void 0:A.data,"provider")})}const S=()=>{var k;const A=w.value.ttsModelId;if(!A){Wp(Zt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(k=t.value)==null||k.open(A,o,w.value.modelParamsSetting)},P=A=>{w.value.modelParamsSetting=A};return bo(()=>{O(),He.set(r.nodeModel,"validate",h)}),(A,k)=>{const j=te("Setting"),R=te("el-icon"),B=te("el-button"),G=te("ModelSelect"),H=te("el-form-item"),Y=te("AppIcon"),Q=te("el-tooltip"),W=te("el-switch"),I=te("el-form"),z=te("el-card");return Ve(),_t(mi,{"node-model":A.nodeModel},{default:F(()=>[fe("h5",mY,$e(A.$t("views.applicationWorkflow.nodeSetting")),1),C(z,{shadow:"never",class:"card-never"},{default:F(()=>[C(I,{onSubmit:k[4]||(k[4]=bn(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:F(()=>[C(H,{label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_Model.label"),prop:"ttsModelId",rules:{required:!0,message:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:F(()=>[fe("div",gY,[fe("div",null,[fe("span",null,[At($e(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),k[5]||(k[5]=fe("span",{class:"danger"},"*",-1))])]),C(B,{type:"primary",link:"",onClick:S,disabled:!w.value.ttsModelId,class:"mr-4"},{default:F(()=>[C(R,null,{default:F(()=>[C(j)]),_:1})]),_:1},8,["disabled"])])]),default:F(()=>[C(G,{onWheel:g,teleported:!1,modelValue:w.value.ttsModelId,"onUpdate:modelValue":k[0]||(k[0]=K=>w.value.ttsModelId=K),placeholder:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),C(H,{prop:"content_list",label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:F(()=>[fe("div",bY,[fe("div",null,[fe("span",null,[At($e(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),k[6]||(k[6]=fe("span",{class:"danger"},"*",-1))])])])]),default:F(()=>[C(Qr,{ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:w.value.content_list,"onUpdate:modelValue":k[1]||(k[1]=K=>w.value.content_list=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),C(H,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:k[3]||(k[3]=bn(()=>{},["prevent"]))},{label:F(()=>[fe("div",_Y,[fe("div",wY,[fe("span",null,[At($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),k[7]||(k[7]=fe("span",{class:"danger"},"*",-1))])]),C(Q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:F(()=>[At($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:F(()=>[C(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:F(()=>[C(W,{size:"small",modelValue:w.value.isResult,"onUpdate:modelValue":k[2]||(k[2]=K=>w.value.isResult=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),C(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:P},null,512)]),_:1},8,["node-model"])}}});class OY extends gi{constructor(t){super(t,EY)}}const xY={type:"text-to-speech-node",model:bi,view:OY},SY=Object.freeze(Object.defineProperty({__proto__:null,default:xY},Symbol.toStringTag,{value:"Module"})),AY={class:"title-decoration-1 mb-8"},TY={class:"flex-between lighter"},MY={key:0,class:"mt-8"},PY=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:Of(),type:"选项 1",option:""}]},o=(b,w,O)=>{const P=He.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(A=>A.id===w.id?{...A,height:b.height,index:O}:A);He.set(t.nodeModel.properties,"branchConditionList",P),h(t.nodeModel.properties.nodeData.branch,!0)},r=lo({get:()=>(t.nodeModel.properties.nodeData||(He.set(t.nodeModel.properties,"nodeData",n),h(n.branch,!0)),t.nodeModel.properties.nodeData),set:b=>{He.set(t.nodeModel.properties,"nodeData",b)}}),s=mt();mt();const c=()=>{var w;const b=[(w=s.value)==null?void 0:w.validate()];return Promise.all(b).catch(O=>Promise.reject({node:t.nodeModel,errMessage:O}))};Rl.config.globalProperties.$route;function v(){const b=He.cloneDeep(t.nodeModel.properties.nodeData.branch),w={type:"选项 "+(b.length+1),id:Of(),option:"选项 "+(b.length+1)};b.splice(b.length,0,w),h(b,!0),He.set(t.nodeModel.properties.nodeData,"branch",b)}function h(b,w){const O=He.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),S=b.map((P,A)=>{const k=O.find(j=>j.id===P.id);if(k)return{index:A,height:k.height,id:P.id};if(w)return{index:A,height:100,id:P.id}}).filter(P=>P);He.set(t.nodeModel.properties,"branchConditionList",S),t.nodeModel.refreshBranch()}function g(b){const w=He.cloneDeep(t.nodeModel.properties.nodeData.branch);if(w[b].conditions.length===0){const S=w.splice(b,1).map(P=>t.nodeModel.id+"_"+P.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(P=>S.includes(P.sourceAnchorId)).map(P=>P.id)),h(w,!1),w.forEach((P,A)=>{P.type="选项 "+(A+1)})}He.set(t.nodeModel.properties.nodeData,"branch",w)}return bo(()=>{He.set(t.nodeModel,"validate",c)}),(b,w)=>{const O=te("el-form-item"),S=te("el-input"),P=te("el-col"),A=te("Delete"),k=te("el-icon"),j=te("el-button"),R=te("el-row"),B=te("el-card"),G=te("Plus"),H=te("el-form"),Y=Id("resize");return Ve(),_t(mi,{nodeModel:b.nodeModel},{default:F(()=>[fe("h5",AY,$e(b.$t("views.applicationWorkflow.nodeSetting")),1),C(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(H,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:s,onSubmit:w[1]||(w[1]=bn(()=>{},["prevent"]))},{default:F(()=>[C(O,{label:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:F(()=>[C(jd,{title:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":w[0]||(w[0]=Q=>r.value.labelName=Q),style:{height:"100px"},placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(Ve(!0),Dn(Yo,null,Ci(r.value.branch,(Q,W)=>Ua((Ve(),_t(B,{key:Q.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:F(()=>[fe("div",TY,$e(Q.type),1),W!==r.value.branch.length?(Ve(),Dn("div",MY,[C(R,{gutter:8},{default:F(()=>[C(P,{span:23},{default:F(()=>[C(O,{prop:"branch."+W+".option",rules:{required:!0,message:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:F(()=>[C(S,{modelValue:Q.option,"onUpdate:modelValue":I=>Q.option=I,placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),C(P,{span:1},{default:F(()=>[C(j,{disabled:W===0,link:"",type:"info",class:"mt-4",onClick:I=>g(W)},{default:F(()=>[C(k,null,{default:F(()=>[C(A)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):tr("",!0)]),_:2},1024)),[[Y,I=>o(I,Q,W)]])),128)),C(j,{link:"",type:"primary",onClick:v},{default:F(()=>[C(k,{class:"mr-4"},{default:F(()=>[C(G)]),_:1}),At(" "+$e(b.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class kY extends gi{constructor(t){super(t,PY)}}const NY=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class RY extends bi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],w=NY(c,g);h.push({x:n+r/2-10,y:v?o-s/2+275+w+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return h}}const DY={type:"user-select-node",model:RY,view:kY},CY=Object.freeze(Object.defineProperty({__proto__:null,default:DY},Symbol.toStringTag,{value:"Module"})),jY={class:"flex-between"},IY={class:"flex-between mb-8"},LY={class:"lighter"},FY={key:0,class:"flex w-full"},$Y=kr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r={variable_list:[{id:Of(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=lo({get:()=>(t.nodeModel.properties.nodeData||He.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:S=>{He.set(t.nodeModel.properties,"nodeData",S)}}),c=mt(),v=mt(),h=mt(),g=async()=>{var P;let S=[(P=c.value)==null?void 0:P.validate(),...v.value.map(A=>A.validate())];return h.value&&(S=[...S,...v.value.map(A=>A.validate())]),Promise.all(S).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function b(){const S=He.cloneDeep(t.nodeModel.properties.nodeData.variable_list),P={id:Of(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};S.push(P),He.set(t.nodeModel.properties.nodeData,"variable_list",S)}function w(S){const P=He.cloneDeep(t.nodeModel.properties.nodeData.variable_list);P.splice(S,1),He.set(t.nodeModel.properties.nodeData,"variable_list",P)}function O(S){t.nodeModel.graphModel.nodes.map(P=>{P.id==="start-node"&&P.properties.config.globalFields.forEach(A=>{A.value===S.fields[1]&&(S.name=A.label)})})}return bo(()=>{var S;typeof((S=t.nodeModel.properties.nodeData)==null?void 0:S.isResult)>"u"&&Pf(t.nodeModel)&&He.set(t.nodeModel.properties.nodeData,"isResult",!0),He.set(t.nodeModel,"validate",g)}),(S,P)=>{const A=te("Delete"),k=te("el-icon"),j=te("el-button"),R=te("el-form-item"),B=te("el-option"),G=te("el-select"),H=te("el-input"),Y=te("el-input-number"),Q=te("CodemirrorEditor"),W=te("el-card"),I=te("Plus"),z=te("el-form");return Ve(),_t(mi,{nodeModel:S.nodeModel},{default:F(()=>[C(z,{onSubmit:P[0]||(P[0]=bn(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:F(()=>[(Ve(!0),Dn(Yo,null,Ci(s.value.variable_list,(K,q)=>(Ve(),_t(W,{key:K.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:F(()=>[C(R,{label:S.$t("views.applicationWorkflow.variable.label")},{label:F(()=>[fe("div",jY,[fe("div",null,[At($e(S.$t("views.applicationWorkflow.variable.label"))+" ",1),P[1]||(P[1]=fe("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(Ve(),_t(j,{key:0,text:"",onClick:ce=>w(q)},{default:F(()=>[C(k,null,{default:F(()=>[C(A)]),_:1})]),_:2},1032,["onClick"])):tr("",!0)])]),default:F(()=>[C(Qr,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.fields,"onUpdate:modelValue":ce=>K.fields=ce,global:!0,onChange:ce=>O(K)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),fe("div",IY,[fe("span",LY,[At($e(S.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),P[2]||(P[2]=fe("span",{class:"danger"},"*",-1))]),C(G,{teleported:!1,modelValue:K.source,"onUpdate:modelValue":ce=>K.source=ce,size:"small",style:{width:"85px"}},{default:F(()=>[C(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),C(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),K.source==="custom"?(Ve(),Dn("div",FY,[C(G,{modelValue:K.type,"onUpdate:modelValue":ce=>K.type=ce,style:{"max-width":"85px"},class:"mr-8",onChange:ce=>s.value.variable_list[q].value=null},{default:F(()=>[(Ve(),Dn(Yo,null,Ci(n,ce=>C(B,{key:ce,label:ce,value:ce},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),K.type==="string"?(Ve(),_t(R,{key:0,prop:"variable_list."+q+".value",rules:{message:Jr(Zt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:F(()=>[C(H,{modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce,placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):K.type==="num"?(Ve(),_t(R,{key:1,prop:"variable_list."+q+".value",rules:{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:F(()=>[C(Y,{modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):K.type==="json"?(Ve(),_t(R,{key:2,class:"w-full",prop:"variable_list."+q+".value",rules:[{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(ce,Ne,Oe)=>{try{JSON.parse(Ne),Oe()}catch{Oe(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:F(()=>[C(Q,{title:"JSON",modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce,style:{height:"100px",width:"155px"},onSubmitDialog:ce=>s.value.variable_list[q].value=ce},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):tr("",!0)])):(Ve(),_t(R,{key:1},{default:F(()=>[C(Qr,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:h,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.reference,"onUpdate:modelValue":ce=>K.reference=ce},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),C(j,{link:"",type:"primary",onClick:b},{default:F(()=>[C(k,{class:"mr-4"},{default:F(()=>[C(I)]),_:1}),At(" "+$e(S.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class BY extends gi{constructor(t){super(t,$Y)}}const UY={type:"variable-assign-node",model:bi,view:BY},VY=Object.freeze(Object.defineProperty({__proto__:null,default:UY},Symbol.toStringTag,{value:"Module"})),nT=kr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Ua((Ve(),Dn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=bn(()=>{},["stop"])),onClick:r[1]||(r[1]=bn(()=>{},["stop"]))},[(Ve(),Dn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[fe("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),fe("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Ev,t.model.isHovered]])}});function GY(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const WY=32,zY=32;class HY extends cn.BezierEdge{constructor(){super();Ea(this,"isMounted");Ea(this,"customLineApp");Ea(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");GY(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Gg()?z2(this.targetId(),nT,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=FM({render:()=>Ov(nT,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Gg()&&H2(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=WY,customHeight:s=zY}=n.getProperties(),{startPoint:c,endPoint:v,path:h,isAnimation:g,arrowConfig:b}=n,w=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:S,strokeDashoffset:P,animationName:A,animationDuration:k,animationIterationCount:j,animationTimingFunction:R,animationDirection:B}=w,G={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},H=n.getEdgeStyle(),Y={width:r,height:s};return setTimeout(()=>{const Q=document.getElementById(o);Q&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(Q))},0),delete H.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:h,...H,...b,...g?{strokeDasharray:O,stroke:S,style:{strokeDashoffset:P,animationName:A,animationDuration:k,animationIterationCount:j,animationTimingFunction:R,animationDirection:B}}:{}}),cn.h("foreignObject",{...G,y:G.y+5,x:G.x+5,style:{}},[cn.h("div",{id:o,style:{...Y},className:"lf-custom-edge-wrapper"})])])}}class XY extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const YY={type:"app-edge",view:HY,model:XY},qY=kr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var h;(h=t.lf)==null||h.zoom(!0,[0,0])}function o(){var h;(h=t.lf)==null||h.zoom(!1,[0,0])}function r(){var h,g,b;(h=t.lf)==null||h.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const s=()=>{var h;(h=t.lf)==null||h.extension.dagre.layout()},c=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(h,g)=>{const b=te("ZoomOut"),w=te("el-icon"),O=te("el-tooltip"),S=te("el-button"),P=te("ZoomIn"),A=te("AppIcon"),k=te("el-divider"),j=te("el-card");return Ve(),_t(j,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:F(()=>[C(S,{link:"",onClick:o},{default:F(()=>[C(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:F(()=>[C(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomOut")},{default:F(()=>[C(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:n},{default:F(()=>[C(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:F(()=>[C(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomIn")},{default:F(()=>[C(P)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:r},{default:F(()=>[C(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:F(()=>[C(A,{iconName:"app-fitview",title:h.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),C(k,{direction:"vertical"}),C(S,{link:"",onClick:c},{default:F(()=>[C(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:F(()=>[C(A,{style:{"font-size":"16px"},iconName:"app-retract",title:h.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:v},{default:F(()=>[C(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:F(()=>[C(A,{style:{"font-size":"16px"},iconName:"app-extend",title:h.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),C(S,{link:"",onClick:s},{default:F(()=>[C(O,{class:"box-item",effect:"dark",content:h.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:F(()=>[C(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:h.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let ic=null;function rT(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function oT(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const Qh=40;let cg=40;function KY(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var w,O;if(cg=Qh,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,h=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(h):!0)||h.nodes.length===0&&h.edges.length===0)return ic=null,!0;const b=h.nodes.filter(S=>S.type===Xo.Start||S.type===Xo.Base);if(b.length>0){Ba(((O=(w=b[0])==null?void 0:w.properties)==null?void 0:O.stepName)+Zt("views.applicationWorkflow.tip.cannotCopy"));return}return ic=h,ic.nodes.forEach(S=>rT(S,Qh)),ic.edges.forEach(S=>oT(S,Qh)),Wp(Zt("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;if(ic&&(ic.nodes||ic.edges)){e.clearSelectElements();const v=e.addElements(ic,cg);if(!v)return!0;v.nodes.forEach(h=>e.selectElementById(h.id,!0)),v.edges.forEach(h=>e.selectElementById(h.id,!0)),ic.nodes.forEach(h=>rT(h,Qh)),ic.edges.forEach(h=>oT(h,Qh)),cg=cg+Qh}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(b=>e.deleteEdge(b.id));return}const h=v.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(h.length>0){Ba(`${(g=h[0].properties)==null?void 0:g.stepName}${Zt("views.applicationWorkflow.delete.deleteMessage")}`);return}return Cw(Zt("common.tip"),Zt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Zt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;v.edges.forEach(b=>e.deleteEdge(b.id)),v.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class ZY{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const JY=e=>typeof e=="string",iT=Array.isArray,qg=e=>typeof e=="number",uk=e=>e!==null&&typeof e=="object",Kg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Kg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Kg(t[n])}),t}return e},ev=(e,t)=>{const n=e[t];return uk(n)?n.cell:n},aT=(e,t,n)=>{let o;return n?o=n:qg(e)?o=()=>e:o=()=>t,o},QY=(e,t)=>{if(e!=="next"&&e!=="prev")return t},lT=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let eq=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return lT(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&lT(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,QY)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var yv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(yv||(yv={}));function uT(e,t){var n=e.get(t)||0;e.set(t,n+1)}function sT(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function sk(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+yv.EDGE_KEY_DELIM+s+yv.EDGE_KEY_DELIM+(o===void 0?yv.DEFAULT_EDGE_NAME:o)}function cT(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return o!==void 0&&(c.name=o),c}function R1(e,t){return sk(e,t.v,t.w,t.name)}function fT(e){return typeof e=="function"}var tq=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},nq=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},rq=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:tq(t),edges:nq(t),value:t.graph()};return n.value===void 0&&delete n.value,n},oq=function(t){var n=new $v(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function pT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(o){iq(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function iq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lq(e,t,n){return t&&hT(e.prototype,t),n&&hT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var uq={compound:!1,multigraph:!1,directed:!0},$v=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};aq(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=yv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return fT(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var h=s===void 0?t.GRAPH_NODE:s,g=t.parent(h);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,h);var b=t.childrenMap.get(h);return b.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(h,b),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,h=new e({directed:s,multigraph:c,compound:v});if(h.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&h.setNode(b,t.node(b))}),t.edges().forEach(function(b){h.hasNode(b.v)&&h.hasNode(b.w)&&h.setEdgeObj(b,t.edge(b))}),v){var g=function(w){for(var O=t.parent(w);O!==void 0&&!h.hasNode(O);)O=t.parent(O);return O};h.nodes().forEach(function(b){h.setParent(b,g(b))})}return h},this.setDefaultEdgeLabel=function(r){return fT(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(R1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(R1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return rq(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=pT(pT({},uq),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return lq(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,h=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,w=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var S;v==null||v.set(n,this.GRAPH_NODE),h==null||h.set(n,new Map),h!=null&&h.has(this.GRAPH_NODE)||h==null||h.set(this.GRAPH_NODE,new Map),h==null||(S=h.get(this.GRAPH_NODE))===null||S===void 0||S.set(n,!0)}return[g,b,w,O].forEach(function(P){return P.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(k){o.removeEdge(k.v,k.w,k.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,h=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,w,O;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(w=this.children(n))===null||w===void 0||w.forEach(function(A){return o.setParent(A)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var S=s.get(n),P=c.get(n);Array.from(S.values()).forEach(function(A){return r(A)}),Array.from(P.values()).forEach(function(A){return r(A)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),h.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,v,h=cT(this.isDirected(),n,o,s),g=R1(this.isDirected(),h),b=h.v,w=h.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(w),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,w,s)),Object.freeze(h),this.edgesMap.set(g,h);var O=this.predecessorsMap.get(w),S=this.successorsMap.get(b);return uT(O,b),uT(S,w),(c=this.inEdgesMap.get(w))===null||c===void 0||c.set(g,h),(v=this.outEdgesMap.get(b))===null||v===void 0||v.set(g,h),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=sk(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var v=cT(this.isDirected(),n,o,r),h=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var b=this.predecessorsMap.get(g),w=this.successorsMap.get(h);sT(b,h),sT(w,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(h).delete(s),this.edgeCountNum-=1}return this}}]),e}();$v.fromJSON=oq;function vT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sq(e,t,n){return t&&vT(e.prototype,t),n&&vT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ck=sq(function e(){var t=this;cq(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],v=c[0],h=c[1];r[n]=h,r[o]=v,s.set(v.key,o),s.set(h.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=o[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),fq=function(t,n){var o=new $v,r=new Map,s=new ck,c;function v(b){var w=b.v===c?b.w:b.v,O=s.priority(w);if(O!==void 0){var S=n(b);S<O&&(r.set(w,c),s.decrease(w,S))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(b){s.add(b,Number.POSITIVE_INFINITY),o.setNode(b)}),s.decrease(t.nodes()[0],0);for(var h=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(h)throw new Error("Input graph is not connected: "+t.graph());h=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return o},dq=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var h=v.pop();if(!n.has(h)){var g,b;n.add(h),c.push(h),(g=t.successors(h))===null||g===void 0||g.forEach(function(w){return v.push(w)}),(b=t.predecessors(h))===null||b===void 0||b.forEach(function(w){return v.push(w)})}}c.length&&o.push(c)}),o},pq=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(v){return e(t,v,o,r,s,c)}),o&&c.push(n))},EE=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(h){if(t.hasNode(h))pq(t,h,o==="post",v,s,c);else throw new Error("Graph does not have node: "+h)}),c};function hq(e,t){return gq(e)||mq(e,t)||yq(e,t)||vq()}function vq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yq(e,t){if(e){if(typeof e=="string")return yT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yT(e,t)}}function yT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function mq(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(h){s=!0,v=h}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return o}}function gq(e){if(Array.isArray(e))return e}var bq=function(){return 1},fk=function(t,n,o,r){return _q(t,n,o||bq,r||function(s){return t.outEdges(s)})},_q=function(t,n,o,r){var s=new Map,c=new ck,v,h,g=function(O){var S=O.v!==v?O.v:O.w,P=s.get(S),A=o(O),k=h.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+A);k<P.distance&&(P.distance=k,P.predecessor=v,c.decrease(S,k))};for(t.nodes().forEach(function(w){var O=w===n?0:Number.POSITIVE_INFINITY;s.set(w,{distance:O}),c.add(w,O)});c.size()>0&&(v=c.removeMin(),h=s.get(v),!(h&&h.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var b={};return Array.from(s.entries()).forEach(function(w){var O=hq(w,2),S=O[0],P=O[1];return b[String(S)]=P,b}),b},wq=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=fk(t,s,n,o),r}),r},dk=function(t){var n=0,o=[],r=new Map,s=[];function c(v){var h,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,o.push(v),(h=t.successors(v))===null||h===void 0||h.forEach(function(S){var P;if(r.has(S)){if(!((P=r.get(S))===null||P===void 0)&&P.onStack){var k=r.get(S);g.lowlink=Math.min(g.lowlink,k.index)}}else{c(S);var A=r.get(S);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var b=[],w;do{w=o.pop();var O=r.get(w);O.onStack=!1,b.push(w)}while(v!==w);s.push(b)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},Eq=function(t){return dk(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function mw(e){"@babel/helpers - typeof";return mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mw(e)}function mT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oq(e,t,n){return t&&mT(e.prototype,t),n&&mT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cy(e,t)}function Aq(e){var t=pk();return function(){var o=jy(e),r;if(t){var s=jy(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return Tq(this,r)}}function Tq(e,t){if(t&&(mw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mq(e)}function Mq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gw(e){var t=typeof Map=="function"?new Map:void 0;return gw=function(o){if(o===null||!Pq(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return xg(o,arguments,jy(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Cy(r,o)},gw(e)}function xg(e,t,n){return pk()?xg=Reflect.construct:xg=function(r,s,c){var v=[null];v.push.apply(v,s);var h=Function.bind.apply(r,v),g=new h;return c&&Cy(g,c.prototype),g},xg.apply(null,arguments)}function pk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pq(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Cy(e,t){return Cy=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Cy(e,t)}function jy(e){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(e)}var bw=function(e){Sq(n,e);var t=Aq(n);function n(){return xq(this,n),t.apply(this,arguments)}return Oq(n)}(gw(Error));function hk(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new bw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new bw;return o}var kq=function(t){try{hk(t)}catch(n){if(n instanceof bw)return!1;throw n}return!0},Nq=function(t,n){return EE(t,n,"post")},Rq=function(t,n){return EE(t,n,"pre")},Dq=function(){return 1};function Cq(e,t,n){return jq(e,t||Dq,n||function(o){return e.outEdges(o)})}function jq(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(v){s!==v&&(o[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var h=v.v===s?v.w:v.v,g=t(v);o[c][String(h)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=o[c];r.forEach(function(h){var g=String(h),b=o[g];r.forEach(function(w){var O=String(w),S=b[c],P=v[O],A=b[O],k=S.distance+P.distance;k<A.distance&&(A.distance=k,A.predecessor=P.predecessor)})})}),o}const Iq=Object.freeze(Object.defineProperty({__proto__:null,components:dq,dfs:EE,dijkstra:fk,dijkstraAll:wq,findCycles:Eq,floydWarshall:Cq,isAcyclic:kq,postorder:Nq,preorder:Rq,prim:fq,tarjan:dk,topsort:hk},Symbol.toStringTag,{value:"Module"}));class Lq extends eq{}class Fq extends $v{}const $q=()=>1,Bq=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=Vq(e,t||$q);return(n=Uq(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},Uq=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)D1(e,t,n,c);for(;c=r.dequeue();)D1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){o=o.concat(D1(e,t,n,c,!0));break}}}return o},D1=(e,t,n,o,r)=>{var s,c;const v=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(h=>{const g=e.edge(h),b=e.node(h.v);r&&v.push({v:h.v,w:h.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,_w(t,n,b)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(h=>{const g=e.edge(h),b=h.w,w=e.node(b);w.in===void 0&&(w.in=0),w.in-=g,_w(t,n,w)}),e.removeNode(o.v),r?v:void 0},Vq=(e,t)=>{const n=new Fq;let o=0,r=0;e.nodes().forEach(h=>{n.setNode(h,{v:h,in:0,out:0})}),e.edges().forEach(h=>{const g=n.edge(h)||0,b=(t==null?void 0:t(h))||1,w=g+b;n.setEdge(h.v,h.w,w),r=Math.max(r,n.node(h.v).out+=b),o=Math.max(o,n.node(h.w).in+=b)});const s=[],c=r+o+3;for(let h=0;h<c;h++)s.push(new Lq);const v=o+1;return n.nodes().forEach(h=>{_w(s,v,n.node(h))}),{buckets:s,zeroIdx:v,graph:n}},_w=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},Gq=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?Bq(e,t(e)):Wq(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},Wq=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},zq=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},gT={run:Gq,undo:zq};class Mf extends $v{}const Hq=(e,t)=>Number(e)-Number(t),Bv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},Xq=e=>{const t=new Mf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},vk=e=>{const t=new Mf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},Yq=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),bT=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let h,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),h=v*r/s,g=v):(r<0&&(c=-c),h=c,g=c*s/r),{x:n+h,y:o+g}},Iy=e=>{const t=[],n=yk(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,v;return Hq((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},qq=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},Kq=e=>{const t=e.nodes(),n=t.filter(v=>{var h;return((h=e.node(v))===null||h===void 0?void 0:h.rank)!==void 0}).map(v=>e.node(v).rank),o=Math.min(...n),r=[];t.forEach(v=>{var h;const g=(((h=e.node(v))===null||h===void 0?void 0:h.rank)||0)-o;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const h=r[v];h===void 0?v%c!==0&&(s-=1):s&&(h==null||h.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=s)}))}},_T=(e,t,n,o)=>{const r={width:0,height:0};return qg(n)&&qg(o)&&(r.rank=n,r.order=o),Bv(e,"border",r,t)},yk=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},Zq=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},mk=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},gk=(e,t)=>t(),OE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),Jq=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>Qq(e,t))},Qq=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),h=v.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const g=e.graph();let b,w,O;for(O=0,++o;o<s;++O,++o)v.points=[],w={edgeLabel:v,width:0,height:0,edgeObj:t,rank:o},b=Bv(e,"edge",w,"_d"),o===h&&(w.width=v.width,w.height=v.height,w.dummy="edge-label",w.labelpos=v.labelpos),e.setEdge(n,b,{weight:v.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:v.weight},c)},eK=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},wT={run:Jq,undo:eK},bk=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(h=>{const g=o(h.w),b=e.edge(h).minlen,w=g-b;w&&(v===void 0||w<v)&&(v=w)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},tK=e=>{var t;const n={};let o;const r=v=>{var h;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let b;return(h=e.outEdges(v))===null||h===void 0||h.forEach(w=>{const O=r(w.w),S=e.edge(w).minlen,P=O-S;P&&(b===void 0||P<b)&&(b=P)}),b||(b=0),(o===void 0||b<o)&&(o=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),o===void 0&&(o=0);const s={},c=(v,h)=>{var g;const b=e.node(v),w=isNaN(b.layer)?h:b.layer;(b.rank===void 0||b.rank<w)&&(b.rank=w),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(O=>{c(O.w,w+e.edge(O).minlen)}))};e.nodes().forEach(v=>{const h=e.node(v);h&&(isNaN(h.layer)?h.rank-=o:c(v,h.layer))})},Fd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,nK=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;rK(t,e)<o;)r=_k(t,e),s=t.hasNode(r.v)?Fd(e,r):-Fd(e,r),wk(t,e,s);return t},rK=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!Fd(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},oK=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;iK(t,e)<o;)r=_k(t,e),s=t.hasNode(r.v)?Fd(e,r):-Fd(e,r),wk(t,e,s);return t},iK=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,v=o===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Fd(t,s))&&(e.setNode(v,{}),e.setEdge(o,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},_k=(e,t)=>OE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Fd(t,n):1/0),wk=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:aK,postorder:lK}=Iq,uK=e=>{const t=Xq(e);bk(t);const n=nK(t);Ok(n),Ek(n,t);let o,r;for(;o=fK(n);)r=dK(n,t,o),pK(n,t,o,r)},Ek=(e,t)=>{let n=lK(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{sK(e,t,o)})},sK=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=cK(e,t,n)},cK=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),h=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),h=v.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(g=>{const b=g.v===n,w=b?g.w:g.v;if(w!==s){const O=b===c,S=t.edge(g).weight;if(h+=O?S:-S,vK(e,n,w)){const P=e.edgeFromArgs(n,w).cutvalue;h+=O?-P:P}}}),h},Ok=(e,t=e.nodes()[0])=>{xk(e,{},1,t)},xk=(e,t,n,o,r)=>{var s;const c=n;let v=n;const h=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(g=>{t[g]||(v=xk(e,t,v,g,o))}),h.low=c,h.lim=v++,r?h.parent=r:delete h.parent,v},fK=e=>e.edges().find(t=>e.edge(t).cutvalue<0),dK=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let v=s,h=!1;s.lim>c.lim&&(v=c,h=!0);const g=t.edges().filter(b=>h===ET(e,e.node(b.v),v)&&h!==ET(e,e.node(b.w),v));return OE(g,b=>Fd(t,b))},pK=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),Ok(e),Ek(e,t),hK(e,t)},hK=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=aK(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},vK=(e,t,n)=>e.hasEdge(t,n),ET=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,yK=e=>{switch(e.graph().ranker){case"network-simplex":gK(e);break;case"tight-tree":OT(e);break;case"longest-path":mK(e);break;default:OT(e)}},mK=bk,OT=e=>{tK(e),oK(e)},gK=e=>{uK(e)},bK=e=>{var t;const n={};let o=0;const r=s=>{var c;const v=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},_K=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),v=Math.max(t[n].lim,t[o].lim);let h,g;h=n;do h=e.parent(h),r.push(h);while(h&&(t[h].low>c||v>t[h].lim));for(g=h,h=o;h&&h!==g;)s.push(h),h=e.parent(h);return{lca:g,path:r.concat(s.reverse())}},wK=e=>{var t;const n=bK(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,v=e.node(c);const h=v.edgeObj;if(!h)return;const g=_K(e,n,h.v,h.w),b=g.path,w=g.lca;let O=0,S=b[O],P=!0;for(;c!==h.w;){if(v=e.node(c),P){for(;S!==w&&((r=e.node(S))===null||r===void 0?void 0:r.maxRank)<v.rank;)O++,S=b[O];S===w&&(P=!1)}if(!P){for(;O<b.length-1&&((s=e.node(b[O+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)O++;S=b[O]}e.setParent(c,S),c=e.successors(c)[0]}})},EK=e=>{var t;const n=Bv(e,"root",{},"_root"),o=OK(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(h=>{e.edge(h).minlen*=c});const v=xK(e)+1;(t=e.children())===null||t===void 0||t.forEach(h=>{Sk(e,n,c,v,s,o,h)}),e.graph().nodeRankFactor=c},Sk=(e,t,n,o,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const h=_T(e,"_bt"),g=_T(e,"_bb"),b=e.node(c);e.setParent(h,c),b.borderTop=h,e.setParent(g,c),b.borderBottom=g,v==null||v.forEach(w=>{Sk(e,t,n,o,r,s,w);const O=e.node(w),S=O.borderTop?O.borderTop:w,P=O.borderBottom?O.borderBottom:w,A=O.borderTop?o:2*o,k=S!==P?1:r-s[c]+1;e.setEdge(h,S,{minlen:k,weight:A,nestingEdge:!0}),e.setEdge(P,g,{minlen:k,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,h,{weight:0,minlen:r+s[c]})},OK=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>o(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},xK=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},SK=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},xT={run:EK,cleanup:SK},AK=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)ST(e,"borderLeft","_bl",o,s,c),ST(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},ST=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],h=Bv(e,"border",c,n);r[t][s]=h,e.setParent(h,o),v&&e.setEdge(v,h,{weight:1})},TK=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Ak(e)},MK=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&PK(e),(n==="lr"||n==="rl")&&(kK(e),Ak(e))},Ak=e=>{e.nodes().forEach(t=>{AT(e.node(t))}),e.edges().forEach(t=>{AT(e.edge(t))})},AT=e=>{const t=e.width;e.width=e.height,e.height=t},PK=e=>{e.nodes().forEach(t=>{C1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>C1(r)),o.hasOwnProperty("y")&&C1(o)})},C1=e=>{e!=null&&e.y&&(e.y=-e.y)},kK=e=>{e.nodes().forEach(t=>{j1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>j1(r)),o.hasOwnProperty("x")&&j1(o)})},j1=e=>{const t=e.x;e.x=e.y,e.y=t},TT={adjust:TK,undo:MK};function NK(e){return Array.isArray(e)}function ww(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const MT=function(e){if(NK(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},PT=e=>{const t={},n=e.nodes().filter(b=>{var w;return!(!((w=e.children(b))===null||w===void 0)&&w.length)}),o=n.map(b=>e.node(b).rank),r=ww(o),s=[];for(let b=0;b<r+1;b++)s.push([]);const c=b=>{var w;if(t.hasOwnProperty(b))return;t[b]=!0;const O=e.node(b);isNaN(O.rank)||s[O.rank].push(b),(w=e.successors(b))===null||w===void 0||w.forEach(S=>c(S))},v=n.sort((b,w)=>e.node(b).rank-e.node(w).rank),g=v.filter(b=>e.node(b).fixorder!==void 0).sort((b,w)=>e.node(b).fixorder-e.node(w).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||s[e.node(b).rank].push(b),t[b]=!0}),v==null||v.forEach(c),s},RK=(e,t,n)=>{const o=Yq(n,n.map((b,w)=>w)),s=t.map(b=>{var w;const O=(w=e.outEdges(b))===null||w===void 0?void 0:w.map(S=>({pos:o[S.w]||0,weight:e.edge(S).weight}));return O==null?void 0:O.sort((S,P)=>S.pos-P.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const h=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(b=>{if(b){let w=b.pos+c;h[w]+=b.weight;let O=0;for(;w>0;)w%2&&(O+=h[w+1]),w=w-1>>1,h[w]+=b.weight;g+=b.weight*O}}),g},kT=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=RK(e,t[o-1],t[o]);return n},DK=(e,t,n)=>{const o=CK(e),r=new Mf({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),h=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,h||o),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const b=g.v===s?g.w:g.v,w=r.edgeFromArgs(b,s),O=w!==void 0?w.weight:0;r.setEdge(b,s,{weight:e.edge(g).weight+O})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},CK=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},jK=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,h;for(;c;){if(v=e.parent(c),v?(h=o[v],o[v]=c):(h=r,r=c),h&&h!==c){t.setEdge(h,c);return}c=v}})},IK=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),LK=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((v,h)=>{s[v.v]={i:h,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const h=s[v.v],g=s[v.w];h!==void 0&&g!==void 0&&(g.indegree++,h.out.push(s[v.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,v=>!v.indegree);return FK(c)},FK=e=>{var t,n;const o=[],r=h=>g=>{g.merged||(g.barycenter===void 0||h.barycenter===void 0||g.barycenter>=h.barycenter)&&$K(h,g)},s=h=>g=>{g.in.push(h),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const h=e.pop();o.push(h),(t=h.in.reverse())===null||t===void 0||t.forEach(g=>r(h)(g)),(n=h.out)===null||n===void 0||n.forEach(g=>s(h)(g))}const c=o.filter(h=>!h.merged),v=["vs","i","barycenter","weight"];return c.map(h=>{const g={};return v==null||v.forEach(b=>{h[b]!==void 0&&(g[b]=h[b])}),g})},$K=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},BK=(e,t,n,o)=>{const r=Zq(e,O=>{const S=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return o?!S&&O.hasOwnProperty("barycenter"):S||O.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((O,S)=>-O.i- -S.i),v=[];let h=0,g=0,b=0;s==null||s.sort(UK(!!t,!!n)),b=NT(v,c,b),s==null||s.forEach(O=>{var S;b+=(S=O.vs)===null||S===void 0?void 0:S.length,v.push(O.vs),h+=O.barycenter*O.weight,g+=O.weight,b=NT(v,c,b)});const w={vs:v.flat()};return g&&(w.barycenter=h/g,w.weight=g),w},NT=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},UK=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},Tk=(e,t,n,o,r,s)=>{var c,v,h,g;let b=e.children(t);const w=e.node(t),O=w?w.borderLeft:void 0,S=w?w.borderRight:void 0,P={};O&&(b=b==null?void 0:b.filter(R=>R!==O&&R!==S));const A=IK(e,b||[]);A==null||A.forEach(R=>{var B;if(!((B=e.children(R.v))===null||B===void 0)&&B.length){const G=Tk(e,R.v,n,o,s);P[R.v]=G,G.hasOwnProperty("barycenter")&&GK(R,G)}});const k=LK(A,n);VK(k,P),(c=k.filter(R=>R.vs.length>0))===null||c===void 0||c.forEach(R=>{const B=e.node(R.vs[0]);B&&(R.fixorder=B.fixorder,R.order=B.order)});const j=BK(k,o,r,s);if(O&&(j.vs=[O,j.vs,S].flat(),!((v=e.predecessors(O))===null||v===void 0)&&v.length)){const R=e.node(((h=e.predecessors(O))===null||h===void 0?void 0:h[0])||""),B=e.node(((g=e.predecessors(S))===null||g===void 0?void 0:g[0])||"");j.hasOwnProperty("barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+R.order+B.order)/(j.weight+2),j.weight+=2}return j},VK=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},GK=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},WK=(e,t)=>{const n=yk(e),o=[],r=[];for(let b=1;b<n+1;b++)o.push(b);for(let b=n-1;b>-1;b--)r.push(b);const s=RT(e,o,"inEdges"),c=RT(e,r,"outEdges");let v=PT(e);I1(e,v);let h=Number.POSITIVE_INFINITY,g;for(let b=0,w=0;w<4;++b,++w){DT(b%2?s:c,b%4>=2,!1,t),v=Iy(e);const O=kT(e,v);O<h&&(w=0,g=Kg(v),h=O)}v=PT(e),I1(e,v);for(let b=0,w=0;w<4;++b,++w){DT(b%2?s:c,b%4>=2,!0,t),v=Iy(e);const O=kT(e,v);O<h&&(w=0,g=Kg(v),h=O)}I1(e,g)},RT=(e,t,n)=>t.map(o=>DK(e,o,n)),DT=(e,t,n,o)=>{const r=new Mf;e==null||e.forEach(s=>{var c;const v=s.graph().root,h=Tk(s,v,r,t,n,o);for(let g=0;g<((c=h.vs)===null||c===void 0?void 0:c.length);g++){const b=s.node(h.vs[g]);b&&(b.order=g)}jK(s,r,h.vs)})},I1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class zK extends $v{}const HK=(e,t)=>{const n={},o=(r,s)=>{let c=0,v=0;const h=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((b,w)=>{var O;const S=YK(e,b),P=S?e.node(S).order:h;(S||b===g)&&((O=s.slice(v,w+1))===null||O===void 0||O.forEach(A=>{var k;(k=e.predecessors(A))===null||k===void 0||k.forEach(j=>{var R;const B=e.node(j),G=B.order;(G<c||P<G)&&!(B.dummy&&(!((R=e.node(A))===null||R===void 0)&&R.dummy))&&Mk(n,j,A)})}),v=w+1,c=P)}),s};return t!=null&&t.length&&t.reduce(o),n},XK=(e,t)=>{const n={};function o(v,h,g,b,w){var O,S;let P;for(let A=h;A<g;A++)P=v[A],!((O=e.node(P))===null||O===void 0)&&O.dummy&&((S=e.predecessors(P))===null||S===void 0||S.forEach(k=>{const j=e.node(k);j.dummy&&(j.order<b||j.order>w)&&Mk(n,k,P)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,h){const g=r(v);h.get(g)||(o(...v),h.set(g,!0))}const c=(v,h)=>{let g=-1,b,w=0;const O=new Map;return h==null||h.forEach((S,P)=>{var A;if(((A=e.node(S))===null||A===void 0?void 0:A.dummy)==="border"){const k=e.predecessors(S)||[];k.length&&(b=e.node(k[0]).order,s([h,w,P,g,b],O),w=P,g=b)}s([h,w,h.length,b,v.length],O)}),h};return t!=null&&t.length&&t.reduce(c),n},YK=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},Mk=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},qK=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},KK=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((h,g)=>{r[h]=h,s[h]=h,c[h]=g})}),t==null||t.forEach(v=>{let h=-1;v==null||v.forEach(g=>{let b=o(g);if(b.length){b=b.sort((O,S)=>c[O]-c[S]);const w=(b.length-1)/2;for(let O=Math.floor(w),S=Math.ceil(w);O<=S;++O){const P=b[O];s[g]===g&&h<c[P]&&!qK(n,g,P)&&(s[P]=g,s[g]=r[g]=r[P],h=c[P])}}})}),{root:r,align:s}},ZK=(e,t,n,o,r)=>{var s;const c={},v=JK(e,t,n,r),h=r?"borderLeft":"borderRight",g=(O,S)=>{let P=v.nodes(),A=P.pop();const k={};for(;A;)k[A]?O(A):(k[A]=!0,P.push(A),P=P.concat(S(A))),A=P.pop()},b=O=>{c[O]=(v.inEdges(O)||[]).reduce((S,P)=>Math.max(S,(c[P.v]||0)+v.edge(P)),0)},w=O=>{const S=(v.outEdges(O)||[]).reduce((A,k)=>Math.min(A,(c[k.w]||0)-v.edge(k)),Number.POSITIVE_INFINITY),P=e.node(O);S!==Number.POSITIVE_INFINITY&&P.borderType!==h&&(c[O]=Math.max(c[O],S))};return g(b,v.predecessors.bind(v)),g(w,v.successors.bind(v)),(s=Object.values(o))===null||s===void 0||s.forEach(O=>{c[O]=c[n[O]]}),c},JK=(e,t,n,o)=>{const r=new zK,s=e.graph(),c=nZ(s.nodesep,s.edgesep,o);return t==null||t.forEach(v=>{let h;v==null||v.forEach(g=>{const b=n[g];if(r.setNode(b),h){const w=n[h],O=r.edgeFromArgs(w,b);r.setEdge(w,b,Math.max(c(e,g,h),O||0))}h=g})}),r},QK=(e,t)=>OE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const v=n[c],h=rZ(e,c)/2;r=Math.max(v+h,r),s=Math.min(v-h,s)}),r-s});function eZ(e,t){const n=Object.values(t),o=MT(n),r=ww(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,h=e[v];let g;if(h===t)return;const b=Object.values(h);g=c==="l"?o-MT(b):r-ww(b),g&&(e[v]={},Object.keys(h).forEach(w=>{e[v][w]=h[w]+g}))})})}const tZ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},nZ=(e,t,n)=>(o,r,s)=>{const c=o.node(r),v=o.node(s);let h=0,g;if(h+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(h+=n?g:-g),g=0,h+=(c.dummy?t:e)/2,h+=(v.dummy?t:e)/2,h+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(h+=n?g:-g),g=0,h},rZ=(e,t)=>e.node(t).width||0,oZ=e=>{const t=Iy(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=o+c/2}),o+=c+n})},iZ=e=>{const t=Iy(e),n=Object.assign(HK(e,t),XK(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(w=>Object.values(w).reverse()));const h=(c==="u"?e.predecessors:e.successors).bind(e),g=KK(e,r,n,h),b=ZK(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(b).forEach(w=>b[w]=-b[w]),o[c+v]=b})});const s=QK(e,o);return s&&eZ(o,s),tZ(o,e.graph().align)},aZ=e=>{var t;const n=vk(e);oZ(n);const o=iZ(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},lZ=(e,t)=>{const o=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},uZ=(e,t)=>{const n=t&&t.debugTiming?mk:gk;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{cZ(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>gZ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{bZ(o)});try{n("  runLayout",()=>{sZ(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{fZ(e,o)})})},sZ=(e,t,n)=>{t("    removeSelfEdges",()=>{MZ(e)}),t("    acyclic",()=>{gT.run(e)}),t("    nestingGraph.run",()=>{xT.run(e)}),t("    rank",()=>{yK(vk(e))}),t("    injectEdgeLabelProxies",()=>{_Z(e)}),t("    removeEmptyRanks",()=>{Kq(e)}),t("    nestingGraph.cleanup",()=>{xT.cleanup(e)}),t("    normalizeRanks",()=>{qq(e)}),t("    assignRankMinMax",()=>{wZ(e)}),t("    removeEdgeLabelProxies",()=>{EZ(e)}),t("    normalize.run",()=>{wT.run(e)}),t("    parentDummyChains",()=>{wK(e)}),t("    addBorderSegments",()=>{AK(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{lZ(e,n.nodeOrder)}),t("    order",()=>{WK(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{PZ(e)}),t("    adjustCoordinateSystem",()=>{TT.adjust(e)}),t("    position",()=>{aZ(e)}),t("    positionSelfEdges",()=>{kZ(e)}),t("    removeBorderNodes",()=>{TZ(e)}),t("    normalize.undo",()=>{wT.undo(e)}),t("    fixupEdgeLabelCoords",()=>{SZ(e)}),t("    undoCoordinateSystem",()=>{TT.undo(e)}),t("    translateGraph",()=>{OZ(e)}),t("    assignNodeIntersects",()=>{xZ(e)}),t("    reversePoints",()=>{AZ(e)}),t("    acyclic.undo",()=>{gT.undo(e)})},cZ=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},fZ=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},dZ=["nodesep","edgesep","ranksep","marginx","marginy"],pZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L1=["acyclicer","ranker","rankdir","align"],hZ=["width","height","layer","fixorder"],vZ={width:0,height:0},yZ=["minlen","weight","width","height","labeloffset"],mZ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},F1=["labelpos"],gZ=e=>{const t=new Mf({multigraph:!0,compound:!0}),n=B1(e.graph()),o={};return L1==null||L1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},pZ,$1(n,dZ),o)),e.nodes().forEach(r=>{const s=B1(e.node(r)),c=Object.assign(Object.assign({},vZ),s),v=$1(c,hZ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=B1(e.edge(r)),c={};F1==null||F1.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},mZ,$1(s,yZ),c))}),t},bZ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},_Z=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Bv(e,"edge-proxy",s,"_ep")}})},wZ=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},EZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},OZ=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,h=g=>{if(!g)return;const b=g.x,w=g.y,O=g.width,S=g.height;!isNaN(b)&&!isNaN(O)&&(t===void 0&&(t=b-O/2),t=Math.min(t,b-O/2),n=Math.max(n,b+O/2)),!isNaN(w)&&!isNaN(S)&&(o===void 0&&(o=w-S/2),o=Math.min(o,w-S/2),r=Math.max(r,w+S/2))};e.nodes().forEach(g=>{h(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&h(b)}),t-=c,o-=v,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=o)}),e.edges().forEach(g=>{var b;const w=e.edge(g);(b=w.points)===null||b===void 0||b.forEach(O=>{O.x-=t,O.y-=o}),w.hasOwnProperty("x")&&(w.x-=t),w.hasOwnProperty("y")&&(w.y-=o)}),s.width=n-t+c,s.height=r-o+v},xZ=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(bT(o,s)),n.points.push(bT(r,c))})},SZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},AZ=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},TZ=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),h=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(h==null?void 0:h.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((h==null?void 0:h.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},MZ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},PZ=e=>{const t=Iy(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+o,(c=v.selfEdges)===null||c===void 0||c.forEach(h=>{Bv(e,"selfedge",{width:h.label.width,height:h.label.height,rank:v.rank,order:s+ ++o,e:h.e,label:h.label},"_se")}),delete v.selfEdges})})},kZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,v=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},$1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},B1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},NZ={layout:uZ,util:{time:mk,notime:gk}};class RZ extends ZY{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:v,rankdir:h,combos:g,begin:b,radial:w,comboEdges:O=[],vedges:S=[]}=s;if(!c)return;const P=s.edges||[],A=new Mf({multigraph:!0,compound:!0});s.nodeMap={};const k={};c.forEach(q=>{s.nodeMap[q.id]=q,q.comboId&&(k[q.comboId]=k[q.comboId]||[],k[q.comboId].push(q.id))});let j=[];const R={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(q=>{R[q]=!0,j.push(s.nodeMap[q])}),c.forEach(q=>{R[q.id]||j.push(q)})):j=c;let B;v?iT(v)?B=()=>v:B=()=>[v,v]:B=q=>q.size?iT(q.size)?q.size:uk(q.size)?[q.size.width||40,q.size.height||40]:[q.size,q.size]:[40,40];const G=aT(s.ranksep,50,s.ranksepFunc),H=aT(s.nodesep,50,s.nodesepFunc);let Y=H,Q=G;(h==="LR"||h==="RL")&&(Y=G,Q=H),A.setDefaultEdgeLabel(()=>({})),A.setGraph(s);const W={};this.sortByCombo&&g&&g.forEach(q=>{if(W[q.id]=q,q.collapsed){const ce=B(q),Ne=Q(q),Oe=Y(q),Xe=ce[0]+2*Oe,Ie=ce[1]+2*Ne;A.setNode(q.id,{width:Xe,height:Ie})}q.parentId&&(W[q.parentId]||A.setNode(q.parentId,{}),A.setParent(q.id,q.parentId))}),j.filter(q=>q.layout!==!1).forEach(q=>{const ce=B(q),Ne=Q(q),Oe=Y(q),Xe=ce[0]+2*Oe,Ie=ce[1]+2*Ne,Pe=q.layer;qg(Pe)?A.setNode(q.id,{width:Xe,height:Ie,layer:Pe}):A.setNode(q.id,{width:Xe,height:Ie}),this.sortByCombo&&q.comboId&&(W[q.comboId]||(W[q.comboId]={id:q.comboId},A.setNode(q.comboId,{})),A.setParent(q.id,q.comboId))}),P.forEach(q=>{const ce=ev(q,"source"),Ne=ev(q,"target");this.layoutNode(ce)&&this.layoutNode(Ne)&&A.setEdge(ce,Ne,{weight:q.weight||1})}),(n=O==null?void 0:O.concat(S||[]))===null||n===void 0||n.forEach(q=>{var ce,Ne;const{source:Oe,target:Xe}=q,Ie=!((ce=W[Oe])===null||ce===void 0)&&ce.collapsed?[Oe]:k[Oe]||[Oe],Pe=!((Ne=W[Xe])===null||Ne===void 0)&&Ne.collapsed?[Xe]:k[Xe]||[Xe];Ie.forEach(le=>{Pe.forEach(ye=>{A.setEdge(le,ye,{weight:q.weight||1})})})});let I;!((o=s.preset)===null||o===void 0)&&o.nodes&&(I=new Mf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(q=>{I==null||I.setNode(q.id,q)})),NZ.layout(A,{prevGraph:I,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const z=[0,0];if(b){let q=1/0,ce=1/0;A.nodes().forEach(Ne=>{const Oe=A.node(Ne);q>Oe.x&&(q=Oe.x),ce>Oe.y&&(ce=Oe.y)}),A.edges().forEach(Ne=>{var Oe;(Oe=A.edge(Ne).points)===null||Oe===void 0||Oe.forEach(Ie=>{q>Ie.x&&(q=Ie.x),ce>Ie.y&&(ce=Ie.y)})}),z[0]=b[0]-q,z[1]=b[1]-ce}const K=h==="LR"||h==="RL";if(w){const{focusNode:q,ranksep:ce,getRadialPos:Ne}=this,Oe=JY(q)?q:q==null?void 0:q.id,Xe=Oe?(r=A.node(Oe))===null||r===void 0?void 0:r._rank:0,Ie=[],Pe=K?"y":"x",le=K?"height":"width";let ye=1/0,Me=-1/0;A.nodes().forEach(ge=>{const Se=A.node(ge);if(!s.nodeMap[ge])return;const ht=H(s.nodeMap[ge]);if(Xe===0)Ie[Se._rank]||(Ie[Se._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[Se._rank].nodes.push(ge),Ie[Se._rank].totalWidth+=ht*2+Se[le],Ie[Se._rank].maxSize<Math.max(Se.width,Se.height)&&(Ie[Se._rank].maxSize=Math.max(Se.width,Se.height));else{const rn=Se._rank-Xe;if(rn===0)Ie[rn]||(Ie[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[rn].nodes.push(ge),Ie[rn].totalWidth+=ht*2+Se[le],Ie[rn].maxSize<Math.max(Se.width,Se.height)&&(Ie[rn].maxSize=Math.max(Se.width,Se.height));else{const yn=Math.abs(rn);Ie[yn]||(Ie[yn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ie[yn].totalWidth+=ht*2+Se[le],Ie[yn].maxSize<Math.max(Se.width,Se.height)&&(Ie[yn].maxSize=Math.max(Se.width,Se.height)),rn<0?Ie[yn].left.push(ge):Ie[yn].right.push(ge)}}const zt=Se[Pe]-Se[le]/2-ht,xt=Se[Pe]+Se[le]/2+ht;zt<ye&&(ye=zt),xt>Me&&(Me=xt)});let ze=ce||50;const je={},it=(Me-ye)/.9,bt=[(ye+Me-it)*.5,(ye+Me+it)*.5],Pt=(ge,Se,ht=-1/0,zt=[0,1])=>{let xt=ht;return ge.forEach(rn=>{const yn=A.node(rn);je[rn]=Se;const{x:Tn,y:pn}=Ne(yn[Pe],bt,it,Se,zt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Tn+z[0],s.nodeMap[rn].y=pn+z[1],s.nodeMap[rn]._order=yn._order;const ft=G(s.nodeMap[rn]);xt<ft&&(xt=ft)}),xt};let Yt=!0;const Ce=0;Ie.forEach(ge=>{var Se,ht,zt,xt,rn,yn,Tn;if(!(!((Se=ge==null?void 0:ge.nodes)===null||Se===void 0)&&Se.length)&&!(!((ht=ge==null?void 0:ge.left)===null||ht===void 0)&&ht.length)&&!(!((zt=ge==null?void 0:ge.right)===null||zt===void 0)&&zt.length))return;if(Yt&&ge.nodes.length===1){const ft=ge.nodes[0];if(!s.nodeMap[ft])return;s.nodeMap[ft].x=z[0],s.nodeMap[ft].y=z[1],je[ge.nodes[0]]=0,ze=G(s.nodeMap[ft]),Yt=!1;return}ze=Math.max(ze,ge.totalWidth/(2*Math.PI));let pn=-1/0;if(Xe===0||!((xt=ge.nodes)===null||xt===void 0)&&xt.length)pn=Pt(ge.nodes,ze,pn,[0,1]);else{const ft=((rn=ge.left)===null||rn===void 0?void 0:rn.length)/(((yn=ge.left)===null||yn===void 0?void 0:yn.length)+((Tn=ge.right)===null||Tn===void 0?void 0:Tn.length));pn=Pt(ge.left,ze,pn,[0,ft]),pn=Pt(ge.right,ze,pn,[ft+.05,1])}ze+=pn,Yt=!1,Ce-ge.maxSize}),A.edges().forEach(ge=>{var Se,ht,zt;const xt=A.edge(ge),rn=P.findIndex(yn=>{const Tn=ev(yn,"source"),pn=ev(yn,"target");return Tn===ge.v&&pn===ge.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[rn].type!=="loop"){const yn=Pe==="x"?"y":"x",Tn=(Se=xt==null?void 0:xt.points)===null||Se===void 0?void 0:Se.slice(1,xt.points.length-1),pn=[],ft=(ht=A.node(ge.v))===null||ht===void 0?void 0:ht[yn],xn=ft-((zt=A.node(ge.w))===null||zt===void 0?void 0:zt[yn]),Be=je[ge.v],mn=Be-je[ge.w];Tn==null||Tn.forEach(Kn=>{const re=(Kn[yn]-ft)/xn*mn+Be,$n=Ne(Kn[Pe],bt,it,re);pn.push({x:$n.x+z[0],y:$n.y+z[1]})}),P[rn].controlPoints=pn}})}else{const q=new Set,Ne=h==="BT"||h==="RL"?(Pe,le)=>le-Pe:(Pe,le)=>Pe-le;A.nodes().forEach(Pe=>{const le=A.node(Pe);if(!le)return;let ye=this.nodeMap[Pe];ye||(ye=g==null?void 0:g.find(Me=>Me.id===Pe)),ye&&(ye.x=le.x+z[0],ye.y=le.y+z[1],ye._order=le._order,q.add(K?ye.x:ye.y))});const Oe=Array.from(q).sort(Ne),Xe=K?(Pe,le)=>Pe.x!==le.x:(Pe,le)=>Pe.y!==le.y,Ie=K?(Pe,le,ye)=>{const Me=Math.max(le.y,ye.y),ze=Math.min(le.y,ye.y);return Pe.filter(je=>je.y<=Me&&je.y>=ze)}:(Pe,le,ye)=>{const Me=Math.max(le.x,ye.x),ze=Math.min(le.x,ye.x);return Pe.filter(je=>je.x<=Me&&je.x>=ze)};A.edges().forEach(Pe=>{var le;const ye=A.edge(Pe),Me=P.findIndex(ze=>{const je=ev(ze,"source"),it=ev(ze,"target");return je===Pe.v&&it===Pe.w});if(!(Me<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[Me].type!=="loop"){(le=ye==null?void 0:ye.points)===null||le===void 0||le.forEach(it=>{it.x+=z[0],it.y+=z[1]});const ze=s.nodeMap[Pe.v],je=s.nodeMap[Pe.w];P[Me].controlPoints=DZ(ye==null?void 0:ye.points,ze,je,Oe,K,Xe,Ie)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:P}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const DZ=(e,t,n,o,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:h,y:g}=t,{x:b,y:w}=n;if(r&&(h=t.y,g=t.x,b=n.y,w=n.x),w!==g&&h!==b){const O=o.indexOf(g),S=o[O+1];if(S){const k=v[0],j=r?{x:(g+S)/2,y:(k==null?void 0:k.y)||b}:{x:(k==null?void 0:k.x)||b,y:(g+S)/2};(!k||s(k,j))&&v.unshift(j)}const P=o.indexOf(w),A=Math.abs(P-O);if(A===1)v=c(v,t,n),v.length||v.push(r?{x:(g+w)/2,y:h}:{x:h,y:(g+w)/2});else if(A>1){const k=o[P-1];if(k){const j=v[v.length-1],R=r?{x:(w+k)/2,y:(j==null?void 0:j.y)||b}:{x:(j==null?void 0:j.x)||h,y:(w+k)/2};(!j||s(j,R))&&v.push(R)}}}}return v};var CT,jT,IT,LT;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(CT||(CT={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jT||(jT={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IT||(IT={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LT||(LT={}));var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xE(e,t){return e(t={exports:{}},t.exports),t.exports}var CZ=function(){this.__data__=[],this.size=0},Uv=function(e,t){return e===t||e!=e&&t!=t},Eb=function(e,t){for(var n=e.length;n--;)if(Uv(e[n][0],t))return n;return-1},jZ=Array.prototype.splice,IZ=function(e){var t=this.__data__,n=Eb(t,e);return!(n<0)&&(n==t.length-1?t.pop():jZ.call(t,n,1),--this.size,!0)},LZ=function(e){var t=this.__data__,n=Eb(t,e);return n<0?void 0:t[n][1]},FZ=function(e){return Eb(this.__data__,e)>-1},$Z=function(e,t){var n=this.__data__,o=Eb(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function rv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}rv.prototype.clear=CZ,rv.prototype.delete=IZ,rv.prototype.get=LZ,rv.prototype.has=FZ,rv.prototype.set=$Z;var Ob=rv,BZ=function(){this.__data__=new Ob,this.size=0},UZ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},VZ=function(e){return this.__data__.get(e)},GZ=function(e){return this.__data__.has(e)},Pk=typeof fg=="object"&&fg&&fg.Object===Object&&fg,WZ=typeof self=="object"&&self&&self.Object===Object&&self,ws=Pk||WZ||Function("return this")(),Uu=ws.Symbol,kk=Object.prototype,zZ=kk.hasOwnProperty,HZ=kk.toString,py=Uu?Uu.toStringTag:void 0,XZ=function(e){var t=zZ.call(e,py),n=e[py];try{e[py]=void 0;var o=!0}catch{}var r=HZ.call(e);return o&&(t?e[py]=n:delete e[py]),r},YZ=Object.prototype.toString,qZ=function(e){return YZ.call(e)},FT=Uu?Uu.toStringTag:void 0,Gd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":FT&&FT in Object(e)?XZ(e):qZ(e)},Nl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},$T,nm=function(e){if(!Nl(e))return!1;var t=Gd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},U1=ws["__core-js_shared__"],BT=($T=/[^.]+$/.exec(U1&&U1.keys&&U1.keys.IE_PROTO||""))?"Symbol(src)_1."+$T:"",KZ=function(e){return!!BT&&BT in e},ZZ=Function.prototype.toString,eh=function(e){if(e!=null){try{return ZZ.call(e)}catch{}try{return e+""}catch{}}return""},JZ=/^\[object .+?Constructor\]$/,QZ=Function.prototype,eJ=Object.prototype,tJ=QZ.toString,nJ=eJ.hasOwnProperty,rJ=RegExp("^"+tJ.call(nJ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oJ=function(e){return!(!Nl(e)||KZ(e))&&(nm(e)?rJ:JZ).test(eh(e))},iJ=function(e,t){return e==null?void 0:e[t]},th=function(e,t){var n=iJ(e,t);return oJ(n)?n:void 0},Ly=th(ws,"Map"),Fy=th(Object,"create"),aJ=function(){this.__data__=Fy?Fy(null):{},this.size=0},lJ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},uJ=Object.prototype.hasOwnProperty,sJ=function(e){var t=this.__data__;if(Fy){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return uJ.call(t,e)?t[e]:void 0},cJ=Object.prototype.hasOwnProperty,fJ=function(e){var t=this.__data__;return Fy?t[e]!==void 0:cJ.call(t,e)},dJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fy&&t===void 0?"__lodash_hash_undefined__":t,this};function ov(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ov.prototype.clear=aJ,ov.prototype.delete=lJ,ov.prototype.get=sJ,ov.prototype.has=fJ,ov.prototype.set=dJ;var UT=ov,pJ=function(){this.size=0,this.__data__={hash:new UT,map:new(Ly||Ob),string:new UT}},hJ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},xb=function(e,t){var n=e.__data__;return hJ(t)?n[typeof t=="string"?"string":"hash"]:n.map},vJ=function(e){var t=xb(this,e).delete(e);return this.size-=t?1:0,t},yJ=function(e){return xb(this,e).get(e)},mJ=function(e){return xb(this,e).has(e)},gJ=function(e,t){var n=xb(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function iv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}iv.prototype.clear=pJ,iv.prototype.delete=vJ,iv.prototype.get=yJ,iv.prototype.has=mJ,iv.prototype.set=gJ;var Sb=iv,bJ=function(e,t){var n=this.__data__;if(n instanceof Ob){var o=n.__data__;if(!Ly||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sb(o)}return n.set(e,t),this.size=n.size,this};function av(e){var t=this.__data__=new Ob(e);this.size=t.size}av.prototype.clear=BZ,av.prototype.delete=UZ,av.prototype.get=VZ,av.prototype.has=GZ,av.prototype.set=bJ;var mv=av,SE=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},Zg=function(){try{var e=th(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ab=function(e,t,n){t=="__proto__"&&Zg?Zg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},_J=Object.prototype.hasOwnProperty,Tb=function(e,t,n){var o=e[t];_J.call(e,t)&&Uv(o,n)&&(n!==void 0||t in e)||Ab(e,t,n)},rm=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],h=o?o(n[v],e[v],v,n,e):void 0;h===void 0&&(h=e[v]),r?Ab(n,v,h):Tb(n,v,h)}return n},wJ=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},bs=function(e){return e!=null&&typeof e=="object"},VT=function(e){return bs(e)&&Gd(e)=="[object Arguments]"},Nk=Object.prototype,EJ=Nk.hasOwnProperty,OJ=Nk.propertyIsEnumerable,Av=VT(function(){return arguments}())?VT:function(e){return bs(e)&&EJ.call(e,"callee")&&!OJ.call(e,"callee")},Mi=Array.isArray,xJ=function(){return!1},zp=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=(r?r.isBuffer:void 0)||xJ;e.exports=s}),SJ=/^(?:0|[1-9]\d*)$/,Mb=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&SJ.test(e))&&e>-1&&e%1==0&&e<t},AE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ri={};ri["[object Float32Array]"]=ri["[object Float64Array]"]=ri["[object Int8Array]"]=ri["[object Int16Array]"]=ri["[object Int32Array]"]=ri["[object Uint8Array]"]=ri["[object Uint8ClampedArray]"]=ri["[object Uint16Array]"]=ri["[object Uint32Array]"]=!0,ri["[object Arguments]"]=ri["[object Array]"]=ri["[object ArrayBuffer]"]=ri["[object Boolean]"]=ri["[object DataView]"]=ri["[object Date]"]=ri["[object Error]"]=ri["[object Function]"]=ri["[object Map]"]=ri["[object Number]"]=ri["[object Object]"]=ri["[object RegExp]"]=ri["[object Set]"]=ri["[object String]"]=ri["[object WeakMap]"]=!1;var AJ=function(e){return bs(e)&&AE(e.length)&&!!ri[Gd(e)]},Pb=function(e){return function(t){return e(t)}},Tv=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&Pk.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),GT=Tv&&Tv.isTypedArray,om=GT?Pb(GT):AJ,TJ=Object.prototype.hasOwnProperty,Rk=function(e,t){var n=Mi(e),o=!n&&Av(e),r=!n&&!o&&zp(e),s=!n&&!o&&!r&&om(e),c=n||o||r||s,v=c?wJ(e.length,String):[],h=v.length;for(var g in e)!t&&!TJ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Mb(g,h))||v.push(g);return v},MJ=Object.prototype,kb=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||MJ)},Dk=function(e,t){return function(n){return e(t(n))}},PJ=Dk(Object.keys,Object),kJ=Object.prototype.hasOwnProperty,TE=function(e){if(!kb(e))return PJ(e);var t=[];for(var n in Object(e))kJ.call(e,n)&&n!="constructor"&&t.push(n);return t},Rf=function(e){return e!=null&&AE(e.length)&&!nm(e)},Wd=function(e){return Rf(e)?Rk(e):TE(e)},NJ=function(e,t){return e&&rm(t,Wd(t),e)},RJ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},DJ=Object.prototype.hasOwnProperty,CJ=function(e){if(!Nl(e))return RJ(e);var t=kb(e),n=[];for(var o in e)(o!="constructor"||!t&&DJ.call(e,o))&&n.push(o);return n},nh=function(e){return Rf(e)?Rk(e,!0):CJ(e)},jJ=function(e,t){return e&&rm(t,nh(t),e)},Ck=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var h=c.length,g=s?s(h):new c.constructor(h);return c.copy(g),g}}),jk=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},Ik=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},Lk=function(){return[]},IJ=Object.prototype.propertyIsEnumerable,WT=Object.getOwnPropertySymbols,ME=WT?function(e){return e==null?[]:(e=Object(e),Ik(WT(e),function(t){return IJ.call(e,t)}))}:Lk,LJ=function(e,t){return rm(e,ME(e),t)},PE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},Nb=Dk(Object.getPrototypeOf,Object),Fk=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)PE(t,ME(e)),e=Nb(e);return t}:Lk,FJ=function(e,t){return rm(e,Fk(e),t)},$k=function(e,t,n){var o=t(e);return Mi(e)?o:PE(o,n(e))},Ew=function(e){return $k(e,Wd,ME)},$J=function(e){return $k(e,nh,Fk)},Ow=th(ws,"DataView"),xw=th(ws,"Promise"),gv=th(ws,"Set"),Sw=th(ws,"WeakMap"),BJ=eh(Ow),UJ=eh(Ly),VJ=eh(xw),GJ=eh(gv),WJ=eh(Sw),Bp=Gd;(Ow&&Bp(new Ow(new ArrayBuffer(1)))!="[object DataView]"||Ly&&Bp(new Ly)!="[object Map]"||xw&&Bp(xw.resolve())!="[object Promise]"||gv&&Bp(new gv)!="[object Set]"||Sw&&Bp(new Sw)!="[object WeakMap]")&&(Bp=function(e){var t=Gd(e),n=t=="[object Object]"?e.constructor:void 0,o=n?eh(n):"";if(o)switch(o){case BJ:return"[object DataView]";case UJ:return"[object Map]";case VJ:return"[object Promise]";case GJ:return"[object Set]";case WJ:return"[object WeakMap]"}return t});var Hp=Bp,zJ=Object.prototype.hasOwnProperty,HJ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&zJ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Jg=ws.Uint8Array,kE=function(e){var t=new e.constructor(e.byteLength);return new Jg(t).set(new Jg(e)),t},XJ=function(e,t){var n=t?kE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},YJ=/\w*$/,qJ=function(e){var t=new e.constructor(e.source,YJ.exec(e));return t.lastIndex=e.lastIndex,t},zT=Uu?Uu.prototype:void 0,HT=zT?zT.valueOf:void 0,KJ=function(e){return HT?Object(HT.call(e)):{}},Bk=function(e,t){var n=t?kE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},ZJ=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return kE(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return XJ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Bk(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return qJ(e);case"[object Set]":return new o;case"[object Symbol]":return KJ(e)}},XT=Object.create,Uk=function(){function e(){}return function(t){if(!Nl(t))return{};if(XT)return XT(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Vk=function(e){return typeof e.constructor!="function"||kb(e)?{}:Uk(Nb(e))},JJ=function(e){return bs(e)&&Hp(e)=="[object Map]"},YT=Tv&&Tv.isMap,QJ=YT?Pb(YT):JJ,eQ=function(e){return bs(e)&&Hp(e)=="[object Set]"},qT=Tv&&Tv.isSet,tQ=qT?Pb(qT):eQ,Ho={};Ho["[object Arguments]"]=Ho["[object Array]"]=Ho["[object ArrayBuffer]"]=Ho["[object DataView]"]=Ho["[object Boolean]"]=Ho["[object Date]"]=Ho["[object Float32Array]"]=Ho["[object Float64Array]"]=Ho["[object Int8Array]"]=Ho["[object Int16Array]"]=Ho["[object Int32Array]"]=Ho["[object Map]"]=Ho["[object Number]"]=Ho["[object Object]"]=Ho["[object RegExp]"]=Ho["[object Set]"]=Ho["[object String]"]=Ho["[object Symbol]"]=Ho["[object Uint8Array]"]=Ho["[object Uint8ClampedArray]"]=Ho["[object Uint16Array]"]=Ho["[object Uint32Array]"]=!0,Ho["[object Error]"]=Ho["[object Function]"]=Ho["[object WeakMap]"]=!1;var Gk=function e(t,n,o,r,s,c){var v,h=1&n,g=2&n,b=4&n;if(o&&(v=s?o(t,r,s,c):o(t)),v!==void 0)return v;if(!Nl(t))return t;var w=Mi(t);if(w){if(v=HJ(t),!h)return jk(t,v)}else{var O=Hp(t),S=O=="[object Function]"||O=="[object GeneratorFunction]";if(zp(t))return Ck(t,h);if(O=="[object Object]"||O=="[object Arguments]"||S&&!s){if(v=g||S?{}:Vk(t),!h)return g?FJ(t,jJ(v,t)):LJ(t,NJ(v,t))}else{if(!Ho[O])return s?t:{};v=ZJ(t,O,h)}}c||(c=new mv);var P=c.get(t);if(P)return P;c.set(t,v),tQ(t)?t.forEach(function(k){v.add(e(k,n,o,k,t,c))}):QJ(t)&&t.forEach(function(k,j){v.set(j,e(k,n,o,j,t,c))});var A=w?void 0:(b?g?$J:Ew:g?nh:Wd)(t);return SE(A||t,function(k,j){A&&(k=t[j=k]),Tb(v,j,e(k,n,o,j,t,c))}),v},nQ=function(e){return Gk(e,4)},NE=function(e){return function(){return e}},RE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),v=c.length;v--;){var h=c[e?v:++r];if(n(s[h],h,s)===!1)break}return t}}(),DE=function(e,t){return e&&RE(e,t,Wd)},Rb=function(e,t){return function(n,o){if(n==null)return n;if(!Rf(n))return e(n,o);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&o(c[s],s,c)!==!1;);return n}}(DE),rh=function(e){return e},Wk=function(e){return typeof e=="function"?e:rh},zk=function(e,t){return(Mi(e)?SE:Rb)(e,Wk(t))},Hk=zk,rQ=function(e,t){var n=[];return Rb(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},oQ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},iQ=function(e){return this.__data__.has(e)};function Sg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Sb;++t<n;)this.add(e[t])}Sg.prototype.add=Sg.prototype.push=oQ,Sg.prototype.has=iQ;var Xk=Sg,aQ=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},Yk=function(e,t){return e.has(t)},qk=function(e,t,n,o,r,s){var c=1&n,v=e.length,h=t.length;if(v!=h&&!(c&&h>v))return!1;var g=s.get(e),b=s.get(t);if(g&&b)return g==t&&b==e;var w=-1,O=!0,S=2&n?new Xk:void 0;for(s.set(e,t),s.set(t,e);++w<v;){var P=e[w],A=t[w];if(o)var k=c?o(A,P,w,t,e,s):o(P,A,w,e,t,s);if(k!==void 0){if(k)continue;O=!1;break}if(S){if(!aQ(t,function(j,R){if(!Yk(S,R)&&(P===j||r(P,j,n,o,s)))return S.push(R)})){O=!1;break}}else if(P!==A&&!r(P,A,n,o,s)){O=!1;break}}return s.delete(e),s.delete(t),O},lQ=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},CE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},KT=Uu?Uu.prototype:void 0,V1=KT?KT.valueOf:void 0,uQ=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Jg(e),new Jg(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Uv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=lQ;case"[object Set]":var h=1&o;if(v||(v=CE),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;o|=2,c.set(e,t);var b=qk(v(e),v(t),o,r,s,c);return c.delete(e),b;case"[object Symbol]":if(V1)return V1.call(e)==V1.call(t)}return!1},sQ=Object.prototype.hasOwnProperty,cQ=function(e,t,n,o,r,s){var c=1&n,v=Ew(e),h=v.length;if(h!=Ew(t).length&&!c)return!1;for(var g=h;g--;){var b=v[g];if(!(c?b in t:sQ.call(t,b)))return!1}var w=s.get(e),O=s.get(t);if(w&&O)return w==t&&O==e;var S=!0;s.set(e,t),s.set(t,e);for(var P=c;++g<h;){var A=e[b=v[g]],k=t[b];if(o)var j=c?o(k,A,b,t,e,s):o(A,k,b,e,t,s);if(!(j===void 0?A===k||r(A,k,n,o,s):j)){S=!1;break}P||(P=b=="constructor")}if(S&&!P){var R=e.constructor,B=t.constructor;R==B||!("constructor"in e)||!("constructor"in t)||typeof R=="function"&&R instanceof R&&typeof B=="function"&&B instanceof B||(S=!1)}return s.delete(e),s.delete(t),S},ZT=Object.prototype.hasOwnProperty,fQ=function(e,t,n,o,r,s){var c=Mi(e),v=Mi(t),h=c?"[object Array]":Hp(e),g=v?"[object Array]":Hp(t),b=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",w=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=h==g;if(O&&zp(e)){if(!zp(t))return!1;c=!0,b=!1}if(O&&!b)return s||(s=new mv),c||om(e)?qk(e,t,n,o,r,s):uQ(e,t,h,n,o,r,s);if(!(1&n)){var S=b&&ZT.call(e,"__wrapped__"),P=w&&ZT.call(t,"__wrapped__");if(S||P){var A=S?e.value():e,k=P?t.value():t;return s||(s=new mv),r(A,k,n,o,s)}}return!!O&&(s||(s=new mv),cQ(e,t,n,o,r,s))},Kk=function e(t,n,o,r,s){return t===n||(t==null||n==null||!bs(t)&&!bs(n)?t!=t&&n!=n:fQ(t,n,o,r,e,s))},dQ=function(e,t,n,o){var r=n.length,s=r,c=!o;if(e==null)return!s;for(e=Object(e);r--;){var v=n[r];if(c&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++r<s;){var h=(v=n[r])[0],g=e[h],b=v[1];if(c&&v[2]){if(g===void 0&&!(h in e))return!1}else{var w=new mv;if(o)var O=o(g,b,h,e,t,w);if(!(O===void 0?Kk(b,g,3,o,w):O))return!1}}return!0},Zk=function(e){return e==e&&!Nl(e)},pQ=function(e){for(var t=Wd(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,Zk(r)]}return t},Jk=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},hQ=function(e){var t=pQ(e);return t.length==1&&t[0][2]?Jk(t[0][0],t[0][1]):function(n){return n===e||dQ(n,e,t)}},Xp=function(e){return typeof e=="symbol"||bs(e)&&Gd(e)=="[object Symbol]"},vQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yQ=/^\w*$/,jE=function(e,t){if(Mi(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Xp(e))||yQ.test(e)||!vQ.test(e)||t!=null&&e in Object(t)};function IE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new(IE.Cache||Sb),n}IE.Cache=Sb;var mQ=IE,gQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bQ=/\\(\\)?/g,_Q=function(e){var t=mQ(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(gQ,function(n,o,r,s){t.push(r?s.replace(bQ,"$1"):o||n)}),t}),bv=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},JT=Uu?Uu.prototype:void 0,QT=JT?JT.toString:void 0,wQ=function e(t){if(typeof t=="string")return t;if(Mi(t))return bv(t,e)+"";if(Xp(t))return QT?QT.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},Qk=function(e){return e==null?"":wQ(e)},Db=function(e,t){return Mi(e)?e:jE(e,t)?[e]:_Q(Qk(e))},im=function(e){if(typeof e=="string"||Xp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Cb=function(e,t){for(var n=0,o=(t=Db(t,e)).length;e!=null&&n<o;)e=e[im(t[n++])];return n&&n==o?e:void 0},EQ=function(e,t,n){var o=e==null?void 0:Cb(e,t);return o===void 0?n:o},OQ=function(e,t){return e!=null&&t in Object(e)},eN=function(e,t,n){for(var o=-1,r=(t=Db(t,e)).length,s=!1;++o<r;){var c=im(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&AE(r)&&Mb(c,r)&&(Mi(e)||Av(e))},tN=function(e,t){return e!=null&&eN(e,t,OQ)},xQ=function(e,t){return jE(e)&&Zk(t)?Jk(im(e),t):function(n){var o=EQ(n,e);return o===void 0&&o===t?tN(n,e):Kk(t,o,3)}},nN=function(e){return function(t){return t==null?void 0:t[e]}},SQ=function(e){return function(t){return Cb(t,e)}},AQ=function(e){return jE(e)?nN(im(e)):SQ(e)},Df=function(e){return typeof e=="function"?e:e==null?rh:typeof e=="object"?Mi(e)?xQ(e[0],e[1]):hQ(e):AQ(e)},rN=function(e,t){return(Mi(e)?Ik:rQ)(e,Df(t))},TQ=Object.prototype.hasOwnProperty,MQ=function(e,t){return e!=null&&TQ.call(e,t)},oN=function(e,t){return e!=null&&eN(e,t,MQ)},PQ=Object.prototype.hasOwnProperty,kQ=function(e){if(e==null)return!0;if(Rf(e)&&(Mi(e)||typeof e=="string"||typeof e.splice=="function"||zp(e)||om(e)||Av(e)))return!e.length;var t=Hp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(kb(e))return!TE(e).length;for(var n in e)if(PQ.call(e,n))return!1;return!0},iN=function(e){return e===void 0},aN=function(e,t){var n=-1,o=Rf(e)?Array(e.length):[];return Rb(e,function(r,s,c){o[++n]=t(r,s,c)}),o},lN=function(e,t){return(Mi(e)?bv:aN)(e,Df(t))},NQ=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},RQ=function(e,t,n,o,r){return r(e,function(s,c,v){n=o?(o=!1,s):t(n,s,c,v)}),n},uN=function(e,t,n){var o=Mi(e)?NQ:RQ,r=arguments.length<3;return o(e,Df(t),n,r,Rb)},DQ=function(e){return typeof e=="string"||!Mi(e)&&bs(e)&&Gd(e)=="[object String]"},CQ=nN("length"),jQ=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),IQ=function(e){return jQ.test(e)},LQ="[\\ud800-\\udfff]",Aw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Tw="\\ud83c[\\udffb-\\udfff]",sN="[^\\ud800-\\udfff]",cN="(?:\\ud83c[\\udde6-\\uddff]){2}",fN="[\\ud800-\\udbff][\\udc00-\\udfff]",eM="(?:"+Aw+"|"+Tw+")?",FQ="[\\ufe0e\\ufe0f]?"+eM+("(?:\\u200d(?:"+[sN,cN,fN].join("|")+")[\\ufe0e\\ufe0f]?"+eM+")*"),$Q="(?:"+[sN+Aw+"?",Aw,cN,fN,LQ].join("|")+")",tM=RegExp(Tw+"(?="+Tw+")|"+$Q+FQ,"g"),BQ=function(e){for(var t=tM.lastIndex=0;tM.test(e);)++t;return t},UQ=function(e){return IQ(e)?BQ(e):CQ(e)},VQ=function(e){if(e==null)return 0;if(Rf(e))return DQ(e)?UQ(e):e.length;var t=Hp(e);return t=="[object Map]"||t=="[object Set]"?e.size:TE(e).length},GQ=function(e,t,n){var o=Mi(e),r=o||zp(e)||om(e);if(t=Df(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:Nl(e)&&nm(s)?Uk(Nb(e)):{}}return(r?SE:DE)(e,function(c,v,h){return t(n,c,v,h)}),n},nM=Uu?Uu.isConcatSpreadable:void 0,WQ=function(e){return Mi(e)||Av(e)||!!(nM&&e&&e[nM])},LE=function e(t,n,o,r,s){var c=-1,v=t.length;for(o||(o=WQ),s||(s=[]);++c<v;){var h=t[c];n>0&&o(h)?n>1?e(h,n-1,o,r,s):PE(s,h):r||(s[s.length]=h)}return s},zQ=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rM=Math.max,dN=function(e,t,n){return t=rM(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=rM(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=o[r];return v[t]=n(c),zQ(e,this,v)}},HQ=Zg?function(e,t){return Zg(e,"toString",{configurable:!0,enumerable:!1,value:NE(t),writable:!0})}:rh,XQ=Date.now,pN=function(e){var t=0,n=0;return function(){var o=XQ(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(HQ),jb=function(e,t){return pN(dN(e,t,rh),e+"")},hN=function(e,t,n,o){for(var r=e.length,s=n+(o?1:-1);o?s--:++s<r;)if(t(e[s],s,e))return s;return-1},YQ=function(e){return e!=e},qQ=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},KQ=function(e,t,n){return t==t?qQ(e,t,n):hN(e,YQ,n)},ZQ=function(e,t){return!!(e!=null&&e.length)&&KQ(e,t,0)>-1},JQ=function(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1},QQ=function(){},eee=gv&&1/CE(new gv([,-0]))[1]==1/0?function(e){return new gv(e)}:QQ,tee=function(e,t,n){var o=-1,r=ZQ,s=e.length,c=!0,v=[],h=v;if(n)c=!1,r=JQ;else if(s>=200){var g=t?null:eee(e);if(g)return CE(g);c=!1,r=Yk,h=new Xk}else h=t?[]:v;e:for(;++o<s;){var b=e[o],w=t?t(b):b;if(b=n||b!==0?b:0,c&&w==w){for(var O=h.length;O--;)if(h[O]===w)continue e;t&&h.push(w),v.push(b)}else r(h,w,n)||(h!==v&&h.push(w),v.push(b))}return v},vN=function(e){return bs(e)&&Rf(e)},nee=jb(function(e){return tee(LE(e,1,vN,!0))}),ree=function(e,t){return bv(t,function(n){return e[n]})},Qg,yN=function(e){return e==null?[]:ree(e,Wd(e))};try{Qg={clone:nQ,constant:NE,each:Hk,filter:rN,has:oN,isArray:Mi,isEmpty:kQ,isFunction:nm,isUndefined:iN,keys:Wd,map:lN,reduce:uN,size:VQ,transform:GQ,union:nee,values:yN}}catch{}Qg||(Qg=window._);var En=Qg,FE=Br;function Br(e){this._isDirected=!En.has(e,"directed")||e.directed,this._isMultigraph=!!En.has(e,"multigraph")&&e.multigraph,this._isCompound=!!En.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=En.constant(void 0),this._defaultEdgeLabelFn=En.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oM(e,t){e[t]?e[t]++:e[t]=1}function iM(e,t){--e[t]||delete e[t]}function wy(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(En.isUndefined(o)?"\0":o)}function oee(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return o&&(v.name=o),v}function G1(e,t){return wy(e,t.v,t.w,t.name)}Br.prototype._nodeCount=0,Br.prototype._edgeCount=0,Br.prototype.isDirected=function(){return this._isDirected},Br.prototype.isMultigraph=function(){return this._isMultigraph},Br.prototype.isCompound=function(){return this._isCompound},Br.prototype.setGraph=function(e){return this._label=e,this},Br.prototype.graph=function(){return this._label},Br.prototype.setDefaultNodeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultNodeLabelFn=e,this},Br.prototype.nodeCount=function(){return this._nodeCount},Br.prototype.nodes=function(){return En.keys(this._nodes)},Br.prototype.sources=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._in[t])})},Br.prototype.sinks=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._out[t])})},Br.prototype.setNodes=function(e,t){var n=arguments,o=this;return En.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Br.prototype.setNode=function(e,t){return En.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Br.prototype.node=function(e){return this._nodes[e]},Br.prototype.hasNode=function(e){return En.has(this._nodes,e)},Br.prototype.removeNode=function(e){var t=this;if(En.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],En.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),En.each(En.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],En.each(En.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Br.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(En.isUndefined(t))t="\0";else{for(var n=t+="";!En.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Br.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Br.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Br.prototype.children=function(e){if(En.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return En.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Br.prototype.predecessors=function(e){var t=this._preds[e];if(t)return En.keys(t)},Br.prototype.successors=function(e){var t=this._sucs[e];if(t)return En.keys(t)},Br.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return En.union(t,this.successors(e))},Br.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Br.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;En.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),En.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&En.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Br.prototype.setDefaultEdgeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultEdgeLabelFn=e,this},Br.prototype.edgeCount=function(){return this._edgeCount},Br.prototype.edges=function(){return En.values(this._edgeObjs)},Br.prototype.setPath=function(e,t){var n=this,o=arguments;return En.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Br.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,En.isUndefined(n)||(n=""+n);var c=wy(this._isDirected,e,t,n);if(En.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!En.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var v=oee(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,oM(this._preds[t],e),oM(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Br.prototype.edge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n);return this._edgeLabels[o]},Br.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n);return En.has(this._edgeLabels,o)},Br.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],iM(this._preds[t],e),iM(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Br.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.v===t}):o}},Br.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.w===t}):o}},Br.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aM={Graph:FE,version:"2.1.8"},iee={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:aee(e),edges:lee(e)};return En.isUndefined(e.graph())||(t.value=En.clone(e.graph())),t},read:function(e){var t=new FE(e.options).setGraph(e.value);return En.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),En.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function aee(e){return En.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return En.isUndefined(n)||(r.value=n),En.isUndefined(o)||(r.parent=o),r})}function lee(e){return En.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return En.isUndefined(t.name)||(o.name=t.name),En.isUndefined(n)||(o.value=n),o})}var uee=function(e){var t,n={},o=[];function r(s){En.has(n,s)||(n[s]=!0,t.push(s),En.each(e.successors(s),r),En.each(e.predecessors(s),r))}return En.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},mN=Cu;function Cu(){this._arr=[],this._keyIndices={}}Cu.prototype.size=function(){return this._arr.length},Cu.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Cu.prototype.has=function(e){return En.has(this._keyIndices,e)},Cu.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Cu.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Cu.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!En.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},Cu.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Cu.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Cu.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Cu.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},Cu.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var gN=function(e,t,n,o){return function(r,s,c,v){var h,g,b={},w=new mN,O=function(S){var P=S.v!==h?S.v:S.w,A=b[P],k=c(S),j=g.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+k);j<A.distance&&(A.distance=j,A.predecessor=h,w.decrease(P,j))};for(r.nodes().forEach(function(S){var P=S===s?0:Number.POSITIVE_INFINITY;b[S]={distance:P},w.add(S,P)});w.size()>0&&(h=w.removeMin(),(g=b[h]).distance!==Number.POSITIVE_INFINITY);)v(h).forEach(O);return b}(e,String(t),n||see,o||function(r){return e.outEdges(r)})},see=En.constant(1),cee=function(e,t,n){return En.transform(e.nodes(),function(o,r){o[r]=gN(e,r,t,n)},{})},bN=function(e){var t=0,n=[],o={},r=[];function s(c){var v=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){En.has(o,b)?o[b].onStack&&(v.lowlink=Math.min(v.lowlink,o[b].index)):(s(b),v.lowlink=Math.min(v.lowlink,o[b].lowlink))}),v.lowlink===v.index){var h,g=[];do h=n.pop(),o[h].onStack=!1,g.push(h);while(c!==h);r.push(g)}}return e.nodes().forEach(function(c){En.has(o,c)||s(c)}),r},fee=function(e){return En.filter(bN(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},dee=function(e,t,n){return function(o,r,s){var c={},v=o.nodes();return v.forEach(function(h){c[h]={},c[h][h]={distance:0},v.forEach(function(g){h!==g&&(c[h][g]={distance:Number.POSITIVE_INFINITY})}),s(h).forEach(function(g){var b=g.v===h?g.w:g.v,w=r(g);c[h][b]={distance:w,predecessor:h}})}),v.forEach(function(h){var g=c[h];v.forEach(function(b){var w=c[b];v.forEach(function(O){var S=w[h],P=g[O],A=w[O],k=S.distance+P.distance;k<A.distance&&(A.distance=k,A.predecessor=P.predecessor)})})}),c}(e,t||pee,n||function(o){return e.outEdges(o)})},pee=En.constant(1),W1=_N;function _N(e){var t={},n={},o=[];if(En.each(e.sinks(),function r(s){if(En.has(n,s))throw new eb;En.has(t,s)||(n[s]=!0,t[s]=!0,En.each(e.predecessors(s),r),delete n[s],o.push(s))}),En.size(t)!==e.nodeCount())throw new eb;return o}function eb(){}_N.CycleException=eb,eb.prototype=new Error;var lM=function(e,t,n){En.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return En.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);wN(e,c,n==="post",s,o,r)}),r};function wN(e,t,n,o,r,s){En.has(o,t)||(o[t]=!0,n||s.push(t),En.each(r(t),function(c){wN(e,c,n,o,r,s)}),n&&s.push(t))}var tb,hee={Graph:aM.Graph,json:iee,alg:{components:uee,dijkstra:gN,dijkstraAll:cee,findCycles:fee,floydWarshall:dee,isAcyclic:function(e){try{W1(e)}catch(t){if(t instanceof W1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lM(e,t,"post")},preorder:function(e,t){return lM(e,t,"pre")},prim:function(e,t){var n,o=new FE,r={},s=new mN;function c(h){var g=h.v===n?h.w:h.v,b=s.priority(g);if(b!==void 0){var w=t(h);w<b&&(r[g]=n,s.decrease(g,w))}}if(e.nodeCount()===0)return o;En.each(e.nodes(),function(h){s.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),En.has(r,n))o.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:bN,topsort:W1},version:aM.version};try{tb=hee}catch{}tb||(tb=window.graphlib);var yc=tb,vee=function(e){return Gk(e,5)},$y=function(e,t,n){if(!Nl(n))return!1;var o=typeof t;return!!(o=="number"?Rf(n)&&Mb(t,n.length):o=="string"&&t in n)&&Uv(n[t],e)},EN=Object.prototype,yee=EN.hasOwnProperty,mee=jb(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&$y(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=nh(s),v=-1,h=c.length;++v<h;){var g=c[v],b=e[g];(b===void 0||Uv(b,EN[g])&&!yee.call(e,g))&&(e[g]=s[g])}return e}),gee=function(e){return function(t,n,o){var r=Object(t);if(!Rf(t)){var s=Df(n);t=Wd(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},bee=/^\s+|\s+$/g,_ee=/^[-+]0x[0-9a-f]+$/i,wee=/^0b[01]+$/i,Eee=/^0o[0-7]+$/i,Oee=parseInt,xee=function(e){if(typeof e=="number")return e;if(Xp(e))return NaN;if(Nl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Nl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(bee,"");var n=wee.test(e);return n||Eee.test(e)?Oee(e.slice(2),n?2:8):_ee.test(e)?NaN:+e},Ag=function(e){return e?(e=xee(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},See=function(e){var t=Ag(e),n=t%1;return t==t?n?t-n:t:0},Aee=Math.max,Tee=gee(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:See(n);return r<0&&(r=Aee(o+r,0)),hN(e,Df(t),r)}),ON=function(e){return e!=null&&e.length?LE(e,1):[]},Mee=function(e,t){return e==null?e:RE(e,Wk(t),nh)},Pee=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},kee=function(e,t){var n={};return t=Df(t),DE(e,function(o,r,s){Ab(n,r,t(o,r,s))}),n},$E=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(v===void 0?c==c&&!Xp(c):n(c,v)))var v=c,h=s}return h},Nee=function(e,t){return e>t},Ree=function(e){return e&&e.length?$E(e,rh,Nee):void 0},Mw=function(e,t,n){(n!==void 0&&!Uv(e[t],n)||n===void 0&&!(t in e))&&Ab(e,t,n)},Dee=Function.prototype,Cee=Object.prototype,xN=Dee.toString,jee=Cee.hasOwnProperty,Iee=xN.call(Object),Lee=function(e){if(!bs(e)||Gd(e)!="[object Object]")return!1;var t=Nb(e);if(t===null)return!0;var n=jee.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&xN.call(n)==Iee},Pw=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Fee=function(e){return rm(e,nh(e))},$ee=function(e,t,n,o,r,s,c){var v=Pw(e,n),h=Pw(t,n),g=c.get(h);if(g)Mw(e,n,g);else{var b=s?s(v,h,n+"",e,t,c):void 0,w=b===void 0;if(w){var O=Mi(h),S=!O&&zp(h),P=!O&&!S&&om(h);b=h,O||S||P?Mi(v)?b=v:vN(v)?b=jk(v):S?(w=!1,b=Ck(h,!0)):P?(w=!1,b=Bk(h,!0)):b=[]:Lee(h)||Av(h)?(b=v,Av(v)?b=Fee(v):Nl(v)&&!nm(v)||(b=Vk(h))):w=!1}w&&(c.set(h,b),r(b,h,o,s,c),c.delete(h)),Mw(e,n,b)}},Bee=function e(t,n,o,r,s){t!==n&&RE(n,function(c,v){if(s||(s=new mv),Nl(c))$ee(t,n,v,o,e,r,s);else{var h=r?r(Pw(t,v),c,v+"",t,n,s):void 0;h===void 0&&(h=c),Mw(t,v,h)}},nh)},Uee=function(e){return jb(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&$y(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var v=n[o];v&&e(t,v,o,s)}return t})}(function(e,t,n){Bee(e,t,n)}),SN=function(e,t){return e<t},Vee=function(e){return e&&e.length?$E(e,rh,SN):void 0},Gee=function(e,t){return e&&e.length?$E(e,Df(t),SN):void 0},Wee=function(){return ws.Date.now()},zee=function(e,t,n,o){if(!Nl(e))return e;for(var r=-1,s=(t=Db(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var h=im(t[r]),g=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(r!=c){var b=v[h];(g=o?o(b,h,v):void 0)===void 0&&(g=Nl(b)?b:Mb(t[r+1])?[]:{})}Tb(v,h,g),v=v[h]}return e},Hee=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],v=Cb(e,c);n(v,c)&&zee(s,Db(c,e),v)}return s},Xee=function(e,t){return Hee(e,t,function(n,o){return tN(e,o)})},Yee=function(e){return pN(dN(e,void 0,ON),e+"")}(function(e,t){return e==null?{}:Xee(e,t)}),qee=Math.ceil,Kee=Math.max,Zee=function(e,t,n,o){for(var r=-1,s=Kee(qee((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++r]=e,e+=n;return c},Jee=function(e){return function(t,n,o){return o&&typeof o!="number"&&$y(t,n,o)&&(n=o=void 0),t=Ag(t),n===void 0?(n=t,t=0):n=Ag(n),o=o===void 0?t<n?1:-1:Ag(o),Zee(t,n,o,e)}}(),Qee=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},ete=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=Xp(e),c=t!==void 0,v=t===null,h=t==t,g=Xp(t);if(!v&&!g&&!s&&e>t||s&&c&&h&&!v&&!g||o&&c&&h||!n&&h||!r)return 1;if(!o&&!s&&!g&&e<t||g&&n&&r&&!o&&!s||v&&n&&r||!c&&r||!h)return-1}return 0},tte=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++o<c;){var h=ete(r[o],s[o]);if(h)return o>=v?h:h*(n[o]=="desc"?-1:1)}return e.index-t.index},nte=function(e,t,n){t=t.length?bv(t,function(s){return Mi(s)?function(c){return Cb(c,s.length===1?s[0]:s)}:s}):[rh];var o=-1;t=bv(t,Pb(Df));var r=aN(e,function(s,c,v){return{criteria:bv(t,function(h){return h(s)}),index:++o,value:s}});return Qee(r,function(s,c){return tte(s,c,n)})},rte=jb(function(e,t){if(e==null)return[];var n=t.length;return n>1&&$y(e,t[0],t[1])?t=[]:n>2&&$y(t[0],t[1],t[2])&&(t=[t[0]]),nte(e,LE(t,1),[])}),ote=0,ite=function(e){var t=++ote;return Qk(e)+t},ate=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var v=o<s?t[o]:void 0;n(c,e[o],v)}return c},nb,lte=function(e,t){return ate(e||[],t||[],Tb)};try{nb={cloneDeep:vee,constant:NE,defaults:mee,each:Hk,filter:rN,find:Tee,flatten:ON,forEach:zk,forIn:Mee,has:oN,isUndefined:iN,last:Pee,map:lN,mapValues:kee,max:Ree,merge:Uee,min:Vee,minBy:Gee,now:Wee,pick:Yee,range:Jee,reduce:uN,sortBy:rte,uniqueId:ite,values:yN,zipObject:lte}}catch{}nb||(nb=window._);var ute=nb;yc.Graph;ute.constant(1);yc.Graph;yc.Graph;yc.alg.preorder;yc.alg.postorder;yc.Graph;yc.Graph;yc.Graph;yc.Graph;yc.Graph;function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}function ste(e,t){if(By(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(By(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cte(e){var t=ste(e,"string");return By(t)=="symbol"?t:t+""}function an(e,t,n){return(t=cte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fte=typeof my=="object"&&my&&my.Object===Object&&my,AN=fte,dte=AN,pte=typeof self=="object"&&self&&self.Object===Object&&self,hte=dte||pte||Function("return this")(),vte=hte,yte=vte,mte=yte.Symbol,TN=mte,uM=TN;uM&&uM.toStringTag;var sM=TN;sM&&sM.toStringTag;var rb={exports:{}};rb.exports;(function(e,t){var n=AN,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,v=function(){try{var h=r&&r.require&&r.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v})(rb,rb.exports);var gte=rb.exports,cM=gte;cM&&cM.isTypedArray;var MN={exports:{}},PN={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(PN);var bte=PN.exports;(function(e){var t=bte.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var o,r={},s=Object.prototype,c=s.hasOwnProperty,v=Object.defineProperty||function(le,ye,Me){le[ye]=Me.value},h=typeof Symbol=="function"?Symbol:{},g=h.iterator||"@@iterator",b=h.asyncIterator||"@@asyncIterator",w=h.toStringTag||"@@toStringTag";function O(le,ye,Me){return Object.defineProperty(le,ye,{value:Me,enumerable:!0,configurable:!0,writable:!0}),le[ye]}try{O({},"")}catch{O=function(Me,ze,je){return Me[ze]=je}}function S(le,ye,Me,ze){var je=ye&&ye.prototype instanceof G?ye:G,it=Object.create(je.prototype),bt=new Ie(ze||[]);return v(it,"_invoke",{value:ce(le,Me,bt)}),it}function P(le,ye,Me){try{return{type:"normal",arg:le.call(ye,Me)}}catch(ze){return{type:"throw",arg:ze}}}r.wrap=S;var A="suspendedStart",k="suspendedYield",j="executing",R="completed",B={};function G(){}function H(){}function Y(){}var Q={};O(Q,g,function(){return this});var W=Object.getPrototypeOf,I=W&&W(W(Pe([])));I&&I!==s&&c.call(I,g)&&(Q=I);var z=Y.prototype=G.prototype=Object.create(Q);function K(le){["next","throw","return"].forEach(function(ye){O(le,ye,function(Me){return this._invoke(ye,Me)})})}function q(le,ye){function Me(je,it,bt,Pt){var Yt=P(le[je],le,it);if(Yt.type!=="throw"){var Ce=Yt.arg,ge=Ce.value;return ge&&t(ge)=="object"&&c.call(ge,"__await")?ye.resolve(ge.__await).then(function(Se){Me("next",Se,bt,Pt)},function(Se){Me("throw",Se,bt,Pt)}):ye.resolve(ge).then(function(Se){Ce.value=Se,bt(Ce)},function(Se){return Me("throw",Se,bt,Pt)})}Pt(Yt.arg)}var ze;v(this,"_invoke",{value:function(it,bt){function Pt(){return new ye(function(Yt,Ce){Me(it,bt,Yt,Ce)})}return ze=ze?ze.then(Pt,Pt):Pt()}})}function ce(le,ye,Me){var ze=A;return function(je,it){if(ze===j)throw Error("Generator is already running");if(ze===R){if(je==="throw")throw it;return{value:o,done:!0}}for(Me.method=je,Me.arg=it;;){var bt=Me.delegate;if(bt){var Pt=Ne(bt,Me);if(Pt){if(Pt===B)continue;return Pt}}if(Me.method==="next")Me.sent=Me._sent=Me.arg;else if(Me.method==="throw"){if(ze===A)throw ze=R,Me.arg;Me.dispatchException(Me.arg)}else Me.method==="return"&&Me.abrupt("return",Me.arg);ze=j;var Yt=P(le,ye,Me);if(Yt.type==="normal"){if(ze=Me.done?R:k,Yt.arg===B)continue;return{value:Yt.arg,done:Me.done}}Yt.type==="throw"&&(ze=R,Me.method="throw",Me.arg=Yt.arg)}}}function Ne(le,ye){var Me=ye.method,ze=le.iterator[Me];if(ze===o)return ye.delegate=null,Me==="throw"&&le.iterator.return&&(ye.method="return",ye.arg=o,Ne(le,ye),ye.method==="throw")||Me!=="return"&&(ye.method="throw",ye.arg=new TypeError("The iterator does not provide a '"+Me+"' method")),B;var je=P(ze,le.iterator,ye.arg);if(je.type==="throw")return ye.method="throw",ye.arg=je.arg,ye.delegate=null,B;var it=je.arg;return it?it.done?(ye[le.resultName]=it.value,ye.next=le.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=o),ye.delegate=null,B):it:(ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,B)}function Oe(le){var ye={tryLoc:le[0]};1 in le&&(ye.catchLoc=le[1]),2 in le&&(ye.finallyLoc=le[2],ye.afterLoc=le[3]),this.tryEntries.push(ye)}function Xe(le){var ye=le.completion||{};ye.type="normal",delete ye.arg,le.completion=ye}function Ie(le){this.tryEntries=[{tryLoc:"root"}],le.forEach(Oe,this),this.reset(!0)}function Pe(le){if(le||le===""){var ye=le[g];if(ye)return ye.call(le);if(typeof le.next=="function")return le;if(!isNaN(le.length)){var Me=-1,ze=function je(){for(;++Me<le.length;)if(c.call(le,Me))return je.value=le[Me],je.done=!1,je;return je.value=o,je.done=!0,je};return ze.next=ze}}throw new TypeError(t(le)+" is not iterable")}return H.prototype=Y,v(z,"constructor",{value:Y,configurable:!0}),v(Y,"constructor",{value:H,configurable:!0}),H.displayName=O(Y,w,"GeneratorFunction"),r.isGeneratorFunction=function(le){var ye=typeof le=="function"&&le.constructor;return!!ye&&(ye===H||(ye.displayName||ye.name)==="GeneratorFunction")},r.mark=function(le){return Object.setPrototypeOf?Object.setPrototypeOf(le,Y):(le.__proto__=Y,O(le,w,"GeneratorFunction")),le.prototype=Object.create(z),le},r.awrap=function(le){return{__await:le}},K(q.prototype),O(q.prototype,b,function(){return this}),r.AsyncIterator=q,r.async=function(le,ye,Me,ze,je){je===void 0&&(je=Promise);var it=new q(S(le,ye,Me,ze),je);return r.isGeneratorFunction(ye)?it:it.next().then(function(bt){return bt.done?bt.value:it.next()})},K(z),O(z,w,"Generator"),O(z,g,function(){return this}),O(z,"toString",function(){return"[object Generator]"}),r.keys=function(le){var ye=Object(le),Me=[];for(var ze in ye)Me.push(ze);return Me.reverse(),function je(){for(;Me.length;){var it=Me.pop();if(it in ye)return je.value=it,je.done=!1,je}return je.done=!0,je}},r.values=Pe,Ie.prototype={constructor:Ie,reset:function(ye){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Xe),!ye)for(var Me in this)Me.charAt(0)==="t"&&c.call(this,Me)&&!isNaN(+Me.slice(1))&&(this[Me]=o)},stop:function(){this.done=!0;var ye=this.tryEntries[0].completion;if(ye.type==="throw")throw ye.arg;return this.rval},dispatchException:function(ye){if(this.done)throw ye;var Me=this;function ze(Ce,ge){return bt.type="throw",bt.arg=ye,Me.next=Ce,ge&&(Me.method="next",Me.arg=o),!!ge}for(var je=this.tryEntries.length-1;je>=0;--je){var it=this.tryEntries[je],bt=it.completion;if(it.tryLoc==="root")return ze("end");if(it.tryLoc<=this.prev){var Pt=c.call(it,"catchLoc"),Yt=c.call(it,"finallyLoc");if(Pt&&Yt){if(this.prev<it.catchLoc)return ze(it.catchLoc,!0);if(this.prev<it.finallyLoc)return ze(it.finallyLoc)}else if(Pt){if(this.prev<it.catchLoc)return ze(it.catchLoc,!0)}else{if(!Yt)throw Error("try statement without catch or finally");if(this.prev<it.finallyLoc)return ze(it.finallyLoc)}}}},abrupt:function(ye,Me){for(var ze=this.tryEntries.length-1;ze>=0;--ze){var je=this.tryEntries[ze];if(je.tryLoc<=this.prev&&c.call(je,"finallyLoc")&&this.prev<je.finallyLoc){var it=je;break}}it&&(ye==="break"||ye==="continue")&&it.tryLoc<=Me&&Me<=it.finallyLoc&&(it=null);var bt=it?it.completion:{};return bt.type=ye,bt.arg=Me,it?(this.method="next",this.next=it.finallyLoc,B):this.complete(bt)},complete:function(ye,Me){if(ye.type==="throw")throw ye.arg;return ye.type==="break"||ye.type==="continue"?this.next=ye.arg:ye.type==="return"?(this.rval=this.arg=ye.arg,this.method="return",this.next="end"):ye.type==="normal"&&Me&&(this.next=Me),B},finish:function(ye){for(var Me=this.tryEntries.length-1;Me>=0;--Me){var ze=this.tryEntries[Me];if(ze.finallyLoc===ye)return this.complete(ze.completion,ze.afterLoc),Xe(ze),B}},catch:function(ye){for(var Me=this.tryEntries.length-1;Me>=0;--Me){var ze=this.tryEntries[Me];if(ze.tryLoc===ye){var je=ze.completion;if(je.type==="throw"){var it=je.arg;Xe(ze)}return it}}throw Error("illegal catch attempt")},delegateYield:function(ye,Me,ze){return this.delegate={iterator:Pe(ye),resultName:Me,nextLoc:ze},this.method==="next"&&(this.arg=o),B}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(MN);var _te=MN.exports,z1=_te();try{regeneratorRuntime=z1}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=z1:Function("r","regeneratorRuntime = r")(z1)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var fM;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(fM||(fM={}));var dM;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(dM||(dM={}));var pM;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(pM||(pM={}));var hM;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(hM||(hM={}));var wte={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(my,function(){var n=function($){return $ instanceof Uint8Array||$ instanceof Uint16Array||$ instanceof Uint32Array||$ instanceof Int8Array||$ instanceof Int16Array||$ instanceof Int32Array||$ instanceof Float32Array||$ instanceof Float64Array||$ instanceof Uint8ClampedArray},o=function($,ie){for(var be=Object.keys(ie),nt=0;nt<be.length;++nt)$[be[nt]]=ie[be[nt]];return $},r=`
`;function s($){return typeof atob<"u"?atob($):"base64:"+$}function c($){var ie=new Error("(regl) "+$);throw console.error(ie),ie}function v($,ie){$||c(ie)}function h($){return $?": "+$:""}function g($,ie,be){$ in ie||c("unknown parameter ("+$+")"+h(be)+". possible values: "+Object.keys(ie).join())}function b($,ie){n($)||c("invalid parameter type"+h(ie)+". must be a typed array")}function w($,ie){switch(ie){case"number":return typeof $=="number";case"object":return typeof $=="object";case"string":return typeof $=="string";case"boolean":return typeof $=="boolean";case"function":return typeof $=="function";case"undefined":return typeof $>"u";case"symbol":return typeof $=="symbol"}}function O($,ie,be){w($,ie)||c("invalid parameter type"+h(be)+". expected "+ie+", got "+typeof $)}function S($,ie){$>=0&&($|0)===$||c("invalid parameter type, ("+$+")"+h(ie)+". must be a nonnegative integer")}function P($,ie,be){ie.indexOf($)<0&&c("invalid value"+h(be)+". must be one of: "+ie)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function k($){Object.keys($).forEach(function(ie){A.indexOf(ie)<0&&c('invalid regl constructor argument "'+ie+'". must be one of '+A)})}function j($,ie){for($=$+"";$.length<ie;)$=" "+$;return $}function R(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B($,ie){this.number=$,this.line=ie,this.errors=[]}function G($,ie,be){this.file=$,this.line=ie,this.message=be}function H(){var $=new Error,ie=($.stack||$).toString(),be=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ie);if(be)return be[1];var nt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ie);return nt?nt[1]:"unknown"}function Y(){var $=new Error,ie=($.stack||$).toString(),be=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ie);if(be)return be[1];var nt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ie);return nt?nt[1]:"unknown"}function Q($,ie){var be=$.split(`
`),nt=1,dt=0,Qe={unknown:new R,0:new R};Qe.unknown.name=Qe[0].name=ie||H(),Qe.unknown.lines.push(new B(0,""));for(var st=0;st<be.length;++st){var Nt=be[st],It=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Nt);if(It)switch(It[1]){case"line":var Ct=/(\d+)(\s+\d+)?/.exec(It[2]);Ct&&(nt=Ct[1]|0,Ct[2]&&(dt=Ct[2]|0,dt in Qe||(Qe[dt]=new R)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(It[2]);ct&&(Qe[dt].name=ct[1]?s(ct[2]):ct[2]);break}Qe[dt].lines.push(new B(nt++,Nt))}return Object.keys(Qe).forEach(function(Gt){var Ut=Qe[Gt];Ut.lines.forEach(function(Rt){Ut.index[Rt.number]=Rt})}),Qe}function W($){var ie=[];return $.split(`
`).forEach(function(be){if(!(be.length<5)){var nt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);nt?ie.push(new G(nt[1]|0,nt[2]|0,nt[3].trim())):be.length>0&&ie.push(new G("unknown",0,be))}}),ie}function I($,ie){ie.forEach(function(be){var nt=$[be.file];if(nt){var dt=nt.index[be.line];if(dt){dt.errors.push(be),nt.hasErrors=!0;return}}$.unknown.hasErrors=!0,$.unknown.lines[0].errors.push(be)})}function z($,ie,be,nt,dt){if(!$.getShaderParameter(ie,$.COMPILE_STATUS)){var Qe=$.getShaderInfoLog(ie),st=nt===$.FRAGMENT_SHADER?"fragment":"vertex";Ie(be,"string",st+" shader source must be a string",dt);var Nt=Q(be,dt),It=W(Qe);I(Nt,It),Object.keys(Nt).forEach(function(Ct){var ct=Nt[Ct];if(!ct.hasErrors)return;var Gt=[""],Ut=[""];function Rt(wt,Ye){Gt.push(wt),Ut.push(Ye||"")}Rt("file number "+Ct+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(wt){if(wt.errors.length>0){Rt(j(wt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Rt(wt.line+r,"color:red; background-color:yellow; font-weight:bold");var Ye=0;wt.errors.forEach(function(lt){var Ft=lt.message,Kt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ft);if(Kt){var St=Kt[1];switch(Ft=Kt[2],St){case"assign":St="=";break}Ye=Math.max(wt.line.indexOf(St,Ye),0)}else Ye=0;Rt(j("| ",6)),Rt(j("^^^",Ye+3)+r,"font-weight:bold"),Rt(j("| ",6)),Rt(Ft+r,"font-weight:bold")}),Rt(j("| ",6)+r)}else Rt(j(wt.number,4)+"|  "),Rt(wt.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Gt.join("%c"),console.log.apply(console,Ut)):console.log(Gt.join(""))}),v.raise("Error compiling "+st+" shader, "+Nt[0].name)}}function K($,ie,be,nt,dt){if(!$.getProgramParameter(ie,$.LINK_STATUS)){var Qe=$.getProgramInfoLog(ie),st=Q(be,dt),Nt=Q(nt,dt),It='Error linking program with vertex shader, "'+Nt[0].name+'", and fragment shader "'+st[0].name+'"';typeof document<"u"?console.log("%c"+It+r+"%c"+Qe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(It+r+Qe),v.raise(It)}}function q($){$._commandRef=H()}function ce($,ie,be,nt){q($);function dt(It){return It?nt.id(It):0}$._fragId=dt($.static.frag),$._vertId=dt($.static.vert);function Qe(It,Ct){Object.keys(Ct).forEach(function(ct){It[nt.id(ct)]=!0})}var st=$._uniformSet={};Qe(st,ie.static),Qe(st,ie.dynamic);var Nt=$._attributeSet={};Qe(Nt,be.static),Qe(Nt,be.dynamic),$._hasCount="count"in $.static||"count"in $.dynamic||"elements"in $.static||"elements"in $.dynamic}function Ne($,ie){var be=Y();c($+" in command "+(ie||H())+(be==="unknown"?"":" called from "+be))}function Oe($,ie,be){$||Ne(ie,be||H())}function Xe($,ie,be,nt){$ in ie||Ne("unknown parameter ("+$+")"+h(be)+". possible values: "+Object.keys(ie).join(),nt||H())}function Ie($,ie,be,nt){w($,ie)||Ne("invalid parameter type"+h(be)+". expected "+ie+", got "+typeof $,nt||H())}function Pe($){$()}function le($,ie,be){$.texture?P($.texture._texture.internalformat,ie,"unsupported texture format for attachment"):P($.renderbuffer._renderbuffer.format,be,"unsupported renderbuffer format for attachment")}var ye=33071,Me=9728,ze=9984,je=9985,it=9986,bt=9987,Pt=5120,Yt=5121,Ce=5122,ge=5123,Se=5124,ht=5125,zt=5126,xt=32819,rn=32820,yn=33635,Tn=34042,pn=36193,ft={};ft[Pt]=ft[Yt]=1,ft[Ce]=ft[ge]=ft[pn]=ft[yn]=ft[xt]=ft[rn]=2,ft[Se]=ft[ht]=ft[zt]=ft[Tn]=4;function xn($,ie){return $===rn||$===xt||$===yn?2:$===Tn?4:ft[$]*ie}function Be($){return!($&$-1)&&!!$}function mn($,ie,be){var nt,dt=ie.width,Qe=ie.height,st=ie.channels;v(dt>0&&dt<=be.maxTextureSize&&Qe>0&&Qe<=be.maxTextureSize,"invalid texture shape"),($.wrapS!==ye||$.wrapT!==ye)&&v(Be(dt)&&Be(Qe),"incompatible wrap mode for texture, both width and height must be power of 2"),ie.mipmask===1?dt!==1&&Qe!==1&&v($.minFilter!==ze&&$.minFilter!==it&&$.minFilter!==je&&$.minFilter!==bt,"min filter requires mipmap"):(v(Be(dt)&&Be(Qe),"texture must be a square power of 2 to support mipmapping"),v(ie.mipmask===(dt<<1)-1,"missing or incomplete mipmap data")),ie.type===zt&&(be.extensions.indexOf("oes_texture_float_linear")<0&&v($.minFilter===Me&&$.magFilter===Me,"filter not supported, must enable oes_texture_float_linear"),v(!$.genMipmaps,"mipmap generation not supported with float textures"));var Nt=ie.images;for(nt=0;nt<16;++nt)if(Nt[nt]){var It=dt>>nt,Ct=Qe>>nt;v(ie.mipmask&1<<nt,"missing mipmap data");var ct=Nt[nt];if(v(ct.width===It&&ct.height===Ct,"invalid shape for mip images"),v(ct.format===ie.format&&ct.internalformat===ie.internalformat&&ct.type===ie.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Gt=Math.ceil(xn(ct.type,st)*It/ct.unpackAlignment)*ct.unpackAlignment;v(ct.data.byteLength===Gt*Ct,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else $.genMipmaps||v((ie.mipmask&1<<nt)===0,"extra mipmap data");ie.compressed&&v(!$.genMipmaps,"mipmap generation for compressed images not supported")}function Kn($,ie,be,nt){var dt=$.width,Qe=$.height,st=$.channels;v(dt>0&&dt<=nt.maxTextureSize&&Qe>0&&Qe<=nt.maxTextureSize,"invalid texture shape"),v(dt===Qe,"cube map must be square"),v(ie.wrapS===ye&&ie.wrapT===ye,"wrap mode not supported by cube map");for(var Nt=0;Nt<be.length;++Nt){var It=be[Nt];v(It.width===dt&&It.height===Qe,"inconsistent cube map face shape"),ie.genMipmaps&&(v(!It.compressed,"can not generate mipmap for compressed textures"),v(It.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ct=It.images,ct=0;ct<16;++ct){var Gt=Ct[ct];if(Gt){var Ut=dt>>ct,Rt=Qe>>ct;v(It.mipmask&1<<ct,"missing mipmap data"),v(Gt.width===Ut&&Gt.height===Rt,"invalid shape for mip images"),v(Gt.format===$.format&&Gt.internalformat===$.internalformat&&Gt.type===$.type,"incompatible type for mip image"),Gt.compressed||(Gt.data?v(Gt.data.byteLength===Ut*Rt*Math.max(xn(Gt.type,st),Gt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Gt.element||Gt.copy)}}}}var re=o(v,{optional:Pe,raise:c,commandRaise:Ne,command:Oe,parameter:g,commandParameter:Xe,constructor:k,type:O,commandType:Ie,isTypedArray:b,nni:S,oneOf:P,shaderError:z,linkError:K,callSite:Y,saveCommandRef:q,saveDrawInfo:ce,framebufferFormat:le,guessCommand:H,texture2D:mn,textureCube:Kn}),$n=0,xr=0,Ur=5,ro=6;function jn($,ie){this.id=$n++,this.type=$,this.data=ie}function Co($){return $.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ee($){if($.length===0)return[];var ie=$.charAt(0),be=$.charAt($.length-1);if($.length>1&&ie===be&&(ie==='"'||ie==="'"))return['"'+Co($.substr(1,$.length-2))+'"'];var nt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec($);if(nt)return Ee($.substr(0,nt.index)).concat(Ee(nt[1])).concat(Ee($.substr(nt.index+nt[0].length)));var dt=$.split(".");if(dt.length===1)return['"'+Co($)+'"'];for(var Qe=[],st=0;st<dt.length;++st)Qe=Qe.concat(Ee(dt[st]));return Qe}function Ke($){return"["+Ee($).join("][")+"]"}function De($,ie){return new jn($,Ke(ie+""))}function at($){return typeof $=="function"&&!$._reglType||$ instanceof jn}function en($,ie){if(typeof $=="function")return new jn(xr,$);if(typeof $=="number"||typeof $=="boolean")return new jn(Ur,$);if(Array.isArray($))return new jn(ro,$.map((be,nt)=>en(be,ie+"["+nt+"]")));if($ instanceof jn)return $;re(!1,"invalid option type in uniform "+ie)}var qt={DynamicVariable:jn,define:De,isDynamic:at,unbox:en,accessor:Ke},kn={next:typeof requestAnimationFrame=="function"?function($){return requestAnimationFrame($)}:function($){return setTimeout($,16)},cancel:typeof cancelAnimationFrame=="function"?function($){return cancelAnimationFrame($)}:clearTimeout},_r=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function oi(){var $={"":0},ie=[""];return{id:function(be){var nt=$[be];return nt||(nt=$[be]=ie.length,ie.push(be),nt)},str:function(be){return ie[be]}}}function _i($,ie,be){var nt=document.createElement("canvas");o(nt.style,{border:0,margin:0,padding:0,top:0,left:0}),$.appendChild(nt),$===document.body&&(nt.style.position="absolute",o($.style,{margin:0,padding:0}));function dt(){var Nt=window.innerWidth,It=window.innerHeight;if($!==document.body){var Ct=$.getBoundingClientRect();Nt=Ct.right-Ct.left,It=Ct.bottom-Ct.top}nt.width=be*Nt,nt.height=be*It,o(nt.style,{width:Nt+"px",height:It+"px"})}var Qe;$!==document.body&&typeof ResizeObserver=="function"?(Qe=new ResizeObserver(function(){setTimeout(dt)}),Qe.observe($)):window.addEventListener("resize",dt,!1);function st(){Qe?Qe.disconnect():window.removeEventListener("resize",dt),$.removeChild(nt)}return dt(),{canvas:nt,onDestroy:st}}function Vo($,ie){function be(nt){try{return $.getContext(nt,ie)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}function qo($){return typeof $.nodeName=="string"&&typeof $.appendChild=="function"&&typeof $.getBoundingClientRect=="function"}function Sn($){return typeof $.drawArrays=="function"||typeof $.drawElements=="function"}function Bn($){return typeof $=="string"?$.split():(re(Array.isArray($),"invalid extension array"),$)}function Xn($){return typeof $=="string"?(re(typeof document<"u","not supported outside of DOM"),document.querySelector($)):$}function ir($){var ie=$||{},be,nt,dt,Qe,st={},Nt=[],It=[],Ct=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Gt=function(wt){wt&&re.raise(wt)},Ut=function(){};if(typeof ie=="string"?(re(typeof document<"u","selector queries only supported in DOM enviroments"),be=document.querySelector(ie),re(be,"invalid query string for element")):typeof ie=="object"?qo(ie)?be=ie:Sn(ie)?(Qe=ie,dt=Qe.canvas):(re.constructor(ie),"gl"in ie?Qe=ie.gl:"canvas"in ie?dt=Xn(ie.canvas):"container"in ie&&(nt=Xn(ie.container)),"attributes"in ie&&(st=ie.attributes,re.type(st,"object","invalid context attributes")),"extensions"in ie&&(Nt=Bn(ie.extensions)),"optionalExtensions"in ie&&(It=Bn(ie.optionalExtensions)),"onDone"in ie&&(re.type(ie.onDone,"function","invalid or missing onDone callback"),Gt=ie.onDone),"profile"in ie&&(ct=!!ie.profile),"pixelRatio"in ie&&(Ct=+ie.pixelRatio,re(Ct>0,"invalid pixel ratio"))):re.raise("invalid arguments to regl"),be&&(be.nodeName.toLowerCase()==="canvas"?dt=be:nt=be),!Qe){if(!dt){re(typeof document<"u","must manually specify webgl context outside of DOM environments");var Rt=_i(nt||document.body,Gt,Ct);if(!Rt)return null;dt=Rt.canvas,Ut=Rt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),Qe=Vo(dt,st)}return Qe?{gl:Qe,canvas:dt,container:nt,extensions:Nt,optionalExtensions:It,pixelRatio:Ct,profile:ct,onDone:Gt,onDestroy:Ut}:(Ut(),Gt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kr($,ie){var be={};function nt(st){re.type(st,"string","extension name must be string");var Nt=st.toLowerCase(),It;try{It=be[Nt]=$.getExtension(Nt)}catch{}return!!It}for(var dt=0;dt<ie.extensions.length;++dt){var Qe=ie.extensions[dt];if(!nt(Qe))return ie.onDestroy(),ie.onDone('"'+Qe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ie.optionalExtensions.forEach(nt),{extensions:be,restore:function(){Object.keys(be).forEach(function(st){if(be[st]&&!nt(st))throw new Error("(regl): error restoring extension "+st)})}}}function Rr($,ie){for(var be=Array($),nt=0;nt<$;++nt)be[nt]=ie(nt);return be}var fl=5120,Va=5121,dl=5122,lu=5123,zd=5124,mc=5125,da=5126;function Wu($){for(var ie=16;ie<=1<<28;ie*=16)if($<=ie)return ie;return 0}function Pn($){var ie,be;return ie=($>65535)<<4,$>>>=ie,be=($>255)<<3,$>>>=be,ie|=be,be=($>15)<<2,$>>>=be,ie|=be,be=($>3)<<1,$>>>=be,ie|=be,ie|$>>1}function Cf(){var $=Rr(8,function(){return[]});function ie(Qe){var st=Wu(Qe),Nt=$[Pn(st)>>2];return Nt.length>0?Nt.pop():new ArrayBuffer(st)}function be(Qe){$[Pn(Qe.byteLength)>>2].push(Qe)}function nt(Qe,st){var Nt=null;switch(Qe){case fl:Nt=new Int8Array(ie(st),0,st);break;case Va:Nt=new Uint8Array(ie(st),0,st);break;case dl:Nt=new Int16Array(ie(2*st),0,st);break;case lu:Nt=new Uint16Array(ie(2*st),0,st);break;case zd:Nt=new Int32Array(ie(4*st),0,st);break;case mc:Nt=new Uint32Array(ie(4*st),0,st);break;case da:Nt=new Float32Array(ie(4*st),0,st);break;default:return null}return Nt.length!==st?Nt.subarray(0,st):Nt}function dt(Qe){be(Qe.buffer)}return{alloc:ie,free:be,allocType:nt,freeType:dt}}var yo=Cf();yo.zero=Cf();var gc=3408,qi=3410,ta=3411,Es=3412,Aa=3413,pa=3414,Ta=3415,bc=33901,_c=33902,jf=3379,zu=3386,If=34921,wc=36347,Hd=36348,Cl=35661,Lf=35660,pl=34930,Ec=36349,Os=34076,Oc=34024,xc=7936,Xd=7937,Ff=7938,Wr=35724,Vr=34047,$f=36063,uu=34852,ha=3553,xs=34067,Bf=34069,jo=33984,jl=6408,Il=5126,Ss=5121,su=36160,wi=36053,Sc=36064,Uf=16384,Ac=function($,ie){var be=1;ie.ext_texture_filter_anisotropic&&(be=$.getParameter(Vr));var nt=1,dt=1;ie.webgl_draw_buffers&&(nt=$.getParameter(uu),dt=$.getParameter($f));var Qe=!!ie.oes_texture_float;if(Qe){var st=$.createTexture();$.bindTexture(ha,st),$.texImage2D(ha,0,jl,1,1,0,jl,Il,null);var Nt=$.createFramebuffer();if($.bindFramebuffer(su,Nt),$.framebufferTexture2D(su,Sc,ha,st,0),$.bindTexture(ha,null),$.checkFramebufferStatus(su)!==wi)Qe=!1;else{$.viewport(0,0,1,1),$.clearColor(1,0,0,1),$.clear(Uf);var It=yo.allocType(Il,4);$.readPixels(0,0,1,1,jl,Il,It),$.getError()?Qe=!1:($.deleteFramebuffer(Nt),$.deleteTexture(st),Qe=It[0]===1),yo.freeType(It)}}var Ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Ct){var Gt=$.createTexture(),Ut=yo.allocType(Ss,36);$.activeTexture(jo),$.bindTexture(xs,Gt),$.texImage2D(Bf,0,jl,3,3,0,jl,Ss,Ut),yo.freeType(Ut),$.bindTexture(xs,null),$.deleteTexture(Gt),ct=!$.getError()}return{colorBits:[$.getParameter(qi),$.getParameter(ta),$.getParameter(Es),$.getParameter(Aa)],depthBits:$.getParameter(pa),stencilBits:$.getParameter(Ta),subpixelBits:$.getParameter(gc),extensions:Object.keys(ie).filter(function(Rt){return!!ie[Rt]}),maxAnisotropic:be,maxDrawbuffers:nt,maxColorAttachments:dt,pointSizeDims:$.getParameter(bc),lineWidthDims:$.getParameter(_c),maxViewportDims:$.getParameter(zu),maxCombinedTextureUnits:$.getParameter(Cl),maxCubeMapSize:$.getParameter(Os),maxRenderbufferSize:$.getParameter(Oc),maxTextureUnits:$.getParameter(pl),maxTextureSize:$.getParameter(jf),maxAttributes:$.getParameter(If),maxVertexUniforms:$.getParameter(wc),maxVertexTextureUnits:$.getParameter(Lf),maxVaryingVectors:$.getParameter(Hd),maxFragmentUniforms:$.getParameter(Ec),glsl:$.getParameter(Wr),renderer:$.getParameter(Xd),vendor:$.getParameter(xc),version:$.getParameter(Ff),readFloat:Qe,npotTextureCube:ct}};function ji($){return!!$&&typeof $=="object"&&Array.isArray($.shape)&&Array.isArray($.stride)&&typeof $.offset=="number"&&$.shape.length===$.stride.length&&(Array.isArray($.data)||n($.data))}var ii=function($){return Object.keys($).map(function(ie){return $[ie]})},na={shape:Li,flatten:Gf};function oo($,ie,be){for(var nt=0;nt<ie;++nt)be[nt]=$[nt]}function Vf($,ie,be,nt){for(var dt=0,Qe=0;Qe<ie;++Qe)for(var st=$[Qe],Nt=0;Nt<be;++Nt)nt[dt++]=st[Nt]}function Ii($,ie,be,nt,dt,Qe){for(var st=Qe,Nt=0;Nt<ie;++Nt)for(var It=$[Nt],Ct=0;Ct<be;++Ct)for(var ct=It[Ct],Gt=0;Gt<nt;++Gt)dt[st++]=ct[Gt]}function Tc($,ie,be,nt,dt){for(var Qe=1,st=be+1;st<ie.length;++st)Qe*=ie[st];var Nt=ie[be];if(ie.length-be===4){var It=ie[be+1],Ct=ie[be+2],ct=ie[be+3];for(st=0;st<Nt;++st)Ii($[st],It,Ct,ct,nt,dt),dt+=Qe}else for(st=0;st<Nt;++st)Tc($[st],ie,be+1,nt,dt),dt+=Qe}function Gf($,ie,be,nt){var dt=1;if(ie.length)for(var Qe=0;Qe<ie.length;++Qe)dt*=ie[Qe];else dt=0;var st=nt||yo.allocType(be,dt);switch(ie.length){case 0:break;case 1:oo($,ie[0],st);break;case 2:Vf($,ie[0],ie[1],st);break;case 3:Ii($,ie[0],ie[1],ie[2],st,0);break;default:Tc($,ie,0,st,0)}return st}function Li($){for(var ie=[],be=$;be.length;be=be[0])ie.push(be.length);return ie}var ki={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Mc=5120,Lr=5122,ai=5124,As=5121,Wf=5123,Pc=5125,Ts=5126,Ga=5126,Fi={int8:Mc,int16:Lr,int32:ai,uint8:As,uint16:Wf,uint32:Pc,float:Ts,float32:Ga},cu=35048,Ki=35040,va={dynamic:cu,stream:Ki,static:35044},Tr=na.flatten,$i=na.shape,Ma=35044,di=35040,fu=5121,Ll=5126,Pa=[];Pa[5120]=1,Pa[5122]=2,Pa[5124]=4,Pa[5121]=1,Pa[5123]=2,Pa[5125]=4,Pa[5126]=4;function fo($){return ki[Object.prototype.toString.call($)]|0}function Hu($,ie){for(var be=0;be<ie.length;++be)$[be]=ie[be]}function Wa($,ie,be,nt,dt,Qe,st){for(var Nt=0,It=0;It<be;++It)for(var Ct=0;Ct<nt;++Ct)$[Nt++]=ie[dt*It+Qe*Ct+st]}function ya($,ie,be,nt){var dt=0,Qe={};function st(Ye){this.id=dt++,this.buffer=$.createBuffer(),this.type=Ye,this.usage=Ma,this.byteLength=0,this.dimension=1,this.dtype=fu,this.persistentData=null,be.profile&&(this.stats={size:0})}st.prototype.bind=function(){$.bindBuffer(this.type,this.buffer)},st.prototype.destroy=function(){Ut(this)};var Nt=[];function It(Ye,lt){var Ft=Nt.pop();return Ft||(Ft=new st(Ye)),Ft.bind(),Gt(Ft,lt,di,0,1,!1),Ft}function Ct(Ye){Nt.push(Ye)}function ct(Ye,lt,Ft){Ye.byteLength=lt.byteLength,$.bufferData(Ye.type,lt,Ft)}function Gt(Ye,lt,Ft,Kt,St,Jt){var Tt;if(Ye.usage=Ft,Array.isArray(lt)){if(Ye.dtype=Kt||Ll,lt.length>0){var Wt;if(Array.isArray(lt[0])){Tt=$i(lt);for(var Et=1,Xt=1;Xt<Tt.length;++Xt)Et*=Tt[Xt];Ye.dimension=Et,Wt=Tr(lt,Tt,Ye.dtype),ct(Ye,Wt,Ft),Jt?Ye.persistentData=Wt:yo.freeType(Wt)}else if(typeof lt[0]=="number"){Ye.dimension=St;var Mn=yo.allocType(Ye.dtype,lt.length);Hu(Mn,lt),ct(Ye,Mn,Ft),Jt?Ye.persistentData=Mn:yo.freeType(Mn)}else n(lt[0])?(Ye.dimension=lt[0].length,Ye.dtype=Kt||fo(lt[0])||Ll,Wt=Tr(lt,[lt.length,lt[0].length],Ye.dtype),ct(Ye,Wt,Ft),Jt?Ye.persistentData=Wt:yo.freeType(Wt)):re.raise("invalid buffer data")}}else if(n(lt))Ye.dtype=Kt||fo(lt),Ye.dimension=St,ct(Ye,lt,Ft),Jt&&(Ye.persistentData=new Uint8Array(new Uint8Array(lt.buffer)));else if(ji(lt)){Tt=lt.shape;var Wn=lt.stride,Lt=lt.offset,Mt=0,Ot=0,Cn=0,nr=0;Tt.length===1?(Mt=Tt[0],Ot=1,Cn=Wn[0],nr=0):Tt.length===2?(Mt=Tt[0],Ot=Tt[1],Cn=Wn[0],nr=Wn[1]):re.raise("invalid shape"),Ye.dtype=Kt||fo(lt.data)||Ll,Ye.dimension=Ot;var un=yo.allocType(Ye.dtype,Mt*Ot);Wa(un,lt.data,Mt,Ot,Cn,nr,Lt),ct(Ye,un,Ft),Jt?Ye.persistentData=un:yo.freeType(un)}else lt instanceof ArrayBuffer?(Ye.dtype=fu,Ye.dimension=St,ct(Ye,lt,Ft),Jt&&(Ye.persistentData=new Uint8Array(new Uint8Array(lt)))):re.raise("invalid buffer data")}function Ut(Ye){ie.bufferCount--,nt(Ye);var lt=Ye.buffer;re(lt,"buffer must not be deleted already"),$.deleteBuffer(lt),Ye.buffer=null,delete Qe[Ye.id]}function Rt(Ye,lt,Ft,Kt){ie.bufferCount++;var St=new st(lt);Qe[St.id]=St;function Jt(Et){var Xt=Ma,Mn=null,Wn=0,Lt=0,Mt=1;return Array.isArray(Et)||n(Et)||ji(Et)||Et instanceof ArrayBuffer?Mn=Et:typeof Et=="number"?Wn=Et|0:Et&&(re.type(Et,"object","buffer arguments must be an object, a number or an array"),"data"in Et&&(re(Mn===null||Array.isArray(Mn)||n(Mn)||ji(Mn),"invalid data for buffer"),Mn=Et.data),"usage"in Et&&(re.parameter(Et.usage,va,"invalid buffer usage"),Xt=va[Et.usage]),"type"in Et&&(re.parameter(Et.type,Fi,"invalid buffer type"),Lt=Fi[Et.type]),"dimension"in Et&&(re.type(Et.dimension,"number","invalid dimension"),Mt=Et.dimension|0),"length"in Et&&(re.nni(Wn,"buffer length must be a nonnegative integer"),Wn=Et.length|0)),St.bind(),Mn?Gt(St,Mn,Xt,Lt,Mt,Kt):(Wn&&$.bufferData(St.type,Wn,Xt),St.dtype=Lt||fu,St.usage=Xt,St.dimension=Mt,St.byteLength=Wn),be.profile&&(St.stats.size=St.byteLength*Pa[St.dtype]),Jt}function Tt(Et,Xt){re(Xt+Et.byteLength<=St.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Et.byteLength+" starting from offset "+Xt+" to a buffer of size "+St.byteLength),$.bufferSubData(St.type,Xt,Et)}function Wt(Et,Xt){var Mn=(Xt||0)|0,Wn;if(St.bind(),n(Et)||Et instanceof ArrayBuffer)Tt(Et,Mn);else if(Array.isArray(Et)){if(Et.length>0)if(typeof Et[0]=="number"){var Lt=yo.allocType(St.dtype,Et.length);Hu(Lt,Et),Tt(Lt,Mn),yo.freeType(Lt)}else if(Array.isArray(Et[0])||n(Et[0])){Wn=$i(Et);var Mt=Tr(Et,Wn,St.dtype);Tt(Mt,Mn),yo.freeType(Mt)}else re.raise("invalid buffer data")}else if(ji(Et)){Wn=Et.shape;var Ot=Et.stride,Cn=0,nr=0,un=0,Qn=0;Wn.length===1?(Cn=Wn[0],nr=1,un=Ot[0],Qn=0):Wn.length===2?(Cn=Wn[0],nr=Wn[1],un=Ot[0],Qn=Ot[1]):re.raise("invalid shape");var Gn=Array.isArray(Et.data)?St.dtype:fo(Et.data),rr=yo.allocType(Gn,Cn*nr);Wa(rr,Et.data,Cn,nr,un,Qn,Et.offset),Tt(rr,Mn),yo.freeType(rr)}else re.raise("invalid data for buffer subdata");return Jt}return Ft||Jt(Ye),Jt._reglType="buffer",Jt._buffer=St,Jt.subdata=Wt,be.profile&&(Jt.stats=St.stats),Jt.destroy=function(){Ut(St)},Jt}function wt(){ii(Qe).forEach(function(Ye){Ye.buffer=$.createBuffer(),$.bindBuffer(Ye.type,Ye.buffer),$.bufferData(Ye.type,Ye.persistentData||Ye.byteLength,Ye.usage)})}return be.profile&&(ie.getTotalBufferSize=function(){var Ye=0;return Object.keys(Qe).forEach(function(lt){Ye+=Qe[lt].stats.size}),Ye}),{create:Rt,createStream:It,destroyStream:Ct,clear:function(){ii(Qe).forEach(Ut),Nt.forEach(Ut)},getBuffer:function(Ye){return Ye&&Ye._buffer instanceof st?Ye._buffer:null},restore:wt,_initBuffer:Gt}}var kc=0,Yd=0,Nc=1,Go=1,Fl=4,za=4,Ko={points:kc,point:Yd,lines:Nc,line:Go,triangles:Fl,triangle:za,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Rc=0,ra=1,ma=4,Ms=5120,Bi=5121,Zi=5122,li=5123,oa=5124,Ni=5125,ut=34963,jt=35040,$t=35044;function fn($,ie,be,nt){var dt={},Qe=0,st={uint8:Bi,uint16:li};ie.oes_element_index_uint&&(st.uint32=Ni);function Nt(wt){this.id=Qe++,dt[this.id]=this,this.buffer=wt,this.primType=ma,this.vertCount=0,this.type=0}Nt.prototype.bind=function(){this.buffer.bind()};var It=[];function Ct(wt){var Ye=It.pop();return Ye||(Ye=new Nt(be.create(null,ut,!0,!1)._buffer)),Gt(Ye,wt,jt,-1,-1,0,0),Ye}function ct(wt){It.push(wt)}function Gt(wt,Ye,lt,Ft,Kt,St,Jt){wt.buffer.bind();var Tt;if(Ye){var Wt=Jt;!Jt&&(!n(Ye)||ji(Ye)&&!n(Ye.data))&&(Wt=ie.oes_element_index_uint?Ni:li),be._initBuffer(wt.buffer,Ye,lt,Wt,3)}else $.bufferData(ut,St,lt),wt.buffer.dtype=Tt||Bi,wt.buffer.usage=lt,wt.buffer.dimension=3,wt.buffer.byteLength=St;if(Tt=Jt,!Jt){switch(wt.buffer.dtype){case Bi:case Ms:Tt=Bi;break;case li:case Zi:Tt=li;break;case Ni:case oa:Tt=Ni;break;default:re.raise("unsupported type for element array")}wt.buffer.dtype=Tt}wt.type=Tt,re(Tt!==Ni||!!ie.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Et=Kt;Et<0&&(Et=wt.buffer.byteLength,Tt===li?Et>>=1:Tt===Ni&&(Et>>=2)),wt.vertCount=Et;var Xt=Ft;if(Ft<0){Xt=ma;var Mn=wt.buffer.dimension;Mn===1&&(Xt=Rc),Mn===2&&(Xt=ra),Mn===3&&(Xt=ma)}wt.primType=Xt}function Ut(wt){nt.elementsCount--,re(wt.buffer!==null,"must not double destroy elements"),delete dt[wt.id],wt.buffer.destroy(),wt.buffer=null}function Rt(wt,Ye){var lt=be.create(null,ut,!0),Ft=new Nt(lt._buffer);nt.elementsCount++;function Kt(St){if(!St)lt(),Ft.primType=ma,Ft.vertCount=0,Ft.type=Bi;else if(typeof St=="number")lt(St),Ft.primType=ma,Ft.vertCount=St|0,Ft.type=Bi;else{var Jt=null,Tt=$t,Wt=-1,Et=-1,Xt=0,Mn=0;Array.isArray(St)||n(St)||ji(St)?Jt=St:(re.type(St,"object","invalid arguments for elements"),"data"in St&&(Jt=St.data,re(Array.isArray(Jt)||n(Jt)||ji(Jt),"invalid data for element buffer")),"usage"in St&&(re.parameter(St.usage,va,"invalid element buffer usage"),Tt=va[St.usage]),"primitive"in St&&(re.parameter(St.primitive,Ko,"invalid element buffer primitive"),Wt=Ko[St.primitive]),"count"in St&&(re(typeof St.count=="number"&&St.count>=0,"invalid vertex count for elements"),Et=St.count|0),"type"in St&&(re.parameter(St.type,st,"invalid buffer type"),Mn=st[St.type]),"length"in St?Xt=St.length|0:(Xt=Et,Mn===li||Mn===Zi?Xt*=2:(Mn===Ni||Mn===oa)&&(Xt*=4))),Gt(Ft,Jt,Tt,Wt,Et,Xt,Mn)}return Kt}return Kt(wt),Kt._reglType="elements",Kt._elements=Ft,Kt.subdata=function(St,Jt){return lt.subdata(St,Jt),Kt},Kt.destroy=function(){Ut(Ft)},Kt}return{create:Rt,createStream:Ct,destroyStream:ct,getElements:function(wt){return typeof wt=="function"&&wt._elements instanceof Nt?wt._elements:null},clear:function(){ii(dt).forEach(Ut)}}}var ur=new Float32Array(1),Mr=new Uint32Array(ur.buffer),po=5123;function T($){for(var ie=yo.allocType(po,$.length),be=0;be<$.length;++be)if(isNaN($[be]))ie[be]=65535;else if($[be]===1/0)ie[be]=31744;else if($[be]===-1/0)ie[be]=64512;else{ur[0]=$[be];var nt=Mr[0],dt=nt>>>31<<15,Qe=(nt<<1>>>24)-127,st=nt>>13&1024-1;if(Qe<-24)ie[be]=dt;else if(Qe<-14){var Nt=-14-Qe;ie[be]=dt+(st+1024>>Nt)}else Qe>15?ie[be]=dt+31744:ie[be]=dt+(Qe+15<<10)+st}return ie}function M($){return Array.isArray($)||n($)}var U=function($){return!($&$-1)&&!!$},ne=34467,me=3553,We=34067,vt=34069,Ht=6408,_n=6406,yr=6407,ln=6409,Gr=6410,pr=32854,Cr=32855,ia=36194,wo=32819,Ji=32820,hl=33635,vl=34042,$l=6402,du=34041,Ha=35904,pu=35906,Zo=36193,Bl=33776,yl=33777,Xa=33778,Ya=33779,Xu=35986,oh=35987,ih=34798,qd=35840,Dc=35841,Yu=35842,zf=35843,ah=36196,qu=5121,Cc=5123,Hf=5125,Io=5126,Ui=10242,Xf=10243,Yf=10497,Ps=33071,Vv=33648,ks=10240,ml=10241,jc=9728,Ku=9729,hu=9984,Ns=9985,Ic=9986,vu=9987,Gv=33170,Lc=4352,Wv=4353,zv=4354,lh=34046,qf=3317,Ri=37440,uh=37441,oe=37443,Zu=37444,Ul=33984,ka=[hu,Ic,Ns,vu],Pr=[0,ln,Gr,yr,Ht],Ei={};Ei[ln]=Ei[_n]=Ei[$l]=1,Ei[du]=Ei[Gr]=2,Ei[yr]=Ei[Ha]=3,Ei[Ht]=Ei[pu]=4;function Fr($){return"[object "+$+"]"}var qa=Fr("HTMLCanvasElement"),Vl=Fr("OffscreenCanvas"),ga=Fr("CanvasRenderingContext2D"),Kf=Fr("ImageBitmap"),Zf=Fr("HTMLImageElement"),Kd=Fr("HTMLVideoElement"),sh=Object.keys(ki).concat([qa,Vl,ga,Kf,Zf,Kd]),Gl=[];Gl[qu]=1,Gl[Io]=4,Gl[Zo]=2,Gl[Cc]=2,Gl[Hf]=4;var Lo=[];Lo[pr]=2,Lo[Cr]=2,Lo[ia]=2,Lo[du]=4,Lo[Bl]=.5,Lo[yl]=.5,Lo[Xa]=1,Lo[Ya]=1,Lo[Xu]=.5,Lo[oh]=1,Lo[ih]=1,Lo[qd]=.5,Lo[Dc]=.25,Lo[Yu]=.5,Lo[zf]=.25,Lo[ah]=.5;function Rs($){return Array.isArray($)&&($.length===0||typeof $[0]=="number")}function Zd($){if(!Array.isArray($))return!1;var ie=$.length;return!(ie===0||!M($[0]))}function Wl($){return Object.prototype.toString.call($)}function Ka($){return Wl($)===qa}function Fc($){return Wl($)===Vl}function yu($){return Wl($)===ga}function ba($){return Wl($)===Kf}function Jd($){return Wl($)===Zf}function Qd($){return Wl($)===Kd}function Za($){if(!$)return!1;var ie=Wl($);return sh.indexOf(ie)>=0?!0:Rs($)||Zd($)||ji($)}function mo($){return ki[Object.prototype.toString.call($)]|0}function ch($,ie){var be=ie.length;switch($.type){case qu:case Cc:case Hf:case Io:var nt=yo.allocType($.type,be);nt.set(ie),$.data=nt;break;case Zo:$.data=T(ie);break;default:re.raise("unsupported texture type, must specify a typed array")}}function ep($,ie){return yo.allocType($.type===Zo?Io:$.type,ie)}function Fo($,ie){$.type===Zo?($.data=T(ie),yo.freeType(ie)):$.data=ie}function zr($,ie,be,nt,dt,Qe){for(var st=$.width,Nt=$.height,It=$.channels,Ct=st*Nt*It,ct=ep($,Ct),Gt=0,Ut=0;Ut<Nt;++Ut)for(var Rt=0;Rt<st;++Rt)for(var wt=0;wt<It;++wt)ct[Gt++]=ie[be*Rt+nt*Ut+dt*wt+Qe];Fo($,ct)}function Jo($,ie,be,nt,dt,Qe){var st;if(typeof Lo[$]<"u"?st=Lo[$]:st=Ei[$]*Gl[ie],Qe&&(st*=6),dt){for(var Nt=0,It=be;It>=1;)Nt+=st*It*It,It/=2;return Nt}else return st*be*nt}function Er($,ie,be,nt,dt,Qe,st){var Nt={"don't care":Lc,"dont care":Lc,nice:zv,fast:Wv},It={repeat:Yf,clamp:Ps,mirror:Vv},Ct={nearest:jc,linear:Ku},ct=o({mipmap:vu,"nearest mipmap nearest":hu,"linear mipmap nearest":Ns,"nearest mipmap linear":Ic,"linear mipmap linear":vu},Ct),Gt={none:0,browser:Zu},Ut={uint8:qu,rgba4:wo,rgb565:hl,"rgb5 a1":Ji},Rt={alpha:_n,luminance:ln,"luminance alpha":Gr,rgb:yr,rgba:Ht,rgba4:pr,"rgb5 a1":Cr,rgb565:ia},wt={};ie.ext_srgb&&(Rt.srgb=Ha,Rt.srgba=pu),ie.oes_texture_float&&(Ut.float32=Ut.float=Io),ie.oes_texture_half_float&&(Ut.float16=Ut["half float"]=Zo),ie.webgl_depth_texture&&(o(Rt,{depth:$l,"depth stencil":du}),o(Ut,{uint16:Cc,uint32:Hf,"depth stencil":vl})),ie.webgl_compressed_texture_s3tc&&o(wt,{"rgb s3tc dxt1":Bl,"rgba s3tc dxt1":yl,"rgba s3tc dxt3":Xa,"rgba s3tc dxt5":Ya}),ie.webgl_compressed_texture_atc&&o(wt,{"rgb atc":Xu,"rgba atc explicit alpha":oh,"rgba atc interpolated alpha":ih}),ie.webgl_compressed_texture_pvrtc&&o(wt,{"rgb pvrtc 4bppv1":qd,"rgb pvrtc 2bppv1":Dc,"rgba pvrtc 4bppv1":Yu,"rgba pvrtc 2bppv1":zf}),ie.webgl_compressed_texture_etc1&&(wt["rgb etc1"]=ah);var Ye=Array.prototype.slice.call($.getParameter(ne));Object.keys(wt).forEach(function(ve){var rt=wt[ve];Ye.indexOf(rt)>=0&&(Rt[ve]=rt)});var lt=Object.keys(Rt);be.textureFormats=lt;var Ft=[];Object.keys(Rt).forEach(function(ve){var rt=Rt[ve];Ft[rt]=ve});var Kt=[];Object.keys(Ut).forEach(function(ve){var rt=Ut[ve];Kt[rt]=ve});var St=[];Object.keys(Ct).forEach(function(ve){var rt=Ct[ve];St[rt]=ve});var Jt=[];Object.keys(ct).forEach(function(ve){var rt=ct[ve];Jt[rt]=ve});var Tt=[];Object.keys(It).forEach(function(ve){var rt=It[ve];Tt[rt]=ve});var Wt=lt.reduce(function(ve,rt){var Je=Rt[rt];return Je===ln||Je===_n||Je===ln||Je===Gr||Je===$l||Je===du||ie.ext_srgb&&(Je===Ha||Je===pu)?ve[Je]=Je:Je===Cr||rt.indexOf("rgba")>=0?ve[Je]=Ht:ve[Je]=yr,ve},{});function Et(){this.internalformat=Ht,this.format=Ht,this.type=qu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zu,this.width=0,this.height=0,this.channels=0}function Xt(ve,rt){ve.internalformat=rt.internalformat,ve.format=rt.format,ve.type=rt.type,ve.compressed=rt.compressed,ve.premultiplyAlpha=rt.premultiplyAlpha,ve.flipY=rt.flipY,ve.unpackAlignment=rt.unpackAlignment,ve.colorSpace=rt.colorSpace,ve.width=rt.width,ve.height=rt.height,ve.channels=rt.channels}function Mn(ve,rt){if(!(typeof rt!="object"||!rt)){if("premultiplyAlpha"in rt&&(re.type(rt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ve.premultiplyAlpha=rt.premultiplyAlpha),"flipY"in rt&&(re.type(rt.flipY,"boolean","invalid texture flip"),ve.flipY=rt.flipY),"alignment"in rt&&(re.oneOf(rt.alignment,[1,2,4,8],"invalid texture unpack alignment"),ve.unpackAlignment=rt.alignment),"colorSpace"in rt&&(re.parameter(rt.colorSpace,Gt,"invalid colorSpace"),ve.colorSpace=Gt[rt.colorSpace]),"type"in rt){var Je=rt.type;re(ie.oes_texture_float||!(Je==="float"||Je==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),re(ie.oes_texture_half_float||!(Je==="half float"||Je==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),re(ie.webgl_depth_texture||!(Je==="uint16"||Je==="uint32"||Je==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(Je,Ut,"invalid texture type"),ve.type=Ut[Je]}var tn=ve.width,hr=ve.height,ue=ve.channels,ee=!1;"shape"in rt?(re(Array.isArray(rt.shape)&&rt.shape.length>=2,"shape must be an array"),tn=rt.shape[0],hr=rt.shape[1],rt.shape.length===3&&(ue=rt.shape[2],re(ue>0&&ue<=4,"invalid number of channels"),ee=!0),re(tn>=0&&tn<=be.maxTextureSize,"invalid width"),re(hr>=0&&hr<=be.maxTextureSize,"invalid height")):("radius"in rt&&(tn=hr=rt.radius,re(tn>=0&&tn<=be.maxTextureSize,"invalid radius")),"width"in rt&&(tn=rt.width,re(tn>=0&&tn<=be.maxTextureSize,"invalid width")),"height"in rt&&(hr=rt.height,re(hr>=0&&hr<=be.maxTextureSize,"invalid height")),"channels"in rt&&(ue=rt.channels,re(ue>0&&ue<=4,"invalid number of channels"),ee=!0)),ve.width=tn|0,ve.height=hr|0,ve.channels=ue|0;var Ae=!1;if("format"in rt){var Ge=rt.format;re(ie.webgl_depth_texture||!(Ge==="depth"||Ge==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(Ge,Rt,"invalid texture format");var qe=ve.internalformat=Rt[Ge];ve.format=Wt[qe],Ge in Ut&&("type"in rt||(ve.type=Ut[Ge])),Ge in wt&&(ve.compressed=!0),Ae=!0}!ee&&Ae?ve.channels=Ei[ve.format]:ee&&!Ae?ve.channels!==Pr[ve.format]&&(ve.format=ve.internalformat=Pr[ve.channels]):Ae&&ee&&re(ve.channels===Ei[ve.format],"number of channels inconsistent with specified format")}}function Wn(ve){$.pixelStorei(Ri,ve.flipY),$.pixelStorei(uh,ve.premultiplyAlpha),$.pixelStorei(oe,ve.colorSpace),$.pixelStorei(qf,ve.unpackAlignment)}function Lt(){Et.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(ve,rt){var Je=null;if(Za(rt)?Je=rt:rt&&(re.type(rt,"object","invalid pixel data type"),Mn(ve,rt),"x"in rt&&(ve.xOffset=rt.x|0),"y"in rt&&(ve.yOffset=rt.y|0),Za(rt.data)&&(Je=rt.data)),re(!ve.compressed||Je instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),rt.copy){re(!Je,"can not specify copy and data field for the same texture");var tn=dt.viewportWidth,hr=dt.viewportHeight;ve.width=ve.width||tn-ve.xOffset,ve.height=ve.height||hr-ve.yOffset,ve.needsCopy=!0,re(ve.xOffset>=0&&ve.xOffset<tn&&ve.yOffset>=0&&ve.yOffset<hr&&ve.width>0&&ve.width<=tn&&ve.height>0&&ve.height<=hr,"copy texture read out of bounds")}else if(!Je)ve.width=ve.width||1,ve.height=ve.height||1,ve.channels=ve.channels||4;else if(n(Je))ve.channels=ve.channels||4,ve.data=Je,!("type"in rt)&&ve.type===qu&&(ve.type=mo(Je));else if(Rs(Je))ve.channels=ve.channels||4,ch(ve,Je),ve.alignment=1,ve.needsFree=!0;else if(ji(Je)){var ue=Je.data;!Array.isArray(ue)&&ve.type===qu&&(ve.type=mo(ue));var ee=Je.shape,Ae=Je.stride,Ge,qe,ke,Te,Le,de;ee.length===3?(ke=ee[2],de=Ae[2]):(re(ee.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ke=1,de=1),Ge=ee[0],qe=ee[1],Te=Ae[0],Le=Ae[1],ve.alignment=1,ve.width=Ge,ve.height=qe,ve.channels=ke,ve.format=ve.internalformat=Pr[ke],ve.needsFree=!0,zr(ve,ue,Te,Le,de,Je.offset)}else if(Ka(Je)||Fc(Je)||yu(Je))Ka(Je)||Fc(Je)?ve.element=Je:ve.element=Je.canvas,ve.width=ve.element.width,ve.height=ve.element.height,ve.channels=4;else if(ba(Je))ve.element=Je,ve.width=Je.width,ve.height=Je.height,ve.channels=4;else if(Jd(Je))ve.element=Je,ve.width=Je.naturalWidth,ve.height=Je.naturalHeight,ve.channels=4;else if(Qd(Je))ve.element=Je,ve.width=Je.videoWidth,ve.height=Je.videoHeight,ve.channels=4;else if(Zd(Je)){var we=ve.width||Je[0].length,se=ve.height||Je.length,Ue=ve.channels;M(Je[0][0])?Ue=Ue||Je[0][0].length:Ue=Ue||1;for(var Ze=na.shape(Je),d=1,m=0;m<Ze.length;++m)d*=Ze[m];var E=ep(ve,d);na.flatten(Je,Ze,"",E),Fo(ve,E),ve.alignment=1,ve.width=we,ve.height=se,ve.channels=Ue,ve.format=ve.internalformat=Pr[Ue],ve.needsFree=!0}ve.type===Io?re(be.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ve.type===Zo&&re(be.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ot(ve,rt,Je){var tn=ve.element,hr=ve.data,ue=ve.internalformat,ee=ve.format,Ae=ve.type,Ge=ve.width,qe=ve.height;Wn(ve),tn?$.texImage2D(rt,Je,ee,ee,Ae,tn):ve.compressed?$.compressedTexImage2D(rt,Je,ue,Ge,qe,0,hr):ve.needsCopy?(nt(),$.copyTexImage2D(rt,Je,ee,ve.xOffset,ve.yOffset,Ge,qe,0)):$.texImage2D(rt,Je,ee,Ge,qe,0,ee,Ae,hr||null)}function Cn(ve,rt,Je,tn,hr){var ue=ve.element,ee=ve.data,Ae=ve.internalformat,Ge=ve.format,qe=ve.type,ke=ve.width,Te=ve.height;Wn(ve),ue?$.texSubImage2D(rt,hr,Je,tn,Ge,qe,ue):ve.compressed?$.compressedTexSubImage2D(rt,hr,Je,tn,Ae,ke,Te,ee):ve.needsCopy?(nt(),$.copyTexSubImage2D(rt,hr,Je,tn,ve.xOffset,ve.yOffset,ke,Te)):$.texSubImage2D(rt,hr,Je,tn,ke,Te,Ge,qe,ee)}var nr=[];function un(){return nr.pop()||new Lt}function Qn(ve){ve.needsFree&&yo.freeType(ve.data),Lt.call(ve),nr.push(ve)}function Gn(){Et.call(this),this.genMipmaps=!1,this.mipmapHint=Lc,this.mipmask=0,this.images=Array(16)}function rr(ve,rt,Je){var tn=ve.images[0]=un();ve.mipmask=1,tn.width=ve.width=rt,tn.height=ve.height=Je,tn.channels=ve.channels=4}function gr(ve,rt){var Je=null;if(Za(rt))Je=ve.images[0]=un(),Xt(Je,ve),Mt(Je,rt),ve.mipmask=1;else if(Mn(ve,rt),Array.isArray(rt.mipmap))for(var tn=rt.mipmap,hr=0;hr<tn.length;++hr)Je=ve.images[hr]=un(),Xt(Je,ve),Je.width>>=hr,Je.height>>=hr,Mt(Je,tn[hr]),ve.mipmask|=1<<hr;else Je=ve.images[0]=un(),Xt(Je,ve),Mt(Je,rt),ve.mipmask=1;Xt(ve,ve.images[0]),ve.compressed&&(ve.internalformat===Bl||ve.internalformat===yl||ve.internalformat===Xa||ve.internalformat===Ya)&&re(ve.width%4===0&&ve.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ko(ve,rt){for(var Je=ve.images,tn=0;tn<Je.length;++tn){if(!Je[tn])return;Ot(Je[tn],rt,tn)}}var Bo=[];function cr(){var ve=Bo.pop()||new Gn;Et.call(ve),ve.mipmask=0;for(var rt=0;rt<16;++rt)ve.images[rt]=null;return ve}function Wo(ve){for(var rt=ve.images,Je=0;Je<rt.length;++Je)rt[Je]&&Qn(rt[Je]),rt[Je]=null;Bo.push(ve)}function no(){this.minFilter=jc,this.magFilter=jc,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Lc}function No(ve,rt){if("min"in rt){var Je=rt.min;re.parameter(Je,ct),ve.minFilter=ct[Je],ka.indexOf(ve.minFilter)>=0&&!("faces"in rt)&&(ve.genMipmaps=!0)}if("mag"in rt){var tn=rt.mag;re.parameter(tn,Ct),ve.magFilter=Ct[tn]}var hr=ve.wrapS,ue=ve.wrapT;if("wrap"in rt){var ee=rt.wrap;typeof ee=="string"?(re.parameter(ee,It),hr=ue=It[ee]):Array.isArray(ee)&&(re.parameter(ee[0],It),re.parameter(ee[1],It),hr=It[ee[0]],ue=It[ee[1]])}else{if("wrapS"in rt){var Ae=rt.wrapS;re.parameter(Ae,It),hr=It[Ae]}if("wrapT"in rt){var Ge=rt.wrapT;re.parameter(Ge,It),ue=It[Ge]}}if(ve.wrapS=hr,ve.wrapT=ue,"anisotropic"in rt){var qe=rt.anisotropic;re(typeof qe=="number"&&qe>=1&&qe<=be.maxAnisotropic,"aniso samples must be between 1 and "),ve.anisotropic=rt.anisotropic}if("mipmap"in rt){var ke=!1;switch(typeof rt.mipmap){case"string":re.parameter(rt.mipmap,Nt,"invalid mipmap hint"),ve.mipmapHint=Nt[rt.mipmap],ve.genMipmaps=!0,ke=!0;break;case"boolean":ke=ve.genMipmaps=rt.mipmap;break;case"object":re(Array.isArray(rt.mipmap),"invalid mipmap type"),ve.genMipmaps=!1,ke=!0;break;default:re.raise("invalid mipmap type")}ke&&!("min"in rt)&&(ve.minFilter=hu)}}function Uo(ve,rt){$.texParameteri(rt,ml,ve.minFilter),$.texParameteri(rt,ks,ve.magFilter),$.texParameteri(rt,Ui,ve.wrapS),$.texParameteri(rt,Xf,ve.wrapT),ie.ext_texture_filter_anisotropic&&$.texParameteri(rt,lh,ve.anisotropic),ve.genMipmaps&&($.hint(Gv,ve.mipmapHint),$.generateMipmap(rt))}var xo=0,go={},ni=be.maxTextureUnits,So=Array(ni).map(function(){return null});function Zn(ve){Et.call(this),this.mipmask=0,this.internalformat=Ht,this.id=xo++,this.refCount=1,this.target=ve,this.texture=$.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new no,st.profile&&(this.stats={size:0})}function ui(ve){$.activeTexture(Ul),$.bindTexture(ve.target,ve.texture)}function Nr(){var ve=So[0];ve?$.bindTexture(ve.target,ve.texture):$.bindTexture(me,null)}function Rn(ve){var rt=ve.texture;re(rt,"must not double destroy texture");var Je=ve.unit,tn=ve.target;Je>=0&&($.activeTexture(Ul+Je),$.bindTexture(tn,null),So[Je]=null),$.deleteTexture(rt),ve.texture=null,ve.params=null,ve.pixels=null,ve.refCount=0,delete go[ve.id],Qe.textureCount--}o(Zn.prototype,{bind:function(){var ve=this;ve.bindCount+=1;var rt=ve.unit;if(rt<0){for(var Je=0;Je<ni;++Je){var tn=So[Je];if(tn){if(tn.bindCount>0)continue;tn.unit=-1}So[Je]=ve,rt=Je;break}rt>=ni&&re.raise("insufficient number of texture units"),st.profile&&Qe.maxTextureUnits<rt+1&&(Qe.maxTextureUnits=rt+1),ve.unit=rt,$.activeTexture(Ul+rt),$.bindTexture(ve.target,ve.texture)}return rt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Rn(this)}});function fr(ve,rt){var Je=new Zn(me);go[Je.id]=Je,Qe.textureCount++;function tn(ee,Ae){var Ge=Je.texInfo;no.call(Ge);var qe=cr();return typeof ee=="number"?typeof Ae=="number"?rr(qe,ee|0,Ae|0):rr(qe,ee|0,ee|0):ee?(re.type(ee,"object","invalid arguments to regl.texture"),No(Ge,ee),gr(qe,ee)):rr(qe,1,1),Ge.genMipmaps&&(qe.mipmask=(qe.width<<1)-1),Je.mipmask=qe.mipmask,Xt(Je,qe),re.texture2D(Ge,qe,be),Je.internalformat=qe.internalformat,tn.width=qe.width,tn.height=qe.height,ui(Je),ko(qe,me),Uo(Ge,me),Nr(),Wo(qe),st.profile&&(Je.stats.size=Jo(Je.internalformat,Je.type,qe.width,qe.height,Ge.genMipmaps,!1)),tn.format=Ft[Je.internalformat],tn.type=Kt[Je.type],tn.mag=St[Ge.magFilter],tn.min=Jt[Ge.minFilter],tn.wrapS=Tt[Ge.wrapS],tn.wrapT=Tt[Ge.wrapT],tn}function hr(ee,Ae,Ge,qe){re(!!ee,"must specify image data");var ke=Ae|0,Te=Ge|0,Le=qe|0,de=un();return Xt(de,Je),de.width=0,de.height=0,Mt(de,ee),de.width=de.width||(Je.width>>Le)-ke,de.height=de.height||(Je.height>>Le)-Te,re(Je.type===de.type&&Je.format===de.format&&Je.internalformat===de.internalformat,"incompatible format for texture.subimage"),re(ke>=0&&Te>=0&&ke+de.width<=Je.width&&Te+de.height<=Je.height,"texture.subimage write out of bounds"),re(Je.mipmask&1<<Le,"missing mipmap data"),re(de.data||de.element||de.needsCopy,"missing image data"),ui(Je),Cn(de,me,ke,Te,Le),Nr(),Qn(de),tn}function ue(ee,Ae){var Ge=ee|0,qe=Ae|0||Ge;if(Ge===Je.width&&qe===Je.height)return tn;tn.width=Je.width=Ge,tn.height=Je.height=qe,ui(Je);for(var ke=0;Je.mipmask>>ke;++ke){var Te=Ge>>ke,Le=qe>>ke;if(!Te||!Le)break;$.texImage2D(me,ke,Je.format,Te,Le,0,Je.format,Je.type,null)}return Nr(),st.profile&&(Je.stats.size=Jo(Je.internalformat,Je.type,Ge,qe,!1,!1)),tn}return tn(ve,rt),tn.subimage=hr,tn.resize=ue,tn._reglType="texture2d",tn._texture=Je,st.profile&&(tn.stats=Je.stats),tn.destroy=function(){Je.decRef()},tn}function zn(ve,rt,Je,tn,hr,ue){var ee=new Zn(We);go[ee.id]=ee,Qe.cubeCount++;var Ae=new Array(6);function Ge(Te,Le,de,we,se,Ue){var Ze,d=ee.texInfo;for(no.call(d),Ze=0;Ze<6;++Ze)Ae[Ze]=cr();if(typeof Te=="number"||!Te){var m=Te|0||1;for(Ze=0;Ze<6;++Ze)rr(Ae[Ze],m,m)}else if(typeof Te=="object")if(Le)gr(Ae[0],Te),gr(Ae[1],Le),gr(Ae[2],de),gr(Ae[3],we),gr(Ae[4],se),gr(Ae[5],Ue);else if(No(d,Te),Mn(ee,Te),"faces"in Te){var E=Te.faces;for(re(Array.isArray(E)&&E.length===6,"cube faces must be a length 6 array"),Ze=0;Ze<6;++Ze)re(typeof E[Ze]=="object"&&!!E[Ze],"invalid input for cube map face"),Xt(Ae[Ze],ee),gr(Ae[Ze],E[Ze])}else for(Ze=0;Ze<6;++Ze)gr(Ae[Ze],Te);else re.raise("invalid arguments to cube map");for(Xt(ee,Ae[0]),be.npotTextureCube||re(U(ee.width)&&U(ee.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?ee.mipmask=(Ae[0].width<<1)-1:ee.mipmask=Ae[0].mipmask,re.textureCube(ee,d,Ae,be),ee.internalformat=Ae[0].internalformat,Ge.width=Ae[0].width,Ge.height=Ae[0].height,ui(ee),Ze=0;Ze<6;++Ze)ko(Ae[Ze],vt+Ze);for(Uo(d,We),Nr(),st.profile&&(ee.stats.size=Jo(ee.internalformat,ee.type,Ge.width,Ge.height,d.genMipmaps,!0)),Ge.format=Ft[ee.internalformat],Ge.type=Kt[ee.type],Ge.mag=St[d.magFilter],Ge.min=Jt[d.minFilter],Ge.wrapS=Tt[d.wrapS],Ge.wrapT=Tt[d.wrapT],Ze=0;Ze<6;++Ze)Wo(Ae[Ze]);return Ge}function qe(Te,Le,de,we,se){re(!!Le,"must specify image data"),re(typeof Te=="number"&&Te===(Te|0)&&Te>=0&&Te<6,"invalid face");var Ue=de|0,Ze=we|0,d=se|0,m=un();return Xt(m,ee),m.width=0,m.height=0,Mt(m,Le),m.width=m.width||(ee.width>>d)-Ue,m.height=m.height||(ee.height>>d)-Ze,re(ee.type===m.type&&ee.format===m.format&&ee.internalformat===m.internalformat,"incompatible format for texture.subimage"),re(Ue>=0&&Ze>=0&&Ue+m.width<=ee.width&&Ze+m.height<=ee.height,"texture.subimage write out of bounds"),re(ee.mipmask&1<<d,"missing mipmap data"),re(m.data||m.element||m.needsCopy,"missing image data"),ui(ee),Cn(m,vt+Te,Ue,Ze,d),Nr(),Qn(m),Ge}function ke(Te){var Le=Te|0;if(Le!==ee.width){Ge.width=ee.width=Le,Ge.height=ee.height=Le,ui(ee);for(var de=0;de<6;++de)for(var we=0;ee.mipmask>>we;++we)$.texImage2D(vt+de,we,ee.format,Le>>we,Le>>we,0,ee.format,ee.type,null);return Nr(),st.profile&&(ee.stats.size=Jo(ee.internalformat,ee.type,Ge.width,Ge.height,!1,!0)),Ge}}return Ge(ve,rt,Je,tn,hr,ue),Ge.subimage=qe,Ge.resize=ke,Ge._reglType="textureCube",Ge._texture=ee,st.profile&&(Ge.stats=ee.stats),Ge.destroy=function(){ee.decRef()},Ge}function co(){for(var ve=0;ve<ni;++ve)$.activeTexture(Ul+ve),$.bindTexture(me,null),So[ve]=null;ii(go).forEach(Rn),Qe.cubeCount=0,Qe.textureCount=0}st.profile&&(Qe.getTotalTextureSize=function(){var ve=0;return Object.keys(go).forEach(function(rt){ve+=go[rt].stats.size}),ve});function La(){for(var ve=0;ve<ni;++ve){var rt=So[ve];rt&&(rt.bindCount=0,rt.unit=-1,So[ve]=null)}ii(go).forEach(function(Je){Je.texture=$.createTexture(),$.bindTexture(Je.target,Je.texture);for(var tn=0;tn<32;++tn)if(Je.mipmask&1<<tn)if(Je.target===me)$.texImage2D(me,tn,Je.internalformat,Je.width>>tn,Je.height>>tn,0,Je.internalformat,Je.type,null);else for(var hr=0;hr<6;++hr)$.texImage2D(vt+hr,tn,Je.internalformat,Je.width>>tn,Je.height>>tn,0,Je.internalformat,Je.type,null);Uo(Je.texInfo,Je.target)})}function Ql(){for(var ve=0;ve<ni;++ve){var rt=So[ve];rt&&(rt.bindCount=0,rt.unit=-1,So[ve]=null),$.activeTexture(Ul+ve),$.bindTexture(me,null),$.bindTexture(We,null)}}return{create2D:fr,createCube:zn,clear:co,getTexture:function(ve){return null},restore:La,refresh:Ql}}var uo=36161,Nn=32854,so=32855,$c=36194,gl=33189,Jf=36168,Eo=34041,Ao=35907,tp=34836,np=34842,Bc=34843,Vi=[];Vi[Nn]=2,Vi[so]=2,Vi[$c]=2,Vi[gl]=2,Vi[Jf]=1,Vi[Eo]=4,Vi[Ao]=4,Vi[tp]=16,Vi[np]=8,Vi[Bc]=6;function Qf($,ie,be){return Vi[$]*ie*be}var Ds=function($,ie,be,nt,dt){var Qe={rgba4:Nn,rgb565:$c,"rgb5 a1":so,depth:gl,stencil:Jf,"depth stencil":Eo};ie.ext_srgb&&(Qe.srgba=Ao),ie.ext_color_buffer_half_float&&(Qe.rgba16f=np,Qe.rgb16f=Bc),ie.webgl_color_buffer_float&&(Qe.rgba32f=tp);var st=[];Object.keys(Qe).forEach(function(Rt){var wt=Qe[Rt];st[wt]=Rt});var Nt=0,It={};function Ct(Rt){this.id=Nt++,this.refCount=1,this.renderbuffer=Rt,this.format=Nn,this.width=0,this.height=0,dt.profile&&(this.stats={size:0})}Ct.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(Rt){var wt=Rt.renderbuffer;re(wt,"must not double destroy renderbuffer"),$.bindRenderbuffer(uo,null),$.deleteRenderbuffer(wt),Rt.renderbuffer=null,Rt.refCount=0,delete It[Rt.id],nt.renderbufferCount--}function Gt(Rt,wt){var Ye=new Ct($.createRenderbuffer());It[Ye.id]=Ye,nt.renderbufferCount++;function lt(Kt,St){var Jt=0,Tt=0,Wt=Nn;if(typeof Kt=="object"&&Kt){var Et=Kt;if("shape"in Et){var Xt=Et.shape;re(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Jt=Xt[0]|0,Tt=Xt[1]|0}else"radius"in Et&&(Jt=Tt=Et.radius|0),"width"in Et&&(Jt=Et.width|0),"height"in Et&&(Tt=Et.height|0);"format"in Et&&(re.parameter(Et.format,Qe,"invalid renderbuffer format"),Wt=Qe[Et.format])}else typeof Kt=="number"?(Jt=Kt|0,typeof St=="number"?Tt=St|0:Tt=Jt):Kt?re.raise("invalid arguments to renderbuffer constructor"):Jt=Tt=1;if(re(Jt>0&&Tt>0&&Jt<=be.maxRenderbufferSize&&Tt<=be.maxRenderbufferSize,"invalid renderbuffer size"),!(Jt===Ye.width&&Tt===Ye.height&&Wt===Ye.format))return lt.width=Ye.width=Jt,lt.height=Ye.height=Tt,Ye.format=Wt,$.bindRenderbuffer(uo,Ye.renderbuffer),$.renderbufferStorage(uo,Wt,Jt,Tt),re($.getError()===0,"invalid render buffer format"),dt.profile&&(Ye.stats.size=Qf(Ye.format,Ye.width,Ye.height)),lt.format=st[Ye.format],lt}function Ft(Kt,St){var Jt=Kt|0,Tt=St|0||Jt;return Jt===Ye.width&&Tt===Ye.height||(re(Jt>0&&Tt>0&&Jt<=be.maxRenderbufferSize&&Tt<=be.maxRenderbufferSize,"invalid renderbuffer size"),lt.width=Ye.width=Jt,lt.height=Ye.height=Tt,$.bindRenderbuffer(uo,Ye.renderbuffer),$.renderbufferStorage(uo,Ye.format,Jt,Tt),re($.getError()===0,"invalid render buffer format"),dt.profile&&(Ye.stats.size=Qf(Ye.format,Ye.width,Ye.height))),lt}return lt(Rt,wt),lt.resize=Ft,lt._reglType="renderbuffer",lt._renderbuffer=Ye,dt.profile&&(lt.stats=Ye.stats),lt.destroy=function(){Ye.decRef()},lt}dt.profile&&(nt.getTotalRenderbufferSize=function(){var Rt=0;return Object.keys(It).forEach(function(wt){Rt+=It[wt].stats.size}),Rt});function Ut(){ii(It).forEach(function(Rt){Rt.renderbuffer=$.createRenderbuffer(),$.bindRenderbuffer(uo,Rt.renderbuffer),$.renderbufferStorage(uo,Rt.format,Rt.width,Rt.height)}),$.bindRenderbuffer(uo,null)}return{create:Gt,clear:function(){ii(It).forEach(ct)},restore:Ut}},Na=36160,mu=36161,zl=3553,Ra=34069,fh=36064,bl=36096,_a=36128,rp=33306,op=36053,ed=36054,dh=36055,ph=36057,hh=36061,ip=36193,Cs=5121,ap=5126,Uc=6407,Or=6408,Hv=6402,lp=[Uc,Or],gu=[];gu[Or]=4,gu[Uc]=3;var Vc=[];Vc[Cs]=1,Vc[ap]=4,Vc[ip]=2;var Xv=32854,Yv=32855,Da=36194,up=33189,td=36168,nd=34041,vh=35907,sp=34836,aa=34842,bu=34843,rd=[Xv,Yv,Da,vh,aa,bu,sp],Ju={};Ju[op]="complete",Ju[ed]="incomplete attachment",Ju[ph]="incomplete dimensions",Ju[dh]="incomplete, missing attachment",Ju[hh]="unsupported";function Gc($,ie,be,nt,dt,Qe){var st={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],It=["rgba4","rgb565","rgb5 a1"];ie.ext_srgb&&It.push("srgba"),ie.ext_color_buffer_half_float&&It.push("rgba16f","rgb16f"),ie.webgl_color_buffer_float&&It.push("rgba32f");var Ct=["uint8"];ie.oes_texture_half_float&&Ct.push("half float","float16"),ie.oes_texture_float&&Ct.push("float","float32");function ct(Lt,Mt,Ot){this.target=Lt,this.texture=Mt,this.renderbuffer=Ot;var Cn=0,nr=0;Mt?(Cn=Mt.width,nr=Mt.height):Ot&&(Cn=Ot.width,nr=Ot.height),this.width=Cn,this.height=nr}function Gt(Lt){Lt&&(Lt.texture&&Lt.texture._texture.decRef(),Lt.renderbuffer&&Lt.renderbuffer._renderbuffer.decRef())}function Ut(Lt,Mt,Ot){if(Lt)if(Lt.texture){var Cn=Lt.texture._texture,nr=Math.max(1,Cn.width),un=Math.max(1,Cn.height);re(nr===Mt&&un===Ot,"inconsistent width/height for supplied texture"),Cn.refCount+=1}else{var Qn=Lt.renderbuffer._renderbuffer;re(Qn.width===Mt&&Qn.height===Ot,"inconsistent width/height for renderbuffer"),Qn.refCount+=1}}function Rt(Lt,Mt){Mt&&(Mt.texture?$.framebufferTexture2D(Na,Lt,Mt.target,Mt.texture._texture.texture,0):$.framebufferRenderbuffer(Na,Lt,mu,Mt.renderbuffer._renderbuffer.renderbuffer))}function wt(Lt){var Mt=zl,Ot=null,Cn=null,nr=Lt;typeof Lt=="object"&&(nr=Lt.data,"target"in Lt&&(Mt=Lt.target|0)),re.type(nr,"function","invalid attachment data");var un=nr._reglType;return un==="texture2d"?(Ot=nr,re(Mt===zl)):un==="textureCube"?(Ot=nr,re(Mt>=Ra&&Mt<Ra+6,"invalid cube map target")):un==="renderbuffer"?(Cn=nr,Mt=mu):re.raise("invalid regl object for attachment"),new ct(Mt,Ot,Cn)}function Ye(Lt,Mt,Ot,Cn,nr){if(Ot){var un=nt.create2D({width:Lt,height:Mt,format:Cn,type:nr});return un._texture.refCount=0,new ct(zl,un,null)}else{var Qn=dt.create({width:Lt,height:Mt,format:Cn});return Qn._renderbuffer.refCount=0,new ct(mu,null,Qn)}}function lt(Lt){return Lt&&(Lt.texture||Lt.renderbuffer)}function Ft(Lt,Mt,Ot){Lt&&(Lt.texture?Lt.texture.resize(Mt,Ot):Lt.renderbuffer&&Lt.renderbuffer.resize(Mt,Ot),Lt.width=Mt,Lt.height=Ot)}var Kt=0,St={};function Jt(){this.id=Kt++,St[this.id]=this,this.framebuffer=$.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Tt(Lt){Lt.colorAttachments.forEach(Gt),Gt(Lt.depthAttachment),Gt(Lt.stencilAttachment),Gt(Lt.depthStencilAttachment)}function Wt(Lt){var Mt=Lt.framebuffer;re(Mt,"must not double destroy framebuffer"),$.deleteFramebuffer(Mt),Lt.framebuffer=null,Qe.framebufferCount--,delete St[Lt.id]}function Et(Lt){var Mt;$.bindFramebuffer(Na,Lt.framebuffer);var Ot=Lt.colorAttachments;for(Mt=0;Mt<Ot.length;++Mt)Rt(fh+Mt,Ot[Mt]);for(Mt=Ot.length;Mt<be.maxColorAttachments;++Mt)$.framebufferTexture2D(Na,fh+Mt,zl,null,0);$.framebufferTexture2D(Na,rp,zl,null,0),$.framebufferTexture2D(Na,bl,zl,null,0),$.framebufferTexture2D(Na,_a,zl,null,0),Rt(bl,Lt.depthAttachment),Rt(_a,Lt.stencilAttachment),Rt(rp,Lt.depthStencilAttachment);var Cn=$.checkFramebufferStatus(Na);!$.isContextLost()&&Cn!==op&&re.raise("framebuffer configuration not supported, status = "+Ju[Cn]),$.bindFramebuffer(Na,st.next?st.next.framebuffer:null),st.cur=st.next,$.getError()}function Xt(Lt,Mt){var Ot=new Jt;Qe.framebufferCount++;function Cn(un,Qn){var Gn;re(st.next!==Ot,"can not update framebuffer which is currently in use");var rr=0,gr=0,ko=!0,Bo=!0,cr=null,Wo=!0,no="rgba",No="uint8",Uo=1,xo=null,go=null,ni=null,So=!1;if(typeof un=="number")rr=un|0,gr=Qn|0||rr;else if(!un)rr=gr=1;else{re.type(un,"object","invalid arguments for framebuffer");var Zn=un;if("shape"in Zn){var ui=Zn.shape;re(Array.isArray(ui)&&ui.length>=2,"invalid shape for framebuffer"),rr=ui[0],gr=ui[1]}else"radius"in Zn&&(rr=gr=Zn.radius),"width"in Zn&&(rr=Zn.width),"height"in Zn&&(gr=Zn.height);("color"in Zn||"colors"in Zn)&&(cr=Zn.color||Zn.colors,Array.isArray(cr)&&re(cr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),cr||("colorCount"in Zn&&(Uo=Zn.colorCount|0,re(Uo>0,"invalid color buffer count")),"colorTexture"in Zn&&(Wo=!!Zn.colorTexture,no="rgba4"),"colorType"in Zn&&(No=Zn.colorType,Wo?(re(ie.oes_texture_float||!(No==="float"||No==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),re(ie.oes_texture_half_float||!(No==="half float"||No==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):No==="half float"||No==="float16"?(re(ie.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),no="rgba16f"):(No==="float"||No==="float32")&&(re(ie.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),no="rgba32f"),re.oneOf(No,Ct,"invalid color type")),"colorFormat"in Zn&&(no=Zn.colorFormat,Nt.indexOf(no)>=0?Wo=!0:It.indexOf(no)>=0?Wo=!1:Wo?re.oneOf(Zn.colorFormat,Nt,"invalid color format for texture"):re.oneOf(Zn.colorFormat,It,"invalid color format for renderbuffer"))),("depthTexture"in Zn||"depthStencilTexture"in Zn)&&(So=!!(Zn.depthTexture||Zn.depthStencilTexture),re(!So||ie.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Zn&&(typeof Zn.depth=="boolean"?ko=Zn.depth:(xo=Zn.depth,Bo=!1)),"stencil"in Zn&&(typeof Zn.stencil=="boolean"?Bo=Zn.stencil:(go=Zn.stencil,ko=!1)),"depthStencil"in Zn&&(typeof Zn.depthStencil=="boolean"?ko=Bo=Zn.depthStencil:(ni=Zn.depthStencil,ko=!1,Bo=!1))}var Nr=null,Rn=null,fr=null,zn=null;if(Array.isArray(cr))Nr=cr.map(wt);else if(cr)Nr=[wt(cr)];else for(Nr=new Array(Uo),Gn=0;Gn<Uo;++Gn)Nr[Gn]=Ye(rr,gr,Wo,no,No);re(ie.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),re(Nr.length<=be.maxColorAttachments,"too many color attachments, not supported"),rr=rr||Nr[0].width,gr=gr||Nr[0].height,xo?Rn=wt(xo):ko&&!Bo&&(Rn=Ye(rr,gr,So,"depth","uint32")),go?fr=wt(go):Bo&&!ko&&(fr=Ye(rr,gr,!1,"stencil","uint8")),ni?zn=wt(ni):!xo&&!go&&Bo&&ko&&(zn=Ye(rr,gr,So,"depth stencil","depth stencil")),re(!!xo+!!go+!!ni<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var co=null;for(Gn=0;Gn<Nr.length;++Gn)if(Ut(Nr[Gn],rr,gr),re(!Nr[Gn]||Nr[Gn].texture&&lp.indexOf(Nr[Gn].texture._texture.format)>=0||Nr[Gn].renderbuffer&&rd.indexOf(Nr[Gn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Gn+" is invalid"),Nr[Gn]&&Nr[Gn].texture){var La=gu[Nr[Gn].texture._texture.format]*Vc[Nr[Gn].texture._texture.type];co===null?co=La:re(co===La,"all color attachments much have the same number of bits per pixel.")}return Ut(Rn,rr,gr),re(!Rn||Rn.texture&&Rn.texture._texture.format===Hv||Rn.renderbuffer&&Rn.renderbuffer._renderbuffer.format===up,"invalid depth attachment for framebuffer object"),Ut(fr,rr,gr),re(!fr||fr.renderbuffer&&fr.renderbuffer._renderbuffer.format===td,"invalid stencil attachment for framebuffer object"),Ut(zn,rr,gr),re(!zn||zn.texture&&zn.texture._texture.format===nd||zn.renderbuffer&&zn.renderbuffer._renderbuffer.format===nd,"invalid depth-stencil attachment for framebuffer object"),Tt(Ot),Ot.width=rr,Ot.height=gr,Ot.colorAttachments=Nr,Ot.depthAttachment=Rn,Ot.stencilAttachment=fr,Ot.depthStencilAttachment=zn,Cn.color=Nr.map(lt),Cn.depth=lt(Rn),Cn.stencil=lt(fr),Cn.depthStencil=lt(zn),Cn.width=Ot.width,Cn.height=Ot.height,Et(Ot),Cn}function nr(un,Qn){re(st.next!==Ot,"can not resize a framebuffer which is currently in use");var Gn=Math.max(un|0,1),rr=Math.max(Qn|0||Gn,1);if(Gn===Ot.width&&rr===Ot.height)return Cn;for(var gr=Ot.colorAttachments,ko=0;ko<gr.length;++ko)Ft(gr[ko],Gn,rr);return Ft(Ot.depthAttachment,Gn,rr),Ft(Ot.stencilAttachment,Gn,rr),Ft(Ot.depthStencilAttachment,Gn,rr),Ot.width=Cn.width=Gn,Ot.height=Cn.height=rr,Et(Ot),Cn}return Cn(Lt,Mt),o(Cn,{resize:nr,_reglType:"framebuffer",_framebuffer:Ot,destroy:function(){Wt(Ot),Tt(Ot)},use:function(un){st.setFBO({framebuffer:Cn},un)}})}function Mn(Lt){var Mt=Array(6);function Ot(nr){var un;re(Mt.indexOf(st.next)<0,"can not update framebuffer which is currently in use");var Qn={color:null},Gn=0,rr=null,gr="rgba",ko="uint8",Bo=1;if(typeof nr=="number")Gn=nr|0;else if(!nr)Gn=1;else{re.type(nr,"object","invalid arguments for framebuffer");var cr=nr;if("shape"in cr){var Wo=cr.shape;re(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),re(Wo[0]===Wo[1],"cube framebuffer must be square"),Gn=Wo[0]}else"radius"in cr&&(Gn=cr.radius|0),"width"in cr?(Gn=cr.width|0,"height"in cr&&re(cr.height===Gn,"must be square")):"height"in cr&&(Gn=cr.height|0);("color"in cr||"colors"in cr)&&(rr=cr.color||cr.colors,Array.isArray(rr)&&re(rr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),rr||("colorCount"in cr&&(Bo=cr.colorCount|0,re(Bo>0,"invalid color buffer count")),"colorType"in cr&&(re.oneOf(cr.colorType,Ct,"invalid color type"),ko=cr.colorType),"colorFormat"in cr&&(gr=cr.colorFormat,re.oneOf(cr.colorFormat,Nt,"invalid color format for texture"))),"depth"in cr&&(Qn.depth=cr.depth),"stencil"in cr&&(Qn.stencil=cr.stencil),"depthStencil"in cr&&(Qn.depthStencil=cr.depthStencil)}var no;if(rr)if(Array.isArray(rr))for(no=[],un=0;un<rr.length;++un)no[un]=rr[un];else no=[rr];else{no=Array(Bo);var No={radius:Gn,format:gr,type:ko};for(un=0;un<Bo;++un)no[un]=nt.createCube(No)}for(Qn.color=Array(no.length),un=0;un<no.length;++un){var Uo=no[un];re(typeof Uo=="function"&&Uo._reglType==="textureCube","invalid cube map"),Gn=Gn||Uo.width,re(Uo.width===Gn&&Uo.height===Gn,"invalid cube map shape"),Qn.color[un]={target:Ra,data:no[un]}}for(un=0;un<6;++un){for(var xo=0;xo<no.length;++xo)Qn.color[xo].target=Ra+un;un>0&&(Qn.depth=Mt[0].depth,Qn.stencil=Mt[0].stencil,Qn.depthStencil=Mt[0].depthStencil),Mt[un]?Mt[un](Qn):Mt[un]=Xt(Qn)}return o(Ot,{width:Gn,height:Gn,color:no})}function Cn(nr){var un,Qn=nr|0;if(re(Qn>0&&Qn<=be.maxCubeMapSize,"invalid radius for cube fbo"),Qn===Ot.width)return Ot;var Gn=Ot.color;for(un=0;un<Gn.length;++un)Gn[un].resize(Qn);for(un=0;un<6;++un)Mt[un].resize(Qn);return Ot.width=Ot.height=Qn,Ot}return Ot(Lt),o(Ot,{faces:Mt,resize:Cn,_reglType:"framebufferCube",destroy:function(){Mt.forEach(function(nr){nr.destroy()})}})}function Wn(){st.cur=null,st.next=null,st.dirty=!0,ii(St).forEach(function(Lt){Lt.framebuffer=$.createFramebuffer(),Et(Lt)})}return o(st,{getFramebuffer:function(Lt){if(typeof Lt=="function"&&Lt._reglType==="framebuffer"){var Mt=Lt._framebuffer;if(Mt instanceof Jt)return Mt}return null},create:Xt,createCube:Mn,clear:function(){ii(St).forEach(Wt)},restore:Wn})}var yh=5126,Wc=34962;function od(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=yh,this.offset=0,this.stride=0,this.divisor=0}function id($,ie,be,nt,dt){for(var Qe=be.maxAttributes,st=new Array(Qe),Nt=0;Nt<Qe;++Nt)st[Nt]=new od;var It=0,Ct={},ct={Record:od,scope:{},state:st,currentVAO:null,targetVAO:null,restore:Ut()?St:function(){},createVAO:Jt,getVAO:wt,destroyBuffer:Gt,setVAO:Ut()?Ye:lt,clear:Ut()?Ft:function(){}};function Gt(Tt){for(var Wt=0;Wt<st.length;++Wt){var Et=st[Wt];Et.buffer===Tt&&($.disableVertexAttribArray(Wt),Et.buffer=null)}}function Ut(){return ie.oes_vertex_array_object}function Rt(){return ie.angle_instanced_arrays}function wt(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null}function Ye(Tt){if(Tt!==ct.currentVAO){var Wt=Ut();Tt?Wt.bindVertexArrayOES(Tt.vao):Wt.bindVertexArrayOES(null),ct.currentVAO=Tt}}function lt(Tt){if(Tt!==ct.currentVAO){if(Tt)Tt.bindAttrs();else for(var Wt=Rt(),Et=0;Et<st.length;++Et){var Xt=st[Et];Xt.buffer?($.enableVertexAttribArray(Et),$.vertexAttribPointer(Et,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Wt&&Xt.divisor&&Wt.vertexAttribDivisorANGLE(Et,Xt.divisor)):($.disableVertexAttribArray(Et),$.vertexAttrib4f(Et,Xt.x,Xt.y,Xt.z,Xt.w))}ct.currentVAO=Tt}}function Ft(){ii(Ct).forEach(function(Tt){Tt.destroy()})}function Kt(){this.id=++It,this.attributes=[];var Tt=Ut();Tt?this.vao=Tt.createVertexArrayOES():this.vao=null,Ct[this.id]=this,this.buffers=[]}Kt.prototype.bindAttrs=function(){for(var Tt=Rt(),Wt=this.attributes,Et=0;Et<Wt.length;++Et){var Xt=Wt[Et];Xt.buffer?($.enableVertexAttribArray(Et),$.bindBuffer(Wc,Xt.buffer.buffer),$.vertexAttribPointer(Et,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),Tt&&Xt.divisor&&Tt.vertexAttribDivisorANGLE(Et,Xt.divisor)):($.disableVertexAttribArray(Et),$.vertexAttrib4f(Et,Xt.x,Xt.y,Xt.z,Xt.w))}for(var Mn=Wt.length;Mn<Qe;++Mn)$.disableVertexAttribArray(Mn)},Kt.prototype.refresh=function(){var Tt=Ut();Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},Kt.prototype.destroy=function(){if(this.vao){var Tt=Ut();this===ct.currentVAO&&(ct.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}Ct[this.id]&&(delete Ct[this.id],nt.vaoCount-=1)};function St(){var Tt=Ut();Tt&&ii(Ct).forEach(function(Wt){Wt.refresh()})}function Jt(Tt){var Wt=new Kt;nt.vaoCount+=1;function Et(Xt){re(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),re(Xt.length<Qe,"too many attributes"),re(Xt.length>0,"must specify at least one attribute");var Mn={},Wn=Wt.attributes;Wn.length=Xt.length;for(var Lt=0;Lt<Xt.length;++Lt){var Mt=Xt[Lt],Ot=Wn[Lt]=new od,Cn=Mt.data||Mt;if(Array.isArray(Cn)||n(Cn)||ji(Cn)){var nr;Wt.buffers[Lt]&&(nr=Wt.buffers[Lt],n(Cn)&&nr._buffer.byteLength>=Cn.byteLength?nr.subdata(Cn):(nr.destroy(),Wt.buffers[Lt]=null)),Wt.buffers[Lt]||(nr=Wt.buffers[Lt]=dt.create(Mt,Wc,!1,!0)),Ot.buffer=dt.getBuffer(nr),Ot.size=Ot.buffer.dimension|0,Ot.normalized=!1,Ot.type=Ot.buffer.dtype,Ot.offset=0,Ot.stride=0,Ot.divisor=0,Ot.state=1,Mn[Lt]=1}else dt.getBuffer(Mt)?(Ot.buffer=dt.getBuffer(Mt),Ot.size=Ot.buffer.dimension|0,Ot.normalized=!1,Ot.type=Ot.buffer.dtype,Ot.offset=0,Ot.stride=0,Ot.divisor=0,Ot.state=1):dt.getBuffer(Mt.buffer)?(Ot.buffer=dt.getBuffer(Mt.buffer),Ot.size=(+Mt.size||Ot.buffer.dimension)|0,Ot.normalized=!!Mt.normalized||!1,"type"in Mt?(re.parameter(Mt.type,Fi,"invalid buffer type"),Ot.type=Fi[Mt.type]):Ot.type=Ot.buffer.dtype,Ot.offset=(Mt.offset||0)|0,Ot.stride=(Mt.stride||0)|0,Ot.divisor=(Mt.divisor||0)|0,Ot.state=1,re(Ot.size>=1&&Ot.size<=4,"size must be between 1 and 4"),re(Ot.offset>=0,"invalid offset"),re(Ot.stride>=0&&Ot.stride<=255,"stride must be between 0 and 255"),re(Ot.divisor>=0,"divisor must be positive"),re(!Ot.divisor||!!ie.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Mt?(re(Lt>0,"first attribute must not be a constant"),Ot.x=+Mt.x||0,Ot.y=+Mt.y||0,Ot.z=+Mt.z||0,Ot.w=+Mt.w||0,Ot.state=2):re(!1,"invalid attribute spec for location "+Lt)}for(var un=0;un<Wt.buffers.length;++un)!Mn[un]&&Wt.buffers[un]&&(Wt.buffers[un].destroy(),Wt.buffers[un]=null);return Wt.refresh(),Et}return Et.destroy=function(){for(var Xt=0;Xt<Wt.buffers.length;++Xt)Wt.buffers[Xt]&&Wt.buffers[Xt].destroy();Wt.buffers.length=0,Wt.destroy()},Et._vao=Wt,Et._reglType="vao",Et(Tt)}return ct}var ad=35632,_u=35633,mh=35718,wu=35721;function cp($,ie,be,nt){var dt={},Qe={};function st(Ye,lt,Ft,Kt){this.name=Ye,this.id=lt,this.location=Ft,this.info=Kt}function Nt(Ye,lt){for(var Ft=0;Ft<Ye.length;++Ft)if(Ye[Ft].id===lt.id){Ye[Ft].location=lt.location;return}Ye.push(lt)}function It(Ye,lt,Ft){var Kt=Ye===ad?dt:Qe,St=Kt[lt];if(!St){var Jt=ie.str(lt);St=$.createShader(Ye),$.shaderSource(St,Jt),$.compileShader(St),re.shaderError($,St,Jt,Ye,Ft),Kt[lt]=St}return St}var Ct={},ct=[],Gt=0;function Ut(Ye,lt){this.id=Gt++,this.fragId=Ye,this.vertId=lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Rt(Ye,lt,Ft){var Kt,St,Jt=It(ad,Ye.fragId),Tt=It(_u,Ye.vertId),Wt=Ye.program=$.createProgram();if($.attachShader(Wt,Jt),$.attachShader(Wt,Tt),Ft)for(Kt=0;Kt<Ft.length;++Kt){var Et=Ft[Kt];$.bindAttribLocation(Wt,Et[0],Et[1])}$.linkProgram(Wt),re.linkError($,Wt,ie.str(Ye.fragId),ie.str(Ye.vertId),lt);var Xt=$.getProgramParameter(Wt,mh);nt.profile&&(Ye.stats.uniformsCount=Xt);var Mn=Ye.uniforms;for(Kt=0;Kt<Xt;++Kt)if(St=$.getActiveUniform(Wt,Kt),St)if(St.size>1)for(var Wn=0;Wn<St.size;++Wn){var Lt=St.name.replace("[0]","["+Wn+"]");Nt(Mn,new st(Lt,ie.id(Lt),$.getUniformLocation(Wt,Lt),St))}else Nt(Mn,new st(St.name,ie.id(St.name),$.getUniformLocation(Wt,St.name),St));var Mt=$.getProgramParameter(Wt,wu);nt.profile&&(Ye.stats.attributesCount=Mt);var Ot=Ye.attributes;for(Kt=0;Kt<Mt;++Kt)St=$.getActiveAttrib(Wt,Kt),St&&Nt(Ot,new st(St.name,ie.id(St.name),$.getAttribLocation(Wt,St.name),St))}nt.profile&&(be.getMaxUniformsCount=function(){var Ye=0;return ct.forEach(function(lt){lt.stats.uniformsCount>Ye&&(Ye=lt.stats.uniformsCount)}),Ye},be.getMaxAttributesCount=function(){var Ye=0;return ct.forEach(function(lt){lt.stats.attributesCount>Ye&&(Ye=lt.stats.attributesCount)}),Ye});function wt(){dt={},Qe={};for(var Ye=0;Ye<ct.length;++Ye)Rt(ct[Ye],null,ct[Ye].attributes.map(function(lt){return[lt.location,lt.name]}))}return{clear:function(){var Ye=$.deleteShader.bind($);ii(dt).forEach(Ye),dt={},ii(Qe).forEach(Ye),Qe={},ct.forEach(function(lt){$.deleteProgram(lt.program)}),ct.length=0,Ct={},be.shaderCount=0},program:function(Ye,lt,Ft,Kt){re.command(Ye>=0,"missing vertex shader",Ft),re.command(lt>=0,"missing fragment shader",Ft);var St=Ct[lt];St||(St=Ct[lt]={});var Jt=St[Ye];if(Jt&&(Jt.refCount++,!Kt))return Jt;var Tt=new Ut(lt,Ye);return be.shaderCount++,Rt(Tt,Ft,Kt),Jt||(St[Ye]=Tt),ct.push(Tt),o(Tt,{destroy:function(){if(Tt.refCount--,Tt.refCount<=0){$.deleteProgram(Tt.program);var Wt=ct.indexOf(Tt);ct.splice(Wt,1),be.shaderCount--}St[Tt.vertId].refCount<=0&&($.deleteShader(Qe[Tt.vertId]),delete Qe[Tt.vertId],delete Ct[Tt.fragId][Tt.vertId]),Object.keys(Ct[Tt.fragId]).length||($.deleteShader(dt[Tt.fragId]),delete dt[Tt.fragId],delete Ct[Tt.fragId])}})},restore:wt,shader:It,frag:-1,vert:-1}}var fp=6408,Qu=5121,ho=3333,zc=5126;function Oo($,ie,be,nt,dt,Qe,st){function Nt(ct){var Gt;ie.next===null?(re(dt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Gt=Qu):(re(ie.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Gt=ie.next.colorAttachments[0].texture._texture.type,Qe.oes_texture_float?(re(Gt===Qu||Gt===zc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Gt===zc&&re(st.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):re(Gt===Qu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,Rt=0,wt=nt.framebufferWidth,Ye=nt.framebufferHeight,lt=null;n(ct)?lt=ct:ct&&(re.type(ct,"object","invalid arguments to regl.read()"),Ut=ct.x|0,Rt=ct.y|0,re(Ut>=0&&Ut<nt.framebufferWidth,"invalid x offset for regl.read"),re(Rt>=0&&Rt<nt.framebufferHeight,"invalid y offset for regl.read"),wt=(ct.width||nt.framebufferWidth-Ut)|0,Ye=(ct.height||nt.framebufferHeight-Rt)|0,lt=ct.data||null),lt&&(Gt===Qu?re(lt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Gt===zc&&re(lt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),re(wt>0&&wt+Ut<=nt.framebufferWidth,"invalid width for read pixels"),re(Ye>0&&Ye+Rt<=nt.framebufferHeight,"invalid height for read pixels"),be();var Ft=wt*Ye*4;return lt||(Gt===Qu?lt=new Uint8Array(Ft):Gt===zc&&(lt=lt||new Float32Array(Ft))),re.isTypedArray(lt,"data buffer for regl.read() must be a typedarray"),re(lt.byteLength>=Ft,"data buffer for regl.read() too small"),$.pixelStorei(ho,4),$.readPixels(Ut,Rt,wt,Ye,fp,Gt,lt),lt}function It(ct){var Gt;return ie.setFBO({framebuffer:ct.framebuffer},function(){Gt=Nt(ct)}),Gt}function Ct(ct){return!ct||!("framebuffer"in ct)?Nt(ct):It(ct)}return Ct}function Hl($){return Array.prototype.slice.call($)}function pi($){return Hl($).join("")}function _l(){var $=0,ie=[],be=[];function nt(Gt){for(var Ut=0;Ut<be.length;++Ut)if(be[Ut]===Gt)return ie[Ut];var Rt="g"+$++;return ie.push(Rt),be.push(Gt),Rt}function dt(){var Gt=[];function Ut(){Gt.push.apply(Gt,Hl(arguments))}var Rt=[];function wt(){var Ye="v"+$++;return Rt.push(Ye),arguments.length>0&&(Gt.push(Ye,"="),Gt.push.apply(Gt,Hl(arguments)),Gt.push(";")),Ye}return o(Ut,{def:wt,toString:function(){return pi([Rt.length>0?"var "+Rt.join(",")+";":"",pi(Gt)])}})}function Qe(){var Gt=dt(),Ut=dt(),Rt=Gt.toString,wt=Ut.toString;function Ye(lt,Ft){Ut(lt,Ft,"=",Gt.def(lt,Ft),";")}return o(function(){Gt.apply(Gt,Hl(arguments))},{def:Gt.def,entry:Gt,exit:Ut,save:Ye,set:function(lt,Ft,Kt){Ye(lt,Ft),Gt(lt,Ft,"=",Kt,";")},toString:function(){return Rt()+wt()}})}function st(){var Gt=pi(arguments),Ut=Qe(),Rt=Qe(),wt=Ut.toString,Ye=Rt.toString;return o(Ut,{then:function(){return Ut.apply(Ut,Hl(arguments)),this},else:function(){return Rt.apply(Rt,Hl(arguments)),this},toString:function(){var lt=Ye();return lt&&(lt="else{"+lt+"}"),pi(["if(",Gt,"){",wt(),"}",lt])}})}var Nt=dt(),It={};function Ct(Gt,Ut){var Rt=[];function wt(){var St="a"+Rt.length;return Rt.push(St),St}Ut=Ut||0;for(var Ye=0;Ye<Ut;++Ye)wt();var lt=Qe(),Ft=lt.toString,Kt=It[Gt]=o(lt,{arg:wt,toString:function(){return pi(["function(",Rt.join(),"){",Ft(),"}"])}});return Kt}function ct(){var Gt=['"use strict";',Nt,"return {"];Object.keys(It).forEach(function(wt){Gt.push('"',wt,'":',It[wt].toString(),",")}),Gt.push("}");var Ut=pi(Gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Rt=Function.apply(null,ie.concat(Ut));return Rt.apply(null,be)}return{global:Nt,link:nt,block:dt,proc:Ct,scope:Qe,cond:st,compile:ct}}var Xl="xyzw".split(""),Eu=5121,es=1,ld=2,ud=0,wl=1,ts=2,sd=3,Hc=4,Ou=5,dp=6,js="dither",cd="blend.enable",Xc="blend.color",El="blend.equation",Is="blend.func",Yc="depth.enable",qc="depth.func",fd="depth.range",dd="depth.mask",Ja="colorMask",pp="cull.enable",hp="cull.face",vp="frontFace",pd="lineWidth",Ol="polygonOffset.enable",Kc="polygonOffset.offset",hd="sample.alpha",vd="sample.enable",Ls="sample.coverage",Yl="stencil.enable",Jn="stencil.mask",Fs="stencil.func",Zc="stencil.opFront",Qa="stencil.opBack",$s="scissor.enable",Bs="scissor.box",To="viewport",Us="profile",xu="framebuffer",Jc="vert",io="frag",$o="elements",ql="primitive",el="count",tl="offset",Su="instances",xl="vao",Vs="Width",Qc="Height",Au=xu+Vs,Gs=xu+Qc,Dt=To+Vs,yp=To+Qc,ns="drawingBuffer",ef=ns+Vs,yd=ns+Qc,mp=[Is,El,Fs,Zc,Qa,Ls,To,Bs,Kc],Sl=34962,gp=34963,nl=35632,Tu=35633,md=3553,gh=34067,bh=2884,_h=3042,bp=3024,_p=2960,wp=2929,Ep=3089,wh=32823,Eh=32926,Oh=32928,Gi=5126,rs=35664,tf=35665,la=35666,Ca=5124,gd=35667,Wi=35668,nf=35669,os=35670,Ws=35671,rf=35672,of=35673,zs=35674,Hs=35675,is=35676,Kl=35678,Qo=35680,af=4,lf=1028,Zl=1029,Op=2304,zi=2305,ei=32775,xh=32776,ja=519,Fn=7680,bd=0,as=1,_d=32774,Sh=513,Xs=36160,Ah=36064,rl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ls={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ol={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Th={frag:nl,vert:Tu},xp={cw:Op,ccw:zi};function Mu($){return Array.isArray($)||n($)||ji($)}function Al($){return $.sort(function(ie,be){return ie===To?-1:be===To?1:ie<be?-1:1})}function Hi($,ie,be,nt){this.thisDep=$,this.contextDep=ie,this.propDep=be,this.append=nt}function Vn($){return $&&!($.thisDep||$.contextDep||$.propDep)}function Mo($){return new Hi(!1,!1,!1,$)}function Di($,ie){var be=$.type;if(be===ud){var nt=$.data.length;return new Hi(!0,nt>=1,nt>=2,ie)}else if(be===Hc){var dt=$.data;return new Hi(dt.thisDep,dt.contextDep,dt.propDep,ie)}else{if(be===Ou)return new Hi(!1,!1,!1,ie);if(be===dp){for(var Qe=!1,st=!1,Nt=!1,It=0;It<$.data.length;++It){var Ct=$.data[It];if(Ct.type===wl)Nt=!0;else if(Ct.type===ts)st=!0;else if(Ct.type===sd)Qe=!0;else if(Ct.type===ud){Qe=!0;var ct=Ct.data;ct>=1&&(st=!0),ct>=2&&(Nt=!0)}else Ct.type===Hc&&(Qe=Qe||Ct.data.thisDep,st=st||Ct.data.contextDep,Nt=Nt||Ct.data.propDep)}return new Hi(Qe,st,Nt,ie)}else return new Hi(be===sd,be===ts,be===wl,ie)}}var ua=new Hi(!1,!1,!1,function(){});function qv($,ie,be,nt,dt,Qe,st,Nt,It,Ct,ct,Gt,Ut,Rt,wt){var Ye=Ct.Record,lt={add:32774,subtract:32778,"reverse subtract":32779};be.ext_blend_minmax&&(lt.min=ei,lt.max=xh);var Ft=be.angle_instanced_arrays,Kt=be.webgl_draw_buffers,St={dirty:!0,profile:wt.profile},Jt={},Tt=[],Wt={},Et={};function Xt(ue){return ue.replace(".","_")}function Mn(ue,ee,Ae){var Ge=Xt(ue);Tt.push(ue),Jt[Ge]=St[Ge]=!!Ae,Wt[Ge]=ee}function Wn(ue,ee,Ae){var Ge=Xt(ue);Tt.push(ue),Array.isArray(Ae)?(St[Ge]=Ae.slice(),Jt[Ge]=Ae.slice()):St[Ge]=Jt[Ge]=Ae,Et[Ge]=ee}Mn(js,bp),Mn(cd,_h),Wn(Xc,"blendColor",[0,0,0,0]),Wn(El,"blendEquationSeparate",[_d,_d]),Wn(Is,"blendFuncSeparate",[as,bd,as,bd]),Mn(Yc,wp,!0),Wn(qc,"depthFunc",Sh),Wn(fd,"depthRange",[0,1]),Wn(dd,"depthMask",!0),Wn(Ja,Ja,[!0,!0,!0,!0]),Mn(pp,bh),Wn(hp,"cullFace",Zl),Wn(vp,vp,zi),Wn(pd,pd,1),Mn(Ol,wh),Wn(Kc,"polygonOffset",[0,0]),Mn(hd,Eh),Mn(vd,Oh),Wn(Ls,"sampleCoverage",[1,!1]),Mn(Yl,_p),Wn(Jn,"stencilMask",-1),Wn(Fs,"stencilFunc",[ja,0,-1]),Wn(Zc,"stencilOpSeparate",[lf,Fn,Fn,Fn]),Wn(Qa,"stencilOpSeparate",[Zl,Fn,Fn,Fn]),Mn($s,Ep),Wn(Bs,"scissor",[0,0,$.drawingBufferWidth,$.drawingBufferHeight]),Wn(To,To,[0,0,$.drawingBufferWidth,$.drawingBufferHeight]);var Lt={gl:$,context:Ut,strings:ie,next:Jt,current:St,draw:Gt,elements:Qe,buffer:dt,shader:ct,attributes:Ct.state,vao:Ct,uniforms:It,framebuffer:Nt,extensions:be,timer:Rt,isBufferArgs:Mu},Mt={primTypes:Ko,compareFuncs:ls,blendFuncs:rl,blendEquations:lt,stencilOps:ol,glTypes:Fi,orientationType:xp};re.optional(function(){Lt.isArrayLike=M}),Kt&&(Mt.backBuffer=[Zl],Mt.drawBuffer=Rr(nt.maxDrawbuffers,function(ue){return ue===0?[0]:Rr(ue,function(ee){return Ah+ee})}));var Ot=0;function Cn(){var ue=_l(),ee=ue.link,Ae=ue.global;ue.id=Ot++,ue.batchId="0";var Ge=ee(Lt),qe=ue.shared={props:"a0"};Object.keys(Lt).forEach(function(we){qe[we]=Ae.def(Ge,".",we)}),re.optional(function(){ue.CHECK=ee(re),ue.commandStr=re.guessCommand(),ue.command=ee(ue.commandStr),ue.assert=function(we,se,Ue){we("if(!(",se,"))",this.CHECK,".commandRaise(",ee(Ue),",",this.command,");")},Mt.invalidBlendCombinations=Ys});var ke=ue.next={},Te=ue.current={};Object.keys(Et).forEach(function(we){Array.isArray(St[we])&&(ke[we]=Ae.def(qe.next,".",we),Te[we]=Ae.def(qe.current,".",we))});var Le=ue.constants={};Object.keys(Mt).forEach(function(we){Le[we]=Ae.def(JSON.stringify(Mt[we]))}),ue.invoke=function(we,se){switch(se.type){case ud:var Ue=["this",qe.context,qe.props,ue.batchId];return we.def(ee(se.data),".call(",Ue.slice(0,Math.max(se.data.length+1,4)),")");case wl:return we.def(qe.props,se.data);case ts:return we.def(qe.context,se.data);case sd:return we.def("this",se.data);case Hc:return se.data.append(ue,we),se.data.ref;case Ou:return se.data.toString();case dp:return se.data.map(function(Ze){return ue.invoke(we,Ze)})}},ue.attribCache={};var de={};return ue.scopeAttrib=function(we){var se=ie.id(we);if(se in de)return de[se];var Ue=Ct.scope[se];Ue||(Ue=Ct.scope[se]=new Ye);var Ze=de[se]=ee(Ue);return Ze},ue}function nr(ue){var ee=ue.static,Ae=ue.dynamic,Ge;if(Us in ee){var qe=!!ee[Us];Ge=Mo(function(Te,Le){return qe}),Ge.enable=qe}else if(Us in Ae){var ke=Ae[Us];Ge=Di(ke,function(Te,Le){return Te.invoke(Le,ke)})}return Ge}function un(ue,ee){var Ae=ue.static,Ge=ue.dynamic;if(xu in Ae){var qe=Ae[xu];return qe?(qe=Nt.getFramebuffer(qe),re.command(qe,"invalid framebuffer object"),Mo(function(Te,Le){var de=Te.link(qe),we=Te.shared;Le.set(we.framebuffer,".next",de);var se=we.context;return Le.set(se,"."+Au,de+".width"),Le.set(se,"."+Gs,de+".height"),de})):Mo(function(Te,Le){var de=Te.shared;Le.set(de.framebuffer,".next","null");var we=de.context;return Le.set(we,"."+Au,we+"."+ef),Le.set(we,"."+Gs,we+"."+yd),"null"})}else if(xu in Ge){var ke=Ge[xu];return Di(ke,function(Te,Le){var de=Te.invoke(Le,ke),we=Te.shared,se=we.framebuffer,Ue=Le.def(se,".getFramebuffer(",de,")");re.optional(function(){Te.assert(Le,"!"+de+"||"+Ue,"invalid framebuffer object")}),Le.set(se,".next",Ue);var Ze=we.context;return Le.set(Ze,"."+Au,Ue+"?"+Ue+".width:"+Ze+"."+ef),Le.set(Ze,"."+Gs,Ue+"?"+Ue+".height:"+Ze+"."+yd),Ue})}else return null}function Qn(ue,ee,Ae){var Ge=ue.static,qe=ue.dynamic;function ke(de){if(de in Ge){var we=Ge[de];re.commandType(we,"object","invalid "+de,Ae.commandStr);var se=!0,Ue=we.x|0,Ze=we.y|0,d,m;return"width"in we?(d=we.width|0,re.command(d>=0,"invalid "+de,Ae.commandStr)):se=!1,"height"in we?(m=we.height|0,re.command(m>=0,"invalid "+de,Ae.commandStr)):se=!1,new Hi(!se&&ee&&ee.thisDep,!se&&ee&&ee.contextDep,!se&&ee&&ee.propDep,function(V,J){var pe=V.shared.context,_e=d;"width"in we||(_e=J.def(pe,".",Au,"-",Ue));var Fe=m;return"height"in we||(Fe=J.def(pe,".",Gs,"-",Ze)),[Ue,Ze,_e,Fe]})}else if(de in qe){var E=qe[de],D=Di(E,function(V,J){var pe=V.invoke(J,E);re.optional(function(){V.assert(J,pe+"&&typeof "+pe+'==="object"',"invalid "+de)});var _e=V.shared.context,Fe=J.def(pe,".x|0"),pt=J.def(pe,".y|0"),gt=J.def('"width" in ',pe,"?",pe,".width|0:","(",_e,".",Au,"-",Fe,")"),Vt=J.def('"height" in ',pe,"?",pe,".height|0:","(",_e,".",Gs,"-",pt,")");return re.optional(function(){V.assert(J,gt+">=0&&"+Vt+">=0","invalid "+de)}),[Fe,pt,gt,Vt]});return ee&&(D.thisDep=D.thisDep||ee.thisDep,D.contextDep=D.contextDep||ee.contextDep,D.propDep=D.propDep||ee.propDep),D}else return ee?new Hi(ee.thisDep,ee.contextDep,ee.propDep,function(V,J){var pe=V.shared.context;return[0,0,J.def(pe,".",Au),J.def(pe,".",Gs)]}):null}var Te=ke(To);if(Te){var Le=Te;Te=new Hi(Te.thisDep,Te.contextDep,Te.propDep,function(de,we){var se=Le.append(de,we),Ue=de.shared.context;return we.set(Ue,"."+Dt,se[2]),we.set(Ue,"."+yp,se[3]),se})}return{viewport:Te,scissor_box:ke(Bs)}}function Gn(ue,ee){var Ae=ue.static,Ge=typeof Ae[io]=="string"&&typeof Ae[Jc]=="string";if(Ge){if(Object.keys(ee.dynamic).length>0)return null;var qe=ee.static,ke=Object.keys(qe);if(ke.length>0&&typeof qe[ke[0]]=="number"){for(var Te=[],Le=0;Le<ke.length;++Le)re(typeof qe[ke[Le]]=="number","must specify all vertex attribute locations when using vaos"),Te.push([qe[ke[Le]]|0,ke[Le]]);return Te}}return null}function rr(ue,ee,Ae){var Ge=ue.static,qe=ue.dynamic;function ke(se){if(se in Ge){var Ue=ie.id(Ge[se]);re.optional(function(){ct.shader(Th[se],Ue,re.guessCommand())});var Ze=Mo(function(){return Ue});return Ze.id=Ue,Ze}else if(se in qe){var d=qe[se];return Di(d,function(m,E){var D=m.invoke(E,d),V=E.def(m.shared.strings,".id(",D,")");return re.optional(function(){E(m.shared.shader,".shader(",Th[se],",",V,",",m.command,");")}),V})}return null}var Te=ke(io),Le=ke(Jc),de=null,we;return Vn(Te)&&Vn(Le)?(de=ct.program(Le.id,Te.id,null,Ae),we=Mo(function(se,Ue){return se.link(de)})):we=new Hi(Te&&Te.thisDep||Le&&Le.thisDep,Te&&Te.contextDep||Le&&Le.contextDep,Te&&Te.propDep||Le&&Le.propDep,function(se,Ue){var Ze=se.shared.shader,d;Te?d=Te.append(se,Ue):d=Ue.def(Ze,".",io);var m;Le?m=Le.append(se,Ue):m=Ue.def(Ze,".",Jc);var E=Ze+".program("+m+","+d;return re.optional(function(){E+=","+se.command}),Ue.def(E+")")}),{frag:Te,vert:Le,progVar:we,program:de}}function gr(ue,ee){var Ae=ue.static,Ge=ue.dynamic;function qe(){if($o in Ae){var se=Ae[$o];Mu(se)?se=Qe.getElements(Qe.create(se,!0)):se&&(se=Qe.getElements(se),re.command(se,"invalid elements",ee.commandStr));var Ue=Mo(function(d,m){if(se){var E=d.link(se);return d.ELEMENTS=E,E}return d.ELEMENTS=null,null});return Ue.value=se,Ue}else if($o in Ge){var Ze=Ge[$o];return Di(Ze,function(d,m){var E=d.shared,D=E.isBufferArgs,V=E.elements,J=d.invoke(m,Ze),pe=m.def("null"),_e=m.def(D,"(",J,")"),Fe=d.cond(_e).then(pe,"=",V,".createStream(",J,");").else(pe,"=",V,".getElements(",J,");");return re.optional(function(){d.assert(Fe.else,"!"+J+"||"+pe,"invalid elements")}),m.entry(Fe),m.exit(d.cond(_e).then(V,".destroyStream(",pe,");")),d.ELEMENTS=pe,pe})}return null}var ke=qe();function Te(){if(ql in Ae){var se=Ae[ql];return re.commandParameter(se,Ko,"invalid primitve",ee.commandStr),Mo(function(Ze,d){return Ko[se]})}else if(ql in Ge){var Ue=Ge[ql];return Di(Ue,function(Ze,d){var m=Ze.constants.primTypes,E=Ze.invoke(d,Ue);return re.optional(function(){Ze.assert(d,E+" in "+m,"invalid primitive, must be one of "+Object.keys(Ko))}),d.def(m,"[",E,"]")})}else if(ke)return Vn(ke)?ke.value?Mo(function(Ze,d){return d.def(Ze.ELEMENTS,".primType")}):Mo(function(){return af}):new Hi(ke.thisDep,ke.contextDep,ke.propDep,function(Ze,d){var m=Ze.ELEMENTS;return d.def(m,"?",m,".primType:",af)});return null}function Le(se,Ue){if(se in Ae){var Ze=Ae[se]|0;return re.command(!Ue||Ze>=0,"invalid "+se,ee.commandStr),Mo(function(m,E){return Ue&&(m.OFFSET=Ze),Ze})}else if(se in Ge){var d=Ge[se];return Di(d,function(m,E){var D=m.invoke(E,d);return Ue&&(m.OFFSET=D,re.optional(function(){m.assert(E,D+">=0","invalid "+se)})),D})}else if(Ue&&ke)return Mo(function(m,E){return m.OFFSET="0",0});return null}var de=Le(tl,!0);function we(){if(el in Ae){var se=Ae[el]|0;return re.command(typeof se=="number"&&se>=0,"invalid vertex count",ee.commandStr),Mo(function(){return se})}else if(el in Ge){var Ue=Ge[el];return Di(Ue,function(m,E){var D=m.invoke(E,Ue);return re.optional(function(){m.assert(E,"typeof "+D+'==="number"&&'+D+">=0&&"+D+"===("+D+"|0)","invalid vertex count")}),D})}else if(ke)if(Vn(ke)){if(ke)return de?new Hi(de.thisDep,de.contextDep,de.propDep,function(m,E){var D=E.def(m.ELEMENTS,".vertCount-",m.OFFSET);return re.optional(function(){m.assert(E,D+">=0","invalid vertex offset/element buffer too small")}),D}):Mo(function(m,E){return E.def(m.ELEMENTS,".vertCount")});var Ze=Mo(function(){return-1});return re.optional(function(){Ze.MISSING=!0}),Ze}else{var d=new Hi(ke.thisDep||de.thisDep,ke.contextDep||de.contextDep,ke.propDep||de.propDep,function(m,E){var D=m.ELEMENTS;return m.OFFSET?E.def(D,"?",D,".vertCount-",m.OFFSET,":-1"):E.def(D,"?",D,".vertCount:-1")});return re.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:ke,primitive:Te(),count:we(),instances:Le(Su,!1),offset:de}}function ko(ue,ee){var Ae=ue.static,Ge=ue.dynamic,qe={};return Tt.forEach(function(ke){var Te=Xt(ke);function Le(de,we){if(ke in Ae){var se=de(Ae[ke]);qe[Te]=Mo(function(){return se})}else if(ke in Ge){var Ue=Ge[ke];qe[Te]=Di(Ue,function(Ze,d){return we(Ze,d,Ze.invoke(d,Ue))})}}switch(ke){case pp:case cd:case js:case Yl:case Yc:case $s:case Ol:case hd:case vd:case dd:return Le(function(de){return re.commandType(de,"boolean",ke,ee.commandStr),de},function(de,we,se){return re.optional(function(){de.assert(we,"typeof "+se+'==="boolean"',"invalid flag "+ke,de.commandStr)}),se});case qc:return Le(function(de){return re.commandParameter(de,ls,"invalid "+ke,ee.commandStr),ls[de]},function(de,we,se){var Ue=de.constants.compareFuncs;return re.optional(function(){de.assert(we,se+" in "+Ue,"invalid "+ke+", must be one of "+Object.keys(ls))}),we.def(Ue,"[",se,"]")});case fd:return Le(function(de){return re.command(M(de)&&de.length===2&&typeof de[0]=="number"&&typeof de[1]=="number"&&de[0]<=de[1],"depth range is 2d array",ee.commandStr),de},function(de,we,se){re.optional(function(){de.assert(we,de.shared.isArrayLike+"("+se+")&&"+se+".length===2&&typeof "+se+'[0]==="number"&&typeof '+se+'[1]==="number"&&'+se+"[0]<="+se+"[1]","depth range must be a 2d array")});var Ue=we.def("+",se,"[0]"),Ze=we.def("+",se,"[1]");return[Ue,Ze]});case Is:return Le(function(de){re.commandType(de,"object","blend.func",ee.commandStr);var we="srcRGB"in de?de.srcRGB:de.src,se="srcAlpha"in de?de.srcAlpha:de.src,Ue="dstRGB"in de?de.dstRGB:de.dst,Ze="dstAlpha"in de?de.dstAlpha:de.dst;return re.commandParameter(we,rl,Te+".srcRGB",ee.commandStr),re.commandParameter(se,rl,Te+".srcAlpha",ee.commandStr),re.commandParameter(Ue,rl,Te+".dstRGB",ee.commandStr),re.commandParameter(Ze,rl,Te+".dstAlpha",ee.commandStr),re.command(Ys.indexOf(we+", "+Ue)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+we+", "+Ue+")",ee.commandStr),[rl[we],rl[Ue],rl[se],rl[Ze]]},function(de,we,se){var Ue=de.constants.blendFuncs;re.optional(function(){de.assert(we,se+"&&typeof "+se+'==="object"',"invalid blend func, must be an object")});function Ze(pe,_e){var Fe=we.def('"',pe,_e,'" in ',se,"?",se,".",pe,_e,":",se,".",pe);return re.optional(function(){de.assert(we,Fe+" in "+Ue,"invalid "+ke+"."+pe+_e+", must be one of "+Object.keys(rl))}),Fe}var d=Ze("src","RGB"),m=Ze("dst","RGB");re.optional(function(){var pe=de.constants.invalidBlendCombinations;de.assert(we,pe+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var E=we.def(Ue,"[",d,"]"),D=we.def(Ue,"[",Ze("src","Alpha"),"]"),V=we.def(Ue,"[",m,"]"),J=we.def(Ue,"[",Ze("dst","Alpha"),"]");return[E,V,D,J]});case El:return Le(function(de){if(typeof de=="string")return re.commandParameter(de,lt,"invalid "+ke,ee.commandStr),[lt[de],lt[de]];if(typeof de=="object")return re.commandParameter(de.rgb,lt,ke+".rgb",ee.commandStr),re.commandParameter(de.alpha,lt,ke+".alpha",ee.commandStr),[lt[de.rgb],lt[de.alpha]];re.commandRaise("invalid blend.equation",ee.commandStr)},function(de,we,se){var Ue=de.constants.blendEquations,Ze=we.def(),d=we.def(),m=de.cond("typeof ",se,'==="string"');return re.optional(function(){function E(D,V,J){de.assert(D,J+" in "+Ue,"invalid "+V+", must be one of "+Object.keys(lt))}E(m.then,ke,se),de.assert(m.else,se+"&&typeof "+se+'==="object"',"invalid "+ke),E(m.else,ke+".rgb",se+".rgb"),E(m.else,ke+".alpha",se+".alpha")}),m.then(Ze,"=",d,"=",Ue,"[",se,"];"),m.else(Ze,"=",Ue,"[",se,".rgb];",d,"=",Ue,"[",se,".alpha];"),we(m),[Ze,d]});case Xc:return Le(function(de){return re.command(M(de)&&de.length===4,"blend.color must be a 4d array",ee.commandStr),Rr(4,function(we){return+de[we]})},function(de,we,se){return re.optional(function(){de.assert(we,de.shared.isArrayLike+"("+se+")&&"+se+".length===4","blend.color must be a 4d array")}),Rr(4,function(Ue){return we.def("+",se,"[",Ue,"]")})});case Jn:return Le(function(de){return re.commandType(de,"number",Te,ee.commandStr),de|0},function(de,we,se){return re.optional(function(){de.assert(we,"typeof "+se+'==="number"',"invalid stencil.mask")}),we.def(se,"|0")});case Fs:return Le(function(de){re.commandType(de,"object",Te,ee.commandStr);var we=de.cmp||"keep",se=de.ref||0,Ue="mask"in de?de.mask:-1;return re.commandParameter(we,ls,ke+".cmp",ee.commandStr),re.commandType(se,"number",ke+".ref",ee.commandStr),re.commandType(Ue,"number",ke+".mask",ee.commandStr),[ls[we],se,Ue]},function(de,we,se){var Ue=de.constants.compareFuncs;re.optional(function(){function E(){de.assert(we,Array.prototype.join.call(arguments,""),"invalid stencil.func")}E(se+"&&typeof ",se,'==="object"'),E('!("cmp" in ',se,")||(",se,".cmp in ",Ue,")")});var Ze=we.def('"cmp" in ',se,"?",Ue,"[",se,".cmp]",":",Fn),d=we.def(se,".ref|0"),m=we.def('"mask" in ',se,"?",se,".mask|0:-1");return[Ze,d,m]});case Zc:case Qa:return Le(function(de){re.commandType(de,"object",Te,ee.commandStr);var we=de.fail||"keep",se=de.zfail||"keep",Ue=de.zpass||"keep";return re.commandParameter(we,ol,ke+".fail",ee.commandStr),re.commandParameter(se,ol,ke+".zfail",ee.commandStr),re.commandParameter(Ue,ol,ke+".zpass",ee.commandStr),[ke===Qa?Zl:lf,ol[we],ol[se],ol[Ue]]},function(de,we,se){var Ue=de.constants.stencilOps;re.optional(function(){de.assert(we,se+"&&typeof "+se+'==="object"',"invalid "+ke)});function Ze(d){return re.optional(function(){de.assert(we,'!("'+d+'" in '+se+")||("+se+"."+d+" in "+Ue+")","invalid "+ke+"."+d+", must be one of "+Object.keys(ol))}),we.def('"',d,'" in ',se,"?",Ue,"[",se,".",d,"]:",Fn)}return[ke===Qa?Zl:lf,Ze("fail"),Ze("zfail"),Ze("zpass")]});case Kc:return Le(function(de){re.commandType(de,"object",Te,ee.commandStr);var we=de.factor|0,se=de.units|0;return re.commandType(we,"number",Te+".factor",ee.commandStr),re.commandType(se,"number",Te+".units",ee.commandStr),[we,se]},function(de,we,se){re.optional(function(){de.assert(we,se+"&&typeof "+se+'==="object"',"invalid "+ke)});var Ue=we.def(se,".factor|0"),Ze=we.def(se,".units|0");return[Ue,Ze]});case hp:return Le(function(de){var we=0;return de==="front"?we=lf:de==="back"&&(we=Zl),re.command(!!we,Te,ee.commandStr),we},function(de,we,se){return re.optional(function(){de.assert(we,se+'==="front"||'+se+'==="back"',"invalid cull.face")}),we.def(se,'==="front"?',lf,":",Zl)});case pd:return Le(function(de){return re.command(typeof de=="number"&&de>=nt.lineWidthDims[0]&&de<=nt.lineWidthDims[1],"invalid line width, must be a positive number between "+nt.lineWidthDims[0]+" and "+nt.lineWidthDims[1],ee.commandStr),de},function(de,we,se){return re.optional(function(){de.assert(we,"typeof "+se+'==="number"&&'+se+">="+nt.lineWidthDims[0]+"&&"+se+"<="+nt.lineWidthDims[1],"invalid line width")}),se});case vp:return Le(function(de){return re.commandParameter(de,xp,Te,ee.commandStr),xp[de]},function(de,we,se){return re.optional(function(){de.assert(we,se+'==="cw"||'+se+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),we.def(se+'==="cw"?'+Op+":"+zi)});case Ja:return Le(function(de){return re.command(M(de)&&de.length===4,"color.mask must be length 4 array",ee.commandStr),de.map(function(we){return!!we})},function(de,we,se){return re.optional(function(){de.assert(we,de.shared.isArrayLike+"("+se+")&&"+se+".length===4","invalid color.mask")}),Rr(4,function(Ue){return"!!"+se+"["+Ue+"]"})});case Ls:return Le(function(de){re.command(typeof de=="object"&&de,Te,ee.commandStr);var we="value"in de?de.value:1,se=!!de.invert;return re.command(typeof we=="number"&&we>=0&&we<=1,"sample.coverage.value must be a number between 0 and 1",ee.commandStr),[we,se]},function(de,we,se){re.optional(function(){de.assert(we,se+"&&typeof "+se+'==="object"',"invalid sample.coverage")});var Ue=we.def('"value" in ',se,"?+",se,".value:1"),Ze=we.def("!!",se,".invert");return[Ue,Ze]})}}),qe}function Bo(ue,ee){var Ae=ue.static,Ge=ue.dynamic,qe={};return Object.keys(Ae).forEach(function(ke){var Te=Ae[ke],Le;if(typeof Te=="number"||typeof Te=="boolean")Le=Mo(function(){return Te});else if(typeof Te=="function"){var de=Te._reglType;de==="texture2d"||de==="textureCube"?Le=Mo(function(we){return we.link(Te)}):de==="framebuffer"||de==="framebufferCube"?(re.command(Te.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ke+'"',ee.commandStr),Le=Mo(function(we){return we.link(Te.color[0])})):re.commandRaise('invalid data for uniform "'+ke+'"',ee.commandStr)}else M(Te)?Le=Mo(function(we){var se=we.global.def("[",Rr(Te.length,function(Ue){return re.command(typeof Te[Ue]=="number"||typeof Te[Ue]=="boolean","invalid uniform "+ke,we.commandStr),Te[Ue]}),"]");return se}):re.commandRaise('invalid or missing data for uniform "'+ke+'"',ee.commandStr);Le.value=Te,qe[ke]=Le}),Object.keys(Ge).forEach(function(ke){var Te=Ge[ke];qe[ke]=Di(Te,function(Le,de){return Le.invoke(de,Te)})}),qe}function cr(ue,ee){var Ae=ue.static,Ge=ue.dynamic,qe={};return Object.keys(Ae).forEach(function(ke){var Te=Ae[ke],Le=ie.id(ke),de=new Ye;if(Mu(Te))de.state=es,de.buffer=dt.getBuffer(dt.create(Te,Sl,!1,!0)),de.type=0;else{var we=dt.getBuffer(Te);if(we)de.state=es,de.buffer=we,de.type=0;else if(re.command(typeof Te=="object"&&Te,"invalid data for attribute "+ke,ee.commandStr),"constant"in Te){var se=Te.constant;de.buffer="null",de.state=ld,typeof se=="number"?de.x=se:(re.command(M(se)&&se.length>0&&se.length<=4,"invalid constant for attribute "+ke,ee.commandStr),Xl.forEach(function(V,J){J<se.length&&(de[V]=se[J])}))}else{Mu(Te.buffer)?we=dt.getBuffer(dt.create(Te.buffer,Sl,!1,!0)):we=dt.getBuffer(Te.buffer),re.command(!!we,'missing buffer for attribute "'+ke+'"',ee.commandStr);var Ue=Te.offset|0;re.command(Ue>=0,'invalid offset for attribute "'+ke+'"',ee.commandStr);var Ze=Te.stride|0;re.command(Ze>=0&&Ze<256,'invalid stride for attribute "'+ke+'", must be integer betweeen [0, 255]',ee.commandStr);var d=Te.size|0;re.command(!("size"in Te)||d>0&&d<=4,'invalid size for attribute "'+ke+'", must be 1,2,3,4',ee.commandStr);var m=!!Te.normalized,E=0;"type"in Te&&(re.commandParameter(Te.type,Fi,"invalid type for attribute "+ke,ee.commandStr),E=Fi[Te.type]);var D=Te.divisor|0;"divisor"in Te&&(re.command(D===0||Ft,'cannot specify divisor for attribute "'+ke+'", instancing not supported',ee.commandStr),re.command(D>=0,'invalid divisor for attribute "'+ke+'"',ee.commandStr)),re.optional(function(){var V=ee.commandStr,J=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Te).forEach(function(pe){re.command(J.indexOf(pe)>=0,'unknown parameter "'+pe+'" for attribute pointer "'+ke+'" (valid parameters are '+J+")",V)})}),de.buffer=we,de.state=es,de.size=d,de.normalized=m,de.type=E||we.dtype,de.offset=Ue,de.stride=Ze,de.divisor=D}}qe[ke]=Mo(function(V,J){var pe=V.attribCache;if(Le in pe)return pe[Le];var _e={isStream:!1};return Object.keys(de).forEach(function(Fe){_e[Fe]=de[Fe]}),de.buffer&&(_e.buffer=V.link(de.buffer),_e.type=_e.type||_e.buffer+".dtype"),pe[Le]=_e,_e})}),Object.keys(Ge).forEach(function(ke){var Te=Ge[ke];function Le(de,we){var se=de.invoke(we,Te),Ue=de.shared,Ze=de.constants,d=Ue.isBufferArgs,m=Ue.buffer;re.optional(function(){de.assert(we,se+"&&(typeof "+se+'==="object"||typeof '+se+'==="function")&&('+d+"("+se+")||"+m+".getBuffer("+se+")||"+m+".getBuffer("+se+".buffer)||"+d+"("+se+'.buffer)||("constant" in '+se+"&&(typeof "+se+'.constant==="number"||'+Ue.isArrayLike+"("+se+".constant))))",'invalid dynamic attribute "'+ke+'"')});var E={isStream:we.def(!1)},D=new Ye;D.state=es,Object.keys(D).forEach(function(_e){E[_e]=we.def(""+D[_e])});var V=E.buffer,J=E.type;we("if(",d,"(",se,")){",E.isStream,"=true;",V,"=",m,".createStream(",Sl,",",se,");",J,"=",V,".dtype;","}else{",V,"=",m,".getBuffer(",se,");","if(",V,"){",J,"=",V,".dtype;",'}else if("constant" in ',se,"){",E.state,"=",ld,";","if(typeof "+se+'.constant === "number"){',E[Xl[0]],"=",se,".constant;",Xl.slice(1).map(function(_e){return E[_e]}).join("="),"=0;","}else{",Xl.map(function(_e,Fe){return E[_e]+"="+se+".constant.length>"+Fe+"?"+se+".constant["+Fe+"]:0;"}).join(""),"}}else{","if(",d,"(",se,".buffer)){",V,"=",m,".createStream(",Sl,",",se,".buffer);","}else{",V,"=",m,".getBuffer(",se,".buffer);","}",J,'="type" in ',se,"?",Ze.glTypes,"[",se,".type]:",V,".dtype;",E.normalized,"=!!",se,".normalized;");function pe(_e){we(E[_e],"=",se,".",_e,"|0;")}return pe("size"),pe("offset"),pe("stride"),pe("divisor"),we("}}"),we.exit("if(",E.isStream,"){",m,".destroyStream(",V,");","}"),E}qe[ke]=Di(Te,Le)}),qe}function Wo(ue,ee){var Ae=ue.static,Ge=ue.dynamic;if(xl in Ae){var qe=Ae[xl];return qe!==null&&Ct.getVAO(qe)===null&&(qe=Ct.createVAO(qe)),Mo(function(Te){return Te.link(Ct.getVAO(qe))})}else if(xl in Ge){var ke=Ge[xl];return Di(ke,function(Te,Le){var de=Te.invoke(Le,ke);return Le.def(Te.shared.vao+".getVAO("+de+")")})}return null}function no(ue){var ee=ue.static,Ae=ue.dynamic,Ge={};return Object.keys(ee).forEach(function(qe){var ke=ee[qe];Ge[qe]=Mo(function(Te,Le){return typeof ke=="number"||typeof ke=="boolean"?""+ke:Te.link(ke)})}),Object.keys(Ae).forEach(function(qe){var ke=Ae[qe];Ge[qe]=Di(ke,function(Te,Le){return Te.invoke(Le,ke)})}),Ge}function No(ue,ee,Ae,Ge,qe){var ke=ue.static,Te=ue.dynamic;re.optional(function(){var pe=[xu,Jc,io,$o,ql,tl,el,Su,Us,xl].concat(Tt);function _e(Fe){Object.keys(Fe).forEach(function(pt){re.command(pe.indexOf(pt)>=0,'unknown parameter "'+pt+'"',qe.commandStr)})}_e(ke),_e(Te)});var Le=Gn(ue,ee),de=un(ue),we=Qn(ue,de,qe),se=gr(ue,qe),Ue=ko(ue,qe),Ze=rr(ue,qe,Le);function d(pe){var _e=we[pe];_e&&(Ue[pe]=_e)}d(To),d(Xt(Bs));var m=Object.keys(Ue).length>0,E={framebuffer:de,draw:se,shader:Ze,state:Ue,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(E.profile=nr(ue),E.uniforms=Bo(Ae,qe),E.drawVAO=E.scopeVAO=Wo(ue),!E.drawVAO&&Ze.program&&!Le&&be.angle_instanced_arrays){var D=!0,V=Ze.program.attributes.map(function(pe){var _e=ee.static[pe];return D=D&&!!_e,_e});if(D&&V.length>0){var J=Ct.getVAO(Ct.createVAO(V));E.drawVAO=new Hi(null,null,null,function(pe,_e){return pe.link(J)}),E.useVAO=!0}}return Le?E.useVAO=!0:E.attributes=cr(ee,qe),E.context=no(Ge),E}function Uo(ue,ee,Ae){var Ge=ue.shared,qe=Ge.context,ke=ue.scope();Object.keys(Ae).forEach(function(Te){ee.save(qe,"."+Te);var Le=Ae[Te],de=Le.append(ue,ee);Array.isArray(de)?ke(qe,".",Te,"=[",de.join(),"];"):ke(qe,".",Te,"=",de,";")}),ee(ke)}function xo(ue,ee,Ae,Ge){var qe=ue.shared,ke=qe.gl,Te=qe.framebuffer,Le;Kt&&(Le=ee.def(qe.extensions,".webgl_draw_buffers"));var de=ue.constants,we=de.drawBuffer,se=de.backBuffer,Ue;Ae?Ue=Ae.append(ue,ee):Ue=ee.def(Te,".next"),Ge||ee("if(",Ue,"!==",Te,".cur){"),ee("if(",Ue,"){",ke,".bindFramebuffer(",Xs,",",Ue,".framebuffer);"),Kt&&ee(Le,".drawBuffersWEBGL(",we,"[",Ue,".colorAttachments.length]);"),ee("}else{",ke,".bindFramebuffer(",Xs,",null);"),Kt&&ee(Le,".drawBuffersWEBGL(",se,");"),ee("}",Te,".cur=",Ue,";"),Ge||ee("}")}function go(ue,ee,Ae){var Ge=ue.shared,qe=Ge.gl,ke=ue.current,Te=ue.next,Le=Ge.current,de=Ge.next,we=ue.cond(Le,".dirty");Tt.forEach(function(se){var Ue=Xt(se);if(!(Ue in Ae.state)){var Ze,d;if(Ue in Te){Ze=Te[Ue],d=ke[Ue];var m=Rr(St[Ue].length,function(D){return we.def(Ze,"[",D,"]")});we(ue.cond(m.map(function(D,V){return D+"!=="+d+"["+V+"]"}).join("||")).then(qe,".",Et[Ue],"(",m,");",m.map(function(D,V){return d+"["+V+"]="+D}).join(";"),";"))}else{Ze=we.def(de,".",Ue);var E=ue.cond(Ze,"!==",Le,".",Ue);we(E),Ue in Wt?E(ue.cond(Ze).then(qe,".enable(",Wt[Ue],");").else(qe,".disable(",Wt[Ue],");"),Le,".",Ue,"=",Ze,";"):E(qe,".",Et[Ue],"(",Ze,");",Le,".",Ue,"=",Ze,";")}}}),Object.keys(Ae.state).length===0&&we(Le,".dirty=false;"),ee(we)}function ni(ue,ee,Ae,Ge){var qe=ue.shared,ke=ue.current,Te=qe.current,Le=qe.gl;Al(Object.keys(Ae)).forEach(function(de){var we=Ae[de];if(!(Ge&&!Ge(we))){var se=we.append(ue,ee);if(Wt[de]){var Ue=Wt[de];Vn(we)?se?ee(Le,".enable(",Ue,");"):ee(Le,".disable(",Ue,");"):ee(ue.cond(se).then(Le,".enable(",Ue,");").else(Le,".disable(",Ue,");")),ee(Te,".",de,"=",se,";")}else if(M(se)){var Ze=ke[de];ee(Le,".",Et[de],"(",se,");",se.map(function(d,m){return Ze+"["+m+"]="+d}).join(";"),";")}else ee(Le,".",Et[de],"(",se,");",Te,".",de,"=",se,";")}})}function So(ue,ee){Ft&&(ue.instancing=ee.def(ue.shared.extensions,".angle_instanced_arrays"))}function Zn(ue,ee,Ae,Ge,qe){var ke=ue.shared,Te=ue.stats,Le=ke.current,de=ke.timer,we=Ae.profile;function se(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ue,Ze;function d(pe){Ue=ee.def(),pe(Ue,"=",se(),";"),typeof qe=="string"?pe(Te,".count+=",qe,";"):pe(Te,".count++;"),Rt&&(Ge?(Ze=ee.def(),pe(Ze,"=",de,".getNumPendingQueries();")):pe(de,".beginQuery(",Te,");"))}function m(pe){pe(Te,".cpuTime+=",se(),"-",Ue,";"),Rt&&(Ge?pe(de,".pushScopeStats(",Ze,",",de,".getNumPendingQueries(),",Te,");"):pe(de,".endQuery();"))}function E(pe){var _e=ee.def(Le,".profile");ee(Le,".profile=",pe,";"),ee.exit(Le,".profile=",_e,";")}var D;if(we){if(Vn(we)){we.enable?(d(ee),m(ee.exit),E("true")):E("false");return}D=we.append(ue,ee),E(D)}else D=ee.def(Le,".profile");var V=ue.block();d(V),ee("if(",D,"){",V,"}");var J=ue.block();m(J),ee.exit("if(",D,"){",J,"}")}function ui(ue,ee,Ae,Ge,qe){var ke=ue.shared;function Te(de){switch(de){case rs:case gd:case Ws:return 2;case tf:case Wi:case rf:return 3;case la:case nf:case of:return 4;default:return 1}}function Le(de,we,se){var Ue=ke.gl,Ze=ee.def(de,".location"),d=ee.def(ke.attributes,"[",Ze,"]"),m=se.state,E=se.buffer,D=[se.x,se.y,se.z,se.w],V=["buffer","normalized","offset","stride"];function J(){ee("if(!",d,".buffer){",Ue,".enableVertexAttribArray(",Ze,");}");var _e=se.type,Fe;if(se.size?Fe=ee.def(se.size,"||",we):Fe=we,ee("if(",d,".type!==",_e,"||",d,".size!==",Fe,"||",V.map(function(gt){return d+"."+gt+"!=="+se[gt]}).join("||"),"){",Ue,".bindBuffer(",Sl,",",E,".buffer);",Ue,".vertexAttribPointer(",[Ze,Fe,_e,se.normalized,se.stride,se.offset],");",d,".type=",_e,";",d,".size=",Fe,";",V.map(function(gt){return d+"."+gt+"="+se[gt]+";"}).join(""),"}"),Ft){var pt=se.divisor;ee("if(",d,".divisor!==",pt,"){",ue.instancing,".vertexAttribDivisorANGLE(",[Ze,pt],");",d,".divisor=",pt,";}")}}function pe(){ee("if(",d,".buffer){",Ue,".disableVertexAttribArray(",Ze,");",d,".buffer=null;","}if(",Xl.map(function(_e,Fe){return d+"."+_e+"!=="+D[Fe]}).join("||"),"){",Ue,".vertexAttrib4f(",Ze,",",D,");",Xl.map(function(_e,Fe){return d+"."+_e+"="+D[Fe]+";"}).join(""),"}")}m===es?J():m===ld?pe():(ee("if(",m,"===",es,"){"),J(),ee("}else{"),pe(),ee("}"))}Ge.forEach(function(de){var we=de.name,se=Ae.attributes[we],Ue;if(se){if(!qe(se))return;Ue=se.append(ue,ee)}else{if(!qe(ua))return;var Ze=ue.scopeAttrib(we);re.optional(function(){ue.assert(ee,Ze+".state","missing attribute "+we)}),Ue={},Object.keys(new Ye).forEach(function(d){Ue[d]=ee.def(Ze,".",d)})}Le(ue.link(de),Te(de.info.type),Ue)})}function Nr(ue,ee,Ae,Ge,qe){for(var ke=ue.shared,Te=ke.gl,Le,de=0;de<Ge.length;++de){var we=Ge[de],se=we.name,Ue=we.info.type,Ze=Ae.uniforms[se],d=ue.link(we),m=d+".location",E;if(Ze){if(!qe(Ze))continue;if(Vn(Ze)){var D=Ze.value;if(re.command(D!==null&&typeof D<"u",'missing uniform "'+se+'"',ue.commandStr),Ue===Kl||Ue===Qo){re.command(typeof D=="function"&&(Ue===Kl&&(D._reglType==="texture2d"||D._reglType==="framebuffer")||Ue===Qo&&(D._reglType==="textureCube"||D._reglType==="framebufferCube")),"invalid texture for uniform "+se,ue.commandStr);var V=ue.link(D._texture||D.color[0]._texture);ee(Te,".uniform1i(",m,",",V+".bind());"),ee.exit(V,".unbind();")}else if(Ue===zs||Ue===Hs||Ue===is){re.optional(function(){re.command(M(D),"invalid matrix for uniform "+se,ue.commandStr),re.command(Ue===zs&&D.length===4||Ue===Hs&&D.length===9||Ue===is&&D.length===16,"invalid length for matrix uniform "+se,ue.commandStr)});var J=ue.global.def("new Float32Array(["+Array.prototype.slice.call(D)+"])"),pe=2;Ue===Hs?pe=3:Ue===is&&(pe=4),ee(Te,".uniformMatrix",pe,"fv(",m,",false,",J,");")}else{switch(Ue){case Gi:re.commandType(D,"number","uniform "+se,ue.commandStr),Le="1f";break;case rs:re.command(M(D)&&D.length===2,"uniform "+se,ue.commandStr),Le="2f";break;case tf:re.command(M(D)&&D.length===3,"uniform "+se,ue.commandStr),Le="3f";break;case la:re.command(M(D)&&D.length===4,"uniform "+se,ue.commandStr),Le="4f";break;case os:re.commandType(D,"boolean","uniform "+se,ue.commandStr),Le="1i";break;case Ca:re.commandType(D,"number","uniform "+se,ue.commandStr),Le="1i";break;case Ws:re.command(M(D)&&D.length===2,"uniform "+se,ue.commandStr),Le="2i";break;case gd:re.command(M(D)&&D.length===2,"uniform "+se,ue.commandStr),Le="2i";break;case rf:re.command(M(D)&&D.length===3,"uniform "+se,ue.commandStr),Le="3i";break;case Wi:re.command(M(D)&&D.length===3,"uniform "+se,ue.commandStr),Le="3i";break;case of:re.command(M(D)&&D.length===4,"uniform "+se,ue.commandStr),Le="4i";break;case nf:re.command(M(D)&&D.length===4,"uniform "+se,ue.commandStr),Le="4i";break}ee(Te,".uniform",Le,"(",m,",",M(D)?Array.prototype.slice.call(D):D,");")}continue}else E=Ze.append(ue,ee)}else{if(!qe(ua))continue;E=ee.def(ke.uniforms,"[",ie.id(se),"]")}Ue===Kl?(re(!Array.isArray(E),"must specify a scalar prop for textures"),ee("if(",E,"&&",E,'._reglType==="framebuffer"){',E,"=",E,".color[0];","}")):Ue===Qo&&(re(!Array.isArray(E),"must specify a scalar prop for cube maps"),ee("if(",E,"&&",E,'._reglType==="framebufferCube"){',E,"=",E,".color[0];","}")),re.optional(function(){function Vt(kt,Qt){ue.assert(ee,kt,'bad data or missing for uniform "'+se+'".  '+Qt)}function An(kt){re(!Array.isArray(E),"must not specify an array type for uniform"),Vt("typeof "+E+'==="'+kt+'"',"invalid type, expected "+kt)}function On(kt,Qt){Array.isArray(E)?re(E.length===kt,"must have length "+kt):Vt(ke.isArrayLike+"("+E+")&&"+E+".length==="+kt,"invalid vector, should have length "+kt,ue.commandStr)}function Yn(kt){re(!Array.isArray(E),"must not specify a value type"),Vt("typeof "+E+'==="function"&&'+E+'._reglType==="texture'+(kt===md?"2d":"Cube")+'"',"invalid texture type",ue.commandStr)}switch(Ue){case Ca:An("number");break;case gd:On(2);break;case Wi:On(3);break;case nf:On(4);break;case Gi:An("number");break;case rs:On(2);break;case tf:On(3);break;case la:On(4);break;case os:An("boolean");break;case Ws:On(2);break;case rf:On(3);break;case of:On(4);break;case zs:On(4);break;case Hs:On(9);break;case is:On(16);break;case Kl:Yn(md);break;case Qo:Yn(gh);break}});var _e=1;switch(Ue){case Kl:case Qo:var Fe=ee.def(E,"._texture");ee(Te,".uniform1i(",m,",",Fe,".bind());"),ee.exit(Fe,".unbind();");continue;case Ca:case os:Le="1i";break;case gd:case Ws:Le="2i",_e=2;break;case Wi:case rf:Le="3i",_e=3;break;case nf:case of:Le="4i",_e=4;break;case Gi:Le="1f";break;case rs:Le="2f",_e=2;break;case tf:Le="3f",_e=3;break;case la:Le="4f",_e=4;break;case zs:Le="Matrix2fv";break;case Hs:Le="Matrix3fv";break;case is:Le="Matrix4fv";break}if(ee(Te,".uniform",Le,"(",m,","),Le.charAt(0)==="M"){var pt=Math.pow(Ue-zs+2,2),gt=ue.global.def("new Float32Array(",pt,")");Array.isArray(E)?ee("false,(",Rr(pt,function(Vt){return gt+"["+Vt+"]="+E[Vt]}),",",gt,")"):ee("false,(Array.isArray(",E,")||",E," instanceof Float32Array)?",E,":(",Rr(pt,function(Vt){return gt+"["+Vt+"]="+E+"["+Vt+"]"}),",",gt,")")}else _e>1?ee(Rr(_e,function(Vt){return Array.isArray(E)?E[Vt]:E+"["+Vt+"]"})):(re(!Array.isArray(E),"uniform value must not be an array"),ee(E));ee(");")}}function Rn(ue,ee,Ae,Ge){var qe=ue.shared,ke=qe.gl,Te=qe.draw,Le=Ge.draw;function de(){var Fe=Le.elements,pt,gt=ee;return Fe?((Fe.contextDep&&Ge.contextDynamic||Fe.propDep)&&(gt=Ae),pt=Fe.append(ue,gt)):pt=gt.def(Te,".",$o),pt&&gt("if("+pt+")"+ke+".bindBuffer("+gp+","+pt+".buffer.buffer);"),pt}function we(){var Fe=Le.count,pt,gt=ee;return Fe?((Fe.contextDep&&Ge.contextDynamic||Fe.propDep)&&(gt=Ae),pt=Fe.append(ue,gt),re.optional(function(){Fe.MISSING&&ue.assert(ee,"false","missing vertex count"),Fe.DYNAMIC&&ue.assert(gt,pt+">=0","missing vertex count")})):(pt=gt.def(Te,".",el),re.optional(function(){ue.assert(gt,pt+">=0","missing vertex count")})),pt}var se=de();function Ue(Fe){var pt=Le[Fe];return pt?pt.contextDep&&Ge.contextDynamic||pt.propDep?pt.append(ue,Ae):pt.append(ue,ee):ee.def(Te,".",Fe)}var Ze=Ue(ql),d=Ue(tl),m=we();if(typeof m=="number"){if(m===0)return}else Ae("if(",m,"){"),Ae.exit("}");var E,D;Ft&&(E=Ue(Su),D=ue.instancing);var V=se+".type",J=Le.elements&&Vn(Le.elements);function pe(){function Fe(){Ae(D,".drawElementsInstancedANGLE(",[Ze,m,V,d+"<<(("+V+"-"+Eu+")>>1)",E],");")}function pt(){Ae(D,".drawArraysInstancedANGLE(",[Ze,d,m,E],");")}se?J?Fe():(Ae("if(",se,"){"),Fe(),Ae("}else{"),pt(),Ae("}")):pt()}function _e(){function Fe(){Ae(ke+".drawElements("+[Ze,m,V,d+"<<(("+V+"-"+Eu+")>>1)"]+");")}function pt(){Ae(ke+".drawArrays("+[Ze,d,m]+");")}se?J?Fe():(Ae("if(",se,"){"),Fe(),Ae("}else{"),pt(),Ae("}")):pt()}Ft&&(typeof E!="number"||E>=0)?typeof E=="string"?(Ae("if(",E,">0){"),pe(),Ae("}else if(",E,"<0){"),_e(),Ae("}")):pe():_e()}function fr(ue,ee,Ae,Ge,qe){var ke=Cn(),Te=ke.proc("body",qe);return re.optional(function(){ke.commandStr=ee.commandStr,ke.command=ke.link(ee.commandStr)}),Ft&&(ke.instancing=Te.def(ke.shared.extensions,".angle_instanced_arrays")),ue(ke,Te,Ae,Ge),ke.compile().body}function zn(ue,ee,Ae,Ge){So(ue,ee),Ae.useVAO?Ae.drawVAO?ee(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,ee),");"):ee(ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"):(ee(ue.shared.vao,".setVAO(null);"),ui(ue,ee,Ae,Ge.attributes,function(){return!0})),Nr(ue,ee,Ae,Ge.uniforms,function(){return!0}),Rn(ue,ee,ee,Ae)}function co(ue,ee){var Ae=ue.proc("draw",1);So(ue,Ae),Uo(ue,Ae,ee.context),xo(ue,Ae,ee.framebuffer),go(ue,Ae,ee),ni(ue,Ae,ee.state),Zn(ue,Ae,ee,!1,!0);var Ge=ee.shader.progVar.append(ue,Ae);if(Ae(ue.shared.gl,".useProgram(",Ge,".program);"),ee.shader.program)zn(ue,Ae,ee,ee.shader.program);else{Ae(ue.shared.vao,".setVAO(null);");var qe=ue.global.def("{}"),ke=Ae.def(Ge,".id"),Te=Ae.def(qe,"[",ke,"]");Ae(ue.cond(Te).then(Te,".call(this,a0);").else(Te,"=",qe,"[",ke,"]=",ue.link(function(Le){return fr(zn,ue,ee,Le,1)}),"(",Ge,");",Te,".call(this,a0);"))}Object.keys(ee.state).length>0&&Ae(ue.shared.current,".dirty=true;")}function La(ue,ee,Ae,Ge){ue.batchId="a1",So(ue,ee);function qe(){return!0}ui(ue,ee,Ae,Ge.attributes,qe),Nr(ue,ee,Ae,Ge.uniforms,qe),Rn(ue,ee,ee,Ae)}function Ql(ue,ee,Ae,Ge){So(ue,ee);var qe=Ae.contextDep,ke=ee.def(),Te="a0",Le="a1",de=ee.def();ue.shared.props=de,ue.batchId=ke;var we=ue.scope(),se=ue.scope();ee(we.entry,"for(",ke,"=0;",ke,"<",Le,";++",ke,"){",de,"=",Te,"[",ke,"];",se,"}",we.exit);function Ue(V){return V.contextDep&&qe||V.propDep}function Ze(V){return!Ue(V)}if(Ae.needsContext&&Uo(ue,se,Ae.context),Ae.needsFramebuffer&&xo(ue,se,Ae.framebuffer),ni(ue,se,Ae.state,Ue),Ae.profile&&Ue(Ae.profile)&&Zn(ue,se,Ae,!1,!0),Ge)Ae.useVAO?Ae.drawVAO?Ue(Ae.drawVAO)?se(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,se),");"):we(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,we),");"):we(ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"):(we(ue.shared.vao,".setVAO(null);"),ui(ue,we,Ae,Ge.attributes,Ze),ui(ue,se,Ae,Ge.attributes,Ue)),Nr(ue,we,Ae,Ge.uniforms,Ze),Nr(ue,se,Ae,Ge.uniforms,Ue),Rn(ue,we,se,Ae);else{var d=ue.global.def("{}"),m=Ae.shader.progVar.append(ue,se),E=se.def(m,".id"),D=se.def(d,"[",E,"]");se(ue.shared.gl,".useProgram(",m,".program);","if(!",D,"){",D,"=",d,"[",E,"]=",ue.link(function(V){return fr(La,ue,Ae,V,2)}),"(",m,");}",D,".call(this,a0[",ke,"],",ke,");")}}function ve(ue,ee){var Ae=ue.proc("batch",2);ue.batchId="0",So(ue,Ae);var Ge=!1,qe=!0;Object.keys(ee.context).forEach(function(d){Ge=Ge||ee.context[d].propDep}),Ge||(Uo(ue,Ae,ee.context),qe=!1);var ke=ee.framebuffer,Te=!1;ke?(ke.propDep?Ge=Te=!0:ke.contextDep&&Ge&&(Te=!0),Te||xo(ue,Ae,ke)):xo(ue,Ae,null),ee.state.viewport&&ee.state.viewport.propDep&&(Ge=!0);function Le(d){return d.contextDep&&Ge||d.propDep}go(ue,Ae,ee),ni(ue,Ae,ee.state,function(d){return!Le(d)}),(!ee.profile||!Le(ee.profile))&&Zn(ue,Ae,ee,!1,"a1"),ee.contextDep=Ge,ee.needsContext=qe,ee.needsFramebuffer=Te;var de=ee.shader.progVar;if(de.contextDep&&Ge||de.propDep)Ql(ue,Ae,ee,null);else{var we=de.append(ue,Ae);if(Ae(ue.shared.gl,".useProgram(",we,".program);"),ee.shader.program)Ql(ue,Ae,ee,ee.shader.program);else{Ae(ue.shared.vao,".setVAO(null);");var se=ue.global.def("{}"),Ue=Ae.def(we,".id"),Ze=Ae.def(se,"[",Ue,"]");Ae(ue.cond(Ze).then(Ze,".call(this,a0,a1);").else(Ze,"=",se,"[",Ue,"]=",ue.link(function(d){return fr(Ql,ue,ee,d,2)}),"(",we,");",Ze,".call(this,a0,a1);"))}}Object.keys(ee.state).length>0&&Ae(ue.shared.current,".dirty=true;")}function rt(ue,ee){var Ae=ue.proc("scope",3);ue.batchId="a2";var Ge=ue.shared,qe=Ge.current;Uo(ue,Ae,ee.context),ee.framebuffer&&ee.framebuffer.append(ue,Ae),Al(Object.keys(ee.state)).forEach(function(Te){var Le=ee.state[Te],de=Le.append(ue,Ae);M(de)?de.forEach(function(we,se){Ae.set(ue.next[Te],"["+se+"]",we)}):Ae.set(Ge.next,"."+Te,de)}),Zn(ue,Ae,ee,!0,!0),[$o,tl,el,Su,ql].forEach(function(Te){var Le=ee.draw[Te];Le&&Ae.set(Ge.draw,"."+Te,""+Le.append(ue,Ae))}),Object.keys(ee.uniforms).forEach(function(Te){var Le=ee.uniforms[Te].append(ue,Ae);Array.isArray(Le)&&(Le="["+Le.join()+"]"),Ae.set(Ge.uniforms,"["+ie.id(Te)+"]",Le)}),Object.keys(ee.attributes).forEach(function(Te){var Le=ee.attributes[Te].append(ue,Ae),de=ue.scopeAttrib(Te);Object.keys(new Ye).forEach(function(we){Ae.set(de,"."+we,Le[we])})}),ee.scopeVAO&&Ae.set(Ge.vao,".targetVAO",ee.scopeVAO.append(ue,Ae));function ke(Te){var Le=ee.shader[Te];Le&&Ae.set(Ge.shader,"."+Te,Le.append(ue,Ae))}ke(Jc),ke(io),Object.keys(ee.state).length>0&&(Ae(qe,".dirty=true;"),Ae.exit(qe,".dirty=true;")),Ae("a1(",ue.shared.context,",a0,",ue.batchId,");")}function Je(ue){if(!(typeof ue!="object"||M(ue))){for(var ee=Object.keys(ue),Ae=0;Ae<ee.length;++Ae)if(qt.isDynamic(ue[ee[Ae]]))return!0;return!1}}function tn(ue,ee,Ae){var Ge=ee.static[Ae];if(!Ge||!Je(Ge))return;var qe=ue.global,ke=Object.keys(Ge),Te=!1,Le=!1,de=!1,we=ue.global.def("{}");ke.forEach(function(Ue){var Ze=Ge[Ue];if(qt.isDynamic(Ze)){typeof Ze=="function"&&(Ze=Ge[Ue]=qt.unbox(Ze));var d=Di(Ze,null);Te=Te||d.thisDep,de=de||d.propDep,Le=Le||d.contextDep}else{switch(qe(we,".",Ue,"="),typeof Ze){case"number":qe(Ze);break;case"string":qe('"',Ze,'"');break;case"object":Array.isArray(Ze)&&qe("[",Ze.join(),"]");break;default:qe(ue.link(Ze));break}qe(";")}});function se(Ue,Ze){ke.forEach(function(d){var m=Ge[d];if(qt.isDynamic(m)){var E=Ue.invoke(Ze,m);Ze(we,".",d,"=",E,";")}})}ee.dynamic[Ae]=new qt.DynamicVariable(Hc,{thisDep:Te,contextDep:Le,propDep:de,ref:we,append:se}),delete ee.static[Ae]}function hr(ue,ee,Ae,Ge,qe){var ke=Cn();ke.stats=ke.link(qe),Object.keys(ee.static).forEach(function(Le){tn(ke,ee,Le)}),mp.forEach(function(Le){tn(ke,ue,Le)});var Te=No(ue,ee,Ae,Ge,ke);return co(ke,Te),rt(ke,Te),ve(ke,Te),o(ke.compile(),{destroy:function(){Te.shader.program.destroy()}})}return{next:Jt,current:St,procs:function(){var ue=Cn(),ee=ue.proc("poll"),Ae=ue.proc("refresh"),Ge=ue.block();ee(Ge),Ae(Ge);var qe=ue.shared,ke=qe.gl,Te=qe.next,Le=qe.current;Ge(Le,".dirty=false;"),xo(ue,ee),xo(ue,Ae,null,!0);var de;Ft&&(de=ue.link(Ft)),be.oes_vertex_array_object&&Ae(ue.link(be.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var we=0;we<nt.maxAttributes;++we){var se=Ae.def(qe.attributes,"[",we,"]"),Ue=ue.cond(se,".buffer");Ue.then(ke,".enableVertexAttribArray(",we,");",ke,".bindBuffer(",Sl,",",se,".buffer.buffer);",ke,".vertexAttribPointer(",we,",",se,".size,",se,".type,",se,".normalized,",se,".stride,",se,".offset);").else(ke,".disableVertexAttribArray(",we,");",ke,".vertexAttrib4f(",we,",",se,".x,",se,".y,",se,".z,",se,".w);",se,".buffer=null;"),Ae(Ue),Ft&&Ae(de,".vertexAttribDivisorANGLE(",we,",",se,".divisor);")}return Ae(ue.shared.vao,".currentVAO=null;",ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"),Object.keys(Wt).forEach(function(Ze){var d=Wt[Ze],m=Ge.def(Te,".",Ze),E=ue.block();E("if(",m,"){",ke,".enable(",d,")}else{",ke,".disable(",d,")}",Le,".",Ze,"=",m,";"),Ae(E),ee("if(",m,"!==",Le,".",Ze,"){",E,"}")}),Object.keys(Et).forEach(function(Ze){var d=Et[Ze],m=St[Ze],E,D,V=ue.block();if(V(ke,".",d,"("),M(m)){var J=m.length;E=ue.global.def(Te,".",Ze),D=ue.global.def(Le,".",Ze),V(Rr(J,function(pe){return E+"["+pe+"]"}),");",Rr(J,function(pe){return D+"["+pe+"]="+E+"["+pe+"];"}).join("")),ee("if(",Rr(J,function(pe){return E+"["+pe+"]!=="+D+"["+pe+"]"}).join("||"),"){",V,"}")}else E=Ge.def(Te,".",Ze),D=Ge.def(Le,".",Ze),V(E,");",Le,".",Ze,"=",E,";"),ee("if(",E,"!==",D,"){",V,"}");Ae(V)}),ue.compile()}(),compile:hr}}function Mh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Pu=34918,mr=34919,Ph=35007,sa=function($,ie){if(!ie.ext_disjoint_timer_query)return null;var be=[];function nt(){return be.pop()||ie.ext_disjoint_timer_query.createQueryEXT()}function dt(Ft){be.push(Ft)}var Qe=[];function st(Ft){var Kt=nt();ie.ext_disjoint_timer_query.beginQueryEXT(Ph,Kt),Qe.push(Kt),Rt(Qe.length-1,Qe.length,Ft)}function Nt(){ie.ext_disjoint_timer_query.endQueryEXT(Ph)}function It(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ct=[];function ct(){return Ct.pop()||new It}function Gt(Ft){Ct.push(Ft)}var Ut=[];function Rt(Ft,Kt,St){var Jt=ct();Jt.startQueryIndex=Ft,Jt.endQueryIndex=Kt,Jt.sum=0,Jt.stats=St,Ut.push(Jt)}var wt=[],Ye=[];function lt(){var Ft,Kt,St=Qe.length;if(St!==0){Ye.length=Math.max(Ye.length,St+1),wt.length=Math.max(wt.length,St+1),wt[0]=0,Ye[0]=0;var Jt=0;for(Ft=0,Kt=0;Kt<Qe.length;++Kt){var Tt=Qe[Kt];ie.ext_disjoint_timer_query.getQueryObjectEXT(Tt,mr)?(Jt+=ie.ext_disjoint_timer_query.getQueryObjectEXT(Tt,Pu),dt(Tt)):Qe[Ft++]=Tt,wt[Kt+1]=Jt,Ye[Kt+1]=Ft}for(Qe.length=Ft,Ft=0,Kt=0;Kt<Ut.length;++Kt){var Wt=Ut[Kt],Et=Wt.startQueryIndex,Xt=Wt.endQueryIndex;Wt.sum+=wt[Xt]-wt[Et];var Mn=Ye[Et],Wn=Ye[Xt];Wn===Mn?(Wt.stats.gpuTime+=Wt.sum/1e6,Gt(Wt)):(Wt.startQueryIndex=Mn,Wt.endQueryIndex=Wn,Ut[Ft++]=Wt)}Ut.length=Ft}}return{beginQuery:st,endQuery:Nt,pushScopeStats:Rt,update:lt,getNumPendingQueries:function(){return Qe.length},clear:function(){be.push.apply(be,Qe);for(var Ft=0;Ft<be.length;Ft++)ie.ext_disjoint_timer_query.deleteQueryEXT(be[Ft]);Qe.length=0,be.length=0},restore:function(){Qe.length=0,be.length=0}}},ti=16384,Ia=256,Kv=1024,uf=34962,Tl="webglcontextlost",Sp="webglcontextrestored",Jl=1,to=2,Po=3;function Oi($,ie){for(var be=0;be<$.length;++be)if($[be]===ie)return be;return-1}function sf($){var ie=ir($);if(!ie)return null;var be=ie.gl,nt=be.getContextAttributes(),dt=be.isContextLost(),Qe=Kr(be,ie);if(!Qe)return null;var st=oi(),Nt=Mh(),It=Qe.extensions,Ct=sa(be,It),ct=_r(),Gt=be.drawingBufferWidth,Ut=be.drawingBufferHeight,Rt={tick:0,time:0,viewportWidth:Gt,viewportHeight:Ut,framebufferWidth:Gt,framebufferHeight:Ut,drawingBufferWidth:Gt,drawingBufferHeight:Ut,pixelRatio:ie.pixelRatio},wt={},Ye={elements:null,primitive:4,count:-1,offset:0,instances:-1},lt=Ac(be,It),Ft=ya(be,Nt,ie,St),Kt=id(be,It,lt,Nt,Ft);function St(Rn){return Kt.destroyBuffer(Rn)}var Jt=fn(be,It,Ft,Nt),Tt=cp(be,st,Nt,ie),Wt=Er(be,It,lt,function(){Mn.procs.poll()},Rt,Nt,ie),Et=Ds(be,It,lt,Nt,ie),Xt=Gc(be,It,lt,Wt,Et,Nt),Mn=qv(be,st,It,lt,Ft,Jt,Wt,Xt,wt,Kt,Tt,Ye,Rt,Ct,ie),Wn=Oo(be,Xt,Mn.procs.poll,Rt,nt,It,lt),Lt=Mn.next,Mt=be.canvas,Ot=[],Cn=[],nr=[],un=[ie.onDestroy],Qn=null;function Gn(){if(Ot.length===0){Ct&&Ct.update(),Qn=null;return}Qn=kn.next(Gn),ni();for(var Rn=Ot.length-1;Rn>=0;--Rn){var fr=Ot[Rn];fr&&fr(Rt,null,0)}be.flush(),Ct&&Ct.update()}function rr(){!Qn&&Ot.length>0&&(Qn=kn.next(Gn))}function gr(){Qn&&(kn.cancel(Gn),Qn=null)}function ko(Rn){Rn.preventDefault(),dt=!0,gr(),Cn.forEach(function(fr){fr()})}function Bo(Rn){be.getError(),dt=!1,Qe.restore(),Tt.restore(),Ft.restore(),Wt.restore(),Et.restore(),Xt.restore(),Kt.restore(),Ct&&Ct.restore(),Mn.procs.refresh(),rr(),nr.forEach(function(fr){fr()})}Mt&&(Mt.addEventListener(Tl,ko,!1),Mt.addEventListener(Sp,Bo,!1));function cr(){Ot.length=0,gr(),Mt&&(Mt.removeEventListener(Tl,ko),Mt.removeEventListener(Sp,Bo)),Tt.clear(),Xt.clear(),Et.clear(),Wt.clear(),Jt.clear(),Ft.clear(),Kt.clear(),Ct&&Ct.clear(),un.forEach(function(Rn){Rn()})}function Wo(Rn){re(!!Rn,"invalid args to regl({...})"),re.type(Rn,"object","invalid args to regl({...})");function fr(qe){var ke=o({},qe);delete ke.uniforms,delete ke.attributes,delete ke.context,delete ke.vao,"stencil"in ke&&ke.stencil.op&&(ke.stencil.opBack=ke.stencil.opFront=ke.stencil.op,delete ke.stencil.op);function Te(Le){if(Le in ke){var de=ke[Le];delete ke[Le],Object.keys(de).forEach(function(we){ke[Le+"."+we]=de[we]})}}return Te("blend"),Te("depth"),Te("cull"),Te("stencil"),Te("polygonOffset"),Te("scissor"),Te("sample"),"vao"in qe&&(ke.vao=qe.vao),ke}function zn(qe,ke){var Te={},Le={};return Object.keys(qe).forEach(function(de){var we=qe[de];if(qt.isDynamic(we)){Le[de]=qt.unbox(we,de);return}else if(ke&&Array.isArray(we)){for(var se=0;se<we.length;++se)if(qt.isDynamic(we[se])){Le[de]=qt.unbox(we,de);return}}Te[de]=we}),{dynamic:Le,static:Te}}var co=zn(Rn.context||{},!0),La=zn(Rn.uniforms||{},!0),Ql=zn(Rn.attributes||{},!1),ve=zn(fr(Rn),!1),rt={gpuTime:0,cpuTime:0,count:0},Je=Mn.compile(ve,Ql,La,co,rt),tn=Je.draw,hr=Je.batch,ue=Je.scope,ee=[];function Ae(qe){for(;ee.length<qe;)ee.push(null);return ee}function Ge(qe,ke){var Te;if(dt&&re.raise("context lost"),typeof qe=="function")return ue.call(this,null,qe,0);if(typeof ke=="function")if(typeof qe=="number")for(Te=0;Te<qe;++Te)ue.call(this,null,ke,Te);else if(Array.isArray(qe))for(Te=0;Te<qe.length;++Te)ue.call(this,qe[Te],ke,Te);else return ue.call(this,qe,ke,0);else if(typeof qe=="number"){if(qe>0)return hr.call(this,Ae(qe|0),qe|0)}else if(Array.isArray(qe)){if(qe.length)return hr.call(this,qe,qe.length)}else return tn.call(this,qe)}return o(Ge,{stats:rt,destroy:function(){Je.destroy()}})}var no=Xt.setFBO=Wo({framebuffer:qt.define.call(null,Jl,"framebuffer")});function No(Rn,fr){var zn=0;Mn.procs.poll();var co=fr.color;co&&(be.clearColor(+co[0]||0,+co[1]||0,+co[2]||0,+co[3]||0),zn|=ti),"depth"in fr&&(be.clearDepth(+fr.depth),zn|=Ia),"stencil"in fr&&(be.clearStencil(fr.stencil|0),zn|=Kv),re(!!zn,"called regl.clear with no buffer specified"),be.clear(zn)}function Uo(Rn){if(re(typeof Rn=="object"&&Rn,"regl.clear() takes an object as input"),"framebuffer"in Rn)if(Rn.framebuffer&&Rn.framebuffer_reglType==="framebufferCube")for(var fr=0;fr<6;++fr)no(o({framebuffer:Rn.framebuffer.faces[fr]},Rn),No);else no(Rn,No);else No(null,Rn)}function xo(Rn){re.type(Rn,"function","regl.frame() callback must be a function"),Ot.push(Rn);function fr(){var zn=Oi(Ot,Rn);re(zn>=0,"cannot cancel a frame twice");function co(){var La=Oi(Ot,co);Ot[La]=Ot[Ot.length-1],Ot.length-=1,Ot.length<=0&&gr()}Ot[zn]=co}return rr(),{cancel:fr}}function go(){var Rn=Lt.viewport,fr=Lt.scissor_box;Rn[0]=Rn[1]=fr[0]=fr[1]=0,Rt.viewportWidth=Rt.framebufferWidth=Rt.drawingBufferWidth=Rn[2]=fr[2]=be.drawingBufferWidth,Rt.viewportHeight=Rt.framebufferHeight=Rt.drawingBufferHeight=Rn[3]=fr[3]=be.drawingBufferHeight}function ni(){Rt.tick+=1,Rt.time=Zn(),go(),Mn.procs.poll()}function So(){Wt.refresh(),go(),Mn.procs.refresh(),Ct&&Ct.update()}function Zn(){return(_r()-ct)/1e3}So();function ui(Rn,fr){re.type(fr,"function","listener callback must be a function");var zn;switch(Rn){case"frame":return xo(fr);case"lost":zn=Cn;break;case"restore":zn=nr;break;case"destroy":zn=un;break;default:re.raise("invalid event, must be one of frame,lost,restore,destroy")}return zn.push(fr),{cancel:function(){for(var co=0;co<zn.length;++co)if(zn[co]===fr){zn[co]=zn[zn.length-1],zn.pop();return}}}}var Nr=o(Wo,{clear:Uo,prop:qt.define.bind(null,Jl),context:qt.define.bind(null,to),this:qt.define.bind(null,Po),draw:Wo({}),buffer:function(Rn){return Ft.create(Rn,uf,!1,!1)},elements:function(Rn){return Jt.create(Rn,!1)},texture:Wt.create2D,cube:Wt.createCube,renderbuffer:Et.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:Kt.createVAO,attributes:nt,frame:xo,on:ui,limits:lt,hasExtension:function(Rn){return lt.extensions.indexOf(Rn.toLowerCase())>=0},read:Wn,destroy:cr,_gl:be,_refresh:So,poll:function(){ni(),Ct&&Ct.update()},now:Zn,stats:Nt});return ie.onDone(null,Nr),Nr}return sf})})(wte);var _f,hy,wf,Du,vy,Pd,yy,dg,ac,Fp,Oa,lc,uc,pg;_f={},an(_f,on.POINTS,"points"),an(_f,on.LINES,"lines"),an(_f,on.LINE_LOOP,"line loop"),an(_f,on.LINE_STRIP,"line strip"),an(_f,on.TRIANGLES,"triangles"),an(_f,on.TRIANGLE_FAN,"triangle fan"),an(_f,on.TRIANGLE_STRIP,"triangle strip");hy={},an(hy,on.STATIC_DRAW,"static"),an(hy,on.DYNAMIC_DRAW,"dynamic"),an(hy,on.STREAM_DRAW,"stream");wf={},an(wf,on.BYTE,"int8"),an(wf,on.UNSIGNED_INT,"int16"),an(wf,on.INT,"int32"),an(wf,on.UNSIGNED_BYTE,"uint8"),an(wf,on.UNSIGNED_SHORT,"uint16"),an(wf,on.UNSIGNED_INT,"uint32"),an(wf,on.FLOAT,"float");Du={},an(Du,on.ALPHA,"alpha"),an(Du,on.LUMINANCE,"luminance"),an(Du,on.LUMINANCE_ALPHA,"luminance alpha"),an(Du,on.RGB,"rgb"),an(Du,on.RGBA,"rgba"),an(Du,on.RGBA4,"rgba4"),an(Du,on.RGB5_A1,"rgb5 a1"),an(Du,on.RGB565,"rgb565"),an(Du,on.DEPTH_COMPONENT,"depth"),an(Du,on.DEPTH_STENCIL,"depth stencil");vy={},an(vy,on.DONT_CARE,"dont care"),an(vy,on.NICEST,"nice"),an(vy,on.FASTEST,"fast");Pd={},an(Pd,on.NEAREST,"nearest"),an(Pd,on.LINEAR,"linear"),an(Pd,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(Pd,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(Pd,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(Pd,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");yy={},an(yy,on.REPEAT,"repeat"),an(yy,on.CLAMP_TO_EDGE,"clamp"),an(yy,on.MIRRORED_REPEAT,"mirror");dg={},an(dg,on.NONE,"none"),an(dg,on.BROWSER_DEFAULT_WEBGL,"browser");ac={},an(ac,on.NEVER,"never"),an(ac,on.ALWAYS,"always"),an(ac,on.LESS,"less"),an(ac,on.LEQUAL,"lequal"),an(ac,on.GREATER,"greater"),an(ac,on.GEQUAL,"gequal"),an(ac,on.EQUAL,"equal"),an(ac,on.NOTEQUAL,"notequal");Fp={},an(Fp,on.FUNC_ADD,"add"),an(Fp,on.MIN_EXT,"min"),an(Fp,on.MAX_EXT,"max"),an(Fp,on.FUNC_SUBTRACT,"subtract"),an(Fp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");Oa={},an(Oa,on.ZERO,"zero"),an(Oa,on.ONE,"one"),an(Oa,on.SRC_COLOR,"src color"),an(Oa,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(Oa,on.SRC_ALPHA,"src alpha"),an(Oa,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(Oa,on.DST_COLOR,"dst color"),an(Oa,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(Oa,on.DST_ALPHA,"dst alpha"),an(Oa,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(Oa,on.CONSTANT_COLOR,"constant color"),an(Oa,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(Oa,on.CONSTANT_ALPHA,"constant alpha"),an(Oa,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(Oa,on.SRC_ALPHA_SATURATE,"src alpha saturate");lc={},an(lc,on.NEVER,"never"),an(lc,on.ALWAYS,"always"),an(lc,on.LESS,"less"),an(lc,on.LEQUAL,"lequal"),an(lc,on.GREATER,"greater"),an(lc,on.GEQUAL,"gequal"),an(lc,on.EQUAL,"equal"),an(lc,on.NOTEQUAL,"notequal");uc={},an(uc,on.ZERO,"zero"),an(uc,on.KEEP,"keep"),an(uc,on.REPLACE,"replace"),an(uc,on.INVERT,"invert"),an(uc,on.INCR,"increment"),an(uc,on.DECR,"decrement"),an(uc,on.INCR_WRAP,"increment wrap"),an(uc,on.DECR_WRAP,"decrement wrap");pg={},an(pg,on.FRONT,"front"),an(pg,on.BACK,"back");var Ete=Function.prototype,Ote=Ete.toString;Ote.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class kN{constructor(){Ea(this,"lf");Ea(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new RZ(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:o.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:w}=b;w.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}Ea(kN,"pluginName","dagre");const xte=kr({name:"WorkFlow"}),Ste=kr({...xte,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":cW,"./nodes/application-node/index.ts":mW,"./nodes/base-node/index.ts":B9,"./nodes/classification-node/index.ts":Z9,"./nodes/condition-node/index.ts":az,"./nodes/database-node/index.ts":gz,"./nodes/document-extract-node/index.ts":Oz,"./nodes/echarts-node/index.ts":Cz,"./nodes/form-node/index.ts":eH,"./nodes/function-lib-node/index.ts":pH,"./nodes/function-node/index.ts":PH,"./nodes/image-generate/index.ts":UH,"./nodes/image-understand/index.ts":JH,"./nodes/mcp-node/index.ts":pX,"./nodes/question-node/index.ts":OX,"./nodes/reply-node/index.ts":kX,"./nodes/reranker-node/index.ts":zX,"./nodes/search-dataset-node/index.ts":nY,"./nodes/speech-to-text-node/index.ts":fY,"./nodes/start-node/index.ts":yY,"./nodes/text-to-speech-node/index.ts":SY,"./nodes/user-select-node/index.ts":CY,"./nodes/variable-assign-node/index.ts":VY}),o=lW(),r=mt(""),s=e,c={nodes:[...YI]};lo({get:()=>s.data?s.data:c,set:A=>A});const v=mt();bo(()=>{g()});const h=A=>{v.value.render(A)},g=A=>{const k=document.querySelector("#container");k&&(v.value=new YG({plugins:[kN],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:k}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),KY(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(j=>n[j].default),YY]),v.value.setDefaultEdgeType("app-edge"),v.value.render(A||{}),v.value.graphModel.eventCenter.on("delete_edge",j=>{j.forEach(R=>{v.value.deleteEdge(R)})}),v.value.graphModel.eventCenter.on("anchor:drop",j=>{j.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var j;(j=v.value)==null||j.fitView()},500))};return t({onmousedown:A=>{A.type&&v.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(A=>{var k;return(k=A==null?void 0:A.validate)==null?void 0:k.call(A)})),getGraphData:()=>v.value.getGraphData(),addNode:A=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:k,virtualRectCenterPositionY:j}=v.value.graphModel.getVirtualRectSize(),R=v.value.graphModel.addNode({type:A.type,properties:A.properties,x:k,y:j-v.value.graphModel.height/2});R.isSelected=!0,R.isHovered=!0,v.value.toFront(R.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:h}),(A,k)=>(Ve(),Dn(Yo,null,[k[0]||(k[0]=fe("div",{class:"workflow-app",id:"container"},null,-1)),v.value?(Ve(),_t(qY,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):tr("",!0),C(Jr(o),{"flow-id":r.value},null,8,["flow-id"])],64))}});const Ate={class:"workflow-publish-history border-l"},Tte={class:"border-b p-16-24"},Mte={class:"list-height pt-0"},Pte={class:"p-8 pt-0"},kte={class:"flex-between"},Nte={style:{"max-width":"80%"}},Rte={class:"text-center"},Dte=kr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=BM(),{params:{id:o}}=n,r=t,s=mt(!1),c=mt([]),v=mt("");function h(A){v.value=A.id}function g(A){r("click",A)}function b(A){r("refreshVersion",A)}function w(A){A.writeStatus=!0}function O(A){A.writeStatus=!1}function S(A,k){if(A){const j={name:A};fa.putWorkFlowVersion(o,k.id,j,s).then(()=>{Wp(Zt("common.modifySuccess")),k.writeStatus=!1,P()})}else Ba(Zt("views.applicationWorkflow.tip.nameMessage"))}function P(){fa.getWorkFlowVersion(o,s).then(A=>{c.value=A.data})}return bo(()=>{P()}),(A,k)=>{const j=te("ReadWrite"),R=te("el-tag"),B=te("UserFilled"),G=te("el-icon"),H=te("AppAvatar"),Y=te("el-text"),Q=te("MoreFilled"),W=te("el-button"),I=te("EditPen"),z=te("el-dropdown-item"),K=te("RefreshLeft"),q=te("el-dropdown-menu"),ce=te("el-dropdown"),Ne=te("common-list"),Oe=te("el-scrollbar"),Xe=Id("loading");return Ve(),Dn("div",Ate,[fe("h4",Tte,$e(A.$t("views.applicationWorkflow.setting.releaseHistory")),1),fe("div",Mte,[C(Oe,null,{default:F(()=>[fe("div",Pte,[Ua((Ve(),_t(Ne,{data:c.value,class:"mt-8",onClick:g,onMouseenter:h,onMouseleave:k[1]||(k[1]=Ie=>v.value="")},{default:F(({row:Ie,index:Pe})=>[fe("div",kte,[fe("div",Nte,[fe("h5",{class:Cd([Pe===0?"primary":"","flex"])},[C(j,{onChange:le=>S(le,Ie),data:Ie.name||Jr(Y1)(Ie.updateTime),trigger:"manual",write:Ie.writeStatus,onClose:le=>O(Ie)},null,8,["onChange","data","write","onClose"]),Pe===0?(Ve(),_t(R,{key:0,class:"default-tag ml-4"},{default:F(()=>[At($e(A.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):tr("",!0)],2),C(Y,{type:"info",class:"color-secondary flex mt-8"},{default:F(()=>[C(H,{size:20,class:"avatar-grey mr-4"},{default:F(()=>[C(G,null,{default:F(()=>[C(B)]),_:1})]),_:1}),At(" "+$e(Ie.publish_user_name),1)]),_:2},1024)]),Ua(fe("div",{onClick:k[0]||(k[0]=bn(()=>{},["stop"]))},[C(ce,{trigger:"click",teleported:!1},{dropdown:F(()=>[C(q,null,{default:F(()=>[C(z,{onClick:bn(le=>w(Ie),["stop"])},{default:F(()=>[C(G,null,{default:F(()=>[C(I)]),_:1}),At(" "+$e(A.$t("common.edit")),1)]),_:2},1032,["onClick"]),C(z,{onClick:le=>b(Ie)},{default:F(()=>[C(G,null,{default:F(()=>[C(K)]),_:1}),At(" "+$e(A.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:F(()=>[C(W,{text:""},{default:F(()=>[C(G,null,{default:F(()=>[C(Q)]),_:1})]),_:1})]),_:2},1024)],512),[[Ev,v.value===Ie.id]])])]),empty:F(()=>[fe("div",Rte,[C(Y,{type:"info"},{default:F(()=>[At($e(A.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Xe,s.value]])])]),_:1})])])}}});const Cte=Yy(Dte,[["__scopeId","data-v-935cc16f"]]),vM=[Xo.AiChat,Xo.Reply,Xo.FunctionLib,Xo.FunctionLibCustom,Xo.ImageUnderstandNode,Xo.Application,Xo.SpeechToTextNode,Xo.TextToSpeechNode,Xo.ImageGenerateNode,Xo.McpNode,Xo.Echarts];class yM{constructor(t){Ea(this,"nodes");Ea(this,"edges");Ea(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===Xo.Start);if(t.length==0)throw Zt("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Zt("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===Xo.Base);if(t.length==0)throw Zt("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Zt("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===Xo.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===Xo.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==Xo.Start&&n.id!==Xo.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Zt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(o.length==0&&!vM.includes(t.type))throw Zt("views.applicationWorkflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==Xo.Base&&t.type!==Xo.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Zt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===Xo.Condition){const n=t.properties.nodeData.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.needConnect1")}${o.type}${Zt("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(o=>o.sourceNodeId==t.id).length==0&&!vM.includes(t.type))throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${Zt("views.applicationWorkflow.validate.nodeUnavailable")}`}}const jte={class:"application-workflow"},Ite={class:"header border-b flex-between p-12-24"},Lte={class:"flex align-center"},Fte={key:0},$te={key:0},Bte={key:1},Ute={class:"ml-4"},Vte={class:"flex-between"},Gte={class:"flex align-center"},Wte={class:"mr-12 ml-24 flex"},zte=["src"],Hte={class:"mr-16"},Xte={class:"scrollbar-height"},ine=kr({__name:"index",setup(e){const{user:t,application:n}=hc(),o=qI(),r=BM(),s=lo(()=>t.isDefaultTheme()),{params:{id:c}}=r;let v;const h=mt(),g=mt(),b=mt(!1),w=mt(null),O=mt(!1),S=mt(!1),P=mt(!1),A=mt(""),k=mt(!1),j=mt(!1),R=mt(!1),B=mt({}),G=mt(null);function H(){JSON.stringify(G.value)!==JSON.stringify(Pe())?Cw(Zt("common.tip"),Zt("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Zt("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Zt("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{ye(!0,!0)}).catch(je=>{je==="cancel"&&o.push({path:`/application/${c}/WORK_FLOW/overview`})}):o.push({path:`/application/${c}/WORK_FLOW/overview`})}function Y(){R.value||(j.value=!1,R.value=!1)}function Q(je){je&&I(je),v1(`APPLICATION:MANAGE:${c}`,"AND")&&k.value&&Me(),j.value=!1,R.value=!1}function W(je){R.value=!0,B.value=je,I(je),ze()}function I(je){var it;je.workFlow.nodes.map(bt=>{bt.properties.noRender=!0}),w.value.workFlow=je.workFlow,A.value=je==null?void 0:je.updateTime,(it=h.value)==null||it.clearGraphData(),X1(()=>{var bt;(bt=h.value)==null||bt.render(je.workFlow)})}function z(){le(),v1(`APPLICATION:MANAGE:${c}`,"AND")&&k.value&&Me(),j.value=!1,R.value=!1}function K(){j.value=!0}function q(je){je?Me():ze(),localStorage.setItem("workflowAutoSave",je.toString())}function ce(je){O.value=!1}function Ne(je){O.value=!1}function Oe(){O.value=!1}async function Xe(){var je;(je=h.value)==null||je.validate().then(async()=>{const it={workFlow:Pe()};await n.asyncPutApplication(c,it);const bt=new yM(it.workFlow);try{bt.is_valid()}catch(Pt){Ba(Pt.toString());return}fa.putPublishApplication(c,it,b).then(()=>{Wp(Zt("views.applicationWorkflow.tip.publicSuccess"))})}).catch(it=>{var Yt,Ce,ge,Se;const bt=it.node,Pt=it.errMessage;if(typeof Pt=="string")Ba(((Yt=it.node.properties)==null?void 0:Yt.stepName)+` ${Zt("views.applicationWorkflow.node").toLowerCase()} `+Pt.toLowerCase());else{const ht=Object.keys(Pt);Ba(((Ce=bt.properties)==null?void 0:Ce.stepName)+` ${Zt("views.applicationWorkflow.node").toLowerCase()} `+((Se=(ge=Pt[ht[0]])==null?void 0:ge[0])==null?void 0:Se.message.toLowerCase()))}})}const Ie=()=>{var je;(je=h.value)==null||je.validate().then(()=>{var Pt;const it=Pe(),bt=new yM(it);try{bt.is_valid(),w.value={...w.value,type:"WORK_FLOW",...(Pt=bt.get_base_node())==null?void 0:Pt.properties.nodeData,workFlow:Pe()},S.value=!0}catch(Yt){Ba(Yt.toString())}}).catch(it=>{var Yt,Ce,ge,Se;const bt=it.node,Pt=it.errMessage;if(typeof Pt=="string")Ba(((Yt=it.node.properties)==null?void 0:Yt.stepName)+` ${Zt("views.applicationWorkflow.node")}，`+Pt);else{const ht=Object.keys(Pt);Ba(((Ce=bt.properties)==null?void 0:Ce.stepName)+` ${Zt("views.applicationWorkflow.node")}，`+((Se=(ge=Pt[ht[0]])==null?void 0:ge[0])==null?void 0:Se.message))}})};function Pe(){var je;return(je=h.value)==null?void 0:je.getGraphData()}function le(){n.asyncGetApplicationDetail(c).then(je=>{var it,bt,Pt;(it=je.data)==null||it.workFlow.nodes.map(Yt=>{Yt.properties.noRender=!0}),w.value=je.data,w.value.sttModelId=je.data.sttModel,w.value.ttsModelId=je.data.ttsModel,w.value.ttsType=je.data.ttsType,A.value=(bt=je.data)==null?void 0:bt.updateTime,(Pt=h.value)==null||Pt.clearGraphData(),X1(()=>{var Yt;(Yt=h.value)==null||Yt.render(w.value.workFlow),G.value=Pe()})})}function ye(je,it){const bt={workFlow:Pe()};b.value=it||!1,n.asyncPutApplication(c,bt).then(Pt=>{A.value=new Date,je&&(G.value=Pe(),Wp(Zt("common.saveSuccess")),it&&o.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{b.value=!1})}const Me=()=>{v=setInterval(()=>{ye()},6e4)},ze=()=>{v&&clearInterval(v)};return bo(()=>{le();const je=localStorage.getItem("workflowAutoSave");k.value=je==="true",v1(`APPLICATION:MANAGE:${c}`,"AND")&&k.value&&Me()}),KI(()=>{var je;ze(),(je=h.value)==null||je.clearGraphData()}),(je,it)=>{var Kn,re;const bt=te("back-button"),Pt=te("el-text"),Yt=te("el-button"),Ce=te("el-divider"),ge=te("Close"),Se=te("el-icon"),ht=te("AppIcon"),zt=te("MoreFilled"),xt=te("el-dropdown-item"),rn=te("el-switch"),yn=te("el-dropdown-menu"),Tn=te("el-dropdown"),pn=te("el-collapse-transition"),ft=te("AppAvatar"),xn=te("AiChat"),Be=Id("click-outside"),mn=Id("loading");return Ua((Ve(),Dn("div",jte,[fe("div",Ite,[fe("div",Lte,[C(bt,{onClick:H}),fe("h4",null,$e((Kn=w.value)==null?void 0:Kn.name),1),j.value&&R.value?(Ve(),Dn("div",Fte,[C(Pt,{type:"info",class:"ml-16 color-secondary"},{default:F(()=>[At($e(je.$t("views.applicationWorkflow.info.previewVersion"))+" "+$e(B.value.name||Jr(Y1)(B.value.updateTime)),1)]),_:1})])):A.value?(Ve(),_t(Pt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:F(()=>[At($e(je.$t("views.applicationWorkflow.info.saveTime"))+$e(Jr(Y1)(A.value)),1)]),_:1})):tr("",!0)]),j.value&&R.value?(Ve(),Dn("div",$te,[C(Yt,{type:"primary",class:"mr-8",onClick:it[0]||(it[0]=$n=>Q())},{default:F(()=>[At($e(je.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),C(Ce,{direction:"vertical"}),C(Yt,{text:"",onClick:z},{default:F(()=>[C(Se,null,{default:F(()=>[C(ge)]),_:1})]),_:1})])):(Ve(),Dn("div",Bte,[C(Yt,{icon:"Plus",onClick:it[1]||(it[1]=$n=>O.value=!O.value)},{default:F(()=>[At($e(je.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),C(Yt,{onClick:Ie,disabled:S.value},{default:F(()=>[C(ht,{iconName:"app-play-outlined",class:"mr-4"}),At(" "+$e(je.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),C(Yt,{onClick:it[2]||(it[2]=$n=>ye(!0))},{default:F(()=>[C(ht,{iconName:"app-save-outlined",class:"mr-4"}),At(" "+$e(je.$t("common.save")),1)]),_:1}),C(Yt,{type:"primary",onClick:Xe},{default:F(()=>[At($e(je.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),C(Tn,{trigger:"click"},{dropdown:F(()=>[C(yn,null,{default:F(()=>[C(xt,{onClick:K},{default:F(()=>[C(ht,{iconName:"app-history-outlined"}),At(" "+$e(je.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),C(xt,null,{default:F(()=>[C(ht,{iconName:"app-save-outlined"}),At(" "+$e(je.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),fe("div",Ute,[C(rn,{size:"small",modelValue:k.value,"onUpdate:modelValue":it[4]||(it[4]=$n=>k.value=$n),onChange:q},null,8,["modelValue"])])]),_:1})]),_:1})]),default:F(()=>[C(Yt,{text:"",onClick:it[3]||(it[3]=bn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:F(()=>[C(Se,{class:"rotate-90"},{default:F(()=>[C(zt)]),_:1})]),_:1})]),_:1})]))]),C(pn,null,{default:F(()=>[Ua(C(y2,{show:O.value,id:Jr(c),onClickNodes:ce,onOnmousedown:Ne,workflowRef:h.value},null,8,["show","id","workflowRef"]),[[Be,Oe]])]),_:1}),fe("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[w.value?(Ve(),_t(Ste,{key:0,ref_key:"workflowRef",ref:h,data:(re=w.value)==null?void 0:re.workFlow},null,8,["data"])):tr("",!0)],512),C(pn,null,{default:F(()=>{var $n,xr,Ur,ro;return[S.value?(Ve(),Dn("div",{key:0,class:Cd(["workflow-debug-container",P.value?"enlarge":""])},[fe("div",{class:Cd(["workflow-debug-header",s.value?"":"custom-header"])},[fe("div",Vte,[fe("div",Gte,[fe("div",Wte,[Jr(ZI)(($n=w.value)==null?void 0:$n.icon)?(Ve(),_t(ft,{key:0,shape:"square",size:32,style:{background:"none"}},{default:F(()=>{var jn;return[fe("img",{src:(jn=w.value)==null?void 0:jn.icon,alt:""},null,8,zte)]}),_:1})):(xr=w.value)!=null&&xr.name?(Ve(),_t(ft,{key:1,name:(Ur=w.value)==null?void 0:Ur.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):tr("",!0)]),fe("h4",null,$e(((ro=w.value)==null?void 0:ro.name)||je.$t("views.application.applicationForm.form.appName.label")),1)]),fe("div",Hte,[C(Yt,{link:"",onClick:it[5]||(it[5]=jn=>P.value=!P.value)},{default:F(()=>[C(ht,{iconName:P.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),C(Yt,{link:"",onClick:it[6]||(it[6]=jn=>S.value=!1)},{default:F(()=>[C(Se,{size:20,class:"color-secondary"},{default:F(()=>[C(ge)]),_:1})]),_:1})])])],2),fe("div",Xte,[C(xn,{"application-details":w.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):tr("",!0)]}),_:1}),j.value?Ua((Ve(),_t(Cte,{key:0,onClick:W,onRefreshVersion:Q},null,512)),[[Be,Y]]):tr("",!0)])),[[mn,b.value]])}}});export{ine as default};
