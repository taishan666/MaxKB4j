import{cp as J,d1 as xe,cq as h,cr as ue,di as we,cu as o,cx as _,cF as I,cA as t,cz as e,cB as a,cJ as r,cH as P,cX as de,dx as ye,cK as $,cE as oe,dy as lt,e3 as ot,c_ as Ke,cZ as A,e4 as Ae,dm as ve,cU as Ye,cv as $e,e5 as Qe,cN as ee,cQ as Re,cy as Y,cC as pe,cD as he,e6 as Me,cP as je,cV as nt,dG as re,dC as Xe,e7 as it,cT as st,cY as ct,e8 as pt,dl as ze,ct as Je,dB as rt,e9 as Se,ea as ut,eb as Ve,cG as dt,ec as ce,ed as z,ee as vt,ef as mt,cR as _t}from"./index-938a5085.js";import{_ as ft}from"./EditAvatarDialog.vue_vue_type_script_setup_true_lang-821dfcb6.js";const gt="/assets/window1-b13220c7.png",At="/assets/window2-6d9fe74f.png",ht={class:"border"},wt={class:"title p-16 bold"},yt={class:"code layout-bg border-t p-8"},bt={class:"flex-between p-8"},Dt={class:"bold"},kt={class:"pre-wrap p-8 pt-0"},It={class:"border"},Ct={class:"title p-16 bold"},$t={class:"code layout-bg border-t p-8"},Vt={class:"flex-between p-8"},Ot={class:"bold"},St={class:"pre-wrap p-8 pt-0"},xt=J({__name:"EmbedDialog",props:{data:Object,apiInputParams:String},emits:["addData"],setup(T,{expose:f,emit:N}){const{application:K}=xe(),V=T,B=h(!1),y=h(""),s=h(""),l=ue(()=>V.apiInputParams?"?"+V.apiInputParams:""),D=ue(()=>V.apiInputParams?"&"+V.apiInputParams:"");return we(B,g=>{g||(y.value="",s.value="")}),f({open:g=>{y.value=`<iframe
src="${K.location+g+l.value}"
style="width: 100%; height: 100%;"
frameborder="0"
allow="microphone">
</iframe>
`,s.value=`<script
async
defer
src="${window.location.origin}/api/application/embed?protocol=${window.location.protocol.replace(":","")}&host=${window.location.host}&token=${g}${D.value}">
<\/script>
`,B.value=!0}}),(g,b)=>{const d=o("AppIcon"),v=o("el-button"),m=o("el-scrollbar"),c=o("el-col"),O=o("el-row"),S=o("el-dialog");return _(),I(S,{title:g.$t("views.applicationOverview.appInfo.embedInWebsite"),modelValue:B.value,"onUpdate:modelValue":b[2]||(b[2]=E=>B.value=E),width:"900",class:"embed-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{default:t(()=>[e(O,{gutter:12},{default:t(()=>[e(c,{span:12},{default:t(()=>[a("div",ht,[a("p",wt,r(g.$t("views.applicationOverview.appInfo.EmbedDialog.fullscreenModeTitle")),1),b[3]||(b[3]=a("img",{src:gt,alt:"",class:"ml-8",height:"150"},null,-1)),a("div",yt,[a("div",bt,[a("span",Dt,r(g.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(v,{text:"",onClick:b[0]||(b[0]=E=>P(de)(y.value))},{default:t(()=>[e(d,{iconName:"app-copy"})]),_:1})]),e(m,{height:"150",always:""},{default:t(()=>[a("div",kt,r(y.value),1)]),_:1})])])]),_:1}),e(c,{span:12},{default:t(()=>[a("div",It,[a("p",Ct,r(g.$t("views.applicationOverview.appInfo.EmbedDialog.floatingModeTitle")),1),b[4]||(b[4]=a("img",{src:At,alt:"",class:"ml-8",height:"150"},null,-1)),a("div",$t,[a("div",Vt,[a("span",Ot,r(g.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(v,{text:"",onClick:b[1]||(b[1]=E=>P(de)(s.value))},{default:t(()=>[e(d,{iconName:"app-copy"})]),_:1})]),e(m,{height:"150",always:""},{default:t(()=>[a("div",St,r(s.value),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])}}});const Rt={class:"vertical-middle lighter break-all"},Bt={class:"mr-4"},Et=J({__name:"APIKeyDialog",emits:["addData"],setup(T,{expose:f,emit:N}){const K=ye(),{params:{id:V}}=K,B=h(),y=h(!1),s=h(!1),l=h(null);we(y,c=>{c||(l.value=null)});function D(c){B.value.open(c,"APPLICATION")}function R(c){Ke(`${A("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${c.secretKey}?`,A("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2"),{confirmButtonText:A("common.confirm"),cancelButtonText:A("common.cancel"),confirmButtonClass:"danger"}).then(()=>{Ae.delAPIKey(V,c.id,s).then(()=>{ve(A("common.deleteSuccess")),v()})}).catch(()=>{})}function g(c,O){const S={isActive:c},E=c?A("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):A("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");Ae.putAPIKey(V,O.id,S,s).then(n=>{ve(E),v()})}function b(){Ae.postAPIKey(V,s).then(c=>{v()})}const d=()=>{v(),y.value=!0};function v(){Ae.getAPIKey(V,s).then(c=>{l.value=c.data})}function m(){v()}return f({open:d}),(c,O)=>{const S=o("el-button"),E=o("AppIcon"),n=o("el-table-column"),i=o("el-switch"),U=o("Setting"),k=o("el-icon"),x=o("el-tooltip"),M=o("Delete"),H=o("el-table"),te=o("el-dialog");return _(),I(te,{title:"API Key",modelValue:y.value,"onUpdate:modelValue":O[1]||(O[1]=L=>y.value=L),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1,"align-center":""},{default:t(()=>[e(S,{type:"primary",class:"mb-16",onClick:b},{default:t(()=>[$(r(c.$t("common.create")),1)]),_:1}),e(H,{data:l.value,class:"mb-16",loading:s.value,height:"420"},{default:t(()=>[e(n,{prop:"secretKey",label:"API Key"},{default:t(({row:L})=>[a("span",Rt,r(L.secretKey),1),e(S,{type:"primary",text:"",onClick:C=>P(de)(L.secretKey)},{default:t(()=>[e(E,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),e(n,{label:c.$t("common.status.label"),width:"70"},{default:t(({row:L})=>[a("div",{onClick:O[0]||(O[0]=oe(()=>{},["stop"]))},[e(i,{size:"small",modelValue:L.isActive,"onUpdate:modelValue":C=>L.isActive=C,onChange:C=>g(C,L)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1},8,["label"]),e(n,{prop:"name",label:c.$t("common.createDate"),width:"170"},{default:t(({row:L})=>[$(r(P(lt)(L.createTime)),1)]),_:1},8,["label"]),e(n,{label:c.$t("common.operation"),align:"left",width:"90"},{default:t(({row:L})=>[a("span",Bt,[e(x,{effect:"dark",content:c.$t("common.setting"),placement:"top"},{default:t(()=>[e(S,{type:"primary",text:"",onClick:oe(C=>D(L),["stop"])},{default:t(()=>[e(k,null,{default:t(()=>[e(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),e(x,{effect:"dark",content:c.$t("common.delete"),placement:"top"},{default:t(()=>[e(S,{type:"primary",text:"",onClick:C=>R(L)},{default:t(()=>[e(k,null,{default:t(()=>[e(M)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),e(ot,{ref_key:"SettingAPIKeyDialogRef",ref:B,onRefresh:m},null,512)]),_:1},8,["modelValue"])}}}),Lt={class:"ml-4"},Pt={class:"dialog-footer"},Ut=J({__name:"LimitDialog",emits:["refresh"],setup(T,{expose:f,emit:N}){const K=ye(),{params:{id:V}}=K,B=N,y=h(),s=h({accessNum:0,whiteActive:!0,whiteList:"",authentication_value:"",authentication:!1}),l=h(!1),D=h(!1);we(l,m=>{m||(s.value={accessNum:0,whiteActive:!0,whiteList:""})});const R=m=>{var c,O;s.value.accessNum=m.accessNum,s.value.whiteActive=m.whiteActive,s.value.whiteList=(c=m.whiteList)!=null&&c.length?(O=m.whiteList)==null?void 0:O.join(`
`):"",s.value.authentication_value=m.authentication_value,s.value.authentication=m.authentication,l.value=!0},g=async m=>{m&&await m.validate((c,O)=>{if(c){const S={whiteList:s.value.whiteList?s.value.whiteList.split(`
`):[],whiteActive:s.value.whiteActive,accessNum:s.value.accessNum,authentication:s.value.authentication,authentication_value:s.value.authentication_value};Re.putAccessToken(V,S,D).then(E=>{B("refresh"),ve(A("common.settingSuccess")),l.value=!1})}})};function b(m=10){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",O=new Uint8Array(m);return window.crypto.getRandomValues(O),Array.from(O).map(S=>c[S%c.length]).join("")}function d(){s.value.authentication_value=b()}function v(){s.value.authentication&&!s.value.authentication_value&&(s.value.authentication_value=b())}return f({open:R}),(m,c)=>{const O=o("el-input-number"),S=o("el-form-item"),E=o("el-switch"),n=o("AppIcon"),i=o("el-button"),U=o("el-tooltip"),k=o("RefreshRight"),x=o("el-icon"),M=o("el-input"),H=o("el-form"),te=o("el-dialog"),L=Ye("hasPermission");return _(),I(te,{title:m.$t("views.applicationOverview.appInfo.accessControl"),modelValue:l.value,"onUpdate:modelValue":c[9]||(c[9]=C=>l.value=C),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[a("span",Pt,[e(i,{onClick:c[7]||(c[7]=oe(C=>l.value=!1,["prevent"]))},{default:t(()=>[$(r(m.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary",onClick:c[8]||(c[8]=C=>g(y.value)),loading:D.value},{default:t(()=>[$(r(m.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[e(H,{"label-position":"top",ref_key:"limitFormRef",ref:y,model:s.value},{default:t(()=>[e(S,{label:m.$t("views.applicationOverview.appInfo.LimitDialog.clientQueryLimitLabel")},{default:t(()=>[e(O,{modelValue:s.value.accessNum,"onUpdate:modelValue":c[0]||(c[0]=C=>s.value.accessNum=C),min:0,step:1,max:1e4,"value-on-clear":0,"controls-position":"right",style:{width:"268px"},"step-strictly":""},null,8,["modelValue"]),a("span",Lt,r(m.$t("views.applicationOverview.appInfo.LimitDialog.timesDays")),1)]),_:1},8,["label"]),$e((_(),I(S,{label:m.$t("views.applicationOverview.appInfo.LimitDialog.authentication")},{default:t(()=>[e(E,{size:"small",modelValue:s.value.authentication,"onUpdate:modelValue":c[1]||(c[1]=C=>s.value.authentication=C),onChange:v},null,8,["modelValue"])]),_:1},8,["label"])),[[L,new(P(Qe))([""],["x-pack"],"AND")]]),s.value.authentication?$e((_(),I(S,{key:0,prop:"authentication_value",label:m.$t("views.applicationOverview.appInfo.LimitDialog.authenticationValue")},{default:t(()=>[e(M,{class:"authentication-append-input",modelValue:s.value.authentication_value,"onUpdate:modelValue":c[3]||(c[3]=C=>s.value.authentication_value=C),readonly:"",style:{width:"268px"},disabled:""},{append:t(()=>[e(U,{content:m.$t("common.copy"),placement:"top"},{default:t(()=>[e(i,{type:"primary",text:"",onClick:c[2]||(c[2]=C=>P(de)(s.value.authentication_value)),style:{margin:"0 4px !important"}},{default:t(()=>[e(n,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(U,{content:m.$t("common.refresh"),placement:"top"},{default:t(()=>[e(i,{onClick:d,type:"primary",text:"",style:{margin:"0 4px 0 0 !important"}},{default:t(()=>[e(x,null,{default:t(()=>[e(k)]),_:1})]),_:1})]),_:1},8,["content"])]),_:1},8,["modelValue"])]),_:1},8,["label"])),[[L,new(P(Qe))([],["x-pack"],"AND")]]):ee("",!0),e(S,{label:m.$t("views.applicationOverview.appInfo.LimitDialog.whitelistLabel"),onClick:c[5]||(c[5]=oe(()=>{},["prevent"]))},{default:t(()=>[e(E,{size:"small",modelValue:s.value.whiteActive,"onUpdate:modelValue":c[4]||(c[4]=C=>s.value.whiteActive=C)},null,8,["modelValue"])]),_:1},8,["label"]),e(S,null,{default:t(()=>[e(M,{modelValue:s.value.whiteList,"onUpdate:modelValue":c[6]||(c[6]=C=>s.value.whiteList=C),placeholder:m.$t("views.applicationOverview.appInfo.LimitDialog.whitelistPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});const Ft={class:"dialog-footer"},Tt=J({__name:"DisplaySettingDialog",emits:["refresh"],setup(T,{expose:f,emit:N}){const K=ye(),{params:{id:V}}=K,B=N,y=h(),s=h({showSource:!1,language:""}),l=h(null),D=h(!1),R=h(!1);we(D,d=>{d||(s.value={showSource:!1,language:""})});const g=(d,v)=>{l.value=v,s.value.showSource=d.showSource,s.value.language=d.language,D.value=!0},b=async d=>{d&&await d.validate((v,m)=>{v&&Re.putAccessToken(V,s.value,R).then(c=>{B("refresh"),ve(A("common.settingSuccess")),D.value=!1})})};return f({open:g}),(d,v)=>{const m=o("el-option"),c=o("el-select"),O=o("el-form-item"),S=o("el-checkbox"),E=o("el-space"),n=o("el-form"),i=o("el-button"),U=o("el-dialog");return _(),I(U,{title:d.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),modelValue:D.value,"onUpdate:modelValue":v[4]||(v[4]=k=>D.value=k),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[a("span",Ft,[e(i,{onClick:v[2]||(v[2]=oe(k=>D.value=!1,["prevent"]))},{default:t(()=>[$(r(d.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary",onClick:v[3]||(v[3]=k=>b(y.value)),loading:R.value},{default:t(()=>[$(r(d.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[e(n,{"label-position":"top",ref_key:"displayFormRef",ref:y,model:s.value},{default:t(()=>[e(O,null,{default:t(()=>[a("span",null,r(d.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(c,{modelValue:s.value.language,"onUpdate:modelValue":v[0]||(v[0]=k=>s.value.language=k),clearable:""},{default:t(()=>[(_(!0),Y(pe,null,he(P(Me),k=>(_(),I(m,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(O,null,{default:t(()=>[e(E,{direction:"vertical",alignment:"start"},{default:t(()=>[e(S,{modelValue:s.value.showSource,"onUpdate:modelValue":v[1]||(v[1]=k=>s.value.showSource=k),label:P(je)(l.value.type)?d.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail"):d.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),Nt="/assets/display-bg2-56446976.png",Qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAAAOCAYAAABjJ6RkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7dyxDcJAEETRvcWkRIhWqIrKESEBsn3G7sG30XtFfE007fnabvMUj6lFBgDny5jbLz65XuIutgAD9bjmPmwzM6YAYKh1H7aWLUARwQUoIrgARQQXoIjgAhQRXIAiggtQRHABigguQJFctugBwFgZc7ZvvHuPJQAY4hi2x3nNH+AmFr6g66dUAAAAAElFTkSuQmCC",zt="data:image/png;base64,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",Kt="/MaxKB.gif",Yt={class:"flex-between mb-8"},Mt=["id"],jt={class:"flex align-center"},Xt={class:"flex"},Jt={class:"setting-preview border border-r-4 mr-16",style:{"min-width":"400px"}},Ht={class:"setting-preview-container"},Gt={class:"flex-between"},qt={class:"flex align-center"},Wt={class:"mr-12 ml-24 flex"},Zt=["src"],ea={class:"ellipsis"},ta={class:"mr-16"},aa={class:"p-16",style:{position:"relative"}},la={class:"flex"},oa={class:"avatar"},na={class:"flex-between"},ia={class:"avatar"},sa={style:{position:"absolute",bottom:"0","padding-bottom":"8px","box-sizing":"border-box"},class:"p-16 text-center w-full"},ca={class:"float_icon"},pa={key:1,src:Kt,height:"50px",style:{width:"40px",height:"40px",display:"block"}},ra={class:"mb-8"},ua={class:"mb-8"},da={class:"mb-8"},va={class:"flex-between mb-8"},ma={class:"lighter"},_a={class:"flex-between mb-8"},fa={class:"lighter"},ga={class:"flex-between mb-8"},Aa={class:"lighter"},ha={class:"border-t mt-8"},wa={class:"flex-between mb-8"},ya={class:"lighter"},ba={class:"flex align-center"},Da={class:"flex align-center"},ka={key:0},Ia={class:"dialog-footer"},Ca=J({__name:"XPackDisplaySettingDialog",emits:["refresh"],setup(T,{expose:f,emit:N}){xe();const K=ye(),{params:{id:V}}=K,B=N,y={showSource:!1,language:"",show_history:!0,draggable:!0,show_guide:!0,avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}}},s=h(),l=h({showSource:!1,language:"",show_history:!1,draggable:!1,show_guide:!1,avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}}}),D=h({avatar:"",float_icon:"",user_avatar:""}),R=h(!1),g=h(!1),b=h(null),d=ue(()=>{var n,i;return{background:(n=l.value.custom_theme)==null?void 0:n.theme_color,color:(i=l.value.custom_theme)==null?void 0:i.header_font_color}});function v(){l.value=st.cloneDeep(y),D.value={avatar:"",float_icon:"",user_avatar:""}}const m=(n,i,U)=>{if((n==null?void 0:n.size)/1024/1024<10)l.value[U]=n.raw,D.value[U]=URL.createObjectURL(n.raw),l.value[`${U}_url`]="";else return ct(A("views.applicationOverview.appInfo.EditAvatarDialog.fileSizeExceeded")),!1},c=(n,i)=>{var U,k;b.value=i,l.value.showSource=n.showSource,l.value.show_history=n.show_history,l.value.language=n.language,l.value.draggable=n.draggable,l.value.show_guide=n.show_guide,D.value.avatar=n.avatar,D.value.float_icon=n.float_icon,D.value.user_avatar=n.user_avatar,l.value.disclaimer=n.disclaimer,l.value.disclaimer_value=n.disclaimer_value,l.value.disclaimer_value===A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")&&(l.value.disclaimer_value=A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")),l.value.avatar_url=n.avatar,l.value.user_avatar_url=n.user_avatar,l.value.float_icon_url=n.float_icon,l.value.custom_theme={theme_color:((U=n.custom_theme)==null?void 0:U.theme_color)||"",header_font_color:((k=n.custom_theme)==null?void 0:k.header_font_color)||"#1f2329"},l.value.float_location=n.float_location,R.value=!0},O=n=>{l.value.disclaimer_value=n},S=n=>{l.value.disclaimer=n},E=async n=>{n&&await n.validate((i,U)=>{if(i){let k=new FormData;Object.keys(l.value).map(x=>{["custom_theme","float_location"].includes(x)?k.append(x,JSON.stringify(l.value[x])):k.append(x,l.value[x])}),pt.putAccessToken(V,k,g).then(x=>{B("refresh"),ve(A("common.settingSuccess")),R.value=!1})}})};return f({open:c}),(n,i)=>{const U=o("Refresh"),k=o("el-icon"),x=o("el-button"),M=o("el-divider"),H=o("AppAvatar"),te=o("AppIcon"),L=o("Close"),C=o("el-image"),Oe=o("LogoIcon"),be=o("auto-tooltip"),ne=o("el-text"),De=o("el-color-picker"),ae=o("el-col"),me=o("el-row"),le=o("el-option"),_e=o("el-select"),ie=o("el-upload"),se=o("el-card"),G=o("el-checkbox"),ke=o("el-input-number"),fe=o("el-input"),u=o("el-tooltip"),w=o("el-space"),Q=o("el-form"),j=o("el-dialog");return _(),I(j,{title:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),width:"900",modelValue:R.value,"onUpdate:modelValue":i[15]||(i[15]=F=>R.value=F),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"align-center":"",class:"display-setting-dialog"},{header:t(({titleId:F,titleClass:q})=>[a("div",Yt,[a("h4",{id:F,class:nt(q)},r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle")),11,Mt),a("div",jt,[e(x,{type:"primary",onClick:oe(v,["prevent"]),link:""},{default:t(()=>[e(k,{class:"mr-4"},{default:t(()=>[e(U)]),_:1}),$(" "+r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.restoreDefault")),1)]),_:1}),e(M,{direction:"vertical"})])])]),footer:t(()=>[a("span",Ia,[e(x,{onClick:i[13]||(i[13]=oe(F=>R.value=!1,["prevent"]))},{default:t(()=>[$(r(n.$t("common.cancel")),1)]),_:1}),e(x,{type:"primary",onClick:i[14]||(i[14]=F=>E(s.value)),loading:g.value},{default:t(()=>[$(r(n.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>{var F,q,Ie,ge;return[a("div",Xt,[a("div",Jt,[a("div",Ht,[a("div",{class:"setting-preview-header",style:re(d.value)},[a("div",Gt,[a("div",qt,[a("div",Wt,[P(Xe)((F=b.value)==null?void 0:F.icon)?(_(),I(H,{key:0,shape:"square",size:32,style:{background:"none"}},{default:t(()=>{var p;return[a("img",{src:(p=b.value)==null?void 0:p.icon,alt:""},null,8,Zt)]}),_:1})):(q=b.value)!=null&&q.name?(_(),I(H,{key:1,name:(Ie=b.value)==null?void 0:Ie.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):ee("",!0)]),a("h4",ea,r(((ge=b.value)==null?void 0:ge.name)||n.$t("views.application.applicationForm.form.appName.label")),1)]),a("div",ta,[e(x,{link:""},{default:t(()=>{var p;return[e(te,{iconName:"app-magnify",style:re([{color:(p=l.value.custom_theme)==null?void 0:p.header_font_color},{"font-size":"20px"}])},null,8,["style"])]}),_:1}),e(x,{link:""},{default:t(()=>{var p;return[e(k,{size:20,class:"color-secondary",style:re({color:(p=l.value.custom_theme)==null?void 0:p.header_font_color})},{default:t(()=>[e(L)]),_:1},8,["style"])]}),_:1})])])],4),a("div",null,[a("div",aa,[a("div",la,[a("div",oa,[D.value.avatar?(_(),I(C,{key:0,src:D.value.avatar,alt:"",fit:"cover",style:{width:"35px",height:"35px",display:"block"}},null,8,["src"])):(_(),I(Oe,{key:1,height:"35px",style:{width:"35px",height:"35px",display:"block"}}))]),i[16]||(i[16]=a("img",{src:Nt,alt:"",width:"270"},null,-1))]),a("div",na,[a("div",ia,[D.value.user_avatar?(_(),I(C,{key:0,src:D.value.user_avatar,alt:"",fit:"cover",style:{width:"35px",height:"35px",display:"block"}},null,8,["src"])):(_(),I(H,{key:1},{default:t(()=>i[17]||(i[17]=[a("img",{src:it,style:{width:"54%"},alt:""},null,-1)])),_:1}))]),i[18]||(i[18]=a("img",{src:Qt,alt:"",width:"270",class:"ml-8"},null,-1))])]),a("div",sa,[i[19]||(i[19]=a("img",{src:zt,alt:"",class:"w-full"},null,-1)),l.value.disclaimer?(_(),I(ne,{key:0,type:"info",class:"mt-8",style:{"font-size":"12px"}},{default:t(()=>[e(be,{content:l.value.disclaimer_value},{default:t(()=>[$(r(l.value.disclaimer_value),1)]),_:1},8,["content"])]),_:1})):ee("",!0)])])]),a("div",ca,[D.value.float_icon?(_(),I(C,{key:0,src:D.value.float_icon,alt:"",fit:"cover",style:{width:"40px",height:"40px",display:"block"}},null,8,["src"])):(_(),Y("img",pa))])]),e(Q,{ref_key:"displayFormRef",ref:s,model:l.value},{default:t(()=>[e(me,{class:"w-full mb-8"},{default:t(()=>[e(ae,{span:12},{default:t(()=>[a("h5",ra,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.customThemeColor")),1),a("div",null,[e(De,{modelValue:l.value.custom_theme.theme_color,"onUpdate:modelValue":i[0]||(i[0]=p=>l.value.custom_theme.theme_color=p)},null,8,["modelValue"]),$(" "+r(l.value.custom_theme.theme_color?"":n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.default")),1)])]),_:1}),e(ae,{span:12},{default:t(()=>[a("h5",ua,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.headerTitleFontColor")),1),e(De,{modelValue:l.value.custom_theme.header_font_color,"onUpdate:modelValue":i[1]||(i[1]=p=>l.value.custom_theme.header_font_color=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{class:"w-full mb-8"},{default:t(()=>[a("h5",da,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(_e,{modelValue:l.value.language,"onUpdate:modelValue":i[2]||(i[2]=p=>l.value.language=p),clearable:""},{default:t(()=>[(_(!0),Y(pe,null,he(P(Me),p=>(_(),I(le,{key:p.value,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(se,{shadow:"never",class:"mb-8"},{default:t(()=>[a("div",va,[a("span",ma,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.askUserAvatar")),1),e(ie,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(p,W)=>m(p,W,"user_avatar")},{default:t(()=>[e(x,{size:"small"},{default:t(()=>[$(r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ne,{type:"info",size:"small"},{default:t(()=>[$(r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e(se,{shadow:"never",class:"mb-8"},{default:t(()=>[a("div",_a,[a("span",fa,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.AIAvatar")),1),e(ie,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(p,W)=>m(p,W,"avatar")},{default:t(()=>[e(x,{size:"small"},{default:t(()=>[$(r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ne,{type:"info",size:"small"},{default:t(()=>[$(r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e(se,{shadow:"never",class:"mb-8"},{default:t(()=>[a("div",ga,[a("span",Aa,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.floatIcon")),1),e(ie,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(p,W)=>m(p,W,"float_icon")},{default:t(()=>[e(x,{size:"small"},{default:t(()=>[$(r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ne,{type:"info",size:"small"},{default:t(()=>[$(r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1}),a("div",ha,[a("div",wa,[a("span",ya,r(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconDefaultPosition")),1),e(G,{modelValue:l.value.draggable,"onUpdate:modelValue":i[3]||(i[3]=p=>l.value.draggable=p),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.draggablePosition")},null,8,["modelValue","label"])]),e(me,{gutter:8,class:"w-full mb-8"},{default:t(()=>[e(ae,{span:12},{default:t(()=>[a("div",ba,[e(_e,{modelValue:l.value.float_location.x.type,"onUpdate:modelValue":i[4]||(i[4]=p=>l.value.float_location.x.type=p),style:{width:"80px"}},{default:t(()=>[e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.left"),value:"left"},null,8,["label"]),e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.right"),value:"right"},null,8,["label"])]),_:1},8,["modelValue"]),e(ke,{modelValue:l.value.float_location.x.value,"onUpdate:modelValue":i[5]||(i[5]=p=>l.value.float_location.x.value=p),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),i[20]||(i[20]=a("span",{class:"ml-4"},"px",-1))])]),_:1}),e(ae,{span:12},{default:t(()=>[a("div",Da,[e(_e,{modelValue:l.value.float_location.y.type,"onUpdate:modelValue":i[6]||(i[6]=p=>l.value.float_location.y.type=p),style:{width:"80px"}},{default:t(()=>[e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.top"),value:"top"},null,8,["label"]),e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.bottom"),value:"bottom"},null,8,["label"])]),_:1},8,["modelValue"]),e(ke,{modelValue:l.value.float_location.y.value,"onUpdate:modelValue":i[7]||(i[7]=p=>l.value.float_location.y.value=p),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),i[21]||(i[21]=a("span",{class:"ml-4"},"px",-1))])]),_:1})]),_:1})])]),_:1}),e(w,{direction:"vertical",alignment:"start",size:2},{default:t(()=>[e(G,{modelValue:l.value.showSource,"onUpdate:modelValue":i[8]||(i[8]=p=>l.value.showSource=p),label:P(je)(b.value.type)?n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail"):n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"]),e(G,{modelValue:l.value.show_history,"onUpdate:modelValue":i[9]||(i[9]=p=>l.value.show_history=p),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showHistory")},null,8,["modelValue","label"]),e(G,{modelValue:l.value.show_guide,"onUpdate:modelValue":i[10]||(i[10]=p=>l.value.show_guide=p),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.displayGuide")},null,8,["modelValue","label"]),e(G,{modelValue:l.value.disclaimer,"onUpdate:modelValue":i[11]||(i[11]=p=>l.value.disclaimer=p),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimer"),onChange:S},null,8,["modelValue","label"]),l.value.disclaimer?(_(),Y("span",ka,[e(u,{content:l.value.disclaimer_value,placement:"top"},{default:t(()=>[e(fe,{modelValue:l.value.disclaimer_value,"onUpdate:modelValue":i[12]||(i[12]=p=>l.value.disclaimer_value=p),style:{width:"422px","margin-bottom":"10px"},onChange:O,maxlength:128},null,8,["modelValue"])]),_:1},8,["content"])])):ee("",!0)]),_:1})]),_:1},8,["model"])])]}),_:1},8,["title","modelValue"])}}});const $a=["id"],Va=J({__name:"LineCharts",props:{id:{type:String,default:"lineChartId"},width:{type:String,default:"100%"},height:{type:String,default:"200px"},option:{type:Object,required:!0}},setup(T){const f=T,N=["rgba(82, 133, 255, 1)","rgba(255, 207, 47, 1)"],K=["rgba(82, 133, 255, 0.2)","rgba(255, 207, 47, 0.2)"];function V(){var D,R,g,b;let y=Se(document.getElementById(f.id));y==null&&(y=ut(document.getElementById(f.id)));const s=[];(R=(D=f.option)==null?void 0:D.yData)!=null&&R.length&&((g=f.option)==null||g.yData.forEach((d,v)=>{s.push({itemStyle:{color:N[v]},areaStyle:d.area?{color:K[v]}:null,...d})}));const l={title:{text:(b=f.option)==null?void 0:b.title,textStyle:{fontSize:"16px"}},tooltip:{trigger:"axis",valueFormatter:d=>Ve(d)},legend:{right:0,itemWidth:8,textStyle:{color:"#646A73"},icon:"circle"},grid:{left:"1%",right:"1%",bottom:"0",top:"18%",containLabel:!0},xAxis:{type:"category",data:f.option.xData},yAxis:{type:"value",splitLine:{lineStyle:{color:"#EFF0F1"}},axisLabel:{formatter:d=>Ve(d)}},series:s};y.setOption(l,!0)}function B(){var y;(y=Se(document.getElementById(f.id)))==null||y.resize()}return we(()=>f.option,y=>{y&&ze(()=>{V()})}),Je(()=>{ze(()=>{V(),window.addEventListener("resize",B)})}),rt(()=>{var y;(y=Se(document.getElementById(f.id)))==null||y.dispose(),window.removeEventListener("resize",B)}),(y,s)=>(_(),Y("div",{id:T.id,ref:"PieChartRef",style:re({height:T.height,width:T.width})},null,12,$a))}}),Oa=J({name:"AppCharts"}),Sa=J({...Oa,props:{type:{type:String,default:"line"},height:{type:String,default:"200px"},dataZoom:Boolean,option:{type:Object,required:!0}},setup(T){const f={line:Va};return(N,K)=>(_(),I(dt(f[T.type]),{height:T.height,option:T.option,dataZoom:T.dataZoom,class:"v-charts"},null,8,["height","option","dataZoom"]))}}),xa={class:"flex align-center ml-8 mr-8"},Ra={class:"ml-12"},Ba={class:"color-secondary lighter mb-4"},Ea={key:0,class:"flex align-baseline"},La={key:0,class:"ml-12",style:{color:"#f54a45"}},Pa={key:1,class:"flex align-center mr-8"},Ua={class:"ml-4"},Fa={class:"ml-4"},Ta={class:"p-8"},Na=J({__name:"StatisticsCharts",props:{data:{type:Array,default:()=>[]}},setup(T){const f=T,N=ue(()=>[{id:"customerCharts",name:A("views.applicationOverview.monitor.charts.customerTotal"),icon:"app-user",background:"#EBF1FF",color:"#3370FF",sum:[ce(z(f.data,"customerNum")||0),ce(z(f.data,"customerAddedCount")||0)],option:{title:A("views.applicationOverview.monitor.charts.customerTotal"),xData:z(f.data,"day"),yData:[{name:A("views.applicationOverview.monitor.charts.customerTotal"),type:"line",area:!0,data:z(f.data,"customerNum")},{name:A("views.applicationOverview.monitor.charts.customerNew"),type:"line",area:!0,data:z(f.data,"customerAddedCount")}]}},{id:"chatRecordCharts",name:A("views.applicationOverview.monitor.charts.queryCount"),icon:"app-question",background:"#FFF3E5",color:"#FF8800",sum:[ce(z(f.data,"chatRecordCount")||0)],option:{title:A("views.applicationOverview.monitor.charts.queryCount"),xData:z(f.data,"day"),yData:[{type:"line",data:z(f.data,"chatRecordCount")}]}},{id:"tokensCharts",name:A("views.applicationOverview.monitor.charts.tokensTotal"),icon:"app-tokens",background:"#E5FBF8",color:"#00D6B9",sum:[ce(z(f.data,"tokensNum")||0)],option:{title:A("views.applicationOverview.monitor.charts.tokensTotal"),xData:z(f.data,"day"),yData:[{type:"line",data:z(f.data,"tokensNum")}]}},{id:"starCharts",name:A("views.applicationOverview.monitor.charts.userSatisfaction"),icon:"app-user-stars",background:"#FEEDEC",color:"#F54A45",sum:[ce(z(f.data,"starNum")||0),ce(z(f.data,"trampleNum")||0)],option:{title:A("views.applicationOverview.monitor.charts.userSatisfaction"),xData:z(f.data,"day"),yData:[{name:A("views.applicationOverview.monitor.charts.approval"),type:"line",data:z(f.data,"starNum")},{name:A("views.applicationOverview.monitor.charts.disapproval"),type:"line",data:z(f.data,"trampleNum")}]}}]);return(K,V)=>{const B=o("appIcon"),y=o("el-avatar"),s=o("AppIcon"),l=o("el-card"),D=o("el-col"),R=o("el-row");return _(),Y(pe,null,[e(R,{gutter:16},{default:t(()=>[(_(!0),Y(pe,null,he(N.value,(g,b)=>(_(),I(D,{xs:12,sm:12,md:12,lg:6,xl:6,key:b,class:"mb-16"},{default:t(()=>[e(l,{shadow:"never"},{default:t(()=>{var d,v,m,c;return[a("div",xa,[e(y,{size:40,shape:"square",style:re({background:g.background})},{default:t(()=>[e(B,{iconName:g.icon,style:re({fontSize:"24px",color:g.color})},null,8,["iconName","style"])]),_:2},1032,["style"]),a("div",Ra,[a("p",Ba,r(g.name),1),g.id!=="starCharts"?(_(),Y("div",Ea,[a("h2",null,r(P(Ve)((d=g.sum)==null?void 0:d[0])),1),g.sum.length>1?(_(),Y("span",La,"+"+r(P(Ve)((v=g.sum)==null?void 0:v[1])),1)):ee("",!0)])):(_(),Y("div",Pa,[e(s,{iconName:"app-like-color"}),a("h2",Ua,r((m=g.sum)==null?void 0:m[0]),1),e(s,{class:"ml-12",iconName:"app-oppose-color"}),a("h2",Fa,r((c=g.sum)==null?void 0:c[1]),1)]))])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}),e(R,{gutter:16},{default:t(()=>[(_(!0),Y(pe,null,he(N.value,(g,b)=>(_(),I(D,{xs:24,sm:24,md:24,lg:12,xl:12,key:b,class:"mb-16"},{default:t(()=>[e(l,{shadow:"never"},{default:t(()=>[a("div",Ta,[e(Sa,{height:"316px",id:g.id,type:"line",option:g.option},null,8,["id","option"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}}),Qa={class:"main-calc-height p-24"},za={class:"title-decoration-1 mb-16"},Ka={class:"title flex align-center"},Ya=["src"],Ma={class:"flex"},ja={class:"mt-4 mb-16 url-height flex align-center",style:{"margin-bottom":"37px"}},Xa={class:"vertical-middle lighter break-all ellipsis-1"},Ja={class:"flex"},Ha={class:"mt-4 mb-16 url-height"},Ga={class:"flex align-center"},qa={class:"flex"},Wa={class:"vertical-middle lighter break-all ellipsis-1"},Za={class:"title-decoration-1 mt-16 mb-16"},el={class:"mb-16"},tl=J({__name:"index",setup(T){const{user:f,application:N}=xe(),K=ye(),{params:{id:V}}=K,B=window.location.origin+"/doc.html",y=window.location.origin+"/api/application/",s=h(),l=h(),D=h(),R=h(),g=h(),b=h(),d=h({}),v=h(null),m=h(!1),c=ue(()=>fe(M.value)?"?"+fe(M.value):""),O=ue(()=>N.location+d.value.accessToken+c.value),S=[{value:7,label:A("views.applicationOverview.monitor.pastDayOptions.past7Days")},{value:30,label:A("views.applicationOverview.monitor.pastDayOptions.past30Days")},{value:90,label:A("views.applicationOverview.monitor.pastDayOptions.past90Days")},{value:183,label:A("views.applicationOverview.monitor.pastDayOptions.past183Days")},{value:"other",label:A("views.applicationOverview.monitor.pastDayOptions.other")}],E=h(7),n=h(""),i=h({startTime:"",endTime:""}),U=h(!1),k=h([]),x=h(!1),M=h([]);function H(u){window.open(u,"_blank")}function te(){var u,w;f.isEnterprise()?(u=l.value)==null||u.open(d.value,v.value):(w=s.value)==null||w.open(d.value,v.value)}function L(){D.value.open(v.value)}function C(u){u!=="other"&&(i.value.startTime=vt(u),i.value.endTime=mt,be())}function Oe(u){i.value.startTime=u[0],i.value.endTime=u[1],be()}function be(){Ae.getStatistics(V,i.value,U).then(u=>{k.value=u.data})}function ne(){Ke(A("views.applicationOverview.appInfo.refreshToken.msgConfirm1"),A("views.applicationOverview.appInfo.refreshToken.msgConfirm2"),{confirmButtonText:A("common.confirm"),cancelButtonText:A("common.cancel")}).then(()=>{const u={accessTokenReset:!0},w=A("views.applicationOverview.appInfo.refreshToken.refreshSuccess");ae(u,w)}).catch(()=>{})}function De(u){const w={isActive:u},Q=u?A("common.status.enableSuccess"):A("common.status.disableSuccess");ae(w,Q)}function ae(u,w){Re.putAccessToken(V,u,m).then(Q=>{d.value=Q==null?void 0:Q.data,ve(w)})}function me(){R.value.open(d.value)}function le(){g.value.open()}function _e(){var u;b.value.open((u=d.value)==null?void 0:u.accessToken)}function ie(){N.asyncGetAccessToken(V,m).then(u=>{d.value=u==null?void 0:u.data})}function se(){N.asyncGetApplicationDetail(V,m).then(u=>{var w,Q;v.value=u.data,(Q=(w=v.value.workFlow)==null?void 0:w.nodes)==null||Q.filter(j=>j.id==="base-node").map(j=>{M.value=j.properties.api_input_field_list?j.properties.api_input_field_list.map(F=>({name:F.variable,value:F.default_value})):j.properties.inputFieldList?j.properties.inputFieldList.filter(F=>F.assignment_method==="api_input").map(F=>({name:F.variable,value:F.default_value})):[]})})}function G(){ie()}function ke(){se()}function fe(u){const w=new URLSearchParams;return u.forEach(Q=>{w.append(encodeURIComponent(Q.name),encodeURIComponent(Q.value))}),w.toString()}return Je(()=>{se(),ie(),C(E.value)}),(u,w)=>{const Q=o("AppAvatar"),j=o("EditPen"),F=o("el-icon"),q=o("el-text"),Ie=o("el-switch"),ge=o("AppIcon"),p=o("el-button"),W=o("el-tooltip"),He=o("RefreshRight"),Be=o("el-col"),Ge=o("el-row"),qe=o("el-card"),We=o("el-option"),Ze=o("el-select"),et=o("el-date-picker"),tt=o("el-scrollbar"),at=o("LayoutContainer"),Ee=Ye("loading");return _(),I(at,{header:u.$t("views.applicationOverview.title")},{default:t(()=>[e(tt,null,{default:t(()=>[a("div",Qa,[a("h4",za,r(u.$t("views.applicationOverview.appInfo.header")),1),$e((_(),I(qe,{shadow:"never",class:"overview-card"},{default:t(()=>{var X,Le,Pe,Ue;return[a("div",Ka,[a("div",{class:"edit-avatar mr-12",onMouseenter:w[0]||(w[0]=Z=>x.value=!0),onMouseleave:w[1]||(w[1]=Z=>x.value=!1)},[P(Xe)((X=v.value)==null?void 0:X.icon)?(_(),I(Q,{key:0,shape:"square",size:32,style:{background:"none"}},{default:t(()=>{var Z;return[a("img",{src:(Z=v.value)==null?void 0:Z.icon,alt:""},null,8,Ya)]}),_:1})):(Le=v.value)!=null&&Le.name?(_(),I(Q,{key:1,name:(Pe=v.value)==null?void 0:Pe.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):ee("",!0),x.value?(_(),I(Q,{key:2,shape:"square",class:"edit-mask",size:32,onClick:L},{default:t(()=>[e(F,null,{default:t(()=>[e(j)]),_:1})]),_:1})):ee("",!0)],32),a("h4",null,r((Ue=v.value)==null?void 0:Ue.name),1)]),e(Ge,{gutter:12},{default:t(()=>[e(Be,{span:12,class:"mt-16"},{default:t(()=>{var Z,Fe,Te,Ne;return[a("div",Ma,[e(q,{type:"info"},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.publicAccessLink")),1)]),_:1}),e(Ie,{modelValue:d.value.isActive,"onUpdate:modelValue":w[2]||(w[2]=Ce=>d.value.isActive=Ce),class:"ml-8",size:"small","inline-prompt":"","active-text":u.$t("views.applicationOverview.appInfo.openText"),"inactive-text":u.$t("views.applicationOverview.appInfo.closeText"),onChange:w[3]||(w[3]=Ce=>De(Ce))},null,8,["modelValue","active-text","inactive-text"])]),a("div",ja,[a("span",Xa,r(O.value),1),e(W,{effect:"dark",content:u.$t("common.copy"),placement:"top"},{default:t(()=>[e(p,{type:"primary",text:"",onClick:w[4]||(w[4]=Ce=>P(de)(O.value))},{default:t(()=>[e(ge,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(W,{effect:"dark",content:u.$t("common.refresh"),placement:"top"},{default:t(()=>[e(p,{onClick:ne,type:"primary",text:"",style:{"margin-left":"1px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(He)]),_:1})]),_:1})]),_:1},8,["content"])]),a("div",null,[(Z=d.value)!=null&&Z.isActive?(_(),I(p,{key:0,disabled:!((Fe=d.value)!=null&&Fe.isActive),type:"primary",tag:"a",href:O.value,target:"_blank"},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.demo")),1)]),_:1},8,["disabled","href"])):(_(),I(p,{key:1,disabled:!((Te=d.value)!=null&&Te.isActive),type:"primary"},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.demo")),1)]),_:1},8,["disabled"])),e(p,{disabled:!((Ne=d.value)!=null&&Ne.isActive),onClick:_e},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.embedInWebsite")),1)]),_:1},8,["disabled"]),e(p,{onClick:me},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.accessControl")),1)]),_:1}),e(p,{onClick:te},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.displaySetting")),1)]),_:1})])]}),_:1}),e(Be,{span:12,class:"mt-16"},{default:t(()=>[a("div",Ja,[e(q,{type:"info"},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.apiAccessCredentials")),1)]),_:1})]),a("div",Ha,[a("div",null,[e(q,null,{default:t(()=>[$("API "+r(u.$t("common.fileUpload.document"))+"：",1)]),_:1}),e(p,{type:"primary",link:"",onClick:w[5]||(w[5]=Z=>H(B)),class:"vertical-middle lighter break-all"},{default:t(()=>[$(r(B))]),_:1})]),a("div",Ga,[a("span",qa,[e(q,{style:{width:"80px"}},{default:t(()=>w[9]||(w[9]=[$("Base URL：")])),_:1})]),a("span",Wa,r(y+P(V)),1),e(W,{effect:"dark",content:u.$t("common.copy"),placement:"top"},{default:t(()=>[e(p,{type:"primary",text:"",onClick:w[6]||(w[6]=Z=>P(de)(y+P(V)))},{default:t(()=>[e(ge,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"])])]),a("div",null,[e(p,{onClick:le},{default:t(()=>[$(r(u.$t("views.applicationOverview.appInfo.apiKey")),1)]),_:1})])]),_:1})]),_:1})]}),_:1})),[[Ee,m.value]]),a("h4",Za,r(u.$t("views.applicationOverview.monitor.monitoringStatistics")),1),a("div",el,[e(Ze,{modelValue:E.value,"onUpdate:modelValue":w[7]||(w[7]=X=>E.value=X),class:"mr-12",onChange:C,style:{width:"180px"}},{default:t(()=>[(_(),Y(pe,null,he(S,X=>e(We,{key:X.value,label:X.label,value:X.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),E.value==="other"?(_(),I(et,{key:0,modelValue:n.value,"onUpdate:modelValue":w[8]||(w[8]=X=>n.value=X),type:"daterange","start-placeholder":u.$t("views.applicationOverview.monitor.startDatePlaceholder"),"end-placeholder":u.$t("views.applicationOverview.monitor.endDatePlaceholder"),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:Oe},null,8,["modelValue","start-placeholder","end-placeholder"])):ee("",!0)]),$e((_(),Y("div",null,[e(Na,{data:k.value},null,8,["data"])])),[[Ee,U.value]])])]),_:1}),e(xt,{ref_key:"EmbedDialogRef",ref:b,data:v.value,"api-input-params":fe(M.value)},null,8,["data","api-input-params"]),e(Et,{ref_key:"APIKeyDialogRef",ref:g},null,512),e(Ut,{ref_key:"LimitDialogRef",ref:R,onRefresh:G},null,512),e(ft,{ref_key:"EditAvatarDialogRef",ref:D,onRefresh:ke},null,512),P(f).isEnterprise()?(_(),I(Ca,{key:0,ref_key:"XPackDisplaySettingDialogRef",ref:l,onRefresh:G},null,512)):(_(),I(Tt,{key:1,ref_key:"DisplaySettingDialogRef",ref:s,onRefresh:G},null,512))]),_:1},8,["header"])}}});const ol=_t(tl,[["__scopeId","data-v-6920b560"]]);export{ol as default};
