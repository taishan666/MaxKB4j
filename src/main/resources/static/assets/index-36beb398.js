var Nj=Object.defineProperty;var Rj=(e,t,n)=>t in e?Nj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ea=(e,t,n)=>(Rj(e,typeof t!="symbol"?t+"":t,n),n);import{aK as _v,aL as ms,aM as Ir,aN as wS,aO as $d,aP as Uy,aQ as Tf,aR as Kp,aS as mM,aT as Lu,aU as Vu,ah as vi,aV as Dj,aW as hc,aX as Pw,aY as Cj,aZ as Vy,a_ as Fu,a$ as Gy,b0 as jj,b1 as Mv,b2 as ob,aF as Gu,b3 as Ij,b4 as Zp,b5 as gM,b6 as Jp,b7 as Bd,z as Nw,b8 as to,b9 as ib,ba as Wy,bb as gs,bc as Do,bd as xf,be as vc,bf as kv,bg as zy,bh as ws,bi as Sa,bj as Jr,bk as ab,bl as Lj,bm as bM,bn as Mf,bo as _M,bp as wM,bq as H1,br as ea,ai as $u,bs as Fj,bt as $j,bu as lb,bv as EM,bw as Qp,bx as OM,ac as Rw,by as Pv,A as Nv,bz as Ry,bA as Hy,af as xM,bB as SM,bC as Bj,bD as wv,bE as Uj,bF as AM,bG as TM,bH as Vj,bI as MM,bJ as Gj,bK as Wj,bL as zj,bM as Hj,bN as Xj,bO as Tg,bP as qj,bQ as Yj,bR as Kj,bS as kM,bT as PM,bU as NM,bV as RM,bW as Dw,bX as Zj,bY as Xy,bZ as DM,b_ as Jj,b$ as CM,c0 as jM,c1 as Qj,c2 as eI,c3 as tI,c4 as zp,ae as nI,c5 as rI,c6 as oI,aH as iI,c7 as aI,ag as lI,c8 as uI,c9 as sI,ca as cI,cb as fI,ab as dI,aj as pI,cc as hI,aG as vI,cd as yI,ce as mI,cf as gI,cg as bI,ch as _I,ci as wI,aa as EI,cj as OI,ck as xI,ak as SI,cl as AI,p as TI,cm as MI,cn as kI,co as PI,cp as wr,cq as pt,cr as zr,cs as NI,ct as uo,cu as Z,cv as Ua,cw as Ev,cx as Ie,cy as An,cz as R,cA as j,cB as le,cC as _o,cD as li,cE as pn,cF as dt,cG as Gp,cH as Kr,cI as Wp,cJ as Ce,cK as bt,cL as rg,cM as ES,cN as jn,cO as OS,cP as hg,cQ as fa,cR as qy,cS as Rl,cT as $e,cU as Id,cV as jd,cW as RI,cX as IM,cY as Ba,cZ as Zt,c_ as Cw,c$ as qo,d0 as DI,d1 as yc,d2 as Es,d3 as jw,d4 as Sf,d5 as Iw,T as CI,d6 as Lw,d7 as Ov,d8 as jI,d9 as II,da as LM,db as LI,dc as FM,dd as FI,de as $I,df as BI,dg as UI,dh as VI,di as $M,dj as Fw,dk as GI,dl as X1,dm as Hp,dn as ys,dp as WI,dq as zI,dr as xS,ds as h1,dt as SS,du as HI,dv as XI,Q as my,dw as qI,dx as BM,dy as q1,dz as YI,dA as v1,dB as KI,dC as ZI}from"./index-938a5085.js";import{A as Yy,_ as JI,T as UM,a as QI,b as eL}from"./ReasoningParamSettingDialog.vue_vue_type_style_index_0_scope_true_lang-e82311ad.js";import{b as VM,c as eh,v as Rv,d as tL,e as nL,g as GM,f as AS,a as rL,r as oL,h as iL}from"./reduce-8387171b.js";import{h as aL,i as WM,j as lL,k as uL,l as sL,n as cL,o as fL,p as dL,q as pL,z as hL,f as vL,s as yL,a as mL,m as gL,b as bL,d as _L,e as wL,g as EL,c as OL,r as xL,u as SL}from"./zipObject-cc3b9899.js";import{_ as zM}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-4853de4d.js";var AL=0/0;function TS(e){return typeof e=="number"?e:_v(e)?AL:+e}function ub(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=ms(n),o=ms(o)):(n=TS(n),o=TS(o)),r=e(n,o)}return r}}var TL=ub(function(e,t){return e+t},0);const ML=TL;var kL="Expected a function";function PL(e,t){if(typeof t!="function")throw new TypeError(kL);return e=Ir(e),function(){if(--e<1)return t.apply(this,arguments)}}var NL=wS&&new wS;const Mg=NL;var RL=Mg?function(e,t){return Mg.set(e,t),e}:$d;const HM=RL;function Dy(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Uy(e.prototype),o=e.apply(n,t);return Tf(o)?o:n}}var DL=1;function CL(e,t,n){var o=t&DL,r=Dy(e);function s(){var c=this&&this!==Kp&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var jL=Math.max;function XM(e,t,n,o){for(var r=-1,s=e.length,c=n.length,v=-1,p=t.length,g=jL(s-c,0),b=Array(p+g),_=!o;++v<p;)b[v]=t[v];for(;++r<c;)(_||r<s)&&(b[n[r]]=e[r]);for(;g--;)b[v++]=e[r++];return b}var IL=Math.max;function qM(e,t,n,o){for(var r=-1,s=e.length,c=-1,v=n.length,p=-1,g=t.length,b=IL(s-v,0),_=Array(b+g),E=!o;++r<b;)_[r]=e[r];for(var x=r;++p<g;)_[x+p]=t[p];for(;++c<v;)(E||r<s)&&(_[x+n[c]]=e[r++]);return _}function LL(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function sb(){}var FL=4294967295;function Zr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=FL,this.__views__=[]}Zr.prototype=Uy(sb.prototype);Zr.prototype.constructor=Zr;var $L=Mg?function(e){return Mg.get(e)}:mM;const $w=$L;var BL={};const dv=BL;var UL=Object.prototype,VL=UL.hasOwnProperty;function vg(e){for(var t=e.name+"",n=dv[t],o=VL.call(dv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function Bu(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Bu.prototype=Uy(sb.prototype);Bu.prototype.constructor=Bu;function YM(e){if(e instanceof Zr)return e.clone();var t=new Bu(e.__wrapped__,e.__chain__);return t.__actions__=Lu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var GL=Object.prototype,WL=GL.hasOwnProperty;function ae(e){if(Vu(e)&&!vi(e)&&!(e instanceof Zr)){if(e instanceof Bu)return e;if(WL.call(e,"__wrapped__"))return YM(e)}return new Bu(e)}ae.prototype=sb.prototype;ae.prototype.constructor=ae;function Y1(e){var t=vg(e),n=ae[t];if(typeof n!="function"||!(t in Zr.prototype))return!1;if(e===n)return!0;var o=$w(n);return!!o&&e===o[0]}var zL=Dj(HM);const KM=zL;var HL=/\{\n\/\* \[wrapped with (.+)\] \*/,XL=/,? & /;function qL(e){var t=e.match(HL);return t?t[1].split(XL):[]}var YL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function KL(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(YL,`{
/* [wrapped with `+t+`] */
`)}var ZL=1,JL=2,QL=8,e3=16,t3=32,n3=64,r3=128,o3=256,i3=512,a3=[["ary",r3],["bind",ZL],["bindKey",JL],["curry",QL],["curryRight",e3],["flip",i3],["partial",t3],["partialRight",n3],["rearg",o3]];function l3(e,t){return hc(a3,function(n){var o="_."+n[0];t&n[1]&&!Pw(e,o)&&e.push(o)}),e.sort()}function ZM(e,t,n){var o=t+"";return Cj(e,KL(o,l3(qL(o),n)))}var u3=1,s3=2,c3=4,f3=8,MS=32,kS=64;function JM(e,t,n,o,r,s,c,v,p,g){var b=t&f3,_=b?c:void 0,E=b?void 0:c,x=b?s:void 0,P=b?void 0:s;t|=b?MS:kS,t&=~(b?kS:MS),t&c3||(t&=~(u3|s3));var A=[e,t,r,x,_,P,E,v,p,g],M=n.apply(void 0,A);return Y1(e)&&KM(M,A),M.placeholder=o,ZM(M,e,t)}function Dv(e){var t=e;return t.placeholder}var d3=Math.min;function p3(e,t){for(var n=e.length,o=d3(t.length,n),r=Lu(e);o--;){var s=t[o];e[o]=Vy(s,n)?r[s]:void 0}return e}var PS="__lodash_placeholder__";function Ld(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===PS)&&(e[n]=PS,s[r++]=n)}return s}var h3=1,v3=2,y3=8,m3=16,g3=128,b3=512;function cb(e,t,n,o,r,s,c,v,p,g){var b=t&g3,_=t&h3,E=t&v3,x=t&(y3|m3),P=t&b3,A=E?void 0:Dy(e);function M(){for(var I=arguments.length,D=Array(I),$=I;$--;)D[$]=arguments[$];if(x)var G=Dv(M),W=LL(D,G);if(o&&(D=XM(D,o,r,x)),s&&(D=qM(D,s,c,x)),I-=W,x&&I<g){var X=Ld(D,G);return JM(e,t,cb,M.placeholder,n,D,X,v,p,g-I)}var J=_?n:this,z=E?J[e]:e;return I=D.length,v?D=p3(D,v):P&&I>1&&D.reverse(),b&&p<I&&(D.length=p),this&&this!==Kp&&this instanceof M&&(z=A||Dy(z)),z.apply(J,D)}return M}function _3(e,t,n){var o=Dy(e);function r(){for(var s=arguments.length,c=Array(s),v=s,p=Dv(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==p&&c[s-1]!==p?[]:Ld(c,p);if(s-=g.length,s<n)return JM(e,t,cb,r.placeholder,void 0,c,g,void 0,void 0,n-s);var b=this&&this!==Kp&&this instanceof r?o:e;return Fu(b,this,c)}return r}var w3=1;function E3(e,t,n,o){var r=t&w3,s=Dy(e);function c(){for(var v=-1,p=arguments.length,g=-1,b=o.length,_=Array(b+p),E=this&&this!==Kp&&this instanceof c?s:e;++g<b;)_[g]=o[g];for(;p--;)_[g++]=arguments[++v];return Fu(E,r?n:this,_)}return c}var NS="__lodash_placeholder__",y1=1,O3=2,x3=4,RS=8,dy=128,DS=256,S3=Math.min;function A3(e,t){var n=e[1],o=t[1],r=n|o,s=r<(y1|O3|dy),c=o==dy&&n==RS||o==dy&&n==DS&&e[7].length<=t[8]||o==(dy|DS)&&t[7].length<=t[8]&&n==RS;if(!(s||c))return e;o&y1&&(e[2]=t[2],r|=n&y1?0:x3);var v=t[3];if(v){var p=e[3];e[3]=p?XM(p,v,t[4]):v,e[4]=p?Ld(e[3],NS):t[4]}return v=t[5],v&&(p=e[5],e[5]=p?qM(p,v,t[6]):v,e[6]=p?Ld(e[5],NS):t[6]),v=t[7],v&&(e[7]=v),o&dy&&(e[8]=e[8]==null?t[8]:S3(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var T3="Expected a function",CS=1,M3=2,m1=8,g1=16,b1=32,jS=64,IS=Math.max;function Nf(e,t,n,o,r,s,c,v){var p=t&M3;if(!p&&typeof e!="function")throw new TypeError(T3);var g=o?o.length:0;if(g||(t&=~(b1|jS),o=r=void 0),c=c===void 0?c:IS(Ir(c),0),v=v===void 0?v:Ir(v),g-=r?r.length:0,t&jS){var b=o,_=r;o=r=void 0}var E=p?void 0:$w(e),x=[e,t,n,o,r,b,_,s,c,v];if(E&&A3(x,E),e=x[0],t=x[1],n=x[2],o=x[3],r=x[4],v=x[9]=x[9]===void 0?p?0:e.length:IS(x[9]-g,0),!v&&t&(m1|g1)&&(t&=~(m1|g1)),!t||t==CS)var P=CL(e,t,n);else t==m1||t==g1?P=_3(e,t,v):(t==b1||t==(CS|b1))&&!r.length?P=E3(e,t,n,o):P=cb.apply(void 0,x);var A=E?HM:KM;return ZM(A(P,x),e,t)}var k3=128;function QM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Nf(e,k3,void 0,void 0,void 0,void 0,t)}var P3=Object.prototype,N3=P3.hasOwnProperty,R3=Gy(function(e,t){if(jj(t)||Mv(t)){ob(t,Gu(t),e);return}for(var n in t)N3.call(t,n)&&Ij(e,n,t[n])});const D3=R3;var C3=Gy(function(e,t){ob(t,Zp(t),e)});const LS=C3;var j3=Gy(function(e,t,n,o){ob(t,Zp(t),e,o)});const kg=j3;var I3=Gy(function(e,t,n,o){ob(t,Gu(t),e,o)});const L3=I3;function Bw(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:gM(e,t[n]);return r}var F3=Jp(Bw);const $3=F3;var B3="[object DOMException]",U3="[object Error]";function Uw(e){if(!Vu(e))return!1;var t=Bd(e);return t==U3||t==B3||typeof e.message=="string"&&typeof e.name=="string"&&!Nw(e)}var V3=to(function(e,t){try{return Fu(e,void 0,t)}catch(n){return Uw(n)?n:new Error(n)}});const ek=V3;var G3="Expected a function";function tk(e,t){var n;if(typeof t!="function")throw new TypeError(G3);return e=Ir(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var W3=1,z3=32,Vw=to(function(e,t,n){var o=W3;if(n.length){var r=Ld(n,Dv(Vw));o|=z3}return Nf(e,o,t,n,r)});Vw.placeholder={};const nk=Vw;var H3=Jp(function(e,t){return hc(t,function(n){n=ib(n),Wy(e,n,nk(e[n],e))}),e});const X3=H3;var q3=1,Y3=2,K3=32,Gw=to(function(e,t,n){var o=q3|Y3;if(n.length){var r=Ld(n,Dv(Gw));o|=K3}return Nf(t,o,e,n,r)});Gw.placeholder={};const Z3=Gw;function Ud(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:gs(e,t,n)}var J3="\\ud800-\\udfff",Q3="\\u0300-\\u036f",e8="\\ufe20-\\ufe2f",t8="\\u20d0-\\u20ff",n8=Q3+e8+t8,r8="\\ufe0e\\ufe0f",o8="\\u200d",i8=RegExp("["+o8+J3+n8+r8+"]");function Cv(e){return i8.test(e)}function a8(e){return e.split("")}var rk="\\ud800-\\udfff",l8="\\u0300-\\u036f",u8="\\ufe20-\\ufe2f",s8="\\u20d0-\\u20ff",c8=l8+u8+s8,f8="\\ufe0e\\ufe0f",d8="["+rk+"]",K1="["+c8+"]",Z1="\\ud83c[\\udffb-\\udfff]",p8="(?:"+K1+"|"+Z1+")",ok="[^"+rk+"]",ik="(?:\\ud83c[\\udde6-\\uddff]){2}",ak="[\\ud800-\\udbff][\\udc00-\\udfff]",h8="\\u200d",lk=p8+"?",uk="["+f8+"]?",v8="(?:"+h8+"(?:"+[ok,ik,ak].join("|")+")"+uk+lk+")*",y8=uk+lk+v8,m8="(?:"+[ok+K1+"?",K1,ik,ak,d8].join("|")+")",g8=RegExp(Z1+"(?="+Z1+")|"+m8+y8,"g");function b8(e){return e.match(g8)||[]}function bs(e){return Cv(e)?b8(e):a8(e)}function sk(e){return function(t){t=Do(t);var n=Cv(t)?bs(t):void 0,o=n?n[0]:t.charAt(0),r=n?Ud(n,1).join(""):t.slice(1);return o[e]()+r}}var _8=sk("toUpperCase");const Ww=_8;function ck(e){return Ww(Do(e).toLowerCase())}function zw(e){return function(t){return e==null?void 0:e[t]}}var w8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},E8=zw(w8);const O8=E8;var x8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,S8="\\u0300-\\u036f",A8="\\ufe20-\\ufe2f",T8="\\u20d0-\\u20ff",M8=S8+A8+T8,k8="["+M8+"]",P8=RegExp(k8,"g");function fk(e){return e=Do(e),e&&e.replace(x8,O8).replace(P8,"")}var N8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function R8(e){return e.match(N8)||[]}var D8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function C8(e){return D8.test(e)}var dk="\\ud800-\\udfff",j8="\\u0300-\\u036f",I8="\\ufe20-\\ufe2f",L8="\\u20d0-\\u20ff",F8=j8+I8+L8,pk="\\u2700-\\u27bf",hk="a-z\\xdf-\\xf6\\xf8-\\xff",$8="\\xac\\xb1\\xd7\\xf7",B8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",U8="\\u2000-\\u206f",V8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vk="A-Z\\xc0-\\xd6\\xd8-\\xde",G8="\\ufe0e\\ufe0f",yk=$8+B8+U8+V8,mk="['’]",FS="["+yk+"]",W8="["+F8+"]",gk="\\d+",z8="["+pk+"]",bk="["+hk+"]",_k="[^"+dk+yk+gk+pk+hk+vk+"]",H8="\\ud83c[\\udffb-\\udfff]",X8="(?:"+W8+"|"+H8+")",q8="[^"+dk+"]",wk="(?:\\ud83c[\\udde6-\\uddff]){2}",Ek="[\\ud800-\\udbff][\\udc00-\\udfff]",rv="["+vk+"]",Y8="\\u200d",$S="(?:"+bk+"|"+_k+")",K8="(?:"+rv+"|"+_k+")",BS="(?:"+mk+"(?:d|ll|m|re|s|t|ve))?",US="(?:"+mk+"(?:D|LL|M|RE|S|T|VE))?",Ok=X8+"?",xk="["+G8+"]?",Z8="(?:"+Y8+"(?:"+[q8,wk,Ek].join("|")+")"+xk+Ok+")*",J8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Q8="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",eF=xk+Ok+Z8,tF="(?:"+[z8,wk,Ek].join("|")+")"+eF,nF=RegExp([rv+"?"+bk+"+"+BS+"(?="+[FS,rv,"$"].join("|")+")",K8+"+"+US+"(?="+[FS,rv+$S,"$"].join("|")+")",rv+"?"+$S+"+"+BS,rv+"+"+US,Q8,J8,gk,tF].join("|"),"g");function rF(e){return e.match(nF)||[]}function Sk(e,t,n){return e=Do(e),t=n?void 0:t,t===void 0?C8(e)?rF(e):R8(e):e.match(t)||[]}var oF="['’]",iF=RegExp(oF,"g");function jv(e){return function(t){return VM(Sk(fk(t).replace(iF,"")),e,"")}}var aF=jv(function(e,t,n){return t=t.toLowerCase(),e+(n?ck(t):t)});const lF=aF;var uF=Kp.isFinite,sF=Math.min;function Hw(e){var t=Math[e];return function(n,o){if(n=xf(n),o=o==null?0:sF(Ir(o),292),o&&uF(n)){var r=(Do(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(Do(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var cF=Hw("ceil");const fF=cF;function Ak(e){var t=ae(e);return t.__chain__=!0,t}var dF=Math.ceil,pF=Math.max;function hF(e,t,n){(n?vc(e,t,n):t===void 0)?t=1:t=pF(Ir(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(dF(o/t));r<o;)c[s++]=gs(e,r,r+=t);return c}function th(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function vF(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=xf(n),n=n===n?n:0),t!==void 0&&(t=xf(t),t=t===t?t:0),th(xf(e),t,n)}var yF=1,mF=4;function gF(e,t){return t=typeof t=="function"?t:void 0,kv(e,yF|mF,t)}var bF=4;function _F(e,t){return t=typeof t=="function"?t:void 0,kv(e,bF,t)}function wF(){return new Bu(this.value(),this.__chain__)}function EF(e){for(var t=-1,n=e==null?0:e.length,o=0,r=[];++t<n;){var s=e[t];s&&(r[o++]=s)}return r}function OF(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return zy(vi(n)?Lu(n):[n],ws(t,1))}var xF="Expected a function";function SF(e){var t=e==null?0:e.length,n=Jr;return e=t?Sa(e,function(o){if(typeof o[1]!="function")throw new TypeError(xF);return[n(o[0]),o[1]]}):[],to(function(o){for(var r=-1;++r<t;){var s=e[r];if(Fu(s[0],this,o))return Fu(s[1],this,o)}})}function Tk(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function AF(e){var t=Gu(e);return function(n){return Tk(n,e,t)}}var TF=1;function MF(e){return AF(kv(e,TF))}function kF(e,t){return t==null||Tk(e,t,Gu(t))}function PF(e,t,n,o){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(o,c,n(c),e)}return o}function NF(e,t,n,o){return ab(e,function(r,s,c){t(o,r,n(r),c)}),o}function fb(e,t){return function(n,o){var r=vi(n)?PF:NF,s=t?t():{};return r(n,e,Jr(o),s)}}var RF=Object.prototype,DF=RF.hasOwnProperty,CF=fb(function(e,t,n){DF.call(e,n)?++e[n]:Wy(e,n,1)});const jF=CF;function IF(e,t){var n=Uy(e);return t==null?n:Lj(n,t)}var LF=8;function Xw(e,t,n){t=n?void 0:t;var o=Nf(e,LF,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Xw.placeholder,o}Xw.placeholder={};var FF=16;function qw(e,t,n){t=n?void 0:t;var o=Nf(e,FF,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=qw.placeholder,o}qw.placeholder={};function $F(e,t){return e==null||e!==e?t:e}function Mk(e,t,n,o,r,s){return Tf(e)&&Tf(t)&&(s.set(t,e),bM(e,t,void 0,Mk,s),s.delete(t)),e}var BF=Gy(function(e,t,n,o){bM(e,t,n,o)});const kk=BF;var UF=to(function(e){return e.push(void 0,Mk),Fu(kk,void 0,e)});const VF=UF;var GF="Expected a function";function Pk(e,t,n){if(typeof e!="function")throw new TypeError(GF);return setTimeout(function(){e.apply(void 0,n)},t)}var WF=to(function(e,t){return Pk(e,1,t)});const zF=WF;var HF=to(function(e,t,n){return Pk(e,xf(t)||0,n)});const XF=HF;var qF=200;function Ky(e,t,n,o){var r=-1,s=Pw,c=!0,v=e.length,p=[],g=t.length;if(!v)return p;n&&(t=Sa(t,Mf(n))),o?(s=wM,c=!1):t.length>=qF&&(s=H1,c=!1,t=new _M(t));e:for(;++r<v;){var b=e[r],_=n==null?b:n(b);if(b=o||b!==0?b:0,c&&_===_){for(var E=g;E--;)if(t[E]===_)continue e;p.push(b)}else s(t,_,o)||p.push(b)}return p}var YF=to(function(e,t){return ea(e)?Ky(e,ws(t,1,ea,!0)):[]});const KF=YF;var ZF=to(function(e,t){var n=$u(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,ws(t,1,ea,!0),Jr(n)):[]});const JF=ZF;var QF=to(function(e,t){var n=$u(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,ws(t,1,ea,!0),void 0,n):[]});const e$=QF;var t$=ub(function(e,t){return e/t},1);const n$=t$;function r$(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),gs(e,t<0?0:t,o)):[]}function o$(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,gs(e,0,t<0?0:t)):[]}function db(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?gs(e,o?0:s,o?s+1:r):gs(e,o?s+1:0,o?r:s)}function i$(e,t){return e&&e.length?db(e,Jr(t),!0,!0):[]}function a$(e,t){return e&&e.length?db(e,Jr(t),!0):[]}function l$(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var u$=Fj(!0);const Nk=u$;function Yw(e,t){return e&&Nk(e,t,Gu)}var s$=$j(Yw,!0);const Rk=s$;function VS(e,t){var n=vi(e)?l$:Rk;return n(e,eh(t))}function c$(e,t,n){e=Do(e),t=ms(t);var o=e.length;n=n===void 0?o:th(Ir(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function f$(e,t){return Sa(t,function(n){return[n,e[n]]})}function d$(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var p$="[object Map]",h$="[object Set]";function Dk(e){return function(t){var n=lb(t);return n==p$?EM(t):n==h$?d$(t):f$(t,e(t))}}var v$=Dk(Gu);const GS=v$;var y$=Dk(Zp);const WS=y$;var m$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g$=zw(m$);const b$=g$;var Ck=/[&<>"']/g,_$=RegExp(Ck.source);function jk(e){return e=Do(e),e&&_$.test(e)?e.replace(Ck,b$):e}var Ik=/[\\^$.*+?()[\]{}|]/g,w$=RegExp(Ik.source);function E$(e){return e=Do(e),e&&w$.test(e)?e.replace(Ik,"\\$&"):e}function Lk(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function O$(e,t){var n=!0;return ab(e,function(o,r,s){return n=!!t(o,r,s),n}),n}function x$(e,t,n){var o=vi(e)?Lk:O$;return n&&vc(e,t,n)&&(t=void 0),o(e,Jr(t))}var S$=4294967295;function Fk(e){return e?th(Ir(e),0,S$):0}function A$(e,t,n,o){var r=e.length;for(n=Ir(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:Ir(o),o<0&&(o+=r),o=n>o?0:Fk(o);n<o;)e[n++]=t;return e}function T$(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&vc(e,t,n)&&(n=0,o=r),A$(e,t,n,o)):[]}function $k(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function M$(e,t){return $k(e,Jr(t),Qp)}var k$=aL(OM);const P$=k$;function N$(e,t){return $k(e,Jr(t),Yw)}function zS(e){return e&&e.length?e[0]:void 0}var R$=1/0;function D$(e,t){return ws(Rw(e,t),R$)}function C$(e,t,n){return n=n===void 0?1:Ir(n),ws(Rw(e,t),n)}function j$(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Ir(t),ws(e,t)):[]}var I$=512;function L$(e){return Nf(e,I$)}var F$=Hw("floor");const $$=F$;var B$="Expected a function",U$=8,V$=32,G$=128,W$=256;function Bk(e){return Jp(function(t){var n=t.length,o=n,r=Bu.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(B$);if(r&&!c&&vg(s)=="wrapper")var c=new Bu([],!0)}for(o=c?o:n;++o<n;){s=t[o];var v=vg(s),p=v=="wrapper"?$w(s):void 0;p&&Y1(p[0])&&p[1]==(G$|U$|V$|W$)&&!p[4].length&&p[9]==1?c=c[vg(p[0])].apply(c,p[3]):c=s.length==1&&Y1(s)?c[v]():c.thru(s)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&vi(b))return c.plant(b).value();for(var _=0,E=n?t[_].apply(this,g):b;++_<n;)E=t[_].call(this,E);return E}})}var z$=Bk();const H$=z$;var X$=Bk(!0);const q$=X$;function Y$(e,t){return e==null?e:Nk(e,eh(t),Zp)}function K$(e,t){return e&&Yw(e,eh(t))}function pb(e,t){return Pv(t,function(n){return Nv(e[n])})}function Z$(e){return e==null?[]:pb(e,Gu(e))}function J$(e){return e==null?[]:pb(e,Zp(e))}var Q$=Object.prototype,e4=Q$.hasOwnProperty,t4=fb(function(e,t,n){e4.call(e,n)?e[n].push(t):Wy(e,n,[t])});const n4=t4;function hb(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=xf(t),n=xf(n)),e(t,n)}}var r4=hb(WM);const o4=r4;var i4=hb(function(e,t){return e>=t});const a4=i4;var l4=Math.max,u4=Math.min;function s4(e,t,n){return e>=u4(t,n)&&e<l4(t,n)}function c4(e,t,n){return t=Ry(t),n===void 0?(n=t,t=0):n=Ry(n),e=xf(e),s4(e,t,n)}var f4="[object String]";function vb(e){return typeof e=="string"||!vi(e)&&Vu(e)&&Bd(e)==f4}var d4=Math.max;function p4(e,t,n,o){e=Mv(e)?e:Rv(e),n=n&&!o?Ir(n):0;var r=e.length;return n<0&&(n=d4(r+n,0)),vb(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Hy(e,t,n)>-1}var h4=Math.max;function v4(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Ir(n);return r<0&&(r=h4(o+r,0)),Hy(e,t,r)}function y4(e){var t=e==null?0:e.length;return t?gs(e,0,-1):[]}var m4=Math.min;function Kw(e,t,n){for(var o=n?wM:Pw,r=e[0].length,s=e.length,c=s,v=Array(s),p=1/0,g=[];c--;){var b=e[c];c&&t&&(b=Sa(b,Mf(t))),p=m4(b.length,p),v[c]=!n&&(t||r>=120&&b.length>=120)?new _M(c&&b):void 0}b=e[0];var _=-1,E=v[0];e:for(;++_<r&&g.length<p;){var x=b[_],P=t?t(x):x;if(x=n||x!==0?x:0,!(E?H1(E,P):o(g,P,n))){for(c=s;--c;){var A=v[c];if(!(A?H1(A,P):o(e[c],P,n)))continue e}E&&E.push(P),g.push(x)}}return g}function Zw(e){return ea(e)?e:[]}var g4=to(function(e){var t=Sa(e,Zw);return t.length&&t[0]===e[0]?Kw(t):[]});const b4=g4;var _4=to(function(e){var t=$u(e),n=Sa(e,Zw);return t===$u(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Kw(n,Jr(t)):[]});const w4=_4;var E4=to(function(e){var t=$u(e),n=Sa(e,Zw);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?Kw(n,void 0,t):[]});const O4=E4;function x4(e,t,n,o){return Qp(e,function(r,s,c){t(o,n(r),s,c)}),o}function Uk(e,t){return function(n,o){return x4(n,e,t(o),{})}}var S4=Object.prototype,A4=S4.toString,T4=Uk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=A4.call(t)),e[t]=n},xM($d));const M4=T4;var Vk=Object.prototype,k4=Vk.hasOwnProperty,P4=Vk.toString,N4=Uk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=P4.call(t)),k4.call(e,t)?e[t].push(n):e[t]=[n]},Jr);const R4=N4;function Zy(e,t,n){t=SM(t,e),e=Bj(e,t);var o=e==null?e:e[ib($u(t))];return o==null?void 0:Fu(o,e,n)}var D4=to(Zy);const C4=D4;var j4=to(function(e,t,n){var o=-1,r=typeof t=="function",s=Mv(e)?Array(e.length):[];return ab(e,function(c){s[++o]=r?Fu(t,c,n):Zy(c,t,n)}),s});const I4=j4;var L4="[object ArrayBuffer]";function F4(e){return Vu(e)&&Bd(e)==L4}var HS=wv&&wv.isArrayBuffer,$4=HS?Mf(HS):F4;const B4=$4;var U4="[object Boolean]";function V4(e){return e===!0||e===!1||Vu(e)&&Bd(e)==U4}var G4="[object Date]";function W4(e){return Vu(e)&&Bd(e)==G4}var XS=wv&&wv.isDate,z4=XS?Mf(XS):W4;const H4=z4;function X4(e){return Vu(e)&&e.nodeType===1&&!Nw(e)}function q4(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?Uj(e,t,void 0,n):!!o}var Y4=Kp.isFinite;function K4(e){return typeof e=="number"&&Y4(e)}function Gk(e){return typeof e=="number"&&e==Ir(e)}function Z4(e,t){return e===t||AM(e,t,TM(t))}function J4(e,t,n){return n=typeof n=="function"?n:void 0,AM(e,t,TM(t),n)}var Q4="[object Number]";function Wk(e){return typeof e=="number"||Vu(e)&&Bd(e)==Q4}function e5(e){return Wk(e)&&e!=+e}var t5=Vj?Nv:MM;const n5=t5;var r5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function o5(e){if(n5(e))throw new Error(r5);return Gj(e)}var i5="[object RegExp]";function a5(e){return Vu(e)&&Bd(e)==i5}var qS=wv&&wv.isRegExp,l5=qS?Mf(qS):a5;const Jw=l5;var YS=9007199254740991;function u5(e){return Gk(e)&&e>=-YS&&e<=YS}var s5="[object WeakMap]";function c5(e){return Vu(e)&&lb(e)==s5}var f5="[object WeakSet]";function d5(e){return Vu(e)&&Bd(e)==f5}var p5=1;function h5(e){return Jr(typeof e=="function"?e:kv(e,p5))}var v5=Array.prototype,y5=v5.join;function m5(e,t){return e==null?"":y5.call(e,t)}var g5=jv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const b5=g5;var _5=fb(function(e,t,n){Wy(e,n,t)});const w5=_5;function E5(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var O5=Math.max,x5=Math.min;function S5(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=Ir(n),r=r<0?O5(o+r,0):x5(r,o-1)),t===t?E5(e,t,r):Wj(e,zj,r,!0)}var A5=jv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const T5=A5;var M5=sk("toLowerCase");const k5=M5;var P5=hb(lL);const N5=P5;var R5=hb(function(e,t){return e<=t});const D5=R5;function C5(e,t){var n={};return t=Jr(t),Qp(e,function(o,r,s){Wy(n,t(o,r,s),o)}),n}var j5=1;function I5(e){return Hj(kv(e,j5))}var L5=1;function F5(e,t){return Xj(e,kv(t,L5))}function $5(e,t){return e&&e.length?uL(e,Jr(t),WM):void 0}function Qw(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var B5=0/0;function zk(e,t){var n=e==null?0:e.length;return n?Qw(e,t)/n:B5}function U5(e){return zk(e,$d)}function V5(e,t){return zk(e,Jr(t))}var G5=to(function(e,t){return function(n){return Zy(n,e,t)}});const W5=G5;var z5=to(function(e,t){return function(n){return Zy(e,n,t)}});const H5=z5;function Hk(e,t,n){var o=Gu(t),r=pb(t,o),s=!(Tf(n)&&"chain"in n)||!!n.chain,c=Nv(e);return hc(r,function(v){var p=t[v];e[v]=p,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var b=e(this.__wrapped__),_=b.__actions__=Lu(this.__actions__);return _.push({func:p,args:arguments,thisArg:e}),b.__chain__=g,b}return p.apply(e,zy([this.value()],arguments))})}),e}var X5=ub(function(e,t){return e*t},1);const q5=X5;var Y5="Expected a function";function Jy(e){if(typeof e!="function")throw new TypeError(Y5);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function K5(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var Z5="[object Map]",J5="[object Set]",_1=Tg?Tg.iterator:void 0;function Xk(e){if(!e)return[];if(Mv(e))return vb(e)?bs(e):Lu(e);if(_1&&e[_1])return K5(e[_1]());var t=lb(e),n=t==Z5?EM:t==J5?qj:Rv;return n(e)}function Q5(){this.__values__===void 0&&(this.__values__=Xk(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function qk(e,t){var n=e.length;if(n)return t+=t<0?n:0,Vy(t,n)?e[t]:void 0}function eB(e,t){return e&&e.length?qk(e,Ir(t)):void 0}function tB(e){return e=Ir(e),to(function(t){return qk(t,e)})}function Yk(e,t){if(e==null)return{};var n=Sa(Yj(e),function(o){return[o]});return t=Jr(t),Kj(e,n,function(o,r){return t(o,r[0])})}function nB(e,t){return Yk(e,Jy(Jr(t)))}function rB(e){return tk(2,e)}function oB(e,t,n,o){return e==null?[]:(vi(t)||(t=t==null?[]:[t]),n=o?void 0:n,vi(n)||(n=n==null?[]:[n]),sL(e,t,n))}function eE(e){return Jp(function(t){return t=Sa(t,Mf(Jr)),to(function(n){var o=this;return e(t,function(r){return Fu(r,o,n)})})})}var iB=eE(Sa);const aB=iB;var lB=to;const uB=lB;var sB=Math.min,cB=uB(function(e,t){t=t.length==1&&vi(t[0])?Sa(t[0],Mf(Jr)):Sa(ws(t,1),Mf(Jr));var n=t.length;return to(function(o){for(var r=-1,s=sB(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Fu(e,this,o)})});const fB=cB;var dB=eE(Lk);const pB=dB;var hB=eE(kM);const vB=hB;var yB=9007199254740991,mB=Math.floor;function J1(e,t){var n="";if(!e||t<1||t>yB)return n;do t%2&&(n+=e),t=mB(t/2),t&&(e+=e);while(t);return n}var gB=PM("length");const bB=gB;var Kk="\\ud800-\\udfff",_B="\\u0300-\\u036f",wB="\\ufe20-\\ufe2f",EB="\\u20d0-\\u20ff",OB=_B+wB+EB,xB="\\ufe0e\\ufe0f",SB="["+Kk+"]",Q1="["+OB+"]",ew="\\ud83c[\\udffb-\\udfff]",AB="(?:"+Q1+"|"+ew+")",Zk="[^"+Kk+"]",Jk="(?:\\ud83c[\\udde6-\\uddff]){2}",Qk="[\\ud800-\\udbff][\\udc00-\\udfff]",TB="\\u200d",eP=AB+"?",tP="["+xB+"]?",MB="(?:"+TB+"(?:"+[Zk,Jk,Qk].join("|")+")"+tP+eP+")*",kB=tP+eP+MB,PB="(?:"+[Zk+Q1+"?",Q1,Jk,Qk,SB].join("|")+")",KS=RegExp(ew+"(?="+ew+")|"+PB+kB,"g");function NB(e){for(var t=KS.lastIndex=0;KS.test(e);)++t;return t}function Iv(e){return Cv(e)?NB(e):bB(e)}var RB=Math.ceil;function Pg(e,t){t=t===void 0?" ":ms(t);var n=t.length;if(n<2)return n?J1(t,e):t;var o=J1(t,RB(e/Iv(t)));return Cv(t)?Ud(bs(o),0,e).join(""):o.slice(0,e)}var DB=Math.ceil,CB=Math.floor;function jB(e,t,n){e=Do(e),t=Ir(t);var o=t?Iv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Pg(CB(r),n)+e+Pg(DB(r),n)}function IB(e,t,n){e=Do(e),t=Ir(t);var o=t?Iv(e):0;return t&&o<t?e+Pg(t-o,n):e}function LB(e,t,n){e=Do(e),t=Ir(t);var o=t?Iv(e):0;return t&&o<t?Pg(t-o,n)+e:e}var FB=/^\s+/,$B=Kp.parseInt;function BB(e,t,n){return n||t==null?t=0:t&&(t=+t),$B(Do(e).replace(FB,""),t||0)}var UB=32,tE=to(function(e,t){var n=Ld(t,Dv(tE));return Nf(e,UB,void 0,t,n)});tE.placeholder={};const nP=tE;var VB=64,nE=to(function(e,t){var n=Ld(t,Dv(nE));return Nf(e,VB,void 0,t,n)});nE.placeholder={};const GB=nE;var WB=fb(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const zB=WB;function HB(e){for(var t,n=this;n instanceof sb;){var o=YM(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function XB(e){return function(t){return e==null?void 0:NM(e,t)}}function qB(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var YB=Array.prototype,ZS=YB.splice;function rE(e,t,n,o){var r=o?qB:Hy,s=-1,c=t.length,v=e;for(e===t&&(t=Lu(t)),n&&(v=Sa(e,Mf(n)));++s<c;)for(var p=0,g=t[s],b=n?n(g):g;(p=r(v,b,p,o))>-1;)v!==e&&ZS.call(v,p,1),ZS.call(e,p,1);return e}function rP(e,t){return e&&e.length&&t&&t.length?rE(e,t):e}var KB=to(rP);const ZB=KB;function JB(e,t,n){return e&&e.length&&t&&t.length?rE(e,t,Jr(n)):e}function QB(e,t,n){return e&&e.length&&t&&t.length?rE(e,t,void 0,n):e}var e6=Array.prototype,t6=e6.splice;function oP(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Vy(r)?t6.call(e,r,1):RM(e,r)}}return e}var n6=Jp(function(e,t){var n=e==null?0:e.length,o=Bw(e,t);return oP(e,Sa(t,function(r){return Vy(r,n)?+r:r}).sort(cL)),o});const r6=n6;var o6=Math.floor,i6=Math.random;function oE(e,t){return e+o6(i6()*(t-e+1))}var a6=parseFloat,l6=Math.min,u6=Math.random;function s6(e,t,n){if(n&&typeof n!="boolean"&&vc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Ry(e),t===void 0?(t=e,e=0):t=Ry(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=u6();return l6(e+r*(t-e+a6("1e-"+((r+"").length-1))),t)}return oE(e,t)}var c6=fL(!0);const f6=c6;var d6=256,p6=Jp(function(e,t){return Nf(e,d6,void 0,void 0,void 0,t)});const h6=p6;function v6(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function y6(e,t,n){var o=vi(e)?v6:tL,r=arguments.length<3;return o(e,Jr(t),n,r,Rk)}function m6(e,t){var n=vi(e)?Pv:nL;return n(e,Jy(Jr(t)))}function g6(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=Jr(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return oP(e,r),n}function b6(e,t,n){return(n?vc(e,t,n):t===void 0)?t=1:t=Ir(t),J1(Do(e),t)}function _6(){var e=arguments,t=Do(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var w6="Expected a function";function E6(e,t){if(typeof e!="function")throw new TypeError(w6);return t=t===void 0?t:Ir(t),to(e,t)}function O6(e,t,n){t=SM(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[ib(t[o])];s===void 0&&(o=r,s=n),e=Nv(s)?s.call(e):s}return e}var x6=Array.prototype,S6=x6.reverse;function tw(e){return e==null?e:S6.call(e)}var A6=Hw("round");const T6=A6;function iP(e){var t=e.length;return t?e[oE(0,t-1)]:void 0}function M6(e){return iP(Rv(e))}function k6(e){var t=vi(e)?iP:M6;return t(e)}function yb(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=oE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function P6(e,t){return yb(Lu(e),th(t,0,e.length))}function N6(e,t){var n=Rv(e);return yb(n,th(t,0,n.length))}function R6(e,t,n){(n?vc(e,t,n):t===void 0)?t=1:t=Ir(t);var o=vi(e)?P6:N6;return o(e,t)}function D6(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:Dw(e,t,n,o)}function C6(e){return yb(Lu(e))}function j6(e){return yb(Rv(e))}function I6(e){var t=vi(e)?C6:j6;return t(e)}var L6="[object Map]",F6="[object Set]";function $6(e){if(e==null)return 0;if(Mv(e))return vb(e)?Iv(e):e.length;var t=lb(e);return t==L6||t==F6?e.size:Zj(e).length}function B6(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&vc(e,t,n)?(t=0,n=o):(t=t==null?0:Ir(t),n=n===void 0?o:Ir(n)),gs(e,t,n)):[]}var U6=jv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const V6=U6;function G6(e,t){var n;return ab(e,function(o,r,s){return n=t(o,r,s),!n}),!!n}function W6(e,t,n){var o=vi(e)?kM:G6;return n&&vc(e,t,n)&&(t=void 0),o(e,Jr(t))}var z6=4294967295,H6=z6-1,X6=Math.floor,q6=Math.min;function iE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,p=_v(t),g=t===void 0;r<s;){var b=X6((r+s)/2),_=n(e[b]),E=_!==void 0,x=_===null,P=_===_,A=_v(_);if(c)var M=o||P;else g?M=P&&(o||E):v?M=P&&E&&(o||!x):p?M=P&&E&&!x&&(o||!A):x||A?M=!1:M=o?_<=t:_<t;M?r=b+1:s=b}return q6(s,H6)}var Y6=4294967295,K6=Y6>>>1;function mb(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=K6){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!_v(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return iE(e,t,$d,n)}function Z6(e,t){return mb(e,t)}function J6(e,t,n){return iE(e,t,Jr(n))}function Q6(e,t){var n=e==null?0:e.length;if(n){var o=mb(e,t);if(o<n&&Xy(e[o],t))return o}return-1}function eU(e,t){return mb(e,t,!0)}function tU(e,t,n){return iE(e,t,Jr(n),!0)}function nU(e,t){var n=e==null?0:e.length;if(n){var o=mb(e,t,!0)-1;if(Xy(e[o],t))return o}return-1}function aP(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],v=t?t(c):c;if(!n||!Xy(v,p)){var p=v;s[r++]=c===0?0:c}}return s}function rU(e){return e&&e.length?aP(e):[]}function oU(e,t){return e&&e.length?aP(e,Jr(t)):[]}var iU=4294967295;function aU(e,t,n){return n&&typeof n!="number"&&vc(e,t,n)&&(t=n=void 0),n=n===void 0?iU:n>>>0,n?(e=Do(e),e&&(typeof t=="string"||t!=null&&!Jw(t))&&(t=ms(t),!t&&Cv(e))?Ud(bs(e),0,n):e.split(t,n)):[]}var lU="Expected a function",uU=Math.max;function sU(e,t){if(typeof e!="function")throw new TypeError(lU);return t=t==null?0:uU(Ir(t),0),to(function(n){var o=n[t],r=Ud(n,0,t);return o&&zy(r,o),Fu(e,this,r)})}var cU=jv(function(e,t,n){return e+(n?" ":"")+Ww(t)});const fU=cU;function dU(e,t,n){return e=Do(e),n=n==null?0:th(Ir(n),0,e.length),t=ms(t),e.slice(n,n+t.length)==t}function pU(){return{}}function hU(){return""}function vU(){return!0}var yU=ub(function(e,t){return e-t},0);const mU=yU;function gU(e){return e&&e.length?Qw(e,$d):0}function bU(e,t){return e&&e.length?Qw(e,Jr(t)):0}function _U(e){var t=e==null?0:e.length;return t?gs(e,1,t):[]}function wU(e,t,n){return e&&e.length?(t=n||t===void 0?1:Ir(t),gs(e,0,t<0?0:t)):[]}function EU(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,gs(e,t<0?0:t,o)):[]}function OU(e,t){return e&&e.length?db(e,Jr(t),!1,!0):[]}function xU(e,t){return e&&e.length?db(e,Jr(t)):[]}function SU(e,t){return t(e),e}var lP=Object.prototype,AU=lP.hasOwnProperty;function JS(e,t,n,o){return e===void 0||Xy(e,lP[n])&&!AU.call(o,n)?t:e}var TU={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function MU(e){return"\\"+TU[e]}var kU=/<%=([\s\S]+?)%>/g;const uP=kU;var PU=/<%-([\s\S]+?)%>/g;const NU=PU;var RU=/<%([\s\S]+?)%>/g;const DU=RU;var CU={escape:NU,evaluate:DU,interpolate:uP,variable:"",imports:{_:{escape:jk}}};const nw=CU;var jU="Invalid `variable` option passed into `_.template`",IU=/\b__p \+= '';/g,LU=/\b(__p \+=) '' \+/g,FU=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$U=/[()=,{}\[\]\/\s]/,BU=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,og=/($^)/,UU=/['\n\r\u2028\u2029\\]/g,VU=Object.prototype,QS=VU.hasOwnProperty;function GU(e,t,n){var o=nw.imports._.templateSettings||nw;n&&vc(e,t,n)&&(t=void 0),e=Do(e),t=kg({},t,o,JS);var r=kg({},t.imports,o.imports,JS),s=Gu(r),c=GM(r,s),v,p,g=0,b=t.interpolate||og,_="__p += '",E=RegExp((t.escape||og).source+"|"+b.source+"|"+(b===uP?BU:og).source+"|"+(t.evaluate||og).source+"|$","g"),x=QS.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(E,function(M,I,D,$,G,W){return D||(D=$),_+=e.slice(g,W).replace(UU,MU),I&&(v=!0,_+=`' +
__e(`+I+`) +
'`),G&&(p=!0,_+=`';
`+G+`;
__p += '`),D&&(_+=`' +
((__t = (`+D+`)) == null ? '' : __t) +
'`),g=W+M.length,M}),_+=`';
`;var P=QS.call(t,"variable")&&t.variable;if(!P)_=`with (obj) {
`+_+`
}
`;else if($U.test(P))throw new Error(jU);_=(p?_.replace(IU,""):_).replace(LU,"$1").replace(FU,"$1;"),_="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_+`return __p
}`;var A=ek(function(){return Function(s,x+"return "+_).apply(void 0,c)});if(A.source=_,Uw(A))throw A;return A}function Qy(e,t){return t(e)}var WU=9007199254740991,w1=4294967295,zU=Math.min;function HU(e,t){if(e=Ir(e),e<1||e>WU)return[];var n=w1,o=zU(e,w1);t=eh(t),e-=w1;for(var r=DM(o,t);++n<e;)t(n);return r}function XU(){return this}function sP(e,t){var n=e;return n instanceof Zr&&(n=n.value()),VM(t,function(o,r){return r.func.apply(r.thisArg,zy([o],r.args))},n)}function E1(){return sP(this.__wrapped__,this.__actions__)}function qU(e){return Do(e).toLowerCase()}function YU(e){return vi(e)?Sa(e,ib):_v(e)?[e]:Lu(Jj(Do(e)))}var eA=9007199254740991;function KU(e){return e?th(Ir(e),-eA,eA):e===0?e:0}function ZU(e){return Do(e).toUpperCase()}function JU(e,t,n){var o=vi(e),r=o||CM(e)||jM(e);if(t=Jr(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:Tf(e)?n=Nv(s)?Uy(Qj(e)):{}:n={}}return(r?hc:Qp)(e,function(c,v,p){return t(n,c,v,p)}),n}function cP(e,t){for(var n=e.length;n--&&Hy(t,e[n],0)>-1;);return n}function fP(e,t){for(var n=-1,o=e.length;++n<o&&Hy(t,e[n],0)>-1;);return n}function QU(e,t,n){if(e=Do(e),e&&(n||t===void 0))return eI(e);if(!e||!(t=ms(t)))return e;var o=bs(e),r=bs(t),s=fP(o,r),c=cP(o,r)+1;return Ud(o,s,c).join("")}function eV(e,t,n){if(e=Do(e),e&&(n||t===void 0))return e.slice(0,tI(e)+1);if(!e||!(t=ms(t)))return e;var o=bs(e),r=cP(o,bs(t))+1;return Ud(o,0,r).join("")}var tV=/^\s+/;function nV(e,t,n){if(e=Do(e),e&&(n||t===void 0))return e.replace(tV,"");if(!e||!(t=ms(t)))return e;var o=bs(e),r=fP(o,bs(t));return Ud(o,r).join("")}var rV=30,oV="...",iV=/\w*$/;function aV(e,t){var n=rV,o=oV;if(Tf(t)){var r="separator"in t?t.separator:r;n="length"in t?Ir(t.length):n,o="omission"in t?ms(t.omission):o}e=Do(e);var s=e.length;if(Cv(e)){var c=bs(e);s=c.length}if(n>=s)return e;var v=n-Iv(o);if(v<1)return o;var p=c?Ud(c,0,v).join(""):e.slice(0,v);if(r===void 0)return p+o;if(c&&(v+=p.length-v),Jw(r)){if(e.slice(v).search(r)){var g,b=p;for(r.global||(r=RegExp(r.source,Do(iV.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var _=g.index;p=p.slice(0,_===void 0?v:_)}}else if(e.indexOf(ms(r),v)!=v){var E=p.lastIndexOf(r);E>-1&&(p=p.slice(0,E))}return p+o}function lV(e){return QM(e,1)}var uV={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sV=zw(uV);const cV=sV;var dP=/&(?:amp|lt|gt|quot|#39);/g,fV=RegExp(dP.source);function dV(e){return e=Do(e),e&&fV.test(e)?e.replace(dP,cV):e}var pV=to(function(e){var t=$u(e);return ea(t)&&(t=void 0),zp(ws(e,1,ea,!0),Jr(t))});const hV=pV;var vV=to(function(e){var t=$u(e);return t=typeof t=="function"?t:void 0,zp(ws(e,1,ea,!0),void 0,t)});const yV=vV;function mV(e){return e&&e.length?zp(e):[]}function gV(e,t){return e&&e.length?zp(e,Jr(t)):[]}function bV(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?zp(e,void 0,t):[]}function _V(e,t){return e==null?!0:RM(e,t)}var wV=Math.max;function aE(e){if(!(e&&e.length))return[];var t=0;return e=Pv(e,function(n){if(ea(n))return t=wV(n.length,t),!0}),DM(t,function(n){return Sa(e,PM(n))})}function pP(e,t){if(!(e&&e.length))return[];var n=aE(e);return t==null?n:Sa(n,function(o){return Fu(t,void 0,o)})}function hP(e,t,n,o){return Dw(e,t,n(NM(e,t)),o)}function EV(e,t,n){return e==null?e:hP(e,t,eh(n))}function OV(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:hP(e,t,eh(n),o)}var xV=jv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const SV=xV;function AV(e){return e==null?[]:GM(e,Zp(e))}var TV=to(function(e,t){return ea(e)?Ky(e,t):[]});const MV=TV;function kV(e,t){return nP(eh(t),e)}var PV=Jp(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return Bw(s,e)};return t>1||this.__actions__.length||!(o instanceof Zr)||!Vy(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Qy,args:[r],thisArg:void 0}),new Bu(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const NV=PV;function RV(){return Ak(this)}function DV(){var e=this.__wrapped__;if(e instanceof Zr){var t=e;return this.__actions__.length&&(t=new Zr(this)),t=t.reverse(),t.__actions__.push({func:Qy,args:[tw],thisArg:void 0}),new Bu(t,this.__chain__)}return this.thru(tw)}function lE(e,t,n){var o=e.length;if(o<2)return o?zp(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],v=-1;++v<o;)v!=r&&(s[r]=Ky(s[r]||c,e[v],t,n));return zp(ws(s,1),t,n)}var CV=to(function(e){return lE(Pv(e,ea))});const jV=CV;var IV=to(function(e){var t=$u(e);return ea(t)&&(t=void 0),lE(Pv(e,ea),Jr(t))});const LV=IV;var FV=to(function(e){var t=$u(e);return t=typeof t=="function"?t:void 0,lE(Pv(e,ea),void 0,t)});const $V=FV;var BV=to(aE);const UV=BV;function VV(e,t){return dL(e||[],t||[],Dw)}var GV=to(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,pP(e,n)});const WV=GV,Fn={chunk:hF,compact:EF,concat:OF,difference:KF,differenceBy:JF,differenceWith:e$,drop:r$,dropRight:o$,dropRightWhile:i$,dropWhile:a$,fill:T$,findIndex:pL,findLastIndex:OM,first:zS,flatten:nI,flattenDeep:rI,flattenDepth:j$,fromPairs:oI,head:zS,indexOf:v4,initial:y4,intersection:b4,intersectionBy:w4,intersectionWith:O4,join:m5,last:$u,lastIndexOf:S5,nth:eB,pull:ZB,pullAll:rP,pullAllBy:JB,pullAllWith:QB,pullAt:r6,remove:g6,reverse:tw,slice:B6,sortedIndex:Z6,sortedIndexBy:J6,sortedIndexOf:Q6,sortedLastIndex:eU,sortedLastIndexBy:tU,sortedLastIndexOf:nU,sortedUniq:rU,sortedUniqBy:oU,tail:_U,take:wU,takeRight:EU,takeRightWhile:OU,takeWhile:xU,union:iI,unionBy:hV,unionWith:yV,uniq:mV,uniqBy:gV,uniqWith:bV,unzip:aE,unzipWith:pP,without:MV,xor:jV,xorBy:LV,xorWith:$V,zip:UV,zipObject:hL,zipObjectDeep:VV,zipWith:WV},Co={countBy:jF,each:AS,eachRight:VS,every:x$,filter:rL,find:vL,findLast:P$,flatMap:aI,flatMapDeep:D$,flatMapDepth:C$,forEach:AS,forEachRight:VS,groupBy:n4,includes:p4,invokeMap:I4,keyBy:w5,map:Rw,orderBy:oB,partition:zB,reduce:oL,reduceRight:y6,reject:m6,sample:k6,sampleSize:R6,shuffle:I6,size:$6,some:W6,sortBy:yL},zV={now:lI},Pi={after:PL,ary:QM,before:tk,bind:nk,bindKey:Z3,curry:Xw,curryRight:qw,debounce:uI,defer:zF,delay:XF,flip:L$,memoize:sI,negate:Jy,once:rB,overArgs:fB,partial:nP,partialRight:GB,rearg:h6,rest:E6,spread:sU,throttle:cI,unary:lV,wrap:kV},lr={castArray:fI,clone:dI,cloneDeep:pI,cloneDeepWith:gF,cloneWith:_F,conformsTo:kF,eq:Xy,gt:o4,gte:a4,isArguments:hI,isArray:vi,isArrayBuffer:B4,isArrayLike:Mv,isArrayLikeObject:ea,isBoolean:V4,isBuffer:CM,isDate:H4,isElement:X4,isEmpty:vI,isEqual:yI,isEqualWith:q4,isError:Uw,isFinite:K4,isFunction:Nv,isInteger:Gk,isLength:mI,isMap:gI,isMatch:Z4,isMatchWith:J4,isNaN:e5,isNative:o5,isNil:bI,isNull:_I,isNumber:Wk,isObject:Tf,isObjectLike:Vu,isPlainObject:Nw,isRegExp:Jw,isSafeInteger:u5,isSet:wI,isString:vb,isSymbol:_v,isTypedArray:jM,isUndefined:EI,isWeakMap:c5,isWeakSet:d5,lt:N5,lte:D5,toArray:Xk,toFinite:Ry,toInteger:Ir,toLength:Fk,toNumber:xf,toPlainObject:OI,toSafeInteger:KU,toString:Do},ul={add:ML,ceil:fF,divide:n$,floor:$$,max:mL,maxBy:$5,mean:U5,meanBy:V5,min:gL,minBy:bL,multiply:q5,round:T6,subtract:mU,sum:gU,sumBy:bU},uE={clamp:vF,inRange:c4,random:s6},Er={assign:D3,assignIn:LS,assignInWith:kg,assignWith:L3,at:$3,create:IF,defaults:_L,defaultsDeep:VF,entries:GS,entriesIn:WS,extend:LS,extendWith:kg,findKey:M$,findLastKey:N$,forIn:wL,forInRight:Y$,forOwn:EL,forOwnRight:K$,functions:Z$,functionsIn:J$,get:gM,has:iL,hasIn:xI,invert:M4,invertBy:R4,invoke:C4,keys:Gu,keysIn:Zp,mapKeys:C5,mapValues:OL,merge:SI,mergeWith:kk,omit:AI,omitBy:nB,pick:TI,pickBy:Yk,result:O6,set:MI,setWith:D6,toPairs:GS,toPairsIn:WS,transform:JU,unset:_V,update:EV,updateWith:OV,values:Rv,valuesIn:AV},mc={at:NV,chain:Ak,commit:wF,lodash:ae,next:Q5,plant:HB,reverse:DV,tap:SU,thru:Qy,toIterator:XU,toJSON:E1,value:E1,valueOf:E1,wrapperChain:RV},yo={camelCase:lF,capitalize:ck,deburr:fk,endsWith:c$,escape:jk,escapeRegExp:E$,kebabCase:b5,lowerCase:T5,lowerFirst:k5,pad:jB,padEnd:IB,padStart:LB,parseInt:BB,repeat:b6,replace:_6,snakeCase:V6,split:aU,startCase:fU,startsWith:dU,template:GU,templateSettings:nw,toLower:qU,toUpper:ZU,trim:QU,trimEnd:eV,trimStart:nV,truncate:aV,unescape:dV,upperCase:SV,upperFirst:Ww,words:Sk},wo={attempt:ek,bindAll:X3,cond:SF,conforms:MF,constant:xM,defaultTo:$F,flow:H$,flowRight:q$,identity:$d,iteratee:h5,matches:I5,matchesProperty:F5,method:W5,methodOf:H5,mixin:Hk,noop:mM,nthArg:tB,over:aB,overEvery:pB,overSome:vB,property:kI,propertyOf:XB,range:xL,rangeRight:f6,stubArray:PI,stubFalse:MM,stubObject:pU,stubString:hU,stubTrue:vU,times:HU,toPath:YU,uniqueId:SL};function HV(){var e=new Zr(this.__wrapped__);return e.__actions__=Lu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Lu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Lu(this.__views__),e}function XV(){if(this.__filtered__){var e=new Zr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var qV=Math.max,YV=Math.min;function KV(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=YV(t,e+c);break;case"takeRight":e=qV(e,t-c);break}}return{start:e,end:t}}var ZV=1,JV=2,QV=Math.min;function eG(){var e=this.__wrapped__.value(),t=this.__dir__,n=vi(e),o=t<0,r=n?e.length:0,s=KV(0,r,this.__views__),c=s.start,v=s.end,p=v-c,g=o?v:c-1,b=this.__iteratees__,_=b.length,E=0,x=QV(p,this.__takeCount__);if(!n||!o&&r==p&&x==p)return sP(e,this.__actions__);var P=[];e:for(;p--&&E<x;){g+=t;for(var A=-1,M=e[g];++A<_;){var I=b[A],D=I.iteratee,$=I.type,G=D(M);if($==JV)M=G;else if(!G){if($==ZV)continue e;break e}}P[E++]=M}return P}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var tG="4.17.21",nG=2,rG=1,oG=3,vP=4294967295,iG=Array.prototype,aG=Object.prototype,yP=aG.hasOwnProperty,tA=Tg?Tg.iterator:void 0,lG=Math.max,nA=Math.min,sE=function(e){return function(t,n,o){if(o==null){var r=Tf(n),s=r&&Gu(n),c=s&&s.length&&pb(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(Hk);ae.after=Pi.after;ae.ary=Pi.ary;ae.assign=Er.assign;ae.assignIn=Er.assignIn;ae.assignInWith=Er.assignInWith;ae.assignWith=Er.assignWith;ae.at=Er.at;ae.before=Pi.before;ae.bind=Pi.bind;ae.bindAll=wo.bindAll;ae.bindKey=Pi.bindKey;ae.castArray=lr.castArray;ae.chain=mc.chain;ae.chunk=Fn.chunk;ae.compact=Fn.compact;ae.concat=Fn.concat;ae.cond=wo.cond;ae.conforms=wo.conforms;ae.constant=wo.constant;ae.countBy=Co.countBy;ae.create=Er.create;ae.curry=Pi.curry;ae.curryRight=Pi.curryRight;ae.debounce=Pi.debounce;ae.defaults=Er.defaults;ae.defaultsDeep=Er.defaultsDeep;ae.defer=Pi.defer;ae.delay=Pi.delay;ae.difference=Fn.difference;ae.differenceBy=Fn.differenceBy;ae.differenceWith=Fn.differenceWith;ae.drop=Fn.drop;ae.dropRight=Fn.dropRight;ae.dropRightWhile=Fn.dropRightWhile;ae.dropWhile=Fn.dropWhile;ae.fill=Fn.fill;ae.filter=Co.filter;ae.flatMap=Co.flatMap;ae.flatMapDeep=Co.flatMapDeep;ae.flatMapDepth=Co.flatMapDepth;ae.flatten=Fn.flatten;ae.flattenDeep=Fn.flattenDeep;ae.flattenDepth=Fn.flattenDepth;ae.flip=Pi.flip;ae.flow=wo.flow;ae.flowRight=wo.flowRight;ae.fromPairs=Fn.fromPairs;ae.functions=Er.functions;ae.functionsIn=Er.functionsIn;ae.groupBy=Co.groupBy;ae.initial=Fn.initial;ae.intersection=Fn.intersection;ae.intersectionBy=Fn.intersectionBy;ae.intersectionWith=Fn.intersectionWith;ae.invert=Er.invert;ae.invertBy=Er.invertBy;ae.invokeMap=Co.invokeMap;ae.iteratee=wo.iteratee;ae.keyBy=Co.keyBy;ae.keys=Gu;ae.keysIn=Er.keysIn;ae.map=Co.map;ae.mapKeys=Er.mapKeys;ae.mapValues=Er.mapValues;ae.matches=wo.matches;ae.matchesProperty=wo.matchesProperty;ae.memoize=Pi.memoize;ae.merge=Er.merge;ae.mergeWith=Er.mergeWith;ae.method=wo.method;ae.methodOf=wo.methodOf;ae.mixin=sE;ae.negate=Jy;ae.nthArg=wo.nthArg;ae.omit=Er.omit;ae.omitBy=Er.omitBy;ae.once=Pi.once;ae.orderBy=Co.orderBy;ae.over=wo.over;ae.overArgs=Pi.overArgs;ae.overEvery=wo.overEvery;ae.overSome=wo.overSome;ae.partial=Pi.partial;ae.partialRight=Pi.partialRight;ae.partition=Co.partition;ae.pick=Er.pick;ae.pickBy=Er.pickBy;ae.property=wo.property;ae.propertyOf=wo.propertyOf;ae.pull=Fn.pull;ae.pullAll=Fn.pullAll;ae.pullAllBy=Fn.pullAllBy;ae.pullAllWith=Fn.pullAllWith;ae.pullAt=Fn.pullAt;ae.range=wo.range;ae.rangeRight=wo.rangeRight;ae.rearg=Pi.rearg;ae.reject=Co.reject;ae.remove=Fn.remove;ae.rest=Pi.rest;ae.reverse=Fn.reverse;ae.sampleSize=Co.sampleSize;ae.set=Er.set;ae.setWith=Er.setWith;ae.shuffle=Co.shuffle;ae.slice=Fn.slice;ae.sortBy=Co.sortBy;ae.sortedUniq=Fn.sortedUniq;ae.sortedUniqBy=Fn.sortedUniqBy;ae.split=yo.split;ae.spread=Pi.spread;ae.tail=Fn.tail;ae.take=Fn.take;ae.takeRight=Fn.takeRight;ae.takeRightWhile=Fn.takeRightWhile;ae.takeWhile=Fn.takeWhile;ae.tap=mc.tap;ae.throttle=Pi.throttle;ae.thru=Qy;ae.toArray=lr.toArray;ae.toPairs=Er.toPairs;ae.toPairsIn=Er.toPairsIn;ae.toPath=wo.toPath;ae.toPlainObject=lr.toPlainObject;ae.transform=Er.transform;ae.unary=Pi.unary;ae.union=Fn.union;ae.unionBy=Fn.unionBy;ae.unionWith=Fn.unionWith;ae.uniq=Fn.uniq;ae.uniqBy=Fn.uniqBy;ae.uniqWith=Fn.uniqWith;ae.unset=Er.unset;ae.unzip=Fn.unzip;ae.unzipWith=Fn.unzipWith;ae.update=Er.update;ae.updateWith=Er.updateWith;ae.values=Er.values;ae.valuesIn=Er.valuesIn;ae.without=Fn.without;ae.words=yo.words;ae.wrap=Pi.wrap;ae.xor=Fn.xor;ae.xorBy=Fn.xorBy;ae.xorWith=Fn.xorWith;ae.zip=Fn.zip;ae.zipObject=Fn.zipObject;ae.zipObjectDeep=Fn.zipObjectDeep;ae.zipWith=Fn.zipWith;ae.entries=Er.toPairs;ae.entriesIn=Er.toPairsIn;ae.extend=Er.assignIn;ae.extendWith=Er.assignInWith;sE(ae,ae);ae.add=ul.add;ae.attempt=wo.attempt;ae.camelCase=yo.camelCase;ae.capitalize=yo.capitalize;ae.ceil=ul.ceil;ae.clamp=uE.clamp;ae.clone=lr.clone;ae.cloneDeep=lr.cloneDeep;ae.cloneDeepWith=lr.cloneDeepWith;ae.cloneWith=lr.cloneWith;ae.conformsTo=lr.conformsTo;ae.deburr=yo.deburr;ae.defaultTo=wo.defaultTo;ae.divide=ul.divide;ae.endsWith=yo.endsWith;ae.eq=lr.eq;ae.escape=yo.escape;ae.escapeRegExp=yo.escapeRegExp;ae.every=Co.every;ae.find=Co.find;ae.findIndex=Fn.findIndex;ae.findKey=Er.findKey;ae.findLast=Co.findLast;ae.findLastIndex=Fn.findLastIndex;ae.findLastKey=Er.findLastKey;ae.floor=ul.floor;ae.forEach=Co.forEach;ae.forEachRight=Co.forEachRight;ae.forIn=Er.forIn;ae.forInRight=Er.forInRight;ae.forOwn=Er.forOwn;ae.forOwnRight=Er.forOwnRight;ae.get=Er.get;ae.gt=lr.gt;ae.gte=lr.gte;ae.has=Er.has;ae.hasIn=Er.hasIn;ae.head=Fn.head;ae.identity=$d;ae.includes=Co.includes;ae.indexOf=Fn.indexOf;ae.inRange=uE.inRange;ae.invoke=Er.invoke;ae.isArguments=lr.isArguments;ae.isArray=vi;ae.isArrayBuffer=lr.isArrayBuffer;ae.isArrayLike=lr.isArrayLike;ae.isArrayLikeObject=lr.isArrayLikeObject;ae.isBoolean=lr.isBoolean;ae.isBuffer=lr.isBuffer;ae.isDate=lr.isDate;ae.isElement=lr.isElement;ae.isEmpty=lr.isEmpty;ae.isEqual=lr.isEqual;ae.isEqualWith=lr.isEqualWith;ae.isError=lr.isError;ae.isFinite=lr.isFinite;ae.isFunction=lr.isFunction;ae.isInteger=lr.isInteger;ae.isLength=lr.isLength;ae.isMap=lr.isMap;ae.isMatch=lr.isMatch;ae.isMatchWith=lr.isMatchWith;ae.isNaN=lr.isNaN;ae.isNative=lr.isNative;ae.isNil=lr.isNil;ae.isNull=lr.isNull;ae.isNumber=lr.isNumber;ae.isObject=Tf;ae.isObjectLike=lr.isObjectLike;ae.isPlainObject=lr.isPlainObject;ae.isRegExp=lr.isRegExp;ae.isSafeInteger=lr.isSafeInteger;ae.isSet=lr.isSet;ae.isString=lr.isString;ae.isSymbol=lr.isSymbol;ae.isTypedArray=lr.isTypedArray;ae.isUndefined=lr.isUndefined;ae.isWeakMap=lr.isWeakMap;ae.isWeakSet=lr.isWeakSet;ae.join=Fn.join;ae.kebabCase=yo.kebabCase;ae.last=$u;ae.lastIndexOf=Fn.lastIndexOf;ae.lowerCase=yo.lowerCase;ae.lowerFirst=yo.lowerFirst;ae.lt=lr.lt;ae.lte=lr.lte;ae.max=ul.max;ae.maxBy=ul.maxBy;ae.mean=ul.mean;ae.meanBy=ul.meanBy;ae.min=ul.min;ae.minBy=ul.minBy;ae.stubArray=wo.stubArray;ae.stubFalse=wo.stubFalse;ae.stubObject=wo.stubObject;ae.stubString=wo.stubString;ae.stubTrue=wo.stubTrue;ae.multiply=ul.multiply;ae.nth=Fn.nth;ae.noop=wo.noop;ae.now=zV.now;ae.pad=yo.pad;ae.padEnd=yo.padEnd;ae.padStart=yo.padStart;ae.parseInt=yo.parseInt;ae.random=uE.random;ae.reduce=Co.reduce;ae.reduceRight=Co.reduceRight;ae.repeat=yo.repeat;ae.replace=yo.replace;ae.result=Er.result;ae.round=ul.round;ae.sample=Co.sample;ae.size=Co.size;ae.snakeCase=yo.snakeCase;ae.some=Co.some;ae.sortedIndex=Fn.sortedIndex;ae.sortedIndexBy=Fn.sortedIndexBy;ae.sortedIndexOf=Fn.sortedIndexOf;ae.sortedLastIndex=Fn.sortedLastIndex;ae.sortedLastIndexBy=Fn.sortedLastIndexBy;ae.sortedLastIndexOf=Fn.sortedLastIndexOf;ae.startCase=yo.startCase;ae.startsWith=yo.startsWith;ae.subtract=ul.subtract;ae.sum=ul.sum;ae.sumBy=ul.sumBy;ae.template=yo.template;ae.times=wo.times;ae.toFinite=lr.toFinite;ae.toInteger=Ir;ae.toLength=lr.toLength;ae.toLower=yo.toLower;ae.toNumber=lr.toNumber;ae.toSafeInteger=lr.toSafeInteger;ae.toString=lr.toString;ae.toUpper=yo.toUpper;ae.trim=yo.trim;ae.trimEnd=yo.trimEnd;ae.trimStart=yo.trimStart;ae.truncate=yo.truncate;ae.unescape=yo.unescape;ae.uniqueId=wo.uniqueId;ae.upperCase=yo.upperCase;ae.upperFirst=yo.upperFirst;ae.each=Co.forEach;ae.eachRight=Co.forEachRight;ae.first=Fn.head;sE(ae,function(){var e={};return Qp(ae,function(t,n){yP.call(ae.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ae.VERSION=tG;(ae.templateSettings=yo.templateSettings).imports._=ae;hc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ae[e].placeholder=ae});hc(["drop","take"],function(e,t){Zr.prototype[e]=function(n){n=n===void 0?1:lG(Ir(n),0);var o=this.__filtered__&&!t?new Zr(this):this.clone();return o.__filtered__?o.__takeCount__=nA(n,o.__takeCount__):o.__views__.push({size:nA(n,vP),type:e+(o.__dir__<0?"Right":"")}),o},Zr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});hc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==rG||n==oG;Zr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:Jr(r),type:n}),s.__filtered__=s.__filtered__||o,s}});hc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Zr.prototype[e]=function(){return this[n](1).value()[0]}});hc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Zr.prototype[e]=function(){return this.__filtered__?new Zr(this):this[n](1)}});Zr.prototype.compact=function(){return this.filter($d)};Zr.prototype.find=function(e){return this.filter(e).head()};Zr.prototype.findLast=function(e){return this.reverse().find(e)};Zr.prototype.invokeMap=to(function(e,t){return typeof e=="function"?new Zr(this):this.map(function(n){return Zy(n,e,t)})});Zr.prototype.reject=function(e){return this.filter(Jy(Jr(e)))};Zr.prototype.slice=function(e,t){e=Ir(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Zr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Ir(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Zr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Zr.prototype.toArray=function(){return this.take(vP)};Qp(Zr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=ae[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(ae.prototype[t]=function(){var c=this.__wrapped__,v=o?[1]:arguments,p=c instanceof Zr,g=v[0],b=p||vi(c),_=function(I){var D=r.apply(ae,zy([I],v));return o&&E?D[0]:D};b&&n&&typeof g=="function"&&g.length!=1&&(p=b=!1);var E=this.__chain__,x=!!this.__actions__.length,P=s&&!E,A=p&&!x;if(!s&&b){c=A?c:new Zr(this);var M=e.apply(c,v);return M.__actions__.push({func:Qy,args:[_],thisArg:void 0}),new Bu(M,E)}return P&&A?e.apply(this,v):(M=this.thru(_),P?o?M.value()[0]:M.value():M)})});hc(["pop","push","shift","sort","splice","unshift"],function(e){var t=iG[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);ae.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(vi(s)?s:[],r)}return this[n](function(c){return t.apply(vi(c)?c:[],r)})}});Qp(Zr.prototype,function(e,t){var n=ae[t];if(n){var o=n.name+"";yP.call(dv,o)||(dv[o]=[]),dv[o].push({name:t,func:n})}});dv[cb(void 0,nG).name]=[{name:"wrapper",func:void 0}];Zr.prototype.clone=HV;Zr.prototype.reverse=XV;Zr.prototype.value=eG;ae.prototype.at=mc.at;ae.prototype.chain=mc.wrapperChain;ae.prototype.commit=mc.commit;ae.prototype.next=mc.next;ae.prototype.plant=mc.plant;ae.prototype.reverse=mc.reverse;ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=mc.value;ae.prototype.first=ae.prototype.head;tA&&(ae.prototype[tA]=mc.toIterator);const uG="/assets/icon_or-f402edf4.svg",sG="/assets/icon_and-2df352e1.svg",cG={class:"workflow-dropdown-menu border border-r-4"},fG={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},dG={key:0},pG=["onClick","onMousedown"],hG={class:"pre-wrap"},vG={class:"lighter"},yG={key:1,class:"ml-16 mt-8"},mG={class:"pre-wrap"},gG={class:"lighter"},bG=["onClick","onMousedown"],_G={class:"pre-wrap"},wG=["title"],EG={key:0},OG=["onClick","onMousedown"],xG={class:"pre-wrap",style:{width:"60%"}},SG=["title"],AG={class:"status-tag",style:{"margin-left":"auto"}},TG={key:1,class:"ml-16 mt-8"},MG=wr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=pt(""),o=e,r=t,s=pt(!1),c=pt("base"),v=pt([]),p=zr(()=>v.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=pt([]),b=zr(()=>g.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),_=zr(()=>NI.filter(A=>A.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function E(A,M,I){var D;if(M&&(A.properties.nodeName=M.name,I=="function"&&(A.properties.nodeData={...M,function_lib_id:M.id,inputFieldList:M.inputFieldList.map($=>({...$,value:$.source=="reference"?[]:""}))}),I=="application"))if(hg(M.type)){const G=M.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:M.name,icon:M.icon,application_id:M.id,api_input_field_list:M.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:M.workFlow.nodes[0].properties.user_input_field_list,...G?{...G.document?{documentList:[]}:{},...G.image?{imageList:[]}:{},...G.audio?{audioList:[]}:{}}:{}}}else A.properties.nodeData={name:M.name,icon:M.icon,application_id:M.id};(D=o.workflowRef)==null||D.addNode(A),r("clickNodes",A)}function x(A,M,I){var D;if(M&&(A.properties.nodeName=M.name,I=="function"&&(A.properties.nodeData={...M,function_lib_id:M.id,inputFieldList:M.inputFieldList.map($=>({...$,value:$.source=="reference"?[]:""}))}),I=="application"))if(hg(M.type)){const G=M.workFlow.nodes[0].properties.nodeData.file_upload_setting;A.properties.nodeData={name:M.name,icon:M.icon,application_id:M.id,api_input_field_list:M.workFlow.nodes[0].properties.api_input_field_list,user_input_field_list:M.workFlow.nodes[0].properties.user_input_field_list,...G?{...G.document?{documentList:[]}:{},...G.image?{imageList:[]}:{},...G.audio?{audioList:[]}:{},...G.video?{videoList:[]}:{}}:{}}}else A.properties.nodeData={name:M.name,icon:M.icon,application_id:M.id};(D=o.workflowRef)==null||D.onmousedown(A),r("onmousedown",A)}function P(){fa.listFunctionLib(o.id,s).then(A=>{v.value=A.data}),fa.getApplicationList(o.id,s).then(A=>{g.value=A.data})}return uo(()=>{P()}),(A,M)=>{const I=Z("search"),D=Z("el-icon"),$=Z("el-input"),G=Z("el-text"),W=Z("el-scrollbar"),X=Z("el-tab-pane"),J=Z("el-tag"),z=Z("el-tabs");return Ua((Ie(),An("div",cG,[R(z,{modelValue:c.value,"onUpdate:modelValue":M[3]||(M[3]=L=>c.value=L),class:"workflow-dropdown-tabs"},{default:j(()=>[le("div",fG,[R($,{modelValue:n.value,"onUpdate:modelValue":M[0]||(M[0]=L=>n.value=L),style:{width:"240px"},placeholder:A.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:j(()=>[R(D,{class:"el-input__icon"},{default:j(()=>[R(I)]),_:1})]),_:1},8,["modelValue","placeholder"])]),R(X,{label:A.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:j(()=>[R(W,{height:"400"},{default:j(()=>[_.value.length>0?(Ie(),An("div",dG,[(Ie(!0),An(_o,null,li(_.value,(L,H)=>(Ie(),An("div",{key:H,class:"workflow-dropdown-item cursor flex p-8-12",onClick:pn(K=>E(L),["stop"]),onMousedown:pn(K=>x(L),["stop"])},[(Ie(),dt(Gp(Kr(Wp)(`${L.type}-icon`)),{class:"mr-8 mt-4",size:32})),le("div",hG,[le("div",vG,Ce(L.label),1),R(G,{type:"info",size:"small"},{default:j(()=>[bt(Ce(L.text),1)]),_:2},1024)])],40,pG))),128))])):(Ie(),An("div",yG,[R(G,{type:"info"},{default:j(()=>[bt(Ce(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),R(X,{label:A.$t("views.functionLib.title"),name:"function"},{default:j(()=>[R(W,{height:"400"},{default:j(()=>[le("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:M[1]||(M[1]=pn(L=>E(Kr(rg)),["stop"])),onMousedown:M[2]||(M[2]=pn(L=>x(Kr(rg)),["stop"]))},[(Ie(),dt(Gp(Kr(Wp)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),le("div",mG,[le("div",gG,Ce(Kr(rg).label),1),R(G,{type:"info",size:"small"},{default:j(()=>[bt(Ce(Kr(rg).text),1)]),_:1})])],32),(Ie(!0),An(_o,null,li(p.value,(L,H)=>(Ie(),An("div",{key:H,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:pn(K=>E(Kr(ES),L,"function"),["stop"]),onMousedown:pn(K=>x(Kr(ES),L,"function"),["stop"])},[(Ie(),dt(Gp(Kr(Wp)("function-lib-node-icon")),{class:"mr-8",size:32})),le("div",_G,[le("div",{class:"lighter ellipsis-1",title:L.name},Ce(L.name),9,wG),le("p",null,[L.desc?(Ie(),dt(G,{key:0,class:"ellipsis-1",type:"info",size:"small",title:L.desc},{default:j(()=>[bt(Ce(L.desc),1)]),_:2},1032,["title"])):jn("",!0)])])],40,bG))),128))]),_:1})]),_:1},8,["label"]),R(X,{label:A.$t("views.application.title"),name:"application"},{default:j(()=>[R(W,{height:"400"},{default:j(()=>[b.value.length>0?(Ie(),An("div",EG,[(Ie(!0),An(_o,null,li(b.value,(L,H)=>(Ie(),An("div",{key:H,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:pn(K=>E(Kr(OS),L,"application"),["stop"]),onMousedown:pn(K=>x(Kr(OS),L,"application"),["stop"])},[(Ie(),dt(Gp(Kr(Wp)("application-node-icon")),{class:"mr-8",size:32,item:L},null,8,["item"])),le("div",xG,[le("div",{class:"lighter ellipsis",title:L.name},Ce(L.name),9,SG),le("p",null,[L.desc?(Ie(),dt(G,{key:0,class:"ellipsis",type:"info",size:"small",title:L.desc},{default:j(()=>[bt(Ce(L.desc),1)]),_:2},1032,["title"])):jn("",!0)])]),le("div",AG,[Kr(hg)(L.type)?(Ie(),dt(J,{key:0,type:"warning",style:{height:"22px"}},{default:j(()=>[bt(Ce(A.$t("views.application.workflow")),1)]),_:1})):(Ie(),dt(J,{key:1,class:"blue-tag",style:{height:"22px"}},{default:j(()=>[bt(Ce(A.$t("views.application.simple")),1)]),_:1}))])],40,OG))),128))])):(Ie(),An("div",TG,[R(G,{type:"info"},{default:j(()=>[bt(Ce(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[Ev,e.show]])}}});const mP=qy(MG,[["__scopeId","data-v-66d28617"]]),kG={class:"flex-between"},PG={class:"flex align-center",style:{width:"70%"}},NG={class:"ellipsis-1 break-all"},RG={key:0,src:uG,alt:""},DG={key:1,src:sG,alt:""},CG={style:{width:"280px"},class:"p-12-16"},jG={class:"mt-8 lighter"},IG={class:"title-decoration-1 mb-8 mt-8"},LG=["onMouseenter"],FG={style:{"max-width":"92%"}},$G={class:"dialog-footer"},BG=wr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Rl.config.globalProperties.$route,n=pt({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),o=pt(!1),r=pt(),s=pt(),c=pt(!1),v=pt({title:""}),p=zr({set:L=>{$e.set(G.nodeModel.properties,"condition",L)},get:()=>G.nodeModel.properties.condition?G.nodeModel.properties.condition:($e.set(G.nodeModel.properties,"condition","AND"),!0)}),g=zr({set:L=>{$e.set(G.nodeModel.properties,"showNode",L)},get:()=>G.nodeModel.properties.showNode!==void 0?G.nodeModel.properties.showNode:($e.set(G.nodeModel.properties,"showNode",!0),!0)}),b=L=>{L.ctrlKey||L.metaKey||L.stopPropagation()},_=zr(()=>G.nodeModel.properties.status?G.nodeModel.properties.status:200);function E(){v.value.title=G.nodeModel.properties.nodeName,c.value=!0}const x=async L=>{L&&await L.validate(H=>{var K;H&&((K=G.nodeModel.graphModel.nodes)!=null&&K.some(Y=>Y.properties.nodeName===v.value.title)?Ba(Zt("views.applicationWorkflow.tip.repeatedNodeError")):($e.set(G.nodeModel.properties,"nodeName",v.value.title),c.value=!1,L.resetFields()))})},P=()=>{G.nodeModel.graphModel.clearSelectElements(),$e.set(G.nodeModel,"isSelected",!0),$e.set(G.nodeModel,"isHovered",!0),G.nodeModel.graphModel.toFront(G.nodeModel.id)},A=pt(null),M=()=>{G.nodeModel.graphModel.clearSelectElements();const L=G.nodeModel.graphModel.cloneNode(G.nodeModel.id);$e.set(L,"isSelected",!0),$e.set(L,"isHovered",!0),G.nodeModel.graphModel.toFront(L.id)},I=()=>{Cw(Zt("common.tip"),Zt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Zt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{G.nodeModel.graphModel.deleteNode(G.nodeModel.id)}),G.nodeModel.graphModel.eventCenter.emit("delete_node")},D=L=>{L.height&&(G.nodeModel.virtual||(n.value.stepContainerHeight=L.height,G.nodeModel.setHeight(n.value.stepContainerHeight)))};function $(L){var Y,ce,Ne;const H=L.properties.width?L.properties.width:214,K=G.nodeModel.graphModel.addNode({type:L.type,properties:L.properties,x:((Y=r.value)==null?void 0:Y.x)+H/2+200,y:((ce=r.value)==null?void 0:ce.y)-L.height});G.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:G.nodeModel.id,sourceAnchorId:(Ne=r.value)==null?void 0:Ne.id,targetNodeId:K.id}),z()}const G=e,W=zr(()=>{var L;return G.nodeModel.properties.config.fields?(L=G.nodeModel.properties.config.fields)==null?void 0:L.map(K=>({label:K.label,value:K.value,globeLabel:`{{${G.nodeModel.properties.nodeName}.${K.value}}}`,globeValue:`{{context['${G.nodeModel.id}'].${K.value}}}`})):[]});function X(L){return L!==qo.Base&&L!==qo.Start}const J=L=>{o.value=!0,r.value=L},z=()=>{o.value=!1,r.value=void 0};return uo(()=>{$e.set(G.nodeModel,"openNodeMenu",L=>{o.value?z():J(L)})}),(L,H)=>{var ge;const K=Z("ArrowDownBold"),Y=Z("el-icon"),ce=Z("el-button"),Ne=Z("el-option"),_e=Z("el-select"),Oe=Z("el-dropdown"),ke=Z("MoreFilled"),Re=Z("el-dropdown-item"),ue=Z("el-dropdown-menu"),ve=Z("el-alert"),Pe=Z("AppIcon"),Xe=Z("el-tooltip"),ze=Z("el-collapse-transition"),Je=Z("el-input"),_t=Z("el-form-item"),kt=Z("el-form"),qt=Z("el-dialog"),Fe=Id("resize");return Ie(),An("div",{onMousedown:P,class:"workflow-node-container p-16",style:{overflow:"visible"}},[le("div",{class:jd(["step-container app-card p-16",{isSelected:G.nodeModel.isSelected,error:_.value!==200}]),style:{overflow:"visible"}},[Ua((Ie(),An("div",null,[le("div",kG,[le("div",PG,[(Ie(),dt(Gp(Kr(Wp)(`${L.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(ge=L.nodeModel)==null?void 0:ge.properties.nodeData},null,8,["item"])),le("h4",NG,Ce(L.nodeModel.properties.nodeName),1)]),le("div",{onMousemove:H[2]||(H[2]=pn(()=>{},["stop"])),onMousedown:H[3]||(H[3]=pn(()=>{},["stop"])),onKeydown:H[4]||(H[4]=pn(()=>{},["stop"])),onClick:H[5]||(H[5]=pn(()=>{},["stop"]))},[R(ce,{text:"",onClick:H[0]||(H[0]=Ae=>g.value=!g.value)},{default:j(()=>[R(Y,{class:jd(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:j(()=>[R(K)]),_:1},8,["class"])]),_:1}),X(L.nodeModel.type)?(Ie(),dt(Oe,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:j(()=>[le("div",CG,[le("h5",null,Ce(L.$t("views.applicationWorkflow.condition.title")),1),le("p",jG,[le("span",null,Ce(L.$t("views.applicationWorkflow.condition.front")),1),R(_e,{modelValue:p.value,"onUpdate:modelValue":H[1]||(H[1]=Ae=>p.value=Ae),size:"small",style:{width:"60px",margin:"0 8px"}},{default:j(()=>[R(Ne,{label:L.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),R(Ne,{label:L.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),le("span",null,Ce(L.$t("views.applicationWorkflow.condition.text")),1)])])]),default:j(()=>[R(ce,{text:""},{default:j(()=>[p.value==="OR"?(Ie(),An("img",RG)):jn("",!0),p.value==="AND"?(Ie(),An("img",DG)):jn("",!0)]),_:1})]),_:1})):jn("",!0),X(L.nodeModel.type)?(Ie(),dt(Oe,{key:1,teleported:!1,trigger:"click"},{dropdown:j(()=>[R(ue,{style:{"min-width":"80px"}},{default:j(()=>[R(Re,{onClick:E,class:"p-8"},{default:j(()=>[bt(Ce(L.$t("common.rename")),1)]),_:1}),R(Re,{onClick:M,class:"p-8"},{default:j(()=>[bt(Ce(L.$t("common.copy")),1)]),_:1}),R(Re,{onClick:I,class:"border-t p-8"},{default:j(()=>[bt(Ce(L.$t("common.delete")),1)]),_:1})]),_:1})]),default:j(()=>[R(ce,{text:""},{default:j(()=>[R(Y,{class:"color-secondary"},{default:j(()=>[R(ke)]),_:1})]),_:1})]),_:1})):jn("",!0)],32)]),R(ze,null,{default:j(()=>[Ua(le("div",{onMousedown:H[7]||(H[7]=pn(()=>{},["stop"])),onKeydown:H[8]||(H[8]=pn(()=>{},["stop"])),onClick:H[9]||(H[9]=pn(()=>{},["stop"])),class:"mt-16"},[_.value!=200?(Ie(),dt(ve,{key:0,class:"mb-16",title:G.nodeModel.type==="application-node"?L.$t("views.applicationWorkflow.tip.applicationNodeError"):L.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):jn("",!0),RI(L.$slots,"default",{},void 0,!0),W.value.length>0?(Ie(),An(_o,{key:1},[le("h5",IG,Ce(L.$t("common.param.outputParam")),1),(Ie(!0),An(_o,null,li(W.value,(Ae,yt)=>(Ie(),An("div",{key:yt,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:zt=>A.value=yt,onMouseleave:H[6]||(H[6]=zt=>A.value=null)},[le("span",FG,Ce(Ae.label)+" "+Ce("{"+Ae.value+"}"),1),A.value===yt?(Ie(),dt(Xe,{key:0,effect:"dark",content:L.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:j(()=>[R(ce,{link:"",onClick:zt=>Kr(IM)(Ae.globeLabel),style:{padding:"0"}},{default:j(()=>[R(Pe,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):jn("",!0)],40,LG))),128))],64)):jn("",!0)],544),[[Ev,g.value]])]),_:3})])),[[Fe,D]])],2),R(ze,null,{default:j(()=>[o.value?(Ie(),dt(mP,{key:0,onMousemove:H[10]||(H[10]=pn(()=>{},["stop"])),onMousedown:H[11]||(H[11]=pn(()=>{},["stop"])),onClick:H[12]||(H[12]=pn(()=>{},["stop"])),onWheel:b,show:o.value,id:Kr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:$},null,8,["show","id"])):jn("",!0)]),_:1}),R(qt,{title:L.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":H[17]||(H[17]=Ae=>c.value=Ae),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:H[18]||(H[18]=pn(()=>{},["prevent"]))},{footer:j(()=>[le("span",$G,[R(ce,{onClick:H[15]||(H[15]=pn(Ae=>c.value=!1,["prevent"]))},{default:j(()=>[bt(Ce(L.$t("common.cancel")),1)]),_:1}),R(ce,{type:"primary",onClick:H[16]||(H[16]=Ae=>x(s.value))},{default:j(()=>[bt(Ce(L.$t("common.save")),1)]),_:1})])]),default:j(()=>[R(kt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:v.value},{default:j(()=>[R(_t,{prop:"title",rules:[{required:!0,message:L.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:j(()=>[R(Je,{modelValue:v.value.title,"onUpdate:modelValue":H[13]||(H[13]=Ae=>v.value.title=Ae),onBlur:H[14]||(H[14]=Ae=>v.value.title=v.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const Yo=qy(BG,[["__scopeId","data-v-5c707d13"]]),UG={class:"flex align-center"},Wr=wr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{},filterNodeKey:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=zr({set:_=>{r("update:modelValue",_)},get:()=>o.modelValue}),c=zr(()=>{if(!s.value||s.value.length<1)return null;const _=s.value[0],E=v.value.find(x=>x.value===_);return E?E.type:null}),v=pt([]),p=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0);function g(_){_&&(v.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(E=>E.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0),v.value=v.value.filter(E=>o.filterNodeKey?E.type===o.filterNodeKey:!0))}return t({validate:()=>{const _=o.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(Zt("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(Zt("views.applicationWorkflow.variable.ReferencingError"));const E=s.value[0],x=s.value[1],P=_.find(A=>A.value===E);return P?P.children.some(A=>A.value===x)?Promise.resolve(""):(s.value=[],Promise.reject(Zt("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(Zt("views.applicationWorkflow.variable.NoReferencing")))}}),uo(()=>{v.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(_=>_.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0),v.value=v.value.filter(_=>o.filterNodeKey?_.type===o.filterNodeKey:!0)}),(_,E)=>{const x=Z("el-cascader");return Ie(),dt(x,DI({onWheel:p,teleported:!1,options:v.value,onVisibleChange:g},_.$attrs,{modelValue:s.value,"onUpdate:modelValue":E[0]||(E[0]=P=>s.value=P),separator:" > ",clearable:!0}),{default:j(({node:P,data:A})=>[le("span",{class:"flex align-center",onWheel:p},[(Ie(),dt(Gp(Kr(Wp)(`${A.type}-icon`)),{class:"mr-8",size:18})),bt(Ce(A.label),1)],32)]),prefix:j(()=>[le("span",UG,[(Ie(),dt(Gp(Kr(Wp)(`${c.value}-icon`)),{size:18}))])]),_:1},16,["options","modelValue"])}}}),VG={class:"title-decoration-1 mb-8"},GG={class:"flex-between w-full"},WG={class:"flex-between"},zG={class:"flex align-center"},HG={class:"mr-4"},XG=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),n=G=>G.ctrlKey===!0?(G.preventDefault(),!0):(G.stopPropagation(),!0);function o(G){$e.set(g.nodeModel.properties.nodeData,"system",G)}const r=G=>{var W;G?(W=x.value)==null||W.reset_default(G,s):D({})},{params:{id:s}}=Rl.config.globalProperties.$route,v={modelId:"",system:"",prompt:`${Zt("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Zt("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${Zt("views.problem.title")}：
{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,questionReferenceAddress:["start-node","question"],datasetReferenceAddress:[],dialogueNumber:1,isResult:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",modelSetting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},p=zr({get:()=>g.nodeModel.properties.nodeData?(g.nodeModel.properties.nodeData.modelSetting||$e.set(g.nodeModel.properties.nodeData,"modelSetting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),g.nodeModel.properties.nodeData):($e.set(g.nodeModel.properties,"nodeData",v),g.nodeModel.properties.nodeData),set:G=>{$e.set(g.nodeModel.properties,"nodeData",G)}}),g=e,b=pt(),_=pt(),E=pt(null),x=pt(),P=pt(),A=()=>{var G;return Promise.all([_.value?_.value.validate():Promise.resolve(""),(G=b.value)==null?void 0:G.validate()]).catch(W=>Promise.reject({node:g.nodeModel,errMessage:W}))};function M(){s?fa.getApplicationModel(s).then(G=>{E.value=$e.groupBy(G==null?void 0:G.data,"provider")}):t.asyncGetModel().then(G=>{E.value=$e.groupBy(G==null?void 0:G.data,"provider")})}const I=G=>{var W;G&&((W=x.value)==null||W.open(G,s,p.value.modelParamsSetting))};function D(G){$e.set(g.nodeModel.properties.nodeData,"modelParamsSetting",G)}function $(G){let W=$e.cloneDeep(g.nodeModel.properties.nodeData.modelSetting);W={...W,...G},$e.set(g.nodeModel.properties.nodeData,"modelSetting",W)}return uo(()=>{var G;M(),typeof((G=g.nodeModel.properties.nodeData)==null?void 0:G.isResult)>"u"&&Es(g.nodeModel)&&$e.set(g.nodeModel.properties.nodeData,"isResult",!0),$e.set(g.nodeModel,"validate",A),p.value.dialogue_type||(p.value.dialogue_type="WORKFLOW")}),(G,W)=>{const X=Z("Setting"),J=Z("el-icon"),z=Z("el-button"),L=Z("el-form-item"),H=Z("el-option"),K=Z("el-select"),Y=Z("el-input-number"),ce=Z("el-tooltip"),Ne=Z("el-switch"),_e=Z("el-form"),Oe=Z("el-card");return Ie(),dt(Yo,{nodeModel:G.nodeModel},{default:j(()=>[le("h5",VG,Ce(G.$t("views.applicationWorkflow.nodeSetting")),1),R(Oe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(_e,{onSubmit:W[9]||(W[9]=pn(()=>{},["prevent"])),model:p.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:b,"hide-required-asterisk":""},{default:j(()=>[R(L,{label:G.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:G.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:j(()=>[le("div",GG,[le("div",null,[le("span",null,[bt(Ce(G.$t("views.application.applicationForm.form.aiModel.label")),1),W[10]||(W[10]=le("span",{class:"danger"},"*",-1))])]),R(z,{disabled:!p.value.modelId,type:"primary",link:"",onClick:W[0]||(W[0]=ke=>I(p.value.modelId)),onRefreshForm:D},{default:j(()=>[R(J,null,{default:j(()=>[R(X)]),_:1})]),_:1},8,["disabled"])])]),default:j(()=>[R(jw,{onChange:r,onWheel:n,teleported:!1,modelValue:p.value.modelId,"onUpdate:modelValue":W[1]||(W[1]=ke=>p.value.modelId=ke),placeholder:G.$t("views.application.applicationForm.form.aiModel.placeholder"),options:E.value,onSubmitModel:M,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(L,{label:G.$t("views.application.applicationForm.form.roleSettings.label")},{default:j(()=>[R(Sf,{title:G.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:p.value.system,"onUpdate:modelValue":W[2]||(W[2]=ke=>p.value.system=ke),style:{height:"100px"},onSubmitDialog:o,placeholder:G.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),R(L,{label:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.label"),prop:"datasetReferenceAddress",rules:{message:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.placeholder"),trigger:"blur",required:!1}},{default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:_,nodeModel:G.nodeModel,"filter-node-key":"search-dataset-node",class:"w-full",placeholder:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.reference.placeholder"),modelValue:p.value.datasetReferenceAddress,"onUpdate:modelValue":W[3]||(W[3]=ke=>p.value.datasetReferenceAddress=ke)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),R(L,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:"用户问题",trigger:"blur",required:!0}},{default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:_,nodeModel:G.nodeModel,class:"w-full",placeholder:G.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:p.value.questionReferenceAddress,"onUpdate:modelValue":W[4]||(W[4]=ke=>p.value.questionReferenceAddress=ke)},null,8,["nodeModel","placeholder","modelValue"])]),_:1}),R(L,{label:G.$t("views.application.applicationForm.form.historyRecord.label")},{label:j(()=>[le("div",WG,[le("div",null,Ce(G.$t("views.application.applicationForm.form.historyRecord.label")),1),R(K,{modelValue:p.value.dialogue_type,"onUpdate:modelValue":W[5]||(W[5]=ke=>p.value.dialogue_type=ke),type:"small",style:{width:"100px"}},{default:j(()=>[R(H,{label:G.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),R(H,{label:G.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[R(Y,{modelValue:p.value.dialogueNumber,"onUpdate:modelValue":W[6]||(W[6]=ke=>p.value.dialogueNumber=ke),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),R(L,{onClick:W[8]||(W[8]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",zG,[le("div",HG,[le("span",null,[bt(Ce(G.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),W[11]||(W[11]=le("span",{class:"danger"},"*",-1))])]),R(ce,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(G.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(Ne,{size:"small",modelValue:p.value.isResult,"onUpdate:modelValue":W[7]||(W[7]=ke=>p.value.isResult=ke)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),R(Yy,{ref_key:"AIModeParamSettingDialogRef",ref:x,onRefresh:D},null,512),R(JI,{ref_key:"ReasoningParamSettingDialogRef",ref:P,onRefresh:$},null,512)]),_:1},8,["nodeModel"])}}});var rw={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var p in s)r.d(v,p,(function(g){return s[g]}).bind(null,p));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return W}),r.d(o,"b",function(){return G}),r.d(o,"c",function(){return kt}),r.d(o,"d",function(){return qt}),r.d(o,"e",function(){return I}),r.d(o,"f",function(){return $}),r.d(o,"g",function(){return I}),r.d(o,"h",function(){return _t}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return Je}),r.d(o,"k",function(){return Y});var s,c,v,p,g,b,_,E={},x=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(Fe,ge){for(var Ae in ge)Fe[Ae]=ge[Ae];return Fe}function M(Fe){var ge=Fe.parentNode;ge&&ge.removeChild(Fe)}function I(Fe,ge,Ae){var yt,zt,St,rn={};for(St in ge)St=="key"?yt=ge[St]:St=="ref"?zt=ge[St]:rn[St]=ge[St];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Ae),typeof Fe=="function"&&Fe.defaultProps!=null)for(St in Fe.defaultProps)rn[St]===void 0&&(rn[St]=Fe.defaultProps[St]);return D(Fe,rn,yt,zt,null)}function D(Fe,ge,Ae,yt,zt){var St={type:Fe,props:ge,key:Ae,ref:yt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:zt??++v};return zt==null&&c.vnode!=null&&c.vnode(St),St}function $(){return{current:null}}function G(Fe){return Fe.children}function W(Fe,ge){this.props=Fe,this.context=ge}function X(Fe,ge){if(ge==null)return Fe.__?X(Fe.__,Fe.__.__k.indexOf(Fe)+1):null;for(var Ae;ge<Fe.__k.length;ge++)if((Ae=Fe.__k[ge])!=null&&Ae.__e!=null)return Ae.__e;return typeof Fe.type=="function"?X(Fe):null}function J(Fe){var ge,Ae;if((Fe=Fe.__)!=null&&Fe.__c!=null){for(Fe.__e=Fe.__c.base=null,ge=0;ge<Fe.__k.length;ge++)if((Ae=Fe.__k[ge])!=null&&Ae.__e!=null){Fe.__e=Fe.__c.base=Ae.__e;break}return J(Fe)}}function z(Fe){(!Fe.__d&&(Fe.__d=!0)&&p.push(Fe)&&!L.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(L)}function L(){for(var Fe;L.__r=p.length;)Fe=p.sort(function(ge,Ae){return ge.__v.__b-Ae.__v.__b}),p=[],Fe.some(function(ge){var Ae,yt,zt,St,rn,mn;ge.__d&&(rn=(St=(Ae=ge).__v).__e,(mn=Ae.__P)&&(yt=[],(zt=A({},St)).__v=St.__v+1,Re(mn,St,zt,Ae.__n,mn.ownerSVGElement!==void 0,St.__h!=null?[rn]:null,yt,rn??X(St),St.__h),ue(yt,St),St.__e!=rn&&J(St)))})}function H(Fe,ge,Ae,yt,zt,St,rn,mn,Mn,hn){var ft,xn,Ve,gn,Zn,re,Bn,Sr=yt&&yt.__k||x,Ur=Sr.length;for(Ae.__k=[],ft=0;ft<ge.length;ft++)if((gn=Ae.__k[ft]=(gn=ge[ft])==null||typeof gn=="boolean"?null:typeof gn=="string"||typeof gn=="number"||typeof gn=="bigint"?D(null,gn,null,null,gn):Array.isArray(gn)?D(G,{children:gn},null,null,null):gn.__b>0?D(gn.type,gn.props,gn.key,null,gn.__v):gn)!=null){if(gn.__=Ae,gn.__b=Ae.__b+1,(Ve=Sr[ft])===null||Ve&&gn.key==Ve.key&&gn.type===Ve.type)Sr[ft]=void 0;else for(xn=0;xn<Ur;xn++){if((Ve=Sr[xn])&&gn.key==Ve.key&&gn.type===Ve.type){Sr[xn]=void 0;break}Ve=null}Re(Fe,gn,Ve=Ve||E,zt,St,rn,mn,Mn,hn),Zn=gn.__e,(xn=gn.ref)&&Ve.ref!=xn&&(Bn||(Bn=[]),Ve.ref&&Bn.push(Ve.ref,null,gn),Bn.push(xn,gn.__c||Zn,gn)),Zn!=null?(re==null&&(re=Zn),typeof gn.type=="function"&&gn.__k===Ve.__k?gn.__d=Mn=K(gn,Mn,Fe):Mn=ce(Fe,gn,Ve,Sr,Zn,Mn),typeof Ae.type=="function"&&(Ae.__d=Mn)):Mn&&Ve.__e==Mn&&Mn.parentNode!=Fe&&(Mn=X(Ve))}for(Ae.__e=re,ft=Ur;ft--;)Sr[ft]!=null&&(typeof Ae.type=="function"&&Sr[ft].__e!=null&&Sr[ft].__e==Ae.__d&&(Ae.__d=X(yt,ft+1)),Xe(Sr[ft],Sr[ft]));if(Bn)for(ft=0;ft<Bn.length;ft++)Pe(Bn[ft],Bn[++ft],Bn[++ft])}function K(Fe,ge,Ae){for(var yt,zt=Fe.__k,St=0;zt&&St<zt.length;St++)(yt=zt[St])&&(yt.__=Fe,ge=typeof yt.type=="function"?K(yt,ge,Ae):ce(Ae,yt,yt,zt,yt.__e,ge));return ge}function Y(Fe,ge){return ge=ge||[],Fe==null||typeof Fe=="boolean"||(Array.isArray(Fe)?Fe.some(function(Ae){Y(Ae,ge)}):ge.push(Fe)),ge}function ce(Fe,ge,Ae,yt,zt,St){var rn,mn,Mn;if(ge.__d!==void 0)rn=ge.__d,ge.__d=void 0;else if(Ae==null||zt!=St||zt.parentNode==null)e:if(St==null||St.parentNode!==Fe)Fe.appendChild(zt),rn=null;else{for(mn=St,Mn=0;(mn=mn.nextSibling)&&Mn<yt.length;Mn+=2)if(mn==zt)break e;Fe.insertBefore(zt,St),rn=St}return rn!==void 0?rn:zt.nextSibling}function Ne(Fe,ge,Ae){ge[0]==="-"?Fe.setProperty(ge,Ae):Fe[ge]=Ae==null?"":typeof Ae!="number"||P.test(ge)?Ae:Ae+"px"}function _e(Fe,ge,Ae,yt,zt){var St;e:if(ge==="style")if(typeof Ae=="string")Fe.style.cssText=Ae;else{if(typeof yt=="string"&&(Fe.style.cssText=yt=""),yt)for(ge in yt)Ae&&ge in Ae||Ne(Fe.style,ge,"");if(Ae)for(ge in Ae)yt&&Ae[ge]===yt[ge]||Ne(Fe.style,ge,Ae[ge])}else if(ge[0]==="o"&&ge[1]==="n")St=ge!==(ge=ge.replace(/Capture$/,"")),ge=ge.toLowerCase()in Fe?ge.toLowerCase().slice(2):ge.slice(2),Fe.l||(Fe.l={}),Fe.l[ge+St]=Ae,Ae?yt||Fe.addEventListener(ge,St?ke:Oe,St):Fe.removeEventListener(ge,St?ke:Oe,St);else if(ge!=="dangerouslySetInnerHTML"){if(zt)ge=ge.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(ge!=="href"&&ge!=="list"&&ge!=="form"&&ge!=="tabIndex"&&ge!=="download"&&ge in Fe)try{Fe[ge]=Ae??"";break e}catch{}typeof Ae=="function"||(Ae!=null&&(Ae!==!1||ge[0]==="a"&&ge[1]==="r")?Fe.setAttribute(ge,Ae):Fe.removeAttribute(ge))}}function Oe(Fe){this.l[Fe.type+!1](c.event?c.event(Fe):Fe)}function ke(Fe){this.l[Fe.type+!0](c.event?c.event(Fe):Fe)}function Re(Fe,ge,Ae,yt,zt,St,rn,mn,Mn){var hn,ft,xn,Ve,gn,Zn,re,Bn,Sr,Ur,oo,In=ge.type;if(ge.constructor!==void 0)return null;Ae.__h!=null&&(Mn=Ae.__h,mn=ge.__e=Ae.__e,ge.__h=null,St=[mn]),(hn=c.__b)&&hn(ge);try{e:if(typeof In=="function"){if(Bn=ge.props,Sr=(hn=In.contextType)&&yt[hn.__c],Ur=hn?Sr?Sr.props.value:hn.__:yt,Ae.__c?re=(ft=ge.__c=Ae.__c).__=ft.__E:("prototype"in In&&In.prototype.render?ge.__c=ft=new In(Bn,Ur):(ge.__c=ft=new W(Bn,Ur),ft.constructor=In,ft.render=ze),Sr&&Sr.sub(ft),ft.props=Bn,ft.state||(ft.state={}),ft.context=Ur,ft.__n=yt,xn=ft.__d=!0,ft.__h=[]),ft.__s==null&&(ft.__s=ft.state),In.getDerivedStateFromProps!=null&&(ft.__s==ft.state&&(ft.__s=A({},ft.__s)),A(ft.__s,In.getDerivedStateFromProps(Bn,ft.__s))),Ve=ft.props,gn=ft.state,xn)In.getDerivedStateFromProps==null&&ft.componentWillMount!=null&&ft.componentWillMount(),ft.componentDidMount!=null&&ft.__h.push(ft.componentDidMount);else{if(In.getDerivedStateFromProps==null&&Bn!==Ve&&ft.componentWillReceiveProps!=null&&ft.componentWillReceiveProps(Bn,Ur),!ft.__e&&ft.shouldComponentUpdate!=null&&ft.shouldComponentUpdate(Bn,ft.__s,Ur)===!1||ge.__v===Ae.__v){ft.props=Bn,ft.state=ft.__s,ge.__v!==Ae.__v&&(ft.__d=!1),ft.__v=ge,ge.__e=Ae.__e,ge.__k=Ae.__k,ge.__k.forEach(function(jo){jo&&(jo.__=ge)}),ft.__h.length&&rn.push(ft);break e}ft.componentWillUpdate!=null&&ft.componentWillUpdate(Bn,ft.__s,Ur),ft.componentDidUpdate!=null&&ft.__h.push(function(){ft.componentDidUpdate(Ve,gn,Zn)})}ft.context=Ur,ft.props=Bn,ft.state=ft.__s,(hn=c.__r)&&hn(ge),ft.__d=!1,ft.__v=ge,ft.__P=Fe,hn=ft.render(ft.props,ft.state,ft.context),ft.state=ft.__s,ft.getChildContext!=null&&(yt=A(A({},yt),ft.getChildContext())),xn||ft.getSnapshotBeforeUpdate==null||(Zn=ft.getSnapshotBeforeUpdate(Ve,gn)),oo=hn!=null&&hn.type===G&&hn.key==null?hn.props.children:hn,H(Fe,Array.isArray(oo)?oo:[oo],ge,Ae,yt,zt,St,rn,mn,Mn),ft.base=ge.__e,ge.__h=null,ft.__h.length&&rn.push(ft),re&&(ft.__E=ft.__=null),ft.__e=!1}else St==null&&ge.__v===Ae.__v?(ge.__k=Ae.__k,ge.__e=Ae.__e):ge.__e=ve(Ae.__e,ge,Ae,yt,zt,St,rn,Mn);(hn=c.diffed)&&hn(ge)}catch(jo){ge.__v=null,(Mn||St!=null)&&(ge.__e=mn,ge.__h=!!Mn,St[St.indexOf(mn)]=null),c.__e(jo,ge,Ae)}}function ue(Fe,ge){c.__c&&c.__c(ge,Fe),Fe.some(function(Ae){try{Fe=Ae.__h,Ae.__h=[],Fe.some(function(yt){yt.call(Ae)})}catch(yt){c.__e(yt,Ae.__v)}})}function ve(Fe,ge,Ae,yt,zt,St,rn,mn){var Mn,hn,ft,xn=Ae.props,Ve=ge.props,gn=ge.type,Zn=0;if(gn==="svg"&&(zt=!0),St!=null){for(;Zn<St.length;Zn++)if((Mn=St[Zn])&&"setAttribute"in Mn==!!gn&&(gn?Mn.localName===gn:Mn.nodeType===3)){Fe=Mn,St[Zn]=null;break}}if(Fe==null){if(gn===null)return document.createTextNode(Ve);Fe=zt?document.createElementNS("http://www.w3.org/2000/svg",gn):document.createElement(gn,Ve.is&&Ve),St=null,mn=!1}if(gn===null)xn===Ve||mn&&Fe.data===Ve||(Fe.data=Ve);else{if(St=St&&s.call(Fe.childNodes),hn=(xn=Ae.props||E).dangerouslySetInnerHTML,ft=Ve.dangerouslySetInnerHTML,!mn){if(St!=null)for(xn={},Zn=0;Zn<Fe.attributes.length;Zn++)xn[Fe.attributes[Zn].name]=Fe.attributes[Zn].value;(ft||hn)&&(ft&&(hn&&ft.__html==hn.__html||ft.__html===Fe.innerHTML)||(Fe.innerHTML=ft&&ft.__html||""))}if(function(re,Bn,Sr,Ur,oo){var In;for(In in Sr)In==="children"||In==="key"||In in Bn||_e(re,In,null,Sr[In],Ur);for(In in Bn)oo&&typeof Bn[In]!="function"||In==="children"||In==="key"||In==="value"||In==="checked"||Sr[In]===Bn[In]||_e(re,In,Bn[In],Sr[In],Ur)}(Fe,Ve,xn,zt,mn),ft)ge.__k=[];else if(Zn=ge.props.children,H(Fe,Array.isArray(Zn)?Zn:[Zn],ge,Ae,yt,zt&&gn!=="foreignObject",St,rn,St?St[0]:Ae.__k&&X(Ae,0),mn),St!=null)for(Zn=St.length;Zn--;)St[Zn]!=null&&M(St[Zn]);mn||("value"in Ve&&(Zn=Ve.value)!==void 0&&(Zn!==xn.value||Zn!==Fe.value||gn==="progress"&&!Zn)&&_e(Fe,"value",Zn,xn.value,!1),"checked"in Ve&&(Zn=Ve.checked)!==void 0&&Zn!==Fe.checked&&_e(Fe,"checked",Zn,xn.checked,!1))}return Fe}function Pe(Fe,ge,Ae){try{typeof Fe=="function"?Fe(ge):Fe.current=ge}catch(yt){c.__e(yt,Ae)}}function Xe(Fe,ge,Ae){var yt,zt;if(c.unmount&&c.unmount(Fe),(yt=Fe.ref)&&(yt.current&&yt.current!==Fe.__e||Pe(yt,null,ge)),(yt=Fe.__c)!=null){if(yt.componentWillUnmount)try{yt.componentWillUnmount()}catch(St){c.__e(St,ge)}yt.base=yt.__P=null}if(yt=Fe.__k)for(zt=0;zt<yt.length;zt++)yt[zt]&&Xe(yt[zt],ge,typeof Fe.type!="function");Ae||Fe.__e==null||M(Fe.__e),Fe.__e=Fe.__d=void 0}function ze(Fe,ge,Ae){return this.constructor(Fe,Ae)}function Je(Fe,ge,Ae){var yt,zt,St;c.__&&c.__(Fe,ge),zt=(yt=typeof Ae=="function")?null:Ae&&Ae.__k||ge.__k,St=[],Re(ge,Fe=(!yt&&Ae||ge).__k=I(G,null,[Fe]),zt||E,E,ge.ownerSVGElement!==void 0,!yt&&Ae?[Ae]:zt?null:ge.firstChild?s.call(ge.childNodes):null,St,!yt&&Ae?Ae:zt?zt.__e:ge.firstChild,yt),ue(St,Fe)}function _t(Fe,ge){Je(Fe,ge,_t)}function kt(Fe,ge,Ae){var yt,zt,St,rn=A({},Fe.props);for(St in ge)St=="key"?yt=ge[St]:St=="ref"?zt=ge[St]:rn[St]=ge[St];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Ae),D(Fe.type,rn,yt||Fe.key,zt||Fe.ref,null)}function qt(Fe,ge){var Ae={__c:ge="__cC"+_++,__:Fe,Consumer:function(yt,zt){return yt.children(zt)},Provider:function(yt){var zt,St;return this.getChildContext||(zt=[],(St={})[ge]=this,this.getChildContext=function(){return St},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&zt.some(z)},this.sub=function(rn){zt.push(rn);var mn=rn.componentWillUnmount;rn.componentWillUnmount=function(){zt.splice(zt.indexOf(rn),1),mn&&mn.call(rn)}}),yt.children}};return Ae.Provider.__=Ae.Consumer.contextType=Ae}s=x.slice,c={__e:function(Fe,ge){for(var Ae,yt,zt;ge=ge.__;)if((Ae=ge.__c)&&!Ae.__)try{if((yt=Ae.constructor)&&yt.getDerivedStateFromError!=null&&(Ae.setState(yt.getDerivedStateFromError(Fe)),zt=Ae.__d),Ae.componentDidCatch!=null&&(Ae.componentDidCatch(Fe),zt=Ae.__d),zt)return Ae.__E=Ae}catch(St){Fe=St}throw Fe}},v=0,W.prototype.setState=function(Fe,ge){var Ae;Ae=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof Fe=="function"&&(Fe=Fe(A({},Ae),this.props)),Fe&&A(Ae,Fe),Fe!=null&&this.__v&&(ge&&this.__h.push(ge),z(this))},W.prototype.forceUpdate=function(Fe){this.__v&&(this.__e=!0,Fe&&this.__h.push(Fe),z(this))},W.prototype.render=G,p=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,L.__r=0,_=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return z}),r.d(o,"b",function(){return Dc}),r.d(o,"c",function(){return Ta}),r.d(o,"d",function(){return qn}),r.d(o,"e",function(){return Yt}),r.d(o,"f",function(){return en}),r.d(o,"g",function(){return Un}),r.d(o,"h",function(){return Ri}),r.d(o,"i",function(){return oo}),r.d(o,"j",function(){return Sn}),r.d(o,"k",function(){return pl}),r.d(o,"l",function(){return Ac}),r.d(o,"m",function(){return re}),r.d(o,"n",function(){return uu}),r.d(o,"o",function(){return K}),r.d(o,"p",function(){return Gf}),r.d(o,"q",function(){return ha}),r.d(o,"r",function(){return su}),r.d(o,"s",function(){return oa}),r.d(o,"t",function(){return Io}),r.d(o,"u",function(){return Ss}),r.d(o,"v",function(){return Vf}),r.d(o,"w",function(){return Mc}),r.d(o,"x",function(){return si}),r.d(o,"y",function(){return ya}),r.d(o,"z",function(){return Wo}),r.d(o,"A",function(){return fi}),r.d(o,"B",function(){return na}),r.d(o,"C",function(){return hn}),r.d(o,"D",function(){return kc}),r.d(o,"E",function(){return Vr}),r.d(o,"F",function(){return Hr}),r.d(o,"G",function(){return xc}),r.d(o,"H",function(){return Oc}),r.d(o,"I",function(){return Pc}),r.d(o,"J",function(){return ci}),r.d(o,"K",function(){return Ke}),r.d(o,"L",function(){return io}),r.d(o,"M",function(){return Ms});var v=[];Object.freeze(v);var p={};function g(){return++Pn.mobxGuid}function b(T){throw _(!1,T),"X"}function _(T,k){if(!T)throw new Error("[mobx] "+(k||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(p);function E(T){var k=!1;return function(){if(!k)return k=!0,T.apply(this,arguments)}}var x=function(){};function P(T){return T!==null&&typeof T=="object"}function A(T){if(T===null||typeof T!="object")return!1;var k=Object.getPrototypeOf(T);return k===Object.prototype||k===null}function M(T,k,U){Object.defineProperty(T,k,{enumerable:!1,writable:!0,configurable:!0,value:U})}function I(T,k){var U="isMobX"+T;return k.prototype[U]=!0,function(ne){return P(ne)&&ne[U]===!0}}function D(T){return T instanceof Map}function $(T){return T instanceof Set}function G(T){var k=new Set;for(var U in T)k.add(U);return Object.getOwnPropertySymbols(T).forEach(function(ne){Object.getOwnPropertyDescriptor(T,ne).enumerable&&k.add(ne)}),Array.from(k)}function W(T){return T&&T.toString?T.toString():new String(T).toString()}function X(T){return T===null?null:typeof T=="object"?""+T:T}var J=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:Object.getOwnPropertyNames,z=Symbol("mobx administration"),L=function(){function T(k){k===void 0&&(k="Atom@"+g()),this.name=k,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=xn.NOT_TRACKING}return T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(k){return k()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(k){return k()})},T.prototype.reportObserved=function(){return xs(this)},T.prototype.reportChanged=function(){Yi(),function(k){k.lowestObserverState!==xn.STALE&&(k.lowestObserverState=xn.STALE,k.observers.forEach(function(U){U.dependenciesState===xn.UP_TO_DATE&&(U.isTracing!==Ve.NONE&&Aa(U,k),U.onBecomeStale()),U.dependenciesState=xn.STALE}))}(this),ta()},T.prototype.toString=function(){return this.name},T}(),H=I("Atom",L);function K(T,k,U){k===void 0&&(k=x),U===void 0&&(U=x);var ne,me=new L(T);return k!==x&&Bf("onBecomeObserved",me,k,ne),U!==x&&Vr(me,U),me}var Y={identity:function(T,k){return T===k},structural:function(T,k){return jt(T,k)},default:function(T,k){return Object.is(T,k)},shallow:function(T,k){return jt(T,k,1)}},ce=function(T,k){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ne){U.__proto__=ne}||function(U,ne){for(var me in ne)ne.hasOwnProperty(me)&&(U[me]=ne[me])},ce(T,k)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Ne=function(){return Ne=Object.assign||function(T){for(var k,U=1,ne=arguments.length;U<ne;U++)for(var me in k=arguments[U])Object.prototype.hasOwnProperty.call(k,me)&&(T[me]=k[me]);return T},Ne.apply(this,arguments)};function _e(T){var k=typeof Symbol=="function"&&T[Symbol.iterator],U=0;return k?k.call(T):{next:function(){return T&&U>=T.length&&(T=void 0),{value:T&&T[U++],done:!T}}}}function Oe(T,k){var U=typeof Symbol=="function"&&T[Symbol.iterator];if(!U)return T;var ne,me,He=U.call(T),mt=[];try{for(;(k===void 0||k-- >0)&&!(ne=He.next()).done;)mt.push(ne.value)}catch(Ht){me={error:Ht}}finally{try{ne&&!ne.done&&(U=He.return)&&U.call(He)}finally{if(me)throw me.error}}return mt}function ke(){for(var T=[],k=0;k<arguments.length;k++)T=T.concat(Oe(arguments[k]));return T}var Re=Symbol("mobx did run lazy initializers"),ue=Symbol("mobx pending decorators"),ve={},Pe={};function Xe(T,k){var U=k?ve:Pe;return U[T]||(U[T]={configurable:!0,enumerable:k,get:function(){return ze(this),this[T]},set:function(ne){ze(this),this[T]=ne}})}function ze(T){var k,U;if(T[Re]!==!0){var ne=T[ue];if(ne){M(T,Re,!0);var me=ke(Object.getOwnPropertySymbols(ne),Object.keys(ne));try{for(var He=_e(me),mt=He.next();!mt.done;mt=He.next()){var Ht=ne[mt.value];Ht.propertyCreator(T,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(_n){k={error:_n}}finally{try{mt&&!mt.done&&(U=He.return)&&U.call(He)}finally{if(k)throw k.error}}}}}function Je(T,k){return function(){var U,ne=function(me,He,mt,Ht){if(Ht===!0)return k(me,He,mt,me,U),null;if(!Object.prototype.hasOwnProperty.call(me,ue)){var _n=me[ue];M(me,ue,Ne({},_n))}return me[ue][He]={prop:He,propertyCreator:k,descriptor:mt,decoratorTarget:me,decoratorArguments:U},Xe(He,T)};return _t(arguments)?(U=v,ne.apply(null,arguments)):(U=Array.prototype.slice.call(arguments),ne)}}function _t(T){return(T.length===2||T.length===3)&&(typeof T[1]=="string"||typeof T[1]=="symbol")||T.length===4&&T[3]===!0}function kt(T,k,U){return si(T)?T:Array.isArray(T)?hn.array(T,{name:U}):A(T)?hn.object(T,void 0,{name:U}):D(T)?hn.map(T,{name:U}):$(T)?hn.set(T,{name:U}):T}function qt(T){return T}function Fe(T){_(T);var k=Je(!0,function(ne,me,He,mt,Ht){var _n=He?He.initializer?He.initializer.call(ne):He.value:void 0;ra(ne).addObservableProp(me,_n,T)}),U=(s!==void 0&&s.env,k);return U.enhancer=T,U}var ge={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ae(T){return T==null?ge:typeof T=="string"?{name:T,deep:!0,proxy:!0}:T}Object.freeze(ge);var yt=Fe(kt),zt=Fe(function(T,k,U){return T==null||fi(T)||ya(T)||Wo(T)||Qo(T)?T:Array.isArray(T)?hn.array(T,{name:U,deep:!1}):A(T)?hn.object(T,void 0,{name:U,deep:!1}):D(T)?hn.map(T,{name:U,deep:!1}):$(T)?hn.set(T,{name:U,deep:!1}):b(!1)}),St=Fe(qt),rn=Fe(function(T,k,U){return jt(T,k)?k:T});function mn(T){return T.defaultDecorator?T.defaultDecorator.enhancer:T.deep===!1?qt:kt}var Mn={box:function(T,k){arguments.length>2&&ft("box");var U=Ae(k);return new Rr(T,mn(U),U.name,!0,U.equals)},array:function(T,k){arguments.length>2&&ft("array");var U=Ae(k);return Ll(T,mn(U),U.name)},map:function(T,k){arguments.length>2&&ft("map");var U=Ae(k);return new Dc(T,mn(U),U.name)},set:function(T,k){arguments.length>2&&ft("set");var U=Ae(k);return new za(T,mn(U),U.name)},object:function(T,k,U){typeof arguments[1]=="string"&&ft("object");var ne=Ae(U);if(ne.proxy===!1)return ha({},T,k,ne);var me=As(ne),He=ha({},void 0,void 0,ne),mt=cu(He);return Uf(mt,T,k,me),mt},ref:St,shallow:zt,deep:yt,struct:rn},hn=function(T,k,U){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return yt.apply(null,arguments);if(si(T))return T;var ne=A(T)?hn.object(T,k,U):Array.isArray(T)?hn.array(T,k):D(T)?hn.map(T,k):$(T)?hn.set(T,k):T;if(ne!==T)return ne;b(!1)};function ft(T){b("Expected one or two arguments to observable."+T+". Did you accidentally try to use observable."+T+" as decorator?")}Object.keys(Mn).forEach(function(T){return hn[T]=Mn[T]});var xn,Ve,gn=Je(!1,function(T,k,U,ne,me){var He=U.get,mt=U.set,Ht=me[0]||{};ra(T).addComputedProp(T,k,Ne({get:He,set:mt,context:T},Ht))}),Zn=gn({equals:Y.structural}),re=function(T,k,U){if(typeof k=="string"||T!==null&&typeof T=="object"&&arguments.length===1)return gn.apply(null,arguments);var ne=typeof k=="object"?k:{};return ne.get=T,ne.set=typeof k=="function"?k:ne.set,ne.name=ne.name||T.name||"",new Va(ne)};re.struct=Zn,function(T){T[T.NOT_TRACKING=-1]="NOT_TRACKING",T[T.UP_TO_DATE=0]="UP_TO_DATE",T[T.POSSIBLY_STALE=1]="POSSIBLY_STALE",T[T.STALE=2]="STALE"}(xn||(xn={})),function(T){T[T.NONE=0]="NONE",T[T.LOG=1]="LOG",T[T.BREAK=2]="BREAK"}(Ve||(Ve={}));var Bn=function(T){this.cause=T};function Sr(T){return T instanceof Bn}function Ur(T){switch(T.dependenciesState){case xn.UP_TO_DATE:return!1;case xn.NOT_TRACKING:case xn.STALE:return!0;case xn.POSSIBLY_STALE:for(var k=en(!0),U=Le(),ne=T.observing,me=ne.length,He=0;He<me;He++){var mt=ne[He];if(dl(mt)){if(Pn.disableErrorBoundaries)mt.get();else try{mt.get()}catch{return at(U),Yt(k),!0}if(T.dependenciesState===xn.STALE)return at(U),Yt(k),!0}}return Nn(T),at(U),Yt(k),!1}}function oo(){return Pn.trackingDerivation!==null}function In(T){var k=T.observers.size>0;Pn.computationDepth>0&&k&&b(!1),Pn.allowStateChanges||!k&&Pn.enforceActions!=="strict"||b(!1)}function jo(T,k,U){var ne=en(!0);Nn(T),T.newObserving=new Array(T.observing.length+100),T.unboundDepsCount=0,T.runId=++Pn.runId;var me,He=Pn.trackingDerivation;if(Pn.trackingDerivation=T,Pn.disableErrorBoundaries===!0)me=k.call(U);else try{me=k.call(U)}catch(mt){me=new Bn(mt)}return Pn.trackingDerivation=He,function(mt){for(var Ht=mt.observing,_n=mt.observing=mt.newObserving,yr=xn.UP_TO_DATE,ln=0,Gr=mt.unboundDepsCount,pr=0;pr<Gr;pr++)(Cr=_n[pr]).diffValue===0&&(Cr.diffValue=1,ln!==pr&&(_n[ln]=Cr),ln++),Cr.dependenciesState>yr&&(yr=Cr.dependenciesState);for(_n.length=ln,mt.newObserving=null,Gr=Ht.length;Gr--;)(Cr=Ht[Gr]).diffValue===0&&mo(Cr,mt),Cr.diffValue=0;for(;ln--;){var Cr;(Cr=_n[ln]).diffValue===1&&(Cr.diffValue=0,jf(Cr,mt))}yr!==xn.UP_TO_DATE&&(mt.dependenciesState=yr,mt.onBecomeStale())}(T),Yt(ne),me}function xe(T){var k=T.observing;T.observing=[];for(var U=k.length;U--;)mo(k[U],T);T.dependenciesState=xn.NOT_TRACKING}function Ke(T){var k=Le();try{return T()}finally{at(k)}}function Le(){var T=Pn.trackingDerivation;return Pn.trackingDerivation=null,T}function at(T){Pn.trackingDerivation=T}function en(T){var k=Pn.allowStateReads;return Pn.allowStateReads=T,k}function Yt(T){Pn.allowStateReads=T}function Nn(T){if(T.dependenciesState!==xn.UP_TO_DATE){T.dependenciesState=xn.UP_TO_DATE;for(var k=T.observing,U=k.length;U--;)k[U].lowestObserverState=xn.UP_TO_DATE}}var _r=0,ui=1,wi=Object.getOwnPropertyDescriptor(function(){},"name");wi&&wi.configurable;function Go(T,k,U){var ne=function(){return Jo(T,k,U||this,arguments)};return ne.isMobxAction=!0,ne}function Jo(T,k,U,ne){var me=Sn();try{return k.apply(U,ne)}catch(He){throw me.error=He,He}finally{Un(me)}}function Sn(T,k,U){var ne=0,me=Le();Yi();var He={prevDerivation:me,prevAllowStateChanges:ir(!0),prevAllowStateReads:en(!0),notifySpy:!1,startTime:ne,actionId:ui++,parentActionId:_r};return _r=He.actionId,He}function Un(T){_r!==T.actionId&&b("invalid action stack. did you forget to finish an action?"),_r=T.parentActionId,T.error!==void 0&&(Pn.suppressReactionErrors=!0),Qr(T.prevAllowStateChanges),Yt(T.prevAllowStateReads),ta(),at(T.prevDerivation),T.notifySpy,Pn.suppressReactionErrors=!1}function qn(T,k){var U,ne=ir(T);try{U=k()}finally{Qr(ne)}return U}function ir(T){var k=Pn.allowStateChanges;return Pn.allowStateChanges=T,k}function Qr(T){Pn.allowStateChanges=T}var Rr=function(T){function k(U,ne,me,He,mt){me===void 0&&(me="ObservableValue@"+g()),mt===void 0&&(mt=Y.default);var Ht=T.call(this,me)||this;return Ht.enhancer=ne,Ht.name=me,Ht.equals=mt,Ht.hasUnreportedChange=!1,Ht.value=ne(U,void 0,me),Ht}return function(U,ne){function me(){this.constructor=U}ce(U,ne),U.prototype=ne===null?Object.create(ne):(me.prototype=ne.prototype,new me)}(k,T),k.prototype.dehanceValue=function(U){return this.dehancer!==void 0?this.dehancer(U):U},k.prototype.set=function(U){this.value,(U=this.prepareNewValue(U))!==Pn.UNCHANGED&&this.setNewValue(U)},k.prototype.prepareNewValue=function(U){if(In(this),Ki(this)){var ne=Mr(this,{object:this,type:"update",newValue:U});if(!ne)return Pn.UNCHANGED;U=ne.newValue}return U=this.enhancer(U,this.value,this.name),this.equals(this.value,U)?Pn.UNCHANGED:U},k.prototype.setNewValue=function(U){var ne=this.value;this.value=U,this.reportChanged(),$i(this)&&yi(this,{type:"update",object:this,newValue:U,oldValue:ne})},k.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},k.prototype.intercept=function(U){return va(this,U)},k.prototype.observe=function(U,ne){return ne&&U({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ma(this,U)},k.prototype.toJSON=function(){return this.get()},k.prototype.toString=function(){return this.name+"["+this.value+"]"},k.prototype.valueOf=function(){return X(this.get())},k.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},k}(L),fl=I("ObservableValue",Rr),Va=function(){function T(k){this.dependenciesState=xn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=xn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new Bn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ve.NONE,_(k.get,"missing option for computed: get"),this.derivation=k.get,this.name=k.name||"ComputedValue@"+g(),k.set&&(this.setter=Go(this.name+"-setter",k.set)),this.equals=k.equals||(k.compareStructural||k.struct?Y.structural:Y.default),this.scope=k.context,this.requiresReaction=!!k.requiresReaction,this.keepAlive=!!k.keepAlive}return T.prototype.onBecomeStale=function(){(function(k){k.lowestObserverState===xn.UP_TO_DATE&&(k.lowestObserverState=xn.POSSIBLY_STALE,k.observers.forEach(function(U){U.dependenciesState===xn.UP_TO_DATE&&(U.dependenciesState=xn.POSSIBLY_STALE,U.isTracing!==Ve.NONE&&Aa(U,k),U.onBecomeStale())}))})(this)},T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(k){return k()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(k){return k()})},T.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(xs(this),Ur(this)&&this.trackAndCompute()&&function(U){U.lowestObserverState!==xn.STALE&&(U.lowestObserverState=xn.STALE,U.observers.forEach(function(ne){ne.dependenciesState===xn.POSSIBLY_STALE?ne.dependenciesState=xn.STALE:ne.dependenciesState===xn.UP_TO_DATE&&(U.lowestObserverState=xn.UP_TO_DATE)}))}(this)):Ur(this)&&(this.warnAboutUntrackedRead(),Yi(),this.value=this.computeValue(!1),ta());var k=this.value;if(Sr(k))throw k.cause;return k},T.prototype.peek=function(){var k=this.computeValue(!1);if(Sr(k))throw k.cause;return k},T.prototype.set=function(k){if(this.setter){_(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,k)}finally{this.isRunningSetter=!1}}else _(!1,!1)},T.prototype.trackAndCompute=function(){var k=this.value,U=this.dependenciesState===xn.NOT_TRACKING,ne=this.computeValue(!0),me=U||Sr(k)||Sr(ne)||!this.equals(k,ne);return me&&(this.value=ne),me},T.prototype.computeValue=function(k){var U;if(this.isComputing=!0,Pn.computationDepth++,k)U=jo(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)U=this.derivation.call(this.scope);else try{U=this.derivation.call(this.scope)}catch(ne){U=new Bn(ne)}return Pn.computationDepth--,this.isComputing=!1,U},T.prototype.suspend=function(){this.keepAlive||(xe(this),this.value=void 0)},T.prototype.observe=function(k,U){var ne=this,me=!0,He=void 0;return Ac(function(){var mt=ne.get();if(!me||U){var Ht=Le();k({type:"update",object:ne,newValue:mt,oldValue:He}),at(Ht)}me=!1,He=mt})},T.prototype.warnAboutUntrackedRead=function(){},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},T.prototype.valueOf=function(){return X(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(),dl=I("ComputedValue",Va),lu=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},zd={};function bc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:zd}var da=!0,Wu=!1,Pn=function(){var T=bc();return T.__mobxInstanceCount>0&&!T.__mobxGlobals&&(da=!1),T.__mobxGlobals&&T.__mobxGlobals.version!==new lu().version&&(da=!1),da?T.__mobxGlobals?(T.__mobxInstanceCount+=1,T.__mobxGlobals.UNCHANGED||(T.__mobxGlobals.UNCHANGED={}),T.__mobxGlobals):(T.__mobxInstanceCount=1,T.__mobxGlobals=new lu):(setTimeout(function(){Wu||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new lu)}();function jf(T,k){T.observers.add(k),T.lowestObserverState>k.dependenciesState&&(T.lowestObserverState=k.dependenciesState)}function mo(T,k){T.observers.delete(k),T.observers.size===0&&_c(T)}function _c(T){T.isPendingUnobservation===!1&&(T.isPendingUnobservation=!0,Pn.pendingUnobservations.push(T))}function Yi(){Pn.inBatch++}function ta(){if(--Pn.inBatch==0){Ec();for(var T=Pn.pendingUnobservations,k=0;k<T.length;k++){var U=T[k];U.isPendingUnobservation=!1,U.observers.size===0&&(U.isBeingObserved&&(U.isBeingObserved=!1,U.onBecomeUnobserved()),U instanceof Va&&U.suspend())}Pn.pendingUnobservations=[]}}function xs(T){var k=Pn.trackingDerivation;return k!==null?(k.runId!==T.lastAccessedBy&&(T.lastAccessedBy=k.runId,k.newObserving[k.unboundDepsCount++]=T,T.isBeingObserved||(T.isBeingObserved=!0,T.onBecomeObserved())),!0):(T.observers.size===0&&Pn.inBatch>0&&_c(T),!1)}function Aa(T,k){if(T.isTracing===Ve.BREAK){var U=[];pa(Io(T),U,1),new Function(`debugger;
/*
Tracing '`+T.name+`'

You are entering this break point because derivation '`+T.name+"' is being traced and '"+k.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(T instanceof Va?T.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+U.join(`
`)+`
*/
    `)()}}function pa(T,k,U){k.length>=1e3?k.push("(and many more)"):(k.push(""+new Array(U).join("	")+T.name),T.dependencies&&T.dependencies.forEach(function(ne){return pa(ne,k,U+1)}))}var Ta=function(){function T(k,U,ne,me){k===void 0&&(k="Reaction@"+g()),me===void 0&&(me=!1),this.name=k,this.onInvalidate=U,this.errorHandler=ne,this.requiresObservable=me,this.observing=[],this.newObserving=[],this.dependenciesState=xn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ve.NONE}return T.prototype.onBecomeStale=function(){this.schedule()},T.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),Ec())},T.prototype.isScheduled=function(){return this._isScheduled},T.prototype.runReaction=function(){if(!this.isDisposed){if(Yi(),this._isScheduled=!1,Ur(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(k){this.reportExceptionInDerivation(k)}}ta()}},T.prototype.track=function(k){if(!this.isDisposed){Yi(),this._isRunning=!0;var U=jo(this,k,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&xe(this),Sr(U)&&this.reportExceptionInDerivation(U.cause),ta()}},T.prototype.reportExceptionInDerivation=function(k){var U=this;if(this.errorHandler)this.errorHandler(k,this);else{if(Pn.disableErrorBoundaries)throw k;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(ne){return ne(k,U)})}},T.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Yi(),xe(this),ta()))},T.prototype.getDisposer=function(){var k=this.dispose.bind(this);return k[z]=this,k},T.prototype.toString=function(){return"Reaction["+this.name+"]"},T.prototype.trace=function(k){k===void 0&&(k=!1),function(){for(var U=[],ne=0;ne<arguments.length;ne++)U[ne]=arguments[ne];var me=!1;typeof U[U.length-1]=="boolean"&&(me=U.pop());var He=Lr(U);if(!He)return b(!1);He.isTracing,Ve.NONE,He.isTracing=me?Ve.BREAK:Ve.LOG}(this,k)},T}(),wc=function(T){return T()};function Ec(){Pn.inBatch>0||Pn.isRunningReactions||wc(If)}function If(){Pn.isRunningReactions=!0;for(var T=Pn.pendingReactions,k=0;T.length>0;){++k==100&&T.splice(0);for(var U=T.splice(0),ne=0,me=U.length;ne<me;ne++)U[ne].runReaction()}Pn.isRunningReactions=!1}var zu=I("Reaction",Ta);function Lf(T){var k=wc;wc=function(U){return T(function(){return k(U)})}}function Oc(T){return function(){}}function Hd(){b(!1)}function Cl(T){return function(k,U,ne){if(ne){if(ne.value)return{value:Go(T,ne.value),enumerable:!1,configurable:!0,writable:!0};var me=ne.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Go(T,me.call(this))}}}return Ff(T).apply(this,arguments)}}function Ff(T){return function(k,U,ne){Object.defineProperty(k,U,{configurable:!0,enumerable:!1,get:function(){},set:function(me){M(this,U,pl(T,me))}})}}var pl=function(T,k,U,ne){return arguments.length===1&&typeof T=="function"?Go(T.name||"<unnamed action>",T):arguments.length===2&&typeof k=="function"?Go(T,k):arguments.length===1&&typeof T=="string"?Cl(T):ne!==!0?Cl(k).apply(null,arguments):void M(T,k,Go(T.name||k,U.value,this))};function xc(T,k){return Jo(typeof T=="string"?T:T.name||"<unnamed action>",typeof T=="function"?T:k,this,void 0)}function Ss(T){return typeof T=="function"&&T.isMobxAction===!0}function Sc(T,k,U){M(T,k,Go(k,U.bind(T)))}function Ac(T,k){k===void 0&&(k=p);var U,ne=k&&k.name||T.name||"Autorun@"+g();if(!k.scheduler&&!k.delay)U=new Ta(ne,function(){this.track(mt)},k.onError,k.requiresObservable);else{var me=$f(k),He=!1;U=new Ta(ne,function(){He||(He=!0,me(function(){He=!1,U.isDisposed||U.track(mt)}))},k.onError,k.requiresObservable)}function mt(){T(U)}return U.schedule(),U.getDisposer()}pl.bound=function(T,k,U,ne){return ne===!0?(Sc(T,k,U.value),null):U?{configurable:!0,enumerable:!1,get:function(){return Sc(this,k,U.value||U.initializer.call(this)),this[k]},set:Hd}:{enumerable:!1,configurable:!0,set:function(me){Sc(this,k,me)},get:function(){}}};var Xd=function(T){return T()};function $f(T){return T.scheduler?T.scheduler:T.delay?function(k){return setTimeout(k,T.delay)}:Xd}function Hr(T,k,U){U===void 0&&(U=p);var ne,me,He,mt=U.name||"Reaction@"+g(),Ht=pl(mt,U.onError?(ne=U.onError,me=k,function(){try{return me.apply(this,arguments)}catch(Eo){ne.call(this,Eo)}}):k),_n=!U.scheduler&&!U.delay,yr=$f(U),ln=!0,Gr=!1,pr=U.compareStructural?Y.structural:U.equals||Y.default,Cr=new Ta(mt,function(){ln||_n?ia():Gr||(Gr=!0,yr(ia))},U.onError,U.requiresObservable);function ia(){if(Gr=!1,!Cr.isDisposed){var Eo=!1;Cr.track(function(){var Ji=T(Cr);Eo=ln||!pr(He,Ji),He=Ji}),ln&&U.fireImmediately&&Ht(He,Cr),ln||Eo!==!0||Ht(He,Cr),ln&&(ln=!1)}}return Cr.schedule(),Cr.getDisposer()}function Vr(T,k,U){return Bf("onBecomeUnobserved",T,k,U)}function Bf(T,k,U,ne){var me=typeof ne=="function"?oa(k,U):oa(k),He=typeof ne=="function"?ne:U,mt=T+"Listeners";return me[mt]?me[mt].add(He):me[mt]=new Set([He]),typeof me[T]!="function"?b(!1):function(){var Ht=me[mt];Ht&&(Ht.delete(He),Ht.size===0&&delete me[mt])}}function uu(T){var k=T.enforceActions,U=T.computedRequiresReaction,ne=T.computedConfigurable,me=T.disableErrorBoundaries,He=T.reactionScheduler,mt=T.reactionRequiresObservable,Ht=T.observableRequiresReaction;if(T.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Wu=!0,da&&(--bc().__mobxInstanceCount==0&&(bc().__mobxGlobals=void 0),Pn=new lu)),k!==void 0){var _n=void 0;switch(k){case!0:case"observed":_n=!0;break;case!1:case"never":_n=!1;break;case"strict":case"always":_n="strict";break;default:b("Invalid value for 'enforceActions': '"+k+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=_n,Pn.allowStateChanges=_n!==!0&&_n!=="strict"}U!==void 0&&(Pn.computedRequiresReaction=!!U),mt!==void 0&&(Pn.reactionRequiresObservable=!!mt),Ht!==void 0&&(Pn.observableRequiresReaction=!!Ht,Pn.allowStateReads=!Pn.observableRequiresReaction),ne!==void 0&&(Pn.computedConfigurable=!!ne),me!==void 0&&(Pn.disableErrorBoundaries=!!me),He&&Lf(He)}function ha(T,k,U,ne){var me=As(ne=Ae(ne));return ze(T),ra(T,ne.name,me.enhancer),k&&Uf(T,k,U,me),T}function As(T){return T.defaultDecorator||(T.deep===!1?St:yt)}function Uf(T,k,U,ne){var me,He;Yi();try{var mt=J(k);try{for(var Ht=_e(mt),_n=Ht.next();!_n.done;_n=Ht.next()){var yr=_n.value,ln=Object.getOwnPropertyDescriptor(k,yr),Gr=(U&&yr in U?U[yr]:ln.get?gn:ne)(T,yr,ln,!0);Gr&&Object.defineProperty(T,yr,Gr)}}catch(pr){me={error:pr}}finally{try{_n&&!_n.done&&(He=Ht.return)&&He.call(Ht)}finally{if(me)throw me.error}}}finally{ta()}}function Io(T,k){return jl(oa(T,k))}function jl(T){var k,U,ne={name:T.name};return T.observing&&T.observing.length>0&&(ne.dependencies=(k=T.observing,U=[],k.forEach(function(me){U.indexOf(me)===-1&&U.push(me)}),U).map(jl)),ne}var Il=0;function Ts(){this.message="FLOW_CANCELLED"}function su(T){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var k=T.name||"<unnamed flow>";return function(){var U,ne=this,me=arguments,He=++Il,mt=pl(k+" - runid: "+He+" - init",T).apply(ne,me),Ht=void 0,_n=new Promise(function(yr,ln){var Gr=0;function pr(Eo){var Ji;Ht=void 0;try{Ji=pl(k+" - runid: "+He+" - yield "+Gr++,mt.next).call(mt,Eo)}catch(hl){return ln(hl)}ia(Ji)}function Cr(Eo){var Ji;Ht=void 0;try{Ji=pl(k+" - runid: "+He+" - yield "+Gr++,mt.throw).call(mt,Eo)}catch(hl){return ln(hl)}ia(Ji)}function ia(Eo){if(!Eo||typeof Eo.then!="function")return Eo.done?yr(Eo.value):(Ht=Promise.resolve(Eo.value)).then(pr,Cr);Eo.then(ia,ln)}U=ln,pr(void 0)});return _n.cancel=pl(k+" - runid: "+He+" - cancel",function(){try{Ht&&Ei(Ht);var yr=mt.return(void 0),ln=Promise.resolve(yr.value);ln.then(x,x),Ei(ln),U(new Ts)}catch(Gr){U(Gr)}}),_n}}function Ei(T){typeof T.cancel=="function"&&T.cancel()}function Tc(T,k){if(T==null)return!1;if(k!==void 0){if(fi(T)===!1||!T[z].values.has(k))return!1;var U=oa(T,k);return dl(U)}return dl(T)}function Vf(T){return arguments.length>1?b(!1):Tc(T)}function Mc(T,k){return typeof k!="string"?b(!1):Tc(T,k)}function ji(T,k){return T!=null&&(k!==void 0?!!fi(T)&&T[z].values.has(k):fi(T)||!!T[z]||H(T)||zu(T)||dl(T))}function si(T){return arguments.length!==1&&b(!1),ji(T)}function na(T){return fi(T)?T[z].getKeys():Wo(T)||Qo(T)?Array.from(T.keys()):ya(T)?T.map(function(k,U){return U}):b(!1)}function io(T){return fi(T)?na(T).map(function(k){return T[k]}):Wo(T)?na(T).map(function(k){return T.get(k)}):Qo(T)?Array.from(T.values()):ya(T)?T.slice():b(!1)}function Gf(T){return fi(T)?na(T).map(function(k){return[k,T[k]]}):Wo(T)?na(T).map(function(k){return[k,T.get(k)]}):Qo(T)?Array.from(T.entries()):ya(T)?T.map(function(k,U){return[U,k]}):b(!1)}function Ii(T,k,U){if(arguments.length!==2||Qo(T))if(fi(T)){var ne=T[z],me=ne.values.get(k);me?ne.write(k,U):ne.addObservableProp(k,U,ne.defaultEnhancer)}else if(Wo(T))T.set(k,U);else if(Qo(T))T.add(k);else{if(!ya(T))return b(!1);typeof k!="number"&&(k=parseInt(k,10)),_(k>=0,"Not a valid index: '"+k+"'"),Yi(),k>=T.length&&(T.length=k+1),T[k]=U,ta()}else{Yi();var He=k;try{for(var mt in He)Ii(T,mt,He[mt])}finally{ta()}}}function kc(T,k,U,ne){return typeof U=="function"?function(me,He,mt,Ht){return Ri(me,He).observe(mt,Ht)}(T,k,U,ne):function(me,He,mt){return Ri(me).observe(He,mt)}(T,k,U)}Ts.prototype=Object.create(Error.prototype);var Wf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Li(T,k,U,ne){return ne.detectCycles&&T.set(k,U),U}function Ni(T,k,U){if(!k.recurseEverything&&!si(T)||typeof T!="object")return T;if(T===null)return null;if(T instanceof Date)return T;if(fl(T))return Ni(T.get(),k,U);if(si(T)&&na(T),k.detectCycles===!0&&T!==null&&U.has(T))return U.get(T);if(ya(T)||Array.isArray(T)){var ne=Li(U,T,[],k),me=T.map(function(pr){return Ni(pr,k,U)});ne.length=me.length;for(var He=0,mt=me.length;He<mt;He++)ne[He]=me[He];return ne}if(Qo(T)||Object.getPrototypeOf(T)===Set.prototype){if(k.exportMapsAsObjects===!1){var Ht=Li(U,T,new Set,k);return T.forEach(function(pr){Ht.add(Ni(pr,k,U))}),Ht}var _n=Li(U,T,[],k);return T.forEach(function(pr){_n.push(Ni(pr,k,U))}),_n}if(Wo(T)||Object.getPrototypeOf(T)===Map.prototype){if(k.exportMapsAsObjects===!1){var yr=Li(U,T,new Map,k);return T.forEach(function(pr,Cr){yr.set(Cr,Ni(pr,k,U))}),yr}var ln=Li(U,T,{},k);return T.forEach(function(pr,Cr){ln[Cr]=Ni(pr,k,U)}),ln}var Gr=Li(U,T,{},k);return G(T).forEach(function(pr){Gr[pr]=Ni(T[pr],k,U)}),Gr}function Pc(T,k){var U;return typeof k=="boolean"&&(k={detectCycles:k}),k||(k=Wf),k.detectCycles=k.detectCycles===void 0?k.recurseEverything===!0:k.detectCycles===!0,k.detectCycles&&(U=new Map),Ni(T,k,U)}function Lr(T){switch(T.length){case 0:return Pn.trackingDerivation;case 1:return oa(T[0]);case 2:return oa(T[0],T[1])}}function ci(T,k){k===void 0&&(k=void 0),Yi();try{return T.apply(k)}finally{ta()}}function Ms(T,k,U){return arguments.length===1||k&&typeof k=="object"?Nc(T,k):zf(T,k,U||{})}function zf(T,k,U){var ne;typeof U.timeout=="number"&&(ne=setTimeout(function(){if(!He[z].isDisposed){He();var mt=new Error("WHEN_TIMEOUT");if(!U.onError)throw mt;U.onError(mt)}},U.timeout)),U.name=U.name||"When@"+g();var me=Go(U.name+"-effect",k),He=Ac(function(mt){T()&&(mt.dispose(),ne&&clearTimeout(ne),me())},U);return He}function Nc(T,k){var U,ne=new Promise(function(me,He){var mt=zf(T,me,Ne(Ne({},k),{onError:He}));U=function(){mt(),He("WHEN_CANCELLED")}});return ne.cancel=U,ne}function ks(T){return T[z]}function Ga(T){return typeof T=="string"||typeof T=="number"||typeof T=="symbol"}var Fi={has:function(T,k){if(k===z||k==="constructor"||k===Re)return!0;var U=ks(T);return Ga(k)?U.has(k):k in T},get:function(T,k){if(k===z||k==="constructor"||k===Re)return T[k];var U=ks(T),ne=U.values.get(k);if(ne instanceof L){var me=ne.get();return me===void 0&&U.has(k),me}return Ga(k)&&U.has(k),T[k]},set:function(T,k,U){return!!Ga(k)&&(Ii(T,k,U),!0)},deleteProperty:function(T,k){return!!Ga(k)&&(ks(T).remove(k),!0)},ownKeys:function(T){return ks(T).keysAtom.reportObserved(),Reflect.ownKeys(T)},preventExtensions:function(T){return b("Dynamic observable objects cannot be frozen"),!1}};function cu(T){var k=new Proxy(T,Fi);return T[z].proxy=k,k}function Ki(T){return T.interceptors!==void 0&&T.interceptors.length>0}function va(T,k){var U=T.interceptors||(T.interceptors=[]);return U.push(k),E(function(){var ne=U.indexOf(k);ne!==-1&&U.splice(ne,1)})}function Mr(T,k){var U=Le();try{for(var ne=ke(T.interceptors||[]),me=0,He=ne.length;me<He&&(_(!(k=ne[me](k))||k.type,"Intercept handlers should return nothing or a change object"),k);me++);return k}finally{at(U)}}function $i(T){return T.changeListeners!==void 0&&T.changeListeners.length>0}function Ma(T,k){var U=T.changeListeners||(T.changeListeners=[]);return U.push(k),E(function(){var ne=U.indexOf(k);ne!==-1&&U.splice(ne,1)})}function yi(T,k){var U=Le(),ne=T.changeListeners;if(ne){for(var me=0,He=(ne=ne.slice()).length;me<He;me++)ne[me](k);at(U)}}var fu={get:function(T,k){return k===z?T[z]:k==="length"?T[z].getArrayLength():typeof k=="number"?po.get.call(T,k):typeof k!="string"||isNaN(k)?po.hasOwnProperty(k)?po[k]:T[k]:po.get.call(T,parseInt(k))},set:function(T,k,U){return k==="length"&&T[z].setArrayLength(U),typeof k=="number"&&po.set.call(T,k,U),typeof k=="symbol"||isNaN(k)?T[k]=U:po.set.call(T,parseInt(k),U),!0},preventExtensions:function(T){return b("Observable arrays cannot be frozen"),!1}};function Ll(T,k,U,ne){U===void 0&&(U="ObservableArray@"+g()),ne===void 0&&(ne=!1);var me,He,mt,Ht=new ka(U,k,ne);me=Ht.values,He=z,mt=Ht,Object.defineProperty(me,He,{enumerable:!1,writable:!1,configurable:!0,value:mt});var _n=new Proxy(Ht.values,fu);if(Ht.proxy=_n,T&&T.length){var yr=ir(!0);Ht.spliceWithArray(0,0,T),Qr(yr)}return _n}var ka=function(){function T(k,U,ne){this.owned=ne,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new L(k||"ObservableArray@"+g()),this.enhancer=function(me,He){return U(me,He,k+"[..]")}}return T.prototype.dehanceValue=function(k){return this.dehancer!==void 0?this.dehancer(k):k},T.prototype.dehanceValues=function(k){return this.dehancer!==void 0&&k.length>0?k.map(this.dehancer):k},T.prototype.intercept=function(k){return va(this,k)},T.prototype.observe=function(k,U){return U===void 0&&(U=!1),U&&k({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ma(this,k)},T.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},T.prototype.setArrayLength=function(k){if(typeof k!="number"||k<0)throw new Error("[mobx.array] Out of range: "+k);var U=this.values.length;if(k!==U)if(k>U){for(var ne=new Array(k-U),me=0;me<k-U;me++)ne[me]=void 0;this.spliceWithArray(U,0,ne)}else this.spliceWithArray(k,U-k)},T.prototype.updateArrayLength=function(k,U){if(k!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=U},T.prototype.spliceWithArray=function(k,U,ne){var me=this;In(this.atom);var He=this.values.length;if(k===void 0?k=0:k>He?k=He:k<0&&(k=Math.max(0,He+k)),U=arguments.length===1?He-k:U==null?0:Math.max(0,Math.min(U,He-k)),ne===void 0&&(ne=v),Ki(this)){var mt=Mr(this,{object:this.proxy,type:"splice",index:k,removedCount:U,added:ne});if(!mt)return v;U=mt.removedCount,ne=mt.added}ne=ne.length===0?ne:ne.map(function(_n){return me.enhancer(_n,void 0)});var Ht=this.spliceItemsIntoValues(k,U,ne);return U===0&&ne.length===0||this.notifyArraySplice(k,ne,Ht),this.dehanceValues(Ht)},T.prototype.spliceItemsIntoValues=function(k,U,ne){var me;if(ne.length<1e4)return(me=this.values).splice.apply(me,ke([k,U],ne));var He=this.values.slice(k,k+U);return this.values=this.values.slice(0,k).concat(ne,this.values.slice(k+U)),He},T.prototype.notifyArrayChildUpdate=function(k,U,ne){var me=!this.owned&&!1,He=$i(this),mt=He||me?{object:this.proxy,type:"update",index:k,newValue:U,oldValue:ne}:null;this.atom.reportChanged(),He&&yi(this,mt)},T.prototype.notifyArraySplice=function(k,U,ne){var me=!this.owned&&!1,He=$i(this),mt=He||me?{object:this.proxy,type:"splice",index:k,removed:ne,added:U,removedCount:ne.length,addedCount:U.length}:null;this.atom.reportChanged(),He&&yi(this,mt)},T}(),po={intercept:function(T){return this[z].intercept(T)},observe:function(T,k){return k===void 0&&(k=!1),this[z].observe(T,k)},clear:function(){return this.splice(0)},replace:function(T){var k=this[z];return k.spliceWithArray(0,k.values.length,T)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(T,k){for(var U=[],ne=2;ne<arguments.length;ne++)U[ne-2]=arguments[ne];var me=this[z];switch(arguments.length){case 0:return[];case 1:return me.spliceWithArray(T);case 2:return me.spliceWithArray(T,k)}return me.spliceWithArray(T,k,U)},spliceWithArray:function(T,k,U){return this[z].spliceWithArray(T,k,U)},push:function(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];var U=this[z];return U.spliceWithArray(U.values.length,0,T),U.values.length},pop:function(){return this.splice(Math.max(this[z].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];var U=this[z];return U.spliceWithArray(0,0,T),U.values.length},reverse:function(){var T=this.slice();return T.reverse.apply(T,arguments)},sort:function(T){var k=this.slice();return k.sort.apply(k,arguments)},remove:function(T){var k=this[z],U=k.dehanceValues(k.values).indexOf(T);return U>-1&&(this.splice(U,1),!0)},get:function(T){var k=this[z];if(k&&T<k.values.length)return k.atom.reportObserved(),k.dehanceValue(k.values[T])},set:function(T,k){var U=this[z],ne=U.values;if(T<ne.length){In(U.atom);var me=ne[T];if(Ki(U)){var He=Mr(U,{type:"update",object:U.proxy,index:T,newValue:k});if(!He)return;k=He.newValue}(k=U.enhancer(k,me))!==me&&(ne[T]=k,U.notifyArrayChildUpdate(T,k,me))}else{if(T!==ne.length)throw new Error("[mobx.array] Index out of bounds, "+T+" is larger than "+ne.length);U.spliceWithArray(T,0,[k])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(T){typeof Array.prototype[T]=="function"&&(po[T]=function(){var k=this[z];k.atom.reportObserved();var U=k.dehanceValues(k.values);return U[T].apply(U,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(T){typeof Array.prototype[T]=="function"&&(po[T]=function(k,U){var ne=this,me=this[z];return me.atom.reportObserved(),me.dehanceValues(me.values)[T](function(He,mt){return k.call(U,He,mt,ne)},U)})}),["reduce","reduceRight"].forEach(function(T){po[T]=function(){var k=this,U=this[z];U.atom.reportObserved();var ne=arguments[0];return arguments[0]=function(me,He,mt){return He=U.dehanceValue(He),ne(me,He,mt,k)},U.values[T].apply(U.values,arguments)}});var Hu,Wa=I("ObservableArrayAdministration",ka);function ya(T){return P(T)&&Wa(T[z])}var Rc,qd={},Dc=function(){function T(k,U,ne){if(U===void 0&&(U=kt),ne===void 0&&(ne="ObservableMap@"+g()),this.enhancer=U,this.name=ne,this[Hu]=qd,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(k)}return T.prototype._has=function(k){return this._data.has(k)},T.prototype.has=function(k){var U=this;if(!Pn.trackingDerivation)return this._has(k);var ne=this._hasMap.get(k);if(!ne){var me=ne=new Rr(this._has(k),qt,this.name+"."+W(k)+"?",!1);this._hasMap.set(k,me),Vr(me,function(){return U._hasMap.delete(k)})}return ne.get()},T.prototype.set=function(k,U){var ne=this._has(k);if(Ki(this)){var me=Mr(this,{type:ne?"update":"add",object:this,newValue:U,name:k});if(!me)return this;U=me.newValue}return ne?this._updateValue(k,U):this._addValue(k,U),this},T.prototype.delete=function(k){var U=this;if(In(this._keysAtom),Ki(this)&&!(me=Mr(this,{type:"delete",object:this,name:k})))return!1;if(this._has(k)){var ne=$i(this),me=ne?{type:"delete",object:this,oldValue:this._data.get(k).value,name:k}:null;return ci(function(){U._keysAtom.reportChanged(),U._updateHasMapEntry(k,!1),U._data.get(k).setNewValue(void 0),U._data.delete(k)}),ne&&yi(this,me),!0}return!1},T.prototype._updateHasMapEntry=function(k,U){var ne=this._hasMap.get(k);ne&&ne.setNewValue(U)},T.prototype._updateValue=function(k,U){var ne=this._data.get(k);if((U=ne.prepareNewValue(U))!==Pn.UNCHANGED){var me=$i(this),He=me?{type:"update",object:this,oldValue:ne.value,name:k,newValue:U}:null;ne.setNewValue(U),me&&yi(this,He)}},T.prototype._addValue=function(k,U){var ne=this;In(this._keysAtom),ci(function(){var mt=new Rr(U,ne.enhancer,ne.name+"."+W(k),!1);ne._data.set(k,mt),U=mt.value,ne._updateHasMapEntry(k,!0),ne._keysAtom.reportChanged()});var me=$i(this),He=me?{type:"add",object:this,name:k,newValue:U}:null;me&&yi(this,He)},T.prototype.get=function(k){return this.has(k)?this.dehanceValue(this._data.get(k).get()):this.dehanceValue(void 0)},T.prototype.dehanceValue=function(k){return this.dehancer!==void 0?this.dehancer(k):k},T.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},T.prototype.values=function(){var k=this,U=this.keys();return kr({next:function(){var ne=U.next(),me=ne.done,He=ne.value;return{done:me,value:me?void 0:k.get(He)}}})},T.prototype.entries=function(){var k=this,U=this.keys();return kr({next:function(){var ne=U.next(),me=ne.done,He=ne.value;return{done:me,value:me?void 0:[He,k.get(He)]}}})},T.prototype[Hu=z,Symbol.iterator]=function(){return this.entries()},T.prototype.forEach=function(k,U){var ne,me;try{for(var He=_e(this),mt=He.next();!mt.done;mt=He.next()){var Ht=Oe(mt.value,2),_n=Ht[0],yr=Ht[1];k.call(U,yr,_n,this)}}catch(ln){ne={error:ln}}finally{try{mt&&!mt.done&&(me=He.return)&&me.call(He)}finally{if(ne)throw ne.error}}},T.prototype.merge=function(k){var U=this;return Wo(k)&&(k=k.toJS()),ci(function(){var ne=ir(!0);try{A(k)?G(k).forEach(function(me){return U.set(me,k[me])}):Array.isArray(k)?k.forEach(function(me){var He=Oe(me,2),mt=He[0],Ht=He[1];return U.set(mt,Ht)}):D(k)?(k.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+k.constructor.name),k.forEach(function(me,He){return U.set(He,me)})):k!=null&&b("Cannot initialize map from "+k)}finally{Qr(ne)}}),this},T.prototype.clear=function(){var k=this;ci(function(){Ke(function(){var U,ne;try{for(var me=_e(k.keys()),He=me.next();!He.done;He=me.next()){var mt=He.value;k.delete(mt)}}catch(Ht){U={error:Ht}}finally{try{He&&!He.done&&(ne=me.return)&&ne.call(me)}finally{if(U)throw U.error}}})})},T.prototype.replace=function(k){var U=this;return ci(function(){var ne,me,He,mt,Ht=function(ei){if(D(ei)||Wo(ei))return ei;if(Array.isArray(ei))return new Map(ei);if(A(ei)){var Bl=new Map;for(var yl in ei)Bl.set(yl,ei[yl]);return Bl}return b("Cannot convert to map from '"+ei+"'")}(k),_n=new Map,yr=!1;try{for(var ln=_e(U._data.keys()),Gr=ln.next();!Gr.done;Gr=ln.next()){var pr=Gr.value;if(!Ht.has(pr))if(U.delete(pr))yr=!0;else{var Cr=U._data.get(pr);_n.set(pr,Cr)}}}catch(ei){ne={error:ei}}finally{try{Gr&&!Gr.done&&(me=ln.return)&&me.call(ln)}finally{if(ne)throw ne.error}}try{for(var ia=_e(Ht.entries()),Eo=ia.next();!Eo.done;Eo=ia.next()){var Ji=Oe(Eo.value,2),hl=(pr=Ji[0],Cr=Ji[1],U._data.has(pr));if(U.set(pr,Cr),U._data.has(pr)){var vl=U._data.get(pr);_n.set(pr,vl),hl||(yr=!0)}}}catch(ei){He={error:ei}}finally{try{Eo&&!Eo.done&&(mt=ia.return)&&mt.call(ia)}finally{if(He)throw He.error}}if(!yr)if(U._data.size!==_n.size)U._keysAtom.reportChanged();else for(var $l=U._data.keys(),du=_n.keys(),Ha=$l.next(),pu=du.next();!Ha.done;){if(Ha.value!==pu.value){U._keysAtom.reportChanged();break}Ha=$l.next(),pu=du.next()}U._data=_n}),this},Object.defineProperty(T.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.toPOJO=function(){var k,U,ne={};try{for(var me=_e(this),He=me.next();!He.done;He=me.next()){var mt=Oe(He.value,2),Ht=mt[0],_n=mt[1];ne[typeof Ht=="symbol"?Ht:W(Ht)]=_n}}catch(yr){k={error:yr}}finally{try{He&&!He.done&&(U=me.return)&&U.call(me)}finally{if(k)throw k.error}}return ne},T.prototype.toJS=function(){return new Map(this)},T.prototype.toJSON=function(){return this.toPOJO()},T.prototype.toString=function(){var k=this;return this.name+"[{ "+Array.from(this.keys()).map(function(U){return W(U)+": "+k.get(U)}).join(", ")+" }]"},T.prototype.observe=function(k,U){return Ma(this,k)},T.prototype.intercept=function(k){return va(this,k)},T}(),Wo=I("ObservableMap",Dc),Fl={},za=function(){function T(k,U,ne){if(U===void 0&&(U=kt),ne===void 0&&(ne="ObservableSet@"+g()),this.name=ne,this[Rc]=Fl,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(me,He){return U(me,He,ne)},k&&this.replace(k)}return T.prototype.dehanceValue=function(k){return this.dehancer!==void 0?this.dehancer(k):k},T.prototype.clear=function(){var k=this;ci(function(){Ke(function(){var U,ne;try{for(var me=_e(k._data.values()),He=me.next();!He.done;He=me.next()){var mt=He.value;k.delete(mt)}}catch(Ht){U={error:Ht}}finally{try{He&&!He.done&&(ne=me.return)&&ne.call(me)}finally{if(U)throw U.error}}})})},T.prototype.forEach=function(k,U){var ne,me;try{for(var He=_e(this),mt=He.next();!mt.done;mt=He.next()){var Ht=mt.value;k.call(U,Ht,Ht,this)}}catch(_n){ne={error:_n}}finally{try{mt&&!mt.done&&(me=He.return)&&me.call(He)}finally{if(ne)throw ne.error}}},Object.defineProperty(T.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.add=function(k){var U=this;if(In(this._atom),Ki(this)&&!(me=Mr(this,{type:"add",object:this,newValue:k})))return this;if(!this.has(k)){ci(function(){U._data.add(U.enhancer(k,void 0)),U._atom.reportChanged()});var ne=$i(this),me=ne?{type:"add",object:this,newValue:k}:null;ne&&yi(this,me)}return this},T.prototype.delete=function(k){var U=this;if(Ki(this)&&!(me=Mr(this,{type:"delete",object:this,oldValue:k})))return!1;if(this.has(k)){var ne=$i(this),me=ne?{type:"delete",object:this,oldValue:k}:null;return ci(function(){U._atom.reportChanged(),U._data.delete(k)}),ne&&yi(this,me),!0}return!1},T.prototype.has=function(k){return this._atom.reportObserved(),this._data.has(this.dehanceValue(k))},T.prototype.entries=function(){var k=0,U=Array.from(this.keys()),ne=Array.from(this.values());return kr({next:function(){var me=k;return k+=1,me<ne.length?{value:[U[me],ne[me]],done:!1}:{done:!0}}})},T.prototype.keys=function(){return this.values()},T.prototype.values=function(){this._atom.reportObserved();var k=this,U=0,ne=Array.from(this._data.values());return kr({next:function(){return U<ne.length?{value:k.dehanceValue(ne[U++]),done:!1}:{done:!0}}})},T.prototype.replace=function(k){var U=this;return Qo(k)&&(k=k.toJS()),ci(function(){var ne=ir(!0);try{Array.isArray(k)||$(k)?(U.clear(),k.forEach(function(me){return U.add(me)})):k!=null&&b("Cannot initialize set from "+k)}finally{Qr(ne)}}),this},T.prototype.observe=function(k,U){return Ma(this,k)},T.prototype.intercept=function(k){return va(this,k)},T.prototype.toJS=function(){return new Set(this)},T.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},T.prototype[Rc=z,Symbol.iterator]=function(){return this.values()},T}(),Qo=I("ObservableSet",za),Cc=function(){function T(k,U,ne,me){U===void 0&&(U=new Map),this.target=k,this.values=U,this.name=ne,this.defaultEnhancer=me,this.keysAtom=new L(ne+".keys")}return T.prototype.read=function(k){return this.values.get(k).get()},T.prototype.write=function(k,U){var ne=this.target,me=this.values.get(k);if(me instanceof Va)me.set(U);else{if(Ki(this)){if(!(mt=Mr(this,{type:"update",object:this.proxy||ne,name:k,newValue:U})))return;U=mt.newValue}if((U=me.prepareNewValue(U))!==Pn.UNCHANGED){var He=$i(this),mt=He?{type:"update",object:this.proxy||ne,oldValue:me.value,name:k,newValue:U}:null;me.setNewValue(U),He&&yi(this,mt)}}},T.prototype.has=function(k){var U=this.pendingKeys||(this.pendingKeys=new Map),ne=U.get(k);if(ne)return ne.get();var me=!!this.values.get(k);return ne=new Rr(me,qt,this.name+"."+W(k)+"?",!1),U.set(k,ne),ne.get()},T.prototype.addObservableProp=function(k,U,ne){ne===void 0&&(ne=this.defaultEnhancer);var me=this.target;if(Ki(this)){var He=Mr(this,{object:this.proxy||me,name:k,type:"add",newValue:U});if(!He)return;U=He.newValue}var mt=new Rr(U,ne,this.name+"."+W(k),!1);this.values.set(k,mt),U=mt.value,Object.defineProperty(me,k,function(Ht){return ma[Ht]||(ma[Ht]={configurable:!0,enumerable:!0,get:function(){return this[z].read(Ht)},set:function(_n){this[z].write(Ht,_n)}})}(k)),this.notifyPropertyAddition(k,U)},T.prototype.addComputedProp=function(k,U,ne){var me,He,mt,Ht=this.target;ne.name=ne.name||this.name+"."+W(U),this.values.set(U,new Va(ne)),(k===Ht||(me=k,He=U,!(mt=Object.getOwnPropertyDescriptor(me,He))||mt.configurable!==!1&&mt.writable!==!1))&&Object.defineProperty(k,U,function(_n){return Ps[_n]||(Ps[_n]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Bi(this).read(_n)},set:function(yr){Bi(this).write(_n,yr)}})}(U))},T.prototype.remove=function(k){if(this.values.has(k)){var U=this.target;if(Ki(this)&&!(_n=Mr(this,{object:this.proxy||U,name:k,type:"remove"})))return;try{Yi();var ne=$i(this),me=!1,He=this.values.get(k),mt=He&&He.get();if(He&&He.set(void 0),this.keysAtom.reportChanged(),this.values.delete(k),this.pendingKeys){var Ht=this.pendingKeys.get(k);Ht&&Ht.set(!1)}delete this.target[k];var _n=ne?{type:"remove",object:this.proxy||U,oldValue:mt,name:k}:null;ne&&yi(this,_n)}finally{ta()}}},T.prototype.illegalAccess=function(k,U){},T.prototype.observe=function(k,U){return Ma(this,k)},T.prototype.intercept=function(k){return va(this,k)},T.prototype.notifyPropertyAddition=function(k,U){var ne=$i(this),me=ne?{type:"add",object:this.proxy||this.target,name:k,newValue:U}:null;if(ne&&yi(this,me),this.pendingKeys){var He=this.pendingKeys.get(k);He&&He.set(!0)}this.keysAtom.reportChanged()},T.prototype.getKeys=function(){var k,U;this.keysAtom.reportObserved();var ne=[];try{for(var me=_e(this.values),He=me.next();!He.done;He=me.next()){var mt=Oe(He.value,2),Ht=mt[0];mt[1]instanceof Rr&&ne.push(Ht)}}catch(_n){k={error:_n}}finally{try{He&&!He.done&&(U=me.return)&&U.call(me)}finally{if(k)throw k.error}}return ne},T}();function ra(T,k,U){if(k===void 0&&(k=""),U===void 0&&(U=kt),Object.prototype.hasOwnProperty.call(T,z))return T[z];A(T)||(k=(T.constructor.name||"ObservableObject")+"@"+g()),k||(k="ObservableObject@"+g());var ne=new Cc(T,new Map,W(k),U);return M(T,z,ne),ne}var ma=Object.create(null),Ps=Object.create(null);function Bi(T){var k=T[z];return k||(ze(T),T[z])}var Zi=I("ObservableObjectAdministration",Cc);function fi(T){return!!P(T)&&(ze(T),Zi(T[z]))}function oa(T,k){if(typeof T=="object"&&T!==null){if(ya(T))return k!==void 0&&b(!1),T[z].atom;if(Qo(T))return T[z];if(Wo(T)){var U=T;return k===void 0?U._keysAtom:((ne=U._data.get(k)||U._hasMap.get(k))||b(!1),ne)}var ne;if(ze(T),k&&!T[z]&&T[k],fi(T))return k?((ne=T[z].values.get(k))||b(!1),ne):b(!1);if(H(T)||dl(T)||zu(T))return T}else if(typeof T=="function"&&zu(T[z]))return T[z];return b(!1)}function Ri(T,k){return T||b("Expecting some object"),k!==void 0?Ri(oa(T,k)):H(T)||dl(T)||zu(T)||Wo(T)||Qo(T)?T:(ze(T),T[z]?T[z]:void b(!1))}var ut=Object.prototype.toString;function jt(T,k,U){return U===void 0&&(U=-1),$t(T,k,U)}function $t(T,k,U,ne,me){if(T===k)return T!==0||1/T==1/k;if(T==null||k==null)return!1;if(T!=T)return k!=k;var He=typeof T;if(He!=="function"&&He!=="object"&&typeof k!="object")return!1;var mt=ut.call(T);if(mt!==ut.call(k))return!1;switch(mt){case"[object RegExp]":case"[object String]":return""+T==""+k;case"[object Number]":return+T!=+T?+k!=+k:+T==0?1/+T==1/k:+T==+k;case"[object Date]":case"[object Boolean]":return+T==+k;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(T)===Symbol.valueOf.call(k);case"[object Map]":case"[object Set]":U>=0&&U++}T=fn(T),k=fn(k);var Ht=mt==="[object Array]";if(!Ht){if(typeof T!="object"||typeof k!="object")return!1;var _n=T.constructor,yr=k.constructor;if(_n!==yr&&!(typeof _n=="function"&&_n instanceof _n&&typeof yr=="function"&&yr instanceof yr)&&"constructor"in T&&"constructor"in k)return!1}if(U===0)return!1;U<0&&(U=-1),me=me||[];for(var ln=(ne=ne||[]).length;ln--;)if(ne[ln]===T)return me[ln]===k;if(ne.push(T),me.push(k),Ht){if((ln=T.length)!==k.length)return!1;for(;ln--;)if(!$t(T[ln],k[ln],U-1,ne,me))return!1}else{var Gr=Object.keys(T),pr=void 0;if(ln=Gr.length,Object.keys(k).length!==ln)return!1;for(;ln--;)if(!ur(k,pr=Gr[ln])||!$t(T[pr],k[pr],U-1,ne,me))return!1}return ne.pop(),me.pop(),!0}function fn(T){return ya(T)?T.slice():D(T)||Wo(T)||$(T)||Qo(T)?Array.from(T.entries()):T}function ur(T,k){return Object.prototype.hasOwnProperty.call(T,k)}function kr(T){return T[Symbol.iterator]=ho,T}function ho(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Oc,extras:{getDebugName:function(T,k){return(k!==void 0?oa(T,k):fi(T)||Wo(T)||Qo(T)?Ri(T):oa(T)).name}},$mobx:z})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),v=r(80),p=r(58),g=r(116),b="Array Iterator",_=p.set,E=p.getterFor(b);n.exports=g(Array,"Array",function(x,P){_(this,{type:b,target:s(x),index:0,kind:P})},function(){var x=E(this),P=x.target,A=x.kind,M=x.index++;return!P||M>=P.length?(x.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:M,done:!1}:A=="values"?{value:P[M],done:!1}:{value:[M,P[M]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),v=r(46),p=r(76),g=r(34),b=r(15),_=r(71),E=r(36),x=r(108),P=r(18),A=r(35),M=r(96),I=r(30),D=r(33),$=r(54),G=r(87),W=r(32),X=r(40),J=r(41),z=r(86),L=r(39),H=r(69),K=r(60),Y=r(77),ce=r(74),Ne=r(139),_e=r(112),Oe=r(50),ke=r(38),Re=r(84),ue=r(98),ve=r(42),Pe=r(89),Xe=r(93),ze=r(72),Je=r(90),_t=r(28),kt=r(140),qt=r(141),Fe=r(78),ge=r(58),Ae=r(79).forEach,yt=Xe("hidden"),zt="Symbol",St=_t("toPrimitive"),rn=ge.set,mn=ge.getterFor(zt),Mn=Object.prototype,hn=c.Symbol,ft=hn&&hn.prototype,xn=c.TypeError,Ve=c.QObject,gn=v("JSON","stringify"),Zn=Oe.f,re=ke.f,Bn=Ne.f,Sr=Re.f,Ur=b([].push),oo=Pe("symbols"),In=Pe("op-symbols"),jo=Pe("string-to-symbol-registry"),xe=Pe("symbol-to-string-registry"),Ke=Pe("wks"),Le=!Ve||!Ve.prototype||!Ve.prototype.findChild,at=E&&P(function(){return K(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a!=7})?function(Sn,Un,qn){var ir=Zn(Mn,Un);ir&&delete Mn[Un],re(Sn,Un,qn),ir&&Sn!==Mn&&re(Mn,Un,ir)}:re,en=function(Sn,Un){var qn=oo[Sn]=K(ft);return rn(qn,{type:zt,tag:Sn,description:Un}),E||(qn.description=Un),qn},Yt=function(Sn,Un,qn){Sn===Mn&&Yt(In,Un,qn),W(Sn);var ir=z(Un);return W(qn),A(oo,ir)?(qn.enumerable?(A(Sn,yt)&&Sn[yt][ir]&&(Sn[yt][ir]=!1),qn=K(qn,{enumerable:H(0,!1)})):(A(Sn,yt)||re(Sn,yt,H(1,{})),Sn[yt][ir]=!0),at(Sn,ir,qn)):re(Sn,ir,qn)},Nn=function(Sn,Un){W(Sn);var qn=J(Un),ir=Y(qn).concat(Go(qn));return Ae(ir,function(Qr){E&&!g(_r,qn,Qr)||Yt(Sn,Qr,qn[Qr])}),Sn},_r=function(Sn){var Un=z(Sn),qn=g(Sr,this,Un);return!(this===Mn&&A(oo,Un)&&!A(In,Un))&&(!(qn||!A(this,Un)||!A(oo,Un)||A(this,yt)&&this[yt][Un])||qn)},ui=function(Sn,Un){var qn=J(Sn),ir=z(Un);if(qn!==Mn||!A(oo,ir)||A(In,ir)){var Qr=Zn(qn,ir);return!Qr||!A(oo,ir)||A(qn,yt)&&qn[yt][ir]||(Qr.enumerable=!0),Qr}},wi=function(Sn){var Un=Bn(J(Sn)),qn=[];return Ae(Un,function(ir){A(oo,ir)||A(ze,ir)||Ur(qn,ir)}),qn},Go=function(Sn){var Un=Sn===Mn,qn=Bn(Un?In:J(Sn)),ir=[];return Ae(qn,function(Qr){!A(oo,Qr)||Un&&!A(Mn,Qr)||Ur(ir,oo[Qr])}),ir};if(x||(hn=function(){if($(ft,this))throw xn("Symbol is not a constructor");var Sn=arguments.length&&arguments[0]!==void 0?L(arguments[0]):void 0,Un=Je(Sn),qn=function(ir){this===Mn&&g(qn,In,ir),A(this,yt)&&A(this[yt],Un)&&(this[yt][Un]=!1),at(this,Un,H(1,ir))};return E&&Le&&at(Mn,Un,{configurable:!0,set:qn}),en(Un,Sn)},ve(ft=hn.prototype,"toString",function(){return mn(this).tag}),ve(hn,"withoutSetter",function(Sn){return en(Je(Sn),Sn)}),Re.f=_r,ke.f=Yt,Oe.f=ui,ce.f=Ne.f=wi,_e.f=Go,kt.f=function(Sn){return en(_t(Sn),Sn)},E&&(re(ft,"description",{configurable:!0,get:function(){return mn(this).description}}),_||ve(Mn,"propertyIsEnumerable",_r,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!x,sham:!x},{Symbol:hn}),Ae(Y(Ke),function(Sn){qt(Sn)}),s({target:zt,stat:!0,forced:!x},{for:function(Sn){var Un=L(Sn);if(A(jo,Un))return jo[Un];var qn=hn(Un);return jo[Un]=qn,xe[qn]=Un,qn},keyFor:function(Sn){if(!G(Sn))throw xn(Sn+" is not a symbol");if(A(xe,Sn))return xe[Sn]},useSetter:function(){Le=!0},useSimple:function(){Le=!1}}),s({target:"Object",stat:!0,forced:!x,sham:!E},{create:function(Sn,Un){return Un===void 0?K(Sn):Nn(K(Sn),Un)},defineProperty:Yt,defineProperties:Nn,getOwnPropertyDescriptor:ui}),s({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:wi,getOwnPropertySymbols:Go}),s({target:"Object",stat:!0,forced:P(function(){_e.f(1)})},{getOwnPropertySymbols:function(Sn){return _e.f(X(Sn))}}),gn&&s({target:"JSON",stat:!0,forced:!x||P(function(){var Sn=hn();return gn([Sn])!="[null]"||gn({a:Sn})!="{}"||gn(Object(Sn))!="{}"})},{stringify:function(Sn,Un,qn){var ir=ue(arguments),Qr=Un;if((D(Un)||Sn!==void 0)&&!G(Sn))return M(Un)||(Un=function(Rr,fl){if(I(Qr)&&(fl=g(Qr,this,Rr,fl)),!G(fl))return fl}),ir[1]=Un,p(gn,null,ir)}}),!ft[St]){var Jo=ft.valueOf;ve(ft,St,function(Sn){return g(Jo,this)})}Fe(hn,zt),ze[yt]=!0},function(n,o,r){var s=r(7),c=r(152),v=r(153),p=r(3),g=r(57),b=r(28),_=b("iterator"),E=b("toStringTag"),x=p.values,P=function(M,I){if(M){if(M[_]!==x)try{g(M,_,x)}catch{M[_]=x}if(M[E]||g(M,E,I),c[I]){for(var D in p)if(M[D]!==p[D])try{g(M,D,p[D])}catch{M[D]=p[D]}}}};for(var A in c)P(s[A]&&s[A].prototype,A);P(v,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),v=r(58),p=r(116),g="String Iterator",b=v.set,_=v.getterFor(g);p(String,"String",function(E){b(this,{type:g,string:c(E),index:0})},function(){var E,x=_(this),P=x.string,A=x.index;return A>=P.length?{value:void 0,done:!0}:(E=s(P,A),x.index+=E.length,{value:E,done:!1})})},function(n,o,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),v=r(7),p=r(15),g=r(35),b=r(30),_=r(54),E=r(39),x=r(38).f,P=r(134),A=v.Symbol,M=A&&A.prototype;if(c&&b(A)&&(!("description"in M)||A().description!==void 0)){var I={},D=function(){var L=arguments.length<1||arguments[0]===void 0?void 0:E(arguments[0]),H=_(M,this)?new A(L):L===void 0?A():A(L);return L===""&&(I[H]=!0),H};P(D,A),D.prototype=M,M.constructor=D;var $=String(A("test"))=="Symbol(test)",G=p(M.toString),W=p(M.valueOf),X=/^Symbol\((.*)\)[^)]+$/,J=p("".replace),z=p("".slice);x(M,"description",{configurable:!0,get:function(){var L=W(this),H=G(L);if(g(I,L))return"";var K=$?z(H,7,-1):J(H,X,"$1");return K===""?void 0:K}}),s({global:!0,forced:!0},{Symbol:D})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return p.a}),r.d(o,"c",function(){return p.e}),r.d(o,"h",function(){return X}),r.d(o,"i",function(){return $}),r.d(o,"j",function(){return I}),r.d(o,"b",function(){return Oe}),r.d(o,"e",function(){return ve}),r.d(o,"f",function(){return ke}),r.d(o,"g",function(){return oo});var s,c,v,p=r(0),g=0,b=[],_=p.i.__b,E=p.i.__r,x=p.i.diffed,P=p.i.__c,A=p.i.unmount;function M(xe,Ke){p.i.__h&&p.i.__h(c,xe,g||Ke),g=0;var Le=c.__H||(c.__H={__:[],__h:[]});return xe>=Le.__.length&&Le.__.push({}),Le.__[xe]}function I(xe){return g=1,D(ce,xe)}function D(xe,Ke,Le){var at=M(s++,2);return at.t=xe,at.__c||(at.__=[Le?Le(Ke):ce(void 0,Ke),function(en){var Yt=at.t(at.__[0],en);at.__[0]!==Yt&&(at.__=[Yt,at.__[1]],at.__c.setState({}))}],at.__c=c),at.__}function $(xe,Ke){var Le=M(s++,3);!p.i.__s&&Y(Le.__H,Ke)&&(Le.__=xe,Le.__H=Ke,c.__H.__h.push(Le))}function G(xe,Ke){var Le=M(s++,4);!p.i.__s&&Y(Le.__H,Ke)&&(Le.__=xe,Le.__H=Ke,c.__h.push(Le))}function W(xe,Ke){var Le=M(s++,7);return Y(Le.__H,Ke)&&(Le.__=xe(),Le.__H=Ke,Le.__h=xe),Le.__}function X(xe,Ke){return g=8,W(function(){return xe},Ke)}function J(){var xe;for(b.sort(function(Ke,Le){return Ke.__v.__b-Le.__v.__b});xe=b.pop();)if(xe.__P)try{xe.__H.__h.forEach(H),xe.__H.__h.forEach(K),xe.__H.__h=[]}catch(Ke){xe.__H.__h=[],p.i.__e(Ke,xe.__v)}}p.i.__b=function(xe){c=null,_&&_(xe)},p.i.__r=function(xe){E&&E(xe),s=0;var Ke=(c=xe.__c).__H;Ke&&(Ke.__h.forEach(H),Ke.__h.forEach(K),Ke.__h=[])},p.i.diffed=function(xe){x&&x(xe);var Ke=xe.__c;Ke&&Ke.__H&&Ke.__H.__h.length&&(b.push(Ke)!==1&&v===p.i.requestAnimationFrame||((v=p.i.requestAnimationFrame)||L)(J)),c=null},p.i.__c=function(xe,Ke){Ke.some(function(Le){try{Le.__h.forEach(H),Le.__h=Le.__h.filter(function(at){return!at.__||K(at)})}catch(at){Ke.some(function(en){en.__h&&(en.__h=[])}),Ke=[],p.i.__e(at,Le.__v)}}),P&&P(xe,Ke)},p.i.unmount=function(xe){A&&A(xe);var Ke,Le=xe.__c;Le&&Le.__H&&(Le.__H.__.forEach(function(at){try{H(at)}catch(en){Ke=en}}),Ke&&p.i.__e(Ke,Le.__v))};var z=typeof requestAnimationFrame=="function";function L(xe){var Ke,Le=function(){clearTimeout(at),z&&cancelAnimationFrame(Ke),setTimeout(xe)},at=setTimeout(Le,100);z&&(Ke=requestAnimationFrame(Le))}function H(xe){var Ke=c,Le=xe.__c;typeof Le=="function"&&(xe.__c=void 0,Le()),c=Ke}function K(xe){var Ke=c;xe.__c=xe.__(),c=Ke}function Y(xe,Ke){return!xe||xe.length!==Ke.length||Ke.some(function(Le,at){return Le!==xe[at]})}function ce(xe,Ke){return typeof Ke=="function"?Ke(xe):Ke}function Ne(xe,Ke){for(var Le in Ke)xe[Le]=Ke[Le];return xe}function _e(xe,Ke){for(var Le in xe)if(Le!=="__source"&&!(Le in Ke))return!0;for(var at in Ke)if(at!=="__source"&&xe[at]!==Ke[at])return!0;return!1}function Oe(xe){this.props=xe}function ke(xe,Ke){function Le(en){var Yt=this.props.ref,Nn=Yt==en.ref;return!Nn&&Yt&&(Yt.call?Yt(null):Yt.current=null),Ke?!Ke(this.props,en)||!Nn:_e(this.props,en)}function at(en){return this.shouldComponentUpdate=Le,Object(p.e)(xe,en)}return at.displayName="Memo("+(xe.displayName||xe.name)+")",at.prototype.isReactComponent=!0,at.__f=!0,at}(Oe.prototype=new p.a).isPureReactComponent=!0,Oe.prototype.shouldComponentUpdate=function(xe,Ke){return _e(this.props,xe)||_e(this.state,Ke)};var Re=p.i.__b;p.i.__b=function(xe){xe.type&&xe.type.__f&&xe.ref&&(xe.props.ref=xe.ref,xe.ref=null),Re&&Re(xe)};var ue=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ve(xe){function Ke(Le,at){var en=Ne({},Le);return delete en.ref,xe(en,!(at=Le.ref||at)||typeof at=="object"&&!("current"in at)?null:at)}return Ke.$$typeof=ue,Ke.render=Ke,Ke.prototype.isReactComponent=Ke.__f=!0,Ke.displayName="ForwardRef("+(xe.displayName||xe.name)+")",Ke}var Pe=function(xe,Ke){return xe==null?null:Object(p.k)(Object(p.k)(xe).map(Ke))},Xe={map:Pe,forEach:Pe,count:function(xe){return xe?Object(p.k)(xe).length:0},only:function(xe){var Ke=Object(p.k)(xe);if(Ke.length!==1)throw"Children.only";return Ke[0]},toArray:p.k},ze=p.i.__e;p.i.__e=function(xe,Ke,Le){if(xe.then){for(var at,en=Ke;en=en.__;)if((at=en.__c)&&at.__c)return Ke.__e==null&&(Ke.__e=Le.__e,Ke.__k=Le.__k),at.__c(xe,Ke)}ze(xe,Ke,Le)};var Je=p.i.unmount;function _t(xe,Ke,Le){return xe&&(xe.__c&&xe.__c.__H&&(xe.__c.__H.__.forEach(function(at){typeof at.__c=="function"&&at.__c()}),xe.__c.__H=null),(xe=Ne({},xe)).__c!=null&&(xe.__c.__P===Le&&(xe.__c.__P=Ke),xe.__c=null),xe.__k=xe.__k&&xe.__k.map(function(at){return _t(at,Ke,Le)})),xe}function kt(xe,Ke,Le){return xe&&(xe.__v=null,xe.__k=xe.__k&&xe.__k.map(function(at){return kt(at,Ke,Le)}),xe.__c&&xe.__c.__P===Ke&&(xe.__e&&Le.insertBefore(xe.__e,xe.__d),xe.__c.__e=!0,xe.__c.__P=Le)),xe}function qt(){this.__u=0,this.t=null,this.__b=null}function Fe(xe){var Ke=xe.__.__c;return Ke&&Ke.__e&&Ke.__e(xe)}function ge(){this.u=null,this.o=null}p.i.unmount=function(xe){var Ke=xe.__c;Ke&&Ke.__R&&Ke.__R(),Ke&&xe.__h===!0&&(xe.type=null),Je&&Je(xe)},(qt.prototype=new p.a).__c=function(xe,Ke){var Le=Ke.__c,at=this;at.t==null&&(at.t=[]),at.t.push(Le);var en=Fe(at.__v),Yt=!1,Nn=function(){Yt||(Yt=!0,Le.__R=null,en?en(_r):_r())};Le.__R=Nn;var _r=function(){if(!--at.__u){if(at.state.__e){var wi=at.state.__e;at.__v.__k[0]=kt(wi,wi.__c.__P,wi.__c.__O)}var Go;for(at.setState({__e:at.__b=null});Go=at.t.pop();)Go.forceUpdate()}},ui=Ke.__h===!0;at.__u++||ui||at.setState({__e:at.__b=at.__v.__k[0]}),xe.then(Nn,Nn)},qt.prototype.componentWillUnmount=function(){this.t=[]},qt.prototype.render=function(xe,Ke){if(this.__b){if(this.__v.__k){var Le=document.createElement("div"),at=this.__v.__k[0].__c;this.__v.__k[0]=_t(this.__b,Le,at.__O=at.__P)}this.__b=null}var en=Ke.__e&&Object(p.e)(p.b,null,xe.fallback);return en&&(en.__h=null),[Object(p.e)(p.b,null,Ke.__e?null:xe.children),en]};var Ae=function(xe,Ke,Le){if(++Le[1]===Le[0]&&xe.o.delete(Ke),xe.props.revealOrder&&(xe.props.revealOrder[0]!=="t"||!xe.o.size))for(Le=xe.u;Le;){for(;Le.length>3;)Le.pop()();if(Le[1]<Le[0])break;xe.u=Le=Le[2]}};function yt(xe){return this.getChildContext=function(){return xe.context},xe.children}function zt(xe){var Ke=this,Le=xe.i;Ke.componentWillUnmount=function(){Object(p.j)(null,Ke.l),Ke.l=null,Ke.i=null},Ke.i&&Ke.i!==Le&&Ke.componentWillUnmount(),xe.__v?(Ke.l||(Ke.i=Le,Ke.l={nodeType:1,parentNode:Le,childNodes:[],appendChild:function(at){this.childNodes.push(at),Ke.i.appendChild(at)},insertBefore:function(at,en){this.childNodes.push(at),Ke.i.appendChild(at)},removeChild:function(at){this.childNodes.splice(this.childNodes.indexOf(at)>>>1,1),Ke.i.removeChild(at)}}),Object(p.j)(Object(p.e)(yt,{context:Ke.context},xe.__v),Ke.l)):Ke.l&&Ke.componentWillUnmount()}(ge.prototype=new p.a).__e=function(xe){var Ke=this,Le=Fe(Ke.__v),at=Ke.o.get(xe);return at[0]++,function(en){var Yt=function(){Ke.props.revealOrder?(at.push(en),Ae(Ke,xe,at)):en()};Le?Le(Yt):Yt()}},ge.prototype.render=function(xe){this.u=null,this.o=new Map;var Ke=Object(p.k)(xe.children);xe.revealOrder&&xe.revealOrder[0]==="b"&&Ke.reverse();for(var Le=Ke.length;Le--;)this.o.set(Ke[Le],this.u=[1,0,this.u]);return xe.children},ge.prototype.componentDidUpdate=ge.prototype.componentDidMount=function(){var xe=this;this.o.forEach(function(Ke,Le){Ae(xe,Le,Ke)})};var St=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,mn=typeof document<"u",Mn=function(xe){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(xe)};p.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(xe){Object.defineProperty(p.a.prototype,xe,{configurable:!0,get:function(){return this["UNSAFE_"+xe]},set:function(Ke){Object.defineProperty(this,xe,{configurable:!0,writable:!0,value:Ke})}})});var hn=p.i.event;function ft(){}function xn(){return this.cancelBubble}function Ve(){return this.defaultPrevented}p.i.event=function(xe){return hn&&(xe=hn(xe)),xe.persist=ft,xe.isPropagationStopped=xn,xe.isDefaultPrevented=Ve,xe.nativeEvent=xe};var gn,Zn={configurable:!0,get:function(){return this.class}},re=p.i.vnode;p.i.vnode=function(xe){var Ke=xe.type,Le=xe.props,at=Le;if(typeof Ke=="string"){var en=Ke.indexOf("-")===-1;for(var Yt in at={},Le){var Nn=Le[Yt];mn&&Yt==="children"&&Ke==="noscript"||Yt==="value"&&"defaultValue"in Le&&Nn==null||(Yt==="defaultValue"&&"value"in Le&&Le.value==null?Yt="value":Yt==="download"&&Nn===!0?Nn="":/ondoubleclick/i.test(Yt)?Yt="ondblclick":/^onchange(textarea|input)/i.test(Yt+Ke)&&!Mn(Le.type)?Yt="oninput":/^onfocus$/i.test(Yt)?Yt="onfocusin":/^onblur$/i.test(Yt)?Yt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Yt)?Yt=Yt.toLowerCase():en&&rn.test(Yt)?Yt=Yt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Nn===null&&(Nn=void 0),at[Yt]=Nn)}Ke=="select"&&at.multiple&&Array.isArray(at.value)&&(at.value=Object(p.k)(Le.children).forEach(function(_r){_r.props.selected=at.value.indexOf(_r.props.value)!=-1})),Ke=="select"&&at.defaultValue!=null&&(at.value=Object(p.k)(Le.children).forEach(function(_r){_r.props.selected=at.multiple?at.defaultValue.indexOf(_r.props.value)!=-1:at.defaultValue==_r.props.value})),xe.props=at,Le.class!=Le.className&&(Zn.enumerable="className"in Le,Le.className!=null&&(at.class=Le.className),Object.defineProperty(at,"className",Zn))}xe.$$typeof=St,re&&re(xe)};var Bn=p.i.__r;p.i.__r=function(xe){Bn&&Bn(xe),gn=xe.__c};var Sr={ReactCurrentDispatcher:{current:{readContext:function(xe){return gn.__n[xe.__c].props.value}}}};function Ur(xe){return!!xe&&xe.$$typeof===St}var oo=function(xe,Ke){return xe(Ke)},In=p.b,jo={useState:I,useReducer:D,useEffect:$,useLayoutEffect:G,useRef:function(xe){return g=5,W(function(){return{current:xe}},[])},useImperativeHandle:function(xe,Ke,Le){g=6,G(function(){typeof xe=="function"?xe(Ke()):xe&&(xe.current=Ke())},Le==null?Le:Le.concat(xe))},useMemo:W,useCallback:X,useContext:function(xe){var Ke=c.context[xe.__c],Le=M(s++,9);return Le.c=xe,Ke?(Le.__==null&&(Le.__=!0,Ke.sub(c)),Ke.props.value):xe.__},useDebugValue:function(xe,Ke){p.i.useDebugValue&&p.i.useDebugValue(Ke?Ke(xe):xe)},version:"17.0.2",Children:Xe,render:function(xe,Ke,Le){return Ke.__k==null&&(Ke.textContent=""),Object(p.j)(xe,Ke),typeof Le=="function"&&Le(),xe?xe.__c:null},hydrate:function(xe,Ke,Le){return Object(p.h)(xe,Ke),typeof Le=="function"&&Le(),xe?xe.__c:null},unmountComponentAtNode:function(xe){return!!xe.__k&&(Object(p.j)(null,xe),!0)},createPortal:function(xe,Ke){return Object(p.e)(zt,{__v:xe,i:Ke})},createElement:p.e,createContext:p.d,createFactory:function(xe){return p.e.bind(null,xe)},cloneElement:function(xe){return Ur(xe)?p.c.apply(null,arguments):xe},createRef:p.f,Fragment:p.b,isValidElement:Ur,findDOMNode:function(xe){return xe&&(xe.base||xe.nodeType===1&&xe)||null},Component:p.a,PureComponent:Oe,memo:ke,forwardRef:ve,flushSync:function(xe,Ke){return xe(Ke)},unstable_batchedUpdates:oo,StrictMode:In,Suspense:qt,SuspenseList:ge,lazy:function(xe){var Ke,Le,at;function en(Yt){if(Ke||(Ke=xe()).then(function(Nn){Le=Nn.default||Nn},function(Nn){at=Nn}),at)throw at;if(!Le)throw Ke;return Object(p.e)(Le,Yt)}return en.displayName="Lazy",en.__f=!0,en},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Sr};o.d=jo},function(n,o,r){var s=r(7),c=r(152),v=r(153),p=r(187),g=r(57),b=function(E){if(E&&E.forEach!==p)try{g(E,"forEach",p)}catch{E.forEach=p}};for(var _ in c)c[_]&&b(s[_]&&s[_].prototype);b(v)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),v=r(40),p=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){p(1)}),sham:!g},{getPrototypeOf:function(b){return p(v(b))}})},function(n,o,r){var s=r(16),c=r(46),v=r(76),p=r(203),g=r(165),b=r(32),_=r(33),E=r(60),x=r(18),P=c("Reflect","construct"),A=Object.prototype,M=[].push,I=x(function(){function G(){}return!(P(function(){},[],G)instanceof G)}),D=!x(function(){P(function(){})}),$=I||D;s({target:"Reflect",stat:!0,forced:$,sham:$},{construct:function(G,W){g(G),b(W);var X=arguments.length<3?G:g(arguments[2]);if(D&&!I)return P(G,W,X);if(G==X){switch(W.length){case 0:return new G;case 1:return new G(W[0]);case 2:return new G(W[0],W[1]);case 3:return new G(W[0],W[1],W[2]);case 4:return new G(W[0],W[1],W[2],W[3])}var J=[null];return v(M,J,W),new(v(p,G,J))}var z=X.prototype,L=E(_(z)?z:A),H=v(G,L,W);return _(H)?H:L}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(p){return p&&v(c,p)}:function(p){return p&&function(){return c.apply(p,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,v=r(57),p=r(42),g=r(110),b=r(134),_=r(95);n.exports=function(E,x){var P,A,M,I,D,$=E.target,G=E.global,W=E.stat;if(P=G?s:W?s[$]||g($,{}):(s[$]||{}).prototype)for(A in x){if(I=x[A],M=E.noTargetGet?(D=c(P,A))&&D.value:P[A],!_(G?A:$+(W?".":"#")+A,E.forced)&&M!==void 0){if(typeof I==typeof M)continue;b(I,M)}(E.sham||M&&M.sham)&&v(I,"sham",!0),p(P,A,I,E)}}},function(n,o,r){var s=r(16),c=r(7),v=r(96),p=r(99),g=r(33),b=r(75),_=r(45),E=r(41),x=r(63),P=r(28),A=r(81),M=r(98),I=A("slice"),D=P("species"),$=c.Array,G=Math.max;s({target:"Array",proto:!0,forced:!I},{slice:function(W,X){var J,z,L,H=E(this),K=_(H),Y=b(W,K),ce=b(X===void 0?K:X,K);if(v(H)&&(J=H.constructor,(p(J)&&(J===$||v(J.prototype))||g(J)&&(J=J[D])===null)&&(J=void 0),J===$||J===void 0))return M(H,Y,ce);for(z=new(J===void 0?$:J)(G(ce-Y,0)),L=0;Y<ce;Y++,L++)Y in H&&x(z,L,H[Y]);return z.length=L,z}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(p){return v(c(p))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,v=r(15),p=r(38).f,g=Function.prototype,b=v(g.toString),_=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,E=v(_.exec);s&&!c&&p(g,"name",{configurable:!0,get:function(){try{return E(_,b(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),v=r(41),p=r(50).f,g=r(36),b=c(function(){p(1)});s({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(_,E){return p(v(_),E)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),v=r(135),p=r(41),g=r(50),b=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(_){for(var E,x,P=p(_),A=g.f,M=v(P),I={},D=0;M.length>D;)(x=A(P,E=M[D++]))!==void 0&&b(I,E,x);return I}})},,function(n,o,r){var s=r(16),c=r(7),v=r(18),p=r(96),g=r(33),b=r(40),_=r(45),E=r(63),x=r(115),P=r(81),A=r(28),M=r(70),I=A("isConcatSpreadable"),D=9007199254740991,$="Maximum allowed index exceeded",G=c.TypeError,W=M>=51||!v(function(){var z=[];return z[I]=!1,z.concat()[0]!==z}),X=P("concat"),J=function(z){if(!g(z))return!1;var L=z[I];return L!==void 0?!!L:p(z)};s({target:"Array",proto:!0,forced:!W||!X},{concat:function(z){var L,H,K,Y,ce,Ne=b(this),_e=x(Ne,0),Oe=0;for(L=-1,K=arguments.length;L<K;L++)if(J(ce=L===-1?Ne:arguments[L])){if(Oe+(Y=_(ce))>D)throw G($);for(H=0;H<Y;H++,Oe++)H in ce&&E(_e,Oe,ce[H])}else{if(Oe>=D)throw G($);E(_e,Oe++,ce)}return _e.length=Oe,_e}})},function(n,o,r){var s=r(7),c=r(89),v=r(35),p=r(90),g=r(108),b=r(132),_=c("wks"),E=s.Symbol,x=E&&E.for,P=b?E:E&&E.withoutSetter||p;n.exports=function(A){if(!v(_,A)||!g&&typeof _[A]!="string"){var M="Symbol."+A;g&&v(E,A)?_[A]=E[A]:_[A]=b&&x?x(M):P(M)}return _[A]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();o.a=v},function(n,o,r){var s=r(7),c=r(33),v=s.String,p=s.TypeError;n.exports=function(g){if(c(g))return g;throw p(v(g)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(p,g){return v(c(p),g)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),v=r(133),p=r(32),g=r(86),b=s.TypeError,_=Object.defineProperty;o.f=c?_:function(E,x,P){if(p(E),x=g(x),p(P),v)try{return _(E,x,P)}catch{}if("get"in P||"set"in P)throw b("Accessors not supported");return"value"in P&&(E[x]=P.value),E}},function(n,o,r){var s=r(7),c=r(97),v=s.String;n.exports=function(p){if(c(p)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(p)}},function(n,o,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(p){return v(c(p))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,o,r){var s=r(7),c=r(30),v=r(35),p=r(57),g=r(110),b=r(92),_=r(58),E=r(73).CONFIGURABLE,x=_.get,P=_.enforce,A=String(String).split("String");(n.exports=function(M,I,D,$){var G,W=!!$&&!!$.unsafe,X=!!$&&!!$.enumerable,J=!!$&&!!$.noTargetGet,z=$&&$.name!==void 0?$.name:I;c(D)&&(String(z).slice(0,7)==="Symbol("&&(z="["+String(z).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(D,"name")||E&&D.name!==z)&&p(D,"name",z),(G=P(D)).source||(G.source=A.join(typeof z=="string"?z:""))),M!==s?(W?!J&&M[I]&&(X=!0):delete M[I],X?M[I]=D:p(M,I,D)):X?M[I]=D:g(I,D)})(Function.prototype,"toString",function(){return c(this)&&x(this).source||b(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return p}),r.d(o,"c",function(){return g}),r.d(o,"b",function(){return b}),r.d(o,"a",function(){return E});var c=r(10),v=function(x,P){var A=typeof Symbol=="function"&&x[Symbol.iterator];if(!A)return x;var M,I,D=A.call(x),$=[];try{for(;(P===void 0||P-- >0)&&!(M=D.next()).done;)$.push(M.value)}catch(G){I={error:G}}finally{try{M&&!M.done&&(A=D.return)&&A.call(D)}finally{if(I)throw I.error}}return $};function p(){var x=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){x(function(P){return P+1})},[])}function g(x){if(!x||typeof x!="object")return!1;var P=Object.getPrototypeOf(x);return!P||P===Object.prototype}function b(x){return typeof Symbol=="function"?Symbol.for(x):"__$mobx-react "+x+"__"}var _={};function E(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:_}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),v=function(p){return c(p)?p:void 0};n.exports=function(p,g){return arguments.length<2?v(s[p]):s[p]&&s[p][g]}},function(n,o,r){var s=r(16),c=r(34),v=r(33),p=r(32),g=r(204),b=r(50),_=r(101);s({target:"Reflect",stat:!0},{get:function E(x,P){var A,M,I=arguments.length<3?x:arguments[2];return p(x)===I?x[P]:(A=b.f(x,P))?g(A)?A.value:A.get===void 0?void 0:c(A.get,I):v(M=_(x))?E(M,P,I):void 0}})},function(n,o,r){(function(s){var c=r(31),v=r(171),p=t&&!t.nodeType&&t,g=p&&typeof s=="object"&&s&&!s.nodeType&&s,b=g&&g.exports===p?c.a.Buffer:void 0,_=(b?b.isBuffer:void 0)||v.a;o.a=_}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,p=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=p&&p.exports===v&&c.a.process,b=function(){try{var _=p&&p.require&&p.require("util").types;return _||g&&g.binding&&g.binding("util")}catch{}}();o.a=b}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),v=r(84),p=r(69),g=r(41),b=r(86),_=r(35),E=r(133),x=Object.getOwnPropertyDescriptor;o.f=s?x:function(P,A){if(P=g(P),A=b(A),E)try{return x(P,A)}catch{}if(_(P,A))return p(!c(v.f,P,A),P[A])}},function(n,o,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(p){return v(c(p),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),v=r(88),p=s.TypeError;n.exports=function(g){if(c(g))return g;throw p(v(g)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(p,g,b){return c.f(p,g,v(1,b))}:function(p,g,b){return p[g]=b,p}},function(n,o,r){var s,c,v,p=r(175),g=r(7),b=r(15),_=r(33),E=r(57),x=r(35),P=r(109),A=r(93),M=r(72),I="Object already initialized",D=g.TypeError,$=g.WeakMap;if(p||P.state){var G=P.state||(P.state=new $),W=b(G.get),X=b(G.has),J=b(G.set);s=function(L,H){if(X(G,L))throw new D(I);return H.facade=L,J(G,L,H),H},c=function(L){return W(G,L)||{}},v=function(L){return X(G,L)}}else{var z=A("state");M[z]=!0,s=function(L,H){if(x(L,z))throw new D(I);return H.facade=L,E(L,z,H),H},c=function(L){return x(L,z)?L[z]:{}},v=function(L){return x(L,z)}}n.exports={set:s,get:c,has:v,enforce:function(L){return v(L)?c(L):s(L,{})},getterFor:function(L){return function(H){var K;if(!_(H)||(K=c(H)).type!==L)throw D("Incompatible receiver, "+L+" required");return K}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,o,r){var s,c=r(32),v=r(176),p=r(111),g=r(72),b=r(138),_=r(91),E=r(93),x=E("IE_PROTO"),P=function(){},A=function(D){return"<script>"+D+"<\/script>"},M=function(D){D.write(A("")),D.close();var $=D.parentWindow.Object;return D=null,$},I=function(){try{s=new ActiveXObject("htmlfile")}catch{}var D,$;I=typeof document<"u"?document.domain&&s?M(s):(($=_("iframe")).style.display="none",b.appendChild($),$.src="javascript:",(D=$.contentWindow.document).open(),D.write(A("document.F=Object")),D.close(),D.F):M(s);for(var G=p.length;G--;)delete I.prototype[p[G]];return I()};g[x]=!0,n.exports=Object.create||function(D,$){var G;return D!==null?(P.prototype=c(D),G=new P,P.prototype=null,G[x]=D):G=I(),$===void 0?G:v(G,$)}},function(n,o,r){var s=r(36),c=r(7),v=r(15),p=r(95),g=r(42),b=r(35),_=r(148),E=r(54),x=r(87),P=r(131),A=r(18),M=r(74).f,I=r(50).f,D=r(38).f,$=r(160),G=r(161).trim,W="Number",X=c.Number,J=X.prototype,z=c.TypeError,L=v("".slice),H=v("".charCodeAt),K=function(ke){var Re=P(ke,"number");return typeof Re=="bigint"?Re:Y(Re)},Y=function(ke){var Re,ue,ve,Pe,Xe,ze,Je,_t,kt=P(ke,"number");if(x(kt))throw z("Cannot convert a Symbol value to a number");if(typeof kt=="string"&&kt.length>2){if(kt=G(kt),(Re=H(kt,0))===43||Re===45){if((ue=H(kt,2))===88||ue===120)return NaN}else if(Re===48){switch(H(kt,1)){case 66:case 98:ve=2,Pe=49;break;case 79:case 111:ve=8,Pe=55;break;default:return+kt}for(ze=(Xe=L(kt,2)).length,Je=0;Je<ze;Je++)if((_t=H(Xe,Je))<48||_t>Pe)return NaN;return parseInt(Xe,ve)}}return+kt};if(p(W,!X(" 0o1")||!X("0b1")||X("+0x1"))){for(var ce,Ne=function(ke){var Re=arguments.length<1?0:X(K(ke)),ue=this;return E(J,ue)&&A(function(){$(ue)})?_(Object(Re),ue,Ne):Re},_e=s?M(X):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Oe=0;_e.length>Oe;Oe++)b(X,ce=_e[Oe])&&!b(Ne,ce)&&D(Ne,ce,I(X,ce));Ne.prototype=J,J.constructor=Ne,g(c,W,Ne)}},function(n,o,r){var s=r(56);n.exports=function(c,v){var p=c[v];return p==null?void 0:s(p)}},function(n,o,r){var s=r(86),c=r(38),v=r(69);n.exports=function(p,g,b){var _=s(g);_ in p?c.f(p,_,v(0,b)):p[_]=b}},function(n,o,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(p,g){return c(p),g===void 0?p:v?v(p,g):function(){return p.apply(g,arguments)}}},function(n,o,r){var s=r(16),c=r(15),v=r(85),p=r(41),g=r(121),b=c([].join),_=v!=Object,E=g("join",",");s({target:"Array",proto:!0,forced:_||!E},{join:function(x){return b(p(this),x===void 0?",":x)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,v=r(42),p=r(32),g=r(54),b=r(39),_=r(18),E=r(154),x="toString",P=RegExp.prototype,A=P.toString,M=s(E),I=_(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),D=c&&A.name!=x;(I||D)&&v(RegExp.prototype,x,function(){var $=p(this),G=b($.source),W=$.flags;return"/"+G+"/"+b(W===void 0&&g(P,$)&&!("flags"in P)?M($):W)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,v=r(7),p=r(55),g=v.process,b=v.Deno,_=g&&g.versions||b&&b.version,E=_&&_.v8;E&&(c=(s=E.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&p&&(!(s=p.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=p.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),v=Function.prototype,p=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),b=g&&(function(){}).name==="something",_=g&&(!s||s&&p(v,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:_}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,o,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(p,g){var b=s(p);return b<0?c(b+g,0):v(b,g)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,o,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(p,g,b){p&&!c(p=b?p:p.prototype,v)&&s(p,v,{configurable:!0,value:g})}},function(n,o,r){var s=r(64),c=r(15),v=r(85),p=r(40),g=r(45),b=r(115),_=c([].push),E=function(x){var P=x==1,A=x==2,M=x==3,I=x==4,D=x==6,$=x==7,G=x==5||D;return function(W,X,J,z){for(var L,H,K=p(W),Y=v(K),ce=s(X,J),Ne=g(Y),_e=0,Oe=z||b,ke=P?Oe(W,Ne):A||$?Oe(W,0):void 0;Ne>_e;_e++)if((G||_e in Y)&&(H=ce(L=Y[_e],_e,K),x))if(P)ke[_e]=H;else if(H)switch(x){case 3:return!0;case 5:return L;case 6:return _e;case 2:_(ke,L)}else switch(x){case 4:return!1;case 7:_(ke,L)}return D?-1:M||I?I:ke}};n.exports={forEach:E(0),map:E(1),filter:E(2),some:E(3),every:E(4),find:E(5),findIndex:E(6),filterReject:E(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),v=r(70),p=c("species");n.exports=function(g){return v>=51||!s(function(){var b=[];return(b.constructor={})[p]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),v=r(15),p=r(123),g=r(159),b=r(32),_=r(44),E=r(164),x=r(124),P=r(94),A=r(39),M=r(62),I=r(114),D=r(125),$=r(103),G=r(155),W=r(18),X=G.UNSUPPORTED_Y,J=4294967295,z=Math.min,L=[].push,H=v(/./.exec),K=v(L),Y=v("".slice),ce=!W(function(){var Ne=/(?:)/,_e=Ne.exec;Ne.exec=function(){return _e.apply(this,arguments)};var Oe="ab".split(Ne);return Oe.length!==2||Oe[0]!=="a"||Oe[1]!=="b"});p("split",function(Ne,_e,Oe){var ke;return ke="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Re,ue){var ve=A(_(this)),Pe=ue===void 0?J:ue>>>0;if(Pe===0)return[];if(Re===void 0)return[ve];if(!g(Re))return c(_e,ve,Re,Pe);for(var Xe,ze,Je,_t=[],kt=(Re.ignoreCase?"i":"")+(Re.multiline?"m":"")+(Re.unicode?"u":"")+(Re.sticky?"y":""),qt=0,Fe=new RegExp(Re.source,kt+"g");(Xe=c($,Fe,ve))&&!((ze=Fe.lastIndex)>qt&&(K(_t,Y(ve,qt,Xe.index)),Xe.length>1&&Xe.index<ve.length&&s(L,_t,I(Xe,1)),Je=Xe[0].length,qt=ze,_t.length>=Pe));)Fe.lastIndex===Xe.index&&Fe.lastIndex++;return qt===ve.length?!Je&&H(Fe,"")||K(_t,""):K(_t,Y(ve,qt)),_t.length>Pe?I(_t,0,Pe):_t}:"0".split(void 0,0).length?function(Re,ue){return Re===void 0&&ue===0?[]:c(_e,this,Re,ue)}:_e,[function(Re,ue){var ve=_(this),Pe=Re==null?void 0:M(Re,Ne);return Pe?c(Pe,Re,ve,ue):c(ke,A(ve),Re,ue)},function(Re,ue){var ve=b(this),Pe=A(Re),Xe=Oe(ke,ve,Pe,ue,ke!==_e);if(Xe.done)return Xe.value;var ze=E(ve,RegExp),Je=ve.unicode,_t=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(X?"g":"y"),kt=new ze(X?"^(?:"+ve.source+")":ve,_t),qt=ue===void 0?J:ue>>>0;if(qt===0)return[];if(Pe.length===0)return D(kt,Pe)===null?[Pe]:[];for(var Fe=0,ge=0,Ae=[];ge<Pe.length;){kt.lastIndex=X?0:ge;var yt,zt=D(kt,X?Y(Pe,ge):Pe);if(zt===null||(yt=z(P(kt.lastIndex+(X?ge:0)),Pe.length))===Fe)ge=x(Pe,ge,Je);else{if(K(Ae,Y(Pe,Fe,ge)),Ae.length===qt)return Ae;for(var St=1;St<=zt.length-1;St++)if(K(Ae,zt[St]),Ae.length===qt)return Ae;ge=Fe=yt}}return K(Ae,Y(Pe,Fe)),Ae}]},!ce,X)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);o.f=v?function(p){var g=c(this,p);return!!g&&g.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),v=r(18),p=r(51),g=s.Object,b=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(_){return p(_)=="String"?b(_,""):g(_)}:g},function(n,o,r){var s=r(131),c=r(87);n.exports=function(v){var p=s(v,"string");return c(p)?p:p+""}},function(n,o,r){var s=r(7),c=r(46),v=r(30),p=r(54),g=r(132),b=s.Object;n.exports=g?function(_){return typeof _=="symbol"}:function(_){var E=c("Symbol");return v(E)&&p(E.prototype,b(_))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(v,p){return c[v]||(c[v]=p!==void 0?p:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,v=Math.random(),p=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+p(++c+v,36)}},function(n,o,r){var s=r(7),c=r(33),v=s.document,p=c(v)&&c(v.createElement);n.exports=function(g){return p?v.createElement(g):{}}},function(n,o,r){var s=r(15),c=r(30),v=r(109),p=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return p(g)}),n.exports=v.inspectSource},function(n,o,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(p){return v[p]||(v[p]=c(p))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),v=/#|\.prototype\./,p=function(x,P){var A=b[g(x)];return A==E||A!=_&&(c(P)?s(P):!!P)},g=p.normalize=function(x){return String(x).replace(v,".").toLowerCase()},b=p.data={},_=p.NATIVE="N",E=p.POLYFILL="P";n.exports=p},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),v=r(30),p=r(51),g=r(28)("toStringTag"),b=s.Object,_=p(function(){return arguments}())=="Arguments";n.exports=c?p:function(E){var x,P,A;return E===void 0?"Undefined":E===null?"Null":typeof(P=function(M,I){try{return M[I]}catch{}}(x=b(E),g))=="string"?P:_?p(x):(A=p(x))=="Object"&&v(x.callee)?"Arguments":A}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),v=r(30),p=r(97),g=r(46),b=r(92),_=function(){},E=[],x=g("Reflect","construct"),P=/^\s*(?:class|function)\b/,A=s(P.exec),M=!P.exec(_),I=function(D){if(!v(D))return!1;try{return x(_,E,D),!0}catch{return!1}};n.exports=!x||c(function(){var D;return I(I.call)||!I(Object)||!I(function(){D=!0})||D})?function(D){if(!v(D))return!1;switch(p(D)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return M||!!A(P,b(D))}:I},function(n,o,r){var s=r(28),c=r(60),v=r(38),p=s("unscopables"),g=Array.prototype;g[p]==null&&v.f(g,p,{configurable:!0,value:c(null)}),n.exports=function(b){g[p][b]=!0}},function(n,o,r){var s=r(7),c=r(35),v=r(30),p=r(40),g=r(93),b=r(143),_=g("IE_PROTO"),E=s.Object,x=E.prototype;n.exports=b?E.getPrototypeOf:function(P){var A=p(P);if(c(A,_))return A[_];var M=A.constructor;return v(M)&&A instanceof M?M.prototype:A instanceof E?x:null}},function(n,o,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var p,g=!1,b={};try{(p=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(_,E){return c(_),v(E),g?p(_,E):_.__proto__=E,_}}():void 0)},function(n,o,r){var s,c,v=r(34),p=r(15),g=r(39),b=r(154),_=r(155),E=r(89),x=r(60),P=r(58).get,A=r(190),M=r(191),I=E("native-string-replace",String.prototype.replace),D=RegExp.prototype.exec,$=D,G=p("".charAt),W=p("".indexOf),X=p("".replace),J=p("".slice),z=(c=/b*/g,v(D,s=/a/,"a"),v(D,c,"a"),s.lastIndex!==0||c.lastIndex!==0),L=_.BROKEN_CARET,H=/()??/.exec("")[1]!==void 0;(z||H||L||A||M)&&($=function(K){var Y,ce,Ne,_e,Oe,ke,Re,ue=this,ve=P(ue),Pe=g(K),Xe=ve.raw;if(Xe)return Xe.lastIndex=ue.lastIndex,Y=v($,Xe,Pe),ue.lastIndex=Xe.lastIndex,Y;var ze=ve.groups,Je=L&&ue.sticky,_t=v(b,ue),kt=ue.source,qt=0,Fe=Pe;if(Je&&(_t=X(_t,"y",""),W(_t,"g")===-1&&(_t+="g"),Fe=J(Pe,ue.lastIndex),ue.lastIndex>0&&(!ue.multiline||ue.multiline&&G(Pe,ue.lastIndex-1)!==`
`)&&(kt="(?: "+kt+")",Fe=" "+Fe,qt++),ce=new RegExp("^(?:"+kt+")",_t)),H&&(ce=new RegExp("^"+kt+"$(?!\\s)",_t)),z&&(Ne=ue.lastIndex),_e=v(D,Je?ce:ue,Fe),Je?_e?(_e.input=J(_e.input,qt),_e[0]=J(_e[0],qt),_e.index=ue.lastIndex,ue.lastIndex+=_e[0].length):ue.lastIndex=0:z&&_e&&(ue.lastIndex=ue.global?_e.index+_e[0].length:Ne),H&&_e&&_e.length>1&&v(I,_e[0],ce,function(){for(Oe=1;Oe<arguments.length-2;Oe++)arguments[Oe]===void 0&&(_e[Oe]=void 0)}),_e&&ze)for(_e.groups=ke=x(null),Oe=0;Oe<ze.length;Oe++)ke[(Re=ze[Oe])[0]]=_e[Re[1]];return _e}),n.exports=$},function(n,o,r){var s=r(16),c=r(7),v=r(75),p=r(59),g=r(45),b=r(40),_=r(115),E=r(63),x=r(81)("splice"),P=c.TypeError,A=Math.max,M=Math.min,I=9007199254740991,D="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!x},{splice:function($,G){var W,X,J,z,L,H,K=b(this),Y=g(K),ce=v($,Y),Ne=arguments.length;if(Ne===0?W=X=0:Ne===1?(W=0,X=Y-ce):(W=Ne-2,X=M(A(p(G),0),Y-ce)),Y+W-X>I)throw P(D);for(J=_(K,X),z=0;z<X;z++)(L=ce+z)in K&&E(J,z,K[L]);if(J.length=X,W<X){for(z=ce;z<Y-X;z++)H=z+W,(L=z+X)in K?K[H]=K[L]:delete K[H];for(z=Y;z>Y-X+W;z--)delete K[z-1]}else if(W>X)for(z=Y-X;z>ce;z--)H=z+W-1,(L=z+X-1)in K?K[H]=K[L]:delete K[H];for(z=0;z<W;z++)K[z+ce]=arguments[z+2];return K.length=Y-X+W,J}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,p=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=p&&p.exports===v?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;o.a=function(_,E){if(E)return _.slice();var x=_.length,P=b?b(x):new _.constructor(x);return _.copy(P),P}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),v="__core-js_shared__",p=s[v]||c(v,{});n.exports=p},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,p){try{c(s,v,{value:p,configurable:!0,writable:!0})}catch{s[v]=p}return p}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),v=r(45),p=r(63),g=s.Array,b=Math.max;n.exports=function(_,E,x){for(var P=v(_),A=c(E,P),M=c(x===void 0?P:x,P),I=g(b(M-A,0)),D=0;A<M;A++,D++)p(I,D,_[A]);return I.length=D,I}},function(n,o,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,o,r){var s=r(16),c=r(34),v=r(71),p=r(73),g=r(30),b=r(180),_=r(101),E=r(102),x=r(78),P=r(57),A=r(42),M=r(28),I=r(80),D=r(142),$=p.PROPER,G=p.CONFIGURABLE,W=D.IteratorPrototype,X=D.BUGGY_SAFARI_ITERATORS,J=M("iterator"),z="keys",L="values",H="entries",K=function(){return this};n.exports=function(Y,ce,Ne,_e,Oe,ke,Re){b(Ne,ce,_e);var ue,ve,Pe,Xe=function(ge){if(ge===Oe&&qt)return qt;if(!X&&ge in _t)return _t[ge];switch(ge){case z:case L:case H:return function(){return new Ne(this,ge)}}return function(){return new Ne(this)}},ze=ce+" Iterator",Je=!1,_t=Y.prototype,kt=_t[J]||_t["@@iterator"]||Oe&&_t[Oe],qt=!X&&kt||Xe(Oe),Fe=ce=="Array"&&_t.entries||kt;if(Fe&&(ue=_(Fe.call(new Y)))!==Object.prototype&&ue.next&&(v||_(ue)===W||(E?E(ue,W):g(ue[J])||A(ue,J,K)),x(ue,ze,!0,!0),v&&(I[ze]=K)),$&&Oe==L&&kt&&kt.name!==L&&(!v&&G?P(_t,"name",L):(Je=!0,qt=function(){return c(kt,this)})),Oe)if(ve={values:Xe(L),keys:ke?qt:Xe(z),entries:Xe(H)},Re)for(Pe in ve)(X||Je||!(Pe in _t))&&A(_t,Pe,ve[Pe]);else s({target:ce,proto:!0,forced:X||Je},ve);return v&&!Re||_t[J]===qt||A(_t,J,qt,{name:Oe}),I[ce]=qt,ve}},function(n,o,r){var s=r(7),c=r(64),v=r(34),p=r(32),g=r(88),b=r(145),_=r(45),E=r(54),x=r(146),P=r(118),A=r(147),M=s.TypeError,I=function($,G){this.stopped=$,this.result=G},D=I.prototype;n.exports=function($,G,W){var X,J,z,L,H,K,Y,ce=W&&W.that,Ne=!(!W||!W.AS_ENTRIES),_e=!(!W||!W.IS_ITERATOR),Oe=!(!W||!W.INTERRUPTED),ke=c(G,ce),Re=function(ve){return X&&A(X,"normal",ve),new I(!0,ve)},ue=function(ve){return Ne?(p(ve),Oe?ke(ve[0],ve[1],Re):ke(ve[0],ve[1])):Oe?ke(ve,Re):ke(ve)};if(_e)X=$;else{if(!(J=P($)))throw M(g($)+" is not iterable");if(b(J)){for(z=0,L=_($);L>z;z++)if((H=ue($[z]))&&E(D,H))return H;return new I(!1)}X=x($,J)}for(K=X.next;!(Y=v(K,X)).done;){try{H=ue(Y.value)}catch(ve){A(X,"throw",ve)}if(typeof H=="object"&&H&&E(D,H))return H}return new I(!1)}},function(n,o,r){var s=r(97),c=r(62),v=r(80),p=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,p)||c(g,"@@iterator")||v[s(g)]}},function(n,o,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(p,g){if(c(g,p))return p;throw v("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var v=0,p={next:function(){return{done:!!v++}},return:function(){c=!0}};p[s]=function(){return this},Array.from(p,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var _=!1;try{var E={};E[s]=function(){return{next:function(){return{done:_=!0}}}},g(E)}catch{}return _}},function(n,o,r){var s=r(18);n.exports=function(c,v){var p=[][c];return!!p&&s(function(){p.call(null,v||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),v=r(103),p=r(18),g=r(28),b=r(57),_=g("species"),E=RegExp.prototype;n.exports=function(x,P,A,M){var I=g(x),D=!p(function(){var X={};return X[I]=function(){return 7},""[x](X)!=7}),$=D&&!p(function(){var X=!1,J=/a/;return x==="split"&&((J={}).constructor={},J.constructor[_]=function(){return J},J.flags="",J[I]=/./[I]),J.exec=function(){return X=!0,null},J[I](""),!X});if(!D||!$||A){var G=s(/./[I]),W=P(I,""[x],function(X,J,z,L,H){var K=s(X),Y=J.exec;return Y===v||Y===E.exec?D&&!H?{done:!0,value:G(J,z,L)}:{done:!0,value:K(z,J,L)}:{done:!1}});c(String.prototype,x,W[0]),c(E,I,W[1])}M&&b(E[I],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,v,p){return v+(p?s(c,v).length:1)}},function(n,o,r){var s=r(7),c=r(34),v=r(32),p=r(30),g=r(51),b=r(103),_=s.TypeError;n.exports=function(E,x){var P=E.exec;if(p(P)){var A=c(P,E,x);return A!==null&&v(A),A}if(g(E)==="RegExp")return c(b,E,x);throw _("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),v=r(15),p=r(123),g=r(18),b=r(32),_=r(30),E=r(59),x=r(94),P=r(39),A=r(44),M=r(124),I=r(62),D=r(201),$=r(125),G=r(28)("replace"),W=Math.max,X=Math.min,J=v([].concat),z=v([].push),L=v("".indexOf),H=v("".slice),K="a".replace(/./,"$0")==="$0",Y=!!/./[G]&&/./[G]("a","$0")==="";p("replace",function(ce,Ne,_e){var Oe=Y?"$":"$0";return[function(ke,Re){var ue=A(this),ve=ke==null?void 0:I(ke,G);return ve?c(ve,ke,ue,Re):c(Ne,P(ue),ke,Re)},function(ke,Re){var ue=b(this),ve=P(ke);if(typeof Re=="string"&&L(Re,Oe)===-1&&L(Re,"$<")===-1){var Pe=_e(Ne,ue,ve,Re);if(Pe.done)return Pe.value}var Xe=_(Re);Xe||(Re=P(Re));var ze=ue.global;if(ze){var Je=ue.unicode;ue.lastIndex=0}for(var _t=[];;){var kt=$(ue,ve);if(kt===null||(z(_t,kt),!ze))break;P(kt[0])===""&&(ue.lastIndex=M(ve,x(ue.lastIndex),Je))}for(var qt,Fe="",ge=0,Ae=0;Ae<_t.length;Ae++){for(var yt=P((kt=_t[Ae])[0]),zt=W(X(E(kt.index),ve.length),0),St=[],rn=1;rn<kt.length;rn++)z(St,(qt=kt[rn])===void 0?qt:String(qt));var mn=kt.groups;if(Xe){var Mn=J([yt],St,zt,ve);mn!==void 0&&z(Mn,mn);var hn=P(s(Re,void 0,Mn))}else hn=D(yt,ve,zt,St,mn,Re);zt>=ge&&(Fe+=H(ve,ge,zt)+hn,ge=zt+yt.length)}return Fe+H(ve,ge)}]},!!g(function(){var ce=/./;return ce.exec=function(){var Ne=[];return Ne.groups={a:"7"},Ne},"".replace(ce,"$<a>")!=="7"})||!K||Y)},function(n,o,r){var s=r(16),c=Math.hypot,v=Math.abs,p=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var _,E,x=0,P=0,A=arguments.length,M=0;P<A;)M<(_=v(arguments[P++]))?(x=x*(E=M/_)*E+1,M=_):x+=_>0?(E=_/M)*E:_;return M===1/0?1/0:M*p(x)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var p,g="Expected a function",b="__lodash_hash_undefined__",_="__lodash_placeholder__",E=16,x=32,P=64,A=128,M=256,I=1/0,D=9007199254740991,$=NaN,G=4294967295,W=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",E],["flip",512],["partial",x],["partialRight",P],["rearg",M]],X="[object Arguments]",J="[object Array]",z="[object Boolean]",L="[object Date]",H="[object Error]",K="[object Function]",Y="[object GeneratorFunction]",ce="[object Map]",Ne="[object Number]",_e="[object Object]",Oe="[object Promise]",ke="[object RegExp]",Re="[object Set]",ue="[object String]",ve="[object Symbol]",Pe="[object WeakMap]",Xe="[object ArrayBuffer]",ze="[object DataView]",Je="[object Float32Array]",_t="[object Float64Array]",kt="[object Int8Array]",qt="[object Int16Array]",Fe="[object Int32Array]",ge="[object Uint8Array]",Ae="[object Uint8ClampedArray]",yt="[object Uint16Array]",zt="[object Uint32Array]",St=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mn=/&(?:amp|lt|gt|quot|#39);/g,hn=/[&<>"']/g,ft=RegExp(Mn.source),xn=RegExp(hn.source),Ve=/<%-([\s\S]+?)%>/g,gn=/<%([\s\S]+?)%>/g,Zn=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bn=/^\w*$/,Sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ur=/[\\^$.*+?()[\]{}|]/g,oo=RegExp(Ur.source),In=/^\s+/,jo=/\s/,xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ke=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,at=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,Yt=/\\(\\)?/g,Nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,ui=/^[-+]0x[0-9a-f]+$/i,wi=/^0b[01]+$/i,Go=/^\[object .+?Constructor\]$/,Jo=/^0o[0-7]+$/i,Sn=/^(?:0|[1-9]\d*)$/,Un=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qn=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,Qr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rr="\\u2700-\\u27bf",fl="a-z\\xdf-\\xf6\\xf8-\\xff",Va="A-Z\\xc0-\\xd6\\xd8-\\xde",dl="\\ufe0e\\ufe0f",lu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zd="['’]",bc="[\\ud800-\\udfff]",da="["+lu+"]",Wu="["+Qr+"]",Pn="\\d+",jf="[\\u2700-\\u27bf]",mo="["+fl+"]",_c="[^\\ud800-\\udfff"+lu+Pn+Rr+fl+Va+"]",Yi="\\ud83c[\\udffb-\\udfff]",ta="[^\\ud800-\\udfff]",xs="(?:\\ud83c[\\udde6-\\uddff]){2}",Aa="[\\ud800-\\udbff][\\udc00-\\udfff]",pa="["+Va+"]",Ta="(?:"+mo+"|"+_c+")",wc="(?:"+pa+"|"+_c+")",Ec="(?:['’](?:d|ll|m|re|s|t|ve))?",If="(?:['’](?:D|LL|M|RE|S|T|VE))?",zu="(?:"+Wu+"|"+Yi+")?",Lf="[\\ufe0e\\ufe0f]?",Oc=Lf+zu+("(?:\\u200d(?:"+[ta,xs,Aa].join("|")+")"+Lf+zu+")*"),Hd="(?:"+[jf,xs,Aa].join("|")+")"+Oc,Cl="(?:"+[ta+Wu+"?",Wu,xs,Aa,bc].join("|")+")",Ff=RegExp(zd,"g"),pl=RegExp(Wu,"g"),xc=RegExp(Yi+"(?="+Yi+")|"+Cl+Oc,"g"),Ss=RegExp([pa+"?"+mo+"+"+Ec+"(?="+[da,pa,"$"].join("|")+")",wc+"+"+If+"(?="+[da,pa+Ta,"$"].join("|")+")",pa+"?"+Ta+"+"+Ec,pa+"+"+If,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,Hd].join("|"),"g"),Sc=RegExp("[\\u200d\\ud800-\\udfff"+Qr+dl+"]"),Ac=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$f=-1,Hr={};Hr[Je]=Hr[_t]=Hr[kt]=Hr[qt]=Hr[Fe]=Hr[ge]=Hr[Ae]=Hr[yt]=Hr[zt]=!0,Hr[X]=Hr[J]=Hr[Xe]=Hr[z]=Hr[ze]=Hr[L]=Hr[H]=Hr[K]=Hr[ce]=Hr[Ne]=Hr[_e]=Hr[ke]=Hr[Re]=Hr[ue]=Hr[Pe]=!1;var Vr={};Vr[X]=Vr[J]=Vr[Xe]=Vr[ze]=Vr[z]=Vr[L]=Vr[Je]=Vr[_t]=Vr[kt]=Vr[qt]=Vr[Fe]=Vr[ce]=Vr[Ne]=Vr[_e]=Vr[ke]=Vr[Re]=Vr[ue]=Vr[ve]=Vr[ge]=Vr[Ae]=Vr[yt]=Vr[zt]=!0,Vr[H]=Vr[K]=Vr[Pe]=!1;var Bf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uu=parseFloat,ha=parseInt,As=typeof s=="object"&&s&&s.Object===Object&&s,Uf=typeof self=="object"&&self&&self.Object===Object&&self,Io=As||Uf||Function("return this")(),jl=o&&!o.nodeType&&o,Il=jl&&typeof c=="object"&&c&&!c.nodeType&&c,Ts=Il&&Il.exports===jl,su=Ts&&As.process,Ei=function(){try{var ut=Il&&Il.require&&Il.require("util").types;return ut||su&&su.binding&&su.binding("util")}catch{}}(),Tc=Ei&&Ei.isArrayBuffer,Vf=Ei&&Ei.isDate,Mc=Ei&&Ei.isMap,ji=Ei&&Ei.isRegExp,si=Ei&&Ei.isSet,na=Ei&&Ei.isTypedArray;function io(ut,jt,$t){switch($t.length){case 0:return ut.call(jt);case 1:return ut.call(jt,$t[0]);case 2:return ut.call(jt,$t[0],$t[1]);case 3:return ut.call(jt,$t[0],$t[1],$t[2])}return ut.apply(jt,$t)}function Gf(ut,jt,$t,fn){for(var ur=-1,kr=ut==null?0:ut.length;++ur<kr;){var ho=ut[ur];jt(fn,ho,$t(ho),ut)}return fn}function Ii(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn&&jt(ut[$t],$t,ut)!==!1;);return ut}function kc(ut,jt){for(var $t=ut==null?0:ut.length;$t--&&jt(ut[$t],$t,ut)!==!1;);return ut}function Wf(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn;)if(!jt(ut[$t],$t,ut))return!1;return!0}function Li(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length,ur=0,kr=[];++$t<fn;){var ho=ut[$t];jt(ho,$t,ut)&&(kr[ur++]=ho)}return kr}function Ni(ut,jt){return!!(ut!=null&&ut.length)&&cu(ut,jt,0)>-1}function Pc(ut,jt,$t){for(var fn=-1,ur=ut==null?0:ut.length;++fn<ur;)if($t(jt,ut[fn]))return!0;return!1}function Lr(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length,ur=Array(fn);++$t<fn;)ur[$t]=jt(ut[$t],$t,ut);return ur}function ci(ut,jt){for(var $t=-1,fn=jt.length,ur=ut.length;++$t<fn;)ut[ur+$t]=jt[$t];return ut}function Ms(ut,jt,$t,fn){var ur=-1,kr=ut==null?0:ut.length;for(fn&&kr&&($t=ut[++ur]);++ur<kr;)$t=jt($t,ut[ur],ur,ut);return $t}function zf(ut,jt,$t,fn){var ur=ut==null?0:ut.length;for(fn&&ur&&($t=ut[--ur]);ur--;)$t=jt($t,ut[ur],ur,ut);return $t}function Nc(ut,jt){for(var $t=-1,fn=ut==null?0:ut.length;++$t<fn;)if(jt(ut[$t],$t,ut))return!0;return!1}var ks=$i("length");function Ga(ut,jt,$t){var fn;return $t(ut,function(ur,kr,ho){if(jt(ur,kr,ho))return fn=kr,!1}),fn}function Fi(ut,jt,$t,fn){for(var ur=ut.length,kr=$t+(fn?1:-1);fn?kr--:++kr<ur;)if(jt(ut[kr],kr,ut))return kr;return-1}function cu(ut,jt,$t){return jt==jt?function(fn,ur,kr){for(var ho=kr-1,T=fn.length;++ho<T;)if(fn[ho]===ur)return ho;return-1}(ut,jt,$t):Fi(ut,va,$t)}function Ki(ut,jt,$t,fn){for(var ur=$t-1,kr=ut.length;++ur<kr;)if(fn(ut[ur],jt))return ur;return-1}function va(ut){return ut!=ut}function Mr(ut,jt){var $t=ut==null?0:ut.length;return $t?fu(ut,jt)/$t:$}function $i(ut){return function(jt){return jt==null?p:jt[ut]}}function Ma(ut){return function(jt){return ut==null?p:ut[jt]}}function yi(ut,jt,$t,fn,ur){return ur(ut,function(kr,ho,T){$t=fn?(fn=!1,kr):jt($t,kr,ho,T)}),$t}function fu(ut,jt){for(var $t,fn=-1,ur=ut.length;++fn<ur;){var kr=jt(ut[fn]);kr!==p&&($t=$t===p?kr:$t+kr)}return $t}function Ll(ut,jt){for(var $t=-1,fn=Array(ut);++$t<ut;)fn[$t]=jt($t);return fn}function ka(ut){return ut&&ut.slice(0,fi(ut)+1).replace(In,"")}function po(ut){return function(jt){return ut(jt)}}function Hu(ut,jt){return Lr(jt,function($t){return ut[$t]})}function Wa(ut,jt){return ut.has(jt)}function ya(ut,jt){for(var $t=-1,fn=ut.length;++$t<fn&&cu(jt,ut[$t],0)>-1;);return $t}function Rc(ut,jt){for(var $t=ut.length;$t--&&cu(jt,ut[$t],0)>-1;);return $t}function qd(ut,jt){for(var $t=ut.length,fn=0;$t--;)ut[$t]===jt&&++fn;return fn}var Dc=Ma({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Wo=Ma({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fl(ut){return"\\"+Bf[ut]}function za(ut){return Sc.test(ut)}function Qo(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn,ur){$t[++jt]=[ur,fn]}),$t}function Cc(ut,jt){return function($t){return ut(jt($t))}}function ra(ut,jt){for(var $t=-1,fn=ut.length,ur=0,kr=[];++$t<fn;){var ho=ut[$t];ho!==jt&&ho!==_||(ut[$t]=_,kr[ur++]=$t)}return kr}function ma(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn){$t[++jt]=fn}),$t}function Ps(ut){var jt=-1,$t=Array(ut.size);return ut.forEach(function(fn){$t[++jt]=[fn,fn]}),$t}function Bi(ut){return za(ut)?function(jt){for(var $t=xc.lastIndex=0;xc.test(jt);)++$t;return $t}(ut):ks(ut)}function Zi(ut){return za(ut)?function(jt){return jt.match(xc)||[]}(ut):function(jt){return jt.split("")}(ut)}function fi(ut){for(var jt=ut.length;jt--&&jo.test(ut.charAt(jt)););return jt}var oa=Ma({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ri=function ut(jt){var $t,fn=(jt=jt==null?Io:Ri.defaults(Io.Object(),jt,Ri.pick(Io,Xd))).Array,ur=jt.Date,kr=jt.Error,ho=jt.Function,T=jt.Math,k=jt.Object,U=jt.RegExp,ne=jt.String,me=jt.TypeError,He=fn.prototype,mt=ho.prototype,Ht=k.prototype,_n=jt["__core-js_shared__"],yr=mt.toString,ln=Ht.hasOwnProperty,Gr=0,pr=($t=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||""))?"Symbol(src)_1."+$t:"",Cr=Ht.toString,ia=yr.call(k),Eo=Io._,Ji=U("^"+yr.call(ln).replace(Ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hl=Ts?jt.Buffer:p,vl=jt.Symbol,$l=jt.Uint8Array,du=hl?hl.allocUnsafe:p,Ha=Cc(k.getPrototypeOf,k),pu=k.create,ei=Ht.propertyIsEnumerable,Bl=He.splice,yl=vl?vl.isConcatSpreadable:p,Xa=vl?vl.iterator:p,qa=vl?vl.toStringTag:p,Xu=function(){try{var d=Qa(k,"defineProperty");return d({},"",{}),d}catch{}}(),ah=jt.clearTimeout!==Io.clearTimeout&&jt.clearTimeout,lh=ur&&ur.now!==Io.Date.now&&ur.now,Yd=jt.setTimeout!==Io.setTimeout&&jt.setTimeout,jc=T.ceil,qu=T.floor,Hf=k.getOwnPropertySymbols,uh=hl?hl.isBuffer:p,Yu=jt.isFinite,Ic=He.join,Xf=Cc(k.keys,k),Lo=T.max,Ui=T.min,qf=ur.now,Yf=jt.parseInt,Ns=T.random,Vv=He.reverse,Rs=Qa(jt,"DataView"),ml=Qa(jt,"Map"),Lc=Qa(jt,"Promise"),Ku=Qa(jt,"Set"),hu=Qa(jt,"WeakMap"),Ds=Qa(k,"create"),Fc=hu&&new hu,vu={},Gv=Tu(Rs),$c=Tu(ml),Wv=Tu(Lc),zv=Tu(Ku),sh=Tu(hu),Kf=vl?vl.prototype:p,Di=Kf?Kf.valueOf:p,ch=Kf?Kf.toString:p;function oe(d){if(Po(d)&&!mr(d)&&!(d instanceof Pr)){if(d instanceof Pa)return d;if(ln.call(d,"__wrapped__"))return gd(d)}return new Pa(d)}var Zu=function(){function d(){}return function(m){if(!no(m))return{};if(pu)return pu(m);d.prototype=m;var O=new d;return d.prototype=p,O}}();function Ul(){}function Pa(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=p}function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function Oi(d){var m=-1,O=d==null?0:d.length;for(this.clear();++m<O;){var C=d[m];this.set(C[0],C[1])}}function Fr(d){var m=-1,O=d==null?0:d.length;for(this.clear();++m<O;){var C=d[m];this.set(C[0],C[1])}}function Ya(d){var m=-1,O=d==null?0:d.length;for(this.clear();++m<O;){var C=d[m];this.set(C[0],C[1])}}function Vl(d){var m=-1,O=d==null?0:d.length;for(this.__data__=new Ya;++m<O;)this.add(d[m])}function ga(d){var m=this.__data__=new Fr(d);this.size=m.size}function Zf(d,m){var O=mr(d),C=!O&&ku(d),V=!O&&!C&&Ia(d),ee=!O&&!C&&!V&&et(d),pe=O||C||V||ee,we=pe?Ll(d.length,ne):[],Ue=we.length;for(var vt in d)!m&&!ln.call(d,vt)||pe&&(vt=="length"||V&&(vt=="offset"||vt=="parent")||ee&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||ao(vt,Ue))||we.push(vt);return we}function Jf(d){var m=d.length;return m?d[ap(0,m-1)]:p}function Kd(d,m){return Sl(mi(d),yu(m,0,d.length))}function fh(d){return Sl(mi(d))}function Gl(d,m,O){(O!==p&&!ua(d[m],O)||O===p&&!(m in d))&&Ka(d,m,O)}function Fo(d,m,O){var C=d[m];ln.call(d,m)&&ua(C,O)&&(O!==p||m in d)||Ka(d,m,O)}function Cs(d,m){for(var O=d.length;O--;)if(ua(d[O][0],m))return O;return-1}function Zd(d,m,O,C){return go(d,function(V,ee,pe){m(C,V,O(V),pe)}),C}function Wl(d,m){return d&&_l(m,Lt(m),d)}function Ka(d,m,O){m=="__proto__"&&Xu?Xu(d,m,{configurable:!0,enumerable:!0,value:O,writable:!0}):d[m]=O}function Bc(d,m){for(var O=-1,C=m.length,V=fn(C),ee=d==null;++O<C;)V[O]=ee?p:Wt(d,m[O]);return V}function yu(d,m,O){return d==d&&(O!==p&&(d=d<=O?d:O),m!==p&&(d=d>=m?d:m)),d}function ba(d,m,O,C,V,ee){var pe,we=1&m,Ue=2&m,vt=4&m;if(O&&(pe=V?O(d,C,V,ee):O(d)),pe!==p)return pe;if(!no(d))return d;var wt=mr(d);if(wt){if(pe=function(Pt){var Qt=Pt.length,dr=new Pt.constructor(Qt);return Qt&&typeof Pt[0]=="string"&&ln.call(Pt,"index")&&(dr.index=Pt.index,dr.input=Pt.input),dr}(d),!we)return mi(d,pe)}else{var Vt=Mo(d),Tn=Vt==K||Vt==Y;if(Ia(d))return fp(d,we);if(Vt==_e||Vt==X||Tn&&!V){if(pe=Ue||Tn?{}:xu(d),!we)return Ue?function(Pt,Qt){return _l(Pt,Vs(Pt),Qt)}(d,function(Pt,Qt){return Pt&&_l(Qt,Mt(Qt),Pt)}(pe,d)):function(Pt,Qt){return _l(Pt,Us(Pt),Qt)}(d,Wl(pe,d))}else{if(!Vr[Vt])return V?d:{};pe=function(Pt,Qt,dr){var bn=Pt.constructor;switch(Qt){case Xe:return Qu(Pt);case z:case L:return new bn(+Pt);case ze:return function(or,jr){var Vn=jr?Qu(or.buffer):or.buffer;return new or.constructor(Vn,or.byteOffset,or.byteLength)}(Pt,dr);case Je:case _t:case kt:case qt:case Fe:case ge:case Ae:case yt:case zt:return vo(Pt,dr);case ce:return new bn;case Ne:case ue:return new bn(Pt);case ke:return function(or){var jr=new or.constructor(or.source,_r.exec(or));return jr.lastIndex=or.lastIndex,jr}(Pt);case Re:return new bn;case ve:return ar=Pt,Di?k(Di.call(ar)):{}}var ar}(d,Vt,we)}}ee||(ee=new ga);var On=ee.get(d);if(On)return On;ee.set(d,pe),be(d)?d.forEach(function(Pt){pe.add(ba(Pt,m,O,Pt,d,ee))}):xi(d)&&d.forEach(function(Pt,Qt){pe.set(Qt,ba(Pt,m,O,Qt,d,ee))});var Yn=wt?p:(vt?Ue?vd:Jc:Ue?Mt:Lt)(d);return Ii(Yn||d,function(Pt,Qt){Yn&&(Pt=d[Qt=Pt]),Fo(pe,Qt,ba(Pt,m,O,Qt,d,ee))}),pe}function Jd(d,m,O){var C=O.length;if(d==null)return!C;for(d=k(d);C--;){var V=O[C],ee=m[V],pe=d[V];if(pe===p&&!(V in d)||!ee(pe))return!1}return!0}function Qd(d,m,O){if(typeof d!="function")throw new me(g);return ns(function(){d.apply(p,O)},m)}function Za(d,m,O,C){var V=-1,ee=Ni,pe=!0,we=d.length,Ue=[],vt=m.length;if(!we)return Ue;O&&(m=Lr(m,po(O))),C?(ee=Pc,pe=!1):m.length>=200&&(ee=Wa,pe=!1,m=new Vl(m));e:for(;++V<we;){var wt=d[V],Vt=O==null?wt:O(wt);if(wt=C||wt!==0?wt:0,pe&&Vt==Vt){for(var Tn=vt;Tn--;)if(m[Tn]===Vt)continue e;Ue.push(wt)}else ee(m,Vt,C)||Ue.push(wt)}return Ue}oe.templateSettings={escape:Ve,evaluate:gn,interpolate:Zn,variable:"",imports:{_:oe}},oe.prototype=Ul.prototype,oe.prototype.constructor=oe,Pa.prototype=Zu(Ul.prototype),Pa.prototype.constructor=Pa,Pr.prototype=Zu(Ul.prototype),Pr.prototype.constructor=Pr,Oi.prototype.clear=function(){this.__data__=Ds?Ds(null):{},this.size=0},Oi.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},Oi.prototype.get=function(d){var m=this.__data__;if(Ds){var O=m[d];return O===b?p:O}return ln.call(m,d)?m[d]:p},Oi.prototype.has=function(d){var m=this.__data__;return Ds?m[d]!==p:ln.call(m,d)},Oi.prototype.set=function(d,m){var O=this.__data__;return this.size+=this.has(d)?0:1,O[d]=Ds&&m===p?b:m,this},Fr.prototype.clear=function(){this.__data__=[],this.size=0},Fr.prototype.delete=function(d){var m=this.__data__,O=Cs(m,d);return!(O<0)&&(O==m.length-1?m.pop():Bl.call(m,O,1),--this.size,!0)},Fr.prototype.get=function(d){var m=this.__data__,O=Cs(m,d);return O<0?p:m[O][1]},Fr.prototype.has=function(d){return Cs(this.__data__,d)>-1},Fr.prototype.set=function(d,m){var O=this.__data__,C=Cs(O,d);return C<0?(++this.size,O.push([d,m])):O[C][1]=m,this},Ya.prototype.clear=function(){this.size=0,this.__data__={hash:new Oi,map:new(ml||Fr),string:new Oi}},Ya.prototype.delete=function(d){var m=Bs(this,d).delete(d);return this.size-=m?1:0,m},Ya.prototype.get=function(d){return Bs(this,d).get(d)},Ya.prototype.has=function(d){return Bs(this,d).has(d)},Ya.prototype.set=function(d,m){var O=Bs(this,d),C=O.size;return O.set(d,m),this.size+=O.size==C?0:1,this},Vl.prototype.add=Vl.prototype.push=function(d){return this.__data__.set(d,b),this},Vl.prototype.has=function(d){return this.__data__.has(d)},ga.prototype.clear=function(){this.__data__=new Fr,this.size=0},ga.prototype.delete=function(d){var m=this.__data__,O=m.delete(d);return this.size=m.size,O},ga.prototype.get=function(d){return this.__data__.get(d)},ga.prototype.has=function(d){return this.__data__.has(d)},ga.prototype.set=function(d,m){var O=this.__data__;if(O instanceof Fr){var C=O.__data__;if(!ml||C.length<199)return C.push([d,m]),this.size=++O.size,this;O=this.__data__=new Ya(C)}return O.set(d,m),this.size=O.size,this};var go=es(Rn),dh=es(co,!0);function ep(d,m){var O=!0;return go(d,function(C,V,ee){return O=!!m(C,V,ee)}),O}function $o(d,m,O){for(var C=-1,V=d.length;++C<V;){var ee=d[C],pe=m(ee);if(pe!=null&&(we===p?pe==pe&&!ht(pe):O(pe,we)))var we=pe,Ue=ee}return Ue}function Xr(d,m){var O=[];return go(d,function(C,V,ee){m(C,V,ee)&&O.push(C)}),O}function ti(d,m,O,C,V){var ee=-1,pe=d.length;for(O||(O=ef),V||(V=[]);++ee<pe;){var we=d[ee];m>0&&O(we)?m>1?ti(we,m-1,O,C,V):ci(V,we):C||(V[V.length]=we)}return V}var Or=ud(),so=ud(!0);function Rn(d,m){return d&&Or(d,m,Lt)}function co(d,m){return d&&so(d,m,Lt)}function Uc(d,m){return Li(m,function(O){return Tl(d[O])})}function gl(d,m){for(var O=0,C=(m=_u(m,d)).length;d!=null&&O<C;)d=d[nl(m[O++])];return O&&O==C?d:p}function Qf(d,m,O){var C=m(d);return mr(d)?C:ci(C,O(d))}function Oo(d){return d==null?d===p?"[object Undefined]":"[object Null]":qa&&qa in k(d)?function(m){var O=ln.call(m,qa),C=m[qa];try{m[qa]=p;var V=!0}catch{}var ee=Cr.call(m);return V&&(O?m[qa]=C:delete m[qa]),ee}(d):function(m){return Cr.call(m)}(d)}function To(d,m){return d>m}function tp(d,m){return d!=null&&ln.call(d,m)}function np(d,m){return d!=null&&m in k(d)}function Vc(d,m,O){for(var C=O?Pc:Ni,V=d[0].length,ee=d.length,pe=ee,we=fn(ee),Ue=1/0,vt=[];pe--;){var wt=d[pe];pe&&m&&(wt=Lr(wt,po(m))),Ue=Ui(wt.length,Ue),we[pe]=!O&&(m||V>=120&&wt.length>=120)?new Vl(pe&&wt):p}wt=d[0];var Vt=-1,Tn=we[0];e:for(;++Vt<V&&vt.length<Ue;){var On=wt[Vt],Yn=m?m(On):On;if(On=O||On!==0?On:0,!(Tn?Wa(Tn,Yn):C(vt,Yn,O))){for(pe=ee;--pe;){var Pt=we[pe];if(!(Pt?Wa(Pt,Yn):C(d[pe],Yn,O)))continue e}Tn&&Tn.push(Yn),vt.push(On)}}return vt}function Vi(d,m,O){var C=(d=Au(d,m=_u(m,d)))==null?d:d[nl(Gi(m))];return C==null?p:io(C,d,O)}function ed(d){return Po(d)&&Oo(d)==X}function js(d,m,O,C,V){return d===m||(d==null||m==null||!Po(d)&&!Po(m)?d!=d&&m!=m:function(ee,pe,we,Ue,vt,wt){var Vt=mr(ee),Tn=mr(pe),On=Vt?J:Mo(ee),Yn=Tn?J:Mo(pe),Pt=(On=On==X?_e:On)==_e,Qt=(Yn=Yn==X?_e:Yn)==_e,dr=On==Yn;if(dr&&Ia(ee)){if(!Ia(pe))return!1;Vt=!0,Pt=!1}if(dr&&!Pt)return wt||(wt=new ga),Vt||et(ee)?hd(ee,pe,we,Ue,vt,wt):function(Vn,tr,Ho,it,eu,Si,Pu){switch(Ho){case ze:if(Vn.byteLength!=tr.byteLength||Vn.byteOffset!=tr.byteOffset)return!1;Vn=Vn.buffer,tr=tr.buffer;case Xe:return!(Vn.byteLength!=tr.byteLength||!Si(new $l(Vn),new $l(tr)));case z:case L:case Ne:return ua(+Vn,+tr);case H:return Vn.name==tr.name&&Vn.message==tr.message;case ke:case ue:return Vn==tr+"";case ce:var us=Qo;case Re:var Ed=1&it;if(us||(us=ma),Vn.size!=tr.size&&!Ed)return!1;var Ap=Pu.get(Vn);if(Ap)return Ap==tr;it|=2,Pu.set(Vn,tr);var df=hd(us(Vn),us(tr),it,eu,Si,Pu);return Pu.delete(Vn),df;case ve:if(Di)return Di.call(Vn)==Di.call(tr)}return!1}(ee,pe,On,we,Ue,vt,wt);if(!(1&we)){var bn=Pt&&ln.call(ee,"__wrapped__"),ar=Qt&&ln.call(pe,"__wrapped__");if(bn||ar){var or=bn?ee.value():ee,jr=ar?pe.value():pe;return wt||(wt=new ga),vt(or,jr,we,Ue,wt)}}return dr?(wt||(wt=new ga),function(Vn,tr,Ho,it,eu,Si){var Pu=1&Ho,us=Jc(Vn),Ed=us.length,Ap=Jc(tr).length;if(Ed!=Ap&&!Pu)return!1;for(var df=Ed;df--;){var Zs=us[df];if(!(Pu?Zs in tr:ln.call(tr,Zs)))return!1}var Zv=Si.get(Vn),Jv=Si.get(tr);if(Zv&&Jv)return Zv==tr&&Jv==Vn;var Tp=!0;Si.set(Vn,tr),Si.set(tr,Vn);for(var Rh=Pu;++df<Ed;){var Js=Vn[Zs=us[df]],Mp=tr[Zs];if(it)var Qv=Pu?it(Mp,Js,Zs,tr,Vn,Si):it(Js,Mp,Zs,Vn,tr,Si);if(!(Qv===p?Js===Mp||eu(Js,Mp,Ho,it,Si):Qv)){Tp=!1;break}Rh||(Rh=Zs=="constructor")}if(Tp&&!Rh){var Qs=Vn.constructor,kp=tr.constructor;Qs==kp||!("constructor"in Vn)||!("constructor"in tr)||typeof Qs=="function"&&Qs instanceof Qs&&typeof kp=="function"&&kp instanceof kp||(Tp=!1)}return Si.delete(Vn),Si.delete(tr),Tp}(ee,pe,we,Ue,vt,wt)):!1}(d,m,O,C,js,V))}function Na(d,m,O,C){var V=O.length,ee=V,pe=!C;if(d==null)return!ee;for(d=k(d);V--;){var we=O[V];if(pe&&we[2]?we[1]!==d[we[0]]:!(we[0]in d))return!1}for(;++V<ee;){var Ue=(we=O[V])[0],vt=d[Ue],wt=we[1];if(pe&&we[2]){if(vt===p&&!(Ue in d))return!1}else{var Vt=new ga;if(C)var Tn=C(vt,wt,Ue,d,m,Vt);if(!(Tn===p?js(wt,vt,3,C,Vt):Tn))return!1}}return!0}function mu(d){return!(!no(d)||(m=d,pr&&pr in m))&&(Tl(d)?Ji:Go).test(Tu(d));var m}function zl(d){return typeof d=="function"?d:d==null?Hn:typeof d=="object"?mr(d)?op(d[0],d[1]):rp(d):se(d)}function Ra(d){if(!Su(d))return Xf(d);var m=[];for(var O in k(d))ln.call(d,O)&&O!="constructor"&&m.push(O);return m}function ph(d){if(!no(d))return function(V){var ee=[];if(V!=null)for(var pe in k(V))ee.push(pe);return ee}(d);var m=Su(d),O=[];for(var C in d)(C!="constructor"||!m&&ln.call(d,C))&&O.push(C);return O}function bl(d,m){return d<m}function _a(d,m){var O=-1,C=sa(d)?fn(d.length):[];return go(d,function(V,ee,pe){C[++O]=m(V,ee,pe)}),C}function rp(d){var m=Qc(d);return m.length==1&&m[0][2]?Ws(m[0][0],m[0][1]):function(O){return O===d||Na(O,d,m)}}function op(d,m){return Yl(d)&&xl(m)?Ws(nl(d),m):function(O){var C=Wt(O,d);return C===p&&C===m?Ot(O,d):js(m,C,3)}}function td(d,m,O,C,V){d!==m&&Or(m,function(ee,pe){if(V||(V=new ga),no(ee))(function(Ue,vt,wt,Vt,Tn,On,Yn){var Pt=Dt(Ue,wt),Qt=Dt(vt,wt),dr=Yn.get(Qt);if(dr)return void Gl(Ue,wt,dr);var bn=On?On(Pt,Qt,wt+"",Ue,vt,Yn):p,ar=bn===p;if(ar){var or=mr(Qt),jr=!or&&Ia(Qt),Vn=!or&&!jr&&et(Qt);bn=Qt,or||jr||Vn?mr(Pt)?bn=Pt:oi(Pt)?bn=mi(Pt):jr?(ar=!1,bn=fp(Qt,!0)):Vn?(ar=!1,bn=vo(Qt,!0)):bn=[]:B(Qt)||ku(Qt)?(bn=Pt,ku(Pt)?bn=Rt(Pt):no(Pt)&&!Tl(Pt)||(bn=xu(Qt))):ar=!1}ar&&(Yn.set(Qt,bn),Tn(bn,Qt,Vt,On,Yn),Yn.delete(Qt)),Gl(Ue,wt,bn)})(d,m,pe,O,td,C,V);else{var we=C?C(Dt(d,pe),ee,pe+"",d,m,V):p;we===p&&(we=ee),Gl(d,pe,we)}},Mt)}function hh(d,m){var O=d.length;if(O)return ao(m+=m<0?O:0,O)?d[m]:p}function vh(d,m,O){m=m.length?Lr(m,function(ee){return mr(ee)?function(pe){return gl(pe,ee.length===1?ee[0]:ee)}:ee}):[Hn];var C=-1;m=Lr(m,po(Qn()));var V=_a(d,function(ee,pe,we){var Ue=Lr(m,function(vt){return vt(ee)});return{criteria:Ue,index:++C,value:ee}});return function(ee,pe){var we=ee.length;for(ee.sort(pe);we--;)ee[we]=ee[we].value;return ee}(V,function(ee,pe){return function(we,Ue,vt){for(var wt=-1,Vt=we.criteria,Tn=Ue.criteria,On=Vt.length,Yn=vt.length;++wt<On;){var Pt=Xc(Vt[wt],Tn[wt]);if(Pt)return wt>=Yn?Pt:Pt*(vt[wt]=="desc"?-1:1)}return we.index-Ue.index}(ee,pe,O)})}function yh(d,m,O){for(var C=-1,V=m.length,ee={};++C<V;){var pe=m[C],we=gl(d,pe);O(we,pe)&&gu(ee,_u(pe,d),we)}return ee}function ip(d,m,O,C){var V=C?Ki:cu,ee=-1,pe=m.length,we=d;for(d===m&&(m=mi(m)),O&&(we=Lr(d,po(O)));++ee<pe;)for(var Ue=0,vt=m[ee],wt=O?O(vt):vt;(Ue=V(we,wt,Ue,C))>-1;)we!==d&&Bl.call(we,Ue,1),Bl.call(d,Ue,1);return d}function Is(d,m){for(var O=d?m.length:0,C=O-1;O--;){var V=m[O];if(O==C||V!==ee){var ee=V;ao(V)?Bl.call(d,V,1):od(d,V)}}return d}function ap(d,m){return d+qu(Ns()*(m-d+1))}function Gc(d,m){var O="";if(!d||m<1||m>D)return O;do m%2&&(O+=d),(m=qu(m/2))&&(d+=d);while(m);return O}function xr(d,m){return nf(tf(d,m,Hn),d+"")}function Hv(d){return Jf(gr(d))}function lp(d,m){var O=gr(d);return Sl(O,yu(m,0,O.length))}function gu(d,m,O,C){if(!no(d))return d;for(var V=-1,ee=(m=_u(m,d)).length,pe=ee-1,we=d;we!=null&&++V<ee;){var Ue=nl(m[V]),vt=O;if(Ue==="__proto__"||Ue==="constructor"||Ue==="prototype")return d;if(V!=pe){var wt=we[Ue];(vt=C?C(wt,Ue,we):p)===p&&(vt=no(wt)?wt:ao(m[V+1])?[]:{})}Fo(we,Ue,vt),we=we[Ue]}return d}var Wc=Fc?function(d,m){return Fc.set(d,m),d}:Hn,Xv=Xu?function(d,m){return Xu(d,"toString",{configurable:!0,enumerable:!1,value:Nr(m),writable:!0})}:Hn;function qv(d){return Sl(gr(d))}function Da(d,m,O){var C=-1,V=d.length;m<0&&(m=-m>V?0:V+m),(O=O>V?V:O)<0&&(O+=V),V=m>O?0:O-m>>>0,m>>>=0;for(var ee=fn(V);++C<V;)ee[C]=d[C+m];return ee}function up(d,m){var O;return go(d,function(C,V,ee){return!(O=m(C,V,ee))}),!!O}function nd(d,m,O){var C=0,V=d==null?C:d.length;if(typeof m=="number"&&m==m&&V<=2147483647){for(;C<V;){var ee=C+V>>>1,pe=d[ee];pe!==null&&!ht(pe)&&(O?pe<=m:pe<m)?C=ee+1:V=ee}return V}return rd(d,m,Hn,O)}function rd(d,m,O,C){var V=0,ee=d==null?0:d.length;if(ee===0)return 0;for(var pe=(m=O(m))!=m,we=m===null,Ue=ht(m),vt=m===p;V<ee;){var wt=qu((V+ee)/2),Vt=O(d[wt]),Tn=Vt!==p,On=Vt===null,Yn=Vt==Vt,Pt=ht(Vt);if(pe)var Qt=C||Yn;else Qt=vt?Yn&&(C||Tn):we?Yn&&Tn&&(C||!On):Ue?Yn&&Tn&&!On&&(C||!Pt):!On&&!Pt&&(C?Vt<=m:Vt<m);Qt?V=wt+1:ee=wt}return Ui(ee,4294967294)}function mh(d,m){for(var O=-1,C=d.length,V=0,ee=[];++O<C;){var pe=d[O],we=m?m(pe):pe;if(!O||!ua(we,Ue)){var Ue=we;ee[V++]=pe===0?0:pe}}return ee}function sp(d){return typeof d=="number"?d:ht(d)?$:+d}function aa(d){if(typeof d=="string")return d;if(mr(d))return Lr(d,aa)+"";if(ht(d))return ch?ch.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function bu(d,m,O){var C=-1,V=Ni,ee=d.length,pe=!0,we=[],Ue=we;if(O)pe=!1,V=Pc;else if(ee>=200){var vt=m?null:dd(d);if(vt)return ma(vt);pe=!1,V=Wa,Ue=new Vl}else Ue=m?[]:we;e:for(;++C<ee;){var wt=d[C],Vt=m?m(wt):wt;if(wt=O||wt!==0?wt:0,pe&&Vt==Vt){for(var Tn=Ue.length;Tn--;)if(Ue[Tn]===Vt)continue e;m&&Ue.push(Vt),we.push(wt)}else V(Ue,Vt,O)||(Ue!==we&&Ue.push(Vt),we.push(wt))}return we}function od(d,m){return(d=Au(d,m=_u(m,d)))==null||delete d[nl(Gi(m))]}function Ju(d,m,O,C){return gu(d,m,O(gl(d,m)),C)}function zc(d,m,O,C){for(var V=d.length,ee=C?V:-1;(C?ee--:++ee<V)&&m(d[ee],ee,d););return O?Da(d,C?0:ee,C?ee+1:V):Da(d,C?ee+1:0,C?V:ee)}function gh(d,m){var O=d;return O instanceof Pr&&(O=O.value()),Ms(m,function(C,V){return V.func.apply(V.thisArg,ci([C],V.args))},O)}function Hc(d,m,O){var C=d.length;if(C<2)return C?bu(d[0]):[];for(var V=-1,ee=fn(C);++V<C;)for(var pe=d[V],we=-1;++we<C;)we!=V&&(ee[V]=Za(ee[V]||pe,d[we],m,O));return bu(ti(ee,1),m,O)}function id(d,m,O){for(var C=-1,V=d.length,ee=m.length,pe={};++C<V;){var we=C<ee?m[C]:p;O(pe,d[C],we)}return pe}function ad(d){return oi(d)?d:[]}function ld(d){return typeof d=="function"?d:Hn}function _u(d,m){return mr(d)?d:Yl(d,m)?[d]:gp(Et(d))}var bh=xr;function wu(d,m,O){var C=d.length;return O=O===p?C:O,!m&&O>=C?d:Da(d,m,O)}var cp=ah||function(d){return Io.clearTimeout(d)};function fp(d,m){if(m)return d.slice();var O=d.length,C=du?du(O):new d.constructor(O);return d.copy(C),C}function Qu(d){var m=new d.constructor(d.byteLength);return new $l(m).set(new $l(d)),m}function vo(d,m){var O=m?Qu(d.buffer):d.buffer;return new d.constructor(O,d.byteOffset,d.length)}function Xc(d,m){if(d!==m){var O=d!==p,C=d===null,V=d==d,ee=ht(d),pe=m!==p,we=m===null,Ue=m==m,vt=ht(m);if(!we&&!vt&&!ee&&d>m||ee&&pe&&Ue&&!we&&!vt||C&&pe&&Ue||!O&&Ue||!V)return 1;if(!C&&!ee&&!vt&&d<m||vt&&O&&V&&!C&&!ee||we&&O&&V||!pe&&V||!Ue)return-1}return 0}function xo(d,m,O,C){for(var V=-1,ee=d.length,pe=O.length,we=-1,Ue=m.length,vt=Lo(ee-pe,0),wt=fn(Ue+vt),Vt=!C;++we<Ue;)wt[we]=m[we];for(;++V<pe;)(Vt||V<ee)&&(wt[O[V]]=d[V]);for(;vt--;)wt[we++]=d[V++];return wt}function Hl(d,m,O,C){for(var V=-1,ee=d.length,pe=-1,we=O.length,Ue=-1,vt=m.length,wt=Lo(ee-we,0),Vt=fn(wt+vt),Tn=!C;++V<wt;)Vt[V]=d[V];for(var On=V;++Ue<vt;)Vt[On+Ue]=m[Ue];for(;++pe<we;)(Tn||V<ee)&&(Vt[On+O[pe]]=d[V++]);return Vt}function mi(d,m){var O=-1,C=d.length;for(m||(m=fn(C));++O<C;)m[O]=d[O];return m}function _l(d,m,O,C){var V=!O;O||(O={});for(var ee=-1,pe=m.length;++ee<pe;){var we=m[ee],Ue=C?C(O[we],d[we],we,O,d):p;Ue===p&&(Ue=d[we]),V?Ka(O,we,Ue):Fo(O,we,Ue)}return O}function Xl(d,m){return function(O,C){var V=mr(O)?Gf:Zd,ee=m?m():{};return V(O,d,Qn(C,2),ee)}}function Eu(d){return xr(function(m,O){var C=-1,V=O.length,ee=V>1?O[V-1]:p,pe=V>2?O[2]:p;for(ee=d.length>3&&typeof ee=="function"?(V--,ee):p,pe&&Bo(O[0],O[1],pe)&&(ee=V<3?p:ee,V=1),m=k(m);++C<V;){var we=O[C];we&&d(m,we,C,ee)}return m})}function es(d,m){return function(O,C){if(O==null)return O;if(!sa(O))return d(O,C);for(var V=O.length,ee=m?V:-1,pe=k(O);(m?ee--:++ee<V)&&C(pe[ee],ee,pe)!==!1;);return O}}function ud(d){return function(m,O,C){for(var V=-1,ee=k(m),pe=C(m),we=pe.length;we--;){var Ue=pe[d?we:++V];if(O(ee[Ue],Ue,ee)===!1)break}return m}}function sd(d){return function(m){var O=za(m=Et(m))?Zi(m):p,C=O?O[0]:m.charAt(0),V=O?wu(O,1).join(""):m.slice(1);return C[d]()+V}}function wl(d){return function(m){return Ms(Ao(cr(m).replace(Ff,"")),d,"")}}function ts(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var O=Zu(d.prototype),C=d.apply(O,m);return no(C)?C:O}}function cd(d){return function(m,O,C){var V=k(m);if(!sa(m)){var ee=Qn(O,3);m=Lt(m),O=function(we){return ee(V[we],we,V)}}var pe=d(m,O,C);return pe>-1?V[ee?m[pe]:pe]:p}}function qc(d){return Ol(function(m){var O=m.length,C=O,V=Pa.prototype.thru;for(d&&m.reverse();C--;){var ee=m[C];if(typeof ee!="function")throw new me(g);if(V&&!pe&&$s(ee)=="wrapper")var pe=new Pa([],!0)}for(C=pe?C:O;++C<O;){var we=$s(ee=m[C]),Ue=we=="wrapper"?yd(ee):p;pe=Ue&&el(Ue[0])&&Ue[1]==424&&!Ue[4].length&&Ue[9]==1?pe[$s(Ue[0])].apply(pe,Ue[3]):ee.length==1&&el(ee)?pe[we]():pe.thru(ee)}return function(){var vt=arguments,wt=vt[0];if(pe&&vt.length==1&&mr(wt))return pe.plant(wt).value();for(var Vt=0,Tn=O?m[Vt].apply(this,vt):wt;++Vt<O;)Tn=m[Vt].call(this,Tn);return Tn}})}function Ou(d,m,O,C,V,ee,pe,we,Ue,vt){var wt=m&A,Vt=1&m,Tn=2&m,On=24&m,Yn=512&m,Pt=Tn?p:ts(d);return function Qt(){for(var dr=arguments.length,bn=fn(dr),ar=dr;ar--;)bn[ar]=arguments[ar];if(On)var or=ql(Qt),jr=qd(bn,or);if(C&&(bn=xo(bn,C,V,On)),ee&&(bn=Hl(bn,ee,pe,On)),dr-=jr,On&&dr<vt){var Vn=ra(bn,or);return Kc(d,m,Ou,Qt.placeholder,O,bn,Vn,we,Ue,vt-dr)}var tr=Vt?O:this,Ho=Tn?tr[d]:d;return dr=bn.length,we?bn=zs(bn,we):Yn&&dr>1&&bn.reverse(),wt&&Ue<dr&&(bn.length=Ue),this&&this!==Io&&this instanceof Qt&&(Ho=Pt||ts(Ho)),Ho.apply(tr,bn)}}function dp(d,m){return function(O,C){return function(V,ee,pe,we){return Rn(V,function(Ue,vt,wt){ee(we,pe(Ue),vt,wt)}),we}(O,d,m(C),{})}}function Ls(d,m){return function(O,C){var V;if(O===p&&C===p)return m;if(O!==p&&(V=O),C!==p){if(V===p)return C;typeof O=="string"||typeof C=="string"?(O=aa(O),C=aa(C)):(O=sp(O),C=sp(C)),V=d(O,C)}return V}}function fd(d){return Ol(function(m){return m=Lr(m,po(Qn())),xr(function(O){var C=this;return d(m,function(V){return io(V,C,O)})})})}function Yc(d,m){var O=(m=m===p?" ":aa(m)).length;if(O<2)return O?Gc(m,d):m;var C=Gc(m,jc(d/Bi(m)));return za(m)?wu(Zi(C),0,d).join(""):C.slice(0,d)}function El(d){return function(m,O,C){return C&&typeof C!="number"&&Bo(m,O,C)&&(O=C=p),m=Ct(m),O===p?(O=m,m=0):O=Ct(O),function(V,ee,pe,we){for(var Ue=-1,vt=Lo(jc((ee-V)/(pe||1)),0),wt=fn(vt);vt--;)wt[we?vt:++Ue]=V,V+=pe;return wt}(m,O,C=C===p?m<O?1:-1:Ct(C),d)}}function Fs(d){return function(m,O){return typeof m=="string"&&typeof O=="string"||(m=Ut(m),O=Ut(O)),d(m,O)}}function Kc(d,m,O,C,V,ee,pe,we,Ue,vt){var wt=8&m;m|=wt?x:P,4&(m&=~(wt?P:x))||(m&=-4);var Vt=[d,m,V,wt?ee:p,wt?pe:p,wt?p:ee,wt?p:pe,we,Ue,vt],Tn=O.apply(p,Vt);return el(d)&&yp(Tn,Vt),Tn.placeholder=C,md(Tn,d,m)}function Zc(d){var m=T[d];return function(O,C){if(O=Ut(O),(C=C==null?0:Ui(ct(C),292))&&Yu(O)){var V=(Et(O)+"e").split("e");return+((V=(Et(m(V[0]+"e"+(+V[1]+C)))+"e").split("e"))[0]+"e"+(+V[1]-C))}return m(O)}}var dd=Ku&&1/ma(new Ku([,-0]))[1]==I?function(d){return new Ku(d)}:ot;function pd(d){return function(m){var O=Mo(m);return O==ce?Qo(m):O==Re?Ps(m):function(C,V){return Lr(V,function(ee){return[ee,C[ee]]})}(m,d(m))}}function Ja(d,m,O,C,V,ee,pe,we){var Ue=2&m;if(!Ue&&typeof d!="function")throw new me(g);var vt=C?C.length:0;if(vt||(m&=-97,C=V=p),pe=pe===p?pe:Lo(ct(pe),0),we=we===p?we:ct(we),vt-=V?V.length:0,m&P){var wt=C,Vt=V;C=V=p}var Tn=Ue?p:yd(d),On=[d,m,O,C,V,wt,Vt,ee,pe,we];if(Tn&&function(Pt,Qt){var dr=Pt[1],bn=Qt[1],ar=dr|bn,or=ar<131,jr=bn==A&&dr==8||bn==A&&dr==M&&Pt[7].length<=Qt[8]||bn==384&&Qt[7].length<=Qt[8]&&dr==8;if(!or&&!jr)return Pt;1&bn&&(Pt[2]=Qt[2],ar|=1&dr?0:4);var Vn=Qt[3];if(Vn){var tr=Pt[3];Pt[3]=tr?xo(tr,Vn,Qt[4]):Vn,Pt[4]=tr?ra(Pt[3],_):Qt[4]}(Vn=Qt[5])&&(tr=Pt[5],Pt[5]=tr?Hl(tr,Vn,Qt[6]):Vn,Pt[6]=tr?ra(Pt[5],_):Qt[6]),(Vn=Qt[7])&&(Pt[7]=Vn),bn&A&&(Pt[8]=Pt[8]==null?Qt[8]:Ui(Pt[8],Qt[8])),Pt[9]==null&&(Pt[9]=Qt[9]),Pt[0]=Qt[0],Pt[1]=ar}(On,Tn),d=On[0],m=On[1],O=On[2],C=On[3],V=On[4],!(we=On[9]=On[9]===p?Ue?0:d.length:Lo(On[9]-vt,0))&&24&m&&(m&=-25),m&&m!=1)Yn=m==8||m==E?function(Pt,Qt,dr){var bn=ts(Pt);return function ar(){for(var or=arguments.length,jr=fn(or),Vn=or,tr=ql(ar);Vn--;)jr[Vn]=arguments[Vn];var Ho=or<3&&jr[0]!==tr&&jr[or-1]!==tr?[]:ra(jr,tr);return(or-=Ho.length)<dr?Kc(Pt,Qt,Ou,ar.placeholder,p,jr,Ho,p,p,dr-or):io(this&&this!==Io&&this instanceof ar?bn:Pt,this,jr)}}(d,m,we):m!=x&&m!=33||V.length?Ou.apply(p,On):function(Pt,Qt,dr,bn){var ar=1&Qt,or=ts(Pt);return function jr(){for(var Vn=-1,tr=arguments.length,Ho=-1,it=bn.length,eu=fn(it+tr),Si=this&&this!==Io&&this instanceof jr?or:Pt;++Ho<it;)eu[Ho]=bn[Ho];for(;tr--;)eu[Ho++]=arguments[++Vn];return io(Si,ar?dr:this,eu)}}(d,m,O,C);else var Yn=function(Pt,Qt,dr){var bn=1&Qt,ar=ts(Pt);return function or(){return(this&&this!==Io&&this instanceof or?ar:Pt).apply(bn?dr:this,arguments)}}(d,m,O);return md((Tn?Wc:yp)(Yn,On),d,m)}function pp(d,m,O,C){return d===p||ua(d,Ht[O])&&!ln.call(C,O)?m:d}function hp(d,m,O,C,V,ee){return no(d)&&no(m)&&(ee.set(m,d),td(d,m,p,hp,ee),ee.delete(m)),d}function vp(d){return B(d)?p:d}function hd(d,m,O,C,V,ee){var pe=1&O,we=d.length,Ue=m.length;if(we!=Ue&&!(pe&&Ue>we))return!1;var vt=ee.get(d),wt=ee.get(m);if(vt&&wt)return vt==m&&wt==d;var Vt=-1,Tn=!0,On=2&O?new Vl:p;for(ee.set(d,m),ee.set(m,d);++Vt<we;){var Yn=d[Vt],Pt=m[Vt];if(C)var Qt=pe?C(Pt,Yn,Vt,m,d,ee):C(Yn,Pt,Vt,d,m,ee);if(Qt!==p){if(Qt)continue;Tn=!1;break}if(On){if(!Nc(m,function(dr,bn){if(!Wa(On,bn)&&(Yn===dr||V(Yn,dr,O,C,ee)))return On.push(bn)})){Tn=!1;break}}else if(Yn!==Pt&&!V(Yn,Pt,O,C,ee)){Tn=!1;break}}return ee.delete(d),ee.delete(m),Tn}function Ol(d){return nf(tf(d,p,wp),d+"")}function Jc(d){return Qf(d,Lt,Us)}function vd(d){return Qf(d,Mt,Vs)}var yd=Fc?function(d){return Fc.get(d)}:ot;function $s(d){for(var m=d.name+"",O=vu[m],C=ln.call(vu,m)?O.length:0;C--;){var V=O[C],ee=V.func;if(ee==null||ee==d)return V.name}return m}function ql(d){return(ln.call(oe,"placeholder")?oe:d).placeholder}function Qn(){var d=oe.iteratee||fo;return d=d===fo?zl:d,arguments.length?d(arguments[0],arguments[1]):d}function Bs(d,m){var O,C,V=d.__data__;return((C=typeof(O=m))=="string"||C=="number"||C=="symbol"||C=="boolean"?O!=="__proto__":O===null)?V[typeof m=="string"?"string":"hash"]:V.map}function Qc(d){for(var m=Lt(d),O=m.length;O--;){var C=m[O],V=d[C];m[O]=[C,V,xl(V)]}return m}function Qa(d,m){var O=function(C,V){return C==null?p:C[V]}(d,m);return mu(O)?O:p}var Us=Hf?function(d){return d==null?[]:(d=k(d),Li(Hf(d),function(m){return ei.call(d,m)}))}:We,Vs=Hf?function(d){for(var m=[];d;)ci(m,Us(d)),d=Ha(d);return m}:We,Mo=Oo;function Gs(d,m,O){for(var C=-1,V=(m=_u(m,d)).length,ee=!1;++C<V;){var pe=nl(m[C]);if(!(ee=d!=null&&O(d,pe)))break;d=d[pe]}return ee||++C!=V?ee:!!(V=d==null?0:d.length)&&Jl(V)&&ao(pe,V)&&(mr(d)||ku(d))}function xu(d){return typeof d.constructor!="function"||Su(d)?{}:Zu(Ha(d))}function ef(d){return mr(d)||ku(d)||!!(yl&&d&&d[yl])}function ao(d,m){var O=typeof d;return!!(m=m??D)&&(O=="number"||O!="symbol"&&Sn.test(d))&&d>-1&&d%1==0&&d<m}function Bo(d,m,O){if(!no(O))return!1;var C=typeof m;return!!(C=="number"?sa(O)&&ao(m,O.length):C=="string"&&m in O)&&ua(O[m],d)}function Yl(d,m){if(mr(d))return!1;var O=typeof d;return!(O!="number"&&O!="symbol"&&O!="boolean"&&d!=null&&!ht(d))||Bn.test(d)||!re.test(d)||m!=null&&d in k(m)}function el(d){var m=$s(d),O=oe[m];if(typeof O!="function"||!(m in Pr.prototype))return!1;if(d===O)return!0;var C=yd(O);return!!C&&d===C[0]}(Rs&&Mo(new Rs(new ArrayBuffer(1)))!=ze||ml&&Mo(new ml)!=ce||Lc&&Mo(Lc.resolve())!=Oe||Ku&&Mo(new Ku)!=Re||hu&&Mo(new hu)!=Pe)&&(Mo=function(d){var m=Oo(d),O=m==_e?d.constructor:p,C=O?Tu(O):"";if(C)switch(C){case Gv:return ze;case $c:return ce;case Wv:return Oe;case zv:return Re;case sh:return Pe}return m});var tl=_n?Tl:Ye;function Su(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function xl(d){return d==d&&!no(d)}function Ws(d,m){return function(O){return O!=null&&O[d]===m&&(m!==p||d in k(O))}}function tf(d,m,O){return m=Lo(m===p?d.length-1:m,0),function(){for(var C=arguments,V=-1,ee=Lo(C.length-m,0),pe=fn(ee);++V<ee;)pe[V]=C[m+V];V=-1;for(var we=fn(m+1);++V<m;)we[V]=C[V];return we[m]=O(pe),io(d,this,we)}}function Au(d,m){return m.length<2?d:gl(d,Da(m,0,-1))}function zs(d,m){for(var O=d.length,C=Ui(m.length,O),V=mi(d);C--;){var ee=m[C];d[C]=ao(ee,O)?V[ee]:p}return d}function Dt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var yp=mp(Wc),ns=Yd||function(d,m){return Io.setTimeout(d,m)},nf=mp(Xv);function md(d,m,O){var C=m+"";return nf(d,function(V,ee){var pe=ee.length;if(!pe)return V;var we=pe-1;return ee[we]=(pe>1?"& ":"")+ee[we],ee=ee.join(pe>2?", ":" "),V.replace(xe,`{
/* [wrapped with `+ee+`] */
`)}(C,function(V,ee){return Ii(W,function(pe){var we="_."+pe[0];ee&pe[1]&&!Ni(V,we)&&V.push(we)}),V.sort()}(function(V){var ee=V.match(Ke);return ee?ee[1].split(Le):[]}(C),O)))}function mp(d){var m=0,O=0;return function(){var C=qf(),V=16-(C-O);if(O=C,V>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(p,arguments)}}function Sl(d,m){var O=-1,C=d.length,V=C-1;for(m=m===p?C:m;++O<m;){var ee=ap(O,V),pe=d[ee];d[ee]=d[O],d[O]=pe}return d.length=m,d}var gp=function(d){var m=Mu(d,function(C){return O.size===500&&O.clear(),C}),O=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(Sr,function(O,C,V,ee){m.push(V?ee.replace(Yt,"$1"):C||O)}),m});function nl(d){if(typeof d=="string"||ht(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function Tu(d){if(d!=null){try{return yr.call(d)}catch{}try{return d+""}catch{}}return""}function gd(d){if(d instanceof Pr)return d.clone();var m=new Pa(d.__wrapped__,d.__chain__);return m.__actions__=mi(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var _h=xr(function(d,m){return oi(d)?Za(d,ti(m,1,oi,!0)):[]}),wh=xr(function(d,m){var O=Gi(m);return oi(O)&&(O=p),oi(d)?Za(d,ti(m,1,oi,!0),Qn(O,2)):[]}),Eh=xr(function(d,m){var O=Gi(m);return oi(O)&&(O=p),oi(d)?Za(d,ti(m,1,oi,!0),p,O):[]});function bp(d,m,O){var C=d==null?0:d.length;if(!C)return-1;var V=O==null?0:ct(O);return V<0&&(V=Lo(C+V,0)),Fi(d,Qn(m,3),V)}function _p(d,m,O){var C=d==null?0:d.length;if(!C)return-1;var V=C-1;return O!==p&&(V=ct(O),V=O<0?Lo(C+V,0):Ui(V,C-1)),Fi(d,Qn(m,3),V,!0)}function wp(d){return d!=null&&d.length?ti(d,1):[]}function Ep(d){return d&&d.length?d[0]:p}var Oh=xr(function(d){var m=Lr(d,ad);return m.length&&m[0]===d[0]?Vc(m):[]}),xh=xr(function(d){var m=Gi(d),O=Lr(d,ad);return m===Gi(O)?m=p:O.pop(),O.length&&O[0]===d[0]?Vc(O,Qn(m,2)):[]}),Sh=xr(function(d){var m=Gi(d),O=Lr(d,ad);return(m=typeof m=="function"?m:p)&&O.pop(),O.length&&O[0]===d[0]?Vc(O,p,m):[]});function Gi(d){var m=d==null?0:d.length;return m?d[m-1]:p}var rs=xr(rf);function rf(d,m){return d&&d.length&&m&&m.length?ip(d,m):d}var la=Ol(function(d,m){var O=d==null?0:d.length,C=Bc(d,m);return Is(d,Lr(m,function(V){return ao(V,O)?+V:V}).sort(Xc)),C});function Ca(d){return d==null?d:Vv.call(d)}var bd=xr(function(d){return bu(ti(d,1,oi,!0))}),Wi=xr(function(d){var m=Gi(d);return oi(m)&&(m=p),bu(ti(d,1,oi,!0),Qn(m,2))}),of=xr(function(d){var m=Gi(d);return m=typeof m=="function"?m:p,bu(ti(d,1,oi,!0),p,m)});function os(d){if(!d||!d.length)return[];var m=0;return d=Li(d,function(O){if(oi(O))return m=Lo(O.length,m),!0}),Ll(m,function(O){return Lr(d,$i(O))})}function Hs(d,m){if(!d||!d.length)return[];var O=os(d);return m==null?O:Lr(O,function(C){return io(m,p,C)})}var af=xr(function(d,m){return oi(d)?Za(d,m):[]}),lf=xr(function(d){return Hc(Li(d,oi))}),Xs=xr(function(d){var m=Gi(d);return oi(m)&&(m=p),Hc(Li(d,oi),Qn(m,2))}),qs=xr(function(d){var m=Gi(d);return m=typeof m=="function"?m:p,Hc(Li(d,oi),p,m)}),is=xr(os),Kl=xr(function(d){var m=d.length,O=m>1?d[m-1]:p;return O=typeof O=="function"?(d.pop(),O):p,Hs(d,O)});function ni(d){var m=oe(d);return m.__chain__=!0,m}function uf(d,m){return m(d)}var sf=Ol(function(d){var m=d.length,O=m?d[0]:0,C=this.__wrapped__,V=function(ee){return Bc(ee,d)};return!(m>1||this.__actions__.length)&&C instanceof Pr&&ao(O)?((C=C.slice(O,+O+(m?1:0))).__actions__.push({func:uf,args:[V],thisArg:p}),new Pa(C,this.__chain__).thru(function(ee){return m&&!ee.length&&ee.push(p),ee})):this.thru(V)}),Zl=Xl(function(d,m,O){ln.call(d,O)?++d[O]:Ka(d,O,1)}),Op=cd(bp),zi=cd(_p);function ri(d,m){return(mr(d)?Ii:go)(d,Qn(m,3))}function Ah(d,m){return(mr(d)?kc:dh)(d,Qn(m,3))}var ja=Xl(function(d,m,O){ln.call(d,O)?d[O].push(m):Ka(d,O,[m])}),$n=xr(function(d,m,O){var C=-1,V=typeof m=="function",ee=sa(d)?fn(d.length):[];return go(d,function(pe){ee[++C]=V?io(m,pe,O):Vi(pe,m,O)}),ee}),_d=Xl(function(d,m,O){Ka(d,O,m)});function as(d,m){return(mr(d)?Lr:_a)(d,Qn(m,3))}var wd=Xl(function(d,m,O){d[O?0:1].push(m)},function(){return[[],[]]}),Th=xr(function(d,m){if(d==null)return[];var O=m.length;return O>1&&Bo(d,m[0],m[1])?m=[]:O>2&&Bo(m[0],m[1],m[2])&&(m=[m[0]]),vh(d,ti(m,1),[])}),Ys=lh||function(){return Io.Date.now()};function Mh(d,m,O){return m=O?p:m,m=d&&m==null?d.length:m,Ja(d,A,p,p,p,p,m)}function rl(d,m){var O;if(typeof m!="function")throw new me(g);return d=ct(d),function(){return--d>0&&(O=m.apply(this,arguments)),d<=1&&(m=p),O}}var Ks=xr(function(d,m,O){var C=1;if(O.length){var V=ra(O,ql(Ks));C|=x}return Ja(d,C,m,O,V)}),ls=xr(function(d,m,O){var C=3;if(O.length){var V=ra(O,ql(ls));C|=x}return Ja(m,C,d,O,V)});function ol(d,m,O){var C,V,ee,pe,we,Ue,vt=0,wt=!1,Vt=!1,Tn=!0;if(typeof d!="function")throw new me(g);function On(ar){var or=C,jr=V;return C=V=p,vt=ar,pe=d.apply(jr,or)}function Yn(ar){return vt=ar,we=ns(Qt,m),wt?On(ar):pe}function Pt(ar){var or=ar-Ue;return Ue===p||or>=m||or<0||Vt&&ar-vt>=ee}function Qt(){var ar=Ys();if(Pt(ar))return dr(ar);we=ns(Qt,function(or){var jr=m-(or-Ue);return Vt?Ui(jr,ee-(or-vt)):jr}(ar))}function dr(ar){return we=p,Tn&&C?On(ar):(C=V=p,pe)}function bn(){var ar=Ys(),or=Pt(ar);if(C=arguments,V=this,Ue=ar,or){if(we===p)return Yn(Ue);if(Vt)return cp(we),we=ns(Qt,m),On(Ue)}return we===p&&(we=ns(Qt,m)),pe}return m=Ut(m)||0,no(O)&&(wt=!!O.leading,ee=(Vt="maxWait"in O)?Lo(Ut(O.maxWait)||0,m):ee,Tn="trailing"in O?!!O.trailing:Tn),bn.cancel=function(){we!==p&&cp(we),vt=0,C=Ue=V=we=p},bn.flush=function(){return we===p?pe:dr(Ys())},bn}var kh=xr(function(d,m){return Qd(d,1,m)}),xp=xr(function(d,m,O){return Qd(d,Ut(m)||0,O)});function Mu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new me(g);var O=function(){var C=arguments,V=m?m.apply(this,C):C[0],ee=O.cache;if(ee.has(V))return ee.get(V);var pe=d.apply(this,C);return O.cache=ee.set(V,pe)||ee,pe};return O.cache=new(Mu.Cache||Ya),O}function Al(d){if(typeof d!="function")throw new me(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}Mu.Cache=Ya;var Hi=bh(function(d,m){var O=(m=m.length==1&&mr(m[0])?Lr(m[0],po(Qn())):Lr(ti(m,1),po(Qn()))).length;return xr(function(C){for(var V=-1,ee=Ui(C.length,O);++V<ee;)C[V]=m[V].call(this,C[V]);return io(d,this,C)})}),Gn=xr(function(d,m){var O=ra(m,ql(Gn));return Ja(d,x,p,m,O)}),ko=xr(function(d,m){var O=ra(m,ql(ko));return Ja(d,P,p,m,O)}),Ci=Ol(function(d,m){return Ja(d,M,p,p,p,m)});function ua(d,m){return d===m||d!=d&&m!=m}var Yv=Fs(To),Ph=Fs(function(d,m){return d>=m}),ku=ed(function(){return arguments}())?ed:function(d){return Po(d)&&ln.call(d,"callee")&&!ei.call(d,"callee")},mr=fn.isArray,Nh=Tc?po(Tc):function(d){return Po(d)&&Oo(d)==Xe};function sa(d){return d!=null&&Jl(d.length)&&!Tl(d)}function oi(d){return Po(d)&&sa(d)}var Ia=uh||Ye,Kv=Vf?po(Vf):function(d){return Po(d)&&Oo(d)==L};function cf(d){if(!Po(d))return!1;var m=Oo(d);return m==H||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!B(d)}function Tl(d){if(!no(d))return!1;var m=Oo(d);return m==K||m==Y||m=="[object AsyncFunction]"||m=="[object Proxy]"}function Sp(d){return typeof d=="number"&&d==ct(d)}function Jl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=D}function no(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function Po(d){return d!=null&&typeof d=="object"}var xi=Mc?po(Mc):function(d){return Po(d)&&Mo(d)==ce};function ff(d){return typeof d=="number"||Po(d)&&Oo(d)==Ne}function B(d){if(!Po(d)||Oo(d)!=_e)return!1;var m=Ha(d);if(m===null)return!0;var O=ln.call(m,"constructor")&&m.constructor;return typeof O=="function"&&O instanceof O&&yr.call(O)==ia}var ie=ji?po(ji):function(d){return Po(d)&&Oo(d)==ke},be=si?po(si):function(d){return Po(d)&&Mo(d)==Re};function rt(d){return typeof d=="string"||!mr(d)&&Po(d)&&Oo(d)==ue}function ht(d){return typeof d=="symbol"||Po(d)&&Oo(d)==ve}var et=na?po(na):function(d){return Po(d)&&Jl(d.length)&&!!Hr[Oo(d)]},st=Fs(bl),Nt=Fs(function(d,m){return d<=m});function It(d){if(!d)return[];if(sa(d))return rt(d)?Zi(d):mi(d);if(Xa&&d[Xa])return function(O){for(var C,V=[];!(C=O.next()).done;)V.push(C.value);return V}(d[Xa]());var m=Mo(d);return(m==ce?Qo:m==Re?ma:gr)(d)}function Ct(d){return d?(d=Ut(d))===I||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function ct(d){var m=Ct(d),O=m%1;return m==m?O?m-O:m:0}function Gt(d){return d?yu(ct(d),0,G):0}function Ut(d){if(typeof d=="number")return d;if(ht(d))return $;if(no(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=no(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=ka(d);var O=wi.test(d);return O||Jo.test(d)?ha(d.slice(2),O?2:8):ui.test(d)?$:+d}function Rt(d){return _l(d,Mt(d))}function Et(d){return d==null?"":aa(d)}var qe=Eu(function(d,m){if(Su(m)||sa(m))_l(m,Lt(m),d);else for(var O in m)ln.call(m,O)&&Fo(d,O,m[O])}),lt=Eu(function(d,m){_l(m,Mt(m),d)}),Ft=Eu(function(d,m,O,C){_l(m,Mt(m),d,C)}),Kt=Eu(function(d,m,O,C){_l(m,Lt(m),d,C)}),At=Ol(Bc),Jt=xr(function(d,m){d=k(d);var O=-1,C=m.length,V=C>2?m[2]:p;for(V&&Bo(m[0],m[1],V)&&(C=1);++O<C;)for(var ee=m[O],pe=Mt(ee),we=-1,Ue=pe.length;++we<Ue;){var vt=pe[we],wt=d[vt];(wt===p||ua(wt,Ht[vt])&&!ln.call(d,vt))&&(d[vt]=ee[vt])}return d}),Tt=xr(function(d){return d.push(p,hp),io(Cn,p,d)});function Wt(d,m,O){var C=d==null?p:gl(d,m);return C===p?O:C}function Ot(d,m){return d!=null&&Gs(d,m,np)}var Xt=dp(function(d,m,O){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),d[m]=O},Nr(Hn)),kn=dp(function(d,m,O){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),ln.call(d,m)?d[m].push(O):d[m]=[O]},Qn),zn=xr(Vi);function Lt(d){return sa(d)?Zf(d):Ra(d)}function Mt(d){return sa(d)?Zf(d,!0):ph(d)}var xt=Eu(function(d,m,O){td(d,m,O)}),Cn=Eu(function(d,m,O,C){td(d,m,O,C)}),nr=Ol(function(d,m){var O={};if(d==null)return O;var C=!1;m=Lr(m,function(ee){return ee=_u(ee,d),C||(C=ee.length>1),ee}),_l(d,vd(d),O),C&&(O=ba(O,7,vp));for(var V=m.length;V--;)od(O,m[V]);return O}),un=Ol(function(d,m){return d==null?{}:function(O,C){return yh(O,C,function(V,ee){return Ot(O,ee)})}(d,m)});function er(d,m){if(d==null)return{};var O=Lr(vd(d),function(C){return[C]});return m=Qn(m),yh(d,O,function(C,V){return m(C,V[0])})}var Wn=pd(Lt),rr=pd(Mt);function gr(d){return d==null?[]:Hu(d,Lt(d))}var No=wl(function(d,m,O){return m=m.toLowerCase(),d+(O?Uo(m):m)});function Uo(d){return ii(Et(d).toLowerCase())}function cr(d){return(d=Et(d))&&d.replace(Un,Dc).replace(pl,"")}var zo=wl(function(d,m,O){return d+(O?"-":"")+m.toLowerCase()}),ro=wl(function(d,m,O){return d+(O?" ":"")+m.toLowerCase()}),Ro=sd("toLowerCase"),Vo=wl(function(d,m,O){return d+(O?"_":"")+m.toLowerCase()}),So=wl(function(d,m,O){return d+(O?" ":"")+ii(m)}),bo=wl(function(d,m,O){return d+(O?" ":"")+m.toUpperCase()}),ii=sd("toUpperCase");function Ao(d,m,O){return d=Et(d),(m=O?p:m)===p?function(C){return Ac.test(C)}(d)?function(C){return C.match(Ss)||[]}(d):function(C){return C.match(at)||[]}(d):d.match(m)||[]}var Jn=xr(function(d,m){try{return io(d,p,m)}catch(O){return cf(O)?O:new kr(O)}}),di=Ol(function(d,m){return Ii(m,function(O){O=nl(O),Ka(d,O,Ks(d[O],d))}),d});function Nr(d){return function(){return d}}var Dn=qc(),fr=qc(!0);function Hn(d){return d}function fo(d){return zl(typeof d=="function"?d:ba(d,1))}var La=xr(function(d,m){return function(O){return Vi(O,d,m)}}),Ql=xr(function(d,m){return function(O){return Vi(d,O,m)}});function ye(d,m,O){var C=Lt(m),V=Uc(m,C);O!=null||no(m)&&(V.length||!C.length)||(O=m,m=d,d=this,V=Uc(m,Lt(m)));var ee=!(no(O)&&"chain"in O&&!O.chain),pe=Tl(d);return Ii(V,function(we){var Ue=m[we];d[we]=Ue,pe&&(d.prototype[we]=function(){var vt=this.__chain__;if(ee||vt){var wt=d(this.__wrapped__),Vt=wt.__actions__=mi(this.__actions__);return Vt.push({func:Ue,args:arguments,thisArg:d}),wt.__chain__=vt,wt}return Ue.apply(d,ci([this.value()],arguments))})}),d}function ot(){}var Qe=fd(Lr),tn=fd(Wf),hr=fd(Nc);function se(d){return Yl(d)?$i(nl(d)):function(m){return function(O){return gl(O,m)}}(d)}var te=El(),Te=El(!0);function We(){return[]}function Ye(){return!1}var De=Ls(function(d,m){return d+m},0),Me=Zc("ceil"),Be=Ls(function(d,m){return d/m},1),de=Zc("floor"),Ee,fe=Ls(function(d,m){return d*m},1),Ge=Zc("round"),Ze=Ls(function(d,m){return d-m},0);return oe.after=function(d,m){if(typeof m!="function")throw new me(g);return d=ct(d),function(){if(--d<1)return m.apply(this,arguments)}},oe.ary=Mh,oe.assign=qe,oe.assignIn=lt,oe.assignInWith=Ft,oe.assignWith=Kt,oe.at=At,oe.before=rl,oe.bind=Ks,oe.bindAll=di,oe.bindKey=ls,oe.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return mr(d)?d:[d]},oe.chain=ni,oe.chunk=function(d,m,O){m=(O?Bo(d,m,O):m===p)?1:Lo(ct(m),0);var C=d==null?0:d.length;if(!C||m<1)return[];for(var V=0,ee=0,pe=fn(jc(C/m));V<C;)pe[ee++]=Da(d,V,V+=m);return pe},oe.compact=function(d){for(var m=-1,O=d==null?0:d.length,C=0,V=[];++m<O;){var ee=d[m];ee&&(V[C++]=ee)}return V},oe.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),O=arguments[0],C=d;C--;)m[C-1]=arguments[C];return ci(mr(O)?mi(O):[O],ti(m,1))},oe.cond=function(d){var m=d==null?0:d.length,O=Qn();return d=m?Lr(d,function(C){if(typeof C[1]!="function")throw new me(g);return[O(C[0]),C[1]]}):[],xr(function(C){for(var V=-1;++V<m;){var ee=d[V];if(io(ee[0],this,C))return io(ee[1],this,C)}})},oe.conforms=function(d){return function(m){var O=Lt(m);return function(C){return Jd(C,m,O)}}(ba(d,1))},oe.constant=Nr,oe.countBy=Zl,oe.create=function(d,m){var O=Zu(d);return m==null?O:Wl(O,m)},oe.curry=function d(m,O,C){var V=Ja(m,8,p,p,p,p,p,O=C?p:O);return V.placeholder=d.placeholder,V},oe.curryRight=function d(m,O,C){var V=Ja(m,E,p,p,p,p,p,O=C?p:O);return V.placeholder=d.placeholder,V},oe.debounce=ol,oe.defaults=Jt,oe.defaultsDeep=Tt,oe.defer=kh,oe.delay=xp,oe.difference=_h,oe.differenceBy=wh,oe.differenceWith=Eh,oe.drop=function(d,m,O){var C=d==null?0:d.length;return C?Da(d,(m=O||m===p?1:ct(m))<0?0:m,C):[]},oe.dropRight=function(d,m,O){var C=d==null?0:d.length;return C?Da(d,0,(m=C-(m=O||m===p?1:ct(m)))<0?0:m):[]},oe.dropRightWhile=function(d,m){return d&&d.length?zc(d,Qn(m,3),!0,!0):[]},oe.dropWhile=function(d,m){return d&&d.length?zc(d,Qn(m,3),!0):[]},oe.fill=function(d,m,O,C){var V=d==null?0:d.length;return V?(O&&typeof O!="number"&&Bo(d,m,O)&&(O=0,C=V),function(ee,pe,we,Ue){var vt=ee.length;for((we=ct(we))<0&&(we=-we>vt?0:vt+we),(Ue=Ue===p||Ue>vt?vt:ct(Ue))<0&&(Ue+=vt),Ue=we>Ue?0:Gt(Ue);we<Ue;)ee[we++]=pe;return ee}(d,m,O,C)):[]},oe.filter=function(d,m){return(mr(d)?Li:Xr)(d,Qn(m,3))},oe.flatMap=function(d,m){return ti(as(d,m),1)},oe.flatMapDeep=function(d,m){return ti(as(d,m),I)},oe.flatMapDepth=function(d,m,O){return O=O===p?1:ct(O),ti(as(d,m),O)},oe.flatten=wp,oe.flattenDeep=function(d){return d!=null&&d.length?ti(d,I):[]},oe.flattenDepth=function(d,m){return d!=null&&d.length?ti(d,m=m===p?1:ct(m)):[]},oe.flip=function(d){return Ja(d,512)},oe.flow=Dn,oe.flowRight=fr,oe.fromPairs=function(d){for(var m=-1,O=d==null?0:d.length,C={};++m<O;){var V=d[m];C[V[0]]=V[1]}return C},oe.functions=function(d){return d==null?[]:Uc(d,Lt(d))},oe.functionsIn=function(d){return d==null?[]:Uc(d,Mt(d))},oe.groupBy=ja,oe.initial=function(d){return d!=null&&d.length?Da(d,0,-1):[]},oe.intersection=Oh,oe.intersectionBy=xh,oe.intersectionWith=Sh,oe.invert=Xt,oe.invertBy=kn,oe.invokeMap=$n,oe.iteratee=fo,oe.keyBy=_d,oe.keys=Lt,oe.keysIn=Mt,oe.map=as,oe.mapKeys=function(d,m){var O={};return m=Qn(m,3),Rn(d,function(C,V,ee){Ka(O,m(C,V,ee),C)}),O},oe.mapValues=function(d,m){var O={};return m=Qn(m,3),Rn(d,function(C,V,ee){Ka(O,V,m(C,V,ee))}),O},oe.matches=function(d){return rp(ba(d,1))},oe.matchesProperty=function(d,m){return op(d,ba(m,1))},oe.memoize=Mu,oe.merge=xt,oe.mergeWith=Cn,oe.method=La,oe.methodOf=Ql,oe.mixin=ye,oe.negate=Al,oe.nthArg=function(d){return d=ct(d),xr(function(m){return hh(m,d)})},oe.omit=nr,oe.omitBy=function(d,m){return er(d,Al(Qn(m)))},oe.once=function(d){return rl(2,d)},oe.orderBy=function(d,m,O,C){return d==null?[]:(mr(m)||(m=m==null?[]:[m]),mr(O=C?p:O)||(O=O==null?[]:[O]),vh(d,m,O))},oe.over=Qe,oe.overArgs=Hi,oe.overEvery=tn,oe.overSome=hr,oe.partial=Gn,oe.partialRight=ko,oe.partition=wd,oe.pick=un,oe.pickBy=er,oe.property=se,oe.propertyOf=function(d){return function(m){return d==null?p:gl(d,m)}},oe.pull=rs,oe.pullAll=rf,oe.pullAllBy=function(d,m,O){return d&&d.length&&m&&m.length?ip(d,m,Qn(O,2)):d},oe.pullAllWith=function(d,m,O){return d&&d.length&&m&&m.length?ip(d,m,p,O):d},oe.pullAt=la,oe.range=te,oe.rangeRight=Te,oe.rearg=Ci,oe.reject=function(d,m){return(mr(d)?Li:Xr)(d,Al(Qn(m,3)))},oe.remove=function(d,m){var O=[];if(!d||!d.length)return O;var C=-1,V=[],ee=d.length;for(m=Qn(m,3);++C<ee;){var pe=d[C];m(pe,C,d)&&(O.push(pe),V.push(C))}return Is(d,V),O},oe.rest=function(d,m){if(typeof d!="function")throw new me(g);return xr(d,m=m===p?m:ct(m))},oe.reverse=Ca,oe.sampleSize=function(d,m,O){return m=(O?Bo(d,m,O):m===p)?1:ct(m),(mr(d)?Kd:lp)(d,m)},oe.set=function(d,m,O){return d==null?d:gu(d,m,O)},oe.setWith=function(d,m,O,C){return C=typeof C=="function"?C:p,d==null?d:gu(d,m,O,C)},oe.shuffle=function(d){return(mr(d)?fh:qv)(d)},oe.slice=function(d,m,O){var C=d==null?0:d.length;return C?(O&&typeof O!="number"&&Bo(d,m,O)?(m=0,O=C):(m=m==null?0:ct(m),O=O===p?C:ct(O)),Da(d,m,O)):[]},oe.sortBy=Th,oe.sortedUniq=function(d){return d&&d.length?mh(d):[]},oe.sortedUniqBy=function(d,m){return d&&d.length?mh(d,Qn(m,2)):[]},oe.split=function(d,m,O){return O&&typeof O!="number"&&Bo(d,m,O)&&(m=O=p),(O=O===p?G:O>>>0)?(d=Et(d))&&(typeof m=="string"||m!=null&&!ie(m))&&!(m=aa(m))&&za(d)?wu(Zi(d),0,O):d.split(m,O):[]},oe.spread=function(d,m){if(typeof d!="function")throw new me(g);return m=m==null?0:Lo(ct(m),0),xr(function(O){var C=O[m],V=wu(O,0,m);return C&&ci(V,C),io(d,this,V)})},oe.tail=function(d){var m=d==null?0:d.length;return m?Da(d,1,m):[]},oe.take=function(d,m,O){return d&&d.length?Da(d,0,(m=O||m===p?1:ct(m))<0?0:m):[]},oe.takeRight=function(d,m,O){var C=d==null?0:d.length;return C?Da(d,(m=C-(m=O||m===p?1:ct(m)))<0?0:m,C):[]},oe.takeRightWhile=function(d,m){return d&&d.length?zc(d,Qn(m,3),!1,!0):[]},oe.takeWhile=function(d,m){return d&&d.length?zc(d,Qn(m,3)):[]},oe.tap=function(d,m){return m(d),d},oe.throttle=function(d,m,O){var C=!0,V=!0;if(typeof d!="function")throw new me(g);return no(O)&&(C="leading"in O?!!O.leading:C,V="trailing"in O?!!O.trailing:V),ol(d,m,{leading:C,maxWait:m,trailing:V})},oe.thru=uf,oe.toArray=It,oe.toPairs=Wn,oe.toPairsIn=rr,oe.toPath=function(d){return mr(d)?Lr(d,nl):ht(d)?[d]:mi(gp(Et(d)))},oe.toPlainObject=Rt,oe.transform=function(d,m,O){var C=mr(d),V=C||Ia(d)||et(d);if(m=Qn(m,4),O==null){var ee=d&&d.constructor;O=V?C?new ee:[]:no(d)&&Tl(ee)?Zu(Ha(d)):{}}return(V?Ii:Rn)(d,function(pe,we,Ue){return m(O,pe,we,Ue)}),O},oe.unary=function(d){return Mh(d,1)},oe.union=bd,oe.unionBy=Wi,oe.unionWith=of,oe.uniq=function(d){return d&&d.length?bu(d):[]},oe.uniqBy=function(d,m){return d&&d.length?bu(d,Qn(m,2)):[]},oe.uniqWith=function(d,m){return m=typeof m=="function"?m:p,d&&d.length?bu(d,p,m):[]},oe.unset=function(d,m){return d==null||od(d,m)},oe.unzip=os,oe.unzipWith=Hs,oe.update=function(d,m,O){return d==null?d:Ju(d,m,ld(O))},oe.updateWith=function(d,m,O,C){return C=typeof C=="function"?C:p,d==null?d:Ju(d,m,ld(O),C)},oe.values=gr,oe.valuesIn=function(d){return d==null?[]:Hu(d,Mt(d))},oe.without=af,oe.words=Ao,oe.wrap=function(d,m){return Gn(ld(m),d)},oe.xor=lf,oe.xorBy=Xs,oe.xorWith=qs,oe.zip=is,oe.zipObject=function(d,m){return id(d||[],m||[],Fo)},oe.zipObjectDeep=function(d,m){return id(d||[],m||[],gu)},oe.zipWith=Kl,oe.entries=Wn,oe.entriesIn=rr,oe.extend=lt,oe.extendWith=Ft,ye(oe,oe),oe.add=De,oe.attempt=Jn,oe.camelCase=No,oe.capitalize=Uo,oe.ceil=Me,oe.clamp=function(d,m,O){return O===p&&(O=m,m=p),O!==p&&(O=(O=Ut(O))==O?O:0),m!==p&&(m=(m=Ut(m))==m?m:0),yu(Ut(d),m,O)},oe.clone=function(d){return ba(d,4)},oe.cloneDeep=function(d){return ba(d,5)},oe.cloneDeepWith=function(d,m){return ba(d,5,m=typeof m=="function"?m:p)},oe.cloneWith=function(d,m){return ba(d,4,m=typeof m=="function"?m:p)},oe.conformsTo=function(d,m){return m==null||Jd(d,m,Lt(m))},oe.deburr=cr,oe.defaultTo=function(d,m){return d==null||d!=d?m:d},oe.divide=Be,oe.endsWith=function(d,m,O){d=Et(d),m=aa(m);var C=d.length,V=O=O===p?C:yu(ct(O),0,C);return(O-=m.length)>=0&&d.slice(O,V)==m},oe.eq=ua,oe.escape=function(d){return(d=Et(d))&&xn.test(d)?d.replace(hn,Wo):d},oe.escapeRegExp=function(d){return(d=Et(d))&&oo.test(d)?d.replace(Ur,"\\$&"):d},oe.every=function(d,m,O){var C=mr(d)?Wf:ep;return O&&Bo(d,m,O)&&(m=p),C(d,Qn(m,3))},oe.find=Op,oe.findIndex=bp,oe.findKey=function(d,m){return Ga(d,Qn(m,3),Rn)},oe.findLast=zi,oe.findLastIndex=_p,oe.findLastKey=function(d,m){return Ga(d,Qn(m,3),co)},oe.floor=de,oe.forEach=ri,oe.forEachRight=Ah,oe.forIn=function(d,m){return d==null?d:Or(d,Qn(m,3),Mt)},oe.forInRight=function(d,m){return d==null?d:so(d,Qn(m,3),Mt)},oe.forOwn=function(d,m){return d&&Rn(d,Qn(m,3))},oe.forOwnRight=function(d,m){return d&&co(d,Qn(m,3))},oe.get=Wt,oe.gt=Yv,oe.gte=Ph,oe.has=function(d,m){return d!=null&&Gs(d,m,tp)},oe.hasIn=Ot,oe.head=Ep,oe.identity=Hn,oe.includes=function(d,m,O,C){d=sa(d)?d:gr(d),O=O&&!C?ct(O):0;var V=d.length;return O<0&&(O=Lo(V+O,0)),rt(d)?O<=V&&d.indexOf(m,O)>-1:!!V&&cu(d,m,O)>-1},oe.indexOf=function(d,m,O){var C=d==null?0:d.length;if(!C)return-1;var V=O==null?0:ct(O);return V<0&&(V=Lo(C+V,0)),cu(d,m,V)},oe.inRange=function(d,m,O){return m=Ct(m),O===p?(O=m,m=0):O=Ct(O),function(C,V,ee){return C>=Ui(V,ee)&&C<Lo(V,ee)}(d=Ut(d),m,O)},oe.invoke=zn,oe.isArguments=ku,oe.isArray=mr,oe.isArrayBuffer=Nh,oe.isArrayLike=sa,oe.isArrayLikeObject=oi,oe.isBoolean=function(d){return d===!0||d===!1||Po(d)&&Oo(d)==z},oe.isBuffer=Ia,oe.isDate=Kv,oe.isElement=function(d){return Po(d)&&d.nodeType===1&&!B(d)},oe.isEmpty=function(d){if(d==null)return!0;if(sa(d)&&(mr(d)||typeof d=="string"||typeof d.splice=="function"||Ia(d)||et(d)||ku(d)))return!d.length;var m=Mo(d);if(m==ce||m==Re)return!d.size;if(Su(d))return!Ra(d).length;for(var O in d)if(ln.call(d,O))return!1;return!0},oe.isEqual=function(d,m){return js(d,m)},oe.isEqualWith=function(d,m,O){var C=(O=typeof O=="function"?O:p)?O(d,m):p;return C===p?js(d,m,p,O):!!C},oe.isError=cf,oe.isFinite=function(d){return typeof d=="number"&&Yu(d)},oe.isFunction=Tl,oe.isInteger=Sp,oe.isLength=Jl,oe.isMap=xi,oe.isMatch=function(d,m){return d===m||Na(d,m,Qc(m))},oe.isMatchWith=function(d,m,O){return O=typeof O=="function"?O:p,Na(d,m,Qc(m),O)},oe.isNaN=function(d){return ff(d)&&d!=+d},oe.isNative=function(d){if(tl(d))throw new kr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return mu(d)},oe.isNil=function(d){return d==null},oe.isNull=function(d){return d===null},oe.isNumber=ff,oe.isObject=no,oe.isObjectLike=Po,oe.isPlainObject=B,oe.isRegExp=ie,oe.isSafeInteger=function(d){return Sp(d)&&d>=-9007199254740991&&d<=D},oe.isSet=be,oe.isString=rt,oe.isSymbol=ht,oe.isTypedArray=et,oe.isUndefined=function(d){return d===p},oe.isWeakMap=function(d){return Po(d)&&Mo(d)==Pe},oe.isWeakSet=function(d){return Po(d)&&Oo(d)=="[object WeakSet]"},oe.join=function(d,m){return d==null?"":Ic.call(d,m)},oe.kebabCase=zo,oe.last=Gi,oe.lastIndexOf=function(d,m,O){var C=d==null?0:d.length;if(!C)return-1;var V=C;return O!==p&&(V=(V=ct(O))<0?Lo(C+V,0):Ui(V,C-1)),m==m?function(ee,pe,we){for(var Ue=we+1;Ue--;)if(ee[Ue]===pe)return Ue;return Ue}(d,m,V):Fi(d,va,V,!0)},oe.lowerCase=ro,oe.lowerFirst=Ro,oe.lt=st,oe.lte=Nt,oe.max=function(d){return d&&d.length?$o(d,Hn,To):p},oe.maxBy=function(d,m){return d&&d.length?$o(d,Qn(m,2),To):p},oe.mean=function(d){return Mr(d,Hn)},oe.meanBy=function(d,m){return Mr(d,Qn(m,2))},oe.min=function(d){return d&&d.length?$o(d,Hn,bl):p},oe.minBy=function(d,m){return d&&d.length?$o(d,Qn(m,2),bl):p},oe.stubArray=We,oe.stubFalse=Ye,oe.stubObject=function(){return{}},oe.stubString=function(){return""},oe.stubTrue=function(){return!0},oe.multiply=fe,oe.nth=function(d,m){return d&&d.length?hh(d,ct(m)):p},oe.noConflict=function(){return Io._===this&&(Io._=Eo),this},oe.noop=ot,oe.now=Ys,oe.pad=function(d,m,O){d=Et(d);var C=(m=ct(m))?Bi(d):0;if(!m||C>=m)return d;var V=(m-C)/2;return Yc(qu(V),O)+d+Yc(jc(V),O)},oe.padEnd=function(d,m,O){d=Et(d);var C=(m=ct(m))?Bi(d):0;return m&&C<m?d+Yc(m-C,O):d},oe.padStart=function(d,m,O){d=Et(d);var C=(m=ct(m))?Bi(d):0;return m&&C<m?Yc(m-C,O)+d:d},oe.parseInt=function(d,m,O){return O||m==null?m=0:m&&(m=+m),Yf(Et(d).replace(In,""),m||0)},oe.random=function(d,m,O){if(O&&typeof O!="boolean"&&Bo(d,m,O)&&(m=O=p),O===p&&(typeof m=="boolean"?(O=m,m=p):typeof d=="boolean"&&(O=d,d=p)),d===p&&m===p?(d=0,m=1):(d=Ct(d),m===p?(m=d,d=0):m=Ct(m)),d>m){var C=d;d=m,m=C}if(O||d%1||m%1){var V=Ns();return Ui(d+V*(m-d+uu("1e-"+((V+"").length-1))),m)}return ap(d,m)},oe.reduce=function(d,m,O){var C=mr(d)?Ms:yi,V=arguments.length<3;return C(d,Qn(m,4),O,V,go)},oe.reduceRight=function(d,m,O){var C=mr(d)?zf:yi,V=arguments.length<3;return C(d,Qn(m,4),O,V,dh)},oe.repeat=function(d,m,O){return m=(O?Bo(d,m,O):m===p)?1:ct(m),Gc(Et(d),m)},oe.replace=function(){var d=arguments,m=Et(d[0]);return d.length<3?m:m.replace(d[1],d[2])},oe.result=function(d,m,O){var C=-1,V=(m=_u(m,d)).length;for(V||(V=1,d=p);++C<V;){var ee=d==null?p:d[nl(m[C])];ee===p&&(C=V,ee=O),d=Tl(ee)?ee.call(d):ee}return d},oe.round=Ge,oe.runInContext=ut,oe.sample=function(d){return(mr(d)?Jf:Hv)(d)},oe.size=function(d){if(d==null)return 0;if(sa(d))return rt(d)?Bi(d):d.length;var m=Mo(d);return m==ce||m==Re?d.size:Ra(d).length},oe.snakeCase=Vo,oe.some=function(d,m,O){var C=mr(d)?Nc:up;return O&&Bo(d,m,O)&&(m=p),C(d,Qn(m,3))},oe.sortedIndex=function(d,m){return nd(d,m)},oe.sortedIndexBy=function(d,m,O){return rd(d,m,Qn(O,2))},oe.sortedIndexOf=function(d,m){var O=d==null?0:d.length;if(O){var C=nd(d,m);if(C<O&&ua(d[C],m))return C}return-1},oe.sortedLastIndex=function(d,m){return nd(d,m,!0)},oe.sortedLastIndexBy=function(d,m,O){return rd(d,m,Qn(O,2),!0)},oe.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var O=nd(d,m,!0)-1;if(ua(d[O],m))return O}return-1},oe.startCase=So,oe.startsWith=function(d,m,O){return d=Et(d),O=O==null?0:yu(ct(O),0,d.length),m=aa(m),d.slice(O,O+m.length)==m},oe.subtract=Ze,oe.sum=function(d){return d&&d.length?fu(d,Hn):0},oe.sumBy=function(d,m){return d&&d.length?fu(d,Qn(m,2)):0},oe.template=function(d,m,O){var C=oe.templateSettings;O&&Bo(d,m,O)&&(m=p),d=Et(d),m=Ft({},m,C,pp);var V,ee,pe=Ft({},m.imports,C.imports,pp),we=Lt(pe),Ue=Hu(pe,we),vt=0,wt=m.interpolate||qn,Vt="__p += '",Tn=U((m.escape||qn).source+"|"+wt.source+"|"+(wt===Zn?Nn:qn).source+"|"+(m.evaluate||qn).source+"|$","g"),On="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$f+"]")+`
`;d.replace(Tn,function(Qt,dr,bn,ar,or,jr){return bn||(bn=ar),Vt+=d.slice(vt,jr).replace(ir,Fl),dr&&(V=!0,Vt+=`' +
__e(`+dr+`) +
'`),or&&(ee=!0,Vt+=`';
`+or+`;
__p += '`),bn&&(Vt+=`' +
((__t = (`+bn+`)) == null ? '' : __t) +
'`),vt=jr+Qt.length,Qt}),Vt+=`';
`;var Yn=ln.call(m,"variable")&&m.variable;if(Yn){if(en.test(Yn))throw new kr("Invalid `variable` option passed into `_.template`")}else Vt=`with (obj) {
`+Vt+`
}
`;Vt=(ee?Vt.replace(St,""):Vt).replace(rn,"$1").replace(mn,"$1;"),Vt="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var Pt=Jn(function(){return ho(we,On+"return "+Vt).apply(p,Ue)});if(Pt.source=Vt,cf(Pt))throw Pt;return Pt},oe.times=function(d,m){if((d=ct(d))<1||d>D)return[];var O=G,C=Ui(d,G);m=Qn(m),d-=G;for(var V=Ll(C,m);++O<d;)m(O);return V},oe.toFinite=Ct,oe.toInteger=ct,oe.toLength=Gt,oe.toLower=function(d){return Et(d).toLowerCase()},oe.toNumber=Ut,oe.toSafeInteger=function(d){return d?yu(ct(d),-9007199254740991,D):d===0?d:0},oe.toString=Et,oe.toUpper=function(d){return Et(d).toUpperCase()},oe.trim=function(d,m,O){if((d=Et(d))&&(O||m===p))return ka(d);if(!d||!(m=aa(m)))return d;var C=Zi(d),V=Zi(m);return wu(C,ya(C,V),Rc(C,V)+1).join("")},oe.trimEnd=function(d,m,O){if((d=Et(d))&&(O||m===p))return d.slice(0,fi(d)+1);if(!d||!(m=aa(m)))return d;var C=Zi(d);return wu(C,0,Rc(C,Zi(m))+1).join("")},oe.trimStart=function(d,m,O){if((d=Et(d))&&(O||m===p))return d.replace(In,"");if(!d||!(m=aa(m)))return d;var C=Zi(d);return wu(C,ya(C,Zi(m))).join("")},oe.truncate=function(d,m){var O=30,C="...";if(no(m)){var V="separator"in m?m.separator:V;O="length"in m?ct(m.length):O,C="omission"in m?aa(m.omission):C}var ee=(d=Et(d)).length;if(za(d)){var pe=Zi(d);ee=pe.length}if(O>=ee)return d;var we=O-Bi(C);if(we<1)return C;var Ue=pe?wu(pe,0,we).join(""):d.slice(0,we);if(V===p)return Ue+C;if(pe&&(we+=Ue.length-we),ie(V)){if(d.slice(we).search(V)){var vt,wt=Ue;for(V.global||(V=U(V.source,Et(_r.exec(V))+"g")),V.lastIndex=0;vt=V.exec(wt);)var Vt=vt.index;Ue=Ue.slice(0,Vt===p?we:Vt)}}else if(d.indexOf(aa(V),we)!=we){var Tn=Ue.lastIndexOf(V);Tn>-1&&(Ue=Ue.slice(0,Tn))}return Ue+C},oe.unescape=function(d){return(d=Et(d))&&ft.test(d)?d.replace(Mn,oa):d},oe.uniqueId=function(d){var m=++Gr;return Et(d)+m},oe.upperCase=bo,oe.upperFirst=ii,oe.each=ri,oe.eachRight=Ah,oe.first=Ep,ye(oe,(Ee={},Rn(oe,function(d,m){ln.call(oe.prototype,m)||(Ee[m]=d)}),Ee),{chain:!1}),oe.VERSION="4.17.21",Ii(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){oe[d].placeholder=oe}),Ii(["drop","take"],function(d,m){Pr.prototype[d]=function(O){O=O===p?1:Lo(ct(O),0);var C=this.__filtered__&&!m?new Pr(this):this.clone();return C.__filtered__?C.__takeCount__=Ui(O,C.__takeCount__):C.__views__.push({size:Ui(O,G),type:d+(C.__dir__<0?"Right":"")}),C},Pr.prototype[d+"Right"]=function(O){return this.reverse()[d](O).reverse()}}),Ii(["filter","map","takeWhile"],function(d,m){var O=m+1,C=O==1||O==3;Pr.prototype[d]=function(V){var ee=this.clone();return ee.__iteratees__.push({iteratee:Qn(V,3),type:O}),ee.__filtered__=ee.__filtered__||C,ee}}),Ii(["head","last"],function(d,m){var O="take"+(m?"Right":"");Pr.prototype[d]=function(){return this[O](1).value()[0]}}),Ii(["initial","tail"],function(d,m){var O="drop"+(m?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[O](1)}}),Pr.prototype.compact=function(){return this.filter(Hn)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=xr(function(d,m){return typeof d=="function"?new Pr(this):this.map(function(O){return Vi(O,d,m)})}),Pr.prototype.reject=function(d){return this.filter(Al(Qn(d)))},Pr.prototype.slice=function(d,m){d=ct(d);var O=this;return O.__filtered__&&(d>0||m<0)?new Pr(O):(d<0?O=O.takeRight(-d):d&&(O=O.drop(d)),m!==p&&(O=(m=ct(m))<0?O.dropRight(-m):O.take(m-d)),O)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(G)},Rn(Pr.prototype,function(d,m){var O=/^(?:filter|find|map|reject)|While$/.test(m),C=/^(?:head|last)$/.test(m),V=oe[C?"take"+(m=="last"?"Right":""):m],ee=C||/^find/.test(m);V&&(oe.prototype[m]=function(){var pe=this.__wrapped__,we=C?[1]:arguments,Ue=pe instanceof Pr,vt=we[0],wt=Ue||mr(pe),Vt=function(dr){var bn=V.apply(oe,ci([dr],we));return C&&Tn?bn[0]:bn};wt&&O&&typeof vt=="function"&&vt.length!=1&&(Ue=wt=!1);var Tn=this.__chain__,On=!!this.__actions__.length,Yn=ee&&!Tn,Pt=Ue&&!On;if(!ee&&wt){pe=Pt?pe:new Pr(this);var Qt=d.apply(pe,we);return Qt.__actions__.push({func:uf,args:[Vt],thisArg:p}),new Pa(Qt,Tn)}return Yn&&Pt?d.apply(this,we):(Qt=this.thru(Vt),Yn?C?Qt.value()[0]:Qt.value():Qt)})}),Ii(["pop","push","shift","sort","splice","unshift"],function(d){var m=He[d],O=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",C=/^(?:pop|shift)$/.test(d);oe.prototype[d]=function(){var V=arguments;if(C&&!this.__chain__){var ee=this.value();return m.apply(mr(ee)?ee:[],V)}return this[O](function(pe){return m.apply(mr(pe)?pe:[],V)})}}),Rn(Pr.prototype,function(d,m){var O=oe[m];if(O){var C=O.name+"";ln.call(vu,C)||(vu[C]=[]),vu[C].push({name:m,func:O})}}),vu[Ou(p,2).name]=[{name:"wrapper",func:p}],Pr.prototype.clone=function(){var d=new Pr(this.__wrapped__);return d.__actions__=mi(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=mi(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=mi(this.__views__),d},Pr.prototype.reverse=function(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Pr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,O=mr(d),C=m<0,V=O?d.length:0,ee=function(jr,Vn,tr){for(var Ho=-1,it=tr.length;++Ho<it;){var eu=tr[Ho],Si=eu.size;switch(eu.type){case"drop":jr+=Si;break;case"dropRight":Vn-=Si;break;case"take":Vn=Ui(Vn,jr+Si);break;case"takeRight":jr=Lo(jr,Vn-Si)}}return{start:jr,end:Vn}}(0,V,this.__views__),pe=ee.start,we=ee.end,Ue=we-pe,vt=C?we:pe-1,wt=this.__iteratees__,Vt=wt.length,Tn=0,On=Ui(Ue,this.__takeCount__);if(!O||!C&&V==Ue&&On==Ue)return gh(d,this.__actions__);var Yn=[];e:for(;Ue--&&Tn<On;){for(var Pt=-1,Qt=d[vt+=m];++Pt<Vt;){var dr=wt[Pt],bn=dr.iteratee,ar=dr.type,or=bn(Qt);if(ar==2)Qt=or;else if(!or){if(ar==1)continue e;break e}}Yn[Tn++]=Qt}return Yn},oe.prototype.at=sf,oe.prototype.chain=function(){return ni(this)},oe.prototype.commit=function(){return new Pa(this.value(),this.__chain__)},oe.prototype.next=function(){this.__values__===p&&(this.__values__=It(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?p:this.__values__[this.__index__++]}},oe.prototype.plant=function(d){for(var m,O=this;O instanceof Ul;){var C=gd(O);C.__index__=0,C.__values__=p,m?V.__wrapped__=C:m=C;var V=C;O=O.__wrapped__}return V.__wrapped__=d,m},oe.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof Pr){var m=d;return this.__actions__.length&&(m=new Pr(this)),(m=m.reverse()).__actions__.push({func:uf,args:[Ca],thisArg:p}),new Pa(m,this.__chain__)}return this.thru(Ca)},oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=function(){return gh(this.__wrapped__,this.__actions__)},oe.prototype.first=oe.prototype.head,Xa&&(oe.prototype[Xa]=function(){return this}),oe}();Io._=Ri,(v=(function(){return Ri}).call(o,r,o,c))===p||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),v=r(33),p=r(87),g=r(62),b=r(174),_=r(28),E=s.TypeError,x=_("toPrimitive");n.exports=function(P,A){if(!v(P)||p(P))return P;var M,I=g(P,x);if(I){if(A===void 0&&(A="default"),M=c(I,P,A),!v(M)||p(M))return M;throw E("Can't convert object to primitive value")}return A===void 0&&(A="number"),b(P,A)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),v=r(50),p=r(38);n.exports=function(g,b){for(var _=c(b),E=p.f,x=v.f,P=0;P<_.length;P++){var A=_[P];s(g,A)||E(g,A,x(b,A))}}},function(n,o,r){var s=r(46),c=r(15),v=r(74),p=r(112),g=r(32),b=c([].concat);n.exports=s("Reflect","ownKeys")||function(_){var E=v.f(g(_)),x=p.f;return x?b(E,x(_)):E}},function(n,o,r){var s=r(15),c=r(35),v=r(41),p=r(137).indexOf,g=r(72),b=s([].push);n.exports=function(_,E){var x,P=v(_),A=0,M=[];for(x in P)!c(g,x)&&c(P,x)&&b(M,x);for(;E.length>A;)c(P,x=E[A++])&&(~p(M,x)||b(M,x));return M}},function(n,o,r){var s=r(41),c=r(75),v=r(45),p=function(g){return function(b,_,E){var x,P=s(b),A=v(P),M=c(E,A);if(g&&_!=_){for(;A>M;)if((x=P[M++])!=x)return!0}else for(;A>M;M++)if((g||M in P)&&P[M]===_)return g||M||0;return!g&&-1}};n.exports={includes:p(!0),indexOf:p(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),v=r(74).f,p=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&s(b)=="Window"?function(_){try{return v(_)}catch{return p(g)}}(b):v(c(b))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),v=r(140),p=r(38).f;n.exports=function(g){var b=s.Symbol||(s.Symbol={});c(b,g)||p(b,g,{value:v.f(g)})}},function(n,o,r){var s,c,v,p=r(18),g=r(30),b=r(60),_=r(101),E=r(42),x=r(28),P=r(71),A=x("iterator"),M=!1;[].keys&&("next"in(v=[].keys())?(c=_(_(v)))!==Object.prototype&&(s=c):M=!0),s==null||p(function(){var I={};return s[A].call(I)!==I})?s={}:P&&(s=b(s)),g(s[A])||E(s,A,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:M}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),v=r(72),p=r(33),g=r(35),b=r(38).f,_=r(74),E=r(139),x=r(183),P=r(90),A=r(185),M=!1,I=P("meta"),D=0,$=function(W){b(W,I,{value:{objectID:"O"+D++,weakData:{}}})},G=n.exports={enable:function(){G.enable=function(){},M=!0;var W=_.f,X=c([].splice),J={};J[I]=1,W(J).length&&(_.f=function(z){for(var L=W(z),H=0,K=L.length;H<K;H++)if(L[H]===I){X(L,H,1);break}return L},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:E.f}))},fastKey:function(W,X){if(!p(W))return typeof W=="symbol"?W:(typeof W=="string"?"S":"P")+W;if(!g(W,I)){if(!x(W))return"F";if(!X)return"E";$(W)}return W[I].objectID},getWeakData:function(W,X){if(!g(W,I)){if(!x(W))return!0;if(!X)return!1;$(W)}return W[I].weakData},onFreeze:function(W){return A&&M&&x(W)&&!g(W,I)&&$(W),W}};v[I]=!0},function(n,o,r){var s=r(28),c=r(80),v=s("iterator"),p=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||p[v]===g)}},function(n,o,r){var s=r(7),c=r(34),v=r(56),p=r(32),g=r(88),b=r(118),_=s.TypeError;n.exports=function(E,x){var P=arguments.length<2?b(E):x;if(v(P))return p(c(P,E));throw _(g(E)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),v=r(62);n.exports=function(p,g,b){var _,E;c(p);try{if(!(_=v(p,"return"))){if(g==="throw")throw b;return b}_=s(_,p)}catch(x){E=!0,_=x}if(g==="throw")throw b;if(E)throw _;return c(_),b}},function(n,o,r){var s=r(30),c=r(33),v=r(102);n.exports=function(p,g,b){var _,E;return v&&s(_=g.constructor)&&_!==b&&c(E=_.prototype)&&E!==b.prototype&&v(p,E),p}},function(n,o,r){var s=r(42);n.exports=function(c,v,p){for(var g in v)s(c,g,v[g],p);return c}},function(n,o,r){var s=r(46),c=r(38),v=r(28),p=r(36),g=v("species");n.exports=function(b){var _=s(b),E=c.f;p&&_&&!_[g]&&E(_,g,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),v=r(39),p=r(44),g=s("".charAt),b=s("".charCodeAt),_=s("".slice),E=function(x){return function(P,A){var M,I,D=v(p(P)),$=c(A),G=D.length;return $<0||$>=G?x?"":void 0:(M=b(D,$))<55296||M>56319||$+1===G||(I=b(D,$+1))<56320||I>57343?x?g(D,$):M:x?_(D,$,$+2):I-56320+(M-55296<<10)+65536}};n.exports={codeAt:E(!1),charAt:E(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,o,r){var s=r(18),c=r(7).RegExp,v=s(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),p=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:p,UNSUPPORTED_Y:v}},function(n,o,r){var s=r(16),c=r(79).find,v=r(100),p="find",g=!0;p in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),v(p)},function(n,o,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(p){return c(this,p,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,o,r){var s=r(16),c=r(15),v=r(197),p=r(44),g=r(39),b=r(198),_=c("".indexOf);s({target:"String",proto:!0,forced:!b("includes")},{includes:function(E){return!!~_(g(p(this)),g(v(E)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(p){var g;return s(p)&&((g=p[v])!==void 0?!!g:c(p)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),v=r(39),p=r(162),g=s("".replace),b="["+p+"]",_=RegExp("^"+b+b+"*"),E=RegExp(b+b+"*$"),x=function(P){return function(A){var M=v(c(A));return 1&P&&(M=g(M,_,"")),2&P&&(M=g(M,E,"")),M}};n.exports={start:x(1),end:x(2),trim:x(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function g(D){if(r===setTimeout)return setTimeout(D,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(D,0);try{return r(D,0)}catch{try{return r.call(null,D,0)}catch{return r.call(this,D,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:p}catch{s=p}})();var b,_=[],E=!1,x=-1;function P(){E&&b&&(E=!1,b.length?_=b.concat(_):x=-1,_.length&&A())}function A(){if(!E){var D=g(P);E=!0;for(var $=_.length;$;){for(b=_,_=[];++x<$;)b&&b[x].run();x=-1,$=_.length}b=null,E=!1,function(G){if(s===clearTimeout)return clearTimeout(G);if((s===p||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(G);try{s(G)}catch{try{return s.call(null,G)}catch{return s.call(this,G)}}}(D)}}function M(D,$){this.fun=D,this.array=$}function I(){}c.nextTick=function(D){var $=new Array(arguments.length-1);if(arguments.length>1)for(var G=1;G<arguments.length;G++)$[G-1]=arguments[G];_.push(new M(D,$)),_.length!==1||E||g(A)},M.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=I,c.addListener=I,c.once=I,c.off=I,c.removeListener=I,c.removeAllListeners=I,c.emit=I,c.prependListener=I,c.prependOnceListener=I,c.listeners=function(D){return[]},c.binding=function(D){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(D){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(p,g){var b,_=s(p).constructor;return _===void 0||(b=s(_)[v])==null?g:c(b)}},function(n,o,r){var s=r(7),c=r(99),v=r(88),p=s.TypeError;n.exports=function(g){if(c(g))return g;throw p(v(g)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),v=r(32),p=r(94),g=r(39),b=r(44),_=r(62),E=r(124),x=r(125);c("match",function(P,A,M){return[function(I){var D=b(this),$=I==null?void 0:_(I,P);return $?s($,I,D):new RegExp(I)[P](g(D))},function(I){var D=v(this),$=g(I),G=M(A,D,$);if(G.done)return G.value;if(!D.global)return x(D,$);var W=D.unicode;D.lastIndex=0;for(var X,J=[],z=0;(X=x(D,$))!==null;){var L=g(X[0]);J[z]=L,L===""&&(D.lastIndex=E($,p(D.lastIndex),W)),z++}return z===0?null:J}]})},function(n,o,r){var s,c,v,p,g=r(7),b=r(76),_=r(64),E=r(30),x=r(35),P=r(18),A=r(138),M=r(98),I=r(91),D=r(169),$=r(128),G=g.setImmediate,W=g.clearImmediate,X=g.process,J=g.Dispatch,z=g.Function,L=g.MessageChannel,H=g.String,K=0,Y={},ce="onreadystatechange";try{s=g.location}catch{}var Ne=function(Re){if(x(Y,Re)){var ue=Y[Re];delete Y[Re],ue()}},_e=function(Re){return function(){Ne(Re)}},Oe=function(Re){Ne(Re.data)},ke=function(Re){g.postMessage(H(Re),s.protocol+"//"+s.host)};G&&W||(G=function(Re){var ue=M(arguments,1);return Y[++K]=function(){b(E(Re)?Re:z(Re),void 0,ue)},c(K),K},W=function(Re){delete Y[Re]},$?c=function(Re){X.nextTick(_e(Re))}:J&&J.now?c=function(Re){J.now(_e(Re))}:L&&!D?(p=(v=new L).port2,v.port1.onmessage=Oe,c=_(p.postMessage,p)):g.addEventListener&&E(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!P(ke)?(c=ke,g.addEventListener("message",Oe,!1)):c=ce in I("script")?function(Re){A.appendChild(I("script")).onreadystatechange=function(){A.removeChild(this),Ne(Re)}}:function(Re){setTimeout(_e(Re),0)}),n.exports={set:G,clear:W}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(v){var p,g;this.promise=new v(function(b,_){if(p!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");p=b,g=_}),this.resolve=s(p),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return X});var c=r(1);function v(L){throw new Error("[mobx-utils] "+L)}function p(L,H){H===void 0&&(H="Illegal state"),L||v(H)}var g=function(L){return L&&L!==Object.prototype&&Object.getOwnPropertyNames(L).concat(g(Object.getPrototypeOf(L))||[])},b=function(L){return function(H){var K=g(H);return K.filter(function(Y,ce){return K.indexOf(Y)===ce})}(L).filter(function(H){return H!=="constructor"&&!~H.indexOf("__")})},_="pending",E="fulfilled",x="rejected";function P(L){switch(this.state){case _:return L.pending&&L.pending(this.value);case x:return L.rejected&&L.rejected(this.value);case E:return L.fulfilled?L.fulfilled(this.value):this.value}}function A(L,H){if(p(arguments.length<=2,"fromPromise expects up to two arguments"),p(typeof L=="function"||typeof L=="object"&&L&&typeof L.then=="function","Please pass a promise or function to fromPromise"),L.isPromiseBasedObservable===!0)return L;typeof L=="function"&&(L=new Promise(L));var K=L;L.then(Object(c.k)("observableFromPromise-resolve",function(ce){K.value=ce,K.state=E}),Object(c.k)("observableFromPromise-reject",function(ce){K.value=ce,K.state=x})),K.isPromiseBasedObservable=!0,K.case=P;var Y=H&&H.state===E?H.value:void 0;return Object(c.q)(K,{value:Y,state:_},{},{deep:!1}),K}(function(L){L.reject=Object(c.k)("fromPromise.reject",function(H){var K=L(Promise.reject(H));return K.state=x,K.value=H,K}),L.resolve=Object(c.k)("fromPromise.resolve",function(H){H===void 0&&(H=void 0);var K=L(Promise.resolve(H));return K.state=E,K.value=H,K})})(A||(A={}));var M=function(L,H,K,Y){var ce,Ne=arguments.length,_e=Ne<3?H:Y===null?Y=Object.getOwnPropertyDescriptor(H,K):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_e=Reflect.decorate(L,H,K,Y);else for(var Oe=L.length-1;Oe>=0;Oe--)(ce=L[Oe])&&(_e=(Ne<3?ce(_e):Ne>3?ce(H,K,_e):ce(H,K))||_e);return Ne>3&&_e&&Object.defineProperty(H,K,_e),_e};(function(){function L(H,K){var Y=this;Object(c.G)(function(){Y.current=K,Y.subscription=H.subscribe(Y)})}L.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},L.prototype.next=function(H){this.current=H},L.prototype.complete=function(){this.dispose()},L.prototype.error=function(H){this.current=H,this.dispose()},M([c.C.ref],L.prototype,"current",void 0),M([c.k.bound],L.prototype,"next",null),M([c.k.bound],L.prototype,"complete",null),M([c.k.bound],L.prototype,"error",null)})();var I=function(){return I=Object.assign||function(L){for(var H,K=1,Y=arguments.length;K<Y;K++)for(var ce in H=arguments[K])Object.prototype.hasOwnProperty.call(H,ce)&&(L[ce]=H[ce]);return L},I.apply(this,arguments)},D=function(L,H,K,Y){var ce,Ne=arguments.length,_e=Ne<3?H:Y===null?Y=Object.getOwnPropertyDescriptor(H,K):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_e=Reflect.decorate(L,H,K,Y);else for(var Oe=L.length-1;Oe>=0;Oe--)(ce=L[Oe])&&(_e=(Ne<3?ce(_e):Ne>3?ce(H,K,_e):ce(H,K))||_e);return Ne>3&&_e&&Object.defineProperty(H,K,_e),_e},$=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function L(H){var K=this;this.model=H,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(Y){return K.localValues.has(Y)},p(Object(c.A)(H),"createViewModel expects an observable object"),b(H).forEach(function(Y){if(Y!==c.a&&Y!=="__mobxDidRunLazyInitializers"){if(p($.indexOf(Y)===-1,"The propertyname "+Y+" is reserved and cannot be used with viewModels"),Object(c.w)(H,Y)){var ce=Object(c.h)(H,Y).derivation;K.localComputedValues.set(Y,Object(c.m)(ce.bind(K)))}var Ne=Object.getOwnPropertyDescriptor(H,Y),_e=Ne?{enumerable:Ne.enumerable}:{};Object.defineProperty(K,Y,I(I({},_e),{configurable:!0,get:function(){return Object(c.w)(H,Y)?K.localComputedValues.get(Y).get():K.isPropertyDirty(Y)?K.localValues.get(Y):K.model[Y]},set:Object(c.k)(function(Oe){Oe!==K.model[Y]?K.localValues.set(Y,Oe):K.localValues.delete(Y)})}))}})}Object.defineProperty(L.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),L.prototype.submit=function(){var H=this;Object(c.B)(this.localValues).forEach(function(K){var Y=H.localValues.get(K),ce=H.model[K];Object(c.y)(ce)?ce.replace(Y):Object(c.z)(ce)?(ce.clear(),ce.merge(Y)):Object(c.v)(Y)||(H.model[K]=Y)}),this.localValues.clear()},L.prototype.reset=function(){this.localValues.clear()},L.prototype.resetProperty=function(H){this.localValues.delete(H)},D([c.m],L.prototype,"isDirty",null),D([c.m],L.prototype,"changedValues",null),D([c.k.bound],L.prototype,"submit",null),D([c.k.bound],L.prototype,"reset",null),D([c.k.bound],L.prototype,"resetProperty",null)})();function G(L){if(!L)return"ROOT";for(var H=[];L.parent;)H.push(L.path),L=L.parent;return H.reverse().join("/")}function W(L){return Object(c.A)(L)||Object(c.y)(L)||Object(c.z)(L)}function X(L,H){var K=new WeakMap;function Y(_e){var Oe=K.get(_e.object);(function(ke,Re){switch(ke.type){case"add":ce(ke.newValue,Re,ke.name);break;case"update":Ne(ke.oldValue),ce(ke.newValue,Re,ke.name||""+ke.index);break;case"remove":case"delete":Ne(ke.oldValue);break;case"splice":ke.removed.map(Ne),ke.added.forEach(function(Pe,Xe){return ce(Pe,Re,""+(ke.index+Xe))});for(var ue=ke.index+ke.addedCount;ue<ke.object.length;ue++)if(W(ke.object[ue])){var ve=K.get(ke.object[ue]);ve&&(ve.path=""+ue)}}})(_e,Oe),H(_e,G(Oe),L)}function ce(_e,Oe,ke){if(W(_e)){var Re=K.get(_e);if(Re){if(Re.parent!==Oe||Re.path!==ke)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+G(Oe)+"/"+ke+"', but it already exists at '"+G(Re.parent)+"/"+Re.path+"'")}else{var ue={parent:Oe,path:ke,dispose:Object(c.D)(_e,Y)};K.set(_e,ue),Object(c.p)(_e).forEach(function(ve){var Pe=ve[0];return ce(ve[1],ue,Pe)})}}}function Ne(_e){if(W(_e)){var Oe=K.get(_e);if(!Oe)return;K.delete(_e),Oe.dispose(),Object(c.L)(_e).forEach(Ne)}}return ce(L,void 0,""),function(){Ne(L)}}var J,z=(J=function(L,H){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,Y){K.__proto__=Y}||function(K,Y){for(var ce in Y)Y.hasOwnProperty(ce)&&(K[ce]=Y[ce])},J(L,H)},function(L,H){function K(){this.constructor=L}J(L,H),L.prototype=H===null?Object.create(H):(K.prototype=H.prototype,new K)});(function(L){function H(K,Y,ce){var Ne=ce===void 0?{}:ce,_e=Ne.name,Oe=_e===void 0?"ogm"+(1e3*Math.random()|0):_e,ke=Ne.keyToName,Re=ke===void 0?function(Pe){return""+Pe}:ke,ue=L.call(this)||this;ue._keyToName=Re,ue._groupBy=Y,ue._ogmInfoKey=Symbol("ogmInfo"+Oe),ue._base=K;for(var ve=0;ve<K.length;ve++)ue._addItem(K[ve]);return ue._disposeBaseObserver=Object(c.D)(ue._base,function(Pe){if(Pe.type==="splice")Object(c.J)(function(){for(var Xe=0,ze=Pe.removed;Xe<ze.length;Xe++){var Je=ze[Xe];ue._removeItem(Je)}for(var _t=0,kt=Pe.added;_t<kt.length;_t++){var qt=kt[_t];ue._addItem(qt)}});else{if(Pe.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ue._removeItem(Pe.oldValue),ue._addItem(Pe.newValue)})}}),ue}z(H,L),H.prototype.clear=function(){throw new Error("not supported")},H.prototype.delete=function(K){throw new Error("not supported")},H.prototype.set=function(K,Y){throw new Error("not supported")},H.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var Y=this._base[K];Y[this._ogmInfoKey].reaction(),delete Y[this._ogmInfoKey]}},H.prototype._getGroupArr=function(K){var Y=L.prototype.get.call(this,K);return Y===void 0&&(Y=Object(c.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),L.prototype.set.call(this,K,Y)),Y},H.prototype._removeFromGroupArr=function(K,Y){var ce=L.prototype.get.call(this,K);ce.length===1?L.prototype.delete.call(this,K):(Y===ce.length-1||(ce[Y]=ce[ce.length-1],ce[Y][this._ogmInfoKey].groupArrIndex=Y),ce.length--)},H.prototype._addItem=function(K){var Y=this,ce=this._groupBy(K),Ne=this._getGroupArr(ce),_e={groupByValue:ce,groupArrIndex:Ne.length,reaction:Object(c.F)(function(){return Y._groupBy(K)},function(Oe,ke){var Re=K[Y._ogmInfoKey];Y._removeFromGroupArr(Re.groupByValue,Re.groupArrIndex);var ue=Y._getGroupArr(Oe),ve=ue.length;ue.push(K),Re.groupByValue=Oe,Re.groupArrIndex=ve})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:_e}),Ne.push(K)},H.prototype._removeItem=function(K){var Y=K[this._ogmInfoKey];this._removeFromGroupArr(Y.groupByValue,Y.groupArrIndex),Y.reaction(),delete K[this._ogmInfoKey]}})(c.b),function(){function L(H,K){this.base=H,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var Y=this.closest=this.root=H,ce=0;ce<this.args.length-1&&(Y=Y.get(K[ce]));ce++)this.closest=Y;this.closestIdx=ce}return L.prototype.exists=function(){this.assertNotDisposed();var H=this.args.length;return this.closestIdx>=H-1&&this.closest.has(this.args[H-1])},L.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},L.prototype.set=function(H){this.assertNotDisposed();for(var K=this.args.length,Y=this.closest,ce=this.closestIdx;ce<K-1;ce++){var Ne=new Map;Y.set(this.args[ce],Ne),Y=Ne}this.closestIdx=K-1,this.closest=Y,Y.set(this.args[K-1],H)},L.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var H=this.args.length;this.closest.delete(this.args[H-1]);for(var K=this.root,Y=[K],ce=0;ce<H-1;ce++)K=K.get(this.args[ce]),Y.push(K);for(ce=Y.length-1;ce>0;ce--)Y[ce].size===0&&Y[ce-1].delete(this.args[ce-1]);this.isDisposed=!0},L.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},L}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,v,p){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)b[111+P]="f"+P;for(P=0;P<=9;++P)b[P+96]=P.toString();W.prototype.bind=function(X,J,z){var L=this;return X=X instanceof Array?X:[X],L._bindMultiple.call(L,X,J,z),L},W.prototype.unbind=function(X,J){return this.bind.call(this,X,function(){},J)},W.prototype.trigger=function(X,J){var z=this;return z._directMap[X+":"+J]&&z._directMap[X+":"+J]({},X),z},W.prototype.reset=function(){var X=this;return X._callbacks={},X._directMap={},X},W.prototype.stopCallback=function(X,J){if((" "+J.className+" ").indexOf(" mousetrap ")>-1||G(J,this.target))return!1;if("composedPath"in X&&typeof X.composedPath=="function"){var z=X.composedPath()[0];z!==X.target&&(J=z)}return J.tagName=="INPUT"||J.tagName=="SELECT"||J.tagName=="TEXTAREA"||J.isContentEditable},W.prototype.handleKey=function(){var X=this;return X._handleKey.apply(X,arguments)},W.addKeycodes=function(X){for(var J in X)X.hasOwnProperty(J)&&(b[J]=X[J]);g=null},W.init=function(){var X=W(v);for(var J in X)J.charAt(0)!=="_"&&(W[J]=function(z){return function(){return X[z].apply(X,arguments)}}(J))},W.init(),c.Mousetrap=W,n.exports&&(n.exports=W),(s=(function(){return W}).call(o,r,o,n))===void 0||(n.exports=s)}function A(X,J,z){X.addEventListener?X.addEventListener(J,z,!1):X.attachEvent("on"+J,z)}function M(X){if(X.type=="keypress"){var J=String.fromCharCode(X.which);return X.shiftKey||(J=J.toLowerCase()),J}return b[X.which]?b[X.which]:_[X.which]?_[X.which]:String.fromCharCode(X.which).toLowerCase()}function I(X){return X=="shift"||X=="ctrl"||X=="alt"||X=="meta"}function D(X,J,z){return z||(z=function(){if(!g)for(var L in g={},b)L>95&&L<112||b.hasOwnProperty(L)&&(g[b[L]]=L);return g}()[X]?"keydown":"keypress"),z=="keypress"&&J.length&&(z="keydown"),z}function $(X,J){var z,L,H,K=[];for(z=function(Y){return Y==="+"?["+"]:(Y=Y.replace(/\+{2}/g,"+plus")).split("+")}(X),H=0;H<z.length;++H)L=z[H],x[L]&&(L=x[L]),J&&J!="keypress"&&E[L]&&(L=E[L],K.push("shift")),I(L)&&K.push(L);return{key:L,modifiers:K,action:J=D(L,K,J)}}function G(X,J){return X!==null&&X!==v&&(X===J||G(X.parentNode,J))}function W(X){var J=this;if(X=X||v,!(J instanceof W))return new W(X);J.target=X,J._callbacks={},J._directMap={};var z,L={},H=!1,K=!1,Y=!1;function ce(ue){ue=ue||{};var ve,Pe=!1;for(ve in L)ue[ve]?Pe=!0:L[ve]=0;Pe||(Y=!1)}function Ne(ue,ve,Pe,Xe,ze,Je){var _t,kt,qt,Fe,ge=[],Ae=Pe.type;if(!J._callbacks[ue])return[];for(Ae=="keyup"&&I(ue)&&(ve=[ue]),_t=0;_t<J._callbacks[ue].length;++_t)if(kt=J._callbacks[ue][_t],(Xe||!kt.seq||L[kt.seq]==kt.level)&&Ae==kt.action&&(Ae=="keypress"&&!Pe.metaKey&&!Pe.ctrlKey||(qt=ve,Fe=kt.modifiers,qt.sort().join(",")===Fe.sort().join(",")))){var yt=!Xe&&kt.combo==ze,zt=Xe&&kt.seq==Xe&&kt.level==Je;(yt||zt)&&J._callbacks[ue].splice(_t,1),ge.push(kt)}return ge}function _e(ue,ve,Pe,Xe){J.stopCallback(ve,ve.target||ve.srcElement,Pe,Xe)||ue(ve,Pe)===!1&&(function(ze){ze.preventDefault?ze.preventDefault():ze.returnValue=!1}(ve),function(ze){ze.stopPropagation?ze.stopPropagation():ze.cancelBubble=!0}(ve))}function Oe(ue){typeof ue.which!="number"&&(ue.which=ue.keyCode);var ve=M(ue);ve&&(ue.type!="keyup"||H!==ve?J.handleKey(ve,function(Pe){var Xe=[];return Pe.shiftKey&&Xe.push("shift"),Pe.altKey&&Xe.push("alt"),Pe.ctrlKey&&Xe.push("ctrl"),Pe.metaKey&&Xe.push("meta"),Xe}(ue),ue):H=!1)}function ke(ue,ve,Pe,Xe){function ze(qt){return function(){Y=qt,++L[ue],clearTimeout(z),z=setTimeout(ce,1e3)}}function Je(qt){_e(Pe,qt,ue),Xe!=="keyup"&&(H=M(qt)),setTimeout(ce,10)}L[ue]=0;for(var _t=0;_t<ve.length;++_t){var kt=_t+1===ve.length?Je:ze(Xe||$(ve[_t+1]).action);Re(ve[_t],kt,Xe,ue,_t)}}function Re(ue,ve,Pe,Xe,ze){J._directMap[ue+":"+Pe]=ve;var Je,_t=(ue=ue.replace(/\s+/g," ")).split(" ");_t.length>1?ke(ue,_t,ve,Pe):(Je=$(ue,Pe),J._callbacks[Je.key]=J._callbacks[Je.key]||[],Ne(Je.key,Je.modifiers,{type:Je.action},Xe,ue,ze),J._callbacks[Je.key][Xe?"unshift":"push"]({callback:ve,modifiers:Je.modifiers,action:Je.action,seq:Xe,level:ze,combo:ue}))}J._handleKey=function(ue,ve,Pe){var Xe,ze=Ne(ue,ve,Pe),Je={},_t=0,kt=!1;for(Xe=0;Xe<ze.length;++Xe)ze[Xe].seq&&(_t=Math.max(_t,ze[Xe].level));for(Xe=0;Xe<ze.length;++Xe)if(ze[Xe].seq){if(ze[Xe].level!=_t)continue;kt=!0,Je[ze[Xe].seq]=1,_e(ze[Xe].callback,Pe,ze[Xe].combo,ze[Xe].seq)}else kt||_e(ze[Xe].callback,Pe,ze[Xe].combo);var qt=Pe.type=="keypress"&&K;Pe.type!=Y||I(ue)||qt||ce(Je),K=kt&&Pe.type=="keydown"},J._bindMultiple=function(ue,ve,Pe){for(var Xe=0;Xe<ue.length;++Xe)Re(ue[Xe],ve,Pe)},A(X,"keypress",Oe),A(X,"keydown",Oe),A(X,"keyup",Oe)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),v=r(30),p=r(33),g=s.TypeError;n.exports=function(b,_){var E,x;if(_==="string"&&v(E=b.toString)&&!p(x=c(E,b))||v(E=b.valueOf)&&!p(x=c(E,b))||_!=="string"&&v(E=b.toString)&&!p(x=c(E,b)))return x;throw g("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),v=r(92),p=s.WeakMap;n.exports=c(p)&&/native code/.test(v(p))},function(n,o,r){var s=r(36),c=r(38),v=r(32),p=r(41),g=r(77);n.exports=s?Object.defineProperties:function(b,_){v(b);for(var E,x=p(_),P=g(_),A=P.length,M=0;A>M;)c.f(b,E=P[M++],x[E]);return b}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),v=r(99),p=r(33),g=r(28)("species"),b=s.Array;n.exports=function(_){var E;return c(_)&&(E=_.constructor,(v(E)&&(E===b||c(E.prototype))||p(E)&&(E=E[g])===null)&&(E=void 0)),E===void 0?b:E}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),p=r(78),g=r(80),b=function(){return this};n.exports=function(_,E,x,P){var A=E+" Iterator";return _.prototype=c(s,{next:v(+!P,x)}),p(_,A,!1,!0),g[A]=b,_}},function(n,o,r){var s=r(7),c=r(30),v=s.String,p=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw p("Can't set "+v(g)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),v=r(15),p=r(95),g=r(42),b=r(144),_=r(117),E=r(119),x=r(30),P=r(33),A=r(18),M=r(120),I=r(78),D=r(148);n.exports=function($,G,W){var X=$.indexOf("Map")!==-1,J=$.indexOf("Weak")!==-1,z=X?"set":"add",L=c[$],H=L&&L.prototype,K=L,Y={},ce=function(ue){var ve=v(H[ue]);g(H,ue,ue=="add"?function(Pe){return ve(this,Pe===0?0:Pe),this}:ue=="delete"?function(Pe){return!(J&&!P(Pe))&&ve(this,Pe===0?0:Pe)}:ue=="get"?function(Pe){return J&&!P(Pe)?void 0:ve(this,Pe===0?0:Pe)}:ue=="has"?function(Pe){return!(J&&!P(Pe))&&ve(this,Pe===0?0:Pe)}:function(Pe,Xe){return ve(this,Pe===0?0:Pe,Xe),this})};if(p($,!x(L)||!(J||H.forEach&&!A(function(){new L().entries().next()}))))K=W.getConstructor(G,$,X,z),b.enable();else if(p($,!0)){var Ne=new K,_e=Ne[z](J?{}:-0,1)!=Ne,Oe=A(function(){Ne.has(1)}),ke=M(function(ue){new L(ue)}),Re=!J&&A(function(){for(var ue=new L,ve=5;ve--;)ue[z](ve,ve);return!ue.has(-0)});ke||((K=G(function(ue,ve){E(ue,H);var Pe=D(new L,ue,K);return ve!=null&&_(ve,Pe[z],{that:Pe,AS_ENTRIES:X}),Pe})).prototype=H,H.constructor=K),(Oe||Re)&&(ce("delete"),ce("has"),X&&ce("get")),(Re||_e)&&ce(z),J&&H.clear&&delete H.clear}return Y[$]=K,s({global:!0,forced:K!=L},Y),I(K,$),J||W.setStrong(K,$,X),K}},function(n,o,r){var s=r(18),c=r(33),v=r(51),p=r(184),g=Object.isExtensible,b=s(function(){});n.exports=b||p?function(_){return!!c(_)&&(!p||v(_)!="ArrayBuffer")&&(!g||g(_))}:g},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),v=r(149),p=r(64),g=r(119),b=r(117),_=r(116),E=r(150),x=r(36),P=r(144).fastKey,A=r(58),M=A.set,I=A.getterFor;n.exports={getConstructor:function(D,$,G,W){var X=D(function(K,Y){g(K,J),M(K,{type:$,index:c(null),first:void 0,last:void 0,size:0}),x||(K.size=0),Y!=null&&b(Y,K[W],{that:K,AS_ENTRIES:G})}),J=X.prototype,z=I($),L=function(K,Y,ce){var Ne,_e,Oe=z(K),ke=H(K,Y);return ke?ke.value=ce:(Oe.last=ke={index:_e=P(Y,!0),key:Y,value:ce,previous:Ne=Oe.last,next:void 0,removed:!1},Oe.first||(Oe.first=ke),Ne&&(Ne.next=ke),x?Oe.size++:K.size++,_e!=="F"&&(Oe.index[_e]=ke)),K},H=function(K,Y){var ce,Ne=z(K),_e=P(Y);if(_e!=="F")return Ne.index[_e];for(ce=Ne.first;ce;ce=ce.next)if(ce.key==Y)return ce};return v(J,{clear:function(){for(var K=z(this),Y=K.index,ce=K.first;ce;)ce.removed=!0,ce.previous&&(ce.previous=ce.previous.next=void 0),delete Y[ce.index],ce=ce.next;K.first=K.last=void 0,x?K.size=0:this.size=0},delete:function(K){var Y=this,ce=z(Y),Ne=H(Y,K);if(Ne){var _e=Ne.next,Oe=Ne.previous;delete ce.index[Ne.index],Ne.removed=!0,Oe&&(Oe.next=_e),_e&&(_e.previous=Oe),ce.first==Ne&&(ce.first=_e),ce.last==Ne&&(ce.last=Oe),x?ce.size--:Y.size--}return!!Ne},forEach:function(K){for(var Y,ce=z(this),Ne=p(K,arguments.length>1?arguments[1]:void 0);Y=Y?Y.next:ce.first;)for(Ne(Y.value,Y.key,this);Y&&Y.removed;)Y=Y.previous},has:function(K){return!!H(this,K)}}),v(J,G?{get:function(K){var Y=H(this,K);return Y&&Y.value},set:function(K,Y){return L(this,K===0?0:K,Y)}}:{add:function(K){return L(this,K=K===0?0:K,K)}}),x&&s(J,"size",{get:function(){return z(this).size}}),X},setStrong:function(D,$,G){var W=$+" Iterator",X=I($),J=I(W);_(D,$,function(z,L){M(this,{type:W,target:z,state:X(z),kind:L,last:void 0})},function(){for(var z=J(this),L=z.kind,H=z.last;H&&H.removed;)H=H.previous;return z.target&&(z.last=H=H?H.next:z.state.first)?L=="keys"?{value:H.key,done:!1}:L=="values"?{value:H.value,done:!1}:{value:[H.key,H.value],done:!1}:(z.target=void 0,{value:void 0,done:!0})},G?"entries":"values",!G,!0),E($)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),v=r(34),p=r(40),g=r(189),b=r(145),_=r(99),E=r(45),x=r(63),P=r(146),A=r(118),M=s.Array;n.exports=function(I){var D=p(I),$=_(this),G=arguments.length,W=G>1?arguments[1]:void 0,X=W!==void 0;X&&(W=c(W,G>2?arguments[2]:void 0));var J,z,L,H,K,Y,ce=A(D),Ne=0;if(!ce||this==M&&b(ce))for(J=E(D),z=$?new this(J):M(J);J>Ne;Ne++)Y=X?W(D[Ne],Ne):D[Ne],x(z,Ne,Y);else for(K=(H=P(D,ce)).next,z=$?new this:[];!(L=v(K,H)).done;Ne++)Y=X?g(H,W,[L.value,Ne],!0):L.value,x(z,Ne,Y);return z.length=Ne,z}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(v,p,g,b){try{return b?p(s(g)[0],g[1]):p(g)}catch(_){c(v,"throw",_)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),v=r(56),p=r(40),g=r(45),b=r(39),_=r(18),E=r(193),x=r(121),P=r(194),A=r(195),M=r(70),I=r(196),D=[],$=c(D.sort),G=c(D.push),W=_(function(){D.sort(void 0)}),X=_(function(){D.sort(null)}),J=x("sort"),z=!_(function(){if(M)return M<70;if(!(P&&P>3)){if(A)return!0;if(I)return I<603;var L,H,K,Y,ce="";for(L=65;L<76;L++){switch(H=String.fromCharCode(L),L){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(Y=0;Y<47;Y++)D.push({k:H+Y,v:K})}for(D.sort(function(Ne,_e){return _e.v-Ne.v}),Y=0;Y<D.length;Y++)H=D[Y].k.charAt(0),ce.charAt(ce.length-1)!==H&&(ce+=H);return ce!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:W||!X||!J||!z},{sort:function(L){L!==void 0&&v(L);var H=p(this);if(z)return L===void 0?$(H):$(H,L);var K,Y,ce=[],Ne=g(H);for(Y=0;Y<Ne;Y++)Y in H&&G(ce,H[Y]);for(E(ce,function(_e){return function(Oe,ke){return ke===void 0?-1:Oe===void 0?1:_e!==void 0?+_e(Oe,ke)||0:b(Oe)>b(ke)?1:-1}}(L)),K=ce.length,Y=0;Y<K;)H[Y]=ce[Y++];for(;Y<Ne;)delete H[Y++];return H}})},function(n,o,r){var s=r(114),c=Math.floor,v=function(b,_){var E=b.length,x=c(E/2);return E<8?p(b,_):g(b,v(s(b,0,x),_),v(s(b,x),_),_)},p=function(b,_){for(var E,x,P=b.length,A=1;A<P;){for(x=A,E=b[A];x&&_(b[x-1],E)>0;)b[x]=b[--x];x!==A++&&(b[x]=E)}return b},g=function(b,_,E,x){for(var P=_.length,A=E.length,M=0,I=0;M<P||I<A;)b[M+I]=M<P&&I<A?x(_[M],E[I])<=0?_[M++]:E[I++]:M<P?_[M++]:E[I++];return b};n.exports=v},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(p){if(c(p))throw v("The method doesn't accept regular expressions");return p}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(p){return c(function(){return!!v[p]()||"​᠎"[p]()!=="​᠎"||s&&v[p].name!==p})}},function(n,o,r){var s=r(15),c=r(40),v=Math.floor,p=s("".charAt),g=s("".replace),b=s("".slice),_=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,E=/\$([$&'`]|\d{1,2})/g;n.exports=function(x,P,A,M,I,D){var $=A+x.length,G=M.length,W=E;return I!==void 0&&(I=c(I),W=_),g(D,W,function(X,J){var z;switch(p(J,0)){case"$":return"$";case"&":return x;case"`":return b(P,0,A);case"'":return b(P,$);case"<":z=I[b(J,1,-1)];break;default:var L=+J;if(L===0)return X;if(L>G){var H=v(L/10);return H===0?X:H<=G?M[H-1]===void 0?p(J,1):M[H-1]+p(J,1):X}z=M[L-1]}return z===void 0?"":z})}},function(n,o,r){var s=r(36),c=r(15),v=r(34),p=r(18),g=r(77),b=r(112),_=r(84),E=r(40),x=r(85),P=Object.assign,A=Object.defineProperty,M=c([].concat);n.exports=!P||p(function(){if(s&&P({b:1},P(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var I={},D={},$=Symbol(),G="abcdefghijklmnopqrst";return I[$]=7,G.split("").forEach(function(W){D[W]=W}),P({},I)[$]!=7||g(P({},D)).join("")!=G})?function(I,D){for(var $=E(I),G=arguments.length,W=1,X=b.f,J=_.f;G>W;)for(var z,L=x(arguments[W++]),H=X?M(g(L),X(L)):g(L),K=H.length,Y=0;K>Y;)z=H[Y++],s&&!v(J,L,z)||($[z]=L[z]);return $}:P},function(n,o,r){var s=r(7),c=r(15),v=r(56),p=r(33),g=r(35),b=r(98),_=s.Function,E=c([].concat),x=c([].join),P={},A=function(M,I,D){if(!g(P,I)){for(var $=[],G=0;G<I;G++)$[G]="a["+G+"]";P[I]=_("C,a","return new C("+x($,",")+")")}return P[I](M,D)};n.exports=_.bind||function(M){var I=v(this),D=I.prototype,$=b(arguments,1),G=function(){var W=E($,b(arguments));return this instanceof G?A(I,W.length,W):I.apply(M,W)};return p(D)&&(G.prototype=D),G}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),v=r(39),p=/"/g,g=s("".replace);n.exports=function(b,_,E,x){var P=v(c(b)),A="<"+_;return E!==""&&(A+=" "+E+'="'+g(v(x),p,"&quot;")+'"'),A+">"+P+"</"+_+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,v,p,g=r(16),b=r(71),_=r(7),E=r(46),x=r(34),P=r(209),A=r(42),M=r(149),I=r(102),D=r(78),$=r(150),G=r(56),W=r(30),X=r(33),J=r(119),z=r(92),L=r(117),H=r(120),K=r(164),Y=r(168).set,ce=r(210),Ne=r(213),_e=r(214),Oe=r(170),ke=r(215),Re=r(58),ue=r(95),ve=r(28),Pe=r(216),Xe=r(128),ze=r(70),Je=ve("species"),_t="Promise",kt=Re.getterFor(_t),qt=Re.set,Fe=Re.getterFor(_t),ge=P&&P.prototype,Ae=P,yt=ge,zt=_.TypeError,St=_.document,rn=_.process,mn=Oe.f,Mn=mn,hn=!!(St&&St.createEvent&&_.dispatchEvent),ft=W(_.PromiseRejectionEvent),xn="unhandledrejection",Ve=!1,gn=ue(_t,function(){var Le=z(Ae),at=Le!==String(Ae);if(!at&&ze===66||b&&!yt.finally)return!0;if(ze>=51&&/native code/.test(Le))return!1;var en=new Ae(function(Nn){Nn(1)}),Yt=function(Nn){Nn(function(){},function(){})};return(en.constructor={})[Je]=Yt,!(Ve=en.then(function(){})instanceof Yt)||!at&&Pe&&!ft}),Zn=gn||!H(function(Le){Ae.all(Le).catch(function(){})}),re=function(Le){var at;return!(!X(Le)||!W(at=Le.then))&&at},Bn=function(Le,at){if(!Le.notified){Le.notified=!0;var en=Le.reactions;ce(function(){for(var Yt=Le.value,Nn=Le.state==1,_r=0;en.length>_r;){var ui,wi,Go,Jo=en[_r++],Sn=Nn?Jo.ok:Jo.fail,Un=Jo.resolve,qn=Jo.reject,ir=Jo.domain;try{Sn?(Nn||(Le.rejection===2&&In(Le),Le.rejection=1),Sn===!0?ui=Yt:(ir&&ir.enter(),ui=Sn(Yt),ir&&(ir.exit(),Go=!0)),ui===Jo.promise?qn(zt("Promise-chain cycle")):(wi=re(ui))?x(wi,ui,Un,qn):Un(ui)):qn(Yt)}catch(Qr){ir&&!Go&&ir.exit(),qn(Qr)}}Le.reactions=[],Le.notified=!1,at&&!Le.rejection&&Ur(Le)})}},Sr=function(Le,at,en){var Yt,Nn;hn?((Yt=St.createEvent("Event")).promise=at,Yt.reason=en,Yt.initEvent(Le,!1,!0),_.dispatchEvent(Yt)):Yt={promise:at,reason:en},!ft&&(Nn=_["on"+Le])?Nn(Yt):Le===xn&&_e("Unhandled promise rejection",en)},Ur=function(Le){x(Y,_,function(){var at,en=Le.facade,Yt=Le.value;if(oo(Le)&&(at=ke(function(){Xe?rn.emit("unhandledRejection",Yt,en):Sr(xn,en,Yt)}),Le.rejection=Xe||oo(Le)?2:1,at.error))throw at.value})},oo=function(Le){return Le.rejection!==1&&!Le.parent},In=function(Le){x(Y,_,function(){var at=Le.facade;Xe?rn.emit("rejectionHandled",at):Sr("rejectionhandled",at,Le.value)})},jo=function(Le,at,en){return function(Yt){Le(at,Yt,en)}},xe=function(Le,at,en){Le.done||(Le.done=!0,en&&(Le=en),Le.value=at,Le.state=2,Bn(Le,!0))},Ke=function(Le,at,en){if(!Le.done){Le.done=!0,en&&(Le=en);try{if(Le.facade===at)throw zt("Promise can't be resolved itself");var Yt=re(at);Yt?ce(function(){var Nn={done:!1};try{x(Yt,at,jo(Ke,Nn,Le),jo(xe,Nn,Le))}catch(_r){xe(Nn,_r,Le)}}):(Le.value=at,Le.state=1,Bn(Le,!1))}catch(Nn){xe({done:!1},Nn,Le)}}};if(gn&&(yt=(Ae=function(Le){J(this,yt),G(Le),x(s,this);var at=kt(this);try{Le(jo(Ke,at),jo(xe,at))}catch(en){xe(at,en)}}).prototype,(s=function(Le){qt(this,{type:_t,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=M(yt,{then:function(Le,at){var en=Fe(this),Yt=en.reactions,Nn=mn(K(this,Ae));return Nn.ok=!W(Le)||Le,Nn.fail=W(at)&&at,Nn.domain=Xe?rn.domain:void 0,en.parent=!0,Yt[Yt.length]=Nn,en.state!=0&&Bn(en,!1),Nn.promise},catch:function(Le){return this.then(void 0,Le)}}),c=function(){var Le=new s,at=kt(Le);this.promise=Le,this.resolve=jo(Ke,at),this.reject=jo(xe,at)},Oe.f=mn=function(Le){return Le===Ae||Le===v?new c(Le):Mn(Le)},!b&&W(P)&&ge!==Object.prototype)){p=ge.then,Ve||(A(ge,"then",function(Le,at){var en=this;return new Ae(function(Yt,Nn){x(p,en,Yt,Nn)}).then(Le,at)},{unsafe:!0}),A(ge,"catch",yt.catch,{unsafe:!0}));try{delete ge.constructor}catch{}I&&I(ge,yt)}g({global:!0,wrap:!0,forced:gn},{Promise:Ae}),D(Ae,_t,!1,!0),$(_t),v=E(_t),g({target:_t,stat:!0,forced:gn},{reject:function(Le){var at=mn(this);return x(at.reject,void 0,Le),at.promise}}),g({target:_t,stat:!0,forced:b||gn},{resolve:function(Le){return Ne(b&&this===v?Ae:this,Le)}}),g({target:_t,stat:!0,forced:Zn},{all:function(Le){var at=this,en=mn(at),Yt=en.resolve,Nn=en.reject,_r=ke(function(){var ui=G(at.resolve),wi=[],Go=0,Jo=1;L(Le,function(Sn){var Un=Go++,qn=!1;Jo++,x(ui,at,Sn).then(function(ir){qn||(qn=!0,wi[Un]=ir,--Jo||Yt(wi))},Nn)}),--Jo||Yt(wi)});return _r.error&&Nn(_r.value),en.promise},race:function(Le){var at=this,en=mn(at),Yt=en.reject,Nn=ke(function(){var _r=G(at.resolve);L(Le,function(ui){x(_r,at,ui).then(en.resolve,Yt)})});return Nn.error&&Yt(Nn.value),en.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,v,p,g,b,_,E,x=r(7),P=r(64),A=r(50).f,M=r(168).set,I=r(169),D=r(211),$=r(212),G=r(128),W=x.MutationObserver||x.WebKitMutationObserver,X=x.document,J=x.process,z=x.Promise,L=A(x,"queueMicrotask"),H=L&&L.value;H||(s=function(){var K,Y;for(G&&(K=J.domain)&&K.exit();c;){Y=c.fn,c=c.next;try{Y()}catch(ce){throw c?p():v=void 0,ce}}v=void 0,K&&K.enter()},I||G||$||!W||!X?!D&&z&&z.resolve?((_=z.resolve(void 0)).constructor=z,E=P(_.then,_),p=function(){E(s)}):G?p=function(){J.nextTick(s)}:(M=P(M,x),p=function(){M(s)}):(g=!0,b=X.createTextNode(""),new W(s).observe(b,{characterData:!0}),p=function(){b.data=g=!g})),n.exports=H||function(K){var Y={fn:K,next:void 0};v&&(v.next=Y),c||(c=Y,p()),v=Y}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),v=r(170);n.exports=function(p,g){if(s(p),c(g)&&g.constructor===p)return g;var b=v.f(p);return(0,b.resolve)(g),b.promise}},function(n,o,r){var s=r(7);n.exports=function(c,v){var p=s.console;p&&p.error&&(arguments.length==1?p.error(c):p.error(c,v))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),v=r(45);n.exports=function(p){for(var g=s(this),b=v(g),_=arguments.length,E=c(_>1?arguments[1]:void 0,b),x=_>2?arguments[2]:void 0,P=x===void 0?b:c(x,b);P>E;)g[E++]=p;return g}},function(n,o,r){var s=r(16),c=r(7),v=r(15),p=r(59),g=r(160),b=r(219),_=r(18),E=c.RangeError,x=c.String,P=Math.floor,A=v(b),M=v("".slice),I=v(1 .toFixed),D=function(X,J,z){return J===0?z:J%2==1?D(X,J-1,z*X):D(X*X,J/2,z)},$=function(X,J,z){for(var L=-1,H=z;++L<6;)H+=J*X[L],X[L]=H%1e7,H=P(H/1e7)},G=function(X,J){for(var z=6,L=0;--z>=0;)L+=X[z],X[z]=P(L/J),L=L%J*1e7},W=function(X){for(var J=6,z="";--J>=0;)if(z!==""||J===0||X[J]!==0){var L=x(X[J]);z=z===""?L:z+A("0",7-L.length)+L}return z};s({target:"Number",proto:!0,forced:_(function(){return I(8e-5,3)!=="0.000"||I(.9,0)!=="1"||I(1.255,2)!=="1.25"||I(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!_(function(){I({})})},{toFixed:function(X){var J,z,L,H,K=g(this),Y=p(X),ce=[0,0,0,0,0,0],Ne="",_e="0";if(Y<0||Y>20)throw E("Incorrect fraction digits");if(K!=K)return"NaN";if(K<=-1e21||K>=1e21)return x(K);if(K<0&&(Ne="-",K=-K),K>1e-21)if(z=(J=function(Oe){for(var ke=0,Re=Oe;Re>=4096;)ke+=12,Re/=4096;for(;Re>=2;)ke+=1,Re/=2;return ke}(K*D(2,69,1))-69)<0?K*D(2,-J,1):K/D(2,J,1),z*=4503599627370496,(J=52-J)>0){for($(ce,0,z),L=Y;L>=7;)$(ce,1e7,0),L-=7;for($(ce,D(10,L,1),0),L=J-1;L>=23;)G(ce,1<<23),L-=23;G(ce,1<<L),$(ce,1,1),G(ce,2),_e=W(ce)}else $(ce,0,z),$(ce,1<<-J,0),_e=W(ce)+A("0",Y);return _e=Y>0?Ne+((H=_e.length)<=Y?"0."+A("0",Y-H)+_e:M(_e,0,H-Y)+"."+M(_e,H-Y)):Ne+_e}})},function(n,o,r){var s=r(7),c=r(59),v=r(39),p=r(44),g=s.RangeError;n.exports=function(b){var _=v(p(this)),E="",x=c(b);if(x<0||x==1/0)throw g("Wrong number of repetitions");for(;x>0;(x>>>=1)&&(_+=_))1&x&&(E+=_);return E}},function(n,o,r){var s=r(36),c=r(15),v=r(77),p=r(41),g=c(r(84).f),b=c([].push),_=function(E){return function(x){for(var P,A=p(x),M=v(A),I=M.length,D=0,$=[];I>D;)P=M[D++],s&&!g(A,P)||b($,E?[P,A[P]]:A[P]);return $}};n.exports={entries:_(!0),values:_(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return ps}),r.d(o,"LogicFlow",function(){return p1}),r.d(o,"h",function(){return Ve.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return mf}),r.d(o,"RectNode",function(){return o0}),r.d(o,"CircleNode",function(){return u0}),r.d(o,"PolygonNode",function(){return p0}),r.d(o,"DiamondNode",function(){return m0}),r.d(o,"EllipseNode",function(){return E0}),r.d(o,"TextNode",function(){return S0}),r.d(o,"HtmlNode",function(){return k0}),r.d(o,"BaseEdge",function(){return sy}),r.d(o,"LineEdge",function(){return G0}),r.d(o,"PolylineEdge",function(){return q0}),r.d(o,"BezierEdge",function(){return J0}),r.d(o,"Arrow",function(){return aj}),r.d(o,"BaseEdgeModel",function(){return _d}),r.d(o,"BezierEdgeModel",function(){return c_}),r.d(o,"LineEdgeModel",function(){return Ci}),r.d(o,"PolylineEdgeModel",function(){return ff}),r.d(o,"BaseNodeModel",function(){return yf}),r.d(o,"CircleNodeModel",function(){return y_}),r.d(o,"DiamondNodeModel",function(){return w_}),r.d(o,"EllipseNodeModel",function(){return S_}),r.d(o,"PolygonNodeModel",function(){return N_}),r.d(o,"RectNodeModel",function(){return j_}),r.d(o,"TextNodeModel",function(){return $_}),r.d(o,"HtmlNodeModel",function(){return V_}),r.d(o,"EditConfigModel",function(){return Qf}),r.d(o,"GraphModel",function(){return WE}),r.d(o,"SnaplineModel",function(){return Mx}),r.d(o,"Keyboard",function(){return hS}),r.d(o,"get",function(){return hO}),r.d(o,"defaults",function(){return yO}),r.d(o,"ElementState",function(){return Xr}),r.d(o,"ModelType",function(){return Or}),r.d(o,"ElementType",function(){return so}),r.d(o,"EventType",function(){return Rn}),r.d(o,"formateAnchorConnectValidateData",function(){return Kl});var s={};r.r(s),r.d(s,"createUuid",function(){return tl}),r.d(s,"refreshGraphId",function(){return Su}),r.d(s,"StepDrag",function(){return te}),r.d(s,"setupEdgeModel",function(){return Et}),r.d(s,"isBboxOverLapping",function(){return qe}),r.d(s,"filterRepeatPoints",function(){return lt}),r.d(s,"getSimplePolyline",function(){return Ft}),r.d(s,"getExpandedBBox",function(){return Kt}),r.d(s,"pointDirection",function(){return At}),r.d(s,"getExpandedBBoxPoint",function(){return Jt}),r.d(s,"mergeBBox",function(){return Tt}),r.d(s,"getBBoxOfPoints",function(){return Wt}),r.d(s,"getPointsFromBBox",function(){return Ot}),r.d(s,"isPointOutsideBBox",function(){return Xt}),r.d(s,"getBBoxXCrossPoints",function(){return kn}),r.d(s,"getBBoxYCrossPoints",function(){return zn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return Lt}),r.d(s,"estimateDistance",function(){return Mt}),r.d(s,"costByPoints",function(){return xt}),r.d(s,"heuristicCostEstimate",function(){return Cn}),r.d(s,"rebuildPath",function(){return nr}),r.d(s,"removeClosePointFromOpenList",function(){return un}),r.d(s,"isSegmentsIntersected",function(){return er}),r.d(s,"isSegmentCrossingBBox",function(){return Wn}),r.d(s,"getNextNeighborPoints",function(){return rr}),r.d(s,"pathFinder",function(){return gr}),r.d(s,"getBoxByOriginNode",function(){return No}),r.d(s,"pointFilter",function(){return Uo}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return zo}),r.d(s,"isSegmentsInNode",function(){return ro}),r.d(s,"isSegmentsCrossNode",function(){return Ro}),r.d(s,"getCrossPointInRect",function(){return Vo}),r.d(s,"segmentDirection",function(){return So}),r.d(s,"points2PointsList",function(){return bo}),r.d(s,"getSimplePoints",function(){return ii}),r.d(s,"getBytesLength",function(){return Jn}),r.d(s,"getTextWidth",function(){return Nr}),r.d(s,"getAppendAttributes",function(){return Dn}),r.d(s,"getBezierControlPoints",function(){return fr}),r.d(s,"getBezierPoints",function(){return Hn}),r.d(s,"getEndTangent",function(){return La}),r.d(s,"getClosestPointOfPolyline",function(){return Ql}),r.d(s,"pickEdgeConfig",function(){return ye}),r.d(s,"twoPointDistance",function(){return ot}),r.d(s,"createEdgeGenerator",function(){return Qe}),r.d(s,"snapToGrid",function(){return El}),r.d(s,"getGridOffset",function(){return Fs}),r.d(s,"sampleCubic",function(){return be}),r.d(s,"getThetaOfVector",function(){return ht}),r.d(s,"degrees",function(){return et}),r.d(s,"Vector",function(){return ee}),r.d(s,"Point",function(){return pe}),r.d(s,"Matrix",function(){return Js}),r.d(s,"RotateMatrix",function(){return Mp}),r.d(s,"ScaleMatrix",function(){return Qv}),r.d(s,"TranslateMatrix",function(){return Qs});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var p=r(43),g=Object(p.b)("observerBatching");function b(a){a()}var _=!1;function E(){return _}function x(a){return Object(c.t)(a)}var P,A=1e4,M=new Set;function I(){P===void 0&&(P=setTimeout(D,1e4))}function D(){P=void 0;var a=Date.now();M.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,M.delete(i))}),M.size>0&&I()}var $=!1,G=[],W={};function X(a){return"observer"+a}function J(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=W),E();var u,h=function(N){return function(){$?G.push(N):N()}}((l.useForceUpdate||p.d)()),f=v.d.useRef(null);if(!f.current){var y=new c.c(X(i),function(){w.mounted?h():(y.dispose(),f.current=null)}),w=function(N){return{cleanAt:Date.now()+A,reaction:N}}(y);f.current=w,u=f,M.add(u),I()}var S=f.current.reaction;return v.d.useDebugValue(S,x),v.d.useEffect(function(){var N;return N=f,M.delete(N),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(X(i),function(){h()}),cleanAt:1/0},h()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(N){$=!0,G=[];try{var F=N();$=!1;var q=G.length>0?G:void 0;return v.d.useLayoutEffect(function(){q&&q.forEach(function(Q){return Q()})},[q]),F}finally{$=!1}}(function(){var N,F;if(S.track(function(){try{N=a()}catch(q){F=q}}),F)throw F;return N})}var z=function(){return z=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var h in i=arguments[l])Object.prototype.hasOwnProperty.call(i,h)&&(a[h]=i[h]);return a},z.apply(this,arguments)};function L(a,i){var l,u,h,f=z({forwardRef:!1},i),y=a.displayName||a.name,w=function(S,N){return J(function(){return a(S,N)},y)};return w.displayName=y,l=f.forwardRef?Object(v.f)(Object(v.e)(w)):Object(v.f)(w),u=a,h=l,Object.keys(u).forEach(function(S){H[S]||Object.defineProperty(h,S,Object.getOwnPropertyDescriptor(u,S))}),l.displayName=y,l}var H={$$typeof:!0,render:!0,compare:!0,type:!0};function K(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:J(u)}function Y(a,i,l,u,h){var f=i==="children"?"render":"children",y=typeof a[i]=="function",w=typeof a[f]=="function";return y&&w?new Error("MobX Observer: Do not use children and render in the same time in`"+l):y||w?null:new Error("Invalid prop `"+h+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}K.propTypes={children:Y,render:Y},K.displayName="Observer";var ce;(ce=v.g)||(ce=b),Object(c.n)({reactionScheduler:ce}),Object(p.a)()[g]=!0;var Ne=0,_e={};function Oe(a){return _e[a]||(_e[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+Ne+")";return Ne++,l}(a)),_e[a]}function ke(a,i){if(Re(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var h=0;h<l.length;h++)if(!Object.hasOwnProperty.call(i,l[h])||!Re(a[l[h]],i[l[h]]))return!1;return!0}function Re(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function ue(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var ve=Oe("patchMixins"),Pe=Oe("patchedDefinition");function Xe(a,i){for(var l=this,u=arguments.length,h=new Array(u>2?u-2:0),f=2;f<u;f++)h[f-2]=arguments[f];i.locks++;try{var y;return a!=null&&(y=a.apply(this,h)),y}finally{i.locks--,i.locks===0&&i.methods.forEach(function(w){w.apply(l,h)})}}function ze(a,i){return function(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];Xe.call.apply(Xe,[this,a,i].concat(u))}}function Je(a,i,l){var u=function(w,S){var N=w[ve]=w[ve]||{},F=N[S]=N[S]||{};return F.locks=F.locks||0,F.methods=F.methods||[],F}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var h=Object.getOwnPropertyDescriptor(a,i);if(!h||!h[Pe]){var f=a[i],y=_t(a,i,h?h.enumerable:void 0,u,f);Object.defineProperty(a,i,y)}}function _t(a,i,l,u,h){var f,y=ze(h,u);return(f={})[Pe]=!0,f.get=function(){return y},f.set=function(w){if(this===a)y=ze(w,u);else{var S=_t(this,i,l,u,w);Object.defineProperty(this,i,S)}},f.configurable=!0,f.enumerable=l,f}var kt=c.a||"$mobx",qt=Oe("isMobXReactObserver"),Fe=Oe("isUnmounted"),ge=Oe("skipRender"),Ae=Oe("isForcingUpdate");function yt(a){var i=a.prototype;if(a[qt]?zt(i):a[qt]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==v.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=rn;mn(i,"props"),mn(i,"state");var l=i.render;return i.render=function(){return St.call(this,l)},Je(i,"componentWillUnmount",function(){var u;(u=this.render[kt])===null||u===void 0||u.dispose(),this[Fe]=!0,!this.render[kt]&&zt(this)}),a}function zt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function St(a){var i=this;ue(this,ge,!1),ue(this,Ae,!1);var l=zt(this),u=a.bind(this),h=!1,f=new c.c(l+".render()",function(){if(!h&&(h=!0,i[Fe]!==!0)){var w=!0;try{ue(i,Ae,!0),i[ge]||v.a.prototype.forceUpdate.call(i),w=!1}finally{ue(i,Ae,!1),w&&f.dispose()}}});function y(){h=!1;var w=void 0,S=void 0;if(f.track(function(){try{S=Object(c.d)(!1,u)}catch(N){w=N}}),w)throw w;return S}return f.reactComponent=this,y[kt]=f,this.render=y,y.call(this)}function rn(a,i){return this.state!==i||!ke(this.props,a)}function mn(a,i){var l=Oe("reactProp_"+i+"_valueHolder"),u=Oe("reactProp_"+i+"_atomHolder");function h(){return this[u]||ue(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),h.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[Ae]||ke(this[l],f)?ue(this,l,f):(ue(this,l,f),ue(this,ge,!0),h.call(this).reportChanged(),ue(this,ge,!1))}})}var Mn=typeof Symbol=="function"&&Symbol.for,hn=Mn?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(a){return null}).$$typeof,ft=Mn?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(a){return null}).$$typeof;function xn(a){if(a.isMobxInjector,ft&&a.$$typeof===ft)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(hn&&a.$$typeof===hn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(K,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(v.a,a)?yt(a):L(a)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Ve=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var gn=function(a,i){for(var l=-1,u=a==null?0:a.length,h=Array(u);++l<u;)h[l]=i(a[l],l,a);return h},Zn=function(){this.__data__=[],this.size=0},re=function(a,i){return a===i||a!=a&&i!=i},Bn=function(a,i){for(var l=a.length;l--;)if(re(a[l][0],i))return l;return-1},Sr=Array.prototype.splice,Ur=function(a){var i=this.__data__,l=Bn(i,a);return!(l<0)&&(l==i.length-1?i.pop():Sr.call(i,l,1),--this.size,!0)},oo=function(a){var i=this.__data__,l=Bn(i,a);return l<0?void 0:i[l][1]},In=function(a){return Bn(this.__data__,a)>-1},jo=function(a,i){var l=this.__data__,u=Bn(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function xe(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}xe.prototype.clear=Zn,xe.prototype.delete=Ur,xe.prototype.get=oo,xe.prototype.has=In,xe.prototype.set=jo;var Ke=xe,Le=function(){this.__data__=new Ke,this.size=0},at=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},en=function(a){return this.__data__.get(a)},Yt=function(a){return this.__data__.has(a)},Nn=r(31),_r=Nn.a.Symbol,ui=Object.prototype,wi=ui.hasOwnProperty,Go=ui.toString,Jo=_r?_r.toStringTag:void 0,Sn=function(a){var i=wi.call(a,Jo),l=a[Jo];try{a[Jo]=void 0;var u=!0}catch{}var h=Go.call(a);return u&&(i?a[Jo]=l:delete a[Jo]),h},Un=Object.prototype.toString,qn=function(a){return Un.call(a)},ir=_r?_r.toStringTag:void 0,Qr=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":ir&&ir in Object(a)?Sn(a):qn(a)},Rr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},fl,Va=function(a){if(!Rr(a))return!1;var i=Qr(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},dl=Nn.a["__core-js_shared__"],lu=(fl=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||""))?"Symbol(src)_1."+fl:"",zd=function(a){return!!lu&&lu in a},bc=Function.prototype.toString,da=function(a){if(a!=null){try{return bc.call(a)}catch{}try{return a+""}catch{}}return""},Wu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,jf=Object.prototype,mo=Pn.toString,_c=jf.hasOwnProperty,Yi=RegExp("^"+mo.call(_c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=function(a){return!(!Rr(a)||zd(a))&&(Va(a)?Yi:Wu).test(da(a))},xs=function(a,i){return a==null?void 0:a[i]},Aa=function(a,i){var l=xs(a,i);return ta(l)?l:void 0},pa=Aa(Nn.a,"Map"),Ta=Aa(Object,"create"),wc=function(){this.__data__=Ta?Ta(null):{},this.size=0},Ec=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},If=Object.prototype.hasOwnProperty,zu=function(a){var i=this.__data__;if(Ta){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return If.call(i,a)?i[a]:void 0},Lf=Object.prototype.hasOwnProperty,Oc=function(a){var i=this.__data__;return Ta?i[a]!==void 0:Lf.call(i,a)},Hd=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=Ta&&i===void 0?"__lodash_hash_undefined__":i,this};function Cl(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Cl.prototype.clear=wc,Cl.prototype.delete=Ec,Cl.prototype.get=zu,Cl.prototype.has=Oc,Cl.prototype.set=Hd;var Ff=Cl,pl=function(){this.size=0,this.__data__={hash:new Ff,map:new(pa||Ke),string:new Ff}},xc=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Ss=function(a,i){var l=a.__data__;return xc(i)?l[typeof i=="string"?"string":"hash"]:l.map},Sc=function(a){var i=Ss(this,a).delete(a);return this.size-=i?1:0,i},Ac=function(a){return Ss(this,a).get(a)},Xd=function(a){return Ss(this,a).has(a)},$f=function(a,i){var l=Ss(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function Hr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Hr.prototype.clear=pl,Hr.prototype.delete=Sc,Hr.prototype.get=Ac,Hr.prototype.has=Xd,Hr.prototype.set=$f;var Vr=Hr,Bf=function(a,i){var l=this.__data__;if(l instanceof Ke){var u=l.__data__;if(!pa||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new Vr(u)}return l.set(a,i),this.size=l.size,this};function uu(a){var i=this.__data__=new Ke(a);this.size=i.size}uu.prototype.clear=Le,uu.prototype.delete=at,uu.prototype.get=en,uu.prototype.has=Yt,uu.prototype.set=Bf;var ha=uu,As=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Uf=function(a){return this.__data__.has(a)};function Io(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new Vr;++i<l;)this.add(a[i])}Io.prototype.add=Io.prototype.push=As,Io.prototype.has=Uf;var jl=Io,Il=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Ts=function(a,i){return a.has(i)},su=function(a,i,l,u,h,f){var y=1&l,w=a.length,S=i.length;if(w!=S&&!(y&&S>w))return!1;var N=f.get(a),F=f.get(i);if(N&&F)return N==i&&F==a;var q=-1,Q=!0,he=2&l?new jl:void 0;for(f.set(a,i),f.set(i,a);++q<w;){var Se=a[q],je=i[q];if(u)var tt=y?u(je,Se,q,i,a,f):u(Se,je,q,a,i,f);if(tt!==void 0){if(tt)continue;Q=!1;break}if(he){if(!Il(i,function(nt,gt){if(!Ts(he,gt)&&(Se===nt||h(Se,nt,l,u,f)))return he.push(gt)})){Q=!1;break}}else if(Se!==je&&!h(Se,je,l,u,f)){Q=!1;break}}return f.delete(a),f.delete(i),Q},Ei=Nn.a.Uint8Array,Tc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,h){l[++i]=[h,u]}),l},Vf=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Mc=_r?_r.prototype:void 0,ji=Mc?Mc.valueOf:void 0,si=function(a,i,l,u,h,f,y){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!f(new Ei(a),new Ei(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return re(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var w=Tc;case"[object Set]":var S=1&u;if(w||(w=Vf),a.size!=i.size&&!S)return!1;var N=y.get(a);if(N)return N==i;u|=2,y.set(a,i);var F=su(w(a),w(i),u,h,f,y);return y.delete(a),F;case"[object Symbol]":if(ji)return ji.call(a)==ji.call(i)}return!1},na=function(a,i){for(var l=-1,u=i.length,h=a.length;++l<u;)a[h+l]=i[l];return a},io=Array.isArray,Gf=function(a,i,l){var u=i(a);return io(a)?u:na(u,l(a))},Ii=function(a,i){for(var l=-1,u=a==null?0:a.length,h=0,f=[];++l<u;){var y=a[l];i(y,l,a)&&(f[h++]=y)}return f},kc=function(){return[]},Wf=Object.prototype.propertyIsEnumerable,Li=Object.getOwnPropertySymbols,Ni=Li?function(a){return a==null?[]:(a=Object(a),Ii(Li(a),function(i){return Wf.call(a,i)}))}:kc,Pc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},Lr=function(a){return a!=null&&typeof a=="object"},ci=function(a){return Lr(a)&&Qr(a)=="[object Arguments]"},Ms=Object.prototype,zf=Ms.hasOwnProperty,Nc=Ms.propertyIsEnumerable,ks=ci(function(){return arguments}())?ci:function(a){return Lr(a)&&zf.call(a,"callee")&&!Nc.call(a,"callee")},Ga=ks,Fi=r(48),cu=/^(?:0|[1-9]\d*)$/,Ki=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&cu.test(a))&&a>-1&&a%1==0&&a<i},va=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Mr={};Mr["[object Float32Array]"]=Mr["[object Float64Array]"]=Mr["[object Int8Array]"]=Mr["[object Int16Array]"]=Mr["[object Int32Array]"]=Mr["[object Uint8Array]"]=Mr["[object Uint8ClampedArray]"]=Mr["[object Uint16Array]"]=Mr["[object Uint32Array]"]=!0,Mr["[object Arguments]"]=Mr["[object Array]"]=Mr["[object ArrayBuffer]"]=Mr["[object Boolean]"]=Mr["[object DataView]"]=Mr["[object Date]"]=Mr["[object Error]"]=Mr["[object Function]"]=Mr["[object Map]"]=Mr["[object Number]"]=Mr["[object Object]"]=Mr["[object RegExp]"]=Mr["[object Set]"]=Mr["[object String]"]=Mr["[object WeakMap]"]=!1;var $i=function(a){return Lr(a)&&va(a.length)&&!!Mr[Qr(a)]},Ma=function(a){return function(i){return a(i)}},yi=r(49),fu=yi.a&&yi.a.isTypedArray,Ll=fu?Ma(fu):$i,ka=Object.prototype.hasOwnProperty,po=function(a,i){var l=io(a),u=!l&&Ga(a),h=!l&&!u&&Object(Fi.a)(a),f=!l&&!u&&!h&&Ll(a),y=l||u||h||f,w=y?Pc(a.length,String):[],S=w.length;for(var N in a)!i&&!ka.call(a,N)||y&&(N=="length"||h&&(N=="offset"||N=="parent")||f&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Ki(N,S))||w.push(N);return w},Hu=Object.prototype,Wa=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Hu)},ya=function(a,i){return function(l){return a(i(l))}},Rc=ya(Object.keys,Object),qd=Object.prototype.hasOwnProperty,Dc=function(a){if(!Wa(a))return Rc(a);var i=[];for(var l in Object(a))qd.call(a,l)&&l!="constructor"&&i.push(l);return i},Wo=function(a){return a!=null&&va(a.length)&&!Va(a)},Fl=function(a){return Wo(a)?po(a):Dc(a)},za=function(a){return Gf(a,Fl,Ni)},Qo=Object.prototype.hasOwnProperty,Cc=function(a,i,l,u,h,f){var y=1&l,w=za(a),S=w.length;if(S!=za(i).length&&!y)return!1;for(var N=S;N--;){var F=w[N];if(!(y?F in i:Qo.call(i,F)))return!1}var q=f.get(a),Q=f.get(i);if(q&&Q)return q==i&&Q==a;var he=!0;f.set(a,i),f.set(i,a);for(var Se=y;++N<S;){var je=a[F=w[N]],tt=i[F];if(u)var nt=y?u(tt,je,F,i,a,f):u(je,tt,F,a,i,f);if(!(nt===void 0?je===tt||h(je,tt,l,u,f):nt)){he=!1;break}Se||(Se=F=="constructor")}if(he&&!Se){var gt=a.constructor,Bt=i.constructor;gt==Bt||!("constructor"in a)||!("constructor"in i)||typeof gt=="function"&&gt instanceof gt&&typeof Bt=="function"&&Bt instanceof Bt||(he=!1)}return f.delete(a),f.delete(i),he},ra=Aa(Nn.a,"DataView"),ma=Aa(Nn.a,"Promise"),Ps=Aa(Nn.a,"Set"),Bi=Aa(Nn.a,"WeakMap"),Zi="[object Map]",fi="[object Promise]",oa="[object Set]",Ri="[object WeakMap]",ut="[object DataView]",jt=da(ra),$t=da(pa),fn=da(ma),ur=da(Ps),kr=da(Bi),ho=Qr;(ra&&ho(new ra(new ArrayBuffer(1)))!=ut||pa&&ho(new pa)!=Zi||ma&&ho(ma.resolve())!=fi||Ps&&ho(new Ps)!=oa||Bi&&ho(new Bi)!=Ri)&&(ho=function(a){var i=Qr(a),l=i=="[object Object]"?a.constructor:void 0,u=l?da(l):"";if(u)switch(u){case jt:return ut;case $t:return Zi;case fn:return fi;case ur:return oa;case kr:return Ri}return i});var T=ho,k="[object Arguments]",U="[object Array]",ne="[object Object]",me=Object.prototype.hasOwnProperty,He=function(a,i,l,u,h,f){var y=io(a),w=io(i),S=y?U:T(a),N=w?U:T(i),F=(S=S==k?ne:S)==ne,q=(N=N==k?ne:N)==ne,Q=S==N;if(Q&&Object(Fi.a)(a)){if(!Object(Fi.a)(i))return!1;y=!0,F=!1}if(Q&&!F)return f||(f=new ha),y||Ll(a)?su(a,i,l,u,h,f):si(a,i,S,l,u,h,f);if(!(1&l)){var he=F&&me.call(a,"__wrapped__"),Se=q&&me.call(i,"__wrapped__");if(he||Se){var je=he?a.value():a,tt=Se?i.value():i;return f||(f=new ha),h(je,tt,l,u,f)}}return!!Q&&(f||(f=new ha),Cc(a,i,l,u,h,f))},mt=function a(i,l,u,h,f){return i===l||(i==null||l==null||!Lr(i)&&!Lr(l)?i!=i&&l!=l:He(i,l,u,h,a,f))},Ht=function(a,i,l,u){var h=l.length,f=h,y=!u;if(a==null)return!f;for(a=Object(a);h--;){var w=l[h];if(y&&w[2]?w[1]!==a[w[0]]:!(w[0]in a))return!1}for(;++h<f;){var S=(w=l[h])[0],N=a[S],F=w[1];if(y&&w[2]){if(N===void 0&&!(S in a))return!1}else{var q=new ha;if(u)var Q=u(N,F,S,a,i,q);if(!(Q===void 0?mt(F,N,3,u,q):Q))return!1}}return!0},_n=function(a){return a==a&&!Rr(a)},yr=function(a){for(var i=Fl(a),l=i.length;l--;){var u=i[l],h=a[u];i[l]=[u,h,_n(h)]}return i},ln=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Gr=function(a){var i=yr(a);return i.length==1&&i[0][2]?ln(i[0][0],i[0][1]):function(l){return l===a||Ht(l,a,i)}},pr=function(a){return typeof a=="symbol"||Lr(a)&&Qr(a)=="[object Symbol]"},Cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ia=/^\w*$/,Eo=function(a,i){if(io(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!pr(a))||ia.test(a)||!Cr.test(a)||i!=null&&a in Object(i)};function Ji(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,h=i?i.apply(this,u):u[0],f=l.cache;if(f.has(h))return f.get(h);var y=a.apply(this,u);return l.cache=f.set(h,y)||f,y};return l.cache=new(Ji.Cache||Vr),l}Ji.Cache=Vr;var hl=Ji,vl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$l=/\\(\\)?/g,du=function(a){var i=hl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(vl,function(l,u,h,f){i.push(h?f.replace($l,"$1"):u||l)}),i}),Ha=_r?_r.prototype:void 0,pu=Ha?Ha.toString:void 0,ei=function a(i){if(typeof i=="string")return i;if(io(i))return gn(i,a)+"";if(pr(i))return pu?pu.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},Bl=function(a){return a==null?"":ei(a)},yl=function(a,i){return io(a)?a:Eo(a,i)?[a]:du(Bl(a))},Xa=function(a){if(typeof a=="string"||pr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},qa=function(a,i){for(var l=0,u=(i=yl(i,a)).length;a!=null&&l<u;)a=a[Xa(i[l++])];return l&&l==u?a:void 0},Xu=function(a,i,l){var u=a==null?void 0:qa(a,i);return u===void 0?l:u},ah=function(a,i){return a!=null&&i in Object(a)},lh=function(a,i,l){for(var u=-1,h=(i=yl(i,a)).length,f=!1;++u<h;){var y=Xa(i[u]);if(!(f=a!=null&&l(a,y)))break;a=a[y]}return f||++u!=h?f:!!(h=a==null?0:a.length)&&va(h)&&Ki(y,h)&&(io(a)||Ga(a))},Yd=function(a,i){return a!=null&&lh(a,i,ah)},jc=function(a,i){return Eo(a)&&_n(i)?ln(Xa(a),i):function(l){var u=Xu(l,a);return u===void 0&&u===i?Yd(l,a):mt(i,u,3)}},qu=function(a){return a},Hf=function(a){return function(i){return i==null?void 0:i[a]}},uh=function(a){return function(i){return qa(i,a)}},Yu=function(a){return Eo(a)?Hf(Xa(a)):uh(a)},Ic=function(a){return typeof a=="function"?a:a==null?qu:typeof a=="object"?io(a)?jc(a[0],a[1]):Gr(a):Yu(a)},Xf=function(a){return function(i,l,u){for(var h=-1,f=Object(i),y=u(i),w=y.length;w--;){var S=y[a?w:++h];if(l(f[S],S,f)===!1)break}return i}}(),Lo=function(a,i){return function(l,u){if(l==null)return l;if(!Wo(l))return a(l,u);for(var h=l.length,f=i?h:-1,y=Object(l);(i?f--:++f<h)&&u(y[f],f,y)!==!1;);return l}}(function(a,i){return a&&Xf(a,i,Fl)}),Ui=function(a,i){var l=-1,u=Wo(a)?Array(a.length):[];return Lo(a,function(h,f,y){u[++l]=i(h,f,y)}),u},qf=function(a,i){return(io(a)?gn:Ui)(a,Ic(i))};Object(c.n)({isolateGlobalState:!0});var Yf=function(){try{var a=Aa(Object,"defineProperty");return a({},"",{}),a}catch{}}(),Ns=function(a,i,l){i=="__proto__"&&Yf?Yf(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Vv=Object.prototype.hasOwnProperty,Rs=function(a,i,l){var u=a[i];Vv.call(a,i)&&re(u,l)&&(l!==void 0||i in a)||Ns(a,i,l)},ml=function(a,i,l,u){var h=!l;l||(l={});for(var f=-1,y=i.length;++f<y;){var w=i[f],S=u?u(l[w],a[w],w,l,a):void 0;S===void 0&&(S=a[w]),h?Ns(l,w,S):Rs(l,w,S)}return l},Lc=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},Ku=Math.max,hu=function(a,i,l){return i=Ku(i===void 0?a.length-1:i,0),function(){for(var u=arguments,h=-1,f=Ku(u.length-i,0),y=Array(f);++h<f;)y[h]=u[i+h];h=-1;for(var w=Array(i+1);++h<i;)w[h]=u[h];return w[i]=l(y),Lc(a,this,w)}},Ds=function(a){return function(){return a}},Fc=Yf?function(a,i){return Yf(a,"toString",{configurable:!0,enumerable:!1,value:Ds(i),writable:!0})}:qu,vu=Date.now,Gv=function(a){var i=0,l=0;return function(){var u=vu(),h=16-(u-l);if(l=u,h>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},$c=Gv(Fc),Wv=function(a,i){return $c(hu(a,i,qu),a+"")},zv=function(a,i,l){if(!Rr(l))return!1;var u=typeof i;return!!(u=="number"?Wo(l)&&Ki(i,l.length):u=="string"&&i in l)&&re(l[i],a)},sh=function(a){return Wv(function(i,l){var u=-1,h=l.length,f=h>1?l[h-1]:void 0,y=h>2?l[2]:void 0;for(f=a.length>3&&typeof f=="function"?(h--,f):void 0,y&&zv(l[0],l[1],y)&&(f=h<3?void 0:f,h=1),i=Object(i);++u<h;){var w=l[u];w&&a(i,w,u,f)}return i})},Kf=Object.prototype.hasOwnProperty,Di=sh(function(a,i){if(Wa(i)||Wo(i))ml(i,Fl(i),a);else for(var l in i)Kf.call(i,l)&&Rs(a,l,i[l])}),ch=function(a,i,l,u){if(!Rr(a))return a;for(var h=-1,f=(i=yl(i,a)).length,y=f-1,w=a;w!=null&&++h<f;){var S=Xa(i[h]),N=l;if(S==="__proto__"||S==="constructor"||S==="prototype")return a;if(h!=y){var F=w[S];(N=u?u(F,S,w):void 0)===void 0&&(N=Rr(F)?F:Ki(i[h+1])?[]:{})}Rs(w,S,N),w=w[S]}return a},oe=function(a,i,l){for(var u=-1,h=i.length,f={};++u<h;){var y=i[u],w=qa(a,y);l(w,y)&&ch(f,yl(y,a),w)}return f},Zu=function(a,i){return oe(a,i,function(l,u){return Yd(a,u)})},Ul=_r?_r.isConcatSpreadable:void 0,Pa=function(a){return io(a)||Ga(a)||!!(Ul&&a&&a[Ul])},Pr=function a(i,l,u,h,f){var y=-1,w=i.length;for(u||(u=Pa),f||(f=[]);++y<w;){var S=i[y];l>0&&u(S)?l>1?a(S,l-1,u,h,f):na(f,S):h||(f[f.length]=S)}return f},Oi=function(a){return a!=null&&a.length?Pr(a,1):[]},Fr,Ya,Vl,ga,Zf,Jf,Kd,fh,Gl,Fo,Cs,Zd,Wl,Ka,Bc,yu,ba,Jd,Qd,Za=function(a){return $c(hu(a,void 0,Oi),a+"")}(function(a,i){return a==null?{}:Zu(a,i)});function go(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function dh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ep(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function $o(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Xr,ti,Or,so,Rn,co,Uc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},gl=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Qf=(Ya=$o((Fr=function(){function a(u){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),go(this,"isSilentMode",Ya,this),go(this,"stopZoomGraph",Vl,this),go(this,"stopScrollGraph",ga,this),go(this,"stopMoveGraph",Zf,this),go(this,"adjustEdge",Jf,this),go(this,"adjustEdgeMiddle",Kd,this),go(this,"adjustEdgeStartAndEnd",fh,this),go(this,"adjustNodePosition",Gl,this),go(this,"hideAnchors",Fo,this),go(this,"allowRotation",Cs,this),go(this,"hoverOutline",Zd,this),go(this,"nodeSelectedOutline",Wl,this),go(this,"edgeSelectedOutline",Ka,this),go(this,"nodeTextEdit",Bc,this),go(this,"edgeTextEdit",yu,this),go(this,"nodeTextDraggable",ba,this),go(this,"edgeTextDraggable",Jd,this),go(this,"autoExpand",Qd,this),ep(this,"multipleSelectKey",""),ep(this,"defaultConfig",{}),Di(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var h=this.getConfigDetail(u);Di(this,h)}},{key:"getConfigDetail",value:function(u){var h=u.isSilentMode,f=u.textEdit,y={};if(h===!1&&Di(y,this.defaultConfig),h===!0&&h!==this.isSilentMode){var w=Za(Uc,gl);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Di(y,w)}f===!1&&Di(y,{nodeTextEdit:!1,edgeTextEdit:!1});var S=Za(u,gl);return Di(y,S)}},{key:"getConfig",value:function(){return Za(this,gl)}}])&&dh(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vl=$o(Fr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ga=$o(Fr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=$o(Fr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jf=$o(Fr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kd=$o(Fr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fh=$o(Fr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gl=$o(Fr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fo=$o(Fr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cs=$o(Fr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zd=$o(Fr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wl=$o(Fr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ka=$o(Fr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bc=$o(Fr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yu=$o(Fr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ba=$o(Fr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jd=$o(Fr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qd=$o(Fr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$o(Fr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Fr.prototype,"updateEditConfig"),Fr.prototype),Fr);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Xr||(Xr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(ti||(ti={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(Or||(Or={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(so||(so={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(Rn||(Rn={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(co||(co={}));var Oo,To,tp,np,Vc,Vi,ed,js,Na;function mu(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return zl(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ra(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function ph(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function bl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _a(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(Oo||(Oo={}));var rp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},op=(To=function(){function a(u,h){(function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),bl(this,"MINI_SCALE_SIZE",.2),bl(this,"MAX_SCALE_SIZE",16),Ra(this,"SCALE_X",tp,this),Ra(this,"SKEW_Y",np,this),Ra(this,"SKEW_X",Vc,this),Ra(this,"SCALE_Y",Vi,this),Ra(this,"TRANSLATE_X",ed,this),Ra(this,"TRANSLATE_Y",js,this),Ra(this,"ZOOM_SIZE",Na,this),bl(this,"eventCenter",void 0),bl(this,"translateLimitMinX",void 0),bl(this,"translateLimitMinY",void 0),bl(this,"translateLimitMaxX",void 0),bl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=h.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var h=mu(u,2),f=h[0],y=h[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var h=mu(u,2),f=h[0],y=h[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,h,f){var y=mu(u,2),w=y[0],S=y[1];return[w+h/this.SCALE_X,S+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,h){return[u/this.SCALE_X,h/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],h=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,y=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(h&&(this.TRANSLATE_X-=(f-this.SCALE_X)*h[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*h[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Rn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,h){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+h<=this.translateLimitMaxY&&this.TRANSLATE_Y+h>=this.translateLimitMinY&&(this.TRANSLATE_Y+=h),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,h,f,y){var w=mu(this.CanvasPointToHtmlPoint([u,h]),2),S=f/2-w[0],N=y/2-w[1];this.TRANSLATE_X+=S,this.TRANSLATE_Y+=N,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var h=mu(Array.isArray(u)&&u.length===4?u:rp[u.toString()],4);this.translateLimitMinX=h[0],this.translateLimitMinY=h[1],this.translateLimitMaxX=h[2],this.translateLimitMaxY=h[3]}}],l&&ph(i.prototype,l),a}(),tp=_a(To.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),np=_a(To.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vc=_a(To.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vi=_a(To.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ed=_a(To.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),js=_a(To.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Na=_a(To.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),_a(To.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(To.prototype,"zoom"),To.prototype),_a(To.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(To.prototype,"resetZoom"),To.prototype),_a(To.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(To.prototype,"translate"),To.prototype),_a(To.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(To.prototype,"focusOn"),To.prototype),To),td=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},hh=function(a,i){return a&&ml(i,Fl(i),a)},vh=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},yh=Object.prototype.hasOwnProperty,ip=function(a){if(!Rr(a))return vh(a);var i=Wa(a),l=[];for(var u in a)(u!="constructor"||!i&&yh.call(a,u))&&l.push(u);return l},Is=function(a){return Wo(a)?po(a,!0):ip(a)},ap=function(a,i){return a&&ml(i,Is(i),a)},Gc=r(107),xr=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},Hv=function(a,i){return ml(a,Ni(a),i)},lp=ya(Object.getPrototypeOf,Object),gu=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)na(i,Ni(a)),a=lp(a);return i}:kc,Wc=function(a,i){return ml(a,gu(a),i)},Xv=function(a){return Gf(a,Is,gu)},qv=Object.prototype.hasOwnProperty,Da=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&qv.call(a,"index")&&(l.index=a.index,l.input=a.input),l},up=function(a){var i=new a.constructor(a.byteLength);return new Ei(i).set(new Ei(a)),i},nd=function(a,i){var l=i?up(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.byteLength)},rd=/\w*$/,mh=function(a){var i=new a.constructor(a.source,rd.exec(a));return i.lastIndex=a.lastIndex,i},sp=_r?_r.prototype:void 0,aa=sp?sp.valueOf:void 0,bu=function(a){return aa?Object(aa.call(a)):{}},od=function(a,i){var l=i?up(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},Ju=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return up(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return nd(a,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return od(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return mh(a);case"[object Symbol]":return bu(a)}},zc=Object.create,gh=function(){function a(){}return function(i){if(!Rr(i))return{};if(zc)return zc(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),Hc=function(a){return typeof a.constructor!="function"||Wa(a)?{}:gh(lp(a))},id=function(a){return Lr(a)&&T(a)=="[object Map]"},ad=yi.a&&yi.a.isMap,ld=ad?Ma(ad):id,_u=function(a){return Lr(a)&&T(a)=="[object Set]"},bh=yi.a&&yi.a.isSet,wu=bh?Ma(bh):_u,cp="[object Arguments]",fp="[object Function]",Qu="[object Object]",vo={};vo[cp]=vo["[object Array]"]=vo["[object ArrayBuffer]"]=vo["[object DataView]"]=vo["[object Boolean]"]=vo["[object Date]"]=vo["[object Float32Array]"]=vo["[object Float64Array]"]=vo["[object Int8Array]"]=vo["[object Int16Array]"]=vo["[object Int32Array]"]=vo["[object Map]"]=vo["[object Number]"]=vo["[object Object]"]=vo["[object RegExp]"]=vo["[object Set]"]=vo["[object String]"]=vo["[object Symbol]"]=vo["[object Uint8Array]"]=vo["[object Uint8ClampedArray]"]=vo["[object Uint16Array]"]=vo["[object Uint32Array]"]=!0,vo["[object Error]"]=vo[fp]=vo["[object WeakMap]"]=!1;var Xc=function a(i,l,u,h,f,y){var w,S=1&l,N=2&l,F=4&l;if(u&&(w=f?u(i,h,f,y):u(i)),w!==void 0)return w;if(!Rr(i))return i;var q=io(i);if(q){if(w=Da(i),!S)return xr(i,w)}else{var Q=T(i),he=Q==fp||Q=="[object GeneratorFunction]";if(Object(Fi.a)(i))return Object(Gc.a)(i,S);if(Q==Qu||Q==cp||he&&!f){if(w=N||he?{}:Hc(i),!S)return N?Wc(i,ap(w,i)):Hv(i,hh(w,i))}else{if(!vo[Q])return f?i:{};w=Ju(i,Q,S)}}y||(y=new ha);var Se=y.get(i);if(Se)return Se;y.set(i,w),wu(i)?i.forEach(function(tt){w.add(a(tt,l,u,tt,i,y))}):ld(i)&&i.forEach(function(tt,nt){w.set(nt,a(tt,l,u,nt,i,y))});var je=q?void 0:(F?N?Xv:za:N?Is:Fl)(i);return td(je||i,function(tt,nt){je&&(tt=i[nt=tt]),Rs(w,nt,a(tt,l,u,nt,i,y))}),w},xo=function(a){return Xc(a,5)},Hl=function(a,i,l){(l!==void 0&&!re(a[i],l)||l===void 0&&!(i in a))&&Ns(a,i,l)},mi=function(a){return Lr(a)&&Wo(a)},_l=Function.prototype,Xl=Object.prototype,Eu=_l.toString,es=Xl.hasOwnProperty,ud=Eu.call(Object),sd=function(a){if(!Lr(a)||Qr(a)!="[object Object]")return!1;var i=lp(a);if(i===null)return!0;var l=es.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Eu.call(l)==ud},wl=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ts=function(a){return ml(a,Is(a))},cd=function(a,i,l,u,h,f,y){var w=wl(a,l),S=wl(i,l),N=y.get(S);if(N)Hl(a,l,N);else{var F=f?f(w,S,l+"",a,i,y):void 0,q=F===void 0;if(q){var Q=io(S),he=!Q&&Object(Fi.a)(S),Se=!Q&&!he&&Ll(S);F=S,Q||he||Se?io(w)?F=w:mi(w)?F=xr(w):he?(q=!1,F=Object(Gc.a)(S,!0)):Se?(q=!1,F=od(S,!0)):F=[]:sd(S)||Ga(S)?(F=w,Ga(w)?F=ts(w):Rr(w)&&!Va(w)||(F=Hc(S))):q=!1}q&&(y.set(S,F),h(F,S,u,f,y),y.delete(S)),Hl(a,l,F)}},qc=function a(i,l,u,h,f){i!==l&&Xf(l,function(y,w){if(f||(f=new ha),Rr(y))cd(i,l,w,u,a,h,f);else{var S=h?h(wl(i,w),y,w+"",i,l,f):void 0;S===void 0&&(S=y),Hl(i,w,S)}},Is)},Ou=sh(function(a,i,l){qc(a,i,l)}),dp={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Ls=function(a){var i=xo(dp);return a&&(i=Ou(i,a)),i};r(82),r(166);function fd(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var Yc=function(){function a(){var u,h,f;(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),f={},(h="_events")in(u=this)?Object.defineProperty(u,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[h]=f}var i,l;return i=a,(l=[{key:"on",value:function(u,h,f){var y=this;return u==null||u.split(",").forEach(function(w){w=w.trim(),y._events[w]||(y._events[w]=[]),y._events[w].push({callback:h,once:!!f})}),this}},{key:"once",value:function(u,h){var f=this;u==null||u.split(",").forEach(function(y){return y=y.trim(),f.on(y,h,!0)})}},{key:"emit",value:function(u,h){var f=this;u==null||u.split(",").forEach(function(y){var w=f._events[y]||[],S=f._events["*"]||[],N=function(F){for(var q=F.length,Q=0;Q<q;Q++)if(F[Q]){var he=F[Q],Se=he.callback;he.once&&(F.splice(Q,1),F.length===0&&delete f._events[y],q--,Q--),Se.apply(f,[h])}};N(w),N(S)})}},{key:"off",value:function(u,h){var f=this;return u||(this._events={}),u.split(",").forEach(function(y){if(h){for(var w=f._events[y]||[],S=w.length,N=0;N<S;N++)w[N].callback===h&&(w.splice(N,1),S--,N--);w.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&fd(i.prototype,l),a}();function El(a,i){return i*Math.round(a/i)||a}function Fs(a,i){return a%i}function Kc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Zc(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Zc(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zc(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var dd=function(a,i,l){var u=Kc(a,2),h=u[0],f=u[1],y=Kc(i,2),w=y[0],S=y[1],N=Kc(l,2),F=N[0],q=N[1];return h>w&&h<F&&f>S&&f<q},pd=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Ja=function(a){return function(i,l,u){var h=Object(i);if(!Wo(i)){var f=Ic(l);i=Fl(i),l=function(w){return f(h[w],w,h)}}var y=a(i,l,u);return y>-1?h[f?i[y]:y]:void 0}},pp=function(a,i,l,u){for(var h=a.length,f=l+(u?1:-1);u?f--:++f<h;)if(i(a[f],f,a))return f;return-1},hp=/\s/,vp=function(a){for(var i=a.length;i--&&hp.test(a.charAt(i)););return i},hd=/^\s+/,Ol=function(a){return a&&a.slice(0,vp(a)+1).replace(hd,"")},Jc=/^[-+]0x[0-9a-f]+$/i,vd=/^0b[01]+$/i,yd=/^0o[0-7]+$/i,$s=parseInt,ql=function(a){if(typeof a=="number")return a;if(pr(a))return NaN;if(Rr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Rr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=Ol(a);var l=vd.test(a);return l||yd.test(a)?$s(a.slice(2),l?2:8):Jc.test(a)?NaN:+a},Qn=1/0,Bs=function(a){return a?(a=ql(a))===Qn||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},Qc=function(a){var i=Bs(a),l=i%1;return i==i?l?i-l:i:0},Qa=Math.max,Us,Vs=Ja(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var h=l==null?0:Qc(l);return h<0&&(h=Qa(u+h,0)),pp(a,Ic(i),h)}),Mo=new Uint8Array(16);function Gs(){if(!Us&&!(Us=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Us(Mo)}for(var xu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ef=function(a){return typeof a=="string"&&xu.test(a)},ao=[],Bo=0;Bo<256;++Bo)ao.push((Bo+256).toString(16).substr(1));var Yl=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(ao[a[i+0]]+ao[a[i+1]]+ao[a[i+2]]+ao[a[i+3]]+"-"+ao[a[i+4]]+ao[a[i+5]]+"-"+ao[a[i+6]]+ao[a[i+7]]+"-"+ao[a[i+8]]+ao[a[i+9]]+"-"+ao[a[i+10]]+ao[a[i+11]]+ao[a[i+12]]+ao[a[i+13]]+ao[a[i+14]]+ao[a[i+15]]).toLowerCase();if(!ef(l))throw TypeError("Stringified UUID is invalid");return l},el=function(a,i,l){var u=(a=a||{}).random||(a.rng||Gs)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){l=l||0;for(var h=0;h<16;++h)i[l+h]=u[h];return i}return Yl(u)},tl=function(){return el()},Su=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,h){return u[h.id]=i+el(),h.id=u[h.id],u},{});return a.edges.forEach(function(u){u.id=i+el(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},xl=(r(105),r(127),r(207),function(a,i,l){var u=a.x,h=a.y,f=i.x,y=i.y,w=l.x,S=l.y,N=(S-y)/(w-f),F=y-N*f;return u>=f&&u<=w&&h>=y&&h<=S&&Math.abs(h-N*u+F)<Number.EPSILON});function Ws(a){return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ws(a)}function tf(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Au(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?tf(Object(l),!0).forEach(function(u){zs(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):tf(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function zs(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Dt,yp,ns,nf,md,mp,Sl,gp,nl,Tu,gd,_h,wh,Eh,bp,_p,wp,Ep,Oh,xh,Sh,Gi=function(a){return a.anchors},rs=function(a,i){for(var l,u=i.nodes,h=u.length-1;h>=0;h--){var f=u[h];if(bd(a,f)){var y=f.getTargetAnchor(a);if(y){var w={node:f,anchorIndex:y.index,anchor:y.anchor};l&&!rf(f,l.node,i)||(l=w)}}}return l},rf=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},la=function(a,i,l,u){return Math.hypot(a-l,i-u)},Ca=function(a,i){var l=!1,u=Wi(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},bd=function(a,i){var l=!1,u=Wi(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Wi=function(a){var i=a.x,l=a.y,u=a.width,h=a.height;return{minX:i-u/2,minY:l-h/2,maxX:i+u/2,maxY:l+h/2,x:i,y:l,width:u,height:h,centerX:i,centerY:l}},of=function(a,i,l){var u,h=function(y){var w=y,S=w.x,N=w.y,F=w.width,q=w.height,Q=w.radius;return[{x:S-F/2+Q,y:N-q/2+Q,r:Q},{x:S+F/2-Q,y:N-q/2+Q,r:Q},{x:S-F/2+Q,y:N+q/2-Q,r:Q},{x:S+F/2-Q,y:N+q/2-Q,r:Q}]}(l),f=Number.MAX_SAFE_INTEGER;return h.forEach(function(y){var w=la(a.x,a.y,y.x,y.y);w<f&&(f=w,u=y)}),os(a,i,u)},os=function(a,i,l){var u,h=l,f=h.x,y=h.y,w=h.r;if(i===co.HORIZONTAL){var S=f-Math.sqrt(w*w-(a.y-y)*(a.y-y)),N=f+Math.sqrt(w*w-(a.y-y)*(a.y-y));u={x:Math.abs(S-a.x)<Math.abs(N-a.x)?S:N,y:a.y}}else if(i===co.VERTICAL){var F=y-Math.sqrt(w*w-(a.x-f)*(a.x-f)),q=y+Math.sqrt(w*w-(a.x-f)*(a.x-f)),Q=Math.abs(F-a.y)<Math.abs(q-a.y)?F:q;u={x:a.x,y:Q}}return u},Hs=function(a,i){var l=i,u=!1,h=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,y=l.y-l.height/2+l.radius,w=l.y+l.height/2-l.radius,S=l.x,N=l.y,F=l.width,q=l.height;return a.y===N+q/2||a.y===N-q/2?u=a.x>h&&a.x<f:a.x!==S+F/2&&a.x!==S-F/2||(u=a.y>y&&a.y<w),u},af=function(a,i,l){var u,h=l,f=h.x,y=h.y,w=h.rx,S=h.ry;if(i===co.HORIZONTAL){var N=f-Math.sqrt(w*w-(a.y-y)*(a.y-y)*w*w/(S*S)),F=f+Math.sqrt(w*w-(a.y-y)*(a.y-y)*w*w/(S*S));u={x:Math.abs(N-a.x)<Math.abs(F-a.x)?N:F,y:a.y}}else if(i===co.VERTICAL){var q=y-Math.sqrt(S*S-(a.x-f)*(a.x-f)*S*S/(w*w)),Q=y+Math.sqrt(S*S-(a.x-f)*(a.x-f)*S*S/(w*w)),he=Math.abs(q-a.y)<Math.abs(Q-a.y)?q:Q;u={x:a.x,y:he}}return u},lf=function(a,i,l){for(var u,h=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],w=0;w<h.length;w++)y.push({start:h[w],end:h[(w+1)%h.length]});return y.forEach(function(S){var N=S.start,F=S.end,q=N,Q=F;N.x>F.x&&(q=F,Q=N);var he={x:a.x,y:a.y};if(q.x===Q.x&&i===co.HORIZONTAL&&(he={x:q.x,y:a.y}),q.y===Q.y&&i===co.VERTICAL&&(he={x:a.x,y:q.y}),q.x!==Q.x&&q.y!==Q.y){var Se=(Q.y-q.y)/(Q.x-q.x),je=(q.x*Q.y-Q.x*q.y)/(q.x-Q.x);i===co.HORIZONTAL?he={x:(a.y-je)/Se,y:a.y}:i===co.VERTICAL&&(he={x:a.x,y:Se*a.x+je})}if(xl(he,N,F)){var tt=la(he.x,he.y,a.x,a.y);tt<f&&(f=tt,u=he)}}),u},Xs=function(a,i,l,u){var h=a.x,f=a.y;return i.x>a.x?h=a.x+l/2:i.x<a.x&&(h=a.x-l/2),i.y>a.y?f=a.y+u/2:i.y<a.y&&(f=a.y-u/2),{x:h,y:f}},qs=function(a){var i=a.rows,l=a.style,u=a.rowsLength,h=a.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=h,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?i.forEach(function(w){var S=document.createElement("div");S.textContent=w,f.appendChild(S)}):f.textContent=i,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},is=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,h=0;return i&&i.forEach(function(f){var y=Jn(f);h=y>h?y:h}),{width:Math.ceil(h/2)*u+u/4,height:l*(u+2)+u/4}},Kl=function(a){return Ws(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},ni=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},uf=1e3,sf=999,Zl=function(){return++uf};function Op(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function zi(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Op(Object(l),!0).forEach(function(u){ja(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Op(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ri(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Ah(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ja(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function $n(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var _d=(Dt=function(){function a(u,h){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),ja(this,"id",""),ri(this,"type",yp,this),ri(this,"sourceNodeId",ns,this),ri(this,"targetNodeId",nf,this),ri(this,"startPoint",md,this),ri(this,"endPoint",mp,this),ri(this,"text",Sl,this),ri(this,"properties",gp,this),ri(this,"points",nl,this),ri(this,"pointsList",Tu,this),ri(this,"isSelected",gd,this),ri(this,"isHovered",_h,this),ri(this,"isHitable",wh,this),ri(this,"draggable",Eh,this),ri(this,"visible",bp,this),ja(this,"virtual",!1),ri(this,"isAnimation",_p,this),ri(this,"isShowAdjustPoint",wp,this),ja(this,"graphModel",void 0),ri(this,"zIndex",Ep,this),ja(this,"BaseType",so.EDGE),ja(this,"modelType",Or.EDGE),ri(this,"state",Oh,this),ja(this,"additionStateData",void 0),ja(this,"sourceAnchorId",""),ja(this,"targetAnchorId",""),ja(this,"menu",void 0),ja(this,"customTextPosition",!1),ri(this,"style",xh,this),ri(this,"arrowConfig",Sh,this),this.graphModel=h,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var h=this.graphModel.idGenerator,f=h&&h(u.type),y=this.createId();u.id=y||f||tl()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var w=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=w,Di(this,ye(u)),this.graphModel.overlapMode===Oo.INCREASE&&(this.zIndex=u.zIndex||Zl()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return zi(zi({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return zi({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return xo(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return xo(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),h=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?h.stroke:u.stroke;return zi(zi({},u),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return xo(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,h;return(u=this.graphModel)===null||u===void 0||(h=u.nodesMap[this.sourceNodeId])===null||h===void 0?void 0:h.model}},{key:"targetNode",get:function(){var u,h;return(u=this.graphModel)===null||u===void 0||(h=u.nodesMap[this.targetNodeId])===null||h===void 0?void 0:h.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,h,f){var y,w,S=Gi(u);return f&&(y=Vs(S,function(N){return N.id===f}))||S.forEach(function(N){var F=ot(N,h);(w===void 0||F<w)&&(w=F,y=N)}),y}},{key:"getEndAnchor",value:function(u,h){var f,y,w=this,S=Gi(u);return h&&(f=Vs(S,function(N){return N.id===h}))||S.forEach(function(N){var F=ot(N,w.startPoint);(y===void 0||F<y)&&(y=F,f=N)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,h=u.x,f=u.y,y=u.value,w={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(w.text={x:h,y:f,value:y}),this.graphModel.overlapMode===Oo.INCREASE&&(w.zIndex=this.zIndex),w}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,h){this.properties[u]=ni(h),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=zi(zi({},Object(c.I)(this.properties)),ni(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var h=this.arrowConfig,f=h.markerEnd,y=h.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,h){this.style=zi(zi({},this.style),{},ja({},u,ni(h)))}},{key:"setStyles",value:function(u){this.style=zi(zi({},this.style),ni(u))}},{key:"updateStyles",value:function(u){this.style=zi({},ni(u))}},{key:"formatText",value:function(u){var h=this.textPosition,f=h.x,y=h.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||y,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,h=u.x,f=u.y;this.text.x=h,this.text.y=f}},{key:"moveText",value:function(u,h){if(this.text){var f=this.text,y=f.x,w=f.y,S=f.value,N=f.draggable,F=f.editable;this.text={value:S,draggable:N,x:y+u,y:w+h,editable:F}}}},{key:"setText",value:function(u){u&&Di(this.text,u)}},{key:"updateText",value:function(u){this.text=zi(zi({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var h=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!h)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:h.x,y:h.y}),this.targetAnchorId||(this.targetAnchorId=h.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,h){this.state=u,this.additionStateData=h}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,h){this.startPoint.x+=u,this.startPoint.y+=h}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,h){this.endPoint.x+=u,this.endPoint.y+=h}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Di(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var h=u.startPoint,f=u.endPoint;this.updateStartPoint({x:h.x,y:h.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&Ah(i.prototype,l),a}(),yp=$n(Dt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ns=$n(Dt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nf=$n(Dt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),md=$n(Dt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mp=$n(Dt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sl=$n(Dt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),gp=$n(Dt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),nl=$n(Dt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tu=$n(Dt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gd=$n(Dt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_h=$n(Dt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wh=$n(Dt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Eh=$n(Dt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bp=$n(Dt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_p=$n(Dt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wp=$n(Dt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ep=$n(Dt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oh=$n(Dt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),xh=$n(Dt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Sh=$n(Dt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),$n(Dt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"sourceNode"),Dt.prototype),$n(Dt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"targetNode"),Dt.prototype),$n(Dt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Dt.prototype,"textPosition"),Dt.prototype),$n(Dt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperty"),Dt.prototype),$n(Dt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"deleteProperty"),Dt.prototype),$n(Dt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperties"),Dt.prototype),$n(Dt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"changeEdgeId"),Dt.prototype),$n(Dt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyle"),Dt.prototype),$n(Dt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyles"),Dt.prototype),$n(Dt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStyles"),Dt.prototype),$n(Dt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"formatText"),Dt.prototype),$n(Dt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"resetTextPosition"),Dt.prototype),$n(Dt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveText"),Dt.prototype),$n(Dt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setText"),Dt.prototype),$n(Dt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateText"),Dt.prototype),$n(Dt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setAnchors"),Dt.prototype),$n(Dt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setSelected"),Dt.prototype),$n(Dt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHovered"),Dt.prototype),$n(Dt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHitable"),Dt.prototype),$n(Dt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"openEdgeAnimation"),Dt.prototype),$n(Dt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"closeEdgeAnimation"),Dt.prototype),$n(Dt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setElementState"),Dt.prototype),$n(Dt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStartPoint"),Dt.prototype),$n(Dt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveStartPoint"),Dt.prototype),$n(Dt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateEndPoint"),Dt.prototype),$n(Dt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveEndPoint"),Dt.prototype),$n(Dt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setZIndex"),Dt.prototype),$n(Dt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"initPoints"),Dt.prototype),$n(Dt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAttributes"),Dt.prototype),$n(Dt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getAdjustStart"),Dt.prototype),$n(Dt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getAdjustEnd"),Dt.prototype),$n(Dt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAfterAdjustStartAndEnd"),Dt.prototype),Dt),as=_d;function wd(a){return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},wd(a)}function Th(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Ys(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Th(Object(l),!0).forEach(function(u){Hi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Th(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Mh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ks(){return Ks=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ls(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},Ks.apply(this,arguments)}function ls(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Al(a))!==null;);return a}function ol(a,i){return ol=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ol(a,i)}function kh(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Al(a);if(i){var h=Al(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return xp(this,l)}}function xp(a,i){if(i&&(wd(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mu(a)}function Mu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Al(a){return Al=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Al(a)}function Hi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Gn,ko,Ci=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&ol(f,y)})(h,a);var i,l,u=kh(h);function h(){var f;Mh(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return Hi(Mu(f=u.call.apply(u,[this].concat(w))),"modelType",Or.LINE_EDGE),f}return i=h,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Ys(Ys({},Ks(Al(h.prototype),"getEdgeStyle",this).call(this)),xo(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&rl(i.prototype,l),h}(as);function ua(a){return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ua(a)}function Yv(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Ph(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Ph(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ph(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ku(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function mr(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ku(Object(l),!0).forEach(function(u){Po(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ku(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Nh(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sa(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function oi(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ia(){return Ia=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Kv(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},Ia.apply(this,arguments)}function Kv(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=no(a))!==null;);return a}function cf(a,i){return cf=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},cf(a,i)}function Tl(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=no(a);if(i){var h=no(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return Sp(this,l)}}function Sp(a,i){if(i&&(ua(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(a)}function Jl(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function no(a){return no=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},no(a)}function Po(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function xi(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var ff=(Gn=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&cf(f,y)})(h,a);var i,l,u=Tl(h);function h(){var f;sa(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return Po(Jl(f=u.call.apply(u,[this].concat(w))),"modelType",Or.POLYLINE_EDGE),Po(Jl(f),"draggingPointList",void 0),Nh(Jl(f),"dbClickPosition",ko,Jl(f)),f}return i=h,(l=[{key:"initEdgeData",value:function(f){this.offset=30,Ia(no(h.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return mr(mr({},Ia(no(h.prototype),"getEdgeStyle",this).call(this)),xo(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var w=this.dbClickPosition;return{x:w.x,y:w.y}}var S=bo(this.points),N=Yv(zo(S),2),F=N[0],q=N[1];return{x:(F.x+q.x)/2,y:(F.y+q.y)/2}}},{key:"getAfterAnchor",value:function(f,y,w){var S,N;return w.forEach(function(F){var q;f===co.HORIZONTAL?q=Math.abs(y.y-F.y):f===co.VERTICAL&&(q=Math.abs(y.x-F.x)),(!N||N>q)&&(N=q,S=F)}),S}},{key:"getCrossPoint",value:function(f,y,w){var S;return f===co.HORIZONTAL?S={x:w.x,y:y.y}:f===co.VERTICAL&&(S={x:y.x,y:w.y}),S}},{key:"removeCrossPoints",value:function(f,y,w){var S=w.map(function(nt){return nt});if(f===1){var N=S[f],F=S[y],q=S[f-1];if(ro(q,N,this.sourceNode)){if(Ro(N,F,this.sourceNode)){var Q=Vo(N,F,this.sourceNode);Q&&(S[f]=Q,S.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(nt){(nt.x===q.x&&nt.x===N.x||nt.y===q.y&&nt.y===N.y)&&la(nt.x,nt.y,N.x,N.y)<la(q.x,q.y,N.x,N.y)&&(S[f-1]=nt)})}if(y===w.length-2){var he=S[f],Se=S[y],je=S[y+1];if(ro(Se,je,this.targetNode)){if(Ro(he,Se,this.targetNode)){var tt=Vo(he,Se,this.targetNode);tt&&(S[y]=tt,S.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(nt){(nt.x===je.x&&nt.x===Se.x||nt.y===je.y&&nt.y===Se.y)&&la(nt.x,nt.y,Se.x,Se.y)<la(je.x,je.y,Se.x,Se.y)&&(S[y+1]=nt)})}return S}},{key:"getDraggingPoints",value:function(f,y,w,S,N){var F=N.map(function(he){return he}),q=this.getAfterAnchor(f,w,S),Q=this.getCrossPoint(f,w,q);return y==="start"?(F.unshift(Q),F.unshift(q)):(F.push(Q),F.push(q)),F}},{key:"updateCrossPoints",value:function(f){var y=f.map(function(Bt){return Bt}),w=f[0],S=f[1],N=f[y.length-2],F=f[y.length-1],q=this.sourceNode,Q=this.targetNode,he=q.modelType,Se=Q.modelType,je=So(w,S),tt=y[0];switch(he){case Or.RECT_NODE:q.radius!==0&&(Hs(w,q)||(tt=of(w,je,q)));break;case Or.CIRCLE_NODE:tt=os(w,je,q);break;case Or.ELLIPSE_NODE:tt=af(w,je,q);break;case Or.DIAMOND_NODE:case Or.POLYGON_NODE:tt=lf(w,je,q)}tt&&(y[0]=tt);var nt=So(N,F),gt=y[y.length-1];switch(Se){case Or.RECT_NODE:Q.radius!==0&&(Hs(F,Q)||(gt=of(F,nt,Q)));break;case Or.CIRCLE_NODE:gt=os(F,nt,Q);break;case Or.ELLIPSE_NODE:gt=af(F,nt,Q);break;case Or.DIAMOND_NODE:case Or.POLYGON_NODE:gt=lf(F,nt,Q)}return gt&&(y[y.length-1]=gt),y}},{key:"getData",value:function(){var f=Ia(no(h.prototype),"getData",this).call(this),y=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(N){N.x+=f,N.y+=y});var w=this.pointsList[0];this.startPoint=Object.assign({},w);var S=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},S),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var w=f.start,S=f.end,N=f.startIndex,F=f.endIndex,q=f.direction,Q=this.pointsList,he=Q;return q===co.HORIZONTAL?(Q[N]={x:w.x,y:w.y+y.y},Q[F]={x:S.x,y:S.y+y.y},he=this.pointsList.map(function(Se){return Se})):q===co.VERTICAL&&(Q[N]={x:w.x+y.x,y:w.y},Q[F]={x:S.x+y.x,y:S.y},he=this.pointsList.map(function(Se){return Se})),this.updatePointsAfterDrag(he),this.draggingPointList=he,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Q[N]),end:Object.assign({},Q[F]),startIndex:N,endIndex:F,direction:q}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var w=f.start,S=f.end,N=f.startIndex,F=f.endIndex,q=f.direction,Q=this.pointsList;if(q===co.HORIZONTAL){Q[N]={x:w.x,y:w.y+y.y},Q[F]={x:S.x,y:S.y+y.y};var he=this.pointsList.map(function(sn){return sn});if(N!==0&&F!==this.pointsList.length-1&&(he=this.removeCrossPoints(N,F,he)),N===0){var Se={x:w.x,y:w.y+y.y};if(!Ca(Se,this.sourceNode)){var je=this.sourceNode.anchors;he=this.getDraggingPoints(q,"start",Se,je,he)}}if(F===this.pointsList.length-1){var tt={x:S.x,y:S.y+y.y};if(!Ca(tt,this.targetNode)){var nt=this.targetNode.anchors;he=this.getDraggingPoints(q,"end",tt,nt,he)}}this.updatePointsAfterDrag(he),this.draggingPointList=he}else if(q===co.VERTICAL){Q[N]={x:w.x+y.x,y:w.y},Q[F]={x:S.x+y.x,y:S.y};var gt=this.pointsList.map(function(sn){return sn});if(N!==0&&F!==this.pointsList.length-1&&(gt=this.removeCrossPoints(N,F,gt)),N===0){var Bt={x:w.x+y.x,y:w.y};if(!Ca(Bt,this.sourceNode)){var vn=this.sourceNode.anchors;gt=this.getDraggingPoints(q,"start",Bt,vn,gt)}}if(F===this.pointsList.length-1){var dn={x:S.x+y.x,y:S.y};if(!Ca(dn,this.targetNode)){var Xn=this.targetNode.anchors;gt=this.getDraggingPoints(q,"end",dn,Xn,gt)}}this.updatePointsAfterDrag(gt),this.draggingPointList=gt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},Q[N]),end:Object.assign({},Q[F]),startIndex:N,endIndex:F,direction:q}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Uo(bo(this.points));this.pointsList=f.map(function(S){return S}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var w=f[f.length-1];this.endPoint=Object.assign({},w)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(w){return"".concat(w.x,",").concat(w.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,w=f.endPoint,S=f.sourceNode,N=f.targetNode,F=cr({x:y.x,y:y.y},{x:w.x,y:w.y},S,N,this.offset||0);this.pointsList=F,this.initPoints()}}])&&oi(i.prototype,l),h}(as),ko=xi(Gn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xi(Gn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"initPoints"),Gn.prototype),xi(Gn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePoints"),Gn.prototype),xi(Gn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateStartPoint"),Gn.prototype),xi(Gn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveStartPoint"),Gn.prototype),xi(Gn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateEndPoint"),Gn.prototype),xi(Gn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveEndPoint"),Gn.prototype),xi(Gn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsList"),Gn.prototype),xi(Gn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendStart"),Gn.prototype),xi(Gn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendSimple"),Gn.prototype),xi(Gn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppend"),Gn.prototype),xi(Gn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendEnd"),Gn.prototype),xi(Gn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsAfterDrag"),Gn.prototype),xi(Gn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustStart"),Gn.prototype),xi(Gn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustEnd"),Gn.prototype),xi(Gn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateAfterAdjustStartAndEnd"),Gn.prototype),Gn),B=function(a){var i=a.start,l=a.end,u=a.offset,h=a.verticalLength,f=a.type,y={leftX:0,leftY:0,rightX:0,rightY:0},w=Math.atan((l.y-i.y)/(l.x-i.x)),S=Math.atan(u/h),N=Math.sqrt(h*h+u*u);return f==="start"?l.x>=i.x?(y.leftX=i.x+N*Math.sin(w+S),y.leftY=i.y-N*Math.cos(w+S),y.rightX=i.x-N*Math.sin(w-S),y.rightY=i.y+N*Math.cos(w-S)):(y.leftX=i.x-N*Math.sin(w+S),y.leftY=i.y+N*Math.cos(w+S),y.rightX=i.x+N*Math.sin(w-S),y.rightY=i.y-N*Math.cos(w-S)):f==="end"&&(l.x>=i.x?(y.leftX=l.x+N*Math.sin(w-S),y.leftY=l.y-N*Math.cos(w-S),y.rightX=l.x-N*Math.sin(w+S),y.rightY=l.y+N*Math.cos(w+S)):(y.leftX=l.x-N*Math.sin(w-S),y.leftY=l.y+N*Math.cos(w-S),y.rightX=l.x+N*Math.sin(w+S),y.rightY=l.y-N*Math.cos(w+S))),y},ie={x:1,y:0,z:0};function be(a,i,l,u,h){for(var f=function(Se){if(Se<0||Se>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-Se,3)+3*i.x*Se*Math.pow(1-Se,2)+3*l.x*Math.pow(Se,2)*(1-Se)+u.x*Math.pow(Se,3),y:a.y*Math.pow(1-Se,3)+3*i.y*Se*Math.pow(1-Se,2)+3*l.y*Math.pow(Se,2)*(1-Se)+u.y*Math.pow(Se,3)}},y=0,w=2,S=u.x,N=u.y,F=u;y<h&&w<50;){var q=F=f(1-w/100),Q=q.x,he=q.y;y=la(S,N,Q,he),w++}return F}function rt(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function ht(a){return u=function(f,y){return f.x*y.y-f.y*y.x}(i=ie,l=a),h=Math.acos(function(f,y){var w=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(S,N,F){return S+N*w[F]})}(rt(i),rt(l))),u>=0?h:-h;var i,l,u,h}function et(a){return a*(180/Math.PI)}function st(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Nt(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?st(Object(l),!0).forEach(function(u){It(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):st(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function It(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ct(a){return function(i){if(Array.isArray(i))return Rt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Ut(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ct(a){return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ct(a)}function Gt(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||Ut(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ut(a,i){if(a){if(typeof a=="string")return Rt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Rt(a,i):void 0}}function Rt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var Et=function(a,i){var l;switch(a.type){case"line":default:l=new Ci(a,i);break;case"polyline":l=new ff(a,i)}return l},qe=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},lt=function(a){var i=[],l={};return a.forEach(function(u){var h="".concat(u.x,"-").concat(u.y);u.id=h,l[h]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Ft=function(a,i){var l=[a,{x:a.x,y:i.y},i];return lt(l)},Kt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},At=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?co.HORIZONTAL:co.VERTICAL},Jt=function(a,i,l){return At(l,i)===co.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},Tt=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),h=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return{centerX:(l+h)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:h,maxY:f,height:f-u,width:h-l}},Wt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(F){l.push(F.x),u.push(F.y)});var h=Math.min.apply(Math,l),f=Math.max.apply(Math,l),y=Math.min.apply(Math,u),w=Math.max.apply(Math,u),S=f-h,N=w-y;return i&&(S+=i,N+=i),{centerX:(h+f)/2,centerY:(y+w)/2,maxX:f,maxY:w,minX:h,minY:y,x:(h+f)/2,y:(y+w)/2,height:N,width:S}},Ot=function(a){var i=a.minX,l=a.minY,u=a.maxX,h=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:h},{x:i,y:h}]},Xt=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},kn=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},zn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},Lt=function(a,i){return kn(a,i.x).concat(zn(a,i.y))},Mt=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},xt=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Cn=function(a,i,l,u,h){return Mt(a,i)+Mt(a,l)+xt(a,[i,l,u,h])},nr=function a(i,l,u,h,f){f||(f=0),i.unshift(l[h]),u[h]&&u[h]!==h&&f<=100&&a(i,l,u,u[h],f+1)},un=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},er=function(a,i,l,u){var h=i.x-a.x,f=i.y-a.y,y=u.x-l.x,w=u.y-l.y,S=(-f*(a.x-l.x)+h*(a.y-l.y))/(-y*f+h*w),N=(y*(a.y-l.y)-w*(a.x-l.x))/(-y*f+h*w);return S>=0&&S<=1&&N>=0&&N<=1},Wn=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=Gt(Ot(l),4),h=u[0],f=u[1],y=u[2],w=u[3];return er(a,i,h,f)||er(a,i,h,w)||er(a,i,f,y)||er(a,i,y,w)},rr=function(a,i,l,u){var h=[];return a.forEach(function(f){f!==i&&(f.x!==i.x&&f.y!==i.y||Wn(f,i,l)||Wn(f,i,u)||h.push(f))}),lt(h)},gr=function(a,i,l,u,h,f,y){var w=[],S=[i],N={},F={},q={};F[i.id]=0,q[i.id]=Cn(i,l,i);var Q={};a.forEach(function(je){Q[je.id]=je});for(var he=function(){var je=void 0,tt=1/0;if(S.forEach(function(gt){q[gt.id]<tt&&(tt=q[gt.id],je=gt)}),je===l){var nt=[];return nr(nt,Q,N,l.id),{v:nt}}un(S,je),w.push(je),rr(a,je,u,h).forEach(function(gt){if(w.indexOf(gt)===-1){S.indexOf(gt)===-1&&S.push(gt);var Bt=q[je.id]+Mt(je,gt);F[gt.id]&&Bt>=F[gt.id]||(N[gt.id]=je.id,F[gt.id]=Bt,q[gt.id]=F[gt.id]+Cn(gt,l,i,f,y))}})};S.length;){var Se=he();if(ct(Se)==="object")return Se.v}return[i,l]},No=function(a){return Wi(a)},Uo=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],h=a[i+1];l.x===u.x&&u.x===h.x||l.y===u.y&&u.y===h.y?a.splice(i,1):i++}return a},cr=function(a,i,l,u,h){var f=No(l),y=No(u),w=Kt(f,h),S=Kt(y,h),N=Jt(w,f,a),F=Jt(S,y,i);if(qe(w,S)){var q=ii(a,i,N,F);return[a,N].concat(Ct(q),[F,i])}var Q=Wt([N,F]),he=Tt(w,Q),Se=Tt(S,Q),je=[];je=(je=je.concat(Ot(he))).concat(Ot(Se));var tt={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[Q,he,Se].forEach(function(gt){je=je.concat(Lt(gt,tt).filter(function(Bt){return Xt(Bt,w)&&Xt(Bt,S)}))}),[{x:N.x,y:F.y},{x:F.x,y:N.y}].forEach(function(gt){Xt(gt,w)&&Xt(gt,S)&&je.push(gt)}),je.unshift(N),je.push(F),je=lt(je);var nt=gr(je,N,F,f,y,a,i);return nt.unshift(a),nt.push(i),nt.length>2&&(nt=Uo(nt)),lt(nt)},zo=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],h=la(l.x,l.y,u.x,u.y),f=1;f<a.length-1;f++){var y=a[f],w=a[f+1],S=la(y.x,y.y,w.x,w.y);S>h&&(h=S,l=y,u=w)}i=[l,u]}return i},ro=function(a,i,l){var u=Ca(a,l),h=Ca(i,l);return u&&h},Ro=function(a,i,l){var u=Ca(a,l),h=Ca(i,l);return!(u&&h)&&(u||h)},Vo=function(a,i,l){for(var u,h,f=Wi(l),y=Ot(f),w=0;w<y.length;w++)er(a,i,y[w],y[(w+1)%y.length])&&(h=[y[w],y[(w+1)%y.length]]);return h&&(u=function(S,N,F,q){var Q=(N.y-S.y)*(q.x-F.x)-(S.x-N.x)*(F.y-q.y);if(Q===0)return!1;var he=((N.x-S.x)*(q.x-F.x)*(F.y-S.y)+(N.y-S.y)*(q.x-F.x)*S.x-(q.y-F.y)*(N.x-S.x)*F.x)/Q,Se=-((N.y-S.y)*(q.y-F.y)*(F.x-S.x)+(N.x-S.x)*(q.y-F.y)*S.y-(q.x-F.x)*(N.y-S.y)*F.y)/Q;return(he-S.x)*(he-N.x)<=0&&(Se-S.y)*(Se-N.y)<=0&&(he-F.x)*(he-q.x)<=0&&(Se-F.y)*(Se-q.y)<=0&&{x:he,y:Se}}(a,i,h[0],h[1])),u},So=function(a,i){var l;return a.x===i.x?l=co.VERTICAL:a.y===i.y&&(l=co.HORIZONTAL),l},bo=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var h=Gt(u.split(","),2),f=h[0],y=h[1];l.push({x:Number(f),y:Number(y)})}),l},ii=function(a,i,l,u){var h=[];if(So(a,l)===So(i,u))a.y===l.y?(h.push({x:l.x,y:(l.y+u.y)/2}),h.push({x:u.x,y:(l.y+u.y)/2})):(h.push({x:(l.x+u.x)/2,y:l.y}),h.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},y=xl(f,a,l),w=xl(f,i,u);if(y||w)f={x:u.x,y:l.y};else{var S=Ao(f,a,l),N=Ao(f,i,u);S&&N&&(f={x:u.x,y:l.y})}h.push(f)}return h},Ao=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Jn=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},di=null,Nr=function(a,i){di||(di=document.createElement("canvas"));var l=di.getContext("2d");return l.font=i,l.measureText(a).width},Dn=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var h={start:l,end:u,offset:10,verticalLength:5},f=B(Nt(Nt({},h),{},{type:"start"})),y=B(Nt(Nt({},h),{},{type:"end"}));i="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},fr=function(a){var i=a.start,l=a.end,u=a.sourceNode,h=a.targetNode,f=a.offset,y=Wi(u),w=Wi(h),S=Kt(y,f),N=Kt(w,f);return{sNext:Jt(S,y,i),ePre:Jt(N,w,l)}},Hn=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[fo(i[0]),fo(i[1]),fo(i[2]),fo(i[3])]},fo=function(a){var i=Gt(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},La=function(a,i){var l=Gt(a,4);return[be(l[0],l[1],l[2],l[3],i),a[3]]},Ql=function(a,i){for(var l,u=a.x,h=a.y,f=bo(i),y=Number.MAX_SAFE_INTEGER,w=[],S=0;S<f.length;S++)w.push({start:f[S],end:f[(S+1)%f.length]});if(w.forEach(function(Q){var he=Q.start,Se=Q.end;if(he.x===Se.x){var je={x:he.x,y:h};if(xl(je,he,Se)){var tt=Math.abs(he.x-u);tt<y&&(y=tt,l=je)}}else if(he.y===Se.y){var nt={x:u,y:he.y};if(xl(nt,he,Se)){var gt=Math.abs(he.y-h);gt<y&&(y=gt,l=nt)}}}),!l){var N=w[0],F=N.start,q=N.end;l={x:F.x+(q.x-F.x)/2,y:F.y+(q.y-F.y)/2}}return l},ye=function(a){return Za(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},ot=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function Qe(a,i){return typeof i!="function"?function(l,u,h){return Object.assign({type:a.edgeType},h)}:function(l,u,h){var f=i(l,u,h);return f?typeof f=="string"?Object.assign({},h,{type:f}):Object.assign({type:f},h):{type:a.edgeType}}}r(208);var tn=function(){};function hr(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function se(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var te=function(){function a(u){var h=this,f=u.onDragStart,y=f===void 0?tn:f,w=u.onDragging,S=w===void 0?tn:w,N=u.onDragEnd,F=N===void 0?tn:N,q=u.eventType,Q=q===void 0?"":q,he=u.eventCenter,Se=he===void 0?null:he,je=u.step,tt=je===void 0?1:je,nt=u.isStopPropagation,gt=nt===void 0||nt,Bt=u.model,vn=Bt===void 0?null:Bt,dn=u.data,Xn=dn===void 0?null:dn;(function(sn,Ln){if(!(sn instanceof Ln))throw new TypeError("Cannot call a class as a function")})(this,a),se(this,"onDragStart",void 0),se(this,"onDragging",void 0),se(this,"onDragEnd",void 0),se(this,"step",void 0),se(this,"isStopPropagation",void 0),se(this,"isDragging",!1),se(this,"isStartDragging",!1),se(this,"startX",0),se(this,"startY",0),se(this,"sumDeltaX",0),se(this,"sumDeltaY",0),se(this,"eventType",void 0),se(this,"eventCenter",void 0),se(this,"model",void 0),se(this,"data",void 0),se(this,"startTime",void 0),se(this,"handleMouseDown",function(sn){var Ln,wn,Dr,$r=(Ln=window)===null||Ln===void 0?void 0:Ln.document;if(sn.button===0){h.isStopPropagation&&sn.stopPropagation(),h.isStartDragging=!0,h.startX=sn.clientX,h.startY=sn.clientY,$r.addEventListener("mousemove",h.handleMouseMove,!1),$r.addEventListener("mouseup",h.handleMouseUp,!1);var sr=(wn=h.model)===null||wn===void 0?void 0:wn.getData();(Dr=h.eventCenter)===null||Dr===void 0||Dr.emit(Rn["".concat(h.eventType,"_MOUSEDOWN")],{e:sn,data:h.data||sr}),h.startTime=new Date().getTime()}}),se(this,"handleMouseMove",function(sn){if(h.isStopPropagation&&sn.stopPropagation(),h.isStartDragging&&(h.sumDeltaX+=sn.clientX-h.startX,h.sumDeltaY+=sn.clientY-h.startY,h.startX=sn.clientX,h.startY=sn.clientY,h.step<=1||Math.abs(h.sumDeltaX)>h.step||Math.abs(h.sumDeltaY)>h.step)){var Ln,wn=h.sumDeltaX%h.step,Dr=h.sumDeltaY%h.step,$r=h.sumDeltaX-wn,sr=h.sumDeltaY-Dr;h.sumDeltaX=wn,h.sumDeltaY=Dr;var qr,gi=(Ln=h.model)===null||Ln===void 0?void 0:Ln.getData();h.isDragging||((qr=h.eventCenter)===null||qr===void 0||qr.emit(Rn["".concat(h.eventType,"_DRAGSTART")],{e:sn,data:h.data||gi}),h.onDragStart({event:sn})),h.isDragging=!0,Promise.resolve().then(function(){var bi,wa;h.onDragging({deltaX:$r,deltaY:sr,event:sn}),(bi=h.eventCenter)===null||bi===void 0||bi.emit(Rn["".concat(h.eventType,"_MOUSEMOVE")],{e:sn,data:h.data||gi}),(wa=h.eventCenter)===null||wa===void 0||wa.emit(Rn["".concat(h.eventType,"_DRAG")],{e:sn,data:h.data||gi})})}}),se(this,"handleMouseUp",function(sn){var Ln=window.document;h.isStartDragging=!1,h.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var wn,Dr,$r;Ln.removeEventListener("mousemove",h.handleMouseMove,!1),Ln.removeEventListener("mouseup",h.handleMouseUp,!1);var sr=(wn=h.model)===null||wn===void 0?void 0:wn.getData();(Dr=h.eventCenter)===null||Dr===void 0||Dr.emit(Rn["".concat(h.eventType,"_MOUSEUP")],{e:sn,data:h.data||sr}),h.isDragging&&(h.isDragging=!1,h.onDragEnd({event:sn}),($r=h.eventCenter)===null||$r===void 0||$r.emit(Rn["".concat(h.eventType,"_DROP")],{e:sn,data:h.data||sr}))})}),se(this,"cancelDrag",function(){var sn,Ln=(sn=window)===null||sn===void 0?void 0:sn.document;Ln.removeEventListener("mousemove",h.handleMouseMove,!1),Ln.removeEventListener("mouseup",h.handleMouseUp,!1),h.onDragEnd({event:null}),h.isDragging=!1}),this.onDragStart=y,this.onDragging=S,this.onDragEnd=F,this.step=tt,this.isStopPropagation=gt,this.eventType=Q,this.eventCenter=Se,this.model=vn,this.data=Xn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&hr(i.prototype,l),a}();function Te(a){return Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Te(a)}function We(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Ye(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function De(a,i,l){return i&&Ye(a.prototype,i),l&&Ye(a,l),a}function Me(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&d(a,i)}function Be(a){var i=Ze();return function(){var l,u=m(a);if(i){var h=m(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return de(this,l)}}function de(a,i){if(i&&(Te(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(a)}function Ee(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fe(a){var i=typeof Map=="function"?new Map:void 0;return fe=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,h)}function h(){return Ge(l,arguments,m(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),d(h,l)},fe(a)}function Ge(a,i,l){return Ge=Ze()?Reflect.construct:function(u,h,f){var y=[null];y.push.apply(y,h);var w=new(Function.bind.apply(u,y));return f&&d(w,f.prototype),w},Ge.apply(null,arguments)}function Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a,i){return d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d(a,i)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},m(a)}function O(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function C(a,i){return a instanceof ee&&i instanceof ee}var V=function(a){Me(l,a);var i=Be(l);function l(u,h,f){var y;return We(this,l),O(Ee(y=i.call(this,3)),"x",void 0),O(Ee(y),"y",void 0),O(Ee(y),"z",void 0),y[0]=u,y[1]=h,y[2]=f,y.x=u,y.y=h,y.z=f,Object.setPrototypeOf(Ee(y),l.prototype),y}return De(l,[{key:"add",value:function(u){if(C(this,u))return new ee(this.x+u.x,this.y+u.y);var h=this.z+u.z;return new pe((this.x+u.x)/h,(this.y+u.y)/h)}},{key:"subtract",value:function(u){if(C(this,u))return new ee(this.x-u.x,this.y-u.y);var h=this.z-u.z;return h===0?new ee(this.x-u.x,this.y-u.y):new pe((this.x-u.x)/h,(this.y-u.y)/h)}}]),l}(fe(Array)),ee=function(a){Me(l,a);var i=Be(l);function l(u,h,f){var y;return We(this,l),y=i.call(this,u,h,f??0),Object.setPrototypeOf(Ee(y),l.prototype),y}return De(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var h=this;return u.reduce(function(f,y,w){return f+y*h[w]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var h=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return h>=0?f:-f}}]),l}(V),pe=function(a){Me(l,a);var i=Be(l);function l(u,h){var f;return We(this,l),f=i.call(this,u,h,1),Object.setPrototypeOf(Ee(f),l.prototype),f}return De(l,[{key:"toString",value:function(){return"Point"}}]),l}(V);r(67),r(218);function we(a){return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},we(a)}function Ue(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||wt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vt(a){return function(i){if(Array.isArray(i))return Vt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||wt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wt(a,i){if(a){if(typeof a=="string")return Vt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Vt(a,i):void 0}}function Vt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Tn(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function On(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yn(a,i,l){return i&&On(a.prototype,i),l&&On(a,l),a}function Pt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Vn(a,i)}function Qt(a){var i=jr();return function(){var l,u=tr(a);if(i){var h=tr(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return dr(this,l)}}function dr(a,i){if(i&&(we(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bn(a)}function bn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ar(a){var i=typeof Map=="function"?new Map:void 0;return ar=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,h)}function h(){return or(l,arguments,tr(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),Vn(h,l)},ar(a)}function or(a,i,l){return or=jr()?Reflect.construct:function(u,h,f){var y=[null];y.push.apply(y,h);var w=new(Function.bind.apply(u,y));return f&&Vn(w,f.prototype),w},or.apply(null,arguments)}function jr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vn(a,i){return Vn=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Vn(a,i)}function tr(a){return tr=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},tr(a)}function Ho(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var it,eu,Si,Pu,us,Ed,Ap,df,Zs,Zv,Jv,Tp,Rh,Js=function(a){Pt(l,a);var i=Qt(l);function l(){var u;Tn(this,l);for(var h=arguments.length,f=new Array(h),y=0;y<h;y++)f[y]=arguments[y];return Ho(bn(u=i.call(this,f.length)),"rows",void 0),Ho(bn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(w,S){u[S]=w}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(bn(u),l.prototype),u}return Yn(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return vt(this.map(function(h){return h[u]}))}},{key:"transpose",value:function(){for(var u=[],h=0;h<this.columns;h++)u.push(this.getColumn(h));return or(l,u)}},{key:"cross",value:function(u){var h=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),w=function(N){var F=u.getColumn(N);h[f][N]=y.reduce(function(q,Q,he){return q+Q*F[he]},0)},S=0;S<u.columns;S++)w(S);return or(l,vt(h))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new pe(u[0],u[1])})}},{key:"toString",value:function(){var u=Ue(this[0],2),h=u[0],f=u[1],y=Ue(this[1],2),w=y[0],S=y[1],N=Ue(this[2],2),F=N[0],q=N[1];return"matrix(".concat(h," ").concat(f," ").concat(w," ").concat(S," ").concat(F," ").concat(q,")")}},{key:"translate",value:function(u,h){return this.cross(new Qs(u,h))}},{key:"rotate",value:function(u){return this.cross(new Mp(u))}},{key:"scale",value:function(u,h){return this.cross(new Qv(u,h))}}]),l}(ar(Array)),Mp=function(a){Pt(l,a);var i=Qt(l);function l(u){var h;return Tn(this,l),h=i.call(this,new ee(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new ee(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new ee(0,0,1)),Object.setPrototypeOf(bn(h),l.prototype),h}return Yn(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Js),Qv=function(a){Pt(l,a);var i=Qt(l);function l(u,h){var f;return Tn(this,l),Ho(bn(f=i.call(this,new ee(u,0,0),new ee(0,h,0),new ee(0,0,1))),"sx",void 0),Ho(bn(f),"sy",void 0),f.sx=u,f.sy=h,Object.setPrototypeOf(bn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Js),Qs=function(a){Pt(l,a);var i=Qt(l);function l(u,h){var f;return Tn(this,l),Ho(bn(f=i.call(this,new ee(1,0,0),new ee(0,1,0),new ee(u,h,1))),"tx",void 0),Ho(bn(f),"ty",void 0),f.tx=u,f.ty=h,Object.setPrototypeOf(bn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Js),kp={node:!1,edge:!1},RN={node:!0,edge:!0};function BE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function am(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?BE(Object(l),!0).forEach(function(u){ss(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):BE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Dh(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||UE(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ch(a){return function(i){if(Array.isArray(i))return Ib(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||UE(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UE(a,i){if(a){if(typeof a=="string")return Ib(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Ib(a,i):void 0}}function Ib(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lm(a){return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lm(a)}function Nu(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function DN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ss(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Kn(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var VE,GE=200,WE=(it=function(){function a(u){(function(he,Se){if(!(he instanceof Se))throw new TypeError("Cannot call a class as a function")})(this,a),ss(this,"rootEl",void 0),Nu(this,"width",eu,this),Nu(this,"height",Si,this),ss(this,"theme",void 0),ss(this,"eventCenter",void 0),ss(this,"modelMap",new Map),ss(this,"topElement",void 0),ss(this,"animation",void 0),ss(this,"idGenerator",void 0),ss(this,"edgeGenerator",void 0),ss(this,"nodeMoveRules",[]),ss(this,"customTrajectory",void 0),Nu(this,"edgeType",Pu,this),Nu(this,"nodes",us,this),Nu(this,"edges",Ed,this),Nu(this,"overlapMode",Ap,this),Nu(this,"background",df,this),Nu(this,"transformModel",Zs,this),Nu(this,"editConfigModel",Zv,this),Nu(this,"gridSize",Jv,this),Nu(this,"partial",Tp,this),Nu(this,"fakerNode",Rh,this);var h,f=u.container,y=u.background,w=y===void 0?{}:y,S=u.grid,N=u.idGenerator,F=u.edgeGenerator,q=u.animation,Q=u.customTrajectory;this.background=w,lm(S)==="object"&&(this.gridSize=S.size),this.rootEl=f,this.editConfigModel=new Qf(u),this.eventCenter=new Yc,this.transformModel=new op(this.eventCenter,u),this.theme=Ls(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(h=q)&&typeof h!="boolean"?Ou(xo(kp),h):xo(h===!0?RN:kp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=N,this.customTrajectory=Q,this.edgeGenerator=Qe(this,F),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=tl()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,h,f){return u[h.id]={index:f,model:h},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,h,f){return u[h.id]={index:f,model:h},u},{})}},{key:"modelsMap",get:function(){return[].concat(Ch(this.nodes),Ch(this.edges)).reduce(function(u,h){return u[h.id]=h,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(N){return u.push(N)}),this.edges.forEach(function(N){return u.push(N)}),u=u.sort(function(N,F){return N.zIndex-F.zIndex});for(var h=[],f=[-200,-200],y=[this.width+GE,this.height+GE],w=0;w<u.length;w++){var S=u[w];S.visible&&(!this.partial||S.isSelected||this.isElementInArea(S,f,y,!1,!1))&&h.push(S)}return h}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===Xr.TEXT_EDIT}),h=this.edges.find(function(f){return f.state===Xr.TEXT_EDIT});return u||h}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(h){h.isSelected&&u.set(h.id,h)}),this.edges.forEach(function(h){h.isSelected&&u.set(h.id,h)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(h){h.isSelected&&u.push(h)}),u}},{key:"getAreaElement",value:function(u,h){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=arguments.length>4&&arguments[4]!==void 0&&arguments[4],S=[],N=[];this.nodes.forEach(function(Q){return N.push(Q)}),this.edges.forEach(function(Q){return N.push(Q)});for(var F=0;F<N.length;F++){var q=N[F];w&&!q.visible||!this.isElementInArea(q,u,h,f,y)||S.push(q)}return S}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var h;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(h=this.nodesMap[u])===null||h===void 0?void 0:h.model}},{key:"getPointByClient",value:function(u){var h=u.x,f=u.y,y=this.rootEl.getBoundingClientRect(),w={x:h-y.left,y:f-y.top},S=Dh(this.transformModel.HtmlPointToCanvasPoint([w.x,w.y]),2);return{domOverlayPosition:w,canvasOverlayPosition:{x:S[0],y:S[1]}}}},{key:"isElementInArea",value:function(u,h,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===so.NODE){for(var S=Wi(u=u),N=S.minX,F=S.minY,q=S.maxX,Q=S.maxY,he=[{x:N,y:F},{x:q,y:F},{x:q,y:Q},{x:N,y:Q}],Se=w,je=0;je<he.length;je++){var tt=he[je],nt=tt.x,gt=tt.y,Bt=this.transformModel.CanvasPointToHtmlPoint([nt,gt]),vn=Dh(Bt,2);if(nt=vn[0],gt=vn[1],dd([nt,gt],h,f)!==w){Se=!w;break}}return Se}if(u.BaseType===so.EDGE){var dn=u=u,Xn=dn.startPoint,sn=dn.endPoint,Ln=this.transformModel.CanvasPointToHtmlPoint([Xn.x,Xn.y]),wn=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),Dr=dd(Ln,h,f),$r=dd(wn,h,f);return y?Dr&&$r:Dr||$r}return!1}},{key:"graphDataToModel",value:function(u){var h=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=qf(u.nodes,function(f){return h.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=qf(u.edges,function(f){var y=h.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,h)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&u.push(y)});var h=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&h.push(y)}),{nodes:h,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,h=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){u=!0;break}h.push(y.getHistoryData())}if(u)return!1;for(var w=!1,S=[],N=0;N<this.edges.length;N++){var F=this.edges[N];if(F.isDragging){w=!0;break}S.push(F.getHistoryData())}return!w&&{nodes:h,edges:S}}},{key:"getEdgeModelById",value:function(u){var h;return(h=this.edgesMap[u])===null||h===void 0?void 0:h.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var h=[],f=0;f<this.edges.length;f++){var y=this.edges[f],w=this.edges[f].sourceNodeId===u,S=this.edges[f].targetNodeId===u;(w||S)&&h.push(y)}return h}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],h=this.selectElements,f={nodes:[],edges:[]};return h.forEach(function(y){if(y.BaseType===so.NODE&&f.nodes.push(y.getData()),y.BaseType===so.EDGE){var w=y.getData(),S=h.get(w.sourceNodeId)&&h.get(w.targetNodeId);(u||S)&&f.edges.push(w)}}),f}},{key:"updateAttributes",value:function(u,h){this.getElement(u).updateAttributes(h)}},{key:"changeNodeId",value:function(u,h){return h||(h=tl()),this.nodesMap[h]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=h),f.targetNodeId===u&&(f.targetNodeId=h)}),this.nodesMap[u].model.id=h,this.nodesMap[h]=this.nodesMap[u],h):""}},{key:"changeEdgeId",value:function(u,h){return h||(h=tl()),this.edgesMap[h]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(h)}),h):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,h){return this.modelMap.set(u,h)}},{key:"toFront",value:function(u){var h,f,y,w=((h=this.nodesMap[u])===null||h===void 0?void 0:h.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);w&&(this.overlapMode===Oo.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),w.setZIndex(9999),this.topElement=w),this.overlapMode===Oo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,h){var f,y,w,S=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[u])===null||y===void 0?void 0:y.model);S&&(typeof h=="number"&&(w=h),h==="top"&&(w=Zl()),h==="bottom"&&(w=--sf),S.setZIndex(w))}},{key:"deleteNode",value:function(u){var h=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Rn.NODE_DELETE,{data:h})}},{key:"addNode",value:function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=ni(u);y.id&&this.nodesMap[u.id]&&delete y.id;var w=this.getModelAfterSnapToGrid(y);this.nodes.push(w);var S=w.getData(),N={data:S};return f&&(N.e=f),this.eventCenter.emit(h,N),w}},{key:"getModelAfterSnapToGrid",value:function(u){var h=this.getModel(u.type);if(!h)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,y=u.y;return f&&y&&(u.x=El(f,this.gridSize),u.y=El(y,this.gridSize),lm(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-y)),new h(u,this)}},{key:"cloneNode",value:function(u){var h=this.getNodeModelById(u),f=h.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),h.setSelected(!1),y.getData()}},{key:"moveNode",value:function(u,h,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[u];if(w){var S=w.model,N=S.getMoveDistance(h,f,y),F=Dh(N,2);h=F[0],f=F[1],this.moveEdge(u,h,f)}}},{key:"moveNode2Coordinate",value:function(u,h,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[u];if(w){var S=w.model,N=S.x,F=S.y,q=h-N,Q=f-F;this.moveNode(u,q,Q,y)}}},{key:"editText",value:function(u){this.setElementStateById(u,Xr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var h=ni(u),f=h.type;f||(f=this.edgeType),h.id&&this.edgesMap[h.id]&&delete h.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var w=new y(am(am({},h),{},{type:f}),this),S=w.getData();return this.edges.push(w),this.eventCenter.emit(Rn.EDGE_ADD,{data:S}),w}},{key:"moveEdge",value:function(u,h,f){for(var y=0;y<this.edges.length;y++){var w=this.edges[y],S=w.textPosition,N=S.x,F=S.y,q=this.edges[y].sourceNodeId===u,Q=this.edges[y].targetNodeId===u;q&&w.moveStartPoint(h,f),Q&&w.moveEndPoint(h,f),(q||Q)&&this.handleEdgeTextMove(w,N,F)}}},{key:"handleEdgeTextMove",value:function(u,h,f){var y;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Or.POLYLINE_EDGE&&(y=u.text)!==null&&y!==void 0&&y.value){var w=u.text,S=Ql(w,u.points);u.moveText(S.x-w.x,S.y-w.y)}else{var N=u.textPosition,F=N.x,q=N.y;u.moveText(F-h,q-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,h){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===h){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Rn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var h=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(h,1),this.eventCenter.emit(Rn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var h=0;h<this.edges.length;h++)if(this.edges[h].sourceNodeId===u){var f=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Rn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var h=0;h<this.edges.length;h++)if(this.edges[h].targetNodeId===u){var f=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Rn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,h,f){this.nodes.forEach(function(y){y.id===u?y.setElementState(h,f):y.setElementState(Xr.DEFAULT)}),this.edges.forEach(function(y){y.id===u?y.setElementState(h,f):y.setElementState(Xr.DEFAULT)})}},{key:"updateText",value:function(u,h){this.nodes.forEach(function(f){f.id===u&&f.updateText(h)}),this.edges.forEach(function(f){f.id===u&&f.updateText(h)})}},{key:"selectNodeById",value:function(u){var h,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(h=this.nodesMap[u])===null||h===void 0?void 0:h.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var h,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(h=this.edgesMap[u])===null||h===void 0?void 0:h.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(u){var h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];h||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(h){h==null||h.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Oo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,h,f){for(var y=this,w=arguments.length>3&&arguments[3]!==void 0&&arguments[3],S=u.reduce(function(dn,Xn){var sn=y.nodesMap[Xn].model.getMoveDistance(h,f,w);return dn[Xn]=sn,dn},{}),N=0;N<this.edges.length;N++){var F=this.edges[N],q=F.textPosition,Q=q.x,he=q.y,Se=S[F.sourceNodeId],je=S[F.targetNodeId],tt=void 0,nt=void 0;if(Se&&je&&F.modelType===Or.POLYLINE_EDGE){var gt=Dh(Se,2);tt=gt[0],nt=gt[1],F.updatePointsList(tt,nt)}else{if(Se){var Bt=Dh(Se,2);tt=Bt[0],nt=Bt[1],F.moveStartPoint(tt,nt)}if(je){var vn=Dh(je,2);tt=vn[0],nt=vn[1],F.moveEndPoint(tt,nt)}}(Se||je)&&this.handleEdgeTextMove(F,Q,he)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,h){var f=this.getNodeModelById(u);if(f){var y=f.getData();y.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));var S=new w(y,this);this.nodes.splice(this.nodesMap[u].index,1,S),this.getNodeEdges(u).forEach(function(N){if(N.sourceNodeId===u){var F=Xs(S,N.startPoint,S.width,S.height);N.updateStartPoint(F)}if(N.targetNodeId===u){var q=Xs(S,N.endPoint,S.width,S.height);N.updateEndPoint(q)}})}}},{key:"changeEdgeType",value:function(u,h){var f=this.getEdgeModelById(u);if(f&&f.type!==h){var y=f.getData();y.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var S=new w(y,this);this.edges.splice(this.edgesMap[u].index,1,S)}}},{key:"getNodeIncomingEdge",value:function(u){var h=[];return this.edges.forEach(function(f){f.targetNodeId===u&&h.push(f)}),h}},{key:"getNodeOutgoingEdge",value:function(u){var h=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&h.push(f)}),h}},{key:"getAnchorIncomingEdge",value:function(u){var h=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&h.push(f)}),h}},{key:"getAnchorOutcomingEdge",value:function(u){var h=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&h.push(f)}),h}},{key:"getNodeIncomingNode",value:function(u){var h=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===u&&f.push(h.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var h=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===u&&f.push(h.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=Ls(am(am({},this.theme),u))}},{key:"resize",value:function(u,h){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=h||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,h=[],f=[];u.forEach(function(q){var Q=q.x,he=q.y,Se=q.width,je=q.height,tt=q.getNodeStyle().strokeWidth,nt=tt===void 0?0:tt,gt=Q+Se/2+nt,Bt=Q-Se/2-nt,vn=he+je/2+nt,dn=he-je/2-nt;h=h.concat([gt,Bt].filter(function(Xn){return!Number.isNaN(Xn)})),f=f.concat([vn,dn].filter(function(Xn){return!Number.isNaN(Xn)}))});var y=Math.min.apply(Math,Ch(h)),w=Math.max.apply(Math,Ch(h)),S=Math.min.apply(Math,Ch(f)),N=w-y||0,F=Math.max.apply(Math,Ch(f))-S||0;return{virtualRectWidth:N,virtualRectHeight:F,virtualRectCenterPositionX:y+N/2,virtualRectCenterPositionY:S+F/2}}},{key:"translateCenter",value:function(){var u=this.nodes,h=this.width,f=this.height,y=this.rootEl,w=this.transformModel;if(u.length){var S=h||y.clientWidth,N=f||y.clientHeight,F=this.getVirtualRectSize(),q=F.virtualRectCenterPositionX,Q=F.virtualRectCenterPositionY;w.focusOn(q,Q,S,N)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,w=this.height,S=this.rootEl,N=this.transformModel;if(f.length){var F=y||S.clientWidth,q=w||S.clientHeight,Q=this.getVirtualRectSize(),he=Q.virtualRectWidth,Se=Q.virtualRectHeight,je=Q.virtualRectCenterPositionX,tt=Q.virtualRectCenterPositionY,nt=(he+h)/F,gt=(Se+u)/q,Bt=0;Bt=1/Math.max(nt,gt);var vn=[F/2,q/2];N.zoom(Bt,vn),N.focusOn(je,tt,F,q)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&DN(i.prototype,l),a}(),eu=Kn(it.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=Kn(it.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pu=Kn(it.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=Kn(it.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ed=Kn(it.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ap=Kn(it.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oo.DEFAULT}}),df=Kn(it.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zs=Kn(it.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zv=Kn(it.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jv=Kn(it.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Tp=Kn(it.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rh=Kn(it.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kn(it.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"nodesMap"),it.prototype),Kn(it.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"edgesMap"),it.prototype),Kn(it.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"modelsMap"),it.prototype),Kn(it.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"sortElements"),it.prototype),Kn(it.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"textEditElement"),it.prototype),Kn(it.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"selectElements"),it.prototype),Kn(it.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(it.prototype,"selectNodes"),it.prototype),Kn(it.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"setFakerNode"),it.prototype),Kn(it.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"removeFakerNode"),it.prototype),Kn(it.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"setModel"),it.prototype),Kn(it.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"toFront"),it.prototype),Kn(it.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"setElementZIndex"),it.prototype),Kn(it.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"deleteNode"),it.prototype),Kn(it.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"addNode"),it.prototype),Kn(it.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"cloneNode"),it.prototype),Kn(it.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"moveNode"),it.prototype),Kn(it.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"moveNode2Coordinate"),it.prototype),Kn(it.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"editText"),it.prototype),Kn(it.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"addEdge"),it.prototype),Kn(it.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"moveEdge"),it.prototype),Kn(it.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"deleteEdgeBySourceAndTarget"),it.prototype),Kn(it.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"deleteEdgeById"),it.prototype),Kn(it.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"deleteEdgeBySource"),it.prototype),Kn(it.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"deleteEdgeByTarget"),it.prototype),Kn(it.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"setElementStateById"),it.prototype),Kn(it.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"updateText"),it.prototype),Kn(it.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"selectNodeById"),it.prototype),Kn(it.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"selectEdgeById"),it.prototype),Kn(it.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"selectElementById"),it.prototype),Kn(it.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"clearSelectElements"),it.prototype),Kn(it.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"moveNodes"),it.prototype),Kn(it.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"setDefaultEdgeType"),it.prototype),Kn(it.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"changeNodeType"),it.prototype),Kn(it.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"changeEdgeType"),it.prototype),Kn(it.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"getNodeIncomingEdge"),it.prototype),Kn(it.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"getNodeOutgoingEdge"),it.prototype),Kn(it.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"getAnchorIncomingEdge"),it.prototype),Kn(it.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"getAnchorOutcomingEdge"),it.prototype),Kn(it.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"getNodeIncomingNode"),it.prototype),Kn(it.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"getNodeOutgoingNode"),it.prototype),Kn(it.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"setTheme"),it.prototype),Kn(it.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"resize"),it.prototype),Kn(it.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"clearData"),it.prototype),Kn(it.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"translateCenter"),it.prototype),Kn(it.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"fitView"),it.prototype),Kn(it.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"openEdgeAnimation"),it.prototype),Kn(it.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(it.prototype,"closeEdgeAnimation"),it.prototype),it),CN=WE;function Lb(a){return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Lb(a)}function Fb(){return Fb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Fb.apply(this,arguments)}function jN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function $b(a,i){return $b=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},$b(a,i)}function IN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=um(a);if(i){var h=um(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return LN(this,l)}}function LN(a,i){if(i&&(Lb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(a)}function ec(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function um(a){return um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},um(a)}function pf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var zE,FN=ps(VE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&$b(f,y)})(h,a);var i,l,u=IN(h);function h(f){var y;(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,h),pf(ec(y=u.call(this)),"stepDrag",void 0),pf(ec(y),"stepScrollX",0),pf(ec(y),"stepScrollY",0),pf(ec(y),"onDragging",function(F){var q=F.deltaX,Q=F.deltaY;y.setState({isDragging:!0});var he=y.props.graphModel,Se=he.transformModel;he.editConfigModel.stopMoveGraph!==!0&&Se.translate(q,Q)}),pf(ec(y),"onDragEnd",function(){y.setState({isDragging:!1})}),pf(ec(y),"zoomHandler",function(F){var q=y.props,Q=q.graphModel,he=Q.editConfigModel,Se=Q.transformModel,je=Q.gridSize,tt=q.graphModel,nt=F.deltaX,gt=F.deltaY;if(he.stopScrollGraph||F.ctrlKey===!0){if(!he.stopZoomGraph){F.preventDefault();var Bt=tt.getPointByClient({x:F.clientX,y:F.clientY}).canvasOverlayPosition,vn=Bt.x,dn=Bt.y;Se.zoom(F.deltaY<0,[vn,dn])}}else{if(F.preventDefault(),y.stepScrollX+=nt,y.stepScrollY+=gt,Math.abs(y.stepScrollX)>=je){var Xn=y.stepScrollX%je,sn=y.stepScrollX-Xn;Se.translate(-sn*Se.SCALE_X,0),y.stepScrollX=Xn}if(Math.abs(y.stepScrollY)>=je){var Ln=y.stepScrollY%je,wn=y.stepScrollY-Ln;Se.translate(0,-wn*Se.SCALE_Y),y.stepScrollY=Ln}}}),pf(ec(y),"clickHandler",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){var q=y.props.graphModel;q.selectElements.size>0&&q.clearSelectElements(),q.eventCenter.emit(Rn.BLANK_CLICK,{e:F})}}),pf(ec(y),"handleContextMenu",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){F.preventDefault();var q=y.props.graphModel,Q=q.getPointByClient({x:F.clientX,y:F.clientY});q.eventCenter.emit(Rn.BLANK_CONTEXTMENU,{e:F,position:Q})}}),pf(ec(y),"mouseDownHandler",function(F){var q=y.props.graphModel,Q=q.eventCenter,he=q.editConfigModel,Se=q.transformModel.SCALE_X,je=q.gridSize,tt=F.target,nt=!he.adjustEdge&&!he.adjustNodePosition;(tt.getAttribute("name")==="canvas-overlay"||nt)&&(he.stopMoveGraph!==!0?(y.stepDrag.setStep(je*Se),y.stepDrag.handleMouseDown(F)):Q.emit(Rn.BLANK_MOUSEDOWN,{e:F}),y.clickHandler(F))});var w=f.graphModel,S=w.gridSize,N=w.eventCenter;return y.stepDrag=new te({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:S,eventType:"BLANK",isStopPropagation:!1,eventCenter:N,model:null}),y.state={isDragging:!1},y}return i=h,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,w=y.children,S=y.dnd,N=this.state.isDragging;return Object(Ve.g)("svg",Fb({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:N?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},S.eventMap()),Object(Ve.g)("g",{transform:f},w))}}])&&jN(i.prototype,l),h}(Ve.a))||VE;function Bb(a){return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Bb(a)}function $N(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function BN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ub(a,i){return Ub=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ub(a,i)}function UN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sm(a);if(i){var h=sm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return VN(this,l)}}function VN(a,i){if(i&&(Bb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function sm(a){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sm(a)}var GN=ps(zE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Ub(f,y)})(h,a);var i,l,u=UN(h);function h(){return $N(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,w=f.graphModel,S=y.getTools().map(function(N){return Object(Ve.g)(N,{graphModel:w,logicFlow:y.instance})});return y.components=S,S}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,w=f.graphModel,S=document.querySelector("#ToolOverlay_".concat(w.flowId)),N=y.getInstance();N.components.forEach(function(F){return F(N,S)}),N.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Ve.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&BN(i.prototype,l),h}(Ve.a))||zE;function Vb(a){return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Vb(a)}function WN(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function zN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Gb(a,i){return Gb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Gb(a,i)}function HN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cm(a);if(i){var h=cm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return XN(this,l)}}function XN(a,i){if(i&&(Vb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function cm(a){return cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},cm(a)}var HE,qN=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Gb(f,y)})(h,a);var i,l,u=HN(h);function h(){return WN(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"render",value:function(){var f=this.props.background;return Object(Ve.g)("div",{className:"lf-background"},Object(Ve.g)("div",{style:f,className:"lf-background-area"}))}}])&&zN(i.prototype,l),h}(Ve.a);function Wb(a){return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Wb(a)}function YN(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function KN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function zb(a,i){return zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},zb(a,i)}function ZN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fm(a);if(i){var h=fm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return JN(this,l)}}function JN(a,i){if(i&&(Wb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XE(a)}function XE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fm(a){return fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fm(a)}function QN(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var qE=ps(HE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&zb(f,y)})(h,a);var i,l,u=ZN(h);function h(){var f;YN(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return QN(XE(f=u.call.apply(u,[this].concat(w))),"id",tl()),f}return i=h,(l=[{key:"renderDot",value:function(){var f=this.props,y=f.config,w=y.color,S=y.thickness,N=S===void 0?2:S,F=f.size,q=f.visible,Q=Math.min(Math.max(2,N),F/2),he=1;return q||(he=0),Object(Ve.g)("rect",{width:Q,height:Q,rx:Q/2,ry:Q/2,fill:w,opacity:he})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,w=y.color,S=y.thickness,N=S===void 0?1:S,F=f.size,q=f.visible,Q=Math.min(Math.max(1,N),F/2),he="M ".concat(F," 0 H0 M0 0 V0 ").concat(F),Se=1;return q||(Se=0),Object(Ve.g)("path",{d:he,stroke:w,strokeWidth:Q,opacity:Se})}},{key:"render",value:function(){var f=this.props,y=f.type,w=f.size,S=f.graphModel.transformModel,N=[S.SCALE_X,S.SKEW_Y,S.SKEW_X,S.SCALE_Y,S.TRANSLATE_X,S.TRANSLATE_Y].join(","),F="matrix(".concat(N,")");return Object(Ve.g)("div",{className:"lf-grid"},Object(Ve.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Ve.g)("defs",null,Object(Ve.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:F,x:"0",y:"0",width:w,height:w},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object(Ve.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&KN(i.prototype,l),h}(Ve.a))||HE;qE.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Hb(a){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hb(a)}function eR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return YE(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return YE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function YE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var KE,jh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=eR(l,2),h=u[0],f=u[1];(h==="style"||Hb(f)!=="object")&&(i[h]=f)}),Object(Ve.g)("line",i)};function Xb(a){return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xb(a)}function ZE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function dm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ZE(Object(l),!0).forEach(function(u){tR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ZE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function tR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function nR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function qb(a,i){return qb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},qb(a,i)}function oR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=pm(a);if(i){var h=pm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return iR(this,l)}}function iR(a,i){if(i&&(Xb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function pm(a){return pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},pm(a)}var JE,aR=ps(KE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&qb(f,y)})(h,a);var i,l,u=oR(h);function h(){return nR(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,w=f.isShowHorizontal,S=f.isShowVertical,N=f.getStyle(),F=y.x,q=F===void 0?0:F,Q=y.y,he=Q===void 0?0:Q,Se=dm(dm({x1:-1e5,y1:he,x2:1e5,y2:he},N),{},{stroke:w?N.stroke:"none"}),je=dm(dm({x1:q,y1:-1e5,x2:q,y2:1e5},N),{},{stroke:S?N.stroke:"none"});return Object(Ve.g)("g",{className:"lf-snapline"},Object(Ve.g)(jh,Se),Object(Ve.g)(jh,je))}}])&&rR(i.prototype,l),h}(Ve.a))||KE;function Yb(a){return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Yb(a)}function lR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return QE(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return QE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Od(a){var i=a.x,l=a.y,u=a.width,h=a.height,f=a.className,y=a.radius,w=i-u/2,S=l-h/2,N={};return Object.entries(a).forEach(function(F){var q=lR(F,2),Q=q[0],he=q[1];Yb(he)!=="object"&&(N[Q]=he)}),N.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(N.rx=y,N.ry=y),N.x=w,N.y=S,Object(Ve.g)("rect",N)}function Kb(a){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kb(a)}function Ih(){return Ih=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Ih.apply(this,arguments)}function eO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function tO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?eO(Object(l),!0).forEach(function(u){uR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):eO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function uR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function sR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function cR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Zb(a,i){return Zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Zb(a,i)}function fR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hm(a);if(i){var h=hm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return dR(this,l)}}function dR(a,i){if(i&&(Kb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function hm(a){return hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hm(a)}Od.defaultProps={className:"",radius:""};var nO,pR=ps(JE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Zb(f,y)})(h,a);var i,l,u=fR(h);function h(){return sR(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,w=f.editConfigModel,S=w.hoverOutline,N=w.nodeSelectedOutline,F=[];return y.forEach(function(q){if(q.isHovered||q.isSelected){var Q=q.isHovered,he=q.isSelected,Se=q.x,je=q.y,tt=q.width,nt=q.height;if(N&&he||S&&Q){var gt=q.getOutlineStyle(),Bt={};if(Object.keys(gt).forEach(function(dn){dn!=="hover"&&(Bt[dn]=gt[dn])}),Q){var vn=gt.hover;Bt=tO(tO({},Bt),vn)}F.push(Object(Ve.g)(Od,Ih({transform:q.transform,className:"lf-outline-node",x:Se,y:je,width:tt+10,height:nt+10},Bt)))}}}),F}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,w=f.editConfigModel,S=w.edgeSelectedOutline,N=w.hoverOutline,F=[],q=0;q<y.length;q++){var Q=y[q];(S&&Q.isSelected||N&&Q.isHovered)&&(Q.modelType===Or.LINE_EDGE?F.push(this.getLineOutline(Q)):Q.modelType===Or.POLYLINE_EDGE?F.push(this.getPolylineOutline(Q)):Q.modelType===Or.BEZIER_EDGE&&F.push(this.getBezierOutline(Q)))}return F}},{key:"getLineOutline",value:function(f){var y=f.startPoint,w=f.endPoint,S=(y.x+w.x)/2,N=(y.y+w.y)/2,F=Math.abs(y.x-w.x)+10,q=Math.abs(y.y-w.y)+10,Q=f.getOutlineStyle();return Object(Ve.g)(Od,Ih({className:"lf-outline-edge",x:S,y:N,width:F,height:q},Q))}},{key:"getPolylineOutline",value:function(f){var y=f.points,w=bo(y),S=Wt(w,8),N=S.x,F=S.y,q=S.width,Q=S.height,he=f.getOutlineStyle();return Object(Ve.g)(Od,Ih({className:"lf-outline",x:N,y:F,width:q,height:Q},he))}},{key:"getBezierOutline",value:function(f){var y=f.path,w=Hn(y),S=Wt(w,8),N=S.x,F=S.y,q=S.width,Q=S.height,he=f.getOutlineStyle();return Object(Ve.g)(Od,Ih({className:"lf-outline",x:N,y:F,width:q,height:Q},he))}},{key:"render",value:function(){return Object(Ve.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&cR(i.prototype,l),h}(Ve.a))||JE;function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function hR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return rO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return rO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Lh(a){var i=a.x,l=i===void 0?0:i,u=a.y,h=u===void 0?0:u,f=a.r,y=f===void 0?4:f,w=a.className,S={cx:l,cy:h,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(N){var F=hR(N,2),q=F[0],Q=F[1];Jb(Q)!=="object"&&(S[q]=Q)}),S.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(Ve.g)("circle",S)}function Qb(a){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qb(a)}function vR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return oO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return oO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ey(){return ey=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ey.apply(this,arguments)}function iO(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function aO(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function lO(a,i,l){return i&&aO(a.prototype,i),l&&aO(a,l),a}function uO(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&e_(a,i)}function e_(a,i){return e_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e_(a,i)}function sO(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ym(a);if(i){var h=ym(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return yR(this,l)}}function yR(a,i){if(i&&(Qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vm(a)}function vm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ym(a){return ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ym(a)}function t_(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var cO,fO=function(a){uO(l,a);var i=sO(l);function l(){var u;return iO(this,l),t_(vm(u=i.call(this)),"dragHandler",void 0),t_(vm(u),"onDragging",function(h){var f=h.event,y=u.props,w=y.graphModel,S=y.bezierModel,N=y.type,F=w.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,q=F.x,Q=F.y;S.updateAdjustAnchor({x:q,y:Q},N),w.eventCenter.emit(Rn.EDGE_ADJUST,{data:S.getData()})}),t_(vm(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new te({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return lO(l,[{key:"render",value:function(){var u=this,h=this.props.position,f=h.x,y=h.y,w=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Ve.g)(Lh,ey({className:"lf-bezier-adjust-anchor",x:f,y},w,{onMouseDown:function(S){u.dragHandler.handleMouseDown(S)}}))}}]),l}(Ve.a),mR=ps(nO=function(a){uO(l,a);var i=sO(l);function l(){return iO(this,l),i.apply(this,arguments)}return lO(l,[{key:"getBezierAdjust",value:function(u,h){var f=u.path,y=u.id,w=vR(Hn(f),4),S=w[0],N=w[1],F=w[2],q=w[3],Q=u.getEdgeStyle().adjustLine,he=[];return he.push(Object(Ve.g)(jh,ey({x1:S.x,y1:S.y,x2:N.x,y2:N.y},Q))),he.push(Object(Ve.g)(fO,{position:N,bezierModel:u,graphModel:h,key:"".concat(y,"_ePre"),type:"sNext"})),he.push(Object(Ve.g)(jh,ey({x1:q.x,y1:q.y,x2:F.x,y2:F.y},Q))),he.push(Object(Ve.g)(fO,{position:F,bezierModel:u,graphModel:h,key:"".concat(y,"_sNext"),type:"ePre"})),he}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,h=u.edges,f=[],y=0;y<h.length;y++){var w=h[y];w.isSelected&&w.modelType===Or.BEZIER_EDGE&&w.draggable&&f.push(this.getBezierAdjust(w,u))}return f}},{key:"render",value:function(){return Object(Ve.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Ve.a))||nO;function n_(a){return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n_(a)}function gR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r_(a,i){return r_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r_(a,i)}function _R(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=mm(a);if(i){var h=mm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return wR(this,l)}}function wR(a,i){if(i&&(n_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function mm(a){return mm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},mm(a)}var dO,ER=ps(cO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r_(f,y)})(h,a);var i,l,u=_R(h);function h(){return gR(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object(Ve.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Ve.g)("g",{transform:f},y))}}])&&bR(i.prototype,l),h}(Ve.a))||cO;function o_(a){return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o_(a)}function i_(){return i_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},i_.apply(this,arguments)}function OR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function xR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a_(a,i){return a_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a_(a,i)}function SR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gm(a);if(i){var h=gm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return AR(this,l)}}function AR(a,i){if(i&&(o_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function gm(a){return gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},gm(a)}var TR=ps(dO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a_(f,y)})(h,a);var i,l,u=SR(h);function h(){return OR(this,h),u.apply(this,arguments)}return i=h,l=[{key:"getComponent",value:function(f,y){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",S=this.props.getView,N=S(f.type);return Object(Ve.g)(N,{key:f.id,model:f,graphModel:y,overlay:w})}},{key:"render",value:function(){var f=this,y=this.props,w=y.graphModel,S=y.tool,N=y.options,F=y.dnd,q=y.snaplineModel,Q={};N.width&&(Q.width="".concat(w.width,"px")),N.height&&(Q.height="".concat(w.height,"px"));var he=N.grid,Se=w.fakerNode,je=w.editConfigModel.adjustEdge;return Object(Ve.g)("div",{className:"lf-graph","flow-id":w.flowId,style:Q},Object(Ve.g)(FN,{graphModel:w,dnd:F},Object(Ve.g)("g",{className:"lf-base"},qf(w.sortElements,function(tt){return f.getComponent(tt,w)})),Se?this.getComponent(Se,w):""),Object(Ve.g)(ER,{graphModel:w},Object(Ve.g)(pR,{graphModel:w}),je?Object(Ve.g)(mR,{graphModel:w}):"",N.snapline!==!1?Object(Ve.g)(aR,{snaplineModel:q}):""),Object(Ve.g)(GN,{graphModel:w,tool:S}),N.background&&Object(Ve.g)(qN,{background:N.background}),N.grid&&Object(Ve.g)(qE,i_({},he,{graphModel:w})))}}],l&&xR(i.prototype,l),h}(Ve.a))||dO,MR=TR;function pO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function bm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?pO(Object(l),!0).forEach(function(u){hf(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function kR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function hf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var PR=function(){function a(u){var h=this;(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,a),hf(this,"nodeConfig",void 0),hf(this,"lf",void 0),hf(this,"fakerNode",void 0),hf(this,"stopDrag",function(){h.nodeConfig=null,window.document.removeEventListener("mouseup",h.stopDrag)}),hf(this,"dragEnter",function(y){h.nodeConfig&&!h.fakerNode&&(h.fakerNode=h.lf.createFakerNode(bm(bm({},h.nodeConfig),h.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),hf(this,"onDragOver",function(y){if(y.preventDefault(),h.fakerNode){var w=h.clientToLocalPoint({x:y.clientX,y:y.clientY}),S=w.x,N=w.y;h.fakerNode.moveTo(S,N);var F=h.fakerNode.getData();h.lf.setNodeSnapLine(F),h.lf.graphModel.eventCenter.emit(Rn.NODE_DND_DRAG,{data:F})}return!1}),hf(this,"onDragLeave",function(){h.fakerNode&&(h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)}),hf(this,"onDrop",function(y){h.lf.graphModel&&y&&h.nodeConfig&&(h.lf.addNode(bm(bm({},h.nodeConfig),h.clientToLocalPoint({x:y.clientX,y:y.clientY})),Rn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),h.nodeConfig=null,h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)});var f=u.lf;this.lf=f}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var h=u.x,f=u.y,y=Xu(this.lf.options,["grid","size"]),w=this.lf.graphModel.getPointByClient({x:h,y:f}).canvasOverlayPosition,S=w.x,N=w.y;return{x:El(S,y),y:El(N,y)}}},{key:"startDrag",value:function(u){var h=this.lf.graphModel.editConfigModel;h!=null&&h.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&kR(i.prototype,l),a}();function hO(a){var i=a.container,l=a.grid,u=a.width,h=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof h=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=Ou({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Ou({},yO,a)}var lo,vO,yO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function l_(a){return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l_(a)}function u_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return mO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return mO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function gO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function _m(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?gO(Object(l),!0).forEach(function(u){bO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):gO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function NR(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function RR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function DR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ty(){return ty=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=CR(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},ty.apply(this,arguments)}function CR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=xd(a))!==null;);return a}function s_(a,i){return s_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s_(a,i)}function jR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=xd(a);if(i){var h=xd(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return IR(this,l)}}function IR(a,i){if(i&&(l_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wm(a)}function wm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function xd(a){return xd=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},xd(a)}function bO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function cs(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var c_=(lo=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&s_(f,y)})(h,a);var i,l,u=jR(h);function h(){var f;RR(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return bO(wm(f=u.call.apply(u,[this].concat(w))),"modelType",Or.BEZIER_EDGE),NR(wm(f),"path",vO,wm(f)),f}return i=h,(l=[{key:"initEdgeData",value:function(f){this.offset=100,ty(xd(h.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return _m(_m({},ty(xd(h.prototype),"getEdgeStyle",this).call(this)),xo(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(w){var S=w.x,N=w.y;f+=S,y+=N}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=ty(xd(h.prototype),"getData",this).call(this),y=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return _m(_m({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return fr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=u_(f,4),w=y[0],S=y[1],N=y[2],F=y[3];return"M ".concat(w.x," ").concat(w.y,`
    C `).concat(S.x," ").concat(S.y,`,
    `).concat(N.x," ").concat(N.y,`,
    `).concat(F.x," ").concat(F.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,w=f.ePre;this.updatePath(y,w)}},{key:"updatePath",value:function(f,y){f=xo(f),y=xo(y);var w={x:this.startPoint.x,y:this.startPoint.y},S={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var N=this.getControls();f=N.sNext,y=N.ePre}this.pointsList=[w,f,y,S],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var w=u_(this.pointsList,3),S=w[1],N=w[2];S.x+=f,S.y+=y,this.updatePath(S,N)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var w=u_(this.pointsList,3),S=w[1],N=w[2];N.x+=f,N.y+=y,this.updatePath(S,N)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,w=f.endPoint,S=f.sourceNode,N=f.targetNode,F=fr({start:y,end:w,sourceNode:S,targetNode:N,offset:this.offset}),q=F.sNext,Q=F.ePre;this.pointsList=[y,q,Q,w],this.initPoints()}}])&&DR(i.prototype,l),h}(as),vO=cs(lo.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cs(lo.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"initPoints"),lo.prototype),cs(lo.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updatePoints"),lo.prototype),cs(lo.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateStartPoint"),lo.prototype),cs(lo.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateEndPoint"),lo.prototype),cs(lo.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"moveStartPoint"),lo.prototype),cs(lo.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"moveEndPoint"),lo.prototype),cs(lo.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateAdjustAnchor"),lo.prototype),cs(lo.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"getAdjustStart"),lo.prototype),cs(lo.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"getAdjustEnd"),lo.prototype),cs(lo.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(lo.prototype,"updateAfterAdjustStartAndEnd"),lo.prototype),lo),nn,_O,wO,EO,OO,xO,SO,AO,TO,MO,kO,PO,NO,RO,DO,CO,jO,IO,LO,FO,$O,BO,UO,LR=function(a){return a==null};function FR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||VO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f_(a){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f_(a)}function VO(a,i){if(a){if(typeof a=="string")return GO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?GO(a,i):void 0}}function GO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function WO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function il(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?WO(Object(l),!0).forEach(function(u){Ml(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):WO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ai(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function $R(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ml(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ar(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var vf,zO,yf=(nn=function(){function a(u,h){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Ml(this,"id",""),Ai(this,"type",_O,this),Ai(this,"x",wO,this),Ai(this,"y",EO,this),Ai(this,"text",OO,this),Ai(this,"properties",xO,this),Ai(this,"_width",SO,this),Ai(this,"_height",AO,this),Ai(this,"anchorsOffset",TO,this),Ai(this,"isSelected",MO,this),Ai(this,"isHovered",kO,this),Ai(this,"isShowAnchor",PO,this),Ai(this,"isDragging",NO,this),Ai(this,"isHitable",RO,this),Ai(this,"draggable",DO,this),Ai(this,"visible",CO,this),Ai(this,"enableRotate",jO,this),Ml(this,"virtual",!1),Ml(this,"graphModel",void 0),Ai(this,"zIndex",IO,this),Ai(this,"state",LO,this),Ai(this,"autoToFront",FO,this),Ai(this,"style",$O,this),Ai(this,"transform",BO,this),Ai(this,"_rotate",UO,this),Ml(this,"BaseType",so.NODE),Ml(this,"modelType",Or.NODE),Ml(this,"additionStateData",void 0),Ml(this,"targetRules",[]),Ml(this,"sourceRules",[]),Ml(this,"moveRules",[]),Ml(this,"hasSetTargetRules",!1),Ml(this,"hasSetSourceRules",!1),this.graphModel=h,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var h=this.x,f=h===void 0?0:h,y=this.y,w=y===void 0?0:y;this.transform=new Qs(-f,-w).rotate(u).translate(f,w).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var h=this.graphModel.idGenerator,f=h&&h(u.type),y=this.createId();u.id=y||f||tl()}this.formatText(u),Di(this,function(w){return Za(w,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===Oo.INCREASE&&(this.zIndex=u.zIndex||Zl())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,h=u.x,f=u.y,y=u.value,w=this.properties;Object(c.x)(w)&&(w=Object(c.I)(w));var S={id:this.id,type:this.type,x:this.x,y:this.y,properties:w};return this.rotate&&(S.rotate=this.rotate),this.graphModel.overlapMode===Oo.INCREASE&&(S.zIndex=this.zIndex),y&&(S.text={x:h,y:f,value:y}),S}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return il(il({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return xo(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return xo(u)}},{key:"getAnchorStyle",value:function(u){var h=this.graphModel.theme.anchor;return xo(h)}},{key:"getAnchorLineStyle",value:function(u){var h=this.graphModel.theme.anchorLine;return xo(h)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return xo(u)}},{key:"isAllowConnectedAsSource",value:function(u,h,f,y){var w=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var S,N=!0,F=0;F<w.length;F++){var q=w[F];if(!q.validate.call(this,this,u,h,f,y)){N=!1,S=q.message;break}}return{isAllPass:N,msg:S}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,h,f,y){var w=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var S,N=!0,F=0;F<w.length;F++){var q=w[F];if(!q.validate.call(this,u,this,h,f,y)){N=!1,S=q.message;break}}return{isAllPass:N,msg:S}}},{key:"isAllowMoveNode",value:function(u,h){var f,y=!0,w=!0,S=function(q,Q){var he=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!he){if(Array.isArray(q)||(he=VO(q))||Q&&q&&typeof q.length=="number"){he&&(q=he);var Se=0,je=function(){};return{s:je,n:function(){return Se>=q.length?{done:!0}:{done:!1,value:q[Se++]}},e:function(Bt){throw Bt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tt,nt=!0,gt=!1;return{s:function(){he=he.call(q)},n:function(){var Bt=he.next();return nt=Bt.done,Bt},e:function(Bt){gt=!0,tt=Bt},f:function(){try{nt||he.return==null||he.return()}finally{if(gt)throw tt}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(S.s();!(f=S.n()).done;){var N=(0,f.value)(this,u,h);if(!N)return!1;if(f_(N)==="object"){var F=N;if(F.x===!1&&F.y===!1)return!1;y=y&&F.x,w=w&&F.y}}}catch(q){S.e(q)}finally{S.f()}return{x:y,y:w}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,h=this.id,f=this.x,y=this.y;return u&&u.length>0?u.map(function(w,S){return w.length?(w=w,{id:"".concat(h,"_").concat(S),x:f+w[0],y:y+w[1]}):il(il({},w=w),{},{x:f+w.x,y:y+w.y,id:w.id||"".concat(h,"_").concat(S)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(h,f){for(var y,w=Gi(f),S=Number.MAX_SAFE_INTEGER,N=0;N<w.length;N++){var F=la(h.x,h.y,w[N].x,w[N].y);F<S&&(S=F,y={index:N,anchor:Au(Au({},w[N]),{},{x:w[N].x,y:w[N].y,id:w[N].id})})}return y}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),h=this.x,f=this.y,y=this.rotate;return u.forEach(function(w){var S=w.x,N=w.y,F=FR(new Js([S,N,1]).translate(-h,-f).rotate(y).translate(h,f)[0],2),q=F[0],Q=F[1];w.x=q,w.y=Q}),u}},{key:"getAnchorInfo",value:function(u){if(!LR(u))for(var h=0;h<this.anchors.length;h++){var f=this.anchors[h];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,h){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,w=!1;if(f)y=!0,w=!0;else{var S=this.isAllowMoveNode(u,h);typeof S=="boolean"?(y=S,w=S):(y=S.x,w=S.y)}if(y){var N=this.x+u;this.x=N,this.text&&this.moveText(u,0)}if(w){var F=this.y+h;this.y=F,this.text&&this.moveText(0,h)}return y||w}},{key:"getMoveDistance",value:function(u,h){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,w=!1,S=0,N=0;if(f)y=!0,w=!0;else{var F=this.isAllowMoveNode(u,h);typeof F=="boolean"?(y=F,w=F):(y=F.x,w=F.y)}if(y&&u){var q=this.x+u;this.x=q,this.text&&this.moveText(u,0),S=u}if(w&&h){var Q=this.y+h;this.y=Q,this.text&&this.moveText(0,h),N=h}return[S,N]}},{key:"moveTo",value:function(u,h){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=u-this.x,w=h-this.y;return!(!f&&!this.isAllowMoveNode(y,w)||(this.text&&this.text&&this.moveText(y,w),this.x=u,this.y=h,0))}},{key:"moveText",value:function(u,h){var f=this.text,y=f.x,w=f.y,S=f.value,N=f.draggable,F=f.editable;this.text={value:S,editable:F,draggable:N,x:y+u,y:w+h}}},{key:"updateText",value:function(u){this.text=il(il({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,h){this.state=u,this.additionStateData=h}},{key:"setProperty",value:function(u,h){this.properties=il(il({},Object(c.I)(this.properties)),{},Ml({},u,ni(h))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=il(il({},Object(c.I)(this.properties)),ni(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,h){this.style=il(il({},this.style),{},Ml({},u,ni(h)))}},{key:"setStyles",value:function(u){this.style=il(il({},this.style),ni(u))}},{key:"updateStyles",value:function(u){this.style=il({},ni(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Di(this,u)}}],l&&$R(i.prototype,l),a}(),_O=Ar(nn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wO=Ar(nn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),EO=Ar(nn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),OO=Ar(nn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),xO=Ar(nn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),SO=Ar(nn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),AO=Ar(nn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),TO=Ar(nn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),MO=Ar(nn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kO=Ar(nn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),PO=Ar(nn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),NO=Ar(nn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),RO=Ar(nn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),DO=Ar(nn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),CO=Ar(nn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jO=Ar(nn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),IO=Ar(nn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),LO=Ar(nn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),FO=Ar(nn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$O=Ar(nn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),BO=Ar(nn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=Ar(nn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ar(nn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"incoming"),nn.prototype),Ar(nn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"outgoing"),nn.prototype),Ar(nn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"addNodeMoveRules"),nn.prototype),Ar(nn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"move"),nn.prototype),Ar(nn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"getMoveDistance"),nn.prototype),Ar(nn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveTo"),nn.prototype),Ar(nn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveText"),nn.prototype),Ar(nn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateText"),nn.prototype),Ar(nn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setSelected"),nn.prototype),Ar(nn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHovered"),nn.prototype),Ar(nn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setIsShowAnchor"),nn.prototype),Ar(nn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setEnableRotate"),nn.prototype),Ar(nn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHitable"),nn.prototype),Ar(nn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setElementState"),nn.prototype),Ar(nn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperty"),nn.prototype),Ar(nn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperties"),nn.prototype),Ar(nn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"deleteProperty"),nn.prototype),Ar(nn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyle"),nn.prototype),Ar(nn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyles"),nn.prototype),Ar(nn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateStyles"),nn.prototype),Ar(nn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setZIndex"),nn.prototype),Ar(nn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateAttributes"),nn.prototype),nn);function d_(a){return d_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},d_(a)}function HO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function XO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?HO(Object(l),!0).forEach(function(u){qO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):HO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function BR(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function UR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function VR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p_(){return p_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=GR(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},p_.apply(this,arguments)}function GR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Fh(a))!==null;);return a}function h_(a,i){return h_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h_(a,i)}function WR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fh(a);if(i){var h=Fh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return zR(this,l)}}function zR(a,i){if(i&&(d_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Em(a)}function Em(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Fh(a){return Fh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fh(a)}function qO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function v_(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Fa,YO,KO,y_=(vf=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&h_(f,y)})(h,a);var i,l,u=WR(h);function h(){var f;UR(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return qO(Em(f=u.call.apply(u,[this].concat(w))),"modelType",Or.CIRCLE_NODE),BR(Em(f),"r",zO,Em(f)),f}return i=h,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=p_(Fh(h.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return XO(XO({},f),xo(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,w=this.r;return[{x:f,y:y-w,id:"".concat(this.id,"_0")},{x:f+w,y,id:"".concat(this.id,"_1")},{x:f,y:y+w,id:"".concat(this.id,"_2")},{x:f-w,y,id:"".concat(this.id,"_3")}]}}])&&VR(i.prototype,l),h}(yf),zO=v_(vf.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),v_(vf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(vf.prototype,"width"),vf.prototype),v_(vf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(vf.prototype,"height"),vf.prototype),vf);r(129);function m_(a){return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},m_(a)}function g_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ZO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return ZO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ZO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function JO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function QO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?JO(Object(l),!0).forEach(function(u){tx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):JO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ex(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function HR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function XR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function b_(){return b_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=qR(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},b_.apply(this,arguments)}function qR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Bh(a))!==null;);return a}function __(a,i){return __=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},__(a,i)}function YR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bh(a);if(i){var h=Bh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return KR(this,l)}}function KR(a,i){if(i&&(m_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $h(a)}function $h(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bh(a){return Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bh(a)}function tx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Uh(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var tc,nx,rx,w_=(Fa=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&__(f,y)})(h,a);var i,l,u=YR(h);function h(){var f;HR(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return tx($h(f=u.call.apply(u,[this].concat(w))),"modelType",Or.DIAMOND_NODE),ex($h(f),"rx",YO,$h(f)),ex($h(f),"ry",KO,$h(f)),f}return i=h,(l=[{key:"getNodeStyle",value:function(){var f=b_(Bh(h.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return QO(QO({},f),xo(y))}},{key:"points",get:function(){var f=this.x,y=this.y,w=this.rx,S=this.ry;return[[f,y-S],[f+w,y],[f,y+S],[f-w,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var S=g_(w,1)[0];S<f&&(f=S),S>y&&(y=S)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var S=g_(w,2)[1];S<f&&(f=S),S>y&&(y=S)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,w){var S=g_(y,2);return{x:S[0],y:S[1],id:"".concat(f.id,"_").concat(w)}})}}])&&XR(i.prototype,l),h}(yf),YO=Uh(Fa.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),KO=Uh(Fa.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Uh(Fa.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"points"),Fa.prototype),Uh(Fa.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"pointsPosition"),Fa.prototype),Uh(Fa.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"width"),Fa.prototype),Uh(Fa.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Fa.prototype,"height"),Fa.prototype),Fa);function E_(a){return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E_(a)}function ox(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function ix(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ox(Object(l),!0).forEach(function(u){lx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ox(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ax(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function ZR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function JR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function O_(){return O_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=QR(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},O_.apply(this,arguments)}function QR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Gh(a))!==null;);return a}function x_(a,i){return x_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},x_(a,i)}function eD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gh(a);if(i){var h=Gh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return tD(this,l)}}function tD(a,i){if(i&&(E_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vh(a)}function Vh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gh(a){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gh(a)}function lx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Om(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ru,ux,S_=(tc=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&x_(f,y)})(h,a);var i,l,u=eD(h);function h(){var f;ZR(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return lx(Vh(f=u.call.apply(u,[this].concat(w))),"modelType",Or.ELLIPSE_NODE),ax(Vh(f),"rx",nx,Vh(f)),ax(Vh(f),"ry",rx,Vh(f)),f}return i=h,(l=[{key:"getNodeStyle",value:function(){var f=O_(Gh(h.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return ix(ix({},f),xo(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,w=this.rx,S=this.ry;return[{x:f,y:y-S,id:"".concat(this.id,"_0")},{x:f+w,y,id:"".concat(this.id,"_1")},{x:f,y:y+S,id:"".concat(this.id,"_2")},{x:f-w,y,id:"".concat(this.id,"_3")}]}}])&&JR(i.prototype,l),h}(yf),nx=Om(tc.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),rx=Om(tc.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Om(tc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(tc.prototype,"width"),tc.prototype),Om(tc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(tc.prototype,"height"),tc.prototype),tc);function A_(a){return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A_(a)}function T_(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return sx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return sx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function cx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function fx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?cx(Object(l),!0).forEach(function(u){dx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):cx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function nD(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function rD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function oD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function M_(){return M_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=iD(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},M_.apply(this,arguments)}function iD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Wh(a))!==null;);return a}function k_(a,i){return k_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},k_(a,i)}function aD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wh(a);if(i){var h=Wh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return lD(this,l)}}function lD(a,i){if(i&&(A_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xm(a)}function xm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wh(a){return Wh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wh(a)}function dx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sm(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var P_,px,N_=(Ru=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&k_(f,y)})(h,a);var i,l,u=aD(h);function h(){var f;rD(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return dx(xm(f=u.call.apply(u,[this].concat(w))),"modelType",Or.POLYGON_NODE),nD(xm(f),"points",ux,xm(f)),f}return i=h,(l=[{key:"getNodeStyle",value:function(){var f=M_(Wh(h.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return fx(fx({},f),xo(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,w=this.width,S=this.height;return this.points.map(function(N){return{x:N[0]+f-w/2,y:N[1]+y-S/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var S=T_(w,1)[0];S<f&&(f=S),S>y&&(y=S)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var S=T_(w,2)[1];S<f&&(f=S),S>y&&(y=S)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,w=this.y,S=this.width,N=this.height;return this.points.map(function(F,q){var Q=T_(F,2),he=Q[0],Se=Q[1];return{x:y+he-S/2,y:w+Se-N/2,id:"".concat(f.id,"_").concat(q)}})}}])&&oD(i.prototype,l),h}(yf),ux=Sm(Ru.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Sm(Ru.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"pointsPosition"),Ru.prototype),Sm(Ru.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"width"),Ru.prototype),Sm(Ru.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ru.prototype,"height"),Ru.prototype),Ru);function R_(a){return R_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},R_(a)}function hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function vx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?hx(Object(l),!0).forEach(function(u){yx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function uD(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function cD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function D_(){return D_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=fD(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},D_.apply(this,arguments)}function fD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=zh(a))!==null;);return a}function C_(a,i){return C_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},C_(a,i)}function dD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zh(a);if(i){var h=zh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return pD(this,l)}}function pD(a,i){if(i&&(R_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Am(a)}function Am(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zh(a){return zh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zh(a)}function yx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Sd,j_=(P_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&C_(f,y)})(h,a);var i,l,u=dD(h);function h(){var f;sD(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return yx(Am(f=u.call.apply(u,[this].concat(w))),"modelType",Or.RECT_NODE),uD(Am(f),"radius",px,Am(f)),f}return i=h,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,w=this.width,S=this.height;return[{x:f,y:y-S/2,id:"".concat(this.id,"_0")},{x:f+w/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+S/2,id:"".concat(this.id,"_2")},{x:f-w/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=D_(zh(h.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return vx(vx({},f),xo(y))}}])&&cD(i.prototype,l),h}(yf),px=function(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(P_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P_);function I_(a){return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},I_(a)}function mx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function gx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mx(Object(l),!0).forEach(function(u){_x(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function hD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function vD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function L_(){return L_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=yD(a,i);if(u){var h=Object.getOwnPropertyDescriptor(u,i);return h.get?h.get.call(arguments.length<3?a:l):h.value}},L_.apply(this,arguments)}function yD(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Hh(a))!==null;);return a}function F_(a,i){return F_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F_(a,i)}function mD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hh(a);if(i){var h=Hh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return gD(this,l)}}function gD(a,i){if(i&&(I_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bx(a)}function bx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Hh(a){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hh(a)}function _x(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function wx(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var $_=(Sd=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F_(f,y)})(h,a);var i,l,u=mD(h);function h(){var f;hD(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return _x(bx(f=u.call.apply(u,[this].concat(w))),"modelType",Or.TEXT_NODE),f}return i=h,(l=[{key:"getTextStyle",value:function(){var f=L_(Hh(h.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return gx(gx({},f),xo(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&vD(i.prototype,l),h}(yf),wx(Sd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Sd.prototype,"width"),Sd.prototype),wx(Sd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Sd.prototype,"height"),Sd.prototype),Sd);function B_(a){return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B_(a)}function bD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _D(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function U_(a,i){return U_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},U_(a,i)}function wD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Tm(a);if(i){var h=Tm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return ED(this,l)}}function ED(a,i){if(i&&(B_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ex(a)}function Ex(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tm(a){return Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tm(a)}function OD(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fs,Ox,xx,Sx,V_=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&U_(f,y)})(h,a);var i,l,u=wD(h);function h(){var f;bD(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return OD(Ex(f=u.call.apply(u,[this].concat(w))),"modelType",Or.HTML_NODE),f}return i=h,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,w=this.width,S=this.height;return[{x:f,y:y-S/2,id:"".concat(this.id,"_0")},{x:f+w/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+S/2,id:"".concat(this.id,"_2")},{x:f-w/2,y,id:"".concat(this.id,"_3")}]}}])&&_D(i.prototype,l),h}(yf);function Ax(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function G_(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function xD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Tx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ny(a,i,l,u,h){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,w){return w(a,i,y)||y},f),h&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(h):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Mx=(fs=function(){function a(u){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Tx(this,"graphModel",void 0),G_(this,"isShowHorizontal",Ox,this),G_(this,"isShowVertical",xx,this),G_(this,"position",Sx,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?Ax(Object(f),!0).forEach(function(y){Tx(u,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):Ax(Object(f)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,h){for(var f=u.x,y=u.y,w=!1,S=!1,N=0;N<h.length;N++){var F=h[N];if(F.id!==u.id&&(f===F.x&&(w=!0),y===F.y&&(S=!0),w&&S))break}return{isShowVertical:w,isShowHorizontal:S,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(u,h){var f,y,w=!1,S=u.id;if(S){var N=this.graphModel.fakerNode;if(N&&N.id===S)y=Wi(N);else{var F=this.graphModel.getNodeModelById(S);y=Wi(F)}}for(var q=0;q<h.length;q++){var Q=h[q];if(Q.id!==u.id){var he=Wi(Q);if(he.minY===y.minY||he.maxY===y.minY){w=!0,f=y.minY;break}if(he.minY===y.maxY||he.maxY===y.maxY){w=!0,f=y.maxY;break}}}return Di({isShowHorizontal:w,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,h){var f,y,w=!1,S=u.id;if(S){var N=this.graphModel.fakerNode;if(N&&N.id===S)y=Wi(N);else{var F=this.graphModel.getNodeModelById(S);y=Wi(F)}}for(var q=0;q<h.length;q++){var Q=h[q];if(Q.id!==u.id){var he=Wi(Q);if(he.minX===y.minX||he.maxX===y.minX){w=!0,f=y.minX;break}if(he.minX===y.maxX||he.maxX===y.maxX){w=!0,f=y.maxX;break}}}return Di({isShowVertical:w,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,h){var f=this.getCenterSnapLine(u,h),y=f.isShowHorizontal,w=f.isShowVertical;if(!y){var S=this.getHorizontalSnapline(u,h);S.isShowHorizontal&&(f.isShowHorizontal=S.isShowHorizontal,f.position.y=S.position.y)}if(!w){var N=this.getVerticalSnapline(u,h);N.isShowVertical&&(f.isShowVertical=N.isShowVertical,f.position.x=N.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var h=u.isShowHorizontal,f=u.isShowVertical,y=u.position;this.position=y,this.isShowHorizontal=h,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var h=this.graphModel.nodes,f=this.getSnapLinePosition(u,h);this.setSnaplineInfo(f)}}],l&&xD(i.prototype,l),a}(),Ox=ny(fs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xx=ny(fs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sx=ny(fs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny(fs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"clearSnapline"),fs.prototype),ny(fs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"setNodeSnapLine"),fs.prototype),fs),ry=new Map,kx=function(a){var i=tl(),l=window.requestAnimationFrame(function u(){if(a(),ry.get(i)){var h=window.requestAnimationFrame(u);ry.set(i,h)}});return ry.set(i,l),i},Mm=function(a){var i=ry.get(a);i&&(window.cancelAnimationFrame(i),ry.delete(a))};function W_(a){return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W_(a)}function oy(){return oy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},oy.apply(this,arguments)}function Px(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function iy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Px(Object(l),!0).forEach(function(u){rc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Px(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function SD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Nx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Nx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function AD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function z_(a,i){return z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z_(a,i)}function TD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=km(a);if(i){var h=km(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return MD(this,l)}}function MD(a,i){if(i&&(W_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nc(a)}function nc(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function km(a){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},km(a)}function rc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var kD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&z_(f,y)})(h,a);var i,l,u=TD(h);function h(){var f;return function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),rc(nc(f=u.call(this)),"preTargetNode",void 0),rc(nc(f),"sourceRuleResults",void 0),rc(nc(f),"targetRuleResults",void 0),rc(nc(f),"dragHandler",void 0),rc(nc(f),"t",void 0),rc(nc(f),"onDragStart",function(y){var w=y.event,S=f.props,N=S.anchorData,F=S.nodeModel,q=S.graphModel;q.overlapMode,q.selectNodeById(F.id),F.autoToFront&&q.toFront(F.id),q.eventCenter.emit(Rn.ANCHOR_DRAGSTART,{data:N,e:w,nodeModel:F}),f.setState({startX:N.x,startY:N.y,endX:N.x,endY:N.y})}),rc(nc(f),"onDragging",function(y){var w=y.event,S=f.props,N=S.graphModel,F=S.nodeModel,q=S.anchorData,Q=N.transformModel,he=N.eventCenter,Se=N.width,je=N.height,tt=N.editConfigModel,nt=tt.autoExpand,gt=tt.stopMoveGraph,Bt=w.clientX,vn=w.clientY,dn=N.getPointByClient({x:Bt,y:vn}),Xn=dn.domOverlayPosition,sn=Xn.x,Ln=Xn.y,wn=dn.canvasOverlayPosition,Dr=wn.x,$r=wn.y;f.t&&Mm(f.t);var sr=[];sn<10?sr=[10,0]:sn+10>Se?sr=[-10,0]:Ln<10?sr=[0,10]:Ln+10>je&&(sr=[0,-10]),f.setState({endX:Dr,endY:$r,dragging:!0}),f.moveAnchorEnd(Dr,$r),sr.length>0&&!gt&&nt&&(f.t=kx(function(){var qr=SD(sr,2),gi=qr[0],bi=qr[1];Q.translate(gi,bi);var wa=f.state,ru=wa.endX,ou=wa.endY;f.setState({endX:ru-gi,endY:ou-bi}),f.moveAnchorEnd(ru-gi,ou-bi)})),he.emit(Rn.ANCHOR_DRAG,{data:q,e:w,nodeModel:F})}),rc(nc(f),"onDragEnd",function(y){var w=y.event;f.t&&Mm(f.t);var S=f.checkEnd(w);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var N=f.props,F=N.graphModel,q=N.nodeModel,Q=N.anchorData;F.eventCenter.emit(Rn.ANCHOR_DRAGEND,{data:Q,e:w,nodeModel:q,edgeModel:S})}),rc(nc(f),"checkEnd",function(y){var w=f.props,S=w.graphModel,N=w.nodeModel,F=w.anchorData,q=F.x,Q=F.y,he=F.id,Se=(S.edgeType,f.state),je=Se.endX,tt=Se.endY,nt=Se.dragging,gt=rs({x:je,y:tt},S);if(f.preTargetNode&&f.preTargetNode.state!==Xr.DEFAULT&&f.preTargetNode.setElementState(Xr.DEFAULT),nt&&gt&&gt.node){var Bt=gt.node,vn=gt.anchor.id,dn="".concat(N.id,"_").concat(Bt.id,"_").concat(vn,"_").concat(he),Xn=f.sourceRuleResults.get(dn)||{},sn=Xn.isAllPass,Ln=Xn.msg,wn=f.targetRuleResults.get(dn)||{},Dr=wn.isAllPass,$r=wn.msg;if(sn&&Dr){Bt.setElementState(Xr.DEFAULT);var sr=S.edgeGenerator(N.getData(),S.getNodeModelById(gt.node.id).getData()),qr=S.addEdge(iy(iy({},sr),{},{sourceNodeId:N.id,sourceAnchorId:he,startPoint:{x:q,y:Q},targetNodeId:gt.node.id,targetAnchorId:gt.anchor.id,endPoint:{x:gt.anchor.x,y:gt.anchor.y}})),gi=f.props.anchorData;return S.eventCenter.emit(Rn.ANCHOR_DROP,{data:gi,e:y,nodeModel:N,edgeModel:qr}),qr}var bi=Bt.getData();return S.eventCenter.emit(Rn.CONNECTION_NOT_ALLOWED,{data:bi,msg:$r||Ln||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new te({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return i=h,(l=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,w=f.style,S=f.node.getAnchorShape(y);if(S)return S;var N=y.x,F=y.y,q=iy(iy({},w),w.hover);return Object(Ve.g)("g",null,Object(Ve.g)(Lh,oy({className:"lf-node-anchor-hover"},q,{x:N,y:F})),Object(Ve.g)(Lh,oy({className:"lf-node-anchor"},w,{x:N,y:F})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,w=y.getAnchorIncomingEdge,S=y.getAnchorOutcomingEdge,N=f.anchorData.id;return{incomingEdgeList:w(N),outcomingEdgeList:S(N)}}},{key:"moveAnchorEnd",value:function(f,y){var w=this.props,S=w.graphModel,N=w.nodeModel,F=w.anchorData,q=rs({x:f,y},S);if(q){var Q=q.node,he=q.anchor.id;if(this.preTargetNode&&this.preTargetNode!==q.node&&this.preTargetNode.setElementState(Xr.DEFAULT),F.id===he)return;this.preTargetNode=Q;var Se="".concat(N.id,"_").concat(Q.id,"_").concat(he,"_").concat(F.id);if(!this.targetRuleResults.has(Se)){var je=q.anchor,tt=N.isAllowConnectedAsSource(Q,F,je),nt=Q.isAllowConnectedAsTarget(N,F,je);this.sourceRuleResults.set(Se,Kl(tt)),this.targetRuleResults.set(Se,Kl(nt))}var gt=this.sourceRuleResults.get(Se).isAllPass,Bt=this.targetRuleResults.get(Se).isAllPass;gt&&Bt?Q.setElementState(Xr.ALLOW_CONNECT):Q.setElementState(Xr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Xr.DEFAULT&&this.preTargetNode.setElementState(Xr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,w=f.startY,S=f.endX,N=f.endY;return la(y,w,S,N)>10}},{key:"render",value:function(){var f=this,y=this.state,w=y.startX,S=y.startY,N=y.endX,F=y.endY,q=this.props,Q=q.anchorData.edgeAddable,he=q.edgeStyle;return Object(Ve.g)("g",{className:"lf-anchor"},Object(Ve.g)("g",{onMouseDown:function(Se){Q!==!1&&f.dragHandler.handleMouseDown(Se)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(iy({sourcePoint:{x:w,y:S},targetPoint:{x:N,y:F}},he)):Object(Ve.g)(jh,oy({x1:w,y1:S,x2:N,y2:F},he,{"pointer-events":"none"}))))}}])&&AD(i.prototype,l),h}(Ve.a);function Rx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function PD(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Rx(Object(l),!0).forEach(function(u){ND(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Rx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ND(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function RD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Dx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Dx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Cx(a){var i=a.x,l=i===void 0?0:i,u=a.y,h=u===void 0?0:u,f=a.value,y=a.fontSize,w=a.fill,S=w===void 0?"currentColor":w,N=a.overflowMode,F=N===void 0?"default":N,q=a.textWidth,Q=q===void 0?"":q,he=a.model,Se={textAnchor:"middle","dominant-baseline":"middle",x:l,y:h,fill:S};if(Object.entries(a).forEach(function(vn){var dn=RD(vn,2),Xn=dn[0],sn=dn[1];H_(sn)!=="object"&&(Se[Xn]=sn)}),f){var je=String(f).split(/[\r\n]/g),tt=je.length;if(F!=="default"){var nt=he.BaseType,gt=he.modelType;if(nt===so.NODE&&gt!==Or.TEXT_NODE||nt===so.EDGE&&Q)return function(vn){var dn=vn.value,Xn=vn.fontSize,sn=vn.model,Ln=vn.fontFamily,wn=Ln===void 0?"":Ln,Dr=vn.lineHeight,$r=vn.wrapPadding,sr=$r===void 0?"0, 0":$r,qr=vn.overflowMode,gi=vn.x,bi=vn.y,wa=sn.width,ru=sn.textHeight,ou=vn.textWidth||wa,ac=String(dn).split(/[\r\n]/g),Cp=ac.length,eg=qs({rows:ac,style:{fontSize:"".concat(Xn,"px"),width:"".concat(ou,"px"),fontFamily:wn,lineHeight:Dr,padding:sr},rowsLength:Cp,className:"lf-get-text-height"}),jp=sn.height>eg?sn.height:eg;ru&&(jp=ru);var Md=qr==="ellipsis";return Md&&(jp=Xn+2),Object(Ve.g)("g",null,Object(Ve.g)("foreignObject",{width:ou,height:jp,x:gi-ou/2,y:bi-jp/2},Object(Ve.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:jp,width:ou,padding:sr}},Object(Ve.g)("div",{className:Md?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Md?ac.join(""):"",style:PD({},vn)},ac.map(function(kd){return Object(Ve.g)("div",{className:"lf-node-text--auto-wrap-inner"},kd)})))))}(a)}if(tt>1){var Bt=je.map(function(vn,dn){var Xn=(dn-(tt-1)/2)*(y+2);return Object(Ve.g)("tspan",{className:"lf-text-tspan",x:l,y:h+Xn},vn)});return Object(Ve.g)("text",Se,Bt)}return Object(Ve.g)("text",Se,f)}}function X_(a){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},X_(a)}function q_(){return q_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},q_.apply(this,arguments)}function DD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return jx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function CD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Y_(a,i){return Y_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y_(a,i)}function jD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Pm(a);if(i){var h=Pm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return ID(this,l)}}function ID(a,i){if(i&&(X_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ad(a)}function Ad(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pm(a){return Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Pm(a)}function Pp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Ix=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Y_(f,y)})(h,a);var i,l,u=jD(h);function h(f){var y;(function(S,N){if(!(S instanceof N))throw new TypeError("Cannot call a class as a function")})(this,h),Pp(Ad(y=u.call(this)),"dragHandler",void 0),Pp(Ad(y),"sumDeltaX",0),Pp(Ad(y),"sumDeltaY",0),Pp(Ad(y),"stepDrag",void 0),Pp(Ad(y),"onDragging",function(S){var N=S.deltaX,F=S.deltaY,q=y.props,Q=q.model,he=DD(q.graphModel.transformModel.fixDeltaXY(N,F),2),Se=he[0],je=he[1];Q.moveText(Se,je)}),Pp(Ad(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(Xr.TEXT_EDIT)}),Pp(Ad(y),"mouseDownHandle",function(S){var N=y.props,F=N.draggable,q=N.model,Q=N.graphModel.editConfigModel.nodeTextDraggable;(F||Q)&&(y.stepDrag.model=q,y.stepDrag.handleMouseDown(S))}),f.model;var w=f.draggable;return y.stepDrag=new te({onDragging:y.onDragging,step:1,isStopPropagation:w}),y}return i=h,(l=[{key:"getShape",value:function(){var f=this.props,y=f.model,w=f.graphModel,S=y.text,N=w.editConfigModel,F=S.value,q=S.x,Q=S.y,he=S.editable,Se=S.draggable,je={x:q,y:Q,className:"",value:F};he?je.className="lf-element-text":Se||N.nodeTextDraggable?je.className="lf-text-draggable":je.className="lf-text-disabled";var tt=y.getTextStyle();return Object(Ve.g)(Cx,q_({},je,tt,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Ve.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&CD(i.prototype,l),h}(Ve.a),LD=Xu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,Lx=r(130);function K_(a){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K_(a)}function Z_(){return Z_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Z_.apply(this,arguments)}function FD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function J_(a,i){return J_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},J_(a,i)}function $D(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Nm(a);if(i){var h=Nm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return BD(this,l)}}function BD(a,i){if(i&&(K_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xh(a)}function Xh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Nm(a){return Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nm(a)}function ay(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var UD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&J_(f,y)})(h,a);var i,l,u=$D(h);function h(f){var y;return function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}(this,h),ay(Xh(y=u.call(this,f)),"style",{}),ay(Xh(y),"defaultAngle",void 0),ay(Xh(y),"normal",void 0),ay(Xh(y),"stepperDrag",void 0),ay(Xh(y),"onDragging",function(w){var S,N=w.event,F=y.props,q=F.graphModel,Q=F.nodeModel,he=F.eventCenter,Se=q.selectNodes,je=Q.x,tt=Q.y,nt=N.clientX,gt=N.clientY,Bt=q.getPointByClient({x:nt,y:gt}).canvasOverlayPosition,vn=Bt.x,dn=Bt.y,Xn=new ee(vn-je,dn-tt),sn=((S=y.normal)===null||S===void 0?void 0:S.angle(Xn))-y.defaultAngle,Ln=new Qs(-je,-tt).rotate(sn).translate(je,tt).toString();Q.transform=Ln,Q.rotate=sn;var wn=Object(Lx.map)(Se,function($r){return $r.id});wn.indexOf(Q.id)===-1&&(wn=[Q.id]);var Dr=Object(Lx.reduce)(wn,function($r,sr){var qr=q.getNodeModelById(sr);return $r[sr]=qr==null?void 0:qr.getMoveDistance(0,0,!1),$r},{});wn.forEach(function($r){q.getNodeEdges($r).forEach(function(sr){if(Dr[sr.sourceNodeId]){var qr=q.getNodeModelById(sr.sourceNodeId).anchors.find(function(bi){return bi.id===sr.sourceAnchorId});sr.updateStartPoint(qr)}if(Dr[sr.targetNodeId]){var gi=q.getNodeModelById(sr.targetNodeId).anchors.find(function(bi){return bi.id===sr.targetAnchorId});sr.updateEndPoint(gi)}})}),he.emit(Rn.NODE_ROTATE,{e:N,nodeModel:Q})}),y.style=f.style,y.stepperDrag=new te({onDragging:y.onDragging}),y}return i=h,(l=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,w=y.x,S=y.y,N=w+y.width/2+20,F=S-y.height/2-20;return this.normal=new ee(1,0),this.defaultAngle=this.normal.angle(new ee(N-w,F-S)),y.defaultAngle=this.defaultAngle,Object(Ve.g)("g",{className:"lf-rotate-control"},Object(Ve.g)("g",{onMouseDown:function(q){f.stepperDrag.handleMouseDown(q)}},Object(Ve.g)(Lh,Z_({},this.style,{cx:N,cy:F}))))}}])&&FD(i.prototype,l),h}(Ve.a);function Q_(a){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q_(a)}var VD=["className"];function Rm(){return Rm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rm.apply(this,arguments)}function GD(a,i){if(a==null)return{};var l,u,h=function(y,w){if(y==null)return{};var S,N,F={},q=Object.keys(y);for(N=0;N<q.length;N++)S=q[N],w.indexOf(S)>=0||(F[S]=y[S]);return F}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(h[l]=a[l])}return h}function Dm(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Fx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Fx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function $x(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function e0(a,i){return e0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e0(a,i)}function WD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cm(a);if(i){var h=Cm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return zD(this,l)}}function zD(a,i){if(i&&(Q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qi(a)}function Qi(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Cm(a){return Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Cm(a)}function ca(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var mf=function(a){(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),w&&e0(y,w)})(f,a);var i,l,u,h=WD(f);function f(y){var w;(function(Q,he){if(!(Q instanceof he))throw new TypeError("Cannot call a class as a function")})(this,f),ca(Qi(w=h.call(this)),"t",void 0),ca(Qi(w),"moveOffset",void 0),ca(Qi(w),"stepDrag",void 0),ca(Qi(w),"contextMenuTime",void 0),ca(Qi(w),"mouseUpDrag",void 0),ca(Qi(w),"startTime",void 0),ca(Qi(w),"clickTimer",void 0),ca(Qi(w),"modelDisposer",void 0),ca(Qi(w),"onDragStart",function(Q){var he=Q.event,Se=he.clientX,je=he.clientY,tt=w.props,nt=tt.model,gt=tt.graphModel.getPointByClient({x:Se,y:je}).canvasOverlayPosition,Bt=gt.x,vn=gt.y;w.moveOffset={x:nt.x-Bt,y:nt.y-vn}}),ca(Qi(w),"onDragging",function(Q){var he=Q.event,Se=w.props,je=Se.model,tt=Se.graphModel,nt=tt.editConfigModel,gt=nt.stopMoveGraph,Bt=nt.autoExpand,vn=tt.transformModel,dn=tt.selectNodes,Xn=tt.width,sn=tt.height,Ln=tt.gridSize;je.isDragging=!0;var wn=he.clientX,Dr=he.clientY,$r=tt.getPointByClient({x:wn,y:Dr}).canvasOverlayPosition,sr=$r.x,qr=$r.y,gi=Dm(vn.CanvasPointToHtmlPoint([sr,qr]),2),bi=gi[0],wa=gi[1];if(sr+=w.moveOffset.x,qr+=w.moveOffset.y,sr=El(sr,Ln),qr=El(qr,Ln),Xn&&sn){if(!Bt||gt||!(bi<0||wa<0||bi>Xn||wa>sn)){var ru=Dm(vn.CanvasPointToHtmlPoint([sr-je.width/2,qr-je.height/2]),2),ou=ru[0],ac=ru[1],Cp=Dm(vn.CanvasPointToHtmlPoint([sr+je.width/2,qr+je.height/2]),2),eg=Cp[0],jp=Cp[1],Md=Math.max(Ln,20),kd=[];ou<0?kd=[Md,0]:eg>tt.width?kd=[-Md,0]:ac<0?kd=[0,Md]:jp>tt.height&&(kd=[0,-Md]),w.t&&Mm(w.t);var Mj=new Qs(-sr,-qr).rotate(je.rotate).translate(sr,qr).toString();je.transform=Mj;var tg=dn.map(function(ng){return ng.id});tg.indexOf(je.id)===-1&&(tg=[je.id]),kd.length>0&&!gt&&Bt?w.t=kx(function(){var ng=Dm(kd,2),bS=ng[0],_S=ng[1];vn.translate(bS,_S);var kj=-bS/vn.SCALE_X,Pj=-_S/vn.SCALE_X;tt.moveNodes(tg,kj,Pj)}):tt.moveNodes(tg,sr-je.x,qr-je.y)}}else tt.moveNode2Coordinate(je.id,sr,qr)}),ca(Qi(w),"onDragEnd",function(){w.t&&Mm(w.t),w.props.model.isDragging=!1}),ca(Qi(w),"handleMouseUp",function(){var Q=w.props.model;w.mouseUpDrag=Q.isDragging}),ca(Qi(w),"handleClick",function(Q){var he=w.mouseUpDrag===!1;if(w.startTime){var Se=w.props,je=Se.model,tt=Se.graphModel;if(he){var nt={data:je.getData(),e:Q,position:tt.getPointByClient({x:Q.clientX,y:Q.clientY}),isSelected:!1,isMultiple:!1},gt=Q.button===2,Bt=Q.detail===2;if(!gt){var vn=tt.editConfigModel,dn=pd(Q,vn);nt.isMultiple=dn,je.isSelected&&!Bt&&dn?(nt.isSelected=!1,je.setSelected(!1)):(tt.selectNodeById(je.id,dn),nt.isSelected=!0,w.toFront()),Bt?(vn.nodeTextEdit&&je.text.editable&&(je.setSelected(!1),tt.setElementStateById(je.id,Xr.TEXT_EDIT)),tt.eventCenter.emit(Rn.NODE_DBCLICK,nt)):(tt.eventCenter.emit(Rn.ELEMENT_CLICK,nt),tt.eventCenter.emit(Rn.NODE_CLICK,nt))}}}}),ca(Qi(w),"handleContextMenu",function(Q){Q.preventDefault();var he=w.props,Se=he.model,je=he.graphModel,tt=Se.getData(),nt=je.getPointByClient({x:Q.clientX,y:Q.clientY});je.setElementStateById(Se.id,Xr.SHOW_MENU,nt.domOverlayPosition),Se.isSelected||je.selectNodeById(Se.id),je.eventCenter.emit(Rn.NODE_CONTEXTMENU,{data:tt,e:Q,position:nt}),w.toFront()}),ca(Qi(w),"handleMouseDown",function(Q){var he=w.props,Se=he.model,je=he.graphModel;w.startTime=new Date().getTime(),je.editConfigModel.adjustNodePosition&&Se.draggable&&w.stepDrag&&w.stepDrag.handleMouseDown(Q)}),ca(Qi(w),"setHoverON",function(Q){var he=w.props,Se=he.model,je=he.graphModel;if(!Se.isHovered){var tt=Se.getData();Se.setHovered(!0),je.eventCenter.emit(Rn.NODE_MOUSEENTER,{data:tt,e:Q})}}),ca(Qi(w),"setHoverOFF",function(Q){var he=w.props,Se=he.model,je=he.graphModel,tt=Se.getData();Se.isHovered&&(Se.setHovered(!1),je.eventCenter.emit(Rn.NODE_MOUSELEAVE,{data:tt,e:Q}))}),ca(Qi(w),"onMouseOut",function(Q){LD&&w.setHoverOFF(Q)});var S=y.graphModel,N=S.gridSize,F=S.eventCenter,q=y.model;return w.stepDrag=new te({onDragStart:w.onDragStart,onDragging:w.onDragging,onDragEnd:w.onDragEnd,step:N,eventType:"NODE",isStopPropagation:!1,eventCenter:F,model:q}),w.modelDisposer=Object(c.F)(function(){return w.props},function(Q){Q&&Q.model&&w.stepDrag.setModel(Q.model)}),w}return i=f,u=[{key:"getModel",value:function(y){return y}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,w=this.props,S=w.model,N=w.graphModel,F=S.isSelected,q=S.isHitable,Q=S.isDragging,he=S.isShowAnchor;return q&&(F||he)&&!Q?qf(S.anchors,function(Se,je){var tt=S.getAnchorLineStyle(Se),nt=S.getAnchorStyle(Se);return Object(Ve.g)(kD,{anchorData:Se,node:y,style:nt,edgeStyle:tt,anchorIndex:je,nodeModel:S,graphModel:N,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,w=y.model,S=y.graphModel,N=w.isSelected,F=w.isHitable,q=w.enableRotate,Q=w.isHovered,he=w.getRotateControlStyle().style;if(F&&(N||Q)&&q)return Object(Ve.g)(UD,{graphModel:S,nodeModel:w,eventCenter:S.eventCenter,style:he})}},{key:"getText",value:function(){var y=this.props,w=y.model,S=y.graphModel;if(w.state===Xr.TEXT_EDIT)return"";if(w.text){var N=S.editConfigModel,F=!1;return(w.text.draggable||N.nodeTextDraggable)&&(F=!0),Object(Ve.g)(Ix,{editable:N.nodeTextEdit&&w.text.editable,model:w,graphModel:S,draggable:F})}}},{key:"getStateClassName",value:function(){var y=this.props.model,w=y.state,S=y.isDragging,N=y.isSelected,F="lf-node";switch(w){case Xr.ALLOW_CONNECT:F+=" lf-node-allow";break;case Xr.NOT_ALLOW_CONNECT:F+=" lf-node-not-allow";break;default:F+=" lf-node-default"}return S&&(F+=" lf-isDragging"),N&&(F+=" lf-node-selected"),F}},{key:"toFront",value:function(){var y=this.props,w=y.model,S=y.graphModel;w.autoToFront&&S.toFront(w.id)}},{key:"render",value:function(){var y,w=this.props,S=w.model,N=w.graphModel,F=N.editConfigModel,q=F.hideAnchors,Q=F.adjustNodePosition,he=F.allowRotation,Se=N.gridSize,je=N.transformModel.SCALE_X,tt=S.isHitable,nt=S.draggable,gt=S.transform,Bt=S.getOuterGAttributes(),vn=Bt.className,dn=vn===void 0?"":vn,Xn=GD(Bt,VD),sn=Object(Ve.g)("g",{className:"lf-node-content"},Object(Ve.g)("g",{transform:gt},this.getShape(),this.getText(),he&&this.getRotateControl()),!q&&this.getAnchors());return tt?(Q&&nt&&this.stepDrag.setStep(Se*je),y=Object(Ve.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Xn),sn)):y=Object(Ve.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn)},Xn),sn),y}}])&&$x(i.prototype,l),u&&$x(i,u),f}(Ve.a);function t0(a){return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t0(a)}function n0(){return n0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},n0.apply(this,arguments)}function HD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function XD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r0(a,i){return r0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r0(a,i)}function qD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=jm(a);if(i){var h=jm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return YD(this,l)}}function YD(a,i){if(i&&(t0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function jm(a){return jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},jm(a)}var o0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r0(f,y)})(h,a);var i,l,u=qD(h);function h(){return HD(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Ve.g)(Od,n0({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&XD(i.prototype,l),h}(mf);function i0(a){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i0(a)}function a0(){return a0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},a0.apply(this,arguments)}function KD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function l0(a,i){return l0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l0(a,i)}function JD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Im(a);if(i){var h=Im(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return QD(this,l)}}function QD(a,i){if(i&&(i0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Im(a){return Im=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Im(a)}var u0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&l0(f,y)})(h,a);var i,l,u=JD(h);function h(){return KD(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,w=f.y,S=f.r,N=f.getNodeStyle();return Object(Ve.g)(Lh,a0({},N,{x:y,y:w,r:S}))}}])&&ZD(i.prototype,l),h}(mf);function s0(a){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},s0(a)}function eC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Bx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Bx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ux(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(h){var f=eC(h,2),y=f[0],w=f[1];s0(w)!=="object"&&(u[y]=w)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(h){return h.join(",")}).join(" "),Object(Ve.g)("polygon",u)}function c0(a){return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},c0(a)}function f0(){return f0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},f0.apply(this,arguments)}function tC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function d0(a,i){return d0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d0(a,i)}function rC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Lm(a);if(i){var h=Lm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return oC(this,l)}}function oC(a,i){if(i&&(c0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Lm(a){return Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lm(a)}var p0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&d0(f,y)})(h,a);var i,l,u=rC(h);function h(){return tC(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,w=f.y,S=f.width,N=f.height,F=f.points,q=f.getNodeStyle(),Q={transform:"matrix(1 0 0 1 ".concat(y-S/2," ").concat(w-N/2,")")};return Object(Ve.g)("g",Q,Object(Ve.g)(Ux,f0({},q,{points:F,x:y,y:w})))}}])&&nC(i.prototype,l),h}(mf);function h0(a){return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h0(a)}function v0(){return v0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},v0.apply(this,arguments)}function iC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function aC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function y0(a,i){return y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},y0(a,i)}function lC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fm(a);if(i){var h=Fm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return uC(this,l)}}function uC(a,i){if(i&&(h0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fm(a){return Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fm(a)}var m0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&y0(f,y)})(h,a);var i,l,u=lC(h);function h(){return iC(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Ve.g)("g",null,Object(Ve.g)(Ux,v0({},y,{points:f.points,x:f.x,y:f.y})))}}])&&aC(i.prototype,l),h}(mf);function g0(a){return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g0(a)}function sC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Vx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Vx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function cC(a){var i=a.x,l=i===void 0?0:i,u=a.y,h=u===void 0?0:u,f=a.rx,y=f===void 0?4:f,w=a.ry,S=w===void 0?4:w,N=a.className,F={cx:l,cy:h,rx:y,ry:S,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(q){var Q=sC(q,2),he=Q[0],Se=Q[1];g0(Se)!=="object"&&(F[he]=Se)}),F.className=N?"lf-basic-shape ".concat(N):"lf-basic-shape",Object(Ve.g)("ellipse",F)}function b0(a){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},b0(a)}function _0(){return _0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},_0.apply(this,arguments)}function fC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function dC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function w0(a,i){return w0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},w0(a,i)}function pC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$m(a);if(i){var h=$m(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return hC(this,l)}}function hC(a,i){if(i&&(b0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function $m(a){return $m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$m(a)}var E0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&w0(f,y)})(h,a);var i,l,u=pC(h);function h(){return fC(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Ve.g)(cC,_0({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&dC(i.prototype,l),h}(mf);function O0(a){return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},O0(a)}function Gx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Wx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Gx(Object(l),!0).forEach(function(u){vC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Gx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function vC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function yC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function mC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function x0(a,i){return x0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},x0(a,i)}function gC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bm(a);if(i){var h=Bm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return bC(this,l)}}function bC(a,i){if(i&&(O0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Bm(a){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bm(a)}var S0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&x0(f,y)})(h,a);var i,l,u=gC(h);function h(){return yC(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),w=f.width,S=f.height,N=f.x,F=f.y,q=Wx(Wx({},y.background),{},{x:N,y:F-1,width:w,height:S});return Object(Ve.g)(Od,q)}},{key:"getShape",value:function(){return Object(Ve.g)("g",null,this.getBackground())}}])&&mC(i.prototype,l),h}(mf);function A0(a){return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A0(a)}function T0(){return T0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},T0.apply(this,arguments)}function _C(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function wC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function M0(a,i){return M0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},M0(a,i)}function EC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Um(a);if(i){var h=Um(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return OC(this,l)}}function OC(a,i){if(i&&(A0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ly(a)}function ly(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function Vm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var k0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&M0(f,y)})(h,a);var i,l,u=EC(h);function h(){var f;_C(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return Vm(ly(f=u.call.apply(u,[this].concat(w))),"ref",void 0),Vm(ly(f),"currentProperties",void 0),Vm(ly(f),"preProperties",void 0),Vm(ly(f),"setRef",function(N){f.ref=N}),f}return i=h,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,w=f.y,S=f.height,N=f.width,F=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Ve.g)("foreignObject",T0({},F,{x:y-N/2,y:w-S/2,width:N,height:S,ref:this.setRef}))}}])&&wC(i.prototype,l),h}(mf);function P0(a){return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},P0(a)}function N0(){return N0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},N0.apply(this,arguments)}function zx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Np(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?zx(Object(l),!0).forEach(function(u){C0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):zx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function R0(a,i){return R0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R0(a,i)}function SC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gm(a);if(i){var h=Gm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return AC(this,l)}}function AC(a,i){if(i&&(P0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0(a)}function D0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gm(a){return Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gm(a)}function C0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var TC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&R0(f,y)})(h,a);var i,l,u=SC(h);function h(f){var y;return function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}(this,h),C0(D0(y=u.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),C0(D0(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return i=h,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),w=f.text,S=f.width,N=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(N=Np(Np({},N),y.hover.background)),w&&w.value&&N.fill!=="transparent"){var F,q=y.fontSize,Q=y.overflowMode,he=y.lineHeight,Se=y.wrapPadding,je=y.textWidth,tt=w.value,nt=w.x,gt=w.y,Bt=String(tt).split(/[\r\n]/g),vn=Bt.length;if(Q==="autoWrap"&&je){var dn=qs({rows:Bt,style:{fontSize:"".concat(q,"px"),width:"".concat(je,"px"),lineHeight:he,padding:Se},rowsLength:vn,className:"lf-get-text-height"});F=Np(Np({},N),{},{x:nt-1,y:gt-1,width:je,height:dn})}else{Bt&&Bt.forEach(function(Dr){Jn(Dr)});var Xn=is({rows:Bt,fontSize:q,rowsLength:vn}),sn=Xn.width,Ln=Xn.height;if(Q==="ellipsis"&&(sn=je||S,Ln=q+2),typeof N.wrapPadding=="string"){var wn=N.wrapPadding.split(",").filter(function(Dr){return Dr.trim()}).map(function(Dr){return parseFloat(Dr.trim())});wn.length>0&&wn.length<=4&&(wn.length===1?wn=[wn[0],wn[0],wn[0],wn[0]]:wn.length===2?wn=[wn[0],wn[1],wn[0],wn[1]]:wn.length===3&&(wn=[wn[0],wn[1],wn[2],wn[1]]),sn+=wn[1]+wn[3],Ln+=wn[0]+wn[2],nt+=(wn[1]-wn[3])/2,gt+=(wn[2]-wn[0])/2)}F=Np(Np({},N),{},{x:nt-1,y:gt-1,width:sn,height:Ln})}return Object(Ve.g)(Od,F)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,w=y.value,S=y.x,N=y.y;if(w){var F=Np({x:S,y:N,className:"lf-element-text",value:w},f.getTextStyle());return Object(Ve.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Ve.g)(Cx,N0({},F,{model:f})))}}}])&&xC(i.prototype,l),h}(Ix);function j0(a){return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},j0(a)}var oc,MC=["text","sourceAnchorId","targetAnchorId"];function Hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function gf(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Hx(Object(l),!0).forEach(function(u){nu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function kC(a,i){if(a==null)return{};var l,u,h=function(y,w){if(y==null)return{};var S,N,F={},q=Object.keys(y);for(N=0;N<q.length;N++)S=q[N],w.indexOf(S)>=0||(F[S]=y[S]);return F}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(h[l]=a[l])}return h}function PC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Xx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Xx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function NC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function I0(a,i){return I0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},I0(a,i)}function RC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wm(a);if(i){var h=Wm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return DC(this,l)}}function DC(a,i){if(i&&(j0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tu(a)}function tu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wm(a){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wm(a)}function nu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(oc||(oc={}));var qx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&I0(f,y)})(h,a);var i,l,u=RC(h);function h(f){var y;(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,h),nu(tu(y=u.call(this)),"stepDragData",void 0),nu(tu(y),"stepDrag",void 0),nu(tu(y),"oldEdge",void 0),nu(tu(y),"preTargetNode",void 0),nu(tu(y),"targetRuleResults",void 0),nu(tu(y),"sourceRuleResults",void 0),nu(tu(y),"handleMouseDown",function(F){y.stepDrag&&y.stepDrag.handleMouseDown(F)}),nu(tu(y),"onDragStart",function(){var F=y.props,q=F.x,Q=F.y,he=F.edgeModel,Se=he.startPoint,je=he.endPoint,tt=he.pointsList;y.oldEdge={startPoint:Se,endPoint:je,pointsList:tt},y.setState({endX:q,endY:Q,dragging:!0})}),nu(tu(y),"onDragging",function(F){var q=F.deltaX,Q=F.deltaY,he=y.state,Se=he.endX,je=he.endY,tt=y.props,nt=tt.graphModel,gt=tt.type,Bt=nt.transformModel,vn=nt.editConfigModel,dn=PC(Bt.moveCanvasPointByHtml([Se,je],q,Q),2),Xn=dn[0],sn=dn[1];y.setState({endX:Xn,endY:sn,dragging:!0});var Ln=y.props.edgeModel,wn=rs({x:Se,y:je},nt);if(wn&&wn.node&&y.isAllowAdjust(wn).pass){var Dr,$r=Ln.startPoint,sr=Ln.endPoint,qr=Ln.sourceNode,gi=Ln.targetNode;gt===oc.SOURCE?Dr={startPoint:{x:wn.anchor.x,y:wn.anchor.y},endPoint:{x:sr.x,y:sr.y},sourceNode:wn.node,targetNode:gi}:gt===oc.TARGET&&(Dr={startPoint:{x:$r.x,y:$r.y},endPoint:{x:wn.anchor.x,y:wn.anchor.y},sourceNode:qr,targetNode:wn.node}),Ln.updateAfterAdjustStartAndEnd(Dr)}else gt===oc.SOURCE?Ln.updateStartPoint({x:Xn,y:sn}):gt===oc.TARGET&&Ln.updateEndPoint({x:Xn,y:sn});Ln.text.value&&vn.adjustEdge&&Ln.setText(Object.assign({},Ln.text,Ln.textPosition))}),nu(tu(y),"onDragEnd",function(F){var q=F.event;try{var Q;y.setState({dragging:!1});var he=y.props,Se=he.graphModel,je=he.edgeModel,tt=he.type,nt=y.state,gt=nt.endX,Bt=nt.endY,vn=nt.dragging,dn=rs({x:gt,y:Bt},Se);if(!vn)return;var Xn,sn=!1;if(dn&&dn.node){var Ln=y.isAllowAdjust(dn),wn=Ln.pass,Dr=Ln.msg,$r=Ln.newTargetNode;if(wn){var sr=je.getData(),qr=sr.text,gi=sr.sourceAnchorId,bi=gi===void 0?"":gi,wa=sr.targetAnchorId;Xn=gf(gf({sourceAnchorId:bi,targetAnchorId:wa===void 0?"":wa},kC(sr,MC)),{},{text:(qr==null?void 0:qr.value)||""}),tt===oc.SOURCE?(Xn=gf(gf({},Se.edgeGenerator(Se.getNodeModelById(dn.node.id).getData(),Se.getNodeModelById(je.targetNodeId).getData(),Xn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:je.targetNodeId,endPoint:gf({},je.endPoint)}),je.sourceNodeId===dn.node.id&&je.sourceAnchorId===dn.anchor.id&&(sn=!0)):tt===oc.TARGET&&(Xn=gf(gf({},Se.edgeGenerator(Se.getNodeModelById(je.sourceNodeId).getData(),Se.getNodeModelById(dn.node.id).getData(),Xn)),{},{sourceNodeId:je.sourceNodeId,startPoint:gf({},je.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),je.targetNodeId===dn.node.id&&je.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var ru=$r.getData();Se.eventCenter.emit(Rn.CONNECTION_NOT_ALLOWED,{data:ru,msg:Dr})}}else sn=!0;if(sn)y.recoveryEdge();else{var ou=je.getData();Se.deleteEdgeById(je.id);var ac=Se.addEdge(gf({},Xn));Se.eventCenter.emit(Rn.EDGE_EXCHANGE_NODE,{data:{newEdge:ac.getData(),oldEdge:ou}})}(Q=y.preTargetNode)===null||Q===void 0||Q.setElementState(Xr.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(Rn.ADJUST_POINT_DRAGEND,{e:q,data:y.stepDragData})}}),nu(tu(y),"recoveryEdge",function(){var F=y.props.edgeModel,q=y.oldEdge,Q=q.startPoint,he=q.endPoint,Se=q.pointsList;F.updateStartPoint(Q),F.updateEndPoint(he),F.modelType!==Or.LINE_EDGE&&(F.pointsList=Se,F.initPoints())}),nu(tu(y),"getAdjustPointStyle",function(){var F=y.props,q=F.graphModel.theme;return F.edgeModel,q.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var w=f.type,S=f.edgeModel,N=f.graphModel.eventCenter;return y.stepDragData={type:w,edgeData:S.getData()},y.stepDrag=new te({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:N,data:y.stepDragData}),y}return i=h,(l=[{key:"isAllowAdjust",value:function(f){var y=this.props,w=y.edgeModel,S=w.id,N=w.sourceNode,F=w.targetNode,q=w.sourceAnchorId,Q=w.targetAnchorId,he=y.type,Se=null,je=null,tt=null,nt=null;if(he===oc.SOURCE?(Se=f.node,je=F,tt=f.anchor,nt=F.getAnchorInfo(Q)):(Se=N,je=f.node,nt=f.anchor,tt=N.getAnchorInfo(q)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Xr.DEFAULT),this.preTargetNode=f.node,nt.id===tt.id)return{pass:!1,msg:"",newTargetNode:je};var gt="".concat(Se.id,"_").concat(je.id,"_").concat(tt.id,"_").concat(nt.id);if(!this.targetRuleResults.has(gt)){var Bt=Se.isAllowConnectedAsSource(je,tt,nt,S),vn=je.isAllowConnectedAsTarget(Se,tt,nt,S);this.sourceRuleResults.set(gt,Kl(Bt)),this.targetRuleResults.set(gt,Kl(vn))}var dn=this.sourceRuleResults.get(gt),Xn=dn.isAllPass,sn=dn.msg,Ln=this.targetRuleResults.get(gt),wn=Ln.isAllPass,Dr=Ln.msg,$r=Xn&&wn?Xr.ALLOW_CONNECT:Xr.NOT_ALLOW_CONNECT;return he===oc.SOURCE?Se.setElementState($r):je.setElementState($r),{pass:Xn&&wn,msg:Dr||sn,newTargetNode:je}}},{key:"render",value:function(){var f=this.props,y=f.x,w=f.y,S=f.getAdjustPointShape,N=f.edgeModel,F=this.state.dragging;return Object(Ve.g)("g",{pointerEvents:F?"none":"",onMouseDown:this.handleMouseDown},F?"":S(y,w,N))}}])&&NC(i.prototype,l),h}(Ve.a);function L0(a){return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},L0(a)}function uy(){return uy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},uy.apply(this,arguments)}function CC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Yx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Yx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function jC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function IC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function F0(a,i){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(a,i)}function LC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zm(a);if(i){var h=zm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return FC(this,l)}}function FC(a,i){if(i&&(L0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(a)}function ds(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zm(a){return zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zm(a)}function ic(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var sy=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F0(f,y)})(h,a);var i,l,u=LC(h);function h(){var f;jC(this,h);for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return ic(ds(f=u.call.apply(u,[this].concat(w))),"startTime",void 0),ic(ds(f),"contextMenuTime",void 0),ic(ds(f),"clickTimer",void 0),ic(ds(f),"textRef",Object(Ve.f)()),ic(ds(f),"handleHover",function(N,F){var q=f.props,Q=q.model,he=q.graphModel.eventCenter;Q.setHovered(N);var Se=N?Rn.EDGE_MOUSEENTER:Rn.EDGE_MOUSELEAVE,je=Q.getData();he.emit(Se,{data:je,e:F})}),ic(ds(f),"setHoverON",function(N){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,N))}),ic(ds(f),"setHoverOFF",function(N){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,N))}),ic(ds(f),"handleContextMenu",function(N){N.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var F=f.props,q=F.model,Q=F.graphModel,he=Q.getPointByClient({x:N.clientX,y:N.clientY});Q.setElementStateById(q.id,Xr.SHOW_MENU,he.domOverlayPosition),f.toFront(),q.isSelected||Q.selectEdgeById(q.id);var Se=q==null?void 0:q.getData();Q.eventCenter.emit(Rn.EDGE_CONTEXTMENU,{data:Se,e:N,position:he})}),ic(ds(f),"handleMouseDown",function(N){N.stopPropagation(),f.startTime=new Date().getTime()}),ic(ds(f),"handleMouseUp",function(N){if(f.startTime&&!(new Date().getTime()-f.startTime>200||N.button===2)){var F=N.detail===2,q=f.props,Q=q.model,he=q.graphModel,Se=Q==null?void 0:Q.getData(),je=he.getPointByClient({x:N.clientX,y:N.clientY});if(F){var tt=he.editConfigModel,nt=he.textEditElement;if(nt&&nt.id===Q.id&&he.setElementStateById(Q.id,Xr.DEFAULT),tt.edgeTextEdit&&Q.text.editable&&he.setElementStateById(Q.id,Xr.TEXT_EDIT),Q.modelType===Or.POLYLINE_EDGE){var gt=Q,Bt=he.getPointByClient({x:N.x,y:N.y}).canvasOverlayPosition,vn=Bt.x,dn=Bt.y,Xn=Ql({x:vn,y:dn},gt.points);gt.dbClickPosition=Xn}he.eventCenter.emit(Rn.EDGE_DBCLICK,{data:Se,e:N,position:je})}else he.eventCenter.emit(Rn.ELEMENT_CLICK,{data:Se,e:N,position:je}),he.eventCenter.emit(Rn.EDGE_CLICK,{data:Se,e:N,position:je});var sn=he.editConfigModel;he.selectEdgeById(Q.id,pd(N,sn)),f.toFront()}}),f}return i=h,(l=[{key:"getShape",value:function(){return Object(Ve.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,w=f.graphModel;if(y.state===Xr.TEXT_EDIT)return null;var S=!1,N=w.editConfigModel;return(y.text.draggable||N.edgeTextDraggable)&&(S=!0),Object(Ve.g)(TC,{ref:this.textRef,editable:N.edgeTextEdit&&y.text.editable,model:y,graphModel:w,draggable:S})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,w=f.endPoint,S=f.isSelected;return{start:y,end:w,hover:this.state.hover,isSelected:S}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,w=f.getArrowStyle(),S=w.refY,N=S===void 0?0:S,F=w.refX,q=F===void 0?2:F,Q=CC(this.getLastTwoPoints(),2),he=Q[0],Se=Q[1],je="auto";return he!==null&&Se!==null&&(je=et(ht({x:Se.x-he.x,y:Se.y-he.y,z:0}))),Object(Ve.g)("g",null,Object(Ve.g)("defs",null,Object(Ve.g)("marker",{id:"marker-start-".concat(y),refX:-q,refY:N,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Ve.g)("marker",{id:"marker-end-".concat(y),refX:q,refY:N,overflow:"visible",orient:je,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Ve.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,w=f.strokeWidth,S=f.offset,N=f.verticalLength;return Object(Ve.g)("path",{stroke:y,fill:y,strokeWidth:w,transform:"rotate(180)",d:"M 0 0 L ".concat(S," -").concat(N," L ").concat(S," ").concat(N," Z")})}},{key:"getAdjustPointShape",value:function(f,y,w){var S=w.getAdjustPointStyle();return Object(Ve.g)(Lh,uy({className:"lf-edge-adjust-point"},S,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,w=f.graphModel,S=y.getAdjustStart(),N=y.getAdjustEnd();return Object(Ve.g)("g",null,Object(Ve.g)(qx,uy({type:"SOURCE"},S,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:w})),Object(Ve.g)(qx,uy({type:"TARGET"},N,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:w})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Ve.g)("g",null)}},{key:"getAppend",value:function(){return Object(Ve.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,w=f.model;y.toFront(w.id)}},{key:"render",value:function(){var f=this.props,y=f.model,w=y.isSelected,S=y.isHitable,N=y.isShowAdjustPoint;return f.graphModel.animation,Object(Ve.g)("g",null,Object(Ve.g)("g",{className:["lf-edge",!S&&"pointer-none",w&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),N&&w?this.getAdjustPoints():"")}}])&&IC(i.prototype,l),h}(Ve.a);function $0(a){return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},$0(a)}function $C(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Kx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Kx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var cy=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=$C(l,2),h=u[0],f=u[1],y=$0(f);h!=="style"&&y==="object"||(i[h]=f)}),Object(Ve.g)("path",i)};function B0(a){return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B0(a)}function U0(){return U0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},U0.apply(this,arguments)}function BC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function UC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function V0(a,i){return V0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},V0(a,i)}function VC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hm(a);if(i){var h=Hm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return GC(this,l)}}function GC(a,i){if(i&&(B0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Hm(a){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hm(a)}var G0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&V0(f,y)})(h,a);var i,l,u=VC(h);function h(){return BC(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,w=f.endPoint,S=f.isAnimation,N=f.arrowConfig,F=f.getEdgeStyle(),q=f.getEdgeAnimationStyle(),Q=q.strokeDasharray,he=q.stroke,Se=q.strokeDashoffset,je=q.animationName,tt=q.animationDuration,nt=q.animationIterationCount,gt=q.animationTimingFunction,Bt=q.animationDirection;return Object(Ve.g)(jh,U0({},F,{x1:y.x,y1:y.y,x2:w.x,y2:w.y},N,S?{strokeDasharray:Q,stroke:he,style:{strokeDashoffset:Se,animationName:je,animationDuration:tt,animationIterationCount:nt,animationTimingFunction:gt,animationDirection:Bt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,w=f.endPoint,S=Dn({start:y,end:w}),N=S.d,F=S.strokeWidth,q=S.fill,Q=S.strokeDasharray,he=S.stroke;return Object(Ve.g)(cy,{d:N,fill:q,strokeWidth:F,stroke:he,strokeDasharray:Q})}}])&&UC(i.prototype,l),h}(sy);function W0(a){return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W0(a)}function WC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Zx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var zC=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=WC(l,2),h=u[0],f=u[1];(h==="style"||W0(f)!=="object")&&(i[h]=f)}),Object(Ve.g)("polyline",i)};function z0(a){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z0(a)}function Jx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Xm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Jx(Object(l),!0).forEach(function(u){_f(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Jx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function H0(){return H0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},H0.apply(this,arguments)}function HC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Qx(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function XC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function X0(a,i){return X0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},X0(a,i)}function qC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qm(a);if(i){var h=qm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return YC(this,l)}}function YC(a,i){if(i&&(z0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bf(a)}function bf(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qm(a){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qm(a)}function _f(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var q0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&X0(f,y)})(h,a);var i,l,u=qC(h);function h(){var f;return function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),_f(bf(f=u.call(this)),"drag",void 0),_f(bf(f),"isDragging",void 0),_f(bf(f),"isShowAdjustPointTemp",void 0),_f(bf(f),"appendInfo",void 0),_f(bf(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),_f(bf(f),"onDragging",function(y){var w=y.deltaX,S=y.deltaY,N=f.props,F=N.model,q=N.graphModel;f.isDragging=!0;var Q=q.transformModel,he=q.editConfigModel,Se=HC(Q.fixDeltaXY(w,S),2),je=Se[0],tt=Se[1],nt=F,gt=he.adjustEdgeMiddle;f.appendInfo=gt?nt.dragAppendSimple(f.appendInfo,{x:je,y:tt}):nt.dragAppend(f.appendInfo,{x:je,y:tt})}),_f(bf(f),"onDragEnd",function(){var y=f.props,w=y.model,S=y.graphModel.eventCenter,N=w;N.dragAppendEnd(),f.isDragging=!1,N.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,S.emit(Rn.EDGE_ADJUST,{data:N.getData()})}),_f(bf(f),"beforeDragStart",function(y,w){w.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=w}),f.drag=new te({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return i=h,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,w=f.isAnimation,S=f.arrowConfig,N=f.getEdgeStyle(),F=f.getEdgeAnimationStyle(),q=F.strokeDasharray,Q=F.stroke,he=F.strokeDashoffset,Se=F.animationName,je=F.animationDuration,tt=F.animationIterationCount,nt=F.animationTimingFunction,gt=F.animationDirection;return Object(Ve.g)(zC,H0({points:y},N,S,w?{strokeDasharray:q,stroke:Q,style:{strokeDashoffset:he,animationName:Se,animationDuration:je,animationIterationCount:tt,animationTimingFunction:nt,animationDirection:gt}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,w=f.isSelected,S={start:null,end:null,hover:this.state.hover,isSelected:w},N=bo(y);return N.length>=2&&(S.start=N[N.length-2],S.end=N[N.length-1]),S}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=bo(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,w=f.start,S=f.end;if(w.x===S.x&&w.y===S.y)y="";else{var N={start:w,end:S,offset:10,verticalLength:5},F=B(Xm(Xm({},N),{},{type:"start"})),q=B(Xm(Xm({},N),{},{type:"end"}));y="M".concat(F.leftX," ").concat(F.leftY,` 
      L`).concat(F.rightX," ").concat(F.rightY,` 
      L`).concat(q.rightX," ").concat(q.rightY,`
      L`).concat(q.leftX," ").concat(q.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),w=y.d,S=y.strokeWidth,N=y.fill,F=y.strokeDasharray,q=y.stroke;return Object(Ve.g)(cy,{d:w,fill:N,strokeWidth:S,stroke:q,strokeDasharray:F})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,w=y.model,S=y.graphModel,N=w.pointsList,F=w.draggable,q=[],Q=N.length,he=function(je){var tt="lf-polyline-append",nt={start:{x:N[je].x,y:N[je].y},end:{x:N[je+1].x,y:N[je+1].y},startIndex:je,endIndex:je+1,direction:"",dragAble:!0},gt=Object(Ve.g)("g",{className:tt},f.getAppendShape(nt)),Bt=S.editConfigModel,vn=Bt.adjustEdge,dn=Bt.adjustEdgeMiddle;if(vn&&F){var Xn=nt.startIndex,sn=nt.endIndex,Ln=dn&&(Xn===0||sn===Q-1);nt.dragAble=!Ln,nt.start.x===nt.end.x?(nt.dragAble&&(tt+="-ew-resize"),nt.direction=co.VERTICAL):nt.start.y===nt.end.y&&(nt.dragAble&&(tt+="-ns-resize"),nt.direction=co.HORIZONTAL),gt=Object(Ve.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(wn){return f.beforeDragStart(wn,nt)}},Object(Ve.g)("g",{className:tt},f.getAppendShape(nt)))}q.push(gt)},Se=0;Se<Q-1;Se++)he(Se);return Object(Ve.g)("g",null,q)}}])&&XC(i.prototype,l),h}(sy);function Y0(a){return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Y0(a)}function KC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return eS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return eS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function eS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function K0(){return K0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},K0.apply(this,arguments)}function ZC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function JC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z0(a,i){return Z0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z0(a,i)}function QC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ym(a);if(i){var h=Ym(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return ej(this,l)}}function ej(a,i){if(i&&(Y0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Ym(a){return Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ym(a)}var J0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Z0(f,y)})(h,a);var i,l,u=QC(h);function h(){return ZC(this,h),u.apply(this,arguments)}return i=h,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),w=f.path,S=f.isAnimation,N=f.arrowConfig,F=f.getEdgeAnimationStyle(),q=F.strokeDasharray,Q=F.stroke,he=F.strokeDashoffset,Se=F.animationName,je=F.animationDuration,tt=F.animationIterationCount,nt=F.animationTimingFunction,gt=F.animationDirection;return Object(Ve.g)(cy,K0({d:w},y,N,S?{strokeDasharray:q,stroke:Q,style:{strokeDashoffset:he,animationName:Se,animationDuration:je,animationIterationCount:tt,animationTimingFunction:nt,animationDirection:gt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Ve.g)(cy,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,w=f.isSelected,S=f.getArrowStyle().offset,N=f.pointsList.map(function(q){return{x:q.x,y:q.y}}),F=KC(La(N,S),2);return{start:F[0],end:F[1],hover:y,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,w=f.pointsList.map(function(S){return{x:S.x,y:S.y}});return La(w,y)}}])&&JC(i.prototype,l),h}(sy);function Q0(a){return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q0(a)}function tS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function tj(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function nj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function e1(a,i){return e1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e1(a,i)}function oj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Km(a);if(i){var h=Km(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return ij(this,l)}}function ij(a,i){if(i&&(Q0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Km(a){return Km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Km(a)}var aj=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&e1(f,y)})(h,a);var i,l,u=oj(h);function h(){return nj(this,h),u.apply(this,arguments)}return i=h,l=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,w=f.style,S=y.start,N=y.end,F={start:S,end:N,offset:w.offset,verticalLength:w.verticalLength,type:"end"},q=B(F),Q=q.leftX,he=q.leftY,Se=q.rightX,je=q.rightY;return function(tt){for(var nt=1;nt<arguments.length;nt++){var gt=arguments[nt]!=null?arguments[nt]:{};nt%2?tS(Object(gt),!0).forEach(function(Bt){tj(tt,Bt,gt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(gt)):tS(Object(gt)).forEach(function(Bt){Object.defineProperty(tt,Bt,Object.getOwnPropertyDescriptor(gt,Bt))})}return tt}({d:"M".concat(Q," ").concat(he," L").concat(N.x," ").concat(N.y," L").concat(Se," ").concat(je," z")},w)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,w=f.strokeWidth,S=f.stroke,N=f.fill;return Object(Ve.g)(cy,{d:y,fill:N,strokeWidth:w,stroke:S})}},{key:"render",value:function(){return Object(Ve.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&rj(i.prototype,l),h}(Ve.a),nS=function(a,i){return mt(a,i)},lj=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},t1=function(){return Nn.a.Date.now()},uj=Math.max,sj=Math.min,cj=function(a,i,l){var u,h,f,y,w,S,N=0,F=!1,q=!1,Q=!0;if(typeof a!="function")throw new TypeError("Expected a function");function he(Bt){var vn=u,dn=h;return u=h=void 0,N=Bt,y=a.apply(dn,vn)}function Se(Bt){return N=Bt,w=setTimeout(tt,i),F?he(Bt):y}function je(Bt){var vn=Bt-S;return S===void 0||vn>=i||vn<0||q&&Bt-N>=f}function tt(){var Bt=t1();if(je(Bt))return nt(Bt);w=setTimeout(tt,function(vn){var dn=i-(vn-S);return q?sj(dn,f-(vn-N)):dn}(Bt))}function nt(Bt){return w=void 0,Q&&u?he(Bt):(u=h=void 0,y)}function gt(){var Bt=t1(),vn=je(Bt);if(u=arguments,h=this,S=Bt,vn){if(w===void 0)return Se(S);if(q)return clearTimeout(w),w=setTimeout(tt,i),he(S)}return w===void 0&&(w=setTimeout(tt,i)),y}return i=ql(i)||0,Rr(l)&&(F=!!l.leading,f=(q="maxWait"in l)?uj(ql(l.maxWait)||0,i):f,Q="trailing"in l?!!l.trailing:Q),gt.cancel=function(){w!==void 0&&clearTimeout(w),N=0,u=S=h=w=void 0},gt.flush=function(){return w===void 0?y:nt(t1())},gt},fj=r(172);function dj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Td(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var rS,oS,iS,pj=function(){function a(u){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Td(this,"undos",[]),Td(this,"redos",[]),Td(this,"callbacks",[]),Td(this,"stopWatch",null),Td(this,"curData",null),Td(this,"maxSize",50),Td(this,"waitTime",100),Td(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){nS(lj(this.undos),u)||(this.undos.push(u),nS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Rn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var h=this.undos.pop();return this.curData=xo(h),h}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=xo(u),u}}},{key:"watch",value:function(u){var h=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(fj.a)(u,cj(function(){var f=u.modelToHistoryData();f&&h.add(f)},this.waitTime))}}])&&dj(i.prototype,l),a}();function n1(a){return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n1(a)}function hj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||function(l,u){if(l){if(typeof l=="string")return aS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return aS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function Rp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?lS(Object(l),!0).forEach(function(u){Dp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function uS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r1(a,i){return r1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r1(a,i)}function vj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zm(a);if(i){var h=Zm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return yj(this,l)}}function yj(a,i){if(i&&(n1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qh(a)}function qh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zm(a){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zm(a)}function Dp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var sS,cS,fS,o1=ps((iS=oS=function(a){(function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),w&&r1(y,w)})(f,a);var i,l,u,h=vj(f);function f(){var y;return function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}(this,f),Dp(qh(y=h.call(this)),"ref",Object(Ve.f)()),Dp(qh(y),"__prevText",{type:"",text:"",id:""}),Dp(qh(y),"keyupHandler",function(w){var S=y.props.graphModel.textEditElement;w.key==="Enter"&&w.altKey&&S.setElementState(0)}),Dp(qh(y),"inputHandler",function(w){var S=w.target.innerText,N=y.props.graphModel.textEditElement;y.__prevText={type:N.type,text:S.replace(/(\r\n)+$|(\n)+$/,""),id:N.id}}),Dp(qh(y),"keydownHandler",function(w){w.stopPropagation()}),y.state={style:{left:0,top:0}},y}return i=f,u=[{key:"getDerivedStateFromProps",value:function(y){var w,S=y.graphModel,N=S.transformModel,F=S.theme,q=F.inputText,Q=S.textEditElement;if(Q){var he;if((he=Q.text)===null||he===void 0||!he.value)if(Q.BaseType===so.EDGE){var Se=(Q=Q).text,je=Q.textPosition,tt=je.x,nt=je.y;Se.x=tt,Se.y=nt,Q.setText(Se)}else Q=Q;var gt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(Q.BaseType===so.EDGE){var Bt=F.edgeText,vn=Bt.overflowMode,dn=Bt.lineHeight,Xn=Bt.wrapPadding,sn=Bt.textWidth;sn&&vn==="autoWrap"&&(w=Rp(Rp({},gt),{},{width:sn,minWidth:sn,lineHeight:dn,padding:Xn}))}else if(Q.BaseType===so.NODE){var Ln=F.nodeText,wn=Ln.overflowMode,Dr=Ln.lineHeight,$r=Ln.wrapPadding,sr=Ln.textWidth,qr=Q,gi=qr.width,bi=qr.modelType,wa=qr.textWidth||sr||gi;(bi!==Or.TEXT_NODE&&wn==="autoWrap"||bi===Or.TEXT_NODE&&sr)&&(w=Rp(Rp({},gt),{},{width:wa,minWidth:wa,lineHeight:Dr,padding:$r}))}var ru=Q.text,ou=ru.x,ac=ru.y,Cp=hj(N.CanvasPointToHtmlPoint([ou,ac]),2);return{style:Rp(Rp({left:Cp[0],top:Cp[1]},w),q)}}}}],(l=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var w=this.__prevText,S=w.text,N=w.id;y.updateText(N,S),y.eventCenter.emit(Rn.TEXT_UPDATE,Rp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var w=document.createRange();w.selectNodeContents(y),w.collapse(!1);var S=window.getSelection();S.removeAllRanges(),S.addRange(w)}}},{key:"render",value:function(){var y,w=this.props.graphModel.textEditElement,S=this.state.style;return w?Object(Ve.g)("div",{contentEditable:!0,className:"lf-text-input",style:S,ref:this.ref,key:w.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=w.text)===null||y===void 0?void 0:y.value):null}}])&&uS(i.prototype,l),u&&uS(i,u),f}(Ve.a),Dp(oS,"toolName","textEdit"),rS=iS))||rS,mj=function(a){return a.modelType===Or.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,h=(l.x+u.x)/2,f=(l.y+u.y)/2,y=Math.abs(l.x-u.x)+10,w=Math.abs(l.y-u.y)+10;return{x:h-y/2,y:f-w/2,x1:h+y/2,y1:f+w/2}}(a):a.modelType===Or.POLYLINE_EDGE?function(i){var l=i.points,u=bo(l),h=Wt(u,8),f=h.x,y=h.y,w=h.width,S=h.height;return{x:f-w/2,y:y-S/2,x1:f+w/2,y1:y+S/2}}(a):a.modelType===Or.BEZIER_EDGE?function(i){var l=i.path,u=Hn(l),h=Wt(u,8),f=h.x,y=h.y,w=h.width,S=h.height;return{x:f-w/2,y:y-S/2,x1:f+w/2,y1:y+S/2}}(a):void 0};function i1(a){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i1(a)}function dS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var f,y,w=[],S=!0,N=!1;try{for(h=h.call(l);!(S=(f=h.next()).done)&&(w.push(f.value),!u||w.length!==u);S=!0);}catch(F){N=!0,y=F}finally{try{S||h.return==null||h.return()}finally{if(N)throw y}}return w}}(a,i)||pS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gj(a){return function(i){if(Array.isArray(i))return a1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||pS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pS(a,i){if(a){if(typeof a=="string")return a1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?a1(a,i):void 0}}function a1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function bj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function l1(a,i){return l1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l1(a,i)}function _j(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jm(a);if(i){var h=Jm(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return wj(this,l)}}function wj(a,i){if(i&&(i1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yh(a)}function Yh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jm(a){return Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jm(a)}function Kh(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var u1=ps((fS=cS=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&l1(f,y)})(h,a);var i,l,u=_j(h);function h(f){var y;(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,h),Kh(Yh(y=u.call(this)),"stepDrag",void 0),Kh(Yh(y),"handleMouseDown",function(F){y.stepDrag.handleMouseDown(F)}),Kh(Yh(y),"handleWheelEvent",function(F){var q,Q;F.preventDefault();var he=F.deltaX,Se=F.deltaY,je=F.clientX,tt=F.clientY,nt=F.ctrlKey,gt=new WheelEvent("wheel",{deltaX:he,deltaY:Se,clientX:je,clientY:tt,ctrlKey:nt});(q=y.props.logicFlow.container)===null||q===void 0||(Q=q.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||Q===void 0||Q.dispatchEvent(gt)}),Kh(Yh(y),"onDragging",function(F){var q=F.deltaX,Q=F.deltaY,he=y.props.graphModel,Se=he.getSelectElements(!0);he.moveNodes(Se.nodes.map(function(je){return je.id}),q,Q)}),Kh(Yh(y),"handleContextMenu",function(F){F.preventDefault();var q=y.props,Q=q.graphModel,he=q.graphModel,Se=he.eventCenter,je=he.selectElements,tt=Q.getPointByClient({x:F.clientX,y:F.clientY}),nt={nodes:[],edges:[]};gj(je.values()).forEach(function(gt){gt.BaseType===so.NODE&&nt.nodes.push(gt.getData()),gt.BaseType===so.EDGE&&nt.edges.push(gt.getData())}),Se.emit(Rn.SELECTION_CONTEXTMENU,{data:nt,e:F,position:tt})});var w=f.graphModel,S=w.gridSize,N=w.eventCenter;return y.stepDrag=new te({onDragging:y.onDragging,step:S,eventType:"SELECTION",eventCenter:N}),y}return i=h,(l=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,w=f.transformModel;if(!(y.size<=1)){var S=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,F=Number.MIN_SAFE_INTEGER,q=Number.MIN_SAFE_INTEGER;y.forEach(function(je){var tt={x:0,y:0,x1:0,y1:0};je.BaseType===so.NODE&&(tt=function(nt){var gt=nt.x,Bt=nt.y,vn=nt.width,dn=nt.height;return{x:gt-vn/2,y:Bt-dn/2,x1:gt+vn/2,y1:Bt+dn/2}}(je)),je.BaseType===so.EDGE&&(tt=mj(je)),S=Math.min(S,tt.x),N=Math.min(N,tt.y),F=Math.max(F,tt.x1),q=Math.max(q,tt.y1)});var Q=dS(w.CanvasPointToHtmlPoint([S,N]),2);S=Q[0],N=Q[1];var he=dS(w.CanvasPointToHtmlPoint([F,q]),2);F=he[0],q=he[1];var Se={left:"".concat(S-10,"px"),top:"".concat(N-10,"px"),width:"".concat(F-S+20,"px"),height:"".concat(q-N+20,"px")};return Object(Ve.g)("div",{className:"lf-multiple-select",style:Se,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&bj(i.prototype,l),h}(Ve.a),Kh(cS,"toolName","multipleSelect"),sS=fS))||sS;function Ej(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Oj=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Qm(this,"tools",void 0),Qm(this,"components",void 0),Qm(this,"toolMap",new Map),Qm(this,"instance",void 0),this.instance=u,this.isDisabledTool(o1.toolName)||this.registerTool(o1.toolName,o1),this.isDisabledTool(u1.toolName)||this.registerTool(u1.toolName,u1);var h=u.graphModel;h.eventCenter.on("".concat(Rn.GRAPH_TRANSFORM,",").concat(Rn.NODE_CLICK,",").concat(Rn.BLANK_CLICK," "),function(){var f=h.textEditElement,y=h.editConfigModel,w=y.edgeTextEdit,S=y.nodeTextEdit;(w||S)&&f&&h.textEditElement.setElementState(Xr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,h){this.toolMap.set(u,h)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&Ej(i.prototype,l),a}(),xj=r(173),Sj=r.n(xj);function Aj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var hS=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),s1(this,"mousetrap",void 0),s1(this,"options",void 0),s1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var h=u.lf;this.target=h.container,this.mousetrap=new Sj.a(this.target),u.keyboard.enabled&&!h.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,h=this.options.keyboard.shortcuts;if(h)if(io(h))h.forEach(function(S){var N=S.keys,F=S.callback,q=S.action;return u.on(N,F,q)});else{var f=h.keys,y=h.callback,w=h.action;this.on(f,y,w)}}},{key:"on",value:function(u,h,f){this.mousetrap.bind(this.getKeys(u),h,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,h){this.mousetrap.unbind(this.getKeys(u),h)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var h=this;return(Array.isArray(u)?u:[u]).map(function(f){return h.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Aj(i.prototype,l),a}(),Tj=hS,wf=null;function vS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function yS(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var Zh=40,c1=40;function f1(a){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f1(a)}function mS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),l.push.apply(l,u)}return l}function fy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mS(Object(l),!0).forEach(function(u){pi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function gS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function pi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var d1=Symbol("plugin register by Logicflow.use"),p1=function(){function a(h){var f,y,w=this;(function(S,N){if(!(S instanceof N))throw new TypeError("Cannot call a class as a function")})(this,a),pi(this,"container",void 0),pi(this,"width",void 0),pi(this,"height",void 0),pi(this,"graphModel",void 0),pi(this,"history",void 0),pi(this,"viewMap",new Map),pi(this,"tool",void 0),pi(this,"keyboard",void 0),pi(this,"dnd",void 0),pi(this,"options",void 0),pi(this,"snaplineModel",void 0),pi(this,"components",[]),pi(this,"plugins",void 0),pi(this,"extension",{}),pi(this,"adapterIn",void 0),pi(this,"adapterOut",void 0),pi(this,"getView",function(S){return w.viewMap.get(S)}),h=hO(h),this.options=h,this.container=this.initContainer(h.container),this.plugins=h.plugins,this.graphModel=new CN(fy({},h)),this.tool=new Oj(this),this.history=new pj(this.graphModel.eventCenter),this.dnd=new PR({lf:this}),this.keyboard=new Tj({lf:this,keyboard:h.keyboard}),h.snapline!==!1&&(this.snaplineModel=new Mx(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(S){var N=S.data;y.setNodeSnapLine(N)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(S,N){var F=S.keyboard,q=F.options.keyboard;F.on(["cmd + c","ctrl + c"],function(){if(c1=Zh,!q.enabled||N.textEditElement)return!0;var Q=S.options.guards,he=N.getSelectElements(!1);return Q&&Q.beforeClone&&!Q.beforeClone(he)||he.nodes.length===0&&he.edges.length===0?(wf=null,!0):((wf=he).nodes.forEach(function(Se){return vS(Se,Zh)}),wf.edges.forEach(function(Se){return yS(Se,Zh)}),!1)}),F.on(["cmd + v","ctrl + v"],function(){if(!q.enabled||N.textEditElement)return!0;if(wf&&(wf.nodes||wf.edges)){S.clearSelectElements();var Q=S.addElements(wf,c1);if(!Q)return!0;Q.nodes.forEach(function(he){return S.selectElementById(he.id,!0)}),Q.edges.forEach(function(he){return S.selectElementById(he.id,!0)}),wf.nodes.forEach(function(he){return vS(he,Zh)}),wf.edges.forEach(function(he){return yS(he,Zh)}),c1+=Zh}return!1}),F.on(["cmd + z","ctrl + z"],function(){return!q.enabled||!!N.textEditElement||(S.undo(),!1)}),F.on(["cmd + y","ctrl + y"],function(){return!q.enabled||!!N.textEditElement||(S.redo(),!1)}),F.on(["backspace"],function(){if(!q.enabled||N.textEditElement)return!0;var Q=N.getSelectElements(!0);return S.clearSelectElements(),Q.edges.forEach(function(he){return S.deleteEdge(he.id)}),Q.nodes.forEach(function(he){return S.deleteNode(he.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(h.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(h,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof h=="string"){var w={BaseEdge:sy,BaseEdgeModel:_d,BaseNode:mf,BaseNodeModel:yf,RectNode:o0,RectNodeModel:j_,CircleNode:u0,CircleNodeModel:y_,PolygonNode:p0,PolygonNodeModel:N_,TextNode:S0,TextNodeModel:$_,LineEdge:G0,LineEdgeModel:Ci,DiamondNode:m0,DiamondNodeModel:w_,PolylineEdge:q0,PolylineEdgeModel:ff,BezierEdge:J0,BezierEdgeModel:c_,EllipseNode:E0,EllipseNodeModel:S_,HtmlNode:k0,HtmlNodeModel:V_,h:Ve.g,type:h};this.viewMap.forEach(function(Q){var he=Q.extendKey;he&&(w[he]=Q)}),this.graphModel.modelMap.forEach(function(Q){var he=Q.extendKey;he&&(w[he]=Q)});var S=f(w),N=S.view,F=S.model,q=N;y&&!q.isObervered&&(q.isObervered=!0,q=xn(q)),this.setView(h,q),this.graphModel.setModel(h,F)}else this.registerElement(h)}},{key:"registerElement",value:function(h){var f=h.view;h.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=xn(f)),this.setView(h.type,f),this.graphModel.setModel(h.type,h.model)}},{key:"batchRegister",value:function(){var h=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){h.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:o0,model:j_,type:"rect"}),this.registerElement({type:"circle",view:u0,model:y_}),this.registerElement({type:"polygon",view:p0,model:N_}),this.registerElement({type:"line",view:G0,model:Ci}),this.registerElement({type:"polyline",view:q0,model:ff}),this.registerElement({type:"bezier",view:J0,model:c_}),this.registerElement({type:"text",view:S0,model:$_}),this.registerElement({type:"ellipse",view:E0,model:S_}),this.registerElement({type:"diamond",view:m0,model:w_}),this.registerElement({type:"html",view:k0,model:V_})}},{key:"selectElementById",value:function(h){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(h,f),!f&&y&&this.graphModel.toFront(h)}},{key:"focusOn",value:function(h){var f=this.graphModel.transformModel,y=h.coordinate,w=h.id;if(!y){var S=this.getNodeModelById(w);S&&(y=S.getData());var N=this.getEdgeModelById(w);N&&(y=N.textPosition)}var F=y,q=F.x,Q=F.y;f.focusOn(q,Q,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(h){this.graphModel.setTheme(h)}},{key:"resize",value:function(h,f){this.graphModel.resize(h,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(h){this.graphModel.setDefaultEdgeType(h)}},{key:"updateText",value:function(h,f){this.graphModel.updateText(h,f)}},{key:"deleteElement",value:function(h){var f,y,w,S=this.getModelById(h);return!!S&&(y=(w=(pi(f={},so.NODE,this.deleteNode),pi(f,so.EDGE,this.deleteEdge),f)[S.BaseType])===null||w===void 0?void 0:w.call(this,h))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(h){return this.graphModel.getElement(h)}},{key:"getDataById",value:function(h){var f;return(f=this.graphModel.getElement(h))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(h,f){this.graphModel.changeNodeType(h,f)}},{key:"changeEdgeType",value:function(h,f){this.graphModel.changeEdgeType(h,f)}},{key:"getNodeEdges",value:function(h){return this.graphModel.getNodeEdges(h)}},{key:"addNode",value:function(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(h,f,y)}},{key:"deleteNode",value:function(h){var f=this.graphModel.getNodeModelById(h);if(!f)return!1;var y=f.getData(),w=this.options.guards,S=!w||!w.beforeDelete||w.beforeDelete(y);return S&&this.graphModel.deleteNode(h),S}},{key:"cloneNode",value:function(h){var f=this.graphModel.getNodeModelById(h).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(h)}},{key:"changeNodeId",value:function(h,f){return this.graphModel.changeNodeId(h,f)}},{key:"getNodeModelById",value:function(h){return this.graphModel.getNodeModelById(h)}},{key:"getNodeDataById",value:function(h){var f;return(f=this.graphModel.getNodeModelById(h))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(h){return this.graphModel.addEdge(h)}},{key:"deleteEdge",value:function(h){var f=this.options.guards,y=this.graphModel.edgesMap[h];if(!y)return!1;var w=y.model.getData(),S=!f||!f.beforeDelete||f.beforeDelete(w);return S&&this.graphModel.deleteEdgeById(h),S}},{key:"deleteEdgeByNodeId",value:function(h){var f=h.sourceNodeId,y=h.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(h,f){return this.graphModel.changeEdgeId(h,f)}},{key:"getEdgeModelById",value:function(h){var f;return(f=this.graphModel.edgesMap[h])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(h){var f=this.graphModel.edges,y=h.sourceNodeId,w=h.targetNodeId;if(y&&w){var S=[];return f.forEach(function(q){q.sourceNodeId===y&&q.targetNodeId===w&&S.push(q)}),S}if(y){var N=[];return f.forEach(function(q){q.sourceNodeId===y&&N.push(q)}),N}if(w){var F=[];return f.forEach(function(q){q.targetNodeId===w&&F.push(q)}),F}return[]}},{key:"getEdgeDataById",value:function(h){var f;return(f=this.getEdgeModelById(h))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(h){return this.graphModel.getNodeIncomingEdge(h)}},{key:"getNodeOutgoingEdge",value:function(h){return this.graphModel.getNodeOutgoingEdge(h)}},{key:"getNodeIncomingNode",value:function(h){return this.graphModel.getNodeIncomingNode(h)}},{key:"getNodeOutgoingNode",value:function(h){return this.graphModel.getNodeOutgoingNode(h)}},{key:"editText",value:function(h){this.graphModel.editText(h)}},{key:"setProperties",value:function(h,f){var y;(y=this.graphModel.getElement(h))===null||y===void 0||y.setProperties(ni(f))}},{key:"deleteProperty",value:function(h,f){var y;(y=this.graphModel.getElement(h))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(h){var f;return(f=this.graphModel.getElement(h))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(h){this.graphModel.toFront(h)}},{key:"setElementZIndex",value:function(h,f){return this.graphModel.setElementZIndex(h,f)}},{key:"addElements",value:function(h){for(var f=this,y=h.nodes,w=h.edges,S={},N={nodes:[],edges:[]},F=0;F<y.length;F++){var q=y[F],Q=q.id,he=this.addNode(q);if(!he)return;Q&&(S[Q]=he.id),N.nodes.push(he)}return w.forEach(function(Se){var je=Se.sourceNodeId,tt=Se.targetNodeId;S[je]&&(je=S[je]),S[tt]&&(tt=S[tt]);var nt=f.graphModel.addEdge(fy(fy({},Se),{},{sourceNodeId:je,targetNodeId:tt}));N.edges.push(nt)}),N}},{key:"getAreaElement",value:function(h,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],S=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(h,f,y,w,S).map(function(N){return N.getData()})}},{key:"getSelectElements",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(h)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var h=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),w=0;w<f;w++)y[w]=arguments[w];return this.adapterOut.apply(this,[h].concat(y))}return h}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(h){var f=this.graphModel,y=f.editConfigModel,w=f.transformModel;y.updateEditConfig(h),(h==null?void 0:h.stopMoveGraph)!==void 0&&w.updateTranslateLimits(h.stopMoveGraph),h!=null&&h.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(h,f){return this.graphModel.getPointByClient({x:h,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var h=ni(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"redo",value:function(){if(this.history.redoAble()){var h=ni(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"zoom",value:function(h,f){return this.graphModel.transformModel.zoom(h,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(h){this.graphModel.transformModel.setZoomMiniSize(h)}},{key:"setZoomMaxSize",value:function(h){this.graphModel.transformModel.setZoomMaxSize(h)}},{key:"getTransform",value:function(){var h=this.graphModel.transformModel;return{SCALE_X:h.SCALE_X,SCALE_Y:h.SCALE_Y,TRANSLATE_X:h.TRANSLATE_X,TRANSLATE_Y:h.TRANSLATE_Y}}},{key:"translate",value:function(h,f){this.graphModel.transformModel.translate(h,f)}},{key:"resetTranslate",value:function(){var h=this.graphModel.transformModel,f=h.TRANSLATE_X,y=h.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(h,f){f===void 0&&(f=h),this.graphModel.fitView(h,f)}},{key:"openEdgeAnimation",value:function(h){this.graphModel.openEdgeAnimation(h)}},{key:"closeEdgeAnimation",value:function(h){this.graphModel.closeEdgeAnimation(h)}},{key:"on",value:function(h,f){this.graphModel.eventCenter.on(h,f)}},{key:"off",value:function(h,f){this.graphModel.eventCenter.off(h,f)}},{key:"once",value:function(h,f){this.graphModel.eventCenter.once(h,f)}},{key:"emit",value:function(h,f){this.graphModel.eventCenter.emit(h,f)}},{key:"initContainer",value:function(h){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",h.innerHTML="",h.appendChild(f),f}},{key:"installPlugins",value:function(){var h,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=(h=this.plugins)!==null&&h!==void 0?h:a.extensions;w.forEach(function(S){var N=null,F=null;S[d1]?(N=S.extension,F=S.props):N=S;var q=N.pluginName||N.name;y.indexOf(q)===-1&&f.installPlugin(N,F)})}},{key:"installPlugin",value:function(h,f){if(f1(h)==="object"){var y=h.install,w=h.render;return y&&y.call(h,this,a),w&&this.components.push(w.bind(h)),void(this.extension[h.pluginName]=h)}var S=h,N=new S({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:f});N.render&&this.components.push(N.render.bind(N)),this.extension[S.pluginName]=N}},{key:"updateAttributes",value:function(h,f){this.graphModel.updateAttributes(h,f)}},{key:"createFakerNode",value:function(h){var f=this.graphModel.modelMap.get(h.type);if(f){var y=new f(fy(fy({},h),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(h){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(h)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(h,f){this.viewMap.set(h,f)}},{key:"renderRawData",value:function(h){this.graphModel.graphDataToModel(ni(h)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Ve.j)(Object(Ve.g)(MR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Rn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(h=this.adapterIn(h)),this.renderRawData(h)}}],u=[{key:"use",value:function(h,f){var y,w,S=h.pluginName;S||(S=h.name);var N=(y=this.extensions.get(S))===null||y===void 0?void 0:y.extension;N&&N.destroy&&N.destroy(),this.extensions.set(S,(pi(w={},d1,d1),pi(w,"extension",h),pi(w,"props",f),w))}}],l&&gS(i.prototype,l),u&&gS(i,u),a}();function ps(a){return xn(a)}pi(p1,"extensions",new Map),o.default=p1}])})})(rw,rw.exports);var cn=rw.exports;const qG=CI(cn);var YG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),KG=(globalThis==null?void 0:globalThis._ids)||new YG;function Lv(){return KG.next()}var gP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){gP(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){gP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var bP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ng=globalThis&&globalThis.__assign||function(){return Ng=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ng.apply(this,arguments)};(function(e){bP(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){bP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return cn.h("g",{},v,cn.h("circle",Ng(Ng({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var _P=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ey=globalThis&&globalThis.__assign||function(){return Ey=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ey.apply(this,arguments)};(function(e){_P(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+Lv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){_P(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.points,p=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",Ey(Ey({},p),{x:o,y:r,points:v})),cn.h("path",Ey({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},p)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var wP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rg=globalThis&&globalThis.__assign||function(){return Rg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rg.apply(this,arguments)};(function(e){wP(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){wP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,p=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",Rg(Rg({},p),{x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var EP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ow=globalThis&&globalThis.__assign||function(){return ow=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ow.apply(this,arguments)};(function(e){EP(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){EP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,p=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",ow({x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},p)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var OP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){OP(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+Lv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){OP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var rA={width:40,height:40},oA={width:40,height:40},iA={width:40,height:40},aA={width:100,height:80},lA={width:100,height:80},ZG=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),JG=(globalThis==null?void 0:globalThis._ids)||new ZG;function uA(){return JG.next()}function xP(e){return Object.prototype.toString.call(e)}function QG(e){return"  ".repeat(e)}function Dg(e){var t=e;return xP(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Dg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Dg(n)})),t}function eW(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Dg(e)).replace(/"/g,"'")}return t}var Jh=`	
`;function yg(e,t,n){var o=QG(n),r="";if(t==="#text")return Jh+o+e;if(t==="#cdata-section")return Jh+o+"<![CDATA["+e+"]]>";if(t==="#comment")return Jh+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+eW(e)+'"';if(Array.isArray(e))e.forEach(function(p){r+=yg(p,t,n+1)});else if(xP(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":Jh+o)+"<"+t,s.forEach(function(p){p.charAt(0)==="-"?c+=yg(e[p],p,n+1):v+=yg(e[p],p,n+1)}),r+=c+(v!==""?">"+v+(Jh+o)+"</"+t+">":" />")}else r+=Jh+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function tW(e){var t="";for(var n in e)t+=yg(e[n],n,0);return t}var sl=function(){};sl.ObjTree=function(){return this};sl.ObjTree.VERSION="0.23";sl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;sl.ObjTree.prototype.attr_prefix="-";sl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};sl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(b){var _;b&&b.responseXML&&b.responseXML.documentElement&&(_=s.parseDOM(b.responseXML.documentElement)),c(_,b),v&&v(b)}}else o.asynchronous=!1;var p;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(p=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(p=g.transport)}if(n)return p;if(p&&p.responseXML&&p.responseXML.documentElement)return this.parseDOM(p.responseXML.documentElement)};sl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};sl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var p=e.childNodes[r].nodeType;p==3||p==4||p==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};sl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};sl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};sl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};sl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};sl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};sl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var nW=function(e){return new sl.ObjTree().parseXML(e)},rW=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),iw=globalThis&&globalThis.__assign||function(){return iw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iw.apply(this,arguments)},gb=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},dc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(dc||(dc={}));var SP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],sA=["properties","startPoint","endPoint","pointsList"];function cA(e){var t=e?sA.concat(e):sA;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var v=gb(c,2),p=v[0],g=v[1];typeof g!="object"?p.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(p)?s[p]=g:s["-"+p]=g:t.includes(p)?s["-"+p]=o(g):s[p]=o(g)}),s)}return o(n)}}function Cg(e){var t={};return Object.entries(e).forEach(function(n){var o=gb(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Dg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Cg(s):Array.isArray(s)?t[r]=s.map(function(c){return Cg(c)}):t[r]=s}),t}function oW(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var p=cA(n)(s.properties);Object.assign(v,p)}o.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,p=o.get(s.targetNodeId);p["bpmn:incoming"]?Array.isArray(p["bpmn:incoming"])?p["bpmn:incoming"].push(s.id):p["bpmn:incoming"]=[p["bpmn:incoming"],s.id]:p["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var b=cA(n)(s.properties);Object.assign(g,b)}return g});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[dc.FLOW]=r}function iW(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var p=v.x,g=v.y;return{"-x":p,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,p=n.y,g=Vd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,p-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":p,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function aW(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===dc.FLOW){var v=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=uW(c,v)}else{var p=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(lW(c,p,s))}}})}return{nodes:t,edges:n}}function lW(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var p=fA(v,n,c);o.push(p)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=fA(r,n,e);o.push(s)}return o}function fA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Vd.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(_){var E=gb(_,2),x=E[0],P=E[1];SP.indexOf(x)===-1&&(v||(v={}),v[x]=P)}),v&&(v=Cg(v));var p;if(s&&(p={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];p.x=Number(g["-x"])+Number(g["-width"])/2,p.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:o,y:r,properties:v};return p&&(b.text=p),b}function uW(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(dA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(dA(o,e))}return n}function dA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(p){s<p.length&&(s=p.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(p){var g=gb(p,2),b=g[0],_=g[1];SP.indexOf(b)===-1&&(c||(c={}),c[b]=_)}),c&&(c=Cg(c));var v={id:t["-id"],type:dc.FLOW,pointsList:e["di:waypoint"].map(function(p){return{x:Number(p["-x"]),y:Number(p["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Vd=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=iw({},n.processAttributes);oW(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};iW(v,r);var p=n.definitionAttributes;p["bpmn:process"]=c,p["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":p};return g},this.adapterIn=function(r){if(r)return aW(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+uA()},this.definitionAttributes={"-id":"Definitions_"+uA(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Vd.shapeConfigMap.set(dc.START,{width:rA.width,height:rA.height});Vd.shapeConfigMap.set(dc.END,{width:oA.width,height:oA.height});Vd.shapeConfigMap.set(dc.GATEWAY,{width:iA.width,height:iA.height});Vd.shapeConfigMap.set(dc.SYSTEM,{width:aA.width,height:aA.height});Vd.shapeConfigMap.set(dc.USER,{width:lA.width,height:lA.height});(function(e){rW(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=nW(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var v=o.adapterOut(s,c);return tW(v)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Vd);var sW=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),cW=(globalThis==null?void 0:globalThis._ids)||new sW;function fW(){return cW.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var pA=globalThis&&globalThis.__assign||function(){return pA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pA.apply(this,arguments)},dW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var hA=globalThis&&globalThis.__assign||function(){return hA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hA.apply(this,arguments)},pW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var vA=globalThis&&globalThis.__assign||function(){return vA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vA.apply(this,arguments)},hW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var yA=globalThis&&globalThis.__assign||function(){return yA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA.apply(this,arguments)},vW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var mA=globalThis&&globalThis.__assign||function(){return mA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mA.apply(this,arguments)},yW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var gA=globalThis&&globalThis.__assign||function(){return gA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gA.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var bA=globalThis&&globalThis.__assign||function(){return bA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bA.apply(this,arguments)},mW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var cE,Mi,AP,Up,_A,TP,aw,MP,fE,lw,uw,sw={},kP=[],gW=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dE=Array.isArray;function Dd(e,t){for(var n in t)e[n]=t[n];return e}function pE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Oy(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?cE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return mg(e,c,o,r,null)}function mg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++AP,__i:-1,__u:0};return r==null&&Mi.vnode!=null&&Mi.vnode(s),s}function hE(e){return e.children}function pv(e,t){this.props=e,this.context=t}function xv(e,t){if(t==null)return e.__?xv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?xv(e):null}function PP(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return PP(e)}}function wA(e){(!e.__d&&(e.__d=!0)&&Up.push(e)&&!jg.__r++||_A!==Mi.debounceRendering)&&((_A=Mi.debounceRendering)||TP)(jg)}function jg(){var e,t,n,o,r,s,c,v;for(Up.sort(aw);e=Up.shift();)e.__d&&(t=Up.length,o=void 0,s=(r=(n=e).__v).__e,c=[],v=[],n.__P&&((o=Dd({},r)).__v=r.__v+1,Mi.vnode&&Mi.vnode(o),DP(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,c,s??xv(r),!!(32&r.__u),v),o.__v=r.__v,o.__.__k[o.__i]=o,wW(c,o,v),o.__e!=s&&PP(o)),Up.length>t&&Up.sort(aw));jg.__r=0}function NP(e,t,n,o,r,s,c,v,p,g,b){var _,E,x,P,A,M,I=o&&o.__k||kP,D=t.length;for(p=bW(n,t,I,p,D),_=0;_<D;_++)(x=n.__k[_])!=null&&(E=x.__i===-1?sw:I[x.__i]||sw,x.__i=_,M=DP(e,x,E,r,s,c,v,p,g,b),P=x.__e,x.ref&&E.ref!=x.ref&&(E.ref&&vE(E.ref,null,x),b.push(x.ref,x.__c||P,x)),A==null&&P!=null&&(A=P),4&x.__u||E.__k===x.__k?p=RP(x,p,e):typeof x.type=="function"&&M!==void 0?p=M:P&&(p=P.nextSibling),x.__u&=-7);return n.__e=A,p}function bW(e,t,n,o,r){var s,c,v,p,g,b=n.length,_=b,E=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(p=s+E,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?mg(null,c,null,null,null):dE(c)?mg(hE,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?mg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=_W(c,n,p,_))!==-1&&(_--,(v=n[g])&&(v.__u|=2)),v==null||v.__v===null?(g==-1&&E--,typeof c.type!="function"&&(c.__u|=4)):g!=p&&(g==p-1?E--:g==p+1?E++:(g>p?E--:E++,c.__u|=4))):e.__k[s]=null;if(_)for(s=0;s<b;s++)(v=n[s])!=null&&!(2&v.__u)&&(v.__e==o&&(o=xv(v)),CP(v,v));return o}function RP(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=RP(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=xv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _W(e,t,n,o){var r,s,c=e.key,v=e.type,p=t[n];if(p===null||p&&c==p.key&&v===p.type&&!(2&p.__u))return n;if(o>(p!=null&&!(2&p.__u)?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((p=t[r])&&!(2&p.__u)&&c==p.key&&v===p.type)return r;r--}if(s<t.length){if((p=t[s])&&!(2&p.__u)&&c==p.key&&v===p.type)return s;s++}}return-1}function EA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||gW.test(t)?n:n+"px"}function ig(e,t,n,o,r){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||EA(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||EA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(MP,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=fE,e.addEventListener(t,s?uw:lw,s)):e.removeEventListener(t,s?uw:lw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function OA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=fE++;else if(t.t<n.u)return;return n(Mi.event?Mi.event(t):t)}}}function DP(e,t,n,o,r,s,c,v,p,g){var b,_,E,x,P,A,M,I,D,$,G,W,X,J,z,L,H,K=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(p=!!(32&n.__u),s=[v=t.__e=n.__e]),(b=Mi.__b)&&b(t);e:if(typeof K=="function")try{if(I=t.props,D="prototype"in K&&K.prototype.render,$=(b=K.contextType)&&o[b.__c],G=b?$?$.props.value:b.__:o,n.__c?M=(_=t.__c=n.__c).__=_.__E:(D?t.__c=_=new K(I,G):(t.__c=_=new pv(I,G),_.constructor=K,_.render=OW),$&&$.sub(_),_.props=I,_.state||(_.state={}),_.context=G,_.__n=o,E=_.__d=!0,_.__h=[],_._sb=[]),D&&_.__s==null&&(_.__s=_.state),D&&K.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=Dd({},_.__s)),Dd(_.__s,K.getDerivedStateFromProps(I,_.__s))),x=_.props,P=_.state,_.__v=t,E)D&&K.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),D&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(D&&K.getDerivedStateFromProps==null&&I!==x&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(I,G),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(I,_.__s,G)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(_.props=I,_.state=_.__s,_.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Y){Y&&(Y.__=t)}),W=0;W<_._sb.length;W++)_.__h.push(_._sb[W]);_._sb=[],_.__h.length&&c.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(I,_.__s,G),D&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(x,P,A)})}if(_.context=G,_.props=I,_.__P=e,_.__e=!1,X=Mi.__r,J=0,D){for(_.state=_.__s,_.__d=!1,X&&X(t),b=_.render(_.props,_.state,_.context),z=0;z<_._sb.length;z++)_.__h.push(_._sb[z]);_._sb=[]}else do _.__d=!1,X&&X(t),b=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++J<25);_.state=_.__s,_.getChildContext!=null&&(o=Dd(Dd({},o),_.getChildContext())),D&&!E&&_.getSnapshotBeforeUpdate!=null&&(A=_.getSnapshotBeforeUpdate(x,P)),v=NP(e,dE(L=b!=null&&b.type===hE&&b.key==null?b.props.children:b)?L:[L],t,n,o,r,s,c,v,p,g),_.base=t.__e,t.__u&=-161,_.__h.length&&c.push(_),M&&(_.__E=_.__=null)}catch(Y){if(t.__v=null,p||s!=null)if(Y.then){for(t.__u|=p?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else for(H=s.length;H--;)pE(s[H]);else t.__e=n.__e,t.__k=n.__k;Mi.__e(Y,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=EW(n.__e,t,n,o,r,s,c,p,g);return(b=Mi.diffed)&&b(t),128&t.__u?void 0:v}function wW(e,t,n){for(var o=0;o<n.length;o++)vE(n[o],n[++o],n[++o]);Mi.__c&&Mi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Mi.__e(s,r.__v)}})}function EW(e,t,n,o,r,s,c,v,p){var g,b,_,E,x,P,A,M=n.props,I=t.props,D=t.type;if(D=="svg"?r="http://www.w3.org/2000/svg":D=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((x=s[g])&&"setAttribute"in x==!!D&&(D?x.localName==D:x.nodeType==3)){e=x,s[g]=null;break}}if(e==null){if(D==null)return document.createTextNode(I);e=document.createElementNS(r,D,I.is&&I),v&&(Mi.__m&&Mi.__m(t,s),v=!1),s=null}if(D===null)M===I||v&&e.data===I||(e.data=I);else{if(s=s&&cE.call(e.childNodes),M=n.props||sw,!v&&s!=null)for(M={},g=0;g<e.attributes.length;g++)M[(x=e.attributes[g]).name]=x.value;for(g in M)if(x=M[g],g!="children"){if(g=="dangerouslySetInnerHTML")_=x;else if(!(g in I)){if(g=="value"&&"defaultValue"in I||g=="checked"&&"defaultChecked"in I)continue;ig(e,g,null,x,r)}}for(g in I)x=I[g],g=="children"?E=x:g=="dangerouslySetInnerHTML"?b=x:g=="value"?P=x:g=="checked"?A=x:v&&typeof x!="function"||M[g]===x||ig(e,g,x,M[g],r);if(b)v||_&&(b.__html===_.__html||b.__html===e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(_&&(e.innerHTML=""),NP(e,dE(E)?E:[E],t,n,o,D=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&xv(n,0),v,p),s!=null)for(g=s.length;g--;)pE(s[g]);v||(g="value",D=="progress"&&P==null?e.removeAttribute("value"):P!==void 0&&(P!==e[g]||D=="progress"&&!P||D=="option"&&P!==M[g])&&ig(e,g,P,M[g],r),g="checked",A!==void 0&&A!==e[g]&&ig(e,g,A,M[g],r))}return e}function vE(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Mi.__e(r,n)}}function CP(e,t,n){var o,r;if(Mi.unmount&&Mi.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||vE(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){Mi.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&CP(o[r],t,n||typeof e.type!="function");n||pE(e.__e),e.__c=e.__=e.__e=void 0}function OW(e,t,n){return this.constructor(e,n)}cE=kP.slice,Mi={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},AP=0,pv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Dd({},this.state),typeof e=="function"&&(e=e(Dd({},n),this.props)),e&&Dd(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),wA(this))},pv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),wA(this))},pv.prototype.render=hE,Up=[],TP=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,aw=function(e,t){return e.__v.__b-t.__v.__b},jg.__r=0,MP=/(PointerCapture)$|Capture$/i,fE=0,lw=OA(!1),uw=OA(!0);var xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(this,arguments)};function yE(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,v=t-o/2,p=n-r/2,g=xy(xy({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:p});return cn.h("rect",xy({},g))}yE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var sv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(sv||(sv={}));var xW=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vp=globalThis&&globalThis.__assign||function(){return Vp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vp.apply(this,arguments)},SW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},AW=cn.LogicFlowUtil.StepDrag,TW=function(e){xW(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,p=v.x,g=v.y;o.nodeModel.x=p+s/2,o.nodeModel.y=g+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,p=r.width,g=r.height,b=r.PCTResizeInfo,_=r.pct,E=_===void 0?1:_,x=r.freezeWidth,P=x===void 0?!1:x,A=r.freezeHeight,M=A===void 0?!1:A,I={width:p,height:g,deltaX:c,deltaY:v};if(b){var D=4,$=0,G=0;switch(s){case 0:G=(c*-1-v)/D;break;case 1:G=(c-v)/D;break;case 2:G=(c+v)/D;break;case 3:G=(c*-1+v)/D;break}G!==0&&($=Math.round(G/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+$,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+$,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var W=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),X=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(s){case 0:c=p-W,v=g-X;break;case 1:c=W-p,v=g-X;break;case 2:c=W-p,v=X-g;break;case 3:c=p-W,v=X-g;break}return I.width=W,I.height=X,I.deltaX=c/E,I.deltaY=v/E,I}switch(s){case 0:I.width=P?p:p-c*E,I.height=M?g:g-v*E;break;case 1:I.width=P?p:p+c*E,I.height=M?g:g-v*E;break;case 2:I.width=P?p:p+c*E,I.height=M?g:g+v*E;break;case 3:I.width=P?p:p-c*E,I.height=M?g:g+v*E;break}return I},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,v=o.getNodeEdges(s);v.sourceEdges.forEach(function(p){var g=c.find(function(b){return b.id===p.sourceAnchorId});p.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(p){var g=c.find(function(b){return b.id===p.targetAnchorId});p.updateEndPoint({x:g.x,y:g.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,p=v.id,g=v.x,b=v.y,_=v.width,E=v.height,x=v.radius,P=v.PCTResizeInfo,A=o.nodeModel,M=A.minWidth,I=A.minHeight,D=A.maxWidth,$=A.maxHeight,G=o.index,W=M===D,X=I===$,J=o.getResize({index:G,deltaX:s,deltaY:c,width:_,height:E,PCTResizeInfo:P,pct:1,freezeWidth:W,freezeHeight:X});if(J.width<M||J.width>D||J.height<I||J.height>$){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:W?0:J.deltaX,deltaY:X?0:J.deltaY}),o.nodeModel.width=J.width,o.nodeModel.height=J.height,o.nodeModel.setProperties({nodeSize:{width:J.width,height:J.height}}),o.getNodeEdges(p);var z={x:g,y:b,width:_,height:E,radius:x},L={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:x};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:z,afterNode:L})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,p=v.id,g=v.rx,b=v.ry,_=v.x,E=v.y,x=v.PCTResizeInfo,P=o.index,A=o.nodeModel,M=A.minWidth,I=A.minHeight,D=A.maxWidth,$=A.maxHeight,G=M===D,W=I===$,X=g,J=b,z=o.getResize({index:P,deltaX:s,deltaY:c,width:X,height:J,PCTResizeInfo:x,pct:1/2,freezeWidth:G,freezeHeight:W});if(z.width<M/2||z.width>D/2||z.height<I/2||z.height>$/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:G?0:z.deltaX,deltaY:W?0:z.deltaY}),o.nodeModel.rx=z.width,o.nodeModel.ry=z.height,o.nodeModel.setProperties({nodeSize:{rx:z.width,ry:z.height}}),o.getNodeEdges(p);var L={x:_,y:E},H={rx:z.width,ry:z.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Vp(Vp({},L),{rx:g,ry:b}),afterNode:H})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel;v.id;var p=v.rx,g=v.ry,b=v.x,_=v.y,E=v.PCTResizeInfo,x=o.index,P=o.nodeModel,A=P.minWidth,M=P.minHeight,I=P.maxWidth,D=P.maxHeight,$=A===I,G=M===D,W=p,X=g,J=o.getResize({index:x,deltaX:s,deltaY:c,width:W,height:X,PCTResizeInfo:E,pct:1/2,freezeWidth:$,freezeHeight:G});if(J.width<A/2||J.width>I/2||J.height<M/2||J.height>D/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:$?0:J.deltaX,deltaY:G?0:J.deltaY}),o.nodeModel.rx=J.width,o.nodeModel.ry=J.height,o.nodeModel.setProperties({nodeSize:{rx:J.width,ry:J.height}});var z={x:b,y:_,rx:p,ry:g},L={rx:J.width,ry:J.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:z,afterNode:L})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=o.nodeModel,p=v.id,g=v.modelType,b=v.type,_=Vp({id:p,modelType:g,type:b},s),E=Vp({id:p,modelType:g,type:b},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:_,newNodeSize:E})},o.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,p=o.graphModel.transformModel,g=o.nodeModel.modelType;s=SW(p.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===sv.RECT_NODE||g===sv.HTML_NODE?o.updateRect({deltaX:c,deltaY:v}):g===sv.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:v}):g===sv.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:v})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),v=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,v),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new AW({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],v=0;v<r.length;v++){var p=r[v];p.sourceNodeId===n?s.push(p):r[v].targetNodeId===n&&c.push(p)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Oy("g",{className:"lf-resize-control-"+s},Oy(yE,Vp({className:"lf-node-control"},{x:o,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(pv),MW=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ig=globalThis&&globalThis.__assign||function(){return Ig=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ig.apply(this,arguments)},bb=function(e){MW(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,v=o.width,p=o.height,g={minX:s-v/2,minY:c-p/2,maxX:s+v/2,maxY:c+p/2},b=g.minX,_=g.minY,E=g.maxX,x=g.maxY,P=[{x:b,y:_},{x:E,y:_},{x:E,y:x},{x:b,y:x}];return P.map(function(A,M){return Oy(TW,Ig({index:M},A,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Oy(yE,Ig({fill:"none"},v,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Oy("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(pv),jP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),kW=function(e){jP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),PW=function(e){jP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),IP={type:"rect",view:PW,model:kW},LP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){LP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){LP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)};function NW(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,p=v===void 0?"transparent":v,g=e.stroke,b=g===void 0?"#000":g,_=e.points,E=e.className,x=E===void 0?"lf-basic-shape":E,P={fill:p,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:x};return P.points=_.map(function(A){return A.join(",")}).join(" "),cn.h("polygon",cw({},P))}var FP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fw.apply(this,arguments)};(function(e){FP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){FP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(NW,fw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var $P=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),RW=function(e){$P(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),DW=function(e){$P(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(bb,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),BP={type:"html",view:DW,model:RW},UP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lg=globalThis&&globalThis.__assign||function(){return Lg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lg.apply(this,arguments)},CW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},jW=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(CW(arguments[t]));return e},xA=500,SA=300,IW=-1e4;(function(e){UP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=xA,n.unfoldedHight=SA,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=xA,this.height=SA,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=IW,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var p=o.childrenLastFoldStatus[s];p!==void 0&&p!==c.isFolded&&c.foldGroup(p)}o.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var v=s.id,p=s.sourceNodeId,g=s.targetNodeId,b=s.startPoint,_=s.endPoint,E=s.type,x=s.text,P=s.getProperties(),A={id:v+"__"+c,sourceNodeId:p,targetNodeId:g,startPoint:b,endPoint:_,type:E,properties:P,text:x==null?void 0:x.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var M=r.graphModel.group.getNodeGroup(g);M||(M=r.graphModel.getNodeModelById(g));var I=r.graphModel.group.getNodeGroup(p);I||(I=r.graphModel.getNodeModelById(p)),n&&s.visible!==!1&&(r.children.has(p)||r.id===p?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(M.id!==r.id||I.id!==r.id)&&r.createVirtualEdge(A),s.visible=!1),!n&&s.visible===!1&&(M&&M.isGroup&&M.isFolded?(A.targetNodeId=M.id,A.endPoint=void 0,r.createVirtualEdge(A)):I&&I.isGroup&&I.isFolded?(A.sourceNodeId=I.id,A.startPoint=void 0,r.createVirtualEdge(A)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=jW(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(IP.model);(function(e){UP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,p=n.properties;if(!p.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),_=o+g+8,E=r+g+8;return cn.h("rect",Lg(Lg({},b),{width:_,height:E,x:s-_/2,y:c-E/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(IP.view);var AA=globalThis&&globalThis.__assign||function(){return AA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},AA.apply(this,arguments)};globalThis&&globalThis.__rest;var LW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var TA=globalThis&&globalThis.__assign||function(){return TA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},TA.apply(this,arguments)};globalThis&&globalThis.__values;var MA=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sy=globalThis&&globalThis.__assign||function(){return Sy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Sy.apply(this,arguments)};function FW(e){var t=function(o){MA(r,o);function r(s,c){var v=this;s.id||(s.id="Flow_"+fW());var p=Sy(Sy(Sy({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=p,v=o.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){MA(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}FW();globalThis&&globalThis.__read;var kA={width:40,height:40},PA={width:40,height:40},NA={width:100,height:80},Fg={width:100,height:80},RA={width:100,height:80},DA={width:100,height:80},CA={width:100,height:80},jA={width:100,height:80},IA={width:100,height:80},LA={width:100,height:80},cl=function(){};cl.ObjTree=function(){return this};cl.ObjTree.VERSION="0.23";cl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;cl.ObjTree.prototype.attr_prefix="-";cl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};cl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(b){var _;b&&b.responseXML&&b.responseXML.documentElement&&(_=s.parseDOM(b.responseXML.documentElement)),c(_,b),v&&v(b)}}else o.asynchronous=!1;var p;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(p=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(p=g.transport)}if(n)return p;if(p&&p.responseXML&&p.responseXML.documentElement)return this.parseDOM(p.responseXML.documentElement)};cl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};cl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var p=e.childNodes[r].nodeType;p===3||p===4||p===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};cl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};cl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};cl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};cl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};cl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};cl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var $W=function(e){return new cl.ObjTree().parseXML(e)};function VP(e){return Object.prototype.toString.call(e)}function FA(e){return"  ".repeat(e)}function $g(e){return VP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=$g(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return $g(t)}):e}function BW(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify($g(e)).replace(/"/g,"'")}return t}var $A=`	
`;function gg(e,t,n){var o=FA(n),r="",s=$A+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+BW(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return gg(g,t,n+1)}).join("");else if(VP(e)==="[object Object]"){var c=Object.keys(e),v="",p=e["-json"]?$A+FA(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=gg(e[g],g,n+1):p+=gg(e[g],g,n+1)}),r+=v+(p!==""?">"+p+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function UW(e){var t="";for(var n in e)t+=gg(e[n],n,0);return t}var VW=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),dw=globalThis&&globalThis.__assign||function(){return dw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dw.apply(this,arguments)},BA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},mE=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fv=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},hv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fv(arguments[t]));return e},ll;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(ll||(ll={}));var GP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],GW=["properties","startPoint","endPoint","pointsList"],Bg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},WP=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},Iu={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Iu[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,v=t["-id"],p="",g="";try{for(var b=mE(Object.keys(t)),_=b.next();!_.done;_=b.next()){var E=_.value;E.includes("bpmn:")&&(r=Fv(E.split(":"),2),p=r[1],g=(s=t[E])===null||s===void 0?void 0:s["#text"])}}catch(x){n={error:x}}finally{try{_&&!_.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":p,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function WW(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(hv(GW,n||[])),c={in:new Set(hv(Bg.in,(o==null?void 0:o.in)||[])),out:new Set(hv(Bg.out,(o==null?void 0:o.out)||[]))};return Iu=WP(Iu,r),function(v){var p=v.nodes,g=v.edges;function b(_,E){var x,P,A;if((_==null?void 0:_.flag)!==1){var M;if((M=Iu[_.type])&&M.out){var I=M.out(_),D=Object.keys(I);D.length>0&&D.forEach(function(H){_[H]=I[H]})}_!=null&&_.children&&(_.children=_.children.map(function(H){var K=p.find(function(Y){return Y.id===H})||g.find(function(Y){return Y.id===H});return K||{}}));var $={};if(typeof _=="string")return _;if(Array.isArray(_))return _.map(function(H){return b(H,"")}).filter(function(H){return H!=null});try{for(var G=mE(Object.entries(_)),W=G.next();!W.done;W=G.next()){var X=Fv(W.value,2),J=X[0],z=X[1];if(((A=z)===null||A===void 0?void 0:A.flag)===1)return;var L=[E,J].filter(function(H){return H}).join(".");c.out.has(L)||(typeof z!="object"?J.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(J)?$[J]=z:$["-"+J]=z:s.has(L)?$["-"+J]=b(z,L):$[J]=b(z,L))}}catch(H){x={error:H}}finally{try{W&&!W.done&&(P=G.return)&&P.call(G)}finally{if(x)throw x.error}}return $}}return b(v,"")}}function Ug(e){var t,n,o={};try{for(var r=mE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Fv(s.value,2),v=c[0],p=c[1];v.indexOf("-")===0?o[v.substring(1)]=$g(p):typeof p=="string"?o[v]=p:Object.prototype.toString.call(p)==="[object Object]"?o[v]=Ug(p):Array.isArray(p)?o[v]=p.map(function(g){return Ug(g)}):o[v]=p}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function zW(e,t,n){var o,r=new Map,s=WW(n)(t);s.nodes.forEach(function(v){var p=v["-id"],g=v["-type"],b=v.text,_=v.children,E=BA(v,["-id","-type","text","children"]),x={"-id":p};b!=null&&b["-value"]&&(x["-name"]=b["-value"]),E["-json"]&&(x["-json"]=E["-json"]),E["-properties"]&&Object.assign(x,E["-properties"]),_&&(x.children=_),e[g]||(e[g]=[]),e[g].push(x),r.set(p,x)});var c=s.edges.map(function(v){var p=v["-id"];v["-type"];var g=v["-sourceNodeId"],b=v["-targetNodeId"],_=v.text,E=BA(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),x=r.get(b);x["bpmn:incoming"]||(x["bpmn:incoming"]=[]),x["bpmn:incoming"].push(p);var P={"-id":p,"-sourceRef":g,"-targetRef":b};return _!=null&&_["-value"]&&(P["-name"]=_["-value"]),E["-json"]&&(P["-json"]=E["-json"]),E["-properties"]&&Object.assign(P,E["-properties"]),P});return t.edges.forEach(function(v){var p=v.sourceNodeId,g=v.id,b=r.get(p);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(v){var p={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(A){var M,I=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function($){I[$]&&I[$].forEach(function(G){p[$].add(G)})});var D=(M=e[A["-type"]])===null||M===void 0?void 0:M.findIndex(function($){return $["-id"]===A["-id"]});D>=0&&e[A["-type"]].splice(D,1),r.delete(A["-id"]),v[A["-type"]]||(v[A["-type"]]=[]),v[A["-type"]].push(I)});var b=p["bpmn:incoming"],_=p["bpmn:outgoing"];_.forEach(function(A){b.has(A)&&g.push(A)});for(var E=function(A){var M=c.findIndex(function(I){return I["-id"]===g[A]});M>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[M]),c.splice(M,1)):A++,x=A},x,P=0;P<g.length;)E(P),P=x;delete v.children}),e[ll.FLOW]=c,e}function HW(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var p=v.x,g=v.y;return{"-x":p,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,p=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,p-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":p,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var XW=["bpmn:incoming","bpmn:outgoing"];function qW(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,p={in:new Set(hv(Bg.in,(v==null?void 0:v.in)||[])),out:new Set(hv(Bg.out,(v==null?void 0:v.out)||[]))};Iu=WP(Iu,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(E,x){x.forEach(function(P){try{Object.keys(E).forEach(function(A){try{P(A)}catch(M){console.error(M)}})}catch(A){console.error(A)}})})(b,[function(E){function x(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(M){var I;M.indexOf("bpmn:")===0&&!XW.includes(M)&&(b[M]||(b[M]=[]),!Array.isArray(b[M])&&(b[M]=[b[M]]),Array.isArray(A[M])?(I=b[M]).push.apply(I,hv(A[M])):b[M].push(A[M]),Array.isArray(A[M])?A[M].forEach(function(D){!M.includes("Flow")&&A["-children"].push(D["-id"])}):!M.includes("Flow")&&A["-children"].push(A[M]["-id"]),delete A[M])})}if(E==="bpmn:subProcess"){var P=b[E];Array.isArray(P)?P.forEach(function(A){E==="bpmn:subProcess"&&x(A)}):x(P)}},function(E){var x=function(A){Object.keys(A).forEach(function(M){var I,D;if(M.includes("bpmn:")){var $={};Iu[M]&&Iu[M].in?($=(D=(I=Iu[M]).in)===null||D===void 0?void 0:D.call(I,M,ae.cloneDeep(A[M])),delete A[M]):P(A[M]);var G=void 0;(G=Reflect.ownKeys($)).length>0&&G.forEach(function(W){Reflect.set(A,W,$[W])})}})};function P(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(M){P(M)}):typeof A=="object"&&x(A)}P(b[E])},function(E){if(E.indexOf("bpmn:")===0){var x=b[E];if(E==="bpmn:sequenceFlow"){var P=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=KW(x,P)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(E==="bpmn:boundaryEvent"){var M=b[E],I=function(D){var $=D["-attachedToRef"],G=r.get($);G["-boundaryEvents"]||(G["-boundaryEvents"]=[]),G["-boundaryEvents"].push(D["-id"])};Array.isArray(M)?M.forEach(function(D){I(D)}):I(M)}n=n.concat(YW(x,A,E))}}}])}var _=function(E,x,P){Object.keys(E).forEach(function(A){var M=P?P+"."+A:A;x.has(M)?delete E[A]:typeof E[A]=="object"&&_(E[A],x,M)})};return n.forEach(function(E){var x,P;if(!((x=t==null?void 0:t.mapping)===null||x===void 0)&&x.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,M=E.type;A[M]&&(E.type=A[M])}_(E,p.in,"")}),o.forEach(function(E){var x,P;if(!((x=t==null?void 0:t.mapping)===null||x===void 0)&&x.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,M=E.type;A[M]&&(E.type=A[M])}_(E,p.in,"")}),{nodes:n,edges:o}}function YW(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var p=UA(v,n,c);o.push(p)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=UA(r,n,e);o.push(s)}return o}function UA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=Dl.shapeConfigMap.get(t);v&&(o+=v.width/2,r+=v.height/2);var p={};Object.entries(n).forEach(function(E){var x=Fv(E,2),P=x[0],A=x[1];GP.includes(P)||(p[P]=A)}),p=Ug(p);var g;if(c&&(g={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:o,y:r,properties:p};return s&&(_.children=s),g&&(_.text=g),_}function KW(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(VA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(VA(o,e))}return n}function VA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Fv(g,2),_=b[0],E=b[1];GP.includes(_)||(c[_]=E)}),c=Ug(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),p={id:t["-id"],type:ll.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(p.text=n),p}var Dl=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,v,p=dw({},n.processAttributes);zW(p,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":p["-id"]};HW(g,r);var b=n.definitionAttributes;b["bpmn:process"]=p,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var _={"bpmn:definitions":b};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var E=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,x=function(P){Array.isArray(P)&&P.forEach(function(A){return x(A)}),typeof P=="object"&&Object.keys(P).forEach(function(A){var M;(M=E[A])?(P[M]=ae.cloneDeep(P[A]),delete P[A],x(P[M])):x(P[A])})};x(_)}return _},this.adapterIn=function(r,s){if(r)return qW(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(ll.START,{width:kA.width,height:kA.height});Dl.shapeConfigMap.set(ll.END,{width:PA.width,height:PA.height});Dl.shapeConfigMap.set(ll.INTERMEDIATE_CATCH,{width:Fg.width,height:Fg.height});Dl.shapeConfigMap.set(ll.INTERMEDIATE_THROW,{width:Fg.width,height:Fg.height});Dl.shapeConfigMap.set(ll.BOUNDARY,{width:NA.width,height:NA.height});Dl.shapeConfigMap.set(ll.PARALLEL_GATEWAY,{width:RA.width,height:RA.height});Dl.shapeConfigMap.set(ll.INCLUSIVE_GATEWAY,{width:DA.width,height:DA.height});Dl.shapeConfigMap.set(ll.EXCLUSIVE_GATEWAY,{width:CA.width,height:CA.height});Dl.shapeConfigMap.set(ll.SYSTEM,{width:jA.width,height:jA.height});Dl.shapeConfigMap.set(ll.USER,{width:IA.width,height:IA.height});Dl.shapeConfigMap.set(ll.SUBPROCESS,{width:LA.width,height:LA.height});(function(e){VW(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var v=$W(c);return o.adapterIn(v,o.props)},o.adapterXmlOut=function(c){var v=o.adapterOut(c,o.props);return UW(v)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(Dl);var GA=globalThis&&globalThis.__assign||function(){return GA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},GA.apply(this,arguments)};globalThis&&globalThis.__read;var WA;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(WA||(WA={}));var ZW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var JW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var QW=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var zP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),cv=globalThis&&globalThis.__assign||function(){return cv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cv.apply(this,arguments)},Ay=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},e7={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function t7(e){for(var t=e,n=1;n<t.length-1;){var o=Ay(t[n-1],2),r=o[0],s=o[1],c=Ay(t[n],2),v=c[0],p=c[1],g=Ay(t[n+1],2),b=g[0],_=g[1];r===v&&v===b||s===p&&p===_?t.splice(n,1):n++}return t}function n7(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function r7(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,p=""+s+c,g=e7[p]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var _=Ay(n7(t,p,g,v),2),E=_[0],x=_[1];E&&x&&(b+="L "+E[0]+" "+E[1]+" Q "+t[0]+" "+t[1]+" "+x[0]+" "+x[1],r=Ay(x,2),t[0]=r[0],t[1]=r[1])}return b}function o7(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=r7(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){zP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,p=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=t7(o.split(" ").map(function(x){return x.split(",").map(function(P){return+P})})),_=o7(b,v),E=cv(cv(cv({style:r?g:{}},p),s),{fill:"none"});return cn.h("path",cv({d:_},E))},t})(cn.PolylineEdge);(function(e){zP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var i7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var zA=globalThis&&globalThis.__assign||function(){return zA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zA.apply(this,arguments)},HA=globalThis&&globalThis.__assign||function(){return HA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HA.apply(this,arguments)},a7=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let _b=!1;const Vg=Lw({});function HP(e,t,n,o,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),_b&&(Vg[e]=jI(wr({render:()=>Ov(II,{to:n},[Ov(t,s(o,r))]),provide:()=>({getNode:()=>o,getGraph:()=>r})})))}function XP(e){_b&&delete Vg[e]}function Gg(){return _b}function l7(){return _b=!0,wr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Vg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Vg[n])}),Ov(_o,{},t.map(n=>Ov(n)))}}})}class Ko extends BP.view{constructor(n,o){super(n);Ea(this,"isMounted");Ea(this,"r");Ea(this,"component");Ea(this,"app");Ea(this,"root");Ea(this,"VueNode");Ea(this,"up_node_field_dict");if(this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const s=n.graphModel.nodes.filter(c=>c.type===n.model.type);s.length-1>0&&r(s.length-1)}function r(s){var p;const c=s,v=n.model.properties.nodeName+c;(p=n.graphModel.nodes)!=null&&p.some(g=>g.properties.nodeName===v.trim())?r(c+1):n.model.properties.nodeName=v}n.model.properties.config=LI[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var o,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:Zt("views.applicationWorkflow.variable.global"),type:"global",children:((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Gg())HP(this.targetId(),this.component,n,o,r);else{this.r=Ov(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=FM({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r}}}),this.app.use(FI,{locale:$I}),this.app.use(BI),this.app.use(UI),this.app.use(LM);for(const[c,v]of Object.entries(VI))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Gg()&&XP(this.targetId()),this.unmountVueComponent()}}class Zo extends BP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=LM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const p=c[v];if(p.id===s)return!0;if(n(p.id,s))return!0}return!1},o={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==qo.Base&&(this.type!==qo.Start&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let u7=class extends Ko{constructor(t){super(t,XG)}};const s7={type:"ai-chat-node",model:Zo,view:u7},c7=Object.freeze(Object.defineProperty({__proto__:null,default:s7},Symbol.toStringTag,{value:"Module"})),f7={class:"title-decoration-1 mb-8"},d7={class:"flex align-center"},p7={class:"mr-4"},h7=wr({__name:"index",props:{nodeModel:{}},setup(e){const t={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},{params:{id:n}}=Rl.config.globalProperties.$route,o=pt(),r=zr({get:()=>(v.nodeModel.properties.nodeData||$e.set(v.nodeModel.properties,"nodeData",t),v.nodeModel.properties.nodeData),set:g=>{$e.set(v.nodeModel.properties,"nodeData",g)}});function s(g,b){const _=`${g}_list`;b?v.nodeModel.properties.nodeData[_]||$e.set(v.nodeModel.properties.nodeData,_,[]):delete v.nodeModel.properties.nodeData[_]}const c=()=>{if(!v.nodeModel.properties.nodeData.application_id){$e.set(v.nodeModel.properties,"status",500);return}fa.getApplicationById(n,v.nodeModel.properties.nodeData.application_id).then(g=>{const b=v.nodeModel.properties.nodeData.api_input_field_list,_=v.nodeModel.properties.nodeData.user_input_field_list;if(hg(g.data.type)){const E=g.data.workFlow.nodes[0].properties.nodeData,x=g.data.workFlow.nodes[0].properties.api_input_field_list,P=g.data.workFlow.nodes[0].properties.user_input_field_list,A=x.map($=>{const G=b.find(W=>W.variable==$.variable);return G?{...$,value:G.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});$e.set(v.nodeModel.properties.nodeData,"api_input_field_list",A);const M=P.map($=>{const G=_.find(W=>W.field==$.field);return G?{...$,value:G.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});$e.set(v.nodeModel.properties.nodeData,"user_input_field_list",M);const I=E.file_upload_enable,D=E.file_upload_setting;I?(s("document",D.document),s("image",D.image),s("audio",D.audio)):["documentList","imageList","audioList"].forEach($=>{delete v.nodeModel.properties.nodeData[$]}),$e.set(v.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{})},v=e,p=()=>{var g;return(g=o.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:v.nodeModel,errMessage:b}))};return uo(()=>{c(),$e.set(v.nodeModel,"validate",p)}),(g,b)=>{const _=Z("el-form-item"),E=Z("AppIcon"),x=Z("el-tooltip"),P=Z("el-switch"),A=Z("el-form"),M=Z("el-card");return Ie(),dt(Yo,{nodeModel:g.nodeModel},{default:j(()=>[le("h5",f7,Ce(g.$t("views.applicationWorkflow.nodeSetting")),1),R(M,{shadow:"never",class:"card-never"},{default:j(()=>[R(A,{onSubmit:b[6]||(b[6]=pn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:o},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:j(()=>[R(Wr,{ref_key:"applicationNodeFormRef",ref:o,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=I=>r.value.questionReferenceAddress=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("documentList")||"documentList"in r.value?(Ie(),dt(_,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:j(()=>[R(Wr,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=I=>r.value.documentList=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):jn("",!0),r.value.hasOwnProperty("imageList")||"imageList"in r.value?(Ie(),dt(_,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:j(()=>[R(Wr,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=I=>r.value.imageList=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):jn("",!0),r.value.hasOwnProperty("audioList")||"audioList"in r.value?(Ie(),dt(_,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:j(()=>[R(Wr,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=I=>r.value.audioList=I)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):jn("",!0),(Ie(!0),An(_o,null,li(r.value.api_input_field_list,(I,D)=>(Ie(),An("div",{key:"api-input-"+D},[R(_,{label:I.variable,prop:"api_input_field_list."+D+".value",rules:[{required:I.is_required,message:`${g.$t("common.inputPlaceholder")}${I.variable}`,trigger:"blur"}]},{default:j(()=>[R(Wr,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[D].value,"onUpdate:modelValue":$=>r.value.api_input_field_list[D].value=$},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Ie(!0),An(_o,null,li(r.value.user_input_field_list,(I,D)=>(Ie(),An("div",{key:"user-input-"+D},[R(_,{label:I.label,prop:"user_input_field_list."+D+".value",rules:[{required:I.required,message:`${g.$t("common.inputPlaceholder")}${I.label}`,trigger:"blur"}]},{default:j(()=>[R(Wr,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[D].value,"onUpdate:modelValue":$=>r.value.user_input_field_list[D].value=$},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),R(_,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",d7,[le("div",p7,[le("span",null,[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[7]||(b[7]=le("span",{class:"danger"},"*",-1))])]),R(x,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(E,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(P,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=I=>r.value.isResult=I)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class v7 extends Ko{constructor(t){super(t,h7)}}const y7={type:"application-node",model:Zo,view:v7},m7=Object.freeze(Object.defineProperty({__proto__:null,default:y7},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(o){g7(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bg=function(t){return typeof t}:bg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function g7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kf(){return kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},kf.apply(this,arguments)}function b7(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function _7(e,t){if(e==null)return{};var n=b7(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var w7="1.15.6";function Af(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Rf=Af(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),em=Af(/Edge/i),qA=Af(/firefox/i),Ty=Af(/safari/i)&&!Af(/chrome/i)&&!Af(/android/i),gE=Af(/iP(ad|od|hone)/i),qP=Af(/chrome/i)&&Af(/android/i),YP={capture:!1,passive:!1};function eo(e,t,n){e.addEventListener(t,n,!Rf&&YP)}function Yr(e,t,n){e.removeEventListener(t,n,!Rf&&YP)}function Wg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function KP(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function vs(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Wg(e,t):Wg(e,t))||o&&e===n)return e;if(e===n)break}while(e=KP(e))}return null}var YA=/\s+/g;function iu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(YA," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(YA," ")}}function br(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function vv(e,t){var n="";if(typeof e=="string")n=e;else do{var o=br(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function ZP(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function fc(){var e=document.scrollingElement;return e||document.documentElement}function qi(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,v,p,g,b,_;if(e!==window&&e.parentNode&&e!==fc()?(s=e.getBoundingClientRect(),c=s.top,v=s.left,p=s.bottom,g=s.right,b=s.height,_=s.width):(c=0,v=0,p=window.innerHeight,g=window.innerWidth,b=window.innerHeight,_=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Rf))do if(r&&r.getBoundingClientRect&&(br(r,"transform")!=="none"||n&&br(r,"position")!=="static")){var E=r.getBoundingClientRect();c-=E.top+parseInt(br(r,"border-top-width")),v-=E.left+parseInt(br(r,"border-left-width")),p=c+s.height,g=v+s.width;break}while(r=r.parentNode);if(o&&e!==window){var x=vv(r||e),P=x&&x.a,A=x&&x.d;x&&(c/=A,v/=P,_/=P,b/=A,p=c+b,g=v+_)}return{top:c,left:v,bottom:p,right:g,width:_,height:b}}}function KA(e,t,n){for(var o=Cd(e,!0),r=qi(e)[t];o;){var s=qi(o)[n],c=void 0;if(n==="top"||n==="left"?c=r>=s:c=r<=s,!c)return o;if(o===fc())break;o=Cd(o,!1)}return!1}function Sv(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==vr.ghost&&(o||c[s]!==vr.dragged)&&vs(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function bE(e,t){for(var n=e.lastElementChild;n&&(n===vr.ghost||br(n,"display")==="none"||t&&!Wg(n,t));)n=n.previousElementSibling;return n||null}function ju(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==vr.clone&&(!t||Wg(e,t))&&n++;return n}function ZA(e){var t=0,n=0,o=fc();if(e)do{var r=vv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function E7(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Cd(e,t){if(!e||!e.getBoundingClientRect)return fc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=br(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return fc();if(o||t)return n;o=!0}}while(n=n.parentNode);return fc()}function O7(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function O1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var My;function JP(e,t){return function(){if(!My){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),My=setTimeout(function(){My=void 0},t)}}}function x7(){clearTimeout(My),My=void 0}function QP(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function e2(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function t2(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,v,p;if(!(!vs(r,t.draggable,e,!1)||r.animated||r===n)){var g=qi(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,g.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,g.top),o.right=Math.max((v=o.right)!==null&&v!==void 0?v:-1/0,g.right),o.bottom=Math.max((p=o.bottom)!==null&&p!==void 0?p:-1/0,g.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Pl="Sortable"+new Date().getTime();function S7(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(br(r,"display")==="none"||r===vr.ghost)){e.push({target:r,rect:qi(r)});var s=pc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=vv(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(E7(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var s=!1,c=0;e.forEach(function(v){var p=0,g=v.target,b=g.fromRect,_=qi(g),E=g.prevFromRect,x=g.prevToRect,P=v.rect,A=vv(g,!0);A&&(_.top-=A.f,_.left-=A.e),g.toRect=_,g.thisAnimationDuration&&O1(E,_)&&!O1(b,_)&&(P.top-_.top)/(P.left-_.left)===(b.top-_.top)/(b.left-_.left)&&(p=T7(P,E,x,r.options)),O1(_,b)||(g.prevFromRect=b,g.prevToRect=_,p||(p=r.options.animation),r.animate(g,P,_,p)),p&&(s=!0,c=Math.max(c,p),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},p),g.thisAnimationDuration=p)}),clearTimeout(t),s?t=setTimeout(function(){typeof o=="function"&&o()},c):typeof o=="function"&&o(),e=[]},animate:function(o,r,s,c){if(c){br(o,"transition",""),br(o,"transform","");var v=vv(this.el),p=v&&v.a,g=v&&v.d,b=(r.left-s.left)/(p||1),_=(r.top-s.top)/(g||1);o.animatingX=!!b,o.animatingY=!!_,br(o,"transform","translate3d("+b+"px,"+_+"px,0)"),this.forRepaintDummy=A7(o),br(o,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),br(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){br(o,"transition",""),br(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},c)}}}}function A7(e){return e.offsetWidth}function T7(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Qh=[],x1={initializeByDefault:!0},tm={mount:function(t){for(var n in x1)x1.hasOwnProperty(n)&&!(n in t)&&(t[n]=x1[n]);Qh.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Qh.push(t)},pluginEvent:function(t,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=t+"Global";Qh.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](pc({sortable:n},o)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](pc({sortable:n},o)))})},initializePlugins:function(t,n,o,r){Qh.forEach(function(v){var p=v.pluginName;if(!(!t.options[p]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[p]=g,kf(o,g.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var o={};return Qh.forEach(function(r){typeof r.eventProperties=="function"&&kf(o,r.eventProperties.call(n[r.pluginName],t))}),o},modifyOption:function(t,n,o){var r;return Qh.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],o))}),r}};function M7(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,v=e.fromEl,p=e.oldIndex,g=e.newIndex,b=e.oldDraggableIndex,_=e.newDraggableIndex,E=e.originalEvent,x=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[Pl],!!t){var A,M=t.options,I="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Rf&&!em?A=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(o,!0,!0)),A.to=c||n,A.from=v||n,A.item=r||n,A.clone=s,A.oldIndex=p,A.newIndex=g,A.oldDraggableIndex=b,A.newDraggableIndex=_,A.originalEvent=E,A.pullMode=x?x.lastPutMode:void 0;var D=pc(pc({},P),tm.getEventProperties(o,t));for(var $ in D)A[$]=D[$];n&&n.dispatchEvent(A),M[I]&&M[I].call(t,A)}}var k7=["evt"],kl=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,s=_7(o,k7);tm.pluginEvent.bind(vr)(t,n,pc({dragEl:yn,parentEl:Ti,ghostEl:Tr,rootEl:hi,nextEl:$p,lastDownEl:_g,cloneEl:_i,cloneHidden:Rd,dragStarted:gy,putSortable:xa,activeSortable:vr.active,originalEvent:r,oldIndex:fv,oldDraggableIndex:ky,newIndex:au,newDraggableIndex:Nd,hideGhostForTarget:i2,unhideGhostForTarget:a2,cloneNowHidden:function(){Rd=!0},cloneNowShown:function(){Rd=!1},dispatchSortableEvent:function(v){al({sortable:n,name:v,originalEvent:r})}},s))};function al(e){M7(pc({putSortable:xa,cloneEl:_i,targetEl:yn,rootEl:hi,oldIndex:fv,oldDraggableIndex:ky,newIndex:au,newDraggableIndex:Nd},e))}var yn,Ti,Tr,hi,$p,_g,_i,Rd,fv,au,ky,Nd,ag,xa,ov=!1,zg=!1,Hg=[],Ip,hs,S1,A1,JA,QA,gy,ev,Py,Ny=!1,lg=!1,wg,$a,T1=[],pw=!1,Xg=[],wb=typeof document<"u",ug=gE,eT=em||Rf?"cssFloat":"float",P7=wb&&!qP&&!gE&&"draggable"in document.createElement("div"),n2=function(){if(wb){if(Rf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),r2=function(t,n){var o=br(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Sv(t,0,n),c=Sv(t,1,n),v=s&&br(s),p=c&&br(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+qi(s).width,b=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+qi(c).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&v.float&&v.float!=="none"){var _=v.float==="left"?"left":"right";return c&&(p.clear==="both"||p.clear===_)?"vertical":"horizontal"}return s&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&o[eT]==="none"||c&&o[eT]==="none"&&g+b>r)?"vertical":"horizontal"},N7=function(t,n,o){var r=o?t.left:t.top,s=o?t.right:t.bottom,c=o?t.width:t.height,v=o?n.left:n.top,p=o?n.right:n.bottom,g=o?n.width:n.height;return r===v||s===p||r+c/2===v+g/2},R7=function(t,n){var o;return Hg.some(function(r){var s=r[Pl].options.emptyInsertThreshold;if(!(!s||bE(r))){var c=qi(r),v=t>=c.left-s&&t<=c.right+s,p=n>=c.top-s&&n<=c.bottom+s;if(v&&p)return o=r}}),o},o2=function(t){function n(s,c){return function(v,p,g,b){var _=v.options.group.name&&p.options.group.name&&v.options.group.name===p.options.group.name;if(s==null&&(c||_))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(v,p,g,b),c)(v,p,g,b);var E=(c?v:p).options.group.name;return s===!0||typeof s=="string"&&s===E||s.join&&s.indexOf(E)>-1}}var o={},r=t.group;(!r||bg(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,t.group=o},i2=function(){!n2&&Tr&&br(Tr,"display","none")},a2=function(){!n2&&Tr&&br(Tr,"display","")};wb&&!qP&&document.addEventListener("click",function(e){if(zg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),zg=!1,!1},!0);var Lp=function(t){if(yn){t=t.touches?t.touches[0]:t;var n=R7(t.clientX,t.clientY);if(n){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[Pl]._onDragOver(o)}}},D7=function(t){yn&&yn.parentNode[Pl]._isOutsideThisEl(t.target)};function vr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=kf({},t),e[Pl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return r2(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:vr.supportPointer!==!1&&"PointerEvent"in window&&(!Ty||gE),emptyInsertThreshold:5};tm.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);o2(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:P7,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?eo(e,"pointerdown",this._onTapStart):(eo(e,"mousedown",this._onTapStart),eo(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(eo(e,"dragover",this),eo(e,"dragenter",this)),Hg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),kf(this,S7())}vr.prototype={constructor:vr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ev=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,yn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,r=this.options,s=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,p=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||p,b=r.filter;if(U7(o),!yn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Ty&&p&&p.tagName.toUpperCase()==="SELECT")&&(p=vs(p,r.draggable,o,!1),!(p&&p.animated)&&_g!==p)){if(fv=ju(p),ky=ju(p,r.draggable),typeof b=="function"){if(b.call(this,t,p,this)){al({sortable:n,rootEl:g,name:"filter",targetEl:p,toEl:o,fromEl:o}),kl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(_){if(_=vs(g,_.trim(),o,!1),_)return al({sortable:n,rootEl:_,name:"filter",targetEl:p,fromEl:o,toEl:o}),kl("filter",n,{evt:t}),!0}),b)){s&&t.preventDefault();return}r.handle&&!vs(g,r.handle,o,!1)||this._prepareDragStart(t,v,p)}}},_prepareDragStart:function(t,n,o){var r=this,s=r.el,c=r.options,v=s.ownerDocument,p;if(o&&!yn&&o.parentNode===s){var g=qi(o);if(hi=s,yn=o,Ti=yn.parentNode,$p=yn.nextSibling,_g=o,ag=c.group,vr.dragged=yn,Ip={target:yn,clientX:(n||t).clientX,clientY:(n||t).clientY},JA=Ip.clientX-g.left,QA=Ip.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,yn.style["will-change"]="all",p=function(){if(kl("delayEnded",r,{evt:t}),vr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!qA&&r.nativeDraggable&&(yn.draggable=!0),r._triggerDragStart(t,n),al({sortable:r,name:"choose",originalEvent:t}),iu(yn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(b){ZP(yn,b.trim(),M1)}),eo(v,"dragover",Lp),eo(v,"mousemove",Lp),eo(v,"touchmove",Lp),c.supportPointer?(eo(v,"pointerup",r._onDrop),!this.nativeDraggable&&eo(v,"pointercancel",r._onDrop)):(eo(v,"mouseup",r._onDrop),eo(v,"touchend",r._onDrop),eo(v,"touchcancel",r._onDrop)),qA&&this.nativeDraggable&&(this.options.touchStartThreshold=4,yn.draggable=!0),kl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(em||Rf))){if(vr.eventCanceled){this._onDrop();return}c.supportPointer?(eo(v,"pointerup",r._disableDelayedDrag),eo(v,"pointercancel",r._disableDelayedDrag)):(eo(v,"mouseup",r._disableDelayedDrag),eo(v,"touchend",r._disableDelayedDrag),eo(v,"touchcancel",r._disableDelayedDrag)),eo(v,"mousemove",r._delayedDragTouchMoveHandler),eo(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&eo(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(p,c.delay)}else p()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){yn&&M1(yn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Yr(t,"mouseup",this._disableDelayedDrag),Yr(t,"touchend",this._disableDelayedDrag),Yr(t,"touchcancel",this._disableDelayedDrag),Yr(t,"pointerup",this._disableDelayedDrag),Yr(t,"pointercancel",this._disableDelayedDrag),Yr(t,"mousemove",this._delayedDragTouchMoveHandler),Yr(t,"touchmove",this._delayedDragTouchMoveHandler),Yr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?eo(document,"pointermove",this._onTouchMove):n?eo(document,"touchmove",this._onTouchMove):eo(document,"mousemove",this._onTouchMove):(eo(yn,"dragend",this),eo(hi,"dragstart",this._onDragStart));try{document.selection?Eg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(ov=!1,hi&&yn){kl("dragStarted",this,{evt:n}),this.nativeDraggable&&eo(document,"dragover",D7);var o=this.options;!t&&iu(yn,o.dragClass,!1),iu(yn,o.ghostClass,!0),vr.active=this,t&&this._appendGhost(),al({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hs){this._lastX=hs.clientX,this._lastY=hs.clientY,i2();for(var t=document.elementFromPoint(hs.clientX,hs.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(hs.clientX,hs.clientY),t!==n);)n=t;if(yn.parentNode[Pl]._isOutsideThisEl(t),n)do{if(n[Pl]){var o=void 0;if(o=n[Pl]._onDragOver({clientX:hs.clientX,clientY:hs.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=KP(n));a2()}},_onTouchMove:function(t){if(Ip){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Tr&&vv(Tr,!0),v=Tr&&c&&c.a,p=Tr&&c&&c.d,g=ug&&$a&&ZA($a),b=(s.clientX-Ip.clientX+r.x)/(v||1)+(g?g[0]-T1[0]:0)/(v||1),_=(s.clientY-Ip.clientY+r.y)/(p||1)+(g?g[1]-T1[1]:0)/(p||1);if(!vr.active&&!ov){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Tr){c?(c.e+=b-(S1||0),c.f+=_-(A1||0)):c={a:1,b:0,c:0,d:1,e:b,f:_};var E="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");br(Tr,"webkitTransform",E),br(Tr,"mozTransform",E),br(Tr,"msTransform",E),br(Tr,"transform",E),S1=b,A1=_,hs=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Tr){var t=this.options.fallbackOnBody?document.body:hi,n=qi(yn,!0,ug,!0,t),o=this.options;if(ug){for($a=t;br($a,"position")==="static"&&br($a,"transform")==="none"&&$a!==document;)$a=$a.parentNode;$a!==document.body&&$a!==document.documentElement?($a===document&&($a=fc()),n.top+=$a.scrollTop,n.left+=$a.scrollLeft):$a=fc(),T1=ZA($a)}Tr=yn.cloneNode(!0),iu(Tr,o.ghostClass,!1),iu(Tr,o.fallbackClass,!0),iu(Tr,o.dragClass,!0),br(Tr,"transition",""),br(Tr,"transform",""),br(Tr,"box-sizing","border-box"),br(Tr,"margin",0),br(Tr,"top",n.top),br(Tr,"left",n.left),br(Tr,"width",n.width),br(Tr,"height",n.height),br(Tr,"opacity","0.8"),br(Tr,"position",ug?"absolute":"fixed"),br(Tr,"zIndex","100000"),br(Tr,"pointerEvents","none"),vr.ghost=Tr,t.appendChild(Tr),br(Tr,"transform-origin",JA/parseInt(Tr.style.width)*100+"% "+QA/parseInt(Tr.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,r=t.dataTransfer,s=o.options;if(kl("dragStart",this,{evt:t}),vr.eventCanceled){this._onDrop();return}kl("setupClone",this),vr.eventCanceled||(_i=e2(yn),_i.removeAttribute("id"),_i.draggable=!1,_i.style["will-change"]="",this._hideClone(),iu(_i,this.options.chosenClass,!1),vr.clone=_i),o.cloneId=Eg(function(){kl("clone",o),!vr.eventCanceled&&(o.options.removeCloneOnHide||hi.insertBefore(_i,yn),o._hideClone(),al({sortable:o,name:"clone"}))}),!n&&iu(yn,s.dragClass,!0),n?(zg=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Yr(document,"mouseup",o._onDrop),Yr(document,"touchend",o._onDrop),Yr(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,yn)),eo(document,"drop",o),br(yn,"transform","translateZ(0)")),ov=!0,o._dragStartId=Eg(o._dragStarted.bind(o,n,t)),eo(document,"selectstart",o),gy=!0,window.getSelection().removeAllRanges(),Ty&&br(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,r,s,c,v=this.options,p=v.group,g=vr.active,b=ag===p,_=v.sort,E=xa||g,x,P=this,A=!1;if(pw)return;function M(Re,ue){kl(Re,P,pc({evt:t,isOwner:b,axis:x?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:_,fromSortable:E,target:o,completed:D,onMove:function(Pe,Xe){return sg(hi,n,yn,r,Pe,qi(Pe),t,Xe)},changed:$},ue))}function I(){M("dragOverAnimationCapture"),P.captureAnimationState(),P!==E&&E.captureAnimationState()}function D(Re){return M("dragOverCompleted",{insertion:Re}),Re&&(b?g._hideClone():g._showClone(P),P!==E&&(iu(yn,xa?xa.options.ghostClass:g.options.ghostClass,!1),iu(yn,v.ghostClass,!0)),xa!==P&&P!==vr.active?xa=P:P===vr.active&&xa&&(xa=null),E===P&&(P._ignoreWhileAnimating=o),P.animateAll(function(){M("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(o===yn&&!yn.animated||o===n&&!o.animated)&&(ev=null),!v.dragoverBubble&&!t.rootEl&&o!==document&&(yn.parentNode[Pl]._isOutsideThisEl(t.target),!Re&&Lp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),A=!0}function $(){au=ju(yn),Nd=ju(yn,v.draggable),al({sortable:P,name:"change",toEl:n,newIndex:au,newDraggableIndex:Nd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=vs(o,v.draggable,n,!0),M("dragOver"),vr.eventCanceled)return A;if(yn.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||P._ignoreWhileAnimating===o)return D(!1);if(zg=!1,g&&!v.disabled&&(b?_||(c=Ti!==hi):xa===this||(this.lastPutMode=ag.checkPull(this,g,yn,t))&&p.checkPut(this,g,yn,t))){if(x=this._getDirection(t,o)==="vertical",r=qi(yn),M("dragOverValid"),vr.eventCanceled)return A;if(c)return Ti=hi,I(),this._hideClone(),M("revert"),vr.eventCanceled||($p?hi.insertBefore(yn,$p):hi.appendChild(yn)),D(!0);var G=bE(n,v.draggable);if(!G||L7(t,x,this)&&!G.animated){if(G===yn)return D(!1);if(G&&n===t.target&&(o=G),o&&(s=qi(o)),sg(hi,n,yn,r,o,s,t,!!o)!==!1)return I(),G&&G.nextSibling?n.insertBefore(yn,G.nextSibling):n.appendChild(yn),Ti=n,$(),D(!0)}else if(G&&I7(t,x,this)){var W=Sv(n,0,v,!0);if(W===yn)return D(!1);if(o=W,s=qi(o),sg(hi,n,yn,r,o,s,t,!1)!==!1)return I(),n.insertBefore(yn,W),Ti=n,$(),D(!0)}else if(o.parentNode===n){s=qi(o);var X=0,J,z=yn.parentNode!==n,L=!N7(yn.animated&&yn.toRect||r,o.animated&&o.toRect||s,x),H=x?"top":"left",K=KA(o,"top","top")||KA(yn,"top","top"),Y=K?K.scrollTop:void 0;ev!==o&&(J=s[H],Ny=!1,lg=!L&&v.invertSwap||z),X=F7(t,o,s,x,L?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,lg,ev===o);var ce;if(X!==0){var Ne=ju(yn);do Ne-=X,ce=Ti.children[Ne];while(ce&&(br(ce,"display")==="none"||ce===Tr))}if(X===0||ce===o)return D(!1);ev=o,Py=X;var _e=o.nextElementSibling,Oe=!1;Oe=X===1;var ke=sg(hi,n,yn,r,o,s,t,Oe);if(ke!==!1)return(ke===1||ke===-1)&&(Oe=ke===1),pw=!0,setTimeout(j7,30),I(),Oe&&!_e?n.appendChild(yn):o.parentNode.insertBefore(yn,Oe?_e:o),K&&QP(K,0,Y-K.scrollTop),Ti=yn.parentNode,J!==void 0&&!lg&&(wg=Math.abs(J-qi(o)[H])),$(),D(!0)}if(n.contains(yn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Yr(document,"mousemove",this._onTouchMove),Yr(document,"touchmove",this._onTouchMove),Yr(document,"pointermove",this._onTouchMove),Yr(document,"dragover",Lp),Yr(document,"mousemove",Lp),Yr(document,"touchmove",Lp)},_offUpEvents:function(){var t=this.el.ownerDocument;Yr(t,"mouseup",this._onDrop),Yr(t,"touchend",this._onDrop),Yr(t,"pointerup",this._onDrop),Yr(t,"pointercancel",this._onDrop),Yr(t,"touchcancel",this._onDrop),Yr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(au=ju(yn),Nd=ju(yn,o.draggable),kl("drop",this,{evt:t}),Ti=yn&&yn.parentNode,au=ju(yn),Nd=ju(yn,o.draggable),vr.eventCanceled){this._nulling();return}ov=!1,lg=!1,Ny=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hw(this.cloneId),hw(this._dragStartId),this.nativeDraggable&&(Yr(document,"drop",this),Yr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ty&&br(document.body,"user-select",""),br(yn,"transform",""),t&&(gy&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Tr&&Tr.parentNode&&Tr.parentNode.removeChild(Tr),(hi===Ti||xa&&xa.lastPutMode!=="clone")&&_i&&_i.parentNode&&_i.parentNode.removeChild(_i),yn&&(this.nativeDraggable&&Yr(yn,"dragend",this),M1(yn),yn.style["will-change"]="",gy&&!ov&&iu(yn,xa?xa.options.ghostClass:this.options.ghostClass,!1),iu(yn,this.options.chosenClass,!1),al({sortable:this,name:"unchoose",toEl:Ti,newIndex:null,newDraggableIndex:null,originalEvent:t}),hi!==Ti?(au>=0&&(al({rootEl:Ti,name:"add",toEl:Ti,fromEl:hi,originalEvent:t}),al({sortable:this,name:"remove",toEl:Ti,originalEvent:t}),al({rootEl:Ti,name:"sort",toEl:Ti,fromEl:hi,originalEvent:t}),al({sortable:this,name:"sort",toEl:Ti,originalEvent:t})),xa&&xa.save()):au!==fv&&au>=0&&(al({sortable:this,name:"update",toEl:Ti,originalEvent:t}),al({sortable:this,name:"sort",toEl:Ti,originalEvent:t})),vr.active&&((au==null||au===-1)&&(au=fv,Nd=ky),al({sortable:this,name:"end",toEl:Ti,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){kl("nulling",this),hi=yn=Ti=Tr=$p=_i=_g=Rd=Ip=hs=gy=au=Nd=fv=ky=ev=Py=xa=ag=vr.dragged=vr.ghost=vr.clone=vr.active=null,Xg.forEach(function(t){t.checked=!0}),Xg.length=S1=A1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":yn&&(this._onDragOver(t),C7(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,r=0,s=o.length,c=this.options;r<s;r++)n=o[r],vs(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||B7(n));return t},sort:function(t,n){var o={},r=this.el;this.toArray().forEach(function(s,c){var v=r.children[c];vs(v,this.options.draggable,r,!1)&&(o[s]=v)},this),n&&this.captureAnimationState(),t.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return vs(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var r=tm.modifyOption(this,t,n);typeof r<"u"?o[t]=r:o[t]=n,t==="group"&&o2(o)},destroy:function(){kl("destroy",this);var t=this.el;t[Pl]=null,Yr(t,"mousedown",this._onTapStart),Yr(t,"touchstart",this._onTapStart),Yr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Yr(t,"dragover",this),Yr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Hg.splice(Hg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Rd){if(kl("hideClone",this),vr.eventCanceled)return;br(_i,"display","none"),this.options.removeCloneOnHide&&_i.parentNode&&_i.parentNode.removeChild(_i),Rd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Rd){if(kl("showClone",this),vr.eventCanceled)return;yn.parentNode==hi&&!this.options.group.revertClone?hi.insertBefore(_i,yn):$p?hi.insertBefore(_i,$p):hi.appendChild(_i),this.options.group.revertClone&&this.animate(yn,_i),br(_i,"display",""),Rd=!1}}};function C7(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function sg(e,t,n,o,r,s,c,v){var p,g=e[Pl],b=g.options.onMove,_;return window.CustomEvent&&!Rf&&!em?p=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent("move",!0,!0)),p.to=t,p.from=e,p.dragged=n,p.draggedRect=o,p.related=r||t,p.relatedRect=s||qi(t),p.willInsertAfter=v,p.originalEvent=c,e.dispatchEvent(p),b&&(_=b.call(g,p,c)),_}function M1(e){e.draggable=!1}function j7(){pw=!1}function I7(e,t,n){var o=qi(Sv(n.el,0,n.options,!0)),r=t2(n.el,n.options,Tr),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function L7(e,t,n){var o=qi(bE(n.el,n.options.draggable)),r=t2(n.el,n.options,Tr),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function F7(e,t,n,o,r,s,c,v){var p=o?e.clientY:e.clientX,g=o?n.height:n.width,b=o?n.top:n.left,_=o?n.bottom:n.right,E=!1;if(!c){if(v&&wg<g*r){if(!Ny&&(Py===1?p>b+g*s/2:p<_-g*s/2)&&(Ny=!0),Ny)E=!0;else if(Py===1?p<b+wg:p>_-wg)return-Py}else if(p>b+g*(1-r)/2&&p<_-g*(1-r)/2)return $7(t)}return E=E||c,E&&(p<b+g*s/2||p>_-g*s/2)?p>b+g/2?1:-1:0}function $7(e){return ju(yn)<ju(e)?1:-1}function B7(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function U7(e){Xg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Xg.push(o)}}function Eg(e){return setTimeout(e,0)}function hw(e){return clearTimeout(e)}wb&&eo(document,"touchmove",function(e){(vr.active||ov)&&e.cancelable&&e.preventDefault()});vr.utils={on:eo,off:Yr,css:br,find:ZP,is:function(t,n){return!!vs(t,n,t,!1)},extend:O7,throttle:JP,closest:vs,toggleClass:iu,clone:e2,index:ju,nextTick:Eg,cancelNextTick:hw,detectDirection:r2,getChild:Sv,expando:Pl};vr.get=function(e){return e[Pl]};vr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(vr.utils=pc(pc({},vr.utils),o.utils)),tm.mount(o)})};vr.create=function(e,t){return new vr(e,t)};vr.version=w7;var Xi=[],by,vw,yw=!1,k1,P1,qg,_y;function V7(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?eo(document,"dragover",this._handleAutoScroll):this.options.supportPointer?eo(document,"pointermove",this._handleFallbackAutoScroll):o.touches?eo(document,"touchmove",this._handleFallbackAutoScroll):eo(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Yr(document,"dragover",this._handleAutoScroll):(Yr(document,"pointermove",this._handleFallbackAutoScroll),Yr(document,"touchmove",this._handleFallbackAutoScroll),Yr(document,"mousemove",this._handleFallbackAutoScroll)),tT(),Og(),x7()},nulling:function(){qg=vw=by=yw=_y=k1=P1=null,Xi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(s,c);if(qg=n,o||this.options.forceAutoScrollFallback||em||Rf||Ty){N1(n,this.options,v,o);var p=Cd(v,!0);yw&&(!_y||s!==k1||c!==P1)&&(_y&&tT(),_y=setInterval(function(){var g=Cd(document.elementFromPoint(s,c),!0);g!==p&&(p=g,Og()),N1(n,r.options,g,o)},10),k1=s,P1=c)}else{if(!this.options.bubbleScroll||Cd(v,!0)===fc()){Og();return}N1(n,this.options,Cd(v,!1),!1)}}},kf(e,{pluginName:"scroll",initializeByDefault:!0})}function Og(){Xi.forEach(function(e){clearInterval(e.pid)}),Xi=[]}function tT(){clearInterval(_y)}var N1=JP(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,p=fc(),g=!1,b;vw!==n&&(vw=n,Og(),by=t.scroll,b=t.scrollFn,by===!0&&(by=Cd(n,!0)));var _=0,E=by;do{var x=E,P=qi(x),A=P.top,M=P.bottom,I=P.left,D=P.right,$=P.width,G=P.height,W=void 0,X=void 0,J=x.scrollWidth,z=x.scrollHeight,L=br(x),H=x.scrollLeft,K=x.scrollTop;x===p?(W=$<J&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),X=G<z&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(W=$<J&&(L.overflowX==="auto"||L.overflowX==="scroll"),X=G<z&&(L.overflowY==="auto"||L.overflowY==="scroll"));var Y=W&&(Math.abs(D-r)<=c&&H+$<J)-(Math.abs(I-r)<=c&&!!H),ce=X&&(Math.abs(M-s)<=c&&K+G<z)-(Math.abs(A-s)<=c&&!!K);if(!Xi[_])for(var Ne=0;Ne<=_;Ne++)Xi[Ne]||(Xi[Ne]={});(Xi[_].vx!=Y||Xi[_].vy!=ce||Xi[_].el!==x)&&(Xi[_].el=x,Xi[_].vx=Y,Xi[_].vy=ce,clearInterval(Xi[_].pid),(Y!=0||ce!=0)&&(g=!0,Xi[_].pid=setInterval((function(){o&&this.layer===0&&vr.active._onTouchMove(qg);var _e=Xi[this.layer].vy?Xi[this.layer].vy*v:0,Oe=Xi[this.layer].vx?Xi[this.layer].vx*v:0;typeof b=="function"&&b.call(vr.dragged.parentNode[Pl],Oe,_e,e,qg,Xi[this.layer].el)!=="continue"||QP(Xi[this.layer].el,Oe,_e)}).bind({layer:_}),24))),_++}while(t.bubbleScroll&&E!==p&&(E=Cd(E,!1)));yw=g}},30),l2=function(t){var n=t.originalEvent,o=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,p=t.unhideGhostForTarget;if(n){var g=o||s;v();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,_=document.elementFromPoint(b.clientX,b.clientY);p(),g&&!g.el.contains(_)&&(c("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function _E(){}_E.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=Sv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:l2};kf(_E,{pluginName:"revertOnSpill"});function wE(){}wE.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:l2};kf(wE,{pluginName:"removeOnSpill"});vr.mount(new V7);vr.mount(wE,_E);const G7={class:"dialog-footer"},W7=wr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=pt(),s=pt(!1),c=pt(!1),v=pt({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),p=Lw({name:[{required:!0,message:Zt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Zt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Zt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=pt(!1);$M(g,x=>{x||(v.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=x=>{x&&(v.value=$e.cloneDeep(x),c.value=!0),g.value=!0},_=()=>{g.value=!1,c.value=!1},E=async x=>{x&&await x.validate(P=>{P&&o("refresh",v.value)})};return t({open:b,close:_}),(x,P)=>{const A=Z("el-input"),M=Z("el-form-item"),I=Z("el-switch"),D=Z("el-form"),$=Z("el-button"),G=Z("el-dialog");return Ie(),dt(G,{title:c.value?x.$t("views.template.templateForm.title.editParam"):x.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":P[8]||(P[8]=W=>g.value=W),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:j(()=>[le("span",G7,[R($,{onClick:P[6]||(P[6]=pn(W=>g.value=!1,["prevent"]))},{default:j(()=>[bt(Ce(x.$t("common.cancel")),1)]),_:1}),R($,{type:"primary",onClick:P[7]||(P[7]=W=>E(r.value)),loading:s.value},{default:j(()=>[bt(Ce(c.value?x.$t("common.save"):x.$t("common.add")),1)]),_:1},8,["loading"])])]),default:j(()=>[R(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:p,model:v.value,"require-asterisk-position":"right"},{default:j(()=>[R(M,{label:x.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:j(()=>[R(A,{modelValue:v.value.variable,"onUpdate:modelValue":P[0]||(P[0]=W=>v.value.variable=W),placeholder:x.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:P[1]||(P[1]=W=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),R(M,{label:x.$t("dynamicsForm.paramForm.required.label"),onClick:P[3]||(P[3]=pn(()=>{},["prevent"]))},{default:j(()=>[R(I,{size:"small",modelValue:v.value.is_required,"onUpdate:modelValue":P[2]||(P[2]=W=>v.value.is_required=W)},null,8,["modelValue"])]),_:1},8,["label"]),R(M,{label:x.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.is_required,message:x.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:j(()=>[R(A,{modelValue:v.value.default_value,"onUpdate:modelValue":P[4]||(P[4]=W=>v.value.default_value=W),placeholder:x.$t("dynamicsForm.default.placeholder"),onBlur:P[5]||(P[5]=W=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),z7={class:"flex-between mb-16"},H7={class:"lighter"},X7={class:"mr-4"},q7=wr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=pt(),o=pt(null),r=pt(),s=pt([]);function c(b,_){typeof _<"u"&&(o.value=_),r.value.open(b)}function v(b){s.value.splice(b,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function p(b){for(let E=0;E<s.value.length;E++)if(s.value[E].variable===b.variable&&o.value!==E){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}let _=t.nodeModel.properties.user_input_field_list;for(let E=0;E<_.length;E++)if(_[E].field===b.variable){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}o.value!==null?s.value.splice(o.value,1,b):s.value.push(b),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const _=n.value.$el.querySelector(".el-table__body-wrapper tbody");_&&vr.create(_,{animation:150,ghostClass:"ghost-row",onEnd:E=>{if(E.oldIndex===void 0||E.newIndex===void 0)return;const x=[...s.value],[P]=x.splice(E.oldIndex,1);x.splice(E.newIndex,0,P),s.value=x,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return uo(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(b=>b.assignment_method==="api_input").forEach(b=>{s.value.push(b)}),$e.set(t.nodeModel.properties,"api_input_field_list",s)}),(b,_)=>{var W;const E=Z("Plus"),x=Z("el-icon"),P=Z("el-button"),A=Z("el-table-column"),M=Z("el-switch"),I=Z("EditPen"),D=Z("el-tooltip"),$=Z("Delete"),G=Z("el-table");return Ie(),An(_o,null,[le("div",z7,[le("h5",H7,Ce(b.$t("views.template.templateForm.title.apiParamPassing")),1),R(P,{link:"",type:"primary",onClick:_[0]||(_[0]=X=>c())},{default:j(()=>[R(x,{class:"mr-4"},{default:j(()=>[R(E)]),_:1}),bt(" "+Ce(b.$t("common.add")),1)]),_:1})]),((W=t.nodeModel.properties.api_input_field_list)==null?void 0:W.length)>0?(Ie(),dt(G,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:j(()=>[R(A,{prop:"variable",label:b.$t("dynamicsForm.paramForm.field.label")},null,8,["label"]),R(A,{prop:"default_value",label:b.$t("dynamicsForm.default.label")},null,8,["label"]),R(A,{label:b.$t("common.required")},{default:j(({row:X})=>[le("div",{onClick:_[1]||(_[1]=pn(()=>{},["stop"]))},[R(M,{disabled:"",size:"small",modelValue:X.is_required,"onUpdate:modelValue":J=>X.is_required=J},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),R(A,{label:b.$t("common.operation"),align:"left",width:"90"},{default:j(({row:X,$index:J})=>[le("span",X7,[R(D,{effect:"dark",content:b.$t("common.modify"),placement:"top"},{default:j(()=>[R(P,{type:"primary",text:"",onClick:pn(z=>c(X,J),["stop"])},{default:j(()=>[R(x,null,{default:j(()=>[R(I)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),R(D,{effect:"dark",content:b.$t("common.delete"),placement:"top"},{default:j(()=>[R(P,{type:"primary",text:"",onClick:z=>v(J)},{default:j(()=>[R(x,null,{default:j(()=>[R($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):jn("",!0),R(W7,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:p},null,512)],64)}}}),Y7={class:"dialog-footer"},K7=wr({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=pt(),s=pt(!1),c=pt(!1),v=pt(),p=(M,I)=>M.every(D=>GI.get(I,D,void 0)!==void 0),g=zr(()=>{if(v.value){const M=v.value;switch(M.type){case"input":return p(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:M.attrs||{maxlength:20,minlength:0},field:M.field||M.variable,input_type:"TextInput",label:M.label||M.name,default_value:M.default_value,required:M.required!=null?M.required:M.is_required};case"select":return p(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:M.attrs||{},field:M.field||M.variable,input_type:"SingleSelect",label:M.label||M.name,default_value:M.default_value,required:M.required!=null?M.required:M.is_required,option_list:M.option_list?M.option_list:M.optionList.map(I=>({key:I,value:I}))};case"date":return p(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:M.field||M.variable,input_type:"DatePicker",label:M.label||M.name,default_value:M.default_value,required:M.required!=null?M.required:M.is_required,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:20,minlength:0}}}),b=pt(null),_=pt([{label:Zt("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:Zt("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:Zt("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:Zt("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:Zt("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:Zt("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:Zt("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),E=pt(!1),x=(M,I)=>{E.value=!0,M?(c.value=!0,v.value=$e.cloneDeep(M),b.value=I):v.value=null},P=()=>{E.value=!1,c.value=!1,b.value=null,v.value=null},A=async()=>{const M=r.value;M&&await M.validate().then(()=>{o("refresh",M==null?void 0:M.getData(),b.value),c.value=!1,v.value=null,b.value=null})};return t({open:x,close:P}),(M,I)=>{const D=Z("el-button"),$=Z("el-dialog");return Ie(),dt($,{title:c.value?M.$t("views.template.templateForm.title.editParam"):M.$t("views.template.templateForm.title.addParam"),modelValue:E.value,"onUpdate:modelValue":I[2]||(I[2]=G=>E.value=G),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":P,"append-to-body":""},{footer:j(()=>[le("span",Y7,[R(D,{onClick:pn(P,["prevent"])},{default:j(()=>[bt(Ce(M.$t("common.cancel")),1)]),_:1}),R(D,{type:"primary",onClick:I[1]||(I[1]=G=>A()),loading:s.value},{default:j(()=>[bt(Ce(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:j(()=>[R(Fw,{modelValue:g.value,"onUpdate:modelValue":I[0]||(I[0]=G=>g.value=G),"label-position":"top","require-asterisk-position":"right",input_type_list:_.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),Z7={class:"dialog-footer"},J7=wr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=pt(),s=pt(!1),c=pt({title:Zt("chat.userInput")}),v=Lw({title:[{required:!0,message:Zt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),p=pt(!1),g=E=>{E&&(c.value=$e.cloneDeep(E)),p.value=!0},b=()=>{p.value=!1},_=async E=>{E&&await E.validate(x=>{x&&o("refresh",c.value)})};return t({open:g,close:b}),(E,x)=>{const P=Z("el-input"),A=Z("el-form-item"),M=Z("el-form"),I=Z("el-button"),D=Z("el-dialog");return Ie(),dt(D,{title:E.$t("common.setting"),modelValue:p.value,"onUpdate:modelValue":x[4]||(x[4]=$=>p.value=$),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:j(()=>[le("span",Z7,[R(I,{onClick:x[2]||(x[2]=pn($=>p.value=!1,["prevent"]))},{default:j(()=>[bt(Ce(E.$t("common.cancel")),1)]),_:1}),R(I,{type:"primary",onClick:x[3]||(x[3]=$=>_(r.value)),loading:s.value},{default:j(()=>[bt(Ce(E.$t("common.save")),1)]),_:1},8,["loading"])])]),default:j(()=>[R(M,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:j(()=>[R(A,{label:E.$t("common.title"),prop:"title"},{default:j(()=>[R(P,{modelValue:c.value.title,"onUpdate:modelValue":x[0]||(x[0]=$=>c.value.title=$),maxlength:"64","show-word-limit":"",onBlur:x[1]||(x[1]=$=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Q7={class:"flex-between mb-16"},e9={class:"lighter"},t9={class:"ml-4"},n9=["title"],r9={key:0},o9=["title"],i9={key:1},a9=["title"],l9=["title"],u9={class:"mr-4"},s9=wr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=pt(),o=pt(),r=pt(),s=pt([]),c=pt({title:Zt("chat.userInput")});function v(P,A){o.value.open(P,A)}function p(){r.value.open(c.value)}function g(P){s.value.splice(P,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),x()}function b(P,A){for(let I=0;I<s.value.length;I++)if(s.value[I].field===P.field&&A!==I){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}let M=t.nodeModel.properties.api_input_field_list;for(let I=0;I<M.length;I++)if(M[I].variable===P.field){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}A!==null?s.value.splice(A,1,P):s.value.push(P),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),x()}function _(P){c.value=P,r.value.close()}const E=P=>{var A;if(P.input_type==="PasswordInput")return"******";if(P.default_value){const M=(A=P.option_list)==null?void 0:A.filter(I=>P.default_value.indexOf(I.value)>-1).map(I=>I.label).join(",");return M||P.default_value}if(P.default_value!==void 0)return P.default_value};function x(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&vr.create(A,{animation:150,ghostClass:"ghost-row",onEnd:M=>{if(M.oldIndex===void 0||M.newIndex===void 0)return;const I=[...s.value],[D]=I.splice(M.oldIndex,1);I.splice(M.newIndex,0,D),s.value=I,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return uo(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(P=>P.assignment_method==="user_input").forEach(P=>{s.value.push(P)}),s.value.forEach((P,A)=>{switch(P.label=P.label||P.name,P.field=P.field||P.variable,P.required=P.required||P.is_required,P.type){case"input":P.input_type="TextInput";break;case"select":P.input_type="SingleSelect";break;case"date":P.input_type="DatePicker";break}}),$e.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),$e.set(t.nodeModel.properties,"user_input_config",c),x()}),(P,A)=>{var K;const M=Z("Setting"),I=Z("el-icon"),D=Z("el-button"),$=Z("Plus"),G=Z("el-table-column"),W=Z("el-tag"),X=Z("el-switch"),J=Z("EditPen"),z=Z("el-tooltip"),L=Z("Delete"),H=Z("el-table");return Ie(),An(_o,null,[le("div",Q7,[le("h5",e9,Ce(c.value.title),1),le("div",null,[R(D,{type:"primary",link:"",onClick:p},{default:j(()=>[R(I,null,{default:j(()=>[R(M)]),_:1})]),_:1}),le("span",t9,[R(D,{link:"",type:"primary",onClick:A[0]||(A[0]=Y=>v())},{default:j(()=>[R(I,{class:"mr-4"},{default:j(()=>[R($)]),_:1}),bt(" "+Ce(P.$t("common.add")),1)]),_:1})])])]),((K=t.nodeModel.properties.user_input_field_list)==null?void 0:K.length)>0?(Ie(),dt(H,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:j(()=>[R(G,{prop:"field",label:P.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:j(({row:Y})=>[le("span",{title:Y.field,class:"ellipsis-1"},Ce(Y.field),9,n9)]),_:1},8,["label"]),R(G,{prop:"label",label:P.$t("dynamicsForm.paramForm.name.label")},{default:j(({row:Y})=>[Y.label&&Y.label.input_type==="TooltipLabel"?(Ie(),An("span",r9,[le("span",{title:Y.label.label,class:"ellipsis-1"},Ce(Y.label.label),9,o9)])):(Ie(),An("span",i9,[le("span",{title:Y.label,class:"ellipsis-1"},Ce(Y.label),9,a9)]))]),_:1},8,["label"]),R(G,{label:P.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:j(({row:Y})=>[Y.input_type==="TextInput"?(Ie(),dt(W,{key:0,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):jn("",!0),Y.input_type==="PasswordInput"?(Ie(),dt(W,{key:1,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):jn("",!0),Y.input_type==="Slider"?(Ie(),dt(W,{key:2,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):jn("",!0),Y.input_type==="SwitchInput"?(Ie(),dt(W,{key:3,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):jn("",!0),Y.input_type==="SingleSelect"?(Ie(),dt(W,{key:4,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):jn("",!0),Y.input_type==="MultiSelect"?(Ie(),dt(W,{key:5,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):jn("",!0),Y.input_type==="RadioCard"?(Ie(),dt(W,{key:6,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):jn("",!0),Y.input_type==="DatePicker"?(Ie(),dt(W,{key:7,type:"info",class:"info-tag"},{default:j(()=>[bt(Ce(P.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):jn("",!0)]),_:1},8,["label"]),R(G,{prop:"default_value",label:P.$t("dynamicsForm.default.label")},{default:j(({row:Y})=>[le("span",{title:Y.default_value,class:"ellipsis-1"},Ce(E(Y)),9,l9)]),_:1},8,["label"]),R(G,{label:P.$t("common.required")},{default:j(({row:Y})=>[le("div",{onClick:A[1]||(A[1]=pn(()=>{},["stop"]))},[R(X,{disabled:"",size:"small",modelValue:Y.required,"onUpdate:modelValue":ce=>Y.required=ce},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),R(G,{label:P.$t("common.operation"),align:"left",width:"90"},{default:j(({row:Y,$index:ce})=>[le("span",u9,[R(z,{effect:"dark",content:P.$t("common.modify"),placement:"top"},{default:j(()=>[R(D,{type:"primary",text:"",onClick:pn(Ne=>v(Y,ce),["stop"])},{default:j(()=>[R(I,null,{default:j(()=>[R(J)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),R(z,{effect:"dark",content:P.$t("common.delete"),placement:"top"},{default:j(()=>[R(D,{type:"primary",text:"",onClick:Ne=>g(ce)},{default:j(()=>[R(I,null,{default:j(()=>[R(L)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):jn("",!0),R(K7,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:b},null,512),R(J7,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:_},null,512)],64)}}}),c9="/assets/icon_file-doc-7cb7d059.svg",f9="/assets/icon_file-image-e1249452.svg",d9="/assets/mp3-icon-d3fb5822.svg",p9={class:"flex-between"},h9={class:"flex align-center"},v9={class:"line-height-22 mt-4"},y9={class:"flex-between"},m9={class:"flex align-center"},g9={class:"line-height-22 mt-4"},b9={class:"flex-between"},_9={class:"flex align-center"},w9={class:"line-height-22 mt-4"},E9={class:"dialog-footer"},O9=wr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=pt(!1),c=pt(!1),v=pt(),p=pt({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1});function g(E){s.value=!0,X1(()=>{p.value={...p.value,...E}})}function b(){s.value=!1}async function _(){const E=v.value;E&&await E.validate().then(()=>{o("refresh",p.value),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:g}),(E,x)=>{const P=Z("el-slider"),A=Z("el-form-item"),M=Z("el-text"),I=Z("el-checkbox"),D=Z("el-card"),$=Z("el-form"),G=Z("el-button"),W=Z("el-dialog");return Ie(),dt(W,{title:E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":x[12]||(x[12]=X=>s.value=X),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":"",width:"600"},{footer:j(()=>[le("span",E9,[R(G,{onClick:pn(b,["prevent"])},{default:j(()=>[bt(Ce(E.$t("common.cancel")),1)]),_:1}),R(G,{type:"primary",onClick:x[11]||(x[11]=X=>_()),loading:c.value},{default:j(()=>[bt(Ce(E.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:j(()=>[R($,{"label-position":"top",ref_key:"fieldFormRef",ref:v,model:p.value,"require-asterisk-position":"right"},{default:j(()=>[R(A,{label:E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:j(()=>[R(P,{modelValue:p.value.maxFiles,"onUpdate:modelValue":x[0]||(x[0]=X=>p.value.maxFiles=X),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),R(A,{label:E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:j(()=>[R(P,{modelValue:p.value.fileLimit,"onUpdate:modelValue":x[1]||(x[1]=X=>p.value.fileLimit=X),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),R(A,{label:E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:j(()=>[R(D,{shadow:"hover",class:jd(["card-checkbox cursor w-full mb-8",p.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:x[4]||(x[4]=pn(X=>p.value.document=!p.value.document,["stop"]))},{default:j(()=>[le("div",p9,[le("div",h9,[x[13]||(x[13]=le("img",{class:"mr-12",src:c9,alt:""},null,-1)),le("div",null,[le("p",v9,Ce(E.$t("common.fileUpload.document"))+"（TXT、MD、DOCX、HTML、CSV、XLSX、XLS、PDF） ",1),R(M,{class:"color-secondary"},{default:j(()=>[bt(Ce(E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})])]),R(I,{modelValue:p.value.document,"onUpdate:modelValue":x[2]||(x[2]=X=>p.value.document=X),onChange:x[3]||(x[3]=X=>p.value.document=!p.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),R(D,{shadow:"hover",class:jd(["card-checkbox cursor w-full mb-8",p.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:x[7]||(x[7]=pn(X=>p.value.image=!p.value.image,["stop"]))},{default:j(()=>[le("div",y9,[le("div",m9,[x[14]||(x[14]=le("img",{class:"mr-12",src:f9,alt:""},null,-1)),le("div",null,[le("p",g9,Ce(E.$t("common.fileUpload.image"))+"（JPG、JPEG、PNG、GIF） ",1),R(M,{class:"color-secondary"},{default:j(()=>[bt(Ce(E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})])]),R(I,{modelValue:p.value.image,"onUpdate:modelValue":x[5]||(x[5]=X=>p.value.image=X),onChange:x[6]||(x[6]=X=>p.value.image=!p.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),R(D,{shadow:"hover",class:jd(["card-checkbox cursor w-full mb-8",p.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:x[10]||(x[10]=pn(X=>p.value.audio=!p.value.audio,["stop"]))},{default:j(()=>[le("div",b9,[le("div",_9,[x[15]||(x[15]=le("img",{class:"mr-12",src:d9,alt:""},null,-1)),le("div",null,[le("p",w9,Ce(E.$t("common.fileUpload.audio"))+"（MP3、WAV、OGG、ACC、M4A） ",1),R(M,{class:"color-secondary"},{default:j(()=>[bt(Ce(E.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})])]),R(I,{modelValue:p.value.audio,"onUpdate:modelValue":x[8]||(x[8]=X=>p.value.audio=X),onChange:x[9]||(x[9]=X=>p.value.audio=!p.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),x9={class:"flex-between"},S9={class:"flex align-center"},A9={class:"mr-4"},T9={class:"flex-between"},M9={class:"mr-4"},k9={class:"flex"},P9={class:"flex-between"},N9={class:"mr-4"},R9={class:"flex"},D9={class:"w-full"},C9={class:"flex-between w-full"},j9=wr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Rl.config.globalProperties.$route,n=e,o=pt(null),r=pt(null),s=pt(),c=pt(),v=pt(),p=pt(),g={name:"",desc:"",prologue:Zt("views.application.applicationForm.form.defaultPrologue")},b=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0);function _(L){$e.set(n.nodeModel.properties.nodeData,"prologue",L)}const E=zr({get:()=>(n.nodeModel.properties.nodeData||$e.set(n.nodeModel.properties,"nodeData",g),n.nodeModel.properties.nodeData),set:L=>{$e.set(n.nodeModel.properties,"nodeData",L)}}),x=pt(),P=()=>{var L;return E.value.ttsModelEnable&&!E.value.ttsModelId&&E.value.ttsType==="TTS"?Promise.reject({node:n.nodeModel,errMessage:Zt("views.application.applicationForm.form.voicePlay.requiredMessage")}):E.value.sttModelEnable&&!E.value.sttModelId?Promise.reject({node:n.nodeModel,errMessage:Zt("views.application.applicationForm.form.voiceInput.requiredMessage")}):(L=x.value)==null?void 0:L.validate().catch(H=>Promise.reject({node:n.nodeModel,errMessage:H}))};function A(){fa.getApplicationSTTModel(t).then(L=>{o.value=$e.groupBy(L==null?void 0:L.data,"provider")})}function M(){fa.getApplicationTTSModel(t).then(L=>{r.value=$e.groupBy(L==null?void 0:L.data,"provider")})}function I(){var L;E.value.ttsModelId?(L=s.value)==null||L.reset_default(E.value.ttsModelId,t):W({})}function D(){E.value.ttsModelEnable||(E.value.ttsModelId="",E.value.ttsType="BROWSER")}function $(){E.value.sttModelEnable||(E.value.sttModelId="")}const G=()=>{var H;const L=E.value.ttsModelId;if(!L){Hp(Zt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(H=s.value)==null||H.open(L,t,E.value.tts_model_params_setting)},W=L=>{E.value.tts_model_params_setting=L},X=()=>{const L={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1};E.value.file_upload_enable&&(E.value.file_upload_setting=E.value.file_upload_setting||L),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},J=()=>{var L;(L=p.value)==null||L.open(E.value.file_upload_setting)},z=L=>{E.value.file_upload_setting=L};return uo(()=>{$e.set(n.nodeModel,"validate",P),n.nodeModel.properties.nodeData.ttsType||$e.set(n.nodeModel.properties.nodeData,"ttsType","BROWSER"),M(),A()}),(L,H)=>{const K=Z("el-input"),Y=Z("el-form-item"),ce=Z("el-tooltip"),Ne=Z("Setting"),_e=Z("el-icon"),Oe=Z("el-button"),ke=Z("el-switch"),Re=Z("el-checkbox"),ue=Z("ModelSelect"),ve=Z("el-radio"),Pe=Z("el-radio-group"),Xe=Z("Operation"),ze=Z("el-form");return Ie(),dt(Yo,{nodeModel:L.nodeModel},{default:j(()=>[R(ze,{onSubmit:H[13]||(H[13]=pn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:x},{default:j(()=>[R(Y,{label:L.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Kr(Zt)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:j(()=>[R(K,{modelValue:E.value.name,"onUpdate:modelValue":H[0]||(H[0]=Je=>E.value.name=Je),maxlength:"64",placeholder:Kr(Zt)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:H[1]||(H[1]=Je=>{var _t;return E.value.name=(_t=E.value.name)==null?void 0:_t.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),R(Y,{label:L.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:j(()=>[R(K,{modelValue:E.value.desc,"onUpdate:modelValue":H[2]||(H[2]=Je=>E.value.desc=Je),placeholder:L.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),R(Y,{label:L.$t("views.application.applicationForm.form.prologue")},{default:j(()=>[R(Sf,{onWheel:b,title:L.$t("views.application.applicationForm.form.prologue"),modelValue:E.value.prologue,"onUpdate:modelValue":H[3]||(H[3]=Je=>E.value.prologue=Je),style:{height:"150px"},onSubmitDialog:_},null,8,["title","modelValue"])]),_:1},8,["label"]),R(Y,null,{label:j(()=>[le("div",x9,[le("div",S9,[le("span",A9,Ce(L.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),R(ce,{effect:"dark",content:L.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:j(()=>[R(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),le("div",null,[E.value.file_upload_enable?(Ie(),dt(Oe,{key:0,type:"primary",link:"",onClick:J,class:"mr-4"},{default:j(()=>[R(_e,{class:"mr-4"},{default:j(()=>[R(Ne)]),_:1})]),_:1})):jn("",!0),R(ke,{size:"small",modelValue:E.value.file_upload_enable,"onUpdate:modelValue":H[4]||(H[4]=Je=>E.value.file_upload_enable=Je),onChange:X},null,8,["modelValue"])])])]),_:1}),R(s9,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":L.nodeModel},null,8,["node-model"]),R(q7,{ref_key:"ApiInputFieldTableFef",ref:v,"node-model":L.nodeModel},null,8,["node-model"]),R(Y,null,{label:j(()=>[le("div",T9,[le("span",M9,Ce(L.$t("views.application.applicationForm.form.voiceInput.label")),1),le("div",k9,[E.value.sttModelEnable?(Ie(),dt(Re,{key:0,modelValue:E.value.sttAutoSend,"onUpdate:modelValue":H[5]||(H[5]=Je=>E.value.sttAutoSend=Je)},{default:j(()=>[bt(Ce(L.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):jn("",!0),R(ke,{class:"ml-8",size:"small",modelValue:E.value.sttModelEnable,"onUpdate:modelValue":H[6]||(H[6]=Je=>E.value.sttModelEnable=Je),onChange:$},null,8,["modelValue"])])])]),default:j(()=>[Ua(R(ue,{onWheel:b,modelValue:E.value.sttModelId,"onUpdate:modelValue":H[7]||(H[7]=Je=>E.value.sttModelId=Je),placeholder:L.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:o.value},null,8,["modelValue","placeholder","options"]),[[Ev,E.value.sttModelEnable]])]),_:1}),R(Y,null,{label:j(()=>[le("div",P9,[le("span",N9,Ce(L.$t("views.application.applicationForm.form.voicePlay.label")),1),le("div",R9,[E.value.ttsModelEnable?(Ie(),dt(Re,{key:0,modelValue:E.value.ttsAutoplay,"onUpdate:modelValue":H[8]||(H[8]=Je=>E.value.ttsAutoplay=Je)},{default:j(()=>[bt(Ce(L.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):jn("",!0),R(ke,{class:"ml-8",size:"small",modelValue:E.value.ttsModelEnable,"onUpdate:modelValue":H[9]||(H[9]=Je=>E.value.ttsModelEnable=Je),onChange:D},null,8,["modelValue"])])])]),default:j(()=>[le("div",D9,[Ua(R(Pe,{modelValue:E.value.ttsType,"onUpdate:modelValue":H[10]||(H[10]=Je=>E.value.ttsType=Je)},{default:j(()=>[R(ve,{label:L.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),R(ve,{label:L.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Ev,E.value.ttsModelEnable]])]),le("div",C9,[E.value.ttsType==="TTS"&&E.value.ttsModelEnable?(Ie(),dt(ue,{key:0,onWheel:b,modelValue:E.value.ttsModelId,"onUpdate:modelValue":H[11]||(H[11]=Je=>E.value.ttsModelId=Je),placeholder:L.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:H[12]||(H[12]=Je=>I())},null,8,["modelValue","placeholder","options"])):jn("",!0),E.value.ttsType==="TTS"&&E.value.ttsModelEnable?(Ie(),dt(Oe,{key:1,onClick:G,disabled:!E.value.ttsModelId,class:"ml-8"},{default:j(()=>[R(_e,null,{default:j(()=>[R(_e,null,{default:j(()=>[R(Xe)]),_:1})]),_:1})]),_:1},8,["disabled"])):jn("",!0)])]),_:1})]),_:1},8,["model"]),R(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:W},null,512),R(O9,{ref_key:"FileUploadSettingDialogRef",ref:p,"node-model":L.nodeModel,onRefresh:z},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const I9=qy(j9,[["__scopeId","data-v-d341fa87"]]);class L9 extends Ko{constructor(t){super(t,I9)}}class F9 extends Zo{constructor(t,n){super(t,n)}get_width(){return 600}}const $9={type:"base-node",model:F9,view:L9},B9=Object.freeze(Object.defineProperty({__proto__:null,default:$9},Symbol.toStringTag,{value:"Module"})),U9={class:"title-decoration-1 mb-8"},V9={class:"flex-between w-full"},G9={class:"flex-between"},W9={class:"flex-between lighter"},z9={key:0,class:"mt-8"},H9=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),n=e,o={modelId:"",system:"",questionReferenceAddress:["start-node","question"],dialogueNumber:1,branch:[{id:ys(),type:"分类 1",condition:""}]},r=W=>W.ctrlKey===!0?(W.preventDefault(),!0):(W.stopPropagation(),!0),s=(W,X,J)=>{const L=$e.cloneDeep(n.nodeModel.properties.branchConditionList?n.nodeModel.properties.branchConditionList:[]).map(H=>H.id===X.id?{...H,height:W.height,index:J}:H);$e.set(n.nodeModel.properties,"branchConditionList",L),A(n.nodeModel.properties.nodeData.branch,!0)},c=zr({get:()=>(n.nodeModel.properties.nodeData||($e.set(n.nodeModel.properties,"nodeData",o),A(o.branch,!0)),n.nodeModel.properties.nodeData),set:W=>{$e.set(n.nodeModel.properties,"nodeData",W)}});function v(W){$e.set(n.nodeModel.properties.nodeData,"system",W)}const p=pt(null),g=pt(),b=pt(),_=pt(),E=()=>{var X,J;const W=[(X=b.value)==null?void 0:X.validate(),(J=_.value)==null?void 0:J.validate()];return Promise.all(W).catch(z=>Promise.reject({node:n.nodeModel,errMessage:z}))},{params:{id:x}}=Rl.config.globalProperties.$route;function P(){const W=$e.cloneDeep(n.nodeModel.properties.nodeData.branch),X={type:"分类 "+(W.length+1),id:ys(),condition:""};W.splice(W.length,0,X),A(W,!0),$e.set(n.nodeModel.properties.nodeData,"branch",W)}function A(W,X){const J=$e.cloneDeep(n.nodeModel.properties.branchConditionList?n.nodeModel.properties.branchConditionList:[]),z=W.map((L,H)=>{const K=J.find(Y=>Y.id===L.id);if(K)return{index:H,height:K.height,id:L.id};if(X)return{index:H,height:100,id:L.id}}).filter(L=>L);$e.set(n.nodeModel.properties,"branchConditionList",z),n.nodeModel.refreshBranch()}function M(W){const X=$e.cloneDeep(n.nodeModel.properties.nodeData.branch),z=X.splice(W,1).map(L=>n.nodeModel.id+"_"+L.id+"_right");n.nodeModel.graphModel.eventCenter.emit("delete_edge",n.nodeModel.outgoing.edges.filter(L=>z.includes(L.sourceAnchorId)).map(L=>L.id)),A(X,!1),X.forEach((L,H)=>{L.type="分类 "+(H+1)}),$e.set(n.nodeModel.properties.nodeData,"branch",X)}const I=W=>{var X;W&&((X=g.value)==null||X.open(W,x,c.value.modelParamsSetting))};function D(W){$e.set(n.nodeModel.properties.nodeData,"modelParamsSetting",W)}function $(){x?fa.getApplicationModel(x).then(W=>{p.value=$e.groupBy(W==null?void 0:W.data,"provider")}):t.asyncGetModel().then(W=>{p.value=$e.groupBy(W==null?void 0:W.data,"provider")})}const G=W=>{var X;W?(X=g.value)==null||X.reset_default(W,x):D({})};return uo(()=>{$(),$e.set(n.nodeModel,"validate",E),c.value.dialogue_type||(c.value.dialogue_type="WORKFLOW")}),(W,X)=>{const J=Z("Setting"),z=Z("el-icon"),L=Z("el-button"),H=Z("el-form-item"),K=Z("el-option"),Y=Z("el-select"),ce=Z("el-input-number"),Ne=Z("el-input"),_e=Z("el-col"),Oe=Z("Delete"),ke=Z("el-row"),Re=Z("el-card"),ue=Z("Plus"),ve=Z("el-form"),Pe=Id("resize");return Ie(),dt(Yo,{nodeModel:W.nodeModel},{default:j(()=>[le("h5",U9,Ce(W.$t("views.applicationWorkflow.nodeSetting")),1),R(Re,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(ve,{model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ClassificationNodeFormRef",ref:b,onSubmit:X[6]||(X[6]=pn(()=>{},["prevent"]))},{default:j(()=>[R(H,{label:W.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:W.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:j(()=>[le("div",V9,[le("div",null,[le("span",null,[bt(Ce(W.$t("views.application.applicationForm.form.aiModel.label")),1),X[7]||(X[7]=le("span",{class:"danger"},"*",-1))])]),R(L,{disabled:!c.value.modelId,type:"primary",link:"",onClick:X[0]||(X[0]=Xe=>I(c.value.modelId)),onRefreshForm:D},{default:j(()=>[R(z,null,{default:j(()=>[R(J)]),_:1})]),_:1},8,["disabled"])])]),default:j(()=>[R(jw,{onChange:G,onWheel:r,teleported:!1,modelValue:c.value.modelId,"onUpdate:modelValue":X[1]||(X[1]=Xe=>c.value.modelId=Xe),placeholder:W.$t("views.application.applicationForm.form.aiModel.placeholder"),options:p.value,onSubmitModel:$,showFooter:!1},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(H,{label:W.$t("views.application.applicationForm.form.roleSettings.label")},{default:j(()=>[R(Sf,{title:W.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:c.value.system,"onUpdate:modelValue":X[2]||(X[2]=Xe=>c.value.system=Xe),style:{height:"100px"},onSubmitDialog:v,placeholder:W.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),R(H,{label:"用户问题",prop:"questionReferenceAddress",rules:{message:W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:_,nodeModel:W.nodeModel,class:"w-full",placeholder:W.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:c.value.questionReferenceAddress,"onUpdate:modelValue":X[3]||(X[3]=Xe=>c.value.questionReferenceAddress=Xe)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),R(H,{label:W.$t("views.application.applicationForm.form.historyRecord.label")},{label:j(()=>[le("div",G9,[le("div",null,Ce(W.$t("views.application.applicationForm.form.historyRecord.label")),1),R(Y,{modelValue:c.value.dialogue_type,"onUpdate:modelValue":X[4]||(X[4]=Xe=>c.value.dialogue_type=Xe),type:"small",style:{width:"100px"}},{default:j(()=>[R(K,{label:W.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),R(K,{label:W.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[R(ce,{modelValue:c.value.dialogueNumber,"onUpdate:modelValue":X[5]||(X[5]=Xe=>c.value.dialogueNumber=Xe),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),(Ie(!0),An(_o,null,li(c.value.branch,(Xe,ze)=>Ua((Ie(),dt(Re,{key:Xe.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:j(()=>[le("div",W9,Ce(Xe.type),1),ze!==c.value.branch.length?(Ie(),An("div",z9,[R(ke,{gutter:8},{default:j(()=>[R(_e,{span:23},{default:j(()=>[R(H,{prop:"branch."+ze+".condition",rules:{required:!0,message:W.$t("views.applicationWorkflow.nodes.classificationNode.valueMessage"),trigger:"blur"}},{default:j(()=>[R(Ne,{modelValue:Xe.condition,"onUpdate:modelValue":Je=>Xe.condition=Je,placeholder:W.$t("views.applicationWorkflow.nodes.classificationNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),R(_e,{span:1},{default:j(()=>[R(L,{disabled:ze===0,link:"",type:"info",class:"mt-4",onClick:Je=>M(ze)},{default:j(()=>[R(z,null,{default:j(()=>[R(Oe)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):jn("",!0)]),_:2},1024)),[[Pe,Je=>s(Je,Xe,ze)]])),128)),R(L,{link:"",type:"primary",onClick:P},{default:j(()=>[R(z,{class:"mr-4"},{default:j(()=>[R(ue)]),_:1}),bt(" "+Ce(W.$t("views.applicationWorkflow.nodes.classificationNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1}),R(Yy,{ref_key:"AIModeParamSettingDialogRef",ref:g,onRefresh:D},null,512)]),_:1},8,["nodeModel"])}}});class X9 extends Ko{constructor(t){super(t,H9)}}const q9=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class Y9 extends Zo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,p=[];if(p.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=q9(c,g);p.push({x:n+r/2-10,y:v?o-s/2+525+_+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return p}}const K9={type:"classification-node",model:Y9,view:X9},Z9=Object.freeze(Object.defineProperty({__proto__:null,default:K9},Symbol.toStringTag,{value:"Module"})),J9={class:"flex-between lighter"},Q9={key:0,class:"info"},ez={key:0,class:"mt-8"},tz=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:ys(),type:"IF",condition:"and"},{conditions:[],id:ys(),type:"ELSE",condition:"and"}]},o=P=>P.ctrlKey===!0?(P.preventDefault(),!0):(P.stopPropagation(),!0),r=(P,A,M)=>{const D=$e.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map($=>$.id===A.id?{...$,height:P.height,index:M}:$);$e.set(t.nodeModel.properties,"branchConditionList",D),b(t.nodeModel.properties.nodeData.branch,!0)},s=zr({get:()=>(t.nodeModel.properties.nodeData||($e.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:P=>{$e.set(t.nodeModel.properties,"nodeData",P)}}),c=pt(),v=pt(),p=()=>{var A;const P=[(A=c.value)==null?void 0:A.validate(),...v.value.map(M=>M.validate())];return Promise.all(P).catch(M=>Promise.reject({node:t.nodeModel,errMessage:M}))};function g(){const P=$e.cloneDeep(t.nodeModel.properties.nodeData.branch),A={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(P.length-1),id:ys(),condition:"and"};P.splice(P.length-1,0,A),b(P,!0),$e.set(t.nodeModel.properties.nodeData,"branch",P)}function b(P,A){const M=$e.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),I=P.map((D,$)=>{const G=M.find(W=>W.id===D.id);if(G)return{index:$,height:G.height,id:D.id};if(A)return{index:$,height:12,id:D.id}}).filter(D=>D);$e.set(t.nodeModel.properties,"branchConditionList",I),t.nodeModel.refreshBranch()}function _(P){const A=$e.cloneDeep(t.nodeModel.properties.nodeData.branch);A[P].conditions.push({field:[],compare:"",value:""}),$e.set(t.nodeModel.properties.nodeData,"branch",A)}function E(P,A){const M=$e.cloneDeep(t.nodeModel.properties.nodeData.branch);if(M[P].conditions.splice(A,1),M[P].conditions.length===0){const D=M.splice(P,1).map($=>t.nodeModel.id+"_"+$.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter($=>D.includes($.sourceAnchorId)).map($=>$.id)),b(M,!1),M.forEach(($,G)=>{$.type==="ELSE IF "+(G+1)&&($.type="ELSE IF "+G)})}$e.set(t.nodeModel.properties.nodeData,"branch",M)}function x(P,A,M){if(P==="is_null"||P==="is_not_null"){const I=$e.cloneDeep(t.nodeModel.properties.nodeData.branch);I[A].conditions[M].value=1,$e.set(t.nodeModel.properties.nodeData,"branch",I)}}return uo(()=>{$e.set(t.nodeModel,"validate",p)}),(P,A)=>{const M=Z("el-option"),I=Z("el-select"),D=Z("el-form-item"),$=Z("el-col"),G=Z("el-input"),W=Z("Delete"),X=Z("el-icon"),J=Z("el-button"),z=Z("el-row"),L=Z("Plus"),H=Z("el-card"),K=Z("el-form"),Y=Id("resize");return Ie(),dt(Yo,{nodeModel:P.nodeModel},{default:j(()=>[R(K,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:A[0]||(A[0]=pn(()=>{},["prevent"]))},{default:j(()=>[(Ie(!0),An(_o,null,li(s.value.branch,(ce,Ne)=>Ua((Ie(),dt(H,{key:ce.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:j(()=>[le("div",J9,[bt(Ce(ce.type)+" ",1),ce.conditions.length>1?(Ie(),An("div",Q9,[le("span",null,Ce(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),R(I,{teleported:!1,modelValue:ce.condition,"onUpdate:modelValue":_e=>ce.condition=_e,size:"small",style:{width:"60px",margin:"0 8px"}},{default:j(()=>[R(M,{label:P.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),R(M,{label:P.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),le("span",null,Ce(P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):jn("",!0)]),Ne!==s.value.branch.length-1?(Ie(),An("div",ez,[(Ie(!0),An(_o,null,li(ce.conditions,(_e,Oe)=>(Ie(),dt(z,{key:Oe,gutter:8},{default:j(()=>[R($,{span:11},{default:j(()=>[R(D,{prop:"branch."+Ne+".conditions."+Oe+".field",rules:{type:"array",required:!0,message:P.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:j(()=>[R(Wr,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:P.nodeModel,class:"w-full",placeholder:P.$t("views.applicationWorkflow.variable.placeholder"),modelValue:_e.field,"onUpdate:modelValue":ke=>_e.field=ke},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),R($,{span:6},{default:j(()=>[R(D,{prop:"branch."+Ne+".conditions."+Oe+".compare",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:j(()=>[R(I,{onWheel:o,teleported:!1,modelValue:_e.compare,"onUpdate:modelValue":ke=>_e.compare=ke,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:ke=>x(ke,Ne,Oe)},{default:j(()=>[(Ie(!0),An(_o,null,li(Kr(WI),(ke,Re)=>(Ie(),dt(M,{key:Re,label:ke.label,value:ke.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),R($,{span:6},{default:j(()=>[_e.compare!=="is_null"&&_e.compare!=="is_not_null"?(Ie(),dt(D,{key:0,prop:"branch."+Ne+".conditions."+Oe+".value",rules:{required:!0,message:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:j(()=>[R(G,{modelValue:_e.value,"onUpdate:modelValue":ke=>_e.value=ke,placeholder:P.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):jn("",!0)]),_:2},1024),R($,{span:1},{default:j(()=>[R(J,{disabled:Ne===0&&Oe===0,link:"",type:"info",class:"mt-4",onClick:ke=>E(Ne,Oe)},{default:j(()=>[R(X,null,{default:j(()=>[R(W)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):jn("",!0),Ne!==s.value.branch.length-1?(Ie(),dt(J,{key:1,link:"",type:"primary",onClick:_e=>_(Ne)},{default:j(()=>[R(X,{class:"mr-4"},{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(P.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):jn("",!0)]),_:2},1024)),[[Y,_e=>r(_e,ce,Ne)]])),128)),R(J,{link:"",type:"primary",onClick:g},{default:j(()=>[R(X,{class:"mr-4"},{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(P.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class nz extends Ko{constructor(t){super(t,tz)}}const rz=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class oz extends Zo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,p=[];if(p.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=rz(c,g);p.push({x:n+r/2-10,y:v?o-s/2+75+_+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return p}}const iz={type:"condition-node",model:oz,view:nz},az=Object.freeze(Object.defineProperty({__proto__:null,default:iz},Symbol.toStringTag,{value:"Module"})),lz={class:"flex-between"},uz={class:"mr-4"},sz={class:"flex-between"},cz={class:"flex-between"},fz={class:"flex-between"},dz={class:"flex-between"},pz={class:"flex-between"},hz={class:"flex-between"},vz=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=p=>p.ctrlKey===!0?(p.preventDefault(),!0):(p.stopPropagation(),!0),o={databaseTypeType:"content",databaseType:"mysql",databaseTypeReference:[],hostType:"content",host:"",hostReference:[],portType:"content",port:3306,portReference:[],databaseNameType:"content",databaseName:"",databaseNameReference:[],usernameType:"content",username:"",usernameReference:[],passwordType:"content",password:"",passwordReference:[],sqlType:"content",sql:"",sqlReference:[],isResult:!1},r=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:p=>{$e.set(t.nodeModel.properties,"nodeData",p)}}),s=pt(),c=pt(),v=()=>{var p;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(p=s.value)==null?void 0:p.validate()]).catch(g=>Promise.reject({node:t.nodeModel,errMessage:g}))};return uo(()=>{var p;typeof((p=t.nodeModel.properties.nodeData)==null?void 0:p.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",v)}),(p,g)=>{const b=Z("el-option"),_=Z("el-select"),E=Z("el-form-item"),x=Z("el-input"),P=Z("el-form"),A=Z("el-card");return Ie(),dt(Yo,{nodeModel:p.nodeModel},{default:j(()=>[R(A,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(P,{onSubmit:g[21]||(g[21]=pn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"databaseNodeFormRef",ref:s},{default:j(()=>[R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")},{label:j(()=>[le("div",lz,[le("div",uz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")),1)]),R(_,{teleported:!1,modelValue:r.value.databaseTypeType,"onUpdate:modelValue":g[0]||(g[0]=M=>r.value.databaseTypeType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.databaseTypeType==="content"?(Ie(),dt(_,{key:0,teleported:!1,modelValue:r.value.databaseType,"onUpdate:modelValue":g[1]||(g[1]=M=>r.value.databaseType=M),size:"small"},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.mysql"),value:"mysql"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.postgresql"),value:"postgresql"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.sqlserver"),value:"sqlserver"},null,8,["label"])]),_:1},8,["modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseTypeReference,"onUpdate:modelValue":g[2]||(g[2]=M=>r.value.databaseTypeReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.host.label")},{label:j(()=>[le("div",sz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.host.label")),1),R(_,{teleported:!1,modelValue:r.value.hostType,"onUpdate:modelValue":g[3]||(g[3]=M=>r.value.hostType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.hostType==="content"?(Ie(),dt(x,{key:0,placeholder:p.$t("views.applicationWorkflow.nodes.databaseNode.host.placeholder"),"show-word-limit":"",modelValue:r.value.host,"onUpdate:modelValue":g[4]||(g[4]=M=>r.value.host=M),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.hostReference,"onUpdate:modelValue":g[5]||(g[5]=M=>r.value.hostReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.port.label")},{label:j(()=>[le("div",cz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.port.label")),1),R(_,{teleported:!1,modelValue:r.value.portType,"onUpdate:modelValue":g[6]||(g[6]=M=>r.value.portType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.portType==="content"?(Ie(),dt(x,{key:0,placeholder:p.$t("views.applicationWorkflow.nodes.databaseNode.port.placeholder"),"show-word-limit":"",modelValue:r.value.port,"onUpdate:modelValue":g[7]||(g[7]=M=>r.value.port=M),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.portReference,"onUpdate:modelValue":g[8]||(g[8]=M=>r.value.portReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")},{label:j(()=>[le("div",fz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")),1),R(_,{teleported:!1,modelValue:r.value.databaseNameType,"onUpdate:modelValue":g[9]||(g[9]=M=>r.value.databaseNameType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.databaseNameType==="content"?(Ie(),dt(x,{key:0,placeholder:p.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.placeholder"),"show-word-limit":"",modelValue:r.value.databaseName,"onUpdate:modelValue":g[10]||(g[10]=M=>r.value.databaseName=M),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseNameReference,"onUpdate:modelValue":g[11]||(g[11]=M=>r.value.databaseNameReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.username.label")},{label:j(()=>[le("div",dz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.username.label")),1),R(_,{teleported:!1,modelValue:r.value.usernameType,"onUpdate:modelValue":g[12]||(g[12]=M=>r.value.usernameType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.usernameType==="content"?(Ie(),dt(x,{key:0,placeholder:p.$t("views.applicationWorkflow.nodes.databaseNode.username.placeholder"),"show-word-limit":"",modelValue:r.value.username,"onUpdate:modelValue":g[13]||(g[13]=M=>r.value.username=M),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.usernameReference,"onUpdate:modelValue":g[14]||(g[14]=M=>r.value.usernameReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.password.label")},{label:j(()=>[le("div",pz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.password.label")),1),R(_,{teleported:!1,modelValue:r.value.passwordType,"onUpdate:modelValue":g[15]||(g[15]=M=>r.value.passwordType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.passwordType==="content"?(Ie(),dt(x,{key:0,placeholder:p.$t("views.applicationWorkflow.nodes.databaseNode.password.placeholder"),"show-word-limit":"",modelValue:r.value.password,"onUpdate:modelValue":g[16]||(g[16]=M=>r.value.password=M),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.passwordReference,"onUpdate:modelValue":g[17]||(g[17]=M=>r.value.passwordReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(E,{label:p.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")},{label:j(()=>[le("div",hz,[le("span",null,Ce(p.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")),1),R(_,{teleported:!1,modelValue:r.value.sqlType,"onUpdate:modelValue":g[18]||(g[18]=M=>r.value.sqlType=M),size:"small",style:{width:"85px"}},{default:j(()=>[R(b,{label:p.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(b,{label:p.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.sqlType==="content"?(Ie(),dt(x,{key:0,placeholder:p.$t("views.applicationWorkflow.nodes.databaseNode.sql.placeholder"),"show-word-limit":"",modelValue:r.value.sql,"onUpdate:modelValue":g[19]||(g[19]=M=>r.value.sql=M),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:p.nodeModel,class:"w-full",placeholder:p.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.sqlReference,"onUpdate:modelValue":g[20]||(g[20]=M=>r.value.sqlReference=M)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class yz extends Ko{constructor(t){super(t,vz)}}const mz={type:"database-node",model:Zo,view:yz},gz=Object.freeze(Object.defineProperty({__proto__:null,default:mz},Symbol.toStringTag,{value:"Module"})),bz={class:"title-decoration-1 mb-8"},_z=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},o=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{$e.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=Z("el-form-item"),v=Z("el-form"),p=Z("el-card");return Ie(),dt(Yo,{nodeModel:r.nodeModel},{default:j(()=>[le("h5",bz,Ce(r.$t("views.applicationWorkflow.nodeSetting")),1),R(p,{shadow:"never",class:"card-never"},{default:j(()=>[R(v,{onSubmit:s[1]||(s[1]=pn(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:j(()=>[R(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:j(()=>[R(Wr,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:o.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let wz=class extends Ko{constructor(t){super(t,_z)}};const Ez={type:"document-extract-node",model:Zo,view:wz},Oz=Object.freeze(Object.defineProperty({__proto__:null,default:Ez},Symbol.toStringTag,{value:"Module"})),xz={class:"flex-between"},Sz={class:"flex-between"},Az={class:"flex-between"},Tz={class:"flex-between"},Mz={class:"mr-4"},kz={class:"flex align-center"},Pz={class:"mr-4"},Nz=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={titleType:"content",title:"",titleReference:[],xAxisType:"content",xAxis:"",xAxisReference:[],yAxisType:"content",yAxis:"",yAxisReference:[],chartTypeType:"content",chartType:"line",chartTypeReference:[],isResult:!1},r=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{$e.set(t.nodeModel.properties,"nodeData",g)}});function s(g){$e.set(t.nodeModel.properties.nodeData,"content",g)}const c=pt(),v=pt(),p=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return uo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",p)}),(g,b)=>{const _=Z("el-option"),E=Z("el-select"),x=Z("el-form-item"),P=Z("AppIcon"),A=Z("el-tooltip"),M=Z("el-switch"),I=Z("el-form"),D=Z("el-card");return Ie(),dt(Yo,{nodeModel:g.nodeModel},{default:j(()=>[R(D,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(I,{onSubmit:b[14]||(b[14]=pn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"echartsNodeFormRef",ref:c},{default:j(()=>[R(x,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.title.label")},{label:j(()=>[le("div",xz,[le("span",null,Ce(g.$t("views.applicationWorkflow.nodes.echartsNode.title.label")),1),R(E,{teleported:!1,modelValue:r.value.titleType,"onUpdate:modelValue":b[0]||(b[0]=$=>r.value.titleType=$),size:"small",style:{width:"85px"}},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.titleType==="content"?(Ie(),dt(Sf,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.title.label"),modelValue:r.value.title,"onUpdate:modelValue":b[1]||(b[1]=$=>r.value.title=$),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.titleReference,"onUpdate:modelValue":b[2]||(b[2]=$=>r.value.titleReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(x,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label")},{label:j(()=>[le("div",Sz,[le("span",null,Ce(g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label")),1),R(E,{teleported:!1,modelValue:r.value.xAxisType,"onUpdate:modelValue":b[3]||(b[3]=$=>r.value.xAxisType=$),size:"small",style:{width:"85px"}},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.xAxisType==="content"?(Ie(),dt(Sf,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.xAxis.label"),modelValue:r.value.xAxis,"onUpdate:modelValue":b[4]||(b[4]=$=>r.value.xAxis=$),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.xAxisReference,"onUpdate:modelValue":b[5]||(b[5]=$=>r.value.xAxisReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(x,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label")},{label:j(()=>[le("div",Az,[le("span",null,Ce(g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label")),1),R(E,{teleported:!1,modelValue:r.value.yAxisType,"onUpdate:modelValue":b[6]||(b[6]=$=>r.value.yAxisType=$),size:"small",style:{width:"85px"}},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.yAxisType==="content"?(Ie(),dt(Sf,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.echartsNode.yAxis.label"),modelValue:r.value.yAxis,"onUpdate:modelValue":b[7]||(b[7]=$=>r.value.yAxis=$),style:{height:"90px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.yAxisReference,"onUpdate:modelValue":b[8]||(b[8]=$=>r.value.yAxisReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(x,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.label")},{label:j(()=>[le("div",Tz,[le("div",Mz,[le("span",null,Ce(g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.label")),1)]),R(E,{teleported:!1,modelValue:r.value.chartTypeType,"onUpdate:modelValue":b[9]||(b[9]=$=>r.value.chartTypeType=$),size:"small",style:{width:"85px"}},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.chartTypeType==="content"?(Ie(),dt(E,{key:0,teleported:!1,modelValue:r.value.chartType,"onUpdate:modelValue":b[10]||(b[10]=$=>r.value.chartType=$),size:"small"},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.lineChart"),value:"line"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.barChart"),value:"bar"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.pieChart"),value:"pie"},null,8,["label"])]),_:1},8,["modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.echartsNode.chartType.placeholder"),modelValue:r.value.chartTypeReference,"onUpdate:modelValue":b[11]||(b[11]=$=>r.value.chartTypeReference=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(x,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[13]||(b[13]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",kz,[le("div",Pz,[le("span",null,[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[15]||(b[15]=le("span",{class:"danger"},"*",-1))])]),R(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(M,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[12]||(b[12]=$=>r.value.isResult=$)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class Rz extends Ko{constructor(t){super(t,Nz)}}const Dz={type:"echarts-node",model:Zo,view:Rz},Cz=Object.freeze(Object.defineProperty({__proto__:null,default:Dz},Symbol.toStringTag,{value:"Module"})),jz={class:"dialog-footer"},Iz=wr({__name:"AddFormCollect",props:{title:{default:Zt("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=pt(!1),s=pt(),c=pt({}),v=pt(!1),p=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var _;(_=s.value)==null||_.validate().then(()=>{var E;o.addFormField((E=s.value)==null?void 0:E.getData()),g()})};return t({close:g,open:p}),(_,E)=>{const x=Z("el-button"),P=Z("el-dialog");return Ie(),dt(P,{title:_.title,modelValue:r.value,"onUpdate:modelValue":E[3]||(E[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:j(()=>[le("span",jz,[R(x,{onClick:E[1]||(E[1]=pn(A=>r.value=!1,["prevent"]))},{default:j(()=>[bt(Ce(_.$t("common.cancel")),1)]),_:1}),R(x,{type:"primary",onClick:E[2]||(E[2]=A=>b()),loading:v.value},{default:j(()=>[bt(Ce(_.$t("common.add")),1)]),_:1},8,["loading"])])]),default:j(()=>[R(Fw,{modelValue:c.value,"onUpdate:modelValue":E[0]||(E[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),Lz={class:"dialog-footer"},Fz=wr({__name:"EditFormCollect",props:{title:{default:Zt("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=pt(!1),s=pt(),c=pt({}),v=pt(0),p=pt(!1),g=(E,x)=>{r.value=!0,c.value=E,v.value=x},b=()=>{r.value=!1,c.value={}},_=()=>{var E;(E=s.value)==null||E.validate().then(()=>{var x;o.editFormField((x=s.value)==null?void 0:x.getData(),v.value),b()})};return t({close:b,open:g}),(E,x)=>{const P=Z("el-button"),A=Z("el-dialog");return Ie(),dt(A,{title:E.title,modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=M=>r.value=M),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:j(()=>[le("span",Lz,[R(P,{onClick:x[1]||(x[1]=pn(M=>r.value=!1,["prevent"]))},{default:j(()=>[bt(Ce(E.$t("common.cancel")),1)]),_:1}),R(P,{type:"primary",onClick:x[2]||(x[2]=M=>_()),loading:p.value},{default:j(()=>[bt(Ce(E.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:j(()=>[R(Fw,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=M=>c.value=M),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),$z={class:"title-decoration-1 mb-8"},Bz={class:"flex align-center"},Uz={class:"mr-4"},Vz={class:"flex-between"},Gz={class:"lighter"},Wz=["title"],zz={key:0},Hz=["title"],Xz={key:1},qz=["title"],Yz=["title"],Kz={class:"mr-4"},Zz=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=pt(),o=pt(),r=(D,$)=>{const G=x.value.form_field_list.map((W,X)=>$===X?$e.cloneDeep(D):$e.cloneDeep(W));x.value.form_field_list=G,console.log("editFormField",D,$),c()},s=D=>{if(x.value.form_field_list.some($=>$.field===D.field)){Ba(Zt("views.applicationWorkflow.tip.paramErrorMessage")+D.field);return}x.value.form_field_list=$e.cloneDeep([...x.value.form_field_list,D]),console.log("addFormField",D),c()},c=()=>{const D=[{label:Zt("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"formData"},...x.value.form_field_list.map($=>({value:$.field,label:typeof $.label=="string"?$.label:$.label.label}))];$e.set(t.nodeModel.properties.config,"fields",D),t.nodeModel.clear_next_node_field(!1),I()},v=pt(),p=pt(),g=()=>{var D;(D=v.value)==null||D.open()},b=(D,$)=>{var G;(G=p.value)==null||G.open($e.cloneDeep(D),$)},_=D=>{x.value.form_field_list=x.value.form_field_list.filter($=>$.field!==D.field),c()},E=pt({isResult:!0,form_content_format:`${Zt("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Zt("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),x=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",E.value),t.nodeModel.properties.nodeData),set:D=>{$e.set(t.nodeModel.properties,"nodeData",D)}}),P=D=>{var $;if(D.default_value){const G=($=D.option_list)==null?void 0:$.filter(W=>D.default_value.indexOf(W.value)>-1).map(W=>W.label).join(",");return G||D.default_value}if(D.default_value!==void 0)return D.default_value},A=()=>{var D;return(D=n.value)==null?void 0:D.validate()};function M(D){$e.set(t.nodeModel.properties.nodeData,"form_content_format",D)}function I(){if(!o.value)return;const $=o.value.$el.querySelector(".el-table__body-wrapper tbody");$&&vr.create($,{animation:150,ghostClass:"ghost-row",onEnd:G=>{if(G.oldIndex===void 0||G.newIndex===void 0)return;const W=[...x.value.form_field_list],[X]=W.splice(G.oldIndex,1);W.splice(G.newIndex,0,X),x.value.form_field_list=W,c()}})}return uo(()=>{$e.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(D,$)=>{const G=Z("AppIcon"),W=Z("el-tooltip"),X=Z("MdEditorMagnify"),J=Z("el-form-item"),z=Z("Plus"),L=Z("el-icon"),H=Z("el-button"),K=Z("el-table-column"),Y=Z("el-tag"),ce=Z("el-switch"),Ne=Z("EditPen"),_e=Z("Delete"),Oe=Z("el-table"),ke=Z("el-form"),Re=Z("el-card");return Ie(),dt(Yo,{nodeModel:D.nodeModel},{default:j(()=>[le("h5",$z,Ce(D.$t("views.applicationWorkflow.nodeSetting")),1),R(Re,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(ke,{onSubmit:$[4]||($[4]=pn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:j(()=>[R(J,{label:D.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:j(()=>[le("div",Bz,[le("div",Uz,[le("span",null,[bt(Ce(D.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),$[5]||($[5]=le("span",{class:"danger"},"*",-1))])]),R(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:j(()=>[R(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(X,{title:D.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:x.value.form_content_format,"onUpdate:modelValue":$[0]||($[0]=ue=>x.value.form_content_format=ue),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),R(J,{label:D.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:$[3]||($[3]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",Vz,[le("h5",Gz,Ce(D.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),R(H,{link:"",type:"primary",onClick:$[1]||($[1]=ue=>g())},{default:j(()=>[R(L,{class:"mr-4"},{default:j(()=>[R(z)]),_:1}),bt(" "+Ce(D.$t("common.add")),1)]),_:1})])]),default:j(()=>[x.value.form_field_list.length>0?(Ie(),dt(Oe,{key:0,class:"border",data:x.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:j(()=>[R(K,{prop:"field",label:D.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:j(({row:ue})=>[le("span",{title:ue.field,class:"ellipsis-1"},Ce(ue.field),9,Wz)]),_:1},8,["label"]),R(K,{prop:"label",label:D.$t("dynamicsForm.paramForm.name.label")},{default:j(({row:ue})=>[ue.label&&ue.label.input_type==="TooltipLabel"?(Ie(),An("span",zz,[le("span",{title:ue.label.label,class:"ellipsis-1"},Ce(ue.label.label),9,Hz)])):(Ie(),An("span",Xz,[le("span",{title:ue.label,class:"ellipsis-1"},Ce(ue.label),9,qz)]))]),_:1},8,["label"]),R(K,{label:D.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:j(({row:ue})=>[R(Y,{type:"info",class:"info-tag"},{default:j(()=>{var ve;return[bt(Ce((ve=Kr(zI).find(Pe=>Pe.value===ue.input_type))==null?void 0:ve.label),1)]}),_:2},1024)]),_:1},8,["label"]),R(K,{prop:"default_value",label:D.$t("dynamicsForm.default.label")},{default:j(({row:ue})=>[le("span",{title:ue.default_value,class:"ellipsis-1"},Ce(P(ue)),9,Yz)]),_:1},8,["label"]),R(K,{label:D.$t("common.required"),width:"85"},{default:j(({row:ue})=>[le("div",{onClick:$[2]||($[2]=pn(()=>{},["stop"]))},[R(ce,{disabled:"",size:"small",modelValue:ue.required,"onUpdate:modelValue":ve=>ue.required=ve},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),R(K,{label:D.$t("common.operation"),align:"left",width:"90"},{default:j(({row:ue,$index:ve})=>[le("span",Kz,[R(W,{effect:"dark",content:D.$t("common.modify"),placement:"top"},{default:j(()=>[R(H,{type:"primary",text:"",onClick:pn(Pe=>b(ue,ve),["stop"])},{default:j(()=>[R(L,null,{default:j(()=>[R(Ne)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),R(W,{effect:"dark",content:D.$t("common.delete"),placement:"top"},{default:j(()=>[R(H,{type:"primary",text:"",onClick:Pe=>_(ue)},{default:j(()=>[R(L,null,{default:j(()=>[R(_e)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):jn("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),R(Iz,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),R(Fz,{ref_key:"editFormCollectRef",ref:p,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class Jz extends Ko{constructor(t){super(t,Zz)}}const Qz={type:"form-node",model:Zo,view:Jz},eH=Object.freeze(Object.defineProperty({__proto__:null,default:Qz},Symbol.toStringTag,{value:"Module"})),tH={class:"title-decoration-1 mb-16"},nH={class:"lighter mb-8"},rH={key:0},oH={class:"flex-between"},iH={class:"flex"},aH={class:"flex"},lH={key:0,class:"danger"},uH={class:"flex align-center"},sH={class:"mr-4"},cH=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=pt(),{params:{id:o}}=Rl.config.globalProperties.$route,r={inputFieldList:[],isResult:!1},s=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:g=>{$e.set(t.nodeModel.properties,"nodeData",g)}}),c=pt(),v=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},p=()=>{if(!t.nodeModel.properties.nodeData.function_lib_id){$e.set(t.nodeModel.properties,"status",500);return}fa.getFunctionLib(o,t.nodeModel.properties.nodeData.function_lib_id).then(g=>{const b=t.nodeModel.properties.nodeData.inputFieldList,_=g.data.inputFieldList.map(E=>{const x=b.find(P=>P.name==E.name);return x&&x.source==E.source?{...E,value:JSON.parse(JSON.stringify(x.value))}:{...E,value:E.source=="reference"?[]:""}});$e.set(t.nodeModel.properties.nodeData,"inputFieldList",_),$e.set(t.nodeModel.properties,"status",g.data.isActive?200:500)}).catch(g=>{$e.set(t.nodeModel.properties,"status",500)})};return uo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),p(),$e.set(t.nodeModel,"validate",v)}),(g,b)=>{const _=Z("auto-tooltip"),E=Z("el-tag"),x=Z("el-input"),P=Z("el-form-item"),A=Z("el-text"),M=Z("el-card"),I=Z("AppIcon"),D=Z("el-tooltip"),$=Z("el-switch"),G=Z("el-form");return Ie(),dt(Yo,{nodeModel:g.nodeModel},{default:j(()=>[le("h5",tH,Ce(g.$t("views.applicationWorkflow.nodeSetting")),1),le("h5",nH,Ce(g.$t("common.param.inputParam")),1),R(G,{onSubmit:b[2]||(b[2]=pn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:j(()=>[R(M,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:j(()=>{var W;return[((W=s.value.inputFieldList)==null?void 0:W.length)>0?(Ie(),An("div",rH,[(Ie(!0),An(_o,null,li(s.value.inputFieldList,(X,J)=>(Ie(),dt(P,{key:X.name,label:X.name,prop:"inputFieldList."+J+".value",rules:{required:X.is_required,message:X.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:j(()=>[le("div",oH,[le("div",iH,[le("span",aH,[R(_,{content:X.name,style:{"max-width":"130px"}},{default:j(()=>[bt(Ce(X.name),1)]),_:2},1032,["content"]),X.is_required?(Ie(),An("span",lH,"*")):jn("",!0)]),R(E,{type:"info",class:"info-tag ml-4"},{default:j(()=>[bt(Ce(X.type),1)]),_:2},1024)])])]),default:j(()=>[X.source==="reference"?(Ie(),dt(Wr,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:X.value,"onUpdate:modelValue":z=>X.value=z},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ie(),dt(x,{key:1,modelValue:X.value,"onUpdate:modelValue":z=>X.value=z,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ie(),dt(A,{key:1,type:"info"},{default:j(()=>[bt(Ce(g.$t("common.noData")),1)]),_:1}))]}),_:1}),R(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",uH,[le("div",sH,[le("span",null,[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[3]||(b[3]=le("span",{class:"danger"},"*",-1))])]),R(D,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(I,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R($,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":b[0]||(b[0]=W=>s.value.isResult=W)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class fH extends Ko{constructor(t){super(t,cH)}}const dH={type:"function-lib-node",model:Zo,view:fH},pH=Object.freeze(Object.defineProperty({__proto__:null,default:dH},Symbol.toStringTag,{value:"Module"})),hH={class:"title-decoration-1 mb-16"},vH={class:"flex-between"},yH={class:"lighter mb-8"},mH={key:0},gH={class:"flex-between"},bH={class:"flex"},_H={class:"flex"},wH={key:0,class:"danger"},EH={class:"lighter mb-8"},OH={key:0,class:"mb-8"},xH={class:"flex align-center"},SH={class:"mr-4"},AH=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=pt(),r=pt(),s={code:"",inputFieldList:[],isResult:!1},c=pt(null),v=pt(!1),p=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:A=>{$e.set(t.nodeModel.properties,"nodeData",A)}}),g=pt(),b=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(M=>Promise.reject({node:t.nodeModel,errMessage:M}))};function _(A){$e.set(t.nodeModel.properties.nodeData,"code",A)}function E(A,M){typeof M<"u"&&(c.value=M),o.value.open(A)}function x(A){const M=$e.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);M.splice(A,1),$e.set(t.nodeModel.properties.nodeData,"inputFieldList",M)}function P(A){const M=$e.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),I={...A,value:A.source==="reference"?[]:""};c.value!==null?M.splice(c.value,1,I):M.push(I),$e.set(t.nodeModel.properties.nodeData,"inputFieldList",M),c.value=null}return uo(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",b),setTimeout(()=>{v.value=!0},100)}),(A,M)=>{const I=Z("Plus"),D=Z("el-icon"),$=Z("el-button"),G=Z("auto-tooltip"),W=Z("el-tag"),X=Z("EditPen"),J=Z("Delete"),z=Z("el-input"),L=Z("el-form-item"),H=Z("el-text"),K=Z("el-card"),Y=Z("CodemirrorEditor"),ce=Z("AppIcon"),Ne=Z("el-tooltip"),_e=Z("el-switch"),Oe=Z("el-form");return Ie(),dt(Yo,{nodeModel:A.nodeModel},{default:j(()=>[le("h5",hH,Ce(A.$t("views.applicationWorkflow.nodeSetting")),1),le("div",vH,[le("h5",yH,Ce(A.$t("common.param.inputParam")),1),R($,{link:"",type:"primary",onClick:M[0]||(M[0]=ke=>E())},{default:j(()=>[R(D,{class:"mr-4"},{default:j(()=>[R(I)]),_:1}),bt(" "+Ce(A.$t("common.add")),1)]),_:1})]),R(Oe,{onSubmit:M[4]||(M[4]=pn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:p.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:j(()=>[R(K,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:j(()=>{var ke;return[((ke=p.value.inputFieldList)==null?void 0:ke.length)>0?(Ie(),An("div",mH,[(Ie(!0),An(_o,null,li(p.value.inputFieldList,(Re,ue)=>(Ie(),dt(L,{key:ue,label:Re.name,prop:"inputFieldList."+ue+".value",rules:{required:Re.is_required,message:Re.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:j(()=>[le("div",gH,[le("div",bH,[le("span",_H,[R(G,{content:Re.name,style:{"max-width":"130px"}},{default:j(()=>[bt(Ce(Re.name),1)]),_:2},1032,["content"]),Re.is_required?(Ie(),An("span",wH,"*")):jn("",!0)]),R(W,{type:"info",class:"info-tag ml-4"},{default:j(()=>[bt(Ce(Re.type),1)]),_:2},1024)]),le("div",null,[R($,{text:"",onClick:pn(ve=>E(Re,ue),["stop"])},{default:j(()=>[R(D,null,{default:j(()=>[R(X)]),_:1})]),_:2},1032,["onClick"]),R($,{text:"",onClick:ve=>x(ue),style:{"margin-left":"4px !important"}},{default:j(()=>[R(D,null,{default:j(()=>[R(J)]),_:1})]),_:2},1032,["onClick"])])])]),default:j(()=>[Re.source==="reference"?(Ie(),dt(Wr,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Re.value,"onUpdate:modelValue":ve=>Re.value=ve,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ie(),dt(z,{key:1,modelValue:Re.value,"onUpdate:modelValue":ve=>Re.value=ve,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ie(),dt(H,{key:1,type:"info"},{default:j(()=>[bt(Ce(A.$t("common.noData")),1)]),_:1}))]}),_:1}),le("h5",EH,Ce(A.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(Ie(),An("div",OH,[R(Y,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:p.value.code,"onUpdate:modelValue":M[1]||(M[1]=ke=>p.value.code=ke),onWheel:n,style:{height:"130px !important"},onSubmitDialog:_},null,8,["title","modelValue"])])):jn("",!0),R(L,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:M[3]||(M[3]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",xH,[le("div",SH,[le("span",null,[bt(Ce(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),M[5]||(M[5]=le("span",{class:"danger"},"*",-1))])]),R(Ne,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(ce,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(_e,{size:"small",modelValue:p.value.isResult,"onUpdate:modelValue":M[2]||(M[2]=ke=>p.value.isResult=ke)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),R(zM,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class TH extends Ko{constructor(t){super(t,AH)}}const MH={type:"function-node",model:Zo,view:TH},kH=Object.freeze(Object.defineProperty({__proto__:null,default:MH},Symbol.toStringTag,{value:"Module"})),PH={class:"title-decoration-1 mb-8"},NH={class:"flex-between mb-8"},RH={class:"lighter"},DH={class:"flex w-full"},CH={class:"flex-between mb-8"},jH={class:"lighter"},IH={class:"flex-between mb-8"},LH={class:"lighter"},FH=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=pt(),o=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],s=E=>E.ctrlKey===!0?(E.preventDefault(),!0):(E.stopPropagation(),!0),c=pt({activeTab:"params",method:"GET",url:"",timeout:30,headers:[],params:[],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),v=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:E=>{$e.set(t.nodeModel.properties,"nodeData",E)}}),p=()=>{var E;return(E=n.value)==null?void 0:E.validate()};function g(){const E=c.value.activeTab,x=c.value.contentType;E==="params"?c.value={...c.value,params:[...c.value.params,{name:"",value:""}]}:E==="headers"?c.value={...c.value,headers:[...c.value.headers,{name:"",value:""}]}:E==="body"&&["form-data","x-www-form-urlencoded"].includes(x)&&(c.value={...c.value,params:[...c.value.params,{name:"",value:""}]})}function b(E){const x=c.value.activeTab,P=c.value.contentType;x==="params"?c.value.params.splice(E,1):x==="headers"?c.value.headers.splice(E,1):x==="body"&&["form-data","x-www-form-urlencoded"].includes(P)&&c.value.params.splice(E,1)}function _(E){$e.set(t.nodeModel.properties.nodeData,"body",E)}return uo(()=>{$e.set(t.nodeModel,"validate",p),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(E,x)=>{const P=Z("el-option"),A=Z("el-select"),M=Z("el-input"),I=Z("el-form-item"),D=Z("el-input-number"),$=Z("el-table-column"),G=Z("Delete"),W=Z("el-icon"),X=Z("el-button"),J=Z("el-tooltip"),z=Z("el-table"),L=Z("Plus"),H=Z("el-tab-pane"),K=Z("el-radio"),Y=Z("el-radio-group"),ce=Z("el-tabs"),Ne=Z("el-form"),_e=Z("el-card");return Ie(),dt(Yo,{nodeModel:E.nodeModel},{default:j(()=>[le("h5",PH,Ce(E.$t("views.applicationWorkflow.nodeSetting")),1),R(_e,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(Ne,{onSubmit:x[14]||(x[14]=pn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:j(()=>[le("div",NH,[le("span",RH,[bt(Ce(E.$t("views.applicationWorkflow.nodes.httpNode.configuration")),1),x[15]||(x[15]=le("span",{class:"danger"},"*",-1))])]),le("div",DH,[R(A,{modelValue:c.value.method,"onUpdate:modelValue":x[0]||(x[0]=Oe=>c.value.method=Oe),style:{"max-width":"85px"},class:"mr-8",onChange:x[1]||(x[1]=Oe=>c.value.method=null)},{default:j(()=>[(Ie(),An(_o,null,li(o,Oe=>R(P,{key:Oe,label:Oe,value:Oe},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),R(I,{prop:"url",rules:{message:Kr(Zt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:j(()=>[R(M,{modelValue:v.value.url,"onUpdate:modelValue":x[2]||(x[2]=Oe=>v.value.url=Oe),placeholder:E.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:s,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),le("div",CH,[le("span",jH,[bt(Ce(E.$t("views.applicationWorkflow.nodes.httpNode.timeout")),1),x[16]||(x[16]=le("span",{class:"danger"},"*",-1))]),R(D,{modelValue:c.value.timeout,"onUpdate:modelValue":x[3]||(x[3]=Oe=>c.value.timeout=Oe)},null,8,["modelValue"])]),le("div",IH,[le("span",LH,[bt(Ce(E.$t("views.applicationWorkflow.nodes.httpNode.params")),1),x[17]||(x[17]=le("span",{class:"danger"},"*",-1))])]),R(ce,{modelValue:v.value.activeTab,"onUpdate:modelValue":x[13]||(x[13]=Oe=>v.value.activeTab=Oe),class:"w-full"},{default:j(()=>[R(H,{name:"params",label:"Params"},{default:j(()=>[R(z,{data:v.value.params,border:"",style:{width:"100%"}},{default:j(()=>[R($,{prop:"name",label:"Name"},{default:j(Oe=>[R(M,{modelValue:Oe.row.name,"onUpdate:modelValue":ke=>Oe.row.name=ke,placeholder:"输入/可选择变量"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),R($,{prop:"value",label:"Value"},{default:j(Oe=>[R(M,{modelValue:Oe.row.value,"onUpdate:modelValue":ke=>Oe.row.value=ke,placeholder:"输入/可选择变量"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),R($,{label:"",width:"50"},{default:j(Oe=>[R(J,{effect:"dark",content:E.$t("common.delete"),placement:"top"},{default:j(()=>[R(X,{type:"primary",text:"",onClick:ke=>b(Oe.$index)},{default:j(()=>[R(W,null,{default:j(()=>[R(G)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"]),R(X,{link:"",type:"primary",onClick:x[4]||(x[4]=Oe=>g())},{default:j(()=>[R(W,{class:"mr-4"},{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(E.$t("common.add")),1)]),_:1})]),_:1}),R(H,{name:"authorization",label:"Authorization"},{default:j(()=>[R(Y,{modelValue:v.value.authType,"onUpdate:modelValue":x[8]||(x[8]=Oe=>v.value.authType=Oe)},{default:j(()=>[R(K,{label:"No Auth",value:"none"}),R(K,{label:"Bearer Token",value:"bearer"}),R(K,{label:"Basic Auth",value:"basic"}),v.value.authType==="bearer"?(Ie(),dt(M,{key:0,placeholder:E.$t("views.applicationWorkflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:v.value.token,"onUpdate:modelValue":x[5]||(x[5]=Oe=>v.value.token=Oe),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):jn("",!0),v.value.authType==="basic"?(Ie(),dt(M,{key:1,placeholder:E.$t("views.applicationWorkflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:v.value.username,"onUpdate:modelValue":x[6]||(x[6]=Oe=>v.value.username=Oe),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):jn("",!0),v.value.authType==="basic"?(Ie(),dt(M,{key:2,placeholder:E.$t("views.applicationWorkflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:v.value.password,"onUpdate:modelValue":x[7]||(x[7]=Oe=>v.value.password=Oe),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):jn("",!0)]),_:1},8,["modelValue"])]),_:1}),R(H,{name:"headers",label:"Headers"},{default:j(()=>[R(z,{data:v.value.headers,border:"",style:{width:"100%"}},{default:j(()=>[R($,{prop:"name",label:"Name"},{default:j(Oe=>[R(M,{modelValue:Oe.row.name,"onUpdate:modelValue":ke=>Oe.row.name=ke,placeholder:"输入/可选择变量"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),R($,{prop:"value",label:"Value"},{default:j(Oe=>[R(M,{modelValue:Oe.row.value,"onUpdate:modelValue":ke=>Oe.row.value=ke,placeholder:"输入/可选择变量"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),R($,{label:"",width:"50"},{default:j(Oe=>[R(J,{effect:"dark",content:E.$t("common.delete"),placement:"top"},{default:j(()=>[R(X,{type:"primary",text:"",onClick:ke=>b(Oe.$index)},{default:j(()=>[R(W,null,{default:j(()=>[R(G)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"]),R(X,{link:"",type:"primary",onClick:x[9]||(x[9]=Oe=>g())},{default:j(()=>[R(W,{class:"mr-4"},{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(E.$t("common.add")),1)]),_:1})]),_:1}),R(H,{name:"body",label:"Body"},{default:j(()=>[R(Y,{modelValue:v.value.contentType,"onUpdate:modelValue":x[12]||(x[12]=Oe=>v.value.contentType=Oe)},{default:j(()=>[(Ie(),An(_o,null,li(r,Oe=>R(K,{key:Oe,label:Oe,value:Oe},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(v.value.contentType)?(Ie(),dt(z,{key:0,data:v.value.params,border:"",style:{width:"100%"}},{default:j(()=>[R($,{prop:"name",label:"Name"},{default:j(Oe=>[R(M,{modelValue:Oe.row.name,"onUpdate:modelValue":ke=>Oe.row.name=ke,placeholder:"输入/可选择变量"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),R($,{prop:"value",label:"Value"},{default:j(Oe=>[R(M,{modelValue:Oe.row.value,"onUpdate:modelValue":ke=>Oe.row.value=ke,placeholder:"输入/可选择变量"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),R($,{label:"",width:"50"},{default:j(Oe=>[R(J,{effect:"dark",content:E.$t("common.delete"),placement:"top"},{default:j(()=>[R(X,{type:"primary",text:"",onClick:ke=>b(Oe.$index)},{default:j(()=>[R(W,null,{default:j(()=>[R(G)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])):jn("",!0),["form-data","x-www-form-urlencoded"].includes(v.value.contentType)?(Ie(),dt(X,{key:1,link:"",type:"primary",onClick:x[10]||(x[10]=Oe=>g())},{default:j(()=>[R(W,{class:"mr-4"},{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(E.$t("common.add")),1)]),_:1})):jn("",!0),["json","xml","raw-text"].includes(v.value.contentType)?(Ie(),dt(Sf,{key:2,title:E.$t("views.applicationWorkflow.nodes.httpNode.body"),modelValue:v.value.body,"onUpdate:modelValue":x[11]||(x[11]=Oe=>v.value.body=Oe),style:{height:"150px"},onSubmitDialog:_},null,8,["title","modelValue"])):jn("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class $H extends Ko{constructor(t){super(t,FH)}}const BH={type:"http-node",model:Zo,view:$H},UH=Object.freeze(Object.defineProperty({__proto__:null,default:BH},Symbol.toStringTag,{value:"Module"})),VH={class:"title-decoration-1 mb-8"},GH={class:"flex-between w-full"},WH={class:"flex align-center"},zH={class:"mr-4"},HH={class:"flex align-center"},XH={class:"mr-4"},qH={class:"flex align-center"},YH={class:"mr-4"},KH=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=pt(null),s=pt(),c=pt(),v=()=>{var D;return(D=c.value)==null?void 0:D.validate().catch($=>Promise.reject({node:o.nodeModel,errMessage:$}))},p=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),b={modelId:"",system:"",prompt:`{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},_=zr({get:()=>(o.nodeModel.properties.nodeData||$e.set(o.nodeModel.properties,"nodeData",b),o.nodeModel.properties.nodeData),set:D=>{$e.set(o.nodeModel.properties,"nodeData",D)}});function E(){n?fa.getApplicationTTIModel(n).then(D=>{r.value=$e.groupBy(D==null?void 0:D.data,"provider")}):t.asyncGetModel().then(D=>{r.value=$e.groupBy(D==null?void 0:D.data,"provider")})}const x=()=>{var D;_.value.modelId?(D=s.value)==null||D.reset_default(_.value.modelId,n):A({})},P=D=>{var $;D&&(($=s.value)==null||$.open(D,n,_.value.modelParamsSetting))};function A(D){$e.set(o.nodeModel.properties.nodeData,"modelParamsSetting",D)}function M(D){$e.set(o.nodeModel.properties.nodeData,"prompt",D)}function I(D){$e.set(o.nodeModel.properties.nodeData,"negative_prompt",D)}return uo(()=>{E(),$e.set(o.nodeModel,"validate",v)}),(D,$)=>{const G=Z("Setting"),W=Z("el-icon"),X=Z("el-button"),J=Z("el-form-item"),z=Z("AppIcon"),L=Z("el-tooltip"),H=Z("MdEditorMagnify"),K=Z("el-switch"),Y=Z("el-form"),ce=Z("el-card");return Ie(),dt(Yo,{"node-model":D.nodeModel},{default:j(()=>[le("h5",VH,Ce(D.$t("views.applicationWorkflow.nodeSetting")),1),R(ce,{shadow:"never",class:"card-never"},{default:j(()=>[R(Y,{onSubmit:$[6]||($[6]=pn(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:j(()=>[R(J,{label:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:j(()=>[le("div",GH,[le("div",null,[le("span",null,[bt(Ce(D.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),$[7]||($[7]=le("span",{class:"danger"},"*",-1))])]),R(X,{disabled:!_.value.modelId,type:"primary",link:"",onClick:$[0]||($[0]=Ne=>P(_.value.modelId)),onRefreshForm:A},{default:j(()=>[R(W,null,{default:j(()=>[R(G)]),_:1})]),_:1},8,["disabled"])])]),default:j(()=>[R(jw,{onChange:x,onWheel:p,teleported:!1,modelValue:_.value.modelId,"onUpdate:modelValue":$[1]||($[1]=Ne=>_.value.modelId=Ne),placeholder:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(J,{label:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:D.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:j(()=>[le("div",WH,[le("div",zH,[le("span",null,[bt(Ce(D.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),$[8]||($[8]=le("span",{class:"danger"},"*",-1))])]),R(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:j(()=>[R(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(H,{onWheel:p,title:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:_.value.prompt,"onUpdate:modelValue":$[2]||($[2]=Ne=>_.value.prompt=Ne),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),R(J,{label:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:D.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:j(()=>[le("div",HH,[le("div",XH,[le("span",null,Ce(D.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),R(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:j(()=>[R(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(H,{onWheel:p,title:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:_.value.negative_prompt,"onUpdate:modelValue":$[3]||($[3]=Ne=>_.value.negative_prompt=Ne),placeholder:D.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:I},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),R(J,{label:D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[5]||($[5]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",qH,[le("div",YH,[le("span",null,[bt(Ce(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),$[9]||($[9]=le("span",{class:"danger"},"*",-1))])]),R(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(K,{size:"small",modelValue:_.value.isResult,"onUpdate:modelValue":$[4]||($[4]=Ne=>_.value.isResult=Ne)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),R(Yy,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});let ZH=class extends Ko{constructor(t){super(t,KH)}};const JH={type:"image-generate-node",model:Zo,view:ZH},QH=Object.freeze(Object.defineProperty({__proto__:null,default:JH},Symbol.toStringTag,{value:"Module"})),eX={class:"title-decoration-1 mb-8"},tX={class:"flex-between w-full"},nX={class:"flex align-center"},rX={class:"mr-4"},oX={class:"flex-between"},iX={class:"flex align-center"},aX={class:"mr-4"},lX=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=pt(null),s=pt(),c=pt(),v=pt(),p=()=>{var D;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(D=c.value)==null?void 0:D.validate()]).catch($=>Promise.reject({node:o.nodeModel,errMessage:$}))},g=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),_={modelId:"",system:"",prompt:`{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,max_tokens:null,imageList:["start-node","image"]},E=zr({get:()=>(o.nodeModel.properties.nodeData||$e.set(o.nodeModel.properties,"nodeData",_),o.nodeModel.properties.nodeData),set:D=>{$e.set(o.nodeModel.properties,"nodeData",D)}});function x(){n?fa.getApplicationImageModel(n).then(D=>{r.value=$e.groupBy(D==null?void 0:D.data,"provider")}):t.asyncGetModel().then(D=>{r.value=$e.groupBy(D==null?void 0:D.data,"provider")})}function P(D){$e.set(o.nodeModel.properties.nodeData,"system",D)}function A(D){$e.set(o.nodeModel.properties.nodeData,"prompt",D)}const M=D=>{var $;D&&(($=s.value)==null||$.open(D,n,E.value.modelParamsSetting))};function I(D){$e.set(o.nodeModel.properties.nodeData,"modelParamsSetting",D)}return uo(()=>{x(),$e.set(o.nodeModel,"validate",p)}),(D,$)=>{const G=Z("Setting"),W=Z("el-icon"),X=Z("el-button"),J=Z("ModelSelect"),z=Z("el-form-item"),L=Z("MdEditorMagnify"),H=Z("AppIcon"),K=Z("el-tooltip"),Y=Z("el-option"),ce=Z("el-select"),Ne=Z("el-input-number"),_e=Z("el-switch"),Oe=Z("el-form"),ke=Z("el-card");return Ie(),dt(Yo,{"node-model":D.nodeModel},{default:j(()=>[le("h5",eX,Ce(D.$t("views.applicationWorkflow.nodeSetting")),1),R(ke,{shadow:"never",class:"card-never"},{default:j(()=>[R(Oe,{onSubmit:$[9]||($[9]=pn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:j(()=>[R(z,{label:D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:j(()=>[le("div",tX,[le("div",null,[le("span",null,[bt(Ce(Kr(Zt)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),$[10]||($[10]=le("span",{class:"danger"},"*",-1))])]),R(X,{disabled:!E.value.modelId,type:"primary",link:"",onClick:$[0]||($[0]=Re=>M(E.value.modelId)),onRefreshForm:I},{default:j(()=>[R(W,null,{default:j(()=>[R(G)]),_:1})]),_:1},8,["disabled"])])]),default:j(()=>[R(J,{onWheel:g,teleported:!1,modelValue:E.value.modelId,"onUpdate:modelValue":$[1]||($[1]=Re=>E.value.modelId=Re),placeholder:D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(z,{label:D.$t("views.application.applicationForm.form.roleSettings.label")},{default:j(()=>[R(L,{title:D.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:E.value.system,"onUpdate:modelValue":$[2]||($[2]=Re=>E.value.system=Re),style:{height:"100px"},onSubmitDialog:P,placeholder:D.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),R(z,{label:D.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:D.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:j(()=>[le("div",nX,[le("div",rX,[le("span",null,[bt(Ce(D.$t("views.application.applicationForm.form.prompt.label")),1),$[11]||($[11]=le("span",{class:"danger"},"*",-1))])]),R(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:j(()=>[R(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(L,{onWheel:g,title:D.$t("views.application.applicationForm.form.prompt.label"),modelValue:E.value.prompt,"onUpdate:modelValue":$[3]||($[3]=Re=>E.value.prompt=Re),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),R(z,null,{label:j(()=>[le("div",oX,[le("div",null,Ce(D.$t("views.application.applicationForm.form.historyRecord.label")),1),R(ce,{modelValue:E.value.dialogue_type,"onUpdate:modelValue":$[4]||($[4]=Re=>E.value.dialogue_type=Re),type:"small",style:{width:"100px"}},{default:j(()=>[R(Y,{label:D.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),R(Y,{label:D.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[R(Ne,{modelValue:E.value.dialogueNumber,"onUpdate:modelValue":$[5]||($[5]=Re=>E.value.dialogueNumber=Re),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),R(z,{label:D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),$[12]||($[12]=le("span",{class:"danger"},"*",-1))]),default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:v,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:E.value.imageList,"onUpdate:modelValue":$[6]||($[6]=Re=>E.value.imageList=Re)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),R(z,{label:D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[8]||($[8]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",iX,[le("div",aX,[le("span",null,[bt(Ce(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),$[13]||($[13]=le("span",{class:"danger"},"*",-1))])]),R(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(_e,{size:"small",modelValue:E.value.isResult,"onUpdate:modelValue":$[7]||($[7]=Re=>E.value.isResult=Re)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),R(Yy,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:I},null,512)]),_:1},8,["node-model"])}}});let uX=class extends Ko{constructor(t){super(t,lX)}};const sX={type:"image-understand-node",model:Zo,view:uX},cX=Object.freeze(Object.defineProperty({__proto__:null,default:sX},Symbol.toStringTag,{value:"Module"})),fX={class:"title-decoration-1 mb-8"},dX={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},pX={class:"flex-between"},hX={class:"ml-4"},vX={class:"title-decoration-1 mb-8"},yX={key:0,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},mX={class:"flex-between"},gX={key:0,class:"danger"},bX={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},_X={class:"flex-between"},wX={key:0,class:"danger"},EX=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=pt(),o=pt(!1),r={mcpTool:"",mcp_tools:[],sseUrl:"",toolParams:{},tool_form_field:[],params_nested:""};function s(){if(!v.value.sseUrl){Ba(Zt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}fa.getMcpTools({sseUrl:v.value.sseUrl},o).then(b=>{v.value.mcp_tools=b.data,Hp(Zt("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess"))})}function c(){var _,E,x,P;v.value.sseUrl=v.value.mcp_tools.filter(A=>A.name===v.value.mcpTool)[0].server;const b=v.value.mcp_tools.filter(A=>A.name===v.value.mcpTool)[0].args_schema;v.value.tool_form_field=[];for(const A in b.properties){let M=b.properties[A].properties;if(M){v.value.params_nested=A;for(const I in M){let D="TextInput";M[I].type==="string"?D="TextInput":M[I].type==="number"?D="NumberInput":M[I].type==="boolean"?D="SwitchInput":(M[I].type==="array"||M[I].type==="object")&&(D="JsonInput"),console.log(M[I]),v.value.tool_form_field.push({field:I,label:{input_type:"TooltipLabel",label:I,attrs:{tooltip:M[I].description},props_info:{}},input_type:D,source:"referencing",required:((_=b.properties[A].required)==null?void 0:_.indexOf(I))!==-1,props_info:{rules:[{required:((E=b.properties[A].required)==null?void 0:E.indexOf(I))!==-1,message:Zt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{v.value.params_nested="";let I="TextInput";b.properties[A].type==="string"?I="TextInput":b.properties[A].type==="number"?I="NumberInput":b.properties[A].type==="boolean"?I="SwitchInput":(b.properties[A].type==="array"||b.properties[A].type==="object")&&(I="JsonInput"),console.log(b.properties[A]),v.value.tool_form_field.push({field:A,label:{input_type:"TooltipLabel",label:A,attrs:{tooltip:b.properties[A].description},props_info:{}},input_type:I,source:"referencing",required:((x=b.required)==null?void 0:x.indexOf(A))!==-1,props_info:{rules:[{required:((P=b.required)==null?void 0:P.indexOf(A))!==-1,message:Zt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}v.value.params_nested?v.value.toolParams={[v.value.params_nested]:{}}:v.value.toolParams={}}const v=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:b=>{$e.set(t.nodeModel.properties,"nodeData",b)}}),p=pt(),g=async()=>{if(n.value){const b=v.value.tool_form_field.filter(_=>_.required).map(_=>_.label.label);if(b.length>0){for(const _ of b)if(v.value.params_nested){if(!v.value.toolParams[v.value.params_nested][_])return Promise.reject({node:t.nodeModel,errMessage:_+Zt("dynamicsForm.tip.requiredMessage")})}else if(!v.value.toolParams[_])return Promise.reject({node:t.nodeModel,errMessage:_+Zt("dynamicsForm.tip.requiredMessage")})}}if(p.value){const b=$e.cloneDeep(v.value);if(!b.sseUrl)return Promise.reject({node:t.nodeModel,errMessage:Zt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!b.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:Zt("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};return uo(()=>{var b;typeof((b=t.nodeModel.properties.nodeData)==null?void 0:b.is_result)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"is_result",!0),$e.set(t.nodeModel,"validate",g)}),(b,_)=>{const E=Z("el-input"),x=Z("el-form-item"),P=Z("Plus"),A=Z("el-icon"),M=Z("el-button"),I=Z("el-tooltip"),D=Z("el-option"),$=Z("el-select"),G=Z("el-form"),W=Z("el-input-number"),X=Z("el-switch"),J=Id("loading");return Ie(),dt(Yo,{nodeModel:b.nodeModel},{default:j(()=>[le("h5",fX,Ce(b.$t("views.applicationWorkflow.nodeSetting")),1),le("div",dX,[R(G,{onSubmit:_[4]||(_[4]=pn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:p,"hide-required-asterisk":""},{default:j(()=>[R(x,{label:b.$t("views.mcpLib.mcpForm.form.mcpSseUrl.label")},{default:j(()=>[R(E,{modelValue:v.value.sseUrl,"onUpdate:modelValue":_[0]||(_[0]=z=>v.value.sseUrl=z),type:"textarea",placeholder:b.$t("views.mcpLib.mcpForm.form.mcpSseUrl.placeholder"),maxlength:"256","show-word-limit":"",autosize:{minRows:3},onBlur:_[1]||(_[1]=z=>{var L;return v.value.sseUrl=(L=v.value.sseUrl)==null?void 0:L.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),R(x,null,{label:j(()=>[le("div",pX,[le("span",null,Ce(b.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),R(M,{type:"primary",link:"",onClick:_[2]||(_[2]=z=>s())},{default:j(()=>[R(A,{class:"mr-4"},{default:j(()=>[R(P)]),_:1}),bt(" "+Ce(b.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:j(()=>[R($,{modelValue:v.value.mcpTool,"onUpdate:modelValue":_[3]||(_[3]=z=>v.value.mcpTool=z),onChange:c,filterable:""},{default:j(()=>[(Ie(!0),An(_o,null,li(v.value.mcp_tools,z=>(Ie(),dt(D,{key:z.value,label:z.name,value:z.name,class:"flex align-center"},{default:j(()=>[R(I,{effect:"dark",content:z.description,placement:"top-start","popper-class":"max-w-350"},{default:j(()=>[R(Iw,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),le("span",hX,Ce(z.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),le("h5",vX,Ce(b.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),v.value.toolParams[v.value.params_nested]?(Ie(),An("div",yX,[v.value.mcpTool?Ua((Ie(),dt(G,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:_[6]||(_[6]=pn(()=>{},["prevent"]))},{default:j(()=>[(Ie(!0),An(_o,null,li(v.value.tool_form_field,z=>(Ie(),dt(x,{key:z.field,required:z.required},{label:j(()=>[le("div",mX,[le("div",null,[R(xS,{label:z.label.label,tooltip:z.label.attrs.tooltip},null,8,["label","tooltip"]),z.required?(Ie(),An("span",gX,"*")):jn("",!0)]),R($,{teleported:!1,modelValue:z.source,"onUpdate:modelValue":L=>z.source=L,size:"small",style:{width:"85px"},onChange:_[5]||(_[5]=L=>v.value.toolParams[v.value.params_nested]={})},{default:j(()=>[R(D,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),R(D,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:j(()=>[z.source==="custom"&&z.input_type==="TextInput"?(Ie(),dt(E,{key:0,modelValue:v.value.toolParams[v.value.params_nested][z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[v.value.params_nested][z.label.label]=L},null,8,["modelValue","onUpdate:modelValue"])):z.source==="custom"&&z.input_type==="NumberInput"?(Ie(),dt(W,{key:1,modelValue:v.value.toolParams[v.value.params_nested][z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[v.value.params_nested][z.label.label]=L},null,8,["modelValue","onUpdate:modelValue"])):z.source==="custom"&&z.input_type==="SwitchInput"?(Ie(),dt(X,{key:2,modelValue:v.value.toolParams[v.value.params_nested][z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[v.value.params_nested][z.label.label]=L},null,8,["modelValue","onUpdate:modelValue"])):z.source==="custom"&&z.input_type==="JsonInput"?(Ie(),dt(E,{key:3,modelValue:v.value.toolParams[v.value.params_nested][z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[v.value.params_nested][z.label.label]=L,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):jn("",!0),z.source==="referencing"?(Ie(),dt(Wr,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.toolParams[v.value.params_nested][z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[v.value.params_nested][z.label.label]=L},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):jn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[J,o.value]]):jn("",!0)])):(Ie(),An("div",bX,[v.value.mcpTool?Ua((Ie(),dt(G,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:_[7]||(_[7]=pn(()=>{},["prevent"]))},{default:j(()=>[(Ie(!0),An(_o,null,li(v.value.tool_form_field,z=>(Ie(),dt(x,{key:z.field,required:z.required},{label:j(()=>[le("div",_X,[le("div",null,[R(xS,{label:z.label.label,tooltip:z.label.attrs.tooltip},null,8,["label","tooltip"]),z.required?(Ie(),An("span",wX,"*")):jn("",!0)]),R($,{teleported:!1,modelValue:z.source,"onUpdate:modelValue":L=>z.source=L,size:"small",style:{width:"85px"}},{default:j(()=>[R(D,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),R(D,{label:b.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:j(()=>[z.source==="custom"&&z.input_type==="TextInput"?(Ie(),dt(E,{key:0,modelValue:v.value.toolParams[z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[z.label.label]=L},null,8,["modelValue","onUpdate:modelValue"])):z.source==="custom"&&z.input_type==="NumberInput"?(Ie(),dt(W,{key:1,modelValue:v.value.toolParams[z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[z.label.label]=L},null,8,["modelValue","onUpdate:modelValue"])):z.source==="custom"&&z.input_type==="SwitchInput"?(Ie(),dt(X,{key:2,modelValue:v.value.toolParams[z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[z.label.label]=L},null,8,["modelValue","onUpdate:modelValue"])):z.source==="custom"&&z.input_type==="JsonInput"?(Ie(),dt(E,{key:3,modelValue:v.value.toolParams[z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[z.label.label]=L,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):jn("",!0),z.source==="referencing"?(Ie(),dt(Wr,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.toolParams[z.label.label],"onUpdate:modelValue":L=>v.value.toolParams[z.label.label]=L},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):jn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[J,o.value]]):jn("",!0)]))]),_:1},8,["nodeModel"])}}});class OX extends Ko{constructor(t){super(t,EX)}}const xX={type:"mcp-node",model:Zo,view:OX},SX=Object.freeze(Object.defineProperty({__proto__:null,default:xX},Symbol.toStringTag,{value:"Module"})),AX={class:"title-decoration-1 mb-8"},TX={class:"flex-between"},MX={class:"flex align-center"},kX={class:"mr-4"},PX={class:"flex align-center"},NX={class:"mr-4"},RX=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),n=pt(),o=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),r=D=>{var $;D?($=n.value)==null||$.reset_default(D,v):b({})};function s(D){$e.set(x.nodeModel.properties.nodeData,"prompt",D)}function c(D){$e.set(x.nodeModel.properties.nodeData,"system",D)}const{params:{id:v}}=Rl.config.globalProperties.$route,p=`${Zt("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Zt("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Zt("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={modelId:"",system:Zt("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:p,dialogueNumber:1,isResult:!1};function b(D){$e.set(x.nodeModel.properties.nodeData,"modelParamsSetting",D)}const _=D=>{var $;D&&(($=n.value)==null||$.open(D,v,E.value.modelParamsSetting))},E=zr({get:()=>(x.nodeModel.properties.nodeData||$e.set(x.nodeModel.properties,"nodeData",g),x.nodeModel.properties.nodeData),set:D=>{$e.set(x.nodeModel.properties,"nodeData",D)}}),x=e,P=pt(),A=pt(null),M=()=>{var D;return(D=P.value)==null?void 0:D.validate().catch($=>Promise.reject({node:x.nodeModel,errMessage:$}))};function I(){v?fa.getApplicationModel(v).then(D=>{A.value=$e.groupBy(D==null?void 0:D.data,"provider")}):t.asyncGetModel().then(D=>{A.value=$e.groupBy(D==null?void 0:D.data,"provider")})}return uo(()=>{var D;I(),typeof((D=x.nodeModel.properties.nodeData)==null?void 0:D.isResult)>"u"&&Es(x.nodeModel)&&$e.set(x.nodeModel.properties.nodeData,"isResult",!0),$e.set(x.nodeModel,"validate",M)}),(D,$)=>{const G=Z("Setting"),W=Z("el-icon"),X=Z("el-button"),J=Z("ModelSelect"),z=Z("el-form-item"),L=Z("MdEditorMagnify"),H=Z("AppIcon"),K=Z("EditPen"),Y=Z("el-tooltip"),ce=Z("el-input-number"),Ne=Z("el-switch"),_e=Z("el-form"),Oe=Z("el-card");return Ie(),dt(Yo,{nodeModel:D.nodeModel},{default:j(()=>[le("h5",AX,Ce(D.$t("views.applicationWorkflow.nodeSetting")),1),R(Oe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(_e,{onSubmit:$[7]||($[7]=pn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:P,"hide-required-asterisk":""},{default:j(()=>[R(z,{label:D.$t("views.application.applicationForm.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:D.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:j(()=>[le("div",TX,[le("div",null,[le("span",null,[bt(Ce(D.$t("views.application.applicationForm.form.aiModel.label")),1),$[8]||($[8]=le("span",{class:"danger"},"*",-1))])]),R(X,{type:"primary",link:"",disabled:!E.value.modelId,onClick:$[0]||($[0]=ke=>_(E.value.modelId)),onRefreshForm:b},{default:j(()=>[R(W,null,{default:j(()=>[R(G)]),_:1})]),_:1},8,["disabled"])])]),default:j(()=>[R(J,{onChange:r,onWheel:o,teleported:!1,modelValue:E.value.modelId,"onUpdate:modelValue":$[1]||($[1]=ke=>E.value.modelId=ke),placeholder:D.$t("views.application.applicationForm.form.aiModel.placeholder"),options:A.value,onSubmitModel:I,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(z,{label:D.$t("views.application.applicationForm.form.roleSettings.label")},{default:j(()=>[R(L,{title:D.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:E.value.system,"onUpdate:modelValue":$[2]||($[2]=ke=>E.value.system=ke),style:{height:"100px"},onSubmitDialog:c,placeholder:D.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),R(z,{label:D.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:D.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:j(()=>[le("div",MX,[le("div",kX,[le("span",null,[bt(Ce(D.$t("views.application.applicationForm.form.prompt.label")),1),$[9]||($[9]=le("span",{class:"danger"},"*",-1))])]),R(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:j(()=>[R(H,{iconName:"app-warning",class:"app-warning-icon"}),R(W,null,{default:j(()=>[R(K)]),_:1})]),_:1})])]),default:j(()=>[R(L,{onWheel:o,title:D.$t("views.application.applicationForm.form.prompt.label"),modelValue:E.value.prompt,"onUpdate:modelValue":$[3]||($[3]=ke=>E.value.prompt=ke),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),R(z,{label:D.$t("views.application.applicationForm.form.historyRecord.label")},{default:j(()=>[R(ce,{modelValue:E.value.dialogueNumber,"onUpdate:modelValue":$[4]||($[4]=ke=>E.value.dialogueNumber=ke),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),R(z,{label:D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[6]||($[6]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",PX,[le("div",NX,[le("span",null,[bt(Ce(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),$[10]||($[10]=le("span",{class:"danger"},"*",-1))])]),R(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(Ne,{size:"small",modelValue:E.value.isResult,"onUpdate:modelValue":$[5]||($[5]=ke=>E.value.isResult=ke)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),R(Yy,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:b},null,512)]),_:1},8,["nodeModel"])}}});class DX extends Ko{constructor(t){super(t,RX)}}const CX={type:"question-node",model:Zo,view:DX},jX=Object.freeze(Object.defineProperty({__proto__:null,default:CX},Symbol.toStringTag,{value:"Module"})),IX={class:"flex-between"},LX={class:"flex align-center"},FX={class:"mr-4"},$X=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={replyType:"content",content:"",fields:[],isResult:!0},r=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",o),t.nodeModel.properties.nodeData),set:g=>{$e.set(t.nodeModel.properties,"nodeData",g)}});function s(g){$e.set(t.nodeModel.properties.nodeData,"content",g)}const c=pt(),v=pt(),p=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return uo(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",p)}),(g,b)=>{const _=Z("el-option"),E=Z("el-select"),x=Z("el-form-item"),P=Z("AppIcon"),A=Z("el-tooltip"),M=Z("el-switch"),I=Z("el-form"),D=Z("el-card");return Ie(),dt(Yo,{nodeModel:g.nodeModel},{default:j(()=>[R(D,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(I,{onSubmit:b[5]||(b[5]=pn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:j(()=>[R(x,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:j(()=>[le("div",IX,[le("span",null,Ce(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),R(E,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=$=>r.value.replyType=$),size:"small",style:{width:"85px"}},{default:j(()=>[R(_,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),R(_,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:j(()=>[r.value.replyType==="content"?(Ie(),dt(Sf,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=$=>r.value.content=$),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ie(),dt(Wr,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=$=>r.value.fields=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),R(x,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",LX,[le("div",FX,[le("span",null,[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),b[6]||(b[6]=le("span",{class:"danger"},"*",-1))])]),R(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(P,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(M,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=$=>r.value.isResult=$)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class BX extends Ko{constructor(t){super(t,$X)}}const UX={type:"reply-node",model:Zo,view:BX},VX=Object.freeze(Object.defineProperty({__proto__:null,default:UX},Symbol.toStringTag,{value:"Module"})),GX={class:"p-16"},WX={class:"flex align-center"},zX={class:"mr-4"},HX={class:"dialog-footer p-16"},XX=wr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=pt(),s=pt({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=pt(!1),v=pt(!1);$M(c,b=>{b||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const p=b=>{s.value={...s.value,...$e.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((_,E)=>{_&&(o("refresh",$e.cloneDeep(s.value)),c.value=!1)})};return t({open:p}),(b,_)=>{const E=Z("AppIcon"),x=Z("el-tooltip"),P=Z("el-input-number"),A=Z("el-form-item"),M=Z("el-col"),I=Z("el-row"),D=Z("el-slider"),$=Z("el-form"),G=Z("el-scrollbar"),W=Z("el-button"),X=Z("el-dialog");return Ie(),dt(X,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":_[5]||(_[5]=J=>c.value=J),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:j(()=>[le("span",HX,[R(W,{onClick:_[3]||(_[3]=pn(J=>c.value=!1,["prevent"]))},{default:j(()=>[bt(Ce(b.$t("common.cancel")),1)]),_:1}),R(W,{type:"primary",onClick:_[4]||(_[4]=J=>g()),loading:v.value},{default:j(()=>[bt(Ce(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:j(()=>[le("div",null,[R(G,{always:""},{default:j(()=>[le("div",GX,[R($,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:j(()=>[R(I,{gutter:20},{default:j(()=>[R(M,{span:12},{default:j(()=>[R(A,null,{label:j(()=>[le("div",WX,[le("span",zX,"Score "+Ce(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),R(x,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:j(()=>[R(E,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:j(()=>[R(P,{modelValue:s.value.similarity,"onUpdate:modelValue":_[0]||(_[0]=J=>s.value.similarity=J),min:0,max:s.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),R(M,{span:12},{default:j(()=>[R(A,{label:b.$t("views.application.applicationForm.dialog.topReferences")},{default:j(()=>[R(P,{modelValue:s.value.topN,"onUpdate:modelValue":_[1]||(_[1]=J=>s.value.topN=J),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),R(A,{label:b.$t("views.application.applicationForm.dialog.maxCharacters")},{default:j(()=>[R(D,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":_[2]||(_[2]=J=>s.value.maxParagraphCharNumber=J),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}});const qX={class:"flex-between"},YX={class:"flex-between"},KX={class:"w-full"},ZX={class:"flex-between"},JX={class:"flex-between"},QX=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),n=e,o=pt(),{params:{id:r}}=Rl.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3}},c=pt(null),v=()=>{var I;(I=o.value)==null||I.open(b.value.reranker_setting)},p=I=>{const D=$e.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);D.splice(I,1),$e.set(n.nodeModel.properties.nodeData,"reranker_reference_list",D)},g=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),b=zr({get:()=>(n.nodeModel.properties.nodeData||$e.set(n.nodeModel.properties,"nodeData",s),n.nodeModel.properties.nodeData),set:I=>{$e.set(n.nodeModel.properties,"nodeData",I)}});function _(I){$e.set(n.nodeModel.properties.nodeData,"reranker_setting",I)}function E(){r?fa.getApplicationRerankerModel(r).then(I=>{c.value=$e.groupBy(I==null?void 0:I.data,"provider")}):t.asyncGetModel({modelType:"RERANKER"}).then(I=>{c.value=$e.groupBy(I==null?void 0:I.data,"provider")})}const x=()=>{const I=$e.cloneDeep(n.nodeModel.properties.nodeData.reranker_reference_list);I.push([]),$e.set(n.nodeModel.properties.nodeData,"reranker_reference_list",I)},P=pt(),A=pt(),M=()=>{var I;return Promise.all([A.value?A.value.validate():Promise.resolve(""),(I=P.value)==null?void 0:I.validate()]).catch(D=>Promise.reject({node:n.nodeModel,errMessage:D}))};return uo(()=>{E(),$e.set(n.nodeModel,"validate",M)}),(I,D)=>{const $=Z("Plus"),G=Z("el-icon"),W=Z("el-button"),X=Z("el-form-item"),J=Z("el-col"),z=Z("Delete"),L=Z("el-row"),H=Z("Setting"),K=Z("ModelSelect"),Y=Z("el-form"),ce=Z("el-card");return Ie(),dt(Yo,{nodeModel:I.nodeModel},{default:j(()=>[R(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(Y,{onSubmit:D[2]||(D[2]=pn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:P,"hide-required-asterisk":""},{default:j(()=>[R(X,{label:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:j(()=>[le("div",qX,[le("span",null,[bt(Ce(I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),D[3]||(D[3]=le("span",{class:"danger"},"*",-1))]),R(W,{onClick:x,link:"",type:"primary"},{default:j(()=>[R(G,{class:"mr-4"},{default:j(()=>[R($)]),_:1})]),_:1})])]),default:j(()=>[(Ie(!0),An(_o,null,li(b.value.reranker_reference_list,(Ne,_e)=>(Ie(),dt(L,{gutter:8,style:{"margin-bottom":"8px"},key:_e},{default:j(()=>[R(J,{span:22},{default:j(()=>[R(X,{prop:"reranker_reference_list."+_e,rules:{type:"array",required:!0,message:I.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:j(()=>[(Ie(),dt(Wr,{key:_e,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:b.value.reranker_reference_list[_e],"onUpdate:modelValue":Oe=>b.value.reranker_reference_list[_e]=Oe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),R(J,{span:1},{default:j(()=>[R(W,{link:"",type:"info",class:"mt-4",onClick:Oe=>p(_e)},{default:j(()=>[R(G,null,{default:j(()=>[R(z)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),R(X,{label:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:j(()=>[le("div",YX,[le("span",null,Ce(I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),R(W,{type:"primary",link:"",onClick:v},{default:j(()=>[R(G,null,{default:j(()=>[R(H)]),_:1})]),_:1})])]),default:j(()=>[le("div",KX,[R(L,null,{default:j(()=>[R(J,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(" Score "+Ce(I.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),R(J,{span:12,class:"lighter"},{default:j(()=>{var Ne;return[bt(Ce((Ne=b.value.reranker_setting.similarity)==null?void 0:Ne.toFixed(3)),1)]}),_:1}),R(J,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(Ce(I.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),R(J,{span:12,class:"lighter"},{default:j(()=>[bt(Ce(b.value.reranker_setting.topN),1)]),_:1}),R(J,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(Ce(I.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),R(J,{span:12,class:"lighter"},{default:j(()=>[bt(Ce(b.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),R(X,{label:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:j(()=>[le("div",ZX,[le("span",null,[bt(Ce(I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),D[4]||(D[4]=le("span",{class:"danger"},"*",-1))])])]),default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:A,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:b.value.questionReferenceAddress,"onUpdate:modelValue":D[0]||(D[0]=Ne=>b.value.questionReferenceAddress=Ne)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),R(X,{label:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.label"),prop:"reranker_model_id",rules:{required:!0,message:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.placeholder"),trigger:"change"}},{label:j(()=>[le("div",JX,[le("span",null,[bt(Ce(I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.label")),1),D[5]||(D[5]=le("span",{class:"danger"},"*",-1))])])]),default:j(()=>[R(K,{onWheel:g,teleported:!1,modelValue:b.value.reranker_model_id,"onUpdate:modelValue":D[1]||(D[1]=Ne=>b.value.reranker_model_id=Ne),placeholder:I.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerModel.placeholder"),options:c.value,onSubmitModel:E,showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),R(XX,{ref_key:"ParamSettingDialogRef",ref:o,onRefresh:_},null,512)]),_:1},8,["nodeModel"])}}});const eq=qy(QX,[["__scopeId","data-v-8440f36a"]]);class tq extends Ko{constructor(t){super(t,eq)}}const nq={type:"reranker-node",model:Zo,view:tq},rq=Object.freeze(Object.defineProperty({__proto__:null,default:nq},Symbol.toStringTag,{value:"Module"}));var u2=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.fullText="views.application.applicationForm.dialog.fullTextSearch",e.hybrid="views.application.applicationForm.dialog.hybridSearch",e))(u2||{});const oq={class:"title-decoration-1 mb-8"},iq={class:"flex-between"},aq={class:"w-full"},lq={class:"flex align-center",style:{"line-height":"20px"}},uq=["title"],sq={class:"flex-between"},cq={class:"w-full"},fq=wr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:o}=yc(),{params:{id:r}}=Rl.config.globalProperties.$route,s=e,c=pt(),v={datasetIdList:[],datasetSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[]},p=zr({get:()=>(s.nodeModel.properties.nodeData||$e.set(s.nodeModel.properties,"nodeData",v),s.nodeModel.properties.nodeData),set:X=>{$e.set(s.nodeModel.properties,"nodeData",X)}}),g=pt(),b=pt(),_=pt(),E=pt([]),x=pt(!1);function P(X){$e.set(s.nodeModel.properties.nodeData,"datasetSetting",X.datasetSetting)}const A=()=>{var X;(X=b.value)==null||X.open(p.value,"WORK_FLOW")};function M(X){const J=s.nodeModel.properties.nodeData.datasetIdList.filter(z=>z!==X);$e.set(s.nodeModel.properties.nodeData,"datasetIdList",J)}function I(X){$e.set(s.nodeModel.properties.nodeData,"datasetIdList",X)}function D(){_.value&&_.value.open(p.value.datasetIdList)}function $(){r?n.asyncGetApplicationDataset(r,x).then(X=>{E.value=X.data}):t.asyncGetAllDataset(x).then(X=>{var J;E.value=(J=X.data)==null?void 0:J.filter(z=>{var L;return z.userId===((L=o.userInfo)==null?void 0:L.id)})})}function G(){$()}const W=()=>{var X;return Promise.all([c.value.validate(),(X=g.value)==null?void 0:X.validate()]).catch(J=>Promise.reject({node:s.nodeModel,errMessage:J}))};return uo(()=>{$(),$e.set(s.nodeModel,"validate",W)}),(X,J)=>{const z=Z("Plus"),L=Z("el-icon"),H=Z("el-button"),K=Z("el-text"),Y=Z("Close"),ce=Z("el-form-item"),Ne=Z("Setting"),_e=Z("el-col"),Oe=Z("el-row"),ke=Z("el-form"),Re=Z("el-card");return Ie(),dt(Yo,{nodeModel:X.nodeModel},{default:j(()=>[le("h5",oq,Ce(X.$t("views.applicationWorkflow.nodeSetting")),1),R(Re,{shadow:"never",class:"card-never"},{default:j(()=>[R(ke,{onSubmit:J[1]||(J[1]=pn(()=>{},["prevent"])),model:p.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:j(()=>[R(ce,{label:X.$t("views.log.selectDataset")},{label:j(()=>[le("div",iq,[le("span",null,Ce(X.$t("views.log.selectDataset")),1),R(H,{type:"primary",link:"",onClick:D},{default:j(()=>[R(L,null,{default:j(()=>[R(z)]),_:1})]),_:1})])]),default:j(()=>{var ue;return[le("div",aq,[((ue=p.value.datasetIdList)==null?void 0:ue.length)===0?(Ie(),dt(K,{key:0,type:"info"},{default:j(()=>[bt(Ce(X.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(Ie(!0),An(_o,{key:1},li(p.value.datasetIdList,(ve,Pe)=>{var Xe,ze,Je;return Ie(),An("div",{key:Pe,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[le("div",lq,[((Xe=Kr(h1)(E.value,ve,"id"))==null?void 0:Xe.type)==="1"?(Ie(),dt(SS,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:j(()=>J[2]||(J[2]=[le("img",{src:HI,style:{width:"58%"},alt:""},null,-1)])),_:1})):(Ie(),dt(SS,{key:1,class:"mr-8 avatar-blue",shape:"square",size:20},{default:j(()=>J[3]||(J[3]=[le("img",{src:XI,style:{width:"58%"},alt:""},null,-1)])),_:1})),le("div",{class:"ellipsis",title:(ze=Kr(h1)(E.value,ve,"id"))==null?void 0:ze.name},Ce((Je=Kr(h1)(E.value,ve,"id"))==null?void 0:Je.name),9,uq)]),R(H,{text:"",onClick:_t=>M(ve)},{default:j(()=>[R(L,null,{default:j(()=>[R(Y)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),R(ce,{label:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:j(()=>[le("div",sq,[le("span",null,Ce(X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),R(H,{type:"primary",link:"",onClick:A},{default:j(()=>[R(L,null,{default:j(()=>[R(Ne)]),_:1})]),_:1})])]),default:j(()=>[le("div",cq,[R(Oe,null,{default:j(()=>[R(_e,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(Ce(X.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),R(_e,{span:12,class:"lighter"},{default:j(()=>[bt(Ce(X.$t(Kr(u2)[p.value.datasetSetting.searchMode])),1)]),_:1}),R(_e,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(Ce(X.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),R(_e,{span:12,class:"lighter"},{default:j(()=>{var ue;return[bt(Ce((ue=p.value.datasetSetting.similarity)==null?void 0:ue.toFixed(3)),1)]}),_:1}),R(_e,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(Ce(X.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),R(_e,{span:12,class:"lighter"},{default:j(()=>[bt(Ce(p.value.datasetSetting.topN),1)]),_:1}),R(_e,{span:12,class:"color-secondary lighter"},{default:j(()=>[bt(Ce(X.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),R(_e,{span:12,class:"lighter"},{default:j(()=>[bt(Ce(p.value.datasetSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),R(ce,{label:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:c,nodeModel:X.nodeModel,class:"w-full",placeholder:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:p.value.questionReferenceAddress,"onUpdate:modelValue":J[0]||(J[0]=ue=>p.value.questionReferenceAddress=ue)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),R(QI,{ref_key:"ParamSettingDialogRef",ref:b,onRefresh:P},null,512),R(eL,{ref_key:"AddDatasetDialogRef",ref:_,onAddData:I,data:E.value,onRefresh:G,loading:x.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class dq extends Ko{constructor(t){super(t,fq)}}const pq={type:"search-dataset-node",model:Zo,view:dq},hq=Object.freeze(Object.defineProperty({__proto__:null,default:pq},Symbol.toStringTag,{value:"Module"})),vq={class:"title-decoration-1 mb-8"},yq={class:"flex-between w-full"},mq={class:"flex-between w-full"},gq={class:"flex align-center"},bq={class:"mr-4"},_q=wr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=yc(),{params:{id:n}}=Rl.config.globalProperties.$route,o=e,r=pt(null),s=pt(),c=pt(),v=()=>{var E;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(E=s.value)==null?void 0:E.validate()]).catch(x=>Promise.reject({node:o.nodeModel,errMessage:x}))},p=E=>E.ctrlKey===!0?(E.preventDefault(),!0):(E.stopPropagation(),!0),g={sttModelId:"",isResult:!0,audioList:[]},b=zr({get:()=>(o.nodeModel.properties.nodeData||$e.set(o.nodeModel.properties,"nodeData",g),o.nodeModel.properties.nodeData),set:E=>{$e.set(o.nodeModel.properties,"nodeData",E)}});function _(){n?fa.getApplicationSTTModel(n).then(E=>{r.value=$e.groupBy(E==null?void 0:E.data,"provider")}):t.asyncGetModel().then(E=>{r.value=$e.groupBy(E==null?void 0:E.data,"provider")})}return uo(()=>{_(),$e.set(o.nodeModel,"validate",v)}),(E,x)=>{const P=Z("ModelSelect"),A=Z("el-form-item"),M=Z("AppIcon"),I=Z("el-tooltip"),D=Z("el-switch"),$=Z("el-form"),G=Z("el-card");return Ie(),dt(Yo,{"node-model":E.nodeModel},{default:j(()=>[le("h5",vq,Ce(E.$t("views.applicationWorkflow.nodeSetting")),1),R(G,{shadow:"never",class:"card-never"},{default:j(()=>[R($,{onSubmit:x[4]||(x[4]=pn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:j(()=>[R(A,{label:E.$t("views.applicationWorkflow.nodes.speechToTextNode.sttModel.label"),prop:"sttModelId",rules:{required:!0,message:E.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:j(()=>[le("div",yq,[le("div",null,[le("span",null,[bt(Ce(E.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),x[5]||(x[5]=le("span",{class:"danger"},"*",-1))])])])]),default:j(()=>[R(P,{onWheel:p,teleported:!1,modelValue:b.value.sttModelId,"onUpdate:modelValue":x[0]||(x[0]=W=>b.value.sttModelId=W),placeholder:E.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(A,{label:E.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:E.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:j(()=>[le("div",mq,[le("div",null,[le("span",null,[bt(Ce(E.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),x[6]||(x[6]=le("span",{class:"danger"},"*",-1))])])])]),default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:c,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:b.value.audioList,"onUpdate:modelValue":x[1]||(x[1]=W=>b.value.audioList=W)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),R(A,{label:E.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:x[3]||(x[3]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",gq,[le("div",bq,[le("span",null,[bt(Ce(E.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),x[7]||(x[7]=le("span",{class:"danger"},"*",-1))])]),R(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(E.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(M,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(D,{size:"small",modelValue:b.value.isResult,"onUpdate:modelValue":x[2]||(x[2]=W=>b.value.isResult=W)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class wq extends Ko{constructor(t){super(t,_q)}}const Eq={type:"speech-to-text-node",model:Zo,view:wq},Oq=Object.freeze(Object.defineProperty({__proto__:null,default:Eq},Symbol.toStringTag,{value:"Module"})),xq={class:"title-decoration-1 mb-8"},Sq=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=pt(!1),o=[{label:Zt("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Zt("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:Zt("chat.chatId"),value:"chatId"}],r=()=>{const v=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>$e.cloneDeep(g.properties.user_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),p=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>$e.cloneDeep(g.properties.api_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...v,...p]},s=()=>{const v=r();$e.set(t.nodeModel.properties.config,"globalFields",[...o,...v])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let v=$e.cloneDeep(t.nodeModel.properties.config.fields);const p=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.file_upload_enable).map(b=>$e.cloneDeep(b.properties.nodeData.file_upload_setting)).filter(b=>b);if(v=v.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"),p.length===0){$e.set(t.nodeModel.properties.config,"fields",v);return}let g=[];p[0].document&&g.push({label:Zt("common.fileUpload.document"),value:"document"}),p[0].image&&g.push({label:Zt("common.fileUpload.image"),value:"image"}),p[0].audio&&g.push({label:Zt("common.fileUpload.audio"),value:"audio"}),p[0].video&&g.push({label:Zt("common.fileUpload.video"),value:"video"}),$e.set(t.nodeModel.properties.config,"fields",[...v,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),uo(()=>{s(),c()}),(v,p)=>{const g=Z("AppIcon"),b=Z("el-button"),_=Z("el-tooltip");return Ie(),dt(Yo,{nodeModel:v.nodeModel},{default:j(()=>[le("h5",xq,Ce(v.$t("views.applicationWorkflow.variable.global")),1),(Ie(!0),An(_o,null,li(v.nodeModel.properties.config.globalFields,(E,x)=>(Ie(),An("div",{key:x,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:p[0]||(p[0]=P=>n.value=!0),onMouseleave:p[1]||(p[1]=P=>n.value=!1)},[le("span",null,Ce(E.label)+" "+Ce("{"+E.value+"}"),1),n.value===!0?(Ie(),dt(_,{key:0,effect:"dark",content:v.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:j(()=>[R(b,{link:"",onClick:P=>Kr(IM)(`{{global.${E.value}}}`),style:{padding:"0"}},{default:j(()=>[R(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):jn("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class Aq extends Ko{constructor(t){super(t,Sq)}}const Tq={type:"start-node",model:Zo,view:Aq},Mq=Object.freeze(Object.defineProperty({__proto__:null,default:Tq},Symbol.toStringTag,{value:"Module"})),kq={class:"title-decoration-1 mb-16"},Pq={class:"flex-between"},Nq={class:"lighter mb-8"},Rq={key:0},Dq={class:"flex-between"},Cq={class:"flex"},jq={class:"flex"},Iq={key:0,class:"danger"},Lq={class:"lighter mb-8"},Fq={key:0,class:"mb-8"},$q=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=pt(),r=pt(),s={code:"",inputFieldList:[],isResult:!1},c=pt(null),v=pt(!1),p=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:A=>{$e.set(t.nodeModel.properties,"nodeData",A)}}),g=pt(),b=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(M=>Promise.reject({node:t.nodeModel,errMessage:M}))};function _(A){$e.set(t.nodeModel.properties.nodeData,"code",A)}function E(A,M){typeof M<"u"&&(c.value=M),o.value.open(A)}function x(A){const M=$e.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);M.splice(A,1),$e.set(t.nodeModel.properties.nodeData,"inputFieldList",M)}function P(A){const M=$e.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList??[]),I={...A,value:A.source==="reference"?[]:""};c.value!==null?M.splice(c.value,1,I):(p.value.code="{{"+A.name+"}}",M.push(I)),$e.set(t.nodeModel.properties.nodeData,"inputFieldList",M),c.value=null}return uo(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",b),setTimeout(()=>{v.value=!0},100)}),(A,M)=>{const I=Z("Plus"),D=Z("el-icon"),$=Z("el-button"),G=Z("auto-tooltip"),W=Z("el-tag"),X=Z("EditPen"),J=Z("Delete"),z=Z("el-input"),L=Z("el-form-item"),H=Z("el-text"),K=Z("el-card"),Y=Z("CodemirrorEditor"),ce=Z("el-form");return Ie(),dt(Yo,{nodeModel:A.nodeModel},{default:j(()=>[le("h5",kq,Ce(A.$t("views.applicationWorkflow.nodeSetting")),1),le("div",Pq,[le("h5",Nq,Ce(A.$t("common.param.inputParam")),1),R($,{link:"",type:"primary",onClick:M[0]||(M[0]=Ne=>E())},{default:j(()=>[R(D,{class:"mr-4"},{default:j(()=>[R(I)]),_:1}),bt(" "+Ce(A.$t("common.add")),1)]),_:1})]),R(ce,{onSubmit:M[2]||(M[2]=pn(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:p.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:j(()=>[R(K,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:j(()=>{var Ne;return[((Ne=p.value.inputFieldList)==null?void 0:Ne.length)>0?(Ie(),An("div",Rq,[(Ie(!0),An(_o,null,li(p.value.inputFieldList,(_e,Oe)=>(Ie(),dt(L,{key:Oe,label:_e.name,prop:"inputFieldList."+Oe+".value",rules:{required:_e.is_required,message:_e.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:j(()=>[le("div",Dq,[le("div",Cq,[le("span",jq,[R(G,{content:_e.name,style:{"max-width":"130px"}},{default:j(()=>[bt(Ce(_e.name),1)]),_:2},1032,["content"]),_e.is_required?(Ie(),An("span",Iq,"*")):jn("",!0)]),R(W,{type:"info",class:"info-tag ml-4"},{default:j(()=>[bt(Ce(_e.type),1)]),_:2},1024)]),le("div",null,[R($,{text:"",onClick:pn(ke=>E(_e,Oe),["stop"])},{default:j(()=>[R(D,null,{default:j(()=>[R(X)]),_:1})]),_:2},1032,["onClick"]),R($,{text:"",onClick:ke=>x(Oe),style:{"margin-left":"4px !important"}},{default:j(()=>[R(D,null,{default:j(()=>[R(J)]),_:1})]),_:2},1032,["onClick"])])])]),default:j(()=>[_e.source==="reference"?(Ie(),dt(Wr,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:_e.value,"onUpdate:modelValue":ke=>_e.value=ke,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ie(),dt(z,{key:1,modelValue:_e.value,"onUpdate:modelValue":ke=>_e.value=ke,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ie(),dt(H,{key:1,type:"info"},{default:j(()=>[bt(Ce(A.$t("common.noData")),1)]),_:1}))]}),_:1}),le("h5",Lq,Ce(A.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(Ie(),An("div",Fq,[R(Y,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:p.value.code,"onUpdate:modelValue":M[1]||(M[1]=Ne=>p.value.code=Ne),onWheel:n,style:{height:"130px !important"},onSubmitDialog:_},null,8,["title","modelValue"])])):jn("",!0)]),_:1},8,["model"]),R(zM,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class Bq extends Ko{constructor(t){super(t,$q)}}const Uq={type:"text-splice-node",model:Zo,view:Bq},Vq=Object.freeze(Object.defineProperty({__proto__:null,default:Uq},Symbol.toStringTag,{value:"Module"})),Gq={class:"title-decoration-1 mb-8"},Wq={class:"flex-between w-full"},zq={class:"flex-between w-full"},Hq={class:"flex align-center"},Xq={class:"mr-4"},qq=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=pt(),{model:n}=yc(),{params:{id:o}}=Rl.config.globalProperties.$route,r=e,s=pt(null),c=pt(),v=pt(),p=()=>{var A;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(A=c.value)==null?void 0:A.validate()]).catch(M=>Promise.reject({node:r.nodeModel,errMessage:M}))},g=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),b={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},_=zr({get:()=>(r.nodeModel.properties.nodeData||$e.set(r.nodeModel.properties,"nodeData",b),r.nodeModel.properties.nodeData),set:A=>{$e.set(r.nodeModel.properties,"nodeData",A)}});function E(){o?fa.getApplicationTTSModel(o).then(A=>{s.value=$e.groupBy(A==null?void 0:A.data,"provider")}):n.asyncGetModel().then(A=>{s.value=$e.groupBy(A==null?void 0:A.data,"provider")})}const x=()=>{var M;const A=_.value.ttsModelId;if(!A){Hp(Zt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(M=t.value)==null||M.open(A,o,_.value.modelParamsSetting)},P=A=>{_.value.modelParamsSetting=A};return uo(()=>{E(),$e.set(r.nodeModel,"validate",p)}),(A,M)=>{const I=Z("Setting"),D=Z("el-icon"),$=Z("el-button"),G=Z("ModelSelect"),W=Z("el-form-item"),X=Z("AppIcon"),J=Z("el-tooltip"),z=Z("el-switch"),L=Z("el-form"),H=Z("el-card");return Ie(),dt(Yo,{"node-model":A.nodeModel},{default:j(()=>[le("h5",Gq,Ce(A.$t("views.applicationWorkflow.nodeSetting")),1),R(H,{shadow:"never",class:"card-never"},{default:j(()=>[R(L,{onSubmit:M[4]||(M[4]=pn(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:j(()=>[R(W,{label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_Model.label"),prop:"ttsModelId",rules:{required:!0,message:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:j(()=>[le("div",Wq,[le("div",null,[le("span",null,[bt(Ce(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),M[5]||(M[5]=le("span",{class:"danger"},"*",-1))])]),R($,{type:"primary",link:"",onClick:x,disabled:!_.value.ttsModelId,class:"mr-4"},{default:j(()=>[R(D,null,{default:j(()=>[R(I)]),_:1})]),_:1},8,["disabled"])])]),default:j(()=>[R(G,{onWheel:g,teleported:!1,modelValue:_.value.ttsModelId,"onUpdate:modelValue":M[0]||(M[0]=K=>_.value.ttsModelId=K),placeholder:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),R(W,{prop:"content_list",label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:j(()=>[le("div",zq,[le("div",null,[le("span",null,[bt(Ce(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),M[6]||(M[6]=le("span",{class:"danger"},"*",-1))])])])]),default:j(()=>[R(Wr,{ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:_.value.content_list,"onUpdate:modelValue":M[1]||(M[1]=K=>_.value.content_list=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),R(W,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:M[3]||(M[3]=pn(()=>{},["prevent"]))},{label:j(()=>[le("div",Hq,[le("div",Xq,[le("span",null,[bt(Ce(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1),M[7]||(M[7]=le("span",{class:"danger"},"*",-1))])]),R(J,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:j(()=>[bt(Ce(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:j(()=>[R(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:j(()=>[R(z,{size:"small",modelValue:_.value.isResult,"onUpdate:modelValue":M[2]||(M[2]=K=>_.value.isResult=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),R(UM,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:P},null,512)]),_:1},8,["node-model"])}}});class Yq extends Ko{constructor(t){super(t,qq)}}const Kq={type:"text-to-speech-node",model:Zo,view:Yq},Zq=Object.freeze(Object.defineProperty({__proto__:null,default:Kq},Symbol.toStringTag,{value:"Module"})),Jq={class:"title-decoration-1 mb-8"},Qq={class:"flex-between lighter"},eY={key:0,class:"mt-8"},tY=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:ys(),type:"选项 1",option:""}]},o=(b,_,E)=>{const P=$e.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(A=>A.id===_.id?{...A,height:b.height,index:E}:A);$e.set(t.nodeModel.properties,"branchConditionList",P),p(t.nodeModel.properties.nodeData.branch,!0)},r=zr({get:()=>(t.nodeModel.properties.nodeData||($e.set(t.nodeModel.properties,"nodeData",n),p(n.branch,!0)),t.nodeModel.properties.nodeData),set:b=>{$e.set(t.nodeModel.properties,"nodeData",b)}}),s=pt();pt();const c=()=>{var _;const b=[(_=s.value)==null?void 0:_.validate()];return Promise.all(b).catch(E=>Promise.reject({node:t.nodeModel,errMessage:E}))};Rl.config.globalProperties.$route;function v(){const b=$e.cloneDeep(t.nodeModel.properties.nodeData.branch),_={type:"选项 "+(b.length+1),id:ys(),option:"选项 "+(b.length+1)};b.splice(b.length,0,_),p(b,!0),$e.set(t.nodeModel.properties.nodeData,"branch",b)}function p(b,_){const E=$e.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),x=b.map((P,A)=>{const M=E.find(I=>I.id===P.id);if(M)return{index:A,height:M.height,id:P.id};if(_)return{index:A,height:100,id:P.id}}).filter(P=>P);$e.set(t.nodeModel.properties,"branchConditionList",x),t.nodeModel.refreshBranch()}function g(b){const _=$e.cloneDeep(t.nodeModel.properties.nodeData.branch);if(_[b].conditions.length===0){const x=_.splice(b,1).map(P=>t.nodeModel.id+"_"+P.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(P=>x.includes(P.sourceAnchorId)).map(P=>P.id)),p(_,!1),_.forEach((P,A)=>{P.type="选项 "+(A+1)})}$e.set(t.nodeModel.properties.nodeData,"branch",_)}return uo(()=>{$e.set(t.nodeModel,"validate",c)}),(b,_)=>{const E=Z("el-form-item"),x=Z("el-input"),P=Z("el-col"),A=Z("Delete"),M=Z("el-icon"),I=Z("el-button"),D=Z("el-row"),$=Z("el-card"),G=Z("Plus"),W=Z("el-form"),X=Id("resize");return Ie(),dt(Yo,{nodeModel:b.nodeModel},{default:j(()=>[le("h5",Jq,Ce(b.$t("views.applicationWorkflow.nodeSetting")),1),R($,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(W,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:s,onSubmit:_[1]||(_[1]=pn(()=>{},["prevent"]))},{default:j(()=>[R(E,{label:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:j(()=>[R(Sf,{title:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":_[0]||(_[0]=J=>r.value.labelName=J),style:{height:"100px"},placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(Ie(!0),An(_o,null,li(r.value.branch,(J,z)=>Ua((Ie(),dt($,{key:J.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:j(()=>[le("div",Qq,Ce(J.type),1),z!==r.value.branch.length?(Ie(),An("div",eY,[R(D,{gutter:8},{default:j(()=>[R(P,{span:23},{default:j(()=>[R(E,{prop:"branch."+z+".option",rules:{required:!0,message:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:j(()=>[R(x,{modelValue:J.option,"onUpdate:modelValue":L=>J.option=L,placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),R(P,{span:1},{default:j(()=>[R(I,{disabled:z===0,link:"",type:"info",class:"mt-4",onClick:L=>g(z)},{default:j(()=>[R(M,null,{default:j(()=>[R(A)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):jn("",!0)]),_:2},1024)),[[X,L=>o(L,J,z)]])),128)),R(I,{link:"",type:"primary",onClick:v},{default:j(()=>[R(M,{class:"mr-4"},{default:j(()=>[R(G)]),_:1}),bt(" "+Ce(b.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class nY extends Ko{constructor(t){super(t,tY)}}const rY=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class oY extends Zo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,p=[];if(p.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=rY(c,g);p.push({x:n+r/2-10,y:v?o-s/2+275+_+b.height/2:o-15,id:`${t}_${b.id}_right`,type:"right"})}return p}}const iY={type:"user-select-node",model:oY,view:nY},aY=Object.freeze(Object.defineProperty({__proto__:null,default:iY},Symbol.toStringTag,{value:"Module"})),lY={class:"flex-between"},uY=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e;console.log("nodeModel",t.nodeModel);const n={variable_list:[{id:ys(),fields:[],type:"string",source:"custom",name:""}]},o=zr({get:()=>(t.nodeModel.properties.nodeData||($e.set(t.nodeModel.properties,"nodeData",n),console.log("nodeModel21",t.nodeModel)),t.nodeModel.properties.nodeData),set:_=>{$e.set(t.nodeModel.properties,"nodeData",_)}}),r=pt(),s=pt(),c=pt(),v=async()=>{var E;let _=[(E=r.value)==null?void 0:E.validate(),...s.value.map(x=>x.validate())];return c.value&&(_=[..._,...s.value.map(x=>x.validate())]),Promise.all(_).catch(x=>Promise.reject({node:t.nodeModel,errMessage:x}))};function p(){const _=$e.cloneDeep(t.nodeModel.properties.nodeData.variable_list),E={id:ys(),fields:[],type:"string",source:"custom",name:""};_.push(E),$e.set(t.nodeModel.properties.nodeData,"variable_list",_)}function g(_){const E=$e.cloneDeep(t.nodeModel.properties.nodeData.variable_list);E.splice(_,1),$e.set(t.nodeModel.properties.nodeData,"variable_list",E)}function b(_){console.log("item",_)}return uo(()=>{var _;typeof((_=t.nodeModel.properties.nodeData)==null?void 0:_.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",v)}),(_,E)=>{const x=Z("Delete"),P=Z("el-icon"),A=Z("el-button"),M=Z("el-form-item"),I=Z("el-card"),D=Z("Plus"),$=Z("el-form");return Ie(),dt(Yo,{nodeModel:_.nodeModel},{default:j(()=>[R($,{onSubmit:E[0]||(E[0]=pn(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:r,"hide-required-asterisk":""},{default:j(()=>[(Ie(!0),An(_o,null,li(o.value.variable_list,(G,W)=>(Ie(),dt(I,{key:G.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(M,{label:_.$t("views.applicationWorkflow.variable.label")},{label:j(()=>[le("div",lY,[le("div",null,[bt(Ce(_.$t("views.applicationWorkflow.variable.label"))+" ",1),E[1]||(E[1]=le("span",{class:"danger"},"*",-1))]),o.value.variable_list.length>1?(Ie(),dt(A,{key:0,text:"",onClick:X=>g(W)},{default:j(()=>[R(P,null,{default:j(()=>[R(x)]),_:1})]),_:2},1032,["onClick"])):jn("",!0)])]),default:j(()=>[R(Wr,{ref_for:!0,ref_key:"nodeCascaderRef",ref:s,nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.variable.placeholder"),modelValue:G.fields,"onUpdate:modelValue":X=>G.fields=X,onChange:X=>b(G)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"])]),_:2},1024))),128)),R(A,{link:"",type:"primary",onClick:p},{default:j(()=>[R(P,{class:"mr-4"},{default:j(()=>[R(D)]),_:1}),bt(" "+Ce(_.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class sY extends Ko{constructor(t){super(t,uY)}}const cY={type:"variable-aggregate-node",model:Zo,view:sY},fY=Object.freeze(Object.defineProperty({__proto__:null,default:cY},Symbol.toStringTag,{value:"Module"})),dY={class:"flex-between"},pY={class:"flex-between mb-8"},hY={class:"lighter"},vY={key:0,class:"flex w-full"},yY=wr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),r={variable_list:[{id:ys(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=zr({get:()=>(t.nodeModel.properties.nodeData||$e.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:x=>{$e.set(t.nodeModel.properties,"nodeData",x)}}),c=pt(),v=pt(),p=pt(),g=async()=>{var P;let x=[(P=c.value)==null?void 0:P.validate(),...v.value.map(A=>A.validate())];return p.value&&(x=[...x,...v.value.map(A=>A.validate())]),Promise.all(x).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function b(){const x=$e.cloneDeep(t.nodeModel.properties.nodeData.variable_list),P={id:ys(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};x.push(P),$e.set(t.nodeModel.properties.nodeData,"variable_list",x)}function _(x){const P=$e.cloneDeep(t.nodeModel.properties.nodeData.variable_list);P.splice(x,1),$e.set(t.nodeModel.properties.nodeData,"variable_list",P)}function E(x){t.nodeModel.graphModel.nodes.map(P=>{P.id==="start-node"&&P.properties.config.globalFields.forEach(A=>{A.value===x.fields[1]&&(x.name=A.label)})})}return uo(()=>{var x;typeof((x=t.nodeModel.properties.nodeData)==null?void 0:x.isResult)>"u"&&Es(t.nodeModel)&&$e.set(t.nodeModel.properties.nodeData,"isResult",!0),$e.set(t.nodeModel,"validate",g)}),(x,P)=>{const A=Z("Delete"),M=Z("el-icon"),I=Z("el-button"),D=Z("el-form-item"),$=Z("el-option"),G=Z("el-select"),W=Z("el-input"),X=Z("el-input-number"),J=Z("CodemirrorEditor"),z=Z("el-card"),L=Z("Plus"),H=Z("el-form");return Ie(),dt(Yo,{nodeModel:x.nodeModel},{default:j(()=>[R(H,{onSubmit:P[0]||(P[0]=pn(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:j(()=>[(Ie(!0),An(_o,null,li(s.value.variable_list,(K,Y)=>(Ie(),dt(z,{key:K.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:j(()=>[R(D,{label:x.$t("views.applicationWorkflow.variable.label")},{label:j(()=>[le("div",dY,[le("div",null,[bt(Ce(x.$t("views.applicationWorkflow.variable.label"))+" ",1),P[1]||(P[1]=le("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(Ie(),dt(I,{key:0,text:"",onClick:ce=>_(Y)},{default:j(()=>[R(M,null,{default:j(()=>[R(A)]),_:1})]),_:2},1032,["onClick"])):jn("",!0)])]),default:j(()=>[R(Wr,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.fields,"onUpdate:modelValue":ce=>K.fields=ce,global:!0,onChange:ce=>E(K)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),le("div",pY,[le("span",hY,[bt(Ce(x.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),P[2]||(P[2]=le("span",{class:"danger"},"*",-1))]),R(G,{teleported:!1,modelValue:K.source,"onUpdate:modelValue":ce=>K.source=ce,size:"small",style:{width:"85px"}},{default:j(()=>[R($,{label:x.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),R($,{label:x.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),K.source==="custom"?(Ie(),An("div",vY,[R(G,{modelValue:K.type,"onUpdate:modelValue":ce=>K.type=ce,style:{"max-width":"85px"},class:"mr-8",onChange:ce=>s.value.variable_list[Y].value=null},{default:j(()=>[(Ie(),An(_o,null,li(n,ce=>R($,{key:ce,label:ce,value:ce},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),K.type==="string"?(Ie(),dt(D,{key:0,prop:"variable_list."+Y+".value",rules:{message:Kr(Zt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:j(()=>[R(W,{modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce,placeholder:x.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):K.type==="num"?(Ie(),dt(D,{key:1,prop:"variable_list."+Y+".value",rules:{message:x.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:j(()=>[R(X,{modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):K.type==="json"?(Ie(),dt(D,{key:2,class:"w-full",prop:"variable_list."+Y+".value",rules:[{message:x.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(ce,Ne,_e)=>{try{JSON.parse(Ne),_e()}catch{_e(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:j(()=>[R(J,{title:"JSON",modelValue:K.value,"onUpdate:modelValue":ce=>K.value=ce,style:{height:"100px",width:"155px"},onSubmitDialog:ce=>s.value.variable_list[Y].value=ce},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):jn("",!0)])):(Ie(),dt(D,{key:1},{default:j(()=>[R(Wr,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:p,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.reference,"onUpdate:modelValue":ce=>K.reference=ce},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),R(I,{link:"",type:"primary",onClick:b},{default:j(()=>[R(M,{class:"mr-4"},{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(x.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class mY extends Ko{constructor(t){super(t,yY)}}const gY={type:"variable-assign-node",model:Zo,view:mY},bY=Object.freeze(Object.defineProperty({__proto__:null,default:gY},Symbol.toStringTag,{value:"Module"})),nT=wr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Ua((Ie(),An("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=pn(()=>{},["stop"])),onClick:r[1]||(r[1]=pn(()=>{},["stop"]))},[(Ie(),An("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[le("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),le("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Ev,t.model.isHovered]])}});function _Y(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const wY=32,EY=32;class OY extends cn.BezierEdge{constructor(){super();Ea(this,"isMounted");Ea(this,"customLineApp");Ea(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");_Y(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Gg()?HP(this.targetId(),nT,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=FM({render:()=>Ov(nT,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Gg()&&XP(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=wY,customHeight:s=EY}=n.getProperties(),{startPoint:c,endPoint:v,path:p,isAnimation:g,arrowConfig:b}=n,_=n.getEdgeAnimationStyle(),{strokeDasharray:E,stroke:x,strokeDashoffset:P,animationName:A,animationDuration:M,animationIterationCount:I,animationTimingFunction:D,animationDirection:$}=_,G={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},W=n.getEdgeStyle(),X={width:r,height:s};return setTimeout(()=>{const J=document.getElementById(o);J&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(J))},0),delete W.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:p,...W,...b,...g?{strokeDasharray:E,stroke:x,style:{strokeDashoffset:P,animationName:A,animationDuration:M,animationIterationCount:I,animationTimingFunction:D,animationDirection:$}}:{}}),cn.h("foreignObject",{...G,y:G.y+5,x:G.x+5,style:{}},[cn.h("div",{id:o,style:{...X},className:"lf-custom-edge-wrapper"})])])}}class xY extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const SY={type:"app-edge",view:OY,model:xY},AY=wr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var p;(p=t.lf)==null||p.zoom(!0,[0,0])}function o(){var p;(p=t.lf)==null||p.zoom(!1,[0,0])}function r(){var p,g,b;(p=t.lf)==null||p.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const s=()=>{var p;(p=t.lf)==null||p.extension.dagre.layout()},c=()=>{var p;(p=t.lf)==null||p.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var p;(p=t.lf)==null||p.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(p,g)=>{const b=Z("ZoomOut"),_=Z("el-icon"),E=Z("el-tooltip"),x=Z("el-button"),P=Z("ZoomIn"),A=Z("AppIcon"),M=Z("el-divider"),I=Z("el-card");return Ie(),dt(I,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:j(()=>[R(x,{link:"",onClick:o},{default:j(()=>[R(E,{class:"box-item",effect:"dark",content:p.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:j(()=>[R(_,{size:16,title:p.$t("views.applicationWorkflow.control.zoomOut")},{default:j(()=>[R(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),R(x,{link:"",onClick:n},{default:j(()=>[R(E,{class:"box-item",effect:"dark",content:p.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:j(()=>[R(_,{size:16,title:p.$t("views.applicationWorkflow.control.zoomIn")},{default:j(()=>[R(P)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),R(x,{link:"",onClick:r},{default:j(()=>[R(E,{class:"box-item",effect:"dark",content:p.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:j(()=>[R(A,{iconName:"app-fitview",title:p.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),R(M,{direction:"vertical"}),R(x,{link:"",onClick:c},{default:j(()=>[R(E,{class:"box-item",effect:"dark",content:p.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:j(()=>[R(A,{style:{"font-size":"16px"},iconName:"app-retract",title:p.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),R(x,{link:"",onClick:v},{default:j(()=>[R(E,{class:"box-item",effect:"dark",content:p.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:j(()=>[R(A,{style:{"font-size":"16px"},iconName:"app-extend",title:p.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),R(x,{link:"",onClick:s},{default:j(()=>[R(E,{class:"box-item",effect:"dark",content:p.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:j(()=>[R(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:p.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let lc=null;function rT(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function oT(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const tv=40;let cg=40;function TY(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var _,E;if(cg=tv,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,p=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(p):!0)||p.nodes.length===0&&p.edges.length===0)return lc=null,!0;const b=p.nodes.filter(x=>x.type===qo.Start||x.type===qo.Base);if(b.length>0){Ba(((E=(_=b[0])==null?void 0:_.properties)==null?void 0:E.nodeName)+Zt("views.applicationWorkflow.tip.cannotCopy"));return}return lc=p,lc.nodes.forEach(x=>rT(x,tv)),lc.edges.forEach(x=>oT(x,tv)),Hp(Zt("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;if(lc&&(lc.nodes||lc.edges)){e.clearSelectElements();const v=e.addElements(lc,cg);if(!v)return!0;v.nodes.forEach(p=>e.selectElementById(p.id,!0)),v.edges.forEach(p=>e.selectElementById(p.id,!0)),lc.nodes.forEach(p=>rT(p,tv)),lc.edges.forEach(p=>oT(p,tv)),cg=cg+tv}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(b=>e.deleteEdge(b.id));return}const p=v.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(p.length>0){Ba(`${(g=p[0].properties)==null?void 0:g.nodeName}${Zt("views.applicationWorkflow.delete.deleteMessage")}`);return}return Cw(Zt("common.tip"),Zt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Zt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;v.edges.forEach(b=>e.deleteEdge(b.id)),v.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class MY{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const kY=e=>typeof e=="string",iT=Array.isArray,Yg=e=>typeof e=="number",s2=e=>e!==null&&typeof e=="object",Kg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Kg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Kg(t[n])}),t}return e},nv=(e,t)=>{const n=e[t];return s2(n)?n.cell:n},aT=(e,t,n)=>{let o;return n?o=n:Yg(e)?o=()=>e:o=()=>t,o},PY=(e,t)=>{if(e!=="next"&&e!=="prev")return t},lT=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let NY=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return lT(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&lT(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,PY)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var yv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(yv||(yv={}));function uT(e,t){var n=e.get(t)||0;e.set(t,n+1)}function sT(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function c2(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+yv.EDGE_KEY_DELIM+s+yv.EDGE_KEY_DELIM+(o===void 0?yv.DEFAULT_EDGE_NAME:o)}function cT(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return o!==void 0&&(c.name=o),c}function R1(e,t){return c2(e,t.v,t.w,t.name)}function fT(e){return typeof e=="function"}var RY=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},DY=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},CY=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:RY(t),edges:DY(t),value:t.graph()};return n.value===void 0&&delete n.value,n},jY=function(t){var n=new $v(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function pT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(o){IY(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function IY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function FY(e,t,n){return t&&hT(e.prototype,t),n&&hT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var $Y={compound:!1,multigraph:!1,directed:!0},$v=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};LY(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=yv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return fT(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var p=s===void 0?t.GRAPH_NODE:s,g=t.parent(p);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,p);var b=t.childrenMap.get(p);return b.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(p,b),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,p=new e({directed:s,multigraph:c,compound:v});if(p.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&p.setNode(b,t.node(b))}),t.edges().forEach(function(b){p.hasNode(b.v)&&p.hasNode(b.w)&&p.setEdgeObj(b,t.edge(b))}),v){var g=function(_){for(var E=t.parent(_);E!==void 0&&!p.hasNode(E);)E=t.parent(E);return E};p.nodes().forEach(function(b){p.setParent(b,g(b))})}return p},this.setDefaultEdgeLabel=function(r){return fT(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(R1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(R1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return CY(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=pT(pT({},$Y),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return FY(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,p=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,_=this.predecessorsMap,E=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var x;v==null||v.set(n,this.GRAPH_NODE),p==null||p.set(n,new Map),p!=null&&p.has(this.GRAPH_NODE)||p==null||p.set(this.GRAPH_NODE,new Map),p==null||(x=p.get(this.GRAPH_NODE))===null||x===void 0||x.set(n,!0)}return[g,b,_,E].forEach(function(P){return P.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(M){o.removeEdge(M.v,M.w,M.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,p=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,_,E;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(_=this.children(n))===null||_===void 0||_.forEach(function(A){return o.setParent(A)}),(E=this.childrenMap)===null||E===void 0||E.delete(n)}var x=s.get(n),P=c.get(n);Array.from(x.values()).forEach(function(A){return r(A)}),Array.from(P.values()).forEach(function(A){return r(A)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),p.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,v,p=cT(this.isDirected(),n,o,s),g=R1(this.isDirected(),p),b=p.v,_=p.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(_),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,_,s)),Object.freeze(p),this.edgesMap.set(g,p);var E=this.predecessorsMap.get(_),x=this.successorsMap.get(b);return uT(E,b),uT(x,_),(c=this.inEdgesMap.get(_))===null||c===void 0||c.set(g,p),(v=this.outEdgesMap.get(b))===null||v===void 0||v.set(g,p),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=c2(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var v=cT(this.isDirected(),n,o,r),p=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var b=this.predecessorsMap.get(g),_=this.successorsMap.get(p);sT(b,p),sT(_,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(p).delete(s),this.edgeCountNum-=1}return this}}]),e}();$v.fromJSON=jY;function vT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function BY(e,t,n){return t&&vT(e.prototype,t),n&&vT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f2=BY(function e(){var t=this;UY(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],v=c[0],p=c[1];r[n]=p,r[o]=v,s.set(v.key,o),s.set(p.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=o[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),VY=function(t,n){var o=new $v,r=new Map,s=new f2,c;function v(b){var _=b.v===c?b.w:b.v,E=s.priority(_);if(E!==void 0){var x=n(b);x<E&&(r.set(_,c),s.decrease(_,x))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(b){s.add(b,Number.POSITIVE_INFINITY),o.setNode(b)}),s.decrease(t.nodes()[0],0);for(var p=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(p)throw new Error("Input graph is not connected: "+t.graph());p=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return o},GY=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var p=v.pop();if(!n.has(p)){var g,b;n.add(p),c.push(p),(g=t.successors(p))===null||g===void 0||g.forEach(function(_){return v.push(_)}),(b=t.predecessors(p))===null||b===void 0||b.forEach(function(_){return v.push(_)})}}c.length&&o.push(c)}),o},WY=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(v){return e(t,v,o,r,s,c)}),o&&c.push(n))},EE=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(p){if(t.hasNode(p))WY(t,p,o==="post",v,s,c);else throw new Error("Graph does not have node: "+p)}),c};function zY(e,t){return YY(e)||qY(e,t)||XY(e,t)||HY()}function HY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XY(e,t){if(e){if(typeof e=="string")return yT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yT(e,t)}}function yT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(p){s=!0,v=p}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return o}}function YY(e){if(Array.isArray(e))return e}var KY=function(){return 1},d2=function(t,n,o,r){return ZY(t,n,o||KY,r||function(s){return t.outEdges(s)})},ZY=function(t,n,o,r){var s=new Map,c=new f2,v,p,g=function(E){var x=E.v!==v?E.v:E.w,P=s.get(x),A=o(E),M=p.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+E+" Weight: "+A);M<P.distance&&(P.distance=M,P.predecessor=v,c.decrease(x,M))};for(t.nodes().forEach(function(_){var E=_===n?0:Number.POSITIVE_INFINITY;s.set(_,{distance:E}),c.add(_,E)});c.size()>0&&(v=c.removeMin(),p=s.get(v),!(p&&p.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var b={};return Array.from(s.entries()).forEach(function(_){var E=zY(_,2),x=E[0],P=E[1];return b[String(x)]=P,b}),b},JY=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=d2(t,s,n,o),r}),r},p2=function(t){var n=0,o=[],r=new Map,s=[];function c(v){var p,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,o.push(v),(p=t.successors(v))===null||p===void 0||p.forEach(function(x){var P;if(r.has(x)){if(!((P=r.get(x))===null||P===void 0)&&P.onStack){var M=r.get(x);g.lowlink=Math.min(g.lowlink,M.index)}}else{c(x);var A=r.get(x);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var b=[],_;do{_=o.pop();var E=r.get(_);E.onStack=!1,b.push(_)}while(v!==_);s.push(b)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},QY=function(t){return p2(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function mw(e){"@babel/helpers - typeof";return mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mw(e)}function mT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function eK(e,t,n){return t&&mT(e.prototype,t),n&&mT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cy(e,t)}function rK(e){var t=h2();return function(){var o=jy(e),r;if(t){var s=jy(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return oK(this,r)}}function oK(e,t){if(t&&(mw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iK(e)}function iK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gw(e){var t=typeof Map=="function"?new Map:void 0;return gw=function(o){if(o===null||!aK(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return xg(o,arguments,jy(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Cy(r,o)},gw(e)}function xg(e,t,n){return h2()?xg=Reflect.construct:xg=function(r,s,c){var v=[null];v.push.apply(v,s);var p=Function.bind.apply(r,v),g=new p;return c&&Cy(g,c.prototype),g},xg.apply(null,arguments)}function h2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aK(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Cy(e,t){return Cy=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Cy(e,t)}function jy(e){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(e)}var bw=function(e){nK(n,e);var t=rK(n);function n(){return tK(this,n),t.apply(this,arguments)}return eK(n)}(gw(Error));function v2(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new bw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new bw;return o}var lK=function(t){try{v2(t)}catch(n){if(n instanceof bw)return!1;throw n}return!0},uK=function(t,n){return EE(t,n,"post")},sK=function(t,n){return EE(t,n,"pre")},cK=function(){return 1};function fK(e,t,n){return dK(e,t||cK,n||function(o){return e.outEdges(o)})}function dK(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(v){s!==v&&(o[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var p=v.v===s?v.w:v.v,g=t(v);o[c][String(p)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=o[c];r.forEach(function(p){var g=String(p),b=o[g];r.forEach(function(_){var E=String(_),x=b[c],P=v[E],A=b[E],M=x.distance+P.distance;M<A.distance&&(A.distance=M,A.predecessor=P.predecessor)})})}),o}const pK=Object.freeze(Object.defineProperty({__proto__:null,components:GY,dfs:EE,dijkstra:d2,dijkstraAll:JY,findCycles:QY,floydWarshall:fK,isAcyclic:lK,postorder:uK,preorder:sK,prim:VY,tarjan:p2,topsort:v2},Symbol.toStringTag,{value:"Module"}));class hK extends NY{}class vK extends $v{}const yK=()=>1,mK=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=bK(e,t||yK);return(n=gK(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},gK=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)D1(e,t,n,c);for(;c=r.dequeue();)D1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){o=o.concat(D1(e,t,n,c,!0));break}}}return o},D1=(e,t,n,o,r)=>{var s,c;const v=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(p=>{const g=e.edge(p),b=e.node(p.v);r&&v.push({v:p.v,w:p.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,_w(t,n,b)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(p=>{const g=e.edge(p),b=p.w,_=e.node(b);_.in===void 0&&(_.in=0),_.in-=g,_w(t,n,_)}),e.removeNode(o.v),r?v:void 0},bK=(e,t)=>{const n=new vK;let o=0,r=0;e.nodes().forEach(p=>{n.setNode(p,{v:p,in:0,out:0})}),e.edges().forEach(p=>{const g=n.edge(p)||0,b=(t==null?void 0:t(p))||1,_=g+b;n.setEdge(p.v,p.w,_),r=Math.max(r,n.node(p.v).out+=b),o=Math.max(o,n.node(p.w).in+=b)});const s=[],c=r+o+3;for(let p=0;p<c;p++)s.push(new hK);const v=o+1;return n.nodes().forEach(p=>{_w(s,v,n.node(p))}),{buckets:s,zeroIdx:v,graph:n}},_w=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},_K=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?mK(e,t(e)):wK(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},wK=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},EK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},gT={run:_K,undo:EK};class Pf extends $v{}const OK=(e,t)=>Number(e)-Number(t),Bv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},xK=e=>{const t=new Pf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},y2=e=>{const t=new Pf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},SK=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),bT=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let p,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),p=v*r/s,g=v):(r<0&&(c=-c),p=c,g=c*s/r),{x:n+p,y:o+g}},Iy=e=>{const t=[],n=m2(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,v;return OK((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},AK=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},TK=e=>{const t=e.nodes(),n=t.filter(v=>{var p;return((p=e.node(v))===null||p===void 0?void 0:p.rank)!==void 0}).map(v=>e.node(v).rank),o=Math.min(...n),r=[];t.forEach(v=>{var p;const g=(((p=e.node(v))===null||p===void 0?void 0:p.rank)||0)-o;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const p=r[v];p===void 0?v%c!==0&&(s-=1):s&&(p==null||p.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=s)}))}},_T=(e,t,n,o)=>{const r={width:0,height:0};return Yg(n)&&Yg(o)&&(r.rank=n,r.order=o),Bv(e,"border",r,t)},m2=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},MK=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},g2=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},b2=(e,t)=>t(),OE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),kK=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>PK(e,t))},PK=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),p=v.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const g=e.graph();let b,_,E;for(E=0,++o;o<s;++E,++o)v.points=[],_={edgeLabel:v,width:0,height:0,edgeObj:t,rank:o},b=Bv(e,"edge",_,"_d"),o===p&&(_.width=v.width,_.height=v.height,_.dummy="edge-label",_.labelpos=v.labelpos),e.setEdge(n,b,{weight:v.weight},c),E===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:v.weight},c)},NK=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},wT={run:kK,undo:NK},_2=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(p=>{const g=o(p.w),b=e.edge(p).minlen,_=g-b;_&&(v===void 0||_<v)&&(v=_)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},RK=e=>{var t;const n={};let o;const r=v=>{var p;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let b;return(p=e.outEdges(v))===null||p===void 0||p.forEach(_=>{const E=r(_.w),x=e.edge(_).minlen,P=E-x;P&&(b===void 0||P<b)&&(b=P)}),b||(b=0),(o===void 0||b<o)&&(o=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),o===void 0&&(o=0);const s={},c=(v,p)=>{var g;const b=e.node(v),_=isNaN(b.layer)?p:b.layer;(b.rank===void 0||b.rank<_)&&(b.rank=_),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(E=>{c(E.w,_+e.edge(E).minlen)}))};e.nodes().forEach(v=>{const p=e.node(v);p&&(isNaN(p.layer)?p.rank-=o:c(v,p.layer))})},Fd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,DK=e=>{const t=new Pf({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;CK(t,e)<o;)r=w2(t,e),s=t.hasNode(r.v)?Fd(e,r):-Fd(e,r),E2(t,e,s);return t},CK=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!Fd(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},jK=e=>{const t=new Pf({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;IK(t,e)<o;)r=w2(t,e),s=t.hasNode(r.v)?Fd(e,r):-Fd(e,r),E2(t,e,s);return t},IK=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,v=o===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Fd(t,s))&&(e.setNode(v,{}),e.setEdge(o,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},w2=(e,t)=>OE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Fd(t,n):1/0),E2=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:LK,postorder:FK}=pK,$K=e=>{const t=xK(e);_2(t);const n=DK(t);x2(n),O2(n,t);let o,r;for(;o=VK(n);)r=GK(n,t,o),WK(n,t,o,r)},O2=(e,t)=>{let n=FK(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{BK(e,t,o)})},BK=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=UK(e,t,n)},UK=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),p=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),p=v.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(g=>{const b=g.v===n,_=b?g.w:g.v;if(_!==s){const E=b===c,x=t.edge(g).weight;if(p+=E?x:-x,HK(e,n,_)){const P=e.edgeFromArgs(n,_).cutvalue;p+=E?-P:P}}}),p},x2=(e,t=e.nodes()[0])=>{S2(e,{},1,t)},S2=(e,t,n,o,r)=>{var s;const c=n;let v=n;const p=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(g=>{t[g]||(v=S2(e,t,v,g,o))}),p.low=c,p.lim=v++,r?p.parent=r:delete p.parent,v},VK=e=>e.edges().find(t=>e.edge(t).cutvalue<0),GK=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let v=s,p=!1;s.lim>c.lim&&(v=c,p=!0);const g=t.edges().filter(b=>p===ET(e,e.node(b.v),v)&&p!==ET(e,e.node(b.w),v));return OE(g,b=>Fd(t,b))},WK=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),x2(e),O2(e,t),zK(e,t)},zK=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=LK(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},HK=(e,t,n)=>e.hasEdge(t,n),ET=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,XK=e=>{switch(e.graph().ranker){case"network-simplex":YK(e);break;case"tight-tree":OT(e);break;case"longest-path":qK(e);break;default:OT(e)}},qK=_2,OT=e=>{RK(e),jK(e)},YK=e=>{$K(e)},KK=e=>{var t;const n={};let o=0;const r=s=>{var c;const v=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},ZK=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),v=Math.max(t[n].lim,t[o].lim);let p,g;p=n;do p=e.parent(p),r.push(p);while(p&&(t[p].low>c||v>t[p].lim));for(g=p,p=o;p&&p!==g;)s.push(p),p=e.parent(p);return{lca:g,path:r.concat(s.reverse())}},JK=e=>{var t;const n=KK(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,v=e.node(c);const p=v.edgeObj;if(!p)return;const g=ZK(e,n,p.v,p.w),b=g.path,_=g.lca;let E=0,x=b[E],P=!0;for(;c!==p.w;){if(v=e.node(c),P){for(;x!==_&&((r=e.node(x))===null||r===void 0?void 0:r.maxRank)<v.rank;)E++,x=b[E];x===_&&(P=!1)}if(!P){for(;E<b.length-1&&((s=e.node(b[E+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)E++;x=b[E]}e.setParent(c,x),c=e.successors(c)[0]}})},QK=e=>{var t;const n=Bv(e,"root",{},"_root"),o=eZ(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(p=>{e.edge(p).minlen*=c});const v=tZ(e)+1;(t=e.children())===null||t===void 0||t.forEach(p=>{A2(e,n,c,v,s,o,p)}),e.graph().nodeRankFactor=c},A2=(e,t,n,o,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const p=_T(e,"_bt"),g=_T(e,"_bb"),b=e.node(c);e.setParent(p,c),b.borderTop=p,e.setParent(g,c),b.borderBottom=g,v==null||v.forEach(_=>{A2(e,t,n,o,r,s,_);const E=e.node(_),x=E.borderTop?E.borderTop:_,P=E.borderBottom?E.borderBottom:_,A=E.borderTop?o:2*o,M=x!==P?1:r-s[c]+1;e.setEdge(p,x,{minlen:M,weight:A,nestingEdge:!0}),e.setEdge(P,g,{minlen:M,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,p,{weight:0,minlen:r+s[c]})},eZ=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>o(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},tZ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},nZ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},xT={run:QK,cleanup:nZ},rZ=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)ST(e,"borderLeft","_bl",o,s,c),ST(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},ST=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],p=Bv(e,"border",c,n);r[t][s]=p,e.setParent(p,o),v&&e.setEdge(v,p,{weight:1})},oZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&T2(e)},iZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&aZ(e),(n==="lr"||n==="rl")&&(lZ(e),T2(e))},T2=e=>{e.nodes().forEach(t=>{AT(e.node(t))}),e.edges().forEach(t=>{AT(e.edge(t))})},AT=e=>{const t=e.width;e.width=e.height,e.height=t},aZ=e=>{e.nodes().forEach(t=>{C1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>C1(r)),o.hasOwnProperty("y")&&C1(o)})},C1=e=>{e!=null&&e.y&&(e.y=-e.y)},lZ=e=>{e.nodes().forEach(t=>{j1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>j1(r)),o.hasOwnProperty("x")&&j1(o)})},j1=e=>{const t=e.x;e.x=e.y,e.y=t},TT={adjust:oZ,undo:iZ};function uZ(e){return Array.isArray(e)}function ww(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const MT=function(e){if(uZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},kT=e=>{const t={},n=e.nodes().filter(b=>{var _;return!(!((_=e.children(b))===null||_===void 0)&&_.length)}),o=n.map(b=>e.node(b).rank),r=ww(o),s=[];for(let b=0;b<r+1;b++)s.push([]);const c=b=>{var _;if(t.hasOwnProperty(b))return;t[b]=!0;const E=e.node(b);isNaN(E.rank)||s[E.rank].push(b),(_=e.successors(b))===null||_===void 0||_.forEach(x=>c(x))},v=n.sort((b,_)=>e.node(b).rank-e.node(_).rank),g=v.filter(b=>e.node(b).fixorder!==void 0).sort((b,_)=>e.node(b).fixorder-e.node(_).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||s[e.node(b).rank].push(b),t[b]=!0}),v==null||v.forEach(c),s},sZ=(e,t,n)=>{const o=SK(n,n.map((b,_)=>_)),s=t.map(b=>{var _;const E=(_=e.outEdges(b))===null||_===void 0?void 0:_.map(x=>({pos:o[x.w]||0,weight:e.edge(x).weight}));return E==null?void 0:E.sort((x,P)=>x.pos-P.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const p=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(b=>{if(b){let _=b.pos+c;p[_]+=b.weight;let E=0;for(;_>0;)_%2&&(E+=p[_+1]),_=_-1>>1,p[_]+=b.weight;g+=b.weight*E}}),g},PT=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=sZ(e,t[o-1],t[o]);return n},cZ=(e,t,n)=>{const o=fZ(e),r=new Pf({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),p=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,p||o),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const b=g.v===s?g.w:g.v,_=r.edgeFromArgs(b,s),E=_!==void 0?_.weight:0;r.setEdge(b,s,{weight:e.edge(g).weight+E})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},fZ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},dZ=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,p;for(;c;){if(v=e.parent(c),v?(p=o[v],o[v]=c):(p=r,r=c),p&&p!==c){t.setEdge(p,c);return}c=v}})},pZ=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),hZ=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((v,p)=>{s[v.v]={i:p,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const p=s[v.v],g=s[v.w];p!==void 0&&g!==void 0&&(g.indegree++,p.out.push(s[v.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,v=>!v.indegree);return vZ(c)},vZ=e=>{var t,n;const o=[],r=p=>g=>{g.merged||(g.barycenter===void 0||p.barycenter===void 0||g.barycenter>=p.barycenter)&&yZ(p,g)},s=p=>g=>{g.in.push(p),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const p=e.pop();o.push(p),(t=p.in.reverse())===null||t===void 0||t.forEach(g=>r(p)(g)),(n=p.out)===null||n===void 0||n.forEach(g=>s(p)(g))}const c=o.filter(p=>!p.merged),v=["vs","i","barycenter","weight"];return c.map(p=>{const g={};return v==null||v.forEach(b=>{p[b]!==void 0&&(g[b]=p[b])}),g})},yZ=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},mZ=(e,t,n,o)=>{const r=MK(e,E=>{const x=E.hasOwnProperty("fixorder")&&!isNaN(E.fixorder);return o?!x&&E.hasOwnProperty("barycenter"):x||E.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((E,x)=>-E.i- -x.i),v=[];let p=0,g=0,b=0;s==null||s.sort(gZ(!!t,!!n)),b=NT(v,c,b),s==null||s.forEach(E=>{var x;b+=(x=E.vs)===null||x===void 0?void 0:x.length,v.push(E.vs),p+=E.barycenter*E.weight,g+=E.weight,b=NT(v,c,b)});const _={vs:v.flat()};return g&&(_.barycenter=p/g,_.weight=g),_},NT=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},gZ=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},M2=(e,t,n,o,r,s)=>{var c,v,p,g;let b=e.children(t);const _=e.node(t),E=_?_.borderLeft:void 0,x=_?_.borderRight:void 0,P={};E&&(b=b==null?void 0:b.filter(D=>D!==E&&D!==x));const A=pZ(e,b||[]);A==null||A.forEach(D=>{var $;if(!(($=e.children(D.v))===null||$===void 0)&&$.length){const G=M2(e,D.v,n,o,s);P[D.v]=G,G.hasOwnProperty("barycenter")&&_Z(D,G)}});const M=hZ(A,n);bZ(M,P),(c=M.filter(D=>D.vs.length>0))===null||c===void 0||c.forEach(D=>{const $=e.node(D.vs[0]);$&&(D.fixorder=$.fixorder,D.order=$.order)});const I=mZ(M,o,r,s);if(E&&(I.vs=[E,I.vs,x].flat(),!((v=e.predecessors(E))===null||v===void 0)&&v.length)){const D=e.node(((p=e.predecessors(E))===null||p===void 0?void 0:p[0])||""),$=e.node(((g=e.predecessors(x))===null||g===void 0?void 0:g[0])||"");I.hasOwnProperty("barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+D.order+$.order)/(I.weight+2),I.weight+=2}return I},bZ=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},_Z=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},wZ=(e,t)=>{const n=m2(e),o=[],r=[];for(let b=1;b<n+1;b++)o.push(b);for(let b=n-1;b>-1;b--)r.push(b);const s=RT(e,o,"inEdges"),c=RT(e,r,"outEdges");let v=kT(e);I1(e,v);let p=Number.POSITIVE_INFINITY,g;for(let b=0,_=0;_<4;++b,++_){DT(b%2?s:c,b%4>=2,!1,t),v=Iy(e);const E=PT(e,v);E<p&&(_=0,g=Kg(v),p=E)}v=kT(e),I1(e,v);for(let b=0,_=0;_<4;++b,++_){DT(b%2?s:c,b%4>=2,!0,t),v=Iy(e);const E=PT(e,v);E<p&&(_=0,g=Kg(v),p=E)}I1(e,g)},RT=(e,t,n)=>t.map(o=>cZ(e,o,n)),DT=(e,t,n,o)=>{const r=new Pf;e==null||e.forEach(s=>{var c;const v=s.graph().root,p=M2(s,v,r,t,n,o);for(let g=0;g<((c=p.vs)===null||c===void 0?void 0:c.length);g++){const b=s.node(p.vs[g]);b&&(b.order=g)}dZ(s,r,p.vs)})},I1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class EZ extends $v{}const OZ=(e,t)=>{const n={},o=(r,s)=>{let c=0,v=0;const p=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((b,_)=>{var E;const x=SZ(e,b),P=x?e.node(x).order:p;(x||b===g)&&((E=s.slice(v,_+1))===null||E===void 0||E.forEach(A=>{var M;(M=e.predecessors(A))===null||M===void 0||M.forEach(I=>{var D;const $=e.node(I),G=$.order;(G<c||P<G)&&!($.dummy&&(!((D=e.node(A))===null||D===void 0)&&D.dummy))&&k2(n,I,A)})}),v=_+1,c=P)}),s};return t!=null&&t.length&&t.reduce(o),n},xZ=(e,t)=>{const n={};function o(v,p,g,b,_){var E,x;let P;for(let A=p;A<g;A++)P=v[A],!((E=e.node(P))===null||E===void 0)&&E.dummy&&((x=e.predecessors(P))===null||x===void 0||x.forEach(M=>{const I=e.node(M);I.dummy&&(I.order<b||I.order>_)&&k2(n,M,P)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,p){const g=r(v);p.get(g)||(o(...v),p.set(g,!0))}const c=(v,p)=>{let g=-1,b,_=0;const E=new Map;return p==null||p.forEach((x,P)=>{var A;if(((A=e.node(x))===null||A===void 0?void 0:A.dummy)==="border"){const M=e.predecessors(x)||[];M.length&&(b=e.node(M[0]).order,s([p,_,P,g,b],E),_=P,g=b)}s([p,_,p.length,b,v.length],E)}),p};return t!=null&&t.length&&t.reduce(c),n},SZ=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},k2=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},AZ=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},TZ=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((p,g)=>{r[p]=p,s[p]=p,c[p]=g})}),t==null||t.forEach(v=>{let p=-1;v==null||v.forEach(g=>{let b=o(g);if(b.length){b=b.sort((E,x)=>c[E]-c[x]);const _=(b.length-1)/2;for(let E=Math.floor(_),x=Math.ceil(_);E<=x;++E){const P=b[E];s[g]===g&&p<c[P]&&!AZ(n,g,P)&&(s[P]=g,s[g]=r[g]=r[P],p=c[P])}}})}),{root:r,align:s}},MZ=(e,t,n,o,r)=>{var s;const c={},v=kZ(e,t,n,r),p=r?"borderLeft":"borderRight",g=(E,x)=>{let P=v.nodes(),A=P.pop();const M={};for(;A;)M[A]?E(A):(M[A]=!0,P.push(A),P=P.concat(x(A))),A=P.pop()},b=E=>{c[E]=(v.inEdges(E)||[]).reduce((x,P)=>Math.max(x,(c[P.v]||0)+v.edge(P)),0)},_=E=>{const x=(v.outEdges(E)||[]).reduce((A,M)=>Math.min(A,(c[M.w]||0)-v.edge(M)),Number.POSITIVE_INFINITY),P=e.node(E);x!==Number.POSITIVE_INFINITY&&P.borderType!==p&&(c[E]=Math.max(c[E],x))};return g(b,v.predecessors.bind(v)),g(_,v.successors.bind(v)),(s=Object.values(o))===null||s===void 0||s.forEach(E=>{c[E]=c[n[E]]}),c},kZ=(e,t,n,o)=>{const r=new EZ,s=e.graph(),c=DZ(s.nodesep,s.edgesep,o);return t==null||t.forEach(v=>{let p;v==null||v.forEach(g=>{const b=n[g];if(r.setNode(b),p){const _=n[p],E=r.edgeFromArgs(_,b);r.setEdge(_,b,Math.max(c(e,g,p),E||0))}p=g})}),r},PZ=(e,t)=>OE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const v=n[c],p=CZ(e,c)/2;r=Math.max(v+p,r),s=Math.min(v-p,s)}),r-s});function NZ(e,t){const n=Object.values(t),o=MT(n),r=ww(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,p=e[v];let g;if(p===t)return;const b=Object.values(p);g=c==="l"?o-MT(b):r-ww(b),g&&(e[v]={},Object.keys(p).forEach(_=>{e[v][_]=p[_]+g}))})})}const RZ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},DZ=(e,t,n)=>(o,r,s)=>{const c=o.node(r),v=o.node(s);let p=0,g;if(p+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(p+=n?g:-g),g=0,p+=(c.dummy?t:e)/2,p+=(v.dummy?t:e)/2,p+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(p+=n?g:-g),g=0,p},CZ=(e,t)=>e.node(t).width||0,jZ=e=>{const t=Iy(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=o+c/2}),o+=c+n})},IZ=e=>{const t=Iy(e),n=Object.assign(OZ(e,t),xZ(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(_=>Object.values(_).reverse()));const p=(c==="u"?e.predecessors:e.successors).bind(e),g=TZ(e,r,n,p),b=MZ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(b).forEach(_=>b[_]=-b[_]),o[c+v]=b})});const s=PZ(e,o);return s&&NZ(o,s),RZ(o,e.graph().align)},LZ=e=>{var t;const n=y2(e);jZ(n);const o=IZ(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},FZ=(e,t)=>{const o=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},$Z=(e,t)=>{const n=t&&t.debugTiming?g2:b2;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{UZ(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>YZ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{KZ(o)});try{n("  runLayout",()=>{BZ(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{VZ(e,o)})})},BZ=(e,t,n)=>{t("    removeSelfEdges",()=>{iJ(e)}),t("    acyclic",()=>{gT.run(e)}),t("    nestingGraph.run",()=>{xT.run(e)}),t("    rank",()=>{XK(y2(e))}),t("    injectEdgeLabelProxies",()=>{ZZ(e)}),t("    removeEmptyRanks",()=>{TK(e)}),t("    nestingGraph.cleanup",()=>{xT.cleanup(e)}),t("    normalizeRanks",()=>{AK(e)}),t("    assignRankMinMax",()=>{JZ(e)}),t("    removeEdgeLabelProxies",()=>{QZ(e)}),t("    normalize.run",()=>{wT.run(e)}),t("    parentDummyChains",()=>{JK(e)}),t("    addBorderSegments",()=>{rZ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{FZ(e,n.nodeOrder)}),t("    order",()=>{wZ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{aJ(e)}),t("    adjustCoordinateSystem",()=>{TT.adjust(e)}),t("    position",()=>{LZ(e)}),t("    positionSelfEdges",()=>{lJ(e)}),t("    removeBorderNodes",()=>{oJ(e)}),t("    normalize.undo",()=>{wT.undo(e)}),t("    fixupEdgeLabelCoords",()=>{nJ(e)}),t("    undoCoordinateSystem",()=>{TT.undo(e)}),t("    translateGraph",()=>{eJ(e)}),t("    assignNodeIntersects",()=>{tJ(e)}),t("    reversePoints",()=>{rJ(e)}),t("    acyclic.undo",()=>{gT.undo(e)})},UZ=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},VZ=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},GZ=["nodesep","edgesep","ranksep","marginx","marginy"],WZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},L1=["acyclicer","ranker","rankdir","align"],zZ=["width","height","layer","fixorder"],HZ={width:0,height:0},XZ=["minlen","weight","width","height","labeloffset"],qZ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},F1=["labelpos"],YZ=e=>{const t=new Pf({multigraph:!0,compound:!0}),n=B1(e.graph()),o={};return L1==null||L1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},WZ,$1(n,GZ),o)),e.nodes().forEach(r=>{const s=B1(e.node(r)),c=Object.assign(Object.assign({},HZ),s),v=$1(c,zZ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=B1(e.edge(r)),c={};F1==null||F1.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},qZ,$1(s,XZ),c))}),t},KZ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},ZZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Bv(e,"edge-proxy",s,"_ep")}})},JZ=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},QZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},eJ=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,p=g=>{if(!g)return;const b=g.x,_=g.y,E=g.width,x=g.height;!isNaN(b)&&!isNaN(E)&&(t===void 0&&(t=b-E/2),t=Math.min(t,b-E/2),n=Math.max(n,b+E/2)),!isNaN(_)&&!isNaN(x)&&(o===void 0&&(o=_-x/2),o=Math.min(o,_-x/2),r=Math.max(r,_+x/2))};e.nodes().forEach(g=>{p(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&p(b)}),t-=c,o-=v,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=o)}),e.edges().forEach(g=>{var b;const _=e.edge(g);(b=_.points)===null||b===void 0||b.forEach(E=>{E.x-=t,E.y-=o}),_.hasOwnProperty("x")&&(_.x-=t),_.hasOwnProperty("y")&&(_.y-=o)}),s.width=n-t+c,s.height=r-o+v},tJ=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(bT(o,s)),n.points.push(bT(r,c))})},nJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},rJ=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},oJ=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),p=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(p==null?void 0:p.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((p==null?void 0:p.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},iJ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},aJ=e=>{const t=Iy(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+o,(c=v.selfEdges)===null||c===void 0||c.forEach(p=>{Bv(e,"selfedge",{width:p.label.width,height:p.label.height,rank:v.rank,order:s+ ++o,e:p.e,label:p.label},"_se")}),delete v.selfEdges})})},lJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,v=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},$1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},B1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},uJ={layout:$Z,util:{time:g2,notime:b2}};class sJ extends MY{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:v,rankdir:p,combos:g,begin:b,radial:_,comboEdges:E=[],vedges:x=[]}=s;if(!c)return;const P=s.edges||[],A=new Pf({multigraph:!0,compound:!0});s.nodeMap={};const M={};c.forEach(Y=>{s.nodeMap[Y.id]=Y,Y.comboId&&(M[Y.comboId]=M[Y.comboId]||[],M[Y.comboId].push(Y.id))});let I=[];const D={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(Y=>{D[Y]=!0,I.push(s.nodeMap[Y])}),c.forEach(Y=>{D[Y.id]||I.push(Y)})):I=c;let $;v?iT(v)?$=()=>v:$=()=>[v,v]:$=Y=>Y.size?iT(Y.size)?Y.size:s2(Y.size)?[Y.size.width||40,Y.size.height||40]:[Y.size,Y.size]:[40,40];const G=aT(s.ranksep,50,s.ranksepFunc),W=aT(s.nodesep,50,s.nodesepFunc);let X=W,J=G;(p==="LR"||p==="RL")&&(X=G,J=W),A.setDefaultEdgeLabel(()=>({})),A.setGraph(s);const z={};this.sortByCombo&&g&&g.forEach(Y=>{if(z[Y.id]=Y,Y.collapsed){const ce=$(Y),Ne=J(Y),_e=X(Y),Oe=ce[0]+2*_e,ke=ce[1]+2*Ne;A.setNode(Y.id,{width:Oe,height:ke})}Y.parentId&&(z[Y.parentId]||A.setNode(Y.parentId,{}),A.setParent(Y.id,Y.parentId))}),I.filter(Y=>Y.layout!==!1).forEach(Y=>{const ce=$(Y),Ne=J(Y),_e=X(Y),Oe=ce[0]+2*_e,ke=ce[1]+2*Ne,Re=Y.layer;Yg(Re)?A.setNode(Y.id,{width:Oe,height:ke,layer:Re}):A.setNode(Y.id,{width:Oe,height:ke}),this.sortByCombo&&Y.comboId&&(z[Y.comboId]||(z[Y.comboId]={id:Y.comboId},A.setNode(Y.comboId,{})),A.setParent(Y.id,Y.comboId))}),P.forEach(Y=>{const ce=nv(Y,"source"),Ne=nv(Y,"target");this.layoutNode(ce)&&this.layoutNode(Ne)&&A.setEdge(ce,Ne,{weight:Y.weight||1})}),(n=E==null?void 0:E.concat(x||[]))===null||n===void 0||n.forEach(Y=>{var ce,Ne;const{source:_e,target:Oe}=Y,ke=!((ce=z[_e])===null||ce===void 0)&&ce.collapsed?[_e]:M[_e]||[_e],Re=!((Ne=z[Oe])===null||Ne===void 0)&&Ne.collapsed?[Oe]:M[Oe]||[Oe];ke.forEach(ue=>{Re.forEach(ve=>{A.setEdge(ue,ve,{weight:Y.weight||1})})})});let L;!((o=s.preset)===null||o===void 0)&&o.nodes&&(L=new Pf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(Y=>{L==null||L.setNode(Y.id,Y)})),uJ.layout(A,{prevGraph:L,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const H=[0,0];if(b){let Y=1/0,ce=1/0;A.nodes().forEach(Ne=>{const _e=A.node(Ne);Y>_e.x&&(Y=_e.x),ce>_e.y&&(ce=_e.y)}),A.edges().forEach(Ne=>{var _e;(_e=A.edge(Ne).points)===null||_e===void 0||_e.forEach(ke=>{Y>ke.x&&(Y=ke.x),ce>ke.y&&(ce=ke.y)})}),H[0]=b[0]-Y,H[1]=b[1]-ce}const K=p==="LR"||p==="RL";if(_){const{focusNode:Y,ranksep:ce,getRadialPos:Ne}=this,_e=kY(Y)?Y:Y==null?void 0:Y.id,Oe=_e?(r=A.node(_e))===null||r===void 0?void 0:r._rank:0,ke=[],Re=K?"y":"x",ue=K?"height":"width";let ve=1/0,Pe=-1/0;A.nodes().forEach(ge=>{const Ae=A.node(ge);if(!s.nodeMap[ge])return;const yt=W(s.nodeMap[ge]);if(Oe===0)ke[Ae._rank]||(ke[Ae._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ke[Ae._rank].nodes.push(ge),ke[Ae._rank].totalWidth+=yt*2+Ae[ue],ke[Ae._rank].maxSize<Math.max(Ae.width,Ae.height)&&(ke[Ae._rank].maxSize=Math.max(Ae.width,Ae.height));else{const rn=Ae._rank-Oe;if(rn===0)ke[rn]||(ke[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),ke[rn].nodes.push(ge),ke[rn].totalWidth+=yt*2+Ae[ue],ke[rn].maxSize<Math.max(Ae.width,Ae.height)&&(ke[rn].maxSize=Math.max(Ae.width,Ae.height));else{const mn=Math.abs(rn);ke[mn]||(ke[mn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ke[mn].totalWidth+=yt*2+Ae[ue],ke[mn].maxSize<Math.max(Ae.width,Ae.height)&&(ke[mn].maxSize=Math.max(Ae.width,Ae.height)),rn<0?ke[mn].left.push(ge):ke[mn].right.push(ge)}}const zt=Ae[Re]-Ae[ue]/2-yt,St=Ae[Re]+Ae[ue]/2+yt;zt<ve&&(ve=zt),St>Pe&&(Pe=St)});let Xe=ce||50;const ze={},Je=(Pe-ve)/.9,_t=[(ve+Pe-Je)*.5,(ve+Pe+Je)*.5],kt=(ge,Ae,yt=-1/0,zt=[0,1])=>{let St=yt;return ge.forEach(rn=>{const mn=A.node(rn);ze[rn]=Ae;const{x:Mn,y:hn}=Ne(mn[Re],_t,Je,Ae,zt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Mn+H[0],s.nodeMap[rn].y=hn+H[1],s.nodeMap[rn]._order=mn._order;const ft=G(s.nodeMap[rn]);St<ft&&(St=ft)}),St};let qt=!0;const Fe=0;ke.forEach(ge=>{var Ae,yt,zt,St,rn,mn,Mn;if(!(!((Ae=ge==null?void 0:ge.nodes)===null||Ae===void 0)&&Ae.length)&&!(!((yt=ge==null?void 0:ge.left)===null||yt===void 0)&&yt.length)&&!(!((zt=ge==null?void 0:ge.right)===null||zt===void 0)&&zt.length))return;if(qt&&ge.nodes.length===1){const ft=ge.nodes[0];if(!s.nodeMap[ft])return;s.nodeMap[ft].x=H[0],s.nodeMap[ft].y=H[1],ze[ge.nodes[0]]=0,Xe=G(s.nodeMap[ft]),qt=!1;return}Xe=Math.max(Xe,ge.totalWidth/(2*Math.PI));let hn=-1/0;if(Oe===0||!((St=ge.nodes)===null||St===void 0)&&St.length)hn=kt(ge.nodes,Xe,hn,[0,1]);else{const ft=((rn=ge.left)===null||rn===void 0?void 0:rn.length)/(((mn=ge.left)===null||mn===void 0?void 0:mn.length)+((Mn=ge.right)===null||Mn===void 0?void 0:Mn.length));hn=kt(ge.left,Xe,hn,[0,ft]),hn=kt(ge.right,Xe,hn,[ft+.05,1])}Xe+=hn,qt=!1,Fe-ge.maxSize}),A.edges().forEach(ge=>{var Ae,yt,zt;const St=A.edge(ge),rn=P.findIndex(mn=>{const Mn=nv(mn,"source"),hn=nv(mn,"target");return Mn===ge.v&&hn===ge.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[rn].type!=="loop"){const mn=Re==="x"?"y":"x",Mn=(Ae=St==null?void 0:St.points)===null||Ae===void 0?void 0:Ae.slice(1,St.points.length-1),hn=[],ft=(yt=A.node(ge.v))===null||yt===void 0?void 0:yt[mn],xn=ft-((zt=A.node(ge.w))===null||zt===void 0?void 0:zt[mn]),Ve=ze[ge.v],gn=Ve-ze[ge.w];Mn==null||Mn.forEach(Zn=>{const re=(Zn[mn]-ft)/xn*gn+Ve,Bn=Ne(Zn[Re],_t,Je,re);hn.push({x:Bn.x+H[0],y:Bn.y+H[1]})}),P[rn].controlPoints=hn}})}else{const Y=new Set,Ne=p==="BT"||p==="RL"?(Re,ue)=>ue-Re:(Re,ue)=>Re-ue;A.nodes().forEach(Re=>{const ue=A.node(Re);if(!ue)return;let ve=this.nodeMap[Re];ve||(ve=g==null?void 0:g.find(Pe=>Pe.id===Re)),ve&&(ve.x=ue.x+H[0],ve.y=ue.y+H[1],ve._order=ue._order,Y.add(K?ve.x:ve.y))});const _e=Array.from(Y).sort(Ne),Oe=K?(Re,ue)=>Re.x!==ue.x:(Re,ue)=>Re.y!==ue.y,ke=K?(Re,ue,ve)=>{const Pe=Math.max(ue.y,ve.y),Xe=Math.min(ue.y,ve.y);return Re.filter(ze=>ze.y<=Pe&&ze.y>=Xe)}:(Re,ue,ve)=>{const Pe=Math.max(ue.x,ve.x),Xe=Math.min(ue.x,ve.x);return Re.filter(ze=>ze.x<=Pe&&ze.x>=Xe)};A.edges().forEach(Re=>{var ue;const ve=A.edge(Re),Pe=P.findIndex(Xe=>{const ze=nv(Xe,"source"),Je=nv(Xe,"target");return ze===Re.v&&Je===Re.w});if(!(Pe<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[Pe].type!=="loop"){(ue=ve==null?void 0:ve.points)===null||ue===void 0||ue.forEach(Je=>{Je.x+=H[0],Je.y+=H[1]});const Xe=s.nodeMap[Re.v],ze=s.nodeMap[Re.w];P[Pe].controlPoints=cJ(ve==null?void 0:ve.points,Xe,ze,_e,K,Oe,ke)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:P}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const cJ=(e,t,n,o,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:p,y:g}=t,{x:b,y:_}=n;if(r&&(p=t.y,g=t.x,b=n.y,_=n.x),_!==g&&p!==b){const E=o.indexOf(g),x=o[E+1];if(x){const M=v[0],I=r?{x:(g+x)/2,y:(M==null?void 0:M.y)||b}:{x:(M==null?void 0:M.x)||b,y:(g+x)/2};(!M||s(M,I))&&v.unshift(I)}const P=o.indexOf(_),A=Math.abs(P-E);if(A===1)v=c(v,t,n),v.length||v.push(r?{x:(g+_)/2,y:p}:{x:p,y:(g+_)/2});else if(A>1){const M=o[P-1];if(M){const I=v[v.length-1],D=r?{x:(_+M)/2,y:(I==null?void 0:I.y)||b}:{x:(I==null?void 0:I.x)||p,y:(_+M)/2};(!I||s(I,D))&&v.push(D)}}}}return v};var CT,jT,IT,LT;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(CT||(CT={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jT||(jT={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IT||(IT={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LT||(LT={}));var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xE(e,t){return e(t={exports:{}},t.exports),t.exports}var fJ=function(){this.__data__=[],this.size=0},Uv=function(e,t){return e===t||e!=e&&t!=t},Eb=function(e,t){for(var n=e.length;n--;)if(Uv(e[n][0],t))return n;return-1},dJ=Array.prototype.splice,pJ=function(e){var t=this.__data__,n=Eb(t,e);return!(n<0)&&(n==t.length-1?t.pop():dJ.call(t,n,1),--this.size,!0)},hJ=function(e){var t=this.__data__,n=Eb(t,e);return n<0?void 0:t[n][1]},vJ=function(e){return Eb(this.__data__,e)>-1},yJ=function(e,t){var n=this.__data__,o=Eb(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function iv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}iv.prototype.clear=fJ,iv.prototype.delete=pJ,iv.prototype.get=hJ,iv.prototype.has=vJ,iv.prototype.set=yJ;var Ob=iv,mJ=function(){this.__data__=new Ob,this.size=0},gJ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},bJ=function(e){return this.__data__.get(e)},_J=function(e){return this.__data__.has(e)},P2=typeof fg=="object"&&fg&&fg.Object===Object&&fg,wJ=typeof self=="object"&&self&&self.Object===Object&&self,Os=P2||wJ||Function("return this")(),Uu=Os.Symbol,N2=Object.prototype,EJ=N2.hasOwnProperty,OJ=N2.toString,py=Uu?Uu.toStringTag:void 0,xJ=function(e){var t=EJ.call(e,py),n=e[py];try{e[py]=void 0;var o=!0}catch{}var r=OJ.call(e);return o&&(t?e[py]=n:delete e[py]),r},SJ=Object.prototype.toString,AJ=function(e){return SJ.call(e)},FT=Uu?Uu.toStringTag:void 0,Gd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":FT&&FT in Object(e)?xJ(e):AJ(e)},Nl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},$T,nm=function(e){if(!Nl(e))return!1;var t=Gd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},U1=Os["__core-js_shared__"],BT=($T=/[^.]+$/.exec(U1&&U1.keys&&U1.keys.IE_PROTO||""))?"Symbol(src)_1."+$T:"",TJ=function(e){return!!BT&&BT in e},MJ=Function.prototype.toString,nh=function(e){if(e!=null){try{return MJ.call(e)}catch{}try{return e+""}catch{}}return""},kJ=/^\[object .+?Constructor\]$/,PJ=Function.prototype,NJ=Object.prototype,RJ=PJ.toString,DJ=NJ.hasOwnProperty,CJ=RegExp("^"+RJ.call(DJ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jJ=function(e){return!(!Nl(e)||TJ(e))&&(nm(e)?CJ:kJ).test(nh(e))},IJ=function(e,t){return e==null?void 0:e[t]},rh=function(e,t){var n=IJ(e,t);return jJ(n)?n:void 0},Ly=rh(Os,"Map"),Fy=rh(Object,"create"),LJ=function(){this.__data__=Fy?Fy(null):{},this.size=0},FJ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$J=Object.prototype.hasOwnProperty,BJ=function(e){var t=this.__data__;if(Fy){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return $J.call(t,e)?t[e]:void 0},UJ=Object.prototype.hasOwnProperty,VJ=function(e){var t=this.__data__;return Fy?t[e]!==void 0:UJ.call(t,e)},GJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fy&&t===void 0?"__lodash_hash_undefined__":t,this};function av(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}av.prototype.clear=LJ,av.prototype.delete=FJ,av.prototype.get=BJ,av.prototype.has=VJ,av.prototype.set=GJ;var UT=av,WJ=function(){this.size=0,this.__data__={hash:new UT,map:new(Ly||Ob),string:new UT}},zJ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},xb=function(e,t){var n=e.__data__;return zJ(t)?n[typeof t=="string"?"string":"hash"]:n.map},HJ=function(e){var t=xb(this,e).delete(e);return this.size-=t?1:0,t},XJ=function(e){return xb(this,e).get(e)},qJ=function(e){return xb(this,e).has(e)},YJ=function(e,t){var n=xb(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function lv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}lv.prototype.clear=WJ,lv.prototype.delete=HJ,lv.prototype.get=XJ,lv.prototype.has=qJ,lv.prototype.set=YJ;var Sb=lv,KJ=function(e,t){var n=this.__data__;if(n instanceof Ob){var o=n.__data__;if(!Ly||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sb(o)}return n.set(e,t),this.size=n.size,this};function uv(e){var t=this.__data__=new Ob(e);this.size=t.size}uv.prototype.clear=mJ,uv.prototype.delete=gJ,uv.prototype.get=bJ,uv.prototype.has=_J,uv.prototype.set=KJ;var mv=uv,SE=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},Zg=function(){try{var e=rh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ab=function(e,t,n){t=="__proto__"&&Zg?Zg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ZJ=Object.prototype.hasOwnProperty,Tb=function(e,t,n){var o=e[t];ZJ.call(e,t)&&Uv(o,n)&&(n!==void 0||t in e)||Ab(e,t,n)},rm=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],p=o?o(n[v],e[v],v,n,e):void 0;p===void 0&&(p=e[v]),r?Ab(n,v,p):Tb(n,v,p)}return n},JJ=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},_s=function(e){return e!=null&&typeof e=="object"},VT=function(e){return _s(e)&&Gd(e)=="[object Arguments]"},R2=Object.prototype,QJ=R2.hasOwnProperty,eQ=R2.propertyIsEnumerable,Av=VT(function(){return arguments}())?VT:function(e){return _s(e)&&QJ.call(e,"callee")&&!eQ.call(e,"callee")},ki=Array.isArray,tQ=function(){return!1},Xp=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?Os.Buffer:void 0,s=(r?r.isBuffer:void 0)||tQ;e.exports=s}),nQ=/^(?:0|[1-9]\d*)$/,Mb=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&nQ.test(e))&&e>-1&&e%1==0&&e<t},AE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ai={};ai["[object Float32Array]"]=ai["[object Float64Array]"]=ai["[object Int8Array]"]=ai["[object Int16Array]"]=ai["[object Int32Array]"]=ai["[object Uint8Array]"]=ai["[object Uint8ClampedArray]"]=ai["[object Uint16Array]"]=ai["[object Uint32Array]"]=!0,ai["[object Arguments]"]=ai["[object Array]"]=ai["[object ArrayBuffer]"]=ai["[object Boolean]"]=ai["[object DataView]"]=ai["[object Date]"]=ai["[object Error]"]=ai["[object Function]"]=ai["[object Map]"]=ai["[object Number]"]=ai["[object Object]"]=ai["[object RegExp]"]=ai["[object Set]"]=ai["[object String]"]=ai["[object WeakMap]"]=!1;var rQ=function(e){return _s(e)&&AE(e.length)&&!!ai[Gd(e)]},kb=function(e){return function(t){return e(t)}},Tv=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&P2.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),GT=Tv&&Tv.isTypedArray,om=GT?kb(GT):rQ,oQ=Object.prototype.hasOwnProperty,D2=function(e,t){var n=ki(e),o=!n&&Av(e),r=!n&&!o&&Xp(e),s=!n&&!o&&!r&&om(e),c=n||o||r||s,v=c?JJ(e.length,String):[],p=v.length;for(var g in e)!t&&!oQ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Mb(g,p))||v.push(g);return v},iQ=Object.prototype,Pb=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||iQ)},C2=function(e,t){return function(n){return e(t(n))}},aQ=C2(Object.keys,Object),lQ=Object.prototype.hasOwnProperty,TE=function(e){if(!Pb(e))return aQ(e);var t=[];for(var n in Object(e))lQ.call(e,n)&&n!="constructor"&&t.push(n);return t},Df=function(e){return e!=null&&AE(e.length)&&!nm(e)},Wd=function(e){return Df(e)?D2(e):TE(e)},uQ=function(e,t){return e&&rm(t,Wd(t),e)},sQ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},cQ=Object.prototype.hasOwnProperty,fQ=function(e){if(!Nl(e))return sQ(e);var t=Pb(e),n=[];for(var o in e)(o!="constructor"||!t&&cQ.call(e,o))&&n.push(o);return n},oh=function(e){return Df(e)?D2(e,!0):fQ(e)},dQ=function(e,t){return e&&rm(t,oh(t),e)},j2=xE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?Os.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var p=c.length,g=s?s(p):new c.constructor(p);return c.copy(g),g}}),I2=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},L2=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},F2=function(){return[]},pQ=Object.prototype.propertyIsEnumerable,WT=Object.getOwnPropertySymbols,ME=WT?function(e){return e==null?[]:(e=Object(e),L2(WT(e),function(t){return pQ.call(e,t)}))}:F2,hQ=function(e,t){return rm(e,ME(e),t)},kE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},Nb=C2(Object.getPrototypeOf,Object),$2=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)kE(t,ME(e)),e=Nb(e);return t}:F2,vQ=function(e,t){return rm(e,$2(e),t)},B2=function(e,t,n){var o=t(e);return ki(e)?o:kE(o,n(e))},Ew=function(e){return B2(e,Wd,ME)},yQ=function(e){return B2(e,oh,$2)},Ow=rh(Os,"DataView"),xw=rh(Os,"Promise"),gv=rh(Os,"Set"),Sw=rh(Os,"WeakMap"),mQ=nh(Ow),gQ=nh(Ly),bQ=nh(xw),_Q=nh(gv),wQ=nh(Sw),Bp=Gd;(Ow&&Bp(new Ow(new ArrayBuffer(1)))!="[object DataView]"||Ly&&Bp(new Ly)!="[object Map]"||xw&&Bp(xw.resolve())!="[object Promise]"||gv&&Bp(new gv)!="[object Set]"||Sw&&Bp(new Sw)!="[object WeakMap]")&&(Bp=function(e){var t=Gd(e),n=t=="[object Object]"?e.constructor:void 0,o=n?nh(n):"";if(o)switch(o){case mQ:return"[object DataView]";case gQ:return"[object Map]";case bQ:return"[object Promise]";case _Q:return"[object Set]";case wQ:return"[object WeakMap]"}return t});var qp=Bp,EQ=Object.prototype.hasOwnProperty,OQ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&EQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Jg=Os.Uint8Array,PE=function(e){var t=new e.constructor(e.byteLength);return new Jg(t).set(new Jg(e)),t},xQ=function(e,t){var n=t?PE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},SQ=/\w*$/,AQ=function(e){var t=new e.constructor(e.source,SQ.exec(e));return t.lastIndex=e.lastIndex,t},zT=Uu?Uu.prototype:void 0,HT=zT?zT.valueOf:void 0,TQ=function(e){return HT?Object(HT.call(e)):{}},U2=function(e,t){var n=t?PE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},MQ=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return PE(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return xQ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return U2(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return AQ(e);case"[object Set]":return new o;case"[object Symbol]":return TQ(e)}},XT=Object.create,V2=function(){function e(){}return function(t){if(!Nl(t))return{};if(XT)return XT(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),G2=function(e){return typeof e.constructor!="function"||Pb(e)?{}:V2(Nb(e))},kQ=function(e){return _s(e)&&qp(e)=="[object Map]"},qT=Tv&&Tv.isMap,PQ=qT?kb(qT):kQ,NQ=function(e){return _s(e)&&qp(e)=="[object Set]"},YT=Tv&&Tv.isSet,RQ=YT?kb(YT):NQ,Xo={};Xo["[object Arguments]"]=Xo["[object Array]"]=Xo["[object ArrayBuffer]"]=Xo["[object DataView]"]=Xo["[object Boolean]"]=Xo["[object Date]"]=Xo["[object Float32Array]"]=Xo["[object Float64Array]"]=Xo["[object Int8Array]"]=Xo["[object Int16Array]"]=Xo["[object Int32Array]"]=Xo["[object Map]"]=Xo["[object Number]"]=Xo["[object Object]"]=Xo["[object RegExp]"]=Xo["[object Set]"]=Xo["[object String]"]=Xo["[object Symbol]"]=Xo["[object Uint8Array]"]=Xo["[object Uint8ClampedArray]"]=Xo["[object Uint16Array]"]=Xo["[object Uint32Array]"]=!0,Xo["[object Error]"]=Xo["[object Function]"]=Xo["[object WeakMap]"]=!1;var W2=function e(t,n,o,r,s,c){var v,p=1&n,g=2&n,b=4&n;if(o&&(v=s?o(t,r,s,c):o(t)),v!==void 0)return v;if(!Nl(t))return t;var _=ki(t);if(_){if(v=OQ(t),!p)return I2(t,v)}else{var E=qp(t),x=E=="[object Function]"||E=="[object GeneratorFunction]";if(Xp(t))return j2(t,p);if(E=="[object Object]"||E=="[object Arguments]"||x&&!s){if(v=g||x?{}:G2(t),!p)return g?vQ(t,dQ(v,t)):hQ(t,uQ(v,t))}else{if(!Xo[E])return s?t:{};v=MQ(t,E,p)}}c||(c=new mv);var P=c.get(t);if(P)return P;c.set(t,v),RQ(t)?t.forEach(function(M){v.add(e(M,n,o,M,t,c))}):PQ(t)&&t.forEach(function(M,I){v.set(I,e(M,n,o,I,t,c))});var A=_?void 0:(b?g?yQ:Ew:g?oh:Wd)(t);return SE(A||t,function(M,I){A&&(M=t[I=M]),Tb(v,I,e(M,n,o,I,t,c))}),v},DQ=function(e){return W2(e,4)},NE=function(e){return function(){return e}},RE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),v=c.length;v--;){var p=c[e?v:++r];if(n(s[p],p,s)===!1)break}return t}}(),DE=function(e,t){return e&&RE(e,t,Wd)},Rb=function(e,t){return function(n,o){if(n==null)return n;if(!Df(n))return e(n,o);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&o(c[s],s,c)!==!1;);return n}}(DE),ih=function(e){return e},z2=function(e){return typeof e=="function"?e:ih},H2=function(e,t){return(ki(e)?SE:Rb)(e,z2(t))},X2=H2,CQ=function(e,t){var n=[];return Rb(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},jQ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},IQ=function(e){return this.__data__.has(e)};function Sg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Sb;++t<n;)this.add(e[t])}Sg.prototype.add=Sg.prototype.push=jQ,Sg.prototype.has=IQ;var q2=Sg,LQ=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},Y2=function(e,t){return e.has(t)},K2=function(e,t,n,o,r,s){var c=1&n,v=e.length,p=t.length;if(v!=p&&!(c&&p>v))return!1;var g=s.get(e),b=s.get(t);if(g&&b)return g==t&&b==e;var _=-1,E=!0,x=2&n?new q2:void 0;for(s.set(e,t),s.set(t,e);++_<v;){var P=e[_],A=t[_];if(o)var M=c?o(A,P,_,t,e,s):o(P,A,_,e,t,s);if(M!==void 0){if(M)continue;E=!1;break}if(x){if(!LQ(t,function(I,D){if(!Y2(x,D)&&(P===I||r(P,I,n,o,s)))return x.push(D)})){E=!1;break}}else if(P!==A&&!r(P,A,n,o,s)){E=!1;break}}return s.delete(e),s.delete(t),E},FQ=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},CE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},KT=Uu?Uu.prototype:void 0,V1=KT?KT.valueOf:void 0,$Q=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Jg(e),new Jg(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Uv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=FQ;case"[object Set]":var p=1&o;if(v||(v=CE),e.size!=t.size&&!p)return!1;var g=c.get(e);if(g)return g==t;o|=2,c.set(e,t);var b=K2(v(e),v(t),o,r,s,c);return c.delete(e),b;case"[object Symbol]":if(V1)return V1.call(e)==V1.call(t)}return!1},BQ=Object.prototype.hasOwnProperty,UQ=function(e,t,n,o,r,s){var c=1&n,v=Ew(e),p=v.length;if(p!=Ew(t).length&&!c)return!1;for(var g=p;g--;){var b=v[g];if(!(c?b in t:BQ.call(t,b)))return!1}var _=s.get(e),E=s.get(t);if(_&&E)return _==t&&E==e;var x=!0;s.set(e,t),s.set(t,e);for(var P=c;++g<p;){var A=e[b=v[g]],M=t[b];if(o)var I=c?o(M,A,b,t,e,s):o(A,M,b,e,t,s);if(!(I===void 0?A===M||r(A,M,n,o,s):I)){x=!1;break}P||(P=b=="constructor")}if(x&&!P){var D=e.constructor,$=t.constructor;D==$||!("constructor"in e)||!("constructor"in t)||typeof D=="function"&&D instanceof D&&typeof $=="function"&&$ instanceof $||(x=!1)}return s.delete(e),s.delete(t),x},ZT=Object.prototype.hasOwnProperty,VQ=function(e,t,n,o,r,s){var c=ki(e),v=ki(t),p=c?"[object Array]":qp(e),g=v?"[object Array]":qp(t),b=(p=p=="[object Arguments]"?"[object Object]":p)=="[object Object]",_=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",E=p==g;if(E&&Xp(e)){if(!Xp(t))return!1;c=!0,b=!1}if(E&&!b)return s||(s=new mv),c||om(e)?K2(e,t,n,o,r,s):$Q(e,t,p,n,o,r,s);if(!(1&n)){var x=b&&ZT.call(e,"__wrapped__"),P=_&&ZT.call(t,"__wrapped__");if(x||P){var A=x?e.value():e,M=P?t.value():t;return s||(s=new mv),r(A,M,n,o,s)}}return!!E&&(s||(s=new mv),UQ(e,t,n,o,r,s))},Z2=function e(t,n,o,r,s){return t===n||(t==null||n==null||!_s(t)&&!_s(n)?t!=t&&n!=n:VQ(t,n,o,r,e,s))},GQ=function(e,t,n,o){var r=n.length,s=r,c=!o;if(e==null)return!s;for(e=Object(e);r--;){var v=n[r];if(c&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++r<s;){var p=(v=n[r])[0],g=e[p],b=v[1];if(c&&v[2]){if(g===void 0&&!(p in e))return!1}else{var _=new mv;if(o)var E=o(g,b,p,e,t,_);if(!(E===void 0?Z2(b,g,3,o,_):E))return!1}}return!0},J2=function(e){return e==e&&!Nl(e)},WQ=function(e){for(var t=Wd(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,J2(r)]}return t},Q2=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},zQ=function(e){var t=WQ(e);return t.length==1&&t[0][2]?Q2(t[0][0],t[0][1]):function(n){return n===e||GQ(n,e,t)}},Yp=function(e){return typeof e=="symbol"||_s(e)&&Gd(e)=="[object Symbol]"},HQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,XQ=/^\w*$/,jE=function(e,t){if(ki(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Yp(e))||XQ.test(e)||!HQ.test(e)||t!=null&&e in Object(t)};function IE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new(IE.Cache||Sb),n}IE.Cache=Sb;var qQ=IE,YQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,KQ=/\\(\\)?/g,ZQ=function(e){var t=qQ(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(YQ,function(n,o,r,s){t.push(r?s.replace(KQ,"$1"):o||n)}),t}),bv=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},JT=Uu?Uu.prototype:void 0,QT=JT?JT.toString:void 0,JQ=function e(t){if(typeof t=="string")return t;if(ki(t))return bv(t,e)+"";if(Yp(t))return QT?QT.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},eN=function(e){return e==null?"":JQ(e)},Db=function(e,t){return ki(e)?e:jE(e,t)?[e]:ZQ(eN(e))},im=function(e){if(typeof e=="string"||Yp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Cb=function(e,t){for(var n=0,o=(t=Db(t,e)).length;e!=null&&n<o;)e=e[im(t[n++])];return n&&n==o?e:void 0},QQ=function(e,t,n){var o=e==null?void 0:Cb(e,t);return o===void 0?n:o},eee=function(e,t){return e!=null&&t in Object(e)},tN=function(e,t,n){for(var o=-1,r=(t=Db(t,e)).length,s=!1;++o<r;){var c=im(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&AE(r)&&Mb(c,r)&&(ki(e)||Av(e))},nN=function(e,t){return e!=null&&tN(e,t,eee)},tee=function(e,t){return jE(e)&&J2(t)?Q2(im(e),t):function(n){var o=QQ(n,e);return o===void 0&&o===t?nN(n,e):Z2(t,o,3)}},rN=function(e){return function(t){return t==null?void 0:t[e]}},nee=function(e){return function(t){return Cb(t,e)}},ree=function(e){return jE(e)?rN(im(e)):nee(e)},Cf=function(e){return typeof e=="function"?e:e==null?ih:typeof e=="object"?ki(e)?tee(e[0],e[1]):zQ(e):ree(e)},oN=function(e,t){return(ki(e)?L2:CQ)(e,Cf(t))},oee=Object.prototype.hasOwnProperty,iee=function(e,t){return e!=null&&oee.call(e,t)},iN=function(e,t){return e!=null&&tN(e,t,iee)},aee=Object.prototype.hasOwnProperty,lee=function(e){if(e==null)return!0;if(Df(e)&&(ki(e)||typeof e=="string"||typeof e.splice=="function"||Xp(e)||om(e)||Av(e)))return!e.length;var t=qp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Pb(e))return!TE(e).length;for(var n in e)if(aee.call(e,n))return!1;return!0},aN=function(e){return e===void 0},lN=function(e,t){var n=-1,o=Df(e)?Array(e.length):[];return Rb(e,function(r,s,c){o[++n]=t(r,s,c)}),o},uN=function(e,t){return(ki(e)?bv:lN)(e,Cf(t))},uee=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},see=function(e,t,n,o,r){return r(e,function(s,c,v){n=o?(o=!1,s):t(n,s,c,v)}),n},sN=function(e,t,n){var o=ki(e)?uee:see,r=arguments.length<3;return o(e,Cf(t),n,r,Rb)},cee=function(e){return typeof e=="string"||!ki(e)&&_s(e)&&Gd(e)=="[object String]"},fee=rN("length"),dee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),pee=function(e){return dee.test(e)},hee="[\\ud800-\\udfff]",Aw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Tw="\\ud83c[\\udffb-\\udfff]",cN="[^\\ud800-\\udfff]",fN="(?:\\ud83c[\\udde6-\\uddff]){2}",dN="[\\ud800-\\udbff][\\udc00-\\udfff]",eM="(?:"+Aw+"|"+Tw+")?",vee="[\\ufe0e\\ufe0f]?"+eM+("(?:\\u200d(?:"+[cN,fN,dN].join("|")+")[\\ufe0e\\ufe0f]?"+eM+")*"),yee="(?:"+[cN+Aw+"?",Aw,fN,dN,hee].join("|")+")",tM=RegExp(Tw+"(?="+Tw+")|"+yee+vee,"g"),mee=function(e){for(var t=tM.lastIndex=0;tM.test(e);)++t;return t},gee=function(e){return pee(e)?mee(e):fee(e)},bee=function(e){if(e==null)return 0;if(Df(e))return cee(e)?gee(e):e.length;var t=qp(e);return t=="[object Map]"||t=="[object Set]"?e.size:TE(e).length},_ee=function(e,t,n){var o=ki(e),r=o||Xp(e)||om(e);if(t=Cf(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:Nl(e)&&nm(s)?V2(Nb(e)):{}}return(r?SE:DE)(e,function(c,v,p){return t(n,c,v,p)}),n},nM=Uu?Uu.isConcatSpreadable:void 0,wee=function(e){return ki(e)||Av(e)||!!(nM&&e&&e[nM])},LE=function e(t,n,o,r,s){var c=-1,v=t.length;for(o||(o=wee),s||(s=[]);++c<v;){var p=t[c];n>0&&o(p)?n>1?e(p,n-1,o,r,s):kE(s,p):r||(s[s.length]=p)}return s},Eee=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rM=Math.max,pN=function(e,t,n){return t=rM(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=rM(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=o[r];return v[t]=n(c),Eee(e,this,v)}},Oee=Zg?function(e,t){return Zg(e,"toString",{configurable:!0,enumerable:!1,value:NE(t),writable:!0})}:ih,xee=Date.now,hN=function(e){var t=0,n=0;return function(){var o=xee(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Oee),jb=function(e,t){return hN(pN(e,t,ih),e+"")},vN=function(e,t,n,o){for(var r=e.length,s=n+(o?1:-1);o?s--:++s<r;)if(t(e[s],s,e))return s;return-1},See=function(e){return e!=e},Aee=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},Tee=function(e,t,n){return t==t?Aee(e,t,n):vN(e,See,n)},Mee=function(e,t){return!!(e!=null&&e.length)&&Tee(e,t,0)>-1},kee=function(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1},Pee=function(){},Nee=gv&&1/CE(new gv([,-0]))[1]==1/0?function(e){return new gv(e)}:Pee,Ree=function(e,t,n){var o=-1,r=Mee,s=e.length,c=!0,v=[],p=v;if(n)c=!1,r=kee;else if(s>=200){var g=t?null:Nee(e);if(g)return CE(g);c=!1,r=Y2,p=new q2}else p=t?[]:v;e:for(;++o<s;){var b=e[o],_=t?t(b):b;if(b=n||b!==0?b:0,c&&_==_){for(var E=p.length;E--;)if(p[E]===_)continue e;t&&p.push(_),v.push(b)}else r(p,_,n)||(p!==v&&p.push(_),v.push(b))}return v},yN=function(e){return _s(e)&&Df(e)},Dee=jb(function(e){return Ree(LE(e,1,yN,!0))}),Cee=function(e,t){return bv(t,function(n){return e[n]})},Qg,mN=function(e){return e==null?[]:Cee(e,Wd(e))};try{Qg={clone:DQ,constant:NE,each:X2,filter:oN,has:iN,isArray:ki,isEmpty:lee,isFunction:nm,isUndefined:aN,keys:Wd,map:uN,reduce:sN,size:bee,transform:_ee,union:Dee,values:mN}}catch{}Qg||(Qg=window._);var En=Qg,FE=Br;function Br(e){this._isDirected=!En.has(e,"directed")||e.directed,this._isMultigraph=!!En.has(e,"multigraph")&&e.multigraph,this._isCompound=!!En.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=En.constant(void 0),this._defaultEdgeLabelFn=En.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oM(e,t){e[t]?e[t]++:e[t]=1}function iM(e,t){--e[t]||delete e[t]}function wy(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(En.isUndefined(o)?"\0":o)}function jee(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return o&&(v.name=o),v}function G1(e,t){return wy(e,t.v,t.w,t.name)}Br.prototype._nodeCount=0,Br.prototype._edgeCount=0,Br.prototype.isDirected=function(){return this._isDirected},Br.prototype.isMultigraph=function(){return this._isMultigraph},Br.prototype.isCompound=function(){return this._isCompound},Br.prototype.setGraph=function(e){return this._label=e,this},Br.prototype.graph=function(){return this._label},Br.prototype.setDefaultNodeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultNodeLabelFn=e,this},Br.prototype.nodeCount=function(){return this._nodeCount},Br.prototype.nodes=function(){return En.keys(this._nodes)},Br.prototype.sources=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._in[t])})},Br.prototype.sinks=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._out[t])})},Br.prototype.setNodes=function(e,t){var n=arguments,o=this;return En.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Br.prototype.setNode=function(e,t){return En.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Br.prototype.node=function(e){return this._nodes[e]},Br.prototype.hasNode=function(e){return En.has(this._nodes,e)},Br.prototype.removeNode=function(e){var t=this;if(En.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],En.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),En.each(En.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],En.each(En.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Br.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(En.isUndefined(t))t="\0";else{for(var n=t+="";!En.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Br.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Br.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Br.prototype.children=function(e){if(En.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return En.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Br.prototype.predecessors=function(e){var t=this._preds[e];if(t)return En.keys(t)},Br.prototype.successors=function(e){var t=this._sucs[e];if(t)return En.keys(t)},Br.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return En.union(t,this.successors(e))},Br.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Br.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;En.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),En.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&En.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Br.prototype.setDefaultEdgeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultEdgeLabelFn=e,this},Br.prototype.edgeCount=function(){return this._edgeCount},Br.prototype.edges=function(){return En.values(this._edgeObjs)},Br.prototype.setPath=function(e,t){var n=this,o=arguments;return En.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Br.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,En.isUndefined(n)||(n=""+n);var c=wy(this._isDirected,e,t,n);if(En.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!En.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var v=jee(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,oM(this._preds[t],e),oM(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Br.prototype.edge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n);return this._edgeLabels[o]},Br.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n);return En.has(this._edgeLabels,o)},Br.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?G1(this._isDirected,arguments[0]):wy(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],iM(this._preds[t],e),iM(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Br.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.v===t}):o}},Br.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.w===t}):o}},Br.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aM={Graph:FE,version:"2.1.8"},Iee={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Lee(e),edges:Fee(e)};return En.isUndefined(e.graph())||(t.value=En.clone(e.graph())),t},read:function(e){var t=new FE(e.options).setGraph(e.value);return En.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),En.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Lee(e){return En.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return En.isUndefined(n)||(r.value=n),En.isUndefined(o)||(r.parent=o),r})}function Fee(e){return En.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return En.isUndefined(t.name)||(o.name=t.name),En.isUndefined(n)||(o.value=n),o})}var $ee=function(e){var t,n={},o=[];function r(s){En.has(n,s)||(n[s]=!0,t.push(s),En.each(e.successors(s),r),En.each(e.predecessors(s),r))}return En.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},gN=Cu;function Cu(){this._arr=[],this._keyIndices={}}Cu.prototype.size=function(){return this._arr.length},Cu.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Cu.prototype.has=function(e){return En.has(this._keyIndices,e)},Cu.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Cu.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Cu.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!En.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},Cu.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Cu.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Cu.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Cu.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},Cu.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var bN=function(e,t,n,o){return function(r,s,c,v){var p,g,b={},_=new gN,E=function(x){var P=x.v!==p?x.v:x.w,A=b[P],M=c(x),I=g.distance+M;if(M<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+M);I<A.distance&&(A.distance=I,A.predecessor=p,_.decrease(P,I))};for(r.nodes().forEach(function(x){var P=x===s?0:Number.POSITIVE_INFINITY;b[x]={distance:P},_.add(x,P)});_.size()>0&&(p=_.removeMin(),(g=b[p]).distance!==Number.POSITIVE_INFINITY);)v(p).forEach(E);return b}(e,String(t),n||Bee,o||function(r){return e.outEdges(r)})},Bee=En.constant(1),Uee=function(e,t,n){return En.transform(e.nodes(),function(o,r){o[r]=bN(e,r,t,n)},{})},_N=function(e){var t=0,n=[],o={},r=[];function s(c){var v=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){En.has(o,b)?o[b].onStack&&(v.lowlink=Math.min(v.lowlink,o[b].index)):(s(b),v.lowlink=Math.min(v.lowlink,o[b].lowlink))}),v.lowlink===v.index){var p,g=[];do p=n.pop(),o[p].onStack=!1,g.push(p);while(c!==p);r.push(g)}}return e.nodes().forEach(function(c){En.has(o,c)||s(c)}),r},Vee=function(e){return En.filter(_N(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},Gee=function(e,t,n){return function(o,r,s){var c={},v=o.nodes();return v.forEach(function(p){c[p]={},c[p][p]={distance:0},v.forEach(function(g){p!==g&&(c[p][g]={distance:Number.POSITIVE_INFINITY})}),s(p).forEach(function(g){var b=g.v===p?g.w:g.v,_=r(g);c[p][b]={distance:_,predecessor:p}})}),v.forEach(function(p){var g=c[p];v.forEach(function(b){var _=c[b];v.forEach(function(E){var x=_[p],P=g[E],A=_[E],M=x.distance+P.distance;M<A.distance&&(A.distance=M,A.predecessor=P.predecessor)})})}),c}(e,t||Wee,n||function(o){return e.outEdges(o)})},Wee=En.constant(1),W1=wN;function wN(e){var t={},n={},o=[];if(En.each(e.sinks(),function r(s){if(En.has(n,s))throw new eb;En.has(t,s)||(n[s]=!0,t[s]=!0,En.each(e.predecessors(s),r),delete n[s],o.push(s))}),En.size(t)!==e.nodeCount())throw new eb;return o}function eb(){}wN.CycleException=eb,eb.prototype=new Error;var lM=function(e,t,n){En.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return En.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);EN(e,c,n==="post",s,o,r)}),r};function EN(e,t,n,o,r,s){En.has(o,t)||(o[t]=!0,n||s.push(t),En.each(r(t),function(c){EN(e,c,n,o,r,s)}),n&&s.push(t))}var tb,zee={Graph:aM.Graph,json:Iee,alg:{components:$ee,dijkstra:bN,dijkstraAll:Uee,findCycles:Vee,floydWarshall:Gee,isAcyclic:function(e){try{W1(e)}catch(t){if(t instanceof W1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lM(e,t,"post")},preorder:function(e,t){return lM(e,t,"pre")},prim:function(e,t){var n,o=new FE,r={},s=new gN;function c(p){var g=p.v===n?p.w:p.v,b=s.priority(g);if(b!==void 0){var _=t(p);_<b&&(r[g]=n,s.decrease(g,_))}}if(e.nodeCount()===0)return o;En.each(e.nodes(),function(p){s.add(p,Number.POSITIVE_INFINITY),o.setNode(p)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),En.has(r,n))o.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:_N,topsort:W1},version:aM.version};try{tb=zee}catch{}tb||(tb=window.graphlib);var gc=tb,Hee=function(e){return W2(e,5)},$y=function(e,t,n){if(!Nl(n))return!1;var o=typeof t;return!!(o=="number"?Df(n)&&Mb(t,n.length):o=="string"&&t in n)&&Uv(n[t],e)},ON=Object.prototype,Xee=ON.hasOwnProperty,qee=jb(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&$y(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=oh(s),v=-1,p=c.length;++v<p;){var g=c[v],b=e[g];(b===void 0||Uv(b,ON[g])&&!Xee.call(e,g))&&(e[g]=s[g])}return e}),Yee=function(e){return function(t,n,o){var r=Object(t);if(!Df(t)){var s=Cf(n);t=Wd(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},Kee=/^\s+|\s+$/g,Zee=/^[-+]0x[0-9a-f]+$/i,Jee=/^0b[01]+$/i,Qee=/^0o[0-7]+$/i,ete=parseInt,tte=function(e){if(typeof e=="number")return e;if(Yp(e))return NaN;if(Nl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Nl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Kee,"");var n=Jee.test(e);return n||Qee.test(e)?ete(e.slice(2),n?2:8):Zee.test(e)?NaN:+e},Ag=function(e){return e?(e=tte(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},nte=function(e){var t=Ag(e),n=t%1;return t==t?n?t-n:t:0},rte=Math.max,ote=Yee(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:nte(n);return r<0&&(r=rte(o+r,0)),vN(e,Cf(t),r)}),xN=function(e){return e!=null&&e.length?LE(e,1):[]},ite=function(e,t){return e==null?e:RE(e,z2(t),oh)},ate=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},lte=function(e,t){var n={};return t=Cf(t),DE(e,function(o,r,s){Ab(n,r,t(o,r,s))}),n},$E=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(v===void 0?c==c&&!Yp(c):n(c,v)))var v=c,p=s}return p},ute=function(e,t){return e>t},ste=function(e){return e&&e.length?$E(e,ih,ute):void 0},Mw=function(e,t,n){(n!==void 0&&!Uv(e[t],n)||n===void 0&&!(t in e))&&Ab(e,t,n)},cte=Function.prototype,fte=Object.prototype,SN=cte.toString,dte=fte.hasOwnProperty,pte=SN.call(Object),hte=function(e){if(!_s(e)||Gd(e)!="[object Object]")return!1;var t=Nb(e);if(t===null)return!0;var n=dte.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&SN.call(n)==pte},kw=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},vte=function(e){return rm(e,oh(e))},yte=function(e,t,n,o,r,s,c){var v=kw(e,n),p=kw(t,n),g=c.get(p);if(g)Mw(e,n,g);else{var b=s?s(v,p,n+"",e,t,c):void 0,_=b===void 0;if(_){var E=ki(p),x=!E&&Xp(p),P=!E&&!x&&om(p);b=p,E||x||P?ki(v)?b=v:yN(v)?b=I2(v):x?(_=!1,b=j2(p,!0)):P?(_=!1,b=U2(p,!0)):b=[]:hte(p)||Av(p)?(b=v,Av(v)?b=vte(v):Nl(v)&&!nm(v)||(b=G2(p))):_=!1}_&&(c.set(p,b),r(b,p,o,s,c),c.delete(p)),Mw(e,n,b)}},mte=function e(t,n,o,r,s){t!==n&&RE(n,function(c,v){if(s||(s=new mv),Nl(c))yte(t,n,v,o,e,r,s);else{var p=r?r(kw(t,v),c,v+"",t,n,s):void 0;p===void 0&&(p=c),Mw(t,v,p)}},oh)},gte=function(e){return jb(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&$y(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var v=n[o];v&&e(t,v,o,s)}return t})}(function(e,t,n){mte(e,t,n)}),AN=function(e,t){return e<t},bte=function(e){return e&&e.length?$E(e,ih,AN):void 0},_te=function(e,t){return e&&e.length?$E(e,Cf(t),AN):void 0},wte=function(){return Os.Date.now()},Ete=function(e,t,n,o){if(!Nl(e))return e;for(var r=-1,s=(t=Db(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var p=im(t[r]),g=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(r!=c){var b=v[p];(g=o?o(b,p,v):void 0)===void 0&&(g=Nl(b)?b:Mb(t[r+1])?[]:{})}Tb(v,p,g),v=v[p]}return e},Ote=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],v=Cb(e,c);n(v,c)&&Ete(s,Db(c,e),v)}return s},xte=function(e,t){return Ote(e,t,function(n,o){return nN(e,o)})},Ste=function(e){return hN(pN(e,void 0,xN),e+"")}(function(e,t){return e==null?{}:xte(e,t)}),Ate=Math.ceil,Tte=Math.max,Mte=function(e,t,n,o){for(var r=-1,s=Tte(Ate((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++r]=e,e+=n;return c},kte=function(e){return function(t,n,o){return o&&typeof o!="number"&&$y(t,n,o)&&(n=o=void 0),t=Ag(t),n===void 0?(n=t,t=0):n=Ag(n),o=o===void 0?t<n?1:-1:Ag(o),Mte(t,n,o,e)}}(),Pte=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Nte=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=Yp(e),c=t!==void 0,v=t===null,p=t==t,g=Yp(t);if(!v&&!g&&!s&&e>t||s&&c&&p&&!v&&!g||o&&c&&p||!n&&p||!r)return 1;if(!o&&!s&&!g&&e<t||g&&n&&r&&!o&&!s||v&&n&&r||!c&&r||!p)return-1}return 0},Rte=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++o<c;){var p=Nte(r[o],s[o]);if(p)return o>=v?p:p*(n[o]=="desc"?-1:1)}return e.index-t.index},Dte=function(e,t,n){t=t.length?bv(t,function(s){return ki(s)?function(c){return Cb(c,s.length===1?s[0]:s)}:s}):[ih];var o=-1;t=bv(t,kb(Cf));var r=lN(e,function(s,c,v){return{criteria:bv(t,function(p){return p(s)}),index:++o,value:s}});return Pte(r,function(s,c){return Rte(s,c,n)})},Cte=jb(function(e,t){if(e==null)return[];var n=t.length;return n>1&&$y(e,t[0],t[1])?t=[]:n>2&&$y(t[0],t[1],t[2])&&(t=[t[0]]),Dte(e,LE(t,1),[])}),jte=0,Ite=function(e){var t=++jte;return eN(e)+t},Lte=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var v=o<s?t[o]:void 0;n(c,e[o],v)}return c},nb,Fte=function(e,t){return Lte(e||[],t||[],Tb)};try{nb={cloneDeep:Hee,constant:NE,defaults:qee,each:X2,filter:oN,find:ote,flatten:xN,forEach:H2,forIn:ite,has:iN,isUndefined:aN,last:ate,map:uN,mapValues:lte,max:ste,merge:gte,min:bte,minBy:_te,now:wte,pick:Ste,range:kte,reduce:sN,sortBy:Cte,uniqueId:Ite,values:mN,zipObject:Fte}}catch{}nb||(nb=window._);var $te=nb;gc.Graph;$te.constant(1);gc.Graph;gc.Graph;gc.alg.preorder;gc.alg.postorder;gc.Graph;gc.Graph;gc.Graph;gc.Graph;gc.Graph;function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}function Bte(e,t){if(By(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(By(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ute(e){var t=Bte(e,"string");return By(t)=="symbol"?t:t+""}function an(e,t,n){return(t=Ute(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vte=typeof my=="object"&&my&&my.Object===Object&&my,TN=Vte,Gte=TN,Wte=typeof self=="object"&&self&&self.Object===Object&&self,zte=Gte||Wte||Function("return this")(),Hte=zte,Xte=Hte,qte=Xte.Symbol,MN=qte,uM=MN;uM&&uM.toStringTag;var sM=MN;sM&&sM.toStringTag;var rb={exports:{}};rb.exports;(function(e,t){var n=TN,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,v=function(){try{var p=r&&r.require&&r.require("util").types;return p||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v})(rb,rb.exports);var Yte=rb.exports,cM=Yte;cM&&cM.isTypedArray;var kN={exports:{}},PN={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(PN);var Kte=PN.exports;(function(e){var t=Kte.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var o,r={},s=Object.prototype,c=s.hasOwnProperty,v=Object.defineProperty||function(ue,ve,Pe){ue[ve]=Pe.value},p=typeof Symbol=="function"?Symbol:{},g=p.iterator||"@@iterator",b=p.asyncIterator||"@@asyncIterator",_=p.toStringTag||"@@toStringTag";function E(ue,ve,Pe){return Object.defineProperty(ue,ve,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),ue[ve]}try{E({},"")}catch{E=function(Pe,Xe,ze){return Pe[Xe]=ze}}function x(ue,ve,Pe,Xe){var ze=ve&&ve.prototype instanceof G?ve:G,Je=Object.create(ze.prototype),_t=new ke(Xe||[]);return v(Je,"_invoke",{value:ce(ue,Pe,_t)}),Je}function P(ue,ve,Pe){try{return{type:"normal",arg:ue.call(ve,Pe)}}catch(Xe){return{type:"throw",arg:Xe}}}r.wrap=x;var A="suspendedStart",M="suspendedYield",I="executing",D="completed",$={};function G(){}function W(){}function X(){}var J={};E(J,g,function(){return this});var z=Object.getPrototypeOf,L=z&&z(z(Re([])));L&&L!==s&&c.call(L,g)&&(J=L);var H=X.prototype=G.prototype=Object.create(J);function K(ue){["next","throw","return"].forEach(function(ve){E(ue,ve,function(Pe){return this._invoke(ve,Pe)})})}function Y(ue,ve){function Pe(ze,Je,_t,kt){var qt=P(ue[ze],ue,Je);if(qt.type!=="throw"){var Fe=qt.arg,ge=Fe.value;return ge&&t(ge)=="object"&&c.call(ge,"__await")?ve.resolve(ge.__await).then(function(Ae){Pe("next",Ae,_t,kt)},function(Ae){Pe("throw",Ae,_t,kt)}):ve.resolve(ge).then(function(Ae){Fe.value=Ae,_t(Fe)},function(Ae){return Pe("throw",Ae,_t,kt)})}kt(qt.arg)}var Xe;v(this,"_invoke",{value:function(Je,_t){function kt(){return new ve(function(qt,Fe){Pe(Je,_t,qt,Fe)})}return Xe=Xe?Xe.then(kt,kt):kt()}})}function ce(ue,ve,Pe){var Xe=A;return function(ze,Je){if(Xe===I)throw Error("Generator is already running");if(Xe===D){if(ze==="throw")throw Je;return{value:o,done:!0}}for(Pe.method=ze,Pe.arg=Je;;){var _t=Pe.delegate;if(_t){var kt=Ne(_t,Pe);if(kt){if(kt===$)continue;return kt}}if(Pe.method==="next")Pe.sent=Pe._sent=Pe.arg;else if(Pe.method==="throw"){if(Xe===A)throw Xe=D,Pe.arg;Pe.dispatchException(Pe.arg)}else Pe.method==="return"&&Pe.abrupt("return",Pe.arg);Xe=I;var qt=P(ue,ve,Pe);if(qt.type==="normal"){if(Xe=Pe.done?D:M,qt.arg===$)continue;return{value:qt.arg,done:Pe.done}}qt.type==="throw"&&(Xe=D,Pe.method="throw",Pe.arg=qt.arg)}}}function Ne(ue,ve){var Pe=ve.method,Xe=ue.iterator[Pe];if(Xe===o)return ve.delegate=null,Pe==="throw"&&ue.iterator.return&&(ve.method="return",ve.arg=o,Ne(ue,ve),ve.method==="throw")||Pe!=="return"&&(ve.method="throw",ve.arg=new TypeError("The iterator does not provide a '"+Pe+"' method")),$;var ze=P(Xe,ue.iterator,ve.arg);if(ze.type==="throw")return ve.method="throw",ve.arg=ze.arg,ve.delegate=null,$;var Je=ze.arg;return Je?Je.done?(ve[ue.resultName]=Je.value,ve.next=ue.nextLoc,ve.method!=="return"&&(ve.method="next",ve.arg=o),ve.delegate=null,$):Je:(ve.method="throw",ve.arg=new TypeError("iterator result is not an object"),ve.delegate=null,$)}function _e(ue){var ve={tryLoc:ue[0]};1 in ue&&(ve.catchLoc=ue[1]),2 in ue&&(ve.finallyLoc=ue[2],ve.afterLoc=ue[3]),this.tryEntries.push(ve)}function Oe(ue){var ve=ue.completion||{};ve.type="normal",delete ve.arg,ue.completion=ve}function ke(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(_e,this),this.reset(!0)}function Re(ue){if(ue||ue===""){var ve=ue[g];if(ve)return ve.call(ue);if(typeof ue.next=="function")return ue;if(!isNaN(ue.length)){var Pe=-1,Xe=function ze(){for(;++Pe<ue.length;)if(c.call(ue,Pe))return ze.value=ue[Pe],ze.done=!1,ze;return ze.value=o,ze.done=!0,ze};return Xe.next=Xe}}throw new TypeError(t(ue)+" is not iterable")}return W.prototype=X,v(H,"constructor",{value:X,configurable:!0}),v(X,"constructor",{value:W,configurable:!0}),W.displayName=E(X,_,"GeneratorFunction"),r.isGeneratorFunction=function(ue){var ve=typeof ue=="function"&&ue.constructor;return!!ve&&(ve===W||(ve.displayName||ve.name)==="GeneratorFunction")},r.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,X):(ue.__proto__=X,E(ue,_,"GeneratorFunction")),ue.prototype=Object.create(H),ue},r.awrap=function(ue){return{__await:ue}},K(Y.prototype),E(Y.prototype,b,function(){return this}),r.AsyncIterator=Y,r.async=function(ue,ve,Pe,Xe,ze){ze===void 0&&(ze=Promise);var Je=new Y(x(ue,ve,Pe,Xe),ze);return r.isGeneratorFunction(ve)?Je:Je.next().then(function(_t){return _t.done?_t.value:Je.next()})},K(H),E(H,_,"Generator"),E(H,g,function(){return this}),E(H,"toString",function(){return"[object Generator]"}),r.keys=function(ue){var ve=Object(ue),Pe=[];for(var Xe in ve)Pe.push(Xe);return Pe.reverse(),function ze(){for(;Pe.length;){var Je=Pe.pop();if(Je in ve)return ze.value=Je,ze.done=!1,ze}return ze.done=!0,ze}},r.values=Re,ke.prototype={constructor:ke,reset:function(ve){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Oe),!ve)for(var Pe in this)Pe.charAt(0)==="t"&&c.call(this,Pe)&&!isNaN(+Pe.slice(1))&&(this[Pe]=o)},stop:function(){this.done=!0;var ve=this.tryEntries[0].completion;if(ve.type==="throw")throw ve.arg;return this.rval},dispatchException:function(ve){if(this.done)throw ve;var Pe=this;function Xe(Fe,ge){return _t.type="throw",_t.arg=ve,Pe.next=Fe,ge&&(Pe.method="next",Pe.arg=o),!!ge}for(var ze=this.tryEntries.length-1;ze>=0;--ze){var Je=this.tryEntries[ze],_t=Je.completion;if(Je.tryLoc==="root")return Xe("end");if(Je.tryLoc<=this.prev){var kt=c.call(Je,"catchLoc"),qt=c.call(Je,"finallyLoc");if(kt&&qt){if(this.prev<Je.catchLoc)return Xe(Je.catchLoc,!0);if(this.prev<Je.finallyLoc)return Xe(Je.finallyLoc)}else if(kt){if(this.prev<Je.catchLoc)return Xe(Je.catchLoc,!0)}else{if(!qt)throw Error("try statement without catch or finally");if(this.prev<Je.finallyLoc)return Xe(Je.finallyLoc)}}}},abrupt:function(ve,Pe){for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var ze=this.tryEntries[Xe];if(ze.tryLoc<=this.prev&&c.call(ze,"finallyLoc")&&this.prev<ze.finallyLoc){var Je=ze;break}}Je&&(ve==="break"||ve==="continue")&&Je.tryLoc<=Pe&&Pe<=Je.finallyLoc&&(Je=null);var _t=Je?Je.completion:{};return _t.type=ve,_t.arg=Pe,Je?(this.method="next",this.next=Je.finallyLoc,$):this.complete(_t)},complete:function(ve,Pe){if(ve.type==="throw")throw ve.arg;return ve.type==="break"||ve.type==="continue"?this.next=ve.arg:ve.type==="return"?(this.rval=this.arg=ve.arg,this.method="return",this.next="end"):ve.type==="normal"&&Pe&&(this.next=Pe),$},finish:function(ve){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Xe=this.tryEntries[Pe];if(Xe.finallyLoc===ve)return this.complete(Xe.completion,Xe.afterLoc),Oe(Xe),$}},catch:function(ve){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Xe=this.tryEntries[Pe];if(Xe.tryLoc===ve){var ze=Xe.completion;if(ze.type==="throw"){var Je=ze.arg;Oe(Xe)}return Je}}throw Error("illegal catch attempt")},delegateYield:function(ve,Pe,Xe){return this.delegate={iterator:Re(ve),resultName:Pe,nextLoc:Xe},this.method==="next"&&(this.arg=o),$}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(kN);var Zte=kN.exports,z1=Zte();try{regeneratorRuntime=z1}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=z1:Function("r","regeneratorRuntime = r")(z1)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var fM;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(fM||(fM={}));var dM;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(dM||(dM={}));var pM;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(pM||(pM={}));var hM;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(hM||(hM={}));var Jte={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(my,function(){var n=function(B){return B instanceof Uint8Array||B instanceof Uint16Array||B instanceof Uint32Array||B instanceof Int8Array||B instanceof Int16Array||B instanceof Int32Array||B instanceof Float32Array||B instanceof Float64Array||B instanceof Uint8ClampedArray},o=function(B,ie){for(var be=Object.keys(ie),rt=0;rt<be.length;++rt)B[be[rt]]=ie[be[rt]];return B},r=`
`;function s(B){return typeof atob<"u"?atob(B):"base64:"+B}function c(B){var ie=new Error("(regl) "+B);throw console.error(ie),ie}function v(B,ie){B||c(ie)}function p(B){return B?": "+B:""}function g(B,ie,be){B in ie||c("unknown parameter ("+B+")"+p(be)+". possible values: "+Object.keys(ie).join())}function b(B,ie){n(B)||c("invalid parameter type"+p(ie)+". must be a typed array")}function _(B,ie){switch(ie){case"number":return typeof B=="number";case"object":return typeof B=="object";case"string":return typeof B=="string";case"boolean":return typeof B=="boolean";case"function":return typeof B=="function";case"undefined":return typeof B>"u";case"symbol":return typeof B=="symbol"}}function E(B,ie,be){_(B,ie)||c("invalid parameter type"+p(be)+". expected "+ie+", got "+typeof B)}function x(B,ie){B>=0&&(B|0)===B||c("invalid parameter type, ("+B+")"+p(ie)+". must be a nonnegative integer")}function P(B,ie,be){ie.indexOf(B)<0&&c("invalid value"+p(be)+". must be one of: "+ie)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function M(B){Object.keys(B).forEach(function(ie){A.indexOf(ie)<0&&c('invalid regl constructor argument "'+ie+'". must be one of '+A)})}function I(B,ie){for(B=B+"";B.length<ie;)B=" "+B;return B}function D(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function $(B,ie){this.number=B,this.line=ie,this.errors=[]}function G(B,ie,be){this.file=B,this.line=ie,this.message=be}function W(){var B=new Error,ie=(B.stack||B).toString(),be=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ie);if(be)return be[1];var rt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ie);return rt?rt[1]:"unknown"}function X(){var B=new Error,ie=(B.stack||B).toString(),be=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ie);if(be)return be[1];var rt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ie);return rt?rt[1]:"unknown"}function J(B,ie){var be=B.split(`
`),rt=1,ht=0,et={unknown:new D,0:new D};et.unknown.name=et[0].name=ie||W(),et.unknown.lines.push(new $(0,""));for(var st=0;st<be.length;++st){var Nt=be[st],It=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Nt);if(It)switch(It[1]){case"line":var Ct=/(\d+)(\s+\d+)?/.exec(It[2]);Ct&&(rt=Ct[1]|0,Ct[2]&&(ht=Ct[2]|0,ht in et||(et[ht]=new D)));break;case"define":var ct=/SHADER_NAME(_B64)?\s+(.*)$/.exec(It[2]);ct&&(et[ht].name=ct[1]?s(ct[2]):ct[2]);break}et[ht].lines.push(new $(rt++,Nt))}return Object.keys(et).forEach(function(Gt){var Ut=et[Gt];Ut.lines.forEach(function(Rt){Ut.index[Rt.number]=Rt})}),et}function z(B){var ie=[];return B.split(`
`).forEach(function(be){if(!(be.length<5)){var rt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);rt?ie.push(new G(rt[1]|0,rt[2]|0,rt[3].trim())):be.length>0&&ie.push(new G("unknown",0,be))}}),ie}function L(B,ie){ie.forEach(function(be){var rt=B[be.file];if(rt){var ht=rt.index[be.line];if(ht){ht.errors.push(be),rt.hasErrors=!0;return}}B.unknown.hasErrors=!0,B.unknown.lines[0].errors.push(be)})}function H(B,ie,be,rt,ht){if(!B.getShaderParameter(ie,B.COMPILE_STATUS)){var et=B.getShaderInfoLog(ie),st=rt===B.FRAGMENT_SHADER?"fragment":"vertex";ke(be,"string",st+" shader source must be a string",ht);var Nt=J(be,ht),It=z(et);L(Nt,It),Object.keys(Nt).forEach(function(Ct){var ct=Nt[Ct];if(!ct.hasErrors)return;var Gt=[""],Ut=[""];function Rt(Et,qe){Gt.push(Et),Ut.push(qe||"")}Rt("file number "+Ct+": "+ct.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ct.lines.forEach(function(Et){if(Et.errors.length>0){Rt(I(Et.number,4)+"|  ","background-color:yellow; font-weight:bold"),Rt(Et.line+r,"color:red; background-color:yellow; font-weight:bold");var qe=0;Et.errors.forEach(function(lt){var Ft=lt.message,Kt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ft);if(Kt){var At=Kt[1];switch(Ft=Kt[2],At){case"assign":At="=";break}qe=Math.max(Et.line.indexOf(At,qe),0)}else qe=0;Rt(I("| ",6)),Rt(I("^^^",qe+3)+r,"font-weight:bold"),Rt(I("| ",6)),Rt(Ft+r,"font-weight:bold")}),Rt(I("| ",6)+r)}else Rt(I(Et.number,4)+"|  "),Rt(Et.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Gt.join("%c"),console.log.apply(console,Ut)):console.log(Gt.join(""))}),v.raise("Error compiling "+st+" shader, "+Nt[0].name)}}function K(B,ie,be,rt,ht){if(!B.getProgramParameter(ie,B.LINK_STATUS)){var et=B.getProgramInfoLog(ie),st=J(be,ht),Nt=J(rt,ht),It='Error linking program with vertex shader, "'+Nt[0].name+'", and fragment shader "'+st[0].name+'"';typeof document<"u"?console.log("%c"+It+r+"%c"+et,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(It+r+et),v.raise(It)}}function Y(B){B._commandRef=W()}function ce(B,ie,be,rt){Y(B);function ht(It){return It?rt.id(It):0}B._fragId=ht(B.static.frag),B._vertId=ht(B.static.vert);function et(It,Ct){Object.keys(Ct).forEach(function(ct){It[rt.id(ct)]=!0})}var st=B._uniformSet={};et(st,ie.static),et(st,ie.dynamic);var Nt=B._attributeSet={};et(Nt,be.static),et(Nt,be.dynamic),B._hasCount="count"in B.static||"count"in B.dynamic||"elements"in B.static||"elements"in B.dynamic}function Ne(B,ie){var be=X();c(B+" in command "+(ie||W())+(be==="unknown"?"":" called from "+be))}function _e(B,ie,be){B||Ne(ie,be||W())}function Oe(B,ie,be,rt){B in ie||Ne("unknown parameter ("+B+")"+p(be)+". possible values: "+Object.keys(ie).join(),rt||W())}function ke(B,ie,be,rt){_(B,ie)||Ne("invalid parameter type"+p(be)+". expected "+ie+", got "+typeof B,rt||W())}function Re(B){B()}function ue(B,ie,be){B.texture?P(B.texture._texture.internalformat,ie,"unsupported texture format for attachment"):P(B.renderbuffer._renderbuffer.format,be,"unsupported renderbuffer format for attachment")}var ve=33071,Pe=9728,Xe=9984,ze=9985,Je=9986,_t=9987,kt=5120,qt=5121,Fe=5122,ge=5123,Ae=5124,yt=5125,zt=5126,St=32819,rn=32820,mn=33635,Mn=34042,hn=36193,ft={};ft[kt]=ft[qt]=1,ft[Fe]=ft[ge]=ft[hn]=ft[mn]=ft[St]=ft[rn]=2,ft[Ae]=ft[yt]=ft[zt]=ft[Mn]=4;function xn(B,ie){return B===rn||B===St||B===mn?2:B===Mn?4:ft[B]*ie}function Ve(B){return!(B&B-1)&&!!B}function gn(B,ie,be){var rt,ht=ie.width,et=ie.height,st=ie.channels;v(ht>0&&ht<=be.maxTextureSize&&et>0&&et<=be.maxTextureSize,"invalid texture shape"),(B.wrapS!==ve||B.wrapT!==ve)&&v(Ve(ht)&&Ve(et),"incompatible wrap mode for texture, both width and height must be power of 2"),ie.mipmask===1?ht!==1&&et!==1&&v(B.minFilter!==Xe&&B.minFilter!==Je&&B.minFilter!==ze&&B.minFilter!==_t,"min filter requires mipmap"):(v(Ve(ht)&&Ve(et),"texture must be a square power of 2 to support mipmapping"),v(ie.mipmask===(ht<<1)-1,"missing or incomplete mipmap data")),ie.type===zt&&(be.extensions.indexOf("oes_texture_float_linear")<0&&v(B.minFilter===Pe&&B.magFilter===Pe,"filter not supported, must enable oes_texture_float_linear"),v(!B.genMipmaps,"mipmap generation not supported with float textures"));var Nt=ie.images;for(rt=0;rt<16;++rt)if(Nt[rt]){var It=ht>>rt,Ct=et>>rt;v(ie.mipmask&1<<rt,"missing mipmap data");var ct=Nt[rt];if(v(ct.width===It&&ct.height===Ct,"invalid shape for mip images"),v(ct.format===ie.format&&ct.internalformat===ie.internalformat&&ct.type===ie.type,"incompatible type for mip image"),!ct.compressed)if(ct.data){var Gt=Math.ceil(xn(ct.type,st)*It/ct.unpackAlignment)*ct.unpackAlignment;v(ct.data.byteLength===Gt*Ct,"invalid data for image, buffer size is inconsistent with image format")}else ct.element||ct.copy}else B.genMipmaps||v((ie.mipmask&1<<rt)===0,"extra mipmap data");ie.compressed&&v(!B.genMipmaps,"mipmap generation for compressed images not supported")}function Zn(B,ie,be,rt){var ht=B.width,et=B.height,st=B.channels;v(ht>0&&ht<=rt.maxTextureSize&&et>0&&et<=rt.maxTextureSize,"invalid texture shape"),v(ht===et,"cube map must be square"),v(ie.wrapS===ve&&ie.wrapT===ve,"wrap mode not supported by cube map");for(var Nt=0;Nt<be.length;++Nt){var It=be[Nt];v(It.width===ht&&It.height===et,"inconsistent cube map face shape"),ie.genMipmaps&&(v(!It.compressed,"can not generate mipmap for compressed textures"),v(It.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ct=It.images,ct=0;ct<16;++ct){var Gt=Ct[ct];if(Gt){var Ut=ht>>ct,Rt=et>>ct;v(It.mipmask&1<<ct,"missing mipmap data"),v(Gt.width===Ut&&Gt.height===Rt,"invalid shape for mip images"),v(Gt.format===B.format&&Gt.internalformat===B.internalformat&&Gt.type===B.type,"incompatible type for mip image"),Gt.compressed||(Gt.data?v(Gt.data.byteLength===Ut*Rt*Math.max(xn(Gt.type,st),Gt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Gt.element||Gt.copy)}}}}var re=o(v,{optional:Re,raise:c,commandRaise:Ne,command:_e,parameter:g,commandParameter:Oe,constructor:M,type:E,commandType:ke,isTypedArray:b,nni:x,oneOf:P,shaderError:H,linkError:K,callSite:X,saveCommandRef:Y,saveDrawInfo:ce,framebufferFormat:ue,guessCommand:W,texture2D:gn,textureCube:Zn}),Bn=0,Sr=0,Ur=5,oo=6;function In(B,ie){this.id=Bn++,this.type=B,this.data=ie}function jo(B){return B.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function xe(B){if(B.length===0)return[];var ie=B.charAt(0),be=B.charAt(B.length-1);if(B.length>1&&ie===be&&(ie==='"'||ie==="'"))return['"'+jo(B.substr(1,B.length-2))+'"'];var rt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(B);if(rt)return xe(B.substr(0,rt.index)).concat(xe(rt[1])).concat(xe(B.substr(rt.index+rt[0].length)));var ht=B.split(".");if(ht.length===1)return['"'+jo(B)+'"'];for(var et=[],st=0;st<ht.length;++st)et=et.concat(xe(ht[st]));return et}function Ke(B){return"["+xe(B).join("][")+"]"}function Le(B,ie){return new In(B,Ke(ie+""))}function at(B){return typeof B=="function"&&!B._reglType||B instanceof In}function en(B,ie){if(typeof B=="function")return new In(Sr,B);if(typeof B=="number"||typeof B=="boolean")return new In(Ur,B);if(Array.isArray(B))return new In(oo,B.map((be,rt)=>en(be,ie+"["+rt+"]")));if(B instanceof In)return B;re(!1,"invalid option type in uniform "+ie)}var Yt={DynamicVariable:In,define:Le,isDynamic:at,unbox:en,accessor:Ke},Nn={next:typeof requestAnimationFrame=="function"?function(B){return requestAnimationFrame(B)}:function(B){return setTimeout(B,16)},cancel:typeof cancelAnimationFrame=="function"?function(B){return cancelAnimationFrame(B)}:clearTimeout},_r=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ui(){var B={"":0},ie=[""];return{id:function(be){var rt=B[be];return rt||(rt=B[be]=ie.length,ie.push(be),rt)},str:function(be){return ie[be]}}}function wi(B,ie,be){var rt=document.createElement("canvas");o(rt.style,{border:0,margin:0,padding:0,top:0,left:0}),B.appendChild(rt),B===document.body&&(rt.style.position="absolute",o(B.style,{margin:0,padding:0}));function ht(){var Nt=window.innerWidth,It=window.innerHeight;if(B!==document.body){var Ct=B.getBoundingClientRect();Nt=Ct.right-Ct.left,It=Ct.bottom-Ct.top}rt.width=be*Nt,rt.height=be*It,o(rt.style,{width:Nt+"px",height:It+"px"})}var et;B!==document.body&&typeof ResizeObserver=="function"?(et=new ResizeObserver(function(){setTimeout(ht)}),et.observe(B)):window.addEventListener("resize",ht,!1);function st(){et?et.disconnect():window.removeEventListener("resize",ht),B.removeChild(rt)}return ht(),{canvas:rt,onDestroy:st}}function Go(B,ie){function be(rt){try{return B.getContext(rt,ie)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}function Jo(B){return typeof B.nodeName=="string"&&typeof B.appendChild=="function"&&typeof B.getBoundingClientRect=="function"}function Sn(B){return typeof B.drawArrays=="function"||typeof B.drawElements=="function"}function Un(B){return typeof B=="string"?B.split():(re(Array.isArray(B),"invalid extension array"),B)}function qn(B){return typeof B=="string"?(re(typeof document<"u","not supported outside of DOM"),document.querySelector(B)):B}function ir(B){var ie=B||{},be,rt,ht,et,st={},Nt=[],It=[],Ct=typeof window>"u"?1:window.devicePixelRatio,ct=!1,Gt=function(Et){Et&&re.raise(Et)},Ut=function(){};if(typeof ie=="string"?(re(typeof document<"u","selector queries only supported in DOM enviroments"),be=document.querySelector(ie),re(be,"invalid query string for element")):typeof ie=="object"?Jo(ie)?be=ie:Sn(ie)?(et=ie,ht=et.canvas):(re.constructor(ie),"gl"in ie?et=ie.gl:"canvas"in ie?ht=qn(ie.canvas):"container"in ie&&(rt=qn(ie.container)),"attributes"in ie&&(st=ie.attributes,re.type(st,"object","invalid context attributes")),"extensions"in ie&&(Nt=Un(ie.extensions)),"optionalExtensions"in ie&&(It=Un(ie.optionalExtensions)),"onDone"in ie&&(re.type(ie.onDone,"function","invalid or missing onDone callback"),Gt=ie.onDone),"profile"in ie&&(ct=!!ie.profile),"pixelRatio"in ie&&(Ct=+ie.pixelRatio,re(Ct>0,"invalid pixel ratio"))):re.raise("invalid arguments to regl"),be&&(be.nodeName.toLowerCase()==="canvas"?ht=be:rt=be),!et){if(!ht){re(typeof document<"u","must manually specify webgl context outside of DOM environments");var Rt=wi(rt||document.body,Gt,Ct);if(!Rt)return null;ht=Rt.canvas,Ut=Rt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),et=Go(ht,st)}return et?{gl:et,canvas:ht,container:rt,extensions:Nt,optionalExtensions:It,pixelRatio:Ct,profile:ct,onDone:Gt,onDestroy:Ut}:(Ut(),Gt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Qr(B,ie){var be={};function rt(st){re.type(st,"string","extension name must be string");var Nt=st.toLowerCase(),It;try{It=be[Nt]=B.getExtension(Nt)}catch{}return!!It}for(var ht=0;ht<ie.extensions.length;++ht){var et=ie.extensions[ht];if(!rt(et))return ie.onDestroy(),ie.onDone('"'+et+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ie.optionalExtensions.forEach(rt),{extensions:be,restore:function(){Object.keys(be).forEach(function(st){if(be[st]&&!rt(st))throw new Error("(regl): error restoring extension "+st)})}}}function Rr(B,ie){for(var be=Array(B),rt=0;rt<B;++rt)be[rt]=ie(rt);return be}var fl=5120,Va=5121,dl=5122,lu=5123,zd=5124,bc=5125,da=5126;function Wu(B){for(var ie=16;ie<=1<<28;ie*=16)if(B<=ie)return ie;return 0}function Pn(B){var ie,be;return ie=(B>65535)<<4,B>>>=ie,be=(B>255)<<3,B>>>=be,ie|=be,be=(B>15)<<2,B>>>=be,ie|=be,be=(B>3)<<1,B>>>=be,ie|=be,ie|B>>1}function jf(){var B=Rr(8,function(){return[]});function ie(et){var st=Wu(et),Nt=B[Pn(st)>>2];return Nt.length>0?Nt.pop():new ArrayBuffer(st)}function be(et){B[Pn(et.byteLength)>>2].push(et)}function rt(et,st){var Nt=null;switch(et){case fl:Nt=new Int8Array(ie(st),0,st);break;case Va:Nt=new Uint8Array(ie(st),0,st);break;case dl:Nt=new Int16Array(ie(2*st),0,st);break;case lu:Nt=new Uint16Array(ie(2*st),0,st);break;case zd:Nt=new Int32Array(ie(4*st),0,st);break;case bc:Nt=new Uint32Array(ie(4*st),0,st);break;case da:Nt=new Float32Array(ie(4*st),0,st);break;default:return null}return Nt.length!==st?Nt.subarray(0,st):Nt}function ht(et){be(et.buffer)}return{alloc:ie,free:be,allocType:rt,freeType:ht}}var mo=jf();mo.zero=jf();var _c=3408,Yi=3410,ta=3411,xs=3412,Aa=3413,pa=3414,Ta=3415,wc=33901,Ec=33902,If=3379,zu=3386,Lf=34921,Oc=36347,Hd=36348,Cl=35661,Ff=35660,pl=34930,xc=36349,Ss=34076,Sc=34024,Ac=7936,Xd=7937,$f=7938,Hr=35724,Vr=34047,Bf=36063,uu=34852,ha=3553,As=34067,Uf=34069,Io=33984,jl=6408,Il=5126,Ts=5121,su=36160,Ei=36053,Tc=36064,Vf=16384,Mc=function(B,ie){var be=1;ie.ext_texture_filter_anisotropic&&(be=B.getParameter(Vr));var rt=1,ht=1;ie.webgl_draw_buffers&&(rt=B.getParameter(uu),ht=B.getParameter(Bf));var et=!!ie.oes_texture_float;if(et){var st=B.createTexture();B.bindTexture(ha,st),B.texImage2D(ha,0,jl,1,1,0,jl,Il,null);var Nt=B.createFramebuffer();if(B.bindFramebuffer(su,Nt),B.framebufferTexture2D(su,Tc,ha,st,0),B.bindTexture(ha,null),B.checkFramebufferStatus(su)!==Ei)et=!1;else{B.viewport(0,0,1,1),B.clearColor(1,0,0,1),B.clear(Vf);var It=mo.allocType(Il,4);B.readPixels(0,0,1,1,jl,Il,It),B.getError()?et=!1:(B.deleteFramebuffer(Nt),B.deleteTexture(st),et=It[0]===1),mo.freeType(It)}}var Ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ct=!0;if(!Ct){var Gt=B.createTexture(),Ut=mo.allocType(Ts,36);B.activeTexture(Io),B.bindTexture(As,Gt),B.texImage2D(Uf,0,jl,3,3,0,jl,Ts,Ut),mo.freeType(Ut),B.bindTexture(As,null),B.deleteTexture(Gt),ct=!B.getError()}return{colorBits:[B.getParameter(Yi),B.getParameter(ta),B.getParameter(xs),B.getParameter(Aa)],depthBits:B.getParameter(pa),stencilBits:B.getParameter(Ta),subpixelBits:B.getParameter(_c),extensions:Object.keys(ie).filter(function(Rt){return!!ie[Rt]}),maxAnisotropic:be,maxDrawbuffers:rt,maxColorAttachments:ht,pointSizeDims:B.getParameter(wc),lineWidthDims:B.getParameter(Ec),maxViewportDims:B.getParameter(zu),maxCombinedTextureUnits:B.getParameter(Cl),maxCubeMapSize:B.getParameter(Ss),maxRenderbufferSize:B.getParameter(Sc),maxTextureUnits:B.getParameter(pl),maxTextureSize:B.getParameter(If),maxAttributes:B.getParameter(Lf),maxVertexUniforms:B.getParameter(Oc),maxVertexTextureUnits:B.getParameter(Ff),maxVaryingVectors:B.getParameter(Hd),maxFragmentUniforms:B.getParameter(xc),glsl:B.getParameter(Hr),renderer:B.getParameter(Xd),vendor:B.getParameter(Ac),version:B.getParameter($f),readFloat:et,npotTextureCube:ct}};function ji(B){return!!B&&typeof B=="object"&&Array.isArray(B.shape)&&Array.isArray(B.stride)&&typeof B.offset=="number"&&B.shape.length===B.stride.length&&(Array.isArray(B.data)||n(B.data))}var si=function(B){return Object.keys(B).map(function(ie){return B[ie]})},na={shape:Li,flatten:Wf};function io(B,ie,be){for(var rt=0;rt<ie;++rt)be[rt]=B[rt]}function Gf(B,ie,be,rt){for(var ht=0,et=0;et<ie;++et)for(var st=B[et],Nt=0;Nt<be;++Nt)rt[ht++]=st[Nt]}function Ii(B,ie,be,rt,ht,et){for(var st=et,Nt=0;Nt<ie;++Nt)for(var It=B[Nt],Ct=0;Ct<be;++Ct)for(var ct=It[Ct],Gt=0;Gt<rt;++Gt)ht[st++]=ct[Gt]}function kc(B,ie,be,rt,ht){for(var et=1,st=be+1;st<ie.length;++st)et*=ie[st];var Nt=ie[be];if(ie.length-be===4){var It=ie[be+1],Ct=ie[be+2],ct=ie[be+3];for(st=0;st<Nt;++st)Ii(B[st],It,Ct,ct,rt,ht),ht+=et}else for(st=0;st<Nt;++st)kc(B[st],ie,be+1,rt,ht),ht+=et}function Wf(B,ie,be,rt){var ht=1;if(ie.length)for(var et=0;et<ie.length;++et)ht*=ie[et];else ht=0;var st=rt||mo.allocType(be,ht);switch(ie.length){case 0:break;case 1:io(B,ie[0],st);break;case 2:Gf(B,ie[0],ie[1],st);break;case 3:Ii(B,ie[0],ie[1],ie[2],st,0);break;default:kc(B,ie,0,st,0)}return st}function Li(B){for(var ie=[],be=B;be.length;be=be[0])ie.push(be.length);return ie}var Ni={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pc=5120,Lr=5122,ci=5124,Ms=5121,zf=5123,Nc=5125,ks=5126,Ga=5126,Fi={int8:Pc,int16:Lr,int32:ci,uint8:Ms,uint16:zf,uint32:Nc,float:ks,float32:Ga},cu=35048,Ki=35040,va={dynamic:cu,stream:Ki,static:35044},Mr=na.flatten,$i=na.shape,Ma=35044,yi=35040,fu=5121,Ll=5126,ka=[];ka[5120]=1,ka[5122]=2,ka[5124]=4,ka[5121]=1,ka[5123]=2,ka[5125]=4,ka[5126]=4;function po(B){return Ni[Object.prototype.toString.call(B)]|0}function Hu(B,ie){for(var be=0;be<ie.length;++be)B[be]=ie[be]}function Wa(B,ie,be,rt,ht,et,st){for(var Nt=0,It=0;It<be;++It)for(var Ct=0;Ct<rt;++Ct)B[Nt++]=ie[ht*It+et*Ct+st]}function ya(B,ie,be,rt){var ht=0,et={};function st(qe){this.id=ht++,this.buffer=B.createBuffer(),this.type=qe,this.usage=Ma,this.byteLength=0,this.dimension=1,this.dtype=fu,this.persistentData=null,be.profile&&(this.stats={size:0})}st.prototype.bind=function(){B.bindBuffer(this.type,this.buffer)},st.prototype.destroy=function(){Ut(this)};var Nt=[];function It(qe,lt){var Ft=Nt.pop();return Ft||(Ft=new st(qe)),Ft.bind(),Gt(Ft,lt,yi,0,1,!1),Ft}function Ct(qe){Nt.push(qe)}function ct(qe,lt,Ft){qe.byteLength=lt.byteLength,B.bufferData(qe.type,lt,Ft)}function Gt(qe,lt,Ft,Kt,At,Jt){var Tt;if(qe.usage=Ft,Array.isArray(lt)){if(qe.dtype=Kt||Ll,lt.length>0){var Wt;if(Array.isArray(lt[0])){Tt=$i(lt);for(var Ot=1,Xt=1;Xt<Tt.length;++Xt)Ot*=Tt[Xt];qe.dimension=Ot,Wt=Mr(lt,Tt,qe.dtype),ct(qe,Wt,Ft),Jt?qe.persistentData=Wt:mo.freeType(Wt)}else if(typeof lt[0]=="number"){qe.dimension=At;var kn=mo.allocType(qe.dtype,lt.length);Hu(kn,lt),ct(qe,kn,Ft),Jt?qe.persistentData=kn:mo.freeType(kn)}else n(lt[0])?(qe.dimension=lt[0].length,qe.dtype=Kt||po(lt[0])||Ll,Wt=Mr(lt,[lt.length,lt[0].length],qe.dtype),ct(qe,Wt,Ft),Jt?qe.persistentData=Wt:mo.freeType(Wt)):re.raise("invalid buffer data")}}else if(n(lt))qe.dtype=Kt||po(lt),qe.dimension=At,ct(qe,lt,Ft),Jt&&(qe.persistentData=new Uint8Array(new Uint8Array(lt.buffer)));else if(ji(lt)){Tt=lt.shape;var zn=lt.stride,Lt=lt.offset,Mt=0,xt=0,Cn=0,nr=0;Tt.length===1?(Mt=Tt[0],xt=1,Cn=zn[0],nr=0):Tt.length===2?(Mt=Tt[0],xt=Tt[1],Cn=zn[0],nr=zn[1]):re.raise("invalid shape"),qe.dtype=Kt||po(lt.data)||Ll,qe.dimension=xt;var un=mo.allocType(qe.dtype,Mt*xt);Wa(un,lt.data,Mt,xt,Cn,nr,Lt),ct(qe,un,Ft),Jt?qe.persistentData=un:mo.freeType(un)}else lt instanceof ArrayBuffer?(qe.dtype=fu,qe.dimension=At,ct(qe,lt,Ft),Jt&&(qe.persistentData=new Uint8Array(new Uint8Array(lt)))):re.raise("invalid buffer data")}function Ut(qe){ie.bufferCount--,rt(qe);var lt=qe.buffer;re(lt,"buffer must not be deleted already"),B.deleteBuffer(lt),qe.buffer=null,delete et[qe.id]}function Rt(qe,lt,Ft,Kt){ie.bufferCount++;var At=new st(lt);et[At.id]=At;function Jt(Ot){var Xt=Ma,kn=null,zn=0,Lt=0,Mt=1;return Array.isArray(Ot)||n(Ot)||ji(Ot)||Ot instanceof ArrayBuffer?kn=Ot:typeof Ot=="number"?zn=Ot|0:Ot&&(re.type(Ot,"object","buffer arguments must be an object, a number or an array"),"data"in Ot&&(re(kn===null||Array.isArray(kn)||n(kn)||ji(kn),"invalid data for buffer"),kn=Ot.data),"usage"in Ot&&(re.parameter(Ot.usage,va,"invalid buffer usage"),Xt=va[Ot.usage]),"type"in Ot&&(re.parameter(Ot.type,Fi,"invalid buffer type"),Lt=Fi[Ot.type]),"dimension"in Ot&&(re.type(Ot.dimension,"number","invalid dimension"),Mt=Ot.dimension|0),"length"in Ot&&(re.nni(zn,"buffer length must be a nonnegative integer"),zn=Ot.length|0)),At.bind(),kn?Gt(At,kn,Xt,Lt,Mt,Kt):(zn&&B.bufferData(At.type,zn,Xt),At.dtype=Lt||fu,At.usage=Xt,At.dimension=Mt,At.byteLength=zn),be.profile&&(At.stats.size=At.byteLength*ka[At.dtype]),Jt}function Tt(Ot,Xt){re(Xt+Ot.byteLength<=At.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ot.byteLength+" starting from offset "+Xt+" to a buffer of size "+At.byteLength),B.bufferSubData(At.type,Xt,Ot)}function Wt(Ot,Xt){var kn=(Xt||0)|0,zn;if(At.bind(),n(Ot)||Ot instanceof ArrayBuffer)Tt(Ot,kn);else if(Array.isArray(Ot)){if(Ot.length>0)if(typeof Ot[0]=="number"){var Lt=mo.allocType(At.dtype,Ot.length);Hu(Lt,Ot),Tt(Lt,kn),mo.freeType(Lt)}else if(Array.isArray(Ot[0])||n(Ot[0])){zn=$i(Ot);var Mt=Mr(Ot,zn,At.dtype);Tt(Mt,kn),mo.freeType(Mt)}else re.raise("invalid buffer data")}else if(ji(Ot)){zn=Ot.shape;var xt=Ot.stride,Cn=0,nr=0,un=0,er=0;zn.length===1?(Cn=zn[0],nr=1,un=xt[0],er=0):zn.length===2?(Cn=zn[0],nr=zn[1],un=xt[0],er=xt[1]):re.raise("invalid shape");var Wn=Array.isArray(Ot.data)?At.dtype:po(Ot.data),rr=mo.allocType(Wn,Cn*nr);Wa(rr,Ot.data,Cn,nr,un,er,Ot.offset),Tt(rr,kn),mo.freeType(rr)}else re.raise("invalid data for buffer subdata");return Jt}return Ft||Jt(qe),Jt._reglType="buffer",Jt._buffer=At,Jt.subdata=Wt,be.profile&&(Jt.stats=At.stats),Jt.destroy=function(){Ut(At)},Jt}function Et(){si(et).forEach(function(qe){qe.buffer=B.createBuffer(),B.bindBuffer(qe.type,qe.buffer),B.bufferData(qe.type,qe.persistentData||qe.byteLength,qe.usage)})}return be.profile&&(ie.getTotalBufferSize=function(){var qe=0;return Object.keys(et).forEach(function(lt){qe+=et[lt].stats.size}),qe}),{create:Rt,createStream:It,destroyStream:Ct,clear:function(){si(et).forEach(Ut),Nt.forEach(Ut)},getBuffer:function(qe){return qe&&qe._buffer instanceof st?qe._buffer:null},restore:Et,_initBuffer:Gt}}var Rc=0,qd=0,Dc=1,Wo=1,Fl=4,za=4,Qo={points:Rc,point:qd,lines:Dc,line:Wo,triangles:Fl,triangle:za,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Cc=0,ra=1,ma=4,Ps=5120,Bi=5121,Zi=5122,fi=5123,oa=5124,Ri=5125,ut=34963,jt=35040,$t=35044;function fn(B,ie,be,rt){var ht={},et=0,st={uint8:Bi,uint16:fi};ie.oes_element_index_uint&&(st.uint32=Ri);function Nt(Et){this.id=et++,ht[this.id]=this,this.buffer=Et,this.primType=ma,this.vertCount=0,this.type=0}Nt.prototype.bind=function(){this.buffer.bind()};var It=[];function Ct(Et){var qe=It.pop();return qe||(qe=new Nt(be.create(null,ut,!0,!1)._buffer)),Gt(qe,Et,jt,-1,-1,0,0),qe}function ct(Et){It.push(Et)}function Gt(Et,qe,lt,Ft,Kt,At,Jt){Et.buffer.bind();var Tt;if(qe){var Wt=Jt;!Jt&&(!n(qe)||ji(qe)&&!n(qe.data))&&(Wt=ie.oes_element_index_uint?Ri:fi),be._initBuffer(Et.buffer,qe,lt,Wt,3)}else B.bufferData(ut,At,lt),Et.buffer.dtype=Tt||Bi,Et.buffer.usage=lt,Et.buffer.dimension=3,Et.buffer.byteLength=At;if(Tt=Jt,!Jt){switch(Et.buffer.dtype){case Bi:case Ps:Tt=Bi;break;case fi:case Zi:Tt=fi;break;case Ri:case oa:Tt=Ri;break;default:re.raise("unsupported type for element array")}Et.buffer.dtype=Tt}Et.type=Tt,re(Tt!==Ri||!!ie.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ot=Kt;Ot<0&&(Ot=Et.buffer.byteLength,Tt===fi?Ot>>=1:Tt===Ri&&(Ot>>=2)),Et.vertCount=Ot;var Xt=Ft;if(Ft<0){Xt=ma;var kn=Et.buffer.dimension;kn===1&&(Xt=Cc),kn===2&&(Xt=ra),kn===3&&(Xt=ma)}Et.primType=Xt}function Ut(Et){rt.elementsCount--,re(Et.buffer!==null,"must not double destroy elements"),delete ht[Et.id],Et.buffer.destroy(),Et.buffer=null}function Rt(Et,qe){var lt=be.create(null,ut,!0),Ft=new Nt(lt._buffer);rt.elementsCount++;function Kt(At){if(!At)lt(),Ft.primType=ma,Ft.vertCount=0,Ft.type=Bi;else if(typeof At=="number")lt(At),Ft.primType=ma,Ft.vertCount=At|0,Ft.type=Bi;else{var Jt=null,Tt=$t,Wt=-1,Ot=-1,Xt=0,kn=0;Array.isArray(At)||n(At)||ji(At)?Jt=At:(re.type(At,"object","invalid arguments for elements"),"data"in At&&(Jt=At.data,re(Array.isArray(Jt)||n(Jt)||ji(Jt),"invalid data for element buffer")),"usage"in At&&(re.parameter(At.usage,va,"invalid element buffer usage"),Tt=va[At.usage]),"primitive"in At&&(re.parameter(At.primitive,Qo,"invalid element buffer primitive"),Wt=Qo[At.primitive]),"count"in At&&(re(typeof At.count=="number"&&At.count>=0,"invalid vertex count for elements"),Ot=At.count|0),"type"in At&&(re.parameter(At.type,st,"invalid buffer type"),kn=st[At.type]),"length"in At?Xt=At.length|0:(Xt=Ot,kn===fi||kn===Zi?Xt*=2:(kn===Ri||kn===oa)&&(Xt*=4))),Gt(Ft,Jt,Tt,Wt,Ot,Xt,kn)}return Kt}return Kt(Et),Kt._reglType="elements",Kt._elements=Ft,Kt.subdata=function(At,Jt){return lt.subdata(At,Jt),Kt},Kt.destroy=function(){Ut(Ft)},Kt}return{create:Rt,createStream:Ct,destroyStream:ct,getElements:function(Et){return typeof Et=="function"&&Et._elements instanceof Nt?Et._elements:null},clear:function(){si(ht).forEach(Ut)}}}var ur=new Float32Array(1),kr=new Uint32Array(ur.buffer),ho=5123;function T(B){for(var ie=mo.allocType(ho,B.length),be=0;be<B.length;++be)if(isNaN(B[be]))ie[be]=65535;else if(B[be]===1/0)ie[be]=31744;else if(B[be]===-1/0)ie[be]=64512;else{ur[0]=B[be];var rt=kr[0],ht=rt>>>31<<15,et=(rt<<1>>>24)-127,st=rt>>13&1024-1;if(et<-24)ie[be]=ht;else if(et<-14){var Nt=-14-et;ie[be]=ht+(st+1024>>Nt)}else et>15?ie[be]=ht+31744:ie[be]=ht+(et+15<<10)+st}return ie}function k(B){return Array.isArray(B)||n(B)}var U=function(B){return!(B&B-1)&&!!B},ne=34467,me=3553,He=34067,mt=34069,Ht=6408,_n=6406,yr=6407,ln=6409,Gr=6410,pr=32854,Cr=32855,ia=36194,Eo=32819,Ji=32820,hl=33635,vl=34042,$l=6402,du=34041,Ha=35904,pu=35906,ei=36193,Bl=33776,yl=33777,Xa=33778,qa=33779,Xu=35986,ah=35987,lh=34798,Yd=35840,jc=35841,qu=35842,Hf=35843,uh=36196,Yu=5121,Ic=5123,Xf=5125,Lo=5126,Ui=10242,qf=10243,Yf=10497,Ns=33071,Vv=33648,Rs=10240,ml=10241,Lc=9728,Ku=9729,hu=9984,Ds=9985,Fc=9986,vu=9987,Gv=33170,$c=4352,Wv=4353,zv=4354,sh=34046,Kf=3317,Di=37440,ch=37441,oe=37443,Zu=37444,Ul=33984,Pa=[hu,Fc,Ds,vu],Pr=[0,ln,Gr,yr,Ht],Oi={};Oi[ln]=Oi[_n]=Oi[$l]=1,Oi[du]=Oi[Gr]=2,Oi[yr]=Oi[Ha]=3,Oi[Ht]=Oi[pu]=4;function Fr(B){return"[object "+B+"]"}var Ya=Fr("HTMLCanvasElement"),Vl=Fr("OffscreenCanvas"),ga=Fr("CanvasRenderingContext2D"),Zf=Fr("ImageBitmap"),Jf=Fr("HTMLImageElement"),Kd=Fr("HTMLVideoElement"),fh=Object.keys(Ni).concat([Ya,Vl,ga,Zf,Jf,Kd]),Gl=[];Gl[Yu]=1,Gl[Lo]=4,Gl[ei]=2,Gl[Ic]=2,Gl[Xf]=4;var Fo=[];Fo[pr]=2,Fo[Cr]=2,Fo[ia]=2,Fo[du]=4,Fo[Bl]=.5,Fo[yl]=.5,Fo[Xa]=1,Fo[qa]=1,Fo[Xu]=.5,Fo[ah]=1,Fo[lh]=1,Fo[Yd]=.5,Fo[jc]=.25,Fo[qu]=.5,Fo[Hf]=.25,Fo[uh]=.5;function Cs(B){return Array.isArray(B)&&(B.length===0||typeof B[0]=="number")}function Zd(B){if(!Array.isArray(B))return!1;var ie=B.length;return!(ie===0||!k(B[0]))}function Wl(B){return Object.prototype.toString.call(B)}function Ka(B){return Wl(B)===Ya}function Bc(B){return Wl(B)===Vl}function yu(B){return Wl(B)===ga}function ba(B){return Wl(B)===Zf}function Jd(B){return Wl(B)===Jf}function Qd(B){return Wl(B)===Kd}function Za(B){if(!B)return!1;var ie=Wl(B);return fh.indexOf(ie)>=0?!0:Cs(B)||Zd(B)||ji(B)}function go(B){return Ni[Object.prototype.toString.call(B)]|0}function dh(B,ie){var be=ie.length;switch(B.type){case Yu:case Ic:case Xf:case Lo:var rt=mo.allocType(B.type,be);rt.set(ie),B.data=rt;break;case ei:B.data=T(ie);break;default:re.raise("unsupported texture type, must specify a typed array")}}function ep(B,ie){return mo.allocType(B.type===ei?Lo:B.type,ie)}function $o(B,ie){B.type===ei?(B.data=T(ie),mo.freeType(ie)):B.data=ie}function Xr(B,ie,be,rt,ht,et){for(var st=B.width,Nt=B.height,It=B.channels,Ct=st*Nt*It,ct=ep(B,Ct),Gt=0,Ut=0;Ut<Nt;++Ut)for(var Rt=0;Rt<st;++Rt)for(var Et=0;Et<It;++Et)ct[Gt++]=ie[be*Rt+rt*Ut+ht*Et+et];$o(B,ct)}function ti(B,ie,be,rt,ht,et){var st;if(typeof Fo[B]<"u"?st=Fo[B]:st=Oi[B]*Gl[ie],et&&(st*=6),ht){for(var Nt=0,It=be;It>=1;)Nt+=st*It*It,It/=2;return Nt}else return st*be*rt}function Or(B,ie,be,rt,ht,et,st){var Nt={"don't care":$c,"dont care":$c,nice:zv,fast:Wv},It={repeat:Yf,clamp:Ns,mirror:Vv},Ct={nearest:Lc,linear:Ku},ct=o({mipmap:vu,"nearest mipmap nearest":hu,"linear mipmap nearest":Ds,"nearest mipmap linear":Fc,"linear mipmap linear":vu},Ct),Gt={none:0,browser:Zu},Ut={uint8:Yu,rgba4:Eo,rgb565:hl,"rgb5 a1":Ji},Rt={alpha:_n,luminance:ln,"luminance alpha":Gr,rgb:yr,rgba:Ht,rgba4:pr,"rgb5 a1":Cr,rgb565:ia},Et={};ie.ext_srgb&&(Rt.srgb=Ha,Rt.srgba=pu),ie.oes_texture_float&&(Ut.float32=Ut.float=Lo),ie.oes_texture_half_float&&(Ut.float16=Ut["half float"]=ei),ie.webgl_depth_texture&&(o(Rt,{depth:$l,"depth stencil":du}),o(Ut,{uint16:Ic,uint32:Xf,"depth stencil":vl})),ie.webgl_compressed_texture_s3tc&&o(Et,{"rgb s3tc dxt1":Bl,"rgba s3tc dxt1":yl,"rgba s3tc dxt3":Xa,"rgba s3tc dxt5":qa}),ie.webgl_compressed_texture_atc&&o(Et,{"rgb atc":Xu,"rgba atc explicit alpha":ah,"rgba atc interpolated alpha":lh}),ie.webgl_compressed_texture_pvrtc&&o(Et,{"rgb pvrtc 4bppv1":Yd,"rgb pvrtc 2bppv1":jc,"rgba pvrtc 4bppv1":qu,"rgba pvrtc 2bppv1":Hf}),ie.webgl_compressed_texture_etc1&&(Et["rgb etc1"]=uh);var qe=Array.prototype.slice.call(B.getParameter(ne));Object.keys(Et).forEach(function(ye){var ot=Et[ye];qe.indexOf(ot)>=0&&(Rt[ye]=ot)});var lt=Object.keys(Rt);be.textureFormats=lt;var Ft=[];Object.keys(Rt).forEach(function(ye){var ot=Rt[ye];Ft[ot]=ye});var Kt=[];Object.keys(Ut).forEach(function(ye){var ot=Ut[ye];Kt[ot]=ye});var At=[];Object.keys(Ct).forEach(function(ye){var ot=Ct[ye];At[ot]=ye});var Jt=[];Object.keys(ct).forEach(function(ye){var ot=ct[ye];Jt[ot]=ye});var Tt=[];Object.keys(It).forEach(function(ye){var ot=It[ye];Tt[ot]=ye});var Wt=lt.reduce(function(ye,ot){var Qe=Rt[ot];return Qe===ln||Qe===_n||Qe===ln||Qe===Gr||Qe===$l||Qe===du||ie.ext_srgb&&(Qe===Ha||Qe===pu)?ye[Qe]=Qe:Qe===Cr||ot.indexOf("rgba")>=0?ye[Qe]=Ht:ye[Qe]=yr,ye},{});function Ot(){this.internalformat=Ht,this.format=Ht,this.type=Yu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zu,this.width=0,this.height=0,this.channels=0}function Xt(ye,ot){ye.internalformat=ot.internalformat,ye.format=ot.format,ye.type=ot.type,ye.compressed=ot.compressed,ye.premultiplyAlpha=ot.premultiplyAlpha,ye.flipY=ot.flipY,ye.unpackAlignment=ot.unpackAlignment,ye.colorSpace=ot.colorSpace,ye.width=ot.width,ye.height=ot.height,ye.channels=ot.channels}function kn(ye,ot){if(!(typeof ot!="object"||!ot)){if("premultiplyAlpha"in ot&&(re.type(ot.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ye.premultiplyAlpha=ot.premultiplyAlpha),"flipY"in ot&&(re.type(ot.flipY,"boolean","invalid texture flip"),ye.flipY=ot.flipY),"alignment"in ot&&(re.oneOf(ot.alignment,[1,2,4,8],"invalid texture unpack alignment"),ye.unpackAlignment=ot.alignment),"colorSpace"in ot&&(re.parameter(ot.colorSpace,Gt,"invalid colorSpace"),ye.colorSpace=Gt[ot.colorSpace]),"type"in ot){var Qe=ot.type;re(ie.oes_texture_float||!(Qe==="float"||Qe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),re(ie.oes_texture_half_float||!(Qe==="half float"||Qe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),re(ie.webgl_depth_texture||!(Qe==="uint16"||Qe==="uint32"||Qe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(Qe,Ut,"invalid texture type"),ye.type=Ut[Qe]}var tn=ye.width,hr=ye.height,se=ye.channels,te=!1;"shape"in ot?(re(Array.isArray(ot.shape)&&ot.shape.length>=2,"shape must be an array"),tn=ot.shape[0],hr=ot.shape[1],ot.shape.length===3&&(se=ot.shape[2],re(se>0&&se<=4,"invalid number of channels"),te=!0),re(tn>=0&&tn<=be.maxTextureSize,"invalid width"),re(hr>=0&&hr<=be.maxTextureSize,"invalid height")):("radius"in ot&&(tn=hr=ot.radius,re(tn>=0&&tn<=be.maxTextureSize,"invalid radius")),"width"in ot&&(tn=ot.width,re(tn>=0&&tn<=be.maxTextureSize,"invalid width")),"height"in ot&&(hr=ot.height,re(hr>=0&&hr<=be.maxTextureSize,"invalid height")),"channels"in ot&&(se=ot.channels,re(se>0&&se<=4,"invalid number of channels"),te=!0)),ye.width=tn|0,ye.height=hr|0,ye.channels=se|0;var Te=!1;if("format"in ot){var We=ot.format;re(ie.webgl_depth_texture||!(We==="depth"||We==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(We,Rt,"invalid texture format");var Ye=ye.internalformat=Rt[We];ye.format=Wt[Ye],We in Ut&&("type"in ot||(ye.type=Ut[We])),We in Et&&(ye.compressed=!0),Te=!0}!te&&Te?ye.channels=Oi[ye.format]:te&&!Te?ye.channels!==Pr[ye.format]&&(ye.format=ye.internalformat=Pr[ye.channels]):Te&&te&&re(ye.channels===Oi[ye.format],"number of channels inconsistent with specified format")}}function zn(ye){B.pixelStorei(Di,ye.flipY),B.pixelStorei(ch,ye.premultiplyAlpha),B.pixelStorei(oe,ye.colorSpace),B.pixelStorei(Kf,ye.unpackAlignment)}function Lt(){Ot.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(ye,ot){var Qe=null;if(Za(ot)?Qe=ot:ot&&(re.type(ot,"object","invalid pixel data type"),kn(ye,ot),"x"in ot&&(ye.xOffset=ot.x|0),"y"in ot&&(ye.yOffset=ot.y|0),Za(ot.data)&&(Qe=ot.data)),re(!ye.compressed||Qe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ot.copy){re(!Qe,"can not specify copy and data field for the same texture");var tn=ht.viewportWidth,hr=ht.viewportHeight;ye.width=ye.width||tn-ye.xOffset,ye.height=ye.height||hr-ye.yOffset,ye.needsCopy=!0,re(ye.xOffset>=0&&ye.xOffset<tn&&ye.yOffset>=0&&ye.yOffset<hr&&ye.width>0&&ye.width<=tn&&ye.height>0&&ye.height<=hr,"copy texture read out of bounds")}else if(!Qe)ye.width=ye.width||1,ye.height=ye.height||1,ye.channels=ye.channels||4;else if(n(Qe))ye.channels=ye.channels||4,ye.data=Qe,!("type"in ot)&&ye.type===Yu&&(ye.type=go(Qe));else if(Cs(Qe))ye.channels=ye.channels||4,dh(ye,Qe),ye.alignment=1,ye.needsFree=!0;else if(ji(Qe)){var se=Qe.data;!Array.isArray(se)&&ye.type===Yu&&(ye.type=go(se));var te=Qe.shape,Te=Qe.stride,We,Ye,De,Me,Be,de;te.length===3?(De=te[2],de=Te[2]):(re(te.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,de=1),We=te[0],Ye=te[1],Me=Te[0],Be=Te[1],ye.alignment=1,ye.width=We,ye.height=Ye,ye.channels=De,ye.format=ye.internalformat=Pr[De],ye.needsFree=!0,Xr(ye,se,Me,Be,de,Qe.offset)}else if(Ka(Qe)||Bc(Qe)||yu(Qe))Ka(Qe)||Bc(Qe)?ye.element=Qe:ye.element=Qe.canvas,ye.width=ye.element.width,ye.height=ye.element.height,ye.channels=4;else if(ba(Qe))ye.element=Qe,ye.width=Qe.width,ye.height=Qe.height,ye.channels=4;else if(Jd(Qe))ye.element=Qe,ye.width=Qe.naturalWidth,ye.height=Qe.naturalHeight,ye.channels=4;else if(Qd(Qe))ye.element=Qe,ye.width=Qe.videoWidth,ye.height=Qe.videoHeight,ye.channels=4;else if(Zd(Qe)){var Ee=ye.width||Qe[0].length,fe=ye.height||Qe.length,Ge=ye.channels;k(Qe[0][0])?Ge=Ge||Qe[0][0].length:Ge=Ge||1;for(var Ze=na.shape(Qe),d=1,m=0;m<Ze.length;++m)d*=Ze[m];var O=ep(ye,d);na.flatten(Qe,Ze,"",O),$o(ye,O),ye.alignment=1,ye.width=Ee,ye.height=fe,ye.channels=Ge,ye.format=ye.internalformat=Pr[Ge],ye.needsFree=!0}ye.type===Lo?re(be.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ye.type===ei&&re(be.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function xt(ye,ot,Qe){var tn=ye.element,hr=ye.data,se=ye.internalformat,te=ye.format,Te=ye.type,We=ye.width,Ye=ye.height;zn(ye),tn?B.texImage2D(ot,Qe,te,te,Te,tn):ye.compressed?B.compressedTexImage2D(ot,Qe,se,We,Ye,0,hr):ye.needsCopy?(rt(),B.copyTexImage2D(ot,Qe,te,ye.xOffset,ye.yOffset,We,Ye,0)):B.texImage2D(ot,Qe,te,We,Ye,0,te,Te,hr||null)}function Cn(ye,ot,Qe,tn,hr){var se=ye.element,te=ye.data,Te=ye.internalformat,We=ye.format,Ye=ye.type,De=ye.width,Me=ye.height;zn(ye),se?B.texSubImage2D(ot,hr,Qe,tn,We,Ye,se):ye.compressed?B.compressedTexSubImage2D(ot,hr,Qe,tn,Te,De,Me,te):ye.needsCopy?(rt(),B.copyTexSubImage2D(ot,hr,Qe,tn,ye.xOffset,ye.yOffset,De,Me)):B.texSubImage2D(ot,hr,Qe,tn,De,Me,We,Ye,te)}var nr=[];function un(){return nr.pop()||new Lt}function er(ye){ye.needsFree&&mo.freeType(ye.data),Lt.call(ye),nr.push(ye)}function Wn(){Ot.call(this),this.genMipmaps=!1,this.mipmapHint=$c,this.mipmask=0,this.images=Array(16)}function rr(ye,ot,Qe){var tn=ye.images[0]=un();ye.mipmask=1,tn.width=ye.width=ot,tn.height=ye.height=Qe,tn.channels=ye.channels=4}function gr(ye,ot){var Qe=null;if(Za(ot))Qe=ye.images[0]=un(),Xt(Qe,ye),Mt(Qe,ot),ye.mipmask=1;else if(kn(ye,ot),Array.isArray(ot.mipmap))for(var tn=ot.mipmap,hr=0;hr<tn.length;++hr)Qe=ye.images[hr]=un(),Xt(Qe,ye),Qe.width>>=hr,Qe.height>>=hr,Mt(Qe,tn[hr]),ye.mipmask|=1<<hr;else Qe=ye.images[0]=un(),Xt(Qe,ye),Mt(Qe,ot),ye.mipmask=1;Xt(ye,ye.images[0]),ye.compressed&&(ye.internalformat===Bl||ye.internalformat===yl||ye.internalformat===Xa||ye.internalformat===qa)&&re(ye.width%4===0&&ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function No(ye,ot){for(var Qe=ye.images,tn=0;tn<Qe.length;++tn){if(!Qe[tn])return;xt(Qe[tn],ot,tn)}}var Uo=[];function cr(){var ye=Uo.pop()||new Wn;Ot.call(ye),ye.mipmask=0;for(var ot=0;ot<16;++ot)ye.images[ot]=null;return ye}function zo(ye){for(var ot=ye.images,Qe=0;Qe<ot.length;++Qe)ot[Qe]&&er(ot[Qe]),ot[Qe]=null;Uo.push(ye)}function ro(){this.minFilter=Lc,this.magFilter=Lc,this.wrapS=Ns,this.wrapT=Ns,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=$c}function Ro(ye,ot){if("min"in ot){var Qe=ot.min;re.parameter(Qe,ct),ye.minFilter=ct[Qe],Pa.indexOf(ye.minFilter)>=0&&!("faces"in ot)&&(ye.genMipmaps=!0)}if("mag"in ot){var tn=ot.mag;re.parameter(tn,Ct),ye.magFilter=Ct[tn]}var hr=ye.wrapS,se=ye.wrapT;if("wrap"in ot){var te=ot.wrap;typeof te=="string"?(re.parameter(te,It),hr=se=It[te]):Array.isArray(te)&&(re.parameter(te[0],It),re.parameter(te[1],It),hr=It[te[0]],se=It[te[1]])}else{if("wrapS"in ot){var Te=ot.wrapS;re.parameter(Te,It),hr=It[Te]}if("wrapT"in ot){var We=ot.wrapT;re.parameter(We,It),se=It[We]}}if(ye.wrapS=hr,ye.wrapT=se,"anisotropic"in ot){var Ye=ot.anisotropic;re(typeof Ye=="number"&&Ye>=1&&Ye<=be.maxAnisotropic,"aniso samples must be between 1 and "),ye.anisotropic=ot.anisotropic}if("mipmap"in ot){var De=!1;switch(typeof ot.mipmap){case"string":re.parameter(ot.mipmap,Nt,"invalid mipmap hint"),ye.mipmapHint=Nt[ot.mipmap],ye.genMipmaps=!0,De=!0;break;case"boolean":De=ye.genMipmaps=ot.mipmap;break;case"object":re(Array.isArray(ot.mipmap),"invalid mipmap type"),ye.genMipmaps=!1,De=!0;break;default:re.raise("invalid mipmap type")}De&&!("min"in ot)&&(ye.minFilter=hu)}}function Vo(ye,ot){B.texParameteri(ot,ml,ye.minFilter),B.texParameteri(ot,Rs,ye.magFilter),B.texParameteri(ot,Ui,ye.wrapS),B.texParameteri(ot,qf,ye.wrapT),ie.ext_texture_filter_anisotropic&&B.texParameteri(ot,sh,ye.anisotropic),ye.genMipmaps&&(B.hint(Gv,ye.mipmapHint),B.generateMipmap(ot))}var So=0,bo={},ii=be.maxTextureUnits,Ao=Array(ii).map(function(){return null});function Jn(ye){Ot.call(this),this.mipmask=0,this.internalformat=Ht,this.id=So++,this.refCount=1,this.target=ye,this.texture=B.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ro,st.profile&&(this.stats={size:0})}function di(ye){B.activeTexture(Ul),B.bindTexture(ye.target,ye.texture)}function Nr(){var ye=Ao[0];ye?B.bindTexture(ye.target,ye.texture):B.bindTexture(me,null)}function Dn(ye){var ot=ye.texture;re(ot,"must not double destroy texture");var Qe=ye.unit,tn=ye.target;Qe>=0&&(B.activeTexture(Ul+Qe),B.bindTexture(tn,null),Ao[Qe]=null),B.deleteTexture(ot),ye.texture=null,ye.params=null,ye.pixels=null,ye.refCount=0,delete bo[ye.id],et.textureCount--}o(Jn.prototype,{bind:function(){var ye=this;ye.bindCount+=1;var ot=ye.unit;if(ot<0){for(var Qe=0;Qe<ii;++Qe){var tn=Ao[Qe];if(tn){if(tn.bindCount>0)continue;tn.unit=-1}Ao[Qe]=ye,ot=Qe;break}ot>=ii&&re.raise("insufficient number of texture units"),st.profile&&et.maxTextureUnits<ot+1&&(et.maxTextureUnits=ot+1),ye.unit=ot,B.activeTexture(Ul+ot),B.bindTexture(ye.target,ye.texture)}return ot},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Dn(this)}});function fr(ye,ot){var Qe=new Jn(me);bo[Qe.id]=Qe,et.textureCount++;function tn(te,Te){var We=Qe.texInfo;ro.call(We);var Ye=cr();return typeof te=="number"?typeof Te=="number"?rr(Ye,te|0,Te|0):rr(Ye,te|0,te|0):te?(re.type(te,"object","invalid arguments to regl.texture"),Ro(We,te),gr(Ye,te)):rr(Ye,1,1),We.genMipmaps&&(Ye.mipmask=(Ye.width<<1)-1),Qe.mipmask=Ye.mipmask,Xt(Qe,Ye),re.texture2D(We,Ye,be),Qe.internalformat=Ye.internalformat,tn.width=Ye.width,tn.height=Ye.height,di(Qe),No(Ye,me),Vo(We,me),Nr(),zo(Ye),st.profile&&(Qe.stats.size=ti(Qe.internalformat,Qe.type,Ye.width,Ye.height,We.genMipmaps,!1)),tn.format=Ft[Qe.internalformat],tn.type=Kt[Qe.type],tn.mag=At[We.magFilter],tn.min=Jt[We.minFilter],tn.wrapS=Tt[We.wrapS],tn.wrapT=Tt[We.wrapT],tn}function hr(te,Te,We,Ye){re(!!te,"must specify image data");var De=Te|0,Me=We|0,Be=Ye|0,de=un();return Xt(de,Qe),de.width=0,de.height=0,Mt(de,te),de.width=de.width||(Qe.width>>Be)-De,de.height=de.height||(Qe.height>>Be)-Me,re(Qe.type===de.type&&Qe.format===de.format&&Qe.internalformat===de.internalformat,"incompatible format for texture.subimage"),re(De>=0&&Me>=0&&De+de.width<=Qe.width&&Me+de.height<=Qe.height,"texture.subimage write out of bounds"),re(Qe.mipmask&1<<Be,"missing mipmap data"),re(de.data||de.element||de.needsCopy,"missing image data"),di(Qe),Cn(de,me,De,Me,Be),Nr(),er(de),tn}function se(te,Te){var We=te|0,Ye=Te|0||We;if(We===Qe.width&&Ye===Qe.height)return tn;tn.width=Qe.width=We,tn.height=Qe.height=Ye,di(Qe);for(var De=0;Qe.mipmask>>De;++De){var Me=We>>De,Be=Ye>>De;if(!Me||!Be)break;B.texImage2D(me,De,Qe.format,Me,Be,0,Qe.format,Qe.type,null)}return Nr(),st.profile&&(Qe.stats.size=ti(Qe.internalformat,Qe.type,We,Ye,!1,!1)),tn}return tn(ye,ot),tn.subimage=hr,tn.resize=se,tn._reglType="texture2d",tn._texture=Qe,st.profile&&(tn.stats=Qe.stats),tn.destroy=function(){Qe.decRef()},tn}function Hn(ye,ot,Qe,tn,hr,se){var te=new Jn(He);bo[te.id]=te,et.cubeCount++;var Te=new Array(6);function We(Me,Be,de,Ee,fe,Ge){var Ze,d=te.texInfo;for(ro.call(d),Ze=0;Ze<6;++Ze)Te[Ze]=cr();if(typeof Me=="number"||!Me){var m=Me|0||1;for(Ze=0;Ze<6;++Ze)rr(Te[Ze],m,m)}else if(typeof Me=="object")if(Be)gr(Te[0],Me),gr(Te[1],Be),gr(Te[2],de),gr(Te[3],Ee),gr(Te[4],fe),gr(Te[5],Ge);else if(Ro(d,Me),kn(te,Me),"faces"in Me){var O=Me.faces;for(re(Array.isArray(O)&&O.length===6,"cube faces must be a length 6 array"),Ze=0;Ze<6;++Ze)re(typeof O[Ze]=="object"&&!!O[Ze],"invalid input for cube map face"),Xt(Te[Ze],te),gr(Te[Ze],O[Ze])}else for(Ze=0;Ze<6;++Ze)gr(Te[Ze],Me);else re.raise("invalid arguments to cube map");for(Xt(te,Te[0]),be.npotTextureCube||re(U(te.width)&&U(te.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?te.mipmask=(Te[0].width<<1)-1:te.mipmask=Te[0].mipmask,re.textureCube(te,d,Te,be),te.internalformat=Te[0].internalformat,We.width=Te[0].width,We.height=Te[0].height,di(te),Ze=0;Ze<6;++Ze)No(Te[Ze],mt+Ze);for(Vo(d,He),Nr(),st.profile&&(te.stats.size=ti(te.internalformat,te.type,We.width,We.height,d.genMipmaps,!0)),We.format=Ft[te.internalformat],We.type=Kt[te.type],We.mag=At[d.magFilter],We.min=Jt[d.minFilter],We.wrapS=Tt[d.wrapS],We.wrapT=Tt[d.wrapT],Ze=0;Ze<6;++Ze)zo(Te[Ze]);return We}function Ye(Me,Be,de,Ee,fe){re(!!Be,"must specify image data"),re(typeof Me=="number"&&Me===(Me|0)&&Me>=0&&Me<6,"invalid face");var Ge=de|0,Ze=Ee|0,d=fe|0,m=un();return Xt(m,te),m.width=0,m.height=0,Mt(m,Be),m.width=m.width||(te.width>>d)-Ge,m.height=m.height||(te.height>>d)-Ze,re(te.type===m.type&&te.format===m.format&&te.internalformat===m.internalformat,"incompatible format for texture.subimage"),re(Ge>=0&&Ze>=0&&Ge+m.width<=te.width&&Ze+m.height<=te.height,"texture.subimage write out of bounds"),re(te.mipmask&1<<d,"missing mipmap data"),re(m.data||m.element||m.needsCopy,"missing image data"),di(te),Cn(m,mt+Me,Ge,Ze,d),Nr(),er(m),We}function De(Me){var Be=Me|0;if(Be!==te.width){We.width=te.width=Be,We.height=te.height=Be,di(te);for(var de=0;de<6;++de)for(var Ee=0;te.mipmask>>Ee;++Ee)B.texImage2D(mt+de,Ee,te.format,Be>>Ee,Be>>Ee,0,te.format,te.type,null);return Nr(),st.profile&&(te.stats.size=ti(te.internalformat,te.type,We.width,We.height,!1,!0)),We}}return We(ye,ot,Qe,tn,hr,se),We.subimage=Ye,We.resize=De,We._reglType="textureCube",We._texture=te,st.profile&&(We.stats=te.stats),We.destroy=function(){te.decRef()},We}function fo(){for(var ye=0;ye<ii;++ye)B.activeTexture(Ul+ye),B.bindTexture(me,null),Ao[ye]=null;si(bo).forEach(Dn),et.cubeCount=0,et.textureCount=0}st.profile&&(et.getTotalTextureSize=function(){var ye=0;return Object.keys(bo).forEach(function(ot){ye+=bo[ot].stats.size}),ye});function La(){for(var ye=0;ye<ii;++ye){var ot=Ao[ye];ot&&(ot.bindCount=0,ot.unit=-1,Ao[ye]=null)}si(bo).forEach(function(Qe){Qe.texture=B.createTexture(),B.bindTexture(Qe.target,Qe.texture);for(var tn=0;tn<32;++tn)if(Qe.mipmask&1<<tn)if(Qe.target===me)B.texImage2D(me,tn,Qe.internalformat,Qe.width>>tn,Qe.height>>tn,0,Qe.internalformat,Qe.type,null);else for(var hr=0;hr<6;++hr)B.texImage2D(mt+hr,tn,Qe.internalformat,Qe.width>>tn,Qe.height>>tn,0,Qe.internalformat,Qe.type,null);Vo(Qe.texInfo,Qe.target)})}function Ql(){for(var ye=0;ye<ii;++ye){var ot=Ao[ye];ot&&(ot.bindCount=0,ot.unit=-1,Ao[ye]=null),B.activeTexture(Ul+ye),B.bindTexture(me,null),B.bindTexture(He,null)}}return{create2D:fr,createCube:Hn,clear:fo,getTexture:function(ye){return null},restore:La,refresh:Ql}}var so=36161,Rn=32854,co=32855,Uc=36194,gl=33189,Qf=36168,Oo=34041,To=35907,tp=34836,np=34842,Vc=34843,Vi=[];Vi[Rn]=2,Vi[co]=2,Vi[Uc]=2,Vi[gl]=2,Vi[Qf]=1,Vi[Oo]=4,Vi[To]=4,Vi[tp]=16,Vi[np]=8,Vi[Vc]=6;function ed(B,ie,be){return Vi[B]*ie*be}var js=function(B,ie,be,rt,ht){var et={rgba4:Rn,rgb565:Uc,"rgb5 a1":co,depth:gl,stencil:Qf,"depth stencil":Oo};ie.ext_srgb&&(et.srgba=To),ie.ext_color_buffer_half_float&&(et.rgba16f=np,et.rgb16f=Vc),ie.webgl_color_buffer_float&&(et.rgba32f=tp);var st=[];Object.keys(et).forEach(function(Rt){var Et=et[Rt];st[Et]=Rt});var Nt=0,It={};function Ct(Rt){this.id=Nt++,this.refCount=1,this.renderbuffer=Rt,this.format=Rn,this.width=0,this.height=0,ht.profile&&(this.stats={size:0})}Ct.prototype.decRef=function(){--this.refCount<=0&&ct(this)};function ct(Rt){var Et=Rt.renderbuffer;re(Et,"must not double destroy renderbuffer"),B.bindRenderbuffer(so,null),B.deleteRenderbuffer(Et),Rt.renderbuffer=null,Rt.refCount=0,delete It[Rt.id],rt.renderbufferCount--}function Gt(Rt,Et){var qe=new Ct(B.createRenderbuffer());It[qe.id]=qe,rt.renderbufferCount++;function lt(Kt,At){var Jt=0,Tt=0,Wt=Rn;if(typeof Kt=="object"&&Kt){var Ot=Kt;if("shape"in Ot){var Xt=Ot.shape;re(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Jt=Xt[0]|0,Tt=Xt[1]|0}else"radius"in Ot&&(Jt=Tt=Ot.radius|0),"width"in Ot&&(Jt=Ot.width|0),"height"in Ot&&(Tt=Ot.height|0);"format"in Ot&&(re.parameter(Ot.format,et,"invalid renderbuffer format"),Wt=et[Ot.format])}else typeof Kt=="number"?(Jt=Kt|0,typeof At=="number"?Tt=At|0:Tt=Jt):Kt?re.raise("invalid arguments to renderbuffer constructor"):Jt=Tt=1;if(re(Jt>0&&Tt>0&&Jt<=be.maxRenderbufferSize&&Tt<=be.maxRenderbufferSize,"invalid renderbuffer size"),!(Jt===qe.width&&Tt===qe.height&&Wt===qe.format))return lt.width=qe.width=Jt,lt.height=qe.height=Tt,qe.format=Wt,B.bindRenderbuffer(so,qe.renderbuffer),B.renderbufferStorage(so,Wt,Jt,Tt),re(B.getError()===0,"invalid render buffer format"),ht.profile&&(qe.stats.size=ed(qe.format,qe.width,qe.height)),lt.format=st[qe.format],lt}function Ft(Kt,At){var Jt=Kt|0,Tt=At|0||Jt;return Jt===qe.width&&Tt===qe.height||(re(Jt>0&&Tt>0&&Jt<=be.maxRenderbufferSize&&Tt<=be.maxRenderbufferSize,"invalid renderbuffer size"),lt.width=qe.width=Jt,lt.height=qe.height=Tt,B.bindRenderbuffer(so,qe.renderbuffer),B.renderbufferStorage(so,qe.format,Jt,Tt),re(B.getError()===0,"invalid render buffer format"),ht.profile&&(qe.stats.size=ed(qe.format,qe.width,qe.height))),lt}return lt(Rt,Et),lt.resize=Ft,lt._reglType="renderbuffer",lt._renderbuffer=qe,ht.profile&&(lt.stats=qe.stats),lt.destroy=function(){qe.decRef()},lt}ht.profile&&(rt.getTotalRenderbufferSize=function(){var Rt=0;return Object.keys(It).forEach(function(Et){Rt+=It[Et].stats.size}),Rt});function Ut(){si(It).forEach(function(Rt){Rt.renderbuffer=B.createRenderbuffer(),B.bindRenderbuffer(so,Rt.renderbuffer),B.renderbufferStorage(so,Rt.format,Rt.width,Rt.height)}),B.bindRenderbuffer(so,null)}return{create:Gt,clear:function(){si(It).forEach(ct)},restore:Ut}},Na=36160,mu=36161,zl=3553,Ra=34069,ph=36064,bl=36096,_a=36128,rp=33306,op=36053,td=36054,hh=36055,vh=36057,yh=36061,ip=36193,Is=5121,ap=5126,Gc=6407,xr=6408,Hv=6402,lp=[Gc,xr],gu=[];gu[xr]=4,gu[Gc]=3;var Wc=[];Wc[Is]=1,Wc[ap]=4,Wc[ip]=2;var Xv=32854,qv=32855,Da=36194,up=33189,nd=36168,rd=34041,mh=35907,sp=34836,aa=34842,bu=34843,od=[Xv,qv,Da,mh,aa,bu,sp],Ju={};Ju[op]="complete",Ju[td]="incomplete attachment",Ju[vh]="incomplete dimensions",Ju[hh]="incomplete, missing attachment",Ju[yh]="unsupported";function zc(B,ie,be,rt,ht,et){var st={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],It=["rgba4","rgb565","rgb5 a1"];ie.ext_srgb&&It.push("srgba"),ie.ext_color_buffer_half_float&&It.push("rgba16f","rgb16f"),ie.webgl_color_buffer_float&&It.push("rgba32f");var Ct=["uint8"];ie.oes_texture_half_float&&Ct.push("half float","float16"),ie.oes_texture_float&&Ct.push("float","float32");function ct(Lt,Mt,xt){this.target=Lt,this.texture=Mt,this.renderbuffer=xt;var Cn=0,nr=0;Mt?(Cn=Mt.width,nr=Mt.height):xt&&(Cn=xt.width,nr=xt.height),this.width=Cn,this.height=nr}function Gt(Lt){Lt&&(Lt.texture&&Lt.texture._texture.decRef(),Lt.renderbuffer&&Lt.renderbuffer._renderbuffer.decRef())}function Ut(Lt,Mt,xt){if(Lt)if(Lt.texture){var Cn=Lt.texture._texture,nr=Math.max(1,Cn.width),un=Math.max(1,Cn.height);re(nr===Mt&&un===xt,"inconsistent width/height for supplied texture"),Cn.refCount+=1}else{var er=Lt.renderbuffer._renderbuffer;re(er.width===Mt&&er.height===xt,"inconsistent width/height for renderbuffer"),er.refCount+=1}}function Rt(Lt,Mt){Mt&&(Mt.texture?B.framebufferTexture2D(Na,Lt,Mt.target,Mt.texture._texture.texture,0):B.framebufferRenderbuffer(Na,Lt,mu,Mt.renderbuffer._renderbuffer.renderbuffer))}function Et(Lt){var Mt=zl,xt=null,Cn=null,nr=Lt;typeof Lt=="object"&&(nr=Lt.data,"target"in Lt&&(Mt=Lt.target|0)),re.type(nr,"function","invalid attachment data");var un=nr._reglType;return un==="texture2d"?(xt=nr,re(Mt===zl)):un==="textureCube"?(xt=nr,re(Mt>=Ra&&Mt<Ra+6,"invalid cube map target")):un==="renderbuffer"?(Cn=nr,Mt=mu):re.raise("invalid regl object for attachment"),new ct(Mt,xt,Cn)}function qe(Lt,Mt,xt,Cn,nr){if(xt){var un=rt.create2D({width:Lt,height:Mt,format:Cn,type:nr});return un._texture.refCount=0,new ct(zl,un,null)}else{var er=ht.create({width:Lt,height:Mt,format:Cn});return er._renderbuffer.refCount=0,new ct(mu,null,er)}}function lt(Lt){return Lt&&(Lt.texture||Lt.renderbuffer)}function Ft(Lt,Mt,xt){Lt&&(Lt.texture?Lt.texture.resize(Mt,xt):Lt.renderbuffer&&Lt.renderbuffer.resize(Mt,xt),Lt.width=Mt,Lt.height=xt)}var Kt=0,At={};function Jt(){this.id=Kt++,At[this.id]=this,this.framebuffer=B.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Tt(Lt){Lt.colorAttachments.forEach(Gt),Gt(Lt.depthAttachment),Gt(Lt.stencilAttachment),Gt(Lt.depthStencilAttachment)}function Wt(Lt){var Mt=Lt.framebuffer;re(Mt,"must not double destroy framebuffer"),B.deleteFramebuffer(Mt),Lt.framebuffer=null,et.framebufferCount--,delete At[Lt.id]}function Ot(Lt){var Mt;B.bindFramebuffer(Na,Lt.framebuffer);var xt=Lt.colorAttachments;for(Mt=0;Mt<xt.length;++Mt)Rt(ph+Mt,xt[Mt]);for(Mt=xt.length;Mt<be.maxColorAttachments;++Mt)B.framebufferTexture2D(Na,ph+Mt,zl,null,0);B.framebufferTexture2D(Na,rp,zl,null,0),B.framebufferTexture2D(Na,bl,zl,null,0),B.framebufferTexture2D(Na,_a,zl,null,0),Rt(bl,Lt.depthAttachment),Rt(_a,Lt.stencilAttachment),Rt(rp,Lt.depthStencilAttachment);var Cn=B.checkFramebufferStatus(Na);!B.isContextLost()&&Cn!==op&&re.raise("framebuffer configuration not supported, status = "+Ju[Cn]),B.bindFramebuffer(Na,st.next?st.next.framebuffer:null),st.cur=st.next,B.getError()}function Xt(Lt,Mt){var xt=new Jt;et.framebufferCount++;function Cn(un,er){var Wn;re(st.next!==xt,"can not update framebuffer which is currently in use");var rr=0,gr=0,No=!0,Uo=!0,cr=null,zo=!0,ro="rgba",Ro="uint8",Vo=1,So=null,bo=null,ii=null,Ao=!1;if(typeof un=="number")rr=un|0,gr=er|0||rr;else if(!un)rr=gr=1;else{re.type(un,"object","invalid arguments for framebuffer");var Jn=un;if("shape"in Jn){var di=Jn.shape;re(Array.isArray(di)&&di.length>=2,"invalid shape for framebuffer"),rr=di[0],gr=di[1]}else"radius"in Jn&&(rr=gr=Jn.radius),"width"in Jn&&(rr=Jn.width),"height"in Jn&&(gr=Jn.height);("color"in Jn||"colors"in Jn)&&(cr=Jn.color||Jn.colors,Array.isArray(cr)&&re(cr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),cr||("colorCount"in Jn&&(Vo=Jn.colorCount|0,re(Vo>0,"invalid color buffer count")),"colorTexture"in Jn&&(zo=!!Jn.colorTexture,ro="rgba4"),"colorType"in Jn&&(Ro=Jn.colorType,zo?(re(ie.oes_texture_float||!(Ro==="float"||Ro==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),re(ie.oes_texture_half_float||!(Ro==="half float"||Ro==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ro==="half float"||Ro==="float16"?(re(ie.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ro="rgba16f"):(Ro==="float"||Ro==="float32")&&(re(ie.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ro="rgba32f"),re.oneOf(Ro,Ct,"invalid color type")),"colorFormat"in Jn&&(ro=Jn.colorFormat,Nt.indexOf(ro)>=0?zo=!0:It.indexOf(ro)>=0?zo=!1:zo?re.oneOf(Jn.colorFormat,Nt,"invalid color format for texture"):re.oneOf(Jn.colorFormat,It,"invalid color format for renderbuffer"))),("depthTexture"in Jn||"depthStencilTexture"in Jn)&&(Ao=!!(Jn.depthTexture||Jn.depthStencilTexture),re(!Ao||ie.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Jn&&(typeof Jn.depth=="boolean"?No=Jn.depth:(So=Jn.depth,Uo=!1)),"stencil"in Jn&&(typeof Jn.stencil=="boolean"?Uo=Jn.stencil:(bo=Jn.stencil,No=!1)),"depthStencil"in Jn&&(typeof Jn.depthStencil=="boolean"?No=Uo=Jn.depthStencil:(ii=Jn.depthStencil,No=!1,Uo=!1))}var Nr=null,Dn=null,fr=null,Hn=null;if(Array.isArray(cr))Nr=cr.map(Et);else if(cr)Nr=[Et(cr)];else for(Nr=new Array(Vo),Wn=0;Wn<Vo;++Wn)Nr[Wn]=qe(rr,gr,zo,ro,Ro);re(ie.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),re(Nr.length<=be.maxColorAttachments,"too many color attachments, not supported"),rr=rr||Nr[0].width,gr=gr||Nr[0].height,So?Dn=Et(So):No&&!Uo&&(Dn=qe(rr,gr,Ao,"depth","uint32")),bo?fr=Et(bo):Uo&&!No&&(fr=qe(rr,gr,!1,"stencil","uint8")),ii?Hn=Et(ii):!So&&!bo&&Uo&&No&&(Hn=qe(rr,gr,Ao,"depth stencil","depth stencil")),re(!!So+!!bo+!!ii<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var fo=null;for(Wn=0;Wn<Nr.length;++Wn)if(Ut(Nr[Wn],rr,gr),re(!Nr[Wn]||Nr[Wn].texture&&lp.indexOf(Nr[Wn].texture._texture.format)>=0||Nr[Wn].renderbuffer&&od.indexOf(Nr[Wn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Wn+" is invalid"),Nr[Wn]&&Nr[Wn].texture){var La=gu[Nr[Wn].texture._texture.format]*Wc[Nr[Wn].texture._texture.type];fo===null?fo=La:re(fo===La,"all color attachments much have the same number of bits per pixel.")}return Ut(Dn,rr,gr),re(!Dn||Dn.texture&&Dn.texture._texture.format===Hv||Dn.renderbuffer&&Dn.renderbuffer._renderbuffer.format===up,"invalid depth attachment for framebuffer object"),Ut(fr,rr,gr),re(!fr||fr.renderbuffer&&fr.renderbuffer._renderbuffer.format===nd,"invalid stencil attachment for framebuffer object"),Ut(Hn,rr,gr),re(!Hn||Hn.texture&&Hn.texture._texture.format===rd||Hn.renderbuffer&&Hn.renderbuffer._renderbuffer.format===rd,"invalid depth-stencil attachment for framebuffer object"),Tt(xt),xt.width=rr,xt.height=gr,xt.colorAttachments=Nr,xt.depthAttachment=Dn,xt.stencilAttachment=fr,xt.depthStencilAttachment=Hn,Cn.color=Nr.map(lt),Cn.depth=lt(Dn),Cn.stencil=lt(fr),Cn.depthStencil=lt(Hn),Cn.width=xt.width,Cn.height=xt.height,Ot(xt),Cn}function nr(un,er){re(st.next!==xt,"can not resize a framebuffer which is currently in use");var Wn=Math.max(un|0,1),rr=Math.max(er|0||Wn,1);if(Wn===xt.width&&rr===xt.height)return Cn;for(var gr=xt.colorAttachments,No=0;No<gr.length;++No)Ft(gr[No],Wn,rr);return Ft(xt.depthAttachment,Wn,rr),Ft(xt.stencilAttachment,Wn,rr),Ft(xt.depthStencilAttachment,Wn,rr),xt.width=Cn.width=Wn,xt.height=Cn.height=rr,Ot(xt),Cn}return Cn(Lt,Mt),o(Cn,{resize:nr,_reglType:"framebuffer",_framebuffer:xt,destroy:function(){Wt(xt),Tt(xt)},use:function(un){st.setFBO({framebuffer:Cn},un)}})}function kn(Lt){var Mt=Array(6);function xt(nr){var un;re(Mt.indexOf(st.next)<0,"can not update framebuffer which is currently in use");var er={color:null},Wn=0,rr=null,gr="rgba",No="uint8",Uo=1;if(typeof nr=="number")Wn=nr|0;else if(!nr)Wn=1;else{re.type(nr,"object","invalid arguments for framebuffer");var cr=nr;if("shape"in cr){var zo=cr.shape;re(Array.isArray(zo)&&zo.length>=2,"invalid shape for framebuffer"),re(zo[0]===zo[1],"cube framebuffer must be square"),Wn=zo[0]}else"radius"in cr&&(Wn=cr.radius|0),"width"in cr?(Wn=cr.width|0,"height"in cr&&re(cr.height===Wn,"must be square")):"height"in cr&&(Wn=cr.height|0);("color"in cr||"colors"in cr)&&(rr=cr.color||cr.colors,Array.isArray(rr)&&re(rr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),rr||("colorCount"in cr&&(Uo=cr.colorCount|0,re(Uo>0,"invalid color buffer count")),"colorType"in cr&&(re.oneOf(cr.colorType,Ct,"invalid color type"),No=cr.colorType),"colorFormat"in cr&&(gr=cr.colorFormat,re.oneOf(cr.colorFormat,Nt,"invalid color format for texture"))),"depth"in cr&&(er.depth=cr.depth),"stencil"in cr&&(er.stencil=cr.stencil),"depthStencil"in cr&&(er.depthStencil=cr.depthStencil)}var ro;if(rr)if(Array.isArray(rr))for(ro=[],un=0;un<rr.length;++un)ro[un]=rr[un];else ro=[rr];else{ro=Array(Uo);var Ro={radius:Wn,format:gr,type:No};for(un=0;un<Uo;++un)ro[un]=rt.createCube(Ro)}for(er.color=Array(ro.length),un=0;un<ro.length;++un){var Vo=ro[un];re(typeof Vo=="function"&&Vo._reglType==="textureCube","invalid cube map"),Wn=Wn||Vo.width,re(Vo.width===Wn&&Vo.height===Wn,"invalid cube map shape"),er.color[un]={target:Ra,data:ro[un]}}for(un=0;un<6;++un){for(var So=0;So<ro.length;++So)er.color[So].target=Ra+un;un>0&&(er.depth=Mt[0].depth,er.stencil=Mt[0].stencil,er.depthStencil=Mt[0].depthStencil),Mt[un]?Mt[un](er):Mt[un]=Xt(er)}return o(xt,{width:Wn,height:Wn,color:ro})}function Cn(nr){var un,er=nr|0;if(re(er>0&&er<=be.maxCubeMapSize,"invalid radius for cube fbo"),er===xt.width)return xt;var Wn=xt.color;for(un=0;un<Wn.length;++un)Wn[un].resize(er);for(un=0;un<6;++un)Mt[un].resize(er);return xt.width=xt.height=er,xt}return xt(Lt),o(xt,{faces:Mt,resize:Cn,_reglType:"framebufferCube",destroy:function(){Mt.forEach(function(nr){nr.destroy()})}})}function zn(){st.cur=null,st.next=null,st.dirty=!0,si(At).forEach(function(Lt){Lt.framebuffer=B.createFramebuffer(),Ot(Lt)})}return o(st,{getFramebuffer:function(Lt){if(typeof Lt=="function"&&Lt._reglType==="framebuffer"){var Mt=Lt._framebuffer;if(Mt instanceof Jt)return Mt}return null},create:Xt,createCube:kn,clear:function(){si(At).forEach(Wt)},restore:zn})}var gh=5126,Hc=34962;function id(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=gh,this.offset=0,this.stride=0,this.divisor=0}function ad(B,ie,be,rt,ht){for(var et=be.maxAttributes,st=new Array(et),Nt=0;Nt<et;++Nt)st[Nt]=new id;var It=0,Ct={},ct={Record:id,scope:{},state:st,currentVAO:null,targetVAO:null,restore:Ut()?At:function(){},createVAO:Jt,getVAO:Et,destroyBuffer:Gt,setVAO:Ut()?qe:lt,clear:Ut()?Ft:function(){}};function Gt(Tt){for(var Wt=0;Wt<st.length;++Wt){var Ot=st[Wt];Ot.buffer===Tt&&(B.disableVertexAttribArray(Wt),Ot.buffer=null)}}function Ut(){return ie.oes_vertex_array_object}function Rt(){return ie.angle_instanced_arrays}function Et(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null}function qe(Tt){if(Tt!==ct.currentVAO){var Wt=Ut();Tt?Wt.bindVertexArrayOES(Tt.vao):Wt.bindVertexArrayOES(null),ct.currentVAO=Tt}}function lt(Tt){if(Tt!==ct.currentVAO){if(Tt)Tt.bindAttrs();else for(var Wt=Rt(),Ot=0;Ot<st.length;++Ot){var Xt=st[Ot];Xt.buffer?(B.enableVertexAttribArray(Ot),B.vertexAttribPointer(Ot,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Wt&&Xt.divisor&&Wt.vertexAttribDivisorANGLE(Ot,Xt.divisor)):(B.disableVertexAttribArray(Ot),B.vertexAttrib4f(Ot,Xt.x,Xt.y,Xt.z,Xt.w))}ct.currentVAO=Tt}}function Ft(){si(Ct).forEach(function(Tt){Tt.destroy()})}function Kt(){this.id=++It,this.attributes=[];var Tt=Ut();Tt?this.vao=Tt.createVertexArrayOES():this.vao=null,Ct[this.id]=this,this.buffers=[]}Kt.prototype.bindAttrs=function(){for(var Tt=Rt(),Wt=this.attributes,Ot=0;Ot<Wt.length;++Ot){var Xt=Wt[Ot];Xt.buffer?(B.enableVertexAttribArray(Ot),B.bindBuffer(Hc,Xt.buffer.buffer),B.vertexAttribPointer(Ot,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),Tt&&Xt.divisor&&Tt.vertexAttribDivisorANGLE(Ot,Xt.divisor)):(B.disableVertexAttribArray(Ot),B.vertexAttrib4f(Ot,Xt.x,Xt.y,Xt.z,Xt.w))}for(var kn=Wt.length;kn<et;++kn)B.disableVertexAttribArray(kn)},Kt.prototype.refresh=function(){var Tt=Ut();Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ct.currentVAO=this)},Kt.prototype.destroy=function(){if(this.vao){var Tt=Ut();this===ct.currentVAO&&(ct.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}Ct[this.id]&&(delete Ct[this.id],rt.vaoCount-=1)};function At(){var Tt=Ut();Tt&&si(Ct).forEach(function(Wt){Wt.refresh()})}function Jt(Tt){var Wt=new Kt;rt.vaoCount+=1;function Ot(Xt){re(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),re(Xt.length<et,"too many attributes"),re(Xt.length>0,"must specify at least one attribute");var kn={},zn=Wt.attributes;zn.length=Xt.length;for(var Lt=0;Lt<Xt.length;++Lt){var Mt=Xt[Lt],xt=zn[Lt]=new id,Cn=Mt.data||Mt;if(Array.isArray(Cn)||n(Cn)||ji(Cn)){var nr;Wt.buffers[Lt]&&(nr=Wt.buffers[Lt],n(Cn)&&nr._buffer.byteLength>=Cn.byteLength?nr.subdata(Cn):(nr.destroy(),Wt.buffers[Lt]=null)),Wt.buffers[Lt]||(nr=Wt.buffers[Lt]=ht.create(Mt,Hc,!1,!0)),xt.buffer=ht.getBuffer(nr),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1,kn[Lt]=1}else ht.getBuffer(Mt)?(xt.buffer=ht.getBuffer(Mt),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1):ht.getBuffer(Mt.buffer)?(xt.buffer=ht.getBuffer(Mt.buffer),xt.size=(+Mt.size||xt.buffer.dimension)|0,xt.normalized=!!Mt.normalized||!1,"type"in Mt?(re.parameter(Mt.type,Fi,"invalid buffer type"),xt.type=Fi[Mt.type]):xt.type=xt.buffer.dtype,xt.offset=(Mt.offset||0)|0,xt.stride=(Mt.stride||0)|0,xt.divisor=(Mt.divisor||0)|0,xt.state=1,re(xt.size>=1&&xt.size<=4,"size must be between 1 and 4"),re(xt.offset>=0,"invalid offset"),re(xt.stride>=0&&xt.stride<=255,"stride must be between 0 and 255"),re(xt.divisor>=0,"divisor must be positive"),re(!xt.divisor||!!ie.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Mt?(re(Lt>0,"first attribute must not be a constant"),xt.x=+Mt.x||0,xt.y=+Mt.y||0,xt.z=+Mt.z||0,xt.w=+Mt.w||0,xt.state=2):re(!1,"invalid attribute spec for location "+Lt)}for(var un=0;un<Wt.buffers.length;++un)!kn[un]&&Wt.buffers[un]&&(Wt.buffers[un].destroy(),Wt.buffers[un]=null);return Wt.refresh(),Ot}return Ot.destroy=function(){for(var Xt=0;Xt<Wt.buffers.length;++Xt)Wt.buffers[Xt]&&Wt.buffers[Xt].destroy();Wt.buffers.length=0,Wt.destroy()},Ot._vao=Wt,Ot._reglType="vao",Ot(Tt)}return ct}var ld=35632,_u=35633,bh=35718,wu=35721;function cp(B,ie,be,rt){var ht={},et={};function st(qe,lt,Ft,Kt){this.name=qe,this.id=lt,this.location=Ft,this.info=Kt}function Nt(qe,lt){for(var Ft=0;Ft<qe.length;++Ft)if(qe[Ft].id===lt.id){qe[Ft].location=lt.location;return}qe.push(lt)}function It(qe,lt,Ft){var Kt=qe===ld?ht:et,At=Kt[lt];if(!At){var Jt=ie.str(lt);At=B.createShader(qe),B.shaderSource(At,Jt),B.compileShader(At),re.shaderError(B,At,Jt,qe,Ft),Kt[lt]=At}return At}var Ct={},ct=[],Gt=0;function Ut(qe,lt){this.id=Gt++,this.fragId=qe,this.vertId=lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Rt(qe,lt,Ft){var Kt,At,Jt=It(ld,qe.fragId),Tt=It(_u,qe.vertId),Wt=qe.program=B.createProgram();if(B.attachShader(Wt,Jt),B.attachShader(Wt,Tt),Ft)for(Kt=0;Kt<Ft.length;++Kt){var Ot=Ft[Kt];B.bindAttribLocation(Wt,Ot[0],Ot[1])}B.linkProgram(Wt),re.linkError(B,Wt,ie.str(qe.fragId),ie.str(qe.vertId),lt);var Xt=B.getProgramParameter(Wt,bh);rt.profile&&(qe.stats.uniformsCount=Xt);var kn=qe.uniforms;for(Kt=0;Kt<Xt;++Kt)if(At=B.getActiveUniform(Wt,Kt),At)if(At.size>1)for(var zn=0;zn<At.size;++zn){var Lt=At.name.replace("[0]","["+zn+"]");Nt(kn,new st(Lt,ie.id(Lt),B.getUniformLocation(Wt,Lt),At))}else Nt(kn,new st(At.name,ie.id(At.name),B.getUniformLocation(Wt,At.name),At));var Mt=B.getProgramParameter(Wt,wu);rt.profile&&(qe.stats.attributesCount=Mt);var xt=qe.attributes;for(Kt=0;Kt<Mt;++Kt)At=B.getActiveAttrib(Wt,Kt),At&&Nt(xt,new st(At.name,ie.id(At.name),B.getAttribLocation(Wt,At.name),At))}rt.profile&&(be.getMaxUniformsCount=function(){var qe=0;return ct.forEach(function(lt){lt.stats.uniformsCount>qe&&(qe=lt.stats.uniformsCount)}),qe},be.getMaxAttributesCount=function(){var qe=0;return ct.forEach(function(lt){lt.stats.attributesCount>qe&&(qe=lt.stats.attributesCount)}),qe});function Et(){ht={},et={};for(var qe=0;qe<ct.length;++qe)Rt(ct[qe],null,ct[qe].attributes.map(function(lt){return[lt.location,lt.name]}))}return{clear:function(){var qe=B.deleteShader.bind(B);si(ht).forEach(qe),ht={},si(et).forEach(qe),et={},ct.forEach(function(lt){B.deleteProgram(lt.program)}),ct.length=0,Ct={},be.shaderCount=0},program:function(qe,lt,Ft,Kt){re.command(qe>=0,"missing vertex shader",Ft),re.command(lt>=0,"missing fragment shader",Ft);var At=Ct[lt];At||(At=Ct[lt]={});var Jt=At[qe];if(Jt&&(Jt.refCount++,!Kt))return Jt;var Tt=new Ut(lt,qe);return be.shaderCount++,Rt(Tt,Ft,Kt),Jt||(At[qe]=Tt),ct.push(Tt),o(Tt,{destroy:function(){if(Tt.refCount--,Tt.refCount<=0){B.deleteProgram(Tt.program);var Wt=ct.indexOf(Tt);ct.splice(Wt,1),be.shaderCount--}At[Tt.vertId].refCount<=0&&(B.deleteShader(et[Tt.vertId]),delete et[Tt.vertId],delete Ct[Tt.fragId][Tt.vertId]),Object.keys(Ct[Tt.fragId]).length||(B.deleteShader(ht[Tt.fragId]),delete ht[Tt.fragId],delete Ct[Tt.fragId])}})},restore:Et,shader:It,frag:-1,vert:-1}}var fp=6408,Qu=5121,vo=3333,Xc=5126;function xo(B,ie,be,rt,ht,et,st){function Nt(ct){var Gt;ie.next===null?(re(ht.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Gt=Qu):(re(ie.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Gt=ie.next.colorAttachments[0].texture._texture.type,et.oes_texture_float?(re(Gt===Qu||Gt===Xc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Gt===Xc&&re(st.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):re(Gt===Qu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,Rt=0,Et=rt.framebufferWidth,qe=rt.framebufferHeight,lt=null;n(ct)?lt=ct:ct&&(re.type(ct,"object","invalid arguments to regl.read()"),Ut=ct.x|0,Rt=ct.y|0,re(Ut>=0&&Ut<rt.framebufferWidth,"invalid x offset for regl.read"),re(Rt>=0&&Rt<rt.framebufferHeight,"invalid y offset for regl.read"),Et=(ct.width||rt.framebufferWidth-Ut)|0,qe=(ct.height||rt.framebufferHeight-Rt)|0,lt=ct.data||null),lt&&(Gt===Qu?re(lt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Gt===Xc&&re(lt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),re(Et>0&&Et+Ut<=rt.framebufferWidth,"invalid width for read pixels"),re(qe>0&&qe+Rt<=rt.framebufferHeight,"invalid height for read pixels"),be();var Ft=Et*qe*4;return lt||(Gt===Qu?lt=new Uint8Array(Ft):Gt===Xc&&(lt=lt||new Float32Array(Ft))),re.isTypedArray(lt,"data buffer for regl.read() must be a typedarray"),re(lt.byteLength>=Ft,"data buffer for regl.read() too small"),B.pixelStorei(vo,4),B.readPixels(Ut,Rt,Et,qe,fp,Gt,lt),lt}function It(ct){var Gt;return ie.setFBO({framebuffer:ct.framebuffer},function(){Gt=Nt(ct)}),Gt}function Ct(ct){return!ct||!("framebuffer"in ct)?Nt(ct):It(ct)}return Ct}function Hl(B){return Array.prototype.slice.call(B)}function mi(B){return Hl(B).join("")}function _l(){var B=0,ie=[],be=[];function rt(Gt){for(var Ut=0;Ut<be.length;++Ut)if(be[Ut]===Gt)return ie[Ut];var Rt="g"+B++;return ie.push(Rt),be.push(Gt),Rt}function ht(){var Gt=[];function Ut(){Gt.push.apply(Gt,Hl(arguments))}var Rt=[];function Et(){var qe="v"+B++;return Rt.push(qe),arguments.length>0&&(Gt.push(qe,"="),Gt.push.apply(Gt,Hl(arguments)),Gt.push(";")),qe}return o(Ut,{def:Et,toString:function(){return mi([Rt.length>0?"var "+Rt.join(",")+";":"",mi(Gt)])}})}function et(){var Gt=ht(),Ut=ht(),Rt=Gt.toString,Et=Ut.toString;function qe(lt,Ft){Ut(lt,Ft,"=",Gt.def(lt,Ft),";")}return o(function(){Gt.apply(Gt,Hl(arguments))},{def:Gt.def,entry:Gt,exit:Ut,save:qe,set:function(lt,Ft,Kt){qe(lt,Ft),Gt(lt,Ft,"=",Kt,";")},toString:function(){return Rt()+Et()}})}function st(){var Gt=mi(arguments),Ut=et(),Rt=et(),Et=Ut.toString,qe=Rt.toString;return o(Ut,{then:function(){return Ut.apply(Ut,Hl(arguments)),this},else:function(){return Rt.apply(Rt,Hl(arguments)),this},toString:function(){var lt=qe();return lt&&(lt="else{"+lt+"}"),mi(["if(",Gt,"){",Et(),"}",lt])}})}var Nt=ht(),It={};function Ct(Gt,Ut){var Rt=[];function Et(){var At="a"+Rt.length;return Rt.push(At),At}Ut=Ut||0;for(var qe=0;qe<Ut;++qe)Et();var lt=et(),Ft=lt.toString,Kt=It[Gt]=o(lt,{arg:Et,toString:function(){return mi(["function(",Rt.join(),"){",Ft(),"}"])}});return Kt}function ct(){var Gt=['"use strict";',Nt,"return {"];Object.keys(It).forEach(function(Et){Gt.push('"',Et,'":',It[Et].toString(),",")}),Gt.push("}");var Ut=mi(Gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Rt=Function.apply(null,ie.concat(Ut));return Rt.apply(null,be)}return{global:Nt,link:rt,block:ht,proc:Ct,scope:et,cond:st,compile:ct}}var Xl="xyzw".split(""),Eu=5121,es=1,ud=2,sd=0,wl=1,ts=2,cd=3,qc=4,Ou=5,dp=6,Ls="dither",fd="blend.enable",Yc="blend.color",El="blend.equation",Fs="blend.func",Kc="depth.enable",Zc="depth.func",dd="depth.range",pd="depth.mask",Ja="colorMask",pp="cull.enable",hp="cull.face",vp="frontFace",hd="lineWidth",Ol="polygonOffset.enable",Jc="polygonOffset.offset",vd="sample.alpha",yd="sample.enable",$s="sample.coverage",ql="stencil.enable",Qn="stencil.mask",Bs="stencil.func",Qc="stencil.opFront",Qa="stencil.opBack",Us="scissor.enable",Vs="scissor.box",Mo="viewport",Gs="profile",xu="framebuffer",ef="vert",ao="frag",Bo="elements",Yl="primitive",el="count",tl="offset",Su="instances",xl="vao",Ws="Width",tf="Height",Au=xu+Ws,zs=xu+tf,Dt=Mo+Ws,yp=Mo+tf,ns="drawingBuffer",nf=ns+Ws,md=ns+tf,mp=[Fs,El,Bs,Qc,Qa,$s,Mo,Vs,Jc],Sl=34962,gp=34963,nl=35632,Tu=35633,gd=3553,_h=34067,wh=2884,Eh=3042,bp=3024,_p=2960,wp=2929,Ep=3089,Oh=32823,xh=32926,Sh=32928,Gi=5126,rs=35664,rf=35665,la=35666,Ca=5124,bd=35667,Wi=35668,of=35669,os=35670,Hs=35671,af=35672,lf=35673,Xs=35674,qs=35675,is=35676,Kl=35678,ni=35680,uf=4,sf=1028,Zl=1029,Op=2304,zi=2305,ri=32775,Ah=32776,ja=519,$n=7680,_d=0,as=1,wd=32774,Th=513,Ys=36160,Mh=36064,rl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ks=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ls={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ol={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},kh={frag:nl,vert:Tu},xp={cw:Op,ccw:zi};function Mu(B){return Array.isArray(B)||n(B)||ji(B)}function Al(B){return B.sort(function(ie,be){return ie===Mo?-1:be===Mo?1:ie<be?-1:1})}function Hi(B,ie,be,rt){this.thisDep=B,this.contextDep=ie,this.propDep=be,this.append=rt}function Gn(B){return B&&!(B.thisDep||B.contextDep||B.propDep)}function ko(B){return new Hi(!1,!1,!1,B)}function Ci(B,ie){var be=B.type;if(be===sd){var rt=B.data.length;return new Hi(!0,rt>=1,rt>=2,ie)}else if(be===qc){var ht=B.data;return new Hi(ht.thisDep,ht.contextDep,ht.propDep,ie)}else{if(be===Ou)return new Hi(!1,!1,!1,ie);if(be===dp){for(var et=!1,st=!1,Nt=!1,It=0;It<B.data.length;++It){var Ct=B.data[It];if(Ct.type===wl)Nt=!0;else if(Ct.type===ts)st=!0;else if(Ct.type===cd)et=!0;else if(Ct.type===sd){et=!0;var ct=Ct.data;ct>=1&&(st=!0),ct>=2&&(Nt=!0)}else Ct.type===qc&&(et=et||Ct.data.thisDep,st=st||Ct.data.contextDep,Nt=Nt||Ct.data.propDep)}return new Hi(et,st,Nt,ie)}else return new Hi(be===cd,be===ts,be===wl,ie)}}var ua=new Hi(!1,!1,!1,function(){});function Yv(B,ie,be,rt,ht,et,st,Nt,It,Ct,ct,Gt,Ut,Rt,Et){var qe=Ct.Record,lt={add:32774,subtract:32778,"reverse subtract":32779};be.ext_blend_minmax&&(lt.min=ri,lt.max=Ah);var Ft=be.angle_instanced_arrays,Kt=be.webgl_draw_buffers,At={dirty:!0,profile:Et.profile},Jt={},Tt=[],Wt={},Ot={};function Xt(se){return se.replace(".","_")}function kn(se,te,Te){var We=Xt(se);Tt.push(se),Jt[We]=At[We]=!!Te,Wt[We]=te}function zn(se,te,Te){var We=Xt(se);Tt.push(se),Array.isArray(Te)?(At[We]=Te.slice(),Jt[We]=Te.slice()):At[We]=Jt[We]=Te,Ot[We]=te}kn(Ls,bp),kn(fd,Eh),zn(Yc,"blendColor",[0,0,0,0]),zn(El,"blendEquationSeparate",[wd,wd]),zn(Fs,"blendFuncSeparate",[as,_d,as,_d]),kn(Kc,wp,!0),zn(Zc,"depthFunc",Th),zn(dd,"depthRange",[0,1]),zn(pd,"depthMask",!0),zn(Ja,Ja,[!0,!0,!0,!0]),kn(pp,wh),zn(hp,"cullFace",Zl),zn(vp,vp,zi),zn(hd,hd,1),kn(Ol,Oh),zn(Jc,"polygonOffset",[0,0]),kn(vd,xh),kn(yd,Sh),zn($s,"sampleCoverage",[1,!1]),kn(ql,_p),zn(Qn,"stencilMask",-1),zn(Bs,"stencilFunc",[ja,0,-1]),zn(Qc,"stencilOpSeparate",[sf,$n,$n,$n]),zn(Qa,"stencilOpSeparate",[Zl,$n,$n,$n]),kn(Us,Ep),zn(Vs,"scissor",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]),zn(Mo,Mo,[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);var Lt={gl:B,context:Ut,strings:ie,next:Jt,current:At,draw:Gt,elements:et,buffer:ht,shader:ct,attributes:Ct.state,vao:Ct,uniforms:It,framebuffer:Nt,extensions:be,timer:Rt,isBufferArgs:Mu},Mt={primTypes:Qo,compareFuncs:ls,blendFuncs:rl,blendEquations:lt,stencilOps:ol,glTypes:Fi,orientationType:xp};re.optional(function(){Lt.isArrayLike=k}),Kt&&(Mt.backBuffer=[Zl],Mt.drawBuffer=Rr(rt.maxDrawbuffers,function(se){return se===0?[0]:Rr(se,function(te){return Mh+te})}));var xt=0;function Cn(){var se=_l(),te=se.link,Te=se.global;se.id=xt++,se.batchId="0";var We=te(Lt),Ye=se.shared={props:"a0"};Object.keys(Lt).forEach(function(Ee){Ye[Ee]=Te.def(We,".",Ee)}),re.optional(function(){se.CHECK=te(re),se.commandStr=re.guessCommand(),se.command=te(se.commandStr),se.assert=function(Ee,fe,Ge){Ee("if(!(",fe,"))",this.CHECK,".commandRaise(",te(Ge),",",this.command,");")},Mt.invalidBlendCombinations=Ks});var De=se.next={},Me=se.current={};Object.keys(Ot).forEach(function(Ee){Array.isArray(At[Ee])&&(De[Ee]=Te.def(Ye.next,".",Ee),Me[Ee]=Te.def(Ye.current,".",Ee))});var Be=se.constants={};Object.keys(Mt).forEach(function(Ee){Be[Ee]=Te.def(JSON.stringify(Mt[Ee]))}),se.invoke=function(Ee,fe){switch(fe.type){case sd:var Ge=["this",Ye.context,Ye.props,se.batchId];return Ee.def(te(fe.data),".call(",Ge.slice(0,Math.max(fe.data.length+1,4)),")");case wl:return Ee.def(Ye.props,fe.data);case ts:return Ee.def(Ye.context,fe.data);case cd:return Ee.def("this",fe.data);case qc:return fe.data.append(se,Ee),fe.data.ref;case Ou:return fe.data.toString();case dp:return fe.data.map(function(Ze){return se.invoke(Ee,Ze)})}},se.attribCache={};var de={};return se.scopeAttrib=function(Ee){var fe=ie.id(Ee);if(fe in de)return de[fe];var Ge=Ct.scope[fe];Ge||(Ge=Ct.scope[fe]=new qe);var Ze=de[fe]=te(Ge);return Ze},se}function nr(se){var te=se.static,Te=se.dynamic,We;if(Gs in te){var Ye=!!te[Gs];We=ko(function(Me,Be){return Ye}),We.enable=Ye}else if(Gs in Te){var De=Te[Gs];We=Ci(De,function(Me,Be){return Me.invoke(Be,De)})}return We}function un(se,te){var Te=se.static,We=se.dynamic;if(xu in Te){var Ye=Te[xu];return Ye?(Ye=Nt.getFramebuffer(Ye),re.command(Ye,"invalid framebuffer object"),ko(function(Me,Be){var de=Me.link(Ye),Ee=Me.shared;Be.set(Ee.framebuffer,".next",de);var fe=Ee.context;return Be.set(fe,"."+Au,de+".width"),Be.set(fe,"."+zs,de+".height"),de})):ko(function(Me,Be){var de=Me.shared;Be.set(de.framebuffer,".next","null");var Ee=de.context;return Be.set(Ee,"."+Au,Ee+"."+nf),Be.set(Ee,"."+zs,Ee+"."+md),"null"})}else if(xu in We){var De=We[xu];return Ci(De,function(Me,Be){var de=Me.invoke(Be,De),Ee=Me.shared,fe=Ee.framebuffer,Ge=Be.def(fe,".getFramebuffer(",de,")");re.optional(function(){Me.assert(Be,"!"+de+"||"+Ge,"invalid framebuffer object")}),Be.set(fe,".next",Ge);var Ze=Ee.context;return Be.set(Ze,"."+Au,Ge+"?"+Ge+".width:"+Ze+"."+nf),Be.set(Ze,"."+zs,Ge+"?"+Ge+".height:"+Ze+"."+md),Ge})}else return null}function er(se,te,Te){var We=se.static,Ye=se.dynamic;function De(de){if(de in We){var Ee=We[de];re.commandType(Ee,"object","invalid "+de,Te.commandStr);var fe=!0,Ge=Ee.x|0,Ze=Ee.y|0,d,m;return"width"in Ee?(d=Ee.width|0,re.command(d>=0,"invalid "+de,Te.commandStr)):fe=!1,"height"in Ee?(m=Ee.height|0,re.command(m>=0,"invalid "+de,Te.commandStr)):fe=!1,new Hi(!fe&&te&&te.thisDep,!fe&&te&&te.contextDep,!fe&&te&&te.propDep,function(V,ee){var pe=V.shared.context,we=d;"width"in Ee||(we=ee.def(pe,".",Au,"-",Ge));var Ue=m;return"height"in Ee||(Ue=ee.def(pe,".",zs,"-",Ze)),[Ge,Ze,we,Ue]})}else if(de in Ye){var O=Ye[de],C=Ci(O,function(V,ee){var pe=V.invoke(ee,O);re.optional(function(){V.assert(ee,pe+"&&typeof "+pe+'==="object"',"invalid "+de)});var we=V.shared.context,Ue=ee.def(pe,".x|0"),vt=ee.def(pe,".y|0"),wt=ee.def('"width" in ',pe,"?",pe,".width|0:","(",we,".",Au,"-",Ue,")"),Vt=ee.def('"height" in ',pe,"?",pe,".height|0:","(",we,".",zs,"-",vt,")");return re.optional(function(){V.assert(ee,wt+">=0&&"+Vt+">=0","invalid "+de)}),[Ue,vt,wt,Vt]});return te&&(C.thisDep=C.thisDep||te.thisDep,C.contextDep=C.contextDep||te.contextDep,C.propDep=C.propDep||te.propDep),C}else return te?new Hi(te.thisDep,te.contextDep,te.propDep,function(V,ee){var pe=V.shared.context;return[0,0,ee.def(pe,".",Au),ee.def(pe,".",zs)]}):null}var Me=De(Mo);if(Me){var Be=Me;Me=new Hi(Me.thisDep,Me.contextDep,Me.propDep,function(de,Ee){var fe=Be.append(de,Ee),Ge=de.shared.context;return Ee.set(Ge,"."+Dt,fe[2]),Ee.set(Ge,"."+yp,fe[3]),fe})}return{viewport:Me,scissor_box:De(Vs)}}function Wn(se,te){var Te=se.static,We=typeof Te[ao]=="string"&&typeof Te[ef]=="string";if(We){if(Object.keys(te.dynamic).length>0)return null;var Ye=te.static,De=Object.keys(Ye);if(De.length>0&&typeof Ye[De[0]]=="number"){for(var Me=[],Be=0;Be<De.length;++Be)re(typeof Ye[De[Be]]=="number","must specify all vertex attribute locations when using vaos"),Me.push([Ye[De[Be]]|0,De[Be]]);return Me}}return null}function rr(se,te,Te){var We=se.static,Ye=se.dynamic;function De(fe){if(fe in We){var Ge=ie.id(We[fe]);re.optional(function(){ct.shader(kh[fe],Ge,re.guessCommand())});var Ze=ko(function(){return Ge});return Ze.id=Ge,Ze}else if(fe in Ye){var d=Ye[fe];return Ci(d,function(m,O){var C=m.invoke(O,d),V=O.def(m.shared.strings,".id(",C,")");return re.optional(function(){O(m.shared.shader,".shader(",kh[fe],",",V,",",m.command,");")}),V})}return null}var Me=De(ao),Be=De(ef),de=null,Ee;return Gn(Me)&&Gn(Be)?(de=ct.program(Be.id,Me.id,null,Te),Ee=ko(function(fe,Ge){return fe.link(de)})):Ee=new Hi(Me&&Me.thisDep||Be&&Be.thisDep,Me&&Me.contextDep||Be&&Be.contextDep,Me&&Me.propDep||Be&&Be.propDep,function(fe,Ge){var Ze=fe.shared.shader,d;Me?d=Me.append(fe,Ge):d=Ge.def(Ze,".",ao);var m;Be?m=Be.append(fe,Ge):m=Ge.def(Ze,".",ef);var O=Ze+".program("+m+","+d;return re.optional(function(){O+=","+fe.command}),Ge.def(O+")")}),{frag:Me,vert:Be,progVar:Ee,program:de}}function gr(se,te){var Te=se.static,We=se.dynamic;function Ye(){if(Bo in Te){var fe=Te[Bo];Mu(fe)?fe=et.getElements(et.create(fe,!0)):fe&&(fe=et.getElements(fe),re.command(fe,"invalid elements",te.commandStr));var Ge=ko(function(d,m){if(fe){var O=d.link(fe);return d.ELEMENTS=O,O}return d.ELEMENTS=null,null});return Ge.value=fe,Ge}else if(Bo in We){var Ze=We[Bo];return Ci(Ze,function(d,m){var O=d.shared,C=O.isBufferArgs,V=O.elements,ee=d.invoke(m,Ze),pe=m.def("null"),we=m.def(C,"(",ee,")"),Ue=d.cond(we).then(pe,"=",V,".createStream(",ee,");").else(pe,"=",V,".getElements(",ee,");");return re.optional(function(){d.assert(Ue.else,"!"+ee+"||"+pe,"invalid elements")}),m.entry(Ue),m.exit(d.cond(we).then(V,".destroyStream(",pe,");")),d.ELEMENTS=pe,pe})}return null}var De=Ye();function Me(){if(Yl in Te){var fe=Te[Yl];return re.commandParameter(fe,Qo,"invalid primitve",te.commandStr),ko(function(Ze,d){return Qo[fe]})}else if(Yl in We){var Ge=We[Yl];return Ci(Ge,function(Ze,d){var m=Ze.constants.primTypes,O=Ze.invoke(d,Ge);return re.optional(function(){Ze.assert(d,O+" in "+m,"invalid primitive, must be one of "+Object.keys(Qo))}),d.def(m,"[",O,"]")})}else if(De)return Gn(De)?De.value?ko(function(Ze,d){return d.def(Ze.ELEMENTS,".primType")}):ko(function(){return uf}):new Hi(De.thisDep,De.contextDep,De.propDep,function(Ze,d){var m=Ze.ELEMENTS;return d.def(m,"?",m,".primType:",uf)});return null}function Be(fe,Ge){if(fe in Te){var Ze=Te[fe]|0;return re.command(!Ge||Ze>=0,"invalid "+fe,te.commandStr),ko(function(m,O){return Ge&&(m.OFFSET=Ze),Ze})}else if(fe in We){var d=We[fe];return Ci(d,function(m,O){var C=m.invoke(O,d);return Ge&&(m.OFFSET=C,re.optional(function(){m.assert(O,C+">=0","invalid "+fe)})),C})}else if(Ge&&De)return ko(function(m,O){return m.OFFSET="0",0});return null}var de=Be(tl,!0);function Ee(){if(el in Te){var fe=Te[el]|0;return re.command(typeof fe=="number"&&fe>=0,"invalid vertex count",te.commandStr),ko(function(){return fe})}else if(el in We){var Ge=We[el];return Ci(Ge,function(m,O){var C=m.invoke(O,Ge);return re.optional(function(){m.assert(O,"typeof "+C+'==="number"&&'+C+">=0&&"+C+"===("+C+"|0)","invalid vertex count")}),C})}else if(De)if(Gn(De)){if(De)return de?new Hi(de.thisDep,de.contextDep,de.propDep,function(m,O){var C=O.def(m.ELEMENTS,".vertCount-",m.OFFSET);return re.optional(function(){m.assert(O,C+">=0","invalid vertex offset/element buffer too small")}),C}):ko(function(m,O){return O.def(m.ELEMENTS,".vertCount")});var Ze=ko(function(){return-1});return re.optional(function(){Ze.MISSING=!0}),Ze}else{var d=new Hi(De.thisDep||de.thisDep,De.contextDep||de.contextDep,De.propDep||de.propDep,function(m,O){var C=m.ELEMENTS;return m.OFFSET?O.def(C,"?",C,".vertCount-",m.OFFSET,":-1"):O.def(C,"?",C,".vertCount:-1")});return re.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:De,primitive:Me(),count:Ee(),instances:Be(Su,!1),offset:de}}function No(se,te){var Te=se.static,We=se.dynamic,Ye={};return Tt.forEach(function(De){var Me=Xt(De);function Be(de,Ee){if(De in Te){var fe=de(Te[De]);Ye[Me]=ko(function(){return fe})}else if(De in We){var Ge=We[De];Ye[Me]=Ci(Ge,function(Ze,d){return Ee(Ze,d,Ze.invoke(d,Ge))})}}switch(De){case pp:case fd:case Ls:case ql:case Kc:case Us:case Ol:case vd:case yd:case pd:return Be(function(de){return re.commandType(de,"boolean",De,te.commandStr),de},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,"typeof "+fe+'==="boolean"',"invalid flag "+De,de.commandStr)}),fe});case Zc:return Be(function(de){return re.commandParameter(de,ls,"invalid "+De,te.commandStr),ls[de]},function(de,Ee,fe){var Ge=de.constants.compareFuncs;return re.optional(function(){de.assert(Ee,fe+" in "+Ge,"invalid "+De+", must be one of "+Object.keys(ls))}),Ee.def(Ge,"[",fe,"]")});case dd:return Be(function(de){return re.command(k(de)&&de.length===2&&typeof de[0]=="number"&&typeof de[1]=="number"&&de[0]<=de[1],"depth range is 2d array",te.commandStr),de},function(de,Ee,fe){re.optional(function(){de.assert(Ee,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===2&&typeof "+fe+'[0]==="number"&&typeof '+fe+'[1]==="number"&&'+fe+"[0]<="+fe+"[1]","depth range must be a 2d array")});var Ge=Ee.def("+",fe,"[0]"),Ze=Ee.def("+",fe,"[1]");return[Ge,Ze]});case Fs:return Be(function(de){re.commandType(de,"object","blend.func",te.commandStr);var Ee="srcRGB"in de?de.srcRGB:de.src,fe="srcAlpha"in de?de.srcAlpha:de.src,Ge="dstRGB"in de?de.dstRGB:de.dst,Ze="dstAlpha"in de?de.dstAlpha:de.dst;return re.commandParameter(Ee,rl,Me+".srcRGB",te.commandStr),re.commandParameter(fe,rl,Me+".srcAlpha",te.commandStr),re.commandParameter(Ge,rl,Me+".dstRGB",te.commandStr),re.commandParameter(Ze,rl,Me+".dstAlpha",te.commandStr),re.command(Ks.indexOf(Ee+", "+Ge)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ee+", "+Ge+")",te.commandStr),[rl[Ee],rl[Ge],rl[fe],rl[Ze]]},function(de,Ee,fe){var Ge=de.constants.blendFuncs;re.optional(function(){de.assert(Ee,fe+"&&typeof "+fe+'==="object"',"invalid blend func, must be an object")});function Ze(pe,we){var Ue=Ee.def('"',pe,we,'" in ',fe,"?",fe,".",pe,we,":",fe,".",pe);return re.optional(function(){de.assert(Ee,Ue+" in "+Ge,"invalid "+De+"."+pe+we+", must be one of "+Object.keys(rl))}),Ue}var d=Ze("src","RGB"),m=Ze("dst","RGB");re.optional(function(){var pe=de.constants.invalidBlendCombinations;de.assert(Ee,pe+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var O=Ee.def(Ge,"[",d,"]"),C=Ee.def(Ge,"[",Ze("src","Alpha"),"]"),V=Ee.def(Ge,"[",m,"]"),ee=Ee.def(Ge,"[",Ze("dst","Alpha"),"]");return[O,V,C,ee]});case El:return Be(function(de){if(typeof de=="string")return re.commandParameter(de,lt,"invalid "+De,te.commandStr),[lt[de],lt[de]];if(typeof de=="object")return re.commandParameter(de.rgb,lt,De+".rgb",te.commandStr),re.commandParameter(de.alpha,lt,De+".alpha",te.commandStr),[lt[de.rgb],lt[de.alpha]];re.commandRaise("invalid blend.equation",te.commandStr)},function(de,Ee,fe){var Ge=de.constants.blendEquations,Ze=Ee.def(),d=Ee.def(),m=de.cond("typeof ",fe,'==="string"');return re.optional(function(){function O(C,V,ee){de.assert(C,ee+" in "+Ge,"invalid "+V+", must be one of "+Object.keys(lt))}O(m.then,De,fe),de.assert(m.else,fe+"&&typeof "+fe+'==="object"',"invalid "+De),O(m.else,De+".rgb",fe+".rgb"),O(m.else,De+".alpha",fe+".alpha")}),m.then(Ze,"=",d,"=",Ge,"[",fe,"];"),m.else(Ze,"=",Ge,"[",fe,".rgb];",d,"=",Ge,"[",fe,".alpha];"),Ee(m),[Ze,d]});case Yc:return Be(function(de){return re.command(k(de)&&de.length===4,"blend.color must be a 4d array",te.commandStr),Rr(4,function(Ee){return+de[Ee]})},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","blend.color must be a 4d array")}),Rr(4,function(Ge){return Ee.def("+",fe,"[",Ge,"]")})});case Qn:return Be(function(de){return re.commandType(de,"number",Me,te.commandStr),de|0},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,"typeof "+fe+'==="number"',"invalid stencil.mask")}),Ee.def(fe,"|0")});case Bs:return Be(function(de){re.commandType(de,"object",Me,te.commandStr);var Ee=de.cmp||"keep",fe=de.ref||0,Ge="mask"in de?de.mask:-1;return re.commandParameter(Ee,ls,De+".cmp",te.commandStr),re.commandType(fe,"number",De+".ref",te.commandStr),re.commandType(Ge,"number",De+".mask",te.commandStr),[ls[Ee],fe,Ge]},function(de,Ee,fe){var Ge=de.constants.compareFuncs;re.optional(function(){function O(){de.assert(Ee,Array.prototype.join.call(arguments,""),"invalid stencil.func")}O(fe+"&&typeof ",fe,'==="object"'),O('!("cmp" in ',fe,")||(",fe,".cmp in ",Ge,")")});var Ze=Ee.def('"cmp" in ',fe,"?",Ge,"[",fe,".cmp]",":",$n),d=Ee.def(fe,".ref|0"),m=Ee.def('"mask" in ',fe,"?",fe,".mask|0:-1");return[Ze,d,m]});case Qc:case Qa:return Be(function(de){re.commandType(de,"object",Me,te.commandStr);var Ee=de.fail||"keep",fe=de.zfail||"keep",Ge=de.zpass||"keep";return re.commandParameter(Ee,ol,De+".fail",te.commandStr),re.commandParameter(fe,ol,De+".zfail",te.commandStr),re.commandParameter(Ge,ol,De+".zpass",te.commandStr),[De===Qa?Zl:sf,ol[Ee],ol[fe],ol[Ge]]},function(de,Ee,fe){var Ge=de.constants.stencilOps;re.optional(function(){de.assert(Ee,fe+"&&typeof "+fe+'==="object"',"invalid "+De)});function Ze(d){return re.optional(function(){de.assert(Ee,'!("'+d+'" in '+fe+")||("+fe+"."+d+" in "+Ge+")","invalid "+De+"."+d+", must be one of "+Object.keys(ol))}),Ee.def('"',d,'" in ',fe,"?",Ge,"[",fe,".",d,"]:",$n)}return[De===Qa?Zl:sf,Ze("fail"),Ze("zfail"),Ze("zpass")]});case Jc:return Be(function(de){re.commandType(de,"object",Me,te.commandStr);var Ee=de.factor|0,fe=de.units|0;return re.commandType(Ee,"number",Me+".factor",te.commandStr),re.commandType(fe,"number",Me+".units",te.commandStr),[Ee,fe]},function(de,Ee,fe){re.optional(function(){de.assert(Ee,fe+"&&typeof "+fe+'==="object"',"invalid "+De)});var Ge=Ee.def(fe,".factor|0"),Ze=Ee.def(fe,".units|0");return[Ge,Ze]});case hp:return Be(function(de){var Ee=0;return de==="front"?Ee=sf:de==="back"&&(Ee=Zl),re.command(!!Ee,Me,te.commandStr),Ee},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,fe+'==="front"||'+fe+'==="back"',"invalid cull.face")}),Ee.def(fe,'==="front"?',sf,":",Zl)});case hd:return Be(function(de){return re.command(typeof de=="number"&&de>=rt.lineWidthDims[0]&&de<=rt.lineWidthDims[1],"invalid line width, must be a positive number between "+rt.lineWidthDims[0]+" and "+rt.lineWidthDims[1],te.commandStr),de},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,"typeof "+fe+'==="number"&&'+fe+">="+rt.lineWidthDims[0]+"&&"+fe+"<="+rt.lineWidthDims[1],"invalid line width")}),fe});case vp:return Be(function(de){return re.commandParameter(de,xp,Me,te.commandStr),xp[de]},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,fe+'==="cw"||'+fe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ee.def(fe+'==="cw"?'+Op+":"+zi)});case Ja:return Be(function(de){return re.command(k(de)&&de.length===4,"color.mask must be length 4 array",te.commandStr),de.map(function(Ee){return!!Ee})},function(de,Ee,fe){return re.optional(function(){de.assert(Ee,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","invalid color.mask")}),Rr(4,function(Ge){return"!!"+fe+"["+Ge+"]"})});case $s:return Be(function(de){re.command(typeof de=="object"&&de,Me,te.commandStr);var Ee="value"in de?de.value:1,fe=!!de.invert;return re.command(typeof Ee=="number"&&Ee>=0&&Ee<=1,"sample.coverage.value must be a number between 0 and 1",te.commandStr),[Ee,fe]},function(de,Ee,fe){re.optional(function(){de.assert(Ee,fe+"&&typeof "+fe+'==="object"',"invalid sample.coverage")});var Ge=Ee.def('"value" in ',fe,"?+",fe,".value:1"),Ze=Ee.def("!!",fe,".invert");return[Ge,Ze]})}}),Ye}function Uo(se,te){var Te=se.static,We=se.dynamic,Ye={};return Object.keys(Te).forEach(function(De){var Me=Te[De],Be;if(typeof Me=="number"||typeof Me=="boolean")Be=ko(function(){return Me});else if(typeof Me=="function"){var de=Me._reglType;de==="texture2d"||de==="textureCube"?Be=ko(function(Ee){return Ee.link(Me)}):de==="framebuffer"||de==="framebufferCube"?(re.command(Me.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',te.commandStr),Be=ko(function(Ee){return Ee.link(Me.color[0])})):re.commandRaise('invalid data for uniform "'+De+'"',te.commandStr)}else k(Me)?Be=ko(function(Ee){var fe=Ee.global.def("[",Rr(Me.length,function(Ge){return re.command(typeof Me[Ge]=="number"||typeof Me[Ge]=="boolean","invalid uniform "+De,Ee.commandStr),Me[Ge]}),"]");return fe}):re.commandRaise('invalid or missing data for uniform "'+De+'"',te.commandStr);Be.value=Me,Ye[De]=Be}),Object.keys(We).forEach(function(De){var Me=We[De];Ye[De]=Ci(Me,function(Be,de){return Be.invoke(de,Me)})}),Ye}function cr(se,te){var Te=se.static,We=se.dynamic,Ye={};return Object.keys(Te).forEach(function(De){var Me=Te[De],Be=ie.id(De),de=new qe;if(Mu(Me))de.state=es,de.buffer=ht.getBuffer(ht.create(Me,Sl,!1,!0)),de.type=0;else{var Ee=ht.getBuffer(Me);if(Ee)de.state=es,de.buffer=Ee,de.type=0;else if(re.command(typeof Me=="object"&&Me,"invalid data for attribute "+De,te.commandStr),"constant"in Me){var fe=Me.constant;de.buffer="null",de.state=ud,typeof fe=="number"?de.x=fe:(re.command(k(fe)&&fe.length>0&&fe.length<=4,"invalid constant for attribute "+De,te.commandStr),Xl.forEach(function(V,ee){ee<fe.length&&(de[V]=fe[ee])}))}else{Mu(Me.buffer)?Ee=ht.getBuffer(ht.create(Me.buffer,Sl,!1,!0)):Ee=ht.getBuffer(Me.buffer),re.command(!!Ee,'missing buffer for attribute "'+De+'"',te.commandStr);var Ge=Me.offset|0;re.command(Ge>=0,'invalid offset for attribute "'+De+'"',te.commandStr);var Ze=Me.stride|0;re.command(Ze>=0&&Ze<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',te.commandStr);var d=Me.size|0;re.command(!("size"in Me)||d>0&&d<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',te.commandStr);var m=!!Me.normalized,O=0;"type"in Me&&(re.commandParameter(Me.type,Fi,"invalid type for attribute "+De,te.commandStr),O=Fi[Me.type]);var C=Me.divisor|0;"divisor"in Me&&(re.command(C===0||Ft,'cannot specify divisor for attribute "'+De+'", instancing not supported',te.commandStr),re.command(C>=0,'invalid divisor for attribute "'+De+'"',te.commandStr)),re.optional(function(){var V=te.commandStr,ee=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Me).forEach(function(pe){re.command(ee.indexOf(pe)>=0,'unknown parameter "'+pe+'" for attribute pointer "'+De+'" (valid parameters are '+ee+")",V)})}),de.buffer=Ee,de.state=es,de.size=d,de.normalized=m,de.type=O||Ee.dtype,de.offset=Ge,de.stride=Ze,de.divisor=C}}Ye[De]=ko(function(V,ee){var pe=V.attribCache;if(Be in pe)return pe[Be];var we={isStream:!1};return Object.keys(de).forEach(function(Ue){we[Ue]=de[Ue]}),de.buffer&&(we.buffer=V.link(de.buffer),we.type=we.type||we.buffer+".dtype"),pe[Be]=we,we})}),Object.keys(We).forEach(function(De){var Me=We[De];function Be(de,Ee){var fe=de.invoke(Ee,Me),Ge=de.shared,Ze=de.constants,d=Ge.isBufferArgs,m=Ge.buffer;re.optional(function(){de.assert(Ee,fe+"&&(typeof "+fe+'==="object"||typeof '+fe+'==="function")&&('+d+"("+fe+")||"+m+".getBuffer("+fe+")||"+m+".getBuffer("+fe+".buffer)||"+d+"("+fe+'.buffer)||("constant" in '+fe+"&&(typeof "+fe+'.constant==="number"||'+Ge.isArrayLike+"("+fe+".constant))))",'invalid dynamic attribute "'+De+'"')});var O={isStream:Ee.def(!1)},C=new qe;C.state=es,Object.keys(C).forEach(function(we){O[we]=Ee.def(""+C[we])});var V=O.buffer,ee=O.type;Ee("if(",d,"(",fe,")){",O.isStream,"=true;",V,"=",m,".createStream(",Sl,",",fe,");",ee,"=",V,".dtype;","}else{",V,"=",m,".getBuffer(",fe,");","if(",V,"){",ee,"=",V,".dtype;",'}else if("constant" in ',fe,"){",O.state,"=",ud,";","if(typeof "+fe+'.constant === "number"){',O[Xl[0]],"=",fe,".constant;",Xl.slice(1).map(function(we){return O[we]}).join("="),"=0;","}else{",Xl.map(function(we,Ue){return O[we]+"="+fe+".constant.length>"+Ue+"?"+fe+".constant["+Ue+"]:0;"}).join(""),"}}else{","if(",d,"(",fe,".buffer)){",V,"=",m,".createStream(",Sl,",",fe,".buffer);","}else{",V,"=",m,".getBuffer(",fe,".buffer);","}",ee,'="type" in ',fe,"?",Ze.glTypes,"[",fe,".type]:",V,".dtype;",O.normalized,"=!!",fe,".normalized;");function pe(we){Ee(O[we],"=",fe,".",we,"|0;")}return pe("size"),pe("offset"),pe("stride"),pe("divisor"),Ee("}}"),Ee.exit("if(",O.isStream,"){",m,".destroyStream(",V,");","}"),O}Ye[De]=Ci(Me,Be)}),Ye}function zo(se,te){var Te=se.static,We=se.dynamic;if(xl in Te){var Ye=Te[xl];return Ye!==null&&Ct.getVAO(Ye)===null&&(Ye=Ct.createVAO(Ye)),ko(function(Me){return Me.link(Ct.getVAO(Ye))})}else if(xl in We){var De=We[xl];return Ci(De,function(Me,Be){var de=Me.invoke(Be,De);return Be.def(Me.shared.vao+".getVAO("+de+")")})}return null}function ro(se){var te=se.static,Te=se.dynamic,We={};return Object.keys(te).forEach(function(Ye){var De=te[Ye];We[Ye]=ko(function(Me,Be){return typeof De=="number"||typeof De=="boolean"?""+De:Me.link(De)})}),Object.keys(Te).forEach(function(Ye){var De=Te[Ye];We[Ye]=Ci(De,function(Me,Be){return Me.invoke(Be,De)})}),We}function Ro(se,te,Te,We,Ye){var De=se.static,Me=se.dynamic;re.optional(function(){var pe=[xu,ef,ao,Bo,Yl,tl,el,Su,Gs,xl].concat(Tt);function we(Ue){Object.keys(Ue).forEach(function(vt){re.command(pe.indexOf(vt)>=0,'unknown parameter "'+vt+'"',Ye.commandStr)})}we(De),we(Me)});var Be=Wn(se,te),de=un(se),Ee=er(se,de,Ye),fe=gr(se,Ye),Ge=No(se,Ye),Ze=rr(se,Ye,Be);function d(pe){var we=Ee[pe];we&&(Ge[pe]=we)}d(Mo),d(Xt(Vs));var m=Object.keys(Ge).length>0,O={framebuffer:de,draw:fe,shader:Ze,state:Ge,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(O.profile=nr(se),O.uniforms=Uo(Te,Ye),O.drawVAO=O.scopeVAO=zo(se),!O.drawVAO&&Ze.program&&!Be&&be.angle_instanced_arrays){var C=!0,V=Ze.program.attributes.map(function(pe){var we=te.static[pe];return C=C&&!!we,we});if(C&&V.length>0){var ee=Ct.getVAO(Ct.createVAO(V));O.drawVAO=new Hi(null,null,null,function(pe,we){return pe.link(ee)}),O.useVAO=!0}}return Be?O.useVAO=!0:O.attributes=cr(te,Ye),O.context=ro(We),O}function Vo(se,te,Te){var We=se.shared,Ye=We.context,De=se.scope();Object.keys(Te).forEach(function(Me){te.save(Ye,"."+Me);var Be=Te[Me],de=Be.append(se,te);Array.isArray(de)?De(Ye,".",Me,"=[",de.join(),"];"):De(Ye,".",Me,"=",de,";")}),te(De)}function So(se,te,Te,We){var Ye=se.shared,De=Ye.gl,Me=Ye.framebuffer,Be;Kt&&(Be=te.def(Ye.extensions,".webgl_draw_buffers"));var de=se.constants,Ee=de.drawBuffer,fe=de.backBuffer,Ge;Te?Ge=Te.append(se,te):Ge=te.def(Me,".next"),We||te("if(",Ge,"!==",Me,".cur){"),te("if(",Ge,"){",De,".bindFramebuffer(",Ys,",",Ge,".framebuffer);"),Kt&&te(Be,".drawBuffersWEBGL(",Ee,"[",Ge,".colorAttachments.length]);"),te("}else{",De,".bindFramebuffer(",Ys,",null);"),Kt&&te(Be,".drawBuffersWEBGL(",fe,");"),te("}",Me,".cur=",Ge,";"),We||te("}")}function bo(se,te,Te){var We=se.shared,Ye=We.gl,De=se.current,Me=se.next,Be=We.current,de=We.next,Ee=se.cond(Be,".dirty");Tt.forEach(function(fe){var Ge=Xt(fe);if(!(Ge in Te.state)){var Ze,d;if(Ge in Me){Ze=Me[Ge],d=De[Ge];var m=Rr(At[Ge].length,function(C){return Ee.def(Ze,"[",C,"]")});Ee(se.cond(m.map(function(C,V){return C+"!=="+d+"["+V+"]"}).join("||")).then(Ye,".",Ot[Ge],"(",m,");",m.map(function(C,V){return d+"["+V+"]="+C}).join(";"),";"))}else{Ze=Ee.def(de,".",Ge);var O=se.cond(Ze,"!==",Be,".",Ge);Ee(O),Ge in Wt?O(se.cond(Ze).then(Ye,".enable(",Wt[Ge],");").else(Ye,".disable(",Wt[Ge],");"),Be,".",Ge,"=",Ze,";"):O(Ye,".",Ot[Ge],"(",Ze,");",Be,".",Ge,"=",Ze,";")}}}),Object.keys(Te.state).length===0&&Ee(Be,".dirty=false;"),te(Ee)}function ii(se,te,Te,We){var Ye=se.shared,De=se.current,Me=Ye.current,Be=Ye.gl;Al(Object.keys(Te)).forEach(function(de){var Ee=Te[de];if(!(We&&!We(Ee))){var fe=Ee.append(se,te);if(Wt[de]){var Ge=Wt[de];Gn(Ee)?fe?te(Be,".enable(",Ge,");"):te(Be,".disable(",Ge,");"):te(se.cond(fe).then(Be,".enable(",Ge,");").else(Be,".disable(",Ge,");")),te(Me,".",de,"=",fe,";")}else if(k(fe)){var Ze=De[de];te(Be,".",Ot[de],"(",fe,");",fe.map(function(d,m){return Ze+"["+m+"]="+d}).join(";"),";")}else te(Be,".",Ot[de],"(",fe,");",Me,".",de,"=",fe,";")}})}function Ao(se,te){Ft&&(se.instancing=te.def(se.shared.extensions,".angle_instanced_arrays"))}function Jn(se,te,Te,We,Ye){var De=se.shared,Me=se.stats,Be=De.current,de=De.timer,Ee=Te.profile;function fe(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ge,Ze;function d(pe){Ge=te.def(),pe(Ge,"=",fe(),";"),typeof Ye=="string"?pe(Me,".count+=",Ye,";"):pe(Me,".count++;"),Rt&&(We?(Ze=te.def(),pe(Ze,"=",de,".getNumPendingQueries();")):pe(de,".beginQuery(",Me,");"))}function m(pe){pe(Me,".cpuTime+=",fe(),"-",Ge,";"),Rt&&(We?pe(de,".pushScopeStats(",Ze,",",de,".getNumPendingQueries(),",Me,");"):pe(de,".endQuery();"))}function O(pe){var we=te.def(Be,".profile");te(Be,".profile=",pe,";"),te.exit(Be,".profile=",we,";")}var C;if(Ee){if(Gn(Ee)){Ee.enable?(d(te),m(te.exit),O("true")):O("false");return}C=Ee.append(se,te),O(C)}else C=te.def(Be,".profile");var V=se.block();d(V),te("if(",C,"){",V,"}");var ee=se.block();m(ee),te.exit("if(",C,"){",ee,"}")}function di(se,te,Te,We,Ye){var De=se.shared;function Me(de){switch(de){case rs:case bd:case Hs:return 2;case rf:case Wi:case af:return 3;case la:case of:case lf:return 4;default:return 1}}function Be(de,Ee,fe){var Ge=De.gl,Ze=te.def(de,".location"),d=te.def(De.attributes,"[",Ze,"]"),m=fe.state,O=fe.buffer,C=[fe.x,fe.y,fe.z,fe.w],V=["buffer","normalized","offset","stride"];function ee(){te("if(!",d,".buffer){",Ge,".enableVertexAttribArray(",Ze,");}");var we=fe.type,Ue;if(fe.size?Ue=te.def(fe.size,"||",Ee):Ue=Ee,te("if(",d,".type!==",we,"||",d,".size!==",Ue,"||",V.map(function(wt){return d+"."+wt+"!=="+fe[wt]}).join("||"),"){",Ge,".bindBuffer(",Sl,",",O,".buffer);",Ge,".vertexAttribPointer(",[Ze,Ue,we,fe.normalized,fe.stride,fe.offset],");",d,".type=",we,";",d,".size=",Ue,";",V.map(function(wt){return d+"."+wt+"="+fe[wt]+";"}).join(""),"}"),Ft){var vt=fe.divisor;te("if(",d,".divisor!==",vt,"){",se.instancing,".vertexAttribDivisorANGLE(",[Ze,vt],");",d,".divisor=",vt,";}")}}function pe(){te("if(",d,".buffer){",Ge,".disableVertexAttribArray(",Ze,");",d,".buffer=null;","}if(",Xl.map(function(we,Ue){return d+"."+we+"!=="+C[Ue]}).join("||"),"){",Ge,".vertexAttrib4f(",Ze,",",C,");",Xl.map(function(we,Ue){return d+"."+we+"="+C[Ue]+";"}).join(""),"}")}m===es?ee():m===ud?pe():(te("if(",m,"===",es,"){"),ee(),te("}else{"),pe(),te("}"))}We.forEach(function(de){var Ee=de.name,fe=Te.attributes[Ee],Ge;if(fe){if(!Ye(fe))return;Ge=fe.append(se,te)}else{if(!Ye(ua))return;var Ze=se.scopeAttrib(Ee);re.optional(function(){se.assert(te,Ze+".state","missing attribute "+Ee)}),Ge={},Object.keys(new qe).forEach(function(d){Ge[d]=te.def(Ze,".",d)})}Be(se.link(de),Me(de.info.type),Ge)})}function Nr(se,te,Te,We,Ye){for(var De=se.shared,Me=De.gl,Be,de=0;de<We.length;++de){var Ee=We[de],fe=Ee.name,Ge=Ee.info.type,Ze=Te.uniforms[fe],d=se.link(Ee),m=d+".location",O;if(Ze){if(!Ye(Ze))continue;if(Gn(Ze)){var C=Ze.value;if(re.command(C!==null&&typeof C<"u",'missing uniform "'+fe+'"',se.commandStr),Ge===Kl||Ge===ni){re.command(typeof C=="function"&&(Ge===Kl&&(C._reglType==="texture2d"||C._reglType==="framebuffer")||Ge===ni&&(C._reglType==="textureCube"||C._reglType==="framebufferCube")),"invalid texture for uniform "+fe,se.commandStr);var V=se.link(C._texture||C.color[0]._texture);te(Me,".uniform1i(",m,",",V+".bind());"),te.exit(V,".unbind();")}else if(Ge===Xs||Ge===qs||Ge===is){re.optional(function(){re.command(k(C),"invalid matrix for uniform "+fe,se.commandStr),re.command(Ge===Xs&&C.length===4||Ge===qs&&C.length===9||Ge===is&&C.length===16,"invalid length for matrix uniform "+fe,se.commandStr)});var ee=se.global.def("new Float32Array(["+Array.prototype.slice.call(C)+"])"),pe=2;Ge===qs?pe=3:Ge===is&&(pe=4),te(Me,".uniformMatrix",pe,"fv(",m,",false,",ee,");")}else{switch(Ge){case Gi:re.commandType(C,"number","uniform "+fe,se.commandStr),Be="1f";break;case rs:re.command(k(C)&&C.length===2,"uniform "+fe,se.commandStr),Be="2f";break;case rf:re.command(k(C)&&C.length===3,"uniform "+fe,se.commandStr),Be="3f";break;case la:re.command(k(C)&&C.length===4,"uniform "+fe,se.commandStr),Be="4f";break;case os:re.commandType(C,"boolean","uniform "+fe,se.commandStr),Be="1i";break;case Ca:re.commandType(C,"number","uniform "+fe,se.commandStr),Be="1i";break;case Hs:re.command(k(C)&&C.length===2,"uniform "+fe,se.commandStr),Be="2i";break;case bd:re.command(k(C)&&C.length===2,"uniform "+fe,se.commandStr),Be="2i";break;case af:re.command(k(C)&&C.length===3,"uniform "+fe,se.commandStr),Be="3i";break;case Wi:re.command(k(C)&&C.length===3,"uniform "+fe,se.commandStr),Be="3i";break;case lf:re.command(k(C)&&C.length===4,"uniform "+fe,se.commandStr),Be="4i";break;case of:re.command(k(C)&&C.length===4,"uniform "+fe,se.commandStr),Be="4i";break}te(Me,".uniform",Be,"(",m,",",k(C)?Array.prototype.slice.call(C):C,");")}continue}else O=Ze.append(se,te)}else{if(!Ye(ua))continue;O=te.def(De.uniforms,"[",ie.id(fe),"]")}Ge===Kl?(re(!Array.isArray(O),"must specify a scalar prop for textures"),te("if(",O,"&&",O,'._reglType==="framebuffer"){',O,"=",O,".color[0];","}")):Ge===ni&&(re(!Array.isArray(O),"must specify a scalar prop for cube maps"),te("if(",O,"&&",O,'._reglType==="framebufferCube"){',O,"=",O,".color[0];","}")),re.optional(function(){function Vt(Pt,Qt){se.assert(te,Pt,'bad data or missing for uniform "'+fe+'".  '+Qt)}function Tn(Pt){re(!Array.isArray(O),"must not specify an array type for uniform"),Vt("typeof "+O+'==="'+Pt+'"',"invalid type, expected "+Pt)}function On(Pt,Qt){Array.isArray(O)?re(O.length===Pt,"must have length "+Pt):Vt(De.isArrayLike+"("+O+")&&"+O+".length==="+Pt,"invalid vector, should have length "+Pt,se.commandStr)}function Yn(Pt){re(!Array.isArray(O),"must not specify a value type"),Vt("typeof "+O+'==="function"&&'+O+'._reglType==="texture'+(Pt===gd?"2d":"Cube")+'"',"invalid texture type",se.commandStr)}switch(Ge){case Ca:Tn("number");break;case bd:On(2);break;case Wi:On(3);break;case of:On(4);break;case Gi:Tn("number");break;case rs:On(2);break;case rf:On(3);break;case la:On(4);break;case os:Tn("boolean");break;case Hs:On(2);break;case af:On(3);break;case lf:On(4);break;case Xs:On(4);break;case qs:On(9);break;case is:On(16);break;case Kl:Yn(gd);break;case ni:Yn(_h);break}});var we=1;switch(Ge){case Kl:case ni:var Ue=te.def(O,"._texture");te(Me,".uniform1i(",m,",",Ue,".bind());"),te.exit(Ue,".unbind();");continue;case Ca:case os:Be="1i";break;case bd:case Hs:Be="2i",we=2;break;case Wi:case af:Be="3i",we=3;break;case of:case lf:Be="4i",we=4;break;case Gi:Be="1f";break;case rs:Be="2f",we=2;break;case rf:Be="3f",we=3;break;case la:Be="4f",we=4;break;case Xs:Be="Matrix2fv";break;case qs:Be="Matrix3fv";break;case is:Be="Matrix4fv";break}if(te(Me,".uniform",Be,"(",m,","),Be.charAt(0)==="M"){var vt=Math.pow(Ge-Xs+2,2),wt=se.global.def("new Float32Array(",vt,")");Array.isArray(O)?te("false,(",Rr(vt,function(Vt){return wt+"["+Vt+"]="+O[Vt]}),",",wt,")"):te("false,(Array.isArray(",O,")||",O," instanceof Float32Array)?",O,":(",Rr(vt,function(Vt){return wt+"["+Vt+"]="+O+"["+Vt+"]"}),",",wt,")")}else we>1?te(Rr(we,function(Vt){return Array.isArray(O)?O[Vt]:O+"["+Vt+"]"})):(re(!Array.isArray(O),"uniform value must not be an array"),te(O));te(");")}}function Dn(se,te,Te,We){var Ye=se.shared,De=Ye.gl,Me=Ye.draw,Be=We.draw;function de(){var Ue=Be.elements,vt,wt=te;return Ue?((Ue.contextDep&&We.contextDynamic||Ue.propDep)&&(wt=Te),vt=Ue.append(se,wt)):vt=wt.def(Me,".",Bo),vt&&wt("if("+vt+")"+De+".bindBuffer("+gp+","+vt+".buffer.buffer);"),vt}function Ee(){var Ue=Be.count,vt,wt=te;return Ue?((Ue.contextDep&&We.contextDynamic||Ue.propDep)&&(wt=Te),vt=Ue.append(se,wt),re.optional(function(){Ue.MISSING&&se.assert(te,"false","missing vertex count"),Ue.DYNAMIC&&se.assert(wt,vt+">=0","missing vertex count")})):(vt=wt.def(Me,".",el),re.optional(function(){se.assert(wt,vt+">=0","missing vertex count")})),vt}var fe=de();function Ge(Ue){var vt=Be[Ue];return vt?vt.contextDep&&We.contextDynamic||vt.propDep?vt.append(se,Te):vt.append(se,te):te.def(Me,".",Ue)}var Ze=Ge(Yl),d=Ge(tl),m=Ee();if(typeof m=="number"){if(m===0)return}else Te("if(",m,"){"),Te.exit("}");var O,C;Ft&&(O=Ge(Su),C=se.instancing);var V=fe+".type",ee=Be.elements&&Gn(Be.elements);function pe(){function Ue(){Te(C,".drawElementsInstancedANGLE(",[Ze,m,V,d+"<<(("+V+"-"+Eu+")>>1)",O],");")}function vt(){Te(C,".drawArraysInstancedANGLE(",[Ze,d,m,O],");")}fe?ee?Ue():(Te("if(",fe,"){"),Ue(),Te("}else{"),vt(),Te("}")):vt()}function we(){function Ue(){Te(De+".drawElements("+[Ze,m,V,d+"<<(("+V+"-"+Eu+")>>1)"]+");")}function vt(){Te(De+".drawArrays("+[Ze,d,m]+");")}fe?ee?Ue():(Te("if(",fe,"){"),Ue(),Te("}else{"),vt(),Te("}")):vt()}Ft&&(typeof O!="number"||O>=0)?typeof O=="string"?(Te("if(",O,">0){"),pe(),Te("}else if(",O,"<0){"),we(),Te("}")):pe():we()}function fr(se,te,Te,We,Ye){var De=Cn(),Me=De.proc("body",Ye);return re.optional(function(){De.commandStr=te.commandStr,De.command=De.link(te.commandStr)}),Ft&&(De.instancing=Me.def(De.shared.extensions,".angle_instanced_arrays")),se(De,Me,Te,We),De.compile().body}function Hn(se,te,Te,We){Ao(se,te),Te.useVAO?Te.drawVAO?te(se.shared.vao,".setVAO(",Te.drawVAO.append(se,te),");"):te(se.shared.vao,".setVAO(",se.shared.vao,".targetVAO);"):(te(se.shared.vao,".setVAO(null);"),di(se,te,Te,We.attributes,function(){return!0})),Nr(se,te,Te,We.uniforms,function(){return!0}),Dn(se,te,te,Te)}function fo(se,te){var Te=se.proc("draw",1);Ao(se,Te),Vo(se,Te,te.context),So(se,Te,te.framebuffer),bo(se,Te,te),ii(se,Te,te.state),Jn(se,Te,te,!1,!0);var We=te.shader.progVar.append(se,Te);if(Te(se.shared.gl,".useProgram(",We,".program);"),te.shader.program)Hn(se,Te,te,te.shader.program);else{Te(se.shared.vao,".setVAO(null);");var Ye=se.global.def("{}"),De=Te.def(We,".id"),Me=Te.def(Ye,"[",De,"]");Te(se.cond(Me).then(Me,".call(this,a0);").else(Me,"=",Ye,"[",De,"]=",se.link(function(Be){return fr(Hn,se,te,Be,1)}),"(",We,");",Me,".call(this,a0);"))}Object.keys(te.state).length>0&&Te(se.shared.current,".dirty=true;")}function La(se,te,Te,We){se.batchId="a1",Ao(se,te);function Ye(){return!0}di(se,te,Te,We.attributes,Ye),Nr(se,te,Te,We.uniforms,Ye),Dn(se,te,te,Te)}function Ql(se,te,Te,We){Ao(se,te);var Ye=Te.contextDep,De=te.def(),Me="a0",Be="a1",de=te.def();se.shared.props=de,se.batchId=De;var Ee=se.scope(),fe=se.scope();te(Ee.entry,"for(",De,"=0;",De,"<",Be,";++",De,"){",de,"=",Me,"[",De,"];",fe,"}",Ee.exit);function Ge(V){return V.contextDep&&Ye||V.propDep}function Ze(V){return!Ge(V)}if(Te.needsContext&&Vo(se,fe,Te.context),Te.needsFramebuffer&&So(se,fe,Te.framebuffer),ii(se,fe,Te.state,Ge),Te.profile&&Ge(Te.profile)&&Jn(se,fe,Te,!1,!0),We)Te.useVAO?Te.drawVAO?Ge(Te.drawVAO)?fe(se.shared.vao,".setVAO(",Te.drawVAO.append(se,fe),");"):Ee(se.shared.vao,".setVAO(",Te.drawVAO.append(se,Ee),");"):Ee(se.shared.vao,".setVAO(",se.shared.vao,".targetVAO);"):(Ee(se.shared.vao,".setVAO(null);"),di(se,Ee,Te,We.attributes,Ze),di(se,fe,Te,We.attributes,Ge)),Nr(se,Ee,Te,We.uniforms,Ze),Nr(se,fe,Te,We.uniforms,Ge),Dn(se,Ee,fe,Te);else{var d=se.global.def("{}"),m=Te.shader.progVar.append(se,fe),O=fe.def(m,".id"),C=fe.def(d,"[",O,"]");fe(se.shared.gl,".useProgram(",m,".program);","if(!",C,"){",C,"=",d,"[",O,"]=",se.link(function(V){return fr(La,se,Te,V,2)}),"(",m,");}",C,".call(this,a0[",De,"],",De,");")}}function ye(se,te){var Te=se.proc("batch",2);se.batchId="0",Ao(se,Te);var We=!1,Ye=!0;Object.keys(te.context).forEach(function(d){We=We||te.context[d].propDep}),We||(Vo(se,Te,te.context),Ye=!1);var De=te.framebuffer,Me=!1;De?(De.propDep?We=Me=!0:De.contextDep&&We&&(Me=!0),Me||So(se,Te,De)):So(se,Te,null),te.state.viewport&&te.state.viewport.propDep&&(We=!0);function Be(d){return d.contextDep&&We||d.propDep}bo(se,Te,te),ii(se,Te,te.state,function(d){return!Be(d)}),(!te.profile||!Be(te.profile))&&Jn(se,Te,te,!1,"a1"),te.contextDep=We,te.needsContext=Ye,te.needsFramebuffer=Me;var de=te.shader.progVar;if(de.contextDep&&We||de.propDep)Ql(se,Te,te,null);else{var Ee=de.append(se,Te);if(Te(se.shared.gl,".useProgram(",Ee,".program);"),te.shader.program)Ql(se,Te,te,te.shader.program);else{Te(se.shared.vao,".setVAO(null);");var fe=se.global.def("{}"),Ge=Te.def(Ee,".id"),Ze=Te.def(fe,"[",Ge,"]");Te(se.cond(Ze).then(Ze,".call(this,a0,a1);").else(Ze,"=",fe,"[",Ge,"]=",se.link(function(d){return fr(Ql,se,te,d,2)}),"(",Ee,");",Ze,".call(this,a0,a1);"))}}Object.keys(te.state).length>0&&Te(se.shared.current,".dirty=true;")}function ot(se,te){var Te=se.proc("scope",3);se.batchId="a2";var We=se.shared,Ye=We.current;Vo(se,Te,te.context),te.framebuffer&&te.framebuffer.append(se,Te),Al(Object.keys(te.state)).forEach(function(Me){var Be=te.state[Me],de=Be.append(se,Te);k(de)?de.forEach(function(Ee,fe){Te.set(se.next[Me],"["+fe+"]",Ee)}):Te.set(We.next,"."+Me,de)}),Jn(se,Te,te,!0,!0),[Bo,tl,el,Su,Yl].forEach(function(Me){var Be=te.draw[Me];Be&&Te.set(We.draw,"."+Me,""+Be.append(se,Te))}),Object.keys(te.uniforms).forEach(function(Me){var Be=te.uniforms[Me].append(se,Te);Array.isArray(Be)&&(Be="["+Be.join()+"]"),Te.set(We.uniforms,"["+ie.id(Me)+"]",Be)}),Object.keys(te.attributes).forEach(function(Me){var Be=te.attributes[Me].append(se,Te),de=se.scopeAttrib(Me);Object.keys(new qe).forEach(function(Ee){Te.set(de,"."+Ee,Be[Ee])})}),te.scopeVAO&&Te.set(We.vao,".targetVAO",te.scopeVAO.append(se,Te));function De(Me){var Be=te.shader[Me];Be&&Te.set(We.shader,"."+Me,Be.append(se,Te))}De(ef),De(ao),Object.keys(te.state).length>0&&(Te(Ye,".dirty=true;"),Te.exit(Ye,".dirty=true;")),Te("a1(",se.shared.context,",a0,",se.batchId,");")}function Qe(se){if(!(typeof se!="object"||k(se))){for(var te=Object.keys(se),Te=0;Te<te.length;++Te)if(Yt.isDynamic(se[te[Te]]))return!0;return!1}}function tn(se,te,Te){var We=te.static[Te];if(!We||!Qe(We))return;var Ye=se.global,De=Object.keys(We),Me=!1,Be=!1,de=!1,Ee=se.global.def("{}");De.forEach(function(Ge){var Ze=We[Ge];if(Yt.isDynamic(Ze)){typeof Ze=="function"&&(Ze=We[Ge]=Yt.unbox(Ze));var d=Ci(Ze,null);Me=Me||d.thisDep,de=de||d.propDep,Be=Be||d.contextDep}else{switch(Ye(Ee,".",Ge,"="),typeof Ze){case"number":Ye(Ze);break;case"string":Ye('"',Ze,'"');break;case"object":Array.isArray(Ze)&&Ye("[",Ze.join(),"]");break;default:Ye(se.link(Ze));break}Ye(";")}});function fe(Ge,Ze){De.forEach(function(d){var m=We[d];if(Yt.isDynamic(m)){var O=Ge.invoke(Ze,m);Ze(Ee,".",d,"=",O,";")}})}te.dynamic[Te]=new Yt.DynamicVariable(qc,{thisDep:Me,contextDep:Be,propDep:de,ref:Ee,append:fe}),delete te.static[Te]}function hr(se,te,Te,We,Ye){var De=Cn();De.stats=De.link(Ye),Object.keys(te.static).forEach(function(Be){tn(De,te,Be)}),mp.forEach(function(Be){tn(De,se,Be)});var Me=Ro(se,te,Te,We,De);return fo(De,Me),ot(De,Me),ye(De,Me),o(De.compile(),{destroy:function(){Me.shader.program.destroy()}})}return{next:Jt,current:At,procs:function(){var se=Cn(),te=se.proc("poll"),Te=se.proc("refresh"),We=se.block();te(We),Te(We);var Ye=se.shared,De=Ye.gl,Me=Ye.next,Be=Ye.current;We(Be,".dirty=false;"),So(se,te),So(se,Te,null,!0);var de;Ft&&(de=se.link(Ft)),be.oes_vertex_array_object&&Te(se.link(be.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ee=0;Ee<rt.maxAttributes;++Ee){var fe=Te.def(Ye.attributes,"[",Ee,"]"),Ge=se.cond(fe,".buffer");Ge.then(De,".enableVertexAttribArray(",Ee,");",De,".bindBuffer(",Sl,",",fe,".buffer.buffer);",De,".vertexAttribPointer(",Ee,",",fe,".size,",fe,".type,",fe,".normalized,",fe,".stride,",fe,".offset);").else(De,".disableVertexAttribArray(",Ee,");",De,".vertexAttrib4f(",Ee,",",fe,".x,",fe,".y,",fe,".z,",fe,".w);",fe,".buffer=null;"),Te(Ge),Ft&&Te(de,".vertexAttribDivisorANGLE(",Ee,",",fe,".divisor);")}return Te(se.shared.vao,".currentVAO=null;",se.shared.vao,".setVAO(",se.shared.vao,".targetVAO);"),Object.keys(Wt).forEach(function(Ze){var d=Wt[Ze],m=We.def(Me,".",Ze),O=se.block();O("if(",m,"){",De,".enable(",d,")}else{",De,".disable(",d,")}",Be,".",Ze,"=",m,";"),Te(O),te("if(",m,"!==",Be,".",Ze,"){",O,"}")}),Object.keys(Ot).forEach(function(Ze){var d=Ot[Ze],m=At[Ze],O,C,V=se.block();if(V(De,".",d,"("),k(m)){var ee=m.length;O=se.global.def(Me,".",Ze),C=se.global.def(Be,".",Ze),V(Rr(ee,function(pe){return O+"["+pe+"]"}),");",Rr(ee,function(pe){return C+"["+pe+"]="+O+"["+pe+"];"}).join("")),te("if(",Rr(ee,function(pe){return O+"["+pe+"]!=="+C+"["+pe+"]"}).join("||"),"){",V,"}")}else O=We.def(Me,".",Ze),C=We.def(Be,".",Ze),V(O,");",Be,".",Ze,"=",O,";"),te("if(",O,"!==",C,"){",V,"}");Te(V)}),se.compile()}(),compile:hr}}function Ph(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ku=34918,mr=34919,Nh=35007,sa=function(B,ie){if(!ie.ext_disjoint_timer_query)return null;var be=[];function rt(){return be.pop()||ie.ext_disjoint_timer_query.createQueryEXT()}function ht(Ft){be.push(Ft)}var et=[];function st(Ft){var Kt=rt();ie.ext_disjoint_timer_query.beginQueryEXT(Nh,Kt),et.push(Kt),Rt(et.length-1,et.length,Ft)}function Nt(){ie.ext_disjoint_timer_query.endQueryEXT(Nh)}function It(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ct=[];function ct(){return Ct.pop()||new It}function Gt(Ft){Ct.push(Ft)}var Ut=[];function Rt(Ft,Kt,At){var Jt=ct();Jt.startQueryIndex=Ft,Jt.endQueryIndex=Kt,Jt.sum=0,Jt.stats=At,Ut.push(Jt)}var Et=[],qe=[];function lt(){var Ft,Kt,At=et.length;if(At!==0){qe.length=Math.max(qe.length,At+1),Et.length=Math.max(Et.length,At+1),Et[0]=0,qe[0]=0;var Jt=0;for(Ft=0,Kt=0;Kt<et.length;++Kt){var Tt=et[Kt];ie.ext_disjoint_timer_query.getQueryObjectEXT(Tt,mr)?(Jt+=ie.ext_disjoint_timer_query.getQueryObjectEXT(Tt,ku),ht(Tt)):et[Ft++]=Tt,Et[Kt+1]=Jt,qe[Kt+1]=Ft}for(et.length=Ft,Ft=0,Kt=0;Kt<Ut.length;++Kt){var Wt=Ut[Kt],Ot=Wt.startQueryIndex,Xt=Wt.endQueryIndex;Wt.sum+=Et[Xt]-Et[Ot];var kn=qe[Ot],zn=qe[Xt];zn===kn?(Wt.stats.gpuTime+=Wt.sum/1e6,Gt(Wt)):(Wt.startQueryIndex=kn,Wt.endQueryIndex=zn,Ut[Ft++]=Wt)}Ut.length=Ft}}return{beginQuery:st,endQuery:Nt,pushScopeStats:Rt,update:lt,getNumPendingQueries:function(){return et.length},clear:function(){be.push.apply(be,et);for(var Ft=0;Ft<be.length;Ft++)ie.ext_disjoint_timer_query.deleteQueryEXT(be[Ft]);et.length=0,be.length=0},restore:function(){et.length=0,be.length=0}}},oi=16384,Ia=256,Kv=1024,cf=34962,Tl="webglcontextlost",Sp="webglcontextrestored",Jl=1,no=2,Po=3;function xi(B,ie){for(var be=0;be<B.length;++be)if(B[be]===ie)return be;return-1}function ff(B){var ie=ir(B);if(!ie)return null;var be=ie.gl,rt=be.getContextAttributes(),ht=be.isContextLost(),et=Qr(be,ie);if(!et)return null;var st=ui(),Nt=Ph(),It=et.extensions,Ct=sa(be,It),ct=_r(),Gt=be.drawingBufferWidth,Ut=be.drawingBufferHeight,Rt={tick:0,time:0,viewportWidth:Gt,viewportHeight:Ut,framebufferWidth:Gt,framebufferHeight:Ut,drawingBufferWidth:Gt,drawingBufferHeight:Ut,pixelRatio:ie.pixelRatio},Et={},qe={elements:null,primitive:4,count:-1,offset:0,instances:-1},lt=Mc(be,It),Ft=ya(be,Nt,ie,At),Kt=ad(be,It,lt,Nt,Ft);function At(Dn){return Kt.destroyBuffer(Dn)}var Jt=fn(be,It,Ft,Nt),Tt=cp(be,st,Nt,ie),Wt=Or(be,It,lt,function(){kn.procs.poll()},Rt,Nt,ie),Ot=js(be,It,lt,Nt,ie),Xt=zc(be,It,lt,Wt,Ot,Nt),kn=Yv(be,st,It,lt,Ft,Jt,Wt,Xt,Et,Kt,Tt,qe,Rt,Ct,ie),zn=xo(be,Xt,kn.procs.poll,Rt,rt,It,lt),Lt=kn.next,Mt=be.canvas,xt=[],Cn=[],nr=[],un=[ie.onDestroy],er=null;function Wn(){if(xt.length===0){Ct&&Ct.update(),er=null;return}er=Nn.next(Wn),ii();for(var Dn=xt.length-1;Dn>=0;--Dn){var fr=xt[Dn];fr&&fr(Rt,null,0)}be.flush(),Ct&&Ct.update()}function rr(){!er&&xt.length>0&&(er=Nn.next(Wn))}function gr(){er&&(Nn.cancel(Wn),er=null)}function No(Dn){Dn.preventDefault(),ht=!0,gr(),Cn.forEach(function(fr){fr()})}function Uo(Dn){be.getError(),ht=!1,et.restore(),Tt.restore(),Ft.restore(),Wt.restore(),Ot.restore(),Xt.restore(),Kt.restore(),Ct&&Ct.restore(),kn.procs.refresh(),rr(),nr.forEach(function(fr){fr()})}Mt&&(Mt.addEventListener(Tl,No,!1),Mt.addEventListener(Sp,Uo,!1));function cr(){xt.length=0,gr(),Mt&&(Mt.removeEventListener(Tl,No),Mt.removeEventListener(Sp,Uo)),Tt.clear(),Xt.clear(),Ot.clear(),Wt.clear(),Jt.clear(),Ft.clear(),Kt.clear(),Ct&&Ct.clear(),un.forEach(function(Dn){Dn()})}function zo(Dn){re(!!Dn,"invalid args to regl({...})"),re.type(Dn,"object","invalid args to regl({...})");function fr(Ye){var De=o({},Ye);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Me(Be){if(Be in De){var de=De[Be];delete De[Be],Object.keys(de).forEach(function(Ee){De[Be+"."+Ee]=de[Ee]})}}return Me("blend"),Me("depth"),Me("cull"),Me("stencil"),Me("polygonOffset"),Me("scissor"),Me("sample"),"vao"in Ye&&(De.vao=Ye.vao),De}function Hn(Ye,De){var Me={},Be={};return Object.keys(Ye).forEach(function(de){var Ee=Ye[de];if(Yt.isDynamic(Ee)){Be[de]=Yt.unbox(Ee,de);return}else if(De&&Array.isArray(Ee)){for(var fe=0;fe<Ee.length;++fe)if(Yt.isDynamic(Ee[fe])){Be[de]=Yt.unbox(Ee,de);return}}Me[de]=Ee}),{dynamic:Be,static:Me}}var fo=Hn(Dn.context||{},!0),La=Hn(Dn.uniforms||{},!0),Ql=Hn(Dn.attributes||{},!1),ye=Hn(fr(Dn),!1),ot={gpuTime:0,cpuTime:0,count:0},Qe=kn.compile(ye,Ql,La,fo,ot),tn=Qe.draw,hr=Qe.batch,se=Qe.scope,te=[];function Te(Ye){for(;te.length<Ye;)te.push(null);return te}function We(Ye,De){var Me;if(ht&&re.raise("context lost"),typeof Ye=="function")return se.call(this,null,Ye,0);if(typeof De=="function")if(typeof Ye=="number")for(Me=0;Me<Ye;++Me)se.call(this,null,De,Me);else if(Array.isArray(Ye))for(Me=0;Me<Ye.length;++Me)se.call(this,Ye[Me],De,Me);else return se.call(this,Ye,De,0);else if(typeof Ye=="number"){if(Ye>0)return hr.call(this,Te(Ye|0),Ye|0)}else if(Array.isArray(Ye)){if(Ye.length)return hr.call(this,Ye,Ye.length)}else return tn.call(this,Ye)}return o(We,{stats:ot,destroy:function(){Qe.destroy()}})}var ro=Xt.setFBO=zo({framebuffer:Yt.define.call(null,Jl,"framebuffer")});function Ro(Dn,fr){var Hn=0;kn.procs.poll();var fo=fr.color;fo&&(be.clearColor(+fo[0]||0,+fo[1]||0,+fo[2]||0,+fo[3]||0),Hn|=oi),"depth"in fr&&(be.clearDepth(+fr.depth),Hn|=Ia),"stencil"in fr&&(be.clearStencil(fr.stencil|0),Hn|=Kv),re(!!Hn,"called regl.clear with no buffer specified"),be.clear(Hn)}function Vo(Dn){if(re(typeof Dn=="object"&&Dn,"regl.clear() takes an object as input"),"framebuffer"in Dn)if(Dn.framebuffer&&Dn.framebuffer_reglType==="framebufferCube")for(var fr=0;fr<6;++fr)ro(o({framebuffer:Dn.framebuffer.faces[fr]},Dn),Ro);else ro(Dn,Ro);else Ro(null,Dn)}function So(Dn){re.type(Dn,"function","regl.frame() callback must be a function"),xt.push(Dn);function fr(){var Hn=xi(xt,Dn);re(Hn>=0,"cannot cancel a frame twice");function fo(){var La=xi(xt,fo);xt[La]=xt[xt.length-1],xt.length-=1,xt.length<=0&&gr()}xt[Hn]=fo}return rr(),{cancel:fr}}function bo(){var Dn=Lt.viewport,fr=Lt.scissor_box;Dn[0]=Dn[1]=fr[0]=fr[1]=0,Rt.viewportWidth=Rt.framebufferWidth=Rt.drawingBufferWidth=Dn[2]=fr[2]=be.drawingBufferWidth,Rt.viewportHeight=Rt.framebufferHeight=Rt.drawingBufferHeight=Dn[3]=fr[3]=be.drawingBufferHeight}function ii(){Rt.tick+=1,Rt.time=Jn(),bo(),kn.procs.poll()}function Ao(){Wt.refresh(),bo(),kn.procs.refresh(),Ct&&Ct.update()}function Jn(){return(_r()-ct)/1e3}Ao();function di(Dn,fr){re.type(fr,"function","listener callback must be a function");var Hn;switch(Dn){case"frame":return So(fr);case"lost":Hn=Cn;break;case"restore":Hn=nr;break;case"destroy":Hn=un;break;default:re.raise("invalid event, must be one of frame,lost,restore,destroy")}return Hn.push(fr),{cancel:function(){for(var fo=0;fo<Hn.length;++fo)if(Hn[fo]===fr){Hn[fo]=Hn[Hn.length-1],Hn.pop();return}}}}var Nr=o(zo,{clear:Vo,prop:Yt.define.bind(null,Jl),context:Yt.define.bind(null,no),this:Yt.define.bind(null,Po),draw:zo({}),buffer:function(Dn){return Ft.create(Dn,cf,!1,!1)},elements:function(Dn){return Jt.create(Dn,!1)},texture:Wt.create2D,cube:Wt.createCube,renderbuffer:Ot.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:Kt.createVAO,attributes:rt,frame:So,on:di,limits:lt,hasExtension:function(Dn){return lt.extensions.indexOf(Dn.toLowerCase())>=0},read:zn,destroy:cr,_gl:be,_refresh:Ao,poll:function(){ii(),Ct&&Ct.update()},now:Jn,stats:Nt});return ie.onDone(null,Nr),Nr}return ff})})(Jte);var Ef,hy,Of,Du,vy,Pd,yy,dg,uc,Fp,Oa,sc,cc,pg;Ef={},an(Ef,on.POINTS,"points"),an(Ef,on.LINES,"lines"),an(Ef,on.LINE_LOOP,"line loop"),an(Ef,on.LINE_STRIP,"line strip"),an(Ef,on.TRIANGLES,"triangles"),an(Ef,on.TRIANGLE_FAN,"triangle fan"),an(Ef,on.TRIANGLE_STRIP,"triangle strip");hy={},an(hy,on.STATIC_DRAW,"static"),an(hy,on.DYNAMIC_DRAW,"dynamic"),an(hy,on.STREAM_DRAW,"stream");Of={},an(Of,on.BYTE,"int8"),an(Of,on.UNSIGNED_INT,"int16"),an(Of,on.INT,"int32"),an(Of,on.UNSIGNED_BYTE,"uint8"),an(Of,on.UNSIGNED_SHORT,"uint16"),an(Of,on.UNSIGNED_INT,"uint32"),an(Of,on.FLOAT,"float");Du={},an(Du,on.ALPHA,"alpha"),an(Du,on.LUMINANCE,"luminance"),an(Du,on.LUMINANCE_ALPHA,"luminance alpha"),an(Du,on.RGB,"rgb"),an(Du,on.RGBA,"rgba"),an(Du,on.RGBA4,"rgba4"),an(Du,on.RGB5_A1,"rgb5 a1"),an(Du,on.RGB565,"rgb565"),an(Du,on.DEPTH_COMPONENT,"depth"),an(Du,on.DEPTH_STENCIL,"depth stencil");vy={},an(vy,on.DONT_CARE,"dont care"),an(vy,on.NICEST,"nice"),an(vy,on.FASTEST,"fast");Pd={},an(Pd,on.NEAREST,"nearest"),an(Pd,on.LINEAR,"linear"),an(Pd,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(Pd,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(Pd,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(Pd,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");yy={},an(yy,on.REPEAT,"repeat"),an(yy,on.CLAMP_TO_EDGE,"clamp"),an(yy,on.MIRRORED_REPEAT,"mirror");dg={},an(dg,on.NONE,"none"),an(dg,on.BROWSER_DEFAULT_WEBGL,"browser");uc={},an(uc,on.NEVER,"never"),an(uc,on.ALWAYS,"always"),an(uc,on.LESS,"less"),an(uc,on.LEQUAL,"lequal"),an(uc,on.GREATER,"greater"),an(uc,on.GEQUAL,"gequal"),an(uc,on.EQUAL,"equal"),an(uc,on.NOTEQUAL,"notequal");Fp={},an(Fp,on.FUNC_ADD,"add"),an(Fp,on.MIN_EXT,"min"),an(Fp,on.MAX_EXT,"max"),an(Fp,on.FUNC_SUBTRACT,"subtract"),an(Fp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");Oa={},an(Oa,on.ZERO,"zero"),an(Oa,on.ONE,"one"),an(Oa,on.SRC_COLOR,"src color"),an(Oa,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(Oa,on.SRC_ALPHA,"src alpha"),an(Oa,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(Oa,on.DST_COLOR,"dst color"),an(Oa,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(Oa,on.DST_ALPHA,"dst alpha"),an(Oa,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(Oa,on.CONSTANT_COLOR,"constant color"),an(Oa,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(Oa,on.CONSTANT_ALPHA,"constant alpha"),an(Oa,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(Oa,on.SRC_ALPHA_SATURATE,"src alpha saturate");sc={},an(sc,on.NEVER,"never"),an(sc,on.ALWAYS,"always"),an(sc,on.LESS,"less"),an(sc,on.LEQUAL,"lequal"),an(sc,on.GREATER,"greater"),an(sc,on.GEQUAL,"gequal"),an(sc,on.EQUAL,"equal"),an(sc,on.NOTEQUAL,"notequal");cc={},an(cc,on.ZERO,"zero"),an(cc,on.KEEP,"keep"),an(cc,on.REPLACE,"replace"),an(cc,on.INVERT,"invert"),an(cc,on.INCR,"increment"),an(cc,on.DECR,"decrement"),an(cc,on.INCR_WRAP,"increment wrap"),an(cc,on.DECR_WRAP,"decrement wrap");pg={},an(pg,on.FRONT,"front"),an(pg,on.BACK,"back");var Qte=Function.prototype,ene=Qte.toString;ene.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class NN{constructor(){Ea(this,"lf");Ea(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new sJ(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:o.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:_}=b;_.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}Ea(NN,"pluginName","dagre");const tne=wr({name:"WorkFlow"}),nne=wr({...tne,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":c7,"./nodes/application-node/index.ts":m7,"./nodes/base-node/index.ts":B9,"./nodes/classification-node/index.ts":Z9,"./nodes/condition-node/index.ts":az,"./nodes/database-node/index.ts":gz,"./nodes/document-extract-node/index.ts":Oz,"./nodes/echarts-node/index.ts":Cz,"./nodes/form-node/index.ts":eH,"./nodes/function-lib-node/index.ts":pH,"./nodes/function-node/index.ts":kH,"./nodes/http-node/index.ts":UH,"./nodes/image-generate/index.ts":QH,"./nodes/image-understand/index.ts":cX,"./nodes/mcp-node/index.ts":SX,"./nodes/question-node/index.ts":jX,"./nodes/reply-node/index.ts":VX,"./nodes/reranker-node/index.ts":rq,"./nodes/search-dataset-node/index.ts":hq,"./nodes/speech-to-text-node/index.ts":Oq,"./nodes/start-node/index.ts":Mq,"./nodes/text-splice-node/index.ts":Vq,"./nodes/text-to-speech-node/index.ts":Zq,"./nodes/user-select-node/index.ts":aY,"./nodes/variable-aggregate-node/index.ts":fY,"./nodes/variable-assign-node/index.ts":bY}),o=l7(),r=pt(""),s=e,c={nodes:[...qI]};zr({get:()=>s.data?s.data:c,set:A=>A});const v=pt();uo(()=>{g()});const p=A=>{v.value.render(A)},g=A=>{const M=document.querySelector("#container");M&&(v.value=new qG({plugins:[NN],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:M}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),TY(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(I=>n[I].default),SY]),v.value.setDefaultEdgeType("app-edge"),v.value.render(A||{}),v.value.graphModel.eventCenter.on("delete_edge",I=>{I.forEach(D=>{v.value.deleteEdge(D)})}),v.value.graphModel.eventCenter.on("anchor:drop",I=>{I.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var I;(I=v.value)==null||I.fitView()},500))};return t({onmousedown:A=>{A.type&&v.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(A=>{var M;return(M=A==null?void 0:A.validate)==null?void 0:M.call(A)})),getGraphData:()=>v.value.getGraphData(),addNode:A=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:M,virtualRectCenterPositionY:I}=v.value.graphModel.getVirtualRectSize(),D=v.value.graphModel.addNode({type:A.type,properties:A.properties,x:M,y:I-v.value.graphModel.height/2});D.isSelected=!0,D.isHovered=!0,v.value.toFront(D.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:p}),(A,M)=>(Ie(),An(_o,null,[M[0]||(M[0]=le("div",{class:"workflow-app",id:"container"},null,-1)),v.value?(Ie(),dt(AY,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):jn("",!0),R(Kr(o),{"flow-id":r.value},null,8,["flow-id"])],64))}});const rne={class:"workflow-publish-history border-l"},one={class:"border-b p-16-24"},ine={class:"list-height pt-0"},ane={class:"p-8 pt-0"},lne={class:"flex-between"},une={style:{"max-width":"80%"}},sne={class:"text-center"},cne=wr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=BM(),{params:{id:o}}=n,r=t,s=pt(!1),c=pt([]),v=pt("");function p(A){v.value=A.id}function g(A){r("click",A)}function b(A){r("refreshVersion",A)}function _(A){A.writeStatus=!0}function E(A){A.writeStatus=!1}function x(A,M){if(A){const I={name:A};fa.putWorkFlowVersion(o,M.id,I,s).then(()=>{Hp(Zt("common.modifySuccess")),M.writeStatus=!1,P()})}else Ba(Zt("views.applicationWorkflow.tip.nameMessage"))}function P(){fa.getWorkFlowVersion(o,s).then(A=>{c.value=A.data})}return uo(()=>{P()}),(A,M)=>{const I=Z("ReadWrite"),D=Z("el-tag"),$=Z("UserFilled"),G=Z("el-icon"),W=Z("AppAvatar"),X=Z("el-text"),J=Z("MoreFilled"),z=Z("el-button"),L=Z("EditPen"),H=Z("el-dropdown-item"),K=Z("RefreshLeft"),Y=Z("el-dropdown-menu"),ce=Z("el-dropdown"),Ne=Z("common-list"),_e=Z("el-scrollbar"),Oe=Id("loading");return Ie(),An("div",rne,[le("h4",one,Ce(A.$t("views.applicationWorkflow.setting.releaseHistory")),1),le("div",ine,[R(_e,null,{default:j(()=>[le("div",ane,[Ua((Ie(),dt(Ne,{data:c.value,class:"mt-8",onClick:g,onMouseenter:p,onMouseleave:M[1]||(M[1]=ke=>v.value="")},{default:j(({row:ke,index:Re})=>[le("div",lne,[le("div",une,[le("h5",{class:jd([Re===0?"primary":"","flex"])},[R(I,{onChange:ue=>x(ue,ke),data:ke.name||Kr(q1)(ke.updateTime),trigger:"manual",write:ke.writeStatus,onClose:ue=>E(ke)},null,8,["onChange","data","write","onClose"]),Re===0?(Ie(),dt(D,{key:0,class:"default-tag ml-4"},{default:j(()=>[bt(Ce(A.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):jn("",!0)],2),R(X,{type:"info",class:"color-secondary flex mt-8"},{default:j(()=>[R(W,{size:20,class:"avatar-grey mr-4"},{default:j(()=>[R(G,null,{default:j(()=>[R($)]),_:1})]),_:1}),bt(" "+Ce(ke.publish_user_name),1)]),_:2},1024)]),Ua(le("div",{onClick:M[0]||(M[0]=pn(()=>{},["stop"]))},[R(ce,{trigger:"click",teleported:!1},{dropdown:j(()=>[R(Y,null,{default:j(()=>[R(H,{onClick:pn(ue=>_(ke),["stop"])},{default:j(()=>[R(G,null,{default:j(()=>[R(L)]),_:1}),bt(" "+Ce(A.$t("common.edit")),1)]),_:2},1032,["onClick"]),R(H,{onClick:ue=>b(ke)},{default:j(()=>[R(G,null,{default:j(()=>[R(K)]),_:1}),bt(" "+Ce(A.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:j(()=>[R(z,{text:""},{default:j(()=>[R(G,null,{default:j(()=>[R(J)]),_:1})]),_:1})]),_:2},1024)],512),[[Ev,v.value===ke.id]])])]),empty:j(()=>[le("div",sne,[R(X,{type:"info"},{default:j(()=>[bt(Ce(A.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Oe,s.value]])])]),_:1})])])}}});const fne=qy(cne,[["__scopeId","data-v-935cc16f"]]),vM=[qo.AiChat,qo.Reply,qo.FunctionLib,qo.FunctionLibCustom,qo.ImageUnderstandNode,qo.Application,qo.SpeechToTextNode,qo.TextToSpeechNode,qo.ImageGenerateNode,qo.McpNode,qo.Echarts];class yM{constructor(t){Ea(this,"nodes");Ea(this,"edges");Ea(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===qo.Start);if(t.length==0)throw Zt("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Zt("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===qo.Base);if(t.length==0)throw Zt("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Zt("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===qo.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===qo.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==qo.Start&&n.id!==qo.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Zt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(o.length==0&&!vM.includes(t.type))throw Zt("views.applicationWorkflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==qo.Base&&t.type!==qo.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Zt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${Zt("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===qo.Condition){const n=t.properties.nodeData.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${Zt("views.applicationWorkflow.validate.needConnect1")}${o.type}${Zt("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(o=>o.sourceNodeId==t.id).length==0&&!vM.includes(t.type))throw`${t.properties.nodeName} ${Zt("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${Zt("views.applicationWorkflow.validate.nodeUnavailable")}`}}const dne={class:"application-workflow"},pne={class:"header border-b flex-between p-12-24"},hne={class:"flex align-center"},vne={key:0},yne={key:0},mne={key:1},gne={class:"ml-4"},bne={class:"flex-between"},_ne={class:"flex align-center"},wne={class:"mr-12 ml-24 flex"},Ene=["src"],One={class:"mr-16"},xne={class:"scrollbar-height"},Ine=wr({__name:"index",setup(e){const{user:t,application:n}=yc(),o=YI(),r=BM(),s=zr(()=>t.isDefaultTheme()),{params:{id:c}}=r;let v;const p=pt(),g=pt(),b=pt(!1),_=pt(null),E=pt(!1),x=pt(!1),P=pt(!1),A=pt(""),M=pt(!1),I=pt(!1),D=pt(!1),$=pt({}),G=pt(null);function W(){JSON.stringify(G.value)!==JSON.stringify(Re())?Cw(Zt("common.tip"),Zt("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Zt("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Zt("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{ve(!0,!0)}).catch(ze=>{ze==="cancel"&&o.push({path:`/application/${c}/WORK_FLOW/overview`})}):o.push({path:`/application/${c}/WORK_FLOW/overview`})}function X(){D.value||(I.value=!1,D.value=!1)}function J(ze){ze&&L(ze),v1(`APPLICATION:MANAGE:${c}`,"AND")&&M.value&&Pe(),I.value=!1,D.value=!1}function z(ze){D.value=!0,$.value=ze,L(ze),Xe()}function L(ze){var Je;ze.workFlow.nodes.map(_t=>{_t.properties.noRender=!0}),_.value.workFlow=ze.workFlow,A.value=ze==null?void 0:ze.updateTime,(Je=p.value)==null||Je.clearGraphData(),X1(()=>{var _t;(_t=p.value)==null||_t.render(ze.workFlow)})}function H(){ue(),v1(`APPLICATION:MANAGE:${c}`,"AND")&&M.value&&Pe(),I.value=!1,D.value=!1}function K(){I.value=!0}function Y(ze){ze?Pe():Xe(),localStorage.setItem("workflowAutoSave",ze.toString())}function ce(ze){E.value=!1}function Ne(ze){E.value=!1}function _e(){E.value=!1}async function Oe(){var ze;(ze=p.value)==null||ze.validate().then(async()=>{const Je={workFlow:Re()};await n.asyncPutApplication(c,Je);const _t=new yM(Je.workFlow);try{_t.is_valid()}catch(kt){Ba(kt.toString());return}fa.putPublishApplication(c,Je,b).then(()=>{Hp(Zt("views.applicationWorkflow.tip.publicSuccess"))})}).catch(Je=>{var qt,Fe,ge,Ae;const _t=Je.node,kt=Je.errMessage;if(typeof kt=="string")Ba(((qt=Je.node.properties)==null?void 0:qt.nodeName)+` ${Zt("views.applicationWorkflow.node").toLowerCase()} `+kt.toLowerCase());else{const yt=Object.keys(kt);Ba(((Fe=_t.properties)==null?void 0:Fe.nodeName)+` ${Zt("views.applicationWorkflow.node").toLowerCase()} `+((Ae=(ge=kt[yt[0]])==null?void 0:ge[0])==null?void 0:Ae.message.toLowerCase()))}})}const ke=()=>{var ze;(ze=p.value)==null||ze.validate().then(()=>{var kt;const Je=Re(),_t=new yM(Je);try{_t.is_valid(),_.value={..._.value,type:"WORK_FLOW",...(kt=_t.get_base_node())==null?void 0:kt.properties.nodeData,workFlow:Re()},x.value=!0}catch(qt){Ba(qt.toString())}}).catch(Je=>{var qt,Fe,ge,Ae;const _t=Je.node,kt=Je.errMessage;if(typeof kt=="string")Ba(((qt=Je.node.properties)==null?void 0:qt.nodeName)+` ${Zt("views.applicationWorkflow.node")}，`+kt);else{const yt=Object.keys(kt);Ba(((Fe=_t.properties)==null?void 0:Fe.nodeName)+` ${Zt("views.applicationWorkflow.node")}，`+((Ae=(ge=kt[yt[0]])==null?void 0:ge[0])==null?void 0:Ae.message))}})};function Re(){var ze;return(ze=p.value)==null?void 0:ze.getGraphData()}function ue(){n.asyncGetApplicationDetail(c).then(ze=>{var Je,_t,kt;(Je=ze.data)==null||Je.workFlow.nodes.map(qt=>{qt.properties.noRender=!0}),_.value=ze.data,_.value.sttModelId=ze.data.sttModel,_.value.ttsModelId=ze.data.ttsModel,_.value.ttsType=ze.data.ttsType,A.value=(_t=ze.data)==null?void 0:_t.updateTime,(kt=p.value)==null||kt.clearGraphData(),X1(()=>{var qt;(qt=p.value)==null||qt.render(_.value.workFlow),G.value=Re()})})}function ve(ze,Je){const _t={workFlow:Re()};b.value=Je||!1,n.asyncPutApplication(c,_t).then(kt=>{A.value=new Date,ze&&(G.value=Re(),Hp(Zt("common.saveSuccess")),Je&&o.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{b.value=!1})}const Pe=()=>{v=setInterval(()=>{ve()},6e4)},Xe=()=>{v&&clearInterval(v)};return uo(()=>{ue();const ze=localStorage.getItem("workflowAutoSave");M.value=ze==="true",v1(`APPLICATION:MANAGE:${c}`,"AND")&&M.value&&Pe()}),KI(()=>{var ze;Xe(),(ze=p.value)==null||ze.clearGraphData()}),(ze,Je)=>{var Zn,re;const _t=Z("back-button"),kt=Z("el-text"),qt=Z("el-button"),Fe=Z("el-divider"),ge=Z("Close"),Ae=Z("el-icon"),yt=Z("AppIcon"),zt=Z("MoreFilled"),St=Z("el-dropdown-item"),rn=Z("el-switch"),mn=Z("el-dropdown-menu"),Mn=Z("el-dropdown"),hn=Z("el-collapse-transition"),ft=Z("AppAvatar"),xn=Z("AiChat"),Ve=Id("click-outside"),gn=Id("loading");return Ua((Ie(),An("div",dne,[le("div",pne,[le("div",hne,[R(_t,{onClick:W}),le("h4",null,Ce((Zn=_.value)==null?void 0:Zn.name),1),I.value&&D.value?(Ie(),An("div",vne,[R(kt,{type:"info",class:"ml-16 color-secondary"},{default:j(()=>[bt(Ce(ze.$t("views.applicationWorkflow.info.previewVersion"))+" "+Ce($.value.name||Kr(q1)($.value.updateTime)),1)]),_:1})])):A.value?(Ie(),dt(kt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:j(()=>[bt(Ce(ze.$t("views.applicationWorkflow.info.saveTime"))+Ce(Kr(q1)(A.value)),1)]),_:1})):jn("",!0)]),I.value&&D.value?(Ie(),An("div",yne,[R(qt,{type:"primary",class:"mr-8",onClick:Je[0]||(Je[0]=Bn=>J())},{default:j(()=>[bt(Ce(ze.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),R(Fe,{direction:"vertical"}),R(qt,{text:"",onClick:H},{default:j(()=>[R(Ae,null,{default:j(()=>[R(ge)]),_:1})]),_:1})])):(Ie(),An("div",mne,[R(qt,{icon:"Plus",onClick:Je[1]||(Je[1]=Bn=>E.value=!E.value)},{default:j(()=>[bt(Ce(ze.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),R(qt,{onClick:ke,disabled:x.value},{default:j(()=>[R(yt,{iconName:"app-play-outlined",class:"mr-4"}),bt(" "+Ce(ze.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),R(qt,{onClick:Je[2]||(Je[2]=Bn=>ve(!0))},{default:j(()=>[R(yt,{iconName:"app-save-outlined",class:"mr-4"}),bt(" "+Ce(ze.$t("common.save")),1)]),_:1}),R(qt,{type:"primary",onClick:Oe},{default:j(()=>[bt(Ce(ze.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),R(Mn,{trigger:"click"},{dropdown:j(()=>[R(mn,null,{default:j(()=>[R(St,{onClick:K},{default:j(()=>[R(yt,{iconName:"app-history-outlined"}),bt(" "+Ce(ze.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),R(St,null,{default:j(()=>[R(yt,{iconName:"app-save-outlined"}),bt(" "+Ce(ze.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),le("div",gne,[R(rn,{size:"small",modelValue:M.value,"onUpdate:modelValue":Je[4]||(Je[4]=Bn=>M.value=Bn),onChange:Y},null,8,["modelValue"])])]),_:1})]),_:1})]),default:j(()=>[R(qt,{text:"",onClick:Je[3]||(Je[3]=pn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:j(()=>[R(Ae,{class:"rotate-90"},{default:j(()=>[R(zt)]),_:1})]),_:1})]),_:1})]))]),R(hn,null,{default:j(()=>[Ua(R(mP,{show:E.value,id:Kr(c),onClickNodes:ce,onOnmousedown:Ne,workflowRef:p.value},null,8,["show","id","workflowRef"]),[[Ve,_e]])]),_:1}),le("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[_.value?(Ie(),dt(nne,{key:0,ref_key:"workflowRef",ref:p,data:(re=_.value)==null?void 0:re.workFlow},null,8,["data"])):jn("",!0)],512),R(hn,null,{default:j(()=>{var Bn,Sr,Ur,oo;return[x.value?(Ie(),An("div",{key:0,class:jd(["workflow-debug-container",P.value?"enlarge":""])},[le("div",{class:jd(["workflow-debug-header",s.value?"":"custom-header"])},[le("div",bne,[le("div",_ne,[le("div",wne,[Kr(ZI)((Bn=_.value)==null?void 0:Bn.icon)?(Ie(),dt(ft,{key:0,shape:"square",size:32,style:{background:"none"}},{default:j(()=>{var In;return[le("img",{src:(In=_.value)==null?void 0:In.icon,alt:""},null,8,Ene)]}),_:1})):(Sr=_.value)!=null&&Sr.name?(Ie(),dt(ft,{key:1,name:(Ur=_.value)==null?void 0:Ur.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):jn("",!0)]),le("h4",null,Ce(((oo=_.value)==null?void 0:oo.name)||ze.$t("views.application.applicationForm.form.appName.label")),1)]),le("div",One,[R(qt,{link:"",onClick:Je[5]||(Je[5]=In=>P.value=!P.value)},{default:j(()=>[R(yt,{iconName:P.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),R(qt,{link:"",onClick:Je[6]||(Je[6]=In=>x.value=!1)},{default:j(()=>[R(Ae,{size:20,class:"color-secondary"},{default:j(()=>[R(ge)]),_:1})]),_:1})])])],2),le("div",xne,[R(xn,{"application-details":_.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):jn("",!0)]}),_:1}),I.value?Ua((Ie(),dt(fne,{key:0,onClick:z,onRefreshVersion:J},null,512)),[[Ve,X]]):jn("",!0)])),[[gn,b.value]])}}});export{Ine as default};
