import{cp as M,cq as g,d6 as q,cZ as h,di as w,ep as B,cu as l,cx as n,cF as d,cA as p,cz as k,cy as P,cJ as R,cB as U,cE as I,er as S}from"./index-938a5085.js";const T={key:1,class:"lighter"},C=M({__name:"ParagraphForm",props:{data:{type:Object,default:()=>{}},isEdit:Boolean},setup(m,{expose:b}){const v=m,y=["bold","underline","italic","-","title","strikeThrough","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","=","pageFullscreen","preview","htmlPreview"],_=["markdownTotal",0,"=",1,"scrollSwitch"],V=g(),a=g({title:"",content:""}),x=q({content:[{required:!0,message:h("views.paragraph.form.content.requiredMessage1"),trigger:"blur"},{max:1e5,message:h("views.paragraph.form.content.requiredMessage2"),trigger:"blur"}]}),i=g();w(()=>v.data,e=>{e&&JSON.stringify(e)!=="{}"&&(a.value.title=e.title,a.value.content=e.content)},{immediate:!0}),w(()=>v.isEdit,e=>{var t;e||(t=i.value)==null||t.clearValidate()},{immediate:!0});function E(){if(i.value)return i.value.validate(e=>e)}const F=async(e,t)=>{const c=await Promise.all(e.map(r=>new Promise((u,f)=>{const s=new FormData;s.append("file",r),S.postImage(s).then(o=>{u(o)}).catch(o=>f(o))})));t(c.map(r=>r.data))};return B(()=>{a.value={title:"",content:""}}),b({validate:E,form:a}),(e,t)=>{const c=l("el-input"),r=l("el-form-item"),u=l("MdEditor"),f=l("MdPreview"),s=l("el-form");return n(),d(s,{ref_key:"paragraphFormRef",ref:i,model:a.value,"label-position":"top","require-asterisk-position":"right",rules:x,onSubmit:t[2]||(t[2]=I(()=>{},["prevent"]))},{default:p(()=>[k(r,{label:e.$t("views.paragraph.form.paragraphTitle.label")},{default:p(()=>[m.isEdit?(n(),d(c,{key:0,modelValue:a.value.title,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.title=o),placeholder:e.$t("views.paragraph.form.paragraphTitle.placeholder"),maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])):(n(),P("span",T,R(a.value.title||"-"),1))]),_:1},8,["label"]),k(r,{label:e.$t("views.paragraph.form.content.label"),prop:"content"},{default:p(()=>[m.isEdit?(n(),d(u,{key:0,modelValue:a.value.content,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.content=o),placeholder:e.$t("views.paragraph.form.content.placeholder"),maxLength:1e5,preview:!1,toolbars:y,style:{height:"300px"},onOnUploadImg:F,footers:_},{defFooters:p(()=>t[3]||(t[3]=[U("span",{style:{"margin-left":"-6px"}},"/ 100000",-1)])),_:1},8,["modelValue","placeholder"])):(n(),d(f,{key:1,ref_key:"editorRef",ref:V,editorId:"preview-only",modelValue:a.value.content,class:"maxkb-md"},null,8,["modelValue"]))]),_:1},8,["label"])]),_:1},8,["model","rules"])}}});export{C as _};
