import{ay as u,az as _,aZ as f,aB as n,aA as w,aR as h,aF as y,bE as C,cQ as k,c4 as q,co as x}from"./admin-BOU8h_tu.js";import{P as z,T as I,M as L,A as r,_ as B}from"./wecom.prod-DKW5jE45.js";const M={id:"wecom-qr",class:"wecom-qr flex"},T=u({__name:"wecomQrCode",props:{config:{}},setup(i){const l=_(),c=f(),{params:{accessToken:s}}=c,p=n({}),d=n({isWeComLogin:!1}),{chatUser:g}=w(),t=i;return(async()=>{await C();const o={corpId:t.config.corp_id,agentId:t.config.agent_id},a=localStorage.getItem("MaxKB-locale")||k()||"en-US",m=window.location.origin;try{p.value=z({el:"#wecom-qr",params:{login_type:B.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?r.zh:r.en,redirect_type:L.callback,panel_size:I.small},onCheckWeComLogin:d.value,async onLoginSuccess({code:e}){g.wecomCallback(e,s).then(()=>{setTimeout(()=>{l.push({name:"chat",params:{accessToken:s},query:c.query})})})},onLoginFail(e){q(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(y(),h("div",M))}}),E=x(T,[["__scopeId","data-v-78fde443"]]);export{E as default};
