import{ay as u,az as _,aP as f,aB as n,aA as w,aT as h,aF as y,bK as C,cP as k,c9 as q,cn as x}from"./admin-D1QwKL-A.js";import{P as z,T as I,M as L,A as r,_ as T}from"./wecom.prod-DKW5jE45.js";const B={id:"wecom-qr",class:"wecom-qr flex"},M=u({__name:"wecomQrCode",props:{config:{}},setup(i){const l=_(),c=f(),{params:{accessToken:s}}=c,p=n({}),d=n({isWeComLogin:!1}),{chatUser:g}=w(),t=i;return(async()=>{await C();const o={corpId:t.config.corp_id,agentId:t.config.agent_id},a=localStorage.getItem("MaxKB-locale")||k()||"en-US",m=window.location.origin;try{p.value=z({el:"#wecom-qr",params:{login_type:T.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?r.zh:r.en,redirect_type:L.callback,panel_size:I.small},onCheckWeComLogin:d.value,async onLoginSuccess({code:e}){g.wecomCallback(e,s).then(()=>{setTimeout(()=>{l.push({name:"chat",params:{accessToken:s},query:c.query})})})},onLoginFail(e){q(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(y(),h("div",B))}}),P=x(M,[["__scopeId","data-v-78fde443"]]);export{P as default};
