const T=typeof window<"u"?window:void 0,L=typeof document<"u"?document:void 0,h=typeof navigator<"u"?navigator:void 0,W=typeof location<"u"?location:void 0;function tt(){return(W==null?void 0:W.href)||""}const C=(h==null?void 0:h.userAgent)||"",et=(h==null?void 0:h.platform)||"";var F;(F=C==null?void 0:C.match(/wxwork\/([\d.]+)/i))==null||F[1];const{isIOS:Tt,isMac:Lt}=function(){const t=(h==null?void 0:h.maxTouchPoints)??1,e=/Mac/i.test(et);return e&&t>2?{isMac:!1,isIOS:!0}:{isMac:e,isIOS:/\b(iPhone|iPad|iPod)\b/i.test(C)}}(),nt={config:"preVerifyJsApi",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareWechat:"menu:share:wechat",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress",getBrandWCPayRequest:"getBrandWCPayRequest"};for(const t of Object.keys(nt));tt();function rt(t,e,n){if(ot(t))try{return t.call(n,e)}catch(r){(function(...a){console.error("[wwsdk]",...a)})(r)}}function ot(t){return typeof t=="function"}let Q=!!(T!=null&&T.WeixinJSBridge);Promise.resolve();Q||new Promise(t=>{L==null||L.addEventListener("WeixinJSBridgeReady",()=>{Q=!0,t()})});function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(function(t){return t.CLProximityUnknown="0",t.CLProximityImmediate="1",t.CLProximityNear="2",t.CLProximityFar="3",t})({});(function(t){return t.wgs84="wgs84",t.gcj02="gcj02",t})({});(function(t){return t.wifi="wifi",t.network2g="2g",t.network3g="3g",t.network4g="4g",t.none="none",t.unknown="unknown",t})({});(function(t){return t.video="video",t.image="image",t.file="file",t.video_and_image="video_and_image",t})({});(function(t){return t.video="video",t.image="image",t.file="file",t})({});(function(t){return t.original="original",t.compressed="compressed",t})({});(function(t){return t.album="album",t.camera="camera",t})({});(function(t){return t.normal="normal",t.batch="batch",t.front="front",t.batch_front="batch_front",t})({});(function(t){return t[t.common=0]="common",t[t.corp_training=1]="corp_training",t[t.edu_normal_class=2]="edu_normal_class",t[t.edu_small_class=3]="edu_small_class",t})({});(function(t){return t[t.other=0]="other",t[t.doc=3]="doc",t[t.sheet=4]="sheet",t[t.form=5]="form",t[t.slide=6]="slide",t[t.mindmap=7]="mindmap",t[t.flowchart=8]="flowchart",t[t.smartsheet=10]="smartsheet",t})({});(function(t){return t[t.normal=0]="normal",t[t.scan=1]="scan",t})({});(function(t){return t[t.chat=0]="chat",t[t.qrcode=1]="qrcode",t})({});(function(t){return t.contact_profile="contact_profile",t.single_chat_tools="single_chat_tools",t.group_chat_tools="group_chat_tools",t.chat_attachment="chat_attachment",t.single_kf_tools="single_kf_tools",t.chain_single_chat_tools="chain_single_chat_tools",t.chain_group_chat_tools="chain_group_chat_tools",t.internal_group_chat_board="internal_group_chat_board",t.normal="normal",t})({});(function(t){return t.permission="permission",t.datazone_permission="datazone_permission",t})({});(function(t){return t.release="release",t.trial="trial",t.develop="develop",t})({});(function(t){return t[t.internal=1]="internal",t[t.external=2]="external",t})({});(function(t){return t[t.mediaid=1]="mediaid",t[t.url=2]="url",t[t.localId=4]="localId",t})({});(function(t){return t.None="None",t.HWOpenTalk="HWOpenTalk",t.VoIP="VoIP",t.SystemCall="SystemCall",t})({});(function(t){return t.qrCode="qrCode",t.barCode="barCode",t})({});(function(t){return t.single="single",t.multi="multi",t})({});(function(t){return t.department="department",t.user="user",t})({});(function(t){return t.single="single",t.multi="multi",t})({});(function(t){return t.department="department",t.user="user",t})({});(function(t){return t[t.all=0]="all",t[t.unselected=1]="unselected",t})({});(function(t){return t.single="single",t.multi="multi",t})({});(function(t){return t.create_approval="10001",t.view_approval="10002",t})({});(function(t){return t.link="link",t.text="text",t})({});function it(t){const e=document.createElement("iframe"),{style:n}=e;n.display="block",n.border="none",n.background="transparent",e.referrerPolicy="origin",e.setAttribute("frameborder","0"),e.setAttribute("allowtransparency","true");const r=function(a){return typeof a=="string"?document.querySelector(a):a}(t);return r&&r.appendChild(e),e}const at=lt();let st=0;function ct(){return`${at}-${st++}`}function lt(){return Math.random().toString(36).slice(2)}function ut(t){return t&&typeof t=="object"?{...t,message:t.message,stack:t.stack}:t}function U(t){try{return typeof t=="string"?JSON.parse(t):t}catch{}}function dt(t,e,n){const r=[];let a=!1,d=!1;function f(o){if(o.origin!==e||t.contentWindow!==o.source)return;const i=U(o.data);typeof(i==null?void 0:i.type)=="string"&&i.type.startsWith("ww-iframe-handle:")&&m(i,o)}window.addEventListener("message",f);const p=new MessageChannel;p.port1.onmessage=o=>{m(U(o.data),o)};const{invoke:y,handleCallMessage:b,handleResponseMessage:c}=function(o,i){const g=new Map;return{invoke:function(s,l){return l!=null&&l.dropResult?(o({type:"ww-iframe-handle:call",args:s},l),Promise.resolve(void 0)):new Promise((k,Y)=>{const V=ct();g.set(V,{resolve:k,reject:Y}),o({type:"ww-iframe-handle:call",uid:V,args:s},l)})},handleCallMessage:async function(s,l){if(!s.uid)return i(s.args,l);try{o({type:"ww-iframe-handle:response",uid:s.uid,kind:"resolve",args:await i(s.args,l)})}catch(k){throw o({type:"ww-iframe-handle:response",uid:s.uid,kind:"reject",args:ut(k)}),k}},handleResponseMessage:function(s){const l=g.get(s.uid);l&&(l[s.kind](s.args),g.delete(s.uid))}}}(function(o,i){a?v(o,i):r.push({msg:o,opts:i})},n);function m(o,i){switch(o.type){case"ww-iframe-handle:ready":return function(g){if(!a){a=!0,g.supportChannel&&(v({type:"ww-iframe-handle:set-port",port:p.port2},{transfer:[p.port2],serialize:!1}),d=!0);for(const s of r)v(s.msg,s.opts)}}(o);case"ww-iframe-handle:call":return b(o,i);case"ww-iframe-handle:response":return void c(o)}}function v(o,i){var s;const g=(i==null?void 0:i.serialize)===!1?o:JSON.stringify(o);d?p.port1.postMessage(g,i==null?void 0:i.transfer):(s=t.contentWindow)==null||s.postMessage(g,e,i==null?void 0:i.transfer)}return t.addEventListener("load",()=>{a||v({type:"ww-iframe-handle:init"})}),{el:t,invoke:y,dispose:function(){window.removeEventListener("message",f),p.port1.onmessage=null}}}function ft(t,e,n){rt(e[t.name],t.payload||t.data,n)}for(var Wt={},ht="await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),pt={},A=0,G=ht;A<G.length;A++)pt[G[A]]=!0;const mt="2.3.3";var At=function(t){return t.serviceApp="ServiceApp",t.corpApp="CorpApp",t}({}),Rt=function(t){return t.zh="zh",t.en="en",t}({}),gt=function(t){return t.top="top",t.callback="callback",t.self="self",t}({}),P=function(t){return t.middle="middle",t.small="small",t}({});(function(t){return t.Light="light",t.Dark="dark",t.Auto="auto",t})({});const H={[P.middle]:["480px","416px"],[P.small]:["320px","380px"]};function Ot(t){var p,y,b;const{width:e,height:n}=function(c=P.middle){const m=H[c]||H[P.middle];return{width:m[0],height:m[1]}}((p=t.params)==null?void 0:p.panel_size),r=it(t.el);r.setAttribute("allow","local-network-access"),((y=t.params)==null?void 0:y.redirect_type)===gt.top&&function(){var m;let c;try{c=R(((m=window.top)==null?void 0:m.origin)??"")}catch{c=R(document.referrer)}return c}()!==R((b=t.params)==null?void 0:b.redirect_uri)&&r.setAttribute("sandbox","allow-top-navigation allow-scripts allow-same-origin");const{style:a}=r;a.width=e,a.height=n;const{dispose:d}=dt(r,"https://login.work.weixin.qq.com",c=>{if(c.type==="call")return ft(c,t);throw new Error(`Unknown message type '${c.type}'`)}),f=new URL("https://login.work.weixin.qq.com/wwlogin/sso/login");for(const c of Object.keys(t.params||{}))f.searchParams.set(c,t.params[c]);return f.searchParams.set("version",mt),r.src=f.href,{el:r,unmount(){var c;d(),(c=r.parentNode)==null||c.removeChild(r)}}}function R(t=""){var e;try{return(e=new URL(t))==null?void 0:e.origin}catch{return""}}function X(t){return typeof Symbol=="function"?Symbol(t):t}const N=X("__WECOM_REFLECT_ID__");function Z(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function S(t,e){return function(n,r){return r.get?r.get.call(n):r.value}(t,Z(t,e,"get"))}function M(t,e,n){(function(r,a){if(a.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function x(t,e,n){return function(r,a,d){if(a.set)a.set.call(r,d);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=d}}(t,Z(t,e,"set"),n),n}const j=new WeakMap,z=new WeakMap;function D(t,e){j.set(t,e),z.set(e,t)}function $(t){return j.has(t)?j.get(t):t}function K(t){return z.has(t)?z.get(t):t}var O=new WeakMap,E=new WeakMap;let wt=N;var I=new WeakMap,q=new WeakMap;let vt=N;class B{addColorStop(e,n){S(this,q).addColorStop(e,n),S(this,I).call(this,"addColorStop",[e,n])}constructor(e,n){_(this,vt,void 0),M(this,I,{writable:!0,value:void 0}),M(this,q,{writable:!0,value:void 0}),x(this,I,e),x(this,q,n),e.bind(this),D(this,n)}}const _t=["fillStyle","filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle"],yt=["direction","font","fontKerning","fontStretch","fontVariantCaps","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","textAlign","textBaseline","textRendering","wordSpacing"],bt=["arc","arcTo","beginPath","bezierCurveTo","clip","closePath","ellipse","lineTo","moveTo","quadraticCurveTo","rect","reset","resetTransform","restore","rotate","roundRect","save","scale","setLineDash","setTransform","transform","translate"],kt=["clearRect","drawFocusIfNeeded","drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Ct=["getContextAttributes","getLineDash","getTransform","isContextLost","isPointInPath","isPointInStroke","measureText"],Pt=[["createConicGradient",B],["createLinearGradient",B],["createPattern",class{setTransform(t){S(this,E).setTransform(t),S(this,O).call(this,"setTransform",[t])}constructor(t,e){_(this,wt,void 0),M(this,O,{writable:!0,value:void 0}),M(this,E,{writable:!0,value:void 0}),x(this,O,t),x(this,E,e),t.bind(this),D(this,e)}}],["createRadialGradient",B]],u=X("__WECOM_INTERNAL__");let St=u,Mt=N;class xt{constructor(e,n,r){_(this,"canvas",void 0),_(this,St,void 0),_(this,Mt,void 0),this.canvas=e,this[u]={store:n,native:r,props:Object.create(null)},n.bind(this),D(this,r)}}const w=xt.prototype;for(const t of _t)Object.defineProperty(w,t,{configurable:!0,enumerable:!0,get(){const{native:e,props:n}=this[u];return n[t]??K(e[t])},set(e){const{store:n,props:r}=this[u];r[t]=$(e),n.set(this,t,e)}});for(const t of yt)Object.defineProperty(w,t,{configurable:!0,enumerable:!0,get(){return K(this[u].native[t])},set(e){const{store:n,native:r}=this[u];r[t]=$(e),n.set(this,t,e)}});for(const t of Ct)w[t]=function(...e){const{native:n}=this[u];return J(n,t,e)};for(const t of bt)w[t]=function(...e){const{store:n,native:r}=this[u];J(r,t,e),n.call(this,t,e)};for(const t of kt)w[t]=function(...e){const{store:n}=this[u];n.call(this,t,e)};for(const[t,e]of Pt)w[t]=function(...n){const{store:r,native:a}=this[u],d=J(a,t,n),f=new e(r,d);return r.call(this,t,n,f),f};function J(t,e,n){switch(n.length){case 1:return t[e](n[0]);case 2:return t[e](n[0],n[1]);case 3:return t[e](n[0],n[1],n[2]);case 4:return t[e](n[0],n[1],n[2],n[3]);case 5:return t[e](n[0],n[1],n[2],n[3],n[4]);case 6:return t[e](n[0],n[1],n[2],n[3],n[4],n[5]);default:return t[e](...n)}}export{Rt as A,gt as M,Ot as P,P as T,At as _};
