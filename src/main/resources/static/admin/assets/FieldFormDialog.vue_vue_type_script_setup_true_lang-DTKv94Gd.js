import{ay as D,aB as u,aX as E,aC as T,aR as P,aD as s,aE as z,aF as b,aG as n,aH as t,aT as G,aY as H,aZ as I,a_ as V,aI as J,aK as _,aJ as g,a$ as K}from"./admin-Cb1J-0y0.js";const L={class:"dialog-footer"},S=D({__name:"FieldFormDialog",emits:["refresh"],setup(M,{expose:y,emit:$}){const d=["string","int","dict","array","float"],w=$,f=u(),k=u(!1),m=u(!1),o=u({name:"",type:d[0],source:"reference",isRequired:!0}),q=E({name:[{required:!0,message:T("views.tool.form.paramName.placeholder"),trigger:"blur"}]}),r=u(!1);P(r,e=>{e||(o.value={name:"",type:d[0],source:"reference",isRequired:!0},m.value=!1)});const C=e=>{e&&(o.value=K.cloneDeep(e),m.value=!0),r.value=!0},R=async e=>{e&&await e.validate(l=>{l&&(w("refresh",o.value),r.value=!1)})};return y({open:C}),(e,l)=>{const B=s("el-input"),i=s("el-form-item"),p=s("el-option"),v=s("el-select"),F=s("el-switch"),N=s("el-form"),c=s("el-button"),U=s("el-dialog");return b(),z(U,{title:m.value?e.$t("common.param.editParam"):e.$t("common.param.addParam"),modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=a=>r.value=a),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":""},{footer:n(()=>[J("span",L,[t(c,{onClick:l[6]||(l[6]=V(a=>r.value=!1,["prevent"]))},{default:n(()=>[_(g(e.$t("common.cancel")),1)]),_:1}),t(c,{type:"primary",onClick:l[7]||(l[7]=a=>R(f.value)),loading:k.value},{default:n(()=>[_(g(m.value?e.$t("common.save"):e.$t("common.add")),1)]),_:1},8,["loading"])])]),default:n(()=>[t(N,{"label-position":"top",ref_key:"fieldFormRef",ref:f,rules:q,model:o.value,"require-asterisk-position":"right"},{default:n(()=>[t(i,{label:e.$t("views.tool.form.paramName.label"),prop:"name"},{default:n(()=>[t(B,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>o.value.name=a),placeholder:e.$t("views.tool.form.paramName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:l[1]||(l[1]=a=>o.value.name=o.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(i,{label:e.$t("views.tool.form.dataType.label")},{default:n(()=>[t(v,{modelValue:o.value.type,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.type=a)},{default:n(()=>[(b(),G(H,null,I(d,a=>t(p,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(i,{label:e.$t("views.tool.form.source.label")},{default:n(()=>[t(v,{modelValue:o.value.source,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value.source=a)},{default:n(()=>[t(p,{label:e.$t("views.tool.form.source.reference"),value:"reference"},null,8,["label"]),t(p,{label:e.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(i,{label:e.$t("views.tool.form.required.label"),onClick:l[5]||(l[5]=V(()=>{},["prevent"]))},{default:n(()=>[t(F,{size:"small",modelValue:o.value.isRequired,"onUpdate:modelValue":l[4]||(l[4]=a=>o.value.isRequired=a)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}});export{S as _};
