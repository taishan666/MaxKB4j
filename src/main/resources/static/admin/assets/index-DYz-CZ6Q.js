var XD=Object.defineProperty;var qD=(e,t,n)=>t in e?XD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ma=(e,t,n)=>qD(e,typeof t!="symbol"?t+"":t,n);import{aY as Mv,aZ as Es,a_ as Br,a$ as IS,b0 as ih,b1 as Zm,b2 as Gd,b3 as ah,b4 as IT,b5 as Ru,b6 as Iu,af as Oi,b7 as YD,b8 as mc,b9 as Kw,ba as KD,bb as Jm,bc as Cu,bd as Qm,be as ZD,bf as Iv,bg as lb,aE as Ts,bh as JD,bi as lh,bj as LT,bk as uh,bl as qd,z as Zw,bm as ro,bn as ub,bo as ey,bp as Os,bq as Lo,br as Nf,bs as yc,bt as Lv,bu as ty,bv as Ms,bw as Na,bx as Qr,by as sb,bz as QD,bA as FT,bB as Cf,bC as $T,bD as UT,bE as pw,bF as ia,ag as Ss,bG as ej,bH as tj,bI as cb,bJ as BT,bK as sh,bL as VT,ab as Jw,bM as Fv,A as $v,bN as Bm,bO as ny,ae as WT,bP as GT,bQ as nj,bR as kv,bS as rj,bT as zT,bU as HT,bV as XT,bW as oj,bX as ij,bY as aj,bZ as lj,b_ as uj,b$ as sj,c0 as cj,c1 as Rg,c2 as fj,c3 as dj,c4 as qT,c5 as YT,c6 as KT,c7 as ZT,c8 as Qw,c9 as pj,ca as ry,cb as JT,cc as hj,cd as QT,ce as eM,cf as vj,cg as mj,ch as yj,ci as Jp,ad as gj,cj as bj,ck as _j,aF as wj,cl as Ej,cm as Oj,cn as Sj,co as xj,cp as Aj,cq as Tj,cr as Mj,aa as kj,ah as Pj,cs as Nj,aG as Rj,ct as Cj,cu as Dj,cv as jj,cw as Ij,cx as Lj,cy as Fj,a9 as $j,ai as Uj,cz as Bj,p as Vj,cA as Wj,cB as Gj,cC as zj,cD as Hj,aJ as rr,cE as Ge,cF as fb,aS as J,aL as en,aM as Oe,cG as Or,aX as k,aN as ee,aT as at,cH as io,cI as C,aU as kn,aV as sr,cJ as hw,cK as Zp,cL as LS,aO as _e,cM as eE,cN as ct,cO as nn,cP as Yd,cQ as Lu,aP as aa,aQ as tE,cR as Xj,aR as Zn,cS as tM,cT as Hr,cU as za,cV as qj,cW as Qp,cX as Vm,cY as Wm,cZ as FS,c_ as So,c$ as Ne,d0 as eh,aW as fc,d1 as Yj,d2 as vw,d3 as mi,d4 as Ot,d5 as nE,d6 as ei,d7 as th,d8 as yo,d9 as pc,da as ws,Q as Kj,db as ch,dc as Pv,dd as Zj,de as Jj,df as nM,dg as rM,dh as Qj,di as eI,dj as tI,dk as nI,dl as rI,dm as oI,dn as rE,dp as iI,dq as aI,dr as Nv,ds as lI,dt as zd,du as fl,dv as uI,dw as $S,dx as sI,dy as cI,dz as fI,dA as dI,dB as oE,dC as iE,dD as pI,dE as mw,aK as hI,dF as US,dG as vI,dH as Tf,dI as Pl,dJ as gs,dK as Wa,dL as $d,dM as mI}from"./admin-DcRor5Hd.js";import{g as yI,t as BS,a as VS,i as gc,n as gI,c as bI,b as _I}from"./data-DnMhVsO3.js";import{_ as Uv,a as wI,b as EI,c as oM,d as iM,e as OI}from"./ToolDialog.vue_vue_type_style_index_0_lang-BiV_7Hwu.js";import{b as aM,c as fh,v as Bv,d as SI,e as xI,g as lM,a as AI,f as TI,r as MI,h as kI}from"./reduce-Vyy-ds-W.js";import{h as PI,i as uM,j as NI,k as RI,l as CI,n as DI,o as jI,p as II,z as LI,q as FI,s as $I,f as UI,a as BI,m as VI,b as WI,d as GI,c as zI,e as HI,g as XI,r as qI,u as YI}from"./zipObject-BgoRtq0a.js";import{l as KI,_ as ZI}from"./vue-draggable-plus-BdTyWtAN.js";import{_ as JI}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-CmALPf56.js";import{_ as cn}from"./defineProperty-DbXIQDXj.js";import"./typeof-QjJsDpFa.js";var QI=NaN;function WS(e){return typeof e=="number"?e:Mv(e)?QI:+e}function db(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=Es(n),a=Es(a)):(n=WS(n),a=WS(a)),r=e(n,a)}return r}}var e8=db(function(e,t){return e+t},0),t8="Expected a function";function n8(e,t){if(typeof t!="function")throw new TypeError(t8);return e=Br(e),function(){if(--e<1)return t.apply(this,arguments)}}var Cg=IS&&new IS,sM=Cg?function(e,t){return Cg.set(e,t),e}:ih;function Gm(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Zm(e.prototype),a=e.apply(n,t);return Gd(a)?a:n}}var r8=1;function o8(e,t,n){var a=t&r8,r=Gm(e);function u(){var c=this&&this!==ah&&this instanceof u?r:e;return c.apply(a?n:this,arguments)}return u}var i8=Math.max;function cM(e,t,n,a){for(var r=-1,u=e.length,c=n.length,v=-1,f=t.length,g=i8(u-c,0),b=Array(f+g),_=!a;++v<f;)b[v]=t[v];for(;++r<c;)(_||r<u)&&(b[n[r]]=e[r]);for(;g--;)b[v++]=e[r++];return b}var a8=Math.max;function fM(e,t,n,a){for(var r=-1,u=e.length,c=-1,v=n.length,f=-1,g=t.length,b=a8(u-v,0),_=Array(b+g),x=!a;++r<b;)_[r]=e[r];for(var A=r;++f<g;)_[A+f]=t[f];for(;++c<v;)(x||r<u)&&(_[A+n[c]]=e[r++]);return _}function l8(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function pb(){}var u8=4294967295;function Jr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=u8,this.__views__=[]}Jr.prototype=Zm(pb.prototype);Jr.prototype.constructor=Jr;var aE=Cg?function(e){return Cg.get(e)}:IT,_v={},s8=Object.prototype,c8=s8.hasOwnProperty;function bg(e){for(var t=e.name+"",n=_v[t],a=c8.call(_v,t)?n.length:0;a--;){var r=n[a],u=r.func;if(u==null||u==e)return r.name}return t}function Du(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Du.prototype=Zm(pb.prototype);Du.prototype.constructor=Du;function dM(e){if(e instanceof Jr)return e.clone();var t=new Du(e.__wrapped__,e.__chain__);return t.__actions__=Ru(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var f8=Object.prototype,d8=f8.hasOwnProperty;function ce(e){if(Iu(e)&&!Oi(e)&&!(e instanceof Jr)){if(e instanceof Du)return e;if(d8.call(e,"__wrapped__"))return dM(e)}return new Du(e)}ce.prototype=pb.prototype;ce.prototype.constructor=ce;function yw(e){var t=bg(e),n=ce[t];if(typeof n!="function"||!(t in Jr.prototype))return!1;if(e===n)return!0;var a=aE(n);return!!a&&e===a[0]}var pM=YD(sM),p8=/\{\n\/\* \[wrapped with (.+)\] \*/,h8=/,? & /;function v8(e){var t=e.match(p8);return t?t[1].split(h8):[]}var m8=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function y8(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(m8,`{
/* [wrapped with `+t+`] */
`)}var g8=1,b8=2,_8=8,w8=16,E8=32,O8=64,S8=128,x8=256,A8=512,T8=[["ary",S8],["bind",g8],["bindKey",b8],["curry",_8],["curryRight",w8],["flip",A8],["partial",E8],["partialRight",O8],["rearg",x8]];function M8(e,t){return mc(T8,function(n){var a="_."+n[0];t&n[1]&&!Kw(e,a)&&e.push(a)}),e.sort()}function hM(e,t,n){var a=t+"";return KD(e,y8(a,M8(v8(a),n)))}var k8=4,P8=8,GS=32,zS=64;function vM(e,t,n,a,r,u,c,v,f,g){var b=t&P8,_=b?c:void 0,x=b?void 0:c,A=b?u:void 0,M=b?void 0:u;t|=b?GS:zS,t&=~(b?zS:GS),t&k8||(t&=-4);var S=[e,t,r,A,_,M,x,v,f,g],E=n.apply(void 0,S);return yw(e)&&pM(E,S),E.placeholder=a,hM(E,e,t)}function Vv(e){var t=e;return t.placeholder}var N8=Math.min;function R8(e,t){for(var n=e.length,a=N8(t.length,n),r=Ru(e);a--;){var u=t[a];e[a]=Jm(u,n)?r[u]:void 0}return e}var HS="__lodash_placeholder__";function Hd(e,t){for(var n=-1,a=e.length,r=0,u=[];++n<a;){var c=e[n];(c===t||c===HS)&&(e[n]=HS,u[r++]=n)}return u}var C8=1,D8=2,j8=8,I8=16,L8=128,F8=512;function hb(e,t,n,a,r,u,c,v,f,g){var b=t&L8,_=t&C8,x=t&D8,A=t&(j8|I8),M=t&F8,S=x?void 0:Gm(e);function E(){for(var D=arguments.length,I=Array(D),B=D;B--;)I[B]=arguments[B];if(A)var $=Vv(E),j=l8(I,$);if(a&&(I=cM(I,a,r,A)),u&&(I=fM(I,u,c,A)),D-=j,A&&D<g){var U=Hd(I,$);return vM(e,t,hb,E.placeholder,n,I,U,v,f,g-D)}var K=_?n:this,Q=x?K[e]:e;return D=I.length,v?I=R8(I,v):M&&D>1&&I.reverse(),b&&f<D&&(I.length=f),this&&this!==ah&&this instanceof E&&(Q=S||Gm(Q)),Q.apply(K,I)}return E}function $8(e,t,n){var a=Gm(e);function r(){for(var u=arguments.length,c=Array(u),v=u,f=Vv(r);v--;)c[v]=arguments[v];var g=u<3&&c[0]!==f&&c[u-1]!==f?[]:Hd(c,f);if(u-=g.length,u<n)return vM(e,t,hb,r.placeholder,void 0,c,g,void 0,void 0,n-u);var b=this&&this!==ah&&this instanceof r?a:e;return Cu(b,this,c)}return r}var U8=1;function B8(e,t,n,a){var r=t&U8,u=Gm(e);function c(){for(var v=-1,f=arguments.length,g=-1,b=a.length,_=Array(b+f),x=this&&this!==ah&&this instanceof c?u:e;++g<b;)_[g]=a[g];for(;f--;)_[g++]=arguments[++v];return Cu(x,r?n:this,_)}return c}var XS="__lodash_placeholder__",O1=1,V8=2,W8=4,qS=8,wm=128,YS=256,G8=Math.min;function z8(e,t){var n=e[1],a=t[1],r=n|a,u=r<(O1|V8|wm),c=a==wm&&n==qS||a==wm&&n==YS&&e[7].length<=t[8]||a==(wm|YS)&&t[7].length<=t[8]&&n==qS;if(!(u||c))return e;a&O1&&(e[2]=t[2],r|=n&O1?0:W8);var v=t[3];if(v){var f=e[3];e[3]=f?cM(f,v,t[4]):v,e[4]=f?Hd(e[3],XS):t[4]}return v=t[5],v&&(f=e[5],e[5]=f?fM(f,v,t[6]):v,e[6]=f?Hd(e[5],XS):t[6]),v=t[7],v&&(e[7]=v),a&wm&&(e[8]=e[8]==null?t[8]:G8(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var H8="Expected a function",KS=1,X8=2,ZS=8,JS=16,QS=32,q8=64,ex=Math.max;function If(e,t,n,a,r,u,c,v){var f=t&X8;if(!f&&typeof e!="function")throw new TypeError(H8);var g=a?a.length:0;if(g||(t&=-97,a=r=void 0),c=c===void 0?c:ex(Br(c),0),v=v===void 0?v:Br(v),g-=r?r.length:0,t&q8){var b=a,_=r;a=r=void 0}var x=f?void 0:aE(e),A=[e,t,n,a,r,b,_,u,c,v];if(x&&z8(A,x),e=A[0],t=A[1],n=A[2],a=A[3],r=A[4],v=A[9]=A[9]===void 0?f?0:e.length:ex(A[9]-g,0),!v&&t&(ZS|JS)&&(t&=-25),!t||t==KS)var M=o8(e,t,n);else t==ZS||t==JS?M=$8(e,t,v):(t==QS||t==(KS|QS))&&!r.length?M=B8(e,t,n,a):M=hb.apply(void 0,A);var S=x?sM:pM;return hM(S(M,A),e,t)}var Y8=128;function mM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,If(e,Y8,void 0,void 0,void 0,void 0,t)}var K8=Object.prototype,Z8=K8.hasOwnProperty,J8=Qm(function(e,t){if(ZD(t)||Iv(t)){lb(t,Ts(t),e);return}for(var n in t)Z8.call(t,n)&&JD(e,n,t[n])}),Q8=Qm(function(e,t){lb(t,lh(t),e)}),gw=Qm(function(e,t,n,a){lb(t,lh(t),e,a)}),eL=Qm(function(e,t,n,a){lb(t,Ts(t),e,a)});function lE(e,t){for(var n=-1,a=t.length,r=Array(a),u=e==null;++n<a;)r[n]=u?void 0:LT(e,t[n]);return r}var tL=uh(lE),nL="[object DOMException]",rL="[object Error]";function uE(e){if(!Iu(e))return!1;var t=qd(e);return t==rL||t==nL||typeof e.message=="string"&&typeof e.name=="string"&&!Zw(e)}var yM=ro(function(e,t){try{return Cu(e,void 0,t)}catch(n){return uE(n)?n:new Error(n)}}),oL="Expected a function";function gM(e,t){var n;if(typeof t!="function")throw new TypeError(oL);return e=Br(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var iL=1,aL=32,vb=ro(function(e,t,n){var a=iL;if(n.length){var r=Hd(n,Vv(vb));a|=aL}return If(e,a,t,n,r)});vb.placeholder={};var lL=uh(function(e,t){return mc(t,function(n){n=ub(n),ey(e,n,vb(e[n],e))}),e}),uL=1,sL=2,cL=32,sE=ro(function(e,t,n){var a=uL|sL;if(n.length){var r=Hd(n,Vv(sE));a|=cL}return If(t,a,e,n,r)});sE.placeholder={};function Kd(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:Os(e,t,n)}var fL="\\ud800-\\udfff",dL="\\u0300-\\u036f",pL="\\ufe20-\\ufe2f",hL="\\u20d0-\\u20ff",vL=dL+pL+hL,mL="\\ufe0e\\ufe0f",yL="\\u200d",gL=RegExp("["+yL+fL+vL+mL+"]");function Wv(e){return gL.test(e)}function bL(e){return e.split("")}var bM="\\ud800-\\udfff",_L="\\u0300-\\u036f",wL="\\ufe20-\\ufe2f",EL="\\u20d0-\\u20ff",OL=_L+wL+EL,SL="\\ufe0e\\ufe0f",xL="["+bM+"]",bw="["+OL+"]",_w="\\ud83c[\\udffb-\\udfff]",AL="(?:"+bw+"|"+_w+")",_M="[^"+bM+"]",wM="(?:\\ud83c[\\udde6-\\uddff]){2}",EM="[\\ud800-\\udbff][\\udc00-\\udfff]",TL="\\u200d",OM=AL+"?",SM="["+SL+"]?",ML="(?:"+TL+"(?:"+[_M,wM,EM].join("|")+")"+SM+OM+")*",kL=SM+OM+ML,PL="(?:"+[_M+bw+"?",bw,wM,EM,xL].join("|")+")",NL=RegExp(_w+"(?="+_w+")|"+PL+kL,"g");function RL(e){return e.match(NL)||[]}function xs(e){return Wv(e)?RL(e):bL(e)}function xM(e){return function(t){t=Lo(t);var n=Wv(t)?xs(t):void 0,a=n?n[0]:t.charAt(0),r=n?Kd(n,1).join(""):t.slice(1);return a[e]()+r}}var cE=xM("toUpperCase");function AM(e){return cE(Lo(e).toLowerCase())}function fE(e){return function(t){return e==null?void 0:e[t]}}var CL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},DL=fE(CL),jL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,IL="\\u0300-\\u036f",LL="\\ufe20-\\ufe2f",FL="\\u20d0-\\u20ff",$L=IL+LL+FL,UL="["+$L+"]",BL=RegExp(UL,"g");function TM(e){return e=Lo(e),e&&e.replace(jL,DL).replace(BL,"")}var VL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function WL(e){return e.match(VL)||[]}var GL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function zL(e){return GL.test(e)}var MM="\\ud800-\\udfff",HL="\\u0300-\\u036f",XL="\\ufe20-\\ufe2f",qL="\\u20d0-\\u20ff",YL=HL+XL+qL,kM="\\u2700-\\u27bf",PM="a-z\\xdf-\\xf6\\xf8-\\xff",KL="\\xac\\xb1\\xd7\\xf7",ZL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",JL="\\u2000-\\u206f",QL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",NM="A-Z\\xc0-\\xd6\\xd8-\\xde",e4="\\ufe0e\\ufe0f",RM=KL+ZL+JL+QL,CM="['’]",tx="["+RM+"]",t4="["+YL+"]",DM="\\d+",n4="["+kM+"]",jM="["+PM+"]",IM="[^"+MM+RM+DM+kM+PM+NM+"]",r4="\\ud83c[\\udffb-\\udfff]",o4="(?:"+t4+"|"+r4+")",i4="[^"+MM+"]",LM="(?:\\ud83c[\\udde6-\\uddff]){2}",FM="[\\ud800-\\udbff][\\udc00-\\udfff]",fv="["+NM+"]",a4="\\u200d",nx="(?:"+jM+"|"+IM+")",l4="(?:"+fv+"|"+IM+")",rx="(?:"+CM+"(?:d|ll|m|re|s|t|ve))?",ox="(?:"+CM+"(?:D|LL|M|RE|S|T|VE))?",$M=o4+"?",UM="["+e4+"]?",u4="(?:"+a4+"(?:"+[i4,LM,FM].join("|")+")"+UM+$M+")*",s4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",f4=UM+$M+u4,d4="(?:"+[n4,LM,FM].join("|")+")"+f4,p4=RegExp([fv+"?"+jM+"+"+rx+"(?="+[tx,fv,"$"].join("|")+")",l4+"+"+ox+"(?="+[tx,fv+nx,"$"].join("|")+")",fv+"?"+nx+"+"+rx,fv+"+"+ox,c4,s4,DM,d4].join("|"),"g");function h4(e){return e.match(p4)||[]}function BM(e,t,n){return e=Lo(e),t=n?void 0:t,t===void 0?zL(e)?h4(e):WL(e):e.match(t)||[]}var v4="['’]",m4=RegExp(v4,"g");function Gv(e){return function(t){return aM(BM(TM(t).replace(m4,"")),e,"")}}var y4=Gv(function(e,t,n){return t=t.toLowerCase(),e+(n?AM(t):t)}),g4=ah.isFinite,b4=Math.min;function dE(e){var t=Math[e];return function(n,a){if(n=Nf(n),a=a==null?0:b4(Br(a),292),a&&g4(n)){var r=(Lo(n)+"e").split("e"),u=t(r[0]+"e"+(+r[1]+a));return r=(Lo(u)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var _4=dE("ceil");function VM(e){var t=ce(e);return t.__chain__=!0,t}var w4=Math.ceil,E4=Math.max;function O4(e,t,n){(n?yc(e,t,n):t===void 0)?t=1:t=E4(Br(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,u=0,c=Array(w4(a/t));r<a;)c[u++]=Os(e,r,r+=t);return c}function dh(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function S4(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Nf(n),n=n===n?n:0),t!==void 0&&(t=Nf(t),t=t===t?t:0),dh(Nf(e),t,n)}var x4=1,A4=4;function T4(e,t){return t=typeof t=="function"?t:void 0,Lv(e,x4|A4,t)}var M4=4;function k4(e,t){return t=typeof t=="function"?t:void 0,Lv(e,M4,t)}function P4(){return new Du(this.value(),this.__chain__)}function N4(e){for(var t=-1,n=e==null?0:e.length,a=0,r=[];++t<n;){var u=e[t];u&&(r[a++]=u)}return r}function R4(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return ty(Oi(n)?Ru(n):[n],Ms(t,1))}var C4="Expected a function";function D4(e){var t=e==null?0:e.length,n=Qr;return e=t?Na(e,function(a){if(typeof a[1]!="function")throw new TypeError(C4);return[n(a[0]),a[1]]}):[],ro(function(a){for(var r=-1;++r<t;){var u=e[r];if(Cu(u[0],this,a))return Cu(u[1],this,a)}})}function WM(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],u=t[r],c=e[r];if(c===void 0&&!(r in e)||!u(c))return!1}return!0}function j4(e){var t=Ts(e);return function(n){return WM(n,e,t)}}var I4=1;function L4(e){return j4(Lv(e,I4))}function F4(e,t){return t==null||WM(e,t,Ts(t))}function $4(e,t,n,a){for(var r=-1,u=e==null?0:e.length;++r<u;){var c=e[r];t(a,c,n(c),e)}return a}function U4(e,t,n,a){return sb(e,function(r,u,c){t(a,r,n(r),c)}),a}function mb(e,t){return function(n,a){var r=Oi(n)?$4:U4,u=t?t():{};return r(n,e,Qr(a),u)}}var B4=Object.prototype,V4=B4.hasOwnProperty,W4=mb(function(e,t,n){V4.call(e,n)?++e[n]:ey(e,n,1)});function G4(e,t){var n=Zm(e);return t==null?n:QD(n,t)}var z4=8;function pE(e,t,n){t=n?void 0:t;var a=If(e,z4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=pE.placeholder,a}pE.placeholder={};var H4=16;function hE(e,t,n){t=n?void 0:t;var a=If(e,H4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=hE.placeholder,a}hE.placeholder={};function X4(e,t){return e==null||e!==e?t:e}function GM(e,t,n,a,r,u){return Gd(e)&&Gd(t)&&(u.set(t,e),FT(e,t,void 0,GM,u),u.delete(t)),e}var zM=Qm(function(e,t,n,a){FT(e,t,n,a)}),q4=ro(function(e){return e.push(void 0,GM),Cu(zM,void 0,e)}),Y4="Expected a function";function HM(e,t,n){if(typeof e!="function")throw new TypeError(Y4);return setTimeout(function(){e.apply(void 0,n)},t)}var K4=ro(function(e,t){return HM(e,1,t)}),Z4=ro(function(e,t,n){return HM(e,Nf(t)||0,n)}),J4=200;function oy(e,t,n,a){var r=-1,u=Kw,c=!0,v=e.length,f=[],g=t.length;if(!v)return f;n&&(t=Na(t,Cf(n))),a?(u=UT,c=!1):t.length>=J4&&(u=pw,c=!1,t=new $T(t));e:for(;++r<v;){var b=e[r],_=n==null?b:n(b);if(b=a||b!==0?b:0,c&&_===_){for(var x=g;x--;)if(t[x]===_)continue e;f.push(b)}else u(t,_,a)||f.push(b)}return f}var Q4=ro(function(e,t){return ia(e)?oy(e,Ms(t,1,ia,!0)):[]}),e6=ro(function(e,t){var n=Ss(t);return ia(n)&&(n=void 0),ia(e)?oy(e,Ms(t,1,ia,!0),Qr(n)):[]}),t6=ro(function(e,t){var n=Ss(t);return ia(n)&&(n=void 0),ia(e)?oy(e,Ms(t,1,ia,!0),void 0,n):[]}),n6=db(function(e,t){return e/t},1);function r6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Br(t),Os(e,t<0?0:t,a)):[]}function o6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Br(t),t=a-t,Os(e,0,t<0?0:t)):[]}function yb(e,t,n,a){for(var r=e.length,u=a?r:-1;(a?u--:++u<r)&&t(e[u],u,e););return n?Os(e,a?0:u,a?u+1:r):Os(e,a?u+1:0,a?r:u)}function i6(e,t){return e&&e.length?yb(e,Qr(t),!0,!0):[]}function a6(e,t){return e&&e.length?yb(e,Qr(t),!0):[]}function l6(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var XM=ej(!0);function vE(e,t){return e&&XM(e,t,Ts)}var qM=tj(vE,!0);function u6(e,t){var n=Oi(e)?l6:qM;return n(e,fh(t))}function s6(e,t,n){e=Lo(e),t=Es(t);var a=e.length;n=n===void 0?a:dh(Br(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function c6(e,t){return Na(t,function(n){return[n,e[n]]})}function f6(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var d6="[object Map]",p6="[object Set]";function YM(e){return function(t){var n=cb(t);return n==d6?BT(t):n==p6?f6(t):c6(t,e(t))}}var h6=YM(Ts),v6=YM(lh),m6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},y6=fE(m6),KM=/[&<>"']/g,g6=RegExp(KM.source);function ZM(e){return e=Lo(e),e&&g6.test(e)?e.replace(KM,y6):e}var JM=/[\\^$.*+?()[\]{}|]/g,b6=RegExp(JM.source);function _6(e){return e=Lo(e),e&&b6.test(e)?e.replace(JM,"\\$&"):e}function QM(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function w6(e,t){var n=!0;return sb(e,function(a,r,u){return n=!!t(a,r,u),n}),n}function E6(e,t,n){var a=Oi(e)?QM:w6;return n&&yc(e,t,n)&&(t=void 0),a(e,Qr(t))}var O6=4294967295;function ek(e){return e?dh(Br(e),0,O6):0}function S6(e,t,n,a){var r=e.length;for(n=Br(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:Br(a),a<0&&(a+=r),a=n>a?0:ek(a);n<a;)e[n++]=t;return e}function x6(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&yc(e,t,n)&&(n=0,a=r),S6(e,t,n,a)):[]}function tk(e,t,n){var a;return n(e,function(r,u,c){if(t(r,u,c))return a=u,!1}),a}function A6(e,t){return tk(e,Qr(t),sh)}var T6=PI(VT);function M6(e,t){return tk(e,Qr(t),vE)}function k6(e){return e&&e.length?e[0]:void 0}var P6=1/0;function N6(e,t){return Ms(Jw(e,t),P6)}function R6(e,t,n){return n=n===void 0?1:Br(n),Ms(Jw(e,t),n)}function C6(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Br(t),Ms(e,t)):[]}var D6=512;function j6(e){return If(e,D6)}var I6=dE("floor"),L6="Expected a function",F6=8,$6=32,U6=128,B6=256;function nk(e){return uh(function(t){var n=t.length,a=n,r=Du.prototype.thru;for(e&&t.reverse();a--;){var u=t[a];if(typeof u!="function")throw new TypeError(L6);if(r&&!c&&bg(u)=="wrapper")var c=new Du([],!0)}for(a=c?a:n;++a<n;){u=t[a];var v=bg(u),f=v=="wrapper"?aE(u):void 0;f&&yw(f[0])&&f[1]==(U6|F6|$6|B6)&&!f[4].length&&f[9]==1?c=c[bg(f[0])].apply(c,f[3]):c=u.length==1&&yw(u)?c[v]():c.thru(u)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&Oi(b))return c.plant(b).value();for(var _=0,x=n?t[_].apply(this,g):b;++_<n;)x=t[_].call(this,x);return x}})}var V6=nk(),W6=nk(!0);function G6(e,t){return e==null?e:XM(e,fh(t),lh)}function z6(e,t){return e&&vE(e,fh(t))}function gb(e,t){return Fv(t,function(n){return $v(e[n])})}function H6(e){return e==null?[]:gb(e,Ts(e))}function X6(e){return e==null?[]:gb(e,lh(e))}var q6=Object.prototype,Y6=q6.hasOwnProperty,K6=mb(function(e,t,n){Y6.call(e,n)?e[n].push(t):ey(e,n,[t])});function bb(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Nf(t),n=Nf(n)),e(t,n)}}var Z6=bb(uM),J6=bb(function(e,t){return e>=t}),Q6=Math.max,e5=Math.min;function t5(e,t,n){return e>=e5(t,n)&&e<Q6(t,n)}function n5(e,t,n){return t=Bm(t),n===void 0?(n=t,t=0):n=Bm(n),e=Nf(e),t5(e,t,n)}var r5="[object String]";function _b(e){return typeof e=="string"||!Oi(e)&&Iu(e)&&qd(e)==r5}var o5=Math.max;function i5(e,t,n,a){e=Iv(e)?e:Bv(e),n=n&&!a?Br(n):0;var r=e.length;return n<0&&(n=o5(r+n,0)),_b(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&ny(e,t,n)>-1}var a5=Math.max;function l5(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Br(n);return r<0&&(r=a5(a+r,0)),ny(e,t,r)}function u5(e){var t=e==null?0:e.length;return t?Os(e,0,-1):[]}var s5=Math.min;function mE(e,t,n){for(var a=n?UT:Kw,r=e[0].length,u=e.length,c=u,v=Array(u),f=1/0,g=[];c--;){var b=e[c];c&&t&&(b=Na(b,Cf(t))),f=s5(b.length,f),v[c]=!n&&(t||r>=120&&b.length>=120)?new $T(c&&b):void 0}b=e[0];var _=-1,x=v[0];e:for(;++_<r&&g.length<f;){var A=b[_],M=t?t(A):A;if(A=n||A!==0?A:0,!(x?pw(x,M):a(g,M,n))){for(c=u;--c;){var S=v[c];if(!(S?pw(S,M):a(e[c],M,n)))continue e}x&&x.push(M),g.push(A)}}return g}function yE(e){return ia(e)?e:[]}var c5=ro(function(e){var t=Na(e,yE);return t.length&&t[0]===e[0]?mE(t):[]}),f5=ro(function(e){var t=Ss(e),n=Na(e,yE);return t===Ss(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mE(n,Qr(t)):[]}),d5=ro(function(e){var t=Ss(e),n=Na(e,yE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?mE(n,void 0,t):[]});function p5(e,t,n,a){return sh(e,function(r,u,c){t(a,n(r),u,c)}),a}function rk(e,t){return function(n,a){return p5(n,e,t(a),{})}}var h5=Object.prototype,v5=h5.toString,m5=rk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=v5.call(t)),e[t]=n},WT(ih)),ok=Object.prototype,y5=ok.hasOwnProperty,g5=ok.toString,b5=rk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=g5.call(t)),y5.call(e,t)?e[t].push(n):e[t]=[n]},Qr);function iy(e,t,n){t=GT(t,e),e=nj(e,t);var a=e==null?e:e[ub(Ss(t))];return a==null?void 0:Cu(a,e,n)}var _5=ro(iy),w5=ro(function(e,t,n){var a=-1,r=typeof t=="function",u=Iv(e)?Array(e.length):[];return sb(e,function(c){u[++a]=r?Cu(t,c,n):iy(c,t,n)}),u}),E5="[object ArrayBuffer]";function O5(e){return Iu(e)&&qd(e)==E5}var ix=kv&&kv.isArrayBuffer,S5=ix?Cf(ix):O5,x5="[object Boolean]";function A5(e){return e===!0||e===!1||Iu(e)&&qd(e)==x5}var T5="[object Date]";function M5(e){return Iu(e)&&qd(e)==T5}var ax=kv&&kv.isDate,k5=ax?Cf(ax):M5;function P5(e){return Iu(e)&&e.nodeType===1&&!Zw(e)}function N5(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?rj(e,t,void 0,n):!!a}var R5=ah.isFinite;function C5(e){return typeof e=="number"&&R5(e)}function ik(e){return typeof e=="number"&&e==Br(e)}function D5(e,t){return e===t||zT(e,t,HT(t))}function j5(e,t,n){return n=typeof n=="function"?n:void 0,zT(e,t,HT(t),n)}var I5="[object Number]";function ak(e){return typeof e=="number"||Iu(e)&&qd(e)==I5}function L5(e){return ak(e)&&e!=+e}var F5=oj?$v:XT,$5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function U5(e){if(F5(e))throw new Error($5);return ij(e)}var B5="[object RegExp]";function V5(e){return Iu(e)&&qd(e)==B5}var lx=kv&&kv.isRegExp,gE=lx?Cf(lx):V5,ux=9007199254740991;function W5(e){return ik(e)&&e>=-ux&&e<=ux}var G5="[object WeakMap]";function z5(e){return Iu(e)&&cb(e)==G5}var H5="[object WeakSet]";function X5(e){return Iu(e)&&qd(e)==H5}var q5=1;function Y5(e){return Qr(typeof e=="function"?e:Lv(e,q5))}var K5=Array.prototype,Z5=K5.join;function J5(e,t){return e==null?"":Z5.call(e,t)}var Q5=Gv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),eF=mb(function(e,t,n){ey(e,n,t)});function tF(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var nF=Math.max,rF=Math.min;function oF(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=Br(n),r=r<0?nF(a+r,0):rF(r,a-1)),t===t?tF(e,t,r):aj(e,lj,r,!0)}var iF=Gv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),aF=xM("toLowerCase"),lF=bb(NI),uF=bb(function(e,t){return e<=t});function sF(e,t){var n={};return t=Qr(t),sh(e,function(a,r,u){ey(n,t(a,r,u),a)}),n}var cF=1;function fF(e){return uj(Lv(e,cF))}var dF=1;function pF(e,t){return sj(e,Lv(t,dF))}function hF(e,t){return e&&e.length?RI(e,Qr(t),uM):void 0}function bE(e,t){for(var n,a=-1,r=e.length;++a<r;){var u=t(e[a]);u!==void 0&&(n=n===void 0?u:n+u)}return n}var vF=NaN;function lk(e,t){var n=e==null?0:e.length;return n?bE(e,t)/n:vF}function mF(e){return lk(e,ih)}function yF(e,t){return lk(e,Qr(t))}var gF=ro(function(e,t){return function(n){return iy(n,e,t)}}),bF=ro(function(e,t){return function(n){return iy(e,n,t)}});function _F(e,t,n){var a=Ts(t),r=gb(t,a),u=!(Gd(n)&&"chain"in n)||!!n.chain,c=$v(e);return mc(r,function(v){var f=t[v];e[v]=f,c&&(e.prototype[v]=function(){var g=this.__chain__;if(u||g){var b=e(this.__wrapped__),_=b.__actions__=Ru(this.__actions__);return _.push({func:f,args:arguments,thisArg:e}),b.__chain__=g,b}return f.apply(e,ty([this.value()],arguments))})}),e}var wF=db(function(e,t){return e*t},1),EF="Expected a function";function wb(e){if(typeof e!="function")throw new TypeError(EF);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function OF(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var SF="[object Map]",xF="[object Set]",S1=Rg?Rg.iterator:void 0;function uk(e){if(!e)return[];if(Iv(e))return _b(e)?xs(e):Ru(e);if(S1&&e[S1])return OF(e[S1]());var t=cb(e),n=t==SF?BT:t==xF?cj:Bv;return n(e)}function AF(){this.__values__===void 0&&(this.__values__=uk(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function sk(e,t){var n=e.length;if(n)return t+=t<0?n:0,Jm(t,n)?e[t]:void 0}function TF(e,t){return e&&e.length?sk(e,Br(t)):void 0}function MF(e){return e=Br(e),ro(function(t){return sk(t,e)})}function ck(e,t){if(e==null)return{};var n=Na(fj(e),function(a){return[a]});return t=Qr(t),dj(e,n,function(a,r){return t(a,r[0])})}function kF(e,t){return ck(e,wb(Qr(t)))}function PF(e){return gM(2,e)}function NF(e,t,n,a){return e==null?[]:(Oi(t)||(t=t==null?[]:[t]),n=a?void 0:n,Oi(n)||(n=n==null?[]:[n]),CI(e,t,n))}function _E(e){return uh(function(t){return t=Na(t,Cf(Qr)),ro(function(n){var a=this;return e(t,function(r){return Cu(r,a,n)})})})}var RF=_E(Na),CF=ro,DF=Math.min,jF=CF(function(e,t){t=t.length==1&&Oi(t[0])?Na(t[0],Cf(Qr)):Na(Ms(t,1),Cf(Qr));var n=t.length;return ro(function(a){for(var r=-1,u=DF(a.length,n);++r<u;)a[r]=t[r].call(this,a[r]);return Cu(e,this,a)})}),IF=_E(QM),LF=_E(qT),FF=9007199254740991,$F=Math.floor;function ww(e,t){var n="";if(!e||t<1||t>FF)return n;do t%2&&(n+=e),t=$F(t/2),t&&(e+=e);while(t);return n}var UF=YT("length"),fk="\\ud800-\\udfff",BF="\\u0300-\\u036f",VF="\\ufe20-\\ufe2f",WF="\\u20d0-\\u20ff",GF=BF+VF+WF,zF="\\ufe0e\\ufe0f",HF="["+fk+"]",Ew="["+GF+"]",Ow="\\ud83c[\\udffb-\\udfff]",XF="(?:"+Ew+"|"+Ow+")",dk="[^"+fk+"]",pk="(?:\\ud83c[\\udde6-\\uddff]){2}",hk="[\\ud800-\\udbff][\\udc00-\\udfff]",qF="\\u200d",vk=XF+"?",mk="["+zF+"]?",YF="(?:"+qF+"(?:"+[dk,pk,hk].join("|")+")"+mk+vk+")*",KF=mk+vk+YF,ZF="(?:"+[dk+Ew+"?",Ew,pk,hk,HF].join("|")+")",sx=RegExp(Ow+"(?="+Ow+")|"+ZF+KF,"g");function JF(e){for(var t=sx.lastIndex=0;sx.test(e);)++t;return t}function zv(e){return Wv(e)?JF(e):UF(e)}var QF=Math.ceil;function Dg(e,t){t=t===void 0?" ":Es(t);var n=t.length;if(n<2)return n?ww(t,e):t;var a=ww(t,QF(e/zv(t)));return Wv(t)?Kd(xs(a),0,e).join(""):a.slice(0,e)}var e$=Math.ceil,t$=Math.floor;function n$(e,t,n){e=Lo(e),t=Br(t);var a=t?zv(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return Dg(t$(r),n)+e+Dg(e$(r),n)}function r$(e,t,n){e=Lo(e),t=Br(t);var a=t?zv(e):0;return t&&a<t?e+Dg(t-a,n):e}function o$(e,t,n){e=Lo(e),t=Br(t);var a=t?zv(e):0;return t&&a<t?Dg(t-a,n)+e:e}var i$=/^\s+/,a$=ah.parseInt;function l$(e,t,n){return n||t==null?t=0:t&&(t=+t),a$(Lo(e).replace(i$,""),t||0)}var u$=32,Eb=ro(function(e,t){var n=Hd(t,Vv(Eb));return If(e,u$,void 0,t,n)});Eb.placeholder={};var s$=64,wE=ro(function(e,t){var n=Hd(t,Vv(wE));return If(e,s$,void 0,t,n)});wE.placeholder={};var c$=mb(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function f$(e){for(var t,n=this;n instanceof pb;){var a=dM(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function d$(e){return function(t){return e==null?void 0:KT(e,t)}}function p$(e,t,n,a){for(var r=n-1,u=e.length;++r<u;)if(a(e[r],t))return r;return-1}var h$=Array.prototype,cx=h$.splice;function EE(e,t,n,a){var r=a?p$:ny,u=-1,c=t.length,v=e;for(e===t&&(t=Ru(t)),n&&(v=Na(e,Cf(n)));++u<c;)for(var f=0,g=t[u],b=n?n(g):g;(f=r(v,b,f,a))>-1;)v!==e&&cx.call(v,f,1),cx.call(e,f,1);return e}function yk(e,t){return e&&e.length&&t&&t.length?EE(e,t):e}var v$=ro(yk);function m$(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,Qr(n)):e}function y$(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,void 0,n):e}var g$=Array.prototype,b$=g$.splice;function gk(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==u){var u=r;Jm(r)?b$.call(e,r,1):ZT(e,r)}}return e}var _$=uh(function(e,t){var n=e==null?0:e.length,a=lE(e,t);return gk(e,Na(t,function(r){return Jm(r,n)?+r:r}).sort(DI)),a}),w$=Math.floor,E$=Math.random;function OE(e,t){return e+w$(E$()*(t-e+1))}var O$=parseFloat,S$=Math.min,x$=Math.random;function A$(e,t,n){if(n&&typeof n!="boolean"&&yc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Bm(e),t===void 0?(t=e,e=0):t=Bm(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=x$();return S$(e+r*(t-e+O$("1e-"+((r+"").length-1))),t)}return OE(e,t)}var T$=jI(!0),M$=256,k$=uh(function(e,t){return If(e,M$,void 0,void 0,void 0,t)});function P$(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function N$(e,t,n){var a=Oi(e)?P$:SI,r=arguments.length<3;return a(e,Qr(t),n,r,qM)}function R$(e,t){var n=Oi(e)?Fv:xI;return n(e,wb(Qr(t)))}function C$(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],u=e.length;for(t=Qr(t);++a<u;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return gk(e,r),n}function D$(e,t,n){return(n?yc(e,t,n):t===void 0)?t=1:t=Br(t),ww(Lo(e),t)}function j$(){var e=arguments,t=Lo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var I$="Expected a function";function L$(e,t){if(typeof e!="function")throw new TypeError(I$);return t=t===void 0?t:Br(t),ro(e,t)}function F$(e,t,n){t=GT(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var u=e==null?void 0:e[ub(t[a])];u===void 0&&(a=r,u=n),e=$v(u)?u.call(e):u}return e}var $$=Array.prototype,U$=$$.reverse;function Sw(e){return e==null?e:U$.call(e)}var B$=dE("round");function bk(e){var t=e.length;return t?e[OE(0,t-1)]:void 0}function V$(e){return bk(Bv(e))}function W$(e){var t=Oi(e)?bk:V$;return t(e)}function Ob(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var u=OE(n,r),c=e[u];e[u]=e[n],e[n]=c}return e.length=t,e}function G$(e,t){return Ob(Ru(e),dh(t,0,e.length))}function z$(e,t){var n=Bv(e);return Ob(n,dh(t,0,n.length))}function H$(e,t,n){(n?yc(e,t,n):t===void 0)?t=1:t=Br(t);var a=Oi(e)?G$:z$;return a(e,t)}function X$(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Qw(e,t,n,a)}function q$(e){return Ob(Ru(e))}function Y$(e){return Ob(Bv(e))}function K$(e){var t=Oi(e)?q$:Y$;return t(e)}var Z$="[object Map]",J$="[object Set]";function Q$(e){if(e==null)return 0;if(Iv(e))return _b(e)?zv(e):e.length;var t=cb(e);return t==Z$||t==J$?e.size:pj(e).length}function e9(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&yc(e,t,n)?(t=0,n=a):(t=t==null?0:Br(t),n=n===void 0?a:Br(n)),Os(e,t,n)):[]}var t9=Gv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function n9(e,t){var n;return sb(e,function(a,r,u){return n=t(a,r,u),!n}),!!n}function r9(e,t,n){var a=Oi(e)?qT:n9;return n&&yc(e,t,n)&&(t=void 0),a(e,Qr(t))}var o9=4294967295,i9=o9-1,a9=Math.floor,l9=Math.min;function SE(e,t,n,a){var r=0,u=e==null?0:e.length;if(u===0)return 0;t=n(t);for(var c=t!==t,v=t===null,f=Mv(t),g=t===void 0;r<u;){var b=a9((r+u)/2),_=n(e[b]),x=_!==void 0,A=_===null,M=_===_,S=Mv(_);if(c)var E=a||M;else g?E=M&&(a||x):v?E=M&&x&&(a||!A):f?E=M&&x&&!A&&(a||!S):A||S?E=!1:E=a?_<=t:_<t;E?r=b+1:u=b}return l9(u,i9)}var u9=4294967295,s9=u9>>>1;function Sb(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=s9){for(;a<r;){var u=a+r>>>1,c=e[u];c!==null&&!Mv(c)&&(n?c<=t:c<t)?a=u+1:r=u}return r}return SE(e,t,ih,n)}function c9(e,t){return Sb(e,t)}function f9(e,t,n){return SE(e,t,Qr(n))}function d9(e,t){var n=e==null?0:e.length;if(n){var a=Sb(e,t);if(a<n&&ry(e[a],t))return a}return-1}function p9(e,t){return Sb(e,t,!0)}function h9(e,t,n){return SE(e,t,Qr(n),!0)}function v9(e,t){var n=e==null?0:e.length;if(n){var a=Sb(e,t,!0)-1;if(ry(e[a],t))return a}return-1}function _k(e,t){for(var n=-1,a=e.length,r=0,u=[];++n<a;){var c=e[n],v=t?t(c):c;if(!n||!ry(v,f)){var f=v;u[r++]=c===0?0:c}}return u}function m9(e){return e&&e.length?_k(e):[]}function y9(e,t){return e&&e.length?_k(e,Qr(t)):[]}var g9=4294967295;function b9(e,t,n){return n&&typeof n!="number"&&yc(e,t,n)&&(t=n=void 0),n=n===void 0?g9:n>>>0,n?(e=Lo(e),e&&(typeof t=="string"||t!=null&&!gE(t))&&(t=Es(t),!t&&Wv(e))?Kd(xs(e),0,n):e.split(t,n)):[]}var _9="Expected a function",w9=Math.max;function E9(e,t){if(typeof e!="function")throw new TypeError(_9);return t=t==null?0:w9(Br(t),0),ro(function(n){var a=n[t],r=Kd(n,0,t);return a&&ty(r,a),Cu(e,this,r)})}var O9=Gv(function(e,t,n){return e+(n?" ":"")+cE(t)});function S9(e,t,n){return e=Lo(e),n=n==null?0:dh(Br(n),0,e.length),t=Es(t),e.slice(n,n+t.length)==t}function x9(){return{}}function A9(){return""}function T9(){return!0}var M9=db(function(e,t){return e-t},0);function k9(e){return e&&e.length?bE(e,ih):0}function P9(e,t){return e&&e.length?bE(e,Qr(t)):0}function N9(e){var t=e==null?0:e.length;return t?Os(e,1,t):[]}function R9(e,t,n){return e&&e.length?(t=n||t===void 0?1:Br(t),Os(e,0,t<0?0:t)):[]}function C9(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Br(t),t=a-t,Os(e,t<0?0:t,a)):[]}function D9(e,t){return e&&e.length?yb(e,Qr(t),!1,!0):[]}function j9(e,t){return e&&e.length?yb(e,Qr(t)):[]}function I9(e,t){return t(e),e}var wk=Object.prototype,L9=wk.hasOwnProperty;function fx(e,t,n,a){return e===void 0||ry(e,wk[n])&&!L9.call(a,n)?t:e}var F9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function $9(e){return"\\"+F9[e]}var Ek=/<%=([\s\S]+?)%>/g,U9=/<%-([\s\S]+?)%>/g,B9=/<%([\s\S]+?)%>/g,xw={escape:U9,evaluate:B9,interpolate:Ek,variable:"",imports:{_:{escape:ZM}}},V9="Invalid `variable` option passed into `_.template`",W9=/\b__p \+= '';/g,G9=/\b(__p \+=) '' \+/g,z9=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H9=/[()=,{}\[\]\/\s]/,X9=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ug=/($^)/,q9=/['\n\r\u2028\u2029\\]/g,Y9=Object.prototype,dx=Y9.hasOwnProperty;function K9(e,t,n){var a=xw.imports._.templateSettings||xw;n&&yc(e,t,n)&&(t=void 0),e=Lo(e),t=gw({},t,a,fx);var r=gw({},t.imports,a.imports,fx),u=Ts(r),c=lM(r,u),v,f,g=0,b=t.interpolate||ug,_="__p += '",x=RegExp((t.escape||ug).source+"|"+b.source+"|"+(b===Ek?X9:ug).source+"|"+(t.evaluate||ug).source+"|$","g"),A=dx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(x,function(E,D,I,B,$,j){return I||(I=B),_+=e.slice(g,j).replace(q9,$9),D&&(v=!0,_+=`' +
__e(`+D+`) +
'`),$&&(f=!0,_+=`';
`+$+`;
__p += '`),I&&(_+=`' +
((__t = (`+I+`)) == null ? '' : __t) +
'`),g=j+E.length,E}),_+=`';
`;var M=dx.call(t,"variable")&&t.variable;if(!M)_=`with (obj) {
`+_+`
}
`;else if(H9.test(M))throw new Error(V9);_=(f?_.replace(W9,""):_).replace(G9,"$1").replace(z9,"$1;"),_="function("+(M||"obj")+`) {
`+(M?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_+`return __p
}`;var S=yM(function(){return Function(u,A+"return "+_).apply(void 0,c)});if(S.source=_,uE(S))throw S;return S}function xb(e,t){return t(e)}var Z9=9007199254740991,x1=4294967295,J9=Math.min;function Q9(e,t){if(e=Br(e),e<1||e>Z9)return[];var n=x1,a=J9(e,x1);t=fh(t),e-=x1;for(var r=JT(a,t);++n<e;)t(n);return r}function e7(){return this}function Ok(e,t){var n=e;return n instanceof Jr&&(n=n.value()),aM(t,function(a,r){return r.func.apply(r.thisArg,ty([a],r.args))},n)}function t7(){return Ok(this.__wrapped__,this.__actions__)}function n7(e){return Lo(e).toLowerCase()}function r7(e){return Oi(e)?Na(e,ub):Mv(e)?[e]:Ru(hj(Lo(e)))}var px=9007199254740991;function o7(e){return e?dh(Br(e),-px,px):e===0?e:0}function i7(e){return Lo(e).toUpperCase()}function a7(e,t,n){var a=Oi(e),r=a||QT(e)||eM(e);if(t=Qr(t),n==null){var u=e&&e.constructor;r?n=a?new u:[]:Gd(e)?n=$v(u)?Zm(vj(e)):{}:n={}}return(r?mc:sh)(e,function(c,v,f){return t(n,c,v,f)}),n}function Sk(e,t){for(var n=e.length;n--&&ny(t,e[n],0)>-1;);return n}function xk(e,t){for(var n=-1,a=e.length;++n<a&&ny(t,e[n],0)>-1;);return n}function l7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return mj(e);if(!e||!(t=Es(t)))return e;var a=xs(e),r=xs(t),u=xk(a,r),c=Sk(a,r)+1;return Kd(a,u,c).join("")}function u7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return e.slice(0,yj(e)+1);if(!e||!(t=Es(t)))return e;var a=xs(e),r=Sk(a,xs(t))+1;return Kd(a,0,r).join("")}var s7=/^\s+/;function c7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return e.replace(s7,"");if(!e||!(t=Es(t)))return e;var a=xs(e),r=xk(a,xs(t));return Kd(a,r).join("")}var f7=30,d7="...",p7=/\w*$/;function h7(e,t){var n=f7,a=d7;if(Gd(t)){var r="separator"in t?t.separator:r;n="length"in t?Br(t.length):n,a="omission"in t?Es(t.omission):a}e=Lo(e);var u=e.length;if(Wv(e)){var c=xs(e);u=c.length}if(n>=u)return e;var v=n-zv(a);if(v<1)return a;var f=c?Kd(c,0,v).join(""):e.slice(0,v);if(r===void 0)return f+a;if(c&&(v+=f.length-v),gE(r)){if(e.slice(v).search(r)){var g,b=f;for(r.global||(r=RegExp(r.source,Lo(p7.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var _=g.index;f=f.slice(0,_===void 0?v:_)}}else if(e.indexOf(Es(r),v)!=v){var x=f.lastIndexOf(r);x>-1&&(f=f.slice(0,x))}return f+a}function v7(e){return mM(e,1)}var m7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},y7=fE(m7),Ak=/&(?:amp|lt|gt|quot|#39);/g,g7=RegExp(Ak.source);function b7(e){return e=Lo(e),e&&g7.test(e)?e.replace(Ak,y7):e}var _7=ro(function(e){var t=Ss(e);return ia(t)&&(t=void 0),Jp(Ms(e,1,ia,!0),Qr(t))}),w7=ro(function(e){var t=Ss(e);return t=typeof t=="function"?t:void 0,Jp(Ms(e,1,ia,!0),void 0,t)});function E7(e){return e&&e.length?Jp(e):[]}function O7(e,t){return e&&e.length?Jp(e,Qr(t)):[]}function S7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?Jp(e,void 0,t):[]}function x7(e,t){return e==null?!0:ZT(e,t)}var A7=Math.max;function xE(e){if(!(e&&e.length))return[];var t=0;return e=Fv(e,function(n){if(ia(n))return t=A7(n.length,t),!0}),JT(t,function(n){return Na(e,YT(n))})}function Tk(e,t){if(!(e&&e.length))return[];var n=xE(e);return t==null?n:Na(n,function(a){return Cu(t,void 0,a)})}function Mk(e,t,n,a){return Qw(e,t,n(KT(e,t)),a)}function T7(e,t,n){return e==null?e:Mk(e,t,fh(n))}function M7(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Mk(e,t,fh(n),a)}var k7=Gv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function P7(e){return e==null?[]:lM(e,lh(e))}var N7=ro(function(e,t){return ia(e)?oy(e,t):[]});function R7(e,t){return Eb(fh(t),e)}var C7=uh(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(u){return lE(u,e)};return t>1||this.__actions__.length||!(a instanceof Jr)||!Jm(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:xb,args:[r],thisArg:void 0}),new Du(a,this.__chain__).thru(function(u){return t&&!u.length&&u.push(void 0),u}))});function D7(){return VM(this)}function j7(){var e=this.__wrapped__;if(e instanceof Jr){var t=e;return this.__actions__.length&&(t=new Jr(this)),t=t.reverse(),t.__actions__.push({func:xb,args:[Sw],thisArg:void 0}),new Du(t,this.__chain__)}return this.thru(Sw)}function AE(e,t,n){var a=e.length;if(a<2)return a?Jp(e[0]):[];for(var r=-1,u=Array(a);++r<a;)for(var c=e[r],v=-1;++v<a;)v!=r&&(u[r]=oy(u[r]||c,e[v],t,n));return Jp(Ms(u,1),t,n)}var I7=ro(function(e){return AE(Fv(e,ia))}),L7=ro(function(e){var t=Ss(e);return ia(t)&&(t=void 0),AE(Fv(e,ia),Qr(t))}),F7=ro(function(e){var t=Ss(e);return t=typeof t=="function"?t:void 0,AE(Fv(e,ia),void 0,t)}),$7=ro(xE);function U7(e,t){return II(e||[],t||[],Qw)}var B7=ro(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,Tk(e,n)});const Ln={chunk:O4,compact:N4,concat:R4,difference:Q4,differenceBy:e6,differenceWith:t6,drop:r6,dropRight:o6,dropRightWhile:i6,dropWhile:a6,fill:x6,findIndex:FI,findLastIndex:VT,flatten:gj,flattenDeep:bj,flattenDepth:C6,fromPairs:_j,head:k6,indexOf:l5,initial:u5,intersection:c5,intersectionBy:f5,intersectionWith:d5,join:J5,lastIndexOf:oF,nth:TF,pull:v$,pullAll:yk,pullAllBy:m$,pullAllWith:y$,pullAt:_$,remove:C$,reverse:Sw,slice:e9,sortedIndex:c9,sortedIndexBy:f9,sortedIndexOf:d9,sortedLastIndex:p9,sortedLastIndexBy:h9,sortedLastIndexOf:v9,sortedUniq:m9,sortedUniqBy:y9,tail:N9,take:R9,takeRight:C9,takeRightWhile:D9,takeWhile:j9,union:wj,unionBy:_7,unionWith:w7,uniq:E7,uniqBy:O7,uniqWith:S7,unzip:xE,unzipWith:Tk,without:N7,xor:I7,xorBy:L7,xorWith:F7,zip:$7,zipObject:LI,zipObjectDeep:U7,zipWith:B7},Fo={countBy:W4,every:E6,filter:AI,find:UI,findLast:T6,flatMap:Ej,flatMapDeep:N6,flatMapDepth:R6,forEach:TI,forEachRight:u6,groupBy:K6,includes:i5,invokeMap:w5,keyBy:eF,map:Jw,orderBy:NF,partition:c$,reduce:MI,reduceRight:N$,reject:R$,sample:W$,sampleSize:H$,shuffle:K$,size:Q$,some:r9,sortBy:$I},V7={now:Oj},ji={after:n8,ary:mM,before:gM,bind:vb,bindKey:sE,curry:pE,curryRight:hE,debounce:Sj,defer:K4,delay:Z4,flip:j6,memoize:xj,once:PF,overArgs:jF,partial:Eb,partialRight:wE,rearg:k$,rest:L$,spread:E9,throttle:Aj,unary:v7,wrap:R7},cr={castArray:Tj,clone:kj,cloneDeep:Pj,cloneDeepWith:T4,cloneWith:k4,conformsTo:F4,eq:ry,gt:Z6,gte:J6,isArguments:Nj,isArrayBuffer:S5,isArrayLike:Iv,isArrayLikeObject:ia,isBoolean:A5,isBuffer:QT,isDate:k5,isElement:P5,isEmpty:Rj,isEqual:Cj,isEqualWith:N5,isError:uE,isFinite:C5,isFunction:$v,isInteger:ik,isLength:Dj,isMap:jj,isMatch:D5,isMatchWith:j5,isNaN:L5,isNative:U5,isNil:Ij,isNull:Lj,isNumber:ak,isObjectLike:Iu,isPlainObject:Zw,isRegExp:gE,isSafeInteger:W5,isSet:Fj,isString:_b,isSymbol:Mv,isTypedArray:eM,isUndefined:$j,isWeakMap:z5,isWeakSet:X5,lt:lF,lte:uF,toArray:uk,toFinite:Bm,toLength:ek,toNumber:Nf,toPlainObject:Mj,toSafeInteger:o7,toString:Lo},pl={add:e8,ceil:_4,divide:n6,floor:I6,max:BI,maxBy:hF,mean:mF,meanBy:yF,min:VI,minBy:WI,multiply:wF,round:B$,subtract:M9,sum:k9,sumBy:P9},TE={clamp:S4,inRange:n5,random:A$},Sr={assign:J8,assignIn:Q8,assignInWith:gw,assignWith:eL,at:tL,create:G4,defaults:GI,defaultsDeep:q4,findKey:A6,findLastKey:M6,forIn:HI,forInRight:G6,forOwn:XI,forOwnRight:z6,functions:H6,functionsIn:X6,get:LT,has:kI,hasIn:Gj,invert:m5,invertBy:b5,invoke:_5,keysIn:lh,mapKeys:sF,mapValues:zI,merge:Uj,mergeWith:zM,omit:Bj,omitBy:kF,pick:Vj,pickBy:ck,result:F$,set:Wj,setWith:X$,toPairs:h6,toPairsIn:v6,transform:a7,unset:x7,update:T7,updateWith:M7,values:Bv,valuesIn:P7},bc={at:C7,chain:VM,commit:P4,next:AF,plant:f$,reverse:j7,tap:I9,toIterator:e7,value:t7,wrapperChain:D7},go={camelCase:y4,capitalize:AM,deburr:TM,endsWith:s6,escape:ZM,escapeRegExp:_6,kebabCase:Q5,lowerCase:iF,lowerFirst:aF,pad:n$,padEnd:r$,padStart:o$,parseInt:l$,repeat:D$,replace:j$,snakeCase:t9,split:b9,startCase:O9,startsWith:S9,template:K9,templateSettings:xw,toLower:n7,toUpper:i7,trim:l7,trimEnd:u7,trimStart:c7,truncate:h7,unescape:b7,upperCase:k7,upperFirst:cE,words:BM},xo={attempt:yM,bindAll:lL,cond:D4,conforms:L4,constant:WT,defaultTo:X4,flow:V6,flowRight:W6,iteratee:Y5,matches:fF,matchesProperty:pF,method:gF,methodOf:bF,noop:IT,nthArg:MF,over:RF,overEvery:IF,overSome:LF,property:zj,propertyOf:d$,range:qI,rangeRight:T$,stubArray:Hj,stubFalse:XT,stubObject:x9,stubString:A9,stubTrue:T9,times:Q9,toPath:r7,uniqueId:YI};function W7(){var e=new Jr(this.__wrapped__);return e.__actions__=Ru(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ru(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ru(this.__views__),e}function G7(){if(this.__filtered__){var e=new Jr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var z7=Math.max,H7=Math.min;function X7(e,t,n){for(var a=-1,r=n.length;++a<r;){var u=n[a],c=u.size;switch(u.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=H7(t,e+c);break;case"takeRight":e=z7(e,t-c);break}}return{start:e,end:t}}var q7=1,Y7=2,K7=Math.min;function Z7(){var e=this.__wrapped__.value(),t=this.__dir__,n=Oi(e),a=t<0,r=n?e.length:0,u=X7(0,r,this.__views__),c=u.start,v=u.end,f=v-c,g=a?v:c-1,b=this.__iteratees__,_=b.length,x=0,A=K7(f,this.__takeCount__);if(!n||!a&&r==f&&A==f)return Ok(e,this.__actions__);var M=[];e:for(;f--&&x<A;){g+=t;for(var S=-1,E=e[g];++S<_;){var D=b[S],I=D.iteratee,B=D.type,$=I(E);if(B==Y7)E=$;else if(!$){if(B==q7)continue e;break e}}M[x++]=E}return M}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var J7="4.17.21",Q7=2,eU=1,tU=3,kk=4294967295,nU=Array.prototype,rU=Object.prototype,Pk=rU.hasOwnProperty,hx=Rg?Rg.iterator:void 0,oU=Math.max,vx=Math.min,ME=function(e){return function(t,n,a){if(a==null){var r=Gd(n),u=r&&Ts(n),c=u&&u.length&&gb(n,u);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(_F);ce.after=ji.after;ce.ary=ji.ary;ce.assign=Sr.assign;ce.assignIn=Sr.assignIn;ce.assignInWith=Sr.assignInWith;ce.assignWith=Sr.assignWith;ce.at=Sr.at;ce.before=ji.before;ce.bind=ji.bind;ce.bindAll=xo.bindAll;ce.bindKey=ji.bindKey;ce.castArray=cr.castArray;ce.chain=bc.chain;ce.chunk=Ln.chunk;ce.compact=Ln.compact;ce.concat=Ln.concat;ce.cond=xo.cond;ce.conforms=xo.conforms;ce.constant=xo.constant;ce.countBy=Fo.countBy;ce.create=Sr.create;ce.curry=ji.curry;ce.curryRight=ji.curryRight;ce.debounce=ji.debounce;ce.defaults=Sr.defaults;ce.defaultsDeep=Sr.defaultsDeep;ce.defer=ji.defer;ce.delay=ji.delay;ce.difference=Ln.difference;ce.differenceBy=Ln.differenceBy;ce.differenceWith=Ln.differenceWith;ce.drop=Ln.drop;ce.dropRight=Ln.dropRight;ce.dropRightWhile=Ln.dropRightWhile;ce.dropWhile=Ln.dropWhile;ce.fill=Ln.fill;ce.filter=Fo.filter;ce.flatMap=Fo.flatMap;ce.flatMapDeep=Fo.flatMapDeep;ce.flatMapDepth=Fo.flatMapDepth;ce.flatten=Ln.flatten;ce.flattenDeep=Ln.flattenDeep;ce.flattenDepth=Ln.flattenDepth;ce.flip=ji.flip;ce.flow=xo.flow;ce.flowRight=xo.flowRight;ce.fromPairs=Ln.fromPairs;ce.functions=Sr.functions;ce.functionsIn=Sr.functionsIn;ce.groupBy=Fo.groupBy;ce.initial=Ln.initial;ce.intersection=Ln.intersection;ce.intersectionBy=Ln.intersectionBy;ce.intersectionWith=Ln.intersectionWith;ce.invert=Sr.invert;ce.invertBy=Sr.invertBy;ce.invokeMap=Fo.invokeMap;ce.iteratee=xo.iteratee;ce.keyBy=Fo.keyBy;ce.keys=Ts;ce.keysIn=Sr.keysIn;ce.map=Fo.map;ce.mapKeys=Sr.mapKeys;ce.mapValues=Sr.mapValues;ce.matches=xo.matches;ce.matchesProperty=xo.matchesProperty;ce.memoize=ji.memoize;ce.merge=Sr.merge;ce.mergeWith=Sr.mergeWith;ce.method=xo.method;ce.methodOf=xo.methodOf;ce.mixin=ME;ce.negate=wb;ce.nthArg=xo.nthArg;ce.omit=Sr.omit;ce.omitBy=Sr.omitBy;ce.once=ji.once;ce.orderBy=Fo.orderBy;ce.over=xo.over;ce.overArgs=ji.overArgs;ce.overEvery=xo.overEvery;ce.overSome=xo.overSome;ce.partial=ji.partial;ce.partialRight=ji.partialRight;ce.partition=Fo.partition;ce.pick=Sr.pick;ce.pickBy=Sr.pickBy;ce.property=xo.property;ce.propertyOf=xo.propertyOf;ce.pull=Ln.pull;ce.pullAll=Ln.pullAll;ce.pullAllBy=Ln.pullAllBy;ce.pullAllWith=Ln.pullAllWith;ce.pullAt=Ln.pullAt;ce.range=xo.range;ce.rangeRight=xo.rangeRight;ce.rearg=ji.rearg;ce.reject=Fo.reject;ce.remove=Ln.remove;ce.rest=ji.rest;ce.reverse=Ln.reverse;ce.sampleSize=Fo.sampleSize;ce.set=Sr.set;ce.setWith=Sr.setWith;ce.shuffle=Fo.shuffle;ce.slice=Ln.slice;ce.sortBy=Fo.sortBy;ce.sortedUniq=Ln.sortedUniq;ce.sortedUniqBy=Ln.sortedUniqBy;ce.split=go.split;ce.spread=ji.spread;ce.tail=Ln.tail;ce.take=Ln.take;ce.takeRight=Ln.takeRight;ce.takeRightWhile=Ln.takeRightWhile;ce.takeWhile=Ln.takeWhile;ce.tap=bc.tap;ce.throttle=ji.throttle;ce.thru=xb;ce.toArray=cr.toArray;ce.toPairs=Sr.toPairs;ce.toPairsIn=Sr.toPairsIn;ce.toPath=xo.toPath;ce.toPlainObject=cr.toPlainObject;ce.transform=Sr.transform;ce.unary=ji.unary;ce.union=Ln.union;ce.unionBy=Ln.unionBy;ce.unionWith=Ln.unionWith;ce.uniq=Ln.uniq;ce.uniqBy=Ln.uniqBy;ce.uniqWith=Ln.uniqWith;ce.unset=Sr.unset;ce.unzip=Ln.unzip;ce.unzipWith=Ln.unzipWith;ce.update=Sr.update;ce.updateWith=Sr.updateWith;ce.values=Sr.values;ce.valuesIn=Sr.valuesIn;ce.without=Ln.without;ce.words=go.words;ce.wrap=ji.wrap;ce.xor=Ln.xor;ce.xorBy=Ln.xorBy;ce.xorWith=Ln.xorWith;ce.zip=Ln.zip;ce.zipObject=Ln.zipObject;ce.zipObjectDeep=Ln.zipObjectDeep;ce.zipWith=Ln.zipWith;ce.entries=Sr.toPairs;ce.entriesIn=Sr.toPairsIn;ce.extend=Sr.assignIn;ce.extendWith=Sr.assignInWith;ME(ce,ce);ce.add=pl.add;ce.attempt=xo.attempt;ce.camelCase=go.camelCase;ce.capitalize=go.capitalize;ce.ceil=pl.ceil;ce.clamp=TE.clamp;ce.clone=cr.clone;ce.cloneDeep=cr.cloneDeep;ce.cloneDeepWith=cr.cloneDeepWith;ce.cloneWith=cr.cloneWith;ce.conformsTo=cr.conformsTo;ce.deburr=go.deburr;ce.defaultTo=xo.defaultTo;ce.divide=pl.divide;ce.endsWith=go.endsWith;ce.eq=cr.eq;ce.escape=go.escape;ce.escapeRegExp=go.escapeRegExp;ce.every=Fo.every;ce.find=Fo.find;ce.findIndex=Ln.findIndex;ce.findKey=Sr.findKey;ce.findLast=Fo.findLast;ce.findLastIndex=Ln.findLastIndex;ce.findLastKey=Sr.findLastKey;ce.floor=pl.floor;ce.forEach=Fo.forEach;ce.forEachRight=Fo.forEachRight;ce.forIn=Sr.forIn;ce.forInRight=Sr.forInRight;ce.forOwn=Sr.forOwn;ce.forOwnRight=Sr.forOwnRight;ce.get=Sr.get;ce.gt=cr.gt;ce.gte=cr.gte;ce.has=Sr.has;ce.hasIn=Sr.hasIn;ce.head=Ln.head;ce.identity=ih;ce.includes=Fo.includes;ce.indexOf=Ln.indexOf;ce.inRange=TE.inRange;ce.invoke=Sr.invoke;ce.isArguments=cr.isArguments;ce.isArray=Oi;ce.isArrayBuffer=cr.isArrayBuffer;ce.isArrayLike=cr.isArrayLike;ce.isArrayLikeObject=cr.isArrayLikeObject;ce.isBoolean=cr.isBoolean;ce.isBuffer=cr.isBuffer;ce.isDate=cr.isDate;ce.isElement=cr.isElement;ce.isEmpty=cr.isEmpty;ce.isEqual=cr.isEqual;ce.isEqualWith=cr.isEqualWith;ce.isError=cr.isError;ce.isFinite=cr.isFinite;ce.isFunction=cr.isFunction;ce.isInteger=cr.isInteger;ce.isLength=cr.isLength;ce.isMap=cr.isMap;ce.isMatch=cr.isMatch;ce.isMatchWith=cr.isMatchWith;ce.isNaN=cr.isNaN;ce.isNative=cr.isNative;ce.isNil=cr.isNil;ce.isNull=cr.isNull;ce.isNumber=cr.isNumber;ce.isObject=Gd;ce.isObjectLike=cr.isObjectLike;ce.isPlainObject=cr.isPlainObject;ce.isRegExp=cr.isRegExp;ce.isSafeInteger=cr.isSafeInteger;ce.isSet=cr.isSet;ce.isString=cr.isString;ce.isSymbol=cr.isSymbol;ce.isTypedArray=cr.isTypedArray;ce.isUndefined=cr.isUndefined;ce.isWeakMap=cr.isWeakMap;ce.isWeakSet=cr.isWeakSet;ce.join=Ln.join;ce.kebabCase=go.kebabCase;ce.last=Ss;ce.lastIndexOf=Ln.lastIndexOf;ce.lowerCase=go.lowerCase;ce.lowerFirst=go.lowerFirst;ce.lt=cr.lt;ce.lte=cr.lte;ce.max=pl.max;ce.maxBy=pl.maxBy;ce.mean=pl.mean;ce.meanBy=pl.meanBy;ce.min=pl.min;ce.minBy=pl.minBy;ce.stubArray=xo.stubArray;ce.stubFalse=xo.stubFalse;ce.stubObject=xo.stubObject;ce.stubString=xo.stubString;ce.stubTrue=xo.stubTrue;ce.multiply=pl.multiply;ce.nth=Ln.nth;ce.noop=xo.noop;ce.now=V7.now;ce.pad=go.pad;ce.padEnd=go.padEnd;ce.padStart=go.padStart;ce.parseInt=go.parseInt;ce.random=TE.random;ce.reduce=Fo.reduce;ce.reduceRight=Fo.reduceRight;ce.repeat=go.repeat;ce.replace=go.replace;ce.result=Sr.result;ce.round=pl.round;ce.sample=Fo.sample;ce.size=Fo.size;ce.snakeCase=go.snakeCase;ce.some=Fo.some;ce.sortedIndex=Ln.sortedIndex;ce.sortedIndexBy=Ln.sortedIndexBy;ce.sortedIndexOf=Ln.sortedIndexOf;ce.sortedLastIndex=Ln.sortedLastIndex;ce.sortedLastIndexBy=Ln.sortedLastIndexBy;ce.sortedLastIndexOf=Ln.sortedLastIndexOf;ce.startCase=go.startCase;ce.startsWith=go.startsWith;ce.subtract=pl.subtract;ce.sum=pl.sum;ce.sumBy=pl.sumBy;ce.template=go.template;ce.times=xo.times;ce.toFinite=cr.toFinite;ce.toInteger=Br;ce.toLength=cr.toLength;ce.toLower=go.toLower;ce.toNumber=cr.toNumber;ce.toSafeInteger=cr.toSafeInteger;ce.toString=cr.toString;ce.toUpper=go.toUpper;ce.trim=go.trim;ce.trimEnd=go.trimEnd;ce.trimStart=go.trimStart;ce.truncate=go.truncate;ce.unescape=go.unescape;ce.uniqueId=xo.uniqueId;ce.upperCase=go.upperCase;ce.upperFirst=go.upperFirst;ce.each=Fo.forEach;ce.eachRight=Fo.forEachRight;ce.first=Ln.head;ME(ce,function(){var e={};return sh(ce,function(t,n){Pk.call(ce.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ce.VERSION=J7;(ce.templateSettings=go.templateSettings).imports._=ce;mc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ce[e].placeholder=ce});mc(["drop","take"],function(e,t){Jr.prototype[e]=function(n){n=n===void 0?1:oU(Br(n),0);var a=this.__filtered__&&!t?new Jr(this):this.clone();return a.__filtered__?a.__takeCount__=vx(n,a.__takeCount__):a.__views__.push({size:vx(n,kk),type:e+(a.__dir__<0?"Right":"")}),a},Jr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});mc(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==eU||n==tU;Jr.prototype[e]=function(r){var u=this.clone();return u.__iteratees__.push({iteratee:Qr(r),type:n}),u.__filtered__=u.__filtered__||a,u}});mc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Jr.prototype[e]=function(){return this[n](1).value()[0]}});mc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Jr.prototype[e]=function(){return this.__filtered__?new Jr(this):this[n](1)}});Jr.prototype.compact=function(){return this.filter(ih)};Jr.prototype.find=function(e){return this.filter(e).head()};Jr.prototype.findLast=function(e){return this.reverse().find(e)};Jr.prototype.invokeMap=ro(function(e,t){return typeof e=="function"?new Jr(this):this.map(function(n){return iy(n,e,t)})});Jr.prototype.reject=function(e){return this.filter(wb(Qr(e)))};Jr.prototype.slice=function(e,t){e=Br(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Jr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Br(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Jr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Jr.prototype.toArray=function(){return this.take(kk)};sh(Jr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=ce[a?"take"+(t=="last"?"Right":""):t],u=a||/^find/.test(t);r&&(ce.prototype[t]=function(){var c=this.__wrapped__,v=a?[1]:arguments,f=c instanceof Jr,g=v[0],b=f||Oi(c),_=function(D){var I=r.apply(ce,ty([D],v));return a&&x?I[0]:I};b&&n&&typeof g=="function"&&g.length!=1&&(f=b=!1);var x=this.__chain__,A=!!this.__actions__.length,M=u&&!x,S=f&&!A;if(!u&&b){c=S?c:new Jr(this);var E=e.apply(c,v);return E.__actions__.push({func:xb,args:[_],thisArg:void 0}),new Du(E,x)}return M&&S?e.apply(this,v):(E=this.thru(_),M?a?E.value()[0]:E.value():E)})});mc(["pop","push","shift","sort","splice","unshift"],function(e){var t=nU[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);ce.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var u=this.value();return t.apply(Oi(u)?u:[],r)}return this[n](function(c){return t.apply(Oi(c)?c:[],r)})}});sh(Jr.prototype,function(e,t){var n=ce[t];if(n){var a=n.name+"";Pk.call(_v,a)||(_v[a]=[]),_v[a].push({name:t,func:n})}});_v[hb(void 0,Q7).name]=[{name:"wrapper",func:void 0}];Jr.prototype.clone=W7;Jr.prototype.reverse=G7;Jr.prototype.value=Z7;ce.prototype.at=bc.at;ce.prototype.chain=bc.wrapperChain;ce.prototype.commit=bc.commit;ce.prototype.next=bc.next;ce.prototype.plant=bc.plant;ce.prototype.reverse=bc.reverse;ce.prototype.toJSON=ce.prototype.valueOf=ce.prototype.value=bc.value;ce.prototype.first=ce.prototype.head;hx&&(ce.prototype[hx]=bc.toIterator);const iU="data:image/svg+xml,%3csvg%20width='27'%20height='20'%20viewBox='0%200%2027%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.6667%203.33329H3.66667V16.6666H23.6667V3.33329ZM3.66667%201.66663C2.74619%201.66663%202%202.41282%202%203.33329V16.6666C2%2017.5871%202.74619%2018.3333%203.66667%2018.3333H23.6667C24.5871%2018.3333%2025.3333%2017.5871%2025.3333%2016.6666V3.33329C25.3333%202.41282%2024.5871%201.66663%2023.6667%201.66663H3.66667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.2196%206.91331H18.2767L19.4%209.89549L20.4758%206.91331L22.5375%206.83044L19.4%2014.8138L17.3565%2014.8966L18.437%2012.3756L16.2196%206.91331Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.1034%207.06327C13.1302%207.04839%2013.1574%207.03404%2013.1848%207.02023C13.5166%206.84295%2013.8759%206.77344%2014.2468%206.77344C14.9611%206.77344%2015.5729%206.97047%2015.9992%207.43635C16.419%207.89521%2016.5934%208.54454%2016.5934%209.3101V12.9168H14.7001V9.4001C14.7001%209.01738%2014.6103%208.80651%2014.5052%208.69229C14.4059%208.58445%2014.2319%208.49677%2013.9067%208.49677C13.7078%208.49677%2013.5468%208.55932%2013.4114%208.69473C13.2534%208.85274%2013.1382%209.08146%2013.1034%209.41091V12.9168H11.2101V6.91344H13.1034V7.06327Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.01665%2012.6833V12.9168H10.83V9.2001C10.83%208.50266%2010.6523%207.90623%2010.247%207.47482L10.2458%207.47354C9.77726%206.97898%209.08554%206.77344%208.26332%206.77344C7.58671%206.77344%206.97894%206.88784%206.50606%207.18452C5.95355%207.51308%205.61381%208.04132%205.48446%208.69979L5.39493%209.15558L6.60828%209.25958C6.45695%209.32645%206.3157%209.40545%206.18578%209.49774C5.6067%209.89006%205.31665%2010.4724%205.31665%2011.1801C5.31665%2011.727%205.52656%2012.1949%205.95194%2012.5464C6.34831%2012.8992%206.87585%2013.0568%207.48332%2013.0568C7.99851%2013.0568%208.45994%2012.9557%208.86073%2012.7671L8.86966%2012.7628C8.91982%2012.7377%208.96882%2012.7112%209.01665%2012.6833ZM7.33362%209.04021C7.60234%208.98907%207.88998%208.96154%208.19236%208.95358L8.93243%208.93444C8.90662%208.77431%208.84911%208.68249%208.7882%208.62627C8.69958%208.54447%208.527%208.46677%208.19332%208.46677C7.90772%208.46677%207.72064%208.51963%207.60769%208.58739L7.60328%208.59004C7.46993%208.66783%207.38847%208.77506%207.35134%208.95452L7.33362%209.04021ZM8.93782%2010.5386L8.28478%2010.5566L8.28191%2010.5567C7.83203%2010.566%207.5658%2010.6502%207.4222%2010.7499C7.3054%2010.831%207.23998%2010.9409%207.23998%2011.1401C7.23998%2011.2037%207.25413%2011.2438%207.32642%2011.2991L7.3313%2011.3029L7.33606%2011.3067C7.40443%2011.3623%207.52395%2011.4134%207.72332%2011.4134C8.07815%2011.4134%208.36218%2011.3062%208.60462%2011.1017C8.80129%2010.9357%208.90794%2010.7499%208.93782%2010.5386Z'%20fill='%23646A73'/%3e%3c/svg%3e",aU="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.6667%203.33329H3.33335V16.6666H16.6667V3.33329ZM3.33335%201.66663C2.41288%201.66663%201.66669%202.41282%201.66669%203.33329V16.6666C1.66669%2017.5871%202.41288%2018.3333%203.33335%2018.3333H16.6667C17.5872%2018.3333%2018.3334%2017.5871%2018.3334%2016.6666V3.33329C18.3334%202.41282%2017.5872%201.66663%2016.6667%201.66663H3.33335Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.33%205.83667H15.2233V13.95H13.33V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.83%205.83667H12.7233V13.95H10.83V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.51665%2013.7165V13.95H10.33V10.2333C10.33%209.53587%2010.1523%208.93943%209.747%208.50803L9.7458%208.50675C9.27726%208.01218%208.58554%207.80664%207.76332%207.80664C7.08671%207.80664%206.47894%207.92104%206.00606%208.21772C5.45355%208.54628%205.11381%209.07452%204.98446%209.733L4.89493%2010.1888L6.10828%2010.2928C5.95695%2010.3597%205.8157%2010.4386%205.68578%2010.5309C5.1067%2010.9233%204.81665%2011.5057%204.81665%2012.2133C4.81665%2012.7602%205.02656%2013.2281%205.45194%2013.5796C5.84831%2013.9324%206.37585%2014.09%206.98332%2014.09C7.49851%2014.09%207.95994%2013.9889%208.36073%2013.8003L8.36966%2013.796C8.41982%2013.7709%208.46882%2013.7444%208.51665%2013.7165ZM6.83361%2010.0734C7.10234%2010.0223%207.38998%209.99474%207.69236%209.98678L8.43243%209.96764C8.40662%209.80751%208.3491%209.71569%208.2882%209.65948C8.19958%209.57767%208.027%209.49997%207.69332%209.49997C7.40772%209.49997%207.22064%209.55283%207.10769%209.6206L7.10328%209.62324C6.96993%209.70103%206.88847%209.80826%206.85134%209.98773L6.83361%2010.0734ZM8.43782%2011.5718L7.78478%2011.5898L7.78191%2011.5899C7.33203%2011.5992%207.0658%2011.6834%206.9222%2011.7831C6.8054%2011.8642%206.73998%2011.9741%206.73998%2012.1733C6.73998%2012.2369%206.75413%2012.277%206.82642%2012.3323L6.8313%2012.3361L6.83606%2012.3399C6.90443%2012.3955%207.02395%2012.4466%207.22332%2012.4466C7.57815%2012.4466%207.86218%2012.3394%208.10462%2012.1349C8.30129%2011.9689%208.40794%2011.7831%208.43782%2011.5718Z'%20fill='%23646A73'/%3e%3c/svg%3e",lU={class:"list flex-wrap"},uU=["onClick","onMousedown"],sU=["src"],cU=["title"],fU={class:"flex-between"},dU={class:"flex align-center"},pU=["src"],hU=["title"],vU={key:0,class:"status-tag",style:{"margin-left":"auto"}},mU=rr({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=Ge(""),u=Ge([]);function c(v,f){return f.length?v.filter(g=>g.name.toLowerCase().includes(f.toLowerCase())):v}return fb([()=>r.value,()=>n.list],()=>{u.value=c(n.list,r.value)}),(v,f)=>{const g=J("el-input"),b=J("el-avatar"),_=J("el-tag"),x=J("el-text"),A=J("el-popover"),M=J("el-empty");return Oe(),en(Or,null,[k(g,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=S=>r.value=S),modelModifiers:{trim:!0},placeholder:v.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),ee("div",lU,[u.value.length?(Oe(!0),en(Or,{key:0},io(u.value,S=>(Oe(),at(A,{key:S.id,placement:"right",width:280,"show-after":500},{reference:C(()=>[ee("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:nn(E=>a("clickNodes",S),["stop"]),onMousedown:nn(E=>a("onmousedown",S),["stop"])},[sr(hw)(S==null?void 0:S.icon)?(Oe(),at(b,{key:0,shape:"square",size:20,style:{background:"none"}},{default:C(()=>[ee("img",{src:sr(Zp)(S==null?void 0:S.icon,sr(Zp)("./favicon.ico")),alt:""},null,8,sU)]),_:2},1024)):(Oe(),at(b,{key:1,class:"avatar-green",shape:"square",size:20},{default:C(()=>f[1]||(f[1]=[ee("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[1]})),ee("span",{class:"ml-8 ellipsis",title:S.name},_e(S.name),9,cU)],40,uU)]),default:C(()=>[ee("div",fU,[ee("div",dU,[sr(hw)(S==null?void 0:S.icon)?(Oe(),at(b,{key:0,shape:"square",size:20,style:{background:"none"}},{default:C(()=>[ee("img",{src:sr(Zp)(S==null?void 0:S.icon,sr(Zp)("./favicon.ico")),alt:""},null,8,pU)]),_:2},1024)):(Oe(),at(b,{key:1,class:"avatar-green",shape:"square",size:20},{default:C(()=>f[2]||(f[2]=[ee("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})),ee("span",{class:"font-medium ml-8 break-all",title:S.name},_e(S.name),9,hU)]),S.type?(Oe(),en("div",vU,[sr(eE)(S.type)?(Oe(),at(_,{key:0,class:"warning-tag"},{default:C(()=>[ct(_e(v.$t("views.application.workflow")),1)]),_:1})):(Oe(),at(_,{key:1,class:"blue-tag"},{default:C(()=>[ct(_e(v.$t("views.application.simple")),1)]),_:1}))])):kn("",!0)]),k(x,{type:"info",size:"small",class:"mt-4"},{default:C(()=>[ct(_e(S.desc),1)]),_:2},1024)]),_:2},1024))),128)):(Oe(),at(M,{key:1,description:v.$t("common.noData")},null,8,["description"]))])],64)}}}),mx=Yd(mU,[["__scopeId","data-v-deb1c287"]]),yU={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},gU={key:0},bU={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},_U=["onClick","onMousedown"],wU={class:"lighter"},EU={class:"flex align-center mb-8"},OU={class:"lighter color-text-primary"},SU={key:1,class:"ml-16 mt-8"},xU=rr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=Lu("workflowMode"),a=aa(),{user:r,folder:u}=tE(),c=yI(n||Xj.Application),v=Ge(""),f=e,g=t,b=Zn(()=>a.path.includes("resource-management")?"systemManage":"workspace");Zn(()=>tM.tool[b.value]);const _=Ge(!1),x=Ge("base"),A=Zn(()=>{if(!v.value)return c||[];const H=v.value.toLowerCase();return(c||[]).reduce((W,z)=>{const Y=z.list.filter(q=>q.label.toLowerCase().includes(H));return Y.length&&W.push({...z,list:Y}),W},[])});function M(H,W,z){var Y;W&&(H.properties.nodeName=W.name,z=="tool"&&(H.properties.nodeData={...W,toolLibId:W.id,inputFieldList:W.inputFieldList.map(q=>({...q,value:q.source=="reference"?[]:""}))}),z=="application"&&(H.properties.nodeData={name:W.name,icon:W.icon,applicationId:W.id})),(Y=f.workflowRef)==null||Y.addNode(H),g("clickNodes",H)}function S(H,W,z){var Y;W&&(H.properties.nodeName=W.name,z=="tool"&&(H.properties.nodeData={...W,toolLibId:W.id,inputFieldList:W.inputFieldList.map(q=>({...q,value:q.source=="reference"?[]:""}))}),z=="application"&&(eE(W.type)?(W.work_flow.nodes[0].properties.nodeData.file_upload_setting,H.properties.nodeData={name:W.name,icon:W.icon,applicationId:W.id}):H.properties.nodeData={name:W.name,icon:W.icon,applicationId:W.id})),(Y=f.workflowRef)==null||Y.onmousedown(H),g("onmousedown",H)}const E=Ge([]),D=Ge([]);async function I(){var W;const H=await u.asyncGetFolder(FS.TOOL,{},_);E.value=H.data,u.setCurrentFolder(((W=H.data)==null?void 0:W[0])||{})}async function B(){var W,z,Y,q;const H=await So({type:"tool",isShared:((W=u.currentFolder)==null?void 0:W.id)==="share",systemType:"workspace"}).getToolList({folderId:((z=u.currentFolder)==null?void 0:z.id)||r.getWorkspaceId(),toolType:"CUSTOM"});D.value=((Y=H.data)==null?void 0:Y.tools)||H.data||[],D.value=(q=D.value)==null?void 0:q.filter(oe=>oe.isActive)}const $=Ge([]),j=Ge([]);function U(){u.asyncGetFolder(FS.APPLICATION,{},_).then(H=>{var W;$.value=H.data,u.setCurrentFolder(((W=H.data)==null?void 0:W[0])||{})})}async function K(){var W;const H=await So({type:"application",systemType:"workspace"}).getAllApplication({folderId:((W=u.currentFolder)==null?void 0:W.id)||r.getWorkspaceId()});j.value=H.data.filter(z=>z.id!==f.id&&z.isPublish)}async function Q(H){H==="tool"?(await I(),B()):H==="application"&&(U(),K())}return Hr(()=>{}),(H,W)=>{const z=J("search"),Y=J("el-icon"),q=J("el-input"),oe=J("el-text"),ie=J("el-popover"),Pe=J("el-scrollbar"),we=J("el-tab-pane"),be=J("el-tabs");return za((Oe(),en("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:qj({width:(x.value==="base","400px")})},[k(be,{modelValue:x.value,"onUpdate:modelValue":W[5]||(W[5]=ye=>x.value=ye),class:"workflow-dropdown-tabs",onTabChange:Q},{default:C(()=>[za(ee("div",yU,[k(q,{modelValue:v.value,"onUpdate:modelValue":W[0]||(W[0]=ye=>v.value=ye),class:"mr-12 ml-12",placeholder:H.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:C(()=>[k(Y,{class:"el-input__icon"},{default:C(()=>[k(z)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[Qp,x.value==="base"]]),k(we,{label:H.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:C(()=>[k(Pe,{height:"400"},{default:C(()=>[A.value.length>0?(Oe(),en("div",gU,[(Oe(!0),en(Or,null,io(A.value,(ye,Xe)=>(Oe(),en(Or,{key:Xe},[k(oe,{type:"info",size:"small",class:"color-secondary ml-12"},{default:C(()=>[ct(_e(ye.label),1)]),_:2},1024),ee("div",bU,[(Oe(!0),en(Or,null,io(ye.list,(Ze,yt)=>(Oe(),at(ie,{key:yt,placement:"right",width:280,"show-after":500},{reference:C(()=>[ee("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:nn(Be=>M(Ze),["stop"]),onMousedown:nn(Be=>S(Ze),["stop"])},[(Oe(),at(Vm(sr(Wm)(`${Ze.type}-icon`)),{class:"mr-8",size:20})),ee("div",wU,_e(Ze.label),1)],40,_U)]),default:C(()=>[ee("div",EU,[(Oe(),at(Vm(sr(Wm)(`${Ze.type}-icon`)),{class:"mr-8",size:32})),ee("div",OU,_e(Ze.label),1)]),k(oe,{type:"info",size:"small",class:"color-secondary lighter"},{default:C(()=>[ct(_e(Ze.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(Oe(),en("div",SU,[k(oe,{type:"info"},{default:C(()=>[ct(_e(H.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),k(we,{label:H.$t("views.tool.title"),name:"tool"},{default:C(()=>[k(Pe,{height:"450"},{default:C(()=>[k(mx,{list:D.value,onClickNodes:W[1]||(W[1]=ye=>M(sr(BS),ye,"tool")),onOnmousedown:W[2]||(W[2]=ye=>S(sr(BS),ye,"tool"))},null,8,["list"])]),_:1})]),_:1},8,["label"]),k(we,{label:H.$t("views.application.title"),name:"application"},{default:C(()=>[k(Pe,{height:"450"},{default:C(()=>[k(mx,{list:j.value,onClickNodes:W[3]||(W[3]=ye=>M(sr(VS),ye,"application")),onOnmousedown:W[4]||(W[4]=ye=>S(sr(VS),ye,"application"))},null,8,["list"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[Qp,e.show]])}}}),Nk=Yd(xU,[["__scopeId","data-v-2b2bdfb7"]]),AU={class:"flex-between"},TU={class:"ellipsis-1 break-all"},MU={key:0,src:iU,alt:""},kU={key:1,src:aU,alt:""},PU={style:{width:"280px"},class:"p-12-16"},NU={class:"mt-8 lighter"},RU={class:"title-decoration-1 mb-8 mt-8"},CU=["onMouseenter"],DU={class:"break-all"},jU={class:"dialog-footer"},IU=rr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const t=aa(),{params:{id:n}}=t,a=Ge({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),r=Ge(!1),u=Ge(),c=Ge(),v=Ge(!1),f=Ge({title:""}),g=Zn({set:W=>{Ne.set(j.nodeModel.properties,"condition",W)},get:()=>j.nodeModel.properties.condition?j.nodeModel.properties.condition:(Ne.set(j.nodeModel.properties,"condition","AND"),!0)}),b=Zn({set:W=>{Ne.set(j.nodeModel.properties,"showNode",W)},get:()=>j.nodeModel.properties.showNode!==void 0?j.nodeModel.properties.showNode:(Ne.set(j.nodeModel.properties,"showNode",!0),!0)}),_=W=>{W.ctrlKey||W.metaKey||W.stopPropagation()},x=Zn(()=>j.nodeModel.properties.status?j.nodeModel.properties.status:200);function A(){f.value.title=j.nodeModel.properties.nodeName,v.value=!0}const M=async W=>{W&&await W.validate(z=>{var Y;z&&((Y=j.nodeModel.graphModel.nodes.filter(q=>q.id!==j.nodeModel.id))!=null&&Y.some(q=>q.properties.nodeName===f.value.title)?mi(Ot("views.applicationWorkflow.tip.repeatedNodeError")):(Ne.set(j.nodeModel.properties,"nodeName",f.value.title),v.value=!1,W.resetFields()))})},S=W=>{W!=null&&W.shiftKey||j.nodeModel.graphModel.clearSelectElements(),Ne.set(j.nodeModel,"isSelected",!j.nodeModel.isSelected),Ne.set(j.nodeModel,"isHovered",!j.nodeModel.isSelected),j.nodeModel.graphModel.toFront(j.nodeModel.id)},E=Ge(null),D=()=>{j.nodeModel.graphModel.clearSelectElements();const W=j.nodeModel.graphModel.cloneNode(j.nodeModel.id);Ne.set(W,"isSelected",!0),Ne.set(W,"isHovered",!0),j.nodeModel.graphModel.toFront(W.id)},I=()=>{nE(Ot("common.tip"),Ot("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Ot("common.confirm"),confirmButtonClass:"danger"}).then(()=>{j.nodeModel.type===ei.LoopNode&&j.nodeModel.graphModel.getNodeOutgoingNode(j.nodeModel.id).forEach(z=>{z.type==="loop-body-node"&&j.nodeModel.graphModel.deleteNode(z.id)}),j.nodeModel.graphModel.deleteNode(j.nodeModel.id)}),j.nodeModel.graphModel.eventCenter.emit("delete_node")},B=W=>{W.height&&(j.nodeModel.virtual||(a.value.stepContainerHeight=W.height,j.nodeModel.setHeight(a.value.stepContainerHeight)))};function $(W){var q,oe,ie;const z=W.properties.width?W.properties.width:214,Y=j.nodeModel.graphModel.addNode({type:W.type,properties:W.properties,x:((q=u.value)==null?void 0:q.x)+z/2+200,y:((oe=u.value)==null?void 0:oe.y)-W.height});j.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:j.nodeModel.id,sourceAnchorId:(ie=u.value)==null?void 0:ie.id,targetNodeId:Y.id,targetAnchorId:Y.id+"_left"}),H()}const j=e,U=Zn(()=>{var W;return j.nodeModel.properties.config.fields?(W=j.nodeModel.properties.config.fields)==null?void 0:W.map(Y=>({label:Y.label,value:Y.value,globeLabel:`{{${j.nodeModel.properties.nodeName}.${Y.value}}}`,globeValue:`{{context['${j.nodeModel.id}'].${Y.value}}}`})):[]});function K(W){return![ei.Start,ei.Base,ei.LoopStartNode.toString()].includes(W)}const Q=W=>{r.value=!0,u.value=W},H=()=>{r.value=!1,u.value=void 0};return Hr(()=>{Ne.set(j.nodeModel,"openNodeMenu",W=>{r.value?H():Q(W)})}),(W,z)=>{var Se;const Y=J("ArrowDownBold"),q=J("el-icon"),oe=J("el-button"),ie=J("el-option"),Pe=J("el-select"),we=J("el-dropdown"),be=J("AppIcon"),ye=J("el-dropdown-item"),Xe=J("el-dropdown-menu"),Ze=J("el-alert"),yt=J("el-tooltip"),Be=J("el-collapse-transition"),qt=J("el-input"),Yt=J("el-form-item"),Pt=J("el-form"),An=J("el-dialog"),$e=eh("resize");return Oe(),en("div",{onMousedown:S,class:"workflow-node-container p-16",style:{overflow:"visible"}},[ee("div",{class:fc(["step-container app-card p-16",{isSelected:j.nodeModel.isSelected,error:x.value!==200}]),style:{overflow:"visible"}},[za((Oe(),en("div",null,[ee("div",AU,[ee("div",{class:"flex align-center",onDragstart:z[0]||(z[0]=nn(()=>{},["prevent"])),onDrag:z[1]||(z[1]=nn(()=>{},["prevent"])),onDragover:z[2]||(z[2]=nn(()=>{},["prevent"])),onDragend:z[3]||(z[3]=nn(()=>{},["prevent"])),style:{width:"69%"}},[(Oe(),at(Vm(sr(Wm)(`${W.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(Se=W.nodeModel)==null?void 0:Se.properties.node_data},null,8,["item"])),ee("h4",TU,_e(W.nodeModel.properties.nodeName),1)],32),ee("div",{onMousemove:z[6]||(z[6]=nn(()=>{},["stop"])),onMousedown:z[7]||(z[7]=nn(()=>{},["stop"])),onKeydown:z[8]||(z[8]=nn(()=>{},["stop"])),onClick:z[9]||(z[9]=nn(()=>{},["stop"]))},[k(oe,{text:"",onClick:z[4]||(z[4]=Ae=>b.value=!b.value)},{default:C(()=>[k(q,{class:fc(["arrow-icon color-secondary",b.value?"rotate-180":""])},{default:C(()=>[k(Y)]),_:1},8,["class"])]),_:1}),K(W.nodeModel.type)?(Oe(),at(we,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:C(()=>[ee("div",PU,[ee("h5",null,_e(W.$t("views.applicationWorkflow.condition.title")),1),ee("p",NU,[ee("span",null,_e(W.$t("views.applicationWorkflow.condition.front")),1),k(Pe,{modelValue:g.value,"onUpdate:modelValue":z[5]||(z[5]=Ae=>g.value=Ae),size:"small",style:{width:"60px",margin:"0 8px"}},{default:C(()=>[k(ie,{label:W.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),k(ie,{label:W.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),ee("span",null,_e(W.$t("views.applicationWorkflow.condition.text")),1)])])]),default:C(()=>[k(oe,{text:""},{default:C(()=>[g.value==="OR"?(Oe(),en("img",MU)):kn("",!0),g.value==="AND"?(Oe(),en("img",kU)):kn("",!0)]),_:1})]),_:1})):kn("",!0),K(W.nodeModel.type)?(Oe(),at(we,{key:1,teleported:!1,trigger:"click"},{dropdown:C(()=>[k(Xe,{style:{"min-width":"80px"}},{default:C(()=>[k(ye,{onClick:A,class:"p-8"},{default:C(()=>[ct(_e(W.$t("common.rename")),1)]),_:1}),k(ye,{onClick:D,class:"p-8"},{default:C(()=>[ct(_e(W.$t("common.copy")),1)]),_:1}),k(ye,{onClick:I,class:"border-t p-8"},{default:C(()=>[ct(_e(W.$t("common.delete")),1)]),_:1})]),_:1})]),default:C(()=>[k(oe,{text:""},{default:C(()=>[k(be,{iconName:"app-more",class:"color-secondary"})]),_:1})]),_:1})):kn("",!0)],32)]),k(Be,null,{default:C(()=>[za(ee("div",{onMousedown:z[11]||(z[11]=nn(()=>{},["stop"])),onKeydown:z[12]||(z[12]=nn(()=>{},["stop"])),onClick:z[13]||(z[13]=nn(()=>{},["stop"])),class:"mt-16"},[x.value!=200?(Oe(),at(Ze,{key:0,class:"mb-16",title:j.nodeModel.type==="application-node"?W.$t("views.applicationWorkflow.tip.applicationNodeError"):W.$t("views.applicationWorkflow.tip.toolNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):kn("",!0),Yj(W.$slots,"default",{},void 0,!0),U.value.length>0?(Oe(),en(Or,{key:1},[ee("h5",RU,_e(W.$t("common.param.outputParam")),1),(Oe(!0),en(Or,null,io(U.value,(Ae,qe)=>(Oe(),en("div",{key:qe,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_t=>E.value=qe,onMouseleave:z[10]||(z[10]=_t=>E.value=null)},[ee("span",DU,_e(Ae.label)+" "+_e("{"+Ae.value+"}"),1),E.value===qe?(Oe(),at(yt,{key:0,effect:"dark",content:W.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:C(()=>[k(oe,{link:"",onClick:_t=>sr(vw)(Ae.globeLabel),style:{padding:"0"}},{default:C(()=>[k(be,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)],40,CU))),128))],64)):kn("",!0)],544),[[Qp,b.value]])]),_:3})])),[[$e,B]])],2),k(Be,null,{default:C(()=>[r.value?(Oe(),at(Nk,{key:0,onMousemove:z[14]||(z[14]=nn(()=>{},["stop"])),onMousedown:z[15]||(z[15]=nn(()=>{},["stop"])),onClick:z[16]||(z[16]=nn(()=>{},["stop"])),onWheel:_,show:r.value,id:sr(n),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:$},null,8,["show","id"])):kn("",!0)]),_:1}),k(An,{title:W.$t("views.applicationWorkflow.nodeName"),modelValue:v.value,"onUpdate:modelValue":z[21]||(z[21]=Ae=>v.value=Ae),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:z[22]||(z[22]=nn(()=>{},["prevent"]))},{footer:C(()=>[ee("span",jU,[k(oe,{onClick:z[19]||(z[19]=nn(Ae=>v.value=!1,["prevent"]))},{default:C(()=>[ct(_e(W.$t("common.cancel")),1)]),_:1}),k(oe,{type:"primary",onClick:z[20]||(z[20]=Ae=>M(c.value))},{default:C(()=>[ct(_e(W.$t("common.save")),1)]),_:1})])]),default:C(()=>[k(Pt,{"label-position":"top",ref_key:"titleFormRef",ref:c,model:f.value},{default:C(()=>[k(Yt,{prop:"title",rules:[{required:!0,message:W.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:C(()=>[k(qt,{modelValue:f.value.title,"onUpdate:modelValue":z[17]||(z[17]=Ae=>f.value.title=Ae),onBlur:z[18]||(z[18]=Ae=>f.value.title=f.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),Ho=Yd(IU,[["__scopeId","data-v-67b9020e"]]),LU={class:"title-decoration-1 mb-8"},FU={class:"flex-between w-full"},$U={class:"flex align-center"},UU={class:"mr-4"},BU={class:"flex-between"},VU={class:"flex-between mb-16"},WU={class:"lighter"},GU={key:0,class:"w-full mb-16"},zU={class:"flex align-center",style:{"line-height":"20px"}},HU=["src"],XU=["title"],qU={class:"flex-between"},YU={class:"mr-4"},KU={class:"flex"},ZU={class:"flex-between w-full"},JU={class:"flex align-center"},QU={class:"mr-4"},eB=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=q=>q.ctrlKey===!0?(q.preventDefault(),!0):(q.stopPropagation(),!0);function c(q){Ne.set(x.nodeModel.properties.nodeData,"system",q)}function v(q){Ne.set(x.nodeModel.properties.nodeData,"prompt",q)}const f=q=>{var oe;q?(oe=S.value)==null||oe.reset_default(q,a):j({})},b={modelId:"",system:"",prompt:`${Ot("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Ot("views.applicationWorkflow.nodes.searchKnowledgeNode.label")}.data}}
${Ot("views.problem.title")}：
{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:1,isResult:!0,temperature:null,maxTokens:null,dialogueType:"WORKFLOW",modelSetting:{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}},_=Zn({get:()=>x.nodeModel.properties.nodeData?(x.nodeModel.properties.nodeData.modelSetting||Ne.set(x.nodeModel.properties.nodeData,"modelSetting",{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}),x.nodeModel.properties.nodeData):(Ne.set(x.nodeModel.properties,"nodeData",b),x.nodeModel.properties.nodeData),set:q=>{Ne.set(x.nodeModel.properties,"nodeData",q)}}),x=e,A=Ge(),M=Ge(null),S=Ge(),E=Ge(),D=()=>{var q;return(q=A.value)==null?void 0:q.validate().catch(oe=>Promise.reject({node:x.nodeModel,errMessage:oe}))},I=t();function B(){var oe;const q=r.value==="systemManage"?{modelType:"LLM",workspaceId:(oe=I.value)==null?void 0:oe.workspaceId}:{modelType:"LLM"};So({type:"model",systemType:r.value}).getSelectModelList(q).then(ie=>{M.value=Ne.groupBy(ie==null?void 0:ie.data,"provider")})}const $=q=>{var oe;q&&((oe=S.value)==null||oe.open(q,a,_.value.modelParamsSetting))};function j(q){Ne.set(x.nodeModel.properties.nodeData,"modelParamsSetting",q)}function U(q){let oe=Ne.cloneDeep(x.nodeModel.properties.nodeData.modelSetting);oe={...oe,...q},Ne.set(x.nodeModel.properties.nodeData,"modelSetting",oe)}const K=Ge();function Q(){K.value.open(_.value.toolIds)}function H(q){Ne.set(x.nodeModel.properties.nodeData,"toolIds",q.toolIds)}function W(q){const oe=x.nodeModel.properties.nodeData.toolIds.filter(ie=>ie!==q);Ne.set(x.nodeModel.properties.nodeData,"toolIds",oe)}const z=Ge([]);function Y(){var oe;const q=r.value==="systemManage"?{scope:"WORKSPACE",workspaceId:(oe=I.value)==null?void 0:oe.workspaceId}:{scope:"WORKSPACE"};So({type:"tool",systemType:r.value}).getAllToolList(q).then(ie=>{z.value=[...ie.data.shared_tools,...ie.data.tools].filter(Pe=>Pe.isActive)})}return Hr(()=>{var q,oe;B(),typeof((q=x.nodeModel.properties.nodeData)==null?void 0:q.isResult)>"u"&&gc(x.nodeModel)&&Ne.set(x.nodeModel.properties.nodeData,"isResult",!0),Ne.set(x.nodeModel,"validate",D),_.value.dialogueType||(_.value.dialogueType="WORKFLOW"),((oe=x.nodeModel.properties.nodeData)==null?void 0:oe.toolOutputEnable)===void 0&&Ne.set(x.nodeModel.properties.nodeData,"toolOutputEnable",!0),Y()}),(q,oe)=>{const ie=J("el-button"),Pe=J("el-form-item"),we=J("el-tooltip"),be=J("el-option"),ye=J("el-select"),Xe=J("el-input-number"),Ze=J("Plus"),yt=J("el-icon"),Be=J("el-avatar"),qt=J("ToolIcon"),Yt=J("Close"),Pt=J("el-switch"),An=J("el-form"),$e=J("el-card");return Oe(),at(Ho,{nodeModel:q.nodeModel},{default:C(()=>[ee("h5",LU,_e(q.$t("views.applicationWorkflow.nodeSetting")),1),k($e,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(An,{onSubmit:oe[12]||(oe[12]=nn(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:A,"hide-required-asterisk":""},{default:C(()=>{var Se;return[k(Pe,{label:q.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:q.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",FU,[ee("div",null,[ee("span",null,[ct(_e(q.$t("views.application.form.aiModel.label")),1),oe[13]||(oe[13]=ee("span",{class:"color-danger"},"*",-1))])]),k(ie,{disabled:!_.value.modelId,type:"primary",link:"",onClick:oe[0]||(oe[0]=Ae=>$(_.value.modelId)),onRefreshForm:j},{default:C(()=>[k(yo,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(th,{onChange:f,onWheel:u,teleported:!1,modelValue:_.value.modelId,"onUpdate:modelValue":oe[1]||(oe[1]=Ae=>_.value.modelId=Ae),placeholder:q.$t("views.application.form.aiModel.placeholder"),options:M.value,onSubmitModel:B,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(Pe,{label:q.$t("views.application.form.roleSettings.label")},{default:C(()=>[k(pc,{title:q.$t("views.application.form.roleSettings.label"),modelValue:_.value.system,"onUpdate:modelValue":oe[2]||(oe[2]=Ae=>_.value.system=Ae),style:{height:"100px"},onSubmitDialog:c,placeholder:q.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(Pe,{label:q.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:q.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[ee("div",$U,[ee("div",UU,[ee("span",null,[ct(_e(q.$t("views.application.form.prompt.label")),1),oe[14]||(oe[14]=ee("span",{class:"color-danger"},"*",-1))])]),k(we,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(q.$t("views.application.form.prompt.tooltip")),1)]),default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(pc,{onWheel:u,title:q.$t("views.application.form.prompt.label"),modelValue:_.value.prompt,"onUpdate:modelValue":oe[3]||(oe[3]=Ae=>_.value.prompt=Ae),style:{height:"150px"},onSubmitDialog:v},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(Pe,{label:q.$t("views.application.form.historyRecord.label")},{label:C(()=>[ee("div",BU,[ee("div",null,_e(q.$t("views.application.form.historyRecord.label")),1),k(ye,{modelValue:_.value.dialogueType,"onUpdate:modelValue":oe[4]||(oe[4]=Ae=>_.value.dialogueType=Ae),type:"small",style:{width:"100px"}},{default:C(()=>[k(be,{label:q.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(be,{label:q.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[k(Xe,{modelValue:_.value.dialogueNumber,"onUpdate:modelValue":oe[5]||(oe[5]=Ae=>_.value.dialogueNumber=Ae),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),ee("div",VU,[ee("div",WU,_e(q.$t("views.tool.title")),1),ee("div",null,[k(ie,{type:"primary",class:"mr-4",link:"",onClick:Q,onRefreshForm:j},{default:C(()=>[k(yt,null,{default:C(()=>[k(Ze)]),_:1})]),_:1})])]),((Se=_.value.toolIds)==null?void 0:Se.length)>0?(Oe(),en("div",GU,[(Oe(!0),en(Or,null,io(_.value.toolIds,(Ae,qe)=>{var _t,ht,Vt,Jt;return Oe(),en("div",{key:qe,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[ee("div",zU,[(_t=sr(ws)(z.value,Ae,"id"))!=null&&_t.icon?(Oe(),at(Be,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:C(()=>{var an;return[ee("img",{src:sr(Zp)((an=sr(ws)(z.value,Ae,"id"))==null?void 0:an.icon),alt:""},null,8,HU)]}),_:2},1024)):(Oe(),at(qt,{key:1,type:(ht=sr(ws)(z.value,Ae,"id"))==null?void 0:ht.toolType,class:"mr-8",size:20},null,8,["type"])),ee("div",{class:"ellipsis",title:(Vt=sr(ws)(z.value,Ae,"id"))==null?void 0:Vt.name},_e((Jt=sr(ws)(z.value,Ae,"id"))==null?void 0:Jt.name),9,XU)]),k(ie,{text:"",onClick:an=>W(Ae)},{default:C(()=>[k(yt,null,{default:C(()=>[k(Yt)]),_:1})]),_:2},1032,["onClick"])])}),128))])):kn("",!0),_.value.mcpEnable||_.value.toolIds.length>0?(Oe(),at(Pe,{key:1,onClick:oe[7]||(oe[7]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",qU,[ee("span",YU,_e(q.$t("views.application.form.toolOutputEnable")),1),ee("div",KU,[k(Pt,{class:"ml-8",size:"small",modelValue:_.value.toolOutputEnable,"onUpdate:modelValue":oe[6]||(oe[6]=Ae=>_.value.toolOutputEnable=Ae)},null,8,["modelValue"])])])]),_:1})):kn("",!0),k(Pe,{onClick:oe[9]||(oe[9]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",ZU,[ee("div",null,[ee("span",null,_e(q.$t("views.application.form.reasoningContent.label")),1)]),ee("div",null,[k(Pt,{size:"small",modelValue:_.value.modelSetting.reasoningContentEnable,"onUpdate:modelValue":oe[8]||(oe[8]=Ae=>_.value.modelSetting.reasoningContentEnable=Ae)},null,8,["modelValue"])])])]),_:1}),k(Pe,{onClick:oe[11]||(oe[11]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",JU,[ee("div",QU,[ee("span",null,_e(q.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(we,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(q.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(Pt,{size:"small",modelValue:_.value.isResult,"onUpdate:modelValue":oe[10]||(oe[10]=Ae=>_.value.isResult=Ae)},null,8,["modelValue"])]),_:1})]}),_:1},8,["model"])]),_:1}),k(Uv,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:j},null,512),k(wI,{ref_key:"ReasoningParamSettingDialogRef",ref:E,onRefresh:U},null,512),k(EI,{ref_key:"toolDialogRef",ref:K,onRefresh:H},null,512)]),_:1},8,["nodeModel"])}}});var sg={exports:{}},yx;function tB(){return yx||(yx=1,function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(u){if(a[u])return a[u].exports;var c=a[u]={i:u,l:!1,exports:{}};return n[u].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(u,c,v){r.o(u,c)||Object.defineProperty(u,c,{enumerable:!0,get:v})},r.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},r.t=function(u,c){if(1&c&&(u=r(u)),8&c||4&c&&typeof u=="object"&&u&&u.__esModule)return u;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:u}),2&c&&typeof u!="string")for(var f in u)r.d(v,f,(function(g){return u[g]}).bind(null,f));return v},r.n=function(u){var c=u&&u.__esModule?function(){return u.default}:function(){return u};return r.d(c,"a",c),c},r.o=function(u,c){return Object.prototype.hasOwnProperty.call(u,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return j}),r.d(a,"b",function(){return $}),r.d(a,"c",function(){return Pt}),r.d(a,"d",function(){return An}),r.d(a,"e",function(){return D}),r.d(a,"f",function(){return B}),r.d(a,"g",function(){return D}),r.d(a,"h",function(){return Yt}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return qt}),r.d(a,"k",function(){return Y});var u,c,v,f,g,b,_,x={},A=[],M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function S($e,Se){for(var Ae in Se)$e[Ae]=Se[Ae];return $e}function E($e){var Se=$e.parentNode;Se&&Se.removeChild($e)}function D($e,Se,Ae){var qe,_t,ht,Vt={};for(ht in Se)ht=="key"?qe=Se[ht]:ht=="ref"?_t=Se[ht]:Vt[ht]=Se[ht];if(arguments.length>2&&(Vt.children=arguments.length>3?u.call(arguments,2):Ae),typeof $e=="function"&&$e.defaultProps!=null)for(ht in $e.defaultProps)Vt[ht]===void 0&&(Vt[ht]=$e.defaultProps[ht]);return I($e,Vt,qe,_t,null)}function I($e,Se,Ae,qe,_t){var ht={type:$e,props:Se,key:Ae,ref:qe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:_t??++v};return _t==null&&c.vnode!=null&&c.vnode(ht),ht}function B(){return{current:null}}function $($e){return $e.children}function j($e,Se){this.props=$e,this.context=Se}function U($e,Se){if(Se==null)return $e.__?U($e.__,$e.__.__k.indexOf($e)+1):null;for(var Ae;Se<$e.__k.length;Se++)if((Ae=$e.__k[Se])!=null&&Ae.__e!=null)return Ae.__e;return typeof $e.type=="function"?U($e):null}function K($e){var Se,Ae;if(($e=$e.__)!=null&&$e.__c!=null){for($e.__e=$e.__c.base=null,Se=0;Se<$e.__k.length;Se++)if((Ae=$e.__k[Se])!=null&&Ae.__e!=null){$e.__e=$e.__c.base=Ae.__e;break}return K($e)}}function Q($e){(!$e.__d&&($e.__d=!0)&&f.push($e)&&!H.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(H)}function H(){for(var $e;H.__r=f.length;)$e=f.sort(function(Se,Ae){return Se.__v.__b-Ae.__v.__b}),f=[],$e.some(function(Se){var Ae,qe,_t,ht,Vt,Jt;Se.__d&&(Vt=(ht=(Ae=Se).__v).__e,(Jt=Ae.__P)&&(qe=[],(_t=S({},ht)).__v=ht.__v+1,be(Jt,ht,_t,Ae.__n,Jt.ownerSVGElement!==void 0,ht.__h!=null?[Vt]:null,qe,Vt??U(ht),ht.__h),ye(qe,ht),ht.__e!=Vt&&K(ht)))})}function W($e,Se,Ae,qe,_t,ht,Vt,Jt,an,Kt){var rt,pn,Ue,_n,Jn,le,Qn,Pr=qe&&qe.__k||A,Xr=Pr.length;for(Ae.__k=[],rt=0;rt<Se.length;rt++)if((_n=Ae.__k[rt]=(_n=Se[rt])==null||typeof _n=="boolean"?null:typeof _n=="string"||typeof _n=="number"||typeof _n=="bigint"?I(null,_n,null,null,_n):Array.isArray(_n)?I($,{children:_n},null,null,null):_n.__b>0?I(_n.type,_n.props,_n.key,null,_n.__v):_n)!=null){if(_n.__=Ae,_n.__b=Ae.__b+1,(Ue=Pr[rt])===null||Ue&&_n.key==Ue.key&&_n.type===Ue.type)Pr[rt]=void 0;else for(pn=0;pn<Xr;pn++){if((Ue=Pr[pn])&&_n.key==Ue.key&&_n.type===Ue.type){Pr[pn]=void 0;break}Ue=null}be($e,_n,Ue=Ue||x,_t,ht,Vt,Jt,an,Kt),Jn=_n.__e,(pn=_n.ref)&&Ue.ref!=pn&&(Qn||(Qn=[]),Ue.ref&&Qn.push(Ue.ref,null,_n),Qn.push(pn,_n.__c||Jn,_n)),Jn!=null?(le==null&&(le=Jn),typeof _n.type=="function"&&_n.__k===Ue.__k?_n.__d=an=z(_n,an,$e):an=q($e,_n,Ue,Pr,Jn,an),typeof Ae.type=="function"&&(Ae.__d=an)):an&&Ue.__e==an&&an.parentNode!=$e&&(an=U(Ue))}for(Ae.__e=le,rt=Xr;rt--;)Pr[rt]!=null&&(typeof Ae.type=="function"&&Pr[rt].__e!=null&&Pr[rt].__e==Ae.__d&&(Ae.__d=U(qe,rt+1)),yt(Pr[rt],Pr[rt]));if(Qn)for(rt=0;rt<Qn.length;rt++)Ze(Qn[rt],Qn[++rt],Qn[++rt])}function z($e,Se,Ae){for(var qe,_t=$e.__k,ht=0;_t&&ht<_t.length;ht++)(qe=_t[ht])&&(qe.__=$e,Se=typeof qe.type=="function"?z(qe,Se,Ae):q(Ae,qe,qe,_t,qe.__e,Se));return Se}function Y($e,Se){return Se=Se||[],$e==null||typeof $e=="boolean"||(Array.isArray($e)?$e.some(function(Ae){Y(Ae,Se)}):Se.push($e)),Se}function q($e,Se,Ae,qe,_t,ht){var Vt,Jt,an;if(Se.__d!==void 0)Vt=Se.__d,Se.__d=void 0;else if(Ae==null||_t!=ht||_t.parentNode==null)e:if(ht==null||ht.parentNode!==$e)$e.appendChild(_t),Vt=null;else{for(Jt=ht,an=0;(Jt=Jt.nextSibling)&&an<qe.length;an+=2)if(Jt==_t)break e;$e.insertBefore(_t,ht),Vt=ht}return Vt!==void 0?Vt:_t.nextSibling}function oe($e,Se,Ae){Se[0]==="-"?$e.setProperty(Se,Ae):$e[Se]=Ae==null?"":typeof Ae!="number"||M.test(Se)?Ae:Ae+"px"}function ie($e,Se,Ae,qe,_t){var ht;e:if(Se==="style")if(typeof Ae=="string")$e.style.cssText=Ae;else{if(typeof qe=="string"&&($e.style.cssText=qe=""),qe)for(Se in qe)Ae&&Se in Ae||oe($e.style,Se,"");if(Ae)for(Se in Ae)qe&&Ae[Se]===qe[Se]||oe($e.style,Se,Ae[Se])}else if(Se[0]==="o"&&Se[1]==="n")ht=Se!==(Se=Se.replace(/Capture$/,"")),Se=Se.toLowerCase()in $e?Se.toLowerCase().slice(2):Se.slice(2),$e.l||($e.l={}),$e.l[Se+ht]=Ae,Ae?qe||$e.addEventListener(Se,ht?we:Pe,ht):$e.removeEventListener(Se,ht?we:Pe,ht);else if(Se!=="dangerouslySetInnerHTML"){if(_t)Se=Se.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Se!=="href"&&Se!=="list"&&Se!=="form"&&Se!=="tabIndex"&&Se!=="download"&&Se in $e)try{$e[Se]=Ae??"";break e}catch{}typeof Ae=="function"||(Ae!=null&&(Ae!==!1||Se[0]==="a"&&Se[1]==="r")?$e.setAttribute(Se,Ae):$e.removeAttribute(Se))}}function Pe($e){this.l[$e.type+!1](c.event?c.event($e):$e)}function we($e){this.l[$e.type+!0](c.event?c.event($e):$e)}function be($e,Se,Ae,qe,_t,ht,Vt,Jt,an){var Kt,rt,pn,Ue,_n,Jn,le,Qn,Pr,Xr,ao,Un=Se.type;if(Se.constructor!==void 0)return null;Ae.__h!=null&&(an=Ae.__h,Jt=Se.__e=Ae.__e,Se.__h=null,ht=[Jt]),(Kt=c.__b)&&Kt(Se);try{e:if(typeof Un=="function"){if(Qn=Se.props,Pr=(Kt=Un.contextType)&&qe[Kt.__c],Xr=Kt?Pr?Pr.props.value:Kt.__:qe,Ae.__c?le=(rt=Se.__c=Ae.__c).__=rt.__E:("prototype"in Un&&Un.prototype.render?Se.__c=rt=new Un(Qn,Xr):(Se.__c=rt=new j(Qn,Xr),rt.constructor=Un,rt.render=Be),Pr&&Pr.sub(rt),rt.props=Qn,rt.state||(rt.state={}),rt.context=Xr,rt.__n=qe,pn=rt.__d=!0,rt.__h=[]),rt.__s==null&&(rt.__s=rt.state),Un.getDerivedStateFromProps!=null&&(rt.__s==rt.state&&(rt.__s=S({},rt.__s)),S(rt.__s,Un.getDerivedStateFromProps(Qn,rt.__s))),Ue=rt.props,_n=rt.state,pn)Un.getDerivedStateFromProps==null&&rt.componentWillMount!=null&&rt.componentWillMount(),rt.componentDidMount!=null&&rt.__h.push(rt.componentDidMount);else{if(Un.getDerivedStateFromProps==null&&Qn!==Ue&&rt.componentWillReceiveProps!=null&&rt.componentWillReceiveProps(Qn,Xr),!rt.__e&&rt.shouldComponentUpdate!=null&&rt.shouldComponentUpdate(Qn,rt.__s,Xr)===!1||Se.__v===Ae.__v){rt.props=Qn,rt.state=rt.__s,Se.__v!==Ae.__v&&(rt.__d=!1),rt.__v=Se,Se.__e=Ae.__e,Se.__k=Ae.__k,Se.__k.forEach(function(bo){bo&&(bo.__=Se)}),rt.__h.length&&Vt.push(rt);break e}rt.componentWillUpdate!=null&&rt.componentWillUpdate(Qn,rt.__s,Xr),rt.componentDidUpdate!=null&&rt.__h.push(function(){rt.componentDidUpdate(Ue,_n,Jn)})}rt.context=Xr,rt.props=Qn,rt.state=rt.__s,(Kt=c.__r)&&Kt(Se),rt.__d=!1,rt.__v=Se,rt.__P=$e,Kt=rt.render(rt.props,rt.state,rt.context),rt.state=rt.__s,rt.getChildContext!=null&&(qe=S(S({},qe),rt.getChildContext())),pn||rt.getSnapshotBeforeUpdate==null||(Jn=rt.getSnapshotBeforeUpdate(Ue,_n)),ao=Kt!=null&&Kt.type===$&&Kt.key==null?Kt.props.children:Kt,W($e,Array.isArray(ao)?ao:[ao],Se,Ae,qe,_t,ht,Vt,Jt,an),rt.base=Se.__e,Se.__h=null,rt.__h.length&&Vt.push(rt),le&&(rt.__E=rt.__=null),rt.__e=!1}else ht==null&&Se.__v===Ae.__v?(Se.__k=Ae.__k,Se.__e=Ae.__e):Se.__e=Xe(Ae.__e,Se,Ae,qe,_t,ht,Vt,an);(Kt=c.diffed)&&Kt(Se)}catch(bo){Se.__v=null,(an||ht!=null)&&(Se.__e=Jt,Se.__h=!!an,ht[ht.indexOf(Jt)]=null),c.__e(bo,Se,Ae)}}function ye($e,Se){c.__c&&c.__c(Se,$e),$e.some(function(Ae){try{$e=Ae.__h,Ae.__h=[],$e.some(function(qe){qe.call(Ae)})}catch(qe){c.__e(qe,Ae.__v)}})}function Xe($e,Se,Ae,qe,_t,ht,Vt,Jt){var an,Kt,rt,pn=Ae.props,Ue=Se.props,_n=Se.type,Jn=0;if(_n==="svg"&&(_t=!0),ht!=null){for(;Jn<ht.length;Jn++)if((an=ht[Jn])&&"setAttribute"in an==!!_n&&(_n?an.localName===_n:an.nodeType===3)){$e=an,ht[Jn]=null;break}}if($e==null){if(_n===null)return document.createTextNode(Ue);$e=_t?document.createElementNS("http://www.w3.org/2000/svg",_n):document.createElement(_n,Ue.is&&Ue),ht=null,Jt=!1}if(_n===null)pn===Ue||Jt&&$e.data===Ue||($e.data=Ue);else{if(ht=ht&&u.call($e.childNodes),Kt=(pn=Ae.props||x).dangerouslySetInnerHTML,rt=Ue.dangerouslySetInnerHTML,!Jt){if(ht!=null)for(pn={},Jn=0;Jn<$e.attributes.length;Jn++)pn[$e.attributes[Jn].name]=$e.attributes[Jn].value;(rt||Kt)&&(rt&&(Kt&&rt.__html==Kt.__html||rt.__html===$e.innerHTML)||($e.innerHTML=rt&&rt.__html||""))}if(function(le,Qn,Pr,Xr,ao){var Un;for(Un in Pr)Un==="children"||Un==="key"||Un in Qn||ie(le,Un,null,Pr[Un],Xr);for(Un in Qn)ao&&typeof Qn[Un]!="function"||Un==="children"||Un==="key"||Un==="value"||Un==="checked"||Pr[Un]===Qn[Un]||ie(le,Un,Qn[Un],Pr[Un],Xr)}($e,Ue,pn,_t,Jt),rt)Se.__k=[];else if(Jn=Se.props.children,W($e,Array.isArray(Jn)?Jn:[Jn],Se,Ae,qe,_t&&_n!=="foreignObject",ht,Vt,ht?ht[0]:Ae.__k&&U(Ae,0),Jt),ht!=null)for(Jn=ht.length;Jn--;)ht[Jn]!=null&&E(ht[Jn]);Jt||("value"in Ue&&(Jn=Ue.value)!==void 0&&(Jn!==pn.value||Jn!==$e.value||_n==="progress"&&!Jn)&&ie($e,"value",Jn,pn.value,!1),"checked"in Ue&&(Jn=Ue.checked)!==void 0&&Jn!==$e.checked&&ie($e,"checked",Jn,pn.checked,!1))}return $e}function Ze($e,Se,Ae){try{typeof $e=="function"?$e(Se):$e.current=Se}catch(qe){c.__e(qe,Ae)}}function yt($e,Se,Ae){var qe,_t;if(c.unmount&&c.unmount($e),(qe=$e.ref)&&(qe.current&&qe.current!==$e.__e||Ze(qe,null,Se)),(qe=$e.__c)!=null){if(qe.componentWillUnmount)try{qe.componentWillUnmount()}catch(ht){c.__e(ht,Se)}qe.base=qe.__P=null}if(qe=$e.__k)for(_t=0;_t<qe.length;_t++)qe[_t]&&yt(qe[_t],Se,typeof $e.type!="function");Ae||$e.__e==null||E($e.__e),$e.__e=$e.__d=void 0}function Be($e,Se,Ae){return this.constructor($e,Ae)}function qt($e,Se,Ae){var qe,_t,ht;c.__&&c.__($e,Se),_t=(qe=typeof Ae=="function")?null:Ae&&Ae.__k||Se.__k,ht=[],be(Se,$e=(!qe&&Ae||Se).__k=D($,null,[$e]),_t||x,x,Se.ownerSVGElement!==void 0,!qe&&Ae?[Ae]:_t?null:Se.firstChild?u.call(Se.childNodes):null,ht,!qe&&Ae?Ae:_t?_t.__e:Se.firstChild,qe),ye(ht,$e)}function Yt($e,Se){qt($e,Se,Yt)}function Pt($e,Se,Ae){var qe,_t,ht,Vt=S({},$e.props);for(ht in Se)ht=="key"?qe=Se[ht]:ht=="ref"?_t=Se[ht]:Vt[ht]=Se[ht];return arguments.length>2&&(Vt.children=arguments.length>3?u.call(arguments,2):Ae),I($e.type,Vt,qe||$e.key,_t||$e.ref,null)}function An($e,Se){var Ae={__c:Se="__cC"+_++,__:$e,Consumer:function(qe,_t){return qe.children(_t)},Provider:function(qe){var _t,ht;return this.getChildContext||(_t=[],(ht={})[Se]=this,this.getChildContext=function(){return ht},this.shouldComponentUpdate=function(Vt){this.props.value!==Vt.value&&_t.some(Q)},this.sub=function(Vt){_t.push(Vt);var Jt=Vt.componentWillUnmount;Vt.componentWillUnmount=function(){_t.splice(_t.indexOf(Vt),1),Jt&&Jt.call(Vt)}}),qe.children}};return Ae.Provider.__=Ae.Consumer.contextType=Ae}u=A.slice,c={__e:function($e,Se){for(var Ae,qe,_t;Se=Se.__;)if((Ae=Se.__c)&&!Ae.__)try{if((qe=Ae.constructor)&&qe.getDerivedStateFromError!=null&&(Ae.setState(qe.getDerivedStateFromError($e)),_t=Ae.__d),Ae.componentDidCatch!=null&&(Ae.componentDidCatch($e),_t=Ae.__d),_t)return Ae.__E=Ae}catch(ht){$e=ht}throw $e}},v=0,j.prototype.setState=function($e,Se){var Ae;Ae=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=S({},this.state),typeof $e=="function"&&($e=$e(S({},Ae),this.props)),$e&&S(Ae,$e),$e!=null&&this.__v&&(Se&&this.__h.push(Se),Q(this))},j.prototype.forceUpdate=function($e){this.__v&&(this.__e=!0,$e&&this.__h.push($e),Q(this))},j.prototype.render=$,f=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,H.__r=0,_=0},function(n,a,r){(function(u,c){r.d(a,"a",function(){return Q}),r.d(a,"b",function(){return Dc}),r.d(a,"c",function(){return Ca}),r.d(a,"d",function(){return Hn}),r.d(a,"e",function(){return Zt}),r.d(a,"f",function(){return rn}),r.d(a,"g",function(){return Fn}),r.d(a,"h",function(){return Ii}),r.d(a,"i",function(){return ao}),r.d(a,"j",function(){return Tn}),r.d(a,"k",function(){return gl}),r.d(a,"l",function(){return Mc}),r.d(a,"m",function(){return le}),r.d(a,"n",function(){return iu}),r.d(a,"o",function(){return z}),r.d(a,"p",function(){return rp}),r.d(a,"q",function(){return ya}),r.d(a,"r",function(){return au}),r.d(a,"s",function(){return sa}),r.d(a,"t",function(){return $o}),r.d(a,"u",function(){return Ns}),r.d(a,"v",function(){return Xf}),r.d(a,"w",function(){return Pc}),r.d(a,"x",function(){return ui}),r.d(a,"y",function(){return _a}),r.d(a,"z",function(){return Ko}),r.d(a,"A",function(){return ci}),r.d(a,"B",function(){return ga}),r.d(a,"C",function(){return Kt}),r.d(a,"D",function(){return qf}),r.d(a,"E",function(){return Wr}),r.d(a,"F",function(){return qr}),r.d(a,"G",function(){return Ac}),r.d(a,"H",function(){return xc}),r.d(a,"I",function(){return Nc}),r.d(a,"J",function(){return si}),r.d(a,"K",function(){return Qe}),r.d(a,"L",function(){return lo}),r.d(a,"M",function(){return Ds});var v=[];Object.freeze(v);var f={};function g(){return++Nn.mobxGuid}function b(P){throw _(!1,P),"X"}function _(P,N){if(!P)throw new Error("[mobx] "+(N||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(f);function x(P){var N=!1;return function(){if(!N)return N=!0,P.apply(this,arguments)}}var A=function(){};function M(P){return P!==null&&typeof P=="object"}function S(P){if(P===null||typeof P!="object")return!1;var N=Object.getPrototypeOf(P);return N===Object.prototype||N===null}function E(P,N,G){Object.defineProperty(P,N,{enumerable:!1,writable:!0,configurable:!0,value:G})}function D(P,N){var G="isMobX"+P;return N.prototype[G]=!0,function(ae){return M(ae)&&ae[G]===!0}}function I(P){return P instanceof Map}function B(P){return P instanceof Set}function $(P){var N=new Set;for(var G in P)N.add(G);return Object.getOwnPropertySymbols(P).forEach(function(ae){Object.getOwnPropertyDescriptor(P,ae).enumerable&&N.add(ae)}),Array.from(N)}function j(P){return P&&P.toString?P.toString():new String(P).toString()}function U(P){return P===null?null:typeof P=="object"?""+P:P}var K=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:Object.getOwnPropertyNames,Q=Symbol("mobx administration"),H=function(){function P(N){N===void 0&&(N="Atom@"+g()),this.name=N,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=pn.NOT_TRACKING}return P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(N){return N()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(N){return N()})},P.prototype.reportObserved=function(){return Ps(this)},P.prototype.reportChanged=function(){Zi(),function(N){N.lowestObserverState!==pn.STALE&&(N.lowestObserverState=pn.STALE,N.observers.forEach(function(G){G.dependenciesState===pn.UP_TO_DATE&&(G.isTracing!==Ue.NONE&&Ra(G,N),G.onBecomeStale()),G.dependenciesState=pn.STALE}))}(this),la()},P.prototype.toString=function(){return this.name},P}(),W=D("Atom",H);function z(P,N,G){N===void 0&&(N=A),G===void 0&&(G=A);var ae,ge=new H(P);return N!==A&&zf("onBecomeObserved",ge,N,ae),G!==A&&Wr(ge,G),ge}var Y={structural:function(P,N){return Ft(P,N)},default:function(P,N){return Object.is(P,N)}},q=function(P,N){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ae){G.__proto__=ae}||function(G,ae){for(var ge in ae)ae.hasOwnProperty(ge)&&(G[ge]=ae[ge])},q(P,N)};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */var oe=function(){return oe=Object.assign||function(P){for(var N,G=1,ae=arguments.length;G<ae;G++)for(var ge in N=arguments[G])Object.prototype.hasOwnProperty.call(N,ge)&&(P[ge]=N[ge]);return P},oe.apply(this,arguments)};function ie(P){var N=typeof Symbol=="function"&&P[Symbol.iterator],G=0;return N?N.call(P):{next:function(){return P&&G>=P.length&&(P=void 0),{value:P&&P[G++],done:!P}}}}function Pe(P,N){var G=typeof Symbol=="function"&&P[Symbol.iterator];if(!G)return P;var ae,ge,Ye=G.call(P),gt=[];try{for(;(N===void 0||N-- >0)&&!(ae=Ye.next()).done;)gt.push(ae.value)}catch(zt){ge={error:zt}}finally{try{ae&&!ae.done&&(G=Ye.return)&&G.call(Ye)}finally{if(ge)throw ge.error}}return gt}function we(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(Pe(arguments[N]));return P}var be=Symbol("mobx did run lazy initializers"),ye=Symbol("mobx pending decorators"),Xe={},Ze={};function yt(P,N){var G=N?Xe:Ze;return G[P]||(G[P]={configurable:!0,enumerable:N,get:function(){return Be(this),this[P]},set:function(ae){Be(this),this[P]=ae}})}function Be(P){var N,G;if(P[be]!==!0){var ae=P[ye];if(ae){E(P,be,!0);var ge=we(Object.getOwnPropertySymbols(ae),Object.keys(ae));try{for(var Ye=ie(ge),gt=Ye.next();!gt.done;gt=Ye.next()){var zt=ae[gt.value];zt.propertyCreator(P,zt.prop,zt.descriptor,zt.decoratorTarget,zt.decoratorArguments)}}catch(En){N={error:En}}finally{try{gt&&!gt.done&&(G=Ye.return)&&G.call(Ye)}finally{if(N)throw N.error}}}}}function qt(P,N){return function(){var G,ae=function(ge,Ye,gt,zt){if(zt===!0)return N(ge,Ye,gt,ge,G),null;if(!Object.prototype.hasOwnProperty.call(ge,ye)){var En=ge[ye];E(ge,ye,oe({},En))}return ge[ye][Ye]={prop:Ye,propertyCreator:N,descriptor:gt,decoratorTarget:ge,decoratorArguments:G},yt(Ye,P)};return Yt(arguments)?(G=v,ae.apply(null,arguments)):(G=Array.prototype.slice.call(arguments),ae)}}function Yt(P){return(P.length===2||P.length===3)&&(typeof P[1]=="string"||typeof P[1]=="symbol")||P.length===4&&P[3]===!0}function Pt(P,N,G){return ui(P)?P:Array.isArray(P)?Kt.array(P,{name:G}):S(P)?Kt.object(P,void 0,{name:G}):I(P)?Kt.map(P,{name:G}):B(P)?Kt.set(P,{name:G}):P}function An(P){return P}function $e(P){_(P);var N=qt(!0,function(ae,ge,Ye,gt,zt){var En=Ye?Ye.initializer?Ye.initializer.call(ae):Ye.value:void 0;ua(ae).addObservableProp(ge,En,P)}),G=(u!==void 0&&u.env,N);return G.enhancer=P,G}var Se={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ae(P){return P==null?Se:typeof P=="string"?{name:P,deep:!0,proxy:!0}:P}Object.freeze(Se);var qe=$e(Pt),_t=$e(function(P,N,G){return P==null||ci(P)||_a(P)||Ko(P)||ni(P)?P:Array.isArray(P)?Kt.array(P,{name:G,deep:!1}):S(P)?Kt.object(P,void 0,{name:G,deep:!1}):I(P)?Kt.map(P,{name:G,deep:!1}):B(P)?Kt.set(P,{name:G,deep:!1}):b(!1)}),ht=$e(An),Vt=$e(function(P,N,G){return Ft(P,N)?N:P});function Jt(P){return P.defaultDecorator?P.defaultDecorator.enhancer:P.deep===!1?An:Pt}var an={box:function(P,N){arguments.length>2&&rt("box");var G=Ae(N);return new Dr(P,Jt(G),G.name,!0,G.equals)},array:function(P,N){arguments.length>2&&rt("array");var G=Ae(N);return Fl(P,Jt(G),G.name)},map:function(P,N){arguments.length>2&&rt("map");var G=Ae(N);return new Dc(P,Jt(G),G.name)},set:function(P,N){arguments.length>2&&rt("set");var G=Ae(N);return new Ya(P,Jt(G),G.name)},object:function(P,N,G){typeof arguments[1]=="string"&&rt("object");var ae=Ae(G);if(ae.proxy===!1)return ya({},P,N,ae);var ge=Rs(ae),Ye=ya({},void 0,void 0,ae),gt=lu(Ye);return Hf(gt,P,N,ge),gt},ref:ht,shallow:_t,deep:qe,struct:Vt},Kt=function(P,N,G){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return qe.apply(null,arguments);if(ui(P))return P;var ae=S(P)?Kt.object(P,N,G):Array.isArray(P)?Kt.array(P,N):I(P)?Kt.map(P,N):B(P)?Kt.set(P,N):P;if(ae!==P)return ae;b(!1)};function rt(P){b("Expected one or two arguments to observable."+P+". Did you accidentally try to use observable."+P+" as decorator?")}Object.keys(an).forEach(function(P){return Kt[P]=an[P]});var pn,Ue,_n=qt(!1,function(P,N,G,ae,ge){var Ye=G.get,gt=G.set,zt=ge[0]||{};ua(P).addComputedProp(P,N,oe({get:Ye,set:gt,context:P},zt))}),Jn=_n({equals:Y.structural}),le=function(P,N,G){if(typeof N=="string"||P!==null&&typeof P=="object"&&arguments.length===1)return _n.apply(null,arguments);var ae=typeof N=="object"?N:{};return ae.get=P,ae.set=typeof N=="function"?N:ae.set,ae.name=ae.name||P.name||"",new Ha(ae)};le.struct=Jn,function(P){P[P.NOT_TRACKING=-1]="NOT_TRACKING",P[P.UP_TO_DATE=0]="UP_TO_DATE",P[P.POSSIBLY_STALE=1]="POSSIBLY_STALE",P[P.STALE=2]="STALE"}(pn||(pn={})),function(P){P[P.NONE=0]="NONE",P[P.LOG=1]="LOG",P[P.BREAK=2]="BREAK"}(Ue||(Ue={}));var Qn=function(P){this.cause=P};function Pr(P){return P instanceof Qn}function Xr(P){switch(P.dependenciesState){case pn.UP_TO_DATE:return!1;case pn.NOT_TRACKING:case pn.STALE:return!0;case pn.POSSIBLY_STALE:for(var N=rn(!0),G=je(),ae=P.observing,ge=ae.length,Ye=0;Ye<ge;Ye++){var gt=ae[Ye];if(yl(gt)){if(Nn.disableErrorBoundaries)gt.get();else try{gt.get()}catch{return ut(G),Zt(N),!0}if(P.dependenciesState===pn.STALE)return ut(G),Zt(N),!0}}return Rn(P),ut(G),Zt(N),!1}}function ao(){return Nn.trackingDerivation!==null}function Un(P){var N=P.observers.size>0;Nn.computationDepth>0&&N&&b(!1),Nn.allowStateChanges||!N&&Nn.enforceActions!=="strict"||b(!1)}function bo(P,N,G){var ae=rn(!0);Rn(P),P.newObserving=new Array(P.observing.length+100),P.unboundDepsCount=0,P.runId=++Nn.runId;var ge,Ye=Nn.trackingDerivation;if(Nn.trackingDerivation=P,Nn.disableErrorBoundaries===!0)ge=N.call(G);else try{ge=N.call(G)}catch(gt){ge=new Qn(gt)}return Nn.trackingDerivation=Ye,function(gt){for(var zt=gt.observing,En=gt.observing=gt.newObserving,_r=pn.UP_TO_DATE,fn=0,Gr=gt.unboundDepsCount,mr=0;mr<Gr;mr++)(Ir=En[mr]).diffValue===0&&(Ir.diffValue=1,fn!==mr&&(En[fn]=Ir),fn++),Ir.dependenciesState>_r&&(_r=Ir.dependenciesState);for(En.length=fn,gt.newObserving=null,Gr=zt.length;Gr--;)(Ir=zt[Gr]).diffValue===0&&_o(Ir,gt),Ir.diffValue=0;for(;fn--;){var Ir;(Ir=En[fn]).diffValue===1&&(Ir.diffValue=0,Uf(Ir,gt))}_r!==pn.UP_TO_DATE&&(gt.dependenciesState=_r,gt.onBecomeStale())}(P),Zt(ae),ge}function Te(P){var N=P.observing;P.observing=[];for(var G=N.length;G--;)_o(N[G],P);P.dependenciesState=pn.NOT_TRACKING}function Qe(P){var N=je();try{return P()}finally{ut(N)}}function je(){var P=Nn.trackingDerivation;return Nn.trackingDerivation=null,P}function ut(P){Nn.trackingDerivation=P}function rn(P){var N=Nn.allowStateReads;return Nn.allowStateReads=P,N}function Zt(P){Nn.allowStateReads=P}function Rn(P){if(P.dependenciesState!==pn.UP_TO_DATE){P.dependenciesState=pn.UP_TO_DATE;for(var N=P.observing,G=N.length;G--;)N[G].lowestObserverState=pn.UP_TO_DATE}}var Er=0,li=1,Si=Object.getOwnPropertyDescriptor(function(){},"name");Si&&Si.configurable;function Yo(P,N,G){var ae=function(){return ti(P,N,G||this,arguments)};return ae.isMobxAction=!0,ae}function ti(P,N,G,ae){var ge=Tn();try{return N.apply(G,ae)}catch(Ye){throw ge.error=Ye,Ye}finally{Fn(ge)}}function Tn(P,N,G){var ae=0,ge=je();Zi();var Ye={prevDerivation:ge,prevAllowStateChanges:ar(!0),prevAllowStateReads:rn(!0),notifySpy:!1,startTime:ae,actionId:li++,parentActionId:Er};return Er=Ye.actionId,Ye}function Fn(P){Er!==P.actionId&&b("invalid action stack. did you forget to finish an action?"),Er=P.parentActionId,P.error!==void 0&&(Nn.suppressReactionErrors=!0),eo(P.prevAllowStateChanges),Zt(P.prevAllowStateReads),la(),ut(P.prevDerivation),P.notifySpy,Nn.suppressReactionErrors=!1}function Hn(P,N){var G,ae=ar(P);try{G=N()}finally{eo(ae)}return G}function ar(P){var N=Nn.allowStateChanges;return Nn.allowStateChanges=P,N}function eo(P){Nn.allowStateChanges=P}var Dr=function(P){function N(G,ae,ge,Ye,gt){ge===void 0&&(ge="ObservableValue@"+g()),gt===void 0&&(gt=Y.default);var zt=P.call(this,ge)||this;return zt.enhancer=ae,zt.name=ge,zt.equals=gt,zt.hasUnreportedChange=!1,zt.value=ae(G,void 0,ge),zt}return function(G,ae){function ge(){this.constructor=G}q(G,ae),G.prototype=ae===null?Object.create(ae):(ge.prototype=ae.prototype,new ge)}(N,P),N.prototype.dehanceValue=function(G){return this.dehancer!==void 0?this.dehancer(G):G},N.prototype.set=function(G){this.value,(G=this.prepareNewValue(G))!==Nn.UNCHANGED&&this.setNewValue(G)},N.prototype.prepareNewValue=function(G){if(Un(this),Qi(this)){var ae=Nr(this,{object:this,type:"update",newValue:G});if(!ae)return Nn.UNCHANGED;G=ae.newValue}return G=this.enhancer(G,this.value,this.name),this.equals(this.value,G)?Nn.UNCHANGED:G},N.prototype.setNewValue=function(G){var ae=this.value;this.value=G,this.reportChanged(),Wi(this)&&yi(this,{type:"update",object:this,newValue:G,oldValue:ae})},N.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},N.prototype.intercept=function(G){return ba(this,G)},N.prototype.observe=function(G,ae){return ae&&G({object:this,type:"update",newValue:this.value,oldValue:void 0}),Da(this,G)},N.prototype.toJSON=function(){return this.get()},N.prototype.toString=function(){return this.name+"["+this.value+"]"},N.prototype.valueOf=function(){return U(this.get())},N.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},N}(H),ml=D("ObservableValue",Dr),Ha=function(){function P(N){this.dependenciesState=pn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=pn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new Qn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ue.NONE,_(N.get,"missing option for computed: get"),this.derivation=N.get,this.name=N.name||"ComputedValue@"+g(),N.set&&(this.setter=Yo(this.name+"-setter",N.set)),this.equals=N.equals||(N.compareStructural||N.struct?Y.structural:Y.default),this.scope=N.context,this.requiresReaction=!!N.requiresReaction,this.keepAlive=!!N.keepAlive}return P.prototype.onBecomeStale=function(){(function(N){N.lowestObserverState===pn.UP_TO_DATE&&(N.lowestObserverState=pn.POSSIBLY_STALE,N.observers.forEach(function(G){G.dependenciesState===pn.UP_TO_DATE&&(G.dependenciesState=pn.POSSIBLY_STALE,G.isTracing!==Ue.NONE&&Ra(G,N),G.onBecomeStale())}))})(this)},P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(N){return N()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(N){return N()})},P.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Nn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Ps(this),Xr(this)&&this.trackAndCompute()&&function(G){G.lowestObserverState!==pn.STALE&&(G.lowestObserverState=pn.STALE,G.observers.forEach(function(ae){ae.dependenciesState===pn.POSSIBLY_STALE?ae.dependenciesState=pn.STALE:ae.dependenciesState===pn.UP_TO_DATE&&(G.lowestObserverState=pn.UP_TO_DATE)}))}(this)):Xr(this)&&(this.warnAboutUntrackedRead(),Zi(),this.value=this.computeValue(!1),la());var N=this.value;if(Pr(N))throw N.cause;return N},P.prototype.peek=function(){var N=this.computeValue(!1);if(Pr(N))throw N.cause;return N},P.prototype.set=function(N){if(this.setter){_(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,N)}finally{this.isRunningSetter=!1}}else _(!1,!1)},P.prototype.trackAndCompute=function(){var N=this.value,G=this.dependenciesState===pn.NOT_TRACKING,ae=this.computeValue(!0),ge=G||Pr(N)||Pr(ae)||!this.equals(N,ae);return ge&&(this.value=ae),ge},P.prototype.computeValue=function(N){var G;if(this.isComputing=!0,Nn.computationDepth++,N)G=bo(this,this.derivation,this.scope);else if(Nn.disableErrorBoundaries===!0)G=this.derivation.call(this.scope);else try{G=this.derivation.call(this.scope)}catch(ae){G=new Qn(ae)}return Nn.computationDepth--,this.isComputing=!1,G},P.prototype.suspend=function(){this.keepAlive||(Te(this),this.value=void 0)},P.prototype.observe=function(N,G){var ae=this,ge=!0,Ye=void 0;return Mc(function(){var gt=ae.get();if(!ge||G){var zt=je();N({type:"update",object:ae,newValue:gt,oldValue:Ye}),ut(zt)}ge=!1,Ye=gt})},P.prototype.warnAboutUntrackedRead=function(){},P.prototype.toJSON=function(){return this.get()},P.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},P.prototype.valueOf=function(){return U(this.get())},P.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},P}(),yl=D("ComputedValue",Ha),ou=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},ep={};function wc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:ep}var va=!0,Fu=!1,Nn=function(){var P=wc();return P.__mobxInstanceCount>0&&!P.__mobxGlobals&&(va=!1),P.__mobxGlobals&&P.__mobxGlobals.version!==new ou().version&&(va=!1),va?P.__mobxGlobals?(P.__mobxInstanceCount+=1,P.__mobxGlobals.UNCHANGED||(P.__mobxGlobals.UNCHANGED={}),P.__mobxGlobals):(P.__mobxInstanceCount=1,P.__mobxGlobals=new ou):(setTimeout(function(){Fu||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new ou)}();function Uf(P,N){P.observers.add(N),P.lowestObserverState>N.dependenciesState&&(P.lowestObserverState=N.dependenciesState)}function _o(P,N){P.observers.delete(N),P.observers.size===0&&Ec(P)}function Ec(P){P.isPendingUnobservation===!1&&(P.isPendingUnobservation=!0,Nn.pendingUnobservations.push(P))}function Zi(){Nn.inBatch++}function la(){if(--Nn.inBatch==0){Sc();for(var P=Nn.pendingUnobservations,N=0;N<P.length;N++){var G=P[N];G.isPendingUnobservation=!1,G.observers.size===0&&(G.isBeingObserved&&(G.isBeingObserved=!1,G.onBecomeUnobserved()),G instanceof Ha&&G.suspend())}Nn.pendingUnobservations=[]}}function Ps(P){var N=Nn.trackingDerivation;return N!==null?(N.runId!==P.lastAccessedBy&&(P.lastAccessedBy=N.runId,N.newObserving[N.unboundDepsCount++]=P,P.isBeingObserved||(P.isBeingObserved=!0,P.onBecomeObserved())),!0):(P.observers.size===0&&Nn.inBatch>0&&Ec(P),!1)}function Ra(P,N){if(P.isTracing===Ue.BREAK){var G=[];ma($o(P),G,1),new Function(`debugger;
/*
Tracing '`+P.name+`'

You are entering this break point because derivation '`+P.name+"' is being traced and '"+N.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(P instanceof Ha?P.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+G.join(`
`)+`
*/
    `)()}}function ma(P,N,G){N.length>=1e3?N.push("(and many more)"):(N.push(""+new Array(G).join("	")+P.name),P.dependencies&&P.dependencies.forEach(function(ae){return ma(ae,N,G+1)}))}var Ca=function(){function P(N,G,ae,ge){N===void 0&&(N="Reaction@"+g()),ge===void 0&&(ge=!1),this.name=N,this.onInvalidate=G,this.errorHandler=ae,this.requiresObservable=ge,this.observing=[],this.newObserving=[],this.dependenciesState=pn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ue.NONE}return P.prototype.onBecomeStale=function(){this.schedule()},P.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Nn.pendingReactions.push(this),Sc())},P.prototype.isScheduled=function(){return this._isScheduled},P.prototype.runReaction=function(){if(!this.isDisposed){if(Zi(),this._isScheduled=!1,Xr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(N){this.reportExceptionInDerivation(N)}}la()}},P.prototype.track=function(N){if(!this.isDisposed){Zi(),this._isRunning=!0;var G=bo(this,N,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Te(this),Pr(G)&&this.reportExceptionInDerivation(G.cause),la()}},P.prototype.reportExceptionInDerivation=function(N){var G=this;if(this.errorHandler)this.errorHandler(N,this);else{if(Nn.disableErrorBoundaries)throw N;Nn.suppressReactionErrors,Nn.globalReactionErrorHandlers.forEach(function(ae){return ae(N,G)})}},P.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Zi(),Te(this),la()))},P.prototype.getDisposer=function(){var N=this.dispose.bind(this);return N[Q]=this,N},P.prototype.toString=function(){return"Reaction["+this.name+"]"},P.prototype.trace=function(N){N===void 0&&(N=!1),function(){for(var G=[],ae=0;ae<arguments.length;ae++)G[ae]=arguments[ae];var ge=!1;typeof G[G.length-1]=="boolean"&&(ge=G.pop());var Ye=Fr(G);if(!Ye)return b(!1);Ye.isTracing,Ue.NONE,Ye.isTracing=ge?Ue.BREAK:Ue.LOG}(this,N)},P}(),Oc=function(P){return P()};function Sc(){Nn.inBatch>0||Nn.isRunningReactions||Oc(Bf)}function Bf(){Nn.isRunningReactions=!0;for(var P=Nn.pendingReactions,N=0;P.length>0;){++N==100&&P.splice(0);for(var G=P.splice(0),ae=0,ge=G.length;ae<ge;ae++)G[ae].runReaction()}Nn.isRunningReactions=!1}var $u=D("Reaction",Ca);function Vf(P){var N=Oc;Oc=function(G){return P(function(){return N(G)})}}function xc(P){return function(){}}function tp(){b(!1)}function jl(P){return function(N,G,ae){if(ae){if(ae.value)return{value:Yo(P,ae.value),enumerable:!1,configurable:!0,writable:!0};var ge=ae.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Yo(P,ge.call(this))}}}return Wf(P).apply(this,arguments)}}function Wf(P){return function(N,G,ae){Object.defineProperty(N,G,{configurable:!0,enumerable:!1,get:function(){},set:function(ge){E(this,G,gl(P,ge))}})}}var gl=function(P,N,G,ae){return arguments.length===1&&typeof P=="function"?Yo(P.name||"<unnamed action>",P):arguments.length===2&&typeof N=="function"?Yo(P,N):arguments.length===1&&typeof P=="string"?jl(P):ae!==!0?jl(N).apply(null,arguments):void E(P,N,Yo(P.name||N,G.value,this))};function Ac(P,N){return ti(typeof P=="string"?P:P.name||"<unnamed action>",typeof P=="function"?P:N,this,void 0)}function Ns(P){return typeof P=="function"&&P.isMobxAction===!0}function Tc(P,N,G){E(P,N,Yo(N,G.bind(P)))}function Mc(P,N){N===void 0&&(N=f);var G,ae=N&&N.name||P.name||"Autorun@"+g();if(!N.scheduler&&!N.delay)G=new Ca(ae,function(){this.track(gt)},N.onError,N.requiresObservable);else{var ge=Gf(N),Ye=!1;G=new Ca(ae,function(){Ye||(Ye=!0,ge(function(){Ye=!1,G.isDisposed||G.track(gt)}))},N.onError,N.requiresObservable)}function gt(){P(G)}return G.schedule(),G.getDisposer()}gl.bound=function(P,N,G,ae){return ae===!0?(Tc(P,N,G.value),null):G?{configurable:!0,enumerable:!1,get:function(){return Tc(this,N,G.value||G.initializer.call(this)),this[N]},set:tp}:{enumerable:!1,configurable:!0,set:function(ge){Tc(this,N,ge)},get:function(){}}};var np=function(P){return P()};function Gf(P){return P.scheduler?P.scheduler:P.delay?function(N){return setTimeout(N,P.delay)}:np}function qr(P,N,G){G===void 0&&(G=f);var ae,ge,Ye,gt=G.name||"Reaction@"+g(),zt=gl(gt,G.onError?(ae=G.onError,ge=N,function(){try{return ge.apply(this,arguments)}catch(Ao){ae.call(this,Ao)}}):N),En=!G.scheduler&&!G.delay,_r=Gf(G),fn=!0,Gr=!1,mr=G.compareStructural?Y.structural:G.equals||Y.default,Ir=new Ca(gt,function(){fn||En?ca():Gr||(Gr=!0,_r(ca))},G.onError,G.requiresObservable);function ca(){if(Gr=!1,!Ir.isDisposed){var Ao=!1;Ir.track(function(){var ta=P(Ir);Ao=fn||!mr(Ye,ta),Ye=ta}),fn&&G.fireImmediately&&zt(Ye,Ir),fn||Ao!==!0||zt(Ye,Ir),fn&&(fn=!1)}}return Ir.schedule(),Ir.getDisposer()}function Wr(P,N,G){return zf("onBecomeUnobserved",P,N,G)}function zf(P,N,G,ae){var ge=typeof ae=="function"?sa(N,G):sa(N),Ye=typeof ae=="function"?ae:G,gt=P+"Listeners";return ge[gt]?ge[gt].add(Ye):ge[gt]=new Set([Ye]),typeof ge[P]!="function"?b(!1):function(){var zt=ge[gt];zt&&(zt.delete(Ye),zt.size===0&&delete ge[gt])}}function iu(P){var N=P.enforceActions,G=P.computedRequiresReaction,ae=P.computedConfigurable,ge=P.disableErrorBoundaries,Ye=P.reactionScheduler,gt=P.reactionRequiresObservable,zt=P.observableRequiresReaction;if(P.isolateGlobalState===!0&&((Nn.pendingReactions.length||Nn.inBatch||Nn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Fu=!0,va&&(--wc().__mobxInstanceCount==0&&(wc().__mobxGlobals=void 0),Nn=new ou)),N!==void 0){var En=void 0;switch(N){case!0:case"observed":En=!0;break;case!1:case"never":En=!1;break;case"strict":case"always":En="strict";break;default:b("Invalid value for 'enforceActions': '"+N+"', expected 'never', 'always' or 'observed'")}Nn.enforceActions=En,Nn.allowStateChanges=En!==!0&&En!=="strict"}G!==void 0&&(Nn.computedRequiresReaction=!!G),gt!==void 0&&(Nn.reactionRequiresObservable=!!gt),zt!==void 0&&(Nn.observableRequiresReaction=!!zt,Nn.allowStateReads=!Nn.observableRequiresReaction),ae!==void 0&&(Nn.computedConfigurable=!!ae),ge!==void 0&&(Nn.disableErrorBoundaries=!!ge),Ye&&Vf(Ye)}function ya(P,N,G,ae){var ge=Rs(ae=Ae(ae));return Be(P),ua(P,ae.name,ge.enhancer),N&&Hf(P,N,G,ge),P}function Rs(P){return P.defaultDecorator||(P.deep===!1?ht:qe)}function Hf(P,N,G,ae){var ge,Ye;Zi();try{var gt=K(N);try{for(var zt=ie(gt),En=zt.next();!En.done;En=zt.next()){var _r=En.value,fn=Object.getOwnPropertyDescriptor(N,_r),Gr=(G&&_r in G?G[_r]:fn.get?_n:ae)(P,_r,fn,!0);Gr&&Object.defineProperty(P,_r,Gr)}}catch(mr){ge={error:mr}}finally{try{En&&!En.done&&(Ye=zt.return)&&Ye.call(zt)}finally{if(ge)throw ge.error}}}finally{la()}}function $o(P,N){return Il(sa(P,N))}function Il(P){var N,G,ae={name:P.name};return P.observing&&P.observing.length>0&&(ae.dependencies=(N=P.observing,G=[],N.forEach(function(ge){G.indexOf(ge)===-1&&G.push(ge)}),G).map(Il)),ae}var Ll=0;function Cs(){this.message="FLOW_CANCELLED"}function au(P){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var N=P.name||"<unnamed flow>";return function(){var G,ae=this,ge=arguments,Ye=++Ll,gt=gl(N+" - runid: "+Ye+" - init",P).apply(ae,ge),zt=void 0,En=new Promise(function(_r,fn){var Gr=0;function mr(Ao){var ta;zt=void 0;try{ta=gl(N+" - runid: "+Ye+" - yield "+Gr++,gt.next).call(gt,Ao)}catch(bl){return fn(bl)}ca(ta)}function Ir(Ao){var ta;zt=void 0;try{ta=gl(N+" - runid: "+Ye+" - yield "+Gr++,gt.throw).call(gt,Ao)}catch(bl){return fn(bl)}ca(ta)}function ca(Ao){if(!Ao||typeof Ao.then!="function")return Ao.done?_r(Ao.value):(zt=Promise.resolve(Ao.value)).then(mr,Ir);Ao.then(ca,fn)}G=fn,mr(void 0)});return En.cancel=gl(N+" - runid: "+Ye+" - cancel",function(){try{zt&&xi(zt);var _r=gt.return(void 0),fn=Promise.resolve(_r.value);fn.then(A,A),xi(fn),G(new Cs)}catch(Gr){G(Gr)}}),En}}function xi(P){typeof P.cancel=="function"&&P.cancel()}function kc(P,N){if(P==null)return!1;if(N!==void 0){if(ci(P)===!1||!P[Q].values.has(N))return!1;var G=sa(P,N);return yl(G)}return yl(P)}function Xf(P){return arguments.length>1?b(!1):kc(P)}function Pc(P,N){return typeof N!="string"?b(!1):kc(P,N)}function $i(P,N){return P!=null&&(N!==void 0?!!ci(P)&&P[Q].values.has(N):ci(P)||!!P[Q]||W(P)||$u(P)||yl(P))}function ui(P){return arguments.length!==1&&b(!1),$i(P)}function ga(P){return ci(P)?P[Q].getKeys():Ko(P)||ni(P)?Array.from(P.keys()):_a(P)?P.map(function(N,G){return G}):b(!1)}function lo(P){return ci(P)?ga(P).map(function(N){return P[N]}):Ko(P)?ga(P).map(function(N){return P.get(N)}):ni(P)?Array.from(P.values()):_a(P)?P.slice():b(!1)}function rp(P){return ci(P)?ga(P).map(function(N){return[N,P[N]]}):Ko(P)?ga(P).map(function(N){return[N,P.get(N)]}):ni(P)?Array.from(P.entries()):_a(P)?P.map(function(N,G){return[G,N]}):b(!1)}function Ui(P,N,G){if(arguments.length!==2||ni(P))if(ci(P)){var ae=P[Q],ge=ae.values.get(N);ge?ae.write(N,G):ae.addObservableProp(N,G,ae.defaultEnhancer)}else if(Ko(P))P.set(N,G);else if(ni(P))P.add(N);else{if(!_a(P))return b(!1);typeof N!="number"&&(N=parseInt(N,10)),_(N>=0,"Not a valid index: '"+N+"'"),Zi(),N>=P.length&&(P.length=N+1),P[N]=G,la()}else{Zi();var Ye=N;try{for(var gt in Ye)Ui(P,gt,Ye[gt])}finally{la()}}}function qf(P,N,G,ae){return typeof G=="function"?function(ge,Ye,gt,zt){return Ii(ge,Ye).observe(gt,zt)}(P,N,G,ae):function(ge,Ye,gt){return Ii(ge).observe(Ye,gt)}(P,N,G)}Cs.prototype=Object.create(Error.prototype);var Yf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Bi(P,N,G,ae){return ae.detectCycles&&P.set(N,G),G}function Ji(P,N,G){if(!N.recurseEverything&&!ui(P)||typeof P!="object")return P;if(P===null)return null;if(P instanceof Date)return P;if(ml(P))return Ji(P.get(),N,G);if(ui(P)&&ga(P),N.detectCycles===!0&&P!==null&&G.has(P))return G.get(P);if(_a(P)||Array.isArray(P)){var ae=Bi(G,P,[],N),ge=P.map(function(mr){return Ji(mr,N,G)});ae.length=ge.length;for(var Ye=0,gt=ge.length;Ye<gt;Ye++)ae[Ye]=ge[Ye];return ae}if(ni(P)||Object.getPrototypeOf(P)===Set.prototype){if(N.exportMapsAsObjects===!1){var zt=Bi(G,P,new Set,N);return P.forEach(function(mr){zt.add(Ji(mr,N,G))}),zt}var En=Bi(G,P,[],N);return P.forEach(function(mr){En.push(Ji(mr,N,G))}),En}if(Ko(P)||Object.getPrototypeOf(P)===Map.prototype){if(N.exportMapsAsObjects===!1){var _r=Bi(G,P,new Map,N);return P.forEach(function(mr,Ir){_r.set(Ir,Ji(mr,N,G))}),_r}var fn=Bi(G,P,{},N);return P.forEach(function(mr,Ir){fn[Ir]=Ji(mr,N,G)}),fn}var Gr=Bi(G,P,{},N);return $(P).forEach(function(mr){Gr[mr]=Ji(P[mr],N,G)}),Gr}function Nc(P,N){var G;return typeof N=="boolean"&&(N={detectCycles:N}),N||(N=Yf),N.detectCycles=N.detectCycles===void 0?N.recurseEverything===!0:N.detectCycles===!0,N.detectCycles&&(G=new Map),Ji(P,N,G)}function Fr(P){switch(P.length){case 0:return Nn.trackingDerivation;case 1:return sa(P[0]);case 2:return sa(P[0],P[1])}}function si(P,N){N===void 0&&(N=void 0),Zi();try{return P.apply(N)}finally{la()}}function Ds(P,N,G){return arguments.length===1||N&&typeof N=="object"?Rc(P,N):Kf(P,N,G||{})}function Kf(P,N,G){var ae;typeof G.timeout=="number"&&(ae=setTimeout(function(){if(!Ye[Q].isDisposed){Ye();var gt=new Error("WHEN_TIMEOUT");if(!G.onError)throw gt;G.onError(gt)}},G.timeout)),G.name=G.name||"When@"+g();var ge=Yo(G.name+"-effect",N),Ye=Mc(function(gt){P()&&(gt.dispose(),ae&&clearTimeout(ae),ge())},G);return Ye}function Rc(P,N){var G,ae=new Promise(function(ge,Ye){var gt=Kf(P,ge,oe(oe({},N),{onError:Ye}));G=function(){gt(),Ye("WHEN_CANCELLED")}});return ae.cancel=G,ae}function js(P){return P[Q]}function Xa(P){return typeof P=="string"||typeof P=="number"||typeof P=="symbol"}var Vi={has:function(P,N){if(N===Q||N==="constructor"||N===be)return!0;var G=js(P);return Xa(N)?G.has(N):N in P},get:function(P,N){if(N===Q||N==="constructor"||N===be)return P[N];var G=js(P),ae=G.values.get(N);if(ae instanceof H){var ge=ae.get();return ge===void 0&&G.has(N),ge}return Xa(N)&&G.has(N),P[N]},set:function(P,N,G){return!!Xa(N)&&(Ui(P,N,G),!0)},deleteProperty:function(P,N){return!!Xa(N)&&(js(P).remove(N),!0)},ownKeys:function(P){return js(P).keysAtom.reportObserved(),Reflect.ownKeys(P)},preventExtensions:function(P){return b("Dynamic observable objects cannot be frozen"),!1}};function lu(P){var N=new Proxy(P,Vi);return P[Q].proxy=N,N}function Qi(P){return P.interceptors!==void 0&&P.interceptors.length>0}function ba(P,N){var G=P.interceptors||(P.interceptors=[]);return G.push(N),x(function(){var ae=G.indexOf(N);ae!==-1&&G.splice(ae,1)})}function Nr(P,N){var G=je();try{for(var ae=we(P.interceptors||[]),ge=0,Ye=ae.length;ge<Ye&&(_(!(N=ae[ge](N))||N.type,"Intercept handlers should return nothing or a change object"),N);ge++);return N}finally{ut(G)}}function Wi(P){return P.changeListeners!==void 0&&P.changeListeners.length>0}function Da(P,N){var G=P.changeListeners||(P.changeListeners=[]);return G.push(N),x(function(){var ae=G.indexOf(N);ae!==-1&&G.splice(ae,1)})}function yi(P,N){var G=je(),ae=P.changeListeners;if(ae){for(var ge=0,Ye=(ae=ae.slice()).length;ge<Ye;ge++)ae[ge](N);ut(G)}}var uu={get:function(P,N){return N===Q?P[Q]:N==="length"?P[Q].getArrayLength():typeof N=="number"?po.get.call(P,N):typeof N!="string"||isNaN(N)?po.hasOwnProperty(N)?po[N]:P[N]:po.get.call(P,parseInt(N))},set:function(P,N,G){return N==="length"&&P[Q].setArrayLength(G),typeof N=="number"&&po.set.call(P,N,G),typeof N=="symbol"||isNaN(N)?P[N]=G:po.set.call(P,parseInt(N),G),!0},preventExtensions:function(P){return b("Observable arrays cannot be frozen"),!1}};function Fl(P,N,G,ae){G===void 0&&(G="ObservableArray@"+g()),ae===void 0&&(ae=!1);var ge,Ye,gt,zt=new ja(G,N,ae);ge=zt.values,Ye=Q,gt=zt,Object.defineProperty(ge,Ye,{enumerable:!1,writable:!1,configurable:!0,value:gt});var En=new Proxy(zt.values,uu);if(zt.proxy=En,P&&P.length){var _r=ar(!0);zt.spliceWithArray(0,0,P),eo(_r)}return En}var ja=function(){function P(N,G,ae){this.owned=ae,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new H(N||"ObservableArray@"+g()),this.enhancer=function(ge,Ye){return G(ge,Ye,N+"[..]")}}return P.prototype.dehanceValue=function(N){return this.dehancer!==void 0?this.dehancer(N):N},P.prototype.dehanceValues=function(N){return this.dehancer!==void 0&&N.length>0?N.map(this.dehancer):N},P.prototype.intercept=function(N){return ba(this,N)},P.prototype.observe=function(N,G){return G===void 0&&(G=!1),G&&N({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Da(this,N)},P.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},P.prototype.setArrayLength=function(N){if(typeof N!="number"||N<0)throw new Error("[mobx.array] Out of range: "+N);var G=this.values.length;if(N!==G)if(N>G){for(var ae=new Array(N-G),ge=0;ge<N-G;ge++)ae[ge]=void 0;this.spliceWithArray(G,0,ae)}else this.spliceWithArray(N,G-N)},P.prototype.updateArrayLength=function(N,G){if(N!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=G},P.prototype.spliceWithArray=function(N,G,ae){var ge=this;Un(this.atom);var Ye=this.values.length;if(N===void 0?N=0:N>Ye?N=Ye:N<0&&(N=Math.max(0,Ye+N)),G=arguments.length===1?Ye-N:G==null?0:Math.max(0,Math.min(G,Ye-N)),ae===void 0&&(ae=v),Qi(this)){var gt=Nr(this,{object:this.proxy,type:"splice",index:N,removedCount:G,added:ae});if(!gt)return v;G=gt.removedCount,ae=gt.added}ae=ae.length===0?ae:ae.map(function(En){return ge.enhancer(En,void 0)});var zt=this.spliceItemsIntoValues(N,G,ae);return G===0&&ae.length===0||this.notifyArraySplice(N,ae,zt),this.dehanceValues(zt)},P.prototype.spliceItemsIntoValues=function(N,G,ae){var ge;if(ae.length<1e4)return(ge=this.values).splice.apply(ge,we([N,G],ae));var Ye=this.values.slice(N,N+G);return this.values=this.values.slice(0,N).concat(ae,this.values.slice(N+G)),Ye},P.prototype.notifyArrayChildUpdate=function(N,G,ae){var ge=!this.owned&&!1,Ye=Wi(this),gt=Ye||ge?{object:this.proxy,type:"update",index:N,newValue:G,oldValue:ae}:null;this.atom.reportChanged(),Ye&&yi(this,gt)},P.prototype.notifyArraySplice=function(N,G,ae){var ge=!this.owned&&!1,Ye=Wi(this),gt=Ye||ge?{object:this.proxy,type:"splice",index:N,removed:ae,added:G,removedCount:ae.length,addedCount:G.length}:null;this.atom.reportChanged(),Ye&&yi(this,gt)},P}(),po={intercept:function(P){return this[Q].intercept(P)},observe:function(P,N){return N===void 0&&(N=!1),this[Q].observe(P,N)},clear:function(){return this.splice(0)},replace:function(P){var N=this[Q];return N.spliceWithArray(0,N.values.length,P)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(P,N){for(var G=[],ae=2;ae<arguments.length;ae++)G[ae-2]=arguments[ae];var ge=this[Q];switch(arguments.length){case 0:return[];case 1:return ge.spliceWithArray(P);case 2:return ge.spliceWithArray(P,N)}return ge.spliceWithArray(P,N,G)},spliceWithArray:function(P,N,G){return this[Q].spliceWithArray(P,N,G)},push:function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];var G=this[Q];return G.spliceWithArray(G.values.length,0,P),G.values.length},pop:function(){return this.splice(Math.max(this[Q].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];var G=this[Q];return G.spliceWithArray(0,0,P),G.values.length},reverse:function(){var P=this.slice();return P.reverse.apply(P,arguments)},sort:function(P){var N=this.slice();return N.sort.apply(N,arguments)},remove:function(P){var N=this[Q],G=N.dehanceValues(N.values).indexOf(P);return G>-1&&(this.splice(G,1),!0)},get:function(P){var N=this[Q];if(N&&P<N.values.length)return N.atom.reportObserved(),N.dehanceValue(N.values[P])},set:function(P,N){var G=this[Q],ae=G.values;if(P<ae.length){Un(G.atom);var ge=ae[P];if(Qi(G)){var Ye=Nr(G,{type:"update",object:G.proxy,index:P,newValue:N});if(!Ye)return;N=Ye.newValue}(N=G.enhancer(N,ge))!==ge&&(ae[P]=N,G.notifyArrayChildUpdate(P,N,ge))}else{if(P!==ae.length)throw new Error("[mobx.array] Index out of bounds, "+P+" is larger than "+ae.length);G.spliceWithArray(P,0,[N])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(P){typeof Array.prototype[P]=="function"&&(po[P]=function(){var N=this[Q];N.atom.reportObserved();var G=N.dehanceValues(N.values);return G[P].apply(G,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(P){typeof Array.prototype[P]=="function"&&(po[P]=function(N,G){var ae=this,ge=this[Q];return ge.atom.reportObserved(),ge.dehanceValues(ge.values)[P](function(Ye,gt){return N.call(G,Ye,gt,ae)},G)})}),["reduce","reduceRight"].forEach(function(P){po[P]=function(){var N=this,G=this[Q];G.atom.reportObserved();var ae=arguments[0];return arguments[0]=function(ge,Ye,gt){return Ye=G.dehanceValue(Ye),ae(ge,Ye,gt,N)},G.values[P].apply(G.values,arguments)}});var Uu,qa=D("ObservableArrayAdministration",ja);function _a(P){return M(P)&&qa(P[Q])}var Cc,op={},Dc=function(){function P(N,G,ae){if(G===void 0&&(G=Pt),ae===void 0&&(ae="ObservableMap@"+g()),this.enhancer=G,this.name=ae,this[Uu]=op,this._keysAtom=z(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(N)}return P.prototype._has=function(N){return this._data.has(N)},P.prototype.has=function(N){var G=this;if(!Nn.trackingDerivation)return this._has(N);var ae=this._hasMap.get(N);if(!ae){var ge=ae=new Dr(this._has(N),An,this.name+"."+j(N)+"?",!1);this._hasMap.set(N,ge),Wr(ge,function(){return G._hasMap.delete(N)})}return ae.get()},P.prototype.set=function(N,G){var ae=this._has(N);if(Qi(this)){var ge=Nr(this,{type:ae?"update":"add",object:this,newValue:G,name:N});if(!ge)return this;G=ge.newValue}return ae?this._updateValue(N,G):this._addValue(N,G),this},P.prototype.delete=function(N){var G=this;if(Un(this._keysAtom),Qi(this)&&!(ge=Nr(this,{type:"delete",object:this,name:N})))return!1;if(this._has(N)){var ae=Wi(this),ge=ae?{type:"delete",object:this,oldValue:this._data.get(N).value,name:N}:null;return si(function(){G._keysAtom.reportChanged(),G._updateHasMapEntry(N,!1),G._data.get(N).setNewValue(void 0),G._data.delete(N)}),ae&&yi(this,ge),!0}return!1},P.prototype._updateHasMapEntry=function(N,G){var ae=this._hasMap.get(N);ae&&ae.setNewValue(G)},P.prototype._updateValue=function(N,G){var ae=this._data.get(N);if((G=ae.prepareNewValue(G))!==Nn.UNCHANGED){var ge=Wi(this),Ye=ge?{type:"update",object:this,oldValue:ae.value,name:N,newValue:G}:null;ae.setNewValue(G),ge&&yi(this,Ye)}},P.prototype._addValue=function(N,G){var ae=this;Un(this._keysAtom),si(function(){var gt=new Dr(G,ae.enhancer,ae.name+"."+j(N),!1);ae._data.set(N,gt),G=gt.value,ae._updateHasMapEntry(N,!0),ae._keysAtom.reportChanged()});var ge=Wi(this),Ye=ge?{type:"add",object:this,name:N,newValue:G}:null;ge&&yi(this,Ye)},P.prototype.get=function(N){return this.has(N)?this.dehanceValue(this._data.get(N).get()):this.dehanceValue(void 0)},P.prototype.dehanceValue=function(N){return this.dehancer!==void 0?this.dehancer(N):N},P.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},P.prototype.values=function(){var N=this,G=this.keys();return Rr({next:function(){var ae=G.next(),ge=ae.done,Ye=ae.value;return{done:ge,value:ge?void 0:N.get(Ye)}}})},P.prototype.entries=function(){var N=this,G=this.keys();return Rr({next:function(){var ae=G.next(),ge=ae.done,Ye=ae.value;return{done:ge,value:ge?void 0:[Ye,N.get(Ye)]}}})},P.prototype[Uu=Q,Symbol.iterator]=function(){return this.entries()},P.prototype.forEach=function(N,G){var ae,ge;try{for(var Ye=ie(this),gt=Ye.next();!gt.done;gt=Ye.next()){var zt=Pe(gt.value,2),En=zt[0],_r=zt[1];N.call(G,_r,En,this)}}catch(fn){ae={error:fn}}finally{try{gt&&!gt.done&&(ge=Ye.return)&&ge.call(Ye)}finally{if(ae)throw ae.error}}},P.prototype.merge=function(N){var G=this;return Ko(N)&&(N=N.toJS()),si(function(){var ae=ar(!0);try{S(N)?$(N).forEach(function(ge){return G.set(ge,N[ge])}):Array.isArray(N)?N.forEach(function(ge){var Ye=Pe(ge,2),gt=Ye[0],zt=Ye[1];return G.set(gt,zt)}):I(N)?(N.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+N.constructor.name),N.forEach(function(ge,Ye){return G.set(Ye,ge)})):N!=null&&b("Cannot initialize map from "+N)}finally{eo(ae)}}),this},P.prototype.clear=function(){var N=this;si(function(){Qe(function(){var G,ae;try{for(var ge=ie(N.keys()),Ye=ge.next();!Ye.done;Ye=ge.next()){var gt=Ye.value;N.delete(gt)}}catch(zt){G={error:zt}}finally{try{Ye&&!Ye.done&&(ae=ge.return)&&ae.call(ge)}finally{if(G)throw G.error}}})})},P.prototype.replace=function(N){var G=this;return si(function(){var ae,ge,Ye,gt,zt=function(ri){if(I(ri)||Ko(ri))return ri;if(Array.isArray(ri))return new Map(ri);if(S(ri)){var Ul=new Map;for(var wl in ri)Ul.set(wl,ri[wl]);return Ul}return b("Cannot convert to map from '"+ri+"'")}(N),En=new Map,_r=!1;try{for(var fn=ie(G._data.keys()),Gr=fn.next();!Gr.done;Gr=fn.next()){var mr=Gr.value;if(!zt.has(mr))if(G.delete(mr))_r=!0;else{var Ir=G._data.get(mr);En.set(mr,Ir)}}}catch(ri){ae={error:ri}}finally{try{Gr&&!Gr.done&&(ge=fn.return)&&ge.call(fn)}finally{if(ae)throw ae.error}}try{for(var ca=ie(zt.entries()),Ao=ca.next();!Ao.done;Ao=ca.next()){var ta=Pe(Ao.value,2),bl=(mr=ta[0],Ir=ta[1],G._data.has(mr));if(G.set(mr,Ir),G._data.has(mr)){var _l=G._data.get(mr);En.set(mr,_l),bl||(_r=!0)}}}catch(ri){Ye={error:ri}}finally{try{Ao&&!Ao.done&&(gt=ca.return)&&gt.call(ca)}finally{if(Ye)throw Ye.error}}if(!_r)if(G._data.size!==En.size)G._keysAtom.reportChanged();else for(var $l=G._data.keys(),su=En.keys(),Ka=$l.next(),cu=su.next();!Ka.done;){if(Ka.value!==cu.value){G._keysAtom.reportChanged();break}Ka=$l.next(),cu=su.next()}G._data=En}),this},Object.defineProperty(P.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.toPOJO=function(){var N,G,ae={};try{for(var ge=ie(this),Ye=ge.next();!Ye.done;Ye=ge.next()){var gt=Pe(Ye.value,2),zt=gt[0],En=gt[1];ae[typeof zt=="symbol"?zt:j(zt)]=En}}catch(_r){N={error:_r}}finally{try{Ye&&!Ye.done&&(G=ge.return)&&G.call(ge)}finally{if(N)throw N.error}}return ae},P.prototype.toJS=function(){return new Map(this)},P.prototype.toJSON=function(){return this.toPOJO()},P.prototype.toString=function(){var N=this;return this.name+"[{ "+Array.from(this.keys()).map(function(G){return j(G)+": "+N.get(G)}).join(", ")+" }]"},P.prototype.observe=function(N,G){return Da(this,N)},P.prototype.intercept=function(N){return ba(this,N)},P}(),Ko=D("ObservableMap",Dc),Bu={},Ya=function(){function P(N,G,ae){if(G===void 0&&(G=Pt),ae===void 0&&(ae="ObservableSet@"+g()),this.name=ae,this[Cc]=Bu,this._data=new Set,this._atom=z(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(ge,Ye){return G(ge,Ye,ae)},N&&this.replace(N)}return P.prototype.dehanceValue=function(N){return this.dehancer!==void 0?this.dehancer(N):N},P.prototype.clear=function(){var N=this;si(function(){Qe(function(){var G,ae;try{for(var ge=ie(N._data.values()),Ye=ge.next();!Ye.done;Ye=ge.next()){var gt=Ye.value;N.delete(gt)}}catch(zt){G={error:zt}}finally{try{Ye&&!Ye.done&&(ae=ge.return)&&ae.call(ge)}finally{if(G)throw G.error}}})})},P.prototype.forEach=function(N,G){var ae,ge;try{for(var Ye=ie(this),gt=Ye.next();!gt.done;gt=Ye.next()){var zt=gt.value;N.call(G,zt,zt,this)}}catch(En){ae={error:En}}finally{try{gt&&!gt.done&&(ge=Ye.return)&&ge.call(Ye)}finally{if(ae)throw ae.error}}},Object.defineProperty(P.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.add=function(N){var G=this;if(Un(this._atom),Qi(this)&&!(ge=Nr(this,{type:"add",object:this,newValue:N})))return this;if(!this.has(N)){si(function(){G._data.add(G.enhancer(N,void 0)),G._atom.reportChanged()});var ae=Wi(this),ge=ae?{type:"add",object:this,newValue:N}:null;ae&&yi(this,ge)}return this},P.prototype.delete=function(N){var G=this;if(Qi(this)&&!(ge=Nr(this,{type:"delete",object:this,oldValue:N})))return!1;if(this.has(N)){var ae=Wi(this),ge=ae?{type:"delete",object:this,oldValue:N}:null;return si(function(){G._atom.reportChanged(),G._data.delete(N)}),ae&&yi(this,ge),!0}return!1},P.prototype.has=function(N){return this._atom.reportObserved(),this._data.has(this.dehanceValue(N))},P.prototype.entries=function(){var N=0,G=Array.from(this.keys()),ae=Array.from(this.values());return Rr({next:function(){var ge=N;return N+=1,ge<ae.length?{value:[G[ge],ae[ge]],done:!1}:{done:!0}}})},P.prototype.keys=function(){return this.values()},P.prototype.values=function(){this._atom.reportObserved();var N=this,G=0,ae=Array.from(this._data.values());return Rr({next:function(){return G<ae.length?{value:N.dehanceValue(ae[G++]),done:!1}:{done:!0}}})},P.prototype.replace=function(N){var G=this;return ni(N)&&(N=N.toJS()),si(function(){var ae=ar(!0);try{Array.isArray(N)||B(N)?(G.clear(),N.forEach(function(ge){return G.add(ge)})):N!=null&&b("Cannot initialize set from "+N)}finally{eo(ae)}}),this},P.prototype.observe=function(N,G){return Da(this,N)},P.prototype.intercept=function(N){return ba(this,N)},P.prototype.toJS=function(){return new Set(this)},P.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},P.prototype[Cc=Q,Symbol.iterator]=function(){return this.values()},P}(),ni=D("ObservableSet",Ya),jc=function(){function P(N,G,ae,ge){G===void 0&&(G=new Map),this.target=N,this.values=G,this.name=ae,this.defaultEnhancer=ge,this.keysAtom=new H(ae+".keys")}return P.prototype.read=function(N){return this.values.get(N).get()},P.prototype.write=function(N,G){var ae=this.target,ge=this.values.get(N);if(ge instanceof Ha)ge.set(G);else{if(Qi(this)){if(!(gt=Nr(this,{type:"update",object:this.proxy||ae,name:N,newValue:G})))return;G=gt.newValue}if((G=ge.prepareNewValue(G))!==Nn.UNCHANGED){var Ye=Wi(this),gt=Ye?{type:"update",object:this.proxy||ae,oldValue:ge.value,name:N,newValue:G}:null;ge.setNewValue(G),Ye&&yi(this,gt)}}},P.prototype.has=function(N){var G=this.pendingKeys||(this.pendingKeys=new Map),ae=G.get(N);if(ae)return ae.get();var ge=!!this.values.get(N);return ae=new Dr(ge,An,this.name+"."+j(N)+"?",!1),G.set(N,ae),ae.get()},P.prototype.addObservableProp=function(N,G,ae){ae===void 0&&(ae=this.defaultEnhancer);var ge=this.target;if(Qi(this)){var Ye=Nr(this,{object:this.proxy||ge,name:N,type:"add",newValue:G});if(!Ye)return;G=Ye.newValue}var gt=new Dr(G,ae,this.name+"."+j(N),!1);this.values.set(N,gt),G=gt.value,Object.defineProperty(ge,N,function(zt){return wa[zt]||(wa[zt]={configurable:!0,enumerable:!0,get:function(){return this[Q].read(zt)},set:function(En){this[Q].write(zt,En)}})}(N)),this.notifyPropertyAddition(N,G)},P.prototype.addComputedProp=function(N,G,ae){var ge,Ye,gt,zt=this.target;ae.name=ae.name||this.name+"."+j(G),this.values.set(G,new Ha(ae)),(N===zt||(ge=N,Ye=G,!(gt=Object.getOwnPropertyDescriptor(ge,Ye))||gt.configurable!==!1&&gt.writable!==!1))&&Object.defineProperty(N,G,function(En){return Is[En]||(Is[En]={configurable:Nn.computedConfigurable,enumerable:!1,get:function(){return Gi(this).read(En)},set:function(_r){Gi(this).write(En,_r)}})}(G))},P.prototype.remove=function(N){if(this.values.has(N)){var G=this.target;if(Qi(this)&&!(En=Nr(this,{object:this.proxy||G,name:N,type:"remove"})))return;try{Zi();var ae=Wi(this),ge=!1,Ye=this.values.get(N),gt=Ye&&Ye.get();if(Ye&&Ye.set(void 0),this.keysAtom.reportChanged(),this.values.delete(N),this.pendingKeys){var zt=this.pendingKeys.get(N);zt&&zt.set(!1)}delete this.target[N];var En=ae?{type:"remove",object:this.proxy||G,oldValue:gt,name:N}:null;ae&&yi(this,En)}finally{la()}}},P.prototype.illegalAccess=function(N,G){},P.prototype.observe=function(N,G){return Da(this,N)},P.prototype.intercept=function(N){return ba(this,N)},P.prototype.notifyPropertyAddition=function(N,G){var ae=Wi(this),ge=ae?{type:"add",object:this.proxy||this.target,name:N,newValue:G}:null;if(ae&&yi(this,ge),this.pendingKeys){var Ye=this.pendingKeys.get(N);Ye&&Ye.set(!0)}this.keysAtom.reportChanged()},P.prototype.getKeys=function(){var N,G;this.keysAtom.reportObserved();var ae=[];try{for(var ge=ie(this.values),Ye=ge.next();!Ye.done;Ye=ge.next()){var gt=Pe(Ye.value,2),zt=gt[0];gt[1]instanceof Dr&&ae.push(zt)}}catch(En){N={error:En}}finally{try{Ye&&!Ye.done&&(G=ge.return)&&G.call(ge)}finally{if(N)throw N.error}}return ae},P}();function ua(P,N,G){if(N===void 0&&(N=""),G===void 0&&(G=Pt),Object.prototype.hasOwnProperty.call(P,Q))return P[Q];S(P)||(N=(P.constructor.name||"ObservableObject")+"@"+g()),N||(N="ObservableObject@"+g());var ae=new jc(P,new Map,j(N),G);return E(P,Q,ae),ae}var wa=Object.create(null),Is=Object.create(null);function Gi(P){var N=P[Q];return N||(Be(P),P[Q])}var ea=D("ObservableObjectAdministration",jc);function ci(P){return!!M(P)&&(Be(P),ea(P[Q]))}function sa(P,N){if(typeof P=="object"&&P!==null){if(_a(P))return N!==void 0&&b(!1),P[Q].atom;if(ni(P))return P[Q];if(Ko(P)){var G=P;return N===void 0?G._keysAtom:((ae=G._data.get(N)||G._hasMap.get(N))||b(!1),ae)}var ae;if(Be(P),N&&!P[Q]&&P[N],ci(P))return N?((ae=P[Q].values.get(N))||b(!1),ae):b(!1);if(W(P)||yl(P)||$u(P))return P}else if(typeof P=="function"&&$u(P[Q]))return P[Q];return b(!1)}function Ii(P,N){return P||b("Expecting some object"),N!==void 0?Ii(sa(P,N)):W(P)||yl(P)||$u(P)||Ko(P)||ni(P)?P:(Be(P),P[Q]?P[Q]:void b(!1))}var dt=Object.prototype.toString;function Ft(P,N,G){return G===void 0&&(G=-1),$t(P,N,G)}function $t(P,N,G,ae,ge){if(P===N)return P!==0||1/P==1/N;if(P==null||N==null)return!1;if(P!=P)return N!=N;var Ye=typeof P;if(Ye!=="function"&&Ye!=="object"&&typeof N!="object")return!1;var gt=dt.call(P);if(gt!==dt.call(N))return!1;switch(gt){case"[object RegExp]":case"[object String]":return""+P==""+N;case"[object Number]":return+P!=+P?+N!=+N:+P==0?1/+P==1/N:+P==+N;case"[object Date]":case"[object Boolean]":return+P==+N;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(P)===Symbol.valueOf.call(N);case"[object Map]":case"[object Set]":G>=0&&G++}P=mn(P),N=mn(N);var zt=gt==="[object Array]";if(!zt){if(typeof P!="object"||typeof N!="object")return!1;var En=P.constructor,_r=N.constructor;if(En!==_r&&!(typeof En=="function"&&En instanceof En&&typeof _r=="function"&&_r instanceof _r)&&"constructor"in P&&"constructor"in N)return!1}if(G===0)return!1;G<0&&(G=-1),ge=ge||[];for(var fn=(ae=ae||[]).length;fn--;)if(ae[fn]===P)return ge[fn]===N;if(ae.push(P),ge.push(N),zt){if((fn=P.length)!==N.length)return!1;for(;fn--;)if(!$t(P[fn],N[fn],G-1,ae,ge))return!1}else{var Gr=Object.keys(P),mr=void 0;if(fn=Gr.length,Object.keys(N).length!==fn)return!1;for(;fn--;)if(!fr(N,mr=Gr[fn])||!$t(P[mr],N[mr],G-1,ae,ge))return!1}return ae.pop(),ge.pop(),!0}function mn(P){return _a(P)?P.slice():I(P)||Ko(P)||B(P)||ni(P)?Array.from(P.entries()):P}function fr(P,N){return Object.prototype.hasOwnProperty.call(P,N)}function Rr(P){return P[Symbol.iterator]=ho,P}function ho(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:xc,extras:{getDebugName:function(P,N){return(N!==void 0?sa(P,N):ci(P)||Ko(P)||ni(P)?Ii(P):sa(P)).name}},$mobx:Q})}).call(this,r(163),r(68))},function(n,a,r){var u=r(113),c=r(42),v=r(179);u||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,a,r){var u=r(41),c=r(100),v=r(80),f=r(58),g=r(116),b="Array Iterator",_=f.set,x=f.getterFor(b);n.exports=g(Array,"Array",function(A,M){_(this,{type:b,target:u(A),index:0,kind:M})},function(){var A=x(this),M=A.target,S=A.kind,E=A.index++;return!M||E>=M.length?(A.target=void 0,{value:void 0,done:!0}):S=="keys"?{value:E,done:!1}:S=="values"?{value:M[E],done:!1}:{value:[E,M[E]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var u=r(16),c=r(7),v=r(46),f=r(76),g=r(34),b=r(15),_=r(71),x=r(36),A=r(108),M=r(18),S=r(35),E=r(96),D=r(30),I=r(33),B=r(54),$=r(87),j=r(32),U=r(40),K=r(41),Q=r(86),H=r(39),W=r(69),z=r(60),Y=r(77),q=r(74),oe=r(139),ie=r(112),Pe=r(50),we=r(38),be=r(84),ye=r(98),Xe=r(42),Ze=r(89),yt=r(93),Be=r(72),qt=r(90),Yt=r(28),Pt=r(140),An=r(141),$e=r(78),Se=r(58),Ae=r(79).forEach,qe=yt("hidden"),_t="Symbol",ht=Yt("toPrimitive"),Vt=Se.set,Jt=Se.getterFor(_t),an=Object.prototype,Kt=c.Symbol,rt=Kt&&Kt.prototype,pn=c.TypeError,Ue=c.QObject,_n=v("JSON","stringify"),Jn=Pe.f,le=we.f,Qn=oe.f,Pr=be.f,Xr=b([].push),ao=Ze("symbols"),Un=Ze("op-symbols"),bo=Ze("string-to-symbol-registry"),Te=Ze("symbol-to-string-registry"),Qe=Ze("wks"),je=!Ue||!Ue.prototype||!Ue.prototype.findChild,ut=x&&M(function(){return z(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a!=7})?function(Tn,Fn,Hn){var ar=Jn(an,Fn);ar&&delete an[Fn],le(Tn,Fn,Hn),ar&&Tn!==an&&le(an,Fn,ar)}:le,rn=function(Tn,Fn){var Hn=ao[Tn]=z(rt);return Vt(Hn,{type:_t,tag:Tn,description:Fn}),x||(Hn.description=Fn),Hn},Zt=function(Tn,Fn,Hn){Tn===an&&Zt(Un,Fn,Hn),j(Tn);var ar=Q(Fn);return j(Hn),S(ao,ar)?(Hn.enumerable?(S(Tn,qe)&&Tn[qe][ar]&&(Tn[qe][ar]=!1),Hn=z(Hn,{enumerable:W(0,!1)})):(S(Tn,qe)||le(Tn,qe,W(1,{})),Tn[qe][ar]=!0),ut(Tn,ar,Hn)):le(Tn,ar,Hn)},Rn=function(Tn,Fn){j(Tn);var Hn=K(Fn),ar=Y(Hn).concat(Yo(Hn));return Ae(ar,function(eo){x&&!g(Er,Hn,eo)||Zt(Tn,eo,Hn[eo])}),Tn},Er=function(Tn){var Fn=Q(Tn),Hn=g(Pr,this,Fn);return!(this===an&&S(ao,Fn)&&!S(Un,Fn))&&(!(Hn||!S(this,Fn)||!S(ao,Fn)||S(this,qe)&&this[qe][Fn])||Hn)},li=function(Tn,Fn){var Hn=K(Tn),ar=Q(Fn);if(Hn!==an||!S(ao,ar)||S(Un,ar)){var eo=Jn(Hn,ar);return!eo||!S(ao,ar)||S(Hn,qe)&&Hn[qe][ar]||(eo.enumerable=!0),eo}},Si=function(Tn){var Fn=Qn(K(Tn)),Hn=[];return Ae(Fn,function(ar){S(ao,ar)||S(Be,ar)||Xr(Hn,ar)}),Hn},Yo=function(Tn){var Fn=Tn===an,Hn=Qn(Fn?Un:K(Tn)),ar=[];return Ae(Hn,function(eo){!S(ao,eo)||Fn&&!S(an,eo)||Xr(ar,ao[eo])}),ar};if(A||(Kt=function(){if(B(rt,this))throw pn("Symbol is not a constructor");var Tn=arguments.length&&arguments[0]!==void 0?H(arguments[0]):void 0,Fn=qt(Tn),Hn=function(ar){this===an&&g(Hn,Un,ar),S(this,qe)&&S(this[qe],Fn)&&(this[qe][Fn]=!1),ut(this,Fn,W(1,ar))};return x&&je&&ut(an,Fn,{configurable:!0,set:Hn}),rn(Fn,Tn)},Xe(rt=Kt.prototype,"toString",function(){return Jt(this).tag}),Xe(Kt,"withoutSetter",function(Tn){return rn(qt(Tn),Tn)}),be.f=Er,we.f=Zt,Pe.f=li,q.f=oe.f=Si,ie.f=Yo,Pt.f=function(Tn){return rn(Yt(Tn),Tn)},x&&(le(rt,"description",{configurable:!0,get:function(){return Jt(this).description}}),_||Xe(an,"propertyIsEnumerable",Er,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Kt}),Ae(Y(Qe),function(Tn){An(Tn)}),u({target:_t,stat:!0,forced:!A},{for:function(Tn){var Fn=H(Tn);if(S(bo,Fn))return bo[Fn];var Hn=Kt(Fn);return bo[Fn]=Hn,Te[Hn]=Fn,Hn},keyFor:function(Tn){if(!$(Tn))throw pn(Tn+" is not a symbol");if(S(Te,Tn))return Te[Tn]},useSetter:function(){je=!0},useSimple:function(){je=!1}}),u({target:"Object",stat:!0,forced:!A,sham:!x},{create:function(Tn,Fn){return Fn===void 0?z(Tn):Rn(z(Tn),Fn)},defineProperty:Zt,defineProperties:Rn,getOwnPropertyDescriptor:li}),u({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:Si,getOwnPropertySymbols:Yo}),u({target:"Object",stat:!0,forced:M(function(){ie.f(1)})},{getOwnPropertySymbols:function(Tn){return ie.f(U(Tn))}}),_n&&u({target:"JSON",stat:!0,forced:!A||M(function(){var Tn=Kt();return _n([Tn])!="[null]"||_n({a:Tn})!="{}"||_n(Object(Tn))!="{}"})},{stringify:function(Tn,Fn,Hn){var ar=ye(arguments),eo=Fn;if((I(Fn)||Tn!==void 0)&&!$(Tn))return E(Fn)||(Fn=function(Dr,ml){if(D(eo)&&(ml=g(eo,this,Dr,ml)),!$(ml))return ml}),ar[1]=Fn,f(_n,null,ar)}}),!rt[ht]){var ti=rt.valueOf;Xe(rt,ht,function(Tn){return g(ti,this)})}$e(Kt,_t),Be[qe]=!0},function(n,a,r){var u=r(7),c=r(152),v=r(153),f=r(3),g=r(57),b=r(28),_=b("iterator"),x=b("toStringTag"),A=f.values,M=function(E,D){if(E){if(E[_]!==A)try{g(E,_,A)}catch{E[_]=A}if(E[x]||g(E,x,D),c[D]){for(var I in f)if(E[I]!==f[I])try{g(E,I,f[I])}catch{E[I]=f[I]}}}};for(var S in c)M(u[S]&&u[S].prototype,S);M(v,"DOMTokenList")},function(n,a,r){var u=r(151).charAt,c=r(39),v=r(58),f=r(116),g="String Iterator",b=v.set,_=v.getterFor(g);f(String,"String",function(x){b(this,{type:g,string:c(x),index:0})},function(){var x,A=_(this),M=A.string,S=A.index;return S>=M.length?{value:void 0,done:!0}:(x=u(M,S),A.index+=x.length,{value:x,done:!1})})},function(n,a,r){(function(u){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof u=="object"&&u)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var u=r(16),c=r(36),v=r(7),f=r(15),g=r(35),b=r(30),_=r(54),x=r(39),A=r(38).f,M=r(134),S=v.Symbol,E=S&&S.prototype;if(c&&b(S)&&(!("description"in E)||S().description!==void 0)){var D={},I=function(){var H=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),W=_(E,this)?new S(H):H===void 0?S():S(H);return H===""&&(D[W]=!0),W};M(I,S),I.prototype=E,E.constructor=I;var B=String(S("test"))=="Symbol(test)",$=f(E.toString),j=f(E.valueOf),U=/^Symbol\((.*)\)[^)]+$/,K=f("".replace),Q=f("".slice);A(E,"description",{configurable:!0,get:function(){var H=j(this),W=$(H);if(g(D,H))return"";var z=B?Q(W,7,-1):K(W,U,"$1");return z===""?void 0:z}}),u({global:!0,forced:!0},{Symbol:I})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return f.a}),r.d(a,"c",function(){return f.e}),r.d(a,"h",function(){return U}),r.d(a,"i",function(){return B}),r.d(a,"j",function(){return D}),r.d(a,"b",function(){return Pe}),r.d(a,"e",function(){return Xe}),r.d(a,"f",function(){return we}),r.d(a,"g",function(){return ao});var u,c,v,f=r(0),g=0,b=[],_=f.i.__b,x=f.i.__r,A=f.i.diffed,M=f.i.__c,S=f.i.unmount;function E(Te,Qe){f.i.__h&&f.i.__h(c,Te,g||Qe),g=0;var je=c.__H||(c.__H={__:[],__h:[]});return Te>=je.__.length&&je.__.push({}),je.__[Te]}function D(Te){return g=1,I(q,Te)}function I(Te,Qe,je){var ut=E(u++,2);return ut.t=Te,ut.__c||(ut.__=[je?je(Qe):q(void 0,Qe),function(rn){var Zt=ut.t(ut.__[0],rn);ut.__[0]!==Zt&&(ut.__=[Zt,ut.__[1]],ut.__c.setState({}))}],ut.__c=c),ut.__}function B(Te,Qe){var je=E(u++,3);!f.i.__s&&Y(je.__H,Qe)&&(je.__=Te,je.__H=Qe,c.__H.__h.push(je))}function $(Te,Qe){var je=E(u++,4);!f.i.__s&&Y(je.__H,Qe)&&(je.__=Te,je.__H=Qe,c.__h.push(je))}function j(Te,Qe){var je=E(u++,7);return Y(je.__H,Qe)&&(je.__=Te(),je.__H=Qe,je.__h=Te),je.__}function U(Te,Qe){return g=8,j(function(){return Te},Qe)}function K(){var Te;for(b.sort(function(Qe,je){return Qe.__v.__b-je.__v.__b});Te=b.pop();)if(Te.__P)try{Te.__H.__h.forEach(W),Te.__H.__h.forEach(z),Te.__H.__h=[]}catch(Qe){Te.__H.__h=[],f.i.__e(Qe,Te.__v)}}f.i.__b=function(Te){c=null,_&&_(Te)},f.i.__r=function(Te){x&&x(Te),u=0;var Qe=(c=Te.__c).__H;Qe&&(Qe.__h.forEach(W),Qe.__h.forEach(z),Qe.__h=[])},f.i.diffed=function(Te){A&&A(Te);var Qe=Te.__c;Qe&&Qe.__H&&Qe.__H.__h.length&&(b.push(Qe)!==1&&v===f.i.requestAnimationFrame||((v=f.i.requestAnimationFrame)||H)(K)),c=null},f.i.__c=function(Te,Qe){Qe.some(function(je){try{je.__h.forEach(W),je.__h=je.__h.filter(function(ut){return!ut.__||z(ut)})}catch(ut){Qe.some(function(rn){rn.__h&&(rn.__h=[])}),Qe=[],f.i.__e(ut,je.__v)}}),M&&M(Te,Qe)},f.i.unmount=function(Te){S&&S(Te);var Qe,je=Te.__c;je&&je.__H&&(je.__H.__.forEach(function(ut){try{W(ut)}catch(rn){Qe=rn}}),Qe&&f.i.__e(Qe,je.__v))};var Q=typeof requestAnimationFrame=="function";function H(Te){var Qe,je=function(){clearTimeout(ut),Q&&cancelAnimationFrame(Qe),setTimeout(Te)},ut=setTimeout(je,100);Q&&(Qe=requestAnimationFrame(je))}function W(Te){var Qe=c,je=Te.__c;typeof je=="function"&&(Te.__c=void 0,je()),c=Qe}function z(Te){var Qe=c;Te.__c=Te.__(),c=Qe}function Y(Te,Qe){return!Te||Te.length!==Qe.length||Qe.some(function(je,ut){return je!==Te[ut]})}function q(Te,Qe){return typeof Qe=="function"?Qe(Te):Qe}function oe(Te,Qe){for(var je in Qe)Te[je]=Qe[je];return Te}function ie(Te,Qe){for(var je in Te)if(je!=="__source"&&!(je in Qe))return!0;for(var ut in Qe)if(ut!=="__source"&&Te[ut]!==Qe[ut])return!0;return!1}function Pe(Te){this.props=Te}function we(Te,Qe){function je(rn){var Zt=this.props.ref,Rn=Zt==rn.ref;return!Rn&&Zt&&(Zt.call?Zt(null):Zt.current=null),Qe?!Qe(this.props,rn)||!Rn:ie(this.props,rn)}function ut(rn){return this.shouldComponentUpdate=je,Object(f.e)(Te,rn)}return ut.displayName="Memo("+(Te.displayName||Te.name)+")",ut.prototype.isReactComponent=!0,ut.__f=!0,ut}(Pe.prototype=new f.a).isPureReactComponent=!0,Pe.prototype.shouldComponentUpdate=function(Te,Qe){return ie(this.props,Te)||ie(this.state,Qe)};var be=f.i.__b;f.i.__b=function(Te){Te.type&&Te.type.__f&&Te.ref&&(Te.props.ref=Te.ref,Te.ref=null),be&&be(Te)};var ye=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Xe(Te){function Qe(je,ut){var rn=oe({},je);return delete rn.ref,Te(rn,!(ut=je.ref||ut)||typeof ut=="object"&&!("current"in ut)?null:ut)}return Qe.$$typeof=ye,Qe.render=Qe,Qe.prototype.isReactComponent=Qe.__f=!0,Qe.displayName="ForwardRef("+(Te.displayName||Te.name)+")",Qe}var Ze=function(Te,Qe){return Te==null?null:Object(f.k)(Object(f.k)(Te).map(Qe))},yt={map:Ze,forEach:Ze,count:function(Te){return Te?Object(f.k)(Te).length:0},only:function(Te){var Qe=Object(f.k)(Te);if(Qe.length!==1)throw"Children.only";return Qe[0]},toArray:f.k},Be=f.i.__e;f.i.__e=function(Te,Qe,je){if(Te.then){for(var ut,rn=Qe;rn=rn.__;)if((ut=rn.__c)&&ut.__c)return Qe.__e==null&&(Qe.__e=je.__e,Qe.__k=je.__k),ut.__c(Te,Qe)}Be(Te,Qe,je)};var qt=f.i.unmount;function Yt(Te,Qe,je){return Te&&(Te.__c&&Te.__c.__H&&(Te.__c.__H.__.forEach(function(ut){typeof ut.__c=="function"&&ut.__c()}),Te.__c.__H=null),(Te=oe({},Te)).__c!=null&&(Te.__c.__P===je&&(Te.__c.__P=Qe),Te.__c=null),Te.__k=Te.__k&&Te.__k.map(function(ut){return Yt(ut,Qe,je)})),Te}function Pt(Te,Qe,je){return Te&&(Te.__v=null,Te.__k=Te.__k&&Te.__k.map(function(ut){return Pt(ut,Qe,je)}),Te.__c&&Te.__c.__P===Qe&&(Te.__e&&je.insertBefore(Te.__e,Te.__d),Te.__c.__e=!0,Te.__c.__P=je)),Te}function An(){this.__u=0,this.t=null,this.__b=null}function $e(Te){var Qe=Te.__.__c;return Qe&&Qe.__e&&Qe.__e(Te)}function Se(){this.u=null,this.o=null}f.i.unmount=function(Te){var Qe=Te.__c;Qe&&Qe.__R&&Qe.__R(),Qe&&Te.__h===!0&&(Te.type=null),qt&&qt(Te)},(An.prototype=new f.a).__c=function(Te,Qe){var je=Qe.__c,ut=this;ut.t==null&&(ut.t=[]),ut.t.push(je);var rn=$e(ut.__v),Zt=!1,Rn=function(){Zt||(Zt=!0,je.__R=null,rn?rn(Er):Er())};je.__R=Rn;var Er=function(){if(!--ut.__u){if(ut.state.__e){var Si=ut.state.__e;ut.__v.__k[0]=Pt(Si,Si.__c.__P,Si.__c.__O)}var Yo;for(ut.setState({__e:ut.__b=null});Yo=ut.t.pop();)Yo.forceUpdate()}},li=Qe.__h===!0;ut.__u++||li||ut.setState({__e:ut.__b=ut.__v.__k[0]}),Te.then(Rn,Rn)},An.prototype.componentWillUnmount=function(){this.t=[]},An.prototype.render=function(Te,Qe){if(this.__b){if(this.__v.__k){var je=document.createElement("div"),ut=this.__v.__k[0].__c;this.__v.__k[0]=Yt(this.__b,je,ut.__O=ut.__P)}this.__b=null}var rn=Qe.__e&&Object(f.e)(f.b,null,Te.fallback);return rn&&(rn.__h=null),[Object(f.e)(f.b,null,Qe.__e?null:Te.children),rn]};var Ae=function(Te,Qe,je){if(++je[1]===je[0]&&Te.o.delete(Qe),Te.props.revealOrder&&(Te.props.revealOrder[0]!=="t"||!Te.o.size))for(je=Te.u;je;){for(;je.length>3;)je.pop()();if(je[1]<je[0])break;Te.u=je=je[2]}};function qe(Te){return this.getChildContext=function(){return Te.context},Te.children}function _t(Te){var Qe=this,je=Te.i;Qe.componentWillUnmount=function(){Object(f.j)(null,Qe.l),Qe.l=null,Qe.i=null},Qe.i&&Qe.i!==je&&Qe.componentWillUnmount(),Te.__v?(Qe.l||(Qe.i=je,Qe.l={nodeType:1,parentNode:je,childNodes:[],appendChild:function(ut){this.childNodes.push(ut),Qe.i.appendChild(ut)},insertBefore:function(ut,rn){this.childNodes.push(ut),Qe.i.appendChild(ut)},removeChild:function(ut){this.childNodes.splice(this.childNodes.indexOf(ut)>>>1,1),Qe.i.removeChild(ut)}}),Object(f.j)(Object(f.e)(qe,{context:Qe.context},Te.__v),Qe.l)):Qe.l&&Qe.componentWillUnmount()}(Se.prototype=new f.a).__e=function(Te){var Qe=this,je=$e(Qe.__v),ut=Qe.o.get(Te);return ut[0]++,function(rn){var Zt=function(){Qe.props.revealOrder?(ut.push(rn),Ae(Qe,Te,ut)):rn()};je?je(Zt):Zt()}},Se.prototype.render=function(Te){this.u=null,this.o=new Map;var Qe=Object(f.k)(Te.children);Te.revealOrder&&Te.revealOrder[0]==="b"&&Qe.reverse();for(var je=Qe.length;je--;)this.o.set(Qe[je],this.u=[1,0,this.u]);return Te.children},Se.prototype.componentDidUpdate=Se.prototype.componentDidMount=function(){var Te=this;this.o.forEach(function(Qe,je){Ae(Te,je,Qe)})};var ht=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Vt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Jt=typeof document<"u",an=function(Te){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Te)};f.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Te){Object.defineProperty(f.a.prototype,Te,{configurable:!0,get:function(){return this["UNSAFE_"+Te]},set:function(Qe){Object.defineProperty(this,Te,{configurable:!0,writable:!0,value:Qe})}})});var Kt=f.i.event;function rt(){}function pn(){return this.cancelBubble}function Ue(){return this.defaultPrevented}f.i.event=function(Te){return Kt&&(Te=Kt(Te)),Te.persist=rt,Te.isPropagationStopped=pn,Te.isDefaultPrevented=Ue,Te.nativeEvent=Te};var _n,Jn={configurable:!0,get:function(){return this.class}},le=f.i.vnode;f.i.vnode=function(Te){var Qe=Te.type,je=Te.props,ut=je;if(typeof Qe=="string"){var rn=Qe.indexOf("-")===-1;for(var Zt in ut={},je){var Rn=je[Zt];Jt&&Zt==="children"&&Qe==="noscript"||Zt==="value"&&"defaultValue"in je&&Rn==null||(Zt==="defaultValue"&&"value"in je&&je.value==null?Zt="value":Zt==="download"&&Rn===!0?Rn="":/ondoubleclick/i.test(Zt)?Zt="ondblclick":/^onchange(textarea|input)/i.test(Zt+Qe)&&!an(je.type)?Zt="oninput":/^onfocus$/i.test(Zt)?Zt="onfocusin":/^onblur$/i.test(Zt)?Zt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Zt)?Zt=Zt.toLowerCase():rn&&Vt.test(Zt)?Zt=Zt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Rn===null&&(Rn=void 0),ut[Zt]=Rn)}Qe=="select"&&ut.multiple&&Array.isArray(ut.value)&&(ut.value=Object(f.k)(je.children).forEach(function(Er){Er.props.selected=ut.value.indexOf(Er.props.value)!=-1})),Qe=="select"&&ut.defaultValue!=null&&(ut.value=Object(f.k)(je.children).forEach(function(Er){Er.props.selected=ut.multiple?ut.defaultValue.indexOf(Er.props.value)!=-1:ut.defaultValue==Er.props.value})),Te.props=ut,je.class!=je.className&&(Jn.enumerable="className"in je,je.className!=null&&(ut.class=je.className),Object.defineProperty(ut,"className",Jn))}Te.$$typeof=ht,le&&le(Te)};var Qn=f.i.__r;f.i.__r=function(Te){Qn&&Qn(Te),_n=Te.__c};var Pr={ReactCurrentDispatcher:{current:{readContext:function(Te){return _n.__n[Te.__c].props.value}}}};function Xr(Te){return!!Te&&Te.$$typeof===ht}var ao=function(Te,Qe){return Te(Qe)},Un=f.b,bo={useState:D,useReducer:I,useEffect:B,useLayoutEffect:$,useRef:function(Te){return g=5,j(function(){return{current:Te}},[])},useImperativeHandle:function(Te,Qe,je){g=6,$(function(){typeof Te=="function"?Te(Qe()):Te&&(Te.current=Qe())},je==null?je:je.concat(Te))},useMemo:j,useCallback:U,useContext:function(Te){var Qe=c.context[Te.__c],je=E(u++,9);return je.c=Te,Qe?(je.__==null&&(je.__=!0,Qe.sub(c)),Qe.props.value):Te.__},useDebugValue:function(Te,Qe){f.i.useDebugValue&&f.i.useDebugValue(Qe?Qe(Te):Te)},version:"17.0.2",Children:yt,render:function(Te,Qe,je){return Qe.__k==null&&(Qe.textContent=""),Object(f.j)(Te,Qe),typeof je=="function"&&je(),Te?Te.__c:null},hydrate:function(Te,Qe,je){return Object(f.h)(Te,Qe),typeof je=="function"&&je(),Te?Te.__c:null},unmountComponentAtNode:function(Te){return!!Te.__k&&(Object(f.j)(null,Te),!0)},createPortal:function(Te,Qe){return Object(f.e)(_t,{__v:Te,i:Qe})},createElement:f.e,createContext:f.d,createFactory:function(Te){return f.e.bind(null,Te)},cloneElement:function(Te){return Xr(Te)?f.c.apply(null,arguments):Te},createRef:f.f,Fragment:f.b,isValidElement:Xr,findDOMNode:function(Te){return Te&&(Te.base||Te.nodeType===1&&Te)||null},Component:f.a,PureComponent:Pe,memo:we,forwardRef:Xe,flushSync:function(Te,Qe){return Te(Qe)},unstable_batchedUpdates:ao,StrictMode:Un,Suspense:An,SuspenseList:Se,lazy:function(Te){var Qe,je,ut;function rn(Zt){if(Qe||(Qe=Te()).then(function(Rn){je=Rn.default||Rn},function(Rn){ut=Rn}),ut)throw ut;if(!je)throw Qe;return Object(f.e)(je,Zt)}return rn.displayName="Lazy",rn.__f=!0,rn},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Pr};a.d=bo},function(n,a,r){var u=r(7),c=r(152),v=r(153),f=r(187),g=r(57),b=function(x){if(x&&x.forEach!==f)try{g(x,"forEach",f)}catch{x.forEach=f}};for(var _ in c)c[_]&&b(u[_]&&u[_].prototype);b(v)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var u=r(16),c=r(18),v=r(40),f=r(101),g=r(143);u({target:"Object",stat:!0,forced:c(function(){f(1)}),sham:!g},{getPrototypeOf:function(b){return f(v(b))}})},function(n,a,r){var u=r(16),c=r(46),v=r(76),f=r(203),g=r(165),b=r(32),_=r(33),x=r(60),A=r(18),M=c("Reflect","construct"),S=Object.prototype,E=[].push,D=A(function(){function $(){}return!(M(function(){},[],$)instanceof $)}),I=!A(function(){M(function(){})}),B=D||I;u({target:"Reflect",stat:!0,forced:B,sham:B},{construct:function($,j){g($),b(j);var U=arguments.length<3?$:g(arguments[2]);if(I&&!D)return M($,j,U);if($==U){switch(j.length){case 0:return new $;case 1:return new $(j[0]);case 2:return new $(j[0],j[1]);case 3:return new $(j[0],j[1],j[2]);case 4:return new $(j[0],j[1],j[2],j[3])}var K=[null];return v(E,K,j),new(v(f,$,K))}var Q=U.prototype,H=x(_(Q)?Q:S),W=v($,H,j);return _(W)?W:H}})},function(n,a){var r=Function.prototype,u=r.bind,c=r.call,v=u&&u.bind(c);n.exports=u?function(f){return f&&v(c,f)}:function(f){return f&&function(){return c.apply(f,arguments)}}},function(n,a,r){var u=r(7),c=r(50).f,v=r(57),f=r(42),g=r(110),b=r(134),_=r(95);n.exports=function(x,A){var M,S,E,D,I,B=x.target,$=x.global,j=x.stat;if(M=$?u:j?u[B]||g(B,{}):(u[B]||{}).prototype)for(S in A){if(D=A[S],E=x.noTargetGet?(I=c(M,S))&&I.value:M[S],!_($?S:B+(j?".":"#")+S,x.forced)&&E!==void 0){if(typeof D==typeof E)continue;b(D,E)}(x.sham||E&&E.sham)&&v(D,"sham",!0),f(M,S,D,x)}}},function(n,a,r){var u=r(16),c=r(7),v=r(96),f=r(99),g=r(33),b=r(75),_=r(45),x=r(41),A=r(63),M=r(28),S=r(81),E=r(98),D=S("slice"),I=M("species"),B=c.Array,$=Math.max;u({target:"Array",proto:!0,forced:!D},{slice:function(j,U){var K,Q,H,W=x(this),z=_(W),Y=b(j,z),q=b(U===void 0?z:U,z);if(v(W)&&(K=W.constructor,(f(K)&&(K===B||v(K.prototype))||g(K)&&(K=K[I])===null)&&(K=void 0),K===B||K===void 0))return E(W,Y,q);for(Q=new(K===void 0?B:K)($(q-Y,0)),H=0;Y<q;Y++,H++)Y in W&&A(Q,H,W[Y]);return Q.length=H,Q}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var u=r(16),c=r(103);u({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var u=r(16),c=r(40),v=r(77);u({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(f){return v(c(f))}})},function(n,a,r){var u=r(36),c=r(73).EXISTS,v=r(15),f=r(38).f,g=Function.prototype,b=v(g.toString),_=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=v(_.exec);u&&!c&&f(g,"name",{configurable:!0,get:function(){try{return x(_,b(this))[1]}catch{return""}}})},function(n,a,r){var u=r(16),c=r(18),v=r(41),f=r(50).f,g=r(36),b=c(function(){f(1)});u({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(_,x){return f(v(_),x)}})},function(n,a,r){var u=r(16),c=r(188);u({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,a,r){var u=r(16),c=r(79).filter;u({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(16),c=r(36),v=r(135),f=r(41),g=r(50),b=r(63);u({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(_){for(var x,A,M=f(_),S=g.f,E=v(M),D={},I=0;E.length>I;)(A=S(M,x=E[I++]))!==void 0&&b(D,x,A);return D}})},,function(n,a,r){var u=r(16),c=r(7),v=r(18),f=r(96),g=r(33),b=r(40),_=r(45),x=r(63),A=r(115),M=r(81),S=r(28),E=r(70),D=S("isConcatSpreadable"),I=9007199254740991,B="Maximum allowed index exceeded",$=c.TypeError,j=E>=51||!v(function(){var Q=[];return Q[D]=!1,Q.concat()[0]!==Q}),U=M("concat"),K=function(Q){if(!g(Q))return!1;var H=Q[D];return H!==void 0?!!H:f(Q)};u({target:"Array",proto:!0,forced:!j||!U},{concat:function(Q){var H,W,z,Y,q,oe=b(this),ie=A(oe,0),Pe=0;for(H=-1,z=arguments.length;H<z;H++)if(K(q=H===-1?oe:arguments[H])){if(Pe+(Y=_(q))>I)throw $(B);for(W=0;W<Y;W++,Pe++)W in q&&x(ie,Pe,q[W])}else{if(Pe>=I)throw $(B);x(ie,Pe++,q)}return ie.length=Pe,ie}})},function(n,a,r){var u=r(7),c=r(89),v=r(35),f=r(90),g=r(108),b=r(132),_=c("wks"),x=u.Symbol,A=x&&x.for,M=b?x:x&&x.withoutSetter||f;n.exports=function(S){if(!v(_,S)||!g&&typeof _[S]!="string"){var E="Symbol."+S;g&&v(x,S)?_[S]=x[S]:_[S]=b&&A?A(E):M(E)}return _[S]}},function(n,a,r){var u=r(16),c=r(202);u({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var u=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=u.a||c||Function("return this")();a.a=v},function(n,a,r){var u=r(7),c=r(33),v=u.String,f=u.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not an object")}},function(n,a,r){var u=r(30);n.exports=function(c){return typeof c=="object"?c!==null:u(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var u=r(15),c=r(40),v=u({}.hasOwnProperty);n.exports=Object.hasOwn||function(f,g){return v(c(f),g)}},function(n,a,r){var u=r(18);n.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var u=r(16),c=r(79).map;u({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(7),c=r(36),v=r(133),f=r(32),g=r(86),b=u.TypeError,_=Object.defineProperty;a.f=c?_:function(x,A,M){if(f(x),A=g(A),f(M),v)try{return _(x,A,M)}catch{}if("get"in M||"set"in M)throw b("Accessors not supported");return"value"in M&&(x[A]=M.value),x}},function(n,a,r){var u=r(7),c=r(97),v=u.String;n.exports=function(f){if(c(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(f)}},function(n,a,r){var u=r(7),c=r(44),v=u.Object;n.exports=function(f){return v(c(f))}},function(n,a,r){var u=r(85),c=r(44);n.exports=function(v){return u(c(v))}},function(n,a,r){var u=r(7),c=r(30),v=r(35),f=r(57),g=r(110),b=r(92),_=r(58),x=r(73).CONFIGURABLE,A=_.get,M=_.enforce,S=String(String).split("String");(n.exports=function(E,D,I,B){var $,j=!!B&&!!B.unsafe,U=!!B&&!!B.enumerable,K=!!B&&!!B.noTargetGet,Q=B&&B.name!==void 0?B.name:D;c(I)&&(String(Q).slice(0,7)==="Symbol("&&(Q="["+String(Q).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(I,"name")||x&&I.name!==Q)&&f(I,"name",Q),($=M(I)).source||($.source=S.join(typeof Q=="string"?Q:""))),E!==u?(j?!K&&E[D]&&(U=!0):delete E[D],U?E[D]=I:f(E,D,I)):U?E[D]=I:g(D,I)})(Function.prototype,"toString",function(){return c(this)&&A(this).source||b(this)})},function(n,a,r){(function(u){r.d(a,"d",function(){return f}),r.d(a,"c",function(){return g}),r.d(a,"b",function(){return b}),r.d(a,"a",function(){return x});var c=r(10),v=function(A,M){var S=typeof Symbol=="function"&&A[Symbol.iterator];if(!S)return A;var E,D,I=S.call(A),B=[];try{for(;(M===void 0||M-- >0)&&!(E=I.next()).done;)B.push(E.value)}catch($){D={error:$}}finally{try{E&&!E.done&&(S=I.return)&&S.call(I)}finally{if(D)throw D.error}}return B};function f(){var A=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){A(function(M){return M+1})},[])}function g(A){if(!A||typeof A!="object")return!1;var M=Object.getPrototypeOf(A);return!M||M===Object.prototype}function b(A){return typeof Symbol=="function"?Symbol.for(A):"__$mobx-react "+A+"__"}var _={};function x(){return typeof window<"u"?window:u!==void 0?u:typeof self<"u"?self:_}}).call(this,r(68))},function(n,a,r){var u=r(7).TypeError;n.exports=function(c){if(c==null)throw u("Can't call method on "+c);return c}},function(n,a,r){var u=r(94);n.exports=function(c){return u(c.length)}},function(n,a,r){var u=r(7),c=r(30),v=function(f){return c(f)?f:void 0};n.exports=function(f,g){return arguments.length<2?v(u[f]):u[f]&&u[f][g]}},function(n,a,r){var u=r(16),c=r(34),v=r(33),f=r(32),g=r(204),b=r(50),_=r(101);u({target:"Reflect",stat:!0},{get:function x(A,M){var S,E,D=arguments.length<3?A:arguments[2];return f(A)===D?A[M]:(S=b.f(A,M))?g(S)?S.value:S.get===void 0?void 0:c(S.get,D):v(E=_(A))?x(E,M,D):void 0}})},function(n,a,r){(function(u){var c=r(31),v=r(171),f=t&&!t.nodeType&&t,g=f&&typeof u=="object"&&u&&!u.nodeType&&u,b=g&&g.exports===f?c.a.Buffer:void 0,_=(b?b.isBuffer:void 0)||v.a;a.a=_}).call(this,r(122)(n))},function(n,a,r){(function(u){var c=r(106),v=t&&!t.nodeType&&t,f=v&&typeof u=="object"&&u&&!u.nodeType&&u,g=f&&f.exports===v&&c.a.process,b=function(){try{var _=f&&f.require&&f.require("util").types;return _||g&&g.binding&&g.binding("util")}catch{}}();a.a=b}).call(this,r(122)(n))},function(n,a,r){var u=r(36),c=r(34),v=r(84),f=r(69),g=r(41),b=r(86),_=r(35),x=r(133),A=Object.getOwnPropertyDescriptor;a.f=u?A:function(M,S){if(M=g(M),S=b(S),x)try{return A(M,S)}catch{}if(_(M,S))return f(!c(v.f,M,S),M[S])}},function(n,a,r){var u=r(15),c=u({}.toString),v=u("".slice);n.exports=function(f){return v(c(f),8,-1)}},function(n,a,r){r(182)("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var u=r(16),c=r(220).entries;u({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,a,r){var u=r(15);n.exports=u({}.isPrototypeOf)},function(n,a,r){var u=r(46);n.exports=u("navigator","userAgent")||""},function(n,a,r){var u=r(7),c=r(30),v=r(88),f=u.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not a function")}},function(n,a,r){var u=r(36),c=r(38),v=r(69);n.exports=u?function(f,g,b){return c.f(f,g,v(1,b))}:function(f,g,b){return f[g]=b,f}},function(n,a,r){var u,c,v,f=r(175),g=r(7),b=r(15),_=r(33),x=r(57),A=r(35),M=r(109),S=r(93),E=r(72),D="Object already initialized",I=g.TypeError,B=g.WeakMap;if(f||M.state){var $=M.state||(M.state=new B),j=b($.get),U=b($.has),K=b($.set);u=function(H,W){if(U($,H))throw new I(D);return W.facade=H,K($,H,W),W},c=function(H){return j($,H)||{}},v=function(H){return U($,H)}}else{var Q=S("state");E[Q]=!0,u=function(H,W){if(A(H,Q))throw new I(D);return W.facade=H,x(H,Q,W),W},c=function(H){return A(H,Q)?H[Q]:{}},v=function(H){return A(H,Q)}}n.exports={set:u,get:c,has:v,enforce:function(H){return v(H)?c(H):u(H,{})},getterFor:function(H){return function(W){var z;if(!_(W)||(z=c(W)).type!==H)throw I("Incompatible receiver, "+H+" required");return z}}}},function(n,a){var r=Math.ceil,u=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?u:r)(v)}},function(n,a,r){var u,c=r(32),v=r(176),f=r(111),g=r(72),b=r(138),_=r(91),x=r(93),A=x("IE_PROTO"),M=function(){},S=function(I){return"<script>"+I+"<\/script>"},E=function(I){I.write(S("")),I.close();var B=I.parentWindow.Object;return I=null,B},D=function(){try{u=new ActiveXObject("htmlfile")}catch{}var I,B;D=typeof document<"u"?document.domain&&u?E(u):((B=_("iframe")).style.display="none",b.appendChild(B),B.src="javascript:",(I=B.contentWindow.document).open(),I.write(S("document.F=Object")),I.close(),I.F):E(u);for(var $=f.length;$--;)delete D.prototype[f[$]];return D()};g[A]=!0,n.exports=Object.create||function(I,B){var $;return I!==null?(M.prototype=c(I),$=new M,M.prototype=null,$[A]=I):$=D(),B===void 0?$:v($,B)}},function(n,a,r){var u=r(36),c=r(7),v=r(15),f=r(95),g=r(42),b=r(35),_=r(148),x=r(54),A=r(87),M=r(131),S=r(18),E=r(74).f,D=r(50).f,I=r(38).f,B=r(160),$=r(161).trim,j="Number",U=c.Number,K=U.prototype,Q=c.TypeError,H=v("".slice),W=v("".charCodeAt),z=function(we){var be=M(we,"number");return typeof be=="bigint"?be:Y(be)},Y=function(we){var be,ye,Xe,Ze,yt,Be,qt,Yt,Pt=M(we,"number");if(A(Pt))throw Q("Cannot convert a Symbol value to a number");if(typeof Pt=="string"&&Pt.length>2){if(Pt=$(Pt),(be=W(Pt,0))===43||be===45){if((ye=W(Pt,2))===88||ye===120)return NaN}else if(be===48){switch(W(Pt,1)){case 66:case 98:Xe=2,Ze=49;break;case 79:case 111:Xe=8,Ze=55;break;default:return+Pt}for(Be=(yt=H(Pt,2)).length,qt=0;qt<Be;qt++)if((Yt=W(yt,qt))<48||Yt>Ze)return NaN;return parseInt(yt,Xe)}}return+Pt};if(f(j,!U(" 0o1")||!U("0b1")||U("+0x1"))){for(var q,oe=function(we){var be=arguments.length<1?0:U(z(we)),ye=this;return x(K,ye)&&S(function(){B(ye)})?_(Object(be),ye,oe):be},ie=u?E(U):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Pe=0;ie.length>Pe;Pe++)b(U,q=ie[Pe])&&!b(oe,q)&&I(oe,q,D(U,q));oe.prototype=K,K.constructor=oe,g(c,j,oe)}},function(n,a,r){var u=r(56);n.exports=function(c,v){var f=c[v];return f==null?void 0:u(f)}},function(n,a,r){var u=r(86),c=r(38),v=r(69);n.exports=function(f,g,b){var _=u(g);_ in f?c.f(f,_,v(0,b)):f[_]=b}},function(n,a,r){var u=r(15),c=r(56),v=u(u.bind);n.exports=function(f,g){return c(f),g===void 0?f:v?v(f,g):function(){return f.apply(g,arguments)}}},function(n,a,r){var u=r(16),c=r(15),v=r(85),f=r(41),g=r(121),b=c([].join),_=v!=Object,x=g("join",",");u({target:"Array",proto:!0,forced:_||!x},{join:function(A){return b(f(this),A===void 0?",":A)}})},function(n,a,r){var u=r(15),c=r(73).PROPER,v=r(42),f=r(32),g=r(54),b=r(39),_=r(18),x=r(154),A="toString",M=RegExp.prototype,S=M.toString,E=u(x),D=_(function(){return S.call({source:"a",flags:"b"})!="/a/b"}),I=c&&S.name!=A;(D||I)&&v(RegExp.prototype,A,function(){var B=f(this),$=b(B.source),j=B.flags;return"/"+$+"/"+b(j===void 0&&g(M,B)&&!("flags"in M)?E(B):j)},{unsafe:!0})},function(n,a,r){var u=r(16),c=r(217),v=r(100);u({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,u){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:u}}},function(n,a,r){var u,c,v=r(7),f=r(55),g=v.process,b=v.Deno,_=g&&g.versions||b&&b.version,x=_&&_.v8;x&&(c=(u=x.split("."))[0]>0&&u[0]<4?1:+(u[0]+u[1])),!c&&f&&(!(u=f.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=f.match(/Chrome\/(\d+)/))&&(c=+u[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var u=r(36),c=r(35),v=Function.prototype,f=u&&Object.getOwnPropertyDescriptor,g=c(v,"name"),b=g&&(function(){}).name==="something",_=g&&(!u||u&&f(v,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:_}},function(n,a,r){var u=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(v){return u(v,c)}},function(n,a,r){var u=r(59),c=Math.max,v=Math.min;n.exports=function(f,g){var b=u(f);return b<0?c(b+g,0):v(b,g)}},function(n,a){var r=Function.prototype,u=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(u):function(){return v.apply(u,arguments)})},function(n,a,r){var u=r(136),c=r(111);n.exports=Object.keys||function(v){return u(v,c)}},function(n,a,r){var u=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(f,g,b){f&&!c(f=b?f:f.prototype,v)&&u(f,v,{configurable:!0,value:g})}},function(n,a,r){var u=r(64),c=r(15),v=r(85),f=r(40),g=r(45),b=r(115),_=c([].push),x=function(A){var M=A==1,S=A==2,E=A==3,D=A==4,I=A==6,B=A==7,$=A==5||I;return function(j,U,K,Q){for(var H,W,z=f(j),Y=v(z),q=u(U,K),oe=g(Y),ie=0,Pe=Q||b,we=M?Pe(j,oe):S||B?Pe(j,0):void 0;oe>ie;ie++)if(($||ie in Y)&&(W=q(H=Y[ie],ie,z),A))if(M)we[ie]=W;else if(W)switch(A){case 3:return!0;case 5:return H;case 6:return ie;case 2:_(we,H)}else switch(A){case 4:return!1;case 7:_(we,H)}return I?-1:E||D?D:we}};n.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(n,a){n.exports={}},function(n,a,r){var u=r(18),c=r(28),v=r(70),f=c("species");n.exports=function(g){return v>=51||!u(function(){var b=[];return(b.constructor={})[f]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,a,r){var u=r(76),c=r(34),v=r(15),f=r(123),g=r(159),b=r(32),_=r(44),x=r(164),A=r(124),M=r(94),S=r(39),E=r(62),D=r(114),I=r(125),B=r(103),$=r(155),j=r(18),U=$.UNSUPPORTED_Y,K=4294967295,Q=Math.min,H=[].push,W=v(/./.exec),z=v(H),Y=v("".slice),q=!j(function(){var oe=/(?:)/,ie=oe.exec;oe.exec=function(){return ie.apply(this,arguments)};var Pe="ab".split(oe);return Pe.length!==2||Pe[0]!=="a"||Pe[1]!=="b"});f("split",function(oe,ie,Pe){var we;return we="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(be,ye){var Xe=S(_(this)),Ze=ye===void 0?K:ye>>>0;if(Ze===0)return[];if(be===void 0)return[Xe];if(!g(be))return c(ie,Xe,be,Ze);for(var yt,Be,qt,Yt=[],Pt=(be.ignoreCase?"i":"")+(be.multiline?"m":"")+(be.unicode?"u":"")+(be.sticky?"y":""),An=0,$e=new RegExp(be.source,Pt+"g");(yt=c(B,$e,Xe))&&!((Be=$e.lastIndex)>An&&(z(Yt,Y(Xe,An,yt.index)),yt.length>1&&yt.index<Xe.length&&u(H,Yt,D(yt,1)),qt=yt[0].length,An=Be,Yt.length>=Ze));)$e.lastIndex===yt.index&&$e.lastIndex++;return An===Xe.length?!qt&&W($e,"")||z(Yt,""):z(Yt,Y(Xe,An)),Yt.length>Ze?D(Yt,0,Ze):Yt}:"0".split(void 0,0).length?function(be,ye){return be===void 0&&ye===0?[]:c(ie,this,be,ye)}:ie,[function(be,ye){var Xe=_(this),Ze=be==null?void 0:E(be,oe);return Ze?c(Ze,be,Xe,ye):c(we,S(Xe),be,ye)},function(be,ye){var Xe=b(this),Ze=S(be),yt=Pe(we,Xe,Ze,ye,we!==ie);if(yt.done)return yt.value;var Be=x(Xe,RegExp),qt=Xe.unicode,Yt=(Xe.ignoreCase?"i":"")+(Xe.multiline?"m":"")+(Xe.unicode?"u":"")+(U?"g":"y"),Pt=new Be(U?"^(?:"+Xe.source+")":Xe,Yt),An=ye===void 0?K:ye>>>0;if(An===0)return[];if(Ze.length===0)return I(Pt,Ze)===null?[Ze]:[];for(var $e=0,Se=0,Ae=[];Se<Ze.length;){Pt.lastIndex=U?0:Se;var qe,_t=I(Pt,U?Y(Ze,Se):Ze);if(_t===null||(qe=Q(M(Pt.lastIndex+(U?Se:0)),Ze.length))===$e)Se=A(Ze,Se,qt);else{if(z(Ae,Y(Ze,$e,Se)),Ae.length===An)return Ae;for(var ht=1;ht<=_t.length-1;ht++)if(z(Ae,_t[ht]),Ae.length===An)return Ae;Se=$e=qe}}return z(Ae,Y(Ze,$e)),Ae}]},!q,U)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var u={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!u.call({1:2},1);a.f=v?function(f){var g=c(this,f);return!!g&&g.enumerable}:u},function(n,a,r){var u=r(7),c=r(15),v=r(18),f=r(51),g=u.Object,b=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(_){return f(_)=="String"?b(_,""):g(_)}:g},function(n,a,r){var u=r(131),c=r(87);n.exports=function(v){var f=u(v,"string");return c(f)?f:f+""}},function(n,a,r){var u=r(7),c=r(46),v=r(30),f=r(54),g=r(132),b=u.Object;n.exports=g?function(_){return typeof _=="symbol"}:function(_){var x=c("Symbol");return v(x)&&f(x.prototype,b(_))}},function(n,a,r){var u=r(7).String;n.exports=function(c){try{return u(c)}catch{return"Object"}}},function(n,a,r){var u=r(71),c=r(109);(n.exports=function(v,f){return c[v]||(c[v]=f!==void 0?f:{})})("versions",[]).push({version:"3.19.3",mode:u?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var u=r(15),c=0,v=Math.random(),f=u(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+f(++c+v,36)}},function(n,a,r){var u=r(7),c=r(33),v=u.document,f=c(v)&&c(v.createElement);n.exports=function(g){return f?v.createElement(g):{}}},function(n,a,r){var u=r(15),c=r(30),v=r(109),f=u(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return f(g)}),n.exports=v.inspectSource},function(n,a,r){var u=r(89),c=r(90),v=u("keys");n.exports=function(f){return v[f]||(v[f]=c(f))}},function(n,a,r){var u=r(59),c=Math.min;n.exports=function(v){return v>0?c(u(v),9007199254740991):0}},function(n,a,r){var u=r(18),c=r(30),v=/#|\.prototype\./,f=function(A,M){var S=b[g(A)];return S==x||S!=_&&(c(M)?u(M):!!M)},g=f.normalize=function(A){return String(A).replace(v,".").toLowerCase()},b=f.data={},_=f.NATIVE="N",x=f.POLYFILL="P";n.exports=f},function(n,a,r){var u=r(51);n.exports=Array.isArray||function(c){return u(c)=="Array"}},function(n,a,r){var u=r(7),c=r(113),v=r(30),f=r(51),g=r(28)("toStringTag"),b=u.Object,_=f(function(){return arguments}())=="Arguments";n.exports=c?f:function(x){var A,M,S;return x===void 0?"Undefined":x===null?"Null":typeof(M=function(E,D){try{return E[D]}catch{}}(A=b(x),g))=="string"?M:_?f(A):(S=f(A))=="Object"&&v(A.callee)?"Arguments":S}},function(n,a,r){var u=r(15);n.exports=u([].slice)},function(n,a,r){var u=r(15),c=r(18),v=r(30),f=r(97),g=r(46),b=r(92),_=function(){},x=[],A=g("Reflect","construct"),M=/^\s*(?:class|function)\b/,S=u(M.exec),E=!M.exec(_),D=function(I){if(!v(I))return!1;try{return A(_,x,I),!0}catch{return!1}};n.exports=!A||c(function(){var I;return D(D.call)||!D(Object)||!D(function(){I=!0})||I})?function(I){if(!v(I))return!1;switch(f(I)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return E||!!S(M,b(I))}:D},function(n,a,r){var u=r(28),c=r(60),v=r(38),f=u("unscopables"),g=Array.prototype;g[f]==null&&v.f(g,f,{configurable:!0,value:c(null)}),n.exports=function(b){g[f][b]=!0}},function(n,a,r){var u=r(7),c=r(35),v=r(30),f=r(40),g=r(93),b=r(143),_=g("IE_PROTO"),x=u.Object,A=x.prototype;n.exports=b?x.getPrototypeOf:function(M){var S=f(M);if(c(S,_))return S[_];var E=S.constructor;return v(E)&&S instanceof E?E.prototype:S instanceof x?A:null}},function(n,a,r){var u=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,g=!1,b={};try{(f=u(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(_,x){return c(_),v(x),g?f(_,x):_.__proto__=x,_}}():void 0)},function(n,a,r){var u,c,v=r(34),f=r(15),g=r(39),b=r(154),_=r(155),x=r(89),A=r(60),M=r(58).get,S=r(190),E=r(191),D=x("native-string-replace",String.prototype.replace),I=RegExp.prototype.exec,B=I,$=f("".charAt),j=f("".indexOf),U=f("".replace),K=f("".slice),Q=(c=/b*/g,v(I,u=/a/,"a"),v(I,c,"a"),u.lastIndex!==0||c.lastIndex!==0),H=_.BROKEN_CARET,W=/()??/.exec("")[1]!==void 0;(Q||W||H||S||E)&&(B=function(z){var Y,q,oe,ie,Pe,we,be,ye=this,Xe=M(ye),Ze=g(z),yt=Xe.raw;if(yt)return yt.lastIndex=ye.lastIndex,Y=v(B,yt,Ze),ye.lastIndex=yt.lastIndex,Y;var Be=Xe.groups,qt=H&&ye.sticky,Yt=v(b,ye),Pt=ye.source,An=0,$e=Ze;if(qt&&(Yt=U(Yt,"y",""),j(Yt,"g")===-1&&(Yt+="g"),$e=K(Ze,ye.lastIndex),ye.lastIndex>0&&(!ye.multiline||ye.multiline&&$(Ze,ye.lastIndex-1)!==`
`)&&(Pt="(?: "+Pt+")",$e=" "+$e,An++),q=new RegExp("^(?:"+Pt+")",Yt)),W&&(q=new RegExp("^"+Pt+"$(?!\\s)",Yt)),Q&&(oe=ye.lastIndex),ie=v(I,qt?q:ye,$e),qt?ie?(ie.input=K(ie.input,An),ie[0]=K(ie[0],An),ie.index=ye.lastIndex,ye.lastIndex+=ie[0].length):ye.lastIndex=0:Q&&ie&&(ye.lastIndex=ye.global?ie.index+ie[0].length:oe),W&&ie&&ie.length>1&&v(D,ie[0],q,function(){for(Pe=1;Pe<arguments.length-2;Pe++)arguments[Pe]===void 0&&(ie[Pe]=void 0)}),ie&&Be)for(ie.groups=we=A(null),Pe=0;Pe<Be.length;Pe++)we[(be=Be[Pe])[0]]=ie[be[1]];return ie}),n.exports=B},function(n,a,r){var u=r(16),c=r(7),v=r(75),f=r(59),g=r(45),b=r(40),_=r(115),x=r(63),A=r(81)("splice"),M=c.TypeError,S=Math.max,E=Math.min,D=9007199254740991,I="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!A},{splice:function(B,$){var j,U,K,Q,H,W,z=b(this),Y=g(z),q=v(B,Y),oe=arguments.length;if(oe===0?j=U=0:oe===1?(j=0,U=Y-q):(j=oe-2,U=E(S(f($),0),Y-q)),Y+j-U>D)throw M(I);for(K=_(z,U),Q=0;Q<U;Q++)(H=q+Q)in z&&x(K,Q,z[H]);if(K.length=U,j<U){for(Q=q;Q<Y-U;Q++)W=Q+j,(H=Q+U)in z?z[W]=z[H]:delete z[W];for(Q=Y;Q>Y-U+j;Q--)delete z[Q-1]}else if(j>U)for(Q=Y-U;Q>q;Q--)W=Q+j-1,(H=Q+U-1)in z?z[W]=z[H]:delete z[W];for(Q=0;Q<j;Q++)z[Q+q]=arguments[Q+2];return z.length=Y-U+j,K}})},function(n,a,r){var u=r(16),c=r(205);u({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,a,r){(function(u){var c=typeof u=="object"&&u&&u.Object===Object&&u;a.a=c}).call(this,r(68))},function(n,a,r){(function(u){var c=r(31),v=t&&!t.nodeType&&t,f=v&&typeof u=="object"&&u&&!u.nodeType&&u,g=f&&f.exports===v?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;a.a=function(_,x){if(x)return _.slice();var A=_.length,M=b?b(A):new _.constructor(A);return _.copy(M),M}}).call(this,r(122)(n))},function(n,a,r){var u=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&u&&u<41})},function(n,a,r){var u=r(7),c=r(110),v="__core-js_shared__",f=u[v]||c(v,{});n.exports=f},function(n,a,r){var u=r(7),c=Object.defineProperty;n.exports=function(v,f){try{c(u,v,{value:f,configurable:!0,writable:!0})}catch{u[v]=f}return f}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var u={};u[r(28)("toStringTag")]="z",n.exports=String(u)==="[object z]"},function(n,a,r){var u=r(7),c=r(75),v=r(45),f=r(63),g=u.Array,b=Math.max;n.exports=function(_,x,A){for(var M=v(_),S=c(x,M),E=c(A===void 0?M:A,M),D=g(b(E-S,0)),I=0;S<E;S++,I++)f(D,I,_[S]);return D.length=I,D}},function(n,a,r){var u=r(178);n.exports=function(c,v){return new(u(c))(v===0?0:v)}},function(n,a,r){var u=r(16),c=r(34),v=r(71),f=r(73),g=r(30),b=r(180),_=r(101),x=r(102),A=r(78),M=r(57),S=r(42),E=r(28),D=r(80),I=r(142),B=f.PROPER,$=f.CONFIGURABLE,j=I.IteratorPrototype,U=I.BUGGY_SAFARI_ITERATORS,K=E("iterator"),Q="keys",H="values",W="entries",z=function(){return this};n.exports=function(Y,q,oe,ie,Pe,we,be){b(oe,q,ie);var ye,Xe,Ze,yt=function(Se){if(Se===Pe&&An)return An;if(!U&&Se in Yt)return Yt[Se];switch(Se){case Q:case H:case W:return function(){return new oe(this,Se)}}return function(){return new oe(this)}},Be=q+" Iterator",qt=!1,Yt=Y.prototype,Pt=Yt[K]||Yt["@@iterator"]||Pe&&Yt[Pe],An=!U&&Pt||yt(Pe),$e=q=="Array"&&Yt.entries||Pt;if($e&&(ye=_($e.call(new Y)))!==Object.prototype&&ye.next&&(v||_(ye)===j||(x?x(ye,j):g(ye[K])||S(ye,K,z)),A(ye,Be,!0,!0),v&&(D[Be]=z)),B&&Pe==H&&Pt&&Pt.name!==H&&(!v&&$?M(Yt,"name",H):(qt=!0,An=function(){return c(Pt,this)})),Pe)if(Xe={values:yt(H),keys:we?An:yt(Q),entries:yt(W)},be)for(Ze in Xe)(U||qt||!(Ze in Yt))&&S(Yt,Ze,Xe[Ze]);else u({target:q,proto:!0,forced:U||qt},Xe);return v&&!be||Yt[K]===An||S(Yt,K,An,{name:Pe}),D[q]=An,Xe}},function(n,a,r){var u=r(7),c=r(64),v=r(34),f=r(32),g=r(88),b=r(145),_=r(45),x=r(54),A=r(146),M=r(118),S=r(147),E=u.TypeError,D=function(B,$){this.stopped=B,this.result=$},I=D.prototype;n.exports=function(B,$,j){var U,K,Q,H,W,z,Y,q=j&&j.that,oe=!(!j||!j.AS_ENTRIES),ie=!(!j||!j.IS_ITERATOR),Pe=!(!j||!j.INTERRUPTED),we=c($,q),be=function(Xe){return U&&S(U,"normal",Xe),new D(!0,Xe)},ye=function(Xe){return oe?(f(Xe),Pe?we(Xe[0],Xe[1],be):we(Xe[0],Xe[1])):Pe?we(Xe,be):we(Xe)};if(ie)U=B;else{if(!(K=M(B)))throw E(g(B)+" is not iterable");if(b(K)){for(Q=0,H=_(B);H>Q;Q++)if((W=ye(B[Q]))&&x(I,W))return W;return new D(!1)}U=A(B,K)}for(z=U.next;!(Y=v(z,U)).done;){try{W=ye(Y.value)}catch(Xe){S(U,"throw",Xe)}if(typeof W=="object"&&W&&x(I,W))return W}return new D(!1)}},function(n,a,r){var u=r(97),c=r(62),v=r(80),f=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,f)||c(g,"@@iterator")||v[u(g)]}},function(n,a,r){var u=r(7),c=r(54),v=u.TypeError;n.exports=function(f,g){if(c(g,f))return f;throw v("Incorrect invocation")}},function(n,a,r){var u=r(28)("iterator"),c=!1;try{var v=0,f={next:function(){return{done:!!v++}},return:function(){c=!0}};f[u]=function(){return this},Array.from(f,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var _=!1;try{var x={};x[u]=function(){return{next:function(){return{done:_=!0}}}},g(x)}catch{}return _}},function(n,a,r){var u=r(18);n.exports=function(c,v){var f=[][c];return!!f&&u(function(){f.call(null,v||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var u=Object.create(r);u.children||(u.children=[]),Object.defineProperty(u,"loaded",{enumerable:!0,get:function(){return u.l}}),Object.defineProperty(u,"id",{enumerable:!0,get:function(){return u.i}}),Object.defineProperty(u,"exports",{enumerable:!0}),u.webpackPolyfill=1}return u}},function(n,a,r){r(19);var u=r(15),c=r(42),v=r(103),f=r(18),g=r(28),b=r(57),_=g("species"),x=RegExp.prototype;n.exports=function(A,M,S,E){var D=g(A),I=!f(function(){var U={};return U[D]=function(){return 7},""[A](U)!=7}),B=I&&!f(function(){var U=!1,K=/a/;return A==="split"&&((K={}).constructor={},K.constructor[_]=function(){return K},K.flags="",K[D]=/./[D]),K.exec=function(){return U=!0,null},K[D](""),!U});if(!I||!B||S){var $=u(/./[D]),j=M(D,""[A],function(U,K,Q,H,W){var z=u(U),Y=K.exec;return Y===v||Y===x.exec?I&&!W?{done:!0,value:$(K,Q,H)}:{done:!0,value:z(Q,K,H)}:{done:!1}});c(String.prototype,A,j[0]),c(x,D,j[1])}E&&b(x[D],"sham",!0)}},function(n,a,r){var u=r(151).charAt;n.exports=function(c,v,f){return v+(f?u(c,v).length:1)}},function(n,a,r){var u=r(7),c=r(34),v=r(32),f=r(30),g=r(51),b=r(103),_=u.TypeError;n.exports=function(x,A){var M=x.exec;if(f(M)){var S=c(M,x,A);return S!==null&&v(S),S}if(g(x)==="RegExp")return c(b,x,A);throw _("RegExp#exec called on incompatible receiver")}},function(n,a,r){var u=r(76),c=r(34),v=r(15),f=r(123),g=r(18),b=r(32),_=r(30),x=r(59),A=r(94),M=r(39),S=r(44),E=r(124),D=r(62),I=r(201),B=r(125),$=r(28)("replace"),j=Math.max,U=Math.min,K=v([].concat),Q=v([].push),H=v("".indexOf),W=v("".slice),z="a".replace(/./,"$0")==="$0",Y=!!/./[$]&&/./[$]("a","$0")==="";f("replace",function(q,oe,ie){var Pe=Y?"$":"$0";return[function(we,be){var ye=S(this),Xe=we==null?void 0:D(we,$);return Xe?c(Xe,we,ye,be):c(oe,M(ye),we,be)},function(we,be){var ye=b(this),Xe=M(we);if(typeof be=="string"&&H(be,Pe)===-1&&H(be,"$<")===-1){var Ze=ie(oe,ye,Xe,be);if(Ze.done)return Ze.value}var yt=_(be);yt||(be=M(be));var Be=ye.global;if(Be){var qt=ye.unicode;ye.lastIndex=0}for(var Yt=[];;){var Pt=B(ye,Xe);if(Pt===null||(Q(Yt,Pt),!Be))break;M(Pt[0])===""&&(ye.lastIndex=E(Xe,A(ye.lastIndex),qt))}for(var An,$e="",Se=0,Ae=0;Ae<Yt.length;Ae++){for(var qe=M((Pt=Yt[Ae])[0]),_t=j(U(x(Pt.index),Xe.length),0),ht=[],Vt=1;Vt<Pt.length;Vt++)Q(ht,(An=Pt[Vt])===void 0?An:String(An));var Jt=Pt.groups;if(yt){var an=K([qe],ht,_t,Xe);Jt!==void 0&&Q(an,Jt);var Kt=M(u(be,void 0,an))}else Kt=I(qe,Xe,_t,ht,Jt,be);_t>=Se&&($e+=W(Xe,Se,_t)+Kt,Se=_t+qe.length)}return $e+W(Xe,Se)}]},!!g(function(){var q=/./;return q.exec=function(){var oe=[];return oe.groups={a:"7"},oe},"".replace(q,"$<a>")!=="7"})||!z||Y)},function(n,a,r){var u=r(16),c=Math.hypot,v=Math.abs,f=Math.sqrt;u({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var _,x,A=0,M=0,S=arguments.length,E=0;M<S;)E<(_=v(arguments[M++]))?(A=A*(x=E/_)*x+1,E=_):A+=_>0?(x=_/E)*x:_;return E===1/0?1/0:E*f(A)}})},function(n,a,r){var u=r(51),c=r(7);n.exports=u(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(u,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var f,g="Expected a function",b="__lodash_hash_undefined__",_="__lodash_placeholder__",x=16,A=32,M=64,S=128,E=256,D=1/0,I=9007199254740991,B=NaN,$=4294967295,j=[["ary",S],["bind",1],["bindKey",2],["curry",8],["curryRight",x],["flip",512],["partial",A],["partialRight",M],["rearg",E]],U="[object Arguments]",K="[object Array]",Q="[object Boolean]",H="[object Date]",W="[object Error]",z="[object Function]",Y="[object GeneratorFunction]",q="[object Map]",oe="[object Number]",ie="[object Object]",Pe="[object Promise]",we="[object RegExp]",be="[object Set]",ye="[object String]",Xe="[object Symbol]",Ze="[object WeakMap]",yt="[object ArrayBuffer]",Be="[object DataView]",qt="[object Float32Array]",Yt="[object Float64Array]",Pt="[object Int8Array]",An="[object Int16Array]",$e="[object Int32Array]",Se="[object Uint8Array]",Ae="[object Uint8ClampedArray]",qe="[object Uint16Array]",_t="[object Uint32Array]",ht=/\b__p \+= '';/g,Vt=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,an=/&(?:amp|lt|gt|quot|#39);/g,Kt=/[&<>"']/g,rt=RegExp(an.source),pn=RegExp(Kt.source),Ue=/<%-([\s\S]+?)%>/g,_n=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qn=/^\w*$/,Pr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/[\\^$.*+?()[\]{}|]/g,ao=RegExp(Xr.source),Un=/^\s+/,bo=/\s/,Te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rn=/[()=,{}\[\]\/\s]/,Zt=/\\(\\)?/g,Rn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Er=/\w*$/,li=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,Yo=/^\[object .+?Constructor\]$/,ti=/^0o[0-7]+$/i,Tn=/^(?:0|[1-9]\d*)$/,Fn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,ar=/['\n\r\u2028\u2029\\]/g,eo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Dr="\\u2700-\\u27bf",ml="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="A-Z\\xc0-\\xd6\\xd8-\\xde",yl="\\ufe0e\\ufe0f",ou="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ep="['’]",wc="[\\ud800-\\udfff]",va="["+ou+"]",Fu="["+eo+"]",Nn="\\d+",Uf="[\\u2700-\\u27bf]",_o="["+ml+"]",Ec="[^\\ud800-\\udfff"+ou+Nn+Dr+ml+Ha+"]",Zi="\\ud83c[\\udffb-\\udfff]",la="[^\\ud800-\\udfff]",Ps="(?:\\ud83c[\\udde6-\\uddff]){2}",Ra="[\\ud800-\\udbff][\\udc00-\\udfff]",ma="["+Ha+"]",Ca="(?:"+_o+"|"+Ec+")",Oc="(?:"+ma+"|"+Ec+")",Sc="(?:['’](?:d|ll|m|re|s|t|ve))?",Bf="(?:['’](?:D|LL|M|RE|S|T|VE))?",$u="(?:"+Fu+"|"+Zi+")?",Vf="[\\ufe0e\\ufe0f]?",xc=Vf+$u+("(?:\\u200d(?:"+[la,Ps,Ra].join("|")+")"+Vf+$u+")*"),tp="(?:"+[Uf,Ps,Ra].join("|")+")"+xc,jl="(?:"+[la+Fu+"?",Fu,Ps,Ra,wc].join("|")+")",Wf=RegExp(ep,"g"),gl=RegExp(Fu,"g"),Ac=RegExp(Zi+"(?="+Zi+")|"+jl+xc,"g"),Ns=RegExp([ma+"?"+_o+"+"+Sc+"(?="+[va,ma,"$"].join("|")+")",Oc+"+"+Bf+"(?="+[va,ma+Ca,"$"].join("|")+")",ma+"?"+Ca+"+"+Sc,ma+"+"+Bf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nn,tp].join("|"),"g"),Tc=RegExp("[\\u200d\\ud800-\\udfff"+eo+yl+"]"),Mc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,np=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gf=-1,qr={};qr[qt]=qr[Yt]=qr[Pt]=qr[An]=qr[$e]=qr[Se]=qr[Ae]=qr[qe]=qr[_t]=!0,qr[U]=qr[K]=qr[yt]=qr[Q]=qr[Be]=qr[H]=qr[W]=qr[z]=qr[q]=qr[oe]=qr[ie]=qr[we]=qr[be]=qr[ye]=qr[Ze]=!1;var Wr={};Wr[U]=Wr[K]=Wr[yt]=Wr[Be]=Wr[Q]=Wr[H]=Wr[qt]=Wr[Yt]=Wr[Pt]=Wr[An]=Wr[$e]=Wr[q]=Wr[oe]=Wr[ie]=Wr[we]=Wr[be]=Wr[ye]=Wr[Xe]=Wr[Se]=Wr[Ae]=Wr[qe]=Wr[_t]=!0,Wr[W]=Wr[z]=Wr[Ze]=!1;var zf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iu=parseFloat,ya=parseInt,Rs=typeof u=="object"&&u&&u.Object===Object&&u,Hf=typeof self=="object"&&self&&self.Object===Object&&self,$o=Rs||Hf||Function("return this")(),Il=a&&!a.nodeType&&a,Ll=Il&&typeof c=="object"&&c&&!c.nodeType&&c,Cs=Ll&&Ll.exports===Il,au=Cs&&Rs.process,xi=function(){try{var dt=Ll&&Ll.require&&Ll.require("util").types;return dt||au&&au.binding&&au.binding("util")}catch{}}(),kc=xi&&xi.isArrayBuffer,Xf=xi&&xi.isDate,Pc=xi&&xi.isMap,$i=xi&&xi.isRegExp,ui=xi&&xi.isSet,ga=xi&&xi.isTypedArray;function lo(dt,Ft,$t){switch($t.length){case 0:return dt.call(Ft);case 1:return dt.call(Ft,$t[0]);case 2:return dt.call(Ft,$t[0],$t[1]);case 3:return dt.call(Ft,$t[0],$t[1],$t[2])}return dt.apply(Ft,$t)}function rp(dt,Ft,$t,mn){for(var fr=-1,Rr=dt==null?0:dt.length;++fr<Rr;){var ho=dt[fr];Ft(mn,ho,$t(ho),dt)}return mn}function Ui(dt,Ft){for(var $t=-1,mn=dt==null?0:dt.length;++$t<mn&&Ft(dt[$t],$t,dt)!==!1;);return dt}function qf(dt,Ft){for(var $t=dt==null?0:dt.length;$t--&&Ft(dt[$t],$t,dt)!==!1;);return dt}function Yf(dt,Ft){for(var $t=-1,mn=dt==null?0:dt.length;++$t<mn;)if(!Ft(dt[$t],$t,dt))return!1;return!0}function Bi(dt,Ft){for(var $t=-1,mn=dt==null?0:dt.length,fr=0,Rr=[];++$t<mn;){var ho=dt[$t];Ft(ho,$t,dt)&&(Rr[fr++]=ho)}return Rr}function Ji(dt,Ft){return!!(dt!=null&&dt.length)&&lu(dt,Ft,0)>-1}function Nc(dt,Ft,$t){for(var mn=-1,fr=dt==null?0:dt.length;++mn<fr;)if($t(Ft,dt[mn]))return!0;return!1}function Fr(dt,Ft){for(var $t=-1,mn=dt==null?0:dt.length,fr=Array(mn);++$t<mn;)fr[$t]=Ft(dt[$t],$t,dt);return fr}function si(dt,Ft){for(var $t=-1,mn=Ft.length,fr=dt.length;++$t<mn;)dt[fr+$t]=Ft[$t];return dt}function Ds(dt,Ft,$t,mn){var fr=-1,Rr=dt==null?0:dt.length;for(mn&&Rr&&($t=dt[++fr]);++fr<Rr;)$t=Ft($t,dt[fr],fr,dt);return $t}function Kf(dt,Ft,$t,mn){var fr=dt==null?0:dt.length;for(mn&&fr&&($t=dt[--fr]);fr--;)$t=Ft($t,dt[fr],fr,dt);return $t}function Rc(dt,Ft){for(var $t=-1,mn=dt==null?0:dt.length;++$t<mn;)if(Ft(dt[$t],$t,dt))return!0;return!1}var js=Wi("length");function Xa(dt,Ft,$t){var mn;return $t(dt,function(fr,Rr,ho){if(Ft(fr,Rr,ho))return mn=Rr,!1}),mn}function Vi(dt,Ft,$t,mn){for(var fr=dt.length,Rr=$t+(mn?1:-1);mn?Rr--:++Rr<fr;)if(Ft(dt[Rr],Rr,dt))return Rr;return-1}function lu(dt,Ft,$t){return Ft==Ft?function(mn,fr,Rr){for(var ho=Rr-1,P=mn.length;++ho<P;)if(mn[ho]===fr)return ho;return-1}(dt,Ft,$t):Vi(dt,ba,$t)}function Qi(dt,Ft,$t,mn){for(var fr=$t-1,Rr=dt.length;++fr<Rr;)if(mn(dt[fr],Ft))return fr;return-1}function ba(dt){return dt!=dt}function Nr(dt,Ft){var $t=dt==null?0:dt.length;return $t?uu(dt,Ft)/$t:B}function Wi(dt){return function(Ft){return Ft==null?f:Ft[dt]}}function Da(dt){return function(Ft){return dt==null?f:dt[Ft]}}function yi(dt,Ft,$t,mn,fr){return fr(dt,function(Rr,ho,P){$t=mn?(mn=!1,Rr):Ft($t,Rr,ho,P)}),$t}function uu(dt,Ft){for(var $t,mn=-1,fr=dt.length;++mn<fr;){var Rr=Ft(dt[mn]);Rr!==f&&($t=$t===f?Rr:$t+Rr)}return $t}function Fl(dt,Ft){for(var $t=-1,mn=Array(dt);++$t<dt;)mn[$t]=Ft($t);return mn}function ja(dt){return dt&&dt.slice(0,ci(dt)+1).replace(Un,"")}function po(dt){return function(Ft){return dt(Ft)}}function Uu(dt,Ft){return Fr(Ft,function($t){return dt[$t]})}function qa(dt,Ft){return dt.has(Ft)}function _a(dt,Ft){for(var $t=-1,mn=dt.length;++$t<mn&&lu(Ft,dt[$t],0)>-1;);return $t}function Cc(dt,Ft){for(var $t=dt.length;$t--&&lu(Ft,dt[$t],0)>-1;);return $t}function op(dt,Ft){for(var $t=dt.length,mn=0;$t--;)dt[$t]===Ft&&++mn;return mn}var Dc=Da({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ko=Da({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bu(dt){return"\\"+zf[dt]}function Ya(dt){return Tc.test(dt)}function ni(dt){var Ft=-1,$t=Array(dt.size);return dt.forEach(function(mn,fr){$t[++Ft]=[fr,mn]}),$t}function jc(dt,Ft){return function($t){return dt(Ft($t))}}function ua(dt,Ft){for(var $t=-1,mn=dt.length,fr=0,Rr=[];++$t<mn;){var ho=dt[$t];ho!==Ft&&ho!==_||(dt[$t]=_,Rr[fr++]=$t)}return Rr}function wa(dt){var Ft=-1,$t=Array(dt.size);return dt.forEach(function(mn){$t[++Ft]=mn}),$t}function Is(dt){var Ft=-1,$t=Array(dt.size);return dt.forEach(function(mn){$t[++Ft]=[mn,mn]}),$t}function Gi(dt){return Ya(dt)?function(Ft){for(var $t=Ac.lastIndex=0;Ac.test(Ft);)++$t;return $t}(dt):js(dt)}function ea(dt){return Ya(dt)?function(Ft){return Ft.match(Ac)||[]}(dt):function(Ft){return Ft.split("")}(dt)}function ci(dt){for(var Ft=dt.length;Ft--&&bo.test(dt.charAt(Ft)););return Ft}var sa=Da({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function dt(Ft){var $t,mn=(Ft=Ft==null?$o:Ii.defaults($o.Object(),Ft,Ii.pick($o,np))).Array,fr=Ft.Date,Rr=Ft.Error,ho=Ft.Function,P=Ft.Math,N=Ft.Object,G=Ft.RegExp,ae=Ft.String,ge=Ft.TypeError,Ye=mn.prototype,gt=ho.prototype,zt=N.prototype,En=Ft["__core-js_shared__"],_r=gt.toString,fn=zt.hasOwnProperty,Gr=0,mr=($t=/[^.]+$/.exec(En&&En.keys&&En.keys.IE_PROTO||""))?"Symbol(src)_1."+$t:"",Ir=zt.toString,ca=_r.call(N),Ao=$o._,ta=G("^"+_r.call(fn).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bl=Cs?Ft.Buffer:f,_l=Ft.Symbol,$l=Ft.Uint8Array,su=bl?bl.allocUnsafe:f,Ka=jc(N.getPrototypeOf,N),cu=N.create,ri=zt.propertyIsEnumerable,Ul=Ye.splice,wl=_l?_l.isConcatSpreadable:f,Za=_l?_l.iterator:f,Ja=_l?_l.toStringTag:f,Vu=function(){try{var p=il(N,"defineProperty");return p({},"",{}),p}catch{}}(),yh=Ft.clearTimeout!==$o.clearTimeout&&Ft.clearTimeout,gh=fr&&fr.now!==$o.Date.now&&fr.now,ip=Ft.setTimeout!==$o.setTimeout&&Ft.setTimeout,Ic=P.ceil,Wu=P.floor,Zf=N.getOwnPropertySymbols,bh=bl?bl.isBuffer:f,Gu=Ft.isFinite,Lc=Ye.join,Jf=jc(N.keys,N),Uo=P.max,zi=P.min,Qf=fr.now,ed=Ft.parseInt,Ls=P.random,Zv=Ye.reverse,Fs=il(Ft,"DataView"),$s=il(Ft,"Map"),Fc=il(Ft,"Promise"),zu=il(Ft,"Set"),fu=il(Ft,"WeakMap"),Us=il(N,"create"),$c=fu&&new fu,du={},Jv=_u(Fs),Uc=_u($s),Qv=_u(Fc),em=_u(zu),_h=_u(fu),td=_l?_l.prototype:f,Li=td?td.valueOf:f,wh=td?td.toString:f;function ue(p){if(Go(p)&&!gr(p)&&!(p instanceof Cr)){if(p instanceof Ia)return p;if(fn.call(p,"__wrapped__"))return Sd(p)}return new Ia(p)}var Hu=function(){function p(){}return function(y){if(!Do(y))return{};if(cu)return cu(y);p.prototype=y;var O=new p;return p.prototype=f,O}}();function Bl(){}function Ia(p,y){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=f}function Cr(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$,this.__views__=[]}function Ai(p){var y=-1,O=p==null?0:p.length;for(this.clear();++y<O;){var L=p[y];this.set(L[0],L[1])}}function $r(p){var y=-1,O=p==null?0:p.length;for(this.clear();++y<O;){var L=p[y];this.set(L[0],L[1])}}function Qa(p){var y=-1,O=p==null?0:p.length;for(this.clear();++y<O;){var L=p[y];this.set(L[0],L[1])}}function Vl(p){var y=-1,O=p==null?0:p.length;for(this.__data__=new Qa;++y<O;)this.add(p[y])}function Ea(p){var y=this.__data__=new $r(p);this.size=y.size}function nd(p,y){var O=gr(p),L=!O&&ss(p),X=!O&&!L&&ra(p),ne=!O&&!L&&!X&&et(p),he=O||L||X||ne,xe=he?Fl(p.length,ae):[],Fe=xe.length;for(var mt in p)!y&&!fn.call(p,mt)||he&&(mt=="length"||X&&(mt=="offset"||mt=="parent")||ne&&(mt=="buffer"||mt=="byteLength"||mt=="byteOffset")||Fi(mt,Fe))||xe.push(mt);return xe}function rd(p){var y=p.length;return y?p[mp(0,y-1)]:f}function ap(p,y){return Tl(gi(p),pu(y,0,p.length))}function Eh(p){return Tl(gi(p))}function Wl(p,y,O){(O!==f&&!Ua(p[y],O)||O===f&&!(y in p))&&el(p,y,O)}function Bo(p,y,O){var L=p[y];fn.call(p,y)&&Ua(L,O)&&(O!==f||y in p)||el(p,y,O)}function Bs(p,y){for(var O=p.length;O--;)if(Ua(p[O][0],y))return O;return-1}function lp(p,y,O,L){return wo(p,function(X,ne,he){y(L,X,O(X),he)}),L}function Gl(p,y){return p&&nl(y,Dt(y),p)}function el(p,y,O){y=="__proto__"&&Vu?Vu(p,y,{configurable:!0,enumerable:!0,value:O,writable:!0}):p[y]=O}function Bc(p,y){for(var O=-1,L=y.length,X=mn(L),ne=p==null;++O<L;)X[O]=ne?f:Gt(p,y[O]);return X}function pu(p,y,O){return p==p&&(O!==f&&(p=p<=O?p:O),y!==f&&(p=p>=y?p:y)),p}function Oa(p,y,O,L,X,ne){var he,xe=1&y,Fe=2&y,mt=4&y;if(O&&(he=X?O(p,L,X,ne):O(p)),he!==f)return he;if(!Do(p))return p;var wt=gr(p);if(wt){if(he=function(jt){var tn=jt.length,ir=new jt.constructor(tn);return tn&&typeof jt[0]=="string"&&fn.call(jt,"index")&&(ir.index=jt.index,ir.input=jt.input),ir}(p),!xe)return gi(p,he)}else{var Wt=Ro(p),wn=Wt==z||Wt==Y;if(ra(p))return Ph(p,xe);if(Wt==ie||Wt==U||wn&&!X){if(he=Fe||wn?{}:na(p),!xe)return Fe?function(jt,tn){return nl(jt,ts(jt),tn)}(p,function(jt,tn){return jt&&nl(tn,Mt(tn),jt)}(he,p)):function(jt,tn){return nl(jt,fi(jt),tn)}(p,Gl(he,p))}else{if(!Wr[Wt])return X?p:{};he=function(jt,tn,ir){var Mn=jt.constructor;switch(tn){case yt:return Yu(jt);case Q:case H:return new Mn(+jt);case Be:return function(vr,Lr){var Xn=Lr?Yu(vr.buffer):vr.buffer;return new vr.constructor(Xn,vr.byteOffset,vr.byteLength)}(jt,ir);case qt:case Yt:case Pt:case An:case $e:case Se:case Ae:case qe:case _t:return Nh(jt,ir);case q:return new Mn;case oe:case ye:return new Mn(jt);case we:return function(vr){var Lr=new vr.constructor(vr.source,Er.exec(vr));return Lr.lastIndex=vr.lastIndex,Lr}(jt);case be:return new Mn;case Xe:return He=jt,Li?N(Li.call(He)):{}}var He}(p,Wt,xe)}}ne||(ne=new Ea);var On=ne.get(p);if(On)return On;ne.set(p,he),Ee(p)?p.forEach(function(jt){he.add(Oa(jt,y,O,jt,p,ne))}):kd(p)&&p.forEach(function(jt,tn){he.set(tn,Oa(jt,y,O,tn,p,ne))});var Gn=wt?f:(mt?Fe?bd:Kc:Fe?Mt:Dt)(p);return Ui(Gn||p,function(jt,tn){Gn&&(jt=p[tn=jt]),Bo(he,tn,Oa(jt,y,O,tn,p,ne))}),he}function up(p,y,O){var L=O.length;if(p==null)return!L;for(p=N(p);L--;){var X=O[L],ne=y[X],he=p[X];if(he===f&&!(X in p)||!ne(he))return!1}return!0}function sp(p,y,O){if(typeof p!="function")throw new ge(g);return os(function(){p.apply(f,O)},y)}function tl(p,y,O,L){var X=-1,ne=Ji,he=!0,xe=p.length,Fe=[],mt=y.length;if(!xe)return Fe;O&&(y=Fr(y,po(O))),L?(ne=Nc,he=!1):y.length>=200&&(ne=qa,he=!1,y=new Vl(y));e:for(;++X<xe;){var wt=p[X],Wt=O==null?wt:O(wt);if(wt=L||wt!==0?wt:0,he&&Wt==Wt){for(var wn=mt;wn--;)if(y[wn]===Wt)continue e;Fe.push(wt)}else ne(y,Wt,L)||Fe.push(wt)}return Fe}ue.templateSettings={escape:Ue,evaluate:_n,interpolate:Jn,variable:"",imports:{_:ue}},ue.prototype=Bl.prototype,ue.prototype.constructor=ue,Ia.prototype=Hu(Bl.prototype),Ia.prototype.constructor=Ia,Cr.prototype=Hu(Bl.prototype),Cr.prototype.constructor=Cr,Ai.prototype.clear=function(){this.__data__=Us?Us(null):{},this.size=0},Ai.prototype.delete=function(p){var y=this.has(p)&&delete this.__data__[p];return this.size-=y?1:0,y},Ai.prototype.get=function(p){var y=this.__data__;if(Us){var O=y[p];return O===b?f:O}return fn.call(y,p)?y[p]:f},Ai.prototype.has=function(p){var y=this.__data__;return Us?y[p]!==f:fn.call(y,p)},Ai.prototype.set=function(p,y){var O=this.__data__;return this.size+=this.has(p)?0:1,O[p]=Us&&y===f?b:y,this},$r.prototype.clear=function(){this.__data__=[],this.size=0},$r.prototype.delete=function(p){var y=this.__data__,O=Bs(y,p);return!(O<0)&&(O==y.length-1?y.pop():Ul.call(y,O,1),--this.size,!0)},$r.prototype.get=function(p){var y=this.__data__,O=Bs(y,p);return O<0?f:y[O][1]},$r.prototype.has=function(p){return Bs(this.__data__,p)>-1},$r.prototype.set=function(p,y){var O=this.__data__,L=Bs(O,p);return L<0?(++this.size,O.push([p,y])):O[L][1]=y,this},Qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ai,map:new($s||$r),string:new Ai}},Qa.prototype.delete=function(p){var y=Ys(this,p).delete(p);return this.size-=y?1:0,y},Qa.prototype.get=function(p){return Ys(this,p).get(p)},Qa.prototype.has=function(p){return Ys(this,p).has(p)},Qa.prototype.set=function(p,y){var O=Ys(this,p),L=O.size;return O.set(p,y),this.size+=O.size==L?0:1,this},Vl.prototype.add=Vl.prototype.push=function(p){return this.__data__.set(p,b),this},Vl.prototype.has=function(p){return this.__data__.has(p)},Ea.prototype.clear=function(){this.__data__=new $r,this.size=0},Ea.prototype.delete=function(p){var y=this.__data__,O=y.delete(p);return this.size=y.size,O},Ea.prototype.get=function(p){return this.__data__.get(p)},Ea.prototype.has=function(p){return this.__data__.has(p)},Ea.prototype.set=function(p,y){var O=this.__data__;if(O instanceof $r){var L=O.__data__;if(!$s||L.length<199)return L.push([p,y]),this.size=++O.size,this;O=this.__data__=new Qa(L)}return O.set(p,y),this.size=O.size,this};var wo=Ju(Cn),Oh=Ju(fo,!0);function cp(p,y){var O=!0;return wo(p,function(L,X,ne){return O=!!y(L,X,ne)}),O}function Vo(p,y,O){for(var L=-1,X=p.length;++L<X;){var ne=p[L],he=y(ne);if(he!=null&&(xe===f?he==he&&!vt(he):O(he,xe)))var xe=he,Fe=ne}return Fe}function Yr(p,y){var O=[];return wo(p,function(L,X,ne){y(L,X,ne)&&O.push(L)}),O}function oi(p,y,O,L,X){var ne=-1,he=p.length;for(O||(O=Jc),X||(X=[]);++ne<he;){var xe=p[ne];y>0&&O(xe)?y>1?oi(xe,y-1,O,L,X):si(X,xe):L||(X[X.length]=xe)}return X}var xr=Qu(),co=Qu(!0);function Cn(p,y){return p&&xr(p,y,Dt)}function fo(p,y){return p&&co(p,y,Dt)}function Vc(p,y){return Bi(y,function(O){return Aa(p[O])})}function El(p,y){for(var O=0,L=(y=zr(y,p)).length;p!=null&&O<L;)p=p[al(y[O++])];return O&&O==L?p:f}function od(p,y,O){var L=y(p);return gr(p)?L:si(L,O(p))}function To(p){return p==null?p===f?"[object Undefined]":"[object Null]":Ja&&Ja in N(p)?function(y){var O=fn.call(y,Ja),L=y[Ja];try{y[Ja]=f;var X=!0}catch{}var ne=Ir.call(y);return X&&(O?y[Ja]=L:delete y[Ja]),ne}(p):function(y){return Ir.call(y)}(p)}function No(p,y){return p>y}function fp(p,y){return p!=null&&fn.call(p,y)}function dp(p,y){return p!=null&&y in N(p)}function Wc(p,y,O){for(var L=O?Nc:Ji,X=p[0].length,ne=p.length,he=ne,xe=mn(ne),Fe=1/0,mt=[];he--;){var wt=p[he];he&&y&&(wt=Fr(wt,po(y))),Fe=zi(wt.length,Fe),xe[he]=!O&&(y||X>=120&&wt.length>=120)?new Vl(he&&wt):f}wt=p[0];var Wt=-1,wn=xe[0];e:for(;++Wt<X&&mt.length<Fe;){var On=wt[Wt],Gn=y?y(On):On;if(On=O||On!==0?On:0,!(wn?qa(wn,Gn):L(mt,Gn,O))){for(he=ne;--he;){var jt=xe[he];if(!(jt?qa(jt,Gn):L(p[he],Gn,O)))continue e}wn&&wn.push(Gn),mt.push(On)}}return mt}function Hi(p,y,O){var L=(p=bu(p,y=zr(y,p)))==null?p:p[al(Eo(y))];return L==null?f:lo(L,p,O)}function id(p){return Go(p)&&To(p)==U}function Vs(p,y,O,L,X){return p===y||(p==null||y==null||!Go(p)&&!Go(y)?p!=p&&y!=y:function(ne,he,xe,Fe,mt,wt){var Wt=gr(ne),wn=gr(he),On=Wt?K:Ro(ne),Gn=wn?K:Ro(he),jt=(On=On==U?ie:On)==ie,tn=(Gn=Gn==U?ie:Gn)==ie,ir=On==Gn;if(ir&&ra(ne)){if(!ra(he))return!1;Wt=!0,jt=!1}if(ir&&!jt)return wt||(wt=new Ea),Wt||et(ne)?qs(ne,he,xe,Fe,mt,wt):function(Xn,ur,ki,Ba,Zl,Pi,Su){switch(ki){case Be:if(Xn.byteLength!=ur.byteLength||Xn.byteOffset!=ur.byteOffset)return!1;Xn=Xn.buffer,ur=ur.buffer;case yt:return!(Xn.byteLength!=ur.byteLength||!Pi(new $l(Xn),new $l(ur)));case Q:case H:case oe:return Ua(+Xn,+ur);case W:return Xn.name==ur.name&&Xn.message==ur.message;case we:case ye:return Xn==ur+"";case q:var fs=ni;case be:var Pd=1&Ba;if(fs||(fs=wa),Xn.size!=ur.size&&!Pd)return!1;var Dp=Su.get(Xn);if(Dp)return Dp==ur;Ba|=2,Su.set(Xn,ur);var xu=qs(fs(Xn),fs(ur),Ba,Zl,Pi,Su);return Su.delete(Xn),xu;case Xe:if(Li)return Li.call(Xn)==Li.call(ur)}return!1}(ne,he,On,xe,Fe,mt,wt);if(!(1&xe)){var Mn=jt&&fn.call(ne,"__wrapped__"),He=tn&&fn.call(he,"__wrapped__");if(Mn||He){var vr=Mn?ne.value():ne,Lr=He?he.value():he;return wt||(wt=new Ea),mt(vr,Lr,xe,Fe,wt)}}return ir?(wt||(wt=new Ea),function(Xn,ur,ki,Ba,Zl,Pi){var Su=1&ki,fs=Kc(Xn),Pd=fs.length,Dp=Kc(ur).length;if(Pd!=Dp&&!Su)return!1;for(var xu=Pd;xu--;){var Qs=fs[xu];if(!(Su?Qs in ur:fn.call(ur,Qs)))return!1}var lm=Pi.get(Xn),Nd=Pi.get(ur);if(lm&&Nd)return lm==ur&&Nd==Xn;var jp=!0;Pi.set(Xn,ur),Pi.set(ur,Xn);for(var um=Su;++xu<Pd;){var Ip=Xn[Qs=fs[xu]],mf=ur[Qs];if(Ba)var yf=Su?Ba(mf,Ip,Qs,ur,Xn,Pi):Ba(Ip,mf,Qs,Xn,ur,Pi);if(!(yf===f?Ip===mf||Zl(Ip,mf,ki,Ba,Pi):yf)){jp=!1;break}um||(um=Qs=="constructor")}if(jp&&!um){var ds=Xn.constructor,Lp=ur.constructor;ds==Lp||!("constructor"in Xn)||!("constructor"in ur)||typeof ds=="function"&&ds instanceof ds&&typeof Lp=="function"&&Lp instanceof Lp||(jp=!1)}return Pi.delete(Xn),Pi.delete(ur),jp}(ne,he,xe,Fe,mt,wt)):!1}(p,y,O,L,Vs,X))}function La(p,y,O,L){var X=O.length,ne=X,he=!L;if(p==null)return!ne;for(p=N(p);X--;){var xe=O[X];if(he&&xe[2]?xe[1]!==p[xe[0]]:!(xe[0]in p))return!1}for(;++X<ne;){var Fe=(xe=O[X])[0],mt=p[Fe],wt=xe[1];if(he&&xe[2]){if(mt===f&&!(Fe in p))return!1}else{var Wt=new Ea;if(L)var wn=L(mt,wt,Fe,p,y,Wt);if(!(wn===f?Vs(wt,mt,3,L,Wt):wn))return!1}}return!0}function hu(p){return!(!Do(p)||(y=p,mr&&mr in y))&&(Aa(p)?ta:Yo).test(_u(p));var y}function zl(p){return typeof p=="function"?p:p==null?Kn:typeof p=="object"?gr(p)?hp(p[0],p[1]):pp(p):pe(p)}function Fa(p){if(!kt(p))return Jf(p);var y=[];for(var O in N(p))fn.call(p,O)&&O!="constructor"&&y.push(O);return y}function Sh(p){if(!Do(p))return function(X){var ne=[];if(X!=null)for(var he in N(X))ne.push(he);return ne}(p);var y=kt(p),O=[];for(var L in p)(L!="constructor"||!y&&fn.call(p,L))&&O.push(L);return O}function Ol(p,y){return p<y}function Sa(p,y){var O=-1,L=pa(p)?mn(p.length):[];return wo(p,function(X,ne,he){L[++O]=y(X,ne,he)}),L}function pp(p){var y=Zc(p);return y.length==1&&y[0][2]?Qc(y[0][0],y[0][1]):function(O){return O===p||La(O,p,y)}}function hp(p,y){return xl(p)&&ns(y)?Qc(al(p),y):function(O){var L=Gt(O,p);return L===f&&L===y?At(O,p):Vs(y,L,3)}}function ad(p,y,O,L,X){p!==y&&xr(y,function(ne,he){if(X||(X=new Ea),Do(ne))(function(Fe,mt,wt,Wt,wn,On,Gn){var jt=Ed(Fe,wt),tn=Ed(mt,wt),ir=Gn.get(tn);if(ir)return void Wl(Fe,wt,ir);var Mn=On?On(jt,tn,wt+"",Fe,mt,Gn):f,He=Mn===f;if(He){var vr=gr(tn),Lr=!vr&&ra(tn),Xn=!vr&&!Lr&&et(tn);Mn=tn,vr||Lr||Xn?gr(jt)?Mn=jt:ko(jt)?Mn=gi(jt):Lr?(He=!1,Mn=Ph(tn,!0)):Xn?(He=!1,Mn=Nh(tn,!0)):Mn=[]:V(tn)||ss(tn)?(Mn=jt,ss(jt)?Mn=Ct(jt):Do(jt)&&!Aa(jt)||(Mn=na(tn))):He=!1}He&&(Gn.set(tn,Mn),wn(Mn,tn,Wt,On,Gn),Gn.delete(tn)),Wl(Fe,wt,Mn)})(p,y,he,O,ad,L,X);else{var xe=L?L(Ed(p,he),ne,he+"",p,y,X):f;xe===f&&(xe=ne),Wl(p,he,xe)}},Mt)}function xh(p,y){var O=p.length;if(O)return Fi(y+=y<0?O:0,O)?p[y]:f}function Ah(p,y,O){y=y.length?Fr(y,function(ne){return gr(ne)?function(he){return El(he,ne.length===1?ne[0]:ne)}:ne}):[Kn];var L=-1;y=Fr(y,po(er()));var X=Sa(p,function(ne,he,xe){var Fe=Fr(y,function(mt){return mt(ne)});return{criteria:Fe,index:++L,value:ne}});return function(ne,he){var xe=ne.length;for(ne.sort(he);xe--;)ne[xe]=ne[xe].value;return ne}(X,function(ne,he){return function(xe,Fe,mt){for(var wt=-1,Wt=xe.criteria,wn=Fe.criteria,On=Wt.length,Gn=mt.length;++wt<On;){var jt=Ws(Wt[wt],wn[wt]);if(jt)return wt>=Gn?jt:jt*(mt[wt]=="desc"?-1:1)}return xe.index-Fe.index}(ne,he,O)})}function Th(p,y,O){for(var L=-1,X=y.length,ne={};++L<X;){var he=y[L],xe=El(p,he);O(xe,he)&&Xu(ne,zr(he,p),xe)}return ne}function ld(p,y,O,L){var X=L?Qi:lu,ne=-1,he=y.length,xe=p;for(p===y&&(y=gi(y)),O&&(xe=Fr(p,po(O)));++ne<he;)for(var Fe=0,mt=y[ne],wt=O?O(mt):mt;(Fe=X(xe,wt,Fe,L))>-1;)xe!==p&&Ul.call(xe,Fe,1),Ul.call(p,Fe,1);return p}function vp(p,y){for(var O=p?y.length:0,L=O-1;O--;){var X=y[O];if(O==L||X!==ne){var ne=X;Fi(X)?Ul.call(p,X,1):sd(p,X)}}return p}function mp(p,y){return p+Wu(Ls()*(y-p+1))}function Gc(p,y){var O="";if(!p||y<1||y>I)return O;do y%2&&(O+=p),(y=Wu(y/2))&&(p+=p);while(y);return O}function Ar(p,y){return tf(ef(p,y,Kn),p+"")}function tm(p){return rd(br(p))}function yp(p,y){var O=br(p);return Tl(O,pu(y,0,O.length))}function Xu(p,y,O,L){if(!Do(p))return p;for(var X=-1,ne=(y=zr(y,p)).length,he=ne-1,xe=p;xe!=null&&++X<ne;){var Fe=al(y[X]),mt=O;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return p;if(X!=he){var wt=xe[Fe];(mt=L?L(wt,Fe,xe):f)===f&&(mt=Do(wt)?wt:Fi(y[X+1])?[]:{})}Bo(xe,Fe,mt),xe=xe[Fe]}return p}var zc=$c?function(p,y){return $c.set(p,y),p}:Kn,nm=Vu?function(p,y){return Vu(p,"toString",{configurable:!0,enumerable:!1,value:Tr(y),writable:!0})}:Kn;function Mh(p){return Tl(br(p))}function xa(p,y,O){var L=-1,X=p.length;y<0&&(y=-y>X?0:X+y),(O=O>X?X:O)<0&&(O+=X),X=y>O?0:O-y>>>0,y>>>=0;for(var ne=mn(X);++L<X;)ne[L]=p[L+y];return ne}function rm(p,y){var O;return wo(p,function(L,X,ne){return!(O=y(L,X,ne))}),!!O}function Hc(p,y,O){var L=0,X=p==null?L:p.length;if(typeof y=="number"&&y==y&&X<=2147483647){for(;L<X;){var ne=L+X>>>1,he=p[ne];he!==null&&!vt(he)&&(O?he<=y:he<y)?L=ne+1:X=ne}return X}return ud(p,y,Kn,O)}function ud(p,y,O,L){var X=0,ne=p==null?0:p.length;if(ne===0)return 0;for(var he=(y=O(y))!=y,xe=y===null,Fe=vt(y),mt=y===f;X<ne;){var wt=Wu((X+ne)/2),Wt=O(p[wt]),wn=Wt!==f,On=Wt===null,Gn=Wt==Wt,jt=vt(Wt);if(he)var tn=L||Gn;else tn=mt?Gn&&(L||wn):xe?Gn&&wn&&(L||!On):Fe?Gn&&wn&&!On&&(L||!jt):!On&&!jt&&(L?Wt<=y:Wt<y);tn?X=wt+1:ne=wt}return zi(ne,4294967294)}function gp(p,y){for(var O=-1,L=p.length,X=0,ne=[];++O<L;){var he=p[O],xe=y?y(he):he;if(!O||!Ua(xe,Fe)){var Fe=xe;ne[X++]=he===0?0:he}}return ne}function kh(p){return typeof p=="number"?p:vt(p)?B:+p}function fa(p){if(typeof p=="string")return p;if(gr(p))return Fr(p,fa)+"";if(vt(p))return wh?wh.call(p):"";var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function vu(p,y,O){var L=-1,X=Ji,ne=p.length,he=!0,xe=[],Fe=xe;if(O)he=!1,X=Nc;else if(ne>=200){var mt=y?null:Ch(p);if(mt)return wa(mt);he=!1,X=qa,Fe=new Vl}else Fe=y?[]:xe;e:for(;++L<ne;){var wt=p[L],Wt=y?y(wt):wt;if(wt=O||wt!==0?wt:0,he&&Wt==Wt){for(var wn=Fe.length;wn--;)if(Fe[wn]===Wt)continue e;y&&Fe.push(Wt),xe.push(wt)}else X(Fe,Wt,O)||(Fe!==xe&&Fe.push(Wt),xe.push(wt))}return xe}function sd(p,y){return(p=bu(p,y=zr(y,p)))==null||delete p[al(Eo(y))]}function qu(p,y,O,L){return Xu(p,y,O(El(p,y)),L)}function cd(p,y,O,L){for(var X=p.length,ne=L?X:-1;(L?ne--:++ne<X)&&y(p[ne],ne,p););return O?xa(p,L?0:ne,L?ne+1:X):xa(p,L?ne+1:0,L?X:ne)}function bp(p,y){var O=p;return O instanceof Cr&&(O=O.value()),Ds(y,function(L,X){return X.func.apply(X.thisArg,si([L],X.args))},O)}function fd(p,y,O){var L=p.length;if(L<2)return L?vu(p[0]):[];for(var X=-1,ne=mn(L);++X<L;)for(var he=p[X],xe=-1;++xe<L;)xe!=X&&(ne[X]=tl(ne[X]||he,p[xe],y,O));return vu(oi(ne,1),y,O)}function Xc(p,y,O){for(var L=-1,X=p.length,ne=y.length,he={};++L<X;){var xe=L<ne?y[L]:f;O(he,p[L],xe)}return he}function dd(p){return ko(p)?p:[]}function pd(p){return typeof p=="function"?p:Kn}function zr(p,y){return gr(p)?p:xl(p,y)?[p]:Tp(Et(p))}var om=Ar;function to(p,y,O){var L=p.length;return O=O===f?L:O,!y&&O>=L?p:xa(p,y,O)}var hd=yh||function(p){return $o.clearTimeout(p)};function Ph(p,y){if(y)return p.slice();var O=p.length,L=su?su(O):new p.constructor(O);return p.copy(L),L}function Yu(p){var y=new p.constructor(p.byteLength);return new $l(y).set(new $l(p)),y}function Nh(p,y){var O=y?Yu(p.buffer):p.buffer;return new p.constructor(O,p.byteOffset,p.length)}function Ws(p,y){if(p!==y){var O=p!==f,L=p===null,X=p==p,ne=vt(p),he=y!==f,xe=y===null,Fe=y==y,mt=vt(y);if(!xe&&!mt&&!ne&&p>y||ne&&he&&Fe&&!xe&&!mt||L&&he&&Fe||!O&&Fe||!X)return 1;if(!L&&!ne&&!mt&&p<y||mt&&O&&X&&!L&&!ne||xe&&O&&X||!he&&X||!Fe)return-1}return 0}function Rh(p,y,O,L){for(var X=-1,ne=p.length,he=O.length,xe=-1,Fe=y.length,mt=Uo(ne-he,0),wt=mn(Fe+mt),Wt=!L;++xe<Fe;)wt[xe]=y[xe];for(;++X<he;)(Wt||X<ne)&&(wt[O[X]]=p[X]);for(;mt--;)wt[xe++]=p[X++];return wt}function Ku(p,y,O,L){for(var X=-1,ne=p.length,he=-1,xe=O.length,Fe=-1,mt=y.length,wt=Uo(ne-xe,0),Wt=mn(wt+mt),wn=!L;++X<wt;)Wt[X]=p[X];for(var On=X;++Fe<mt;)Wt[On+Fe]=y[Fe];for(;++he<xe;)(wn||X<ne)&&(Wt[On+O[he]]=p[X++]);return Wt}function gi(p,y){var O=-1,L=p.length;for(y||(y=mn(L));++O<L;)y[O]=p[O];return y}function nl(p,y,O,L){var X=!O;O||(O={});for(var ne=-1,he=y.length;++ne<he;){var xe=y[ne],Fe=L?L(O[xe],p[xe],xe,O,p):f;Fe===f&&(Fe=p[xe]),X?el(O,xe,Fe):Bo(O,xe,Fe)}return O}function Hl(p,y){return function(O,L){var X=gr(O)?rp:lp,ne=y?y():{};return X(O,p,er(L,2),ne)}}function Zu(p){return Ar(function(y,O){var L=-1,X=O.length,ne=X>1?O[X-1]:f,he=X>2?O[2]:f;for(ne=p.length>3&&typeof ne=="function"?(X--,ne):f,he&&Wo(O[0],O[1],he)&&(ne=X<3?f:ne,X=1),y=N(y);++L<X;){var xe=O[L];xe&&p(y,xe,L,ne)}return y})}function Ju(p,y){return function(O,L){if(O==null)return O;if(!pa(O))return p(O,L);for(var X=O.length,ne=y?X:-1,he=N(O);(y?ne--:++ne<X)&&L(he[ne],ne,he)!==!1;);return O}}function Qu(p){return function(y,O,L){for(var X=-1,ne=N(y),he=L(y),xe=he.length;xe--;){var Fe=he[p?xe:++X];if(O(ne[Fe],Fe,ne)===!1)break}return y}}function vd(p){return function(y){var O=Ya(y=Et(y))?ea(y):f,L=O?O[0]:y.charAt(0),X=O?to(O,1).join(""):y.slice(1);return L[p]()+X}}function Xl(p){return function(y){return Ds(vo(nr(y).replace(Wf,"")),p,"")}}function es(p){return function(){var y=arguments;switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3]);case 5:return new p(y[0],y[1],y[2],y[3],y[4]);case 6:return new p(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new p(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var O=Hu(p.prototype),L=p.apply(O,y);return Do(L)?L:O}}function md(p){return function(y,O,L){var X=N(y);if(!pa(y)){var ne=er(O,3);y=Dt(y),O=function(xe){return ne(X[xe],xe,X)}}var he=p(y,O,L);return he>-1?X[ne?y[he]:he]:f}}function rl(p){return Sl(function(y){var O=y.length,L=O,X=Ia.prototype.thru;for(p&&y.reverse();L--;){var ne=y[L];if(typeof ne!="function")throw new ge(g);if(X&&!he&&mu(ne)=="wrapper")var he=new Ia([],!0)}for(L=he?L:O;++L<O;){var xe=mu(ne=y[L]),Fe=xe=="wrapper"?_d(ne):f;he=Fe&&Al(Fe[0])&&Fe[1]==424&&!Fe[4].length&&Fe[9]==1?he[mu(Fe[0])].apply(he,Fe[3]):ne.length==1&&Al(ne)?he[xe]():he.thru(ne)}return function(){var mt=arguments,wt=mt[0];if(he&&mt.length==1&&gr(wt))return he.plant(wt).value();for(var Wt=0,wn=O?y[Wt].apply(this,mt):wt;++Wt<O;)wn=y[Wt].call(this,wn);return wn}})}function qc(p,y,O,L,X,ne,he,xe,Fe,mt){var wt=y&S,Wt=1&y,wn=2&y,On=24&y,Gn=512&y,jt=wn?f:es(p);return function tn(){for(var ir=arguments.length,Mn=mn(ir),He=ir;He--;)Mn[He]=arguments[He];if(On)var vr=yu(tn),Lr=op(Mn,vr);if(L&&(Mn=Rh(Mn,L,X,On)),ne&&(Mn=Ku(Mn,ne,he,On)),ir-=Lr,On&&ir<mt){var Xn=ua(Mn,vr);return _p(p,y,qc,tn.placeholder,O,Mn,Xn,xe,Fe,mt-ir)}var ur=Wt?O:this,ki=wn?ur[p]:p;return ir=Mn.length,xe?Mn=rs(Mn,xe):Gn&&ir>1&&Mn.reverse(),wt&&Fe<ir&&(Mn.length=Fe),this&&this!==$o&&this instanceof tn&&(ki=jt||es(ki)),ki.apply(ur,Mn)}}function Yc(p,y){return function(O,L){return function(X,ne,he,xe){return Cn(X,function(Fe,mt,wt){ne(xe,he(Fe),mt,wt)}),xe}(O,p,y(L),{})}}function Gs(p,y){return function(O,L){var X;if(O===f&&L===f)return y;if(O!==f&&(X=O),L!==f){if(X===f)return L;typeof O=="string"||typeof L=="string"?(O=fa(O),L=fa(L)):(O=kh(O),L=kh(L)),X=p(O,L)}return X}}function zs(p){return Sl(function(y){return y=Fr(y,po(er())),Ar(function(O){var L=this;return p(y,function(X){return lo(X,L,O)})})})}function Hs(p,y){var O=(y=y===f?" ":fa(y)).length;if(O<2)return O?Gc(y,p):y;var L=Gc(y,Ic(p/Gi(y)));return Ya(y)?to(ea(L),0,p).join(""):L.slice(0,p)}function yd(p){return function(y,O,L){return L&&typeof L!="number"&&Wo(y,O,L)&&(O=L=f),y=Rt(y),O===f?(O=y,y=0):O=Rt(O),function(X,ne,he,xe){for(var Fe=-1,mt=Uo(Ic((ne-X)/(he||1)),0),wt=mn(mt);mt--;)wt[xe?mt:++Fe]=X,X+=he;return wt}(y,O,L=L===f?y<O?1:-1:Rt(L),p)}}function Xs(p){return function(y,O){return typeof y=="string"&&typeof O=="string"||(y=Ut(y),O=Ut(O)),p(y,O)}}function _p(p,y,O,L,X,ne,he,xe,Fe,mt){var wt=8&y;y|=wt?A:M,4&(y&=~(wt?M:A))||(y&=-4);var Wt=[p,y,X,wt?ne:f,wt?he:f,wt?f:ne,wt?f:he,xe,Fe,mt],wn=O.apply(f,Wt);return Al(p)&&xp(wn,Wt),wn.placeholder=L,Od(wn,p,y)}function gd(p){var y=P[p];return function(O,L){if(O=Ut(O),(L=L==null?0:zi(ft(L),292))&&Gu(O)){var X=(Et(O)+"e").split("e");return+((X=(Et(y(X[0]+"e"+(+X[1]+L)))+"e").split("e"))[0]+"e"+(+X[1]-L))}return y(O)}}var Ch=zu&&1/wa(new zu([,-0]))[1]==D?function(p){return new zu(p)}:ot;function wp(p){return function(y){var O=Ro(y);return O==q?ni(y):O==be?Is(y):function(L,X){return Fr(X,function(ne){return[ne,L[ne]]})}(y,p(y))}}function ol(p,y,O,L,X,ne,he,xe){var Fe=2&y;if(!Fe&&typeof p!="function")throw new ge(g);var mt=L?L.length:0;if(mt||(y&=-97,L=X=f),he=he===f?he:Uo(ft(he),0),xe=xe===f?xe:ft(xe),mt-=X?X.length:0,y&M){var wt=L,Wt=X;L=X=f}var wn=Fe?f:_d(p),On=[p,y,O,L,X,wt,Wt,ne,he,xe];if(wn&&function(jt,tn){var ir=jt[1],Mn=tn[1],He=ir|Mn,vr=He<131,Lr=Mn==S&&ir==8||Mn==S&&ir==E&&jt[7].length<=tn[8]||Mn==384&&tn[7].length<=tn[8]&&ir==8;if(!vr&&!Lr)return jt;1&Mn&&(jt[2]=tn[2],He|=1&ir?0:4);var Xn=tn[3];if(Xn){var ur=jt[3];jt[3]=ur?Rh(ur,Xn,tn[4]):Xn,jt[4]=ur?ua(jt[3],_):tn[4]}(Xn=tn[5])&&(ur=jt[5],jt[5]=ur?Ku(ur,Xn,tn[6]):Xn,jt[6]=ur?ua(jt[5],_):tn[6]),(Xn=tn[7])&&(jt[7]=Xn),Mn&S&&(jt[8]=jt[8]==null?tn[8]:zi(jt[8],tn[8])),jt[9]==null&&(jt[9]=tn[9]),jt[0]=tn[0],jt[1]=He}(On,wn),p=On[0],y=On[1],O=On[2],L=On[3],X=On[4],!(xe=On[9]=On[9]===f?Fe?0:p.length:Uo(On[9]-mt,0))&&24&y&&(y&=-25),y&&y!=1)Gn=y==8||y==x?function(jt,tn,ir){var Mn=es(jt);return function He(){for(var vr=arguments.length,Lr=mn(vr),Xn=vr,ur=yu(He);Xn--;)Lr[Xn]=arguments[Xn];var ki=vr<3&&Lr[0]!==ur&&Lr[vr-1]!==ur?[]:ua(Lr,ur);return(vr-=ki.length)<ir?_p(jt,tn,qc,He.placeholder,f,Lr,ki,f,f,ir-vr):lo(this&&this!==$o&&this instanceof He?Mn:jt,this,Lr)}}(p,y,xe):y!=A&&y!=33||X.length?qc.apply(f,On):function(jt,tn,ir,Mn){var He=1&tn,vr=es(jt);return function Lr(){for(var Xn=-1,ur=arguments.length,ki=-1,Ba=Mn.length,Zl=mn(Ba+ur),Pi=this&&this!==$o&&this instanceof Lr?vr:jt;++ki<Ba;)Zl[ki]=Mn[ki];for(;ur--;)Zl[ki++]=arguments[++Xn];return lo(Pi,He?ir:this,Zl)}}(p,y,O,L);else var Gn=function(jt,tn,ir){var Mn=1&tn,He=es(jt);return function vr(){return(this&&this!==$o&&this instanceof vr?He:jt).apply(Mn?ir:this,arguments)}}(p,y,O);return Od((wn?zc:xp)(Gn,On),p,y)}function Ep(p,y,O,L){return p===f||Ua(p,zt[O])&&!fn.call(L,O)?y:p}function Op(p,y,O,L,X,ne){return Do(p)&&Do(y)&&(ne.set(y,p),ad(p,y,f,Op,ne),ne.delete(y)),p}function Sp(p){return V(p)?f:p}function qs(p,y,O,L,X,ne){var he=1&O,xe=p.length,Fe=y.length;if(xe!=Fe&&!(he&&Fe>xe))return!1;var mt=ne.get(p),wt=ne.get(y);if(mt&&wt)return mt==y&&wt==p;var Wt=-1,wn=!0,On=2&O?new Vl:f;for(ne.set(p,y),ne.set(y,p);++Wt<xe;){var Gn=p[Wt],jt=y[Wt];if(L)var tn=he?L(jt,Gn,Wt,y,p,ne):L(Gn,jt,Wt,p,y,ne);if(tn!==f){if(tn)continue;wn=!1;break}if(On){if(!Rc(y,function(ir,Mn){if(!qa(On,Mn)&&(Gn===ir||X(Gn,ir,O,L,ne)))return On.push(Mn)})){wn=!1;break}}else if(Gn!==jt&&!X(Gn,jt,O,L,ne)){wn=!1;break}}return ne.delete(p),ne.delete(y),wn}function Sl(p){return tf(ef(p,f,nf),p+"")}function Kc(p){return od(p,Dt,fi)}function bd(p){return od(p,Mt,ts)}var _d=$c?function(p){return $c.get(p)}:ot;function mu(p){for(var y=p.name+"",O=du[y],L=fn.call(du,y)?O.length:0;L--;){var X=O[L],ne=X.func;if(ne==null||ne==p)return X.name}return y}function yu(p){return(fn.call(ue,"placeholder")?ue:p).placeholder}function er(){var p=ue.iteratee||mo;return p=p===mo?zl:p,arguments.length?p(arguments[0],arguments[1]):p}function Ys(p,y){var O,L,X=p.__data__;return((L=typeof(O=y))=="string"||L=="number"||L=="symbol"||L=="boolean"?O!=="__proto__":O===null)?X[typeof y=="string"?"string":"hash"]:X.map}function Zc(p){for(var y=Dt(p),O=y.length;O--;){var L=y[O],X=p[L];y[O]=[L,X,ns(X)]}return y}function il(p,y){var O=function(L,X){return L==null?f:L[X]}(p,y);return hu(O)?O:f}var fi=Zf?function(p){return p==null?[]:(p=N(p),Bi(Zf(p),function(y){return ri.call(p,y)}))}:Ve,ts=Zf?function(p){for(var y=[];p;)si(y,fi(p)),p=Ka(p);return y}:Ve,Ro=To;function gu(p,y,O){for(var L=-1,X=(y=zr(y,p)).length,ne=!1;++L<X;){var he=al(y[L]);if(!(ne=p!=null&&O(p,he)))break;p=p[he]}return ne||++L!=X?ne:!!(X=p==null?0:p.length)&&vf(X)&&Fi(he,X)&&(gr(p)||ss(p))}function na(p){return typeof p.constructor!="function"||kt(p)?{}:Hu(Ka(p))}function Jc(p){return gr(p)||ss(p)||!!(wl&&p&&p[wl])}function Fi(p,y){var O=typeof p;return!!(y=y??I)&&(O=="number"||O!="symbol"&&Tn.test(p))&&p>-1&&p%1==0&&p<y}function Wo(p,y,O){if(!Do(O))return!1;var L=typeof y;return!!(L=="number"?pa(O)&&Fi(y,O.length):L=="string"&&y in O)&&Ua(O[y],p)}function xl(p,y){if(gr(p))return!1;var O=typeof p;return!(O!="number"&&O!="symbol"&&O!="boolean"&&p!=null&&!vt(p))||Qn.test(p)||!le.test(p)||y!=null&&p in N(y)}function Al(p){var y=mu(p),O=ue[y];if(typeof O!="function"||!(y in Cr.prototype))return!1;if(p===O)return!0;var L=_d(O);return!!L&&p===L[0]}(Fs&&Ro(new Fs(new ArrayBuffer(1)))!=Be||$s&&Ro(new $s)!=q||Fc&&Ro(Fc.resolve())!=Pe||zu&&Ro(new zu)!=be||fu&&Ro(new fu)!=Ze)&&(Ro=function(p){var y=To(p),O=y==ie?p.constructor:f,L=O?_u(O):"";if(L)switch(L){case Jv:return Be;case Uc:return q;case Qv:return Pe;case em:return be;case _h:return Ze}return y});var wd=En?Aa:Je;function kt(p){var y=p&&p.constructor;return p===(typeof y=="function"&&y.prototype||zt)}function ns(p){return p==p&&!Do(p)}function Qc(p,y){return function(O){return O!=null&&O[p]===y&&(y!==f||p in N(O))}}function ef(p,y,O){return y=Uo(y===f?p.length-1:y,0),function(){for(var L=arguments,X=-1,ne=Uo(L.length-y,0),he=mn(ne);++X<ne;)he[X]=L[y+X];X=-1;for(var xe=mn(y+1);++X<y;)xe[X]=L[X];return xe[y]=O(he),lo(p,this,xe)}}function bu(p,y){return y.length<2?p:El(p,xa(y,0,-1))}function rs(p,y){for(var O=p.length,L=zi(y.length,O),X=gi(p);L--;){var ne=y[L];p[L]=Fi(ne,O)?X[ne]:f}return p}function Ed(p,y){if((y!=="constructor"||typeof p[y]!="function")&&y!="__proto__")return p[y]}var xp=Ap(zc),os=ip||function(p,y){return $o.setTimeout(p,y)},tf=Ap(nm);function Od(p,y,O){var L=y+"";return tf(p,function(X,ne){var he=ne.length;if(!he)return X;var xe=he-1;return ne[xe]=(he>1?"& ":"")+ne[xe],ne=ne.join(he>2?", ":" "),X.replace(Te,`{
/* [wrapped with `+ne+`] */
`)}(L,function(X,ne){return Ui(j,function(he){var xe="_."+he[0];ne&he[1]&&!Ji(X,xe)&&X.push(xe)}),X.sort()}(function(X){var ne=X.match(Qe);return ne?ne[1].split(je):[]}(L),O)))}function Ap(p){var y=0,O=0;return function(){var L=Qf(),X=16-(L-O);if(O=L,X>0){if(++y>=800)return arguments[0]}else y=0;return p.apply(f,arguments)}}function Tl(p,y){var O=-1,L=p.length,X=L-1;for(y=y===f?L:y;++O<y;){var ne=mp(O,X),he=p[ne];p[ne]=p[O],p[O]=he}return p.length=y,p}var Tp=function(p){var y=Kl(p,function(L){return O.size===500&&O.clear(),L}),O=y.cache;return y}(function(p){var y=[];return p.charCodeAt(0)===46&&y.push(""),p.replace(Pr,function(O,L,X,ne){y.push(X?ne.replace(Zt,"$1"):L||O)}),y});function al(p){if(typeof p=="string"||vt(p))return p;var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function _u(p){if(p!=null){try{return _r.call(p)}catch{}try{return p+""}catch{}}return""}function Sd(p){if(p instanceof Cr)return p.clone();var y=new Ia(p.__wrapped__,p.__chain__);return y.__actions__=gi(p.__actions__),y.__index__=p.__index__,y.__values__=p.__values__,y}var Dh=Ar(function(p,y){return ko(p)?tl(p,oi(y,1,ko,!0)):[]}),jh=Ar(function(p,y){var O=Eo(y);return ko(O)&&(O=f),ko(p)?tl(p,oi(y,1,ko,!0),er(O,2)):[]}),Ih=Ar(function(p,y){var O=Eo(y);return ko(O)&&(O=f),ko(p)?tl(p,oi(y,1,ko,!0),f,O):[]});function Mp(p,y,O){var L=p==null?0:p.length;if(!L)return-1;var X=O==null?0:ft(O);return X<0&&(X=Uo(L+X,0)),Vi(p,er(y,3),X)}function xd(p,y,O){var L=p==null?0:p.length;if(!L)return-1;var X=L-1;return O!==f&&(X=ft(O),X=O<0?Uo(L+X,0):zi(X,L-1)),Vi(p,er(y,3),X,!0)}function nf(p){return p!=null&&p.length?oi(p,1):[]}function Lh(p){return p&&p.length?p[0]:f}var ll=Ar(function(p){var y=Fr(p,dd);return y.length&&y[0]===p[0]?Wc(y):[]}),wu=Ar(function(p){var y=Eo(p),O=Fr(p,dd);return y===Eo(O)?y=f:O.pop(),O.length&&O[0]===p[0]?Wc(O,er(y,2)):[]}),im=Ar(function(p){var y=Eo(p),O=Fr(p,dd);return(y=typeof y=="function"?y:f)&&O.pop(),O.length&&O[0]===p[0]?Wc(O,f,y):[]});function Eo(p){var y=p==null?0:p.length;return y?p[y-1]:f}var rf=Ar(is);function is(p,y){return p&&p.length&&y&&y.length?ld(p,y):p}var of=Sl(function(p,y){var O=p==null?0:p.length,L=Bc(p,y);return vp(p,Fr(y,function(X){return Fi(X,O)?+X:X}).sort(Ws)),L});function Ks(p){return p==null?p:Zv.call(p)}var af=Ar(function(p){return vu(oi(p,1,ko,!0))}),lf=Ar(function(p){var y=Eo(p);return ko(y)&&(y=f),vu(oi(p,1,ko,!0),er(y,2))}),uf=Ar(function(p){var y=Eo(p);return y=typeof y=="function"?y:f,vu(oi(p,1,ko,!0),f,y)});function as(p){if(!p||!p.length)return[];var y=0;return p=Bi(p,function(O){if(ko(O))return y=Uo(O.length,y),!0}),Fl(y,function(O){return Fr(p,Wi(O))})}function ql(p,y){if(!p||!p.length)return[];var O=as(p);return y==null?O:Fr(O,function(L){return lo(y,f,L)})}var bi=Ar(function(p,y){return ko(p)?tl(p,y):[]}),Ad=Ar(function(p){return fd(Bi(p,ko))}),sf=Ar(function(p){var y=Eo(p);return ko(y)&&(y=f),fd(Bi(p,ko),er(y,2))}),ls=Ar(function(p){var y=Eo(p);return y=typeof y=="function"?y:f,fd(Bi(p,ko),f,y)}),Zs=Ar(as),Ti=Ar(function(p){var y=p.length,O=y>1?p[y-1]:f;return O=typeof O=="function"?(p.pop(),O):f,ql(p,O)});function Mo(p){var y=ue(p);return y.__chain__=!0,y}function cf(p,y){return y(p)}var Xi=Sl(function(p){var y=p.length,O=y?p[0]:0,L=this.__wrapped__,X=function(ne){return Bc(ne,p)};return!(y>1||this.__actions__.length)&&L instanceof Cr&&Fi(O)?((L=L.slice(O,+O+(y?1:0))).__actions__.push({func:cf,args:[X],thisArg:f}),new Ia(L,this.__chain__).thru(function(ne){return y&&!ne.length&&ne.push(f),ne})):this.thru(X)}),$n=Hl(function(p,y,O){fn.call(p,O)?++p[O]:el(p,O,1)}),Td=md(Mp),ff=md(xd);function Md(p,y){return(gr(p)?Ui:wo)(p,er(y,3))}function kp(p,y){return(gr(p)?qf:Oh)(p,er(y,3))}var Fh=Hl(function(p,y,O){fn.call(p,O)?p[O].push(y):el(p,O,[y])}),Eu=Ar(function(p,y,O){var L=-1,X=typeof y=="function",ne=pa(p)?mn(p.length):[];return wo(p,function(he){ne[++L]=X?lo(y,he,O):Hi(he,y,O)}),ne}),$h=Hl(function(p,y,O){el(p,O,y)});function us(p,y){return(gr(p)?Fr:Sa)(p,er(y,3))}var Uh=Hl(function(p,y,O){p[O?0:1].push(y)},function(){return[[],[]]}),Pp=Ar(function(p,y){if(p==null)return[];var O=y.length;return O>1&&Wo(p,y[0],y[1])?y=[]:O>2&&Wo(y[0],y[1],y[2])&&(y=[y[0]]),Ah(p,oi(y,1),[])}),df=gh||function(){return $o.Date.now()};function Bh(p,y,O){return y=O?f:y,y=p&&y==null?p.length:y,ol(p,S,f,f,f,f,y)}function $a(p,y){var O;if(typeof y!="function")throw new ge(g);return p=ft(p),function(){return--p>0&&(O=y.apply(this,arguments)),p<=1&&(y=f),O}}var Yl=Ar(function(p,y,O){var L=1;if(O.length){var X=ua(O,yu(Yl));L|=A}return ol(p,L,y,O,X)}),Ou=Ar(function(p,y,O){var L=3;if(O.length){var X=ua(O,yu(Ou));L|=A}return ol(y,L,p,O,X)});function Bn(p,y,O){var L,X,ne,he,xe,Fe,mt=0,wt=!1,Wt=!1,wn=!0;if(typeof p!="function")throw new ge(g);function On(He){var vr=L,Lr=X;return L=X=f,mt=He,he=p.apply(Lr,vr)}function Gn(He){return mt=He,xe=os(tn,y),wt?On(He):he}function jt(He){var vr=He-Fe;return Fe===f||vr>=y||vr<0||Wt&&He-mt>=ne}function tn(){var He=df();if(jt(He))return ir(He);xe=os(tn,function(vr){var Lr=y-(vr-Fe);return Wt?zi(Lr,ne-(vr-mt)):Lr}(He))}function ir(He){return xe=f,wn&&L?On(He):(L=X=f,he)}function Mn(){var He=df(),vr=jt(He);if(L=arguments,X=this,Fe=He,vr){if(xe===f)return Gn(Fe);if(Wt)return hd(xe),xe=os(tn,y),On(Fe)}return xe===f&&(xe=os(tn,y)),he}return y=Ut(y)||0,Do(O)&&(wt=!!O.leading,ne=(Wt="maxWait"in O)?Uo(Ut(O.maxWait)||0,y):ne,wn="trailing"in O?!!O.trailing:wn),Mn.cancel=function(){xe!==f&&hd(xe),mt=0,L=Fe=X=xe=f},Mn.flush=function(){return xe===f?he:ir(df())},Mn}var Np=Ar(function(p,y){return sp(p,1,y)}),Js=Ar(function(p,y,O){return sp(p,Ut(y)||0,O)});function Kl(p,y){if(typeof p!="function"||y!=null&&typeof y!="function")throw new ge(g);var O=function(){var L=arguments,X=y?y.apply(this,L):L[0],ne=O.cache;if(ne.has(X))return ne.get(X);var he=p.apply(this,L);return O.cache=ne.set(X,he)||ne,he};return O.cache=new(Kl.Cache||Qa),O}function pf(p){if(typeof p!="function")throw new ge(g);return function(){var y=arguments;switch(y.length){case 0:return!p.call(this);case 1:return!p.call(this,y[0]);case 2:return!p.call(this,y[0],y[1]);case 3:return!p.call(this,y[0],y[1],y[2])}return!p.apply(this,y)}}Kl.Cache=Qa;var qi=om(function(p,y){var O=(y=y.length==1&&gr(y[0])?Fr(y[0],po(er())):Fr(oi(y,1),po(er()))).length;return Ar(function(L){for(var X=-1,ne=zi(L.length,O);++X<ne;)L[X]=y[X].call(this,L[X]);return lo(p,this,L)})}),ul=Ar(function(p,y){var O=ua(y,yu(ul));return ol(p,A,f,y,O)}),Co=Ar(function(p,y){var O=ua(y,yu(Co));return ol(p,M,f,y,O)}),da=Sl(function(p,y){return ol(p,E,f,f,f,y)});function Ua(p,y){return p===y||p!=p&&y!=y}var am=Xs(No),hf=Xs(function(p,y){return p>=y}),ss=id(function(){return arguments}())?id:function(p){return Go(p)&&fn.call(p,"callee")&&!ri.call(p,"callee")},gr=mn.isArray,Vh=kc?po(kc):function(p){return Go(p)&&To(p)==yt};function pa(p){return p!=null&&vf(p.length)&&!Aa(p)}function ko(p){return Go(p)&&pa(p)}var ra=bh||Je,Rp=Xf?po(Xf):function(p){return Go(p)&&To(p)==H};function Mi(p){if(!Go(p))return!1;var y=To(p);return y==W||y=="[object DOMException]"||typeof p.message=="string"&&typeof p.name=="string"&&!V(p)}function Aa(p){if(!Do(p))return!1;var y=To(p);return y==z||y==Y||y=="[object AsyncFunction]"||y=="[object Proxy]"}function cs(p){return typeof p=="number"&&p==ft(p)}function vf(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=I}function Do(p){var y=typeof p;return p!=null&&(y=="object"||y=="function")}function Go(p){return p!=null&&typeof p=="object"}var kd=Pc?po(Pc):function(p){return Go(p)&&Ro(p)==q};function Cp(p){return typeof p=="number"||Go(p)&&To(p)==oe}function V(p){if(!Go(p)||To(p)!=ie)return!1;var y=Ka(p);if(y===null)return!0;var O=fn.call(y,"constructor")&&y.constructor;return typeof O=="function"&&O instanceof O&&_r.call(O)==ca}var se=$i?po($i):function(p){return Go(p)&&To(p)==we},Ee=ui?po(ui):function(p){return Go(p)&&Ro(p)==be};function nt(p){return typeof p=="string"||!gr(p)&&Go(p)&&To(p)==ye}function vt(p){return typeof p=="symbol"||Go(p)&&To(p)==Xe}var et=ga?po(ga):function(p){return Go(p)&&vf(p.length)&&!!qr[To(p)]},pt=Xs(Ol),Nt=Xs(function(p,y){return p<=y});function Lt(p){if(!p)return[];if(pa(p))return nt(p)?ea(p):gi(p);if(Za&&p[Za])return function(O){for(var L,X=[];!(L=O.next()).done;)X.push(L.value);return X}(p[Za]());var y=Ro(p);return(y==q?ni:y==be?wa:br)(p)}function Rt(p){return p?(p=Ut(p))===D||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}function ft(p){var y=Rt(p),O=y%1;return y==y?O?y-O:y:0}function Ht(p){return p?pu(ft(p),0,$):0}function Ut(p){if(typeof p=="number")return p;if(vt(p))return B;if(Do(p)){var y=typeof p.valueOf=="function"?p.valueOf():p;p=Do(y)?y+"":y}if(typeof p!="string")return p===0?p:+p;p=ja(p);var O=Si.test(p);return O||ti.test(p)?ya(p.slice(2),O?2:8):li.test(p)?B:+p}function Ct(p){return nl(p,Mt(p))}function Et(p){return p==null?"":fa(p)}var Ke=Zu(function(p,y){if(kt(y)||pa(y))nl(y,Dt(y),p);else for(var O in y)fn.call(y,O)&&Bo(p,O,y[O])}),st=Zu(function(p,y){nl(y,Mt(y),p)}),It=Zu(function(p,y,O,L){nl(y,Mt(y),p,L)}),Qt=Zu(function(p,y,O,L){nl(y,Dt(y),p,L)}),xt=Sl(Bc),on=Ar(function(p,y){p=N(p);var O=-1,L=y.length,X=L>2?y[2]:f;for(X&&Wo(y[0],y[1],X)&&(L=1);++O<L;)for(var ne=y[O],he=Mt(ne),xe=-1,Fe=he.length;++xe<Fe;){var mt=he[xe],wt=p[mt];(wt===f||Ua(wt,zt[mt])&&!fn.call(p,mt))&&(p[mt]=ne[mt])}return p}),Tt=Ar(function(p){return p.push(f,Op),lo(jn,f,p)});function Gt(p,y,O){var L=p==null?f:El(p,y);return L===f?O:L}function At(p,y){return p!=null&&gu(p,y,dp)}var Xt=Yc(function(p,y,O){y!=null&&typeof y.toString!="function"&&(y=Ir.call(y)),p[y]=O},Tr(Kn)),Pn=Yc(function(p,y,O){y!=null&&typeof y.toString!="function"&&(y=Ir.call(y)),fn.call(p,y)?p[y].push(O):p[y]=[O]},er),Vn=Ar(Hi);function Dt(p){return pa(p)?nd(p):Fa(p)}function Mt(p){return pa(p)?nd(p,!0):Sh(p)}var St=Zu(function(p,y,O){ad(p,y,O)}),jn=Zu(function(p,y,O,L){ad(p,y,O,L)}),tr=Sl(function(p,y){var O={};if(p==null)return O;var L=!1;y=Fr(y,function(ne){return ne=zr(ne,p),L||(L=ne.length>1),ne}),nl(p,bd(p),O),L&&(O=Oa(O,7,Sp));for(var X=y.length;X--;)sd(O,y[X]);return O}),dn=Sl(function(p,y){return p==null?{}:function(O,L){return Th(O,L,function(X,ne){return At(O,ne)})}(p,y)});function lr(p,y){if(p==null)return{};var O=Fr(bd(p),function(L){return[L]});return y=er(y),Th(p,O,function(L,X){return y(L,X[0])})}var Wn=wp(Dt),or=wp(Mt);function br(p){return p==null?[]:Uu(p,Dt(p))}var jo=Xl(function(p,y,O){return y=y.toLowerCase(),p+(O?Po(y):y)});function Po(p){return Jo(Et(p).toLowerCase())}function nr(p){return(p=Et(p))&&p.replace(Fn,Dc).replace(gl,"")}var Zo=Xl(function(p,y,O){return p+(O?"-":"")+y.toLowerCase()}),uo=Xl(function(p,y,O){return p+(O?" ":"")+y.toLowerCase()}),Io=vd("toLowerCase"),zo=Xl(function(p,y,O){return p+(O?"_":"")+y.toLowerCase()}),ii=Xl(function(p,y,O){return p+(O?" ":"")+Jo(y)}),di=Xl(function(p,y,O){return p+(O?" ":"")+y.toUpperCase()}),Jo=vd("toUpperCase");function vo(p,y,O){return p=Et(p),(y=O?f:y)===f?function(L){return Mc.test(L)}(p)?function(L){return L.match(Ns)||[]}(p):function(L){return L.match(ut)||[]}(p):p.match(y)||[]}var Yn=Ar(function(p,y){try{return lo(p,f,y)}catch(O){return Mi(O)?O:new Rr(O)}}),pi=Sl(function(p,y){return Ui(y,function(O){O=al(O),el(p,O,Yl(p[O],p))}),p});function Tr(p){return function(){return p}}var Dn=rl(),hr=rl(!0);function Kn(p){return p}function mo(p){return zl(typeof p=="function"?p:Oa(p,1))}var Ml=Ar(function(p,y){return function(O){return Hi(O,p,y)}}),Oo=Ar(function(p,y){return function(O){return Hi(p,O,y)}});function ve(p,y,O){var L=Dt(y),X=Vc(y,L);O!=null||Do(y)&&(X.length||!L.length)||(O=y,y=p,p=this,X=Vc(y,Dt(y)));var ne=!(Do(O)&&"chain"in O&&!O.chain),he=Aa(p);return Ui(X,function(xe){var Fe=y[xe];p[xe]=Fe,he&&(p.prototype[xe]=function(){var mt=this.__chain__;if(ne||mt){var wt=p(this.__wrapped__),Wt=wt.__actions__=gi(this.__actions__);return Wt.push({func:Fe,args:arguments,thisArg:p}),wt.__chain__=mt,wt}return Fe.apply(p,si([this.value()],arguments))})}),p}function ot(){}var tt=zs(Fr),sn=zs(Yf),dr=zs(Rc);function pe(p){return xl(p)?Wi(al(p)):function(y){return function(O){return El(O,y)}}(p)}var re=yd(),Re=yd(!0);function Ve(){return[]}function Je(){return!1}var De=Gs(function(p,y){return p+y},0),Ce=gd("ceil"),Le=Gs(function(p,y){return p/y},1),de=gd("floor"),Me,fe=Gs(function(p,y){return p*y},1),We=gd("round"),ze=Gs(function(p,y){return p-y},0);return ue.after=function(p,y){if(typeof y!="function")throw new ge(g);return p=ft(p),function(){if(--p<1)return y.apply(this,arguments)}},ue.ary=Bh,ue.assign=Ke,ue.assignIn=st,ue.assignInWith=It,ue.assignWith=Qt,ue.at=xt,ue.before=$a,ue.bind=Yl,ue.bindAll=pi,ue.bindKey=Ou,ue.castArray=function(){if(!arguments.length)return[];var p=arguments[0];return gr(p)?p:[p]},ue.chain=Mo,ue.chunk=function(p,y,O){y=(O?Wo(p,y,O):y===f)?1:Uo(ft(y),0);var L=p==null?0:p.length;if(!L||y<1)return[];for(var X=0,ne=0,he=mn(Ic(L/y));X<L;)he[ne++]=xa(p,X,X+=y);return he},ue.compact=function(p){for(var y=-1,O=p==null?0:p.length,L=0,X=[];++y<O;){var ne=p[y];ne&&(X[L++]=ne)}return X},ue.concat=function(){var p=arguments.length;if(!p)return[];for(var y=mn(p-1),O=arguments[0],L=p;L--;)y[L-1]=arguments[L];return si(gr(O)?gi(O):[O],oi(y,1))},ue.cond=function(p){var y=p==null?0:p.length,O=er();return p=y?Fr(p,function(L){if(typeof L[1]!="function")throw new ge(g);return[O(L[0]),L[1]]}):[],Ar(function(L){for(var X=-1;++X<y;){var ne=p[X];if(lo(ne[0],this,L))return lo(ne[1],this,L)}})},ue.conforms=function(p){return function(y){var O=Dt(y);return function(L){return up(L,y,O)}}(Oa(p,1))},ue.constant=Tr,ue.countBy=$n,ue.create=function(p,y){var O=Hu(p);return y==null?O:Gl(O,y)},ue.curry=function p(y,O,L){var X=ol(y,8,f,f,f,f,f,O=L?f:O);return X.placeholder=p.placeholder,X},ue.curryRight=function p(y,O,L){var X=ol(y,x,f,f,f,f,f,O=L?f:O);return X.placeholder=p.placeholder,X},ue.debounce=Bn,ue.defaults=on,ue.defaultsDeep=Tt,ue.defer=Np,ue.delay=Js,ue.difference=Dh,ue.differenceBy=jh,ue.differenceWith=Ih,ue.drop=function(p,y,O){var L=p==null?0:p.length;return L?xa(p,(y=O||y===f?1:ft(y))<0?0:y,L):[]},ue.dropRight=function(p,y,O){var L=p==null?0:p.length;return L?xa(p,0,(y=L-(y=O||y===f?1:ft(y)))<0?0:y):[]},ue.dropRightWhile=function(p,y){return p&&p.length?cd(p,er(y,3),!0,!0):[]},ue.dropWhile=function(p,y){return p&&p.length?cd(p,er(y,3),!0):[]},ue.fill=function(p,y,O,L){var X=p==null?0:p.length;return X?(O&&typeof O!="number"&&Wo(p,y,O)&&(O=0,L=X),function(ne,he,xe,Fe){var mt=ne.length;for((xe=ft(xe))<0&&(xe=-xe>mt?0:mt+xe),(Fe=Fe===f||Fe>mt?mt:ft(Fe))<0&&(Fe+=mt),Fe=xe>Fe?0:Ht(Fe);xe<Fe;)ne[xe++]=he;return ne}(p,y,O,L)):[]},ue.filter=function(p,y){return(gr(p)?Bi:Yr)(p,er(y,3))},ue.flatMap=function(p,y){return oi(us(p,y),1)},ue.flatMapDeep=function(p,y){return oi(us(p,y),D)},ue.flatMapDepth=function(p,y,O){return O=O===f?1:ft(O),oi(us(p,y),O)},ue.flatten=nf,ue.flattenDeep=function(p){return p!=null&&p.length?oi(p,D):[]},ue.flattenDepth=function(p,y){return p!=null&&p.length?oi(p,y=y===f?1:ft(y)):[]},ue.flip=function(p){return ol(p,512)},ue.flow=Dn,ue.flowRight=hr,ue.fromPairs=function(p){for(var y=-1,O=p==null?0:p.length,L={};++y<O;){var X=p[y];L[X[0]]=X[1]}return L},ue.functions=function(p){return p==null?[]:Vc(p,Dt(p))},ue.functionsIn=function(p){return p==null?[]:Vc(p,Mt(p))},ue.groupBy=Fh,ue.initial=function(p){return p!=null&&p.length?xa(p,0,-1):[]},ue.intersection=ll,ue.intersectionBy=wu,ue.intersectionWith=im,ue.invert=Xt,ue.invertBy=Pn,ue.invokeMap=Eu,ue.iteratee=mo,ue.keyBy=$h,ue.keys=Dt,ue.keysIn=Mt,ue.map=us,ue.mapKeys=function(p,y){var O={};return y=er(y,3),Cn(p,function(L,X,ne){el(O,y(L,X,ne),L)}),O},ue.mapValues=function(p,y){var O={};return y=er(y,3),Cn(p,function(L,X,ne){el(O,X,y(L,X,ne))}),O},ue.matches=function(p){return pp(Oa(p,1))},ue.matchesProperty=function(p,y){return hp(p,Oa(y,1))},ue.memoize=Kl,ue.merge=St,ue.mergeWith=jn,ue.method=Ml,ue.methodOf=Oo,ue.mixin=ve,ue.negate=pf,ue.nthArg=function(p){return p=ft(p),Ar(function(y){return xh(y,p)})},ue.omit=tr,ue.omitBy=function(p,y){return lr(p,pf(er(y)))},ue.once=function(p){return $a(2,p)},ue.orderBy=function(p,y,O,L){return p==null?[]:(gr(y)||(y=y==null?[]:[y]),gr(O=L?f:O)||(O=O==null?[]:[O]),Ah(p,y,O))},ue.over=tt,ue.overArgs=qi,ue.overEvery=sn,ue.overSome=dr,ue.partial=ul,ue.partialRight=Co,ue.partition=Uh,ue.pick=dn,ue.pickBy=lr,ue.property=pe,ue.propertyOf=function(p){return function(y){return p==null?f:El(p,y)}},ue.pull=rf,ue.pullAll=is,ue.pullAllBy=function(p,y,O){return p&&p.length&&y&&y.length?ld(p,y,er(O,2)):p},ue.pullAllWith=function(p,y,O){return p&&p.length&&y&&y.length?ld(p,y,f,O):p},ue.pullAt=of,ue.range=re,ue.rangeRight=Re,ue.rearg=da,ue.reject=function(p,y){return(gr(p)?Bi:Yr)(p,pf(er(y,3)))},ue.remove=function(p,y){var O=[];if(!p||!p.length)return O;var L=-1,X=[],ne=p.length;for(y=er(y,3);++L<ne;){var he=p[L];y(he,L,p)&&(O.push(he),X.push(L))}return vp(p,X),O},ue.rest=function(p,y){if(typeof p!="function")throw new ge(g);return Ar(p,y=y===f?y:ft(y))},ue.reverse=Ks,ue.sampleSize=function(p,y,O){return y=(O?Wo(p,y,O):y===f)?1:ft(y),(gr(p)?ap:yp)(p,y)},ue.set=function(p,y,O){return p==null?p:Xu(p,y,O)},ue.setWith=function(p,y,O,L){return L=typeof L=="function"?L:f,p==null?p:Xu(p,y,O,L)},ue.shuffle=function(p){return(gr(p)?Eh:Mh)(p)},ue.slice=function(p,y,O){var L=p==null?0:p.length;return L?(O&&typeof O!="number"&&Wo(p,y,O)?(y=0,O=L):(y=y==null?0:ft(y),O=O===f?L:ft(O)),xa(p,y,O)):[]},ue.sortBy=Pp,ue.sortedUniq=function(p){return p&&p.length?gp(p):[]},ue.sortedUniqBy=function(p,y){return p&&p.length?gp(p,er(y,2)):[]},ue.split=function(p,y,O){return O&&typeof O!="number"&&Wo(p,y,O)&&(y=O=f),(O=O===f?$:O>>>0)?(p=Et(p))&&(typeof y=="string"||y!=null&&!se(y))&&!(y=fa(y))&&Ya(p)?to(ea(p),0,O):p.split(y,O):[]},ue.spread=function(p,y){if(typeof p!="function")throw new ge(g);return y=y==null?0:Uo(ft(y),0),Ar(function(O){var L=O[y],X=to(O,0,y);return L&&si(X,L),lo(p,this,X)})},ue.tail=function(p){var y=p==null?0:p.length;return y?xa(p,1,y):[]},ue.take=function(p,y,O){return p&&p.length?xa(p,0,(y=O||y===f?1:ft(y))<0?0:y):[]},ue.takeRight=function(p,y,O){var L=p==null?0:p.length;return L?xa(p,(y=L-(y=O||y===f?1:ft(y)))<0?0:y,L):[]},ue.takeRightWhile=function(p,y){return p&&p.length?cd(p,er(y,3),!1,!0):[]},ue.takeWhile=function(p,y){return p&&p.length?cd(p,er(y,3)):[]},ue.tap=function(p,y){return y(p),p},ue.throttle=function(p,y,O){var L=!0,X=!0;if(typeof p!="function")throw new ge(g);return Do(O)&&(L="leading"in O?!!O.leading:L,X="trailing"in O?!!O.trailing:X),Bn(p,y,{leading:L,maxWait:y,trailing:X})},ue.thru=cf,ue.toArray=Lt,ue.toPairs=Wn,ue.toPairsIn=or,ue.toPath=function(p){return gr(p)?Fr(p,al):vt(p)?[p]:gi(Tp(Et(p)))},ue.toPlainObject=Ct,ue.transform=function(p,y,O){var L=gr(p),X=L||ra(p)||et(p);if(y=er(y,4),O==null){var ne=p&&p.constructor;O=X?L?new ne:[]:Do(p)&&Aa(ne)?Hu(Ka(p)):{}}return(X?Ui:Cn)(p,function(he,xe,Fe){return y(O,he,xe,Fe)}),O},ue.unary=function(p){return Bh(p,1)},ue.union=af,ue.unionBy=lf,ue.unionWith=uf,ue.uniq=function(p){return p&&p.length?vu(p):[]},ue.uniqBy=function(p,y){return p&&p.length?vu(p,er(y,2)):[]},ue.uniqWith=function(p,y){return y=typeof y=="function"?y:f,p&&p.length?vu(p,f,y):[]},ue.unset=function(p,y){return p==null||sd(p,y)},ue.unzip=as,ue.unzipWith=ql,ue.update=function(p,y,O){return p==null?p:qu(p,y,pd(O))},ue.updateWith=function(p,y,O,L){return L=typeof L=="function"?L:f,p==null?p:qu(p,y,pd(O),L)},ue.values=br,ue.valuesIn=function(p){return p==null?[]:Uu(p,Mt(p))},ue.without=bi,ue.words=vo,ue.wrap=function(p,y){return ul(pd(y),p)},ue.xor=Ad,ue.xorBy=sf,ue.xorWith=ls,ue.zip=Zs,ue.zipObject=function(p,y){return Xc(p||[],y||[],Bo)},ue.zipObjectDeep=function(p,y){return Xc(p||[],y||[],Xu)},ue.zipWith=Ti,ue.entries=Wn,ue.entriesIn=or,ue.extend=st,ue.extendWith=It,ve(ue,ue),ue.add=De,ue.attempt=Yn,ue.camelCase=jo,ue.capitalize=Po,ue.ceil=Ce,ue.clamp=function(p,y,O){return O===f&&(O=y,y=f),O!==f&&(O=(O=Ut(O))==O?O:0),y!==f&&(y=(y=Ut(y))==y?y:0),pu(Ut(p),y,O)},ue.clone=function(p){return Oa(p,4)},ue.cloneDeep=function(p){return Oa(p,5)},ue.cloneDeepWith=function(p,y){return Oa(p,5,y=typeof y=="function"?y:f)},ue.cloneWith=function(p,y){return Oa(p,4,y=typeof y=="function"?y:f)},ue.conformsTo=function(p,y){return y==null||up(p,y,Dt(y))},ue.deburr=nr,ue.defaultTo=function(p,y){return p==null||p!=p?y:p},ue.divide=Le,ue.endsWith=function(p,y,O){p=Et(p),y=fa(y);var L=p.length,X=O=O===f?L:pu(ft(O),0,L);return(O-=y.length)>=0&&p.slice(O,X)==y},ue.eq=Ua,ue.escape=function(p){return(p=Et(p))&&pn.test(p)?p.replace(Kt,Ko):p},ue.escapeRegExp=function(p){return(p=Et(p))&&ao.test(p)?p.replace(Xr,"\\$&"):p},ue.every=function(p,y,O){var L=gr(p)?Yf:cp;return O&&Wo(p,y,O)&&(y=f),L(p,er(y,3))},ue.find=Td,ue.findIndex=Mp,ue.findKey=function(p,y){return Xa(p,er(y,3),Cn)},ue.findLast=ff,ue.findLastIndex=xd,ue.findLastKey=function(p,y){return Xa(p,er(y,3),fo)},ue.floor=de,ue.forEach=Md,ue.forEachRight=kp,ue.forIn=function(p,y){return p==null?p:xr(p,er(y,3),Mt)},ue.forInRight=function(p,y){return p==null?p:co(p,er(y,3),Mt)},ue.forOwn=function(p,y){return p&&Cn(p,er(y,3))},ue.forOwnRight=function(p,y){return p&&fo(p,er(y,3))},ue.get=Gt,ue.gt=am,ue.gte=hf,ue.has=function(p,y){return p!=null&&gu(p,y,fp)},ue.hasIn=At,ue.head=Lh,ue.identity=Kn,ue.includes=function(p,y,O,L){p=pa(p)?p:br(p),O=O&&!L?ft(O):0;var X=p.length;return O<0&&(O=Uo(X+O,0)),nt(p)?O<=X&&p.indexOf(y,O)>-1:!!X&&lu(p,y,O)>-1},ue.indexOf=function(p,y,O){var L=p==null?0:p.length;if(!L)return-1;var X=O==null?0:ft(O);return X<0&&(X=Uo(L+X,0)),lu(p,y,X)},ue.inRange=function(p,y,O){return y=Rt(y),O===f?(O=y,y=0):O=Rt(O),function(L,X,ne){return L>=zi(X,ne)&&L<Uo(X,ne)}(p=Ut(p),y,O)},ue.invoke=Vn,ue.isArguments=ss,ue.isArray=gr,ue.isArrayBuffer=Vh,ue.isArrayLike=pa,ue.isArrayLikeObject=ko,ue.isBoolean=function(p){return p===!0||p===!1||Go(p)&&To(p)==Q},ue.isBuffer=ra,ue.isDate=Rp,ue.isElement=function(p){return Go(p)&&p.nodeType===1&&!V(p)},ue.isEmpty=function(p){if(p==null)return!0;if(pa(p)&&(gr(p)||typeof p=="string"||typeof p.splice=="function"||ra(p)||et(p)||ss(p)))return!p.length;var y=Ro(p);if(y==q||y==be)return!p.size;if(kt(p))return!Fa(p).length;for(var O in p)if(fn.call(p,O))return!1;return!0},ue.isEqual=function(p,y){return Vs(p,y)},ue.isEqualWith=function(p,y,O){var L=(O=typeof O=="function"?O:f)?O(p,y):f;return L===f?Vs(p,y,f,O):!!L},ue.isError=Mi,ue.isFinite=function(p){return typeof p=="number"&&Gu(p)},ue.isFunction=Aa,ue.isInteger=cs,ue.isLength=vf,ue.isMap=kd,ue.isMatch=function(p,y){return p===y||La(p,y,Zc(y))},ue.isMatchWith=function(p,y,O){return O=typeof O=="function"?O:f,La(p,y,Zc(y),O)},ue.isNaN=function(p){return Cp(p)&&p!=+p},ue.isNative=function(p){if(wd(p))throw new Rr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return hu(p)},ue.isNil=function(p){return p==null},ue.isNull=function(p){return p===null},ue.isNumber=Cp,ue.isObject=Do,ue.isObjectLike=Go,ue.isPlainObject=V,ue.isRegExp=se,ue.isSafeInteger=function(p){return cs(p)&&p>=-9007199254740991&&p<=I},ue.isSet=Ee,ue.isString=nt,ue.isSymbol=vt,ue.isTypedArray=et,ue.isUndefined=function(p){return p===f},ue.isWeakMap=function(p){return Go(p)&&Ro(p)==Ze},ue.isWeakSet=function(p){return Go(p)&&To(p)=="[object WeakSet]"},ue.join=function(p,y){return p==null?"":Lc.call(p,y)},ue.kebabCase=Zo,ue.last=Eo,ue.lastIndexOf=function(p,y,O){var L=p==null?0:p.length;if(!L)return-1;var X=L;return O!==f&&(X=(X=ft(O))<0?Uo(L+X,0):zi(X,L-1)),y==y?function(ne,he,xe){for(var Fe=xe+1;Fe--;)if(ne[Fe]===he)return Fe;return Fe}(p,y,X):Vi(p,ba,X,!0)},ue.lowerCase=uo,ue.lowerFirst=Io,ue.lt=pt,ue.lte=Nt,ue.max=function(p){return p&&p.length?Vo(p,Kn,No):f},ue.maxBy=function(p,y){return p&&p.length?Vo(p,er(y,2),No):f},ue.mean=function(p){return Nr(p,Kn)},ue.meanBy=function(p,y){return Nr(p,er(y,2))},ue.min=function(p){return p&&p.length?Vo(p,Kn,Ol):f},ue.minBy=function(p,y){return p&&p.length?Vo(p,er(y,2),Ol):f},ue.stubArray=Ve,ue.stubFalse=Je,ue.stubObject=function(){return{}},ue.stubString=function(){return""},ue.stubTrue=function(){return!0},ue.multiply=fe,ue.nth=function(p,y){return p&&p.length?xh(p,ft(y)):f},ue.noConflict=function(){return $o._===this&&($o._=Ao),this},ue.noop=ot,ue.now=df,ue.pad=function(p,y,O){p=Et(p);var L=(y=ft(y))?Gi(p):0;if(!y||L>=y)return p;var X=(y-L)/2;return Hs(Wu(X),O)+p+Hs(Ic(X),O)},ue.padEnd=function(p,y,O){p=Et(p);var L=(y=ft(y))?Gi(p):0;return y&&L<y?p+Hs(y-L,O):p},ue.padStart=function(p,y,O){p=Et(p);var L=(y=ft(y))?Gi(p):0;return y&&L<y?Hs(y-L,O)+p:p},ue.parseInt=function(p,y,O){return O||y==null?y=0:y&&(y=+y),ed(Et(p).replace(Un,""),y||0)},ue.random=function(p,y,O){if(O&&typeof O!="boolean"&&Wo(p,y,O)&&(y=O=f),O===f&&(typeof y=="boolean"?(O=y,y=f):typeof p=="boolean"&&(O=p,p=f)),p===f&&y===f?(p=0,y=1):(p=Rt(p),y===f?(y=p,p=0):y=Rt(y)),p>y){var L=p;p=y,y=L}if(O||p%1||y%1){var X=Ls();return zi(p+X*(y-p+iu("1e-"+((X+"").length-1))),y)}return mp(p,y)},ue.reduce=function(p,y,O){var L=gr(p)?Ds:yi,X=arguments.length<3;return L(p,er(y,4),O,X,wo)},ue.reduceRight=function(p,y,O){var L=gr(p)?Kf:yi,X=arguments.length<3;return L(p,er(y,4),O,X,Oh)},ue.repeat=function(p,y,O){return y=(O?Wo(p,y,O):y===f)?1:ft(y),Gc(Et(p),y)},ue.replace=function(){var p=arguments,y=Et(p[0]);return p.length<3?y:y.replace(p[1],p[2])},ue.result=function(p,y,O){var L=-1,X=(y=zr(y,p)).length;for(X||(X=1,p=f);++L<X;){var ne=p==null?f:p[al(y[L])];ne===f&&(L=X,ne=O),p=Aa(ne)?ne.call(p):ne}return p},ue.round=We,ue.runInContext=dt,ue.sample=function(p){return(gr(p)?rd:tm)(p)},ue.size=function(p){if(p==null)return 0;if(pa(p))return nt(p)?Gi(p):p.length;var y=Ro(p);return y==q||y==be?p.size:Fa(p).length},ue.snakeCase=zo,ue.some=function(p,y,O){var L=gr(p)?Rc:rm;return O&&Wo(p,y,O)&&(y=f),L(p,er(y,3))},ue.sortedIndex=function(p,y){return Hc(p,y)},ue.sortedIndexBy=function(p,y,O){return ud(p,y,er(O,2))},ue.sortedIndexOf=function(p,y){var O=p==null?0:p.length;if(O){var L=Hc(p,y);if(L<O&&Ua(p[L],y))return L}return-1},ue.sortedLastIndex=function(p,y){return Hc(p,y,!0)},ue.sortedLastIndexBy=function(p,y,O){return ud(p,y,er(O,2),!0)},ue.sortedLastIndexOf=function(p,y){if(p!=null&&p.length){var O=Hc(p,y,!0)-1;if(Ua(p[O],y))return O}return-1},ue.startCase=ii,ue.startsWith=function(p,y,O){return p=Et(p),O=O==null?0:pu(ft(O),0,p.length),y=fa(y),p.slice(O,O+y.length)==y},ue.subtract=ze,ue.sum=function(p){return p&&p.length?uu(p,Kn):0},ue.sumBy=function(p,y){return p&&p.length?uu(p,er(y,2)):0},ue.template=function(p,y,O){var L=ue.templateSettings;O&&Wo(p,y,O)&&(y=f),p=Et(p),y=It({},y,L,Ep);var X,ne,he=It({},y.imports,L.imports,Ep),xe=Dt(he),Fe=Uu(he,xe),mt=0,wt=y.interpolate||Hn,Wt="__p += '",wn=G((y.escape||Hn).source+"|"+wt.source+"|"+(wt===Jn?Rn:Hn).source+"|"+(y.evaluate||Hn).source+"|$","g"),On="//# sourceURL="+(fn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gf+"]")+`
`;p.replace(wn,function(tn,ir,Mn,He,vr,Lr){return Mn||(Mn=He),Wt+=p.slice(mt,Lr).replace(ar,Bu),ir&&(X=!0,Wt+=`' +
__e(`+ir+`) +
'`),vr&&(ne=!0,Wt+=`';
`+vr+`;
__p += '`),Mn&&(Wt+=`' +
((__t = (`+Mn+`)) == null ? '' : __t) +
'`),mt=Lr+tn.length,tn}),Wt+=`';
`;var Gn=fn.call(y,"variable")&&y.variable;if(Gn){if(rn.test(Gn))throw new Rr("Invalid `variable` option passed into `_.template`")}else Wt=`with (obj) {
`+Wt+`
}
`;Wt=(ne?Wt.replace(ht,""):Wt).replace(Vt,"$1").replace(Jt,"$1;"),Wt="function("+(Gn||"obj")+`) {
`+(Gn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Wt+`return __p
}`;var jt=Yn(function(){return ho(xe,On+"return "+Wt).apply(f,Fe)});if(jt.source=Wt,Mi(jt))throw jt;return jt},ue.times=function(p,y){if((p=ft(p))<1||p>I)return[];var O=$,L=zi(p,$);y=er(y),p-=$;for(var X=Fl(L,y);++O<p;)y(O);return X},ue.toFinite=Rt,ue.toInteger=ft,ue.toLength=Ht,ue.toLower=function(p){return Et(p).toLowerCase()},ue.toNumber=Ut,ue.toSafeInteger=function(p){return p?pu(ft(p),-9007199254740991,I):p===0?p:0},ue.toString=Et,ue.toUpper=function(p){return Et(p).toUpperCase()},ue.trim=function(p,y,O){if((p=Et(p))&&(O||y===f))return ja(p);if(!p||!(y=fa(y)))return p;var L=ea(p),X=ea(y);return to(L,_a(L,X),Cc(L,X)+1).join("")},ue.trimEnd=function(p,y,O){if((p=Et(p))&&(O||y===f))return p.slice(0,ci(p)+1);if(!p||!(y=fa(y)))return p;var L=ea(p);return to(L,0,Cc(L,ea(y))+1).join("")},ue.trimStart=function(p,y,O){if((p=Et(p))&&(O||y===f))return p.replace(Un,"");if(!p||!(y=fa(y)))return p;var L=ea(p);return to(L,_a(L,ea(y))).join("")},ue.truncate=function(p,y){var O=30,L="...";if(Do(y)){var X="separator"in y?y.separator:X;O="length"in y?ft(y.length):O,L="omission"in y?fa(y.omission):L}var ne=(p=Et(p)).length;if(Ya(p)){var he=ea(p);ne=he.length}if(O>=ne)return p;var xe=O-Gi(L);if(xe<1)return L;var Fe=he?to(he,0,xe).join(""):p.slice(0,xe);if(X===f)return Fe+L;if(he&&(xe+=Fe.length-xe),se(X)){if(p.slice(xe).search(X)){var mt,wt=Fe;for(X.global||(X=G(X.source,Et(Er.exec(X))+"g")),X.lastIndex=0;mt=X.exec(wt);)var Wt=mt.index;Fe=Fe.slice(0,Wt===f?xe:Wt)}}else if(p.indexOf(fa(X),xe)!=xe){var wn=Fe.lastIndexOf(X);wn>-1&&(Fe=Fe.slice(0,wn))}return Fe+L},ue.unescape=function(p){return(p=Et(p))&&rt.test(p)?p.replace(an,sa):p},ue.uniqueId=function(p){var y=++Gr;return Et(p)+y},ue.upperCase=di,ue.upperFirst=Jo,ue.each=Md,ue.eachRight=kp,ue.first=Lh,ve(ue,(Me={},Cn(ue,function(p,y){fn.call(ue.prototype,y)||(Me[y]=p)}),Me),{chain:!1}),ue.VERSION="4.17.21",Ui(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){ue[p].placeholder=ue}),Ui(["drop","take"],function(p,y){Cr.prototype[p]=function(O){O=O===f?1:Uo(ft(O),0);var L=this.__filtered__&&!y?new Cr(this):this.clone();return L.__filtered__?L.__takeCount__=zi(O,L.__takeCount__):L.__views__.push({size:zi(O,$),type:p+(L.__dir__<0?"Right":"")}),L},Cr.prototype[p+"Right"]=function(O){return this.reverse()[p](O).reverse()}}),Ui(["filter","map","takeWhile"],function(p,y){var O=y+1,L=O==1||O==3;Cr.prototype[p]=function(X){var ne=this.clone();return ne.__iteratees__.push({iteratee:er(X,3),type:O}),ne.__filtered__=ne.__filtered__||L,ne}}),Ui(["head","last"],function(p,y){var O="take"+(y?"Right":"");Cr.prototype[p]=function(){return this[O](1).value()[0]}}),Ui(["initial","tail"],function(p,y){var O="drop"+(y?"":"Right");Cr.prototype[p]=function(){return this.__filtered__?new Cr(this):this[O](1)}}),Cr.prototype.compact=function(){return this.filter(Kn)},Cr.prototype.find=function(p){return this.filter(p).head()},Cr.prototype.findLast=function(p){return this.reverse().find(p)},Cr.prototype.invokeMap=Ar(function(p,y){return typeof p=="function"?new Cr(this):this.map(function(O){return Hi(O,p,y)})}),Cr.prototype.reject=function(p){return this.filter(pf(er(p)))},Cr.prototype.slice=function(p,y){p=ft(p);var O=this;return O.__filtered__&&(p>0||y<0)?new Cr(O):(p<0?O=O.takeRight(-p):p&&(O=O.drop(p)),y!==f&&(O=(y=ft(y))<0?O.dropRight(-y):O.take(y-p)),O)},Cr.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Cr.prototype.toArray=function(){return this.take($)},Cn(Cr.prototype,function(p,y){var O=/^(?:filter|find|map|reject)|While$/.test(y),L=/^(?:head|last)$/.test(y),X=ue[L?"take"+(y=="last"?"Right":""):y],ne=L||/^find/.test(y);X&&(ue.prototype[y]=function(){var he=this.__wrapped__,xe=L?[1]:arguments,Fe=he instanceof Cr,mt=xe[0],wt=Fe||gr(he),Wt=function(ir){var Mn=X.apply(ue,si([ir],xe));return L&&wn?Mn[0]:Mn};wt&&O&&typeof mt=="function"&&mt.length!=1&&(Fe=wt=!1);var wn=this.__chain__,On=!!this.__actions__.length,Gn=ne&&!wn,jt=Fe&&!On;if(!ne&&wt){he=jt?he:new Cr(this);var tn=p.apply(he,xe);return tn.__actions__.push({func:cf,args:[Wt],thisArg:f}),new Ia(tn,wn)}return Gn&&jt?p.apply(this,xe):(tn=this.thru(Wt),Gn?L?tn.value()[0]:tn.value():tn)})}),Ui(["pop","push","shift","sort","splice","unshift"],function(p){var y=Ye[p],O=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",L=/^(?:pop|shift)$/.test(p);ue.prototype[p]=function(){var X=arguments;if(L&&!this.__chain__){var ne=this.value();return y.apply(gr(ne)?ne:[],X)}return this[O](function(he){return y.apply(gr(he)?he:[],X)})}}),Cn(Cr.prototype,function(p,y){var O=ue[y];if(O){var L=O.name+"";fn.call(du,L)||(du[L]=[]),du[L].push({name:y,func:O})}}),du[qc(f,2).name]=[{name:"wrapper",func:f}],Cr.prototype.clone=function(){var p=new Cr(this.__wrapped__);return p.__actions__=gi(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=gi(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=gi(this.__views__),p},Cr.prototype.reverse=function(){if(this.__filtered__){var p=new Cr(this);p.__dir__=-1,p.__filtered__=!0}else(p=this.clone()).__dir__*=-1;return p},Cr.prototype.value=function(){var p=this.__wrapped__.value(),y=this.__dir__,O=gr(p),L=y<0,X=O?p.length:0,ne=function(Lr,Xn,ur){for(var ki=-1,Ba=ur.length;++ki<Ba;){var Zl=ur[ki],Pi=Zl.size;switch(Zl.type){case"drop":Lr+=Pi;break;case"dropRight":Xn-=Pi;break;case"take":Xn=zi(Xn,Lr+Pi);break;case"takeRight":Lr=Uo(Lr,Xn-Pi)}}return{start:Lr,end:Xn}}(0,X,this.__views__),he=ne.start,xe=ne.end,Fe=xe-he,mt=L?xe:he-1,wt=this.__iteratees__,Wt=wt.length,wn=0,On=zi(Fe,this.__takeCount__);if(!O||!L&&X==Fe&&On==Fe)return bp(p,this.__actions__);var Gn=[];e:for(;Fe--&&wn<On;){for(var jt=-1,tn=p[mt+=y];++jt<Wt;){var ir=wt[jt],Mn=ir.iteratee,He=ir.type,vr=Mn(tn);if(He==2)tn=vr;else if(!vr){if(He==1)continue e;break e}}Gn[wn++]=tn}return Gn},ue.prototype.at=Xi,ue.prototype.chain=function(){return Mo(this)},ue.prototype.commit=function(){return new Ia(this.value(),this.__chain__)},ue.prototype.next=function(){this.__values__===f&&(this.__values__=Lt(this.value()));var p=this.__index__>=this.__values__.length;return{done:p,value:p?f:this.__values__[this.__index__++]}},ue.prototype.plant=function(p){for(var y,O=this;O instanceof Bl;){var L=Sd(O);L.__index__=0,L.__values__=f,y?X.__wrapped__=L:y=L;var X=L;O=O.__wrapped__}return X.__wrapped__=p,y},ue.prototype.reverse=function(){var p=this.__wrapped__;if(p instanceof Cr){var y=p;return this.__actions__.length&&(y=new Cr(this)),(y=y.reverse()).__actions__.push({func:cf,args:[Ks],thisArg:f}),new Ia(y,this.__chain__)}return this.thru(Ks)},ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=function(){return bp(this.__wrapped__,this.__actions__)},ue.prototype.first=ue.prototype.head,Za&&(ue.prototype[Za]=function(){return this}),ue}();$o._=Ii,(v=(function(){return Ii}).call(a,r,a,c))===f||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var u=r(7),c=r(34),v=r(33),f=r(87),g=r(62),b=r(174),_=r(28),x=u.TypeError,A=_("toPrimitive");n.exports=function(M,S){if(!v(M)||f(M))return M;var E,D=g(M,A);if(D){if(S===void 0&&(S="default"),E=c(D,M,S),!v(E)||f(E))return E;throw x("Can't convert object to primitive value")}return S===void 0&&(S="number"),b(M,S)}},function(n,a,r){var u=r(108);n.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var u=r(36),c=r(18),v=r(91);n.exports=!u&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var u=r(35),c=r(135),v=r(50),f=r(38);n.exports=function(g,b){for(var _=c(b),x=f.f,A=v.f,M=0;M<_.length;M++){var S=_[M];u(g,S)||x(g,S,A(b,S))}}},function(n,a,r){var u=r(46),c=r(15),v=r(74),f=r(112),g=r(32),b=c([].concat);n.exports=u("Reflect","ownKeys")||function(_){var x=v.f(g(_)),A=f.f;return A?b(x,A(_)):x}},function(n,a,r){var u=r(15),c=r(35),v=r(41),f=r(137).indexOf,g=r(72),b=u([].push);n.exports=function(_,x){var A,M=v(_),S=0,E=[];for(A in M)!c(g,A)&&c(M,A)&&b(E,A);for(;x.length>S;)c(M,A=x[S++])&&(~f(E,A)||b(E,A));return E}},function(n,a,r){var u=r(41),c=r(75),v=r(45),f=function(g){return function(b,_,x){var A,M=u(b),S=v(M),E=c(x,S);if(g&&_!=_){for(;S>E;)if((A=M[E++])!=A)return!0}else for(;S>E;E++)if((g||E in M)&&M[E]===_)return g||E||0;return!g&&-1}};n.exports={includes:f(!0),indexOf:f(!1)}},function(n,a,r){var u=r(46);n.exports=u("document","documentElement")},function(n,a,r){var u=r(51),c=r(41),v=r(74).f,f=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&u(b)=="Window"?function(_){try{return v(_)}catch{return f(g)}}(b):v(c(b))}},function(n,a,r){var u=r(28);a.f=u},function(n,a,r){var u=r(177),c=r(35),v=r(140),f=r(38).f;n.exports=function(g){var b=u.Symbol||(u.Symbol={});c(b,g)||f(b,g,{value:v.f(g)})}},function(n,a,r){var u,c,v,f=r(18),g=r(30),b=r(60),_=r(101),x=r(42),A=r(28),M=r(71),S=A("iterator"),E=!1;[].keys&&("next"in(v=[].keys())?(c=_(_(v)))!==Object.prototype&&(u=c):E=!0),u==null||f(function(){var D={};return u[S].call(D)!==D})?u={}:M&&(u=b(u)),g(u[S])||x(u,S,function(){return this}),n.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:E}},function(n,a,r){var u=r(18);n.exports=!u(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var u=r(16),c=r(15),v=r(72),f=r(33),g=r(35),b=r(38).f,_=r(74),x=r(139),A=r(183),M=r(90),S=r(185),E=!1,D=M("meta"),I=0,B=function(j){b(j,D,{value:{objectID:"O"+I++,weakData:{}}})},$=n.exports={enable:function(){$.enable=function(){},E=!0;var j=_.f,U=c([].splice),K={};K[D]=1,j(K).length&&(_.f=function(Q){for(var H=j(Q),W=0,z=H.length;W<z;W++)if(H[W]===D){U(H,W,1);break}return H},u({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(j,U){if(!f(j))return typeof j=="symbol"?j:(typeof j=="string"?"S":"P")+j;if(!g(j,D)){if(!A(j))return"F";if(!U)return"E";B(j)}return j[D].objectID},getWeakData:function(j,U){if(!g(j,D)){if(!A(j))return!0;if(!U)return!1;B(j)}return j[D].weakData},onFreeze:function(j){return S&&E&&A(j)&&!g(j,D)&&B(j),j}};v[D]=!0},function(n,a,r){var u=r(28),c=r(80),v=u("iterator"),f=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||f[v]===g)}},function(n,a,r){var u=r(7),c=r(34),v=r(56),f=r(32),g=r(88),b=r(118),_=u.TypeError;n.exports=function(x,A){var M=arguments.length<2?b(x):A;if(v(M))return f(c(M,x));throw _(g(x)+" is not iterable")}},function(n,a,r){var u=r(34),c=r(32),v=r(62);n.exports=function(f,g,b){var _,x;c(f);try{if(!(_=v(f,"return"))){if(g==="throw")throw b;return b}_=u(_,f)}catch(A){x=!0,_=A}if(g==="throw")throw b;if(x)throw _;return c(_),b}},function(n,a,r){var u=r(30),c=r(33),v=r(102);n.exports=function(f,g,b){var _,x;return v&&u(_=g.constructor)&&_!==b&&c(x=_.prototype)&&x!==b.prototype&&v(f,x),f}},function(n,a,r){var u=r(42);n.exports=function(c,v,f){for(var g in v)u(c,g,v[g],f);return c}},function(n,a,r){var u=r(46),c=r(38),v=r(28),f=r(36),g=v("species");n.exports=function(b){var _=u(b),x=c.f;f&&_&&!_[g]&&x(_,g,{configurable:!0,get:function(){return this}})}},function(n,a,r){var u=r(15),c=r(59),v=r(39),f=r(44),g=u("".charAt),b=u("".charCodeAt),_=u("".slice),x=function(A){return function(M,S){var E,D,I=v(f(M)),B=c(S),$=I.length;return B<0||B>=$?A?"":void 0:(E=b(I,B))<55296||E>56319||B+1===$||(D=b(I,B+1))<56320||D>57343?A?g(I,B):E:A?_(I,B,B+2):D-56320+(E-55296<<10)+65536}};n.exports={codeAt:x(!1),charAt:x(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var u=r(91)("span").classList,c=u&&u.constructor&&u.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var u=r(32);n.exports=function(){var c=u(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,a,r){var u=r(18),c=r(7).RegExp,v=u(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),f=v||u(function(){return!c("a","y").sticky}),g=v||u(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:f,UNSUPPORTED_Y:v}},function(n,a,r){var u=r(16),c=r(79).find,v=r(100),f="find",g=!0;f in[]&&Array(1).find(function(){g=!1}),u({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),v(f)},function(n,a,r){var u=r(16),c=r(137).includes,v=r(100);u({target:"Array",proto:!0},{includes:function(f){return c(this,f,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,a,r){var u=r(16),c=r(15),v=r(197),f=r(44),g=r(39),b=r(198),_=c("".indexOf);u({target:"String",proto:!0,forced:!b("includes")},{includes:function(x){return!!~_(g(f(this)),g(v(x)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(33),c=r(51),v=r(28)("match");n.exports=function(f){var g;return u(f)&&((g=f[v])!==void 0?!!g:c(f)=="RegExp")}},function(n,a,r){var u=r(15);n.exports=u(1 .valueOf)},function(n,a,r){var u=r(15),c=r(44),v=r(39),f=r(162),g=u("".replace),b="["+f+"]",_=RegExp("^"+b+b+"*"),x=RegExp(b+b+"*$"),A=function(M){return function(S){var E=v(c(S));return 1&M&&(E=g(E,_,"")),2&M&&(E=g(E,x,"")),E}};n.exports={start:A(1),end:A(2),trim:A(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,u,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function g(I){if(r===setTimeout)return setTimeout(I,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(I,0);try{return r(I,0)}catch{try{return r.call(null,I,0)}catch{return r.call(this,I,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{u=typeof clearTimeout=="function"?clearTimeout:f}catch{u=f}})();var b,_=[],x=!1,A=-1;function M(){x&&b&&(x=!1,b.length?_=b.concat(_):A=-1,_.length&&S())}function S(){if(!x){var I=g(M);x=!0;for(var B=_.length;B;){for(b=_,_=[];++A<B;)b&&b[A].run();A=-1,B=_.length}b=null,x=!1,function($){if(u===clearTimeout)return clearTimeout($);if((u===f||!u)&&clearTimeout)return u=clearTimeout,clearTimeout($);try{u($)}catch{try{return u.call(null,$)}catch{return u.call(this,$)}}}(I)}}function E(I,B){this.fun=I,this.array=B}function D(){}c.nextTick=function(I){var B=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)B[$-1]=arguments[$];_.push(new E(I,B)),_.length!==1||x||g(S)},E.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=D,c.addListener=D,c.once=D,c.off=D,c.removeListener=D,c.removeAllListeners=D,c.emit=D,c.prependListener=D,c.prependOnceListener=D,c.listeners=function(I){return[]},c.binding=function(I){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(I){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var u=r(32),c=r(165),v=r(28)("species");n.exports=function(f,g){var b,_=u(f).constructor;return _===void 0||(b=u(_)[v])==null?g:c(b)}},function(n,a,r){var u=r(7),c=r(99),v=r(88),f=u.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not a constructor")}},function(n,a,r){var u=r(16),c=r(161).trim;u({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var u=r(34),c=r(123),v=r(32),f=r(94),g=r(39),b=r(44),_=r(62),x=r(124),A=r(125);c("match",function(M,S,E){return[function(D){var I=b(this),B=D==null?void 0:_(D,M);return B?u(B,D,I):new RegExp(D)[M](g(I))},function(D){var I=v(this),B=g(D),$=E(S,I,B);if($.done)return $.value;if(!I.global)return A(I,B);var j=I.unicode;I.lastIndex=0;for(var U,K=[],Q=0;(U=A(I,B))!==null;){var H=g(U[0]);K[Q]=H,H===""&&(I.lastIndex=x(B,f(I.lastIndex),j)),Q++}return Q===0?null:K}]})},function(n,a,r){var u,c,v,f,g=r(7),b=r(76),_=r(64),x=r(30),A=r(35),M=r(18),S=r(138),E=r(98),D=r(91),I=r(169),B=r(128),$=g.setImmediate,j=g.clearImmediate,U=g.process,K=g.Dispatch,Q=g.Function,H=g.MessageChannel,W=g.String,z=0,Y={},q="onreadystatechange";try{u=g.location}catch{}var oe=function(be){if(A(Y,be)){var ye=Y[be];delete Y[be],ye()}},ie=function(be){return function(){oe(be)}},Pe=function(be){oe(be.data)},we=function(be){g.postMessage(W(be),u.protocol+"//"+u.host)};$&&j||($=function(be){var ye=E(arguments,1);return Y[++z]=function(){b(x(be)?be:Q(be),void 0,ye)},c(z),z},j=function(be){delete Y[be]},B?c=function(be){U.nextTick(ie(be))}:K&&K.now?c=function(be){K.now(ie(be))}:H&&!I?(f=(v=new H).port2,v.port1.onmessage=Pe,c=_(f.postMessage,f)):g.addEventListener&&x(g.postMessage)&&!g.importScripts&&u&&u.protocol!=="file:"&&!M(we)?(c=we,g.addEventListener("message",Pe,!1)):c=q in D("script")?function(be){S.appendChild(D("script")).onreadystatechange=function(){S.removeChild(this),oe(be)}}:function(be){setTimeout(ie(be),0)}),n.exports={set:$,clear:j}},function(n,a,r){var u=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(u)},function(n,a,r){var u=r(56),c=function(v){var f,g;this.promise=new v(function(b,_){if(f!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");f=b,g=_}),this.resolve=u(f),this.reject=u(g)};n.exports.f=function(v){return new c(v)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(u){r.d(a,"a",function(){return U});var c=r(1);function v(H){throw new Error("[mobx-utils] "+H)}function f(H,W){W===void 0&&(W="Illegal state"),H||v(W)}var g=function(H){return H&&H!==Object.prototype&&Object.getOwnPropertyNames(H).concat(g(Object.getPrototypeOf(H))||[])},b=function(H){return function(W){var z=g(W);return z.filter(function(Y,q){return z.indexOf(Y)===q})}(H).filter(function(W){return W!=="constructor"&&!~W.indexOf("__")})},_="pending",x="fulfilled",A="rejected";function M(H){switch(this.state){case _:return H.pending&&H.pending(this.value);case A:return H.rejected&&H.rejected(this.value);case x:return H.fulfilled?H.fulfilled(this.value):this.value}}function S(H,W){if(f(arguments.length<=2,"fromPromise expects up to two arguments"),f(typeof H=="function"||typeof H=="object"&&H&&typeof H.then=="function","Please pass a promise or function to fromPromise"),H.isPromiseBasedObservable===!0)return H;typeof H=="function"&&(H=new Promise(H));var z=H;H.then(Object(c.k)("observableFromPromise-resolve",function(q){z.value=q,z.state=x}),Object(c.k)("observableFromPromise-reject",function(q){z.value=q,z.state=A})),z.isPromiseBasedObservable=!0,z.case=M;var Y=W&&W.state===x?W.value:void 0;return Object(c.q)(z,{value:Y,state:_},{},{deep:!1}),z}(function(H){H.reject=Object(c.k)("fromPromise.reject",function(W){var z=H(Promise.reject(W));return z.state=A,z.value=W,z}),H.resolve=Object(c.k)("fromPromise.resolve",function(W){W===void 0&&(W=void 0);var z=H(Promise.resolve(W));return z.state=x,z.value=W,z})})(S||(S={}));var E=function(H,W,z,Y){var q,oe=arguments.length,ie=oe<3?W:Y===null?Y=Object.getOwnPropertyDescriptor(W,z):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(H,W,z,Y);else for(var Pe=H.length-1;Pe>=0;Pe--)(q=H[Pe])&&(ie=(oe<3?q(ie):oe>3?q(W,z,ie):q(W,z))||ie);return oe>3&&ie&&Object.defineProperty(W,z,ie),ie};(function(){function H(W,z){var Y=this;Object(c.G)(function(){Y.current=z,Y.subscription=W.subscribe(Y)})}H.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},H.prototype.next=function(W){this.current=W},H.prototype.complete=function(){this.dispose()},H.prototype.error=function(W){this.current=W,this.dispose()},E([c.C.ref],H.prototype,"current",void 0),E([c.k.bound],H.prototype,"next",null),E([c.k.bound],H.prototype,"complete",null),E([c.k.bound],H.prototype,"error",null)})();var D=function(){return D=Object.assign||function(H){for(var W,z=1,Y=arguments.length;z<Y;z++)for(var q in W=arguments[z])Object.prototype.hasOwnProperty.call(W,q)&&(H[q]=W[q]);return H},D.apply(this,arguments)},I=function(H,W,z,Y){var q,oe=arguments.length,ie=oe<3?W:Y===null?Y=Object.getOwnPropertyDescriptor(W,z):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(H,W,z,Y);else for(var Pe=H.length-1;Pe>=0;Pe--)(q=H[Pe])&&(ie=(oe<3?q(ie):oe>3?q(W,z,ie):q(W,z))||ie);return oe>3&&ie&&Object.defineProperty(W,z,ie),ie},B=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function H(W){var z=this;this.model=W,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(Y){return z.localValues.has(Y)},f(Object(c.A)(W),"createViewModel expects an observable object"),b(W).forEach(function(Y){if(Y!==c.a&&Y!=="__mobxDidRunLazyInitializers"){if(f(B.indexOf(Y)===-1,"The propertyname "+Y+" is reserved and cannot be used with viewModels"),Object(c.w)(W,Y)){var q=Object(c.h)(W,Y).derivation;z.localComputedValues.set(Y,Object(c.m)(q.bind(z)))}var oe=Object.getOwnPropertyDescriptor(W,Y),ie=oe?{enumerable:oe.enumerable}:{};Object.defineProperty(z,Y,D(D({},ie),{configurable:!0,get:function(){return Object(c.w)(W,Y)?z.localComputedValues.get(Y).get():z.isPropertyDirty(Y)?z.localValues.get(Y):z.model[Y]},set:Object(c.k)(function(Pe){Pe!==z.model[Y]?z.localValues.set(Y,Pe):z.localValues.delete(Y)})}))}})}Object.defineProperty(H.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),H.prototype.submit=function(){var W=this;Object(c.B)(this.localValues).forEach(function(z){var Y=W.localValues.get(z),q=W.model[z];Object(c.y)(q)?q.replace(Y):Object(c.z)(q)?(q.clear(),q.merge(Y)):Object(c.v)(Y)||(W.model[z]=Y)}),this.localValues.clear()},H.prototype.reset=function(){this.localValues.clear()},H.prototype.resetProperty=function(W){this.localValues.delete(W)},I([c.m],H.prototype,"isDirty",null),I([c.m],H.prototype,"changedValues",null),I([c.k.bound],H.prototype,"submit",null),I([c.k.bound],H.prototype,"reset",null),I([c.k.bound],H.prototype,"resetProperty",null)})();function $(H){if(!H)return"ROOT";for(var W=[];H.parent;)W.push(H.path),H=H.parent;return W.reverse().join("/")}function j(H){return Object(c.A)(H)||Object(c.y)(H)||Object(c.z)(H)}function U(H,W){var z=new WeakMap;function Y(ie){var Pe=z.get(ie.object);(function(we,be){switch(we.type){case"add":q(we.newValue,be,we.name);break;case"update":oe(we.oldValue),q(we.newValue,be,we.name||""+we.index);break;case"remove":case"delete":oe(we.oldValue);break;case"splice":we.removed.map(oe),we.added.forEach(function(Ze,yt){return q(Ze,be,""+(we.index+yt))});for(var ye=we.index+we.addedCount;ye<we.object.length;ye++)if(j(we.object[ye])){var Xe=z.get(we.object[ye]);Xe&&(Xe.path=""+ye)}}})(ie,Pe),W(ie,$(Pe),H)}function q(ie,Pe,we){if(j(ie)){var be=z.get(ie);if(be){if(be.parent!==Pe||be.path!==we)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+$(Pe)+"/"+we+"', but it already exists at '"+$(be.parent)+"/"+be.path+"'")}else{var ye={parent:Pe,path:we,dispose:Object(c.D)(ie,Y)};z.set(ie,ye),Object(c.p)(ie).forEach(function(Xe){var Ze=Xe[0];return q(Xe[1],ye,Ze)})}}}function oe(ie){if(j(ie)){var Pe=z.get(ie);if(!Pe)return;z.delete(ie),Pe.dispose(),Object(c.L)(ie).forEach(oe)}}return q(H,void 0,""),function(){oe(H)}}var K,Q=(K=function(H,W){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,Y){z.__proto__=Y}||function(z,Y){for(var q in Y)Y.hasOwnProperty(q)&&(z[q]=Y[q])},K(H,W)},function(H,W){function z(){this.constructor=H}K(H,W),H.prototype=W===null?Object.create(W):(z.prototype=W.prototype,new z)});(function(H){function W(z,Y,q){var oe=q===void 0?{}:q,ie=oe.name,Pe=ie===void 0?"ogm"+(1e3*Math.random()|0):ie,we=oe.keyToName,be=we===void 0?function(Ze){return""+Ze}:we,ye=H.call(this)||this;ye._keyToName=be,ye._groupBy=Y,ye._ogmInfoKey=Symbol("ogmInfo"+Pe),ye._base=z;for(var Xe=0;Xe<z.length;Xe++)ye._addItem(z[Xe]);return ye._disposeBaseObserver=Object(c.D)(ye._base,function(Ze){if(Ze.type==="splice")Object(c.J)(function(){for(var yt=0,Be=Ze.removed;yt<Be.length;yt++){var qt=Be[yt];ye._removeItem(qt)}for(var Yt=0,Pt=Ze.added;Yt<Pt.length;Yt++){var An=Pt[Yt];ye._addItem(An)}});else{if(Ze.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ye._removeItem(Ze.oldValue),ye._addItem(Ze.newValue)})}}),ye}Q(W,H),W.prototype.clear=function(){throw new Error("not supported")},W.prototype.delete=function(z){throw new Error("not supported")},W.prototype.set=function(z,Y){throw new Error("not supported")},W.prototype.dispose=function(){this._disposeBaseObserver();for(var z=0;z<this._base.length;z++){var Y=this._base[z];Y[this._ogmInfoKey].reaction(),delete Y[this._ogmInfoKey]}},W.prototype._getGroupArr=function(z){var Y=H.prototype.get.call(this,z);return Y===void 0&&(Y=Object(c.C)([],{name:"GroupArray["+this._keyToName(z)+"]",deep:!1}),H.prototype.set.call(this,z,Y)),Y},W.prototype._removeFromGroupArr=function(z,Y){var q=H.prototype.get.call(this,z);q.length===1?H.prototype.delete.call(this,z):(Y===q.length-1||(q[Y]=q[q.length-1],q[Y][this._ogmInfoKey].groupArrIndex=Y),q.length--)},W.prototype._addItem=function(z){var Y=this,q=this._groupBy(z),oe=this._getGroupArr(q),ie={groupByValue:q,groupArrIndex:oe.length,reaction:Object(c.F)(function(){return Y._groupBy(z)},function(Pe,we){var be=z[Y._ogmInfoKey];Y._removeFromGroupArr(be.groupByValue,be.groupArrIndex);var ye=Y._getGroupArr(Pe),Xe=ye.length;ye.push(z),be.groupByValue=Pe,be.groupArrIndex=Xe})};Object.defineProperty(z,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ie}),oe.push(z)},W.prototype._removeItem=function(z){var Y=z[this._ogmInfoKey];this._removeFromGroupArr(Y.groupByValue,Y.groupArrIndex),Y.reaction(),delete z[this._ogmInfoKey]}})(c.b),function(){function H(W,z){this.base=W,this.args=z,this.closestIdx=0,this.isDisposed=!1;for(var Y=this.closest=this.root=W,q=0;q<this.args.length-1&&(Y=Y.get(z[q]));q++)this.closest=Y;this.closestIdx=q}return H.prototype.exists=function(){this.assertNotDisposed();var W=this.args.length;return this.closestIdx>=W-1&&this.closest.has(this.args[W-1])},H.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},H.prototype.set=function(W){this.assertNotDisposed();for(var z=this.args.length,Y=this.closest,q=this.closestIdx;q<z-1;q++){var oe=new Map;Y.set(this.args[q],oe),Y=oe}this.closestIdx=z-1,this.closest=Y,Y.set(this.args[z-1],W)},H.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var W=this.args.length;this.closest.delete(this.args[W-1]);for(var z=this.root,Y=[z],q=0;q<W-1;q++)z=z.get(this.args[q]),Y.push(z);for(q=Y.length-1;q>0;q--)Y[q].size===0&&Y[q-1].delete(this.args[q-1]);this.isDisposed=!0},H.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},H}(),Promise.resolve(),typeof queueMicrotask<"u"||u!==void 0&&u.nextTick}).call(this,r(163))},function(n,a,r){var u;(function(c,v,f){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},A={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M=1;M<20;++M)b[111+M]="f"+M;for(M=0;M<=9;++M)b[M+96]=M.toString();j.prototype.bind=function(U,K,Q){var H=this;return U=U instanceof Array?U:[U],H._bindMultiple.call(H,U,K,Q),H},j.prototype.unbind=function(U,K){return this.bind.call(this,U,function(){},K)},j.prototype.trigger=function(U,K){var Q=this;return Q._directMap[U+":"+K]&&Q._directMap[U+":"+K]({},U),Q},j.prototype.reset=function(){var U=this;return U._callbacks={},U._directMap={},U},j.prototype.stopCallback=function(U,K){if((" "+K.className+" ").indexOf(" mousetrap ")>-1||$(K,this.target))return!1;if("composedPath"in U&&typeof U.composedPath=="function"){var Q=U.composedPath()[0];Q!==U.target&&(K=Q)}return K.tagName=="INPUT"||K.tagName=="SELECT"||K.tagName=="TEXTAREA"||K.isContentEditable},j.prototype.handleKey=function(){var U=this;return U._handleKey.apply(U,arguments)},j.addKeycodes=function(U){for(var K in U)U.hasOwnProperty(K)&&(b[K]=U[K]);g=null},j.init=function(){var U=j(v);for(var K in U)K.charAt(0)!=="_"&&(j[K]=function(Q){return function(){return U[Q].apply(U,arguments)}}(K))},j.init(),c.Mousetrap=j,n.exports&&(n.exports=j),(u=(function(){return j}).call(a,r,a,n))===void 0||(n.exports=u)}function S(U,K,Q){U.addEventListener?U.addEventListener(K,Q,!1):U.attachEvent("on"+K,Q)}function E(U){if(U.type=="keypress"){var K=String.fromCharCode(U.which);return U.shiftKey||(K=K.toLowerCase()),K}return b[U.which]?b[U.which]:_[U.which]?_[U.which]:String.fromCharCode(U.which).toLowerCase()}function D(U){return U=="shift"||U=="ctrl"||U=="alt"||U=="meta"}function I(U,K,Q){return Q||(Q=function(){if(!g)for(var H in g={},b)H>95&&H<112||b.hasOwnProperty(H)&&(g[b[H]]=H);return g}()[U]?"keydown":"keypress"),Q=="keypress"&&K.length&&(Q="keydown"),Q}function B(U,K){var Q,H,W,z=[];for(Q=function(Y){return Y==="+"?["+"]:(Y=Y.replace(/\+{2}/g,"+plus")).split("+")}(U),W=0;W<Q.length;++W)H=Q[W],A[H]&&(H=A[H]),K&&K!="keypress"&&x[H]&&(H=x[H],z.push("shift")),D(H)&&z.push(H);return{key:H,modifiers:z,action:K=I(H,z,K)}}function $(U,K){return U!==null&&U!==v&&(U===K||$(U.parentNode,K))}function j(U){var K=this;if(U=U||v,!(K instanceof j))return new j(U);K.target=U,K._callbacks={},K._directMap={};var Q,H={},W=!1,z=!1,Y=!1;function q(ye){ye=ye||{};var Xe,Ze=!1;for(Xe in H)ye[Xe]?Ze=!0:H[Xe]=0;Ze||(Y=!1)}function oe(ye,Xe,Ze,yt,Be,qt){var Yt,Pt,An,$e,Se=[],Ae=Ze.type;if(!K._callbacks[ye])return[];for(Ae=="keyup"&&D(ye)&&(Xe=[ye]),Yt=0;Yt<K._callbacks[ye].length;++Yt)if(Pt=K._callbacks[ye][Yt],(yt||!Pt.seq||H[Pt.seq]==Pt.level)&&Ae==Pt.action&&(Ae=="keypress"&&!Ze.metaKey&&!Ze.ctrlKey||(An=Xe,$e=Pt.modifiers,An.sort().join(",")===$e.sort().join(",")))){var qe=!yt&&Pt.combo==Be,_t=yt&&Pt.seq==yt&&Pt.level==qt;(qe||_t)&&K._callbacks[ye].splice(Yt,1),Se.push(Pt)}return Se}function ie(ye,Xe,Ze,yt){K.stopCallback(Xe,Xe.target||Xe.srcElement,Ze,yt)||ye(Xe,Ze)===!1&&(function(Be){Be.preventDefault?Be.preventDefault():Be.returnValue=!1}(Xe),function(Be){Be.stopPropagation?Be.stopPropagation():Be.cancelBubble=!0}(Xe))}function Pe(ye){typeof ye.which!="number"&&(ye.which=ye.keyCode);var Xe=E(ye);Xe&&(ye.type!="keyup"||W!==Xe?K.handleKey(Xe,function(Ze){var yt=[];return Ze.shiftKey&&yt.push("shift"),Ze.altKey&&yt.push("alt"),Ze.ctrlKey&&yt.push("ctrl"),Ze.metaKey&&yt.push("meta"),yt}(ye),ye):W=!1)}function we(ye,Xe,Ze,yt){function Be(An){return function(){Y=An,++H[ye],clearTimeout(Q),Q=setTimeout(q,1e3)}}function qt(An){ie(Ze,An,ye),yt!=="keyup"&&(W=E(An)),setTimeout(q,10)}H[ye]=0;for(var Yt=0;Yt<Xe.length;++Yt){var Pt=Yt+1===Xe.length?qt:Be(yt||B(Xe[Yt+1]).action);be(Xe[Yt],Pt,yt,ye,Yt)}}function be(ye,Xe,Ze,yt,Be){K._directMap[ye+":"+Ze]=Xe;var qt,Yt=(ye=ye.replace(/\s+/g," ")).split(" ");Yt.length>1?we(ye,Yt,Xe,Ze):(qt=B(ye,Ze),K._callbacks[qt.key]=K._callbacks[qt.key]||[],oe(qt.key,qt.modifiers,{type:qt.action},yt,ye,Be),K._callbacks[qt.key][yt?"unshift":"push"]({callback:Xe,modifiers:qt.modifiers,action:qt.action,seq:yt,level:Be,combo:ye}))}K._handleKey=function(ye,Xe,Ze){var yt,Be=oe(ye,Xe,Ze),qt={},Yt=0,Pt=!1;for(yt=0;yt<Be.length;++yt)Be[yt].seq&&(Yt=Math.max(Yt,Be[yt].level));for(yt=0;yt<Be.length;++yt)if(Be[yt].seq){if(Be[yt].level!=Yt)continue;Pt=!0,qt[Be[yt].seq]=1,ie(Be[yt].callback,Ze,Be[yt].combo,Be[yt].seq)}else Pt||ie(Be[yt].callback,Ze,Be[yt].combo);var An=Ze.type=="keypress"&&z;Ze.type!=Y||D(ye)||An||q(qt),z=Pt&&Ze.type=="keydown"},K._bindMultiple=function(ye,Xe,Ze){for(var yt=0;yt<ye.length;++yt)be(ye[yt],Xe,Ze)},S(U,"keypress",Pe),S(U,"keydown",Pe),S(U,"keyup",Pe)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var u=r(7),c=r(34),v=r(30),f=r(33),g=u.TypeError;n.exports=function(b,_){var x,A;if(_==="string"&&v(x=b.toString)&&!f(A=c(x,b))||v(x=b.valueOf)&&!f(A=c(x,b))||_!=="string"&&v(x=b.toString)&&!f(A=c(x,b)))return A;throw g("Can't convert object to primitive value")}},function(n,a,r){var u=r(7),c=r(30),v=r(92),f=u.WeakMap;n.exports=c(f)&&/native code/.test(v(f))},function(n,a,r){var u=r(36),c=r(38),v=r(32),f=r(41),g=r(77);n.exports=u?Object.defineProperties:function(b,_){v(b);for(var x,A=f(_),M=g(_),S=M.length,E=0;S>E;)c.f(b,x=M[E++],A[x]);return b}},function(n,a,r){var u=r(7);n.exports=u},function(n,a,r){var u=r(7),c=r(96),v=r(99),f=r(33),g=r(28)("species"),b=u.Array;n.exports=function(_){var x;return c(_)&&(x=_.constructor,(v(x)&&(x===b||c(x.prototype))||f(x)&&(x=x[g])===null)&&(x=void 0)),x===void 0?b:x}},function(n,a,r){var u=r(113),c=r(97);n.exports=u?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var u=r(142).IteratorPrototype,c=r(60),v=r(69),f=r(78),g=r(80),b=function(){return this};n.exports=function(_,x,A,M){var S=x+" Iterator";return _.prototype=c(u,{next:v(+!M,A)}),f(_,S,!1,!0),g[S]=b,_}},function(n,a,r){var u=r(7),c=r(30),v=u.String,f=u.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw f("Can't set "+v(g)+" as a prototype")}},function(n,a,r){var u=r(16),c=r(7),v=r(15),f=r(95),g=r(42),b=r(144),_=r(117),x=r(119),A=r(30),M=r(33),S=r(18),E=r(120),D=r(78),I=r(148);n.exports=function(B,$,j){var U=B.indexOf("Map")!==-1,K=B.indexOf("Weak")!==-1,Q=U?"set":"add",H=c[B],W=H&&H.prototype,z=H,Y={},q=function(ye){var Xe=v(W[ye]);g(W,ye,ye=="add"?function(Ze){return Xe(this,Ze===0?0:Ze),this}:ye=="delete"?function(Ze){return!(K&&!M(Ze))&&Xe(this,Ze===0?0:Ze)}:ye=="get"?function(Ze){return K&&!M(Ze)?void 0:Xe(this,Ze===0?0:Ze)}:ye=="has"?function(Ze){return!(K&&!M(Ze))&&Xe(this,Ze===0?0:Ze)}:function(Ze,yt){return Xe(this,Ze===0?0:Ze,yt),this})};if(f(B,!A(H)||!(K||W.forEach&&!S(function(){new H().entries().next()}))))z=j.getConstructor($,B,U,Q),b.enable();else if(f(B,!0)){var oe=new z,ie=oe[Q](K?{}:-0,1)!=oe,Pe=S(function(){oe.has(1)}),we=E(function(ye){new H(ye)}),be=!K&&S(function(){for(var ye=new H,Xe=5;Xe--;)ye[Q](Xe,Xe);return!ye.has(-0)});we||((z=$(function(ye,Xe){x(ye,W);var Ze=I(new H,ye,z);return Xe!=null&&_(Xe,Ze[Q],{that:Ze,AS_ENTRIES:U}),Ze})).prototype=W,W.constructor=z),(Pe||be)&&(q("delete"),q("has"),U&&q("get")),(be||ie)&&q(Q),K&&W.clear&&delete W.clear}return Y[B]=z,u({global:!0,forced:z!=H},Y),D(z,B),K||j.setStrong(z,B,U),z}},function(n,a,r){var u=r(18),c=r(33),v=r(51),f=r(184),g=Object.isExtensible,b=u(function(){});n.exports=b||f?function(_){return!!c(_)&&(!f||v(_)!="ArrayBuffer")&&(!g||g(_))}:g},function(n,a,r){var u=r(18);n.exports=u(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var u=r(18);n.exports=!u(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var u=r(38).f,c=r(60),v=r(149),f=r(64),g=r(119),b=r(117),_=r(116),x=r(150),A=r(36),M=r(144).fastKey,S=r(58),E=S.set,D=S.getterFor;n.exports={getConstructor:function(I,B,$,j){var U=I(function(z,Y){g(z,K),E(z,{type:B,index:c(null),first:void 0,last:void 0,size:0}),A||(z.size=0),Y!=null&&b(Y,z[j],{that:z,AS_ENTRIES:$})}),K=U.prototype,Q=D(B),H=function(z,Y,q){var oe,ie,Pe=Q(z),we=W(z,Y);return we?we.value=q:(Pe.last=we={index:ie=M(Y,!0),key:Y,value:q,previous:oe=Pe.last,next:void 0,removed:!1},Pe.first||(Pe.first=we),oe&&(oe.next=we),A?Pe.size++:z.size++,ie!=="F"&&(Pe.index[ie]=we)),z},W=function(z,Y){var q,oe=Q(z),ie=M(Y);if(ie!=="F")return oe.index[ie];for(q=oe.first;q;q=q.next)if(q.key==Y)return q};return v(K,{clear:function(){for(var z=Q(this),Y=z.index,q=z.first;q;)q.removed=!0,q.previous&&(q.previous=q.previous.next=void 0),delete Y[q.index],q=q.next;z.first=z.last=void 0,A?z.size=0:this.size=0},delete:function(z){var Y=this,q=Q(Y),oe=W(Y,z);if(oe){var ie=oe.next,Pe=oe.previous;delete q.index[oe.index],oe.removed=!0,Pe&&(Pe.next=ie),ie&&(ie.previous=Pe),q.first==oe&&(q.first=ie),q.last==oe&&(q.last=Pe),A?q.size--:Y.size--}return!!oe},forEach:function(z){for(var Y,q=Q(this),oe=f(z,arguments.length>1?arguments[1]:void 0);Y=Y?Y.next:q.first;)for(oe(Y.value,Y.key,this);Y&&Y.removed;)Y=Y.previous},has:function(z){return!!W(this,z)}}),v(K,$?{get:function(z){var Y=W(this,z);return Y&&Y.value},set:function(z,Y){return H(this,z===0?0:z,Y)}}:{add:function(z){return H(this,z=z===0?0:z,z)}}),A&&u(K,"size",{get:function(){return Q(this).size}}),U},setStrong:function(I,B,$){var j=B+" Iterator",U=D(B),K=D(j);_(I,B,function(Q,H){E(this,{type:j,target:Q,state:U(Q),kind:H,last:void 0})},function(){for(var Q=K(this),H=Q.kind,W=Q.last;W&&W.removed;)W=W.previous;return Q.target&&(Q.last=W=W?W.next:Q.state.first)?H=="keys"?{value:W.key,done:!1}:H=="values"?{value:W.value,done:!1}:{value:[W.key,W.value],done:!1}:(Q.target=void 0,{value:void 0,done:!0})},$?"entries":"values",!$,!0),x(B)}}},function(n,a,r){var u=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return u(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var u=r(7),c=r(64),v=r(34),f=r(40),g=r(189),b=r(145),_=r(99),x=r(45),A=r(63),M=r(146),S=r(118),E=u.Array;n.exports=function(D){var I=f(D),B=_(this),$=arguments.length,j=$>1?arguments[1]:void 0,U=j!==void 0;U&&(j=c(j,$>2?arguments[2]:void 0));var K,Q,H,W,z,Y,q=S(I),oe=0;if(!q||this==E&&b(q))for(K=x(I),Q=B?new this(K):E(K);K>oe;oe++)Y=U?j(I[oe],oe):I[oe],A(Q,oe,Y);else for(z=(W=M(I,q)).next,Q=B?new this:[];!(H=v(z,W)).done;oe++)Y=U?g(W,j,[H.value,oe],!0):H.value,A(Q,oe,Y);return Q.length=oe,Q}},function(n,a,r){var u=r(32),c=r(147);n.exports=function(v,f,g,b){try{return b?f(u(g)[0],g[1]):f(g)}catch(_){c(v,"throw",_)}}},function(n,a,r){var u=r(18),c=r(7).RegExp;n.exports=u(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,a,r){var u=r(18),c=r(7).RegExp;n.exports=u(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,a,r){var u=r(16),c=r(15),v=r(56),f=r(40),g=r(45),b=r(39),_=r(18),x=r(193),A=r(121),M=r(194),S=r(195),E=r(70),D=r(196),I=[],B=c(I.sort),$=c(I.push),j=_(function(){I.sort(void 0)}),U=_(function(){I.sort(null)}),K=A("sort"),Q=!_(function(){if(E)return E<70;if(!(M&&M>3)){if(S)return!0;if(D)return D<603;var H,W,z,Y,q="";for(H=65;H<76;H++){switch(W=String.fromCharCode(H),H){case 66:case 69:case 70:case 72:z=3;break;case 68:case 71:z=4;break;default:z=2}for(Y=0;Y<47;Y++)I.push({k:W+Y,v:z})}for(I.sort(function(oe,ie){return ie.v-oe.v}),Y=0;Y<I.length;Y++)W=I[Y].k.charAt(0),q.charAt(q.length-1)!==W&&(q+=W);return q!=="DGBEFHACIJK"}});u({target:"Array",proto:!0,forced:j||!U||!K||!Q},{sort:function(H){H!==void 0&&v(H);var W=f(this);if(Q)return H===void 0?B(W):B(W,H);var z,Y,q=[],oe=g(W);for(Y=0;Y<oe;Y++)Y in W&&$(q,W[Y]);for(x(q,function(ie){return function(Pe,we){return we===void 0?-1:Pe===void 0?1:ie!==void 0?+ie(Pe,we)||0:b(Pe)>b(we)?1:-1}}(H)),z=q.length,Y=0;Y<z;)W[Y]=q[Y++];for(;Y<oe;)delete W[Y++];return W}})},function(n,a,r){var u=r(114),c=Math.floor,v=function(b,_){var x=b.length,A=c(x/2);return x<8?f(b,_):g(b,v(u(b,0,A),_),v(u(b,A),_),_)},f=function(b,_){for(var x,A,M=b.length,S=1;S<M;){for(A=S,x=b[S];A&&_(b[A-1],x)>0;)b[A]=b[--A];A!==S++&&(b[A]=x)}return b},g=function(b,_,x,A){for(var M=_.length,S=x.length,E=0,D=0;E<M||D<S;)b[E+D]=E<M&&D<S?A(_[E],x[D])<=0?_[E++]:x[D++]:E<M?_[E++]:x[D++];return b};n.exports=v},function(n,a,r){var u=r(55).match(/firefox\/(\d+)/i);n.exports=!!u&&+u[1]},function(n,a,r){var u=r(55);n.exports=/MSIE|Trident/.test(u)},function(n,a,r){var u=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!u&&+u[1]},function(n,a,r){var u=r(7),c=r(159),v=u.TypeError;n.exports=function(f){if(c(f))throw v("The method doesn't accept regular expressions");return f}},function(n,a,r){var u=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[u]=!1,"/./"[c](v)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(u){return u!=u}})},function(n,a,r){var u=r(73).PROPER,c=r(18),v=r(162);n.exports=function(f){return c(function(){return!!v[f]()||"​᠎"[f]()!=="​᠎"||u&&v[f].name!==f})}},function(n,a,r){var u=r(15),c=r(40),v=Math.floor,f=u("".charAt),g=u("".replace),b=u("".slice),_=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;n.exports=function(A,M,S,E,D,I){var B=S+A.length,$=E.length,j=x;return D!==void 0&&(D=c(D),j=_),g(I,j,function(U,K){var Q;switch(f(K,0)){case"$":return"$";case"&":return A;case"`":return b(M,0,S);case"'":return b(M,B);case"<":Q=D[b(K,1,-1)];break;default:var H=+K;if(H===0)return U;if(H>$){var W=v(H/10);return W===0?U:W<=$?E[W-1]===void 0?f(K,1):E[W-1]+f(K,1):U}Q=E[H-1]}return Q===void 0?"":Q})}},function(n,a,r){var u=r(36),c=r(15),v=r(34),f=r(18),g=r(77),b=r(112),_=r(84),x=r(40),A=r(85),M=Object.assign,S=Object.defineProperty,E=c([].concat);n.exports=!M||f(function(){if(u&&M({b:1},M(S({},"a",{enumerable:!0,get:function(){S(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},I={},B=Symbol(),$="abcdefghijklmnopqrst";return D[B]=7,$.split("").forEach(function(j){I[j]=j}),M({},D)[B]!=7||g(M({},I)).join("")!=$})?function(D,I){for(var B=x(D),$=arguments.length,j=1,U=b.f,K=_.f;$>j;)for(var Q,H=A(arguments[j++]),W=U?E(g(H),U(H)):g(H),z=W.length,Y=0;z>Y;)Q=W[Y++],u&&!v(K,H,Q)||(B[Q]=H[Q]);return B}:M},function(n,a,r){var u=r(7),c=r(15),v=r(56),f=r(33),g=r(35),b=r(98),_=u.Function,x=c([].concat),A=c([].join),M={},S=function(E,D,I){if(!g(M,D)){for(var B=[],$=0;$<D;$++)B[$]="a["+$+"]";M[D]=_("C,a","return new C("+A(B,",")+")")}return M[D](E,I)};n.exports=_.bind||function(E){var D=v(this),I=D.prototype,B=b(arguments,1),$=function(){var j=x(B,b(arguments));return this instanceof $?S(D,j.length,j):D.apply(E,j)};return f(I)&&($.prototype=I),$}},function(n,a,r){var u=r(35);n.exports=function(c){return c!==void 0&&(u(c,"value")||u(c,"writable"))}},function(n,a,r){var u=r(15),c=r(44),v=r(39),f=/"/g,g=u("".replace);n.exports=function(b,_,x,A){var M=v(c(b)),S="<"+_;return x!==""&&(S+=" "+x+'="'+g(v(A),f,"&quot;")+'"'),S+">"+M+"</"+_+">"}},function(n,a,r){var u=r(18);n.exports=function(c){return u(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var u,c,v,f,g=r(16),b=r(71),_=r(7),x=r(46),A=r(34),M=r(209),S=r(42),E=r(149),D=r(102),I=r(78),B=r(150),$=r(56),j=r(30),U=r(33),K=r(119),Q=r(92),H=r(117),W=r(120),z=r(164),Y=r(168).set,q=r(210),oe=r(213),ie=r(214),Pe=r(170),we=r(215),be=r(58),ye=r(95),Xe=r(28),Ze=r(216),yt=r(128),Be=r(70),qt=Xe("species"),Yt="Promise",Pt=be.getterFor(Yt),An=be.set,$e=be.getterFor(Yt),Se=M&&M.prototype,Ae=M,qe=Se,_t=_.TypeError,ht=_.document,Vt=_.process,Jt=Pe.f,an=Jt,Kt=!!(ht&&ht.createEvent&&_.dispatchEvent),rt=j(_.PromiseRejectionEvent),pn="unhandledrejection",Ue=!1,_n=ye(Yt,function(){var je=Q(Ae),ut=je!==String(Ae);if(!ut&&Be===66||b&&!qe.finally)return!0;if(Be>=51&&/native code/.test(je))return!1;var rn=new Ae(function(Rn){Rn(1)}),Zt=function(Rn){Rn(function(){},function(){})};return(rn.constructor={})[qt]=Zt,!(Ue=rn.then(function(){})instanceof Zt)||!ut&&Ze&&!rt}),Jn=_n||!W(function(je){Ae.all(je).catch(function(){})}),le=function(je){var ut;return!(!U(je)||!j(ut=je.then))&&ut},Qn=function(je,ut){if(!je.notified){je.notified=!0;var rn=je.reactions;q(function(){for(var Zt=je.value,Rn=je.state==1,Er=0;rn.length>Er;){var li,Si,Yo,ti=rn[Er++],Tn=Rn?ti.ok:ti.fail,Fn=ti.resolve,Hn=ti.reject,ar=ti.domain;try{Tn?(Rn||(je.rejection===2&&Un(je),je.rejection=1),Tn===!0?li=Zt:(ar&&ar.enter(),li=Tn(Zt),ar&&(ar.exit(),Yo=!0)),li===ti.promise?Hn(_t("Promise-chain cycle")):(Si=le(li))?A(Si,li,Fn,Hn):Fn(li)):Hn(Zt)}catch(eo){ar&&!Yo&&ar.exit(),Hn(eo)}}je.reactions=[],je.notified=!1,ut&&!je.rejection&&Xr(je)})}},Pr=function(je,ut,rn){var Zt,Rn;Kt?((Zt=ht.createEvent("Event")).promise=ut,Zt.reason=rn,Zt.initEvent(je,!1,!0),_.dispatchEvent(Zt)):Zt={promise:ut,reason:rn},!rt&&(Rn=_["on"+je])?Rn(Zt):je===pn&&ie("Unhandled promise rejection",rn)},Xr=function(je){A(Y,_,function(){var ut,rn=je.facade,Zt=je.value;if(ao(je)&&(ut=we(function(){yt?Vt.emit("unhandledRejection",Zt,rn):Pr(pn,rn,Zt)}),je.rejection=yt||ao(je)?2:1,ut.error))throw ut.value})},ao=function(je){return je.rejection!==1&&!je.parent},Un=function(je){A(Y,_,function(){var ut=je.facade;yt?Vt.emit("rejectionHandled",ut):Pr("rejectionhandled",ut,je.value)})},bo=function(je,ut,rn){return function(Zt){je(ut,Zt,rn)}},Te=function(je,ut,rn){je.done||(je.done=!0,rn&&(je=rn),je.value=ut,je.state=2,Qn(je,!0))},Qe=function(je,ut,rn){if(!je.done){je.done=!0,rn&&(je=rn);try{if(je.facade===ut)throw _t("Promise can't be resolved itself");var Zt=le(ut);Zt?q(function(){var Rn={done:!1};try{A(Zt,ut,bo(Qe,Rn,je),bo(Te,Rn,je))}catch(Er){Te(Rn,Er,je)}}):(je.value=ut,je.state=1,Qn(je,!1))}catch(Rn){Te({done:!1},Rn,je)}}};if(_n&&(qe=(Ae=function(je){K(this,qe),$(je),A(u,this);var ut=Pt(this);try{je(bo(Qe,ut),bo(Te,ut))}catch(rn){Te(ut,rn)}}).prototype,(u=function(je){An(this,{type:Yt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=E(qe,{then:function(je,ut){var rn=$e(this),Zt=rn.reactions,Rn=Jt(z(this,Ae));return Rn.ok=!j(je)||je,Rn.fail=j(ut)&&ut,Rn.domain=yt?Vt.domain:void 0,rn.parent=!0,Zt[Zt.length]=Rn,rn.state!=0&&Qn(rn,!1),Rn.promise},catch:function(je){return this.then(void 0,je)}}),c=function(){var je=new u,ut=Pt(je);this.promise=je,this.resolve=bo(Qe,ut),this.reject=bo(Te,ut)},Pe.f=Jt=function(je){return je===Ae||je===v?new c(je):an(je)},!b&&j(M)&&Se!==Object.prototype)){f=Se.then,Ue||(S(Se,"then",function(je,ut){var rn=this;return new Ae(function(Zt,Rn){A(f,rn,Zt,Rn)}).then(je,ut)},{unsafe:!0}),S(Se,"catch",qe.catch,{unsafe:!0}));try{delete Se.constructor}catch{}D&&D(Se,qe)}g({global:!0,wrap:!0,forced:_n},{Promise:Ae}),I(Ae,Yt,!1,!0),B(Yt),v=x(Yt),g({target:Yt,stat:!0,forced:_n},{reject:function(je){var ut=Jt(this);return A(ut.reject,void 0,je),ut.promise}}),g({target:Yt,stat:!0,forced:b||_n},{resolve:function(je){return oe(b&&this===v?Ae:this,je)}}),g({target:Yt,stat:!0,forced:Jn},{all:function(je){var ut=this,rn=Jt(ut),Zt=rn.resolve,Rn=rn.reject,Er=we(function(){var li=$(ut.resolve),Si=[],Yo=0,ti=1;H(je,function(Tn){var Fn=Yo++,Hn=!1;ti++,A(li,ut,Tn).then(function(ar){Hn||(Hn=!0,Si[Fn]=ar,--ti||Zt(Si))},Rn)}),--ti||Zt(Si)});return Er.error&&Rn(Er.value),rn.promise},race:function(je){var ut=this,rn=Jt(ut),Zt=rn.reject,Rn=we(function(){var Er=$(ut.resolve);H(je,function(li){A(Er,ut,li).then(rn.resolve,Zt)})});return Rn.error&&Zt(Rn.value),rn.promise}})},function(n,a,r){var u=r(7);n.exports=u.Promise},function(n,a,r){var u,c,v,f,g,b,_,x,A=r(7),M=r(64),S=r(50).f,E=r(168).set,D=r(169),I=r(211),B=r(212),$=r(128),j=A.MutationObserver||A.WebKitMutationObserver,U=A.document,K=A.process,Q=A.Promise,H=S(A,"queueMicrotask"),W=H&&H.value;W||(u=function(){var z,Y;for($&&(z=K.domain)&&z.exit();c;){Y=c.fn,c=c.next;try{Y()}catch(q){throw c?f():v=void 0,q}}v=void 0,z&&z.enter()},D||$||B||!j||!U?!I&&Q&&Q.resolve?((_=Q.resolve(void 0)).constructor=Q,x=M(_.then,_),f=function(){x(u)}):$?f=function(){K.nextTick(u)}:(E=M(E,A),f=function(){E(u)}):(g=!0,b=U.createTextNode(""),new j(u).observe(b,{characterData:!0}),f=function(){b.data=g=!g})),n.exports=W||function(z){var Y={fn:z,next:void 0};v&&(v.next=Y),c||(c=Y,f()),v=Y}},function(n,a,r){var u=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(u)&&c.Pebble!==void 0},function(n,a,r){var u=r(55);n.exports=/web0s(?!.*chrome)/i.test(u)},function(n,a,r){var u=r(32),c=r(33),v=r(170);n.exports=function(f,g){if(u(f),c(g)&&g.constructor===f)return g;var b=v.f(f);return(0,b.resolve)(g),b.promise}},function(n,a,r){var u=r(7);n.exports=function(c,v){var f=u.console;f&&f.error&&(arguments.length==1?f.error(c):f.error(c,v))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(u){return{error:!0,value:u}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var u=r(40),c=r(75),v=r(45);n.exports=function(f){for(var g=u(this),b=v(g),_=arguments.length,x=c(_>1?arguments[1]:void 0,b),A=_>2?arguments[2]:void 0,M=A===void 0?b:c(A,b);M>x;)g[x++]=f;return g}},function(n,a,r){var u=r(16),c=r(7),v=r(15),f=r(59),g=r(160),b=r(219),_=r(18),x=c.RangeError,A=c.String,M=Math.floor,S=v(b),E=v("".slice),D=v(1 .toFixed),I=function(U,K,Q){return K===0?Q:K%2==1?I(U,K-1,Q*U):I(U*U,K/2,Q)},B=function(U,K,Q){for(var H=-1,W=Q;++H<6;)W+=K*U[H],U[H]=W%1e7,W=M(W/1e7)},$=function(U,K){for(var Q=6,H=0;--Q>=0;)H+=U[Q],U[Q]=M(H/K),H=H%K*1e7},j=function(U){for(var K=6,Q="";--K>=0;)if(Q!==""||K===0||U[K]!==0){var H=A(U[K]);Q=Q===""?H:Q+S("0",7-H.length)+H}return Q};u({target:"Number",proto:!0,forced:_(function(){return D(8e-5,3)!=="0.000"||D(.9,0)!=="1"||D(1.255,2)!=="1.25"||D(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!_(function(){D({})})},{toFixed:function(U){var K,Q,H,W,z=g(this),Y=f(U),q=[0,0,0,0,0,0],oe="",ie="0";if(Y<0||Y>20)throw x("Incorrect fraction digits");if(z!=z)return"NaN";if(z<=-1e21||z>=1e21)return A(z);if(z<0&&(oe="-",z=-z),z>1e-21)if(Q=(K=function(Pe){for(var we=0,be=Pe;be>=4096;)we+=12,be/=4096;for(;be>=2;)we+=1,be/=2;return we}(z*I(2,69,1))-69)<0?z*I(2,-K,1):z/I(2,K,1),Q*=4503599627370496,(K=52-K)>0){for(B(q,0,Q),H=Y;H>=7;)B(q,1e7,0),H-=7;for(B(q,I(10,H,1),0),H=K-1;H>=23;)$(q,1<<23),H-=23;$(q,1<<H),B(q,1,1),$(q,2),ie=j(q)}else B(q,0,Q),B(q,1<<-K,0),ie=j(q)+S("0",Y);return ie=Y>0?oe+((W=ie.length)<=Y?"0."+S("0",Y-W)+ie:E(ie,0,W-Y)+"."+E(ie,W-Y)):oe+ie}})},function(n,a,r){var u=r(7),c=r(59),v=r(39),f=r(44),g=u.RangeError;n.exports=function(b){var _=v(f(this)),x="",A=c(b);if(A<0||A==1/0)throw g("Wrong number of repetitions");for(;A>0;(A>>>=1)&&(_+=_))1&A&&(x+=_);return x}},function(n,a,r){var u=r(36),c=r(15),v=r(77),f=r(41),g=c(r(84).f),b=c([].push),_=function(x){return function(A){for(var M,S=f(A),E=v(S),D=E.length,I=0,B=[];D>I;)M=E[I++],u&&!g(S,M)||b(B,x?[M,S[M]]:S[M]);return B}};n.exports={entries:_(!0),values:_(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return ys}),r.d(a,"LogicFlow",function(){return E1}),r.d(a,"h",function(){return Ue.g}),r.d(a,"LogicFlowUtil",function(){return u}),r.d(a,"BaseNode",function(){return Ef}),r.d(a,"RectNode",function(){return p0}),r.d(a,"CircleNode",function(){return y0}),r.d(a,"PolygonNode",function(){return E0}),r.d(a,"DiamondNode",function(){return A0}),r.d(a,"EllipseNode",function(){return N0}),r.d(a,"TextNode",function(){return D0}),r.d(a,"HtmlNode",function(){return F0}),r.d(a,"BaseEdge",function(){return gm}),r.d(a,"LineEdge",function(){return J0}),r.d(a,"PolylineEdge",function(){return r1}),r.d(a,"BezierEdge",function(){return l1}),r.d(a,"Arrow",function(){return ED}),r.d(a,"BaseEdgeModel",function(){return Td}),r.d(a,"BezierEdgeModel",function(){return b_}),r.d(a,"LineEdgeModel",function(){return Js}),r.d(a,"PolylineEdgeModel",function(){return Aa}),r.d(a,"BaseNodeModel",function(){return wf}),r.d(a,"CircleNodeModel",function(){return x_}),r.d(a,"DiamondNodeModel",function(){return P_}),r.d(a,"EllipseNodeModel",function(){return D_}),r.d(a,"PolygonNodeModel",function(){return U_}),r.d(a,"RectNodeModel",function(){return G_}),r.d(a,"TextNodeModel",function(){return q_}),r.d(a,"HtmlNodeModel",function(){return Z_}),r.d(a,"EditConfigModel",function(){return od}),r.d(a,"GraphModel",function(){return a2}),r.d(a,"SnaplineModel",function(){return WO}),r.d(a,"Keyboard",function(){return kS}),r.d(a,"get",function(){return k2}),r.d(a,"defaults",function(){return N2}),r.d(a,"ElementState",function(){return Yr}),r.d(a,"ModelType",function(){return xr}),r.d(a,"ElementType",function(){return co}),r.d(a,"EventType",function(){return Cn}),r.d(a,"formateAnchorConnectValidateData",function(){return ql});var u={};r.r(u),r.d(u,"createUuid",function(){return na}),r.d(u,"refreshGraphId",function(){return Jc}),r.d(u,"StepDrag",function(){return ve}),r.d(u,"setupEdgeModel",function(){return Lt}),r.d(u,"isBboxOverLapping",function(){return Rt}),r.d(u,"filterRepeatPoints",function(){return ft}),r.d(u,"getSimplePolyline",function(){return Ht}),r.d(u,"getExpandedBBox",function(){return Ut}),r.d(u,"pointDirection",function(){return Ct}),r.d(u,"getExpandedBBoxPoint",function(){return Et}),r.d(u,"mergeBBox",function(){return Ke}),r.d(u,"getBBoxOfPoints",function(){return st}),r.d(u,"getPointsFromBBox",function(){return It}),r.d(u,"isPointOutsideBBox",function(){return Qt}),r.d(u,"getBBoxXCrossPoints",function(){return xt}),r.d(u,"getBBoxYCrossPoints",function(){return on}),r.d(u,"getBBoxCrossPointsByPoint",function(){return Tt}),r.d(u,"estimateDistance",function(){return Gt}),r.d(u,"costByPoints",function(){return At}),r.d(u,"heuristicCostEstimate",function(){return Xt}),r.d(u,"rebuildPath",function(){return Pn}),r.d(u,"removeClosePointFromOpenList",function(){return Vn}),r.d(u,"isSegmentsIntersected",function(){return Dt}),r.d(u,"isSegmentCrossingBBox",function(){return Mt}),r.d(u,"getNextNeighborPoints",function(){return St}),r.d(u,"pathFinder",function(){return jn}),r.d(u,"getBoxByOriginNode",function(){return tr}),r.d(u,"pointFilter",function(){return dn}),r.d(u,"getPolylinePoints",function(){return lr}),r.d(u,"getLongestEdge",function(){return Wn}),r.d(u,"isSegmentsInNode",function(){return or}),r.d(u,"isSegmentsCrossNode",function(){return br}),r.d(u,"getCrossPointInRect",function(){return jo}),r.d(u,"segmentDirection",function(){return Po}),r.d(u,"points2PointsList",function(){return nr}),r.d(u,"getSimplePoints",function(){return Zo}),r.d(u,"getBytesLength",function(){return Io}),r.d(u,"getTextWidth",function(){return ii}),r.d(u,"getAppendAttributes",function(){return di}),r.d(u,"getBezierControlPoints",function(){return Jo}),r.d(u,"getBezierPoints",function(){return vo}),r.d(u,"getEndTangent",function(){return pi}),r.d(u,"getClosestPointOfPolyline",function(){return Tr}),r.d(u,"pickEdgeConfig",function(){return Dn}),r.d(u,"twoPointDistance",function(){return hr}),r.d(u,"createEdgeGenerator",function(){return Kn}),r.d(u,"snapToGrid",function(){return rl}),r.d(u,"getGridOffset",function(){return qc}),r.d(u,"sampleCubic",function(){return Do}),r.d(u,"getThetaOfVector",function(){return kd}),r.d(u,"degrees",function(){return Cp}),r.d(u,"Vector",function(){return ze}),r.d(u,"Point",function(){return p}),r.d(u,"Matrix",function(){return xu}),r.d(u,"RotateMatrix",function(){return Qs}),r.d(u,"ScaleMatrix",function(){return lm}),r.d(u,"TranslateMatrix",function(){return Nd});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var f=r(43),g=Object(f.b)("observerBatching");function b(i){i()}var _=!1;function x(){return _}function A(i){return Object(c.t)(i)}var M,S=1e4,E=new Set;function D(){M===void 0&&(M=setTimeout(I,1e4))}function I(){M=void 0;var i=Date.now();E.forEach(function(o){var l=o.current;l&&i>=l.cleanAt&&(l.reaction.dispose(),o.current=null,E.delete(o))}),E.size>0&&D()}var B=!1,$=[],j={};function U(i){return"observer"+i}function K(i,o,l){o===void 0&&(o="observed"),l===void 0&&(l=j),x();var s,h=function(R){return function(){B?$.push(R):R()}}((l.useForceUpdate||f.d)()),d=v.d.useRef(null);if(!d.current){var m=new c.c(U(o),function(){w.mounted?h():(m.dispose(),d.current=null)}),w=function(R){return{cleanAt:Date.now()+S,reaction:R}}(m);d.current=w,s=d,E.add(s),D()}var T=d.current.reaction;return v.d.useDebugValue(T,A),v.d.useEffect(function(){var R;return R=d,E.delete(R),d.current?d.current.mounted=!0:(d.current={reaction:new c.c(U(o),function(){h()}),cleanAt:1/0},h()),function(){d.current.reaction.dispose(),d.current=null}},[]),function(R){B=!0,$=[];try{var F=R();B=!1;var Z=$.length>0?$:void 0;return v.d.useLayoutEffect(function(){Z&&Z.forEach(function(te){return te()})},[Z]),F}finally{B=!1}}(function(){var R,F;if(T.track(function(){try{R=i()}catch(Z){F=Z}}),F)throw F;return R})}var Q=function(){return Q=Object.assign||function(i){for(var o,l=1,s=arguments.length;l<s;l++)for(var h in o=arguments[l])Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h]);return i},Q.apply(this,arguments)};function H(i,o){var l,s,h,d=Q({forwardRef:!1},o),m=i.displayName||i.name,w=function(T,R){return K(function(){return i(T,R)},m)};return w.displayName=m,l=d.forwardRef?Object(v.f)(Object(v.e)(w)):Object(v.f)(w),s=i,h=l,Object.keys(s).forEach(function(T){W[T]||Object.defineProperty(h,T,Object.getOwnPropertyDescriptor(s,T))}),l.displayName=m,l}var W={$$typeof:!0,render:!0,compare:!0,type:!0};function z(i){var o=i.children,l=i.render,s=o||l;return typeof s!="function"?null:K(s)}function Y(i,o,l,s,h){var d=o==="children"?"render":"children",m=typeof i[o]=="function",w=typeof i[d]=="function";return m&&w?new Error("MobX Observer: Do not use children and render in the same time in`"+l):m||w?null:new Error("Invalid prop `"+h+"` of type `"+typeof i[o]+"` supplied to `"+l+"`, expected `function`.")}z.propTypes={children:Y,render:Y},z.displayName="Observer";var q;(q=v.g)||(q=b),Object(c.n)({reactionScheduler:q}),Object(f.a)()[g]=!0;var oe=0,ie={};function Pe(i){return ie[i]||(ie[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var l="__$mobx-react "+o+" ("+oe+")";return oe++,l}(i)),ie[i]}function we(i,o){if(be(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),s=Object.keys(o);if(l.length!==s.length)return!1;for(var h=0;h<l.length;h++)if(!Object.hasOwnProperty.call(o,l[h])||!be(i[l[h]],o[l[h]]))return!1;return!0}function be(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function ye(i,o,l){Object.hasOwnProperty.call(i,o)?i[o]=l:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:l})}var Xe=Pe("patchMixins"),Ze=Pe("patchedDefinition");function yt(i,o){for(var l=this,s=arguments.length,h=new Array(s>2?s-2:0),d=2;d<s;d++)h[d-2]=arguments[d];o.locks++;try{var m;return i!=null&&(m=i.apply(this,h)),m}finally{o.locks--,o.locks===0&&o.methods.forEach(function(w){w.apply(l,h)})}}function Be(i,o){return function(){for(var l=arguments.length,s=new Array(l),h=0;h<l;h++)s[h]=arguments[h];yt.call.apply(yt,[this,i,o].concat(s))}}function qt(i,o,l){var s=function(w,T){var R=w[Xe]=w[Xe]||{},F=R[T]=R[T]||{};return F.locks=F.locks||0,F.methods=F.methods||[],F}(i,o);s.methods.indexOf(l)<0&&s.methods.push(l);var h=Object.getOwnPropertyDescriptor(i,o);if(!h||!h[Ze]){var d=i[o],m=Yt(i,o,h?h.enumerable:void 0,s,d);Object.defineProperty(i,o,m)}}function Yt(i,o,l,s,h){var d,m=Be(h,s);return(d={})[Ze]=!0,d.get=function(){return m},d.set=function(w){if(this===i)m=Be(w,s);else{var T=Yt(this,o,l,s,w);Object.defineProperty(this,o,T)}},d.configurable=!0,d.enumerable=l,d}var Pt=c.a||"$mobx",An=Pe("isMobXReactObserver"),$e=Pe("isUnmounted"),Se=Pe("skipRender"),Ae=Pe("isForcingUpdate");function qe(i){var o=i.prototype;if(i[An]?_t(o):i[An]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==v.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==Vt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=Vt;Jt(o,"props"),Jt(o,"state");var l=o.render;return o.render=function(){return ht.call(this,l)},qt(o,"componentWillUnmount",function(){var s;(s=this.render[Pt])===null||s===void 0||s.dispose(),this[$e]=!0,!this.render[Pt]&&_t(this)}),i}function _t(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function ht(i){var o=this;ye(this,Se,!1),ye(this,Ae,!1);var l=_t(this),s=i.bind(this),h=!1,d=new c.c(l+".render()",function(){if(!h&&(h=!0,o[$e]!==!0)){var w=!0;try{ye(o,Ae,!0),o[Se]||v.a.prototype.forceUpdate.call(o),w=!1}finally{ye(o,Ae,!1),w&&d.dispose()}}});function m(){h=!1;var w=void 0,T=void 0;if(d.track(function(){try{T=Object(c.d)(!1,s)}catch(R){w=R}}),w)throw w;return T}return d.reactComponent=this,m[Pt]=d,this.render=m,m.call(this)}function Vt(i,o){return this.state!==o||!we(this.props,i)}function Jt(i,o){var l=Pe("reactProp_"+o+"_valueHolder"),s=Pe("reactProp_"+o+"_atomHolder");function h(){return this[s]||ye(this,s,Object(c.o)("reactive "+o)),this[s]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var d=!1;return c.f&&c.e&&(d=Object(c.f)(!0)),h.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(d),this[l]},set:function(d){this[Ae]||we(this[l],d)?ye(this,l,d):(ye(this,l,d),ye(this,Se,!0),h.call(this).reportChanged(),ye(this,Se,!1))}})}var an=typeof Symbol=="function"&&Symbol.for,Kt=an?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(i){return null}).$$typeof,rt=an?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(i){return null}).$$typeof;function pn(i){if(i.isMobxInjector,rt&&i.$$typeof===rt)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Kt&&i.$$typeof===Kt){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(z,null,function(){return o.apply(void 0,l)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(v.a,i)?qe(i):H(i)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Ue=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var _n=function(i,o){for(var l=-1,s=i==null?0:i.length,h=Array(s);++l<s;)h[l]=o(i[l],l,i);return h},Jn=function(){this.__data__=[],this.size=0},le=function(i,o){return i===o||i!=i&&o!=o},Qn=function(i,o){for(var l=i.length;l--;)if(le(i[l][0],o))return l;return-1},Pr=Array.prototype.splice,Xr=function(i){var o=this.__data__,l=Qn(o,i);return!(l<0)&&(l==o.length-1?o.pop():Pr.call(o,l,1),--this.size,!0)},ao=function(i){var o=this.__data__,l=Qn(o,i);return l<0?void 0:o[l][1]},Un=function(i){return Qn(this.__data__,i)>-1},bo=function(i,o){var l=this.__data__,s=Qn(l,i);return s<0?(++this.size,l.push([i,o])):l[s][1]=o,this};function Te(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}Te.prototype.clear=Jn,Te.prototype.delete=Xr,Te.prototype.get=ao,Te.prototype.has=Un,Te.prototype.set=bo;var Qe=Te,je=function(){this.__data__=new Qe,this.size=0},ut=function(i){var o=this.__data__,l=o.delete(i);return this.size=o.size,l},rn=function(i){return this.__data__.get(i)},Zt=function(i){return this.__data__.has(i)},Rn=r(31),Er=Rn.a.Symbol,li=Object.prototype,Si=li.hasOwnProperty,Yo=li.toString,ti=Er?Er.toStringTag:void 0,Tn=function(i){var o=Si.call(i,ti),l=i[ti];try{i[ti]=void 0;var s=!0}catch{}var h=Yo.call(i);return s&&(o?i[ti]=l:delete i[ti]),h},Fn=Object.prototype.toString,Hn=function(i){return Fn.call(i)},ar=Er?Er.toStringTag:void 0,eo=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":ar&&ar in Object(i)?Tn(i):Hn(i)},Dr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},ml,Ha=function(i){if(!Dr(i))return!1;var o=eo(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},yl=Rn.a["__core-js_shared__"],ou=(ml=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||""))?"Symbol(src)_1."+ml:"",ep=function(i){return!!ou&&ou in i},wc=Function.prototype.toString,va=function(i){if(i!=null){try{return wc.call(i)}catch{}try{return i+""}catch{}}return""},Fu=/^\[object .+?Constructor\]$/,Nn=Function.prototype,Uf=Object.prototype,_o=Nn.toString,Ec=Uf.hasOwnProperty,Zi=RegExp("^"+_o.call(Ec).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),la=function(i){return!(!Dr(i)||ep(i))&&(Ha(i)?Zi:Fu).test(va(i))},Ps=function(i,o){return i==null?void 0:i[o]},Ra=function(i,o){var l=Ps(i,o);return la(l)?l:void 0},ma=Ra(Rn.a,"Map"),Ca=Ra(Object,"create"),Oc=function(){this.__data__=Ca?Ca(null):{},this.size=0},Sc=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},Bf=Object.prototype.hasOwnProperty,$u=function(i){var o=this.__data__;if(Ca){var l=o[i];return l==="__lodash_hash_undefined__"?void 0:l}return Bf.call(o,i)?o[i]:void 0},Vf=Object.prototype.hasOwnProperty,xc=function(i){var o=this.__data__;return Ca?o[i]!==void 0:Vf.call(o,i)},tp=function(i,o){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Ca&&o===void 0?"__lodash_hash_undefined__":o,this};function jl(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}jl.prototype.clear=Oc,jl.prototype.delete=Sc,jl.prototype.get=$u,jl.prototype.has=xc,jl.prototype.set=tp;var Wf=jl,gl=function(){this.size=0,this.__data__={hash:new Wf,map:new(ma||Qe),string:new Wf}},Ac=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},Ns=function(i,o){var l=i.__data__;return Ac(o)?l[typeof o=="string"?"string":"hash"]:l.map},Tc=function(i){var o=Ns(this,i).delete(i);return this.size-=o?1:0,o},Mc=function(i){return Ns(this,i).get(i)},np=function(i){return Ns(this,i).has(i)},Gf=function(i,o){var l=Ns(this,i),s=l.size;return l.set(i,o),this.size+=l.size==s?0:1,this};function qr(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}qr.prototype.clear=gl,qr.prototype.delete=Tc,qr.prototype.get=Mc,qr.prototype.has=np,qr.prototype.set=Gf;var Wr=qr,zf=function(i,o){var l=this.__data__;if(l instanceof Qe){var s=l.__data__;if(!ma||s.length<199)return s.push([i,o]),this.size=++l.size,this;l=this.__data__=new Wr(s)}return l.set(i,o),this.size=l.size,this};function iu(i){var o=this.__data__=new Qe(i);this.size=o.size}iu.prototype.clear=je,iu.prototype.delete=ut,iu.prototype.get=rn,iu.prototype.has=Zt,iu.prototype.set=zf;var ya=iu,Rs=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Hf=function(i){return this.__data__.has(i)};function $o(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new Wr;++o<l;)this.add(i[o])}$o.prototype.add=$o.prototype.push=Rs,$o.prototype.has=Hf;var Il=$o,Ll=function(i,o){for(var l=-1,s=i==null?0:i.length;++l<s;)if(o(i[l],l,i))return!0;return!1},Cs=function(i,o){return i.has(o)},au=function(i,o,l,s,h,d){var m=1&l,w=i.length,T=o.length;if(w!=T&&!(m&&T>w))return!1;var R=d.get(i),F=d.get(o);if(R&&F)return R==o&&F==i;var Z=-1,te=!0,me=2&l?new Il:void 0;for(d.set(i,o),d.set(o,i);++Z<w;){var ke=i[Z],Ie=o[Z];if(s)var lt=m?s(Ie,ke,Z,o,i,d):s(ke,Ie,Z,i,o,d);if(lt!==void 0){if(lt)continue;te=!1;break}if(me){if(!Ll(o,function(it,bt){if(!Cs(me,bt)&&(ke===it||h(ke,it,l,s,d)))return me.push(bt)})){te=!1;break}}else if(ke!==Ie&&!h(ke,Ie,l,s,d)){te=!1;break}}return d.delete(i),d.delete(o),te},xi=Rn.a.Uint8Array,kc=function(i){var o=-1,l=Array(i.size);return i.forEach(function(s,h){l[++o]=[h,s]}),l},Xf=function(i){var o=-1,l=Array(i.size);return i.forEach(function(s){l[++o]=s}),l},Pc=Er?Er.prototype:void 0,$i=Pc?Pc.valueOf:void 0,ui=function(i,o,l,s,h,d,m){switch(l){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!d(new xi(i),new xi(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return le(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var w=kc;case"[object Set]":var T=1&s;if(w||(w=Xf),i.size!=o.size&&!T)return!1;var R=m.get(i);if(R)return R==o;s|=2,m.set(i,o);var F=au(w(i),w(o),s,h,d,m);return m.delete(i),F;case"[object Symbol]":if($i)return $i.call(i)==$i.call(o)}return!1},ga=function(i,o){for(var l=-1,s=o.length,h=i.length;++l<s;)i[h+l]=o[l];return i},lo=Array.isArray,rp=function(i,o,l){var s=o(i);return lo(i)?s:ga(s,l(i))},Ui=function(i,o){for(var l=-1,s=i==null?0:i.length,h=0,d=[];++l<s;){var m=i[l];o(m,l,i)&&(d[h++]=m)}return d},qf=function(){return[]},Yf=Object.prototype.propertyIsEnumerable,Bi=Object.getOwnPropertySymbols,Ji=Bi?function(i){return i==null?[]:(i=Object(i),Ui(Bi(i),function(o){return Yf.call(i,o)}))}:qf,Nc=function(i,o){for(var l=-1,s=Array(i);++l<i;)s[l]=o(l);return s},Fr=function(i){return i!=null&&typeof i=="object"},si=function(i){return Fr(i)&&eo(i)=="[object Arguments]"},Ds=Object.prototype,Kf=Ds.hasOwnProperty,Rc=Ds.propertyIsEnumerable,js=si(function(){return arguments}())?si:function(i){return Fr(i)&&Kf.call(i,"callee")&&!Rc.call(i,"callee")},Xa=js,Vi=r(48),lu=/^(?:0|[1-9]\d*)$/,Qi=function(i,o){var l=typeof i;return!!(o=o??9007199254740991)&&(l=="number"||l!="symbol"&&lu.test(i))&&i>-1&&i%1==0&&i<o},ba=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Nr={};Nr["[object Float32Array]"]=Nr["[object Float64Array]"]=Nr["[object Int8Array]"]=Nr["[object Int16Array]"]=Nr["[object Int32Array]"]=Nr["[object Uint8Array]"]=Nr["[object Uint8ClampedArray]"]=Nr["[object Uint16Array]"]=Nr["[object Uint32Array]"]=!0,Nr["[object Arguments]"]=Nr["[object Array]"]=Nr["[object ArrayBuffer]"]=Nr["[object Boolean]"]=Nr["[object DataView]"]=Nr["[object Date]"]=Nr["[object Error]"]=Nr["[object Function]"]=Nr["[object Map]"]=Nr["[object Number]"]=Nr["[object Object]"]=Nr["[object RegExp]"]=Nr["[object Set]"]=Nr["[object String]"]=Nr["[object WeakMap]"]=!1;var Wi=function(i){return Fr(i)&&ba(i.length)&&!!Nr[eo(i)]},Da=function(i){return function(o){return i(o)}},yi=r(49),uu=yi.a&&yi.a.isTypedArray,Fl=uu?Da(uu):Wi,ja=Object.prototype.hasOwnProperty,po=function(i,o){var l=lo(i),s=!l&&Xa(i),h=!l&&!s&&Object(Vi.a)(i),d=!l&&!s&&!h&&Fl(i),m=l||s||h||d,w=m?Nc(i.length,String):[],T=w.length;for(var R in i)!o&&!ja.call(i,R)||m&&(R=="length"||h&&(R=="offset"||R=="parent")||d&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Qi(R,T))||w.push(R);return w},Uu=Object.prototype,qa=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Uu)},_a=function(i,o){return function(l){return i(o(l))}},Cc=_a(Object.keys,Object),op=Object.prototype.hasOwnProperty,Dc=function(i){if(!qa(i))return Cc(i);var o=[];for(var l in Object(i))op.call(i,l)&&l!="constructor"&&o.push(l);return o},Ko=function(i){return i!=null&&ba(i.length)&&!Ha(i)},Bu=function(i){return Ko(i)?po(i):Dc(i)},Ya=function(i){return rp(i,Bu,Ji)},ni=Object.prototype.hasOwnProperty,jc=function(i,o,l,s,h,d){var m=1&l,w=Ya(i),T=w.length;if(T!=Ya(o).length&&!m)return!1;for(var R=T;R--;){var F=w[R];if(!(m?F in o:ni.call(o,F)))return!1}var Z=d.get(i),te=d.get(o);if(Z&&te)return Z==o&&te==i;var me=!0;d.set(i,o),d.set(o,i);for(var ke=m;++R<T;){var Ie=i[F=w[R]],lt=o[F];if(s)var it=m?s(lt,Ie,F,o,i,d):s(Ie,lt,F,i,o,d);if(!(it===void 0?Ie===lt||h(Ie,lt,l,s,d):it)){me=!1;break}ke||(ke=F=="constructor")}if(me&&!ke){var bt=i.constructor,Bt=o.constructor;bt==Bt||!("constructor"in i)||!("constructor"in o)||typeof bt=="function"&&bt instanceof bt&&typeof Bt=="function"&&Bt instanceof Bt||(me=!1)}return d.delete(i),d.delete(o),me},ua=Ra(Rn.a,"DataView"),wa=Ra(Rn.a,"Promise"),Is=Ra(Rn.a,"Set"),Gi=Ra(Rn.a,"WeakMap"),ea="[object Map]",ci="[object Promise]",sa="[object Set]",Ii="[object WeakMap]",dt="[object DataView]",Ft=va(ua),$t=va(ma),mn=va(wa),fr=va(Is),Rr=va(Gi),ho=eo;(ua&&ho(new ua(new ArrayBuffer(1)))!=dt||ma&&ho(new ma)!=ea||wa&&ho(wa.resolve())!=ci||Is&&ho(new Is)!=sa||Gi&&ho(new Gi)!=Ii)&&(ho=function(i){var o=eo(i),l=o=="[object Object]"?i.constructor:void 0,s=l?va(l):"";if(s)switch(s){case Ft:return dt;case $t:return ea;case mn:return ci;case fr:return sa;case Rr:return Ii}return o});var P=ho,N="[object Arguments]",G="[object Array]",ae="[object Object]",ge=Object.prototype.hasOwnProperty,Ye=function(i,o,l,s,h,d){var m=lo(i),w=lo(o),T=m?G:P(i),R=w?G:P(o),F=(T=T==N?ae:T)==ae,Z=(R=R==N?ae:R)==ae,te=T==R;if(te&&Object(Vi.a)(i)){if(!Object(Vi.a)(o))return!1;m=!0,F=!1}if(te&&!F)return d||(d=new ya),m||Fl(i)?au(i,o,l,s,h,d):ui(i,o,T,l,s,h,d);if(!(1&l)){var me=F&&ge.call(i,"__wrapped__"),ke=Z&&ge.call(o,"__wrapped__");if(me||ke){var Ie=me?i.value():i,lt=ke?o.value():o;return d||(d=new ya),h(Ie,lt,l,s,d)}}return!!te&&(d||(d=new ya),jc(i,o,l,s,h,d))},gt=function i(o,l,s,h,d){return o===l||(o==null||l==null||!Fr(o)&&!Fr(l)?o!=o&&l!=l:Ye(o,l,s,h,i,d))},zt=function(i,o,l,s){var h=l.length,d=h;if(i==null)return!d;for(i=Object(i);h--;){var m=l[h];if(m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++h<d;){var w=(m=l[h])[0],T=i[w],R=m[1];if(m[2]){if(T===void 0&&!(w in i))return!1}else{var F=new ya,Z;if(!(Z===void 0?gt(R,T,3,s,F):Z))return!1}}return!0},En=function(i){return i==i&&!Dr(i)},_r=function(i){for(var o=Bu(i),l=o.length;l--;){var s=o[l],h=i[s];o[l]=[s,h,En(h)]}return o},fn=function(i,o){return function(l){return l!=null&&l[i]===o&&(o!==void 0||i in Object(l))}},Gr=function(i){var o=_r(i);return o.length==1&&o[0][2]?fn(o[0][0],o[0][1]):function(l){return l===i||zt(l,i,o)}},mr=function(i){return typeof i=="symbol"||Fr(i)&&eo(i)=="[object Symbol]"},Ir=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/,Ao=function(i,o){if(lo(i))return!1;var l=typeof i;return!(l!="number"&&l!="symbol"&&l!="boolean"&&i!=null&&!mr(i))||ca.test(i)||!Ir.test(i)||o!=null&&i in Object(o)};function ta(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var l=function(){var s=arguments,h=o?o.apply(this,s):s[0],d=l.cache;if(d.has(h))return d.get(h);var m=i.apply(this,s);return l.cache=d.set(h,m)||d,m};return l.cache=new(ta.Cache||Wr),l}ta.Cache=Wr;var bl=ta,_l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$l=/\\(\\)?/g,su=function(i){var o=bl(i,function(s){return l.size===500&&l.clear(),s}),l=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(_l,function(l,s,h,d){o.push(h?d.replace($l,"$1"):s||l)}),o}),Ka=Er?Er.prototype:void 0,cu=Ka?Ka.toString:void 0,ri=function i(o){if(typeof o=="string")return o;if(lo(o))return _n(o,i)+"";if(mr(o))return cu?cu.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l},Ul=function(i){return i==null?"":ri(i)},wl=function(i,o){return lo(i)?i:Ao(i,o)?[i]:su(Ul(i))},Za=function(i){if(typeof i=="string"||mr(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ja=function(i,o){for(var l=0,s=(o=wl(o,i)).length;i!=null&&l<s;)i=i[Za(o[l++])];return l&&l==s?i:void 0},Vu=function(i,o,l){var s=i==null?void 0:Ja(i,o);return s===void 0?l:s},yh=function(i,o){return i!=null&&o in Object(i)},gh=function(i,o,l){for(var s=-1,h=(o=wl(o,i)).length,d=!1;++s<h;){var m=Za(o[s]);if(!(d=i!=null&&l(i,m)))break;i=i[m]}return d||++s!=h?d:!!(h=i==null?0:i.length)&&ba(h)&&Qi(m,h)&&(lo(i)||Xa(i))},ip=function(i,o){return i!=null&&gh(i,o,yh)},Ic=function(i,o){return Ao(i)&&En(o)?fn(Za(i),o):function(l){var s=Vu(l,i);return s===void 0&&s===o?ip(l,i):gt(o,s,3)}},Wu=function(i){return i},Zf=function(i){return function(o){return o==null?void 0:o[i]}},bh=function(i){return function(o){return Ja(o,i)}},Gu=function(i){return Ao(i)?Zf(Za(i)):bh(i)},Lc=function(i){return typeof i=="function"?i:i==null?Wu:typeof i=="object"?lo(i)?Ic(i[0],i[1]):Gr(i):Gu(i)},Jf=function(i){return function(o,l,s){for(var h=-1,d=Object(o),m=s(o),w=m.length;w--;){var T=m[++h];if(l(d[T],T,d)===!1)break}return o}}(),Uo=function(i,o){return function(l,s){if(l==null)return l;if(!Ko(l))return i(l,s);for(var h=l.length,d=-1,m=Object(l);++d<h&&s(m[d],d,m)!==!1;);return l}}(function(i,o){return i&&Jf(i,o,Bu)}),zi=function(i,o){var l=-1,s=Ko(i)?Array(i.length):[];return Uo(i,function(h,d,m){s[++l]=o(h,d,m)}),s},Qf=function(i,o){return(lo(i)?_n:zi)(i,Lc(o))};Object(c.n)({isolateGlobalState:!0});var ed=function(){try{var i=Ra(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Ls=function(i,o,l){o=="__proto__"&&ed?ed(i,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[o]=l},Zv=Object.prototype.hasOwnProperty,Fs=function(i,o,l){var s=i[o];Zv.call(i,o)&&le(s,l)&&(l!==void 0||o in i)||Ls(i,o,l)},$s=function(i,o,l,s){var h=!l;l||(l={});for(var d=-1,m=o.length;++d<m;){var w=o[d],T=void 0;T===void 0&&(T=i[w]),h?Ls(l,w,T):Fs(l,w,T)}return l},Fc=function(i,o,l){switch(l.length){case 0:return i.call(o);case 1:return i.call(o,l[0]);case 2:return i.call(o,l[0],l[1]);case 3:return i.call(o,l[0],l[1],l[2])}return i.apply(o,l)},zu=Math.max,fu=function(i,o,l){return o=zu(o===void 0?i.length-1:o,0),function(){for(var s=arguments,h=-1,d=zu(s.length-o,0),m=Array(d);++h<d;)m[h]=s[o+h];h=-1;for(var w=Array(o+1);++h<o;)w[h]=s[h];return w[o]=l(m),Fc(i,this,w)}},Us=function(i){return function(){return i}},$c=ed?function(i,o){return ed(i,"toString",{configurable:!0,enumerable:!1,value:Us(o),writable:!0})}:Wu,du=Date.now,Jv=function(i){var o=0,l=0;return function(){var s=du(),h=16-(s-l);if(l=s,h>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},Uc=Jv($c),Qv=function(i,o){return Uc(fu(i,o,Wu),i+"")},em=function(i,o,l){if(!Dr(l))return!1;var s=typeof o;return!!(s=="number"?Ko(l)&&Qi(o,l.length):s=="string"&&o in l)&&le(l[o],i)},_h=function(i){return Qv(function(o,l){var s=-1,h=l.length,d=h>1?l[h-1]:void 0,m=h>2?l[2]:void 0;for(d=i.length>3&&typeof d=="function"?(h--,d):void 0,m&&em(l[0],l[1],m)&&(d=h<3?void 0:d,h=1),o=Object(o);++s<h;){var w=l[s];w&&i(o,w,s,d)}return o})},td=Object.prototype.hasOwnProperty,Li=_h(function(i,o){if(qa(o)||Ko(o))$s(o,Bu(o),i);else for(var l in o)td.call(o,l)&&Fs(i,l,o[l])}),wh=function(i,o,l,s){if(!Dr(i))return i;for(var h=-1,d=(o=wl(o,i)).length,m=d-1,w=i;w!=null&&++h<d;){var T=Za(o[h]),R=l;if(T==="__proto__"||T==="constructor"||T==="prototype")return i;if(h!=m){var F=w[T];(R=void 0)==void 0&&(R=Dr(F)?F:Qi(o[h+1])?[]:{})}Fs(w,T,R),w=w[T]}return i},ue=function(i,o,l){for(var s=-1,h=o.length,d={};++s<h;){var m=o[s],w=Ja(i,m);l(w,m)&&wh(d,wl(m,i),w)}return d},Hu=function(i,o){return ue(i,o,function(l,s){return ip(i,s)})},Bl=Er?Er.isConcatSpreadable:void 0,Ia=function(i){return lo(i)||Xa(i)||!!(Bl&&i&&i[Bl])},Cr=function(o,l,s,h,d){var m=-1,w=o.length;for(s||(s=Ia),d||(d=[]);++m<w;){var T=o[m];s(T)?ga(d,T):d[d.length]=T}return d},Ai=function(i){return i!=null&&i.length?Cr(i):[]},$r,Qa,Vl,Ea,nd,rd,ap,Eh,Wl,Bo,Bs,lp,Gl,el,Bc,pu,Oa,up,sp,tl=function(i){return Uc(fu(i,void 0,Ai),i+"")}(function(i,o){return i==null?{}:Hu(i,o)});function wo(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Oh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function cp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Vo(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Yr,oi,xr,co,Cn,fo,Vc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},El=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],od=(Qa=Vo(($r=function(){function i(s){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),wo(this,"isSilentMode",Qa,this),wo(this,"stopZoomGraph",Vl,this),wo(this,"stopScrollGraph",Ea,this),wo(this,"stopMoveGraph",nd,this),wo(this,"adjustEdge",rd,this),wo(this,"adjustEdgeMiddle",ap,this),wo(this,"adjustEdgeStartAndEnd",Eh,this),wo(this,"adjustNodePosition",Wl,this),wo(this,"hideAnchors",Bo,this),wo(this,"allowRotation",Bs,this),wo(this,"hoverOutline",lp,this),wo(this,"nodeSelectedOutline",Gl,this),wo(this,"edgeSelectedOutline",el,this),wo(this,"nodeTextEdit",Bc,this),wo(this,"edgeTextEdit",pu,this),wo(this,"nodeTextDraggable",Oa,this),wo(this,"edgeTextDraggable",up,this),wo(this,"autoExpand",sp,this),cp(this,"multipleSelectKey",""),cp(this,"defaultConfig",{}),Li(this,this.getConfigDetail(s))}var o,l;return o=i,(l=[{key:"updateEditConfig",value:function(s){var h=this.getConfigDetail(s);Li(this,h)}},{key:"getConfigDetail",value:function(s){var h=s.isSilentMode,d=s.textEdit,m={};if(h===!1&&Li(m,this.defaultConfig),h===!0&&h!==this.isSilentMode){var w=tl(Vc,El);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Li(m,w)}d===!1&&Li(m,{nodeTextEdit:!1,edgeTextEdit:!1});var T=tl(s,El);return Li(m,T)}},{key:"getConfig",value:function(){return tl(this,El)}}])&&Oh(o.prototype,l),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vl=Vo($r.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ea=Vo($r.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nd=Vo($r.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rd=Vo($r.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ap=Vo($r.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Eh=Vo($r.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wl=Vo($r.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bo=Vo($r.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bs=Vo($r.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lp=Vo($r.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gl=Vo($r.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),el=Vo($r.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bc=Vo($r.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),pu=Vo($r.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Oa=Vo($r.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),up=Vo($r.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sp=Vo($r.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vo($r.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor($r.prototype,"updateEditConfig"),$r.prototype),$r);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Yr||(Yr={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(oi||(oi={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(xr||(xr={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(co||(co={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(Cn||(Cn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(fo||(fo={}));var To,No,fp,dp,Wc,Hi,id,Vs,La;function hu(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return zl(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zl(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Fa(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Sh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ol(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Sa(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(To||(To={}));var pp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},hp=(No=function(){function i(s,h){(function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")})(this,i),Ol(this,"MINI_SCALE_SIZE",.2),Ol(this,"MAX_SCALE_SIZE",16),Fa(this,"SCALE_X",fp,this),Fa(this,"SKEW_Y",dp,this),Fa(this,"SKEW_X",Wc,this),Fa(this,"SCALE_Y",Hi,this),Fa(this,"TRANSLATE_X",id,this),Fa(this,"TRANSLATE_Y",Vs,this),Fa(this,"ZOOM_SIZE",La,this),Ol(this,"eventCenter",void 0),Ol(this,"translateLimitMinX",void 0),Ol(this,"translateLimitMinY",void 0),Ol(this,"translateLimitMaxX",void 0),Ol(this,"translateLimitMaxY",void 0),this.eventCenter=s;var d=h.stopMoveGraph,m=d!==void 0&&d;this.updateTranslateLimits(m)}var o,l;return o=i,l=[{key:"setZoomMiniSize",value:function(s){this.MINI_SCALE_SIZE=s}},{key:"setZoomMaxSize",value:function(s){this.MAX_SCALE_SIZE=s}},{key:"HtmlPointToCanvasPoint",value:function(s){var h=hu(s,2),d=h[0],m=h[1];return[(d-this.TRANSLATE_X)/this.SCALE_X,(m-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(s){var h=hu(s,2),d=h[0],m=h[1];return[d*this.SCALE_X+this.TRANSLATE_X,m*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(s,h,d){var m=hu(s,2),w=m[0],T=m[1];return[w+h/this.SCALE_X,T+d/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(s,h){return[s/this.SCALE_X,h/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var s=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(s,")")}}},{key:"zoom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],h=arguments.length>1?arguments[1]:void 0,d=this.SCALE_X,m=this.SCALE_Y;return s===!0?(d+=this.ZOOM_SIZE,m+=this.ZOOM_SIZE):s===!1?(d-=this.ZOOM_SIZE,m-=this.ZOOM_SIZE):typeof s=="number"&&(d=s,m=s),d<this.MINI_SCALE_SIZE||d>this.MAX_SCALE_SIZE||(h&&(this.TRANSLATE_X-=(d-this.SCALE_X)*h[0],this.TRANSLATE_Y-=(m-this.SCALE_Y)*h[1]),this.SCALE_X=d,this.SCALE_Y=m,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(s){this.eventCenter.emit(Cn.GRAPH_TRANSFORM,{type:s,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(s,h){this.TRANSLATE_X+s<=this.translateLimitMaxX&&this.TRANSLATE_X+s>=this.translateLimitMinX&&(this.TRANSLATE_X+=s),this.TRANSLATE_Y+h<=this.translateLimitMaxY&&this.TRANSLATE_Y+h>=this.translateLimitMinY&&(this.TRANSLATE_Y+=h),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(s,h,d,m){var w=hu(this.CanvasPointToHtmlPoint([s,h]),2),T=d/2-w[0],R=m/2-w[1];this.TRANSLATE_X+=T,this.TRANSLATE_Y+=R,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(s){var h=hu(Array.isArray(s)&&s.length===4?s:pp[s.toString()],4);this.translateLimitMinX=h[0],this.translateLimitMinY=h[1],this.translateLimitMaxX=h[2],this.translateLimitMaxY=h[3]}}],l&&Sh(o.prototype,l),i}(),fp=Sa(No.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),dp=Sa(No.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wc=Sa(No.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hi=Sa(No.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),id=Sa(No.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vs=Sa(No.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),La=Sa(No.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Sa(No.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"zoom"),No.prototype),Sa(No.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"resetZoom"),No.prototype),Sa(No.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"translate"),No.prototype),Sa(No.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"focusOn"),No.prototype),No),ad=function(i,o){for(var l=-1,s=i==null?0:i.length;++l<s&&o(i[l],l,i)!==!1;);return i},xh=function(i){var o=[];if(i!=null)for(var l in Object(i))o.push(l);return o},Ah=Object.prototype.hasOwnProperty,Th=function(i){if(!Dr(i))return xh(i);var o=qa(i),l=[];for(var s in i)(s!="constructor"||!o&&Ah.call(i,s))&&l.push(s);return l},ld=function(i){return Ko(i)?po(i,!0):Th(i)},vp=r(107),mp=function(i,o){var l=-1,s=i.length;for(o||(o=Array(s));++l<s;)o[l]=i[l];return o},Gc=_a(Object.getPrototypeOf,Object),Ar=Object.prototype.hasOwnProperty,tm=function(i){var o=i.length,l=new i.constructor(o);return o&&typeof i[0]=="string"&&Ar.call(i,"index")&&(l.index=i.index,l.input=i.input),l},yp=function(i){var o=new i.constructor(i.byteLength);return new xi(o).set(new xi(i)),o},Xu=function(i,o){var l=yp(i.buffer);return new i.constructor(l,i.byteOffset,i.byteLength)},zc=/\w*$/,nm=function(i){var o=new i.constructor(i.source,zc.exec(i));return o.lastIndex=i.lastIndex,o},Mh=Er?Er.prototype:void 0,xa=Mh?Mh.valueOf:void 0,rm=function(i){return xa?Object(xa.call(i)):{}},Hc=function(i,o){var l=o?yp(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)},ud=function(i,o,l){var s=i.constructor;switch(o){case"[object ArrayBuffer]":return yp(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return Xu(i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hc(i,l);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return nm(i);case"[object Symbol]":return rm(i)}},gp=Object.create,kh=function(){function i(){}return function(o){if(!Dr(o))return{};if(gp)return gp(o);i.prototype=o;var l=new i;return i.prototype=void 0,l}}(),fa=function(i){return typeof i.constructor!="function"||qa(i)?{}:kh(Gc(i))},vu=function(i){return Fr(i)&&P(i)=="[object Map]"},sd=yi.a&&yi.a.isMap,qu=sd?Da(sd):vu,cd=function(i){return Fr(i)&&P(i)=="[object Set]"},bp=yi.a&&yi.a.isSet,fd=bp?Da(bp):cd,Xc="[object Arguments]",dd="[object Function]",pd="[object Object]",zr={};zr[Xc]=zr["[object Array]"]=zr["[object ArrayBuffer]"]=zr["[object DataView]"]=zr["[object Boolean]"]=zr["[object Date]"]=zr["[object Float32Array]"]=zr["[object Float64Array]"]=zr["[object Int8Array]"]=zr["[object Int16Array]"]=zr["[object Int32Array]"]=zr["[object Map]"]=zr["[object Number]"]=zr["[object Object]"]=zr["[object RegExp]"]=zr["[object Set]"]=zr["[object String]"]=zr["[object Symbol]"]=zr["[object Uint8Array]"]=zr["[object Uint8ClampedArray]"]=zr["[object Uint16Array]"]=zr["[object Uint32Array]"]=!0,zr["[object Error]"]=zr[dd]=zr["[object WeakMap]"]=!1;var om=function i(o,l,s,h,d,m){var w,T=1&l;if(w!==void 0)return w;if(!Dr(o))return o;var R=lo(o);if(R)w=tm(o);else{var F=P(o),Z=F==dd||F=="[object GeneratorFunction]";if(Object(Vi.a)(o))return Object(vp.a)(o,T);if(F==pd||F==Xc||Z&&!d)w=Z?{}:fa(o);else{if(!zr[F])return d?o:{};w=ud(o,F,T)}}m||(m=new ya);var te=m.get(o);if(te)return te;m.set(o,w),fd(o)?o.forEach(function(ke){w.add(i(ke,l,s,ke,o,m))}):qu(o)&&o.forEach(function(ke,Ie){w.set(Ie,i(ke,l,s,Ie,o,m))});var me=R?void 0:Ya(o);return ad(me||o,function(ke,Ie){me&&(ke=o[Ie=ke]),Fs(w,Ie,i(ke,l,s,Ie,o,m))}),w},to=function(i){return om(i,5)},hd=function(i,o,l){(l!==void 0&&!le(i[o],l)||l===void 0&&!(o in i))&&Ls(i,o,l)},Ph=function(i){return Fr(i)&&Ko(i)},Yu=Function.prototype,Nh=Object.prototype,Ws=Yu.toString,Rh=Nh.hasOwnProperty,Ku=Ws.call(Object),gi=function(i){if(!Fr(i)||eo(i)!="[object Object]")return!1;var o=Gc(i);if(o===null)return!0;var l=Rh.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Ws.call(l)==Ku},nl=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Hl=function(i){return $s(i,ld(i))},Zu=function(i,o,l,s,h,d,m){var w=nl(i,l),T=nl(o,l),R=m.get(T);if(R)hd(i,l,R);else{var F=void 0,Z=F===void 0;if(Z){var te=lo(T),me=!te&&Object(Vi.a)(T),ke=!te&&!me&&Fl(T);F=T,te||me||ke?lo(w)?F=w:Ph(w)?F=mp(w):me?(Z=!1,F=Object(vp.a)(T,!0)):ke?(Z=!1,F=Hc(T,!0)):F=[]:gi(T)||Xa(T)?(F=w,Xa(w)?F=Hl(w):Dr(w)&&!Ha(w)||(F=fa(T))):Z=!1}Z&&(m.set(T,F),h(F,T,s,d,m),m.delete(T)),hd(i,l,F)}},Ju=function i(o,l,s,h,d){o!==l&&Jf(l,function(m,w){if(d||(d=new ya),Dr(m))Zu(o,l,w,s,i,h,d);else{var T=void 0;T===void 0&&(T=m),hd(o,w,T)}},ld)},Qu=_h(function(i,o,l){Ju(i,o,l)}),vd={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Xl=function(i){var o=to(vd);return i&&(o=Qu(o,i)),o};r(82),r(166);function es(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}var md=function(){function i(){var s,h,d;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),d={},(h="_events")in(s=this)?Object.defineProperty(s,h,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[h]=d}var o,l;return o=i,(l=[{key:"on",value:function(s,h,d){var m=this;return s==null||s.split(",").forEach(function(w){w=w.trim(),m._events[w]||(m._events[w]=[]),m._events[w].push({callback:h,once:!!d})}),this}},{key:"once",value:function(s,h){var d=this;s==null||s.split(",").forEach(function(m){return m=m.trim(),d.on(m,h,!0)})}},{key:"emit",value:function(s,h){var d=this;s==null||s.split(",").forEach(function(m){var w=d._events[m]||[],T=d._events["*"]||[],R=function(F){for(var Z=F.length,te=0;te<Z;te++)if(F[te]){var me=F[te],ke=me.callback;me.once&&(F.splice(te,1),F.length===0&&delete d._events[m],Z--,te--),ke.apply(d,[h])}};R(w),R(T)})}},{key:"off",value:function(s,h){var d=this;return s||(this._events={}),s.split(",").forEach(function(m){if(h){for(var w=d._events[m]||[],T=w.length,R=0;R<T;R++)w[R].callback===h&&(w.splice(R,1),T--,R--);w.length===0&&delete d._events[m]}else delete d._events[m]}),this}},{key:"getEvents",value:function(){return this._events}}])&&es(o.prototype,l),i}();function rl(i,o){return o*Math.round(i/o)||i}function qc(i,o){return i%o}function Yc(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return Gs(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Gs(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gs(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var zs=function(i,o,l){var s=Yc(i,2),h=s[0],d=s[1],m=Yc(o,2),w=m[0],T=m[1],R=Yc(l,2),F=R[0],Z=R[1];return h>w&&h<F&&d>T&&d<Z},Hs=function(i,o){var l=!1;switch(o.multipleSelectKey){case"meta":l=i.metaKey;break;case"alt":l=i.altKey;break;case"shift":l=i.shiftKey;break;case"ctrl":l=i.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var yd=function(i){return function(o,l,s){var h=Object(o);if(!Ko(o)){var d=Lc(l);o=Bu(o),l=function(w){return d(h[w],w,h)}}var m=i(o,l,s);return m>-1?h[d?o[m]:m]:void 0}},Xs=function(i,o,l,s){for(var h=i.length,d=l+-1;++d<h;)if(o(i[d],d,i))return d;return-1},_p=/\s/,gd=function(i){for(var o=i.length;o--&&_p.test(i.charAt(o)););return o},Ch=/^\s+/,wp=function(i){return i&&i.slice(0,gd(i)+1).replace(Ch,"")},ol=/^[-+]0x[0-9a-f]+$/i,Ep=/^0b[01]+$/i,Op=/^0o[0-7]+$/i,Sp=parseInt,qs=function(i){if(typeof i=="number")return i;if(mr(i))return NaN;if(Dr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=Dr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=wp(i);var l=Ep.test(i);return l||Op.test(i)?Sp(i.slice(2),l?2:8):ol.test(i)?NaN:+i},Sl=1/0,Kc=function(i){return i?(i=qs(i))===Sl||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},bd=function(i){var o=Kc(i),l=o%1;return o==o?l?o-l:o:0},_d=Math.max,mu,yu=yd(function(i,o,l){var s=i==null?0:i.length;if(!s)return-1;var h=l==null?0:bd(l);return h<0&&(h=_d(s+h,0)),Xs(i,Lc(o),h)}),er=new Uint8Array(16);function Ys(){if(!mu&&!(mu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mu(er)}for(var Zc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,il=function(i){return typeof i=="string"&&Zc.test(i)},fi=[],ts=0;ts<256;++ts)fi.push((ts+256).toString(16).substr(1));var Ro=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(fi[i[o+0]]+fi[i[o+1]]+fi[i[o+2]]+fi[i[o+3]]+"-"+fi[i[o+4]]+fi[i[o+5]]+"-"+fi[i[o+6]]+fi[i[o+7]]+"-"+fi[i[o+8]]+fi[i[o+9]]+"-"+fi[i[o+10]]+fi[i[o+11]]+fi[i[o+12]]+fi[i[o+13]]+fi[i[o+14]]+fi[i[o+15]]).toLowerCase();if(!il(l))throw TypeError("Stringified UUID is invalid");return l},gu=function(i,o,l){var s=(i=i||{}).random||(i.rng||Ys)();return s[6]=15&s[6]|64,s[8]=63&s[8]|128,Ro(s)},na=function(){return gu()},Jc=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=i.nodes.reduce(function(s,h){return s[h.id]=o+gu(),h.id=s[h.id],s},{});return i.edges.forEach(function(s){s.id=o+gu(),s.sourceNodeId=l[s.sourceNodeId],s.targetNodeId=l[s.targetNodeId]}),i},Fi=(r(105),r(127),r(207),function(i,o,l){var s=i.x,h=i.y,d=o.x,m=o.y,w=l.x,T=l.y,R=(T-m)/(w-d),F=m-R*d;return s>=d&&s<=w&&h>=m&&h<=T&&Math.abs(h-R*s+F)<Number.EPSILON});function Wo(i){return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Wo(i)}function xl(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Al(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xl(Object(l),!0).forEach(function(s){wd(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xl(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function wd(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var kt,ns,Qc,ef,bu,rs,Ed,xp,os,tf,Od,Ap,Tl,Tp,al,_u,Sd,Dh,jh,Ih,Mp,xd=function(i){return i.anchors},nf=function(i,o){for(var l,s=o.nodes,h=s.length-1;h>=0;h--){var d=s[h];if(im(i,d)){var m=d.getTargetAnchor(i);if(m){var w={node:d,anchorIndex:m.index,anchor:m.anchor};l&&!Lh(d,l.node,o)||(l=w)}}}return l},Lh=function(i,o,l){return i.zIndex>o.zIndex||l.nodesMap[i.id].index>l.nodesMap[o.id].index},ll=function(i,o,l,s){return Math.hypot(i-l,o-s)},wu=function(i,o){var l=!1,s=Eo(o);return i.x>=s.minX-0&&i.x<=s.maxX+0&&i.y>=s.minY-0&&i.y<=s.maxY+0&&(l=!0),l},im=function(i,o){var l=!1,s=Eo(o);return i.x>=s.minX-5&&i.x<=s.maxX+5&&i.y>=s.minY-5&&i.y<=s.maxY+5&&(l=!0),l},Eo=function(i){var o=i.x,l=i.y,s=i.width,h=i.height;return{minX:o-s/2,minY:l-h/2,maxX:o+s/2,maxY:l+h/2,x:o,y:l,width:s,height:h,centerX:o,centerY:l}},rf=function(i,o,l){var s,h=function(m){var w=m,T=w.x,R=w.y,F=w.width,Z=w.height,te=w.radius;return[{x:T-F/2+te,y:R-Z/2+te,r:te},{x:T+F/2-te,y:R-Z/2+te,r:te},{x:T-F/2+te,y:R+Z/2-te,r:te},{x:T+F/2-te,y:R+Z/2-te,r:te}]}(l),d=Number.MAX_SAFE_INTEGER;return h.forEach(function(m){var w=ll(i.x,i.y,m.x,m.y);w<d&&(d=w,s=m)}),is(i,o,s)},is=function(i,o,l){var s,h=l,d=h.x,m=h.y,w=h.r;if(o===fo.HORIZONTAL){var T=d-Math.sqrt(w*w-(i.y-m)*(i.y-m)),R=d+Math.sqrt(w*w-(i.y-m)*(i.y-m));s={x:Math.abs(T-i.x)<Math.abs(R-i.x)?T:R,y:i.y}}else if(o===fo.VERTICAL){var F=m-Math.sqrt(w*w-(i.x-d)*(i.x-d)),Z=m+Math.sqrt(w*w-(i.x-d)*(i.x-d)),te=Math.abs(F-i.y)<Math.abs(Z-i.y)?F:Z;s={x:i.x,y:te}}return s},of=function(i,o){var l=o,s=!1,h=l.x-l.width/2+l.radius,d=l.x+l.width/2-l.radius,m=l.y-l.height/2+l.radius,w=l.y+l.height/2-l.radius,T=l.x,R=l.y,F=l.width,Z=l.height;return i.y===R+Z/2||i.y===R-Z/2?s=i.x>h&&i.x<d:i.x!==T+F/2&&i.x!==T-F/2||(s=i.y>m&&i.y<w),s},Ks=function(i,o,l){var s,h=l,d=h.x,m=h.y,w=h.rx,T=h.ry;if(o===fo.HORIZONTAL){var R=d-Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T)),F=d+Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T));s={x:Math.abs(R-i.x)<Math.abs(F-i.x)?R:F,y:i.y}}else if(o===fo.VERTICAL){var Z=m-Math.sqrt(T*T-(i.x-d)*(i.x-d)*T*T/(w*w)),te=m+Math.sqrt(T*T-(i.x-d)*(i.x-d)*T*T/(w*w)),me=Math.abs(Z-i.y)<Math.abs(te-i.y)?Z:te;s={x:i.x,y:me}}return s},af=function(i,o,l){for(var s,h=l.pointsPosition,d=Number.MAX_SAFE_INTEGER,m=[],w=0;w<h.length;w++)m.push({start:h[w],end:h[(w+1)%h.length]});return m.forEach(function(T){var R=T.start,F=T.end,Z=R,te=F;R.x>F.x&&(Z=F,te=R);var me={x:i.x,y:i.y};if(Z.x===te.x&&o===fo.HORIZONTAL&&(me={x:Z.x,y:i.y}),Z.y===te.y&&o===fo.VERTICAL&&(me={x:i.x,y:Z.y}),Z.x!==te.x&&Z.y!==te.y){var ke=(te.y-Z.y)/(te.x-Z.x),Ie=(Z.x*te.y-te.x*Z.y)/(Z.x-te.x);o===fo.HORIZONTAL?me={x:(i.y-Ie)/ke,y:i.y}:o===fo.VERTICAL&&(me={x:i.x,y:ke*i.x+Ie})}if(Fi(me,R,F)){var lt=ll(me.x,me.y,i.x,i.y);lt<d&&(d=lt,s=me)}}),s},lf=function(i,o,l,s){var h=i.x,d=i.y;return o.x>i.x?h=i.x+l/2:o.x<i.x&&(h=i.x-l/2),o.y>i.y?d=i.y+s/2:o.y<i.y&&(d=i.y-s/2),{x:h,y:d}},uf=function(i){var o=i.rows,l=i.style,s=i.rowsLength,h=i.className,d=document.createElement("div");d.style.fontSize=l.fontSize,d.style.width=l.width,d.className=h,d.style.lineHeight=l.lineHeight,d.style.padding=l.padding,l.fontFamily&&(d.style.fontFamily=l.fontFamily),s>1?o.forEach(function(w){var T=document.createElement("div");T.textContent=w,d.appendChild(T)}):d.textContent=o,document.body.appendChild(d);var m=d.clientHeight;return document.body.removeChild(d),m},as=function(i){var o=i.rows,l=i.rowsLength,s=i.fontSize,h=0;return o&&o.forEach(function(d){var m=Io(d);h=m>h?m:h}),{width:Math.ceil(h/2)*s+s/4,height:l*(s+2)+s/4}},ql=function(i){return Wo(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},bi=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Ad=1e3,sf=999,ls=function(){return++Ad};function Zs(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ti(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Zs(Object(l),!0).forEach(function(s){Xi(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Zs(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Mo(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function cf(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Xi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function $n(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Td=(kt=function(){function i(s,h){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Xi(this,"id",""),Mo(this,"type",ns,this),Mo(this,"sourceNodeId",Qc,this),Mo(this,"targetNodeId",ef,this),Mo(this,"startPoint",bu,this),Mo(this,"endPoint",rs,this),Mo(this,"text",Ed,this),Mo(this,"properties",xp,this),Mo(this,"points",os,this),Mo(this,"pointsList",tf,this),Mo(this,"isSelected",Od,this),Mo(this,"isHovered",Ap,this),Mo(this,"isHitable",Tl,this),Mo(this,"draggable",Tp,this),Mo(this,"visible",al,this),Xi(this,"virtual",!1),Mo(this,"isAnimation",_u,this),Mo(this,"isShowAdjustPoint",Sd,this),Xi(this,"graphModel",void 0),Mo(this,"zIndex",Dh,this),Xi(this,"BaseType",co.EDGE),Xi(this,"modelType",xr.EDGE),Mo(this,"state",jh,this),Xi(this,"additionStateData",void 0),Xi(this,"sourceAnchorId",""),Xi(this,"targetAnchorId",""),Xi(this,"menu",void 0),Xi(this,"customTextPosition",!1),Mo(this,"style",Ih,this),Mo(this,"arrowConfig",Mp,this),this.graphModel=h,this.initEdgeData(s),this.setAttributes()}var o,l;return o=i,l=[{key:"initEdgeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var h=this.graphModel.idGenerator,d=h&&h(s.type),m=this.createId();s.id=m||d||na()}this.arrowConfig.markerEnd="url(#marker-end-".concat(s.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(s.id,")");var w=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=w,Li(this,Dn(s)),this.graphModel.overlapMode===To.INCREASE&&(this.zIndex=s.zIndex||ls()),this.setAnchors(),this.initPoints(),this.formatText(s)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ti(Ti({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ti({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.edgeText;return to(s)}},{key:"getEdgeAnimationStyle",value:function(){var s=this.graphModel.theme.edgeAnimation;return to(s)}},{key:"getArrowStyle",value:function(){var s=this.getEdgeStyle(),h=this.getEdgeAnimationStyle(),d=this.graphModel.theme.arrow,m=this.isAnimation?h.stroke:s.stroke;return Ti(Ti({},s),{},{fill:m,stroke:m},d)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return to(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var s,h;return(s=this.graphModel)===null||s===void 0||(h=s.nodesMap[this.sourceNodeId])===null||h===void 0?void 0:h.model}},{key:"targetNode",get:function(){var s,h;return(s=this.graphModel)===null||s===void 0||(h=s.nodesMap[this.targetNodeId])===null||h===void 0?void 0:h.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(s,h,d){var m,w,T=xd(s);return d&&(m=yu(T,function(R){return R.id===d}))||T.forEach(function(R){var F=hr(R,h);(w===void 0||F<w)&&(w=F,m=R)}),m}},{key:"getEndAnchor",value:function(s,h){var d,m,w=this,T=xd(s);return h&&(d=yu(T,function(R){return R.id===h}))||T.forEach(function(R){var F=hr(R,w.startPoint);(m===void 0||F<m)&&(m=F,d=R)}),d}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var s=this.text,h=s.x,d=s.y,m=s.value,w={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return m&&(w.text={x:h,y:d,value:m}),this.graphModel.overlapMode===To.INCREASE&&(w.zIndex=this.zIndex),w}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(s,h){this.properties[s]=bi(h),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=Ti(Ti({},Object(c.I)(this.properties)),bi(s)),this.setAttributes()}},{key:"changeEdgeId",value:function(s){var h=this.arrowConfig,d=h.markerEnd,m=h.markerStart;m&&m==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(s,")")),d&&d==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(s,")")),this.id=s}},{key:"setStyle",value:function(s,h){this.style=Ti(Ti({},this.style),{},Xi({},s,bi(h)))}},{key:"setStyles",value:function(s){this.style=Ti(Ti({},this.style),bi(s))}},{key:"updateStyles",value:function(s){this.style=Ti({},bi(s))}},{key:"formatText",value:function(s){var h=this.textPosition,d=h.x,m=h.y;s.text&&typeof s.text!="string"?Object.prototype.toString.call(s.text)==="[object Object]"&&(this.text={x:s.text.x||d,y:s.text.y||m,value:s.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:s.text||"",x:d,y:m,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var s=this.textPosition,h=s.x,d=s.y;this.text.x=h,this.text.y=d}},{key:"moveText",value:function(s,h){if(this.text){var d=this.text,m=d.x,w=d.y,T=d.value,R=d.draggable,F=d.editable;this.text={value:T,draggable:R,x:m+s,y:w+h,editable:F}}}},{key:"setText",value:function(s){s&&Li(this.text,s)}},{key:"updateText",value:function(s){this.text=Ti(Ti({},Object(c.I)(this.text)),{},{value:s})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var s=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!s)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:s.x,y:s.y}),this.sourceAnchorId||(this.sourceAnchorId=s.id)}if(!this.targetAnchorId||!this.endPoint){var h=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!h)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:h.x,y:h.y}),this.targetAnchorId||(this.targetAnchorId=h.id)}}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(s,h){this.state=s,this.additionStateData=h}},{key:"updateStartPoint",value:function(s){this.startPoint=s}},{key:"moveStartPoint",value:function(s,h){this.startPoint.x+=s,this.startPoint.y+=h}},{key:"updateEndPoint",value:function(s){this.endPoint=s}},{key:"moveEndPoint",value:function(s,h){this.endPoint.x+=s,this.endPoint.y+=h}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=s}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(s){Li(this,s)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var h=s.startPoint,d=s.endPoint;this.updateStartPoint({x:h.x,y:h.y}),this.updateEndPoint({x:d.x,y:d.y})}}],l&&cf(o.prototype,l),i}(),ns=$n(kt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=$n(kt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=$n(kt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),bu=$n(kt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rs=$n(kt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ed=$n(kt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),xp=$n(kt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),os=$n(kt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tf=$n(kt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Od=$n(kt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ap=$n(kt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tl=$n(kt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Tp=$n(kt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=$n(kt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_u=$n(kt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sd=$n(kt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dh=$n(kt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),jh=$n(kt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ih=$n(kt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Mp=$n(kt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),$n(kt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"sourceNode"),kt.prototype),$n(kt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"targetNode"),kt.prototype),$n(kt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(kt.prototype,"textPosition"),kt.prototype),$n(kt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperty"),kt.prototype),$n(kt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"deleteProperty"),kt.prototype),$n(kt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperties"),kt.prototype),$n(kt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"changeEdgeId"),kt.prototype),$n(kt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyle"),kt.prototype),$n(kt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyles"),kt.prototype),$n(kt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStyles"),kt.prototype),$n(kt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"formatText"),kt.prototype),$n(kt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"resetTextPosition"),kt.prototype),$n(kt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveText"),kt.prototype),$n(kt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setText"),kt.prototype),$n(kt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateText"),kt.prototype),$n(kt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setAnchors"),kt.prototype),$n(kt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setSelected"),kt.prototype),$n(kt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHovered"),kt.prototype),$n(kt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHitable"),kt.prototype),$n(kt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"openEdgeAnimation"),kt.prototype),$n(kt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"closeEdgeAnimation"),kt.prototype),$n(kt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setElementState"),kt.prototype),$n(kt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStartPoint"),kt.prototype),$n(kt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveStartPoint"),kt.prototype),$n(kt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateEndPoint"),kt.prototype),$n(kt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveEndPoint"),kt.prototype),$n(kt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"setZIndex"),kt.prototype),$n(kt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"initPoints"),kt.prototype),$n(kt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAttributes"),kt.prototype),$n(kt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"getAdjustStart"),kt.prototype),$n(kt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"getAdjustEnd"),kt.prototype),$n(kt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAfterAdjustStartAndEnd"),kt.prototype),kt),ff=Td;function Md(i){return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Md(i)}function kp(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Fh(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?kp(Object(l),!0).forEach(function(s){Ou(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):kp(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Eu(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function $h(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function us(){return us=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=Uh(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},us.apply(this,arguments)}function Uh(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yl(i))!==null;);return i}function Pp(i,o){return Pp=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Pp(i,o)}function df(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yl(i);if(o){var h=Yl(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Bh(this,l)}}function Bh(i,o){if(o&&(Md(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $a(i)}function $a(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yl(i){return Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yl(i)}function Ou(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Bn,Np,Js=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Pp(d,m)})(h,i);var o,l,s=df(h);function h(){var d;Eu(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Ou($a(d=s.call.apply(s,[this].concat(w))),"modelType",xr.LINE_EDGE),d}return o=h,(l=[{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.line;return Fh(Fh({},us(Yl(h.prototype),"getEdgeStyle",this).call(this)),to(d))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&$h(o.prototype,l),h}(ff);function Kl(i){return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kl(i)}function pf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return qi(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qi(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qi(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ul(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Co(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ul(Object(l),!0).forEach(function(s){Rp(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ul(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function da(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Ua(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function am(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function hf(){return hf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=ss(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},hf.apply(this,arguments)}function ss(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ra(i))!==null;);return i}function gr(i,o){return gr=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},gr(i,o)}function Vh(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ra(i);if(o){var h=ra(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return pa(this,l)}}function pa(i,o){if(o&&(Kl(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ko(i)}function ko(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ra(i){return ra=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ra(i)}function Rp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mi(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Aa=(Bn=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&gr(d,m)})(h,i);var o,l,s=Vh(h);function h(){var d;Ua(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Rp(ko(d=s.call.apply(s,[this].concat(w))),"modelType",xr.POLYLINE_EDGE),Rp(ko(d),"draggingPointList",void 0),da(ko(d),"dbClickPosition",Np,ko(d)),d}return o=h,(l=[{key:"initEdgeData",value:function(d){this.offset=30,hf(ra(h.prototype),"initEdgeData",this).call(this,d)}},{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.polyline;return Co(Co({},hf(ra(h.prototype),"getEdgeStyle",this).call(this)),to(d))}},{key:"getTextPosition",value:function(){var d,m=(d=this.text)===null||d===void 0?void 0:d.value;if(this.dbClickPosition&&!m){var w=this.dbClickPosition;return{x:w.x,y:w.y}}var T=nr(this.points),R=pf(Wn(T),2),F=R[0],Z=R[1];return{x:(F.x+Z.x)/2,y:(F.y+Z.y)/2}}},{key:"getAfterAnchor",value:function(d,m,w){var T,R;return w.forEach(function(F){var Z;d===fo.HORIZONTAL?Z=Math.abs(m.y-F.y):d===fo.VERTICAL&&(Z=Math.abs(m.x-F.x)),(!R||R>Z)&&(R=Z,T=F)}),T}},{key:"getCrossPoint",value:function(d,m,w){var T;return d===fo.HORIZONTAL?T={x:w.x,y:m.y}:d===fo.VERTICAL&&(T={x:m.x,y:w.y}),T}},{key:"removeCrossPoints",value:function(d,m,w){var T=w.map(function(it){return it});if(d===1){var R=T[d],F=T[m],Z=T[d-1];if(or(Z,R,this.sourceNode)){if(br(R,F,this.sourceNode)){var te=jo(R,F,this.sourceNode);te&&(T[d]=te,T.splice(d-1,1),d--,m--)}}else this.sourceNode.anchors.forEach(function(it){(it.x===Z.x&&it.x===R.x||it.y===Z.y&&it.y===R.y)&&ll(it.x,it.y,R.x,R.y)<ll(Z.x,Z.y,R.x,R.y)&&(T[d-1]=it)})}if(m===w.length-2){var me=T[d],ke=T[m],Ie=T[m+1];if(or(ke,Ie,this.targetNode)){if(br(me,ke,this.targetNode)){var lt=jo(me,ke,this.targetNode);lt&&(T[m]=lt,T.splice(m+1,1))}}else this.targetNode.anchors.forEach(function(it){(it.x===Ie.x&&it.x===ke.x||it.y===Ie.y&&it.y===ke.y)&&ll(it.x,it.y,ke.x,ke.y)<ll(Ie.x,Ie.y,ke.x,ke.y)&&(T[m+1]=it)})}return T}},{key:"getDraggingPoints",value:function(d,m,w,T,R){var F=R.map(function(me){return me}),Z=this.getAfterAnchor(d,w,T),te=this.getCrossPoint(d,w,Z);return m==="start"?(F.unshift(te),F.unshift(Z)):(F.push(te),F.push(Z)),F}},{key:"updateCrossPoints",value:function(d){var m=d.map(function(Bt){return Bt}),w=d[0],T=d[1],R=d[m.length-2],F=d[m.length-1],Z=this.sourceNode,te=this.targetNode,me=Z.modelType,ke=te.modelType,Ie=Po(w,T),lt=m[0];switch(me){case xr.RECT_NODE:Z.radius!==0&&(of(w,Z)||(lt=rf(w,Ie,Z)));break;case xr.CIRCLE_NODE:lt=is(w,Ie,Z);break;case xr.ELLIPSE_NODE:lt=Ks(w,Ie,Z);break;case xr.DIAMOND_NODE:case xr.POLYGON_NODE:lt=af(w,Ie,Z)}lt&&(m[0]=lt);var it=Po(R,F),bt=m[m.length-1];switch(ke){case xr.RECT_NODE:te.radius!==0&&(of(F,te)||(bt=rf(F,it,te)));break;case xr.CIRCLE_NODE:bt=is(F,it,te);break;case xr.ELLIPSE_NODE:bt=Ks(F,it,te);break;case xr.DIAMOND_NODE:case xr.POLYGON_NODE:bt=af(F,it,te)}return bt&&(m[m.length-1]=bt),m}},{key:"getData",value:function(){var d=hf(ra(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Object.assign({},d,{pointsList:m})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(d){return"".concat(d.x,",").concat(d.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var d=lr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=d,this.points=d.map(function(m){return"".concat(m.x,",").concat(m.y)}).join(" ")}},{key:"updateStartPoint",value:function(d){this.startPoint=Object.assign({},d),this.updatePoints()}},{key:"moveStartPoint",value:function(d,m){this.startPoint.x+=d,this.startPoint.y+=m,this.updatePoints()}},{key:"updateEndPoint",value:function(d){this.endPoint=Object.assign({},d),this.updatePoints()}},{key:"moveEndPoint",value:function(d,m){this.endPoint.x+=d,this.endPoint.y+=m,this.updatePoints()}},{key:"updatePointsList",value:function(d,m){this.pointsList.forEach(function(R){R.x+=d,R.y+=m});var w=this.pointsList[0];this.startPoint=Object.assign({},w);var T=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},T),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(d){return d})}},{key:"dragAppendSimple",value:function(d,m){this.isDragging=!0;var w=d.start,T=d.end,R=d.startIndex,F=d.endIndex,Z=d.direction,te=this.pointsList,me=te;return Z===fo.HORIZONTAL?(te[R]={x:w.x,y:w.y+m.y},te[F]={x:T.x,y:T.y+m.y},me=this.pointsList.map(function(ke){return ke})):Z===fo.VERTICAL&&(te[R]={x:w.x+m.x,y:w.y},te[F]={x:T.x+m.x,y:T.y},me=this.pointsList.map(function(ke){return ke})),this.updatePointsAfterDrag(me),this.draggingPointList=me,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[R]),end:Object.assign({},te[F]),startIndex:R,endIndex:F,direction:Z}}},{key:"dragAppend",value:function(d,m){this.isDragging=!0;var w=d.start,T=d.end,R=d.startIndex,F=d.endIndex,Z=d.direction,te=this.pointsList;if(Z===fo.HORIZONTAL){te[R]={x:w.x,y:w.y+m.y},te[F]={x:T.x,y:T.y+m.y};var me=this.pointsList.map(function(hn){return hn});if(R!==0&&F!==this.pointsList.length-1&&(me=this.removeCrossPoints(R,F,me)),R===0){var ke={x:w.x,y:w.y+m.y};if(!wu(ke,this.sourceNode)){var Ie=this.sourceNode.anchors;me=this.getDraggingPoints(Z,"start",ke,Ie,me)}}if(F===this.pointsList.length-1){var lt={x:T.x,y:T.y+m.y};if(!wu(lt,this.targetNode)){var it=this.targetNode.anchors;me=this.getDraggingPoints(Z,"end",lt,it,me)}}this.updatePointsAfterDrag(me),this.draggingPointList=me}else if(Z===fo.VERTICAL){te[R]={x:w.x+m.x,y:w.y},te[F]={x:T.x+m.x,y:T.y};var bt=this.pointsList.map(function(hn){return hn});if(R!==0&&F!==this.pointsList.length-1&&(bt=this.removeCrossPoints(R,F,bt)),R===0){var Bt={x:w.x+m.x,y:w.y};if(!wu(Bt,this.sourceNode)){var gn=this.sourceNode.anchors;bt=this.getDraggingPoints(Z,"start",Bt,gn,bt)}}if(F===this.pointsList.length-1){var yn={x:T.x+m.x,y:T.y};if(!wu(yn,this.targetNode)){var zn=this.targetNode.anchors;bt=this.getDraggingPoints(Z,"end",yn,zn,bt)}}this.updatePointsAfterDrag(bt),this.draggingPointList=bt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[R]),end:Object.assign({},te[F]),startIndex:R,endIndex:F,direction:Z}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var d=dn(nr(this.points));this.pointsList=d.map(function(T){return T}),this.draggingPointList=[];var m=d[0];this.startPoint=Object.assign({},m);var w=d[d.length-1];this.endPoint=Object.assign({},w)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(d){var m=this.updateCrossPoints(d);this.points=m.map(function(w){return"".concat(w.x,",").concat(w.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var d=this.pointsList;return d[d.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(d){var m=d.startPoint,w=d.endPoint,T=d.sourceNode,R=d.targetNode,F=lr({x:m.x,y:m.y},{x:w.x,y:w.y},T,R,this.offset||0);this.pointsList=F,this.initPoints()}}])&&am(o.prototype,l),h}(ff),Np=Mi(Bn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi(Bn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"initPoints"),Bn.prototype),Mi(Bn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"updatePoints"),Bn.prototype),Mi(Bn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"updateStartPoint"),Bn.prototype),Mi(Bn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"moveStartPoint"),Bn.prototype),Mi(Bn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"updateEndPoint"),Bn.prototype),Mi(Bn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"moveEndPoint"),Bn.prototype),Mi(Bn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"updatePointsList"),Bn.prototype),Mi(Bn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"dragAppendStart"),Bn.prototype),Mi(Bn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"dragAppendSimple"),Bn.prototype),Mi(Bn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"dragAppend"),Bn.prototype),Mi(Bn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"dragAppendEnd"),Bn.prototype),Mi(Bn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"updatePointsAfterDrag"),Bn.prototype),Mi(Bn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"getAdjustStart"),Bn.prototype),Mi(Bn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"getAdjustEnd"),Bn.prototype),Mi(Bn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"updateAfterAdjustStartAndEnd"),Bn.prototype),Bn),cs=function(i){var o=i.start,l=i.end,s=i.offset,h=i.verticalLength,d=i.type,m={leftX:0,leftY:0,rightX:0,rightY:0},w=Math.atan((l.y-o.y)/(l.x-o.x)),T=Math.atan(s/h),R=Math.sqrt(h*h+s*s);return d==="start"?l.x>=o.x?(m.leftX=o.x+R*Math.sin(w+T),m.leftY=o.y-R*Math.cos(w+T),m.rightX=o.x-R*Math.sin(w-T),m.rightY=o.y+R*Math.cos(w-T)):(m.leftX=o.x-R*Math.sin(w+T),m.leftY=o.y+R*Math.cos(w+T),m.rightX=o.x+R*Math.sin(w-T),m.rightY=o.y-R*Math.cos(w-T)):d==="end"&&(l.x>=o.x?(m.leftX=l.x+R*Math.sin(w-T),m.leftY=l.y-R*Math.cos(w-T),m.rightX=l.x-R*Math.sin(w+T),m.rightY=l.y+R*Math.cos(w+T)):(m.leftX=l.x-R*Math.sin(w-T),m.leftY=l.y+R*Math.cos(w-T),m.rightX=l.x+R*Math.sin(w+T),m.rightY=l.y-R*Math.cos(w+T))),m},vf={x:1,y:0,z:0};function Do(i,o,l,s,h){for(var d=function(ke){if(ke<0||ke>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-ke,3)+3*o.x*ke*Math.pow(1-ke,2)+3*l.x*Math.pow(ke,2)*(1-ke)+s.x*Math.pow(ke,3),y:i.y*Math.pow(1-ke,3)+3*o.y*ke*Math.pow(1-ke,2)+3*l.y*Math.pow(ke,2)*(1-ke)+s.y*Math.pow(ke,3)}},m=0,w=2,T=s.x,R=s.y,F=s;m<h&&w<50;){var Z=F=d(1-w/100),te=Z.x,me=Z.y;m=ll(T,R,te,me),w++}return F}function Go(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function kd(i){return s=function(d,m){return d.x*m.y-d.y*m.x}(o=vf,l=i),h=Math.acos(function(d,m){var w=[d.x,d.y,d.z];return[m.x,m.y,m.z].reduce(function(T,R,F){return T+R*w[F]})}(Go(o),Go(l))),s>=0?h:-h;var o,l,s,h}function Cp(i){return i*(180/Math.PI)}function V(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function se(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?V(Object(l),!0).forEach(function(s){Ee(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):V(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Ee(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function nt(i){return function(o){if(Array.isArray(o))return Nt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||pt(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vt(i){return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},vt(i)}function et(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||pt(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(i,o){if(i){if(typeof i=="string")return Nt(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Nt(i,o):void 0}}function Nt(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var Lt=function(i,o){var l;switch(i.type){case"line":default:l=new Js(i,o);break;case"polyline":l=new Aa(i,o)}return l},Rt=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ft=function(i){var o=[],l={};return i.forEach(function(s){var h="".concat(s.x,"-").concat(s.y);s.id=h,l[h]=s}),Object.keys(l).forEach(function(s){o.push(l[s])}),o},Ht=function(i,o){var l=[i,{x:i.x,y:o.y},o];return ft(l)},Ut=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},Ct=function(i,o){var l=Math.abs(i.x-o.centerX),s=Math.abs(i.y-o.centerY);return l/o.width>s/o.height?fo.HORIZONTAL:fo.VERTICAL},Et=function(i,o,l){return Ct(l,o)===fo.HORIZONTAL?{x:l.x>i.centerX?i.maxX:i.minX,y:l.y}:{x:l.x,y:l.y>i.centerY?i.maxY:i.minY}},Ke=function(i,o){var l=Math.min(i.minX,o.minX),s=Math.min(i.minY,o.minY),h=Math.max(i.maxX,o.maxX),d=Math.max(i.maxY,o.maxY);return{centerX:(l+h)/2,centerY:(s+d)/2,minX:l,minY:s,maxX:h,maxY:d,height:d-s,width:h-l}},st=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=[],s=[];i.forEach(function(F){l.push(F.x),s.push(F.y)});var h=Math.min.apply(Math,l),d=Math.max.apply(Math,l),m=Math.min.apply(Math,s),w=Math.max.apply(Math,s),T=d-h,R=w-m;return o&&(T+=o,R+=o),{centerX:(h+d)/2,centerY:(m+w)/2,maxX:d,maxY:w,minX:h,minY:m,x:(h+d)/2,y:(m+w)/2,height:R,width:T}},It=function(i){var o=i.minX,l=i.minY,s=i.maxX,h=i.maxY;return[{x:o,y:l},{x:s,y:l},{x:s,y:h},{x:o,y:h}]},Qt=function(i,o){var l=i.x,s=i.y;return l<o.minX||l>o.maxX||s<o.minY||s>o.maxY},xt=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},on=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},Tt=function(i,o){return xt(i,o.x).concat(on(i,o.y))},Gt=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},At=function(i,o){var l=0;return o.forEach(function(s){s&&(i.x===s.x&&(l+=-2),i.y===s.y&&(l+=-2))}),l},Xt=function(i,o,l,s,h){return Gt(i,o)+Gt(i,l)+At(i,[o,l,s,h])},Pn=function i(o,l,s,h,d){d||(d=0),o.unshift(l[h]),s[h]&&s[h]!==h&&d<=100&&i(o,l,s,s[h],d+1)},Vn=function(i,o){var l=i.indexOf(o);l>-1&&i.splice(l,1)},Dt=function(i,o,l,s){var h=o.x-i.x,d=o.y-i.y,m=s.x-l.x,w=s.y-l.y,T=(-d*(i.x-l.x)+h*(i.y-l.y))/(-m*d+h*w),R=(m*(i.y-l.y)-w*(i.x-l.x))/(-m*d+h*w);return T>=0&&T<=1&&R>=0&&R<=1},Mt=function(i,o,l){if(l.width===0&&l.height===0)return!1;var s=et(It(l),4),h=s[0],d=s[1],m=s[2],w=s[3];return Dt(i,o,h,d)||Dt(i,o,h,w)||Dt(i,o,d,m)||Dt(i,o,m,w)},St=function(i,o,l,s){var h=[];return i.forEach(function(d){d!==o&&(d.x!==o.x&&d.y!==o.y||Mt(d,o,l)||Mt(d,o,s)||h.push(d))}),ft(h)},jn=function(i,o,l,s,h,d,m){var w=[],T=[o],R={},F={},Z={};F[o.id]=0,Z[o.id]=Xt(o,l,o);var te={};i.forEach(function(Ie){te[Ie.id]=Ie});for(var me=function(){var Ie=void 0,lt=1/0;if(T.forEach(function(bt){Z[bt.id]<lt&&(lt=Z[bt.id],Ie=bt)}),Ie===l){var it=[];return Pn(it,te,R,l.id),{v:it}}Vn(T,Ie),w.push(Ie),St(i,Ie,s,h).forEach(function(bt){if(w.indexOf(bt)===-1){T.indexOf(bt)===-1&&T.push(bt);var Bt=Z[Ie.id]+Gt(Ie,bt);F[bt.id]&&Bt>=F[bt.id]||(R[bt.id]=Ie.id,F[bt.id]=Bt,Z[bt.id]=F[bt.id]+Xt(bt,l,o,d,m))}})};T.length;){var ke=me();if(vt(ke)==="object")return ke.v}return[o,l]},tr=function(i){return Eo(i)},dn=function(i){for(var o=1;o<i.length-1;){var l=i[o-1],s=i[o],h=i[o+1];l.x===s.x&&s.x===h.x||l.y===s.y&&s.y===h.y?i.splice(o,1):o++}return i},lr=function(i,o,l,s,h){var d=tr(l),m=tr(s),w=Ut(d,h),T=Ut(m,h),R=Et(w,d,i),F=Et(T,m,o);if(Rt(w,T)){var Z=Zo(i,o,R,F);return[i,R].concat(nt(Z),[F,o])}var te=st([R,F]),me=Ke(w,te),ke=Ke(T,te),Ie=[];Ie=(Ie=Ie.concat(It(me))).concat(It(ke));var lt={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[te,me,ke].forEach(function(bt){Ie=Ie.concat(Tt(bt,lt).filter(function(Bt){return Qt(Bt,w)&&Qt(Bt,T)}))}),[{x:R.x,y:F.y},{x:F.x,y:R.y}].forEach(function(bt){Qt(bt,w)&&Qt(bt,T)&&Ie.push(bt)}),Ie.unshift(R),Ie.push(F),Ie=ft(Ie);var it=jn(Ie,R,F,d,m,i,o);return it.unshift(i),it.push(o),it.length>2&&(it=dn(it)),ft(it)},Wn=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var l=i[0],s=i[1],h=ll(l.x,l.y,s.x,s.y),d=1;d<i.length-1;d++){var m=i[d],w=i[d+1],T=ll(m.x,m.y,w.x,w.y);T>h&&(h=T,l=m,s=w)}o=[l,s]}return o},or=function(i,o,l){var s=wu(i,l),h=wu(o,l);return s&&h},br=function(i,o,l){var s=wu(i,l),h=wu(o,l);return!(s&&h)&&(s||h)},jo=function(i,o,l){for(var s,h,d=Eo(l),m=It(d),w=0;w<m.length;w++)Dt(i,o,m[w],m[(w+1)%m.length])&&(h=[m[w],m[(w+1)%m.length]]);return h&&(s=function(T,R,F,Z){var te=(R.y-T.y)*(Z.x-F.x)-(T.x-R.x)*(F.y-Z.y);if(te===0)return!1;var me=((R.x-T.x)*(Z.x-F.x)*(F.y-T.y)+(R.y-T.y)*(Z.x-F.x)*T.x-(Z.y-F.y)*(R.x-T.x)*F.x)/te,ke=-((R.y-T.y)*(Z.y-F.y)*(F.x-T.x)+(R.x-T.x)*(Z.y-F.y)*T.y-(Z.x-F.x)*(R.y-T.y)*F.y)/te;return(me-T.x)*(me-R.x)<=0&&(ke-T.y)*(ke-R.y)<=0&&(me-F.x)*(me-Z.x)<=0&&(ke-F.y)*(ke-Z.y)<=0&&{x:me,y:ke}}(i,o,h[0],h[1])),s},Po=function(i,o){var l;return i.x===o.x?l=fo.VERTICAL:i.y===o.y&&(l=fo.HORIZONTAL),l},nr=function(i){var o=i.split(" "),l=[];return o&&o.forEach(function(s){var h=et(s.split(","),2),d=h[0],m=h[1];l.push({x:Number(d),y:Number(m)})}),l},Zo=function(i,o,l,s){var h=[];if(Po(i,l)===Po(o,s))i.y===l.y?(h.push({x:l.x,y:(l.y+s.y)/2}),h.push({x:s.x,y:(l.y+s.y)/2})):(h.push({x:(l.x+s.x)/2,y:l.y}),h.push({x:(l.x+s.x)/2,y:s.y}));else{var d={x:l.x,y:s.y},m=Fi(d,i,l),w=Fi(d,o,s);if(m||w)d={x:s.x,y:l.y};else{var T=uo(d,i,l),R=uo(d,o,s);T&&R&&(d={x:s.x,y:l.y})}h.push(d)}return h},uo=function(i,o,l){return i.x===o.x&&i.x===l.x||i.y===o.y&&i.y===l.y},Io=function(i){if(!i)return 0;for(var o=0,l=0;l<i.length;l++){var s=i.charCodeAt(l);i.match(/[A-Z]/)?o+=1.5:o+=s>=1&&s<=126||s>=65376&&s<=65439?1:2}return o},zo=null,ii=function(i,o){zo||(zo=document.createElement("canvas"));var l=zo.getContext("2d");return l.font=o,l.measureText(i).width},di=function(i){var o,l=i.start,s=i.end;if(l.x===s.x&&l.y===s.y)o="";else{var h={start:l,end:s,offset:10,verticalLength:5},d=cs(se(se({},h),{},{type:"start"})),m=cs(se(se({},h),{},{type:"end"}));o="M".concat(d.leftX," ").concat(d.leftY,` 
    L`).concat(d.rightX," ").concat(d.rightY,` 
    L`).concat(m.rightX," ").concat(m.rightY,`
    L`).concat(m.leftX," ").concat(m.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Jo=function(i){var o=i.start,l=i.end,s=i.sourceNode,h=i.targetNode,d=i.offset,m=Eo(s),w=Eo(h),T=Ut(m,d),R=Ut(w,d);return{sNext:Et(T,m,o),ePre:Et(R,w,l)}},vo=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[Yn(o[0]),Yn(o[1]),Yn(o[2]),Yn(o[3])]},Yn=function(i){var o=et(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},pi=function(i,o){var l=et(i,4);return[Do(l[0],l[1],l[2],l[3],o),i[3]]},Tr=function(i,o){for(var l,s=i.x,h=i.y,d=nr(o),m=Number.MAX_SAFE_INTEGER,w=[],T=0;T<d.length;T++)w.push({start:d[T],end:d[(T+1)%d.length]});if(w.forEach(function(te){var me=te.start,ke=te.end;if(me.x===ke.x){var Ie={x:me.x,y:h};if(Fi(Ie,me,ke)){var lt=Math.abs(me.x-s);lt<m&&(m=lt,l=Ie)}}else if(me.y===ke.y){var it={x:s,y:me.y};if(Fi(it,me,ke)){var bt=Math.abs(me.y-h);bt<m&&(m=bt,l=it)}}}),!l){var R=w[0],F=R.start,Z=R.end;l={x:F.x+(Z.x-F.x)/2,y:F.y+(Z.y-F.y)/2}}return l},Dn=function(i){return tl(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},hr=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function Kn(i,o){return typeof o!="function"?function(l,s,h){return Object.assign({type:i.edgeType},h)}:function(l,s,h){var d=o(l,s,h);return d?typeof d=="string"?Object.assign({},h,{type:d}):Object.assign({type:d},h):{type:i.edgeType}}}r(208);var mo=function(){};function Ml(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Oo(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ve=function(){function i(s){var h=this,d=s.onDragStart,m=d===void 0?mo:d,w=s.onDragging,T=w===void 0?mo:w,R=s.onDragEnd,F=R===void 0?mo:R,Z=s.eventType,te=Z===void 0?"":Z,me=s.eventCenter,ke=me===void 0?null:me,Ie=s.step,lt=Ie===void 0?1:Ie,it=s.isStopPropagation,bt=it===void 0||it,Bt=s.model,gn=Bt===void 0?null:Bt,yn=s.data,zn=yn===void 0?null:yn;(function(hn,In){if(!(hn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,i),Oo(this,"onDragStart",void 0),Oo(this,"onDragging",void 0),Oo(this,"onDragEnd",void 0),Oo(this,"step",void 0),Oo(this,"isStopPropagation",void 0),Oo(this,"isDragging",!1),Oo(this,"isStartDragging",!1),Oo(this,"startX",0),Oo(this,"startY",0),Oo(this,"sumDeltaX",0),Oo(this,"sumDeltaY",0),Oo(this,"eventType",void 0),Oo(this,"eventCenter",void 0),Oo(this,"model",void 0),Oo(this,"data",void 0),Oo(this,"startTime",void 0),Oo(this,"handleMouseDown",function(hn){var In,Sn,jr,Ur=(In=window)===null||In===void 0?void 0:In.document;if(hn.button===0){h.isStopPropagation&&hn.stopPropagation(),h.isStartDragging=!0,h.startX=hn.clientX,h.startY=hn.clientY,Ur.addEventListener("mousemove",h.handleMouseMove,!1),Ur.addEventListener("mouseup",h.handleMouseUp,!1);var pr=(Sn=h.model)===null||Sn===void 0?void 0:Sn.getData();(jr=h.eventCenter)===null||jr===void 0||jr.emit(Cn["".concat(h.eventType,"_MOUSEDOWN")],{e:hn,data:h.data||pr}),h.startTime=new Date().getTime()}}),Oo(this,"handleMouseMove",function(hn){if(h.isStopPropagation&&hn.stopPropagation(),h.isStartDragging&&(h.sumDeltaX+=hn.clientX-h.startX,h.sumDeltaY+=hn.clientY-h.startY,h.startX=hn.clientX,h.startY=hn.clientY,h.step<=1||Math.abs(h.sumDeltaX)>h.step||Math.abs(h.sumDeltaY)>h.step)){var In,Sn=h.sumDeltaX%h.step,jr=h.sumDeltaY%h.step,Ur=h.sumDeltaX-Sn,pr=h.sumDeltaY-jr;h.sumDeltaX=Sn,h.sumDeltaY=jr;var Kr,_i=(In=h.model)===null||In===void 0?void 0:In.getData();h.isDragging||((Kr=h.eventCenter)===null||Kr===void 0||Kr.emit(Cn["".concat(h.eventType,"_DRAGSTART")],{e:hn,data:h.data||_i}),h.onDragStart({event:hn})),h.isDragging=!0,Promise.resolve().then(function(){var wi,Ta;h.onDragging({deltaX:Ur,deltaY:pr,event:hn}),(wi=h.eventCenter)===null||wi===void 0||wi.emit(Cn["".concat(h.eventType,"_MOUSEMOVE")],{e:hn,data:h.data||_i}),(Ta=h.eventCenter)===null||Ta===void 0||Ta.emit(Cn["".concat(h.eventType,"_DRAG")],{e:hn,data:h.data||_i})})}}),Oo(this,"handleMouseUp",function(hn){var In=window.document;h.isStartDragging=!1,h.isStopPropagation&&hn.stopPropagation(),Promise.resolve().then(function(){var Sn,jr,Ur;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1);var pr=(Sn=h.model)===null||Sn===void 0?void 0:Sn.getData();(jr=h.eventCenter)===null||jr===void 0||jr.emit(Cn["".concat(h.eventType,"_MOUSEUP")],{e:hn,data:h.data||pr}),h.isDragging&&(h.isDragging=!1,h.onDragEnd({event:hn}),(Ur=h.eventCenter)===null||Ur===void 0||Ur.emit(Cn["".concat(h.eventType,"_DROP")],{e:hn,data:h.data||pr}))})}),Oo(this,"cancelDrag",function(){var hn,In=(hn=window)===null||hn===void 0?void 0:hn.document;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1),h.onDragEnd({event:null}),h.isDragging=!1}),this.onDragStart=m,this.onDragging=T,this.onDragEnd=F,this.step=lt,this.isStopPropagation=bt,this.eventType=te,this.eventCenter=ke,this.model=gn,this.data=zn}var o,l;return o=i,(l=[{key:"setStep",value:function(s){this.step=s}},{key:"setModel",value:function(s){this.model=s}}])&&Ml(o.prototype,l),i}();function ot(i){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ot(i)}function tt(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sn(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function dr(i,o,l){return o&&sn(i.prototype,o),i}function pe(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Le(i,o)}function re(i){var o=Ce();return function(){var l,s=de(i);if(o){var h=de(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Re(this,l)}}function Re(i,o){if(o&&(ot(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ve(i)}function Ve(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Je(i){var o=typeof Map=="function"?new Map:void 0;return Je=function(l){if(l===null||(s=l,Function.toString.call(s).indexOf("[native code]")===-1))return l;var s;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return De(l,arguments,de(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),Le(h,l)},Je(i)}function De(i,o,l){return De=Ce()?Reflect.construct:function(s,h,d){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(s,m));return d&&Le(w,d.prototype),w},De.apply(null,arguments)}function Ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(i,o){return Le=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Le(i,o)}function de(i){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},de(i)}function Me(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function fe(i,o){return i instanceof ze&&o instanceof ze}var We=function(i){pe(l,i);var o=re(l);function l(s,h,d){var m;return tt(this,l),Me(Ve(m=o.call(this,3)),"x",void 0),Me(Ve(m),"y",void 0),Me(Ve(m),"z",void 0),m[0]=s,m[1]=h,m[2]=d,m.x=s,m.y=h,m.z=d,Object.setPrototypeOf(Ve(m),l.prototype),m}return dr(l,[{key:"add",value:function(s){if(fe(this,s))return new ze(this.x+s.x,this.y+s.y);var h=this.z+s.z;return new p((this.x+s.x)/h,(this.y+s.y)/h)}},{key:"subtract",value:function(s){if(fe(this,s))return new ze(this.x-s.x,this.y-s.y);var h=this.z-s.z;return h===0?new ze(this.x-s.x,this.y-s.y):new p((this.x-s.x)/h,(this.y-s.y)/h)}}]),l}(Je(Array)),ze=function(i){pe(l,i);var o=re(l);function l(s,h,d){var m;return tt(this,l),m=o.call(this,s,h,d??0),Object.setPrototypeOf(Ve(m),l.prototype),m}return dr(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(s){var h=this;return s.reduce(function(d,m,w){return d+m*h[w]})}},{key:"cross",value:function(s){return new l(this.y*s.z-this.z*s.y,this.z*s.x-this.x*s.z,this.x*s.y-this.y*s.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var s=this.getLength();return new l(this.x/s,this.y/s)}},{key:"crossZ",value:function(s){return this.x*s.y-this.y*s.x}},{key:"angle",value:function(s){var h=this.crossZ(s),d=Math.acos(this.normalize().dot(s.normalize()));return h>=0?d:-d}}]),l}(We),p=function(i){pe(l,i);var o=re(l);function l(s,h){var d;return tt(this,l),d=o.call(this,s,h,1),Object.setPrototypeOf(Ve(d),l.prototype),d}return dr(l,[{key:"toString",value:function(){return"Point"}}]),l}(We);r(67),r(218);function y(i){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y(i)}function O(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||X(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(i){return function(o){if(Array.isArray(o))return ne(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||X(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(i,o){if(i){if(typeof i=="string")return ne(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?ne(i,o):void 0}}function ne(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function he(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xe(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Fe(i,o,l){return o&&xe(i.prototype,o),i}function mt(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&tn(i,o)}function wt(i){var o=jt();return function(){var l,s=ir(i);if(o){var h=ir(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Wt(this,l)}}function Wt(i,o){if(o&&(y(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn(i)}function wn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function On(i){var o=typeof Map=="function"?new Map:void 0;return On=function(l){if(l===null||(s=l,Function.toString.call(s).indexOf("[native code]")===-1))return l;var s;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return Gn(l,arguments,ir(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),tn(h,l)},On(i)}function Gn(i,o,l){return Gn=jt()?Reflect.construct:function(s,h,d){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(s,m));return d&&tn(w,d.prototype),w},Gn.apply(null,arguments)}function jt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tn(i,o){return tn=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},tn(i,o)}function ir(i){return ir=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ir(i)}function Mn(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var He,vr,Lr,Xn,ur,ki,Ba,Zl,Pi,Su,fs,Pd,Dp,xu=function(i){mt(l,i);var o=wt(l);function l(){var s;he(this,l);for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return Mn(wn(s=o.call(this,d.length)),"rows",void 0),Mn(wn(s),"columns",void 0),s.fill(new Array(3)),d.forEach(function(w,T){s[T]=w}),s.columns=d[0].length,s.rows=d.length,Object.setPrototypeOf(wn(s),l.prototype),s}return Fe(l,[{key:"getRow",value:function(s){return this[s]}},{key:"getColumn",value:function(s){return L(this.map(function(h){return h[s]}))}},{key:"transpose",value:function(){for(var s=[],h=0;h<this.columns;h++)s.push(this.getColumn(h));return Gn(l,s)}},{key:"cross",value:function(s){var h=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===s.rows)for(var d=0;d<this.rows;d++)for(var m=this.getRow(d),w=function(R){var F=s.getColumn(R);h[d][R]=m.reduce(function(Z,te,me){return Z+te*F[me]},0)},T=0;T<s.columns;T++)w(T);return Gn(l,L(h))}},{key:"to2D",value:function(){return this.map(function(s){return[s[0],s[1]]})}},{key:"toPoints",value:function(){return this.map(function(s){return new p(s[0],s[1])})}},{key:"toString",value:function(){var s=O(this[0],2),h=s[0],d=s[1],m=O(this[1],2),w=m[0],T=m[1],R=O(this[2],2),F=R[0],Z=R[1];return"matrix(".concat(h," ").concat(d," ").concat(w," ").concat(T," ").concat(F," ").concat(Z,")")}},{key:"translate",value:function(s,h){return this.cross(new Nd(s,h))}},{key:"rotate",value:function(s){return this.cross(new Qs(s))}},{key:"scale",value:function(s,h){return this.cross(new lm(s,h))}}]),l}(On(Array)),Qs=function(i){mt(l,i);var o=wt(l);function l(s){var h;return he(this,l),h=o.call(this,new ze(+Math.cos(s).toFixed(2),+Math.sin(s).toFixed(2),0),new ze(-Math.sin(s).toFixed(2),+Math.cos(s).toFixed(2),0),new ze(0,0,1)),Object.setPrototypeOf(wn(h),l.prototype),h}return Fe(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(xu),lm=function(i){mt(l,i);var o=wt(l);function l(s,h){var d;return he(this,l),Mn(wn(d=o.call(this,new ze(s,0,0),new ze(0,h,0),new ze(0,0,1))),"sx",void 0),Mn(wn(d),"sy",void 0),d.sx=s,d.sy=h,Object.setPrototypeOf(wn(d),l.prototype),d}return Fe(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(xu),Nd=function(i){mt(l,i);var o=wt(l);function l(s,h){var d;return he(this,l),Mn(wn(d=o.call(this,new ze(1,0,0),new ze(0,1,0),new ze(s,h,1))),"tx",void 0),Mn(wn(d),"ty",void 0),d.tx=s,d.ty=h,Object.setPrototypeOf(wn(d),l.prototype),d}return Fe(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(xu),jp={node:!1,edge:!1},um={node:!0,edge:!0};function Ip(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function mf(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Ip(Object(l),!0).forEach(function(s){ps(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Ip(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function yf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||Lp(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ds(i){return function(o){if(Array.isArray(o))return zb(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Lp(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lp(i,o){if(i){if(typeof i=="string")return zb(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?zb(i,o):void 0}}function zb(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function dy(i){return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},dy(i)}function Au(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function qN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ps(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function qn(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var o2,i2=200,a2=(He=function(){function i(s){(function(me,ke){if(!(me instanceof ke))throw new TypeError("Cannot call a class as a function")})(this,i),ps(this,"rootEl",void 0),Au(this,"width",vr,this),Au(this,"height",Lr,this),ps(this,"theme",void 0),ps(this,"eventCenter",void 0),ps(this,"modelMap",new Map),ps(this,"topElement",void 0),ps(this,"animation",void 0),ps(this,"idGenerator",void 0),ps(this,"edgeGenerator",void 0),ps(this,"nodeMoveRules",[]),ps(this,"customTrajectory",void 0),Au(this,"edgeType",Xn,this),Au(this,"nodes",ur,this),Au(this,"edges",ki,this),Au(this,"overlapMode",Ba,this),Au(this,"background",Zl,this),Au(this,"transformModel",Pi,this),Au(this,"editConfigModel",Su,this),Au(this,"gridSize",fs,this),Au(this,"partial",Pd,this),Au(this,"fakerNode",Dp,this);var h,d=s.container,m=s.background,w=m===void 0?{}:m,T=s.grid,R=s.idGenerator,F=s.edgeGenerator,Z=s.animation,te=s.customTrajectory;this.background=w,dy(T)==="object"&&(this.gridSize=T.size),this.rootEl=d,this.editConfigModel=new od(s),this.eventCenter=new md,this.transformModel=new hp(this.eventCenter,s),this.theme=Xl(s.style),this.edgeType=s.edgeType||"polyline",this.width=s.width,this.height=s.height,this.animation=(h=Z)&&typeof h!="boolean"?Qu(to(jp),h):to(h===!0?um:jp),this.partial=s.partial,this.overlapMode=s.overlapMode||0,this.idGenerator=R,this.customTrajectory=te,this.edgeGenerator=Kn(this,F),this.width=s.width||this.rootEl.getBoundingClientRect().width,this.height=s.height||this.rootEl.getBoundingClientRect().height,this.flowId=na()}var o,l;return o=i,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(s,h,d){return s[h.id]={index:d,model:h},s},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(s,h,d){return s[h.id]={index:d,model:h},s},{})}},{key:"modelsMap",get:function(){return[].concat(ds(this.nodes),ds(this.edges)).reduce(function(s,h){return s[h.id]=h,s},{})}},{key:"sortElements",get:function(){var s=[];this.nodes.forEach(function(R){return s.push(R)}),this.edges.forEach(function(R){return s.push(R)}),s=s.sort(function(R,F){return R.zIndex-F.zIndex});for(var h=[],d=[-200,-200],m=[this.width+i2,this.height+i2],w=0;w<s.length;w++){var T=s[w];T.visible&&(!this.partial||T.isSelected||this.isElementInArea(T,d,m,!1,!1))&&h.push(T)}return h}},{key:"textEditElement",get:function(){var s=this.nodes.find(function(d){return d.state===Yr.TEXT_EDIT}),h=this.edges.find(function(d){return d.state===Yr.TEXT_EDIT});return s||h}},{key:"selectElements",get:function(){var s=new Map;return this.nodes.forEach(function(h){h.isSelected&&s.set(h.id,h)}),this.edges.forEach(function(h){h.isSelected&&s.set(h.id,h)}),s}},{key:"selectNodes",get:function(){var s=[];return this.nodes.forEach(function(h){h.isSelected&&s.push(h)}),s}},{key:"getAreaElement",value:function(s,h){var d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=arguments.length>4&&arguments[4]!==void 0&&arguments[4],T=[],R=[];this.nodes.forEach(function(te){return R.push(te)}),this.edges.forEach(function(te){return R.push(te)});for(var F=0;F<R.length;F++){var Z=R[F];w&&!Z.visible||!this.isElementInArea(Z,s,h,d,m)||T.push(Z)}return T}},{key:"getModel",value:function(s){return this.modelMap.get(s)}},{key:"getNodeModelById",value:function(s){var h;return this.fakerNode&&s===this.fakerNode.id?this.fakerNode:(h=this.nodesMap[s])===null||h===void 0?void 0:h.model}},{key:"getPointByClient",value:function(s){var h=s.x,d=s.y,m=this.rootEl.getBoundingClientRect(),w={x:h-m.left,y:d-m.top},T=yf(this.transformModel.HtmlPointToCanvasPoint([w.x,w.y]),2);return{domOverlayPosition:w,canvasOverlayPosition:{x:T[0],y:T[1]}}}},{key:"isElementInArea",value:function(s,h,d){var m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(s.BaseType===co.NODE){for(var T=Eo(s=s),R=T.minX,F=T.minY,Z=T.maxX,te=T.maxY,me=[{x:R,y:F},{x:Z,y:F},{x:Z,y:te},{x:R,y:te}],ke=w,Ie=0;Ie<me.length;Ie++){var lt=me[Ie],it=lt.x,bt=lt.y,Bt=this.transformModel.CanvasPointToHtmlPoint([it,bt]),gn=yf(Bt,2);if(it=gn[0],bt=gn[1],zs([it,bt],h,d)!==w){ke=!w;break}}return ke}if(s.BaseType===co.EDGE){var yn=s=s,zn=yn.startPoint,hn=yn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([zn.x,zn.y]),Sn=this.transformModel.CanvasPointToHtmlPoint([hn.x,hn.y]),jr=zs(In,h,d),Ur=zs(Sn,h,d);return m?jr&&Ur:jr||Ur}return!1}},{key:"graphDataToModel",value:function(s){var h=this;if(this.width&&this.height||this.resize(),!s)return this.nodes=[],void(this.edges=[]);s.nodes?this.nodes=Qf(s.nodes,function(d){return h.getModelAfterSnapToGrid(d)}):this.nodes=[],s.edges?this.edges=Qf(s.edges,function(d){var m=h.getModel(d.type);if(!m)throw new Error("找不到".concat(d.type,"对应的边。"));return new m(d,h)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var s=[];this.edges.forEach(function(d){var m=d.getData();m&&!d.virtual&&s.push(m)});var h=[];return this.nodes.forEach(function(d){var m=d.getData();m&&!d.virtual&&h.push(m)}),{nodes:h,edges:s}}},{key:"modelToHistoryData",value:function(){for(var s=!1,h=[],d=0;d<this.nodes.length;d++){var m=this.nodes[d];if(m.isDragging){s=!0;break}h.push(m.getHistoryData())}if(s)return!1;for(var w=!1,T=[],R=0;R<this.edges.length;R++){var F=this.edges[R];if(F.isDragging){w=!0;break}T.push(F.getHistoryData())}return!w&&{nodes:h,edges:T}}},{key:"getEdgeModelById",value:function(s){var h;return(h=this.edgesMap[s])===null||h===void 0?void 0:h.model}},{key:"getElement",value:function(s){return this.modelsMap[s]}},{key:"getNodeEdges",value:function(s){for(var h=[],d=0;d<this.edges.length;d++){var m=this.edges[d],w=this.edges[d].sourceNodeId===s,T=this.edges[d].targetNodeId===s;(w||T)&&h.push(m)}return h}},{key:"getSelectElements",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],h=this.selectElements,d={nodes:[],edges:[]};return h.forEach(function(m){if(m.BaseType===co.NODE&&d.nodes.push(m.getData()),m.BaseType===co.EDGE){var w=m.getData(),T=h.get(w.sourceNodeId)&&h.get(w.targetNodeId);(s||T)&&d.edges.push(w)}}),d}},{key:"updateAttributes",value:function(s,h){this.getElement(s).updateAttributes(h)}},{key:"changeNodeId",value:function(s,h){return h||(h=na()),this.nodesMap[h]?"":this.nodesMap[s]?(this.edges.forEach(function(d){d.sourceNodeId===s&&(d.sourceNodeId=h),d.targetNodeId===s&&(d.targetNodeId=h)}),this.nodesMap[s].model.id=h,this.nodesMap[h]=this.nodesMap[s],h):""}},{key:"changeEdgeId",value:function(s,h){return h||(h=na()),this.edgesMap[h]?"":this.edgesMap[s]?(this.edges.forEach(function(d){d.id===s&&d.changeEdgeId(h)}),h):""}},{key:"setFakerNode",value:function(s){this.fakerNode=s}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(s,h){return this.modelMap.set(s,h)}},{key:"toFront",value:function(s){var h,d,m,w=((h=this.nodesMap[s])===null||h===void 0?void 0:h.model)||((d=this.edgesMap[s])===null||d===void 0?void 0:d.model);w&&(this.overlapMode===To.DEFAULT&&((m=this.topElement)===null||m===void 0||m.setZIndex(),w.setZIndex(9999),this.topElement=w),this.overlapMode===To.INCREASE&&this.setElementZIndex(s,"top"))}},{key:"setElementZIndex",value:function(s,h){var d,m,w,T=((d=this.nodesMap[s])===null||d===void 0?void 0:d.model)||((m=this.edgesMap[s])===null||m===void 0?void 0:m.model);T&&(typeof h=="number"&&(w=h),h==="top"&&(w=ls()),h==="bottom"&&(w=--sf),T.setZIndex(w))}},{key:"deleteNode",value:function(s){var h=this.nodesMap[s].model.getData();this.deleteEdgeBySource(s),this.deleteEdgeByTarget(s),this.nodes.splice(this.nodesMap[s].index,1),this.eventCenter.emit(Cn.NODE_DELETE,{data:h})}},{key:"addNode",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,d=arguments.length>2?arguments[2]:void 0,m=bi(s);m.id&&this.nodesMap[s.id]&&delete m.id;var w=this.getModelAfterSnapToGrid(m);this.nodes.push(w);var T=w.getData(),R={data:T};return d&&(R.e=d),this.eventCenter.emit(h,R),w}},{key:"getModelAfterSnapToGrid",value:function(s){var h=this.getModel(s.type);if(!h)throw new Error("找不到".concat(s.type,"对应的节点，请确认是否已注册此类型节点。"));var d=s.x,m=s.y;return d&&m&&(s.x=rl(d,this.gridSize),s.y=rl(m,this.gridSize),dy(s.text)==="object"&&(s.text.x+=s.x-d,s.text.y+=s.y-m)),new h(s,this)}},{key:"cloneNode",value:function(s){var h=this.getNodeModelById(s),d=h.getData();d.x+=30,d.y+=30,delete d.id,d.text&&(d.text.x+=30,d.text.y+=30);var m=this.addNode(d);return m.setSelected(!0),h.setSelected(!1),m.getData()}},{key:"moveNode",value:function(s,h,d){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[s];if(w){var T=w.model,R=T.getMoveDistance(h,d,m),F=yf(R,2);h=F[0],d=F[1],this.moveEdge(s,h,d)}}},{key:"moveNode2Coordinate",value:function(s,h,d){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[s];if(w){var T=w.model,R=T.x,F=T.y,Z=h-R,te=d-F;this.moveNode(s,Z,te,m)}}},{key:"editText",value:function(s){this.setElementStateById(s,Yr.TEXT_EDIT)}},{key:"addEdge",value:function(s){var h=bi(s),d=h.type;d||(d=this.edgeType),h.id&&this.edgesMap[h.id]&&delete h.id;var m=this.getModel(d);if(!m)throw new Error("找不到".concat(d,"对应的边，请确认是否已注册此类型边。"));var w=new m(mf(mf({},h),{},{type:d}),this),T=w.getData();return this.edges.push(w),this.eventCenter.emit(Cn.EDGE_ADD,{data:T}),w}},{key:"moveEdge",value:function(s,h,d){for(var m=0;m<this.edges.length;m++){var w=this.edges[m],T=w.textPosition,R=T.x,F=T.y,Z=this.edges[m].sourceNodeId===s,te=this.edges[m].targetNodeId===s;Z&&w.moveStartPoint(h,d),te&&w.moveEndPoint(h,d),(Z||te)&&this.handleEdgeTextMove(w,R,F)}}},{key:"handleEdgeTextMove",value:function(s,h,d){var m;if(s.customTextPosition===!0)s.resetTextPosition();else if(s.modelType===xr.POLYLINE_EDGE&&(m=s.text)!==null&&m!==void 0&&m.value){var w=s.text,T=Tr(w,s.points);s.moveText(T.x-w.x,T.y-w.y)}else{var R=s.textPosition,F=R.x,Z=R.y;s.moveText(F-h,Z-d)}}},{key:"deleteEdgeBySourceAndTarget",value:function(s,h){for(var d=0;d<this.edges.length;d++)if(this.edges[d].sourceNodeId===s&&this.edges[d].targetNodeId===h){var m=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:m})}}},{key:"deleteEdgeById",value:function(s){if(this.edgesMap[s]){var h=this.edgesMap[s].index,d=this.edgesMap[s].model.getData();this.edges.splice(h,1),this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeBySource",value:function(s){for(var h=0;h<this.edges.length;h++)if(this.edges[h].sourceNodeId===s){var d=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeByTarget",value:function(s){for(var h=0;h<this.edges.length;h++)if(this.edges[h].targetNodeId===s){var d=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"setElementStateById",value:function(s,h,d){this.nodes.forEach(function(m){m.id===s?m.setElementState(h,d):m.setElementState(Yr.DEFAULT)}),this.edges.forEach(function(m){m.id===s?m.setElementState(h,d):m.setElementState(Yr.DEFAULT)})}},{key:"updateText",value:function(s,h){this.nodes.forEach(function(d){d.id===s&&d.updateText(h)}),this.edges.forEach(function(d){d.id===s&&d.updateText(h)})}},{key:"selectNodeById",value:function(s){var h,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var m=(h=this.nodesMap[s])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectEdgeById",value:function(s){var h,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var m=(h=this.edgesMap[s])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectElementById",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];h||this.clearSelectElements();var d=this.getElement(s);d==null||d.setSelected(!0)}},{key:"clearSelectElements",value:function(){var s;this.selectElements.forEach(function(h){h==null||h.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===To.DEFAULT&&((s=this.topElement)===null||s===void 0||s.setZIndex())}},{key:"moveNodes",value:function(s,h,d){for(var m=this,w=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=s.reduce(function(yn,zn){var hn=m.nodesMap[zn].model.getMoveDistance(h,d,w);return yn[zn]=hn,yn},{}),R=0;R<this.edges.length;R++){var F=this.edges[R],Z=F.textPosition,te=Z.x,me=Z.y,ke=T[F.sourceNodeId],Ie=T[F.targetNodeId],lt=void 0,it=void 0;if(ke&&Ie&&F.modelType===xr.POLYLINE_EDGE){var bt=yf(ke,2);lt=bt[0],it=bt[1],F.updatePointsList(lt,it)}else{if(ke){var Bt=yf(ke,2);lt=Bt[0],it=Bt[1],F.moveStartPoint(lt,it)}if(Ie){var gn=yf(Ie,2);lt=gn[0],it=gn[1],F.moveEndPoint(lt,it)}}(ke||Ie)&&this.handleEdgeTextMove(F,te,me)}}},{key:"addNodeMoveRules",value:function(s){this.nodeMoveRules.includes(s)||this.nodeMoveRules.push(s)}},{key:"setDefaultEdgeType",value:function(s){this.edgeType=s}},{key:"changeNodeType",value:function(s,h){var d=this.getNodeModelById(s);if(d){var m=d.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));var T=new w(m,this);this.nodes.splice(this.nodesMap[s].index,1,T),this.getNodeEdges(s).forEach(function(R){if(R.sourceNodeId===s){var F=lf(T,R.startPoint,T.width,T.height);R.updateStartPoint(F)}if(R.targetNodeId===s){var Z=lf(T,R.endPoint,T.width,T.height);R.updateEndPoint(Z)}})}}},{key:"changeEdgeType",value:function(s,h){var d=this.getEdgeModelById(s);if(d&&d.type!==h){var m=d.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));delete m.pointsList;var T=new w(m,this);this.edges.splice(this.edgesMap[s].index,1,T)}}},{key:"getNodeIncomingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.targetNodeId===s&&h.push(d)}),h}},{key:"getNodeOutgoingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.sourceNodeId===s&&h.push(d)}),h}},{key:"getAnchorIncomingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.targetAnchorId===s&&h.push(d)}),h}},{key:"getAnchorOutcomingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.sourceAnchorId===s&&h.push(d)}),h}},{key:"getNodeIncomingNode",value:function(s){var h=this,d=[];return this.edges.forEach(function(m){m.targetNodeId===s&&d.push(h.nodesMap[m.sourceNodeId].model)}),d}},{key:"getNodeOutgoingNode",value:function(s){var h=this,d=[];return this.edges.forEach(function(m){m.sourceNodeId===s&&d.push(h.nodesMap[m.targetNodeId].model)}),d}},{key:"setTheme",value:function(s){this.theme=Xl(mf(mf({},this.theme),s))}},{key:"resize",value:function(s,h){this.width=s||this.rootEl.getBoundingClientRect().width,this.height=h||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var s=this.nodes,h=[],d=[];s.forEach(function(Z){var te=Z.x,me=Z.y,ke=Z.width,Ie=Z.height,lt=Z.getNodeStyle().strokeWidth,it=lt===void 0?0:lt,bt=te+ke/2+it,Bt=te-ke/2-it,gn=me+Ie/2+it,yn=me-Ie/2-it;h=h.concat([bt,Bt].filter(function(zn){return!Number.isNaN(zn)})),d=d.concat([gn,yn].filter(function(zn){return!Number.isNaN(zn)}))});var m=Math.min.apply(Math,ds(h)),w=Math.max.apply(Math,ds(h)),T=Math.min.apply(Math,ds(d)),R=w-m||0,F=Math.max.apply(Math,ds(d))-T||0;return{virtualRectWidth:R,virtualRectHeight:F,virtualRectCenterPositionX:m+R/2,virtualRectCenterPositionY:T+F/2}}},{key:"translateCenter",value:function(){var s=this.nodes,h=this.width,d=this.height,m=this.rootEl,w=this.transformModel;if(s.length){var T=h||m.clientWidth,R=d||m.clientHeight,F=this.getVirtualRectSize(),Z=F.virtualRectCenterPositionX,te=F.virtualRectCenterPositionY;w.focusOn(Z,te,T,R)}}},{key:"fitView",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,d=this.nodes,m=this.width,w=this.height,T=this.rootEl,R=this.transformModel;if(d.length){var F=m||T.clientWidth,Z=w||T.clientHeight,te=this.getVirtualRectSize(),me=te.virtualRectWidth,ke=te.virtualRectHeight,Ie=te.virtualRectCenterPositionX,lt=te.virtualRectCenterPositionY,it=(me+h)/F,bt=(ke+s)/Z,Bt=0;Bt=1/Math.max(it,bt);var gn=[F/2,Z/2];R.zoom(Bt,gn),R.focusOn(Ie,lt,F,Z)}}},{key:"openEdgeAnimation",value:function(s){this.getEdgeModelById(s).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(s){this.getEdgeModelById(s).closeEdgeAnimation()}}],l&&qN(o.prototype,l),i}(),vr=qn(He.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr=qn(He.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn=qn(He.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=qn(He.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=qn(He.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ba=qn(He.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return To.DEFAULT}}),Zl=qn(He.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=qn(He.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=qn(He.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fs=qn(He.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pd=qn(He.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dp=qn(He.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(He.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"nodesMap"),He.prototype),qn(He.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"edgesMap"),He.prototype),qn(He.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"modelsMap"),He.prototype),qn(He.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"sortElements"),He.prototype),qn(He.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"textEditElement"),He.prototype),qn(He.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"selectElements"),He.prototype),qn(He.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(He.prototype,"selectNodes"),He.prototype),qn(He.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setFakerNode"),He.prototype),qn(He.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"removeFakerNode"),He.prototype),qn(He.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setModel"),He.prototype),qn(He.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"toFront"),He.prototype),qn(He.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setElementZIndex"),He.prototype),qn(He.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteNode"),He.prototype),qn(He.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"addNode"),He.prototype),qn(He.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"cloneNode"),He.prototype),qn(He.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveNode"),He.prototype),qn(He.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveNode2Coordinate"),He.prototype),qn(He.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"editText"),He.prototype),qn(He.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"addEdge"),He.prototype),qn(He.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveEdge"),He.prototype),qn(He.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeBySourceAndTarget"),He.prototype),qn(He.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeById"),He.prototype),qn(He.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeBySource"),He.prototype),qn(He.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"deleteEdgeByTarget"),He.prototype),qn(He.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setElementStateById"),He.prototype),qn(He.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"updateText"),He.prototype),qn(He.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"selectNodeById"),He.prototype),qn(He.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"selectEdgeById"),He.prototype),qn(He.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"selectElementById"),He.prototype),qn(He.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"clearSelectElements"),He.prototype),qn(He.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"moveNodes"),He.prototype),qn(He.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setDefaultEdgeType"),He.prototype),qn(He.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"changeNodeType"),He.prototype),qn(He.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"changeEdgeType"),He.prototype),qn(He.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeIncomingEdge"),He.prototype),qn(He.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeOutgoingEdge"),He.prototype),qn(He.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getAnchorIncomingEdge"),He.prototype),qn(He.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getAnchorOutcomingEdge"),He.prototype),qn(He.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeIncomingNode"),He.prototype),qn(He.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"getNodeOutgoingNode"),He.prototype),qn(He.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"setTheme"),He.prototype),qn(He.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"resize"),He.prototype),qn(He.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"clearData"),He.prototype),qn(He.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"translateCenter"),He.prototype),qn(He.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"fitView"),He.prototype),qn(He.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"openEdgeAnimation"),He.prototype),qn(He.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(He.prototype,"closeEdgeAnimation"),He.prototype),He),YN=a2;function Hb(i){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Hb(i)}function Xb(){return Xb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},Xb.apply(this,arguments)}function KN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function qb(i,o){return qb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},qb(i,o)}function ZN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=py(i);if(o){var h=py(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JN(this,l)}}function JN(i,o){if(o&&(Hb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(i)}function ec(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},py(i)}function gf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var l2,QN=ys(o2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&qb(d,m)})(h,i);var o,l,s=ZN(h);function h(d){var m;(function(F,Z){if(!(F instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,h),gf(ec(m=s.call(this)),"stepDrag",void 0),gf(ec(m),"stepScrollX",0),gf(ec(m),"stepScrollY",0),gf(ec(m),"onDragging",function(F){var Z=F.deltaX,te=F.deltaY;m.setState({isDragging:!0});var me=m.props.graphModel,ke=me.transformModel;me.editConfigModel.stopMoveGraph!==!0&&ke.translate(Z,te)}),gf(ec(m),"onDragEnd",function(){m.setState({isDragging:!1})}),gf(ec(m),"zoomHandler",function(F){var Z=m.props,te=Z.graphModel,me=te.editConfigModel,ke=te.transformModel,Ie=te.gridSize,lt=Z.graphModel,it=F.deltaX,bt=F.deltaY;if(me.stopScrollGraph||F.ctrlKey===!0){if(!me.stopZoomGraph){F.preventDefault();var Bt=lt.getPointByClient({x:F.clientX,y:F.clientY}).canvasOverlayPosition,gn=Bt.x,yn=Bt.y;ke.zoom(F.deltaY<0,[gn,yn])}}else{if(F.preventDefault(),m.stepScrollX+=it,m.stepScrollY+=bt,Math.abs(m.stepScrollX)>=Ie){var zn=m.stepScrollX%Ie,hn=m.stepScrollX-zn;ke.translate(-hn*ke.SCALE_X,0),m.stepScrollX=zn}if(Math.abs(m.stepScrollY)>=Ie){var In=m.stepScrollY%Ie,Sn=m.stepScrollY-In;ke.translate(0,-Sn*ke.SCALE_Y),m.stepScrollY=In}}}),gf(ec(m),"clickHandler",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){var Z=m.props.graphModel;Z.selectElements.size>0&&Z.clearSelectElements(),Z.eventCenter.emit(Cn.BLANK_CLICK,{e:F})}}),gf(ec(m),"handleContextMenu",function(F){if(F.target.getAttribute("name")==="canvas-overlay"){F.preventDefault();var Z=m.props.graphModel,te=Z.getPointByClient({x:F.clientX,y:F.clientY});Z.eventCenter.emit(Cn.BLANK_CONTEXTMENU,{e:F,position:te})}}),gf(ec(m),"mouseDownHandler",function(F){var Z=m.props.graphModel,te=Z.eventCenter,me=Z.editConfigModel,ke=Z.transformModel.SCALE_X,Ie=Z.gridSize,lt=F.target,it=!me.adjustEdge&&!me.adjustNodePosition;(lt.getAttribute("name")==="canvas-overlay"||it)&&(me.stopMoveGraph!==!0?(m.stepDrag.setStep(Ie*ke),m.stepDrag.handleMouseDown(F)):te.emit(Cn.BLANK_MOUSEDOWN,{e:F}),m.clickHandler(F))});var w=d.graphModel,T=w.gridSize,R=w.eventCenter;return m.stepDrag=new ve({onDragging:m.onDragging,onDragEnd:m.onDragEnd,step:T,eventType:"BLANK",isStopPropagation:!1,eventCenter:R,model:null}),m.state={isDragging:!1},m}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props,w=m.children,T=m.dnd,R=this.state.isDragging;return Object(Ue.g)("svg",Xb({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:R?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},T.eventMap()),Object(Ue.g)("g",{transform:d},w))}}])&&KN(o.prototype,l),h}(Ue.a))||o2;function Yb(i){return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Yb(i)}function eR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function tR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Kb(i,o){return Kb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Kb(i,o)}function nR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=hy(i);if(o){var h=hy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return rR(this,l)}}function rR(i,o){if(o&&(Yb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}var oR=ys(l2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Kb(d,m)})(h,i);var o,l,s=nR(h);function h(){return eR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var d=this.props,m=d.tool,w=d.graphModel,T=m.getTools().map(function(R){return Object(Ue.g)(R,{graphModel:w,logicFlow:m.instance})});return m.components=T,T}},{key:"triggerToolRender",value:function(){var d=this.props,m=d.tool,w=d.graphModel,T=document.querySelector("#ToolOverlay_".concat(w.flowId)),R=m.getInstance();R.components.forEach(function(F){return F(R,T)}),R.components=[]}},{key:"render",value:function(){var d=this.props.graphModel;return Object(Ue.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(d.flowId)},this.getTools())}}])&&tR(o.prototype,l),h}(Ue.a))||l2;function Zb(i){return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Zb(i)}function iR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function aR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Jb(i,o){return Jb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Jb(i,o)}function lR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=vy(i);if(o){var h=vy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return uR(this,l)}}function uR(i,o){if(o&&(Zb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function vy(i){return vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},vy(i)}var u2,sR=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Jb(d,m)})(h,i);var o,l,s=lR(h);function h(){return iR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.background;return Object(Ue.g)("div",{className:"lf-background"},Object(Ue.g)("div",{style:d,className:"lf-background-area"}))}}])&&aR(o.prototype,l),h}(Ue.a);function Qb(i){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qb(i)}function cR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function e_(i,o){return e_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},e_(i,o)}function dR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=my(i);if(o){var h=my(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return pR(this,l)}}function pR(i,o){if(o&&(Qb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s2(i)}function s2(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}function hR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var c2=ys(u2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&e_(d,m)})(h,i);var o,l,s=dR(h);function h(){var d;cR(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return hR(s2(d=s.call.apply(s,[this].concat(w))),"id",na()),d}return o=h,(l=[{key:"renderDot",value:function(){var d=this.props,m=d.config,w=m.color,T=m.thickness,R=T===void 0?2:T,F=d.size,Z=d.visible,te=Math.min(Math.max(2,R),F/2),me=1;return Z||(me=0),Object(Ue.g)("rect",{width:te,height:te,rx:te/2,ry:te/2,fill:w,opacity:me})}},{key:"renderMesh",value:function(){var d=this.props,m=d.config,w=m.color,T=m.thickness,R=T===void 0?1:T,F=d.size,Z=d.visible,te=Math.min(Math.max(1,R),F/2),me="M ".concat(F," 0 H0 M0 0 V0 ").concat(F),ke=1;return Z||(ke=0),Object(Ue.g)("path",{d:me,stroke:w,strokeWidth:te,opacity:ke})}},{key:"render",value:function(){var d=this.props,m=d.type,w=d.size,T=d.graphModel.transformModel,R=[T.SCALE_X,T.SKEW_Y,T.SKEW_X,T.SCALE_Y,T.TRANSLATE_X,T.TRANSLATE_Y].join(","),F="matrix(".concat(R,")");return Object(Ue.g)("div",{className:"lf-grid"},Object(Ue.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Ue.g)("defs",null,Object(Ue.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:F,x:"0",y:"0",width:w,height:w},m==="dot"&&this.renderDot(),m==="mesh"&&this.renderMesh())),Object(Ue.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&fR(o.prototype,l),h}(Ue.a))||u2;c2.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function t_(i){return t_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t_(i)}function vR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return f2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return f2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var d2,Wh=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(l){var s=vR(l,2),h=s[0],d=s[1];(h==="style"||t_(d)!=="object")&&(o[h]=d)}),Object(Ue.g)("line",o)};function n_(i){return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n_(i)}function p2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function yy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?p2(Object(l),!0).forEach(function(s){mR(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):p2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function mR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function yR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function gR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function r_(i,o){return r_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},r_(i,o)}function bR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=gy(i);if(o){var h=gy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return _R(this,l)}}function _R(i,o){if(o&&(n_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function gy(i){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},gy(i)}var h2,wR=ys(d2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&r_(d,m)})(h,i);var o,l,s=bR(h);function h(){return yR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.snaplineModel,m=d.position,w=d.isShowHorizontal,T=d.isShowVertical,R=d.getStyle(),F=m.x,Z=F===void 0?0:F,te=m.y,me=te===void 0?0:te,ke=yy(yy({x1:-1e5,y1:me,x2:1e5,y2:me},R),{},{stroke:w?R.stroke:"none"}),Ie=yy(yy({x1:Z,y1:-1e5,x2:Z,y2:1e5},R),{},{stroke:T?R.stroke:"none"});return Object(Ue.g)("g",{className:"lf-snapline"},Object(Ue.g)(Wh,ke),Object(Ue.g)(Wh,Ie))}}])&&gR(o.prototype,l),h}(Ue.a))||d2;function o_(i){return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o_(i)}function ER(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return v2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return v2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Rd(i){var o=i.x,l=i.y,s=i.width,h=i.height,d=i.className,m=i.radius,w=o-s/2,T=l-h/2,R={};return Object.entries(i).forEach(function(F){var Z=ER(F,2),te=Z[0],me=Z[1];o_(me)!=="object"&&(R[te]=me)}),R.className=d?"lf-basic-shape ".concat(d):"lf-basic-shape",m&&(R.rx=m,R.ry=m),R.x=w,R.y=T,Object(Ue.g)("rect",R)}function i_(i){return i_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i_(i)}function Gh(){return Gh=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},Gh.apply(this,arguments)}function m2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function y2(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?m2(Object(l),!0).forEach(function(s){OR(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):m2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function OR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function SR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function a_(i,o){return a_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},a_(i,o)}function AR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=by(i);if(o){var h=by(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return TR(this,l)}}function TR(i,o){if(o&&(i_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function by(i){return by=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},by(i)}Rd.defaultProps={className:"",radius:""};var g2,MR=ys(h2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&a_(d,m)})(h,i);var o,l,s=AR(h);function h(){return SR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getNodesOutline",value:function(){var d=this.props.graphModel,m=d.nodes,w=d.editConfigModel,T=w.hoverOutline,R=w.nodeSelectedOutline,F=[];return m.forEach(function(Z){if(Z.isHovered||Z.isSelected){var te=Z.isHovered,me=Z.isSelected,ke=Z.x,Ie=Z.y,lt=Z.width,it=Z.height;if(R&&me||T&&te){var bt=Z.getOutlineStyle(),Bt={};if(Object.keys(bt).forEach(function(yn){yn!=="hover"&&(Bt[yn]=bt[yn])}),te){var gn=bt.hover;Bt=y2(y2({},Bt),gn)}F.push(Object(Ue.g)(Rd,Gh({transform:Z.transform,className:"lf-outline-node",x:ke,y:Ie,width:lt+10,height:it+10},Bt)))}}}),F}},{key:"getEdgeOutline",value:function(){for(var d=this.props.graphModel,m=d.edges,w=d.editConfigModel,T=w.edgeSelectedOutline,R=w.hoverOutline,F=[],Z=0;Z<m.length;Z++){var te=m[Z];(T&&te.isSelected||R&&te.isHovered)&&(te.modelType===xr.LINE_EDGE?F.push(this.getLineOutline(te)):te.modelType===xr.POLYLINE_EDGE?F.push(this.getPolylineOutline(te)):te.modelType===xr.BEZIER_EDGE&&F.push(this.getBezierOutline(te)))}return F}},{key:"getLineOutline",value:function(d){var m=d.startPoint,w=d.endPoint,T=(m.x+w.x)/2,R=(m.y+w.y)/2,F=Math.abs(m.x-w.x)+10,Z=Math.abs(m.y-w.y)+10,te=d.getOutlineStyle();return Object(Ue.g)(Rd,Gh({className:"lf-outline-edge",x:T,y:R,width:F,height:Z},te))}},{key:"getPolylineOutline",value:function(d){var m=d.points,w=nr(m),T=st(w,8),R=T.x,F=T.y,Z=T.width,te=T.height,me=d.getOutlineStyle();return Object(Ue.g)(Rd,Gh({className:"lf-outline",x:R,y:F,width:Z,height:te},me))}},{key:"getBezierOutline",value:function(d){var m=d.path,w=vo(m),T=st(w,8),R=T.x,F=T.y,Z=T.width,te=T.height,me=d.getOutlineStyle();return Object(Ue.g)(Rd,Gh({className:"lf-outline",x:R,y:F,width:Z,height:te},me))}},{key:"render",value:function(){return Object(Ue.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&xR(o.prototype,l),h}(Ue.a))||h2;function l_(i){return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},l_(i)}function kR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return b2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return b2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function zh(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,d=i.r,m=d===void 0?4:d,w=i.className,T={cx:l,cy:h,r:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(R){var F=kR(R,2),Z=F[0],te=F[1];l_(te)!=="object"&&(T[Z]=te)}),T.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(Ue.g)("circle",T)}function u_(i){return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u_(i)}function PR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return _2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function sm(){return sm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},sm.apply(this,arguments)}function w2(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function NR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E2(i,o,l){return o&&NR(i.prototype,o),i}function O2(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&s_(i,o)}function s_(i,o){return s_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},s_(i,o)}function S2(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=wy(i);if(o){var h=wy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return RR(this,l)}}function RR(i,o){if(o&&(u_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _y(i)}function _y(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function wy(i){return wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},wy(i)}function c_(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var x2,A2=function(i){O2(l,i);var o=S2(l);function l(){var s;return w2(this,l),c_(_y(s=o.call(this)),"dragHandler",void 0),c_(_y(s),"onDragging",function(h){var d=h.event,m=s.props,w=m.graphModel,T=m.bezierModel,R=m.type,F=w.getPointByClient({x:d.clientX,y:d.clientY}).canvasOverlayPosition,Z=F.x,te=F.y;T.updateAdjustAnchor({x:Z,y:te},R),w.eventCenter.emit(Cn.EDGE_ADJUST,{data:T.getData()})}),c_(_y(s),"onDragEnd",function(){s.props.bezierModel.isDragging=!1}),s.dragHandler=new ve({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return E2(l,[{key:"render",value:function(){var s=this,h=this.props.position,d=h.x,m=h.y,w=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Ue.g)(zh,sm({className:"lf-bezier-adjust-anchor",x:d,y:m},w,{onMouseDown:function(T){s.dragHandler.handleMouseDown(T)}}))}}]),l}(Ue.a),CR=ys(g2=function(i){O2(l,i);var o=S2(l);function l(){return w2(this,l),o.apply(this,arguments)}return E2(l,[{key:"getBezierAdjust",value:function(s,h){var d=s.path,m=s.id,w=PR(vo(d),4),T=w[0],R=w[1],F=w[2],Z=w[3],te=s.getEdgeStyle().adjustLine,me=[];return me.push(Object(Ue.g)(Wh,sm({x1:T.x,y1:T.y,x2:R.x,y2:R.y},te))),me.push(Object(Ue.g)(A2,{position:R,bezierModel:s,graphModel:h,key:"".concat(m,"_ePre"),type:"sNext"})),me.push(Object(Ue.g)(Wh,sm({x1:Z.x,y1:Z.y,x2:F.x,y2:F.y},te))),me.push(Object(Ue.g)(A2,{position:F,bezierModel:s,graphModel:h,key:"".concat(m,"_sNext"),type:"ePre"})),me}},{key:"selectedBezierEdge",value:function(){for(var s=this.props.graphModel,h=s.edges,d=[],m=0;m<h.length;m++){var w=h[m];w.isSelected&&w.modelType===xr.BEZIER_EDGE&&w.draggable&&d.push(this.getBezierAdjust(w,s))}return d}},{key:"render",value:function(){return Object(Ue.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Ue.a))||g2;function f_(i){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f_(i)}function DR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function jR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function d_(i,o){return d_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},d_(i,o)}function IR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ey(i);if(o){var h=Ey(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return LR(this,l)}}function LR(i,o){if(o&&(f_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Ey(i){return Ey=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ey(i)}var T2,FR=ys(x2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&d_(d,m)})(h,i);var o,l,s=IR(h);function h(){return DR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props.children;return Object(Ue.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Ue.g)("g",{transform:d},m))}}])&&jR(o.prototype,l),h}(Ue.a))||x2;function p_(i){return p_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},p_(i)}function h_(){return h_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},h_.apply(this,arguments)}function $R(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function UR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function v_(i,o){return v_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},v_(i,o)}function BR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Oy(i);if(o){var h=Oy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return VR(this,l)}}function VR(i,o){if(o&&(p_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Oy(i){return Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Oy(i)}var WR=ys(T2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&v_(d,m)})(h,i);var o,l,s=BR(h);function h(){return $R(this,h),s.apply(this,arguments)}return o=h,l=[{key:"getComponent",value:function(d,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",T=this.props.getView,R=T(d.type);return Object(Ue.g)(R,{key:d.id,model:d,graphModel:m,overlay:w})}},{key:"render",value:function(){var d=this,m=this.props,w=m.graphModel,T=m.tool,R=m.options,F=m.dnd,Z=m.snaplineModel,te={};R.width&&(te.width="".concat(w.width,"px")),R.height&&(te.height="".concat(w.height,"px"));var me=R.grid,ke=w.fakerNode,Ie=w.editConfigModel.adjustEdge;return Object(Ue.g)("div",{className:"lf-graph","flow-id":w.flowId,style:te},Object(Ue.g)(QN,{graphModel:w,dnd:F},Object(Ue.g)("g",{className:"lf-base"},Qf(w.sortElements,function(lt){return d.getComponent(lt,w)})),ke?this.getComponent(ke,w):""),Object(Ue.g)(FR,{graphModel:w},Object(Ue.g)(MR,{graphModel:w}),Ie?Object(Ue.g)(CR,{graphModel:w}):"",R.snapline!==!1?Object(Ue.g)(wR,{snaplineModel:Z}):""),Object(Ue.g)(oR,{graphModel:w,tool:T}),R.background&&Object(Ue.g)(sR,{background:R.background}),R.grid&&Object(Ue.g)(c2,h_({},me,{graphModel:w})))}}],l&&UR(o.prototype,l),h}(Ue.a))||T2,GR=WR;function M2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Sy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?M2(Object(l),!0).forEach(function(s){bf(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):M2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function zR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function bf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var HR=function(){function i(s){var h=this;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),bf(this,"nodeConfig",void 0),bf(this,"lf",void 0),bf(this,"fakerNode",void 0),bf(this,"stopDrag",function(){h.nodeConfig=null,window.document.removeEventListener("mouseup",h.stopDrag)}),bf(this,"dragEnter",function(m){h.nodeConfig&&!h.fakerNode&&(h.fakerNode=h.lf.createFakerNode(Sy(Sy({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY}))))}),bf(this,"onDragOver",function(m){if(m.preventDefault(),h.fakerNode){var w=h.clientToLocalPoint({x:m.clientX,y:m.clientY}),T=w.x,R=w.y;h.fakerNode.moveTo(T,R);var F=h.fakerNode.getData();h.lf.setNodeSnapLine(F),h.lf.graphModel.eventCenter.emit(Cn.NODE_DND_DRAG,{data:F})}return!1}),bf(this,"onDragLeave",function(){h.fakerNode&&(h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)}),bf(this,"onDrop",function(m){h.lf.graphModel&&m&&h.nodeConfig&&(h.lf.addNode(Sy(Sy({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY})),Cn.NODE_DND_ADD,m),m.preventDefault(),m.stopPropagation(),h.nodeConfig=null,h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)});var d=s.lf;this.lf=d}var o,l;return o=i,(l=[{key:"clientToLocalPoint",value:function(s){var h=s.x,d=s.y,m=Vu(this.lf.options,["grid","size"]),w=this.lf.graphModel.getPointByClient({x:h,y:d}).canvasOverlayPosition,T=w.x,R=w.y;return{x:rl(T,m),y:rl(R,m)}}},{key:"startDrag",value:function(s){var h=this.lf.graphModel.editConfigModel;h!=null&&h.isSilentMode||(this.nodeConfig=s,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&zR(o.prototype,l),i}();function k2(i){var o=i.container,l=i.grid,s=i.width,h=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof s=="string"||typeof h=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(i.grid=Qu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Qu({},N2,i)}var so,P2,N2={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function m_(i){return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},m_(i)}function y_(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return R2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return R2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function C2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function xy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?C2(Object(l),!0).forEach(function(s){D2(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):C2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function XR(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function qR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function YR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function cm(){return cm=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=KR(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},cm.apply(this,arguments)}function KR(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Cd(i))!==null;);return i}function g_(i,o){return g_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},g_(i,o)}function ZR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Cd(i);if(o){var h=Cd(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JR(this,l)}}function JR(i,o){if(o&&(m_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ay(i)}function Ay(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cd(i){return Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cd(i)}function D2(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function hs(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var b_=(so=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&g_(d,m)})(h,i);var o,l,s=ZR(h);function h(){var d;qR(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return D2(Ay(d=s.call.apply(s,[this].concat(w))),"modelType",xr.BEZIER_EDGE),XR(Ay(d),"path",P2,Ay(d)),d}return o=h,(l=[{key:"initEdgeData",value:function(d){this.offset=100,cm(Cd(h.prototype),"initEdgeData",this).call(this,d)}},{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.bezier;return xy(xy({},cm(Cd(h.prototype),"getEdgeStyle",this).call(this)),to(d))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var d=0,m=0;return this.pointsList.forEach(function(w){var T=w.x,R=w.y;d+=T,m+=R}),{x:d/this.pointsList.length,y:m/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var d=cm(Cd(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return xy(xy({},d),{},{pointsList:m})}},{key:"getControls",value:function(){var d=this.startPoint,m=this.endPoint;return Jo({start:d,end:m,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(d){var m=y_(d,4),w=m[0],T=m[1],R=m[2],F=m[3];return"M ".concat(w.x," ").concat(w.y,`
    C `).concat(T.x," ").concat(T.y,`,
    `).concat(R.x," ").concat(R.y,`,
    `).concat(F.x," ").concat(F.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var d=this.getControls(),m=d.sNext,w=d.ePre;this.updatePath(m,w)}},{key:"updatePath",value:function(d,m){d=to(d),m=to(m);var w={x:this.startPoint.x,y:this.startPoint.y},T={x:this.endPoint.x,y:this.endPoint.y};if(!d||!m){var R=this.getControls();d=R.sNext,m=R.ePre}this.pointsList=[w,d,m,T],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(d){this.startPoint=Object.assign({},d),this.updatePoints()}},{key:"updateEndPoint",value:function(d){this.endPoint=Object.assign({},d),this.updatePoints()}},{key:"moveStartPoint",value:function(d,m){this.startPoint.x+=d,this.startPoint.y+=m;var w=y_(this.pointsList,3),T=w[1],R=w[2];T.x+=d,T.y+=m,this.updatePath(T,R)}},{key:"moveEndPoint",value:function(d,m){this.endPoint.x+=d,this.endPoint.y+=m;var w=y_(this.pointsList,3),T=w[1],R=w[2];R.x+=d,R.y+=m,this.updatePath(T,R)}},{key:"updateAdjustAnchor",value:function(d,m){m==="sNext"?this.pointsList[1]=d:m==="ePre"&&(this.pointsList[2]=d),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var d=this.pointsList;return d[d.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(d){var m=d.startPoint,w=d.endPoint,T=d.sourceNode,R=d.targetNode,F=Jo({start:m,end:w,sourceNode:T,targetNode:R,offset:this.offset}),Z=F.sNext,te=F.ePre;this.pointsList=[m,Z,te,w],this.initPoints()}}])&&YR(o.prototype,l),h}(ff),P2=hs(so.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hs(so.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"initPoints"),so.prototype),hs(so.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updatePoints"),so.prototype),hs(so.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateStartPoint"),so.prototype),hs(so.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateEndPoint"),so.prototype),hs(so.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"moveStartPoint"),so.prototype),hs(so.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"moveEndPoint"),so.prototype),hs(so.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateAdjustAnchor"),so.prototype),hs(so.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"getAdjustStart"),so.prototype),hs(so.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"getAdjustEnd"),so.prototype),hs(so.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateAfterAdjustStartAndEnd"),so.prototype),so),ln,j2,I2,L2,F2,$2,U2,B2,V2,W2,G2,z2,H2,X2,q2,Y2,K2,Z2,J2,Q2,eO,tO,nO,QR=function(i){return i==null};function eC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||rO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function __(i){return __=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},__(i)}function rO(i,o){if(i){if(typeof i=="string")return oO(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?oO(i,o):void 0}}function oO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function iO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function sl(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?iO(Object(l),!0).forEach(function(s){kl(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):iO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Ni(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function tC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function kl(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mr(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var _f,aO,wf=(ln=function(){function i(s,h){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),kl(this,"id",""),Ni(this,"type",j2,this),Ni(this,"x",I2,this),Ni(this,"y",L2,this),Ni(this,"text",F2,this),Ni(this,"properties",$2,this),Ni(this,"_width",U2,this),Ni(this,"_height",B2,this),Ni(this,"anchorsOffset",V2,this),Ni(this,"isSelected",W2,this),Ni(this,"isHovered",G2,this),Ni(this,"isShowAnchor",z2,this),Ni(this,"isDragging",H2,this),Ni(this,"isHitable",X2,this),Ni(this,"draggable",q2,this),Ni(this,"visible",Y2,this),Ni(this,"enableRotate",K2,this),kl(this,"virtual",!1),kl(this,"graphModel",void 0),Ni(this,"zIndex",Z2,this),Ni(this,"state",J2,this),Ni(this,"autoToFront",Q2,this),Ni(this,"style",eO,this),Ni(this,"transform",tO,this),Ni(this,"_rotate",nO,this),kl(this,"BaseType",co.NODE),kl(this,"modelType",xr.NODE),kl(this,"additionStateData",void 0),kl(this,"targetRules",[]),kl(this,"sourceRules",[]),kl(this,"moveRules",[]),kl(this,"hasSetTargetRules",!1),kl(this,"hasSetSourceRules",!1),this.graphModel=h,this.initNodeData(s),this.setAttributes()}var o,l;return o=i,l=[{key:"width",get:function(){return this._width},set:function(s){this._width=s}},{key:"height",get:function(){return this._height},set:function(s){this._height=s}},{key:"rotate",get:function(){return this._rotate},set:function(s){this._rotate=s;var h=this.x,d=h===void 0?0:h,m=this.y,w=m===void 0?0:m;this.transform=new Nd(-d,-w).rotate(s).translate(d,w).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var h=this.graphModel.idGenerator,d=h&&h(s.type),m=this.createId();s.id=m||d||na()}this.formatText(s),Li(this,function(w){return tl(w,["id","type","x","y","text","properties","virtual","rotate"])}(s)),this.graphModel.overlapMode===To.INCREASE&&(this.zIndex=s.zIndex||ls())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(s){s.text||(s.text={value:"",x:s.x,y:s.y,draggable:!1,editable:!0}),s.text&&typeof s.text=="string"?s.text={value:s.text,x:s.x,y:s.y,draggable:!1,editable:!0}:s.text&&s.text.editable===void 0&&(s.text.editable=!0)}},{key:"getData",value:function(){var s=this.text,h=s.x,d=s.y,m=s.value,w=this.properties;Object(c.x)(w)&&(w=Object(c.I)(w));var T={id:this.id,type:this.type,x:this.x,y:this.y,properties:w};return this.rotate&&(T.rotate=this.rotate),this.graphModel.overlapMode===To.INCREASE&&(T.zIndex=this.zIndex),m&&(T.text={x:h,y:d,value:m}),T}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return sl(sl({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.nodeText;return to(s)}},{key:"getRotateControlStyle",value:function(){var s=this.graphModel.theme.rotateControl;return to(s)}},{key:"getAnchorStyle",value:function(s){var h=this.graphModel.theme.anchor;return to(h)}},{key:"getAnchorLineStyle",value:function(s){var h=this.graphModel.theme.anchorLine;return to(h)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return to(s)}},{key:"isAllowConnectedAsSource",value:function(s,h,d,m){var w=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var T,R=!0,F=0;F<w.length;F++){var Z=w[F];if(!Z.validate.call(this,this,s,h,d,m)){R=!1,T=Z.message;break}}return{isAllPass:R,msg:T}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(s,h,d,m){var w=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var T,R=!0,F=0;F<w.length;F++){var Z=w[F];if(!Z.validate.call(this,s,this,h,d,m)){R=!1,T=Z.message;break}}return{isAllPass:R,msg:T}}},{key:"isAllowMoveNode",value:function(s,h){var d,m=!0,w=!0,T=function(Z,te){var me=typeof Symbol<"u"&&Z[Symbol.iterator]||Z["@@iterator"];if(!me){if(Array.isArray(Z)||(me=rO(Z))||te){me&&(Z=me);var ke=0,Ie=function(){};return{s:Ie,n:function(){return ke>=Z.length?{done:!0}:{done:!1,value:Z[ke++]}},e:function(Bt){throw Bt},f:Ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt,it=!0,bt=!1;return{s:function(){me=me.call(Z)},n:function(){var Bt=me.next();return it=Bt.done,Bt},e:function(Bt){bt=!0,lt=Bt},f:function(){try{it||me.return==null||me.return()}finally{if(bt)throw lt}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(T.s();!(d=T.n()).done;){var R=(0,d.value)(this,s,h);if(!R)return!1;if(__(R)==="object"){var F=R;if(F.x===!1&&F.y===!1)return!1;m=m&&F.x,w=w&&F.y}}}catch(Z){T.e(Z)}finally{T.f()}return{x:m,y:w}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var s=this.anchorsOffset,h=this.id,d=this.x,m=this.y;return s&&s.length>0?s.map(function(w,T){return w.length?(w=w,{id:"".concat(h,"_").concat(T),x:d+w[0],y:m+w[1]}):sl(sl({},w=w),{},{x:d+w.x,y:m+w.y,id:w.id||"".concat(h,"_").concat(T)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(s){return function(h,d){for(var m,w=xd(d),T=Number.MAX_SAFE_INTEGER,R=0;R<w.length;R++){var F=ll(h.x,h.y,w[R].x,w[R].y);F<T&&(T=F,m={index:R,anchor:Al(Al({},w[R]),{},{x:w[R].x,y:w[R].y,id:w[R].id})})}return m}(s,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var s=this.getAnchorsByOffset(),h=this.x,d=this.y,m=this.rotate;return s.forEach(function(w){var T=w.x,R=w.y,F=eC(new xu([T,R,1]).translate(-h,-d).rotate(m).translate(h,d)[0],2),Z=F[0],te=F[1];w.x=Z,w.y=te}),s}},{key:"getAnchorInfo",value:function(s){if(!QR(s))for(var h=0;h<this.anchors.length;h++){var d=this.anchors[h];if(d.id===s)return d}}},{key:"addNodeMoveRules",value:function(s){this.moveRules.includes(s)||this.moveRules.push(s)}},{key:"move",value:function(s,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1;if(d)m=!0,w=!0;else{var T=this.isAllowMoveNode(s,h);typeof T=="boolean"?(m=T,w=T):(m=T.x,w=T.y)}if(m){var R=this.x+s;this.x=R,this.text&&this.moveText(s,0)}if(w){var F=this.y+h;this.y=F,this.text&&this.moveText(0,h)}return m||w}},{key:"getMoveDistance",value:function(s,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1,T=0,R=0;if(d)m=!0,w=!0;else{var F=this.isAllowMoveNode(s,h);typeof F=="boolean"?(m=F,w=F):(m=F.x,w=F.y)}if(m&&s){var Z=this.x+s;this.x=Z,this.text&&this.moveText(s,0),T=s}if(w&&h){var te=this.y+h;this.y=te,this.text&&this.moveText(0,h),R=h}return[T,R]}},{key:"moveTo",value:function(s,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=s-this.x,w=h-this.y;return!(!d&&!this.isAllowMoveNode(m,w)||(this.text&&this.text&&this.moveText(m,w),this.x=s,this.y=h,0))}},{key:"moveText",value:function(s,h){var d=this.text,m=d.x,w=d.y,T=d.value,R=d.draggable,F=d.editable;this.text={value:T,editable:F,draggable:R,x:m+s,y:w+h}}},{key:"updateText",value:function(s){this.text=sl(sl({},Object(c.I)(this.text)),{},{value:s})}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s,this.setIsShowAnchor(s)}},{key:"setIsShowAnchor",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=s}},{key:"setEnableRotate",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"setElementState",value:function(s,h){this.state=s,this.additionStateData=h}},{key:"setProperty",value:function(s,h){this.properties=sl(sl({},Object(c.I)(this.properties)),{},kl({},s,bi(h))),this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=sl(sl({},Object(c.I)(this.properties)),bi(s)),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setStyle",value:function(s,h){this.style=sl(sl({},this.style),{},kl({},s,bi(h)))}},{key:"setStyles",value:function(s){this.style=sl(sl({},this.style),bi(s))}},{key:"updateStyles",value:function(s){this.style=sl({},bi(s))}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=s}},{key:"updateAttributes",value:function(s){Li(this,s)}}],l&&tC(o.prototype,l),i}(),j2=Mr(ln.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I2=Mr(ln.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L2=Mr(ln.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F2=Mr(ln.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),$2=Mr(ln.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),U2=Mr(ln.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),B2=Mr(ln.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),V2=Mr(ln.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W2=Mr(ln.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G2=Mr(ln.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z2=Mr(ln.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H2=Mr(ln.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X2=Mr(ln.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q2=Mr(ln.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y2=Mr(ln.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K2=Mr(ln.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z2=Mr(ln.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J2=Mr(ln.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q2=Mr(ln.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),eO=Mr(ln.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tO=Mr(ln.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nO=Mr(ln.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mr(ln.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(ln.prototype,"incoming"),ln.prototype),Mr(ln.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(ln.prototype,"outgoing"),ln.prototype),Mr(ln.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"addNodeMoveRules"),ln.prototype),Mr(ln.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"move"),ln.prototype),Mr(ln.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"getMoveDistance"),ln.prototype),Mr(ln.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"moveTo"),ln.prototype),Mr(ln.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"moveText"),ln.prototype),Mr(ln.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateText"),ln.prototype),Mr(ln.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setSelected"),ln.prototype),Mr(ln.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setHovered"),ln.prototype),Mr(ln.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setIsShowAnchor"),ln.prototype),Mr(ln.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setEnableRotate"),ln.prototype),Mr(ln.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setHitable"),ln.prototype),Mr(ln.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setElementState"),ln.prototype),Mr(ln.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setProperty"),ln.prototype),Mr(ln.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setProperties"),ln.prototype),Mr(ln.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"deleteProperty"),ln.prototype),Mr(ln.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setStyle"),ln.prototype),Mr(ln.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setStyles"),ln.prototype),Mr(ln.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateStyles"),ln.prototype),Mr(ln.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setZIndex"),ln.prototype),Mr(ln.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateAttributes"),ln.prototype),ln);function w_(i){return w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},w_(i)}function lO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function uO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lO(Object(l),!0).forEach(function(s){sO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function nC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function rC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function oC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E_(){return E_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=iC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},E_.apply(this,arguments)}function iC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Hh(i))!==null;);return i}function O_(i,o){return O_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},O_(i,o)}function aC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Hh(i);if(o){var h=Hh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return lC(this,l)}}function lC(i,o){if(o&&(w_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ty(i)}function Ty(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hh(i){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hh(i)}function sO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function S_(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Va,cO,fO,x_=(_f=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&O_(d,m)})(h,i);var o,l,s=aC(h);function h(){var d;rC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return sO(Ty(d=s.call.apply(s,[this].concat(w))),"modelType",xr.CIRCLE_NODE),nC(Ty(d),"r",aO,Ty(d)),d}return o=h,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var d=E_(Hh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.circle;return uO(uO({},d),to(m))}},{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.r;return[{x:d,y:m-w,id:"".concat(this.id,"_0")},{x:d+w,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+w,id:"".concat(this.id,"_2")},{x:d-w,y:m,id:"".concat(this.id,"_3")}]}}])&&oC(o.prototype,l),h}(wf),aO=S_(_f.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),S_(_f.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"width"),_f.prototype),S_(_f.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"height"),_f.prototype),_f);r(129);function A_(i){return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},A_(i)}function T_(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return dO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function pO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function hO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pO(Object(l),!0).forEach(function(s){mO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function vO(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function uC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function M_(){return M_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=cC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},M_.apply(this,arguments)}function cC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=qh(i))!==null;);return i}function k_(i,o){return k_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},k_(i,o)}function fC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=qh(i);if(o){var h=qh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return dC(this,l)}}function dC(i,o){if(o&&(A_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xh(i)}function Xh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qh(i){return qh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qh(i)}function mO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Yh(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var tc,yO,gO,P_=(Va=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&k_(d,m)})(h,i);var o,l,s=fC(h);function h(){var d;uC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return mO(Xh(d=s.call.apply(s,[this].concat(w))),"modelType",xr.DIAMOND_NODE),vO(Xh(d),"rx",cO,Xh(d)),vO(Xh(d),"ry",fO,Xh(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=M_(qh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.diamond;return hO(hO({},d),to(m))}},{key:"points",get:function(){var d=this.x,m=this.y,w=this.rx,T=this.ry;return[[d,m-T],[d+w,m],[d,m+T],[d-w,m]]}},{key:"pointsPosition",get:function(){return this.points.map(function(d){return{x:d[0],y:d[1]}})}},{key:"width",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=T_(w,1)[0];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"height",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=T_(w,2)[1];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"getDefaultAnchor",value:function(){var d=this;return this.points.map(function(m,w){var T=T_(m,2);return{x:T[0],y:T[1],id:"".concat(d.id,"_").concat(w)}})}}])&&sC(o.prototype,l),h}(wf),cO=Yh(Va.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),fO=Yh(Va.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Yh(Va.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"points"),Va.prototype),Yh(Va.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"pointsPosition"),Va.prototype),Yh(Va.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"width"),Va.prototype),Yh(Va.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Va.prototype,"height"),Va.prototype),Va);function N_(i){return N_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},N_(i)}function bO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function _O(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?bO(Object(l),!0).forEach(function(s){EO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):bO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function wO(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function pC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function R_(){return R_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=vC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},R_.apply(this,arguments)}function vC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Zh(i))!==null;);return i}function C_(i,o){return C_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},C_(i,o)}function mC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Zh(i);if(o){var h=Zh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return yC(this,l)}}function yC(i,o){if(o&&(N_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kh(i)}function Kh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zh(i){return Zh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Zh(i)}function EO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function My(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Tu,OO,D_=(tc=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&C_(d,m)})(h,i);var o,l,s=mC(h);function h(){var d;pC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return EO(Kh(d=s.call.apply(s,[this].concat(w))),"modelType",xr.ELLIPSE_NODE),wO(Kh(d),"rx",yO,Kh(d)),wO(Kh(d),"ry",gO,Kh(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=R_(Zh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.ellipse;return _O(_O({},d),to(m))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.rx,T=this.ry;return[{x:d,y:m-T,id:"".concat(this.id,"_0")},{x:d+w,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T,id:"".concat(this.id,"_2")},{x:d-w,y:m,id:"".concat(this.id,"_3")}]}}])&&hC(o.prototype,l),h}(wf),yO=My(tc.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),gO=My(tc.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),My(tc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(tc.prototype,"width"),tc.prototype),My(tc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(tc.prototype,"height"),tc.prototype),tc);function j_(i){return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},j_(i)}function I_(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return SO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return SO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function xO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function AO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xO(Object(l),!0).forEach(function(s){TO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function gC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function bC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _C(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function L_(){return L_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=wC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},L_.apply(this,arguments)}function wC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Jh(i))!==null;);return i}function F_(i,o){return F_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},F_(i,o)}function EC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Jh(i);if(o){var h=Jh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return OC(this,l)}}function OC(i,o){if(o&&(j_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ky(i)}function ky(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jh(i){return Jh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jh(i)}function TO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Py(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var $_,MO,U_=(Tu=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&F_(d,m)})(h,i);var o,l,s=EC(h);function h(){var d;bC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return TO(ky(d=s.call.apply(s,[this].concat(w))),"modelType",xr.POLYGON_NODE),gC(ky(d),"points",OO,ky(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=L_(Jh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.polygon;return AO(AO({},d),to(m))}},{key:"pointsPosition",get:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return this.points.map(function(R){return{x:R[0]+d-w/2,y:R[1]+m-T/2}})}},{key:"width",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=I_(w,1)[0];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"height",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=I_(w,2)[1];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"getDefaultAnchor",value:function(){var d=this,m=this.x,w=this.y,T=this.width,R=this.height;return this.points.map(function(F,Z){var te=I_(F,2),me=te[0],ke=te[1];return{x:m+me-T/2,y:w+ke-R/2,id:"".concat(d.id,"_").concat(Z)}})}}])&&_C(o.prototype,l),h}(wf),OO=Py(Tu.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Py(Tu.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Tu.prototype,"pointsPosition"),Tu.prototype),Py(Tu.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Tu.prototype,"width"),Tu.prototype),Py(Tu.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Tu.prototype,"height"),Tu.prototype),Tu);function B_(i){return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},B_(i)}function kO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function PO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?kO(Object(l),!0).forEach(function(s){NO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):kO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function SC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function xC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function AC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function V_(){return V_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=TC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},V_.apply(this,arguments)}function TC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Qh(i))!==null;);return i}function W_(i,o){return W_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},W_(i,o)}function MC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Qh(i);if(o){var h=Qh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return kC(this,l)}}function kC(i,o){if(o&&(B_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ny(i)}function Ny(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qh(i){return Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qh(i)}function NO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Dd,G_=($_=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&W_(d,m)})(h,i);var o,l,s=MC(h);function h(){var d;xC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return NO(Ny(d=s.call.apply(s,[this].concat(w))),"modelType",xr.RECT_NODE),SC(Ny(d),"radius",MO,Ny(d)),d}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return[{x:d,y:m-T/2,id:"".concat(this.id,"_0")},{x:d+w/2,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T/2,id:"".concat(this.id,"_2")},{x:d-w/2,y:m,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var d=V_(Qh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.rect;return PO(PO({},d),to(m))}}])&&AC(o.prototype,l),h}(wf),MO=function(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}($_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$_);function z_(i){return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z_(i)}function RO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function CO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?RO(Object(l),!0).forEach(function(s){jO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):RO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function PC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function NC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function H_(){return H_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=RC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},H_.apply(this,arguments)}function RC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ev(i))!==null;);return i}function X_(i,o){return X_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},X_(i,o)}function CC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ev(i);if(o){var h=ev(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return DC(this,l)}}function DC(i,o){if(o&&(z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DO(i)}function DO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ev(i){return ev=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ev(i)}function jO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function IO(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var q_=(Dd=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&X_(d,m)})(h,i);var o,l,s=CC(h);function h(){var d;PC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return jO(DO(d=s.call.apply(s,[this].concat(w))),"modelType",xr.TEXT_NODE),d}return o=h,(l=[{key:"getTextStyle",value:function(){var d=H_(ev(h.prototype),"getTextStyle",this).call(this),m=this.graphModel.theme.text;return CO(CO({},d),to(m))}},{key:"width",get:function(){var d=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return as({rows:d,fontSize:m,rowsLength:d.length}).width}},{key:"height",get:function(){var d=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return as({rows:d,fontSize:m,rowsLength:d.length}).height}}])&&NC(o.prototype,l),h}(wf),IO(Dd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Dd.prototype,"width"),Dd.prototype),IO(Dd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Dd.prototype,"height"),Dd.prototype),Dd);function Y_(i){return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Y_(i)}function jC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function IC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function K_(i,o){return K_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},K_(i,o)}function LC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ry(i);if(o){var h=Ry(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return FC(this,l)}}function FC(i,o){if(o&&(Y_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LO(i)}function LO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ry(i){return Ry=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ry(i)}function $C(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var vs,FO,$O,UO,Z_=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&K_(d,m)})(h,i);var o,l,s=LC(h);function h(){var d;jC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return $C(LO(d=s.call.apply(s,[this].concat(w))),"modelType",xr.HTML_NODE),d}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return[{x:d,y:m-T/2,id:"".concat(this.id,"_0")},{x:d+w/2,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T/2,id:"".concat(this.id,"_2")},{x:d-w/2,y:m,id:"".concat(this.id,"_3")}]}}])&&IC(o.prototype,l),h}(wf);function BO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function J_(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function UC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function VO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function fm(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var WO=(vs=function(){function i(s){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),VO(this,"graphModel",void 0),J_(this,"isShowHorizontal",FO,this),J_(this,"isShowVertical",$O,this),J_(this,"position",UO,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=s}var o,l;return o=i,l=[{key:"getStyle",value:function(){return function(s){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?BO(Object(d),!0).forEach(function(m){VO(s,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(d)):BO(Object(d)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(d,m))})}return s}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(s,h){for(var d=s.x,m=s.y,w=!1,T=!1,R=0;R<h.length;R++){var F=h[R];if(F.id!==s.id&&(d===F.x&&(w=!0),m===F.y&&(T=!0),w&&T))break}return{isShowVertical:w,isShowHorizontal:T,position:{x:d,y:m}}}},{key:"getHorizontalSnapline",value:function(s,h){var d,m,w=!1,T=s.id;if(T){var R=this.graphModel.fakerNode;if(R&&R.id===T)m=Eo(R);else{var F=this.graphModel.getNodeModelById(T);m=Eo(F)}}for(var Z=0;Z<h.length;Z++){var te=h[Z];if(te.id!==s.id){var me=Eo(te);if(me.minY===m.minY||me.maxY===m.minY){w=!0,d=m.minY;break}if(me.minY===m.maxY||me.maxY===m.maxY){w=!0,d=m.maxY;break}}}return Li({isShowHorizontal:w,position:{y:d}})}},{key:"getVerticalSnapline",value:function(s,h){var d,m,w=!1,T=s.id;if(T){var R=this.graphModel.fakerNode;if(R&&R.id===T)m=Eo(R);else{var F=this.graphModel.getNodeModelById(T);m=Eo(F)}}for(var Z=0;Z<h.length;Z++){var te=h[Z];if(te.id!==s.id){var me=Eo(te);if(me.minX===m.minX||me.maxX===m.minX){w=!0,d=m.minX;break}if(me.minX===m.maxX||me.maxX===m.maxX){w=!0,d=m.maxX;break}}}return Li({isShowVertical:w,position:{x:d}})}},{key:"getSnapLinePosition",value:function(s,h){var d=this.getCenterSnapLine(s,h),m=d.isShowHorizontal,w=d.isShowVertical;if(!m){var T=this.getHorizontalSnapline(s,h);T.isShowHorizontal&&(d.isShowHorizontal=T.isShowHorizontal,d.position.y=T.position.y)}if(!w){var R=this.getVerticalSnapline(s,h);R.isShowVertical&&(d.isShowVertical=R.isShowVertical,d.position.x=R.position.x)}return d}},{key:"setSnaplineInfo",value:function(s){var h=s.isShowHorizontal,d=s.isShowVertical,m=s.position;this.position=m,this.isShowHorizontal=h,this.isShowVertical=d}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(s){var h=this.graphModel.nodes,d=this.getSnapLinePosition(s,h);this.setSnaplineInfo(d)}}],l&&UC(o.prototype,l),i}(),FO=fm(vs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$O=fm(vs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=fm(vs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fm(vs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(vs.prototype,"clearSnapline"),vs.prototype),fm(vs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(vs.prototype,"setNodeSnapLine"),vs.prototype),vs),dm=new Map,GO=function(i){var o=na(),l=window.requestAnimationFrame(function s(){if(i(),dm.get(o)){var h=window.requestAnimationFrame(s);dm.set(o,h)}});return dm.set(o,l),o},Cy=function(i){var o=dm.get(i);o&&(window.cancelAnimationFrame(o),dm.delete(i))};function Q_(i){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q_(i)}function pm(){return pm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},pm.apply(this,arguments)}function zO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function hm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?zO(Object(l),!0).forEach(function(s){rc(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):zO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function BC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return HO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return HO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function HO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function VC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function e0(i,o){return e0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},e0(i,o)}function WC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Dy(i);if(o){var h=Dy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return GC(this,l)}}function GC(i,o){if(o&&(Q_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nc(i)}function nc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dy(i){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dy(i)}function rc(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var zC=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&e0(d,m)})(h,i);var o,l,s=WC(h);function h(){var d;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),rc(nc(d=s.call(this)),"preTargetNode",void 0),rc(nc(d),"sourceRuleResults",void 0),rc(nc(d),"targetRuleResults",void 0),rc(nc(d),"dragHandler",void 0),rc(nc(d),"t",void 0),rc(nc(d),"onDragStart",function(m){var w=m.event,T=d.props,R=T.anchorData,F=T.nodeModel,Z=T.graphModel;Z.overlapMode,Z.selectNodeById(F.id),F.autoToFront&&Z.toFront(F.id),Z.eventCenter.emit(Cn.ANCHOR_DRAGSTART,{data:R,e:w,nodeModel:F}),d.setState({startX:R.x,startY:R.y,endX:R.x,endY:R.y})}),rc(nc(d),"onDragging",function(m){var w=m.event,T=d.props,R=T.graphModel,F=T.nodeModel,Z=T.anchorData,te=R.transformModel,me=R.eventCenter,ke=R.width,Ie=R.height,lt=R.editConfigModel,it=lt.autoExpand,bt=lt.stopMoveGraph,Bt=w.clientX,gn=w.clientY,yn=R.getPointByClient({x:Bt,y:gn}),zn=yn.domOverlayPosition,hn=zn.x,In=zn.y,Sn=yn.canvasOverlayPosition,jr=Sn.x,Ur=Sn.y;d.t&&Cy(d.t);var pr=[];hn<10?pr=[10,0]:hn+10>ke?pr=[-10,0]:In<10?pr=[0,10]:In+10>Ie&&(pr=[0,-10]),d.setState({endX:jr,endY:Ur,dragging:!0}),d.moveAnchorEnd(jr,Ur),pr.length>0&&!bt&&it&&(d.t=GO(function(){var Kr=BC(pr,2),_i=Kr[0],wi=Kr[1];te.translate(_i,wi);var Ta=d.state,eu=Ta.endX,tu=Ta.endY;d.setState({endX:eu-_i,endY:tu-wi}),d.moveAnchorEnd(eu-_i,tu-wi)})),me.emit(Cn.ANCHOR_DRAG,{data:Z,e:w,nodeModel:F})}),rc(nc(d),"onDragEnd",function(m){var w=m.event;d.t&&Cy(d.t);var T=d.checkEnd(w);d.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),d.sourceRuleResults.clear(),d.targetRuleResults.clear();var R=d.props,F=R.graphModel,Z=R.nodeModel,te=R.anchorData;F.eventCenter.emit(Cn.ANCHOR_DRAGEND,{data:te,e:w,nodeModel:Z,edgeModel:T})}),rc(nc(d),"checkEnd",function(m){var w=d.props,T=w.graphModel,R=w.nodeModel,F=w.anchorData,Z=F.x,te=F.y,me=F.id,ke=(T.edgeType,d.state),Ie=ke.endX,lt=ke.endY,it=ke.dragging,bt=nf({x:Ie,y:lt},T);if(d.preTargetNode&&d.preTargetNode.state!==Yr.DEFAULT&&d.preTargetNode.setElementState(Yr.DEFAULT),it&&bt&&bt.node){var Bt=bt.node,gn=bt.anchor.id,yn="".concat(R.id,"_").concat(Bt.id,"_").concat(gn,"_").concat(me),zn=d.sourceRuleResults.get(yn)||{},hn=zn.isAllPass,In=zn.msg,Sn=d.targetRuleResults.get(yn)||{},jr=Sn.isAllPass,Ur=Sn.msg;if(hn&&jr){Bt.setElementState(Yr.DEFAULT);var pr=T.edgeGenerator(R.getData(),T.getNodeModelById(bt.node.id).getData()),Kr=T.addEdge(hm(hm({},pr),{},{sourceNodeId:R.id,sourceAnchorId:me,startPoint:{x:Z,y:te},targetNodeId:bt.node.id,targetAnchorId:bt.anchor.id,endPoint:{x:bt.anchor.x,y:bt.anchor.y}})),_i=d.props.anchorData;return T.eventCenter.emit(Cn.ANCHOR_DROP,{data:_i,e:m,nodeModel:R,edgeModel:Kr}),Kr}var wi=Bt.getData();return T.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:wi,msg:Ur||In||"不允许添加连线"}),null}}),d.sourceRuleResults=new Map,d.targetRuleResults=new Map,d.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},d.dragHandler=new ve({onDragStart:d.onDragStart,onDragging:d.onDragging,onDragEnd:d.onDragEnd}),d}return o=h,(l=[{key:"getAnchorShape",value:function(){var d=this.props,m=d.anchorData,w=d.style,T=d.node.getAnchorShape(m);if(T)return T;var R=m.x,F=m.y,Z=hm(hm({},w),w.hover);return Object(Ue.g)("g",null,Object(Ue.g)(zh,pm({className:"lf-node-anchor-hover"},Z,{x:R,y:F})),Object(Ue.g)(zh,pm({className:"lf-node-anchor"},w,{x:R,y:F})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var d=this.props,m=d.graphModel,w=m.getAnchorIncomingEdge,T=m.getAnchorOutcomingEdge,R=d.anchorData.id;return{incomingEdgeList:w(R),outcomingEdgeList:T(R)}}},{key:"moveAnchorEnd",value:function(d,m){var w=this.props,T=w.graphModel,R=w.nodeModel,F=w.anchorData,Z=nf({x:d,y:m},T);if(Z){var te=Z.node,me=Z.anchor.id;if(this.preTargetNode&&this.preTargetNode!==Z.node&&this.preTargetNode.setElementState(Yr.DEFAULT),F.id===me)return;this.preTargetNode=te;var ke="".concat(R.id,"_").concat(te.id,"_").concat(me,"_").concat(F.id);if(!this.targetRuleResults.has(ke)){var Ie=Z.anchor,lt=R.isAllowConnectedAsSource(te,F,Ie),it=te.isAllowConnectedAsTarget(R,F,Ie);this.sourceRuleResults.set(ke,ql(lt)),this.targetRuleResults.set(ke,ql(it))}var bt=this.sourceRuleResults.get(ke).isAllPass,Bt=this.targetRuleResults.get(ke).isAllPass;bt&&Bt?te.setElementState(Yr.ALLOW_CONNECT):te.setElementState(Yr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Yr.DEFAULT&&this.preTargetNode.setElementState(Yr.DEFAULT)}},{key:"isShowLine",value:function(){var d=this.state,m=d.startX,w=d.startY,T=d.endX,R=d.endY;return ll(m,w,T,R)>10}},{key:"render",value:function(){var d=this,m=this.state,w=m.startX,T=m.startY,R=m.endX,F=m.endY,Z=this.props,te=Z.anchorData.edgeAddable,me=Z.edgeStyle;return Object(Ue.g)("g",{className:"lf-anchor"},Object(Ue.g)("g",{onMouseDown:function(ke){te!==!1&&d.dragHandler.handleMouseDown(ke)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(hm({sourcePoint:{x:w,y:T},targetPoint:{x:R,y:F}},me)):Object(Ue.g)(Wh,pm({x1:w,y1:T,x2:R,y2:F},me,{"pointer-events":"none"}))))}}])&&VC(o.prototype,l),h}(Ue.a);function XO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function HC(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?XO(Object(l),!0).forEach(function(s){XC(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):XO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function XC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function t0(i){return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t0(i)}function qC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return qO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function YO(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,d=i.value,m=i.fontSize,w=i.fill,T=w===void 0?"currentColor":w,R=i.overflowMode,F=R===void 0?"default":R,Z=i.textWidth,te=Z===void 0?"":Z,me=i.model,ke={textAnchor:"middle","dominant-baseline":"middle",x:l,y:h,fill:T};if(Object.entries(i).forEach(function(gn){var yn=qC(gn,2),zn=yn[0],hn=yn[1];t0(hn)!=="object"&&(ke[zn]=hn)}),d){var Ie=String(d).split(/[\r\n]/g),lt=Ie.length;if(F!=="default"){var it=me.BaseType,bt=me.modelType;if(it===co.NODE&&bt!==xr.TEXT_NODE||it===co.EDGE&&te)return function(gn){var yn=gn.value,zn=gn.fontSize,hn=gn.model,In=gn.fontFamily,Sn=In===void 0?"":In,jr=gn.lineHeight,Ur=gn.wrapPadding,pr=Ur===void 0?"0, 0":Ur,Kr=gn.overflowMode,_i=gn.x,wi=gn.y,Ta=hn.width,eu=hn.textHeight,tu=gn.textWidth||Ta,ac=String(yn).split(/[\r\n]/g),Vp=ac.length,ig=uf({rows:ac,style:{fontSize:"".concat(zn,"px"),width:"".concat(tu,"px"),fontFamily:Sn,lineHeight:jr,padding:pr},rowsLength:Vp,className:"lf-get-text-height"}),Wp=hn.height>ig?hn.height:ig;eu&&(Wp=eu);var Ld=Kr==="ellipsis";return Ld&&(Wp=zn+2),Object(Ue.g)("g",null,Object(Ue.g)("foreignObject",{width:tu,height:Wp,x:_i-tu/2,y:wi-Wp/2},Object(Ue.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Wp,width:tu,padding:pr}},Object(Ue.g)("div",{className:Ld?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Ld?ac.join(""):"",style:HC({},gn)},ac.map(function(Fd){return Object(Ue.g)("div",{className:"lf-node-text--auto-wrap-inner"},Fd)})))))}(i)}if(lt>1){var Bt=Ie.map(function(gn,yn){var zn=(yn-(lt-1)/2)*(m+2);return Object(Ue.g)("tspan",{className:"lf-text-tspan",x:l,y:h+zn},gn)});return Object(Ue.g)("text",ke,Bt)}return Object(Ue.g)("text",ke,d)}}function n0(i){return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n0(i)}function r0(){return r0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},r0.apply(this,arguments)}function YC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return KO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return KO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function KO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function KC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function o0(i,o){return o0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},o0(i,o)}function ZC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=jy(i);if(o){var h=jy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JC(this,l)}}function JC(i,o){if(o&&(n0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jd(i)}function jd(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jy(i){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jy(i)}function Fp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ZO=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&o0(d,m)})(h,i);var o,l,s=ZC(h);function h(d){var m;(function(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")})(this,h),Fp(jd(m=s.call(this)),"dragHandler",void 0),Fp(jd(m),"sumDeltaX",0),Fp(jd(m),"sumDeltaY",0),Fp(jd(m),"stepDrag",void 0),Fp(jd(m),"onDragging",function(T){var R=T.deltaX,F=T.deltaY,Z=m.props,te=Z.model,me=YC(Z.graphModel.transformModel.fixDeltaXY(R,F),2),ke=me[0],Ie=me[1];te.moveText(ke,Ie)}),Fp(jd(m),"dblClickHandler",function(){m.props.editable&&m.props.model.setElementState(Yr.TEXT_EDIT)}),Fp(jd(m),"mouseDownHandle",function(T){var R=m.props,F=R.draggable,Z=R.model,te=R.graphModel.editConfigModel.nodeTextDraggable;(F||te)&&(m.stepDrag.model=Z,m.stepDrag.handleMouseDown(T))}),d.model;var w=d.draggable;return m.stepDrag=new ve({onDragging:m.onDragging,step:1,isStopPropagation:w}),m}return o=h,(l=[{key:"getShape",value:function(){var d=this.props,m=d.model,w=d.graphModel,T=m.text,R=w.editConfigModel,F=T.value,Z=T.x,te=T.y,me=T.editable,ke=T.draggable,Ie={x:Z,y:te,className:"",value:F};me?Ie.className="lf-element-text":ke||R.nodeTextDraggable?Ie.className="lf-text-draggable":Ie.className="lf-text-disabled";var lt=m.getTextStyle();return Object(Ue.g)(YO,r0({},Ie,lt,{model:m}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Ue.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&KC(o.prototype,l),h}(Ue.a),QC=Vu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,JO=r(130);function i0(i){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i0(i)}function a0(){return a0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},a0.apply(this,arguments)}function e3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function l0(i,o){return l0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},l0(i,o)}function t3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Iy(i);if(o){var h=Iy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return n3(this,l)}}function n3(i,o){if(o&&(i0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tv(i)}function tv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Iy(i){return Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Iy(i)}function vm(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var r3=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&l0(d,m)})(h,i);var o,l,s=t3(h);function h(d){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),vm(tv(m=s.call(this,d)),"style",{}),vm(tv(m),"defaultAngle",void 0),vm(tv(m),"normal",void 0),vm(tv(m),"stepperDrag",void 0),vm(tv(m),"onDragging",function(w){var T,R=w.event,F=m.props,Z=F.graphModel,te=F.nodeModel,me=F.eventCenter,ke=Z.selectNodes,Ie=te.x,lt=te.y,it=R.clientX,bt=R.clientY,Bt=Z.getPointByClient({x:it,y:bt}).canvasOverlayPosition,gn=Bt.x,yn=Bt.y,zn=new ze(gn-Ie,yn-lt),hn=((T=m.normal)===null||T===void 0?void 0:T.angle(zn))-m.defaultAngle,In=new Nd(-Ie,-lt).rotate(hn).translate(Ie,lt).toString();te.transform=In,te.rotate=hn;var Sn=Object(JO.map)(ke,function(Ur){return Ur.id});Sn.indexOf(te.id)===-1&&(Sn=[te.id]);var jr=Object(JO.reduce)(Sn,function(Ur,pr){var Kr=Z.getNodeModelById(pr);return Ur[pr]=Kr==null?void 0:Kr.getMoveDistance(0,0,!1),Ur},{});Sn.forEach(function(Ur){Z.getNodeEdges(Ur).forEach(function(pr){if(jr[pr.sourceNodeId]){var Kr=Z.getNodeModelById(pr.sourceNodeId).anchors.find(function(wi){return wi.id===pr.sourceAnchorId});pr.updateStartPoint(Kr)}if(jr[pr.targetNodeId]){var _i=Z.getNodeModelById(pr.targetNodeId).anchors.find(function(wi){return wi.id===pr.targetAnchorId});pr.updateEndPoint(_i)}})}),me.emit(Cn.NODE_ROTATE,{e:R,nodeModel:te})}),m.style=d.style,m.stepperDrag=new ve({onDragging:m.onDragging}),m}return o=h,(l=[{key:"render",value:function(){var d=this,m=this.props.nodeModel,w=m.x,T=m.y,R=w+m.width/2+20,F=T-m.height/2-20;return this.normal=new ze(1,0),this.defaultAngle=this.normal.angle(new ze(R-w,F-T)),m.defaultAngle=this.defaultAngle,Object(Ue.g)("g",{className:"lf-rotate-control"},Object(Ue.g)("g",{onMouseDown:function(Z){d.stepperDrag.handleMouseDown(Z)}},Object(Ue.g)(zh,a0({},this.style,{cx:R,cy:F}))))}}])&&e3(o.prototype,l),h}(Ue.a);function u0(i){return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u0(i)}var o3=["className"];function Ly(){return Ly=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},Ly.apply(this,arguments)}function i3(i,o){if(i==null)return{};var l,s,h=function(m,w){if(m==null)return{};var T,R,F={},Z=Object.keys(m);for(R=0;R<Z.length;R++)T=Z[R],w.indexOf(T)>=0||(F[T]=m[T]);return F}(i,o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(s=0;s<d.length;s++)l=d[s],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function Fy(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return QO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return QO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function eS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function s0(i,o){return s0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},s0(i,o)}function a3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=$y(i);if(o){var h=$y(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return l3(this,l)}}function l3(i,o){if(o&&(u0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oa(i)}function oa(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function $y(i){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$y(i)}function ha(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Ef=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&s0(m,w)})(d,i);var o,l,s,h=a3(d);function d(m){var w;(function(te,me){if(!(te instanceof me))throw new TypeError("Cannot call a class as a function")})(this,d),ha(oa(w=h.call(this)),"t",void 0),ha(oa(w),"moveOffset",void 0),ha(oa(w),"stepDrag",void 0),ha(oa(w),"contextMenuTime",void 0),ha(oa(w),"mouseUpDrag",void 0),ha(oa(w),"startTime",void 0),ha(oa(w),"clickTimer",void 0),ha(oa(w),"modelDisposer",void 0),ha(oa(w),"onDragStart",function(te){var me=te.event,ke=me.clientX,Ie=me.clientY,lt=w.props,it=lt.model,bt=lt.graphModel.getPointByClient({x:ke,y:Ie}).canvasOverlayPosition,Bt=bt.x,gn=bt.y;w.moveOffset={x:it.x-Bt,y:it.y-gn}}),ha(oa(w),"onDragging",function(te){var me=te.event,ke=w.props,Ie=ke.model,lt=ke.graphModel,it=lt.editConfigModel,bt=it.stopMoveGraph,Bt=it.autoExpand,gn=lt.transformModel,yn=lt.selectNodes,zn=lt.width,hn=lt.height,In=lt.gridSize;Ie.isDragging=!0;var Sn=me.clientX,jr=me.clientY,Ur=lt.getPointByClient({x:Sn,y:jr}).canvasOverlayPosition,pr=Ur.x,Kr=Ur.y,_i=Fy(gn.CanvasPointToHtmlPoint([pr,Kr]),2),wi=_i[0],Ta=_i[1];if(pr+=w.moveOffset.x,Kr+=w.moveOffset.y,pr=rl(pr,In),Kr=rl(Kr,In),zn&&hn){if(!Bt||bt||!(wi<0||Ta<0||wi>zn||Ta>hn)){var eu=Fy(gn.CanvasPointToHtmlPoint([pr-Ie.width/2,Kr-Ie.height/2]),2),tu=eu[0],ac=eu[1],Vp=Fy(gn.CanvasPointToHtmlPoint([pr+Ie.width/2,Kr+Ie.height/2]),2),ig=Vp[0],Wp=Vp[1],Ld=Math.max(In,20),Fd=[];tu<0?Fd=[Ld,0]:ig>lt.width?Fd=[-Ld,0]:ac<0?Fd=[0,Ld]:Wp>lt.height&&(Fd=[0,-Ld]),w.t&&Cy(w.t);var GD=new Nd(-pr,-Kr).rotate(Ie.rotate).translate(pr,Kr).toString();Ie.transform=GD;var ag=yn.map(function(lg){return lg.id});ag.indexOf(Ie.id)===-1&&(ag=[Ie.id]),Fd.length>0&&!bt&&Bt?w.t=GO(function(){var lg=Fy(Fd,2),DS=lg[0],jS=lg[1];gn.translate(DS,jS);var zD=-DS/gn.SCALE_X,HD=-jS/gn.SCALE_X;lt.moveNodes(ag,zD,HD)}):lt.moveNodes(ag,pr-Ie.x,Kr-Ie.y)}}else lt.moveNode2Coordinate(Ie.id,pr,Kr)}),ha(oa(w),"onDragEnd",function(){w.t&&Cy(w.t),w.props.model.isDragging=!1}),ha(oa(w),"handleMouseUp",function(){var te=w.props.model;w.mouseUpDrag=te.isDragging}),ha(oa(w),"handleClick",function(te){var me=w.mouseUpDrag===!1;if(w.startTime){var ke=w.props,Ie=ke.model,lt=ke.graphModel;if(me){var it={data:Ie.getData(),e:te,position:lt.getPointByClient({x:te.clientX,y:te.clientY}),isSelected:!1,isMultiple:!1},bt=te.button===2,Bt=te.detail===2;if(!bt){var gn=lt.editConfigModel,yn=Hs(te,gn);it.isMultiple=yn,Ie.isSelected&&!Bt&&yn?(it.isSelected=!1,Ie.setSelected(!1)):(lt.selectNodeById(Ie.id,yn),it.isSelected=!0,w.toFront()),Bt?(gn.nodeTextEdit&&Ie.text.editable&&(Ie.setSelected(!1),lt.setElementStateById(Ie.id,Yr.TEXT_EDIT)),lt.eventCenter.emit(Cn.NODE_DBCLICK,it)):(lt.eventCenter.emit(Cn.ELEMENT_CLICK,it),lt.eventCenter.emit(Cn.NODE_CLICK,it))}}}}),ha(oa(w),"handleContextMenu",function(te){te.preventDefault();var me=w.props,ke=me.model,Ie=me.graphModel,lt=ke.getData(),it=Ie.getPointByClient({x:te.clientX,y:te.clientY});Ie.setElementStateById(ke.id,Yr.SHOW_MENU,it.domOverlayPosition),ke.isSelected||Ie.selectNodeById(ke.id),Ie.eventCenter.emit(Cn.NODE_CONTEXTMENU,{data:lt,e:te,position:it}),w.toFront()}),ha(oa(w),"handleMouseDown",function(te){var me=w.props,ke=me.model,Ie=me.graphModel;w.startTime=new Date().getTime(),Ie.editConfigModel.adjustNodePosition&&ke.draggable&&w.stepDrag&&w.stepDrag.handleMouseDown(te)}),ha(oa(w),"setHoverON",function(te){var me=w.props,ke=me.model,Ie=me.graphModel;if(!ke.isHovered){var lt=ke.getData();ke.setHovered(!0),Ie.eventCenter.emit(Cn.NODE_MOUSEENTER,{data:lt,e:te})}}),ha(oa(w),"setHoverOFF",function(te){var me=w.props,ke=me.model,Ie=me.graphModel,lt=ke.getData();ke.isHovered&&(ke.setHovered(!1),Ie.eventCenter.emit(Cn.NODE_MOUSELEAVE,{data:lt,e:te}))}),ha(oa(w),"onMouseOut",function(te){QC&&w.setHoverOFF(te)});var T=m.graphModel,R=T.gridSize,F=T.eventCenter,Z=m.model;return w.stepDrag=new ve({onDragStart:w.onDragStart,onDragging:w.onDragging,onDragEnd:w.onDragEnd,step:R,eventType:"NODE",isStopPropagation:!1,eventCenter:F,model:Z}),w.modelDisposer=Object(c.F)(function(){return w.props},function(te){te&&te.model&&w.stepDrag.setModel(te.model)}),w}return o=d,s=[{key:"getModel",value:function(m){return m}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(m){return null}},{key:"getAnchors",value:function(){var m=this,w=this.props,T=w.model,R=w.graphModel,F=T.isSelected,Z=T.isHitable,te=T.isDragging,me=T.isShowAnchor;return Z&&(F||me)&&!te?Qf(T.anchors,function(ke,Ie){var lt=T.getAnchorLineStyle(ke),it=T.getAnchorStyle(ke);return Object(Ue.g)(zC,{anchorData:ke,node:m,style:it,edgeStyle:lt,anchorIndex:Ie,nodeModel:T,graphModel:R,setHoverOFF:m.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var m=this.props,w=m.model,T=m.graphModel,R=w.isSelected,F=w.isHitable,Z=w.enableRotate,te=w.isHovered,me=w.getRotateControlStyle().style;if(F&&(R||te)&&Z)return Object(Ue.g)(r3,{graphModel:T,nodeModel:w,eventCenter:T.eventCenter,style:me})}},{key:"getText",value:function(){var m=this.props,w=m.model,T=m.graphModel;if(w.state===Yr.TEXT_EDIT)return"";if(w.text){var R=T.editConfigModel,F=!1;return(w.text.draggable||R.nodeTextDraggable)&&(F=!0),Object(Ue.g)(ZO,{editable:R.nodeTextEdit&&w.text.editable,model:w,graphModel:T,draggable:F})}}},{key:"getStateClassName",value:function(){var m=this.props.model,w=m.state,T=m.isDragging,R=m.isSelected,F="lf-node";switch(w){case Yr.ALLOW_CONNECT:F+=" lf-node-allow";break;case Yr.NOT_ALLOW_CONNECT:F+=" lf-node-not-allow";break;default:F+=" lf-node-default"}return T&&(F+=" lf-isDragging"),R&&(F+=" lf-node-selected"),F}},{key:"toFront",value:function(){var m=this.props,w=m.model,T=m.graphModel;w.autoToFront&&T.toFront(w.id)}},{key:"render",value:function(){var m,w=this.props,T=w.model,R=w.graphModel,F=R.editConfigModel,Z=F.hideAnchors,te=F.adjustNodePosition,me=F.allowRotation,ke=R.gridSize,Ie=R.transformModel.SCALE_X,lt=T.isHitable,it=T.draggable,bt=T.transform,Bt=T.getOuterGAttributes(),gn=Bt.className,yn=gn===void 0?"":gn,zn=i3(Bt,o3),hn=Object(Ue.g)("g",{className:"lf-node-content"},Object(Ue.g)("g",{transform:bt},this.getShape(),this.getText(),me&&this.getRotateControl()),!Z&&this.getAnchors());return lt?(te&&it&&this.stepDrag.setStep(ke*Ie),m=Object(Ue.g)("g",Ly({className:"".concat(this.getStateClassName()," ").concat(yn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},zn),hn)):m=Object(Ue.g)("g",Ly({className:"".concat(this.getStateClassName()," ").concat(yn)},zn),hn),m}}])&&eS(o.prototype,l),s&&eS(o,s),d}(Ue.a);function c0(i){return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},c0(i)}function f0(){return f0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},f0.apply(this,arguments)}function u3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function s3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function d0(i,o){return d0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},d0(i,o)}function c3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Uy(i);if(o){var h=Uy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return f3(this,l)}}function f3(i,o){if(o&&(c0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}var p0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&d0(d,m)})(h,i);var o,l,s=c3(h);function h(){return u3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(Ue.g)(Rd,f0({},m,{x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius}))}}])&&s3(o.prototype,l),h}(Ef);function h0(i){return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h0(i)}function v0(){return v0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},v0.apply(this,arguments)}function d3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function p3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function m0(i,o){return m0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},m0(i,o)}function h3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=By(i);if(o){var h=By(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return v3(this,l)}}function v3(i,o){if(o&&(h0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var y0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&m0(d,m)})(h,i);var o,l,s=h3(h);function h(){return d3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.r,R=d.getNodeStyle();return Object(Ue.g)(zh,v0({},R,{x:m,y:w,r:T}))}}])&&p3(o.prototype,l),h}(Ef);function g0(i){return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},g0(i)}function m3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return tS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return tS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function nS(i){var o=i.points,l=i.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(h){var d=m3(h,2),m=d[0],w=d[1];g0(w)!=="object"&&(s[m]=w)}),s.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",s.points=o.map(function(h){return h.join(",")}).join(" "),Object(Ue.g)("polygon",s)}function b0(i){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},b0(i)}function _0(){return _0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},_0.apply(this,arguments)}function y3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function g3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function w0(i,o){return w0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},w0(i,o)}function b3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Vy(i);if(o){var h=Vy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return _3(this,l)}}function _3(i,o){if(o&&(b0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Vy(i){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vy(i)}var E0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&w0(d,m)})(h,i);var o,l,s=b3(h);function h(){return y3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.width,R=d.height,F=d.points,Z=d.getNodeStyle(),te={transform:"matrix(1 0 0 1 ".concat(m-T/2," ").concat(w-R/2,")")};return Object(Ue.g)("g",te,Object(Ue.g)(nS,_0({},Z,{points:F,x:m,y:w})))}}])&&g3(o.prototype,l),h}(Ef);function O0(i){return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},O0(i)}function S0(){return S0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},S0.apply(this,arguments)}function w3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function E3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function x0(i,o){return x0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},x0(i,o)}function O3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Wy(i);if(o){var h=Wy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return S3(this,l)}}function S3(i,o){if(o&&(O0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}var A0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&x0(d,m)})(h,i);var o,l,s=O3(h);function h(){return w3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(Ue.g)("g",null,Object(Ue.g)(nS,S0({},m,{points:d.points,x:d.x,y:d.y})))}}])&&E3(o.prototype,l),h}(Ef);function T0(i){return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},T0(i)}function x3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return rS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return rS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function A3(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,d=i.rx,m=d===void 0?4:d,w=i.ry,T=w===void 0?4:w,R=i.className,F={cx:l,cy:h,rx:m,ry:T,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(Z){var te=x3(Z,2),me=te[0],ke=te[1];T0(ke)!=="object"&&(F[me]=ke)}),F.className=R?"lf-basic-shape ".concat(R):"lf-basic-shape",Object(Ue.g)("ellipse",F)}function M0(i){return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},M0(i)}function k0(){return k0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},k0.apply(this,arguments)}function T3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function M3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function P0(i,o){return P0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},P0(i,o)}function k3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Gy(i);if(o){var h=Gy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return P3(this,l)}}function P3(i,o){if(o&&(M0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}var N0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&P0(d,m)})(h,i);var o,l,s=k3(h);function h(){return T3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(Ue.g)(A3,k0({},m,{x:d.x,y:d.y,rx:d.rx,ry:d.ry}))}}])&&M3(o.prototype,l),h}(Ef);function R0(i){return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},R0(i)}function oS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function iS(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?oS(Object(l),!0).forEach(function(s){N3(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):oS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function N3(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function R3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function C3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function C0(i,o){return C0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},C0(i,o)}function D3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=zy(i);if(o){var h=zy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return j3(this,l)}}function j3(i,o){if(o&&(R0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function zy(i){return zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zy(i)}var D0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&C0(d,m)})(h,i);var o,l,s=D3(h);function h(){return R3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getBackground",value:function(){var d=this.props.model,m=d.getTextStyle(),w=d.width,T=d.height,R=d.x,F=d.y,Z=iS(iS({},m.background),{},{x:R,y:F-1,width:w,height:T});return Object(Ue.g)(Rd,Z)}},{key:"getShape",value:function(){return Object(Ue.g)("g",null,this.getBackground())}}])&&C3(o.prototype,l),h}(Ef);function j0(i){return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},j0(i)}function I0(){return I0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},I0.apply(this,arguments)}function I3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function L3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function L0(i,o){return L0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},L0(i,o)}function F3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Hy(i);if(o){var h=Hy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return $3(this,l)}}function $3(i,o){if(o&&(j0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mm(i)}function mm(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hy(i){return Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hy(i)}function Xy(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var F0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&L0(d,m)})(h,i);var o,l,s=F3(h);function h(){var d;I3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Xy(mm(d=s.call.apply(s,[this].concat(w))),"ref",void 0),Xy(mm(d),"currentProperties",void 0),Xy(mm(d),"preProperties",void 0),Xy(mm(d),"setRef",function(R){d.ref=R}),d}return o=h,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(d){d.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.height,R=d.width,F=d.getNodeStyle();return this.currentProperties=JSON.stringify(d.properties),Object(Ue.g)("foreignObject",I0({},F,{x:m-R/2,y:w-T/2,width:R,height:T,ref:this.setRef}))}}])&&L3(o.prototype,l),h}(Ef);function $0(i){return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$0(i)}function U0(){return U0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},U0.apply(this,arguments)}function aS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function $p(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?aS(Object(l),!0).forEach(function(s){W0(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):aS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function U3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function B0(i,o){return B0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},B0(i,o)}function B3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=qy(i);if(o){var h=qy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return V3(this,l)}}function V3(i,o){if(o&&($0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V0(i)}function V0(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qy(i){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qy(i)}function W0(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var W3=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&B0(d,m)})(h,i);var o,l,s=B3(h);function h(d){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),W0(V0(m=s.call(this,d)),"setHoverON",function(){m.setState({isHovered:!0})}),W0(V0(m),"setHoverOFF",function(){m.setState({isHovered:!1})}),m.state={isHovered:!1},m}return o=h,(l=[{key:"getBackground",value:function(){var d=this.props.model,m=d.getTextStyle(),w=d.text,T=d.width,R=m.background||{};if(this.state.isHovered&&m.hover&&m.hover.background&&(R=$p($p({},R),m.hover.background)),w&&w.value&&R.fill!=="transparent"){var F,Z=m.fontSize,te=m.overflowMode,me=m.lineHeight,ke=m.wrapPadding,Ie=m.textWidth,lt=w.value,it=w.x,bt=w.y,Bt=String(lt).split(/[\r\n]/g),gn=Bt.length;if(te==="autoWrap"&&Ie){var yn=uf({rows:Bt,style:{fontSize:"".concat(Z,"px"),width:"".concat(Ie,"px"),lineHeight:me,padding:ke},rowsLength:gn,className:"lf-get-text-height"});F=$p($p({},R),{},{x:it-1,y:bt-1,width:Ie,height:yn})}else{Bt&&Bt.forEach(function(jr){Io(jr)});var zn=as({rows:Bt,fontSize:Z,rowsLength:gn}),hn=zn.width,In=zn.height;if(te==="ellipsis"&&(hn=Ie||T,In=Z+2),typeof R.wrapPadding=="string"){var Sn=R.wrapPadding.split(",").filter(function(jr){return jr.trim()}).map(function(jr){return parseFloat(jr.trim())});Sn.length>0&&Sn.length<=4&&(Sn.length===1?Sn=[Sn[0],Sn[0],Sn[0],Sn[0]]:Sn.length===2?Sn=[Sn[0],Sn[1],Sn[0],Sn[1]]:Sn.length===3&&(Sn=[Sn[0],Sn[1],Sn[2],Sn[1]]),hn+=Sn[1]+Sn[3],In+=Sn[0]+Sn[2],it+=(Sn[1]-Sn[3])/2,bt+=(Sn[2]-Sn[0])/2)}F=$p($p({},R),{},{x:it-1,y:bt-1,width:hn,height:In})}return Object(Ue.g)(Rd,F)}}},{key:"getShape",value:function(){var d=this.props.model,m=d.text,w=m.value,T=m.x,R=m.y;if(w){var F=$p({x:T,y:R,className:"lf-element-text",value:w},d.getTextStyle());return Object(Ue.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Ue.g)(YO,U0({},F,{model:d})))}}}])&&U3(o.prototype,l),h}(ZO);function G0(i){return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},G0(i)}var oc,G3=["text","sourceAnchorId","targetAnchorId"];function lS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Of(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lS(Object(l),!0).forEach(function(s){Ql(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function z3(i,o){if(i==null)return{};var l,s,h=function(m,w){if(m==null)return{};var T,R,F={},Z=Object.keys(m);for(R=0;R<Z.length;R++)T=Z[R],w.indexOf(T)>=0||(F[T]=m[T]);return F}(i,o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(s=0;s<d.length;s++)l=d[s],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function H3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return uS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return uS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function X3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function z0(i,o){return z0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},z0(i,o)}function q3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yy(i);if(o){var h=Yy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Y3(this,l)}}function Y3(i,o){if(o&&(G0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(i)}function Jl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}function Ql(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(oc||(oc={}));var sS=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&z0(d,m)})(h,i);var o,l,s=q3(h);function h(d){var m;(function(F,Z){if(!(F instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,h),Ql(Jl(m=s.call(this)),"stepDragData",void 0),Ql(Jl(m),"stepDrag",void 0),Ql(Jl(m),"oldEdge",void 0),Ql(Jl(m),"preTargetNode",void 0),Ql(Jl(m),"targetRuleResults",void 0),Ql(Jl(m),"sourceRuleResults",void 0),Ql(Jl(m),"handleMouseDown",function(F){m.stepDrag&&m.stepDrag.handleMouseDown(F)}),Ql(Jl(m),"onDragStart",function(){var F=m.props,Z=F.x,te=F.y,me=F.edgeModel,ke=me.startPoint,Ie=me.endPoint,lt=me.pointsList;m.oldEdge={startPoint:ke,endPoint:Ie,pointsList:lt},m.setState({endX:Z,endY:te,dragging:!0})}),Ql(Jl(m),"onDragging",function(F){var Z=F.deltaX,te=F.deltaY,me=m.state,ke=me.endX,Ie=me.endY,lt=m.props,it=lt.graphModel,bt=lt.type,Bt=it.transformModel,gn=it.editConfigModel,yn=H3(Bt.moveCanvasPointByHtml([ke,Ie],Z,te),2),zn=yn[0],hn=yn[1];m.setState({endX:zn,endY:hn,dragging:!0});var In=m.props.edgeModel,Sn=nf({x:ke,y:Ie},it);if(Sn&&Sn.node&&m.isAllowAdjust(Sn).pass){var jr,Ur=In.startPoint,pr=In.endPoint,Kr=In.sourceNode,_i=In.targetNode;bt===oc.SOURCE?jr={startPoint:{x:Sn.anchor.x,y:Sn.anchor.y},endPoint:{x:pr.x,y:pr.y},sourceNode:Sn.node,targetNode:_i}:bt===oc.TARGET&&(jr={startPoint:{x:Ur.x,y:Ur.y},endPoint:{x:Sn.anchor.x,y:Sn.anchor.y},sourceNode:Kr,targetNode:Sn.node}),In.updateAfterAdjustStartAndEnd(jr)}else bt===oc.SOURCE?In.updateStartPoint({x:zn,y:hn}):bt===oc.TARGET&&In.updateEndPoint({x:zn,y:hn});In.text.value&&gn.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),Ql(Jl(m),"onDragEnd",function(F){var Z=F.event;try{var te;m.setState({dragging:!1});var me=m.props,ke=me.graphModel,Ie=me.edgeModel,lt=me.type,it=m.state,bt=it.endX,Bt=it.endY,gn=it.dragging,yn=nf({x:bt,y:Bt},ke);if(!gn)return;var zn,hn=!1;if(yn&&yn.node){var In=m.isAllowAdjust(yn),Sn=In.pass,jr=In.msg,Ur=In.newTargetNode;if(Sn){var pr=Ie.getData(),Kr=pr.text,_i=pr.sourceAnchorId,wi=_i===void 0?"":_i,Ta=pr.targetAnchorId;zn=Of(Of({sourceAnchorId:wi,targetAnchorId:Ta===void 0?"":Ta},z3(pr,G3)),{},{text:(Kr==null?void 0:Kr.value)||""}),lt===oc.SOURCE?(zn=Of(Of({},ke.edgeGenerator(ke.getNodeModelById(yn.node.id).getData(),ke.getNodeModelById(Ie.targetNodeId).getData(),zn)),{},{sourceNodeId:yn.node.id,sourceAnchorId:yn.anchor.id,startPoint:{x:yn.anchor.x,y:yn.anchor.y},targetNodeId:Ie.targetNodeId,endPoint:Of({},Ie.endPoint)}),Ie.sourceNodeId===yn.node.id&&Ie.sourceAnchorId===yn.anchor.id&&(hn=!0)):lt===oc.TARGET&&(zn=Of(Of({},ke.edgeGenerator(ke.getNodeModelById(Ie.sourceNodeId).getData(),ke.getNodeModelById(yn.node.id).getData(),zn)),{},{sourceNodeId:Ie.sourceNodeId,startPoint:Of({},Ie.startPoint),targetNodeId:yn.node.id,targetAnchorId:yn.anchor.id,endPoint:{x:yn.anchor.x,y:yn.anchor.y}}),Ie.targetNodeId===yn.node.id&&Ie.targetAnchorId===yn.anchor.id&&(hn=!0))}else{hn=!0;var eu=Ur.getData();ke.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:eu,msg:jr})}}else hn=!0;if(hn)m.recoveryEdge();else{var tu=Ie.getData();ke.deleteEdgeById(Ie.id);var ac=ke.addEdge(Of({},zn));ke.eventCenter.emit(Cn.EDGE_EXCHANGE_NODE,{data:{newEdge:ac.getData(),oldEdge:tu}})}(te=m.preTargetNode)===null||te===void 0||te.setElementState(Yr.DEFAULT)}finally{m.props.graphModel.eventCenter.emit(Cn.ADJUST_POINT_DRAGEND,{e:Z,data:m.stepDragData})}}),Ql(Jl(m),"recoveryEdge",function(){var F=m.props.edgeModel,Z=m.oldEdge,te=Z.startPoint,me=Z.endPoint,ke=Z.pointsList;F.updateStartPoint(te),F.updateEndPoint(me),F.modelType!==xr.LINE_EDGE&&(F.pointsList=ke,F.initPoints())}),Ql(Jl(m),"getAdjustPointStyle",function(){var F=m.props,Z=F.graphModel.theme;return F.edgeModel,Z.edgeAdjust}),m.state={dragging:!1,endX:0,endY:0},m.targetRuleResults=new Map,m.sourceRuleResults=new Map;var w=d.type,T=d.edgeModel,R=d.graphModel.eventCenter;return m.stepDragData={type:w,edgeData:T.getData()},m.stepDrag=new ve({onDragStart:m.onDragStart,onDragging:m.onDragging,onDragEnd:m.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:R,data:m.stepDragData}),m}return o=h,(l=[{key:"isAllowAdjust",value:function(d){var m=this.props,w=m.edgeModel,T=w.id,R=w.sourceNode,F=w.targetNode,Z=w.sourceAnchorId,te=w.targetAnchorId,me=m.type,ke=null,Ie=null,lt=null,it=null;if(me===oc.SOURCE?(ke=d.node,Ie=F,lt=d.anchor,it=F.getAnchorInfo(te)):(ke=R,Ie=d.node,it=d.anchor,lt=R.getAnchorInfo(Z)),this.preTargetNode&&this.preTargetNode!==d.node&&this.preTargetNode.setElementState(Yr.DEFAULT),this.preTargetNode=d.node,it.id===lt.id)return{pass:!1,msg:"",newTargetNode:Ie};var bt="".concat(ke.id,"_").concat(Ie.id,"_").concat(lt.id,"_").concat(it.id);if(!this.targetRuleResults.has(bt)){var Bt=ke.isAllowConnectedAsSource(Ie,lt,it,T),gn=Ie.isAllowConnectedAsTarget(ke,lt,it,T);this.sourceRuleResults.set(bt,ql(Bt)),this.targetRuleResults.set(bt,ql(gn))}var yn=this.sourceRuleResults.get(bt),zn=yn.isAllPass,hn=yn.msg,In=this.targetRuleResults.get(bt),Sn=In.isAllPass,jr=In.msg,Ur=zn&&Sn?Yr.ALLOW_CONNECT:Yr.NOT_ALLOW_CONNECT;return me===oc.SOURCE?ke.setElementState(Ur):Ie.setElementState(Ur),{pass:zn&&Sn,msg:jr||hn,newTargetNode:Ie}}},{key:"render",value:function(){var d=this.props,m=d.x,w=d.y,T=d.getAdjustPointShape,R=d.edgeModel,F=this.state.dragging;return Object(Ue.g)("g",{pointerEvents:F?"none":"",onMouseDown:this.handleMouseDown},F?"":T(m,w,R))}}])&&X3(o.prototype,l),h}(Ue.a);function H0(i){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},H0(i)}function ym(){return ym=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},ym.apply(this,arguments)}function K3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return cS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return cS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Z3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function J3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function X0(i,o){return X0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},X0(i,o)}function Q3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ky(i);if(o){var h=Ky(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return eD(this,l)}}function eD(i,o){if(o&&(H0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(i)}function ms(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ky(i){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ky(i)}function ic(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gm=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&X0(d,m)})(h,i);var o,l,s=Q3(h);function h(){var d;Z3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return ic(ms(d=s.call.apply(s,[this].concat(w))),"startTime",void 0),ic(ms(d),"contextMenuTime",void 0),ic(ms(d),"clickTimer",void 0),ic(ms(d),"textRef",Object(Ue.f)()),ic(ms(d),"handleHover",function(R,F){var Z=d.props,te=Z.model,me=Z.graphModel.eventCenter;te.setHovered(R);var ke=R?Cn.EDGE_MOUSEENTER:Cn.EDGE_MOUSELEAVE,Ie=te.getData();me.emit(ke,{data:Ie,e:F})}),ic(ms(d),"setHoverON",function(R){d.props.model.isHovered||(d.textRef&&d.textRef.current&&d.textRef.current.setHoverON(),d.handleHover(!0,R))}),ic(ms(d),"setHoverOFF",function(R){d.props.model.isHovered&&(d.textRef&&d.textRef.current&&d.textRef.current.setHoverOFF(),d.handleHover(!1,R))}),ic(ms(d),"handleContextMenu",function(R){R.preventDefault(),d.contextMenuTime=new Date().getTime(),d.clickTimer&&clearTimeout(d.clickTimer);var F=d.props,Z=F.model,te=F.graphModel,me=te.getPointByClient({x:R.clientX,y:R.clientY});te.setElementStateById(Z.id,Yr.SHOW_MENU,me.domOverlayPosition),d.toFront(),Z.isSelected||te.selectEdgeById(Z.id);var ke=Z==null?void 0:Z.getData();te.eventCenter.emit(Cn.EDGE_CONTEXTMENU,{data:ke,e:R,position:me})}),ic(ms(d),"handleMouseDown",function(R){R.stopPropagation(),d.startTime=new Date().getTime()}),ic(ms(d),"handleMouseUp",function(R){if(d.startTime&&!(new Date().getTime()-d.startTime>200||R.button===2)){var F=R.detail===2,Z=d.props,te=Z.model,me=Z.graphModel,ke=te==null?void 0:te.getData(),Ie=me.getPointByClient({x:R.clientX,y:R.clientY});if(F){var lt=me.editConfigModel,it=me.textEditElement;if(it&&it.id===te.id&&me.setElementStateById(te.id,Yr.DEFAULT),lt.edgeTextEdit&&te.text.editable&&me.setElementStateById(te.id,Yr.TEXT_EDIT),te.modelType===xr.POLYLINE_EDGE){var bt=te,Bt=me.getPointByClient({x:R.x,y:R.y}).canvasOverlayPosition,gn=Bt.x,yn=Bt.y,zn=Tr({x:gn,y:yn},bt.points);bt.dbClickPosition=zn}me.eventCenter.emit(Cn.EDGE_DBCLICK,{data:ke,e:R,position:Ie})}else me.eventCenter.emit(Cn.ELEMENT_CLICK,{data:ke,e:R,position:Ie}),me.eventCenter.emit(Cn.EDGE_CLICK,{data:ke,e:R,position:Ie});var hn=me.editConfigModel;me.selectEdgeById(te.id,Hs(R,hn)),d.toFront()}}),d}return o=h,(l=[{key:"getShape",value:function(){return Object(Ue.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var d=this.props,m=d.model,w=d.graphModel;if(m.state===Yr.TEXT_EDIT)return null;var T=!1,R=w.editConfigModel;return(m.text.draggable||R.edgeTextDraggable)&&(T=!0),Object(Ue.g)(W3,{ref:this.textRef,editable:R.edgeTextEdit&&m.text.editable,model:m,graphModel:w,draggable:T})}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=d.isSelected;return{start:m,end:w,hover:this.state.hover,isSelected:T}}},{key:"getLastTwoPoints",value:function(){var d=this.props.model;return[d.startPoint,d.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var d=this.props.model,m=d.id,w=d.getArrowStyle(),T=w.refY,R=T===void 0?0:T,F=w.refX,Z=F===void 0?2:F,te=K3(this.getLastTwoPoints(),2),me=te[0],ke=te[1],Ie="auto";return me!==null&&ke!==null&&(Ie=Cp(kd({x:ke.x-me.x,y:ke.y-me.y,z:0}))),Object(Ue.g)("g",null,Object(Ue.g)("defs",null,Object(Ue.g)("marker",{id:"marker-start-".concat(m),refX:-Z,refY:R,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Ue.g)("marker",{id:"marker-end-".concat(m),refX:Z,refY:R,overflow:"visible",orient:Ie,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var d=this.props.model.getArrowStyle();return d.stroke,d.strokeWidth,d.offset,d.verticalLength,Object(Ue.g)("path",null)}},{key:"getEndArrow",value:function(){var d=this.props.model.getArrowStyle(),m=d.stroke,w=d.strokeWidth,T=d.offset,R=d.verticalLength;return Object(Ue.g)("path",{stroke:m,fill:m,strokeWidth:w,transform:"rotate(180)",d:"M 0 0 L ".concat(T," -").concat(R," L ").concat(T," ").concat(R," Z")})}},{key:"getAdjustPointShape",value:function(d,m,w){var T=w.getAdjustPointStyle();return Object(Ue.g)(zh,ym({className:"lf-edge-adjust-point"},T,{x:d,y:m}))}},{key:"getAdjustPoints",value:function(){var d=this.props,m=d.model,w=d.graphModel,T=m.getAdjustStart(),R=m.getAdjustEnd();return Object(Ue.g)("g",null,Object(Ue.g)(sS,ym({type:"SOURCE"},T,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})),Object(Ue.g)(sS,ym({type:"TARGET"},R,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Ue.g)("g",null)}},{key:"getAppend",value:function(){return Object(Ue.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var d=this.props,m=d.graphModel,w=d.model;m.toFront(w.id)}},{key:"render",value:function(){var d=this.props,m=d.model,w=m.isSelected,T=m.isHitable,R=m.isShowAdjustPoint;return d.graphModel.animation,Object(Ue.g)("g",null,Object(Ue.g)("g",{className:["lf-edge",!T&&"pointer-none",w&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),R&&w?this.getAdjustPoints():"")}}])&&J3(o.prototype,l),h}(Ue.a);function q0(i){return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},q0(i)}function tD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return fS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return fS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var bm=function(i){var o={d:""};return Object.entries(i).forEach(function(l){var s=tD(l,2),h=s[0],d=s[1],m=q0(d);h!=="style"&&m==="object"||(o[h]=d)}),Object(Ue.g)("path",o)};function Y0(i){return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Y0(i)}function K0(){return K0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},K0.apply(this,arguments)}function nD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function rD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Z0(i,o){return Z0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Z0(i,o)}function oD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Zy(i);if(o){var h=Zy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return iD(this,l)}}function iD(i,o){if(o&&(Y0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Zy(i){return Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Zy(i)}var J0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Z0(d,m)})(h,i);var o,l,s=oD(h);function h(){return nD(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=d.isAnimation,R=d.arrowConfig,F=d.getEdgeStyle(),Z=d.getEdgeAnimationStyle(),te=Z.strokeDasharray,me=Z.stroke,ke=Z.strokeDashoffset,Ie=Z.animationName,lt=Z.animationDuration,it=Z.animationIterationCount,bt=Z.animationTimingFunction,Bt=Z.animationDirection;return Object(Ue.g)(Wh,K0({},F,{x1:m.x,y1:m.y,x2:w.x,y2:w.y},R,T?{strokeDasharray:te,stroke:me,style:{strokeDashoffset:ke,animationName:Ie,animationDuration:lt,animationIterationCount:it,animationTimingFunction:bt,animationDirection:Bt}}:{}))}},{key:"getAppendWidth",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=di({start:m,end:w}),R=T.d,F=T.strokeWidth,Z=T.fill,te=T.strokeDasharray,me=T.stroke;return Object(Ue.g)(bm,{d:R,fill:Z,strokeWidth:F,stroke:me,strokeDasharray:te})}}])&&rD(o.prototype,l),h}(gm);function Q0(i){return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q0(i)}function aD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return dS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var lD=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(l){var s=aD(l,2),h=s[0],d=s[1];(h==="style"||Q0(d)!=="object")&&(o[h]=d)}),Object(Ue.g)("polyline",o)};function e1(i){return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e1(i)}function pS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Jy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pS(Object(l),!0).forEach(function(s){xf(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function t1(){return t1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},t1.apply(this,arguments)}function uD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return hS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return hS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function sD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function n1(i,o){return n1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},n1(i,o)}function cD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Qy(i);if(o){var h=Qy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return fD(this,l)}}function fD(i,o){if(o&&(e1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sf(i)}function Sf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qy(i){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qy(i)}function xf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var r1=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&n1(d,m)})(h,i);var o,l,s=cD(h);function h(){var d;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),xf(Sf(d=s.call(this)),"drag",void 0),xf(Sf(d),"isDragging",void 0),xf(Sf(d),"isShowAdjustPointTemp",void 0),xf(Sf(d),"appendInfo",void 0),xf(Sf(d),"onDragStart",function(){var m=d.props.model;m.dragAppendStart(),d.isShowAdjustPointTemp=m.isShowAdjustPoint,m.isShowAdjustPoint=!1}),xf(Sf(d),"onDragging",function(m){var w=m.deltaX,T=m.deltaY,R=d.props,F=R.model,Z=R.graphModel;d.isDragging=!0;var te=Z.transformModel,me=Z.editConfigModel,ke=uD(te.fixDeltaXY(w,T),2),Ie=ke[0],lt=ke[1],it=F,bt=me.adjustEdgeMiddle;d.appendInfo=bt?it.dragAppendSimple(d.appendInfo,{x:Ie,y:lt}):it.dragAppend(d.appendInfo,{x:Ie,y:lt})}),xf(Sf(d),"onDragEnd",function(){var m=d.props,w=m.model,T=m.graphModel.eventCenter,R=w;R.dragAppendEnd(),d.isDragging=!1,R.isShowAdjustPoint=d.isShowAdjustPointTemp,d.appendInfo=void 0,T.emit(Cn.EDGE_ADJUST,{data:R.getData()})}),xf(Sf(d),"beforeDragStart",function(m,w){w.dragAble&&d.drag.handleMouseDown(m),d.appendInfo=w}),d.drag=new ve({onDragStart:d.onDragStart,onDragging:d.onDragging,onDragEnd:d.onDragEnd,isStopPropagation:!1}),d}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.points,w=d.isAnimation,T=d.arrowConfig,R=d.getEdgeStyle(),F=d.getEdgeAnimationStyle(),Z=F.strokeDasharray,te=F.stroke,me=F.strokeDashoffset,ke=F.animationName,Ie=F.animationDuration,lt=F.animationIterationCount,it=F.animationTimingFunction,bt=F.animationDirection;return Object(Ue.g)(lD,t1({points:m},R,T,w?{strokeDasharray:Z,stroke:te,style:{strokeDashoffset:me,animationName:ke,animationDuration:Ie,animationIterationCount:lt,animationTimingFunction:it,animationDirection:bt}}:{}))}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=d.points,w=d.isSelected,T={start:null,end:null,hover:this.state.hover,isSelected:w},R=nr(m);return R.length>=2&&(T.start=R[R.length-2],T.end=R[R.length-1]),T}},{key:"getLastTwoPoints",value:function(){var d=this.props.model.points,m=nr(d);return m.length>=2?[m[m.length-2],m[m.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(d){var m,w=d.start,T=d.end;if(w.x===T.x&&w.y===T.y)m="";else{var R={start:w,end:T,offset:10,verticalLength:5},F=cs(Jy(Jy({},R),{},{type:"start"})),Z=cs(Jy(Jy({},R),{},{type:"end"}));m="M".concat(F.leftX," ").concat(F.leftY,` 
      L`).concat(F.rightX," ").concat(F.rightY,` 
      L`).concat(Z.rightX," ").concat(Z.rightY,`
      L`).concat(Z.leftX," ").concat(Z.leftY," z")}return{d:m,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(d){var m=this.getAppendAttributes(d),w=m.d,T=m.strokeWidth,R=m.fill,F=m.strokeDasharray,Z=m.stroke;return Object(Ue.g)(bm,{d:w,fill:R,strokeWidth:T,stroke:Z,strokeDasharray:F})}},{key:"getAppendWidth",value:function(){for(var d=this,m=this.props,w=m.model,T=m.graphModel,R=w.pointsList,F=w.draggable,Z=[],te=R.length,me=function(Ie){var lt="lf-polyline-append",it={start:{x:R[Ie].x,y:R[Ie].y},end:{x:R[Ie+1].x,y:R[Ie+1].y},startIndex:Ie,endIndex:Ie+1,direction:"",dragAble:!0},bt=Object(Ue.g)("g",{className:lt},d.getAppendShape(it)),Bt=T.editConfigModel,gn=Bt.adjustEdge,yn=Bt.adjustEdgeMiddle;if(gn&&F){var zn=it.startIndex,hn=it.endIndex,In=yn&&(zn===0||hn===te-1);it.dragAble=!In,it.start.x===it.end.x?(it.dragAble&&(lt+="-ew-resize"),it.direction=fo.VERTICAL):it.start.y===it.end.y&&(it.dragAble&&(lt+="-ns-resize"),it.direction=fo.HORIZONTAL),bt=Object(Ue.g)("g",{className:d.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Sn){return d.beforeDragStart(Sn,it)}},Object(Ue.g)("g",{className:lt},d.getAppendShape(it)))}Z.push(bt)},ke=0;ke<te-1;ke++)me(ke);return Object(Ue.g)("g",null,Z)}}])&&sD(o.prototype,l),h}(gm);function o1(i){return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o1(i)}function dD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return vS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return vS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function i1(){return i1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},i1.apply(this,arguments)}function pD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function a1(i,o){return a1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},a1(i,o)}function vD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=eg(i);if(o){var h=eg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return mD(this,l)}}function mD(i,o){if(o&&(o1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function eg(i){return eg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},eg(i)}var l1=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&a1(d,m)})(h,i);var o,l,s=vD(h);function h(){return pD(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.getEdgeStyle(),w=d.path,T=d.isAnimation,R=d.arrowConfig,F=d.getEdgeAnimationStyle(),Z=F.strokeDasharray,te=F.stroke,me=F.strokeDashoffset,ke=F.animationName,Ie=F.animationDuration,lt=F.animationIterationCount,it=F.animationTimingFunction,bt=F.animationDirection;return Object(Ue.g)(bm,i1({d:w},m,R,T?{strokeDasharray:Z,stroke:te,style:{strokeDashoffset:me,animationName:ke,animationDuration:Ie,animationIterationCount:lt,animationTimingFunction:it,animationDirection:bt}}:{}))}},{key:"getAppendWidth",value:function(){var d=this.props.model.path;return Object(Ue.g)(bm,{d,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=this.state.hover,w=d.isSelected,T=d.getArrowStyle().offset,R=d.pointsList.map(function(Z){return{x:Z.x,y:Z.y}}),F=dD(pi(R,T),2);return{start:F[0],end:F[1],hover:m,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var d=this.props.model,m=d.getArrowStyle().offset,w=d.pointsList.map(function(T){return{x:T.x,y:T.y}});return pi(w,m)}}])&&hD(o.prototype,l),h}(gm);function u1(i){return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u1(i)}function mS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function yD(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function gD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function bD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function s1(i,o){return s1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},s1(i,o)}function _D(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=tg(i);if(o){var h=tg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return wD(this,l)}}function wD(i,o){if(o&&(u1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function tg(i){return tg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tg(i)}var ED=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&s1(d,m)})(h,i);var o,l,s=_D(h);function h(){return gD(this,h),s.apply(this,arguments)}return o=h,l=[{key:"getArrowAttributes",value:function(){var d=this.props,m=d.arrowInfo,w=d.style,T=m.start,R=m.end,F={start:T,end:R,offset:w.offset,verticalLength:w.verticalLength,type:"end"},Z=cs(F),te=Z.leftX,me=Z.leftY,ke=Z.rightX,Ie=Z.rightY;return function(lt){for(var it=1;it<arguments.length;it++){var bt=arguments[it]!=null?arguments[it]:{};it%2?mS(Object(bt),!0).forEach(function(Bt){yD(lt,Bt,bt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(bt)):mS(Object(bt)).forEach(function(Bt){Object.defineProperty(lt,Bt,Object.getOwnPropertyDescriptor(bt,Bt))})}return lt}({d:"M".concat(te," ").concat(me," L").concat(R.x," ").concat(R.y," L").concat(ke," ").concat(Ie," z")},w)}},{key:"getShape",value:function(){var d=this.getArrowAttributes(),m=d.d,w=d.strokeWidth,T=d.stroke,R=d.fill;return Object(Ue.g)(bm,{d:m,fill:R,strokeWidth:w,stroke:T})}},{key:"render",value:function(){return Object(Ue.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&bD(o.prototype,l),h}(Ue.a),yS=function(i,o){return gt(i,o)},OD=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},c1=function(){return Rn.a.Date.now()},SD=Math.max,xD=Math.min,AD=function(i,o,l){var s,h,d,m,w,T,R=0,F=!1,Z=!1,te=!0;if(typeof i!="function")throw new TypeError("Expected a function");function me(Bt){var gn=s,yn=h;return s=h=void 0,R=Bt,m=i.apply(yn,gn)}function ke(Bt){return R=Bt,w=setTimeout(lt,o),F?me(Bt):m}function Ie(Bt){var gn=Bt-T;return T===void 0||gn>=o||gn<0||Z&&Bt-R>=d}function lt(){var Bt=c1();if(Ie(Bt))return it(Bt);w=setTimeout(lt,function(gn){var yn=o-(gn-T);return Z?xD(yn,d-(gn-R)):yn}(Bt))}function it(Bt){return w=void 0,te&&s?me(Bt):(s=h=void 0,m)}function bt(){var Bt=c1(),gn=Ie(Bt);if(s=arguments,h=this,T=Bt,gn){if(w===void 0)return ke(T);if(Z)return clearTimeout(w),w=setTimeout(lt,o),me(T)}return w===void 0&&(w=setTimeout(lt,o)),m}return o=qs(o)||0,Dr(l)&&(F=!!l.leading,d=(Z="maxWait"in l)?SD(qs(l.maxWait)||0,o):d,te="trailing"in l?!!l.trailing:te),bt.cancel=function(){w!==void 0&&clearTimeout(w),R=0,s=T=h=w=void 0},bt.flush=function(){return w===void 0?m:it(c1())},bt},TD=r(172);function MD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Id(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gS,bS,_S,kD=function(){function i(s){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),Id(this,"undos",[]),Id(this,"redos",[]),Id(this,"callbacks",[]),Id(this,"stopWatch",null),Id(this,"curData",null),Id(this,"maxSize",50),Id(this,"waitTime",100),Id(this,"eventCenter",void 0),this.eventCenter=s}var o,l;return o=i,(l=[{key:"add",value:function(s){yS(OD(this.undos),s)||(this.undos.push(s),yS(this.curData,s)||(this.redos=[]),this.eventCenter.emit(Cn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var s=this.undos.pop();this.redos.push(s);var h=this.undos.pop();return this.curData=to(h),h}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var s=this.redos.pop();return this.curData=to(s),s}}},{key:"watch",value:function(s){var h=this;this.stopWatch&&this.stopWatch(),this.undos.push(s.modelToGraphData()),this.stopWatch=Object(TD.a)(s,AD(function(){var d=s.modelToHistoryData();d&&h.add(d)},this.waitTime))}}])&&MD(o.prototype,l),i}();function f1(i){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f1(i)}function PD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return wS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return wS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ES(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Up(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ES(Object(l),!0).forEach(function(s){Bp(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ES(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function OS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function d1(i,o){return d1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},d1(i,o)}function ND(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ng(i);if(o){var h=ng(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return RD(this,l)}}function RD(i,o){if(o&&(f1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nv(i)}function nv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ng(i){return ng=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ng(i)}function Bp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var SS,xS,AS,p1=ys((_S=bS=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&d1(m,w)})(d,i);var o,l,s,h=ND(d);function d(){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,d),Bp(nv(m=h.call(this)),"ref",Object(Ue.f)()),Bp(nv(m),"__prevText",{type:"",text:"",id:""}),Bp(nv(m),"keyupHandler",function(w){var T=m.props.graphModel.textEditElement;w.key==="Enter"&&w.altKey&&T.setElementState(0)}),Bp(nv(m),"inputHandler",function(w){var T=w.target.innerText,R=m.props.graphModel.textEditElement;m.__prevText={type:R.type,text:T.replace(/(\r\n)+$|(\n)+$/,""),id:R.id}}),Bp(nv(m),"keydownHandler",function(w){w.stopPropagation()}),m.state={style:{left:0,top:0}},m}return o=d,s=[{key:"getDerivedStateFromProps",value:function(m){var w,T=m.graphModel,R=T.transformModel,F=T.theme,Z=F.inputText,te=T.textEditElement;if(te){var me;if((me=te.text)===null||me===void 0||!me.value)if(te.BaseType===co.EDGE){var ke=(te=te).text,Ie=te.textPosition,lt=Ie.x,it=Ie.y;ke.x=lt,ke.y=it,te.setText(ke)}else te=te;var bt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(te.BaseType===co.EDGE){var Bt=F.edgeText,gn=Bt.overflowMode,yn=Bt.lineHeight,zn=Bt.wrapPadding,hn=Bt.textWidth;hn&&gn==="autoWrap"&&(w=Up(Up({},bt),{},{width:hn,minWidth:hn,lineHeight:yn,padding:zn}))}else if(te.BaseType===co.NODE){var In=F.nodeText,Sn=In.overflowMode,jr=In.lineHeight,Ur=In.wrapPadding,pr=In.textWidth,Kr=te,_i=Kr.width,wi=Kr.modelType,Ta=Kr.textWidth||pr||_i;(wi!==xr.TEXT_NODE&&Sn==="autoWrap"||wi===xr.TEXT_NODE&&pr)&&(w=Up(Up({},bt),{},{width:Ta,minWidth:Ta,lineHeight:jr,padding:Ur}))}var eu=te.text,tu=eu.x,ac=eu.y,Vp=PD(R.CanvasPointToHtmlPoint([tu,ac]),2);return{style:Up(Up({left:Vp[0],top:Vp[1]},w),Z)}}}}],(l=[{key:"componentDidUpdate",value:function(){var m=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var w=this.__prevText,T=w.text,R=w.id;m.updateText(R,T),m.eventCenter.emit(Cn.TEXT_UPDATE,Up({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(m){if(window.getSelection!==void 0&&document.createRange!==void 0){var w=document.createRange();w.selectNodeContents(m),w.collapse(!1);var T=window.getSelection();T.removeAllRanges(),T.addRange(w)}}},{key:"render",value:function(){var m,w=this.props.graphModel.textEditElement,T=this.state.style;return w?Object(Ue.g)("div",{contentEditable:!0,className:"lf-text-input",style:T,ref:this.ref,key:w.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(m=w.text)===null||m===void 0?void 0:m.value):null}}])&&OS(o.prototype,l),s&&OS(o,s),d}(Ue.a),Bp(bS,"toolName","textEdit"),gS=_S))||gS,CD=function(i){return i.modelType===xr.LINE_EDGE?function(o){var l=o.startPoint,s=o.endPoint,h=(l.x+s.x)/2,d=(l.y+s.y)/2,m=Math.abs(l.x-s.x)+10,w=Math.abs(l.y-s.y)+10;return{x:h-m/2,y:d-w/2,x1:h+m/2,y1:d+w/2}}(i):i.modelType===xr.POLYLINE_EDGE?function(o){var l=o.points,s=nr(l),h=st(s,8),d=h.x,m=h.y,w=h.width,T=h.height;return{x:d-w/2,y:m-T/2,x1:d+w/2,y1:m+T/2}}(i):i.modelType===xr.BEZIER_EDGE?function(o){var l=o.path,s=vo(l),h=st(s,8),d=h.x,m=h.y,w=h.width,T=h.height;return{x:d-w/2,y:m-T/2,x1:d+w/2,y1:m+T/2}}(i):void 0};function h1(i){return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h1(i)}function TS(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,R=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch(F){R=!0,m=F}finally{try{T||h.return==null||h.return()}finally{if(R)throw m}}return w}}(i,o)||MS(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function DD(i){return function(o){if(Array.isArray(o))return v1(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||MS(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function MS(i,o){if(i){if(typeof i=="string")return v1(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?v1(i,o):void 0}}function v1(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function jD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function m1(i,o){return m1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},m1(i,o)}function ID(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=rg(i);if(o){var h=rg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return LD(this,l)}}function LD(i,o){if(o&&(h1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rv(i)}function rv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function rg(i){return rg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},rg(i)}function ov(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var y1=ys((AS=xS=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&m1(d,m)})(h,i);var o,l,s=ID(h);function h(d){var m;(function(F,Z){if(!(F instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,h),ov(rv(m=s.call(this)),"stepDrag",void 0),ov(rv(m),"handleMouseDown",function(F){m.stepDrag.handleMouseDown(F)}),ov(rv(m),"handleWheelEvent",function(F){var Z,te;F.preventDefault();var me=F.deltaX,ke=F.deltaY,Ie=F.clientX,lt=F.clientY,it=F.ctrlKey,bt=new WheelEvent("wheel",{deltaX:me,deltaY:ke,clientX:Ie,clientY:lt,ctrlKey:it});(Z=m.props.logicFlow.container)===null||Z===void 0||(te=Z.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||te===void 0||te.dispatchEvent(bt)}),ov(rv(m),"onDragging",function(F){var Z=F.deltaX,te=F.deltaY,me=m.props.graphModel,ke=me.getSelectElements(!0);me.moveNodes(ke.nodes.map(function(Ie){return Ie.id}),Z,te)}),ov(rv(m),"handleContextMenu",function(F){F.preventDefault();var Z=m.props,te=Z.graphModel,me=Z.graphModel,ke=me.eventCenter,Ie=me.selectElements,lt=te.getPointByClient({x:F.clientX,y:F.clientY}),it={nodes:[],edges:[]};DD(Ie.values()).forEach(function(bt){bt.BaseType===co.NODE&&it.nodes.push(bt.getData()),bt.BaseType===co.EDGE&&it.edges.push(bt.getData())}),ke.emit(Cn.SELECTION_CONTEXTMENU,{data:it,e:F,position:lt})});var w=d.graphModel,T=w.gridSize,R=w.eventCenter;return m.stepDrag=new ve({onDragging:m.onDragging,step:T,eventType:"SELECTION",eventCenter:R}),m}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel,m=d.selectElements,w=d.transformModel;if(!(m.size<=1)){var T=Number.MAX_SAFE_INTEGER,R=Number.MAX_SAFE_INTEGER,F=Number.MIN_SAFE_INTEGER,Z=Number.MIN_SAFE_INTEGER;m.forEach(function(Ie){var lt={x:0,y:0,x1:0,y1:0};Ie.BaseType===co.NODE&&(lt=function(it){var bt=it.x,Bt=it.y,gn=it.width,yn=it.height;return{x:bt-gn/2,y:Bt-yn/2,x1:bt+gn/2,y1:Bt+yn/2}}(Ie)),Ie.BaseType===co.EDGE&&(lt=CD(Ie)),T=Math.min(T,lt.x),R=Math.min(R,lt.y),F=Math.max(F,lt.x1),Z=Math.max(Z,lt.y1)});var te=TS(w.CanvasPointToHtmlPoint([T,R]),2);T=te[0],R=te[1];var me=TS(w.CanvasPointToHtmlPoint([F,Z]),2);F=me[0],Z=me[1];var ke={left:"".concat(T-10,"px"),top:"".concat(R-10,"px"),width:"".concat(F-T+20,"px"),height:"".concat(Z-R+20,"px")};return Object(Ue.g)("div",{className:"lf-multiple-select",style:ke,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&jD(o.prototype,l),h}(Ue.a),ov(xS,"toolName","multipleSelect"),SS=AS))||SS;function FD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function og(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var $D=function(){function i(s){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),og(this,"tools",void 0),og(this,"components",void 0),og(this,"toolMap",new Map),og(this,"instance",void 0),this.instance=s,this.isDisabledTool(p1.toolName)||this.registerTool(p1.toolName,p1),this.isDisabledTool(y1.toolName)||this.registerTool(y1.toolName,y1);var h=s.graphModel;h.eventCenter.on("".concat(Cn.GRAPH_TRANSFORM,",").concat(Cn.NODE_CLICK,",").concat(Cn.BLANK_CLICK," "),function(){var d=h.textEditElement,m=h.editConfigModel,w=m.edgeTextEdit,T=m.nodeTextEdit;(w||T)&&d&&h.textEditElement.setElementState(Yr.DEFAULT)})}var o,l;return o=i,(l=[{key:"isDisabledTool",value:function(s){return this.instance.options.disabledTools.indexOf(s)!==-1}},{key:"registerTool",value:function(s,h){this.toolMap.set(s,h)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&FD(o.prototype,l),i}(),UD=r(173),BD=r.n(UD);function VD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function g1(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var kS=function(){function i(s){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),g1(this,"mousetrap",void 0),g1(this,"options",void 0),g1(this,"target",void 0),s.keyboard||(s.keyboard={enabled:!1}),this.options=s;var h=s.lf;this.target=h.container,this.mousetrap=new BD.a(this.target),s.keyboard.enabled&&!h.options.isSilentMode&&this.enable(!0)}var o,l;return o=i,(l=[{key:"initShortcuts",value:function(){var s=this,h=this.options.keyboard.shortcuts;if(h)if(lo(h))h.forEach(function(T){var R=T.keys,F=T.callback,Z=T.action;return s.on(R,F,Z)});else{var d=h.keys,m=h.callback,w=h.action;this.on(d,m,w)}}},{key:"on",value:function(s,h,d){this.mousetrap.bind(this.getKeys(s),h,d)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(s,h){this.mousetrap.unbind(this.getKeys(s),h)}},{key:"enable",value:function(s){(this.disabled||s)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(s){var h=this;return(Array.isArray(s)?s:[s]).map(function(d){return h.formatKey(d)})}},{key:"formatKey",value:function(s){return s.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&VD(o.prototype,l),i}(),WD=kS,Af=null;function PS(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function NS(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(l){l.x+=o,l.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var iv=40,b1=40;function _1(i){return _1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_1(i)}function RS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function _m(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?RS(Object(l),!0).forEach(function(s){hi(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):RS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function CS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function hi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var w1=Symbol("plugin register by Logicflow.use"),E1=function(){function i(h){var d,m,w=this;(function(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),hi(this,"container",void 0),hi(this,"width",void 0),hi(this,"height",void 0),hi(this,"graphModel",void 0),hi(this,"history",void 0),hi(this,"viewMap",new Map),hi(this,"tool",void 0),hi(this,"keyboard",void 0),hi(this,"dnd",void 0),hi(this,"options",void 0),hi(this,"snaplineModel",void 0),hi(this,"components",[]),hi(this,"plugins",void 0),hi(this,"extension",{}),hi(this,"adapterIn",void 0),hi(this,"adapterOut",void 0),hi(this,"getView",function(T){return w.viewMap.get(T)}),h=k2(h),this.options=h,this.container=this.initContainer(h.container),this.plugins=h.plugins,this.graphModel=new YN(_m({},h)),this.tool=new $D(this),this.history=new kD(this.graphModel.eventCenter),this.dnd=new HR({lf:this}),this.keyboard=new WD({lf:this,keyboard:h.keyboard}),h.snapline!==!1&&(this.snaplineModel=new WO(this.graphModel),d=this.graphModel.eventCenter,m=this.snaplineModel,d.on("node:mousemove",function(T){var R=T.data;m.setNodeSnapLine(R)}),d.on("node:mouseup",function(){m.clearSnapline()})),function(T,R){var F=T.keyboard,Z=F.options.keyboard;F.on(["cmd + c","ctrl + c"],function(){if(b1=iv,!Z.enabled||R.textEditElement)return!0;var te=T.options.guards,me=R.getSelectElements(!1);return te&&te.beforeClone&&!te.beforeClone(me)||me.nodes.length===0&&me.edges.length===0?(Af=null,!0):((Af=me).nodes.forEach(function(ke){return PS(ke,iv)}),Af.edges.forEach(function(ke){return NS(ke,iv)}),!1)}),F.on(["cmd + v","ctrl + v"],function(){if(!Z.enabled||R.textEditElement)return!0;if(Af&&(Af.nodes||Af.edges)){T.clearSelectElements();var te=T.addElements(Af,b1);if(!te)return!0;te.nodes.forEach(function(me){return T.selectElementById(me.id,!0)}),te.edges.forEach(function(me){return T.selectElementById(me.id,!0)}),Af.nodes.forEach(function(me){return PS(me,iv)}),Af.edges.forEach(function(me){return NS(me,iv)}),b1+=iv}return!1}),F.on(["cmd + z","ctrl + z"],function(){return!Z.enabled||!!R.textEditElement||(T.undo(),!1)}),F.on(["cmd + y","ctrl + y"],function(){return!Z.enabled||!!R.textEditElement||(T.redo(),!1)}),F.on(["backspace"],function(){if(!Z.enabled||R.textEditElement)return!0;var te=R.getSelectElements(!0);return T.clearSelectElements(),te.edges.forEach(function(me){return T.deleteEdge(me.id)}),te.nodes.forEach(function(me){return T.deleteNode(me.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(h.disabledPlugins)}var o,l,s;return o=i,l=[{key:"register",value:function(h,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof h=="string"){var w={BaseEdge:gm,BaseEdgeModel:Td,BaseNode:Ef,BaseNodeModel:wf,RectNode:p0,RectNodeModel:G_,CircleNode:y0,CircleNodeModel:x_,PolygonNode:E0,PolygonNodeModel:U_,TextNode:D0,TextNodeModel:q_,LineEdge:J0,LineEdgeModel:Js,DiamondNode:A0,DiamondNodeModel:P_,PolylineEdge:r1,PolylineEdgeModel:Aa,BezierEdge:l1,BezierEdgeModel:b_,EllipseNode:N0,EllipseNodeModel:D_,HtmlNode:F0,HtmlNodeModel:Z_,h:Ue.g,type:h};this.viewMap.forEach(function(te){var me=te.extendKey;me&&(w[me]=te)}),this.graphModel.modelMap.forEach(function(te){var me=te.extendKey;me&&(w[me]=te)});var T=d(w),R=T.view,F=T.model,Z=R;m&&!Z.isObervered&&(Z.isObervered=!0,Z=pn(Z)),this.setView(h,Z),this.graphModel.setModel(h,F)}else this.registerElement(h)}},{key:"registerElement",value:function(h){var d=h.view;h.isObserverView===!1||d.isObervered||(d.isObervered=!0,d=pn(d)),this.setView(h.type,d),this.graphModel.setModel(h.type,h.model)}},{key:"batchRegister",value:function(){var h=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];d.forEach(function(m){h.registerElement(m)})}},{key:"defaultRegister",value:function(){this.registerElement({view:p0,model:G_,type:"rect"}),this.registerElement({type:"circle",view:y0,model:x_}),this.registerElement({type:"polygon",view:E0,model:U_}),this.registerElement({type:"line",view:J0,model:Js}),this.registerElement({type:"polyline",view:r1,model:Aa}),this.registerElement({type:"bezier",view:l1,model:b_}),this.registerElement({type:"text",view:D0,model:q_}),this.registerElement({type:"ellipse",view:N0,model:D_}),this.registerElement({type:"diamond",view:A0,model:P_}),this.registerElement({type:"html",view:F0,model:Z_})}},{key:"selectElementById",value:function(h){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(h,d),!d&&m&&this.graphModel.toFront(h)}},{key:"focusOn",value:function(h){var d=this.graphModel.transformModel,m=h.coordinate,w=h.id;if(!m){var T=this.getNodeModelById(w);T&&(m=T.getData());var R=this.getEdgeModelById(w);R&&(m=R.textPosition)}var F=m,Z=F.x,te=F.y;d.focusOn(Z,te,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(h){this.graphModel.setTheme(h)}},{key:"resize",value:function(h,d){this.graphModel.resize(h,d),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(h){this.graphModel.setDefaultEdgeType(h)}},{key:"updateText",value:function(h,d){this.graphModel.updateText(h,d)}},{key:"deleteElement",value:function(h){var d,m,w,T=this.getModelById(h);return!!T&&(m=(w=(hi(d={},co.NODE,this.deleteNode),hi(d,co.EDGE,this.deleteEdge),d)[T.BaseType])===null||w===void 0?void 0:w.call(this,h))!==null&&m!==void 0&&m}},{key:"getModelById",value:function(h){return this.graphModel.getElement(h)}},{key:"getDataById",value:function(h){var d;return(d=this.graphModel.getElement(h))===null||d===void 0?void 0:d.getData()}},{key:"changeNodeType",value:function(h,d){this.graphModel.changeNodeType(h,d)}},{key:"changeEdgeType",value:function(h,d){this.graphModel.changeEdgeType(h,d)}},{key:"getNodeEdges",value:function(h){return this.graphModel.getNodeEdges(h)}},{key:"addNode",value:function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,m=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(h,d,m)}},{key:"deleteNode",value:function(h){var d=this.graphModel.getNodeModelById(h);if(!d)return!1;var m=d.getData(),w=this.options.guards,T=!w||!w.beforeDelete||w.beforeDelete(m);return T&&this.graphModel.deleteNode(h),T}},{key:"cloneNode",value:function(h){var d=this.graphModel.getNodeModelById(h).getData(),m=this.options.guards;if(!m||!m.beforeClone||m.beforeClone(d))return this.graphModel.cloneNode(h)}},{key:"changeNodeId",value:function(h,d){return this.graphModel.changeNodeId(h,d)}},{key:"getNodeModelById",value:function(h){return this.graphModel.getNodeModelById(h)}},{key:"getNodeDataById",value:function(h){var d;return(d=this.graphModel.getNodeModelById(h))===null||d===void 0?void 0:d.getData()}},{key:"addEdge",value:function(h){return this.graphModel.addEdge(h)}},{key:"deleteEdge",value:function(h){var d=this.options.guards,m=this.graphModel.edgesMap[h];if(!m)return!1;var w=m.model.getData(),T=!d||!d.beforeDelete||d.beforeDelete(w);return T&&this.graphModel.deleteEdgeById(h),T}},{key:"deleteEdgeByNodeId",value:function(h){var d=h.sourceNodeId,m=h.targetNodeId;d&&m?this.graphModel.deleteEdgeBySourceAndTarget(d,m):d?this.graphModel.deleteEdgeBySource(d):m&&this.graphModel.deleteEdgeByTarget(m)}},{key:"changeEdgeId",value:function(h,d){return this.graphModel.changeEdgeId(h,d)}},{key:"getEdgeModelById",value:function(h){var d;return(d=this.graphModel.edgesMap[h])===null||d===void 0?void 0:d.model}},{key:"getEdgeModels",value:function(h){var d=this.graphModel.edges,m=h.sourceNodeId,w=h.targetNodeId;if(m&&w){var T=[];return d.forEach(function(Z){Z.sourceNodeId===m&&Z.targetNodeId===w&&T.push(Z)}),T}if(m){var R=[];return d.forEach(function(Z){Z.sourceNodeId===m&&R.push(Z)}),R}if(w){var F=[];return d.forEach(function(Z){Z.targetNodeId===w&&F.push(Z)}),F}return[]}},{key:"getEdgeDataById",value:function(h){var d;return(d=this.getEdgeModelById(h))===null||d===void 0?void 0:d.getData()}},{key:"getNodeIncomingEdge",value:function(h){return this.graphModel.getNodeIncomingEdge(h)}},{key:"getNodeOutgoingEdge",value:function(h){return this.graphModel.getNodeOutgoingEdge(h)}},{key:"getNodeIncomingNode",value:function(h){return this.graphModel.getNodeIncomingNode(h)}},{key:"getNodeOutgoingNode",value:function(h){return this.graphModel.getNodeOutgoingNode(h)}},{key:"editText",value:function(h){this.graphModel.editText(h)}},{key:"setProperties",value:function(h,d){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.setProperties(bi(d))}},{key:"deleteProperty",value:function(h,d){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.deleteProperty(d)}},{key:"getProperties",value:function(h){var d;return(d=this.graphModel.getElement(h))===null||d===void 0?void 0:d.getProperties()}},{key:"toFront",value:function(h){this.graphModel.toFront(h)}},{key:"setElementZIndex",value:function(h,d){return this.graphModel.setElementZIndex(h,d)}},{key:"addElements",value:function(h){for(var d=this,m=h.nodes,w=h.edges,T={},R={nodes:[],edges:[]},F=0;F<m.length;F++){var Z=m[F],te=Z.id,me=this.addNode(Z);if(!me)return;te&&(T[te]=me.id),R.nodes.push(me)}return w.forEach(function(ke){var Ie=ke.sourceNodeId,lt=ke.targetNodeId;T[Ie]&&(Ie=T[Ie]),T[lt]&&(lt=T[lt]);var it=d.graphModel.addEdge(_m(_m({},ke),{},{sourceNodeId:Ie,targetNodeId:lt}));R.edges.push(it)}),R}},{key:"getAreaElement",value:function(h,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],T=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(h,d,m,w,T).map(function(R){return R.getData()})}},{key:"getSelectElements",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(h)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var h=this.graphModel.modelToGraphData();if(this.adapterOut){for(var d=arguments.length,m=new Array(d),w=0;w<d;w++)m[w]=arguments[w];return this.adapterOut.apply(this,[h].concat(m))}return h}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(h){var d=this.graphModel,m=d.editConfigModel,w=d.transformModel;m.updateEditConfig(h),(h==null?void 0:h.stopMoveGraph)!==void 0&&w.updateTranslateLimits(h.stopMoveGraph),h!=null&&h.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(h,d){return this.graphModel.getPointByClient({x:h,y:d})}},{key:"undo",value:function(){if(this.history.undoAble()){var h=bi(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"redo",value:function(){if(this.history.redoAble()){var h=bi(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"zoom",value:function(h,d){return this.graphModel.transformModel.zoom(h,d)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(h){this.graphModel.transformModel.setZoomMiniSize(h)}},{key:"setZoomMaxSize",value:function(h){this.graphModel.transformModel.setZoomMaxSize(h)}},{key:"getTransform",value:function(){var h=this.graphModel.transformModel;return{SCALE_X:h.SCALE_X,SCALE_Y:h.SCALE_Y,TRANSLATE_X:h.TRANSLATE_X,TRANSLATE_Y:h.TRANSLATE_Y}}},{key:"translate",value:function(h,d){this.graphModel.transformModel.translate(h,d)}},{key:"resetTranslate",value:function(){var h=this.graphModel.transformModel,d=h.TRANSLATE_X,m=h.TRANSLATE_Y;this.translate(-d,-m)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(h,d){d===void 0&&(d=h),this.graphModel.fitView(h,d)}},{key:"openEdgeAnimation",value:function(h){this.graphModel.openEdgeAnimation(h)}},{key:"closeEdgeAnimation",value:function(h){this.graphModel.closeEdgeAnimation(h)}},{key:"on",value:function(h,d){this.graphModel.eventCenter.on(h,d)}},{key:"off",value:function(h,d){this.graphModel.eventCenter.off(h,d)}},{key:"once",value:function(h,d){this.graphModel.eventCenter.once(h,d)}},{key:"emit",value:function(h,d){this.graphModel.eventCenter.emit(h,d)}},{key:"initContainer",value:function(h){var d=document.createElement("div");return d.style.position="relative",d.style.width="100%",d.style.height="100%",h.innerHTML="",h.appendChild(d),d}},{key:"installPlugins",value:function(){var h,d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=(h=this.plugins)!==null&&h!==void 0?h:i.extensions;w.forEach(function(T){var R=null,F=null;T[w1]?(R=T.extension,F=T.props):R=T;var Z=R.pluginName||R.name;m.indexOf(Z)===-1&&d.installPlugin(R,F)})}},{key:"installPlugin",value:function(h,d){if(_1(h)==="object"){var m=h.install,w=h.render;return m&&m.call(h,this,i),w&&this.components.push(w.bind(h)),void(this.extension[h.pluginName]=h)}var T=h,R=new T({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:d});R.render&&this.components.push(R.render.bind(R)),this.extension[T.pluginName]=R}},{key:"updateAttributes",value:function(h,d){this.graphModel.updateAttributes(h,d)}},{key:"createFakerNode",value:function(h){var d=this.graphModel.modelMap.get(h.type);if(d){var m=new d(_m(_m({},h),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(m),m}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(h){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(h)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(h,d){this.viewMap.set(h,d)}},{key:"renderRawData",value:function(h){this.graphModel.graphDataToModel(bi(h)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Ue.j)(Object(Ue.g)(GR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Cn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(h=this.adapterIn(h)),this.renderRawData(h)}}],s=[{key:"use",value:function(h,d){var m,w,T=h.pluginName;T||(T=h.name);var R=(m=this.extensions.get(T))===null||m===void 0?void 0:m.extension;R&&R.destroy&&R.destroy(),this.extensions.set(T,(hi(w={},w1,w1),hi(w,"extension",h),hi(w,"props",d),w))}}],l&&CS(o.prototype,l),s&&CS(o,s),i}();function ys(i){return pn(i)}hi(E1,"extensions",new Map),a.default=E1}])})}(sg,sg.exports)),sg.exports}var vn=tB();const nB=Kj(vn);var rB=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),oB=(globalThis==null?void 0:globalThis._ids)||new rB;function Hv(){return oB.next()}var Rk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Rk(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(vn.CircleNodeModel);(function(e){Rk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(vn.CircleNode);var Ck=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),jg=function(){return jg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jg.apply(this,arguments)};(function(e){Ck(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(vn.CircleNodeModel);(function(e){Ck(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,u=n.y,c=n.r,v=e.prototype.getShape.call(this);return vn.h("g",{},v,vn.h("circle",jg(jg({},a),{cx:r,cy:u,r:c-5})))},t.extendKey="EndEventView",t})(vn.CircleNode);var Dk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Nm=function(){return Nm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nm.apply(this,arguments)};(function(e){Dk(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(vn.PolygonNodeModel);(function(e){Dk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.points,f=n.getNodeStyle();return vn.h("g",{transform:"matrix(1 0 0 1 "+(a-u/2)+" "+(r-c/2)+")"},vn.h("polygon",Nm(Nm({},f),{x:a,y:r,points:v})),vn.h("path",Nm({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},f)))},t.extendKey="ExclusiveGatewayNode",t})(vn.PolygonNode);var jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ig=function(){return Ig=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ig.apply(this,arguments)};(function(e){jk(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(vn.RectNodeModel);(function(e){jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getNodeStyle();return vn.h("svg",{x:a-u/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},vn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.radius,f=n.getNodeStyle();return vn.h("g",{},[vn.h("rect",Ig(Ig({},f),{x:a-u/2,y:r-c/2,rx:v,ry:v,width:u,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(vn.RectNode);var Ik=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Aw=function(){return Aw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Aw.apply(this,arguments)};(function(e){Ik(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(vn.RectNodeModel);(function(e){Ik(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getNodeStyle();return vn.h("svg",{x:a-u/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},vn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.radius,f=n.getNodeStyle();return vn.h("g",{},[vn.h("rect",Aw({x:a-u/2,y:r-c/2,rx:v,ry:v,width:u,height:c},f)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(vn.RectNode);var Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Lk(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(vn.PolylineEdgeModel);(function(e){Lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(vn.PolylineEdge);var gx={width:40,height:40},bx={width:40,height:40},_x={width:40,height:40},wx={width:100,height:80},Ex={width:100,height:80},iB=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),aB=(globalThis==null?void 0:globalThis._ids)||new iB;function Ox(){return aB.next()}function Fk(e){return Object.prototype.toString.call(e)}function lB(e){return"  ".repeat(e)}function Lg(e){var t=e;return Fk(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Lg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=Lg(n)})),t}function uB(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Lg(e)).replace(/"/g,"'")}return t}var av=`	
`;function _g(e,t,n){var a=lB(n),r="";if(t==="#text")return av+a+e;if(t==="#cdata-section")return av+a+"<![CDATA["+e+"]]>";if(t==="#comment")return av+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+uB(e)+'"';if(Array.isArray(e))e.forEach(function(f){r+=_g(f,t,n+1)});else if(Fk(e)==="[object Object]"){var u=Object.keys(e),c="",v="";r+=(n===0?"":av+a)+"<"+t,u.forEach(function(f){f.charAt(0)==="-"?c+=_g(e[f],f,n+1):v+=_g(e[f],f,n+1)}),r+=c+(v!==""?">"+v+(av+a)+"</"+t+">":" />")}else r+=av+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function sB(e){var t="";for(var n in e)t+=_g(e[n],n,0);return t}var hl=function(){};hl.ObjTree=function(){return this};hl.ObjTree.VERSION="0.23";hl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;hl.ObjTree.prototype.attr_prefix="-";hl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};hl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var u=this,c=n,v=a.onComplete;a.onComplete=function(b){var _;b&&b.responseXML&&b.responseXML.documentElement&&(_=u.parseDOM(b.responseXML.documentElement)),c(_,b),v&&v(b)}}else a.asynchronous=!1;var f;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(f=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(f=g.transport)}if(n)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement)};hl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};hl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var u=e.attributes[r].nodeName;if(typeof u=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(u=this.attr_prefix+u,typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var f=e.childNodes[r].nodeType;f==3||f==4||f==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var u=e.childNodes[r].nodeName;if(typeof u=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}}else n===null&&(n={});return n}};hl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};hl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};hl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var u=t[r];r.charAt(0)!=this.attr_prefix?typeof u>"u"||u==null?n[n.length]="<"+r+" />":typeof u=="object"&&u.constructor==Array?n[n.length]=this.array_to_xml(r,u):typeof u=="object"?n[n.length]=this.hash_to_xml(r,u):n[n.length]=this.scalar_to_xml(r,u):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(u)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};hl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};hl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};hl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var cB=function(e){return new hl.ObjTree().parseXML(e)},fB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Tw=function(){return Tw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tw.apply(this,arguments)},Ab=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},hc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(hc||(hc={}));var $k=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Sx=["properties","startPoint","endPoint","pointsList"];function xx(e){var t=e?Sx.concat(e):Sx;return function(n){function a(r){var u={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var v=Ab(c,2),f=v[0],g=v[1];typeof g!="object"?f.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(f)?u[f]=g:u["-"+f]=g:t.includes(f)?u["-"+f]=a(g):u[f]=a(g)}),u)}return a(n)}}function Fg(e){var t={};return Object.entries(e).forEach(function(n){var a=Ab(n,2),r=a[0],u=a[1];r.indexOf("-")===0?t[r.substring(1)]=Lg(u):typeof u=="string"?t[r]=u:Object.prototype.toString.call(u)==="[object Object]"?t[r]=Fg(u):Array.isArray(u)?t[r]=u.map(function(c){return Fg(c)}):t[r]=u}),t}function dB(e,t,n){var a=new Map;t.nodes.forEach(function(u){var c,v={"-id":u.id};if(!((c=u.text)===null||c===void 0)&&c.value&&(v["-name"]=u.text.value),u.properties){var f=xx(n)(u.properties);Object.assign(v,f)}a.set(u.id,v),e[u.type]?Array.isArray(e[u.type])?e[u.type].push(v):e[u.type]=[e[u.type],v]:e[u.type]=v});var r=t.edges.map(function(u){var c,v,f=a.get(u.targetNodeId);f["bpmn:incoming"]?Array.isArray(f["bpmn:incoming"])?f["bpmn:incoming"].push(u.id):f["bpmn:incoming"]=[f["bpmn:incoming"],u.id]:f["bpmn:incoming"]=u.id;var g={"-id":u.id,"-sourceRef":u.sourceNodeId,"-targetRef":u.targetNodeId};if(!((c=u.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=u.text)===null||v===void 0?void 0:v.value),u.properties){var b=xx(n)(u.properties);Object.assign(g,b)}return g});t.edges.forEach(function(u){var c=a.get(u.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(u.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],u.id]:c["bpmn:outgoing"]=u.id}),e[hc.FLOW]=r}function pB(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,u=n.pointsList.map(function(v){var f=v.x,g=v.y;return{"-x":f,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":u};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,u=100,c=80,v=n.x,f=n.y,g=Zd.shapeConfigMap.get(n.type);g&&(u=g.width,c=g.height),v-=u/2,f-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":f,"-width":u,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function hB(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(u){if(u.indexOf("bpmn:")===0){var c=r[u];if(u===hc.FLOW){var v=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=mB(c,v)}else{var f=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(vB(c,f,u))}}})}return{nodes:t,edges:n}}function vB(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var f=Ax(v,n,c);a.push(f)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var u=Ax(r,n,e);a.push(u)}return a}function Ax(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),u=n["-name"],c=Zd.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(_){var x=Ab(_,2),A=x[0],M=x[1];$k.indexOf(A)===-1&&(v||(v={}),v[A]=M)}),v&&(v=Fg(v));var f;if(u&&(f={x:a,y:r,value:u},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];f.x=Number(g["-x"])+Number(g["-width"])/2,f.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:a,y:r,properties:v};return f&&(b.text=f),b}function mB(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var u;Array.isArray(t)?u=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):u=t,n.push(Tx(u,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Tx(a,e))}return n}function Tx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],u=0;a.split(`
`).forEach(function(f){u<f.length&&(u=f.length)}),n={value:a,x:Number(r["-x"])+u*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(f){var g=Ab(f,2),b=g[0],_=g[1];$k.indexOf(b)===-1&&(c||(c={}),c[b]=_)}),c&&(c=Fg(c));var v={id:t["-id"],type:hc.FLOW,pointsList:e["di:waypoint"].map(function(f){return{x:Number(f["-x"]),y:Number(f["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Zd=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,u){var c=Tw({},n.processAttributes);dB(c,r,u);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};pB(v,r);var f=n.definitionAttributes;f["bpmn:process"]=c,f["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":f};return g},this.adapterIn=function(r){if(r)return hB(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,u){return n.adapterOut(r,u)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Ox()},this.definitionAttributes={"-id":"Definitions_"+Ox(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Zd.shapeConfigMap.set(hc.START,{width:gx.width,height:gx.height});Zd.shapeConfigMap.set(hc.END,{width:bx.width,height:bx.height});Zd.shapeConfigMap.set(hc.GATEWAY,{width:_x.width,height:_x.height});Zd.shapeConfigMap.set(hc.SYSTEM,{width:wx.width,height:wx.height});Zd.shapeConfigMap.set(hc.USER,{width:Ex.width,height:Ex.height});(function(e){fB(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(u){var c=cB(u);return a.adapterIn(c)},a.adapterXmlOut=function(u,c){var v=a.adapterOut(u,c);return sB(v)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(Zd);var yB=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),gB=(globalThis==null?void 0:globalThis._ids)||new yB;function bB(){return gB.next()}vn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),vn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});vn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});vn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var kE,Ci,Uk,Yp,Mx,Bk,Vk,Wk,PE,Mw,kw,Pw={},Gk=[],_B=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Tb=Array.isArray;function Pf(e,t){for(var n in t)e[n]=t[n];return e}function NE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Rm(e,t,n){var a,r,u,c={};for(u in t)u=="key"?a=t[u]:u=="ref"?r=t[u]:c[u]=t[u];if(arguments.length>2&&(c.children=arguments.length>3?kE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(u in e.defaultProps)c[u]===void 0&&(c[u]=e.defaultProps[u]);return wg(e,c,a,r,null)}function wg(e,t,n,a,r){var u={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Uk,__i:-1,__u:0};return r==null&&Ci.vnode!=null&&Ci.vnode(u),u}function RE(e){return e.children}function wv(e,t){this.props=e,this.context=t}function Rv(e,t){if(t==null)return e.__?Rv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Rv(e):null}function zk(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return zk(e)}}function kx(e){(!e.__d&&(e.__d=!0)&&Yp.push(e)&&!$g.__r++||Mx!=Ci.debounceRendering)&&((Mx=Ci.debounceRendering)||Bk)($g)}function $g(){for(var e,t,n,a,r,u,c,v=1;Yp.length;)Yp.length>v&&Yp.sort(Vk),e=Yp.shift(),v=Yp.length,e.__d&&(n=void 0,r=(a=(t=e).__v).__e,u=[],c=[],t.__P&&((n=Pf({},a)).__v=a.__v+1,Ci.vnode&&Ci.vnode(n),qk(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[r]:null,u,r??Rv(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,OB(u,n,c),n.__e!=r&&zk(n)));$g.__r=0}function Hk(e,t,n,a,r,u,c,v,f,g,b){var _,x,A,M,S,E,D=a&&a.__k||Gk,I=t.length;for(f=wB(n,t,D,f,I),_=0;_<I;_++)(A=n.__k[_])!=null&&(x=A.__i==-1?Pw:D[A.__i]||Pw,A.__i=_,E=qk(e,A,x,r,u,c,v,f,g,b),M=A.__e,A.ref&&x.ref!=A.ref&&(x.ref&&CE(x.ref,null,A),b.push(A.ref,A.__c||M,A)),S==null&&M!=null&&(S=M),4&A.__u||x.__k===A.__k?f=Xk(A,f,e):typeof A.type=="function"&&E!==void 0?f=E:M&&(f=M.nextSibling),A.__u&=-7);return n.__e=S,f}function wB(e,t,n,a,r){var u,c,v,f,g,b=n.length,_=b,x=0;for(e.__k=new Array(r),u=0;u<r;u++)(c=t[u])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=u+x,(c=e.__k[u]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?wg(null,c,null,null,null):Tb(c)?wg(RE,{children:c},null,null,null):c.constructor==null&&c.__b>0?wg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=EB(c,n,f,_))!=-1&&(_--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>b?x--:r<b&&x++),typeof c.type!="function"&&(c.__u|=4)):g!=f&&(g==f-1?x--:g==f+1?x++:(g>f?x--:x++,c.__u|=4))):e.__k[u]=null;if(_)for(u=0;u<b;u++)(v=n[u])!=null&&(2&v.__u)==0&&(v.__e==a&&(a=Rv(v)),Kk(v,v));return a}function Xk(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=Xk(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Rv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function EB(e,t,n,a){var r,u,c=e.key,v=e.type,f=t[n];if(f===null&&e.key==null||f&&c==f.key&&v==f.type&&(2&f.__u)==0)return n;if(a>(f!=null&&(2&f.__u)==0?1:0))for(r=n-1,u=n+1;r>=0||u<t.length;){if(r>=0){if((f=t[r])&&(2&f.__u)==0&&c==f.key&&v==f.type)return r;r--}if(u<t.length){if((f=t[u])&&(2&f.__u)==0&&c==f.key&&v==f.type)return u;u++}}return-1}function Px(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||_B.test(t)?n:n+"px"}function cg(e,t,n,a,r){var u,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Px(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||Px(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")u=t!=(t=t.replace(Wk,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+u]=n,n?a?n.u=a.u:(n.u=PE,e.addEventListener(t,u?kw:Mw,u)):e.removeEventListener(t,u?kw:Mw,u);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Nx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=PE++;else if(t.t<n.u)return;return n(Ci.event?Ci.event(t):t)}}}function qk(e,t,n,a,r,u,c,v,f,g){var b,_,x,A,M,S,E,D,I,B,$,j,U,K,Q,H,W,z=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),u=[v=t.__e=n.__e]),(b=Ci.__b)&&b(t);e:if(typeof z=="function")try{if(D=t.props,I="prototype"in z&&z.prototype.render,B=(b=z.contextType)&&a[b.__c],$=b?B?B.props.value:b.__:a,n.__c?E=(_=t.__c=n.__c).__=_.__E:(I?t.__c=_=new z(D,$):(t.__c=_=new wv(D,$),_.constructor=z,_.render=xB),B&&B.sub(_),_.props=D,_.state||(_.state={}),_.context=$,_.__n=a,x=_.__d=!0,_.__h=[],_._sb=[]),I&&_.__s==null&&(_.__s=_.state),I&&z.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=Pf({},_.__s)),Pf(_.__s,z.getDerivedStateFromProps(D,_.__s))),A=_.props,M=_.state,_.__v=t,x)I&&z.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),I&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(I&&z.getDerivedStateFromProps==null&&D!==A&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(D,$),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(D,_.__s,$)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(_.props=D,_.state=_.__s,_.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Y){Y&&(Y.__=t)}),j=0;j<_._sb.length;j++)_.__h.push(_._sb[j]);_._sb=[],_.__h.length&&c.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(D,_.__s,$),I&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(A,M,S)})}if(_.context=$,_.props=D,_.__P=e,_.__e=!1,U=Ci.__r,K=0,I){for(_.state=_.__s,_.__d=!1,U&&U(t),b=_.render(_.props,_.state,_.context),Q=0;Q<_._sb.length;Q++)_.__h.push(_._sb[Q]);_._sb=[]}else do _.__d=!1,U&&U(t),b=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++K<25);_.state=_.__s,_.getChildContext!=null&&(a=Pf(Pf({},a),_.getChildContext())),I&&!x&&_.getSnapshotBeforeUpdate!=null&&(S=_.getSnapshotBeforeUpdate(A,M)),H=b,b!=null&&b.type===RE&&b.key==null&&(H=Yk(b.props.children)),v=Hk(e,Tb(H)?H:[H],t,n,a,r,u,c,v,f,g),_.base=t.__e,t.__u&=-161,_.__h.length&&c.push(_),E&&(_.__E=_.__=null)}catch(Y){if(t.__v=null,f||u!=null)if(Y.then){for(t.__u|=f?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;u[u.indexOf(v)]=null,t.__e=v}else for(W=u.length;W--;)NE(u[W]);else t.__e=n.__e,t.__k=n.__k;Ci.__e(Y,t,n)}else u==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=SB(n.__e,t,n,a,r,u,c,f,g);return(b=Ci.diffed)&&b(t),128&t.__u?void 0:v}function OB(e,t,n){for(var a=0;a<n.length;a++)CE(n[a],n[++a],n[++a]);Ci.__c&&Ci.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(u){u.call(r)})}catch(u){Ci.__e(u,r.__v)}})}function Yk(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Tb(e)?e.map(Yk):Pf({},e)}function SB(e,t,n,a,r,u,c,v,f){var g,b,_,x,A,M,S,E=n.props,D=t.props,I=t.type;if(I=="svg"?r="http://www.w3.org/2000/svg":I=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),u!=null){for(g=0;g<u.length;g++)if((A=u[g])&&"setAttribute"in A==!!I&&(I?A.localName==I:A.nodeType==3)){e=A,u[g]=null;break}}if(e==null){if(I==null)return document.createTextNode(D);e=document.createElementNS(r,I,D.is&&D),v&&(Ci.__m&&Ci.__m(t,u),v=!1),u=null}if(I==null)E===D||v&&e.data==D||(e.data=D);else{if(u=u&&kE.call(e.childNodes),E=n.props||Pw,!v&&u!=null)for(E={},g=0;g<e.attributes.length;g++)E[(A=e.attributes[g]).name]=A.value;for(g in E)if(A=E[g],g!="children"){if(g=="dangerouslySetInnerHTML")_=A;else if(!(g in D)){if(g=="value"&&"defaultValue"in D||g=="checked"&&"defaultChecked"in D)continue;cg(e,g,null,A,r)}}for(g in D)A=D[g],g=="children"?x=A:g=="dangerouslySetInnerHTML"?b=A:g=="value"?M=A:g=="checked"?S=A:v&&typeof A!="function"||E[g]===A||cg(e,g,A,E[g],r);if(b)v||_&&(b.__html==_.__html||b.__html==e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(_&&(e.innerHTML=""),Hk(t.type=="template"?e.content:e,Tb(x)?x:[x],t,n,a,I=="foreignObject"?"http://www.w3.org/1999/xhtml":r,u,c,u?u[0]:n.__k&&Rv(n,0),v,f),u!=null)for(g=u.length;g--;)NE(u[g]);v||(g="value",I=="progress"&&M==null?e.removeAttribute("value"):M!=null&&(M!==e[g]||I=="progress"&&!M||I=="option"&&M!=E[g])&&cg(e,g,M,E[g],r),g="checked",S!=null&&S!=e[g]&&cg(e,g,S,E[g],r))}return e}function CE(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ci.__e(r,n)}}function Kk(e,t,n){var a,r;if(Ci.unmount&&Ci.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||CE(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(u){Ci.__e(u,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&Kk(a[r],t,n||typeof e.type!="function");n||NE(e.__e),e.__c=e.__=e.__e=void 0}function xB(e,t,n){return this.constructor(e,n)}kE=Gk.slice,Ci={__e:function(e,t,n,a){for(var r,u,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((u=r.constructor)&&u.getDerivedStateFromError!=null&&(r.setState(u.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},Uk=0,wv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pf({},this.state),typeof e=="function"&&(e=e(Pf({},n),this.props)),e&&Pf(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),kx(this))},wv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),kx(this))},wv.prototype.render=RE,Yp=[],Bk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vk=function(e,t){return e.__v.__b-t.__v.__b},$g.__r=0,Wk=/(PointerCapture)$|Capture$/i,PE=0,Mw=Nx(!1),kw=Nx(!0);var Cm=function(){return Cm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cm.apply(this,arguments)};function DE(e){var t=e.x,n=e.y,a=e.width,r=e.height,u=e.radius,c=e.className,v=t-a/2,f=n-r/2,g=Cm(Cm({width:10,height:10,cx:0,cy:0,rx:u||0,ry:u||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:f});return vn.h("rect",Cm({},g))}DE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var yv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(yv||(yv={}));var AB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Kp=function(){return Kp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Kp.apply(this,arguments)},TB=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},MB=vn.LogicFlowUtil.StepDrag,kB=function(e){AB(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.x,g=v.y;a.nodeModel.x=f+u/2,a.nodeModel.y=g+c/2,a.nodeModel.moveText(u/2,c/2)},a.getResize=function(r){var u=r.index,c=r.deltaX,v=r.deltaY,f=r.width,g=r.height,b=r.PCTResizeInfo,_=r.pct,x=_===void 0?1:_,A=r.freezeWidth,M=A===void 0?!1:A,S=r.freezeHeight,E=S===void 0?!1:S,D={width:f,height:g,deltaX:c,deltaY:v};if(b){var I=4,B=0,$=0;switch(u){case 0:$=(c*-1-v)/I;break;case 1:$=(c-v)/I;break;case 2:$=(c+v)/I;break;case 3:$=(c*-1+v)/I;break}$!==0&&(B=Math.round($/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+B,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+B,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var j=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),U=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(u){case 0:c=f-j,v=g-U;break;case 1:c=j-f,v=g-U;break;case 2:c=j-f,v=U-g;break;case 3:c=f-j,v=U-g;break}return D.width=j,D.height=U,D.deltaX=c/x,D.deltaY=v/x,D}switch(u){case 0:D.width=M?f:f-c*x,D.height=E?g:g-v*x;break;case 1:D.width=M?f:f+c*x,D.height=E?g:g-v*x;break;case 2:D.width=M?f:f+c*x,D.height=E?g:g+v*x;break;case 3:D.width=M?f:f-c*x,D.height=E?g:g+v*x;break}return D},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,u=r.id,c=r.anchors,v=a.getNodeEdges(u);v.sourceEdges.forEach(function(f){var g=c.find(function(b){return b.id===f.sourceAnchorId});f.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(f){var g=c.find(function(b){return b.id===f.targetAnchorId});f.updateEndPoint({x:g.x,y:g.y})})},a.updateRect=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.id,g=v.x,b=v.y,_=v.width,x=v.height,A=v.radius,M=v.PCTResizeInfo,S=a.nodeModel,E=S.minWidth,D=S.minHeight,I=S.maxWidth,B=S.maxHeight,$=a.index,j=E===I,U=D===B,K=a.getResize({index:$,deltaX:u,deltaY:c,width:_,height:x,PCTResizeInfo:M,pct:1,freezeWidth:j,freezeHeight:U});if(K.width<E||K.width>I||K.height<D||K.height>B){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:j?0:K.deltaX,deltaY:U?0:K.deltaY}),a.nodeModel.width=K.width,a.nodeModel.height=K.height,a.nodeModel.setProperties({nodeSize:{width:K.width,height:K.height}}),a.getNodeEdges(f);var Q={x:g,y:b,width:_,height:x,radius:A},H={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:A};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Q,afterNode:H})},a.updateEllipse=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.id,g=v.rx,b=v.ry,_=v.x,x=v.y,A=v.PCTResizeInfo,M=a.index,S=a.nodeModel,E=S.minWidth,D=S.minHeight,I=S.maxWidth,B=S.maxHeight,$=E===I,j=D===B,U=g,K=b,Q=a.getResize({index:M,deltaX:u,deltaY:c,width:U,height:K,PCTResizeInfo:A,pct:1/2,freezeWidth:$,freezeHeight:j});if(Q.width<E/2||Q.width>I/2||Q.height<D/2||Q.height>B/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:$?0:Q.deltaX,deltaY:j?0:Q.deltaY}),a.nodeModel.rx=Q.width,a.nodeModel.ry=Q.height,a.nodeModel.setProperties({nodeSize:{rx:Q.width,ry:Q.height}}),a.getNodeEdges(f);var H={x:_,y:x},W={rx:Q.width,ry:Q.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Kp(Kp({},H),{rx:g,ry:b}),afterNode:W})},a.updateDiamond=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel;v.id;var f=v.rx,g=v.ry,b=v.x,_=v.y,x=v.PCTResizeInfo,A=a.index,M=a.nodeModel,S=M.minWidth,E=M.minHeight,D=M.maxWidth,I=M.maxHeight,B=S===D,$=E===I,j=f,U=g,K=a.getResize({index:A,deltaX:u,deltaY:c,width:j,height:U,PCTResizeInfo:x,pct:1/2,freezeWidth:B,freezeHeight:$});if(K.width<S/2||K.width>D/2||K.height<E/2||K.height>I/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:B?0:K.deltaX,deltaY:$?0:K.deltaY}),a.nodeModel.rx=K.width,a.nodeModel.ry=K.height,a.nodeModel.setProperties({nodeSize:{rx:K.width,ry:K.height}});var Q={x:b,y:_,rx:f,ry:g},H={rx:K.width,ry:K.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Q,afterNode:H})},a.eventEmit=function(r){var u=r.beforeNode,c=r.afterNode,v=a.nodeModel,f=v.id,g=v.modelType,b=v.type,_=Kp({id:f,modelType:g,type:b},u),x=Kp({id:f,modelType:g,type:b},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:_,newNodeSize:x})},a.onDragging=function(r){var u,c=r.deltaX,v=r.deltaY,f=a.graphModel.transformModel,g=a.nodeModel.modelType;u=TB(f.fixDeltaXY(c,v),2),c=u[0],v=u[1],g===yv.RECT_NODE||g===yv.HTML_NODE?a.updateRect({deltaX:c,deltaY:v}):g===yv.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:v}):g===yv.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:v})},a.onDragEnd=function(){var r=a.graphModel.gridSize,u=r===void 0?1:r,c=u*Math.round(a.nodeModel.x/u),v=u*Math.round(a.nodeModel.y/u);a.nodeModel.moveTo(c,v),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new MB({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,u=[],c=[],v=0;v<r.length;v++){var f=r[v];f.sourceNodeId===n?u.push(f):r[v].targetNodeId===n&&c.push(f)}return{sourceEdges:u,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,u=n.index,c=n.model,v=c.getControlPointStyle();return Rm("g",{className:"lf-resize-control-"+u},Rm(DE,Kp({className:"lf-node-control"},{x:a,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(wv),PB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ug=function(){return Ug=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ug.apply(this,arguments)},Mb=function(e){PB(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,u=a.x,c=a.y,v=a.width,f=a.height,g={minX:u-v/2,minY:c-f/2,maxX:u+v/2,maxY:c+f/2},b=g.minX,_=g.minY,x=g.maxX,A=g.maxY,M=[{x:b,y:_},{x,y:_},{x,y:A},{x:b,y:A}];return M.map(function(S,E){return Rm(kB,Ug({index:E},S,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getResizeOutlineStyle();return Rm(DE,Ug({fill:"none"},v,{x:a,y:r,width:u,height:c}))},t.prototype.render=function(){return Rm("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(wv),Zk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),NB=function(e){Zk(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.width=u.width,r.height=u.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},u={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t}(vn.RectNodeModel),RB=function(e){Zk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Mb,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(vn.RectNode),Jk={view:RB,model:NB},Qk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Qk(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.rx=u.rx,r.ry=u.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},u={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t})(vn.EllipseNodeModel);(function(e){Qk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Mb,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(vn.EllipseNode);var Nw=function(){return Nw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nw.apply(this,arguments)};function CB(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,u=e.strokeOpacity,c=u===void 0?1:u,v=e.fill,f=v===void 0?"transparent":v,g=e.stroke,b=g===void 0?"#000":g,_=e.points,x=e.className,A=x===void 0?"lf-basic-shape":x,M={fill:f,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:A};return M.points=_.map(function(S){return S.join(",")}).join(" "),vn.h("polygon",Nw({},M))}var eP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rw=function(){return Rw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rw.apply(this,arguments)};(function(e){eP(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.rx=u.rx,r.ry=u.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},u={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t})(vn.DiamondNodeModel);(function(e){eP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Mb,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return vn.h("g",null,vn.h(CB,Rw({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(vn.DiamondNode);var tP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),DB=function(e){tP(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.width=u.width,r.height=u.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},u={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t}(vn.HtmlNodeModel),jB=function(e){tP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Mb,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(vn.HtmlNode),nP={view:jB,model:DB},rP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Bg=function(){return Bg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Bg.apply(this,arguments)},IB=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},LB=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(IB(arguments[t]));return e},Rx=500,Cx=300,FB=-1e4;(function(e){rP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Rx,n.unfoldedHight=Cx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Rx,this.height=Cx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=FB,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(u){var c=a.graphModel.getElement(u),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var f=a.childrenLastFoldStatus[u];f!==void 0&&f!==c.isFolded&&c.foldGroup(f)}a.childrenLastFoldStatus[u]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(u,c){var v=u.id,f=u.sourceNodeId,g=u.targetNodeId,b=u.startPoint,_=u.endPoint,x=u.type,A=u.text,M=u.getProperties(),S={id:v+"__"+c,sourceNodeId:f,targetNodeId:g,startPoint:b,endPoint:_,type:x,properties:M,text:A==null?void 0:A.value};u.virtual&&r.graphModel.deleteEdgeById(u.id);var E=r.graphModel.group.getNodeGroup(g);E||(E=r.graphModel.getNodeModelById(g));var D=r.graphModel.group.getNodeGroup(f);D||(D=r.graphModel.getNodeModelById(f)),n&&u.visible!==!1&&(r.children.has(f)||r.id===f?(S.startPoint=void 0,S.sourceNodeId=r.id):(S.endPoint=void 0,S.targetNodeId=r.id),(E.id!==r.id||D.id!==r.id)&&r.createVirtualEdge(S),u.visible=!1),!n&&u.visible===!1&&(E&&E.isGroup&&E.isFolded?(S.targetNodeId=E.id,S.endPoint=void 0,r.createVirtualEdge(S)):D&&D.isGroup&&D.isFolded?(S.sourceNodeId=D.id,S.startPoint=void 0,r.createVirtualEdge(S)):u.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,u=n.x2,c=n.y2;return a>=this.x-this.width/2&&u<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,u=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&u<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(u){var c=n.graphModel.getNodeModelById(u);c&&!c.virtual&&a.children.push(u)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=LB(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(Jk.model);(function(e){rP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,u=n.x,c=n.y,v=n.radius,f=n.properties;if(!f.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),_=a+g+8,x=r+g+8;return vn.h("rect",Bg(Bg({},b),{width:_,height:x,x:u-_/2,y:c-x/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var u=vn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return vn.h("g",{},[vn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),u])},t.prototype.getResizeShape=function(){return vn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(Jk.view);var Dx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dm=function(){return Dm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dm.apply(this,arguments)};function $B(e){var t=function(a){Dx(r,a);function r(u,c){var v=this;u.id||(u.id="Flow_"+bB());var f=Dm(Dm(Dm({},{}),u.properties),{isDefaultFlow:!1});return u.properties=f,v=a.call(this,u,c)||this,v}return r.extendKey="SequenceFlowModel",r}(vn.PolylineEdgeModel),n=function(a){Dx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var u=this.props.model,c=u.properties.isDefaultFlow;return c?vn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):vn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(vn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}$B();var jx={width:40,height:40},Ix={width:40,height:40},Lx={width:100,height:80},Vg={width:100,height:80},Fx={width:100,height:80},$x={width:100,height:80},Ux={width:100,height:80},Bx={width:100,height:80},Vx={width:100,height:80},Wx={width:100,height:80},vl=function(){};vl.ObjTree=function(){return this};vl.ObjTree.VERSION="0.23";vl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;vl.ObjTree.prototype.attr_prefix="-";vl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};vl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var u=this,c=n,v=a.onComplete;a.onComplete=function(b){var _;b&&b.responseXML&&b.responseXML.documentElement&&(_=u.parseDOM(b.responseXML.documentElement)),c(_,b),v&&v(b)}}else a.asynchronous=!1;var f;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(f=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(f=g.transport)}if(n)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement)};vl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};vl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var u=e.attributes[r].nodeName;if(typeof u=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(u=this.attr_prefix+u,typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var f=e.childNodes[r].nodeType;f===3||f===4||f===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var u=e.childNodes[r].nodeName;if(typeof u=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}}else n===null&&(n={});return n}};vl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};vl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};vl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var u=t[r];r.charAt(0)!==this.attr_prefix?typeof u>"u"||u==null?n[n.length]="<"+r+" />":typeof u=="object"&&u.constructor===Array?n[n.length]=this.array_to_xml(r,u):typeof u=="object"?n[n.length]=this.hash_to_xml(r,u):n[n.length]=this.scalar_to_xml(r,u):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(u)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};vl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};vl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};vl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var UB=function(e){return new vl.ObjTree().parseXML(e)};function oP(e){return Object.prototype.toString.call(e)}function Gx(e){return"  ".repeat(e)}function Wg(e){return oP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Wg(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Wg(t)}):e}function BB(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Wg(e)).replace(/"/g,"'")}return t}var zx=`	
`;function Eg(e,t,n){var a=Gx(n),r="",u=zx+a;if(t==="-json")return"";if(t==="#text")return u+e;if(t==="#cdata-section")return u+"<![CDATA["+e+"]]>";if(t==="#comment")return u+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+BB(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return Eg(g,t,n+1)}).join("");else if(oP(e)==="[object Object]"){var c=Object.keys(e),v="",f=e["-json"]?zx+Gx(n+1)+e["-json"]:"";r+=(n===0?"":u)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=Eg(e[g],g,n+1):f+=Eg(e[g],g,n+1)}),r+=v+(f!==""?">"+f+u+"</"+t+">":" />")}else r+=u+"<"+t+">"+e.toString()+"</"+t+">";return r}function VB(e){var t="";for(var n in e)t+=Eg(e[n],n,0);return t}var WB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cw=function(){return Cw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cw.apply(this,arguments)},Hx=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},jE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xv=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},Ev=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Xv(arguments[t]));return e},dl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(dl||(dl={}));var iP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],GB=["properties","startPoint","endPoint","pointsList"],Gg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},aP=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],u=r.in,c=r.out;u&&(e[a].in=u),c&&(e[a].out=c)}else e[a]=t[a]}),e},Nu={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Nu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Nu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Nu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Nu[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,u=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+u()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,u,c=e,v=t["-id"],f="",g="";try{for(var b=jE(Object.keys(t)),_=b.next();!_.done;_=b.next()){var x=_.value;x.includes("bpmn:")&&(r=Xv(x.split(":"),2),f=r[1],g=(u=t[x])===null||u===void 0?void 0:u["#text"])}}catch(A){n={error:A}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":f,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function zB(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,u=new Set(Ev(GB,n||[])),c={in:new Set(Ev(Gg.in,(a==null?void 0:a.in)||[])),out:new Set(Ev(Gg.out,(a==null?void 0:a.out)||[]))};return Nu=aP(Nu,r),function(v){var f=v.nodes,g=v.edges;function b(_,x){var A,M,S;if((_==null?void 0:_.flag)!==1){var E;if((E=Nu[_.type])&&E.out){var D=E.out(_),I=Object.keys(D);I.length>0&&I.forEach(function(W){_[W]=D[W]})}_!=null&&_.children&&(_.children=_.children.map(function(W){var z=f.find(function(Y){return Y.id===W})||g.find(function(Y){return Y.id===W});return z||{}}));var B={};if(typeof _=="string")return _;if(Array.isArray(_))return _.map(function(W){return b(W,"")}).filter(function(W){return W!=null});try{for(var $=jE(Object.entries(_)),j=$.next();!j.done;j=$.next()){var U=Xv(j.value,2),K=U[0],Q=U[1];if(((S=Q)===null||S===void 0?void 0:S.flag)===1)return;var H=[x,K].filter(function(W){return W}).join(".");c.out.has(H)||(typeof Q!="object"?K.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(K)?B[K]=Q:B["-"+K]=Q:u.has(H)?B["-"+K]=b(Q,H):B[K]=b(Q,H))}}catch(W){A={error:W}}finally{try{j&&!j.done&&(M=$.return)&&M.call($)}finally{if(A)throw A.error}}return B}}return b(v,"")}}function zg(e){var t,n,a={};try{for(var r=jE(Object.entries(e)),u=r.next();!u.done;u=r.next()){var c=Xv(u.value,2),v=c[0],f=c[1];v.indexOf("-")===0?a[v.substring(1)]=Wg(f):typeof f=="string"?a[v]=f:Object.prototype.toString.call(f)==="[object Object]"?a[v]=zg(f):Array.isArray(f)?a[v]=f.map(function(g){return zg(g)}):a[v]=f}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function HB(e,t,n){var a,r=new Map,u=zB(n)(t);u.nodes.forEach(function(v){var f=v["-id"],g=v["-type"],b=v.text,_=v.children,x=Hx(v,["-id","-type","text","children"]),A={"-id":f};b!=null&&b["-value"]&&(A["-name"]=b["-value"]),x["-json"]&&(A["-json"]=x["-json"]),x["-properties"]&&Object.assign(A,x["-properties"]),_&&(A.children=_),e[g]||(e[g]=[]),e[g].push(A),r.set(f,A)});var c=u.edges.map(function(v){var f=v["-id"];v["-type"];var g=v["-sourceNodeId"],b=v["-targetNodeId"],_=v.text,x=Hx(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),A=r.get(b);A["bpmn:incoming"]||(A["bpmn:incoming"]=[]),A["bpmn:incoming"].push(f);var M={"-id":f,"-sourceRef":g,"-targetRef":b};return _!=null&&_["-value"]&&(M["-name"]=_["-value"]),x["-json"]&&(M["-json"]=x["-json"]),x["-properties"]&&Object.assign(M,x["-properties"]),M});return t.edges.forEach(function(v){var f=v.sourceNodeId,g=v.id,b=r.get(f);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(v){var f={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(S){var E,D=r.get(S["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(B){D[B]&&D[B].forEach(function($){f[B].add($)})});var I=(E=e[S["-type"]])===null||E===void 0?void 0:E.findIndex(function(B){return B["-id"]===S["-id"]});I>=0&&e[S["-type"]].splice(I,1),r.delete(S["-id"]),v[S["-type"]]||(v[S["-type"]]=[]),v[S["-type"]].push(D)});var b=f["bpmn:incoming"],_=f["bpmn:outgoing"];_.forEach(function(S){b.has(S)&&g.push(S)});for(var x=function(S){var E=c.findIndex(function(D){return D["-id"]===g[S]});E>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[E]),c.splice(E,1)):S++,A=S},A,M=0;M<g.length;)x(M),M=A;delete v.children}),e[dl.FLOW]=c,e}function XB(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,u=n.pointsList.map(function(v){var f=v.x,g=v.y;return{"-x":f,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":u};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,u=100,c=80,v=n.x,f=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(u=g.width,c=g.height),v-=u/2,f-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":f,"-width":u,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var qB=["bpmn:incoming","bpmn:outgoing"];function YB(e,t){var n=[],a=[],r=new Map,u=t??{},c=u.transformer,v=u.excludeFields,f={in:new Set(Ev(Gg.in,(v==null?void 0:v.in)||[])),out:new Set(Ev(Gg.out,(v==null?void 0:v.out)||[]))};Nu=aP(Nu,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(x,A){A.forEach(function(M){try{Object.keys(x).forEach(function(S){try{M(S)}catch(E){console.error(E)}})}catch(S){console.error(S)}})})(b,[function(x){function A(S){S["-children"]||(S["-children"]=[]),Object.keys(S).forEach(function(E){var D;E.indexOf("bpmn:")===0&&!qB.includes(E)&&(b[E]||(b[E]=[]),!Array.isArray(b[E])&&(b[E]=[b[E]]),Array.isArray(S[E])?(D=b[E]).push.apply(D,Ev(S[E])):b[E].push(S[E]),Array.isArray(S[E])?S[E].forEach(function(I){!E.includes("Flow")&&S["-children"].push(I["-id"])}):!E.includes("Flow")&&S["-children"].push(S[E]["-id"]),delete S[E])})}if(x==="bpmn:subProcess"){var M=b[x];Array.isArray(M)?M.forEach(function(S){x==="bpmn:subProcess"&&A(S)}):A(M)}},function(x){var A=function(S){Object.keys(S).forEach(function(E){var D,I;if(E.includes("bpmn:")){var B={};Nu[E]&&Nu[E].in?(B=(I=(D=Nu[E]).in)===null||I===void 0?void 0:I.call(D,E,ce.cloneDeep(S[E])),delete S[E]):M(S[E]);var $=void 0;($=Reflect.ownKeys(B)).length>0&&$.forEach(function(j){Reflect.set(S,j,B[j])})}})};function M(S){r.set(S["-id"],S),Array.isArray(S)?S.forEach(function(E){M(E)}):typeof S=="object"&&A(S)}M(b[x])},function(x){if(x.indexOf("bpmn:")===0){var A=b[x];if(x==="bpmn:sequenceFlow"){var M=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=ZB(A,M)}else{var S=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(x==="bpmn:boundaryEvent"){var E=b[x],D=function(I){var B=I["-attachedToRef"],$=r.get(B);$["-boundaryEvents"]||($["-boundaryEvents"]=[]),$["-boundaryEvents"].push(I["-id"])};Array.isArray(E)?E.forEach(function(I){D(I)}):D(E)}n=n.concat(KB(A,S,x))}}}])}var _=function(x,A,M){Object.keys(x).forEach(function(S){var E=M?M+"."+S:S;A.has(E)?delete x[S]:typeof x[S]=="object"&&_(x[S],A,E)})};return n.forEach(function(x){var A,M;if(!((A=t==null?void 0:t.mapping)===null||A===void 0)&&A.in){var S=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,E=x.type;S[E]&&(x.type=S[E])}_(x,f.in,"")}),a.forEach(function(x){var A,M;if(!((A=t==null?void 0:t.mapping)===null||A===void 0)&&A.in){var S=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,E=x.type;S[E]&&(x.type=S[E])}_(x,f.in,"")}),{nodes:n,edges:a}}function KB(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var f=Xx(v,n,c);a.push(f)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var u=Xx(r,n,e);a.push(u)}return a}function Xx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),u=n["-children"],c=n["-name"],v=Dl.shapeConfigMap.get(t);v&&(a+=v.width/2,r+=v.height/2);var f={};Object.entries(n).forEach(function(x){var A=Xv(x,2),M=A[0],S=A[1];iP.includes(M)||(f[M]=S)}),f=zg(f);var g;if(c&&(g={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:a,y:r,properties:f};return u&&(_.children=u),g&&(_.text=g),_}function ZB(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var u;Array.isArray(t)?u=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):u=t,n.push(qx(u,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(qx(a,e))}return n}function qx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],u=0;a.split(`
`).forEach(function(g){u<g.length&&(u=g.length)}),n={value:a,x:Number(r["-x"])+u*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Xv(g,2),_=b[0],x=b[1];iP.includes(_)||(c[_]=x)}),c=zg(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),f={id:t["-id"],type:dl.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(f.text=n),f}var Dl=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,u){var c,v,f=Cw({},n.processAttributes);HB(f,r,u);var g={"-id":"BPMNPlane_1","-bpmnElement":f["-id"]};XB(g,r);var b=n.definitionAttributes;b["bpmn:process"]=f,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var _={"bpmn:definitions":b};if(!((c=u==null?void 0:u.mapping)===null||c===void 0)&&c.out){var x=(v=u==null?void 0:u.mapping)===null||v===void 0?void 0:v.out,A=function(M){Array.isArray(M)&&M.forEach(function(S){return A(S)}),typeof M=="object"&&Object.keys(M).forEach(function(S){var E;(E=x[S])?(M[E]=ce.cloneDeep(M[S]),delete M[S],A(M[E])):A(M[S])})};A(_)}return _},this.adapterIn=function(r,u){if(r)return YB(r,u)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(dl.START,{width:jx.width,height:jx.height});Dl.shapeConfigMap.set(dl.END,{width:Ix.width,height:Ix.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_CATCH,{width:Vg.width,height:Vg.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_THROW,{width:Vg.width,height:Vg.height});Dl.shapeConfigMap.set(dl.BOUNDARY,{width:Lx.width,height:Lx.height});Dl.shapeConfigMap.set(dl.PARALLEL_GATEWAY,{width:Fx.width,height:Fx.height});Dl.shapeConfigMap.set(dl.INCLUSIVE_GATEWAY,{width:$x.width,height:$x.height});Dl.shapeConfigMap.set(dl.EXCLUSIVE_GATEWAY,{width:Ux.width,height:Ux.height});Dl.shapeConfigMap.set(dl.SYSTEM,{width:Bx.width,height:Bx.height});Dl.shapeConfigMap.set(dl.USER,{width:Vx.width,height:Vx.height});Dl.shapeConfigMap.set(dl.SUBPROCESS,{width:Wx.width,height:Wx.height});(function(e){WB(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var v=UB(c);return a.adapterIn(v,a.props)},a.adapterXmlOut=function(c){var v=a.adapterOut(c,a.props);return VB(v)};var r=n.lf,u=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=u,a}return t.pluginName="BPMNAdapter",t})(Dl);var Yx;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Yx||(Yx={}));var lP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),gv=function(){return gv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gv.apply(this,arguments)},jm=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},JB={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function QB(e){for(var t=e,n=1;n<t.length-1;){var a=jm(t[n-1],2),r=a[0],u=a[1],c=jm(t[n],2),v=c[0],f=c[1],g=jm(t[n+1],2),b=g[0],_=g[1];r===v&&v===b||u===f&&f===_?t.splice(n,1):n++}return t}function eV(e,t,n,a){var r=[e[0],e[1]],u=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,u[0]+=a):t==="lb"&&(r[0]+=a,u[1]+=a),[r,u];case"tr":return t==="tl"?(r[1]+=a,u[0]-=a):t==="rb"&&(r[0]-=a,u[1]+=a),[r,u];case"bl":return t==="br"?(r[1]-=a,u[0]+=a):t==="lt"&&(r[0]+=a,u[1]-=a),[r,u];case"br":return t==="bl"?(r[1]-=a,u[0]-=a):t==="rt"&&(r[0]-=a,u[1]-=a),[r,u];default:return[]}}function tV(e,t,n,a){var r,u="",c="";e[0]===t[0]?u=e[1]>t[1]?"t":"b":e[1]===t[1]&&(u=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,f=""+u+c,g=JB[f]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var _=jm(eV(t,f,g,v),2),x=_[0],A=_[1];x&&A&&(b+="L "+x[0]+" "+x[1]+" Q "+t[0]+" "+t[1]+" "+A[0]+" "+A[1],r=jm(A,2),t[0]=r[0],t[1]=r[1])}return b}function nV(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],u=e[n],c=e[n+++1];a+=tV(r,u,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){lP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,u=n.arrowConfig,c=n.radius,v=c===void 0?5:c,f=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=QB(a.split(" ").map(function(A){return A.split(",").map(function(M){return+M})})),_=nV(b,v),x=gv(gv(gv({style:r?g:{}},f),u),{fill:"none"});return vn.h("path",gv({d:_},x))},t})(vn.PolylineEdge);(function(e){lP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(vn.PolylineEdgeModel);let kb=!1;const Hg=ch({});function uP(e,t,n,a,r,u){u||(u=(c,v)=>({nodeModel:c,graph:v})),kb&&(Hg[e]=Zj(rr({render:()=>Pv(Jj,{to:n},[Pv(t,u(a,r))]),provide:()=>({getNode:()=>a,getGraph:()=>r})})))}function sP(e){kb&&delete Hg[e]}function Xg(){return kb}function rV(){return kb=!0,rr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Hg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Hg[n])}),Pv(Or,{},t.map(n=>Pv(n)))}}})}const oV=(e,t)=>{let n=0,a=t;for(;;){if(n>0&&(a=t+n,console.log(a)),!e.some(r=>r.properties.nodeName===a.trim()))return a;n++}};class Xo extends nP.view{constructor(n,a){super(n);Ma(this,"isMounted");Ma(this,"r");Ma(this,"component");Ma(this,"app");Ma(this,"root");Ma(this,"VueNode");Ma(this,"up_node_field_dict");this.component=a,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender?delete n.model.properties.noRender:n.model.properties.nodeName=oV(n.graphModel.nodes.filter(r=>r.id!==n.model.id),n.model.properties.nodeName),n.model.properties.config=gI[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var a,r,u,c,v,f;const n=[];return this.props.model.type==="start-node"&&(n.push({value:"global",label:Ot("views.applicationWorkflow.variable.global"),type:"global",children:((r=(a=this.props.model.properties)==null?void 0:a.config)==null?void 0:r.globalFields)||[]}),n.push({value:"chat",label:Ot("views.applicationWorkflow.variable.chat"),type:"chat",children:((c=(u=this.props.model.properties)==null?void 0:u.config)==null?void 0:c.chatFields)||[]})),n.push({value:this.props.model.id,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((f=(v=this.props.model.properties)==null?void 0:v.config)==null?void 0:f.fields)||[]}),n}get_up_node_field_dict(n,a){if(!this.up_node_field_dict||!a){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(u=>u.id!="start-node").map(u=>u.get_up_node_field_dict(!0,a)).reduce((u,c)=>({...u,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,a){const r=Object.values(this.get_up_node_field_dict(n,a)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:a,y:r,type:u}=n;let c=!1;return u=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),vn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[vn.h("div",{style:{zindex:0},onClick:()=>{u=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var u;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if(Xg())uP(this.targetId(),this.component,n,a,r);else{this.r=Pv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=rM({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r}}}),this.app.use(Qj,{locale:eI}),this.app.use(tI),this.app.use(nI),this.app.use(nM);for(const[c,v]of Object.entries(rI))this.app.component(c,v);(u=this.app)==null||u.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Xg()&&sP(this.targetId()),this.unmountVueComponent()}}class qo extends nP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=nM.global;this.width=this.get_width();const n=(r,u)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const f=c[v];if(f.id===u)return!0;if(n(f.id,u))return!0}return!1},a={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,u,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,u,c,v)=>!this.graphModel.getNodeIncomingNode(u.id).find(b=>b.id==r.id)&&!n(r.id,u.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,u,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,u=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==ei.Base&&(this.type!==ei.Start&&c.push({x:n-r/2+10,y:u?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:u?a:a-15,id:`${t}_right`,type:"right"})),c}}let iV=class extends Xo{constructor(t){super(t,eB)}};const aV={type:"ai-chat-node",model:qo,view:iV},lV=Object.freeze(Object.defineProperty({__proto__:null,default:aV},Symbol.toStringTag,{value:"Module"})),uV={class:"flex align-center"},oo=rr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const a=e,r=n,u=Zn({set:_=>{r("update:modelValue",_)},get:()=>a.modelValue}),c=Zn(()=>{if(!u.value||u.value.length<1)return null;const _=u.value[0],x=v.value.find(A=>A.value===_);return x?x.type:null}),v=Ge([]),f=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0);function g(_){_&&(v.value=a.global?a.nodeModel.get_up_node_field_list(!1,!0).filter(x=>["global","chat"].includes(x.value)&&x.children&&x.children.length>0):a.nodeModel.get_up_node_field_list(!1,!0).filter(x=>x.children&&x.children.length>0))}return t({validate:()=>{const _=a.nodeModel.get_up_node_field_list(!1,!0);if(!u.value||u.value.length===0)return Promise.reject(Ot("views.applicationWorkflow.variable.ReferencingRequired"));if(u.value.length<2)return Promise.reject(Ot("views.applicationWorkflow.variable.ReferencingError"));const x=u.value[0],A=u.value[1],M=_.find(S=>S.value===x);return M?M.children.some(S=>S.value===A)?Promise.resolve(""):(u.value=[],Promise.reject(Ot("views.applicationWorkflow.variable.NoReferencing"))):(u.value=[],Promise.reject(Ot("views.applicationWorkflow.variable.NoReferencing")))}}),Hr(()=>{v.value=a.global?a.nodeModel.get_up_node_field_list(!1,!0).filter(_=>["global","chat"].includes(_.value)&&_.children&&_.children.length>0):a.nodeModel.get_up_node_field_list(!1,!0)}),(_,x)=>{const A=J("el-cascader");return Oe(),at(A,oI({onWheel:f,teleported:!1,options:v.value,onVisibleChange:g},_.$attrs,{modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=M=>u.value=M),separator:" > "}),{default:C(({node:M,data:S})=>[ee("span",{class:"flex align-center",onWheel:f},[(Oe(),at(Vm(sr(Wm)(`${S.type}-icon`)),{class:"mr-8",size:18})),ct(_e(S.label),1)],32)]),prefix:C(()=>[ee("span",uV,[(Oe(),at(Vm(sr(Wm)(`${c.value}-icon`)),{size:18}))])]),_:1},16,["options","modelValue"])}}}),sV={class:"title-decoration-1 mb-8"},cV={class:"flex align-center"},fV={class:"mr-4"},dV=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=aa(),n=Zn(()=>t.path.includes("resource-management")?"systemManage":"workspace"),a={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},r=Ge(),u=Zn({get:()=>(f.nodeModel.properties.nodeData||Ne.set(f.nodeModel.properties,"nodeData",a),f.nodeModel.properties.nodeData),set:b=>{Ne.set(f.nodeModel.properties,"nodeData",b)}});function c(b,_){const x=`${b}List`;_?(console.log("listKey",x),f.nodeModel.properties.nodeData[x]||Ne.set(f.nodeModel.properties.nodeData,x,[])):delete f.nodeModel.properties.nodeData[x]}const v=()=>{if(!f.nodeModel.properties.nodeData.applicationId){Ne.set(f.nodeModel.properties,"status",500);return}So({type:"application",systemType:n.value}).getApplicationDetail(f.nodeModel.properties.nodeData.applicationId).then(b=>{const _=Ne.cloneDeep(f.nodeModel.properties.nodeData.api_input_field_list),x=Ne.cloneDeep(f.nodeModel.properties.nodeData.user_input_field_list);if(eE(b.data.type)){const A=b.data.workFlow.nodes[0].properties.nodeData,M=Ne.cloneDeep(b.data.workFlow.nodes[0].properties.api_input_field_list),S=Ne.cloneDeep(b.data.workFlow.nodes[0].properties.user_input_field_list),E=(M||[]).map($=>{const j=_==null?void 0:_.find(U=>U.variable==$.variable);return j?{...$,value:j.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});Ne.set(f.nodeModel.properties.nodeData,"api_input_field_list",E);const D=(S||[]).map($=>{const j=x==null?void 0:x.find(U=>U.field==$.field);return j?{...$,value:j.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});Ne.set(f.nodeModel.properties.nodeData,"user_input_field_list",D),console.log("nodeData",A);const I=A.fileUploadEnable,B=A.fileUploadSetting;I?(c("document",B.document),c("image",B.image),c("audio",B.audio)):["documentList","imageList","audioList"].forEach($=>{delete f.nodeModel.properties.nodeData[$]}),Ne.set(f.nodeModel.properties,"status",b.data.id?200:500)}}).catch(b=>{console.log(b),Ne.set(f.nodeModel.properties,"status",500)})},f=e,g=()=>{var b;return(b=r.value)==null?void 0:b.validate().catch(_=>Promise.reject({node:f.nodeModel,errMessage:_}))};return Hr(()=>{v(),Ne.set(f.nodeModel,"validate",g)}),(b,_)=>{const x=J("el-form-item"),A=J("el-tooltip"),M=J("el-switch"),S=J("el-form"),E=J("el-card");return Oe(),at(Ho,{nodeModel:b.nodeModel},{default:C(()=>[ee("h5",sV,_e(b.$t("views.applicationWorkflow.nodeSetting")),1),k(E,{shadow:"never",class:"card-never"},{default:C(()=>[k(S,{onSubmit:_[6]||(_[6]=nn(()=>{},["prevent"])),model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:r},{default:C(()=>[k(x,{label:b.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[k(oo,{ref_key:"applicationNodeFormRef",ref:r,nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.questionReferenceAddress,"onUpdate:modelValue":_[0]||(_[0]=D=>u.value.questionReferenceAddress=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),u.value.hasOwnProperty("documentList")||"documentList"in u.value?(Oe(),at(x,{key:0,label:b.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:b.$t("views.chatLog.documentPlaceholder"),trigger:"blur",required:!1}},{default:C(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.chatLog.documentPlaceholder"),modelValue:u.value.documentList,"onUpdate:modelValue":_[1]||(_[1]=D=>u.value.documentList=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):kn("",!0),u.value.hasOwnProperty("imageList")||"imageList"in u.value?(Oe(),at(x,{key:1,label:b.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:b.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:C(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:u.value.imageList,"onUpdate:modelValue":_[2]||(_[2]=D=>u.value.imageList=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):kn("",!0),u.value.hasOwnProperty("audioList")||"audioList"in u.value?(Oe(),at(x,{key:2,label:b.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:b.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:C(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:u.value.audioList,"onUpdate:modelValue":_[3]||(_[3]=D=>u.value.audioList=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):kn("",!0),(Oe(!0),en(Or,null,io(u.value.api_input_field_list,(D,I)=>(Oe(),en("div",{key:"api-input-"+I},[k(x,{label:D.variable,prop:"api_input_field_list."+I+".value",rules:[{required:D.isRequired,message:`${b.$t("common.inputPlaceholder")}${D.variable}`,trigger:"blur"}]},{default:C(()=>[k(oo,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.api_input_field_list[I].value,"onUpdate:modelValue":B=>u.value.api_input_field_list[I].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Oe(!0),en(Or,null,io(u.value.user_input_field_list,(D,I)=>(Oe(),en("div",{key:"user-input-"+I},[k(x,{label:D.label,prop:"user_input_field_list."+I+".value",rules:[{required:D.required,message:`${b.$t("common.inputPlaceholder")}${D.label}`,trigger:"blur"}]},{default:C(()=>[k(oo,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.user_input_field_list[I].value,"onUpdate:modelValue":B=>u.value.user_input_field_list[I].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),k(x,{label:b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[5]||(_[5]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",cV,[ee("div",fV,[ee("span",null,_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(M,{size:"small",modelValue:u.value.isResult,"onUpdate:modelValue":_[4]||(_[4]=D=>u.value.isResult=D)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class pV extends Xo{constructor(t){super(t,dV)}}const hV={type:"application-node",model:qo,view:pV},vV=Object.freeze(Object.defineProperty({__proto__:null,default:hV},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function vc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kx(Object(n),!0).forEach(function(a){mV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kx(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Og(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Og=function(t){return typeof t}:Og=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function mV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Df(){return Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)}function yV(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,u;for(u=0;u<a.length;u++)r=a[u],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function gV(e,t){if(e==null)return{};var n=yV(e,t),a,r;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)a=u[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var bV="1.15.6";function Rf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Lf=Rf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ay=Rf(/Edge/i),Zx=Rf(/firefox/i),Im=Rf(/safari/i)&&!Rf(/chrome/i)&&!Rf(/android/i),IE=Rf(/iP(ad|od|hone)/i),cP=Rf(/chrome/i)&&Rf(/android/i),fP={capture:!1,passive:!1};function no(e,t,n){e.addEventListener(t,n,!Lf&&fP)}function Zr(e,t,n){e.removeEventListener(t,n,!Lf&&fP)}function qg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function dP(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function _s(e,t,n,a){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&qg(e,t):qg(e,t))||a&&e===n)return e;if(e===n)break}while(e=dP(e))}return null}var Jx=/\s+/g;function nu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Jx," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Jx," ")}}function wr(e,t,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in a)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),a[t]=n+(typeof n=="string"?"":"px")}}function Ov(e,t){var n="";if(typeof e=="string")n=e;else do{var a=wr(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function pP(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,u=a.length;if(n)for(;r<u;r++)n(a[r],r);return a}return[]}function dc(){var e=document.scrollingElement;return e||document.documentElement}function Ki(e,t,n,a,r){if(!(!e.getBoundingClientRect&&e!==window)){var u,c,v,f,g,b,_;if(e!==window&&e.parentNode&&e!==dc()?(u=e.getBoundingClientRect(),c=u.top,v=u.left,f=u.bottom,g=u.right,b=u.height,_=u.width):(c=0,v=0,f=window.innerHeight,g=window.innerWidth,b=window.innerHeight,_=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Lf))do if(r&&r.getBoundingClientRect&&(wr(r,"transform")!=="none"||n&&wr(r,"position")!=="static")){var x=r.getBoundingClientRect();c-=x.top+parseInt(wr(r,"border-top-width")),v-=x.left+parseInt(wr(r,"border-left-width")),f=c+u.height,g=v+u.width;break}while(r=r.parentNode);if(a&&e!==window){var A=Ov(r||e),M=A&&A.a,S=A&&A.d;A&&(c/=S,v/=M,_/=M,b/=S,f=c+b,g=v+_)}return{top:c,left:v,bottom:f,right:g,width:_,height:b}}}function Qx(e,t,n){for(var a=Wd(e,!0),r=Ki(e)[t];a;){var u=Ki(a)[n],c=void 0;if(c=r>=u,!c)return a;if(a===dc())break;a=Wd(a,!1)}return!1}function Cv(e,t,n,a){for(var r=0,u=0,c=e.children;u<c.length;){if(c[u].style.display!=="none"&&c[u]!==yr.ghost&&(a||c[u]!==yr.dragged)&&_s(c[u],n.draggable,e,!1)){if(r===t)return c[u];r++}u++}return null}function LE(e,t){for(var n=e.lastElementChild;n&&(n===yr.ghost||wr(n,"display")==="none"||t&&!qg(n,t));)n=n.previousElementSibling;return n||null}function Pu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==yr.clone&&(!t||qg(e,t))&&n++;return n}function eA(e){var t=0,n=0,a=dc();if(e)do{var r=Ov(e),u=r.a,c=r.d;t+=e.scrollLeft*u,n+=e.scrollTop*c}while(e!==a&&(e=e.parentNode));return[t,n]}function _V(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n)}return-1}function Wd(e,t){if(!e||!e.getBoundingClientRect)return dc();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=wr(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return dc();if(a||t)return n;a=!0}}while(n=n.parentNode);return dc()}function wV(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function A1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Lm;function hP(e,t){return function(){if(!Lm){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),Lm=setTimeout(function(){Lm=void 0},t)}}}function EV(){clearTimeout(Lm),Lm=void 0}function vP(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function mP(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function yP(e,t,n){var a={};return Array.from(e.children).forEach(function(r){var u,c,v,f;if(!(!_s(r,t.draggable,e,!1)||r.animated||r===n)){var g=Ki(r);a.left=Math.min((u=a.left)!==null&&u!==void 0?u:1/0,g.left),a.top=Math.min((c=a.top)!==null&&c!==void 0?c:1/0,g.top),a.right=Math.max((v=a.right)!==null&&v!==void 0?v:-1/0,g.right),a.bottom=Math.max((f=a.bottom)!==null&&f!==void 0?f:-1/0,g.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Rl="Sortable"+new Date().getTime();function OV(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(r){if(!(wr(r,"display")==="none"||r===yr.ghost)){e.push({target:r,rect:Ki(r)});var u=vc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=Ov(r,!0);c&&(u.top-=c.f,u.left-=c.e)}r.fromRect=u}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(_V(e,{target:a}),1)},animateAll:function(a){var r=this;if(!this.options.animation){clearTimeout(t),typeof a=="function"&&a();return}var u=!1,c=0;e.forEach(function(v){var f=0,g=v.target,b=g.fromRect,_=Ki(g),x=g.prevFromRect,A=g.prevToRect,M=v.rect,S=Ov(g,!0);S&&(_.top-=S.f,_.left-=S.e),g.toRect=_,g.thisAnimationDuration&&A1(x,_)&&!A1(b,_)&&(M.top-_.top)/(M.left-_.left)===(b.top-_.top)/(b.left-_.left)&&(f=xV(M,x,A,r.options)),A1(_,b)||(g.prevFromRect=b,g.prevToRect=_,f||(f=r.options.animation),r.animate(g,M,_,f)),f&&(u=!0,c=Math.max(c,f),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},f),g.thisAnimationDuration=f)}),clearTimeout(t),u?t=setTimeout(function(){typeof a=="function"&&a()},c):typeof a=="function"&&a(),e=[]},animate:function(a,r,u,c){if(c){wr(a,"transition",""),wr(a,"transform","");var v=Ov(this.el),f=v&&v.a,g=v&&v.d,b=(r.left-u.left)/(f||1),_=(r.top-u.top)/(g||1);a.animatingX=!!b,a.animatingY=!!_,wr(a,"transform","translate3d("+b+"px,"+_+"px,0)"),this.forRepaintDummy=SV(a),wr(a,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),wr(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){wr(a,"transition",""),wr(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},c)}}}}function SV(e){return e.offsetWidth}function xV(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var lv=[],T1={initializeByDefault:!0},ly={mount:function(t){for(var n in T1)T1.hasOwnProperty(n)&&!(n in t)&&(t[n]=T1[n]);lv.forEach(function(a){if(a.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),lv.push(t)},pluginEvent:function(t,n,a){var r=this;this.eventCanceled=!1,a.cancel=function(){r.eventCanceled=!0};var u=t+"Global";lv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][u]&&n[c.pluginName][u](vc({sortable:n},a)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](vc({sortable:n},a)))})},initializePlugins:function(t,n,a,r){lv.forEach(function(v){var f=v.pluginName;if(!(!t.options[f]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[f]=g,Df(a,g.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var c=this.modifyOption(t,u,t.options[u]);typeof c<"u"&&(t.options[u]=c)}},getEventProperties:function(t,n){var a={};return lv.forEach(function(r){typeof r.eventProperties=="function"&&Df(a,r.eventProperties.call(n[r.pluginName],t))}),a},modifyOption:function(t,n,a){var r;return lv.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[n]=="function"&&(r=u.optionListeners[n].call(t[u.pluginName],a))}),r}};function AV(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,u=e.cloneEl,c=e.toEl,v=e.fromEl,f=e.oldIndex,g=e.newIndex,b=e.oldDraggableIndex,_=e.newDraggableIndex,x=e.originalEvent,A=e.putSortable,M=e.extraEventProperties;if(t=t||n&&n[Rl],!!t){var S,E=t.options,D="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Lf&&!ay?S=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(a,!0,!0)),S.to=c||n,S.from=v||n,S.item=r||n,S.clone=u,S.oldIndex=f,S.newIndex=g,S.oldDraggableIndex=b,S.newDraggableIndex=_,S.originalEvent=x,S.pullMode=A?A.lastPutMode:void 0;var I=vc(vc({},M),ly.getEventProperties(a,t));for(var B in I)S[B]=I[B];n&&n.dispatchEvent(S),E[D]&&E[D].call(t,S)}}var TV=["evt"],Nl=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=a.evt,u=gV(a,TV);ly.pluginEvent.bind(yr)(t,n,vc({dragEl:bn,parentEl:Ri,ghostEl:kr,rootEl:vi,nextEl:Xp,lastDownEl:Sg,cloneEl:Ei,cloneHidden:Vd,dragStarted:Am,putSortable:Pa,activeSortable:yr.active,originalEvent:r,oldIndex:bv,oldDraggableIndex:Fm,newIndex:ru,newDraggableIndex:Bd,hideGhostForTarget:wP,unhideGhostForTarget:EP,cloneNowHidden:function(){Vd=!0},cloneNowShown:function(){Vd=!1},dispatchSortableEvent:function(v){cl({sortable:n,name:v,originalEvent:r})}},u))};function cl(e){AV(vc({putSortable:Pa,cloneEl:Ei,targetEl:bn,rootEl:vi,oldIndex:bv,oldDraggableIndex:Fm,newIndex:ru,newDraggableIndex:Bd},e))}var bn,Ri,kr,vi,Xp,Sg,Ei,Vd,bv,ru,Fm,Bd,fg,Pa,dv=!1,Yg=!1,Kg=[],Gp,bs,M1,k1,tA,nA,Am,uv,$m,Um=!1,dg=!1,xg,Ga,P1=[],Dw=!1,Zg=[],Pb=typeof document<"u",pg=IE,rA=ay||Lf?"cssFloat":"float",MV=Pb&&!cP&&!IE&&"draggable"in document.createElement("div"),gP=function(){if(Pb){if(Lf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),bP=function(t,n){var a=wr(t),r=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),u=Cv(t,0,n),c=Cv(t,1,n),v=u&&wr(u),f=c&&wr(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Ki(u).width,b=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Ki(c).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&v.float&&v.float!=="none"){var _=v.float==="left"?"left":"right";return c&&(f.clear==="both"||f.clear===_)?"vertical":"horizontal"}return u&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&a[rA]==="none"||c&&a[rA]==="none"&&g+b>r)?"vertical":"horizontal"},kV=function(t,n,a){var r=a?t.left:t.top,u=a?t.right:t.bottom,c=a?t.width:t.height,v=a?n.left:n.top,f=a?n.right:n.bottom,g=a?n.width:n.height;return r===v||u===f||r+c/2===v+g/2},PV=function(t,n){var a;return Kg.some(function(r){var u=r[Rl].options.emptyInsertThreshold;if(!(!u||LE(r))){var c=Ki(r),v=t>=c.left-u&&t<=c.right+u,f=n>=c.top-u&&n<=c.bottom+u;if(v&&f)return a=r}}),a},_P=function(t){function n(u,c){return function(v,f,g,b){var _=v.options.group.name&&f.options.group.name&&v.options.group.name===f.options.group.name;if(u==null&&(c||_))return!0;if(u==null||u===!1)return!1;if(c&&u==="clone")return u;if(typeof u=="function")return n(u(v,f,g,b),c)(v,f,g,b);var x=(c?v:f).options.group.name;return u===!0||typeof u=="string"&&u===x||u.join&&u.indexOf(x)>-1}}var a={},r=t.group;(!r||Og(r)!="object")&&(r={name:r}),a.name=r.name,a.checkPull=n(r.pull,!0),a.checkPut=n(r.put),a.revertClone=r.revertClone,t.group=a},wP=function(){!gP&&kr&&wr(kr,"display","none")},EP=function(){!gP&&kr&&wr(kr,"display","")};Pb&&!cP&&document.addEventListener("click",function(e){if(Yg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Yg=!1,!1},!0);var zp=function(t){if(bn){t=t.touches?t.touches[0]:t;var n=PV(t.clientX,t.clientY);if(n){var a={};for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Rl]._onDragOver(a)}}},NV=function(t){bn&&bn.parentNode[Rl]._isOutsideThisEl(t.target)};function yr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Df({},t),e[Rl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return bP(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yr.supportPointer!==!1&&"PointerEvent"in window&&(!Im||IE),emptyInsertThreshold:5};ly.initializePlugins(this,e,n);for(var a in n)!(a in t)&&(t[a]=n[a]);_P(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:MV,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?no(e,"pointerdown",this._onTapStart):(no(e,"mousedown",this._onTapStart),no(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(no(e,"dragover",this),no(e,"dragenter",this)),Kg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Df(this,OV())}yr.prototype={constructor:yr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(uv=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,bn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,a=this.el,r=this.options,u=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,b=r.filter;if($V(a),!bn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Im&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=_s(f,r.draggable,a,!1),!(f&&f.animated)&&Sg!==f)){if(bv=Pu(f),Fm=Pu(f,r.draggable),typeof b=="function"){if(b.call(this,t,f,this)){cl({sortable:n,rootEl:g,name:"filter",targetEl:f,toEl:a,fromEl:a}),Nl("filter",n,{evt:t}),u&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(_){if(_=_s(g,_.trim(),a,!1),_)return cl({sortable:n,rootEl:_,name:"filter",targetEl:f,fromEl:a,toEl:a}),Nl("filter",n,{evt:t}),!0}),b)){u&&t.preventDefault();return}r.handle&&!_s(g,r.handle,a,!1)||this._prepareDragStart(t,v,f)}}},_prepareDragStart:function(t,n,a){var r=this,u=r.el,c=r.options,v=u.ownerDocument,f;if(a&&!bn&&a.parentNode===u){var g=Ki(a);if(vi=u,bn=a,Ri=bn.parentNode,Xp=bn.nextSibling,Sg=a,fg=c.group,yr.dragged=bn,Gp={target:bn,clientX:(n||t).clientX,clientY:(n||t).clientY},tA=Gp.clientX-g.left,nA=Gp.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,bn.style["will-change"]="all",f=function(){if(Nl("delayEnded",r,{evt:t}),yr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Zx&&r.nativeDraggable&&(bn.draggable=!0),r._triggerDragStart(t,n),cl({sortable:r,name:"choose",originalEvent:t}),nu(bn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(b){pP(bn,b.trim(),N1)}),no(v,"dragover",zp),no(v,"mousemove",zp),no(v,"touchmove",zp),c.supportPointer?(no(v,"pointerup",r._onDrop),!this.nativeDraggable&&no(v,"pointercancel",r._onDrop)):(no(v,"mouseup",r._onDrop),no(v,"touchend",r._onDrop),no(v,"touchcancel",r._onDrop)),Zx&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bn.draggable=!0),Nl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ay||Lf))){if(yr.eventCanceled){this._onDrop();return}c.supportPointer?(no(v,"pointerup",r._disableDelayedDrag),no(v,"pointercancel",r._disableDelayedDrag)):(no(v,"mouseup",r._disableDelayedDrag),no(v,"touchend",r._disableDelayedDrag),no(v,"touchcancel",r._disableDelayedDrag)),no(v,"mousemove",r._delayedDragTouchMoveHandler),no(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&no(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(f,c.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bn&&N1(bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Zr(t,"mouseup",this._disableDelayedDrag),Zr(t,"touchend",this._disableDelayedDrag),Zr(t,"touchcancel",this._disableDelayedDrag),Zr(t,"pointerup",this._disableDelayedDrag),Zr(t,"pointercancel",this._disableDelayedDrag),Zr(t,"mousemove",this._delayedDragTouchMoveHandler),Zr(t,"touchmove",this._delayedDragTouchMoveHandler),Zr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?no(document,"pointermove",this._onTouchMove):n?no(document,"touchmove",this._onTouchMove):no(document,"mousemove",this._onTouchMove):(no(bn,"dragend",this),no(vi,"dragstart",this._onDragStart));try{document.selection?Ag(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(dv=!1,vi&&bn){Nl("dragStarted",this,{evt:n}),this.nativeDraggable&&no(document,"dragover",NV);var a=this.options;!t&&nu(bn,a.dragClass,!1),nu(bn,a.ghostClass,!0),yr.active=this,t&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(bs){this._lastX=bs.clientX,this._lastY=bs.clientY,wP();for(var t=document.elementFromPoint(bs.clientX,bs.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(bs.clientX,bs.clientY),t!==n);)n=t;if(bn.parentNode[Rl]._isOutsideThisEl(t),n)do{if(n[Rl]){var a=void 0;if(a=n[Rl]._onDragOver({clientX:bs.clientX,clientY:bs.clientY,target:t,rootEl:n}),a&&!this.options.dragoverBubble)break}t=n}while(n=dP(n));EP()}},_onTouchMove:function(t){if(Gp){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,u=t.touches?t.touches[0]:t,c=kr&&Ov(kr,!0),v=kr&&c&&c.a,f=kr&&c&&c.d,g=pg&&Ga&&eA(Ga),b=(u.clientX-Gp.clientX+r.x)/(v||1)+(g?g[0]-P1[0]:0)/(v||1),_=(u.clientY-Gp.clientY+r.y)/(f||1)+(g?g[1]-P1[1]:0)/(f||1);if(!yr.active&&!dv){if(a&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(kr){c?(c.e+=b-(M1||0),c.f+=_-(k1||0)):c={a:1,b:0,c:0,d:1,e:b,f:_};var x="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");wr(kr,"webkitTransform",x),wr(kr,"mozTransform",x),wr(kr,"msTransform",x),wr(kr,"transform",x),M1=b,k1=_,bs=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!kr){var t=this.options.fallbackOnBody?document.body:vi,n=Ki(bn,!0,pg,!0,t),a=this.options;if(pg){for(Ga=t;wr(Ga,"position")==="static"&&wr(Ga,"transform")==="none"&&Ga!==document;)Ga=Ga.parentNode;Ga!==document.body&&Ga!==document.documentElement?(Ga===document&&(Ga=dc()),n.top+=Ga.scrollTop,n.left+=Ga.scrollLeft):Ga=dc(),P1=eA(Ga)}kr=bn.cloneNode(!0),nu(kr,a.ghostClass,!1),nu(kr,a.fallbackClass,!0),nu(kr,a.dragClass,!0),wr(kr,"transition",""),wr(kr,"transform",""),wr(kr,"box-sizing","border-box"),wr(kr,"margin",0),wr(kr,"top",n.top),wr(kr,"left",n.left),wr(kr,"width",n.width),wr(kr,"height",n.height),wr(kr,"opacity","0.8"),wr(kr,"position",pg?"absolute":"fixed"),wr(kr,"zIndex","100000"),wr(kr,"pointerEvents","none"),yr.ghost=kr,t.appendChild(kr),wr(kr,"transform-origin",tA/parseInt(kr.style.width)*100+"% "+nA/parseInt(kr.style.height)*100+"%")}},_onDragStart:function(t,n){var a=this,r=t.dataTransfer,u=a.options;if(Nl("dragStart",this,{evt:t}),yr.eventCanceled){this._onDrop();return}Nl("setupClone",this),yr.eventCanceled||(Ei=mP(bn),Ei.removeAttribute("id"),Ei.draggable=!1,Ei.style["will-change"]="",this._hideClone(),nu(Ei,this.options.chosenClass,!1),yr.clone=Ei),a.cloneId=Ag(function(){Nl("clone",a),!yr.eventCanceled&&(a.options.removeCloneOnHide||vi.insertBefore(Ei,bn),a._hideClone(),cl({sortable:a,name:"clone"}))}),!n&&nu(bn,u.dragClass,!0),n?(Yg=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Zr(document,"mouseup",a._onDrop),Zr(document,"touchend",a._onDrop),Zr(document,"touchcancel",a._onDrop),r&&(r.effectAllowed="move",u.setData&&u.setData.call(a,r,bn)),no(document,"drop",a),wr(bn,"transform","translateZ(0)")),dv=!0,a._dragStartId=Ag(a._dragStarted.bind(a,n,t)),no(document,"selectstart",a),Am=!0,window.getSelection().removeAllRanges(),Im&&wr(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,a=t.target,r,u,c,v=this.options,f=v.group,g=yr.active,b=fg===f,_=v.sort,x=Pa||g,A,M=this,S=!1;if(Dw)return;function E(be,ye){Nl(be,M,vc({evt:t,isOwner:b,axis:A?"vertical":"horizontal",revert:c,dragRect:r,targetRect:u,canSort:_,fromSortable:x,target:a,completed:I,onMove:function(Ze,yt){return hg(vi,n,bn,r,Ze,Ki(Ze),t,yt)},changed:B},ye))}function D(){E("dragOverAnimationCapture"),M.captureAnimationState(),M!==x&&x.captureAnimationState()}function I(be){return E("dragOverCompleted",{insertion:be}),be&&(b?g._hideClone():g._showClone(M),M!==x&&(nu(bn,Pa?Pa.options.ghostClass:g.options.ghostClass,!1),nu(bn,v.ghostClass,!0)),Pa!==M&&M!==yr.active?Pa=M:M===yr.active&&Pa&&(Pa=null),x===M&&(M._ignoreWhileAnimating=a),M.animateAll(function(){E("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(a===bn&&!bn.animated||a===n&&!a.animated)&&(uv=null),!v.dragoverBubble&&!t.rootEl&&a!==document&&(bn.parentNode[Rl]._isOutsideThisEl(t.target),!be&&zp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),S=!0}function B(){ru=Pu(bn),Bd=Pu(bn,v.draggable),cl({sortable:M,name:"change",toEl:n,newIndex:ru,newDraggableIndex:Bd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),a=_s(a,v.draggable,n,!0),E("dragOver"),yr.eventCanceled)return S;if(bn.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||M._ignoreWhileAnimating===a)return I(!1);if(Yg=!1,g&&!v.disabled&&(b?_||(c=Ri!==vi):Pa===this||(this.lastPutMode=fg.checkPull(this,g,bn,t))&&f.checkPut(this,g,bn,t))){if(A=this._getDirection(t,a)==="vertical",r=Ki(bn),E("dragOverValid"),yr.eventCanceled)return S;if(c)return Ri=vi,D(),this._hideClone(),E("revert"),yr.eventCanceled||(Xp?vi.insertBefore(bn,Xp):vi.appendChild(bn)),I(!0);var $=LE(n,v.draggable);if(!$||jV(t,A,this)&&!$.animated){if($===bn)return I(!1);if($&&n===t.target&&(a=$),a&&(u=Ki(a)),hg(vi,n,bn,r,a,u,t,!!a)!==!1)return D(),$&&$.nextSibling?n.insertBefore(bn,$.nextSibling):n.appendChild(bn),Ri=n,B(),I(!0)}else if($&&DV(t,A,this)){var j=Cv(n,0,v,!0);if(j===bn)return I(!1);if(a=j,u=Ki(a),hg(vi,n,bn,r,a,u,t,!1)!==!1)return D(),n.insertBefore(bn,j),Ri=n,B(),I(!0)}else if(a.parentNode===n){u=Ki(a);var U=0,K,Q=bn.parentNode!==n,H=!kV(bn.animated&&bn.toRect||r,a.animated&&a.toRect||u,A),W=A?"top":"left",z=Qx(a,"top","top")||Qx(bn,"top","top"),Y=z?z.scrollTop:void 0;uv!==a&&(K=u[W],Um=!1,dg=!H&&v.invertSwap||Q),U=IV(t,a,u,A,H?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,dg,uv===a);var q;if(U!==0){var oe=Pu(bn);do oe-=U,q=Ri.children[oe];while(q&&(wr(q,"display")==="none"||q===kr))}if(U===0||q===a)return I(!1);uv=a,$m=U;var ie=a.nextElementSibling,Pe=!1;Pe=U===1;var we=hg(vi,n,bn,r,a,u,t,Pe);if(we!==!1)return(we===1||we===-1)&&(Pe=we===1),Dw=!0,setTimeout(CV,30),D(),Pe&&!ie?n.appendChild(bn):a.parentNode.insertBefore(bn,Pe?ie:a),z&&vP(z,0,Y-z.scrollTop),Ri=bn.parentNode,K!==void 0&&!dg&&(xg=Math.abs(K-Ki(a)[W])),B(),I(!0)}if(n.contains(bn))return I(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Zr(document,"mousemove",this._onTouchMove),Zr(document,"touchmove",this._onTouchMove),Zr(document,"pointermove",this._onTouchMove),Zr(document,"dragover",zp),Zr(document,"mousemove",zp),Zr(document,"touchmove",zp)},_offUpEvents:function(){var t=this.el.ownerDocument;Zr(t,"mouseup",this._onDrop),Zr(t,"touchend",this._onDrop),Zr(t,"pointerup",this._onDrop),Zr(t,"pointercancel",this._onDrop),Zr(t,"touchcancel",this._onDrop),Zr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;if(ru=Pu(bn),Bd=Pu(bn,a.draggable),Nl("drop",this,{evt:t}),Ri=bn&&bn.parentNode,ru=Pu(bn),Bd=Pu(bn,a.draggable),yr.eventCanceled){this._nulling();return}dv=!1,dg=!1,Um=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),jw(this.cloneId),jw(this._dragStartId),this.nativeDraggable&&(Zr(document,"drop",this),Zr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Im&&wr(document.body,"user-select",""),wr(bn,"transform",""),t&&(Am&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),kr&&kr.parentNode&&kr.parentNode.removeChild(kr),(vi===Ri||Pa&&Pa.lastPutMode!=="clone")&&Ei&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),bn&&(this.nativeDraggable&&Zr(bn,"dragend",this),N1(bn),bn.style["will-change"]="",Am&&!dv&&nu(bn,Pa?Pa.options.ghostClass:this.options.ghostClass,!1),nu(bn,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:Ri,newIndex:null,newDraggableIndex:null,originalEvent:t}),vi!==Ri?(ru>=0&&(cl({rootEl:Ri,name:"add",toEl:Ri,fromEl:vi,originalEvent:t}),cl({sortable:this,name:"remove",toEl:Ri,originalEvent:t}),cl({rootEl:Ri,name:"sort",toEl:Ri,fromEl:vi,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),Pa&&Pa.save()):ru!==bv&&ru>=0&&(cl({sortable:this,name:"update",toEl:Ri,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),yr.active&&((ru==null||ru===-1)&&(ru=bv,Bd=Fm),cl({sortable:this,name:"end",toEl:Ri,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Nl("nulling",this),vi=bn=Ri=kr=Xp=Ei=Sg=Vd=Gp=bs=Am=ru=Bd=bv=Fm=uv=$m=Pa=fg=yr.dragged=yr.ghost=yr.clone=yr.active=null,Zg.forEach(function(t){t.checked=!0}),Zg.length=M1=k1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":bn&&(this._onDragOver(t),RV(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,a=this.el.children,r=0,u=a.length,c=this.options;r<u;r++)n=a[r],_s(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||FV(n));return t},sort:function(t,n){var a={},r=this.el;this.toArray().forEach(function(u,c){var v=r.children[c];_s(v,this.options.draggable,r,!1)&&(a[u]=v)},this),n&&this.captureAnimationState(),t.forEach(function(u){a[u]&&(r.removeChild(a[u]),r.appendChild(a[u]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return _s(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var a=this.options;if(n===void 0)return a[t];var r=ly.modifyOption(this,t,n);typeof r<"u"?a[t]=r:a[t]=n,t==="group"&&_P(a)},destroy:function(){Nl("destroy",this);var t=this.el;t[Rl]=null,Zr(t,"mousedown",this._onTapStart),Zr(t,"touchstart",this._onTapStart),Zr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Zr(t,"dragover",this),Zr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Kg.splice(Kg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Vd){if(Nl("hideClone",this),yr.eventCanceled)return;wr(Ei,"display","none"),this.options.removeCloneOnHide&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),Vd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Vd){if(Nl("showClone",this),yr.eventCanceled)return;bn.parentNode==vi&&!this.options.group.revertClone?vi.insertBefore(Ei,bn):Xp?vi.insertBefore(Ei,Xp):vi.appendChild(Ei),this.options.group.revertClone&&this.animate(bn,Ei),wr(Ei,"display",""),Vd=!1}}};function RV(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function hg(e,t,n,a,r,u,c,v){var f,g=e[Rl],b=g.options.onMove,_;return window.CustomEvent&&!Lf&&!ay?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=a,f.related=r||t,f.relatedRect=u||Ki(t),f.willInsertAfter=v,f.originalEvent=c,e.dispatchEvent(f),b&&(_=b.call(g,f,c)),_}function N1(e){e.draggable=!1}function CV(){Dw=!1}function DV(e,t,n){var a=Ki(Cv(n.el,0,n.options,!0)),r=yP(n.el,n.options,kr),u=10;return t?e.clientX<r.left-u||e.clientY<a.top&&e.clientX<a.right:e.clientY<r.top-u||e.clientY<a.bottom&&e.clientX<a.left}function jV(e,t,n){var a=Ki(LE(n.el,n.options.draggable)),r=yP(n.el,n.options,kr),u=10;return t?e.clientX>r.right+u||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>r.bottom+u||e.clientX>a.right&&e.clientY>a.top}function IV(e,t,n,a,r,u,c,v){var f=a?e.clientY:e.clientX,g=a?n.height:n.width,b=a?n.top:n.left,_=a?n.bottom:n.right,x=!1;if(!c){if(v&&xg<g*r){if(!Um&&($m===1?f>b+g*u/2:f<_-g*u/2)&&(Um=!0),Um)x=!0;else if($m===1?f<b+xg:f>_-xg)return-$m}else if(f>b+g*(1-r)/2&&f<_-g*(1-r)/2)return LV(t)}return x=x||c,x&&(f<b+g*u/2||f>_-g*u/2)?f>b+g/2?1:-1:0}function LV(e){return Pu(bn)<Pu(e)?1:-1}function FV(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function $V(e){Zg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&Zg.push(a)}}function Ag(e){return setTimeout(e,0)}function jw(e){return clearTimeout(e)}Pb&&no(document,"touchmove",function(e){(yr.active||dv)&&e.cancelable&&e.preventDefault()});yr.utils={on:no,off:Zr,css:wr,find:pP,is:function(t,n){return!!_s(t,n,t,!1)},extend:wV,throttle:hP,closest:_s,toggleClass:nu,clone:mP,index:Pu,nextTick:Ag,cancelNextTick:jw,detectDirection:bP,getChild:Cv,expando:Rl};yr.get=function(e){return e[Rl]};yr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(yr.utils=vc(vc({},yr.utils),a.utils)),ly.mount(a)})};yr.create=function(e,t){return new yr(e,t)};yr.version=bV;var Yi=[],Tm,Iw,Lw=!1,R1,C1,Jg,Mm;function UV(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?no(document,"dragover",this._handleAutoScroll):this.options.supportPointer?no(document,"pointermove",this._handleFallbackAutoScroll):a.touches?no(document,"touchmove",this._handleFallbackAutoScroll):no(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Zr(document,"dragover",this._handleAutoScroll):(Zr(document,"pointermove",this._handleFallbackAutoScroll),Zr(document,"touchmove",this._handleFallbackAutoScroll),Zr(document,"mousemove",this._handleFallbackAutoScroll)),oA(),Tg(),EV()},nulling:function(){Jg=Iw=Tm=Lw=Mm=R1=C1=null,Yi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var r=this,u=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(u,c);if(Jg=n,a||this.options.forceAutoScrollFallback||ay||Lf||Im){D1(n,this.options,v,a);var f=Wd(v,!0);Lw&&(!Mm||u!==R1||c!==C1)&&(Mm&&oA(),Mm=setInterval(function(){var g=Wd(document.elementFromPoint(u,c),!0);g!==f&&(f=g,Tg()),D1(n,r.options,g,a)},10),R1=u,C1=c)}else{if(!this.options.bubbleScroll||Wd(v,!0)===dc()){Tg();return}D1(n,this.options,Wd(v,!1),!1)}}},Df(e,{pluginName:"scroll",initializeByDefault:!0})}function Tg(){Yi.forEach(function(e){clearInterval(e.pid)}),Yi=[]}function oA(){clearInterval(Mm)}var D1=hP(function(e,t,n,a){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,f=dc(),g=!1,b;Iw!==n&&(Iw=n,Tg(),Tm=t.scroll,b=t.scrollFn,Tm===!0&&(Tm=Wd(n,!0)));var _=0,x=Tm;do{var A=x,M=Ki(A),S=M.top,E=M.bottom,D=M.left,I=M.right,B=M.width,$=M.height,j=void 0,U=void 0,K=A.scrollWidth,Q=A.scrollHeight,H=wr(A),W=A.scrollLeft,z=A.scrollTop;A===f?(j=B<K&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),U=$<Q&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(j=B<K&&(H.overflowX==="auto"||H.overflowX==="scroll"),U=$<Q&&(H.overflowY==="auto"||H.overflowY==="scroll"));var Y=j&&(Math.abs(I-r)<=c&&W+B<K)-(Math.abs(D-r)<=c&&!!W),q=U&&(Math.abs(E-u)<=c&&z+$<Q)-(Math.abs(S-u)<=c&&!!z);if(!Yi[_])for(var oe=0;oe<=_;oe++)Yi[oe]||(Yi[oe]={});(Yi[_].vx!=Y||Yi[_].vy!=q||Yi[_].el!==A)&&(Yi[_].el=A,Yi[_].vx=Y,Yi[_].vy=q,clearInterval(Yi[_].pid),(Y!=0||q!=0)&&(g=!0,Yi[_].pid=setInterval((function(){a&&this.layer===0&&yr.active._onTouchMove(Jg);var ie=Yi[this.layer].vy?Yi[this.layer].vy*v:0,Pe=Yi[this.layer].vx?Yi[this.layer].vx*v:0;typeof b=="function"&&b.call(yr.dragged.parentNode[Rl],Pe,ie,e,Jg,Yi[this.layer].el)!=="continue"||vP(Yi[this.layer].el,Pe,ie)}).bind({layer:_}),24))),_++}while(t.bubbleScroll&&x!==f&&(x=Wd(x,!1)));Lw=g}},30),OP=function(t){var n=t.originalEvent,a=t.putSortable,r=t.dragEl,u=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var g=a||u;v();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,_=document.elementFromPoint(b.clientX,b.clientY);f(),g&&!g.el.contains(_)&&(c("spill"),this.onSpill({dragEl:r,putSortable:a}))}};function FE(){}FE.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var r=Cv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:OP};Df(FE,{pluginName:"revertOnSpill"});function $E(){}$E.prototype={onSpill:function(t){var n=t.dragEl,a=t.putSortable,r=a||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:OP};Df($E,{pluginName:"removeOnSpill"});yr.mount(new UV);yr.mount($E,FE);const BV={class:"dialog-footer"},VV=rr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge(!1),c=Ge(!1),v=Ge({name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""}),f=ch({name:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Ot("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=Ge(!1);fb(g,A=>{A||(v.value={name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=A=>{A&&(v.value=Ne.cloneDeep(A),c.value=!0),g.value=!0},_=()=>{g.value=!1,c.value=!1},x=async A=>{A&&await A.validate(M=>{M&&a("refresh",v.value)})};return t({open:b,close:_}),(A,M)=>{const S=J("el-input"),E=J("el-form-item"),D=J("el-switch"),I=J("el-form"),B=J("el-button"),$=J("el-dialog");return Oe(),at($,{title:c.value?A.$t("common.param.editParam"):A.$t("common.param.addParam"),modelValue:g.value,"onUpdate:modelValue":M[8]||(M[8]=j=>g.value=j),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:C(()=>[ee("span",BV,[k(B,{onClick:M[6]||(M[6]=nn(j=>g.value=!1,["prevent"]))},{default:C(()=>[ct(_e(A.$t("common.cancel")),1)]),_:1}),k(B,{type:"primary",onClick:M[7]||(M[7]=j=>x(r.value)),loading:u.value},{default:C(()=>[ct(_e(c.value?A.$t("common.save"):A.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(I,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:f,model:v.value,"require-asterisk-position":"right"},{default:C(()=>[k(E,{label:A.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:C(()=>[k(S,{modelValue:v.value.variable,"onUpdate:modelValue":M[0]||(M[0]=j=>v.value.variable=j),placeholder:A.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:M[1]||(M[1]=j=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(E,{label:A.$t("dynamicsForm.paramForm.required.label"),onClick:M[3]||(M[3]=nn(()=>{},["prevent"]))},{default:C(()=>[k(D,{size:"small",modelValue:v.value.isRequired,"onUpdate:modelValue":M[2]||(M[2]=j=>v.value.isRequired=j)},null,8,["modelValue"])]),_:1},8,["label"]),k(E,{label:A.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.isRequired,message:A.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:C(()=>[k(S,{modelValue:v.value.default_value,"onUpdate:modelValue":M[4]||(M[4]=j=>v.value.default_value=j),placeholder:A.$t("dynamicsForm.default.placeholder"),onBlur:M[5]||(M[5]=j=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),WV={class:"flex-between mb-16"},GV={class:"lighter"},zV=["title"],HV=["title"],XV={class:"mr-4"},qV=rr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(null),r=Ge(),u=Ge([]);function c(b,_){typeof _<"u"&&(a.value=_),r.value.open(b)}function v(b){u.value.splice(b,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function f(b){for(let x=0;x<u.value.length;x++)if(u.value[x].variable===b.variable&&a.value!==x){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}const _=t.nodeModel.properties.user_input_field_list;for(let x=0;x<_.length;x++)if(_[x].field===b.variable){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}a.value!==null?u.value.splice(a.value,1,b):u.value.push(b),a.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const _=n.value.$el.querySelector(".el-table__body-wrapper tbody");_&&yr.create(_,{animation:150,ghostClass:"ghost-row",onEnd:x=>{if(x.oldIndex===void 0||x.newIndex===void 0)return;const A=[...u.value],[M]=A.splice(x.oldIndex,1);A.splice(x.newIndex,0,M),u.value=A,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Hr(()=>{t.nodeModel.properties.api_input_field_list?u.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(b=>b.assignment_method==="api_input").forEach(b=>{u.value.push(b)}),Ne.set(t.nodeModel.properties,"api_input_field_list",u)}),(b,_)=>{var $;const x=J("Plus"),A=J("el-icon"),M=J("el-button"),S=J("el-table-column"),E=J("el-switch"),D=J("AppIcon"),I=J("el-tooltip"),B=J("el-table");return Oe(),en(Or,null,[ee("div",WV,[ee("h5",GV,_e(b.$t("views.model.modelForm.title.apiParamPassing")),1),k(M,{link:"",type:"primary",onClick:_[0]||(_[0]=j=>c())},{default:C(()=>[k(A,{class:"mr-4"},{default:C(()=>[k(x)]),_:1}),ct(" "+_e(b.$t("common.add")),1)]),_:1})]),(($=t.nodeModel.properties.api_input_field_list)==null?void 0:$.length)>0?(Oe(),at(B,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:C(()=>[k(S,{prop:"variable",label:b.$t("dynamicsForm.paramForm.field.label")},{default:C(({row:j})=>[ee("span",{class:"ellipsis-1",title:j.variable},_e(j.variable),9,zV)]),_:1},8,["label"]),k(S,{prop:"default_value",label:b.$t("dynamicsForm.default.label")},{default:C(({row:j})=>[ee("span",{class:"ellipsis-1",title:j.default_value},_e(j.default_value),9,HV)]),_:1},8,["label"]),k(S,{label:b.$t("common.required")},{default:C(({row:j})=>[ee("div",{onClick:_[1]||(_[1]=nn(()=>{},["stop"]))},[k(E,{disabled:"",size:"small",modelValue:j.isRequired,"onUpdate:modelValue":U=>j.isRequired=U},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(S,{label:b.$t("common.operation"),align:"left",width:"90"},{default:C(({row:j,$index:U})=>[ee("span",XV,[k(I,{effect:"dark",content:b.$t("common.modify"),placement:"top"},{default:C(()=>[k(M,{type:"primary",text:"",onClick:nn(K=>c(j,U),["stop"])},{default:C(()=>[k(D,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(I,{effect:"dark",content:b.$t("common.delete"),placement:"top"},{default:C(()=>[k(M,{type:"primary",text:"",onClick:K=>v(U)},{default:C(()=>[k(D,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(VV,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:f},null,512)],64)}}}),YV={class:"dialog-footer"},KV=rr({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge(!1),c=Ge(!1),v=Ge(),f=(E,D)=>E.every(I=>iI.get(D,I,void 0)!==void 0),g=Zn(()=>{if(v.value){const E=v.value;switch(E.type){case"input":return f(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:E.attrs||{maxlength:200,minlength:0},field:E.field||E.variable,input_type:"TextInput",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired};case"select":return f(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:E.attrs||{},field:E.field||E.variable,input_type:"SingleSelect",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,option_list:E.option_list?E.option_list:E.optionList.map(D=>({key:D,value:D}))};case"date":return f(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:E.field||E.variable,input_type:"DatePicker",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),b=Ge(null),_=Ge([{label:Ot("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:Ot("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:Ot("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:Ot("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:Ot("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:Ot("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:Ot("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),x=Ge(!1),A=(E,D)=>{x.value=!0,E?(c.value=!0,v.value=Ne.cloneDeep(E),b.value=D):v.value=null},M=()=>{x.value=!1,c.value=!1,b.value=null,v.value=null},S=async()=>{const E=r.value;E&&await E.validate().then(()=>{a("refresh",E==null?void 0:E.getData(),b.value),c.value=!1,v.value=null,b.value=null})};return t({open:A,close:M}),(E,D)=>{const I=J("el-button"),B=J("el-dialog");return Oe(),at(B,{title:c.value?E.$t("common.param.editParam"):E.$t("common.param.addParam"),modelValue:x.value,"onUpdate:modelValue":D[2]||(D[2]=$=>x.value=$),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":M,"append-to-body":""},{footer:C(()=>[ee("span",YV,[k(I,{onClick:nn(M,["prevent"])},{default:C(()=>[ct(_e(E.$t("common.cancel")),1)]),_:1}),k(I,{type:"primary",onClick:D[1]||(D[1]=$=>S()),loading:u.value},{default:C(()=>[ct(_e(c.value?E.$t("common.save"):E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(rE,{modelValue:g.value,"onUpdate:modelValue":D[0]||(D[0]=$=>g.value=$),"label-position":"top","require-asterisk-position":"right",input_type_list:_.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),ZV={class:"dialog-footer"},JV=rr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge(!1),c=Ge({title:Ot("chat.userInput")}),v=ch({title:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),f=Ge(!1),g=x=>{x&&(c.value=Ne.cloneDeep(x)),f.value=!0},b=()=>{f.value=!1},_=async x=>{x&&await x.validate(A=>{A&&a("refresh",c.value)})};return t({open:g,close:b}),(x,A)=>{const M=J("el-input"),S=J("el-form-item"),E=J("el-form"),D=J("el-button"),I=J("el-dialog");return Oe(),at(I,{title:x.$t("common.setting"),modelValue:f.value,"onUpdate:modelValue":A[4]||(A[4]=B=>f.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:C(()=>[ee("span",ZV,[k(D,{onClick:A[2]||(A[2]=nn(B=>f.value=!1,["prevent"]))},{default:C(()=>[ct(_e(x.$t("common.cancel")),1)]),_:1}),k(D,{type:"primary",onClick:A[3]||(A[3]=B=>_(r.value)),loading:u.value},{default:C(()=>[ct(_e(x.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(E,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:C(()=>[k(S,{label:x.$t("common.title"),prop:"title"},{default:C(()=>[k(M,{modelValue:c.value.title,"onUpdate:modelValue":A[0]||(A[0]=B=>c.value.title=B),maxlength:"64","show-word-limit":"",onBlur:A[1]||(A[1]=B=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),QV={class:"flex-between mb-16"},eW=["title"],tW={class:"ml-4"},nW=["title"],rW={key:0},oW=["title"],iW={key:1},aW=["title"],lW=["title"],uW={class:"mr-4"},sW=rr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(),r=Ge(),u=Ge([]),c=Ge({title:Ot("chat.userInput")});function v(M,S){a.value.open(M,S)}function f(){r.value.open(c.value)}function g(M){u.value.splice(M,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),A()}function b(M,S){for(let D=0;D<u.value.length;D++)if(u.value[D].field===M.field&&S!==D){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}const E=t.nodeModel.properties.api_input_field_list;for(let D=0;D<E.length;D++)if(E[D].variable===M.field){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}S!==null?u.value.splice(S,1,M):u.value.push(M),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),A()}function _(M){c.value=M,r.value.close()}const x=M=>{var S;if(M.input_type==="PasswordInput")return"******";if(M.default_value){const E=(S=M.option_list)==null?void 0:S.filter(D=>M.default_value.indexOf(D.value)>-1).map(D=>D.label).join(",");return E||M.default_value}if(M.default_value!==void 0)return M.default_value};function A(){if(!n.value)return;const S=n.value.$el.querySelector(".el-table__body-wrapper tbody");S&&yr.create(S,{animation:150,ghostClass:"ghost-row",onEnd:E=>{if(E.oldIndex===void 0||E.newIndex===void 0)return;const D=[...u.value],[I]=D.splice(E.oldIndex,1);D.splice(E.newIndex,0,I),u.value=D,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Hr(()=>{t.nodeModel.properties.user_input_field_list?u.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(M=>M.assignment_method==="user_input").forEach(M=>{u.value.push(M)}),u.value.forEach((M,S)=>{switch(M.label=M.label||M.name,M.field=M.field||M.variable,M.required=M.required||M.isRequired,M.type){case"input":M.input_type="TextInput";break;case"select":M.input_type="SingleSelect";break;case"date":M.input_type="DatePicker";break}}),Ne.set(t.nodeModel.properties,"user_input_field_list",u),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Ne.set(t.nodeModel.properties,"user_input_config",c),A()}),(M,S)=>{var H;const E=J("AppIcon"),D=J("el-button"),I=J("Plus"),B=J("el-icon"),$=J("el-table-column"),j=J("el-tag"),U=J("el-switch"),K=J("el-tooltip"),Q=J("el-table");return Oe(),en(Or,null,[ee("div",QV,[ee("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},_e(c.value.title),9,eW),ee("div",null,[k(D,{type:"primary",link:"",onClick:f},{default:C(()=>[k(E,{iconName:"app-setting"})]),_:1}),ee("span",tW,[k(D,{link:"",type:"primary",onClick:S[0]||(S[0]=W=>v())},{default:C(()=>[k(B,{class:"mr-4"},{default:C(()=>[k(I)]),_:1}),ct(" "+_e(M.$t("common.add")),1)]),_:1})])])]),((H=t.nodeModel.properties.user_input_field_list)==null?void 0:H.length)>0?(Oe(),at(Q,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:C(()=>[k($,{prop:"field",label:M.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:C(({row:W})=>[ee("span",{title:W.field,class:"ellipsis-1"},_e(W.field),9,nW)]),_:1},8,["label"]),k($,{prop:"label",label:M.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:W})=>[W.label&&W.label.input_type==="TooltipLabel"?(Oe(),en("span",rW,[ee("span",{title:W.label.label,class:"ellipsis-1"},_e(W.label.label),9,oW)])):(Oe(),en("span",iW,[ee("span",{title:W.label,class:"ellipsis-1"},_e(W.label),9,aW)]))]),_:1},8,["label"]),k($,{label:M.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:C(({row:W})=>[W.input_type==="TextInput"?(Oe(),at(j,{key:0,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):kn("",!0),W.input_type==="PasswordInput"?(Oe(),at(j,{key:1,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):kn("",!0),W.input_type==="Slider"?(Oe(),at(j,{key:2,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):kn("",!0),W.input_type==="SwitchInput"?(Oe(),at(j,{key:3,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):kn("",!0),W.input_type==="SingleSelect"?(Oe(),at(j,{key:4,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):kn("",!0),W.input_type==="MultiSelect"?(Oe(),at(j,{key:5,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):kn("",!0),W.input_type==="RadioCard"?(Oe(),at(j,{key:6,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):kn("",!0),W.input_type==="DatePicker"?(Oe(),at(j,{key:7,type:"info",class:"info-tag"},{default:C(()=>[ct(_e(M.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):kn("",!0)]),_:1},8,["label"]),k($,{prop:"default_value",label:M.$t("dynamicsForm.default.label")},{default:C(({row:W})=>[ee("span",{title:W.default_value,class:"ellipsis-1"},_e(x(W)),9,lW)]),_:1},8,["label"]),k($,{label:M.$t("common.required")},{default:C(({row:W})=>[ee("div",{onClick:S[1]||(S[1]=nn(()=>{},["stop"]))},[k(U,{disabled:"",size:"small",modelValue:W.required,"onUpdate:modelValue":z=>W.required=z},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k($,{label:M.$t("common.operation"),align:"left",width:"90"},{default:C(({row:W,$index:z})=>[ee("span",uW,[k(K,{effect:"dark",content:M.$t("common.modify"),placement:"top"},{default:C(()=>[k(D,{type:"primary",text:"",onClick:nn(Y=>v(W,z),["stop"])},{default:C(()=>[k(E,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(K,{effect:"dark",content:M.$t("common.delete"),placement:"top"},{default:C(()=>[k(D,{type:"primary",text:"",onClick:Y=>g(z)},{default:C(()=>[k(E,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(KV,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:b},null,512),k(JV,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:_},null,512)],64)}}}),cW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.8146C19.9934%202%2020.1647%202.07183%2020.29%202.19934L26.4756%208.49255C26.5982%208.61722%2026.6668%208.78505%2026.6668%208.95987V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.02637C20.1089%202.05793%2020.2089%202.11704%2020.2899%202.19936L26.4755%208.49256C26.5261%208.54408%2026.5675%208.60297%2026.5987%208.66668H21.5135C20.6776%208.66668%2020%207.98906%2020%207.15317V2.02637Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M10.7636%2013.5757H20.8727C20.9932%2013.5757%2021.0909%2013.6734%2021.0909%2013.7939V14.8121C21.0909%2014.9326%2020.9932%2015.0303%2020.8727%2015.0303H10.7636C10.6431%2015.0303%2010.5454%2014.9326%2010.5454%2014.8121V13.7939C10.5454%2013.6734%2010.6431%2013.5757%2010.7636%2013.5757ZM10.7636%2017.9394H20.8727C20.9932%2017.9394%2021.0909%2018.0371%2021.0909%2018.1576V19.1757C21.0909%2019.2962%2020.9932%2019.3939%2020.8727%2019.3939H10.7636C10.6431%2019.3939%2010.5454%2019.2962%2010.5454%2019.1757V18.1576C10.5454%2018.0371%2010.6431%2017.9394%2010.7636%2017.9394ZM10.7636%2022.303H16.1454C16.2659%2022.303%2016.3636%2022.4007%2016.3636%2022.5212V23.5394C16.3636%2023.6599%2016.2659%2023.7576%2016.1454%2023.7576H10.7636C10.6431%2023.7576%2010.5454%2023.6599%2010.5454%2023.5394V22.5212C10.5454%2022.4007%2010.6431%2022.303%2010.7636%2022.303Z'%20fill='white'/%3e%3c/svg%3e",fW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%2314C0FF'/%3e%3cpath%20d='M20%202.05988C20.072%202.09264%2020.1383%202.13825%2020.1953%202.19526L26.4714%208.4714C26.5284%208.52841%2026.574%208.59467%2026.6068%208.66666H21.3333C20.597%208.66666%2020%208.06971%2020%207.33333V2.05988Z'%20fill='%2311A3D9'/%3e%3cpath%20d='M11.3335%2016C12.4381%2016%2013.3335%2015.1046%2013.3335%2014C13.3335%2012.8954%2012.4381%2012%2011.3335%2012C10.2289%2012%209.3335%2012.8954%209.3335%2014C9.3335%2015.1046%2010.2289%2016%2011.3335%2016Z'%20fill='white'/%3e%3cpath%20d='M22.2785%2014.9317C22.4218%2014.7884%2022.6668%2014.8899%2022.6668%2015.0925V24.0645C22.6668%2024.1901%2022.565%2024.2919%2022.4394%2024.2919H13.4674L13.4587%2024.2918H9.56142C9.35877%2024.2918%209.25728%2024.0468%209.40058%2023.9035L14.366%2018.938C14.4549%2018.8492%2014.5989%2018.8492%2014.6877%2018.938L16.48%2020.7302L22.2785%2014.9317Z'%20fill='white'/%3e%3c/svg%3e",dW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.05994C20.072%202.0927%2020.1383%202.13831%2020.1953%202.19532L26.4714%208.47146C26.5284%208.52847%2026.574%208.59473%2026.6068%208.66672H21.3333C20.597%208.66672%2020%208.06977%2020%207.33339V2.05994Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M19.976%2012.8794C20.254%2012.9447%2020.4595%2013.1796%2020.4872%2013.4638L20.6106%2014.7297C20.6546%2015.1805%2020.2459%2015.5429%2019.8037%2015.4455L16.7344%2014.7691C16.5577%2014.7302%2016.3944%2014.8747%2016.4116%2015.0548L17.1297%2022.5884C17.1297%2022.7046%2017.1151%2022.7812%2017.0891%2022.8249C17.0254%2024.3752%2015.7484%2025.6124%2014.1825%2025.6124C12.5759%2025.6124%2011.2734%2024.31%2011.2734%2022.7033C11.2734%2021.0967%2012.5759%2019.7942%2014.1825%2019.7942C14.8467%2019.7942%2015.4589%2020.0168%2015.9485%2020.3914L15.274%2012.6749C15.2345%2012.2228%2015.6485%2011.8642%2016.0904%2011.9678L19.976%2012.8794Z'%20fill='white'/%3e%3c/svg%3e",pW="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%202.5C4%201.94772%204.44772%201.5%205%201.5H14.7929C14.9255%201.5%2015.0527%201.55268%2015.1464%201.64645L19.8536%206.35355C19.9473%206.44732%2020%206.5745%2020%206.70711V21.5C20%2022.0523%2019.5523%2022.5%2019%2022.5H5C4.44772%2022.5%204%2022.0523%204%2021.5V2.5Z'%20fill='%238F959E'/%3e%3cpath%20d='M15%201.54492C15.054%201.56949%2015.1037%201.6037%2015.1464%201.64646L19.8536%206.35357C19.8963%206.39632%2019.9305%206.44602%2019.9551%206.50001H16C15.4477%206.50001%2015%206.0523%2015%205.50001V1.54492Z'%20fill='%23646A73'/%3e%3cpath%20d='M14.288%209.86441C13.7422%209.34739%2013.026%209.09082%2012.1353%209.09082C11.1347%209.09082%2010.3505%209.41162%209.78235%2010.065C9.30108%2010.6265%209.04179%2011.1646%209.00471%2012.013C9.00384%2012.033%209.00309%2012.0697%209.00247%2012.1122C9.00043%2012.2508%209.11287%2012.3635%209.25147%2012.3635H9.84253C9.98%2012.3635%2010.0914%2012.2525%2010.0936%2012.1151C10.0943%2012.0737%2010.0951%2012.038%2010.0961%2012.0189C10.1251%2011.4328%2010.278%2011.1262%2010.5508%2010.7851C10.8953%2010.3259%2011.4006%2010.0999%2012.0943%2010.0999C12.7134%2010.0999%2013.1776%2010.2578%2013.4979%2010.5782C13.8033%2010.8963%2013.9625%2011.3294%2013.9625%2011.8726C13.9625%2012.2435%2013.8281%2012.5967%2013.5549%2012.948C13.4678%2013.0568%2013.3425%2013.1862%2012.9388%2013.5899C12.3012%2014.1474%2011.9073%2014.601%2011.6993%2015.0468C11.5282%2015.3888%2011.441%2015.7775%2011.441%2016.1954V16.4772C11.441%2016.6153%2011.5529%2016.7272%2011.691%2016.7272H12.2956C12.4336%2016.7272%2012.5456%2016.6153%2012.5456%2016.4772V16.1954C12.5456%2015.8413%2012.6327%2015.5237%2012.8133%2015.2141C12.9486%2014.9841%2013.1223%2014.8038%2013.4251%2014.5389C14.0321%2013.9897%2014.3689%2013.6625%2014.5198%2013.4705C14.8821%2012.9923%2015.0671%2012.4446%2015.0671%2011.8454C15.0671%2011.0185%2014.8075%2010.355%2014.288%209.86441ZM11.7046%2017.8181C11.5666%2017.8181%2011.4546%2017.93%2011.4546%2018.0681V18.659C11.4546%2018.7971%2011.5666%2018.909%2011.7046%2018.909H12.2956C12.4336%2018.909%2012.5456%2018.7971%2012.5456%2018.659V18.0681C12.5456%2017.93%2012.4336%2017.8181%2012.2956%2017.8181H11.7046Z'%20fill='white'/%3e%3c/svg%3e",hW={class:"flex-between"},vW={class:"flex align-center"},mW={class:"line-height-22 mt-4"},yW={class:"flex-between"},gW={class:"flex align-center"},bW={class:"line-height-22 mt-4"},_W={class:"flex-between"},wW={class:"flex align-center"},EW={class:"line-height-22 mt-4"},OW={class:"flex-between"},SW={class:"flex align-center"},xW={class:"line-height-22 mt-4"},AW={class:"dialog-footer"},TW=rr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,u=Ge(!1),c=Ge(!1),v=Ge(""),f=Ge(!1),g=Ge(),b=Ge(),_=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],x=["JPG","JPEG","PNG","GIF"],A=["MP3","WAV","OGG","ACC","M4A"],M=Ge({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function S(j){u.value=!0,Nv(()=>{M.value={...M.value,...j}})}function E(){u.value=!1}const D=j=>{M.value.otherExtensions=M.value.otherExtensions.filter(U=>U!==j)},I=()=>{c.value=!0,Nv(()=>{b.value.input.focus()})},B=()=>{if(v.value){if(v.value=v.value.toUpperCase(),M.value.otherExtensions.includes(v.value)||_.includes(v.value)||x.includes(v.value)||A.includes(v.value)){c.value=!1,v.value="",lI(Ot("common.fileUpload.existingExtensionsTip"));return}M.value.otherExtensions.push(v.value)}c.value=!1,v.value=""};async function $(){const j=g.value;j&&await j.validate().then(()=>{const U=Ne.cloneDeep(M.value);a("refresh",U),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),u.value=!1})}return t({open:S}),(j,U)=>{const K=J("el-slider"),Q=J("el-form-item"),H=J("el-text"),W=J("el-checkbox"),z=J("el-card"),Y=J("el-tag"),q=J("el-input"),oe=J("el-button"),ie=J("el-space"),Pe=J("el-form"),we=J("el-dialog");return Oe(),at(we,{title:j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:u.value,"onUpdate:modelValue":U[16]||(U[16]=be=>u.value=be),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":E,"append-to-body":"",width:"800"},{footer:C(()=>[ee("span",AW,[k(oe,{onClick:nn(E,["prevent"])},{default:C(()=>[ct(_e(j.$t("common.cancel")),1)]),_:1}),k(oe,{type:"primary",onClick:U[15]||(U[15]=be=>$()),loading:f.value},{default:C(()=>[ct(_e(j.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(Pe,{"label-position":"top",ref_key:"fieldFormRef",ref:g,model:M.value,"require-asterisk-position":"right"},{default:C(()=>[k(Q,{label:j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:C(()=>[k(K,{modelValue:M.value.maxFiles,"onUpdate:modelValue":U[0]||(U[0]=be=>M.value.maxFiles=be),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),k(Q,{label:j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:C(()=>[k(K,{modelValue:M.value.fileLimit,"onUpdate:modelValue":U[1]||(U[1]=be=>M.value.fileLimit=be),"show-input":"","show-input-controls":!1,min:1,max:1e3},null,8,["modelValue"])]),_:1},8,["label"]),k(Q,{label:j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:C(()=>[k(z,{shadow:"hover",class:fc(["card-checkbox cursor w-full mb-8",M.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:U[4]||(U[4]=nn(be=>M.value.document=!M.value.document,["stop"]))},{default:C(()=>[ee("div",hW,[ee("div",vW,[U[17]||(U[17]=ee("img",{class:"mr-12",src:cW,alt:""},null,-1)),ee("div",null,[ee("p",mW,[ct(_e(j.$t("common.fileUpload.document"))+" ",1),k(H,{class:"color-secondary"},{default:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),ee("p",null,_e(_.join("、")),1)])]),k(W,{modelValue:M.value.document,"onUpdate:modelValue":U[2]||(U[2]=be=>M.value.document=be),onChange:U[3]||(U[3]=be=>M.value.document=!M.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),k(z,{shadow:"hover",class:fc(["card-checkbox cursor w-full mb-8",M.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:U[7]||(U[7]=nn(be=>M.value.image=!M.value.image,["stop"]))},{default:C(()=>[ee("div",yW,[ee("div",gW,[U[18]||(U[18]=ee("img",{class:"mr-12",src:fW,alt:""},null,-1)),ee("div",null,[ee("p",bW,[ct(_e(j.$t("common.fileUpload.image"))+" ",1),k(H,{class:"color-secondary"},{default:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),ee("p",null,_e(x.join("、")),1)])]),k(W,{modelValue:M.value.image,"onUpdate:modelValue":U[5]||(U[5]=be=>M.value.image=be),onChange:U[6]||(U[6]=be=>M.value.image=!M.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),k(z,{shadow:"hover",class:fc(["card-checkbox cursor w-full mb-8",M.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:U[10]||(U[10]=nn(be=>M.value.audio=!M.value.audio,["stop"]))},{default:C(()=>[ee("div",_W,[ee("div",wW,[U[19]||(U[19]=ee("img",{class:"mr-12",src:dW,alt:""},null,-1)),ee("div",null,[ee("p",EW,[ct(_e(j.$t("common.fileUpload.audio"))+" ",1),k(H,{class:"color-secondary"},{default:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),ee("p",null,_e(A.join("、")),1)])]),k(W,{modelValue:M.value.audio,"onUpdate:modelValue":U[8]||(U[8]=be=>M.value.audio=be),onChange:U[9]||(U[9]=be=>M.value.audio=!M.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),k(z,{shadow:"hover",class:fc(["card-checkbox cursor w-full mb-8",M.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:U[14]||(U[14]=nn(be=>M.value.other=!M.value.other,["stop"]))},{default:C(()=>[ee("div",OW,[ee("div",SW,[U[20]||(U[20]=ee("img",{class:"mr-12",width:32,src:pW,alt:""},null,-1)),ee("div",null,[ee("p",xW,[ct(_e(j.$t("common.fileUpload.other"))+" ",1),k(H,{class:"color-secondary"},{default:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),k(ie,{wrap:"",size:2,class:"mt-4"},{default:C(()=>[(Oe(!0),en(Or,null,io(M.value.otherExtensions,be=>(Oe(),at(Y,{key:be,closable:"","disable-transitions":!1,onClose:ye=>D(be),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:C(()=>[ct(_e(be),1)]),_:2},1032,["onClose"]))),128)),c.value?(Oe(),at(q,{key:0,ref_key:"InputRef",ref:b,modelValue:v.value,"onUpdate:modelValue":U[11]||(U[11]=be=>v.value=be),size:"small",onKeyup:aI(B,["enter"]),onBlur:B},null,8,["modelValue"])):(Oe(),at(oe,{key:1,class:"button-new-tag",size:"small",onClick:nn(I,["stop"])},{default:C(()=>[ct(" + "+_e(j.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),k(W,{modelValue:M.value.other,"onUpdate:modelValue":U[12]||(U[12]=be=>M.value.other=be),onChange:U[13]||(U[13]=be=>M.value.other=!M.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),MW={class:"dialog-footer"},kW=rr({__name:"ChatFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge(!1),c=Ge(!1),v=Ge(null),f=Ge({field:"",label:""}),g=ch({label:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:Ot("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=Ge(!1),_=(M,S)=>{M&&(f.value=Ne.cloneDeep(M),c.value=!0,v.value=S),b.value=!0},x=()=>{b.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},A=async M=>{M&&await M.validate(S=>{S&&a("refresh",f.value,v.value)})};return t({open:_,close:x}),(M,S)=>{const E=J("el-input"),D=J("el-form-item"),I=J("el-form"),B=J("el-button"),$=J("el-dialog");return Oe(),at($,{title:c.value?M.$t("common.param.editParam"):M.$t("common.param.addParam"),modelValue:b.value,"onUpdate:modelValue":S[3]||(S[3]=j=>b.value=j),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:C(()=>[ee("span",MW,[k(B,{onClick:nn(x,["prevent"])},{default:C(()=>[ct(_e(M.$t("common.cancel")),1)]),_:1}),k(B,{type:"primary",onClick:S[2]||(S[2]=j=>A(r.value)),loading:u.value},{default:C(()=>[ct(_e(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(I,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right"},{default:C(()=>[k(D,{label:M.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:g.field},{default:C(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":S[0]||(S[0]=j=>f.value.field=j),maxlength:64,placeholder:M.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:C(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":S[1]||(S[1]=j=>f.value.label=j),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),PW={class:"flex-between mb-16"},NW={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},RW={class:"ml-4"},CW=["title"],DW=["title"],jW={class:"mr-4"},IW=rr({__name:"ChatFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(),r=Ge([]);function u(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}function v(f,g){for(let b=0;b<r.value.length;b++)if(r.value[b].field===f.field&&g!==b){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}return Hr(()=>{t.nodeModel.properties.chat_input_field_list&&(r.value=Ne.cloneDeep(t.nodeModel.properties.chat_input_field_list)),Ne.set(t.nodeModel.properties,"chat_input_field_list",r)}),(f,g)=>{var S;const b=J("AppIcon"),_=J("el-button"),x=J("el-table-column"),A=J("el-tooltip"),M=J("el-table");return Oe(),en(Or,null,[ee("div",PW,[ee("h5",NW,_e(f.$t("views.applicationWorkflow.variable.chat")),1),ee("div",null,[ee("span",RW,[k(_,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>u())},{default:C(()=>[k(b,{iconName:"app-add-outlined",class:"mr-4"}),ct(" "+_e(f.$t("common.add")),1)]),_:1})])])]),((S=t.nodeModel.properties.chat_input_field_list)==null?void 0:S.length)>0?(Oe(),at(M,{key:0,data:t.nodeModel.properties.chat_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:C(()=>[k(x,{prop:"field",label:f.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:C(({row:E})=>[ee("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,CW)]),_:1},8,["label"]),k(x,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:E})=>[ee("span",null,[ee("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,DW)])]),_:1},8,["label"]),k(x,{label:f.$t("common.operation"),align:"left",width:"90"},{default:C(({row:E,$index:D})=>[ee("span",jW,[k(A,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:C(()=>[k(_,{type:"primary",text:"",onClick:nn(I=>u(E,D),["stop"])},{default:C(()=>[k(b,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(A,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:C(()=>[k(_,{type:"primary",text:"",onClick:I=>c(D)},{default:C(()=>[k(b,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(kW,{ref_key:"ChatFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),LW={class:"flex-between"},FW={class:"flex align-center"},$W={class:"mr-4"},UW={class:"flex-between"},BW={class:"mr-4"},VW={class:"flex"},WW={class:"flex-between"},GW={class:"mr-4"},zW={class:"flex"},HW={class:"w-full"},XW={class:"flex-between w-full"},qW=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ge(null),v=Ge(null),f=Ge(),g=Ge(),b=Ge(),_=Ge(),x={name:"",desc:"",prologue:Ot("views.application.form.defaultPrologue")},A=q=>q.ctrlKey===!0?(q.preventDefault(),!0):(q.stopPropagation(),!0);function M(q){Ne.set(u.nodeModel.properties.nodeData,"prologue",q)}const S=Zn({get:()=>(u.nodeModel.properties.nodeData||Ne.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:q=>{Ne.set(u.nodeModel.properties,"nodeData",q)}}),E=Ge(),D=()=>{var q;return S.value.ttsModelEnable&&!S.value.ttsModelId&&S.value.ttsType==="TTS"?Promise.reject({node:u.nodeModel,errMessage:Ot("views.application.form.voicePlay.requiredMessage")}):S.value.sttModelEnable&&!S.value.sttModelId?Promise.reject({node:u.nodeModel,errMessage:Ot("views.application.form.voiceInput.requiredMessage")}):(q=E.value)==null?void 0:q.validate().catch(oe=>Promise.reject({node:u.nodeModel,errMessage:oe}))},I=t();function B(){var oe;const q=r.value==="systemManage"?{modelType:"STT",workspaceId:(oe=I.value)==null?void 0:oe.workspaceId}:{modelType:"STT"};So({type:"model",systemType:r.value}).getSelectModelList(q).then(ie=>{c.value=Ne.groupBy(ie==null?void 0:ie.data,"provider")})}function $(){var oe;const q=r.value==="systemManage"?{modelType:"TTS",workspaceId:(oe=I.value)==null?void 0:oe.workspaceId}:{modelType:"TTS"};So({type:"model",systemType:r.value}).getSelectModelList(q).then(ie=>{v.value=Ne.groupBy(ie==null?void 0:ie.data,"provider")})}function j(){Nv(()=>{var q;S.value.ttsModelId?(q=f.value)==null||q.reset_default(S.value.ttsModelId,a):H({})})}function U(){S.value.ttsModelEnable||(S.value.ttsModelId="",S.value.ttsType="BROWSER")}function K(){S.value.sttModelEnable||(S.value.sttModelId="")}const Q=()=>{var oe;const q=S.value.ttsModelId;if(!q){zd(Ot("views.application.form.voicePlay.requiredMessage"));return}(oe=f.value)==null||oe.open(q,a,S.value.ttsModelParamsSetting)},H=q=>{S.value.ttsModelParamsSetting=q},W=()=>{const q={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["ppt","doc"]};S.value.fileUploadEnable&&(S.value.fileUploadSetting=S.value.fileUploadSetting||q),u.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},z=()=>{var q;(q=_.value)==null||q.open(S.value.fileUploadSetting)},Y=q=>{S.value.fileUploadSetting=q};return Hr(()=>{Ne.set(u.nodeModel,"validate",D),u.nodeModel.properties.nodeData.ttsType||Ne.set(u.nodeModel.properties.nodeData,"ttsType","BROWSER"),$(),B()}),(q,oe)=>{const ie=J("el-input"),Pe=J("el-form-item"),we=J("el-tooltip"),be=J("el-button"),ye=J("el-switch"),Xe=J("el-checkbox"),Ze=J("el-radio"),yt=J("el-radio-group"),Be=J("Operation"),qt=J("el-icon"),Yt=J("el-form");return Oe(),at(Ho,{nodeModel:q.nodeModel},{default:C(()=>[k(Yt,{onSubmit:oe[13]||(oe[13]=nn(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:E},{default:C(()=>[k(Pe,{label:q.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:sr(Ot)("views.application.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[k(ie,{modelValue:S.value.name,"onUpdate:modelValue":oe[0]||(oe[0]=Pt=>S.value.name=Pt),maxlength:"64",placeholder:sr(Ot)("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:oe[1]||(oe[1]=Pt=>{var An;return S.value.name=(An=S.value.name)==null?void 0:An.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(Pe,{label:q.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:C(()=>[k(ie,{modelValue:S.value.desc,"onUpdate:modelValue":oe[2]||(oe[2]=Pt=>S.value.desc=Pt),placeholder:q.$t("views.application.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(Pe,{label:q.$t("views.application.form.prologue")},{default:C(()=>[k(pc,{onWheel:A,title:q.$t("views.application.form.prologue"),modelValue:S.value.prologue,"onUpdate:modelValue":oe[3]||(oe[3]=Pt=>S.value.prologue=Pt),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label"]),k(Pe,null,{label:C(()=>[ee("div",LW,[ee("div",FW,[ee("span",$W,_e(q.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),k(we,{effect:"dark",content:q.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),ee("div",null,[S.value.fileUploadEnable?(Oe(),at(be,{key:0,type:"primary",link:"",onClick:z,class:"mr-4"},{default:C(()=>[k(yo,{iconName:"app-setting",class:"mr-4"})]),_:1})):kn("",!0),k(ye,{size:"small",modelValue:S.value.fileUploadEnable,"onUpdate:modelValue":oe[4]||(oe[4]=Pt=>S.value.fileUploadEnable=Pt),onChange:W},null,8,["modelValue"])])])]),_:1}),k(sW,{ref_key:"UserInputFieldTableFef",ref:g,"node-model":q.nodeModel},null,8,["node-model"]),k(qV,{ref_key:"ApiInputFieldTableFef",ref:b,"node-model":q.nodeModel},null,8,["node-model"]),k(IW,{ref:"ChatFieldTeble","node-model":q.nodeModel},null,8,["node-model"]),k(Pe,null,{label:C(()=>[ee("div",UW,[ee("span",BW,_e(q.$t("views.application.form.voiceInput.label")),1),ee("div",VW,[S.value.sttModelEnable?(Oe(),at(Xe,{key:0,modelValue:S.value.sttAutoSend,"onUpdate:modelValue":oe[5]||(oe[5]=Pt=>S.value.sttAutoSend=Pt)},{default:C(()=>[ct(_e(q.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):kn("",!0),k(ye,{class:"ml-8",size:"small",modelValue:S.value.sttModelEnable,"onUpdate:modelValue":oe[6]||(oe[6]=Pt=>S.value.sttModelEnable=Pt),onChange:K},null,8,["modelValue"])])])]),default:C(()=>[za(k(th,{onWheel:A,modelValue:S.value.sttModelId,"onUpdate:modelValue":oe[7]||(oe[7]=Pt=>S.value.sttModelId=Pt),placeholder:q.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[Qp,S.value.sttModelEnable]])]),_:1}),k(Pe,null,{label:C(()=>[ee("div",WW,[ee("span",GW,_e(q.$t("views.application.form.voicePlay.label")),1),ee("div",zW,[S.value.ttsModelEnable?(Oe(),at(Xe,{key:0,modelValue:S.value.ttsAutoplay,"onUpdate:modelValue":oe[8]||(oe[8]=Pt=>S.value.ttsAutoplay=Pt)},{default:C(()=>[ct(_e(q.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):kn("",!0),k(ye,{class:"ml-8",size:"small",modelValue:S.value.ttsModelEnable,"onUpdate:modelValue":oe[9]||(oe[9]=Pt=>S.value.ttsModelEnable=Pt),onChange:U},null,8,["modelValue"])])])]),default:C(()=>[ee("div",HW,[za(k(yt,{modelValue:S.value.ttsType,"onUpdate:modelValue":oe[10]||(oe[10]=Pt=>S.value.ttsType=Pt)},{default:C(()=>[k(Ze,{label:q.$t("views.application.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),k(Ze,{label:q.$t("views.application.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[Qp,S.value.ttsModelEnable]])]),ee("div",XW,[S.value.ttsType==="TTS"&&S.value.ttsModelEnable?(Oe(),at(th,{key:0,onWheel:A,modelValue:S.value.ttsModelId,"onUpdate:modelValue":oe[11]||(oe[11]=Pt=>S.value.ttsModelId=Pt),placeholder:q.$t("views.application.form.voicePlay.placeholder"),options:v.value,onChange:oe[12]||(oe[12]=Pt=>j()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):kn("",!0),S.value.ttsType==="TTS"&&S.value.ttsModelEnable?(Oe(),at(be,{key:1,onClick:Q,disabled:!S.value.ttsModelId,class:"ml-8"},{default:C(()=>[k(qt,null,{default:C(()=>[k(qt,null,{default:C(()=>[k(Be)]),_:1})]),_:1})]),_:1},8,["disabled"])):kn("",!0)])]),_:1})]),_:1},8,["model"]),k(oM,{ref_key:"TTSModeParamSettingDialogRef",ref:f,onRefresh:H},null,512),k(TW,{ref_key:"FileUploadSettingDialogRef",ref:_,"node-model":q.nodeModel,onRefresh:Y},null,8,["node-model"])]),_:1},8,["nodeModel"])}}}),YW=Yd(qW,[["__scopeId","data-v-9868f90e"]]);class KW extends Xo{constructor(t){super(t,YW)}}class ZW extends qo{constructor(t,n){super(t,n)}get_width(){return 600}}const JW={type:"base-node",model:ZW,view:KW},QW=Object.freeze(Object.defineProperty({__proto__:null,default:JW},Symbol.toStringTag,{value:"Module"})),eG={class:"handle flex-between lighter"},tG={class:"flex align-center"},nG={key:0,class:"info"},rG={key:0,class:"mt-8"},oG=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:fl(),type:"IF",condition:"and"},{conditions:[],id:fl(),type:"ELSE",condition:"and"}]},a=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r=(S,E,D)=>{const B=Ne.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map($=>$.id===E.id?{...$,height:S.height,index:D}:$);Ne.set(t.nodeModel.properties,"branch_condition_list",B),_(t.nodeModel.properties.nodeData.branch,!0)},u=Zn({get:()=>(t.nodeModel.properties.nodeData||(Ne.set(t.nodeModel.properties,"nodeData",n),_(n.branch,!0)),t.nodeModel.properties.nodeData),set:S=>{Ne.set(t.nodeModel.properties,"nodeData",S)}}),c=Ge(),v=Ge(),f=()=>{var E;const S=[(E=c.value)==null?void 0:E.validate(),...v.value.map(D=>D.validate())];return Promise.all(S).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};function g(S){const{oldIndex:E,newIndex:D}=S;if(E===void 0||D===void 0)return;const I=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch);if(E===I.length-1||D===I.length-1)return;const B={...I[E],type:I[D].type,id:I[D].id},$={...I[D],type:I[E].type,id:I[E].id};I[D]=B,I[E]=$,Ne.set(t.nodeModel.properties.nodeData,"branch",I)}function b(){const S=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch),E={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(S.length-1),id:fl(),condition:"and"};S.splice(S.length-1,0,E),_(S,!0),Ne.set(t.nodeModel.properties.nodeData,"branch",S)}function _(S,E){const D=Ne.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),I=S.map((B,$)=>{const j=D.find(U=>U.id===B.id);if(j)return{index:$,height:j.height,id:B.id};if(E)return{index:$,height:12,id:B.id}}).filter(B=>B);Ne.set(t.nodeModel.properties,"branch_condition_list",I),t.nodeModel.refreshBranch()}function x(S){const E=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch);E[S].conditions.push({field:[],compare:"",value:""}),Ne.set(t.nodeModel.properties.nodeData,"branch",E)}function A(S,E){const D=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch);if(D[S].conditions.splice(E,1),D[S].conditions.length===0){const B=D.splice(S,1).map($=>t.nodeModel.id+"_"+$.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter($=>B.includes($.sourceAnchorId)).map($=>$.id)),_(D,!1),D.forEach(($,j)=>{$.type==="ELSE IF "+(j+1)&&($.type="ELSE IF "+j)})}Ne.set(t.nodeModel.properties.nodeData,"branch",D)}function M(S,E,D){if(["is_null","is_not_null","is_true","is_not_true"].includes(S)){const I=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch);I[E].conditions[D].value=1,Ne.set(t.nodeModel.properties.nodeData,"branch",I)}}return Hr(()=>{Ne.set(t.nodeModel,"validate",f)}),(S,E)=>{const D=J("el-option"),I=J("el-select"),B=J("el-form-item"),$=J("el-col"),j=J("el-input"),U=J("AppIcon"),K=J("el-button"),Q=J("el-row"),H=J("Plus"),W=J("el-icon"),z=J("el-card"),Y=J("el-form"),q=eh("resize");return Oe(),at(Ho,{nodeModel:S.nodeModel},{default:C(()=>[k(Y,{model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:E[0]||(E[0]=nn(()=>{},["prevent"]))},{default:C(()=>[k(sr(KI),{ref:"el",modelValue:u.value.branch,disabled:u.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:g},{default:C(()=>[(Oe(!0),en(Or,null,io(u.value.branch,(oe,ie)=>za((Oe(),at(z,{key:oe.id,shadow:"never",class:fc(["drag-card card-never mb-8",{"no-drag":ie===u.value.branch.length-1||u.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:C(()=>[ee("div",eG,[ee("span",tG,[E[1]||(E[1]=ee("img",{src:ZI,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),ct(" "+_e(oe.type),1)]),oe.conditions.length>1?(Oe(),en("div",nG,[ee("span",null,_e(S.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),k(I,{teleported:!1,modelValue:oe.condition,"onUpdate:modelValue":Pe=>oe.condition=Pe,size:"small",style:{width:"60px",margin:"0 8px"}},{default:C(()=>[k(D,{label:S.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),k(D,{label:S.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),ee("span",null,_e(S.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):kn("",!0)]),ie!==u.value.branch.length-1?(Oe(),en("div",rG,[(Oe(!0),en(Or,null,io(oe.conditions,(Pe,we)=>(Oe(),at(Q,{key:we,gutter:8},{default:C(()=>[k($,{span:11},{default:C(()=>[k(B,{prop:"branch."+ie+".conditions."+we+".field",rules:{type:"array",required:!0,message:S.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:C(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Pe.field,"onUpdate:modelValue":be=>Pe.field=be},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k($,{span:6},{default:C(()=>[k(B,{prop:"branch."+ie+".conditions."+we+".compare",rules:{required:!0,message:S.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:C(()=>[k(I,{onWheel:a,teleported:!1,modelValue:Pe.compare,"onUpdate:modelValue":be=>Pe.compare=be,placeholder:S.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:be=>M(be,ie,we)},{default:C(()=>[(Oe(!0),en(Or,null,io(sr(bI),(be,ye)=>(Oe(),at(D,{key:ye,label:be.label,value:be.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),k($,{span:6},{default:C(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(Pe.compare)?kn("",!0):(Oe(),at(B,{key:0,prop:"branch."+ie+".conditions."+we+".value",rules:{required:!0,message:S.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:C(()=>[k(j,{modelValue:Pe.value,"onUpdate:modelValue":be=>Pe.value=be,placeholder:S.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),k($,{span:1},{default:C(()=>[k(K,{disabled:ie===0&&we===0,link:"",type:"info",class:"mt-4",onClick:be=>A(ie,we)},{default:C(()=>[k(U,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):kn("",!0),ie!==u.value.branch.length-1?(Oe(),at(K,{key:1,link:"",type:"primary",onClick:Pe=>x(ie)},{default:C(()=>[k(W,{class:"mr-4"},{default:C(()=>[k(H)]),_:1}),ct(" "+_e(S.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):kn("",!0)]),_:2},1032,["class"])),[[q,Pe=>r(Pe,oe,ie)]])),128))]),_:1},8,["modelValue","disabled"]),k(K,{link:"",type:"primary",onClick:b},{default:C(()=>[k(W,{class:"mr-4"},{default:C(()=>[k(H)]),_:1}),ct(" "+_e(S.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}}),iG=Yd(oG,[["__scopeId","data-v-05396cf6"]]);class aG extends Xo{constructor(t){super(t,iG)}}const lG=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class uG extends qo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=lG(c,g);f.push({x:n+r/2-10,y:v?a-u/2+75+_+b.height/2:a-15,id:`${t}_${b.id}_right`,type:"right"})}return f}}const sG={type:"condition-node",model:uG,view:aG},cG=Object.freeze(Object.defineProperty({__proto__:null,default:sG},Symbol.toStringTag,{value:"Module"})),fG={class:"flex-between"},dG={class:"mr-4"},pG={class:"flex-between"},hG={class:"flex-between"},vG={class:"flex-between"},mG={class:"flex-between"},yG={class:"flex-between"},gG={class:"flex-between"},bG=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=f=>f.ctrlKey===!0?(f.preventDefault(),!0):(f.stopPropagation(),!0),a={databaseTypeType:"content",databaseType:"mysql",databaseTypeReference:[],hostType:"content",host:"",hostReference:[],portType:"content",port:3306,portReference:[],databaseNameType:"content",databaseName:"",databaseNameReference:[],usernameType:"content",username:"",usernameReference:[],passwordType:"content",password:"",passwordReference:[],sqlType:"content",sql:"",sqlReference:[],isResult:!1},r=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:f=>{Ne.set(t.nodeModel.properties,"nodeData",f)}}),u=Ge(),c=Ge(),v=()=>{var f;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(f=u.value)==null?void 0:f.validate()]).catch(g=>Promise.reject({node:t.nodeModel,errMessage:g}))};return Hr(()=>{var f;typeof((f=t.nodeModel.properties.nodeData)==null?void 0:f.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),Ne.set(t.nodeModel,"validate",v)}),(f,g)=>{const b=J("el-option"),_=J("el-select"),x=J("el-form-item"),A=J("el-input"),M=J("el-form"),S=J("el-card");return Oe(),at(Ho,{nodeModel:f.nodeModel},{default:C(()=>[k(S,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(M,{onSubmit:g[21]||(g[21]=nn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"databaseNodeFormRef",ref:u},{default:C(()=>[k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")},{label:C(()=>[ee("div",fG,[ee("div",dG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")),1)]),k(_,{teleported:!1,modelValue:r.value.databaseTypeType,"onUpdate:modelValue":g[0]||(g[0]=E=>r.value.databaseTypeType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.databaseTypeType==="content"?(Oe(),at(_,{key:0,teleported:!1,modelValue:r.value.databaseType,"onUpdate:modelValue":g[1]||(g[1]=E=>r.value.databaseType=E),size:"small"},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.mysql"),value:"mysql"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.postgresql"),value:"postgresql"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.sqlserver"),value:"sqlserver"},null,8,["label"])]),_:1},8,["modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseTypeReference,"onUpdate:modelValue":g[2]||(g[2]=E=>r.value.databaseTypeReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.host.label")},{label:C(()=>[ee("div",pG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.host.label")),1),k(_,{teleported:!1,modelValue:r.value.hostType,"onUpdate:modelValue":g[3]||(g[3]=E=>r.value.hostType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.hostType==="content"?(Oe(),at(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.host.placeholder"),"show-word-limit":"",modelValue:r.value.host,"onUpdate:modelValue":g[4]||(g[4]=E=>r.value.host=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.hostReference,"onUpdate:modelValue":g[5]||(g[5]=E=>r.value.hostReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.port.label")},{label:C(()=>[ee("div",hG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.port.label")),1),k(_,{teleported:!1,modelValue:r.value.portType,"onUpdate:modelValue":g[6]||(g[6]=E=>r.value.portType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.portType==="content"?(Oe(),at(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.port.placeholder"),"show-word-limit":"",modelValue:r.value.port,"onUpdate:modelValue":g[7]||(g[7]=E=>r.value.port=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.portReference,"onUpdate:modelValue":g[8]||(g[8]=E=>r.value.portReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")},{label:C(()=>[ee("div",vG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")),1),k(_,{teleported:!1,modelValue:r.value.databaseNameType,"onUpdate:modelValue":g[9]||(g[9]=E=>r.value.databaseNameType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.databaseNameType==="content"?(Oe(),at(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.placeholder"),"show-word-limit":"",modelValue:r.value.databaseName,"onUpdate:modelValue":g[10]||(g[10]=E=>r.value.databaseName=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseNameReference,"onUpdate:modelValue":g[11]||(g[11]=E=>r.value.databaseNameReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.username.label")},{label:C(()=>[ee("div",mG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.username.label")),1),k(_,{teleported:!1,modelValue:r.value.usernameType,"onUpdate:modelValue":g[12]||(g[12]=E=>r.value.usernameType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.usernameType==="content"?(Oe(),at(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.username.placeholder"),"show-word-limit":"",modelValue:r.value.username,"onUpdate:modelValue":g[13]||(g[13]=E=>r.value.username=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.usernameReference,"onUpdate:modelValue":g[14]||(g[14]=E=>r.value.usernameReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.password.label")},{label:C(()=>[ee("div",yG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.password.label")),1),k(_,{teleported:!1,modelValue:r.value.passwordType,"onUpdate:modelValue":g[15]||(g[15]=E=>r.value.passwordType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.passwordType==="content"?(Oe(),at(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.password.placeholder"),"show-word-limit":"",modelValue:r.value.password,"onUpdate:modelValue":g[16]||(g[16]=E=>r.value.password=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.passwordReference,"onUpdate:modelValue":g[17]||(g[17]=E=>r.value.passwordReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(x,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")},{label:C(()=>[ee("div",gG,[ee("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")),1),k(_,{teleported:!1,modelValue:r.value.sqlType,"onUpdate:modelValue":g[18]||(g[18]=E=>r.value.sqlType=E),size:"small",style:{width:"85px"}},{default:C(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.sqlType==="content"?(Oe(),at(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.sql.placeholder"),"show-word-limit":"",modelValue:r.value.sql,"onUpdate:modelValue":g[19]||(g[19]=E=>r.value.sql=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.sqlReference,"onUpdate:modelValue":g[20]||(g[20]=E=>r.value.sqlReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class _G extends Xo{constructor(t){super(t,bG)}}const wG={type:"database-node",model:qo,view:_G},EG=Object.freeze(Object.defineProperty({__proto__:null,default:wG},Symbol.toStringTag,{value:"Module"})),OG={class:"title-decoration-1 mb-8"},SG=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},a=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{Ne.set(t.nodeModel.properties,"nodeData",r)}});return(r,u)=>{const c=J("el-form-item"),v=J("el-form"),f=J("el-card");return Oe(),at(Ho,{nodeModel:r.nodeModel},{default:C(()=>[ee("h5",OG,_e(r.$t("views.applicationWorkflow.nodeSetting")),1),k(f,{shadow:"never",class:"card-never"},{default:C(()=>[k(v,{onSubmit:u[1]||(u[1]=nn(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:C(()=>[k(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:C(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.chatLog.documentPlaceholder"),modelValue:a.value.documentList,"onUpdate:modelValue":u[0]||(u[0]=g=>a.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let xG=class extends Xo{constructor(t){super(t,SG)}};const AG={type:"document-extract-node",model:qo,view:xG},TG=Object.freeze(Object.defineProperty({__proto__:null,default:AG},Symbol.toStringTag,{value:"Module"})),MG={class:"dialog-footer"},kG=rr({__name:"AddFormCollect",props:{title:{default:Ot("common.param.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Ge(!1),u=Ge(),c=Ge({}),v=Ge(!1),f=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var _;(_=u.value)==null||_.validate().then(()=>{var x;a.addFormField((x=u.value)==null?void 0:x.getData()),g()})};return t({close:g,open:f}),(_,x)=>{const A=J("el-button"),M=J("el-dialog");return Oe(),at(M,{title:_.title,modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=S=>r.value=S),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:C(()=>[ee("span",MG,[k(A,{onClick:x[1]||(x[1]=nn(S=>r.value=!1,["prevent"]))},{default:C(()=>[ct(_e(_.$t("common.cancel")),1)]),_:1}),k(A,{type:"primary",onClick:x[2]||(x[2]=S=>b()),loading:v.value},{default:C(()=>[ct(_e(_.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(rE,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=S=>c.value=S),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:u},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),PG={class:"dialog-footer"},NG=rr({__name:"EditFormCollect",props:{title:{default:Ot("common.param.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Ge(!1),u=Ge(),c=Ge({}),v=Ge(0),f=Ge(!1),g=(x,A)=>{r.value=!0,c.value=x,v.value=A},b=()=>{r.value=!1,c.value={}},_=()=>{var x;(x=u.value)==null||x.validate().then(()=>{var A;a.editFormField((A=u.value)==null?void 0:A.getData(),v.value),b()})};return t({close:b,open:g}),(x,A)=>{const M=J("el-button"),S=J("el-dialog");return Oe(),at(S,{title:x.title,modelValue:r.value,"onUpdate:modelValue":A[3]||(A[3]=E=>r.value=E),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:C(()=>[ee("span",PG,[k(M,{onClick:A[1]||(A[1]=nn(E=>r.value=!1,["prevent"]))},{default:C(()=>[ct(_e(x.$t("common.cancel")),1)]),_:1}),k(M,{type:"primary",onClick:A[2]||(A[2]=E=>_()),loading:f.value},{default:C(()=>[ct(_e(x.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(rE,{modelValue:c.value,"onUpdate:modelValue":A[0]||(A[0]=E=>c.value=E),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:u},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),RG={class:"title-decoration-1 mb-8"},CG={class:"flex align-center"},DG={class:"mr-4"},jG={class:"flex-between"},IG={class:"lighter"},LG=["title"],FG={key:0},$G=["title"],UG={key:1},BG=["title"],VG=["title"],WG={class:"mr-4"},GG=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(),r=(I,B)=>{const $=A.value.form_field_list.map((j,U)=>B===U?Ne.cloneDeep(I):Ne.cloneDeep(j));A.value.form_field_list=$,c()},u=I=>{if(A.value.form_field_list.some(B=>B.field===I.field)){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+I.field);return}A.value.form_field_list=Ne.cloneDeep([...A.value.form_field_list,I]),c()},c=()=>{const I=[{label:Ot("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...A.value.form_field_list.map(B=>({value:B.field,label:typeof B.label=="string"?B.label:B.label.label}))];Ne.set(t.nodeModel.properties.config,"fields",I),t.nodeModel.clear_next_node_field(!1),D()},v=Ge(),f=Ge(),g=()=>{var I;(I=v.value)==null||I.open()},b=(I,B)=>{var $;($=f.value)==null||$.open(Ne.cloneDeep(I),B)},_=I=>{A.value.form_field_list=A.value.form_field_list.filter(B=>B.field!==I.field),c()},x=Ge({isResult:!0,form_content_format:`${Ot("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Ot("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),A=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",x.value),t.nodeModel.properties.nodeData),set:I=>{Ne.set(t.nodeModel.properties,"nodeData",I)}}),M=I=>{var B;if(I.default_value){const $=(B=I.option_list)==null?void 0:B.filter(j=>I.default_value.indexOf(j.value)>-1).map(j=>j.label).join(",");return $||I.default_value}if(I.default_value!==void 0)return I.default_value},S=()=>{var I;return(I=n.value)==null?void 0:I.validate()};function E(I){Ne.set(t.nodeModel.properties.nodeData,"form_content_format",I)}function D(){if(!a.value)return;const B=a.value.$el.querySelector(".el-table__body-wrapper tbody");B&&yr.create(B,{animation:150,ghostClass:"ghost-row",onEnd:$=>{if($.oldIndex===void 0||$.newIndex===void 0)return;const j=[...A.value.form_field_list],[U]=j.splice($.oldIndex,1);j.splice($.newIndex,0,U),A.value.form_field_list=j,c()}})}return Hr(()=>{Ne.set(t.nodeModel,"validate",S),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(I,B)=>{const $=J("AppIcon"),j=J("el-tooltip"),U=J("MdEditorMagnify"),K=J("el-form-item"),Q=J("Plus"),H=J("el-icon"),W=J("el-button"),z=J("el-table-column"),Y=J("el-tag"),q=J("el-switch"),oe=J("el-table"),ie=J("el-form"),Pe=J("el-card");return Oe(),at(Ho,{nodeModel:I.nodeModel},{default:C(()=>[ee("h5",RG,_e(I.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(ie,{onSubmit:B[4]||(B[4]=nn(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:C(()=>[k(K,{label:I.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:I.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:C(()=>[ee("div",CG,[ee("div",DG,[ee("span",null,[ct(_e(I.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),B[5]||(B[5]=ee("span",{class:"color-danger"},"*",-1))])]),k(j,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(I.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:C(()=>[k($,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(U,{title:I.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:A.value.form_content_format,"onUpdate:modelValue":B[0]||(B[0]=we=>A.value.form_content_format=we),style:{height:"150px"},onSubmitDialog:E},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(K,{label:I.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:B[3]||(B[3]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",jG,[ee("h5",IG,_e(I.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),k(W,{link:"",type:"primary",onClick:B[1]||(B[1]=we=>g())},{default:C(()=>[k(H,{class:"mr-4"},{default:C(()=>[k(Q)]),_:1}),ct(" "+_e(I.$t("common.add")),1)]),_:1})])]),default:C(()=>[A.value.form_field_list.length>0?(Oe(),at(oe,{key:0,class:"border",data:A.value.form_field_list,ref_key:"tableRef",ref:a,"row-key":"field"},{default:C(()=>[k(z,{prop:"field",label:I.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:C(({row:we})=>[ee("span",{title:we.field,class:"ellipsis-1"},_e(we.field),9,LG)]),_:1},8,["label"]),k(z,{prop:"label",label:I.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:we})=>[we.label&&we.label.input_type==="TooltipLabel"?(Oe(),en("span",FG,[ee("span",{title:we.label.label,class:"ellipsis-1"},_e(we.label.label),9,$G)])):(Oe(),en("span",UG,[ee("span",{title:we.label,class:"ellipsis-1"},_e(we.label),9,BG)]))]),_:1},8,["label"]),k(z,{label:I.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:C(({row:we})=>[k(Y,{type:"info",class:"info-tag"},{default:C(()=>{var be;return[ct(_e((be=sr(uI).find(ye=>ye.value===we.input_type))==null?void 0:be.label),1)]}),_:2},1024)]),_:1},8,["label"]),k(z,{prop:"default_value",label:I.$t("dynamicsForm.default.label")},{default:C(({row:we})=>[ee("span",{title:we.default_value,class:"ellipsis-1"},_e(M(we)),9,VG)]),_:1},8,["label"]),k(z,{label:I.$t("common.required"),width:"85"},{default:C(({row:we})=>[ee("div",{onClick:B[2]||(B[2]=nn(()=>{},["stop"]))},[k(q,{disabled:"",size:"small",modelValue:we.required,"onUpdate:modelValue":be=>we.required=be},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(z,{label:I.$t("common.operation"),align:"left",width:"90"},{default:C(({row:we,$index:be})=>[ee("span",WG,[k(j,{effect:"dark",content:I.$t("common.modify"),placement:"top"},{default:C(()=>[k(W,{type:"primary",text:"",onClick:nn(ye=>b(we,be),["stop"])},{default:C(()=>[k($,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(j,{effect:"dark",content:I.$t("common.delete"),placement:"top"},{default:C(()=>[k(W,{type:"primary",text:"",onClick:ye=>_(we)},{default:C(()=>[k($,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(kG,{ref_key:"addFormCollectRef",ref:v,addFormField:u},null,512),k(NG,{ref_key:"editFormCollectRef",ref:f,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class zG extends Xo{constructor(t){super(t,GG)}}const HG={type:"form-node",model:qo,view:zG},XG=Object.freeze(Object.defineProperty({__proto__:null,default:HG},Symbol.toStringTag,{value:"Module"})),qG={class:"title-decoration-1 mb-8"},YG={class:"flex-between mb-8"},KG={class:"lighter"},ZG={class:"flex w-full"},JG={class:"flex-between mb-8"},QG={class:"lighter"},ez={class:"flex-between mb-8"},tz={class:"lighter"},nz=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],u=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),c=Ge({activeTab:"params",method:"GET",url:"",timeout:30,headers:[{}],params:[{}],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),v=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:x=>{Ne.set(t.nodeModel.properties,"nodeData",x)}}),f=()=>{var x;return(x=n.value)==null?void 0:x.validate()},g=()=>{const x=v.value.activeTab,A=v.value.contentType,M={...v.value};x==="params"?M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]):x==="headers"?M.headers[v.value.headers.length-1].name.trim()!==""&&(M.headers=[...M.headers||[],{name:"",value:""}]):x==="body"&&["form-data","x-www-form-urlencoded"].includes(A)&&M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]),v.value=M};function b(x){const A=v.value.activeTab,M=v.value.contentType,S={...v.value};A==="params"?S.params=(S.params||[]).filter((E,D)=>D!==x):A==="headers"?S.headers=(S.headers||[]).filter((E,D)=>D!==x):A==="body"&&["form-data","x-www-form-urlencoded"].includes(M)&&(S.params=(S.params||[]).filter((E,D)=>D!==x)),v.value=S}function _(x){Ne.set(t.nodeModel.properties.nodeData,"body",x)}return Hr(()=>{Ne.set(t.nodeModel,"validate",f),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(x,A)=>{const M=J("el-option"),S=J("el-select"),E=J("el-input"),D=J("el-form-item"),I=J("el-input-number"),B=J("el-table-column"),$=J("Delete"),j=J("el-icon"),U=J("el-button"),K=J("el-tooltip"),Q=J("el-table"),H=J("el-tab-pane"),W=J("el-radio"),z=J("el-radio-group"),Y=J("el-tabs"),q=J("el-form"),oe=J("el-card");return Oe(),at(Ho,{nodeModel:x.nodeModel},{default:C(()=>[ee("h5",qG,_e(x.$t("views.applicationWorkflow.nodeSetting")),1),k(oe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(q,{onSubmit:A[11]||(A[11]=nn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:C(()=>[ee("div",YG,[ee("span",KG,[ct(_e(x.$t("views.applicationWorkflow.nodes.httpNode.configuration")),1),A[12]||(A[12]=ee("span",{class:"color-danger"},"*",-1))])]),ee("div",ZG,[k(S,{modelValue:c.value.method,"onUpdate:modelValue":A[0]||(A[0]=ie=>c.value.method=ie),style:{"max-width":"85px"},class:"mr-8",onChange:A[1]||(A[1]=ie=>c.value.method=null)},{default:C(()=>[(Oe(),en(Or,null,io(a,ie=>k(M,{key:ie,label:ie,value:ie},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),k(D,{prop:"url",rules:{message:sr(Ot)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:C(()=>[k(E,{modelValue:v.value.url,"onUpdate:modelValue":A[2]||(A[2]=ie=>v.value.url=ie),placeholder:x.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:u,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),ee("div",JG,[ee("span",QG,[ct(_e(x.$t("views.applicationWorkflow.nodes.httpNode.timeout")),1),A[13]||(A[13]=ee("span",{class:"color-danger"},"*",-1))]),k(I,{modelValue:c.value.timeout,"onUpdate:modelValue":A[3]||(A[3]=ie=>c.value.timeout=ie)},null,8,["modelValue"])]),ee("div",ez,[ee("span",tz,[ct(_e(x.$t("views.applicationWorkflow.nodes.httpNode.params")),1),A[14]||(A[14]=ee("span",{class:"color-danger"},"*",-1))])]),k(Y,{modelValue:v.value.activeTab,"onUpdate:modelValue":A[10]||(A[10]=ie=>v.value.activeTab=ie),class:"w-full"},{default:C(()=>[k(H,{name:"params",label:"Params"},{default:C(()=>[k(Q,{data:v.value.params,border:"",style:{width:"100%"}},{default:C(()=>[k(B,{prop:"name",label:"Name"},{default:C(ie=>[k(E,{modelValue:ie.row.name,"onUpdate:modelValue":Pe=>ie.row.name=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(B,{prop:"value",label:"Value"},{default:C(ie=>[k(E,{modelValue:ie.row.value,"onUpdate:modelValue":Pe=>ie.row.value=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(B,{label:"",width:"50"},{default:C(ie=>[ie.$index!==v.value.params.length-1?(Oe(),at(K,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:C(()=>[k(U,{type:"primary",text:"",onClick:Pe=>b(ie.$index)},{default:C(()=>[k(j,null,{default:C(()=>[k($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(H,{name:"authorization",label:"Authorization"},{default:C(()=>[k(z,{modelValue:v.value.authType,"onUpdate:modelValue":A[7]||(A[7]=ie=>v.value.authType=ie)},{default:C(()=>[k(W,{label:"No Auth",value:"none"}),k(W,{label:"Bearer Token",value:"bearer"}),k(W,{label:"Basic Auth",value:"basic"}),v.value.authType==="bearer"?(Oe(),at(E,{key:0,placeholder:x.$t("views.applicationWorkflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:v.value.token,"onUpdate:modelValue":A[4]||(A[4]=ie=>v.value.token=ie),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):kn("",!0),v.value.authType==="basic"?(Oe(),at(E,{key:1,placeholder:x.$t("views.applicationWorkflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:v.value.username,"onUpdate:modelValue":A[5]||(A[5]=ie=>v.value.username=ie),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):kn("",!0),v.value.authType==="basic"?(Oe(),at(E,{key:2,placeholder:x.$t("views.applicationWorkflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:v.value.password,"onUpdate:modelValue":A[6]||(A[6]=ie=>v.value.password=ie),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):kn("",!0)]),_:1},8,["modelValue"])]),_:1}),k(H,{name:"headers",label:"Headers"},{default:C(()=>[k(Q,{data:v.value.headers,border:"",style:{width:"100%"}},{default:C(()=>[k(B,{prop:"name",label:"Name"},{default:C(ie=>[k(E,{modelValue:ie.row.name,"onUpdate:modelValue":Pe=>ie.row.name=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(B,{prop:"value",label:"Value"},{default:C(ie=>[k(E,{modelValue:ie.row.value,"onUpdate:modelValue":Pe=>ie.row.value=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(B,{label:"",width:"50"},{default:C(ie=>[ie.$index!==v.value.headers.length-1?(Oe(),at(K,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:C(()=>[k(U,{type:"primary",text:"",onClick:Pe=>b(ie.$index)},{default:C(()=>[k(j,null,{default:C(()=>[k($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(H,{name:"body",label:"Body"},{default:C(()=>[k(z,{modelValue:v.value.contentType,"onUpdate:modelValue":A[9]||(A[9]=ie=>v.value.contentType=ie)},{default:C(()=>[(Oe(),en(Or,null,io(r,ie=>k(W,{key:ie,label:ie,value:ie},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(v.value.contentType)?(Oe(),at(Q,{key:0,data:v.value.params,border:"",style:{width:"100%"}},{default:C(()=>[k(B,{prop:"name",label:"Name"},{default:C(ie=>[k(E,{modelValue:ie.row.name,"onUpdate:modelValue":Pe=>ie.row.name=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(B,{prop:"value",label:"Value"},{default:C(ie=>[k(E,{modelValue:ie.row.value,"onUpdate:modelValue":Pe=>ie.row.value=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(B,{label:"",width:"50"},{default:C(ie=>[ie.$index!==0?(Oe(),at(K,{key:0,effect:"dark",content:x.$t("common.delete"),placement:"top"},{default:C(()=>[k(U,{type:"primary",text:"",onClick:Pe=>b(ie.$index)},{default:C(()=>[k(j,null,{default:C(()=>[k($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)]),_:1})]),_:1},8,["data"])):kn("",!0),["json","xml","raw-text"].includes(v.value.contentType)?(Oe(),at(pc,{key:1,title:x.$t("views.applicationWorkflow.nodes.httpNode.body"),modelValue:v.value.body,"onUpdate:modelValue":A[8]||(A[8]=ie=>v.value.body=ie),style:{height:"150px"},onSubmitDialog:_},null,8,["title","modelValue"])):kn("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}}),rz=Yd(nz,[["__scopeId","data-v-ac24d5c2"]]);class oz extends Xo{constructor(t){super(t,rz)}}const iz={type:"http-node",model:qo,view:oz},az=Object.freeze(Object.defineProperty({__proto__:null,default:iz},Symbol.toStringTag,{value:"Module"})),lz={class:"title-decoration-1 mb-8"},uz={class:"flex-between w-full"},sz={class:"flex align-center"},cz={class:"mr-4"},fz={class:"flex align-center"},dz={class:"mr-4"},pz={class:"flex align-center"},hz={class:"mr-4"},vz=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ge(null),v=Ge(),f=Ge(),g=()=>{var j;return(j=f.value)==null?void 0:j.validate().catch(U=>Promise.reject({node:u.nodeModel,errMessage:U}))},b=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),x={modelId:"",system:"",prompt:`{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null},A=Zn({get:()=>(u.nodeModel.properties.nodeData||Ne.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:j=>{Ne.set(u.nodeModel.properties,"nodeData",j)}}),M=t();function S(){var U;const j=r.value==="systemManage"?{modelType:"TTI",workspaceId:(U=M.value)==null?void 0:U.workspaceId}:{modelType:"TTI"};So({type:"model",systemType:r.value}).getSelectModelList(j).then(K=>{c.value=Ne.groupBy(K==null?void 0:K.data,"provider")})}const E=()=>{Nv(()=>{var j;A.value.modelId?(j=v.value)==null||j.reset_default(A.value.modelId,a):I({})})},D=j=>{var U;j&&((U=v.value)==null||U.open(j,a,A.value.modelParamsSetting))};function I(j){Ne.set(u.nodeModel.properties.nodeData,"modelParamsSetting",j)}function B(j){Ne.set(u.nodeModel.properties.nodeData,"prompt",j)}function $(j){Ne.set(u.nodeModel.properties.nodeData,"negative_prompt",j)}return Hr(()=>{S(),Ne.set(u.nodeModel,"validate",g)}),(j,U)=>{const K=J("AppIcon"),Q=J("el-button"),H=J("ModelSelect"),W=J("el-form-item"),z=J("el-tooltip"),Y=J("el-switch"),q=J("el-form"),oe=J("el-card");return Oe(),at(Ho,{"node-model":j.nodeModel},{default:C(()=>[ee("h5",lz,_e(j.$t("views.applicationWorkflow.nodeSetting")),1),k(oe,{shadow:"never",class:"card-never"},{default:C(()=>[k(q,{onSubmit:U[6]||(U[6]=nn(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:C(()=>[k(W,{label:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:C(()=>[ee("div",uz,[ee("div",null,[ee("span",null,[ct(_e(j.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),U[7]||(U[7]=ee("span",{class:"color-danger"},"*",-1))])]),k(Q,{disabled:!A.value.modelId,type:"primary",link:"",onClick:U[0]||(U[0]=ie=>D(A.value.modelId)),onRefreshForm:I},{default:C(()=>[k(K,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(H,{onChange:E,onWheel:b,teleported:!1,modelValue:A.value.modelId,"onUpdate:modelValue":U[1]||(U[1]=ie=>A.value.modelId=ie),placeholder:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(W,{label:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:j.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[ee("div",sz,[ee("div",cz,[ee("span",null,[ct(_e(j.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),U[8]||(U[8]=ee("span",{class:"color-danger"},"*",-1))])]),k(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(pc,{onWheel:b,title:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:A.value.prompt,"onUpdate:modelValue":U[2]||(U[2]=ie=>A.value.prompt=ie),style:{height:"150px"},onSubmitDialog:B},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(W,{label:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:j.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[ee("div",fz,[ee("div",dz,[ee("span",null,_e(j.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),k(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(pc,{onWheel:b,title:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:A.value.negative_prompt,"onUpdate:modelValue":U[3]||(U[3]=ie=>A.value.negative_prompt=ie),placeholder:j.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:$},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),k(W,{label:j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:U[5]||(U[5]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",pz,[ee("div",hz,[ee("span",null,_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(Y,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":U[4]||(U[4]=ie=>A.value.isResult=ie)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(Uv,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:I},null,512)]),_:1},8,["node-model"])}}});let mz=class extends Xo{constructor(t){super(t,vz)}};const yz={type:"image-generate-node",model:qo,view:mz},gz=Object.freeze(Object.defineProperty({__proto__:null,default:yz},Symbol.toStringTag,{value:"Module"})),bz={class:"title-decoration-1 mb-8"},_z={class:"flex-between w-full"},wz={class:"flex align-center"},Ez={class:"mr-4"},Oz={class:"flex-between"},Sz={class:"flex align-center"},xz={class:"mr-4"},Az=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ge(null),v=Ge(),f=Ge(),g=Ge(),b=()=>{var j;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(j=f.value)==null?void 0:j.validate()]).catch(U=>Promise.reject({node:u.nodeModel,errMessage:U}))},_=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),A={modelId:"",system:"",prompt:`{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null,imageList:["start-node","image"]},M=Zn({get:()=>(u.nodeModel.properties.nodeData||Ne.set(u.nodeModel.properties,"nodeData",A),u.nodeModel.properties.nodeData),set:j=>{Ne.set(u.nodeModel.properties,"nodeData",j)}}),S=t();function E(){var U;const j=r.value==="systemManage"?{modelType:"IMAGE",workspaceId:(U=S.value)==null?void 0:U.workspaceId}:{modelType:"IMAGE"};So({type:"model",systemType:r.value}).getSelectModelList(j).then(K=>{c.value=Ne.groupBy(K==null?void 0:K.data,"provider")})}function D(j){Ne.set(u.nodeModel.properties.nodeData,"system",j)}function I(j){Ne.set(u.nodeModel.properties.nodeData,"prompt",j)}const B=j=>{var U;j&&((U=v.value)==null||U.open(j,a,M.value.modelParamsSetting))};function $(j){Ne.set(u.nodeModel.properties.nodeData,"modelParamsSetting",j)}return Hr(()=>{E(),Ne.set(u.nodeModel,"validate",b)}),(j,U)=>{const K=J("AppIcon"),Q=J("el-button"),H=J("el-form-item"),W=J("el-tooltip"),z=J("el-option"),Y=J("el-select"),q=J("el-input-number"),oe=J("el-switch"),ie=J("el-form"),Pe=J("el-card");return Oe(),at(Ho,{"node-model":j.nodeModel},{default:C(()=>[ee("h5",bz,_e(j.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never"},{default:C(()=>[k(ie,{onSubmit:U[9]||(U[9]=nn(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:C(()=>[k(H,{label:j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:C(()=>[ee("div",_z,[ee("div",null,[ee("span",null,[ct(_e(sr(Ot)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),U[10]||(U[10]=ee("span",{class:"color-danger"},"*",-1))])]),k(Q,{disabled:!M.value.modelId,type:"primary",link:"",onClick:U[0]||(U[0]=we=>B(M.value.modelId)),onRefreshForm:$},{default:C(()=>[k(K,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(th,{onWheel:_,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":U[1]||(U[1]=we=>M.value.modelId=we),placeholder:j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"IMAGE"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{label:j.$t("views.application.form.roleSettings.label")},{default:C(()=>[k(pc,{title:j.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":U[2]||(U[2]=we=>M.value.system=we),style:{height:"100px"},onSubmitDialog:D,placeholder:j.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(H,{label:j.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:j.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:C(()=>[ee("div",wz,[ee("div",Ez,[ee("span",null,[ct(_e(j.$t("views.application.form.prompt.label")),1),U[11]||(U[11]=ee("span",{class:"color-danger"},"*",-1))])]),k(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.application.form.prompt.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(pc,{onWheel:_,title:j.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":U[3]||(U[3]=we=>M.value.prompt=we),style:{height:"150px"},onSubmitDialog:I},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(H,null,{label:C(()=>[ee("div",Oz,[ee("div",null,_e(j.$t("views.application.form.historyRecord.label")),1),k(Y,{modelValue:M.value.dialogue_type,"onUpdate:modelValue":U[4]||(U[4]=we=>M.value.dialogue_type=we),type:"small",style:{width:"100px"}},{default:C(()=>[k(z,{label:j.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(z,{label:j.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[k(q,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":U[5]||(U[5]=we=>M.value.dialogueNumber=we),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),k(H,{label:j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),U[12]||(U[12]=ee("span",{class:"color-danger"},"*",-1))]),default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:M.value.imageList,"onUpdate:modelValue":U[6]||(U[6]=we=>M.value.imageList=we)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:U[8]||(U[8]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",Sz,[ee("div",xz,[ee("span",null,_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(oe,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":U[7]||(U[7]=we=>M.value.isResult=we)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(Uv,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:$},null,512)]),_:1},8,["node-model"])}}});let Tz=class extends Xo{constructor(t){super(t,Az)}};const Mz={type:"image-understand-node",model:qo,view:Tz},kz=Object.freeze(Object.defineProperty({__proto__:null,default:Mz},Symbol.toStringTag,{value:"Module"})),Pz={class:"title-decoration-1 mb-8"},Nz={class:"flex-between"},Rz={class:"flex-between"},Cz={class:"flex-between"},Dz=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Ge(),c=Ge();function v(){const U=Ne.cloneDeep(E.nodeModel.properties.nodeData.branch),K={id:fl(),content:"",isOther:!1};U.splice(U.length-1,0,K),g(U,!0),Ne.set(E.nodeModel.properties.nodeData,"branch",U),E.nodeModel.refreshBranch()}function f(U){var q;const K=Ne.cloneDeep(E.nodeModel.properties.nodeData.branch),Q=K.find(oe=>oe.id===U);if(!Q||Q.isOther||K.filter(oe=>!oe.isOther).length<=1)return;const W=`${E.nodeModel.id}_${U}_right`,z=(((q=E.nodeModel.outgoing)==null?void 0:q.edges)||[]).filter(oe=>oe.sourceAnchorId===W).map(oe=>oe.id);z.length>0&&E.nodeModel.graphModel.eventCenter.emit("delete_edge",z);const Y=K.filter(oe=>oe.id!==U);Ne.set(E.nodeModel.properties.nodeData,"branch",Y),g(Y,!1)}function g(U,K){const Q=Ne.cloneDeep(E.nodeModel.properties.branch_condition_list?E.nodeModel.properties.branch_condition_list:[]),H=U.map((W,z)=>{const Y=Q.find(q=>q.id===W.id);if(Y)return{index:z,height:Y.height,id:W.id};if(K)return{index:z,height:12,id:W.id}}).filter(W=>W);Ne.set(E.nodeModel.properties,"branch_condition_list",H),E.nodeModel.refreshBranch()}const b=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),_=U=>{var K;U?(K=c.value)==null||K.reset_default(U,a):A({})},x={modelId:"",branch:[{id:fl(),content:"",isOther:!1},{id:fl(),content:Ot("views.applicationWorkflow.nodes.intentNode.other"),isOther:!0}],dialogueNumber:1,contentList:[]};function A(U){Ne.set(E.nodeModel.properties.nodeData,"modelParamsSetting",U)}const M=U=>{var K;U&&((K=c.value)==null||K.open(U,a,S.value.modelParamsSetting))},S=Zn({get:()=>(E.nodeModel.properties.nodeData||(Ne.set(E.nodeModel.properties,"nodeData",x),g(x.branch,!0)),E.nodeModel.properties.nodeData),set:U=>{Ne.set(E.nodeModel.properties,"nodeData",U)}}),E=e,D=Ge(),I=Ge(null),B=()=>{var U;return Promise.all([u.value?u.value.validate():Promise.resolve(""),(U=D.value)==null?void 0:U.validate()]).then(()=>{if(S.value.branch.length!=new Set(S.value.branch.map(K=>K.content)).size)throw Ot("views.applicationWorkflow.nodes.intentNode.error2")}).catch(K=>Promise.reject({node:E.nodeModel,errMessage:K}))},$=t();function j(){var K;const U=r.value==="systemManage"?{modelType:"LLM",workspaceId:(K=$.value)==null?void 0:K.workspaceId}:{modelType:"LLM"};So({type:"model",systemType:r.value}).getSelectModelList(U).then(Q=>{I.value=Ne.groupBy(Q==null?void 0:Q.data,"provider")})}return Hr(()=>{var U;j(),typeof((U=E.nodeModel.properties.nodeData)==null?void 0:U.isResult)>"u"&&gc(E.nodeModel)&&Ne.set(E.nodeModel.properties.nodeData,"isResult",!0),Ne.set(E.nodeModel,"validate",B)}),(U,K)=>{const Q=J("el-button"),H=J("el-form-item"),W=J("el-input-number"),z=J("Plus"),Y=J("el-icon"),q=J("el-input"),oe=J("el-col"),ie=J("Delete"),Pe=J("el-row"),we=J("el-form"),be=J("el-card");return Oe(),at(Ho,{nodeModel:U.nodeModel},{default:C(()=>[ee("h5",Pz,_e(U.$t("views.applicationWorkflow.nodeSetting")),1),k(be,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(we,{onSubmit:K[4]||(K[4]=nn(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"IntentClassifyNodeFormRef",ref:D,"hide-required-asterisk":""},{default:C(()=>[k(H,{label:U.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:U.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",Nz,[ee("div",null,[ee("span",null,[ct(_e(U.$t("views.application.form.aiModel.label")),1),K[5]||(K[5]=ee("span",{class:"color-danger"},"*",-1))])]),k(Q,{type:"primary",link:"",disabled:!S.value.modelId,onClick:K[0]||(K[0]=ye=>M(S.value.modelId)),onRefreshForm:A},{default:C(()=>[k(yo,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(th,{onChange:_,onWheel:b,teleported:!1,modelValue:S.value.modelId,"onUpdate:modelValue":K[1]||(K[1]=ye=>S.value.modelId=ye),placeholder:U.$t("views.application.form.aiModel.placeholder"),options:I.value,onSubmitModel:j,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{prop:"contentList",label:U.$t("views.applicationWorkflow.nodes.intentNode.input.label"),rules:{message:U.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:C(()=>[ee("div",Rz,[ee("div",null,[ee("span",null,[ct(_e(U.$t("views.applicationWorkflow.nodes.intentNode.input.label")),1),K[6]||(K[6]=ee("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:u,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:S.value.contentList,"onUpdate:modelValue":K[2]||(K[2]=ye=>S.value.contentList=ye)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:U.$t("views.application.form.historyRecord.label")},{default:C(()=>[k(W,{modelValue:S.value.dialogueNumber,"onUpdate:modelValue":K[3]||(K[3]=ye=>S.value.dialogueNumber=ye),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(H,null,{label:C(()=>[ee("div",Cz,[ee("div",null,[ee("span",null,[ct(_e(U.$t("views.applicationWorkflow.nodes.intentNode.classify.label")),1),K[7]||(K[7]=ee("span",{class:"color-danger"},"*",-1))])]),k(Q,{onClick:v,type:"primary",size:"large",link:""},{default:C(()=>[k(Y,null,{default:C(()=>[k(z)]),_:1})]),_:1})])]),default:C(()=>[ee("div",null,[(Oe(!0),en(Or,null,io(S.value.branch,(ye,Xe)=>(Oe(),en("div",{key:ye.id,class:"mb-8"},[k(H,{prop:`branch.${Xe}.content`,rules:{message:U.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder"),trigger:"change",required:!0}},{default:C(()=>[k(Pe,{gutter:12,align:"middle"},{default:C(()=>[k(oe,{span:21},{default:C(()=>[k(q,{modelValue:ye.content,"onUpdate:modelValue":Ze=>ye.content=Ze,style:{width:"210px"},disabled:ye.isOther,placeholder:U.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder")},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:2},1024),k(oe,{span:3},{default:C(()=>[ye.isOther?kn("",!0):(Oe(),at(Q,{key:0,link:"",size:"large",disabled:S.value.branch.filter(Ze=>!Ze.isOther).length<=1,onClick:Ze=>f(ye.id)},{default:C(()=>[k(Y,null,{default:C(()=>[k(ie)]),_:1})]),_:2},1032,["disabled","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["prop","rules"])]))),128))])]),_:1})]),_:1},8,["model"])]),_:1}),k(Uv,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:A},null,512)]),_:1},8,["nodeModel"])}}});class jz extends Xo{constructor(t){super(t,Dz)}}class Iz extends qo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let b=0;b<c.length;b++){const _=c[b];f.push({x:n+r/2-10,y:v?a-u/2+397+b*41.36:a-15,id:`${t}_${_.id}_right`,type:"right"}),console.log(a-u/2+397+100/2)}return f}}const Lz={type:"intent-node",model:Iz,view:jz},Fz=Object.freeze(Object.defineProperty({__proto__:null,default:Lz},Symbol.toStringTag,{value:"Module"})),$z={class:"title-decoration-1 mb-8"},Uz={class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Bz={class:"flex-between"},Vz={class:"flex align-center"},Wz=["src"],Gz={class:"flex-between"},zz={class:"ml-4"},Hz={class:"title-decoration-1 mb-8"},Xz={key:0,class:"p-8-12"},qz={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Yz={class:"flex-between"},Kz={key:0,class:"color-danger"},Zz={key:0,class:"p-8-12"},Jz={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},Qz={class:"flex-between"},eH={key:0,class:"color-danger"},tH=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,nH=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e;tE();const n=aa(),{params:{id:a}}=n,u=Lu("getApplicationDetail")(),c=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),v=Ge(),f=Ge(!1),g=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),b={mcpTool:"",mcpTools:[],mcpServers:"",mcpServer:"",mcpSource:"referencing",mcpToolId:"",toolParams:{},tool_form_field:[],params_nested:""},_=Ge([]);function x($){Ne.set(t.nodeModel.properties.nodeData,"mcpServers",$)}async function A(){const $=await So({type:"tool",systemType:c.value}).getToolById(E.value.mcpToolId,f);E.value.mcpServers=$.data.code}function M(){if(E.value.mcpSource==="referencing"&&!E.value.mcpToolId){mi(Ot("views.applicationWorkflow.nodes.mcpNode.mcpToolTip"));return}if(E.value.mcpSource==="custom"&&!E.value.mcpServers){mi(Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(E.value.mcpServers)}catch{mi(Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}So({type:"application",systemType:c.value}).getMcpTools(a,E.value.mcpServers,f).then($=>{var j;E.value.mcpTools=$.data,zd(Ot("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),E.value.mcpServer=(j=E.value.mcpTools.find(U=>U.name===E.value.mcpTool))==null?void 0:j.server})}function S(){var j,U,K,Q,H,W;E.value.mcpServer=(j=E.value.mcpTools.find(z=>z.name===E.value.mcpTool))==null?void 0:j.server;const $=(U=E.value.mcpTools.find(z=>z.name===E.value.mcpTool))==null?void 0:U.args_schema;E.value.tool_form_field=[];for(const z in $==null?void 0:$.properties){const Y=$==null?void 0:$.properties[z].properties;if(Y){E.value.params_nested=z;for(const q in Y){let oe="TextInput";Y[q].type==="string"?oe="TextInput":Y[q].type==="number"?oe="NumberInput":Y[q].type==="boolean"?oe="SwitchInput":(Y[q].type==="array"||Y[q].type==="object")&&(oe="JsonInput"),E.value.tool_form_field.push({field:q,label:{input_type:"TooltipLabel",label:q,attrs:{tooltip:Y[q].description},props_info:{}},input_type:oe,source:"referencing",required:((K=$.properties[z].required)==null?void 0:K.indexOf(q))!==-1,props_info:{rules:[{required:((Q=$.properties[z].required)==null?void 0:Q.indexOf(q))!==-1,message:Ot("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{E.value.params_nested="";let q="TextInput";$.properties[z].type==="string"?q="TextInput":$.properties[z].type==="number"?q="NumberInput":$.properties[z].type==="boolean"?q="SwitchInput":($.properties[z].type==="array"||$.properties[z].type==="object")&&(q="JsonInput"),E.value.tool_form_field.push({field:z,label:{input_type:"TooltipLabel",label:z,attrs:{tooltip:$.properties[z].description},props_info:{}},input_type:q,source:"referencing",required:((H=$.required)==null?void 0:H.indexOf(z))!==-1,props_info:{rules:[{required:((W=$.required)==null?void 0:W.indexOf(z))!==-1,message:Ot("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}E.value.params_nested?E.value.toolParams={[E.value.params_nested]:{}}:E.value.toolParams={}}const E=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",b),t.nodeModel.properties.nodeData),set:$=>{Ne.set(t.nodeModel.properties,"nodeData",$)}}),D=Ge(),I=async()=>{if(v.value){const $=E.value.tool_form_field.filter(j=>j.required).map(j=>j.label.label);if($.length>0){for(const j of $)if(E.value.params_nested){if(!E.value.toolParams[E.value.params_nested][j])return Promise.reject({node:t.nodeModel,errMessage:j+Ot("dynamicsForm.tip.requiredMessage")})}else if(!E.value.toolParams[j])return Promise.reject({node:t.nodeModel,errMessage:j+Ot("dynamicsForm.tip.requiredMessage")})}}if(D.value){const $=Ne.cloneDeep(E.value);if(!$.mcpServers)return Promise.reject({node:t.nodeModel,errMessage:Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!$.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:Ot("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};function B(){var j;const $=c.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(j=u.value)==null?void 0:j.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};So({type:"tool",systemType:c.value}).getAllToolList($,f).then(U=>{_.value=[...U.data.shared_tools,...U.data.tools].filter(K=>K.isActive)})}return Hr(()=>{var $;typeof(($=t.nodeModel.properties.nodeData)==null?void 0:$.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),B(),Ne.set(t.nodeModel,"validate",I)}),($,j)=>{const U=J("el-option"),K=J("el-select"),Q=J("el-avatar"),H=J("ToolIcon"),W=J("el-tag"),z=J("el-form-item"),Y=J("Plus"),q=J("el-icon"),oe=J("el-button"),ie=J("AppIcon"),Pe=J("el-tooltip"),we=J("el-form"),be=J("el-text"),ye=J("el-input"),Xe=J("el-input-number"),Ze=J("el-switch"),yt=eh("loading");return Oe(),at(Ho,{nodeModel:$.nodeModel},{default:C(()=>[ee("h5",$z,_e($.$t("views.applicationWorkflow.nodeSetting")),1),ee("div",Uz,[k(we,{onSubmit:j[5]||(j[5]=nn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:D,"hide-required-asterisk":""},{default:C(()=>[k(z,{label:"MCP Server Config"},{label:C(()=>[ee("div",Bz,[j[9]||(j[9]=ee("div",null,[ct(" MCP Server Config "),ee("span",{class:"color-danger"},"*")],-1)),k(K,{teleported:!1,modelValue:E.value.mcpSource,"onUpdate:modelValue":j[0]||(j[0]=Be=>E.value.mcpSource=Be),size:"small",style:{width:"85px"}},{default:C(()=>[k(U,{label:$.$t("views.applicationWorkflow.nodes.mcpNode.reference"),value:"referencing"},null,8,["label"]),k(U,{label:$.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[E.value.mcpSource==="custom"?(Oe(),at(pc,{key:0,onWheel:g,title:"MCP Server Config",modelValue:E.value.mcpServers,"onUpdate:modelValue":j[1]||(j[1]=Be=>E.value.mcpServers=Be),style:{height:"150px"},onSubmitDialog:x,placeholder:tH},null,8,["modelValue"])):(Oe(),at(K,{key:1,modelValue:E.value.mcpToolId,"onUpdate:modelValue":j[2]||(j[2]=Be=>E.value.mcpToolId=Be),filterable:"",onChange:A},{default:C(()=>[(Oe(!0),en(Or,null,io(_.value,Be=>(Oe(),at(U,{key:Be.id,label:Be.name,value:Be.id},{default:C(()=>[ee("div",Vz,[Be!=null&&Be.icon?(Oe(),at(Q,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:C(()=>[ee("img",{src:sr(Zp)(Be==null?void 0:Be.icon),alt:""},null,8,Wz)]),_:2},1024)):(Oe(),at(H,{key:1,size:20,type:Be==null?void 0:Be.toolType,class:"mr-8"},null,8,["type"])),ee("span",null,_e(Be.name),1),Be.scope==="SHARED"?(Oe(),at(W,{key:2,type:"info",class:"info-tag ml-8"},{default:C(()=>[ct(_e(sr(Ot)("views.shared.title")),1)]),_:1})):kn("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),k(z,null,{label:C(()=>[ee("div",Gz,[ee("span",null,_e($.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),k(oe,{type:"primary",link:"",onClick:j[3]||(j[3]=Be=>M())},{default:C(()=>[k(q,{class:"mr-4"},{default:C(()=>[k(Y)]),_:1}),ct(" "+_e($.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:C(()=>[k(K,{modelValue:E.value.mcpTool,"onUpdate:modelValue":j[4]||(j[4]=Be=>E.value.mcpTool=Be),onChange:S,filterable:""},{default:C(()=>[(Oe(!0),en(Or,null,io(E.value.mcpTools,Be=>(Oe(),at(U,{key:Be.value,label:Be.name,value:Be.name,class:"flex align-center"},{default:C(()=>[k(Pe,{effect:"dark",content:Be.description,placement:"top-start","popper-class":"max-w-350"},{default:C(()=>[k(ie,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),ee("span",zz,_e(Be.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),ee("h5",Hz,_e($.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),E.value.toolParams[E.value.params_nested]?(Oe(),en(Or,{key:0},[E.value.mcpTool?(Oe(),en("div",qz,[E.value.mcpTool?za((Oe(),at(we,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:j[7]||(j[7]=nn(()=>{},["prevent"]))},{default:C(()=>[(Oe(!0),en(Or,null,io(E.value.tool_form_field,Be=>(Oe(),at(z,{key:Be.field,required:Be.required},{label:C(()=>[ee("div",Yz,[ee("div",null,[k($S,{label:Be.label.label,tooltip:Be.label.attrs.tooltip},null,8,["label","tooltip"]),Be.required?(Oe(),en("span",Kz,"*")):kn("",!0)]),k(K,{teleported:!1,modelValue:Be.source,"onUpdate:modelValue":qt=>Be.source=qt,size:"small",style:{width:"85px"},onChange:j[6]||(j[6]=qt=>E.value.toolParams[E.value.params_nested]={})},{default:C(()=>[k(U,{label:$.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(U,{label:$.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[Be.source==="custom"&&Be.input_type==="TextInput"?(Oe(),at(ye,{key:0,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[E.value.params_nested][Be.label.label]=qt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="NumberInput"?(Oe(),at(Xe,{key:1,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[E.value.params_nested][Be.label.label]=qt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="SwitchInput"?(Oe(),at(Ze,{key:2,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[E.value.params_nested][Be.label.label]=qt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="JsonInput"?(Oe(),at(ye,{key:3,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[E.value.params_nested][Be.label.label]=qt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):kn("",!0),Be.source==="referencing"?(Oe(),at(oo,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[E.value.params_nested][Be.label.label]=qt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):kn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[yt,f.value]]):kn("",!0)])):(Oe(),en("div",Xz,[k(be,{type:"info"},{default:C(()=>[ct(_e($.$t("common.noData")),1)]),_:1})]))],64)):(Oe(),en(Or,{key:1},[E.value.mcpTool?(Oe(),en("div",Jz,[E.value.mcpTool?za((Oe(),at(we,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:j[8]||(j[8]=nn(()=>{},["prevent"]))},{default:C(()=>[(Oe(!0),en(Or,null,io(E.value.tool_form_field,Be=>(Oe(),at(z,{key:Be.field,required:Be.required},{label:C(()=>[ee("div",Qz,[ee("div",null,[k($S,{label:Be.label.label,tooltip:Be.label.attrs.tooltip},null,8,["label","tooltip"]),Be.required?(Oe(),en("span",eH,"*")):kn("",!0)]),k(K,{teleported:!1,modelValue:Be.source,"onUpdate:modelValue":qt=>Be.source=qt,size:"small",style:{width:"85px"}},{default:C(()=>[k(U,{label:$.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(U,{label:$.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[Be.source==="custom"&&Be.input_type==="TextInput"?(Oe(),at(ye,{key:0,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[Be.label.label]=qt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="NumberInput"?(Oe(),at(Xe,{key:1,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[Be.label.label]=qt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="SwitchInput"?(Oe(),at(Ze,{key:2,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[Be.label.label]=qt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="JsonInput"?(Oe(),at(ye,{key:3,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[Be.label.label]=qt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):kn("",!0),Be.source==="referencing"?(Oe(),at(oo,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":qt=>E.value.toolParams[Be.label.label]=qt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):kn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[yt,f.value]]):kn("",!0)])):(Oe(),en("div",Zz,[k(be,{type:"info"},{default:C(()=>[ct(_e($.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class rH extends Xo{constructor(t){super(t,nH)}}const oH={type:"mcp-node",model:qo,view:rH},iH=Object.freeze(Object.defineProperty({__proto__:null,default:oH},Symbol.toStringTag,{value:"Module"})),aH={class:"dialog-footer"},lH=rr({__name:"ParametersFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array"}],u=Ge(),c=Ge(!1),v=Ge(!1),f=Ge(null),g=Ge({field:"",label:"",parameterType:"",desc:""}),b=ch({label:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:Ot("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=Ge(!1),x=(S,E)=>{S&&(g.value=Ne.cloneDeep(S),v.value=!0,f.value=E),_.value=!0},A=()=>{_.value=!1,v.value=!1,f.value=null,g.value={field:"",label:""}},M=async S=>{S&&await S.validate(E=>{E&&a("refresh",g.value,f.value)})};return t({open:x,close:A}),(S,E)=>{const D=J("el-input"),I=J("el-form-item"),B=J("el-option"),$=J("el-select"),j=J("el-form"),U=J("el-button"),K=J("el-dialog");return Oe(),at(K,{title:v.value?S.$t("common.param.editParam"):S.$t("common.param.addParam"),modelValue:_.value,"onUpdate:modelValue":E[5]||(E[5]=Q=>_.value=Q),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":A,"append-to-body":""},{footer:C(()=>[ee("span",aH,[k(U,{onClick:nn(A,["prevent"])},{default:C(()=>[ct(_e(S.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:E[4]||(E[4]=Q=>M(u.value)),loading:c.value},{default:C(()=>[ct(_e(S.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:u,rules:b,model:g.value,"require-asterisk-position":"right"},{default:C(()=>[k(I,{label:S.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:b.field},{default:C(()=>[k(D,{modelValue:g.value.field,"onUpdate:modelValue":E[0]||(E[0]=Q=>g.value.field=Q),maxlength:64,placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(I,{label:S.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:b.label},{default:C(()=>[k(D,{modelValue:g.value.label,"onUpdate:modelValue":E[1]||(E[1]=Q=>g.value.label=Q),maxlength:64,"show-word-limit":"",placeholder:S.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(I,{label:S.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),required:!0,prop:"parameterType",rules:b.label},{default:C(()=>[k($,{modelValue:g.value.parameterType,"onUpdate:modelValue":E[2]||(E[2]=Q=>g.value.parameterType=Q),placeholder:S.$t("common.selectPlaceholder")+S.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),style:{width:"100%"}},{default:C(()=>[(Oe(),en(Or,null,io(r,Q=>k(B,{key:Q.value,label:Q.label,value:Q.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(I,{label:S.$t("common.desc"),prop:"desc"},{default:C(()=>[k(D,{modelValue:g.value.desc,"onUpdate:modelValue":E[3]||(E[3]=Q=>g.value.desc=Q),style:{width:"100%"},rows:2,type:"textarea",placeholder:S.$t("common.descPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),uH={class:"flex-between w-full"},sH={class:"break-all lighter"},cH={class:"ml-4",style:{"margin-top":"-4px"}},fH=["title"],dH=["title"],pH={class:"mr-4"},hH=rr({__name:"ParametersFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(),r=Ge([]);function u(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1);const g=[{label:Ot("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Ne.set(t.nodeModel.properties.config,"fields",g)}function v(f,g){for(let _=0;_<r.value.length;_++)if(r.value[_].field===f.field&&g!==_){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close();const b=[{label:Ot("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Ne.set(t.nodeModel.properties.config,"fields",b)}return Hr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Ne.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Ne.set(t.nodeModel.properties.nodeData,"variableList",r);const f=[{label:Ot("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Ne.set(t.nodeModel.properties.config,"fields",f)}),(f,g)=>{var S;const b=J("el-button"),_=J("el-table-column"),x=J("el-tag"),A=J("el-tooltip"),M=J("el-table");return Oe(),en(Or,null,[ee("div",uH,[ee("h5",sH,[ct(_e(f.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"))+" ",1),g[1]||(g[1]=ee("span",{class:"color-danger"},"*",-1))]),ee("span",cH,[k(b,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>u())},{default:C(()=>[k(yo,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((S=t.nodeModel.properties.nodeData.variableList)==null?void 0:S.length)>0?(Oe(),at(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:C(()=>[k(_,{prop:"field",label:f.$t("dynamicsForm.paramForm.field.label"),width:"90"},{default:C(({row:E})=>[ee("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,fH)]),_:1},8,["label"]),k(_,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:E})=>[ee("span",null,[ee("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,dH)])]),_:1},8,["label"]),k(_,{prop:"label",label:f.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType")},{default:C(({row:E})=>[k(x,{type:"info",class:"info-tag"},{default:C(()=>[ct(_e(E.parameterType),1)]),_:2},1024)]),_:1},8,["label"]),k(_,{label:f.$t("common.operation"),align:"left",width:"80"},{default:C(({row:E,$index:D})=>[ee("span",pH,[k(A,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:C(()=>[k(b,{type:"primary",text:"",onClick:nn(I=>u(E,D),["stop"])},{default:C(()=>[k(yo,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(A,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:C(()=>[k(b,{type:"primary",text:"",onClick:I=>c(D)},{default:C(()=>[k(yo,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(lH,{ref_key:"ParametersFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),vH={class:"title-decoration-1 mb-8"},mH={class:"flex-between w-full"},yH={class:"flex-between"},gH=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=e,a=Ge(),r=aa(),{params:{id:u}}=r,c=I=>{var B;I&&((B=a.value)==null||B.open(I,u,M.value.modelParamsSetting))};function v(I){Ne.set(n.nodeModel.properties.nodeData,"modelParamsSetting",I)}const f=t(),g=Ge(null),b=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),_=Zn(()=>r.path.includes("resource-management")?"systemManage":"workspace");function x(){var B;const I=_.value==="systemManage"?{modelType:"LLM",workspace_id:(B=f.value)==null?void 0:B.workspace_id}:{modelType:"LLM"};So({type:"model",systemType:_.value}).getSelectModelList(I).then($=>{g.value=Ne.groupBy($==null?void 0:$.data,"provider")})}const A={inputVariable:[],modelParamsSetting:{},modelId:"",variableList:[]},M=Zn({get:()=>(n.nodeModel.properties.nodeData||Ne.set(n.nodeModel.properties,"nodeData",A),n.nodeModel.properties.nodeData),set:I=>{Ne.set(n.nodeModel.properties,"nodeData",I)}}),S=I=>{var B;I?(B=a.value)==null||B.reset_default(I,u):v({})},E=Ge(),D=async()=>E.value.validate();return Hr(()=>{x(),Ne.set(n.nodeModel,"validate",D)}),(I,B)=>{const $=J("el-button"),j=J("el-form-item"),U=J("el-form"),K=J("el-card");return Oe(),at(Ho,{nodeModel:I.nodeModel},{default:C(()=>[ee("h5",vH,_e(I.$t("views.applicationWorkflow.nodeSetting")),1),k(K,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(U,{onSubmit:B[3]||(B[3]=nn(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:E,"hide-required-asterisk":""},{default:C(()=>[k(j,{label:I.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",mH,[ee("div",null,[ee("span",null,[ct(_e(I.$t("views.application.form.aiModel.label")),1),B[4]||(B[4]=ee("span",{class:"color-danger ml-4"},"*",-1))])]),k($,{disabled:!M.value.modelId,type:"primary",link:"",onClick:B[0]||(B[0]=Q=>c(M.value.modelId)),onRefreshForm:v},{default:C(()=>[k(yo,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(th,{onChange:S,onWheel:b,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":B[1]||(B[1]=Q=>M.value.modelId=Q),placeholder:I.$t("views.application.form.aiModel.placeholder"),options:g.value,onSubmitModel:x,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(j,{prop:"inputVariable",rules:{message:I.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:C(()=>[ee("div",yH,[ee("div",null,[ct(_e(I.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),B[5]||(B[5]=ee("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.variable.placeholder"),modelValue:M.value.inputVariable,"onUpdate:modelValue":B[2]||(B[2]=Q=>M.value.inputVariable=Q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(j,{prop:"variableList",rules:{message:I.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"),trigger:"blur",required:!0}},{default:C(()=>[k(hH,{ref:"ParametersFieldTableRef","node-model":I.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),k(Uv,{ref_key:"AIModeParamSettingDialogRef",ref:a,onRefresh:v},null,512)]),_:1},8,["nodeModel"])}}});class bH extends Xo{constructor(t){super(t,gH)}}const _H={type:"parameter-extraction-node",model:qo,view:bH},wH=Object.freeze(Object.defineProperty({__proto__:null,default:_H},Symbol.toStringTag,{value:"Module"})),EH={class:"title-decoration-1 mb-8"},OH={class:"flex-between"},SH={class:"flex align-center"},xH={class:"mr-4"},AH={class:"flex align-center"},TH={class:"mr-4"},MH=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Ge(),c=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),v=j=>{var U;j?(U=u.value)==null||U.reset_default(j,a):x({})};function f(j){Ne.set(S.nodeModel.properties.nodeData,"prompt",j)}function g(j){Ne.set(S.nodeModel.properties.nodeData,"system",j)}const b=`${Ot("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Ot("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,_={modelId:"",system:Ot("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:b,dialogueNumber:1,isResult:!1};function x(j){Ne.set(S.nodeModel.properties.nodeData,"modelParamsSetting",j)}const A=j=>{var U;j&&((U=u.value)==null||U.open(j,a,M.value.modelParamsSetting))},M=Zn({get:()=>(S.nodeModel.properties.nodeData||Ne.set(S.nodeModel.properties,"nodeData",_),S.nodeModel.properties.nodeData),set:j=>{Ne.set(S.nodeModel.properties,"nodeData",j)}}),S=e,E=Ge(),D=Ge(null),I=()=>{var j;return(j=E.value)==null?void 0:j.validate().catch(U=>Promise.reject({node:S.nodeModel,errMessage:U}))},B=t();function $(){var U;const j=r.value==="systemManage"?{modelType:"LLM",workspaceId:(U=B.value)==null?void 0:U.workspaceId}:{modelType:"LLM"};So({type:"model",systemType:r.value}).getSelectModelList(j).then(K=>{D.value=Ne.groupBy(K==null?void 0:K.data,"provider")})}return Hr(()=>{var j;$(),typeof((j=S.nodeModel.properties.nodeData)==null?void 0:j.isResult)>"u"&&gc(S.nodeModel)&&Ne.set(S.nodeModel.properties.nodeData,"isResult",!0),Ne.set(S.nodeModel,"validate",I)}),(j,U)=>{const K=J("AppIcon"),Q=J("el-button"),H=J("ModelSelect"),W=J("el-form-item"),z=J("MdEditorMagnify"),Y=J("el-tooltip"),q=J("el-input-number"),oe=J("el-switch"),ie=J("el-form"),Pe=J("el-card");return Oe(),at(Ho,{nodeModel:j.nodeModel},{default:C(()=>[ee("h5",EH,_e(j.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(ie,{onSubmit:U[7]||(U[7]=nn(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"questionNodeFormRef",ref:E,"hide-required-asterisk":""},{default:C(()=>[k(W,{label:j.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:j.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",OH,[ee("div",null,[ee("span",null,[ct(_e(j.$t("views.application.form.aiModel.label")),1),U[8]||(U[8]=ee("span",{class:"color-danger"},"*",-1))])]),k(Q,{type:"primary",link:"",disabled:!M.value.modelId,onClick:U[0]||(U[0]=we=>A(M.value.modelId)),onRefreshForm:x},{default:C(()=>[k(K,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(H,{onChange:v,onWheel:c,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":U[1]||(U[1]=we=>M.value.modelId=we),placeholder:j.$t("views.application.form.aiModel.placeholder"),options:D.value,onSubmitModel:$,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(W,{label:j.$t("views.application.form.roleSettings.label")},{default:C(()=>[k(z,{title:j.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":U[2]||(U[2]=we=>M.value.system=we),style:{height:"100px"},onSubmitDialog:g,placeholder:j.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(W,{label:j.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:j.$t("views.application.form.prompt.tooltip"),trigger:"blur"}},{label:C(()=>[ee("div",SH,[ee("div",xH,[ee("span",null,[ct(_e(j.$t("views.application.form.prompt.label")),1),U[9]||(U[9]=ee("span",{class:"color-danger"},"*",-1))])]),k(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.application.form.prompt.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(z,{onWheel:c,title:j.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":U[3]||(U[3]=we=>M.value.prompt=we),style:{height:"150px"},onSubmitDialog:f},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(W,{label:j.$t("views.application.form.historyRecord.label")},{default:C(()=>[k(q,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":U[4]||(U[4]=we=>M.value.dialogueNumber=we),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(W,{label:j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:U[6]||(U[6]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",AH,[ee("div",TH,[ee("span",null,_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(K,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(oe,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":U[5]||(U[5]=we=>M.value.isResult=we)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(Uv,{ref_key:"AIModeParamSettingDialogRef",ref:u,onRefresh:x},null,512)]),_:1},8,["nodeModel"])}}});class kH extends Xo{constructor(t){super(t,MH)}}const PH={type:"question-node",model:qo,view:kH},NH=Object.freeze(Object.defineProperty({__proto__:null,default:PH},Symbol.toStringTag,{value:"Module"})),RH={class:"flex-between"},CH={class:"flex align-center"},DH={class:"mr-4"},jH=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),a={replyType:"content",content:"",fields:[],isResult:!0},r=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:g=>{Ne.set(t.nodeModel.properties,"nodeData",g)}});function u(g){Ne.set(t.nodeModel.properties.nodeData,"content",g)}const c=Ge(),v=Ge(),f=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return Hr(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),Ne.set(t.nodeModel,"validate",f)}),(g,b)=>{const _=J("el-option"),x=J("el-select"),A=J("MdEditorMagnify"),M=J("el-form-item"),S=J("AppIcon"),E=J("el-tooltip"),D=J("el-switch"),I=J("el-form"),B=J("el-card");return Oe(),at(Ho,{nodeModel:g.nodeModel},{default:C(()=>[k(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(I,{onSubmit:b[5]||(b[5]=nn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:C(()=>[k(M,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:C(()=>[ee("div",RH,[ee("span",null,_e(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),k(x,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=$=>r.value.replyType=$),size:"small",style:{width:"85px"}},{default:C(()=>[k(_,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(_,{label:g.$t("common.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:C(()=>[r.value.replyType==="content"?(Oe(),at(A,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=$=>r.value.content=$),style:{height:"150px"},onSubmitDialog:u},null,8,["title","modelValue"])):(Oe(),at(oo,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=$=>r.value.fields=$)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(M,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",CH,[ee("div",DH,[ee("span",null,_e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(E,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(S,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(D,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=$=>r.value.isResult=$)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class IH extends Xo{constructor(t){super(t,jH)}}const LH={type:"reply-node",model:qo,view:IH},FH=Object.freeze(Object.defineProperty({__proto__:null,default:LH},Symbol.toStringTag,{value:"Module"})),$H={class:"flex align-center"},UH={class:"mr-4"},BH={class:"dialog-footer"},VH=rr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=Ge(!1),v=Ge(!1);fb(c,b=>{b||(u.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const f=b=>{u.value={...u.value,...Ne.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((_,x)=>{_&&(a("refresh",Ne.cloneDeep(u.value)),c.value=!1)})};return t({open:f}),(b,_)=>{const x=J("AppIcon"),A=J("el-tooltip"),M=J("el-input-number"),S=J("el-form-item"),E=J("el-col"),D=J("el-row"),I=J("el-slider"),B=J("el-form"),$=J("el-button"),j=J("el-dialog");return Oe(),at(j,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":_[5]||(_[5]=U=>c.value=U),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:C(()=>[ee("span",BH,[k($,{onClick:_[3]||(_[3]=nn(U=>c.value=!1,["prevent"]))},{default:C(()=>[ct(_e(b.$t("common.cancel")),1)]),_:1}),k($,{type:"primary",onClick:_[4]||(_[4]=U=>g()),loading:v.value},{default:C(()=>[ct(_e(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(B,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:u.value},{default:C(()=>[k(D,{gutter:12},{default:C(()=>[k(E,{span:12},{default:C(()=>[k(S,null,{label:C(()=>[ee("div",$H,[ee("span",UH,"Score "+_e(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),k(A,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:C(()=>[k(x,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:C(()=>[k(M,{modelValue:u.value.similarity,"onUpdate:modelValue":_[0]||(_[0]=U=>u.value.similarity=U),min:0,max:u.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),k(E,{span:12},{default:C(()=>[k(S,{label:b.$t("views.application.dialog.topReferences")},{default:C(()=>[k(M,{modelValue:u.value.topN,"onUpdate:modelValue":_[1]||(_[1]=U=>u.value.topN=U),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),k(S,{label:b.$t("views.application.dialog.maxCharacters")},{default:C(()=>[k(I,{modelValue:u.value.maxParagraphCharNumber,"onUpdate:modelValue":_[2]||(_[2]=U=>u.value.maxParagraphCharNumber=U),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),WH={class:"flex-between"},GH={class:"flex-between"},zH={class:"w-full"},HH={class:"flex-between"},XH={class:"flex-between"},qH=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ge(),v={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3},show_knowledge:!1},f=Ge(null),g=()=>{var $;($=c.value)==null||$.open(x.value.reranker_setting)},b=$=>{const j=Ne.cloneDeep(u.nodeModel.properties.nodeData.reranker_reference_list);j.splice($,1),Ne.set(u.nodeModel.properties.nodeData,"reranker_reference_list",j)},_=$=>$.ctrlKey===!0?($.preventDefault(),!0):($.stopPropagation(),!0),x=Zn({get:()=>(u.nodeModel.properties.nodeData||Ne.set(u.nodeModel.properties,"nodeData",v),u.nodeModel.properties.nodeData),set:$=>{Ne.set(u.nodeModel.properties,"nodeData",$)}});function A($){Ne.set(u.nodeModel.properties.nodeData,"reranker_setting",$)}const M=t();function S(){var j;const $=r.value==="systemManage"?{modelType:"RERANKER",workspaceId:(j=M.value)==null?void 0:j.workspaceId}:{modelType:"RERANKER"};So({type:"model",systemType:r.value}).getSelectModelList($).then(U=>{f.value=Ne.groupBy(U==null?void 0:U.data,"provider")})}const E=()=>{const $=Ne.cloneDeep(u.nodeModel.properties.nodeData.reranker_reference_list);$.push([]),Ne.set(u.nodeModel.properties.nodeData,"reranker_reference_list",$)},D=Ge(),I=Ge(),B=()=>{var $;return Promise.all([I.value?I.value.validate():Promise.resolve(""),($=D.value)==null?void 0:$.validate()]).catch(j=>Promise.reject({node:u.nodeModel,errMessage:j}))};return Hr(()=>{S(),Ne.set(u.nodeModel,"validate",B)}),($,j)=>{const U=J("Plus"),K=J("el-icon"),Q=J("el-button"),H=J("el-form-item"),W=J("el-col"),z=J("AppIcon"),Y=J("el-row"),q=J("ModelSelect"),oe=J("el-switch"),ie=J("el-form"),Pe=J("el-card");return Oe(),at(Ho,{nodeModel:$.nodeModel},{default:C(()=>[k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(ie,{onSubmit:j[4]||(j[4]=nn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:D,"hide-required-asterisk":""},{default:C(()=>[k(H,{label:$.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:$.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:C(()=>[ee("div",WH,[ee("span",null,[ct(_e($.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),j[5]||(j[5]=ee("span",{class:"color-danger"},"*",-1))]),k(Q,{onClick:E,link:"",type:"primary"},{default:C(()=>[k(K,{class:"mr-4"},{default:C(()=>[k(U)]),_:1})]),_:1})])]),default:C(()=>[(Oe(!0),en(Or,null,io(x.value.reranker_reference_list,(we,be)=>(Oe(),at(Y,{gutter:8,style:{"margin-bottom":"8px"},key:be,class:"w-full"},{default:C(()=>[k(W,{span:22},{default:C(()=>[k(H,{prop:"reranker_reference_list."+be,rules:{type:"array",required:!0,message:$.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:C(()=>[(Oe(),at(oo,{key:be,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:x.value.reranker_reference_list[be],"onUpdate:modelValue":ye=>x.value.reranker_reference_list[be]=ye},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),k(W,{span:2},{default:C(()=>[k(Q,{link:"",type:"info",onClick:ye=>b(be)},{default:C(()=>[k(z,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),k(H,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:C(()=>[ee("div",GH,[ee("span",null,_e($.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(Q,{type:"primary",link:"",onClick:g},{default:C(()=>[k(z,{iconName:"app-setting"})]),_:1})])]),default:C(()=>[ee("div",zH,[k(Y,null,{default:C(()=>[k(W,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(" Score "+_e($.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),k(W,{span:12,class:"lighter"},{default:C(()=>{var we;return[ct(_e((we=x.value.reranker_setting.similarity)==null?void 0:we.toFixed(3)),1)]}),_:1}),k(W,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(_e($.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),k(W,{span:12,class:"lighter"},{default:C(()=>[ct(_e(x.value.reranker_setting.topN),1)]),_:1}),k(W,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(_e($.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),k(W,{span:12,class:"lighter"},{default:C(()=>[ct(_e(x.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(H,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:C(()=>[ee("div",HH,[ee("span",null,[ct(_e($.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label")),1),j[6]||(j[6]=ee("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:I,nodeModel:$.nodeModel,class:"w-full",placeholder:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),modelValue:x.value.questionReferenceAddress,"onUpdate:modelValue":j[0]||(j[0]=we=>x.value.questionReferenceAddress=we)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:$.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:$.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",XH,[ee("span",null,[ct(_e($.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),j[7]||(j[7]=ee("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[k(q,{onWheel:_,teleported:!1,modelValue:x.value.reranker_model_id,"onUpdate:modelValue":j[1]||(j[1]=we=>x.value.reranker_model_id=we),placeholder:$.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:f.value,onSubmitModel:S,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{label:$.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label"),prop:"show_knowledge",required:"",onClick:j[3]||(j[3]=nn(()=>{},["prevent"]))},{default:C(()=>[k(oe,{size:"small",modelValue:x.value.show_knowledge,"onUpdate:modelValue":j[2]||(j[2]=we=>x.value.show_knowledge=we)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(VH,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:A},null,512)]),_:1},8,["nodeModel"])}}}),YH=Yd(qH,[["__scopeId","data-v-85717907"]]);class KH extends Xo{constructor(t){super(t,YH)}}const ZH={type:"reranker-node",model:qo,view:KH},JH=Object.freeze(Object.defineProperty({__proto__:null,default:ZH},Symbol.toStringTag,{value:"Module"})),QH={class:"title-decoration-1 mb-8"},eX={class:"flex-between"},tX={key:0,class:"w-full"},nX={class:"flex align-center",style:{"line-height":"20px"}},rX=["title"],oX={key:1,class:"w-full"},iX={class:"flex-between"},aX={class:"flex align-center"},lX={class:"flex align-center"},uX={class:"w-full"},sX={key:1},cX={class:"flex align-center mb-8"},fX=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=aa(),n=e,a=Ge(),r=[{value:"contain",label:Ot("views.applicationWorkflow.compare.contain")},{value:"not_contain",label:Ot("views.applicationWorkflow.compare.not_contain")},{value:"eq",label:Ot("views.applicationWorkflow.compare.eq")}],u=Zn(()=>t.path.includes("shared")?"systemShare":t.path.includes("resource-management")?"systemManage":t.path.includes("share/")?"workspaceShare":"workspace"),c={knowledge_id_list:[],search_scope_type:"custom",search_scope_source:"knowledge",search_scope_reference:[],search_mode:"auto",question_reference:[],search_condition_type:"AND",search_condition_list:[],knowledge_tags:[]},v=Zn({get:()=>(n.nodeModel.properties.nodeData||Ne.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:B=>{Ne.set(n.nodeModel.properties,"nodeData",B)}}),f=Ge(),g=Ge(),b=Ge([]),_=Ge(!1);function x(B){const $=n.nodeModel.properties.nodeData.knowledge_id_list.filter(j=>j!==B);Ne.set(n.nodeModel.properties.nodeData,"knowledge_id_list",$)}function A(B){Ne.set(n.nodeModel.properties.nodeData,"knowledge_id_list",B.map($=>$.id)),Ne.set(n.nodeModel.properties.nodeData,"knowledge_list",B),b.value=B}function M(){g.value&&g.value.open(v.value.knowledge_id_list)}function S(){const B=Ne.cloneDeep(v.value.search_condition_list);B.push({key:"",compare:"contain",value:""}),Ne.set(v.value,"search_condition_list",B)}function E(B){const $=Ne.cloneDeep(v.value.search_condition_list);$.splice(B,1),Ne.set(v.value,"search_condition_list",$)}function D(B){if(B.length===0){Ne.set(v.value,"knowledge_tags",[]);return}So({type:"knowledge",systemType:u.value}).getAllTags({knowledge_ids:B},{}).then($=>{Ne.set(v.value,"knowledge_tags",$.data)})}fb(()=>v.value.knowledge_id_list,B=>{D(B)});const I=()=>{var B,$;return Promise.all([(B=a.value)==null?void 0:B.validate(),($=f.value)==null?void 0:$.validate()]).catch(j=>Promise.reject({node:n.nodeModel,errMessage:j}))};return Hr(()=>{b.value=n.nodeModel.properties.nodeData.knowledge_list,Ne.set(n.nodeModel,"validate",I)}),(B,$)=>{const j=J("el-button"),U=J("el-option"),K=J("el-select"),Q=J("el-text"),H=J("KnowledgeIcon"),W=J("Close"),z=J("el-icon"),Y=J("el-form-item"),q=J("el-tooltip"),oe=J("el-radio"),ie=J("el-radio-group"),Pe=J("el-col"),we=J("el-input"),be=J("el-row"),ye=J("el-form"),Xe=J("el-card");return Oe(),at(Ho,{nodeModel:B.nodeModel},{default:C(()=>[ee("h5",QH,_e(B.$t("views.applicationWorkflow.nodeSetting")),1),k(Xe,{shadow:"never",class:"card-never"},{default:C(()=>[k(ye,{onSubmit:$[7]||($[7]=nn(()=>{},["prevent"])),model:v.value,"label-position":"top","hide-required-asterisk":"","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:f},{default:C(()=>[k(Y,{label:B.$t("views.chatLog.selectKnowledge")},{label:C(()=>[ee("div",eX,[ee("span",null,_e(B.$t("views.applicationWorkflow.nodes.searchDocumentNode.selectKnowledge")),1),ee("span",null,[v.value.search_scope_type==="custom"?(Oe(),at(j,{key:0,type:"primary",link:"",onClick:M},{default:C(()=>[k(yo,{iconName:"app-add-outlined"})]),_:1})):kn("",!0),k(K,{teleported:!1,size:"small",modelValue:v.value.search_scope_type,"onUpdate:modelValue":$[0]||($[0]=Ze=>v.value.search_scope_type=Ze),style:{width:"85px"}},{default:C(()=>[k(U,{label:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.custom"),value:"custom"},null,8,["label"]),k(U,{label:B.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"])]),_:1},8,["modelValue"])])])]),default:C(()=>{var Ze;return[v.value.search_scope_type==="custom"?(Oe(),en("div",tX,[((Ze=v.value.knowledge_id_list)==null?void 0:Ze.length)===0?(Oe(),at(Q,{key:0,type:"info"},{default:C(()=>[ct(_e(B.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(Oe(!0),en(Or,{key:1},io(v.value.knowledge_id_list,(yt,Be)=>{var qt,Yt,Pt;return Oe(),en("div",{key:Be,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[ee("div",nX,[k(H,{type:(qt=sr(ws)(b.value,yt,"id"))==null?void 0:qt.type,class:"mr-8",size:20},null,8,["type"]),ee("div",{class:"ellipsis",title:(Yt=sr(ws)(b.value,yt,"id"))==null?void 0:Yt.name},_e((Pt=sr(ws)(b.value,yt,"id"))==null?void 0:Pt.name),9,rX)]),k(j,{text:"",onClick:An=>x(yt)},{default:C(()=>[k(z,null,{default:C(()=>[k(W)]),_:1})]),_:2},1032,["onClick"])])}),128))])):(Oe(),en("div",oX,[k(Y,{prop:"search_scope_reference",rules:{message:B.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:C(()=>[ee("div",iX,[ee("span",null,[ct(_e(B.$t("views.applicationWorkflow.nodes.searchDocumentNode.select_variable"))+" ",1),$[8]||($[8]=ee("span",{class:"color-danger"},"*",-1))]),ee("span",null,[k(K,{teleported:!1,size:"small",modelValue:v.value.search_scope_source,"onUpdate:modelValue":$[1]||($[1]=yt=>v.value.search_scope_source=yt),style:{width:"95px"},onChange:$[2]||($[2]=yt=>v.value.search_scope_reference=[])},{default:C(()=>[k(U,{label:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.knowledge_list"),value:"knowledge"},null,8,["label"]),k(U,{label:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.document_list"),value:"document"},null,8,["label"])]),_:1},8,["modelValue"])])])]),default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:a,nodeModel:B.nodeModel,class:"w-full",placeholder:B.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.search_scope_reference,"onUpdate:modelValue":$[3]||($[3]=yt=>v.value.search_scope_reference=yt)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"])]))]}),_:1},8,["label"]),k(Y,{label:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.searchSetting")},{default:C(()=>[k(ie,{modelValue:v.value.search_mode,"onUpdate:modelValue":$[4]||($[4]=Ze=>v.value.search_mode=Ze)},{default:C(()=>[k(oe,{value:"auto"},{default:C(()=>[ee("span",aX,[ct(_e(B.$t("views.applicationWorkflow.nodes.searchDocumentNode.auto"))+" ",1),k(q,{content:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.autoTooltip"),placement:"top"},{default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])])]),_:1}),v.value.search_scope_type==="custom"?(Oe(),at(oe,{key:0,value:"custom"},{default:C(()=>[ee("span",lX,[ct(_e(B.$t("views.applicationWorkflow.nodes.searchDocumentNode.custom"))+" ",1),k(q,{c:"",content:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.customTooltip"),placement:"top"},{default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])])]),_:1})):kn("",!0)]),_:1},8,["modelValue"])]),_:1},8,["label"]),ee("div",uX,[v.value.search_mode==="auto"?(Oe(),at(Y,{key:0,label:B.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"question_reference",rules:{message:B.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:a,nodeModel:B.nodeModel,class:"w-full",placeholder:B.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:v.value.question_reference,"onUpdate:modelValue":$[5]||($[5]=Ze=>v.value.question_reference=Ze)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):(Oe(),en("div",sX,[ee("div",cX,[k(Q,{type:"info",class:"lighter",size:"small"},{default:C(()=>[ct(_e(B.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1)]),_:1}),k(K,{modelValue:v.value.search_condition_type,"onUpdate:modelValue":$[6]||($[6]=Ze=>v.value.search_condition_type=Ze),size:"small",style:{width:"60px",margin:"0 8px"}},{default:C(()=>[k(U,{label:B.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),k(U,{label:B.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),k(Q,{type:"info",class:"lighter",size:"small"},{default:C(()=>[ct(_e(B.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)]),_:1})]),(Oe(!0),en(Or,null,io(v.value.search_condition_list,(Ze,yt)=>(Oe(),en("div",{key:yt},[k(be,{gutter:8,class:"mb-8"},{default:C(()=>[k(Pe,{span:8},{default:C(()=>[k(K,{modelValue:Ze.key,"onUpdate:modelValue":Be=>Ze.key=Be,filterable:""},{default:C(()=>[(Oe(!0),en(Or,null,io(v.value.knowledge_tags,Be=>(Oe(),at(U,{key:Be,label:Be.key,value:Be.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(Pe,{span:7},{default:C(()=>[k(K,{modelValue:Ze.compare,"onUpdate:modelValue":Be=>Ze.compare=Be},{default:C(()=>[(Oe(),en(Or,null,io(r,Be=>k(U,{key:Be.value,value:Be.value,label:Be.label},null,8,["value","label"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(Pe,{span:8},{default:C(()=>[k(we,{modelValue:Ze.value,"onUpdate:modelValue":Be=>Ze.value=Be,placeholder:B.$t("views.applicationWorkflow.nodes.searchDocumentNode.valueMessage",{name:"{变量}"})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),k(Pe,{span:1},{default:C(()=>[k(j,{link:"",onClick:Be=>E(yt),type:"info",class:"mt-4"},{default:C(()=>[k(yo,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(j,{link:"",type:"primary",onClick:S,class:"mt-8"},{default:C(()=>[k(yo,{iconName:"app-add-outlined",class:"mr-4"}),ct(" "+_e(B.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:1})]))])]),_:1},8,["model"])]),_:1}),k(iM,{ref_key:"AddKnowledgeDialogRef",ref:g,onAddData:A,data:b.value,loading:_.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class dX extends Xo{constructor(t){super(t,fX)}}const pX={type:"search-document-node",model:qo,view:dX},hX=Object.freeze(Object.defineProperty({__proto__:null,default:pX},Symbol.toStringTag,{value:"Module"})),vX={class:"title-decoration-1 mb-8"},mX={class:"flex-between"},yX={class:"w-full"},gX={class:"flex align-center",style:{"line-height":"20px"}},bX=["title"],_X={class:"flex-between"},wX={class:"w-full"},EX=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a={knowledgeIdList:[],knowledgeSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[],showKnowledge:!1},r=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:E=>{Ne.set(t.nodeModel.properties,"nodeData",E)}}),u=Ge(),c=Ge(),v=Ge(),f=Ge([]),g=Ge(!1);function b(E){Ne.set(t.nodeModel.properties.nodeData,"knowledgeSetting",E.knowledgeSetting)}const _=()=>{var E;(E=c.value)==null||E.open(r.value,"WORK_FLOW")};function x(E){const D=t.nodeModel.properties.nodeData.knowledgeIdList.filter(I=>I!==E);Ne.set(t.nodeModel.properties.nodeData,"knowledgeIdList",D)}function A(E){Ne.set(t.nodeModel.properties.nodeData,"knowledgeIdList",E.map(D=>D.id)),f.value=E}function M(){v.value&&v.value.open(r.value.knowledgeIdList)}const S=()=>{var E;return Promise.all([n.value.validate(),(E=u.value)==null?void 0:E.validate()]).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};return Hr(()=>{f.value=t.nodeModel.properties.nodeData.knowledgeList,Ne.set(t.nodeModel,"validate",S)}),(E,D)=>{const I=J("Plus"),B=J("el-icon"),$=J("el-button"),j=J("el-text"),U=J("Close"),K=J("el-form-item"),Q=J("el-col"),H=J("el-row"),W=J("el-switch"),z=J("el-form"),Y=J("el-card");return Oe(),at(Ho,{nodeModel:E.nodeModel},{default:C(()=>[ee("h5",vX,_e(E.$t("views.applicationWorkflow.nodeSetting")),1),k(Y,{shadow:"never",class:"card-never"},{default:C(()=>[k(z,{onSubmit:D[3]||(D[3]=nn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:u},{default:C(()=>[k(K,{label:E.$t("views.chatLog.selectKnowledge")},{label:C(()=>[ee("div",mX,[ee("span",null,_e(E.$t("views.chatLog.selectKnowledge")),1),k($,{type:"primary",link:"",onClick:M},{default:C(()=>[k(B,null,{default:C(()=>[k(I)]),_:1})]),_:1})])]),default:C(()=>{var q;return[ee("div",yX,[((q=r.value.knowledgeIdList)==null?void 0:q.length)===0?(Oe(),at(j,{key:0,type:"info"},{default:C(()=>[ct(_e(E.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(Oe(!0),en(Or,{key:1},io(r.value.knowledgeIdList,(oe,ie)=>{var Pe,we,be;return Oe(),en("div",{key:ie,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[ee("div",gX,[k(sI,{type:(Pe=sr(ws)(f.value,oe,"id"))==null?void 0:Pe.type,class:"mr-8",size:20},null,8,["type"]),ee("div",{class:"ellipsis",title:(we=sr(ws)(f.value,oe,"id"))==null?void 0:we.name},_e((be=sr(ws)(f.value,oe,"id"))==null?void 0:be.name),9,bX)]),k($,{text:"",onClick:ye=>x(oe)},{default:C(()=>[k(B,null,{default:C(()=>[k(U)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),k(K,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:C(()=>[ee("div",_X,[ee("span",null,_e(E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k($,{type:"primary",link:"",onClick:_},{default:C(()=>[k(yo,{iconName:"app-setting"})]),_:1})])]),default:C(()=>[ee("div",wX,[k(H,null,{default:C(()=>[k(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(_e(E.$t("views.application.dialog.selectSearchMode")),1)]),_:1}),k(Q,{span:12,class:"lighter"},{default:C(()=>[ct(_e(E.$t(sr(cI)[r.value.knowledgeSetting.searchMode])),1)]),_:1}),k(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(_e(E.$t("views.application.dialog.similarityThreshold")),1)]),_:1}),k(Q,{span:12,class:"lighter"},{default:C(()=>{var q;return[ct(_e((q=r.value.knowledgeSetting.similarity)==null?void 0:q.toFixed(3)),1)]}),_:1}),k(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(_e(E.$t("views.application.dialog.topReferences")),1)]),_:1}),k(Q,{span:12,class:"lighter"},{default:C(()=>[ct(_e(r.value.knowledgeSetting.topN),1)]),_:1}),k(Q,{span:12,class:"color-secondary lighter"},{default:C(()=>[ct(_e(E.$t("views.application.dialog.maxCharacters")),1)]),_:1}),k(Q,{span:12,class:"lighter"},{default:C(()=>[ct(_e(r.value.knowledgeSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(K,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:n,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":D[0]||(D[0]=q=>r.value.questionReferenceAddress=q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(K,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label"),prop:"showKnowledge",rules:{message:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.requiredMessage"),trigger:"blur",required:!0},onClick:D[2]||(D[2]=nn(()=>{},["prevent"]))},{default:C(()=>[k(W,{size:"small",modelValue:r.value.showKnowledge,"onUpdate:modelValue":D[1]||(D[1]=q=>r.value.showKnowledge=q)},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),k(OI,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:b},null,512),k(iM,{ref_key:"AddKnowledgeDialogRef",ref:v,onAddData:A,data:f.value,loading:g.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class OX extends Xo{constructor(t){super(t,EX)}}const SX={type:"search-knowledge-node",model:qo,view:OX},xX=Object.freeze(Object.defineProperty({__proto__:null,default:SX},Symbol.toStringTag,{value:"Module"})),AX={class:"flex-between"},TX={class:"dialog-footer"},MX=rr({__name:"STTModelParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=aa(),{params:{id:r}}=a,u=Zn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=Ge(!1),v=Ge({}),f=Ge(),g=Ge(""),b=Ge(!1),_=Ge([]),x=n,A=(E,D,I)=>{v.value={},g.value=E,So({type:"model",systemType:u.value}).getModelParamsForm(E,b).then(B=>{var j;_.value=B.data;const $=B.data.map(U=>({[U.field]:U.show_default_value!==!1?U.default_value:void 0})).reduce((U,K)=>({...U,...K}),{});I&&Object.keys(I).forEach(U=>{U in $||delete I[U]}),I={...$,...I},(j=f.value)==null||j.render(_.value,I)}),c.value=!0},M=async()=>{var E;(E=f.value)==null||E.validate().then(()=>{x("refresh",v.value),c.value=!1})};return t({open:A,reset_default:(E,D)=>{So({type:"model",systemType:u.value}).getModelParamsForm(E,b).then(I=>{_.value=I.data;const B=I.data.map($=>({[$.field]:$.show_default_value!==!1?$.default_value:void 0})).reduce(($,j)=>({...$,...j}),{});x("refresh",B)})}}),(E,D)=>{const I=J("el-button"),B=J("el-dialog");return Oe(),at(B,{"align-center":"",title:E.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":D[2]||(D[2]=$=>c.value=$),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:C(()=>[ee("div",AX,[ee("span",TX,[k(I,{onClick:D[1]||(D[1]=nn($=>c.value=!1,["prevent"]))},{default:C(()=>[ct(_e(E.$t("common.cancel")),1)]),_:1}),k(I,{type:"primary",onClick:M,loading:b.value},{default:C(()=>[ct(_e(E.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:C(()=>[k(fI,{modelValue:v.value,"onUpdate:modelValue":D[0]||(D[0]=$=>v.value=$),model:v.value,"label-position":"top","require-asterisk-position":"right",render_data:_.value,ref_key:"dynamicsFormRef",ref:f},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),kX={class:"title-decoration-1 mb-8"},PX={class:"flex-between w-full"},NX={class:"flex-between w-full"},RX={class:"flex align-center"},CX={class:"mr-4"},DX=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ge(null),v=Ge(),f=Ge(),g=Ge(),b=()=>{var B;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(B=f.value)==null?void 0:B.validate()]).catch($=>Promise.reject({node:u.nodeModel,errMessage:$}))},_=B=>B.ctrlKey===!0?(B.preventDefault(),!0):(B.stopPropagation(),!0),x={stt_model_id:"",isResult:!0,audioList:[],modelParamsSetting:{}},A=Zn({get:()=>(u.nodeModel.properties.nodeData||Ne.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:B=>{Ne.set(u.nodeModel.properties,"nodeData",B)}}),M=()=>{var $;const B=A.value.stt_model_id;if(!B){zd(Ot("views.application.form.voiceInput.requiredMessage"));return}($=v.value)==null||$.open(B,a,A.value.modelParamsSetting)},S=B=>{Ne.set(u.nodeModel.properties.nodeData,"modelParamsSetting",B)};function E(B){var $;B?($=v.value)==null||$.reset_default(B,a):S({})}const D=t();function I(){var $;const B=r.value==="systemManage"?{modelType:"STT",workspace_id:($=D.value)==null?void 0:$.workspace_id}:{modelType:"STT"};So({type:"model",systemType:r.value}).getSelectModelList(B).then(j=>{c.value=Ne.groupBy(j==null?void 0:j.data,"provider")})}return Hr(()=>{I(),Ne.set(u.nodeModel,"validate",b)}),(B,$)=>{const j=J("AppIcon"),U=J("el-button"),K=J("el-form-item"),Q=J("el-tooltip"),H=J("el-switch"),W=J("el-form"),z=J("el-card");return Oe(),at(Ho,{"node-model":B.nodeModel},{default:C(()=>[ee("h5",kX,_e(B.$t("views.applicationWorkflow.nodeSetting")),1),k(z,{shadow:"never",class:"card-never"},{default:C(()=>[k(W,{onSubmit:$[4]||($[4]=nn(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:C(()=>[k(K,{label:B.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:B.$t("views.application.form.voiceInput.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",PX,[ee("div",null,[ee("span",null,[ct(_e(B.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),$[5]||($[5]=ee("span",{class:"color-danger"},"*",-1))])]),k(U,{type:"primary",link:"",onClick:M,disabled:!A.value.stt_model_id,class:"mr-4"},{default:C(()=>[k(j,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(th,{onWheel:_,teleported:!1,onChange:E,modelValue:A.value.stt_model_id,"onUpdate:modelValue":$[0]||($[0]=Y=>A.value.stt_model_id=Y),placeholder:B.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(K,{label:B.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:B.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:C(()=>[ee("div",NX,[ee("div",null,[ee("span",null,[ct(_e(B.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),$[6]||($[6]=ee("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:B.nodeModel,class:"w-full",placeholder:B.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:A.value.audioList,"onUpdate:modelValue":$[1]||($[1]=Y=>A.value.audioList=Y)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(K,{label:B.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[3]||($[3]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",RX,[ee("div",CX,[ee("span",null,_e(B.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(Q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(B.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(H,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":$[2]||($[2]=Y=>A.value.isResult=Y)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(MX,{ref_key:"STTModeParamSettingDialogRef",ref:v,onRefresh:S},null,512)]),_:1},8,["node-model"])}}});class jX extends Xo{constructor(t){super(t,DX)}}const IX={type:"speech-to-text-node",model:qo,view:jX},LX=Object.freeze(Object.defineProperty({__proto__:null,default:IX},Symbol.toStringTag,{value:"Module"})),FX={class:"title-decoration-1 mb-8"},$X={class:"break-all"},UX={class:"title-decoration-1 mb-8"},BX={class:"break-all"},VX=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ge(!1),a=[{label:Ot("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Ot("views.application.form.historyRecord.label"),value:"historyContext"},{label:Ot("chat.chatId"),value:"chatId"},{label:Ot("chat.chatUserId"),value:"chatUserId"},{label:Ot("chat.chatUserType"),value:"chatUserType"},{label:Ot("chat.chatUser"),value:"chatUser"}],r=()=>{const f=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").map(b=>Ne.cloneDeep(b.properties.user_input_field_list)).reduce((b,_)=>[...b,..._],[]).map(b=>b.label&&b.label.input_type==="TooltipLabel"?{label:b.label.label,value:b.field||b.variable}:{label:b.label||b.name,value:b.field||b.variable}),g=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").map(b=>Ne.cloneDeep(b.properties.api_input_field_list)).reduce((b,_)=>[...b,..._],[]).map(b=>({label:b.name||b.variable,value:b.variable}));return[...f,...g]},u=()=>{const f=r();Ne.set(t.nodeModel.properties.config,"globalFields",[...a,...f])},c=()=>{const f=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Ne.cloneDeep(g.properties.chat_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.label,value:g.field}));Ne.set(t.nodeModel.properties.config,"chatFields",f)};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",u),t.nodeModel.graphModel.eventCenter.on("chatFieldList",c);const v=()=>{let f=Ne.cloneDeep(t.nodeModel.properties.config.fields);const g=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").filter(_=>_.properties.nodeData.fileUploadEnable).map(_=>Ne.cloneDeep(_.properties.nodeData.fileUploadSetting)).filter(_=>_);if(f=f.filter(_=>_.value!=="image"&&_.value!=="document"&&_.value!=="audio"&&_.value!=="video"&&_.value!=="other"),g.length===0){Ne.set(t.nodeModel.properties.config,"fields",f);return}const b=[];g[0].document&&b.push({label:Ot("common.fileUpload.document"),value:"document"}),g[0].image&&b.push({label:Ot("common.fileUpload.image"),value:"image"}),g[0].audio&&b.push({label:Ot("common.fileUpload.audio"),value:"audio"}),g[0].video&&b.push({label:Ot("common.fileUpload.video"),value:"video"}),g[0].other&&b.push({label:Ot("common.fileUpload.other"),value:"other"}),Ne.set(t.nodeModel.properties.config,"fields",[...f,...b])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",v),Hr(()=>{c(),u(),v()}),(f,g)=>{const b=J("el-button"),_=J("el-tooltip");return Oe(),at(Ho,{nodeModel:f.nodeModel},{default:C(()=>[ee("h5",FX,_e(f.$t("views.applicationWorkflow.variable.global")),1),(Oe(!0),en(Or,null,io(f.nodeModel.properties.config.globalFields,(x,A)=>(Oe(),en("div",{key:A,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[0]||(g[0]=M=>n.value=!0),onMouseleave:g[1]||(g[1]=M=>n.value=!1)},[ee("span",$X,_e(x.label)+" "+_e("{"+x.value+"}"),1),n.value===!0?(Oe(),at(_,{key:0,effect:"dark",content:f.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:C(()=>[k(b,{link:"",onClick:M=>sr(vw)(`{{global.${x.value}}}`),style:{padding:"0"}},{default:C(()=>[k(yo,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)],32))),128)),f.nodeModel.properties.config.chatFields?(Oe(),en(Or,{key:0},[ee("h5",UX,_e(f.$t("views.applicationWorkflow.variable.chat")),1),(Oe(!0),en(Or,null,io(f.nodeModel.properties.config.chatFields?f.nodeModel.properties.config.chatFields:[],(x,A)=>(Oe(),en("div",{key:A,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[2]||(g[2]=M=>n.value=!0),onMouseleave:g[3]||(g[3]=M=>n.value=!1)},[ee("span",BX,_e(x.label)+" "+_e("{"+x.value+"}"),1),n.value===!0?(Oe(),at(_,{key:0,effect:"dark",content:f.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:C(()=>[k(b,{link:"",onClick:M=>sr(vw)(`{{chat.${x.value}}}`),style:{padding:"0"}},{default:C(()=>[k(yo,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)],32))),128))],64)):kn("",!0)]),_:1},8,["nodeModel"])}}});class WX extends Xo{constructor(t){super(t,VX)}}const GX={type:"start-node",model:qo,view:WX},zX=Object.freeze(Object.defineProperty({__proto__:null,default:GX},Symbol.toStringTag,{value:"Module"})),HX={class:"title-decoration-1 mb-8"},XX={class:"flex-between w-full"},qX={class:"flex-between w-full"},YX={class:"flex align-center"},KX={class:"mr-4"},ZX=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=Lu("getApplicationDetail"),n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Ge(),v=Ge(null),f=Ge(),g=Ge(),b=()=>{var I;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(I=f.value)==null?void 0:I.validate()]).catch(B=>Promise.reject({node:u.nodeModel,errMessage:B}))},_=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),x={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},A=Zn({get:()=>(u.nodeModel.properties.nodeData||Ne.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:I=>{Ne.set(u.nodeModel.properties,"nodeData",I)}}),M=t();function S(){var B;const I=r.value==="systemManage"?{modelType:"TTS",workspaceId:(B=M.value)==null?void 0:B.workspaceId}:{modelType:"TTS"};So({type:"model",systemType:r.value}).getSelectModelList(I).then($=>{v.value=Ne.groupBy($==null?void 0:$.data,"provider")})}const E=()=>{var B;const I=A.value.ttsModelId;if(!I){zd(Ot("views.application.form.voicePlay.requiredMessage"));return}(B=c.value)==null||B.open(I,a,A.value.modelParamsSetting)},D=I=>{A.value.modelParamsSetting=I};return Hr(()=>{S(),Ne.set(u.nodeModel,"validate",b)}),(I,B)=>{const $=J("AppIcon"),j=J("el-button"),U=J("ModelSelect"),K=J("el-form-item"),Q=J("el-tooltip"),H=J("el-switch"),W=J("el-form"),z=J("el-card");return Oe(),at(Ho,{"node-model":I.nodeModel},{default:C(()=>[ee("h5",HX,_e(I.$t("views.applicationWorkflow.nodeSetting")),1),k(z,{shadow:"never",class:"card-never"},{default:C(()=>[k(W,{onSubmit:B[4]||(B[4]=nn(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:C(()=>[k(K,{label:I.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"ttsModelId",rules:{required:!0,message:I.$t("views.application.form.voicePlay.placeholder"),trigger:"change"}},{label:C(()=>[ee("div",XX,[ee("div",null,[ee("span",null,[ct(_e(I.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),B[5]||(B[5]=ee("span",{class:"color-danger"},"*",-1))])]),k(j,{type:"primary",link:"",onClick:E,disabled:!A.value.ttsModelId,class:"mr-4"},{default:C(()=>[k($,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:C(()=>[k(U,{onWheel:_,teleported:!1,modelValue:A.value.ttsModelId,"onUpdate:modelValue":B[0]||(B[0]=Y=>A.value.ttsModelId=Y),placeholder:I.$t("views.application.form.voicePlay.placeholder"),options:v.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(K,{prop:"content_list",label:I.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:I.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:C(()=>[ee("div",qX,[ee("div",null,[ee("span",null,[ct(_e(I.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),B[6]||(B[6]=ee("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:A.value.content_list,"onUpdate:modelValue":B[1]||(B[1]=Y=>A.value.content_list=Y)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(K,{label:I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[3]||(B[3]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",YX,[ee("div",KX,[ee("span",null,_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(Q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k($,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(H,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":B[2]||(B[2]=Y=>A.value.isResult=Y)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(oM,{ref_key:"TTSModeParamSettingDialogRef",ref:c,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});class JX extends Xo{constructor(t){super(t,ZX)}}const QX={type:"text-to-speech-node",model:qo,view:JX},eq=Object.freeze(Object.defineProperty({__proto__:null,default:QX},Symbol.toStringTag,{value:"Module"})),tq={class:"title-decoration-1 mb-16"},nq={class:"lighter mb-8"},rq={key:0},oq={class:"flex-between"},iq={class:"flex"},aq={class:"flex"},lq={key:0,class:"color-danger"},uq={class:"flex align-center"},sq={class:"mr-4"},cq=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=aa(),a=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),r=Ge(),u={inputFieldList:[],isResult:!1},c=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:b=>{Ne.set(t.nodeModel.properties,"nodeData",b)}}),v=Ge(),f=()=>{var b;return(b=v.value)==null?void 0:b.validate().catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},g=()=>{if(!t.nodeModel.properties.nodeData.toolLibId){Ne.set(t.nodeModel.properties,"status",500);return}So({type:"tool",systemType:a.value}).getToolById(t.nodeModel.properties.nodeData.toolLibId).then(b=>{const _=t.nodeModel.properties.nodeData.inputFieldList,x=b.data.inputFieldList.map(A=>{const M=_.find(S=>S.name==A.name);return M&&M.source==A.source?{...A,value:JSON.parse(JSON.stringify(M.value))}:{...A,value:A.source=="reference"?[]:""}});Ne.set(t.nodeModel.properties.nodeData,"inputFieldList",x),Ne.set(t.nodeModel.properties,"status",b.data.isActive?200:500)}).catch(()=>{Ne.set(t.nodeModel.properties,"status",500)})};return Hr(()=>{var b;typeof((b=t.nodeModel.properties.nodeData)==null?void 0:b.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),g(),Ne.set(t.nodeModel,"validate",f)}),(b,_)=>{const x=J("el-tag"),A=J("el-option"),M=J("el-select"),S=J("el-input"),E=J("el-form-item"),D=J("el-text"),I=J("el-card"),B=J("el-tooltip"),$=J("el-switch"),j=J("el-form");return Oe(),at(Ho,{nodeModel:b.nodeModel},{default:C(()=>[ee("h5",tq,_e(b.$t("views.applicationWorkflow.nodeSetting")),1),ee("h5",nq,_e(b.$t("common.param.inputParam")),1),k(j,{onSubmit:_[2]||(_[2]=nn(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:v,model:c.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:C(()=>[k(I,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:C(()=>{var U;return[((U=c.value.inputFieldList)==null?void 0:U.length)>0?(Oe(),en("div",rq,[(Oe(!0),en(Or,null,io(c.value.inputFieldList,(K,Q)=>(Oe(),at(E,{key:K.name,label:K.name,prop:"inputFieldList."+Q+".value",rules:{required:K.isRequired,message:K.source==="reference"?b.$t("views.tool.form.param.selectPlaceholder"):b.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:C(()=>[ee("div",oq,[ee("div",iq,[ee("span",aq,[k(dI,{content:K.name,style:{"max-width":"130px"}},{default:C(()=>[ct(_e(K.name),1)]),_:2},1032,["content"]),K.isRequired?(Oe(),en("span",lq,"*")):kn("",!0)]),k(x,{type:"info",class:"info-tag ml-4"},{default:C(()=>[ct(_e(K.type),1)]),_:2},1024)]),k(M,{teleported:!1,modelValue:K.source,"onUpdate:modelValue":H=>K.source=H,size:"small",style:{width:"85px"}},{default:C(()=>[k(A,{label:b.$t("common.reference"),value:"reference"},null,8,["label"]),k(A,{label:b.$t("common.custom"),value:"content"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[K.source==="reference"?(Oe(),at(oo,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.tool.form.param.selectPlaceholder"),modelValue:K.value,"onUpdate:modelValue":H=>K.value=H},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Oe(),at(S,{key:1,modelValue:K.value,"onUpdate:modelValue":H=>K.value=H,placeholder:b.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Oe(),at(D,{key:1,type:"info"},{default:C(()=>[ct(_e(b.$t("common.noData")),1)]),_:1}))]}),_:1}),k(E,{label:b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[1]||(_[1]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",uq,[ee("div",sq,[ee("span",null,_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(B,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(yo,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k($,{size:"small",modelValue:c.value.isResult,"onUpdate:modelValue":_[0]||(_[0]=U=>c.value.isResult=U)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class fq extends Xo{constructor(t){super(t,cq)}}const dq={type:"tool-lib-node",model:qo,view:fq},pq=Object.freeze(Object.defineProperty({__proto__:null,default:dq},Symbol.toStringTag,{value:"Module"})),hq={class:"title-decoration-1 mb-16"},vq={class:"flex-between"},mq={class:"lighter mb-8"},yq={key:0},gq={class:"flex-between"},bq={class:"flex"},_q={class:"flex"},wq={key:0,class:"color-danger"},Eq={class:"lighter mb-8"},Oq={key:0,class:"mb-8"},Sq={class:"flex align-center"},xq={class:"mr-4"},Aq=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),a=Ge(),r=Ge(),u={code:"",inputFieldList:[],isResult:!1},c=Ge(null),v=Ge(!1),f=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:S=>{Ne.set(t.nodeModel.properties,"nodeData",S)}}),g=Ge(),b=()=>{var S;return(S=g.value)==null?void 0:S.validate().catch(E=>Promise.reject({node:t.nodeModel,errMessage:E}))};function _(S){Ne.set(t.nodeModel.properties.nodeData,"code",S)}function x(S,E){typeof E<"u"&&(c.value=E),a.value.open(S)}function A(S){const E=Ne.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);E.splice(S,1),Ne.set(t.nodeModel.properties.nodeData,"inputFieldList",E)}function M(S){const E=Ne.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),D={...S,value:S.source==="reference"?[]:""};c.value!==null?E.splice(c.value,1,D):E.push(D),Ne.set(t.nodeModel.properties.nodeData,"inputFieldList",E),c.value=null}return Hr(()=>{var S;typeof((S=t.nodeModel.properties.nodeData)==null?void 0:S.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),Ne.set(t.nodeModel,"validate",b),setTimeout(()=>{v.value=!0},100)}),(S,E)=>{const D=J("Plus"),I=J("el-icon"),B=J("el-button"),$=J("auto-tooltip"),j=J("el-tag"),U=J("AppIcon"),K=J("el-input"),Q=J("el-form-item"),H=J("el-text"),W=J("el-card"),z=J("CodemirrorEditor"),Y=J("el-tooltip"),q=J("el-switch"),oe=J("el-form");return Oe(),at(Ho,{nodeModel:S.nodeModel},{default:C(()=>[ee("h5",hq,_e(S.$t("views.applicationWorkflow.nodeSetting")),1),ee("div",vq,[ee("h5",mq,_e(S.$t("common.param.inputParam")),1),k(B,{link:"",type:"primary",onClick:E[0]||(E[0]=ie=>x())},{default:C(()=>[k(I,{class:"mr-4"},{default:C(()=>[k(D)]),_:1}),ct(" "+_e(S.$t("common.add")),1)]),_:1})]),k(oe,{onSubmit:E[4]||(E[4]=nn(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:g,model:f.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:C(()=>[k(W,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:C(()=>{var ie;return[((ie=f.value.inputFieldList)==null?void 0:ie.length)>0?(Oe(),en("div",yq,[(Oe(!0),en(Or,null,io(f.value.inputFieldList,(Pe,we)=>(Oe(),at(Q,{key:we,label:Pe.name,prop:"inputFieldList."+we+".value",rules:{required:Pe.isRequired,message:Pe.source==="reference"?S.$t("views.tool.form.param.selectPlaceholder"):S.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:C(()=>[ee("div",gq,[ee("div",bq,[ee("span",_q,[k($,{content:Pe.name,style:{"max-width":"130px"}},{default:C(()=>[ct(_e(Pe.name),1)]),_:2},1032,["content"]),Pe.isRequired?(Oe(),en("span",wq,"*")):kn("",!0)]),k(j,{type:"info",class:"info-tag ml-4"},{default:C(()=>[ct(_e(Pe.type),1)]),_:2},1024)]),ee("div",null,[k(B,{text:"",onClick:nn(be=>x(Pe,we),["stop"])},{default:C(()=>[k(U,{iconName:"app-edit"})]),_:2},1032,["onClick"]),k(B,{text:"",onClick:be=>A(we),style:{"margin-left":"4px !important"}},{default:C(()=>[k(U,{iconName:"app-delete"})]),_:2},1032,["onClick"])])])]),default:C(()=>[Pe.source==="reference"?(Oe(),at(oo,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.tool.form.param.selectPlaceholder"),modelValue:Pe.value,"onUpdate:modelValue":be=>Pe.value=be,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Oe(),at(K,{key:1,modelValue:Pe.value,"onUpdate:modelValue":be=>Pe.value=be,placeholder:S.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Oe(),at(H,{key:1,type:"info"},{default:C(()=>[ct(_e(S.$t("common.noData")),1)]),_:1}))]}),_:1}),ee("h5",Eq,_e(S.$t("views.tool.form.param.code")),1),v.value?(Oe(),en("div",Oq,[k(z,{title:S.$t("views.tool.form.param.code"),modelValue:f.value.code,"onUpdate:modelValue":E[1]||(E[1]=ie=>f.value.code=ie),onWheel:n,style:{height:"130px !important"},onSubmitDialog:_},null,8,["title","modelValue"])])):kn("",!0),k(Q,{label:S.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:E[3]||(E[3]=nn(()=>{},["prevent"]))},{label:C(()=>[ee("div",Sq,[ee("div",xq,[ee("span",null,_e(S.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(Y,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:C(()=>[ct(_e(S.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:C(()=>[k(U,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:C(()=>[k(q,{size:"small",modelValue:f.value.isResult,"onUpdate:modelValue":E[2]||(E[2]=ie=>f.value.isResult=ie)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),k(JI,{ref_key:"FieldFormDialogRef",ref:a,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}});class Tq extends Xo{constructor(t){super(t,Aq)}}const Mq={type:"tool-node",model:qo,view:Tq},kq=Object.freeze(Object.defineProperty({__proto__:null,default:Mq},Symbol.toStringTag,{value:"Module"})),Pq={class:"title-decoration-1 mb-8"},Nq={class:"flex-between lighter"},Rq={key:0,class:"mt-8"},Cq=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:fl(),type:"选项 1",option:""}]},a=(b,_,x)=>{const M=Ne.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(S=>S.id===_.id?{...S,height:b.height,index:x}:S);Ne.set(t.nodeModel.properties,"branchConditionList",M),f(t.nodeModel.properties.nodeData.branch,!0)},r=Zn({get:()=>(t.nodeModel.properties.nodeData||(Ne.set(t.nodeModel.properties,"nodeData",n),f(n.branch,!0)),t.nodeModel.properties.nodeData),set:b=>{Ne.set(t.nodeModel.properties,"nodeData",b)}}),u=Ge();Ge();const c=()=>{var _;const b=[(_=u.value)==null?void 0:_.validate()];return Promise.all(b).catch(x=>Promise.reject({node:t.nodeModel,errMessage:x}))};function v(){const b=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch),_={type:"选项 "+(b.length+1),id:fl(),option:"选项 "+(b.length+1)};b.splice(b.length,0,_),f(b,!0),Ne.set(t.nodeModel.properties.nodeData,"branch",b)}function f(b,_){const x=Ne.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),A=b.map((M,S)=>{const E=x.find(D=>D.id===M.id);if(E)return{index:S,height:E.height,id:M.id};if(_)return{index:S,height:100,id:M.id}}).filter(M=>M);Ne.set(t.nodeModel.properties,"branchConditionList",A),t.nodeModel.refreshBranch()}function g(b){const _=Ne.cloneDeep(t.nodeModel.properties.nodeData.branch);if(_[b].conditions.length===0){const A=_.splice(b,1).map(M=>t.nodeModel.id+"_"+M.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(M=>A.includes(M.sourceAnchorId)).map(M=>M.id)),f(_,!1),_.forEach((M,S)=>{M.type="选项 "+(S+1)})}Ne.set(t.nodeModel.properties.nodeData,"branch",_)}return Hr(()=>{Ne.set(t.nodeModel,"validate",c)}),(b,_)=>{const x=J("el-form-item"),A=J("el-input"),M=J("el-col"),S=J("Delete"),E=J("el-icon"),D=J("el-button"),I=J("el-row"),B=J("el-card"),$=J("Plus"),j=J("el-form"),U=eh("resize");return Oe(),at(Ho,{nodeModel:b.nodeModel},{default:C(()=>[ee("h5",Pq,_e(b.$t("views.applicationWorkflow.nodeSetting")),1),k(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(j,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:u,onSubmit:_[1]||(_[1]=nn(()=>{},["prevent"]))},{default:C(()=>[k(x,{label:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:C(()=>[k(pc,{title:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":_[0]||(_[0]=K=>r.value.labelName=K),style:{height:"100px"},placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(Oe(!0),en(Or,null,io(r.value.branch,(K,Q)=>za((Oe(),at(B,{key:K.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:C(()=>[ee("div",Nq,_e(K.type),1),Q!==r.value.branch.length?(Oe(),en("div",Rq,[k(I,{gutter:8},{default:C(()=>[k(M,{span:23},{default:C(()=>[k(x,{prop:"branch."+Q+".option",rules:{required:!0,message:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:C(()=>[k(A,{modelValue:K.option,"onUpdate:modelValue":H=>K.option=H,placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(M,{span:1},{default:C(()=>[k(D,{disabled:Q===0,link:"",type:"info",class:"mt-4",onClick:H=>g(Q)},{default:C(()=>[k(E,null,{default:C(()=>[k(S)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):kn("",!0)]),_:2},1024)),[[U,H=>a(H,K,Q)]])),128)),k(D,{link:"",type:"primary",onClick:v},{default:C(()=>[k(E,{class:"mr-4"},{default:C(()=>[k($)]),_:1}),ct(" "+_e(b.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class Dq extends Xo{constructor(t){super(t,Cq)}}const jq=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class Iq extends qo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=jq(c,g);f.push({x:n+r/2-10,y:v?a-u/2+275+_+b.height/2:a-15,id:`${t}_${b.id}_right`,type:"right"})}return f}}const Lq={type:"user-select-node",model:Iq,view:Dq},Fq=Object.freeze(Object.defineProperty({__proto__:null,default:Lq},Symbol.toStringTag,{value:"Module"})),$q={class:"dialog-footer"},Uq=rr({__name:"GroupFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge(!1),c=Ge(!1),v=Ge(null),f=Ge({field:"",label:""}),g=ch({label:[{required:!0,message:Ot("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"}],field:[{required:!0,message:Ot("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=Ge(!1),_=(M,S)=>{M&&(f.value=Ne.cloneDeep(M),c.value=!0,v.value=S),b.value=!0},x=()=>{b.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},A=async M=>{M&&await M.validate(S=>{S&&a("refresh",f.value,v.value)})};return t({open:_,close:x}),(M,S)=>{const E=J("el-input"),D=J("el-form-item"),I=J("el-form"),B=J("el-button"),$=J("el-dialog");return Oe(),at($,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableAggregationNode.editGroup"):M.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup"),modelValue:b.value,"onUpdate:modelValue":S[3]||(S[3]=j=>b.value=j),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:C(()=>[ee("span",$q,[k(B,{onClick:nn(x,["prevent"])},{default:C(()=>[ct(_e(M.$t("common.cancel")),1)]),_:1}),k(B,{type:"primary",onClick:S[2]||(S[2]=j=>A(r.value)),loading:u.value},{default:C(()=>[ct(_e(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:C(()=>[k(I,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right"},{default:C(()=>[k(D,{label:M.$t("common.variable"),required:!0,prop:"field",rules:g.field},{default:C(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":S[0]||(S[0]=j=>f.value.field=j),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:C(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":S[1]||(S[1]=j=>f.value.label=j),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Bq={class:"title-decoration-1 mb-8"},Vq={class:"flex-between"},Wq={class:"flex-between mb-12"},Gq={class:"font-bold"},zq={class:"flex align-center",style:{"margin-right":"-3px"}},Hq=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(),r=Ge(),u={strategy:"first_non_null",groupList:[{id:fl(),label:"Group1",field:"Group1",variableList:[{v_id:fl(),variable:[]}]}]},c=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:E=>{Ne.set(t.nodeModel.properties,"nodeData",E)}}),v=Ge([]);function f(E,D){let I=null;E&&D!==void 0&&(I={field:E.field,label:E.label}),r.value.open(I,D)}function g(E,D){for(let B=0;B<v.value.length;B++)if(v.value[B].field===E.field&&D!==B){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+E.field);return}[void 0,null].includes(D)?(v.value.push(E),M(E)):(v.value.splice(D,1,E),b(E,D)),r.value.close();const I=[...v.value.map(B=>({label:B.label,value:B.field}))];Ne.set(t.nodeModel.properties.config,"fields",I)}const b=(E,D)=>{const I=Ne.cloneDeep(c.value.groupList);I[D].field=E.field,I[D].label=E.label,c.value.groupList=I},_=E=>{const D=Ne.cloneDeep(c.value.groupList);D.splice(E,1),c.value.groupList=D,v.value.splice(E,1);const I=D.map(B=>({label:B.label,value:B.field}));Ne.set(t.nodeModel.properties.config,"fields",I)},x=E=>{const D=Ne.cloneDeep(c.value.groupList);D[E].variableList.push({v_id:fl(),variable:[]}),c.value.groupList=D},A=(E,D)=>{const I=Ne.cloneDeep(c.value.groupList);I[E].variableList.splice(D,1),c.value.groupList=I},M=E=>{const D=Ne.cloneDeep(c.value.groupList);D.push({id:fl(),field:E.field,label:E.label,variableList:[{v_id:fl(),variable:[]}]}),c.value.groupList=D},S=async()=>{var D;const E=[...a.value.map(I=>I.validate()),(D=n.value)==null?void 0:D.validate()];return Promise.all(E).catch(I=>Promise.reject({node:t.nodeModel,errMessage:I}))};return Hr(()=>{var D;typeof((D=t.nodeModel.properties.nodeData)==null?void 0:D.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),Ne.set(t.nodeModel,"validate",S),t.nodeModel.properties.nodeData.groupList&&(v.value=c.value.groupList.map(I=>({label:I.label,field:I.field})));const E=c.value.groupList.map(I=>({label:I.label,value:I.field}));Ne.set(t.nodeModel.properties.config,"fields",E)}),(E,D)=>{const I=J("el-option"),B=J("el-select"),$=J("el-form-item"),j=J("EditPen"),U=J("el-icon"),K=J("el-button"),Q=J("el-col"),H=J("el-row"),W=J("el-card"),z=J("el-form");return Oe(),at(Ho,{nodeModel:E.nodeModel},{default:C(()=>[ee("h5",Bq,_e(E.$t("views.applicationWorkflow.nodeSetting")),1),k(z,{onSubmit:D[2]||(D[2]=nn(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableAggregationRef",ref:n,"hide-required-asterisk":""},{default:C(()=>[k($,{label:E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"),rules:{required:!0,trigger:"change"}},{label:C(()=>[ee("div",Vq,[ee("div",null,[ee("span",null,[ct(_e(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"))+" ",1),D[3]||(D[3]=ee("span",{class:"color-danger"},"*",-1))])])])]),default:C(()=>[k(B,{modelValue:c.value.strategy,"onUpdate:modelValue":D[0]||(D[0]=Y=>c.value.strategy=Y)},{default:C(()=>[k(I,{label:sr(Ot)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder"),value:"first_non_null"},null,8,["label"]),k(I,{label:sr(Ot)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder1"),value:"variable_to_json"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(Oe(!0),en(Or,null,io(c.value.groupList,(Y,q)=>(Oe(),en("div",{key:Y.id,class:"mb-8"},[k(W,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[ee("div",Wq,[ee("span",Gq,_e(Y.label),1),ee("div",zq,[k(K,{onClick:oe=>f(Y,q),link:""},{default:C(()=>[k(U,null,{default:C(()=>[k(j)]),_:1})]),_:2},1032,["onClick"]),k(K,{onClick:oe=>_(q),link:"",disabled:c.value.groupList.length<=1},{default:C(()=>[k(yo,{iconName:"app-delete"})]),_:2},1032,["onClick","disabled"])])]),(Oe(!0),en(Or,null,io(Y.variableList,(oe,ie)=>(Oe(),en("div",{key:oe.v_id},[k(H,null,{default:C(()=>[k(Q,{span:22},{default:C(()=>[k($,{prop:`groupList.${q}.variableList.${ie}.variable`,rules:{type:"array",required:!0,message:E.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:C(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:a,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.variable.placeholder"),modelValue:oe.variable,"onUpdate:modelValue":Pe=>oe.variable=Pe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(Q,{span:2},{default:C(()=>[k(K,{link:"",class:"mt-4 ml-4",disabled:Y.variableList.length<=1,onClick:Pe=>A(q,ie)},{default:C(()=>[k(yo,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(K,{onClick:oe=>x(q),type:"primary",size:"large",link:""},{default:C(()=>[k(yo,{iconName:"app-add-outlined",class:"mr-4"}),ct(" "+_e(E.$t("common.add")),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),k(K,{onClick:D[1]||(D[1]=Y=>f()),type:"primary",size:"large",link:""},{default:C(()=>[k(yo,{iconName:"app-add-outlined",class:"mr-4"}),ct(" "+_e(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup")),1)]),_:1})]),_:1},8,["model"]),k(Uq,{ref_key:"GroupFieldDialogRef",ref:r,onRefresh:g},null,512)]),_:1},8,["nodeModel"])}}});class Xq extends Xo{constructor(t){super(t,Hq)}getConfig(t){return t.model.properties.config}}const qq={type:"variable-aggregation-node",model:qo,view:Xq},Yq=Object.freeze(Object.defineProperty({__proto__:null,default:qq},Symbol.toStringTag,{value:"Module"})),Kq={class:"flex-between"},Zq={class:"flex-between mb-8"},Jq={class:"lighter"},Qq={key:0,class:"flex w-full"},eY=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],a=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),r={variableList:[{id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},u=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:A=>{Ne.set(t.nodeModel.properties,"nodeData",A)}}),c=Ge(),v=Ge(),f=Ge(),g=async()=>{var M;let A=[(M=c.value)==null?void 0:M.validate(),...v.value.map(S=>S.validate())];return f.value&&(A=[...A,...v.value.map(S=>S.validate())]),Promise.all(A).catch(S=>Promise.reject({node:t.nodeModel,errMessage:S}))};function b(){const A=Ne.cloneDeep(t.nodeModel.properties.nodeData.variableList),M={id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};A.push(M),Ne.set(t.nodeModel.properties.nodeData,"variableList",A)}function _(A){const M=Ne.cloneDeep(t.nodeModel.properties.nodeData.variableList);M.splice(A,1),Ne.set(t.nodeModel.properties.nodeData,"variableList",M)}function x(A){t.nodeModel.graphModel.nodes.map(M=>{M.id==="start-node"&&(M.properties.config.globalFields.forEach(S=>{S.value===A.fields[1]&&(A.name=S.label)}),M.properties.config.chatFields.forEach(S=>{S.value===A.fields[1]&&(A.name=S.label)}))})}return Hr(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&gc(t.nodeModel)&&Ne.set(t.nodeModel.properties.nodeData,"isResult",!0),Ne.set(t.nodeModel,"validate",g)}),(A,M)=>{const S=J("AppIcon"),E=J("el-button"),D=J("el-form-item"),I=J("el-option"),B=J("el-select"),$=J("el-input"),j=J("el-input-number"),U=J("CodemirrorEditor"),K=J("el-card"),Q=J("Plus"),H=J("el-icon"),W=J("el-form");return Oe(),at(Ho,{nodeModel:A.nodeModel},{default:C(()=>[k(W,{onSubmit:M[0]||(M[0]=nn(()=>{},["prevent"])),model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:C(()=>[(Oe(!0),en(Or,null,io(u.value.variableList,(z,Y)=>(Oe(),at(K,{key:z.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(D,{label:A.$t("views.applicationWorkflow.variable.label")},{label:C(()=>[ee("div",Kq,[ee("div",null,[ct(_e(A.$t("views.applicationWorkflow.variable.label"))+" ",1),M[1]||(M[1]=ee("span",{class:"color-danger"},"*",-1))]),u.value.variableList.length>1?(Oe(),at(E,{key:0,text:"",onClick:q=>_(Y)},{default:C(()=>[k(S,{iconName:"app-delete"})]),_:2},1032,["onClick"])):kn("",!0)])]),default:C(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:z.fields,"onUpdate:modelValue":q=>z.fields=q,global:!0,onChange:q=>x(z)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),ee("div",Zq,[ee("span",Jq,[ct(_e(A.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),M[2]||(M[2]=ee("span",{class:"color-danger"},"*",-1))]),k(B,{teleported:!1,modelValue:z.source,"onUpdate:modelValue":q=>z.source=q,size:"small",style:{width:"85px"}},{default:C(()=>[k(I,{label:A.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(I,{label:A.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),z.source==="custom"?(Oe(),en("div",Qq,[k(B,{modelValue:z.type,"onUpdate:modelValue":q=>z.type=q,style:{"max-width":"85px"},class:"mr-8",onChange:q=>u.value.variableList[Y].value=null},{default:C(()=>[(Oe(),en(Or,null,io(n,q=>k(I,{key:q,label:q,value:q},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),z.type==="string"?(Oe(),at(D,{key:0,prop:"variableList."+Y+".value",rules:{message:sr(Ot)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:C(()=>[k($,{modelValue:z.value,"onUpdate:modelValue":q=>z.value=q,placeholder:A.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:a},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):z.type==="num"?(Oe(),at(D,{key:1,prop:"variableList."+Y+".value",rules:{message:A.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:C(()=>[k(j,{modelValue:z.value,"onUpdate:modelValue":q=>z.value=q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):z.type==="json"?(Oe(),at(D,{key:2,class:"w-full",prop:"variableList."+Y+".value",rules:[{message:A.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(q,oe,ie)=>{try{JSON.parse(oe),ie()}catch{ie(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:C(()=>[k(U,{title:"JSON",modelValue:z.value,"onUpdate:modelValue":q=>z.value=q,style:{height:"100px",width:"155px"},onSubmitDialog:q=>u.value.variableList[Y].value=q},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):kn("",!0)])):(Oe(),at(D,{key:1},{default:C(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:f,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:z.reference,"onUpdate:modelValue":q=>z.reference=q},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),k(E,{link:"",type:"primary",onClick:b},{default:C(()=>[k(H,{class:"mr-4"},{default:C(()=>[k(Q)]),_:1}),ct(" "+_e(A.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class tY extends Xo{constructor(t){super(t,eY)}}const nY={type:"variable-assign-node",model:qo,view:tY},rY=Object.freeze(Object.defineProperty({__proto__:null,default:nY},Symbol.toStringTag,{value:"Module"})),oY={class:"flex align-center"},iY={class:"mr-4"},aY={class:"flex align-center"},lY={class:"mr-4"},uY={class:"flex align-center"},sY={class:"mr-4"},cY={class:"dialog-footer"},fY=rr({__name:"VariableFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Ge(),u=Ge(!1),c=Ge(!1),v=Ge(null),f=Ge({field:"",label:"",expression:""}),g=ch({label:[{required:!0,message:Ot("dynamicsForm.paramForm.name.placeholder"),trigger:"blur"}],field:[{required:!0,message:Ot("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}],expression:[{required:!0,message:Ot("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder"),trigger:"blur"}]}),b=Ge(!1),_=(M,S)=>{M&&(f.value=Ne.cloneDeep(M),c.value=!0,v.value=S),b.value=!0},x=()=>{b.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},A=async M=>{M&&await M.validate(S=>{S&&a("refresh",f.value,v.value)})};return t({open:_,close:x}),(M,S)=>{const E=J("el-input"),D=J("el-form-item"),I=J("AppIcon"),B=J("el-tooltip"),$=J("el-form"),j=J("el-button"),U=J("el-dialog");return Oe(),at(U,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableSplittingNode.editVariables"):M.$t("views.applicationWorkflow.nodes.variableSplittingNode.addVariables"),modelValue:b.value,"onUpdate:modelValue":S[4]||(S[4]=K=>b.value=K),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:C(()=>[ee("span",cY,[k(j,{onClick:nn(x,["prevent"])},{default:C(()=>[ct(_e(M.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:S[3]||(S[3]=K=>A(r.value)),loading:u.value},{default:C(()=>[ct(_e(M.$t("common.save")),1)]),_:1},8,["loading"])])]),default:C(()=>[k($,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right","hide-required-asterisk":""},{default:C(()=>[k(D,{prop:"field"},{label:C(()=>[ee("div",oY,[ee("span",iY,_e(M.$t("common.variable")),1),S[5]||(S[5]=ee("span",{class:"color-danger"},"*",-1))])]),default:C(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":S[0]||(S[0]=K=>f.value.field=K),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1}),k(D,{prop:"label"},{label:C(()=>[ee("div",aY,[ee("span",lY,_e(M.$t("dynamicsForm.paramForm.name.label")),1),S[6]||(S[6]=ee("span",{class:"color-danger"},"*",-1))])]),default:C(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":S[1]||(S[1]=K=>f.value.label=K),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),k(D,{prop:"expression"},{label:C(()=>[ee("div",uY,[ee("span",sY,[ct(_e(M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.label"))+" ",1),S[7]||(S[7]=ee("span",{class:"color-danger"},"*",-1))]),k(B,{effect:"dark",content:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.tooltip"),placement:"right"},{default:C(()=>[k(I,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:C(()=>[k(E,{modelValue:f.value.expression,"onUpdate:modelValue":S[2]||(S[2]=K=>f.value.expression=K),maxlength:64,"show-word-limit":"",placeholder:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),dY={class:"flex-between w-full"},pY={class:"break-all lighter"},hY={class:"ml-4",style:{"margin-top":"-4px"}},vY=["title"],mY=["title"],yY={class:"mr-4"},gY=rr({__name:"VariableFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Ge(),a=Ge(),r=Ge([]);function u(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1);const g=[{label:Ot("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Ne.set(t.nodeModel.properties.config,"fields",g)}function v(f,g){for(let _=0;_<r.value.length;_++)if(r.value[_].field===f.field&&g!==_){mi(Ot("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close();const b=[{label:Ot("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Ne.set(t.nodeModel.properties.config,"fields",b)}return Hr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Ne.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Ne.set(t.nodeModel.properties.nodeData,"variableList",r);const f=[{label:Ot("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Ne.set(t.nodeModel.properties.config,"fields",f)}),(f,g)=>{var S;const b=J("AppIcon"),_=J("el-button"),x=J("el-table-column"),A=J("el-tooltip"),M=J("el-table");return Oe(),en(Or,null,[ee("div",dY,[ee("h5",pY,[ct(_e(f.$t("views.applicationWorkflow.nodes.variableSplittingNode.splitVariables"))+" ",1),g[1]||(g[1]=ee("span",{class:"color-danger"},"*",-1))]),ee("span",hY,[k(_,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>u())},{default:C(()=>[k(b,{iconName:"app-add-outlined"})]),_:1})])]),((S=t.nodeModel.properties.nodeData.variableList)==null?void 0:S.length)>0?(Oe(),at(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:C(()=>[k(x,{prop:"field",label:f.$t("common.variable"),width:"95"},{default:C(({row:E})=>[ee("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,vY)]),_:1},8,["label"]),k(x,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:C(({row:E})=>[ee("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,mY)]),_:1},8,["label"]),k(x,{label:f.$t("common.operation"),align:"left",width:"90"},{default:C(({row:E,$index:D})=>[ee("span",yY,[k(A,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:C(()=>[k(_,{type:"primary",text:"",onClick:nn(I=>u(E,D),["stop"])},{default:C(()=>[k(b,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(A,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:C(()=>[k(_,{type:"primary",text:"",onClick:I=>c(D)},{default:C(()=>[k(b,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(fY,{ref_key:"VariableFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),bY={class:"title-decoration-1 mb-8"},_Y={class:"flex-between"},wY=rr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={inputVariable:[],variableList:[]},a=Zn({get:()=>(t.nodeModel.properties.nodeData||Ne.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:c=>{Ne.set(t.nodeModel.properties,"nodeData",c)}}),r=Ge(),u=async()=>r.value.validate();return Hr(()=>{Ne.set(t.nodeModel,"validate",u)}),(c,v)=>{const f=J("el-form-item"),g=J("el-form"),b=J("el-card");return Oe(),at(Ho,{nodeModel:c.nodeModel},{default:C(()=>[ee("h5",bY,_e(c.$t("views.applicationWorkflow.nodeSetting")),1),k(b,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:C(()=>[k(g,{onSubmit:v[1]||(v[1]=nn(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:r,"hide-required-asterisk":""},{default:C(()=>[k(f,{prop:"inputVariable",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:C(()=>[ee("div",_Y,[ee("div",null,[ct(_e(c.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),v[2]||(v[2]=ee("span",{class:"color-danger"},"*",-1))])])]),default:C(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:c.nodeModel,class:"w-full",placeholder:c.$t("views.applicationWorkflow.variable.placeholder"),modelValue:a.value.inputVariable,"onUpdate:modelValue":v[0]||(v[0]=_=>a.value.inputVariable=_)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(f,{prop:"variableList",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{default:C(()=>[k(gY,{ref:"VariableFieldTableRef","node-model":c.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class EY extends Xo{constructor(t){super(t,wY)}}const OY={type:"variable-splitting-node",model:qo,view:EY},SY=Object.freeze(Object.defineProperty({__proto__:null,default:OY},Symbol.toStringTag,{value:"Module"})),iA=rr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>za((Oe(),en("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=nn(()=>{},["stop"])),onClick:r[1]||(r[1]=nn(()=>{},["stop"]))},[(Oe(),en("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[ee("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),ee("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[Qp,t.model.isHovered]])}});function xY(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const AY=32,TY=32;class MY extends vn.BezierEdge{constructor(){super();Ma(this,"isMounted");Ma(this,"customLineApp");Ma(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");xY(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&(Xg()?uP(this.targetId(),iA,n,this.props.model,a,(u,c)=>({model:u,graph:c})):(this.customLineApp=rM({render:()=>Pv(iA,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Xg()&&sP(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=AY,customHeight:u=TY}=n.getProperties(),{startPoint:c,endPoint:v,path:f,isAnimation:g,arrowConfig:b}=n,_=n.getEdgeAnimationStyle(),{strokeDasharray:x,stroke:A,strokeDashoffset:M,animationName:S,animationDuration:E,animationIterationCount:D,animationTimingFunction:I,animationDirection:B}=_,$={x:(c.x+v.x-r)/2,y:(c.y+v.y-u)/2,width:r,height:u},j=n.getEdgeStyle(),U={width:r,height:u};return setTimeout(()=>{const K=document.getElementById(a);K&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(K))},0),delete j.stroke,vn.h("g",{},[vn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),vn.h("path",{d:f,...j,...b,...g?{strokeDasharray:x,stroke:A,style:{strokeDashoffset:M,animationName:S,animationDuration:E,animationIterationCount:D,animationTimingFunction:I,animationDirection:B}}:{}}),vn.h("foreignObject",{...$,y:$.y+5,x:$.x+5,style:{}},[vn.h("div",{id:a,style:{...U},className:"lf-custom-edge-wrapper"})])])}}class kY extends vn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(u=>u.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(u=>u.id===this.targetAnchorId);if(n&&r){const u={x:n.x,y:n.y};this.updateStartPoint(u);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const PY={type:"app-edge",view:MY,model:kY},NY=rr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var f;(f=t.lf)==null||f.zoom(!0,[0,0])}function a(){var f;(f=t.lf)==null||f.zoom(!1,[0,0])}function r(){var f,g,b;(f=t.lf)==null||f.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const u=()=>{var f;(f=t.lf)==null||f.extension.dagre.layout()},c=()=>{var f;(f=t.lf)==null||f.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var f;(f=t.lf)==null||f.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(f,g)=>{const b=J("ZoomOut"),_=J("el-icon"),x=J("el-tooltip"),A=J("el-button"),M=J("ZoomIn"),S=J("AppIcon"),E=J("el-divider"),D=J("el-card");return Oe(),at(D,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:C(()=>[k(A,{link:"",onClick:a,style:{border:"none"}},{default:C(()=>[k(x,{effect:"dark",content:f.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:C(()=>[k(_,{size:16,title:f.$t("views.applicationWorkflow.control.zoomOut")},{default:C(()=>[k(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:n,style:{border:"none"}},{default:C(()=>[k(x,{effect:"dark",content:f.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:C(()=>[k(_,{size:16,title:f.$t("views.applicationWorkflow.control.zoomIn")},{default:C(()=>[k(M)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:r,style:{border:"none"}},{default:C(()=>[k(x,{effect:"dark",content:f.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:C(()=>[k(S,{iconName:"app-fitview",title:f.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(E,{direction:"vertical"}),k(A,{link:"",onClick:c,style:{border:"none"}},{default:C(()=>[k(x,{effect:"dark",content:f.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:C(()=>[k(S,{style:{"font-size":"16px"},iconName:"app-retract",title:f.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:v,style:{border:"none"}},{default:C(()=>[k(x,{effect:"dark",content:f.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:C(()=>[k(S,{style:{"font-size":"16px"},iconName:"app-extend",title:f.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:u,style:{border:"none"}},{default:C(()=>[k(x,{effect:"dark",content:f.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:C(()=>[k(S,{style:{"font-size":"16px"},iconName:"app-beautify",title:f.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let lc=null;function aA(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function lA(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const sv=40;let vg=40;function RY(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var _,x;if(vg=sv,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,f=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(f):!0)||f.nodes.length===0&&f.edges.length===0)return lc=null,!0;const b=f.nodes.filter(A=>A.type===ei.Start||A.type===ei.Base);if(b.length>0){mi(((x=(_=b[0])==null?void 0:_.properties)==null?void 0:x.nodeName)+Ot("views.applicationWorkflow.tip.cannotCopy"));return}return lc=f,lc.nodes.forEach(A=>aA(A,sv)),lc.edges.forEach(A=>lA(A,sv)),zd(Ot("views.applicationWorkflow.tip.copyError")),!1},u=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;if(lc&&(lc.nodes||lc.edges)){e.clearSelectElements();const v=e.addElements(lc,vg);if(!v)return!0;v.nodes.forEach(f=>e.selectElementById(f.id,!0)),v.edges.forEach(f=>e.selectElementById(f.id,!0)),lc.nodes.forEach(f=>aA(f,sv)),lc.edges.forEach(f=>lA(f,sv)),vg=vg+sv}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(b=>e.deleteEdge(b.id));return}const f=v.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(f.length>0){mi(`${(g=f[0].properties)==null?void 0:g.nodeName}${Ot("views.applicationWorkflow.delete.deleteMessage")}`);return}return nE(Ot("common.tip"),Ot("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Ot("common.confirm"),confirmButtonClass:"color-danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;v.edges.forEach(b=>e.deleteEdge(b.id)),v.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],u),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class CY{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const DY=e=>typeof e=="string",uA=Array.isArray,Qg=e=>typeof e=="number",SP=e=>e!==null&&typeof e=="object",eb=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>eb(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=eb(t[n])}),t}return e},cv=(e,t)=>{const n=e[t];return SP(n)?n.cell:n},sA=(e,t,n)=>{let a;return n?a=n:Qg(e)?a=()=>e:a=()=>t,a},jY=(e,t)=>{if(e!=="next"&&e!=="prev")return t},cA=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let IY=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return cA(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&cA(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,jY)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var Sv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Sv||(Sv={}));function fA(e,t){var n=e.get(t)||0;e.set(t,n+1)}function dA(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function xP(e,t,n,a){var r=String(t),u=String(n);if(!e&&r>u){var c=r;r=u,u=c}return r+Sv.EDGE_KEY_DELIM+u+Sv.EDGE_KEY_DELIM+(a===void 0?Sv.DEFAULT_EDGE_NAME:a)}function pA(e,t,n,a){var r=String(t),u=String(n),c={v:t,w:n};if(!e&&r>u){var v=c.v;c.v=c.w,c.w=v}return a!==void 0&&(c.name=a),c}function j1(e,t){return xP(e,t.v,t.w,t.name)}function hA(e){return typeof e=="function"}var LY=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),u={id:n,value:a,parent:r};return u.value===void 0&&delete u.value,u.parent===void 0&&delete u.parent,u})},FY=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},$Y=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:LY(t),edges:FY(t),value:t.graph()};return n.value===void 0&&delete n.value,n},UY=function(t){var n=new qv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function mA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(a){BY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function BY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WY(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function GY(e,t,n){return t&&WY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var zY={compound:!1,multigraph:!1,directed:!0},qv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};VY(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Sv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return hA(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var u;return!(!((u=t.inEdgesMap.get(r))===null||u===void 0)&&u.size)})},this.sinks=function(){return t.nodes().filter(function(r){var u;return!(!((u=t.outEdgesMap.get(r))===null||u===void 0)&&u.size)})},this.setNodes=function(r,u){return r.map(function(c){return t.setNode(c,u)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var u,c=(u=t.parentMap)===null||u===void 0?void 0:u.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var u=t.parentMap.get(r);t.childrenMap.get(u).delete(r)},this.setParent=function(r,u){var c,v;t.checkCompound();for(var f=u===void 0?t.GRAPH_NODE:u,g=t.parent(f);g;){if(r===g)throw new Error("Setting "+u+" as parent of "+r+" would create a cycle");g=t.parent(g)}u&&t.setNode(u),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,f);var b=t.childrenMap.get(f);return b.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(f,b),t},this.children=function(r){var u=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(u);return v?Array.from(v.keys()):void 0}if(u===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var u=t.predecessorsMap.get(r);return u?Array.from(u.keys()):void 0},this.successors=function(r){var u=t.successorsMap.get(r);return u?Array.from(u.keys()):void 0},this.neighbors=function(r){var u;if(t.hasNode(r))return Array.from(new Set((u=t.predecessors(r))===null||u===void 0?void 0:u.concat(t.successors(r))))},this.isLeaf=function(r){var u;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((u=t.neighbors(r))===null||u===void 0)&&u.length)},this.filterNodes=function(r){var u=t.directed,c=t.multigraph,v=t.compound,f=new e({directed:u,multigraph:c,compound:v});if(f.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&f.setNode(b,t.node(b))}),t.edges().forEach(function(b){f.hasNode(b.v)&&f.hasNode(b.w)&&f.setEdgeObj(b,t.edge(b))}),v){var g=function(_){for(var x=t.parent(_);x!==void 0&&!f.hasNode(x);)x=t.parent(x);return x};f.nodes().forEach(function(b){f.setParent(b,g(b))})}return f},this.setDefaultEdgeLabel=function(r){return hA(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,u){return t.setEdge(r.v,r.w,u,r.name)},this.setPath=function(r,u){return r.reduce(function(c,v){return t.setEdge(c,v,u),v}),t},this.edgeFromArgs=function(r,u,c){return t.edge({v:r,w:u,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(j1(t.isDirected(),r))},this.hasEdge=function(r,u,c){return t.edgesLabelsMap.has(j1(t.isDirected(),{v:r,w:u,name:c}))},this.removeEdgeObj=function(r){var u=r.v,c=r.w,v=r.name;return t.removeEdge(u,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,u){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!u||v.v===u})},this.outEdges=function(r,u){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!u||v.w===u})},this.nodeEdges=function(r,u){var c;if(t.hasNode(r))return(c=t.inEdges(r,u))===null||c===void 0?void 0:c.concat(t.outEdges(r,u))},this.toJSON=function(){return $Y(t)},this.nodeInDegree=function(r){var u=t.inEdgesMap.get(r);return u?u.size:0},this.nodeOutDegree=function(r){var u=t.outEdgesMap.get(r);return u?u.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=mA(mA({},zY),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return GY(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,u=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,f=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,_=this.predecessorsMap,x=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||u(n)),c()){var A;v==null||v.set(n,this.GRAPH_NODE),f==null||f.set(n,new Map),f!=null&&f.has(this.GRAPH_NODE)||f==null||f.set(this.GRAPH_NODE,new Map),f==null||(A=f.get(this.GRAPH_NODE))===null||A===void 0||A.set(n,!0)}return[g,b,_,x].forEach(function(M){return M.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(E){a.removeEdge(E.v,E.w,E.name)},u=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,f=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,_,x;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(_=this.children(n))===null||_===void 0||_.forEach(function(S){return a.setParent(S)}),(x=this.childrenMap)===null||x===void 0||x.delete(n)}var A=u.get(n),M=c.get(n);Array.from(A.values()).forEach(function(S){return r(S)}),Array.from(M.values()).forEach(function(S){return r(S)}),g.delete(n),u.delete(n),c.delete(n),v.delete(n),f.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,u){var c,v,f=pA(this.isDirected(),n,a,u),g=j1(this.isDirected(),f),b=f.v,_=f.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(u!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(_),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,_,u)),Object.freeze(f),this.edgesMap.set(g,f);var x=this.predecessorsMap.get(_),A=this.successorsMap.get(b);return fA(x,b),fA(A,_),(c=this.inEdgesMap.get(_))===null||c===void 0||c.set(g,f),(v=this.outEdgesMap.get(b))===null||v===void 0||v.set(g,f),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var u=xP(this.isDirected(),n,a,r),c=this.edgesMap.get(u);if(c){var v=pA(this.isDirected(),n,a,r),f=v.v,g=v.w;this.edgesLabelsMap.delete(u),this.edgesMap.delete(u);var b=this.predecessorsMap.get(g),_=this.successorsMap.get(f);dA(b,f),dA(_,g),this.inEdgesMap.get(g).delete(u),this.outEdgesMap.get(f).delete(u),this.edgeCountNum-=1}return this}}]),e}();qv.fromJSON=UY;function HY(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function XY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var AP=HY(function e(){var t=this;XY(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,u=t.keyIndice,c=[r[n],r[a]],v=c[0],f=c[1];r[n]=f,r[a]=v,u.set(v.key,a),u.set(f.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,u,c=n;c!==0;){var v;if(u=c>>1,((v=a[u])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,u),c=u}},this.heapify=function(n){var a=t.arr,r=n<<1,u=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,u<a.length&&(c=a[u].priority<a[c].priority?u:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,u=t.arr;if(!r.has(n)){var c=u.length;return r.set(n,c),u.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),qY=function(t,n){var a=new qv,r=new Map,u=new AP,c;function v(b){var _=b.v===c?b.w:b.v,x=u.priority(_);if(x!==void 0){var A=n(b);A<x&&(r.set(_,c),u.decrease(_,A))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(b){u.add(b,Number.POSITIVE_INFINITY),a.setNode(b)}),u.decrease(t.nodes()[0],0);for(var f=!1;u.size()>0;){var g;if(c=u.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(f)throw new Error("Input graph is not connected: "+t.graph());f=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return a},YY=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(u){for(var c=[],v=[u];v.length>0;){var f=v.pop();if(!n.has(f)){var g,b;n.add(f),c.push(f),(g=t.successors(f))===null||g===void 0||g.forEach(function(_){return v.push(_)}),(b=t.predecessors(f))===null||b===void 0||b.forEach(function(_){return v.push(_)})}}c.length&&a.push(c)}),a},KY=function e(t,n,a,r,u,c){r.includes(n)||(r.push(n),a||c.push(n),u(n).forEach(function(v){return e(t,v,a,r,u,c)}),a&&c.push(n))},UE=function(t,n,a){var r=Array.isArray(n)?n:[n],u=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(f){if(t.hasNode(f))KY(t,f,a==="post",v,u,c);else throw new Error("Graph does not have node: "+f)}),c};function ZY(e,t){return tK(e)||eK(e,t)||QY(e,t)||JY()}function JY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QY(e,t){if(e){if(typeof e=="string")return yA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yA(e,t)}}function yA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function eK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,u=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(f){u=!0,v=f}finally{try{!r&&n.return!=null&&n.return()}finally{if(u)throw v}}return a}}function tK(e){if(Array.isArray(e))return e}var nK=function(){return 1},TP=function(t,n,a,r){return rK(t,n,a||nK,r||function(u){return t.outEdges(u)})},rK=function(t,n,a,r){var u=new Map,c=new AP,v,f,g=function(x){var A=x.v!==v?x.v:x.w,M=u.get(A),S=a(x),E=f.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+S);E<M.distance&&(M.distance=E,M.predecessor=v,c.decrease(A,E))};for(t.nodes().forEach(function(_){var x=_===n?0:Number.POSITIVE_INFINITY;u.set(_,{distance:x}),c.add(_,x)});c.size()>0&&(v=c.removeMin(),f=u.get(v),!(f&&f.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var b={};return Array.from(u.entries()).forEach(function(_){var x=ZY(_,2),A=x[0],M=x[1];return b[String(A)]=M,b}),b},oK=function(t,n,a){var r={};return t.nodes().forEach(function(u){return r[String(u)]=TP(t,u,n,a),r}),r},MP=function(t){var n=0,a=[],r=new Map,u=[];function c(v){var f,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,a.push(v),(f=t.successors(v))===null||f===void 0||f.forEach(function(A){var M;if(r.has(A)){if(!((M=r.get(A))===null||M===void 0)&&M.onStack){var E=r.get(A);g.lowlink=Math.min(g.lowlink,E.index)}}else{c(A);var S=r.get(A);g.lowlink=Math.min(g.lowlink,S.lowlink)}}),g.lowlink===g.index){var b=[],_;do{_=a.pop();var x=r.get(_);x.onStack=!1,b.push(_)}while(v!==_);u.push(b)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),u},iK=function(t){return MP(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Fw(e){"@babel/helpers - typeof";return Fw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fw(e)}function aK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function lK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zm(e,t)}function sK(e){var t=kP();return function(){var a=Hm(e),r;if(t){var u=Hm(this).constructor;r=Reflect.construct(a,arguments,u)}else r=a.apply(this,arguments);return cK(this,r)}}function cK(e,t){if(t&&(Fw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fK(e)}function fK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $w(e){var t=typeof Map=="function"?new Map:void 0;return $w=function(a){if(a===null||!dK(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return Mg(a,arguments,Hm(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zm(r,a)},$w(e)}function Mg(e,t,n){return kP()?Mg=Reflect.construct:Mg=function(r,u,c){var v=[null];v.push.apply(v,u);var f=Function.bind.apply(r,v),g=new f;return c&&zm(g,c.prototype),g},Mg.apply(null,arguments)}function kP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dK(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function zm(e,t){return zm=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},zm(e,t)}function Hm(e){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Hm(e)}var Uw=function(e){uK(n,e);var t=sK(n);function n(){return lK(this,n),t.apply(this,arguments)}return aK(n)}($w(Error));function PP(e){var t=new Set,n=new Set,a=[];function r(u){if(n.has(u))throw new Uw;if(!t.has(u)){var c;n.add(u),t.add(u),(c=e.predecessors(u))===null||c===void 0||c.forEach(r),n.delete(u),a.push(u)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Uw;return a}var pK=function(t){try{PP(t)}catch(n){if(n instanceof Uw)return!1;throw n}return!0},hK=function(t,n){return UE(t,n,"post")},vK=function(t,n){return UE(t,n,"pre")},mK=function(){return 1};function yK(e,t,n){return gK(e,t||mK,n||function(a){return e.outEdges(a)})}function gK(e,t,n){var a={},r=e.nodes();return r.forEach(function(u){var c=String(u);a[c]={},a[c][c]={distance:0},r.forEach(function(v){u!==v&&(a[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(u).forEach(function(v){var f=v.v===u?v.w:v.v,g=t(v);a[c][String(f)]={distance:g,predecessor:u}})}),r.forEach(function(u){var c=String(u),v=a[c];r.forEach(function(f){var g=String(f),b=a[g];r.forEach(function(_){var x=String(_),A=b[c],M=v[x],S=b[x],E=A.distance+M.distance;E<S.distance&&(S.distance=E,S.predecessor=M.predecessor)})})}),a}const bK=Object.freeze(Object.defineProperty({__proto__:null,components:YY,dfs:UE,dijkstra:TP,dijkstraAll:oK,findCycles:iK,floydWarshall:yK,isAcyclic:pK,postorder:hK,preorder:vK,prim:qY,tarjan:MP,topsort:PP},Symbol.toStringTag,{value:"Module"}));class _K extends IY{}class wK extends qv{}const EK=()=>1,OK=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=xK(e,t||EK);return(n=SK(a.graph,a.buckets,a.zeroIdx).map(u=>e.outEdges(u.v,u.w)))===null||n===void 0?void 0:n.flat()},SK=(e,t,n)=>{let a=[];const r=t[t.length-1],u=t[0];let c;for(;e.nodeCount();){for(;c=u.dequeue();)I1(e,t,n,c);for(;c=r.dequeue();)I1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){a=a.concat(I1(e,t,n,c,!0));break}}}return a},I1=(e,t,n,a,r)=>{var u,c;const v=[];return(u=e.inEdges(a.v))===null||u===void 0||u.forEach(f=>{const g=e.edge(f),b=e.node(f.v);r&&v.push({v:f.v,w:f.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,Bw(t,n,b)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(f=>{const g=e.edge(f),b=f.w,_=e.node(b);_.in===void 0&&(_.in=0),_.in-=g,Bw(t,n,_)}),e.removeNode(a.v),r?v:void 0},xK=(e,t)=>{const n=new wK;let a=0,r=0;e.nodes().forEach(f=>{n.setNode(f,{v:f,in:0,out:0})}),e.edges().forEach(f=>{const g=n.edge(f)||0,b=(t==null?void 0:t(f))||1,_=g+b;n.setEdge(f.v,f.w,_),r=Math.max(r,n.node(f.v).out+=b),a=Math.max(a,n.node(f.w).in+=b)});const u=[],c=r+a+3;for(let f=0;f<c;f++)u.push(new _K);const v=a+1;return n.nodes().forEach(f=>{Bw(u,v,n.node(f))}),{buckets:u,zeroIdx:v,graph:n}},Bw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},AK=e=>{const t=a=>r=>{var u;return((u=a.edge(r))===null||u===void 0?void 0:u.weight)||1},n=e.graph().acyclicer==="greedy"?OK(e,t(e)):TK(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},TK=e=>{const t=[],n={},a={},r=u=>{var c;a[u]||(a[u]=!0,n[u]=!0,(c=e.outEdges(u))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[u])};return e.nodes().forEach(r),t},MK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},gA={run:AK,undo:MK};class jf extends qv{}const kK=(e,t)=>Number(e)-Number(t),Yv=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},PK=e=>{const t=new jf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},NP=e=>{const t=new jf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},NK=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),bA=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,u=Number(t.y)-a;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!u)return{x:0,y:0};let f,g;return Math.abs(u)*c>Math.abs(r)*v?(u<0&&(v=-v),f=v*r/u,g=v):(r<0&&(c=-c),f=c,g=c*u/r),{x:n+f,y:a+g}},Xm=e=>{const t=[],n=RP(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const u=r.rank;u!==void 0&&t[u]&&t[u].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,u)=>{var c,v;return kK((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(u))===null||v===void 0?void 0:v.order)});return t},RK=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},CK=e=>{const t=e.nodes(),n=t.filter(v=>{var f;return((f=e.node(v))===null||f===void 0?void 0:f.rank)!==void 0}).map(v=>e.node(v).rank),a=Math.min(...n),r=[];t.forEach(v=>{var f;const g=(((f=e.node(v))===null||f===void 0?void 0:f.rank)||0)-a;r[g]||(r[g]=[]),r[g].push(v)});let u=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const f=r[v];f===void 0?v%c!==0&&(u-=1):u&&(f==null||f.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=u)}))}},_A=(e,t,n,a)=>{const r={width:0,height:0};return Qg(n)&&Qg(a)&&(r.rank=n,r.order=a),Yv(e,"border",r,t)},RP=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},DK=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},CP=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},DP=(e,t)=>t(),BE=(e,t)=>e.reduce((n,a)=>{const r=t(n),u=t(a);return r>u?a:n}),jK=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>IK(e,t))},IK=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,u=e.node(r).rank,c=t.name,v=e.edge(t),f=v.labelRank;if(u===a+1)return;e.removeEdgeObj(t);const g=e.graph();let b,_,x;for(x=0,++a;a<u;++x,++a)v.points=[],_={edgeLabel:v,width:0,height:0,edgeObj:t,rank:a},b=Yv(e,"edge",_,"_d"),a===f&&(_.width=v.width,_.height=v.height,_.dummy="edge-label",_.labelpos=v.labelpos),e.setEdge(n,b,{weight:v.weight},c),x===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:v.weight},c)},LK=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let u;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)u=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=u,a=e.node(c)})},wA={run:jK,undo:LK},jP=e=>{var t;const n={},a=r=>{var u;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(u=e.outEdges(r))===null||u===void 0||u.forEach(f=>{const g=a(f.w),b=e.edge(f).minlen,_=g-b;_&&(v===void 0||_<v)&&(v=_)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},FK=e=>{var t;const n={};let a;const r=v=>{var f;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let b;return(f=e.outEdges(v))===null||f===void 0||f.forEach(_=>{const x=r(_.w),A=e.edge(_).minlen,M=x-A;M&&(b===void 0||M<b)&&(b=M)}),b||(b=0),(a===void 0||b<a)&&(a=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),a===void 0&&(a=0);const u={},c=(v,f)=>{var g;const b=e.node(v),_=isNaN(b.layer)?f:b.layer;(b.rank===void 0||b.rank<_)&&(b.rank=_),!u[v]&&(u[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(x=>{c(x.w,_+e.edge(x).minlen)}))};e.nodes().forEach(v=>{const f=e.node(v);f&&(isNaN(f.layer)?f.rank-=a:c(v,f.layer))})},Xd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,$K=e=>{const t=new jf({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,u;for(;UK(t,e)<a;)r=IP(t,e),u=t.hasNode(r.v)?Xd(e,r):-Xd(e,r),LP(t,e,u);return t},UK=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const u=r.v,c=a===u?r.w:u;!e.hasNode(c)&&!Xd(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},BK=e=>{const t=new jf({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,u;for(;VK(t,e)<a;)r=IP(t,e),u=t.hasNode(r.v)?Xd(e,r):-Xd(e,r),LP(t,e,u);return t},VK=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(u=>{const c=u.v,v=a===c?u.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Xd(t,u))&&(e.setNode(v,{}),e.setEdge(a,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},IP=(e,t)=>BE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Xd(t,n):1/0),LP=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:WK,postorder:GK}=bK,zK=e=>{const t=PK(e);jP(t);const n=$K(t);$P(n),FP(n,t);let a,r;for(;a=qK(n);)r=YK(n,t,a),KK(n,t,a,r)},FP=(e,t)=>{let n=GK(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{HK(e,t,a)})},HK=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=XK(e,t,n)},XK=(e,t,n)=>{var a;const u=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,u),f=0;return v||(c=!1,v=t.edgeFromArgs(u,n)),f=v.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(g=>{const b=g.v===n,_=b?g.w:g.v;if(_!==u){const x=b===c,A=t.edge(g).weight;if(f+=x?A:-A,JK(e,n,_)){const M=e.edgeFromArgs(n,_).cutvalue;f+=x?-M:M}}}),f},$P=(e,t=e.nodes()[0])=>{UP(e,{},1,t)},UP=(e,t,n,a,r)=>{var u;const c=n;let v=n;const f=e.node(a);return t[a]=!0,(u=e.neighbors(a))===null||u===void 0||u.forEach(g=>{t[g]||(v=UP(e,t,v,g,a))}),f.low=c,f.lim=v++,r?f.parent=r:delete f.parent,v},qK=e=>e.edges().find(t=>e.edge(t).cutvalue<0),YK=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const u=e.node(a),c=e.node(r);let v=u,f=!1;u.lim>c.lim&&(v=c,f=!0);const g=t.edges().filter(b=>f===EA(e,e.node(b.v),v)&&f!==EA(e,e.node(b.w),v));return BE(g,b=>Xd(t,b))},KK=(e,t,n,a)=>{const r=n.v,u=n.w;e.removeEdge(r,u),e.setEdge(a.v,a.w,{}),$P(e),FP(e,t),ZK(e,t)},ZK=(e,t)=>{const n=e.nodes().find(r=>{var u;return!(!((u=t.node(r))===null||u===void 0)&&u.parent)});let a=WK(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const u=e.node(r).parent;let c=t.edgeFromArgs(r,u),v=!1;c||(c=t.edgeFromArgs(u,r),v=!0),t.node(r).rank=t.node(u).rank+(v?c.minlen:-c.minlen)})},JK=(e,t,n)=>e.hasEdge(t,n),EA=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,QK=e=>{switch(e.graph().ranker){case"network-simplex":tZ(e);break;case"tight-tree":OA(e);break;case"longest-path":eZ(e);break;default:OA(e)}},eZ=jP,OA=e=>{FK(e),BK(e)},tZ=e=>{zK(e)},nZ=e=>{var t;const n={};let a=0;const r=u=>{var c;const v=a;(c=e.children(u))===null||c===void 0||c.forEach(r),n[u]={low:v,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},rZ=(e,t,n,a)=>{const r=[],u=[],c=Math.min(t[n].low,t[a].low),v=Math.max(t[n].lim,t[a].lim);let f,g;f=n;do f=e.parent(f),r.push(f);while(f&&(t[f].low>c||v>t[f].lim));for(g=f,f=a;f&&f!==g;)u.push(f),f=e.parent(f);return{lca:g,path:r.concat(u.reverse())}},oZ=e=>{var t;const n=nZ(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,u;let c=a,v=e.node(c);const f=v.edgeObj;if(!f)return;const g=rZ(e,n,f.v,f.w),b=g.path,_=g.lca;let x=0,A=b[x],M=!0;for(;c!==f.w;){if(v=e.node(c),M){for(;A!==_&&((r=e.node(A))===null||r===void 0?void 0:r.maxRank)<v.rank;)x++,A=b[x];A===_&&(M=!1)}if(!M){for(;x<b.length-1&&((u=e.node(b[x+1]))===null||u===void 0?void 0:u.minRank)<=v.rank;)x++;A=b[x]}e.setParent(c,A),c=e.successors(c)[0]}})},iZ=e=>{var t;const n=Yv(e,"root",{},"_root"),a=aZ(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const u=r-1,c=2*u+1;e.graph().nestingRoot=n,e.edges().forEach(f=>{e.edge(f).minlen*=c});const v=lZ(e)+1;(t=e.children())===null||t===void 0||t.forEach(f=>{BP(e,n,c,v,u,a,f)}),e.graph().nodeRankFactor=c},BP=(e,t,n,a,r,u,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const f=_A(e,"_bt"),g=_A(e,"_bb"),b=e.node(c);e.setParent(f,c),b.borderTop=f,e.setParent(g,c),b.borderBottom=g,v==null||v.forEach(_=>{BP(e,t,n,a,r,u,_);const x=e.node(_),A=x.borderTop?x.borderTop:_,M=x.borderBottom?x.borderBottom:_,S=x.borderTop?a:2*a,E=A!==M?1:r-u[c]+1;e.setEdge(f,A,{minlen:E,weight:S,nestingEdge:!0}),e.setEdge(M,g,{minlen:E,weight:S,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,f,{weight:0,minlen:r+u[c]})},aZ=e=>{var t;const n={},a=(r,u)=>{const c=e.children(r);c==null||c.forEach(v=>a(v,u+1)),n[r]=u};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},lZ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},uZ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},SA={run:iZ,cleanup:uZ},sZ=e=>{var t;const n=a=>{const r=e.children(a),u=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let c=u.minRank,v=u.maxRank+1;c<v;c+=1)xA(e,"borderLeft","_bl",a,u,c),xA(e,"borderRight","_br",a,u,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},xA=(e,t,n,a,r,u)=>{const c={rank:u,borderType:t,width:0,height:0},v=r[t][u-1],f=Yv(e,"border",c,n);r[t][u]=f,e.setParent(f,a),v&&e.setEdge(v,f,{weight:1})},cZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&VP(e)},fZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&dZ(e),(n==="lr"||n==="rl")&&(pZ(e),VP(e))},VP=e=>{e.nodes().forEach(t=>{AA(e.node(t))}),e.edges().forEach(t=>{AA(e.edge(t))})},AA=e=>{const t=e.width;e.width=e.height,e.height=t},dZ=e=>{e.nodes().forEach(t=>{L1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>L1(r)),a.hasOwnProperty("y")&&L1(a)})},L1=e=>{e!=null&&e.y&&(e.y=-e.y)},pZ=e=>{e.nodes().forEach(t=>{F1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>F1(r)),a.hasOwnProperty("x")&&F1(a)})},F1=e=>{const t=e.x;e.x=e.y,e.y=t},TA={adjust:cZ,undo:fZ};function hZ(e){return Array.isArray(e)}function Vw(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const MA=function(e){if(hZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},kA=e=>{const t={},n=e.nodes().filter(b=>{var _;return!(!((_=e.children(b))===null||_===void 0)&&_.length)}),a=n.map(b=>e.node(b).rank),r=Vw(a),u=[];for(let b=0;b<r+1;b++)u.push([]);const c=b=>{var _;if(t.hasOwnProperty(b))return;t[b]=!0;const x=e.node(b);isNaN(x.rank)||u[x.rank].push(b),(_=e.successors(b))===null||_===void 0||_.forEach(A=>c(A))},v=n.sort((b,_)=>e.node(b).rank-e.node(_).rank),g=v.filter(b=>e.node(b).fixorder!==void 0).sort((b,_)=>e.node(b).fixorder-e.node(_).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||u[e.node(b).rank].push(b),t[b]=!0}),v==null||v.forEach(c),u},vZ=(e,t,n)=>{const a=NK(n,n.map((b,_)=>_)),u=t.map(b=>{var _;const x=(_=e.outEdges(b))===null||_===void 0?void 0:_.map(A=>({pos:a[A.w]||0,weight:e.edge(A).weight}));return x==null?void 0:x.sort((A,M)=>A.pos-M.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const f=Array(v).fill(0,0,v);let g=0;return u==null||u.forEach(b=>{if(b){let _=b.pos+c;f[_]+=b.weight;let x=0;for(;_>0;)_%2&&(x+=f[_+1]),_=_-1>>1,f[_]+=b.weight;g+=b.weight*x}}),g},PA=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=vZ(e,t[a-1],t[a]);return n},mZ=(e,t,n)=>{const a=yZ(e),r=new jf({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(u=>e.node(u));return e.nodes().forEach(u=>{var c;const v=e.node(u),f=e.parent(u);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(u),r.setParent(u,f||a),(c=e[n](u))===null||c===void 0||c.forEach(g=>{const b=g.v===u?g.w:g.v,_=r.edgeFromArgs(b,u),x=_!==void 0?_.weight:0;r.setEdge(b,u,{weight:e.edge(g).weight+x})}),v.hasOwnProperty("minRank")&&r.setNode(u,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},yZ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},gZ=(e,t,n)=>{const a={};let r;n==null||n.forEach(u=>{let c=e.parent(u),v,f;for(;c;){if(v=e.parent(c),v?(f=a[v],a[v]=c):(f=r,r=c),f&&f!==c){t.setEdge(f,c);return}c=v}})},bZ=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(u=>{const c=e.edge(u),v=e.node(u.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),_Z=(e,t)=>{var n,a,r;const u={};e==null||e.forEach((v,f)=>{u[v.v]={i:f,indegree:0,in:[],out:[],vs:[v.v]};const g=u[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const f=u[v.v],g=u[v.w];f!==void 0&&g!==void 0&&(g.indegree++,f.out.push(u[v.w]))});const c=(r=(a=Object.values(u)).filter)===null||r===void 0?void 0:r.call(a,v=>!v.indegree);return wZ(c)},wZ=e=>{var t,n;const a=[],r=f=>g=>{g.merged||(g.barycenter===void 0||f.barycenter===void 0||g.barycenter>=f.barycenter)&&EZ(f,g)},u=f=>g=>{g.in.push(f),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const f=e.pop();a.push(f),(t=f.in.reverse())===null||t===void 0||t.forEach(g=>r(f)(g)),(n=f.out)===null||n===void 0||n.forEach(g=>u(f)(g))}const c=a.filter(f=>!f.merged),v=["vs","i","barycenter","weight"];return c.map(f=>{const g={};return v==null||v.forEach(b=>{f[b]!==void 0&&(g[b]=f[b])}),g})},EZ=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},OZ=(e,t,n,a)=>{const r=DK(e,x=>{const A=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return a?!A&&x.hasOwnProperty("barycenter"):A||x.hasOwnProperty("barycenter")}),u=r.lhs,c=r.rhs.sort((x,A)=>-x.i- -A.i),v=[];let f=0,g=0,b=0;u==null||u.sort(SZ(!!t,!!n)),b=NA(v,c,b),u==null||u.forEach(x=>{var A;b+=(A=x.vs)===null||A===void 0?void 0:A.length,v.push(x.vs),f+=x.barycenter*x.weight,g+=x.weight,b=NA(v,c,b)});const _={vs:v.flat()};return g&&(_.barycenter=f/g,_.weight=g),_},NA=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},SZ=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},WP=(e,t,n,a,r,u)=>{var c,v,f,g;let b=e.children(t);const _=e.node(t),x=_?_.borderLeft:void 0,A=_?_.borderRight:void 0,M={};x&&(b=b==null?void 0:b.filter(I=>I!==x&&I!==A));const S=bZ(e,b||[]);S==null||S.forEach(I=>{var B;if(!((B=e.children(I.v))===null||B===void 0)&&B.length){const $=WP(e,I.v,n,a,u);M[I.v]=$,$.hasOwnProperty("barycenter")&&AZ(I,$)}});const E=_Z(S,n);xZ(E,M),(c=E.filter(I=>I.vs.length>0))===null||c===void 0||c.forEach(I=>{const B=e.node(I.vs[0]);B&&(I.fixorder=B.fixorder,I.order=B.order)});const D=OZ(E,a,r,u);if(x&&(D.vs=[x,D.vs,A].flat(),!((v=e.predecessors(x))===null||v===void 0)&&v.length)){const I=e.node(((f=e.predecessors(x))===null||f===void 0?void 0:f[0])||""),B=e.node(((g=e.predecessors(A))===null||g===void 0?void 0:g[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+I.order+B.order)/(D.weight+2),D.weight+=2}return D},xZ=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(u=>t[u]?t[u].vs:u);n.vs=r.flat()})},AZ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},TZ=(e,t)=>{const n=RP(e),a=[],r=[];for(let b=1;b<n+1;b++)a.push(b);for(let b=n-1;b>-1;b--)r.push(b);const u=RA(e,a,"inEdges"),c=RA(e,r,"outEdges");let v=kA(e);$1(e,v);let f=Number.POSITIVE_INFINITY,g;for(let b=0,_=0;_<4;++b,++_){CA(b%2?u:c,b%4>=2,!1,t),v=Xm(e);const x=PA(e,v);x<f&&(_=0,g=eb(v),f=x)}v=kA(e),$1(e,v);for(let b=0,_=0;_<4;++b,++_){CA(b%2?u:c,b%4>=2,!0,t),v=Xm(e);const x=PA(e,v);x<f&&(_=0,g=eb(v),f=x)}$1(e,g)},RA=(e,t,n)=>t.map(a=>mZ(e,a,n)),CA=(e,t,n,a)=>{const r=new jf;e==null||e.forEach(u=>{var c;const v=u.graph().root,f=WP(u,v,r,t,n,a);for(let g=0;g<((c=f.vs)===null||c===void 0?void 0:c.length);g++){const b=u.node(f.vs[g]);b&&(b.order=g)}gZ(u,r,f.vs)})},$1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class MZ extends qv{}const kZ=(e,t)=>{const n={},a=(r,u)=>{let c=0,v=0;const f=r.length,g=u==null?void 0:u[(u==null?void 0:u.length)-1];return u==null||u.forEach((b,_)=>{var x;const A=NZ(e,b),M=A?e.node(A).order:f;(A||b===g)&&((x=u.slice(v,_+1))===null||x===void 0||x.forEach(S=>{var E;(E=e.predecessors(S))===null||E===void 0||E.forEach(D=>{var I;const B=e.node(D),$=B.order;($<c||M<$)&&!(B.dummy&&(!((I=e.node(S))===null||I===void 0)&&I.dummy))&&GP(n,D,S)})}),v=_+1,c=M)}),u};return t!=null&&t.length&&t.reduce(a),n},PZ=(e,t)=>{const n={};function a(v,f,g,b,_){var x,A;let M;for(let S=f;S<g;S++)M=v[S],!((x=e.node(M))===null||x===void 0)&&x.dummy&&((A=e.predecessors(M))===null||A===void 0||A.forEach(E=>{const D=e.node(E);D.dummy&&(D.order<b||D.order>_)&&GP(n,E,M)}))}function r(v){return JSON.stringify(v.slice(1))}function u(v,f){const g=r(v);f.get(g)||(a(...v),f.set(g,!0))}const c=(v,f)=>{let g=-1,b,_=0;const x=new Map;return f==null||f.forEach((A,M)=>{var S;if(((S=e.node(A))===null||S===void 0?void 0:S.dummy)==="border"){const E=e.predecessors(A)||[];E.length&&(b=e.node(E[0]).order,u([f,_,M,g,b],x),_=M,g=b)}u([f,_,f.length,b,v.length],x)}),f};return t!=null&&t.length&&t.reduce(c),n},NZ=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},GP=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let u=e[a];u||(e[a]=u={}),u[r]=!0},RZ=(e,t,n)=>{let a=t,r=n;if(a>r){const u=t;a=r,r=u}return!!e[a]},CZ=(e,t,n,a)=>{const r={},u={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((f,g)=>{r[f]=f,u[f]=f,c[f]=g})}),t==null||t.forEach(v=>{let f=-1;v==null||v.forEach(g=>{let b=a(g);if(b.length){b=b.sort((x,A)=>c[x]-c[A]);const _=(b.length-1)/2;for(let x=Math.floor(_),A=Math.ceil(_);x<=A;++x){const M=b[x];u[g]===g&&f<c[M]&&!RZ(n,g,M)&&(u[M]=g,u[g]=r[g]=r[M],f=c[M])}}})}),{root:r,align:u}},DZ=(e,t,n,a,r)=>{var u;const c={},v=jZ(e,t,n,r),f=r?"borderLeft":"borderRight",g=(x,A)=>{let M=v.nodes(),S=M.pop();const E={};for(;S;)E[S]?x(S):(E[S]=!0,M.push(S),M=M.concat(A(S))),S=M.pop()},b=x=>{c[x]=(v.inEdges(x)||[]).reduce((A,M)=>Math.max(A,(c[M.v]||0)+v.edge(M)),0)},_=x=>{const A=(v.outEdges(x)||[]).reduce((S,E)=>Math.min(S,(c[E.w]||0)-v.edge(E)),Number.POSITIVE_INFINITY),M=e.node(x);A!==Number.POSITIVE_INFINITY&&M.borderType!==f&&(c[x]=Math.max(c[x],A))};return g(b,v.predecessors.bind(v)),g(_,v.successors.bind(v)),(u=Object.values(a))===null||u===void 0||u.forEach(x=>{c[x]=c[n[x]]}),c},jZ=(e,t,n,a)=>{const r=new MZ,u=e.graph(),c=$Z(u.nodesep,u.edgesep,a);return t==null||t.forEach(v=>{let f;v==null||v.forEach(g=>{const b=n[g];if(r.setNode(b),f){const _=n[f],x=r.edgeFromArgs(_,b);r.setEdge(_,b,Math.max(c(e,g,f),x||0))}f=g})}),r},IZ=(e,t)=>BE(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const v=n[c],f=UZ(e,c)/2;r=Math.max(v+f,r),u=Math.min(v-f,u)}),r-u});function LZ(e,t){const n=Object.values(t),a=MA(n),r=Vw(n);["u","d"].forEach(u=>{["l","r"].forEach(c=>{const v=u+c,f=e[v];let g;if(f===t)return;const b=Object.values(f);g=c==="l"?a-MA(b):r-Vw(b),g&&(e[v]={},Object.keys(f).forEach(_=>{e[v][_]=f[_]+g}))})})}const FZ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(u=>u[a]);n[a]=(r[0]+r[1])/2}}),n},$Z=(e,t,n)=>(a,r,u)=>{const c=a.node(r),v=a.node(u);let f=0,g;if(f+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(f+=n?g:-g),g=0,f+=(c.dummy?t:e)/2,f+=(v.dummy?t:e)/2,f+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(f+=n?g:-g),g=0,f},UZ=(e,t)=>e.node(t).width||0,BZ=e=>{const t=Xm(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const u=r.map(v=>e.node(v).height),c=Math.max(...u,0);r==null||r.forEach(v=>{e.node(v).y=a+c/2}),a+=c+n})},VZ=e=>{const t=Xm(e),n=Object.assign(kZ(e,t),PZ(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(_=>Object.values(_).reverse()));const f=(c==="u"?e.predecessors:e.successors).bind(e),g=CZ(e,r,n,f),b=DZ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(b).forEach(_=>b[_]=-b[_]),a[c+v]=b})});const u=IZ(e,a);return u&&LZ(a,u),FZ(a,e.graph().align)},WZ=e=>{var t;const n=NP(e);BZ(n);const a=VZ(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},GZ=(e,t)=>{const a=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...a),u=[];for(let c=0;c<r+1;c++)u[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=u[v.rank].length,u[v.rank].push(c))})},zZ=(e,t)=>{const n=t&&t.debugTiming?CP:DP;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{XZ(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>tJ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{nJ(a)});try{n("  runLayout",()=>{HZ(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{qZ(e,a)})})},HZ=(e,t,n)=>{t("    removeSelfEdges",()=>{fJ(e)}),t("    acyclic",()=>{gA.run(e)}),t("    nestingGraph.run",()=>{SA.run(e)}),t("    rank",()=>{QK(NP(e))}),t("    injectEdgeLabelProxies",()=>{rJ(e)}),t("    removeEmptyRanks",()=>{CK(e)}),t("    nestingGraph.cleanup",()=>{SA.cleanup(e)}),t("    normalizeRanks",()=>{RK(e)}),t("    assignRankMinMax",()=>{oJ(e)}),t("    removeEdgeLabelProxies",()=>{iJ(e)}),t("    normalize.run",()=>{wA.run(e)}),t("    parentDummyChains",()=>{oZ(e)}),t("    addBorderSegments",()=>{sZ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{GZ(e,n.nodeOrder)}),t("    order",()=>{TZ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{dJ(e)}),t("    adjustCoordinateSystem",()=>{TA.adjust(e)}),t("    position",()=>{WZ(e)}),t("    positionSelfEdges",()=>{pJ(e)}),t("    removeBorderNodes",()=>{cJ(e)}),t("    normalize.undo",()=>{wA.undo(e)}),t("    fixupEdgeLabelCoords",()=>{uJ(e)}),t("    undoCoordinateSystem",()=>{TA.undo(e)}),t("    translateGraph",()=>{aJ(e)}),t("    assignNodeIntersects",()=>{lJ(e)}),t("    reversePoints",()=>{sJ(e)}),t("    acyclic.undo",()=>{gA.undo(e)})},XZ=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},qZ=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const u=t.node(n);r.x=u.x,r.y=u.y,r._order=u.order,r._rank=u.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=u.width,r.height=u.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},YZ=["nodesep","edgesep","ranksep","marginx","marginy"],KZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},U1=["acyclicer","ranker","rankdir","align"],ZZ=["width","height","layer","fixorder"],JZ={width:0,height:0},QZ=["minlen","weight","width","height","labeloffset"],eJ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},B1=["labelpos"],tJ=e=>{const t=new jf({multigraph:!0,compound:!0}),n=W1(e.graph()),a={};return U1==null||U1.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},KZ,V1(n,YZ),a)),e.nodes().forEach(r=>{const u=W1(e.node(r)),c=Object.assign(Object.assign({},JZ),u),v=V1(c,ZZ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const u=W1(e.edge(r)),c={};B1==null||B1.forEach(v=>{u[v]!==void 0&&(c[v]=u[v])}),t.setEdgeObj(r,Object.assign({},eJ,V1(u,QZ),c))}),t},nJ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},rJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),u={e:t,rank:(r.rank-a.rank)/2+a.rank};Yv(e,"edge-proxy",u,"_ep")}})},oJ=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const u=e.node(n);u.borderTop&&(u.minRank=(a=e.node(u.borderTop))===null||a===void 0?void 0:a.rank,u.maxRank=(r=e.node(u.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,u.maxRank||-1/0))}),e.graph().maxRank=t},iJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},aJ=e=>{let t,n=0,a,r=0;const u=e.graph(),c=u.marginx||0,v=u.marginy||0,f=g=>{if(!g)return;const b=g.x,_=g.y,x=g.width,A=g.height;!isNaN(b)&&!isNaN(x)&&(t===void 0&&(t=b-x/2),t=Math.min(t,b-x/2),n=Math.max(n,b+x/2)),!isNaN(_)&&!isNaN(A)&&(a===void 0&&(a=_-A/2),a=Math.min(a,_-A/2),r=Math.max(r,_+A/2))};e.nodes().forEach(g=>{f(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&f(b)}),t-=c,a-=v,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=a)}),e.edges().forEach(g=>{var b;const _=e.edge(g);(b=_.points)===null||b===void 0||b.forEach(x=>{x.x-=t,x.y-=a}),_.hasOwnProperty("x")&&(_.x-=t),_.hasOwnProperty("y")&&(_.y-=a)}),u.width=n-t+c,u.height=r-a+v},lJ=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let u,c;n.points?(u=n.points[0],c=n.points[n.points.length-1]):(n.points=[],u=r,c=a),n.points.unshift(bA(a,u)),n.points.push(bA(r,c))})},uJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},sJ=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},cJ=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const u=e.node(t),c=e.node(u.borderTop),v=e.node(u.borderBottom),f=e.node(u.borderLeft[((a=u.borderLeft)===null||a===void 0?void 0:a.length)-1]),g=e.node(u.borderRight[((r=u.borderRight)===null||r===void 0?void 0:r.length)-1]);u.width=Math.abs((g==null?void 0:g.x)-(f==null?void 0:f.x))||10,u.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,u.x=((f==null?void 0:f.x)||0)+u.width/2,u.y=((c==null?void 0:c.y)||0)+u.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},fJ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},dJ=e=>{const t=Xm(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,u)=>{var c;const v=e.node(r);v.order=u+a,(c=v.selfEdges)===null||c===void 0||c.forEach(f=>{Yv(e,"selfedge",{width:f.label.width,height:f.label.height,rank:v.rank,order:u+ ++a,e:f.e,label:f.label},"_se")}),delete v.selfEdges})})},pJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,u=a.y,c=n.x-r,v=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:u-v},{x:r+5*c/6,y:u-v},{y:u,x:r+c},{x:r+5*c/6,y:u+v},{x:r+2*c/3,y:u+v}],n.label.x=n.x,n.label.y=n.y}})},V1=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},W1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},hJ={layout:zZ,util:{time:CP,notime:DP}};class vJ extends CY{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,u=r.find(c=>c.id===n);return u?u.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const u=this,{nodes:c,nodeSize:v,rankdir:f,combos:g,begin:b,radial:_,comboEdges:x=[],vedges:A=[]}=u;if(!c)return;const M=u.edges||[],S=new jf({multigraph:!0,compound:!0});u.nodeMap={};const E={};c.forEach(Y=>{u.nodeMap[Y.id]=Y,Y.comboId&&(E[Y.comboId]=E[Y.comboId]||[],E[Y.comboId].push(Y.id))});let D=[];const I={};!((t=u.nodeOrder)===null||t===void 0)&&t.length?(u.nodeOrder.forEach(Y=>{I[Y]=!0,D.push(u.nodeMap[Y])}),c.forEach(Y=>{I[Y.id]||D.push(Y)})):D=c;let B;v?uA(v)?B=()=>v:B=()=>[v,v]:B=Y=>Y.size?uA(Y.size)?Y.size:SP(Y.size)?[Y.size.width||40,Y.size.height||40]:[Y.size,Y.size]:[40,40];const $=sA(u.ranksep,50,u.ranksepFunc),j=sA(u.nodesep,50,u.nodesepFunc);let U=j,K=$;(f==="LR"||f==="RL")&&(U=$,K=j),S.setDefaultEdgeLabel(()=>({})),S.setGraph(u);const Q={};this.sortByCombo&&g&&g.forEach(Y=>{if(Q[Y.id]=Y,Y.collapsed){const q=B(Y),oe=K(Y),ie=U(Y),Pe=q[0]+2*ie,we=q[1]+2*oe;S.setNode(Y.id,{width:Pe,height:we})}Y.parentId&&(Q[Y.parentId]||S.setNode(Y.parentId,{}),S.setParent(Y.id,Y.parentId))}),D.filter(Y=>Y.layout!==!1).forEach(Y=>{const q=B(Y),oe=K(Y),ie=U(Y),Pe=q[0]+2*ie,we=q[1]+2*oe,be=Y.layer;Qg(be)?S.setNode(Y.id,{width:Pe,height:we,layer:be}):S.setNode(Y.id,{width:Pe,height:we}),this.sortByCombo&&Y.comboId&&(Q[Y.comboId]||(Q[Y.comboId]={id:Y.comboId},S.setNode(Y.comboId,{})),S.setParent(Y.id,Y.comboId))}),M.forEach(Y=>{const q=cv(Y,"source"),oe=cv(Y,"target");this.layoutNode(q)&&this.layoutNode(oe)&&S.setEdge(q,oe,{weight:Y.weight||1})}),(n=x==null?void 0:x.concat(A||[]))===null||n===void 0||n.forEach(Y=>{var q,oe;const{source:ie,target:Pe}=Y,we=!((q=Q[ie])===null||q===void 0)&&q.collapsed?[ie]:E[ie]||[ie],be=!((oe=Q[Pe])===null||oe===void 0)&&oe.collapsed?[Pe]:E[Pe]||[Pe];we.forEach(ye=>{be.forEach(Xe=>{S.setEdge(ye,Xe,{weight:Y.weight||1})})})});let H;!((a=u.preset)===null||a===void 0)&&a.nodes&&(H=new jf({multigraph:!0,compound:!0}),u.preset.nodes.forEach(Y=>{H==null||H.setNode(Y.id,Y)})),hJ.layout(S,{prevGraph:H,edgeLabelSpace:u.edgeLabelSpace,keepNodeOrder:!!u.nodeOrder,nodeOrder:u.nodeOrder});const W=[0,0];if(b){let Y=1/0,q=1/0;S.nodes().forEach(oe=>{const ie=S.node(oe);Y>ie.x&&(Y=ie.x),q>ie.y&&(q=ie.y)}),S.edges().forEach(oe=>{var ie;(ie=S.edge(oe).points)===null||ie===void 0||ie.forEach(we=>{Y>we.x&&(Y=we.x),q>we.y&&(q=we.y)})}),W[0]=b[0]-Y,W[1]=b[1]-q}const z=f==="LR"||f==="RL";if(_){const{focusNode:Y,ranksep:q,getRadialPos:oe}=this,ie=DY(Y)?Y:Y==null?void 0:Y.id,Pe=ie?(r=S.node(ie))===null||r===void 0?void 0:r._rank:0,we=[],be=z?"y":"x",ye=z?"height":"width";let Xe=1/0,Ze=-1/0;S.nodes().forEach(Se=>{const Ae=S.node(Se);if(!u.nodeMap[Se])return;const qe=j(u.nodeMap[Se]);if(Pe===0)we[Ae._rank]||(we[Ae._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),we[Ae._rank].nodes.push(Se),we[Ae._rank].totalWidth+=qe*2+Ae[ye],we[Ae._rank].maxSize<Math.max(Ae.width,Ae.height)&&(we[Ae._rank].maxSize=Math.max(Ae.width,Ae.height));else{const Vt=Ae._rank-Pe;if(Vt===0)we[Vt]||(we[Vt]={nodes:[],totalWidth:0,maxSize:-1/0}),we[Vt].nodes.push(Se),we[Vt].totalWidth+=qe*2+Ae[ye],we[Vt].maxSize<Math.max(Ae.width,Ae.height)&&(we[Vt].maxSize=Math.max(Ae.width,Ae.height));else{const Jt=Math.abs(Vt);we[Jt]||(we[Jt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),we[Jt].totalWidth+=qe*2+Ae[ye],we[Jt].maxSize<Math.max(Ae.width,Ae.height)&&(we[Jt].maxSize=Math.max(Ae.width,Ae.height)),Vt<0?we[Jt].left.push(Se):we[Jt].right.push(Se)}}const _t=Ae[be]-Ae[ye]/2-qe,ht=Ae[be]+Ae[ye]/2+qe;_t<Xe&&(Xe=_t),ht>Ze&&(Ze=ht)});let yt=q||50;const Be={},qt=(Ze-Xe)/.9,Yt=[(Xe+Ze-qt)*.5,(Xe+Ze+qt)*.5],Pt=(Se,Ae,qe=-1/0,_t=[0,1])=>{let ht=qe;return Se.forEach(Vt=>{const Jt=S.node(Vt);Be[Vt]=Ae;const{x:an,y:Kt}=oe(Jt[be],Yt,qt,Ae,_t);if(!u.nodeMap[Vt])return;u.nodeMap[Vt].x=an+W[0],u.nodeMap[Vt].y=Kt+W[1],u.nodeMap[Vt]._order=Jt._order;const rt=$(u.nodeMap[Vt]);ht<rt&&(ht=rt)}),ht};let An=!0;const $e=0;we.forEach(Se=>{var Ae,qe,_t,ht,Vt,Jt,an;if(!(!((Ae=Se==null?void 0:Se.nodes)===null||Ae===void 0)&&Ae.length)&&!(!((qe=Se==null?void 0:Se.left)===null||qe===void 0)&&qe.length)&&!(!((_t=Se==null?void 0:Se.right)===null||_t===void 0)&&_t.length))return;if(An&&Se.nodes.length===1){const rt=Se.nodes[0];if(!u.nodeMap[rt])return;u.nodeMap[rt].x=W[0],u.nodeMap[rt].y=W[1],Be[Se.nodes[0]]=0,yt=$(u.nodeMap[rt]),An=!1;return}yt=Math.max(yt,Se.totalWidth/(2*Math.PI));let Kt=-1/0;if(Pe===0||!((ht=Se.nodes)===null||ht===void 0)&&ht.length)Kt=Pt(Se.nodes,yt,Kt,[0,1]);else{const rt=((Vt=Se.left)===null||Vt===void 0?void 0:Vt.length)/(((Jt=Se.left)===null||Jt===void 0?void 0:Jt.length)+((an=Se.right)===null||an===void 0?void 0:an.length));Kt=Pt(Se.left,yt,Kt,[0,rt]),Kt=Pt(Se.right,yt,Kt,[rt+.05,1])}yt+=Kt,An=!1,$e-Se.maxSize}),S.edges().forEach(Se=>{var Ae,qe,_t;const ht=S.edge(Se),Vt=M.findIndex(Jt=>{const an=cv(Jt,"source"),Kt=cv(Jt,"target");return an===Se.v&&Kt===Se.w});if(!(Vt<=-1)&&u.edgeLabelSpace&&u.controlPoints&&M[Vt].type!=="loop"){const Jt=be==="x"?"y":"x",an=(Ae=ht==null?void 0:ht.points)===null||Ae===void 0?void 0:Ae.slice(1,ht.points.length-1),Kt=[],rt=(qe=S.node(Se.v))===null||qe===void 0?void 0:qe[Jt],pn=rt-((_t=S.node(Se.w))===null||_t===void 0?void 0:_t[Jt]),Ue=Be[Se.v],_n=Ue-Be[Se.w];an==null||an.forEach(Jn=>{const le=(Jn[Jt]-rt)/pn*_n+Ue,Qn=oe(Jn[be],Yt,qt,le);Kt.push({x:Qn.x+W[0],y:Qn.y+W[1]})}),M[Vt].controlPoints=Kt}})}else{const Y=new Set,oe=f==="BT"||f==="RL"?(be,ye)=>ye-be:(be,ye)=>be-ye;S.nodes().forEach(be=>{const ye=S.node(be);if(!ye)return;let Xe=this.nodeMap[be];Xe||(Xe=g==null?void 0:g.find(Ze=>Ze.id===be)),Xe&&(Xe.x=ye.x+W[0],Xe.y=ye.y+W[1],Xe._order=ye._order,Y.add(z?Xe.x:Xe.y))});const ie=Array.from(Y).sort(oe),Pe=z?(be,ye)=>be.x!==ye.x:(be,ye)=>be.y!==ye.y,we=z?(be,ye,Xe)=>{const Ze=Math.max(ye.y,Xe.y),yt=Math.min(ye.y,Xe.y);return be.filter(Be=>Be.y<=Ze&&Be.y>=yt)}:(be,ye,Xe)=>{const Ze=Math.max(ye.x,Xe.x),yt=Math.min(ye.x,Xe.x);return be.filter(Be=>Be.x<=Ze&&Be.x>=yt)};S.edges().forEach(be=>{var ye;const Xe=S.edge(be),Ze=M.findIndex(yt=>{const Be=cv(yt,"source"),qt=cv(yt,"target");return Be===be.v&&qt===be.w});if(!(Ze<=-1)&&u.edgeLabelSpace&&u.controlPoints&&M[Ze].type!=="loop"){(ye=Xe==null?void 0:Xe.points)===null||ye===void 0||ye.forEach(qt=>{qt.x+=W[0],qt.y+=W[1]});const yt=u.nodeMap[be.v],Be=u.nodeMap[be.w];M[Ze].controlPoints=mJ(Xe==null?void 0:Xe.points,yt,Be,ie,z,Pe,we)}})}return u.onLayoutEnd&&u.onLayoutEnd(),{nodes:c,edges:M}}getRadialPos(t,n,a,r,u=[0,1]){let c=(t-n[0])/a;c=c*(u[1]-u[0])+u[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const mJ=(e,t,n,a,r,u,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:f,y:g}=t,{x:b,y:_}=n;if(r&&(f=t.y,g=t.x,b=n.y,_=n.x),_!==g&&f!==b){const x=a.indexOf(g),A=a[x+1];if(A){const E=v[0],D=r?{x:(g+A)/2,y:(E==null?void 0:E.y)||b}:{x:(E==null?void 0:E.x)||b,y:(g+A)/2};(!E||u(E,D))&&v.unshift(D)}const M=a.indexOf(_),S=Math.abs(M-x);if(S===1)v=c(v,t,n),v.length||v.push(r?{x:(g+_)/2,y:f}:{x:f,y:(g+_)/2});else if(S>1){const E=a[M-1];if(E){const D=v[v.length-1],I=r?{x:(_+E)/2,y:(D==null?void 0:D.y)||b}:{x:(D==null?void 0:D.x)||f,y:(_+E)/2};(!D||u(D,I))&&v.push(I)}}}}return v};var DA,jA,IA,LA;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(DA||(DA={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jA||(jA={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IA||(IA={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LA||(LA={}));var mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VE(e,t){return e(t={exports:{}},t.exports),t.exports}var yJ=function(){this.__data__=[],this.size=0},Kv=function(e,t){return e===t||e!=e&&t!=t},Nb=function(e,t){for(var n=e.length;n--;)if(Kv(e[n][0],t))return n;return-1},gJ=Array.prototype.splice,bJ=function(e){var t=this.__data__,n=Nb(t,e);return!(n<0)&&(n==t.length-1?t.pop():gJ.call(t,n,1),--this.size,!0)},_J=function(e){var t=this.__data__,n=Nb(t,e);return n<0?void 0:t[n][1]},wJ=function(e){return Nb(this.__data__,e)>-1},EJ=function(e,t){var n=this.__data__,a=Nb(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function pv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}pv.prototype.clear=yJ,pv.prototype.delete=bJ,pv.prototype.get=_J,pv.prototype.has=wJ,pv.prototype.set=EJ;var Rb=pv,OJ=function(){this.__data__=new Rb,this.size=0},SJ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xJ=function(e){return this.__data__.get(e)},AJ=function(e){return this.__data__.has(e)},zP=typeof mg=="object"&&mg&&mg.Object===Object&&mg,TJ=typeof self=="object"&&self&&self.Object===Object&&self,ks=zP||TJ||Function("return this")(),ju=ks.Symbol,HP=Object.prototype,MJ=HP.hasOwnProperty,kJ=HP.toString,Em=ju?ju.toStringTag:void 0,PJ=function(e){var t=MJ.call(e,Em),n=e[Em];try{e[Em]=void 0;var a=!0}catch{}var r=kJ.call(e);return a&&(t?e[Em]=n:delete e[Em]),r},NJ=Object.prototype.toString,RJ=function(e){return NJ.call(e)},FA=ju?ju.toStringTag:void 0,Jd=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":FA&&FA in Object(e)?PJ(e):RJ(e)},Cl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},$A,uy=function(e){if(!Cl(e))return!1;var t=Jd(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},G1=ks["__core-js_shared__"],UA=($A=/[^.]+$/.exec(G1&&G1.keys&&G1.keys.IE_PROTO||""))?"Symbol(src)_1."+$A:"",CJ=function(e){return!!UA&&UA in e},DJ=Function.prototype.toString,ph=function(e){if(e!=null){try{return DJ.call(e)}catch{}try{return e+""}catch{}}return""},jJ=/^\[object .+?Constructor\]$/,IJ=Function.prototype,LJ=Object.prototype,FJ=IJ.toString,$J=LJ.hasOwnProperty,UJ=RegExp("^"+FJ.call($J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),BJ=function(e){return!(!Cl(e)||CJ(e))&&(uy(e)?UJ:jJ).test(ph(e))},VJ=function(e,t){return e==null?void 0:e[t]},hh=function(e,t){var n=VJ(e,t);return BJ(n)?n:void 0},qm=hh(ks,"Map"),Ym=hh(Object,"create"),WJ=function(){this.__data__=Ym?Ym(null):{},this.size=0},GJ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zJ=Object.prototype.hasOwnProperty,HJ=function(e){var t=this.__data__;if(Ym){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return zJ.call(t,e)?t[e]:void 0},XJ=Object.prototype.hasOwnProperty,qJ=function(e){var t=this.__data__;return Ym?t[e]!==void 0:XJ.call(t,e)},YJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ym&&t===void 0?"__lodash_hash_undefined__":t,this};function hv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}hv.prototype.clear=WJ,hv.prototype.delete=GJ,hv.prototype.get=HJ,hv.prototype.has=qJ,hv.prototype.set=YJ;var BA=hv,KJ=function(){this.size=0,this.__data__={hash:new BA,map:new(qm||Rb),string:new BA}},ZJ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Cb=function(e,t){var n=e.__data__;return ZJ(t)?n[typeof t=="string"?"string":"hash"]:n.map},JJ=function(e){var t=Cb(this,e).delete(e);return this.size-=t?1:0,t},QJ=function(e){return Cb(this,e).get(e)},eQ=function(e){return Cb(this,e).has(e)},tQ=function(e,t){var n=Cb(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function vv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}vv.prototype.clear=KJ,vv.prototype.delete=JJ,vv.prototype.get=QJ,vv.prototype.has=eQ,vv.prototype.set=tQ;var Db=vv,nQ=function(e,t){var n=this.__data__;if(n instanceof Rb){var a=n.__data__;if(!qm||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Db(a)}return n.set(e,t),this.size=n.size,this};function mv(e){var t=this.__data__=new Rb(e);this.size=t.size}mv.prototype.clear=OJ,mv.prototype.delete=SJ,mv.prototype.get=xJ,mv.prototype.has=AJ,mv.prototype.set=nQ;var xv=mv,WE=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},tb=function(){try{var e=hh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),jb=function(e,t,n){t=="__proto__"&&tb?tb(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},rQ=Object.prototype.hasOwnProperty,Ib=function(e,t,n){var a=e[t];rQ.call(e,t)&&Kv(a,n)&&(n!==void 0||t in e)||jb(e,t,n)},sy=function(e,t,n,a){var r=!n;n||(n={});for(var u=-1,c=t.length;++u<c;){var v=t[u],f=void 0;f===void 0&&(f=e[v]),r?jb(n,v,f):Ib(n,v,f)}return n},oQ=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},As=function(e){return e!=null&&typeof e=="object"},VA=function(e){return As(e)&&Jd(e)=="[object Arguments]"},XP=Object.prototype,iQ=XP.hasOwnProperty,aQ=XP.propertyIsEnumerable,Dv=VA(function(){return arguments}())?VA:function(e){return As(e)&&iQ.call(e,"callee")&&!aQ.call(e,"callee")},Di=Array.isArray,lQ=function(){return!1},nh=VE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?ks.Buffer:void 0,u=(r?r.isBuffer:void 0)||lQ;e.exports=u}),uQ=/^(?:0|[1-9]\d*)$/,Lb=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&uQ.test(e))&&e>-1&&e%1==0&&e<t},GE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ai={};ai["[object Float32Array]"]=ai["[object Float64Array]"]=ai["[object Int8Array]"]=ai["[object Int16Array]"]=ai["[object Int32Array]"]=ai["[object Uint8Array]"]=ai["[object Uint8ClampedArray]"]=ai["[object Uint16Array]"]=ai["[object Uint32Array]"]=!0,ai["[object Arguments]"]=ai["[object Array]"]=ai["[object ArrayBuffer]"]=ai["[object Boolean]"]=ai["[object DataView]"]=ai["[object Date]"]=ai["[object Error]"]=ai["[object Function]"]=ai["[object Map]"]=ai["[object Number]"]=ai["[object Object]"]=ai["[object RegExp]"]=ai["[object Set]"]=ai["[object String]"]=ai["[object WeakMap]"]=!1;var sQ=function(e){return As(e)&&GE(e.length)&&!!ai[Jd(e)]},Fb=function(e){return function(t){return e(t)}},jv=VE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&zP.process,u=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=u}),WA=jv&&jv.isTypedArray,cy=WA?Fb(WA):sQ,cQ=Object.prototype.hasOwnProperty,qP=function(e,t){var n=Di(e),a=!n&&Dv(e),r=!n&&!a&&nh(e),u=!n&&!a&&!r&&cy(e),c=n||a||r||u,v=c?oQ(e.length,String):[],f=v.length;for(var g in e)!t&&!cQ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||u&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Lb(g,f))||v.push(g);return v},fQ=Object.prototype,$b=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||fQ)},YP=function(e,t){return function(n){return e(t(n))}},dQ=YP(Object.keys,Object),pQ=Object.prototype.hasOwnProperty,zE=function(e){if(!$b(e))return dQ(e);var t=[];for(var n in Object(e))pQ.call(e,n)&&n!="constructor"&&t.push(n);return t},Ff=function(e){return e!=null&&GE(e.length)&&!uy(e)},Qd=function(e){return Ff(e)?qP(e):zE(e)},hQ=function(e,t){return e&&sy(t,Qd(t),e)},vQ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},mQ=Object.prototype.hasOwnProperty,yQ=function(e){if(!Cl(e))return vQ(e);var t=$b(e),n=[];for(var a in e)(a!="constructor"||!t&&mQ.call(e,a))&&n.push(a);return n},vh=function(e){return Ff(e)?qP(e,!0):yQ(e)},gQ=function(e,t){return e&&sy(t,vh(t),e)},KP=VE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?ks.Buffer:void 0,u=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var f=c.length,g=u?u(f):new c.constructor(f);return c.copy(g),g}}),ZP=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},JP=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,u=[];++n<a;){var c=e[n];t(c,n,e)&&(u[r++]=c)}return u},QP=function(){return[]},bQ=Object.prototype.propertyIsEnumerable,GA=Object.getOwnPropertySymbols,HE=GA?function(e){return e==null?[]:(e=Object(e),JP(GA(e),function(t){return bQ.call(e,t)}))}:QP,_Q=function(e,t){return sy(e,HE(e),t)},XE=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},Ub=YP(Object.getPrototypeOf,Object),eN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)XE(t,HE(e)),e=Ub(e);return t}:QP,wQ=function(e,t){return sy(e,eN(e),t)},tN=function(e,t,n){var a=t(e);return Di(e)?a:XE(a,n(e))},Ww=function(e){return tN(e,Qd,HE)},EQ=function(e){return tN(e,vh,eN)},Gw=hh(ks,"DataView"),zw=hh(ks,"Promise"),Av=hh(ks,"Set"),Hw=hh(ks,"WeakMap"),OQ=ph(Gw),SQ=ph(qm),xQ=ph(zw),AQ=ph(Av),TQ=ph(Hw),qp=Jd;(Gw&&qp(new Gw(new ArrayBuffer(1)))!="[object DataView]"||qm&&qp(new qm)!="[object Map]"||zw&&qp(zw.resolve())!="[object Promise]"||Av&&qp(new Av)!="[object Set]"||Hw&&qp(new Hw)!="[object WeakMap]")&&(qp=function(e){var t=Jd(e),n=t=="[object Object]"?e.constructor:void 0,a=n?ph(n):"";if(a)switch(a){case OQ:return"[object DataView]";case SQ:return"[object Map]";case xQ:return"[object Promise]";case AQ:return"[object Set]";case TQ:return"[object WeakMap]"}return t});var rh=qp,MQ=Object.prototype.hasOwnProperty,kQ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&MQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},nb=ks.Uint8Array,qE=function(e){var t=new e.constructor(e.byteLength);return new nb(t).set(new nb(e)),t},PQ=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},NQ=/\w*$/,RQ=function(e){var t=new e.constructor(e.source,NQ.exec(e));return t.lastIndex=e.lastIndex,t},zA=ju?ju.prototype:void 0,HA=zA?zA.valueOf:void 0,CQ=function(e){return HA?Object(HA.call(e)):{}},nN=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},DQ=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return qE(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return PQ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nN(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return RQ(e);case"[object Set]":return new a;case"[object Symbol]":return CQ(e)}},XA=Object.create,rN=function(){function e(){}return function(t){if(!Cl(t))return{};if(XA)return XA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),oN=function(e){return typeof e.constructor!="function"||$b(e)?{}:rN(Ub(e))},jQ=function(e){return As(e)&&rh(e)=="[object Map]"},qA=jv&&jv.isMap,IQ=qA?Fb(qA):jQ,LQ=function(e){return As(e)&&rh(e)=="[object Set]"},YA=jv&&jv.isSet,FQ=YA?Fb(YA):LQ,Qo={};Qo["[object Arguments]"]=Qo["[object Array]"]=Qo["[object ArrayBuffer]"]=Qo["[object DataView]"]=Qo["[object Boolean]"]=Qo["[object Date]"]=Qo["[object Float32Array]"]=Qo["[object Float64Array]"]=Qo["[object Int8Array]"]=Qo["[object Int16Array]"]=Qo["[object Int32Array]"]=Qo["[object Map]"]=Qo["[object Number]"]=Qo["[object Object]"]=Qo["[object RegExp]"]=Qo["[object Set]"]=Qo["[object String]"]=Qo["[object Symbol]"]=Qo["[object Uint8Array]"]=Qo["[object Uint8ClampedArray]"]=Qo["[object Uint16Array]"]=Qo["[object Uint32Array]"]=!0,Qo["[object Error]"]=Qo["[object Function]"]=Qo["[object WeakMap]"]=!1;var iN=function e(t,n,a,r,u,c){var v,f=1&n,g=2&n,b=4&n;if(v!==void 0)return v;if(!Cl(t))return t;var _=Di(t);if(_){if(v=kQ(t),!f)return ZP(t,v)}else{var x=rh(t),A=x=="[object Function]"||x=="[object GeneratorFunction]";if(nh(t))return KP(t,f);if(x=="[object Object]"||x=="[object Arguments]"||A&&!u){if(v=g||A?{}:oN(t),!f)return g?wQ(t,gQ(v,t)):_Q(t,hQ(v,t))}else{if(!Qo[x])return u?t:{};v=DQ(t,x,f)}}c||(c=new xv);var M=c.get(t);if(M)return M;c.set(t,v),FQ(t)?t.forEach(function(E){v.add(e(E,n,a,E,t,c))}):IQ(t)&&t.forEach(function(E,D){v.set(D,e(E,n,a,D,t,c))});var S=_?void 0:(b?g?EQ:Ww:g?vh:Qd)(t);return WE(S||t,function(E,D){S&&(E=t[D=E]),Ib(v,D,e(E,n,a,D,t,c))}),v},$Q=function(e){return iN(e,4)},YE=function(e){return function(){return e}},KE=function(e){return function(t,n,a){for(var r=-1,u=Object(t),c=a(t),v=c.length;v--;){var f=c[++r];if(n(u[f],f,u)===!1)break}return t}}(),ZE=function(e,t){return e&&KE(e,t,Qd)},Bb=function(e,t){return function(n,a){if(n==null)return n;if(!Ff(n))return e(n,a);for(var r=n.length,u=-1,c=Object(n);++u<r&&a(c[u],u,c)!==!1;);return n}}(ZE),mh=function(e){return e},aN=function(e){return typeof e=="function"?e:mh},lN=function(e,t){return(Di(e)?WE:Bb)(e,aN(t))},uN=lN,UQ=function(e,t){var n=[];return Bb(e,function(a,r,u){t(a,r,u)&&n.push(a)}),n},BQ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},VQ=function(e){return this.__data__.has(e)};function kg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Db;++t<n;)this.add(e[t])}kg.prototype.add=kg.prototype.push=BQ,kg.prototype.has=VQ;var sN=kg,WQ=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},cN=function(e,t){return e.has(t)},fN=function(e,t,n,a,r,u){var c=1&n,v=e.length,f=t.length;if(v!=f&&!(c&&f>v))return!1;var g=u.get(e),b=u.get(t);if(g&&b)return g==t&&b==e;var _=-1,x=!0,A=2&n?new sN:void 0;for(u.set(e,t),u.set(t,e);++_<v;){var M=e[_],S=t[_];if(a)var E=c?a(S,M,_,t,e,u):a(M,S,_,e,t,u);if(E!==void 0){if(E)continue;x=!1;break}if(A){if(!WQ(t,function(D,I){if(!cN(A,I)&&(M===D||r(M,D,n,a,u)))return A.push(I)})){x=!1;break}}else if(M!==S&&!r(M,S,n,a,u)){x=!1;break}}return u.delete(e),u.delete(t),x},GQ=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},JE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},KA=ju?ju.prototype:void 0,z1=KA?KA.valueOf:void 0,zQ=function(e,t,n,a,r,u,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new nb(e),new nb(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Kv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=GQ;case"[object Set]":var f=1&a;if(v||(v=JE),e.size!=t.size&&!f)return!1;var g=c.get(e);if(g)return g==t;a|=2,c.set(e,t);var b=fN(v(e),v(t),a,r,u,c);return c.delete(e),b;case"[object Symbol]":if(z1)return z1.call(e)==z1.call(t)}return!1},HQ=Object.prototype.hasOwnProperty,XQ=function(e,t,n,a,r,u){var c=1&n,v=Ww(e),f=v.length;if(f!=Ww(t).length&&!c)return!1;for(var g=f;g--;){var b=v[g];if(!(c?b in t:HQ.call(t,b)))return!1}var _=u.get(e),x=u.get(t);if(_&&x)return _==t&&x==e;var A=!0;u.set(e,t),u.set(t,e);for(var M=c;++g<f;){var S=e[b=v[g]],E=t[b];if(a)var D=c?a(E,S,b,t,e,u):a(S,E,b,e,t,u);if(!(D===void 0?S===E||r(S,E,n,a,u):D)){A=!1;break}M||(M=b=="constructor")}if(A&&!M){var I=e.constructor,B=t.constructor;I==B||!("constructor"in e)||!("constructor"in t)||typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B||(A=!1)}return u.delete(e),u.delete(t),A},ZA=Object.prototype.hasOwnProperty,qQ=function(e,t,n,a,r,u){var c=Di(e),v=Di(t),f=c?"[object Array]":rh(e),g=v?"[object Array]":rh(t),b=(f=f=="[object Arguments]"?"[object Object]":f)=="[object Object]",_=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",x=f==g;if(x&&nh(e)){if(!nh(t))return!1;c=!0,b=!1}if(x&&!b)return u||(u=new xv),c||cy(e)?fN(e,t,n,a,r,u):zQ(e,t,f,n,a,r,u);if(!(1&n)){var A=b&&ZA.call(e,"__wrapped__"),M=_&&ZA.call(t,"__wrapped__");if(A||M){var S=A?e.value():e,E=M?t.value():t;return u||(u=new xv),r(S,E,n,a,u)}}return!!x&&(u||(u=new xv),XQ(e,t,n,a,r,u))},dN=function e(t,n,a,r,u){return t===n||(t==null||n==null||!As(t)&&!As(n)?t!=t&&n!=n:qQ(t,n,a,r,e,u))},YQ=function(e,t,n,a){var r=n.length,u=r;if(e==null)return!u;for(e=Object(e);r--;){var c=n[r];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<u;){var v=(c=n[r])[0],f=e[v],g=c[1];if(c[2]){if(f===void 0&&!(v in e))return!1}else{var b=new xv,_;if(!(_===void 0?dN(g,f,3,a,b):_))return!1}}return!0},pN=function(e){return e==e&&!Cl(e)},KQ=function(e){for(var t=Qd(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,pN(r)]}return t},hN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},ZQ=function(e){var t=KQ(e);return t.length==1&&t[0][2]?hN(t[0][0],t[0][1]):function(n){return n===e||YQ(n,e,t)}},oh=function(e){return typeof e=="symbol"||As(e)&&Jd(e)=="[object Symbol]"},JQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QQ=/^\w*$/,QE=function(e,t){if(Di(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!oh(e))||QQ.test(e)||!JQ.test(e)||t!=null&&e in Object(t)};function e2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],u=n.cache;if(u.has(r))return u.get(r);var c=e.apply(this,a);return n.cache=u.set(r,c)||u,c};return n.cache=new(e2.Cache||Db),n}e2.Cache=Db;var eee=e2,tee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nee=/\\(\\)?/g,ree=function(e){var t=eee(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(tee,function(n,a,r,u){t.push(r?u.replace(nee,"$1"):a||n)}),t}),Tv=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},JA=ju?ju.prototype:void 0,QA=JA?JA.toString:void 0,oee=function e(t){if(typeof t=="string")return t;if(Di(t))return Tv(t,e)+"";if(oh(t))return QA?QA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},vN=function(e){return e==null?"":oee(e)},Vb=function(e,t){return Di(e)?e:QE(e,t)?[e]:ree(vN(e))},fy=function(e){if(typeof e=="string"||oh(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Wb=function(e,t){for(var n=0,a=(t=Vb(t,e)).length;e!=null&&n<a;)e=e[fy(t[n++])];return n&&n==a?e:void 0},iee=function(e,t,n){var a=e==null?void 0:Wb(e,t);return a===void 0?n:a},aee=function(e,t){return e!=null&&t in Object(e)},mN=function(e,t,n){for(var a=-1,r=(t=Vb(t,e)).length,u=!1;++a<r;){var c=fy(t[a]);if(!(u=e!=null&&n(e,c)))break;e=e[c]}return u||++a!=r?u:!!(r=e==null?0:e.length)&&GE(r)&&Lb(c,r)&&(Di(e)||Dv(e))},yN=function(e,t){return e!=null&&mN(e,t,aee)},lee=function(e,t){return QE(e)&&pN(t)?hN(fy(e),t):function(n){var a=iee(n,e);return a===void 0&&a===t?yN(n,e):dN(t,a,3)}},gN=function(e){return function(t){return t==null?void 0:t[e]}},uee=function(e){return function(t){return Wb(t,e)}},see=function(e){return QE(e)?gN(fy(e)):uee(e)},$f=function(e){return typeof e=="function"?e:e==null?mh:typeof e=="object"?Di(e)?lee(e[0],e[1]):ZQ(e):see(e)},bN=function(e,t){return(Di(e)?JP:UQ)(e,$f(t))},cee=Object.prototype.hasOwnProperty,fee=function(e,t){return e!=null&&cee.call(e,t)},_N=function(e,t){return e!=null&&mN(e,t,fee)},dee=Object.prototype.hasOwnProperty,pee=function(e){if(e==null)return!0;if(Ff(e)&&(Di(e)||typeof e=="string"||typeof e.splice=="function"||nh(e)||cy(e)||Dv(e)))return!e.length;var t=rh(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if($b(e))return!zE(e).length;for(var n in e)if(dee.call(e,n))return!1;return!0},wN=function(e){return e===void 0},EN=function(e,t){var n=-1,a=Ff(e)?Array(e.length):[];return Bb(e,function(r,u,c){a[++n]=t(r,u,c)}),a},ON=function(e,t){return(Di(e)?Tv:EN)(e,$f(t))},hee=function(e,t,n,a){var r=-1,u=e==null?0:e.length;for(a&&u&&(n=e[++r]);++r<u;)n=t(n,e[r],r,e);return n},vee=function(e,t,n,a,r){return r(e,function(u,c,v){n=a?(a=!1,u):t(n,u,c,v)}),n},SN=function(e,t,n){var a=Di(e)?hee:vee,r=arguments.length<3;return a(e,$f(t),n,r,Bb)},mee=function(e){return typeof e=="string"||!Di(e)&&As(e)&&Jd(e)=="[object String]"},yee=gN("length"),gee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),bee=function(e){return gee.test(e)},_ee="[\\ud800-\\udfff]",Xw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qw="\\ud83c[\\udffb-\\udfff]",xN="[^\\ud800-\\udfff]",AN="(?:\\ud83c[\\udde6-\\uddff]){2}",TN="[\\ud800-\\udbff][\\udc00-\\udfff]",eT="(?:"+Xw+"|"+qw+")?",wee="[\\ufe0e\\ufe0f]?"+eT+("(?:\\u200d(?:"+[xN,AN,TN].join("|")+")[\\ufe0e\\ufe0f]?"+eT+")*"),Eee="(?:"+[xN+Xw+"?",Xw,AN,TN,_ee].join("|")+")",tT=RegExp(qw+"(?="+qw+")|"+Eee+wee,"g"),Oee=function(e){for(var t=tT.lastIndex=0;tT.test(e);)++t;return t},See=function(e){return bee(e)?Oee(e):yee(e)},xee=function(e){if(e==null)return 0;if(Ff(e))return mee(e)?See(e):e.length;var t=rh(e);return t=="[object Map]"||t=="[object Set]"?e.size:zE(e).length},Aee=function(e,t,n){var a=Di(e),r=a||nh(e)||cy(e);if(t=$f(t),n==null){var u=e&&e.constructor;n=r?a?new u:[]:Cl(e)&&uy(u)?rN(Ub(e)):{}}return(r?WE:ZE)(e,function(c,v,f){return t(n,c,v,f)}),n},nT=ju?ju.isConcatSpreadable:void 0,Tee=function(e){return Di(e)||Dv(e)||!!(nT&&e&&e[nT])},t2=function(t,n,a,r,u){var c=-1,v=t.length;for(a||(a=Tee),u||(u=[]);++c<v;){var f=t[c];a(f)?XE(u,f):r||(u[u.length]=f)}return u},Mee=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rT=Math.max,MN=function(e,t,n){return t=rT(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,u=rT(a.length-t,0),c=Array(u);++r<u;)c[r]=a[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=a[r];return v[t]=n(c),Mee(e,this,v)}},kee=tb?function(e,t){return tb(e,"toString",{configurable:!0,enumerable:!1,value:YE(t),writable:!0})}:mh,Pee=Date.now,kN=function(e){var t=0,n=0;return function(){var a=Pee(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(kee),Gb=function(e,t){return kN(MN(e,t,mh),e+"")},PN=function(e,t,n,a){for(var r=e.length,u=n+-1;++u<r;)if(t(e[u],u,e))return u;return-1},Nee=function(e){return e!=e},Ree=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},Cee=function(e,t,n){return t==t?Ree(e,t,n):PN(e,Nee,n)},Dee=function(e,t){return!!(e!=null&&e.length)&&Cee(e,t,0)>-1},jee=function(){},Iee=Av&&1/JE(new Av([,-0]))[1]==1/0?function(e){return new Av(e)}:jee,Lee=function(e,t,n){var a=-1,r=Dee,u=e.length,c=!0,v=[],f=v;if(u>=200){var g=Iee(e);if(g)return JE(g);c=!1,r=cN,f=new sN}else f=v;e:for(;++a<u;){var b=e[a],_=b;if(b=b!==0?b:0,c&&_==_){for(var x=f.length;x--;)if(f[x]===_)continue e;v.push(b)}else r(f,_,n)||(f!==v&&f.push(_),v.push(b))}return v},NN=function(e){return As(e)&&Ff(e)},Fee=Gb(function(e){return Lee(t2(e,1,NN,!0))}),$ee=function(e,t){return Tv(t,function(n){return e[n]})},rb,RN=function(e){return e==null?[]:$ee(e,Qd(e))};try{rb={clone:$Q,constant:YE,each:uN,filter:bN,has:_N,isArray:Di,isEmpty:pee,isFunction:uy,isUndefined:wN,keys:Qd,map:ON,reduce:SN,size:xee,transform:Aee,union:Fee,values:RN}}catch{}rb||(rb=window._);var xn=rb,n2=Vr;function Vr(e){this._isDirected=!xn.has(e,"directed")||e.directed,this._isMultigraph=!!xn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!xn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=xn.constant(void 0),this._defaultEdgeLabelFn=xn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oT(e,t){e[t]?e[t]++:e[t]=1}function iT(e,t){--e[t]||delete e[t]}function km(e,t,n,a){var r=""+t,u=""+n;if(!e&&r>u){var c=r;r=u,u=c}return r+""+u+""+(xn.isUndefined(a)?"\0":a)}function Uee(e,t,n,a){var r=""+t,u=""+n;if(!e&&r>u){var c=r;r=u,u=c}var v={v:r,w:u};return a&&(v.name=a),v}function H1(e,t){return km(e,t.v,t.w,t.name)}Vr.prototype._nodeCount=0,Vr.prototype._edgeCount=0,Vr.prototype.isDirected=function(){return this._isDirected},Vr.prototype.isMultigraph=function(){return this._isMultigraph},Vr.prototype.isCompound=function(){return this._isCompound},Vr.prototype.setGraph=function(e){return this._label=e,this},Vr.prototype.graph=function(){return this._label},Vr.prototype.setDefaultNodeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultNodeLabelFn=e,this},Vr.prototype.nodeCount=function(){return this._nodeCount},Vr.prototype.nodes=function(){return xn.keys(this._nodes)},Vr.prototype.sources=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._in[t])})},Vr.prototype.sinks=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._out[t])})},Vr.prototype.setNodes=function(e,t){var n=arguments,a=this;return xn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Vr.prototype.setNode=function(e,t){return xn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Vr.prototype.node=function(e){return this._nodes[e]},Vr.prototype.hasNode=function(e){return xn.has(this._nodes,e)},Vr.prototype.removeNode=function(e){var t=this;if(xn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],xn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),xn.each(xn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],xn.each(xn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Vr.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(xn.isUndefined(t))t="\0";else{for(var n=t+="";!xn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Vr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Vr.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Vr.prototype.children=function(e){if(xn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return xn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Vr.prototype.predecessors=function(e){var t=this._preds[e];if(t)return xn.keys(t)},Vr.prototype.successors=function(e){var t=this._sucs[e];if(t)return xn.keys(t)},Vr.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return xn.union(t,this.successors(e))},Vr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Vr.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;xn.each(this._nodes,function(u,c){e(c)&&t.setNode(c,u)}),xn.each(this._edgeObjs,function(u){t.hasNode(u.v)&&t.hasNode(u.w)&&t.setEdge(u,n.edge(u))});var a={};function r(u){var c=n.parent(u);return c===void 0||t.hasNode(c)?(a[u]=c,c):c in a?a[c]:r(c)}return this._isCompound&&xn.each(t.nodes(),function(u){t.setParent(u,r(u))}),t},Vr.prototype.setDefaultEdgeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultEdgeLabelFn=e,this},Vr.prototype.edgeCount=function(){return this._edgeCount},Vr.prototype.edges=function(){return xn.values(this._edgeObjs)},Vr.prototype.setPath=function(e,t){var n=this,a=arguments;return xn.reduce(e,function(r,u){return a.length>1?n.setEdge(r,u,t):n.setEdge(r,u),u}),this},Vr.prototype.setEdge=function(){var e,t,n,a,r=!1,u=arguments[0];typeof u=="object"&&u!==null&&"v"in u?(e=u.v,t=u.w,n=u.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=u,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,xn.isUndefined(n)||(n=""+n);var c=km(this._isDirected,e,t,n);if(xn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!xn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var v=Uee(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,oT(this._preds[t],e),oT(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Vr.prototype.edge=function(e,t,n){var a=arguments.length===1?H1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n);return this._edgeLabels[a]},Vr.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?H1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n);return xn.has(this._edgeLabels,a)},Vr.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?H1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],iT(this._preds[t],e),iT(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Vr.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.v===t}):a}},Vr.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.w===t}):a}},Vr.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aT={Graph:n2,version:"2.1.8"},Bee={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Vee(e),edges:Wee(e)};return xn.isUndefined(e.graph())||(t.value=xn.clone(e.graph())),t},read:function(e){var t=new n2(e.options).setGraph(e.value);return xn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),xn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Vee(e){return xn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return xn.isUndefined(n)||(r.value=n),xn.isUndefined(a)||(r.parent=a),r})}function Wee(e){return xn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return xn.isUndefined(t.name)||(a.name=t.name),xn.isUndefined(n)||(a.value=n),a})}var Gee=function(e){var t,n={},a=[];function r(u){xn.has(n,u)||(n[u]=!0,t.push(u),xn.each(e.successors(u),r),xn.each(e.predecessors(u),r))}return xn.each(e.nodes(),function(u){t=[],r(u),t.length&&a.push(t)}),a},CN=ku;function ku(){this._arr=[],this._keyIndices={}}ku.prototype.size=function(){return this._arr.length},ku.prototype.keys=function(){return this._arr.map(function(e){return e.key})},ku.prototype.has=function(e){return xn.has(this._keyIndices,e)},ku.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},ku.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ku.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!xn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},ku.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},ku.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},ku.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},ku.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},ku.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],u=n[t];n[e]=u,n[t]=r,a[u.key]=e,a[r.key]=t};var DN=function(e,t,n,a){return function(r,u,c,v){var f,g,b={},_=new CN,x=function(A){var M=A.v!==f?A.v:A.w,S=b[M],E=c(A),D=g.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+A+" Weight: "+E);D<S.distance&&(S.distance=D,S.predecessor=f,_.decrease(M,D))};for(r.nodes().forEach(function(A){var M=A===u?0:Number.POSITIVE_INFINITY;b[A]={distance:M},_.add(A,M)});_.size()>0&&(f=_.removeMin(),(g=b[f]).distance!==Number.POSITIVE_INFINITY);)v(f).forEach(x);return b}(e,String(t),n||zee,a||function(r){return e.outEdges(r)})},zee=xn.constant(1),Hee=function(e,t,n){return xn.transform(e.nodes(),function(a,r){a[r]=DN(e,r,t,n)},{})},jN=function(e){var t=0,n=[],a={},r=[];function u(c){var v=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){xn.has(a,b)?a[b].onStack&&(v.lowlink=Math.min(v.lowlink,a[b].index)):(u(b),v.lowlink=Math.min(v.lowlink,a[b].lowlink))}),v.lowlink===v.index){var f,g=[];do f=n.pop(),a[f].onStack=!1,g.push(f);while(c!==f);r.push(g)}}return e.nodes().forEach(function(c){xn.has(a,c)||u(c)}),r},Xee=function(e){return xn.filter(jN(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},qee=function(e,t,n){return function(a,r,u){var c={},v=a.nodes();return v.forEach(function(f){c[f]={},c[f][f]={distance:0},v.forEach(function(g){f!==g&&(c[f][g]={distance:Number.POSITIVE_INFINITY})}),u(f).forEach(function(g){var b=g.v===f?g.w:g.v,_=r(g);c[f][b]={distance:_,predecessor:f}})}),v.forEach(function(f){var g=c[f];v.forEach(function(b){var _=c[b];v.forEach(function(x){var A=_[f],M=g[x],S=_[x],E=A.distance+M.distance;E<S.distance&&(S.distance=E,S.predecessor=M.predecessor)})})}),c}(e,t||Yee,n||function(a){return e.outEdges(a)})},Yee=xn.constant(1),X1=IN;function IN(e){var t={},n={},a=[];if(xn.each(e.sinks(),function r(u){if(xn.has(n,u))throw new ob;xn.has(t,u)||(n[u]=!0,t[u]=!0,xn.each(e.predecessors(u),r),delete n[u],a.push(u))}),xn.size(t)!==e.nodeCount())throw new ob;return a}function ob(){}IN.CycleException=ob,ob.prototype=new Error;var lT=function(e,t,n){xn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],u={};return xn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);LN(e,c,n==="post",u,a,r)}),r};function LN(e,t,n,a,r,u){xn.has(a,t)||(a[t]=!0,n||u.push(t),xn.each(r(t),function(c){LN(e,c,n,a,r,u)}),n&&u.push(t))}var ib,Kee={Graph:aT.Graph,json:Bee,alg:{components:Gee,dijkstra:DN,dijkstraAll:Hee,findCycles:Xee,floydWarshall:qee,isAcyclic:function(e){try{X1(e)}catch(t){if(t instanceof X1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lT(e,t,"post")},preorder:function(e,t){return lT(e,t,"pre")},prim:function(e,t){var n,a=new n2,r={},u=new CN;function c(f){var g=f.v===n?f.w:f.v,b=u.priority(g);if(b!==void 0){var _=t(f);_<b&&(r[g]=n,u.decrease(g,_))}}if(e.nodeCount()===0)return a;xn.each(e.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(e.nodes()[0],0);for(var v=!1;u.size()>0;){if(n=u.removeMin(),xn.has(r,n))a.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:jN,topsort:X1},version:aT.version};try{ib=Kee}catch{}ib||(ib=window.graphlib);var _c=ib,Zee=function(e){return iN(e,5)},Km=function(e,t,n){if(!Cl(n))return!1;var a=typeof t;return!!(a=="number"?Ff(n)&&Lb(t,n.length):a=="string"&&t in n)&&Kv(n[t],e)},FN=Object.prototype,Jee=FN.hasOwnProperty,Qee=Gb(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&Km(t[0],t[1],r)&&(a=1);++n<a;)for(var u=t[n],c=vh(u),v=-1,f=c.length;++v<f;){var g=c[v],b=e[g];(b===void 0||Kv(b,FN[g])&&!Jee.call(e,g))&&(e[g]=u[g])}return e}),ete=function(e){return function(t,n,a){var r=Object(t);if(!Ff(t)){var u=$f(n);t=Qd(t),n=function(v){return u(r[v],v,r)}}var c=e(t,n,a);return c>-1?r[u?t[c]:c]:void 0}},tte=/^\s+|\s+$/g,nte=/^[-+]0x[0-9a-f]+$/i,rte=/^0b[01]+$/i,ote=/^0o[0-7]+$/i,ite=parseInt,ate=function(e){if(typeof e=="number")return e;if(oh(e))return NaN;if(Cl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(tte,"");var n=rte.test(e);return n||ote.test(e)?ite(e.slice(2),n?2:8):nte.test(e)?NaN:+e},Pg=function(e){return e?(e=ate(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},lte=function(e){var t=Pg(e),n=t%1;return t==t?n?t-n:t:0},ute=Math.max,ste=ete(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:lte(n);return r<0&&(r=ute(a+r,0)),PN(e,$f(t),r)}),$N=function(e){return e!=null&&e.length?t2(e):[]},cte=function(e,t){return e==null?e:KE(e,aN(t),vh)},fte=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},dte=function(e,t){var n={};return t=$f(t),ZE(e,function(a,r,u){jb(n,r,t(a,r,u))}),n},r2=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var u=e[a],c=t(u);if(c!=null&&(v===void 0?c==c&&!oh(c):n(c,v)))var v=c,f=u}return f},pte=function(e,t){return e>t},hte=function(e){return e&&e.length?r2(e,mh,pte):void 0},Yw=function(e,t,n){(n!==void 0&&!Kv(e[t],n)||n===void 0&&!(t in e))&&jb(e,t,n)},vte=Function.prototype,mte=Object.prototype,UN=vte.toString,yte=mte.hasOwnProperty,gte=UN.call(Object),bte=function(e){if(!As(e)||Jd(e)!="[object Object]")return!1;var t=Ub(e);if(t===null)return!0;var n=yte.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&UN.call(n)==gte},uT=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},_te=function(e){return sy(e,vh(e))},wte=function(e,t,n,a,r,u,c){var v=uT(e,n),f=uT(t,n),g=c.get(f);if(g)Yw(e,n,g);else{var b=void 0,_=b===void 0;if(_){var x=Di(f),A=!x&&nh(f),M=!x&&!A&&cy(f);b=f,x||A||M?Di(v)?b=v:NN(v)?b=ZP(v):A?(_=!1,b=KP(f,!0)):M?(_=!1,b=nN(f,!0)):b=[]:bte(f)||Dv(f)?(b=v,Dv(v)?b=_te(v):Cl(v)&&!uy(v)||(b=oN(f))):_=!1}_&&(c.set(f,b),r(b,f,a,u,c),c.delete(f)),Yw(e,n,b)}},Ete=function e(t,n,a,r,u){t!==n&&KE(n,function(c,v){if(u||(u=new xv),Cl(c))wte(t,n,v,a,e,r,u);else{var f=void 0;f===void 0&&(f=c),Yw(t,v,f)}},vh)},Ote=function(e){return Gb(function(t,n){var a=-1,r=n.length,u=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(u=e.length>3&&typeof u=="function"?(r--,u):void 0,c&&Km(n[0],n[1],c)&&(u=r<3?void 0:u,r=1),t=Object(t);++a<r;){var v=n[a];v&&e(t,v,a,u)}return t})}(function(e,t,n){Ete(e,t,n)}),BN=function(e,t){return e<t},Ste=function(e){return e&&e.length?r2(e,mh,BN):void 0},xte=function(e,t){return e&&e.length?r2(e,$f(t),BN):void 0},Ate=function(){return ks.Date.now()},Tte=function(e,t,n,a){if(!Cl(e))return e;for(var r=-1,u=(t=Vb(t,e)).length,c=u-1,v=e;v!=null&&++r<u;){var f=fy(t[r]),g=n;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(r!=c){var b=v[f];(g=void 0)==void 0&&(g=Cl(b)?b:Lb(t[r+1])?[]:{})}Ib(v,f,g),v=v[f]}return e},Mte=function(e,t,n){for(var a=-1,r=t.length,u={};++a<r;){var c=t[a],v=Wb(e,c);n(v,c)&&Tte(u,Vb(c,e),v)}return u},kte=function(e,t){return Mte(e,t,function(n,a){return yN(e,a)})},Pte=function(e){return kN(MN(e,void 0,$N),e+"")}(function(e,t){return e==null?{}:kte(e,t)}),Nte=Math.ceil,Rte=Math.max,Cte=function(e,t,n,a){for(var r=-1,u=Rte(Nte((t-e)/(n||1)),0),c=Array(u);u--;)c[++r]=e,e+=n;return c},Dte=function(e){return function(t,n,a){return a&&typeof a!="number"&&Km(t,n,a)&&(n=a=void 0),t=Pg(t),n===void 0?(n=t,t=0):n=Pg(n),a=a===void 0?t<n?1:-1:Pg(a),Cte(t,n,a)}}(),jte=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Ite=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,u=oh(e),c=t!==void 0,v=t===null,f=t==t,g=oh(t);if(!v&&!g&&!u&&e>t||u&&c&&f&&!v&&!g||a&&c&&f||!n&&f||!r)return 1;if(!a&&!u&&!g&&e<t||g&&n&&r&&!a&&!u||v&&n&&r||!c&&r||!f)return-1}return 0},Lte=function(e,t,n){for(var a=-1,r=e.criteria,u=t.criteria,c=r.length,v=n.length;++a<c;){var f=Ite(r[a],u[a]);if(f)return a>=v?f:f*(n[a]=="desc"?-1:1)}return e.index-t.index},Fte=function(e,t,n){t=t.length?Tv(t,function(u){return Di(u)?function(c){return Wb(c,u.length===1?u[0]:u)}:u}):[mh];var a=-1;t=Tv(t,Fb($f));var r=EN(e,function(u,c,v){return{criteria:Tv(t,function(f){return f(u)}),index:++a,value:u}});return jte(r,function(u,c){return Lte(u,c,n)})},$te=Gb(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Km(e,t[0],t[1])?t=[]:n>2&&Km(t[0],t[1],t[2])&&(t=[t[0]]),Fte(e,t2(t),[])}),Ute=0,Bte=function(e){var t=++Ute;return vN(e)+t},Vte=function(e,t,n){for(var a=-1,r=e.length,u=t.length,c={};++a<r;){var v=a<u?t[a]:void 0;n(c,e[a],v)}return c},ab,Wte=function(e,t){return Vte(e||[],t||[],Ib)};try{ab={cloneDeep:Zee,constant:YE,defaults:Qee,each:uN,filter:bN,find:ste,flatten:$N,forEach:lN,forIn:cte,has:_N,isUndefined:wN,last:fte,map:ON,mapValues:dte,max:hte,merge:Ote,min:Ste,minBy:xte,now:Ate,pick:Pte,range:Dte,reduce:SN,sortBy:$te,uniqueId:Bte,values:RN,zipObject:Wte}}catch{}ab||(ab=window._);var Gte=ab;_c.Graph;Gte.constant(1);_c.Graph;_c.Graph;_c.alg.preorder;_c.alg.postorder;_c.Graph;_c.Graph;_c.Graph;_c.Graph;_c.Graph;var q1,sT;function zte(){if(sT)return q1;sT=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return q1=t,q1}var Y1,cT;function Hte(){if(cT)return Y1;cT=1;var e=oE(),t=zte(),n=iE(),a="[object Arguments]",r="[object Array]",u="[object Boolean]",c="[object Date]",v="[object Error]",f="[object Function]",g="[object Map]",b="[object Number]",_="[object Object]",x="[object RegExp]",A="[object Set]",M="[object String]",S="[object WeakMap]",E="[object ArrayBuffer]",D="[object DataView]",I="[object Float32Array]",B="[object Float64Array]",$="[object Int8Array]",j="[object Int16Array]",U="[object Int32Array]",K="[object Uint8Array]",Q="[object Uint8ClampedArray]",H="[object Uint16Array]",W="[object Uint32Array]",z={};z[I]=z[B]=z[$]=z[j]=z[U]=z[K]=z[Q]=z[H]=z[W]=!0,z[a]=z[r]=z[E]=z[u]=z[D]=z[c]=z[v]=z[f]=z[g]=z[b]=z[_]=z[x]=z[A]=z[M]=z[S]=!1;function Y(q){return n(q)&&t(q.length)&&!!z[e(q)]}return Y1=Y,Y1}var K1,fT;function Xte(){if(fT)return K1;fT=1;function e(t){return function(n){return t(n)}}return K1=e,K1}var Pm={exports:{}};Pm.exports;var dT;function qte(){return dT||(dT=1,function(e,t){var n=pI(),a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,u=r&&r.exports===a,c=u&&n.process,v=function(){try{var f=r&&r.require&&r.require("util").types;return f||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v}(Pm,Pm.exports)),Pm.exports}var Z1,pT;function Yte(){if(pT)return Z1;pT=1;var e=Hte(),t=Xte(),n=qte(),a=n&&n.isTypedArray,r=a?t(a):e;return Z1=r,Z1}Yte();var J1,hT;function Kte(){if(hT)return J1;hT=1;var e=oE(),t=iE(),n="[object Number]";function a(r){return typeof r=="number"||t(r)&&e(r)==n}return J1=a,J1}Kte();var Q1={exports:{}},ew={exports:{}},vT;function VN(){return vT||(vT=1,function(e){function t(n,a){this.v=n,this.k=a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}var tw={exports:{}},nw={exports:{}},mT;function WN(){return mT||(mT=1,function(e){function t(n,a,r,u){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(f,g,b,_){function x(A,M){t(f,A,function(S){return this._invoke(A,M,S)})}g?c?c(f,g,{value:b,enumerable:!_,configurable:!_,writable:!_}):f[g]=b:(x("next",0),x("throw",1),x("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,a,r,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(nw)),nw.exports}var yT;function GN(){return yT||(yT=1,function(e){var t=WN();function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",v=u.toStringTag||"@@toStringTag";function f(E,D,I,B){var $=D&&D.prototype instanceof b?D:b,j=Object.create($.prototype);return t(j,"_invoke",function(U,K,Q){var H,W,z,Y=0,q=Q||[],oe=!1,ie={p:0,n:0,v:a,a:Pe,f:Pe.bind(a,4),d:function(be,ye){return H=be,W=0,z=a,ie.n=ye,g}};function Pe(we,be){for(W=we,z=be,r=0;!oe&&Y&&!ye&&r<q.length;r++){var ye,Xe=q[r],Ze=ie.p,yt=Xe[2];we>3?(ye=yt===be)&&(z=Xe[(W=Xe[4])?5:(W=3,3)],Xe[4]=Xe[5]=a):Xe[0]<=Ze&&((ye=we<2&&Ze<Xe[1])?(W=0,ie.v=be,ie.n=Xe[1]):Ze<yt&&(ye=we<3||Xe[0]>be||be>yt)&&(Xe[4]=we,Xe[5]=be,ie.n=yt,W=0))}if(ye||we>1)return g;throw oe=!0,be}return function(we,be,ye){if(Y>1)throw TypeError("Generator is already running");for(oe&&be===1&&Pe(be,ye),W=be,z=ye;(r=W<2?a:z)||!oe;){H||(W?W<3?(W>1&&(ie.n=-1),Pe(W,z)):ie.n=z:ie.v=z);try{if(Y=2,H){if(W||(we="next"),r=H[we]){if(!(r=r.call(H,z)))throw TypeError("iterator result is not an object");if(!r.done)return r;z=r.value,W<2&&(W=0)}else W===1&&(r=H.return)&&r.call(H),W<2&&(z=TypeError("The iterator does not provide a '"+we+"' method"),W=1);H=a}else if((r=(oe=ie.n<0)?z:U.call(K,ie))!==g)break}catch(Xe){H=a,W=1,z=Xe}finally{Y=1}}return{value:r,done:oe}}}(E,I,B),!0),j}var g={};function b(){}function _(){}function x(){}r=Object.getPrototypeOf;var A=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),M=x.prototype=b.prototype=Object.create(A);function S(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,x):(E.__proto__=x,t(E,v,"GeneratorFunction")),E.prototype=Object.create(M),E}return _.prototype=x,t(M,"constructor",x),t(x,"constructor",_),_.displayName="GeneratorFunction",t(x,v,"GeneratorFunction"),t(M),t(M,v,"Generator"),t(M,c,function(){return this}),t(M,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:f,m:S}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(tw)),tw.exports}var rw={exports:{}},ow={exports:{}},iw={exports:{}},gT;function zN(){return gT||(gT=1,function(e){var t=VN(),n=WN();function a(r,u){function c(f,g,b,_){try{var x=r[f](g),A=x.value;return A instanceof t?u.resolve(A.v).then(function(M){c("next",M,b,_)},function(M){c("throw",M,b,_)}):u.resolve(A).then(function(M){x.value=M,b(x)},function(M){return c("throw",M,b,_)})}catch(M){_(M)}}var v;this.next||(n(a.prototype),n(a.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(f,g,b){function _(){return new u(function(x,A){c(f,b,x,A)})}return v=v?v.then(_,_):_()},!0)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(iw)),iw.exports}var bT;function HN(){return bT||(bT=1,function(e){var t=GN(),n=zN();function a(r,u,c,v,f){return new n(t().w(r,u,c,v),f||Promise)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(ow)),ow.exports}var _T;function Zte(){return _T||(_T=1,function(e){var t=HN();function n(a,r,u,c,v){var f=t(a,r,u,c,v);return f.next().then(function(g){return g.done?g.value:f.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(rw)),rw.exports}var aw={exports:{}},wT;function Jte(){return wT||(wT=1,function(e){function t(n){var a=Object(n),r=[];for(var u in a)r.unshift(u);return function c(){for(;r.length;)if((u=r.pop())in a)return c.value=u,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(aw)),aw.exports}var lw={exports:{}},uw={exports:{}},ET;function Qte(){return ET||(ET=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(uw)),uw.exports}var OT;function ene(){return OT||(OT=1,function(e){var t=Qte().default;function n(a){if(a!=null){var r=a[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],u=0;if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length))return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}}}throw new TypeError(t(a)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(lw)),lw.exports}var ST;function tne(){return ST||(ST=1,function(e){var t=VN(),n=GN(),a=Zte(),r=HN(),u=zN(),c=Jte(),v=ene();function f(){var g=n(),b=g.m(f),_=(Object.getPrototypeOf?Object.getPrototypeOf(b):b.__proto__).constructor;function x(S){var E=typeof S=="function"&&S.constructor;return!!E&&(E===_||(E.displayName||E.name)==="GeneratorFunction")}var A={throw:1,return:2,break:3,continue:3};function M(S){var E,D;return function(I){E||(E={stop:function(){return D(I.a,2)},catch:function(){return I.v},abrupt:function($,j){return D(I.a,A[$],j)},delegateYield:function($,j,U){return E.resultName=j,D(I.d,v($),U)},finish:function($){return D(I.f,$)}},D=function($,j,U){I.p=E.prev,I.n=E.next;try{return $(j,U)}finally{E.next=I.n}}),E.resultName&&(E[E.resultName]=I.v,E.resultName=void 0),E.sent=I.v,E.next=I.n;try{return S.call(this,E)}finally{I.p=E.prev,I.n=E.next}}}return(e.exports=f=function(){return{wrap:function(D,I,B,$){return g.w(M(D),I,B,$&&$.reverse())},isGeneratorFunction:x,mark:g.m,awrap:function(D,I){return new t(D,I)},AsyncIterator:u,async:function(D,I,B,$,j){return(x(I)?r:a)(M(D),I,B,$,j)},keys:c,values:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports}(Q1)),Q1.exports}var sw,xT;function nne(){if(xT)return sw;xT=1;var e=tne()();sw=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return sw}nne();var un;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(un||(un={}));var AT;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(AT||(AT={}));var TT;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(TT||(TT={}));var MT;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(MT||(MT={}));var kT;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(kT||(kT={}));var Ng={exports:{}},rne=Ng.exports,PT;function one(){return PT||(PT=1,function(e,t){(function(n,a){e.exports=a()})(rne,function(){var n=function(V){return V instanceof Uint8Array||V instanceof Uint16Array||V instanceof Uint32Array||V instanceof Int8Array||V instanceof Int16Array||V instanceof Int32Array||V instanceof Float32Array||V instanceof Float64Array||V instanceof Uint8ClampedArray},a=function(V,se){for(var Ee=Object.keys(se),nt=0;nt<Ee.length;++nt)V[Ee[nt]]=se[Ee[nt]];return V},r=`
`;function u(V){return typeof atob<"u"?atob(V):"base64:"+V}function c(V){var se=new Error("(regl) "+V);throw console.error(se),se}function v(V,se){V||c(se)}function f(V){return V?": "+V:""}function g(V,se,Ee){V in se||c("unknown parameter ("+V+")"+f(Ee)+". possible values: "+Object.keys(se).join())}function b(V,se){n(V)||c("invalid parameter type"+f(se)+". must be a typed array")}function _(V,se){switch(se){case"number":return typeof V=="number";case"object":return typeof V=="object";case"string":return typeof V=="string";case"boolean":return typeof V=="boolean";case"function":return typeof V=="function";case"undefined":return typeof V>"u";case"symbol":return typeof V=="symbol"}}function x(V,se,Ee){_(V,se)||c("invalid parameter type"+f(Ee)+". expected "+se+", got "+typeof V)}function A(V,se){V>=0&&(V|0)===V||c("invalid parameter type, ("+V+")"+f(se)+". must be a nonnegative integer")}function M(V,se,Ee){se.indexOf(V)<0&&c("invalid value"+f(Ee)+". must be one of: "+se)}var S=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(V){Object.keys(V).forEach(function(se){S.indexOf(se)<0&&c('invalid regl constructor argument "'+se+'". must be one of '+S)})}function D(V,se){for(V=V+"";V.length<se;)V=" "+V;return V}function I(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B(V,se){this.number=V,this.line=se,this.errors=[]}function $(V,se,Ee){this.file=V,this.line=se,this.message=Ee}function j(){var V=new Error,se=(V.stack||V).toString(),Ee=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(se);if(Ee)return Ee[1];var nt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(se);return nt?nt[1]:"unknown"}function U(){var V=new Error,se=(V.stack||V).toString(),Ee=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(se);if(Ee)return Ee[1];var nt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(se);return nt?nt[1]:"unknown"}function K(V,se){var Ee=V.split(`
`),nt=1,vt=0,et={unknown:new I,0:new I};et.unknown.name=et[0].name=se||j(),et.unknown.lines.push(new B(0,""));for(var pt=0;pt<Ee.length;++pt){var Nt=Ee[pt],Lt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Nt);if(Lt)switch(Lt[1]){case"line":var Rt=/(\d+)(\s+\d+)?/.exec(Lt[2]);Rt&&(nt=Rt[1]|0,Rt[2]&&(vt=Rt[2]|0,vt in et||(et[vt]=new I)));break;case"define":var ft=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Lt[2]);ft&&(et[vt].name=ft[1]?u(ft[2]):ft[2]);break}et[vt].lines.push(new B(nt++,Nt))}return Object.keys(et).forEach(function(Ht){var Ut=et[Ht];Ut.lines.forEach(function(Ct){Ut.index[Ct.number]=Ct})}),et}function Q(V){var se=[];return V.split(`
`).forEach(function(Ee){if(!(Ee.length<5)){var nt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ee);nt?se.push(new $(nt[1]|0,nt[2]|0,nt[3].trim())):Ee.length>0&&se.push(new $("unknown",0,Ee))}}),se}function H(V,se){se.forEach(function(Ee){var nt=V[Ee.file];if(nt){var vt=nt.index[Ee.line];if(vt){vt.errors.push(Ee),nt.hasErrors=!0;return}}V.unknown.hasErrors=!0,V.unknown.lines[0].errors.push(Ee)})}function W(V,se,Ee,nt,vt){if(!V.getShaderParameter(se,V.COMPILE_STATUS)){var et=V.getShaderInfoLog(se),pt=nt===V.FRAGMENT_SHADER?"fragment":"vertex";we(Ee,"string",pt+" shader source must be a string",vt);var Nt=K(Ee,vt),Lt=Q(et);H(Nt,Lt),Object.keys(Nt).forEach(function(Rt){var ft=Nt[Rt];if(!ft.hasErrors)return;var Ht=[""],Ut=[""];function Ct(Et,Ke){Ht.push(Et),Ut.push(Ke||"")}Ct("file number "+Rt+": "+ft.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ft.lines.forEach(function(Et){if(Et.errors.length>0){Ct(D(Et.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ct(Et.line+r,"color:red; background-color:yellow; font-weight:bold");var Ke=0;Et.errors.forEach(function(st){var It=st.message,Qt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(It);if(Qt){var xt=Qt[1];switch(It=Qt[2],xt){case"assign":xt="=";break}Ke=Math.max(Et.line.indexOf(xt,Ke),0)}else Ke=0;Ct(D("| ",6)),Ct(D("^^^",Ke+3)+r,"font-weight:bold"),Ct(D("| ",6)),Ct(It+r,"font-weight:bold")}),Ct(D("| ",6)+r)}else Ct(D(Et.number,4)+"|  "),Ct(Et.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Ht.join("%c"),console.log.apply(console,Ut)):console.log(Ht.join(""))}),v.raise("Error compiling "+pt+" shader, "+Nt[0].name)}}function z(V,se,Ee,nt,vt){if(!V.getProgramParameter(se,V.LINK_STATUS)){var et=V.getProgramInfoLog(se),pt=K(Ee,vt),Nt=K(nt,vt),Lt='Error linking program with vertex shader, "'+Nt[0].name+'", and fragment shader "'+pt[0].name+'"';typeof document<"u"?console.log("%c"+Lt+r+"%c"+et,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Lt+r+et),v.raise(Lt)}}function Y(V){V._commandRef=j()}function q(V,se,Ee,nt){Y(V);function vt(Lt){return Lt?nt.id(Lt):0}V._fragId=vt(V.static.frag),V._vertId=vt(V.static.vert);function et(Lt,Rt){Object.keys(Rt).forEach(function(ft){Lt[nt.id(ft)]=!0})}var pt=V._uniformSet={};et(pt,se.static),et(pt,se.dynamic);var Nt=V._attributeSet={};et(Nt,Ee.static),et(Nt,Ee.dynamic),V._hasCount="count"in V.static||"count"in V.dynamic||"elements"in V.static||"elements"in V.dynamic}function oe(V,se){var Ee=U();c(V+" in command "+(se||j())+(Ee==="unknown"?"":" called from "+Ee))}function ie(V,se,Ee){V||oe(se,Ee||j())}function Pe(V,se,Ee,nt){V in se||oe("unknown parameter ("+V+")"+f(Ee)+". possible values: "+Object.keys(se).join(),nt||j())}function we(V,se,Ee,nt){_(V,se)||oe("invalid parameter type"+f(Ee)+". expected "+se+", got "+typeof V,nt||j())}function be(V){V()}function ye(V,se,Ee){V.texture?M(V.texture._texture.internalformat,se,"unsupported texture format for attachment"):M(V.renderbuffer._renderbuffer.format,Ee,"unsupported renderbuffer format for attachment")}var Xe=33071,Ze=9728,yt=9984,Be=9985,qt=9986,Yt=9987,Pt=5120,An=5121,$e=5122,Se=5123,Ae=5124,qe=5125,_t=5126,ht=32819,Vt=32820,Jt=33635,an=34042,Kt=36193,rt={};rt[Pt]=rt[An]=1,rt[$e]=rt[Se]=rt[Kt]=rt[Jt]=rt[ht]=rt[Vt]=2,rt[Ae]=rt[qe]=rt[_t]=rt[an]=4;function pn(V,se){return V===Vt||V===ht||V===Jt?2:V===an?4:rt[V]*se}function Ue(V){return!(V&V-1)&&!!V}function _n(V,se,Ee){var nt,vt=se.width,et=se.height,pt=se.channels;v(vt>0&&vt<=Ee.maxTextureSize&&et>0&&et<=Ee.maxTextureSize,"invalid texture shape"),(V.wrapS!==Xe||V.wrapT!==Xe)&&v(Ue(vt)&&Ue(et),"incompatible wrap mode for texture, both width and height must be power of 2"),se.mipmask===1?vt!==1&&et!==1&&v(V.minFilter!==yt&&V.minFilter!==qt&&V.minFilter!==Be&&V.minFilter!==Yt,"min filter requires mipmap"):(v(Ue(vt)&&Ue(et),"texture must be a square power of 2 to support mipmapping"),v(se.mipmask===(vt<<1)-1,"missing or incomplete mipmap data")),se.type===_t&&(Ee.extensions.indexOf("oes_texture_float_linear")<0&&v(V.minFilter===Ze&&V.magFilter===Ze,"filter not supported, must enable oes_texture_float_linear"),v(!V.genMipmaps,"mipmap generation not supported with float textures"));var Nt=se.images;for(nt=0;nt<16;++nt)if(Nt[nt]){var Lt=vt>>nt,Rt=et>>nt;v(se.mipmask&1<<nt,"missing mipmap data");var ft=Nt[nt];if(v(ft.width===Lt&&ft.height===Rt,"invalid shape for mip images"),v(ft.format===se.format&&ft.internalformat===se.internalformat&&ft.type===se.type,"incompatible type for mip image"),!ft.compressed)if(ft.data){var Ht=Math.ceil(pn(ft.type,pt)*Lt/ft.unpackAlignment)*ft.unpackAlignment;v(ft.data.byteLength===Ht*Rt,"invalid data for image, buffer size is inconsistent with image format")}else ft.element||ft.copy}else V.genMipmaps||v((se.mipmask&1<<nt)===0,"extra mipmap data");se.compressed&&v(!V.genMipmaps,"mipmap generation for compressed images not supported")}function Jn(V,se,Ee,nt){var vt=V.width,et=V.height,pt=V.channels;v(vt>0&&vt<=nt.maxTextureSize&&et>0&&et<=nt.maxTextureSize,"invalid texture shape"),v(vt===et,"cube map must be square"),v(se.wrapS===Xe&&se.wrapT===Xe,"wrap mode not supported by cube map");for(var Nt=0;Nt<Ee.length;++Nt){var Lt=Ee[Nt];v(Lt.width===vt&&Lt.height===et,"inconsistent cube map face shape"),se.genMipmaps&&(v(!Lt.compressed,"can not generate mipmap for compressed textures"),v(Lt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Rt=Lt.images,ft=0;ft<16;++ft){var Ht=Rt[ft];if(Ht){var Ut=vt>>ft,Ct=et>>ft;v(Lt.mipmask&1<<ft,"missing mipmap data"),v(Ht.width===Ut&&Ht.height===Ct,"invalid shape for mip images"),v(Ht.format===V.format&&Ht.internalformat===V.internalformat&&Ht.type===V.type,"incompatible type for mip image"),Ht.compressed||(Ht.data?v(Ht.data.byteLength===Ut*Ct*Math.max(pn(Ht.type,pt),Ht.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ht.element||Ht.copy)}}}}var le=a(v,{optional:be,raise:c,commandRaise:oe,command:ie,parameter:g,commandParameter:Pe,constructor:E,type:x,commandType:we,isTypedArray:b,nni:A,oneOf:M,shaderError:W,linkError:z,callSite:U,saveCommandRef:Y,saveDrawInfo:q,framebufferFormat:ye,guessCommand:j,texture2D:_n,textureCube:Jn}),Qn=0,Pr=0,Xr=5,ao=6;function Un(V,se){this.id=Qn++,this.type=V,this.data=se}function bo(V){return V.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Te(V){if(V.length===0)return[];var se=V.charAt(0),Ee=V.charAt(V.length-1);if(V.length>1&&se===Ee&&(se==='"'||se==="'"))return['"'+bo(V.substr(1,V.length-2))+'"'];var nt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(V);if(nt)return Te(V.substr(0,nt.index)).concat(Te(nt[1])).concat(Te(V.substr(nt.index+nt[0].length)));var vt=V.split(".");if(vt.length===1)return['"'+bo(V)+'"'];for(var et=[],pt=0;pt<vt.length;++pt)et=et.concat(Te(vt[pt]));return et}function Qe(V){return"["+Te(V).join("][")+"]"}function je(V,se){return new Un(V,Qe(se+""))}function ut(V){return typeof V=="function"&&!V._reglType||V instanceof Un}function rn(V,se){if(typeof V=="function")return new Un(Pr,V);if(typeof V=="number"||typeof V=="boolean")return new Un(Xr,V);if(Array.isArray(V))return new Un(ao,V.map((Ee,nt)=>rn(Ee,se+"["+nt+"]")));if(V instanceof Un)return V;le(!1,"invalid option type in uniform "+se)}var Zt={DynamicVariable:Un,define:je,isDynamic:ut,unbox:rn,accessor:Qe},Rn={next:typeof requestAnimationFrame=="function"?function(V){return requestAnimationFrame(V)}:function(V){return setTimeout(V,16)},cancel:typeof cancelAnimationFrame=="function"?function(V){return cancelAnimationFrame(V)}:clearTimeout},Er=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function li(){var V={"":0},se=[""];return{id:function(Ee){var nt=V[Ee];return nt||(nt=V[Ee]=se.length,se.push(Ee),nt)},str:function(Ee){return se[Ee]}}}function Si(V,se,Ee){var nt=document.createElement("canvas");a(nt.style,{border:0,margin:0,padding:0,top:0,left:0}),V.appendChild(nt),V===document.body&&(nt.style.position="absolute",a(V.style,{margin:0,padding:0}));function vt(){var Nt=window.innerWidth,Lt=window.innerHeight;if(V!==document.body){var Rt=V.getBoundingClientRect();Nt=Rt.right-Rt.left,Lt=Rt.bottom-Rt.top}nt.width=Ee*Nt,nt.height=Ee*Lt,a(nt.style,{width:Nt+"px",height:Lt+"px"})}var et;V!==document.body&&typeof ResizeObserver=="function"?(et=new ResizeObserver(function(){setTimeout(vt)}),et.observe(V)):window.addEventListener("resize",vt,!1);function pt(){et?et.disconnect():window.removeEventListener("resize",vt),V.removeChild(nt)}return vt(),{canvas:nt,onDestroy:pt}}function Yo(V,se){function Ee(nt){try{return V.getContext(nt,se)}catch{return null}}return Ee("webgl")||Ee("experimental-webgl")||Ee("webgl-experimental")}function ti(V){return typeof V.nodeName=="string"&&typeof V.appendChild=="function"&&typeof V.getBoundingClientRect=="function"}function Tn(V){return typeof V.drawArrays=="function"||typeof V.drawElements=="function"}function Fn(V){return typeof V=="string"?V.split():(le(Array.isArray(V),"invalid extension array"),V)}function Hn(V){return typeof V=="string"?(le(typeof document<"u","not supported outside of DOM"),document.querySelector(V)):V}function ar(V){var se=V||{},Ee,nt,vt,et,pt={},Nt=[],Lt=[],Rt=typeof window>"u"?1:window.devicePixelRatio,ft=!1,Ht=function(Et){Et&&le.raise(Et)},Ut=function(){};if(typeof se=="string"?(le(typeof document<"u","selector queries only supported in DOM enviroments"),Ee=document.querySelector(se),le(Ee,"invalid query string for element")):typeof se=="object"?ti(se)?Ee=se:Tn(se)?(et=se,vt=et.canvas):(le.constructor(se),"gl"in se?et=se.gl:"canvas"in se?vt=Hn(se.canvas):"container"in se&&(nt=Hn(se.container)),"attributes"in se&&(pt=se.attributes,le.type(pt,"object","invalid context attributes")),"extensions"in se&&(Nt=Fn(se.extensions)),"optionalExtensions"in se&&(Lt=Fn(se.optionalExtensions)),"onDone"in se&&(le.type(se.onDone,"function","invalid or missing onDone callback"),Ht=se.onDone),"profile"in se&&(ft=!!se.profile),"pixelRatio"in se&&(Rt=+se.pixelRatio,le(Rt>0,"invalid pixel ratio"))):le.raise("invalid arguments to regl"),Ee&&(Ee.nodeName.toLowerCase()==="canvas"?vt=Ee:nt=Ee),!et){if(!vt){le(typeof document<"u","must manually specify webgl context outside of DOM environments");var Ct=Si(nt||document.body,Ht,Rt);if(!Ct)return null;vt=Ct.canvas,Ut=Ct.onDestroy}pt.premultipliedAlpha===void 0&&(pt.premultipliedAlpha=!0),et=Yo(vt,pt)}return et?{gl:et,canvas:vt,container:nt,extensions:Nt,optionalExtensions:Lt,pixelRatio:Rt,profile:ft,onDone:Ht,onDestroy:Ut}:(Ut(),Ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function eo(V,se){var Ee={};function nt(pt){le.type(pt,"string","extension name must be string");var Nt=pt.toLowerCase(),Lt;try{Lt=Ee[Nt]=V.getExtension(Nt)}catch{}return!!Lt}for(var vt=0;vt<se.extensions.length;++vt){var et=se.extensions[vt];if(!nt(et))return se.onDestroy(),se.onDone('"'+et+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return se.optionalExtensions.forEach(nt),{extensions:Ee,restore:function(){Object.keys(Ee).forEach(function(pt){if(Ee[pt]&&!nt(pt))throw new Error("(regl): error restoring extension "+pt)})}}}function Dr(V,se){for(var Ee=Array(V),nt=0;nt<V;++nt)Ee[nt]=se(nt);return Ee}var ml=5120,Ha=5121,yl=5122,ou=5123,ep=5124,wc=5125,va=5126;function Fu(V){for(var se=16;se<=1<<28;se*=16)if(V<=se)return se;return 0}function Nn(V){var se,Ee;return se=(V>65535)<<4,V>>>=se,Ee=(V>255)<<3,V>>>=Ee,se|=Ee,Ee=(V>15)<<2,V>>>=Ee,se|=Ee,Ee=(V>3)<<1,V>>>=Ee,se|=Ee,se|V>>1}function Uf(){var V=Dr(8,function(){return[]});function se(et){var pt=Fu(et),Nt=V[Nn(pt)>>2];return Nt.length>0?Nt.pop():new ArrayBuffer(pt)}function Ee(et){V[Nn(et.byteLength)>>2].push(et)}function nt(et,pt){var Nt=null;switch(et){case ml:Nt=new Int8Array(se(pt),0,pt);break;case Ha:Nt=new Uint8Array(se(pt),0,pt);break;case yl:Nt=new Int16Array(se(2*pt),0,pt);break;case ou:Nt=new Uint16Array(se(2*pt),0,pt);break;case ep:Nt=new Int32Array(se(4*pt),0,pt);break;case wc:Nt=new Uint32Array(se(4*pt),0,pt);break;case va:Nt=new Float32Array(se(4*pt),0,pt);break;default:return null}return Nt.length!==pt?Nt.subarray(0,pt):Nt}function vt(et){Ee(et.buffer)}return{alloc:se,free:Ee,allocType:nt,freeType:vt}}var _o=Uf();_o.zero=Uf();var Ec=3408,Zi=3410,la=3411,Ps=3412,Ra=3413,ma=3414,Ca=3415,Oc=33901,Sc=33902,Bf=3379,$u=3386,Vf=34921,xc=36347,tp=36348,jl=35661,Wf=35660,gl=34930,Ac=36349,Ns=34076,Tc=34024,Mc=7936,np=7937,Gf=7938,qr=35724,Wr=34047,zf=36063,iu=34852,ya=3553,Rs=34067,Hf=34069,$o=33984,Il=6408,Ll=5126,Cs=5121,au=36160,xi=36053,kc=36064,Xf=16384,Pc=function(V,se){var Ee=1;se.ext_texture_filter_anisotropic&&(Ee=V.getParameter(Wr));var nt=1,vt=1;se.webgl_draw_buffers&&(nt=V.getParameter(iu),vt=V.getParameter(zf));var et=!!se.oes_texture_float;if(et){var pt=V.createTexture();V.bindTexture(ya,pt),V.texImage2D(ya,0,Il,1,1,0,Il,Ll,null);var Nt=V.createFramebuffer();if(V.bindFramebuffer(au,Nt),V.framebufferTexture2D(au,kc,ya,pt,0),V.bindTexture(ya,null),V.checkFramebufferStatus(au)!==xi)et=!1;else{V.viewport(0,0,1,1),V.clearColor(1,0,0,1),V.clear(Xf);var Lt=_o.allocType(Ll,4);V.readPixels(0,0,1,1,Il,Ll,Lt),V.getError()?et=!1:(V.deleteFramebuffer(Nt),V.deleteTexture(pt),et=Lt[0]===1),_o.freeType(Lt)}}var Rt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ft=!0;if(!Rt){var Ht=V.createTexture(),Ut=_o.allocType(Cs,36);V.activeTexture($o),V.bindTexture(Rs,Ht),V.texImage2D(Hf,0,Il,3,3,0,Il,Cs,Ut),_o.freeType(Ut),V.bindTexture(Rs,null),V.deleteTexture(Ht),ft=!V.getError()}return{colorBits:[V.getParameter(Zi),V.getParameter(la),V.getParameter(Ps),V.getParameter(Ra)],depthBits:V.getParameter(ma),stencilBits:V.getParameter(Ca),subpixelBits:V.getParameter(Ec),extensions:Object.keys(se).filter(function(Ct){return!!se[Ct]}),maxAnisotropic:Ee,maxDrawbuffers:nt,maxColorAttachments:vt,pointSizeDims:V.getParameter(Oc),lineWidthDims:V.getParameter(Sc),maxViewportDims:V.getParameter($u),maxCombinedTextureUnits:V.getParameter(jl),maxCubeMapSize:V.getParameter(Ns),maxRenderbufferSize:V.getParameter(Tc),maxTextureUnits:V.getParameter(gl),maxTextureSize:V.getParameter(Bf),maxAttributes:V.getParameter(Vf),maxVertexUniforms:V.getParameter(xc),maxVertexTextureUnits:V.getParameter(Wf),maxVaryingVectors:V.getParameter(tp),maxFragmentUniforms:V.getParameter(Ac),glsl:V.getParameter(qr),renderer:V.getParameter(np),vendor:V.getParameter(Mc),version:V.getParameter(Gf),readFloat:et,npotTextureCube:ft}};function $i(V){return!!V&&typeof V=="object"&&Array.isArray(V.shape)&&Array.isArray(V.stride)&&typeof V.offset=="number"&&V.shape.length===V.stride.length&&(Array.isArray(V.data)||n(V.data))}var ui=function(V){return Object.keys(V).map(function(se){return V[se]})},ga={shape:Bi,flatten:Yf};function lo(V,se,Ee){for(var nt=0;nt<se;++nt)Ee[nt]=V[nt]}function rp(V,se,Ee,nt){for(var vt=0,et=0;et<se;++et)for(var pt=V[et],Nt=0;Nt<Ee;++Nt)nt[vt++]=pt[Nt]}function Ui(V,se,Ee,nt,vt,et){for(var pt=et,Nt=0;Nt<se;++Nt)for(var Lt=V[Nt],Rt=0;Rt<Ee;++Rt)for(var ft=Lt[Rt],Ht=0;Ht<nt;++Ht)vt[pt++]=ft[Ht]}function qf(V,se,Ee,nt,vt){for(var et=1,pt=Ee+1;pt<se.length;++pt)et*=se[pt];var Nt=se[Ee];if(se.length-Ee===4){var Lt=se[Ee+1],Rt=se[Ee+2],ft=se[Ee+3];for(pt=0;pt<Nt;++pt)Ui(V[pt],Lt,Rt,ft,nt,vt),vt+=et}else for(pt=0;pt<Nt;++pt)qf(V[pt],se,Ee+1,nt,vt),vt+=et}function Yf(V,se,Ee,nt){var vt=1;if(se.length)for(var et=0;et<se.length;++et)vt*=se[et];else vt=0;var pt=nt||_o.allocType(Ee,vt);switch(se.length){case 0:break;case 1:lo(V,se[0],pt);break;case 2:rp(V,se[0],se[1],pt);break;case 3:Ui(V,se[0],se[1],se[2],pt,0);break;default:qf(V,se,0,pt,0)}return pt}function Bi(V){for(var se=[],Ee=V;Ee.length;Ee=Ee[0])se.push(Ee.length);return se}var Ji={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Nc=5120,Fr=5122,si=5124,Ds=5121,Kf=5123,Rc=5125,js=5126,Xa=5126,Vi={int8:Nc,int16:Fr,int32:si,uint8:Ds,uint16:Kf,uint32:Rc,float:js,float32:Xa},lu=35048,Qi=35040,ba={dynamic:lu,stream:Qi,static:35044},Nr=ga.flatten,Wi=ga.shape,Da=35044,yi=35040,uu=5121,Fl=5126,ja=[];ja[5120]=1,ja[5122]=2,ja[5124]=4,ja[5121]=1,ja[5123]=2,ja[5125]=4,ja[5126]=4;function po(V){return Ji[Object.prototype.toString.call(V)]|0}function Uu(V,se){for(var Ee=0;Ee<se.length;++Ee)V[Ee]=se[Ee]}function qa(V,se,Ee,nt,vt,et,pt){for(var Nt=0,Lt=0;Lt<Ee;++Lt)for(var Rt=0;Rt<nt;++Rt)V[Nt++]=se[vt*Lt+et*Rt+pt]}function _a(V,se,Ee,nt){var vt=0,et={};function pt(Ke){this.id=vt++,this.buffer=V.createBuffer(),this.type=Ke,this.usage=Da,this.byteLength=0,this.dimension=1,this.dtype=uu,this.persistentData=null,Ee.profile&&(this.stats={size:0})}pt.prototype.bind=function(){V.bindBuffer(this.type,this.buffer)},pt.prototype.destroy=function(){Ut(this)};var Nt=[];function Lt(Ke,st){var It=Nt.pop();return It||(It=new pt(Ke)),It.bind(),Ht(It,st,yi,0,1,!1),It}function Rt(Ke){Nt.push(Ke)}function ft(Ke,st,It){Ke.byteLength=st.byteLength,V.bufferData(Ke.type,st,It)}function Ht(Ke,st,It,Qt,xt,on){var Tt;if(Ke.usage=It,Array.isArray(st)){if(Ke.dtype=Qt||Fl,st.length>0){var Gt;if(Array.isArray(st[0])){Tt=Wi(st);for(var At=1,Xt=1;Xt<Tt.length;++Xt)At*=Tt[Xt];Ke.dimension=At,Gt=Nr(st,Tt,Ke.dtype),ft(Ke,Gt,It),on?Ke.persistentData=Gt:_o.freeType(Gt)}else if(typeof st[0]=="number"){Ke.dimension=xt;var Pn=_o.allocType(Ke.dtype,st.length);Uu(Pn,st),ft(Ke,Pn,It),on?Ke.persistentData=Pn:_o.freeType(Pn)}else n(st[0])?(Ke.dimension=st[0].length,Ke.dtype=Qt||po(st[0])||Fl,Gt=Nr(st,[st.length,st[0].length],Ke.dtype),ft(Ke,Gt,It),on?Ke.persistentData=Gt:_o.freeType(Gt)):le.raise("invalid buffer data")}}else if(n(st))Ke.dtype=Qt||po(st),Ke.dimension=xt,ft(Ke,st,It),on&&(Ke.persistentData=new Uint8Array(new Uint8Array(st.buffer)));else if($i(st)){Tt=st.shape;var Vn=st.stride,Dt=st.offset,Mt=0,St=0,jn=0,tr=0;Tt.length===1?(Mt=Tt[0],St=1,jn=Vn[0],tr=0):Tt.length===2?(Mt=Tt[0],St=Tt[1],jn=Vn[0],tr=Vn[1]):le.raise("invalid shape"),Ke.dtype=Qt||po(st.data)||Fl,Ke.dimension=St;var dn=_o.allocType(Ke.dtype,Mt*St);qa(dn,st.data,Mt,St,jn,tr,Dt),ft(Ke,dn,It),on?Ke.persistentData=dn:_o.freeType(dn)}else st instanceof ArrayBuffer?(Ke.dtype=uu,Ke.dimension=xt,ft(Ke,st,It),on&&(Ke.persistentData=new Uint8Array(new Uint8Array(st)))):le.raise("invalid buffer data")}function Ut(Ke){se.bufferCount--,nt(Ke);var st=Ke.buffer;le(st,"buffer must not be deleted already"),V.deleteBuffer(st),Ke.buffer=null,delete et[Ke.id]}function Ct(Ke,st,It,Qt){se.bufferCount++;var xt=new pt(st);et[xt.id]=xt;function on(At){var Xt=Da,Pn=null,Vn=0,Dt=0,Mt=1;return Array.isArray(At)||n(At)||$i(At)||At instanceof ArrayBuffer?Pn=At:typeof At=="number"?Vn=At|0:At&&(le.type(At,"object","buffer arguments must be an object, a number or an array"),"data"in At&&(le(Pn===null||Array.isArray(Pn)||n(Pn)||$i(Pn),"invalid data for buffer"),Pn=At.data),"usage"in At&&(le.parameter(At.usage,ba,"invalid buffer usage"),Xt=ba[At.usage]),"type"in At&&(le.parameter(At.type,Vi,"invalid buffer type"),Dt=Vi[At.type]),"dimension"in At&&(le.type(At.dimension,"number","invalid dimension"),Mt=At.dimension|0),"length"in At&&(le.nni(Vn,"buffer length must be a nonnegative integer"),Vn=At.length|0)),xt.bind(),Pn?Ht(xt,Pn,Xt,Dt,Mt,Qt):(Vn&&V.bufferData(xt.type,Vn,Xt),xt.dtype=Dt||uu,xt.usage=Xt,xt.dimension=Mt,xt.byteLength=Vn),Ee.profile&&(xt.stats.size=xt.byteLength*ja[xt.dtype]),on}function Tt(At,Xt){le(Xt+At.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+At.byteLength+" starting from offset "+Xt+" to a buffer of size "+xt.byteLength),V.bufferSubData(xt.type,Xt,At)}function Gt(At,Xt){var Pn=(Xt||0)|0,Vn;if(xt.bind(),n(At)||At instanceof ArrayBuffer)Tt(At,Pn);else if(Array.isArray(At)){if(At.length>0)if(typeof At[0]=="number"){var Dt=_o.allocType(xt.dtype,At.length);Uu(Dt,At),Tt(Dt,Pn),_o.freeType(Dt)}else if(Array.isArray(At[0])||n(At[0])){Vn=Wi(At);var Mt=Nr(At,Vn,xt.dtype);Tt(Mt,Pn),_o.freeType(Mt)}else le.raise("invalid buffer data")}else if($i(At)){Vn=At.shape;var St=At.stride,jn=0,tr=0,dn=0,lr=0;Vn.length===1?(jn=Vn[0],tr=1,dn=St[0],lr=0):Vn.length===2?(jn=Vn[0],tr=Vn[1],dn=St[0],lr=St[1]):le.raise("invalid shape");var Wn=Array.isArray(At.data)?xt.dtype:po(At.data),or=_o.allocType(Wn,jn*tr);qa(or,At.data,jn,tr,dn,lr,At.offset),Tt(or,Pn),_o.freeType(or)}else le.raise("invalid data for buffer subdata");return on}return It||on(Ke),on._reglType="buffer",on._buffer=xt,on.subdata=Gt,Ee.profile&&(on.stats=xt.stats),on.destroy=function(){Ut(xt)},on}function Et(){ui(et).forEach(function(Ke){Ke.buffer=V.createBuffer(),V.bindBuffer(Ke.type,Ke.buffer),V.bufferData(Ke.type,Ke.persistentData||Ke.byteLength,Ke.usage)})}return Ee.profile&&(se.getTotalBufferSize=function(){var Ke=0;return Object.keys(et).forEach(function(st){Ke+=et[st].stats.size}),Ke}),{create:Ct,createStream:Lt,destroyStream:Rt,clear:function(){ui(et).forEach(Ut),Nt.forEach(Ut)},getBuffer:function(Ke){return Ke&&Ke._buffer instanceof pt?Ke._buffer:null},restore:Et,_initBuffer:Ht}}var Cc=0,op=0,Dc=1,Ko=1,Bu=4,Ya=4,ni={points:Cc,point:op,lines:Dc,line:Ko,triangles:Bu,triangle:Ya,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},jc=0,ua=1,wa=4,Is=5120,Gi=5121,ea=5122,ci=5123,sa=5124,Ii=5125,dt=34963,Ft=35040,$t=35044;function mn(V,se,Ee,nt){var vt={},et=0,pt={uint8:Gi,uint16:ci};se.oes_element_index_uint&&(pt.uint32=Ii);function Nt(Et){this.id=et++,vt[this.id]=this,this.buffer=Et,this.primType=wa,this.vertCount=0,this.type=0}Nt.prototype.bind=function(){this.buffer.bind()};var Lt=[];function Rt(Et){var Ke=Lt.pop();return Ke||(Ke=new Nt(Ee.create(null,dt,!0,!1)._buffer)),Ht(Ke,Et,Ft,-1,-1,0,0),Ke}function ft(Et){Lt.push(Et)}function Ht(Et,Ke,st,It,Qt,xt,on){Et.buffer.bind();var Tt;if(Ke){var Gt=on;!on&&(!n(Ke)||$i(Ke)&&!n(Ke.data))&&(Gt=se.oes_element_index_uint?Ii:ci),Ee._initBuffer(Et.buffer,Ke,st,Gt,3)}else V.bufferData(dt,xt,st),Et.buffer.dtype=Tt||Gi,Et.buffer.usage=st,Et.buffer.dimension=3,Et.buffer.byteLength=xt;if(Tt=on,!on){switch(Et.buffer.dtype){case Gi:case Is:Tt=Gi;break;case ci:case ea:Tt=ci;break;case Ii:case sa:Tt=Ii;break;default:le.raise("unsupported type for element array")}Et.buffer.dtype=Tt}Et.type=Tt,le(Tt!==Ii||!!se.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var At=Qt;At<0&&(At=Et.buffer.byteLength,Tt===ci?At>>=1:Tt===Ii&&(At>>=2)),Et.vertCount=At;var Xt=It;if(It<0){Xt=wa;var Pn=Et.buffer.dimension;Pn===1&&(Xt=jc),Pn===2&&(Xt=ua),Pn===3&&(Xt=wa)}Et.primType=Xt}function Ut(Et){nt.elementsCount--,le(Et.buffer!==null,"must not double destroy elements"),delete vt[Et.id],Et.buffer.destroy(),Et.buffer=null}function Ct(Et,Ke){var st=Ee.create(null,dt,!0),It=new Nt(st._buffer);nt.elementsCount++;function Qt(xt){if(!xt)st(),It.primType=wa,It.vertCount=0,It.type=Gi;else if(typeof xt=="number")st(xt),It.primType=wa,It.vertCount=xt|0,It.type=Gi;else{var on=null,Tt=$t,Gt=-1,At=-1,Xt=0,Pn=0;Array.isArray(xt)||n(xt)||$i(xt)?on=xt:(le.type(xt,"object","invalid arguments for elements"),"data"in xt&&(on=xt.data,le(Array.isArray(on)||n(on)||$i(on),"invalid data for element buffer")),"usage"in xt&&(le.parameter(xt.usage,ba,"invalid element buffer usage"),Tt=ba[xt.usage]),"primitive"in xt&&(le.parameter(xt.primitive,ni,"invalid element buffer primitive"),Gt=ni[xt.primitive]),"count"in xt&&(le(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),At=xt.count|0),"type"in xt&&(le.parameter(xt.type,pt,"invalid buffer type"),Pn=pt[xt.type]),"length"in xt?Xt=xt.length|0:(Xt=At,Pn===ci||Pn===ea?Xt*=2:(Pn===Ii||Pn===sa)&&(Xt*=4))),Ht(It,on,Tt,Gt,At,Xt,Pn)}return Qt}return Qt(Et),Qt._reglType="elements",Qt._elements=It,Qt.subdata=function(xt,on){return st.subdata(xt,on),Qt},Qt.destroy=function(){Ut(It)},Qt}return{create:Ct,createStream:Rt,destroyStream:ft,getElements:function(Et){return typeof Et=="function"&&Et._elements instanceof Nt?Et._elements:null},clear:function(){ui(vt).forEach(Ut)}}}var fr=new Float32Array(1),Rr=new Uint32Array(fr.buffer),ho=5123;function P(V){for(var se=_o.allocType(ho,V.length),Ee=0;Ee<V.length;++Ee)if(isNaN(V[Ee]))se[Ee]=65535;else if(V[Ee]===1/0)se[Ee]=31744;else if(V[Ee]===-1/0)se[Ee]=64512;else{fr[0]=V[Ee];var nt=Rr[0],vt=nt>>>31<<15,et=(nt<<1>>>24)-127,pt=nt>>13&1023;if(et<-24)se[Ee]=vt;else if(et<-14){var Nt=-14-et;se[Ee]=vt+(pt+1024>>Nt)}else et>15?se[Ee]=vt+31744:se[Ee]=vt+(et+15<<10)+pt}return se}function N(V){return Array.isArray(V)||n(V)}var G=function(V){return!(V&V-1)&&!!V},ae=34467,ge=3553,Ye=34067,gt=34069,zt=6408,En=6406,_r=6407,fn=6409,Gr=6410,mr=32854,Ir=32855,ca=36194,Ao=32819,ta=32820,bl=33635,_l=34042,$l=6402,su=34041,Ka=35904,cu=35906,ri=36193,Ul=33776,wl=33777,Za=33778,Ja=33779,Vu=35986,yh=35987,gh=34798,ip=35840,Ic=35841,Wu=35842,Zf=35843,bh=36196,Gu=5121,Lc=5123,Jf=5125,Uo=5126,zi=10242,Qf=10243,ed=10497,Ls=33071,Zv=33648,Fs=10240,$s=10241,Fc=9728,zu=9729,fu=9984,Us=9985,$c=9986,du=9987,Jv=33170,Uc=4352,Qv=4353,em=4354,_h=34046,td=3317,Li=37440,wh=37441,ue=37443,Hu=37444,Bl=33984,Ia=[fu,$c,Us,du],Cr=[0,fn,Gr,_r,zt],Ai={};Ai[fn]=Ai[En]=Ai[$l]=1,Ai[su]=Ai[Gr]=2,Ai[_r]=Ai[Ka]=3,Ai[zt]=Ai[cu]=4;function $r(V){return"[object "+V+"]"}var Qa=$r("HTMLCanvasElement"),Vl=$r("OffscreenCanvas"),Ea=$r("CanvasRenderingContext2D"),nd=$r("ImageBitmap"),rd=$r("HTMLImageElement"),ap=$r("HTMLVideoElement"),Eh=Object.keys(Ji).concat([Qa,Vl,Ea,nd,rd,ap]),Wl=[];Wl[Gu]=1,Wl[Uo]=4,Wl[ri]=2,Wl[Lc]=2,Wl[Jf]=4;var Bo=[];Bo[mr]=2,Bo[Ir]=2,Bo[ca]=2,Bo[su]=4,Bo[Ul]=.5,Bo[wl]=.5,Bo[Za]=1,Bo[Ja]=1,Bo[Vu]=.5,Bo[yh]=1,Bo[gh]=1,Bo[ip]=.5,Bo[Ic]=.25,Bo[Wu]=.5,Bo[Zf]=.25,Bo[bh]=.5;function Bs(V){return Array.isArray(V)&&(V.length===0||typeof V[0]=="number")}function lp(V){if(!Array.isArray(V))return!1;var se=V.length;return!(se===0||!N(V[0]))}function Gl(V){return Object.prototype.toString.call(V)}function el(V){return Gl(V)===Qa}function Bc(V){return Gl(V)===Vl}function pu(V){return Gl(V)===Ea}function Oa(V){return Gl(V)===nd}function up(V){return Gl(V)===rd}function sp(V){return Gl(V)===ap}function tl(V){if(!V)return!1;var se=Gl(V);return Eh.indexOf(se)>=0?!0:Bs(V)||lp(V)||$i(V)}function wo(V){return Ji[Object.prototype.toString.call(V)]|0}function Oh(V,se){var Ee=se.length;switch(V.type){case Gu:case Lc:case Jf:case Uo:var nt=_o.allocType(V.type,Ee);nt.set(se),V.data=nt;break;case ri:V.data=P(se);break;default:le.raise("unsupported texture type, must specify a typed array")}}function cp(V,se){return _o.allocType(V.type===ri?Uo:V.type,se)}function Vo(V,se){V.type===ri?(V.data=P(se),_o.freeType(se)):V.data=se}function Yr(V,se,Ee,nt,vt,et){for(var pt=V.width,Nt=V.height,Lt=V.channels,Rt=pt*Nt*Lt,ft=cp(V,Rt),Ht=0,Ut=0;Ut<Nt;++Ut)for(var Ct=0;Ct<pt;++Ct)for(var Et=0;Et<Lt;++Et)ft[Ht++]=se[Ee*Ct+nt*Ut+vt*Et+et];Vo(V,ft)}function oi(V,se,Ee,nt,vt,et){var pt;if(typeof Bo[V]<"u"?pt=Bo[V]:pt=Ai[V]*Wl[se],et&&(pt*=6),vt){for(var Nt=0,Lt=Ee;Lt>=1;)Nt+=pt*Lt*Lt,Lt/=2;return Nt}else return pt*Ee*nt}function xr(V,se,Ee,nt,vt,et,pt){var Nt={"don't care":Uc,"dont care":Uc,nice:em,fast:Qv},Lt={repeat:ed,clamp:Ls,mirror:Zv},Rt={nearest:Fc,linear:zu},ft=a({mipmap:du,"nearest mipmap nearest":fu,"linear mipmap nearest":Us,"nearest mipmap linear":$c,"linear mipmap linear":du},Rt),Ht={none:0,browser:Hu},Ut={uint8:Gu,rgba4:Ao,rgb565:bl,"rgb5 a1":ta},Ct={alpha:En,luminance:fn,"luminance alpha":Gr,rgb:_r,rgba:zt,rgba4:mr,"rgb5 a1":Ir,rgb565:ca},Et={};se.ext_srgb&&(Ct.srgb=Ka,Ct.srgba=cu),se.oes_texture_float&&(Ut.float32=Ut.float=Uo),se.oes_texture_half_float&&(Ut.float16=Ut["half float"]=ri),se.webgl_depth_texture&&(a(Ct,{depth:$l,"depth stencil":su}),a(Ut,{uint16:Lc,uint32:Jf,"depth stencil":_l})),se.webgl_compressed_texture_s3tc&&a(Et,{"rgb s3tc dxt1":Ul,"rgba s3tc dxt1":wl,"rgba s3tc dxt3":Za,"rgba s3tc dxt5":Ja}),se.webgl_compressed_texture_atc&&a(Et,{"rgb atc":Vu,"rgba atc explicit alpha":yh,"rgba atc interpolated alpha":gh}),se.webgl_compressed_texture_pvrtc&&a(Et,{"rgb pvrtc 4bppv1":ip,"rgb pvrtc 2bppv1":Ic,"rgba pvrtc 4bppv1":Wu,"rgba pvrtc 2bppv1":Zf}),se.webgl_compressed_texture_etc1&&(Et["rgb etc1"]=bh);var Ke=Array.prototype.slice.call(V.getParameter(ae));Object.keys(Et).forEach(function(ve){var ot=Et[ve];Ke.indexOf(ot)>=0&&(Ct[ve]=ot)});var st=Object.keys(Ct);Ee.textureFormats=st;var It=[];Object.keys(Ct).forEach(function(ve){var ot=Ct[ve];It[ot]=ve});var Qt=[];Object.keys(Ut).forEach(function(ve){var ot=Ut[ve];Qt[ot]=ve});var xt=[];Object.keys(Rt).forEach(function(ve){var ot=Rt[ve];xt[ot]=ve});var on=[];Object.keys(ft).forEach(function(ve){var ot=ft[ve];on[ot]=ve});var Tt=[];Object.keys(Lt).forEach(function(ve){var ot=Lt[ve];Tt[ot]=ve});var Gt=st.reduce(function(ve,ot){var tt=Ct[ot];return tt===fn||tt===En||tt===fn||tt===Gr||tt===$l||tt===su||se.ext_srgb&&(tt===Ka||tt===cu)?ve[tt]=tt:tt===Ir||ot.indexOf("rgba")>=0?ve[tt]=zt:ve[tt]=_r,ve},{});function At(){this.internalformat=zt,this.format=zt,this.type=Gu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Hu,this.width=0,this.height=0,this.channels=0}function Xt(ve,ot){ve.internalformat=ot.internalformat,ve.format=ot.format,ve.type=ot.type,ve.compressed=ot.compressed,ve.premultiplyAlpha=ot.premultiplyAlpha,ve.flipY=ot.flipY,ve.unpackAlignment=ot.unpackAlignment,ve.colorSpace=ot.colorSpace,ve.width=ot.width,ve.height=ot.height,ve.channels=ot.channels}function Pn(ve,ot){if(!(typeof ot!="object"||!ot)){if("premultiplyAlpha"in ot&&(le.type(ot.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ve.premultiplyAlpha=ot.premultiplyAlpha),"flipY"in ot&&(le.type(ot.flipY,"boolean","invalid texture flip"),ve.flipY=ot.flipY),"alignment"in ot&&(le.oneOf(ot.alignment,[1,2,4,8],"invalid texture unpack alignment"),ve.unpackAlignment=ot.alignment),"colorSpace"in ot&&(le.parameter(ot.colorSpace,Ht,"invalid colorSpace"),ve.colorSpace=Ht[ot.colorSpace]),"type"in ot){var tt=ot.type;le(se.oes_texture_float||!(tt==="float"||tt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),le(se.oes_texture_half_float||!(tt==="half float"||tt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),le(se.webgl_depth_texture||!(tt==="uint16"||tt==="uint32"||tt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(tt,Ut,"invalid texture type"),ve.type=Ut[tt]}var sn=ve.width,dr=ve.height,pe=ve.channels,re=!1;"shape"in ot?(le(Array.isArray(ot.shape)&&ot.shape.length>=2,"shape must be an array"),sn=ot.shape[0],dr=ot.shape[1],ot.shape.length===3&&(pe=ot.shape[2],le(pe>0&&pe<=4,"invalid number of channels"),re=!0),le(sn>=0&&sn<=Ee.maxTextureSize,"invalid width"),le(dr>=0&&dr<=Ee.maxTextureSize,"invalid height")):("radius"in ot&&(sn=dr=ot.radius,le(sn>=0&&sn<=Ee.maxTextureSize,"invalid radius")),"width"in ot&&(sn=ot.width,le(sn>=0&&sn<=Ee.maxTextureSize,"invalid width")),"height"in ot&&(dr=ot.height,le(dr>=0&&dr<=Ee.maxTextureSize,"invalid height")),"channels"in ot&&(pe=ot.channels,le(pe>0&&pe<=4,"invalid number of channels"),re=!0)),ve.width=sn|0,ve.height=dr|0,ve.channels=pe|0;var Re=!1;if("format"in ot){var Ve=ot.format;le(se.webgl_depth_texture||!(Ve==="depth"||Ve==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),le.parameter(Ve,Ct,"invalid texture format");var Je=ve.internalformat=Ct[Ve];ve.format=Gt[Je],Ve in Ut&&("type"in ot||(ve.type=Ut[Ve])),Ve in Et&&(ve.compressed=!0),Re=!0}!re&&Re?ve.channels=Ai[ve.format]:re&&!Re?ve.channels!==Cr[ve.format]&&(ve.format=ve.internalformat=Cr[ve.channels]):Re&&re&&le(ve.channels===Ai[ve.format],"number of channels inconsistent with specified format")}}function Vn(ve){V.pixelStorei(Li,ve.flipY),V.pixelStorei(wh,ve.premultiplyAlpha),V.pixelStorei(ue,ve.colorSpace),V.pixelStorei(td,ve.unpackAlignment)}function Dt(){At.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(ve,ot){var tt=null;if(tl(ot)?tt=ot:ot&&(le.type(ot,"object","invalid pixel data type"),Pn(ve,ot),"x"in ot&&(ve.xOffset=ot.x|0),"y"in ot&&(ve.yOffset=ot.y|0),tl(ot.data)&&(tt=ot.data)),le(!ve.compressed||tt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ot.copy){le(!tt,"can not specify copy and data field for the same texture");var sn=vt.viewportWidth,dr=vt.viewportHeight;ve.width=ve.width||sn-ve.xOffset,ve.height=ve.height||dr-ve.yOffset,ve.needsCopy=!0,le(ve.xOffset>=0&&ve.xOffset<sn&&ve.yOffset>=0&&ve.yOffset<dr&&ve.width>0&&ve.width<=sn&&ve.height>0&&ve.height<=dr,"copy texture read out of bounds")}else if(!tt)ve.width=ve.width||1,ve.height=ve.height||1,ve.channels=ve.channels||4;else if(n(tt))ve.channels=ve.channels||4,ve.data=tt,!("type"in ot)&&ve.type===Gu&&(ve.type=wo(tt));else if(Bs(tt))ve.channels=ve.channels||4,Oh(ve,tt),ve.alignment=1,ve.needsFree=!0;else if($i(tt)){var pe=tt.data;!Array.isArray(pe)&&ve.type===Gu&&(ve.type=wo(pe));var re=tt.shape,Re=tt.stride,Ve,Je,De,Ce,Le,de;re.length===3?(De=re[2],de=Re[2]):(le(re.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,de=1),Ve=re[0],Je=re[1],Ce=Re[0],Le=Re[1],ve.alignment=1,ve.width=Ve,ve.height=Je,ve.channels=De,ve.format=ve.internalformat=Cr[De],ve.needsFree=!0,Yr(ve,pe,Ce,Le,de,tt.offset)}else if(el(tt)||Bc(tt)||pu(tt))el(tt)||Bc(tt)?ve.element=tt:ve.element=tt.canvas,ve.width=ve.element.width,ve.height=ve.element.height,ve.channels=4;else if(Oa(tt))ve.element=tt,ve.width=tt.width,ve.height=tt.height,ve.channels=4;else if(up(tt))ve.element=tt,ve.width=tt.naturalWidth,ve.height=tt.naturalHeight,ve.channels=4;else if(sp(tt))ve.element=tt,ve.width=tt.videoWidth,ve.height=tt.videoHeight,ve.channels=4;else if(lp(tt)){var Me=ve.width||tt[0].length,fe=ve.height||tt.length,We=ve.channels;N(tt[0][0])?We=We||tt[0][0].length:We=We||1;for(var ze=ga.shape(tt),p=1,y=0;y<ze.length;++y)p*=ze[y];var O=cp(ve,p);ga.flatten(tt,ze,"",O),Vo(ve,O),ve.alignment=1,ve.width=Me,ve.height=fe,ve.channels=We,ve.format=ve.internalformat=Cr[We],ve.needsFree=!0}ve.type===Uo?le(Ee.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ve.type===ri&&le(Ee.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function St(ve,ot,tt){var sn=ve.element,dr=ve.data,pe=ve.internalformat,re=ve.format,Re=ve.type,Ve=ve.width,Je=ve.height;Vn(ve),sn?V.texImage2D(ot,tt,re,re,Re,sn):ve.compressed?V.compressedTexImage2D(ot,tt,pe,Ve,Je,0,dr):ve.needsCopy?(nt(),V.copyTexImage2D(ot,tt,re,ve.xOffset,ve.yOffset,Ve,Je,0)):V.texImage2D(ot,tt,re,Ve,Je,0,re,Re,dr||null)}function jn(ve,ot,tt,sn,dr){var pe=ve.element,re=ve.data,Re=ve.internalformat,Ve=ve.format,Je=ve.type,De=ve.width,Ce=ve.height;Vn(ve),pe?V.texSubImage2D(ot,dr,tt,sn,Ve,Je,pe):ve.compressed?V.compressedTexSubImage2D(ot,dr,tt,sn,Re,De,Ce,re):ve.needsCopy?(nt(),V.copyTexSubImage2D(ot,dr,tt,sn,ve.xOffset,ve.yOffset,De,Ce)):V.texSubImage2D(ot,dr,tt,sn,De,Ce,Ve,Je,re)}var tr=[];function dn(){return tr.pop()||new Dt}function lr(ve){ve.needsFree&&_o.freeType(ve.data),Dt.call(ve),tr.push(ve)}function Wn(){At.call(this),this.genMipmaps=!1,this.mipmapHint=Uc,this.mipmask=0,this.images=Array(16)}function or(ve,ot,tt){var sn=ve.images[0]=dn();ve.mipmask=1,sn.width=ve.width=ot,sn.height=ve.height=tt,sn.channels=ve.channels=4}function br(ve,ot){var tt=null;if(tl(ot))tt=ve.images[0]=dn(),Xt(tt,ve),Mt(tt,ot),ve.mipmask=1;else if(Pn(ve,ot),Array.isArray(ot.mipmap))for(var sn=ot.mipmap,dr=0;dr<sn.length;++dr)tt=ve.images[dr]=dn(),Xt(tt,ve),tt.width>>=dr,tt.height>>=dr,Mt(tt,sn[dr]),ve.mipmask|=1<<dr;else tt=ve.images[0]=dn(),Xt(tt,ve),Mt(tt,ot),ve.mipmask=1;Xt(ve,ve.images[0]),ve.compressed&&(ve.internalformat===Ul||ve.internalformat===wl||ve.internalformat===Za||ve.internalformat===Ja)&&le(ve.width%4===0&&ve.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function jo(ve,ot){for(var tt=ve.images,sn=0;sn<tt.length;++sn){if(!tt[sn])return;St(tt[sn],ot,sn)}}var Po=[];function nr(){var ve=Po.pop()||new Wn;At.call(ve),ve.mipmask=0;for(var ot=0;ot<16;++ot)ve.images[ot]=null;return ve}function Zo(ve){for(var ot=ve.images,tt=0;tt<ot.length;++tt)ot[tt]&&lr(ot[tt]),ot[tt]=null;Po.push(ve)}function uo(){this.minFilter=Fc,this.magFilter=Fc,this.wrapS=Ls,this.wrapT=Ls,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Uc}function Io(ve,ot){if("min"in ot){var tt=ot.min;le.parameter(tt,ft),ve.minFilter=ft[tt],Ia.indexOf(ve.minFilter)>=0&&!("faces"in ot)&&(ve.genMipmaps=!0)}if("mag"in ot){var sn=ot.mag;le.parameter(sn,Rt),ve.magFilter=Rt[sn]}var dr=ve.wrapS,pe=ve.wrapT;if("wrap"in ot){var re=ot.wrap;typeof re=="string"?(le.parameter(re,Lt),dr=pe=Lt[re]):Array.isArray(re)&&(le.parameter(re[0],Lt),le.parameter(re[1],Lt),dr=Lt[re[0]],pe=Lt[re[1]])}else{if("wrapS"in ot){var Re=ot.wrapS;le.parameter(Re,Lt),dr=Lt[Re]}if("wrapT"in ot){var Ve=ot.wrapT;le.parameter(Ve,Lt),pe=Lt[Ve]}}if(ve.wrapS=dr,ve.wrapT=pe,"anisotropic"in ot){var Je=ot.anisotropic;le(typeof Je=="number"&&Je>=1&&Je<=Ee.maxAnisotropic,"aniso samples must be between 1 and "),ve.anisotropic=ot.anisotropic}if("mipmap"in ot){var De=!1;switch(typeof ot.mipmap){case"string":le.parameter(ot.mipmap,Nt,"invalid mipmap hint"),ve.mipmapHint=Nt[ot.mipmap],ve.genMipmaps=!0,De=!0;break;case"boolean":De=ve.genMipmaps=ot.mipmap;break;case"object":le(Array.isArray(ot.mipmap),"invalid mipmap type"),ve.genMipmaps=!1,De=!0;break;default:le.raise("invalid mipmap type")}De&&!("min"in ot)&&(ve.minFilter=fu)}}function zo(ve,ot){V.texParameteri(ot,$s,ve.minFilter),V.texParameteri(ot,Fs,ve.magFilter),V.texParameteri(ot,zi,ve.wrapS),V.texParameteri(ot,Qf,ve.wrapT),se.ext_texture_filter_anisotropic&&V.texParameteri(ot,_h,ve.anisotropic),ve.genMipmaps&&(V.hint(Jv,ve.mipmapHint),V.generateMipmap(ot))}var ii=0,di={},Jo=Ee.maxTextureUnits,vo=Array(Jo).map(function(){return null});function Yn(ve){At.call(this),this.mipmask=0,this.internalformat=zt,this.id=ii++,this.refCount=1,this.target=ve,this.texture=V.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new uo,pt.profile&&(this.stats={size:0})}function pi(ve){V.activeTexture(Bl),V.bindTexture(ve.target,ve.texture)}function Tr(){var ve=vo[0];ve?V.bindTexture(ve.target,ve.texture):V.bindTexture(ge,null)}function Dn(ve){var ot=ve.texture;le(ot,"must not double destroy texture");var tt=ve.unit,sn=ve.target;tt>=0&&(V.activeTexture(Bl+tt),V.bindTexture(sn,null),vo[tt]=null),V.deleteTexture(ot),ve.texture=null,ve.params=null,ve.pixels=null,ve.refCount=0,delete di[ve.id],et.textureCount--}a(Yn.prototype,{bind:function(){var ve=this;ve.bindCount+=1;var ot=ve.unit;if(ot<0){for(var tt=0;tt<Jo;++tt){var sn=vo[tt];if(sn){if(sn.bindCount>0)continue;sn.unit=-1}vo[tt]=ve,ot=tt;break}ot>=Jo&&le.raise("insufficient number of texture units"),pt.profile&&et.maxTextureUnits<ot+1&&(et.maxTextureUnits=ot+1),ve.unit=ot,V.activeTexture(Bl+ot),V.bindTexture(ve.target,ve.texture)}return ot},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Dn(this)}});function hr(ve,ot){var tt=new Yn(ge);di[tt.id]=tt,et.textureCount++;function sn(re,Re){var Ve=tt.texInfo;uo.call(Ve);var Je=nr();return typeof re=="number"?typeof Re=="number"?or(Je,re|0,Re|0):or(Je,re|0,re|0):re?(le.type(re,"object","invalid arguments to regl.texture"),Io(Ve,re),br(Je,re)):or(Je,1,1),Ve.genMipmaps&&(Je.mipmask=(Je.width<<1)-1),tt.mipmask=Je.mipmask,Xt(tt,Je),le.texture2D(Ve,Je,Ee),tt.internalformat=Je.internalformat,sn.width=Je.width,sn.height=Je.height,pi(tt),jo(Je,ge),zo(Ve,ge),Tr(),Zo(Je),pt.profile&&(tt.stats.size=oi(tt.internalformat,tt.type,Je.width,Je.height,Ve.genMipmaps,!1)),sn.format=It[tt.internalformat],sn.type=Qt[tt.type],sn.mag=xt[Ve.magFilter],sn.min=on[Ve.minFilter],sn.wrapS=Tt[Ve.wrapS],sn.wrapT=Tt[Ve.wrapT],sn}function dr(re,Re,Ve,Je){le(!!re,"must specify image data");var De=Re|0,Ce=Ve|0,Le=Je|0,de=dn();return Xt(de,tt),de.width=0,de.height=0,Mt(de,re),de.width=de.width||(tt.width>>Le)-De,de.height=de.height||(tt.height>>Le)-Ce,le(tt.type===de.type&&tt.format===de.format&&tt.internalformat===de.internalformat,"incompatible format for texture.subimage"),le(De>=0&&Ce>=0&&De+de.width<=tt.width&&Ce+de.height<=tt.height,"texture.subimage write out of bounds"),le(tt.mipmask&1<<Le,"missing mipmap data"),le(de.data||de.element||de.needsCopy,"missing image data"),pi(tt),jn(de,ge,De,Ce,Le),Tr(),lr(de),sn}function pe(re,Re){var Ve=re|0,Je=Re|0||Ve;if(Ve===tt.width&&Je===tt.height)return sn;sn.width=tt.width=Ve,sn.height=tt.height=Je,pi(tt);for(var De=0;tt.mipmask>>De;++De){var Ce=Ve>>De,Le=Je>>De;if(!Ce||!Le)break;V.texImage2D(ge,De,tt.format,Ce,Le,0,tt.format,tt.type,null)}return Tr(),pt.profile&&(tt.stats.size=oi(tt.internalformat,tt.type,Ve,Je,!1,!1)),sn}return sn(ve,ot),sn.subimage=dr,sn.resize=pe,sn._reglType="texture2d",sn._texture=tt,pt.profile&&(sn.stats=tt.stats),sn.destroy=function(){tt.decRef()},sn}function Kn(ve,ot,tt,sn,dr,pe){var re=new Yn(Ye);di[re.id]=re,et.cubeCount++;var Re=new Array(6);function Ve(Ce,Le,de,Me,fe,We){var ze,p=re.texInfo;for(uo.call(p),ze=0;ze<6;++ze)Re[ze]=nr();if(typeof Ce=="number"||!Ce){var y=Ce|0||1;for(ze=0;ze<6;++ze)or(Re[ze],y,y)}else if(typeof Ce=="object")if(Le)br(Re[0],Ce),br(Re[1],Le),br(Re[2],de),br(Re[3],Me),br(Re[4],fe),br(Re[5],We);else if(Io(p,Ce),Pn(re,Ce),"faces"in Ce){var O=Ce.faces;for(le(Array.isArray(O)&&O.length===6,"cube faces must be a length 6 array"),ze=0;ze<6;++ze)le(typeof O[ze]=="object"&&!!O[ze],"invalid input for cube map face"),Xt(Re[ze],re),br(Re[ze],O[ze])}else for(ze=0;ze<6;++ze)br(Re[ze],Ce);else le.raise("invalid arguments to cube map");for(Xt(re,Re[0]),Ee.npotTextureCube||le(G(re.width)&&G(re.height),"your browser does not support non power or two texture dimensions"),p.genMipmaps?re.mipmask=(Re[0].width<<1)-1:re.mipmask=Re[0].mipmask,le.textureCube(re,p,Re,Ee),re.internalformat=Re[0].internalformat,Ve.width=Re[0].width,Ve.height=Re[0].height,pi(re),ze=0;ze<6;++ze)jo(Re[ze],gt+ze);for(zo(p,Ye),Tr(),pt.profile&&(re.stats.size=oi(re.internalformat,re.type,Ve.width,Ve.height,p.genMipmaps,!0)),Ve.format=It[re.internalformat],Ve.type=Qt[re.type],Ve.mag=xt[p.magFilter],Ve.min=on[p.minFilter],Ve.wrapS=Tt[p.wrapS],Ve.wrapT=Tt[p.wrapT],ze=0;ze<6;++ze)Zo(Re[ze]);return Ve}function Je(Ce,Le,de,Me,fe){le(!!Le,"must specify image data"),le(typeof Ce=="number"&&Ce===(Ce|0)&&Ce>=0&&Ce<6,"invalid face");var We=de|0,ze=Me|0,p=fe|0,y=dn();return Xt(y,re),y.width=0,y.height=0,Mt(y,Le),y.width=y.width||(re.width>>p)-We,y.height=y.height||(re.height>>p)-ze,le(re.type===y.type&&re.format===y.format&&re.internalformat===y.internalformat,"incompatible format for texture.subimage"),le(We>=0&&ze>=0&&We+y.width<=re.width&&ze+y.height<=re.height,"texture.subimage write out of bounds"),le(re.mipmask&1<<p,"missing mipmap data"),le(y.data||y.element||y.needsCopy,"missing image data"),pi(re),jn(y,gt+Ce,We,ze,p),Tr(),lr(y),Ve}function De(Ce){var Le=Ce|0;if(Le!==re.width){Ve.width=re.width=Le,Ve.height=re.height=Le,pi(re);for(var de=0;de<6;++de)for(var Me=0;re.mipmask>>Me;++Me)V.texImage2D(gt+de,Me,re.format,Le>>Me,Le>>Me,0,re.format,re.type,null);return Tr(),pt.profile&&(re.stats.size=oi(re.internalformat,re.type,Ve.width,Ve.height,!1,!0)),Ve}}return Ve(ve,ot,tt,sn,dr,pe),Ve.subimage=Je,Ve.resize=De,Ve._reglType="textureCube",Ve._texture=re,pt.profile&&(Ve.stats=re.stats),Ve.destroy=function(){re.decRef()},Ve}function mo(){for(var ve=0;ve<Jo;++ve)V.activeTexture(Bl+ve),V.bindTexture(ge,null),vo[ve]=null;ui(di).forEach(Dn),et.cubeCount=0,et.textureCount=0}pt.profile&&(et.getTotalTextureSize=function(){var ve=0;return Object.keys(di).forEach(function(ot){ve+=di[ot].stats.size}),ve});function Ml(){for(var ve=0;ve<Jo;++ve){var ot=vo[ve];ot&&(ot.bindCount=0,ot.unit=-1,vo[ve]=null)}ui(di).forEach(function(tt){tt.texture=V.createTexture(),V.bindTexture(tt.target,tt.texture);for(var sn=0;sn<32;++sn)if((tt.mipmask&1<<sn)!==0)if(tt.target===ge)V.texImage2D(ge,sn,tt.internalformat,tt.width>>sn,tt.height>>sn,0,tt.internalformat,tt.type,null);else for(var dr=0;dr<6;++dr)V.texImage2D(gt+dr,sn,tt.internalformat,tt.width>>sn,tt.height>>sn,0,tt.internalformat,tt.type,null);zo(tt.texInfo,tt.target)})}function Oo(){for(var ve=0;ve<Jo;++ve){var ot=vo[ve];ot&&(ot.bindCount=0,ot.unit=-1,vo[ve]=null),V.activeTexture(Bl+ve),V.bindTexture(ge,null),V.bindTexture(Ye,null)}}return{create2D:hr,createCube:Kn,clear:mo,getTexture:function(ve){return null},restore:Ml,refresh:Oo}}var co=36161,Cn=32854,fo=32855,Vc=36194,El=33189,od=36168,To=34041,No=35907,fp=34836,dp=34842,Wc=34843,Hi=[];Hi[Cn]=2,Hi[fo]=2,Hi[Vc]=2,Hi[El]=2,Hi[od]=1,Hi[To]=4,Hi[No]=4,Hi[fp]=16,Hi[dp]=8,Hi[Wc]=6;function id(V,se,Ee){return Hi[V]*se*Ee}var Vs=function(V,se,Ee,nt,vt){var et={rgba4:Cn,rgb565:Vc,"rgb5 a1":fo,depth:El,stencil:od,"depth stencil":To};se.ext_srgb&&(et.srgba=No),se.ext_color_buffer_half_float&&(et.rgba16f=dp,et.rgb16f=Wc),se.webgl_color_buffer_float&&(et.rgba32f=fp);var pt=[];Object.keys(et).forEach(function(Ct){var Et=et[Ct];pt[Et]=Ct});var Nt=0,Lt={};function Rt(Ct){this.id=Nt++,this.refCount=1,this.renderbuffer=Ct,this.format=Cn,this.width=0,this.height=0,vt.profile&&(this.stats={size:0})}Rt.prototype.decRef=function(){--this.refCount<=0&&ft(this)};function ft(Ct){var Et=Ct.renderbuffer;le(Et,"must not double destroy renderbuffer"),V.bindRenderbuffer(co,null),V.deleteRenderbuffer(Et),Ct.renderbuffer=null,Ct.refCount=0,delete Lt[Ct.id],nt.renderbufferCount--}function Ht(Ct,Et){var Ke=new Rt(V.createRenderbuffer());Lt[Ke.id]=Ke,nt.renderbufferCount++;function st(Qt,xt){var on=0,Tt=0,Gt=Cn;if(typeof Qt=="object"&&Qt){var At=Qt;if("shape"in At){var Xt=At.shape;le(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),on=Xt[0]|0,Tt=Xt[1]|0}else"radius"in At&&(on=Tt=At.radius|0),"width"in At&&(on=At.width|0),"height"in At&&(Tt=At.height|0);"format"in At&&(le.parameter(At.format,et,"invalid renderbuffer format"),Gt=et[At.format])}else typeof Qt=="number"?(on=Qt|0,typeof xt=="number"?Tt=xt|0:Tt=on):Qt?le.raise("invalid arguments to renderbuffer constructor"):on=Tt=1;if(le(on>0&&Tt>0&&on<=Ee.maxRenderbufferSize&&Tt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),!(on===Ke.width&&Tt===Ke.height&&Gt===Ke.format))return st.width=Ke.width=on,st.height=Ke.height=Tt,Ke.format=Gt,V.bindRenderbuffer(co,Ke.renderbuffer),V.renderbufferStorage(co,Gt,on,Tt),le(V.getError()===0,"invalid render buffer format"),vt.profile&&(Ke.stats.size=id(Ke.format,Ke.width,Ke.height)),st.format=pt[Ke.format],st}function It(Qt,xt){var on=Qt|0,Tt=xt|0||on;return on===Ke.width&&Tt===Ke.height||(le(on>0&&Tt>0&&on<=Ee.maxRenderbufferSize&&Tt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),st.width=Ke.width=on,st.height=Ke.height=Tt,V.bindRenderbuffer(co,Ke.renderbuffer),V.renderbufferStorage(co,Ke.format,on,Tt),le(V.getError()===0,"invalid render buffer format"),vt.profile&&(Ke.stats.size=id(Ke.format,Ke.width,Ke.height))),st}return st(Ct,Et),st.resize=It,st._reglType="renderbuffer",st._renderbuffer=Ke,vt.profile&&(st.stats=Ke.stats),st.destroy=function(){Ke.decRef()},st}vt.profile&&(nt.getTotalRenderbufferSize=function(){var Ct=0;return Object.keys(Lt).forEach(function(Et){Ct+=Lt[Et].stats.size}),Ct});function Ut(){ui(Lt).forEach(function(Ct){Ct.renderbuffer=V.createRenderbuffer(),V.bindRenderbuffer(co,Ct.renderbuffer),V.renderbufferStorage(co,Ct.format,Ct.width,Ct.height)}),V.bindRenderbuffer(co,null)}return{create:Ht,clear:function(){ui(Lt).forEach(ft)},restore:Ut}},La=36160,hu=36161,zl=3553,Fa=34069,Sh=36064,Ol=36096,Sa=36128,pp=33306,hp=36053,ad=36054,xh=36055,Ah=36057,Th=36061,ld=36193,vp=5121,mp=5126,Gc=6407,Ar=6408,tm=6402,yp=[Gc,Ar],Xu=[];Xu[Ar]=4,Xu[Gc]=3;var zc=[];zc[vp]=1,zc[mp]=4,zc[ld]=2;var nm=32854,Mh=32855,xa=36194,rm=33189,Hc=36168,ud=34041,gp=35907,kh=34836,fa=34842,vu=34843,sd=[nm,Mh,xa,gp,fa,vu,kh],qu={};qu[hp]="complete",qu[ad]="incomplete attachment",qu[Ah]="incomplete dimensions",qu[xh]="incomplete, missing attachment",qu[Th]="unsupported";function cd(V,se,Ee,nt,vt,et){var pt={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],Lt=["rgba4","rgb565","rgb5 a1"];se.ext_srgb&&Lt.push("srgba"),se.ext_color_buffer_half_float&&Lt.push("rgba16f","rgb16f"),se.webgl_color_buffer_float&&Lt.push("rgba32f");var Rt=["uint8"];se.oes_texture_half_float&&Rt.push("half float","float16"),se.oes_texture_float&&Rt.push("float","float32");function ft(Dt,Mt,St){this.target=Dt,this.texture=Mt,this.renderbuffer=St;var jn=0,tr=0;Mt?(jn=Mt.width,tr=Mt.height):St&&(jn=St.width,tr=St.height),this.width=jn,this.height=tr}function Ht(Dt){Dt&&(Dt.texture&&Dt.texture._texture.decRef(),Dt.renderbuffer&&Dt.renderbuffer._renderbuffer.decRef())}function Ut(Dt,Mt,St){if(Dt)if(Dt.texture){var jn=Dt.texture._texture,tr=Math.max(1,jn.width),dn=Math.max(1,jn.height);le(tr===Mt&&dn===St,"inconsistent width/height for supplied texture"),jn.refCount+=1}else{var lr=Dt.renderbuffer._renderbuffer;le(lr.width===Mt&&lr.height===St,"inconsistent width/height for renderbuffer"),lr.refCount+=1}}function Ct(Dt,Mt){Mt&&(Mt.texture?V.framebufferTexture2D(La,Dt,Mt.target,Mt.texture._texture.texture,0):V.framebufferRenderbuffer(La,Dt,hu,Mt.renderbuffer._renderbuffer.renderbuffer))}function Et(Dt){var Mt=zl,St=null,jn=null,tr=Dt;typeof Dt=="object"&&(tr=Dt.data,"target"in Dt&&(Mt=Dt.target|0)),le.type(tr,"function","invalid attachment data");var dn=tr._reglType;return dn==="texture2d"?(St=tr,le(Mt===zl)):dn==="textureCube"?(St=tr,le(Mt>=Fa&&Mt<Fa+6,"invalid cube map target")):dn==="renderbuffer"?(jn=tr,Mt=hu):le.raise("invalid regl object for attachment"),new ft(Mt,St,jn)}function Ke(Dt,Mt,St,jn,tr){if(St){var dn=nt.create2D({width:Dt,height:Mt,format:jn,type:tr});return dn._texture.refCount=0,new ft(zl,dn,null)}else{var lr=vt.create({width:Dt,height:Mt,format:jn});return lr._renderbuffer.refCount=0,new ft(hu,null,lr)}}function st(Dt){return Dt&&(Dt.texture||Dt.renderbuffer)}function It(Dt,Mt,St){Dt&&(Dt.texture?Dt.texture.resize(Mt,St):Dt.renderbuffer&&Dt.renderbuffer.resize(Mt,St),Dt.width=Mt,Dt.height=St)}var Qt=0,xt={};function on(){this.id=Qt++,xt[this.id]=this,this.framebuffer=V.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Tt(Dt){Dt.colorAttachments.forEach(Ht),Ht(Dt.depthAttachment),Ht(Dt.stencilAttachment),Ht(Dt.depthStencilAttachment)}function Gt(Dt){var Mt=Dt.framebuffer;le(Mt,"must not double destroy framebuffer"),V.deleteFramebuffer(Mt),Dt.framebuffer=null,et.framebufferCount--,delete xt[Dt.id]}function At(Dt){var Mt;V.bindFramebuffer(La,Dt.framebuffer);var St=Dt.colorAttachments;for(Mt=0;Mt<St.length;++Mt)Ct(Sh+Mt,St[Mt]);for(Mt=St.length;Mt<Ee.maxColorAttachments;++Mt)V.framebufferTexture2D(La,Sh+Mt,zl,null,0);V.framebufferTexture2D(La,pp,zl,null,0),V.framebufferTexture2D(La,Ol,zl,null,0),V.framebufferTexture2D(La,Sa,zl,null,0),Ct(Ol,Dt.depthAttachment),Ct(Sa,Dt.stencilAttachment),Ct(pp,Dt.depthStencilAttachment);var jn=V.checkFramebufferStatus(La);!V.isContextLost()&&jn!==hp&&le.raise("framebuffer configuration not supported, status = "+qu[jn]),V.bindFramebuffer(La,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,V.getError()}function Xt(Dt,Mt){var St=new on;et.framebufferCount++;function jn(dn,lr){var Wn;le(pt.next!==St,"can not update framebuffer which is currently in use");var or=0,br=0,jo=!0,Po=!0,nr=null,Zo=!0,uo="rgba",Io="uint8",zo=1,ii=null,di=null,Jo=null,vo=!1;if(typeof dn=="number")or=dn|0,br=lr|0||or;else if(!dn)or=br=1;else{le.type(dn,"object","invalid arguments for framebuffer");var Yn=dn;if("shape"in Yn){var pi=Yn.shape;le(Array.isArray(pi)&&pi.length>=2,"invalid shape for framebuffer"),or=pi[0],br=pi[1]}else"radius"in Yn&&(or=br=Yn.radius),"width"in Yn&&(or=Yn.width),"height"in Yn&&(br=Yn.height);("color"in Yn||"colors"in Yn)&&(nr=Yn.color||Yn.colors,Array.isArray(nr)&&le(nr.length===1||se.webgl_draw_buffers,"multiple render targets not supported")),nr||("colorCount"in Yn&&(zo=Yn.colorCount|0,le(zo>0,"invalid color buffer count")),"colorTexture"in Yn&&(Zo=!!Yn.colorTexture,uo="rgba4"),"colorType"in Yn&&(Io=Yn.colorType,Zo?(le(se.oes_texture_float||!(Io==="float"||Io==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),le(se.oes_texture_half_float||!(Io==="half float"||Io==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Io==="half float"||Io==="float16"?(le(se.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),uo="rgba16f"):(Io==="float"||Io==="float32")&&(le(se.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),uo="rgba32f"),le.oneOf(Io,Rt,"invalid color type")),"colorFormat"in Yn&&(uo=Yn.colorFormat,Nt.indexOf(uo)>=0?Zo=!0:Lt.indexOf(uo)>=0?Zo=!1:Zo?le.oneOf(Yn.colorFormat,Nt,"invalid color format for texture"):le.oneOf(Yn.colorFormat,Lt,"invalid color format for renderbuffer"))),("depthTexture"in Yn||"depthStencilTexture"in Yn)&&(vo=!!(Yn.depthTexture||Yn.depthStencilTexture),le(!vo||se.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Yn&&(typeof Yn.depth=="boolean"?jo=Yn.depth:(ii=Yn.depth,Po=!1)),"stencil"in Yn&&(typeof Yn.stencil=="boolean"?Po=Yn.stencil:(di=Yn.stencil,jo=!1)),"depthStencil"in Yn&&(typeof Yn.depthStencil=="boolean"?jo=Po=Yn.depthStencil:(Jo=Yn.depthStencil,jo=!1,Po=!1))}var Tr=null,Dn=null,hr=null,Kn=null;if(Array.isArray(nr))Tr=nr.map(Et);else if(nr)Tr=[Et(nr)];else for(Tr=new Array(zo),Wn=0;Wn<zo;++Wn)Tr[Wn]=Ke(or,br,Zo,uo,Io);le(se.webgl_draw_buffers||Tr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),le(Tr.length<=Ee.maxColorAttachments,"too many color attachments, not supported"),or=or||Tr[0].width,br=br||Tr[0].height,ii?Dn=Et(ii):jo&&!Po&&(Dn=Ke(or,br,vo,"depth","uint32")),di?hr=Et(di):Po&&!jo&&(hr=Ke(or,br,!1,"stencil","uint8")),Jo?Kn=Et(Jo):!ii&&!di&&Po&&jo&&(Kn=Ke(or,br,vo,"depth stencil","depth stencil")),le(!!ii+!!di+!!Jo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var mo=null;for(Wn=0;Wn<Tr.length;++Wn)if(Ut(Tr[Wn],or,br),le(!Tr[Wn]||Tr[Wn].texture&&yp.indexOf(Tr[Wn].texture._texture.format)>=0||Tr[Wn].renderbuffer&&sd.indexOf(Tr[Wn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Wn+" is invalid"),Tr[Wn]&&Tr[Wn].texture){var Ml=Xu[Tr[Wn].texture._texture.format]*zc[Tr[Wn].texture._texture.type];mo===null?mo=Ml:le(mo===Ml,"all color attachments much have the same number of bits per pixel.")}return Ut(Dn,or,br),le(!Dn||Dn.texture&&Dn.texture._texture.format===tm||Dn.renderbuffer&&Dn.renderbuffer._renderbuffer.format===rm,"invalid depth attachment for framebuffer object"),Ut(hr,or,br),le(!hr||hr.renderbuffer&&hr.renderbuffer._renderbuffer.format===Hc,"invalid stencil attachment for framebuffer object"),Ut(Kn,or,br),le(!Kn||Kn.texture&&Kn.texture._texture.format===ud||Kn.renderbuffer&&Kn.renderbuffer._renderbuffer.format===ud,"invalid depth-stencil attachment for framebuffer object"),Tt(St),St.width=or,St.height=br,St.colorAttachments=Tr,St.depthAttachment=Dn,St.stencilAttachment=hr,St.depthStencilAttachment=Kn,jn.color=Tr.map(st),jn.depth=st(Dn),jn.stencil=st(hr),jn.depthStencil=st(Kn),jn.width=St.width,jn.height=St.height,At(St),jn}function tr(dn,lr){le(pt.next!==St,"can not resize a framebuffer which is currently in use");var Wn=Math.max(dn|0,1),or=Math.max(lr|0||Wn,1);if(Wn===St.width&&or===St.height)return jn;for(var br=St.colorAttachments,jo=0;jo<br.length;++jo)It(br[jo],Wn,or);return It(St.depthAttachment,Wn,or),It(St.stencilAttachment,Wn,or),It(St.depthStencilAttachment,Wn,or),St.width=jn.width=Wn,St.height=jn.height=or,At(St),jn}return jn(Dt,Mt),a(jn,{resize:tr,_reglType:"framebuffer",_framebuffer:St,destroy:function(){Gt(St),Tt(St)},use:function(dn){pt.setFBO({framebuffer:jn},dn)}})}function Pn(Dt){var Mt=Array(6);function St(tr){var dn;le(Mt.indexOf(pt.next)<0,"can not update framebuffer which is currently in use");var lr={color:null},Wn=0,or=null,br="rgba",jo="uint8",Po=1;if(typeof tr=="number")Wn=tr|0;else if(!tr)Wn=1;else{le.type(tr,"object","invalid arguments for framebuffer");var nr=tr;if("shape"in nr){var Zo=nr.shape;le(Array.isArray(Zo)&&Zo.length>=2,"invalid shape for framebuffer"),le(Zo[0]===Zo[1],"cube framebuffer must be square"),Wn=Zo[0]}else"radius"in nr&&(Wn=nr.radius|0),"width"in nr?(Wn=nr.width|0,"height"in nr&&le(nr.height===Wn,"must be square")):"height"in nr&&(Wn=nr.height|0);("color"in nr||"colors"in nr)&&(or=nr.color||nr.colors,Array.isArray(or)&&le(or.length===1||se.webgl_draw_buffers,"multiple render targets not supported")),or||("colorCount"in nr&&(Po=nr.colorCount|0,le(Po>0,"invalid color buffer count")),"colorType"in nr&&(le.oneOf(nr.colorType,Rt,"invalid color type"),jo=nr.colorType),"colorFormat"in nr&&(br=nr.colorFormat,le.oneOf(nr.colorFormat,Nt,"invalid color format for texture"))),"depth"in nr&&(lr.depth=nr.depth),"stencil"in nr&&(lr.stencil=nr.stencil),"depthStencil"in nr&&(lr.depthStencil=nr.depthStencil)}var uo;if(or)if(Array.isArray(or))for(uo=[],dn=0;dn<or.length;++dn)uo[dn]=or[dn];else uo=[or];else{uo=Array(Po);var Io={radius:Wn,format:br,type:jo};for(dn=0;dn<Po;++dn)uo[dn]=nt.createCube(Io)}for(lr.color=Array(uo.length),dn=0;dn<uo.length;++dn){var zo=uo[dn];le(typeof zo=="function"&&zo._reglType==="textureCube","invalid cube map"),Wn=Wn||zo.width,le(zo.width===Wn&&zo.height===Wn,"invalid cube map shape"),lr.color[dn]={target:Fa,data:uo[dn]}}for(dn=0;dn<6;++dn){for(var ii=0;ii<uo.length;++ii)lr.color[ii].target=Fa+dn;dn>0&&(lr.depth=Mt[0].depth,lr.stencil=Mt[0].stencil,lr.depthStencil=Mt[0].depthStencil),Mt[dn]?Mt[dn](lr):Mt[dn]=Xt(lr)}return a(St,{width:Wn,height:Wn,color:uo})}function jn(tr){var dn,lr=tr|0;if(le(lr>0&&lr<=Ee.maxCubeMapSize,"invalid radius for cube fbo"),lr===St.width)return St;var Wn=St.color;for(dn=0;dn<Wn.length;++dn)Wn[dn].resize(lr);for(dn=0;dn<6;++dn)Mt[dn].resize(lr);return St.width=St.height=lr,St}return St(Dt),a(St,{faces:Mt,resize:jn,_reglType:"framebufferCube",destroy:function(){Mt.forEach(function(tr){tr.destroy()})}})}function Vn(){pt.cur=null,pt.next=null,pt.dirty=!0,ui(xt).forEach(function(Dt){Dt.framebuffer=V.createFramebuffer(),At(Dt)})}return a(pt,{getFramebuffer:function(Dt){if(typeof Dt=="function"&&Dt._reglType==="framebuffer"){var Mt=Dt._framebuffer;if(Mt instanceof on)return Mt}return null},create:Xt,createCube:Pn,clear:function(){ui(xt).forEach(Gt)},restore:Vn})}var bp=5126,fd=34962;function Xc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=bp,this.offset=0,this.stride=0,this.divisor=0}function dd(V,se,Ee,nt,vt){for(var et=Ee.maxAttributes,pt=new Array(et),Nt=0;Nt<et;++Nt)pt[Nt]=new Xc;var Lt=0,Rt={},ft={Record:Xc,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Ut()?xt:function(){},createVAO:on,getVAO:Et,destroyBuffer:Ht,setVAO:Ut()?Ke:st,clear:Ut()?It:function(){}};function Ht(Tt){for(var Gt=0;Gt<pt.length;++Gt){var At=pt[Gt];At.buffer===Tt&&(V.disableVertexAttribArray(Gt),At.buffer=null)}}function Ut(){return se.oes_vertex_array_object}function Ct(){return se.angle_instanced_arrays}function Et(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null}function Ke(Tt){if(Tt!==ft.currentVAO){var Gt=Ut();Tt?Gt.bindVertexArrayOES(Tt.vao):Gt.bindVertexArrayOES(null),ft.currentVAO=Tt}}function st(Tt){if(Tt!==ft.currentVAO){if(Tt)Tt.bindAttrs();else for(var Gt=Ct(),At=0;At<pt.length;++At){var Xt=pt[At];Xt.buffer?(V.enableVertexAttribArray(At),V.vertexAttribPointer(At,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Gt&&Xt.divisor&&Gt.vertexAttribDivisorANGLE(At,Xt.divisor)):(V.disableVertexAttribArray(At),V.vertexAttrib4f(At,Xt.x,Xt.y,Xt.z,Xt.w))}ft.currentVAO=Tt}}function It(){ui(Rt).forEach(function(Tt){Tt.destroy()})}function Qt(){this.id=++Lt,this.attributes=[];var Tt=Ut();Tt?this.vao=Tt.createVertexArrayOES():this.vao=null,Rt[this.id]=this,this.buffers=[]}Qt.prototype.bindAttrs=function(){for(var Tt=Ct(),Gt=this.attributes,At=0;At<Gt.length;++At){var Xt=Gt[At];Xt.buffer?(V.enableVertexAttribArray(At),V.bindBuffer(fd,Xt.buffer.buffer),V.vertexAttribPointer(At,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),Tt&&Xt.divisor&&Tt.vertexAttribDivisorANGLE(At,Xt.divisor)):(V.disableVertexAttribArray(At),V.vertexAttrib4f(At,Xt.x,Xt.y,Xt.z,Xt.w))}for(var Pn=Gt.length;Pn<et;++Pn)V.disableVertexAttribArray(Pn)},Qt.prototype.refresh=function(){var Tt=Ut();Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ft.currentVAO=this)},Qt.prototype.destroy=function(){if(this.vao){var Tt=Ut();this===ft.currentVAO&&(ft.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}Rt[this.id]&&(delete Rt[this.id],nt.vaoCount-=1)};function xt(){var Tt=Ut();Tt&&ui(Rt).forEach(function(Gt){Gt.refresh()})}function on(Tt){var Gt=new Qt;nt.vaoCount+=1;function At(Xt){le(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),le(Xt.length<et,"too many attributes"),le(Xt.length>0,"must specify at least one attribute");var Pn={},Vn=Gt.attributes;Vn.length=Xt.length;for(var Dt=0;Dt<Xt.length;++Dt){var Mt=Xt[Dt],St=Vn[Dt]=new Xc,jn=Mt.data||Mt;if(Array.isArray(jn)||n(jn)||$i(jn)){var tr;Gt.buffers[Dt]&&(tr=Gt.buffers[Dt],n(jn)&&tr._buffer.byteLength>=jn.byteLength?tr.subdata(jn):(tr.destroy(),Gt.buffers[Dt]=null)),Gt.buffers[Dt]||(tr=Gt.buffers[Dt]=vt.create(Mt,fd,!1,!0)),St.buffer=vt.getBuffer(tr),St.size=St.buffer.dimension|0,St.normalized=!1,St.type=St.buffer.dtype,St.offset=0,St.stride=0,St.divisor=0,St.state=1,Pn[Dt]=1}else vt.getBuffer(Mt)?(St.buffer=vt.getBuffer(Mt),St.size=St.buffer.dimension|0,St.normalized=!1,St.type=St.buffer.dtype,St.offset=0,St.stride=0,St.divisor=0,St.state=1):vt.getBuffer(Mt.buffer)?(St.buffer=vt.getBuffer(Mt.buffer),St.size=(+Mt.size||St.buffer.dimension)|0,St.normalized=!!Mt.normalized||!1,"type"in Mt?(le.parameter(Mt.type,Vi,"invalid buffer type"),St.type=Vi[Mt.type]):St.type=St.buffer.dtype,St.offset=(Mt.offset||0)|0,St.stride=(Mt.stride||0)|0,St.divisor=(Mt.divisor||0)|0,St.state=1,le(St.size>=1&&St.size<=4,"size must be between 1 and 4"),le(St.offset>=0,"invalid offset"),le(St.stride>=0&&St.stride<=255,"stride must be between 0 and 255"),le(St.divisor>=0,"divisor must be positive"),le(!St.divisor||!!se.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Mt?(le(Dt>0,"first attribute must not be a constant"),St.x=+Mt.x||0,St.y=+Mt.y||0,St.z=+Mt.z||0,St.w=+Mt.w||0,St.state=2):le(!1,"invalid attribute spec for location "+Dt)}for(var dn=0;dn<Gt.buffers.length;++dn)!Pn[dn]&&Gt.buffers[dn]&&(Gt.buffers[dn].destroy(),Gt.buffers[dn]=null);return Gt.refresh(),At}return At.destroy=function(){for(var Xt=0;Xt<Gt.buffers.length;++Xt)Gt.buffers[Xt]&&Gt.buffers[Xt].destroy();Gt.buffers.length=0,Gt.destroy()},At._vao=Gt,At._reglType="vao",At(Tt)}return ft}var pd=35632,zr=35633,om=35718,to=35721;function hd(V,se,Ee,nt){var vt={},et={};function pt(Ke,st,It,Qt){this.name=Ke,this.id=st,this.location=It,this.info=Qt}function Nt(Ke,st){for(var It=0;It<Ke.length;++It)if(Ke[It].id===st.id){Ke[It].location=st.location;return}Ke.push(st)}function Lt(Ke,st,It){var Qt=Ke===pd?vt:et,xt=Qt[st];if(!xt){var on=se.str(st);xt=V.createShader(Ke),V.shaderSource(xt,on),V.compileShader(xt),le.shaderError(V,xt,on,Ke,It),Qt[st]=xt}return xt}var Rt={},ft=[],Ht=0;function Ut(Ke,st){this.id=Ht++,this.fragId=Ke,this.vertId=st,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ct(Ke,st,It){var Qt,xt,on=Lt(pd,Ke.fragId),Tt=Lt(zr,Ke.vertId),Gt=Ke.program=V.createProgram();if(V.attachShader(Gt,on),V.attachShader(Gt,Tt),It)for(Qt=0;Qt<It.length;++Qt){var At=It[Qt];V.bindAttribLocation(Gt,At[0],At[1])}V.linkProgram(Gt),le.linkError(V,Gt,se.str(Ke.fragId),se.str(Ke.vertId),st);var Xt=V.getProgramParameter(Gt,om);nt.profile&&(Ke.stats.uniformsCount=Xt);var Pn=Ke.uniforms;for(Qt=0;Qt<Xt;++Qt)if(xt=V.getActiveUniform(Gt,Qt),xt)if(xt.size>1)for(var Vn=0;Vn<xt.size;++Vn){var Dt=xt.name.replace("[0]","["+Vn+"]");Nt(Pn,new pt(Dt,se.id(Dt),V.getUniformLocation(Gt,Dt),xt))}else Nt(Pn,new pt(xt.name,se.id(xt.name),V.getUniformLocation(Gt,xt.name),xt));var Mt=V.getProgramParameter(Gt,to);nt.profile&&(Ke.stats.attributesCount=Mt);var St=Ke.attributes;for(Qt=0;Qt<Mt;++Qt)xt=V.getActiveAttrib(Gt,Qt),xt&&Nt(St,new pt(xt.name,se.id(xt.name),V.getAttribLocation(Gt,xt.name),xt))}nt.profile&&(Ee.getMaxUniformsCount=function(){var Ke=0;return ft.forEach(function(st){st.stats.uniformsCount>Ke&&(Ke=st.stats.uniformsCount)}),Ke},Ee.getMaxAttributesCount=function(){var Ke=0;return ft.forEach(function(st){st.stats.attributesCount>Ke&&(Ke=st.stats.attributesCount)}),Ke});function Et(){vt={},et={};for(var Ke=0;Ke<ft.length;++Ke)Ct(ft[Ke],null,ft[Ke].attributes.map(function(st){return[st.location,st.name]}))}return{clear:function(){var Ke=V.deleteShader.bind(V);ui(vt).forEach(Ke),vt={},ui(et).forEach(Ke),et={},ft.forEach(function(st){V.deleteProgram(st.program)}),ft.length=0,Rt={},Ee.shaderCount=0},program:function(Ke,st,It,Qt){le.command(Ke>=0,"missing vertex shader",It),le.command(st>=0,"missing fragment shader",It);var xt=Rt[st];xt||(xt=Rt[st]={});var on=xt[Ke];if(on&&(on.refCount++,!Qt))return on;var Tt=new Ut(st,Ke);return Ee.shaderCount++,Ct(Tt,It,Qt),on||(xt[Ke]=Tt),ft.push(Tt),a(Tt,{destroy:function(){if(Tt.refCount--,Tt.refCount<=0){V.deleteProgram(Tt.program);var Gt=ft.indexOf(Tt);ft.splice(Gt,1),Ee.shaderCount--}xt[Tt.vertId].refCount<=0&&(V.deleteShader(et[Tt.vertId]),delete et[Tt.vertId],delete Rt[Tt.fragId][Tt.vertId]),Object.keys(Rt[Tt.fragId]).length||(V.deleteShader(vt[Tt.fragId]),delete vt[Tt.fragId],delete Rt[Tt.fragId])}})},restore:Et,shader:Lt,frag:-1,vert:-1}}var Ph=6408,Yu=5121,Nh=3333,Ws=5126;function Rh(V,se,Ee,nt,vt,et,pt){function Nt(ft){var Ht;se.next===null?(le(vt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ht=Yu):(le(se.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ht=se.next.colorAttachments[0].texture._texture.type,et.oes_texture_float?(le(Ht===Yu||Ht===Ws,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ht===Ws&&le(pt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):le(Ht===Yu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,Ct=0,Et=nt.framebufferWidth,Ke=nt.framebufferHeight,st=null;n(ft)?st=ft:ft&&(le.type(ft,"object","invalid arguments to regl.read()"),Ut=ft.x|0,Ct=ft.y|0,le(Ut>=0&&Ut<nt.framebufferWidth,"invalid x offset for regl.read"),le(Ct>=0&&Ct<nt.framebufferHeight,"invalid y offset for regl.read"),Et=(ft.width||nt.framebufferWidth-Ut)|0,Ke=(ft.height||nt.framebufferHeight-Ct)|0,st=ft.data||null),st&&(Ht===Yu?le(st instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ht===Ws&&le(st instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),le(Et>0&&Et+Ut<=nt.framebufferWidth,"invalid width for read pixels"),le(Ke>0&&Ke+Ct<=nt.framebufferHeight,"invalid height for read pixels"),Ee();var It=Et*Ke*4;return st||(Ht===Yu?st=new Uint8Array(It):Ht===Ws&&(st=st||new Float32Array(It))),le.isTypedArray(st,"data buffer for regl.read() must be a typedarray"),le(st.byteLength>=It,"data buffer for regl.read() too small"),V.pixelStorei(Nh,4),V.readPixels(Ut,Ct,Et,Ke,Ph,Ht,st),st}function Lt(ft){var Ht;return se.setFBO({framebuffer:ft.framebuffer},function(){Ht=Nt(ft)}),Ht}function Rt(ft){return!ft||!("framebuffer"in ft)?Nt(ft):Lt(ft)}return Rt}function Ku(V){return Array.prototype.slice.call(V)}function gi(V){return Ku(V).join("")}function nl(){var V=0,se=[],Ee=[];function nt(Ht){for(var Ut=0;Ut<Ee.length;++Ut)if(Ee[Ut]===Ht)return se[Ut];var Ct="g"+V++;return se.push(Ct),Ee.push(Ht),Ct}function vt(){var Ht=[];function Ut(){Ht.push.apply(Ht,Ku(arguments))}var Ct=[];function Et(){var Ke="v"+V++;return Ct.push(Ke),arguments.length>0&&(Ht.push(Ke,"="),Ht.push.apply(Ht,Ku(arguments)),Ht.push(";")),Ke}return a(Ut,{def:Et,toString:function(){return gi([Ct.length>0?"var "+Ct.join(",")+";":"",gi(Ht)])}})}function et(){var Ht=vt(),Ut=vt(),Ct=Ht.toString,Et=Ut.toString;function Ke(st,It){Ut(st,It,"=",Ht.def(st,It),";")}return a(function(){Ht.apply(Ht,Ku(arguments))},{def:Ht.def,entry:Ht,exit:Ut,save:Ke,set:function(st,It,Qt){Ke(st,It),Ht(st,It,"=",Qt,";")},toString:function(){return Ct()+Et()}})}function pt(){var Ht=gi(arguments),Ut=et(),Ct=et(),Et=Ut.toString,Ke=Ct.toString;return a(Ut,{then:function(){return Ut.apply(Ut,Ku(arguments)),this},else:function(){return Ct.apply(Ct,Ku(arguments)),this},toString:function(){var st=Ke();return st&&(st="else{"+st+"}"),gi(["if(",Ht,"){",Et(),"}",st])}})}var Nt=vt(),Lt={};function Rt(Ht,Ut){var Ct=[];function Et(){var xt="a"+Ct.length;return Ct.push(xt),xt}Ut=Ut||0;for(var Ke=0;Ke<Ut;++Ke)Et();var st=et(),It=st.toString,Qt=Lt[Ht]=a(st,{arg:Et,toString:function(){return gi(["function(",Ct.join(),"){",It(),"}"])}});return Qt}function ft(){var Ht=['"use strict";',Nt,"return {"];Object.keys(Lt).forEach(function(Et){Ht.push('"',Et,'":',Lt[Et].toString(),",")}),Ht.push("}");var Ut=gi(Ht).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ct=Function.apply(null,se.concat(Ut));return Ct.apply(null,Ee)}return{global:Nt,link:nt,block:vt,proc:Rt,scope:et,cond:pt,compile:ft}}var Hl="xyzw".split(""),Zu=5121,Ju=1,Qu=2,vd=0,Xl=1,es=2,md=3,rl=4,qc=5,Yc=6,Gs="dither",zs="blend.enable",Hs="blend.color",yd="blend.equation",Xs="blend.func",_p="depth.enable",gd="depth.func",Ch="depth.range",wp="depth.mask",ol="colorMask",Ep="cull.enable",Op="cull.face",Sp="frontFace",qs="lineWidth",Sl="polygonOffset.enable",Kc="polygonOffset.offset",bd="sample.alpha",_d="sample.enable",mu="sample.coverage",yu="stencil.enable",er="stencil.mask",Ys="stencil.func",Zc="stencil.opFront",il="stencil.opBack",fi="scissor.enable",ts="scissor.box",Ro="viewport",gu="profile",na="framebuffer",Jc="vert",Fi="frag",Wo="elements",xl="primitive",Al="count",wd="offset",kt="instances",ns="vao",Qc="Width",ef="Height",bu=na+Qc,rs=na+ef,Ed=Ro+Qc,xp=Ro+ef,os="drawingBuffer",tf=os+Qc,Od=os+ef,Ap=[Xs,yd,Ys,Zc,il,mu,Ro,ts,Kc],Tl=34962,Tp=34963,al=35632,_u=35633,Sd=3553,Dh=34067,jh=2884,Ih=3042,Mp=3024,xd=2960,nf=2929,Lh=3089,ll=32823,wu=32926,im=32928,Eo=5126,rf=35664,is=35665,of=35666,Ks=5124,af=35667,lf=35668,uf=35669,as=35670,ql=35671,bi=35672,Ad=35673,sf=35674,ls=35675,Zs=35676,Ti=35678,Mo=35680,cf=4,Xi=1028,$n=1029,Td=2304,ff=2305,Md=32775,kp=32776,Fh=519,Eu=7680,$h=0,us=1,Uh=32774,Pp=513,df=36160,Bh=36064,$a={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ou={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Bn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Np={frag:al,vert:_u},Js={cw:Td,ccw:ff};function Kl(V){return Array.isArray(V)||n(V)||$i(V)}function pf(V){return V.sort(function(se,Ee){return se===Ro?-1:Ee===Ro?1:se<Ee?-1:1})}function qi(V,se,Ee,nt){this.thisDep=V,this.contextDep=se,this.propDep=Ee,this.append=nt}function ul(V){return V&&!(V.thisDep||V.contextDep||V.propDep)}function Co(V){return new qi(!1,!1,!1,V)}function da(V,se){var Ee=V.type;if(Ee===vd){var nt=V.data.length;return new qi(!0,nt>=1,nt>=2,se)}else if(Ee===rl){var vt=V.data;return new qi(vt.thisDep,vt.contextDep,vt.propDep,se)}else{if(Ee===qc)return new qi(!1,!1,!1,se);if(Ee===Yc){for(var et=!1,pt=!1,Nt=!1,Lt=0;Lt<V.data.length;++Lt){var Rt=V.data[Lt];if(Rt.type===Xl)Nt=!0;else if(Rt.type===es)pt=!0;else if(Rt.type===md)et=!0;else if(Rt.type===vd){et=!0;var ft=Rt.data;ft>=1&&(pt=!0),ft>=2&&(Nt=!0)}else Rt.type===rl&&(et=et||Rt.data.thisDep,pt=pt||Rt.data.contextDep,Nt=Nt||Rt.data.propDep)}return new qi(et,pt,Nt,se)}else return new qi(Ee===md,Ee===es,Ee===Xl,se)}}var Ua=new qi(!1,!1,!1,function(){});function am(V,se,Ee,nt,vt,et,pt,Nt,Lt,Rt,ft,Ht,Ut,Ct,Et){var Ke=Rt.Record,st={add:32774,subtract:32778,"reverse subtract":32779};Ee.ext_blend_minmax&&(st.min=Md,st.max=kp);var It=Ee.angle_instanced_arrays,Qt=Ee.webgl_draw_buffers,xt={dirty:!0,profile:Et.profile},on={},Tt=[],Gt={},At={};function Xt(pe){return pe.replace(".","_")}function Pn(pe,re,Re){var Ve=Xt(pe);Tt.push(pe),on[Ve]=xt[Ve]=!!Re,Gt[Ve]=re}function Vn(pe,re,Re){var Ve=Xt(pe);Tt.push(pe),Array.isArray(Re)?(xt[Ve]=Re.slice(),on[Ve]=Re.slice()):xt[Ve]=on[Ve]=Re,At[Ve]=re}Pn(Gs,Mp),Pn(zs,Ih),Vn(Hs,"blendColor",[0,0,0,0]),Vn(yd,"blendEquationSeparate",[Uh,Uh]),Vn(Xs,"blendFuncSeparate",[us,$h,us,$h]),Pn(_p,nf,!0),Vn(gd,"depthFunc",Pp),Vn(Ch,"depthRange",[0,1]),Vn(wp,"depthMask",!0),Vn(ol,ol,[!0,!0,!0,!0]),Pn(Ep,jh),Vn(Op,"cullFace",$n),Vn(Sp,Sp,ff),Vn(qs,qs,1),Pn(Sl,ll),Vn(Kc,"polygonOffset",[0,0]),Pn(bd,wu),Pn(_d,im),Vn(mu,"sampleCoverage",[1,!1]),Pn(yu,xd),Vn(er,"stencilMask",-1),Vn(Ys,"stencilFunc",[Fh,0,-1]),Vn(Zc,"stencilOpSeparate",[Xi,Eu,Eu,Eu]),Vn(il,"stencilOpSeparate",[$n,Eu,Eu,Eu]),Pn(fi,Lh),Vn(ts,"scissor",[0,0,V.drawingBufferWidth,V.drawingBufferHeight]),Vn(Ro,Ro,[0,0,V.drawingBufferWidth,V.drawingBufferHeight]);var Dt={gl:V,context:Ut,strings:se,next:on,current:xt,draw:Ht,elements:et,buffer:vt,shader:ft,attributes:Rt.state,vao:Rt,uniforms:Lt,framebuffer:Nt,extensions:Ee,timer:Ct,isBufferArgs:Kl},Mt={primTypes:ni,compareFuncs:Ou,blendFuncs:$a,blendEquations:st,stencilOps:Bn,glTypes:Vi,orientationType:Js};le.optional(function(){Dt.isArrayLike=N}),Qt&&(Mt.backBuffer=[$n],Mt.drawBuffer=Dr(nt.maxDrawbuffers,function(pe){return pe===0?[0]:Dr(pe,function(re){return Bh+re})}));var St=0;function jn(){var pe=nl(),re=pe.link,Re=pe.global;pe.id=St++,pe.batchId="0";var Ve=re(Dt),Je=pe.shared={props:"a0"};Object.keys(Dt).forEach(function(Me){Je[Me]=Re.def(Ve,".",Me)}),le.optional(function(){pe.CHECK=re(le),pe.commandStr=le.guessCommand(),pe.command=re(pe.commandStr),pe.assert=function(Me,fe,We){Me("if(!(",fe,"))",this.CHECK,".commandRaise(",re(We),",",this.command,");")},Mt.invalidBlendCombinations=Yl});var De=pe.next={},Ce=pe.current={};Object.keys(At).forEach(function(Me){Array.isArray(xt[Me])&&(De[Me]=Re.def(Je.next,".",Me),Ce[Me]=Re.def(Je.current,".",Me))});var Le=pe.constants={};Object.keys(Mt).forEach(function(Me){Le[Me]=Re.def(JSON.stringify(Mt[Me]))}),pe.invoke=function(Me,fe){switch(fe.type){case vd:var We=["this",Je.context,Je.props,pe.batchId];return Me.def(re(fe.data),".call(",We.slice(0,Math.max(fe.data.length+1,4)),")");case Xl:return Me.def(Je.props,fe.data);case es:return Me.def(Je.context,fe.data);case md:return Me.def("this",fe.data);case rl:return fe.data.append(pe,Me),fe.data.ref;case qc:return fe.data.toString();case Yc:return fe.data.map(function(ze){return pe.invoke(Me,ze)})}},pe.attribCache={};var de={};return pe.scopeAttrib=function(Me){var fe=se.id(Me);if(fe in de)return de[fe];var We=Rt.scope[fe];We||(We=Rt.scope[fe]=new Ke);var ze=de[fe]=re(We);return ze},pe}function tr(pe){var re=pe.static,Re=pe.dynamic,Ve;if(gu in re){var Je=!!re[gu];Ve=Co(function(Ce,Le){return Je}),Ve.enable=Je}else if(gu in Re){var De=Re[gu];Ve=da(De,function(Ce,Le){return Ce.invoke(Le,De)})}return Ve}function dn(pe,re){var Re=pe.static,Ve=pe.dynamic;if(na in Re){var Je=Re[na];return Je?(Je=Nt.getFramebuffer(Je),le.command(Je,"invalid framebuffer object"),Co(function(Ce,Le){var de=Ce.link(Je),Me=Ce.shared;Le.set(Me.framebuffer,".next",de);var fe=Me.context;return Le.set(fe,"."+bu,de+".width"),Le.set(fe,"."+rs,de+".height"),de})):Co(function(Ce,Le){var de=Ce.shared;Le.set(de.framebuffer,".next","null");var Me=de.context;return Le.set(Me,"."+bu,Me+"."+tf),Le.set(Me,"."+rs,Me+"."+Od),"null"})}else if(na in Ve){var De=Ve[na];return da(De,function(Ce,Le){var de=Ce.invoke(Le,De),Me=Ce.shared,fe=Me.framebuffer,We=Le.def(fe,".getFramebuffer(",de,")");le.optional(function(){Ce.assert(Le,"!"+de+"||"+We,"invalid framebuffer object")}),Le.set(fe,".next",We);var ze=Me.context;return Le.set(ze,"."+bu,We+"?"+We+".width:"+ze+"."+tf),Le.set(ze,"."+rs,We+"?"+We+".height:"+ze+"."+Od),We})}else return null}function lr(pe,re,Re){var Ve=pe.static,Je=pe.dynamic;function De(de){if(de in Ve){var Me=Ve[de];le.commandType(Me,"object","invalid "+de,Re.commandStr);var fe=!0,We=Me.x|0,ze=Me.y|0,p,y;return"width"in Me?(p=Me.width|0,le.command(p>=0,"invalid "+de,Re.commandStr)):fe=!1,"height"in Me?(y=Me.height|0,le.command(y>=0,"invalid "+de,Re.commandStr)):fe=!1,new qi(!fe&&re&&re.thisDep,!fe&&re&&re.contextDep,!fe&&re&&re.propDep,function(X,ne){var he=X.shared.context,xe=p;"width"in Me||(xe=ne.def(he,".",bu,"-",We));var Fe=y;return"height"in Me||(Fe=ne.def(he,".",rs,"-",ze)),[We,ze,xe,Fe]})}else if(de in Je){var O=Je[de],L=da(O,function(X,ne){var he=X.invoke(ne,O);le.optional(function(){X.assert(ne,he+"&&typeof "+he+'==="object"',"invalid "+de)});var xe=X.shared.context,Fe=ne.def(he,".x|0"),mt=ne.def(he,".y|0"),wt=ne.def('"width" in ',he,"?",he,".width|0:","(",xe,".",bu,"-",Fe,")"),Wt=ne.def('"height" in ',he,"?",he,".height|0:","(",xe,".",rs,"-",mt,")");return le.optional(function(){X.assert(ne,wt+">=0&&"+Wt+">=0","invalid "+de)}),[Fe,mt,wt,Wt]});return re&&(L.thisDep=L.thisDep||re.thisDep,L.contextDep=L.contextDep||re.contextDep,L.propDep=L.propDep||re.propDep),L}else return re?new qi(re.thisDep,re.contextDep,re.propDep,function(X,ne){var he=X.shared.context;return[0,0,ne.def(he,".",bu),ne.def(he,".",rs)]}):null}var Ce=De(Ro);if(Ce){var Le=Ce;Ce=new qi(Ce.thisDep,Ce.contextDep,Ce.propDep,function(de,Me){var fe=Le.append(de,Me),We=de.shared.context;return Me.set(We,"."+Ed,fe[2]),Me.set(We,"."+xp,fe[3]),fe})}return{viewport:Ce,scissor_box:De(ts)}}function Wn(pe,re){var Re=pe.static,Ve=typeof Re[Fi]=="string"&&typeof Re[Jc]=="string";if(Ve){if(Object.keys(re.dynamic).length>0)return null;var Je=re.static,De=Object.keys(Je);if(De.length>0&&typeof Je[De[0]]=="number"){for(var Ce=[],Le=0;Le<De.length;++Le)le(typeof Je[De[Le]]=="number","must specify all vertex attribute locations when using vaos"),Ce.push([Je[De[Le]]|0,De[Le]]);return Ce}}return null}function or(pe,re,Re){var Ve=pe.static,Je=pe.dynamic;function De(fe){if(fe in Ve){var We=se.id(Ve[fe]);le.optional(function(){ft.shader(Np[fe],We,le.guessCommand())});var ze=Co(function(){return We});return ze.id=We,ze}else if(fe in Je){var p=Je[fe];return da(p,function(y,O){var L=y.invoke(O,p),X=O.def(y.shared.strings,".id(",L,")");return le.optional(function(){O(y.shared.shader,".shader(",Np[fe],",",X,",",y.command,");")}),X})}return null}var Ce=De(Fi),Le=De(Jc),de=null,Me;return ul(Ce)&&ul(Le)?(de=ft.program(Le.id,Ce.id,null,Re),Me=Co(function(fe,We){return fe.link(de)})):Me=new qi(Ce&&Ce.thisDep||Le&&Le.thisDep,Ce&&Ce.contextDep||Le&&Le.contextDep,Ce&&Ce.propDep||Le&&Le.propDep,function(fe,We){var ze=fe.shared.shader,p;Ce?p=Ce.append(fe,We):p=We.def(ze,".",Fi);var y;Le?y=Le.append(fe,We):y=We.def(ze,".",Jc);var O=ze+".program("+y+","+p;return le.optional(function(){O+=","+fe.command}),We.def(O+")")}),{frag:Ce,vert:Le,progVar:Me,program:de}}function br(pe,re){var Re=pe.static,Ve=pe.dynamic;function Je(){if(Wo in Re){var fe=Re[Wo];Kl(fe)?fe=et.getElements(et.create(fe,!0)):fe&&(fe=et.getElements(fe),le.command(fe,"invalid elements",re.commandStr));var We=Co(function(p,y){if(fe){var O=p.link(fe);return p.ELEMENTS=O,O}return p.ELEMENTS=null,null});return We.value=fe,We}else if(Wo in Ve){var ze=Ve[Wo];return da(ze,function(p,y){var O=p.shared,L=O.isBufferArgs,X=O.elements,ne=p.invoke(y,ze),he=y.def("null"),xe=y.def(L,"(",ne,")"),Fe=p.cond(xe).then(he,"=",X,".createStream(",ne,");").else(he,"=",X,".getElements(",ne,");");return le.optional(function(){p.assert(Fe.else,"!"+ne+"||"+he,"invalid elements")}),y.entry(Fe),y.exit(p.cond(xe).then(X,".destroyStream(",he,");")),p.ELEMENTS=he,he})}return null}var De=Je();function Ce(){if(xl in Re){var fe=Re[xl];return le.commandParameter(fe,ni,"invalid primitve",re.commandStr),Co(function(ze,p){return ni[fe]})}else if(xl in Ve){var We=Ve[xl];return da(We,function(ze,p){var y=ze.constants.primTypes,O=ze.invoke(p,We);return le.optional(function(){ze.assert(p,O+" in "+y,"invalid primitive, must be one of "+Object.keys(ni))}),p.def(y,"[",O,"]")})}else if(De)return ul(De)?De.value?Co(function(ze,p){return p.def(ze.ELEMENTS,".primType")}):Co(function(){return cf}):new qi(De.thisDep,De.contextDep,De.propDep,function(ze,p){var y=ze.ELEMENTS;return p.def(y,"?",y,".primType:",cf)});return null}function Le(fe,We){if(fe in Re){var ze=Re[fe]|0;return le.command(!We||ze>=0,"invalid "+fe,re.commandStr),Co(function(y,O){return We&&(y.OFFSET=ze),ze})}else if(fe in Ve){var p=Ve[fe];return da(p,function(y,O){var L=y.invoke(O,p);return We&&(y.OFFSET=L,le.optional(function(){y.assert(O,L+">=0","invalid "+fe)})),L})}else if(We&&De)return Co(function(y,O){return y.OFFSET="0",0});return null}var de=Le(wd,!0);function Me(){if(Al in Re){var fe=Re[Al]|0;return le.command(typeof fe=="number"&&fe>=0,"invalid vertex count",re.commandStr),Co(function(){return fe})}else if(Al in Ve){var We=Ve[Al];return da(We,function(y,O){var L=y.invoke(O,We);return le.optional(function(){y.assert(O,"typeof "+L+'==="number"&&'+L+">=0&&"+L+"===("+L+"|0)","invalid vertex count")}),L})}else if(De)if(ul(De)){if(De)return de?new qi(de.thisDep,de.contextDep,de.propDep,function(y,O){var L=O.def(y.ELEMENTS,".vertCount-",y.OFFSET);return le.optional(function(){y.assert(O,L+">=0","invalid vertex offset/element buffer too small")}),L}):Co(function(y,O){return O.def(y.ELEMENTS,".vertCount")});var ze=Co(function(){return-1});return le.optional(function(){ze.MISSING=!0}),ze}else{var p=new qi(De.thisDep||de.thisDep,De.contextDep||de.contextDep,De.propDep||de.propDep,function(y,O){var L=y.ELEMENTS;return y.OFFSET?O.def(L,"?",L,".vertCount-",y.OFFSET,":-1"):O.def(L,"?",L,".vertCount:-1")});return le.optional(function(){p.DYNAMIC=!0}),p}return null}return{elements:De,primitive:Ce(),count:Me(),instances:Le(kt,!1),offset:de}}function jo(pe,re){var Re=pe.static,Ve=pe.dynamic,Je={};return Tt.forEach(function(De){var Ce=Xt(De);function Le(de,Me){if(De in Re){var fe=de(Re[De]);Je[Ce]=Co(function(){return fe})}else if(De in Ve){var We=Ve[De];Je[Ce]=da(We,function(ze,p){return Me(ze,p,ze.invoke(p,We))})}}switch(De){case Ep:case zs:case Gs:case yu:case _p:case fi:case Sl:case bd:case _d:case wp:return Le(function(de){return le.commandType(de,"boolean",De,re.commandStr),de},function(de,Me,fe){return le.optional(function(){de.assert(Me,"typeof "+fe+'==="boolean"',"invalid flag "+De,de.commandStr)}),fe});case gd:return Le(function(de){return le.commandParameter(de,Ou,"invalid "+De,re.commandStr),Ou[de]},function(de,Me,fe){var We=de.constants.compareFuncs;return le.optional(function(){de.assert(Me,fe+" in "+We,"invalid "+De+", must be one of "+Object.keys(Ou))}),Me.def(We,"[",fe,"]")});case Ch:return Le(function(de){return le.command(N(de)&&de.length===2&&typeof de[0]=="number"&&typeof de[1]=="number"&&de[0]<=de[1],"depth range is 2d array",re.commandStr),de},function(de,Me,fe){le.optional(function(){de.assert(Me,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===2&&typeof "+fe+'[0]==="number"&&typeof '+fe+'[1]==="number"&&'+fe+"[0]<="+fe+"[1]","depth range must be a 2d array")});var We=Me.def("+",fe,"[0]"),ze=Me.def("+",fe,"[1]");return[We,ze]});case Xs:return Le(function(de){le.commandType(de,"object","blend.func",re.commandStr);var Me="srcRGB"in de?de.srcRGB:de.src,fe="srcAlpha"in de?de.srcAlpha:de.src,We="dstRGB"in de?de.dstRGB:de.dst,ze="dstAlpha"in de?de.dstAlpha:de.dst;return le.commandParameter(Me,$a,Ce+".srcRGB",re.commandStr),le.commandParameter(fe,$a,Ce+".srcAlpha",re.commandStr),le.commandParameter(We,$a,Ce+".dstRGB",re.commandStr),le.commandParameter(ze,$a,Ce+".dstAlpha",re.commandStr),le.command(Yl.indexOf(Me+", "+We)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Me+", "+We+")",re.commandStr),[$a[Me],$a[We],$a[fe],$a[ze]]},function(de,Me,fe){var We=de.constants.blendFuncs;le.optional(function(){de.assert(Me,fe+"&&typeof "+fe+'==="object"',"invalid blend func, must be an object")});function ze(he,xe){var Fe=Me.def('"',he,xe,'" in ',fe,"?",fe,".",he,xe,":",fe,".",he);return le.optional(function(){de.assert(Me,Fe+" in "+We,"invalid "+De+"."+he+xe+", must be one of "+Object.keys($a))}),Fe}var p=ze("src","RGB"),y=ze("dst","RGB");le.optional(function(){var he=de.constants.invalidBlendCombinations;de.assert(Me,he+".indexOf("+p+'+", "+'+y+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var O=Me.def(We,"[",p,"]"),L=Me.def(We,"[",ze("src","Alpha"),"]"),X=Me.def(We,"[",y,"]"),ne=Me.def(We,"[",ze("dst","Alpha"),"]");return[O,X,L,ne]});case yd:return Le(function(de){if(typeof de=="string")return le.commandParameter(de,st,"invalid "+De,re.commandStr),[st[de],st[de]];if(typeof de=="object")return le.commandParameter(de.rgb,st,De+".rgb",re.commandStr),le.commandParameter(de.alpha,st,De+".alpha",re.commandStr),[st[de.rgb],st[de.alpha]];le.commandRaise("invalid blend.equation",re.commandStr)},function(de,Me,fe){var We=de.constants.blendEquations,ze=Me.def(),p=Me.def(),y=de.cond("typeof ",fe,'==="string"');return le.optional(function(){function O(L,X,ne){de.assert(L,ne+" in "+We,"invalid "+X+", must be one of "+Object.keys(st))}O(y.then,De,fe),de.assert(y.else,fe+"&&typeof "+fe+'==="object"',"invalid "+De),O(y.else,De+".rgb",fe+".rgb"),O(y.else,De+".alpha",fe+".alpha")}),y.then(ze,"=",p,"=",We,"[",fe,"];"),y.else(ze,"=",We,"[",fe,".rgb];",p,"=",We,"[",fe,".alpha];"),Me(y),[ze,p]});case Hs:return Le(function(de){return le.command(N(de)&&de.length===4,"blend.color must be a 4d array",re.commandStr),Dr(4,function(Me){return+de[Me]})},function(de,Me,fe){return le.optional(function(){de.assert(Me,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","blend.color must be a 4d array")}),Dr(4,function(We){return Me.def("+",fe,"[",We,"]")})});case er:return Le(function(de){return le.commandType(de,"number",Ce,re.commandStr),de|0},function(de,Me,fe){return le.optional(function(){de.assert(Me,"typeof "+fe+'==="number"',"invalid stencil.mask")}),Me.def(fe,"|0")});case Ys:return Le(function(de){le.commandType(de,"object",Ce,re.commandStr);var Me=de.cmp||"keep",fe=de.ref||0,We="mask"in de?de.mask:-1;return le.commandParameter(Me,Ou,De+".cmp",re.commandStr),le.commandType(fe,"number",De+".ref",re.commandStr),le.commandType(We,"number",De+".mask",re.commandStr),[Ou[Me],fe,We]},function(de,Me,fe){var We=de.constants.compareFuncs;le.optional(function(){function O(){de.assert(Me,Array.prototype.join.call(arguments,""),"invalid stencil.func")}O(fe+"&&typeof ",fe,'==="object"'),O('!("cmp" in ',fe,")||(",fe,".cmp in ",We,")")});var ze=Me.def('"cmp" in ',fe,"?",We,"[",fe,".cmp]",":",Eu),p=Me.def(fe,".ref|0"),y=Me.def('"mask" in ',fe,"?",fe,".mask|0:-1");return[ze,p,y]});case Zc:case il:return Le(function(de){le.commandType(de,"object",Ce,re.commandStr);var Me=de.fail||"keep",fe=de.zfail||"keep",We=de.zpass||"keep";return le.commandParameter(Me,Bn,De+".fail",re.commandStr),le.commandParameter(fe,Bn,De+".zfail",re.commandStr),le.commandParameter(We,Bn,De+".zpass",re.commandStr),[De===il?$n:Xi,Bn[Me],Bn[fe],Bn[We]]},function(de,Me,fe){var We=de.constants.stencilOps;le.optional(function(){de.assert(Me,fe+"&&typeof "+fe+'==="object"',"invalid "+De)});function ze(p){return le.optional(function(){de.assert(Me,'!("'+p+'" in '+fe+")||("+fe+"."+p+" in "+We+")","invalid "+De+"."+p+", must be one of "+Object.keys(Bn))}),Me.def('"',p,'" in ',fe,"?",We,"[",fe,".",p,"]:",Eu)}return[De===il?$n:Xi,ze("fail"),ze("zfail"),ze("zpass")]});case Kc:return Le(function(de){le.commandType(de,"object",Ce,re.commandStr);var Me=de.factor|0,fe=de.units|0;return le.commandType(Me,"number",Ce+".factor",re.commandStr),le.commandType(fe,"number",Ce+".units",re.commandStr),[Me,fe]},function(de,Me,fe){le.optional(function(){de.assert(Me,fe+"&&typeof "+fe+'==="object"',"invalid "+De)});var We=Me.def(fe,".factor|0"),ze=Me.def(fe,".units|0");return[We,ze]});case Op:return Le(function(de){var Me=0;return de==="front"?Me=Xi:de==="back"&&(Me=$n),le.command(!!Me,Ce,re.commandStr),Me},function(de,Me,fe){return le.optional(function(){de.assert(Me,fe+'==="front"||'+fe+'==="back"',"invalid cull.face")}),Me.def(fe,'==="front"?',Xi,":",$n)});case qs:return Le(function(de){return le.command(typeof de=="number"&&de>=nt.lineWidthDims[0]&&de<=nt.lineWidthDims[1],"invalid line width, must be a positive number between "+nt.lineWidthDims[0]+" and "+nt.lineWidthDims[1],re.commandStr),de},function(de,Me,fe){return le.optional(function(){de.assert(Me,"typeof "+fe+'==="number"&&'+fe+">="+nt.lineWidthDims[0]+"&&"+fe+"<="+nt.lineWidthDims[1],"invalid line width")}),fe});case Sp:return Le(function(de){return le.commandParameter(de,Js,Ce,re.commandStr),Js[de]},function(de,Me,fe){return le.optional(function(){de.assert(Me,fe+'==="cw"||'+fe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Me.def(fe+'==="cw"?'+Td+":"+ff)});case ol:return Le(function(de){return le.command(N(de)&&de.length===4,"color.mask must be length 4 array",re.commandStr),de.map(function(Me){return!!Me})},function(de,Me,fe){return le.optional(function(){de.assert(Me,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","invalid color.mask")}),Dr(4,function(We){return"!!"+fe+"["+We+"]"})});case mu:return Le(function(de){le.command(typeof de=="object"&&de,Ce,re.commandStr);var Me="value"in de?de.value:1,fe=!!de.invert;return le.command(typeof Me=="number"&&Me>=0&&Me<=1,"sample.coverage.value must be a number between 0 and 1",re.commandStr),[Me,fe]},function(de,Me,fe){le.optional(function(){de.assert(Me,fe+"&&typeof "+fe+'==="object"',"invalid sample.coverage")});var We=Me.def('"value" in ',fe,"?+",fe,".value:1"),ze=Me.def("!!",fe,".invert");return[We,ze]})}}),Je}function Po(pe,re){var Re=pe.static,Ve=pe.dynamic,Je={};return Object.keys(Re).forEach(function(De){var Ce=Re[De],Le;if(typeof Ce=="number"||typeof Ce=="boolean")Le=Co(function(){return Ce});else if(typeof Ce=="function"){var de=Ce._reglType;de==="texture2d"||de==="textureCube"?Le=Co(function(Me){return Me.link(Ce)}):de==="framebuffer"||de==="framebufferCube"?(le.command(Ce.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',re.commandStr),Le=Co(function(Me){return Me.link(Ce.color[0])})):le.commandRaise('invalid data for uniform "'+De+'"',re.commandStr)}else N(Ce)?Le=Co(function(Me){var fe=Me.global.def("[",Dr(Ce.length,function(We){return le.command(typeof Ce[We]=="number"||typeof Ce[We]=="boolean","invalid uniform "+De,Me.commandStr),Ce[We]}),"]");return fe}):le.commandRaise('invalid or missing data for uniform "'+De+'"',re.commandStr);Le.value=Ce,Je[De]=Le}),Object.keys(Ve).forEach(function(De){var Ce=Ve[De];Je[De]=da(Ce,function(Le,de){return Le.invoke(de,Ce)})}),Je}function nr(pe,re){var Re=pe.static,Ve=pe.dynamic,Je={};return Object.keys(Re).forEach(function(De){var Ce=Re[De],Le=se.id(De),de=new Ke;if(Kl(Ce))de.state=Ju,de.buffer=vt.getBuffer(vt.create(Ce,Tl,!1,!0)),de.type=0;else{var Me=vt.getBuffer(Ce);if(Me)de.state=Ju,de.buffer=Me,de.type=0;else if(le.command(typeof Ce=="object"&&Ce,"invalid data for attribute "+De,re.commandStr),"constant"in Ce){var fe=Ce.constant;de.buffer="null",de.state=Qu,typeof fe=="number"?de.x=fe:(le.command(N(fe)&&fe.length>0&&fe.length<=4,"invalid constant for attribute "+De,re.commandStr),Hl.forEach(function(X,ne){ne<fe.length&&(de[X]=fe[ne])}))}else{Kl(Ce.buffer)?Me=vt.getBuffer(vt.create(Ce.buffer,Tl,!1,!0)):Me=vt.getBuffer(Ce.buffer),le.command(!!Me,'missing buffer for attribute "'+De+'"',re.commandStr);var We=Ce.offset|0;le.command(We>=0,'invalid offset for attribute "'+De+'"',re.commandStr);var ze=Ce.stride|0;le.command(ze>=0&&ze<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',re.commandStr);var p=Ce.size|0;le.command(!("size"in Ce)||p>0&&p<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',re.commandStr);var y=!!Ce.normalized,O=0;"type"in Ce&&(le.commandParameter(Ce.type,Vi,"invalid type for attribute "+De,re.commandStr),O=Vi[Ce.type]);var L=Ce.divisor|0;"divisor"in Ce&&(le.command(L===0||It,'cannot specify divisor for attribute "'+De+'", instancing not supported',re.commandStr),le.command(L>=0,'invalid divisor for attribute "'+De+'"',re.commandStr)),le.optional(function(){var X=re.commandStr,ne=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ce).forEach(function(he){le.command(ne.indexOf(he)>=0,'unknown parameter "'+he+'" for attribute pointer "'+De+'" (valid parameters are '+ne+")",X)})}),de.buffer=Me,de.state=Ju,de.size=p,de.normalized=y,de.type=O||Me.dtype,de.offset=We,de.stride=ze,de.divisor=L}}Je[De]=Co(function(X,ne){var he=X.attribCache;if(Le in he)return he[Le];var xe={isStream:!1};return Object.keys(de).forEach(function(Fe){xe[Fe]=de[Fe]}),de.buffer&&(xe.buffer=X.link(de.buffer),xe.type=xe.type||xe.buffer+".dtype"),he[Le]=xe,xe})}),Object.keys(Ve).forEach(function(De){var Ce=Ve[De];function Le(de,Me){var fe=de.invoke(Me,Ce),We=de.shared,ze=de.constants,p=We.isBufferArgs,y=We.buffer;le.optional(function(){de.assert(Me,fe+"&&(typeof "+fe+'==="object"||typeof '+fe+'==="function")&&('+p+"("+fe+")||"+y+".getBuffer("+fe+")||"+y+".getBuffer("+fe+".buffer)||"+p+"("+fe+'.buffer)||("constant" in '+fe+"&&(typeof "+fe+'.constant==="number"||'+We.isArrayLike+"("+fe+".constant))))",'invalid dynamic attribute "'+De+'"')});var O={isStream:Me.def(!1)},L=new Ke;L.state=Ju,Object.keys(L).forEach(function(xe){O[xe]=Me.def(""+L[xe])});var X=O.buffer,ne=O.type;Me("if(",p,"(",fe,")){",O.isStream,"=true;",X,"=",y,".createStream(",Tl,",",fe,");",ne,"=",X,".dtype;","}else{",X,"=",y,".getBuffer(",fe,");","if(",X,"){",ne,"=",X,".dtype;",'}else if("constant" in ',fe,"){",O.state,"=",Qu,";","if(typeof "+fe+'.constant === "number"){',O[Hl[0]],"=",fe,".constant;",Hl.slice(1).map(function(xe){return O[xe]}).join("="),"=0;","}else{",Hl.map(function(xe,Fe){return O[xe]+"="+fe+".constant.length>"+Fe+"?"+fe+".constant["+Fe+"]:0;"}).join(""),"}}else{","if(",p,"(",fe,".buffer)){",X,"=",y,".createStream(",Tl,",",fe,".buffer);","}else{",X,"=",y,".getBuffer(",fe,".buffer);","}",ne,'="type" in ',fe,"?",ze.glTypes,"[",fe,".type]:",X,".dtype;",O.normalized,"=!!",fe,".normalized;");function he(xe){Me(O[xe],"=",fe,".",xe,"|0;")}return he("size"),he("offset"),he("stride"),he("divisor"),Me("}}"),Me.exit("if(",O.isStream,"){",y,".destroyStream(",X,");","}"),O}Je[De]=da(Ce,Le)}),Je}function Zo(pe,re){var Re=pe.static,Ve=pe.dynamic;if(ns in Re){var Je=Re[ns];return Je!==null&&Rt.getVAO(Je)===null&&(Je=Rt.createVAO(Je)),Co(function(Ce){return Ce.link(Rt.getVAO(Je))})}else if(ns in Ve){var De=Ve[ns];return da(De,function(Ce,Le){var de=Ce.invoke(Le,De);return Le.def(Ce.shared.vao+".getVAO("+de+")")})}return null}function uo(pe){var re=pe.static,Re=pe.dynamic,Ve={};return Object.keys(re).forEach(function(Je){var De=re[Je];Ve[Je]=Co(function(Ce,Le){return typeof De=="number"||typeof De=="boolean"?""+De:Ce.link(De)})}),Object.keys(Re).forEach(function(Je){var De=Re[Je];Ve[Je]=da(De,function(Ce,Le){return Ce.invoke(Le,De)})}),Ve}function Io(pe,re,Re,Ve,Je){var De=pe.static,Ce=pe.dynamic;le.optional(function(){var he=[na,Jc,Fi,Wo,xl,wd,Al,kt,gu,ns].concat(Tt);function xe(Fe){Object.keys(Fe).forEach(function(mt){le.command(he.indexOf(mt)>=0,'unknown parameter "'+mt+'"',Je.commandStr)})}xe(De),xe(Ce)});var Le=Wn(pe,re),de=dn(pe),Me=lr(pe,de,Je),fe=br(pe,Je),We=jo(pe,Je),ze=or(pe,Je,Le);function p(he){var xe=Me[he];xe&&(We[he]=xe)}p(Ro),p(Xt(ts));var y=Object.keys(We).length>0,O={framebuffer:de,draw:fe,shader:ze,state:We,dirty:y,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(O.profile=tr(pe),O.uniforms=Po(Re,Je),O.drawVAO=O.scopeVAO=Zo(pe),!O.drawVAO&&ze.program&&!Le&&Ee.angle_instanced_arrays){var L=!0,X=ze.program.attributes.map(function(he){var xe=re.static[he];return L=L&&!!xe,xe});if(L&&X.length>0){var ne=Rt.getVAO(Rt.createVAO(X));O.drawVAO=new qi(null,null,null,function(he,xe){return he.link(ne)}),O.useVAO=!0}}return Le?O.useVAO=!0:O.attributes=nr(re,Je),O.context=uo(Ve),O}function zo(pe,re,Re){var Ve=pe.shared,Je=Ve.context,De=pe.scope();Object.keys(Re).forEach(function(Ce){re.save(Je,"."+Ce);var Le=Re[Ce],de=Le.append(pe,re);Array.isArray(de)?De(Je,".",Ce,"=[",de.join(),"];"):De(Je,".",Ce,"=",de,";")}),re(De)}function ii(pe,re,Re,Ve){var Je=pe.shared,De=Je.gl,Ce=Je.framebuffer,Le;Qt&&(Le=re.def(Je.extensions,".webgl_draw_buffers"));var de=pe.constants,Me=de.drawBuffer,fe=de.backBuffer,We;Re?We=Re.append(pe,re):We=re.def(Ce,".next"),Ve||re("if(",We,"!==",Ce,".cur){"),re("if(",We,"){",De,".bindFramebuffer(",df,",",We,".framebuffer);"),Qt&&re(Le,".drawBuffersWEBGL(",Me,"[",We,".colorAttachments.length]);"),re("}else{",De,".bindFramebuffer(",df,",null);"),Qt&&re(Le,".drawBuffersWEBGL(",fe,");"),re("}",Ce,".cur=",We,";"),Ve||re("}")}function di(pe,re,Re){var Ve=pe.shared,Je=Ve.gl,De=pe.current,Ce=pe.next,Le=Ve.current,de=Ve.next,Me=pe.cond(Le,".dirty");Tt.forEach(function(fe){var We=Xt(fe);if(!(We in Re.state)){var ze,p;if(We in Ce){ze=Ce[We],p=De[We];var y=Dr(xt[We].length,function(L){return Me.def(ze,"[",L,"]")});Me(pe.cond(y.map(function(L,X){return L+"!=="+p+"["+X+"]"}).join("||")).then(Je,".",At[We],"(",y,");",y.map(function(L,X){return p+"["+X+"]="+L}).join(";"),";"))}else{ze=Me.def(de,".",We);var O=pe.cond(ze,"!==",Le,".",We);Me(O),We in Gt?O(pe.cond(ze).then(Je,".enable(",Gt[We],");").else(Je,".disable(",Gt[We],");"),Le,".",We,"=",ze,";"):O(Je,".",At[We],"(",ze,");",Le,".",We,"=",ze,";")}}}),Object.keys(Re.state).length===0&&Me(Le,".dirty=false;"),re(Me)}function Jo(pe,re,Re,Ve){var Je=pe.shared,De=pe.current,Ce=Je.current,Le=Je.gl;pf(Object.keys(Re)).forEach(function(de){var Me=Re[de];if(!(Ve&&!Ve(Me))){var fe=Me.append(pe,re);if(Gt[de]){var We=Gt[de];ul(Me)?fe?re(Le,".enable(",We,");"):re(Le,".disable(",We,");"):re(pe.cond(fe).then(Le,".enable(",We,");").else(Le,".disable(",We,");")),re(Ce,".",de,"=",fe,";")}else if(N(fe)){var ze=De[de];re(Le,".",At[de],"(",fe,");",fe.map(function(p,y){return ze+"["+y+"]="+p}).join(";"),";")}else re(Le,".",At[de],"(",fe,");",Ce,".",de,"=",fe,";")}})}function vo(pe,re){It&&(pe.instancing=re.def(pe.shared.extensions,".angle_instanced_arrays"))}function Yn(pe,re,Re,Ve,Je){var De=pe.shared,Ce=pe.stats,Le=De.current,de=De.timer,Me=Re.profile;function fe(){return typeof performance>"u"?"Date.now()":"performance.now()"}var We,ze;function p(he){We=re.def(),he(We,"=",fe(),";"),typeof Je=="string"?he(Ce,".count+=",Je,";"):he(Ce,".count++;"),Ct&&(Ve?(ze=re.def(),he(ze,"=",de,".getNumPendingQueries();")):he(de,".beginQuery(",Ce,");"))}function y(he){he(Ce,".cpuTime+=",fe(),"-",We,";"),Ct&&(Ve?he(de,".pushScopeStats(",ze,",",de,".getNumPendingQueries(),",Ce,");"):he(de,".endQuery();"))}function O(he){var xe=re.def(Le,".profile");re(Le,".profile=",he,";"),re.exit(Le,".profile=",xe,";")}var L;if(Me){if(ul(Me)){Me.enable?(p(re),y(re.exit),O("true")):O("false");return}L=Me.append(pe,re),O(L)}else L=re.def(Le,".profile");var X=pe.block();p(X),re("if(",L,"){",X,"}");var ne=pe.block();y(ne),re.exit("if(",L,"){",ne,"}")}function pi(pe,re,Re,Ve,Je){var De=pe.shared;function Ce(de){switch(de){case rf:case af:case ql:return 2;case is:case lf:case bi:return 3;case of:case uf:case Ad:return 4;default:return 1}}function Le(de,Me,fe){var We=De.gl,ze=re.def(de,".location"),p=re.def(De.attributes,"[",ze,"]"),y=fe.state,O=fe.buffer,L=[fe.x,fe.y,fe.z,fe.w],X=["buffer","normalized","offset","stride"];function ne(){re("if(!",p,".buffer){",We,".enableVertexAttribArray(",ze,");}");var xe=fe.type,Fe;if(fe.size?Fe=re.def(fe.size,"||",Me):Fe=Me,re("if(",p,".type!==",xe,"||",p,".size!==",Fe,"||",X.map(function(wt){return p+"."+wt+"!=="+fe[wt]}).join("||"),"){",We,".bindBuffer(",Tl,",",O,".buffer);",We,".vertexAttribPointer(",[ze,Fe,xe,fe.normalized,fe.stride,fe.offset],");",p,".type=",xe,";",p,".size=",Fe,";",X.map(function(wt){return p+"."+wt+"="+fe[wt]+";"}).join(""),"}"),It){var mt=fe.divisor;re("if(",p,".divisor!==",mt,"){",pe.instancing,".vertexAttribDivisorANGLE(",[ze,mt],");",p,".divisor=",mt,";}")}}function he(){re("if(",p,".buffer){",We,".disableVertexAttribArray(",ze,");",p,".buffer=null;","}if(",Hl.map(function(xe,Fe){return p+"."+xe+"!=="+L[Fe]}).join("||"),"){",We,".vertexAttrib4f(",ze,",",L,");",Hl.map(function(xe,Fe){return p+"."+xe+"="+L[Fe]+";"}).join(""),"}")}y===Ju?ne():y===Qu?he():(re("if(",y,"===",Ju,"){"),ne(),re("}else{"),he(),re("}"))}Ve.forEach(function(de){var Me=de.name,fe=Re.attributes[Me],We;if(fe){if(!Je(fe))return;We=fe.append(pe,re)}else{if(!Je(Ua))return;var ze=pe.scopeAttrib(Me);le.optional(function(){pe.assert(re,ze+".state","missing attribute "+Me)}),We={},Object.keys(new Ke).forEach(function(p){We[p]=re.def(ze,".",p)})}Le(pe.link(de),Ce(de.info.type),We)})}function Tr(pe,re,Re,Ve,Je){for(var De=pe.shared,Ce=De.gl,Le,de=0;de<Ve.length;++de){var Me=Ve[de],fe=Me.name,We=Me.info.type,ze=Re.uniforms[fe],p=pe.link(Me),y=p+".location",O;if(ze){if(!Je(ze))continue;if(ul(ze)){var L=ze.value;if(le.command(L!==null&&typeof L<"u",'missing uniform "'+fe+'"',pe.commandStr),We===Ti||We===Mo){le.command(typeof L=="function"&&(We===Ti&&(L._reglType==="texture2d"||L._reglType==="framebuffer")||We===Mo&&(L._reglType==="textureCube"||L._reglType==="framebufferCube")),"invalid texture for uniform "+fe,pe.commandStr);var X=pe.link(L._texture||L.color[0]._texture);re(Ce,".uniform1i(",y,",",X+".bind());"),re.exit(X,".unbind();")}else if(We===sf||We===ls||We===Zs){le.optional(function(){le.command(N(L),"invalid matrix for uniform "+fe,pe.commandStr),le.command(We===sf&&L.length===4||We===ls&&L.length===9||We===Zs&&L.length===16,"invalid length for matrix uniform "+fe,pe.commandStr)});var ne=pe.global.def("new Float32Array(["+Array.prototype.slice.call(L)+"])"),he=2;We===ls?he=3:We===Zs&&(he=4),re(Ce,".uniformMatrix",he,"fv(",y,",false,",ne,");")}else{switch(We){case Eo:le.commandType(L,"number","uniform "+fe,pe.commandStr),Le="1f";break;case rf:le.command(N(L)&&L.length===2,"uniform "+fe,pe.commandStr),Le="2f";break;case is:le.command(N(L)&&L.length===3,"uniform "+fe,pe.commandStr),Le="3f";break;case of:le.command(N(L)&&L.length===4,"uniform "+fe,pe.commandStr),Le="4f";break;case as:le.commandType(L,"boolean","uniform "+fe,pe.commandStr),Le="1i";break;case Ks:le.commandType(L,"number","uniform "+fe,pe.commandStr),Le="1i";break;case ql:le.command(N(L)&&L.length===2,"uniform "+fe,pe.commandStr),Le="2i";break;case af:le.command(N(L)&&L.length===2,"uniform "+fe,pe.commandStr),Le="2i";break;case bi:le.command(N(L)&&L.length===3,"uniform "+fe,pe.commandStr),Le="3i";break;case lf:le.command(N(L)&&L.length===3,"uniform "+fe,pe.commandStr),Le="3i";break;case Ad:le.command(N(L)&&L.length===4,"uniform "+fe,pe.commandStr),Le="4i";break;case uf:le.command(N(L)&&L.length===4,"uniform "+fe,pe.commandStr),Le="4i";break}re(Ce,".uniform",Le,"(",y,",",N(L)?Array.prototype.slice.call(L):L,");")}continue}else O=ze.append(pe,re)}else{if(!Je(Ua))continue;O=re.def(De.uniforms,"[",se.id(fe),"]")}We===Ti?(le(!Array.isArray(O),"must specify a scalar prop for textures"),re("if(",O,"&&",O,'._reglType==="framebuffer"){',O,"=",O,".color[0];","}")):We===Mo&&(le(!Array.isArray(O),"must specify a scalar prop for cube maps"),re("if(",O,"&&",O,'._reglType==="framebufferCube"){',O,"=",O,".color[0];","}")),le.optional(function(){function Wt(jt,tn){pe.assert(re,jt,'bad data or missing for uniform "'+fe+'".  '+tn)}function wn(jt){le(!Array.isArray(O),"must not specify an array type for uniform"),Wt("typeof "+O+'==="'+jt+'"',"invalid type, expected "+jt)}function On(jt,tn){Array.isArray(O)?le(O.length===jt,"must have length "+jt):Wt(De.isArrayLike+"("+O+")&&"+O+".length==="+jt,"invalid vector, should have length "+jt,pe.commandStr)}function Gn(jt){le(!Array.isArray(O),"must not specify a value type"),Wt("typeof "+O+'==="function"&&'+O+'._reglType==="texture'+(jt===Sd?"2d":"Cube")+'"',"invalid texture type",pe.commandStr)}switch(We){case Ks:wn("number");break;case af:On(2);break;case lf:On(3);break;case uf:On(4);break;case Eo:wn("number");break;case rf:On(2);break;case is:On(3);break;case of:On(4);break;case as:wn("boolean");break;case ql:On(2);break;case bi:On(3);break;case Ad:On(4);break;case sf:On(4);break;case ls:On(9);break;case Zs:On(16);break;case Ti:Gn(Sd);break;case Mo:Gn(Dh);break}});var xe=1;switch(We){case Ti:case Mo:var Fe=re.def(O,"._texture");re(Ce,".uniform1i(",y,",",Fe,".bind());"),re.exit(Fe,".unbind();");continue;case Ks:case as:Le="1i";break;case af:case ql:Le="2i",xe=2;break;case lf:case bi:Le="3i",xe=3;break;case uf:case Ad:Le="4i",xe=4;break;case Eo:Le="1f";break;case rf:Le="2f",xe=2;break;case is:Le="3f",xe=3;break;case of:Le="4f",xe=4;break;case sf:Le="Matrix2fv";break;case ls:Le="Matrix3fv";break;case Zs:Le="Matrix4fv";break}if(re(Ce,".uniform",Le,"(",y,","),Le.charAt(0)==="M"){var mt=Math.pow(We-sf+2,2),wt=pe.global.def("new Float32Array(",mt,")");Array.isArray(O)?re("false,(",Dr(mt,function(Wt){return wt+"["+Wt+"]="+O[Wt]}),",",wt,")"):re("false,(Array.isArray(",O,")||",O," instanceof Float32Array)?",O,":(",Dr(mt,function(Wt){return wt+"["+Wt+"]="+O+"["+Wt+"]"}),",",wt,")")}else xe>1?re(Dr(xe,function(Wt){return Array.isArray(O)?O[Wt]:O+"["+Wt+"]"})):(le(!Array.isArray(O),"uniform value must not be an array"),re(O));re(");")}}function Dn(pe,re,Re,Ve){var Je=pe.shared,De=Je.gl,Ce=Je.draw,Le=Ve.draw;function de(){var Fe=Le.elements,mt,wt=re;return Fe?((Fe.contextDep&&Ve.contextDynamic||Fe.propDep)&&(wt=Re),mt=Fe.append(pe,wt)):mt=wt.def(Ce,".",Wo),mt&&wt("if("+mt+")"+De+".bindBuffer("+Tp+","+mt+".buffer.buffer);"),mt}function Me(){var Fe=Le.count,mt,wt=re;return Fe?((Fe.contextDep&&Ve.contextDynamic||Fe.propDep)&&(wt=Re),mt=Fe.append(pe,wt),le.optional(function(){Fe.MISSING&&pe.assert(re,"false","missing vertex count"),Fe.DYNAMIC&&pe.assert(wt,mt+">=0","missing vertex count")})):(mt=wt.def(Ce,".",Al),le.optional(function(){pe.assert(wt,mt+">=0","missing vertex count")})),mt}var fe=de();function We(Fe){var mt=Le[Fe];return mt?mt.contextDep&&Ve.contextDynamic||mt.propDep?mt.append(pe,Re):mt.append(pe,re):re.def(Ce,".",Fe)}var ze=We(xl),p=We(wd),y=Me();if(typeof y=="number"){if(y===0)return}else Re("if(",y,"){"),Re.exit("}");var O,L;It&&(O=We(kt),L=pe.instancing);var X=fe+".type",ne=Le.elements&&ul(Le.elements);function he(){function Fe(){Re(L,".drawElementsInstancedANGLE(",[ze,y,X,p+"<<(("+X+"-"+Zu+")>>1)",O],");")}function mt(){Re(L,".drawArraysInstancedANGLE(",[ze,p,y,O],");")}fe?ne?Fe():(Re("if(",fe,"){"),Fe(),Re("}else{"),mt(),Re("}")):mt()}function xe(){function Fe(){Re(De+".drawElements("+[ze,y,X,p+"<<(("+X+"-"+Zu+")>>1)"]+");")}function mt(){Re(De+".drawArrays("+[ze,p,y]+");")}fe?ne?Fe():(Re("if(",fe,"){"),Fe(),Re("}else{"),mt(),Re("}")):mt()}It&&(typeof O!="number"||O>=0)?typeof O=="string"?(Re("if(",O,">0){"),he(),Re("}else if(",O,"<0){"),xe(),Re("}")):he():xe()}function hr(pe,re,Re,Ve,Je){var De=jn(),Ce=De.proc("body",Je);return le.optional(function(){De.commandStr=re.commandStr,De.command=De.link(re.commandStr)}),It&&(De.instancing=Ce.def(De.shared.extensions,".angle_instanced_arrays")),pe(De,Ce,Re,Ve),De.compile().body}function Kn(pe,re,Re,Ve){vo(pe,re),Re.useVAO?Re.drawVAO?re(pe.shared.vao,".setVAO(",Re.drawVAO.append(pe,re),");"):re(pe.shared.vao,".setVAO(",pe.shared.vao,".targetVAO);"):(re(pe.shared.vao,".setVAO(null);"),pi(pe,re,Re,Ve.attributes,function(){return!0})),Tr(pe,re,Re,Ve.uniforms,function(){return!0}),Dn(pe,re,re,Re)}function mo(pe,re){var Re=pe.proc("draw",1);vo(pe,Re),zo(pe,Re,re.context),ii(pe,Re,re.framebuffer),di(pe,Re,re),Jo(pe,Re,re.state),Yn(pe,Re,re,!1,!0);var Ve=re.shader.progVar.append(pe,Re);if(Re(pe.shared.gl,".useProgram(",Ve,".program);"),re.shader.program)Kn(pe,Re,re,re.shader.program);else{Re(pe.shared.vao,".setVAO(null);");var Je=pe.global.def("{}"),De=Re.def(Ve,".id"),Ce=Re.def(Je,"[",De,"]");Re(pe.cond(Ce).then(Ce,".call(this,a0);").else(Ce,"=",Je,"[",De,"]=",pe.link(function(Le){return hr(Kn,pe,re,Le,1)}),"(",Ve,");",Ce,".call(this,a0);"))}Object.keys(re.state).length>0&&Re(pe.shared.current,".dirty=true;")}function Ml(pe,re,Re,Ve){pe.batchId="a1",vo(pe,re);function Je(){return!0}pi(pe,re,Re,Ve.attributes,Je),Tr(pe,re,Re,Ve.uniforms,Je),Dn(pe,re,re,Re)}function Oo(pe,re,Re,Ve){vo(pe,re);var Je=Re.contextDep,De=re.def(),Ce="a0",Le="a1",de=re.def();pe.shared.props=de,pe.batchId=De;var Me=pe.scope(),fe=pe.scope();re(Me.entry,"for(",De,"=0;",De,"<",Le,";++",De,"){",de,"=",Ce,"[",De,"];",fe,"}",Me.exit);function We(X){return X.contextDep&&Je||X.propDep}function ze(X){return!We(X)}if(Re.needsContext&&zo(pe,fe,Re.context),Re.needsFramebuffer&&ii(pe,fe,Re.framebuffer),Jo(pe,fe,Re.state,We),Re.profile&&We(Re.profile)&&Yn(pe,fe,Re,!1,!0),Ve)Re.useVAO?Re.drawVAO?We(Re.drawVAO)?fe(pe.shared.vao,".setVAO(",Re.drawVAO.append(pe,fe),");"):Me(pe.shared.vao,".setVAO(",Re.drawVAO.append(pe,Me),");"):Me(pe.shared.vao,".setVAO(",pe.shared.vao,".targetVAO);"):(Me(pe.shared.vao,".setVAO(null);"),pi(pe,Me,Re,Ve.attributes,ze),pi(pe,fe,Re,Ve.attributes,We)),Tr(pe,Me,Re,Ve.uniforms,ze),Tr(pe,fe,Re,Ve.uniforms,We),Dn(pe,Me,fe,Re);else{var p=pe.global.def("{}"),y=Re.shader.progVar.append(pe,fe),O=fe.def(y,".id"),L=fe.def(p,"[",O,"]");fe(pe.shared.gl,".useProgram(",y,".program);","if(!",L,"){",L,"=",p,"[",O,"]=",pe.link(function(X){return hr(Ml,pe,Re,X,2)}),"(",y,");}",L,".call(this,a0[",De,"],",De,");")}}function ve(pe,re){var Re=pe.proc("batch",2);pe.batchId="0",vo(pe,Re);var Ve=!1,Je=!0;Object.keys(re.context).forEach(function(p){Ve=Ve||re.context[p].propDep}),Ve||(zo(pe,Re,re.context),Je=!1);var De=re.framebuffer,Ce=!1;De?(De.propDep?Ve=Ce=!0:De.contextDep&&Ve&&(Ce=!0),Ce||ii(pe,Re,De)):ii(pe,Re,null),re.state.viewport&&re.state.viewport.propDep&&(Ve=!0);function Le(p){return p.contextDep&&Ve||p.propDep}di(pe,Re,re),Jo(pe,Re,re.state,function(p){return!Le(p)}),(!re.profile||!Le(re.profile))&&Yn(pe,Re,re,!1,"a1"),re.contextDep=Ve,re.needsContext=Je,re.needsFramebuffer=Ce;var de=re.shader.progVar;if(de.contextDep&&Ve||de.propDep)Oo(pe,Re,re,null);else{var Me=de.append(pe,Re);if(Re(pe.shared.gl,".useProgram(",Me,".program);"),re.shader.program)Oo(pe,Re,re,re.shader.program);else{Re(pe.shared.vao,".setVAO(null);");var fe=pe.global.def("{}"),We=Re.def(Me,".id"),ze=Re.def(fe,"[",We,"]");Re(pe.cond(ze).then(ze,".call(this,a0,a1);").else(ze,"=",fe,"[",We,"]=",pe.link(function(p){return hr(Oo,pe,re,p,2)}),"(",Me,");",ze,".call(this,a0,a1);"))}}Object.keys(re.state).length>0&&Re(pe.shared.current,".dirty=true;")}function ot(pe,re){var Re=pe.proc("scope",3);pe.batchId="a2";var Ve=pe.shared,Je=Ve.current;zo(pe,Re,re.context),re.framebuffer&&re.framebuffer.append(pe,Re),pf(Object.keys(re.state)).forEach(function(Ce){var Le=re.state[Ce],de=Le.append(pe,Re);N(de)?de.forEach(function(Me,fe){Re.set(pe.next[Ce],"["+fe+"]",Me)}):Re.set(Ve.next,"."+Ce,de)}),Yn(pe,Re,re,!0,!0),[Wo,wd,Al,kt,xl].forEach(function(Ce){var Le=re.draw[Ce];Le&&Re.set(Ve.draw,"."+Ce,""+Le.append(pe,Re))}),Object.keys(re.uniforms).forEach(function(Ce){var Le=re.uniforms[Ce].append(pe,Re);Array.isArray(Le)&&(Le="["+Le.join()+"]"),Re.set(Ve.uniforms,"["+se.id(Ce)+"]",Le)}),Object.keys(re.attributes).forEach(function(Ce){var Le=re.attributes[Ce].append(pe,Re),de=pe.scopeAttrib(Ce);Object.keys(new Ke).forEach(function(Me){Re.set(de,"."+Me,Le[Me])})}),re.scopeVAO&&Re.set(Ve.vao,".targetVAO",re.scopeVAO.append(pe,Re));function De(Ce){var Le=re.shader[Ce];Le&&Re.set(Ve.shader,"."+Ce,Le.append(pe,Re))}De(Jc),De(Fi),Object.keys(re.state).length>0&&(Re(Je,".dirty=true;"),Re.exit(Je,".dirty=true;")),Re("a1(",pe.shared.context,",a0,",pe.batchId,");")}function tt(pe){if(!(typeof pe!="object"||N(pe))){for(var re=Object.keys(pe),Re=0;Re<re.length;++Re)if(Zt.isDynamic(pe[re[Re]]))return!0;return!1}}function sn(pe,re,Re){var Ve=re.static[Re];if(!Ve||!tt(Ve))return;var Je=pe.global,De=Object.keys(Ve),Ce=!1,Le=!1,de=!1,Me=pe.global.def("{}");De.forEach(function(We){var ze=Ve[We];if(Zt.isDynamic(ze)){typeof ze=="function"&&(ze=Ve[We]=Zt.unbox(ze));var p=da(ze,null);Ce=Ce||p.thisDep,de=de||p.propDep,Le=Le||p.contextDep}else{switch(Je(Me,".",We,"="),typeof ze){case"number":Je(ze);break;case"string":Je('"',ze,'"');break;case"object":Array.isArray(ze)&&Je("[",ze.join(),"]");break;default:Je(pe.link(ze));break}Je(";")}});function fe(We,ze){De.forEach(function(p){var y=Ve[p];if(Zt.isDynamic(y)){var O=We.invoke(ze,y);ze(Me,".",p,"=",O,";")}})}re.dynamic[Re]=new Zt.DynamicVariable(rl,{thisDep:Ce,contextDep:Le,propDep:de,ref:Me,append:fe}),delete re.static[Re]}function dr(pe,re,Re,Ve,Je){var De=jn();De.stats=De.link(Je),Object.keys(re.static).forEach(function(Le){sn(De,re,Le)}),Ap.forEach(function(Le){sn(De,pe,Le)});var Ce=Io(pe,re,Re,Ve,De);return mo(De,Ce),ot(De,Ce),ve(De,Ce),a(De.compile(),{destroy:function(){Ce.shader.program.destroy()}})}return{next:on,current:xt,procs:function(){var pe=jn(),re=pe.proc("poll"),Re=pe.proc("refresh"),Ve=pe.block();re(Ve),Re(Ve);var Je=pe.shared,De=Je.gl,Ce=Je.next,Le=Je.current;Ve(Le,".dirty=false;"),ii(pe,re),ii(pe,Re,null,!0);var de;It&&(de=pe.link(It)),Ee.oes_vertex_array_object&&Re(pe.link(Ee.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Me=0;Me<nt.maxAttributes;++Me){var fe=Re.def(Je.attributes,"[",Me,"]"),We=pe.cond(fe,".buffer");We.then(De,".enableVertexAttribArray(",Me,");",De,".bindBuffer(",Tl,",",fe,".buffer.buffer);",De,".vertexAttribPointer(",Me,",",fe,".size,",fe,".type,",fe,".normalized,",fe,".stride,",fe,".offset);").else(De,".disableVertexAttribArray(",Me,");",De,".vertexAttrib4f(",Me,",",fe,".x,",fe,".y,",fe,".z,",fe,".w);",fe,".buffer=null;"),Re(We),It&&Re(de,".vertexAttribDivisorANGLE(",Me,",",fe,".divisor);")}return Re(pe.shared.vao,".currentVAO=null;",pe.shared.vao,".setVAO(",pe.shared.vao,".targetVAO);"),Object.keys(Gt).forEach(function(ze){var p=Gt[ze],y=Ve.def(Ce,".",ze),O=pe.block();O("if(",y,"){",De,".enable(",p,")}else{",De,".disable(",p,")}",Le,".",ze,"=",y,";"),Re(O),re("if(",y,"!==",Le,".",ze,"){",O,"}")}),Object.keys(At).forEach(function(ze){var p=At[ze],y=xt[ze],O,L,X=pe.block();if(X(De,".",p,"("),N(y)){var ne=y.length;O=pe.global.def(Ce,".",ze),L=pe.global.def(Le,".",ze),X(Dr(ne,function(he){return O+"["+he+"]"}),");",Dr(ne,function(he){return L+"["+he+"]="+O+"["+he+"];"}).join("")),re("if(",Dr(ne,function(he){return O+"["+he+"]!=="+L+"["+he+"]"}).join("||"),"){",X,"}")}else O=Ve.def(Ce,".",ze),L=Ve.def(Le,".",ze),X(O,");",Le,".",ze,"=",O,";"),re("if(",O,"!==",L,"){",X,"}");Re(X)}),pe.compile()}(),compile:dr}}function hf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ss=34918,gr=34919,Vh=35007,pa=function(V,se){if(!se.ext_disjoint_timer_query)return null;var Ee=[];function nt(){return Ee.pop()||se.ext_disjoint_timer_query.createQueryEXT()}function vt(It){Ee.push(It)}var et=[];function pt(It){var Qt=nt();se.ext_disjoint_timer_query.beginQueryEXT(Vh,Qt),et.push(Qt),Ct(et.length-1,et.length,It)}function Nt(){se.ext_disjoint_timer_query.endQueryEXT(Vh)}function Lt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Rt=[];function ft(){return Rt.pop()||new Lt}function Ht(It){Rt.push(It)}var Ut=[];function Ct(It,Qt,xt){var on=ft();on.startQueryIndex=It,on.endQueryIndex=Qt,on.sum=0,on.stats=xt,Ut.push(on)}var Et=[],Ke=[];function st(){var It,Qt,xt=et.length;if(xt!==0){Ke.length=Math.max(Ke.length,xt+1),Et.length=Math.max(Et.length,xt+1),Et[0]=0,Ke[0]=0;var on=0;for(It=0,Qt=0;Qt<et.length;++Qt){var Tt=et[Qt];se.ext_disjoint_timer_query.getQueryObjectEXT(Tt,gr)?(on+=se.ext_disjoint_timer_query.getQueryObjectEXT(Tt,ss),vt(Tt)):et[It++]=Tt,Et[Qt+1]=on,Ke[Qt+1]=It}for(et.length=It,It=0,Qt=0;Qt<Ut.length;++Qt){var Gt=Ut[Qt],At=Gt.startQueryIndex,Xt=Gt.endQueryIndex;Gt.sum+=Et[Xt]-Et[At];var Pn=Ke[At],Vn=Ke[Xt];Vn===Pn?(Gt.stats.gpuTime+=Gt.sum/1e6,Ht(Gt)):(Gt.startQueryIndex=Pn,Gt.endQueryIndex=Vn,Ut[It++]=Gt)}Ut.length=It}}return{beginQuery:pt,endQuery:Nt,pushScopeStats:Ct,update:st,getNumPendingQueries:function(){return et.length},clear:function(){Ee.push.apply(Ee,et);for(var It=0;It<Ee.length;It++)se.ext_disjoint_timer_query.deleteQueryEXT(Ee[It]);et.length=0,Ee.length=0},restore:function(){et.length=0,Ee.length=0}}},ko=16384,ra=256,Rp=1024,Mi=34962,Aa="webglcontextlost",cs="webglcontextrestored",vf=1,Do=2,Go=3;function kd(V,se){for(var Ee=0;Ee<V.length;++Ee)if(V[Ee]===se)return Ee;return-1}function Cp(V){var se=ar(V);if(!se)return null;var Ee=se.gl,nt=Ee.getContextAttributes(),vt=Ee.isContextLost(),et=eo(Ee,se);if(!et)return null;var pt=li(),Nt=hf(),Lt=et.extensions,Rt=pa(Ee,Lt),ft=Er(),Ht=Ee.drawingBufferWidth,Ut=Ee.drawingBufferHeight,Ct={tick:0,time:0,viewportWidth:Ht,viewportHeight:Ut,framebufferWidth:Ht,framebufferHeight:Ut,drawingBufferWidth:Ht,drawingBufferHeight:Ut,pixelRatio:se.pixelRatio},Et={},Ke={elements:null,primitive:4,count:-1,offset:0,instances:-1},st=Pc(Ee,Lt),It=_a(Ee,Nt,se,xt),Qt=dd(Ee,Lt,st,Nt,It);function xt(Dn){return Qt.destroyBuffer(Dn)}var on=mn(Ee,Lt,It,Nt),Tt=hd(Ee,pt,Nt,se),Gt=xr(Ee,Lt,st,function(){Pn.procs.poll()},Ct,Nt,se),At=Vs(Ee,Lt,st,Nt,se),Xt=cd(Ee,Lt,st,Gt,At,Nt),Pn=am(Ee,pt,Lt,st,It,on,Gt,Xt,Et,Qt,Tt,Ke,Ct,Rt,se),Vn=Rh(Ee,Xt,Pn.procs.poll,Ct,nt,Lt,st),Dt=Pn.next,Mt=Ee.canvas,St=[],jn=[],tr=[],dn=[se.onDestroy],lr=null;function Wn(){if(St.length===0){Rt&&Rt.update(),lr=null;return}lr=Rn.next(Wn),Jo();for(var Dn=St.length-1;Dn>=0;--Dn){var hr=St[Dn];hr&&hr(Ct,null,0)}Ee.flush(),Rt&&Rt.update()}function or(){!lr&&St.length>0&&(lr=Rn.next(Wn))}function br(){lr&&(Rn.cancel(Wn),lr=null)}function jo(Dn){Dn.preventDefault(),vt=!0,br(),jn.forEach(function(hr){hr()})}function Po(Dn){Ee.getError(),vt=!1,et.restore(),Tt.restore(),It.restore(),Gt.restore(),At.restore(),Xt.restore(),Qt.restore(),Rt&&Rt.restore(),Pn.procs.refresh(),or(),tr.forEach(function(hr){hr()})}Mt&&(Mt.addEventListener(Aa,jo,!1),Mt.addEventListener(cs,Po,!1));function nr(){St.length=0,br(),Mt&&(Mt.removeEventListener(Aa,jo),Mt.removeEventListener(cs,Po)),Tt.clear(),Xt.clear(),At.clear(),Gt.clear(),on.clear(),It.clear(),Qt.clear(),Rt&&Rt.clear(),dn.forEach(function(Dn){Dn()})}function Zo(Dn){le(!!Dn,"invalid args to regl({...})"),le.type(Dn,"object","invalid args to regl({...})");function hr(Je){var De=a({},Je);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Ce(Le){if(Le in De){var de=De[Le];delete De[Le],Object.keys(de).forEach(function(Me){De[Le+"."+Me]=de[Me]})}}return Ce("blend"),Ce("depth"),Ce("cull"),Ce("stencil"),Ce("polygonOffset"),Ce("scissor"),Ce("sample"),"vao"in Je&&(De.vao=Je.vao),De}function Kn(Je,De){var Ce={},Le={};return Object.keys(Je).forEach(function(de){var Me=Je[de];if(Zt.isDynamic(Me)){Le[de]=Zt.unbox(Me,de);return}else if(De&&Array.isArray(Me)){for(var fe=0;fe<Me.length;++fe)if(Zt.isDynamic(Me[fe])){Le[de]=Zt.unbox(Me,de);return}}Ce[de]=Me}),{dynamic:Le,static:Ce}}var mo=Kn(Dn.context||{},!0),Ml=Kn(Dn.uniforms||{},!0),Oo=Kn(Dn.attributes||{},!1),ve=Kn(hr(Dn),!1),ot={gpuTime:0,cpuTime:0,count:0},tt=Pn.compile(ve,Oo,Ml,mo,ot),sn=tt.draw,dr=tt.batch,pe=tt.scope,re=[];function Re(Je){for(;re.length<Je;)re.push(null);return re}function Ve(Je,De){var Ce;if(vt&&le.raise("context lost"),typeof Je=="function")return pe.call(this,null,Je,0);if(typeof De=="function")if(typeof Je=="number")for(Ce=0;Ce<Je;++Ce)pe.call(this,null,De,Ce);else if(Array.isArray(Je))for(Ce=0;Ce<Je.length;++Ce)pe.call(this,Je[Ce],De,Ce);else return pe.call(this,Je,De,0);else if(typeof Je=="number"){if(Je>0)return dr.call(this,Re(Je|0),Je|0)}else if(Array.isArray(Je)){if(Je.length)return dr.call(this,Je,Je.length)}else return sn.call(this,Je)}return a(Ve,{stats:ot,destroy:function(){tt.destroy()}})}var uo=Xt.setFBO=Zo({framebuffer:Zt.define.call(null,vf,"framebuffer")});function Io(Dn,hr){var Kn=0;Pn.procs.poll();var mo=hr.color;mo&&(Ee.clearColor(+mo[0]||0,+mo[1]||0,+mo[2]||0,+mo[3]||0),Kn|=ko),"depth"in hr&&(Ee.clearDepth(+hr.depth),Kn|=ra),"stencil"in hr&&(Ee.clearStencil(hr.stencil|0),Kn|=Rp),le(!!Kn,"called regl.clear with no buffer specified"),Ee.clear(Kn)}function zo(Dn){if(le(typeof Dn=="object"&&Dn,"regl.clear() takes an object as input"),"framebuffer"in Dn)if(Dn.framebuffer&&Dn.framebuffer_reglType==="framebufferCube")for(var hr=0;hr<6;++hr)uo(a({framebuffer:Dn.framebuffer.faces[hr]},Dn),Io);else uo(Dn,Io);else Io(null,Dn)}function ii(Dn){le.type(Dn,"function","regl.frame() callback must be a function"),St.push(Dn);function hr(){var Kn=kd(St,Dn);le(Kn>=0,"cannot cancel a frame twice");function mo(){var Ml=kd(St,mo);St[Ml]=St[St.length-1],St.length-=1,St.length<=0&&br()}St[Kn]=mo}return or(),{cancel:hr}}function di(){var Dn=Dt.viewport,hr=Dt.scissor_box;Dn[0]=Dn[1]=hr[0]=hr[1]=0,Ct.viewportWidth=Ct.framebufferWidth=Ct.drawingBufferWidth=Dn[2]=hr[2]=Ee.drawingBufferWidth,Ct.viewportHeight=Ct.framebufferHeight=Ct.drawingBufferHeight=Dn[3]=hr[3]=Ee.drawingBufferHeight}function Jo(){Ct.tick+=1,Ct.time=Yn(),di(),Pn.procs.poll()}function vo(){Gt.refresh(),di(),Pn.procs.refresh(),Rt&&Rt.update()}function Yn(){return(Er()-ft)/1e3}vo();function pi(Dn,hr){le.type(hr,"function","listener callback must be a function");var Kn;switch(Dn){case"frame":return ii(hr);case"lost":Kn=jn;break;case"restore":Kn=tr;break;case"destroy":Kn=dn;break;default:le.raise("invalid event, must be one of frame,lost,restore,destroy")}return Kn.push(hr),{cancel:function(){for(var mo=0;mo<Kn.length;++mo)if(Kn[mo]===hr){Kn[mo]=Kn[Kn.length-1],Kn.pop();return}}}}var Tr=a(Zo,{clear:zo,prop:Zt.define.bind(null,vf),context:Zt.define.bind(null,Do),this:Zt.define.bind(null,Go),draw:Zo({}),buffer:function(Dn){return It.create(Dn,Mi,!1,!1)},elements:function(Dn){return on.create(Dn,!1)},texture:Gt.create2D,cube:Gt.createCube,renderbuffer:At.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:Qt.createVAO,attributes:nt,frame:ii,on:pi,limits:st,hasExtension:function(Dn){return st.extensions.indexOf(Dn.toLowerCase())>=0},read:Vn,destroy:nr,_gl:Ee,_refresh:vo,poll:function(){Jo(),Rt&&Rt.update()},now:Yn,stats:Nt});return se.onDone(null,Tr),Tr}return Cp})}(Ng)),Ng.exports}one();var Mf,Om,kf,Mu,Sm,Ud,xm,yg,uc,Hp,ka,sc,cc,gg;Mf={},cn(Mf,un.POINTS,"points"),cn(Mf,un.LINES,"lines"),cn(Mf,un.LINE_LOOP,"line loop"),cn(Mf,un.LINE_STRIP,"line strip"),cn(Mf,un.TRIANGLES,"triangles"),cn(Mf,un.TRIANGLE_FAN,"triangle fan"),cn(Mf,un.TRIANGLE_STRIP,"triangle strip");Om={},cn(Om,un.STATIC_DRAW,"static"),cn(Om,un.DYNAMIC_DRAW,"dynamic"),cn(Om,un.STREAM_DRAW,"stream");kf={},cn(kf,un.BYTE,"int8"),cn(kf,un.UNSIGNED_INT,"int16"),cn(kf,un.INT,"int32"),cn(kf,un.UNSIGNED_BYTE,"uint8"),cn(kf,un.UNSIGNED_SHORT,"uint16"),cn(kf,un.UNSIGNED_INT,"uint32"),cn(kf,un.FLOAT,"float");Mu={},cn(Mu,un.ALPHA,"alpha"),cn(Mu,un.LUMINANCE,"luminance"),cn(Mu,un.LUMINANCE_ALPHA,"luminance alpha"),cn(Mu,un.RGB,"rgb"),cn(Mu,un.RGBA,"rgba"),cn(Mu,un.RGBA4,"rgba4"),cn(Mu,un.RGB5_A1,"rgb5 a1"),cn(Mu,un.RGB565,"rgb565"),cn(Mu,un.DEPTH_COMPONENT,"depth"),cn(Mu,un.DEPTH_STENCIL,"depth stencil");Sm={},cn(Sm,un.DONT_CARE,"dont care"),cn(Sm,un.NICEST,"nice"),cn(Sm,un.FASTEST,"fast");Ud={},cn(Ud,un.NEAREST,"nearest"),cn(Ud,un.LINEAR,"linear"),cn(Ud,un.LINEAR_MIPMAP_LINEAR,"mipmap"),cn(Ud,un.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),cn(Ud,un.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),cn(Ud,un.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");xm={},cn(xm,un.REPEAT,"repeat"),cn(xm,un.CLAMP_TO_EDGE,"clamp"),cn(xm,un.MIRRORED_REPEAT,"mirror");yg={},cn(yg,un.NONE,"none"),cn(yg,un.BROWSER_DEFAULT_WEBGL,"browser");uc={},cn(uc,un.NEVER,"never"),cn(uc,un.ALWAYS,"always"),cn(uc,un.LESS,"less"),cn(uc,un.LEQUAL,"lequal"),cn(uc,un.GREATER,"greater"),cn(uc,un.GEQUAL,"gequal"),cn(uc,un.EQUAL,"equal"),cn(uc,un.NOTEQUAL,"notequal");Hp={},cn(Hp,un.FUNC_ADD,"add"),cn(Hp,un.MIN_EXT,"min"),cn(Hp,un.MAX_EXT,"max"),cn(Hp,un.FUNC_SUBTRACT,"subtract"),cn(Hp,un.FUNC_REVERSE_SUBTRACT,"reverse subtract");ka={},cn(ka,un.ZERO,"zero"),cn(ka,un.ONE,"one"),cn(ka,un.SRC_COLOR,"src color"),cn(ka,un.ONE_MINUS_SRC_COLOR,"one minus src color"),cn(ka,un.SRC_ALPHA,"src alpha"),cn(ka,un.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),cn(ka,un.DST_COLOR,"dst color"),cn(ka,un.ONE_MINUS_DST_COLOR,"one minus dst color"),cn(ka,un.DST_ALPHA,"dst alpha"),cn(ka,un.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),cn(ka,un.CONSTANT_COLOR,"constant color"),cn(ka,un.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),cn(ka,un.CONSTANT_ALPHA,"constant alpha"),cn(ka,un.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),cn(ka,un.SRC_ALPHA_SATURATE,"src alpha saturate");sc={},cn(sc,un.NEVER,"never"),cn(sc,un.ALWAYS,"always"),cn(sc,un.LESS,"less"),cn(sc,un.LEQUAL,"lequal"),cn(sc,un.GREATER,"greater"),cn(sc,un.GEQUAL,"gequal"),cn(sc,un.EQUAL,"equal"),cn(sc,un.NOTEQUAL,"notequal");cc={},cn(cc,un.ZERO,"zero"),cn(cc,un.KEEP,"keep"),cn(cc,un.REPLACE,"replace"),cn(cc,un.INVERT,"invert"),cn(cc,un.INCR,"increment"),cn(cc,un.DECR,"decrement"),cn(cc,un.INCR_WRAP,"increment wrap"),cn(cc,un.DECR_WRAP,"decrement wrap");gg={},cn(gg,un.FRONT,"front"),cn(gg,un.BACK,"back");var cw,NT;function ine(){if(NT)return cw;NT=1;function e(t,n){return function(a){return t(n(a))}}return cw=e,cw}var fw,RT;function ane(){if(RT)return fw;RT=1;var e=ine(),t=e(Object.getPrototypeOf,Object);return fw=t,fw}var dw,CT;function lne(){if(CT)return dw;CT=1;var e=oE(),t=ane(),n=iE(),a="[object Object]",r=Function.prototype,u=Object.prototype,c=r.toString,v=u.hasOwnProperty,f=c.call(Object);function g(b){if(!n(b)||e(b)!=a)return!1;var _=t(b);if(_===null)return!0;var x=v.call(_,"constructor")&&_.constructor;return typeof x=="function"&&x instanceof x&&c.call(x)==f}return dw=g,dw}lne();class XN{constructor(){Ma(this,"lf");Ma(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let u=40,c=40;r>20&&(u=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:u,ranksep:c,begin:[120,120],...t},(g=new vJ(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:a.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:_}=b;_.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}Ma(XN,"pluginName","dagre");const une=rr({name:"WorkFlow"}),sne=rr({...une,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":lV,"./nodes/application-node/index.ts":vV,"./nodes/base-node/index.ts":QW,"./nodes/condition-node/index.ts":cG,"./nodes/database-node/index.ts":EG,"./nodes/document-extract-node/index.ts":TG,"./nodes/form-node/index.ts":XG,"./nodes/http-node/index.ts":az,"./nodes/image-generate/index.ts":gz,"./nodes/image-understand/index.ts":kz,"./nodes/intent-classify-node/index.ts":Fz,"./nodes/mcp-node/index.ts":iH,"./nodes/parameter-extraction-node/index.ts":wH,"./nodes/question-node/index.ts":NH,"./nodes/reply-node/index.ts":FH,"./nodes/reranker-node/index.ts":JH,"./nodes/search-document-node/index.ts":hX,"./nodes/search-knowledge-node/index.ts":xX,"./nodes/speech-to-text-node/index.ts":LX,"./nodes/start-node/index.ts":zX,"./nodes/text-to-speech-node/index.ts":eq,"./nodes/tool-lib-node/index.ts":pq,"./nodes/tool-node/index.ts":kq,"./nodes/user-select-node/index.ts":Fq,"./nodes/variable-aggregation-node/index.ts":Yq,"./nodes/variable-assign-node/index.ts":rY,"./nodes/variable-splitting/index.ts":SY}),a=rV(),r=Ge(""),u=e,c={nodes:[..._I]};Zn({get:()=>u.data?u.data:c,set:S=>S});const v=Ge();Hr(()=>{g()});const f=S=>{v.value.render(S)},g=S=>{const E=document.querySelector("#container");E&&(v.value=new nB({plugins:[XN],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:E}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),RY(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(D=>n[D].default),PY]),v.value.setDefaultEdgeType("app-edge"),v.value.render(S||{}),v.value.graphModel.eventCenter.on("delete_edge",D=>{D.forEach(I=>{v.value.deleteEdge(I)})}),v.value.graphModel.eventCenter.on("anchor:drop",D=>{D.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var D;(D=v.value)==null||D.fitView()},500))};return t({onmousedown:S=>{S.type&&v.value.dnd.startDrag({type:S.type,properties:{...S.properties}}),S.callback&&S.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(S=>{var E;return(E=S==null?void 0:S.validate)==null?void 0:E.call(S)})),getGraphData:()=>v.value.getGraphData(),addNode:S=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:E,virtualRectCenterPositionY:D}=v.value.graphModel.getVirtualRectSize(),I=v.value.graphModel.addNode({type:S.type,properties:S.properties,x:E,y:D-v.value.graphModel.height/2});I.isSelected=!0,I.isHovered=!0,v.value.toFront(I.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:f}),(S,E)=>(Oe(),en(Or,null,[E[0]||(E[0]=ee("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(Oe(),at(NY,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):kn("",!0),k(sr(a),{"flow-id":r.value},null,8,["flow-id"])],64))}}),cne={class:"workflow-publish-history border-l white-bg"},fne={class:"border-b p-16-24"},dne={class:"list-height pt-0"},pne={class:"p-8 pt-0"},hne={class:"flex-between"},vne={style:{"max-width":"80%"}},mne={class:"text-center"},yne=rr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=aa(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=t,c=Ge(!1),v=Ge([]),f=Ge("");function g(E){f.value=E.id}function b(E){u("click",E)}function _(E){u("refreshVersion",E)}function x(E){E.writeStatus=!0}function A(E){E.writeStatus=!1}function M(E,D){if(E){const I={name:E};So({type:"workflowVersion",systemType:r.value}).putWorkFlowVersion(a,D.id,I,c).then(()=>{zd(Ot("common.modifySuccess")),D.writeStatus=!1,S()})}else mi(Ot("views.applicationWorkflow.tip.nameMessage"))}function S(){So({type:"workflowVersion",systemType:r.value}).getWorkFlowVersion(a,c).then(E=>{v.value=E.data})}return Hr(()=>{S()}),(E,D)=>{const I=J("ReadWrite"),B=J("el-tag"),$=J("UserFilled"),j=J("el-icon"),U=J("el-avatar"),K=J("el-text"),Q=J("AppIcon"),H=J("el-button"),W=J("el-dropdown-item"),z=J("RefreshLeft"),Y=J("el-dropdown-menu"),q=J("el-dropdown"),oe=J("common-list"),ie=J("el-scrollbar"),Pe=eh("loading");return Oe(),en("div",cne,[ee("h4",fne,_e(E.$t("views.applicationWorkflow.setting.releaseHistory")),1),ee("div",dne,[k(ie,null,{default:C(()=>[ee("div",pne,[za((Oe(),at(oe,{data:v.value,class:"mt-8",onClick:b,onMouseenter:g,onMouseleave:D[1]||(D[1]=we=>f.value="")},{default:C(({row:we,index:be})=>[ee("div",hne,[ee("div",vne,[ee("h5",{class:fc([be===0?"primary":"","flex align-center"])},[k(I,{onChange:ye=>M(ye,we),data:we.name||sr(mw)(we.update_time),trigger:"manual",write:we.writeStatus,onClose:ye=>A(we)},null,8,["onChange","data","write","onClose"]),be===0?(Oe(),at(B,{key:0,class:"default-tag ml-4"},{default:C(()=>[ct(_e(E.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):kn("",!0)],2),k(K,{type:"info",class:"color-secondary flex align-center mt-8"},{default:C(()=>[k(U,{size:20,class:"avatar-grey mr-4"},{default:C(()=>[k(j,null,{default:C(()=>[k($)]),_:1})]),_:1}),ct(" "+_e(we.publish_user_name),1)]),_:2},1024)]),za(ee("div",{onClick:D[0]||(D[0]=nn(()=>{},["stop"]))},[k(q,{trigger:"click",teleported:!1},{dropdown:C(()=>[k(Y,null,{default:C(()=>[k(W,{onClick:nn(ye=>x(we),["stop"])},{default:C(()=>[k(Q,{iconName:"app-edit",class:"color-secondary"}),ct(" "+_e(E.$t("common.edit")),1)]),_:2},1032,["onClick"]),k(W,{onClick:ye=>_(we)},{default:C(()=>[k(j,{class:"color-secondary"},{default:C(()=>[k(z)]),_:1}),ct(" "+_e(E.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:C(()=>[k(H,{text:""},{default:C(()=>[k(Q,{iconName:"app-more"})]),_:1})]),_:2},1024)],512),[[Qp,f.value===we.id]])])]),empty:C(()=>[ee("div",mne,[k(K,{type:"info"},{default:C(()=>[ct(_e(E.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Pe,c.value]])])]),_:1})])])}}}),gne=Yd(yne,[["__scopeId","data-v-85be1165"]]),DT=[ei.AiChat,ei.Reply,ei.ToolLib,ei.ToolLibCustom,ei.ImageUnderstandNode,ei.Application,ei.SpeechToTextNode,ei.TextToSpeechNode,ei.ImageGenerateNode];class jT{constructor(t){Ma(this,"nodes");Ma(this,"edges");Ma(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===ei.Start);if(t.length==0)throw Ot("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Ot("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===ei.Base);if(t.length==0)throw Ot("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Ot("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===ei.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===ei.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==ei.Start&&n.id!==ei.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Ot("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(u=>u.id==r.targetNodeId)).reduce((r,u)=>[...r,...u],[]);if(a.length==0&&!DT.includes(t.type))throw Ot("views.applicationWorkflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==ei.Base&&t.type!==ei.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Ot("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===ei.Condition){const n=t.properties.nodeData.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.needConnect1")}${a.type}${Ot("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(a=>a.sourceNodeId==t.id).length==0&&!DT.includes(t.type))throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.nodeUnavailable")}`}}const bne={class:"application-workflow"},_ne={class:"header border-b flex-between p-12-24 white-bg"},wne={class:"flex align-center"},Ene=["title"],One={key:0},Sne={key:0},xne={key:1},Ane=["href"],Tne={class:"ml-4"},Mne={class:"flex-between"},kne={class:"flex align-center"},Pne={class:"mr-12 ml-24 flex"},Nne=["src"],Rne=["title"],Cne={class:"mr-16"},Dne={class:"scrollbar-height"},Kne=rr({__name:"index",setup(e){mI("getApplicationDetail",()=>A);const{theme:t}=tE(),n=hI(),a=aa(),{params:{id:r,from:u}}=a,c=Zn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),v=Zn(()=>tM.application[c.value]),f=Zn(()=>t.isDefaultTheme());let g;const b=Ge(),_=Ge(),x=Ge(!1),A=Ge(null),M=Ge(!1),S=Ge(!1),E=Ge(!1),D=Ge(""),I=Ge(!1),B=Ge(!1),$=Ge(!1),j=Ge({}),U=Ge(null),K=Ge([]),Q=Zn(()=>US(K.value)?"?"+US(K.value):""),H=Zn(()=>{var qe;return`${window.location.origin}/chat/`+((qe=A.value)==null?void 0:qe.accessToken)+Q.value});function W(){JSON.stringify(U.value)!==JSON.stringify(Be())?nE(Ot("common.tip"),Ot("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Ot("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Ot("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{Yt(!0,!0)}).catch(qe=>{qe==="cancel"&&Pt()}):Pt()}function z(){$.value||(B.value=!1,$.value=!1)}function Y(qe){qe&&oe(qe),B.value=!1,$.value=!1}function q(qe){$.value=!0,j.value=qe,oe(qe),Ae()}function oe(qe){var _t;qe.workFlow.nodes.map(ht=>{ht.properties.noRender=!0}),A.value.workFlow=qe.workFlow,D.value=qe==null?void 0:qe.update_time,(_t=b.value)==null||_t.clearGraphData(),Nv(()=>{var ht;(ht=b.value)==null||ht.render(qe.workFlow)})}function ie(){qt(),I.value&&Se(),B.value=!1,$.value=!1}function Pe(){B.value=!0}function we(qe){qe?Se():Ae(),localStorage.setItem("workflowAutoSave",qe.toString())}function be(qe){M.value=!1}function ye(qe){M.value=!1}function Xe(){M.value=!1}const Ze=()=>{var qe;(qe=b.value)==null||qe.validate().then(()=>{const _t=Be(),ht=new jT(_t);try{ht.is_valid()}catch(Vt){mi(Vt.toString());return}So({type:"application",systemType:c.value}).putApplication(r,{workFlow:_t},x).then(()=>So({type:"application",systemType:c.value}).publish(r,{},x)).then(Vt=>{A.value.name=Vt.data.name,zd(Ot("views.application.tip.publishSuccess"))}).catch(Vt=>{var Kt,rt,pn,Ue;const Jt=Vt.node,an=Vt.errMessage;if(typeof an=="string")mi(((Kt=Vt.node.properties)==null?void 0:Kt.nodeName)+` ${Ot("views.applicationWorkflow.node").toLowerCase()} `+an.toLowerCase());else{const _n=Object.keys(an);mi(((rt=Jt.properties)==null?void 0:rt.nodeName)+` ${Ot("views.applicationWorkflow.node").toLowerCase()} `+((Ue=(pn=an[_n[0]])==null?void 0:pn[0])==null?void 0:Ue.message.toLowerCase()))}})}).catch(_t=>{var Jt,an,Kt,rt;const ht=_t.node,Vt=_t.errMessage;if(typeof Vt=="string")mi(((Jt=_t.node.properties)==null?void 0:Jt.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+Vt);else{const pn=Object.keys(Vt);mi(((an=ht.properties)==null?void 0:an.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+((rt=(Kt=Vt[pn[0]])==null?void 0:Kt[0])==null?void 0:rt.message))}})},yt=()=>{var qe;(qe=b.value)==null||qe.validate().then(()=>{var Vt;const _t=Be(),ht=new jT(_t);try{ht.is_valid(),A.value={...A.value,type:"WORK_FLOW",...(Vt=ht.get_base_node())==null?void 0:Vt.properties.nodeData,workFlow:Be()},S.value=!0}catch(Jt){mi(Jt.toString())}}).catch(_t=>{var Jt,an,Kt,rt;const ht=_t.node,Vt=_t.errMessage;if(typeof Vt=="string")mi(((Jt=_t.node.properties)==null?void 0:Jt.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+Vt);else{const pn=Object.keys(Vt);mi(((an=ht.properties)==null?void 0:an.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+((rt=(Kt=Vt[pn[0]])==null?void 0:Kt[0])==null?void 0:rt.message))}})};function Be(){var qe;return(qe=b.value)==null?void 0:qe.getGraphData()}function qt(){So({type:"application",systemType:c.value}).getApplicationDetail(r).then(qe=>{var _t,ht,Vt,Jt,an;(_t=qe.data)==null||_t.workFlow.nodes.map(Kt=>{Kt.properties.noRender=!0}),A.value=qe.data,A.value.stt_model_id=qe.data.stt_model,A.value.ttsModelId=qe.data.tts_model,A.value.ttsType=qe.data.ttsType,D.value=(ht=qe.data)==null?void 0:ht.update_time,(Jt=(Vt=A.value.workFlow)==null?void 0:Vt.nodes)==null||Jt.filter(Kt=>Kt.id==="base-node").map(Kt=>{K.value=Kt.properties.api_input_field_list?Kt.properties.api_input_field_list.map(rt=>({name:rt.variable,value:rt.default_value})):Kt.properties.inputFieldList?Kt.properties.inputFieldList.filter(rt=>rt.assignment_method==="api_input").map(rt=>({name:rt.variable,value:rt.default_value})):[]}),So({type:"application",systemType:c.value}).getAccessToken(r,x).then(Kt=>{A.value={...A.value,...Kt.data}}),(an=b.value)==null||an.clearGraphData(),Nv(()=>{var Kt;(Kt=b.value)==null||Kt.render(A.value.workFlow),U.value=Be()}),Tf([Pl.IS_EE,Pl.IS_PE],"OR")&&So({type:"application",systemType:c.value}).getApplicationSetting(r).then(Kt=>{A.value={...A.value,...Kt.data}})})}function Yt(qe,_t){const ht={workFlow:Be()};x.value=_t||!1,So({type:"application",systemType:c.value}).putApplication(r,ht).then(()=>{D.value=new Date,qe&&(U.value=Be(),zd(Ot("common.saveSuccess")),_t&&Pt())}).catch(()=>{x.value=!1})}const Pt=()=>a.path.includes("workspace")?n.push({path:$e()}):n.push({path:An()}),An=()=>Tf([gs.ADMIN,Wa.RESOURCE_APPLICATION_OVERVIEW_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/overview`:Tf([gs.ADMIN,Wa.RESOURCE_APPLICATION_ACCESS_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/access`:Tf([gs.ADMIN,Wa.RESOURCE_APPLICATION_CHAT_USER_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-user`:Tf([gs.ADMIN,Wa.RESOURCE_APPLICATION_CHAT_LOG_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-log`:"/system/resource-management/application",$e=()=>Tf([new $d([gs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),gs.WORKSPACE_MANAGE.getWorkspaceRole,Wa.APPLICATION_OVERVIEW_READ.getWorkspacePermissionWorkspaceManageRole,Wa.APPLICATION_OVERVIEW_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${u}/${r}/WORK_FLOW/overview`:Tf([new $d([gs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new $d([gs.WORKSPACE_MANAGE.getWorkspaceRole],[Wa.APPLICATION_ACCESS_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new $d([],[Wa.APPLICATION_ACCESS_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${u}/${r}/WORK_FLOW/access`:Tf([new $d([gs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new $d([gs.WORKSPACE_MANAGE.getWorkspaceRole],[Wa.APPLICATION_CHAT_USER_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new $d([],[Wa.APPLICATION_CHAT_USER_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-user`:Tf([new $d([gs.USER],[Wa.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),Wa.APPLICATION_CHAT_LOG_READ.getWorkspacePermissionWorkspaceManageRole,Wa.APPLICATION_CHAT_LOG_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-log`:"/application",Se=()=>{g=setInterval(()=>{Yt()},6e4)},Ae=()=>{g&&clearInterval(g)};return Hr(()=>{qt();const qe=localStorage.getItem("workflowAutoSave");I.value=qe==="true",I.value&&Se()}),vI(()=>{var qe;Ae(),(qe=b.value)==null||qe.clearGraphData()}),(qe,_t)=>{var bo,Te,Qe;const ht=J("back-button"),Vt=J("el-text"),Jt=J("el-button"),an=J("el-divider"),Kt=J("Close"),rt=J("el-icon"),pn=J("el-dropdown-item"),Ue=J("el-switch"),_n=J("el-dropdown-menu"),Jn=J("el-dropdown"),le=J("el-collapse-transition"),Qn=J("el-avatar"),Pr=J("LogoIcon"),Xr=J("AiChat"),ao=eh("click-outside"),Un=eh("loading");return za((Oe(),en("div",bne,[ee("div",_ne,[ee("div",wne,[k(ht,{onClick:W}),ee("h4",{class:"ellipsis",style:{"max-width":"300px"},title:(bo=A.value)==null?void 0:bo.name},_e((Te=A.value)==null?void 0:Te.name),9,Ene),B.value&&$.value?(Oe(),en("div",One,[k(Vt,{type:"info",class:"ml-16 color-secondary"},{default:C(()=>[ct(_e(qe.$t("views.applicationWorkflow.info.previewVersion"))+" "+_e(j.value.name||sr(mw)(j.value.update_time)),1)]),_:1})])):D.value?(Oe(),at(Vt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:C(()=>[ct(_e(qe.$t("views.applicationWorkflow.info.saveTime"))+_e(sr(mw)(D.value)),1)]),_:1})):kn("",!0)]),B.value&&$.value?(Oe(),en("div",Sne,[k(Jt,{type:"primary",class:"mr-8",onClick:_t[0]||(_t[0]=je=>Y())},{default:C(()=>[ct(_e(qe.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),k(an,{direction:"vertical"}),k(Jt,{text:"",onClick:ie},{default:C(()=>[k(rt,null,{default:C(()=>[k(Kt)]),_:1})]),_:1})])):(Oe(),en("div",xne,[k(Jt,{icon:"Plus",onClick:_t[1]||(_t[1]=je=>M.value=!M.value)},{default:C(()=>[ct(_e(qe.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),v.value.debug(sr(r))?(Oe(),at(Jt,{key:0,onClick:yt,disabled:S.value},{default:C(()=>[k(yo,{iconName:"app-debug-outlined",class:"mr-4"}),ct(" "+_e(qe.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"])):kn("",!0),k(Jt,{onClick:_t[2]||(_t[2]=je=>Yt(!0))},{default:C(()=>[k(yo,{iconName:"app-save-outlined",class:"mr-4"}),ct(" "+_e(qe.$t("common.save")),1)]),_:1}),k(Jt,{type:"primary",onClick:Ze},{default:C(()=>[ct(_e(qe.$t("views.application.operation.publish")),1)]),_:1}),k(Jn,{trigger:"click"},{dropdown:C(()=>[k(_n,null,{default:C(()=>[ee("a",{href:H.value,target:"_blank"},[k(pn,null,{default:C(()=>[k(yo,{iconName:"app-create-chat",class:"color-secondary"}),ct(" "+_e(qe.$t("views.application.operation.toChat")),1)]),_:1})],8,Ane),k(pn,{onClick:Pe},{default:C(()=>[k(yo,{iconName:"app-history-outlined",class:"color-secondary"}),ct(" "+_e(qe.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),k(pn,null,{default:C(()=>[k(yo,{iconName:"app-save-outlined",class:"color-secondary"}),ct(" "+_e(qe.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),ee("div",Tne,[k(Ue,{size:"small",modelValue:I.value,"onUpdate:modelValue":_t[4]||(_t[4]=je=>I.value=je),onChange:we},null,8,["modelValue"])])]),_:1})]),_:1})]),default:C(()=>[k(Jt,{text:"",onClick:_t[3]||(_t[3]=nn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:C(()=>[k(yo,{iconName:"app-more",class:"rotate-90"})]),_:1})]),_:1})]))]),k(le,null,{default:C(()=>[za(k(Nk,{show:M.value,id:sr(r),onClickNodes:be,onOnmousedown:ye,workflowRef:b.value},null,8,["show","id","workflowRef"]),[[ao,Xe]])]),_:1}),ee("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:_},[A.value?(Oe(),at(sne,{key:0,ref_key:"workflowRef",ref:b,data:(Qe=A.value)==null?void 0:Qe.workFlow},null,8,["data"])):kn("",!0)],512),k(le,null,{default:C(()=>{var je,ut,rn;return[S.value?(Oe(),en("div",{key:0,class:fc(["workflow-debug-container",E.value?"enlarge":""])},[ee("div",{class:fc(["workflow-debug-header",f.value?"":"custom-header"])},[ee("div",Mne,[ee("div",kne,[ee("div",Pne,[sr(hw)((je=A.value)==null?void 0:je.icon)?(Oe(),at(Qn,{key:0,shape:"square",size:32,style:{background:"none"}},{default:C(()=>{var Zt;return[ee("img",{src:sr(Zp)((Zt=A.value)==null?void 0:Zt.icon),alt:""},null,8,Nne)]}),_:1})):(Oe(),at(Pr,{key:1,height:"32px"}))]),ee("h4",{class:"ellipsis",style:{"max-width":"270px"},title:(ut=A.value)==null?void 0:ut.name},_e(((rn=A.value)==null?void 0:rn.name)||qe.$t("views.application.form.appName.label")),9,Rne)]),ee("div",Cne,[k(Jt,{link:"",onClick:_t[5]||(_t[5]=Zt=>E.value=!E.value)},{default:C(()=>[k(yo,{iconName:E.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),k(Jt,{link:"",onClick:_t[6]||(_t[6]=Zt=>S.value=!1)},{default:C(()=>[k(rt,{size:20,class:"color-secondary"},{default:C(()=>[k(Kt)]),_:1})]),_:1})])])],2),ee("div",Dne,[k(Xr,{"application-details":A.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):kn("",!0)]}),_:1}),B.value?za((Oe(),at(gne,{key:0,onClick:q,onRefreshVersion:Y},null,512)),[[ao,z]]):kn("",!0)])),[[Un,x.value]])}}});export{Kne as default};
