import{aX as T,ba as N,aW as h,aY as B,ay as O,aZ as U,a_ as F,aB as m,aQ as M,aE as R,aD as u,aG as l,aH as n,aU as A,aI as j,aK as P,aJ as K,b2 as x,b3 as z,aC as G,aF as H}from"./admin-BOU8h_tu.js";const d="/system/api_key",J=()=>B(`${d}`),Q=i=>h(`${d}`,{},void 0,i),W=(i,p)=>N(`${d}/${i}`,void 0,void 0,p),X=(i,p,f)=>T(`${d}/${i}`,p,void 0,f),Y={getAPIKey:J,postAPIKey:Q,delAPIKey:W,putAPIKey:X},Z={class:"dialog-footer"},E=O({__name:"SettingAPIKeyDialog",emits:["refresh"],setup(i,{expose:p,emit:f}){const g=U(),{params:{id:L}}=g,V=F(()=>g.path.includes("resource-management")?"systemManage":"workspace"),$=f,_=m(),a=m({allowCrossDomain:!1,crossDomainList:""}),r=m(!1),v=m(!1),y=m(""),w=m("APPLICATION");M(r,o=>{o||(a.value={allowCrossDomain:!1,crossDomainList:""})});const b=(o,e)=>{var c,s;y.value=o.id,w.value=e,a.value.allowCrossDomain=o.allowCrossDomain,a.value.crossDomainList=(c=o.crossDomainList)!=null&&c.length?(s=o.crossDomainList)==null?void 0:s.join(`
`):"",r.value=!0},k=async o=>{o&&await o.validate((e,c)=>{if(e){const s={allowCrossDomain:a.value.allowCrossDomain,crossDomainList:a.value.crossDomainList?a.value.crossDomainList.split(`
`).filter(function(D){return D!==""}):[]};(w.value==="APPLICATION"?x({type:"applicationKey",systemType:V.value}).putAPIKey(L,y.value,s,v):Y.putAPIKey(y.value,s,v)).then(()=>{$("refresh"),z(G("common.settingSuccess")),r.value=!1})}})};return p({open:b}),(o,e)=>{const c=u("el-switch"),s=u("el-form-item"),C=u("el-input"),D=u("el-form"),I=u("el-button"),S=u("el-dialog");return H(),R(S,{title:o.$t("common.setting"),modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value=t),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:l(()=>[j("span",Z,[n(I,{onClick:e[3]||(e[3]=A(t=>r.value=!1,["prevent"]))},{default:l(()=>[P(K(o.$t("common.cancel")),1)]),_:1}),n(I,{type:"primary",onClick:e[4]||(e[4]=t=>k(_.value)),loading:v.value},{default:l(()=>[P(K(o.$t("common.save")),1)]),_:1},8,["loading"])])]),default:l(()=>[n(D,{"label-position":"top",ref_key:"settingFormRef",ref:_,model:a.value},{default:l(()=>[n(s,{label:o.$t("views.applicationOverview.appInfo.SettingAPIKeyDialog.allowCrossDomainLabel"),onClick:e[1]||(e[1]=A(()=>{},["prevent"]))},{default:l(()=>[n(c,{size:"small",modelValue:a.value.allowCrossDomain,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.allowCrossDomain=t)},null,8,["modelValue"])]),_:1},8,["label"]),n(s,null,{default:l(()=>[n(C,{modelValue:a.value.crossDomainList,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.crossDomainList=t),placeholder:o.$t("views.applicationOverview.appInfo.SettingAPIKeyDialog.crossDomainPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});export{E as _,Y as s};
