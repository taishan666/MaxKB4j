import{ay as X,aB as m,aP as Z,aC as i,aQ as me,aD as n,aE as y,aF as g,aG as o,aI as U,aH as e,aJ as v,aU as H,b1 as j,b6 as t,cv as Ce,aR as J,aS as se,aT as te,aK as $,d0 as Me,b3 as W,co as Ve,aA as Re,b7 as Ee,a$ as ue,b0 as Y,bI as q,bH as P,bJ as D,c1 as Se,b4 as ae,c3 as de}from"./admin-_EJ4kEIX.js";import{l as K,u as ce}from"./permission-api-Bv38S60A.js";import"./workspace-CFPFIdke.js";const Pe={class:"title-decoration-1 mb-16 mt-8"},De={class:"mr-8"},Te={class:"title-decoration-1 mb-16 mt-8"},Fe=X({__name:"UserDrawer",props:{title:{},optionLoading:{type:Boolean},chatGroupList:{}},emits:["refresh"],setup(Q,{expose:C,emit:A}){const T=Q,E=A,p=m(),r=m({username:"",email:"",password:"",phone:"",nickname:"",user_group_ids:[]}),b=Z({username:[{required:!0,message:i("views.login.loginForm.username.requiredMessage"),trigger:"blur"},{min:4,max:20,message:i("views.login.loginForm.username.lengthMessage"),trigger:"blur"}],nickname:[{required:!0,message:i("views.userManage.userForm.nickname.placeholder"),trigger:"blur"},{min:1,max:20,message:i("views.userManage.userForm.nickname.lengthMessage"),trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:i("views.userManage.userForm.phone.invalidMessage"),trigger:"blur"}]}),h=m(!1),_=m(!1),M=m(!1);me(h,s=>{var l;s||(r.value={username:"",email:"",password:"",phone:"",nickname:"",user_group_ids:[]},M.value=!1,(l=p.value)==null||l.clearValidate())});const G=s=>{s?(r.value.id=s.id,r.value.username=s.username,r.value.email=s.email,r.value.phone=s.phone,r.value.nickname=s.nickname,r.value.user_group_ids=s.user_group_ids,M.value=!0):Me.getSystemDefaultPassword().then(l=>{r.value.password=l.data.password}),h.value=!0},N=async s=>{s&&await s.validate((l,c)=>{l&&(M.value?K("chatUser").putUserManage(r.value.id,r.value,_).then(()=>{E("refresh"),W(i("common.editSuccess")),h.value=!1}):K("chatUser").postUserManage(r.value,_).then(()=>{E("refresh"),W(i("common.createSuccess")),h.value=!1}))})};return C({open:G}),(s,l)=>{const c=n("el-input"),w=n("el-form-item"),O=n("AppIcon"),V=n("el-button"),S=n("el-option"),R=n("el-select"),L=n("el-form"),k=n("el-drawer");return g(),y(k,{modelValue:h.value,"onUpdate:modelValue":l[9]||(l[9]=d=>h.value=d),size:"60%"},{header:o(()=>[U("h4",null,v(T.title),1)]),footer:o(()=>[e(V,{onClick:l[7]||(l[7]=H(d=>h.value=!1,["prevent"]))},{default:o(()=>[$(v(s.$t("common.cancel")),1)]),_:1}),e(V,{type:"primary",onClick:l[8]||(l[8]=d=>N(p.value)),loading:_.value},{default:o(()=>[$(v(s.$t("common.save")),1)]),_:1},8,["loading"])]),default:o(()=>[U("h4",Pe,v(s.$t("common.info")),1),e(L,{ref_key:"userFormRef",ref:p,model:r.value,rules:b,"label-position":"top","require-asterisk-position":"right",onSubmit:l[6]||(l[6]=H(()=>{},["prevent"])),"close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[e(w,{prop:M.value?"":"username",label:s.$t("views.login.loginForm.username.label")},{default:o(()=>[e(c,{modelValue:r.value.username,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value.username=d),placeholder:s.$t("views.login.loginForm.username.placeholder"),maxlength:"20","show-word-limit":"",disabled:M.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["prop","label"]),e(w,{prop:"nickname",label:s.$t("views.userManage.userForm.nickname.label")},{default:o(()=>[e(c,{modelValue:r.value.nickname,"onUpdate:modelValue":l[1]||(l[1]=d=>r.value.nickname=d),placeholder:s.$t("views.userManage.userForm.nickname.placeholder"),maxlength:"20","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:s.$t("views.login.loginForm.email.label"),prop:"email"},{default:o(()=>[e(c,{type:"email",modelValue:r.value.email,"onUpdate:modelValue":l[2]||(l[2]=d=>r.value.email=d),placeholder:s.$t("views.login.loginForm.email.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:s.$t("views.userManage.userForm.phone.label"),prop:"phone"},{default:o(()=>[e(c,{modelValue:r.value.phone,"onUpdate:modelValue":l[3]||(l[3]=d=>r.value.phone=d),placeholder:s.$t("views.userManage.userForm.phone.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),M.value?j("",!0):(g(),y(w,{key:0,label:"默认密码"},{default:o(()=>[U("span",De,v(r.value.password),1),e(V,{type:"primary",link:"",onClick:l[4]||(l[4]=d=>t(Ce)(r.value.password))},{default:o(()=>[e(O,{iconName:"app-copy"})]),_:1})]),_:1})),U("h4",Te,v(s.$t("views.chatUser.group.title")),1),e(w,{label:s.$t("views.chatUser.group.title"),prop:"user_group_ids"},{default:o(()=>[e(R,{modelValue:r.value.user_group_ids,"onUpdate:modelValue":l[5]||(l[5]=d=>r.value.user_group_ids=d),multiple:"",filterable:"",placeholder:`${s.$t("common.selectPlaceholder")}${s.$t("views.chatUser.group.title")}`,loading:T.optionLoading},{default:o(()=>[(g(!0),J(se,null,te(T.chatGroupList,d=>(g(),y(S,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),Oe=Ve(Fe,[["__scopeId","data-v-c8b4f5d7"]]),Le={class:"dialog-footer"},Ge=X({__name:"UserPwdDialog",emits:["refresh"],setup(Q,{expose:C,emit:A}){const T=A,{user:E}=Re(),p=m(),r=m({password:"",rePassword:""}),b=Z({password:[{required:!0,message:i("views.login.loginForm.new_password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:i("views.login.loginForm.password.lengthMessage"),trigger:"blur"}],rePassword:[{required:!0,message:i("views.login.loginForm.rePassword.requiredMessage"),trigger:"blur"},{min:6,max:20,message:i("views.login.loginForm.password.lengthMessage"),trigger:"blur"},{validator:(s,l,c)=>{p.value.password!=p.value.rePassword?c(new Error(i("views.login.loginForm.rePassword.validatorMessage"))):c()},trigger:"blur"}]}),h=m(!1),_=m(!1),M=m("");me(h,s=>{s||(r.value={password:"",rePassword:""})});const G=s=>{var l;M.value=s.id,h.value=!0,(l=p.value)==null||l.clearValidate()},N=async s=>{s&&await s.validate((l,c)=>{l&&K("chatUser").putUserManagePassword(M.value,r.value,_).then(()=>{T("refresh"),E.profile(),W(i("views.userManage.tip.updatePwdSuccess")),h.value=!1})})};return C({open:G}),(s,l)=>{const c=n("el-input"),w=n("el-form-item"),O=n("el-form"),V=n("el-button"),S=n("el-dialog");return g(),y(S,{title:s.$t("views.login.resetPassword"),modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=R=>h.value=R)},{footer:o(()=>[U("span",Le,[e(V,{onClick:l[3]||(l[3]=H(R=>h.value=!1,["prevent"]))},{default:o(()=>[$(v(s.$t("common.cancel")),1)]),_:1}),e(V,{type:"primary",onClick:l[4]||(l[4]=R=>N(p.value)),loading:_.value},{default:o(()=>[$(v(s.$t("common.save")),1)]),_:1},8,["loading"])])]),default:o(()=>[e(O,{ref_key:"userFormRef",ref:p,model:r.value,rules:b,"label-position":"top","require-asterisk-position":"right",onSubmit:l[2]||(l[2]=H(()=>{},["prevent"])),"close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[e(w,{label:s.$t("views.login.loginForm.new_password.label"),prop:"password"},{default:o(()=>[e(c,{type:"password",modelValue:r.value.password,"onUpdate:modelValue":l[0]||(l[0]=R=>r.value.password=R),placeholder:s.$t("views.login.loginForm.new_password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:s.$t("views.login.loginForm.rePassword.label"),prop:"rePassword"},{default:o(()=>[e(c,{type:"password",modelValue:r.value.rePassword,"onUpdate:modelValue":l[1]||(l[1]=R=>r.value.rePassword=R),placeholder:s.$t("views.login.loginForm.rePassword.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}}),Ne={class:"dialog-footer"},Ie=X({__name:"SetUserGroupsDialog",props:{optionLoading:{type:Boolean},chatGroupList:{}},emits:["refresh"],setup(Q,{expose:C,emit:A}){const T=Q,E=A,p=m(!1),r={user_group_ids:[],is_append:!0,ids:[]},b=m({...r});function h(s){b.value={...r,ids:s},p.value=!0}const _=m(),M=Z({user_group_ids:[{required:!0,message:i("common.selectPlaceholder"),trigger:"blur"}],is_append:[{required:!0,message:i("common.selectPlaceholder"),trigger:"blur"}]}),G=m(!1),N=async s=>{s&&await s.validate(l=>{l&&K("chatUser").batchAddGroup(b.value,G).then(()=>{W(i("common.settingSuccess")),E("refresh"),p.value=!1})})};return C({open:h}),(s,l)=>{const c=n("el-radio"),w=n("el-radio-group"),O=n("el-form-item"),V=n("el-option"),S=n("el-select"),R=n("el-form"),L=n("el-button"),k=n("el-dialog");return g(),y(k,{width:"600",title:s.$t("views.chatUser.setUserGroups"),modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=d=>p.value=d),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0},{footer:o(()=>[U("span",Ne,[e(L,{onClick:l[2]||(l[2]=H(d=>p.value=!1,["prevent"]))},{default:o(()=>[$(v(s.$t("common.cancel")),1)]),_:1}),e(L,{type:"primary",onClick:l[3]||(l[3]=d=>N(_.value)),loading:G.value},{default:o(()=>[$(v(s.$t("common.save")),1)]),_:1},8,["loading"])])]),default:o(()=>[e(R,{"label-position":"top",ref_key:"formRef",ref:_,rules:M,model:b.value,"require-asterisk-position":"right"},{default:o(()=>[e(O,{label:s.$t("views.chatUser.settingMethod"),prop:"user_group_ids"},{default:o(()=>[e(w,{modelValue:b.value.is_append,"onUpdate:modelValue":l[0]||(l[0]=d=>b.value.is_append=d)},{default:o(()=>[e(c,{value:!0},{default:o(()=>[$(v(s.$t("views.chatUser.append")),1)]),_:1}),e(c,{value:!1},{default:o(()=>[$(v(s.$t("views.chatUser.replace")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(O,{label:s.$t("views.chatUser.group.title"),prop:"user_group_ids"},{default:o(()=>[e(S,{modelValue:b.value.user_group_ids,"onUpdate:modelValue":l[1]||(l[1]=d=>b.value.user_group_ids=d),multiple:"",filterable:"",placeholder:s.$t("common.selectPlaceholder"),loading:T.optionLoading},{default:o(()=>[(g(!0),J(se,null,te(T.chatGroupList,d=>(g(),y(V,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),He={class:"mb-8 medium"},Ke={class:"color-secondary lighter"},qe={class:"dialog-footer"},We=X({__name:"SyncUsersDialog",emits:["refresh"],setup(Q,{expose:C,emit:A}){const T=m([{label:i("views.userManage.source.local"),value:"LOCAL"},{label:i("views.system.authentication.scanTheQRCode.wecom"),value:"wecom"},{label:"LDAP",value:"LDAP"},{label:i("views.system.authentication.scanTheQRCode.lark"),value:"lark"}]),E=A,p=m(!1),r={sync_type:"LOCAL"},b=m({...r});function h(){b.value={...r},_(),p.value=!0}async function _(){return ce.getSyncType().then(l=>{l.data&&l.data.length>0&&(T.value=T.value.filter(c=>l.data.includes(c.value)))})}const M=m(),G=Z({sync_type:[{required:!0,message:i("common.selectPlaceholder"),trigger:"blur"}]}),N=m(!1),s=async l=>{l&&await l.validate(c=>{c&&ce.batchSync(b.value.sync_type,N).then(w=>{if(w.data){const O=w.data.success_count;let V="";w.data.conflict_users&&w.data.conflict_users.length>0&&w.data.conflict_users.forEach(S=>{S.type==="username"&&(V+=`

`+i("views.chatUser.syncMessage.usernameExist")+" [ "+S.users.join(",")+`
 ]`),S.type==="nickname"&&(V+=`

`+i("views.chatUser.syncMessage.nicknameExist")+" [ "+S.users.join(",")+`
 ]`)}),W(i("views.chatUser.syncMessage.title",{count:O})+V),E("refresh"),p.value=!1}})})};return C({open:h}),(l,c)=>{const w=n("el-option"),O=n("el-select"),V=n("el-form-item"),S=n("el-form"),R=n("el-button"),L=n("el-dialog");return g(),y(L,{modelValue:p.value,"onUpdate:modelValue":c[3]||(c[3]=k=>p.value=k),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,width:"600"},{header:o(()=>[U("h4",He,v(t(i)("views.chatUser.syncUsers")),1),U("div",Ke,v(t(i)("views.chatUser.syncUsersTip")),1)]),footer:o(()=>[U("span",qe,[e(R,{onClick:c[1]||(c[1]=H(k=>p.value=!1,["prevent"]))},{default:o(()=>[$(v(l.$t("common.cancel")),1)]),_:1}),e(R,{type:"primary",onClick:c[2]||(c[2]=k=>s(M.value)),loading:N.value},{default:o(()=>[$(v(l.$t("common.sync")),1)]),_:1},8,["loading"])])]),default:o(()=>[e(S,{"label-position":"top",ref_key:"formRef",ref:M,rules:G,model:b.value,"require-asterisk-position":"right"},{default:o(()=>[e(V,{label:l.$t("views.userManage.source.label"),prop:"sync_type"},{default:o(()=>[e(O,{modelValue:b.value.sync_type,"onUpdate:modelValue":c[0]||(c[0]=k=>b.value.sync_type=k),placeholder:l.$t("common.selectPlaceholder")},{default:o(()=>[(g(!0),J(se,null,te(T.value,k=>(g(),y(w,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])}}}),Be={class:"chat-user p-24"},ze={class:"ml-4 color-text-primary"},je={class:"flex-between mb-16"},Qe={class:"flex-between complex-search"},Je={key:0,class:"flex align-center"},Ye={class:"color-secondary"},Xe={key:1,class:"flex align-center"},Ze={class:"color-secondary"},xe={class:"mr-8"},el={class:"mr-8"},sl=X({__name:"index",setup(Q){const C=m("username"),A=m({username:"",nickname:"",source:"",isActive:null}),T=()=>{A.value={username:"",nickname:"",source:"",isActive:null}},E=m(!1),p=m([]);function r(a){p.value=a}const b=Z({current_page:1,page_size:20,total:0}),h=m([]);function _(){const a={},f=A.value[C.value];return f!=null&&f!==""&&(a[C.value]=f),K("chatUser").getUserManage(b,a,E).then(B=>{h.value=B.data.records,b.total=B.data.total})}const M=m("");function G({prop:a,order:f}){M.value=f==="ascending"?a:`-${a}`,_()}function N(){b.current_page=1,_()}async function s(a){const f={...a,isActive:!a.isActive},B=f.isActive?i("common.status.enableSuccess"):i("common.status.disableSuccess");await K("chatUser").putUserManage(a.id,f,E).then(()=>(_(),W(B),!0)).catch(()=>!1)}const l=m(""),c=m();function w(a){l.value=i("views.userManage.editUser"),c.value.open(a)}function O(){l.value=i("views.userManage.createUser"),c.value.open()}function V(a){de(`${i("views.userManage.delete.confirmTitle")}${a.nickname} ?`,"",{confirmButtonText:i("common.confirm"),confirmButtonClass:"danger"}).then(()=>{E.value=!0,K("chatUser").delUserManage(a.id,E).then(()=>{W(i("common.deleteSuccess")),_()})}).catch(()=>{})}const S=m();function R(a){S.value.open(a)}function L(){_()}Ee(()=>{pe(),_()});const k=m(!1),d=m([]);async function pe(){try{const a=await K("userGroup").getUserGroup(k);d.value=a.data}catch(a){console.error(a)}}function ve(){de(i("views.chatUser.batchDeleteUser",{count:p.value.length}),"",{confirmButtonText:i("common.confirm"),confirmButtonClass:"danger"}).then(()=>{K("chatUser").batchDelete(p.value.map(a=>a.id),E).then(async()=>{W(i("common.deleteSuccess")),await _()})}).catch(()=>{})}const ne=m();function ge(){var a;(a=ne.value)==null||a.open(p.value.map(f=>f.id))}const re=m();function fe(){var a;(a=re.value)==null||a.open()}return(a,f)=>{const B=n("el-breadcrumb-item"),_e=n("el-breadcrumb"),z=n("el-button"),F=n("el-option"),oe=n("el-select"),ie=n("el-input"),I=n("el-table-column"),be=n("SuccessFilled"),he=n("el-icon"),x=n("AppIcon"),we=n("TagGroup"),ye=n("el-switch"),Ue=n("el-divider"),$e=n("app-table"),Ae=n("el-card"),ee=ue("hasPermission"),ke=ue("loading");return g(),J("div",Be,[e(_e,{"separator-icon":"ArrowRight",class:"mb-16"},{default:o(()=>[e(B,null,{default:o(()=>[$(v(t(i)("views.chatUser.title")),1)]),_:1}),e(B,null,{default:o(()=>[U("h5",ze,v(t(i)("views.chatUser.title")),1)]),_:1})]),_:1}),e(Ae,{style:{height:"calc(var(--app-main-height) + 10px)"}},{default:o(()=>[U("div",je,[U("div",null,[Y((g(),y(z,{type:"primary",onClick:f[0]||(f[0]=u=>O())},{default:o(()=>[$(v(t(i)("views.userManage.createUser")),1)]),_:1})),[[ee,new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).CHAT_USER_CREATE,t(D).WORKSPACE_CHAT_USER_CREATE],[],"OR")]]),Y((g(),y(z,{onClick:fe},{default:o(()=>[$(v(a.$t("views.chatUser.syncUsers")),1)]),_:1})),[[ee,new(t(q))([t(P).ADMIN],[t(D).CHAT_USER_SYNC],[],"OR")]]),Y((g(),y(z,{disabled:p.value.length===0,onClick:ge},{default:o(()=>[$(v(a.$t("views.chatUser.setUserGroups")),1)]),_:1},8,["disabled"])),[[ee,new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).CHAT_USER_GROUP,t(D).WORKSPACE_CHAT_USER_GROUP],[],"OR")]]),Y((g(),y(z,{disabled:p.value.length===0,onClick:ve},{default:o(()=>[$(v(a.$t("common.delete")),1)]),_:1},8,["disabled"])),[[ee,new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).WORKSPACE_CHAT_USER_DELETE,t(D).CHAT_USER_DELETE],[],"OR")]])]),U("div",Qe,[e(oe,{class:"complex-search__left",modelValue:C.value,"onUpdate:modelValue":f[1]||(f[1]=u=>C.value=u),style:{width:"120px"},onChange:T},{default:o(()=>[e(F,{label:a.$t("views.login.loginForm.username.label"),value:"username"},null,8,["label"]),e(F,{label:a.$t("views.userManage.userForm.nickname.label"),value:"nickname"},null,8,["label"]),e(F,{label:a.$t("common.status.label"),value:"isActive"},null,8,["label"]),e(F,{label:a.$t("views.userManage.source.label"),value:"source"},null,8,["label"])]),_:1},8,["modelValue"]),C.value==="username"?(g(),y(ie,{key:0,modelValue:A.value.username,"onUpdate:modelValue":f[2]||(f[2]=u=>A.value.username=u),onChange:_,style:{width:"220px"},clearable:""},null,8,["modelValue"])):j("",!0),C.value==="nickname"?(g(),y(ie,{key:1,modelValue:A.value.nickname,"onUpdate:modelValue":f[3]||(f[3]=u=>A.value.nickname=u),onChange:_,style:{width:"220px"},clearable:""},null,8,["modelValue"])):C.value==="isActive"?(g(),y(oe,{key:2,modelValue:A.value.isActive,"onUpdate:modelValue":f[4]||(f[4]=u=>A.value.isActive=u),onChange:_,clearable:"",style:{width:"220px"}},{default:o(()=>[e(F,{label:a.$t("common.status.enabled"),value:!0},null,8,["label"]),e(F,{label:a.$t("common.status.disabled"),value:!1},null,8,["label"])]),_:1},8,["modelValue"])):C.value==="source"?(g(),y(oe,{key:3,modelValue:A.value.source,"onUpdate:modelValue":f[5]||(f[5]=u=>A.value.source=u),onChange:_,style:{width:"220px"},clearable:"",placeholder:a.$t("common.inputPlaceholder")},{default:o(()=>[e(F,{label:a.$t("views.userManage.source.local"),value:"LOCAL"},null,8,["label"]),e(F,{label:"CAS",value:"CAS"}),e(F,{label:"LDAP",value:"LDAP"}),e(F,{label:"OIDC",value:"OIDC"}),e(F,{label:"OAuth2",value:"OAuth2"}),e(F,{label:a.$t("views.userManage.source.wecom"),value:"wecom"},null,8,["label"]),e(F,{label:a.$t("views.userManage.source.lark"),value:"lark"},null,8,["label"]),e(F,{label:a.$t("views.userManage.source.dingtalk"),value:"dingtalk"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])):j("",!0)])]),Y((g(),y($e,{class:"mt-16",data:h.value,"pagination-config":b,onSizeChange:N,onChangePage:_,onSelectionChange:r,onSortChange:G,maxTableHeight:270},{default:o(()=>[e(I,{type:"selection",width:"55"}),e(I,{prop:"nickname",label:a.$t("views.userManage.userForm.nickname.label"),"min-width":"180","show-overflow-tooltip":""},null,8,["label"]),e(I,{prop:"username",label:a.$t("common.username"),"min-width":"180","show-overflow-tooltip":""},null,8,["label"]),e(I,{prop:"isActive",label:a.$t("common.status.label"),width:"100"},{default:o(({row:u})=>[u.isActive?(g(),J("div",Je,[e(he,{class:"color-success mr-8",style:{"font-size":"16px"}},{default:o(()=>[e(be)]),_:1}),U("span",Ye,v(a.$t("common.status.enabled")),1)])):(g(),J("div",Xe,[e(x,{iconName:"app-disabled",class:"color-secondary mr-8"}),U("span",Ze,v(a.$t("common.status.disabled")),1)]))]),_:1},8,["label"]),e(I,{prop:"email",label:a.$t("views.login.loginForm.email.label"),"show-overflow-tooltip":"","min-width":"180"},{default:o(({row:u})=>[$(v(u.email||"-"),1)]),_:1},8,["label"]),e(I,{prop:"phone",label:a.$t("views.userManage.userForm.phone.label"),width:"120"},{default:o(({row:u})=>[$(v(u.phone||"-"),1)]),_:1},8,["label"]),e(I,{prop:"user_group_names",label:a.$t("views.chatUser.group.title"),"min-width":"150"},{default:o(({row:u})=>[e(we,{tags:u.user_group_names},null,8,["tags"])]),_:1},8,["label"]),e(I,{prop:"source",label:a.$t("views.userManage.source.label")},{default:o(({row:u})=>[$(v(u.source==="LOCAL"?a.$t("views.userManage.source.localCreate"):u.source==="wecom"?a.$t("views.userManage.source.wecom"):u.source==="lark"?a.$t("views.userManage.source.lark"):u.source==="dingtalk"?a.$t("views.userManage.source.dingtalk"):u.source==="OAUTH2"||u.source==="OAuth2"?"OAuth2":u.source),1)]),_:1},8,["label"]),e(I,{label:a.$t("common.createTime"),width:"180"},{default:o(({row:u})=>[$(v(t(Se)(u.createTime)),1)]),_:1},8,["label"]),e(I,{label:a.$t("common.operation"),width:"160",align:"left",fixed:"right"},{default:o(({row:u})=>[U("span",{onClick:f[6]||(f[6]=H(()=>{},["stop"]))},[t(ae)(new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).CHAT_USER_EDIT,t(D).WORKSPACE_CHAT_USER_EDIT],[],"OR"),"OR")?(g(),y(ye,{key:0,size:"small",modelValue:u.isActive,"onUpdate:modelValue":le=>u.isActive=le,"before-change":()=>s(u)},null,8,["modelValue","onUpdate:modelValue","before-change"])):j("",!0)]),e(Ue,{direction:"vertical"}),U("span",xe,[t(ae)(new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).CHAT_USER_EDIT,t(D).WORKSPACE_CHAT_USER_EDIT],[],"OR"),"OR")?(g(),y(z,{key:0,type:"primary",text:"",onClick:H(le=>w(u),["stop"]),title:a.$t("common.edit")},{default:o(()=>[e(x,{iconName:"app-edit"})]),_:2},1032,["onClick","title"])):j("",!0)]),U("span",el,[t(ae)(new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).CHAT_USER_EDIT,t(D).WORKSPACE_CHAT_USER_EDIT],[],"OR"),"OR")?(g(),y(z,{key:0,type:"primary",text:"",onClick:H(le=>R(u),["stop"]),title:a.$t("views.userManage.setting.updatePwd")},{default:o(()=>[e(x,{iconName:"app-key"})]),_:2},1032,["onClick","title"])):j("",!0)]),U("span",null,[t(ae)(new(t(q))([t(P).ADMIN,t(P).WORKSPACE_MANAGE],[t(D).CHAT_USER_DELETE,t(D).WORKSPACE_CHAT_USER_DELETE],[],"OR"),"OR")?(g(),y(z,{key:0,disabled:u.role==="ADMIN",type:"primary",text:"",onClick:H(le=>V(u),["stop"]),title:a.$t("common.delete")},{default:o(()=>[e(x,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick","title"])):j("",!0)])]),_:1},8,["label"])]),_:1},8,["data","pagination-config"])),[[ke,E.value]])]),_:1}),e(Oe,{title:l.value,optionLoading:k.value,chatGroupList:d.value,ref_key:"UserDrawerRef",ref:c,onRefresh:L},null,8,["title","optionLoading","chatGroupList"]),e(Ge,{ref_key:"UserPwdDialogRef",ref:S,onRefresh:L},null,512),e(Ie,{optionLoading:k.value,chatGroupList:d.value,ref_key:"setUserGroupsRef",ref:ne,onRefresh:L},null,8,["optionLoading","chatGroupList"]),e(We,{ref_key:"syncUsersDialogRef",ref:re,onRefresh:L},null,512)])}}});export{sl as default};
