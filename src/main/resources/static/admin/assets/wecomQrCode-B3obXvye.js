import{aJ as u,aK as _,aP as f,cE as r,aQ as w,aL as L,aM as W,dr as h,e7 as y,d3 as C,cP as k}from"./admin-B3OaS6Gp.js";import{c as T,W as q,a as x,b as s,d as z}from"./wecom.prod-CCkvMpRe.js";const I={id:"wecom-qr",class:"wecom-qr flex"},S=u({__name:"wecomQrCode",props:{config:{}},setup(i){const l=_(),n=f(),{params:{accessToken:c}}=n,p=r({}),g=r({isWeComLogin:!1}),{chatUser:d}=w(),t=i;return(async()=>{await h();const o={corpId:t.config.corp_id,agentId:t.config.agent_id},a=localStorage.getItem("MaxKB-locale")||y()||"en-US",m=window.location.origin;try{p.value=T({el:"#wecom-qr",params:{login_type:z.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?s.zh:s.en,redirect_type:x.callback,panel_size:q.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){d.wecomCallback(e,c).then(()=>{setTimeout(()=>{l.push({name:"chat",params:{accessToken:c},query:n.query})})})},onLoginFail(e){C(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(W(),L("div",I))}}),E=k(S,[["__scopeId","data-v-78fde443"]]);export{E as default};
