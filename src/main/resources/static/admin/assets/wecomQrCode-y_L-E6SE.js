import{aJ as d,aK as m,aQ as _,cE as c,aL as u,aM as f,dv as w,e6 as L,d4 as W,cP as h}from"./admin-B6VfIzX8.js";import{c as y,W as C,a as k,b as t,d as x}from"./wecom.prod-CCkvMpRe.js";const z={id:"wecom-qr",class:"wecom-qr flex"},I=d({__name:"wecomQrCode",props:{config:{}},setup(r){const s=m(),{login:i}=_(),l=c({}),g=c({isWeComLogin:!1}),n=r;return(async()=>{await w();const o={corpId:n.config.corp_id,agentId:n.config.agent_id},a=localStorage.getItem("MaxKB-locale")||L()||"en-US",p=window.location.origin;try{l.value=y({el:"#wecom-qr",params:{login_type:x.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:p,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?t.zh:t.en,redirect_type:k.callback,panel_size:C.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){i.wecomCallback(e).then(()=>{setTimeout(()=>{s.push({name:"home"})})})},onLoginFail(e){W(`${e.errMsg}`)}})}catch(e){console.error("Error initializing login panel:",e)}})(),(o,a)=>(f(),u("div",z))}}),b=h(I,[["__scopeId","data-v-1f970287"]]);export{b as default};
