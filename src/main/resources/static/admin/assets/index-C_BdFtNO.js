var qD=Object.defineProperty;var YD=(e,t,n)=>t in e?qD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ma=(e,t,n)=>YD(e,typeof t!="symbol"?t+"":t,n);import{aY as kv,aZ as Su,a_ as Br,a$ as IS,b0 as ih,b1 as Ym,b2 as zd,b3 as ah,b4 as IT,b5 as js,b6 as Fs,af as Oi,b7 as KD,b8 as yc,b9 as Kw,ba as ZD,bb as Km,bc as Is,bd as Zm,be as JD,bf as Lv,bg as ib,aE as ku,bh as QD,bi as lh,bj as LT,bk as sh,bl as Kd,z as Zw,bm as io,bn as ab,bo as Jm,bp as xu,bq as Lo,br as Rf,bs as gc,bt as $v,bu as Qm,bv as Pu,bw as Na,bx as eo,by as lb,bz as ej,bA as $T,bB as Cf,bC as FT,bD as UT,bE as fw,bF as aa,ag as Au,bG as tj,bH as nj,bI as sb,bJ as VT,bK as uh,bL as BT,ab as Jw,bM as Fv,A as Uv,bN as Vm,bO as ey,ae as WT,bP as GT,bQ as rj,bR as Pv,bS as oj,bT as zT,bU as HT,bV as XT,bW as ij,bX as aj,bY as lj,bZ as sj,b_ as uj,b$ as cj,c0 as fj,c1 as Pg,c2 as dj,c3 as pj,c4 as qT,c5 as YT,c6 as KT,c7 as ZT,c8 as Qw,c9 as hj,ca as ty,cb as JT,cc as vj,cd as QT,ce as eM,cf as mj,cg as yj,ch as gj,ci as eh,ad as bj,cj as _j,ck as wj,aF as Ej,cl as Oj,cm as Sj,cn as xj,co as Aj,cp as Tj,cq as Mj,cr as kj,aa as Pj,ah as Rj,cs as Nj,aG as Cj,ct as Dj,cu as jj,cv as Ij,cw as Lj,cx as $j,cy as Fj,a9 as Uj,ai as Vj,cz as Bj,p as Wj,cA as Gj,cB as zj,cC as Hj,cD as Xj,aJ as er,cE as $e,cF as ub,aS as ee,aL as en,aM as Se,cG as Sr,aX as k,aN as K,aT as lt,cH as ao,cI as N,aU as kn,aV as Qn,cJ as dw,cK as Qp,cL as LS,aO as _e,cM as eE,cN as ot,cO as Qt,cP as Zd,cQ as is,aP as Zi,aQ as tE,cR as qj,aR as Zn,cS as tM,cT as qr,cU as Ra,cV as Yj,cW as th,cX as pw,cY as hw,cZ as $S,c_ as go,c$ as Te,d0 as Hd,aW as Ds,d1 as Kj,d2 as vw,d3 as mi,d4 as St,d5 as nE,d6 as ei,d7 as Df,d8 as gr,d9 as os,da as Ou,Q as Zj,db as ch,dc as Rv,dd as Jj,de as Qj,df as nM,dg as rM,dh as eI,di as tI,dj as nI,dk as rI,dl as oI,dm as oo,dn as rE,dp as iI,dq as aI,dr as Nv,ds as lI,dt as Xd,du as fl,dv as sI,dw as FS,dx as uI,dy as cI,dz as fI,dA as dI,dB as pI,dC as oE,dD as iE,dE as hI,dF as mw,aK as vI,dG as US,dH as mI,dI as yI,dJ as Tf,dK as Pl,dL as _u,dM as Ga,dN as Ud,dO as gI}from"./admin-D34-7Nu8.js";import{g as bI,t as VS,a as BS,i as Ru,n as _I,c as wI,b as EI}from"./data-FmHsqaM9.js";import{_ as fh,G as oM,a as OI,b as SI,c as iM,d as aM,e as xI}from"./GeneratePromptDialog-CleknjSz.js";import{b as lM,c as dh,v as Vv,d as AI,e as TI,g as sM,a as MI,f as kI,r as PI,h as RI}from"./reduce-Dxkaukqc.js";import{h as NI,i as uM,j as CI,k as DI,l as jI,n as II,o as LI,p as $I,z as FI,q as UI,s as VI,f as BI,a as WI,m as GI,b as zI,d as HI,c as XI,e as qI,g as YI,r as KI,u as ZI}from"./zipObject-1lrzQ6PJ.js";import{l as JI,_ as QI}from"./vue-draggable-plus-YkmDQVYQ.js";import{_ as e8}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-DFTT4Hvr.js";import{_ as cn}from"./defineProperty-DbXIQDXj.js";import"./typeof-QjJsDpFa.js";var t8=NaN;function WS(e){return typeof e=="number"?e:kv(e)?t8:+e}function cb(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=Su(n),a=Su(a)):(n=WS(n),a=WS(a)),r=e(n,a)}return r}}var n8=cb(function(e,t){return e+t},0),r8="Expected a function";function o8(e,t){if(typeof t!="function")throw new TypeError(r8);return e=Br(e),function(){if(--e<1)return t.apply(this,arguments)}}var Rg=IS&&new IS,cM=Rg?function(e,t){return Rg.set(e,t),e}:ih;function Bm(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ym(e.prototype),a=e.apply(n,t);return zd(a)?a:n}}var i8=1;function a8(e,t,n){var a=t&i8,r=Bm(e);function s(){var c=this&&this!==ah&&this instanceof s?r:e;return c.apply(a?n:this,arguments)}return s}var l8=Math.max;function fM(e,t,n,a){for(var r=-1,s=e.length,c=n.length,v=-1,f=t.length,g=l8(s-c,0),b=Array(f+g),_=!a;++v<f;)b[v]=t[v];for(;++r<c;)(_||r<s)&&(b[n[r]]=e[r]);for(;g--;)b[v++]=e[r++];return b}var s8=Math.max;function dM(e,t,n,a){for(var r=-1,s=e.length,c=-1,v=n.length,f=-1,g=t.length,b=s8(s-v,0),_=Array(b+g),S=!a;++r<b;)_[r]=e[r];for(var A=r;++f<g;)_[A+f]=t[f];for(;++c<v;)(S||r<s)&&(_[A+n[c]]=e[r++]);return _}function u8(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function fb(){}var c8=4294967295;function Qr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c8,this.__views__=[]}Qr.prototype=Ym(fb.prototype);Qr.prototype.constructor=Qr;var aE=Rg?function(e){return Rg.get(e)}:IT,wv={},f8=Object.prototype,d8=f8.hasOwnProperty;function yg(e){for(var t=e.name+"",n=wv[t],a=d8.call(wv,t)?n.length:0;a--;){var r=n[a],s=r.func;if(s==null||s==e)return r.name}return t}function Ls(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Ls.prototype=Ym(fb.prototype);Ls.prototype.constructor=Ls;function pM(e){if(e instanceof Qr)return e.clone();var t=new Ls(e.__wrapped__,e.__chain__);return t.__actions__=js(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var p8=Object.prototype,h8=p8.hasOwnProperty;function ue(e){if(Fs(e)&&!Oi(e)&&!(e instanceof Qr)){if(e instanceof Ls)return e;if(h8.call(e,"__wrapped__"))return pM(e)}return new Ls(e)}ue.prototype=fb.prototype;ue.prototype.constructor=ue;function yw(e){var t=yg(e),n=ue[t];if(typeof n!="function"||!(t in Qr.prototype))return!1;if(e===n)return!0;var a=aE(n);return!!a&&e===a[0]}var hM=KD(cM),v8=/\{\n\/\* \[wrapped with (.+)\] \*/,m8=/,? & /;function y8(e){var t=e.match(v8);return t?t[1].split(m8):[]}var g8=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function b8(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(g8,`{
/* [wrapped with `+t+`] */
`)}var _8=1,w8=2,E8=8,O8=16,S8=32,x8=64,A8=128,T8=256,M8=512,k8=[["ary",A8],["bind",_8],["bindKey",w8],["curry",E8],["curryRight",O8],["flip",M8],["partial",S8],["partialRight",x8],["rearg",T8]];function P8(e,t){return yc(k8,function(n){var a="_."+n[0];t&n[1]&&!Kw(e,a)&&e.push(a)}),e.sort()}function vM(e,t,n){var a=t+"";return ZD(e,b8(a,P8(y8(a),n)))}var R8=4,N8=8,GS=32,zS=64;function mM(e,t,n,a,r,s,c,v,f,g){var b=t&N8,_=b?c:void 0,S=b?void 0:c,A=b?s:void 0,M=b?void 0:s;t|=b?GS:zS,t&=~(b?zS:GS),t&R8||(t&=-4);var x=[e,t,r,A,_,M,S,v,f,g],E=n.apply(void 0,x);return yw(e)&&hM(E,x),E.placeholder=a,vM(E,e,t)}function Bv(e){var t=e;return t.placeholder}var C8=Math.min;function D8(e,t){for(var n=e.length,a=C8(t.length,n),r=js(e);a--;){var s=t[a];e[a]=Km(s,n)?r[s]:void 0}return e}var HS="__lodash_placeholder__";function qd(e,t){for(var n=-1,a=e.length,r=0,s=[];++n<a;){var c=e[n];(c===t||c===HS)&&(e[n]=HS,s[r++]=n)}return s}var j8=1,I8=2,L8=8,$8=16,F8=128,U8=512;function db(e,t,n,a,r,s,c,v,f,g){var b=t&F8,_=t&j8,S=t&I8,A=t&(L8|$8),M=t&U8,x=S?void 0:Bm(e);function E(){for(var j=arguments.length,D=Array(j),V=j;V--;)D[V]=arguments[V];if(A)var U=Bv(E),L=u8(D,U);if(a&&(D=fM(D,a,r,A)),s&&(D=dM(D,s,c,A)),j-=L,A&&j<g){var F=qd(D,U);return mM(e,t,db,E.placeholder,n,D,F,v,f,g-j)}var X=_?n:this,q=S?X[e]:e;return j=D.length,v?D=D8(D,v):M&&j>1&&D.reverse(),b&&f<j&&(D.length=f),this&&this!==ah&&this instanceof E&&(q=x||Bm(q)),q.apply(X,D)}return E}function V8(e,t,n){var a=Bm(e);function r(){for(var s=arguments.length,c=Array(s),v=s,f=Bv(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==f&&c[s-1]!==f?[]:qd(c,f);if(s-=g.length,s<n)return mM(e,t,db,r.placeholder,void 0,c,g,void 0,void 0,n-s);var b=this&&this!==ah&&this instanceof r?a:e;return Is(b,this,c)}return r}var B8=1;function W8(e,t,n,a){var r=t&B8,s=Bm(e);function c(){for(var v=-1,f=arguments.length,g=-1,b=a.length,_=Array(b+f),S=this&&this!==ah&&this instanceof c?s:e;++g<b;)_[g]=a[g];for(;f--;)_[g++]=arguments[++v];return Is(S,r?n:this,_)}return c}var XS="__lodash_placeholder__",w1=1,G8=2,z8=4,qS=8,wm=128,YS=256,H8=Math.min;function X8(e,t){var n=e[1],a=t[1],r=n|a,s=r<(w1|G8|wm),c=a==wm&&n==qS||a==wm&&n==YS&&e[7].length<=t[8]||a==(wm|YS)&&t[7].length<=t[8]&&n==qS;if(!(s||c))return e;a&w1&&(e[2]=t[2],r|=n&w1?0:z8);var v=t[3];if(v){var f=e[3];e[3]=f?fM(f,v,t[4]):v,e[4]=f?qd(e[3],XS):t[4]}return v=t[5],v&&(f=e[5],e[5]=f?dM(f,v,t[6]):v,e[6]=f?qd(e[5],XS):t[6]),v=t[7],v&&(e[7]=v),a&wm&&(e[8]=e[8]==null?t[8]:H8(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var q8="Expected a function",KS=1,Y8=2,ZS=8,JS=16,QS=32,K8=64,ex=Math.max;function Lf(e,t,n,a,r,s,c,v){var f=t&Y8;if(!f&&typeof e!="function")throw new TypeError(q8);var g=a?a.length:0;if(g||(t&=-97,a=r=void 0),c=c===void 0?c:ex(Br(c),0),v=v===void 0?v:Br(v),g-=r?r.length:0,t&K8){var b=a,_=r;a=r=void 0}var S=f?void 0:aE(e),A=[e,t,n,a,r,b,_,s,c,v];if(S&&X8(A,S),e=A[0],t=A[1],n=A[2],a=A[3],r=A[4],v=A[9]=A[9]===void 0?f?0:e.length:ex(A[9]-g,0),!v&&t&(ZS|JS)&&(t&=-25),!t||t==KS)var M=a8(e,t,n);else t==ZS||t==JS?M=V8(e,t,v):(t==QS||t==(KS|QS))&&!r.length?M=W8(e,t,n,a):M=db.apply(void 0,A);var x=S?cM:hM;return vM(x(M,A),e,t)}var Z8=128;function yM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Lf(e,Z8,void 0,void 0,void 0,void 0,t)}var J8=Object.prototype,Q8=J8.hasOwnProperty,eL=Zm(function(e,t){if(JD(t)||Lv(t)){ib(t,ku(t),e);return}for(var n in t)Q8.call(t,n)&&QD(e,n,t[n])}),tL=Zm(function(e,t){ib(t,lh(t),e)}),gw=Zm(function(e,t,n,a){ib(t,lh(t),e,a)}),nL=Zm(function(e,t,n,a){ib(t,ku(t),e,a)});function lE(e,t){for(var n=-1,a=t.length,r=Array(a),s=e==null;++n<a;)r[n]=s?void 0:LT(e,t[n]);return r}var rL=sh(lE),oL="[object DOMException]",iL="[object Error]";function sE(e){if(!Fs(e))return!1;var t=Kd(e);return t==iL||t==oL||typeof e.message=="string"&&typeof e.name=="string"&&!Zw(e)}var gM=io(function(e,t){try{return Is(e,void 0,t)}catch(n){return sE(n)?n:new Error(n)}}),aL="Expected a function";function bM(e,t){var n;if(typeof t!="function")throw new TypeError(aL);return e=Br(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var lL=1,sL=32,pb=io(function(e,t,n){var a=lL;if(n.length){var r=qd(n,Bv(pb));a|=sL}return Lf(e,a,t,n,r)});pb.placeholder={};var uL=sh(function(e,t){return yc(t,function(n){n=ab(n),Jm(e,n,pb(e[n],e))}),e}),cL=1,fL=2,dL=32,uE=io(function(e,t,n){var a=cL|fL;if(n.length){var r=qd(n,Bv(uE));a|=dL}return Lf(t,a,e,n,r)});uE.placeholder={};function Jd(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:xu(e,t,n)}var pL="\\ud800-\\udfff",hL="\\u0300-\\u036f",vL="\\ufe20-\\ufe2f",mL="\\u20d0-\\u20ff",yL=hL+vL+mL,gL="\\ufe0e\\ufe0f",bL="\\u200d",_L=RegExp("["+bL+pL+yL+gL+"]");function Wv(e){return _L.test(e)}function wL(e){return e.split("")}var _M="\\ud800-\\udfff",EL="\\u0300-\\u036f",OL="\\ufe20-\\ufe2f",SL="\\u20d0-\\u20ff",xL=EL+OL+SL,AL="\\ufe0e\\ufe0f",TL="["+_M+"]",bw="["+xL+"]",_w="\\ud83c[\\udffb-\\udfff]",ML="(?:"+bw+"|"+_w+")",wM="[^"+_M+"]",EM="(?:\\ud83c[\\udde6-\\uddff]){2}",OM="[\\ud800-\\udbff][\\udc00-\\udfff]",kL="\\u200d",SM=ML+"?",xM="["+AL+"]?",PL="(?:"+kL+"(?:"+[wM,EM,OM].join("|")+")"+xM+SM+")*",RL=xM+SM+PL,NL="(?:"+[wM+bw+"?",bw,EM,OM,TL].join("|")+")",CL=RegExp(_w+"(?="+_w+")|"+NL+RL,"g");function DL(e){return e.match(CL)||[]}function Tu(e){return Wv(e)?DL(e):wL(e)}function AM(e){return function(t){t=Lo(t);var n=Wv(t)?Tu(t):void 0,a=n?n[0]:t.charAt(0),r=n?Jd(n,1).join(""):t.slice(1);return a[e]()+r}}var cE=AM("toUpperCase");function TM(e){return cE(Lo(e).toLowerCase())}function fE(e){return function(t){return e==null?void 0:e[t]}}var jL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},IL=fE(jL),LL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$L="\\u0300-\\u036f",FL="\\ufe20-\\ufe2f",UL="\\u20d0-\\u20ff",VL=$L+FL+UL,BL="["+VL+"]",WL=RegExp(BL,"g");function MM(e){return e=Lo(e),e&&e.replace(LL,IL).replace(WL,"")}var GL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function zL(e){return e.match(GL)||[]}var HL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function XL(e){return HL.test(e)}var kM="\\ud800-\\udfff",qL="\\u0300-\\u036f",YL="\\ufe20-\\ufe2f",KL="\\u20d0-\\u20ff",ZL=qL+YL+KL,PM="\\u2700-\\u27bf",RM="a-z\\xdf-\\xf6\\xf8-\\xff",JL="\\xac\\xb1\\xd7\\xf7",QL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",e4="\\u2000-\\u206f",t4=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",NM="A-Z\\xc0-\\xd6\\xd8-\\xde",n4="\\ufe0e\\ufe0f",CM=JL+QL+e4+t4,DM="['’]",tx="["+CM+"]",r4="["+ZL+"]",jM="\\d+",o4="["+PM+"]",IM="["+RM+"]",LM="[^"+kM+CM+jM+PM+RM+NM+"]",i4="\\ud83c[\\udffb-\\udfff]",a4="(?:"+r4+"|"+i4+")",l4="[^"+kM+"]",$M="(?:\\ud83c[\\udde6-\\uddff]){2}",FM="[\\ud800-\\udbff][\\udc00-\\udfff]",dv="["+NM+"]",s4="\\u200d",nx="(?:"+IM+"|"+LM+")",u4="(?:"+dv+"|"+LM+")",rx="(?:"+DM+"(?:d|ll|m|re|s|t|ve))?",ox="(?:"+DM+"(?:D|LL|M|RE|S|T|VE))?",UM=a4+"?",VM="["+n4+"]?",c4="(?:"+s4+"(?:"+[l4,$M,FM].join("|")+")"+VM+UM+")*",f4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",d4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",p4=VM+UM+c4,h4="(?:"+[o4,$M,FM].join("|")+")"+p4,v4=RegExp([dv+"?"+IM+"+"+rx+"(?="+[tx,dv,"$"].join("|")+")",u4+"+"+ox+"(?="+[tx,dv+nx,"$"].join("|")+")",dv+"?"+nx+"+"+rx,dv+"+"+ox,d4,f4,jM,h4].join("|"),"g");function m4(e){return e.match(v4)||[]}function BM(e,t,n){return e=Lo(e),t=n?void 0:t,t===void 0?XL(e)?m4(e):zL(e):e.match(t)||[]}var y4="['’]",g4=RegExp(y4,"g");function Gv(e){return function(t){return lM(BM(MM(t).replace(g4,"")),e,"")}}var b4=Gv(function(e,t,n){return t=t.toLowerCase(),e+(n?TM(t):t)}),_4=ah.isFinite,w4=Math.min;function dE(e){var t=Math[e];return function(n,a){if(n=Rf(n),a=a==null?0:w4(Br(a),292),a&&_4(n)){var r=(Lo(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+a));return r=(Lo(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var E4=dE("ceil");function WM(e){var t=ue(e);return t.__chain__=!0,t}var O4=Math.ceil,S4=Math.max;function x4(e,t,n){(n?gc(e,t,n):t===void 0)?t=1:t=S4(Br(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,s=0,c=Array(O4(a/t));r<a;)c[s++]=xu(e,r,r+=t);return c}function ph(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function A4(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Rf(n),n=n===n?n:0),t!==void 0&&(t=Rf(t),t=t===t?t:0),ph(Rf(e),t,n)}var T4=1,M4=4;function k4(e,t){return t=typeof t=="function"?t:void 0,$v(e,T4|M4,t)}var P4=4;function R4(e,t){return t=typeof t=="function"?t:void 0,$v(e,P4,t)}function N4(){return new Ls(this.value(),this.__chain__)}function C4(e){for(var t=-1,n=e==null?0:e.length,a=0,r=[];++t<n;){var s=e[t];s&&(r[a++]=s)}return r}function D4(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Qm(Oi(n)?js(n):[n],Pu(t,1))}var j4="Expected a function";function I4(e){var t=e==null?0:e.length,n=eo;return e=t?Na(e,function(a){if(typeof a[1]!="function")throw new TypeError(j4);return[n(a[0]),a[1]]}):[],io(function(a){for(var r=-1;++r<t;){var s=e[r];if(Is(s[0],this,a))return Is(s[1],this,a)}})}function GM(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function L4(e){var t=ku(e);return function(n){return GM(n,e,t)}}var $4=1;function F4(e){return L4($v(e,$4))}function U4(e,t){return t==null||GM(e,t,ku(t))}function V4(e,t,n,a){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(a,c,n(c),e)}return a}function B4(e,t,n,a){return lb(e,function(r,s,c){t(a,r,n(r),c)}),a}function hb(e,t){return function(n,a){var r=Oi(n)?V4:B4,s=t?t():{};return r(n,e,eo(a),s)}}var W4=Object.prototype,G4=W4.hasOwnProperty,z4=hb(function(e,t,n){G4.call(e,n)?++e[n]:Jm(e,n,1)});function H4(e,t){var n=Ym(e);return t==null?n:ej(n,t)}var X4=8;function pE(e,t,n){t=n?void 0:t;var a=Lf(e,X4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=pE.placeholder,a}pE.placeholder={};var q4=16;function hE(e,t,n){t=n?void 0:t;var a=Lf(e,q4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=hE.placeholder,a}hE.placeholder={};function Y4(e,t){return e==null||e!==e?t:e}function zM(e,t,n,a,r,s){return zd(e)&&zd(t)&&(s.set(t,e),$T(e,t,void 0,zM,s),s.delete(t)),e}var HM=Zm(function(e,t,n,a){$T(e,t,n,a)}),K4=io(function(e){return e.push(void 0,zM),Is(HM,void 0,e)}),Z4="Expected a function";function XM(e,t,n){if(typeof e!="function")throw new TypeError(Z4);return setTimeout(function(){e.apply(void 0,n)},t)}var J4=io(function(e,t){return XM(e,1,t)}),Q4=io(function(e,t,n){return XM(e,Rf(t)||0,n)}),e6=200;function ny(e,t,n,a){var r=-1,s=Kw,c=!0,v=e.length,f=[],g=t.length;if(!v)return f;n&&(t=Na(t,Cf(n))),a?(s=UT,c=!1):t.length>=e6&&(s=fw,c=!1,t=new FT(t));e:for(;++r<v;){var b=e[r],_=n==null?b:n(b);if(b=a||b!==0?b:0,c&&_===_){for(var S=g;S--;)if(t[S]===_)continue e;f.push(b)}else s(t,_,a)||f.push(b)}return f}var t6=io(function(e,t){return aa(e)?ny(e,Pu(t,1,aa,!0)):[]}),n6=io(function(e,t){var n=Au(t);return aa(n)&&(n=void 0),aa(e)?ny(e,Pu(t,1,aa,!0),eo(n)):[]}),r6=io(function(e,t){var n=Au(t);return aa(n)&&(n=void 0),aa(e)?ny(e,Pu(t,1,aa,!0),void 0,n):[]}),o6=cb(function(e,t){return e/t},1);function i6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Br(t),xu(e,t<0?0:t,a)):[]}function a6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Br(t),t=a-t,xu(e,0,t<0?0:t)):[]}function vb(e,t,n,a){for(var r=e.length,s=a?r:-1;(a?s--:++s<r)&&t(e[s],s,e););return n?xu(e,a?0:s,a?s+1:r):xu(e,a?s+1:0,a?r:s)}function l6(e,t){return e&&e.length?vb(e,eo(t),!0,!0):[]}function s6(e,t){return e&&e.length?vb(e,eo(t),!0):[]}function u6(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var qM=tj(!0);function vE(e,t){return e&&qM(e,t,ku)}var YM=nj(vE,!0);function c6(e,t){var n=Oi(e)?u6:YM;return n(e,dh(t))}function f6(e,t,n){e=Lo(e),t=Su(t);var a=e.length;n=n===void 0?a:ph(Br(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function d6(e,t){return Na(t,function(n){return[n,e[n]]})}function p6(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var h6="[object Map]",v6="[object Set]";function KM(e){return function(t){var n=sb(t);return n==h6?VT(t):n==v6?p6(t):d6(t,e(t))}}var m6=KM(ku),y6=KM(lh),g6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b6=fE(g6),ZM=/[&<>"']/g,_6=RegExp(ZM.source);function JM(e){return e=Lo(e),e&&_6.test(e)?e.replace(ZM,b6):e}var QM=/[\\^$.*+?()[\]{}|]/g,w6=RegExp(QM.source);function E6(e){return e=Lo(e),e&&w6.test(e)?e.replace(QM,"\\$&"):e}function ek(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function O6(e,t){var n=!0;return lb(e,function(a,r,s){return n=!!t(a,r,s),n}),n}function S6(e,t,n){var a=Oi(e)?ek:O6;return n&&gc(e,t,n)&&(t=void 0),a(e,eo(t))}var x6=4294967295;function tk(e){return e?ph(Br(e),0,x6):0}function A6(e,t,n,a){var r=e.length;for(n=Br(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:Br(a),a<0&&(a+=r),a=n>a?0:tk(a);n<a;)e[n++]=t;return e}function T6(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&gc(e,t,n)&&(n=0,a=r),A6(e,t,n,a)):[]}function nk(e,t,n){var a;return n(e,function(r,s,c){if(t(r,s,c))return a=s,!1}),a}function M6(e,t){return nk(e,eo(t),uh)}var k6=NI(BT);function P6(e,t){return nk(e,eo(t),vE)}function R6(e){return e&&e.length?e[0]:void 0}var N6=1/0;function C6(e,t){return Pu(Jw(e,t),N6)}function D6(e,t,n){return n=n===void 0?1:Br(n),Pu(Jw(e,t),n)}function j6(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Br(t),Pu(e,t)):[]}var I6=512;function L6(e){return Lf(e,I6)}var $6=dE("floor"),F6="Expected a function",U6=8,V6=32,B6=128,W6=256;function rk(e){return sh(function(t){var n=t.length,a=n,r=Ls.prototype.thru;for(e&&t.reverse();a--;){var s=t[a];if(typeof s!="function")throw new TypeError(F6);if(r&&!c&&yg(s)=="wrapper")var c=new Ls([],!0)}for(a=c?a:n;++a<n;){s=t[a];var v=yg(s),f=v=="wrapper"?aE(s):void 0;f&&yw(f[0])&&f[1]==(B6|U6|V6|W6)&&!f[4].length&&f[9]==1?c=c[yg(f[0])].apply(c,f[3]):c=s.length==1&&yw(s)?c[v]():c.thru(s)}return function(){var g=arguments,b=g[0];if(c&&g.length==1&&Oi(b))return c.plant(b).value();for(var _=0,S=n?t[_].apply(this,g):b;++_<n;)S=t[_].call(this,S);return S}})}var G6=rk(),z6=rk(!0);function H6(e,t){return e==null?e:qM(e,dh(t),lh)}function X6(e,t){return e&&vE(e,dh(t))}function mb(e,t){return Fv(t,function(n){return Uv(e[n])})}function q6(e){return e==null?[]:mb(e,ku(e))}function Y6(e){return e==null?[]:mb(e,lh(e))}var K6=Object.prototype,Z6=K6.hasOwnProperty,J6=hb(function(e,t,n){Z6.call(e,n)?e[n].push(t):Jm(e,n,[t])});function yb(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rf(t),n=Rf(n)),e(t,n)}}var Q6=yb(uM),e5=yb(function(e,t){return e>=t}),t5=Math.max,n5=Math.min;function r5(e,t,n){return e>=n5(t,n)&&e<t5(t,n)}function o5(e,t,n){return t=Vm(t),n===void 0?(n=t,t=0):n=Vm(n),e=Rf(e),r5(e,t,n)}var i5="[object String]";function gb(e){return typeof e=="string"||!Oi(e)&&Fs(e)&&Kd(e)==i5}var a5=Math.max;function l5(e,t,n,a){e=Lv(e)?e:Vv(e),n=n&&!a?Br(n):0;var r=e.length;return n<0&&(n=a5(r+n,0)),gb(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&ey(e,t,n)>-1}var s5=Math.max;function u5(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Br(n);return r<0&&(r=s5(a+r,0)),ey(e,t,r)}function c5(e){var t=e==null?0:e.length;return t?xu(e,0,-1):[]}var f5=Math.min;function mE(e,t,n){for(var a=n?UT:Kw,r=e[0].length,s=e.length,c=s,v=Array(s),f=1/0,g=[];c--;){var b=e[c];c&&t&&(b=Na(b,Cf(t))),f=f5(b.length,f),v[c]=!n&&(t||r>=120&&b.length>=120)?new FT(c&&b):void 0}b=e[0];var _=-1,S=v[0];e:for(;++_<r&&g.length<f;){var A=b[_],M=t?t(A):A;if(A=n||A!==0?A:0,!(S?fw(S,M):a(g,M,n))){for(c=s;--c;){var x=v[c];if(!(x?fw(x,M):a(e[c],M,n)))continue e}S&&S.push(M),g.push(A)}}return g}function yE(e){return aa(e)?e:[]}var d5=io(function(e){var t=Na(e,yE);return t.length&&t[0]===e[0]?mE(t):[]}),p5=io(function(e){var t=Au(e),n=Na(e,yE);return t===Au(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mE(n,eo(t)):[]}),h5=io(function(e){var t=Au(e),n=Na(e,yE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?mE(n,void 0,t):[]});function v5(e,t,n,a){return uh(e,function(r,s,c){t(a,n(r),s,c)}),a}function ok(e,t){return function(n,a){return v5(n,e,t(a),{})}}var m5=Object.prototype,y5=m5.toString,g5=ok(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=y5.call(t)),e[t]=n},WT(ih)),ik=Object.prototype,b5=ik.hasOwnProperty,_5=ik.toString,w5=ok(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=_5.call(t)),b5.call(e,t)?e[t].push(n):e[t]=[n]},eo);function ry(e,t,n){t=GT(t,e),e=rj(e,t);var a=e==null?e:e[ab(Au(t))];return a==null?void 0:Is(a,e,n)}var E5=io(ry),O5=io(function(e,t,n){var a=-1,r=typeof t=="function",s=Lv(e)?Array(e.length):[];return lb(e,function(c){s[++a]=r?Is(t,c,n):ry(c,t,n)}),s}),S5="[object ArrayBuffer]";function x5(e){return Fs(e)&&Kd(e)==S5}var ix=Pv&&Pv.isArrayBuffer,A5=ix?Cf(ix):x5,T5="[object Boolean]";function M5(e){return e===!0||e===!1||Fs(e)&&Kd(e)==T5}var k5="[object Date]";function P5(e){return Fs(e)&&Kd(e)==k5}var ax=Pv&&Pv.isDate,R5=ax?Cf(ax):P5;function N5(e){return Fs(e)&&e.nodeType===1&&!Zw(e)}function C5(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?oj(e,t,void 0,n):!!a}var D5=ah.isFinite;function j5(e){return typeof e=="number"&&D5(e)}function ak(e){return typeof e=="number"&&e==Br(e)}function I5(e,t){return e===t||zT(e,t,HT(t))}function L5(e,t,n){return n=typeof n=="function"?n:void 0,zT(e,t,HT(t),n)}var $5="[object Number]";function lk(e){return typeof e=="number"||Fs(e)&&Kd(e)==$5}function F5(e){return lk(e)&&e!=+e}var U5=ij?Uv:XT,V5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function B5(e){if(U5(e))throw new Error(V5);return aj(e)}var W5="[object RegExp]";function G5(e){return Fs(e)&&Kd(e)==W5}var lx=Pv&&Pv.isRegExp,gE=lx?Cf(lx):G5,sx=9007199254740991;function z5(e){return ak(e)&&e>=-sx&&e<=sx}var H5="[object WeakMap]";function X5(e){return Fs(e)&&sb(e)==H5}var q5="[object WeakSet]";function Y5(e){return Fs(e)&&Kd(e)==q5}var K5=1;function Z5(e){return eo(typeof e=="function"?e:$v(e,K5))}var J5=Array.prototype,Q5=J5.join;function e$(e,t){return e==null?"":Q5.call(e,t)}var t$=Gv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),n$=hb(function(e,t,n){Jm(e,n,t)});function r$(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var o$=Math.max,i$=Math.min;function a$(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=Br(n),r=r<0?o$(a+r,0):i$(r,a-1)),t===t?r$(e,t,r):lj(e,sj,r,!0)}var l$=Gv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),s$=AM("toLowerCase"),u$=yb(CI),c$=yb(function(e,t){return e<=t});function f$(e,t){var n={};return t=eo(t),uh(e,function(a,r,s){Jm(n,t(a,r,s),a)}),n}var d$=1;function p$(e){return uj($v(e,d$))}var h$=1;function v$(e,t){return cj(e,$v(t,h$))}function m$(e,t){return e&&e.length?DI(e,eo(t),uM):void 0}function bE(e,t){for(var n,a=-1,r=e.length;++a<r;){var s=t(e[a]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var y$=NaN;function sk(e,t){var n=e==null?0:e.length;return n?bE(e,t)/n:y$}function g$(e){return sk(e,ih)}function b$(e,t){return sk(e,eo(t))}var _$=io(function(e,t){return function(n){return ry(n,e,t)}}),w$=io(function(e,t){return function(n){return ry(e,n,t)}});function E$(e,t,n){var a=ku(t),r=mb(t,a),s=!(zd(n)&&"chain"in n)||!!n.chain,c=Uv(e);return yc(r,function(v){var f=t[v];e[v]=f,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var b=e(this.__wrapped__),_=b.__actions__=js(this.__actions__);return _.push({func:f,args:arguments,thisArg:e}),b.__chain__=g,b}return f.apply(e,Qm([this.value()],arguments))})}),e}var O$=cb(function(e,t){return e*t},1),S$="Expected a function";function bb(e){if(typeof e!="function")throw new TypeError(S$);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function x$(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var A$="[object Map]",T$="[object Set]",E1=Pg?Pg.iterator:void 0;function uk(e){if(!e)return[];if(Lv(e))return gb(e)?Tu(e):js(e);if(E1&&e[E1])return x$(e[E1]());var t=sb(e),n=t==A$?VT:t==T$?fj:Vv;return n(e)}function M$(){this.__values__===void 0&&(this.__values__=uk(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function ck(e,t){var n=e.length;if(n)return t+=t<0?n:0,Km(t,n)?e[t]:void 0}function k$(e,t){return e&&e.length?ck(e,Br(t)):void 0}function P$(e){return e=Br(e),io(function(t){return ck(t,e)})}function fk(e,t){if(e==null)return{};var n=Na(dj(e),function(a){return[a]});return t=eo(t),pj(e,n,function(a,r){return t(a,r[0])})}function R$(e,t){return fk(e,bb(eo(t)))}function N$(e){return bM(2,e)}function C$(e,t,n,a){return e==null?[]:(Oi(t)||(t=t==null?[]:[t]),n=a?void 0:n,Oi(n)||(n=n==null?[]:[n]),jI(e,t,n))}function _E(e){return sh(function(t){return t=Na(t,Cf(eo)),io(function(n){var a=this;return e(t,function(r){return Is(r,a,n)})})})}var D$=_E(Na),j$=io,I$=Math.min,L$=j$(function(e,t){t=t.length==1&&Oi(t[0])?Na(t[0],Cf(eo)):Na(Pu(t,1),Cf(eo));var n=t.length;return io(function(a){for(var r=-1,s=I$(a.length,n);++r<s;)a[r]=t[r].call(this,a[r]);return Is(e,this,a)})}),$$=_E(ek),F$=_E(qT),U$=9007199254740991,V$=Math.floor;function ww(e,t){var n="";if(!e||t<1||t>U$)return n;do t%2&&(n+=e),t=V$(t/2),t&&(e+=e);while(t);return n}var B$=YT("length"),dk="\\ud800-\\udfff",W$="\\u0300-\\u036f",G$="\\ufe20-\\ufe2f",z$="\\u20d0-\\u20ff",H$=W$+G$+z$,X$="\\ufe0e\\ufe0f",q$="["+dk+"]",Ew="["+H$+"]",Ow="\\ud83c[\\udffb-\\udfff]",Y$="(?:"+Ew+"|"+Ow+")",pk="[^"+dk+"]",hk="(?:\\ud83c[\\udde6-\\uddff]){2}",vk="[\\ud800-\\udbff][\\udc00-\\udfff]",K$="\\u200d",mk=Y$+"?",yk="["+X$+"]?",Z$="(?:"+K$+"(?:"+[pk,hk,vk].join("|")+")"+yk+mk+")*",J$=yk+mk+Z$,Q$="(?:"+[pk+Ew+"?",Ew,hk,vk,q$].join("|")+")",ux=RegExp(Ow+"(?="+Ow+")|"+Q$+J$,"g");function eF(e){for(var t=ux.lastIndex=0;ux.test(e);)++t;return t}function zv(e){return Wv(e)?eF(e):B$(e)}var tF=Math.ceil;function Ng(e,t){t=t===void 0?" ":Su(t);var n=t.length;if(n<2)return n?ww(t,e):t;var a=ww(t,tF(e/zv(t)));return Wv(t)?Jd(Tu(a),0,e).join(""):a.slice(0,e)}var nF=Math.ceil,rF=Math.floor;function oF(e,t,n){e=Lo(e),t=Br(t);var a=t?zv(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return Ng(rF(r),n)+e+Ng(nF(r),n)}function iF(e,t,n){e=Lo(e),t=Br(t);var a=t?zv(e):0;return t&&a<t?e+Ng(t-a,n):e}function aF(e,t,n){e=Lo(e),t=Br(t);var a=t?zv(e):0;return t&&a<t?Ng(t-a,n)+e:e}var lF=/^\s+/,sF=ah.parseInt;function uF(e,t,n){return n||t==null?t=0:t&&(t=+t),sF(Lo(e).replace(lF,""),t||0)}var cF=32,_b=io(function(e,t){var n=qd(t,Bv(_b));return Lf(e,cF,void 0,t,n)});_b.placeholder={};var fF=64,wE=io(function(e,t){var n=qd(t,Bv(wE));return Lf(e,fF,void 0,t,n)});wE.placeholder={};var dF=hb(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function pF(e){for(var t,n=this;n instanceof fb;){var a=pM(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function hF(e){return function(t){return e==null?void 0:KT(e,t)}}function vF(e,t,n,a){for(var r=n-1,s=e.length;++r<s;)if(a(e[r],t))return r;return-1}var mF=Array.prototype,cx=mF.splice;function EE(e,t,n,a){var r=a?vF:ey,s=-1,c=t.length,v=e;for(e===t&&(t=js(t)),n&&(v=Na(e,Cf(n)));++s<c;)for(var f=0,g=t[s],b=n?n(g):g;(f=r(v,b,f,a))>-1;)v!==e&&cx.call(v,f,1),cx.call(e,f,1);return e}function gk(e,t){return e&&e.length&&t&&t.length?EE(e,t):e}var yF=io(gk);function gF(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,eo(n)):e}function bF(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,void 0,n):e}var _F=Array.prototype,wF=_F.splice;function bk(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==s){var s=r;Km(r)?wF.call(e,r,1):ZT(e,r)}}return e}var EF=sh(function(e,t){var n=e==null?0:e.length,a=lE(e,t);return bk(e,Na(t,function(r){return Km(r,n)?+r:r}).sort(II)),a}),OF=Math.floor,SF=Math.random;function OE(e,t){return e+OF(SF()*(t-e+1))}var xF=parseFloat,AF=Math.min,TF=Math.random;function MF(e,t,n){if(n&&typeof n!="boolean"&&gc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Vm(e),t===void 0?(t=e,e=0):t=Vm(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=TF();return AF(e+r*(t-e+xF("1e-"+((r+"").length-1))),t)}return OE(e,t)}var kF=LI(!0),PF=256,RF=sh(function(e,t){return Lf(e,PF,void 0,void 0,void 0,t)});function NF(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function CF(e,t,n){var a=Oi(e)?NF:AI,r=arguments.length<3;return a(e,eo(t),n,r,YM)}function DF(e,t){var n=Oi(e)?Fv:TI;return n(e,bb(eo(t)))}function jF(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],s=e.length;for(t=eo(t);++a<s;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return bk(e,r),n}function IF(e,t,n){return(n?gc(e,t,n):t===void 0)?t=1:t=Br(t),ww(Lo(e),t)}function LF(){var e=arguments,t=Lo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var $F="Expected a function";function FF(e,t){if(typeof e!="function")throw new TypeError($F);return t=t===void 0?t:Br(t),io(e,t)}function UF(e,t,n){t=GT(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var s=e==null?void 0:e[ab(t[a])];s===void 0&&(a=r,s=n),e=Uv(s)?s.call(e):s}return e}var VF=Array.prototype,BF=VF.reverse;function Sw(e){return e==null?e:BF.call(e)}var WF=dE("round");function _k(e){var t=e.length;return t?e[OE(0,t-1)]:void 0}function GF(e){return _k(Vv(e))}function zF(e){var t=Oi(e)?_k:GF;return t(e)}function wb(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var s=OE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function HF(e,t){return wb(js(e),ph(t,0,e.length))}function XF(e,t){var n=Vv(e);return wb(n,ph(t,0,n.length))}function qF(e,t,n){(n?gc(e,t,n):t===void 0)?t=1:t=Br(t);var a=Oi(e)?HF:XF;return a(e,t)}function YF(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Qw(e,t,n,a)}function KF(e){return wb(js(e))}function ZF(e){return wb(Vv(e))}function JF(e){var t=Oi(e)?KF:ZF;return t(e)}var QF="[object Map]",e9="[object Set]";function t9(e){if(e==null)return 0;if(Lv(e))return gb(e)?zv(e):e.length;var t=sb(e);return t==QF||t==e9?e.size:hj(e).length}function n9(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&gc(e,t,n)?(t=0,n=a):(t=t==null?0:Br(t),n=n===void 0?a:Br(n)),xu(e,t,n)):[]}var r9=Gv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function o9(e,t){var n;return lb(e,function(a,r,s){return n=t(a,r,s),!n}),!!n}function i9(e,t,n){var a=Oi(e)?qT:o9;return n&&gc(e,t,n)&&(t=void 0),a(e,eo(t))}var a9=4294967295,l9=a9-1,s9=Math.floor,u9=Math.min;function SE(e,t,n,a){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,f=kv(t),g=t===void 0;r<s;){var b=s9((r+s)/2),_=n(e[b]),S=_!==void 0,A=_===null,M=_===_,x=kv(_);if(c)var E=a||M;else g?E=M&&(a||S):v?E=M&&S&&(a||!A):f?E=M&&S&&!A&&(a||!x):A||x?E=!1:E=a?_<=t:_<t;E?r=b+1:s=b}return u9(s,l9)}var c9=4294967295,f9=c9>>>1;function Eb(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=f9){for(;a<r;){var s=a+r>>>1,c=e[s];c!==null&&!kv(c)&&(n?c<=t:c<t)?a=s+1:r=s}return r}return SE(e,t,ih,n)}function d9(e,t){return Eb(e,t)}function p9(e,t,n){return SE(e,t,eo(n))}function h9(e,t){var n=e==null?0:e.length;if(n){var a=Eb(e,t);if(a<n&&ty(e[a],t))return a}return-1}function v9(e,t){return Eb(e,t,!0)}function m9(e,t,n){return SE(e,t,eo(n),!0)}function y9(e,t){var n=e==null?0:e.length;if(n){var a=Eb(e,t,!0)-1;if(ty(e[a],t))return a}return-1}function wk(e,t){for(var n=-1,a=e.length,r=0,s=[];++n<a;){var c=e[n],v=t?t(c):c;if(!n||!ty(v,f)){var f=v;s[r++]=c===0?0:c}}return s}function g9(e){return e&&e.length?wk(e):[]}function b9(e,t){return e&&e.length?wk(e,eo(t)):[]}var _9=4294967295;function w9(e,t,n){return n&&typeof n!="number"&&gc(e,t,n)&&(t=n=void 0),n=n===void 0?_9:n>>>0,n?(e=Lo(e),e&&(typeof t=="string"||t!=null&&!gE(t))&&(t=Su(t),!t&&Wv(e))?Jd(Tu(e),0,n):e.split(t,n)):[]}var E9="Expected a function",O9=Math.max;function S9(e,t){if(typeof e!="function")throw new TypeError(E9);return t=t==null?0:O9(Br(t),0),io(function(n){var a=n[t],r=Jd(n,0,t);return a&&Qm(r,a),Is(e,this,r)})}var x9=Gv(function(e,t,n){return e+(n?" ":"")+cE(t)});function A9(e,t,n){return e=Lo(e),n=n==null?0:ph(Br(n),0,e.length),t=Su(t),e.slice(n,n+t.length)==t}function T9(){return{}}function M9(){return""}function k9(){return!0}var P9=cb(function(e,t){return e-t},0);function R9(e){return e&&e.length?bE(e,ih):0}function N9(e,t){return e&&e.length?bE(e,eo(t)):0}function C9(e){var t=e==null?0:e.length;return t?xu(e,1,t):[]}function D9(e,t,n){return e&&e.length?(t=n||t===void 0?1:Br(t),xu(e,0,t<0?0:t)):[]}function j9(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Br(t),t=a-t,xu(e,t<0?0:t,a)):[]}function I9(e,t){return e&&e.length?vb(e,eo(t),!1,!0):[]}function L9(e,t){return e&&e.length?vb(e,eo(t)):[]}function $9(e,t){return t(e),e}var Ek=Object.prototype,F9=Ek.hasOwnProperty;function fx(e,t,n,a){return e===void 0||ty(e,Ek[n])&&!F9.call(a,n)?t:e}var U9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function V9(e){return"\\"+U9[e]}var Ok=/<%=([\s\S]+?)%>/g,B9=/<%-([\s\S]+?)%>/g,W9=/<%([\s\S]+?)%>/g,xw={escape:B9,evaluate:W9,interpolate:Ok,variable:"",imports:{_:{escape:JM}}},G9="Invalid `variable` option passed into `_.template`",z9=/\b__p \+= '';/g,H9=/\b(__p \+=) '' \+/g,X9=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q9=/[()=,{}\[\]\/\s]/,Y9=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ag=/($^)/,K9=/['\n\r\u2028\u2029\\]/g,Z9=Object.prototype,dx=Z9.hasOwnProperty;function J9(e,t,n){var a=xw.imports._.templateSettings||xw;n&&gc(e,t,n)&&(t=void 0),e=Lo(e),t=gw({},t,a,fx);var r=gw({},t.imports,a.imports,fx),s=ku(r),c=sM(r,s),v,f,g=0,b=t.interpolate||ag,_="__p += '",S=RegExp((t.escape||ag).source+"|"+b.source+"|"+(b===Ok?Y9:ag).source+"|"+(t.evaluate||ag).source+"|$","g"),A=dx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(S,function(E,j,D,V,U,L){return D||(D=V),_+=e.slice(g,L).replace(K9,V9),j&&(v=!0,_+=`' +
__e(`+j+`) +
'`),U&&(f=!0,_+=`';
`+U+`;
__p += '`),D&&(_+=`' +
((__t = (`+D+`)) == null ? '' : __t) +
'`),g=L+E.length,E}),_+=`';
`;var M=dx.call(t,"variable")&&t.variable;if(!M)_=`with (obj) {
`+_+`
}
`;else if(q9.test(M))throw new Error(G9);_=(f?_.replace(z9,""):_).replace(H9,"$1").replace(X9,"$1;"),_="function("+(M||"obj")+`) {
`+(M?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_+`return __p
}`;var x=gM(function(){return Function(s,A+"return "+_).apply(void 0,c)});if(x.source=_,sE(x))throw x;return x}function Ob(e,t){return t(e)}var Q9=9007199254740991,O1=4294967295,e7=Math.min;function t7(e,t){if(e=Br(e),e<1||e>Q9)return[];var n=O1,a=e7(e,O1);t=dh(t),e-=O1;for(var r=JT(a,t);++n<e;)t(n);return r}function n7(){return this}function Sk(e,t){var n=e;return n instanceof Qr&&(n=n.value()),lM(t,function(a,r){return r.func.apply(r.thisArg,Qm([a],r.args))},n)}function r7(){return Sk(this.__wrapped__,this.__actions__)}function o7(e){return Lo(e).toLowerCase()}function i7(e){return Oi(e)?Na(e,ab):kv(e)?[e]:js(vj(Lo(e)))}var px=9007199254740991;function a7(e){return e?ph(Br(e),-px,px):e===0?e:0}function l7(e){return Lo(e).toUpperCase()}function s7(e,t,n){var a=Oi(e),r=a||QT(e)||eM(e);if(t=eo(t),n==null){var s=e&&e.constructor;r?n=a?new s:[]:zd(e)?n=Uv(s)?Ym(mj(e)):{}:n={}}return(r?yc:uh)(e,function(c,v,f){return t(n,c,v,f)}),n}function xk(e,t){for(var n=e.length;n--&&ey(t,e[n],0)>-1;);return n}function Ak(e,t){for(var n=-1,a=e.length;++n<a&&ey(t,e[n],0)>-1;);return n}function u7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return yj(e);if(!e||!(t=Su(t)))return e;var a=Tu(e),r=Tu(t),s=Ak(a,r),c=xk(a,r)+1;return Jd(a,s,c).join("")}function c7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return e.slice(0,gj(e)+1);if(!e||!(t=Su(t)))return e;var a=Tu(e),r=xk(a,Tu(t))+1;return Jd(a,0,r).join("")}var f7=/^\s+/;function d7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return e.replace(f7,"");if(!e||!(t=Su(t)))return e;var a=Tu(e),r=Ak(a,Tu(t));return Jd(a,r).join("")}var p7=30,h7="...",v7=/\w*$/;function m7(e,t){var n=p7,a=h7;if(zd(t)){var r="separator"in t?t.separator:r;n="length"in t?Br(t.length):n,a="omission"in t?Su(t.omission):a}e=Lo(e);var s=e.length;if(Wv(e)){var c=Tu(e);s=c.length}if(n>=s)return e;var v=n-zv(a);if(v<1)return a;var f=c?Jd(c,0,v).join(""):e.slice(0,v);if(r===void 0)return f+a;if(c&&(v+=f.length-v),gE(r)){if(e.slice(v).search(r)){var g,b=f;for(r.global||(r=RegExp(r.source,Lo(v7.exec(r))+"g")),r.lastIndex=0;g=r.exec(b);)var _=g.index;f=f.slice(0,_===void 0?v:_)}}else if(e.indexOf(Su(r),v)!=v){var S=f.lastIndexOf(r);S>-1&&(f=f.slice(0,S))}return f+a}function y7(e){return yM(e,1)}var g7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},b7=fE(g7),Tk=/&(?:amp|lt|gt|quot|#39);/g,_7=RegExp(Tk.source);function w7(e){return e=Lo(e),e&&_7.test(e)?e.replace(Tk,b7):e}var E7=io(function(e){var t=Au(e);return aa(t)&&(t=void 0),eh(Pu(e,1,aa,!0),eo(t))}),O7=io(function(e){var t=Au(e);return t=typeof t=="function"?t:void 0,eh(Pu(e,1,aa,!0),void 0,t)});function S7(e){return e&&e.length?eh(e):[]}function x7(e,t){return e&&e.length?eh(e,eo(t)):[]}function A7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?eh(e,void 0,t):[]}function T7(e,t){return e==null?!0:ZT(e,t)}var M7=Math.max;function xE(e){if(!(e&&e.length))return[];var t=0;return e=Fv(e,function(n){if(aa(n))return t=M7(n.length,t),!0}),JT(t,function(n){return Na(e,YT(n))})}function Mk(e,t){if(!(e&&e.length))return[];var n=xE(e);return t==null?n:Na(n,function(a){return Is(t,void 0,a)})}function kk(e,t,n,a){return Qw(e,t,n(KT(e,t)),a)}function k7(e,t,n){return e==null?e:kk(e,t,dh(n))}function P7(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:kk(e,t,dh(n),a)}var R7=Gv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function N7(e){return e==null?[]:sM(e,lh(e))}var C7=io(function(e,t){return aa(e)?ny(e,t):[]});function D7(e,t){return _b(dh(t),e)}var j7=sh(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(s){return lE(s,e)};return t>1||this.__actions__.length||!(a instanceof Qr)||!Km(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:Ob,args:[r],thisArg:void 0}),new Ls(a,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});function I7(){return WM(this)}function L7(){var e=this.__wrapped__;if(e instanceof Qr){var t=e;return this.__actions__.length&&(t=new Qr(this)),t=t.reverse(),t.__actions__.push({func:Ob,args:[Sw],thisArg:void 0}),new Ls(t,this.__chain__)}return this.thru(Sw)}function AE(e,t,n){var a=e.length;if(a<2)return a?eh(e[0]):[];for(var r=-1,s=Array(a);++r<a;)for(var c=e[r],v=-1;++v<a;)v!=r&&(s[r]=ny(s[r]||c,e[v],t,n));return eh(Pu(s,1),t,n)}var $7=io(function(e){return AE(Fv(e,aa))}),F7=io(function(e){var t=Au(e);return aa(t)&&(t=void 0),AE(Fv(e,aa),eo(t))}),U7=io(function(e){var t=Au(e);return t=typeof t=="function"?t:void 0,AE(Fv(e,aa),void 0,t)}),V7=io(xE);function B7(e,t){return $I(e||[],t||[],Qw)}var W7=io(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,Mk(e,n)});const Ln={chunk:x4,compact:C4,concat:D4,difference:t6,differenceBy:n6,differenceWith:r6,drop:i6,dropRight:a6,dropRightWhile:l6,dropWhile:s6,fill:T6,findIndex:UI,findLastIndex:BT,flatten:bj,flattenDeep:_j,flattenDepth:j6,fromPairs:wj,head:R6,indexOf:u5,initial:c5,intersection:d5,intersectionBy:p5,intersectionWith:h5,join:e$,lastIndexOf:a$,nth:k$,pull:yF,pullAll:gk,pullAllBy:gF,pullAllWith:bF,pullAt:EF,remove:jF,reverse:Sw,slice:n9,sortedIndex:d9,sortedIndexBy:p9,sortedIndexOf:h9,sortedLastIndex:v9,sortedLastIndexBy:m9,sortedLastIndexOf:y9,sortedUniq:g9,sortedUniqBy:b9,tail:C9,take:D9,takeRight:j9,takeRightWhile:I9,takeWhile:L9,union:Ej,unionBy:E7,unionWith:O7,uniq:S7,uniqBy:x7,uniqWith:A7,unzip:xE,unzipWith:Mk,without:C7,xor:$7,xorBy:F7,xorWith:U7,zip:V7,zipObject:FI,zipObjectDeep:B7,zipWith:W7},$o={countBy:z4,every:S6,filter:MI,find:BI,findLast:k6,flatMap:Oj,flatMapDeep:C6,flatMapDepth:D6,forEach:kI,forEachRight:c6,groupBy:J6,includes:l5,invokeMap:O5,keyBy:n$,map:Jw,orderBy:C$,partition:dF,reduce:PI,reduceRight:CF,reject:DF,sample:zF,sampleSize:qF,shuffle:JF,size:t9,some:i9,sortBy:VI},G7={now:Sj},ji={after:o8,ary:yM,before:bM,bind:pb,bindKey:uE,curry:pE,curryRight:hE,debounce:xj,defer:J4,delay:Q4,flip:L6,memoize:Aj,once:N$,overArgs:L$,partial:_b,partialRight:wE,rearg:RF,rest:FF,spread:S9,throttle:Tj,unary:y7,wrap:D7},cr={castArray:Mj,clone:Pj,cloneDeep:Rj,cloneDeepWith:k4,cloneWith:R4,conformsTo:U4,eq:ty,gt:Q6,gte:e5,isArguments:Nj,isArrayBuffer:A5,isArrayLike:Lv,isArrayLikeObject:aa,isBoolean:M5,isBuffer:QT,isDate:R5,isElement:N5,isEmpty:Cj,isEqual:Dj,isEqualWith:C5,isError:sE,isFinite:j5,isFunction:Uv,isInteger:ak,isLength:jj,isMap:Ij,isMatch:I5,isMatchWith:L5,isNaN:F5,isNative:B5,isNil:Lj,isNull:$j,isNumber:lk,isObjectLike:Fs,isPlainObject:Zw,isRegExp:gE,isSafeInteger:z5,isSet:Fj,isString:gb,isSymbol:kv,isTypedArray:eM,isUndefined:Uj,isWeakMap:X5,isWeakSet:Y5,lt:u$,lte:c$,toArray:uk,toFinite:Vm,toLength:tk,toNumber:Rf,toPlainObject:kj,toSafeInteger:a7,toString:Lo},pl={add:n8,ceil:E4,divide:o6,floor:$6,max:WI,maxBy:m$,mean:g$,meanBy:b$,min:GI,minBy:zI,multiply:O$,round:WF,subtract:P9,sum:R9,sumBy:N9},TE={clamp:A4,inRange:o5,random:MF},xr={assign:eL,assignIn:tL,assignInWith:gw,assignWith:nL,at:rL,create:H4,defaults:HI,defaultsDeep:K4,findKey:M6,findLastKey:P6,forIn:qI,forInRight:H6,forOwn:YI,forOwnRight:X6,functions:q6,functionsIn:Y6,get:LT,has:RI,hasIn:zj,invert:g5,invertBy:w5,invoke:E5,keysIn:lh,mapKeys:f$,mapValues:XI,merge:Vj,mergeWith:HM,omit:Bj,omitBy:R$,pick:Wj,pickBy:fk,result:UF,set:Gj,setWith:YF,toPairs:m6,toPairsIn:y6,transform:s7,unset:T7,update:k7,updateWith:P7,values:Vv,valuesIn:N7},bc={at:j7,chain:WM,commit:N4,next:M$,plant:pF,reverse:L7,tap:$9,toIterator:n7,value:r7,wrapperChain:I7},bo={camelCase:b4,capitalize:TM,deburr:MM,endsWith:f6,escape:JM,escapeRegExp:E6,kebabCase:t$,lowerCase:l$,lowerFirst:s$,pad:oF,padEnd:iF,padStart:aF,parseInt:uF,repeat:IF,replace:LF,snakeCase:r9,split:w9,startCase:x9,startsWith:A9,template:J9,templateSettings:xw,toLower:o7,toUpper:l7,trim:u7,trimEnd:c7,trimStart:d7,truncate:m7,unescape:w7,upperCase:R7,upperFirst:cE,words:BM},xo={attempt:gM,bindAll:uL,cond:I4,conforms:F4,constant:WT,defaultTo:Y4,flow:G6,flowRight:z6,iteratee:Z5,matches:p$,matchesProperty:v$,method:_$,methodOf:w$,noop:IT,nthArg:P$,over:D$,overEvery:$$,overSome:F$,property:Hj,propertyOf:hF,range:KI,rangeRight:kF,stubArray:Xj,stubFalse:XT,stubObject:T9,stubString:M9,stubTrue:k9,times:t7,toPath:i7,uniqueId:ZI};function z7(){var e=new Qr(this.__wrapped__);return e.__actions__=js(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=js(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=js(this.__views__),e}function H7(){if(this.__filtered__){var e=new Qr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var X7=Math.max,q7=Math.min;function Y7(e,t,n){for(var a=-1,r=n.length;++a<r;){var s=n[a],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=q7(t,e+c);break;case"takeRight":e=X7(e,t-c);break}}return{start:e,end:t}}var K7=1,Z7=2,J7=Math.min;function Q7(){var e=this.__wrapped__.value(),t=this.__dir__,n=Oi(e),a=t<0,r=n?e.length:0,s=Y7(0,r,this.__views__),c=s.start,v=s.end,f=v-c,g=a?v:c-1,b=this.__iteratees__,_=b.length,S=0,A=J7(f,this.__takeCount__);if(!n||!a&&r==f&&A==f)return Sk(e,this.__actions__);var M=[];e:for(;f--&&S<A;){g+=t;for(var x=-1,E=e[g];++x<_;){var j=b[x],D=j.iteratee,V=j.type,U=D(E);if(V==Z7)E=U;else if(!U){if(V==K7)continue e;break e}}M[S++]=E}return M}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var eU="4.17.21",tU=2,nU=1,rU=3,Pk=4294967295,oU=Array.prototype,iU=Object.prototype,Rk=iU.hasOwnProperty,hx=Pg?Pg.iterator:void 0,aU=Math.max,vx=Math.min,ME=function(e){return function(t,n,a){if(a==null){var r=zd(n),s=r&&ku(n),c=s&&s.length&&mb(n,s);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(E$);ue.after=ji.after;ue.ary=ji.ary;ue.assign=xr.assign;ue.assignIn=xr.assignIn;ue.assignInWith=xr.assignInWith;ue.assignWith=xr.assignWith;ue.at=xr.at;ue.before=ji.before;ue.bind=ji.bind;ue.bindAll=xo.bindAll;ue.bindKey=ji.bindKey;ue.castArray=cr.castArray;ue.chain=bc.chain;ue.chunk=Ln.chunk;ue.compact=Ln.compact;ue.concat=Ln.concat;ue.cond=xo.cond;ue.conforms=xo.conforms;ue.constant=xo.constant;ue.countBy=$o.countBy;ue.create=xr.create;ue.curry=ji.curry;ue.curryRight=ji.curryRight;ue.debounce=ji.debounce;ue.defaults=xr.defaults;ue.defaultsDeep=xr.defaultsDeep;ue.defer=ji.defer;ue.delay=ji.delay;ue.difference=Ln.difference;ue.differenceBy=Ln.differenceBy;ue.differenceWith=Ln.differenceWith;ue.drop=Ln.drop;ue.dropRight=Ln.dropRight;ue.dropRightWhile=Ln.dropRightWhile;ue.dropWhile=Ln.dropWhile;ue.fill=Ln.fill;ue.filter=$o.filter;ue.flatMap=$o.flatMap;ue.flatMapDeep=$o.flatMapDeep;ue.flatMapDepth=$o.flatMapDepth;ue.flatten=Ln.flatten;ue.flattenDeep=Ln.flattenDeep;ue.flattenDepth=Ln.flattenDepth;ue.flip=ji.flip;ue.flow=xo.flow;ue.flowRight=xo.flowRight;ue.fromPairs=Ln.fromPairs;ue.functions=xr.functions;ue.functionsIn=xr.functionsIn;ue.groupBy=$o.groupBy;ue.initial=Ln.initial;ue.intersection=Ln.intersection;ue.intersectionBy=Ln.intersectionBy;ue.intersectionWith=Ln.intersectionWith;ue.invert=xr.invert;ue.invertBy=xr.invertBy;ue.invokeMap=$o.invokeMap;ue.iteratee=xo.iteratee;ue.keyBy=$o.keyBy;ue.keys=ku;ue.keysIn=xr.keysIn;ue.map=$o.map;ue.mapKeys=xr.mapKeys;ue.mapValues=xr.mapValues;ue.matches=xo.matches;ue.matchesProperty=xo.matchesProperty;ue.memoize=ji.memoize;ue.merge=xr.merge;ue.mergeWith=xr.mergeWith;ue.method=xo.method;ue.methodOf=xo.methodOf;ue.mixin=ME;ue.negate=bb;ue.nthArg=xo.nthArg;ue.omit=xr.omit;ue.omitBy=xr.omitBy;ue.once=ji.once;ue.orderBy=$o.orderBy;ue.over=xo.over;ue.overArgs=ji.overArgs;ue.overEvery=xo.overEvery;ue.overSome=xo.overSome;ue.partial=ji.partial;ue.partialRight=ji.partialRight;ue.partition=$o.partition;ue.pick=xr.pick;ue.pickBy=xr.pickBy;ue.property=xo.property;ue.propertyOf=xo.propertyOf;ue.pull=Ln.pull;ue.pullAll=Ln.pullAll;ue.pullAllBy=Ln.pullAllBy;ue.pullAllWith=Ln.pullAllWith;ue.pullAt=Ln.pullAt;ue.range=xo.range;ue.rangeRight=xo.rangeRight;ue.rearg=ji.rearg;ue.reject=$o.reject;ue.remove=Ln.remove;ue.rest=ji.rest;ue.reverse=Ln.reverse;ue.sampleSize=$o.sampleSize;ue.set=xr.set;ue.setWith=xr.setWith;ue.shuffle=$o.shuffle;ue.slice=Ln.slice;ue.sortBy=$o.sortBy;ue.sortedUniq=Ln.sortedUniq;ue.sortedUniqBy=Ln.sortedUniqBy;ue.split=bo.split;ue.spread=ji.spread;ue.tail=Ln.tail;ue.take=Ln.take;ue.takeRight=Ln.takeRight;ue.takeRightWhile=Ln.takeRightWhile;ue.takeWhile=Ln.takeWhile;ue.tap=bc.tap;ue.throttle=ji.throttle;ue.thru=Ob;ue.toArray=cr.toArray;ue.toPairs=xr.toPairs;ue.toPairsIn=xr.toPairsIn;ue.toPath=xo.toPath;ue.toPlainObject=cr.toPlainObject;ue.transform=xr.transform;ue.unary=ji.unary;ue.union=Ln.union;ue.unionBy=Ln.unionBy;ue.unionWith=Ln.unionWith;ue.uniq=Ln.uniq;ue.uniqBy=Ln.uniqBy;ue.uniqWith=Ln.uniqWith;ue.unset=xr.unset;ue.unzip=Ln.unzip;ue.unzipWith=Ln.unzipWith;ue.update=xr.update;ue.updateWith=xr.updateWith;ue.values=xr.values;ue.valuesIn=xr.valuesIn;ue.without=Ln.without;ue.words=bo.words;ue.wrap=ji.wrap;ue.xor=Ln.xor;ue.xorBy=Ln.xorBy;ue.xorWith=Ln.xorWith;ue.zip=Ln.zip;ue.zipObject=Ln.zipObject;ue.zipObjectDeep=Ln.zipObjectDeep;ue.zipWith=Ln.zipWith;ue.entries=xr.toPairs;ue.entriesIn=xr.toPairsIn;ue.extend=xr.assignIn;ue.extendWith=xr.assignInWith;ME(ue,ue);ue.add=pl.add;ue.attempt=xo.attempt;ue.camelCase=bo.camelCase;ue.capitalize=bo.capitalize;ue.ceil=pl.ceil;ue.clamp=TE.clamp;ue.clone=cr.clone;ue.cloneDeep=cr.cloneDeep;ue.cloneDeepWith=cr.cloneDeepWith;ue.cloneWith=cr.cloneWith;ue.conformsTo=cr.conformsTo;ue.deburr=bo.deburr;ue.defaultTo=xo.defaultTo;ue.divide=pl.divide;ue.endsWith=bo.endsWith;ue.eq=cr.eq;ue.escape=bo.escape;ue.escapeRegExp=bo.escapeRegExp;ue.every=$o.every;ue.find=$o.find;ue.findIndex=Ln.findIndex;ue.findKey=xr.findKey;ue.findLast=$o.findLast;ue.findLastIndex=Ln.findLastIndex;ue.findLastKey=xr.findLastKey;ue.floor=pl.floor;ue.forEach=$o.forEach;ue.forEachRight=$o.forEachRight;ue.forIn=xr.forIn;ue.forInRight=xr.forInRight;ue.forOwn=xr.forOwn;ue.forOwnRight=xr.forOwnRight;ue.get=xr.get;ue.gt=cr.gt;ue.gte=cr.gte;ue.has=xr.has;ue.hasIn=xr.hasIn;ue.head=Ln.head;ue.identity=ih;ue.includes=$o.includes;ue.indexOf=Ln.indexOf;ue.inRange=TE.inRange;ue.invoke=xr.invoke;ue.isArguments=cr.isArguments;ue.isArray=Oi;ue.isArrayBuffer=cr.isArrayBuffer;ue.isArrayLike=cr.isArrayLike;ue.isArrayLikeObject=cr.isArrayLikeObject;ue.isBoolean=cr.isBoolean;ue.isBuffer=cr.isBuffer;ue.isDate=cr.isDate;ue.isElement=cr.isElement;ue.isEmpty=cr.isEmpty;ue.isEqual=cr.isEqual;ue.isEqualWith=cr.isEqualWith;ue.isError=cr.isError;ue.isFinite=cr.isFinite;ue.isFunction=cr.isFunction;ue.isInteger=cr.isInteger;ue.isLength=cr.isLength;ue.isMap=cr.isMap;ue.isMatch=cr.isMatch;ue.isMatchWith=cr.isMatchWith;ue.isNaN=cr.isNaN;ue.isNative=cr.isNative;ue.isNil=cr.isNil;ue.isNull=cr.isNull;ue.isNumber=cr.isNumber;ue.isObject=zd;ue.isObjectLike=cr.isObjectLike;ue.isPlainObject=cr.isPlainObject;ue.isRegExp=cr.isRegExp;ue.isSafeInteger=cr.isSafeInteger;ue.isSet=cr.isSet;ue.isString=cr.isString;ue.isSymbol=cr.isSymbol;ue.isTypedArray=cr.isTypedArray;ue.isUndefined=cr.isUndefined;ue.isWeakMap=cr.isWeakMap;ue.isWeakSet=cr.isWeakSet;ue.join=Ln.join;ue.kebabCase=bo.kebabCase;ue.last=Au;ue.lastIndexOf=Ln.lastIndexOf;ue.lowerCase=bo.lowerCase;ue.lowerFirst=bo.lowerFirst;ue.lt=cr.lt;ue.lte=cr.lte;ue.max=pl.max;ue.maxBy=pl.maxBy;ue.mean=pl.mean;ue.meanBy=pl.meanBy;ue.min=pl.min;ue.minBy=pl.minBy;ue.stubArray=xo.stubArray;ue.stubFalse=xo.stubFalse;ue.stubObject=xo.stubObject;ue.stubString=xo.stubString;ue.stubTrue=xo.stubTrue;ue.multiply=pl.multiply;ue.nth=Ln.nth;ue.noop=xo.noop;ue.now=G7.now;ue.pad=bo.pad;ue.padEnd=bo.padEnd;ue.padStart=bo.padStart;ue.parseInt=bo.parseInt;ue.random=TE.random;ue.reduce=$o.reduce;ue.reduceRight=$o.reduceRight;ue.repeat=bo.repeat;ue.replace=bo.replace;ue.result=xr.result;ue.round=pl.round;ue.sample=$o.sample;ue.size=$o.size;ue.snakeCase=bo.snakeCase;ue.some=$o.some;ue.sortedIndex=Ln.sortedIndex;ue.sortedIndexBy=Ln.sortedIndexBy;ue.sortedIndexOf=Ln.sortedIndexOf;ue.sortedLastIndex=Ln.sortedLastIndex;ue.sortedLastIndexBy=Ln.sortedLastIndexBy;ue.sortedLastIndexOf=Ln.sortedLastIndexOf;ue.startCase=bo.startCase;ue.startsWith=bo.startsWith;ue.subtract=pl.subtract;ue.sum=pl.sum;ue.sumBy=pl.sumBy;ue.template=bo.template;ue.times=xo.times;ue.toFinite=cr.toFinite;ue.toInteger=Br;ue.toLength=cr.toLength;ue.toLower=bo.toLower;ue.toNumber=cr.toNumber;ue.toSafeInteger=cr.toSafeInteger;ue.toString=cr.toString;ue.toUpper=bo.toUpper;ue.trim=bo.trim;ue.trimEnd=bo.trimEnd;ue.trimStart=bo.trimStart;ue.truncate=bo.truncate;ue.unescape=bo.unescape;ue.uniqueId=xo.uniqueId;ue.upperCase=bo.upperCase;ue.upperFirst=bo.upperFirst;ue.each=$o.forEach;ue.eachRight=$o.forEachRight;ue.first=Ln.head;ME(ue,function(){var e={};return uh(ue,function(t,n){Rk.call(ue.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ue.VERSION=eU;(ue.templateSettings=bo.templateSettings).imports._=ue;yc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ue[e].placeholder=ue});yc(["drop","take"],function(e,t){Qr.prototype[e]=function(n){n=n===void 0?1:aU(Br(n),0);var a=this.__filtered__&&!t?new Qr(this):this.clone();return a.__filtered__?a.__takeCount__=vx(n,a.__takeCount__):a.__views__.push({size:vx(n,Pk),type:e+(a.__dir__<0?"Right":"")}),a},Qr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});yc(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==nU||n==rU;Qr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:eo(r),type:n}),s.__filtered__=s.__filtered__||a,s}});yc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Qr.prototype[e]=function(){return this[n](1).value()[0]}});yc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Qr.prototype[e]=function(){return this.__filtered__?new Qr(this):this[n](1)}});Qr.prototype.compact=function(){return this.filter(ih)};Qr.prototype.find=function(e){return this.filter(e).head()};Qr.prototype.findLast=function(e){return this.reverse().find(e)};Qr.prototype.invokeMap=io(function(e,t){return typeof e=="function"?new Qr(this):this.map(function(n){return ry(n,e,t)})});Qr.prototype.reject=function(e){return this.filter(bb(eo(e)))};Qr.prototype.slice=function(e,t){e=Br(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Qr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Br(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Qr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Qr.prototype.toArray=function(){return this.take(Pk)};uh(Qr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=ue[a?"take"+(t=="last"?"Right":""):t],s=a||/^find/.test(t);r&&(ue.prototype[t]=function(){var c=this.__wrapped__,v=a?[1]:arguments,f=c instanceof Qr,g=v[0],b=f||Oi(c),_=function(j){var D=r.apply(ue,Qm([j],v));return a&&S?D[0]:D};b&&n&&typeof g=="function"&&g.length!=1&&(f=b=!1);var S=this.__chain__,A=!!this.__actions__.length,M=s&&!S,x=f&&!A;if(!s&&b){c=x?c:new Qr(this);var E=e.apply(c,v);return E.__actions__.push({func:Ob,args:[_],thisArg:void 0}),new Ls(E,S)}return M&&x?e.apply(this,v):(E=this.thru(_),M?a?E.value()[0]:E.value():E)})});yc(["pop","push","shift","sort","splice","unshift"],function(e){var t=oU[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);ue.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var s=this.value();return t.apply(Oi(s)?s:[],r)}return this[n](function(c){return t.apply(Oi(c)?c:[],r)})}});uh(Qr.prototype,function(e,t){var n=ue[t];if(n){var a=n.name+"";Rk.call(wv,a)||(wv[a]=[]),wv[a].push({name:t,func:n})}});wv[db(void 0,tU).name]=[{name:"wrapper",func:void 0}];Qr.prototype.clone=z7;Qr.prototype.reverse=H7;Qr.prototype.value=Q7;ue.prototype.at=bc.at;ue.prototype.chain=bc.wrapperChain;ue.prototype.commit=bc.commit;ue.prototype.next=bc.next;ue.prototype.plant=bc.plant;ue.prototype.reverse=bc.reverse;ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=bc.value;ue.prototype.first=ue.prototype.head;hx&&(ue.prototype[hx]=bc.toIterator);const lU="data:image/svg+xml,%3csvg%20width='27'%20height='20'%20viewBox='0%200%2027%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.6667%203.33329H3.66667V16.6666H23.6667V3.33329ZM3.66667%201.66663C2.74619%201.66663%202%202.41282%202%203.33329V16.6666C2%2017.5871%202.74619%2018.3333%203.66667%2018.3333H23.6667C24.5871%2018.3333%2025.3333%2017.5871%2025.3333%2016.6666V3.33329C25.3333%202.41282%2024.5871%201.66663%2023.6667%201.66663H3.66667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.2196%206.91331H18.2767L19.4%209.89549L20.4758%206.91331L22.5375%206.83044L19.4%2014.8138L17.3565%2014.8966L18.437%2012.3756L16.2196%206.91331Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.1034%207.06327C13.1302%207.04839%2013.1574%207.03404%2013.1848%207.02023C13.5166%206.84295%2013.8759%206.77344%2014.2468%206.77344C14.9611%206.77344%2015.5729%206.97047%2015.9992%207.43635C16.419%207.89521%2016.5934%208.54454%2016.5934%209.3101V12.9168H14.7001V9.4001C14.7001%209.01738%2014.6103%208.80651%2014.5052%208.69229C14.4059%208.58445%2014.2319%208.49677%2013.9067%208.49677C13.7078%208.49677%2013.5468%208.55932%2013.4114%208.69473C13.2534%208.85274%2013.1382%209.08146%2013.1034%209.41091V12.9168H11.2101V6.91344H13.1034V7.06327Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.01665%2012.6833V12.9168H10.83V9.2001C10.83%208.50266%2010.6523%207.90623%2010.247%207.47482L10.2458%207.47354C9.77726%206.97898%209.08554%206.77344%208.26332%206.77344C7.58671%206.77344%206.97894%206.88784%206.50606%207.18452C5.95355%207.51308%205.61381%208.04132%205.48446%208.69979L5.39493%209.15558L6.60828%209.25958C6.45695%209.32645%206.3157%209.40545%206.18578%209.49774C5.6067%209.89006%205.31665%2010.4724%205.31665%2011.1801C5.31665%2011.727%205.52656%2012.1949%205.95194%2012.5464C6.34831%2012.8992%206.87585%2013.0568%207.48332%2013.0568C7.99851%2013.0568%208.45994%2012.9557%208.86073%2012.7671L8.86966%2012.7628C8.91982%2012.7377%208.96882%2012.7112%209.01665%2012.6833ZM7.33362%209.04021C7.60234%208.98907%207.88998%208.96154%208.19236%208.95358L8.93243%208.93444C8.90662%208.77431%208.84911%208.68249%208.7882%208.62627C8.69958%208.54447%208.527%208.46677%208.19332%208.46677C7.90772%208.46677%207.72064%208.51963%207.60769%208.58739L7.60328%208.59004C7.46993%208.66783%207.38847%208.77506%207.35134%208.95452L7.33362%209.04021ZM8.93782%2010.5386L8.28478%2010.5566L8.28191%2010.5567C7.83203%2010.566%207.5658%2010.6502%207.4222%2010.7499C7.3054%2010.831%207.23998%2010.9409%207.23998%2011.1401C7.23998%2011.2037%207.25413%2011.2438%207.32642%2011.2991L7.3313%2011.3029L7.33606%2011.3067C7.40443%2011.3623%207.52395%2011.4134%207.72332%2011.4134C8.07815%2011.4134%208.36218%2011.3062%208.60462%2011.1017C8.80129%2010.9357%208.90794%2010.7499%208.93782%2010.5386Z'%20fill='%23646A73'/%3e%3c/svg%3e",sU="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.6667%203.33329H3.33335V16.6666H16.6667V3.33329ZM3.33335%201.66663C2.41288%201.66663%201.66669%202.41282%201.66669%203.33329V16.6666C1.66669%2017.5871%202.41288%2018.3333%203.33335%2018.3333H16.6667C17.5872%2018.3333%2018.3334%2017.5871%2018.3334%2016.6666V3.33329C18.3334%202.41282%2017.5872%201.66663%2016.6667%201.66663H3.33335Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.33%205.83667H15.2233V13.95H13.33V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.83%205.83667H12.7233V13.95H10.83V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.51665%2013.7165V13.95H10.33V10.2333C10.33%209.53587%2010.1523%208.93943%209.747%208.50803L9.7458%208.50675C9.27726%208.01218%208.58554%207.80664%207.76332%207.80664C7.08671%207.80664%206.47894%207.92104%206.00606%208.21772C5.45355%208.54628%205.11381%209.07452%204.98446%209.733L4.89493%2010.1888L6.10828%2010.2928C5.95695%2010.3597%205.8157%2010.4386%205.68578%2010.5309C5.1067%2010.9233%204.81665%2011.5057%204.81665%2012.2133C4.81665%2012.7602%205.02656%2013.2281%205.45194%2013.5796C5.84831%2013.9324%206.37585%2014.09%206.98332%2014.09C7.49851%2014.09%207.95994%2013.9889%208.36073%2013.8003L8.36966%2013.796C8.41982%2013.7709%208.46882%2013.7444%208.51665%2013.7165ZM6.83361%2010.0734C7.10234%2010.0223%207.38998%209.99474%207.69236%209.98678L8.43243%209.96764C8.40662%209.80751%208.3491%209.71569%208.2882%209.65948C8.19958%209.57767%208.027%209.49997%207.69332%209.49997C7.40772%209.49997%207.22064%209.55283%207.10769%209.6206L7.10328%209.62324C6.96993%209.70103%206.88847%209.80826%206.85134%209.98773L6.83361%2010.0734ZM8.43782%2011.5718L7.78478%2011.5898L7.78191%2011.5899C7.33203%2011.5992%207.0658%2011.6834%206.9222%2011.7831C6.8054%2011.8642%206.73998%2011.9741%206.73998%2012.1733C6.73998%2012.2369%206.75413%2012.277%206.82642%2012.3323L6.8313%2012.3361L6.83606%2012.3399C6.90443%2012.3955%207.02395%2012.4466%207.22332%2012.4466C7.57815%2012.4466%207.86218%2012.3394%208.10462%2012.1349C8.30129%2011.9689%208.40794%2011.7831%208.43782%2011.5718Z'%20fill='%23646A73'/%3e%3c/svg%3e",uU={class:"list flex-wrap"},cU=["onClick","onMousedown"],fU=["src"],dU=["title"],pU={class:"flex-between"},hU={class:"flex align-center"},vU=["src"],mU=["title"],yU={key:0,class:"status-tag",style:{"margin-left":"auto"}},gU=er({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=$e(""),s=$e([]);function c(v,f){return f.length?v.filter(g=>g.name.toLowerCase().includes(f.toLowerCase())):v}return ub([()=>r.value,()=>n.list],()=>{s.value=c(n.list,r.value)}),(v,f)=>{const g=ee("el-input"),b=ee("el-avatar"),_=ee("el-tag"),S=ee("el-text"),A=ee("el-popover"),M=ee("el-empty");return Se(),en(Sr,null,[k(g,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=x=>r.value=x),modelModifiers:{trim:!0},placeholder:v.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),K("div",uU,[s.value.length?(Se(!0),en(Sr,{key:0},ao(s.value,x=>(Se(),lt(A,{key:x.id,placement:"right",width:280,"show-after":500},{reference:N(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Qt(E=>a("clickNodes",x),["stop"]),onMousedown:Qt(E=>a("onmousedown",x),["stop"])},[Qn(dw)(x==null?void 0:x.icon)?(Se(),lt(b,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[K("img",{src:Qn(Qp)(x==null?void 0:x.icon,Qn(Qp)("./favicon.ico")),alt:""},null,8,fU)]),_:2},1024)):(Se(),lt(b,{key:1,class:"avatar-green",shape:"square",size:20},{default:N(()=>f[1]||(f[1]=[K("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[1]})),K("span",{class:"ml-8 ellipsis",title:x.name},_e(x.name),9,dU)],40,cU)]),default:N(()=>[K("div",pU,[K("div",hU,[Qn(dw)(x==null?void 0:x.icon)?(Se(),lt(b,{key:0,shape:"square",size:20,style:{background:"none"}},{default:N(()=>[K("img",{src:Qn(Qp)(x==null?void 0:x.icon,Qn(Qp)("./favicon.ico")),alt:""},null,8,vU)]),_:2},1024)):(Se(),lt(b,{key:1,class:"avatar-green",shape:"square",size:20},{default:N(()=>f[2]||(f[2]=[K("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})),K("span",{class:"font-medium ml-8 break-all",title:x.name},_e(x.name),9,mU)]),x.type?(Se(),en("div",yU,[Qn(eE)(x.type)?(Se(),lt(_,{key:0,class:"warning-tag"},{default:N(()=>[ot(_e(v.$t("views.application.workflow")),1)]),_:1})):(Se(),lt(_,{key:1,class:"blue-tag"},{default:N(()=>[ot(_e(v.$t("views.application.simple")),1)]),_:1}))])):kn("",!0)]),k(S,{type:"info",size:"small",class:"mt-4"},{default:N(()=>[ot(_e(x.desc),1)]),_:2},1024)]),_:2},1024))),128)):(Se(),lt(M,{key:1,description:v.$t("common.noData")},null,8,["description"]))])],64)}}}),mx=Zd(gU,[["__scopeId","data-v-deb1c287"]]),bU={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},_U={key:0},wU={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},EU=["onClick","onMousedown"],OU={class:"lighter"},SU={class:"flex align-center mb-8"},xU={class:"lighter color-text-primary"},AU={key:1,class:"ml-16 mt-8"},TU=er({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=is("workflowMode"),a=Zi(),{user:r,folder:s}=tE(),c=bI(n||qj.Application),v=$e(""),f=e,g=t,b=Zn(()=>a.path.includes("resource-management")?"systemManage":"workspace");Zn(()=>tM.tool[b.value]);const _=$e(!1),S=$e("base"),A=Zn(()=>{if(!v.value)return c||[];const H=v.value.toLowerCase();return(c||[]).reduce((B,G)=>{const Z=G.list.filter(Q=>Q.label.toLowerCase().includes(H));return Z.length&&B.push({...G,list:Z}),B},[])});function M(H,B,G){var Z;B&&(H.properties.nodeName=B.name,G=="tool"&&(H.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(Q=>({...Q,value:Q.source=="reference"?[]:""}))}),G=="application"&&(H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id})),(Z=f.workflowRef)==null||Z.addNode(H),g("clickNodes",H)}function x(H,B,G){var Z;B&&(H.properties.nodeName=B.name,G=="tool"&&(H.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(Q=>({...Q,value:Q.source=="reference"?[]:""}))}),G=="application"&&(eE(B.type)?(B.work_flow.nodes[0].properties.nodeData.file_upload_setting,H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id}):H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id})),(Z=f.workflowRef)==null||Z.onmousedown(H),g("onmousedown",H)}const E=$e([]),j=$e([]);async function D(){var B;const H=await s.asyncGetFolder($S.TOOL,{},_);E.value=H.data,s.setCurrentFolder(((B=H.data)==null?void 0:B[0])||{})}async function V(){var B,G,Z,Q;const H=await go({type:"tool",isShared:((B=s.currentFolder)==null?void 0:B.id)==="share",systemType:"workspace"}).getToolList({folderId:((G=s.currentFolder)==null?void 0:G.id)||r.getWorkspaceId(),toolType:"CUSTOM"});j.value=((Z=H.data)==null?void 0:Z.tools)||H.data||[],j.value=(Q=j.value)==null?void 0:Q.filter(fe=>fe.isActive)}const U=$e([]),L=$e([]);function F(){s.asyncGetFolder($S.APPLICATION,{},_).then(H=>{var B;U.value=H.data,s.setCurrentFolder(((B=H.data)==null?void 0:B[0])||{})})}async function X(){var B;const H=await go({type:"application",systemType:"workspace"}).getAllApplication({folderId:((B=s.currentFolder)==null?void 0:B.id)||r.getWorkspaceId()});L.value=H.data.filter(G=>G.id!==f.id&&G.isPublish)}async function q(H){H==="tool"?(await D(),V()):H==="application"&&(F(),X())}return qr(()=>{}),(H,B)=>{const G=ee("search"),Z=ee("el-icon"),Q=ee("el-input"),fe=ee("el-text"),se=ee("el-popover"),ce=ee("el-scrollbar"),be=ee("el-tab-pane"),we=ee("el-tabs");return Ra((Se(),en("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:Yj({width:(S.value==="base","400px")})},[k(we,{modelValue:S.value,"onUpdate:modelValue":B[5]||(B[5]=me=>S.value=me),class:"workflow-dropdown-tabs",onTabChange:q},{default:N(()=>[Ra(K("div",bU,[k(Q,{modelValue:v.value,"onUpdate:modelValue":B[0]||(B[0]=me=>v.value=me),class:"mr-12 ml-12",placeholder:H.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:N(()=>[k(Z,{class:"el-input__icon"},{default:N(()=>[k(G)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[th,S.value==="base"]]),k(be,{label:H.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:N(()=>[k(ce,{height:"400"},{default:N(()=>[A.value.length>0?(Se(),en("div",_U,[(Se(!0),en(Sr,null,ao(A.value,(me,He)=>(Se(),en(Sr,{key:He},[k(fe,{type:"info",size:"small",class:"color-secondary ml-12"},{default:N(()=>[ot(_e(me.label),1)]),_:2},1024),K("div",wU,[(Se(!0),en(Sr,null,ao(me.list,(Je,yt)=>(Se(),lt(se,{key:yt,placement:"right",width:280,"show-after":500},{reference:N(()=>[K("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:Qt(Be=>M(Je),["stop"]),onMousedown:Qt(Be=>x(Je),["stop"])},[(Se(),lt(pw(Qn(hw)(`${Je.type}-icon`)),{class:"mr-8",size:20})),K("div",OU,_e(Je.label),1)],40,EU)]),default:N(()=>[K("div",SU,[(Se(),lt(pw(Qn(hw)(`${Je.type}-icon`)),{class:"mr-8",size:32})),K("div",xU,_e(Je.label),1)]),k(fe,{type:"info",size:"small",class:"color-secondary lighter"},{default:N(()=>[ot(_e(Je.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(Se(),en("div",AU,[k(fe,{type:"info"},{default:N(()=>[ot(_e(H.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),k(be,{label:H.$t("views.tool.title"),name:"tool"},{default:N(()=>[k(ce,{height:"450"},{default:N(()=>[k(mx,{list:j.value,onClickNodes:B[1]||(B[1]=me=>M(Qn(VS),me,"tool")),onOnmousedown:B[2]||(B[2]=me=>x(Qn(VS),me,"tool"))},null,8,["list"])]),_:1})]),_:1},8,["label"]),k(be,{label:H.$t("views.application.title"),name:"application"},{default:N(()=>[k(ce,{height:"450"},{default:N(()=>[k(mx,{list:L.value,onClickNodes:B[3]||(B[3]=me=>M(Qn(BS),me,"application")),onOnmousedown:B[4]||(B[4]=me=>x(Qn(BS),me,"application"))},null,8,["list"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[th,e.show]])}}}),Nk=Zd(TU,[["__scopeId","data-v-2b2bdfb7"]]),MU={class:"flex-between"},kU={class:"ellipsis-1 break-all"},PU={key:0,src:lU,alt:""},RU={key:1,src:sU,alt:""},NU={style:{width:"280px"},class:"p-12-16"},CU={class:"mt-8 lighter"},DU={class:"title-decoration-1 mb-8 mt-8"},jU=["onMouseenter"],IU={class:"break-all"},LU={class:"dialog-footer"},$U=er({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const t=Zi(),{params:{id:n}}=t,a=$e({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),r=$e(!1),s=$e(),c=$e(),v=$e(!1),f=$e({title:""}),g=Zn({set:B=>{Te.set(L.nodeModel.properties,"condition",B)},get:()=>L.nodeModel.properties.condition?L.nodeModel.properties.condition:(Te.set(L.nodeModel.properties,"condition","AND"),!0)}),b=Zn({set:B=>{Te.set(L.nodeModel.properties,"showNode",B)},get:()=>L.nodeModel.properties.showNode!==void 0?L.nodeModel.properties.showNode:(Te.set(L.nodeModel.properties,"showNode",!0),!0)}),_=B=>{B.ctrlKey||B.metaKey||B.stopPropagation()},S=Zn(()=>L.nodeModel.properties.status?L.nodeModel.properties.status:200);function A(){f.value.title=L.nodeModel.properties.nodeName,v.value=!0}const M=async B=>{B&&await B.validate(G=>{var Z;G&&((Z=L.nodeModel.graphModel.nodes.filter(Q=>Q.id!==L.nodeModel.id))!=null&&Z.some(Q=>Q.properties.nodeName===f.value.title)?mi(St("views.applicationWorkflow.tip.repeatedNodeError")):(Te.set(L.nodeModel.properties,"nodeName",f.value.title),v.value=!1,B.resetFields()))})},x=B=>{B!=null&&B.shiftKey||L.nodeModel.graphModel.clearSelectElements(),Te.set(L.nodeModel,"isSelected",!L.nodeModel.isSelected),Te.set(L.nodeModel,"isHovered",!L.nodeModel.isSelected),L.nodeModel.graphModel.toFront(L.nodeModel.id)},E=$e(null),j=()=>{L.nodeModel.graphModel.clearSelectElements();const B=L.nodeModel.graphModel.cloneNode(L.nodeModel.id);Te.set(B,"isSelected",!0),Te.set(B,"isHovered",!0),L.nodeModel.graphModel.toFront(B.id)},D=()=>{nE(St("common.tip"),St("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:St("common.confirm"),confirmButtonClass:"danger"}).then(()=>{L.nodeModel.type===ei.LoopNode&&L.nodeModel.graphModel.getNodeOutgoingNode(L.nodeModel.id).forEach(G=>{G.type==="loop-body-node"&&L.nodeModel.graphModel.deleteNode(G.id)}),L.nodeModel.graphModel.deleteNode(L.nodeModel.id)}),L.nodeModel.graphModel.eventCenter.emit("delete_node")},V=B=>{B.height&&(L.nodeModel.virtual||(a.value.stepContainerHeight=B.height,L.nodeModel.setHeight(a.value.stepContainerHeight)))};function U(B){var Q,fe,se;const G=B.properties.width?B.properties.width:214,Z=L.nodeModel.graphModel.addNode({type:B.type,properties:B.properties,x:((Q=s.value)==null?void 0:Q.x)+G/2+200,y:((fe=s.value)==null?void 0:fe.y)-B.height});L.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:L.nodeModel.id,sourceAnchorId:(se=s.value)==null?void 0:se.id,targetNodeId:Z.id,targetAnchorId:Z.id+"_left"}),H()}const L=e,F=Zn(()=>{var B;return L.nodeModel.properties.config.fields?(B=L.nodeModel.properties.config.fields)==null?void 0:B.map(Z=>({label:Z.label,value:Z.value,globeLabel:`{{${L.nodeModel.properties.nodeName}.${Z.value}}}`,globeValue:`{{context['${L.nodeModel.id}'].${Z.value}}}`})):[]});function X(B){return![ei.Start,ei.Base,ei.LoopStartNode.toString()].includes(B)}const q=B=>{r.value=!0,s.value=B},H=()=>{r.value=!1,s.value=void 0};return qr(()=>{Te.set(L.nodeModel,"openNodeMenu",B=>{r.value?H():q(B)})}),(B,G)=>{var xe;const Z=ee("ArrowDownBold"),Q=ee("el-icon"),fe=ee("el-button"),se=ee("el-option"),ce=ee("el-select"),be=ee("el-dropdown"),we=ee("AppIcon"),me=ee("el-dropdown-item"),He=ee("el-dropdown-menu"),Je=ee("el-alert"),yt=ee("el-tooltip"),Be=ee("el-collapse-transition"),Yt=ee("el-input"),Kt=ee("el-form-item"),Lt=ee("el-form"),An=ee("el-dialog"),Ve=Hd("resize");return Se(),en("div",{onMousedown:x,class:"workflow-node-container p-16",style:{overflow:"visible"}},[K("div",{class:Ds(["step-container app-card p-16",{isSelected:L.nodeModel.isSelected,error:S.value!==200}]),style:{overflow:"visible"}},[Ra((Se(),en("div",null,[K("div",MU,[K("div",{class:"flex align-center",onDragstart:G[0]||(G[0]=Qt(()=>{},["prevent"])),onDrag:G[1]||(G[1]=Qt(()=>{},["prevent"])),onDragover:G[2]||(G[2]=Qt(()=>{},["prevent"])),onDragend:G[3]||(G[3]=Qt(()=>{},["prevent"])),style:{width:"69%"}},[(Se(),lt(pw(Qn(hw)(`${B.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(xe=B.nodeModel)==null?void 0:xe.properties.node_data},null,8,["item"])),K("h4",kU,_e(B.nodeModel.properties.nodeName),1)],32),K("div",{onMousemove:G[6]||(G[6]=Qt(()=>{},["stop"])),onMousedown:G[7]||(G[7]=Qt(()=>{},["stop"])),onKeydown:G[8]||(G[8]=Qt(()=>{},["stop"])),onClick:G[9]||(G[9]=Qt(()=>{},["stop"]))},[k(fe,{text:"",onClick:G[4]||(G[4]=Ce=>b.value=!b.value)},{default:N(()=>[k(Q,{class:Ds(["arrow-icon color-secondary",b.value?"rotate-180":""])},{default:N(()=>[k(Z)]),_:1},8,["class"])]),_:1}),X(B.nodeModel.type)?(Se(),lt(be,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:N(()=>[K("div",NU,[K("h5",null,_e(B.$t("views.applicationWorkflow.condition.title")),1),K("p",CU,[K("span",null,_e(B.$t("views.applicationWorkflow.condition.front")),1),k(ce,{modelValue:g.value,"onUpdate:modelValue":G[5]||(G[5]=Ce=>g.value=Ce),size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[k(se,{label:B.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),k(se,{label:B.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),K("span",null,_e(B.$t("views.applicationWorkflow.condition.text")),1)])])]),default:N(()=>[k(fe,{text:""},{default:N(()=>[g.value==="OR"?(Se(),en("img",PU)):kn("",!0),g.value==="AND"?(Se(),en("img",RU)):kn("",!0)]),_:1})]),_:1})):kn("",!0),X(B.nodeModel.type)?(Se(),lt(be,{key:1,teleported:!1,trigger:"click"},{dropdown:N(()=>[k(He,{style:{"min-width":"80px"}},{default:N(()=>[k(me,{onClick:A,class:"p-8"},{default:N(()=>[ot(_e(B.$t("common.rename")),1)]),_:1}),k(me,{onClick:j,class:"p-8"},{default:N(()=>[ot(_e(B.$t("common.copy")),1)]),_:1}),k(me,{onClick:D,class:"border-t p-8"},{default:N(()=>[ot(_e(B.$t("common.delete")),1)]),_:1})]),_:1})]),default:N(()=>[k(fe,{text:""},{default:N(()=>[k(we,{iconName:"app-more",class:"color-secondary"})]),_:1})]),_:1})):kn("",!0)],32)]),k(Be,null,{default:N(()=>[Ra(K("div",{onMousedown:G[11]||(G[11]=Qt(()=>{},["stop"])),onKeydown:G[12]||(G[12]=Qt(()=>{},["stop"])),onClick:G[13]||(G[13]=Qt(()=>{},["stop"])),class:"mt-16"},[S.value!=200?(Se(),lt(Je,{key:0,class:"mb-16",title:L.nodeModel.type==="application-node"?B.$t("views.applicationWorkflow.tip.applicationNodeError"):B.$t("views.applicationWorkflow.tip.toolNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):kn("",!0),Kj(B.$slots,"default",{},void 0,!0),F.value.length>0?(Se(),en(Sr,{key:1},[K("h5",DU,_e(B.$t("common.param.outputParam")),1),(Se(!0),en(Sr,null,ao(F.value,(Ce,qe)=>(Se(),en("div",{key:qe,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:_t=>E.value=qe,onMouseleave:G[10]||(G[10]=_t=>E.value=null)},[K("span",IU,_e(Ce.label)+" "+_e("{"+Ce.value+"}"),1),E.value===qe?(Se(),lt(yt,{key:0,effect:"dark",content:B.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:N(()=>[k(fe,{link:"",onClick:_t=>Qn(vw)(Ce.globeLabel),style:{padding:"0"}},{default:N(()=>[k(we,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)],40,jU))),128))],64)):kn("",!0)],544),[[th,b.value]])]),_:3})])),[[Ve,V]])],2),k(Be,null,{default:N(()=>[r.value?(Se(),lt(Nk,{key:0,onMousemove:G[14]||(G[14]=Qt(()=>{},["stop"])),onMousedown:G[15]||(G[15]=Qt(()=>{},["stop"])),onClick:G[16]||(G[16]=Qt(()=>{},["stop"])),onWheel:_,show:r.value,id:Qn(n),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:U},null,8,["show","id"])):kn("",!0)]),_:1}),k(An,{title:B.$t("views.applicationWorkflow.nodeName"),modelValue:v.value,"onUpdate:modelValue":G[21]||(G[21]=Ce=>v.value=Ce),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:G[22]||(G[22]=Qt(()=>{},["prevent"]))},{footer:N(()=>[K("span",LU,[k(fe,{onClick:G[19]||(G[19]=Qt(Ce=>v.value=!1,["prevent"]))},{default:N(()=>[ot(_e(B.$t("common.cancel")),1)]),_:1}),k(fe,{type:"primary",onClick:G[20]||(G[20]=Ce=>M(c.value))},{default:N(()=>[ot(_e(B.$t("common.save")),1)]),_:1})])]),default:N(()=>[k(Lt,{"label-position":"top",ref_key:"titleFormRef",ref:c,model:f.value},{default:N(()=>[k(Kt,{prop:"title",rules:[{required:!0,message:B.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:N(()=>[k(Yt,{modelValue:f.value.title,"onUpdate:modelValue":G[17]||(G[17]=Ce=>f.value.title=Ce),onBlur:G[18]||(G[18]=Ce=>f.value.title=f.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),Fo=Zd($U,[["__scopeId","data-v-67b9020e"]]),FU={class:"title-decoration-1 mb-8"},UU={class:"flex-between w-full"},VU={class:"flex-between"},BU={class:"flex align-center"},WU={class:"flex align-center"},GU={class:"mr-4"},zU={class:"flex-between"},HU={class:"flex-between mb-16"},XU={class:"lighter"},qU={key:0,class:"w-full mb-16"},YU={class:"flex align-center",style:{"line-height":"20px"}},KU=["src"],ZU=["title"],JU={class:"flex-between"},QU={class:"mr-4"},eV={class:"flex"},tV={class:"flex-between"},nV={class:"flex-between"},rV={class:"flex align-center"},oV={class:"mr-4"},iV={class:"flex"},aV=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=ce=>ce.ctrlKey===!0?(ce.preventDefault(),!0):(ce.stopPropagation(),!0);function c(ce){Te.set(S.nodeModel.properties.nodeData,"system",ce)}function v(ce){Te.set(S.nodeModel.properties.nodeData,"prompt",ce)}const f=ce=>{var be;ce?(be=x.value)==null||be.reset_default(ce,a):q({})},b={modelId:"",system:"",prompt:`${St("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${St("views.applicationWorkflow.nodes.searchKnowledgeNode.label")}.data}}
${St("views.problem.title")}：
{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:1,isResult:!0,temperature:null,maxTokens:null,dialogueType:"WORK_FLOW",toolId:[],modelSetting:{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}},_=Zn({get:()=>S.nodeModel.properties.nodeData?(S.nodeModel.properties.nodeData.modelSetting||Te.set(S.nodeModel.properties.nodeData,"modelSetting",{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}),S.nodeModel.properties.nodeData):(Te.set(S.nodeModel.properties,"nodeData",b),S.nodeModel.properties.nodeData),set:ce=>{Te.set(S.nodeModel.properties,"nodeData",ce)}}),S=e,A=$e(),M=$e(null),x=$e(),E=$e(),j=()=>{var ce;return(ce=A.value)==null?void 0:ce.validate().catch(be=>Promise.reject({node:S.nodeModel,errMessage:be}))},D=t();function V(){var be;const ce=r.value==="systemManage"?{modelType:"LLM",workspaceId:(be=D.value)==null?void 0:be.workspaceId}:{modelType:"LLM"};go({type:"model",systemType:r.value}).getSelectModelList(ce).then(we=>{M.value=Te.groupBy(we==null?void 0:we.data,"provider")})}const U=ce=>{var be;ce&&((be=x.value)==null||be.open(ce,a,_.value.modelParamsSetting))},L=$e(),F=ce=>{var be;ce&&((be=L.value)==null||be.open(ce,a))},X=ce=>{alert(ce),Te.set(S.nodeModel.properties.nodeData,"system",ce)};function q(ce){Te.set(S.nodeModel.properties.nodeData,"modelParamsSetting",ce)}function H(ce){let be=Te.cloneDeep(S.nodeModel.properties.nodeData.modelSetting);be={...be,...ce},Te.set(S.nodeModel.properties.nodeData,"modelSetting",be)}const B=$e();function G(){B.value.open(_.value.toolIds)}function Z(ce){Te.set(S.nodeModel.properties.nodeData,"toolIds",ce.toolIds)}function Q(ce){const be=S.nodeModel.properties.nodeData.toolIds.filter(we=>we!==ce);Te.set(S.nodeModel.properties.nodeData,"toolIds",be)}const fe=$e([]);function se(){var be;const ce=r.value==="systemManage"?{scope:"WORKSPACE",workspaceId:(be=D.value)==null?void 0:be.workspaceId}:{scope:"WORKSPACE"};go({type:"tool",systemType:r.value}).getAllToolList(ce).then(we=>{fe.value=[...we.data.shared_tools,...we.data.tools].filter(me=>me.isActive)})}return qr(()=>{var ce,be;V(),typeof((ce=S.nodeModel.properties.nodeData)==null?void 0:ce.isResult)>"u"&&Ru(S.nodeModel)&&Te.set(S.nodeModel.properties.nodeData,"isResult",!0),Te.set(S.nodeModel,"validate",j),_.value.dialogueType||(_.value.dialogueType="WORK_FLOW"),((be=S.nodeModel.properties.nodeData)==null?void 0:be.toolOutputEnable)===void 0&&Te.set(S.nodeModel.properties.nodeData,"toolOutputEnable",!0),se()}),(ce,be)=>{const we=ee("el-button"),me=ee("el-form-item"),He=ee("el-tooltip"),Je=ee("el-option"),yt=ee("el-select"),Be=ee("el-input-number"),Yt=ee("Plus"),Kt=ee("el-icon"),Lt=ee("el-avatar"),An=ee("ToolIcon"),Ve=ee("Close"),xe=ee("el-switch"),Ce=ee("el-form"),qe=ee("el-card");return Se(),lt(Fo,{nodeModel:ce.nodeModel},{default:N(()=>[K("h5",FU,_e(ce.$t("views.applicationWorkflow.nodeSetting")),1),k(qe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(Ce,{onSubmit:be[13]||(be[13]=Qt(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:A,"hide-required-asterisk":""},{default:N(()=>{var _t,ht;return[k(me,{label:ce.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:ce.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[K("div",UU,[K("div",null,[K("span",null,[ot(_e(ce.$t("views.application.form.aiModel.label")),1),be[14]||(be[14]=K("span",{class:"color-danger"},"*",-1))])]),k(we,{disabled:!_.value.modelId,type:"primary",link:"",onClick:be[0]||(be[0]=wt=>U(_.value.modelId)),onRefreshForm:q},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(Df,{onChange:f,onWheel:s,teleported:!1,modelValue:_.value.modelId,"onUpdate:modelValue":be[1]||(be[1]=wt=>_.value.modelId=wt),placeholder:ce.$t("views.application.form.aiModel.placeholder"),options:M.value,onSubmitModel:V,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(me,null,{label:N(()=>[K("div",VU,[K("div",BU,[K("span",null,_e(ce.$t("views.application.form.roleSettings.label")),1),k(He,{effect:"dark",content:ce.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),k(we,{type:"primary",link:"",onClick:be[2]||(be[2]=wt=>F(_.value.modelId)),disabled:!_.value.modelId},{default:N(()=>[k(gr,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:N(()=>[k(os,{title:ce.$t("views.application.form.roleSettings.label"),modelValue:_.value.system,"onUpdate:modelValue":be[3]||(be[3]=wt=>_.value.system=wt),style:{height:"100px"},onSubmitDialog:c,placeholder:`${Qn(St)("views.applicationWorkflow.SystemPromptPlaceholder")} {{${Qn(St)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1}),k(me,{label:ce.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:ce.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[K("div",WU,[K("div",GU,[K("span",null,[ot(_e(ce.$t("views.application.form.prompt.label")),1),be[15]||(be[15]=K("span",{class:"color-danger"},"*",-1))])]),k(He,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(ce.$t("views.application.form.prompt.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[k(os,{onWheel:s,title:ce.$t("views.application.form.prompt.label"),modelValue:_.value.prompt,"onUpdate:modelValue":be[4]||(be[4]=wt=>_.value.prompt=wt),style:{height:"150px"},onSubmitDialog:v,placeholder:`${Qn(St)("views.applicationWorkflow.UserPromptPlaceholder")}{{${Qn(St)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),k(me,{label:ce.$t("views.application.form.historyRecord.label")},{label:N(()=>[K("div",zU,[K("div",null,_e(ce.$t("views.application.form.historyRecord.label")),1),k(yt,{modelValue:_.value.dialogueType,"onUpdate:modelValue":be[5]||(be[5]=wt=>_.value.dialogueType=wt),type:"small",style:{width:"100px"}},{default:N(()=>[k(Je,{label:ce.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(Je,{label:ce.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[k(Be,{modelValue:_.value.dialogueNumber,"onUpdate:modelValue":be[6]||(be[6]=wt=>_.value.dialogueNumber=wt),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),K("div",HU,[K("div",XU,_e(ce.$t("views.tool.title")),1),K("div",null,[k(we,{type:"primary",class:"mr-4",link:"",onClick:G,onRefreshForm:q},{default:N(()=>[k(Kt,null,{default:N(()=>[k(Yt)]),_:1})]),_:1})])]),((_t=_.value.toolIds)==null?void 0:_t.length)>0?(Se(),en("div",qU,[(Se(!0),en(Sr,null,ao(_.value.toolIds,(wt,rn)=>{var an,Xt,nt,fn;return Se(),en("div",{key:rn,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[K("div",YU,[(an=Qn(Ou)(fe.value,wt,"id"))!=null&&an.icon?(Se(),lt(Lt,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:N(()=>{var Ue;return[K("img",{src:Qn(Qp)((Ue=Qn(Ou)(fe.value,wt,"id"))==null?void 0:Ue.icon),alt:""},null,8,KU)]}),_:2},1024)):(Se(),lt(An,{key:1,type:(Xt=Qn(Ou)(fe.value,wt,"id"))==null?void 0:Xt.toolType,class:"mr-8",size:20},null,8,["type"])),K("div",{class:"ellipsis",title:(nt=Qn(Ou)(fe.value,wt,"id"))==null?void 0:nt.name},_e((fn=Qn(Ou)(fe.value,wt,"id"))==null?void 0:fn.name),9,ZU)]),k(we,{text:"",onClick:Ue=>Q(wt)},{default:N(()=>[k(Kt,null,{default:N(()=>[k(Ve)]),_:1})]),_:2},1032,["onClick"])])}),128))])):kn("",!0),((ht=_.value.toolIds)==null?void 0:ht.length)>0?(Se(),lt(me,{key:1,onClick:be[8]||(be[8]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",JU,[K("span",QU,_e(ce.$t("views.application.form.toolOutputEnable")),1),K("div",eV,[k(xe,{class:"ml-8",size:"small",modelValue:_.value.toolOutputEnable,"onUpdate:modelValue":be[7]||(be[7]=wt=>_.value.toolOutputEnable=wt)},null,8,["modelValue"])])])]),_:1})):kn("",!0),k(me,{onClick:be[10]||(be[10]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",tV,[K("div",null,[K("span",null,_e(ce.$t("views.application.form.reasoningContent.label")),1)]),K("div",null,[k(xe,{size:"small",modelValue:_.value.modelSetting.reasoningContentEnable,"onUpdate:modelValue":be[9]||(be[9]=wt=>_.value.modelSetting.reasoningContentEnable=wt)},null,8,["modelValue"])])])]),_:1}),k(me,{onClick:be[12]||(be[12]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",nV,[K("div",rV,[K("div",oV,[K("span",null,_e(ce.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(He,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(ce.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",iV,[k(xe,{size:"small",modelValue:_.value.isResult,"onUpdate:modelValue":be[11]||(be[11]=wt=>_.value.isResult=wt)},null,8,["modelValue"])])])]),_:1})]}),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:x,onRefresh:q},null,512),k(oM,{onReplace:X,ref_key:"GeneratePromptDialogRef",ref:L},null,512),k(OI,{ref_key:"ReasoningParamSettingDialogRef",ref:E,onRefresh:H},null,512),k(SI,{ref_key:"toolDialogRef",ref:B,onRefresh:Z},null,512)]),_:1},8,["nodeModel"])}}});var lg={exports:{}},yx;function lV(){return yx||(yx=1,function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(s){if(a[s])return a[s].exports;var c=a[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var f in s)r.d(v,f,(function(g){return s[g]}).bind(null,f));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return L}),r.d(a,"b",function(){return U}),r.d(a,"c",function(){return Lt}),r.d(a,"d",function(){return An}),r.d(a,"e",function(){return j}),r.d(a,"f",function(){return V}),r.d(a,"g",function(){return j}),r.d(a,"h",function(){return Kt}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return Yt}),r.d(a,"k",function(){return Z});var s,c,v,f,g,b,_,S={},A=[],M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function x(Ve,xe){for(var Ce in xe)Ve[Ce]=xe[Ce];return Ve}function E(Ve){var xe=Ve.parentNode;xe&&xe.removeChild(Ve)}function j(Ve,xe,Ce){var qe,_t,ht,wt={};for(ht in xe)ht=="key"?qe=xe[ht]:ht=="ref"?_t=xe[ht]:wt[ht]=xe[ht];if(arguments.length>2&&(wt.children=arguments.length>3?s.call(arguments,2):Ce),typeof Ve=="function"&&Ve.defaultProps!=null)for(ht in Ve.defaultProps)wt[ht]===void 0&&(wt[ht]=Ve.defaultProps[ht]);return D(Ve,wt,qe,_t,null)}function D(Ve,xe,Ce,qe,_t){var ht={type:Ve,props:xe,key:Ce,ref:qe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:_t??++v};return _t==null&&c.vnode!=null&&c.vnode(ht),ht}function V(){return{current:null}}function U(Ve){return Ve.children}function L(Ve,xe){this.props=Ve,this.context=xe}function F(Ve,xe){if(xe==null)return Ve.__?F(Ve.__,Ve.__.__k.indexOf(Ve)+1):null;for(var Ce;xe<Ve.__k.length;xe++)if((Ce=Ve.__k[xe])!=null&&Ce.__e!=null)return Ce.__e;return typeof Ve.type=="function"?F(Ve):null}function X(Ve){var xe,Ce;if((Ve=Ve.__)!=null&&Ve.__c!=null){for(Ve.__e=Ve.__c.base=null,xe=0;xe<Ve.__k.length;xe++)if((Ce=Ve.__k[xe])!=null&&Ce.__e!=null){Ve.__e=Ve.__c.base=Ce.__e;break}return X(Ve)}}function q(Ve){(!Ve.__d&&(Ve.__d=!0)&&f.push(Ve)&&!H.__r++||b!==c.debounceRendering)&&((b=c.debounceRendering)||g)(H)}function H(){for(var Ve;H.__r=f.length;)Ve=f.sort(function(xe,Ce){return xe.__v.__b-Ce.__v.__b}),f=[],Ve.some(function(xe){var Ce,qe,_t,ht,wt,rn;xe.__d&&(wt=(ht=(Ce=xe).__v).__e,(rn=Ce.__P)&&(qe=[],(_t=x({},ht)).__v=ht.__v+1,we(rn,ht,_t,Ce.__n,rn.ownerSVGElement!==void 0,ht.__h!=null?[wt]:null,qe,wt??F(ht),ht.__h),me(qe,ht),ht.__e!=wt&&X(ht)))})}function B(Ve,xe,Ce,qe,_t,ht,wt,rn,an,Xt){var nt,fn,Ue,_n,Jn,ie,tr,Rr=qe&&qe.__k||A,Gr=Rr.length;for(Ce.__k=[],nt=0;nt<xe.length;nt++)if((_n=Ce.__k[nt]=(_n=xe[nt])==null||typeof _n=="boolean"?null:typeof _n=="string"||typeof _n=="number"||typeof _n=="bigint"?D(null,_n,null,null,_n):Array.isArray(_n)?D(U,{children:_n},null,null,null):_n.__b>0?D(_n.type,_n.props,_n.key,null,_n.__v):_n)!=null){if(_n.__=Ce,_n.__b=Ce.__b+1,(Ue=Rr[nt])===null||Ue&&_n.key==Ue.key&&_n.type===Ue.type)Rr[nt]=void 0;else for(fn=0;fn<Gr;fn++){if((Ue=Rr[fn])&&_n.key==Ue.key&&_n.type===Ue.type){Rr[fn]=void 0;break}Ue=null}we(Ve,_n,Ue=Ue||S,_t,ht,wt,rn,an,Xt),Jn=_n.__e,(fn=_n.ref)&&Ue.ref!=fn&&(tr||(tr=[]),Ue.ref&&tr.push(Ue.ref,null,_n),tr.push(fn,_n.__c||Jn,_n)),Jn!=null?(ie==null&&(ie=Jn),typeof _n.type=="function"&&_n.__k===Ue.__k?_n.__d=an=G(_n,an,Ve):an=Q(Ve,_n,Ue,Rr,Jn,an),typeof Ce.type=="function"&&(Ce.__d=an)):an&&Ue.__e==an&&an.parentNode!=Ve&&(an=F(Ue))}for(Ce.__e=ie,nt=Gr;nt--;)Rr[nt]!=null&&(typeof Ce.type=="function"&&Rr[nt].__e!=null&&Rr[nt].__e==Ce.__d&&(Ce.__d=F(qe,nt+1)),yt(Rr[nt],Rr[nt]));if(tr)for(nt=0;nt<tr.length;nt++)Je(tr[nt],tr[++nt],tr[++nt])}function G(Ve,xe,Ce){for(var qe,_t=Ve.__k,ht=0;_t&&ht<_t.length;ht++)(qe=_t[ht])&&(qe.__=Ve,xe=typeof qe.type=="function"?G(qe,xe,Ce):Q(Ce,qe,qe,_t,qe.__e,xe));return xe}function Z(Ve,xe){return xe=xe||[],Ve==null||typeof Ve=="boolean"||(Array.isArray(Ve)?Ve.some(function(Ce){Z(Ce,xe)}):xe.push(Ve)),xe}function Q(Ve,xe,Ce,qe,_t,ht){var wt,rn,an;if(xe.__d!==void 0)wt=xe.__d,xe.__d=void 0;else if(Ce==null||_t!=ht||_t.parentNode==null)e:if(ht==null||ht.parentNode!==Ve)Ve.appendChild(_t),wt=null;else{for(rn=ht,an=0;(rn=rn.nextSibling)&&an<qe.length;an+=2)if(rn==_t)break e;Ve.insertBefore(_t,ht),wt=ht}return wt!==void 0?wt:_t.nextSibling}function fe(Ve,xe,Ce){xe[0]==="-"?Ve.setProperty(xe,Ce):Ve[xe]=Ce==null?"":typeof Ce!="number"||M.test(xe)?Ce:Ce+"px"}function se(Ve,xe,Ce,qe,_t){var ht;e:if(xe==="style")if(typeof Ce=="string")Ve.style.cssText=Ce;else{if(typeof qe=="string"&&(Ve.style.cssText=qe=""),qe)for(xe in qe)Ce&&xe in Ce||fe(Ve.style,xe,"");if(Ce)for(xe in Ce)qe&&Ce[xe]===qe[xe]||fe(Ve.style,xe,Ce[xe])}else if(xe[0]==="o"&&xe[1]==="n")ht=xe!==(xe=xe.replace(/Capture$/,"")),xe=xe.toLowerCase()in Ve?xe.toLowerCase().slice(2):xe.slice(2),Ve.l||(Ve.l={}),Ve.l[xe+ht]=Ce,Ce?qe||Ve.addEventListener(xe,ht?be:ce,ht):Ve.removeEventListener(xe,ht?be:ce,ht);else if(xe!=="dangerouslySetInnerHTML"){if(_t)xe=xe.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(xe!=="href"&&xe!=="list"&&xe!=="form"&&xe!=="tabIndex"&&xe!=="download"&&xe in Ve)try{Ve[xe]=Ce??"";break e}catch{}typeof Ce=="function"||(Ce!=null&&(Ce!==!1||xe[0]==="a"&&xe[1]==="r")?Ve.setAttribute(xe,Ce):Ve.removeAttribute(xe))}}function ce(Ve){this.l[Ve.type+!1](c.event?c.event(Ve):Ve)}function be(Ve){this.l[Ve.type+!0](c.event?c.event(Ve):Ve)}function we(Ve,xe,Ce,qe,_t,ht,wt,rn,an){var Xt,nt,fn,Ue,_n,Jn,ie,tr,Rr,Gr,co,$n=xe.type;if(xe.constructor!==void 0)return null;Ce.__h!=null&&(an=Ce.__h,rn=xe.__e=Ce.__e,xe.__h=null,ht=[rn]),(Xt=c.__b)&&Xt(xe);try{e:if(typeof $n=="function"){if(tr=xe.props,Rr=(Xt=$n.contextType)&&qe[Xt.__c],Gr=Xt?Rr?Rr.props.value:Xt.__:qe,Ce.__c?ie=(nt=xe.__c=Ce.__c).__=nt.__E:("prototype"in $n&&$n.prototype.render?xe.__c=nt=new $n(tr,Gr):(xe.__c=nt=new L(tr,Gr),nt.constructor=$n,nt.render=Be),Rr&&Rr.sub(nt),nt.props=tr,nt.state||(nt.state={}),nt.context=Gr,nt.__n=qe,fn=nt.__d=!0,nt.__h=[]),nt.__s==null&&(nt.__s=nt.state),$n.getDerivedStateFromProps!=null&&(nt.__s==nt.state&&(nt.__s=x({},nt.__s)),x(nt.__s,$n.getDerivedStateFromProps(tr,nt.__s))),Ue=nt.props,_n=nt.state,fn)$n.getDerivedStateFromProps==null&&nt.componentWillMount!=null&&nt.componentWillMount(),nt.componentDidMount!=null&&nt.__h.push(nt.componentDidMount);else{if($n.getDerivedStateFromProps==null&&tr!==Ue&&nt.componentWillReceiveProps!=null&&nt.componentWillReceiveProps(tr,Gr),!nt.__e&&nt.shouldComponentUpdate!=null&&nt.shouldComponentUpdate(tr,nt.__s,Gr)===!1||xe.__v===Ce.__v){nt.props=tr,nt.state=nt.__s,xe.__v!==Ce.__v&&(nt.__d=!1),nt.__v=xe,xe.__e=Ce.__e,xe.__k=Ce.__k,xe.__k.forEach(function(_o){_o&&(_o.__=xe)}),nt.__h.length&&wt.push(nt);break e}nt.componentWillUpdate!=null&&nt.componentWillUpdate(tr,nt.__s,Gr),nt.componentDidUpdate!=null&&nt.__h.push(function(){nt.componentDidUpdate(Ue,_n,Jn)})}nt.context=Gr,nt.props=tr,nt.state=nt.__s,(Xt=c.__r)&&Xt(xe),nt.__d=!1,nt.__v=xe,nt.__P=Ve,Xt=nt.render(nt.props,nt.state,nt.context),nt.state=nt.__s,nt.getChildContext!=null&&(qe=x(x({},qe),nt.getChildContext())),fn||nt.getSnapshotBeforeUpdate==null||(Jn=nt.getSnapshotBeforeUpdate(Ue,_n)),co=Xt!=null&&Xt.type===U&&Xt.key==null?Xt.props.children:Xt,B(Ve,Array.isArray(co)?co:[co],xe,Ce,qe,_t,ht,wt,rn,an),nt.base=xe.__e,xe.__h=null,nt.__h.length&&wt.push(nt),ie&&(nt.__E=nt.__=null),nt.__e=!1}else ht==null&&xe.__v===Ce.__v?(xe.__k=Ce.__k,xe.__e=Ce.__e):xe.__e=He(Ce.__e,xe,Ce,qe,_t,ht,wt,an);(Xt=c.diffed)&&Xt(xe)}catch(_o){xe.__v=null,(an||ht!=null)&&(xe.__e=rn,xe.__h=!!an,ht[ht.indexOf(rn)]=null),c.__e(_o,xe,Ce)}}function me(Ve,xe){c.__c&&c.__c(xe,Ve),Ve.some(function(Ce){try{Ve=Ce.__h,Ce.__h=[],Ve.some(function(qe){qe.call(Ce)})}catch(qe){c.__e(qe,Ce.__v)}})}function He(Ve,xe,Ce,qe,_t,ht,wt,rn){var an,Xt,nt,fn=Ce.props,Ue=xe.props,_n=xe.type,Jn=0;if(_n==="svg"&&(_t=!0),ht!=null){for(;Jn<ht.length;Jn++)if((an=ht[Jn])&&"setAttribute"in an==!!_n&&(_n?an.localName===_n:an.nodeType===3)){Ve=an,ht[Jn]=null;break}}if(Ve==null){if(_n===null)return document.createTextNode(Ue);Ve=_t?document.createElementNS("http://www.w3.org/2000/svg",_n):document.createElement(_n,Ue.is&&Ue),ht=null,rn=!1}if(_n===null)fn===Ue||rn&&Ve.data===Ue||(Ve.data=Ue);else{if(ht=ht&&s.call(Ve.childNodes),Xt=(fn=Ce.props||S).dangerouslySetInnerHTML,nt=Ue.dangerouslySetInnerHTML,!rn){if(ht!=null)for(fn={},Jn=0;Jn<Ve.attributes.length;Jn++)fn[Ve.attributes[Jn].name]=Ve.attributes[Jn].value;(nt||Xt)&&(nt&&(Xt&&nt.__html==Xt.__html||nt.__html===Ve.innerHTML)||(Ve.innerHTML=nt&&nt.__html||""))}if(function(ie,tr,Rr,Gr,co){var $n;for($n in Rr)$n==="children"||$n==="key"||$n in tr||se(ie,$n,null,Rr[$n],Gr);for($n in tr)co&&typeof tr[$n]!="function"||$n==="children"||$n==="key"||$n==="value"||$n==="checked"||Rr[$n]===tr[$n]||se(ie,$n,tr[$n],Rr[$n],Gr)}(Ve,Ue,fn,_t,rn),nt)xe.__k=[];else if(Jn=xe.props.children,B(Ve,Array.isArray(Jn)?Jn:[Jn],xe,Ce,qe,_t&&_n!=="foreignObject",ht,wt,ht?ht[0]:Ce.__k&&F(Ce,0),rn),ht!=null)for(Jn=ht.length;Jn--;)ht[Jn]!=null&&E(ht[Jn]);rn||("value"in Ue&&(Jn=Ue.value)!==void 0&&(Jn!==fn.value||Jn!==Ve.value||_n==="progress"&&!Jn)&&se(Ve,"value",Jn,fn.value,!1),"checked"in Ue&&(Jn=Ue.checked)!==void 0&&Jn!==Ve.checked&&se(Ve,"checked",Jn,fn.checked,!1))}return Ve}function Je(Ve,xe,Ce){try{typeof Ve=="function"?Ve(xe):Ve.current=xe}catch(qe){c.__e(qe,Ce)}}function yt(Ve,xe,Ce){var qe,_t;if(c.unmount&&c.unmount(Ve),(qe=Ve.ref)&&(qe.current&&qe.current!==Ve.__e||Je(qe,null,xe)),(qe=Ve.__c)!=null){if(qe.componentWillUnmount)try{qe.componentWillUnmount()}catch(ht){c.__e(ht,xe)}qe.base=qe.__P=null}if(qe=Ve.__k)for(_t=0;_t<qe.length;_t++)qe[_t]&&yt(qe[_t],xe,typeof Ve.type!="function");Ce||Ve.__e==null||E(Ve.__e),Ve.__e=Ve.__d=void 0}function Be(Ve,xe,Ce){return this.constructor(Ve,Ce)}function Yt(Ve,xe,Ce){var qe,_t,ht;c.__&&c.__(Ve,xe),_t=(qe=typeof Ce=="function")?null:Ce&&Ce.__k||xe.__k,ht=[],we(xe,Ve=(!qe&&Ce||xe).__k=j(U,null,[Ve]),_t||S,S,xe.ownerSVGElement!==void 0,!qe&&Ce?[Ce]:_t?null:xe.firstChild?s.call(xe.childNodes):null,ht,!qe&&Ce?Ce:_t?_t.__e:xe.firstChild,qe),me(ht,Ve)}function Kt(Ve,xe){Yt(Ve,xe,Kt)}function Lt(Ve,xe,Ce){var qe,_t,ht,wt=x({},Ve.props);for(ht in xe)ht=="key"?qe=xe[ht]:ht=="ref"?_t=xe[ht]:wt[ht]=xe[ht];return arguments.length>2&&(wt.children=arguments.length>3?s.call(arguments,2):Ce),D(Ve.type,wt,qe||Ve.key,_t||Ve.ref,null)}function An(Ve,xe){var Ce={__c:xe="__cC"+_++,__:Ve,Consumer:function(qe,_t){return qe.children(_t)},Provider:function(qe){var _t,ht;return this.getChildContext||(_t=[],(ht={})[xe]=this,this.getChildContext=function(){return ht},this.shouldComponentUpdate=function(wt){this.props.value!==wt.value&&_t.some(q)},this.sub=function(wt){_t.push(wt);var rn=wt.componentWillUnmount;wt.componentWillUnmount=function(){_t.splice(_t.indexOf(wt),1),rn&&rn.call(wt)}}),qe.children}};return Ce.Provider.__=Ce.Consumer.contextType=Ce}s=A.slice,c={__e:function(Ve,xe){for(var Ce,qe,_t;xe=xe.__;)if((Ce=xe.__c)&&!Ce.__)try{if((qe=Ce.constructor)&&qe.getDerivedStateFromError!=null&&(Ce.setState(qe.getDerivedStateFromError(Ve)),_t=Ce.__d),Ce.componentDidCatch!=null&&(Ce.componentDidCatch(Ve),_t=Ce.__d),_t)return Ce.__E=Ce}catch(ht){Ve=ht}throw Ve}},v=0,L.prototype.setState=function(Ve,xe){var Ce;Ce=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof Ve=="function"&&(Ve=Ve(x({},Ce),this.props)),Ve&&x(Ce,Ve),Ve!=null&&this.__v&&(xe&&this.__h.push(xe),q(this))},L.prototype.forceUpdate=function(Ve){this.__v&&(this.__e=!0,Ve&&this.__h.push(Ve),q(this))},L.prototype.render=U,f=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,H.__r=0,_=0},function(n,a,r){(function(s,c){r.d(a,"a",function(){return q}),r.d(a,"b",function(){return Dc}),r.d(a,"c",function(){return Da}),r.d(a,"d",function(){return Hn}),r.d(a,"e",function(){return Zt}),r.d(a,"f",function(){return nn}),r.d(a,"g",function(){return Fn}),r.d(a,"h",function(){return Ii}),r.d(a,"i",function(){return co}),r.d(a,"j",function(){return Tn}),r.d(a,"k",function(){return gl}),r.d(a,"l",function(){return Mc}),r.d(a,"m",function(){return ie}),r.d(a,"n",function(){return ls}),r.d(a,"o",function(){return G}),r.d(a,"p",function(){return ip}),r.d(a,"q",function(){return ya}),r.d(a,"r",function(){return ss}),r.d(a,"s",function(){return ua}),r.d(a,"t",function(){return Bo}),r.d(a,"u",function(){return Du}),r.d(a,"v",function(){return qf}),r.d(a,"w",function(){return Pc}),r.d(a,"x",function(){return si}),r.d(a,"y",function(){return _a}),r.d(a,"z",function(){return Ko}),r.d(a,"A",function(){return ci}),r.d(a,"B",function(){return ga}),r.d(a,"C",function(){return Xt}),r.d(a,"D",function(){return Yf}),r.d(a,"E",function(){return zr}),r.d(a,"F",function(){return Yr}),r.d(a,"G",function(){return Ac}),r.d(a,"H",function(){return xc}),r.d(a,"I",function(){return Rc}),r.d(a,"J",function(){return ui}),r.d(a,"K",function(){return Ke}),r.d(a,"L",function(){return lo}),r.d(a,"M",function(){return Lu});var v=[];Object.freeze(v);var f={};function g(){return++Rn.mobxGuid}function b(P){throw _(!1,P),"X"}function _(P,R){if(!P)throw new Error("[mobx] "+(R||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(f);function S(P){var R=!1;return function(){if(!R)return R=!0,P.apply(this,arguments)}}var A=function(){};function M(P){return P!==null&&typeof P=="object"}function x(P){if(P===null||typeof P!="object")return!1;var R=Object.getPrototypeOf(P);return R===Object.prototype||R===null}function E(P,R,z){Object.defineProperty(P,R,{enumerable:!1,writable:!0,configurable:!0,value:z})}function j(P,R){var z="isMobX"+P;return R.prototype[z]=!0,function(oe){return M(oe)&&oe[z]===!0}}function D(P){return P instanceof Map}function V(P){return P instanceof Set}function U(P){var R=new Set;for(var z in P)R.add(z);return Object.getOwnPropertySymbols(P).forEach(function(oe){Object.getOwnPropertyDescriptor(P,oe).enumerable&&R.add(oe)}),Array.from(R)}function L(P){return P&&P.toString?P.toString():new String(P).toString()}function F(P){return P===null?null:typeof P=="object"?""+P:P}var X=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:Object.getOwnPropertyNames,q=Symbol("mobx administration"),H=function(){function P(R){R===void 0&&(R="Atom@"+g()),this.name=R,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=fn.NOT_TRACKING}return P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(R){return R()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(R){return R()})},P.prototype.reportObserved=function(){return Cu(this)},P.prototype.reportChanged=function(){Ji(),function(R){R.lowestObserverState!==fn.STALE&&(R.lowestObserverState=fn.STALE,R.observers.forEach(function(z){z.dependenciesState===fn.UP_TO_DATE&&(z.isTracing!==Ue.NONE&&Ca(z,R),z.onBecomeStale()),z.dependenciesState=fn.STALE}))}(this),la()},P.prototype.toString=function(){return this.name},P}(),B=j("Atom",H);function G(P,R,z){R===void 0&&(R=A),z===void 0&&(z=A);var oe,Ee=new H(P);return R!==A&&Hf("onBecomeObserved",Ee,R,oe),z!==A&&zr(Ee,z),Ee}var Z={structural:function(P,R){return Ft(P,R)},default:function(P,R){return Object.is(P,R)}},Q=function(P,R){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,oe){z.__proto__=oe}||function(z,oe){for(var Ee in oe)oe.hasOwnProperty(Ee)&&(z[Ee]=oe[Ee])},Q(P,R)};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */var fe=function(){return fe=Object.assign||function(P){for(var R,z=1,oe=arguments.length;z<oe;z++)for(var Ee in R=arguments[z])Object.prototype.hasOwnProperty.call(R,Ee)&&(P[Ee]=R[Ee]);return P},fe.apply(this,arguments)};function se(P){var R=typeof Symbol=="function"&&P[Symbol.iterator],z=0;return R?R.call(P):{next:function(){return P&&z>=P.length&&(P=void 0),{value:P&&P[z++],done:!P}}}}function ce(P,R){var z=typeof Symbol=="function"&&P[Symbol.iterator];if(!z)return P;var oe,Ee,Ye=z.call(P),gt=[];try{for(;(R===void 0||R-- >0)&&!(oe=Ye.next()).done;)gt.push(oe.value)}catch(zt){Ee={error:zt}}finally{try{oe&&!oe.done&&(z=Ye.return)&&z.call(Ye)}finally{if(Ee)throw Ee.error}}return gt}function be(){for(var P=[],R=0;R<arguments.length;R++)P=P.concat(ce(arguments[R]));return P}var we=Symbol("mobx did run lazy initializers"),me=Symbol("mobx pending decorators"),He={},Je={};function yt(P,R){var z=R?He:Je;return z[P]||(z[P]={configurable:!0,enumerable:R,get:function(){return Be(this),this[P]},set:function(oe){Be(this),this[P]=oe}})}function Be(P){var R,z;if(P[we]!==!0){var oe=P[me];if(oe){E(P,we,!0);var Ee=be(Object.getOwnPropertySymbols(oe),Object.keys(oe));try{for(var Ye=se(Ee),gt=Ye.next();!gt.done;gt=Ye.next()){var zt=oe[gt.value];zt.propertyCreator(P,zt.prop,zt.descriptor,zt.decoratorTarget,zt.decoratorArguments)}}catch(En){R={error:En}}finally{try{gt&&!gt.done&&(z=Ye.return)&&z.call(Ye)}finally{if(R)throw R.error}}}}}function Yt(P,R){return function(){var z,oe=function(Ee,Ye,gt,zt){if(zt===!0)return R(Ee,Ye,gt,Ee,z),null;if(!Object.prototype.hasOwnProperty.call(Ee,me)){var En=Ee[me];E(Ee,me,fe({},En))}return Ee[me][Ye]={prop:Ye,propertyCreator:R,descriptor:gt,decoratorTarget:Ee,decoratorArguments:z},yt(Ye,P)};return Kt(arguments)?(z=v,oe.apply(null,arguments)):(z=Array.prototype.slice.call(arguments),oe)}}function Kt(P){return(P.length===2||P.length===3)&&(typeof P[1]=="string"||typeof P[1]=="symbol")||P.length===4&&P[3]===!0}function Lt(P,R,z){return si(P)?P:Array.isArray(P)?Xt.array(P,{name:z}):x(P)?Xt.object(P,void 0,{name:z}):D(P)?Xt.map(P,{name:z}):V(P)?Xt.set(P,{name:z}):P}function An(P){return P}function Ve(P){_(P);var R=Yt(!0,function(oe,Ee,Ye,gt,zt){var En=Ye?Ye.initializer?Ye.initializer.call(oe):Ye.value:void 0;sa(oe).addObservableProp(Ee,En,P)}),z=(s!==void 0&&s.env,R);return z.enhancer=P,z}var xe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ce(P){return P==null?xe:typeof P=="string"?{name:P,deep:!0,proxy:!0}:P}Object.freeze(xe);var qe=Ve(Lt),_t=Ve(function(P,R,z){return P==null||ci(P)||_a(P)||Ko(P)||ni(P)?P:Array.isArray(P)?Xt.array(P,{name:z,deep:!1}):x(P)?Xt.object(P,void 0,{name:z,deep:!1}):D(P)?Xt.map(P,{name:z,deep:!1}):V(P)?Xt.set(P,{name:z,deep:!1}):b(!1)}),ht=Ve(An),wt=Ve(function(P,R,z){return Ft(P,R)?R:P});function rn(P){return P.defaultDecorator?P.defaultDecorator.enhancer:P.deep===!1?An:Lt}var an={box:function(P,R){arguments.length>2&&nt("box");var z=Ce(R);return new jr(P,rn(z),z.name,!0,z.equals)},array:function(P,R){arguments.length>2&&nt("array");var z=Ce(R);return $l(P,rn(z),z.name)},map:function(P,R){arguments.length>2&&nt("map");var z=Ce(R);return new Dc(P,rn(z),z.name)},set:function(P,R){arguments.length>2&&nt("set");var z=Ce(R);return new Ya(P,rn(z),z.name)},object:function(P,R,z){typeof arguments[1]=="string"&&nt("object");var oe=Ce(z);if(oe.proxy===!1)return ya({},P,R,oe);var Ee=ju(oe),Ye=ya({},void 0,void 0,oe),gt=us(Ye);return Xf(gt,P,R,Ee),gt},ref:ht,shallow:_t,deep:qe,struct:wt},Xt=function(P,R,z){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return qe.apply(null,arguments);if(si(P))return P;var oe=x(P)?Xt.object(P,R,z):Array.isArray(P)?Xt.array(P,R):D(P)?Xt.map(P,R):V(P)?Xt.set(P,R):P;if(oe!==P)return oe;b(!1)};function nt(P){b("Expected one or two arguments to observable."+P+". Did you accidentally try to use observable."+P+" as decorator?")}Object.keys(an).forEach(function(P){return Xt[P]=an[P]});var fn,Ue,_n=Yt(!1,function(P,R,z,oe,Ee){var Ye=z.get,gt=z.set,zt=Ee[0]||{};sa(P).addComputedProp(P,R,fe({get:Ye,set:gt,context:P},zt))}),Jn=_n({equals:Z.structural}),ie=function(P,R,z){if(typeof R=="string"||P!==null&&typeof P=="object"&&arguments.length===1)return _n.apply(null,arguments);var oe=typeof R=="object"?R:{};return oe.get=P,oe.set=typeof R=="function"?R:oe.set,oe.name=oe.name||P.name||"",new Ha(oe)};ie.struct=Jn,function(P){P[P.NOT_TRACKING=-1]="NOT_TRACKING",P[P.UP_TO_DATE=0]="UP_TO_DATE",P[P.POSSIBLY_STALE=1]="POSSIBLY_STALE",P[P.STALE=2]="STALE"}(fn||(fn={})),function(P){P[P.NONE=0]="NONE",P[P.LOG=1]="LOG",P[P.BREAK=2]="BREAK"}(Ue||(Ue={}));var tr=function(P){this.cause=P};function Rr(P){return P instanceof tr}function Gr(P){switch(P.dependenciesState){case fn.UP_TO_DATE:return!1;case fn.NOT_TRACKING:case fn.STALE:return!0;case fn.POSSIBLY_STALE:for(var R=nn(!0),z=Ie(),oe=P.observing,Ee=oe.length,Ye=0;Ye<Ee;Ye++){var gt=oe[Ye];if(yl(gt)){if(Rn.disableErrorBoundaries)gt.get();else try{gt.get()}catch{return ut(z),Zt(R),!0}if(P.dependenciesState===fn.STALE)return ut(z),Zt(R),!0}}return Nn(P),ut(z),Zt(R),!1}}function co(){return Rn.trackingDerivation!==null}function $n(P){var R=P.observers.size>0;Rn.computationDepth>0&&R&&b(!1),Rn.allowStateChanges||!R&&Rn.enforceActions!=="strict"||b(!1)}function _o(P,R,z){var oe=nn(!0);Nn(P),P.newObserving=new Array(P.observing.length+100),P.unboundDepsCount=0,P.runId=++Rn.runId;var Ee,Ye=Rn.trackingDerivation;if(Rn.trackingDerivation=P,Rn.disableErrorBoundaries===!0)Ee=R.call(z);else try{Ee=R.call(z)}catch(gt){Ee=new tr(gt)}return Rn.trackingDerivation=Ye,function(gt){for(var zt=gt.observing,En=gt.observing=gt.newObserving,wr=fn.UP_TO_DATE,dn=0,Hr=gt.unboundDepsCount,mr=0;mr<Hr;mr++)(Lr=En[mr]).diffValue===0&&(Lr.diffValue=1,dn!==mr&&(En[dn]=Lr),dn++),Lr.dependenciesState>wr&&(wr=Lr.dependenciesState);for(En.length=dn,gt.newObserving=null,Hr=zt.length;Hr--;)(Lr=zt[Hr]).diffValue===0&&wo(Lr,gt),Lr.diffValue=0;for(;dn--;){var Lr;(Lr=En[dn]).diffValue===1&&(Lr.diffValue=0,Vf(Lr,gt))}wr!==fn.UP_TO_DATE&&(gt.dependenciesState=wr,gt.onBecomeStale())}(P),Zt(oe),Ee}function Me(P){var R=P.observing;P.observing=[];for(var z=R.length;z--;)wo(R[z],P);P.dependenciesState=fn.NOT_TRACKING}function Ke(P){var R=Ie();try{return P()}finally{ut(R)}}function Ie(){var P=Rn.trackingDerivation;return Rn.trackingDerivation=null,P}function ut(P){Rn.trackingDerivation=P}function nn(P){var R=Rn.allowStateReads;return Rn.allowStateReads=P,R}function Zt(P){Rn.allowStateReads=P}function Nn(P){if(P.dependenciesState!==fn.UP_TO_DATE){P.dependenciesState=fn.UP_TO_DATE;for(var R=P.observing,z=R.length;z--;)R[z].lowestObserverState=fn.UP_TO_DATE}}var Or=0,li=1,Si=Object.getOwnPropertyDescriptor(function(){},"name");Si&&Si.configurable;function Yo(P,R,z){var oe=function(){return ti(P,R,z||this,arguments)};return oe.isMobxAction=!0,oe}function ti(P,R,z,oe){var Ee=Tn();try{return R.apply(z,oe)}catch(Ye){throw Ee.error=Ye,Ye}finally{Fn(Ee)}}function Tn(P,R,z){var oe=0,Ee=Ie();Ji();var Ye={prevDerivation:Ee,prevAllowStateChanges:lr(!0),prevAllowStateReads:nn(!0),notifySpy:!1,startTime:oe,actionId:li++,parentActionId:Or};return Or=Ye.actionId,Ye}function Fn(P){Or!==P.actionId&&b("invalid action stack. did you forget to finish an action?"),Or=P.parentActionId,P.error!==void 0&&(Rn.suppressReactionErrors=!0),to(P.prevAllowStateChanges),Zt(P.prevAllowStateReads),la(),ut(P.prevDerivation),P.notifySpy,Rn.suppressReactionErrors=!1}function Hn(P,R){var z,oe=lr(P);try{z=R()}finally{to(oe)}return z}function lr(P){var R=Rn.allowStateChanges;return Rn.allowStateChanges=P,R}function to(P){Rn.allowStateChanges=P}var jr=function(P){function R(z,oe,Ee,Ye,gt){Ee===void 0&&(Ee="ObservableValue@"+g()),gt===void 0&&(gt=Z.default);var zt=P.call(this,Ee)||this;return zt.enhancer=oe,zt.name=Ee,zt.equals=gt,zt.hasUnreportedChange=!1,zt.value=oe(z,void 0,Ee),zt}return function(z,oe){function Ee(){this.constructor=z}Q(z,oe),z.prototype=oe===null?Object.create(oe):(Ee.prototype=oe.prototype,new Ee)}(R,P),R.prototype.dehanceValue=function(z){return this.dehancer!==void 0?this.dehancer(z):z},R.prototype.set=function(z){this.value,(z=this.prepareNewValue(z))!==Rn.UNCHANGED&&this.setNewValue(z)},R.prototype.prepareNewValue=function(z){if($n(this),ea(this)){var oe=Nr(this,{object:this,type:"update",newValue:z});if(!oe)return Rn.UNCHANGED;z=oe.newValue}return z=this.enhancer(z,this.value,this.name),this.equals(this.value,z)?Rn.UNCHANGED:z},R.prototype.setNewValue=function(z){var oe=this.value;this.value=z,this.reportChanged(),Wi(this)&&yi(this,{type:"update",object:this,newValue:z,oldValue:oe})},R.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},R.prototype.intercept=function(z){return ba(this,z)},R.prototype.observe=function(z,oe){return oe&&z({object:this,type:"update",newValue:this.value,oldValue:void 0}),ja(this,z)},R.prototype.toJSON=function(){return this.get()},R.prototype.toString=function(){return this.name+"["+this.value+"]"},R.prototype.valueOf=function(){return F(this.get())},R.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},R}(H),ml=j("ObservableValue",jr),Ha=function(){function P(R){this.dependenciesState=fn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=fn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new tr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ue.NONE,_(R.get,"missing option for computed: get"),this.derivation=R.get,this.name=R.name||"ComputedValue@"+g(),R.set&&(this.setter=Yo(this.name+"-setter",R.set)),this.equals=R.equals||(R.compareStructural||R.struct?Z.structural:Z.default),this.scope=R.context,this.requiresReaction=!!R.requiresReaction,this.keepAlive=!!R.keepAlive}return P.prototype.onBecomeStale=function(){(function(R){R.lowestObserverState===fn.UP_TO_DATE&&(R.lowestObserverState=fn.POSSIBLY_STALE,R.observers.forEach(function(z){z.dependenciesState===fn.UP_TO_DATE&&(z.dependenciesState=fn.POSSIBLY_STALE,z.isTracing!==Ue.NONE&&Ca(z,R),z.onBecomeStale())}))})(this)},P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(R){return R()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(R){return R()})},P.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),Rn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Cu(this),Gr(this)&&this.trackAndCompute()&&function(z){z.lowestObserverState!==fn.STALE&&(z.lowestObserverState=fn.STALE,z.observers.forEach(function(oe){oe.dependenciesState===fn.POSSIBLY_STALE?oe.dependenciesState=fn.STALE:oe.dependenciesState===fn.UP_TO_DATE&&(z.lowestObserverState=fn.UP_TO_DATE)}))}(this)):Gr(this)&&(this.warnAboutUntrackedRead(),Ji(),this.value=this.computeValue(!1),la());var R=this.value;if(Rr(R))throw R.cause;return R},P.prototype.peek=function(){var R=this.computeValue(!1);if(Rr(R))throw R.cause;return R},P.prototype.set=function(R){if(this.setter){_(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,R)}finally{this.isRunningSetter=!1}}else _(!1,!1)},P.prototype.trackAndCompute=function(){var R=this.value,z=this.dependenciesState===fn.NOT_TRACKING,oe=this.computeValue(!0),Ee=z||Rr(R)||Rr(oe)||!this.equals(R,oe);return Ee&&(this.value=oe),Ee},P.prototype.computeValue=function(R){var z;if(this.isComputing=!0,Rn.computationDepth++,R)z=_o(this,this.derivation,this.scope);else if(Rn.disableErrorBoundaries===!0)z=this.derivation.call(this.scope);else try{z=this.derivation.call(this.scope)}catch(oe){z=new tr(oe)}return Rn.computationDepth--,this.isComputing=!1,z},P.prototype.suspend=function(){this.keepAlive||(Me(this),this.value=void 0)},P.prototype.observe=function(R,z){var oe=this,Ee=!0,Ye=void 0;return Mc(function(){var gt=oe.get();if(!Ee||z){var zt=Ie();R({type:"update",object:oe,newValue:gt,oldValue:Ye}),ut(zt)}Ee=!1,Ye=gt})},P.prototype.warnAboutUntrackedRead=function(){},P.prototype.toJSON=function(){return this.get()},P.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},P.prototype.valueOf=function(){return F(this.get())},P.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},P}(),yl=j("ComputedValue",Ha),as=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},np={};function wc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:np}var va=!0,Us=!1,Rn=function(){var P=wc();return P.__mobxInstanceCount>0&&!P.__mobxGlobals&&(va=!1),P.__mobxGlobals&&P.__mobxGlobals.version!==new as().version&&(va=!1),va?P.__mobxGlobals?(P.__mobxInstanceCount+=1,P.__mobxGlobals.UNCHANGED||(P.__mobxGlobals.UNCHANGED={}),P.__mobxGlobals):(P.__mobxInstanceCount=1,P.__mobxGlobals=new as):(setTimeout(function(){Us||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new as)}();function Vf(P,R){P.observers.add(R),P.lowestObserverState>R.dependenciesState&&(P.lowestObserverState=R.dependenciesState)}function wo(P,R){P.observers.delete(R),P.observers.size===0&&Ec(P)}function Ec(P){P.isPendingUnobservation===!1&&(P.isPendingUnobservation=!0,Rn.pendingUnobservations.push(P))}function Ji(){Rn.inBatch++}function la(){if(--Rn.inBatch==0){Sc();for(var P=Rn.pendingUnobservations,R=0;R<P.length;R++){var z=P[R];z.isPendingUnobservation=!1,z.observers.size===0&&(z.isBeingObserved&&(z.isBeingObserved=!1,z.onBecomeUnobserved()),z instanceof Ha&&z.suspend())}Rn.pendingUnobservations=[]}}function Cu(P){var R=Rn.trackingDerivation;return R!==null?(R.runId!==P.lastAccessedBy&&(P.lastAccessedBy=R.runId,R.newObserving[R.unboundDepsCount++]=P,P.isBeingObserved||(P.isBeingObserved=!0,P.onBecomeObserved())),!0):(P.observers.size===0&&Rn.inBatch>0&&Ec(P),!1)}function Ca(P,R){if(P.isTracing===Ue.BREAK){var z=[];ma(Bo(P),z,1),new Function(`debugger;
/*
Tracing '`+P.name+`'

You are entering this break point because derivation '`+P.name+"' is being traced and '"+R.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(P instanceof Ha?P.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+z.join(`
`)+`
*/
    `)()}}function ma(P,R,z){R.length>=1e3?R.push("(and many more)"):(R.push(""+new Array(z).join("	")+P.name),P.dependencies&&P.dependencies.forEach(function(oe){return ma(oe,R,z+1)}))}var Da=function(){function P(R,z,oe,Ee){R===void 0&&(R="Reaction@"+g()),Ee===void 0&&(Ee=!1),this.name=R,this.onInvalidate=z,this.errorHandler=oe,this.requiresObservable=Ee,this.observing=[],this.newObserving=[],this.dependenciesState=fn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ue.NONE}return P.prototype.onBecomeStale=function(){this.schedule()},P.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Rn.pendingReactions.push(this),Sc())},P.prototype.isScheduled=function(){return this._isScheduled},P.prototype.runReaction=function(){if(!this.isDisposed){if(Ji(),this._isScheduled=!1,Gr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(R){this.reportExceptionInDerivation(R)}}la()}},P.prototype.track=function(R){if(!this.isDisposed){Ji(),this._isRunning=!0;var z=_o(this,R,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Me(this),Rr(z)&&this.reportExceptionInDerivation(z.cause),la()}},P.prototype.reportExceptionInDerivation=function(R){var z=this;if(this.errorHandler)this.errorHandler(R,this);else{if(Rn.disableErrorBoundaries)throw R;Rn.suppressReactionErrors,Rn.globalReactionErrorHandlers.forEach(function(oe){return oe(R,z)})}},P.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ji(),Me(this),la()))},P.prototype.getDisposer=function(){var R=this.dispose.bind(this);return R[q]=this,R},P.prototype.toString=function(){return"Reaction["+this.name+"]"},P.prototype.trace=function(R){R===void 0&&(R=!1),function(){for(var z=[],oe=0;oe<arguments.length;oe++)z[oe]=arguments[oe];var Ee=!1;typeof z[z.length-1]=="boolean"&&(Ee=z.pop());var Ye=Fr(z);if(!Ye)return b(!1);Ye.isTracing,Ue.NONE,Ye.isTracing=Ee?Ue.BREAK:Ue.LOG}(this,R)},P}(),Oc=function(P){return P()};function Sc(){Rn.inBatch>0||Rn.isRunningReactions||Oc(Bf)}function Bf(){Rn.isRunningReactions=!0;for(var P=Rn.pendingReactions,R=0;P.length>0;){++R==100&&P.splice(0);for(var z=P.splice(0),oe=0,Ee=z.length;oe<Ee;oe++)z[oe].runReaction()}Rn.isRunningReactions=!1}var Vs=j("Reaction",Da);function Wf(P){var R=Oc;Oc=function(z){return P(function(){return R(z)})}}function xc(P){return function(){}}function rp(){b(!1)}function jl(P){return function(R,z,oe){if(oe){if(oe.value)return{value:Yo(P,oe.value),enumerable:!1,configurable:!0,writable:!0};var Ee=oe.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Yo(P,Ee.call(this))}}}return Gf(P).apply(this,arguments)}}function Gf(P){return function(R,z,oe){Object.defineProperty(R,z,{configurable:!0,enumerable:!1,get:function(){},set:function(Ee){E(this,z,gl(P,Ee))}})}}var gl=function(P,R,z,oe){return arguments.length===1&&typeof P=="function"?Yo(P.name||"<unnamed action>",P):arguments.length===2&&typeof R=="function"?Yo(P,R):arguments.length===1&&typeof P=="string"?jl(P):oe!==!0?jl(R).apply(null,arguments):void E(P,R,Yo(P.name||R,z.value,this))};function Ac(P,R){return ti(typeof P=="string"?P:P.name||"<unnamed action>",typeof P=="function"?P:R,this,void 0)}function Du(P){return typeof P=="function"&&P.isMobxAction===!0}function Tc(P,R,z){E(P,R,Yo(R,z.bind(P)))}function Mc(P,R){R===void 0&&(R=f);var z,oe=R&&R.name||P.name||"Autorun@"+g();if(!R.scheduler&&!R.delay)z=new Da(oe,function(){this.track(gt)},R.onError,R.requiresObservable);else{var Ee=zf(R),Ye=!1;z=new Da(oe,function(){Ye||(Ye=!0,Ee(function(){Ye=!1,z.isDisposed||z.track(gt)}))},R.onError,R.requiresObservable)}function gt(){P(z)}return z.schedule(),z.getDisposer()}gl.bound=function(P,R,z,oe){return oe===!0?(Tc(P,R,z.value),null):z?{configurable:!0,enumerable:!1,get:function(){return Tc(this,R,z.value||z.initializer.call(this)),this[R]},set:rp}:{enumerable:!1,configurable:!0,set:function(Ee){Tc(this,R,Ee)},get:function(){}}};var op=function(P){return P()};function zf(P){return P.scheduler?P.scheduler:P.delay?function(R){return setTimeout(R,P.delay)}:op}function Yr(P,R,z){z===void 0&&(z=f);var oe,Ee,Ye,gt=z.name||"Reaction@"+g(),zt=gl(gt,z.onError?(oe=z.onError,Ee=R,function(){try{return Ee.apply(this,arguments)}catch(Ao){oe.call(this,Ao)}}):R),En=!z.scheduler&&!z.delay,wr=zf(z),dn=!0,Hr=!1,mr=z.compareStructural?Z.structural:z.equals||Z.default,Lr=new Da(gt,function(){dn||En?ca():Hr||(Hr=!0,wr(ca))},z.onError,z.requiresObservable);function ca(){if(Hr=!1,!Lr.isDisposed){var Ao=!1;Lr.track(function(){var na=P(Lr);Ao=dn||!mr(Ye,na),Ye=na}),dn&&z.fireImmediately&&zt(Ye,Lr),dn||Ao!==!0||zt(Ye,Lr),dn&&(dn=!1)}}return Lr.schedule(),Lr.getDisposer()}function zr(P,R,z){return Hf("onBecomeUnobserved",P,R,z)}function Hf(P,R,z,oe){var Ee=typeof oe=="function"?ua(R,z):ua(R),Ye=typeof oe=="function"?oe:z,gt=P+"Listeners";return Ee[gt]?Ee[gt].add(Ye):Ee[gt]=new Set([Ye]),typeof Ee[P]!="function"?b(!1):function(){var zt=Ee[gt];zt&&(zt.delete(Ye),zt.size===0&&delete Ee[gt])}}function ls(P){var R=P.enforceActions,z=P.computedRequiresReaction,oe=P.computedConfigurable,Ee=P.disableErrorBoundaries,Ye=P.reactionScheduler,gt=P.reactionRequiresObservable,zt=P.observableRequiresReaction;if(P.isolateGlobalState===!0&&((Rn.pendingReactions.length||Rn.inBatch||Rn.isRunningReactions)&&b("isolateGlobalState should be called before MobX is running any reactions"),Us=!0,va&&(--wc().__mobxInstanceCount==0&&(wc().__mobxGlobals=void 0),Rn=new as)),R!==void 0){var En=void 0;switch(R){case!0:case"observed":En=!0;break;case!1:case"never":En=!1;break;case"strict":case"always":En="strict";break;default:b("Invalid value for 'enforceActions': '"+R+"', expected 'never', 'always' or 'observed'")}Rn.enforceActions=En,Rn.allowStateChanges=En!==!0&&En!=="strict"}z!==void 0&&(Rn.computedRequiresReaction=!!z),gt!==void 0&&(Rn.reactionRequiresObservable=!!gt),zt!==void 0&&(Rn.observableRequiresReaction=!!zt,Rn.allowStateReads=!Rn.observableRequiresReaction),oe!==void 0&&(Rn.computedConfigurable=!!oe),Ee!==void 0&&(Rn.disableErrorBoundaries=!!Ee),Ye&&Wf(Ye)}function ya(P,R,z,oe){var Ee=ju(oe=Ce(oe));return Be(P),sa(P,oe.name,Ee.enhancer),R&&Xf(P,R,z,Ee),P}function ju(P){return P.defaultDecorator||(P.deep===!1?ht:qe)}function Xf(P,R,z,oe){var Ee,Ye;Ji();try{var gt=X(R);try{for(var zt=se(gt),En=zt.next();!En.done;En=zt.next()){var wr=En.value,dn=Object.getOwnPropertyDescriptor(R,wr),Hr=(z&&wr in z?z[wr]:dn.get?_n:oe)(P,wr,dn,!0);Hr&&Object.defineProperty(P,wr,Hr)}}catch(mr){Ee={error:mr}}finally{try{En&&!En.done&&(Ye=zt.return)&&Ye.call(zt)}finally{if(Ee)throw Ee.error}}}finally{la()}}function Bo(P,R){return Il(ua(P,R))}function Il(P){var R,z,oe={name:P.name};return P.observing&&P.observing.length>0&&(oe.dependencies=(R=P.observing,z=[],R.forEach(function(Ee){z.indexOf(Ee)===-1&&z.push(Ee)}),z).map(Il)),oe}var Ll=0;function Iu(){this.message="FLOW_CANCELLED"}function ss(P){arguments.length!==1&&b("Flow expects 1 argument and cannot be used as decorator");var R=P.name||"<unnamed flow>";return function(){var z,oe=this,Ee=arguments,Ye=++Ll,gt=gl(R+" - runid: "+Ye+" - init",P).apply(oe,Ee),zt=void 0,En=new Promise(function(wr,dn){var Hr=0;function mr(Ao){var na;zt=void 0;try{na=gl(R+" - runid: "+Ye+" - yield "+Hr++,gt.next).call(gt,Ao)}catch(bl){return dn(bl)}ca(na)}function Lr(Ao){var na;zt=void 0;try{na=gl(R+" - runid: "+Ye+" - yield "+Hr++,gt.throw).call(gt,Ao)}catch(bl){return dn(bl)}ca(na)}function ca(Ao){if(!Ao||typeof Ao.then!="function")return Ao.done?wr(Ao.value):(zt=Promise.resolve(Ao.value)).then(mr,Lr);Ao.then(ca,dn)}z=dn,mr(void 0)});return En.cancel=gl(R+" - runid: "+Ye+" - cancel",function(){try{zt&&xi(zt);var wr=gt.return(void 0),dn=Promise.resolve(wr.value);dn.then(A,A),xi(dn),z(new Iu)}catch(Hr){z(Hr)}}),En}}function xi(P){typeof P.cancel=="function"&&P.cancel()}function kc(P,R){if(P==null)return!1;if(R!==void 0){if(ci(P)===!1||!P[q].values.has(R))return!1;var z=ua(P,R);return yl(z)}return yl(P)}function qf(P){return arguments.length>1?b(!1):kc(P)}function Pc(P,R){return typeof R!="string"?b(!1):kc(P,R)}function Fi(P,R){return P!=null&&(R!==void 0?!!ci(P)&&P[q].values.has(R):ci(P)||!!P[q]||B(P)||Vs(P)||yl(P))}function si(P){return arguments.length!==1&&b(!1),Fi(P)}function ga(P){return ci(P)?P[q].getKeys():Ko(P)||ni(P)?Array.from(P.keys()):_a(P)?P.map(function(R,z){return z}):b(!1)}function lo(P){return ci(P)?ga(P).map(function(R){return P[R]}):Ko(P)?ga(P).map(function(R){return P.get(R)}):ni(P)?Array.from(P.values()):_a(P)?P.slice():b(!1)}function ip(P){return ci(P)?ga(P).map(function(R){return[R,P[R]]}):Ko(P)?ga(P).map(function(R){return[R,P.get(R)]}):ni(P)?Array.from(P.entries()):_a(P)?P.map(function(R,z){return[z,R]}):b(!1)}function Ui(P,R,z){if(arguments.length!==2||ni(P))if(ci(P)){var oe=P[q],Ee=oe.values.get(R);Ee?oe.write(R,z):oe.addObservableProp(R,z,oe.defaultEnhancer)}else if(Ko(P))P.set(R,z);else if(ni(P))P.add(R);else{if(!_a(P))return b(!1);typeof R!="number"&&(R=parseInt(R,10)),_(R>=0,"Not a valid index: '"+R+"'"),Ji(),R>=P.length&&(P.length=R+1),P[R]=z,la()}else{Ji();var Ye=R;try{for(var gt in Ye)Ui(P,gt,Ye[gt])}finally{la()}}}function Yf(P,R,z,oe){return typeof z=="function"?function(Ee,Ye,gt,zt){return Ii(Ee,Ye).observe(gt,zt)}(P,R,z,oe):function(Ee,Ye,gt){return Ii(Ee).observe(Ye,gt)}(P,R,z)}Iu.prototype=Object.create(Error.prototype);var Kf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Vi(P,R,z,oe){return oe.detectCycles&&P.set(R,z),z}function Qi(P,R,z){if(!R.recurseEverything&&!si(P)||typeof P!="object")return P;if(P===null)return null;if(P instanceof Date)return P;if(ml(P))return Qi(P.get(),R,z);if(si(P)&&ga(P),R.detectCycles===!0&&P!==null&&z.has(P))return z.get(P);if(_a(P)||Array.isArray(P)){var oe=Vi(z,P,[],R),Ee=P.map(function(mr){return Qi(mr,R,z)});oe.length=Ee.length;for(var Ye=0,gt=Ee.length;Ye<gt;Ye++)oe[Ye]=Ee[Ye];return oe}if(ni(P)||Object.getPrototypeOf(P)===Set.prototype){if(R.exportMapsAsObjects===!1){var zt=Vi(z,P,new Set,R);return P.forEach(function(mr){zt.add(Qi(mr,R,z))}),zt}var En=Vi(z,P,[],R);return P.forEach(function(mr){En.push(Qi(mr,R,z))}),En}if(Ko(P)||Object.getPrototypeOf(P)===Map.prototype){if(R.exportMapsAsObjects===!1){var wr=Vi(z,P,new Map,R);return P.forEach(function(mr,Lr){wr.set(Lr,Qi(mr,R,z))}),wr}var dn=Vi(z,P,{},R);return P.forEach(function(mr,Lr){dn[Lr]=Qi(mr,R,z)}),dn}var Hr=Vi(z,P,{},R);return U(P).forEach(function(mr){Hr[mr]=Qi(P[mr],R,z)}),Hr}function Rc(P,R){var z;return typeof R=="boolean"&&(R={detectCycles:R}),R||(R=Kf),R.detectCycles=R.detectCycles===void 0?R.recurseEverything===!0:R.detectCycles===!0,R.detectCycles&&(z=new Map),Qi(P,R,z)}function Fr(P){switch(P.length){case 0:return Rn.trackingDerivation;case 1:return ua(P[0]);case 2:return ua(P[0],P[1])}}function ui(P,R){R===void 0&&(R=void 0),Ji();try{return P.apply(R)}finally{la()}}function Lu(P,R,z){return arguments.length===1||R&&typeof R=="object"?Nc(P,R):Zf(P,R,z||{})}function Zf(P,R,z){var oe;typeof z.timeout=="number"&&(oe=setTimeout(function(){if(!Ye[q].isDisposed){Ye();var gt=new Error("WHEN_TIMEOUT");if(!z.onError)throw gt;z.onError(gt)}},z.timeout)),z.name=z.name||"When@"+g();var Ee=Yo(z.name+"-effect",R),Ye=Mc(function(gt){P()&&(gt.dispose(),oe&&clearTimeout(oe),Ee())},z);return Ye}function Nc(P,R){var z,oe=new Promise(function(Ee,Ye){var gt=Zf(P,Ee,fe(fe({},R),{onError:Ye}));z=function(){gt(),Ye("WHEN_CANCELLED")}});return oe.cancel=z,oe}function $u(P){return P[q]}function Xa(P){return typeof P=="string"||typeof P=="number"||typeof P=="symbol"}var Bi={has:function(P,R){if(R===q||R==="constructor"||R===we)return!0;var z=$u(P);return Xa(R)?z.has(R):R in P},get:function(P,R){if(R===q||R==="constructor"||R===we)return P[R];var z=$u(P),oe=z.values.get(R);if(oe instanceof H){var Ee=oe.get();return Ee===void 0&&z.has(R),Ee}return Xa(R)&&z.has(R),P[R]},set:function(P,R,z){return!!Xa(R)&&(Ui(P,R,z),!0)},deleteProperty:function(P,R){return!!Xa(R)&&($u(P).remove(R),!0)},ownKeys:function(P){return $u(P).keysAtom.reportObserved(),Reflect.ownKeys(P)},preventExtensions:function(P){return b("Dynamic observable objects cannot be frozen"),!1}};function us(P){var R=new Proxy(P,Bi);return P[q].proxy=R,R}function ea(P){return P.interceptors!==void 0&&P.interceptors.length>0}function ba(P,R){var z=P.interceptors||(P.interceptors=[]);return z.push(R),S(function(){var oe=z.indexOf(R);oe!==-1&&z.splice(oe,1)})}function Nr(P,R){var z=Ie();try{for(var oe=be(P.interceptors||[]),Ee=0,Ye=oe.length;Ee<Ye&&(_(!(R=oe[Ee](R))||R.type,"Intercept handlers should return nothing or a change object"),R);Ee++);return R}finally{ut(z)}}function Wi(P){return P.changeListeners!==void 0&&P.changeListeners.length>0}function ja(P,R){var z=P.changeListeners||(P.changeListeners=[]);return z.push(R),S(function(){var oe=z.indexOf(R);oe!==-1&&z.splice(oe,1)})}function yi(P,R){var z=Ie(),oe=P.changeListeners;if(oe){for(var Ee=0,Ye=(oe=oe.slice()).length;Ee<Ye;Ee++)oe[Ee](R);ut(z)}}var cs={get:function(P,R){return R===q?P[q]:R==="length"?P[q].getArrayLength():typeof R=="number"?ho.get.call(P,R):typeof R!="string"||isNaN(R)?ho.hasOwnProperty(R)?ho[R]:P[R]:ho.get.call(P,parseInt(R))},set:function(P,R,z){return R==="length"&&P[q].setArrayLength(z),typeof R=="number"&&ho.set.call(P,R,z),typeof R=="symbol"||isNaN(R)?P[R]=z:ho.set.call(P,parseInt(R),z),!0},preventExtensions:function(P){return b("Observable arrays cannot be frozen"),!1}};function $l(P,R,z,oe){z===void 0&&(z="ObservableArray@"+g()),oe===void 0&&(oe=!1);var Ee,Ye,gt,zt=new Ia(z,R,oe);Ee=zt.values,Ye=q,gt=zt,Object.defineProperty(Ee,Ye,{enumerable:!1,writable:!1,configurable:!0,value:gt});var En=new Proxy(zt.values,cs);if(zt.proxy=En,P&&P.length){var wr=lr(!0);zt.spliceWithArray(0,0,P),to(wr)}return En}var Ia=function(){function P(R,z,oe){this.owned=oe,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new H(R||"ObservableArray@"+g()),this.enhancer=function(Ee,Ye){return z(Ee,Ye,R+"[..]")}}return P.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},P.prototype.dehanceValues=function(R){return this.dehancer!==void 0&&R.length>0?R.map(this.dehancer):R},P.prototype.intercept=function(R){return ba(this,R)},P.prototype.observe=function(R,z){return z===void 0&&(z=!1),z&&R({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ja(this,R)},P.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},P.prototype.setArrayLength=function(R){if(typeof R!="number"||R<0)throw new Error("[mobx.array] Out of range: "+R);var z=this.values.length;if(R!==z)if(R>z){for(var oe=new Array(R-z),Ee=0;Ee<R-z;Ee++)oe[Ee]=void 0;this.spliceWithArray(z,0,oe)}else this.spliceWithArray(R,z-R)},P.prototype.updateArrayLength=function(R,z){if(R!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=z},P.prototype.spliceWithArray=function(R,z,oe){var Ee=this;$n(this.atom);var Ye=this.values.length;if(R===void 0?R=0:R>Ye?R=Ye:R<0&&(R=Math.max(0,Ye+R)),z=arguments.length===1?Ye-R:z==null?0:Math.max(0,Math.min(z,Ye-R)),oe===void 0&&(oe=v),ea(this)){var gt=Nr(this,{object:this.proxy,type:"splice",index:R,removedCount:z,added:oe});if(!gt)return v;z=gt.removedCount,oe=gt.added}oe=oe.length===0?oe:oe.map(function(En){return Ee.enhancer(En,void 0)});var zt=this.spliceItemsIntoValues(R,z,oe);return z===0&&oe.length===0||this.notifyArraySplice(R,oe,zt),this.dehanceValues(zt)},P.prototype.spliceItemsIntoValues=function(R,z,oe){var Ee;if(oe.length<1e4)return(Ee=this.values).splice.apply(Ee,be([R,z],oe));var Ye=this.values.slice(R,R+z);return this.values=this.values.slice(0,R).concat(oe,this.values.slice(R+z)),Ye},P.prototype.notifyArrayChildUpdate=function(R,z,oe){var Ee=!this.owned&&!1,Ye=Wi(this),gt=Ye||Ee?{object:this.proxy,type:"update",index:R,newValue:z,oldValue:oe}:null;this.atom.reportChanged(),Ye&&yi(this,gt)},P.prototype.notifyArraySplice=function(R,z,oe){var Ee=!this.owned&&!1,Ye=Wi(this),gt=Ye||Ee?{object:this.proxy,type:"splice",index:R,removed:oe,added:z,removedCount:oe.length,addedCount:z.length}:null;this.atom.reportChanged(),Ye&&yi(this,gt)},P}(),ho={intercept:function(P){return this[q].intercept(P)},observe:function(P,R){return R===void 0&&(R=!1),this[q].observe(P,R)},clear:function(){return this.splice(0)},replace:function(P){var R=this[q];return R.spliceWithArray(0,R.values.length,P)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(P,R){for(var z=[],oe=2;oe<arguments.length;oe++)z[oe-2]=arguments[oe];var Ee=this[q];switch(arguments.length){case 0:return[];case 1:return Ee.spliceWithArray(P);case 2:return Ee.spliceWithArray(P,R)}return Ee.spliceWithArray(P,R,z)},spliceWithArray:function(P,R,z){return this[q].spliceWithArray(P,R,z)},push:function(){for(var P=[],R=0;R<arguments.length;R++)P[R]=arguments[R];var z=this[q];return z.spliceWithArray(z.values.length,0,P),z.values.length},pop:function(){return this.splice(Math.max(this[q].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var P=[],R=0;R<arguments.length;R++)P[R]=arguments[R];var z=this[q];return z.spliceWithArray(0,0,P),z.values.length},reverse:function(){var P=this.slice();return P.reverse.apply(P,arguments)},sort:function(P){var R=this.slice();return R.sort.apply(R,arguments)},remove:function(P){var R=this[q],z=R.dehanceValues(R.values).indexOf(P);return z>-1&&(this.splice(z,1),!0)},get:function(P){var R=this[q];if(R&&P<R.values.length)return R.atom.reportObserved(),R.dehanceValue(R.values[P])},set:function(P,R){var z=this[q],oe=z.values;if(P<oe.length){$n(z.atom);var Ee=oe[P];if(ea(z)){var Ye=Nr(z,{type:"update",object:z.proxy,index:P,newValue:R});if(!Ye)return;R=Ye.newValue}(R=z.enhancer(R,Ee))!==Ee&&(oe[P]=R,z.notifyArrayChildUpdate(P,R,Ee))}else{if(P!==oe.length)throw new Error("[mobx.array] Index out of bounds, "+P+" is larger than "+oe.length);z.spliceWithArray(P,0,[R])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(P){typeof Array.prototype[P]=="function"&&(ho[P]=function(){var R=this[q];R.atom.reportObserved();var z=R.dehanceValues(R.values);return z[P].apply(z,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(P){typeof Array.prototype[P]=="function"&&(ho[P]=function(R,z){var oe=this,Ee=this[q];return Ee.atom.reportObserved(),Ee.dehanceValues(Ee.values)[P](function(Ye,gt){return R.call(z,Ye,gt,oe)},z)})}),["reduce","reduceRight"].forEach(function(P){ho[P]=function(){var R=this,z=this[q];z.atom.reportObserved();var oe=arguments[0];return arguments[0]=function(Ee,Ye,gt){return Ye=z.dehanceValue(Ye),oe(Ee,Ye,gt,R)},z.values[P].apply(z.values,arguments)}});var Bs,qa=j("ObservableArrayAdministration",Ia);function _a(P){return M(P)&&qa(P[q])}var Cc,ap={},Dc=function(){function P(R,z,oe){if(z===void 0&&(z=Lt),oe===void 0&&(oe="ObservableMap@"+g()),this.enhancer=z,this.name=oe,this[Bs]=ap,this._keysAtom=G(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(R)}return P.prototype._has=function(R){return this._data.has(R)},P.prototype.has=function(R){var z=this;if(!Rn.trackingDerivation)return this._has(R);var oe=this._hasMap.get(R);if(!oe){var Ee=oe=new jr(this._has(R),An,this.name+"."+L(R)+"?",!1);this._hasMap.set(R,Ee),zr(Ee,function(){return z._hasMap.delete(R)})}return oe.get()},P.prototype.set=function(R,z){var oe=this._has(R);if(ea(this)){var Ee=Nr(this,{type:oe?"update":"add",object:this,newValue:z,name:R});if(!Ee)return this;z=Ee.newValue}return oe?this._updateValue(R,z):this._addValue(R,z),this},P.prototype.delete=function(R){var z=this;if($n(this._keysAtom),ea(this)&&!(Ee=Nr(this,{type:"delete",object:this,name:R})))return!1;if(this._has(R)){var oe=Wi(this),Ee=oe?{type:"delete",object:this,oldValue:this._data.get(R).value,name:R}:null;return ui(function(){z._keysAtom.reportChanged(),z._updateHasMapEntry(R,!1),z._data.get(R).setNewValue(void 0),z._data.delete(R)}),oe&&yi(this,Ee),!0}return!1},P.prototype._updateHasMapEntry=function(R,z){var oe=this._hasMap.get(R);oe&&oe.setNewValue(z)},P.prototype._updateValue=function(R,z){var oe=this._data.get(R);if((z=oe.prepareNewValue(z))!==Rn.UNCHANGED){var Ee=Wi(this),Ye=Ee?{type:"update",object:this,oldValue:oe.value,name:R,newValue:z}:null;oe.setNewValue(z),Ee&&yi(this,Ye)}},P.prototype._addValue=function(R,z){var oe=this;$n(this._keysAtom),ui(function(){var gt=new jr(z,oe.enhancer,oe.name+"."+L(R),!1);oe._data.set(R,gt),z=gt.value,oe._updateHasMapEntry(R,!0),oe._keysAtom.reportChanged()});var Ee=Wi(this),Ye=Ee?{type:"add",object:this,name:R,newValue:z}:null;Ee&&yi(this,Ye)},P.prototype.get=function(R){return this.has(R)?this.dehanceValue(this._data.get(R).get()):this.dehanceValue(void 0)},P.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},P.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},P.prototype.values=function(){var R=this,z=this.keys();return Cr({next:function(){var oe=z.next(),Ee=oe.done,Ye=oe.value;return{done:Ee,value:Ee?void 0:R.get(Ye)}}})},P.prototype.entries=function(){var R=this,z=this.keys();return Cr({next:function(){var oe=z.next(),Ee=oe.done,Ye=oe.value;return{done:Ee,value:Ee?void 0:[Ye,R.get(Ye)]}}})},P.prototype[Bs=q,Symbol.iterator]=function(){return this.entries()},P.prototype.forEach=function(R,z){var oe,Ee;try{for(var Ye=se(this),gt=Ye.next();!gt.done;gt=Ye.next()){var zt=ce(gt.value,2),En=zt[0],wr=zt[1];R.call(z,wr,En,this)}}catch(dn){oe={error:dn}}finally{try{gt&&!gt.done&&(Ee=Ye.return)&&Ee.call(Ye)}finally{if(oe)throw oe.error}}},P.prototype.merge=function(R){var z=this;return Ko(R)&&(R=R.toJS()),ui(function(){var oe=lr(!0);try{x(R)?U(R).forEach(function(Ee){return z.set(Ee,R[Ee])}):Array.isArray(R)?R.forEach(function(Ee){var Ye=ce(Ee,2),gt=Ye[0],zt=Ye[1];return z.set(gt,zt)}):D(R)?(R.constructor!==Map&&b("Cannot initialize from classes that inherit from Map: "+R.constructor.name),R.forEach(function(Ee,Ye){return z.set(Ye,Ee)})):R!=null&&b("Cannot initialize map from "+R)}finally{to(oe)}}),this},P.prototype.clear=function(){var R=this;ui(function(){Ke(function(){var z,oe;try{for(var Ee=se(R.keys()),Ye=Ee.next();!Ye.done;Ye=Ee.next()){var gt=Ye.value;R.delete(gt)}}catch(zt){z={error:zt}}finally{try{Ye&&!Ye.done&&(oe=Ee.return)&&oe.call(Ee)}finally{if(z)throw z.error}}})})},P.prototype.replace=function(R){var z=this;return ui(function(){var oe,Ee,Ye,gt,zt=function(ri){if(D(ri)||Ko(ri))return ri;if(Array.isArray(ri))return new Map(ri);if(x(ri)){var Ul=new Map;for(var wl in ri)Ul.set(wl,ri[wl]);return Ul}return b("Cannot convert to map from '"+ri+"'")}(R),En=new Map,wr=!1;try{for(var dn=se(z._data.keys()),Hr=dn.next();!Hr.done;Hr=dn.next()){var mr=Hr.value;if(!zt.has(mr))if(z.delete(mr))wr=!0;else{var Lr=z._data.get(mr);En.set(mr,Lr)}}}catch(ri){oe={error:ri}}finally{try{Hr&&!Hr.done&&(Ee=dn.return)&&Ee.call(dn)}finally{if(oe)throw oe.error}}try{for(var ca=se(zt.entries()),Ao=ca.next();!Ao.done;Ao=ca.next()){var na=ce(Ao.value,2),bl=(mr=na[0],Lr=na[1],z._data.has(mr));if(z.set(mr,Lr),z._data.has(mr)){var _l=z._data.get(mr);En.set(mr,_l),bl||(wr=!0)}}}catch(ri){Ye={error:ri}}finally{try{Ao&&!Ao.done&&(gt=ca.return)&&gt.call(ca)}finally{if(Ye)throw Ye.error}}if(!wr)if(z._data.size!==En.size)z._keysAtom.reportChanged();else for(var Fl=z._data.keys(),fs=En.keys(),Ka=Fl.next(),ds=fs.next();!Ka.done;){if(Ka.value!==ds.value){z._keysAtom.reportChanged();break}Ka=Fl.next(),ds=fs.next()}z._data=En}),this},Object.defineProperty(P.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.toPOJO=function(){var R,z,oe={};try{for(var Ee=se(this),Ye=Ee.next();!Ye.done;Ye=Ee.next()){var gt=ce(Ye.value,2),zt=gt[0],En=gt[1];oe[typeof zt=="symbol"?zt:L(zt)]=En}}catch(wr){R={error:wr}}finally{try{Ye&&!Ye.done&&(z=Ee.return)&&z.call(Ee)}finally{if(R)throw R.error}}return oe},P.prototype.toJS=function(){return new Map(this)},P.prototype.toJSON=function(){return this.toPOJO()},P.prototype.toString=function(){var R=this;return this.name+"[{ "+Array.from(this.keys()).map(function(z){return L(z)+": "+R.get(z)}).join(", ")+" }]"},P.prototype.observe=function(R,z){return ja(this,R)},P.prototype.intercept=function(R){return ba(this,R)},P}(),Ko=j("ObservableMap",Dc),Ws={},Ya=function(){function P(R,z,oe){if(z===void 0&&(z=Lt),oe===void 0&&(oe="ObservableSet@"+g()),this.name=oe,this[Cc]=Ws,this._data=new Set,this._atom=G(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(Ee,Ye){return z(Ee,Ye,oe)},R&&this.replace(R)}return P.prototype.dehanceValue=function(R){return this.dehancer!==void 0?this.dehancer(R):R},P.prototype.clear=function(){var R=this;ui(function(){Ke(function(){var z,oe;try{for(var Ee=se(R._data.values()),Ye=Ee.next();!Ye.done;Ye=Ee.next()){var gt=Ye.value;R.delete(gt)}}catch(zt){z={error:zt}}finally{try{Ye&&!Ye.done&&(oe=Ee.return)&&oe.call(Ee)}finally{if(z)throw z.error}}})})},P.prototype.forEach=function(R,z){var oe,Ee;try{for(var Ye=se(this),gt=Ye.next();!gt.done;gt=Ye.next()){var zt=gt.value;R.call(z,zt,zt,this)}}catch(En){oe={error:En}}finally{try{gt&&!gt.done&&(Ee=Ye.return)&&Ee.call(Ye)}finally{if(oe)throw oe.error}}},Object.defineProperty(P.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.add=function(R){var z=this;if($n(this._atom),ea(this)&&!(Ee=Nr(this,{type:"add",object:this,newValue:R})))return this;if(!this.has(R)){ui(function(){z._data.add(z.enhancer(R,void 0)),z._atom.reportChanged()});var oe=Wi(this),Ee=oe?{type:"add",object:this,newValue:R}:null;oe&&yi(this,Ee)}return this},P.prototype.delete=function(R){var z=this;if(ea(this)&&!(Ee=Nr(this,{type:"delete",object:this,oldValue:R})))return!1;if(this.has(R)){var oe=Wi(this),Ee=oe?{type:"delete",object:this,oldValue:R}:null;return ui(function(){z._atom.reportChanged(),z._data.delete(R)}),oe&&yi(this,Ee),!0}return!1},P.prototype.has=function(R){return this._atom.reportObserved(),this._data.has(this.dehanceValue(R))},P.prototype.entries=function(){var R=0,z=Array.from(this.keys()),oe=Array.from(this.values());return Cr({next:function(){var Ee=R;return R+=1,Ee<oe.length?{value:[z[Ee],oe[Ee]],done:!1}:{done:!0}}})},P.prototype.keys=function(){return this.values()},P.prototype.values=function(){this._atom.reportObserved();var R=this,z=0,oe=Array.from(this._data.values());return Cr({next:function(){return z<oe.length?{value:R.dehanceValue(oe[z++]),done:!1}:{done:!0}}})},P.prototype.replace=function(R){var z=this;return ni(R)&&(R=R.toJS()),ui(function(){var oe=lr(!0);try{Array.isArray(R)||V(R)?(z.clear(),R.forEach(function(Ee){return z.add(Ee)})):R!=null&&b("Cannot initialize set from "+R)}finally{to(oe)}}),this},P.prototype.observe=function(R,z){return ja(this,R)},P.prototype.intercept=function(R){return ba(this,R)},P.prototype.toJS=function(){return new Set(this)},P.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},P.prototype[Cc=q,Symbol.iterator]=function(){return this.values()},P}(),ni=j("ObservableSet",Ya),jc=function(){function P(R,z,oe,Ee){z===void 0&&(z=new Map),this.target=R,this.values=z,this.name=oe,this.defaultEnhancer=Ee,this.keysAtom=new H(oe+".keys")}return P.prototype.read=function(R){return this.values.get(R).get()},P.prototype.write=function(R,z){var oe=this.target,Ee=this.values.get(R);if(Ee instanceof Ha)Ee.set(z);else{if(ea(this)){if(!(gt=Nr(this,{type:"update",object:this.proxy||oe,name:R,newValue:z})))return;z=gt.newValue}if((z=Ee.prepareNewValue(z))!==Rn.UNCHANGED){var Ye=Wi(this),gt=Ye?{type:"update",object:this.proxy||oe,oldValue:Ee.value,name:R,newValue:z}:null;Ee.setNewValue(z),Ye&&yi(this,gt)}}},P.prototype.has=function(R){var z=this.pendingKeys||(this.pendingKeys=new Map),oe=z.get(R);if(oe)return oe.get();var Ee=!!this.values.get(R);return oe=new jr(Ee,An,this.name+"."+L(R)+"?",!1),z.set(R,oe),oe.get()},P.prototype.addObservableProp=function(R,z,oe){oe===void 0&&(oe=this.defaultEnhancer);var Ee=this.target;if(ea(this)){var Ye=Nr(this,{object:this.proxy||Ee,name:R,type:"add",newValue:z});if(!Ye)return;z=Ye.newValue}var gt=new jr(z,oe,this.name+"."+L(R),!1);this.values.set(R,gt),z=gt.value,Object.defineProperty(Ee,R,function(zt){return wa[zt]||(wa[zt]={configurable:!0,enumerable:!0,get:function(){return this[q].read(zt)},set:function(En){this[q].write(zt,En)}})}(R)),this.notifyPropertyAddition(R,z)},P.prototype.addComputedProp=function(R,z,oe){var Ee,Ye,gt,zt=this.target;oe.name=oe.name||this.name+"."+L(z),this.values.set(z,new Ha(oe)),(R===zt||(Ee=R,Ye=z,!(gt=Object.getOwnPropertyDescriptor(Ee,Ye))||gt.configurable!==!1&&gt.writable!==!1))&&Object.defineProperty(R,z,function(En){return Fu[En]||(Fu[En]={configurable:Rn.computedConfigurable,enumerable:!1,get:function(){return Gi(this).read(En)},set:function(wr){Gi(this).write(En,wr)}})}(z))},P.prototype.remove=function(R){if(this.values.has(R)){var z=this.target;if(ea(this)&&!(En=Nr(this,{object:this.proxy||z,name:R,type:"remove"})))return;try{Ji();var oe=Wi(this),Ee=!1,Ye=this.values.get(R),gt=Ye&&Ye.get();if(Ye&&Ye.set(void 0),this.keysAtom.reportChanged(),this.values.delete(R),this.pendingKeys){var zt=this.pendingKeys.get(R);zt&&zt.set(!1)}delete this.target[R];var En=oe?{type:"remove",object:this.proxy||z,oldValue:gt,name:R}:null;oe&&yi(this,En)}finally{la()}}},P.prototype.illegalAccess=function(R,z){},P.prototype.observe=function(R,z){return ja(this,R)},P.prototype.intercept=function(R){return ba(this,R)},P.prototype.notifyPropertyAddition=function(R,z){var oe=Wi(this),Ee=oe?{type:"add",object:this.proxy||this.target,name:R,newValue:z}:null;if(oe&&yi(this,Ee),this.pendingKeys){var Ye=this.pendingKeys.get(R);Ye&&Ye.set(!0)}this.keysAtom.reportChanged()},P.prototype.getKeys=function(){var R,z;this.keysAtom.reportObserved();var oe=[];try{for(var Ee=se(this.values),Ye=Ee.next();!Ye.done;Ye=Ee.next()){var gt=ce(Ye.value,2),zt=gt[0];gt[1]instanceof jr&&oe.push(zt)}}catch(En){R={error:En}}finally{try{Ye&&!Ye.done&&(z=Ee.return)&&z.call(Ee)}finally{if(R)throw R.error}}return oe},P}();function sa(P,R,z){if(R===void 0&&(R=""),z===void 0&&(z=Lt),Object.prototype.hasOwnProperty.call(P,q))return P[q];x(P)||(R=(P.constructor.name||"ObservableObject")+"@"+g()),R||(R="ObservableObject@"+g());var oe=new jc(P,new Map,L(R),z);return E(P,q,oe),oe}var wa=Object.create(null),Fu=Object.create(null);function Gi(P){var R=P[q];return R||(Be(P),P[q])}var ta=j("ObservableObjectAdministration",jc);function ci(P){return!!M(P)&&(Be(P),ta(P[q]))}function ua(P,R){if(typeof P=="object"&&P!==null){if(_a(P))return R!==void 0&&b(!1),P[q].atom;if(ni(P))return P[q];if(Ko(P)){var z=P;return R===void 0?z._keysAtom:((oe=z._data.get(R)||z._hasMap.get(R))||b(!1),oe)}var oe;if(Be(P),R&&!P[q]&&P[R],ci(P))return R?((oe=P[q].values.get(R))||b(!1),oe):b(!1);if(B(P)||yl(P)||Vs(P))return P}else if(typeof P=="function"&&Vs(P[q]))return P[q];return b(!1)}function Ii(P,R){return P||b("Expecting some object"),R!==void 0?Ii(ua(P,R)):B(P)||yl(P)||Vs(P)||Ko(P)||ni(P)?P:(Be(P),P[q]?P[q]:void b(!1))}var dt=Object.prototype.toString;function Ft(P,R,z){return z===void 0&&(z=-1),Ut(P,R,z)}function Ut(P,R,z,oe,Ee){if(P===R)return P!==0||1/P==1/R;if(P==null||R==null)return!1;if(P!=P)return R!=R;var Ye=typeof P;if(Ye!=="function"&&Ye!=="object"&&typeof R!="object")return!1;var gt=dt.call(P);if(gt!==dt.call(R))return!1;switch(gt){case"[object RegExp]":case"[object String]":return""+P==""+R;case"[object Number]":return+P!=+P?+R!=+R:+P==0?1/+P==1/R:+P==+R;case"[object Date]":case"[object Boolean]":return+P==+R;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(P)===Symbol.valueOf.call(R);case"[object Map]":case"[object Set]":z>=0&&z++}P=mn(P),R=mn(R);var zt=gt==="[object Array]";if(!zt){if(typeof P!="object"||typeof R!="object")return!1;var En=P.constructor,wr=R.constructor;if(En!==wr&&!(typeof En=="function"&&En instanceof En&&typeof wr=="function"&&wr instanceof wr)&&"constructor"in P&&"constructor"in R)return!1}if(z===0)return!1;z<0&&(z=-1),Ee=Ee||[];for(var dn=(oe=oe||[]).length;dn--;)if(oe[dn]===P)return Ee[dn]===R;if(oe.push(P),Ee.push(R),zt){if((dn=P.length)!==R.length)return!1;for(;dn--;)if(!Ut(P[dn],R[dn],z-1,oe,Ee))return!1}else{var Hr=Object.keys(P),mr=void 0;if(dn=Hr.length,Object.keys(R).length!==dn)return!1;for(;dn--;)if(!fr(R,mr=Hr[dn])||!Ut(P[mr],R[mr],z-1,oe,Ee))return!1}return oe.pop(),Ee.pop(),!0}function mn(P){return _a(P)?P.slice():D(P)||Ko(P)||V(P)||ni(P)?Array.from(P.entries()):P}function fr(P,R){return Object.prototype.hasOwnProperty.call(P,R)}function Cr(P){return P[Symbol.iterator]=vo,P}function vo(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:xc,extras:{getDebugName:function(P,R){return(R!==void 0?ua(P,R):ci(P)||Ko(P)||ni(P)?Ii(P):ua(P)).name}},$mobx:q})}).call(this,r(163),r(68))},function(n,a,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,a,r){var s=r(41),c=r(100),v=r(80),f=r(58),g=r(116),b="Array Iterator",_=f.set,S=f.getterFor(b);n.exports=g(Array,"Array",function(A,M){_(this,{type:b,target:s(A),index:0,kind:M})},function(){var A=S(this),M=A.target,x=A.kind,E=A.index++;return!M||E>=M.length?(A.target=void 0,{value:void 0,done:!0}):x=="keys"?{value:E,done:!1}:x=="values"?{value:M[E],done:!1}:{value:[E,M[E]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var s=r(16),c=r(7),v=r(46),f=r(76),g=r(34),b=r(15),_=r(71),S=r(36),A=r(108),M=r(18),x=r(35),E=r(96),j=r(30),D=r(33),V=r(54),U=r(87),L=r(32),F=r(40),X=r(41),q=r(86),H=r(39),B=r(69),G=r(60),Z=r(77),Q=r(74),fe=r(139),se=r(112),ce=r(50),be=r(38),we=r(84),me=r(98),He=r(42),Je=r(89),yt=r(93),Be=r(72),Yt=r(90),Kt=r(28),Lt=r(140),An=r(141),Ve=r(78),xe=r(58),Ce=r(79).forEach,qe=yt("hidden"),_t="Symbol",ht=Kt("toPrimitive"),wt=xe.set,rn=xe.getterFor(_t),an=Object.prototype,Xt=c.Symbol,nt=Xt&&Xt.prototype,fn=c.TypeError,Ue=c.QObject,_n=v("JSON","stringify"),Jn=ce.f,ie=be.f,tr=fe.f,Rr=we.f,Gr=b([].push),co=Je("symbols"),$n=Je("op-symbols"),_o=Je("string-to-symbol-registry"),Me=Je("symbol-to-string-registry"),Ke=Je("wks"),Ie=!Ue||!Ue.prototype||!Ue.prototype.findChild,ut=S&&M(function(){return G(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a!=7})?function(Tn,Fn,Hn){var lr=Jn(an,Fn);lr&&delete an[Fn],ie(Tn,Fn,Hn),lr&&Tn!==an&&ie(an,Fn,lr)}:ie,nn=function(Tn,Fn){var Hn=co[Tn]=G(nt);return wt(Hn,{type:_t,tag:Tn,description:Fn}),S||(Hn.description=Fn),Hn},Zt=function(Tn,Fn,Hn){Tn===an&&Zt($n,Fn,Hn),L(Tn);var lr=q(Fn);return L(Hn),x(co,lr)?(Hn.enumerable?(x(Tn,qe)&&Tn[qe][lr]&&(Tn[qe][lr]=!1),Hn=G(Hn,{enumerable:B(0,!1)})):(x(Tn,qe)||ie(Tn,qe,B(1,{})),Tn[qe][lr]=!0),ut(Tn,lr,Hn)):ie(Tn,lr,Hn)},Nn=function(Tn,Fn){L(Tn);var Hn=X(Fn),lr=Z(Hn).concat(Yo(Hn));return Ce(lr,function(to){S&&!g(Or,Hn,to)||Zt(Tn,to,Hn[to])}),Tn},Or=function(Tn){var Fn=q(Tn),Hn=g(Rr,this,Fn);return!(this===an&&x(co,Fn)&&!x($n,Fn))&&(!(Hn||!x(this,Fn)||!x(co,Fn)||x(this,qe)&&this[qe][Fn])||Hn)},li=function(Tn,Fn){var Hn=X(Tn),lr=q(Fn);if(Hn!==an||!x(co,lr)||x($n,lr)){var to=Jn(Hn,lr);return!to||!x(co,lr)||x(Hn,qe)&&Hn[qe][lr]||(to.enumerable=!0),to}},Si=function(Tn){var Fn=tr(X(Tn)),Hn=[];return Ce(Fn,function(lr){x(co,lr)||x(Be,lr)||Gr(Hn,lr)}),Hn},Yo=function(Tn){var Fn=Tn===an,Hn=tr(Fn?$n:X(Tn)),lr=[];return Ce(Hn,function(to){!x(co,to)||Fn&&!x(an,to)||Gr(lr,co[to])}),lr};if(A||(Xt=function(){if(V(nt,this))throw fn("Symbol is not a constructor");var Tn=arguments.length&&arguments[0]!==void 0?H(arguments[0]):void 0,Fn=Yt(Tn),Hn=function(lr){this===an&&g(Hn,$n,lr),x(this,qe)&&x(this[qe],Fn)&&(this[qe][Fn]=!1),ut(this,Fn,B(1,lr))};return S&&Ie&&ut(an,Fn,{configurable:!0,set:Hn}),nn(Fn,Tn)},He(nt=Xt.prototype,"toString",function(){return rn(this).tag}),He(Xt,"withoutSetter",function(Tn){return nn(Yt(Tn),Tn)}),we.f=Or,be.f=Zt,ce.f=li,Q.f=fe.f=Si,se.f=Yo,Lt.f=function(Tn){return nn(Kt(Tn),Tn)},S&&(ie(nt,"description",{configurable:!0,get:function(){return rn(this).description}}),_||He(an,"propertyIsEnumerable",Or,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Xt}),Ce(Z(Ke),function(Tn){An(Tn)}),s({target:_t,stat:!0,forced:!A},{for:function(Tn){var Fn=H(Tn);if(x(_o,Fn))return _o[Fn];var Hn=Xt(Fn);return _o[Fn]=Hn,Me[Hn]=Fn,Hn},keyFor:function(Tn){if(!U(Tn))throw fn(Tn+" is not a symbol");if(x(Me,Tn))return Me[Tn]},useSetter:function(){Ie=!0},useSimple:function(){Ie=!1}}),s({target:"Object",stat:!0,forced:!A,sham:!S},{create:function(Tn,Fn){return Fn===void 0?G(Tn):Nn(G(Tn),Fn)},defineProperty:Zt,defineProperties:Nn,getOwnPropertyDescriptor:li}),s({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:Si,getOwnPropertySymbols:Yo}),s({target:"Object",stat:!0,forced:M(function(){se.f(1)})},{getOwnPropertySymbols:function(Tn){return se.f(F(Tn))}}),_n&&s({target:"JSON",stat:!0,forced:!A||M(function(){var Tn=Xt();return _n([Tn])!="[null]"||_n({a:Tn})!="{}"||_n(Object(Tn))!="{}"})},{stringify:function(Tn,Fn,Hn){var lr=me(arguments),to=Fn;if((D(Fn)||Tn!==void 0)&&!U(Tn))return E(Fn)||(Fn=function(jr,ml){if(j(to)&&(ml=g(to,this,jr,ml)),!U(ml))return ml}),lr[1]=Fn,f(_n,null,lr)}}),!nt[ht]){var ti=nt.valueOf;He(nt,ht,function(Tn){return g(ti,this)})}Ve(Xt,_t),Be[qe]=!0},function(n,a,r){var s=r(7),c=r(152),v=r(153),f=r(3),g=r(57),b=r(28),_=b("iterator"),S=b("toStringTag"),A=f.values,M=function(E,j){if(E){if(E[_]!==A)try{g(E,_,A)}catch{E[_]=A}if(E[S]||g(E,S,j),c[j]){for(var D in f)if(E[D]!==f[D])try{g(E,D,f[D])}catch{E[D]=f[D]}}}};for(var x in c)M(s[x]&&s[x].prototype,x);M(v,"DOMTokenList")},function(n,a,r){var s=r(151).charAt,c=r(39),v=r(58),f=r(116),g="String Iterator",b=v.set,_=v.getterFor(g);f(String,"String",function(S){b(this,{type:g,string:c(S),index:0})},function(){var S,A=_(this),M=A.string,x=A.index;return x>=M.length?{value:void 0,done:!0}:(S=s(M,x),A.index+=S.length,{value:S,done:!1})})},function(n,a,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var s=r(16),c=r(36),v=r(7),f=r(15),g=r(35),b=r(30),_=r(54),S=r(39),A=r(38).f,M=r(134),x=v.Symbol,E=x&&x.prototype;if(c&&b(x)&&(!("description"in E)||x().description!==void 0)){var j={},D=function(){var H=arguments.length<1||arguments[0]===void 0?void 0:S(arguments[0]),B=_(E,this)?new x(H):H===void 0?x():x(H);return H===""&&(j[B]=!0),B};M(D,x),D.prototype=E,E.constructor=D;var V=String(x("test"))=="Symbol(test)",U=f(E.toString),L=f(E.valueOf),F=/^Symbol\((.*)\)[^)]+$/,X=f("".replace),q=f("".slice);A(E,"description",{configurable:!0,get:function(){var H=L(this),B=U(H);if(g(j,H))return"";var G=V?q(B,7,-1):X(B,F,"$1");return G===""?void 0:G}}),s({global:!0,forced:!0},{Symbol:D})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return f.a}),r.d(a,"c",function(){return f.e}),r.d(a,"h",function(){return F}),r.d(a,"i",function(){return V}),r.d(a,"j",function(){return j}),r.d(a,"b",function(){return ce}),r.d(a,"e",function(){return He}),r.d(a,"f",function(){return be}),r.d(a,"g",function(){return co});var s,c,v,f=r(0),g=0,b=[],_=f.i.__b,S=f.i.__r,A=f.i.diffed,M=f.i.__c,x=f.i.unmount;function E(Me,Ke){f.i.__h&&f.i.__h(c,Me,g||Ke),g=0;var Ie=c.__H||(c.__H={__:[],__h:[]});return Me>=Ie.__.length&&Ie.__.push({}),Ie.__[Me]}function j(Me){return g=1,D(Q,Me)}function D(Me,Ke,Ie){var ut=E(s++,2);return ut.t=Me,ut.__c||(ut.__=[Ie?Ie(Ke):Q(void 0,Ke),function(nn){var Zt=ut.t(ut.__[0],nn);ut.__[0]!==Zt&&(ut.__=[Zt,ut.__[1]],ut.__c.setState({}))}],ut.__c=c),ut.__}function V(Me,Ke){var Ie=E(s++,3);!f.i.__s&&Z(Ie.__H,Ke)&&(Ie.__=Me,Ie.__H=Ke,c.__H.__h.push(Ie))}function U(Me,Ke){var Ie=E(s++,4);!f.i.__s&&Z(Ie.__H,Ke)&&(Ie.__=Me,Ie.__H=Ke,c.__h.push(Ie))}function L(Me,Ke){var Ie=E(s++,7);return Z(Ie.__H,Ke)&&(Ie.__=Me(),Ie.__H=Ke,Ie.__h=Me),Ie.__}function F(Me,Ke){return g=8,L(function(){return Me},Ke)}function X(){var Me;for(b.sort(function(Ke,Ie){return Ke.__v.__b-Ie.__v.__b});Me=b.pop();)if(Me.__P)try{Me.__H.__h.forEach(B),Me.__H.__h.forEach(G),Me.__H.__h=[]}catch(Ke){Me.__H.__h=[],f.i.__e(Ke,Me.__v)}}f.i.__b=function(Me){c=null,_&&_(Me)},f.i.__r=function(Me){S&&S(Me),s=0;var Ke=(c=Me.__c).__H;Ke&&(Ke.__h.forEach(B),Ke.__h.forEach(G),Ke.__h=[])},f.i.diffed=function(Me){A&&A(Me);var Ke=Me.__c;Ke&&Ke.__H&&Ke.__H.__h.length&&(b.push(Ke)!==1&&v===f.i.requestAnimationFrame||((v=f.i.requestAnimationFrame)||H)(X)),c=null},f.i.__c=function(Me,Ke){Ke.some(function(Ie){try{Ie.__h.forEach(B),Ie.__h=Ie.__h.filter(function(ut){return!ut.__||G(ut)})}catch(ut){Ke.some(function(nn){nn.__h&&(nn.__h=[])}),Ke=[],f.i.__e(ut,Ie.__v)}}),M&&M(Me,Ke)},f.i.unmount=function(Me){x&&x(Me);var Ke,Ie=Me.__c;Ie&&Ie.__H&&(Ie.__H.__.forEach(function(ut){try{B(ut)}catch(nn){Ke=nn}}),Ke&&f.i.__e(Ke,Ie.__v))};var q=typeof requestAnimationFrame=="function";function H(Me){var Ke,Ie=function(){clearTimeout(ut),q&&cancelAnimationFrame(Ke),setTimeout(Me)},ut=setTimeout(Ie,100);q&&(Ke=requestAnimationFrame(Ie))}function B(Me){var Ke=c,Ie=Me.__c;typeof Ie=="function"&&(Me.__c=void 0,Ie()),c=Ke}function G(Me){var Ke=c;Me.__c=Me.__(),c=Ke}function Z(Me,Ke){return!Me||Me.length!==Ke.length||Ke.some(function(Ie,ut){return Ie!==Me[ut]})}function Q(Me,Ke){return typeof Ke=="function"?Ke(Me):Ke}function fe(Me,Ke){for(var Ie in Ke)Me[Ie]=Ke[Ie];return Me}function se(Me,Ke){for(var Ie in Me)if(Ie!=="__source"&&!(Ie in Ke))return!0;for(var ut in Ke)if(ut!=="__source"&&Me[ut]!==Ke[ut])return!0;return!1}function ce(Me){this.props=Me}function be(Me,Ke){function Ie(nn){var Zt=this.props.ref,Nn=Zt==nn.ref;return!Nn&&Zt&&(Zt.call?Zt(null):Zt.current=null),Ke?!Ke(this.props,nn)||!Nn:se(this.props,nn)}function ut(nn){return this.shouldComponentUpdate=Ie,Object(f.e)(Me,nn)}return ut.displayName="Memo("+(Me.displayName||Me.name)+")",ut.prototype.isReactComponent=!0,ut.__f=!0,ut}(ce.prototype=new f.a).isPureReactComponent=!0,ce.prototype.shouldComponentUpdate=function(Me,Ke){return se(this.props,Me)||se(this.state,Ke)};var we=f.i.__b;f.i.__b=function(Me){Me.type&&Me.type.__f&&Me.ref&&(Me.props.ref=Me.ref,Me.ref=null),we&&we(Me)};var me=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function He(Me){function Ke(Ie,ut){var nn=fe({},Ie);return delete nn.ref,Me(nn,!(ut=Ie.ref||ut)||typeof ut=="object"&&!("current"in ut)?null:ut)}return Ke.$$typeof=me,Ke.render=Ke,Ke.prototype.isReactComponent=Ke.__f=!0,Ke.displayName="ForwardRef("+(Me.displayName||Me.name)+")",Ke}var Je=function(Me,Ke){return Me==null?null:Object(f.k)(Object(f.k)(Me).map(Ke))},yt={map:Je,forEach:Je,count:function(Me){return Me?Object(f.k)(Me).length:0},only:function(Me){var Ke=Object(f.k)(Me);if(Ke.length!==1)throw"Children.only";return Ke[0]},toArray:f.k},Be=f.i.__e;f.i.__e=function(Me,Ke,Ie){if(Me.then){for(var ut,nn=Ke;nn=nn.__;)if((ut=nn.__c)&&ut.__c)return Ke.__e==null&&(Ke.__e=Ie.__e,Ke.__k=Ie.__k),ut.__c(Me,Ke)}Be(Me,Ke,Ie)};var Yt=f.i.unmount;function Kt(Me,Ke,Ie){return Me&&(Me.__c&&Me.__c.__H&&(Me.__c.__H.__.forEach(function(ut){typeof ut.__c=="function"&&ut.__c()}),Me.__c.__H=null),(Me=fe({},Me)).__c!=null&&(Me.__c.__P===Ie&&(Me.__c.__P=Ke),Me.__c=null),Me.__k=Me.__k&&Me.__k.map(function(ut){return Kt(ut,Ke,Ie)})),Me}function Lt(Me,Ke,Ie){return Me&&(Me.__v=null,Me.__k=Me.__k&&Me.__k.map(function(ut){return Lt(ut,Ke,Ie)}),Me.__c&&Me.__c.__P===Ke&&(Me.__e&&Ie.insertBefore(Me.__e,Me.__d),Me.__c.__e=!0,Me.__c.__P=Ie)),Me}function An(){this.__u=0,this.t=null,this.__b=null}function Ve(Me){var Ke=Me.__.__c;return Ke&&Ke.__e&&Ke.__e(Me)}function xe(){this.u=null,this.o=null}f.i.unmount=function(Me){var Ke=Me.__c;Ke&&Ke.__R&&Ke.__R(),Ke&&Me.__h===!0&&(Me.type=null),Yt&&Yt(Me)},(An.prototype=new f.a).__c=function(Me,Ke){var Ie=Ke.__c,ut=this;ut.t==null&&(ut.t=[]),ut.t.push(Ie);var nn=Ve(ut.__v),Zt=!1,Nn=function(){Zt||(Zt=!0,Ie.__R=null,nn?nn(Or):Or())};Ie.__R=Nn;var Or=function(){if(!--ut.__u){if(ut.state.__e){var Si=ut.state.__e;ut.__v.__k[0]=Lt(Si,Si.__c.__P,Si.__c.__O)}var Yo;for(ut.setState({__e:ut.__b=null});Yo=ut.t.pop();)Yo.forceUpdate()}},li=Ke.__h===!0;ut.__u++||li||ut.setState({__e:ut.__b=ut.__v.__k[0]}),Me.then(Nn,Nn)},An.prototype.componentWillUnmount=function(){this.t=[]},An.prototype.render=function(Me,Ke){if(this.__b){if(this.__v.__k){var Ie=document.createElement("div"),ut=this.__v.__k[0].__c;this.__v.__k[0]=Kt(this.__b,Ie,ut.__O=ut.__P)}this.__b=null}var nn=Ke.__e&&Object(f.e)(f.b,null,Me.fallback);return nn&&(nn.__h=null),[Object(f.e)(f.b,null,Ke.__e?null:Me.children),nn]};var Ce=function(Me,Ke,Ie){if(++Ie[1]===Ie[0]&&Me.o.delete(Ke),Me.props.revealOrder&&(Me.props.revealOrder[0]!=="t"||!Me.o.size))for(Ie=Me.u;Ie;){for(;Ie.length>3;)Ie.pop()();if(Ie[1]<Ie[0])break;Me.u=Ie=Ie[2]}};function qe(Me){return this.getChildContext=function(){return Me.context},Me.children}function _t(Me){var Ke=this,Ie=Me.i;Ke.componentWillUnmount=function(){Object(f.j)(null,Ke.l),Ke.l=null,Ke.i=null},Ke.i&&Ke.i!==Ie&&Ke.componentWillUnmount(),Me.__v?(Ke.l||(Ke.i=Ie,Ke.l={nodeType:1,parentNode:Ie,childNodes:[],appendChild:function(ut){this.childNodes.push(ut),Ke.i.appendChild(ut)},insertBefore:function(ut,nn){this.childNodes.push(ut),Ke.i.appendChild(ut)},removeChild:function(ut){this.childNodes.splice(this.childNodes.indexOf(ut)>>>1,1),Ke.i.removeChild(ut)}}),Object(f.j)(Object(f.e)(qe,{context:Ke.context},Me.__v),Ke.l)):Ke.l&&Ke.componentWillUnmount()}(xe.prototype=new f.a).__e=function(Me){var Ke=this,Ie=Ve(Ke.__v),ut=Ke.o.get(Me);return ut[0]++,function(nn){var Zt=function(){Ke.props.revealOrder?(ut.push(nn),Ce(Ke,Me,ut)):nn()};Ie?Ie(Zt):Zt()}},xe.prototype.render=function(Me){this.u=null,this.o=new Map;var Ke=Object(f.k)(Me.children);Me.revealOrder&&Me.revealOrder[0]==="b"&&Ke.reverse();for(var Ie=Ke.length;Ie--;)this.o.set(Ke[Ie],this.u=[1,0,this.u]);return Me.children},xe.prototype.componentDidUpdate=xe.prototype.componentDidMount=function(){var Me=this;this.o.forEach(function(Ke,Ie){Ce(Me,Ie,Ke)})};var ht=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,rn=typeof document<"u",an=function(Me){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Me)};f.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Me){Object.defineProperty(f.a.prototype,Me,{configurable:!0,get:function(){return this["UNSAFE_"+Me]},set:function(Ke){Object.defineProperty(this,Me,{configurable:!0,writable:!0,value:Ke})}})});var Xt=f.i.event;function nt(){}function fn(){return this.cancelBubble}function Ue(){return this.defaultPrevented}f.i.event=function(Me){return Xt&&(Me=Xt(Me)),Me.persist=nt,Me.isPropagationStopped=fn,Me.isDefaultPrevented=Ue,Me.nativeEvent=Me};var _n,Jn={configurable:!0,get:function(){return this.class}},ie=f.i.vnode;f.i.vnode=function(Me){var Ke=Me.type,Ie=Me.props,ut=Ie;if(typeof Ke=="string"){var nn=Ke.indexOf("-")===-1;for(var Zt in ut={},Ie){var Nn=Ie[Zt];rn&&Zt==="children"&&Ke==="noscript"||Zt==="value"&&"defaultValue"in Ie&&Nn==null||(Zt==="defaultValue"&&"value"in Ie&&Ie.value==null?Zt="value":Zt==="download"&&Nn===!0?Nn="":/ondoubleclick/i.test(Zt)?Zt="ondblclick":/^onchange(textarea|input)/i.test(Zt+Ke)&&!an(Ie.type)?Zt="oninput":/^onfocus$/i.test(Zt)?Zt="onfocusin":/^onblur$/i.test(Zt)?Zt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Zt)?Zt=Zt.toLowerCase():nn&&wt.test(Zt)?Zt=Zt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Nn===null&&(Nn=void 0),ut[Zt]=Nn)}Ke=="select"&&ut.multiple&&Array.isArray(ut.value)&&(ut.value=Object(f.k)(Ie.children).forEach(function(Or){Or.props.selected=ut.value.indexOf(Or.props.value)!=-1})),Ke=="select"&&ut.defaultValue!=null&&(ut.value=Object(f.k)(Ie.children).forEach(function(Or){Or.props.selected=ut.multiple?ut.defaultValue.indexOf(Or.props.value)!=-1:ut.defaultValue==Or.props.value})),Me.props=ut,Ie.class!=Ie.className&&(Jn.enumerable="className"in Ie,Ie.className!=null&&(ut.class=Ie.className),Object.defineProperty(ut,"className",Jn))}Me.$$typeof=ht,ie&&ie(Me)};var tr=f.i.__r;f.i.__r=function(Me){tr&&tr(Me),_n=Me.__c};var Rr={ReactCurrentDispatcher:{current:{readContext:function(Me){return _n.__n[Me.__c].props.value}}}};function Gr(Me){return!!Me&&Me.$$typeof===ht}var co=function(Me,Ke){return Me(Ke)},$n=f.b,_o={useState:j,useReducer:D,useEffect:V,useLayoutEffect:U,useRef:function(Me){return g=5,L(function(){return{current:Me}},[])},useImperativeHandle:function(Me,Ke,Ie){g=6,U(function(){typeof Me=="function"?Me(Ke()):Me&&(Me.current=Ke())},Ie==null?Ie:Ie.concat(Me))},useMemo:L,useCallback:F,useContext:function(Me){var Ke=c.context[Me.__c],Ie=E(s++,9);return Ie.c=Me,Ke?(Ie.__==null&&(Ie.__=!0,Ke.sub(c)),Ke.props.value):Me.__},useDebugValue:function(Me,Ke){f.i.useDebugValue&&f.i.useDebugValue(Ke?Ke(Me):Me)},version:"17.0.2",Children:yt,render:function(Me,Ke,Ie){return Ke.__k==null&&(Ke.textContent=""),Object(f.j)(Me,Ke),typeof Ie=="function"&&Ie(),Me?Me.__c:null},hydrate:function(Me,Ke,Ie){return Object(f.h)(Me,Ke),typeof Ie=="function"&&Ie(),Me?Me.__c:null},unmountComponentAtNode:function(Me){return!!Me.__k&&(Object(f.j)(null,Me),!0)},createPortal:function(Me,Ke){return Object(f.e)(_t,{__v:Me,i:Ke})},createElement:f.e,createContext:f.d,createFactory:function(Me){return f.e.bind(null,Me)},cloneElement:function(Me){return Gr(Me)?f.c.apply(null,arguments):Me},createRef:f.f,Fragment:f.b,isValidElement:Gr,findDOMNode:function(Me){return Me&&(Me.base||Me.nodeType===1&&Me)||null},Component:f.a,PureComponent:ce,memo:be,forwardRef:He,flushSync:function(Me,Ke){return Me(Ke)},unstable_batchedUpdates:co,StrictMode:$n,Suspense:An,SuspenseList:xe,lazy:function(Me){var Ke,Ie,ut;function nn(Zt){if(Ke||(Ke=Me()).then(function(Nn){Ie=Nn.default||Nn},function(Nn){ut=Nn}),ut)throw ut;if(!Ie)throw Ke;return Object(f.e)(Ie,Zt)}return nn.displayName="Lazy",nn.__f=!0,nn},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Rr};a.d=_o},function(n,a,r){var s=r(7),c=r(152),v=r(153),f=r(187),g=r(57),b=function(S){if(S&&S.forEach!==f)try{g(S,"forEach",f)}catch{S.forEach=f}};for(var _ in c)c[_]&&b(s[_]&&s[_].prototype);b(v)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var s=r(16),c=r(18),v=r(40),f=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){f(1)}),sham:!g},{getPrototypeOf:function(b){return f(v(b))}})},function(n,a,r){var s=r(16),c=r(46),v=r(76),f=r(203),g=r(165),b=r(32),_=r(33),S=r(60),A=r(18),M=c("Reflect","construct"),x=Object.prototype,E=[].push,j=A(function(){function U(){}return!(M(function(){},[],U)instanceof U)}),D=!A(function(){M(function(){})}),V=j||D;s({target:"Reflect",stat:!0,forced:V,sham:V},{construct:function(U,L){g(U),b(L);var F=arguments.length<3?U:g(arguments[2]);if(D&&!j)return M(U,L,F);if(U==F){switch(L.length){case 0:return new U;case 1:return new U(L[0]);case 2:return new U(L[0],L[1]);case 3:return new U(L[0],L[1],L[2]);case 4:return new U(L[0],L[1],L[2],L[3])}var X=[null];return v(E,X,L),new(v(f,U,X))}var q=F.prototype,H=S(_(q)?q:x),B=v(U,H,L);return _(B)?B:H}})},function(n,a){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(f){return f&&v(c,f)}:function(f){return f&&function(){return c.apply(f,arguments)}}},function(n,a,r){var s=r(7),c=r(50).f,v=r(57),f=r(42),g=r(110),b=r(134),_=r(95);n.exports=function(S,A){var M,x,E,j,D,V=S.target,U=S.global,L=S.stat;if(M=U?s:L?s[V]||g(V,{}):(s[V]||{}).prototype)for(x in A){if(j=A[x],E=S.noTargetGet?(D=c(M,x))&&D.value:M[x],!_(U?x:V+(L?".":"#")+x,S.forced)&&E!==void 0){if(typeof j==typeof E)continue;b(j,E)}(S.sham||E&&E.sham)&&v(j,"sham",!0),f(M,x,j,S)}}},function(n,a,r){var s=r(16),c=r(7),v=r(96),f=r(99),g=r(33),b=r(75),_=r(45),S=r(41),A=r(63),M=r(28),x=r(81),E=r(98),j=x("slice"),D=M("species"),V=c.Array,U=Math.max;s({target:"Array",proto:!0,forced:!j},{slice:function(L,F){var X,q,H,B=S(this),G=_(B),Z=b(L,G),Q=b(F===void 0?G:F,G);if(v(B)&&(X=B.constructor,(f(X)&&(X===V||v(X.prototype))||g(X)&&(X=X[D])===null)&&(X=void 0),X===V||X===void 0))return E(B,Z,Q);for(q=new(X===void 0?V:X)(U(Q-Z,0)),H=0;Z<Q;Z++,H++)Z in B&&A(q,H,B[Z]);return q.length=H,q}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(f){return v(c(f))}})},function(n,a,r){var s=r(36),c=r(73).EXISTS,v=r(15),f=r(38).f,g=Function.prototype,b=v(g.toString),_=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,S=v(_.exec);s&&!c&&f(g,"name",{configurable:!0,get:function(){try{return S(_,b(this))[1]}catch{return""}}})},function(n,a,r){var s=r(16),c=r(18),v=r(41),f=r(50).f,g=r(36),b=c(function(){f(1)});s({target:"Object",stat:!0,forced:!g||b,sham:!g},{getOwnPropertyDescriptor:function(_,S){return f(v(_),S)}})},function(n,a,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,a,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(16),c=r(36),v=r(135),f=r(41),g=r(50),b=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(_){for(var S,A,M=f(_),x=g.f,E=v(M),j={},D=0;E.length>D;)(A=x(M,S=E[D++]))!==void 0&&b(j,S,A);return j}})},,function(n,a,r){var s=r(16),c=r(7),v=r(18),f=r(96),g=r(33),b=r(40),_=r(45),S=r(63),A=r(115),M=r(81),x=r(28),E=r(70),j=x("isConcatSpreadable"),D=9007199254740991,V="Maximum allowed index exceeded",U=c.TypeError,L=E>=51||!v(function(){var q=[];return q[j]=!1,q.concat()[0]!==q}),F=M("concat"),X=function(q){if(!g(q))return!1;var H=q[j];return H!==void 0?!!H:f(q)};s({target:"Array",proto:!0,forced:!L||!F},{concat:function(q){var H,B,G,Z,Q,fe=b(this),se=A(fe,0),ce=0;for(H=-1,G=arguments.length;H<G;H++)if(X(Q=H===-1?fe:arguments[H])){if(ce+(Z=_(Q))>D)throw U(V);for(B=0;B<Z;B++,ce++)B in Q&&S(se,ce,Q[B])}else{if(ce>=D)throw U(V);S(se,ce++,Q)}return se.length=ce,se}})},function(n,a,r){var s=r(7),c=r(89),v=r(35),f=r(90),g=r(108),b=r(132),_=c("wks"),S=s.Symbol,A=S&&S.for,M=b?S:S&&S.withoutSetter||f;n.exports=function(x){if(!v(_,x)||!g&&typeof _[x]!="string"){var E="Symbol."+x;g&&v(S,x)?_[x]=S[x]:_[x]=b&&A?A(E):M(E)}return _[x]}},function(n,a,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();a.a=v},function(n,a,r){var s=r(7),c=r(33),v=s.String,f=s.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not an object")}},function(n,a,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(f,g){return v(c(f),g)}},function(n,a,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(7),c=r(36),v=r(133),f=r(32),g=r(86),b=s.TypeError,_=Object.defineProperty;a.f=c?_:function(S,A,M){if(f(S),A=g(A),f(M),v)try{return _(S,A,M)}catch{}if("get"in M||"set"in M)throw b("Accessors not supported");return"value"in M&&(S[A]=M.value),S}},function(n,a,r){var s=r(7),c=r(97),v=s.String;n.exports=function(f){if(c(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(f)}},function(n,a,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(f){return v(c(f))}},function(n,a,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,a,r){var s=r(7),c=r(30),v=r(35),f=r(57),g=r(110),b=r(92),_=r(58),S=r(73).CONFIGURABLE,A=_.get,M=_.enforce,x=String(String).split("String");(n.exports=function(E,j,D,V){var U,L=!!V&&!!V.unsafe,F=!!V&&!!V.enumerable,X=!!V&&!!V.noTargetGet,q=V&&V.name!==void 0?V.name:j;c(D)&&(String(q).slice(0,7)==="Symbol("&&(q="["+String(q).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(D,"name")||S&&D.name!==q)&&f(D,"name",q),(U=M(D)).source||(U.source=x.join(typeof q=="string"?q:""))),E!==s?(L?!X&&E[j]&&(F=!0):delete E[j],F?E[j]=D:f(E,j,D)):F?E[j]=D:g(j,D)})(Function.prototype,"toString",function(){return c(this)&&A(this).source||b(this)})},function(n,a,r){(function(s){r.d(a,"d",function(){return f}),r.d(a,"c",function(){return g}),r.d(a,"b",function(){return b}),r.d(a,"a",function(){return S});var c=r(10),v=function(A,M){var x=typeof Symbol=="function"&&A[Symbol.iterator];if(!x)return A;var E,j,D=x.call(A),V=[];try{for(;(M===void 0||M-- >0)&&!(E=D.next()).done;)V.push(E.value)}catch(U){j={error:U}}finally{try{E&&!E.done&&(x=D.return)&&x.call(D)}finally{if(j)throw j.error}}return V};function f(){var A=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){A(function(M){return M+1})},[])}function g(A){if(!A||typeof A!="object")return!1;var M=Object.getPrototypeOf(A);return!M||M===Object.prototype}function b(A){return typeof Symbol=="function"?Symbol.for(A):"__$mobx-react "+A+"__"}var _={};function S(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:_}}).call(this,r(68))},function(n,a,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,a,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,a,r){var s=r(7),c=r(30),v=function(f){return c(f)?f:void 0};n.exports=function(f,g){return arguments.length<2?v(s[f]):s[f]&&s[f][g]}},function(n,a,r){var s=r(16),c=r(34),v=r(33),f=r(32),g=r(204),b=r(50),_=r(101);s({target:"Reflect",stat:!0},{get:function S(A,M){var x,E,j=arguments.length<3?A:arguments[2];return f(A)===j?A[M]:(x=b.f(A,M))?g(x)?x.value:x.get===void 0?void 0:c(x.get,j):v(E=_(A))?S(E,M,j):void 0}})},function(n,a,r){(function(s){var c=r(31),v=r(171),f=t&&!t.nodeType&&t,g=f&&typeof s=="object"&&s&&!s.nodeType&&s,b=g&&g.exports===f?c.a.Buffer:void 0,_=(b?b.isBuffer:void 0)||v.a;a.a=_}).call(this,r(122)(n))},function(n,a,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,f=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=f&&f.exports===v&&c.a.process,b=function(){try{var _=f&&f.require&&f.require("util").types;return _||g&&g.binding&&g.binding("util")}catch{}}();a.a=b}).call(this,r(122)(n))},function(n,a,r){var s=r(36),c=r(34),v=r(84),f=r(69),g=r(41),b=r(86),_=r(35),S=r(133),A=Object.getOwnPropertyDescriptor;a.f=s?A:function(M,x){if(M=g(M),x=b(x),S)try{return A(M,x)}catch{}if(_(M,x))return f(!c(v.f,M,x),M[x])}},function(n,a,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(f){return v(c(f),8,-1)}},function(n,a,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,a,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,a,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,a,r){var s=r(7),c=r(30),v=r(88),f=s.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not a function")}},function(n,a,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(f,g,b){return c.f(f,g,v(1,b))}:function(f,g,b){return f[g]=b,f}},function(n,a,r){var s,c,v,f=r(175),g=r(7),b=r(15),_=r(33),S=r(57),A=r(35),M=r(109),x=r(93),E=r(72),j="Object already initialized",D=g.TypeError,V=g.WeakMap;if(f||M.state){var U=M.state||(M.state=new V),L=b(U.get),F=b(U.has),X=b(U.set);s=function(H,B){if(F(U,H))throw new D(j);return B.facade=H,X(U,H,B),B},c=function(H){return L(U,H)||{}},v=function(H){return F(U,H)}}else{var q=x("state");E[q]=!0,s=function(H,B){if(A(H,q))throw new D(j);return B.facade=H,S(H,q,B),B},c=function(H){return A(H,q)?H[q]:{}},v=function(H){return A(H,q)}}n.exports={set:s,get:c,has:v,enforce:function(H){return v(H)?c(H):s(H,{})},getterFor:function(H){return function(B){var G;if(!_(B)||(G=c(B)).type!==H)throw D("Incompatible receiver, "+H+" required");return G}}}},function(n,a){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,a,r){var s,c=r(32),v=r(176),f=r(111),g=r(72),b=r(138),_=r(91),S=r(93),A=S("IE_PROTO"),M=function(){},x=function(D){return"<script>"+D+"<\/script>"},E=function(D){D.write(x("")),D.close();var V=D.parentWindow.Object;return D=null,V},j=function(){try{s=new ActiveXObject("htmlfile")}catch{}var D,V;j=typeof document<"u"?document.domain&&s?E(s):((V=_("iframe")).style.display="none",b.appendChild(V),V.src="javascript:",(D=V.contentWindow.document).open(),D.write(x("document.F=Object")),D.close(),D.F):E(s);for(var U=f.length;U--;)delete j.prototype[f[U]];return j()};g[A]=!0,n.exports=Object.create||function(D,V){var U;return D!==null?(M.prototype=c(D),U=new M,M.prototype=null,U[A]=D):U=j(),V===void 0?U:v(U,V)}},function(n,a,r){var s=r(36),c=r(7),v=r(15),f=r(95),g=r(42),b=r(35),_=r(148),S=r(54),A=r(87),M=r(131),x=r(18),E=r(74).f,j=r(50).f,D=r(38).f,V=r(160),U=r(161).trim,L="Number",F=c.Number,X=F.prototype,q=c.TypeError,H=v("".slice),B=v("".charCodeAt),G=function(be){var we=M(be,"number");return typeof we=="bigint"?we:Z(we)},Z=function(be){var we,me,He,Je,yt,Be,Yt,Kt,Lt=M(be,"number");if(A(Lt))throw q("Cannot convert a Symbol value to a number");if(typeof Lt=="string"&&Lt.length>2){if(Lt=U(Lt),(we=B(Lt,0))===43||we===45){if((me=B(Lt,2))===88||me===120)return NaN}else if(we===48){switch(B(Lt,1)){case 66:case 98:He=2,Je=49;break;case 79:case 111:He=8,Je=55;break;default:return+Lt}for(Be=(yt=H(Lt,2)).length,Yt=0;Yt<Be;Yt++)if((Kt=B(yt,Yt))<48||Kt>Je)return NaN;return parseInt(yt,He)}}return+Lt};if(f(L,!F(" 0o1")||!F("0b1")||F("+0x1"))){for(var Q,fe=function(be){var we=arguments.length<1?0:F(G(be)),me=this;return S(X,me)&&x(function(){V(me)})?_(Object(we),me,fe):we},se=s?E(F):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ce=0;se.length>ce;ce++)b(F,Q=se[ce])&&!b(fe,Q)&&D(fe,Q,j(F,Q));fe.prototype=X,X.constructor=fe,g(c,L,fe)}},function(n,a,r){var s=r(56);n.exports=function(c,v){var f=c[v];return f==null?void 0:s(f)}},function(n,a,r){var s=r(86),c=r(38),v=r(69);n.exports=function(f,g,b){var _=s(g);_ in f?c.f(f,_,v(0,b)):f[_]=b}},function(n,a,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(f,g){return c(f),g===void 0?f:v?v(f,g):function(){return f.apply(g,arguments)}}},function(n,a,r){var s=r(16),c=r(15),v=r(85),f=r(41),g=r(121),b=c([].join),_=v!=Object,S=g("join",",");s({target:"Array",proto:!0,forced:_||!S},{join:function(A){return b(f(this),A===void 0?",":A)}})},function(n,a,r){var s=r(15),c=r(73).PROPER,v=r(42),f=r(32),g=r(54),b=r(39),_=r(18),S=r(154),A="toString",M=RegExp.prototype,x=M.toString,E=s(S),j=_(function(){return x.call({source:"a",flags:"b"})!="/a/b"}),D=c&&x.name!=A;(j||D)&&v(RegExp.prototype,A,function(){var V=f(this),U=b(V.source),L=V.flags;return"/"+U+"/"+b(L===void 0&&g(M,V)&&!("flags"in M)?E(V):L)},{unsafe:!0})},function(n,a,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,a,r){var s,c,v=r(7),f=r(55),g=v.process,b=v.Deno,_=g&&g.versions||b&&b.version,S=_&&_.v8;S&&(c=(s=S.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&f&&(!(s=f.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=f.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var s=r(36),c=r(35),v=Function.prototype,f=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),b=g&&(function(){}).name==="something",_=g&&(!s||s&&f(v,"name").configurable);n.exports={EXISTS:g,PROPER:b,CONFIGURABLE:_}},function(n,a,r){var s=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,a,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(f,g){var b=s(f);return b<0?c(b+g,0):v(b,g)}},function(n,a){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,a,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,a,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(f,g,b){f&&!c(f=b?f:f.prototype,v)&&s(f,v,{configurable:!0,value:g})}},function(n,a,r){var s=r(64),c=r(15),v=r(85),f=r(40),g=r(45),b=r(115),_=c([].push),S=function(A){var M=A==1,x=A==2,E=A==3,j=A==4,D=A==6,V=A==7,U=A==5||D;return function(L,F,X,q){for(var H,B,G=f(L),Z=v(G),Q=s(F,X),fe=g(Z),se=0,ce=q||b,be=M?ce(L,fe):x||V?ce(L,0):void 0;fe>se;se++)if((U||se in Z)&&(B=Q(H=Z[se],se,G),A))if(M)be[se]=B;else if(B)switch(A){case 3:return!0;case 5:return H;case 6:return se;case 2:_(be,H)}else switch(A){case 4:return!1;case 7:_(be,H)}return D?-1:E||j?j:be}};n.exports={forEach:S(0),map:S(1),filter:S(2),some:S(3),every:S(4),find:S(5),findIndex:S(6),filterReject:S(7)}},function(n,a){n.exports={}},function(n,a,r){var s=r(18),c=r(28),v=r(70),f=c("species");n.exports=function(g){return v>=51||!s(function(){var b=[];return(b.constructor={})[f]=function(){return{foo:1}},b[g](Boolean).foo!==1})}},function(n,a,r){var s=r(76),c=r(34),v=r(15),f=r(123),g=r(159),b=r(32),_=r(44),S=r(164),A=r(124),M=r(94),x=r(39),E=r(62),j=r(114),D=r(125),V=r(103),U=r(155),L=r(18),F=U.UNSUPPORTED_Y,X=4294967295,q=Math.min,H=[].push,B=v(/./.exec),G=v(H),Z=v("".slice),Q=!L(function(){var fe=/(?:)/,se=fe.exec;fe.exec=function(){return se.apply(this,arguments)};var ce="ab".split(fe);return ce.length!==2||ce[0]!=="a"||ce[1]!=="b"});f("split",function(fe,se,ce){var be;return be="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(we,me){var He=x(_(this)),Je=me===void 0?X:me>>>0;if(Je===0)return[];if(we===void 0)return[He];if(!g(we))return c(se,He,we,Je);for(var yt,Be,Yt,Kt=[],Lt=(we.ignoreCase?"i":"")+(we.multiline?"m":"")+(we.unicode?"u":"")+(we.sticky?"y":""),An=0,Ve=new RegExp(we.source,Lt+"g");(yt=c(V,Ve,He))&&!((Be=Ve.lastIndex)>An&&(G(Kt,Z(He,An,yt.index)),yt.length>1&&yt.index<He.length&&s(H,Kt,j(yt,1)),Yt=yt[0].length,An=Be,Kt.length>=Je));)Ve.lastIndex===yt.index&&Ve.lastIndex++;return An===He.length?!Yt&&B(Ve,"")||G(Kt,""):G(Kt,Z(He,An)),Kt.length>Je?j(Kt,0,Je):Kt}:"0".split(void 0,0).length?function(we,me){return we===void 0&&me===0?[]:c(se,this,we,me)}:se,[function(we,me){var He=_(this),Je=we==null?void 0:E(we,fe);return Je?c(Je,we,He,me):c(be,x(He),we,me)},function(we,me){var He=b(this),Je=x(we),yt=ce(be,He,Je,me,be!==se);if(yt.done)return yt.value;var Be=S(He,RegExp),Yt=He.unicode,Kt=(He.ignoreCase?"i":"")+(He.multiline?"m":"")+(He.unicode?"u":"")+(F?"g":"y"),Lt=new Be(F?"^(?:"+He.source+")":He,Kt),An=me===void 0?X:me>>>0;if(An===0)return[];if(Je.length===0)return D(Lt,Je)===null?[Je]:[];for(var Ve=0,xe=0,Ce=[];xe<Je.length;){Lt.lastIndex=F?0:xe;var qe,_t=D(Lt,F?Z(Je,xe):Je);if(_t===null||(qe=q(M(Lt.lastIndex+(F?xe:0)),Je.length))===Ve)xe=A(Je,xe,Yt);else{if(G(Ce,Z(Je,Ve,xe)),Ce.length===An)return Ce;for(var ht=1;ht<=_t.length-1;ht++)if(G(Ce,_t[ht]),Ce.length===An)return Ce;xe=Ve=qe}}return G(Ce,Z(Je,Ve)),Ce}]},!Q,F)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);a.f=v?function(f){var g=c(this,f);return!!g&&g.enumerable}:s},function(n,a,r){var s=r(7),c=r(15),v=r(18),f=r(51),g=s.Object,b=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(_){return f(_)=="String"?b(_,""):g(_)}:g},function(n,a,r){var s=r(131),c=r(87);n.exports=function(v){var f=s(v,"string");return c(f)?f:f+""}},function(n,a,r){var s=r(7),c=r(46),v=r(30),f=r(54),g=r(132),b=s.Object;n.exports=g?function(_){return typeof _=="symbol"}:function(_){var S=c("Symbol");return v(S)&&f(S.prototype,b(_))}},function(n,a,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,a,r){var s=r(71),c=r(109);(n.exports=function(v,f){return c[v]||(c[v]=f!==void 0?f:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var s=r(15),c=0,v=Math.random(),f=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+f(++c+v,36)}},function(n,a,r){var s=r(7),c=r(33),v=s.document,f=c(v)&&c(v.createElement);n.exports=function(g){return f?v.createElement(g):{}}},function(n,a,r){var s=r(15),c=r(30),v=r(109),f=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return f(g)}),n.exports=v.inspectSource},function(n,a,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(f){return v[f]||(v[f]=c(f))}},function(n,a,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,a,r){var s=r(18),c=r(30),v=/#|\.prototype\./,f=function(A,M){var x=b[g(A)];return x==S||x!=_&&(c(M)?s(M):!!M)},g=f.normalize=function(A){return String(A).replace(v,".").toLowerCase()},b=f.data={},_=f.NATIVE="N",S=f.POLYFILL="P";n.exports=f},function(n,a,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,a,r){var s=r(7),c=r(113),v=r(30),f=r(51),g=r(28)("toStringTag"),b=s.Object,_=f(function(){return arguments}())=="Arguments";n.exports=c?f:function(S){var A,M,x;return S===void 0?"Undefined":S===null?"Null":typeof(M=function(E,j){try{return E[j]}catch{}}(A=b(S),g))=="string"?M:_?f(A):(x=f(A))=="Object"&&v(A.callee)?"Arguments":x}},function(n,a,r){var s=r(15);n.exports=s([].slice)},function(n,a,r){var s=r(15),c=r(18),v=r(30),f=r(97),g=r(46),b=r(92),_=function(){},S=[],A=g("Reflect","construct"),M=/^\s*(?:class|function)\b/,x=s(M.exec),E=!M.exec(_),j=function(D){if(!v(D))return!1;try{return A(_,S,D),!0}catch{return!1}};n.exports=!A||c(function(){var D;return j(j.call)||!j(Object)||!j(function(){D=!0})||D})?function(D){if(!v(D))return!1;switch(f(D)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return E||!!x(M,b(D))}:j},function(n,a,r){var s=r(28),c=r(60),v=r(38),f=s("unscopables"),g=Array.prototype;g[f]==null&&v.f(g,f,{configurable:!0,value:c(null)}),n.exports=function(b){g[f][b]=!0}},function(n,a,r){var s=r(7),c=r(35),v=r(30),f=r(40),g=r(93),b=r(143),_=g("IE_PROTO"),S=s.Object,A=S.prototype;n.exports=b?S.getPrototypeOf:function(M){var x=f(M);if(c(x,_))return x[_];var E=x.constructor;return v(E)&&x instanceof E?E.prototype:x instanceof S?A:null}},function(n,a,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,g=!1,b={};try{(f=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(b,[]),g=b instanceof Array}catch{}return function(_,S){return c(_),v(S),g?f(_,S):_.__proto__=S,_}}():void 0)},function(n,a,r){var s,c,v=r(34),f=r(15),g=r(39),b=r(154),_=r(155),S=r(89),A=r(60),M=r(58).get,x=r(190),E=r(191),j=S("native-string-replace",String.prototype.replace),D=RegExp.prototype.exec,V=D,U=f("".charAt),L=f("".indexOf),F=f("".replace),X=f("".slice),q=(c=/b*/g,v(D,s=/a/,"a"),v(D,c,"a"),s.lastIndex!==0||c.lastIndex!==0),H=_.BROKEN_CARET,B=/()??/.exec("")[1]!==void 0;(q||B||H||x||E)&&(V=function(G){var Z,Q,fe,se,ce,be,we,me=this,He=M(me),Je=g(G),yt=He.raw;if(yt)return yt.lastIndex=me.lastIndex,Z=v(V,yt,Je),me.lastIndex=yt.lastIndex,Z;var Be=He.groups,Yt=H&&me.sticky,Kt=v(b,me),Lt=me.source,An=0,Ve=Je;if(Yt&&(Kt=F(Kt,"y",""),L(Kt,"g")===-1&&(Kt+="g"),Ve=X(Je,me.lastIndex),me.lastIndex>0&&(!me.multiline||me.multiline&&U(Je,me.lastIndex-1)!==`
`)&&(Lt="(?: "+Lt+")",Ve=" "+Ve,An++),Q=new RegExp("^(?:"+Lt+")",Kt)),B&&(Q=new RegExp("^"+Lt+"$(?!\\s)",Kt)),q&&(fe=me.lastIndex),se=v(D,Yt?Q:me,Ve),Yt?se?(se.input=X(se.input,An),se[0]=X(se[0],An),se.index=me.lastIndex,me.lastIndex+=se[0].length):me.lastIndex=0:q&&se&&(me.lastIndex=me.global?se.index+se[0].length:fe),B&&se&&se.length>1&&v(j,se[0],Q,function(){for(ce=1;ce<arguments.length-2;ce++)arguments[ce]===void 0&&(se[ce]=void 0)}),se&&Be)for(se.groups=be=A(null),ce=0;ce<Be.length;ce++)be[(we=Be[ce])[0]]=se[we[1]];return se}),n.exports=V},function(n,a,r){var s=r(16),c=r(7),v=r(75),f=r(59),g=r(45),b=r(40),_=r(115),S=r(63),A=r(81)("splice"),M=c.TypeError,x=Math.max,E=Math.min,j=9007199254740991,D="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!A},{splice:function(V,U){var L,F,X,q,H,B,G=b(this),Z=g(G),Q=v(V,Z),fe=arguments.length;if(fe===0?L=F=0:fe===1?(L=0,F=Z-Q):(L=fe-2,F=E(x(f(U),0),Z-Q)),Z+L-F>j)throw M(D);for(X=_(G,F),q=0;q<F;q++)(H=Q+q)in G&&S(X,q,G[H]);if(X.length=F,L<F){for(q=Q;q<Z-F;q++)B=q+L,(H=q+F)in G?G[B]=G[H]:delete G[B];for(q=Z;q>Z-F+L;q--)delete G[q-1]}else if(L>F)for(q=Z-F;q>Q;q--)B=q+L-1,(H=q+F-1)in G?G[B]=G[H]:delete G[B];for(q=0;q<L;q++)G[q+Q]=arguments[q+2];return G.length=Z-F+L,X}})},function(n,a,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,a,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;a.a=c}).call(this,r(68))},function(n,a,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,f=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=f&&f.exports===v?c.a.Buffer:void 0,b=g?g.allocUnsafe:void 0;a.a=function(_,S){if(S)return _.slice();var A=_.length,M=b?b(A):new _.constructor(A);return _.copy(M),M}}).call(this,r(122)(n))},function(n,a,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,a,r){var s=r(7),c=r(110),v="__core-js_shared__",f=s[v]||c(v,{});n.exports=f},function(n,a,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,f){try{c(s,v,{value:f,configurable:!0,writable:!0})}catch{s[v]=f}return f}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,a,r){var s=r(7),c=r(75),v=r(45),f=r(63),g=s.Array,b=Math.max;n.exports=function(_,S,A){for(var M=v(_),x=c(S,M),E=c(A===void 0?M:A,M),j=g(b(E-x,0)),D=0;x<E;x++,D++)f(j,D,_[x]);return j.length=D,j}},function(n,a,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,a,r){var s=r(16),c=r(34),v=r(71),f=r(73),g=r(30),b=r(180),_=r(101),S=r(102),A=r(78),M=r(57),x=r(42),E=r(28),j=r(80),D=r(142),V=f.PROPER,U=f.CONFIGURABLE,L=D.IteratorPrototype,F=D.BUGGY_SAFARI_ITERATORS,X=E("iterator"),q="keys",H="values",B="entries",G=function(){return this};n.exports=function(Z,Q,fe,se,ce,be,we){b(fe,Q,se);var me,He,Je,yt=function(xe){if(xe===ce&&An)return An;if(!F&&xe in Kt)return Kt[xe];switch(xe){case q:case H:case B:return function(){return new fe(this,xe)}}return function(){return new fe(this)}},Be=Q+" Iterator",Yt=!1,Kt=Z.prototype,Lt=Kt[X]||Kt["@@iterator"]||ce&&Kt[ce],An=!F&&Lt||yt(ce),Ve=Q=="Array"&&Kt.entries||Lt;if(Ve&&(me=_(Ve.call(new Z)))!==Object.prototype&&me.next&&(v||_(me)===L||(S?S(me,L):g(me[X])||x(me,X,G)),A(me,Be,!0,!0),v&&(j[Be]=G)),V&&ce==H&&Lt&&Lt.name!==H&&(!v&&U?M(Kt,"name",H):(Yt=!0,An=function(){return c(Lt,this)})),ce)if(He={values:yt(H),keys:be?An:yt(q),entries:yt(B)},we)for(Je in He)(F||Yt||!(Je in Kt))&&x(Kt,Je,He[Je]);else s({target:Q,proto:!0,forced:F||Yt},He);return v&&!we||Kt[X]===An||x(Kt,X,An,{name:ce}),j[Q]=An,He}},function(n,a,r){var s=r(7),c=r(64),v=r(34),f=r(32),g=r(88),b=r(145),_=r(45),S=r(54),A=r(146),M=r(118),x=r(147),E=s.TypeError,j=function(V,U){this.stopped=V,this.result=U},D=j.prototype;n.exports=function(V,U,L){var F,X,q,H,B,G,Z,Q=L&&L.that,fe=!(!L||!L.AS_ENTRIES),se=!(!L||!L.IS_ITERATOR),ce=!(!L||!L.INTERRUPTED),be=c(U,Q),we=function(He){return F&&x(F,"normal",He),new j(!0,He)},me=function(He){return fe?(f(He),ce?be(He[0],He[1],we):be(He[0],He[1])):ce?be(He,we):be(He)};if(se)F=V;else{if(!(X=M(V)))throw E(g(V)+" is not iterable");if(b(X)){for(q=0,H=_(V);H>q;q++)if((B=me(V[q]))&&S(D,B))return B;return new j(!1)}F=A(V,X)}for(G=F.next;!(Z=v(G,F)).done;){try{B=me(Z.value)}catch(He){x(F,"throw",He)}if(typeof B=="object"&&B&&S(D,B))return B}return new j(!1)}},function(n,a,r){var s=r(97),c=r(62),v=r(80),f=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,f)||c(g,"@@iterator")||v[s(g)]}},function(n,a,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(f,g){if(c(g,f))return f;throw v("Incorrect invocation")}},function(n,a,r){var s=r(28)("iterator"),c=!1;try{var v=0,f={next:function(){return{done:!!v++}},return:function(){c=!0}};f[s]=function(){return this},Array.from(f,function(){throw 2})}catch{}n.exports=function(g,b){if(!b&&!c)return!1;var _=!1;try{var S={};S[s]=function(){return{next:function(){return{done:_=!0}}}},g(S)}catch{}return _}},function(n,a,r){var s=r(18);n.exports=function(c,v){var f=[][c];return!!f&&s(function(){f.call(null,v||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,a,r){r(19);var s=r(15),c=r(42),v=r(103),f=r(18),g=r(28),b=r(57),_=g("species"),S=RegExp.prototype;n.exports=function(A,M,x,E){var j=g(A),D=!f(function(){var F={};return F[j]=function(){return 7},""[A](F)!=7}),V=D&&!f(function(){var F=!1,X=/a/;return A==="split"&&((X={}).constructor={},X.constructor[_]=function(){return X},X.flags="",X[j]=/./[j]),X.exec=function(){return F=!0,null},X[j](""),!F});if(!D||!V||x){var U=s(/./[j]),L=M(j,""[A],function(F,X,q,H,B){var G=s(F),Z=X.exec;return Z===v||Z===S.exec?D&&!B?{done:!0,value:U(X,q,H)}:{done:!0,value:G(q,X,H)}:{done:!1}});c(String.prototype,A,L[0]),c(S,j,L[1])}E&&b(S[j],"sham",!0)}},function(n,a,r){var s=r(151).charAt;n.exports=function(c,v,f){return v+(f?s(c,v).length:1)}},function(n,a,r){var s=r(7),c=r(34),v=r(32),f=r(30),g=r(51),b=r(103),_=s.TypeError;n.exports=function(S,A){var M=S.exec;if(f(M)){var x=c(M,S,A);return x!==null&&v(x),x}if(g(S)==="RegExp")return c(b,S,A);throw _("RegExp#exec called on incompatible receiver")}},function(n,a,r){var s=r(76),c=r(34),v=r(15),f=r(123),g=r(18),b=r(32),_=r(30),S=r(59),A=r(94),M=r(39),x=r(44),E=r(124),j=r(62),D=r(201),V=r(125),U=r(28)("replace"),L=Math.max,F=Math.min,X=v([].concat),q=v([].push),H=v("".indexOf),B=v("".slice),G="a".replace(/./,"$0")==="$0",Z=!!/./[U]&&/./[U]("a","$0")==="";f("replace",function(Q,fe,se){var ce=Z?"$":"$0";return[function(be,we){var me=x(this),He=be==null?void 0:j(be,U);return He?c(He,be,me,we):c(fe,M(me),be,we)},function(be,we){var me=b(this),He=M(be);if(typeof we=="string"&&H(we,ce)===-1&&H(we,"$<")===-1){var Je=se(fe,me,He,we);if(Je.done)return Je.value}var yt=_(we);yt||(we=M(we));var Be=me.global;if(Be){var Yt=me.unicode;me.lastIndex=0}for(var Kt=[];;){var Lt=V(me,He);if(Lt===null||(q(Kt,Lt),!Be))break;M(Lt[0])===""&&(me.lastIndex=E(He,A(me.lastIndex),Yt))}for(var An,Ve="",xe=0,Ce=0;Ce<Kt.length;Ce++){for(var qe=M((Lt=Kt[Ce])[0]),_t=L(F(S(Lt.index),He.length),0),ht=[],wt=1;wt<Lt.length;wt++)q(ht,(An=Lt[wt])===void 0?An:String(An));var rn=Lt.groups;if(yt){var an=X([qe],ht,_t,He);rn!==void 0&&q(an,rn);var Xt=M(s(we,void 0,an))}else Xt=D(qe,He,_t,ht,rn,we);_t>=xe&&(Ve+=B(He,xe,_t)+Xt,xe=_t+qe.length)}return Ve+B(He,xe)}]},!!g(function(){var Q=/./;return Q.exec=function(){var fe=[];return fe.groups={a:"7"},fe},"".replace(Q,"$<a>")!=="7"})||!G||Z)},function(n,a,r){var s=r(16),c=Math.hypot,v=Math.abs,f=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,b){for(var _,S,A=0,M=0,x=arguments.length,E=0;M<x;)E<(_=v(arguments[M++]))?(A=A*(S=E/_)*S+1,E=_):A+=_>0?(S=_/E)*S:_;return E===1/0?1/0:E*f(A)}})},function(n,a,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var f,g="Expected a function",b="__lodash_hash_undefined__",_="__lodash_placeholder__",S=16,A=32,M=64,x=128,E=256,j=1/0,D=9007199254740991,V=NaN,U=4294967295,L=[["ary",x],["bind",1],["bindKey",2],["curry",8],["curryRight",S],["flip",512],["partial",A],["partialRight",M],["rearg",E]],F="[object Arguments]",X="[object Array]",q="[object Boolean]",H="[object Date]",B="[object Error]",G="[object Function]",Z="[object GeneratorFunction]",Q="[object Map]",fe="[object Number]",se="[object Object]",ce="[object Promise]",be="[object RegExp]",we="[object Set]",me="[object String]",He="[object Symbol]",Je="[object WeakMap]",yt="[object ArrayBuffer]",Be="[object DataView]",Yt="[object Float32Array]",Kt="[object Float64Array]",Lt="[object Int8Array]",An="[object Int16Array]",Ve="[object Int32Array]",xe="[object Uint8Array]",Ce="[object Uint8ClampedArray]",qe="[object Uint16Array]",_t="[object Uint32Array]",ht=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,rn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,an=/&(?:amp|lt|gt|quot|#39);/g,Xt=/[&<>"']/g,nt=RegExp(an.source),fn=RegExp(Xt.source),Ue=/<%-([\s\S]+?)%>/g,_n=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tr=/^\w*$/,Rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gr=/[\\^$.*+?()[\]{}|]/g,co=RegExp(Gr.source),$n=/^\s+/,_o=/\s/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ke=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nn=/[()=,{}\[\]\/\s]/,Zt=/\\(\\)?/g,Nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,li=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,Yo=/^\[object .+?Constructor\]$/,ti=/^0o[0-7]+$/i,Tn=/^(?:0|[1-9]\d*)$/,Fn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,lr=/['\n\r\u2028\u2029\\]/g,to="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",jr="\\u2700-\\u27bf",ml="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="A-Z\\xc0-\\xd6\\xd8-\\xde",yl="\\ufe0e\\ufe0f",as="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",np="['’]",wc="[\\ud800-\\udfff]",va="["+as+"]",Us="["+to+"]",Rn="\\d+",Vf="[\\u2700-\\u27bf]",wo="["+ml+"]",Ec="[^\\ud800-\\udfff"+as+Rn+jr+ml+Ha+"]",Ji="\\ud83c[\\udffb-\\udfff]",la="[^\\ud800-\\udfff]",Cu="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",ma="["+Ha+"]",Da="(?:"+wo+"|"+Ec+")",Oc="(?:"+ma+"|"+Ec+")",Sc="(?:['’](?:d|ll|m|re|s|t|ve))?",Bf="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vs="(?:"+Us+"|"+Ji+")?",Wf="[\\ufe0e\\ufe0f]?",xc=Wf+Vs+("(?:\\u200d(?:"+[la,Cu,Ca].join("|")+")"+Wf+Vs+")*"),rp="(?:"+[Vf,Cu,Ca].join("|")+")"+xc,jl="(?:"+[la+Us+"?",Us,Cu,Ca,wc].join("|")+")",Gf=RegExp(np,"g"),gl=RegExp(Us,"g"),Ac=RegExp(Ji+"(?="+Ji+")|"+jl+xc,"g"),Du=RegExp([ma+"?"+wo+"+"+Sc+"(?="+[va,ma,"$"].join("|")+")",Oc+"+"+Bf+"(?="+[va,ma+Da,"$"].join("|")+")",ma+"?"+Da+"+"+Sc,ma+"+"+Bf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rn,rp].join("|"),"g"),Tc=RegExp("[\\u200d\\ud800-\\udfff"+to+yl+"]"),Mc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,op=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zf=-1,Yr={};Yr[Yt]=Yr[Kt]=Yr[Lt]=Yr[An]=Yr[Ve]=Yr[xe]=Yr[Ce]=Yr[qe]=Yr[_t]=!0,Yr[F]=Yr[X]=Yr[yt]=Yr[q]=Yr[Be]=Yr[H]=Yr[B]=Yr[G]=Yr[Q]=Yr[fe]=Yr[se]=Yr[be]=Yr[we]=Yr[me]=Yr[Je]=!1;var zr={};zr[F]=zr[X]=zr[yt]=zr[Be]=zr[q]=zr[H]=zr[Yt]=zr[Kt]=zr[Lt]=zr[An]=zr[Ve]=zr[Q]=zr[fe]=zr[se]=zr[be]=zr[we]=zr[me]=zr[He]=zr[xe]=zr[Ce]=zr[qe]=zr[_t]=!0,zr[B]=zr[G]=zr[Je]=!1;var Hf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ls=parseFloat,ya=parseInt,ju=typeof s=="object"&&s&&s.Object===Object&&s,Xf=typeof self=="object"&&self&&self.Object===Object&&self,Bo=ju||Xf||Function("return this")(),Il=a&&!a.nodeType&&a,Ll=Il&&typeof c=="object"&&c&&!c.nodeType&&c,Iu=Ll&&Ll.exports===Il,ss=Iu&&ju.process,xi=function(){try{var dt=Ll&&Ll.require&&Ll.require("util").types;return dt||ss&&ss.binding&&ss.binding("util")}catch{}}(),kc=xi&&xi.isArrayBuffer,qf=xi&&xi.isDate,Pc=xi&&xi.isMap,Fi=xi&&xi.isRegExp,si=xi&&xi.isSet,ga=xi&&xi.isTypedArray;function lo(dt,Ft,Ut){switch(Ut.length){case 0:return dt.call(Ft);case 1:return dt.call(Ft,Ut[0]);case 2:return dt.call(Ft,Ut[0],Ut[1]);case 3:return dt.call(Ft,Ut[0],Ut[1],Ut[2])}return dt.apply(Ft,Ut)}function ip(dt,Ft,Ut,mn){for(var fr=-1,Cr=dt==null?0:dt.length;++fr<Cr;){var vo=dt[fr];Ft(mn,vo,Ut(vo),dt)}return mn}function Ui(dt,Ft){for(var Ut=-1,mn=dt==null?0:dt.length;++Ut<mn&&Ft(dt[Ut],Ut,dt)!==!1;);return dt}function Yf(dt,Ft){for(var Ut=dt==null?0:dt.length;Ut--&&Ft(dt[Ut],Ut,dt)!==!1;);return dt}function Kf(dt,Ft){for(var Ut=-1,mn=dt==null?0:dt.length;++Ut<mn;)if(!Ft(dt[Ut],Ut,dt))return!1;return!0}function Vi(dt,Ft){for(var Ut=-1,mn=dt==null?0:dt.length,fr=0,Cr=[];++Ut<mn;){var vo=dt[Ut];Ft(vo,Ut,dt)&&(Cr[fr++]=vo)}return Cr}function Qi(dt,Ft){return!!(dt!=null&&dt.length)&&us(dt,Ft,0)>-1}function Rc(dt,Ft,Ut){for(var mn=-1,fr=dt==null?0:dt.length;++mn<fr;)if(Ut(Ft,dt[mn]))return!0;return!1}function Fr(dt,Ft){for(var Ut=-1,mn=dt==null?0:dt.length,fr=Array(mn);++Ut<mn;)fr[Ut]=Ft(dt[Ut],Ut,dt);return fr}function ui(dt,Ft){for(var Ut=-1,mn=Ft.length,fr=dt.length;++Ut<mn;)dt[fr+Ut]=Ft[Ut];return dt}function Lu(dt,Ft,Ut,mn){var fr=-1,Cr=dt==null?0:dt.length;for(mn&&Cr&&(Ut=dt[++fr]);++fr<Cr;)Ut=Ft(Ut,dt[fr],fr,dt);return Ut}function Zf(dt,Ft,Ut,mn){var fr=dt==null?0:dt.length;for(mn&&fr&&(Ut=dt[--fr]);fr--;)Ut=Ft(Ut,dt[fr],fr,dt);return Ut}function Nc(dt,Ft){for(var Ut=-1,mn=dt==null?0:dt.length;++Ut<mn;)if(Ft(dt[Ut],Ut,dt))return!0;return!1}var $u=Wi("length");function Xa(dt,Ft,Ut){var mn;return Ut(dt,function(fr,Cr,vo){if(Ft(fr,Cr,vo))return mn=Cr,!1}),mn}function Bi(dt,Ft,Ut,mn){for(var fr=dt.length,Cr=Ut+(mn?1:-1);mn?Cr--:++Cr<fr;)if(Ft(dt[Cr],Cr,dt))return Cr;return-1}function us(dt,Ft,Ut){return Ft==Ft?function(mn,fr,Cr){for(var vo=Cr-1,P=mn.length;++vo<P;)if(mn[vo]===fr)return vo;return-1}(dt,Ft,Ut):Bi(dt,ba,Ut)}function ea(dt,Ft,Ut,mn){for(var fr=Ut-1,Cr=dt.length;++fr<Cr;)if(mn(dt[fr],Ft))return fr;return-1}function ba(dt){return dt!=dt}function Nr(dt,Ft){var Ut=dt==null?0:dt.length;return Ut?cs(dt,Ft)/Ut:V}function Wi(dt){return function(Ft){return Ft==null?f:Ft[dt]}}function ja(dt){return function(Ft){return dt==null?f:dt[Ft]}}function yi(dt,Ft,Ut,mn,fr){return fr(dt,function(Cr,vo,P){Ut=mn?(mn=!1,Cr):Ft(Ut,Cr,vo,P)}),Ut}function cs(dt,Ft){for(var Ut,mn=-1,fr=dt.length;++mn<fr;){var Cr=Ft(dt[mn]);Cr!==f&&(Ut=Ut===f?Cr:Ut+Cr)}return Ut}function $l(dt,Ft){for(var Ut=-1,mn=Array(dt);++Ut<dt;)mn[Ut]=Ft(Ut);return mn}function Ia(dt){return dt&&dt.slice(0,ci(dt)+1).replace($n,"")}function ho(dt){return function(Ft){return dt(Ft)}}function Bs(dt,Ft){return Fr(Ft,function(Ut){return dt[Ut]})}function qa(dt,Ft){return dt.has(Ft)}function _a(dt,Ft){for(var Ut=-1,mn=dt.length;++Ut<mn&&us(Ft,dt[Ut],0)>-1;);return Ut}function Cc(dt,Ft){for(var Ut=dt.length;Ut--&&us(Ft,dt[Ut],0)>-1;);return Ut}function ap(dt,Ft){for(var Ut=dt.length,mn=0;Ut--;)dt[Ut]===Ft&&++mn;return mn}var Dc=ja({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ko=ja({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ws(dt){return"\\"+Hf[dt]}function Ya(dt){return Tc.test(dt)}function ni(dt){var Ft=-1,Ut=Array(dt.size);return dt.forEach(function(mn,fr){Ut[++Ft]=[fr,mn]}),Ut}function jc(dt,Ft){return function(Ut){return dt(Ft(Ut))}}function sa(dt,Ft){for(var Ut=-1,mn=dt.length,fr=0,Cr=[];++Ut<mn;){var vo=dt[Ut];vo!==Ft&&vo!==_||(dt[Ut]=_,Cr[fr++]=Ut)}return Cr}function wa(dt){var Ft=-1,Ut=Array(dt.size);return dt.forEach(function(mn){Ut[++Ft]=mn}),Ut}function Fu(dt){var Ft=-1,Ut=Array(dt.size);return dt.forEach(function(mn){Ut[++Ft]=[mn,mn]}),Ut}function Gi(dt){return Ya(dt)?function(Ft){for(var Ut=Ac.lastIndex=0;Ac.test(Ft);)++Ut;return Ut}(dt):$u(dt)}function ta(dt){return Ya(dt)?function(Ft){return Ft.match(Ac)||[]}(dt):function(Ft){return Ft.split("")}(dt)}function ci(dt){for(var Ft=dt.length;Ft--&&_o.test(dt.charAt(Ft)););return Ft}var ua=ja({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function dt(Ft){var Ut,mn=(Ft=Ft==null?Bo:Ii.defaults(Bo.Object(),Ft,Ii.pick(Bo,op))).Array,fr=Ft.Date,Cr=Ft.Error,vo=Ft.Function,P=Ft.Math,R=Ft.Object,z=Ft.RegExp,oe=Ft.String,Ee=Ft.TypeError,Ye=mn.prototype,gt=vo.prototype,zt=R.prototype,En=Ft["__core-js_shared__"],wr=gt.toString,dn=zt.hasOwnProperty,Hr=0,mr=(Ut=/[^.]+$/.exec(En&&En.keys&&En.keys.IE_PROTO||""))?"Symbol(src)_1."+Ut:"",Lr=zt.toString,ca=wr.call(R),Ao=Bo._,na=z("^"+wr.call(dn).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bl=Iu?Ft.Buffer:f,_l=Ft.Symbol,Fl=Ft.Uint8Array,fs=bl?bl.allocUnsafe:f,Ka=jc(R.getPrototypeOf,R),ds=R.create,ri=zt.propertyIsEnumerable,Ul=Ye.splice,wl=_l?_l.isConcatSpreadable:f,Za=_l?_l.iterator:f,Ja=_l?_l.toStringTag:f,Gs=function(){try{var p=il(R,"defineProperty");return p({},"",{}),p}catch{}}(),gh=Ft.clearTimeout!==Bo.clearTimeout&&Ft.clearTimeout,bh=fr&&fr.now!==Bo.Date.now&&fr.now,lp=Ft.setTimeout!==Bo.setTimeout&&Ft.setTimeout,Ic=P.ceil,zs=P.floor,Jf=R.getOwnPropertySymbols,_h=bl?bl.isBuffer:f,Hs=Ft.isFinite,Lc=Ye.join,Qf=jc(R.keys,R),Wo=P.max,zi=P.min,ed=fr.now,td=Ft.parseInt,Uu=P.random,Zv=Ye.reverse,Vu=il(Ft,"DataView"),Bu=il(Ft,"Map"),$c=il(Ft,"Promise"),Xs=il(Ft,"Set"),ps=il(Ft,"WeakMap"),Wu=il(R,"create"),Fc=ps&&new ps,hs={},Jv=Es(Vu),Uc=Es(Bu),Qv=Es($c),em=Es(Xs),wh=Es(ps),nd=_l?_l.prototype:f,Li=nd?nd.valueOf:f,Eh=nd?nd.toString:f;function ae(p){if(Xo(p)&&!br(p)&&!(p instanceof Dr)){if(p instanceof La)return p;if(dn.call(p,"__wrapped__"))return xd(p)}return new La(p)}var qs=function(){function p(){}return function(y){if(!Do(y))return{};if(ds)return ds(y);p.prototype=y;var O=new p;return p.prototype=f,O}}();function Vl(){}function La(p,y){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=f}function Dr(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Ai(p){var y=-1,O=p==null?0:p.length;for(this.clear();++y<O;){var I=p[y];this.set(I[0],I[1])}}function Ur(p){var y=-1,O=p==null?0:p.length;for(this.clear();++y<O;){var I=p[y];this.set(I[0],I[1])}}function Qa(p){var y=-1,O=p==null?0:p.length;for(this.clear();++y<O;){var I=p[y];this.set(I[0],I[1])}}function Bl(p){var y=-1,O=p==null?0:p.length;for(this.__data__=new Qa;++y<O;)this.add(p[y])}function Ea(p){var y=this.__data__=new Ur(p);this.size=y.size}function rd(p,y){var O=br(p),I=!O&&fu(p),Y=!O&&!I&&oa(p),ne=!O&&!I&&!Y&&et(p),ve=O||I||Y||ne,Ae=ve?$l(p.length,oe):[],Fe=Ae.length;for(var mt in p)!y&&!dn.call(p,mt)||ve&&(mt=="length"||Y&&(mt=="offset"||mt=="parent")||ne&&(mt=="buffer"||mt=="byteLength"||mt=="byteOffset")||$i(mt,Fe))||Ae.push(mt);return Ae}function od(p){var y=p.length;return y?p[gp(0,y-1)]:f}function sp(p,y){return Tl(gi(p),vs(y,0,p.length))}function Oh(p){return Tl(gi(p))}function Wl(p,y,O){(O!==f&&!Va(p[y],O)||O===f&&!(y in p))&&el(p,y,O)}function Go(p,y,O){var I=p[y];dn.call(p,y)&&Va(I,O)&&(O!==f||y in p)||el(p,y,O)}function Gu(p,y){for(var O=p.length;O--;)if(Va(p[O][0],y))return O;return-1}function up(p,y,O,I){return Eo(p,function(Y,ne,ve){y(I,Y,O(Y),ve)}),I}function Gl(p,y){return p&&nl(y,Dt(y),p)}function el(p,y,O){y=="__proto__"&&Gs?Gs(p,y,{configurable:!0,enumerable:!0,value:O,writable:!0}):p[y]=O}function Vc(p,y){for(var O=-1,I=y.length,Y=mn(I),ne=p==null;++O<I;)Y[O]=ne?f:Gt(p,y[O]);return Y}function vs(p,y,O){return p==p&&(O!==f&&(p=p<=O?p:O),y!==f&&(p=p>=y?p:y)),p}function Oa(p,y,O,I,Y,ne){var ve,Ae=1&y,Fe=2&y,mt=4&y;if(O&&(ve=Y?O(p,I,Y,ne):O(p)),ve!==f)return ve;if(!Do(p))return p;var Et=br(p);if(Et){if(ve=function(jt){var tn=jt.length,ar=new jt.constructor(tn);return tn&&typeof jt[0]=="string"&&dn.call(jt,"index")&&(ar.index=jt.index,ar.input=jt.input),ar}(p),!Ae)return gi(p,ve)}else{var Wt=No(p),wn=Wt==G||Wt==Z;if(oa(p))return Rh(p,Ae);if(Wt==se||Wt==F||wn&&!Y){if(ve=Fe||wn?{}:ra(p),!Ae)return Fe?function(jt,tn){return nl(jt,ru(jt),tn)}(p,function(jt,tn){return jt&&nl(tn,kt(tn),jt)}(ve,p)):function(jt,tn){return nl(jt,fi(jt),tn)}(p,Gl(ve,p))}else{if(!zr[Wt])return Y?p:{};ve=function(jt,tn,ar){var Mn=jt.constructor;switch(tn){case yt:return Zs(jt);case q:case H:return new Mn(+jt);case Be:return function(vr,$r){var Xn=$r?Zs(vr.buffer):vr.buffer;return new vr.constructor(Xn,vr.byteOffset,vr.byteLength)}(jt,ar);case Yt:case Kt:case Lt:case An:case Ve:case xe:case Ce:case qe:case _t:return Nh(jt,ar);case Q:return new Mn;case fe:case me:return new Mn(jt);case be:return function(vr){var $r=new vr.constructor(vr.source,Or.exec(vr));return $r.lastIndex=vr.lastIndex,$r}(jt);case we:return new Mn;case He:return Xe=jt,Li?R(Li.call(Xe)):{}}var Xe}(p,Wt,Ae)}}ne||(ne=new Ea);var On=ne.get(p);if(On)return On;ne.set(p,ve),Oe(p)?p.forEach(function(jt){ve.add(Oa(jt,y,O,jt,p,ne))}):Pd(p)&&p.forEach(function(jt,tn){ve.set(tn,Oa(jt,y,O,tn,p,ne))});var Gn=Et?f:(mt?Fe?_d:Kc:Fe?kt:Dt)(p);return Ui(Gn||p,function(jt,tn){Gn&&(jt=p[tn=jt]),Go(ve,tn,Oa(jt,y,O,tn,p,ne))}),ve}function cp(p,y,O){var I=O.length;if(p==null)return!I;for(p=R(p);I--;){var Y=O[I],ne=y[Y],ve=p[Y];if(ve===f&&!(Y in p)||!ne(ve))return!1}return!0}function fp(p,y,O){if(typeof p!="function")throw new Ee(g);return au(function(){p.apply(f,O)},y)}function tl(p,y,O,I){var Y=-1,ne=Qi,ve=!0,Ae=p.length,Fe=[],mt=y.length;if(!Ae)return Fe;O&&(y=Fr(y,ho(O))),I?(ne=Rc,ve=!1):y.length>=200&&(ne=qa,ve=!1,y=new Bl(y));e:for(;++Y<Ae;){var Et=p[Y],Wt=O==null?Et:O(Et);if(Et=I||Et!==0?Et:0,ve&&Wt==Wt){for(var wn=mt;wn--;)if(y[wn]===Wt)continue e;Fe.push(Et)}else ne(y,Wt,I)||Fe.push(Et)}return Fe}ae.templateSettings={escape:Ue,evaluate:_n,interpolate:Jn,variable:"",imports:{_:ae}},ae.prototype=Vl.prototype,ae.prototype.constructor=ae,La.prototype=qs(Vl.prototype),La.prototype.constructor=La,Dr.prototype=qs(Vl.prototype),Dr.prototype.constructor=Dr,Ai.prototype.clear=function(){this.__data__=Wu?Wu(null):{},this.size=0},Ai.prototype.delete=function(p){var y=this.has(p)&&delete this.__data__[p];return this.size-=y?1:0,y},Ai.prototype.get=function(p){var y=this.__data__;if(Wu){var O=y[p];return O===b?f:O}return dn.call(y,p)?y[p]:f},Ai.prototype.has=function(p){var y=this.__data__;return Wu?y[p]!==f:dn.call(y,p)},Ai.prototype.set=function(p,y){var O=this.__data__;return this.size+=this.has(p)?0:1,O[p]=Wu&&y===f?b:y,this},Ur.prototype.clear=function(){this.__data__=[],this.size=0},Ur.prototype.delete=function(p){var y=this.__data__,O=Gu(y,p);return!(O<0)&&(O==y.length-1?y.pop():Ul.call(y,O,1),--this.size,!0)},Ur.prototype.get=function(p){var y=this.__data__,O=Gu(y,p);return O<0?f:y[O][1]},Ur.prototype.has=function(p){return Gu(this.__data__,p)>-1},Ur.prototype.set=function(p,y){var O=this.__data__,I=Gu(O,p);return I<0?(++this.size,O.push([p,y])):O[I][1]=y,this},Qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ai,map:new(Bu||Ur),string:new Ai}},Qa.prototype.delete=function(p){var y=Ju(this,p).delete(p);return this.size-=y?1:0,y},Qa.prototype.get=function(p){return Ju(this,p).get(p)},Qa.prototype.has=function(p){return Ju(this,p).has(p)},Qa.prototype.set=function(p,y){var O=Ju(this,p),I=O.size;return O.set(p,y),this.size+=O.size==I?0:1,this},Bl.prototype.add=Bl.prototype.push=function(p){return this.__data__.set(p,b),this},Bl.prototype.has=function(p){return this.__data__.has(p)},Ea.prototype.clear=function(){this.__data__=new Ur,this.size=0},Ea.prototype.delete=function(p){var y=this.__data__,O=y.delete(p);return this.size=y.size,O},Ea.prototype.get=function(p){return this.__data__.get(p)},Ea.prototype.has=function(p){return this.__data__.has(p)},Ea.prototype.set=function(p,y){var O=this.__data__;if(O instanceof Ur){var I=O.__data__;if(!Bu||I.length<199)return I.push([p,y]),this.size=++O.size,this;O=this.__data__=new Qa(I)}return O.set(p,y),this.size=O.size,this};var Eo=eu(Cn),Sh=eu(po,!0);function dp(p,y){var O=!0;return Eo(p,function(I,Y,ne){return O=!!y(I,Y,ne)}),O}function zo(p,y,O){for(var I=-1,Y=p.length;++I<Y;){var ne=p[I],ve=y(ne);if(ve!=null&&(Ae===f?ve==ve&&!vt(ve):O(ve,Ae)))var Ae=ve,Fe=ne}return Fe}function Kr(p,y){var O=[];return Eo(p,function(I,Y,ne){y(I,Y,ne)&&O.push(I)}),O}function oi(p,y,O,I,Y){var ne=-1,ve=p.length;for(O||(O=Jc),Y||(Y=[]);++ne<ve;){var Ae=p[ne];y>0&&O(Ae)?y>1?oi(Ae,y-1,O,I,Y):ui(Y,Ae):I||(Y[Y.length]=Ae)}return Y}var Ar=tu(),fo=tu(!0);function Cn(p,y){return p&&Ar(p,y,Dt)}function po(p,y){return p&&fo(p,y,Dt)}function Bc(p,y){return Vi(y,function(O){return Aa(p[O])})}function El(p,y){for(var O=0,I=(y=Xr(y,p)).length;p!=null&&O<I;)p=p[al(y[O++])];return O&&O==I?p:f}function id(p,y,O){var I=y(p);return br(p)?I:ui(I,O(p))}function To(p){return p==null?p===f?"[object Undefined]":"[object Null]":Ja&&Ja in R(p)?function(y){var O=dn.call(y,Ja),I=y[Ja];try{y[Ja]=f;var Y=!0}catch{}var ne=Lr.call(y);return Y&&(O?y[Ja]=I:delete y[Ja]),ne}(p):function(y){return Lr.call(y)}(p)}function Ro(p,y){return p>y}function pp(p,y){return p!=null&&dn.call(p,y)}function hp(p,y){return p!=null&&y in R(p)}function Wc(p,y,O){for(var I=O?Rc:Qi,Y=p[0].length,ne=p.length,ve=ne,Ae=mn(ne),Fe=1/0,mt=[];ve--;){var Et=p[ve];ve&&y&&(Et=Fr(Et,ho(y))),Fe=zi(Et.length,Fe),Ae[ve]=!O&&(y||Y>=120&&Et.length>=120)?new Bl(ve&&Et):f}Et=p[0];var Wt=-1,wn=Ae[0];e:for(;++Wt<Y&&mt.length<Fe;){var On=Et[Wt],Gn=y?y(On):On;if(On=O||On!==0?On:0,!(wn?qa(wn,Gn):I(mt,Gn,O))){for(ve=ne;--ve;){var jt=Ae[ve];if(!(jt?qa(jt,Gn):I(p[ve],Gn,O)))continue e}wn&&wn.push(Gn),mt.push(On)}}return mt}function Hi(p,y,O){var I=(p=ws(p,y=Xr(y,p)))==null?p:p[al(Oo(y))];return I==null?f:lo(I,p,O)}function ad(p){return Xo(p)&&To(p)==F}function zu(p,y,O,I,Y){return p===y||(p==null||y==null||!Xo(p)&&!Xo(y)?p!=p&&y!=y:function(ne,ve,Ae,Fe,mt,Et){var Wt=br(ne),wn=br(ve),On=Wt?X:No(ne),Gn=wn?X:No(ve),jt=(On=On==F?se:On)==se,tn=(Gn=Gn==F?se:Gn)==se,ar=On==Gn;if(ar&&oa(ne)){if(!oa(ve))return!1;Wt=!0,jt=!1}if(ar&&!jt)return Et||(Et=new Ea),Wt||et(ne)?Zu(ne,ve,Ae,Fe,mt,Et):function(Xn,ur,ki,Ba,Zl,Pi,As){switch(ki){case Be:if(Xn.byteLength!=ur.byteLength||Xn.byteOffset!=ur.byteOffset)return!1;Xn=Xn.buffer,ur=ur.buffer;case yt:return!(Xn.byteLength!=ur.byteLength||!Pi(new Fl(Xn),new Fl(ur)));case q:case H:case fe:return Va(+Xn,+ur);case B:return Xn.name==ur.name&&Xn.message==ur.message;case be:case me:return Xn==ur+"";case Q:var pu=ni;case we:var Rd=1&Ba;if(pu||(pu=wa),Xn.size!=ur.size&&!Rd)return!1;var Ip=As.get(Xn);if(Ip)return Ip==ur;Ba|=2,As.set(Xn,ur);var Ts=Zu(pu(Xn),pu(ur),Ba,Zl,Pi,As);return As.delete(Xn),Ts;case He:if(Li)return Li.call(Xn)==Li.call(ur)}return!1}(ne,ve,On,Ae,Fe,mt,Et);if(!(1&Ae)){var Mn=jt&&dn.call(ne,"__wrapped__"),Xe=tn&&dn.call(ve,"__wrapped__");if(Mn||Xe){var vr=Mn?ne.value():ne,$r=Xe?ve.value():ve;return Et||(Et=new Ea),mt(vr,$r,Ae,Fe,Et)}}return ar?(Et||(Et=new Ea),function(Xn,ur,ki,Ba,Zl,Pi){var As=1&ki,pu=Kc(Xn),Rd=pu.length,Ip=Kc(ur).length;if(Rd!=Ip&&!As)return!1;for(var Ts=Rd;Ts--;){var nc=pu[Ts];if(!(As?nc in ur:dn.call(ur,nc)))return!1}var lm=Pi.get(Xn),Nd=Pi.get(ur);if(lm&&Nd)return lm==ur&&Nd==Xn;var Lp=!0;Pi.set(Xn,ur),Pi.set(ur,Xn);for(var sm=As;++Ts<Rd;){var $p=Xn[nc=pu[Ts]],mf=ur[nc];if(Ba)var yf=As?Ba(mf,$p,nc,ur,Xn,Pi):Ba($p,mf,nc,Xn,ur,Pi);if(!(yf===f?$p===mf||Zl($p,mf,ki,Ba,Pi):yf)){Lp=!1;break}sm||(sm=nc=="constructor")}if(Lp&&!sm){var hu=Xn.constructor,Fp=ur.constructor;hu==Fp||!("constructor"in Xn)||!("constructor"in ur)||typeof hu=="function"&&hu instanceof hu&&typeof Fp=="function"&&Fp instanceof Fp||(Lp=!1)}return Pi.delete(Xn),Pi.delete(ur),Lp}(ne,ve,Ae,Fe,mt,Et)):!1}(p,y,O,I,zu,Y))}function $a(p,y,O,I){var Y=O.length,ne=Y,ve=!I;if(p==null)return!ne;for(p=R(p);Y--;){var Ae=O[Y];if(ve&&Ae[2]?Ae[1]!==p[Ae[0]]:!(Ae[0]in p))return!1}for(;++Y<ne;){var Fe=(Ae=O[Y])[0],mt=p[Fe],Et=Ae[1];if(ve&&Ae[2]){if(mt===f&&!(Fe in p))return!1}else{var Wt=new Ea;if(I)var wn=I(mt,Et,Fe,p,y,Wt);if(!(wn===f?zu(Et,mt,3,I,Wt):wn))return!1}}return!0}function ms(p){return!(!Do(p)||(y=p,mr&&mr in y))&&(Aa(p)?na:Yo).test(Es(p));var y}function zl(p){return typeof p=="function"?p:p==null?Kn:typeof p=="object"?br(p)?mp(p[0],p[1]):vp(p):he(p)}function Fa(p){if(!Pt(p))return Qf(p);var y=[];for(var O in R(p))dn.call(p,O)&&O!="constructor"&&y.push(O);return y}function xh(p){if(!Do(p))return function(Y){var ne=[];if(Y!=null)for(var ve in R(Y))ne.push(ve);return ne}(p);var y=Pt(p),O=[];for(var I in p)(I!="constructor"||!y&&dn.call(p,I))&&O.push(I);return O}function Ol(p,y){return p<y}function Sa(p,y){var O=-1,I=pa(p)?mn(p.length):[];return Eo(p,function(Y,ne,ve){I[++O]=y(Y,ne,ve)}),I}function vp(p){var y=Zc(p);return y.length==1&&y[0][2]?Qc(y[0][0],y[0][1]):function(O){return O===p||$a(O,p,y)}}function mp(p,y){return xl(p)&&ou(y)?Qc(al(p),y):function(O){var I=Gt(O,p);return I===f&&I===y?Tt(O,p):zu(y,I,3)}}function ld(p,y,O,I,Y){p!==y&&Ar(y,function(ne,ve){if(Y||(Y=new Ea),Do(ne))(function(Fe,mt,Et,Wt,wn,On,Gn){var jt=Od(Fe,Et),tn=Od(mt,Et),ar=Gn.get(tn);if(ar)return void Wl(Fe,Et,ar);var Mn=On?On(jt,tn,Et+"",Fe,mt,Gn):f,Xe=Mn===f;if(Xe){var vr=br(tn),$r=!vr&&oa(tn),Xn=!vr&&!$r&&et(tn);Mn=tn,vr||$r||Xn?br(jt)?Mn=jt:ko(jt)?Mn=gi(jt):$r?(Xe=!1,Mn=Rh(tn,!0)):Xn?(Xe=!1,Mn=Nh(tn,!0)):Mn=[]:W(tn)||fu(tn)?(Mn=jt,fu(jt)?Mn=Ct(jt):Do(jt)&&!Aa(jt)||(Mn=ra(tn))):Xe=!1}Xe&&(Gn.set(tn,Mn),wn(Mn,tn,Wt,On,Gn),Gn.delete(tn)),Wl(Fe,Et,Mn)})(p,y,ve,O,ld,I,Y);else{var Ae=I?I(Od(p,ve),ne,ve+"",p,y,Y):f;Ae===f&&(Ae=ne),Wl(p,ve,Ae)}},kt)}function Ah(p,y){var O=p.length;if(O)return $i(y+=y<0?O:0,O)?p[y]:f}function Th(p,y,O){y=y.length?Fr(y,function(ne){return br(ne)?function(ve){return El(ve,ne.length===1?ne[0]:ne)}:ne}):[Kn];var I=-1;y=Fr(y,ho(nr()));var Y=Sa(p,function(ne,ve,Ae){var Fe=Fr(y,function(mt){return mt(ne)});return{criteria:Fe,index:++I,value:ne}});return function(ne,ve){var Ae=ne.length;for(ne.sort(ve);Ae--;)ne[Ae]=ne[Ae].value;return ne}(Y,function(ne,ve){return function(Ae,Fe,mt){for(var Et=-1,Wt=Ae.criteria,wn=Fe.criteria,On=Wt.length,Gn=mt.length;++Et<On;){var jt=Hu(Wt[Et],wn[Et]);if(jt)return Et>=Gn?jt:jt*(mt[Et]=="desc"?-1:1)}return Ae.index-Fe.index}(ne,ve,O)})}function Mh(p,y,O){for(var I=-1,Y=y.length,ne={};++I<Y;){var ve=y[I],Ae=El(p,ve);O(Ae,ve)&&Ys(ne,Xr(ve,p),Ae)}return ne}function sd(p,y,O,I){var Y=I?ea:us,ne=-1,ve=y.length,Ae=p;for(p===y&&(y=gi(y)),O&&(Ae=Fr(p,ho(O)));++ne<ve;)for(var Fe=0,mt=y[ne],Et=O?O(mt):mt;(Fe=Y(Ae,Et,Fe,I))>-1;)Ae!==p&&Ul.call(Ae,Fe,1),Ul.call(p,Fe,1);return p}function yp(p,y){for(var O=p?y.length:0,I=O-1;O--;){var Y=y[O];if(O==I||Y!==ne){var ne=Y;$i(Y)?Ul.call(p,Y,1):cd(p,Y)}}return p}function gp(p,y){return p+zs(Uu()*(y-p+1))}function Gc(p,y){var O="";if(!p||y<1||y>D)return O;do y%2&&(O+=p),(y=zs(y/2))&&(p+=p);while(y);return O}function Tr(p,y){return tf(ef(p,y,Kn),p+"")}function tm(p){return od(_r(p))}function bp(p,y){var O=_r(p);return Tl(O,vs(y,0,O.length))}function Ys(p,y,O,I){if(!Do(p))return p;for(var Y=-1,ne=(y=Xr(y,p)).length,ve=ne-1,Ae=p;Ae!=null&&++Y<ne;){var Fe=al(y[Y]),mt=O;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return p;if(Y!=ve){var Et=Ae[Fe];(mt=I?I(Et,Fe,Ae):f)===f&&(mt=Do(Et)?Et:$i(y[Y+1])?[]:{})}Go(Ae,Fe,mt),Ae=Ae[Fe]}return p}var zc=Fc?function(p,y){return Fc.set(p,y),p}:Kn,nm=Gs?function(p,y){return Gs(p,"toString",{configurable:!0,enumerable:!1,value:Mr(y),writable:!0})}:Kn;function kh(p){return Tl(_r(p))}function xa(p,y,O){var I=-1,Y=p.length;y<0&&(y=-y>Y?0:Y+y),(O=O>Y?Y:O)<0&&(O+=Y),Y=y>O?0:O-y>>>0,y>>>=0;for(var ne=mn(Y);++I<Y;)ne[I]=p[I+y];return ne}function rm(p,y){var O;return Eo(p,function(I,Y,ne){return!(O=y(I,Y,ne))}),!!O}function Hc(p,y,O){var I=0,Y=p==null?I:p.length;if(typeof y=="number"&&y==y&&Y<=2147483647){for(;I<Y;){var ne=I+Y>>>1,ve=p[ne];ve!==null&&!vt(ve)&&(O?ve<=y:ve<y)?I=ne+1:Y=ne}return Y}return ud(p,y,Kn,O)}function ud(p,y,O,I){var Y=0,ne=p==null?0:p.length;if(ne===0)return 0;for(var ve=(y=O(y))!=y,Ae=y===null,Fe=vt(y),mt=y===f;Y<ne;){var Et=zs((Y+ne)/2),Wt=O(p[Et]),wn=Wt!==f,On=Wt===null,Gn=Wt==Wt,jt=vt(Wt);if(ve)var tn=I||Gn;else tn=mt?Gn&&(I||wn):Ae?Gn&&wn&&(I||!On):Fe?Gn&&wn&&!On&&(I||!jt):!On&&!jt&&(I?Wt<=y:Wt<y);tn?Y=Et+1:ne=Et}return zi(ne,4294967294)}function _p(p,y){for(var O=-1,I=p.length,Y=0,ne=[];++O<I;){var ve=p[O],Ae=y?y(ve):ve;if(!O||!Va(Ae,Fe)){var Fe=Ae;ne[Y++]=ve===0?0:ve}}return ne}function Ph(p){return typeof p=="number"?p:vt(p)?V:+p}function fa(p){if(typeof p=="string")return p;if(br(p))return Fr(p,fa)+"";if(vt(p))return Eh?Eh.call(p):"";var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function ys(p,y,O){var I=-1,Y=Qi,ne=p.length,ve=!0,Ae=[],Fe=Ae;if(O)ve=!1,Y=Rc;else if(ne>=200){var mt=y?null:Dh(p);if(mt)return wa(mt);ve=!1,Y=qa,Fe=new Bl}else Fe=y?[]:Ae;e:for(;++I<ne;){var Et=p[I],Wt=y?y(Et):Et;if(Et=O||Et!==0?Et:0,ve&&Wt==Wt){for(var wn=Fe.length;wn--;)if(Fe[wn]===Wt)continue e;y&&Fe.push(Wt),Ae.push(Et)}else Y(Fe,Wt,O)||(Fe!==Ae&&Fe.push(Wt),Ae.push(Et))}return Ae}function cd(p,y){return(p=ws(p,y=Xr(y,p)))==null||delete p[al(Oo(y))]}function Ks(p,y,O,I){return Ys(p,y,O(El(p,y)),I)}function fd(p,y,O,I){for(var Y=p.length,ne=I?Y:-1;(I?ne--:++ne<Y)&&y(p[ne],ne,p););return O?xa(p,I?0:ne,I?ne+1:Y):xa(p,I?ne+1:0,I?Y:ne)}function wp(p,y){var O=p;return O instanceof Dr&&(O=O.value()),Lu(y,function(I,Y){return Y.func.apply(Y.thisArg,ui([I],Y.args))},O)}function dd(p,y,O){var I=p.length;if(I<2)return I?ys(p[0]):[];for(var Y=-1,ne=mn(I);++Y<I;)for(var ve=p[Y],Ae=-1;++Ae<I;)Ae!=Y&&(ne[Y]=tl(ne[Y]||ve,p[Ae],y,O));return ys(oi(ne,1),y,O)}function Xc(p,y,O){for(var I=-1,Y=p.length,ne=y.length,ve={};++I<Y;){var Ae=I<ne?y[I]:f;O(ve,p[I],Ae)}return ve}function pd(p){return ko(p)?p:[]}function hd(p){return typeof p=="function"?p:Kn}function Xr(p,y){return br(p)?p:xl(p,y)?[p]:kp(Ot(p))}var om=Tr;function no(p,y,O){var I=p.length;return O=O===f?I:O,!y&&O>=I?p:xa(p,y,O)}var vd=gh||function(p){return Bo.clearTimeout(p)};function Rh(p,y){if(y)return p.slice();var O=p.length,I=fs?fs(O):new p.constructor(O);return p.copy(I),I}function Zs(p){var y=new p.constructor(p.byteLength);return new Fl(y).set(new Fl(p)),y}function Nh(p,y){var O=y?Zs(p.buffer):p.buffer;return new p.constructor(O,p.byteOffset,p.length)}function Hu(p,y){if(p!==y){var O=p!==f,I=p===null,Y=p==p,ne=vt(p),ve=y!==f,Ae=y===null,Fe=y==y,mt=vt(y);if(!Ae&&!mt&&!ne&&p>y||ne&&ve&&Fe&&!Ae&&!mt||I&&ve&&Fe||!O&&Fe||!Y)return 1;if(!I&&!ne&&!mt&&p<y||mt&&O&&Y&&!I&&!ne||Ae&&O&&Y||!ve&&Y||!Fe)return-1}return 0}function Ch(p,y,O,I){for(var Y=-1,ne=p.length,ve=O.length,Ae=-1,Fe=y.length,mt=Wo(ne-ve,0),Et=mn(Fe+mt),Wt=!I;++Ae<Fe;)Et[Ae]=y[Ae];for(;++Y<ve;)(Wt||Y<ne)&&(Et[O[Y]]=p[Y]);for(;mt--;)Et[Ae++]=p[Y++];return Et}function Js(p,y,O,I){for(var Y=-1,ne=p.length,ve=-1,Ae=O.length,Fe=-1,mt=y.length,Et=Wo(ne-Ae,0),Wt=mn(Et+mt),wn=!I;++Y<Et;)Wt[Y]=p[Y];for(var On=Y;++Fe<mt;)Wt[On+Fe]=y[Fe];for(;++ve<Ae;)(wn||Y<ne)&&(Wt[On+O[ve]]=p[Y++]);return Wt}function gi(p,y){var O=-1,I=p.length;for(y||(y=mn(I));++O<I;)y[O]=p[O];return y}function nl(p,y,O,I){var Y=!O;O||(O={});for(var ne=-1,ve=y.length;++ne<ve;){var Ae=y[ne],Fe=I?I(O[Ae],p[Ae],Ae,O,p):f;Fe===f&&(Fe=p[Ae]),Y?el(O,Ae,Fe):Go(O,Ae,Fe)}return O}function Hl(p,y){return function(O,I){var Y=br(O)?ip:up,ne=y?y():{};return Y(O,p,nr(I,2),ne)}}function Qs(p){return Tr(function(y,O){var I=-1,Y=O.length,ne=Y>1?O[Y-1]:f,ve=Y>2?O[2]:f;for(ne=p.length>3&&typeof ne=="function"?(Y--,ne):f,ve&&Ho(O[0],O[1],ve)&&(ne=Y<3?f:ne,Y=1),y=R(y);++I<Y;){var Ae=O[I];Ae&&p(y,Ae,I,ne)}return y})}function eu(p,y){return function(O,I){if(O==null)return O;if(!pa(O))return p(O,I);for(var Y=O.length,ne=y?Y:-1,ve=R(O);(y?ne--:++ne<Y)&&I(ve[ne],ne,ve)!==!1;);return O}}function tu(p){return function(y,O,I){for(var Y=-1,ne=R(y),ve=I(y),Ae=ve.length;Ae--;){var Fe=ve[p?Ae:++Y];if(O(ne[Fe],Fe,ne)===!1)break}return y}}function md(p){return function(y){var O=Ya(y=Ot(y))?ta(y):f,I=O?O[0]:y.charAt(0),Y=O?no(O,1).join(""):y.slice(1);return I[p]()+Y}}function Xl(p){return function(y){return Lu(mo(or(y).replace(Gf,"")),p,"")}}function nu(p){return function(){var y=arguments;switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3]);case 5:return new p(y[0],y[1],y[2],y[3],y[4]);case 6:return new p(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new p(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var O=qs(p.prototype),I=p.apply(O,y);return Do(I)?I:O}}function yd(p){return function(y,O,I){var Y=R(y);if(!pa(y)){var ne=nr(O,3);y=Dt(y),O=function(Ae){return ne(Y[Ae],Ae,Y)}}var ve=p(y,O,I);return ve>-1?Y[ne?y[ve]:ve]:f}}function rl(p){return Sl(function(y){var O=y.length,I=O,Y=La.prototype.thru;for(p&&y.reverse();I--;){var ne=y[I];if(typeof ne!="function")throw new Ee(g);if(Y&&!ve&&gs(ne)=="wrapper")var ve=new La([],!0)}for(I=ve?I:O;++I<O;){var Ae=gs(ne=y[I]),Fe=Ae=="wrapper"?wd(ne):f;ve=Fe&&Al(Fe[0])&&Fe[1]==424&&!Fe[4].length&&Fe[9]==1?ve[gs(Fe[0])].apply(ve,Fe[3]):ne.length==1&&Al(ne)?ve[Ae]():ve.thru(ne)}return function(){var mt=arguments,Et=mt[0];if(ve&&mt.length==1&&br(Et))return ve.plant(Et).value();for(var Wt=0,wn=O?y[Wt].apply(this,mt):Et;++Wt<O;)wn=y[Wt].call(this,wn);return wn}})}function qc(p,y,O,I,Y,ne,ve,Ae,Fe,mt){var Et=y&x,Wt=1&y,wn=2&y,On=24&y,Gn=512&y,jt=wn?f:nu(p);return function tn(){for(var ar=arguments.length,Mn=mn(ar),Xe=ar;Xe--;)Mn[Xe]=arguments[Xe];if(On)var vr=bs(tn),$r=ap(Mn,vr);if(I&&(Mn=Ch(Mn,I,Y,On)),ne&&(Mn=Js(Mn,ne,ve,On)),ar-=$r,On&&ar<mt){var Xn=sa(Mn,vr);return Ep(p,y,qc,tn.placeholder,O,Mn,Xn,Ae,Fe,mt-ar)}var ur=Wt?O:this,ki=wn?ur[p]:p;return ar=Mn.length,Ae?Mn=iu(Mn,Ae):Gn&&ar>1&&Mn.reverse(),Et&&Fe<ar&&(Mn.length=Fe),this&&this!==Bo&&this instanceof tn&&(ki=jt||nu(ki)),ki.apply(ur,Mn)}}function Yc(p,y){return function(O,I){return function(Y,ne,ve,Ae){return Cn(Y,function(Fe,mt,Et){ne(Ae,ve(Fe),mt,Et)}),Ae}(O,p,y(I),{})}}function Xu(p,y){return function(O,I){var Y;if(O===f&&I===f)return y;if(O!==f&&(Y=O),I!==f){if(Y===f)return I;typeof O=="string"||typeof I=="string"?(O=fa(O),I=fa(I)):(O=Ph(O),I=Ph(I)),Y=p(O,I)}return Y}}function qu(p){return Sl(function(y){return y=Fr(y,ho(nr())),Tr(function(O){var I=this;return p(y,function(Y){return lo(Y,I,O)})})})}function Yu(p,y){var O=(y=y===f?" ":fa(y)).length;if(O<2)return O?Gc(y,p):y;var I=Gc(y,Ic(p/Gi(y)));return Ya(y)?no(ta(I),0,p).join(""):I.slice(0,p)}function gd(p){return function(y,O,I){return I&&typeof I!="number"&&Ho(y,O,I)&&(O=I=f),y=Nt(y),O===f?(O=y,y=0):O=Nt(O),function(Y,ne,ve,Ae){for(var Fe=-1,mt=Wo(Ic((ne-Y)/(ve||1)),0),Et=mn(mt);mt--;)Et[Ae?mt:++Fe]=Y,Y+=ve;return Et}(y,O,I=I===f?y<O?1:-1:Nt(I),p)}}function Ku(p){return function(y,O){return typeof y=="string"&&typeof O=="string"||(y=Vt(y),O=Vt(O)),p(y,O)}}function Ep(p,y,O,I,Y,ne,ve,Ae,Fe,mt){var Et=8&y;y|=Et?A:M,4&(y&=~(Et?M:A))||(y&=-4);var Wt=[p,y,Y,Et?ne:f,Et?ve:f,Et?f:ne,Et?f:ve,Ae,Fe,mt],wn=O.apply(f,Wt);return Al(p)&&Tp(wn,Wt),wn.placeholder=I,Sd(wn,p,y)}function bd(p){var y=P[p];return function(O,I){if(O=Vt(O),(I=I==null?0:zi(ft(I),292))&&Hs(O)){var Y=(Ot(O)+"e").split("e");return+((Y=(Ot(y(Y[0]+"e"+(+Y[1]+I)))+"e").split("e"))[0]+"e"+(+Y[1]-I))}return y(O)}}var Dh=Xs&&1/wa(new Xs([,-0]))[1]==j?function(p){return new Xs(p)}:it;function Op(p){return function(y){var O=No(y);return O==Q?ni(y):O==we?Fu(y):function(I,Y){return Fr(Y,function(ne){return[ne,I[ne]]})}(y,p(y))}}function ol(p,y,O,I,Y,ne,ve,Ae){var Fe=2&y;if(!Fe&&typeof p!="function")throw new Ee(g);var mt=I?I.length:0;if(mt||(y&=-97,I=Y=f),ve=ve===f?ve:Wo(ft(ve),0),Ae=Ae===f?Ae:ft(Ae),mt-=Y?Y.length:0,y&M){var Et=I,Wt=Y;I=Y=f}var wn=Fe?f:wd(p),On=[p,y,O,I,Y,Et,Wt,ne,ve,Ae];if(wn&&function(jt,tn){var ar=jt[1],Mn=tn[1],Xe=ar|Mn,vr=Xe<131,$r=Mn==x&&ar==8||Mn==x&&ar==E&&jt[7].length<=tn[8]||Mn==384&&tn[7].length<=tn[8]&&ar==8;if(!vr&&!$r)return jt;1&Mn&&(jt[2]=tn[2],Xe|=1&ar?0:4);var Xn=tn[3];if(Xn){var ur=jt[3];jt[3]=ur?Ch(ur,Xn,tn[4]):Xn,jt[4]=ur?sa(jt[3],_):tn[4]}(Xn=tn[5])&&(ur=jt[5],jt[5]=ur?Js(ur,Xn,tn[6]):Xn,jt[6]=ur?sa(jt[5],_):tn[6]),(Xn=tn[7])&&(jt[7]=Xn),Mn&x&&(jt[8]=jt[8]==null?tn[8]:zi(jt[8],tn[8])),jt[9]==null&&(jt[9]=tn[9]),jt[0]=tn[0],jt[1]=Xe}(On,wn),p=On[0],y=On[1],O=On[2],I=On[3],Y=On[4],!(Ae=On[9]=On[9]===f?Fe?0:p.length:Wo(On[9]-mt,0))&&24&y&&(y&=-25),y&&y!=1)Gn=y==8||y==S?function(jt,tn,ar){var Mn=nu(jt);return function Xe(){for(var vr=arguments.length,$r=mn(vr),Xn=vr,ur=bs(Xe);Xn--;)$r[Xn]=arguments[Xn];var ki=vr<3&&$r[0]!==ur&&$r[vr-1]!==ur?[]:sa($r,ur);return(vr-=ki.length)<ar?Ep(jt,tn,qc,Xe.placeholder,f,$r,ki,f,f,ar-vr):lo(this&&this!==Bo&&this instanceof Xe?Mn:jt,this,$r)}}(p,y,Ae):y!=A&&y!=33||Y.length?qc.apply(f,On):function(jt,tn,ar,Mn){var Xe=1&tn,vr=nu(jt);return function $r(){for(var Xn=-1,ur=arguments.length,ki=-1,Ba=Mn.length,Zl=mn(Ba+ur),Pi=this&&this!==Bo&&this instanceof $r?vr:jt;++ki<Ba;)Zl[ki]=Mn[ki];for(;ur--;)Zl[ki++]=arguments[++Xn];return lo(Pi,Xe?ar:this,Zl)}}(p,y,O,I);else var Gn=function(jt,tn,ar){var Mn=1&tn,Xe=nu(jt);return function vr(){return(this&&this!==Bo&&this instanceof vr?Xe:jt).apply(Mn?ar:this,arguments)}}(p,y,O);return Sd((wn?zc:Tp)(Gn,On),p,y)}function Sp(p,y,O,I){return p===f||Va(p,zt[O])&&!dn.call(I,O)?y:p}function xp(p,y,O,I,Y,ne){return Do(p)&&Do(y)&&(ne.set(y,p),ld(p,y,f,xp,ne),ne.delete(y)),p}function Ap(p){return W(p)?f:p}function Zu(p,y,O,I,Y,ne){var ve=1&O,Ae=p.length,Fe=y.length;if(Ae!=Fe&&!(ve&&Fe>Ae))return!1;var mt=ne.get(p),Et=ne.get(y);if(mt&&Et)return mt==y&&Et==p;var Wt=-1,wn=!0,On=2&O?new Bl:f;for(ne.set(p,y),ne.set(y,p);++Wt<Ae;){var Gn=p[Wt],jt=y[Wt];if(I)var tn=ve?I(jt,Gn,Wt,y,p,ne):I(Gn,jt,Wt,p,y,ne);if(tn!==f){if(tn)continue;wn=!1;break}if(On){if(!Nc(y,function(ar,Mn){if(!qa(On,Mn)&&(Gn===ar||Y(Gn,ar,O,I,ne)))return On.push(Mn)})){wn=!1;break}}else if(Gn!==jt&&!Y(Gn,jt,O,I,ne)){wn=!1;break}}return ne.delete(p),ne.delete(y),wn}function Sl(p){return tf(ef(p,f,nf),p+"")}function Kc(p){return id(p,Dt,fi)}function _d(p){return id(p,kt,ru)}var wd=Fc?function(p){return Fc.get(p)}:it;function gs(p){for(var y=p.name+"",O=hs[y],I=dn.call(hs,y)?O.length:0;I--;){var Y=O[I],ne=Y.func;if(ne==null||ne==p)return Y.name}return y}function bs(p){return(dn.call(ae,"placeholder")?ae:p).placeholder}function nr(){var p=ae.iteratee||yo;return p=p===yo?zl:p,arguments.length?p(arguments[0],arguments[1]):p}function Ju(p,y){var O,I,Y=p.__data__;return((I=typeof(O=y))=="string"||I=="number"||I=="symbol"||I=="boolean"?O!=="__proto__":O===null)?Y[typeof y=="string"?"string":"hash"]:Y.map}function Zc(p){for(var y=Dt(p),O=y.length;O--;){var I=y[O],Y=p[I];y[O]=[I,Y,ou(Y)]}return y}function il(p,y){var O=function(I,Y){return I==null?f:I[Y]}(p,y);return ms(O)?O:f}var fi=Jf?function(p){return p==null?[]:(p=R(p),Vi(Jf(p),function(y){return ri.call(p,y)}))}:We,ru=Jf?function(p){for(var y=[];p;)ui(y,fi(p)),p=Ka(p);return y}:We,No=To;function _s(p,y,O){for(var I=-1,Y=(y=Xr(y,p)).length,ne=!1;++I<Y;){var ve=al(y[I]);if(!(ne=p!=null&&O(p,ve)))break;p=p[ve]}return ne||++I!=Y?ne:!!(Y=p==null?0:p.length)&&vf(Y)&&$i(ve,Y)&&(br(p)||fu(p))}function ra(p){return typeof p.constructor!="function"||Pt(p)?{}:qs(Ka(p))}function Jc(p){return br(p)||fu(p)||!!(wl&&p&&p[wl])}function $i(p,y){var O=typeof p;return!!(y=y??D)&&(O=="number"||O!="symbol"&&Tn.test(p))&&p>-1&&p%1==0&&p<y}function Ho(p,y,O){if(!Do(O))return!1;var I=typeof y;return!!(I=="number"?pa(O)&&$i(y,O.length):I=="string"&&y in O)&&Va(O[y],p)}function xl(p,y){if(br(p))return!1;var O=typeof p;return!(O!="number"&&O!="symbol"&&O!="boolean"&&p!=null&&!vt(p))||tr.test(p)||!ie.test(p)||y!=null&&p in R(y)}function Al(p){var y=gs(p),O=ae[y];if(typeof O!="function"||!(y in Dr.prototype))return!1;if(p===O)return!0;var I=wd(O);return!!I&&p===I[0]}(Vu&&No(new Vu(new ArrayBuffer(1)))!=Be||Bu&&No(new Bu)!=Q||$c&&No($c.resolve())!=ce||Xs&&No(new Xs)!=we||ps&&No(new ps)!=Je)&&(No=function(p){var y=To(p),O=y==se?p.constructor:f,I=O?Es(O):"";if(I)switch(I){case Jv:return Be;case Uc:return Q;case Qv:return ce;case em:return we;case wh:return Je}return y});var Ed=En?Aa:Qe;function Pt(p){var y=p&&p.constructor;return p===(typeof y=="function"&&y.prototype||zt)}function ou(p){return p==p&&!Do(p)}function Qc(p,y){return function(O){return O!=null&&O[p]===y&&(y!==f||p in R(O))}}function ef(p,y,O){return y=Wo(y===f?p.length-1:y,0),function(){for(var I=arguments,Y=-1,ne=Wo(I.length-y,0),ve=mn(ne);++Y<ne;)ve[Y]=I[y+Y];Y=-1;for(var Ae=mn(y+1);++Y<y;)Ae[Y]=I[Y];return Ae[y]=O(ve),lo(p,this,Ae)}}function ws(p,y){return y.length<2?p:El(p,xa(y,0,-1))}function iu(p,y){for(var O=p.length,I=zi(y.length,O),Y=gi(p);I--;){var ne=y[I];p[I]=$i(ne,O)?Y[ne]:f}return p}function Od(p,y){if((y!=="constructor"||typeof p[y]!="function")&&y!="__proto__")return p[y]}var Tp=Mp(zc),au=lp||function(p,y){return Bo.setTimeout(p,y)},tf=Mp(nm);function Sd(p,y,O){var I=y+"";return tf(p,function(Y,ne){var ve=ne.length;if(!ve)return Y;var Ae=ve-1;return ne[Ae]=(ve>1?"& ":"")+ne[Ae],ne=ne.join(ve>2?", ":" "),Y.replace(Me,`{
/* [wrapped with `+ne+`] */
`)}(I,function(Y,ne){return Ui(L,function(ve){var Ae="_."+ve[0];ne&ve[1]&&!Qi(Y,Ae)&&Y.push(Ae)}),Y.sort()}(function(Y){var ne=Y.match(Ke);return ne?ne[1].split(Ie):[]}(I),O)))}function Mp(p){var y=0,O=0;return function(){var I=ed(),Y=16-(I-O);if(O=I,Y>0){if(++y>=800)return arguments[0]}else y=0;return p.apply(f,arguments)}}function Tl(p,y){var O=-1,I=p.length,Y=I-1;for(y=y===f?I:y;++O<y;){var ne=gp(O,Y),ve=p[ne];p[ne]=p[O],p[O]=ve}return p.length=y,p}var kp=function(p){var y=Kl(p,function(I){return O.size===500&&O.clear(),I}),O=y.cache;return y}(function(p){var y=[];return p.charCodeAt(0)===46&&y.push(""),p.replace(Rr,function(O,I,Y,ne){y.push(Y?ne.replace(Zt,"$1"):I||O)}),y});function al(p){if(typeof p=="string"||vt(p))return p;var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function Es(p){if(p!=null){try{return wr.call(p)}catch{}try{return p+""}catch{}}return""}function xd(p){if(p instanceof Dr)return p.clone();var y=new La(p.__wrapped__,p.__chain__);return y.__actions__=gi(p.__actions__),y.__index__=p.__index__,y.__values__=p.__values__,y}var jh=Tr(function(p,y){return ko(p)?tl(p,oi(y,1,ko,!0)):[]}),Ih=Tr(function(p,y){var O=Oo(y);return ko(O)&&(O=f),ko(p)?tl(p,oi(y,1,ko,!0),nr(O,2)):[]}),Lh=Tr(function(p,y){var O=Oo(y);return ko(O)&&(O=f),ko(p)?tl(p,oi(y,1,ko,!0),f,O):[]});function Pp(p,y,O){var I=p==null?0:p.length;if(!I)return-1;var Y=O==null?0:ft(O);return Y<0&&(Y=Wo(I+Y,0)),Bi(p,nr(y,3),Y)}function Ad(p,y,O){var I=p==null?0:p.length;if(!I)return-1;var Y=I-1;return O!==f&&(Y=ft(O),Y=O<0?Wo(I+Y,0):zi(Y,I-1)),Bi(p,nr(y,3),Y,!0)}function nf(p){return p!=null&&p.length?oi(p,1):[]}function $h(p){return p&&p.length?p[0]:f}var ll=Tr(function(p){var y=Fr(p,pd);return y.length&&y[0]===p[0]?Wc(y):[]}),Os=Tr(function(p){var y=Oo(p),O=Fr(p,pd);return y===Oo(O)?y=f:O.pop(),O.length&&O[0]===p[0]?Wc(O,nr(y,2)):[]}),im=Tr(function(p){var y=Oo(p),O=Fr(p,pd);return(y=typeof y=="function"?y:f)&&O.pop(),O.length&&O[0]===p[0]?Wc(O,f,y):[]});function Oo(p){var y=p==null?0:p.length;return y?p[y-1]:f}var rf=Tr(lu);function lu(p,y){return p&&p.length&&y&&y.length?sd(p,y):p}var of=Sl(function(p,y){var O=p==null?0:p.length,I=Vc(p,y);return yp(p,Fr(y,function(Y){return $i(Y,O)?+Y:Y}).sort(Hu)),I});function Qu(p){return p==null?p:Zv.call(p)}var af=Tr(function(p){return ys(oi(p,1,ko,!0))}),lf=Tr(function(p){var y=Oo(p);return ko(y)&&(y=f),ys(oi(p,1,ko,!0),nr(y,2))}),sf=Tr(function(p){var y=Oo(p);return y=typeof y=="function"?y:f,ys(oi(p,1,ko,!0),f,y)});function su(p){if(!p||!p.length)return[];var y=0;return p=Vi(p,function(O){if(ko(O))return y=Wo(O.length,y),!0}),$l(y,function(O){return Fr(p,Wi(O))})}function ql(p,y){if(!p||!p.length)return[];var O=su(p);return y==null?O:Fr(O,function(I){return lo(y,f,I)})}var bi=Tr(function(p,y){return ko(p)?tl(p,y):[]}),Td=Tr(function(p){return dd(Vi(p,ko))}),uf=Tr(function(p){var y=Oo(p);return ko(y)&&(y=f),dd(Vi(p,ko),nr(y,2))}),uu=Tr(function(p){var y=Oo(p);return y=typeof y=="function"?y:f,dd(Vi(p,ko),f,y)}),ec=Tr(su),Ti=Tr(function(p){var y=p.length,O=y>1?p[y-1]:f;return O=typeof O=="function"?(p.pop(),O):f,ql(p,O)});function Mo(p){var y=ae(p);return y.__chain__=!0,y}function cf(p,y){return y(p)}var Xi=Sl(function(p){var y=p.length,O=y?p[0]:0,I=this.__wrapped__,Y=function(ne){return Vc(ne,p)};return!(y>1||this.__actions__.length)&&I instanceof Dr&&$i(O)?((I=I.slice(O,+O+(y?1:0))).__actions__.push({func:cf,args:[Y],thisArg:f}),new La(I,this.__chain__).thru(function(ne){return y&&!ne.length&&ne.push(f),ne})):this.thru(Y)}),Un=Hl(function(p,y,O){dn.call(p,O)?++p[O]:el(p,O,1)}),Md=yd(Pp),ff=yd(Ad);function kd(p,y){return(br(p)?Ui:Eo)(p,nr(y,3))}function Rp(p,y){return(br(p)?Yf:Sh)(p,nr(y,3))}var Fh=Hl(function(p,y,O){dn.call(p,O)?p[O].push(y):el(p,O,[y])}),Ss=Tr(function(p,y,O){var I=-1,Y=typeof y=="function",ne=pa(p)?mn(p.length):[];return Eo(p,function(ve){ne[++I]=Y?lo(y,ve,O):Hi(ve,y,O)}),ne}),Uh=Hl(function(p,y,O){el(p,O,y)});function cu(p,y){return(br(p)?Fr:Sa)(p,nr(y,3))}var Vh=Hl(function(p,y,O){p[O?0:1].push(y)},function(){return[[],[]]}),Np=Tr(function(p,y){if(p==null)return[];var O=y.length;return O>1&&Ho(p,y[0],y[1])?y=[]:O>2&&Ho(y[0],y[1],y[2])&&(y=[y[0]]),Th(p,oi(y,1),[])}),df=bh||function(){return Bo.Date.now()};function Bh(p,y,O){return y=O?f:y,y=p&&y==null?p.length:y,ol(p,x,f,f,f,f,y)}function Ua(p,y){var O;if(typeof y!="function")throw new Ee(g);return p=ft(p),function(){return--p>0&&(O=y.apply(this,arguments)),p<=1&&(y=f),O}}var Yl=Tr(function(p,y,O){var I=1;if(O.length){var Y=sa(O,bs(Yl));I|=A}return ol(p,I,y,O,Y)}),xs=Tr(function(p,y,O){var I=3;if(O.length){var Y=sa(O,bs(xs));I|=A}return ol(y,I,p,O,Y)});function Vn(p,y,O){var I,Y,ne,ve,Ae,Fe,mt=0,Et=!1,Wt=!1,wn=!0;if(typeof p!="function")throw new Ee(g);function On(Xe){var vr=I,$r=Y;return I=Y=f,mt=Xe,ve=p.apply($r,vr)}function Gn(Xe){return mt=Xe,Ae=au(tn,y),Et?On(Xe):ve}function jt(Xe){var vr=Xe-Fe;return Fe===f||vr>=y||vr<0||Wt&&Xe-mt>=ne}function tn(){var Xe=df();if(jt(Xe))return ar(Xe);Ae=au(tn,function(vr){var $r=y-(vr-Fe);return Wt?zi($r,ne-(vr-mt)):$r}(Xe))}function ar(Xe){return Ae=f,wn&&I?On(Xe):(I=Y=f,ve)}function Mn(){var Xe=df(),vr=jt(Xe);if(I=arguments,Y=this,Fe=Xe,vr){if(Ae===f)return Gn(Fe);if(Wt)return vd(Ae),Ae=au(tn,y),On(Fe)}return Ae===f&&(Ae=au(tn,y)),ve}return y=Vt(y)||0,Do(O)&&(Et=!!O.leading,ne=(Wt="maxWait"in O)?Wo(Vt(O.maxWait)||0,y):ne,wn="trailing"in O?!!O.trailing:wn),Mn.cancel=function(){Ae!==f&&vd(Ae),mt=0,I=Fe=Y=Ae=f},Mn.flush=function(){return Ae===f?ve:ar(df())},Mn}var Cp=Tr(function(p,y){return fp(p,1,y)}),tc=Tr(function(p,y,O){return fp(p,Vt(y)||0,O)});function Kl(p,y){if(typeof p!="function"||y!=null&&typeof y!="function")throw new Ee(g);var O=function(){var I=arguments,Y=y?y.apply(this,I):I[0],ne=O.cache;if(ne.has(Y))return ne.get(Y);var ve=p.apply(this,I);return O.cache=ne.set(Y,ve)||ne,ve};return O.cache=new(Kl.Cache||Qa),O}function pf(p){if(typeof p!="function")throw new Ee(g);return function(){var y=arguments;switch(y.length){case 0:return!p.call(this);case 1:return!p.call(this,y[0]);case 2:return!p.call(this,y[0],y[1]);case 3:return!p.call(this,y[0],y[1],y[2])}return!p.apply(this,y)}}Kl.Cache=Qa;var qi=om(function(p,y){var O=(y=y.length==1&&br(y[0])?Fr(y[0],ho(nr())):Fr(oi(y,1),ho(nr()))).length;return Tr(function(I){for(var Y=-1,ne=zi(I.length,O);++Y<ne;)I[Y]=y[Y].call(this,I[Y]);return lo(p,this,I)})}),sl=Tr(function(p,y){var O=sa(y,bs(sl));return ol(p,A,f,y,O)}),Co=Tr(function(p,y){var O=sa(y,bs(Co));return ol(p,M,f,y,O)}),da=Sl(function(p,y){return ol(p,E,f,f,f,y)});function Va(p,y){return p===y||p!=p&&y!=y}var am=Ku(Ro),hf=Ku(function(p,y){return p>=y}),fu=ad(function(){return arguments}())?ad:function(p){return Xo(p)&&dn.call(p,"callee")&&!ri.call(p,"callee")},br=mn.isArray,Wh=kc?ho(kc):function(p){return Xo(p)&&To(p)==yt};function pa(p){return p!=null&&vf(p.length)&&!Aa(p)}function ko(p){return Xo(p)&&pa(p)}var oa=_h||Qe,Dp=qf?ho(qf):function(p){return Xo(p)&&To(p)==H};function Mi(p){if(!Xo(p))return!1;var y=To(p);return y==B||y=="[object DOMException]"||typeof p.message=="string"&&typeof p.name=="string"&&!W(p)}function Aa(p){if(!Do(p))return!1;var y=To(p);return y==G||y==Z||y=="[object AsyncFunction]"||y=="[object Proxy]"}function du(p){return typeof p=="number"&&p==ft(p)}function vf(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=D}function Do(p){var y=typeof p;return p!=null&&(y=="object"||y=="function")}function Xo(p){return p!=null&&typeof p=="object"}var Pd=Pc?ho(Pc):function(p){return Xo(p)&&No(p)==Q};function jp(p){return typeof p=="number"||Xo(p)&&To(p)==fe}function W(p){if(!Xo(p)||To(p)!=se)return!1;var y=Ka(p);if(y===null)return!0;var O=dn.call(y,"constructor")&&y.constructor;return typeof O=="function"&&O instanceof O&&wr.call(O)==ca}var le=Fi?ho(Fi):function(p){return Xo(p)&&To(p)==be},Oe=si?ho(si):function(p){return Xo(p)&&No(p)==we};function rt(p){return typeof p=="string"||!br(p)&&Xo(p)&&To(p)==me}function vt(p){return typeof p=="symbol"||Xo(p)&&To(p)==He}var et=ga?ho(ga):function(p){return Xo(p)&&vf(p.length)&&!!Yr[To(p)]},pt=Ku(Ol),Rt=Ku(function(p,y){return p<=y});function $t(p){if(!p)return[];if(pa(p))return rt(p)?ta(p):gi(p);if(Za&&p[Za])return function(O){for(var I,Y=[];!(I=O.next()).done;)Y.push(I.value);return Y}(p[Za]());var y=No(p);return(y==Q?ni:y==we?wa:_r)(p)}function Nt(p){return p?(p=Vt(p))===j||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}function ft(p){var y=Nt(p),O=y%1;return y==y?O?y-O:y:0}function Ht(p){return p?vs(ft(p),0,U):0}function Vt(p){if(typeof p=="number")return p;if(vt(p))return V;if(Do(p)){var y=typeof p.valueOf=="function"?p.valueOf():p;p=Do(y)?y+"":y}if(typeof p!="string")return p===0?p:+p;p=Ia(p);var O=Si.test(p);return O||ti.test(p)?ya(p.slice(2),O?2:8):li.test(p)?V:+p}function Ct(p){return nl(p,kt(p))}function Ot(p){return p==null?"":fa(p)}var Ze=Qs(function(p,y){if(Pt(y)||pa(y))nl(y,Dt(y),p);else for(var O in y)dn.call(y,O)&&Go(p,O,y[O])}),ct=Qs(function(p,y){nl(y,kt(y),p)}),It=Qs(function(p,y,O,I){nl(y,kt(y),p,I)}),Jt=Qs(function(p,y,O,I){nl(y,Dt(y),p,I)}),At=Sl(Vc),on=Tr(function(p,y){p=R(p);var O=-1,I=y.length,Y=I>2?y[2]:f;for(Y&&Ho(y[0],y[1],Y)&&(I=1);++O<I;)for(var ne=y[O],ve=kt(ne),Ae=-1,Fe=ve.length;++Ae<Fe;){var mt=ve[Ae],Et=p[mt];(Et===f||Va(Et,zt[mt])&&!dn.call(p,mt))&&(p[mt]=ne[mt])}return p}),Mt=Tr(function(p){return p.push(f,xp),lo(jn,f,p)});function Gt(p,y,O){var I=p==null?f:El(p,y);return I===f?O:I}function Tt(p,y){return p!=null&&_s(p,y,hp)}var qt=Yc(function(p,y,O){y!=null&&typeof y.toString!="function"&&(y=Lr.call(y)),p[y]=O},Mr(Kn)),Pn=Yc(function(p,y,O){y!=null&&typeof y.toString!="function"&&(y=Lr.call(y)),dn.call(p,y)?p[y].push(O):p[y]=[O]},nr),Bn=Tr(Hi);function Dt(p){return pa(p)?rd(p):Fa(p)}function kt(p){return pa(p)?rd(p,!0):xh(p)}var xt=Qs(function(p,y,O){ld(p,y,O)}),jn=Qs(function(p,y,O,I){ld(p,y,O,I)}),rr=Sl(function(p,y){var O={};if(p==null)return O;var I=!1;y=Fr(y,function(ne){return ne=Xr(ne,p),I||(I=ne.length>1),ne}),nl(p,_d(p),O),I&&(O=Oa(O,7,Ap));for(var Y=y.length;Y--;)cd(O,y[Y]);return O}),pn=Sl(function(p,y){return p==null?{}:function(O,I){return Mh(O,I,function(Y,ne){return Tt(O,ne)})}(p,y)});function sr(p,y){if(p==null)return{};var O=Fr(_d(p),function(I){return[I]});return y=nr(y),Mh(p,O,function(I,Y){return y(I,Y[0])})}var Wn=Op(Dt),ir=Op(kt);function _r(p){return p==null?[]:Bs(p,Dt(p))}var jo=Xl(function(p,y,O){return y=y.toLowerCase(),p+(O?Po(y):y)});function Po(p){return Jo(Ot(p).toLowerCase())}function or(p){return(p=Ot(p))&&p.replace(Fn,Dc).replace(gl,"")}var Zo=Xl(function(p,y,O){return p+(O?"-":"")+y.toLowerCase()}),so=Xl(function(p,y,O){return p+(O?" ":"")+y.toLowerCase()}),Io=md("toLowerCase"),qo=Xl(function(p,y,O){return p+(O?"_":"")+y.toLowerCase()}),ii=Xl(function(p,y,O){return p+(O?" ":"")+Jo(y)}),di=Xl(function(p,y,O){return p+(O?" ":"")+y.toUpperCase()}),Jo=md("toUpperCase");function mo(p,y,O){return p=Ot(p),(y=O?f:y)===f?function(I){return Mc.test(I)}(p)?function(I){return I.match(Du)||[]}(p):function(I){return I.match(ut)||[]}(p):p.match(y)||[]}var Yn=Tr(function(p,y){try{return lo(p,f,y)}catch(O){return Mi(O)?O:new Cr(O)}}),pi=Sl(function(p,y){return Ui(y,function(O){O=al(O),el(p,O,Yl(p[O],p))}),p});function Mr(p){return function(){return p}}var Dn=rl(),hr=rl(!0);function Kn(p){return p}function yo(p){return zl(typeof p=="function"?p:Oa(p,1))}var Ml=Tr(function(p,y){return function(O){return Hi(O,p,y)}}),So=Tr(function(p,y){return function(O){return Hi(p,O,y)}});function ye(p,y,O){var I=Dt(y),Y=Bc(y,I);O!=null||Do(y)&&(Y.length||!I.length)||(O=y,y=p,p=this,Y=Bc(y,Dt(y)));var ne=!(Do(O)&&"chain"in O&&!O.chain),ve=Aa(p);return Ui(Y,function(Ae){var Fe=y[Ae];p[Ae]=Fe,ve&&(p.prototype[Ae]=function(){var mt=this.__chain__;if(ne||mt){var Et=p(this.__wrapped__),Wt=Et.__actions__=gi(this.__actions__);return Wt.push({func:Fe,args:arguments,thisArg:p}),Et.__chain__=mt,Et}return Fe.apply(p,ui([this.value()],arguments))})}),p}function it(){}var tt=qu(Fr),un=qu(Kf),dr=qu(Nc);function he(p){return xl(p)?Wi(al(p)):function(y){return function(O){return El(O,y)}}(p)}var re=gd(),Re=gd(!0);function We(){return[]}function Qe(){return!1}var De=Xu(function(p,y){return p+y},0),Ne=bd("ceil"),Le=Xu(function(p,y){return p/y},1),pe=bd("floor"),ke,de=Xu(function(p,y){return p*y},1),Ge=bd("round"),ze=Xu(function(p,y){return p-y},0);return ae.after=function(p,y){if(typeof y!="function")throw new Ee(g);return p=ft(p),function(){if(--p<1)return y.apply(this,arguments)}},ae.ary=Bh,ae.assign=Ze,ae.assignIn=ct,ae.assignInWith=It,ae.assignWith=Jt,ae.at=At,ae.before=Ua,ae.bind=Yl,ae.bindAll=pi,ae.bindKey=xs,ae.castArray=function(){if(!arguments.length)return[];var p=arguments[0];return br(p)?p:[p]},ae.chain=Mo,ae.chunk=function(p,y,O){y=(O?Ho(p,y,O):y===f)?1:Wo(ft(y),0);var I=p==null?0:p.length;if(!I||y<1)return[];for(var Y=0,ne=0,ve=mn(Ic(I/y));Y<I;)ve[ne++]=xa(p,Y,Y+=y);return ve},ae.compact=function(p){for(var y=-1,O=p==null?0:p.length,I=0,Y=[];++y<O;){var ne=p[y];ne&&(Y[I++]=ne)}return Y},ae.concat=function(){var p=arguments.length;if(!p)return[];for(var y=mn(p-1),O=arguments[0],I=p;I--;)y[I-1]=arguments[I];return ui(br(O)?gi(O):[O],oi(y,1))},ae.cond=function(p){var y=p==null?0:p.length,O=nr();return p=y?Fr(p,function(I){if(typeof I[1]!="function")throw new Ee(g);return[O(I[0]),I[1]]}):[],Tr(function(I){for(var Y=-1;++Y<y;){var ne=p[Y];if(lo(ne[0],this,I))return lo(ne[1],this,I)}})},ae.conforms=function(p){return function(y){var O=Dt(y);return function(I){return cp(I,y,O)}}(Oa(p,1))},ae.constant=Mr,ae.countBy=Un,ae.create=function(p,y){var O=qs(p);return y==null?O:Gl(O,y)},ae.curry=function p(y,O,I){var Y=ol(y,8,f,f,f,f,f,O=I?f:O);return Y.placeholder=p.placeholder,Y},ae.curryRight=function p(y,O,I){var Y=ol(y,S,f,f,f,f,f,O=I?f:O);return Y.placeholder=p.placeholder,Y},ae.debounce=Vn,ae.defaults=on,ae.defaultsDeep=Mt,ae.defer=Cp,ae.delay=tc,ae.difference=jh,ae.differenceBy=Ih,ae.differenceWith=Lh,ae.drop=function(p,y,O){var I=p==null?0:p.length;return I?xa(p,(y=O||y===f?1:ft(y))<0?0:y,I):[]},ae.dropRight=function(p,y,O){var I=p==null?0:p.length;return I?xa(p,0,(y=I-(y=O||y===f?1:ft(y)))<0?0:y):[]},ae.dropRightWhile=function(p,y){return p&&p.length?fd(p,nr(y,3),!0,!0):[]},ae.dropWhile=function(p,y){return p&&p.length?fd(p,nr(y,3),!0):[]},ae.fill=function(p,y,O,I){var Y=p==null?0:p.length;return Y?(O&&typeof O!="number"&&Ho(p,y,O)&&(O=0,I=Y),function(ne,ve,Ae,Fe){var mt=ne.length;for((Ae=ft(Ae))<0&&(Ae=-Ae>mt?0:mt+Ae),(Fe=Fe===f||Fe>mt?mt:ft(Fe))<0&&(Fe+=mt),Fe=Ae>Fe?0:Ht(Fe);Ae<Fe;)ne[Ae++]=ve;return ne}(p,y,O,I)):[]},ae.filter=function(p,y){return(br(p)?Vi:Kr)(p,nr(y,3))},ae.flatMap=function(p,y){return oi(cu(p,y),1)},ae.flatMapDeep=function(p,y){return oi(cu(p,y),j)},ae.flatMapDepth=function(p,y,O){return O=O===f?1:ft(O),oi(cu(p,y),O)},ae.flatten=nf,ae.flattenDeep=function(p){return p!=null&&p.length?oi(p,j):[]},ae.flattenDepth=function(p,y){return p!=null&&p.length?oi(p,y=y===f?1:ft(y)):[]},ae.flip=function(p){return ol(p,512)},ae.flow=Dn,ae.flowRight=hr,ae.fromPairs=function(p){for(var y=-1,O=p==null?0:p.length,I={};++y<O;){var Y=p[y];I[Y[0]]=Y[1]}return I},ae.functions=function(p){return p==null?[]:Bc(p,Dt(p))},ae.functionsIn=function(p){return p==null?[]:Bc(p,kt(p))},ae.groupBy=Fh,ae.initial=function(p){return p!=null&&p.length?xa(p,0,-1):[]},ae.intersection=ll,ae.intersectionBy=Os,ae.intersectionWith=im,ae.invert=qt,ae.invertBy=Pn,ae.invokeMap=Ss,ae.iteratee=yo,ae.keyBy=Uh,ae.keys=Dt,ae.keysIn=kt,ae.map=cu,ae.mapKeys=function(p,y){var O={};return y=nr(y,3),Cn(p,function(I,Y,ne){el(O,y(I,Y,ne),I)}),O},ae.mapValues=function(p,y){var O={};return y=nr(y,3),Cn(p,function(I,Y,ne){el(O,Y,y(I,Y,ne))}),O},ae.matches=function(p){return vp(Oa(p,1))},ae.matchesProperty=function(p,y){return mp(p,Oa(y,1))},ae.memoize=Kl,ae.merge=xt,ae.mergeWith=jn,ae.method=Ml,ae.methodOf=So,ae.mixin=ye,ae.negate=pf,ae.nthArg=function(p){return p=ft(p),Tr(function(y){return Ah(y,p)})},ae.omit=rr,ae.omitBy=function(p,y){return sr(p,pf(nr(y)))},ae.once=function(p){return Ua(2,p)},ae.orderBy=function(p,y,O,I){return p==null?[]:(br(y)||(y=y==null?[]:[y]),br(O=I?f:O)||(O=O==null?[]:[O]),Th(p,y,O))},ae.over=tt,ae.overArgs=qi,ae.overEvery=un,ae.overSome=dr,ae.partial=sl,ae.partialRight=Co,ae.partition=Vh,ae.pick=pn,ae.pickBy=sr,ae.property=he,ae.propertyOf=function(p){return function(y){return p==null?f:El(p,y)}},ae.pull=rf,ae.pullAll=lu,ae.pullAllBy=function(p,y,O){return p&&p.length&&y&&y.length?sd(p,y,nr(O,2)):p},ae.pullAllWith=function(p,y,O){return p&&p.length&&y&&y.length?sd(p,y,f,O):p},ae.pullAt=of,ae.range=re,ae.rangeRight=Re,ae.rearg=da,ae.reject=function(p,y){return(br(p)?Vi:Kr)(p,pf(nr(y,3)))},ae.remove=function(p,y){var O=[];if(!p||!p.length)return O;var I=-1,Y=[],ne=p.length;for(y=nr(y,3);++I<ne;){var ve=p[I];y(ve,I,p)&&(O.push(ve),Y.push(I))}return yp(p,Y),O},ae.rest=function(p,y){if(typeof p!="function")throw new Ee(g);return Tr(p,y=y===f?y:ft(y))},ae.reverse=Qu,ae.sampleSize=function(p,y,O){return y=(O?Ho(p,y,O):y===f)?1:ft(y),(br(p)?sp:bp)(p,y)},ae.set=function(p,y,O){return p==null?p:Ys(p,y,O)},ae.setWith=function(p,y,O,I){return I=typeof I=="function"?I:f,p==null?p:Ys(p,y,O,I)},ae.shuffle=function(p){return(br(p)?Oh:kh)(p)},ae.slice=function(p,y,O){var I=p==null?0:p.length;return I?(O&&typeof O!="number"&&Ho(p,y,O)?(y=0,O=I):(y=y==null?0:ft(y),O=O===f?I:ft(O)),xa(p,y,O)):[]},ae.sortBy=Np,ae.sortedUniq=function(p){return p&&p.length?_p(p):[]},ae.sortedUniqBy=function(p,y){return p&&p.length?_p(p,nr(y,2)):[]},ae.split=function(p,y,O){return O&&typeof O!="number"&&Ho(p,y,O)&&(y=O=f),(O=O===f?U:O>>>0)?(p=Ot(p))&&(typeof y=="string"||y!=null&&!le(y))&&!(y=fa(y))&&Ya(p)?no(ta(p),0,O):p.split(y,O):[]},ae.spread=function(p,y){if(typeof p!="function")throw new Ee(g);return y=y==null?0:Wo(ft(y),0),Tr(function(O){var I=O[y],Y=no(O,0,y);return I&&ui(Y,I),lo(p,this,Y)})},ae.tail=function(p){var y=p==null?0:p.length;return y?xa(p,1,y):[]},ae.take=function(p,y,O){return p&&p.length?xa(p,0,(y=O||y===f?1:ft(y))<0?0:y):[]},ae.takeRight=function(p,y,O){var I=p==null?0:p.length;return I?xa(p,(y=I-(y=O||y===f?1:ft(y)))<0?0:y,I):[]},ae.takeRightWhile=function(p,y){return p&&p.length?fd(p,nr(y,3),!1,!0):[]},ae.takeWhile=function(p,y){return p&&p.length?fd(p,nr(y,3)):[]},ae.tap=function(p,y){return y(p),p},ae.throttle=function(p,y,O){var I=!0,Y=!0;if(typeof p!="function")throw new Ee(g);return Do(O)&&(I="leading"in O?!!O.leading:I,Y="trailing"in O?!!O.trailing:Y),Vn(p,y,{leading:I,maxWait:y,trailing:Y})},ae.thru=cf,ae.toArray=$t,ae.toPairs=Wn,ae.toPairsIn=ir,ae.toPath=function(p){return br(p)?Fr(p,al):vt(p)?[p]:gi(kp(Ot(p)))},ae.toPlainObject=Ct,ae.transform=function(p,y,O){var I=br(p),Y=I||oa(p)||et(p);if(y=nr(y,4),O==null){var ne=p&&p.constructor;O=Y?I?new ne:[]:Do(p)&&Aa(ne)?qs(Ka(p)):{}}return(Y?Ui:Cn)(p,function(ve,Ae,Fe){return y(O,ve,Ae,Fe)}),O},ae.unary=function(p){return Bh(p,1)},ae.union=af,ae.unionBy=lf,ae.unionWith=sf,ae.uniq=function(p){return p&&p.length?ys(p):[]},ae.uniqBy=function(p,y){return p&&p.length?ys(p,nr(y,2)):[]},ae.uniqWith=function(p,y){return y=typeof y=="function"?y:f,p&&p.length?ys(p,f,y):[]},ae.unset=function(p,y){return p==null||cd(p,y)},ae.unzip=su,ae.unzipWith=ql,ae.update=function(p,y,O){return p==null?p:Ks(p,y,hd(O))},ae.updateWith=function(p,y,O,I){return I=typeof I=="function"?I:f,p==null?p:Ks(p,y,hd(O),I)},ae.values=_r,ae.valuesIn=function(p){return p==null?[]:Bs(p,kt(p))},ae.without=bi,ae.words=mo,ae.wrap=function(p,y){return sl(hd(y),p)},ae.xor=Td,ae.xorBy=uf,ae.xorWith=uu,ae.zip=ec,ae.zipObject=function(p,y){return Xc(p||[],y||[],Go)},ae.zipObjectDeep=function(p,y){return Xc(p||[],y||[],Ys)},ae.zipWith=Ti,ae.entries=Wn,ae.entriesIn=ir,ae.extend=ct,ae.extendWith=It,ye(ae,ae),ae.add=De,ae.attempt=Yn,ae.camelCase=jo,ae.capitalize=Po,ae.ceil=Ne,ae.clamp=function(p,y,O){return O===f&&(O=y,y=f),O!==f&&(O=(O=Vt(O))==O?O:0),y!==f&&(y=(y=Vt(y))==y?y:0),vs(Vt(p),y,O)},ae.clone=function(p){return Oa(p,4)},ae.cloneDeep=function(p){return Oa(p,5)},ae.cloneDeepWith=function(p,y){return Oa(p,5,y=typeof y=="function"?y:f)},ae.cloneWith=function(p,y){return Oa(p,4,y=typeof y=="function"?y:f)},ae.conformsTo=function(p,y){return y==null||cp(p,y,Dt(y))},ae.deburr=or,ae.defaultTo=function(p,y){return p==null||p!=p?y:p},ae.divide=Le,ae.endsWith=function(p,y,O){p=Ot(p),y=fa(y);var I=p.length,Y=O=O===f?I:vs(ft(O),0,I);return(O-=y.length)>=0&&p.slice(O,Y)==y},ae.eq=Va,ae.escape=function(p){return(p=Ot(p))&&fn.test(p)?p.replace(Xt,Ko):p},ae.escapeRegExp=function(p){return(p=Ot(p))&&co.test(p)?p.replace(Gr,"\\$&"):p},ae.every=function(p,y,O){var I=br(p)?Kf:dp;return O&&Ho(p,y,O)&&(y=f),I(p,nr(y,3))},ae.find=Md,ae.findIndex=Pp,ae.findKey=function(p,y){return Xa(p,nr(y,3),Cn)},ae.findLast=ff,ae.findLastIndex=Ad,ae.findLastKey=function(p,y){return Xa(p,nr(y,3),po)},ae.floor=pe,ae.forEach=kd,ae.forEachRight=Rp,ae.forIn=function(p,y){return p==null?p:Ar(p,nr(y,3),kt)},ae.forInRight=function(p,y){return p==null?p:fo(p,nr(y,3),kt)},ae.forOwn=function(p,y){return p&&Cn(p,nr(y,3))},ae.forOwnRight=function(p,y){return p&&po(p,nr(y,3))},ae.get=Gt,ae.gt=am,ae.gte=hf,ae.has=function(p,y){return p!=null&&_s(p,y,pp)},ae.hasIn=Tt,ae.head=$h,ae.identity=Kn,ae.includes=function(p,y,O,I){p=pa(p)?p:_r(p),O=O&&!I?ft(O):0;var Y=p.length;return O<0&&(O=Wo(Y+O,0)),rt(p)?O<=Y&&p.indexOf(y,O)>-1:!!Y&&us(p,y,O)>-1},ae.indexOf=function(p,y,O){var I=p==null?0:p.length;if(!I)return-1;var Y=O==null?0:ft(O);return Y<0&&(Y=Wo(I+Y,0)),us(p,y,Y)},ae.inRange=function(p,y,O){return y=Nt(y),O===f?(O=y,y=0):O=Nt(O),function(I,Y,ne){return I>=zi(Y,ne)&&I<Wo(Y,ne)}(p=Vt(p),y,O)},ae.invoke=Bn,ae.isArguments=fu,ae.isArray=br,ae.isArrayBuffer=Wh,ae.isArrayLike=pa,ae.isArrayLikeObject=ko,ae.isBoolean=function(p){return p===!0||p===!1||Xo(p)&&To(p)==q},ae.isBuffer=oa,ae.isDate=Dp,ae.isElement=function(p){return Xo(p)&&p.nodeType===1&&!W(p)},ae.isEmpty=function(p){if(p==null)return!0;if(pa(p)&&(br(p)||typeof p=="string"||typeof p.splice=="function"||oa(p)||et(p)||fu(p)))return!p.length;var y=No(p);if(y==Q||y==we)return!p.size;if(Pt(p))return!Fa(p).length;for(var O in p)if(dn.call(p,O))return!1;return!0},ae.isEqual=function(p,y){return zu(p,y)},ae.isEqualWith=function(p,y,O){var I=(O=typeof O=="function"?O:f)?O(p,y):f;return I===f?zu(p,y,f,O):!!I},ae.isError=Mi,ae.isFinite=function(p){return typeof p=="number"&&Hs(p)},ae.isFunction=Aa,ae.isInteger=du,ae.isLength=vf,ae.isMap=Pd,ae.isMatch=function(p,y){return p===y||$a(p,y,Zc(y))},ae.isMatchWith=function(p,y,O){return O=typeof O=="function"?O:f,$a(p,y,Zc(y),O)},ae.isNaN=function(p){return jp(p)&&p!=+p},ae.isNative=function(p){if(Ed(p))throw new Cr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ms(p)},ae.isNil=function(p){return p==null},ae.isNull=function(p){return p===null},ae.isNumber=jp,ae.isObject=Do,ae.isObjectLike=Xo,ae.isPlainObject=W,ae.isRegExp=le,ae.isSafeInteger=function(p){return du(p)&&p>=-9007199254740991&&p<=D},ae.isSet=Oe,ae.isString=rt,ae.isSymbol=vt,ae.isTypedArray=et,ae.isUndefined=function(p){return p===f},ae.isWeakMap=function(p){return Xo(p)&&No(p)==Je},ae.isWeakSet=function(p){return Xo(p)&&To(p)=="[object WeakSet]"},ae.join=function(p,y){return p==null?"":Lc.call(p,y)},ae.kebabCase=Zo,ae.last=Oo,ae.lastIndexOf=function(p,y,O){var I=p==null?0:p.length;if(!I)return-1;var Y=I;return O!==f&&(Y=(Y=ft(O))<0?Wo(I+Y,0):zi(Y,I-1)),y==y?function(ne,ve,Ae){for(var Fe=Ae+1;Fe--;)if(ne[Fe]===ve)return Fe;return Fe}(p,y,Y):Bi(p,ba,Y,!0)},ae.lowerCase=so,ae.lowerFirst=Io,ae.lt=pt,ae.lte=Rt,ae.max=function(p){return p&&p.length?zo(p,Kn,Ro):f},ae.maxBy=function(p,y){return p&&p.length?zo(p,nr(y,2),Ro):f},ae.mean=function(p){return Nr(p,Kn)},ae.meanBy=function(p,y){return Nr(p,nr(y,2))},ae.min=function(p){return p&&p.length?zo(p,Kn,Ol):f},ae.minBy=function(p,y){return p&&p.length?zo(p,nr(y,2),Ol):f},ae.stubArray=We,ae.stubFalse=Qe,ae.stubObject=function(){return{}},ae.stubString=function(){return""},ae.stubTrue=function(){return!0},ae.multiply=de,ae.nth=function(p,y){return p&&p.length?Ah(p,ft(y)):f},ae.noConflict=function(){return Bo._===this&&(Bo._=Ao),this},ae.noop=it,ae.now=df,ae.pad=function(p,y,O){p=Ot(p);var I=(y=ft(y))?Gi(p):0;if(!y||I>=y)return p;var Y=(y-I)/2;return Yu(zs(Y),O)+p+Yu(Ic(Y),O)},ae.padEnd=function(p,y,O){p=Ot(p);var I=(y=ft(y))?Gi(p):0;return y&&I<y?p+Yu(y-I,O):p},ae.padStart=function(p,y,O){p=Ot(p);var I=(y=ft(y))?Gi(p):0;return y&&I<y?Yu(y-I,O)+p:p},ae.parseInt=function(p,y,O){return O||y==null?y=0:y&&(y=+y),td(Ot(p).replace($n,""),y||0)},ae.random=function(p,y,O){if(O&&typeof O!="boolean"&&Ho(p,y,O)&&(y=O=f),O===f&&(typeof y=="boolean"?(O=y,y=f):typeof p=="boolean"&&(O=p,p=f)),p===f&&y===f?(p=0,y=1):(p=Nt(p),y===f?(y=p,p=0):y=Nt(y)),p>y){var I=p;p=y,y=I}if(O||p%1||y%1){var Y=Uu();return zi(p+Y*(y-p+ls("1e-"+((Y+"").length-1))),y)}return gp(p,y)},ae.reduce=function(p,y,O){var I=br(p)?Lu:yi,Y=arguments.length<3;return I(p,nr(y,4),O,Y,Eo)},ae.reduceRight=function(p,y,O){var I=br(p)?Zf:yi,Y=arguments.length<3;return I(p,nr(y,4),O,Y,Sh)},ae.repeat=function(p,y,O){return y=(O?Ho(p,y,O):y===f)?1:ft(y),Gc(Ot(p),y)},ae.replace=function(){var p=arguments,y=Ot(p[0]);return p.length<3?y:y.replace(p[1],p[2])},ae.result=function(p,y,O){var I=-1,Y=(y=Xr(y,p)).length;for(Y||(Y=1,p=f);++I<Y;){var ne=p==null?f:p[al(y[I])];ne===f&&(I=Y,ne=O),p=Aa(ne)?ne.call(p):ne}return p},ae.round=Ge,ae.runInContext=dt,ae.sample=function(p){return(br(p)?od:tm)(p)},ae.size=function(p){if(p==null)return 0;if(pa(p))return rt(p)?Gi(p):p.length;var y=No(p);return y==Q||y==we?p.size:Fa(p).length},ae.snakeCase=qo,ae.some=function(p,y,O){var I=br(p)?Nc:rm;return O&&Ho(p,y,O)&&(y=f),I(p,nr(y,3))},ae.sortedIndex=function(p,y){return Hc(p,y)},ae.sortedIndexBy=function(p,y,O){return ud(p,y,nr(O,2))},ae.sortedIndexOf=function(p,y){var O=p==null?0:p.length;if(O){var I=Hc(p,y);if(I<O&&Va(p[I],y))return I}return-1},ae.sortedLastIndex=function(p,y){return Hc(p,y,!0)},ae.sortedLastIndexBy=function(p,y,O){return ud(p,y,nr(O,2),!0)},ae.sortedLastIndexOf=function(p,y){if(p!=null&&p.length){var O=Hc(p,y,!0)-1;if(Va(p[O],y))return O}return-1},ae.startCase=ii,ae.startsWith=function(p,y,O){return p=Ot(p),O=O==null?0:vs(ft(O),0,p.length),y=fa(y),p.slice(O,O+y.length)==y},ae.subtract=ze,ae.sum=function(p){return p&&p.length?cs(p,Kn):0},ae.sumBy=function(p,y){return p&&p.length?cs(p,nr(y,2)):0},ae.template=function(p,y,O){var I=ae.templateSettings;O&&Ho(p,y,O)&&(y=f),p=Ot(p),y=It({},y,I,Sp);var Y,ne,ve=It({},y.imports,I.imports,Sp),Ae=Dt(ve),Fe=Bs(ve,Ae),mt=0,Et=y.interpolate||Hn,Wt="__p += '",wn=z((y.escape||Hn).source+"|"+Et.source+"|"+(Et===Jn?Nn:Hn).source+"|"+(y.evaluate||Hn).source+"|$","g"),On="//# sourceURL="+(dn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zf+"]")+`
`;p.replace(wn,function(tn,ar,Mn,Xe,vr,$r){return Mn||(Mn=Xe),Wt+=p.slice(mt,$r).replace(lr,Ws),ar&&(Y=!0,Wt+=`' +
__e(`+ar+`) +
'`),vr&&(ne=!0,Wt+=`';
`+vr+`;
__p += '`),Mn&&(Wt+=`' +
((__t = (`+Mn+`)) == null ? '' : __t) +
'`),mt=$r+tn.length,tn}),Wt+=`';
`;var Gn=dn.call(y,"variable")&&y.variable;if(Gn){if(nn.test(Gn))throw new Cr("Invalid `variable` option passed into `_.template`")}else Wt=`with (obj) {
`+Wt+`
}
`;Wt=(ne?Wt.replace(ht,""):Wt).replace(wt,"$1").replace(rn,"$1;"),Wt="function("+(Gn||"obj")+`) {
`+(Gn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Wt+`return __p
}`;var jt=Yn(function(){return vo(Ae,On+"return "+Wt).apply(f,Fe)});if(jt.source=Wt,Mi(jt))throw jt;return jt},ae.times=function(p,y){if((p=ft(p))<1||p>D)return[];var O=U,I=zi(p,U);y=nr(y),p-=U;for(var Y=$l(I,y);++O<p;)y(O);return Y},ae.toFinite=Nt,ae.toInteger=ft,ae.toLength=Ht,ae.toLower=function(p){return Ot(p).toLowerCase()},ae.toNumber=Vt,ae.toSafeInteger=function(p){return p?vs(ft(p),-9007199254740991,D):p===0?p:0},ae.toString=Ot,ae.toUpper=function(p){return Ot(p).toUpperCase()},ae.trim=function(p,y,O){if((p=Ot(p))&&(O||y===f))return Ia(p);if(!p||!(y=fa(y)))return p;var I=ta(p),Y=ta(y);return no(I,_a(I,Y),Cc(I,Y)+1).join("")},ae.trimEnd=function(p,y,O){if((p=Ot(p))&&(O||y===f))return p.slice(0,ci(p)+1);if(!p||!(y=fa(y)))return p;var I=ta(p);return no(I,0,Cc(I,ta(y))+1).join("")},ae.trimStart=function(p,y,O){if((p=Ot(p))&&(O||y===f))return p.replace($n,"");if(!p||!(y=fa(y)))return p;var I=ta(p);return no(I,_a(I,ta(y))).join("")},ae.truncate=function(p,y){var O=30,I="...";if(Do(y)){var Y="separator"in y?y.separator:Y;O="length"in y?ft(y.length):O,I="omission"in y?fa(y.omission):I}var ne=(p=Ot(p)).length;if(Ya(p)){var ve=ta(p);ne=ve.length}if(O>=ne)return p;var Ae=O-Gi(I);if(Ae<1)return I;var Fe=ve?no(ve,0,Ae).join(""):p.slice(0,Ae);if(Y===f)return Fe+I;if(ve&&(Ae+=Fe.length-Ae),le(Y)){if(p.slice(Ae).search(Y)){var mt,Et=Fe;for(Y.global||(Y=z(Y.source,Ot(Or.exec(Y))+"g")),Y.lastIndex=0;mt=Y.exec(Et);)var Wt=mt.index;Fe=Fe.slice(0,Wt===f?Ae:Wt)}}else if(p.indexOf(fa(Y),Ae)!=Ae){var wn=Fe.lastIndexOf(Y);wn>-1&&(Fe=Fe.slice(0,wn))}return Fe+I},ae.unescape=function(p){return(p=Ot(p))&&nt.test(p)?p.replace(an,ua):p},ae.uniqueId=function(p){var y=++Hr;return Ot(p)+y},ae.upperCase=di,ae.upperFirst=Jo,ae.each=kd,ae.eachRight=Rp,ae.first=$h,ye(ae,(ke={},Cn(ae,function(p,y){dn.call(ae.prototype,y)||(ke[y]=p)}),ke),{chain:!1}),ae.VERSION="4.17.21",Ui(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){ae[p].placeholder=ae}),Ui(["drop","take"],function(p,y){Dr.prototype[p]=function(O){O=O===f?1:Wo(ft(O),0);var I=this.__filtered__&&!y?new Dr(this):this.clone();return I.__filtered__?I.__takeCount__=zi(O,I.__takeCount__):I.__views__.push({size:zi(O,U),type:p+(I.__dir__<0?"Right":"")}),I},Dr.prototype[p+"Right"]=function(O){return this.reverse()[p](O).reverse()}}),Ui(["filter","map","takeWhile"],function(p,y){var O=y+1,I=O==1||O==3;Dr.prototype[p]=function(Y){var ne=this.clone();return ne.__iteratees__.push({iteratee:nr(Y,3),type:O}),ne.__filtered__=ne.__filtered__||I,ne}}),Ui(["head","last"],function(p,y){var O="take"+(y?"Right":"");Dr.prototype[p]=function(){return this[O](1).value()[0]}}),Ui(["initial","tail"],function(p,y){var O="drop"+(y?"":"Right");Dr.prototype[p]=function(){return this.__filtered__?new Dr(this):this[O](1)}}),Dr.prototype.compact=function(){return this.filter(Kn)},Dr.prototype.find=function(p){return this.filter(p).head()},Dr.prototype.findLast=function(p){return this.reverse().find(p)},Dr.prototype.invokeMap=Tr(function(p,y){return typeof p=="function"?new Dr(this):this.map(function(O){return Hi(O,p,y)})}),Dr.prototype.reject=function(p){return this.filter(pf(nr(p)))},Dr.prototype.slice=function(p,y){p=ft(p);var O=this;return O.__filtered__&&(p>0||y<0)?new Dr(O):(p<0?O=O.takeRight(-p):p&&(O=O.drop(p)),y!==f&&(O=(y=ft(y))<0?O.dropRight(-y):O.take(y-p)),O)},Dr.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Dr.prototype.toArray=function(){return this.take(U)},Cn(Dr.prototype,function(p,y){var O=/^(?:filter|find|map|reject)|While$/.test(y),I=/^(?:head|last)$/.test(y),Y=ae[I?"take"+(y=="last"?"Right":""):y],ne=I||/^find/.test(y);Y&&(ae.prototype[y]=function(){var ve=this.__wrapped__,Ae=I?[1]:arguments,Fe=ve instanceof Dr,mt=Ae[0],Et=Fe||br(ve),Wt=function(ar){var Mn=Y.apply(ae,ui([ar],Ae));return I&&wn?Mn[0]:Mn};Et&&O&&typeof mt=="function"&&mt.length!=1&&(Fe=Et=!1);var wn=this.__chain__,On=!!this.__actions__.length,Gn=ne&&!wn,jt=Fe&&!On;if(!ne&&Et){ve=jt?ve:new Dr(this);var tn=p.apply(ve,Ae);return tn.__actions__.push({func:cf,args:[Wt],thisArg:f}),new La(tn,wn)}return Gn&&jt?p.apply(this,Ae):(tn=this.thru(Wt),Gn?I?tn.value()[0]:tn.value():tn)})}),Ui(["pop","push","shift","sort","splice","unshift"],function(p){var y=Ye[p],O=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",I=/^(?:pop|shift)$/.test(p);ae.prototype[p]=function(){var Y=arguments;if(I&&!this.__chain__){var ne=this.value();return y.apply(br(ne)?ne:[],Y)}return this[O](function(ve){return y.apply(br(ve)?ve:[],Y)})}}),Cn(Dr.prototype,function(p,y){var O=ae[y];if(O){var I=O.name+"";dn.call(hs,I)||(hs[I]=[]),hs[I].push({name:y,func:O})}}),hs[qc(f,2).name]=[{name:"wrapper",func:f}],Dr.prototype.clone=function(){var p=new Dr(this.__wrapped__);return p.__actions__=gi(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=gi(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=gi(this.__views__),p},Dr.prototype.reverse=function(){if(this.__filtered__){var p=new Dr(this);p.__dir__=-1,p.__filtered__=!0}else(p=this.clone()).__dir__*=-1;return p},Dr.prototype.value=function(){var p=this.__wrapped__.value(),y=this.__dir__,O=br(p),I=y<0,Y=O?p.length:0,ne=function($r,Xn,ur){for(var ki=-1,Ba=ur.length;++ki<Ba;){var Zl=ur[ki],Pi=Zl.size;switch(Zl.type){case"drop":$r+=Pi;break;case"dropRight":Xn-=Pi;break;case"take":Xn=zi(Xn,$r+Pi);break;case"takeRight":$r=Wo($r,Xn-Pi)}}return{start:$r,end:Xn}}(0,Y,this.__views__),ve=ne.start,Ae=ne.end,Fe=Ae-ve,mt=I?Ae:ve-1,Et=this.__iteratees__,Wt=Et.length,wn=0,On=zi(Fe,this.__takeCount__);if(!O||!I&&Y==Fe&&On==Fe)return wp(p,this.__actions__);var Gn=[];e:for(;Fe--&&wn<On;){for(var jt=-1,tn=p[mt+=y];++jt<Wt;){var ar=Et[jt],Mn=ar.iteratee,Xe=ar.type,vr=Mn(tn);if(Xe==2)tn=vr;else if(!vr){if(Xe==1)continue e;break e}}Gn[wn++]=tn}return Gn},ae.prototype.at=Xi,ae.prototype.chain=function(){return Mo(this)},ae.prototype.commit=function(){return new La(this.value(),this.__chain__)},ae.prototype.next=function(){this.__values__===f&&(this.__values__=$t(this.value()));var p=this.__index__>=this.__values__.length;return{done:p,value:p?f:this.__values__[this.__index__++]}},ae.prototype.plant=function(p){for(var y,O=this;O instanceof Vl;){var I=xd(O);I.__index__=0,I.__values__=f,y?Y.__wrapped__=I:y=I;var Y=I;O=O.__wrapped__}return Y.__wrapped__=p,y},ae.prototype.reverse=function(){var p=this.__wrapped__;if(p instanceof Dr){var y=p;return this.__actions__.length&&(y=new Dr(this)),(y=y.reverse()).__actions__.push({func:cf,args:[Qu],thisArg:f}),new La(y,this.__chain__)}return this.thru(Qu)},ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=function(){return wp(this.__wrapped__,this.__actions__)},ae.prototype.first=ae.prototype.head,Za&&(ae.prototype[Za]=function(){return this}),ae}();Bo._=Ii,(v=(function(){return Ii}).call(a,r,a,c))===f||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var s=r(7),c=r(34),v=r(33),f=r(87),g=r(62),b=r(174),_=r(28),S=s.TypeError,A=_("toPrimitive");n.exports=function(M,x){if(!v(M)||f(M))return M;var E,j=g(M,A);if(j){if(x===void 0&&(x="default"),E=c(j,M,x),!v(E)||f(E))return E;throw S("Can't convert object to primitive value")}return x===void 0&&(x="number"),b(M,x)}},function(n,a,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var s=r(35),c=r(135),v=r(50),f=r(38);n.exports=function(g,b){for(var _=c(b),S=f.f,A=v.f,M=0;M<_.length;M++){var x=_[M];s(g,x)||S(g,x,A(b,x))}}},function(n,a,r){var s=r(46),c=r(15),v=r(74),f=r(112),g=r(32),b=c([].concat);n.exports=s("Reflect","ownKeys")||function(_){var S=v.f(g(_)),A=f.f;return A?b(S,A(_)):S}},function(n,a,r){var s=r(15),c=r(35),v=r(41),f=r(137).indexOf,g=r(72),b=s([].push);n.exports=function(_,S){var A,M=v(_),x=0,E=[];for(A in M)!c(g,A)&&c(M,A)&&b(E,A);for(;S.length>x;)c(M,A=S[x++])&&(~f(E,A)||b(E,A));return E}},function(n,a,r){var s=r(41),c=r(75),v=r(45),f=function(g){return function(b,_,S){var A,M=s(b),x=v(M),E=c(S,x);if(g&&_!=_){for(;x>E;)if((A=M[E++])!=A)return!0}else for(;x>E;E++)if((g||E in M)&&M[E]===_)return g||E||0;return!g&&-1}};n.exports={includes:f(!0),indexOf:f(!1)}},function(n,a,r){var s=r(46);n.exports=s("document","documentElement")},function(n,a,r){var s=r(51),c=r(41),v=r(74).f,f=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(b){return g&&s(b)=="Window"?function(_){try{return v(_)}catch{return f(g)}}(b):v(c(b))}},function(n,a,r){var s=r(28);a.f=s},function(n,a,r){var s=r(177),c=r(35),v=r(140),f=r(38).f;n.exports=function(g){var b=s.Symbol||(s.Symbol={});c(b,g)||f(b,g,{value:v.f(g)})}},function(n,a,r){var s,c,v,f=r(18),g=r(30),b=r(60),_=r(101),S=r(42),A=r(28),M=r(71),x=A("iterator"),E=!1;[].keys&&("next"in(v=[].keys())?(c=_(_(v)))!==Object.prototype&&(s=c):E=!0),s==null||f(function(){var j={};return s[x].call(j)!==j})?s={}:M&&(s=b(s)),g(s[x])||S(s,x,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:E}},function(n,a,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var s=r(16),c=r(15),v=r(72),f=r(33),g=r(35),b=r(38).f,_=r(74),S=r(139),A=r(183),M=r(90),x=r(185),E=!1,j=M("meta"),D=0,V=function(L){b(L,j,{value:{objectID:"O"+D++,weakData:{}}})},U=n.exports={enable:function(){U.enable=function(){},E=!0;var L=_.f,F=c([].splice),X={};X[j]=1,L(X).length&&(_.f=function(q){for(var H=L(q),B=0,G=H.length;B<G;B++)if(H[B]===j){F(H,B,1);break}return H},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:S.f}))},fastKey:function(L,F){if(!f(L))return typeof L=="symbol"?L:(typeof L=="string"?"S":"P")+L;if(!g(L,j)){if(!A(L))return"F";if(!F)return"E";V(L)}return L[j].objectID},getWeakData:function(L,F){if(!g(L,j)){if(!A(L))return!0;if(!F)return!1;V(L)}return L[j].weakData},onFreeze:function(L){return x&&E&&A(L)&&!g(L,j)&&V(L),L}};v[j]=!0},function(n,a,r){var s=r(28),c=r(80),v=s("iterator"),f=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||f[v]===g)}},function(n,a,r){var s=r(7),c=r(34),v=r(56),f=r(32),g=r(88),b=r(118),_=s.TypeError;n.exports=function(S,A){var M=arguments.length<2?b(S):A;if(v(M))return f(c(M,S));throw _(g(S)+" is not iterable")}},function(n,a,r){var s=r(34),c=r(32),v=r(62);n.exports=function(f,g,b){var _,S;c(f);try{if(!(_=v(f,"return"))){if(g==="throw")throw b;return b}_=s(_,f)}catch(A){S=!0,_=A}if(g==="throw")throw b;if(S)throw _;return c(_),b}},function(n,a,r){var s=r(30),c=r(33),v=r(102);n.exports=function(f,g,b){var _,S;return v&&s(_=g.constructor)&&_!==b&&c(S=_.prototype)&&S!==b.prototype&&v(f,S),f}},function(n,a,r){var s=r(42);n.exports=function(c,v,f){for(var g in v)s(c,g,v[g],f);return c}},function(n,a,r){var s=r(46),c=r(38),v=r(28),f=r(36),g=v("species");n.exports=function(b){var _=s(b),S=c.f;f&&_&&!_[g]&&S(_,g,{configurable:!0,get:function(){return this}})}},function(n,a,r){var s=r(15),c=r(59),v=r(39),f=r(44),g=s("".charAt),b=s("".charCodeAt),_=s("".slice),S=function(A){return function(M,x){var E,j,D=v(f(M)),V=c(x),U=D.length;return V<0||V>=U?A?"":void 0:(E=b(D,V))<55296||E>56319||V+1===U||(j=b(D,V+1))<56320||j>57343?A?g(D,V):E:A?_(D,V,V+2):j-56320+(E-55296<<10)+65536}};n.exports={codeAt:S(!1),charAt:S(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,a,r){var s=r(18),c=r(7).RegExp,v=s(function(){var b=c("a","y");return b.lastIndex=2,b.exec("abcd")!=null}),f=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var b=c("^r","gy");return b.lastIndex=2,b.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:f,UNSUPPORTED_Y:v}},function(n,a,r){var s=r(16),c=r(79).find,v=r(100),f="find",g=!0;f in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),v(f)},function(n,a,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(f){return c(this,f,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,a,r){var s=r(16),c=r(15),v=r(197),f=r(44),g=r(39),b=r(198),_=c("".indexOf);s({target:"String",proto:!0,forced:!b("includes")},{includes:function(S){return!!~_(g(f(this)),g(v(S)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(f){var g;return s(f)&&((g=f[v])!==void 0?!!g:c(f)=="RegExp")}},function(n,a,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,a,r){var s=r(15),c=r(44),v=r(39),f=r(162),g=s("".replace),b="["+f+"]",_=RegExp("^"+b+b+"*"),S=RegExp(b+b+"*$"),A=function(M){return function(x){var E=v(c(x));return 1&M&&(E=g(E,_,"")),2&M&&(E=g(E,S,"")),E}};n.exports={start:A(1),end:A(2),trim:A(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function g(D){if(r===setTimeout)return setTimeout(D,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(D,0);try{return r(D,0)}catch{try{return r.call(null,D,0)}catch{return r.call(this,D,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:f}catch{s=f}})();var b,_=[],S=!1,A=-1;function M(){S&&b&&(S=!1,b.length?_=b.concat(_):A=-1,_.length&&x())}function x(){if(!S){var D=g(M);S=!0;for(var V=_.length;V;){for(b=_,_=[];++A<V;)b&&b[A].run();A=-1,V=_.length}b=null,S=!1,function(U){if(s===clearTimeout)return clearTimeout(U);if((s===f||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(U);try{s(U)}catch{try{return s.call(null,U)}catch{return s.call(this,U)}}}(D)}}function E(D,V){this.fun=D,this.array=V}function j(){}c.nextTick=function(D){var V=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)V[U-1]=arguments[U];_.push(new E(D,V)),_.length!==1||S||g(x)},E.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=j,c.addListener=j,c.once=j,c.off=j,c.removeListener=j,c.removeAllListeners=j,c.emit=j,c.prependListener=j,c.prependOnceListener=j,c.listeners=function(D){return[]},c.binding=function(D){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(D){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(f,g){var b,_=s(f).constructor;return _===void 0||(b=s(_)[v])==null?g:c(b)}},function(n,a,r){var s=r(7),c=r(99),v=r(88),f=s.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not a constructor")}},function(n,a,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var s=r(34),c=r(123),v=r(32),f=r(94),g=r(39),b=r(44),_=r(62),S=r(124),A=r(125);c("match",function(M,x,E){return[function(j){var D=b(this),V=j==null?void 0:_(j,M);return V?s(V,j,D):new RegExp(j)[M](g(D))},function(j){var D=v(this),V=g(j),U=E(x,D,V);if(U.done)return U.value;if(!D.global)return A(D,V);var L=D.unicode;D.lastIndex=0;for(var F,X=[],q=0;(F=A(D,V))!==null;){var H=g(F[0]);X[q]=H,H===""&&(D.lastIndex=S(V,f(D.lastIndex),L)),q++}return q===0?null:X}]})},function(n,a,r){var s,c,v,f,g=r(7),b=r(76),_=r(64),S=r(30),A=r(35),M=r(18),x=r(138),E=r(98),j=r(91),D=r(169),V=r(128),U=g.setImmediate,L=g.clearImmediate,F=g.process,X=g.Dispatch,q=g.Function,H=g.MessageChannel,B=g.String,G=0,Z={},Q="onreadystatechange";try{s=g.location}catch{}var fe=function(we){if(A(Z,we)){var me=Z[we];delete Z[we],me()}},se=function(we){return function(){fe(we)}},ce=function(we){fe(we.data)},be=function(we){g.postMessage(B(we),s.protocol+"//"+s.host)};U&&L||(U=function(we){var me=E(arguments,1);return Z[++G]=function(){b(S(we)?we:q(we),void 0,me)},c(G),G},L=function(we){delete Z[we]},V?c=function(we){F.nextTick(se(we))}:X&&X.now?c=function(we){X.now(se(we))}:H&&!D?(f=(v=new H).port2,v.port1.onmessage=ce,c=_(f.postMessage,f)):g.addEventListener&&S(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!M(be)?(c=be,g.addEventListener("message",ce,!1)):c=Q in j("script")?function(we){x.appendChild(j("script")).onreadystatechange=function(){x.removeChild(this),fe(we)}}:function(we){setTimeout(se(we),0)}),n.exports={set:U,clear:L}},function(n,a,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,a,r){var s=r(56),c=function(v){var f,g;this.promise=new v(function(b,_){if(f!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");f=b,g=_}),this.resolve=s(f),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(s){r.d(a,"a",function(){return F});var c=r(1);function v(H){throw new Error("[mobx-utils] "+H)}function f(H,B){B===void 0&&(B="Illegal state"),H||v(B)}var g=function(H){return H&&H!==Object.prototype&&Object.getOwnPropertyNames(H).concat(g(Object.getPrototypeOf(H))||[])},b=function(H){return function(B){var G=g(B);return G.filter(function(Z,Q){return G.indexOf(Z)===Q})}(H).filter(function(B){return B!=="constructor"&&!~B.indexOf("__")})},_="pending",S="fulfilled",A="rejected";function M(H){switch(this.state){case _:return H.pending&&H.pending(this.value);case A:return H.rejected&&H.rejected(this.value);case S:return H.fulfilled?H.fulfilled(this.value):this.value}}function x(H,B){if(f(arguments.length<=2,"fromPromise expects up to two arguments"),f(typeof H=="function"||typeof H=="object"&&H&&typeof H.then=="function","Please pass a promise or function to fromPromise"),H.isPromiseBasedObservable===!0)return H;typeof H=="function"&&(H=new Promise(H));var G=H;H.then(Object(c.k)("observableFromPromise-resolve",function(Q){G.value=Q,G.state=S}),Object(c.k)("observableFromPromise-reject",function(Q){G.value=Q,G.state=A})),G.isPromiseBasedObservable=!0,G.case=M;var Z=B&&B.state===S?B.value:void 0;return Object(c.q)(G,{value:Z,state:_},{},{deep:!1}),G}(function(H){H.reject=Object(c.k)("fromPromise.reject",function(B){var G=H(Promise.reject(B));return G.state=A,G.value=B,G}),H.resolve=Object(c.k)("fromPromise.resolve",function(B){B===void 0&&(B=void 0);var G=H(Promise.resolve(B));return G.state=S,G.value=B,G})})(x||(x={}));var E=function(H,B,G,Z){var Q,fe=arguments.length,se=fe<3?B:Z===null?Z=Object.getOwnPropertyDescriptor(B,G):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(H,B,G,Z);else for(var ce=H.length-1;ce>=0;ce--)(Q=H[ce])&&(se=(fe<3?Q(se):fe>3?Q(B,G,se):Q(B,G))||se);return fe>3&&se&&Object.defineProperty(B,G,se),se};(function(){function H(B,G){var Z=this;Object(c.G)(function(){Z.current=G,Z.subscription=B.subscribe(Z)})}H.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},H.prototype.next=function(B){this.current=B},H.prototype.complete=function(){this.dispose()},H.prototype.error=function(B){this.current=B,this.dispose()},E([c.C.ref],H.prototype,"current",void 0),E([c.k.bound],H.prototype,"next",null),E([c.k.bound],H.prototype,"complete",null),E([c.k.bound],H.prototype,"error",null)})();var j=function(){return j=Object.assign||function(H){for(var B,G=1,Z=arguments.length;G<Z;G++)for(var Q in B=arguments[G])Object.prototype.hasOwnProperty.call(B,Q)&&(H[Q]=B[Q]);return H},j.apply(this,arguments)},D=function(H,B,G,Z){var Q,fe=arguments.length,se=fe<3?B:Z===null?Z=Object.getOwnPropertyDescriptor(B,G):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(H,B,G,Z);else for(var ce=H.length-1;ce>=0;ce--)(Q=H[ce])&&(se=(fe<3?Q(se):fe>3?Q(B,G,se):Q(B,G))||se);return fe>3&&se&&Object.defineProperty(B,G,se),se},V=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function H(B){var G=this;this.model=B,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(Z){return G.localValues.has(Z)},f(Object(c.A)(B),"createViewModel expects an observable object"),b(B).forEach(function(Z){if(Z!==c.a&&Z!=="__mobxDidRunLazyInitializers"){if(f(V.indexOf(Z)===-1,"The propertyname "+Z+" is reserved and cannot be used with viewModels"),Object(c.w)(B,Z)){var Q=Object(c.h)(B,Z).derivation;G.localComputedValues.set(Z,Object(c.m)(Q.bind(G)))}var fe=Object.getOwnPropertyDescriptor(B,Z),se=fe?{enumerable:fe.enumerable}:{};Object.defineProperty(G,Z,j(j({},se),{configurable:!0,get:function(){return Object(c.w)(B,Z)?G.localComputedValues.get(Z).get():G.isPropertyDirty(Z)?G.localValues.get(Z):G.model[Z]},set:Object(c.k)(function(ce){ce!==G.model[Z]?G.localValues.set(Z,ce):G.localValues.delete(Z)})}))}})}Object.defineProperty(H.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),H.prototype.submit=function(){var B=this;Object(c.B)(this.localValues).forEach(function(G){var Z=B.localValues.get(G),Q=B.model[G];Object(c.y)(Q)?Q.replace(Z):Object(c.z)(Q)?(Q.clear(),Q.merge(Z)):Object(c.v)(Z)||(B.model[G]=Z)}),this.localValues.clear()},H.prototype.reset=function(){this.localValues.clear()},H.prototype.resetProperty=function(B){this.localValues.delete(B)},D([c.m],H.prototype,"isDirty",null),D([c.m],H.prototype,"changedValues",null),D([c.k.bound],H.prototype,"submit",null),D([c.k.bound],H.prototype,"reset",null),D([c.k.bound],H.prototype,"resetProperty",null)})();function U(H){if(!H)return"ROOT";for(var B=[];H.parent;)B.push(H.path),H=H.parent;return B.reverse().join("/")}function L(H){return Object(c.A)(H)||Object(c.y)(H)||Object(c.z)(H)}function F(H,B){var G=new WeakMap;function Z(se){var ce=G.get(se.object);(function(be,we){switch(be.type){case"add":Q(be.newValue,we,be.name);break;case"update":fe(be.oldValue),Q(be.newValue,we,be.name||""+be.index);break;case"remove":case"delete":fe(be.oldValue);break;case"splice":be.removed.map(fe),be.added.forEach(function(Je,yt){return Q(Je,we,""+(be.index+yt))});for(var me=be.index+be.addedCount;me<be.object.length;me++)if(L(be.object[me])){var He=G.get(be.object[me]);He&&(He.path=""+me)}}})(se,ce),B(se,U(ce),H)}function Q(se,ce,be){if(L(se)){var we=G.get(se);if(we){if(we.parent!==ce||we.path!==be)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+U(ce)+"/"+be+"', but it already exists at '"+U(we.parent)+"/"+we.path+"'")}else{var me={parent:ce,path:be,dispose:Object(c.D)(se,Z)};G.set(se,me),Object(c.p)(se).forEach(function(He){var Je=He[0];return Q(He[1],me,Je)})}}}function fe(se){if(L(se)){var ce=G.get(se);if(!ce)return;G.delete(se),ce.dispose(),Object(c.L)(se).forEach(fe)}}return Q(H,void 0,""),function(){fe(H)}}var X,q=(X=function(H,B){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Z){G.__proto__=Z}||function(G,Z){for(var Q in Z)Z.hasOwnProperty(Q)&&(G[Q]=Z[Q])},X(H,B)},function(H,B){function G(){this.constructor=H}X(H,B),H.prototype=B===null?Object.create(B):(G.prototype=B.prototype,new G)});(function(H){function B(G,Z,Q){var fe=Q===void 0?{}:Q,se=fe.name,ce=se===void 0?"ogm"+(1e3*Math.random()|0):se,be=fe.keyToName,we=be===void 0?function(Je){return""+Je}:be,me=H.call(this)||this;me._keyToName=we,me._groupBy=Z,me._ogmInfoKey=Symbol("ogmInfo"+ce),me._base=G;for(var He=0;He<G.length;He++)me._addItem(G[He]);return me._disposeBaseObserver=Object(c.D)(me._base,function(Je){if(Je.type==="splice")Object(c.J)(function(){for(var yt=0,Be=Je.removed;yt<Be.length;yt++){var Yt=Be[yt];me._removeItem(Yt)}for(var Kt=0,Lt=Je.added;Kt<Lt.length;Kt++){var An=Lt[Kt];me._addItem(An)}});else{if(Je.type!=="update")throw new Error("illegal state");Object(c.J)(function(){me._removeItem(Je.oldValue),me._addItem(Je.newValue)})}}),me}q(B,H),B.prototype.clear=function(){throw new Error("not supported")},B.prototype.delete=function(G){throw new Error("not supported")},B.prototype.set=function(G,Z){throw new Error("not supported")},B.prototype.dispose=function(){this._disposeBaseObserver();for(var G=0;G<this._base.length;G++){var Z=this._base[G];Z[this._ogmInfoKey].reaction(),delete Z[this._ogmInfoKey]}},B.prototype._getGroupArr=function(G){var Z=H.prototype.get.call(this,G);return Z===void 0&&(Z=Object(c.C)([],{name:"GroupArray["+this._keyToName(G)+"]",deep:!1}),H.prototype.set.call(this,G,Z)),Z},B.prototype._removeFromGroupArr=function(G,Z){var Q=H.prototype.get.call(this,G);Q.length===1?H.prototype.delete.call(this,G):(Z===Q.length-1||(Q[Z]=Q[Q.length-1],Q[Z][this._ogmInfoKey].groupArrIndex=Z),Q.length--)},B.prototype._addItem=function(G){var Z=this,Q=this._groupBy(G),fe=this._getGroupArr(Q),se={groupByValue:Q,groupArrIndex:fe.length,reaction:Object(c.F)(function(){return Z._groupBy(G)},function(ce,be){var we=G[Z._ogmInfoKey];Z._removeFromGroupArr(we.groupByValue,we.groupArrIndex);var me=Z._getGroupArr(ce),He=me.length;me.push(G),we.groupByValue=ce,we.groupArrIndex=He})};Object.defineProperty(G,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:se}),fe.push(G)},B.prototype._removeItem=function(G){var Z=G[this._ogmInfoKey];this._removeFromGroupArr(Z.groupByValue,Z.groupArrIndex),Z.reaction(),delete G[this._ogmInfoKey]}})(c.b),function(){function H(B,G){this.base=B,this.args=G,this.closestIdx=0,this.isDisposed=!1;for(var Z=this.closest=this.root=B,Q=0;Q<this.args.length-1&&(Z=Z.get(G[Q]));Q++)this.closest=Z;this.closestIdx=Q}return H.prototype.exists=function(){this.assertNotDisposed();var B=this.args.length;return this.closestIdx>=B-1&&this.closest.has(this.args[B-1])},H.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},H.prototype.set=function(B){this.assertNotDisposed();for(var G=this.args.length,Z=this.closest,Q=this.closestIdx;Q<G-1;Q++){var fe=new Map;Z.set(this.args[Q],fe),Z=fe}this.closestIdx=G-1,this.closest=Z,Z.set(this.args[G-1],B)},H.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var B=this.args.length;this.closest.delete(this.args[B-1]);for(var G=this.root,Z=[G],Q=0;Q<B-1;Q++)G=G.get(this.args[Q]),Z.push(G);for(Q=Z.length-1;Q>0;Q--)Z[Q].size===0&&Z[Q-1].delete(this.args[Q-1]);this.isDisposed=!0},H.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},H}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,a,r){var s;(function(c,v,f){if(c){for(var g,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},A={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M=1;M<20;++M)b[111+M]="f"+M;for(M=0;M<=9;++M)b[M+96]=M.toString();L.prototype.bind=function(F,X,q){var H=this;return F=F instanceof Array?F:[F],H._bindMultiple.call(H,F,X,q),H},L.prototype.unbind=function(F,X){return this.bind.call(this,F,function(){},X)},L.prototype.trigger=function(F,X){var q=this;return q._directMap[F+":"+X]&&q._directMap[F+":"+X]({},F),q},L.prototype.reset=function(){var F=this;return F._callbacks={},F._directMap={},F},L.prototype.stopCallback=function(F,X){if((" "+X.className+" ").indexOf(" mousetrap ")>-1||U(X,this.target))return!1;if("composedPath"in F&&typeof F.composedPath=="function"){var q=F.composedPath()[0];q!==F.target&&(X=q)}return X.tagName=="INPUT"||X.tagName=="SELECT"||X.tagName=="TEXTAREA"||X.isContentEditable},L.prototype.handleKey=function(){var F=this;return F._handleKey.apply(F,arguments)},L.addKeycodes=function(F){for(var X in F)F.hasOwnProperty(X)&&(b[X]=F[X]);g=null},L.init=function(){var F=L(v);for(var X in F)X.charAt(0)!=="_"&&(L[X]=function(q){return function(){return F[q].apply(F,arguments)}}(X))},L.init(),c.Mousetrap=L,n.exports&&(n.exports=L),(s=(function(){return L}).call(a,r,a,n))===void 0||(n.exports=s)}function x(F,X,q){F.addEventListener?F.addEventListener(X,q,!1):F.attachEvent("on"+X,q)}function E(F){if(F.type=="keypress"){var X=String.fromCharCode(F.which);return F.shiftKey||(X=X.toLowerCase()),X}return b[F.which]?b[F.which]:_[F.which]?_[F.which]:String.fromCharCode(F.which).toLowerCase()}function j(F){return F=="shift"||F=="ctrl"||F=="alt"||F=="meta"}function D(F,X,q){return q||(q=function(){if(!g)for(var H in g={},b)H>95&&H<112||b.hasOwnProperty(H)&&(g[b[H]]=H);return g}()[F]?"keydown":"keypress"),q=="keypress"&&X.length&&(q="keydown"),q}function V(F,X){var q,H,B,G=[];for(q=function(Z){return Z==="+"?["+"]:(Z=Z.replace(/\+{2}/g,"+plus")).split("+")}(F),B=0;B<q.length;++B)H=q[B],A[H]&&(H=A[H]),X&&X!="keypress"&&S[H]&&(H=S[H],G.push("shift")),j(H)&&G.push(H);return{key:H,modifiers:G,action:X=D(H,G,X)}}function U(F,X){return F!==null&&F!==v&&(F===X||U(F.parentNode,X))}function L(F){var X=this;if(F=F||v,!(X instanceof L))return new L(F);X.target=F,X._callbacks={},X._directMap={};var q,H={},B=!1,G=!1,Z=!1;function Q(me){me=me||{};var He,Je=!1;for(He in H)me[He]?Je=!0:H[He]=0;Je||(Z=!1)}function fe(me,He,Je,yt,Be,Yt){var Kt,Lt,An,Ve,xe=[],Ce=Je.type;if(!X._callbacks[me])return[];for(Ce=="keyup"&&j(me)&&(He=[me]),Kt=0;Kt<X._callbacks[me].length;++Kt)if(Lt=X._callbacks[me][Kt],(yt||!Lt.seq||H[Lt.seq]==Lt.level)&&Ce==Lt.action&&(Ce=="keypress"&&!Je.metaKey&&!Je.ctrlKey||(An=He,Ve=Lt.modifiers,An.sort().join(",")===Ve.sort().join(",")))){var qe=!yt&&Lt.combo==Be,_t=yt&&Lt.seq==yt&&Lt.level==Yt;(qe||_t)&&X._callbacks[me].splice(Kt,1),xe.push(Lt)}return xe}function se(me,He,Je,yt){X.stopCallback(He,He.target||He.srcElement,Je,yt)||me(He,Je)===!1&&(function(Be){Be.preventDefault?Be.preventDefault():Be.returnValue=!1}(He),function(Be){Be.stopPropagation?Be.stopPropagation():Be.cancelBubble=!0}(He))}function ce(me){typeof me.which!="number"&&(me.which=me.keyCode);var He=E(me);He&&(me.type!="keyup"||B!==He?X.handleKey(He,function(Je){var yt=[];return Je.shiftKey&&yt.push("shift"),Je.altKey&&yt.push("alt"),Je.ctrlKey&&yt.push("ctrl"),Je.metaKey&&yt.push("meta"),yt}(me),me):B=!1)}function be(me,He,Je,yt){function Be(An){return function(){Z=An,++H[me],clearTimeout(q),q=setTimeout(Q,1e3)}}function Yt(An){se(Je,An,me),yt!=="keyup"&&(B=E(An)),setTimeout(Q,10)}H[me]=0;for(var Kt=0;Kt<He.length;++Kt){var Lt=Kt+1===He.length?Yt:Be(yt||V(He[Kt+1]).action);we(He[Kt],Lt,yt,me,Kt)}}function we(me,He,Je,yt,Be){X._directMap[me+":"+Je]=He;var Yt,Kt=(me=me.replace(/\s+/g," ")).split(" ");Kt.length>1?be(me,Kt,He,Je):(Yt=V(me,Je),X._callbacks[Yt.key]=X._callbacks[Yt.key]||[],fe(Yt.key,Yt.modifiers,{type:Yt.action},yt,me,Be),X._callbacks[Yt.key][yt?"unshift":"push"]({callback:He,modifiers:Yt.modifiers,action:Yt.action,seq:yt,level:Be,combo:me}))}X._handleKey=function(me,He,Je){var yt,Be=fe(me,He,Je),Yt={},Kt=0,Lt=!1;for(yt=0;yt<Be.length;++yt)Be[yt].seq&&(Kt=Math.max(Kt,Be[yt].level));for(yt=0;yt<Be.length;++yt)if(Be[yt].seq){if(Be[yt].level!=Kt)continue;Lt=!0,Yt[Be[yt].seq]=1,se(Be[yt].callback,Je,Be[yt].combo,Be[yt].seq)}else Lt||se(Be[yt].callback,Je,Be[yt].combo);var An=Je.type=="keypress"&&G;Je.type!=Z||j(me)||An||Q(Yt),G=Lt&&Je.type=="keydown"},X._bindMultiple=function(me,He,Je){for(var yt=0;yt<me.length;++yt)we(me[yt],He,Je)},x(F,"keypress",ce),x(F,"keydown",ce),x(F,"keyup",ce)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var s=r(7),c=r(34),v=r(30),f=r(33),g=s.TypeError;n.exports=function(b,_){var S,A;if(_==="string"&&v(S=b.toString)&&!f(A=c(S,b))||v(S=b.valueOf)&&!f(A=c(S,b))||_!=="string"&&v(S=b.toString)&&!f(A=c(S,b)))return A;throw g("Can't convert object to primitive value")}},function(n,a,r){var s=r(7),c=r(30),v=r(92),f=s.WeakMap;n.exports=c(f)&&/native code/.test(v(f))},function(n,a,r){var s=r(36),c=r(38),v=r(32),f=r(41),g=r(77);n.exports=s?Object.defineProperties:function(b,_){v(b);for(var S,A=f(_),M=g(_),x=M.length,E=0;x>E;)c.f(b,S=M[E++],A[S]);return b}},function(n,a,r){var s=r(7);n.exports=s},function(n,a,r){var s=r(7),c=r(96),v=r(99),f=r(33),g=r(28)("species"),b=s.Array;n.exports=function(_){var S;return c(_)&&(S=_.constructor,(v(S)&&(S===b||c(S.prototype))||f(S)&&(S=S[g])===null)&&(S=void 0)),S===void 0?b:S}},function(n,a,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),f=r(78),g=r(80),b=function(){return this};n.exports=function(_,S,A,M){var x=S+" Iterator";return _.prototype=c(s,{next:v(+!M,A)}),f(_,x,!1,!0),g[x]=b,_}},function(n,a,r){var s=r(7),c=r(30),v=s.String,f=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw f("Can't set "+v(g)+" as a prototype")}},function(n,a,r){var s=r(16),c=r(7),v=r(15),f=r(95),g=r(42),b=r(144),_=r(117),S=r(119),A=r(30),M=r(33),x=r(18),E=r(120),j=r(78),D=r(148);n.exports=function(V,U,L){var F=V.indexOf("Map")!==-1,X=V.indexOf("Weak")!==-1,q=F?"set":"add",H=c[V],B=H&&H.prototype,G=H,Z={},Q=function(me){var He=v(B[me]);g(B,me,me=="add"?function(Je){return He(this,Je===0?0:Je),this}:me=="delete"?function(Je){return!(X&&!M(Je))&&He(this,Je===0?0:Je)}:me=="get"?function(Je){return X&&!M(Je)?void 0:He(this,Je===0?0:Je)}:me=="has"?function(Je){return!(X&&!M(Je))&&He(this,Je===0?0:Je)}:function(Je,yt){return He(this,Je===0?0:Je,yt),this})};if(f(V,!A(H)||!(X||B.forEach&&!x(function(){new H().entries().next()}))))G=L.getConstructor(U,V,F,q),b.enable();else if(f(V,!0)){var fe=new G,se=fe[q](X?{}:-0,1)!=fe,ce=x(function(){fe.has(1)}),be=E(function(me){new H(me)}),we=!X&&x(function(){for(var me=new H,He=5;He--;)me[q](He,He);return!me.has(-0)});be||((G=U(function(me,He){S(me,B);var Je=D(new H,me,G);return He!=null&&_(He,Je[q],{that:Je,AS_ENTRIES:F}),Je})).prototype=B,B.constructor=G),(ce||we)&&(Q("delete"),Q("has"),F&&Q("get")),(we||se)&&Q(q),X&&B.clear&&delete B.clear}return Z[V]=G,s({global:!0,forced:G!=H},Z),j(G,V),X||L.setStrong(G,V,F),G}},function(n,a,r){var s=r(18),c=r(33),v=r(51),f=r(184),g=Object.isExtensible,b=s(function(){});n.exports=b||f?function(_){return!!c(_)&&(!f||v(_)!="ArrayBuffer")&&(!g||g(_))}:g},function(n,a,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var s=r(38).f,c=r(60),v=r(149),f=r(64),g=r(119),b=r(117),_=r(116),S=r(150),A=r(36),M=r(144).fastKey,x=r(58),E=x.set,j=x.getterFor;n.exports={getConstructor:function(D,V,U,L){var F=D(function(G,Z){g(G,X),E(G,{type:V,index:c(null),first:void 0,last:void 0,size:0}),A||(G.size=0),Z!=null&&b(Z,G[L],{that:G,AS_ENTRIES:U})}),X=F.prototype,q=j(V),H=function(G,Z,Q){var fe,se,ce=q(G),be=B(G,Z);return be?be.value=Q:(ce.last=be={index:se=M(Z,!0),key:Z,value:Q,previous:fe=ce.last,next:void 0,removed:!1},ce.first||(ce.first=be),fe&&(fe.next=be),A?ce.size++:G.size++,se!=="F"&&(ce.index[se]=be)),G},B=function(G,Z){var Q,fe=q(G),se=M(Z);if(se!=="F")return fe.index[se];for(Q=fe.first;Q;Q=Q.next)if(Q.key==Z)return Q};return v(X,{clear:function(){for(var G=q(this),Z=G.index,Q=G.first;Q;)Q.removed=!0,Q.previous&&(Q.previous=Q.previous.next=void 0),delete Z[Q.index],Q=Q.next;G.first=G.last=void 0,A?G.size=0:this.size=0},delete:function(G){var Z=this,Q=q(Z),fe=B(Z,G);if(fe){var se=fe.next,ce=fe.previous;delete Q.index[fe.index],fe.removed=!0,ce&&(ce.next=se),se&&(se.previous=ce),Q.first==fe&&(Q.first=se),Q.last==fe&&(Q.last=ce),A?Q.size--:Z.size--}return!!fe},forEach:function(G){for(var Z,Q=q(this),fe=f(G,arguments.length>1?arguments[1]:void 0);Z=Z?Z.next:Q.first;)for(fe(Z.value,Z.key,this);Z&&Z.removed;)Z=Z.previous},has:function(G){return!!B(this,G)}}),v(X,U?{get:function(G){var Z=B(this,G);return Z&&Z.value},set:function(G,Z){return H(this,G===0?0:G,Z)}}:{add:function(G){return H(this,G=G===0?0:G,G)}}),A&&s(X,"size",{get:function(){return q(this).size}}),F},setStrong:function(D,V,U){var L=V+" Iterator",F=j(V),X=j(L);_(D,V,function(q,H){E(this,{type:L,target:q,state:F(q),kind:H,last:void 0})},function(){for(var q=X(this),H=q.kind,B=q.last;B&&B.removed;)B=B.previous;return q.target&&(q.last=B=B?B.next:q.state.first)?H=="keys"?{value:B.key,done:!1}:H=="values"?{value:B.value,done:!1}:{value:[B.key,B.value],done:!1}:(q.target=void 0,{value:void 0,done:!0})},U?"entries":"values",!U,!0),S(V)}}},function(n,a,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var s=r(7),c=r(64),v=r(34),f=r(40),g=r(189),b=r(145),_=r(99),S=r(45),A=r(63),M=r(146),x=r(118),E=s.Array;n.exports=function(j){var D=f(j),V=_(this),U=arguments.length,L=U>1?arguments[1]:void 0,F=L!==void 0;F&&(L=c(L,U>2?arguments[2]:void 0));var X,q,H,B,G,Z,Q=x(D),fe=0;if(!Q||this==E&&b(Q))for(X=S(D),q=V?new this(X):E(X);X>fe;fe++)Z=F?L(D[fe],fe):D[fe],A(q,fe,Z);else for(G=(B=M(D,Q)).next,q=V?new this:[];!(H=v(G,B)).done;fe++)Z=F?g(B,L,[H.value,fe],!0):H.value,A(q,fe,Z);return q.length=fe,q}},function(n,a,r){var s=r(32),c=r(147);n.exports=function(v,f,g,b){try{return b?f(s(g)[0],g[1]):f(g)}catch(_){c(v,"throw",_)}}},function(n,a,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,a,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,a,r){var s=r(16),c=r(15),v=r(56),f=r(40),g=r(45),b=r(39),_=r(18),S=r(193),A=r(121),M=r(194),x=r(195),E=r(70),j=r(196),D=[],V=c(D.sort),U=c(D.push),L=_(function(){D.sort(void 0)}),F=_(function(){D.sort(null)}),X=A("sort"),q=!_(function(){if(E)return E<70;if(!(M&&M>3)){if(x)return!0;if(j)return j<603;var H,B,G,Z,Q="";for(H=65;H<76;H++){switch(B=String.fromCharCode(H),H){case 66:case 69:case 70:case 72:G=3;break;case 68:case 71:G=4;break;default:G=2}for(Z=0;Z<47;Z++)D.push({k:B+Z,v:G})}for(D.sort(function(fe,se){return se.v-fe.v}),Z=0;Z<D.length;Z++)B=D[Z].k.charAt(0),Q.charAt(Q.length-1)!==B&&(Q+=B);return Q!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:L||!F||!X||!q},{sort:function(H){H!==void 0&&v(H);var B=f(this);if(q)return H===void 0?V(B):V(B,H);var G,Z,Q=[],fe=g(B);for(Z=0;Z<fe;Z++)Z in B&&U(Q,B[Z]);for(S(Q,function(se){return function(ce,be){return be===void 0?-1:ce===void 0?1:se!==void 0?+se(ce,be)||0:b(ce)>b(be)?1:-1}}(H)),G=Q.length,Z=0;Z<G;)B[Z]=Q[Z++];for(;Z<fe;)delete B[Z++];return B}})},function(n,a,r){var s=r(114),c=Math.floor,v=function(b,_){var S=b.length,A=c(S/2);return S<8?f(b,_):g(b,v(s(b,0,A),_),v(s(b,A),_),_)},f=function(b,_){for(var S,A,M=b.length,x=1;x<M;){for(A=x,S=b[x];A&&_(b[A-1],S)>0;)b[A]=b[--A];A!==x++&&(b[A]=S)}return b},g=function(b,_,S,A){for(var M=_.length,x=S.length,E=0,j=0;E<M||j<x;)b[E+j]=E<M&&j<x?A(_[E],S[j])<=0?_[E++]:S[j++]:E<M?_[E++]:S[j++];return b};n.exports=v},function(n,a,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,a,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,a,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,a,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(f){if(c(f))throw v("The method doesn't accept regular expressions");return f}},function(n,a,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,a,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(f){return c(function(){return!!v[f]()||"​᠎"[f]()!=="​᠎"||s&&v[f].name!==f})}},function(n,a,r){var s=r(15),c=r(40),v=Math.floor,f=s("".charAt),g=s("".replace),b=s("".slice),_=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,S=/\$([$&'`]|\d{1,2})/g;n.exports=function(A,M,x,E,j,D){var V=x+A.length,U=E.length,L=S;return j!==void 0&&(j=c(j),L=_),g(D,L,function(F,X){var q;switch(f(X,0)){case"$":return"$";case"&":return A;case"`":return b(M,0,x);case"'":return b(M,V);case"<":q=j[b(X,1,-1)];break;default:var H=+X;if(H===0)return F;if(H>U){var B=v(H/10);return B===0?F:B<=U?E[B-1]===void 0?f(X,1):E[B-1]+f(X,1):F}q=E[H-1]}return q===void 0?"":q})}},function(n,a,r){var s=r(36),c=r(15),v=r(34),f=r(18),g=r(77),b=r(112),_=r(84),S=r(40),A=r(85),M=Object.assign,x=Object.defineProperty,E=c([].concat);n.exports=!M||f(function(){if(s&&M({b:1},M(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var j={},D={},V=Symbol(),U="abcdefghijklmnopqrst";return j[V]=7,U.split("").forEach(function(L){D[L]=L}),M({},j)[V]!=7||g(M({},D)).join("")!=U})?function(j,D){for(var V=S(j),U=arguments.length,L=1,F=b.f,X=_.f;U>L;)for(var q,H=A(arguments[L++]),B=F?E(g(H),F(H)):g(H),G=B.length,Z=0;G>Z;)q=B[Z++],s&&!v(X,H,q)||(V[q]=H[q]);return V}:M},function(n,a,r){var s=r(7),c=r(15),v=r(56),f=r(33),g=r(35),b=r(98),_=s.Function,S=c([].concat),A=c([].join),M={},x=function(E,j,D){if(!g(M,j)){for(var V=[],U=0;U<j;U++)V[U]="a["+U+"]";M[j]=_("C,a","return new C("+A(V,",")+")")}return M[j](E,D)};n.exports=_.bind||function(E){var j=v(this),D=j.prototype,V=b(arguments,1),U=function(){var L=S(V,b(arguments));return this instanceof U?x(j,L.length,L):j.apply(E,L)};return f(D)&&(U.prototype=D),U}},function(n,a,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,a,r){var s=r(15),c=r(44),v=r(39),f=/"/g,g=s("".replace);n.exports=function(b,_,S,A){var M=v(c(b)),x="<"+_;return S!==""&&(x+=" "+S+'="'+g(v(A),f,"&quot;")+'"'),x+">"+M+"</"+_+">"}},function(n,a,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var s,c,v,f,g=r(16),b=r(71),_=r(7),S=r(46),A=r(34),M=r(209),x=r(42),E=r(149),j=r(102),D=r(78),V=r(150),U=r(56),L=r(30),F=r(33),X=r(119),q=r(92),H=r(117),B=r(120),G=r(164),Z=r(168).set,Q=r(210),fe=r(213),se=r(214),ce=r(170),be=r(215),we=r(58),me=r(95),He=r(28),Je=r(216),yt=r(128),Be=r(70),Yt=He("species"),Kt="Promise",Lt=we.getterFor(Kt),An=we.set,Ve=we.getterFor(Kt),xe=M&&M.prototype,Ce=M,qe=xe,_t=_.TypeError,ht=_.document,wt=_.process,rn=ce.f,an=rn,Xt=!!(ht&&ht.createEvent&&_.dispatchEvent),nt=L(_.PromiseRejectionEvent),fn="unhandledrejection",Ue=!1,_n=me(Kt,function(){var Ie=q(Ce),ut=Ie!==String(Ce);if(!ut&&Be===66||b&&!qe.finally)return!0;if(Be>=51&&/native code/.test(Ie))return!1;var nn=new Ce(function(Nn){Nn(1)}),Zt=function(Nn){Nn(function(){},function(){})};return(nn.constructor={})[Yt]=Zt,!(Ue=nn.then(function(){})instanceof Zt)||!ut&&Je&&!nt}),Jn=_n||!B(function(Ie){Ce.all(Ie).catch(function(){})}),ie=function(Ie){var ut;return!(!F(Ie)||!L(ut=Ie.then))&&ut},tr=function(Ie,ut){if(!Ie.notified){Ie.notified=!0;var nn=Ie.reactions;Q(function(){for(var Zt=Ie.value,Nn=Ie.state==1,Or=0;nn.length>Or;){var li,Si,Yo,ti=nn[Or++],Tn=Nn?ti.ok:ti.fail,Fn=ti.resolve,Hn=ti.reject,lr=ti.domain;try{Tn?(Nn||(Ie.rejection===2&&$n(Ie),Ie.rejection=1),Tn===!0?li=Zt:(lr&&lr.enter(),li=Tn(Zt),lr&&(lr.exit(),Yo=!0)),li===ti.promise?Hn(_t("Promise-chain cycle")):(Si=ie(li))?A(Si,li,Fn,Hn):Fn(li)):Hn(Zt)}catch(to){lr&&!Yo&&lr.exit(),Hn(to)}}Ie.reactions=[],Ie.notified=!1,ut&&!Ie.rejection&&Gr(Ie)})}},Rr=function(Ie,ut,nn){var Zt,Nn;Xt?((Zt=ht.createEvent("Event")).promise=ut,Zt.reason=nn,Zt.initEvent(Ie,!1,!0),_.dispatchEvent(Zt)):Zt={promise:ut,reason:nn},!nt&&(Nn=_["on"+Ie])?Nn(Zt):Ie===fn&&se("Unhandled promise rejection",nn)},Gr=function(Ie){A(Z,_,function(){var ut,nn=Ie.facade,Zt=Ie.value;if(co(Ie)&&(ut=be(function(){yt?wt.emit("unhandledRejection",Zt,nn):Rr(fn,nn,Zt)}),Ie.rejection=yt||co(Ie)?2:1,ut.error))throw ut.value})},co=function(Ie){return Ie.rejection!==1&&!Ie.parent},$n=function(Ie){A(Z,_,function(){var ut=Ie.facade;yt?wt.emit("rejectionHandled",ut):Rr("rejectionhandled",ut,Ie.value)})},_o=function(Ie,ut,nn){return function(Zt){Ie(ut,Zt,nn)}},Me=function(Ie,ut,nn){Ie.done||(Ie.done=!0,nn&&(Ie=nn),Ie.value=ut,Ie.state=2,tr(Ie,!0))},Ke=function(Ie,ut,nn){if(!Ie.done){Ie.done=!0,nn&&(Ie=nn);try{if(Ie.facade===ut)throw _t("Promise can't be resolved itself");var Zt=ie(ut);Zt?Q(function(){var Nn={done:!1};try{A(Zt,ut,_o(Ke,Nn,Ie),_o(Me,Nn,Ie))}catch(Or){Me(Nn,Or,Ie)}}):(Ie.value=ut,Ie.state=1,tr(Ie,!1))}catch(Nn){Me({done:!1},Nn,Ie)}}};if(_n&&(qe=(Ce=function(Ie){X(this,qe),U(Ie),A(s,this);var ut=Lt(this);try{Ie(_o(Ke,ut),_o(Me,ut))}catch(nn){Me(ut,nn)}}).prototype,(s=function(Ie){An(this,{type:Kt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=E(qe,{then:function(Ie,ut){var nn=Ve(this),Zt=nn.reactions,Nn=rn(G(this,Ce));return Nn.ok=!L(Ie)||Ie,Nn.fail=L(ut)&&ut,Nn.domain=yt?wt.domain:void 0,nn.parent=!0,Zt[Zt.length]=Nn,nn.state!=0&&tr(nn,!1),Nn.promise},catch:function(Ie){return this.then(void 0,Ie)}}),c=function(){var Ie=new s,ut=Lt(Ie);this.promise=Ie,this.resolve=_o(Ke,ut),this.reject=_o(Me,ut)},ce.f=rn=function(Ie){return Ie===Ce||Ie===v?new c(Ie):an(Ie)},!b&&L(M)&&xe!==Object.prototype)){f=xe.then,Ue||(x(xe,"then",function(Ie,ut){var nn=this;return new Ce(function(Zt,Nn){A(f,nn,Zt,Nn)}).then(Ie,ut)},{unsafe:!0}),x(xe,"catch",qe.catch,{unsafe:!0}));try{delete xe.constructor}catch{}j&&j(xe,qe)}g({global:!0,wrap:!0,forced:_n},{Promise:Ce}),D(Ce,Kt,!1,!0),V(Kt),v=S(Kt),g({target:Kt,stat:!0,forced:_n},{reject:function(Ie){var ut=rn(this);return A(ut.reject,void 0,Ie),ut.promise}}),g({target:Kt,stat:!0,forced:b||_n},{resolve:function(Ie){return fe(b&&this===v?Ce:this,Ie)}}),g({target:Kt,stat:!0,forced:Jn},{all:function(Ie){var ut=this,nn=rn(ut),Zt=nn.resolve,Nn=nn.reject,Or=be(function(){var li=U(ut.resolve),Si=[],Yo=0,ti=1;H(Ie,function(Tn){var Fn=Yo++,Hn=!1;ti++,A(li,ut,Tn).then(function(lr){Hn||(Hn=!0,Si[Fn]=lr,--ti||Zt(Si))},Nn)}),--ti||Zt(Si)});return Or.error&&Nn(Or.value),nn.promise},race:function(Ie){var ut=this,nn=rn(ut),Zt=nn.reject,Nn=be(function(){var Or=U(ut.resolve);H(Ie,function(li){A(Or,ut,li).then(nn.resolve,Zt)})});return Nn.error&&Zt(Nn.value),nn.promise}})},function(n,a,r){var s=r(7);n.exports=s.Promise},function(n,a,r){var s,c,v,f,g,b,_,S,A=r(7),M=r(64),x=r(50).f,E=r(168).set,j=r(169),D=r(211),V=r(212),U=r(128),L=A.MutationObserver||A.WebKitMutationObserver,F=A.document,X=A.process,q=A.Promise,H=x(A,"queueMicrotask"),B=H&&H.value;B||(s=function(){var G,Z;for(U&&(G=X.domain)&&G.exit();c;){Z=c.fn,c=c.next;try{Z()}catch(Q){throw c?f():v=void 0,Q}}v=void 0,G&&G.enter()},j||U||V||!L||!F?!D&&q&&q.resolve?((_=q.resolve(void 0)).constructor=q,S=M(_.then,_),f=function(){S(s)}):U?f=function(){X.nextTick(s)}:(E=M(E,A),f=function(){E(s)}):(g=!0,b=F.createTextNode(""),new L(s).observe(b,{characterData:!0}),f=function(){b.data=g=!g})),n.exports=B||function(G){var Z={fn:G,next:void 0};v&&(v.next=Z),c||(c=Z,f()),v=Z}},function(n,a,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,a,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,a,r){var s=r(32),c=r(33),v=r(170);n.exports=function(f,g){if(s(f),c(g)&&g.constructor===f)return g;var b=v.f(f);return(0,b.resolve)(g),b.promise}},function(n,a,r){var s=r(7);n.exports=function(c,v){var f=s.console;f&&f.error&&(arguments.length==1?f.error(c):f.error(c,v))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var s=r(40),c=r(75),v=r(45);n.exports=function(f){for(var g=s(this),b=v(g),_=arguments.length,S=c(_>1?arguments[1]:void 0,b),A=_>2?arguments[2]:void 0,M=A===void 0?b:c(A,b);M>S;)g[S++]=f;return g}},function(n,a,r){var s=r(16),c=r(7),v=r(15),f=r(59),g=r(160),b=r(219),_=r(18),S=c.RangeError,A=c.String,M=Math.floor,x=v(b),E=v("".slice),j=v(1 .toFixed),D=function(F,X,q){return X===0?q:X%2==1?D(F,X-1,q*F):D(F*F,X/2,q)},V=function(F,X,q){for(var H=-1,B=q;++H<6;)B+=X*F[H],F[H]=B%1e7,B=M(B/1e7)},U=function(F,X){for(var q=6,H=0;--q>=0;)H+=F[q],F[q]=M(H/X),H=H%X*1e7},L=function(F){for(var X=6,q="";--X>=0;)if(q!==""||X===0||F[X]!==0){var H=A(F[X]);q=q===""?H:q+x("0",7-H.length)+H}return q};s({target:"Number",proto:!0,forced:_(function(){return j(8e-5,3)!=="0.000"||j(.9,0)!=="1"||j(1.255,2)!=="1.25"||j(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!_(function(){j({})})},{toFixed:function(F){var X,q,H,B,G=g(this),Z=f(F),Q=[0,0,0,0,0,0],fe="",se="0";if(Z<0||Z>20)throw S("Incorrect fraction digits");if(G!=G)return"NaN";if(G<=-1e21||G>=1e21)return A(G);if(G<0&&(fe="-",G=-G),G>1e-21)if(q=(X=function(ce){for(var be=0,we=ce;we>=4096;)be+=12,we/=4096;for(;we>=2;)be+=1,we/=2;return be}(G*D(2,69,1))-69)<0?G*D(2,-X,1):G/D(2,X,1),q*=4503599627370496,(X=52-X)>0){for(V(Q,0,q),H=Z;H>=7;)V(Q,1e7,0),H-=7;for(V(Q,D(10,H,1),0),H=X-1;H>=23;)U(Q,1<<23),H-=23;U(Q,1<<H),V(Q,1,1),U(Q,2),se=L(Q)}else V(Q,0,q),V(Q,1<<-X,0),se=L(Q)+x("0",Z);return se=Z>0?fe+((B=se.length)<=Z?"0."+x("0",Z-B)+se:E(se,0,B-Z)+"."+E(se,B-Z)):fe+se}})},function(n,a,r){var s=r(7),c=r(59),v=r(39),f=r(44),g=s.RangeError;n.exports=function(b){var _=v(f(this)),S="",A=c(b);if(A<0||A==1/0)throw g("Wrong number of repetitions");for(;A>0;(A>>>=1)&&(_+=_))1&A&&(S+=_);return S}},function(n,a,r){var s=r(36),c=r(15),v=r(77),f=r(41),g=c(r(84).f),b=c([].push),_=function(S){return function(A){for(var M,x=f(A),E=v(x),j=E.length,D=0,V=[];j>D;)M=E[D++],s&&!g(x,M)||b(V,S?[M,x[M]]:x[M]);return V}};n.exports={entries:_(!0),values:_(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return bu}),r.d(a,"LogicFlow",function(){return _1}),r.d(a,"h",function(){return Ue.g}),r.d(a,"LogicFlowUtil",function(){return s}),r.d(a,"BaseNode",function(){return Ef}),r.d(a,"RectNode",function(){return f0}),r.d(a,"CircleNode",function(){return v0}),r.d(a,"PolygonNode",function(){return _0}),r.d(a,"DiamondNode",function(){return S0}),r.d(a,"EllipseNode",function(){return k0}),r.d(a,"TextNode",function(){return N0}),r.d(a,"HtmlNode",function(){return I0}),r.d(a,"BaseEdge",function(){return gm}),r.d(a,"LineEdge",function(){return K0}),r.d(a,"PolylineEdge",function(){return t1}),r.d(a,"BezierEdge",function(){return i1}),r.d(a,"Arrow",function(){return OD}),r.d(a,"BaseEdgeModel",function(){return Md}),r.d(a,"BezierEdgeModel",function(){return y_}),r.d(a,"LineEdgeModel",function(){return tc}),r.d(a,"PolylineEdgeModel",function(){return Aa}),r.d(a,"BaseNodeModel",function(){return wf}),r.d(a,"CircleNodeModel",function(){return O_}),r.d(a,"DiamondNodeModel",function(){return M_}),r.d(a,"EllipseNodeModel",function(){return N_}),r.d(a,"PolygonNodeModel",function(){return $_}),r.d(a,"RectNodeModel",function(){return B_}),r.d(a,"TextNodeModel",function(){return H_}),r.d(a,"HtmlNodeModel",function(){return Y_}),r.d(a,"EditConfigModel",function(){return id}),r.d(a,"GraphModel",function(){return a2}),r.d(a,"SnaplineModel",function(){return WO}),r.d(a,"Keyboard",function(){return kS}),r.d(a,"get",function(){return k2}),r.d(a,"defaults",function(){return R2}),r.d(a,"ElementState",function(){return Kr}),r.d(a,"ModelType",function(){return Ar}),r.d(a,"ElementType",function(){return fo}),r.d(a,"EventType",function(){return Cn}),r.d(a,"formateAnchorConnectValidateData",function(){return ql});var s={};r.r(s),r.d(s,"createUuid",function(){return ra}),r.d(s,"refreshGraphId",function(){return Jc}),r.d(s,"StepDrag",function(){return ye}),r.d(s,"setupEdgeModel",function(){return $t}),r.d(s,"isBboxOverLapping",function(){return Nt}),r.d(s,"filterRepeatPoints",function(){return ft}),r.d(s,"getSimplePolyline",function(){return Ht}),r.d(s,"getExpandedBBox",function(){return Vt}),r.d(s,"pointDirection",function(){return Ct}),r.d(s,"getExpandedBBoxPoint",function(){return Ot}),r.d(s,"mergeBBox",function(){return Ze}),r.d(s,"getBBoxOfPoints",function(){return ct}),r.d(s,"getPointsFromBBox",function(){return It}),r.d(s,"isPointOutsideBBox",function(){return Jt}),r.d(s,"getBBoxXCrossPoints",function(){return At}),r.d(s,"getBBoxYCrossPoints",function(){return on}),r.d(s,"getBBoxCrossPointsByPoint",function(){return Mt}),r.d(s,"estimateDistance",function(){return Gt}),r.d(s,"costByPoints",function(){return Tt}),r.d(s,"heuristicCostEstimate",function(){return qt}),r.d(s,"rebuildPath",function(){return Pn}),r.d(s,"removeClosePointFromOpenList",function(){return Bn}),r.d(s,"isSegmentsIntersected",function(){return Dt}),r.d(s,"isSegmentCrossingBBox",function(){return kt}),r.d(s,"getNextNeighborPoints",function(){return xt}),r.d(s,"pathFinder",function(){return jn}),r.d(s,"getBoxByOriginNode",function(){return rr}),r.d(s,"pointFilter",function(){return pn}),r.d(s,"getPolylinePoints",function(){return sr}),r.d(s,"getLongestEdge",function(){return Wn}),r.d(s,"isSegmentsInNode",function(){return ir}),r.d(s,"isSegmentsCrossNode",function(){return _r}),r.d(s,"getCrossPointInRect",function(){return jo}),r.d(s,"segmentDirection",function(){return Po}),r.d(s,"points2PointsList",function(){return or}),r.d(s,"getSimplePoints",function(){return Zo}),r.d(s,"getBytesLength",function(){return Io}),r.d(s,"getTextWidth",function(){return ii}),r.d(s,"getAppendAttributes",function(){return di}),r.d(s,"getBezierControlPoints",function(){return Jo}),r.d(s,"getBezierPoints",function(){return mo}),r.d(s,"getEndTangent",function(){return pi}),r.d(s,"getClosestPointOfPolyline",function(){return Mr}),r.d(s,"pickEdgeConfig",function(){return Dn}),r.d(s,"twoPointDistance",function(){return hr}),r.d(s,"createEdgeGenerator",function(){return Kn}),r.d(s,"snapToGrid",function(){return rl}),r.d(s,"getGridOffset",function(){return qc}),r.d(s,"sampleCubic",function(){return Do}),r.d(s,"getThetaOfVector",function(){return Pd}),r.d(s,"degrees",function(){return jp}),r.d(s,"Vector",function(){return ze}),r.d(s,"Point",function(){return p}),r.d(s,"Matrix",function(){return Ts}),r.d(s,"RotateMatrix",function(){return nc}),r.d(s,"ScaleMatrix",function(){return lm}),r.d(s,"TranslateMatrix",function(){return Nd});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var f=r(43),g=Object(f.b)("observerBatching");function b(i){i()}var _=!1;function S(){return _}function A(i){return Object(c.t)(i)}var M,x=1e4,E=new Set;function j(){M===void 0&&(M=setTimeout(D,1e4))}function D(){M=void 0;var i=Date.now();E.forEach(function(o){var l=o.current;l&&i>=l.cleanAt&&(l.reaction.dispose(),o.current=null,E.delete(o))}),E.size>0&&j()}var V=!1,U=[],L={};function F(i){return"observer"+i}function X(i,o,l){o===void 0&&(o="observed"),l===void 0&&(l=L),S();var u,h=function(C){return function(){V?U.push(C):C()}}((l.useForceUpdate||f.d)()),d=v.d.useRef(null);if(!d.current){var m=new c.c(F(o),function(){w.mounted?h():(m.dispose(),d.current=null)}),w=function(C){return{cleanAt:Date.now()+x,reaction:C}}(m);d.current=w,u=d,E.add(u),j()}var T=d.current.reaction;return v.d.useDebugValue(T,A),v.d.useEffect(function(){var C;return C=d,E.delete(C),d.current?d.current.mounted=!0:(d.current={reaction:new c.c(F(o),function(){h()}),cleanAt:1/0},h()),function(){d.current.reaction.dispose(),d.current=null}},[]),function(C){V=!0,U=[];try{var $=C();V=!1;var J=U.length>0?U:void 0;return v.d.useLayoutEffect(function(){J&&J.forEach(function(te){return te()})},[J]),$}finally{V=!1}}(function(){var C,$;if(T.track(function(){try{C=i()}catch(J){$=J}}),$)throw $;return C})}var q=function(){return q=Object.assign||function(i){for(var o,l=1,u=arguments.length;l<u;l++)for(var h in o=arguments[l])Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h]);return i},q.apply(this,arguments)};function H(i,o){var l,u,h,d=q({forwardRef:!1},o),m=i.displayName||i.name,w=function(T,C){return X(function(){return i(T,C)},m)};return w.displayName=m,l=d.forwardRef?Object(v.f)(Object(v.e)(w)):Object(v.f)(w),u=i,h=l,Object.keys(u).forEach(function(T){B[T]||Object.defineProperty(h,T,Object.getOwnPropertyDescriptor(u,T))}),l.displayName=m,l}var B={$$typeof:!0,render:!0,compare:!0,type:!0};function G(i){var o=i.children,l=i.render,u=o||l;return typeof u!="function"?null:X(u)}function Z(i,o,l,u,h){var d=o==="children"?"render":"children",m=typeof i[o]=="function",w=typeof i[d]=="function";return m&&w?new Error("MobX Observer: Do not use children and render in the same time in`"+l):m||w?null:new Error("Invalid prop `"+h+"` of type `"+typeof i[o]+"` supplied to `"+l+"`, expected `function`.")}G.propTypes={children:Z,render:Z},G.displayName="Observer";var Q;(Q=v.g)||(Q=b),Object(c.n)({reactionScheduler:Q}),Object(f.a)()[g]=!0;var fe=0,se={};function ce(i){return se[i]||(se[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var l="__$mobx-react "+o+" ("+fe+")";return fe++,l}(i)),se[i]}function be(i,o){if(we(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),u=Object.keys(o);if(l.length!==u.length)return!1;for(var h=0;h<l.length;h++)if(!Object.hasOwnProperty.call(o,l[h])||!we(i[l[h]],o[l[h]]))return!1;return!0}function we(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function me(i,o,l){Object.hasOwnProperty.call(i,o)?i[o]=l:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:l})}var He=ce("patchMixins"),Je=ce("patchedDefinition");function yt(i,o){for(var l=this,u=arguments.length,h=new Array(u>2?u-2:0),d=2;d<u;d++)h[d-2]=arguments[d];o.locks++;try{var m;return i!=null&&(m=i.apply(this,h)),m}finally{o.locks--,o.locks===0&&o.methods.forEach(function(w){w.apply(l,h)})}}function Be(i,o){return function(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];yt.call.apply(yt,[this,i,o].concat(u))}}function Yt(i,o,l){var u=function(w,T){var C=w[He]=w[He]||{},$=C[T]=C[T]||{};return $.locks=$.locks||0,$.methods=$.methods||[],$}(i,o);u.methods.indexOf(l)<0&&u.methods.push(l);var h=Object.getOwnPropertyDescriptor(i,o);if(!h||!h[Je]){var d=i[o],m=Kt(i,o,h?h.enumerable:void 0,u,d);Object.defineProperty(i,o,m)}}function Kt(i,o,l,u,h){var d,m=Be(h,u);return(d={})[Je]=!0,d.get=function(){return m},d.set=function(w){if(this===i)m=Be(w,u);else{var T=Kt(this,o,l,u,w);Object.defineProperty(this,o,T)}},d.configurable=!0,d.enumerable=l,d}var Lt=c.a||"$mobx",An=ce("isMobXReactObserver"),Ve=ce("isUnmounted"),xe=ce("skipRender"),Ce=ce("isForcingUpdate");function qe(i){var o=i.prototype;if(i[An]?_t(o):i[An]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==v.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==wt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=wt;rn(o,"props"),rn(o,"state");var l=o.render;return o.render=function(){return ht.call(this,l)},Yt(o,"componentWillUnmount",function(){var u;(u=this.render[Lt])===null||u===void 0||u.dispose(),this[Ve]=!0,!this.render[Lt]&&_t(this)}),i}function _t(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function ht(i){var o=this;me(this,xe,!1),me(this,Ce,!1);var l=_t(this),u=i.bind(this),h=!1,d=new c.c(l+".render()",function(){if(!h&&(h=!0,o[Ve]!==!0)){var w=!0;try{me(o,Ce,!0),o[xe]||v.a.prototype.forceUpdate.call(o),w=!1}finally{me(o,Ce,!1),w&&d.dispose()}}});function m(){h=!1;var w=void 0,T=void 0;if(d.track(function(){try{T=Object(c.d)(!1,u)}catch(C){w=C}}),w)throw w;return T}return d.reactComponent=this,m[Lt]=d,this.render=m,m.call(this)}function wt(i,o){return this.state!==o||!be(this.props,i)}function rn(i,o){var l=ce("reactProp_"+o+"_valueHolder"),u=ce("reactProp_"+o+"_atomHolder");function h(){return this[u]||me(this,u,Object(c.o)("reactive "+o)),this[u]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var d=!1;return c.f&&c.e&&(d=Object(c.f)(!0)),h.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(d),this[l]},set:function(d){this[Ce]||be(this[l],d)?me(this,l,d):(me(this,l,d),me(this,xe,!0),h.call(this).reportChanged(),me(this,xe,!1))}})}var an=typeof Symbol=="function"&&Symbol.for,Xt=an?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(i){return null}).$$typeof,nt=an?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(i){return null}).$$typeof;function fn(i){if(i.isMobxInjector,nt&&i.$$typeof===nt)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Xt&&i.$$typeof===Xt){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(G,null,function(){return o.apply(void 0,l)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(v.a,i)?qe(i):H(i)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Ue=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var _n=function(i,o){for(var l=-1,u=i==null?0:i.length,h=Array(u);++l<u;)h[l]=o(i[l],l,i);return h},Jn=function(){this.__data__=[],this.size=0},ie=function(i,o){return i===o||i!=i&&o!=o},tr=function(i,o){for(var l=i.length;l--;)if(ie(i[l][0],o))return l;return-1},Rr=Array.prototype.splice,Gr=function(i){var o=this.__data__,l=tr(o,i);return!(l<0)&&(l==o.length-1?o.pop():Rr.call(o,l,1),--this.size,!0)},co=function(i){var o=this.__data__,l=tr(o,i);return l<0?void 0:o[l][1]},$n=function(i){return tr(this.__data__,i)>-1},_o=function(i,o){var l=this.__data__,u=tr(l,i);return u<0?(++this.size,l.push([i,o])):l[u][1]=o,this};function Me(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}Me.prototype.clear=Jn,Me.prototype.delete=Gr,Me.prototype.get=co,Me.prototype.has=$n,Me.prototype.set=_o;var Ke=Me,Ie=function(){this.__data__=new Ke,this.size=0},ut=function(i){var o=this.__data__,l=o.delete(i);return this.size=o.size,l},nn=function(i){return this.__data__.get(i)},Zt=function(i){return this.__data__.has(i)},Nn=r(31),Or=Nn.a.Symbol,li=Object.prototype,Si=li.hasOwnProperty,Yo=li.toString,ti=Or?Or.toStringTag:void 0,Tn=function(i){var o=Si.call(i,ti),l=i[ti];try{i[ti]=void 0;var u=!0}catch{}var h=Yo.call(i);return u&&(o?i[ti]=l:delete i[ti]),h},Fn=Object.prototype.toString,Hn=function(i){return Fn.call(i)},lr=Or?Or.toStringTag:void 0,to=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":lr&&lr in Object(i)?Tn(i):Hn(i)},jr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},ml,Ha=function(i){if(!jr(i))return!1;var o=to(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},yl=Nn.a["__core-js_shared__"],as=(ml=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||""))?"Symbol(src)_1."+ml:"",np=function(i){return!!as&&as in i},wc=Function.prototype.toString,va=function(i){if(i!=null){try{return wc.call(i)}catch{}try{return i+""}catch{}}return""},Us=/^\[object .+?Constructor\]$/,Rn=Function.prototype,Vf=Object.prototype,wo=Rn.toString,Ec=Vf.hasOwnProperty,Ji=RegExp("^"+wo.call(Ec).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),la=function(i){return!(!jr(i)||np(i))&&(Ha(i)?Ji:Us).test(va(i))},Cu=function(i,o){return i==null?void 0:i[o]},Ca=function(i,o){var l=Cu(i,o);return la(l)?l:void 0},ma=Ca(Nn.a,"Map"),Da=Ca(Object,"create"),Oc=function(){this.__data__=Da?Da(null):{},this.size=0},Sc=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},Bf=Object.prototype.hasOwnProperty,Vs=function(i){var o=this.__data__;if(Da){var l=o[i];return l==="__lodash_hash_undefined__"?void 0:l}return Bf.call(o,i)?o[i]:void 0},Wf=Object.prototype.hasOwnProperty,xc=function(i){var o=this.__data__;return Da?o[i]!==void 0:Wf.call(o,i)},rp=function(i,o){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Da&&o===void 0?"__lodash_hash_undefined__":o,this};function jl(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}jl.prototype.clear=Oc,jl.prototype.delete=Sc,jl.prototype.get=Vs,jl.prototype.has=xc,jl.prototype.set=rp;var Gf=jl,gl=function(){this.size=0,this.__data__={hash:new Gf,map:new(ma||Ke),string:new Gf}},Ac=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},Du=function(i,o){var l=i.__data__;return Ac(o)?l[typeof o=="string"?"string":"hash"]:l.map},Tc=function(i){var o=Du(this,i).delete(i);return this.size-=o?1:0,o},Mc=function(i){return Du(this,i).get(i)},op=function(i){return Du(this,i).has(i)},zf=function(i,o){var l=Du(this,i),u=l.size;return l.set(i,o),this.size+=l.size==u?0:1,this};function Yr(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}Yr.prototype.clear=gl,Yr.prototype.delete=Tc,Yr.prototype.get=Mc,Yr.prototype.has=op,Yr.prototype.set=zf;var zr=Yr,Hf=function(i,o){var l=this.__data__;if(l instanceof Ke){var u=l.__data__;if(!ma||u.length<199)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new zr(u)}return l.set(i,o),this.size=l.size,this};function ls(i){var o=this.__data__=new Ke(i);this.size=o.size}ls.prototype.clear=Ie,ls.prototype.delete=ut,ls.prototype.get=nn,ls.prototype.has=Zt,ls.prototype.set=Hf;var ya=ls,ju=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Xf=function(i){return this.__data__.has(i)};function Bo(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new zr;++o<l;)this.add(i[o])}Bo.prototype.add=Bo.prototype.push=ju,Bo.prototype.has=Xf;var Il=Bo,Ll=function(i,o){for(var l=-1,u=i==null?0:i.length;++l<u;)if(o(i[l],l,i))return!0;return!1},Iu=function(i,o){return i.has(o)},ss=function(i,o,l,u,h,d){var m=1&l,w=i.length,T=o.length;if(w!=T&&!(m&&T>w))return!1;var C=d.get(i),$=d.get(o);if(C&&$)return C==o&&$==i;var J=-1,te=!0,ge=2&l?new Il:void 0;for(d.set(i,o),d.set(o,i);++J<w;){var Pe=i[J],je=o[J];if(u)var st=m?u(je,Pe,J,o,i,d):u(Pe,je,J,i,o,d);if(st!==void 0){if(st)continue;te=!1;break}if(ge){if(!Ll(o,function(at,bt){if(!Iu(ge,bt)&&(Pe===at||h(Pe,at,l,u,d)))return ge.push(bt)})){te=!1;break}}else if(Pe!==je&&!h(Pe,je,l,u,d)){te=!1;break}}return d.delete(i),d.delete(o),te},xi=Nn.a.Uint8Array,kc=function(i){var o=-1,l=Array(i.size);return i.forEach(function(u,h){l[++o]=[h,u]}),l},qf=function(i){var o=-1,l=Array(i.size);return i.forEach(function(u){l[++o]=u}),l},Pc=Or?Or.prototype:void 0,Fi=Pc?Pc.valueOf:void 0,si=function(i,o,l,u,h,d,m){switch(l){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!d(new xi(i),new xi(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ie(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var w=kc;case"[object Set]":var T=1&u;if(w||(w=qf),i.size!=o.size&&!T)return!1;var C=m.get(i);if(C)return C==o;u|=2,m.set(i,o);var $=ss(w(i),w(o),u,h,d,m);return m.delete(i),$;case"[object Symbol]":if(Fi)return Fi.call(i)==Fi.call(o)}return!1},ga=function(i,o){for(var l=-1,u=o.length,h=i.length;++l<u;)i[h+l]=o[l];return i},lo=Array.isArray,ip=function(i,o,l){var u=o(i);return lo(i)?u:ga(u,l(i))},Ui=function(i,o){for(var l=-1,u=i==null?0:i.length,h=0,d=[];++l<u;){var m=i[l];o(m,l,i)&&(d[h++]=m)}return d},Yf=function(){return[]},Kf=Object.prototype.propertyIsEnumerable,Vi=Object.getOwnPropertySymbols,Qi=Vi?function(i){return i==null?[]:(i=Object(i),Ui(Vi(i),function(o){return Kf.call(i,o)}))}:Yf,Rc=function(i,o){for(var l=-1,u=Array(i);++l<i;)u[l]=o(l);return u},Fr=function(i){return i!=null&&typeof i=="object"},ui=function(i){return Fr(i)&&to(i)=="[object Arguments]"},Lu=Object.prototype,Zf=Lu.hasOwnProperty,Nc=Lu.propertyIsEnumerable,$u=ui(function(){return arguments}())?ui:function(i){return Fr(i)&&Zf.call(i,"callee")&&!Nc.call(i,"callee")},Xa=$u,Bi=r(48),us=/^(?:0|[1-9]\d*)$/,ea=function(i,o){var l=typeof i;return!!(o=o??9007199254740991)&&(l=="number"||l!="symbol"&&us.test(i))&&i>-1&&i%1==0&&i<o},ba=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Nr={};Nr["[object Float32Array]"]=Nr["[object Float64Array]"]=Nr["[object Int8Array]"]=Nr["[object Int16Array]"]=Nr["[object Int32Array]"]=Nr["[object Uint8Array]"]=Nr["[object Uint8ClampedArray]"]=Nr["[object Uint16Array]"]=Nr["[object Uint32Array]"]=!0,Nr["[object Arguments]"]=Nr["[object Array]"]=Nr["[object ArrayBuffer]"]=Nr["[object Boolean]"]=Nr["[object DataView]"]=Nr["[object Date]"]=Nr["[object Error]"]=Nr["[object Function]"]=Nr["[object Map]"]=Nr["[object Number]"]=Nr["[object Object]"]=Nr["[object RegExp]"]=Nr["[object Set]"]=Nr["[object String]"]=Nr["[object WeakMap]"]=!1;var Wi=function(i){return Fr(i)&&ba(i.length)&&!!Nr[to(i)]},ja=function(i){return function(o){return i(o)}},yi=r(49),cs=yi.a&&yi.a.isTypedArray,$l=cs?ja(cs):Wi,Ia=Object.prototype.hasOwnProperty,ho=function(i,o){var l=lo(i),u=!l&&Xa(i),h=!l&&!u&&Object(Bi.a)(i),d=!l&&!u&&!h&&$l(i),m=l||u||h||d,w=m?Rc(i.length,String):[],T=w.length;for(var C in i)!o&&!Ia.call(i,C)||m&&(C=="length"||h&&(C=="offset"||C=="parent")||d&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||ea(C,T))||w.push(C);return w},Bs=Object.prototype,qa=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Bs)},_a=function(i,o){return function(l){return i(o(l))}},Cc=_a(Object.keys,Object),ap=Object.prototype.hasOwnProperty,Dc=function(i){if(!qa(i))return Cc(i);var o=[];for(var l in Object(i))ap.call(i,l)&&l!="constructor"&&o.push(l);return o},Ko=function(i){return i!=null&&ba(i.length)&&!Ha(i)},Ws=function(i){return Ko(i)?ho(i):Dc(i)},Ya=function(i){return ip(i,Ws,Qi)},ni=Object.prototype.hasOwnProperty,jc=function(i,o,l,u,h,d){var m=1&l,w=Ya(i),T=w.length;if(T!=Ya(o).length&&!m)return!1;for(var C=T;C--;){var $=w[C];if(!(m?$ in o:ni.call(o,$)))return!1}var J=d.get(i),te=d.get(o);if(J&&te)return J==o&&te==i;var ge=!0;d.set(i,o),d.set(o,i);for(var Pe=m;++C<T;){var je=i[$=w[C]],st=o[$];if(u)var at=m?u(st,je,$,o,i,d):u(je,st,$,i,o,d);if(!(at===void 0?je===st||h(je,st,l,u,d):at)){ge=!1;break}Pe||(Pe=$=="constructor")}if(ge&&!Pe){var bt=i.constructor,Bt=o.constructor;bt==Bt||!("constructor"in i)||!("constructor"in o)||typeof bt=="function"&&bt instanceof bt&&typeof Bt=="function"&&Bt instanceof Bt||(ge=!1)}return d.delete(i),d.delete(o),ge},sa=Ca(Nn.a,"DataView"),wa=Ca(Nn.a,"Promise"),Fu=Ca(Nn.a,"Set"),Gi=Ca(Nn.a,"WeakMap"),ta="[object Map]",ci="[object Promise]",ua="[object Set]",Ii="[object WeakMap]",dt="[object DataView]",Ft=va(sa),Ut=va(ma),mn=va(wa),fr=va(Fu),Cr=va(Gi),vo=to;(sa&&vo(new sa(new ArrayBuffer(1)))!=dt||ma&&vo(new ma)!=ta||wa&&vo(wa.resolve())!=ci||Fu&&vo(new Fu)!=ua||Gi&&vo(new Gi)!=Ii)&&(vo=function(i){var o=to(i),l=o=="[object Object]"?i.constructor:void 0,u=l?va(l):"";if(u)switch(u){case Ft:return dt;case Ut:return ta;case mn:return ci;case fr:return ua;case Cr:return Ii}return o});var P=vo,R="[object Arguments]",z="[object Array]",oe="[object Object]",Ee=Object.prototype.hasOwnProperty,Ye=function(i,o,l,u,h,d){var m=lo(i),w=lo(o),T=m?z:P(i),C=w?z:P(o),$=(T=T==R?oe:T)==oe,J=(C=C==R?oe:C)==oe,te=T==C;if(te&&Object(Bi.a)(i)){if(!Object(Bi.a)(o))return!1;m=!0,$=!1}if(te&&!$)return d||(d=new ya),m||$l(i)?ss(i,o,l,u,h,d):si(i,o,T,l,u,h,d);if(!(1&l)){var ge=$&&Ee.call(i,"__wrapped__"),Pe=J&&Ee.call(o,"__wrapped__");if(ge||Pe){var je=ge?i.value():i,st=Pe?o.value():o;return d||(d=new ya),h(je,st,l,u,d)}}return!!te&&(d||(d=new ya),jc(i,o,l,u,h,d))},gt=function i(o,l,u,h,d){return o===l||(o==null||l==null||!Fr(o)&&!Fr(l)?o!=o&&l!=l:Ye(o,l,u,h,i,d))},zt=function(i,o,l,u){var h=l.length,d=h;if(i==null)return!d;for(i=Object(i);h--;){var m=l[h];if(m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++h<d;){var w=(m=l[h])[0],T=i[w],C=m[1];if(m[2]){if(T===void 0&&!(w in i))return!1}else{var $=new ya,J;if(!(J===void 0?gt(C,T,3,u,$):J))return!1}}return!0},En=function(i){return i==i&&!jr(i)},wr=function(i){for(var o=Ws(i),l=o.length;l--;){var u=o[l],h=i[u];o[l]=[u,h,En(h)]}return o},dn=function(i,o){return function(l){return l!=null&&l[i]===o&&(o!==void 0||i in Object(l))}},Hr=function(i){var o=wr(i);return o.length==1&&o[0][2]?dn(o[0][0],o[0][1]):function(l){return l===i||zt(l,i,o)}},mr=function(i){return typeof i=="symbol"||Fr(i)&&to(i)=="[object Symbol]"},Lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/,Ao=function(i,o){if(lo(i))return!1;var l=typeof i;return!(l!="number"&&l!="symbol"&&l!="boolean"&&i!=null&&!mr(i))||ca.test(i)||!Lr.test(i)||o!=null&&i in Object(o)};function na(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,h=o?o.apply(this,u):u[0],d=l.cache;if(d.has(h))return d.get(h);var m=i.apply(this,u);return l.cache=d.set(h,m)||d,m};return l.cache=new(na.Cache||zr),l}na.Cache=zr;var bl=na,_l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fl=/\\(\\)?/g,fs=function(i){var o=bl(i,function(u){return l.size===500&&l.clear(),u}),l=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(_l,function(l,u,h,d){o.push(h?d.replace(Fl,"$1"):u||l)}),o}),Ka=Or?Or.prototype:void 0,ds=Ka?Ka.toString:void 0,ri=function i(o){if(typeof o=="string")return o;if(lo(o))return _n(o,i)+"";if(mr(o))return ds?ds.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l},Ul=function(i){return i==null?"":ri(i)},wl=function(i,o){return lo(i)?i:Ao(i,o)?[i]:fs(Ul(i))},Za=function(i){if(typeof i=="string"||mr(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ja=function(i,o){for(var l=0,u=(o=wl(o,i)).length;i!=null&&l<u;)i=i[Za(o[l++])];return l&&l==u?i:void 0},Gs=function(i,o,l){var u=i==null?void 0:Ja(i,o);return u===void 0?l:u},gh=function(i,o){return i!=null&&o in Object(i)},bh=function(i,o,l){for(var u=-1,h=(o=wl(o,i)).length,d=!1;++u<h;){var m=Za(o[u]);if(!(d=i!=null&&l(i,m)))break;i=i[m]}return d||++u!=h?d:!!(h=i==null?0:i.length)&&ba(h)&&ea(m,h)&&(lo(i)||Xa(i))},lp=function(i,o){return i!=null&&bh(i,o,gh)},Ic=function(i,o){return Ao(i)&&En(o)?dn(Za(i),o):function(l){var u=Gs(l,i);return u===void 0&&u===o?lp(l,i):gt(o,u,3)}},zs=function(i){return i},Jf=function(i){return function(o){return o==null?void 0:o[i]}},_h=function(i){return function(o){return Ja(o,i)}},Hs=function(i){return Ao(i)?Jf(Za(i)):_h(i)},Lc=function(i){return typeof i=="function"?i:i==null?zs:typeof i=="object"?lo(i)?Ic(i[0],i[1]):Hr(i):Hs(i)},Qf=function(i){return function(o,l,u){for(var h=-1,d=Object(o),m=u(o),w=m.length;w--;){var T=m[++h];if(l(d[T],T,d)===!1)break}return o}}(),Wo=function(i,o){return function(l,u){if(l==null)return l;if(!Ko(l))return i(l,u);for(var h=l.length,d=-1,m=Object(l);++d<h&&u(m[d],d,m)!==!1;);return l}}(function(i,o){return i&&Qf(i,o,Ws)}),zi=function(i,o){var l=-1,u=Ko(i)?Array(i.length):[];return Wo(i,function(h,d,m){u[++l]=o(h,d,m)}),u},ed=function(i,o){return(lo(i)?_n:zi)(i,Lc(o))};Object(c.n)({isolateGlobalState:!0});var td=function(){try{var i=Ca(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Uu=function(i,o,l){o=="__proto__"&&td?td(i,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[o]=l},Zv=Object.prototype.hasOwnProperty,Vu=function(i,o,l){var u=i[o];Zv.call(i,o)&&ie(u,l)&&(l!==void 0||o in i)||Uu(i,o,l)},Bu=function(i,o,l,u){var h=!l;l||(l={});for(var d=-1,m=o.length;++d<m;){var w=o[d],T=void 0;T===void 0&&(T=i[w]),h?Uu(l,w,T):Vu(l,w,T)}return l},$c=function(i,o,l){switch(l.length){case 0:return i.call(o);case 1:return i.call(o,l[0]);case 2:return i.call(o,l[0],l[1]);case 3:return i.call(o,l[0],l[1],l[2])}return i.apply(o,l)},Xs=Math.max,ps=function(i,o,l){return o=Xs(o===void 0?i.length-1:o,0),function(){for(var u=arguments,h=-1,d=Xs(u.length-o,0),m=Array(d);++h<d;)m[h]=u[o+h];h=-1;for(var w=Array(o+1);++h<o;)w[h]=u[h];return w[o]=l(m),$c(i,this,w)}},Wu=function(i){return function(){return i}},Fc=td?function(i,o){return td(i,"toString",{configurable:!0,enumerable:!1,value:Wu(o),writable:!0})}:zs,hs=Date.now,Jv=function(i){var o=0,l=0;return function(){var u=hs(),h=16-(u-l);if(l=u,h>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},Uc=Jv(Fc),Qv=function(i,o){return Uc(ps(i,o,zs),i+"")},em=function(i,o,l){if(!jr(l))return!1;var u=typeof o;return!!(u=="number"?Ko(l)&&ea(o,l.length):u=="string"&&o in l)&&ie(l[o],i)},wh=function(i){return Qv(function(o,l){var u=-1,h=l.length,d=h>1?l[h-1]:void 0,m=h>2?l[2]:void 0;for(d=i.length>3&&typeof d=="function"?(h--,d):void 0,m&&em(l[0],l[1],m)&&(d=h<3?void 0:d,h=1),o=Object(o);++u<h;){var w=l[u];w&&i(o,w,u,d)}return o})},nd=Object.prototype.hasOwnProperty,Li=wh(function(i,o){if(qa(o)||Ko(o))Bu(o,Ws(o),i);else for(var l in o)nd.call(o,l)&&Vu(i,l,o[l])}),Eh=function(i,o,l,u){if(!jr(i))return i;for(var h=-1,d=(o=wl(o,i)).length,m=d-1,w=i;w!=null&&++h<d;){var T=Za(o[h]),C=l;if(T==="__proto__"||T==="constructor"||T==="prototype")return i;if(h!=m){var $=w[T];(C=void 0)==void 0&&(C=jr($)?$:ea(o[h+1])?[]:{})}Vu(w,T,C),w=w[T]}return i},ae=function(i,o,l){for(var u=-1,h=o.length,d={};++u<h;){var m=o[u],w=Ja(i,m);l(w,m)&&Eh(d,wl(m,i),w)}return d},qs=function(i,o){return ae(i,o,function(l,u){return lp(i,u)})},Vl=Or?Or.isConcatSpreadable:void 0,La=function(i){return lo(i)||Xa(i)||!!(Vl&&i&&i[Vl])},Dr=function(o,l,u,h,d){var m=-1,w=o.length;for(u||(u=La),d||(d=[]);++m<w;){var T=o[m];u(T)?ga(d,T):d[d.length]=T}return d},Ai=function(i){return i!=null&&i.length?Dr(i):[]},Ur,Qa,Bl,Ea,rd,od,sp,Oh,Wl,Go,Gu,up,Gl,el,Vc,vs,Oa,cp,fp,tl=function(i){return Uc(ps(i,void 0,Ai),i+"")}(function(i,o){return i==null?{}:qs(i,o)});function Eo(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Sh(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function zo(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Kr,oi,Ar,fo,Cn,po,Bc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},El=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],id=(Qa=zo((Ur=function(){function i(u){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),Eo(this,"isSilentMode",Qa,this),Eo(this,"stopZoomGraph",Bl,this),Eo(this,"stopScrollGraph",Ea,this),Eo(this,"stopMoveGraph",rd,this),Eo(this,"adjustEdge",od,this),Eo(this,"adjustEdgeMiddle",sp,this),Eo(this,"adjustEdgeStartAndEnd",Oh,this),Eo(this,"adjustNodePosition",Wl,this),Eo(this,"hideAnchors",Go,this),Eo(this,"allowRotation",Gu,this),Eo(this,"hoverOutline",up,this),Eo(this,"nodeSelectedOutline",Gl,this),Eo(this,"edgeSelectedOutline",el,this),Eo(this,"nodeTextEdit",Vc,this),Eo(this,"edgeTextEdit",vs,this),Eo(this,"nodeTextDraggable",Oa,this),Eo(this,"edgeTextDraggable",cp,this),Eo(this,"autoExpand",fp,this),dp(this,"multipleSelectKey",""),dp(this,"defaultConfig",{}),Li(this,this.getConfigDetail(u))}var o,l;return o=i,(l=[{key:"updateEditConfig",value:function(u){var h=this.getConfigDetail(u);Li(this,h)}},{key:"getConfigDetail",value:function(u){var h=u.isSilentMode,d=u.textEdit,m={};if(h===!1&&Li(m,this.defaultConfig),h===!0&&h!==this.isSilentMode){var w=tl(Bc,El);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Li(m,w)}d===!1&&Li(m,{nodeTextEdit:!1,edgeTextEdit:!1});var T=tl(u,El);return Li(m,T)}},{key:"getConfig",value:function(){return tl(this,El)}}])&&Sh(o.prototype,l),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bl=zo(Ur.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ea=zo(Ur.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rd=zo(Ur.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),od=zo(Ur.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sp=zo(Ur.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oh=zo(Ur.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wl=zo(Ur.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Go=zo(Ur.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gu=zo(Ur.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),up=zo(Ur.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gl=zo(Ur.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),el=zo(Ur.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vc=zo(Ur.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vs=zo(Ur.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Oa=zo(Ur.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cp=zo(Ur.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fp=zo(Ur.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zo(Ur.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Ur.prototype,"updateEditConfig"),Ur.prototype),Ur);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Kr||(Kr={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(oi||(oi={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(Ar||(Ar={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(fo||(fo={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(Cn||(Cn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(po||(po={}));var To,Ro,pp,hp,Wc,Hi,ad,zu,$a;function ms(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return zl(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zl(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function Fa(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function xh(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Ol(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Sa(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(To||(To={}));var vp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},mp=(Ro=function(){function i(u,h){(function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")})(this,i),Ol(this,"MINI_SCALE_SIZE",.2),Ol(this,"MAX_SCALE_SIZE",16),Fa(this,"SCALE_X",pp,this),Fa(this,"SKEW_Y",hp,this),Fa(this,"SKEW_X",Wc,this),Fa(this,"SCALE_Y",Hi,this),Fa(this,"TRANSLATE_X",ad,this),Fa(this,"TRANSLATE_Y",zu,this),Fa(this,"ZOOM_SIZE",$a,this),Ol(this,"eventCenter",void 0),Ol(this,"translateLimitMinX",void 0),Ol(this,"translateLimitMinY",void 0),Ol(this,"translateLimitMaxX",void 0),Ol(this,"translateLimitMaxY",void 0),this.eventCenter=u;var d=h.stopMoveGraph,m=d!==void 0&&d;this.updateTranslateLimits(m)}var o,l;return o=i,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var h=ms(u,2),d=h[0],m=h[1];return[(d-this.TRANSLATE_X)/this.SCALE_X,(m-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var h=ms(u,2),d=h[0],m=h[1];return[d*this.SCALE_X+this.TRANSLATE_X,m*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,h,d){var m=ms(u,2),w=m[0],T=m[1];return[w+h/this.SCALE_X,T+d/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,h){return[u/this.SCALE_X,h/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],h=arguments.length>1?arguments[1]:void 0,d=this.SCALE_X,m=this.SCALE_Y;return u===!0?(d+=this.ZOOM_SIZE,m+=this.ZOOM_SIZE):u===!1?(d-=this.ZOOM_SIZE,m-=this.ZOOM_SIZE):typeof u=="number"&&(d=u,m=u),d<this.MINI_SCALE_SIZE||d>this.MAX_SCALE_SIZE||(h&&(this.TRANSLATE_X-=(d-this.SCALE_X)*h[0],this.TRANSLATE_Y-=(m-this.SCALE_Y)*h[1]),this.SCALE_X=d,this.SCALE_Y=m,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Cn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,h){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+h<=this.translateLimitMaxY&&this.TRANSLATE_Y+h>=this.translateLimitMinY&&(this.TRANSLATE_Y+=h),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,h,d,m){var w=ms(this.CanvasPointToHtmlPoint([u,h]),2),T=d/2-w[0],C=m/2-w[1];this.TRANSLATE_X+=T,this.TRANSLATE_Y+=C,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var h=ms(Array.isArray(u)&&u.length===4?u:vp[u.toString()],4);this.translateLimitMinX=h[0],this.translateLimitMinY=h[1],this.translateLimitMaxX=h[2],this.translateLimitMaxY=h[3]}}],l&&xh(o.prototype,l),i}(),pp=Sa(Ro.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),hp=Sa(Ro.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wc=Sa(Ro.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hi=Sa(Ro.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ad=Sa(Ro.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zu=Sa(Ro.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$a=Sa(Ro.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Sa(Ro.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(Ro.prototype,"zoom"),Ro.prototype),Sa(Ro.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(Ro.prototype,"resetZoom"),Ro.prototype),Sa(Ro.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(Ro.prototype,"translate"),Ro.prototype),Sa(Ro.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(Ro.prototype,"focusOn"),Ro.prototype),Ro),ld=function(i,o){for(var l=-1,u=i==null?0:i.length;++l<u&&o(i[l],l,i)!==!1;);return i},Ah=function(i){var o=[];if(i!=null)for(var l in Object(i))o.push(l);return o},Th=Object.prototype.hasOwnProperty,Mh=function(i){if(!jr(i))return Ah(i);var o=qa(i),l=[];for(var u in i)(u!="constructor"||!o&&Th.call(i,u))&&l.push(u);return l},sd=function(i){return Ko(i)?ho(i,!0):Mh(i)},yp=r(107),gp=function(i,o){var l=-1,u=i.length;for(o||(o=Array(u));++l<u;)o[l]=i[l];return o},Gc=_a(Object.getPrototypeOf,Object),Tr=Object.prototype.hasOwnProperty,tm=function(i){var o=i.length,l=new i.constructor(o);return o&&typeof i[0]=="string"&&Tr.call(i,"index")&&(l.index=i.index,l.input=i.input),l},bp=function(i){var o=new i.constructor(i.byteLength);return new xi(o).set(new xi(i)),o},Ys=function(i,o){var l=bp(i.buffer);return new i.constructor(l,i.byteOffset,i.byteLength)},zc=/\w*$/,nm=function(i){var o=new i.constructor(i.source,zc.exec(i));return o.lastIndex=i.lastIndex,o},kh=Or?Or.prototype:void 0,xa=kh?kh.valueOf:void 0,rm=function(i){return xa?Object(xa.call(i)):{}},Hc=function(i,o){var l=o?bp(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)},ud=function(i,o,l){var u=i.constructor;switch(o){case"[object ArrayBuffer]":return bp(i);case"[object Boolean]":case"[object Date]":return new u(+i);case"[object DataView]":return Ys(i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hc(i,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(i);case"[object RegExp]":return nm(i);case"[object Symbol]":return rm(i)}},_p=Object.create,Ph=function(){function i(){}return function(o){if(!jr(o))return{};if(_p)return _p(o);i.prototype=o;var l=new i;return i.prototype=void 0,l}}(),fa=function(i){return typeof i.constructor!="function"||qa(i)?{}:Ph(Gc(i))},ys=function(i){return Fr(i)&&P(i)=="[object Map]"},cd=yi.a&&yi.a.isMap,Ks=cd?ja(cd):ys,fd=function(i){return Fr(i)&&P(i)=="[object Set]"},wp=yi.a&&yi.a.isSet,dd=wp?ja(wp):fd,Xc="[object Arguments]",pd="[object Function]",hd="[object Object]",Xr={};Xr[Xc]=Xr["[object Array]"]=Xr["[object ArrayBuffer]"]=Xr["[object DataView]"]=Xr["[object Boolean]"]=Xr["[object Date]"]=Xr["[object Float32Array]"]=Xr["[object Float64Array]"]=Xr["[object Int8Array]"]=Xr["[object Int16Array]"]=Xr["[object Int32Array]"]=Xr["[object Map]"]=Xr["[object Number]"]=Xr["[object Object]"]=Xr["[object RegExp]"]=Xr["[object Set]"]=Xr["[object String]"]=Xr["[object Symbol]"]=Xr["[object Uint8Array]"]=Xr["[object Uint8ClampedArray]"]=Xr["[object Uint16Array]"]=Xr["[object Uint32Array]"]=!0,Xr["[object Error]"]=Xr[pd]=Xr["[object WeakMap]"]=!1;var om=function i(o,l,u,h,d,m){var w,T=1&l;if(w!==void 0)return w;if(!jr(o))return o;var C=lo(o);if(C)w=tm(o);else{var $=P(o),J=$==pd||$=="[object GeneratorFunction]";if(Object(Bi.a)(o))return Object(yp.a)(o,T);if($==hd||$==Xc||J&&!d)w=J?{}:fa(o);else{if(!Xr[$])return d?o:{};w=ud(o,$,T)}}m||(m=new ya);var te=m.get(o);if(te)return te;m.set(o,w),dd(o)?o.forEach(function(Pe){w.add(i(Pe,l,u,Pe,o,m))}):Ks(o)&&o.forEach(function(Pe,je){w.set(je,i(Pe,l,u,je,o,m))});var ge=C?void 0:Ya(o);return ld(ge||o,function(Pe,je){ge&&(Pe=o[je=Pe]),Vu(w,je,i(Pe,l,u,je,o,m))}),w},no=function(i){return om(i,5)},vd=function(i,o,l){(l!==void 0&&!ie(i[o],l)||l===void 0&&!(o in i))&&Uu(i,o,l)},Rh=function(i){return Fr(i)&&Ko(i)},Zs=Function.prototype,Nh=Object.prototype,Hu=Zs.toString,Ch=Nh.hasOwnProperty,Js=Hu.call(Object),gi=function(i){if(!Fr(i)||to(i)!="[object Object]")return!1;var o=Gc(i);if(o===null)return!0;var l=Ch.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Hu.call(l)==Js},nl=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Hl=function(i){return Bu(i,sd(i))},Qs=function(i,o,l,u,h,d,m){var w=nl(i,l),T=nl(o,l),C=m.get(T);if(C)vd(i,l,C);else{var $=void 0,J=$===void 0;if(J){var te=lo(T),ge=!te&&Object(Bi.a)(T),Pe=!te&&!ge&&$l(T);$=T,te||ge||Pe?lo(w)?$=w:Rh(w)?$=gp(w):ge?(J=!1,$=Object(yp.a)(T,!0)):Pe?(J=!1,$=Hc(T,!0)):$=[]:gi(T)||Xa(T)?($=w,Xa(w)?$=Hl(w):jr(w)&&!Ha(w)||($=fa(T))):J=!1}J&&(m.set(T,$),h($,T,u,d,m),m.delete(T)),vd(i,l,$)}},eu=function i(o,l,u,h,d){o!==l&&Qf(l,function(m,w){if(d||(d=new ya),jr(m))Qs(o,l,w,u,i,h,d);else{var T=void 0;T===void 0&&(T=m),vd(o,w,T)}},sd)},tu=wh(function(i,o,l){eu(i,o,l)}),md={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Xl=function(i){var o=no(md);return i&&(o=tu(o,i)),o};r(82),r(166);function nu(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}var yd=function(){function i(){var u,h,d;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),d={},(h="_events")in(u=this)?Object.defineProperty(u,h,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[h]=d}var o,l;return o=i,(l=[{key:"on",value:function(u,h,d){var m=this;return u==null||u.split(",").forEach(function(w){w=w.trim(),m._events[w]||(m._events[w]=[]),m._events[w].push({callback:h,once:!!d})}),this}},{key:"once",value:function(u,h){var d=this;u==null||u.split(",").forEach(function(m){return m=m.trim(),d.on(m,h,!0)})}},{key:"emit",value:function(u,h){var d=this;u==null||u.split(",").forEach(function(m){var w=d._events[m]||[],T=d._events["*"]||[],C=function($){for(var J=$.length,te=0;te<J;te++)if($[te]){var ge=$[te],Pe=ge.callback;ge.once&&($.splice(te,1),$.length===0&&delete d._events[m],J--,te--),Pe.apply(d,[h])}};C(w),C(T)})}},{key:"off",value:function(u,h){var d=this;return u||(this._events={}),u.split(",").forEach(function(m){if(h){for(var w=d._events[m]||[],T=w.length,C=0;C<T;C++)w[C].callback===h&&(w.splice(C,1),T--,C--);w.length===0&&delete d._events[m]}else delete d._events[m]}),this}},{key:"getEvents",value:function(){return this._events}}])&&nu(o.prototype,l),i}();function rl(i,o){return o*Math.round(i/o)||i}function qc(i,o){return i%o}function Yc(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return Xu(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Xu(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xu(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var qu=function(i,o,l){var u=Yc(i,2),h=u[0],d=u[1],m=Yc(o,2),w=m[0],T=m[1],C=Yc(l,2),$=C[0],J=C[1];return h>w&&h<$&&d>T&&d<J},Yu=function(i,o){var l=!1;switch(o.multipleSelectKey){case"meta":l=i.metaKey;break;case"alt":l=i.altKey;break;case"shift":l=i.shiftKey;break;case"ctrl":l=i.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var gd=function(i){return function(o,l,u){var h=Object(o);if(!Ko(o)){var d=Lc(l);o=Ws(o),l=function(w){return d(h[w],w,h)}}var m=i(o,l,u);return m>-1?h[d?o[m]:m]:void 0}},Ku=function(i,o,l,u){for(var h=i.length,d=l+-1;++d<h;)if(o(i[d],d,i))return d;return-1},Ep=/\s/,bd=function(i){for(var o=i.length;o--&&Ep.test(i.charAt(o)););return o},Dh=/^\s+/,Op=function(i){return i&&i.slice(0,bd(i)+1).replace(Dh,"")},ol=/^[-+]0x[0-9a-f]+$/i,Sp=/^0b[01]+$/i,xp=/^0o[0-7]+$/i,Ap=parseInt,Zu=function(i){if(typeof i=="number")return i;if(mr(i))return NaN;if(jr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=jr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=Op(i);var l=Sp.test(i);return l||xp.test(i)?Ap(i.slice(2),l?2:8):ol.test(i)?NaN:+i},Sl=1/0,Kc=function(i){return i?(i=Zu(i))===Sl||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},_d=function(i){var o=Kc(i),l=o%1;return o==o?l?o-l:o:0},wd=Math.max,gs,bs=gd(function(i,o,l){var u=i==null?0:i.length;if(!u)return-1;var h=l==null?0:_d(l);return h<0&&(h=wd(u+h,0)),Ku(i,Lc(o),h)}),nr=new Uint8Array(16);function Ju(){if(!gs&&!(gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gs(nr)}for(var Zc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,il=function(i){return typeof i=="string"&&Zc.test(i)},fi=[],ru=0;ru<256;++ru)fi.push((ru+256).toString(16).substr(1));var No=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(fi[i[o+0]]+fi[i[o+1]]+fi[i[o+2]]+fi[i[o+3]]+"-"+fi[i[o+4]]+fi[i[o+5]]+"-"+fi[i[o+6]]+fi[i[o+7]]+"-"+fi[i[o+8]]+fi[i[o+9]]+"-"+fi[i[o+10]]+fi[i[o+11]]+fi[i[o+12]]+fi[i[o+13]]+fi[i[o+14]]+fi[i[o+15]]).toLowerCase();if(!il(l))throw TypeError("Stringified UUID is invalid");return l},_s=function(i,o,l){var u=(i=i||{}).random||(i.rng||Ju)();return u[6]=15&u[6]|64,u[8]=63&u[8]|128,No(u)},ra=function(){return _s()},Jc=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=i.nodes.reduce(function(u,h){return u[h.id]=o+_s(),h.id=u[h.id],u},{});return i.edges.forEach(function(u){u.id=o+_s(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),i},$i=(r(105),r(127),r(207),function(i,o,l){var u=i.x,h=i.y,d=o.x,m=o.y,w=l.x,T=l.y,C=(T-m)/(w-d),$=m-C*d;return u>=d&&u<=w&&h>=m&&h<=T&&Math.abs(h-C*u+$)<Number.EPSILON});function Ho(i){return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ho(i)}function xl(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Al(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xl(Object(l),!0).forEach(function(u){Ed(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xl(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Ed(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Pt,ou,Qc,ef,ws,iu,Od,Tp,au,tf,Sd,Mp,Tl,kp,al,Es,xd,jh,Ih,Lh,Pp,Ad=function(i){return i.anchors},nf=function(i,o){for(var l,u=o.nodes,h=u.length-1;h>=0;h--){var d=u[h];if(im(i,d)){var m=d.getTargetAnchor(i);if(m){var w={node:d,anchorIndex:m.index,anchor:m.anchor};l&&!$h(d,l.node,o)||(l=w)}}}return l},$h=function(i,o,l){return i.zIndex>o.zIndex||l.nodesMap[i.id].index>l.nodesMap[o.id].index},ll=function(i,o,l,u){return Math.hypot(i-l,o-u)},Os=function(i,o){var l=!1,u=Oo(o);return i.x>=u.minX-0&&i.x<=u.maxX+0&&i.y>=u.minY-0&&i.y<=u.maxY+0&&(l=!0),l},im=function(i,o){var l=!1,u=Oo(o);return i.x>=u.minX-5&&i.x<=u.maxX+5&&i.y>=u.minY-5&&i.y<=u.maxY+5&&(l=!0),l},Oo=function(i){var o=i.x,l=i.y,u=i.width,h=i.height;return{minX:o-u/2,minY:l-h/2,maxX:o+u/2,maxY:l+h/2,x:o,y:l,width:u,height:h,centerX:o,centerY:l}},rf=function(i,o,l){var u,h=function(m){var w=m,T=w.x,C=w.y,$=w.width,J=w.height,te=w.radius;return[{x:T-$/2+te,y:C-J/2+te,r:te},{x:T+$/2-te,y:C-J/2+te,r:te},{x:T-$/2+te,y:C+J/2-te,r:te},{x:T+$/2-te,y:C+J/2-te,r:te}]}(l),d=Number.MAX_SAFE_INTEGER;return h.forEach(function(m){var w=ll(i.x,i.y,m.x,m.y);w<d&&(d=w,u=m)}),lu(i,o,u)},lu=function(i,o,l){var u,h=l,d=h.x,m=h.y,w=h.r;if(o===po.HORIZONTAL){var T=d-Math.sqrt(w*w-(i.y-m)*(i.y-m)),C=d+Math.sqrt(w*w-(i.y-m)*(i.y-m));u={x:Math.abs(T-i.x)<Math.abs(C-i.x)?T:C,y:i.y}}else if(o===po.VERTICAL){var $=m-Math.sqrt(w*w-(i.x-d)*(i.x-d)),J=m+Math.sqrt(w*w-(i.x-d)*(i.x-d)),te=Math.abs($-i.y)<Math.abs(J-i.y)?$:J;u={x:i.x,y:te}}return u},of=function(i,o){var l=o,u=!1,h=l.x-l.width/2+l.radius,d=l.x+l.width/2-l.radius,m=l.y-l.height/2+l.radius,w=l.y+l.height/2-l.radius,T=l.x,C=l.y,$=l.width,J=l.height;return i.y===C+J/2||i.y===C-J/2?u=i.x>h&&i.x<d:i.x!==T+$/2&&i.x!==T-$/2||(u=i.y>m&&i.y<w),u},Qu=function(i,o,l){var u,h=l,d=h.x,m=h.y,w=h.rx,T=h.ry;if(o===po.HORIZONTAL){var C=d-Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T)),$=d+Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T));u={x:Math.abs(C-i.x)<Math.abs($-i.x)?C:$,y:i.y}}else if(o===po.VERTICAL){var J=m-Math.sqrt(T*T-(i.x-d)*(i.x-d)*T*T/(w*w)),te=m+Math.sqrt(T*T-(i.x-d)*(i.x-d)*T*T/(w*w)),ge=Math.abs(J-i.y)<Math.abs(te-i.y)?J:te;u={x:i.x,y:ge}}return u},af=function(i,o,l){for(var u,h=l.pointsPosition,d=Number.MAX_SAFE_INTEGER,m=[],w=0;w<h.length;w++)m.push({start:h[w],end:h[(w+1)%h.length]});return m.forEach(function(T){var C=T.start,$=T.end,J=C,te=$;C.x>$.x&&(J=$,te=C);var ge={x:i.x,y:i.y};if(J.x===te.x&&o===po.HORIZONTAL&&(ge={x:J.x,y:i.y}),J.y===te.y&&o===po.VERTICAL&&(ge={x:i.x,y:J.y}),J.x!==te.x&&J.y!==te.y){var Pe=(te.y-J.y)/(te.x-J.x),je=(J.x*te.y-te.x*J.y)/(J.x-te.x);o===po.HORIZONTAL?ge={x:(i.y-je)/Pe,y:i.y}:o===po.VERTICAL&&(ge={x:i.x,y:Pe*i.x+je})}if($i(ge,C,$)){var st=ll(ge.x,ge.y,i.x,i.y);st<d&&(d=st,u=ge)}}),u},lf=function(i,o,l,u){var h=i.x,d=i.y;return o.x>i.x?h=i.x+l/2:o.x<i.x&&(h=i.x-l/2),o.y>i.y?d=i.y+u/2:o.y<i.y&&(d=i.y-u/2),{x:h,y:d}},sf=function(i){var o=i.rows,l=i.style,u=i.rowsLength,h=i.className,d=document.createElement("div");d.style.fontSize=l.fontSize,d.style.width=l.width,d.className=h,d.style.lineHeight=l.lineHeight,d.style.padding=l.padding,l.fontFamily&&(d.style.fontFamily=l.fontFamily),u>1?o.forEach(function(w){var T=document.createElement("div");T.textContent=w,d.appendChild(T)}):d.textContent=o,document.body.appendChild(d);var m=d.clientHeight;return document.body.removeChild(d),m},su=function(i){var o=i.rows,l=i.rowsLength,u=i.fontSize,h=0;return o&&o.forEach(function(d){var m=Io(d);h=m>h?m:h}),{width:Math.ceil(h/2)*u+u/4,height:l*(u+2)+u/4}},ql=function(i){return Ho(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},bi=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Td=1e3,uf=999,uu=function(){return++Td};function ec(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Ti(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ec(Object(l),!0).forEach(function(u){Xi(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ec(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Mo(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function cf(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Xi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Un(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Md=(Pt=function(){function i(u,h){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Xi(this,"id",""),Mo(this,"type",ou,this),Mo(this,"sourceNodeId",Qc,this),Mo(this,"targetNodeId",ef,this),Mo(this,"startPoint",ws,this),Mo(this,"endPoint",iu,this),Mo(this,"text",Od,this),Mo(this,"properties",Tp,this),Mo(this,"points",au,this),Mo(this,"pointsList",tf,this),Mo(this,"isSelected",Sd,this),Mo(this,"isHovered",Mp,this),Mo(this,"isHitable",Tl,this),Mo(this,"draggable",kp,this),Mo(this,"visible",al,this),Xi(this,"virtual",!1),Mo(this,"isAnimation",Es,this),Mo(this,"isShowAdjustPoint",xd,this),Xi(this,"graphModel",void 0),Mo(this,"zIndex",jh,this),Xi(this,"BaseType",fo.EDGE),Xi(this,"modelType",Ar.EDGE),Mo(this,"state",Ih,this),Xi(this,"additionStateData",void 0),Xi(this,"sourceAnchorId",""),Xi(this,"targetAnchorId",""),Xi(this,"menu",void 0),Xi(this,"customTextPosition",!1),Mo(this,"style",Lh,this),Mo(this,"arrowConfig",Pp,this),this.graphModel=h,this.initEdgeData(u),this.setAttributes()}var o,l;return o=i,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var h=this.graphModel.idGenerator,d=h&&h(u.type),m=this.createId();u.id=m||d||ra()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var w=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=w,Li(this,Dn(u)),this.graphModel.overlapMode===To.INCREASE&&(this.zIndex=u.zIndex||uu()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ti(Ti({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ti({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return no(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return no(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),h=this.getEdgeAnimationStyle(),d=this.graphModel.theme.arrow,m=this.isAnimation?h.stroke:u.stroke;return Ti(Ti({},u),{},{fill:m,stroke:m},d)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return no(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,h;return(u=this.graphModel)===null||u===void 0||(h=u.nodesMap[this.sourceNodeId])===null||h===void 0?void 0:h.model}},{key:"targetNode",get:function(){var u,h;return(u=this.graphModel)===null||u===void 0||(h=u.nodesMap[this.targetNodeId])===null||h===void 0?void 0:h.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,h,d){var m,w,T=Ad(u);return d&&(m=bs(T,function(C){return C.id===d}))||T.forEach(function(C){var $=hr(C,h);(w===void 0||$<w)&&(w=$,m=C)}),m}},{key:"getEndAnchor",value:function(u,h){var d,m,w=this,T=Ad(u);return h&&(d=bs(T,function(C){return C.id===h}))||T.forEach(function(C){var $=hr(C,w.startPoint);(m===void 0||$<m)&&(m=$,d=C)}),d}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,h=u.x,d=u.y,m=u.value,w={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return m&&(w.text={x:h,y:d,value:m}),this.graphModel.overlapMode===To.INCREASE&&(w.zIndex=this.zIndex),w}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,h){this.properties[u]=bi(h),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Ti(Ti({},Object(c.I)(this.properties)),bi(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var h=this.arrowConfig,d=h.markerEnd,m=h.markerStart;m&&m==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),d&&d==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,h){this.style=Ti(Ti({},this.style),{},Xi({},u,bi(h)))}},{key:"setStyles",value:function(u){this.style=Ti(Ti({},this.style),bi(u))}},{key:"updateStyles",value:function(u){this.style=Ti({},bi(u))}},{key:"formatText",value:function(u){var h=this.textPosition,d=h.x,m=h.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||d,y:u.text.y||m,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:d,y:m,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,h=u.x,d=u.y;this.text.x=h,this.text.y=d}},{key:"moveText",value:function(u,h){if(this.text){var d=this.text,m=d.x,w=d.y,T=d.value,C=d.draggable,$=d.editable;this.text={value:T,draggable:C,x:m+u,y:w+h,editable:$}}}},{key:"setText",value:function(u){u&&Li(this.text,u)}},{key:"updateText",value:function(u){this.text=Ti(Ti({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var h=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!h)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:h.x,y:h.y}),this.targetAnchorId||(this.targetAnchorId=h.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,h){this.state=u,this.additionStateData=h}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,h){this.startPoint.x+=u,this.startPoint.y+=h}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,h){this.endPoint.x+=u,this.endPoint.y+=h}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Li(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var h=u.startPoint,d=u.endPoint;this.updateStartPoint({x:h.x,y:h.y}),this.updateEndPoint({x:d.x,y:d.y})}}],l&&cf(o.prototype,l),i}(),ou=Un(Pt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=Un(Pt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Un(Pt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ws=Un(Pt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),iu=Un(Pt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Od=Un(Pt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Tp=Un(Pt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),au=Un(Pt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tf=Un(Pt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sd=Un(Pt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mp=Un(Pt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tl=Un(Pt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kp=Un(Pt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=Un(Pt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Es=Un(Pt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xd=Un(Pt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jh=Un(Pt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ih=Un(Pt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Lh=Un(Pt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pp=Un(Pt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Un(Pt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"sourceNode"),Pt.prototype),Un(Pt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"targetNode"),Pt.prototype),Un(Pt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"textPosition"),Pt.prototype),Un(Pt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperty"),Pt.prototype),Un(Pt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"deleteProperty"),Pt.prototype),Un(Pt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperties"),Pt.prototype),Un(Pt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"changeEdgeId"),Pt.prototype),Un(Pt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyle"),Pt.prototype),Un(Pt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyles"),Pt.prototype),Un(Pt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStyles"),Pt.prototype),Un(Pt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"formatText"),Pt.prototype),Un(Pt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"resetTextPosition"),Pt.prototype),Un(Pt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveText"),Pt.prototype),Un(Pt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setText"),Pt.prototype),Un(Pt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateText"),Pt.prototype),Un(Pt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setAnchors"),Pt.prototype),Un(Pt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setSelected"),Pt.prototype),Un(Pt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHovered"),Pt.prototype),Un(Pt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHitable"),Pt.prototype),Un(Pt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"openEdgeAnimation"),Pt.prototype),Un(Pt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"closeEdgeAnimation"),Pt.prototype),Un(Pt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setElementState"),Pt.prototype),Un(Pt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStartPoint"),Pt.prototype),Un(Pt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveStartPoint"),Pt.prototype),Un(Pt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateEndPoint"),Pt.prototype),Un(Pt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveEndPoint"),Pt.prototype),Un(Pt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setZIndex"),Pt.prototype),Un(Pt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"initPoints"),Pt.prototype),Un(Pt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAttributes"),Pt.prototype),Un(Pt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustStart"),Pt.prototype),Un(Pt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustEnd"),Pt.prototype),Un(Pt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAfterAdjustStartAndEnd"),Pt.prototype),Pt),ff=Md;function kd(i){return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},kd(i)}function Rp(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Fh(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Rp(Object(l),!0).forEach(function(u){xs(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Rp(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Ss(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Uh(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function cu(){return cu=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=Vh(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},cu.apply(this,arguments)}function Vh(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yl(i))!==null;);return i}function Np(i,o){return Np=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Np(i,o)}function df(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Yl(i);if(o){var h=Yl(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return Bh(this,l)}}function Bh(i,o){if(o&&(kd(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ua(i)}function Ua(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yl(i){return Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yl(i)}function xs(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Vn,Cp,tc=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Np(d,m)})(h,i);var o,l,u=df(h);function h(){var d;Ss(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return xs(Ua(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.LINE_EDGE),d}return o=h,(l=[{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.line;return Fh(Fh({},cu(Yl(h.prototype),"getEdgeStyle",this).call(this)),no(d))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Uh(o.prototype,l),h}(ff);function Kl(i){return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kl(i)}function pf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return qi(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qi(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qi(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function sl(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Co(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?sl(Object(l),!0).forEach(function(u){Dp(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):sl(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function da(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Va(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function am(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function hf(){return hf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=fu(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},hf.apply(this,arguments)}function fu(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=oa(i))!==null;);return i}function br(i,o){return br=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},br(i,o)}function Wh(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=oa(i);if(o){var h=oa(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return pa(this,l)}}function pa(i,o){if(o&&(Kl(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ko(i)}function ko(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function oa(i){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},oa(i)}function Dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mi(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Aa=(Vn=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&br(d,m)})(h,i);var o,l,u=Wh(h);function h(){var d;Va(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Dp(ko(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.POLYLINE_EDGE),Dp(ko(d),"draggingPointList",void 0),da(ko(d),"dbClickPosition",Cp,ko(d)),d}return o=h,(l=[{key:"initEdgeData",value:function(d){this.offset=30,hf(oa(h.prototype),"initEdgeData",this).call(this,d)}},{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.polyline;return Co(Co({},hf(oa(h.prototype),"getEdgeStyle",this).call(this)),no(d))}},{key:"getTextPosition",value:function(){var d,m=(d=this.text)===null||d===void 0?void 0:d.value;if(this.dbClickPosition&&!m){var w=this.dbClickPosition;return{x:w.x,y:w.y}}var T=or(this.points),C=pf(Wn(T),2),$=C[0],J=C[1];return{x:($.x+J.x)/2,y:($.y+J.y)/2}}},{key:"getAfterAnchor",value:function(d,m,w){var T,C;return w.forEach(function($){var J;d===po.HORIZONTAL?J=Math.abs(m.y-$.y):d===po.VERTICAL&&(J=Math.abs(m.x-$.x)),(!C||C>J)&&(C=J,T=$)}),T}},{key:"getCrossPoint",value:function(d,m,w){var T;return d===po.HORIZONTAL?T={x:w.x,y:m.y}:d===po.VERTICAL&&(T={x:m.x,y:w.y}),T}},{key:"removeCrossPoints",value:function(d,m,w){var T=w.map(function(at){return at});if(d===1){var C=T[d],$=T[m],J=T[d-1];if(ir(J,C,this.sourceNode)){if(_r(C,$,this.sourceNode)){var te=jo(C,$,this.sourceNode);te&&(T[d]=te,T.splice(d-1,1),d--,m--)}}else this.sourceNode.anchors.forEach(function(at){(at.x===J.x&&at.x===C.x||at.y===J.y&&at.y===C.y)&&ll(at.x,at.y,C.x,C.y)<ll(J.x,J.y,C.x,C.y)&&(T[d-1]=at)})}if(m===w.length-2){var ge=T[d],Pe=T[m],je=T[m+1];if(ir(Pe,je,this.targetNode)){if(_r(ge,Pe,this.targetNode)){var st=jo(ge,Pe,this.targetNode);st&&(T[m]=st,T.splice(m+1,1))}}else this.targetNode.anchors.forEach(function(at){(at.x===je.x&&at.x===Pe.x||at.y===je.y&&at.y===Pe.y)&&ll(at.x,at.y,Pe.x,Pe.y)<ll(je.x,je.y,Pe.x,Pe.y)&&(T[m+1]=at)})}return T}},{key:"getDraggingPoints",value:function(d,m,w,T,C){var $=C.map(function(ge){return ge}),J=this.getAfterAnchor(d,w,T),te=this.getCrossPoint(d,w,J);return m==="start"?($.unshift(te),$.unshift(J)):($.push(te),$.push(J)),$}},{key:"updateCrossPoints",value:function(d){var m=d.map(function(Bt){return Bt}),w=d[0],T=d[1],C=d[m.length-2],$=d[m.length-1],J=this.sourceNode,te=this.targetNode,ge=J.modelType,Pe=te.modelType,je=Po(w,T),st=m[0];switch(ge){case Ar.RECT_NODE:J.radius!==0&&(of(w,J)||(st=rf(w,je,J)));break;case Ar.CIRCLE_NODE:st=lu(w,je,J);break;case Ar.ELLIPSE_NODE:st=Qu(w,je,J);break;case Ar.DIAMOND_NODE:case Ar.POLYGON_NODE:st=af(w,je,J)}st&&(m[0]=st);var at=Po(C,$),bt=m[m.length-1];switch(Pe){case Ar.RECT_NODE:te.radius!==0&&(of($,te)||(bt=rf($,at,te)));break;case Ar.CIRCLE_NODE:bt=lu($,at,te);break;case Ar.ELLIPSE_NODE:bt=Qu($,at,te);break;case Ar.DIAMOND_NODE:case Ar.POLYGON_NODE:bt=af($,at,te)}return bt&&(m[m.length-1]=bt),m}},{key:"getData",value:function(){var d=hf(oa(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Object.assign({},d,{pointsList:m})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(d){return"".concat(d.x,",").concat(d.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var d=sr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=d,this.points=d.map(function(m){return"".concat(m.x,",").concat(m.y)}).join(" ")}},{key:"updateStartPoint",value:function(d){this.startPoint=Object.assign({},d),this.updatePoints()}},{key:"moveStartPoint",value:function(d,m){this.startPoint.x+=d,this.startPoint.y+=m,this.updatePoints()}},{key:"updateEndPoint",value:function(d){this.endPoint=Object.assign({},d),this.updatePoints()}},{key:"moveEndPoint",value:function(d,m){this.endPoint.x+=d,this.endPoint.y+=m,this.updatePoints()}},{key:"updatePointsList",value:function(d,m){this.pointsList.forEach(function(C){C.x+=d,C.y+=m});var w=this.pointsList[0];this.startPoint=Object.assign({},w);var T=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},T),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(d){return d})}},{key:"dragAppendSimple",value:function(d,m){this.isDragging=!0;var w=d.start,T=d.end,C=d.startIndex,$=d.endIndex,J=d.direction,te=this.pointsList,ge=te;return J===po.HORIZONTAL?(te[C]={x:w.x,y:w.y+m.y},te[$]={x:T.x,y:T.y+m.y},ge=this.pointsList.map(function(Pe){return Pe})):J===po.VERTICAL&&(te[C]={x:w.x+m.x,y:w.y},te[$]={x:T.x+m.x,y:T.y},ge=this.pointsList.map(function(Pe){return Pe})),this.updatePointsAfterDrag(ge),this.draggingPointList=ge,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[C]),end:Object.assign({},te[$]),startIndex:C,endIndex:$,direction:J}}},{key:"dragAppend",value:function(d,m){this.isDragging=!0;var w=d.start,T=d.end,C=d.startIndex,$=d.endIndex,J=d.direction,te=this.pointsList;if(J===po.HORIZONTAL){te[C]={x:w.x,y:w.y+m.y},te[$]={x:T.x,y:T.y+m.y};var ge=this.pointsList.map(function(hn){return hn});if(C!==0&&$!==this.pointsList.length-1&&(ge=this.removeCrossPoints(C,$,ge)),C===0){var Pe={x:w.x,y:w.y+m.y};if(!Os(Pe,this.sourceNode)){var je=this.sourceNode.anchors;ge=this.getDraggingPoints(J,"start",Pe,je,ge)}}if($===this.pointsList.length-1){var st={x:T.x,y:T.y+m.y};if(!Os(st,this.targetNode)){var at=this.targetNode.anchors;ge=this.getDraggingPoints(J,"end",st,at,ge)}}this.updatePointsAfterDrag(ge),this.draggingPointList=ge}else if(J===po.VERTICAL){te[C]={x:w.x+m.x,y:w.y},te[$]={x:T.x+m.x,y:T.y};var bt=this.pointsList.map(function(hn){return hn});if(C!==0&&$!==this.pointsList.length-1&&(bt=this.removeCrossPoints(C,$,bt)),C===0){var Bt={x:w.x+m.x,y:w.y};if(!Os(Bt,this.sourceNode)){var gn=this.sourceNode.anchors;bt=this.getDraggingPoints(J,"start",Bt,gn,bt)}}if($===this.pointsList.length-1){var yn={x:T.x+m.x,y:T.y};if(!Os(yn,this.targetNode)){var zn=this.targetNode.anchors;bt=this.getDraggingPoints(J,"end",yn,zn,bt)}}this.updatePointsAfterDrag(bt),this.draggingPointList=bt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[C]),end:Object.assign({},te[$]),startIndex:C,endIndex:$,direction:J}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var d=pn(or(this.points));this.pointsList=d.map(function(T){return T}),this.draggingPointList=[];var m=d[0];this.startPoint=Object.assign({},m);var w=d[d.length-1];this.endPoint=Object.assign({},w)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(d){var m=this.updateCrossPoints(d);this.points=m.map(function(w){return"".concat(w.x,",").concat(w.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var d=this.pointsList;return d[d.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(d){var m=d.startPoint,w=d.endPoint,T=d.sourceNode,C=d.targetNode,$=sr({x:m.x,y:m.y},{x:w.x,y:w.y},T,C,this.offset||0);this.pointsList=$,this.initPoints()}}])&&am(o.prototype,l),h}(ff),Cp=Mi(Vn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi(Vn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"initPoints"),Vn.prototype),Mi(Vn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePoints"),Vn.prototype),Mi(Vn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateStartPoint"),Vn.prototype),Mi(Vn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"moveStartPoint"),Vn.prototype),Mi(Vn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateEndPoint"),Vn.prototype),Mi(Vn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"moveEndPoint"),Vn.prototype),Mi(Vn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePointsList"),Vn.prototype),Mi(Vn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendStart"),Vn.prototype),Mi(Vn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendSimple"),Vn.prototype),Mi(Vn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppend"),Vn.prototype),Mi(Vn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendEnd"),Vn.prototype),Mi(Vn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePointsAfterDrag"),Vn.prototype),Mi(Vn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"getAdjustStart"),Vn.prototype),Mi(Vn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"getAdjustEnd"),Vn.prototype),Mi(Vn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateAfterAdjustStartAndEnd"),Vn.prototype),Vn),du=function(i){var o=i.start,l=i.end,u=i.offset,h=i.verticalLength,d=i.type,m={leftX:0,leftY:0,rightX:0,rightY:0},w=Math.atan((l.y-o.y)/(l.x-o.x)),T=Math.atan(u/h),C=Math.sqrt(h*h+u*u);return d==="start"?l.x>=o.x?(m.leftX=o.x+C*Math.sin(w+T),m.leftY=o.y-C*Math.cos(w+T),m.rightX=o.x-C*Math.sin(w-T),m.rightY=o.y+C*Math.cos(w-T)):(m.leftX=o.x-C*Math.sin(w+T),m.leftY=o.y+C*Math.cos(w+T),m.rightX=o.x+C*Math.sin(w-T),m.rightY=o.y-C*Math.cos(w-T)):d==="end"&&(l.x>=o.x?(m.leftX=l.x+C*Math.sin(w-T),m.leftY=l.y-C*Math.cos(w-T),m.rightX=l.x-C*Math.sin(w+T),m.rightY=l.y+C*Math.cos(w+T)):(m.leftX=l.x-C*Math.sin(w-T),m.leftY=l.y+C*Math.cos(w-T),m.rightX=l.x+C*Math.sin(w+T),m.rightY=l.y-C*Math.cos(w+T))),m},vf={x:1,y:0,z:0};function Do(i,o,l,u,h){for(var d=function(Pe){if(Pe<0||Pe>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-Pe,3)+3*o.x*Pe*Math.pow(1-Pe,2)+3*l.x*Math.pow(Pe,2)*(1-Pe)+u.x*Math.pow(Pe,3),y:i.y*Math.pow(1-Pe,3)+3*o.y*Pe*Math.pow(1-Pe,2)+3*l.y*Math.pow(Pe,2)*(1-Pe)+u.y*Math.pow(Pe,3)}},m=0,w=2,T=u.x,C=u.y,$=u;m<h&&w<50;){var J=$=d(1-w/100),te=J.x,ge=J.y;m=ll(T,C,te,ge),w++}return $}function Xo(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function Pd(i){return u=function(d,m){return d.x*m.y-d.y*m.x}(o=vf,l=i),h=Math.acos(function(d,m){var w=[d.x,d.y,d.z];return[m.x,m.y,m.z].reduce(function(T,C,$){return T+C*w[$]})}(Xo(o),Xo(l))),u>=0?h:-h;var o,l,u,h}function jp(i){return i*(180/Math.PI)}function W(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function le(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?W(Object(l),!0).forEach(function(u){Oe(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):W(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Oe(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function rt(i){return function(o){if(Array.isArray(o))return Rt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||pt(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vt(i){return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},vt(i)}function et(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||pt(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(i,o){if(i){if(typeof i=="string")return Rt(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Rt(i,o):void 0}}function Rt(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var $t=function(i,o){var l;switch(i.type){case"line":default:l=new tc(i,o);break;case"polyline":l=new Aa(i,o)}return l},Nt=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ft=function(i){var o=[],l={};return i.forEach(function(u){var h="".concat(u.x,"-").concat(u.y);u.id=h,l[h]=u}),Object.keys(l).forEach(function(u){o.push(l[u])}),o},Ht=function(i,o){var l=[i,{x:i.x,y:o.y},o];return ft(l)},Vt=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},Ct=function(i,o){var l=Math.abs(i.x-o.centerX),u=Math.abs(i.y-o.centerY);return l/o.width>u/o.height?po.HORIZONTAL:po.VERTICAL},Ot=function(i,o,l){return Ct(l,o)===po.HORIZONTAL?{x:l.x>i.centerX?i.maxX:i.minX,y:l.y}:{x:l.x,y:l.y>i.centerY?i.maxY:i.minY}},Ze=function(i,o){var l=Math.min(i.minX,o.minX),u=Math.min(i.minY,o.minY),h=Math.max(i.maxX,o.maxX),d=Math.max(i.maxY,o.maxY);return{centerX:(l+h)/2,centerY:(u+d)/2,minX:l,minY:u,maxX:h,maxY:d,height:d-u,width:h-l}},ct=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=[],u=[];i.forEach(function($){l.push($.x),u.push($.y)});var h=Math.min.apply(Math,l),d=Math.max.apply(Math,l),m=Math.min.apply(Math,u),w=Math.max.apply(Math,u),T=d-h,C=w-m;return o&&(T+=o,C+=o),{centerX:(h+d)/2,centerY:(m+w)/2,maxX:d,maxY:w,minX:h,minY:m,x:(h+d)/2,y:(m+w)/2,height:C,width:T}},It=function(i){var o=i.minX,l=i.minY,u=i.maxX,h=i.maxY;return[{x:o,y:l},{x:u,y:l},{x:u,y:h},{x:o,y:h}]},Jt=function(i,o){var l=i.x,u=i.y;return l<o.minX||l>o.maxX||u<o.minY||u>o.maxY},At=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},on=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},Mt=function(i,o){return At(i,o.x).concat(on(i,o.y))},Gt=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},Tt=function(i,o){var l=0;return o.forEach(function(u){u&&(i.x===u.x&&(l+=-2),i.y===u.y&&(l+=-2))}),l},qt=function(i,o,l,u,h){return Gt(i,o)+Gt(i,l)+Tt(i,[o,l,u,h])},Pn=function i(o,l,u,h,d){d||(d=0),o.unshift(l[h]),u[h]&&u[h]!==h&&d<=100&&i(o,l,u,u[h],d+1)},Bn=function(i,o){var l=i.indexOf(o);l>-1&&i.splice(l,1)},Dt=function(i,o,l,u){var h=o.x-i.x,d=o.y-i.y,m=u.x-l.x,w=u.y-l.y,T=(-d*(i.x-l.x)+h*(i.y-l.y))/(-m*d+h*w),C=(m*(i.y-l.y)-w*(i.x-l.x))/(-m*d+h*w);return T>=0&&T<=1&&C>=0&&C<=1},kt=function(i,o,l){if(l.width===0&&l.height===0)return!1;var u=et(It(l),4),h=u[0],d=u[1],m=u[2],w=u[3];return Dt(i,o,h,d)||Dt(i,o,h,w)||Dt(i,o,d,m)||Dt(i,o,m,w)},xt=function(i,o,l,u){var h=[];return i.forEach(function(d){d!==o&&(d.x!==o.x&&d.y!==o.y||kt(d,o,l)||kt(d,o,u)||h.push(d))}),ft(h)},jn=function(i,o,l,u,h,d,m){var w=[],T=[o],C={},$={},J={};$[o.id]=0,J[o.id]=qt(o,l,o);var te={};i.forEach(function(je){te[je.id]=je});for(var ge=function(){var je=void 0,st=1/0;if(T.forEach(function(bt){J[bt.id]<st&&(st=J[bt.id],je=bt)}),je===l){var at=[];return Pn(at,te,C,l.id),{v:at}}Bn(T,je),w.push(je),xt(i,je,u,h).forEach(function(bt){if(w.indexOf(bt)===-1){T.indexOf(bt)===-1&&T.push(bt);var Bt=J[je.id]+Gt(je,bt);$[bt.id]&&Bt>=$[bt.id]||(C[bt.id]=je.id,$[bt.id]=Bt,J[bt.id]=$[bt.id]+qt(bt,l,o,d,m))}})};T.length;){var Pe=ge();if(vt(Pe)==="object")return Pe.v}return[o,l]},rr=function(i){return Oo(i)},pn=function(i){for(var o=1;o<i.length-1;){var l=i[o-1],u=i[o],h=i[o+1];l.x===u.x&&u.x===h.x||l.y===u.y&&u.y===h.y?i.splice(o,1):o++}return i},sr=function(i,o,l,u,h){var d=rr(l),m=rr(u),w=Vt(d,h),T=Vt(m,h),C=Ot(w,d,i),$=Ot(T,m,o);if(Nt(w,T)){var J=Zo(i,o,C,$);return[i,C].concat(rt(J),[$,o])}var te=ct([C,$]),ge=Ze(w,te),Pe=Ze(T,te),je=[];je=(je=je.concat(It(ge))).concat(It(Pe));var st={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[te,ge,Pe].forEach(function(bt){je=je.concat(Mt(bt,st).filter(function(Bt){return Jt(Bt,w)&&Jt(Bt,T)}))}),[{x:C.x,y:$.y},{x:$.x,y:C.y}].forEach(function(bt){Jt(bt,w)&&Jt(bt,T)&&je.push(bt)}),je.unshift(C),je.push($),je=ft(je);var at=jn(je,C,$,d,m,i,o);return at.unshift(i),at.push(o),at.length>2&&(at=pn(at)),ft(at)},Wn=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var l=i[0],u=i[1],h=ll(l.x,l.y,u.x,u.y),d=1;d<i.length-1;d++){var m=i[d],w=i[d+1],T=ll(m.x,m.y,w.x,w.y);T>h&&(h=T,l=m,u=w)}o=[l,u]}return o},ir=function(i,o,l){var u=Os(i,l),h=Os(o,l);return u&&h},_r=function(i,o,l){var u=Os(i,l),h=Os(o,l);return!(u&&h)&&(u||h)},jo=function(i,o,l){for(var u,h,d=Oo(l),m=It(d),w=0;w<m.length;w++)Dt(i,o,m[w],m[(w+1)%m.length])&&(h=[m[w],m[(w+1)%m.length]]);return h&&(u=function(T,C,$,J){var te=(C.y-T.y)*(J.x-$.x)-(T.x-C.x)*($.y-J.y);if(te===0)return!1;var ge=((C.x-T.x)*(J.x-$.x)*($.y-T.y)+(C.y-T.y)*(J.x-$.x)*T.x-(J.y-$.y)*(C.x-T.x)*$.x)/te,Pe=-((C.y-T.y)*(J.y-$.y)*($.x-T.x)+(C.x-T.x)*(J.y-$.y)*T.y-(J.x-$.x)*(C.y-T.y)*$.y)/te;return(ge-T.x)*(ge-C.x)<=0&&(Pe-T.y)*(Pe-C.y)<=0&&(ge-$.x)*(ge-J.x)<=0&&(Pe-$.y)*(Pe-J.y)<=0&&{x:ge,y:Pe}}(i,o,h[0],h[1])),u},Po=function(i,o){var l;return i.x===o.x?l=po.VERTICAL:i.y===o.y&&(l=po.HORIZONTAL),l},or=function(i){var o=i.split(" "),l=[];return o&&o.forEach(function(u){var h=et(u.split(","),2),d=h[0],m=h[1];l.push({x:Number(d),y:Number(m)})}),l},Zo=function(i,o,l,u){var h=[];if(Po(i,l)===Po(o,u))i.y===l.y?(h.push({x:l.x,y:(l.y+u.y)/2}),h.push({x:u.x,y:(l.y+u.y)/2})):(h.push({x:(l.x+u.x)/2,y:l.y}),h.push({x:(l.x+u.x)/2,y:u.y}));else{var d={x:l.x,y:u.y},m=$i(d,i,l),w=$i(d,o,u);if(m||w)d={x:u.x,y:l.y};else{var T=so(d,i,l),C=so(d,o,u);T&&C&&(d={x:u.x,y:l.y})}h.push(d)}return h},so=function(i,o,l){return i.x===o.x&&i.x===l.x||i.y===o.y&&i.y===l.y},Io=function(i){if(!i)return 0;for(var o=0,l=0;l<i.length;l++){var u=i.charCodeAt(l);i.match(/[A-Z]/)?o+=1.5:o+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return o},qo=null,ii=function(i,o){qo||(qo=document.createElement("canvas"));var l=qo.getContext("2d");return l.font=o,l.measureText(i).width},di=function(i){var o,l=i.start,u=i.end;if(l.x===u.x&&l.y===u.y)o="";else{var h={start:l,end:u,offset:10,verticalLength:5},d=du(le(le({},h),{},{type:"start"})),m=du(le(le({},h),{},{type:"end"}));o="M".concat(d.leftX," ").concat(d.leftY,` 
    L`).concat(d.rightX," ").concat(d.rightY,` 
    L`).concat(m.rightX," ").concat(m.rightY,`
    L`).concat(m.leftX," ").concat(m.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Jo=function(i){var o=i.start,l=i.end,u=i.sourceNode,h=i.targetNode,d=i.offset,m=Oo(u),w=Oo(h),T=Vt(m,d),C=Vt(w,d);return{sNext:Ot(T,m,o),ePre:Ot(C,w,l)}},mo=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[Yn(o[0]),Yn(o[1]),Yn(o[2]),Yn(o[3])]},Yn=function(i){var o=et(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},pi=function(i,o){var l=et(i,4);return[Do(l[0],l[1],l[2],l[3],o),i[3]]},Mr=function(i,o){for(var l,u=i.x,h=i.y,d=or(o),m=Number.MAX_SAFE_INTEGER,w=[],T=0;T<d.length;T++)w.push({start:d[T],end:d[(T+1)%d.length]});if(w.forEach(function(te){var ge=te.start,Pe=te.end;if(ge.x===Pe.x){var je={x:ge.x,y:h};if($i(je,ge,Pe)){var st=Math.abs(ge.x-u);st<m&&(m=st,l=je)}}else if(ge.y===Pe.y){var at={x:u,y:ge.y};if($i(at,ge,Pe)){var bt=Math.abs(ge.y-h);bt<m&&(m=bt,l=at)}}}),!l){var C=w[0],$=C.start,J=C.end;l={x:$.x+(J.x-$.x)/2,y:$.y+(J.y-$.y)/2}}return l},Dn=function(i){return tl(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},hr=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function Kn(i,o){return typeof o!="function"?function(l,u,h){return Object.assign({type:i.edgeType},h)}:function(l,u,h){var d=o(l,u,h);return d?typeof d=="string"?Object.assign({},h,{type:d}):Object.assign({type:d},h):{type:i.edgeType}}}r(208);var yo=function(){};function Ml(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function So(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ye=function(){function i(u){var h=this,d=u.onDragStart,m=d===void 0?yo:d,w=u.onDragging,T=w===void 0?yo:w,C=u.onDragEnd,$=C===void 0?yo:C,J=u.eventType,te=J===void 0?"":J,ge=u.eventCenter,Pe=ge===void 0?null:ge,je=u.step,st=je===void 0?1:je,at=u.isStopPropagation,bt=at===void 0||at,Bt=u.model,gn=Bt===void 0?null:Bt,yn=u.data,zn=yn===void 0?null:yn;(function(hn,In){if(!(hn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,i),So(this,"onDragStart",void 0),So(this,"onDragging",void 0),So(this,"onDragEnd",void 0),So(this,"step",void 0),So(this,"isStopPropagation",void 0),So(this,"isDragging",!1),So(this,"isStartDragging",!1),So(this,"startX",0),So(this,"startY",0),So(this,"sumDeltaX",0),So(this,"sumDeltaY",0),So(this,"eventType",void 0),So(this,"eventCenter",void 0),So(this,"model",void 0),So(this,"data",void 0),So(this,"startTime",void 0),So(this,"handleMouseDown",function(hn){var In,Sn,Ir,Vr=(In=window)===null||In===void 0?void 0:In.document;if(hn.button===0){h.isStopPropagation&&hn.stopPropagation(),h.isStartDragging=!0,h.startX=hn.clientX,h.startY=hn.clientY,Vr.addEventListener("mousemove",h.handleMouseMove,!1),Vr.addEventListener("mouseup",h.handleMouseUp,!1);var pr=(Sn=h.model)===null||Sn===void 0?void 0:Sn.getData();(Ir=h.eventCenter)===null||Ir===void 0||Ir.emit(Cn["".concat(h.eventType,"_MOUSEDOWN")],{e:hn,data:h.data||pr}),h.startTime=new Date().getTime()}}),So(this,"handleMouseMove",function(hn){if(h.isStopPropagation&&hn.stopPropagation(),h.isStartDragging&&(h.sumDeltaX+=hn.clientX-h.startX,h.sumDeltaY+=hn.clientY-h.startY,h.startX=hn.clientX,h.startY=hn.clientY,h.step<=1||Math.abs(h.sumDeltaX)>h.step||Math.abs(h.sumDeltaY)>h.step)){var In,Sn=h.sumDeltaX%h.step,Ir=h.sumDeltaY%h.step,Vr=h.sumDeltaX-Sn,pr=h.sumDeltaY-Ir;h.sumDeltaX=Sn,h.sumDeltaY=Ir;var Zr,_i=(In=h.model)===null||In===void 0?void 0:In.getData();h.isDragging||((Zr=h.eventCenter)===null||Zr===void 0||Zr.emit(Cn["".concat(h.eventType,"_DRAGSTART")],{e:hn,data:h.data||_i}),h.onDragStart({event:hn})),h.isDragging=!0,Promise.resolve().then(function(){var wi,Ta;h.onDragging({deltaX:Vr,deltaY:pr,event:hn}),(wi=h.eventCenter)===null||wi===void 0||wi.emit(Cn["".concat(h.eventType,"_MOUSEMOVE")],{e:hn,data:h.data||_i}),(Ta=h.eventCenter)===null||Ta===void 0||Ta.emit(Cn["".concat(h.eventType,"_DRAG")],{e:hn,data:h.data||_i})})}}),So(this,"handleMouseUp",function(hn){var In=window.document;h.isStartDragging=!1,h.isStopPropagation&&hn.stopPropagation(),Promise.resolve().then(function(){var Sn,Ir,Vr;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1);var pr=(Sn=h.model)===null||Sn===void 0?void 0:Sn.getData();(Ir=h.eventCenter)===null||Ir===void 0||Ir.emit(Cn["".concat(h.eventType,"_MOUSEUP")],{e:hn,data:h.data||pr}),h.isDragging&&(h.isDragging=!1,h.onDragEnd({event:hn}),(Vr=h.eventCenter)===null||Vr===void 0||Vr.emit(Cn["".concat(h.eventType,"_DROP")],{e:hn,data:h.data||pr}))})}),So(this,"cancelDrag",function(){var hn,In=(hn=window)===null||hn===void 0?void 0:hn.document;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1),h.onDragEnd({event:null}),h.isDragging=!1}),this.onDragStart=m,this.onDragging=T,this.onDragEnd=$,this.step=st,this.isStopPropagation=bt,this.eventType=te,this.eventCenter=Pe,this.model=gn,this.data=zn}var o,l;return o=i,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&Ml(o.prototype,l),i}();function it(i){return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},it(i)}function tt(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function un(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function dr(i,o,l){return o&&un(i.prototype,o),i}function he(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Le(i,o)}function re(i){var o=Ne();return function(){var l,u=pe(i);if(o){var h=pe(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return Re(this,l)}}function Re(i,o){if(o&&(it(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return We(i)}function We(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qe(i){var o=typeof Map=="function"?new Map:void 0;return Qe=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return De(l,arguments,pe(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),Le(h,l)},Qe(i)}function De(i,o,l){return De=Ne()?Reflect.construct:function(u,h,d){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(u,m));return d&&Le(w,d.prototype),w},De.apply(null,arguments)}function Ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(i,o){return Le=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Le(i,o)}function pe(i){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},pe(i)}function ke(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function de(i,o){return i instanceof ze&&o instanceof ze}var Ge=function(i){he(l,i);var o=re(l);function l(u,h,d){var m;return tt(this,l),ke(We(m=o.call(this,3)),"x",void 0),ke(We(m),"y",void 0),ke(We(m),"z",void 0),m[0]=u,m[1]=h,m[2]=d,m.x=u,m.y=h,m.z=d,Object.setPrototypeOf(We(m),l.prototype),m}return dr(l,[{key:"add",value:function(u){if(de(this,u))return new ze(this.x+u.x,this.y+u.y);var h=this.z+u.z;return new p((this.x+u.x)/h,(this.y+u.y)/h)}},{key:"subtract",value:function(u){if(de(this,u))return new ze(this.x-u.x,this.y-u.y);var h=this.z-u.z;return h===0?new ze(this.x-u.x,this.y-u.y):new p((this.x-u.x)/h,(this.y-u.y)/h)}}]),l}(Qe(Array)),ze=function(i){he(l,i);var o=re(l);function l(u,h,d){var m;return tt(this,l),m=o.call(this,u,h,d??0),Object.setPrototypeOf(We(m),l.prototype),m}return dr(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var h=this;return u.reduce(function(d,m,w){return d+m*h[w]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var h=this.crossZ(u),d=Math.acos(this.normalize().dot(u.normalize()));return h>=0?d:-d}}]),l}(Ge),p=function(i){he(l,i);var o=re(l);function l(u,h){var d;return tt(this,l),d=o.call(this,u,h,1),Object.setPrototypeOf(We(d),l.prototype),d}return dr(l,[{key:"toString",value:function(){return"Point"}}]),l}(Ge);r(67),r(218);function y(i){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y(i)}function O(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||Y(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(i){return function(o){if(Array.isArray(o))return ne(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Y(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y(i,o){if(i){if(typeof i=="string")return ne(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?ne(i,o):void 0}}function ne(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function ve(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Ae(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Fe(i,o,l){return o&&Ae(i.prototype,o),i}function mt(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&tn(i,o)}function Et(i){var o=jt();return function(){var l,u=ar(i);if(o){var h=ar(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return Wt(this,l)}}function Wt(i,o){if(o&&(y(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn(i)}function wn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function On(i){var o=typeof Map=="function"?new Map:void 0;return On=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return Gn(l,arguments,ar(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),tn(h,l)},On(i)}function Gn(i,o,l){return Gn=jt()?Reflect.construct:function(u,h,d){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(u,m));return d&&tn(w,d.prototype),w},Gn.apply(null,arguments)}function jt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tn(i,o){return tn=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},tn(i,o)}function ar(i){return ar=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ar(i)}function Mn(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Xe,vr,$r,Xn,ur,ki,Ba,Zl,Pi,As,pu,Rd,Ip,Ts=function(i){mt(l,i);var o=Et(l);function l(){var u;ve(this,l);for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return Mn(wn(u=o.call(this,d.length)),"rows",void 0),Mn(wn(u),"columns",void 0),u.fill(new Array(3)),d.forEach(function(w,T){u[T]=w}),u.columns=d[0].length,u.rows=d.length,Object.setPrototypeOf(wn(u),l.prototype),u}return Fe(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return I(this.map(function(h){return h[u]}))}},{key:"transpose",value:function(){for(var u=[],h=0;h<this.columns;h++)u.push(this.getColumn(h));return Gn(l,u)}},{key:"cross",value:function(u){var h=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var d=0;d<this.rows;d++)for(var m=this.getRow(d),w=function(C){var $=u.getColumn(C);h[d][C]=m.reduce(function(J,te,ge){return J+te*$[ge]},0)},T=0;T<u.columns;T++)w(T);return Gn(l,I(h))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new p(u[0],u[1])})}},{key:"toString",value:function(){var u=O(this[0],2),h=u[0],d=u[1],m=O(this[1],2),w=m[0],T=m[1],C=O(this[2],2),$=C[0],J=C[1];return"matrix(".concat(h," ").concat(d," ").concat(w," ").concat(T," ").concat($," ").concat(J,")")}},{key:"translate",value:function(u,h){return this.cross(new Nd(u,h))}},{key:"rotate",value:function(u){return this.cross(new nc(u))}},{key:"scale",value:function(u,h){return this.cross(new lm(u,h))}}]),l}(On(Array)),nc=function(i){mt(l,i);var o=Et(l);function l(u){var h;return ve(this,l),h=o.call(this,new ze(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new ze(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new ze(0,0,1)),Object.setPrototypeOf(wn(h),l.prototype),h}return Fe(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ts),lm=function(i){mt(l,i);var o=Et(l);function l(u,h){var d;return ve(this,l),Mn(wn(d=o.call(this,new ze(u,0,0),new ze(0,h,0),new ze(0,0,1))),"sx",void 0),Mn(wn(d),"sy",void 0),d.sx=u,d.sy=h,Object.setPrototypeOf(wn(d),l.prototype),d}return Fe(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ts),Nd=function(i){mt(l,i);var o=Et(l);function l(u,h){var d;return ve(this,l),Mn(wn(d=o.call(this,new ze(1,0,0),new ze(0,1,0),new ze(u,h,1))),"tx",void 0),Mn(wn(d),"ty",void 0),d.tx=u,d.ty=h,Object.setPrototypeOf(wn(d),l.prototype),d}return Fe(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ts),Lp={node:!1,edge:!1},sm={node:!0,edge:!0};function $p(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function mf(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?$p(Object(l),!0).forEach(function(u){vu(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):$p(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function yf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||Fp(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hu(i){return function(o){if(Array.isArray(o))return Wb(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Fp(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fp(i,o){if(i){if(typeof i=="string")return Wb(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Wb(i,o):void 0}}function Wb(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function cy(i){return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},cy(i)}function Ms(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function YR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function vu(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function qn(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var o2,i2=200,a2=(Xe=function(){function i(u){(function(ge,Pe){if(!(ge instanceof Pe))throw new TypeError("Cannot call a class as a function")})(this,i),vu(this,"rootEl",void 0),Ms(this,"width",vr,this),Ms(this,"height",$r,this),vu(this,"theme",void 0),vu(this,"eventCenter",void 0),vu(this,"modelMap",new Map),vu(this,"topElement",void 0),vu(this,"animation",void 0),vu(this,"idGenerator",void 0),vu(this,"edgeGenerator",void 0),vu(this,"nodeMoveRules",[]),vu(this,"customTrajectory",void 0),Ms(this,"edgeType",Xn,this),Ms(this,"nodes",ur,this),Ms(this,"edges",ki,this),Ms(this,"overlapMode",Ba,this),Ms(this,"background",Zl,this),Ms(this,"transformModel",Pi,this),Ms(this,"editConfigModel",As,this),Ms(this,"gridSize",pu,this),Ms(this,"partial",Rd,this),Ms(this,"fakerNode",Ip,this);var h,d=u.container,m=u.background,w=m===void 0?{}:m,T=u.grid,C=u.idGenerator,$=u.edgeGenerator,J=u.animation,te=u.customTrajectory;this.background=w,cy(T)==="object"&&(this.gridSize=T.size),this.rootEl=d,this.editConfigModel=new id(u),this.eventCenter=new yd,this.transformModel=new mp(this.eventCenter,u),this.theme=Xl(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(h=J)&&typeof h!="boolean"?tu(no(Lp),h):no(h===!0?sm:Lp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=C,this.customTrajectory=te,this.edgeGenerator=Kn(this,$),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=ra()}var o,l;return o=i,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,h,d){return u[h.id]={index:d,model:h},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,h,d){return u[h.id]={index:d,model:h},u},{})}},{key:"modelsMap",get:function(){return[].concat(hu(this.nodes),hu(this.edges)).reduce(function(u,h){return u[h.id]=h,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(C){return u.push(C)}),this.edges.forEach(function(C){return u.push(C)}),u=u.sort(function(C,$){return C.zIndex-$.zIndex});for(var h=[],d=[-200,-200],m=[this.width+i2,this.height+i2],w=0;w<u.length;w++){var T=u[w];T.visible&&(!this.partial||T.isSelected||this.isElementInArea(T,d,m,!1,!1))&&h.push(T)}return h}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(d){return d.state===Kr.TEXT_EDIT}),h=this.edges.find(function(d){return d.state===Kr.TEXT_EDIT});return u||h}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(h){h.isSelected&&u.set(h.id,h)}),this.edges.forEach(function(h){h.isSelected&&u.set(h.id,h)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(h){h.isSelected&&u.push(h)}),u}},{key:"getAreaElement",value:function(u,h){var d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=arguments.length>4&&arguments[4]!==void 0&&arguments[4],T=[],C=[];this.nodes.forEach(function(te){return C.push(te)}),this.edges.forEach(function(te){return C.push(te)});for(var $=0;$<C.length;$++){var J=C[$];w&&!J.visible||!this.isElementInArea(J,u,h,d,m)||T.push(J)}return T}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var h;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(h=this.nodesMap[u])===null||h===void 0?void 0:h.model}},{key:"getPointByClient",value:function(u){var h=u.x,d=u.y,m=this.rootEl.getBoundingClientRect(),w={x:h-m.left,y:d-m.top},T=yf(this.transformModel.HtmlPointToCanvasPoint([w.x,w.y]),2);return{domOverlayPosition:w,canvasOverlayPosition:{x:T[0],y:T[1]}}}},{key:"isElementInArea",value:function(u,h,d){var m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===fo.NODE){for(var T=Oo(u=u),C=T.minX,$=T.minY,J=T.maxX,te=T.maxY,ge=[{x:C,y:$},{x:J,y:$},{x:J,y:te},{x:C,y:te}],Pe=w,je=0;je<ge.length;je++){var st=ge[je],at=st.x,bt=st.y,Bt=this.transformModel.CanvasPointToHtmlPoint([at,bt]),gn=yf(Bt,2);if(at=gn[0],bt=gn[1],qu([at,bt],h,d)!==w){Pe=!w;break}}return Pe}if(u.BaseType===fo.EDGE){var yn=u=u,zn=yn.startPoint,hn=yn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([zn.x,zn.y]),Sn=this.transformModel.CanvasPointToHtmlPoint([hn.x,hn.y]),Ir=qu(In,h,d),Vr=qu(Sn,h,d);return m?Ir&&Vr:Ir||Vr}return!1}},{key:"graphDataToModel",value:function(u){var h=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=ed(u.nodes,function(d){return h.getModelAfterSnapToGrid(d)}):this.nodes=[],u.edges?this.edges=ed(u.edges,function(d){var m=h.getModel(d.type);if(!m)throw new Error("找不到".concat(d.type,"对应的边。"));return new m(d,h)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(d){var m=d.getData();m&&!d.virtual&&u.push(m)});var h=[];return this.nodes.forEach(function(d){var m=d.getData();m&&!d.virtual&&h.push(m)}),{nodes:h,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,h=[],d=0;d<this.nodes.length;d++){var m=this.nodes[d];if(m.isDragging){u=!0;break}h.push(m.getHistoryData())}if(u)return!1;for(var w=!1,T=[],C=0;C<this.edges.length;C++){var $=this.edges[C];if($.isDragging){w=!0;break}T.push($.getHistoryData())}return!w&&{nodes:h,edges:T}}},{key:"getEdgeModelById",value:function(u){var h;return(h=this.edgesMap[u])===null||h===void 0?void 0:h.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var h=[],d=0;d<this.edges.length;d++){var m=this.edges[d],w=this.edges[d].sourceNodeId===u,T=this.edges[d].targetNodeId===u;(w||T)&&h.push(m)}return h}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],h=this.selectElements,d={nodes:[],edges:[]};return h.forEach(function(m){if(m.BaseType===fo.NODE&&d.nodes.push(m.getData()),m.BaseType===fo.EDGE){var w=m.getData(),T=h.get(w.sourceNodeId)&&h.get(w.targetNodeId);(u||T)&&d.edges.push(w)}}),d}},{key:"updateAttributes",value:function(u,h){this.getElement(u).updateAttributes(h)}},{key:"changeNodeId",value:function(u,h){return h||(h=ra()),this.nodesMap[h]?"":this.nodesMap[u]?(this.edges.forEach(function(d){d.sourceNodeId===u&&(d.sourceNodeId=h),d.targetNodeId===u&&(d.targetNodeId=h)}),this.nodesMap[u].model.id=h,this.nodesMap[h]=this.nodesMap[u],h):""}},{key:"changeEdgeId",value:function(u,h){return h||(h=ra()),this.edgesMap[h]?"":this.edgesMap[u]?(this.edges.forEach(function(d){d.id===u&&d.changeEdgeId(h)}),h):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,h){return this.modelMap.set(u,h)}},{key:"toFront",value:function(u){var h,d,m,w=((h=this.nodesMap[u])===null||h===void 0?void 0:h.model)||((d=this.edgesMap[u])===null||d===void 0?void 0:d.model);w&&(this.overlapMode===To.DEFAULT&&((m=this.topElement)===null||m===void 0||m.setZIndex(),w.setZIndex(9999),this.topElement=w),this.overlapMode===To.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,h){var d,m,w,T=((d=this.nodesMap[u])===null||d===void 0?void 0:d.model)||((m=this.edgesMap[u])===null||m===void 0?void 0:m.model);T&&(typeof h=="number"&&(w=h),h==="top"&&(w=uu()),h==="bottom"&&(w=--uf),T.setZIndex(w))}},{key:"deleteNode",value:function(u){var h=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Cn.NODE_DELETE,{data:h})}},{key:"addNode",value:function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,d=arguments.length>2?arguments[2]:void 0,m=bi(u);m.id&&this.nodesMap[u.id]&&delete m.id;var w=this.getModelAfterSnapToGrid(m);this.nodes.push(w);var T=w.getData(),C={data:T};return d&&(C.e=d),this.eventCenter.emit(h,C),w}},{key:"getModelAfterSnapToGrid",value:function(u){var h=this.getModel(u.type);if(!h)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var d=u.x,m=u.y;return d&&m&&(u.x=rl(d,this.gridSize),u.y=rl(m,this.gridSize),cy(u.text)==="object"&&(u.text.x+=u.x-d,u.text.y+=u.y-m)),new h(u,this)}},{key:"cloneNode",value:function(u){var h=this.getNodeModelById(u),d=h.getData();d.x+=30,d.y+=30,delete d.id,d.text&&(d.text.x+=30,d.text.y+=30);var m=this.addNode(d);return m.setSelected(!0),h.setSelected(!1),m.getData()}},{key:"moveNode",value:function(u,h,d){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[u];if(w){var T=w.model,C=T.getMoveDistance(h,d,m),$=yf(C,2);h=$[0],d=$[1],this.moveEdge(u,h,d)}}},{key:"moveNode2Coordinate",value:function(u,h,d){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[u];if(w){var T=w.model,C=T.x,$=T.y,J=h-C,te=d-$;this.moveNode(u,J,te,m)}}},{key:"editText",value:function(u){this.setElementStateById(u,Kr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var h=bi(u),d=h.type;d||(d=this.edgeType),h.id&&this.edgesMap[h.id]&&delete h.id;var m=this.getModel(d);if(!m)throw new Error("找不到".concat(d,"对应的边，请确认是否已注册此类型边。"));var w=new m(mf(mf({},h),{},{type:d}),this),T=w.getData();return this.edges.push(w),this.eventCenter.emit(Cn.EDGE_ADD,{data:T}),w}},{key:"moveEdge",value:function(u,h,d){for(var m=0;m<this.edges.length;m++){var w=this.edges[m],T=w.textPosition,C=T.x,$=T.y,J=this.edges[m].sourceNodeId===u,te=this.edges[m].targetNodeId===u;J&&w.moveStartPoint(h,d),te&&w.moveEndPoint(h,d),(J||te)&&this.handleEdgeTextMove(w,C,$)}}},{key:"handleEdgeTextMove",value:function(u,h,d){var m;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Ar.POLYLINE_EDGE&&(m=u.text)!==null&&m!==void 0&&m.value){var w=u.text,T=Mr(w,u.points);u.moveText(T.x-w.x,T.y-w.y)}else{var C=u.textPosition,$=C.x,J=C.y;u.moveText($-h,J-d)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,h){for(var d=0;d<this.edges.length;d++)if(this.edges[d].sourceNodeId===u&&this.edges[d].targetNodeId===h){var m=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:m})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var h=this.edgesMap[u].index,d=this.edgesMap[u].model.getData();this.edges.splice(h,1),this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeBySource",value:function(u){for(var h=0;h<this.edges.length;h++)if(this.edges[h].sourceNodeId===u){var d=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeByTarget",value:function(u){for(var h=0;h<this.edges.length;h++)if(this.edges[h].targetNodeId===u){var d=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"setElementStateById",value:function(u,h,d){this.nodes.forEach(function(m){m.id===u?m.setElementState(h,d):m.setElementState(Kr.DEFAULT)}),this.edges.forEach(function(m){m.id===u?m.setElementState(h,d):m.setElementState(Kr.DEFAULT)})}},{key:"updateText",value:function(u,h){this.nodes.forEach(function(d){d.id===u&&d.updateText(h)}),this.edges.forEach(function(d){d.id===u&&d.updateText(h)})}},{key:"selectNodeById",value:function(u){var h,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var m=(h=this.nodesMap[u])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var h,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var m=(h=this.edgesMap[u])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectElementById",value:function(u){var h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];h||this.clearSelectElements();var d=this.getElement(u);d==null||d.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(h){h==null||h.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===To.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,h,d){for(var m=this,w=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=u.reduce(function(yn,zn){var hn=m.nodesMap[zn].model.getMoveDistance(h,d,w);return yn[zn]=hn,yn},{}),C=0;C<this.edges.length;C++){var $=this.edges[C],J=$.textPosition,te=J.x,ge=J.y,Pe=T[$.sourceNodeId],je=T[$.targetNodeId],st=void 0,at=void 0;if(Pe&&je&&$.modelType===Ar.POLYLINE_EDGE){var bt=yf(Pe,2);st=bt[0],at=bt[1],$.updatePointsList(st,at)}else{if(Pe){var Bt=yf(Pe,2);st=Bt[0],at=Bt[1],$.moveStartPoint(st,at)}if(je){var gn=yf(je,2);st=gn[0],at=gn[1],$.moveEndPoint(st,at)}}(Pe||je)&&this.handleEdgeTextMove($,te,ge)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,h){var d=this.getNodeModelById(u);if(d){var m=d.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));var T=new w(m,this);this.nodes.splice(this.nodesMap[u].index,1,T),this.getNodeEdges(u).forEach(function(C){if(C.sourceNodeId===u){var $=lf(T,C.startPoint,T.width,T.height);C.updateStartPoint($)}if(C.targetNodeId===u){var J=lf(T,C.endPoint,T.width,T.height);C.updateEndPoint(J)}})}}},{key:"changeEdgeType",value:function(u,h){var d=this.getEdgeModelById(u);if(d&&d.type!==h){var m=d.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));delete m.pointsList;var T=new w(m,this);this.edges.splice(this.edgesMap[u].index,1,T)}}},{key:"getNodeIncomingEdge",value:function(u){var h=[];return this.edges.forEach(function(d){d.targetNodeId===u&&h.push(d)}),h}},{key:"getNodeOutgoingEdge",value:function(u){var h=[];return this.edges.forEach(function(d){d.sourceNodeId===u&&h.push(d)}),h}},{key:"getAnchorIncomingEdge",value:function(u){var h=[];return this.edges.forEach(function(d){d.targetAnchorId===u&&h.push(d)}),h}},{key:"getAnchorOutcomingEdge",value:function(u){var h=[];return this.edges.forEach(function(d){d.sourceAnchorId===u&&h.push(d)}),h}},{key:"getNodeIncomingNode",value:function(u){var h=this,d=[];return this.edges.forEach(function(m){m.targetNodeId===u&&d.push(h.nodesMap[m.sourceNodeId].model)}),d}},{key:"getNodeOutgoingNode",value:function(u){var h=this,d=[];return this.edges.forEach(function(m){m.sourceNodeId===u&&d.push(h.nodesMap[m.targetNodeId].model)}),d}},{key:"setTheme",value:function(u){this.theme=Xl(mf(mf({},this.theme),u))}},{key:"resize",value:function(u,h){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=h||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,h=[],d=[];u.forEach(function(J){var te=J.x,ge=J.y,Pe=J.width,je=J.height,st=J.getNodeStyle().strokeWidth,at=st===void 0?0:st,bt=te+Pe/2+at,Bt=te-Pe/2-at,gn=ge+je/2+at,yn=ge-je/2-at;h=h.concat([bt,Bt].filter(function(zn){return!Number.isNaN(zn)})),d=d.concat([gn,yn].filter(function(zn){return!Number.isNaN(zn)}))});var m=Math.min.apply(Math,hu(h)),w=Math.max.apply(Math,hu(h)),T=Math.min.apply(Math,hu(d)),C=w-m||0,$=Math.max.apply(Math,hu(d))-T||0;return{virtualRectWidth:C,virtualRectHeight:$,virtualRectCenterPositionX:m+C/2,virtualRectCenterPositionY:T+$/2}}},{key:"translateCenter",value:function(){var u=this.nodes,h=this.width,d=this.height,m=this.rootEl,w=this.transformModel;if(u.length){var T=h||m.clientWidth,C=d||m.clientHeight,$=this.getVirtualRectSize(),J=$.virtualRectCenterPositionX,te=$.virtualRectCenterPositionY;w.focusOn(J,te,T,C)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,d=this.nodes,m=this.width,w=this.height,T=this.rootEl,C=this.transformModel;if(d.length){var $=m||T.clientWidth,J=w||T.clientHeight,te=this.getVirtualRectSize(),ge=te.virtualRectWidth,Pe=te.virtualRectHeight,je=te.virtualRectCenterPositionX,st=te.virtualRectCenterPositionY,at=(ge+h)/$,bt=(Pe+u)/J,Bt=0;Bt=1/Math.max(at,bt);var gn=[$/2,J/2];C.zoom(Bt,gn),C.focusOn(je,st,$,J)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&YR(o.prototype,l),i}(),vr=qn(Xe.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=qn(Xe.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn=qn(Xe.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=qn(Xe.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=qn(Xe.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ba=qn(Xe.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return To.DEFAULT}}),Zl=qn(Xe.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=qn(Xe.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),As=qn(Xe.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pu=qn(Xe.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Rd=qn(Xe.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ip=qn(Xe.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(Xe.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"nodesMap"),Xe.prototype),qn(Xe.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"edgesMap"),Xe.prototype),qn(Xe.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"modelsMap"),Xe.prototype),qn(Xe.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"sortElements"),Xe.prototype),qn(Xe.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"textEditElement"),Xe.prototype),qn(Xe.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"selectElements"),Xe.prototype),qn(Xe.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(Xe.prototype,"selectNodes"),Xe.prototype),qn(Xe.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setFakerNode"),Xe.prototype),qn(Xe.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"removeFakerNode"),Xe.prototype),qn(Xe.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setModel"),Xe.prototype),qn(Xe.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"toFront"),Xe.prototype),qn(Xe.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setElementZIndex"),Xe.prototype),qn(Xe.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteNode"),Xe.prototype),qn(Xe.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"addNode"),Xe.prototype),qn(Xe.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"cloneNode"),Xe.prototype),qn(Xe.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveNode"),Xe.prototype),qn(Xe.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveNode2Coordinate"),Xe.prototype),qn(Xe.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"editText"),Xe.prototype),qn(Xe.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"addEdge"),Xe.prototype),qn(Xe.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveEdge"),Xe.prototype),qn(Xe.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeBySourceAndTarget"),Xe.prototype),qn(Xe.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeById"),Xe.prototype),qn(Xe.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeBySource"),Xe.prototype),qn(Xe.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"deleteEdgeByTarget"),Xe.prototype),qn(Xe.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setElementStateById"),Xe.prototype),qn(Xe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"updateText"),Xe.prototype),qn(Xe.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"selectNodeById"),Xe.prototype),qn(Xe.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"selectEdgeById"),Xe.prototype),qn(Xe.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"selectElementById"),Xe.prototype),qn(Xe.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"clearSelectElements"),Xe.prototype),qn(Xe.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"moveNodes"),Xe.prototype),qn(Xe.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setDefaultEdgeType"),Xe.prototype),qn(Xe.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"changeNodeType"),Xe.prototype),qn(Xe.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"changeEdgeType"),Xe.prototype),qn(Xe.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeIncomingEdge"),Xe.prototype),qn(Xe.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeOutgoingEdge"),Xe.prototype),qn(Xe.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getAnchorIncomingEdge"),Xe.prototype),qn(Xe.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getAnchorOutcomingEdge"),Xe.prototype),qn(Xe.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeIncomingNode"),Xe.prototype),qn(Xe.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"getNodeOutgoingNode"),Xe.prototype),qn(Xe.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"setTheme"),Xe.prototype),qn(Xe.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"resize"),Xe.prototype),qn(Xe.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"clearData"),Xe.prototype),qn(Xe.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"translateCenter"),Xe.prototype),qn(Xe.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"fitView"),Xe.prototype),qn(Xe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"openEdgeAnimation"),Xe.prototype),qn(Xe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Xe.prototype,"closeEdgeAnimation"),Xe.prototype),Xe),KR=a2;function Gb(i){return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gb(i)}function zb(){return zb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},zb.apply(this,arguments)}function ZR(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Hb(i,o){return Hb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Hb(i,o)}function JR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fy(i);if(o){var h=fy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return QR(this,l)}}function QR(i,o){if(o&&(Gb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rc(i)}function rc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fy(i){return fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},fy(i)}function gf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var l2,eN=bu(o2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Hb(d,m)})(h,i);var o,l,u=JR(h);function h(d){var m;(function($,J){if(!($ instanceof J))throw new TypeError("Cannot call a class as a function")})(this,h),gf(rc(m=u.call(this)),"stepDrag",void 0),gf(rc(m),"stepScrollX",0),gf(rc(m),"stepScrollY",0),gf(rc(m),"onDragging",function($){var J=$.deltaX,te=$.deltaY;m.setState({isDragging:!0});var ge=m.props.graphModel,Pe=ge.transformModel;ge.editConfigModel.stopMoveGraph!==!0&&Pe.translate(J,te)}),gf(rc(m),"onDragEnd",function(){m.setState({isDragging:!1})}),gf(rc(m),"zoomHandler",function($){var J=m.props,te=J.graphModel,ge=te.editConfigModel,Pe=te.transformModel,je=te.gridSize,st=J.graphModel,at=$.deltaX,bt=$.deltaY;if(ge.stopScrollGraph||$.ctrlKey===!0){if(!ge.stopZoomGraph){$.preventDefault();var Bt=st.getPointByClient({x:$.clientX,y:$.clientY}).canvasOverlayPosition,gn=Bt.x,yn=Bt.y;Pe.zoom($.deltaY<0,[gn,yn])}}else{if($.preventDefault(),m.stepScrollX+=at,m.stepScrollY+=bt,Math.abs(m.stepScrollX)>=je){var zn=m.stepScrollX%je,hn=m.stepScrollX-zn;Pe.translate(-hn*Pe.SCALE_X,0),m.stepScrollX=zn}if(Math.abs(m.stepScrollY)>=je){var In=m.stepScrollY%je,Sn=m.stepScrollY-In;Pe.translate(0,-Sn*Pe.SCALE_Y),m.stepScrollY=In}}}),gf(rc(m),"clickHandler",function($){if($.target.getAttribute("name")==="canvas-overlay"){var J=m.props.graphModel;J.selectElements.size>0&&J.clearSelectElements(),J.eventCenter.emit(Cn.BLANK_CLICK,{e:$})}}),gf(rc(m),"handleContextMenu",function($){if($.target.getAttribute("name")==="canvas-overlay"){$.preventDefault();var J=m.props.graphModel,te=J.getPointByClient({x:$.clientX,y:$.clientY});J.eventCenter.emit(Cn.BLANK_CONTEXTMENU,{e:$,position:te})}}),gf(rc(m),"mouseDownHandler",function($){var J=m.props.graphModel,te=J.eventCenter,ge=J.editConfigModel,Pe=J.transformModel.SCALE_X,je=J.gridSize,st=$.target,at=!ge.adjustEdge&&!ge.adjustNodePosition;(st.getAttribute("name")==="canvas-overlay"||at)&&(ge.stopMoveGraph!==!0?(m.stepDrag.setStep(je*Pe),m.stepDrag.handleMouseDown($)):te.emit(Cn.BLANK_MOUSEDOWN,{e:$}),m.clickHandler($))});var w=d.graphModel,T=w.gridSize,C=w.eventCenter;return m.stepDrag=new ye({onDragging:m.onDragging,onDragEnd:m.onDragEnd,step:T,eventType:"BLANK",isStopPropagation:!1,eventCenter:C,model:null}),m.state={isDragging:!1},m}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props,w=m.children,T=m.dnd,C=this.state.isDragging;return Object(Ue.g)("svg",zb({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:C?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},T.eventMap()),Object(Ue.g)("g",{transform:d},w))}}])&&ZR(o.prototype,l),h}(Ue.a))||o2;function Xb(i){return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Xb(i)}function tN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function nN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function qb(i,o){return qb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},qb(i,o)}function rN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=dy(i);if(o){var h=dy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return oN(this,l)}}function oN(i,o){if(o&&(Xb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function dy(i){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},dy(i)}var iN=bu(l2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&qb(d,m)})(h,i);var o,l,u=rN(h);function h(){return tN(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var d=this.props,m=d.tool,w=d.graphModel,T=m.getTools().map(function(C){return Object(Ue.g)(C,{graphModel:w,logicFlow:m.instance})});return m.components=T,T}},{key:"triggerToolRender",value:function(){var d=this.props,m=d.tool,w=d.graphModel,T=document.querySelector("#ToolOverlay_".concat(w.flowId)),C=m.getInstance();C.components.forEach(function($){return $(C,T)}),C.components=[]}},{key:"render",value:function(){var d=this.props.graphModel;return Object(Ue.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(d.flowId)},this.getTools())}}])&&nN(o.prototype,l),h}(Ue.a))||l2;function Yb(i){return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Yb(i)}function aN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function lN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Kb(i,o){return Kb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Kb(i,o)}function sN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=py(i);if(o){var h=py(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return uN(this,l)}}function uN(i,o){if(o&&(Yb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function py(i){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},py(i)}var s2,cN=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Kb(d,m)})(h,i);var o,l,u=sN(h);function h(){return aN(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.background;return Object(Ue.g)("div",{className:"lf-background"},Object(Ue.g)("div",{style:d,className:"lf-background-area"}))}}])&&lN(o.prototype,l),h}(Ue.a);function Zb(i){return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Zb(i)}function fN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function dN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Jb(i,o){return Jb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Jb(i,o)}function pN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hy(i);if(o){var h=hy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return hN(this,l)}}function hN(i,o){if(o&&(Zb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u2(i)}function u2(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}function vN(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var c2=bu(s2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Jb(d,m)})(h,i);var o,l,u=pN(h);function h(){var d;fN(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return vN(u2(d=u.call.apply(u,[this].concat(w))),"id",ra()),d}return o=h,(l=[{key:"renderDot",value:function(){var d=this.props,m=d.config,w=m.color,T=m.thickness,C=T===void 0?2:T,$=d.size,J=d.visible,te=Math.min(Math.max(2,C),$/2),ge=1;return J||(ge=0),Object(Ue.g)("rect",{width:te,height:te,rx:te/2,ry:te/2,fill:w,opacity:ge})}},{key:"renderMesh",value:function(){var d=this.props,m=d.config,w=m.color,T=m.thickness,C=T===void 0?1:T,$=d.size,J=d.visible,te=Math.min(Math.max(1,C),$/2),ge="M ".concat($," 0 H0 M0 0 V0 ").concat($),Pe=1;return J||(Pe=0),Object(Ue.g)("path",{d:ge,stroke:w,strokeWidth:te,opacity:Pe})}},{key:"render",value:function(){var d=this.props,m=d.type,w=d.size,T=d.graphModel.transformModel,C=[T.SCALE_X,T.SKEW_Y,T.SKEW_X,T.SCALE_Y,T.TRANSLATE_X,T.TRANSLATE_Y].join(","),$="matrix(".concat(C,")");return Object(Ue.g)("div",{className:"lf-grid"},Object(Ue.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Ue.g)("defs",null,Object(Ue.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:$,x:"0",y:"0",width:w,height:w},m==="dot"&&this.renderDot(),m==="mesh"&&this.renderMesh())),Object(Ue.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&dN(o.prototype,l),h}(Ue.a))||s2;c2.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function Qb(i){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qb(i)}function mN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return f2(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return f2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var d2,Gh=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(l){var u=mN(l,2),h=u[0],d=u[1];(h==="style"||Qb(d)!=="object")&&(o[h]=d)}),Object(Ue.g)("line",o)};function e_(i){return e_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e_(i)}function p2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function vy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?p2(Object(l),!0).forEach(function(u){yN(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):p2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function yN(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function gN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function bN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function t_(i,o){return t_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},t_(i,o)}function _N(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=my(i);if(o){var h=my(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return wN(this,l)}}function wN(i,o){if(o&&(e_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}var h2,EN=bu(d2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&t_(d,m)})(h,i);var o,l,u=_N(h);function h(){return gN(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.snaplineModel,m=d.position,w=d.isShowHorizontal,T=d.isShowVertical,C=d.getStyle(),$=m.x,J=$===void 0?0:$,te=m.y,ge=te===void 0?0:te,Pe=vy(vy({x1:-1e5,y1:ge,x2:1e5,y2:ge},C),{},{stroke:w?C.stroke:"none"}),je=vy(vy({x1:J,y1:-1e5,x2:J,y2:1e5},C),{},{stroke:T?C.stroke:"none"});return Object(Ue.g)("g",{className:"lf-snapline"},Object(Ue.g)(Gh,Pe),Object(Ue.g)(Gh,je))}}])&&bN(o.prototype,l),h}(Ue.a))||d2;function n_(i){return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n_(i)}function ON(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return v2(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return v2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function Cd(i){var o=i.x,l=i.y,u=i.width,h=i.height,d=i.className,m=i.radius,w=o-u/2,T=l-h/2,C={};return Object.entries(i).forEach(function($){var J=ON($,2),te=J[0],ge=J[1];n_(ge)!=="object"&&(C[te]=ge)}),C.className=d?"lf-basic-shape ".concat(d):"lf-basic-shape",m&&(C.rx=m,C.ry=m),C.x=w,C.y=T,Object(Ue.g)("rect",C)}function r_(i){return r_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r_(i)}function zh(){return zh=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},zh.apply(this,arguments)}function m2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function y2(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?m2(Object(l),!0).forEach(function(u){SN(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):m2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function SN(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function xN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function AN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function o_(i,o){return o_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},o_(i,o)}function TN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=yy(i);if(o){var h=yy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return MN(this,l)}}function MN(i,o){if(o&&(r_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function yy(i){return yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},yy(i)}Cd.defaultProps={className:"",radius:""};var g2,kN=bu(h2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&o_(d,m)})(h,i);var o,l,u=TN(h);function h(){return xN(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getNodesOutline",value:function(){var d=this.props.graphModel,m=d.nodes,w=d.editConfigModel,T=w.hoverOutline,C=w.nodeSelectedOutline,$=[];return m.forEach(function(J){if(J.isHovered||J.isSelected){var te=J.isHovered,ge=J.isSelected,Pe=J.x,je=J.y,st=J.width,at=J.height;if(C&&ge||T&&te){var bt=J.getOutlineStyle(),Bt={};if(Object.keys(bt).forEach(function(yn){yn!=="hover"&&(Bt[yn]=bt[yn])}),te){var gn=bt.hover;Bt=y2(y2({},Bt),gn)}$.push(Object(Ue.g)(Cd,zh({transform:J.transform,className:"lf-outline-node",x:Pe,y:je,width:st+10,height:at+10},Bt)))}}}),$}},{key:"getEdgeOutline",value:function(){for(var d=this.props.graphModel,m=d.edges,w=d.editConfigModel,T=w.edgeSelectedOutline,C=w.hoverOutline,$=[],J=0;J<m.length;J++){var te=m[J];(T&&te.isSelected||C&&te.isHovered)&&(te.modelType===Ar.LINE_EDGE?$.push(this.getLineOutline(te)):te.modelType===Ar.POLYLINE_EDGE?$.push(this.getPolylineOutline(te)):te.modelType===Ar.BEZIER_EDGE&&$.push(this.getBezierOutline(te)))}return $}},{key:"getLineOutline",value:function(d){var m=d.startPoint,w=d.endPoint,T=(m.x+w.x)/2,C=(m.y+w.y)/2,$=Math.abs(m.x-w.x)+10,J=Math.abs(m.y-w.y)+10,te=d.getOutlineStyle();return Object(Ue.g)(Cd,zh({className:"lf-outline-edge",x:T,y:C,width:$,height:J},te))}},{key:"getPolylineOutline",value:function(d){var m=d.points,w=or(m),T=ct(w,8),C=T.x,$=T.y,J=T.width,te=T.height,ge=d.getOutlineStyle();return Object(Ue.g)(Cd,zh({className:"lf-outline",x:C,y:$,width:J,height:te},ge))}},{key:"getBezierOutline",value:function(d){var m=d.path,w=mo(m),T=ct(w,8),C=T.x,$=T.y,J=T.width,te=T.height,ge=d.getOutlineStyle();return Object(Ue.g)(Cd,zh({className:"lf-outline",x:C,y:$,width:J,height:te},ge))}},{key:"render",value:function(){return Object(Ue.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&AN(o.prototype,l),h}(Ue.a))||h2;function i_(i){return i_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i_(i)}function PN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return b2(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return b2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function Hh(i){var o=i.x,l=o===void 0?0:o,u=i.y,h=u===void 0?0:u,d=i.r,m=d===void 0?4:d,w=i.className,T={cx:l,cy:h,r:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(C){var $=PN(C,2),J=$[0],te=$[1];i_(te)!=="object"&&(T[J]=te)}),T.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(Ue.g)("circle",T)}function a_(i){return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a_(i)}function RN(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return _2(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function um(){return um=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},um.apply(this,arguments)}function w2(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function NN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function E2(i,o,l){return o&&NN(i.prototype,o),i}function O2(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&l_(i,o)}function l_(i,o){return l_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l_(i,o)}function S2(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=by(i);if(o){var h=by(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return CN(this,l)}}function CN(i,o){if(o&&(a_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gy(i)}function gy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function by(i){return by=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},by(i)}function s_(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var x2,A2=function(i){O2(l,i);var o=S2(l);function l(){var u;return w2(this,l),s_(gy(u=o.call(this)),"dragHandler",void 0),s_(gy(u),"onDragging",function(h){var d=h.event,m=u.props,w=m.graphModel,T=m.bezierModel,C=m.type,$=w.getPointByClient({x:d.clientX,y:d.clientY}).canvasOverlayPosition,J=$.x,te=$.y;T.updateAdjustAnchor({x:J,y:te},C),w.eventCenter.emit(Cn.EDGE_ADJUST,{data:T.getData()})}),s_(gy(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ye({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return E2(l,[{key:"render",value:function(){var u=this,h=this.props.position,d=h.x,m=h.y,w=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Ue.g)(Hh,um({className:"lf-bezier-adjust-anchor",x:d,y:m},w,{onMouseDown:function(T){u.dragHandler.handleMouseDown(T)}}))}}]),l}(Ue.a),DN=bu(g2=function(i){O2(l,i);var o=S2(l);function l(){return w2(this,l),o.apply(this,arguments)}return E2(l,[{key:"getBezierAdjust",value:function(u,h){var d=u.path,m=u.id,w=RN(mo(d),4),T=w[0],C=w[1],$=w[2],J=w[3],te=u.getEdgeStyle().adjustLine,ge=[];return ge.push(Object(Ue.g)(Gh,um({x1:T.x,y1:T.y,x2:C.x,y2:C.y},te))),ge.push(Object(Ue.g)(A2,{position:C,bezierModel:u,graphModel:h,key:"".concat(m,"_ePre"),type:"sNext"})),ge.push(Object(Ue.g)(Gh,um({x1:J.x,y1:J.y,x2:$.x,y2:$.y},te))),ge.push(Object(Ue.g)(A2,{position:$,bezierModel:u,graphModel:h,key:"".concat(m,"_sNext"),type:"ePre"})),ge}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,h=u.edges,d=[],m=0;m<h.length;m++){var w=h[m];w.isSelected&&w.modelType===Ar.BEZIER_EDGE&&w.draggable&&d.push(this.getBezierAdjust(w,u))}return d}},{key:"render",value:function(){return Object(Ue.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Ue.a))||g2;function u_(i){return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u_(i)}function jN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function IN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function c_(i,o){return c_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},c_(i,o)}function LN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=_y(i);if(o){var h=_y(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return $N(this,l)}}function $N(i,o){if(o&&(u_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function _y(i){return _y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_y(i)}var T2,FN=bu(x2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&c_(d,m)})(h,i);var o,l,u=LN(h);function h(){return jN(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props.children;return Object(Ue.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Ue.g)("g",{transform:d},m))}}])&&IN(o.prototype,l),h}(Ue.a))||x2;function f_(i){return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f_(i)}function d_(){return d_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},d_.apply(this,arguments)}function UN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function VN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function p_(i,o){return p_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},p_(i,o)}function BN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=wy(i);if(o){var h=wy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return WN(this,l)}}function WN(i,o){if(o&&(f_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function wy(i){return wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},wy(i)}var GN=bu(T2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&p_(d,m)})(h,i);var o,l,u=BN(h);function h(){return UN(this,h),u.apply(this,arguments)}return o=h,l=[{key:"getComponent",value:function(d,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",T=this.props.getView,C=T(d.type);return Object(Ue.g)(C,{key:d.id,model:d,graphModel:m,overlay:w})}},{key:"render",value:function(){var d=this,m=this.props,w=m.graphModel,T=m.tool,C=m.options,$=m.dnd,J=m.snaplineModel,te={};C.width&&(te.width="".concat(w.width,"px")),C.height&&(te.height="".concat(w.height,"px"));var ge=C.grid,Pe=w.fakerNode,je=w.editConfigModel.adjustEdge;return Object(Ue.g)("div",{className:"lf-graph","flow-id":w.flowId,style:te},Object(Ue.g)(eN,{graphModel:w,dnd:$},Object(Ue.g)("g",{className:"lf-base"},ed(w.sortElements,function(st){return d.getComponent(st,w)})),Pe?this.getComponent(Pe,w):""),Object(Ue.g)(FN,{graphModel:w},Object(Ue.g)(kN,{graphModel:w}),je?Object(Ue.g)(DN,{graphModel:w}):"",C.snapline!==!1?Object(Ue.g)(EN,{snaplineModel:J}):""),Object(Ue.g)(iN,{graphModel:w,tool:T}),C.background&&Object(Ue.g)(cN,{background:C.background}),C.grid&&Object(Ue.g)(c2,d_({},ge,{graphModel:w})))}}],l&&VN(o.prototype,l),h}(Ue.a))||T2,zN=GN;function M2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Ey(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?M2(Object(l),!0).forEach(function(u){bf(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):M2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function HN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function bf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var XN=function(){function i(u){var h=this;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),bf(this,"nodeConfig",void 0),bf(this,"lf",void 0),bf(this,"fakerNode",void 0),bf(this,"stopDrag",function(){h.nodeConfig=null,window.document.removeEventListener("mouseup",h.stopDrag)}),bf(this,"dragEnter",function(m){h.nodeConfig&&!h.fakerNode&&(h.fakerNode=h.lf.createFakerNode(Ey(Ey({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY}))))}),bf(this,"onDragOver",function(m){if(m.preventDefault(),h.fakerNode){var w=h.clientToLocalPoint({x:m.clientX,y:m.clientY}),T=w.x,C=w.y;h.fakerNode.moveTo(T,C);var $=h.fakerNode.getData();h.lf.setNodeSnapLine($),h.lf.graphModel.eventCenter.emit(Cn.NODE_DND_DRAG,{data:$})}return!1}),bf(this,"onDragLeave",function(){h.fakerNode&&(h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)}),bf(this,"onDrop",function(m){h.lf.graphModel&&m&&h.nodeConfig&&(h.lf.addNode(Ey(Ey({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY})),Cn.NODE_DND_ADD,m),m.preventDefault(),m.stopPropagation(),h.nodeConfig=null,h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)});var d=u.lf;this.lf=d}var o,l;return o=i,(l=[{key:"clientToLocalPoint",value:function(u){var h=u.x,d=u.y,m=Gs(this.lf.options,["grid","size"]),w=this.lf.graphModel.getPointByClient({x:h,y:d}).canvasOverlayPosition,T=w.x,C=w.y;return{x:rl(T,m),y:rl(C,m)}}},{key:"startDrag",value:function(u){var h=this.lf.graphModel.editConfigModel;h!=null&&h.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&HN(o.prototype,l),i}();function k2(i){var o=i.container,l=i.grid,u=i.width,h=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof h=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(i.grid=tu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),tu({},R2,i)}var uo,P2,R2={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function h_(i){return h_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h_(i)}function v_(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return N2(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return N2(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function C2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Oy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?C2(Object(l),!0).forEach(function(u){D2(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):C2(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function qN(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function YN(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function KN(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function cm(){return cm=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=ZN(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},cm.apply(this,arguments)}function ZN(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Dd(i))!==null;);return i}function m_(i,o){return m_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},m_(i,o)}function JN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Dd(i);if(o){var h=Dd(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return QN(this,l)}}function QN(i,o){if(o&&(h_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sy(i)}function Sy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dd(i){return Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dd(i)}function D2(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function mu(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var y_=(uo=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&m_(d,m)})(h,i);var o,l,u=JN(h);function h(){var d;YN(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return D2(Sy(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.BEZIER_EDGE),qN(Sy(d),"path",P2,Sy(d)),d}return o=h,(l=[{key:"initEdgeData",value:function(d){this.offset=100,cm(Dd(h.prototype),"initEdgeData",this).call(this,d)}},{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.bezier;return Oy(Oy({},cm(Dd(h.prototype),"getEdgeStyle",this).call(this)),no(d))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var d=0,m=0;return this.pointsList.forEach(function(w){var T=w.x,C=w.y;d+=T,m+=C}),{x:d/this.pointsList.length,y:m/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var d=cm(Dd(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Oy(Oy({},d),{},{pointsList:m})}},{key:"getControls",value:function(){var d=this.startPoint,m=this.endPoint;return Jo({start:d,end:m,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(d){var m=v_(d,4),w=m[0],T=m[1],C=m[2],$=m[3];return"M ".concat(w.x," ").concat(w.y,`
    C `).concat(T.x," ").concat(T.y,`,
    `).concat(C.x," ").concat(C.y,`,
    `).concat($.x," ").concat($.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var d=this.getControls(),m=d.sNext,w=d.ePre;this.updatePath(m,w)}},{key:"updatePath",value:function(d,m){d=no(d),m=no(m);var w={x:this.startPoint.x,y:this.startPoint.y},T={x:this.endPoint.x,y:this.endPoint.y};if(!d||!m){var C=this.getControls();d=C.sNext,m=C.ePre}this.pointsList=[w,d,m,T],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(d){this.startPoint=Object.assign({},d),this.updatePoints()}},{key:"updateEndPoint",value:function(d){this.endPoint=Object.assign({},d),this.updatePoints()}},{key:"moveStartPoint",value:function(d,m){this.startPoint.x+=d,this.startPoint.y+=m;var w=v_(this.pointsList,3),T=w[1],C=w[2];T.x+=d,T.y+=m,this.updatePath(T,C)}},{key:"moveEndPoint",value:function(d,m){this.endPoint.x+=d,this.endPoint.y+=m;var w=v_(this.pointsList,3),T=w[1],C=w[2];C.x+=d,C.y+=m,this.updatePath(T,C)}},{key:"updateAdjustAnchor",value:function(d,m){m==="sNext"?this.pointsList[1]=d:m==="ePre"&&(this.pointsList[2]=d),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var d=this.pointsList;return d[d.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(d){var m=d.startPoint,w=d.endPoint,T=d.sourceNode,C=d.targetNode,$=Jo({start:m,end:w,sourceNode:T,targetNode:C,offset:this.offset}),J=$.sNext,te=$.ePre;this.pointsList=[m,J,te,w],this.initPoints()}}])&&KN(o.prototype,l),h}(ff),P2=mu(uo.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),mu(uo.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"initPoints"),uo.prototype),mu(uo.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updatePoints"),uo.prototype),mu(uo.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateStartPoint"),uo.prototype),mu(uo.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateEndPoint"),uo.prototype),mu(uo.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"moveStartPoint"),uo.prototype),mu(uo.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"moveEndPoint"),uo.prototype),mu(uo.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateAdjustAnchor"),uo.prototype),mu(uo.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"getAdjustStart"),uo.prototype),mu(uo.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"getAdjustEnd"),uo.prototype),mu(uo.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(uo.prototype,"updateAfterAdjustStartAndEnd"),uo.prototype),uo),ln,j2,I2,L2,$2,F2,U2,V2,B2,W2,G2,z2,H2,X2,q2,Y2,K2,Z2,J2,Q2,eO,tO,nO,eC=function(i){return i==null};function tC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||rO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g_(i){return g_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},g_(i)}function rO(i,o){if(i){if(typeof i=="string")return oO(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?oO(i,o):void 0}}function oO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function iO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function ul(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?iO(Object(l),!0).forEach(function(u){kl(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):iO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Ri(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function nC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function kl(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function kr(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var _f,aO,wf=(ln=function(){function i(u,h){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),kl(this,"id",""),Ri(this,"type",j2,this),Ri(this,"x",I2,this),Ri(this,"y",L2,this),Ri(this,"text",$2,this),Ri(this,"properties",F2,this),Ri(this,"_width",U2,this),Ri(this,"_height",V2,this),Ri(this,"anchorsOffset",B2,this),Ri(this,"isSelected",W2,this),Ri(this,"isHovered",G2,this),Ri(this,"isShowAnchor",z2,this),Ri(this,"isDragging",H2,this),Ri(this,"isHitable",X2,this),Ri(this,"draggable",q2,this),Ri(this,"visible",Y2,this),Ri(this,"enableRotate",K2,this),kl(this,"virtual",!1),kl(this,"graphModel",void 0),Ri(this,"zIndex",Z2,this),Ri(this,"state",J2,this),Ri(this,"autoToFront",Q2,this),Ri(this,"style",eO,this),Ri(this,"transform",tO,this),Ri(this,"_rotate",nO,this),kl(this,"BaseType",fo.NODE),kl(this,"modelType",Ar.NODE),kl(this,"additionStateData",void 0),kl(this,"targetRules",[]),kl(this,"sourceRules",[]),kl(this,"moveRules",[]),kl(this,"hasSetTargetRules",!1),kl(this,"hasSetSourceRules",!1),this.graphModel=h,this.initNodeData(u),this.setAttributes()}var o,l;return o=i,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var h=this.x,d=h===void 0?0:h,m=this.y,w=m===void 0?0:m;this.transform=new Nd(-d,-w).rotate(u).translate(d,w).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var h=this.graphModel.idGenerator,d=h&&h(u.type),m=this.createId();u.id=m||d||ra()}this.formatText(u),Li(this,function(w){return tl(w,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===To.INCREASE&&(this.zIndex=u.zIndex||uu())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,h=u.x,d=u.y,m=u.value,w=this.properties;Object(c.x)(w)&&(w=Object(c.I)(w));var T={id:this.id,type:this.type,x:this.x,y:this.y,properties:w};return this.rotate&&(T.rotate=this.rotate),this.graphModel.overlapMode===To.INCREASE&&(T.zIndex=this.zIndex),m&&(T.text={x:h,y:d,value:m}),T}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return ul(ul({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return no(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return no(u)}},{key:"getAnchorStyle",value:function(u){var h=this.graphModel.theme.anchor;return no(h)}},{key:"getAnchorLineStyle",value:function(u){var h=this.graphModel.theme.anchorLine;return no(h)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return no(u)}},{key:"isAllowConnectedAsSource",value:function(u,h,d,m){var w=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var T,C=!0,$=0;$<w.length;$++){var J=w[$];if(!J.validate.call(this,this,u,h,d,m)){C=!1,T=J.message;break}}return{isAllPass:C,msg:T}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,h,d,m){var w=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var T,C=!0,$=0;$<w.length;$++){var J=w[$];if(!J.validate.call(this,u,this,h,d,m)){C=!1,T=J.message;break}}return{isAllPass:C,msg:T}}},{key:"isAllowMoveNode",value:function(u,h){var d,m=!0,w=!0,T=function(J,te){var ge=typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(!ge){if(Array.isArray(J)||(ge=rO(J))||te){ge&&(J=ge);var Pe=0,je=function(){};return{s:je,n:function(){return Pe>=J.length?{done:!0}:{done:!1,value:J[Pe++]}},e:function(Bt){throw Bt},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var st,at=!0,bt=!1;return{s:function(){ge=ge.call(J)},n:function(){var Bt=ge.next();return at=Bt.done,Bt},e:function(Bt){bt=!0,st=Bt},f:function(){try{at||ge.return==null||ge.return()}finally{if(bt)throw st}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(T.s();!(d=T.n()).done;){var C=(0,d.value)(this,u,h);if(!C)return!1;if(g_(C)==="object"){var $=C;if($.x===!1&&$.y===!1)return!1;m=m&&$.x,w=w&&$.y}}}catch(J){T.e(J)}finally{T.f()}return{x:m,y:w}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,h=this.id,d=this.x,m=this.y;return u&&u.length>0?u.map(function(w,T){return w.length?(w=w,{id:"".concat(h,"_").concat(T),x:d+w[0],y:m+w[1]}):ul(ul({},w=w),{},{x:d+w.x,y:m+w.y,id:w.id||"".concat(h,"_").concat(T)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(h,d){for(var m,w=Ad(d),T=Number.MAX_SAFE_INTEGER,C=0;C<w.length;C++){var $=ll(h.x,h.y,w[C].x,w[C].y);$<T&&(T=$,m={index:C,anchor:Al(Al({},w[C]),{},{x:w[C].x,y:w[C].y,id:w[C].id})})}return m}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),h=this.x,d=this.y,m=this.rotate;return u.forEach(function(w){var T=w.x,C=w.y,$=tC(new Ts([T,C,1]).translate(-h,-d).rotate(m).translate(h,d)[0],2),J=$[0],te=$[1];w.x=J,w.y=te}),u}},{key:"getAnchorInfo",value:function(u){if(!eC(u))for(var h=0;h<this.anchors.length;h++){var d=this.anchors[h];if(d.id===u)return d}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1;if(d)m=!0,w=!0;else{var T=this.isAllowMoveNode(u,h);typeof T=="boolean"?(m=T,w=T):(m=T.x,w=T.y)}if(m){var C=this.x+u;this.x=C,this.text&&this.moveText(u,0)}if(w){var $=this.y+h;this.y=$,this.text&&this.moveText(0,h)}return m||w}},{key:"getMoveDistance",value:function(u,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1,T=0,C=0;if(d)m=!0,w=!0;else{var $=this.isAllowMoveNode(u,h);typeof $=="boolean"?(m=$,w=$):(m=$.x,w=$.y)}if(m&&u){var J=this.x+u;this.x=J,this.text&&this.moveText(u,0),T=u}if(w&&h){var te=this.y+h;this.y=te,this.text&&this.moveText(0,h),C=h}return[T,C]}},{key:"moveTo",value:function(u,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=u-this.x,w=h-this.y;return!(!d&&!this.isAllowMoveNode(m,w)||(this.text&&this.text&&this.moveText(m,w),this.x=u,this.y=h,0))}},{key:"moveText",value:function(u,h){var d=this.text,m=d.x,w=d.y,T=d.value,C=d.draggable,$=d.editable;this.text={value:T,editable:$,draggable:C,x:m+u,y:w+h}}},{key:"updateText",value:function(u){this.text=ul(ul({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,h){this.state=u,this.additionStateData=h}},{key:"setProperty",value:function(u,h){this.properties=ul(ul({},Object(c.I)(this.properties)),{},kl({},u,bi(h))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=ul(ul({},Object(c.I)(this.properties)),bi(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,h){this.style=ul(ul({},this.style),{},kl({},u,bi(h)))}},{key:"setStyles",value:function(u){this.style=ul(ul({},this.style),bi(u))}},{key:"updateStyles",value:function(u){this.style=ul({},bi(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Li(this,u)}}],l&&nC(o.prototype,l),i}(),j2=kr(ln.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I2=kr(ln.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L2=kr(ln.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$2=kr(ln.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),F2=kr(ln.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),U2=kr(ln.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),V2=kr(ln.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),B2=kr(ln.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W2=kr(ln.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G2=kr(ln.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z2=kr(ln.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H2=kr(ln.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X2=kr(ln.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q2=kr(ln.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y2=kr(ln.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K2=kr(ln.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z2=kr(ln.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J2=kr(ln.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q2=kr(ln.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),eO=kr(ln.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tO=kr(ln.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nO=kr(ln.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),kr(ln.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(ln.prototype,"incoming"),ln.prototype),kr(ln.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(ln.prototype,"outgoing"),ln.prototype),kr(ln.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"addNodeMoveRules"),ln.prototype),kr(ln.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"move"),ln.prototype),kr(ln.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"getMoveDistance"),ln.prototype),kr(ln.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"moveTo"),ln.prototype),kr(ln.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"moveText"),ln.prototype),kr(ln.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateText"),ln.prototype),kr(ln.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setSelected"),ln.prototype),kr(ln.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setHovered"),ln.prototype),kr(ln.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setIsShowAnchor"),ln.prototype),kr(ln.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setEnableRotate"),ln.prototype),kr(ln.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setHitable"),ln.prototype),kr(ln.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setElementState"),ln.prototype),kr(ln.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setProperty"),ln.prototype),kr(ln.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setProperties"),ln.prototype),kr(ln.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"deleteProperty"),ln.prototype),kr(ln.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setStyle"),ln.prototype),kr(ln.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setStyles"),ln.prototype),kr(ln.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateStyles"),ln.prototype),kr(ln.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setZIndex"),ln.prototype),kr(ln.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateAttributes"),ln.prototype),ln);function b_(i){return b_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},b_(i)}function lO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function sO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lO(Object(l),!0).forEach(function(u){uO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function rC(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function oC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function iC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function __(){return __=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=aC(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},__.apply(this,arguments)}function aC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Xh(i))!==null;);return i}function w_(i,o){return w_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},w_(i,o)}function lC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Xh(i);if(o){var h=Xh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return sC(this,l)}}function sC(i,o){if(o&&(b_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xy(i)}function xy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xh(i){return Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xh(i)}function uO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function E_(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Wa,cO,fO,O_=(_f=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&w_(d,m)})(h,i);var o,l,u=lC(h);function h(){var d;oC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return uO(xy(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.CIRCLE_NODE),rC(xy(d),"r",aO,xy(d)),d}return o=h,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var d=__(Xh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.circle;return sO(sO({},d),no(m))}},{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.r;return[{x:d,y:m-w,id:"".concat(this.id,"_0")},{x:d+w,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+w,id:"".concat(this.id,"_2")},{x:d-w,y:m,id:"".concat(this.id,"_3")}]}}])&&iC(o.prototype,l),h}(wf),aO=E_(_f.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),E_(_f.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"width"),_f.prototype),E_(_f.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(_f.prototype,"height"),_f.prototype),_f);r(129);function S_(i){return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},S_(i)}function x_(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return dO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function pO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function hO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pO(Object(l),!0).forEach(function(u){mO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function vO(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function cC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function A_(){return A_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=fC(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},A_.apply(this,arguments)}function fC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yh(i))!==null;);return i}function T_(i,o){return T_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},T_(i,o)}function dC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Yh(i);if(o){var h=Yh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return pC(this,l)}}function pC(i,o){if(o&&(S_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qh(i)}function qh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yh(i){return Yh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yh(i)}function mO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Kh(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var oc,yO,gO,M_=(Wa=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&T_(d,m)})(h,i);var o,l,u=dC(h);function h(){var d;uC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return mO(qh(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.DIAMOND_NODE),vO(qh(d),"rx",cO,qh(d)),vO(qh(d),"ry",fO,qh(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=A_(Yh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.diamond;return hO(hO({},d),no(m))}},{key:"points",get:function(){var d=this.x,m=this.y,w=this.rx,T=this.ry;return[[d,m-T],[d+w,m],[d,m+T],[d-w,m]]}},{key:"pointsPosition",get:function(){return this.points.map(function(d){return{x:d[0],y:d[1]}})}},{key:"width",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=x_(w,1)[0];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"height",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=x_(w,2)[1];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"getDefaultAnchor",value:function(){var d=this;return this.points.map(function(m,w){var T=x_(m,2);return{x:T[0],y:T[1],id:"".concat(d.id,"_").concat(w)}})}}])&&cC(o.prototype,l),h}(wf),cO=Kh(Wa.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),fO=Kh(Wa.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Kh(Wa.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"points"),Wa.prototype),Kh(Wa.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"pointsPosition"),Wa.prototype),Kh(Wa.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"width"),Wa.prototype),Kh(Wa.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"height"),Wa.prototype),Wa);function k_(i){return k_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},k_(i)}function bO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function _O(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?bO(Object(l),!0).forEach(function(u){EO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):bO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function wO(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function hC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function vC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function P_(){return P_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=mC(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},P_.apply(this,arguments)}function mC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Jh(i))!==null;);return i}function R_(i,o){return R_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R_(i,o)}function yC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jh(i);if(o){var h=Jh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return gC(this,l)}}function gC(i,o){if(o&&(k_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zh(i)}function Zh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jh(i){return Jh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jh(i)}function EO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Ay(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var ks,OO,N_=(oc=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&R_(d,m)})(h,i);var o,l,u=yC(h);function h(){var d;hC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return EO(Zh(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.ELLIPSE_NODE),wO(Zh(d),"rx",yO,Zh(d)),wO(Zh(d),"ry",gO,Zh(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=P_(Jh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.ellipse;return _O(_O({},d),no(m))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.rx,T=this.ry;return[{x:d,y:m-T,id:"".concat(this.id,"_0")},{x:d+w,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T,id:"".concat(this.id,"_2")},{x:d-w,y:m,id:"".concat(this.id,"_3")}]}}])&&vC(o.prototype,l),h}(wf),yO=Ay(oc.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),gO=Ay(oc.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Ay(oc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(oc.prototype,"width"),oc.prototype),Ay(oc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(oc.prototype,"height"),oc.prototype),oc);function C_(i){return C_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},C_(i)}function D_(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return SO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return SO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function xO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function AO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xO(Object(l),!0).forEach(function(u){TO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function bC(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function _C(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function wC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function j_(){return j_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=EC(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},j_.apply(this,arguments)}function EC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Qh(i))!==null;);return i}function I_(i,o){return I_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},I_(i,o)}function OC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Qh(i);if(o){var h=Qh(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return SC(this,l)}}function SC(i,o){if(o&&(C_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ty(i)}function Ty(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qh(i){return Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qh(i)}function TO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function My(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var L_,MO,$_=(ks=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&I_(d,m)})(h,i);var o,l,u=OC(h);function h(){var d;_C(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return TO(Ty(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.POLYGON_NODE),bC(Ty(d),"points",OO,Ty(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=j_(Qh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.polygon;return AO(AO({},d),no(m))}},{key:"pointsPosition",get:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return this.points.map(function(C){return{x:C[0]+d-w/2,y:C[1]+m-T/2}})}},{key:"width",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=D_(w,1)[0];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"height",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=D_(w,2)[1];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"getDefaultAnchor",value:function(){var d=this,m=this.x,w=this.y,T=this.width,C=this.height;return this.points.map(function($,J){var te=D_($,2),ge=te[0],Pe=te[1];return{x:m+ge-T/2,y:w+Pe-C/2,id:"".concat(d.id,"_").concat(J)}})}}])&&wC(o.prototype,l),h}(wf),OO=My(ks.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),My(ks.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(ks.prototype,"pointsPosition"),ks.prototype),My(ks.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ks.prototype,"width"),ks.prototype),My(ks.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ks.prototype,"height"),ks.prototype),ks);function F_(i){return F_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},F_(i)}function kO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function PO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?kO(Object(l),!0).forEach(function(u){RO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):kO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function xC(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function AC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function TC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function U_(){return U_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=MC(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},U_.apply(this,arguments)}function MC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ev(i))!==null;);return i}function V_(i,o){return V_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},V_(i,o)}function kC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ev(i);if(o){var h=ev(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return PC(this,l)}}function PC(i,o){if(o&&(F_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ky(i)}function ky(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ev(i){return ev=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ev(i)}function RO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var jd,B_=(L_=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&V_(d,m)})(h,i);var o,l,u=kC(h);function h(){var d;AC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return RO(ky(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.RECT_NODE),xC(ky(d),"radius",MO,ky(d)),d}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return[{x:d,y:m-T/2,id:"".concat(this.id,"_0")},{x:d+w/2,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T/2,id:"".concat(this.id,"_2")},{x:d-w/2,y:m,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var d=U_(ev(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.rect;return PO(PO({},d),no(m))}}])&&TC(o.prototype,l),h}(wf),MO=function(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}(L_.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L_);function W_(i){return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},W_(i)}function NO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function CO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?NO(Object(l),!0).forEach(function(u){jO(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):NO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function RC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function NC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function G_(){return G_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var u=CC(i,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},G_.apply(this,arguments)}function CC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=tv(i))!==null;);return i}function z_(i,o){return z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z_(i,o)}function DC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=tv(i);if(o){var h=tv(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return jC(this,l)}}function jC(i,o){if(o&&(W_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DO(i)}function DO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tv(i){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tv(i)}function jO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function IO(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var H_=(jd=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&z_(d,m)})(h,i);var o,l,u=DC(h);function h(){var d;RC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return jO(DO(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.TEXT_NODE),d}return o=h,(l=[{key:"getTextStyle",value:function(){var d=G_(tv(h.prototype),"getTextStyle",this).call(this),m=this.graphModel.theme.text;return CO(CO({},d),no(m))}},{key:"width",get:function(){var d=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return su({rows:d,fontSize:m,rowsLength:d.length}).width}},{key:"height",get:function(){var d=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return su({rows:d,fontSize:m,rowsLength:d.length}).height}}])&&NC(o.prototype,l),h}(wf),IO(jd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(jd.prototype,"width"),jd.prototype),IO(jd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(jd.prototype,"height"),jd.prototype),jd);function X_(i){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X_(i)}function IC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function LC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function q_(i,o){return q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},q_(i,o)}function $C(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Py(i);if(o){var h=Py(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return FC(this,l)}}function FC(i,o){if(o&&(X_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LO(i)}function LO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Py(i){return Py=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Py(i)}function UC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var yu,$O,FO,UO,Y_=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&q_(d,m)})(h,i);var o,l,u=$C(h);function h(){var d;IC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return UC(LO(d=u.call.apply(u,[this].concat(w))),"modelType",Ar.HTML_NODE),d}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return[{x:d,y:m-T/2,id:"".concat(this.id,"_0")},{x:d+w/2,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T/2,id:"".concat(this.id,"_2")},{x:d-w/2,y:m,id:"".concat(this.id,"_3")}]}}])&&LC(o.prototype,l),h}(wf);function VO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function K_(i,o,l,u){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function VC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function BO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function fm(i,o,l,u,h){var d={};return Object.keys(u).forEach(function(m){d[m]=u[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var WO=(yu=function(){function i(u){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),BO(this,"graphModel",void 0),K_(this,"isShowHorizontal",$O,this),K_(this,"isShowVertical",FO,this),K_(this,"position",UO,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var o,l;return o=i,l=[{key:"getStyle",value:function(){return function(u){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?VO(Object(d),!0).forEach(function(m){BO(u,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(d)):VO(Object(d)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(d,m))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,h){for(var d=u.x,m=u.y,w=!1,T=!1,C=0;C<h.length;C++){var $=h[C];if($.id!==u.id&&(d===$.x&&(w=!0),m===$.y&&(T=!0),w&&T))break}return{isShowVertical:w,isShowHorizontal:T,position:{x:d,y:m}}}},{key:"getHorizontalSnapline",value:function(u,h){var d,m,w=!1,T=u.id;if(T){var C=this.graphModel.fakerNode;if(C&&C.id===T)m=Oo(C);else{var $=this.graphModel.getNodeModelById(T);m=Oo($)}}for(var J=0;J<h.length;J++){var te=h[J];if(te.id!==u.id){var ge=Oo(te);if(ge.minY===m.minY||ge.maxY===m.minY){w=!0,d=m.minY;break}if(ge.minY===m.maxY||ge.maxY===m.maxY){w=!0,d=m.maxY;break}}}return Li({isShowHorizontal:w,position:{y:d}})}},{key:"getVerticalSnapline",value:function(u,h){var d,m,w=!1,T=u.id;if(T){var C=this.graphModel.fakerNode;if(C&&C.id===T)m=Oo(C);else{var $=this.graphModel.getNodeModelById(T);m=Oo($)}}for(var J=0;J<h.length;J++){var te=h[J];if(te.id!==u.id){var ge=Oo(te);if(ge.minX===m.minX||ge.maxX===m.minX){w=!0,d=m.minX;break}if(ge.minX===m.maxX||ge.maxX===m.maxX){w=!0,d=m.maxX;break}}}return Li({isShowVertical:w,position:{x:d}})}},{key:"getSnapLinePosition",value:function(u,h){var d=this.getCenterSnapLine(u,h),m=d.isShowHorizontal,w=d.isShowVertical;if(!m){var T=this.getHorizontalSnapline(u,h);T.isShowHorizontal&&(d.isShowHorizontal=T.isShowHorizontal,d.position.y=T.position.y)}if(!w){var C=this.getVerticalSnapline(u,h);C.isShowVertical&&(d.isShowVertical=C.isShowVertical,d.position.x=C.position.x)}return d}},{key:"setSnaplineInfo",value:function(u){var h=u.isShowHorizontal,d=u.isShowVertical,m=u.position;this.position=m,this.isShowHorizontal=h,this.isShowVertical=d}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var h=this.graphModel.nodes,d=this.getSnapLinePosition(u,h);this.setSnaplineInfo(d)}}],l&&VC(o.prototype,l),i}(),$O=fm(yu.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FO=fm(yu.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=fm(yu.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fm(yu.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(yu.prototype,"clearSnapline"),yu.prototype),fm(yu.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(yu.prototype,"setNodeSnapLine"),yu.prototype),yu),dm=new Map,GO=function(i){var o=ra(),l=window.requestAnimationFrame(function u(){if(i(),dm.get(o)){var h=window.requestAnimationFrame(u);dm.set(o,h)}});return dm.set(o,l),o},Ry=function(i){var o=dm.get(i);o&&(window.cancelAnimationFrame(o),dm.delete(i))};function Z_(i){return Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Z_(i)}function pm(){return pm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},pm.apply(this,arguments)}function zO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function hm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?zO(Object(l),!0).forEach(function(u){ac(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):zO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function BC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return HO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return HO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function HO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function WC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function J_(i,o){return J_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},J_(i,o)}function GC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ny(i);if(o){var h=Ny(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return zC(this,l)}}function zC(i,o){if(o&&(Z_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ic(i)}function ic(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ny(i){return Ny=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ny(i)}function ac(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var HC=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&J_(d,m)})(h,i);var o,l,u=GC(h);function h(){var d;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),ac(ic(d=u.call(this)),"preTargetNode",void 0),ac(ic(d),"sourceRuleResults",void 0),ac(ic(d),"targetRuleResults",void 0),ac(ic(d),"dragHandler",void 0),ac(ic(d),"t",void 0),ac(ic(d),"onDragStart",function(m){var w=m.event,T=d.props,C=T.anchorData,$=T.nodeModel,J=T.graphModel;J.overlapMode,J.selectNodeById($.id),$.autoToFront&&J.toFront($.id),J.eventCenter.emit(Cn.ANCHOR_DRAGSTART,{data:C,e:w,nodeModel:$}),d.setState({startX:C.x,startY:C.y,endX:C.x,endY:C.y})}),ac(ic(d),"onDragging",function(m){var w=m.event,T=d.props,C=T.graphModel,$=T.nodeModel,J=T.anchorData,te=C.transformModel,ge=C.eventCenter,Pe=C.width,je=C.height,st=C.editConfigModel,at=st.autoExpand,bt=st.stopMoveGraph,Bt=w.clientX,gn=w.clientY,yn=C.getPointByClient({x:Bt,y:gn}),zn=yn.domOverlayPosition,hn=zn.x,In=zn.y,Sn=yn.canvasOverlayPosition,Ir=Sn.x,Vr=Sn.y;d.t&&Ry(d.t);var pr=[];hn<10?pr=[10,0]:hn+10>Pe?pr=[-10,0]:In<10?pr=[0,10]:In+10>je&&(pr=[0,-10]),d.setState({endX:Ir,endY:Vr,dragging:!0}),d.moveAnchorEnd(Ir,Vr),pr.length>0&&!bt&&at&&(d.t=GO(function(){var Zr=BC(pr,2),_i=Zr[0],wi=Zr[1];te.translate(_i,wi);var Ta=d.state,es=Ta.endX,ts=Ta.endY;d.setState({endX:es-_i,endY:ts-wi}),d.moveAnchorEnd(es-_i,ts-wi)})),ge.emit(Cn.ANCHOR_DRAG,{data:J,e:w,nodeModel:$})}),ac(ic(d),"onDragEnd",function(m){var w=m.event;d.t&&Ry(d.t);var T=d.checkEnd(w);d.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),d.sourceRuleResults.clear(),d.targetRuleResults.clear();var C=d.props,$=C.graphModel,J=C.nodeModel,te=C.anchorData;$.eventCenter.emit(Cn.ANCHOR_DRAGEND,{data:te,e:w,nodeModel:J,edgeModel:T})}),ac(ic(d),"checkEnd",function(m){var w=d.props,T=w.graphModel,C=w.nodeModel,$=w.anchorData,J=$.x,te=$.y,ge=$.id,Pe=(T.edgeType,d.state),je=Pe.endX,st=Pe.endY,at=Pe.dragging,bt=nf({x:je,y:st},T);if(d.preTargetNode&&d.preTargetNode.state!==Kr.DEFAULT&&d.preTargetNode.setElementState(Kr.DEFAULT),at&&bt&&bt.node){var Bt=bt.node,gn=bt.anchor.id,yn="".concat(C.id,"_").concat(Bt.id,"_").concat(gn,"_").concat(ge),zn=d.sourceRuleResults.get(yn)||{},hn=zn.isAllPass,In=zn.msg,Sn=d.targetRuleResults.get(yn)||{},Ir=Sn.isAllPass,Vr=Sn.msg;if(hn&&Ir){Bt.setElementState(Kr.DEFAULT);var pr=T.edgeGenerator(C.getData(),T.getNodeModelById(bt.node.id).getData()),Zr=T.addEdge(hm(hm({},pr),{},{sourceNodeId:C.id,sourceAnchorId:ge,startPoint:{x:J,y:te},targetNodeId:bt.node.id,targetAnchorId:bt.anchor.id,endPoint:{x:bt.anchor.x,y:bt.anchor.y}})),_i=d.props.anchorData;return T.eventCenter.emit(Cn.ANCHOR_DROP,{data:_i,e:m,nodeModel:C,edgeModel:Zr}),Zr}var wi=Bt.getData();return T.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:wi,msg:Vr||In||"不允许添加连线"}),null}}),d.sourceRuleResults=new Map,d.targetRuleResults=new Map,d.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},d.dragHandler=new ye({onDragStart:d.onDragStart,onDragging:d.onDragging,onDragEnd:d.onDragEnd}),d}return o=h,(l=[{key:"getAnchorShape",value:function(){var d=this.props,m=d.anchorData,w=d.style,T=d.node.getAnchorShape(m);if(T)return T;var C=m.x,$=m.y,J=hm(hm({},w),w.hover);return Object(Ue.g)("g",null,Object(Ue.g)(Hh,pm({className:"lf-node-anchor-hover"},J,{x:C,y:$})),Object(Ue.g)(Hh,pm({className:"lf-node-anchor"},w,{x:C,y:$})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var d=this.props,m=d.graphModel,w=m.getAnchorIncomingEdge,T=m.getAnchorOutcomingEdge,C=d.anchorData.id;return{incomingEdgeList:w(C),outcomingEdgeList:T(C)}}},{key:"moveAnchorEnd",value:function(d,m){var w=this.props,T=w.graphModel,C=w.nodeModel,$=w.anchorData,J=nf({x:d,y:m},T);if(J){var te=J.node,ge=J.anchor.id;if(this.preTargetNode&&this.preTargetNode!==J.node&&this.preTargetNode.setElementState(Kr.DEFAULT),$.id===ge)return;this.preTargetNode=te;var Pe="".concat(C.id,"_").concat(te.id,"_").concat(ge,"_").concat($.id);if(!this.targetRuleResults.has(Pe)){var je=J.anchor,st=C.isAllowConnectedAsSource(te,$,je),at=te.isAllowConnectedAsTarget(C,$,je);this.sourceRuleResults.set(Pe,ql(st)),this.targetRuleResults.set(Pe,ql(at))}var bt=this.sourceRuleResults.get(Pe).isAllPass,Bt=this.targetRuleResults.get(Pe).isAllPass;bt&&Bt?te.setElementState(Kr.ALLOW_CONNECT):te.setElementState(Kr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Kr.DEFAULT&&this.preTargetNode.setElementState(Kr.DEFAULT)}},{key:"isShowLine",value:function(){var d=this.state,m=d.startX,w=d.startY,T=d.endX,C=d.endY;return ll(m,w,T,C)>10}},{key:"render",value:function(){var d=this,m=this.state,w=m.startX,T=m.startY,C=m.endX,$=m.endY,J=this.props,te=J.anchorData.edgeAddable,ge=J.edgeStyle;return Object(Ue.g)("g",{className:"lf-anchor"},Object(Ue.g)("g",{onMouseDown:function(Pe){te!==!1&&d.dragHandler.handleMouseDown(Pe)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(hm({sourcePoint:{x:w,y:T},targetPoint:{x:C,y:$}},ge)):Object(Ue.g)(Gh,pm({x1:w,y1:T,x2:C,y2:$},ge,{"pointer-events":"none"}))))}}])&&WC(o.prototype,l),h}(Ue.a);function XO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function XC(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?XO(Object(l),!0).forEach(function(u){qC(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):XO(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function qC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Q_(i){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Q_(i)}function YC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return qO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function YO(i){var o=i.x,l=o===void 0?0:o,u=i.y,h=u===void 0?0:u,d=i.value,m=i.fontSize,w=i.fill,T=w===void 0?"currentColor":w,C=i.overflowMode,$=C===void 0?"default":C,J=i.textWidth,te=J===void 0?"":J,ge=i.model,Pe={textAnchor:"middle","dominant-baseline":"middle",x:l,y:h,fill:T};if(Object.entries(i).forEach(function(gn){var yn=YC(gn,2),zn=yn[0],hn=yn[1];Q_(hn)!=="object"&&(Pe[zn]=hn)}),d){var je=String(d).split(/[\r\n]/g),st=je.length;if($!=="default"){var at=ge.BaseType,bt=ge.modelType;if(at===fo.NODE&&bt!==Ar.TEXT_NODE||at===fo.EDGE&&te)return function(gn){var yn=gn.value,zn=gn.fontSize,hn=gn.model,In=gn.fontFamily,Sn=In===void 0?"":In,Ir=gn.lineHeight,Vr=gn.wrapPadding,pr=Vr===void 0?"0, 0":Vr,Zr=gn.overflowMode,_i=gn.x,wi=gn.y,Ta=hn.width,es=hn.textHeight,ts=gn.textWidth||Ta,uc=String(yn).split(/[\r\n]/g),Gp=uc.length,rg=sf({rows:uc,style:{fontSize:"".concat(zn,"px"),width:"".concat(ts,"px"),fontFamily:Sn,lineHeight:Ir,padding:pr},rowsLength:Gp,className:"lf-get-text-height"}),zp=hn.height>rg?hn.height:rg;es&&(zp=es);var $d=Zr==="ellipsis";return $d&&(zp=zn+2),Object(Ue.g)("g",null,Object(Ue.g)("foreignObject",{width:ts,height:zp,x:_i-ts/2,y:wi-zp/2},Object(Ue.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:zp,width:ts,padding:pr}},Object(Ue.g)("div",{className:$d?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:$d?uc.join(""):"",style:XC({},gn)},uc.map(function(Fd){return Object(Ue.g)("div",{className:"lf-node-text--auto-wrap-inner"},Fd)})))))}(i)}if(st>1){var Bt=je.map(function(gn,yn){var zn=(yn-(st-1)/2)*(m+2);return Object(Ue.g)("tspan",{className:"lf-text-tspan",x:l,y:h+zn},gn)});return Object(Ue.g)("text",Pe,Bt)}return Object(Ue.g)("text",Pe,d)}}function e0(i){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e0(i)}function t0(){return t0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},t0.apply(this,arguments)}function KC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return KO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return KO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function KO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function ZC(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function n0(i,o){return n0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},n0(i,o)}function JC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cy(i);if(o){var h=Cy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return QC(this,l)}}function QC(i,o){if(o&&(e0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Id(i)}function Id(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cy(i){return Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cy(i)}function Up(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ZO=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&n0(d,m)})(h,i);var o,l,u=JC(h);function h(d){var m;(function(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")})(this,h),Up(Id(m=u.call(this)),"dragHandler",void 0),Up(Id(m),"sumDeltaX",0),Up(Id(m),"sumDeltaY",0),Up(Id(m),"stepDrag",void 0),Up(Id(m),"onDragging",function(T){var C=T.deltaX,$=T.deltaY,J=m.props,te=J.model,ge=KC(J.graphModel.transformModel.fixDeltaXY(C,$),2),Pe=ge[0],je=ge[1];te.moveText(Pe,je)}),Up(Id(m),"dblClickHandler",function(){m.props.editable&&m.props.model.setElementState(Kr.TEXT_EDIT)}),Up(Id(m),"mouseDownHandle",function(T){var C=m.props,$=C.draggable,J=C.model,te=C.graphModel.editConfigModel.nodeTextDraggable;($||te)&&(m.stepDrag.model=J,m.stepDrag.handleMouseDown(T))}),d.model;var w=d.draggable;return m.stepDrag=new ye({onDragging:m.onDragging,step:1,isStopPropagation:w}),m}return o=h,(l=[{key:"getShape",value:function(){var d=this.props,m=d.model,w=d.graphModel,T=m.text,C=w.editConfigModel,$=T.value,J=T.x,te=T.y,ge=T.editable,Pe=T.draggable,je={x:J,y:te,className:"",value:$};ge?je.className="lf-element-text":Pe||C.nodeTextDraggable?je.className="lf-text-draggable":je.className="lf-text-disabled";var st=m.getTextStyle();return Object(Ue.g)(YO,t0({},je,st,{model:m}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Ue.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&ZC(o.prototype,l),h}(Ue.a),e3=Gs(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,JO=r(130);function r0(i){return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r0(i)}function o0(){return o0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},o0.apply(this,arguments)}function t3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function i0(i,o){return i0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},i0(i,o)}function n3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Dy(i);if(o){var h=Dy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return r3(this,l)}}function r3(i,o){if(o&&(r0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nv(i)}function nv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dy(i){return Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dy(i)}function vm(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var o3=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&i0(d,m)})(h,i);var o,l,u=n3(h);function h(d){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),vm(nv(m=u.call(this,d)),"style",{}),vm(nv(m),"defaultAngle",void 0),vm(nv(m),"normal",void 0),vm(nv(m),"stepperDrag",void 0),vm(nv(m),"onDragging",function(w){var T,C=w.event,$=m.props,J=$.graphModel,te=$.nodeModel,ge=$.eventCenter,Pe=J.selectNodes,je=te.x,st=te.y,at=C.clientX,bt=C.clientY,Bt=J.getPointByClient({x:at,y:bt}).canvasOverlayPosition,gn=Bt.x,yn=Bt.y,zn=new ze(gn-je,yn-st),hn=((T=m.normal)===null||T===void 0?void 0:T.angle(zn))-m.defaultAngle,In=new Nd(-je,-st).rotate(hn).translate(je,st).toString();te.transform=In,te.rotate=hn;var Sn=Object(JO.map)(Pe,function(Vr){return Vr.id});Sn.indexOf(te.id)===-1&&(Sn=[te.id]);var Ir=Object(JO.reduce)(Sn,function(Vr,pr){var Zr=J.getNodeModelById(pr);return Vr[pr]=Zr==null?void 0:Zr.getMoveDistance(0,0,!1),Vr},{});Sn.forEach(function(Vr){J.getNodeEdges(Vr).forEach(function(pr){if(Ir[pr.sourceNodeId]){var Zr=J.getNodeModelById(pr.sourceNodeId).anchors.find(function(wi){return wi.id===pr.sourceAnchorId});pr.updateStartPoint(Zr)}if(Ir[pr.targetNodeId]){var _i=J.getNodeModelById(pr.targetNodeId).anchors.find(function(wi){return wi.id===pr.targetAnchorId});pr.updateEndPoint(_i)}})}),ge.emit(Cn.NODE_ROTATE,{e:C,nodeModel:te})}),m.style=d.style,m.stepperDrag=new ye({onDragging:m.onDragging}),m}return o=h,(l=[{key:"render",value:function(){var d=this,m=this.props.nodeModel,w=m.x,T=m.y,C=w+m.width/2+20,$=T-m.height/2-20;return this.normal=new ze(1,0),this.defaultAngle=this.normal.angle(new ze(C-w,$-T)),m.defaultAngle=this.defaultAngle,Object(Ue.g)("g",{className:"lf-rotate-control"},Object(Ue.g)("g",{onMouseDown:function(J){d.stepperDrag.handleMouseDown(J)}},Object(Ue.g)(Hh,o0({},this.style,{cx:C,cy:$}))))}}])&&t3(o.prototype,l),h}(Ue.a);function a0(i){return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a0(i)}var i3=["className"];function jy(){return jy=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},jy.apply(this,arguments)}function a3(i,o){if(i==null)return{};var l,u,h=function(m,w){if(m==null)return{};var T,C,$={},J=Object.keys(m);for(C=0;C<J.length;C++)T=J[C],w.indexOf(T)>=0||($[T]=m[T]);return $}(i,o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(u=0;u<d.length;u++)l=d[u],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function Iy(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return QO(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return QO(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function eS(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function l0(i,o){return l0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l0(i,o)}function l3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ly(i);if(o){var h=Ly(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return s3(this,l)}}function s3(i,o){if(o&&(a0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ia(i)}function ia(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ly(i){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ly(i)}function ha(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Ef=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&l0(m,w)})(d,i);var o,l,u,h=l3(d);function d(m){var w;(function(te,ge){if(!(te instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,d),ha(ia(w=h.call(this)),"t",void 0),ha(ia(w),"moveOffset",void 0),ha(ia(w),"stepDrag",void 0),ha(ia(w),"contextMenuTime",void 0),ha(ia(w),"mouseUpDrag",void 0),ha(ia(w),"startTime",void 0),ha(ia(w),"clickTimer",void 0),ha(ia(w),"modelDisposer",void 0),ha(ia(w),"onDragStart",function(te){var ge=te.event,Pe=ge.clientX,je=ge.clientY,st=w.props,at=st.model,bt=st.graphModel.getPointByClient({x:Pe,y:je}).canvasOverlayPosition,Bt=bt.x,gn=bt.y;w.moveOffset={x:at.x-Bt,y:at.y-gn}}),ha(ia(w),"onDragging",function(te){var ge=te.event,Pe=w.props,je=Pe.model,st=Pe.graphModel,at=st.editConfigModel,bt=at.stopMoveGraph,Bt=at.autoExpand,gn=st.transformModel,yn=st.selectNodes,zn=st.width,hn=st.height,In=st.gridSize;je.isDragging=!0;var Sn=ge.clientX,Ir=ge.clientY,Vr=st.getPointByClient({x:Sn,y:Ir}).canvasOverlayPosition,pr=Vr.x,Zr=Vr.y,_i=Iy(gn.CanvasPointToHtmlPoint([pr,Zr]),2),wi=_i[0],Ta=_i[1];if(pr+=w.moveOffset.x,Zr+=w.moveOffset.y,pr=rl(pr,In),Zr=rl(Zr,In),zn&&hn){if(!Bt||bt||!(wi<0||Ta<0||wi>zn||Ta>hn)){var es=Iy(gn.CanvasPointToHtmlPoint([pr-je.width/2,Zr-je.height/2]),2),ts=es[0],uc=es[1],Gp=Iy(gn.CanvasPointToHtmlPoint([pr+je.width/2,Zr+je.height/2]),2),rg=Gp[0],zp=Gp[1],$d=Math.max(In,20),Fd=[];ts<0?Fd=[$d,0]:rg>st.width?Fd=[-$d,0]:uc<0?Fd=[0,$d]:zp>st.height&&(Fd=[0,-$d]),w.t&&Ry(w.t);var zD=new Nd(-pr,-Zr).rotate(je.rotate).translate(pr,Zr).toString();je.transform=zD;var og=yn.map(function(ig){return ig.id});og.indexOf(je.id)===-1&&(og=[je.id]),Fd.length>0&&!bt&&Bt?w.t=GO(function(){var ig=Iy(Fd,2),DS=ig[0],jS=ig[1];gn.translate(DS,jS);var HD=-DS/gn.SCALE_X,XD=-jS/gn.SCALE_X;st.moveNodes(og,HD,XD)}):st.moveNodes(og,pr-je.x,Zr-je.y)}}else st.moveNode2Coordinate(je.id,pr,Zr)}),ha(ia(w),"onDragEnd",function(){w.t&&Ry(w.t),w.props.model.isDragging=!1}),ha(ia(w),"handleMouseUp",function(){var te=w.props.model;w.mouseUpDrag=te.isDragging}),ha(ia(w),"handleClick",function(te){var ge=w.mouseUpDrag===!1;if(w.startTime){var Pe=w.props,je=Pe.model,st=Pe.graphModel;if(ge){var at={data:je.getData(),e:te,position:st.getPointByClient({x:te.clientX,y:te.clientY}),isSelected:!1,isMultiple:!1},bt=te.button===2,Bt=te.detail===2;if(!bt){var gn=st.editConfigModel,yn=Yu(te,gn);at.isMultiple=yn,je.isSelected&&!Bt&&yn?(at.isSelected=!1,je.setSelected(!1)):(st.selectNodeById(je.id,yn),at.isSelected=!0,w.toFront()),Bt?(gn.nodeTextEdit&&je.text.editable&&(je.setSelected(!1),st.setElementStateById(je.id,Kr.TEXT_EDIT)),st.eventCenter.emit(Cn.NODE_DBCLICK,at)):(st.eventCenter.emit(Cn.ELEMENT_CLICK,at),st.eventCenter.emit(Cn.NODE_CLICK,at))}}}}),ha(ia(w),"handleContextMenu",function(te){te.preventDefault();var ge=w.props,Pe=ge.model,je=ge.graphModel,st=Pe.getData(),at=je.getPointByClient({x:te.clientX,y:te.clientY});je.setElementStateById(Pe.id,Kr.SHOW_MENU,at.domOverlayPosition),Pe.isSelected||je.selectNodeById(Pe.id),je.eventCenter.emit(Cn.NODE_CONTEXTMENU,{data:st,e:te,position:at}),w.toFront()}),ha(ia(w),"handleMouseDown",function(te){var ge=w.props,Pe=ge.model,je=ge.graphModel;w.startTime=new Date().getTime(),je.editConfigModel.adjustNodePosition&&Pe.draggable&&w.stepDrag&&w.stepDrag.handleMouseDown(te)}),ha(ia(w),"setHoverON",function(te){var ge=w.props,Pe=ge.model,je=ge.graphModel;if(!Pe.isHovered){var st=Pe.getData();Pe.setHovered(!0),je.eventCenter.emit(Cn.NODE_MOUSEENTER,{data:st,e:te})}}),ha(ia(w),"setHoverOFF",function(te){var ge=w.props,Pe=ge.model,je=ge.graphModel,st=Pe.getData();Pe.isHovered&&(Pe.setHovered(!1),je.eventCenter.emit(Cn.NODE_MOUSELEAVE,{data:st,e:te}))}),ha(ia(w),"onMouseOut",function(te){e3&&w.setHoverOFF(te)});var T=m.graphModel,C=T.gridSize,$=T.eventCenter,J=m.model;return w.stepDrag=new ye({onDragStart:w.onDragStart,onDragging:w.onDragging,onDragEnd:w.onDragEnd,step:C,eventType:"NODE",isStopPropagation:!1,eventCenter:$,model:J}),w.modelDisposer=Object(c.F)(function(){return w.props},function(te){te&&te.model&&w.stepDrag.setModel(te.model)}),w}return o=d,u=[{key:"getModel",value:function(m){return m}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(m){return null}},{key:"getAnchors",value:function(){var m=this,w=this.props,T=w.model,C=w.graphModel,$=T.isSelected,J=T.isHitable,te=T.isDragging,ge=T.isShowAnchor;return J&&($||ge)&&!te?ed(T.anchors,function(Pe,je){var st=T.getAnchorLineStyle(Pe),at=T.getAnchorStyle(Pe);return Object(Ue.g)(HC,{anchorData:Pe,node:m,style:at,edgeStyle:st,anchorIndex:je,nodeModel:T,graphModel:C,setHoverOFF:m.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var m=this.props,w=m.model,T=m.graphModel,C=w.isSelected,$=w.isHitable,J=w.enableRotate,te=w.isHovered,ge=w.getRotateControlStyle().style;if($&&(C||te)&&J)return Object(Ue.g)(o3,{graphModel:T,nodeModel:w,eventCenter:T.eventCenter,style:ge})}},{key:"getText",value:function(){var m=this.props,w=m.model,T=m.graphModel;if(w.state===Kr.TEXT_EDIT)return"";if(w.text){var C=T.editConfigModel,$=!1;return(w.text.draggable||C.nodeTextDraggable)&&($=!0),Object(Ue.g)(ZO,{editable:C.nodeTextEdit&&w.text.editable,model:w,graphModel:T,draggable:$})}}},{key:"getStateClassName",value:function(){var m=this.props.model,w=m.state,T=m.isDragging,C=m.isSelected,$="lf-node";switch(w){case Kr.ALLOW_CONNECT:$+=" lf-node-allow";break;case Kr.NOT_ALLOW_CONNECT:$+=" lf-node-not-allow";break;default:$+=" lf-node-default"}return T&&($+=" lf-isDragging"),C&&($+=" lf-node-selected"),$}},{key:"toFront",value:function(){var m=this.props,w=m.model,T=m.graphModel;w.autoToFront&&T.toFront(w.id)}},{key:"render",value:function(){var m,w=this.props,T=w.model,C=w.graphModel,$=C.editConfigModel,J=$.hideAnchors,te=$.adjustNodePosition,ge=$.allowRotation,Pe=C.gridSize,je=C.transformModel.SCALE_X,st=T.isHitable,at=T.draggable,bt=T.transform,Bt=T.getOuterGAttributes(),gn=Bt.className,yn=gn===void 0?"":gn,zn=a3(Bt,i3),hn=Object(Ue.g)("g",{className:"lf-node-content"},Object(Ue.g)("g",{transform:bt},this.getShape(),this.getText(),ge&&this.getRotateControl()),!J&&this.getAnchors());return st?(te&&at&&this.stepDrag.setStep(Pe*je),m=Object(Ue.g)("g",jy({className:"".concat(this.getStateClassName()," ").concat(yn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},zn),hn)):m=Object(Ue.g)("g",jy({className:"".concat(this.getStateClassName()," ").concat(yn)},zn),hn),m}}])&&eS(o.prototype,l),u&&eS(o,u),d}(Ue.a);function s0(i){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},s0(i)}function u0(){return u0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},u0.apply(this,arguments)}function u3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function c3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function c0(i,o){return c0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},c0(i,o)}function f3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$y(i);if(o){var h=$y(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return d3(this,l)}}function d3(i,o){if(o&&(s0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function $y(i){return $y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$y(i)}var f0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&c0(d,m)})(h,i);var o,l,u=f3(h);function h(){return u3(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(Ue.g)(Cd,u0({},m,{x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius}))}}])&&c3(o.prototype,l),h}(Ef);function d0(i){return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},d0(i)}function p0(){return p0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},p0.apply(this,arguments)}function p3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function h3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function h0(i,o){return h0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h0(i,o)}function v3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fy(i);if(o){var h=Fy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return m3(this,l)}}function m3(i,o){if(o&&(d0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Fy(i){return Fy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Fy(i)}var v0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&h0(d,m)})(h,i);var o,l,u=v3(h);function h(){return p3(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.r,C=d.getNodeStyle();return Object(Ue.g)(Hh,p0({},C,{x:m,y:w,r:T}))}}])&&h3(o.prototype,l),h}(Ef);function m0(i){return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},m0(i)}function y3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return tS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return tS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function nS(i){var o=i.points,l=i.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(h){var d=y3(h,2),m=d[0],w=d[1];m0(w)!=="object"&&(u[m]=w)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=o.map(function(h){return h.join(",")}).join(" "),Object(Ue.g)("polygon",u)}function y0(i){return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y0(i)}function g0(){return g0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},g0.apply(this,arguments)}function g3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function b3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function b0(i,o){return b0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},b0(i,o)}function _3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uy(i);if(o){var h=Uy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return w3(this,l)}}function w3(i,o){if(o&&(y0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}var _0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&b0(d,m)})(h,i);var o,l,u=_3(h);function h(){return g3(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.width,C=d.height,$=d.points,J=d.getNodeStyle(),te={transform:"matrix(1 0 0 1 ".concat(m-T/2," ").concat(w-C/2,")")};return Object(Ue.g)("g",te,Object(Ue.g)(nS,g0({},J,{points:$,x:m,y:w})))}}])&&b3(o.prototype,l),h}(Ef);function w0(i){return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},w0(i)}function E0(){return E0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},E0.apply(this,arguments)}function E3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function O3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function O0(i,o){return O0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},O0(i,o)}function S3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vy(i);if(o){var h=Vy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return x3(this,l)}}function x3(i,o){if(o&&(w0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Vy(i){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vy(i)}var S0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&O0(d,m)})(h,i);var o,l,u=S3(h);function h(){return E3(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(Ue.g)("g",null,Object(Ue.g)(nS,E0({},m,{points:d.points,x:d.x,y:d.y})))}}])&&O3(o.prototype,l),h}(Ef);function x0(i){return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},x0(i)}function A3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return rS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return rS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function T3(i){var o=i.x,l=o===void 0?0:o,u=i.y,h=u===void 0?0:u,d=i.rx,m=d===void 0?4:d,w=i.ry,T=w===void 0?4:w,C=i.className,$={cx:l,cy:h,rx:m,ry:T,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(J){var te=A3(J,2),ge=te[0],Pe=te[1];x0(Pe)!=="object"&&($[ge]=Pe)}),$.className=C?"lf-basic-shape ".concat(C):"lf-basic-shape",Object(Ue.g)("ellipse",$)}function A0(i){return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},A0(i)}function T0(){return T0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},T0.apply(this,arguments)}function M3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function k3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function M0(i,o){return M0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},M0(i,o)}function P3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=By(i);if(o){var h=By(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return R3(this,l)}}function R3(i,o){if(o&&(A0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var k0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&M0(d,m)})(h,i);var o,l,u=P3(h);function h(){return M3(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(Ue.g)(T3,T0({},m,{x:d.x,y:d.y,rx:d.rx,ry:d.ry}))}}])&&k3(o.prototype,l),h}(Ef);function P0(i){return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},P0(i)}function oS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function iS(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?oS(Object(l),!0).forEach(function(u){N3(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):oS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function N3(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function C3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function D3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function R0(i,o){return R0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},R0(i,o)}function j3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wy(i);if(o){var h=Wy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return I3(this,l)}}function I3(i,o){if(o&&(P0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}var N0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&R0(d,m)})(h,i);var o,l,u=j3(h);function h(){return C3(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getBackground",value:function(){var d=this.props.model,m=d.getTextStyle(),w=d.width,T=d.height,C=d.x,$=d.y,J=iS(iS({},m.background),{},{x:C,y:$-1,width:w,height:T});return Object(Ue.g)(Cd,J)}},{key:"getShape",value:function(){return Object(Ue.g)("g",null,this.getBackground())}}])&&D3(o.prototype,l),h}(Ef);function C0(i){return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},C0(i)}function D0(){return D0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},D0.apply(this,arguments)}function L3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function $3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function j0(i,o){return j0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},j0(i,o)}function F3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gy(i);if(o){var h=Gy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return U3(this,l)}}function U3(i,o){if(o&&(C0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mm(i)}function mm(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}function zy(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var I0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&j0(d,m)})(h,i);var o,l,u=F3(h);function h(){var d;L3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return zy(mm(d=u.call.apply(u,[this].concat(w))),"ref",void 0),zy(mm(d),"currentProperties",void 0),zy(mm(d),"preProperties",void 0),zy(mm(d),"setRef",function(C){d.ref=C}),d}return o=h,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(d){d.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.height,C=d.width,$=d.getNodeStyle();return this.currentProperties=JSON.stringify(d.properties),Object(Ue.g)("foreignObject",D0({},$,{x:m-C/2,y:w-T/2,width:C,height:T,ref:this.setRef}))}}])&&$3(o.prototype,l),h}(Ef);function L0(i){return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},L0(i)}function $0(){return $0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},$0.apply(this,arguments)}function aS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Vp(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?aS(Object(l),!0).forEach(function(u){V0(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):aS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function V3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function F0(i,o){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(i,o)}function B3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hy(i);if(o){var h=Hy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return W3(this,l)}}function W3(i,o){if(o&&(L0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U0(i)}function U0(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hy(i){return Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hy(i)}function V0(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var G3=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&F0(d,m)})(h,i);var o,l,u=B3(h);function h(d){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),V0(U0(m=u.call(this,d)),"setHoverON",function(){m.setState({isHovered:!0})}),V0(U0(m),"setHoverOFF",function(){m.setState({isHovered:!1})}),m.state={isHovered:!1},m}return o=h,(l=[{key:"getBackground",value:function(){var d=this.props.model,m=d.getTextStyle(),w=d.text,T=d.width,C=m.background||{};if(this.state.isHovered&&m.hover&&m.hover.background&&(C=Vp(Vp({},C),m.hover.background)),w&&w.value&&C.fill!=="transparent"){var $,J=m.fontSize,te=m.overflowMode,ge=m.lineHeight,Pe=m.wrapPadding,je=m.textWidth,st=w.value,at=w.x,bt=w.y,Bt=String(st).split(/[\r\n]/g),gn=Bt.length;if(te==="autoWrap"&&je){var yn=sf({rows:Bt,style:{fontSize:"".concat(J,"px"),width:"".concat(je,"px"),lineHeight:ge,padding:Pe},rowsLength:gn,className:"lf-get-text-height"});$=Vp(Vp({},C),{},{x:at-1,y:bt-1,width:je,height:yn})}else{Bt&&Bt.forEach(function(Ir){Io(Ir)});var zn=su({rows:Bt,fontSize:J,rowsLength:gn}),hn=zn.width,In=zn.height;if(te==="ellipsis"&&(hn=je||T,In=J+2),typeof C.wrapPadding=="string"){var Sn=C.wrapPadding.split(",").filter(function(Ir){return Ir.trim()}).map(function(Ir){return parseFloat(Ir.trim())});Sn.length>0&&Sn.length<=4&&(Sn.length===1?Sn=[Sn[0],Sn[0],Sn[0],Sn[0]]:Sn.length===2?Sn=[Sn[0],Sn[1],Sn[0],Sn[1]]:Sn.length===3&&(Sn=[Sn[0],Sn[1],Sn[2],Sn[1]]),hn+=Sn[1]+Sn[3],In+=Sn[0]+Sn[2],at+=(Sn[1]-Sn[3])/2,bt+=(Sn[2]-Sn[0])/2)}$=Vp(Vp({},C),{},{x:at-1,y:bt-1,width:hn,height:In})}return Object(Ue.g)(Cd,$)}}},{key:"getShape",value:function(){var d=this.props.model,m=d.text,w=m.value,T=m.x,C=m.y;if(w){var $=Vp({x:T,y:C,className:"lf-element-text",value:w},d.getTextStyle());return Object(Ue.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Ue.g)(YO,$0({},$,{model:d})))}}}])&&V3(o.prototype,l),h}(ZO);function B0(i){return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},B0(i)}var lc,z3=["text","sourceAnchorId","targetAnchorId"];function lS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Of(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lS(Object(l),!0).forEach(function(u){Ql(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function H3(i,o){if(i==null)return{};var l,u,h=function(m,w){if(m==null)return{};var T,C,$={},J=Object.keys(m);for(C=0;C<J.length;C++)T=J[C],w.indexOf(T)>=0||($[T]=m[T]);return $}(i,o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(u=0;u<d.length;u++)l=d[u],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function X3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return sS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return sS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function q3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function W0(i,o){return W0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},W0(i,o)}function Y3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Xy(i);if(o){var h=Xy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return K3(this,l)}}function K3(i,o){if(o&&(B0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(i)}function Jl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xy(i){return Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xy(i)}function Ql(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(lc||(lc={}));var uS=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&W0(d,m)})(h,i);var o,l,u=Y3(h);function h(d){var m;(function($,J){if(!($ instanceof J))throw new TypeError("Cannot call a class as a function")})(this,h),Ql(Jl(m=u.call(this)),"stepDragData",void 0),Ql(Jl(m),"stepDrag",void 0),Ql(Jl(m),"oldEdge",void 0),Ql(Jl(m),"preTargetNode",void 0),Ql(Jl(m),"targetRuleResults",void 0),Ql(Jl(m),"sourceRuleResults",void 0),Ql(Jl(m),"handleMouseDown",function($){m.stepDrag&&m.stepDrag.handleMouseDown($)}),Ql(Jl(m),"onDragStart",function(){var $=m.props,J=$.x,te=$.y,ge=$.edgeModel,Pe=ge.startPoint,je=ge.endPoint,st=ge.pointsList;m.oldEdge={startPoint:Pe,endPoint:je,pointsList:st},m.setState({endX:J,endY:te,dragging:!0})}),Ql(Jl(m),"onDragging",function($){var J=$.deltaX,te=$.deltaY,ge=m.state,Pe=ge.endX,je=ge.endY,st=m.props,at=st.graphModel,bt=st.type,Bt=at.transformModel,gn=at.editConfigModel,yn=X3(Bt.moveCanvasPointByHtml([Pe,je],J,te),2),zn=yn[0],hn=yn[1];m.setState({endX:zn,endY:hn,dragging:!0});var In=m.props.edgeModel,Sn=nf({x:Pe,y:je},at);if(Sn&&Sn.node&&m.isAllowAdjust(Sn).pass){var Ir,Vr=In.startPoint,pr=In.endPoint,Zr=In.sourceNode,_i=In.targetNode;bt===lc.SOURCE?Ir={startPoint:{x:Sn.anchor.x,y:Sn.anchor.y},endPoint:{x:pr.x,y:pr.y},sourceNode:Sn.node,targetNode:_i}:bt===lc.TARGET&&(Ir={startPoint:{x:Vr.x,y:Vr.y},endPoint:{x:Sn.anchor.x,y:Sn.anchor.y},sourceNode:Zr,targetNode:Sn.node}),In.updateAfterAdjustStartAndEnd(Ir)}else bt===lc.SOURCE?In.updateStartPoint({x:zn,y:hn}):bt===lc.TARGET&&In.updateEndPoint({x:zn,y:hn});In.text.value&&gn.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),Ql(Jl(m),"onDragEnd",function($){var J=$.event;try{var te;m.setState({dragging:!1});var ge=m.props,Pe=ge.graphModel,je=ge.edgeModel,st=ge.type,at=m.state,bt=at.endX,Bt=at.endY,gn=at.dragging,yn=nf({x:bt,y:Bt},Pe);if(!gn)return;var zn,hn=!1;if(yn&&yn.node){var In=m.isAllowAdjust(yn),Sn=In.pass,Ir=In.msg,Vr=In.newTargetNode;if(Sn){var pr=je.getData(),Zr=pr.text,_i=pr.sourceAnchorId,wi=_i===void 0?"":_i,Ta=pr.targetAnchorId;zn=Of(Of({sourceAnchorId:wi,targetAnchorId:Ta===void 0?"":Ta},H3(pr,z3)),{},{text:(Zr==null?void 0:Zr.value)||""}),st===lc.SOURCE?(zn=Of(Of({},Pe.edgeGenerator(Pe.getNodeModelById(yn.node.id).getData(),Pe.getNodeModelById(je.targetNodeId).getData(),zn)),{},{sourceNodeId:yn.node.id,sourceAnchorId:yn.anchor.id,startPoint:{x:yn.anchor.x,y:yn.anchor.y},targetNodeId:je.targetNodeId,endPoint:Of({},je.endPoint)}),je.sourceNodeId===yn.node.id&&je.sourceAnchorId===yn.anchor.id&&(hn=!0)):st===lc.TARGET&&(zn=Of(Of({},Pe.edgeGenerator(Pe.getNodeModelById(je.sourceNodeId).getData(),Pe.getNodeModelById(yn.node.id).getData(),zn)),{},{sourceNodeId:je.sourceNodeId,startPoint:Of({},je.startPoint),targetNodeId:yn.node.id,targetAnchorId:yn.anchor.id,endPoint:{x:yn.anchor.x,y:yn.anchor.y}}),je.targetNodeId===yn.node.id&&je.targetAnchorId===yn.anchor.id&&(hn=!0))}else{hn=!0;var es=Vr.getData();Pe.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:es,msg:Ir})}}else hn=!0;if(hn)m.recoveryEdge();else{var ts=je.getData();Pe.deleteEdgeById(je.id);var uc=Pe.addEdge(Of({},zn));Pe.eventCenter.emit(Cn.EDGE_EXCHANGE_NODE,{data:{newEdge:uc.getData(),oldEdge:ts}})}(te=m.preTargetNode)===null||te===void 0||te.setElementState(Kr.DEFAULT)}finally{m.props.graphModel.eventCenter.emit(Cn.ADJUST_POINT_DRAGEND,{e:J,data:m.stepDragData})}}),Ql(Jl(m),"recoveryEdge",function(){var $=m.props.edgeModel,J=m.oldEdge,te=J.startPoint,ge=J.endPoint,Pe=J.pointsList;$.updateStartPoint(te),$.updateEndPoint(ge),$.modelType!==Ar.LINE_EDGE&&($.pointsList=Pe,$.initPoints())}),Ql(Jl(m),"getAdjustPointStyle",function(){var $=m.props,J=$.graphModel.theme;return $.edgeModel,J.edgeAdjust}),m.state={dragging:!1,endX:0,endY:0},m.targetRuleResults=new Map,m.sourceRuleResults=new Map;var w=d.type,T=d.edgeModel,C=d.graphModel.eventCenter;return m.stepDragData={type:w,edgeData:T.getData()},m.stepDrag=new ye({onDragStart:m.onDragStart,onDragging:m.onDragging,onDragEnd:m.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:C,data:m.stepDragData}),m}return o=h,(l=[{key:"isAllowAdjust",value:function(d){var m=this.props,w=m.edgeModel,T=w.id,C=w.sourceNode,$=w.targetNode,J=w.sourceAnchorId,te=w.targetAnchorId,ge=m.type,Pe=null,je=null,st=null,at=null;if(ge===lc.SOURCE?(Pe=d.node,je=$,st=d.anchor,at=$.getAnchorInfo(te)):(Pe=C,je=d.node,at=d.anchor,st=C.getAnchorInfo(J)),this.preTargetNode&&this.preTargetNode!==d.node&&this.preTargetNode.setElementState(Kr.DEFAULT),this.preTargetNode=d.node,at.id===st.id)return{pass:!1,msg:"",newTargetNode:je};var bt="".concat(Pe.id,"_").concat(je.id,"_").concat(st.id,"_").concat(at.id);if(!this.targetRuleResults.has(bt)){var Bt=Pe.isAllowConnectedAsSource(je,st,at,T),gn=je.isAllowConnectedAsTarget(Pe,st,at,T);this.sourceRuleResults.set(bt,ql(Bt)),this.targetRuleResults.set(bt,ql(gn))}var yn=this.sourceRuleResults.get(bt),zn=yn.isAllPass,hn=yn.msg,In=this.targetRuleResults.get(bt),Sn=In.isAllPass,Ir=In.msg,Vr=zn&&Sn?Kr.ALLOW_CONNECT:Kr.NOT_ALLOW_CONNECT;return ge===lc.SOURCE?Pe.setElementState(Vr):je.setElementState(Vr),{pass:zn&&Sn,msg:Ir||hn,newTargetNode:je}}},{key:"render",value:function(){var d=this.props,m=d.x,w=d.y,T=d.getAdjustPointShape,C=d.edgeModel,$=this.state.dragging;return Object(Ue.g)("g",{pointerEvents:$?"none":"",onMouseDown:this.handleMouseDown},$?"":T(m,w,C))}}])&&q3(o.prototype,l),h}(Ue.a);function G0(i){return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},G0(i)}function ym(){return ym=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},ym.apply(this,arguments)}function Z3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return cS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return cS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function J3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Q3(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function z0(i,o){return z0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z0(i,o)}function eD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qy(i);if(o){var h=qy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return tD(this,l)}}function tD(i,o){if(o&&(G0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gu(i)}function gu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qy(i){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qy(i)}function sc(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gm=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&z0(d,m)})(h,i);var o,l,u=eD(h);function h(){var d;J3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return sc(gu(d=u.call.apply(u,[this].concat(w))),"startTime",void 0),sc(gu(d),"contextMenuTime",void 0),sc(gu(d),"clickTimer",void 0),sc(gu(d),"textRef",Object(Ue.f)()),sc(gu(d),"handleHover",function(C,$){var J=d.props,te=J.model,ge=J.graphModel.eventCenter;te.setHovered(C);var Pe=C?Cn.EDGE_MOUSEENTER:Cn.EDGE_MOUSELEAVE,je=te.getData();ge.emit(Pe,{data:je,e:$})}),sc(gu(d),"setHoverON",function(C){d.props.model.isHovered||(d.textRef&&d.textRef.current&&d.textRef.current.setHoverON(),d.handleHover(!0,C))}),sc(gu(d),"setHoverOFF",function(C){d.props.model.isHovered&&(d.textRef&&d.textRef.current&&d.textRef.current.setHoverOFF(),d.handleHover(!1,C))}),sc(gu(d),"handleContextMenu",function(C){C.preventDefault(),d.contextMenuTime=new Date().getTime(),d.clickTimer&&clearTimeout(d.clickTimer);var $=d.props,J=$.model,te=$.graphModel,ge=te.getPointByClient({x:C.clientX,y:C.clientY});te.setElementStateById(J.id,Kr.SHOW_MENU,ge.domOverlayPosition),d.toFront(),J.isSelected||te.selectEdgeById(J.id);var Pe=J==null?void 0:J.getData();te.eventCenter.emit(Cn.EDGE_CONTEXTMENU,{data:Pe,e:C,position:ge})}),sc(gu(d),"handleMouseDown",function(C){C.stopPropagation(),d.startTime=new Date().getTime()}),sc(gu(d),"handleMouseUp",function(C){if(d.startTime&&!(new Date().getTime()-d.startTime>200||C.button===2)){var $=C.detail===2,J=d.props,te=J.model,ge=J.graphModel,Pe=te==null?void 0:te.getData(),je=ge.getPointByClient({x:C.clientX,y:C.clientY});if($){var st=ge.editConfigModel,at=ge.textEditElement;if(at&&at.id===te.id&&ge.setElementStateById(te.id,Kr.DEFAULT),st.edgeTextEdit&&te.text.editable&&ge.setElementStateById(te.id,Kr.TEXT_EDIT),te.modelType===Ar.POLYLINE_EDGE){var bt=te,Bt=ge.getPointByClient({x:C.x,y:C.y}).canvasOverlayPosition,gn=Bt.x,yn=Bt.y,zn=Mr({x:gn,y:yn},bt.points);bt.dbClickPosition=zn}ge.eventCenter.emit(Cn.EDGE_DBCLICK,{data:Pe,e:C,position:je})}else ge.eventCenter.emit(Cn.ELEMENT_CLICK,{data:Pe,e:C,position:je}),ge.eventCenter.emit(Cn.EDGE_CLICK,{data:Pe,e:C,position:je});var hn=ge.editConfigModel;ge.selectEdgeById(te.id,Yu(C,hn)),d.toFront()}}),d}return o=h,(l=[{key:"getShape",value:function(){return Object(Ue.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var d=this.props,m=d.model,w=d.graphModel;if(m.state===Kr.TEXT_EDIT)return null;var T=!1,C=w.editConfigModel;return(m.text.draggable||C.edgeTextDraggable)&&(T=!0),Object(Ue.g)(G3,{ref:this.textRef,editable:C.edgeTextEdit&&m.text.editable,model:m,graphModel:w,draggable:T})}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=d.isSelected;return{start:m,end:w,hover:this.state.hover,isSelected:T}}},{key:"getLastTwoPoints",value:function(){var d=this.props.model;return[d.startPoint,d.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var d=this.props.model,m=d.id,w=d.getArrowStyle(),T=w.refY,C=T===void 0?0:T,$=w.refX,J=$===void 0?2:$,te=Z3(this.getLastTwoPoints(),2),ge=te[0],Pe=te[1],je="auto";return ge!==null&&Pe!==null&&(je=jp(Pd({x:Pe.x-ge.x,y:Pe.y-ge.y,z:0}))),Object(Ue.g)("g",null,Object(Ue.g)("defs",null,Object(Ue.g)("marker",{id:"marker-start-".concat(m),refX:-J,refY:C,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Ue.g)("marker",{id:"marker-end-".concat(m),refX:J,refY:C,overflow:"visible",orient:je,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var d=this.props.model.getArrowStyle();return d.stroke,d.strokeWidth,d.offset,d.verticalLength,Object(Ue.g)("path",null)}},{key:"getEndArrow",value:function(){var d=this.props.model.getArrowStyle(),m=d.stroke,w=d.strokeWidth,T=d.offset,C=d.verticalLength;return Object(Ue.g)("path",{stroke:m,fill:m,strokeWidth:w,transform:"rotate(180)",d:"M 0 0 L ".concat(T," -").concat(C," L ").concat(T," ").concat(C," Z")})}},{key:"getAdjustPointShape",value:function(d,m,w){var T=w.getAdjustPointStyle();return Object(Ue.g)(Hh,ym({className:"lf-edge-adjust-point"},T,{x:d,y:m}))}},{key:"getAdjustPoints",value:function(){var d=this.props,m=d.model,w=d.graphModel,T=m.getAdjustStart(),C=m.getAdjustEnd();return Object(Ue.g)("g",null,Object(Ue.g)(uS,ym({type:"SOURCE"},T,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})),Object(Ue.g)(uS,ym({type:"TARGET"},C,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Ue.g)("g",null)}},{key:"getAppend",value:function(){return Object(Ue.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var d=this.props,m=d.graphModel,w=d.model;m.toFront(w.id)}},{key:"render",value:function(){var d=this.props,m=d.model,w=m.isSelected,T=m.isHitable,C=m.isShowAdjustPoint;return d.graphModel.animation,Object(Ue.g)("g",null,Object(Ue.g)("g",{className:["lf-edge",!T&&"pointer-none",w&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),C&&w?this.getAdjustPoints():"")}}])&&Q3(o.prototype,l),h}(Ue.a);function H0(i){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},H0(i)}function nD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return fS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return fS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var bm=function(i){var o={d:""};return Object.entries(i).forEach(function(l){var u=nD(l,2),h=u[0],d=u[1],m=H0(d);h!=="style"&&m==="object"||(o[h]=d)}),Object(Ue.g)("path",o)};function X0(i){return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X0(i)}function q0(){return q0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},q0.apply(this,arguments)}function rD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function oD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Y0(i,o){return Y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y0(i,o)}function iD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Yy(i);if(o){var h=Yy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return aD(this,l)}}function aD(i,o){if(o&&(X0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}var K0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Y0(d,m)})(h,i);var o,l,u=iD(h);function h(){return rD(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=d.isAnimation,C=d.arrowConfig,$=d.getEdgeStyle(),J=d.getEdgeAnimationStyle(),te=J.strokeDasharray,ge=J.stroke,Pe=J.strokeDashoffset,je=J.animationName,st=J.animationDuration,at=J.animationIterationCount,bt=J.animationTimingFunction,Bt=J.animationDirection;return Object(Ue.g)(Gh,q0({},$,{x1:m.x,y1:m.y,x2:w.x,y2:w.y},C,T?{strokeDasharray:te,stroke:ge,style:{strokeDashoffset:Pe,animationName:je,animationDuration:st,animationIterationCount:at,animationTimingFunction:bt,animationDirection:Bt}}:{}))}},{key:"getAppendWidth",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=di({start:m,end:w}),C=T.d,$=T.strokeWidth,J=T.fill,te=T.strokeDasharray,ge=T.stroke;return Object(Ue.g)(bm,{d:C,fill:J,strokeWidth:$,stroke:ge,strokeDasharray:te})}}])&&oD(o.prototype,l),h}(gm);function Z0(i){return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Z0(i)}function lD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return dS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}var sD=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(l){var u=lD(l,2),h=u[0],d=u[1];(h==="style"||Z0(d)!=="object")&&(o[h]=d)}),Object(Ue.g)("polyline",o)};function J0(i){return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},J0(i)}function pS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Ky(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pS(Object(l),!0).forEach(function(u){xf(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function Q0(){return Q0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},Q0.apply(this,arguments)}function uD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return hS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return hS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function cD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function e1(i,o){return e1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},e1(i,o)}function fD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zy(i);if(o){var h=Zy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return dD(this,l)}}function dD(i,o){if(o&&(J0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sf(i)}function Sf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zy(i){return Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Zy(i)}function xf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var t1=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&e1(d,m)})(h,i);var o,l,u=fD(h);function h(){var d;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),xf(Sf(d=u.call(this)),"drag",void 0),xf(Sf(d),"isDragging",void 0),xf(Sf(d),"isShowAdjustPointTemp",void 0),xf(Sf(d),"appendInfo",void 0),xf(Sf(d),"onDragStart",function(){var m=d.props.model;m.dragAppendStart(),d.isShowAdjustPointTemp=m.isShowAdjustPoint,m.isShowAdjustPoint=!1}),xf(Sf(d),"onDragging",function(m){var w=m.deltaX,T=m.deltaY,C=d.props,$=C.model,J=C.graphModel;d.isDragging=!0;var te=J.transformModel,ge=J.editConfigModel,Pe=uD(te.fixDeltaXY(w,T),2),je=Pe[0],st=Pe[1],at=$,bt=ge.adjustEdgeMiddle;d.appendInfo=bt?at.dragAppendSimple(d.appendInfo,{x:je,y:st}):at.dragAppend(d.appendInfo,{x:je,y:st})}),xf(Sf(d),"onDragEnd",function(){var m=d.props,w=m.model,T=m.graphModel.eventCenter,C=w;C.dragAppendEnd(),d.isDragging=!1,C.isShowAdjustPoint=d.isShowAdjustPointTemp,d.appendInfo=void 0,T.emit(Cn.EDGE_ADJUST,{data:C.getData()})}),xf(Sf(d),"beforeDragStart",function(m,w){w.dragAble&&d.drag.handleMouseDown(m),d.appendInfo=w}),d.drag=new ye({onDragStart:d.onDragStart,onDragging:d.onDragging,onDragEnd:d.onDragEnd,isStopPropagation:!1}),d}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.points,w=d.isAnimation,T=d.arrowConfig,C=d.getEdgeStyle(),$=d.getEdgeAnimationStyle(),J=$.strokeDasharray,te=$.stroke,ge=$.strokeDashoffset,Pe=$.animationName,je=$.animationDuration,st=$.animationIterationCount,at=$.animationTimingFunction,bt=$.animationDirection;return Object(Ue.g)(sD,Q0({points:m},C,T,w?{strokeDasharray:J,stroke:te,style:{strokeDashoffset:ge,animationName:Pe,animationDuration:je,animationIterationCount:st,animationTimingFunction:at,animationDirection:bt}}:{}))}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=d.points,w=d.isSelected,T={start:null,end:null,hover:this.state.hover,isSelected:w},C=or(m);return C.length>=2&&(T.start=C[C.length-2],T.end=C[C.length-1]),T}},{key:"getLastTwoPoints",value:function(){var d=this.props.model.points,m=or(d);return m.length>=2?[m[m.length-2],m[m.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(d){var m,w=d.start,T=d.end;if(w.x===T.x&&w.y===T.y)m="";else{var C={start:w,end:T,offset:10,verticalLength:5},$=du(Ky(Ky({},C),{},{type:"start"})),J=du(Ky(Ky({},C),{},{type:"end"}));m="M".concat($.leftX," ").concat($.leftY,` 
      L`).concat($.rightX," ").concat($.rightY,` 
      L`).concat(J.rightX," ").concat(J.rightY,`
      L`).concat(J.leftX," ").concat(J.leftY," z")}return{d:m,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(d){var m=this.getAppendAttributes(d),w=m.d,T=m.strokeWidth,C=m.fill,$=m.strokeDasharray,J=m.stroke;return Object(Ue.g)(bm,{d:w,fill:C,strokeWidth:T,stroke:J,strokeDasharray:$})}},{key:"getAppendWidth",value:function(){for(var d=this,m=this.props,w=m.model,T=m.graphModel,C=w.pointsList,$=w.draggable,J=[],te=C.length,ge=function(je){var st="lf-polyline-append",at={start:{x:C[je].x,y:C[je].y},end:{x:C[je+1].x,y:C[je+1].y},startIndex:je,endIndex:je+1,direction:"",dragAble:!0},bt=Object(Ue.g)("g",{className:st},d.getAppendShape(at)),Bt=T.editConfigModel,gn=Bt.adjustEdge,yn=Bt.adjustEdgeMiddle;if(gn&&$){var zn=at.startIndex,hn=at.endIndex,In=yn&&(zn===0||hn===te-1);at.dragAble=!In,at.start.x===at.end.x?(at.dragAble&&(st+="-ew-resize"),at.direction=po.VERTICAL):at.start.y===at.end.y&&(at.dragAble&&(st+="-ns-resize"),at.direction=po.HORIZONTAL),bt=Object(Ue.g)("g",{className:d.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Sn){return d.beforeDragStart(Sn,at)}},Object(Ue.g)("g",{className:st},d.getAppendShape(at)))}J.push(bt)},Pe=0;Pe<te-1;Pe++)ge(Pe);return Object(Ue.g)("g",null,J)}}])&&cD(o.prototype,l),h}(gm);function n1(i){return n1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n1(i)}function pD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return vS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return vS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function r1(){return r1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])}return i},r1.apply(this,arguments)}function hD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function vD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function o1(i,o){return o1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},o1(i,o)}function mD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jy(i);if(o){var h=Jy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return yD(this,l)}}function yD(i,o){if(o&&(n1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Jy(i){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jy(i)}var i1=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&o1(d,m)})(h,i);var o,l,u=mD(h);function h(){return hD(this,h),u.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.getEdgeStyle(),w=d.path,T=d.isAnimation,C=d.arrowConfig,$=d.getEdgeAnimationStyle(),J=$.strokeDasharray,te=$.stroke,ge=$.strokeDashoffset,Pe=$.animationName,je=$.animationDuration,st=$.animationIterationCount,at=$.animationTimingFunction,bt=$.animationDirection;return Object(Ue.g)(bm,r1({d:w},m,C,T?{strokeDasharray:J,stroke:te,style:{strokeDashoffset:ge,animationName:Pe,animationDuration:je,animationIterationCount:st,animationTimingFunction:at,animationDirection:bt}}:{}))}},{key:"getAppendWidth",value:function(){var d=this.props.model.path;return Object(Ue.g)(bm,{d,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=this.state.hover,w=d.isSelected,T=d.getArrowStyle().offset,C=d.pointsList.map(function(J){return{x:J.x,y:J.y}}),$=pD(pi(C,T),2);return{start:$[0],end:$[1],hover:m,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var d=this.props.model,m=d.getArrowStyle().offset,w=d.pointsList.map(function(T){return{x:T.x,y:T.y}});return pi(w,m)}}])&&vD(o.prototype,l),h}(gm);function a1(i){return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a1(i)}function mS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function gD(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function bD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _D(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function l1(i,o){return l1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},l1(i,o)}function wD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Qy(i);if(o){var h=Qy(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return ED(this,l)}}function ED(i,o){if(o&&(a1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Qy(i){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qy(i)}var OD=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&l1(d,m)})(h,i);var o,l,u=wD(h);function h(){return bD(this,h),u.apply(this,arguments)}return o=h,l=[{key:"getArrowAttributes",value:function(){var d=this.props,m=d.arrowInfo,w=d.style,T=m.start,C=m.end,$={start:T,end:C,offset:w.offset,verticalLength:w.verticalLength,type:"end"},J=du($),te=J.leftX,ge=J.leftY,Pe=J.rightX,je=J.rightY;return function(st){for(var at=1;at<arguments.length;at++){var bt=arguments[at]!=null?arguments[at]:{};at%2?mS(Object(bt),!0).forEach(function(Bt){gD(st,Bt,bt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(st,Object.getOwnPropertyDescriptors(bt)):mS(Object(bt)).forEach(function(Bt){Object.defineProperty(st,Bt,Object.getOwnPropertyDescriptor(bt,Bt))})}return st}({d:"M".concat(te," ").concat(ge," L").concat(C.x," ").concat(C.y," L").concat(Pe," ").concat(je," z")},w)}},{key:"getShape",value:function(){var d=this.getArrowAttributes(),m=d.d,w=d.strokeWidth,T=d.stroke,C=d.fill;return Object(Ue.g)(bm,{d:m,fill:C,strokeWidth:w,stroke:T})}},{key:"render",value:function(){return Object(Ue.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&_D(o.prototype,l),h}(Ue.a),yS=function(i,o){return gt(i,o)},SD=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},s1=function(){return Nn.a.Date.now()},xD=Math.max,AD=Math.min,TD=function(i,o,l){var u,h,d,m,w,T,C=0,$=!1,J=!1,te=!0;if(typeof i!="function")throw new TypeError("Expected a function");function ge(Bt){var gn=u,yn=h;return u=h=void 0,C=Bt,m=i.apply(yn,gn)}function Pe(Bt){return C=Bt,w=setTimeout(st,o),$?ge(Bt):m}function je(Bt){var gn=Bt-T;return T===void 0||gn>=o||gn<0||J&&Bt-C>=d}function st(){var Bt=s1();if(je(Bt))return at(Bt);w=setTimeout(st,function(gn){var yn=o-(gn-T);return J?AD(yn,d-(gn-C)):yn}(Bt))}function at(Bt){return w=void 0,te&&u?ge(Bt):(u=h=void 0,m)}function bt(){var Bt=s1(),gn=je(Bt);if(u=arguments,h=this,T=Bt,gn){if(w===void 0)return Pe(T);if(J)return clearTimeout(w),w=setTimeout(st,o),ge(T)}return w===void 0&&(w=setTimeout(st,o)),m}return o=Zu(o)||0,jr(l)&&($=!!l.leading,d=(J="maxWait"in l)?xD(Zu(l.maxWait)||0,o):d,te="trailing"in l?!!l.trailing:te),bt.cancel=function(){w!==void 0&&clearTimeout(w),C=0,u=T=h=w=void 0},bt.flush=function(){return w===void 0?m:at(s1())},bt},MD=r(172);function kD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function Ld(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gS,bS,_S,PD=function(){function i(u){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),Ld(this,"undos",[]),Ld(this,"redos",[]),Ld(this,"callbacks",[]),Ld(this,"stopWatch",null),Ld(this,"curData",null),Ld(this,"maxSize",50),Ld(this,"waitTime",100),Ld(this,"eventCenter",void 0),this.eventCenter=u}var o,l;return o=i,(l=[{key:"add",value:function(u){yS(SD(this.undos),u)||(this.undos.push(u),yS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Cn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var h=this.undos.pop();return this.curData=no(h),h}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=no(u),u}}},{key:"watch",value:function(u){var h=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(MD.a)(u,TD(function(){var d=u.modelToHistoryData();d&&h.add(d)},this.waitTime))}}])&&kD(o.prototype,l),i}();function u1(i){return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u1(i)}function RD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,u){if(l){if(typeof l=="string")return wS(l,u);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return wS(l,u)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function ES(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function Bp(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ES(Object(l),!0).forEach(function(u){Wp(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ES(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function OS(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function c1(i,o){return c1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},c1(i,o)}function ND(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=eg(i);if(o){var h=eg(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return CD(this,l)}}function CD(i,o){if(o&&(u1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rv(i)}function rv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function eg(i){return eg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},eg(i)}function Wp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var SS,xS,AS,f1=bu((_S=bS=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&c1(m,w)})(d,i);var o,l,u,h=ND(d);function d(){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,d),Wp(rv(m=h.call(this)),"ref",Object(Ue.f)()),Wp(rv(m),"__prevText",{type:"",text:"",id:""}),Wp(rv(m),"keyupHandler",function(w){var T=m.props.graphModel.textEditElement;w.key==="Enter"&&w.altKey&&T.setElementState(0)}),Wp(rv(m),"inputHandler",function(w){var T=w.target.innerText,C=m.props.graphModel.textEditElement;m.__prevText={type:C.type,text:T.replace(/(\r\n)+$|(\n)+$/,""),id:C.id}}),Wp(rv(m),"keydownHandler",function(w){w.stopPropagation()}),m.state={style:{left:0,top:0}},m}return o=d,u=[{key:"getDerivedStateFromProps",value:function(m){var w,T=m.graphModel,C=T.transformModel,$=T.theme,J=$.inputText,te=T.textEditElement;if(te){var ge;if((ge=te.text)===null||ge===void 0||!ge.value)if(te.BaseType===fo.EDGE){var Pe=(te=te).text,je=te.textPosition,st=je.x,at=je.y;Pe.x=st,Pe.y=at,te.setText(Pe)}else te=te;var bt={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(te.BaseType===fo.EDGE){var Bt=$.edgeText,gn=Bt.overflowMode,yn=Bt.lineHeight,zn=Bt.wrapPadding,hn=Bt.textWidth;hn&&gn==="autoWrap"&&(w=Bp(Bp({},bt),{},{width:hn,minWidth:hn,lineHeight:yn,padding:zn}))}else if(te.BaseType===fo.NODE){var In=$.nodeText,Sn=In.overflowMode,Ir=In.lineHeight,Vr=In.wrapPadding,pr=In.textWidth,Zr=te,_i=Zr.width,wi=Zr.modelType,Ta=Zr.textWidth||pr||_i;(wi!==Ar.TEXT_NODE&&Sn==="autoWrap"||wi===Ar.TEXT_NODE&&pr)&&(w=Bp(Bp({},bt),{},{width:Ta,minWidth:Ta,lineHeight:Ir,padding:Vr}))}var es=te.text,ts=es.x,uc=es.y,Gp=RD(C.CanvasPointToHtmlPoint([ts,uc]),2);return{style:Bp(Bp({left:Gp[0],top:Gp[1]},w),J)}}}}],(l=[{key:"componentDidUpdate",value:function(){var m=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var w=this.__prevText,T=w.text,C=w.id;m.updateText(C,T),m.eventCenter.emit(Cn.TEXT_UPDATE,Bp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(m){if(window.getSelection!==void 0&&document.createRange!==void 0){var w=document.createRange();w.selectNodeContents(m),w.collapse(!1);var T=window.getSelection();T.removeAllRanges(),T.addRange(w)}}},{key:"render",value:function(){var m,w=this.props.graphModel.textEditElement,T=this.state.style;return w?Object(Ue.g)("div",{contentEditable:!0,className:"lf-text-input",style:T,ref:this.ref,key:w.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(m=w.text)===null||m===void 0?void 0:m.value):null}}])&&OS(o.prototype,l),u&&OS(o,u),d}(Ue.a),Wp(bS,"toolName","textEdit"),gS=_S))||gS,DD=function(i){return i.modelType===Ar.LINE_EDGE?function(o){var l=o.startPoint,u=o.endPoint,h=(l.x+u.x)/2,d=(l.y+u.y)/2,m=Math.abs(l.x-u.x)+10,w=Math.abs(l.y-u.y)+10;return{x:h-m/2,y:d-w/2,x1:h+m/2,y1:d+w/2}}(i):i.modelType===Ar.POLYLINE_EDGE?function(o){var l=o.points,u=or(l),h=ct(u,8),d=h.x,m=h.y,w=h.width,T=h.height;return{x:d-w/2,y:m-T/2,x1:d+w/2,y1:m+T/2}}(i):i.modelType===Ar.BEZIER_EDGE?function(o){var l=o.path,u=mo(l),h=ct(u,8),d=h.x,m=h.y,w=h.width,T=h.height;return{x:d-w/2,y:m-T/2,x1:d+w/2,y1:m+T/2}}(i):void 0};function d1(i){return d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},d1(i)}function TS(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,u){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!u||w.length!==u);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||MS(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jD(i){return function(o){if(Array.isArray(o))return p1(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||MS(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function MS(i,o){if(i){if(typeof i=="string")return p1(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?p1(i,o):void 0}}function p1(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=i[l];return u}function ID(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function h1(i,o){return h1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},h1(i,o)}function LD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=tg(i);if(o){var h=tg(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return $D(this,l)}}function $D(i,o){if(o&&(d1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ov(i)}function ov(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tg(i){return tg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tg(i)}function iv(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var v1=bu((AS=xS=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&h1(d,m)})(h,i);var o,l,u=LD(h);function h(d){var m;(function($,J){if(!($ instanceof J))throw new TypeError("Cannot call a class as a function")})(this,h),iv(ov(m=u.call(this)),"stepDrag",void 0),iv(ov(m),"handleMouseDown",function($){m.stepDrag.handleMouseDown($)}),iv(ov(m),"handleWheelEvent",function($){var J,te;$.preventDefault();var ge=$.deltaX,Pe=$.deltaY,je=$.clientX,st=$.clientY,at=$.ctrlKey,bt=new WheelEvent("wheel",{deltaX:ge,deltaY:Pe,clientX:je,clientY:st,ctrlKey:at});(J=m.props.logicFlow.container)===null||J===void 0||(te=J.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||te===void 0||te.dispatchEvent(bt)}),iv(ov(m),"onDragging",function($){var J=$.deltaX,te=$.deltaY,ge=m.props.graphModel,Pe=ge.getSelectElements(!0);ge.moveNodes(Pe.nodes.map(function(je){return je.id}),J,te)}),iv(ov(m),"handleContextMenu",function($){$.preventDefault();var J=m.props,te=J.graphModel,ge=J.graphModel,Pe=ge.eventCenter,je=ge.selectElements,st=te.getPointByClient({x:$.clientX,y:$.clientY}),at={nodes:[],edges:[]};jD(je.values()).forEach(function(bt){bt.BaseType===fo.NODE&&at.nodes.push(bt.getData()),bt.BaseType===fo.EDGE&&at.edges.push(bt.getData())}),Pe.emit(Cn.SELECTION_CONTEXTMENU,{data:at,e:$,position:st})});var w=d.graphModel,T=w.gridSize,C=w.eventCenter;return m.stepDrag=new ye({onDragging:m.onDragging,step:T,eventType:"SELECTION",eventCenter:C}),m}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel,m=d.selectElements,w=d.transformModel;if(!(m.size<=1)){var T=Number.MAX_SAFE_INTEGER,C=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,J=Number.MIN_SAFE_INTEGER;m.forEach(function(je){var st={x:0,y:0,x1:0,y1:0};je.BaseType===fo.NODE&&(st=function(at){var bt=at.x,Bt=at.y,gn=at.width,yn=at.height;return{x:bt-gn/2,y:Bt-yn/2,x1:bt+gn/2,y1:Bt+yn/2}}(je)),je.BaseType===fo.EDGE&&(st=DD(je)),T=Math.min(T,st.x),C=Math.min(C,st.y),$=Math.max($,st.x1),J=Math.max(J,st.y1)});var te=TS(w.CanvasPointToHtmlPoint([T,C]),2);T=te[0],C=te[1];var ge=TS(w.CanvasPointToHtmlPoint([$,J]),2);$=ge[0],J=ge[1];var Pe={left:"".concat(T-10,"px"),top:"".concat(C-10,"px"),width:"".concat($-T+20,"px"),height:"".concat(J-C+20,"px")};return Object(Ue.g)("div",{className:"lf-multiple-select",style:Pe,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&ID(o.prototype,l),h}(Ue.a),iv(xS,"toolName","multipleSelect"),SS=AS))||SS;function FD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function ng(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var UD=function(){function i(u){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),ng(this,"tools",void 0),ng(this,"components",void 0),ng(this,"toolMap",new Map),ng(this,"instance",void 0),this.instance=u,this.isDisabledTool(f1.toolName)||this.registerTool(f1.toolName,f1),this.isDisabledTool(v1.toolName)||this.registerTool(v1.toolName,v1);var h=u.graphModel;h.eventCenter.on("".concat(Cn.GRAPH_TRANSFORM,",").concat(Cn.NODE_CLICK,",").concat(Cn.BLANK_CLICK," "),function(){var d=h.textEditElement,m=h.editConfigModel,w=m.edgeTextEdit,T=m.nodeTextEdit;(w||T)&&d&&h.textEditElement.setElementState(Kr.DEFAULT)})}var o,l;return o=i,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,h){this.toolMap.set(u,h)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&FD(o.prototype,l),i}(),VD=r(173),BD=r.n(VD);function WD(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function m1(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var kS=function(){function i(u){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),m1(this,"mousetrap",void 0),m1(this,"options",void 0),m1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var h=u.lf;this.target=h.container,this.mousetrap=new BD.a(this.target),u.keyboard.enabled&&!h.options.isSilentMode&&this.enable(!0)}var o,l;return o=i,(l=[{key:"initShortcuts",value:function(){var u=this,h=this.options.keyboard.shortcuts;if(h)if(lo(h))h.forEach(function(T){var C=T.keys,$=T.callback,J=T.action;return u.on(C,$,J)});else{var d=h.keys,m=h.callback,w=h.action;this.on(d,m,w)}}},{key:"on",value:function(u,h,d){this.mousetrap.bind(this.getKeys(u),h,d)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,h){this.mousetrap.unbind(this.getKeys(u),h)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var h=this;return(Array.isArray(u)?u:[u]).map(function(d){return h.formatKey(d)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&WD(o.prototype,l),i}(),GD=kS,Af=null;function PS(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function RS(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(l){l.x+=o,l.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var av=40,y1=40;function g1(i){return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},g1(i)}function NS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);o&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,u)}return l}function _m(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?NS(Object(l),!0).forEach(function(u){hi(i,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):NS(Object(l)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(l,u))})}return i}function CS(i,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}function hi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var b1=Symbol("plugin register by Logicflow.use"),_1=function(){function i(h){var d,m,w=this;(function(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")})(this,i),hi(this,"container",void 0),hi(this,"width",void 0),hi(this,"height",void 0),hi(this,"graphModel",void 0),hi(this,"history",void 0),hi(this,"viewMap",new Map),hi(this,"tool",void 0),hi(this,"keyboard",void 0),hi(this,"dnd",void 0),hi(this,"options",void 0),hi(this,"snaplineModel",void 0),hi(this,"components",[]),hi(this,"plugins",void 0),hi(this,"extension",{}),hi(this,"adapterIn",void 0),hi(this,"adapterOut",void 0),hi(this,"getView",function(T){return w.viewMap.get(T)}),h=k2(h),this.options=h,this.container=this.initContainer(h.container),this.plugins=h.plugins,this.graphModel=new KR(_m({},h)),this.tool=new UD(this),this.history=new PD(this.graphModel.eventCenter),this.dnd=new XN({lf:this}),this.keyboard=new GD({lf:this,keyboard:h.keyboard}),h.snapline!==!1&&(this.snaplineModel=new WO(this.graphModel),d=this.graphModel.eventCenter,m=this.snaplineModel,d.on("node:mousemove",function(T){var C=T.data;m.setNodeSnapLine(C)}),d.on("node:mouseup",function(){m.clearSnapline()})),function(T,C){var $=T.keyboard,J=$.options.keyboard;$.on(["cmd + c","ctrl + c"],function(){if(y1=av,!J.enabled||C.textEditElement)return!0;var te=T.options.guards,ge=C.getSelectElements(!1);return te&&te.beforeClone&&!te.beforeClone(ge)||ge.nodes.length===0&&ge.edges.length===0?(Af=null,!0):((Af=ge).nodes.forEach(function(Pe){return PS(Pe,av)}),Af.edges.forEach(function(Pe){return RS(Pe,av)}),!1)}),$.on(["cmd + v","ctrl + v"],function(){if(!J.enabled||C.textEditElement)return!0;if(Af&&(Af.nodes||Af.edges)){T.clearSelectElements();var te=T.addElements(Af,y1);if(!te)return!0;te.nodes.forEach(function(ge){return T.selectElementById(ge.id,!0)}),te.edges.forEach(function(ge){return T.selectElementById(ge.id,!0)}),Af.nodes.forEach(function(ge){return PS(ge,av)}),Af.edges.forEach(function(ge){return RS(ge,av)}),y1+=av}return!1}),$.on(["cmd + z","ctrl + z"],function(){return!J.enabled||!!C.textEditElement||(T.undo(),!1)}),$.on(["cmd + y","ctrl + y"],function(){return!J.enabled||!!C.textEditElement||(T.redo(),!1)}),$.on(["backspace"],function(){if(!J.enabled||C.textEditElement)return!0;var te=C.getSelectElements(!0);return T.clearSelectElements(),te.edges.forEach(function(ge){return T.deleteEdge(ge.id)}),te.nodes.forEach(function(ge){return T.deleteNode(ge.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(h.disabledPlugins)}var o,l,u;return o=i,l=[{key:"register",value:function(h,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof h=="string"){var w={BaseEdge:gm,BaseEdgeModel:Md,BaseNode:Ef,BaseNodeModel:wf,RectNode:f0,RectNodeModel:B_,CircleNode:v0,CircleNodeModel:O_,PolygonNode:_0,PolygonNodeModel:$_,TextNode:N0,TextNodeModel:H_,LineEdge:K0,LineEdgeModel:tc,DiamondNode:S0,DiamondNodeModel:M_,PolylineEdge:t1,PolylineEdgeModel:Aa,BezierEdge:i1,BezierEdgeModel:y_,EllipseNode:k0,EllipseNodeModel:N_,HtmlNode:I0,HtmlNodeModel:Y_,h:Ue.g,type:h};this.viewMap.forEach(function(te){var ge=te.extendKey;ge&&(w[ge]=te)}),this.graphModel.modelMap.forEach(function(te){var ge=te.extendKey;ge&&(w[ge]=te)});var T=d(w),C=T.view,$=T.model,J=C;m&&!J.isObervered&&(J.isObervered=!0,J=fn(J)),this.setView(h,J),this.graphModel.setModel(h,$)}else this.registerElement(h)}},{key:"registerElement",value:function(h){var d=h.view;h.isObserverView===!1||d.isObervered||(d.isObervered=!0,d=fn(d)),this.setView(h.type,d),this.graphModel.setModel(h.type,h.model)}},{key:"batchRegister",value:function(){var h=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];d.forEach(function(m){h.registerElement(m)})}},{key:"defaultRegister",value:function(){this.registerElement({view:f0,model:B_,type:"rect"}),this.registerElement({type:"circle",view:v0,model:O_}),this.registerElement({type:"polygon",view:_0,model:$_}),this.registerElement({type:"line",view:K0,model:tc}),this.registerElement({type:"polyline",view:t1,model:Aa}),this.registerElement({type:"bezier",view:i1,model:y_}),this.registerElement({type:"text",view:N0,model:H_}),this.registerElement({type:"ellipse",view:k0,model:N_}),this.registerElement({type:"diamond",view:S0,model:M_}),this.registerElement({type:"html",view:I0,model:Y_})}},{key:"selectElementById",value:function(h){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(h,d),!d&&m&&this.graphModel.toFront(h)}},{key:"focusOn",value:function(h){var d=this.graphModel.transformModel,m=h.coordinate,w=h.id;if(!m){var T=this.getNodeModelById(w);T&&(m=T.getData());var C=this.getEdgeModelById(w);C&&(m=C.textPosition)}var $=m,J=$.x,te=$.y;d.focusOn(J,te,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(h){this.graphModel.setTheme(h)}},{key:"resize",value:function(h,d){this.graphModel.resize(h,d),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(h){this.graphModel.setDefaultEdgeType(h)}},{key:"updateText",value:function(h,d){this.graphModel.updateText(h,d)}},{key:"deleteElement",value:function(h){var d,m,w,T=this.getModelById(h);return!!T&&(m=(w=(hi(d={},fo.NODE,this.deleteNode),hi(d,fo.EDGE,this.deleteEdge),d)[T.BaseType])===null||w===void 0?void 0:w.call(this,h))!==null&&m!==void 0&&m}},{key:"getModelById",value:function(h){return this.graphModel.getElement(h)}},{key:"getDataById",value:function(h){var d;return(d=this.graphModel.getElement(h))===null||d===void 0?void 0:d.getData()}},{key:"changeNodeType",value:function(h,d){this.graphModel.changeNodeType(h,d)}},{key:"changeEdgeType",value:function(h,d){this.graphModel.changeEdgeType(h,d)}},{key:"getNodeEdges",value:function(h){return this.graphModel.getNodeEdges(h)}},{key:"addNode",value:function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,m=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(h,d,m)}},{key:"deleteNode",value:function(h){var d=this.graphModel.getNodeModelById(h);if(!d)return!1;var m=d.getData(),w=this.options.guards,T=!w||!w.beforeDelete||w.beforeDelete(m);return T&&this.graphModel.deleteNode(h),T}},{key:"cloneNode",value:function(h){var d=this.graphModel.getNodeModelById(h).getData(),m=this.options.guards;if(!m||!m.beforeClone||m.beforeClone(d))return this.graphModel.cloneNode(h)}},{key:"changeNodeId",value:function(h,d){return this.graphModel.changeNodeId(h,d)}},{key:"getNodeModelById",value:function(h){return this.graphModel.getNodeModelById(h)}},{key:"getNodeDataById",value:function(h){var d;return(d=this.graphModel.getNodeModelById(h))===null||d===void 0?void 0:d.getData()}},{key:"addEdge",value:function(h){return this.graphModel.addEdge(h)}},{key:"deleteEdge",value:function(h){var d=this.options.guards,m=this.graphModel.edgesMap[h];if(!m)return!1;var w=m.model.getData(),T=!d||!d.beforeDelete||d.beforeDelete(w);return T&&this.graphModel.deleteEdgeById(h),T}},{key:"deleteEdgeByNodeId",value:function(h){var d=h.sourceNodeId,m=h.targetNodeId;d&&m?this.graphModel.deleteEdgeBySourceAndTarget(d,m):d?this.graphModel.deleteEdgeBySource(d):m&&this.graphModel.deleteEdgeByTarget(m)}},{key:"changeEdgeId",value:function(h,d){return this.graphModel.changeEdgeId(h,d)}},{key:"getEdgeModelById",value:function(h){var d;return(d=this.graphModel.edgesMap[h])===null||d===void 0?void 0:d.model}},{key:"getEdgeModels",value:function(h){var d=this.graphModel.edges,m=h.sourceNodeId,w=h.targetNodeId;if(m&&w){var T=[];return d.forEach(function(J){J.sourceNodeId===m&&J.targetNodeId===w&&T.push(J)}),T}if(m){var C=[];return d.forEach(function(J){J.sourceNodeId===m&&C.push(J)}),C}if(w){var $=[];return d.forEach(function(J){J.targetNodeId===w&&$.push(J)}),$}return[]}},{key:"getEdgeDataById",value:function(h){var d;return(d=this.getEdgeModelById(h))===null||d===void 0?void 0:d.getData()}},{key:"getNodeIncomingEdge",value:function(h){return this.graphModel.getNodeIncomingEdge(h)}},{key:"getNodeOutgoingEdge",value:function(h){return this.graphModel.getNodeOutgoingEdge(h)}},{key:"getNodeIncomingNode",value:function(h){return this.graphModel.getNodeIncomingNode(h)}},{key:"getNodeOutgoingNode",value:function(h){return this.graphModel.getNodeOutgoingNode(h)}},{key:"editText",value:function(h){this.graphModel.editText(h)}},{key:"setProperties",value:function(h,d){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.setProperties(bi(d))}},{key:"deleteProperty",value:function(h,d){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.deleteProperty(d)}},{key:"getProperties",value:function(h){var d;return(d=this.graphModel.getElement(h))===null||d===void 0?void 0:d.getProperties()}},{key:"toFront",value:function(h){this.graphModel.toFront(h)}},{key:"setElementZIndex",value:function(h,d){return this.graphModel.setElementZIndex(h,d)}},{key:"addElements",value:function(h){for(var d=this,m=h.nodes,w=h.edges,T={},C={nodes:[],edges:[]},$=0;$<m.length;$++){var J=m[$],te=J.id,ge=this.addNode(J);if(!ge)return;te&&(T[te]=ge.id),C.nodes.push(ge)}return w.forEach(function(Pe){var je=Pe.sourceNodeId,st=Pe.targetNodeId;T[je]&&(je=T[je]),T[st]&&(st=T[st]);var at=d.graphModel.addEdge(_m(_m({},Pe),{},{sourceNodeId:je,targetNodeId:st}));C.edges.push(at)}),C}},{key:"getAreaElement",value:function(h,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],T=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(h,d,m,w,T).map(function(C){return C.getData()})}},{key:"getSelectElements",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(h)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var h=this.graphModel.modelToGraphData();if(this.adapterOut){for(var d=arguments.length,m=new Array(d),w=0;w<d;w++)m[w]=arguments[w];return this.adapterOut.apply(this,[h].concat(m))}return h}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(h){var d=this.graphModel,m=d.editConfigModel,w=d.transformModel;m.updateEditConfig(h),(h==null?void 0:h.stopMoveGraph)!==void 0&&w.updateTranslateLimits(h.stopMoveGraph),h!=null&&h.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(h,d){return this.graphModel.getPointByClient({x:h,y:d})}},{key:"undo",value:function(){if(this.history.undoAble()){var h=bi(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"redo",value:function(){if(this.history.redoAble()){var h=bi(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"zoom",value:function(h,d){return this.graphModel.transformModel.zoom(h,d)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(h){this.graphModel.transformModel.setZoomMiniSize(h)}},{key:"setZoomMaxSize",value:function(h){this.graphModel.transformModel.setZoomMaxSize(h)}},{key:"getTransform",value:function(){var h=this.graphModel.transformModel;return{SCALE_X:h.SCALE_X,SCALE_Y:h.SCALE_Y,TRANSLATE_X:h.TRANSLATE_X,TRANSLATE_Y:h.TRANSLATE_Y}}},{key:"translate",value:function(h,d){this.graphModel.transformModel.translate(h,d)}},{key:"resetTranslate",value:function(){var h=this.graphModel.transformModel,d=h.TRANSLATE_X,m=h.TRANSLATE_Y;this.translate(-d,-m)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(h,d){d===void 0&&(d=h),this.graphModel.fitView(h,d)}},{key:"openEdgeAnimation",value:function(h){this.graphModel.openEdgeAnimation(h)}},{key:"closeEdgeAnimation",value:function(h){this.graphModel.closeEdgeAnimation(h)}},{key:"on",value:function(h,d){this.graphModel.eventCenter.on(h,d)}},{key:"off",value:function(h,d){this.graphModel.eventCenter.off(h,d)}},{key:"once",value:function(h,d){this.graphModel.eventCenter.once(h,d)}},{key:"emit",value:function(h,d){this.graphModel.eventCenter.emit(h,d)}},{key:"initContainer",value:function(h){var d=document.createElement("div");return d.style.position="relative",d.style.width="100%",d.style.height="100%",h.innerHTML="",h.appendChild(d),d}},{key:"installPlugins",value:function(){var h,d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=(h=this.plugins)!==null&&h!==void 0?h:i.extensions;w.forEach(function(T){var C=null,$=null;T[b1]?(C=T.extension,$=T.props):C=T;var J=C.pluginName||C.name;m.indexOf(J)===-1&&d.installPlugin(C,$)})}},{key:"installPlugin",value:function(h,d){if(g1(h)==="object"){var m=h.install,w=h.render;return m&&m.call(h,this,i),w&&this.components.push(w.bind(h)),void(this.extension[h.pluginName]=h)}var T=h,C=new T({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:d});C.render&&this.components.push(C.render.bind(C)),this.extension[T.pluginName]=C}},{key:"updateAttributes",value:function(h,d){this.graphModel.updateAttributes(h,d)}},{key:"createFakerNode",value:function(h){var d=this.graphModel.modelMap.get(h.type);if(d){var m=new d(_m(_m({},h),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(m),m}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(h){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(h)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(h,d){this.viewMap.set(h,d)}},{key:"renderRawData",value:function(h){this.graphModel.graphDataToModel(bi(h)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Ue.j)(Object(Ue.g)(zN,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Cn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(h=this.adapterIn(h)),this.renderRawData(h)}}],u=[{key:"use",value:function(h,d){var m,w,T=h.pluginName;T||(T=h.name);var C=(m=this.extensions.get(T))===null||m===void 0?void 0:m.extension;C&&C.destroy&&C.destroy(),this.extensions.set(T,(hi(w={},b1,b1),hi(w,"extension",h),hi(w,"props",d),w))}}],l&&CS(o.prototype,l),u&&CS(o,u),i}();function bu(i){return fn(i)}hi(_1,"extensions",new Map),a.default=_1}])})}(lg,lg.exports)),lg.exports}var vn=lV();const sV=Zj(vn);var uV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),cV=(globalThis==null?void 0:globalThis._ids)||new uV;function Hv(){return cV.next()}var Ck=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Ck(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(vn.CircleNodeModel);(function(e){Ck(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(vn.CircleNode);var Dk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cg=function(){return Cg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cg.apply(this,arguments)};(function(e){Dk(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(vn.CircleNodeModel);(function(e){Dk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return vn.h("g",{},v,vn.h("circle",Cg(Cg({},a),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(vn.CircleNode);var jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rm=function(){return Rm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rm.apply(this,arguments)};(function(e){jk(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+Hv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(vn.PolygonNodeModel);(function(e){jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.points,f=n.getNodeStyle();return vn.h("g",{transform:"matrix(1 0 0 1 "+(a-s/2)+" "+(r-c/2)+")"},vn.h("polygon",Rm(Rm({},f),{x:a,y:r,points:v})),vn.h("path",Rm({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},f)))},t.extendKey="ExclusiveGatewayNode",t})(vn.PolygonNode);var Ik=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dg=function(){return Dg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dg.apply(this,arguments)};(function(e){Ik(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(vn.RectNodeModel);(function(e){Ik(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return vn.h("svg",{x:a-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},vn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,f=n.getNodeStyle();return vn.h("g",{},[vn.h("rect",Dg(Dg({},f),{x:a-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(vn.RectNode);var Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Aw=function(){return Aw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Aw.apply(this,arguments)};(function(e){Lk(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(vn.RectNodeModel);(function(e){Lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return vn.h("svg",{x:a-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},vn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,f=n.getNodeStyle();return vn.h("g",{},[vn.h("rect",Aw({x:a-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},f)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(vn.RectNode);var $k=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){$k(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+Hv()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(vn.PolylineEdgeModel);(function(e){$k(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(vn.PolylineEdge);var gx={width:40,height:40},bx={width:40,height:40},_x={width:40,height:40},wx={width:100,height:80},Ex={width:100,height:80},fV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),dV=(globalThis==null?void 0:globalThis._ids)||new fV;function Ox(){return dV.next()}function Fk(e){return Object.prototype.toString.call(e)}function pV(e){return"  ".repeat(e)}function jg(e){var t=e;return Fk(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=jg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=jg(n)})),t}function hV(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(jg(e)).replace(/"/g,"'")}return t}var lv=`	
`;function gg(e,t,n){var a=pV(n),r="";if(t==="#text")return lv+a+e;if(t==="#cdata-section")return lv+a+"<![CDATA["+e+"]]>";if(t==="#comment")return lv+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+hV(e)+'"';if(Array.isArray(e))e.forEach(function(f){r+=gg(f,t,n+1)});else if(Fk(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":lv+a)+"<"+t,s.forEach(function(f){f.charAt(0)==="-"?c+=gg(e[f],f,n+1):v+=gg(e[f],f,n+1)}),r+=c+(v!==""?">"+v+(lv+a)+"</"+t+">":" />")}else r+=lv+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function vV(e){var t="";for(var n in e)t+=gg(e[n],n,0);return t}var hl=function(){};hl.ObjTree=function(){return this};hl.ObjTree.VERSION="0.23";hl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;hl.ObjTree.prototype.attr_prefix="-";hl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};hl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var s=this,c=n,v=a.onComplete;a.onComplete=function(b){var _;b&&b.responseXML&&b.responseXML.documentElement&&(_=s.parseDOM(b.responseXML.documentElement)),c(_,b),v&&v(b)}}else a.asynchronous=!1;var f;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(f=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(f=g.transport)}if(n)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement)};hl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};hl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var f=e.childNodes[r].nodeType;f==3||f==4||f==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}}else n===null&&(n={});return n}};hl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};hl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};hl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};hl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};hl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};hl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var mV=function(e){return new hl.ObjTree().parseXML(e)},yV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Tw=function(){return Tw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tw.apply(this,arguments)},Sb=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},vc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(vc||(vc={}));var Uk=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Sx=["properties","startPoint","endPoint","pointsList"];function xx(e){var t=e?Sx.concat(e):Sx;return function(n){function a(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var v=Sb(c,2),f=v[0],g=v[1];typeof g!="object"?f.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(f)?s[f]=g:s["-"+f]=g:t.includes(f)?s["-"+f]=a(g):s[f]=a(g)}),s)}return a(n)}}function Ig(e){var t={};return Object.entries(e).forEach(function(n){var a=Sb(n,2),r=a[0],s=a[1];r.indexOf("-")===0?t[r.substring(1)]=jg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Ig(s):Array.isArray(s)?t[r]=s.map(function(c){return Ig(c)}):t[r]=s}),t}function gV(e,t,n){var a=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var f=xx(n)(s.properties);Object.assign(v,f)}a.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,f=a.get(s.targetNodeId);f["bpmn:incoming"]?Array.isArray(f["bpmn:incoming"])?f["bpmn:incoming"].push(s.id):f["bpmn:incoming"]=[f["bpmn:incoming"],s.id]:f["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var b=xx(n)(s.properties);Object.assign(g,b)}return g});t.edges.forEach(function(s){var c=a.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[vc.FLOW]=r}function bV(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,s=n.pointsList.map(function(v){var f=v.x,g=v.y;return{"-x":f,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,s=100,c=80,v=n.x,f=n.y,g=Qd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,f-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":f,"-width":s,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}function _V(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===vc.FLOW){var v=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=EV(c,v)}else{var f=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(wV(c,f,s))}}})}return{nodes:t,edges:n}}function wV(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var f=Ax(v,n,c);a.push(f)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=Ax(r,n,e);a.push(s)}return a}function Ax(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Qd.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(_){var S=Sb(_,2),A=S[0],M=S[1];Uk.indexOf(A)===-1&&(v||(v={}),v[A]=M)}),v&&(v=Ig(v));var f;if(s&&(f={x:a,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];f.x=Number(g["-x"])+Number(g["-width"])/2,f.y=Number(g["-y"])+Number(g["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:a,y:r,properties:v};return f&&(b.text=f),b}function EV(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(Tx(s,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Tx(a,e))}return n}function Tx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(f){s<f.length&&(s=f.length)}),n={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(f){var g=Sb(f,2),b=g[0],_=g[1];Uk.indexOf(b)===-1&&(c||(c={}),c[b]=_)}),c&&(c=Ig(c));var v={id:t["-id"],type:vc.FLOW,pointsList:e["di:waypoint"].map(function(f){return{x:Number(f["-x"]),y:Number(f["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Qd=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,s){var c=Tw({},n.processAttributes);gV(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};bV(v,r);var f=n.definitionAttributes;f["bpmn:process"]=c,f["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":f};return g},this.adapterIn=function(r){if(r)return _V(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Ox()},this.definitionAttributes={"-id":"Definitions_"+Ox(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Qd.shapeConfigMap.set(vc.START,{width:gx.width,height:gx.height});Qd.shapeConfigMap.set(vc.END,{width:bx.width,height:bx.height});Qd.shapeConfigMap.set(vc.GATEWAY,{width:_x.width,height:_x.height});Qd.shapeConfigMap.set(vc.SYSTEM,{width:wx.width,height:wx.height});Qd.shapeConfigMap.set(vc.USER,{width:Ex.width,height:Ex.height});(function(e){yV(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(s){var c=mV(s);return a.adapterIn(c)},a.adapterXmlOut=function(s,c){var v=a.adapterOut(s,c);return vV(v)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(Qd);var OV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),SV=(globalThis==null?void 0:globalThis._ids)||new OV;function xV(){return SV.next()}vn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),vn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),vn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});vn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});vn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var kE,Ci,Vk,Zp,Mx,Bk,Wk,Gk,PE,Mw,kw,Pw={},zk=[],AV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xb=Array.isArray;function Pf(e,t){for(var n in t)e[n]=t[n];return e}function RE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Nm(e,t,n){var a,r,s,c={};for(s in t)s=="key"?a=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?kE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return bg(e,c,a,r,null)}function bg(e,t,n,a,r){var s={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Vk,__i:-1,__u:0};return r==null&&Ci.vnode!=null&&Ci.vnode(s),s}function NE(e){return e.children}function Ev(e,t){this.props=e,this.context=t}function Cv(e,t){if(t==null)return e.__?Cv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Cv(e):null}function Hk(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Hk(e)}}function kx(e){(!e.__d&&(e.__d=!0)&&Zp.push(e)&&!Lg.__r++||Mx!=Ci.debounceRendering)&&((Mx=Ci.debounceRendering)||Bk)(Lg)}function Lg(){for(var e,t,n,a,r,s,c,v=1;Zp.length;)Zp.length>v&&Zp.sort(Wk),e=Zp.shift(),v=Zp.length,e.__d&&(n=void 0,r=(a=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Pf({},a)).__v=a.__v+1,Ci.vnode&&Ci.vnode(n),Yk(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[r]:null,s,r??Cv(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,kV(s,n,c),n.__e!=r&&Hk(n)));Lg.__r=0}function Xk(e,t,n,a,r,s,c,v,f,g,b){var _,S,A,M,x,E,j=a&&a.__k||zk,D=t.length;for(f=TV(n,t,j,f,D),_=0;_<D;_++)(A=n.__k[_])!=null&&(S=A.__i==-1?Pw:j[A.__i]||Pw,A.__i=_,E=Yk(e,A,S,r,s,c,v,f,g,b),M=A.__e,A.ref&&S.ref!=A.ref&&(S.ref&&CE(S.ref,null,A),b.push(A.ref,A.__c||M,A)),x==null&&M!=null&&(x=M),4&A.__u||S.__k===A.__k?f=qk(A,f,e):typeof A.type=="function"&&E!==void 0?f=E:M&&(f=M.nextSibling),A.__u&=-7);return n.__e=x,f}function TV(e,t,n,a,r){var s,c,v,f,g,b=n.length,_=b,S=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=s+S,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?bg(null,c,null,null,null):xb(c)?bg(NE,{children:c},null,null,null):c.constructor==null&&c.__b>0?bg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=MV(c,n,f,_))!=-1&&(_--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>b?S--:r<b&&S++),typeof c.type!="function"&&(c.__u|=4)):g!=f&&(g==f-1?S--:g==f+1?S++:(g>f?S--:S++,c.__u|=4))):e.__k[s]=null;if(_)for(s=0;s<b;s++)(v=n[s])!=null&&(2&v.__u)==0&&(v.__e==a&&(a=Cv(v)),Zk(v,v));return a}function qk(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=qk(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Cv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function MV(e,t,n,a){var r,s,c=e.key,v=e.type,f=t[n];if(f===null&&e.key==null||f&&c==f.key&&v==f.type&&(2&f.__u)==0)return n;if(a>(f!=null&&(2&f.__u)==0?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((f=t[r])&&(2&f.__u)==0&&c==f.key&&v==f.type)return r;r--}if(s<t.length){if((f=t[s])&&(2&f.__u)==0&&c==f.key&&v==f.type)return s;s++}}return-1}function Px(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||AV.test(t)?n:n+"px"}function sg(e,t,n,a,r){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Px(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||Px(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(Gk,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?a?n.u=a.u:(n.u=PE,e.addEventListener(t,s?kw:Mw,s)):e.removeEventListener(t,s?kw:Mw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Rx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=PE++;else if(t.t<n.u)return;return n(Ci.event?Ci.event(t):t)}}}function Yk(e,t,n,a,r,s,c,v,f,g){var b,_,S,A,M,x,E,j,D,V,U,L,F,X,q,H,B,G=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),s=[v=t.__e=n.__e]),(b=Ci.__b)&&b(t);e:if(typeof G=="function")try{if(j=t.props,D="prototype"in G&&G.prototype.render,V=(b=G.contextType)&&a[b.__c],U=b?V?V.props.value:b.__:a,n.__c?E=(_=t.__c=n.__c).__=_.__E:(D?t.__c=_=new G(j,U):(t.__c=_=new Ev(j,U),_.constructor=G,_.render=RV),V&&V.sub(_),_.props=j,_.state||(_.state={}),_.context=U,_.__n=a,S=_.__d=!0,_.__h=[],_._sb=[]),D&&_.__s==null&&(_.__s=_.state),D&&G.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=Pf({},_.__s)),Pf(_.__s,G.getDerivedStateFromProps(j,_.__s))),A=_.props,M=_.state,_.__v=t,S)D&&G.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),D&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(D&&G.getDerivedStateFromProps==null&&j!==A&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(j,U),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(j,_.__s,U)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(_.props=j,_.state=_.__s,_.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),L=0;L<_._sb.length;L++)_.__h.push(_._sb[L]);_._sb=[],_.__h.length&&c.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(j,_.__s,U),D&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(A,M,x)})}if(_.context=U,_.props=j,_.__P=e,_.__e=!1,F=Ci.__r,X=0,D){for(_.state=_.__s,_.__d=!1,F&&F(t),b=_.render(_.props,_.state,_.context),q=0;q<_._sb.length;q++)_.__h.push(_._sb[q]);_._sb=[]}else do _.__d=!1,F&&F(t),b=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++X<25);_.state=_.__s,_.getChildContext!=null&&(a=Pf(Pf({},a),_.getChildContext())),D&&!S&&_.getSnapshotBeforeUpdate!=null&&(x=_.getSnapshotBeforeUpdate(A,M)),H=b,b!=null&&b.type===NE&&b.key==null&&(H=Kk(b.props.children)),v=Xk(e,xb(H)?H:[H],t,n,a,r,s,c,v,f,g),_.base=t.__e,t.__u&=-161,_.__h.length&&c.push(_),E&&(_.__E=_.__=null)}catch(Z){if(t.__v=null,f||s!=null)if(Z.then){for(t.__u|=f?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else for(B=s.length;B--;)RE(s[B]);else t.__e=n.__e,t.__k=n.__k;Ci.__e(Z,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=PV(n.__e,t,n,a,r,s,c,f,g);return(b=Ci.diffed)&&b(t),128&t.__u?void 0:v}function kV(e,t,n){for(var a=0;a<n.length;a++)CE(n[a],n[++a],n[++a]);Ci.__c&&Ci.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Ci.__e(s,r.__v)}})}function Kk(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:xb(e)?e.map(Kk):Pf({},e)}function PV(e,t,n,a,r,s,c,v,f){var g,b,_,S,A,M,x,E=n.props,j=t.props,D=t.type;if(D=="svg"?r="http://www.w3.org/2000/svg":D=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((A=s[g])&&"setAttribute"in A==!!D&&(D?A.localName==D:A.nodeType==3)){e=A,s[g]=null;break}}if(e==null){if(D==null)return document.createTextNode(j);e=document.createElementNS(r,D,j.is&&j),v&&(Ci.__m&&Ci.__m(t,s),v=!1),s=null}if(D==null)E===j||v&&e.data==j||(e.data=j);else{if(s=s&&kE.call(e.childNodes),E=n.props||Pw,!v&&s!=null)for(E={},g=0;g<e.attributes.length;g++)E[(A=e.attributes[g]).name]=A.value;for(g in E)if(A=E[g],g!="children"){if(g=="dangerouslySetInnerHTML")_=A;else if(!(g in j)){if(g=="value"&&"defaultValue"in j||g=="checked"&&"defaultChecked"in j)continue;sg(e,g,null,A,r)}}for(g in j)A=j[g],g=="children"?S=A:g=="dangerouslySetInnerHTML"?b=A:g=="value"?M=A:g=="checked"?x=A:v&&typeof A!="function"||E[g]===A||sg(e,g,A,E[g],r);if(b)v||_&&(b.__html==_.__html||b.__html==e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(_&&(e.innerHTML=""),Xk(t.type=="template"?e.content:e,xb(S)?S:[S],t,n,a,D=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&Cv(n,0),v,f),s!=null)for(g=s.length;g--;)RE(s[g]);v||(g="value",D=="progress"&&M==null?e.removeAttribute("value"):M!=null&&(M!==e[g]||D=="progress"&&!M||D=="option"&&M!=E[g])&&sg(e,g,M,E[g],r),g="checked",x!=null&&x!=e[g]&&sg(e,g,x,E[g],r))}return e}function CE(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ci.__e(r,n)}}function Zk(e,t,n){var a,r;if(Ci.unmount&&Ci.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||CE(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(s){Ci.__e(s,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&Zk(a[r],t,n||typeof e.type!="function");n||RE(e.__e),e.__c=e.__=e.__e=void 0}function RV(e,t,n){return this.constructor(e,n)}kE=zk.slice,Ci={__e:function(e,t,n,a){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},Vk=0,Ev.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pf({},this.state),typeof e=="function"&&(e=e(Pf({},n),this.props)),e&&Pf(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),kx(this))},Ev.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),kx(this))},Ev.prototype.render=NE,Zp=[],Bk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Wk=function(e,t){return e.__v.__b-t.__v.__b},Lg.__r=0,Gk=/(PointerCapture)$|Capture$/i,PE=0,Mw=Rx(!1),kw=Rx(!0);var Cm=function(){return Cm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cm.apply(this,arguments)};function DE(e){var t=e.x,n=e.y,a=e.width,r=e.height,s=e.radius,c=e.className,v=t-a/2,f=n-r/2,g=Cm(Cm({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:f});return vn.h("rect",Cm({},g))}DE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var gv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(gv||(gv={}));var NV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Jp=function(){return Jp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Jp.apply(this,arguments)},CV=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},DV=vn.LogicFlowUtil.StepDrag,jV=function(e){NV(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.x,g=v.y;a.nodeModel.x=f+s/2,a.nodeModel.y=g+c/2,a.nodeModel.moveText(s/2,c/2)},a.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,f=r.width,g=r.height,b=r.PCTResizeInfo,_=r.pct,S=_===void 0?1:_,A=r.freezeWidth,M=A===void 0?!1:A,x=r.freezeHeight,E=x===void 0?!1:x,j={width:f,height:g,deltaX:c,deltaY:v};if(b){var D=4,V=0,U=0;switch(s){case 0:U=(c*-1-v)/D;break;case 1:U=(c-v)/D;break;case 2:U=(c+v)/D;break;case 3:U=(c*-1+v)/D;break}U!==0&&(V=Math.round(U/b.ResizeBasis.basisHeight*1e5)/1e3),b.ResizePCT.widthPCT=Math.max(Math.min(b.ResizePCT.widthPCT+V,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit),b.ResizePCT.hightPCT=Math.max(Math.min(b.ResizePCT.hightPCT+V,b.ScaleLimit.maxScaleLimit),b.ScaleLimit.minScaleLimit);var L=Math.round(b.ResizePCT.widthPCT*b.ResizeBasis.basisWidth/100),F=Math.round(b.ResizePCT.hightPCT*b.ResizeBasis.basisHeight/100);switch(s){case 0:c=f-L,v=g-F;break;case 1:c=L-f,v=g-F;break;case 2:c=L-f,v=F-g;break;case 3:c=f-L,v=F-g;break}return j.width=L,j.height=F,j.deltaX=c/S,j.deltaY=v/S,j}switch(s){case 0:j.width=M?f:f-c*S,j.height=E?g:g-v*S;break;case 1:j.width=M?f:f+c*S,j.height=E?g:g-v*S;break;case 2:j.width=M?f:f+c*S,j.height=E?g:g+v*S;break;case 3:j.width=M?f:f-c*S,j.height=E?g:g+v*S;break}return j},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,s=r.id,c=r.anchors,v=a.getNodeEdges(s);v.sourceEdges.forEach(function(f){var g=c.find(function(b){return b.id===f.sourceAnchorId});f.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(f){var g=c.find(function(b){return b.id===f.targetAnchorId});f.updateEndPoint({x:g.x,y:g.y})})},a.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.id,g=v.x,b=v.y,_=v.width,S=v.height,A=v.radius,M=v.PCTResizeInfo,x=a.nodeModel,E=x.minWidth,j=x.minHeight,D=x.maxWidth,V=x.maxHeight,U=a.index,L=E===D,F=j===V,X=a.getResize({index:U,deltaX:s,deltaY:c,width:_,height:S,PCTResizeInfo:M,pct:1,freezeWidth:L,freezeHeight:F});if(X.width<E||X.width>D||X.height<j||X.height>V){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:L?0:X.deltaX,deltaY:F?0:X.deltaY}),a.nodeModel.width=X.width,a.nodeModel.height=X.height,a.nodeModel.setProperties({nodeSize:{width:X.width,height:X.height}}),a.getNodeEdges(f);var q={x:g,y:b,width:_,height:S,radius:A},H={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:A};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:q,afterNode:H})},a.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.id,g=v.rx,b=v.ry,_=v.x,S=v.y,A=v.PCTResizeInfo,M=a.index,x=a.nodeModel,E=x.minWidth,j=x.minHeight,D=x.maxWidth,V=x.maxHeight,U=E===D,L=j===V,F=g,X=b,q=a.getResize({index:M,deltaX:s,deltaY:c,width:F,height:X,PCTResizeInfo:A,pct:1/2,freezeWidth:U,freezeHeight:L});if(q.width<E/2||q.width>D/2||q.height<j/2||q.height>V/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:U?0:q.deltaX,deltaY:L?0:q.deltaY}),a.nodeModel.rx=q.width,a.nodeModel.ry=q.height,a.nodeModel.setProperties({nodeSize:{rx:q.width,ry:q.height}}),a.getNodeEdges(f);var H={x:_,y:S},B={rx:q.width,ry:q.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Jp(Jp({},H),{rx:g,ry:b}),afterNode:B})},a.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=a.nodeModel;v.id;var f=v.rx,g=v.ry,b=v.x,_=v.y,S=v.PCTResizeInfo,A=a.index,M=a.nodeModel,x=M.minWidth,E=M.minHeight,j=M.maxWidth,D=M.maxHeight,V=x===j,U=E===D,L=f,F=g,X=a.getResize({index:A,deltaX:s,deltaY:c,width:L,height:F,PCTResizeInfo:S,pct:1/2,freezeWidth:V,freezeHeight:U});if(X.width<x/2||X.width>j/2||X.height<E/2||X.height>D/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:V?0:X.deltaX,deltaY:U?0:X.deltaY}),a.nodeModel.rx=X.width,a.nodeModel.ry=X.height,a.nodeModel.setProperties({nodeSize:{rx:X.width,ry:X.height}});var q={x:b,y:_,rx:f,ry:g},H={rx:X.width,ry:X.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:q,afterNode:H})},a.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=a.nodeModel,f=v.id,g=v.modelType,b=v.type,_=Jp({id:f,modelType:g,type:b},s),S=Jp({id:f,modelType:g,type:b},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:_,newNodeSize:S})},a.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,f=a.graphModel.transformModel,g=a.nodeModel.modelType;s=CV(f.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===gv.RECT_NODE||g===gv.HTML_NODE?a.updateRect({deltaX:c,deltaY:v}):g===gv.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:v}):g===gv.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:v})},a.onDragEnd=function(){var r=a.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(a.nodeModel.x/s),v=s*Math.round(a.nodeModel.y/s);a.nodeModel.moveTo(c,v),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new DV({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,s=[],c=[],v=0;v<r.length;v++){var f=r[v];f.sourceNodeId===n?s.push(f):r[v].targetNodeId===n&&c.push(f)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Nm("g",{className:"lf-resize-control-"+s},Nm(DE,Jp({className:"lf-node-control"},{x:a,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(Ev),IV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),$g=function(){return $g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$g.apply(this,arguments)},Ab=function(e){IV(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,s=a.x,c=a.y,v=a.width,f=a.height,g={minX:s-v/2,minY:c-f/2,maxX:s+v/2,maxY:c+f/2},b=g.minX,_=g.minY,S=g.maxX,A=g.maxY,M=[{x:b,y:_},{x:S,y:_},{x:S,y:A},{x:b,y:A}];return M.map(function(x,E){return Nm(jV,$g({index:E},x,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Nm(DE,$g({fill:"none"},v,{x:a,y:r,width:s,height:c}))},t.prototype.render=function(){return Nm("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(Ev),Jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),LV=function(e){Jk(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(vn.RectNodeModel),$V=function(e){Jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Ab,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(vn.RectNode),Qk={view:$V,model:LV},eP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){eP(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(vn.EllipseNodeModel);(function(e){eP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Ab,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(vn.EllipseNode);var Rw=function(){return Rw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rw.apply(this,arguments)};function FV(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,f=v===void 0?"transparent":v,g=e.stroke,b=g===void 0?"#000":g,_=e.points,S=e.className,A=S===void 0?"lf-basic-shape":S,M={fill:f,fillOpacity:n,strokeWidth:r,stroke:b,strokeOpacity:c,points:"",className:A};return M.points=_.map(function(x){return x.join(",")}).join(" "),vn.h("polygon",Rw({},M))}var tP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Nw=function(){return Nw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nw.apply(this,arguments)};(function(e){tP(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(vn.DiamondNodeModel);(function(e){tP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Ab,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return vn.h("g",null,vn.h(FV,Nw({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(vn.DiamondNode);var nP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),UV=function(e){nP(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(vn.HtmlNodeModel),VV=function(e){nP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return vn.h(Ab,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return vn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(vn.HtmlNode),rP={view:VV,model:UV},oP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Fg=function(){return Fg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fg.apply(this,arguments)},BV=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},WV=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(BV(arguments[t]));return e},Nx=500,Cx=300,GV=-1e4;(function(e){oP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Nx,n.unfoldedHight=Cx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Nx,this.height=Cx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=GV,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=a.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var f=a.childrenLastFoldStatus[s];f!==void 0&&f!==c.isFolded&&c.foldGroup(f)}a.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(s,c){var v=s.id,f=s.sourceNodeId,g=s.targetNodeId,b=s.startPoint,_=s.endPoint,S=s.type,A=s.text,M=s.getProperties(),x={id:v+"__"+c,sourceNodeId:f,targetNodeId:g,startPoint:b,endPoint:_,type:S,properties:M,text:A==null?void 0:A.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var E=r.graphModel.group.getNodeGroup(g);E||(E=r.graphModel.getNodeModelById(g));var j=r.graphModel.group.getNodeGroup(f);j||(j=r.graphModel.getNodeModelById(f)),n&&s.visible!==!1&&(r.children.has(f)||r.id===f?(x.startPoint=void 0,x.sourceNodeId=r.id):(x.endPoint=void 0,x.targetNodeId=r.id),(E.id!==r.id||j.id!==r.id)&&r.createVirtualEdge(x),s.visible=!1),!n&&s.visible===!1&&(E&&E.isGroup&&E.isFolded?(x.targetNodeId=E.id,x.endPoint=void 0,r.createVirtualEdge(x)):j&&j.isGroup&&j.isFolded?(x.sourceNodeId=j.id,x.startPoint=void 0,r.createVirtualEdge(x)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,s=n.x2,c=n.y2;return a>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&a.children.push(s)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=WV(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(Qk.model);(function(e){oP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,f=n.properties;if(!f.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,b=this.props.model.getAddableOutlineStyle(),_=a+g+8,S=r+g+8;return vn.h("rect",Fg(Fg({},b),{width:_,height:S,x:s-_/2,y:c-S/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=vn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return vn.h("g",{},[vn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return vn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(Qk.view);var Dx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dm=function(){return Dm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dm.apply(this,arguments)};function zV(e){var t=function(a){Dx(r,a);function r(s,c){var v=this;s.id||(s.id="Flow_"+xV());var f=Dm(Dm(Dm({},{}),s.properties),{isDefaultFlow:!1});return s.properties=f,v=a.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(vn.PolylineEdgeModel),n=function(a){Dx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?vn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):vn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(vn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}zV();var jx={width:40,height:40},Ix={width:40,height:40},Lx={width:100,height:80},Ug={width:100,height:80},$x={width:100,height:80},Fx={width:100,height:80},Ux={width:100,height:80},Vx={width:100,height:80},Bx={width:100,height:80},Wx={width:100,height:80},vl=function(){};vl.ObjTree=function(){return this};vl.ObjTree.VERSION="0.23";vl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;vl.ObjTree.prototype.attr_prefix="-";vl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};vl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var s=this,c=n,v=a.onComplete;a.onComplete=function(b){var _;b&&b.responseXML&&b.responseXML.documentElement&&(_=s.parseDOM(b.responseXML.documentElement)),c(_,b),v&&v(b)}}else a.asynchronous=!1;var f;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(f=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(f=g.transport)}if(n)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement)};vl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};vl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var f=e.childNodes[r].nodeType;f===3||f===4||f===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[s]>"u"&&(a[s]=0),a[s]++,this.addNode(n,s,a[s],c))}}}}else n===null&&(n={});return n}};vl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};vl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};vl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};vl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};vl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};vl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var HV=function(e){return new vl.ObjTree().parseXML(e)};function iP(e){return Object.prototype.toString.call(e)}function Gx(e){return"  ".repeat(e)}function Vg(e){return iP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Vg(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Vg(t)}):e}function XV(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Vg(e)).replace(/"/g,"'")}return t}var zx=`	
`;function _g(e,t,n){var a=Gx(n),r="",s=zx+a;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+XV(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return _g(g,t,n+1)}).join("");else if(iP(e)==="[object Object]"){var c=Object.keys(e),v="",f=e["-json"]?zx+Gx(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=_g(e[g],g,n+1):f+=_g(e[g],g,n+1)}),r+=v+(f!==""?">"+f+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function qV(e){var t="";for(var n in e)t+=_g(e[n],n,0);return t}var YV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cw=function(){return Cw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cw.apply(this,arguments)},Hx=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},jE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xv=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},Ov=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Xv(arguments[t]));return e},dl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(dl||(dl={}));var aP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],KV=["properties","startPoint","endPoint","pointsList"],Bg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},lP=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],s=r.in,c=r.out;s&&(e[a].in=s),c&&(e[a].out=c)}else e[a]=t[a]}),e},Cs={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cs[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cs[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cs[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Cs[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,s,c=e,v=t["-id"],f="",g="";try{for(var b=jE(Object.keys(t)),_=b.next();!_.done;_=b.next()){var S=_.value;S.includes("bpmn:")&&(r=Xv(S.split(":"),2),f=r[1],g=(s=t[S])===null||s===void 0?void 0:s["#text"])}}catch(A){n={error:A}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":f,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function ZV(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,s=new Set(Ov(KV,n||[])),c={in:new Set(Ov(Bg.in,(a==null?void 0:a.in)||[])),out:new Set(Ov(Bg.out,(a==null?void 0:a.out)||[]))};return Cs=lP(Cs,r),function(v){var f=v.nodes,g=v.edges;function b(_,S){var A,M,x;if((_==null?void 0:_.flag)!==1){var E;if((E=Cs[_.type])&&E.out){var j=E.out(_),D=Object.keys(j);D.length>0&&D.forEach(function(B){_[B]=j[B]})}_!=null&&_.children&&(_.children=_.children.map(function(B){var G=f.find(function(Z){return Z.id===B})||g.find(function(Z){return Z.id===B});return G||{}}));var V={};if(typeof _=="string")return _;if(Array.isArray(_))return _.map(function(B){return b(B,"")}).filter(function(B){return B!=null});try{for(var U=jE(Object.entries(_)),L=U.next();!L.done;L=U.next()){var F=Xv(L.value,2),X=F[0],q=F[1];if(((x=q)===null||x===void 0?void 0:x.flag)===1)return;var H=[S,X].filter(function(B){return B}).join(".");c.out.has(H)||(typeof q!="object"?X.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(X)?V[X]=q:V["-"+X]=q:s.has(H)?V["-"+X]=b(q,H):V[X]=b(q,H))}}catch(B){A={error:B}}finally{try{L&&!L.done&&(M=U.return)&&M.call(U)}finally{if(A)throw A.error}}return V}}return b(v,"")}}function Wg(e){var t,n,a={};try{for(var r=jE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=Xv(s.value,2),v=c[0],f=c[1];v.indexOf("-")===0?a[v.substring(1)]=Vg(f):typeof f=="string"?a[v]=f:Object.prototype.toString.call(f)==="[object Object]"?a[v]=Wg(f):Array.isArray(f)?a[v]=f.map(function(g){return Wg(g)}):a[v]=f}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function JV(e,t,n){var a,r=new Map,s=ZV(n)(t);s.nodes.forEach(function(v){var f=v["-id"],g=v["-type"],b=v.text,_=v.children,S=Hx(v,["-id","-type","text","children"]),A={"-id":f};b!=null&&b["-value"]&&(A["-name"]=b["-value"]),S["-json"]&&(A["-json"]=S["-json"]),S["-properties"]&&Object.assign(A,S["-properties"]),_&&(A.children=_),e[g]||(e[g]=[]),e[g].push(A),r.set(f,A)});var c=s.edges.map(function(v){var f=v["-id"];v["-type"];var g=v["-sourceNodeId"],b=v["-targetNodeId"],_=v.text,S=Hx(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),A=r.get(b);A["bpmn:incoming"]||(A["bpmn:incoming"]=[]),A["bpmn:incoming"].push(f);var M={"-id":f,"-sourceRef":g,"-targetRef":b};return _!=null&&_["-value"]&&(M["-name"]=_["-value"]),S["-json"]&&(M["-json"]=S["-json"]),S["-properties"]&&Object.assign(M,S["-properties"]),M});return t.edges.forEach(function(v){var f=v.sourceNodeId,g=v.id,b=r.get(f);b["bpmn:outgoing"]||(b["bpmn:outgoing"]=[]),b["bpmn:outgoing"].push(g)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(v){var f={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(x){var E,j=r.get(x["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(V){j[V]&&j[V].forEach(function(U){f[V].add(U)})});var D=(E=e[x["-type"]])===null||E===void 0?void 0:E.findIndex(function(V){return V["-id"]===x["-id"]});D>=0&&e[x["-type"]].splice(D,1),r.delete(x["-id"]),v[x["-type"]]||(v[x["-type"]]=[]),v[x["-type"]].push(j)});var b=f["bpmn:incoming"],_=f["bpmn:outgoing"];_.forEach(function(x){b.has(x)&&g.push(x)});for(var S=function(x){var E=c.findIndex(function(j){return j["-id"]===g[x]});E>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[E]),c.splice(E,1)):x++,A=x},A,M=0;M<g.length;)S(M),M=A;delete v.children}),e[dl.FLOW]=c,e}function QV(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,s=n.pointsList.map(function(v){var f=v.x,g=v.y;return{"-x":f,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,s=100,c=80,v=n.x,f=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,f-=c/2;var b={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":f,"-width":s,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(b["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),b})}var eB=["bpmn:incoming","bpmn:outgoing"];function tB(e,t){var n=[],a=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,f={in:new Set(Ov(Bg.in,(v==null?void 0:v.in)||[])),out:new Set(Ov(Bg.out,(v==null?void 0:v.out)||[]))};Cs=lP(Cs,c);var g=e["bpmn:definitions"];if(g){var b=g["bpmn:process"];(function(S,A){A.forEach(function(M){try{Object.keys(S).forEach(function(x){try{M(x)}catch(E){console.error(E)}})}catch(x){console.error(x)}})})(b,[function(S){function A(x){x["-children"]||(x["-children"]=[]),Object.keys(x).forEach(function(E){var j;E.indexOf("bpmn:")===0&&!eB.includes(E)&&(b[E]||(b[E]=[]),!Array.isArray(b[E])&&(b[E]=[b[E]]),Array.isArray(x[E])?(j=b[E]).push.apply(j,Ov(x[E])):b[E].push(x[E]),Array.isArray(x[E])?x[E].forEach(function(D){!E.includes("Flow")&&x["-children"].push(D["-id"])}):!E.includes("Flow")&&x["-children"].push(x[E]["-id"]),delete x[E])})}if(S==="bpmn:subProcess"){var M=b[S];Array.isArray(M)?M.forEach(function(x){S==="bpmn:subProcess"&&A(x)}):A(M)}},function(S){var A=function(x){Object.keys(x).forEach(function(E){var j,D;if(E.includes("bpmn:")){var V={};Cs[E]&&Cs[E].in?(V=(D=(j=Cs[E]).in)===null||D===void 0?void 0:D.call(j,E,ue.cloneDeep(x[E])),delete x[E]):M(x[E]);var U=void 0;(U=Reflect.ownKeys(V)).length>0&&U.forEach(function(L){Reflect.set(x,L,V[L])})}})};function M(x){r.set(x["-id"],x),Array.isArray(x)?x.forEach(function(E){M(E)}):typeof x=="object"&&A(x)}M(b[S])},function(S){if(S.indexOf("bpmn:")===0){var A=b[S];if(S==="bpmn:sequenceFlow"){var M=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=rB(A,M)}else{var x=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(S==="bpmn:boundaryEvent"){var E=b[S],j=function(D){var V=D["-attachedToRef"],U=r.get(V);U["-boundaryEvents"]||(U["-boundaryEvents"]=[]),U["-boundaryEvents"].push(D["-id"])};Array.isArray(E)?E.forEach(function(D){j(D)}):j(E)}n=n.concat(nB(A,x,S))}}}])}var _=function(S,A,M){Object.keys(S).forEach(function(x){var E=M?M+"."+x:x;A.has(E)?delete S[x]:typeof S[x]=="object"&&_(S[x],A,E)})};return n.forEach(function(S){var A,M;if(!((A=t==null?void 0:t.mapping)===null||A===void 0)&&A.in){var x=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,E=S.type;x[E]&&(S.type=x[E])}_(S,f.in,"")}),a.forEach(function(S){var A,M;if(!((A=t==null?void 0:t.mapping)===null||A===void 0)&&A.in){var x=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,E=S.type;x[E]&&(S.type=x[E])}_(S,f.in,"")}),{nodes:n,edges:a}}function nB(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var f=Xx(v,n,c);a.push(f)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=Xx(r,n,e);a.push(s)}return a}function Xx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=Dl.shapeConfigMap.get(t);v&&(a+=v.width/2,r+=v.height/2);var f={};Object.entries(n).forEach(function(S){var A=Xv(S,2),M=A[0],x=A[1];aP.includes(M)||(f[M]=x)}),f=Wg(f);var g;if(c&&(g={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(b["-x"])+Number(b["-width"])/2,g.y=Number(b["-y"])+Number(b["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:a,y:r,properties:f};return s&&(_.children=s),g&&(_.text=g),_}function rB(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(qx(s,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(qx(a,e))}return n}function qx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var b=Xv(g,2),_=b[0],S=b[1];aP.includes(_)||(c[_]=S)}),c=Wg(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),f={id:t["-id"],type:dl.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(f.text=n),f}var Dl=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,s){var c,v,f=Cw({},n.processAttributes);JV(f,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":f["-id"]};QV(g,r);var b=n.definitionAttributes;b["bpmn:process"]=f,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var _={"bpmn:definitions":b};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var S=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,A=function(M){Array.isArray(M)&&M.forEach(function(x){return A(x)}),typeof M=="object"&&Object.keys(M).forEach(function(x){var E;(E=S[x])?(M[E]=ue.cloneDeep(M[x]),delete M[x],A(M[E])):A(M[x])})};A(_)}return _},this.adapterIn=function(r,s){if(r)return tB(r,s)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(dl.START,{width:jx.width,height:jx.height});Dl.shapeConfigMap.set(dl.END,{width:Ix.width,height:Ix.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_CATCH,{width:Ug.width,height:Ug.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_THROW,{width:Ug.width,height:Ug.height});Dl.shapeConfigMap.set(dl.BOUNDARY,{width:Lx.width,height:Lx.height});Dl.shapeConfigMap.set(dl.PARALLEL_GATEWAY,{width:$x.width,height:$x.height});Dl.shapeConfigMap.set(dl.INCLUSIVE_GATEWAY,{width:Fx.width,height:Fx.height});Dl.shapeConfigMap.set(dl.EXCLUSIVE_GATEWAY,{width:Ux.width,height:Ux.height});Dl.shapeConfigMap.set(dl.SYSTEM,{width:Vx.width,height:Vx.height});Dl.shapeConfigMap.set(dl.USER,{width:Bx.width,height:Bx.height});Dl.shapeConfigMap.set(dl.SUBPROCESS,{width:Wx.width,height:Wx.height});(function(e){YV(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var v=HV(c);return a.adapterIn(v,a.props)},a.adapterXmlOut=function(c){var v=a.adapterOut(c,a.props);return qV(v)};var r=n.lf,s=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=s,a}return t.pluginName="BPMNAdapter",t})(Dl);var Yx;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Yx||(Yx={}));var sP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),bv=function(){return bv=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bv.apply(this,arguments)},jm=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return s},oB={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function iB(e){for(var t=e,n=1;n<t.length-1;){var a=jm(t[n-1],2),r=a[0],s=a[1],c=jm(t[n],2),v=c[0],f=c[1],g=jm(t[n+1],2),b=g[0],_=g[1];r===v&&v===b||s===f&&f===_?t.splice(n,1):n++}return t}function aB(e,t,n,a){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,s[0]+=a):t==="lb"&&(r[0]+=a,s[1]+=a),[r,s];case"tr":return t==="tl"?(r[1]+=a,s[0]-=a):t==="rb"&&(r[0]-=a,s[1]+=a),[r,s];case"bl":return t==="br"?(r[1]-=a,s[0]+=a):t==="lt"&&(r[0]+=a,s[1]-=a),[r,s];case"br":return t==="bl"?(r[1]-=a,s[0]-=a):t==="rt"&&(r[0]-=a,s[1]-=a),[r,s];default:return[]}}function lB(e,t,n,a){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,f=""+s+c,g=oB[f]||"-",b="L "+e[0]+" "+e[1];if(g==="-")b+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var _=jm(aB(t,f,g,v),2),S=_[0],A=_[1];S&&A&&(b+="L "+S[0]+" "+S[1]+" Q "+t[0]+" "+t[1]+" "+A[0]+" "+A[1],r=jm(A,2),t[0]=r[0],t[1]=r[1])}return b}function sB(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];a+=lB(r,s,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){sP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,f=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),b=iB(a.split(" ").map(function(A){return A.split(",").map(function(M){return+M})})),_=sB(b,v),S=bv(bv(bv({style:r?g:{}},f),s),{fill:"none"});return vn.h("path",bv({d:_},S))},t})(vn.PolylineEdge);(function(e){sP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(vn.PolylineEdgeModel);let Tb=!1;const Gg=ch({});function uP(e,t,n,a,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),Tb&&(Gg[e]=Jj(er({render:()=>Rv(Qj,{to:n},[Rv(t,s(a,r))]),provide:()=>({getNode:()=>a,getGraph:()=>r})})))}function cP(e){Tb&&delete Gg[e]}function zg(){return Tb}function uB(){return Tb=!0,er({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Gg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Gg[n])}),Rv(Sr,{},t.map(n=>Rv(n)))}}})}const cB=(e,t)=>{let n=0,a=t;for(;;){if(n>0&&(a=t+n,console.log(a)),!e.some(r=>r.properties.nodeName===a.trim()))return a;n++}};class Uo extends rP.view{constructor(n,a){super(n);Ma(this,"isMounted");Ma(this,"r");Ma(this,"component");Ma(this,"app");Ma(this,"root");Ma(this,"VueNode");Ma(this,"up_node_field_dict");this.component=a,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender?delete n.model.properties.noRender:n.model.properties.nodeName=cB(n.graphModel.nodes.filter(r=>r.id!==n.model.id),n.model.properties.nodeName),n.model.properties.config=_I[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var a,r,s,c,v,f;const n=[];return this.props.model.type==="start-node"&&(n.push({value:"global",label:St("views.applicationWorkflow.variable.global"),type:"global",children:((r=(a=this.props.model.properties)==null?void 0:a.config)==null?void 0:r.globalFields)||[]}),n.push({value:"chat",label:St("views.applicationWorkflow.variable.chat"),type:"chat",children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.chatFields)||[]})),n.push({value:this.props.model.id,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((f=(v=this.props.model.properties)==null?void 0:v.config)==null?void 0:f.fields)||[]}),n}get_up_node_field_dict(n,a){if(!this.up_node_field_dict||!a){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,a)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,a){const r=Object.values(this.get_up_node_field_dict(n,a)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:a,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),vn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[vn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if(zg())uP(this.targetId(),this.component,n,a,r);else{this.r=Rv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=rM({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r}}}),this.app.use(eI,{locale:tI}),this.app.use(nI),this.app.use(rI),this.app.use(nM);for(const[c,v]of Object.entries(oI))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){zg()&&cP(this.targetId()),this.unmountVueComponent()}}class Vo extends rP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=nM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const f=c[v];if(f.id===s)return!0;if(n(f.id,s))return!0}return!1},a={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!this.graphModel.getNodeIncomingNode(s.id).find(b=>b.id==r.id)&&!n(r.id,s.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==ei.Base&&(this.type!==ei.Start&&c.push({x:n-r/2+10,y:s?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?a:a-15,id:`${t}_right`,type:"right"})),c}}let fB=class extends Uo{constructor(t){super(t,aV)}};const dB={type:"ai-chat-node",model:Vo,view:fB},pB=Object.freeze(Object.defineProperty({__proto__:null,default:dB},Symbol.toStringTag,{value:"Module"})),hB={class:"title-decoration-1 mb-8"},vB={class:"flex-between w-full"},mB={class:"flex align-center"},yB={class:"mr-4"},gB={class:"flex"},bB=er({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),n=Zn(()=>t.path.includes("resource-management")?"systemManage":"workspace"),a={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},r=$e(),s=Zn({get:()=>(f.nodeModel.properties.nodeData||Te.set(f.nodeModel.properties,"nodeData",a),f.nodeModel.properties.nodeData),set:b=>{Te.set(f.nodeModel.properties,"nodeData",b)}});function c(b,_){const S=`${b}List`;_?(console.log("listKey",S),f.nodeModel.properties.nodeData[S]||Te.set(f.nodeModel.properties.nodeData,S,[])):delete f.nodeModel.properties.nodeData[S]}const v=()=>{if(!f.nodeModel.properties.nodeData.applicationId){Te.set(f.nodeModel.properties,"status",500);return}go({type:"application",systemType:n.value}).getApplicationDetail(f.nodeModel.properties.nodeData.applicationId).then(b=>{const _=Te.cloneDeep(f.nodeModel.properties.nodeData.api_input_field_list),S=Te.cloneDeep(f.nodeModel.properties.nodeData.user_input_field_list);if(eE(b.data.type)){const A=b.data.workFlow.nodes[0].properties.nodeData,M=Te.cloneDeep(b.data.workFlow.nodes[0].properties.api_input_field_list),x=Te.cloneDeep(b.data.workFlow.nodes[0].properties.user_input_field_list),E=(M||[]).map(U=>{const L=_==null?void 0:_.find(F=>F.variable==U.variable);return L?{...U,value:L.value,label:typeof U.label=="object"&&U.label!=null?U.label.label:U.label}:U});Te.set(f.nodeModel.properties.nodeData,"api_input_field_list",E);const j=(x||[]).map(U=>{const L=S==null?void 0:S.find(F=>F.field==U.field);return L?{...U,value:L.value,label:typeof U.label=="object"&&U.label!=null?U.label.label:U.label}:U});Te.set(f.nodeModel.properties.nodeData,"user_input_field_list",j),console.log("nodeData",A);const D=A.fileUploadEnable,V=A.fileUploadSetting;D?(c("document",V.document),c("image",V.image),c("audio",V.audio)):["documentList","imageList","audioList"].forEach(U=>{delete f.nodeModel.properties.nodeData[U]}),Te.set(f.nodeModel.properties,"status",b.data.id?200:500)}}).catch(b=>{console.log(b),Te.set(f.nodeModel.properties,"status",500)})},f=e,g=()=>{var b;return(b=r.value)==null?void 0:b.validate().catch(_=>Promise.reject({node:f.nodeModel,errMessage:_}))};return qr(()=>{v(),Te.set(f.nodeModel,"validate",g)}),(b,_)=>{const S=ee("el-form-item"),A=ee("el-tooltip"),M=ee("el-switch"),x=ee("el-form"),E=ee("el-card");return Se(),lt(Fo,{nodeModel:b.nodeModel},{default:N(()=>[K("h5",hB,_e(b.$t("views.applicationWorkflow.nodeSetting")),1),k(E,{shadow:"never",class:"card-never"},{default:N(()=>[k(x,{onSubmit:_[6]||(_[6]=Qt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:r},{default:N(()=>[k(S,{label:b.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[k(oo,{ref_key:"applicationNodeFormRef",ref:r,nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.questionReferenceAddress,"onUpdate:modelValue":_[0]||(_[0]=j=>s.value.questionReferenceAddress=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),s.value.hasOwnProperty("documentList")||"documentList"in s.value?(Se(),lt(S,{key:0,label:b.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:b.$t("views.chatLog.documentPlaceholder"),trigger:"blur",required:!1}},{default:N(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.chatLog.documentPlaceholder"),modelValue:s.value.documentList,"onUpdate:modelValue":_[1]||(_[1]=j=>s.value.documentList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):kn("",!0),s.value.hasOwnProperty("imageList")||"imageList"in s.value?(Se(),lt(S,{key:1,label:b.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:b.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:N(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:s.value.imageList,"onUpdate:modelValue":_[2]||(_[2]=j=>s.value.imageList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):kn("",!0),s.value.hasOwnProperty("audioList")||"audioList"in s.value?(Se(),lt(S,{key:2,label:b.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:b.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:N(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:s.value.audioList,"onUpdate:modelValue":_[3]||(_[3]=j=>s.value.audioList=j)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):kn("",!0),(Se(!0),en(Sr,null,ao(s.value.api_input_field_list,(j,D)=>(Se(),en("div",{key:"api-input-"+D},[k(S,{label:j.variable,prop:"api_input_field_list."+D+".value",rules:[{required:j.isRequired,message:`${b.$t("common.inputPlaceholder")}${j.variable}`,trigger:"blur"}]},{default:N(()=>[k(oo,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.api_input_field_list[D].value,"onUpdate:modelValue":V=>s.value.api_input_field_list[D].value=V},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Se(!0),en(Sr,null,ao(s.value.user_input_field_list,(j,D)=>(Se(),en("div",{key:"user-input-"+D},[k(S,{label:j.label,prop:"user_input_field_list."+D+".value",rules:[{required:j.required,message:`${b.$t("common.inputPlaceholder")}${j.label}`,trigger:"blur"}]},{default:N(()=>[k(oo,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:s.value.user_input_field_list[D].value,"onUpdate:modelValue":V=>s.value.user_input_field_list[D].value=V},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),k(S,{label:b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[5]||(_[5]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",vB,[K("div",mB,[K("div",yB,[K("span",null,_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(A,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",gB,[k(M,{size:"small",modelValue:s.value.isResult,"onUpdate:modelValue":_[4]||(_[4]=j=>s.value.isResult=j)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class _B extends Uo{constructor(t){super(t,bB)}}const wB={type:"application-node",model:Vo,view:_B},EB=Object.freeze(Object.defineProperty({__proto__:null,default:wB},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kx(Object(n),!0).forEach(function(a){OB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kx(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wg=function(t){return typeof t}:wg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function OB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jf(){return jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jf.apply(this,arguments)}function SB(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,s;for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function xB(e,t){if(e==null)return{};var n=SB(e,t),a,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var AB="1.15.6";function Nf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var $f=Nf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),oy=Nf(/Edge/i),Zx=Nf(/firefox/i),Im=Nf(/safari/i)&&!Nf(/chrome/i)&&!Nf(/android/i),IE=Nf(/iP(ad|od|hone)/i),fP=Nf(/chrome/i)&&Nf(/android/i),dP={capture:!1,passive:!1};function ro(e,t,n){e.addEventListener(t,n,!$f&&dP)}function Jr(e,t,n){e.removeEventListener(t,n,!$f&&dP)}function Hg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function pP(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Eu(e,t,n,a){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Hg(e,t):Hg(e,t))||a&&e===n)return e;if(e===n)break}while(e=pP(e))}return null}var Jx=/\s+/g;function ns(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Jx," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Jx," ")}}function Er(e,t,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in a)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),a[t]=n+(typeof n=="string"?"":"px")}}function Sv(e,t){var n="";if(typeof e=="string")n=e;else do{var a=Er(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function hP(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,s=a.length;if(n)for(;r<s;r++)n(a[r],r);return a}return[]}function hc(){var e=document.scrollingElement;return e||document.documentElement}function Ki(e,t,n,a,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,v,f,g,b,_;if(e!==window&&e.parentNode&&e!==hc()?(s=e.getBoundingClientRect(),c=s.top,v=s.left,f=s.bottom,g=s.right,b=s.height,_=s.width):(c=0,v=0,f=window.innerHeight,g=window.innerWidth,b=window.innerHeight,_=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!$f))do if(r&&r.getBoundingClientRect&&(Er(r,"transform")!=="none"||n&&Er(r,"position")!=="static")){var S=r.getBoundingClientRect();c-=S.top+parseInt(Er(r,"border-top-width")),v-=S.left+parseInt(Er(r,"border-left-width")),f=c+s.height,g=v+s.width;break}while(r=r.parentNode);if(a&&e!==window){var A=Sv(r||e),M=A&&A.a,x=A&&A.d;A&&(c/=x,v/=M,_/=M,b/=x,f=c+b,g=v+_)}return{top:c,left:v,bottom:f,right:g,width:_,height:b}}}function Qx(e,t,n){for(var a=Gd(e,!0),r=Ki(e)[t];a;){var s=Ki(a)[n],c=void 0;if(c=r>=s,!c)return a;if(a===hc())break;a=Gd(a,!1)}return!1}function Dv(e,t,n,a){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==yr.ghost&&(a||c[s]!==yr.dragged)&&Eu(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function LE(e,t){for(var n=e.lastElementChild;n&&(n===yr.ghost||Er(n,"display")==="none"||t&&!Hg(n,t));)n=n.previousElementSibling;return n||null}function Ns(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==yr.clone&&(!t||Hg(e,t))&&n++;return n}function eA(e){var t=0,n=0,a=hc();if(e)do{var r=Sv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==a&&(e=e.parentNode));return[t,n]}function TB(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n)}return-1}function Gd(e,t){if(!e||!e.getBoundingClientRect)return hc();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Er(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return hc();if(a||t)return n;a=!0}}while(n=n.parentNode);return hc()}function MB(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function S1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Lm;function vP(e,t){return function(){if(!Lm){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),Lm=setTimeout(function(){Lm=void 0},t)}}}function kB(){clearTimeout(Lm),Lm=void 0}function mP(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function yP(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function gP(e,t,n){var a={};return Array.from(e.children).forEach(function(r){var s,c,v,f;if(!(!Eu(r,t.draggable,e,!1)||r.animated||r===n)){var g=Ki(r);a.left=Math.min((s=a.left)!==null&&s!==void 0?s:1/0,g.left),a.top=Math.min((c=a.top)!==null&&c!==void 0?c:1/0,g.top),a.right=Math.max((v=a.right)!==null&&v!==void 0?v:-1/0,g.right),a.bottom=Math.max((f=a.bottom)!==null&&f!==void 0?f:-1/0,g.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Nl="Sortable"+new Date().getTime();function PB(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(r){if(!(Er(r,"display")==="none"||r===yr.ghost)){e.push({target:r,rect:Ki(r)});var s=mc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=Sv(r,!0);c&&(s.top-=c.f,s.left-=c.e)}r.fromRect=s}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(TB(e,{target:a}),1)},animateAll:function(a){var r=this;if(!this.options.animation){clearTimeout(t),typeof a=="function"&&a();return}var s=!1,c=0;e.forEach(function(v){var f=0,g=v.target,b=g.fromRect,_=Ki(g),S=g.prevFromRect,A=g.prevToRect,M=v.rect,x=Sv(g,!0);x&&(_.top-=x.f,_.left-=x.e),g.toRect=_,g.thisAnimationDuration&&S1(S,_)&&!S1(b,_)&&(M.top-_.top)/(M.left-_.left)===(b.top-_.top)/(b.left-_.left)&&(f=NB(M,S,A,r.options)),S1(_,b)||(g.prevFromRect=b,g.prevToRect=_,f||(f=r.options.animation),r.animate(g,M,_,f)),f&&(s=!0,c=Math.max(c,f),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},f),g.thisAnimationDuration=f)}),clearTimeout(t),s?t=setTimeout(function(){typeof a=="function"&&a()},c):typeof a=="function"&&a(),e=[]},animate:function(a,r,s,c){if(c){Er(a,"transition",""),Er(a,"transform","");var v=Sv(this.el),f=v&&v.a,g=v&&v.d,b=(r.left-s.left)/(f||1),_=(r.top-s.top)/(g||1);a.animatingX=!!b,a.animatingY=!!_,Er(a,"transform","translate3d("+b+"px,"+_+"px,0)"),this.forRepaintDummy=RB(a),Er(a,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),Er(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Er(a,"transition",""),Er(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},c)}}}}function RB(e){return e.offsetWidth}function NB(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var sv=[],x1={initializeByDefault:!0},iy={mount:function(t){for(var n in x1)x1.hasOwnProperty(n)&&!(n in t)&&(t[n]=x1[n]);sv.forEach(function(a){if(a.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),sv.push(t)},pluginEvent:function(t,n,a){var r=this;this.eventCanceled=!1,a.cancel=function(){r.eventCanceled=!0};var s=t+"Global";sv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][s]&&n[c.pluginName][s](mc({sortable:n},a)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](mc({sortable:n},a)))})},initializePlugins:function(t,n,a,r){sv.forEach(function(v){var f=v.pluginName;if(!(!t.options[f]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[f]=g,jf(a,g.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var c=this.modifyOption(t,s,t.options[s]);typeof c<"u"&&(t.options[s]=c)}},getEventProperties:function(t,n){var a={};return sv.forEach(function(r){typeof r.eventProperties=="function"&&jf(a,r.eventProperties.call(n[r.pluginName],t))}),a},modifyOption:function(t,n,a){var r;return sv.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],a))}),r}};function CB(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,v=e.fromEl,f=e.oldIndex,g=e.newIndex,b=e.oldDraggableIndex,_=e.newDraggableIndex,S=e.originalEvent,A=e.putSortable,M=e.extraEventProperties;if(t=t||n&&n[Nl],!!t){var x,E=t.options,j="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!$f&&!oy?x=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(a,!0,!0)),x.to=c||n,x.from=v||n,x.item=r||n,x.clone=s,x.oldIndex=f,x.newIndex=g,x.oldDraggableIndex=b,x.newDraggableIndex=_,x.originalEvent=S,x.pullMode=A?A.lastPutMode:void 0;var D=mc(mc({},M),iy.getEventProperties(a,t));for(var V in D)x[V]=D[V];n&&n.dispatchEvent(x),E[j]&&E[j].call(t,x)}}var DB=["evt"],Rl=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=a.evt,s=xB(a,DB);iy.pluginEvent.bind(yr)(t,n,mc({dragEl:bn,parentEl:Ni,ghostEl:Pr,rootEl:vi,nextEl:Yp,lastDownEl:Eg,cloneEl:Ei,cloneHidden:Wd,dragStarted:Am,putSortable:Pa,activeSortable:yr.active,originalEvent:r,oldIndex:_v,oldDraggableIndex:$m,newIndex:rs,newDraggableIndex:Bd,hideGhostForTarget:EP,unhideGhostForTarget:OP,cloneNowHidden:function(){Wd=!0},cloneNowShown:function(){Wd=!1},dispatchSortableEvent:function(v){cl({sortable:n,name:v,originalEvent:r})}},s))};function cl(e){CB(mc({putSortable:Pa,cloneEl:Ei,targetEl:bn,rootEl:vi,oldIndex:_v,oldDraggableIndex:$m,newIndex:rs,newDraggableIndex:Bd},e))}var bn,Ni,Pr,vi,Yp,Eg,Ei,Wd,_v,rs,$m,Bd,ug,Pa,pv=!1,Xg=!1,qg=[],Hp,wu,A1,T1,tA,nA,Am,uv,Fm,Um=!1,cg=!1,Og,za,M1=[],Dw=!1,Yg=[],Mb=typeof document<"u",fg=IE,rA=oy||$f?"cssFloat":"float",jB=Mb&&!fP&&!IE&&"draggable"in document.createElement("div"),bP=function(){if(Mb){if($f)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),_P=function(t,n){var a=Er(t),r=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),s=Dv(t,0,n),c=Dv(t,1,n),v=s&&Er(s),f=c&&Er(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Ki(s).width,b=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Ki(c).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&v.float&&v.float!=="none"){var _=v.float==="left"?"left":"right";return c&&(f.clear==="both"||f.clear===_)?"vertical":"horizontal"}return s&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&a[rA]==="none"||c&&a[rA]==="none"&&g+b>r)?"vertical":"horizontal"},IB=function(t,n,a){var r=a?t.left:t.top,s=a?t.right:t.bottom,c=a?t.width:t.height,v=a?n.left:n.top,f=a?n.right:n.bottom,g=a?n.width:n.height;return r===v||s===f||r+c/2===v+g/2},LB=function(t,n){var a;return qg.some(function(r){var s=r[Nl].options.emptyInsertThreshold;if(!(!s||LE(r))){var c=Ki(r),v=t>=c.left-s&&t<=c.right+s,f=n>=c.top-s&&n<=c.bottom+s;if(v&&f)return a=r}}),a},wP=function(t){function n(s,c){return function(v,f,g,b){var _=v.options.group.name&&f.options.group.name&&v.options.group.name===f.options.group.name;if(s==null&&(c||_))return!0;if(s==null||s===!1)return!1;if(c&&s==="clone")return s;if(typeof s=="function")return n(s(v,f,g,b),c)(v,f,g,b);var S=(c?v:f).options.group.name;return s===!0||typeof s=="string"&&s===S||s.join&&s.indexOf(S)>-1}}var a={},r=t.group;(!r||wg(r)!="object")&&(r={name:r}),a.name=r.name,a.checkPull=n(r.pull,!0),a.checkPut=n(r.put),a.revertClone=r.revertClone,t.group=a},EP=function(){!bP&&Pr&&Er(Pr,"display","none")},OP=function(){!bP&&Pr&&Er(Pr,"display","")};Mb&&!fP&&document.addEventListener("click",function(e){if(Xg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xg=!1,!1},!0);var Xp=function(t){if(bn){t=t.touches?t.touches[0]:t;var n=LB(t.clientX,t.clientY);if(n){var a={};for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Nl]._onDragOver(a)}}},$B=function(t){bn&&bn.parentNode[Nl]._isOutsideThisEl(t.target)};function yr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=jf({},t),e[Nl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _P(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yr.supportPointer!==!1&&"PointerEvent"in window&&(!Im||IE),emptyInsertThreshold:5};iy.initializePlugins(this,e,n);for(var a in n)!(a in t)&&(t[a]=n[a]);wP(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:jB,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ro(e,"pointerdown",this._onTapStart):(ro(e,"mousedown",this._onTapStart),ro(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ro(e,"dragover",this),ro(e,"dragenter",this)),qg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),jf(this,PB())}yr.prototype={constructor:yr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(uv=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,bn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,a=this.el,r=this.options,s=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,b=r.filter;if(HB(a),!bn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Im&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Eu(f,r.draggable,a,!1),!(f&&f.animated)&&Eg!==f)){if(_v=Ns(f),$m=Ns(f,r.draggable),typeof b=="function"){if(b.call(this,t,f,this)){cl({sortable:n,rootEl:g,name:"filter",targetEl:f,toEl:a,fromEl:a}),Rl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(_){if(_=Eu(g,_.trim(),a,!1),_)return cl({sortable:n,rootEl:_,name:"filter",targetEl:f,fromEl:a,toEl:a}),Rl("filter",n,{evt:t}),!0}),b)){s&&t.preventDefault();return}r.handle&&!Eu(g,r.handle,a,!1)||this._prepareDragStart(t,v,f)}}},_prepareDragStart:function(t,n,a){var r=this,s=r.el,c=r.options,v=s.ownerDocument,f;if(a&&!bn&&a.parentNode===s){var g=Ki(a);if(vi=s,bn=a,Ni=bn.parentNode,Yp=bn.nextSibling,Eg=a,ug=c.group,yr.dragged=bn,Hp={target:bn,clientX:(n||t).clientX,clientY:(n||t).clientY},tA=Hp.clientX-g.left,nA=Hp.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,bn.style["will-change"]="all",f=function(){if(Rl("delayEnded",r,{evt:t}),yr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Zx&&r.nativeDraggable&&(bn.draggable=!0),r._triggerDragStart(t,n),cl({sortable:r,name:"choose",originalEvent:t}),ns(bn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(b){hP(bn,b.trim(),k1)}),ro(v,"dragover",Xp),ro(v,"mousemove",Xp),ro(v,"touchmove",Xp),c.supportPointer?(ro(v,"pointerup",r._onDrop),!this.nativeDraggable&&ro(v,"pointercancel",r._onDrop)):(ro(v,"mouseup",r._onDrop),ro(v,"touchend",r._onDrop),ro(v,"touchcancel",r._onDrop)),Zx&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bn.draggable=!0),Rl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(oy||$f))){if(yr.eventCanceled){this._onDrop();return}c.supportPointer?(ro(v,"pointerup",r._disableDelayedDrag),ro(v,"pointercancel",r._disableDelayedDrag)):(ro(v,"mouseup",r._disableDelayedDrag),ro(v,"touchend",r._disableDelayedDrag),ro(v,"touchcancel",r._disableDelayedDrag)),ro(v,"mousemove",r._delayedDragTouchMoveHandler),ro(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&ro(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(f,c.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bn&&k1(bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Jr(t,"mouseup",this._disableDelayedDrag),Jr(t,"touchend",this._disableDelayedDrag),Jr(t,"touchcancel",this._disableDelayedDrag),Jr(t,"pointerup",this._disableDelayedDrag),Jr(t,"pointercancel",this._disableDelayedDrag),Jr(t,"mousemove",this._delayedDragTouchMoveHandler),Jr(t,"touchmove",this._delayedDragTouchMoveHandler),Jr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ro(document,"pointermove",this._onTouchMove):n?ro(document,"touchmove",this._onTouchMove):ro(document,"mousemove",this._onTouchMove):(ro(bn,"dragend",this),ro(vi,"dragstart",this._onDragStart));try{document.selection?Sg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(pv=!1,vi&&bn){Rl("dragStarted",this,{evt:n}),this.nativeDraggable&&ro(document,"dragover",$B);var a=this.options;!t&&ns(bn,a.dragClass,!1),ns(bn,a.ghostClass,!0),yr.active=this,t&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(wu){this._lastX=wu.clientX,this._lastY=wu.clientY,EP();for(var t=document.elementFromPoint(wu.clientX,wu.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(wu.clientX,wu.clientY),t!==n);)n=t;if(bn.parentNode[Nl]._isOutsideThisEl(t),n)do{if(n[Nl]){var a=void 0;if(a=n[Nl]._onDragOver({clientX:wu.clientX,clientY:wu.clientY,target:t,rootEl:n}),a&&!this.options.dragoverBubble)break}t=n}while(n=pP(n));OP()}},_onTouchMove:function(t){if(Hp){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,c=Pr&&Sv(Pr,!0),v=Pr&&c&&c.a,f=Pr&&c&&c.d,g=fg&&za&&eA(za),b=(s.clientX-Hp.clientX+r.x)/(v||1)+(g?g[0]-M1[0]:0)/(v||1),_=(s.clientY-Hp.clientY+r.y)/(f||1)+(g?g[1]-M1[1]:0)/(f||1);if(!yr.active&&!pv){if(a&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(Pr){c?(c.e+=b-(A1||0),c.f+=_-(T1||0)):c={a:1,b:0,c:0,d:1,e:b,f:_};var S="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");Er(Pr,"webkitTransform",S),Er(Pr,"mozTransform",S),Er(Pr,"msTransform",S),Er(Pr,"transform",S),A1=b,T1=_,wu=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Pr){var t=this.options.fallbackOnBody?document.body:vi,n=Ki(bn,!0,fg,!0,t),a=this.options;if(fg){for(za=t;Er(za,"position")==="static"&&Er(za,"transform")==="none"&&za!==document;)za=za.parentNode;za!==document.body&&za!==document.documentElement?(za===document&&(za=hc()),n.top+=za.scrollTop,n.left+=za.scrollLeft):za=hc(),M1=eA(za)}Pr=bn.cloneNode(!0),ns(Pr,a.ghostClass,!1),ns(Pr,a.fallbackClass,!0),ns(Pr,a.dragClass,!0),Er(Pr,"transition",""),Er(Pr,"transform",""),Er(Pr,"box-sizing","border-box"),Er(Pr,"margin",0),Er(Pr,"top",n.top),Er(Pr,"left",n.left),Er(Pr,"width",n.width),Er(Pr,"height",n.height),Er(Pr,"opacity","0.8"),Er(Pr,"position",fg?"absolute":"fixed"),Er(Pr,"zIndex","100000"),Er(Pr,"pointerEvents","none"),yr.ghost=Pr,t.appendChild(Pr),Er(Pr,"transform-origin",tA/parseInt(Pr.style.width)*100+"% "+nA/parseInt(Pr.style.height)*100+"%")}},_onDragStart:function(t,n){var a=this,r=t.dataTransfer,s=a.options;if(Rl("dragStart",this,{evt:t}),yr.eventCanceled){this._onDrop();return}Rl("setupClone",this),yr.eventCanceled||(Ei=yP(bn),Ei.removeAttribute("id"),Ei.draggable=!1,Ei.style["will-change"]="",this._hideClone(),ns(Ei,this.options.chosenClass,!1),yr.clone=Ei),a.cloneId=Sg(function(){Rl("clone",a),!yr.eventCanceled&&(a.options.removeCloneOnHide||vi.insertBefore(Ei,bn),a._hideClone(),cl({sortable:a,name:"clone"}))}),!n&&ns(bn,s.dragClass,!0),n?(Xg=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Jr(document,"mouseup",a._onDrop),Jr(document,"touchend",a._onDrop),Jr(document,"touchcancel",a._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(a,r,bn)),ro(document,"drop",a),Er(bn,"transform","translateZ(0)")),pv=!0,a._dragStartId=Sg(a._dragStarted.bind(a,n,t)),ro(document,"selectstart",a),Am=!0,window.getSelection().removeAllRanges(),Im&&Er(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,a=t.target,r,s,c,v=this.options,f=v.group,g=yr.active,b=ug===f,_=v.sort,S=Pa||g,A,M=this,x=!1;if(Dw)return;function E(we,me){Rl(we,M,mc({evt:t,isOwner:b,axis:A?"vertical":"horizontal",revert:c,dragRect:r,targetRect:s,canSort:_,fromSortable:S,target:a,completed:D,onMove:function(Je,yt){return dg(vi,n,bn,r,Je,Ki(Je),t,yt)},changed:V},me))}function j(){E("dragOverAnimationCapture"),M.captureAnimationState(),M!==S&&S.captureAnimationState()}function D(we){return E("dragOverCompleted",{insertion:we}),we&&(b?g._hideClone():g._showClone(M),M!==S&&(ns(bn,Pa?Pa.options.ghostClass:g.options.ghostClass,!1),ns(bn,v.ghostClass,!0)),Pa!==M&&M!==yr.active?Pa=M:M===yr.active&&Pa&&(Pa=null),S===M&&(M._ignoreWhileAnimating=a),M.animateAll(function(){E("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==S&&(S.animateAll(),S._ignoreWhileAnimating=null)),(a===bn&&!bn.animated||a===n&&!a.animated)&&(uv=null),!v.dragoverBubble&&!t.rootEl&&a!==document&&(bn.parentNode[Nl]._isOutsideThisEl(t.target),!we&&Xp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),x=!0}function V(){rs=Ns(bn),Bd=Ns(bn,v.draggable),cl({sortable:M,name:"change",toEl:n,newIndex:rs,newDraggableIndex:Bd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),a=Eu(a,v.draggable,n,!0),E("dragOver"),yr.eventCanceled)return x;if(bn.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||M._ignoreWhileAnimating===a)return D(!1);if(Xg=!1,g&&!v.disabled&&(b?_||(c=Ni!==vi):Pa===this||(this.lastPutMode=ug.checkPull(this,g,bn,t))&&f.checkPut(this,g,bn,t))){if(A=this._getDirection(t,a)==="vertical",r=Ki(bn),E("dragOverValid"),yr.eventCanceled)return x;if(c)return Ni=vi,j(),this._hideClone(),E("revert"),yr.eventCanceled||(Yp?vi.insertBefore(bn,Yp):vi.appendChild(bn)),D(!0);var U=LE(n,v.draggable);if(!U||BB(t,A,this)&&!U.animated){if(U===bn)return D(!1);if(U&&n===t.target&&(a=U),a&&(s=Ki(a)),dg(vi,n,bn,r,a,s,t,!!a)!==!1)return j(),U&&U.nextSibling?n.insertBefore(bn,U.nextSibling):n.appendChild(bn),Ni=n,V(),D(!0)}else if(U&&VB(t,A,this)){var L=Dv(n,0,v,!0);if(L===bn)return D(!1);if(a=L,s=Ki(a),dg(vi,n,bn,r,a,s,t,!1)!==!1)return j(),n.insertBefore(bn,L),Ni=n,V(),D(!0)}else if(a.parentNode===n){s=Ki(a);var F=0,X,q=bn.parentNode!==n,H=!IB(bn.animated&&bn.toRect||r,a.animated&&a.toRect||s,A),B=A?"top":"left",G=Qx(a,"top","top")||Qx(bn,"top","top"),Z=G?G.scrollTop:void 0;uv!==a&&(X=s[B],Um=!1,cg=!H&&v.invertSwap||q),F=WB(t,a,s,A,H?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,cg,uv===a);var Q;if(F!==0){var fe=Ns(bn);do fe-=F,Q=Ni.children[fe];while(Q&&(Er(Q,"display")==="none"||Q===Pr))}if(F===0||Q===a)return D(!1);uv=a,Fm=F;var se=a.nextElementSibling,ce=!1;ce=F===1;var be=dg(vi,n,bn,r,a,s,t,ce);if(be!==!1)return(be===1||be===-1)&&(ce=be===1),Dw=!0,setTimeout(UB,30),j(),ce&&!se?n.appendChild(bn):a.parentNode.insertBefore(bn,ce?se:a),G&&mP(G,0,Z-G.scrollTop),Ni=bn.parentNode,X!==void 0&&!cg&&(Og=Math.abs(X-Ki(a)[B])),V(),D(!0)}if(n.contains(bn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Jr(document,"mousemove",this._onTouchMove),Jr(document,"touchmove",this._onTouchMove),Jr(document,"pointermove",this._onTouchMove),Jr(document,"dragover",Xp),Jr(document,"mousemove",Xp),Jr(document,"touchmove",Xp)},_offUpEvents:function(){var t=this.el.ownerDocument;Jr(t,"mouseup",this._onDrop),Jr(t,"touchend",this._onDrop),Jr(t,"pointerup",this._onDrop),Jr(t,"pointercancel",this._onDrop),Jr(t,"touchcancel",this._onDrop),Jr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;if(rs=Ns(bn),Bd=Ns(bn,a.draggable),Rl("drop",this,{evt:t}),Ni=bn&&bn.parentNode,rs=Ns(bn),Bd=Ns(bn,a.draggable),yr.eventCanceled){this._nulling();return}pv=!1,cg=!1,Um=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),jw(this.cloneId),jw(this._dragStartId),this.nativeDraggable&&(Jr(document,"drop",this),Jr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Im&&Er(document.body,"user-select",""),Er(bn,"transform",""),t&&(Am&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),Pr&&Pr.parentNode&&Pr.parentNode.removeChild(Pr),(vi===Ni||Pa&&Pa.lastPutMode!=="clone")&&Ei&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),bn&&(this.nativeDraggable&&Jr(bn,"dragend",this),k1(bn),bn.style["will-change"]="",Am&&!pv&&ns(bn,Pa?Pa.options.ghostClass:this.options.ghostClass,!1),ns(bn,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:Ni,newIndex:null,newDraggableIndex:null,originalEvent:t}),vi!==Ni?(rs>=0&&(cl({rootEl:Ni,name:"add",toEl:Ni,fromEl:vi,originalEvent:t}),cl({sortable:this,name:"remove",toEl:Ni,originalEvent:t}),cl({rootEl:Ni,name:"sort",toEl:Ni,fromEl:vi,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ni,originalEvent:t})),Pa&&Pa.save()):rs!==_v&&rs>=0&&(cl({sortable:this,name:"update",toEl:Ni,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ni,originalEvent:t})),yr.active&&((rs==null||rs===-1)&&(rs=_v,Bd=$m),cl({sortable:this,name:"end",toEl:Ni,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Rl("nulling",this),vi=bn=Ni=Pr=Yp=Ei=Eg=Wd=Hp=wu=Am=rs=Bd=_v=$m=uv=Fm=Pa=ug=yr.dragged=yr.ghost=yr.clone=yr.active=null,Yg.forEach(function(t){t.checked=!0}),Yg.length=A1=T1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":bn&&(this._onDragOver(t),FB(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,a=this.el.children,r=0,s=a.length,c=this.options;r<s;r++)n=a[r],Eu(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||zB(n));return t},sort:function(t,n){var a={},r=this.el;this.toArray().forEach(function(s,c){var v=r.children[c];Eu(v,this.options.draggable,r,!1)&&(a[s]=v)},this),n&&this.captureAnimationState(),t.forEach(function(s){a[s]&&(r.removeChild(a[s]),r.appendChild(a[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Eu(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var a=this.options;if(n===void 0)return a[t];var r=iy.modifyOption(this,t,n);typeof r<"u"?a[t]=r:a[t]=n,t==="group"&&wP(a)},destroy:function(){Rl("destroy",this);var t=this.el;t[Nl]=null,Jr(t,"mousedown",this._onTapStart),Jr(t,"touchstart",this._onTapStart),Jr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Jr(t,"dragover",this),Jr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),qg.splice(qg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Wd){if(Rl("hideClone",this),yr.eventCanceled)return;Er(Ei,"display","none"),this.options.removeCloneOnHide&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),Wd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Wd){if(Rl("showClone",this),yr.eventCanceled)return;bn.parentNode==vi&&!this.options.group.revertClone?vi.insertBefore(Ei,bn):Yp?vi.insertBefore(Ei,Yp):vi.appendChild(Ei),this.options.group.revertClone&&this.animate(bn,Ei),Er(Ei,"display",""),Wd=!1}}};function FB(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function dg(e,t,n,a,r,s,c,v){var f,g=e[Nl],b=g.options.onMove,_;return window.CustomEvent&&!$f&&!oy?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=a,f.related=r||t,f.relatedRect=s||Ki(t),f.willInsertAfter=v,f.originalEvent=c,e.dispatchEvent(f),b&&(_=b.call(g,f,c)),_}function k1(e){e.draggable=!1}function UB(){Dw=!1}function VB(e,t,n){var a=Ki(Dv(n.el,0,n.options,!0)),r=gP(n.el,n.options,Pr),s=10;return t?e.clientX<r.left-s||e.clientY<a.top&&e.clientX<a.right:e.clientY<r.top-s||e.clientY<a.bottom&&e.clientX<a.left}function BB(e,t,n){var a=Ki(LE(n.el,n.options.draggable)),r=gP(n.el,n.options,Pr),s=10;return t?e.clientX>r.right+s||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>r.bottom+s||e.clientX>a.right&&e.clientY>a.top}function WB(e,t,n,a,r,s,c,v){var f=a?e.clientY:e.clientX,g=a?n.height:n.width,b=a?n.top:n.left,_=a?n.bottom:n.right,S=!1;if(!c){if(v&&Og<g*r){if(!Um&&(Fm===1?f>b+g*s/2:f<_-g*s/2)&&(Um=!0),Um)S=!0;else if(Fm===1?f<b+Og:f>_-Og)return-Fm}else if(f>b+g*(1-r)/2&&f<_-g*(1-r)/2)return GB(t)}return S=S||c,S&&(f<b+g*s/2||f>_-g*s/2)?f>b+g/2?1:-1:0}function GB(e){return Ns(bn)<Ns(e)?1:-1}function zB(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function HB(e){Yg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&Yg.push(a)}}function Sg(e){return setTimeout(e,0)}function jw(e){return clearTimeout(e)}Mb&&ro(document,"touchmove",function(e){(yr.active||pv)&&e.cancelable&&e.preventDefault()});yr.utils={on:ro,off:Jr,css:Er,find:hP,is:function(t,n){return!!Eu(t,n,t,!1)},extend:MB,throttle:vP,closest:Eu,toggleClass:ns,clone:yP,index:Ns,nextTick:Sg,cancelNextTick:jw,detectDirection:_P,getChild:Dv,expando:Nl};yr.get=function(e){return e[Nl]};yr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(yr.utils=mc(mc({},yr.utils),a.utils)),iy.mount(a)})};yr.create=function(e,t){return new yr(e,t)};yr.version=AB;var Yi=[],Tm,Iw,Lw=!1,P1,R1,Kg,Mm;function XB(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?ro(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ro(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ro(document,"touchmove",this._handleFallbackAutoScroll):ro(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Jr(document,"dragover",this._handleAutoScroll):(Jr(document,"pointermove",this._handleFallbackAutoScroll),Jr(document,"touchmove",this._handleFallbackAutoScroll),Jr(document,"mousemove",this._handleFallbackAutoScroll)),oA(),xg(),kB()},nulling:function(){Kg=Iw=Tm=Lw=Mm=P1=R1=null,Yi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var r=this,s=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(s,c);if(Kg=n,a||this.options.forceAutoScrollFallback||oy||$f||Im){N1(n,this.options,v,a);var f=Gd(v,!0);Lw&&(!Mm||s!==P1||c!==R1)&&(Mm&&oA(),Mm=setInterval(function(){var g=Gd(document.elementFromPoint(s,c),!0);g!==f&&(f=g,xg()),N1(n,r.options,g,a)},10),P1=s,R1=c)}else{if(!this.options.bubbleScroll||Gd(v,!0)===hc()){xg();return}N1(n,this.options,Gd(v,!1),!1)}}},jf(e,{pluginName:"scroll",initializeByDefault:!0})}function xg(){Yi.forEach(function(e){clearInterval(e.pid)}),Yi=[]}function oA(){clearInterval(Mm)}var N1=vP(function(e,t,n,a){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,f=hc(),g=!1,b;Iw!==n&&(Iw=n,xg(),Tm=t.scroll,b=t.scrollFn,Tm===!0&&(Tm=Gd(n,!0)));var _=0,S=Tm;do{var A=S,M=Ki(A),x=M.top,E=M.bottom,j=M.left,D=M.right,V=M.width,U=M.height,L=void 0,F=void 0,X=A.scrollWidth,q=A.scrollHeight,H=Er(A),B=A.scrollLeft,G=A.scrollTop;A===f?(L=V<X&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),F=U<q&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(L=V<X&&(H.overflowX==="auto"||H.overflowX==="scroll"),F=U<q&&(H.overflowY==="auto"||H.overflowY==="scroll"));var Z=L&&(Math.abs(D-r)<=c&&B+V<X)-(Math.abs(j-r)<=c&&!!B),Q=F&&(Math.abs(E-s)<=c&&G+U<q)-(Math.abs(x-s)<=c&&!!G);if(!Yi[_])for(var fe=0;fe<=_;fe++)Yi[fe]||(Yi[fe]={});(Yi[_].vx!=Z||Yi[_].vy!=Q||Yi[_].el!==A)&&(Yi[_].el=A,Yi[_].vx=Z,Yi[_].vy=Q,clearInterval(Yi[_].pid),(Z!=0||Q!=0)&&(g=!0,Yi[_].pid=setInterval((function(){a&&this.layer===0&&yr.active._onTouchMove(Kg);var se=Yi[this.layer].vy?Yi[this.layer].vy*v:0,ce=Yi[this.layer].vx?Yi[this.layer].vx*v:0;typeof b=="function"&&b.call(yr.dragged.parentNode[Nl],ce,se,e,Kg,Yi[this.layer].el)!=="continue"||mP(Yi[this.layer].el,ce,se)}).bind({layer:_}),24))),_++}while(t.bubbleScroll&&S!==f&&(S=Gd(S,!1)));Lw=g}},30),SP=function(t){var n=t.originalEvent,a=t.putSortable,r=t.dragEl,s=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var g=a||s;v();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,_=document.elementFromPoint(b.clientX,b.clientY);f(),g&&!g.el.contains(_)&&(c("spill"),this.onSpill({dragEl:r,putSortable:a}))}};function $E(){}$E.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var r=Dv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:SP};jf($E,{pluginName:"revertOnSpill"});function FE(){}FE.prototype={onSpill:function(t){var n=t.dragEl,a=t.putSortable,r=a||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:SP};jf(FE,{pluginName:"removeOnSpill"});yr.mount(new XB);yr.mount(FE,$E);const qB={class:"dialog-footer"},YB=er({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e(!1),c=$e(!1),v=$e({name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""}),f=ch({name:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:St("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=$e(!1);ub(g,A=>{A||(v.value={name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const b=A=>{A&&(v.value=Te.cloneDeep(A),c.value=!0),g.value=!0},_=()=>{g.value=!1,c.value=!1},S=async A=>{A&&await A.validate(M=>{M&&a("refresh",v.value)})};return t({open:b,close:_}),(A,M)=>{const x=ee("el-input"),E=ee("el-form-item"),j=ee("el-switch"),D=ee("el-form"),V=ee("el-button"),U=ee("el-dialog");return Se(),lt(U,{title:c.value?A.$t("common.param.editParam"):A.$t("common.param.addParam"),modelValue:g.value,"onUpdate:modelValue":M[8]||(M[8]=L=>g.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:N(()=>[K("span",qB,[k(V,{onClick:M[6]||(M[6]=Qt(L=>g.value=!1,["prevent"]))},{default:N(()=>[ot(_e(A.$t("common.cancel")),1)]),_:1}),k(V,{type:"primary",onClick:M[7]||(M[7]=L=>S(r.value)),loading:s.value},{default:N(()=>[ot(_e(c.value?A.$t("common.save"):A.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:f,model:v.value,"require-asterisk-position":"right"},{default:N(()=>[k(E,{label:A.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:N(()=>[k(x,{modelValue:v.value.variable,"onUpdate:modelValue":M[0]||(M[0]=L=>v.value.variable=L),placeholder:A.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:M[1]||(M[1]=L=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(E,{label:A.$t("dynamicsForm.paramForm.required.label"),onClick:M[3]||(M[3]=Qt(()=>{},["prevent"]))},{default:N(()=>[k(j,{size:"small",modelValue:v.value.isRequired,"onUpdate:modelValue":M[2]||(M[2]=L=>v.value.isRequired=L)},null,8,["modelValue"])]),_:1},8,["label"]),k(E,{label:A.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.isRequired,message:A.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:N(()=>[k(x,{modelValue:v.value.default_value,"onUpdate:modelValue":M[4]||(M[4]=L=>v.value.default_value=L),placeholder:A.$t("dynamicsForm.default.placeholder"),onBlur:M[5]||(M[5]=L=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),KB={class:"flex-between mb-16"},ZB={class:"lighter"},JB=["title"],QB=["title"],eW={class:"mr-4"},tW=er({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(null),r=$e(),s=$e([]);function c(b,_){typeof _<"u"&&(a.value=_),r.value.open(b)}function v(b){s.value.splice(b,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function f(b){for(let S=0;S<s.value.length;S++)if(s.value[S].variable===b.variable&&a.value!==S){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}const _=t.nodeModel.properties.user_input_field_list;for(let S=0;S<_.length;S++)if(_[S].field===b.variable){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+b.variable);return}a.value!==null?s.value.splice(a.value,1,b):s.value.push(b),a.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const _=n.value.$el.querySelector(".el-table__body-wrapper tbody");_&&yr.create(_,{animation:150,ghostClass:"ghost-row",onEnd:S=>{if(S.oldIndex===void 0||S.newIndex===void 0)return;const A=[...s.value],[M]=A.splice(S.oldIndex,1);A.splice(S.newIndex,0,M),s.value=A,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return qr(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(b=>b.assignment_method==="api_input").forEach(b=>{s.value.push(b)}),Te.set(t.nodeModel.properties,"api_input_field_list",s)}),(b,_)=>{var U;const S=ee("Plus"),A=ee("el-icon"),M=ee("el-button"),x=ee("el-table-column"),E=ee("el-switch"),j=ee("AppIcon"),D=ee("el-tooltip"),V=ee("el-table");return Se(),en(Sr,null,[K("div",KB,[K("h5",ZB,_e(b.$t("views.model.modelForm.title.apiParamPassing")),1),k(M,{link:"",type:"primary",onClick:_[0]||(_[0]=L=>c())},{default:N(()=>[k(A,{class:"mr-4"},{default:N(()=>[k(S)]),_:1}),ot(" "+_e(b.$t("common.add")),1)]),_:1})]),((U=t.nodeModel.properties.api_input_field_list)==null?void 0:U.length)>0?(Se(),lt(V,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[k(x,{prop:"variable",label:b.$t("dynamicsForm.paramForm.field.label")},{default:N(({row:L})=>[K("span",{class:"ellipsis-1",title:L.variable},_e(L.variable),9,JB)]),_:1},8,["label"]),k(x,{prop:"default_value",label:b.$t("dynamicsForm.default.label")},{default:N(({row:L})=>[K("span",{class:"ellipsis-1",title:L.default_value},_e(L.default_value),9,QB)]),_:1},8,["label"]),k(x,{label:b.$t("common.required")},{default:N(({row:L})=>[K("div",{onClick:_[1]||(_[1]=Qt(()=>{},["stop"]))},[k(E,{disabled:"",size:"small",modelValue:L.isRequired,"onUpdate:modelValue":F=>L.isRequired=F},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(x,{label:b.$t("common.operation"),align:"left",width:"90"},{default:N(({row:L,$index:F})=>[K("span",eW,[k(D,{effect:"dark",content:b.$t("common.modify"),placement:"top"},{default:N(()=>[k(M,{type:"primary",text:"",onClick:Qt(X=>c(L,F),["stop"])},{default:N(()=>[k(j,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(D,{effect:"dark",content:b.$t("common.delete"),placement:"top"},{default:N(()=>[k(M,{type:"primary",text:"",onClick:X=>v(F)},{default:N(()=>[k(j,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(YB,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:f},null,512)],64)}}}),nW={class:"dialog-footer"},rW=er({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e(!1),c=$e(!1),v=$e(),f=(E,j)=>E.every(D=>iI.get(j,D,void 0)!==void 0),g=Zn(()=>{if(v.value){const E=v.value;switch(E.type){case"input":return f(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:E.attrs||{maxlength:200,minlength:0},field:E.field||E.variable,input_type:"TextInput",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired};case"select":return f(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:E.attrs||{},field:E.field||E.variable,input_type:"SingleSelect",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,option_list:E.option_list?E.option_list:E.optionList.map(j=>({key:j,value:j}))};case"date":return f(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:E.field||E.variable,input_type:"DatePicker",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),b=$e(null),_=$e([{label:St("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:St("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:St("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:St("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:St("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:St("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:St("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),S=$e(!1),A=(E,j)=>{S.value=!0,E?(c.value=!0,v.value=Te.cloneDeep(E),b.value=j):v.value=null},M=()=>{S.value=!1,c.value=!1,b.value=null,v.value=null},x=async()=>{const E=r.value;E&&await E.validate().then(()=>{a("refresh",E==null?void 0:E.getData(),b.value),c.value=!1,v.value=null,b.value=null})};return t({open:A,close:M}),(E,j)=>{const D=ee("el-button"),V=ee("el-dialog");return Se(),lt(V,{title:c.value?E.$t("common.param.editParam"):E.$t("common.param.addParam"),modelValue:S.value,"onUpdate:modelValue":j[2]||(j[2]=U=>S.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":M,"append-to-body":""},{footer:N(()=>[K("span",nW,[k(D,{onClick:Qt(M,["prevent"])},{default:N(()=>[ot(_e(E.$t("common.cancel")),1)]),_:1}),k(D,{type:"primary",onClick:j[1]||(j[1]=U=>x()),loading:s.value},{default:N(()=>[ot(_e(c.value?E.$t("common.save"):E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(rE,{modelValue:g.value,"onUpdate:modelValue":j[0]||(j[0]=U=>g.value=U),"label-position":"top","require-asterisk-position":"right",input_type_list:_.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),oW={class:"dialog-footer"},iW=er({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e(!1),c=$e({title:St("chat.userInput")}),v=ch({title:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),f=$e(!1),g=S=>{S&&(c.value=Te.cloneDeep(S)),f.value=!0},b=()=>{f.value=!1},_=async S=>{S&&await S.validate(A=>{A&&a("refresh",c.value)})};return t({open:g,close:b}),(S,A)=>{const M=ee("el-input"),x=ee("el-form-item"),E=ee("el-form"),j=ee("el-button"),D=ee("el-dialog");return Se(),lt(D,{title:S.$t("common.setting"),modelValue:f.value,"onUpdate:modelValue":A[4]||(A[4]=V=>f.value=V),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:N(()=>[K("span",oW,[k(j,{onClick:A[2]||(A[2]=Qt(V=>f.value=!1,["prevent"]))},{default:N(()=>[ot(_e(S.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:A[3]||(A[3]=V=>_(r.value)),loading:s.value},{default:N(()=>[ot(_e(S.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(E,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:N(()=>[k(x,{label:S.$t("common.title"),prop:"title"},{default:N(()=>[k(M,{modelValue:c.value.title,"onUpdate:modelValue":A[0]||(A[0]=V=>c.value.title=V),maxlength:"64","show-word-limit":"",onBlur:A[1]||(A[1]=V=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),aW={class:"flex-between mb-16"},lW=["title"],sW={class:"ml-4"},uW=["title"],cW={key:0},fW=["title"],dW={key:1},pW=["title"],hW=["title"],vW={class:"mr-4"},mW=er({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(),r=$e(),s=$e([]),c=$e({title:St("chat.userInput")});function v(M,x){a.value.open(M,x)}function f(){r.value.open(c.value)}function g(M){s.value.splice(M,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),A()}function b(M,x){for(let j=0;j<s.value.length;j++)if(s.value[j].field===M.field&&x!==j){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}const E=t.nodeModel.properties.api_input_field_list;for(let j=0;j<E.length;j++)if(E[j].variable===M.field){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}x!==null?s.value.splice(x,1,M):s.value.push(M),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),A()}function _(M){c.value=M,r.value.close()}const S=M=>{var x;if(M.input_type==="PasswordInput")return"******";if(M.default_value){const E=(x=M.option_list)==null?void 0:x.filter(j=>M.default_value.indexOf(j.value)>-1).map(j=>j.label).join(",");return E||M.default_value}if(M.default_value!==void 0)return M.default_value};function A(){if(!n.value)return;const x=n.value.$el.querySelector(".el-table__body-wrapper tbody");x&&yr.create(x,{animation:150,ghostClass:"ghost-row",onEnd:E=>{if(E.oldIndex===void 0||E.newIndex===void 0)return;const j=[...s.value],[D]=j.splice(E.oldIndex,1);j.splice(E.newIndex,0,D),s.value=j,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return qr(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(M=>M.assignment_method==="user_input").forEach(M=>{s.value.push(M)}),s.value.forEach((M,x)=>{switch(M.label=M.label||M.name,M.field=M.field||M.variable,M.required=M.required||M.isRequired,M.type){case"input":M.input_type="TextInput";break;case"select":M.input_type="SingleSelect";break;case"date":M.input_type="DatePicker";break}}),Te.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Te.set(t.nodeModel.properties,"user_input_config",c),A()}),(M,x)=>{var H;const E=ee("AppIcon"),j=ee("el-button"),D=ee("Plus"),V=ee("el-icon"),U=ee("el-table-column"),L=ee("el-tag"),F=ee("el-switch"),X=ee("el-tooltip"),q=ee("el-table");return Se(),en(Sr,null,[K("div",aW,[K("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},_e(c.value.title),9,lW),K("div",null,[k(j,{type:"primary",link:"",onClick:f},{default:N(()=>[k(E,{iconName:"app-setting"})]),_:1}),K("span",sW,[k(j,{link:"",type:"primary",onClick:x[0]||(x[0]=B=>v())},{default:N(()=>[k(V,{class:"mr-4"},{default:N(()=>[k(D)]),_:1}),ot(" "+_e(M.$t("common.add")),1)]),_:1})])])]),((H=t.nodeModel.properties.user_input_field_list)==null?void 0:H.length)>0?(Se(),lt(q,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[k(U,{prop:"field",label:M.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:B})=>[K("span",{title:B.field,class:"ellipsis-1"},_e(B.field),9,uW)]),_:1},8,["label"]),k(U,{prop:"label",label:M.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:B})=>[B.label&&B.label.input_type==="TooltipLabel"?(Se(),en("span",cW,[K("span",{title:B.label.label,class:"ellipsis-1"},_e(B.label.label),9,fW)])):(Se(),en("span",dW,[K("span",{title:B.label,class:"ellipsis-1"},_e(B.label),9,pW)]))]),_:1},8,["label"]),k(U,{label:M.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:N(({row:B})=>[B.input_type==="TextInput"?(Se(),lt(L,{key:0,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):kn("",!0),B.input_type==="PasswordInput"?(Se(),lt(L,{key:1,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):kn("",!0),B.input_type==="Slider"?(Se(),lt(L,{key:2,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):kn("",!0),B.input_type==="SwitchInput"?(Se(),lt(L,{key:3,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):kn("",!0),B.input_type==="SingleSelect"?(Se(),lt(L,{key:4,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):kn("",!0),B.input_type==="MultiSelect"?(Se(),lt(L,{key:5,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):kn("",!0),B.input_type==="RadioCard"?(Se(),lt(L,{key:6,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):kn("",!0),B.input_type==="DatePicker"?(Se(),lt(L,{key:7,type:"info",class:"info-tag"},{default:N(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):kn("",!0)]),_:1},8,["label"]),k(U,{prop:"default_value",label:M.$t("dynamicsForm.default.label")},{default:N(({row:B})=>[K("span",{title:B.default_value,class:"ellipsis-1"},_e(S(B)),9,hW)]),_:1},8,["label"]),k(U,{label:M.$t("common.required")},{default:N(({row:B})=>[K("div",{onClick:x[1]||(x[1]=Qt(()=>{},["stop"]))},[k(F,{disabled:"",size:"small",modelValue:B.required,"onUpdate:modelValue":G=>B.required=G},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(U,{label:M.$t("common.operation"),align:"left",width:"90"},{default:N(({row:B,$index:G})=>[K("span",vW,[k(X,{effect:"dark",content:M.$t("common.modify"),placement:"top"},{default:N(()=>[k(j,{type:"primary",text:"",onClick:Qt(Z=>v(B,G),["stop"])},{default:N(()=>[k(E,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(X,{effect:"dark",content:M.$t("common.delete"),placement:"top"},{default:N(()=>[k(j,{type:"primary",text:"",onClick:Z=>g(G)},{default:N(()=>[k(E,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(rW,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:b},null,512),k(iW,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:_},null,512)],64)}}}),yW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.8146C19.9934%202%2020.1647%202.07183%2020.29%202.19934L26.4756%208.49255C26.5982%208.61722%2026.6668%208.78505%2026.6668%208.95987V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.02637C20.1089%202.05793%2020.2089%202.11704%2020.2899%202.19936L26.4755%208.49256C26.5261%208.54408%2026.5675%208.60297%2026.5987%208.66668H21.5135C20.6776%208.66668%2020%207.98906%2020%207.15317V2.02637Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M10.7636%2013.5757H20.8727C20.9932%2013.5757%2021.0909%2013.6734%2021.0909%2013.7939V14.8121C21.0909%2014.9326%2020.9932%2015.0303%2020.8727%2015.0303H10.7636C10.6431%2015.0303%2010.5454%2014.9326%2010.5454%2014.8121V13.7939C10.5454%2013.6734%2010.6431%2013.5757%2010.7636%2013.5757ZM10.7636%2017.9394H20.8727C20.9932%2017.9394%2021.0909%2018.0371%2021.0909%2018.1576V19.1757C21.0909%2019.2962%2020.9932%2019.3939%2020.8727%2019.3939H10.7636C10.6431%2019.3939%2010.5454%2019.2962%2010.5454%2019.1757V18.1576C10.5454%2018.0371%2010.6431%2017.9394%2010.7636%2017.9394ZM10.7636%2022.303H16.1454C16.2659%2022.303%2016.3636%2022.4007%2016.3636%2022.5212V23.5394C16.3636%2023.6599%2016.2659%2023.7576%2016.1454%2023.7576H10.7636C10.6431%2023.7576%2010.5454%2023.6599%2010.5454%2023.5394V22.5212C10.5454%2022.4007%2010.6431%2022.303%2010.7636%2022.303Z'%20fill='white'/%3e%3c/svg%3e",gW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%2314C0FF'/%3e%3cpath%20d='M20%202.05988C20.072%202.09264%2020.1383%202.13825%2020.1953%202.19526L26.4714%208.4714C26.5284%208.52841%2026.574%208.59467%2026.6068%208.66666H21.3333C20.597%208.66666%2020%208.06971%2020%207.33333V2.05988Z'%20fill='%2311A3D9'/%3e%3cpath%20d='M11.3335%2016C12.4381%2016%2013.3335%2015.1046%2013.3335%2014C13.3335%2012.8954%2012.4381%2012%2011.3335%2012C10.2289%2012%209.3335%2012.8954%209.3335%2014C9.3335%2015.1046%2010.2289%2016%2011.3335%2016Z'%20fill='white'/%3e%3cpath%20d='M22.2785%2014.9317C22.4218%2014.7884%2022.6668%2014.8899%2022.6668%2015.0925V24.0645C22.6668%2024.1901%2022.565%2024.2919%2022.4394%2024.2919H13.4674L13.4587%2024.2918H9.56142C9.35877%2024.2918%209.25728%2024.0468%209.40058%2023.9035L14.366%2018.938C14.4549%2018.8492%2014.5989%2018.8492%2014.6877%2018.938L16.48%2020.7302L22.2785%2014.9317Z'%20fill='white'/%3e%3c/svg%3e",bW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.05994C20.072%202.0927%2020.1383%202.13831%2020.1953%202.19532L26.4714%208.47146C26.5284%208.52847%2026.574%208.59473%2026.6068%208.66672H21.3333C20.597%208.66672%2020%208.06977%2020%207.33339V2.05994Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M19.976%2012.8794C20.254%2012.9447%2020.4595%2013.1796%2020.4872%2013.4638L20.6106%2014.7297C20.6546%2015.1805%2020.2459%2015.5429%2019.8037%2015.4455L16.7344%2014.7691C16.5577%2014.7302%2016.3944%2014.8747%2016.4116%2015.0548L17.1297%2022.5884C17.1297%2022.7046%2017.1151%2022.7812%2017.0891%2022.8249C17.0254%2024.3752%2015.7484%2025.6124%2014.1825%2025.6124C12.5759%2025.6124%2011.2734%2024.31%2011.2734%2022.7033C11.2734%2021.0967%2012.5759%2019.7942%2014.1825%2019.7942C14.8467%2019.7942%2015.4589%2020.0168%2015.9485%2020.3914L15.274%2012.6749C15.2345%2012.2228%2015.6485%2011.8642%2016.0904%2011.9678L19.976%2012.8794Z'%20fill='white'/%3e%3c/svg%3e",_W="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%202.5C4%201.94772%204.44772%201.5%205%201.5H14.7929C14.9255%201.5%2015.0527%201.55268%2015.1464%201.64645L19.8536%206.35355C19.9473%206.44732%2020%206.5745%2020%206.70711V21.5C20%2022.0523%2019.5523%2022.5%2019%2022.5H5C4.44772%2022.5%204%2022.0523%204%2021.5V2.5Z'%20fill='%238F959E'/%3e%3cpath%20d='M15%201.54492C15.054%201.56949%2015.1037%201.6037%2015.1464%201.64646L19.8536%206.35357C19.8963%206.39632%2019.9305%206.44602%2019.9551%206.50001H16C15.4477%206.50001%2015%206.0523%2015%205.50001V1.54492Z'%20fill='%23646A73'/%3e%3cpath%20d='M14.288%209.86441C13.7422%209.34739%2013.026%209.09082%2012.1353%209.09082C11.1347%209.09082%2010.3505%209.41162%209.78235%2010.065C9.30108%2010.6265%209.04179%2011.1646%209.00471%2012.013C9.00384%2012.033%209.00309%2012.0697%209.00247%2012.1122C9.00043%2012.2508%209.11287%2012.3635%209.25147%2012.3635H9.84253C9.98%2012.3635%2010.0914%2012.2525%2010.0936%2012.1151C10.0943%2012.0737%2010.0951%2012.038%2010.0961%2012.0189C10.1251%2011.4328%2010.278%2011.1262%2010.5508%2010.7851C10.8953%2010.3259%2011.4006%2010.0999%2012.0943%2010.0999C12.7134%2010.0999%2013.1776%2010.2578%2013.4979%2010.5782C13.8033%2010.8963%2013.9625%2011.3294%2013.9625%2011.8726C13.9625%2012.2435%2013.8281%2012.5967%2013.5549%2012.948C13.4678%2013.0568%2013.3425%2013.1862%2012.9388%2013.5899C12.3012%2014.1474%2011.9073%2014.601%2011.6993%2015.0468C11.5282%2015.3888%2011.441%2015.7775%2011.441%2016.1954V16.4772C11.441%2016.6153%2011.5529%2016.7272%2011.691%2016.7272H12.2956C12.4336%2016.7272%2012.5456%2016.6153%2012.5456%2016.4772V16.1954C12.5456%2015.8413%2012.6327%2015.5237%2012.8133%2015.2141C12.9486%2014.9841%2013.1223%2014.8038%2013.4251%2014.5389C14.0321%2013.9897%2014.3689%2013.6625%2014.5198%2013.4705C14.8821%2012.9923%2015.0671%2012.4446%2015.0671%2011.8454C15.0671%2011.0185%2014.8075%2010.355%2014.288%209.86441ZM11.7046%2017.8181C11.5666%2017.8181%2011.4546%2017.93%2011.4546%2018.0681V18.659C11.4546%2018.7971%2011.5666%2018.909%2011.7046%2018.909H12.2956C12.4336%2018.909%2012.5456%2018.7971%2012.5456%2018.659V18.0681C12.5456%2017.93%2012.4336%2017.8181%2012.2956%2017.8181H11.7046Z'%20fill='white'/%3e%3c/svg%3e",wW={class:"flex-between"},EW={class:"flex align-center"},OW={class:"line-height-22 mt-4"},SW={class:"flex-between"},xW={class:"flex align-center"},AW={class:"line-height-22 mt-4"},TW={class:"flex-between"},MW={class:"flex align-center"},kW={class:"line-height-22 mt-4"},PW={class:"flex-between"},RW={class:"flex align-center"},NW={class:"line-height-22 mt-4"},CW={class:"dialog-footer"},DW=er({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,s=$e(!1),c=$e(!1),v=$e(""),f=$e(!1),g=$e(),b=$e(),_=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],S=["JPG","JPEG","PNG","GIF"],A=["MP3","WAV","OGG","ACC","M4A"],M=$e({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function x(L){s.value=!0,Nv(()=>{M.value={...M.value,...L}})}function E(){s.value=!1}const j=L=>{M.value.otherExtensions=M.value.otherExtensions.filter(F=>F!==L)},D=()=>{c.value=!0,Nv(()=>{b.value.input.focus()})},V=()=>{if(v.value){if(v.value=v.value.toUpperCase(),M.value.otherExtensions.includes(v.value)||_.includes(v.value)||S.includes(v.value)||A.includes(v.value)){c.value=!1,v.value="",lI(St("common.fileUpload.existingExtensionsTip"));return}M.value.otherExtensions.push(v.value)}c.value=!1,v.value=""};async function U(){const L=g.value;L&&await L.validate().then(()=>{const F=Te.cloneDeep(M.value);a("refresh",F),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:x}),(L,F)=>{const X=ee("el-slider"),q=ee("el-form-item"),H=ee("el-text"),B=ee("el-checkbox"),G=ee("el-card"),Z=ee("el-tag"),Q=ee("el-input"),fe=ee("el-button"),se=ee("el-space"),ce=ee("el-form"),be=ee("el-dialog");return Se(),lt(be,{title:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":F[16]||(F[16]=we=>s.value=we),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":E,"append-to-body":"",width:"800"},{footer:N(()=>[K("span",CW,[k(fe,{onClick:Qt(E,["prevent"])},{default:N(()=>[ot(_e(L.$t("common.cancel")),1)]),_:1}),k(fe,{type:"primary",onClick:F[15]||(F[15]=we=>U()),loading:f.value},{default:N(()=>[ot(_e(L.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(ce,{"label-position":"top",ref_key:"fieldFormRef",ref:g,model:M.value,"require-asterisk-position":"right"},{default:N(()=>[k(q,{label:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:N(()=>[k(X,{modelValue:M.value.maxFiles,"onUpdate:modelValue":F[0]||(F[0]=we=>M.value.maxFiles=we),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),k(q,{label:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:N(()=>[k(X,{modelValue:M.value.fileLimit,"onUpdate:modelValue":F[1]||(F[1]=we=>M.value.fileLimit=we),"show-input":"","show-input-controls":!1,min:1,max:1e3},null,8,["modelValue"])]),_:1},8,["label"]),k(q,{label:L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:N(()=>[k(G,{shadow:"hover",class:Ds(["card-checkbox cursor w-full mb-8",M.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:F[4]||(F[4]=Qt(we=>M.value.document=!M.value.document,["stop"]))},{default:N(()=>[K("div",wW,[K("div",EW,[F[17]||(F[17]=K("img",{class:"mr-12",src:yW,alt:""},null,-1)),K("div",null,[K("p",OW,[ot(_e(L.$t("common.fileUpload.document"))+" ",1),k(H,{class:"color-secondary"},{default:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),K("p",null,_e(_.join("、")),1)])]),k(B,{modelValue:M.value.document,"onUpdate:modelValue":F[2]||(F[2]=we=>M.value.document=we),onChange:F[3]||(F[3]=we=>M.value.document=!M.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),k(G,{shadow:"hover",class:Ds(["card-checkbox cursor w-full mb-8",M.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:F[7]||(F[7]=Qt(we=>M.value.image=!M.value.image,["stop"]))},{default:N(()=>[K("div",SW,[K("div",xW,[F[18]||(F[18]=K("img",{class:"mr-12",src:gW,alt:""},null,-1)),K("div",null,[K("p",AW,[ot(_e(L.$t("common.fileUpload.image"))+" ",1),k(H,{class:"color-secondary"},{default:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),K("p",null,_e(S.join("、")),1)])]),k(B,{modelValue:M.value.image,"onUpdate:modelValue":F[5]||(F[5]=we=>M.value.image=we),onChange:F[6]||(F[6]=we=>M.value.image=!M.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),k(G,{shadow:"hover",class:Ds(["card-checkbox cursor w-full mb-8",M.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:F[10]||(F[10]=Qt(we=>M.value.audio=!M.value.audio,["stop"]))},{default:N(()=>[K("div",TW,[K("div",MW,[F[19]||(F[19]=K("img",{class:"mr-12",src:bW,alt:""},null,-1)),K("div",null,[K("p",kW,[ot(_e(L.$t("common.fileUpload.audio"))+" ",1),k(H,{class:"color-secondary"},{default:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),K("p",null,_e(A.join("、")),1)])]),k(B,{modelValue:M.value.audio,"onUpdate:modelValue":F[8]||(F[8]=we=>M.value.audio=we),onChange:F[9]||(F[9]=we=>M.value.audio=!M.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),k(G,{shadow:"hover",class:Ds(["card-checkbox cursor w-full mb-8",M.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:F[14]||(F[14]=Qt(we=>M.value.other=!M.value.other,["stop"]))},{default:N(()=>[K("div",PW,[K("div",RW,[F[20]||(F[20]=K("img",{class:"mr-12",width:32,src:_W,alt:""},null,-1)),K("div",null,[K("p",NW,[ot(_e(L.$t("common.fileUpload.other"))+" ",1),k(H,{class:"color-secondary"},{default:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),k(se,{wrap:"",size:2,class:"mt-4"},{default:N(()=>[(Se(!0),en(Sr,null,ao(M.value.otherExtensions,we=>(Se(),lt(Z,{key:we,closable:"","disable-transitions":!1,onClose:me=>j(we),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:N(()=>[ot(_e(we),1)]),_:2},1032,["onClose"]))),128)),c.value?(Se(),lt(Q,{key:0,ref_key:"InputRef",ref:b,modelValue:v.value,"onUpdate:modelValue":F[11]||(F[11]=we=>v.value=we),size:"small",onKeyup:aI(V,["enter"]),onBlur:V},null,8,["modelValue"])):(Se(),lt(fe,{key:1,class:"button-new-tag",size:"small",onClick:Qt(D,["stop"])},{default:N(()=>[ot(" + "+_e(L.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),k(B,{modelValue:M.value.other,"onUpdate:modelValue":F[12]||(F[12]=we=>M.value.other=we),onChange:F[13]||(F[13]=we=>M.value.other=!M.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),jW={class:"dialog-footer"},IW=er({__name:"ChatFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e(!1),c=$e(!1),v=$e(null),f=$e({field:"",label:""}),g=ch({label:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:St("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=$e(!1),_=(M,x)=>{M&&(f.value=Te.cloneDeep(M),c.value=!0,v.value=x),b.value=!0},S=()=>{b.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},A=async M=>{M&&await M.validate(x=>{x&&a("refresh",f.value,v.value)})};return t({open:_,close:S}),(M,x)=>{const E=ee("el-input"),j=ee("el-form-item"),D=ee("el-form"),V=ee("el-button"),U=ee("el-dialog");return Se(),lt(U,{title:c.value?M.$t("common.param.editParam"):M.$t("common.param.addParam"),modelValue:b.value,"onUpdate:modelValue":x[3]||(x[3]=L=>b.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:N(()=>[K("span",jW,[k(V,{onClick:Qt(S,["prevent"])},{default:N(()=>[ot(_e(M.$t("common.cancel")),1)]),_:1}),k(V,{type:"primary",onClick:x[2]||(x[2]=L=>A(r.value)),loading:s.value},{default:N(()=>[ot(_e(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right"},{default:N(()=>[k(j,{label:M.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:g.field},{default:N(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":x[0]||(x[0]=L=>f.value.field=L),maxlength:64,placeholder:M.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:N(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":x[1]||(x[1]=L=>f.value.label=L),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),LW={class:"flex-between mb-16"},$W={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},FW={class:"ml-4"},UW=["title"],VW=["title"],BW={class:"mr-4"},WW=er({__name:"ChatFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(),r=$e([]);function s(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}function v(f,g){for(let b=0;b<r.value.length;b++)if(r.value[b].field===f.field&&g!==b){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}return qr(()=>{t.nodeModel.properties.chat_input_field_list&&(r.value=Te.cloneDeep(t.nodeModel.properties.chat_input_field_list)),Te.set(t.nodeModel.properties,"chat_input_field_list",r)}),(f,g)=>{var x;const b=ee("AppIcon"),_=ee("el-button"),S=ee("el-table-column"),A=ee("el-tooltip"),M=ee("el-table");return Se(),en(Sr,null,[K("div",LW,[K("h5",$W,_e(f.$t("views.applicationWorkflow.variable.chat")),1),K("div",null,[K("span",FW,[k(_,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>s())},{default:N(()=>[k(b,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(f.$t("common.add")),1)]),_:1})])])]),((x=t.nodeModel.properties.chat_input_field_list)==null?void 0:x.length)>0?(Se(),lt(M,{key:0,data:t.nodeModel.properties.chat_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:N(()=>[k(S,{prop:"field",label:f.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:E})=>[K("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,UW)]),_:1},8,["label"]),k(S,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:E})=>[K("span",null,[K("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,VW)])]),_:1},8,["label"]),k(S,{label:f.$t("common.operation"),align:"left",width:"90"},{default:N(({row:E,$index:j})=>[K("span",BW,[k(A,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:N(()=>[k(_,{type:"primary",text:"",onClick:Qt(D=>s(E,j),["stop"])},{default:N(()=>[k(b,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(A,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:N(()=>[k(_,{type:"primary",text:"",onClick:D=>c(j)},{default:N(()=>[k(b,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(IW,{ref_key:"ChatFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),GW={class:"flex-between"},zW={class:"flex align-center"},HW={class:"mr-4"},XW={class:"flex-between"},qW={class:"mr-4"},YW={class:"flex"},KW={class:"flex-between"},ZW={class:"mr-4"},JW={class:"flex"},QW={class:"w-full"},eG={class:"flex-between w-full"},tG=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=$e(null),v=$e(null),f=$e(),g=$e(),b=$e(),_=$e(),S={name:"",desc:"",prologue:St("views.application.form.defaultPrologue")},A=Q=>Q.ctrlKey===!0?(Q.preventDefault(),!0):(Q.stopPropagation(),!0);function M(Q){Te.set(s.nodeModel.properties.nodeData,"prologue",Q)}const x=Zn({get:()=>(s.nodeModel.properties.nodeData||Te.set(s.nodeModel.properties,"nodeData",S),s.nodeModel.properties.nodeData),set:Q=>{Te.set(s.nodeModel.properties,"nodeData",Q)}}),E=$e(),j=()=>{var Q;return x.value.ttsModelEnable&&!x.value.ttsModelId&&x.value.ttsType==="TTS"?Promise.reject({node:s.nodeModel,errMessage:St("views.application.form.voicePlay.requiredMessage")}):x.value.sttModelEnable&&!x.value.sttModelId?Promise.reject({node:s.nodeModel,errMessage:St("views.application.form.voiceInput.requiredMessage")}):(Q=E.value)==null?void 0:Q.validate().catch(fe=>Promise.reject({node:s.nodeModel,errMessage:fe}))},D=t();function V(){var fe;const Q=r.value==="systemManage"?{modelType:"STT",workspaceId:(fe=D.value)==null?void 0:fe.workspaceId}:{modelType:"STT"};go({type:"model",systemType:r.value}).getSelectModelList(Q).then(se=>{c.value=Te.groupBy(se==null?void 0:se.data,"provider")})}function U(){var fe;const Q=r.value==="systemManage"?{modelType:"TTS",workspaceId:(fe=D.value)==null?void 0:fe.workspaceId}:{modelType:"TTS"};go({type:"model",systemType:r.value}).getSelectModelList(Q).then(se=>{v.value=Te.groupBy(se==null?void 0:se.data,"provider")})}function L(){Nv(()=>{var Q;x.value.ttsModelId?(Q=f.value)==null||Q.reset_default(x.value.ttsModelId,a):H({})})}function F(){x.value.ttsModelEnable||(x.value.ttsModelId="",x.value.ttsType="BROWSER")}function X(){x.value.sttModelEnable||(x.value.sttModelId="")}const q=()=>{var fe;const Q=x.value.ttsModelId;if(!Q){Xd(St("views.application.form.voicePlay.requiredMessage"));return}(fe=f.value)==null||fe.open(Q,a,x.value.ttsModelParamsSetting)},H=Q=>{x.value.ttsModelParamsSetting=Q},B=()=>{const Q={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["ppt","doc"]};x.value.fileUploadEnable&&(x.value.fileUploadSetting=x.value.fileUploadSetting||Q),s.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},G=()=>{var Q;(Q=_.value)==null||Q.open(x.value.fileUploadSetting)},Z=Q=>{x.value.fileUploadSetting=Q};return qr(()=>{Te.set(s.nodeModel,"validate",j),s.nodeModel.properties.nodeData.ttsType||Te.set(s.nodeModel.properties.nodeData,"ttsType","BROWSER"),U(),V()}),(Q,fe)=>{const se=ee("el-input"),ce=ee("el-form-item"),be=ee("el-tooltip"),we=ee("el-button"),me=ee("el-switch"),He=ee("el-checkbox"),Je=ee("el-radio"),yt=ee("el-radio-group"),Be=ee("Operation"),Yt=ee("el-icon"),Kt=ee("el-form");return Se(),lt(Fo,{nodeModel:Q.nodeModel},{default:N(()=>[k(Kt,{onSubmit:fe[13]||(fe[13]=Qt(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:E},{default:N(()=>[k(ce,{label:Q.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Qn(St)("views.application.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[k(se,{modelValue:x.value.name,"onUpdate:modelValue":fe[0]||(fe[0]=Lt=>x.value.name=Lt),maxlength:"64",placeholder:Qn(St)("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:fe[1]||(fe[1]=Lt=>{var An;return x.value.name=(An=x.value.name)==null?void 0:An.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(ce,{label:Q.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:N(()=>[k(se,{modelValue:x.value.desc,"onUpdate:modelValue":fe[2]||(fe[2]=Lt=>x.value.desc=Lt),placeholder:Q.$t("views.application.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(ce,{label:Q.$t("views.application.form.prologue")},{default:N(()=>[k(os,{onWheel:A,title:Q.$t("views.application.form.prologue"),modelValue:x.value.prologue,"onUpdate:modelValue":fe[3]||(fe[3]=Lt=>x.value.prologue=Lt),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label"]),k(ce,null,{label:N(()=>[K("div",GW,[K("div",zW,[K("span",HW,_e(Q.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),k(be,{effect:"dark",content:Q.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),K("div",null,[x.value.fileUploadEnable?(Se(),lt(we,{key:0,type:"primary",link:"",onClick:G,class:"mr-4"},{default:N(()=>[k(gr,{iconName:"app-setting",class:"mr-4"})]),_:1})):kn("",!0),k(me,{size:"small",modelValue:x.value.fileUploadEnable,"onUpdate:modelValue":fe[4]||(fe[4]=Lt=>x.value.fileUploadEnable=Lt),onChange:B},null,8,["modelValue"])])])]),_:1}),k(mW,{ref_key:"UserInputFieldTableFef",ref:g,"node-model":Q.nodeModel},null,8,["node-model"]),k(tW,{ref_key:"ApiInputFieldTableFef",ref:b,"node-model":Q.nodeModel},null,8,["node-model"]),k(WW,{ref:"ChatFieldTeble","node-model":Q.nodeModel},null,8,["node-model"]),k(ce,null,{label:N(()=>[K("div",XW,[K("span",qW,_e(Q.$t("views.application.form.voiceInput.label")),1),K("div",YW,[x.value.sttModelEnable?(Se(),lt(He,{key:0,modelValue:x.value.sttAutoSend,"onUpdate:modelValue":fe[5]||(fe[5]=Lt=>x.value.sttAutoSend=Lt)},{default:N(()=>[ot(_e(Q.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):kn("",!0),k(me,{class:"ml-8",size:"small",modelValue:x.value.sttModelEnable,"onUpdate:modelValue":fe[6]||(fe[6]=Lt=>x.value.sttModelEnable=Lt),onChange:X},null,8,["modelValue"])])])]),default:N(()=>[Ra(k(Df,{onWheel:A,modelValue:x.value.sttModelId,"onUpdate:modelValue":fe[7]||(fe[7]=Lt=>x.value.sttModelId=Lt),placeholder:Q.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[th,x.value.sttModelEnable]])]),_:1}),k(ce,null,{label:N(()=>[K("div",KW,[K("span",ZW,_e(Q.$t("views.application.form.voicePlay.label")),1),K("div",JW,[x.value.ttsModelEnable?(Se(),lt(He,{key:0,modelValue:x.value.ttsAutoplay,"onUpdate:modelValue":fe[8]||(fe[8]=Lt=>x.value.ttsAutoplay=Lt)},{default:N(()=>[ot(_e(Q.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):kn("",!0),k(me,{class:"ml-8",size:"small",modelValue:x.value.ttsModelEnable,"onUpdate:modelValue":fe[9]||(fe[9]=Lt=>x.value.ttsModelEnable=Lt),onChange:F},null,8,["modelValue"])])])]),default:N(()=>[K("div",QW,[Ra(k(yt,{modelValue:x.value.ttsType,"onUpdate:modelValue":fe[10]||(fe[10]=Lt=>x.value.ttsType=Lt)},{default:N(()=>[k(Je,{label:Q.$t("views.application.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),k(Je,{label:Q.$t("views.application.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[th,x.value.ttsModelEnable]])]),K("div",eG,[x.value.ttsType==="TTS"&&x.value.ttsModelEnable?(Se(),lt(Df,{key:0,onWheel:A,modelValue:x.value.ttsModelId,"onUpdate:modelValue":fe[11]||(fe[11]=Lt=>x.value.ttsModelId=Lt),placeholder:Q.$t("views.application.form.voicePlay.placeholder"),options:v.value,onChange:fe[12]||(fe[12]=Lt=>L()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):kn("",!0),x.value.ttsType==="TTS"&&x.value.ttsModelEnable?(Se(),lt(we,{key:1,onClick:q,disabled:!x.value.ttsModelId,class:"ml-8"},{default:N(()=>[k(Yt,null,{default:N(()=>[k(Yt,null,{default:N(()=>[k(Be)]),_:1})]),_:1})]),_:1},8,["disabled"])):kn("",!0)])]),_:1})]),_:1},8,["model"]),k(iM,{ref_key:"TTSModeParamSettingDialogRef",ref:f,onRefresh:H},null,512),k(DW,{ref_key:"FileUploadSettingDialogRef",ref:_,"node-model":Q.nodeModel,onRefresh:Z},null,8,["node-model"])]),_:1},8,["nodeModel"])}}}),nG=Zd(tG,[["__scopeId","data-v-9868f90e"]]);class rG extends Uo{constructor(t){super(t,nG)}}class oG extends Vo{constructor(t,n){super(t,n)}get_width(){return 600}}const iG={type:"base-node",model:oG,view:rG},aG=Object.freeze(Object.defineProperty({__proto__:null,default:iG},Symbol.toStringTag,{value:"Module"})),lG={class:"handle flex-between lighter"},sG={class:"flex align-center"},uG={key:0,class:"info"},cG={key:0,class:"mt-8"},fG=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:fl(),type:"IF",condition:"and"},{conditions:[],id:fl(),type:"ELSE",condition:"and"}]},a=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),r=(x,E,j)=>{const V=Te.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(U=>U.id===E.id?{...U,height:x.height,index:j}:U);Te.set(t.nodeModel.properties,"branch_condition_list",V),_(t.nodeModel.properties.nodeData.branch,!0)},s=Zn({get:()=>(t.nodeModel.properties.nodeData||(Te.set(t.nodeModel.properties,"nodeData",n),_(n.branch,!0)),t.nodeModel.properties.nodeData),set:x=>{Te.set(t.nodeModel.properties,"nodeData",x)}}),c=$e(),v=$e(),f=()=>{var E;const x=[(E=c.value)==null?void 0:E.validate(),...v.value.map(j=>j.validate())];return Promise.all(x).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};function g(x){const{oldIndex:E,newIndex:j}=x;if(E===void 0||j===void 0)return;const D=Te.cloneDeep(t.nodeModel.properties.nodeData.branch);if(E===D.length-1||j===D.length-1)return;const V={...D[E],type:D[j].type,id:D[j].id},U={...D[j],type:D[E].type,id:D[E].id};D[j]=V,D[E]=U,Te.set(t.nodeModel.properties.nodeData,"branch",D)}function b(){const x=Te.cloneDeep(t.nodeModel.properties.nodeData.branch),E={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(x.length-1),id:fl(),condition:"and"};x.splice(x.length-1,0,E),_(x,!0),Te.set(t.nodeModel.properties.nodeData,"branch",x)}function _(x,E){const j=Te.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),D=x.map((V,U)=>{const L=j.find(F=>F.id===V.id);if(L)return{index:U,height:L.height,id:V.id};if(E)return{index:U,height:12,id:V.id}}).filter(V=>V);Te.set(t.nodeModel.properties,"branch_condition_list",D),t.nodeModel.refreshBranch()}function S(x){const E=Te.cloneDeep(t.nodeModel.properties.nodeData.branch);E[x].conditions.push({field:[],compare:"",value:""}),Te.set(t.nodeModel.properties.nodeData,"branch",E)}function A(x,E){const j=Te.cloneDeep(t.nodeModel.properties.nodeData.branch);if(j[x].conditions.splice(E,1),j[x].conditions.length===0){const V=j.splice(x,1).map(U=>t.nodeModel.id+"_"+U.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(U=>V.includes(U.sourceAnchorId)).map(U=>U.id)),_(j,!1),j.forEach((U,L)=>{U.type==="ELSE IF "+(L+1)&&(U.type="ELSE IF "+L)})}Te.set(t.nodeModel.properties.nodeData,"branch",j)}function M(x,E,j){if(["is_null","is_not_null","is_true","is_not_true"].includes(x)){const D=Te.cloneDeep(t.nodeModel.properties.nodeData.branch);D[E].conditions[j].value=1,Te.set(t.nodeModel.properties.nodeData,"branch",D)}}return qr(()=>{Te.set(t.nodeModel,"validate",f)}),(x,E)=>{const j=ee("el-option"),D=ee("el-select"),V=ee("el-form-item"),U=ee("el-col"),L=ee("el-input"),F=ee("AppIcon"),X=ee("el-button"),q=ee("el-row"),H=ee("Plus"),B=ee("el-icon"),G=ee("el-card"),Z=ee("el-form"),Q=Hd("resize");return Se(),lt(Fo,{nodeModel:x.nodeModel},{default:N(()=>[k(Z,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:E[0]||(E[0]=Qt(()=>{},["prevent"]))},{default:N(()=>[k(Qn(JI),{ref:"el",modelValue:s.value.branch,disabled:s.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:g},{default:N(()=>[(Se(!0),en(Sr,null,ao(s.value.branch,(fe,se)=>Ra((Se(),lt(G,{key:fe.id,shadow:"never",class:Ds(["drag-card card-never mb-8",{"no-drag":se===s.value.branch.length-1||s.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:N(()=>[K("div",lG,[K("span",sG,[E[1]||(E[1]=K("img",{src:QI,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),ot(" "+_e(fe.type),1)]),fe.conditions.length>1?(Se(),en("div",uG,[K("span",null,_e(x.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),k(D,{teleported:!1,modelValue:fe.condition,"onUpdate:modelValue":ce=>fe.condition=ce,size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[k(j,{label:x.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),k(j,{label:x.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),K("span",null,_e(x.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):kn("",!0)]),se!==s.value.branch.length-1?(Se(),en("div",cG,[(Se(!0),en(Sr,null,ao(fe.conditions,(ce,be)=>(Se(),lt(q,{key:be,gutter:8},{default:N(()=>[k(U,{span:11},{default:N(()=>[k(V,{prop:"branch."+se+".conditions."+be+".field",rules:{type:"array",required:!0,message:x.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.applicationWorkflow.variable.placeholder"),modelValue:ce.field,"onUpdate:modelValue":we=>ce.field=we},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(U,{span:6},{default:N(()=>[k(V,{prop:"branch."+se+".conditions."+be+".compare",rules:{required:!0,message:x.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:N(()=>[k(D,{onWheel:a,teleported:!1,modelValue:ce.compare,"onUpdate:modelValue":we=>ce.compare=we,placeholder:x.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:we=>M(we,se,be)},{default:N(()=>[(Se(!0),en(Sr,null,ao(Qn(wI),(we,me)=>(Se(),lt(j,{key:me,label:we.label,value:we.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(U,{span:6},{default:N(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(ce.compare)?kn("",!0):(Se(),lt(V,{key:0,prop:"branch."+se+".conditions."+be+".value",rules:{required:!0,message:x.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:N(()=>[k(L,{modelValue:ce.value,"onUpdate:modelValue":we=>ce.value=we,placeholder:x.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),k(U,{span:1},{default:N(()=>[k(X,{disabled:se===0&&be===0,link:"",type:"info",class:"mt-4",onClick:we=>A(se,be)},{default:N(()=>[k(F,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):kn("",!0),se!==s.value.branch.length-1?(Se(),lt(X,{key:1,link:"",type:"primary",onClick:ce=>S(se)},{default:N(()=>[k(B,{class:"mr-4"},{default:N(()=>[k(H)]),_:1}),ot(" "+_e(x.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):kn("",!0)]),_:2},1032,["class"])),[[Q,ce=>r(ce,fe,se)]])),128))]),_:1},8,["modelValue","disabled"]),k(X,{link:"",type:"primary",onClick:b},{default:N(()=>[k(B,{class:"mr-4"},{default:N(()=>[k(H)]),_:1}),ot(" "+_e(x.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}}),dG=Zd(fG,[["__scopeId","data-v-05396cf6"]]);class pG extends Uo{constructor(t){super(t,dG)}}const hG=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class vG extends Vo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=hG(c,g);f.push({x:n+r/2-10,y:v?a-s/2+75+_+b.height/2:a-15,id:`${t}_${b.id}_right`,type:"right"})}return f}}const mG={type:"condition-node",model:vG,view:pG},yG=Object.freeze(Object.defineProperty({__proto__:null,default:mG},Symbol.toStringTag,{value:"Module"})),gG={class:"flex-between"},bG={class:"mr-4"},_G={class:"flex-between"},wG={class:"flex-between"},EG={class:"flex-between"},OG={class:"flex-between"},SG={class:"flex-between"},xG={class:"flex-between"},AG=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=f=>f.ctrlKey===!0?(f.preventDefault(),!0):(f.stopPropagation(),!0),a={databaseTypeType:"content",databaseType:"mysql",databaseTypeReference:[],hostType:"content",host:"",hostReference:[],portType:"content",port:3306,portReference:[],databaseNameType:"content",databaseName:"",databaseNameReference:[],usernameType:"content",username:"",usernameReference:[],passwordType:"content",password:"",passwordReference:[],sqlType:"content",sql:"",sqlReference:[],isResult:!1},r=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:f=>{Te.set(t.nodeModel.properties,"nodeData",f)}}),s=$e(),c=$e(),v=()=>{var f;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(f=s.value)==null?void 0:f.validate()]).catch(g=>Promise.reject({node:t.nodeModel,errMessage:g}))};return qr(()=>{var f;typeof((f=t.nodeModel.properties.nodeData)==null?void 0:f.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),Te.set(t.nodeModel,"validate",v)}),(f,g)=>{const b=ee("el-option"),_=ee("el-select"),S=ee("el-form-item"),A=ee("el-input"),M=ee("el-form"),x=ee("el-card");return Se(),lt(Fo,{nodeModel:f.nodeModel},{default:N(()=>[k(x,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(M,{onSubmit:g[21]||(g[21]=Qt(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"databaseNodeFormRef",ref:s},{default:N(()=>[k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")},{label:N(()=>[K("div",gG,[K("div",bG,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")),1)]),k(_,{teleported:!1,modelValue:r.value.databaseTypeType,"onUpdate:modelValue":g[0]||(g[0]=E=>r.value.databaseTypeType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.databaseTypeType==="content"?(Se(),lt(_,{key:0,teleported:!1,modelValue:r.value.databaseType,"onUpdate:modelValue":g[1]||(g[1]=E=>r.value.databaseType=E),size:"small"},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.mysql"),value:"mysql"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.postgresql"),value:"postgresql"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.sqlserver"),value:"sqlserver"},null,8,["label"])]),_:1},8,["modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseTypeReference,"onUpdate:modelValue":g[2]||(g[2]=E=>r.value.databaseTypeReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.host.label")},{label:N(()=>[K("div",_G,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.host.label")),1),k(_,{teleported:!1,modelValue:r.value.hostType,"onUpdate:modelValue":g[3]||(g[3]=E=>r.value.hostType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.hostType==="content"?(Se(),lt(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.host.placeholder"),"show-word-limit":"",modelValue:r.value.host,"onUpdate:modelValue":g[4]||(g[4]=E=>r.value.host=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.hostReference,"onUpdate:modelValue":g[5]||(g[5]=E=>r.value.hostReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.port.label")},{label:N(()=>[K("div",wG,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.port.label")),1),k(_,{teleported:!1,modelValue:r.value.portType,"onUpdate:modelValue":g[6]||(g[6]=E=>r.value.portType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.portType==="content"?(Se(),lt(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.port.placeholder"),"show-word-limit":"",modelValue:r.value.port,"onUpdate:modelValue":g[7]||(g[7]=E=>r.value.port=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.portReference,"onUpdate:modelValue":g[8]||(g[8]=E=>r.value.portReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")},{label:N(()=>[K("div",EG,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")),1),k(_,{teleported:!1,modelValue:r.value.databaseNameType,"onUpdate:modelValue":g[9]||(g[9]=E=>r.value.databaseNameType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.databaseNameType==="content"?(Se(),lt(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.placeholder"),"show-word-limit":"",modelValue:r.value.databaseName,"onUpdate:modelValue":g[10]||(g[10]=E=>r.value.databaseName=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseNameReference,"onUpdate:modelValue":g[11]||(g[11]=E=>r.value.databaseNameReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.username.label")},{label:N(()=>[K("div",OG,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.username.label")),1),k(_,{teleported:!1,modelValue:r.value.usernameType,"onUpdate:modelValue":g[12]||(g[12]=E=>r.value.usernameType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.usernameType==="content"?(Se(),lt(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.username.placeholder"),"show-word-limit":"",modelValue:r.value.username,"onUpdate:modelValue":g[13]||(g[13]=E=>r.value.username=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.usernameReference,"onUpdate:modelValue":g[14]||(g[14]=E=>r.value.usernameReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.password.label")},{label:N(()=>[K("div",SG,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.password.label")),1),k(_,{teleported:!1,modelValue:r.value.passwordType,"onUpdate:modelValue":g[15]||(g[15]=E=>r.value.passwordType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.passwordType==="content"?(Se(),lt(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.password.placeholder"),"show-word-limit":"",modelValue:r.value.password,"onUpdate:modelValue":g[16]||(g[16]=E=>r.value.password=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.passwordReference,"onUpdate:modelValue":g[17]||(g[17]=E=>r.value.passwordReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(S,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")},{label:N(()=>[K("div",xG,[K("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")),1),k(_,{teleported:!1,modelValue:r.value.sqlType,"onUpdate:modelValue":g[18]||(g[18]=E=>r.value.sqlType=E),size:"small",style:{width:"85px"}},{default:N(()=>[k(b,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(b,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.sqlType==="content"?(Se(),lt(A,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.sql.placeholder"),"show-word-limit":"",modelValue:r.value.sql,"onUpdate:modelValue":g[19]||(g[19]=E=>r.value.sql=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.sqlReference,"onUpdate:modelValue":g[20]||(g[20]=E=>r.value.sqlReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class TG extends Uo{constructor(t){super(t,AG)}}const MG={type:"database-node",model:Vo,view:TG},kG=Object.freeze(Object.defineProperty({__proto__:null,default:MG},Symbol.toStringTag,{value:"Module"})),PG={class:"title-decoration-1 mb-8"},RG=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},a=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{Te.set(t.nodeModel.properties,"nodeData",r)}});return(r,s)=>{const c=ee("el-form-item"),v=ee("el-form"),f=ee("el-card");return Se(),lt(Fo,{nodeModel:r.nodeModel},{default:N(()=>[K("h5",PG,_e(r.$t("views.applicationWorkflow.nodeSetting")),1),k(f,{shadow:"never",class:"card-never"},{default:N(()=>[k(v,{onSubmit:s[1]||(s[1]=Qt(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:N(()=>[k(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:N(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.chatLog.documentPlaceholder"),modelValue:a.value.documentList,"onUpdate:modelValue":s[0]||(s[0]=g=>a.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let NG=class extends Uo{constructor(t){super(t,RG)}};const CG={type:"document-extract-node",model:Vo,view:NG},DG=Object.freeze(Object.defineProperty({__proto__:null,default:CG},Symbol.toStringTag,{value:"Module"})),jG={class:"dialog-footer"},IG=er({__name:"AddFormCollect",props:{title:{default:St("common.param.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=$e(!1),s=$e(),c=$e({}),v=$e(!1),f=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},b=()=>{var _;(_=s.value)==null||_.validate().then(()=>{var S;a.addFormField((S=s.value)==null?void 0:S.getData()),g()})};return t({close:g,open:f}),(_,S)=>{const A=ee("el-button"),M=ee("el-dialog");return Se(),lt(M,{title:_.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=x=>r.value=x),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:N(()=>[K("span",jG,[k(A,{onClick:S[1]||(S[1]=Qt(x=>r.value=!1,["prevent"]))},{default:N(()=>[ot(_e(_.$t("common.cancel")),1)]),_:1}),k(A,{type:"primary",onClick:S[2]||(S[2]=x=>b()),loading:v.value},{default:N(()=>[ot(_e(_.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(rE,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=x=>c.value=x),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),LG={class:"dialog-footer"},$G=er({__name:"EditFormCollect",props:{title:{default:St("common.param.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=$e(!1),s=$e(),c=$e({}),v=$e(0),f=$e(!1),g=(S,A)=>{r.value=!0,c.value=S,v.value=A},b=()=>{r.value=!1,c.value={}},_=()=>{var S;(S=s.value)==null||S.validate().then(()=>{var A;a.editFormField((A=s.value)==null?void 0:A.getData(),v.value),b()})};return t({close:b,open:g}),(S,A)=>{const M=ee("el-button"),x=ee("el-dialog");return Se(),lt(x,{title:S.title,modelValue:r.value,"onUpdate:modelValue":A[3]||(A[3]=E=>r.value=E),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:N(()=>[K("span",LG,[k(M,{onClick:A[1]||(A[1]=Qt(E=>r.value=!1,["prevent"]))},{default:N(()=>[ot(_e(S.$t("common.cancel")),1)]),_:1}),k(M,{type:"primary",onClick:A[2]||(A[2]=E=>_()),loading:f.value},{default:N(()=>[ot(_e(S.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(rE,{modelValue:c.value,"onUpdate:modelValue":A[0]||(A[0]=E=>c.value=E),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),FG={class:"title-decoration-1 mb-8"},UG={class:"flex align-center"},VG={class:"mr-4"},BG={class:"flex-between"},WG={class:"lighter"},GG=["title"],zG={key:0},HG=["title"],XG={key:1},qG=["title"],YG=["title"],KG={class:"mr-4"},ZG=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(),r=(D,V)=>{const U=A.value.form_field_list.map((L,F)=>V===F?Te.cloneDeep(D):Te.cloneDeep(L));A.value.form_field_list=U,c()},s=D=>{if(A.value.form_field_list.some(V=>V.field===D.field)){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+D.field);return}A.value.form_field_list=Te.cloneDeep([...A.value.form_field_list,D]),c()},c=()=>{const D=[{label:St("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...A.value.form_field_list.map(V=>({value:V.field,label:typeof V.label=="string"?V.label:V.label.label}))];Te.set(t.nodeModel.properties.config,"fields",D),t.nodeModel.clear_next_node_field(!1),j()},v=$e(),f=$e(),g=()=>{var D;(D=v.value)==null||D.open()},b=(D,V)=>{var U;(U=f.value)==null||U.open(Te.cloneDeep(D),V)},_=D=>{A.value.form_field_list=A.value.form_field_list.filter(V=>V.field!==D.field),c()},S=$e({isResult:!0,form_content_format:`${St("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${St("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),A=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",S.value),t.nodeModel.properties.nodeData),set:D=>{Te.set(t.nodeModel.properties,"nodeData",D)}}),M=D=>{var V;if(D.default_value){const U=(V=D.option_list)==null?void 0:V.filter(L=>D.default_value.indexOf(L.value)>-1).map(L=>L.label).join(",");return U||D.default_value}if(D.default_value!==void 0)return D.default_value},x=()=>{var D;return(D=n.value)==null?void 0:D.validate()};function E(D){Te.set(t.nodeModel.properties.nodeData,"form_content_format",D)}function j(){if(!a.value)return;const V=a.value.$el.querySelector(".el-table__body-wrapper tbody");V&&yr.create(V,{animation:150,ghostClass:"ghost-row",onEnd:U=>{if(U.oldIndex===void 0||U.newIndex===void 0)return;const L=[...A.value.form_field_list],[F]=L.splice(U.oldIndex,1);L.splice(U.newIndex,0,F),A.value.form_field_list=L,c()}})}return qr(()=>{Te.set(t.nodeModel,"validate",x),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(D,V)=>{const U=ee("AppIcon"),L=ee("el-tooltip"),F=ee("MdEditorMagnify"),X=ee("el-form-item"),q=ee("Plus"),H=ee("el-icon"),B=ee("el-button"),G=ee("el-table-column"),Z=ee("el-tag"),Q=ee("el-switch"),fe=ee("el-table"),se=ee("el-form"),ce=ee("el-card");return Se(),lt(Fo,{nodeModel:D.nodeModel},{default:N(()=>[K("h5",FG,_e(D.$t("views.applicationWorkflow.nodeSetting")),1),k(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(se,{onSubmit:V[4]||(V[4]=Qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[k(X,{label:D.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:N(()=>[K("div",UG,[K("div",VG,[K("span",null,[ot(_e(D.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),V[5]||(V[5]=K("span",{class:"color-danger"},"*",-1))])]),k(L,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(D.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:N(()=>[k(U,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[k(F,{title:D.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:A.value.form_content_format,"onUpdate:modelValue":V[0]||(V[0]=be=>A.value.form_content_format=be),style:{height:"150px"},onSubmitDialog:E},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(X,{label:D.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:V[3]||(V[3]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",BG,[K("h5",WG,_e(D.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),k(B,{link:"",type:"primary",onClick:V[1]||(V[1]=be=>g())},{default:N(()=>[k(H,{class:"mr-4"},{default:N(()=>[k(q)]),_:1}),ot(" "+_e(D.$t("common.add")),1)]),_:1})])]),default:N(()=>[A.value.form_field_list.length>0?(Se(),lt(fe,{key:0,class:"border",data:A.value.form_field_list,ref_key:"tableRef",ref:a,"row-key":"field"},{default:N(()=>[k(G,{prop:"field",label:D.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:N(({row:be})=>[K("span",{title:be.field,class:"ellipsis-1"},_e(be.field),9,GG)]),_:1},8,["label"]),k(G,{prop:"label",label:D.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:be})=>[be.label&&be.label.input_type==="TooltipLabel"?(Se(),en("span",zG,[K("span",{title:be.label.label,class:"ellipsis-1"},_e(be.label.label),9,HG)])):(Se(),en("span",XG,[K("span",{title:be.label,class:"ellipsis-1"},_e(be.label),9,qG)]))]),_:1},8,["label"]),k(G,{label:D.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:N(({row:be})=>[k(Z,{type:"info",class:"info-tag"},{default:N(()=>{var we;return[ot(_e((we=Qn(sI).find(me=>me.value===be.input_type))==null?void 0:we.label),1)]}),_:2},1024)]),_:1},8,["label"]),k(G,{prop:"default_value",label:D.$t("dynamicsForm.default.label")},{default:N(({row:be})=>[K("span",{title:be.default_value,class:"ellipsis-1"},_e(M(be)),9,YG)]),_:1},8,["label"]),k(G,{label:D.$t("common.required"),width:"85"},{default:N(({row:be})=>[K("div",{onClick:V[2]||(V[2]=Qt(()=>{},["stop"]))},[k(Q,{disabled:"",size:"small",modelValue:be.required,"onUpdate:modelValue":we=>be.required=we},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(G,{label:D.$t("common.operation"),align:"left",width:"90"},{default:N(({row:be,$index:we})=>[K("span",KG,[k(L,{effect:"dark",content:D.$t("common.modify"),placement:"top"},{default:N(()=>[k(B,{type:"primary",text:"",onClick:Qt(me=>b(be,we),["stop"])},{default:N(()=>[k(U,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(L,{effect:"dark",content:D.$t("common.delete"),placement:"top"},{default:N(()=>[k(B,{type:"primary",text:"",onClick:me=>_(be)},{default:N(()=>[k(U,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(IG,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),k($G,{ref_key:"editFormCollectRef",ref:f,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class JG extends Uo{constructor(t){super(t,ZG)}}const QG={type:"form-node",model:Vo,view:JG},ez=Object.freeze(Object.defineProperty({__proto__:null,default:QG},Symbol.toStringTag,{value:"Module"})),tz={class:"title-decoration-1 mb-8"},nz={class:"flex-between mb-8"},rz={class:"lighter"},oz={class:"flex w-full"},iz={class:"flex-between mb-8"},az={class:"lighter"},lz={class:"flex-between mb-8"},sz={class:"lighter"},uz=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],s=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),c=$e({activeTab:"params",method:"GET",url:"",timeout:30,headers:[{}],params:[{}],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),v=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:S=>{Te.set(t.nodeModel.properties,"nodeData",S)}}),f=()=>{var S;return(S=n.value)==null?void 0:S.validate()},g=()=>{const S=v.value.activeTab,A=v.value.contentType,M={...v.value};S==="params"?M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]):S==="headers"?M.headers[v.value.headers.length-1].name.trim()!==""&&(M.headers=[...M.headers||[],{name:"",value:""}]):S==="body"&&["form-data","x-www-form-urlencoded"].includes(A)&&M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]),v.value=M};function b(S){const A=v.value.activeTab,M=v.value.contentType,x={...v.value};A==="params"?x.params=(x.params||[]).filter((E,j)=>j!==S):A==="headers"?x.headers=(x.headers||[]).filter((E,j)=>j!==S):A==="body"&&["form-data","x-www-form-urlencoded"].includes(M)&&(x.params=(x.params||[]).filter((E,j)=>j!==S)),v.value=x}function _(S){Te.set(t.nodeModel.properties.nodeData,"body",S)}return qr(()=>{Te.set(t.nodeModel,"validate",f),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(S,A)=>{const M=ee("el-option"),x=ee("el-select"),E=ee("el-input"),j=ee("el-form-item"),D=ee("el-input-number"),V=ee("el-table-column"),U=ee("Delete"),L=ee("el-icon"),F=ee("el-button"),X=ee("el-tooltip"),q=ee("el-table"),H=ee("el-tab-pane"),B=ee("el-radio"),G=ee("el-radio-group"),Z=ee("el-tabs"),Q=ee("el-form"),fe=ee("el-card");return Se(),lt(Fo,{nodeModel:S.nodeModel},{default:N(()=>[K("h5",tz,_e(S.$t("views.applicationWorkflow.nodeSetting")),1),k(fe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(Q,{onSubmit:A[11]||(A[11]=Qt(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[K("div",nz,[K("span",rz,[ot(_e(S.$t("views.applicationWorkflow.nodes.httpNode.configuration")),1),A[12]||(A[12]=K("span",{class:"color-danger"},"*",-1))])]),K("div",oz,[k(x,{modelValue:c.value.method,"onUpdate:modelValue":A[0]||(A[0]=se=>c.value.method=se),style:{"max-width":"85px"},class:"mr-8",onChange:A[1]||(A[1]=se=>c.value.method=null)},{default:N(()=>[(Se(),en(Sr,null,ao(a,se=>k(M,{key:se,label:se,value:se},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),k(j,{prop:"url",rules:{message:Qn(St)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:N(()=>[k(E,{modelValue:v.value.url,"onUpdate:modelValue":A[2]||(A[2]=se=>v.value.url=se),placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:s,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),K("div",iz,[K("span",az,[ot(_e(S.$t("views.applicationWorkflow.nodes.httpNode.timeout")),1),A[13]||(A[13]=K("span",{class:"color-danger"},"*",-1))]),k(D,{modelValue:c.value.timeout,"onUpdate:modelValue":A[3]||(A[3]=se=>c.value.timeout=se)},null,8,["modelValue"])]),K("div",lz,[K("span",sz,[ot(_e(S.$t("views.applicationWorkflow.nodes.httpNode.params")),1),A[14]||(A[14]=K("span",{class:"color-danger"},"*",-1))])]),k(Z,{modelValue:v.value.activeTab,"onUpdate:modelValue":A[10]||(A[10]=se=>v.value.activeTab=se),class:"w-full"},{default:N(()=>[k(H,{name:"params",label:"Params"},{default:N(()=>[k(q,{data:v.value.params,border:"",style:{width:"100%"}},{default:N(()=>[k(V,{prop:"name",label:"Name"},{default:N(se=>[k(E,{modelValue:se.row.name,"onUpdate:modelValue":ce=>se.row.name=ce,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(V,{prop:"value",label:"Value"},{default:N(se=>[k(E,{modelValue:se.row.value,"onUpdate:modelValue":ce=>se.row.value=ce,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(V,{label:"",width:"50"},{default:N(se=>[se.$index!==v.value.params.length-1?(Se(),lt(X,{key:0,effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:N(()=>[k(F,{type:"primary",text:"",onClick:ce=>b(se.$index)},{default:N(()=>[k(L,null,{default:N(()=>[k(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(H,{name:"authorization",label:"Authorization"},{default:N(()=>[k(G,{modelValue:v.value.authType,"onUpdate:modelValue":A[7]||(A[7]=se=>v.value.authType=se)},{default:N(()=>[k(B,{label:"No Auth",value:"none"}),k(B,{label:"Bearer Token",value:"bearer"}),k(B,{label:"Basic Auth",value:"basic"}),v.value.authType==="bearer"?(Se(),lt(E,{key:0,placeholder:S.$t("views.applicationWorkflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:v.value.token,"onUpdate:modelValue":A[4]||(A[4]=se=>v.value.token=se),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):kn("",!0),v.value.authType==="basic"?(Se(),lt(E,{key:1,placeholder:S.$t("views.applicationWorkflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:v.value.username,"onUpdate:modelValue":A[5]||(A[5]=se=>v.value.username=se),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):kn("",!0),v.value.authType==="basic"?(Se(),lt(E,{key:2,placeholder:S.$t("views.applicationWorkflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:v.value.password,"onUpdate:modelValue":A[6]||(A[6]=se=>v.value.password=se),clearable:"",onWheel:s},null,8,["placeholder","modelValue"])):kn("",!0)]),_:1},8,["modelValue"])]),_:1}),k(H,{name:"headers",label:"Headers"},{default:N(()=>[k(q,{data:v.value.headers,border:"",style:{width:"100%"}},{default:N(()=>[k(V,{prop:"name",label:"Name"},{default:N(se=>[k(E,{modelValue:se.row.name,"onUpdate:modelValue":ce=>se.row.name=ce,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(V,{prop:"value",label:"Value"},{default:N(se=>[k(E,{modelValue:se.row.value,"onUpdate:modelValue":ce=>se.row.value=ce,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(V,{label:"",width:"50"},{default:N(se=>[se.$index!==v.value.headers.length-1?(Se(),lt(X,{key:0,effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:N(()=>[k(F,{type:"primary",text:"",onClick:ce=>b(se.$index)},{default:N(()=>[k(L,null,{default:N(()=>[k(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(H,{name:"body",label:"Body"},{default:N(()=>[k(G,{modelValue:v.value.contentType,"onUpdate:modelValue":A[9]||(A[9]=se=>v.value.contentType=se)},{default:N(()=>[(Se(),en(Sr,null,ao(r,se=>k(B,{key:se,label:se,value:se},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(v.value.contentType)?(Se(),lt(q,{key:0,data:v.value.params,border:"",style:{width:"100%"}},{default:N(()=>[k(V,{prop:"name",label:"Name"},{default:N(se=>[k(E,{modelValue:se.row.name,"onUpdate:modelValue":ce=>se.row.name=ce,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(V,{prop:"value",label:"Value"},{default:N(se=>[k(E,{modelValue:se.row.value,"onUpdate:modelValue":ce=>se.row.value=ce,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(V,{label:"",width:"50"},{default:N(se=>[se.$index!==0?(Se(),lt(X,{key:0,effect:"dark",content:S.$t("common.delete"),placement:"top"},{default:N(()=>[k(F,{type:"primary",text:"",onClick:ce=>b(se.$index)},{default:N(()=>[k(L,null,{default:N(()=>[k(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)]),_:1})]),_:1},8,["data"])):kn("",!0),["json","xml","raw-text"].includes(v.value.contentType)?(Se(),lt(os,{key:1,title:S.$t("views.applicationWorkflow.nodes.httpNode.body"),modelValue:v.value.body,"onUpdate:modelValue":A[8]||(A[8]=se=>v.value.body=se),style:{height:"150px"},onSubmitDialog:_},null,8,["title","modelValue"])):kn("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}}),cz=Zd(uz,[["__scopeId","data-v-ac24d5c2"]]);class fz extends Uo{constructor(t){super(t,cz)}}const dz={type:"http-node",model:Vo,view:fz},pz=Object.freeze(Object.defineProperty({__proto__:null,default:dz},Symbol.toStringTag,{value:"Module"})),hz={class:"title-decoration-1 mb-8"},vz={class:"flex-between w-full"},mz={class:"flex align-center"},yz={class:"mr-4"},gz={class:"flex align-center"},bz={class:"mr-4"},_z={class:"flex-between w-full"},wz={class:"flex align-center"},Ez={class:"mr-4"},Oz={class:"flex"},Sz=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=$e(null),v=$e(),f=$e(),g=()=>{var L;return(L=f.value)==null?void 0:L.validate().catch(F=>Promise.reject({node:s.nodeModel,errMessage:F}))},b=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),S={modelId:"",system:"",prompt:`{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null},A=Zn({get:()=>(s.nodeModel.properties.nodeData||Te.set(s.nodeModel.properties,"nodeData",S),s.nodeModel.properties.nodeData),set:L=>{Te.set(s.nodeModel.properties,"nodeData",L)}}),M=t();function x(){var F;const L=r.value==="systemManage"?{modelType:"TTI",workspaceId:(F=M.value)==null?void 0:F.workspaceId}:{modelType:"TTI"};go({type:"model",systemType:r.value}).getSelectModelList(L).then(X=>{c.value=Te.groupBy(X==null?void 0:X.data,"provider")})}const E=()=>{Nv(()=>{var L;A.value.modelId?(L=v.value)==null||L.reset_default(A.value.modelId,a):D({})})},j=L=>{var F;L&&((F=v.value)==null||F.open(L,a,A.value.modelParamsSetting))};function D(L){Te.set(s.nodeModel.properties.nodeData,"modelParamsSetting",L)}function V(L){Te.set(s.nodeModel.properties.nodeData,"prompt",L)}function U(L){Te.set(s.nodeModel.properties.nodeData,"negative_prompt",L)}return qr(()=>{x(),Te.set(s.nodeModel,"validate",g)}),(L,F)=>{const X=ee("AppIcon"),q=ee("el-button"),H=ee("ModelSelect"),B=ee("el-form-item"),G=ee("el-tooltip"),Z=ee("el-switch"),Q=ee("el-form"),fe=ee("el-card");return Se(),lt(Fo,{"node-model":L.nodeModel},{default:N(()=>[K("h5",hz,_e(L.$t("views.applicationWorkflow.nodeSetting")),1),k(fe,{shadow:"never",class:"card-never"},{default:N(()=>[k(Q,{onSubmit:F[6]||(F[6]=Qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:N(()=>[k(B,{label:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:N(()=>[K("div",vz,[K("div",null,[K("span",null,[ot(_e(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),F[7]||(F[7]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{disabled:!A.value.modelId,type:"primary",link:"",onClick:F[0]||(F[0]=se=>j(A.value.modelId)),onRefreshForm:D},{default:N(()=>[k(X,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(H,{onChange:E,onWheel:b,teleported:!1,modelValue:A.value.modelId,"onUpdate:modelValue":F[1]||(F[1]=se=>A.value.modelId=se),placeholder:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(B,{label:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:L.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[K("div",mz,[K("div",yz,[K("span",null,[ot(_e(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),F[8]||(F[8]=K("span",{class:"color-danger"},"*",-1))])]),k(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:N(()=>[k(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[k(os,{onWheel:b,title:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:A.value.prompt,"onUpdate:modelValue":F[2]||(F[2]=se=>A.value.prompt=se),style:{height:"150px"},onSubmitDialog:V},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(B,{label:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:L.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[K("div",gz,[K("div",bz,[K("span",null,_e(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),k(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:N(()=>[k(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[k(os,{onWheel:b,title:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:A.value.negative_prompt,"onUpdate:modelValue":F[3]||(F[3]=se=>A.value.negative_prompt=se),placeholder:L.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:U},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),k(B,{label:L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[5]||(F[5]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",_z,[K("div",wz,[K("div",Ez,[K("span",null,_e(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",Oz,[k(Z,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":F[4]||(F[4]=se=>A.value.isResult=se)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});let xz=class extends Uo{constructor(t){super(t,Sz)}};const Az={type:"image-generate-node",model:Vo,view:xz},Tz=Object.freeze(Object.defineProperty({__proto__:null,default:Az},Symbol.toStringTag,{value:"Module"})),Mz={class:"title-decoration-1 mb-8"},kz={class:"flex-between w-full"},Pz={class:"flex-between"},Rz={class:"flex align-center"},Nz={class:"flex align-center"},Cz={class:"mr-4"},Dz={class:"flex-between"},jz={class:"flex-between w-full"},Iz={class:"flex align-center"},Lz={class:"mr-4"},$z={class:"flex"},Fz=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=$e(null),v=$e(),f=$e(),g=$e(),b=()=>{var q;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(q=f.value)==null?void 0:q.validate()]).catch(H=>Promise.reject({node:s.nodeModel,errMessage:H}))},_=q=>q.ctrlKey===!0?(q.preventDefault(),!0):(q.stopPropagation(),!0),A={modelId:"",system:"",prompt:`{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null,imageList:["start-node","image"]},M=Zn({get:()=>(s.nodeModel.properties.nodeData||Te.set(s.nodeModel.properties,"nodeData",A),s.nodeModel.properties.nodeData),set:q=>{Te.set(s.nodeModel.properties,"nodeData",q)}}),x=t();function E(){var H;const q=r.value==="systemManage"?{modelType:"VISION",workspaceId:(H=x.value)==null?void 0:H.workspaceId}:{modelType:"VISION"};go({type:"model",systemType:r.value}).getSelectModelList(q).then(B=>{c.value=Te.groupBy(B==null?void 0:B.data,"provider")})}function j(q){Te.set(s.nodeModel.properties.nodeData,"system",q)}function D(q){Te.set(s.nodeModel.properties.nodeData,"prompt",q)}const V=q=>{var H;q&&((H=v.value)==null||H.open(q,a,M.value.modelParamsSetting))},U=$e(),L=q=>{var H;q&&((H=U.value)==null||H.open(q,a))},F=q=>{Te.set(s.nodeModel.properties.nodeData,"system",q)};function X(q){Te.set(s.nodeModel.properties.nodeData,"modelParamsSetting",q)}return qr(()=>{E(),Te.set(s.nodeModel,"validate",b)}),(q,H)=>{const B=ee("el-button"),G=ee("el-form-item"),Z=ee("el-tooltip"),Q=ee("el-option"),fe=ee("el-select"),se=ee("el-input-number"),ce=ee("el-switch"),be=ee("el-form"),we=ee("el-card");return Se(),lt(Fo,{"node-model":q.nodeModel},{default:N(()=>[K("h5",Mz,_e(q.$t("views.applicationWorkflow.nodeSetting")),1),k(we,{shadow:"never",class:"card-never"},{default:N(()=>[k(be,{onSubmit:H[10]||(H[10]=Qt(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:N(()=>[k(G,{label:q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:N(()=>[K("div",kz,[K("div",null,[K("span",null,[ot(_e(Qn(St)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),H[11]||(H[11]=K("span",{class:"color-danger"},"*",-1))])]),k(B,{disabled:!M.value.modelId,type:"primary",link:"",onClick:H[0]||(H[0]=me=>V(M.value.modelId)),onRefreshForm:X},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(Df,{onWheel:_,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":H[1]||(H[1]=me=>M.value.modelId=me),placeholder:q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"VISION"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(G,{label:q.$t("views.application.form.roleSettings.label")},{label:N(()=>[K("div",Pz,[K("div",Rz,[K("span",null,_e(q.$t("views.application.form.roleSettings.label")),1),k(Z,{effect:"dark",content:q.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),k(B,{type:"primary",link:"",onClick:H[2]||(H[2]=me=>L(M.value.modelId)),disabled:!M.value.modelId},{default:N(()=>[k(gr,{iconName:"app-generate-star"})]),_:1},8,["disabled"])])]),default:N(()=>[k(os,{title:q.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":H[3]||(H[3]=me=>M.value.system=me),style:{height:"100px"},onSubmitDialog:j,placeholder:`${Qn(St)("views.applicationWorkflow.SystemPromptPlaceholder")} {{${Qn(St)("views.applicationWorkflow.nodes.startNode.label")}.question}}`},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(G,{label:q.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:q.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:N(()=>[K("div",Nz,[K("div",Cz,[K("span",null,[ot(_e(q.$t("views.application.form.prompt.label")),1),H[12]||(H[12]=K("span",{class:"color-danger"},"*",-1))])]),k(Z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(q.$t("views.application.form.prompt.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[k(os,{onWheel:_,title:q.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":H[4]||(H[4]=me=>M.value.prompt=me),style:{height:"150px"},onSubmitDialog:D},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(G,null,{label:N(()=>[K("div",Dz,[K("div",null,_e(q.$t("views.application.form.historyRecord.label")),1),k(fe,{modelValue:M.value.dialogue_type,"onUpdate:modelValue":H[5]||(H[5]=me=>M.value.dialogue_type=me),type:"small",style:{width:"100px"}},{default:N(()=>[k(Q,{label:q.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(Q,{label:q.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[k(se,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":H[6]||(H[6]=me=>M.value.dialogueNumber=me),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),k(G,{label:q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:N(()=>[ot(_e(q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),H[13]||(H[13]=K("span",{class:"color-danger"},"*",-1))]),default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:q.nodeModel,class:"w-full",placeholder:q.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:M.value.imageList,"onUpdate:modelValue":H[7]||(H[7]=me=>M.value.imageList=me)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(G,{label:q.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:H[9]||(H[9]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",jz,[K("div",Iz,[K("div",Lz,[K("span",null,_e(q.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(Z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(q.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",$z,[k(ce,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":H[8]||(H[8]=me=>M.value.isResult=me)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:X},null,512),k(oM,{onReplace:F,ref_key:"GeneratePromptDialogRef",ref:U},null,512)]),_:1},8,["node-model"])}}});let Uz=class extends Uo{constructor(t){super(t,Fz)}};const Vz={type:"image-understand-node",model:Vo,view:Uz},Bz=Object.freeze(Object.defineProperty({__proto__:null,default:Vz},Symbol.toStringTag,{value:"Module"})),Wz={class:"title-decoration-1 mb-8"},Gz={class:"flex-between"},zz={class:"flex-between"},Hz={class:"flex-between"},Xz=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=$e(),c=$e();function v(){const F=Te.cloneDeep(E.nodeModel.properties.nodeData.branch),X={id:fl(),content:"",isOther:!1};F.splice(F.length-1,0,X),g(F,!0),Te.set(E.nodeModel.properties.nodeData,"branch",F),E.nodeModel.refreshBranch()}function f(F){var Q;const X=Te.cloneDeep(E.nodeModel.properties.nodeData.branch),q=X.find(fe=>fe.id===F);if(!q||q.isOther||X.filter(fe=>!fe.isOther).length<=1)return;const B=`${E.nodeModel.id}_${F}_right`,G=(((Q=E.nodeModel.outgoing)==null?void 0:Q.edges)||[]).filter(fe=>fe.sourceAnchorId===B).map(fe=>fe.id);G.length>0&&E.nodeModel.graphModel.eventCenter.emit("delete_edge",G);const Z=X.filter(fe=>fe.id!==F);Te.set(E.nodeModel.properties.nodeData,"branch",Z),g(Z,!1)}function g(F,X){const q=Te.cloneDeep(E.nodeModel.properties.branch_condition_list?E.nodeModel.properties.branch_condition_list:[]),H=F.map((B,G)=>{const Z=q.find(Q=>Q.id===B.id);if(Z)return{index:G,height:Z.height,id:B.id};if(X)return{index:G,height:12,id:B.id}}).filter(B=>B);Te.set(E.nodeModel.properties,"branch_condition_list",H),E.nodeModel.refreshBranch()}const b=F=>F.ctrlKey===!0?(F.preventDefault(),!0):(F.stopPropagation(),!0),_=F=>{var X;F?(X=c.value)==null||X.reset_default(F,a):A({})},S={modelId:"",branch:[{id:fl(),content:"",isOther:!1},{id:fl(),content:St("views.applicationWorkflow.nodes.intentNode.other"),isOther:!0}],dialogueNumber:1,contentList:[]};function A(F){Te.set(E.nodeModel.properties.nodeData,"modelParamsSetting",F)}const M=F=>{var X;F&&((X=c.value)==null||X.open(F,a,x.value.modelParamsSetting))},x=Zn({get:()=>(E.nodeModel.properties.nodeData||(Te.set(E.nodeModel.properties,"nodeData",S),g(S.branch,!0)),E.nodeModel.properties.nodeData),set:F=>{Te.set(E.nodeModel.properties,"nodeData",F)}}),E=e,j=$e(),D=$e(null),V=()=>{var F;return Promise.all([s.value?s.value.validate():Promise.resolve(""),(F=j.value)==null?void 0:F.validate()]).then(()=>{if(x.value.branch.length!=new Set(x.value.branch.map(X=>X.content)).size)throw St("views.applicationWorkflow.nodes.intentNode.error2")}).catch(X=>Promise.reject({node:E.nodeModel,errMessage:X}))},U=t();function L(){var X;const F=r.value==="systemManage"?{modelType:"LLM",workspaceId:(X=U.value)==null?void 0:X.workspaceId}:{modelType:"LLM"};go({type:"model",systemType:r.value}).getSelectModelList(F).then(q=>{D.value=Te.groupBy(q==null?void 0:q.data,"provider")})}return qr(()=>{var F;L(),typeof((F=E.nodeModel.properties.nodeData)==null?void 0:F.isResult)>"u"&&Ru(E.nodeModel)&&Te.set(E.nodeModel.properties.nodeData,"isResult",!0),Te.set(E.nodeModel,"validate",V)}),(F,X)=>{const q=ee("el-button"),H=ee("el-form-item"),B=ee("el-input-number"),G=ee("Plus"),Z=ee("el-icon"),Q=ee("el-input"),fe=ee("el-col"),se=ee("Delete"),ce=ee("el-row"),be=ee("el-form"),we=ee("el-card");return Se(),lt(Fo,{nodeModel:F.nodeModel},{default:N(()=>[K("h5",Wz,_e(F.$t("views.applicationWorkflow.nodeSetting")),1),k(we,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(be,{onSubmit:X[4]||(X[4]=Qt(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"IntentClassifyNodeFormRef",ref:j,"hide-required-asterisk":""},{default:N(()=>[k(H,{label:F.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:F.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[K("div",Gz,[K("div",null,[K("span",null,[ot(_e(F.$t("views.application.form.aiModel.label")),1),X[5]||(X[5]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{type:"primary",link:"",disabled:!x.value.modelId,onClick:X[0]||(X[0]=me=>M(x.value.modelId)),onRefreshForm:A},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(Df,{onChange:_,onWheel:b,teleported:!1,modelValue:x.value.modelId,"onUpdate:modelValue":X[1]||(X[1]=me=>x.value.modelId=me),placeholder:F.$t("views.application.form.aiModel.placeholder"),options:D.value,onSubmitModel:L,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{prop:"contentList",label:F.$t("views.applicationWorkflow.nodes.intentNode.input.label"),rules:{message:F.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:N(()=>[K("div",zz,[K("div",null,[K("span",null,[ot(_e(F.$t("views.applicationWorkflow.nodes.intentNode.input.label")),1),X[6]||(X[6]=K("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:s,nodeModel:F.nodeModel,class:"w-full",placeholder:F.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:x.value.contentList,"onUpdate:modelValue":X[2]||(X[2]=me=>x.value.contentList=me)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:F.$t("views.application.form.historyRecord.label")},{default:N(()=>[k(B,{modelValue:x.value.dialogueNumber,"onUpdate:modelValue":X[3]||(X[3]=me=>x.value.dialogueNumber=me),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(H,null,{label:N(()=>[K("div",Hz,[K("div",null,[K("span",null,[ot(_e(F.$t("views.applicationWorkflow.nodes.intentNode.classify.label")),1),X[7]||(X[7]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{onClick:v,type:"primary",size:"large",link:""},{default:N(()=>[k(Z,null,{default:N(()=>[k(G)]),_:1})]),_:1})])]),default:N(()=>[K("div",null,[(Se(!0),en(Sr,null,ao(x.value.branch,(me,He)=>(Se(),en("div",{key:me.id,class:"mb-8"},[k(H,{prop:`branch.${He}.content`,rules:{message:F.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder"),trigger:"change",required:!0}},{default:N(()=>[k(ce,{gutter:12,align:"middle"},{default:N(()=>[k(fe,{span:21},{default:N(()=>[k(Q,{modelValue:me.content,"onUpdate:modelValue":Je=>me.content=Je,style:{width:"210px"},disabled:me.isOther,placeholder:F.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder")},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:2},1024),k(fe,{span:3},{default:N(()=>[me.isOther?kn("",!0):(Se(),lt(q,{key:0,link:"",size:"large",disabled:x.value.branch.filter(Je=>!Je.isOther).length<=1,onClick:Je=>f(me.id)},{default:N(()=>[k(Z,null,{default:N(()=>[k(se)]),_:1})]),_:2},1032,["disabled","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["prop","rules"])]))),128))])]),_:1})]),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:A},null,512)]),_:1},8,["nodeModel"])}}});class qz extends Uo{constructor(t){super(t,Xz)}}class Yz extends Vo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let b=0;b<c.length;b++){const _=c[b];f.push({x:n+r/2-10,y:v?a-s/2+397+b*41.36:a-15,id:`${t}_${_.id}_right`,type:"right"}),console.log(a-s/2+397+100/2)}return f}}const Kz={type:"intent-node",model:Yz,view:qz},Zz=Object.freeze(Object.defineProperty({__proto__:null,default:Kz},Symbol.toStringTag,{value:"Module"})),Jz={class:"title-decoration-1 mb-8"},Qz={class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},eH={class:"flex-between"},tH={class:"flex align-center"},nH=["src"],rH={class:"flex-between"},oH={class:"ml-4"},iH={class:"title-decoration-1 mb-8"},aH={key:0,class:"p-8-12"},lH={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},sH={class:"flex-between"},uH={key:0,class:"color-danger"},cH={key:0,class:"p-8-12"},fH={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},dH={class:"flex-between"},pH={key:0,class:"color-danger"},hH=`{
  "math": {
    "url": "your_server",
    "type": "sse"
  }
}`,vH=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e;tE();const n=Zi(),{params:{id:a}}=n,s=is("getApplicationDetail")(),c=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),v=$e(),f=$e(!1),g=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),b={mcpTool:"",mcpTools:[],mcpServers:"",mcpServer:"",mcpSource:"referencing",mcpToolId:"",toolParams:{},tool_form_field:[],params_nested:""},_=$e([]);function S(U){Te.set(t.nodeModel.properties.nodeData,"mcpServers",U)}async function A(){const U=await go({type:"tool",systemType:c.value}).getToolById(E.value.mcpToolId,f);E.value.mcpServers=U.data.code}function M(){if(E.value.mcpSource==="referencing"&&!E.value.mcpToolId){mi(St("views.applicationWorkflow.nodes.mcpNode.mcpToolTip"));return}if(E.value.mcpSource==="custom"&&!E.value.mcpServers){mi(St("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(E.value.mcpServers)}catch{mi(St("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}go({type:"application",systemType:c.value}).getMcpTools(a,E.value.mcpServers,f).then(U=>{var L;E.value.mcpTools=U.data,Xd(St("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),E.value.mcpServer=(L=E.value.mcpTools.find(F=>F.name===E.value.mcpTool))==null?void 0:L.server})}function x(){var L,F,X,q,H,B;E.value.mcpServer=(L=E.value.mcpTools.find(G=>G.name===E.value.mcpTool))==null?void 0:L.server;const U=(F=E.value.mcpTools.find(G=>G.name===E.value.mcpTool))==null?void 0:F.args_schema;E.value.tool_form_field=[];for(const G in U==null?void 0:U.properties){const Z=U==null?void 0:U.properties[G].properties;if(Z){E.value.params_nested=G;for(const Q in Z){let fe="TextInput";Z[Q].type==="string"?fe="TextInput":Z[Q].type==="number"?fe="NumberInput":Z[Q].type==="boolean"?fe="SwitchInput":(Z[Q].type==="array"||Z[Q].type==="object")&&(fe="JsonInput"),E.value.tool_form_field.push({field:Q,label:{input_type:"TooltipLabel",label:Q,attrs:{tooltip:Z[Q].description},props_info:{}},input_type:fe,source:"referencing",required:((X=U.properties[G].required)==null?void 0:X.indexOf(Q))!==-1,props_info:{rules:[{required:((q=U.properties[G].required)==null?void 0:q.indexOf(Q))!==-1,message:St("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{E.value.params_nested="";let Q="TextInput";U.properties[G].type==="string"?Q="TextInput":U.properties[G].type==="number"?Q="NumberInput":U.properties[G].type==="boolean"?Q="SwitchInput":(U.properties[G].type==="array"||U.properties[G].type==="object")&&(Q="JsonInput"),E.value.tool_form_field.push({field:G,label:{input_type:"TooltipLabel",label:G,attrs:{tooltip:U.properties[G].description},props_info:{}},input_type:Q,source:"referencing",required:((H=U.required)==null?void 0:H.indexOf(G))!==-1,props_info:{rules:[{required:((B=U.required)==null?void 0:B.indexOf(G))!==-1,message:St("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}E.value.params_nested?E.value.toolParams={[E.value.params_nested]:{}}:E.value.toolParams={}}const E=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",b),t.nodeModel.properties.nodeData),set:U=>{Te.set(t.nodeModel.properties,"nodeData",U)}}),j=$e(),D=async()=>{if(v.value){const U=E.value.tool_form_field.filter(L=>L.required).map(L=>L.label.label);if(U.length>0){for(const L of U)if(E.value.params_nested){if(!E.value.toolParams[E.value.params_nested][L])return Promise.reject({node:t.nodeModel,errMessage:L+St("dynamicsForm.tip.requiredMessage")})}else if(!E.value.toolParams[L])return Promise.reject({node:t.nodeModel,errMessage:L+St("dynamicsForm.tip.requiredMessage")})}}if(j.value){const U=Te.cloneDeep(E.value);if(!U.mcpServers)return Promise.reject({node:t.nodeModel,errMessage:St("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!U.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:St("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};function V(){var L;const U=c.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(L=s.value)==null?void 0:L.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};go({type:"tool",systemType:c.value}).getAllToolList(U,f).then(F=>{_.value=[...F.data.shared_tools,...F.data.tools].filter(X=>X.isActive)})}return qr(()=>{var U;typeof((U=t.nodeModel.properties.nodeData)==null?void 0:U.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),V(),Te.set(t.nodeModel,"validate",D)}),(U,L)=>{const F=ee("el-option"),X=ee("el-select"),q=ee("el-avatar"),H=ee("ToolIcon"),B=ee("el-tag"),G=ee("el-form-item"),Z=ee("Plus"),Q=ee("el-icon"),fe=ee("el-button"),se=ee("AppIcon"),ce=ee("el-tooltip"),be=ee("el-form"),we=ee("el-text"),me=ee("el-input"),He=ee("el-input-number"),Je=ee("el-switch"),yt=Hd("loading");return Se(),lt(Fo,{nodeModel:U.nodeModel},{default:N(()=>[K("h5",Jz,_e(U.$t("views.applicationWorkflow.nodeSetting")),1),K("div",Qz,[k(be,{onSubmit:L[5]||(L[5]=Qt(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:j,"hide-required-asterisk":""},{default:N(()=>[k(G,{label:"MCP Server Config"},{label:N(()=>[K("div",eH,[L[9]||(L[9]=K("div",null,[ot(" MCP Server Config "),K("span",{class:"color-danger"},"*")],-1)),k(X,{teleported:!1,modelValue:E.value.mcpSource,"onUpdate:modelValue":L[0]||(L[0]=Be=>E.value.mcpSource=Be),size:"small",style:{width:"85px"}},{default:N(()=>[k(F,{label:U.$t("views.applicationWorkflow.nodes.mcpNode.reference"),value:"referencing"},null,8,["label"]),k(F,{label:U.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[E.value.mcpSource==="custom"?(Se(),lt(os,{key:0,onWheel:g,title:"MCP Server Config",modelValue:E.value.mcpServers,"onUpdate:modelValue":L[1]||(L[1]=Be=>E.value.mcpServers=Be),style:{height:"150px"},onSubmitDialog:S,placeholder:hH},null,8,["modelValue"])):(Se(),lt(X,{key:1,modelValue:E.value.mcpToolId,"onUpdate:modelValue":L[2]||(L[2]=Be=>E.value.mcpToolId=Be),filterable:"",onChange:A},{default:N(()=>[(Se(!0),en(Sr,null,ao(_.value,Be=>(Se(),lt(F,{key:Be.id,label:Be.name,value:Be.id},{default:N(()=>[K("div",tH,[Be!=null&&Be.icon?(Se(),lt(q,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:N(()=>[K("img",{src:Qn(Qp)(Be==null?void 0:Be.icon),alt:""},null,8,nH)]),_:2},1024)):(Se(),lt(H,{key:1,size:20,type:Be==null?void 0:Be.toolType,class:"mr-8"},null,8,["type"])),K("span",null,_e(Be.name),1),Be.scope==="SHARED"?(Se(),lt(B,{key:2,type:"info",class:"info-tag ml-8"},{default:N(()=>[ot(_e(Qn(St)("views.shared.title")),1)]),_:1})):kn("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),k(G,null,{label:N(()=>[K("div",rH,[K("span",null,_e(U.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),k(fe,{type:"primary",link:"",onClick:L[3]||(L[3]=Be=>M())},{default:N(()=>[k(Q,{class:"mr-4"},{default:N(()=>[k(Z)]),_:1}),ot(" "+_e(U.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:N(()=>[k(X,{modelValue:E.value.mcpTool,"onUpdate:modelValue":L[4]||(L[4]=Be=>E.value.mcpTool=Be),onChange:x,filterable:""},{default:N(()=>[(Se(!0),en(Sr,null,ao(E.value.mcpTools,Be=>(Se(),lt(F,{key:Be.value,label:Be.name,value:Be.name,class:"flex align-center"},{default:N(()=>[k(ce,{effect:"dark",content:Be.description,placement:"top-start","popper-class":"max-w-350"},{default:N(()=>[k(se,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),K("span",oH,_e(Be.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),K("h5",iH,_e(U.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),E.value.toolParams[E.value.params_nested]?(Se(),en(Sr,{key:0},[E.value.mcpTool?(Se(),en("div",lH,[E.value.mcpTool?Ra((Se(),lt(be,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:L[7]||(L[7]=Qt(()=>{},["prevent"]))},{default:N(()=>[(Se(!0),en(Sr,null,ao(E.value.tool_form_field,Be=>(Se(),lt(G,{key:Be.field,required:Be.required},{label:N(()=>[K("div",sH,[K("div",null,[k(FS,{label:Be.label.label,tooltip:Be.label.attrs.tooltip},null,8,["label","tooltip"]),Be.required?(Se(),en("span",uH,"*")):kn("",!0)]),k(X,{teleported:!1,modelValue:Be.source,"onUpdate:modelValue":Yt=>Be.source=Yt,size:"small",style:{width:"85px"},onChange:L[6]||(L[6]=Yt=>E.value.toolParams[E.value.params_nested]={})},{default:N(()=>[k(F,{label:U.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(F,{label:U.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:N(()=>[Be.source==="custom"&&Be.input_type==="TextInput"?(Se(),lt(me,{key:0,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[E.value.params_nested][Be.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="NumberInput"?(Se(),lt(He,{key:1,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[E.value.params_nested][Be.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="SwitchInput"?(Se(),lt(Je,{key:2,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[E.value.params_nested][Be.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="JsonInput"?(Se(),lt(me,{key:3,modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[E.value.params_nested][Be.label.label]=Yt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):kn("",!0),Be.source==="referencing"?(Se(),lt(oo,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[E.value.params_nested][Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[E.value.params_nested][Be.label.label]=Yt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):kn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[yt,f.value]]):kn("",!0)])):(Se(),en("div",aH,[k(we,{type:"info"},{default:N(()=>[ot(_e(U.$t("common.noData")),1)]),_:1})]))],64)):(Se(),en(Sr,{key:1},[E.value.mcpTool?(Se(),en("div",fH,[E.value.mcpTool?Ra((Se(),lt(be,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:L[8]||(L[8]=Qt(()=>{},["prevent"]))},{default:N(()=>[(Se(!0),en(Sr,null,ao(E.value.tool_form_field,Be=>(Se(),lt(G,{key:Be.field,required:Be.required},{label:N(()=>[K("div",dH,[K("div",null,[k(FS,{label:Be.label.label,tooltip:Be.label.attrs.tooltip},null,8,["label","tooltip"]),Be.required?(Se(),en("span",pH,"*")):kn("",!0)]),k(X,{teleported:!1,modelValue:Be.source,"onUpdate:modelValue":Yt=>Be.source=Yt,size:"small",style:{width:"85px"}},{default:N(()=>[k(F,{label:U.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(F,{label:U.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:N(()=>[Be.source==="custom"&&Be.input_type==="TextInput"?(Se(),lt(me,{key:0,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[Be.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="NumberInput"?(Se(),lt(He,{key:1,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[Be.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="SwitchInput"?(Se(),lt(Je,{key:2,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[Be.label.label]=Yt},null,8,["modelValue","onUpdate:modelValue"])):Be.source==="custom"&&Be.input_type==="JsonInput"?(Se(),lt(me,{key:3,modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[Be.label.label]=Yt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):kn("",!0),Be.source==="referencing"?(Se(),lt(oo,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[Be.label.label],"onUpdate:modelValue":Yt=>E.value.toolParams[Be.label.label]=Yt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):kn("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[yt,f.value]]):kn("",!0)])):(Se(),en("div",cH,[k(we,{type:"info"},{default:N(()=>[ot(_e(U.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class mH extends Uo{constructor(t){super(t,vH)}}const yH={type:"mcp-node",model:Vo,view:mH},gH=Object.freeze(Object.defineProperty({__proto__:null,default:yH},Symbol.toStringTag,{value:"Module"})),bH={class:"p-8"},_H={class:"dialog-footer"},wH=er({__name:"DatabaseSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e({databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,username:"",password:"",database:"mysql"}}),c=$e(!1),v=$e(!1),f=_=>{s.value={databaseSetting:Te.cloneDeep(_.databaseSetting)},c.value=!0},g=async()=>{a("refresh",s.value),c.value=!1};function b(_){_==="mysql"?(s.value.databaseSetting.port=3306,s.value.databaseSetting.database="mysql"):_==="postgresql"&&(s.value.databaseSetting.port=5432,s.value.databaseSetting.database="postgres")}return t({open:f}),(_,S)=>{const A=ee("el-radio"),M=ee("el-card"),x=ee("el-radio-group"),E=ee("el-form-item"),j=ee("el-input"),D=ee("el-col"),V=ee("el-input-number"),U=ee("el-row"),L=ee("el-form"),F=ee("el-scrollbar"),X=ee("el-button"),q=ee("el-dialog"),H=Hd("loading");return Se(),lt(q,{class:"scrollbar-dialog","align-center":"",title:_.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":S[8]||(S[8]=B=>c.value=B),width:"550px","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:N(()=>[K("span",_H,[k(X,{onClick:S[6]||(S[6]=Qt(B=>c.value=!1,["prevent"]))},{default:N(()=>[ot(_e(_.$t("common.cancel")),1)]),_:1}),k(X,{type:"primary",onClick:S[7]||(S[7]=B=>g()),loading:v.value},{default:N(()=>[ot(_e(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(F,{"max-height":"550"},{default:N(()=>[K("div",bH,[Ra((Se(),lt(L,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:N(()=>[k(E,{label:"数据库类型"},{default:N(()=>[k(x,{modelValue:s.value.databaseSetting.type,"onUpdate:modelValue":S[0]||(S[0]=B=>s.value.databaseSetting.type=B),class:"card__radio",onChange:b},{default:N(()=>[k(M,{shadow:"never",class:Ds(["mb-16",s.value.type==="mysql"?"active":""])},{default:N(()=>[k(A,{value:"mysql",size:"small"},{default:N(()=>S[9]||(S[9]=[K("p",{class:"mb-4"}," MYSQL ",-1)])),_:1,__:[9]})]),_:1},8,["class"]),k(M,{shadow:"never",class:Ds(["mb-16",s.value.databaseSetting.type==="postgresql"?"active":""])},{default:N(()=>[k(A,{value:"postgresql",size:"small"},{default:N(()=>S[10]||(S[10]=[K("p",{class:"mb-4"}," POSTGRESQL ",-1)])),_:1,__:[10]})]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1}),k(U,{gutter:10},{default:N(()=>[k(D,{span:12},{default:N(()=>[k(E,null,{label:N(()=>S[11]||(S[11]=[K("div",{class:"flex align-center"},[K("span",{class:"mr-4"},"host")],-1)])),default:N(()=>[k(j,{modelValue:s.value.databaseSetting.host,"onUpdate:modelValue":S[1]||(S[1]=B=>s.value.databaseSetting.host=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),k(D,{span:12},{default:N(()=>[k(E,{label:"port"},{default:N(()=>[k(V,{modelValue:s.value.databaseSetting.port,"onUpdate:modelValue":S[2]||(S[2]=B=>s.value.databaseSetting.port=B),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),k(U,{gutter:10},{default:N(()=>[k(D,{span:12},{default:N(()=>[k(E,null,{label:N(()=>S[12]||(S[12]=[K("div",{class:"flex align-center"},[K("span",{class:"mr-4"},"username")],-1)])),default:N(()=>[k(j,{modelValue:s.value.databaseSetting.username,"onUpdate:modelValue":S[3]||(S[3]=B=>s.value.databaseSetting.username=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1}),k(D,{span:12},{default:N(()=>[k(E,{label:"password"},{default:N(()=>[k(j,{modelValue:s.value.databaseSetting.password,"onUpdate:modelValue":S[4]||(S[4]=B=>s.value.databaseSetting.password=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),k(E,{label:"database"},{default:N(()=>[k(j,{modelValue:s.value.databaseSetting.database,"onUpdate:modelValue":S[5]||(S[5]=B=>s.value.databaseSetting.database=B),"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[H,v.value]])])]),_:1})]),_:1},8,["title","modelValue"])}}}),EH={class:"title-decoration-1 mb-8"},OH={class:"flex-between w-full"},SH={class:"flex-between"},xH={class:"flex-between"},AH={class:"w-full"},TH=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=$e(),c=()=>{var F;(F=s.value)==null||F.open(b.value)},v=F=>F.ctrlKey===!0?(F.preventDefault(),!0):(F.stopPropagation(),!0),f=F=>{var X;F?(X=M.value)==null||X.reset_default(F,a):V({})},g={dialogueNumber:1,dialogueType:"WORK_FLOW",databaseSetting:{type:"mysql",host:"127.0.0.1",port:3306,database:"mysql",username:"root",password:"123456"},questionReferenceAddress:[]},b=Zn({get:()=>(_.nodeModel.properties.nodeData||Te.set(_.nodeModel.properties,"nodeData",g),_.nodeModel.properties.nodeData),set:F=>{Te.set(_.nodeModel.properties,"nodeData",F)}}),_=e,S=$e(),A=$e(null),M=$e(),x=()=>{var F;return(F=S.value)==null?void 0:F.validate().catch(X=>Promise.reject({node:_.nodeModel,errMessage:X}))},E=t();function j(){var X;const F=r.value==="systemManage"?{modelType:"LLM",workspaceId:(X=E.value)==null?void 0:X.workspaceId}:{modelType:"LLM"};go({type:"model",systemType:r.value}).getSelectModelList(F).then(q=>{A.value=Te.groupBy(q==null?void 0:q.data,"provider")})}const D=F=>{var X;F&&((X=M.value)==null||X.open(F,a,b.value.modelParamsSetting))};function V(F){Te.set(_.nodeModel.properties.nodeData,"modelParamsSetting",F)}function U(F){Te.set(_.nodeModel.properties.nodeData,"databaseSetting",F.databaseSetting)}const L=$e();return qr(()=>{var F;j(),typeof((F=_.nodeModel.properties.nodeData)==null?void 0:F.isResult)>"u"&&Ru(_.nodeModel)&&Te.set(_.nodeModel.properties.nodeData,"isResult",!0),Te.set(_.nodeModel,"validate",x),b.value.type||(b.value.type="mysql")}),(F,X)=>{const q=ee("el-button"),H=ee("el-form-item"),B=ee("el-option"),G=ee("el-select"),Z=ee("el-input-number"),Q=ee("el-col"),fe=ee("el-row"),se=ee("el-form"),ce=ee("el-card");return Se(),lt(Fo,{nodeModel:F.nodeModel},{default:N(()=>[K("h5",EH,_e(F.$t("views.applicationWorkflow.nodeSetting")),1),k(ce,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(se,{onSubmit:X[5]||(X[5]=Qt(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:S,"hide-required-asterisk":""},{default:N(()=>[k(H,{label:F.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:F.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[K("div",OH,[K("div",null,[K("span",null,[ot(_e(F.$t("views.application.form.aiModel.label")),1),X[6]||(X[6]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{disabled:!b.value.modelId,type:"primary",link:"",onClick:X[0]||(X[0]=be=>D(b.value.modelId)),onRefreshForm:V},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(Df,{onChange:f,onWheel:v,teleported:!1,modelValue:b.value.modelId,"onUpdate:modelValue":X[1]||(X[1]=be=>b.value.modelId=be),placeholder:F.$t("views.application.form.aiModel.placeholder"),options:A.value,onSubmitModel:j,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{label:F.$t("views.application.form.historyRecord.label")},{label:N(()=>[K("div",SH,[K("div",null,_e(F.$t("views.application.form.historyRecord.label")),1),k(G,{modelValue:b.value.dialogueType,"onUpdate:modelValue":X[2]||(X[2]=be=>b.value.dialogueType=be),type:"small",style:{width:"100px"}},{default:N(()=>[k(B,{label:F.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(B,{label:F.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[k(Z,{modelValue:b.value.dialogueNumber,"onUpdate:modelValue":X[3]||(X[3]=be=>b.value.dialogueNumber=be),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(H,{label:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:N(()=>[K("div",xH,[X[7]||(X[7]=K("span",null,"数据库配置",-1)),k(q,{type:"primary",link:"",onClick:c},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1})])]),default:N(()=>[K("div",AH,[k(fe,null,{default:N(()=>[k(Q,{span:12,class:"color-secondary lighter"},{default:N(()=>X[8]||(X[8]=[ot("数据库类型",-1)])),_:1,__:[8]}),k(Q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(b.value.databaseSetting.type),1)]),_:1}),k(Q,{span:12,class:"color-secondary lighter"},{default:N(()=>X[9]||(X[9]=[ot("host",-1)])),_:1,__:[9]}),k(Q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(b.value.databaseSetting.host),1)]),_:1}),k(Q,{span:12,class:"color-secondary lighter"},{default:N(()=>X[10]||(X[10]=[ot("port",-1)])),_:1,__:[10]}),k(Q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(b.value.databaseSetting.port),1)]),_:1}),k(Q,{span:12,class:"color-secondary lighter"},{default:N(()=>X[11]||(X[11]=[ot("database",-1)])),_:1,__:[11]}),k(Q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(b.value.databaseSetting.database),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(H,{label:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:L,nodeModel:F.nodeModel,class:"w-full",placeholder:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:b.value.questionReferenceAddress,"onUpdate:modelValue":X[4]||(X[4]=be=>b.value.questionReferenceAddress=be)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:M,onRefresh:V},null,512),k(wH,{ref_key:"ParamSettingDialogRef",ref:s,onRefresh:U},null,512)]),_:1},8,["nodeModel"])}}});class MH extends Uo{constructor(t){super(t,TH)}}const kH={type:"nl2sql-node",model:Vo,view:MH},PH=Object.freeze(Object.defineProperty({__proto__:null,default:kH},Symbol.toStringTag,{value:"Module"})),RH={class:"dialog-footer"},NH=er({__name:"ParametersFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array"}],s=$e(),c=$e(!1),v=$e(!1),f=$e(null),g=$e({field:"",label:"",parameterType:"",desc:""}),b=ch({label:[{required:!0,message:St("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:St("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=$e(!1),S=(x,E)=>{x&&(g.value=Te.cloneDeep(x),v.value=!0,f.value=E),_.value=!0},A=()=>{_.value=!1,v.value=!1,f.value=null,g.value={field:"",label:""}},M=async x=>{x&&await x.validate(E=>{E&&a("refresh",g.value,f.value)})};return t({open:S,close:A}),(x,E)=>{const j=ee("el-input"),D=ee("el-form-item"),V=ee("el-option"),U=ee("el-select"),L=ee("el-form"),F=ee("el-button"),X=ee("el-dialog");return Se(),lt(X,{title:v.value?x.$t("common.param.editParam"):x.$t("common.param.addParam"),modelValue:_.value,"onUpdate:modelValue":E[5]||(E[5]=q=>_.value=q),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":A,"append-to-body":""},{footer:N(()=>[K("span",RH,[k(F,{onClick:Qt(A,["prevent"])},{default:N(()=>[ot(_e(x.$t("common.cancel")),1)]),_:1}),k(F,{type:"primary",onClick:E[4]||(E[4]=q=>M(s.value)),loading:c.value},{default:N(()=>[ot(_e(x.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(L,{"label-position":"top",ref_key:"fieldFormRef",ref:s,rules:b,model:g.value,"require-asterisk-position":"right"},{default:N(()=>[k(D,{label:x.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:b.field},{default:N(()=>[k(j,{modelValue:g.value.field,"onUpdate:modelValue":E[0]||(E[0]=q=>g.value.field=q),maxlength:64,placeholder:x.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:x.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:b.label},{default:N(()=>[k(j,{modelValue:g.value.label,"onUpdate:modelValue":E[1]||(E[1]=q=>g.value.label=q),maxlength:64,"show-word-limit":"",placeholder:x.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:x.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),required:!0,prop:"parameterType",rules:b.label},{default:N(()=>[k(U,{modelValue:g.value.parameterType,"onUpdate:modelValue":E[2]||(E[2]=q=>g.value.parameterType=q),placeholder:x.$t("common.selectPlaceholder")+x.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),style:{width:"100%"}},{default:N(()=>[(Se(),en(Sr,null,ao(r,q=>k(V,{key:q.value,label:q.label,value:q.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:x.$t("common.desc"),prop:"desc"},{default:N(()=>[k(j,{modelValue:g.value.desc,"onUpdate:modelValue":E[3]||(E[3]=q=>g.value.desc=q),style:{width:"100%"},rows:2,type:"textarea",placeholder:x.$t("common.descPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),CH={class:"flex-between w-full"},DH={class:"break-all lighter"},jH={class:"ml-4",style:{"margin-top":"-4px"}},IH=["title"],LH=["title"],$H={class:"mr-4"},FH=er({__name:"ParametersFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(),r=$e([]);function s(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1);const g=[{label:St("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Te.set(t.nodeModel.properties.config,"fields",g)}function v(f,g){for(let _=0;_<r.value.length;_++)if(r.value[_].field===f.field&&g!==_){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close();const b=[{label:St("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Te.set(t.nodeModel.properties.config,"fields",b)}return qr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Te.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Te.set(t.nodeModel.properties.nodeData,"variableList",r);const f=[{label:St("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Te.set(t.nodeModel.properties.config,"fields",f)}),(f,g)=>{var x;const b=ee("el-button"),_=ee("el-table-column"),S=ee("el-tag"),A=ee("el-tooltip"),M=ee("el-table");return Se(),en(Sr,null,[K("div",CH,[K("h5",DH,[ot(_e(f.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"))+" ",1),g[1]||(g[1]=K("span",{class:"color-danger"},"*",-1))]),K("span",jH,[k(b,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>s())},{default:N(()=>[k(gr,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((x=t.nodeModel.properties.nodeData.variableList)==null?void 0:x.length)>0?(Se(),lt(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:N(()=>[k(_,{prop:"field",label:f.$t("dynamicsForm.paramForm.field.label"),width:"90"},{default:N(({row:E})=>[K("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,IH)]),_:1},8,["label"]),k(_,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:E})=>[K("span",null,[K("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,LH)])]),_:1},8,["label"]),k(_,{prop:"label",label:f.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType")},{default:N(({row:E})=>[k(S,{type:"info",class:"info-tag"},{default:N(()=>[ot(_e(E.parameterType),1)]),_:2},1024)]),_:1},8,["label"]),k(_,{label:f.$t("common.operation"),align:"left",width:"80"},{default:N(({row:E,$index:j})=>[K("span",$H,[k(A,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:N(()=>[k(b,{type:"primary",text:"",onClick:Qt(D=>s(E,j),["stop"])},{default:N(()=>[k(gr,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(A,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:N(()=>[k(b,{type:"primary",text:"",onClick:D=>c(j)},{default:N(()=>[k(gr,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(NH,{ref_key:"ParametersFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),UH={class:"title-decoration-1 mb-8"},VH={class:"flex-between w-full"},BH={class:"flex-between"},WH=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=e,a=$e(),r=Zi(),{params:{id:s}}=r,c=D=>{var V;D&&((V=a.value)==null||V.open(D,s,M.value.modelParamsSetting))};function v(D){Te.set(n.nodeModel.properties.nodeData,"modelParamsSetting",D)}const f=t(),g=$e(null),b=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),_=Zn(()=>r.path.includes("resource-management")?"systemManage":"workspace");function S(){var V;const D=_.value==="systemManage"?{modelType:"LLM",workspace_id:(V=f.value)==null?void 0:V.workspace_id}:{modelType:"LLM"};go({type:"model",systemType:_.value}).getSelectModelList(D).then(U=>{g.value=Te.groupBy(U==null?void 0:U.data,"provider")})}const A={inputVariable:[],modelParamsSetting:{},modelId:"",variableList:[]},M=Zn({get:()=>(n.nodeModel.properties.nodeData||Te.set(n.nodeModel.properties,"nodeData",A),n.nodeModel.properties.nodeData),set:D=>{Te.set(n.nodeModel.properties,"nodeData",D)}}),x=D=>{var V;D?(V=a.value)==null||V.reset_default(D,s):v({})},E=$e(),j=async()=>E.value.validate();return qr(()=>{S(),Te.set(n.nodeModel,"validate",j)}),(D,V)=>{const U=ee("el-button"),L=ee("el-form-item"),F=ee("el-form"),X=ee("el-card");return Se(),lt(Fo,{nodeModel:D.nodeModel},{default:N(()=>[K("h5",UH,_e(D.$t("views.applicationWorkflow.nodeSetting")),1),k(X,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(F,{onSubmit:V[3]||(V[3]=Qt(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:E,"hide-required-asterisk":""},{default:N(()=>[k(L,{label:D.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:D.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[K("div",VH,[K("div",null,[K("span",null,[ot(_e(D.$t("views.application.form.aiModel.label")),1),V[4]||(V[4]=K("span",{class:"color-danger ml-4"},"*",-1))])]),k(U,{disabled:!M.value.modelId,type:"primary",link:"",onClick:V[0]||(V[0]=q=>c(M.value.modelId)),onRefreshForm:v},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(Df,{onChange:x,onWheel:b,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":V[1]||(V[1]=q=>M.value.modelId=q),placeholder:D.$t("views.application.form.aiModel.placeholder"),options:g.value,onSubmitModel:S,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(L,{prop:"inputVariable",rules:{message:D.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:N(()=>[K("div",BH,[K("div",null,[ot(_e(D.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),V[5]||(V[5]=K("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.variable.placeholder"),modelValue:M.value.inputVariable,"onUpdate:modelValue":V[2]||(V[2]=q=>M.value.inputVariable=q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(L,{prop:"variableList",rules:{message:D.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"),trigger:"blur",required:!0}},{default:N(()=>[k(FH,{ref:"ParametersFieldTableRef","node-model":D.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:a,onRefresh:v},null,512)]),_:1},8,["nodeModel"])}}});class GH extends Uo{constructor(t){super(t,WH)}}const zH={type:"parameter-extraction-node",model:Vo,view:GH},HH=Object.freeze(Object.defineProperty({__proto__:null,default:zH},Symbol.toStringTag,{value:"Module"})),XH={class:"title-decoration-1 mb-8"},qH={class:"flex-between"},YH={class:"flex align-center"},KH={class:"mr-4"},ZH={class:"flex-between w-full"},JH={class:"flex align-center"},QH={class:"mr-4"},eX={class:"flex"},tX=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=$e(),c=L=>L.ctrlKey===!0?(L.preventDefault(),!0):(L.stopPropagation(),!0),v=L=>{var F;L?(F=s.value)==null||F.reset_default(L,a):S({})};function f(L){Te.set(x.nodeModel.properties.nodeData,"prompt",L)}function g(L){Te.set(x.nodeModel.properties.nodeData,"system",L)}const b=`${St("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${St("views.applicationWorkflow.nodes.startNode.label")}.question}}
${St("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,_={modelId:"",system:St("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:b,dialogueNumber:1,isResult:!1};function S(L){Te.set(x.nodeModel.properties.nodeData,"modelParamsSetting",L)}const A=L=>{var F;L&&((F=s.value)==null||F.open(L,a,M.value.modelParamsSetting))},M=Zn({get:()=>(x.nodeModel.properties.nodeData||Te.set(x.nodeModel.properties,"nodeData",_),x.nodeModel.properties.nodeData),set:L=>{Te.set(x.nodeModel.properties,"nodeData",L)}}),x=e,E=$e(),j=$e(null),D=()=>{var L;return(L=E.value)==null?void 0:L.validate().catch(F=>Promise.reject({node:x.nodeModel,errMessage:F}))},V=t();function U(){var F;const L=r.value==="systemManage"?{modelType:"LLM",workspaceId:(F=V.value)==null?void 0:F.workspaceId}:{modelType:"LLM"};go({type:"model",systemType:r.value}).getSelectModelList(L).then(X=>{j.value=Te.groupBy(X==null?void 0:X.data,"provider")})}return qr(()=>{var L;U(),typeof((L=x.nodeModel.properties.nodeData)==null?void 0:L.isResult)>"u"&&Ru(x.nodeModel)&&Te.set(x.nodeModel.properties.nodeData,"isResult",!0),Te.set(x.nodeModel,"validate",D)}),(L,F)=>{const X=ee("AppIcon"),q=ee("el-button"),H=ee("ModelSelect"),B=ee("el-form-item"),G=ee("el-tooltip"),Z=ee("el-input-number"),Q=ee("el-switch"),fe=ee("el-form"),se=ee("el-card");return Se(),lt(Fo,{nodeModel:L.nodeModel},{default:N(()=>[K("h5",XH,_e(L.$t("views.applicationWorkflow.nodeSetting")),1),k(se,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(fe,{onSubmit:F[7]||(F[7]=Qt(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"questionNodeFormRef",ref:E,"hide-required-asterisk":""},{default:N(()=>[k(B,{label:L.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:L.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:N(()=>[K("div",qH,[K("div",null,[K("span",null,[ot(_e(L.$t("views.application.form.aiModel.label")),1),F[8]||(F[8]=K("span",{class:"color-danger"},"*",-1))])]),k(q,{type:"primary",link:"",disabled:!M.value.modelId,onClick:F[0]||(F[0]=ce=>A(M.value.modelId)),onRefreshForm:S},{default:N(()=>[k(X,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(H,{onChange:v,onWheel:c,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":F[1]||(F[1]=ce=>M.value.modelId=ce),placeholder:L.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:U,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(B,{label:L.$t("views.application.form.roleSettings.label")},{default:N(()=>[k(os,{title:L.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":F[2]||(F[2]=ce=>M.value.system=ce),style:{height:"100px"},onSubmitDialog:g,placeholder:L.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(B,{label:L.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:L.$t("views.application.form.prompt.tooltip"),trigger:"blur"}},{label:N(()=>[K("div",YH,[K("div",KH,[K("span",null,[ot(_e(L.$t("views.application.form.prompt.label")),1),F[9]||(F[9]=K("span",{class:"color-danger"},"*",-1))])]),k(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(L.$t("views.application.form.prompt.tooltip")),1)]),default:N(()=>[k(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:N(()=>[k(os,{onWheel:c,title:L.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":F[3]||(F[3]=ce=>M.value.prompt=ce),style:{height:"150px"},onSubmitDialog:f},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(B,{label:L.$t("views.application.form.historyRecord.label")},{default:N(()=>[k(Z,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":F[4]||(F[4]=ce=>M.value.dialogueNumber=ce),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(B,{label:L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[6]||(F[6]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",ZH,[K("div",JH,[K("div",QH,[K("span",null,_e(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(L.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",eX,[k(Q,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":F[5]||(F[5]=ce=>M.value.isResult=ce)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(fh,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:S},null,512)]),_:1},8,["nodeModel"])}}});class nX extends Uo{constructor(t){super(t,tX)}}const rX={type:"question-node",model:Vo,view:nX},oX=Object.freeze(Object.defineProperty({__proto__:null,default:rX},Symbol.toStringTag,{value:"Module"})),iX={class:"flex-between"},aX={class:"flex-between w-full"},lX={class:"flex align-center"},sX={class:"mr-4"},uX={class:"flex"},cX=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),a={replyType:"content",content:"",fields:[],isResult:!0},r=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:g=>{Te.set(t.nodeModel.properties,"nodeData",g)}});function s(g){Te.set(t.nodeModel.properties.nodeData,"content",g)}const c=$e(),v=$e(),f=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))};return qr(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),Te.set(t.nodeModel,"validate",f)}),(g,b)=>{const _=ee("el-option"),S=ee("el-select"),A=ee("el-form-item"),M=ee("el-tooltip"),x=ee("el-switch"),E=ee("el-form"),j=ee("el-card");return Se(),lt(Fo,{nodeModel:g.nodeModel},{default:N(()=>[k(j,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(E,{onSubmit:b[5]||(b[5]=Qt(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:N(()=>[k(A,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:N(()=>[K("div",iX,[K("span",null,_e(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),k(S,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":b[0]||(b[0]=D=>r.value.replyType=D),size:"small",style:{width:"85px"}},{default:N(()=>[k(_,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(_,{label:g.$t("common.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:N(()=>[r.value.replyType==="content"?(Se(),lt(os,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":b[1]||(b[1]=D=>r.value.content=D),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Se(),lt(oo,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":b[2]||(b[2]=D=>r.value.fields=D)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(A,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[4]||(b[4]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",aX,[K("div",lX,[K("div",sX,[K("span",null,_e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(M,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",uX,[k(x,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":b[3]||(b[3]=D=>r.value.isResult=D)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class fX extends Uo{constructor(t){super(t,cX)}}const dX={type:"reply-node",model:Vo,view:fX},pX=Object.freeze(Object.defineProperty({__proto__:null,default:dX},Symbol.toStringTag,{value:"Module"})),hX={class:"flex align-center"},vX={class:"mr-4"},mX={class:"dialog-footer"},yX=er({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=$e(!1),v=$e(!1);ub(c,b=>{b||(s.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const f=b=>{s.value={...s.value,...Te.cloneDeep(b)},c.value=!0},g=()=>{var b;(b=r==null?void 0:r.value)==null||b.validate((_,S)=>{_&&(a("refresh",Te.cloneDeep(s.value)),c.value=!1)})};return t({open:f}),(b,_)=>{const S=ee("AppIcon"),A=ee("el-tooltip"),M=ee("el-input-number"),x=ee("el-form-item"),E=ee("el-col"),j=ee("el-row"),D=ee("el-slider"),V=ee("el-form"),U=ee("el-button"),L=ee("el-dialog");return Se(),lt(L,{"align-center":"",title:b.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":_[5]||(_[5]=F=>c.value=F),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:N(()=>[K("span",mX,[k(U,{onClick:_[3]||(_[3]=Qt(F=>c.value=!1,["prevent"]))},{default:N(()=>[ot(_e(b.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:_[4]||(_[4]=F=>g()),loading:v.value},{default:N(()=>[ot(_e(b.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(V,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:N(()=>[k(j,{gutter:12},{default:N(()=>[k(E,{span:12},{default:N(()=>[k(x,null,{label:N(()=>[K("div",hX,[K("span",vX,"Score "+_e(b.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),k(A,{effect:"dark",content:b.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:N(()=>[k(S,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:N(()=>[k(M,{modelValue:s.value.similarity,"onUpdate:modelValue":_[0]||(_[0]=F=>s.value.similarity=F),min:0,max:s.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),k(E,{span:12},{default:N(()=>[k(x,{label:b.$t("views.application.dialog.topReferences")},{default:N(()=>[k(M,{modelValue:s.value.topN,"onUpdate:modelValue":_[1]||(_[1]=F=>s.value.topN=F),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),k(x,{label:b.$t("views.application.dialog.maxCharacters")},{default:N(()=>[k(D,{modelValue:s.value.maxParagraphCharNumber,"onUpdate:modelValue":_[2]||(_[2]=F=>s.value.maxParagraphCharNumber=F),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),gX={class:"flex-between"},bX={class:"flex-between"},_X={class:"w-full"},wX={class:"flex-between"},EX={class:"flex-between"},OX={class:"flex-between"},SX=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=$e(),v={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3},show_knowledge:!1},f=$e(null),g=()=>{var U;(U=c.value)==null||U.open(S.value.reranker_setting)},b=U=>{const L=Te.cloneDeep(s.nodeModel.properties.nodeData.reranker_reference_list);L.splice(U,1),Te.set(s.nodeModel.properties.nodeData,"reranker_reference_list",L)},_=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),S=Zn({get:()=>(s.nodeModel.properties.nodeData||Te.set(s.nodeModel.properties,"nodeData",v),s.nodeModel.properties.nodeData),set:U=>{Te.set(s.nodeModel.properties,"nodeData",U)}});function A(U){Te.set(s.nodeModel.properties.nodeData,"reranker_setting",U)}const M=t();function x(){var L;const U=r.value==="systemManage"?{modelType:"RERANKER",workspaceId:(L=M.value)==null?void 0:L.workspaceId}:{modelType:"RERANKER"};go({type:"model",systemType:r.value}).getSelectModelList(U).then(F=>{f.value=Te.groupBy(F==null?void 0:F.data,"provider")})}const E=()=>{const U=Te.cloneDeep(s.nodeModel.properties.nodeData.reranker_reference_list);U.push([]),Te.set(s.nodeModel.properties.nodeData,"reranker_reference_list",U)},j=$e(),D=$e(),V=()=>{var U;return Promise.all([D.value?D.value.validate():Promise.resolve(""),(U=j.value)==null?void 0:U.validate()]).catch(L=>Promise.reject({node:s.nodeModel,errMessage:L}))};return qr(()=>{x(),Te.set(s.nodeModel,"validate",V)}),(U,L)=>{const F=ee("Plus"),X=ee("el-icon"),q=ee("el-button"),H=ee("el-form-item"),B=ee("el-col"),G=ee("AppIcon"),Z=ee("el-row"),Q=ee("el-switch"),fe=ee("el-form"),se=ee("el-card");return Se(),lt(Fo,{nodeModel:U.nodeModel},{default:N(()=>[k(se,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(fe,{onSubmit:L[4]||(L[4]=Qt(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:j,"hide-required-asterisk":""},{default:N(()=>[k(H,{label:U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:N(()=>[K("div",gX,[K("span",null,[ot(_e(U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),L[5]||(L[5]=K("span",{class:"color-danger"},"*",-1))]),k(q,{onClick:E,link:"",type:"primary"},{default:N(()=>[k(X,{class:"mr-4"},{default:N(()=>[k(F)]),_:1})]),_:1})])]),default:N(()=>[(Se(!0),en(Sr,null,ao(S.value.reranker_reference_list,(ce,be)=>(Se(),lt(Z,{gutter:8,style:{"margin-bottom":"8px"},key:be,class:"w-full"},{default:N(()=>[k(B,{span:22},{default:N(()=>[k(H,{prop:"reranker_reference_list."+be,rules:{type:"array",required:!0,message:U.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[(Se(),lt(oo,{key:be,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:S.value.reranker_reference_list[be],"onUpdate:modelValue":we=>S.value.reranker_reference_list[be]=we},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),k(B,{span:2},{default:N(()=>[k(q,{link:"",type:"info",onClick:we=>b(be)},{default:N(()=>[k(G,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),k(H,{label:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:N(()=>[K("div",bX,[K("span",null,_e(U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(q,{type:"primary",link:"",onClick:g},{default:N(()=>[k(G,{iconName:"app-setting"})]),_:1})])]),default:N(()=>[K("div",_X,[k(Z,null,{default:N(()=>[k(B,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(" Score "+_e(U.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),k(B,{span:12,class:"lighter"},{default:N(()=>{var ce;return[ot(_e((ce=S.value.reranker_setting.similarity)==null?void 0:ce.toFixed(3)),1)]}),_:1}),k(B,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(_e(U.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),k(B,{span:12,class:"lighter"},{default:N(()=>[ot(_e(S.value.reranker_setting.topN),1)]),_:1}),k(B,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(_e(U.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),k(B,{span:12,class:"lighter"},{default:N(()=>[ot(_e(S.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(H,{label:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:N(()=>[K("div",wX,[K("span",null,[ot(_e(U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label")),1),L[6]||(L[6]=K("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:D,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),modelValue:S.value.questionReferenceAddress,"onUpdate:modelValue":L[0]||(L[0]=ce=>S.value.questionReferenceAddress=ce)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:N(()=>[K("div",EX,[K("span",null,[ot(_e(U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),L[7]||(L[7]=K("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[k(Df,{onWheel:_,teleported:!1,modelValue:S.value.reranker_model_id,"onUpdate:modelValue":L[1]||(L[1]=ce=>S.value.reranker_model_id=ce),placeholder:U.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:f.value,onSubmitModel:x,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{onClick:L[3]||(L[3]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",OX,[K("div",null,[K("span",null,_e(U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),K("div",null,[k(Q,{size:"small",modelValue:S.value.showKnowledge,"onUpdate:modelValue":L[2]||(L[2]=ce=>S.value.showKnowledge=ce)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),k(yX,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:A},null,512)]),_:1},8,["nodeModel"])}}}),xX=Zd(SX,[["__scopeId","data-v-4457ae3f"]]);class AX extends Uo{constructor(t){super(t,xX)}}const TX={type:"reranker-node",model:Vo,view:AX},MX=Object.freeze(Object.defineProperty({__proto__:null,default:TX},Symbol.toStringTag,{value:"Module"})),kX={class:"title-decoration-1 mb-8"},PX={class:"flex-between"},RX={key:0,class:"w-full"},NX={class:"flex align-center",style:{"line-height":"20px"}},CX=["title"],DX={key:1,class:"w-full"},jX={class:"flex-between"},IX={class:"flex align-center"},LX={class:"flex align-center"},$X={class:"w-full"},FX={key:1},UX={class:"flex align-center mb-8"},VX=er({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),n=e,a=$e(),r=[{value:"contain",label:St("views.applicationWorkflow.compare.contain")},{value:"not_contain",label:St("views.applicationWorkflow.compare.not_contain")},{value:"eq",label:St("views.applicationWorkflow.compare.eq")}],s=Zn(()=>t.path.includes("shared")?"systemShare":t.path.includes("resource-management")?"systemManage":t.path.includes("share/")?"workspaceShare":"workspace"),c={knowledge_id_list:[],search_scope_type:"custom",search_scope_source:"knowledge",search_scope_reference:[],search_mode:"auto",question_reference:[],search_condition_type:"AND",search_condition_list:[],knowledge_tags:[]},v=Zn({get:()=>(n.nodeModel.properties.nodeData||Te.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:V=>{Te.set(n.nodeModel.properties,"nodeData",V)}}),f=$e(),g=$e(),b=$e([]),_=$e(!1);function S(V){const U=n.nodeModel.properties.nodeData.knowledge_id_list.filter(L=>L!==V);Te.set(n.nodeModel.properties.nodeData,"knowledge_id_list",U)}function A(V){Te.set(n.nodeModel.properties.nodeData,"knowledge_id_list",V.map(U=>U.id)),Te.set(n.nodeModel.properties.nodeData,"knowledge_list",V),b.value=V}function M(){g.value&&g.value.open(v.value.knowledge_id_list)}function x(){const V=Te.cloneDeep(v.value.search_condition_list);V.push({key:"",compare:"contain",value:""}),Te.set(v.value,"search_condition_list",V)}function E(V){const U=Te.cloneDeep(v.value.search_condition_list);U.splice(V,1),Te.set(v.value,"search_condition_list",U)}function j(V){if(V.length===0){Te.set(v.value,"knowledge_tags",[]);return}go({type:"knowledge",systemType:s.value}).getAllTags({knowledge_ids:V},{}).then(U=>{Te.set(v.value,"knowledge_tags",U.data)})}ub(()=>v.value.knowledge_id_list,V=>{j(V)});const D=()=>{var V,U;return Promise.all([(V=a.value)==null?void 0:V.validate(),(U=f.value)==null?void 0:U.validate()]).catch(L=>Promise.reject({node:n.nodeModel,errMessage:L}))};return qr(()=>{b.value=n.nodeModel.properties.nodeData.knowledge_list,Te.set(n.nodeModel,"validate",D)}),(V,U)=>{const L=ee("el-button"),F=ee("el-option"),X=ee("el-select"),q=ee("el-text"),H=ee("KnowledgeIcon"),B=ee("Close"),G=ee("el-icon"),Z=ee("el-form-item"),Q=ee("el-tooltip"),fe=ee("el-radio"),se=ee("el-radio-group"),ce=ee("el-col"),be=ee("el-input"),we=ee("el-row"),me=ee("el-form"),He=ee("el-card");return Se(),lt(Fo,{nodeModel:V.nodeModel},{default:N(()=>[K("h5",kX,_e(V.$t("views.applicationWorkflow.nodeSetting")),1),k(He,{shadow:"never",class:"card-never"},{default:N(()=>[k(me,{onSubmit:U[7]||(U[7]=Qt(()=>{},["prevent"])),model:v.value,"label-position":"top","hide-required-asterisk":"","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:f},{default:N(()=>[k(Z,{label:V.$t("views.chatLog.selectKnowledge")},{label:N(()=>[K("div",PX,[K("span",null,_e(V.$t("views.applicationWorkflow.nodes.searchDocumentNode.selectKnowledge")),1),K("span",null,[v.value.search_scope_type==="custom"?(Se(),lt(L,{key:0,type:"primary",link:"",onClick:M},{default:N(()=>[k(gr,{iconName:"app-add-outlined"})]),_:1})):kn("",!0),k(X,{teleported:!1,size:"small",modelValue:v.value.search_scope_type,"onUpdate:modelValue":U[0]||(U[0]=Je=>v.value.search_scope_type=Je),style:{width:"85px"}},{default:N(()=>[k(F,{label:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.custom"),value:"custom"},null,8,["label"]),k(F,{label:V.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"])]),_:1},8,["modelValue"])])])]),default:N(()=>{var Je;return[v.value.search_scope_type==="custom"?(Se(),en("div",RX,[((Je=v.value.knowledge_id_list)==null?void 0:Je.length)===0?(Se(),lt(q,{key:0,type:"info"},{default:N(()=>[ot(_e(V.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(Se(!0),en(Sr,{key:1},ao(v.value.knowledge_id_list,(yt,Be)=>{var Yt,Kt,Lt;return Se(),en("div",{key:Be,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[K("div",NX,[k(H,{type:(Yt=Qn(Ou)(b.value,yt,"id"))==null?void 0:Yt.type,class:"mr-8",size:20},null,8,["type"]),K("div",{class:"ellipsis",title:(Kt=Qn(Ou)(b.value,yt,"id"))==null?void 0:Kt.name},_e((Lt=Qn(Ou)(b.value,yt,"id"))==null?void 0:Lt.name),9,CX)]),k(L,{text:"",onClick:An=>S(yt)},{default:N(()=>[k(G,null,{default:N(()=>[k(B)]),_:1})]),_:2},1032,["onClick"])])}),128))])):(Se(),en("div",DX,[k(Z,{prop:"search_scope_reference",rules:{message:V.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:N(()=>[K("div",jX,[K("span",null,[ot(_e(V.$t("views.applicationWorkflow.nodes.searchDocumentNode.select_variable"))+" ",1),U[8]||(U[8]=K("span",{class:"color-danger"},"*",-1))]),K("span",null,[k(X,{teleported:!1,size:"small",modelValue:v.value.search_scope_source,"onUpdate:modelValue":U[1]||(U[1]=yt=>v.value.search_scope_source=yt),style:{width:"95px"},onChange:U[2]||(U[2]=yt=>v.value.search_scope_reference=[])},{default:N(()=>[k(F,{label:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.knowledge_list"),value:"knowledge"},null,8,["label"]),k(F,{label:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.document_list"),value:"document"},null,8,["label"])]),_:1},8,["modelValue"])])])]),default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:a,nodeModel:V.nodeModel,class:"w-full",placeholder:V.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.search_scope_reference,"onUpdate:modelValue":U[3]||(U[3]=yt=>v.value.search_scope_reference=yt)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"])]))]}),_:1},8,["label"]),k(Z,{label:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.searchSetting")},{default:N(()=>[k(se,{modelValue:v.value.search_mode,"onUpdate:modelValue":U[4]||(U[4]=Je=>v.value.search_mode=Je)},{default:N(()=>[k(fe,{value:"auto"},{default:N(()=>[K("span",IX,[ot(_e(V.$t("views.applicationWorkflow.nodes.searchDocumentNode.auto"))+" ",1),k(Q,{content:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.autoTooltip"),placement:"top"},{default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])])]),_:1}),v.value.search_scope_type==="custom"?(Se(),lt(fe,{key:0,value:"custom"},{default:N(()=>[K("span",LX,[ot(_e(V.$t("views.applicationWorkflow.nodes.searchDocumentNode.custom"))+" ",1),k(Q,{c:"",content:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.customTooltip"),placement:"top"},{default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])])]),_:1})):kn("",!0)]),_:1},8,["modelValue"])]),_:1},8,["label"]),K("div",$X,[v.value.search_mode==="auto"?(Se(),lt(Z,{key:0,label:V.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"question_reference",rules:{message:V.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:a,nodeModel:V.nodeModel,class:"w-full",placeholder:V.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:v.value.question_reference,"onUpdate:modelValue":U[5]||(U[5]=Je=>v.value.question_reference=Je)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):(Se(),en("div",FX,[K("div",UX,[k(q,{type:"info",class:"lighter",size:"small"},{default:N(()=>[ot(_e(V.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1)]),_:1}),k(X,{modelValue:v.value.search_condition_type,"onUpdate:modelValue":U[6]||(U[6]=Je=>v.value.search_condition_type=Je),size:"small",style:{width:"60px",margin:"0 8px"}},{default:N(()=>[k(F,{label:V.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),k(F,{label:V.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),k(q,{type:"info",class:"lighter",size:"small"},{default:N(()=>[ot(_e(V.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)]),_:1})]),(Se(!0),en(Sr,null,ao(v.value.search_condition_list,(Je,yt)=>(Se(),en("div",{key:yt},[k(we,{gutter:8,class:"mb-8"},{default:N(()=>[k(ce,{span:8},{default:N(()=>[k(X,{modelValue:Je.key,"onUpdate:modelValue":Be=>Je.key=Be,filterable:""},{default:N(()=>[(Se(!0),en(Sr,null,ao(v.value.knowledge_tags,Be=>(Se(),lt(F,{key:Be,label:Be.key,value:Be.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(ce,{span:7},{default:N(()=>[k(X,{modelValue:Je.compare,"onUpdate:modelValue":Be=>Je.compare=Be},{default:N(()=>[(Se(),en(Sr,null,ao(r,Be=>k(F,{key:Be.value,value:Be.value,label:Be.label},null,8,["value","label"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(ce,{span:8},{default:N(()=>[k(be,{modelValue:Je.value,"onUpdate:modelValue":Be=>Je.value=Be,placeholder:V.$t("views.applicationWorkflow.nodes.searchDocumentNode.valueMessage",{name:"{变量}"})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),k(ce,{span:1},{default:N(()=>[k(L,{link:"",onClick:Be=>E(yt),type:"info",class:"mt-4"},{default:N(()=>[k(gr,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(L,{link:"",type:"primary",onClick:x,class:"mt-8"},{default:N(()=>[k(gr,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(V.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:1})]))])]),_:1},8,["model"])]),_:1}),k(aM,{ref_key:"AddKnowledgeDialogRef",ref:g,onAddData:A,data:b.value,loading:_.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class BX extends Uo{constructor(t){super(t,VX)}}const WX={type:"search-document-node",model:Vo,view:BX},GX=Object.freeze(Object.defineProperty({__proto__:null,default:WX},Symbol.toStringTag,{value:"Module"})),zX={class:"title-decoration-1 mb-8"},HX={class:"flex-between"},XX={class:"w-full"},qX={class:"flex align-center",style:{"line-height":"20px"}},YX=["title"],KX={class:"flex-between"},ZX={class:"w-full"},JX={class:"flex-between"},QX=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a={knowledgeIdList:[],knowledgeSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[],showKnowledge:!1},r=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:E=>{Te.set(t.nodeModel.properties,"nodeData",E)}}),s=$e(),c=$e(),v=$e(),f=$e([]),g=$e(!1);function b(E){Te.set(t.nodeModel.properties.nodeData,"knowledgeSetting",E.knowledgeSetting)}const _=()=>{var E;(E=c.value)==null||E.open(r.value,"WORK_FLOW")};function S(E){const j=t.nodeModel.properties.nodeData.knowledgeIdList.filter(D=>D!==E);Te.set(t.nodeModel.properties.nodeData,"knowledgeIdList",j)}function A(E){Te.set(t.nodeModel.properties.nodeData,"knowledgeIdList",E.map(j=>j.id)),f.value=E}function M(){v.value&&v.value.open(r.value.knowledgeIdList)}const x=()=>{var E;return Promise.all([n.value.validate(),(E=s.value)==null?void 0:E.validate()]).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};return qr(()=>{f.value=t.nodeModel.properties.nodeData.knowledgeList,Te.set(t.nodeModel,"validate",x)}),(E,j)=>{const D=ee("Plus"),V=ee("el-icon"),U=ee("el-button"),L=ee("el-text"),F=ee("Close"),X=ee("el-form-item"),q=ee("el-col"),H=ee("el-row"),B=ee("el-switch"),G=ee("el-form"),Z=ee("el-card");return Se(),lt(Fo,{nodeModel:E.nodeModel},{default:N(()=>[K("h5",zX,_e(E.$t("views.applicationWorkflow.nodeSetting")),1),k(Z,{shadow:"never",class:"card-never"},{default:N(()=>[k(G,{onSubmit:j[3]||(j[3]=Qt(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:s},{default:N(()=>[k(X,{label:E.$t("views.chatLog.selectKnowledge")},{label:N(()=>[K("div",HX,[K("span",null,_e(E.$t("views.chatLog.selectKnowledge")),1),k(U,{type:"primary",link:"",onClick:M},{default:N(()=>[k(V,null,{default:N(()=>[k(D)]),_:1})]),_:1})])]),default:N(()=>{var Q;return[K("div",XX,[((Q=r.value.knowledgeIdList)==null?void 0:Q.length)===0?(Se(),lt(L,{key:0,type:"info"},{default:N(()=>[ot(_e(E.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(Se(!0),en(Sr,{key:1},ao(r.value.knowledgeIdList,(fe,se)=>{var ce,be,we;return Se(),en("div",{key:se,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[K("div",qX,[k(uI,{type:(ce=Qn(Ou)(f.value,fe,"id"))==null?void 0:ce.type,class:"mr-8",size:20},null,8,["type"]),K("div",{class:"ellipsis",title:(be=Qn(Ou)(f.value,fe,"id"))==null?void 0:be.name},_e((we=Qn(Ou)(f.value,fe,"id"))==null?void 0:we.name),9,YX)]),k(U,{text:"",onClick:me=>S(fe)},{default:N(()=>[k(V,null,{default:N(()=>[k(F)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),k(X,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:N(()=>[K("div",KX,[K("span",null,_e(E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(U,{type:"primary",link:"",onClick:_},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1})])]),default:N(()=>[K("div",ZX,[k(H,null,{default:N(()=>[k(q,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(_e(E.$t("views.application.dialog.selectSearchMode")),1)]),_:1}),k(q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(E.$t(Qn(cI)[r.value.knowledgeSetting.searchMode])),1)]),_:1}),k(q,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(_e(E.$t("views.application.dialog.similarityThreshold")),1)]),_:1}),k(q,{span:12,class:"lighter"},{default:N(()=>{var Q;return[ot(_e((Q=r.value.knowledgeSetting.similarity)==null?void 0:Q.toFixed(3)),1)]}),_:1}),k(q,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(_e(E.$t("views.application.dialog.topReferences")),1)]),_:1}),k(q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(r.value.knowledgeSetting.topN),1)]),_:1}),k(q,{span:12,class:"color-secondary lighter"},{default:N(()=>[ot(_e(E.$t("views.application.dialog.maxCharacters")),1)]),_:1}),k(q,{span:12,class:"lighter"},{default:N(()=>[ot(_e(r.value.knowledgeSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(X,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:n,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":j[0]||(j[0]=Q=>r.value.questionReferenceAddress=Q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(X,{onClick:j[2]||(j[2]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",JX,[K("div",null,[K("span",null,_e(E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label")),1)]),K("div",null,[k(B,{size:"small",modelValue:r.value.showKnowledge,"onUpdate:modelValue":j[1]||(j[1]=Q=>r.value.showKnowledge=Q)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1}),k(xI,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:b},null,512),k(aM,{ref_key:"AddKnowledgeDialogRef",ref:v,onAddData:A,data:f.value,loading:g.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class eq extends Uo{constructor(t){super(t,QX)}}const tq={type:"search-knowledge-node",model:Vo,view:eq},nq=Object.freeze(Object.defineProperty({__proto__:null,default:tq},Symbol.toStringTag,{value:"Module"})),rq={class:"flex-between"},oq={class:"dialog-footer"},iq=er({__name:"STTModelParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=Zi(),{params:{id:r}}=a,s=Zn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=$e(!1),v=$e({}),f=$e(),g=$e(""),b=$e(!1),_=$e([]),S=n,A=(E,j,D)=>{v.value={},g.value=E,go({type:"model",systemType:s.value}).getModelParamsForm(E,b).then(V=>{var L;_.value=V.data;const U=V.data.map(F=>({[F.field]:F.show_default_value!==!1?F.default_value:void 0})).reduce((F,X)=>({...F,...X}),{});D&&Object.keys(D).forEach(F=>{F in U||delete D[F]}),D={...U,...D},(L=f.value)==null||L.render(_.value,D)}),c.value=!0},M=async()=>{var E;(E=f.value)==null||E.validate().then(()=>{S("refresh",v.value),c.value=!1})};return t({open:A,reset_default:(E,j)=>{go({type:"model",systemType:s.value}).getModelParamsForm(E,b).then(D=>{_.value=D.data;const V=D.data.map(U=>({[U.field]:U.show_default_value!==!1?U.default_value:void 0})).reduce((U,L)=>({...U,...L}),{});S("refresh",V)})}}),(E,j)=>{const D=ee("el-button"),V=ee("el-dialog");return Se(),lt(V,{"align-center":"",title:E.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":j[2]||(j[2]=U=>c.value=U),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:N(()=>[K("div",rq,[K("span",oq,[k(D,{onClick:j[1]||(j[1]=Qt(U=>c.value=!1,["prevent"]))},{default:N(()=>[ot(_e(E.$t("common.cancel")),1)]),_:1}),k(D,{type:"primary",onClick:M,loading:b.value},{default:N(()=>[ot(_e(E.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:N(()=>[k(fI,{modelValue:v.value,"onUpdate:modelValue":j[0]||(j[0]=U=>v.value=U),model:v.value,"label-position":"top","require-asterisk-position":"right",render_data:_.value,ref_key:"dynamicsFormRef",ref:f},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),aq={class:"title-decoration-1 mb-8"},lq={class:"flex-between w-full"},sq={class:"flex-between w-full"},uq={class:"flex-between w-full"},cq={class:"flex align-center"},fq={class:"mr-4"},dq={class:"flex"},pq=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=$e(null),v=$e(),f=$e(),g=$e(),b=()=>{var V;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(V=f.value)==null?void 0:V.validate()]).catch(U=>Promise.reject({node:s.nodeModel,errMessage:U}))},_=V=>V.ctrlKey===!0?(V.preventDefault(),!0):(V.stopPropagation(),!0),S={stt_model_id:"",isResult:!0,audioList:[],modelParamsSetting:{}},A=Zn({get:()=>(s.nodeModel.properties.nodeData||Te.set(s.nodeModel.properties,"nodeData",S),s.nodeModel.properties.nodeData),set:V=>{Te.set(s.nodeModel.properties,"nodeData",V)}}),M=()=>{var U;const V=A.value.stt_model_id;if(!V){Xd(St("views.application.form.voiceInput.requiredMessage"));return}(U=v.value)==null||U.open(V,a,A.value.modelParamsSetting)},x=V=>{Te.set(s.nodeModel.properties.nodeData,"modelParamsSetting",V)};function E(V){var U;V?(U=v.value)==null||U.reset_default(V,a):x({})}const j=t();function D(){var U;const V=r.value==="systemManage"?{modelType:"STT",workspace_id:(U=j.value)==null?void 0:U.workspace_id}:{modelType:"STT"};go({type:"model",systemType:r.value}).getSelectModelList(V).then(L=>{c.value=Te.groupBy(L==null?void 0:L.data,"provider")})}return qr(()=>{D(),Te.set(s.nodeModel,"validate",b)}),(V,U)=>{const L=ee("el-button"),F=ee("el-form-item"),X=ee("el-tooltip"),q=ee("el-switch"),H=ee("el-form"),B=ee("el-card");return Se(),lt(Fo,{"node-model":V.nodeModel},{default:N(()=>[K("h5",aq,_e(V.$t("views.applicationWorkflow.nodeSetting")),1),k(B,{shadow:"never",class:"card-never"},{default:N(()=>[k(H,{onSubmit:U[4]||(U[4]=Qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:N(()=>[k(F,{label:V.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:V.$t("views.application.form.voiceInput.placeholder"),trigger:"change"}},{label:N(()=>[K("div",lq,[K("div",null,[K("span",null,[ot(_e(V.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),U[5]||(U[5]=K("span",{class:"color-danger"},"*",-1))])]),k(L,{type:"primary",link:"",onClick:M,disabled:!A.value.stt_model_id,class:"mr-4"},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(Df,{onWheel:_,teleported:!1,onChange:E,modelValue:A.value.stt_model_id,"onUpdate:modelValue":U[0]||(U[0]=G=>A.value.stt_model_id=G),placeholder:V.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(F,{label:V.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:V.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:N(()=>[K("div",sq,[K("div",null,[K("span",null,[ot(_e(V.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),U[6]||(U[6]=K("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:V.nodeModel,class:"w-full",placeholder:V.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:A.value.audioList,"onUpdate:modelValue":U[1]||(U[1]=G=>A.value.audioList=G)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(F,{label:V.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:U[3]||(U[3]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",uq,[K("div",cq,[K("div",fq,[K("span",null,_e(V.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(V.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",dq,[k(q,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":U[2]||(U[2]=G=>A.value.isResult=G)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(iq,{ref_key:"STTModeParamSettingDialogRef",ref:v,onRefresh:x},null,512)]),_:1},8,["node-model"])}}});class hq extends Uo{constructor(t){super(t,pq)}}const vq={type:"speech-to-text-node",model:Vo,view:hq},mq=Object.freeze(Object.defineProperty({__proto__:null,default:vq},Symbol.toStringTag,{value:"Module"})),yq={class:"title-decoration-1 mb-8"},gq={class:"break-all"},bq={class:"title-decoration-1 mb-8"},_q={class:"break-all"},wq=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=$e(!1),a=[{label:St("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:St("views.application.form.historyRecord.label"),value:"historyContext"},{label:St("chat.chatId"),value:"chatId"},{label:St("chat.chatUserId"),value:"chatUserId"},{label:St("chat.chatUserType"),value:"chatUserType"},{label:St("chat.chatUser"),value:"chatUser"}],r=()=>{const f=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").map(b=>Te.cloneDeep(b.properties.user_input_field_list)).reduce((b,_)=>[...b,..._],[]).map(b=>b.label&&b.label.input_type==="TooltipLabel"?{label:b.label.label,value:b.field||b.variable}:{label:b.label||b.name,value:b.field||b.variable}),g=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").map(b=>Te.cloneDeep(b.properties.api_input_field_list)).reduce((b,_)=>[...b,..._],[]).map(b=>({label:b.name||b.variable,value:b.variable}));return[...f,...g]},s=()=>{const f=r();Te.set(t.nodeModel.properties.config,"globalFields",[...a,...f])},c=()=>{const f=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Te.cloneDeep(g.properties.chat_input_field_list)).reduce((g,b)=>[...g,...b],[]).map(g=>({label:g.label,value:g.field}));Te.set(t.nodeModel.properties.config,"chatFields",f)};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s),t.nodeModel.graphModel.eventCenter.on("chatFieldList",c);const v=()=>{let f=Te.cloneDeep(t.nodeModel.properties.config.fields);const g=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").filter(_=>_.properties.nodeData.fileUploadEnable).map(_=>Te.cloneDeep(_.properties.nodeData.fileUploadSetting)).filter(_=>_);if(f=f.filter(_=>_.value!=="image"&&_.value!=="document"&&_.value!=="audio"&&_.value!=="video"&&_.value!=="other"),g.length===0){Te.set(t.nodeModel.properties.config,"fields",f);return}const b=[];g[0].document&&b.push({label:St("common.fileUpload.document"),value:"document"}),g[0].image&&b.push({label:St("common.fileUpload.image"),value:"image"}),g[0].audio&&b.push({label:St("common.fileUpload.audio"),value:"audio"}),g[0].video&&b.push({label:St("common.fileUpload.video"),value:"video"}),g[0].other&&b.push({label:St("common.fileUpload.other"),value:"other"}),Te.set(t.nodeModel.properties.config,"fields",[...f,...b])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",v),qr(()=>{c(),s(),v()}),(f,g)=>{const b=ee("el-button"),_=ee("el-tooltip");return Se(),lt(Fo,{nodeModel:f.nodeModel},{default:N(()=>[K("h5",yq,_e(f.$t("views.applicationWorkflow.variable.global")),1),(Se(!0),en(Sr,null,ao(f.nodeModel.properties.config.globalFields,(S,A)=>(Se(),en("div",{key:A,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[0]||(g[0]=M=>n.value=!0),onMouseleave:g[1]||(g[1]=M=>n.value=!1)},[K("span",gq,_e(S.label)+" "+_e("{"+S.value+"}"),1),n.value===!0?(Se(),lt(_,{key:0,effect:"dark",content:f.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:N(()=>[k(b,{link:"",onClick:M=>Qn(vw)(`{{global.${S.value}}}`),style:{padding:"0"}},{default:N(()=>[k(gr,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)],32))),128)),f.nodeModel.properties.config.chatFields?(Se(),en(Sr,{key:0},[K("h5",bq,_e(f.$t("views.applicationWorkflow.variable.chat")),1),(Se(!0),en(Sr,null,ao(f.nodeModel.properties.config.chatFields?f.nodeModel.properties.config.chatFields:[],(S,A)=>(Se(),en("div",{key:A,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[2]||(g[2]=M=>n.value=!0),onMouseleave:g[3]||(g[3]=M=>n.value=!1)},[K("span",_q,_e(S.label)+" "+_e("{"+S.value+"}"),1),n.value===!0?(Se(),lt(_,{key:0,effect:"dark",content:f.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:N(()=>[k(b,{link:"",onClick:M=>Qn(vw)(`{{chat.${S.value}}}`),style:{padding:"0"}},{default:N(()=>[k(gr,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):kn("",!0)],32))),128))],64)):kn("",!0)]),_:1},8,["nodeModel"])}}});class Eq extends Uo{constructor(t){super(t,wq)}}const Oq={type:"start-node",model:Vo,view:Eq},Sq=Object.freeze(Object.defineProperty({__proto__:null,default:Oq},Symbol.toStringTag,{value:"Module"})),xq={class:"title-decoration-1 mb-8"},Aq={class:"flex-between w-full"},Tq={class:"flex-between w-full"},Mq={class:"flex-between w-full"},kq={class:"flex align-center"},Pq={class:"mr-4"},Rq={class:"flex"},Nq=er({__name:"index",props:{nodeModel:{}},setup(e){const t=is("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=e,c=$e(),v=$e(null),f=$e(),g=$e(),b=()=>{var D;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(D=f.value)==null?void 0:D.validate()]).catch(V=>Promise.reject({node:s.nodeModel,errMessage:V}))},_=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),S={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},A=Zn({get:()=>(s.nodeModel.properties.nodeData||Te.set(s.nodeModel.properties,"nodeData",S),s.nodeModel.properties.nodeData),set:D=>{Te.set(s.nodeModel.properties,"nodeData",D)}}),M=t();function x(){var V;const D=r.value==="systemManage"?{modelType:"TTS",workspaceId:(V=M.value)==null?void 0:V.workspaceId}:{modelType:"TTS"};go({type:"model",systemType:r.value}).getSelectModelList(D).then(U=>{v.value=Te.groupBy(U==null?void 0:U.data,"provider")})}const E=()=>{var V;const D=A.value.ttsModelId;if(!D){Xd(St("views.application.form.voicePlay.requiredMessage"));return}(V=c.value)==null||V.open(D,a,A.value.modelParamsSetting)},j=D=>{A.value.modelParamsSetting=D};return qr(()=>{x(),Te.set(s.nodeModel,"validate",b)}),(D,V)=>{const U=ee("el-button"),L=ee("ModelSelect"),F=ee("el-form-item"),X=ee("el-tooltip"),q=ee("el-switch"),H=ee("el-form"),B=ee("el-card");return Se(),lt(Fo,{"node-model":D.nodeModel},{default:N(()=>[K("h5",xq,_e(D.$t("views.applicationWorkflow.nodeSetting")),1),k(B,{shadow:"never",class:"card-never"},{default:N(()=>[k(H,{onSubmit:V[4]||(V[4]=Qt(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:N(()=>[k(F,{label:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"ttsModelId",rules:{required:!0,message:D.$t("views.application.form.voicePlay.placeholder"),trigger:"change"}},{label:N(()=>[K("div",Aq,[K("div",null,[K("span",null,[ot(_e(D.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),V[5]||(V[5]=K("span",{class:"color-danger"},"*",-1))])]),k(U,{type:"primary",link:"",onClick:E,disabled:!A.value.ttsModelId,class:"mr-4"},{default:N(()=>[k(gr,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:N(()=>[k(L,{onWheel:_,teleported:!1,modelValue:A.value.ttsModelId,"onUpdate:modelValue":V[0]||(V[0]=G=>A.value.ttsModelId=G),placeholder:D.$t("views.application.form.voicePlay.placeholder"),options:v.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(F,{prop:"content_list",label:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:N(()=>[K("div",Tq,[K("div",null,[K("span",null,[ot(_e(D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),V[6]||(V[6]=K("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[k(oo,{ref_key:"nodeCascaderRef",ref:g,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:A.value.content_list,"onUpdate:modelValue":V[1]||(V[1]=G=>A.value.content_list=G)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(F,{label:D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:V[3]||(V[3]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",Mq,[K("div",kq,[K("div",Pq,[K("span",null,_e(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(D.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",Rq,[k(q,{size:"small",modelValue:A.value.isResult,"onUpdate:modelValue":V[2]||(V[2]=G=>A.value.isResult=G)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(iM,{ref_key:"TTSModeParamSettingDialogRef",ref:c,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});class Cq extends Uo{constructor(t){super(t,Nq)}}const Dq={type:"text-to-speech-node",model:Vo,view:Cq},jq=Object.freeze(Object.defineProperty({__proto__:null,default:Dq},Symbol.toStringTag,{value:"Module"})),Iq={class:"title-decoration-1 mb-16"},Lq={class:"lighter mb-8"},$q={key:0},Fq={class:"flex-between"},Uq={class:"flex"},Vq={class:"flex"},Bq={key:0,class:"color-danger"},Wq={class:"flex-between w-full"},Gq={class:"flex align-center"},zq={class:"mr-4"},Hq={class:"flex"},Xq=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Zi(),a=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),r=$e(),s={inputFieldList:[],isResult:!1},c=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:b=>{Te.set(t.nodeModel.properties,"nodeData",b)}}),v=$e(),f=()=>{var b;return(b=v.value)==null?void 0:b.validate().catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},g=()=>{if(!t.nodeModel.properties.nodeData.toolLibId){Te.set(t.nodeModel.properties,"status",500);return}go({type:"tool",systemType:a.value}).getToolById(t.nodeModel.properties.nodeData.toolLibId).then(b=>{const _=t.nodeModel.properties.nodeData.inputFieldList,S=b.data.inputFieldList.map(A=>{const M=_.find(x=>x.name==A.name);return M&&M.source==A.source?{...A,value:JSON.parse(JSON.stringify(M.value))}:{...A,value:A.source=="reference"?[]:""}});Te.set(t.nodeModel.properties.nodeData,"inputFieldList",S),Te.set(t.nodeModel.properties,"status",b.data.isActive?200:500)}).catch(()=>{Te.set(t.nodeModel.properties,"status",500)})};return qr(()=>{var b;typeof((b=t.nodeModel.properties.nodeData)==null?void 0:b.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),g(),Te.set(t.nodeModel,"validate",f)}),(b,_)=>{const S=ee("el-tag"),A=ee("el-option"),M=ee("el-select"),x=ee("el-input"),E=ee("el-form-item"),j=ee("el-text"),D=ee("el-card"),V=ee("el-tooltip"),U=ee("el-switch"),L=ee("el-form");return Se(),lt(Fo,{nodeModel:b.nodeModel},{default:N(()=>[K("h5",Iq,_e(b.$t("views.applicationWorkflow.nodeSetting")),1),K("h5",Lq,_e(b.$t("common.param.inputParam")),1),k(L,{onSubmit:_[2]||(_[2]=Qt(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:v,model:c.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:N(()=>[k(D,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:N(()=>{var F;return[((F=c.value.inputFieldList)==null?void 0:F.length)>0?(Se(),en("div",$q,[(Se(!0),en(Sr,null,ao(c.value.inputFieldList,(X,q)=>(Se(),lt(E,{key:X.name,label:X.name,prop:"inputFieldList."+q+".value",rules:{required:X.isRequired,message:X.source==="reference"?b.$t("views.tool.form.param.selectPlaceholder"):b.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:N(()=>[K("div",Fq,[K("div",Uq,[K("span",Vq,[k(dI,{content:X.name,style:{"max-width":"130px"}},{default:N(()=>[ot(_e(X.name),1)]),_:2},1032,["content"]),X.isRequired?(Se(),en("span",Bq,"*")):kn("",!0)]),k(S,{type:"info",class:"info-tag ml-4"},{default:N(()=>[ot(_e(X.type),1)]),_:2},1024)]),k(M,{teleported:!1,modelValue:X.source,"onUpdate:modelValue":H=>X.source=H,size:"small",style:{width:"85px"}},{default:N(()=>[k(A,{label:b.$t("common.reference"),value:"reference"},null,8,["label"]),k(A,{label:b.$t("common.custom"),value:"content"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:N(()=>[X.source==="reference"?(Se(),lt(oo,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:b.nodeModel,class:"w-full",placeholder:b.$t("views.tool.form.param.selectPlaceholder"),modelValue:X.value,"onUpdate:modelValue":H=>X.value=H},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Se(),lt(x,{key:1,modelValue:X.value,"onUpdate:modelValue":H=>X.value=H,placeholder:b.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Se(),lt(j,{key:1,type:"info"},{default:N(()=>[ot(_e(b.$t("common.noData")),1)]),_:1}))]}),_:1}),k(E,{label:b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[1]||(_[1]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",Wq,[K("div",Gq,[K("div",zq,[K("span",null,_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(V,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(b.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",Hq,[k(U,{size:"small",modelValue:c.value.isResult,"onUpdate:modelValue":_[0]||(_[0]=F=>c.value.isResult=F)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class qq extends Uo{constructor(t){super(t,Xq)}}const Yq={type:"tool-lib-node",model:Vo,view:qq},Kq=Object.freeze(Object.defineProperty({__proto__:null,default:Yq},Symbol.toStringTag,{value:"Module"})),Zq={class:"title-decoration-1 mb-16"},Jq={class:"flex-between"},Qq={class:"lighter mb-8"},eY={key:0},tY={class:"flex-between"},nY={class:"flex"},rY={class:"flex"},oY={key:0,class:"color-danger"},iY={class:"lighter mb-8"},aY={key:0,class:"mb-8"},lY={class:"flex-between w-full"},sY={class:"flex align-center"},uY={class:"mr-4"},cY={class:"flex"},fY=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),a=$e(),r=$e(),s={code:"",inputFieldList:[],isResult:!1},c=$e(null),v=$e(!1),f=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:x=>{Te.set(t.nodeModel.properties,"nodeData",x)}}),g=$e(),b=()=>{var x;return(x=g.value)==null?void 0:x.validate().catch(E=>Promise.reject({node:t.nodeModel,errMessage:E}))};function _(x){Te.set(t.nodeModel.properties.nodeData,"code",x)}function S(x,E){typeof E<"u"&&(c.value=E),a.value.open(x)}function A(x){const E=Te.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);E.splice(x,1),Te.set(t.nodeModel.properties.nodeData,"inputFieldList",E)}function M(x){const E=Te.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),j={...x,value:x.source==="reference"?[]:""};c.value!==null?E.splice(c.value,1,j):E.push(j),Te.set(t.nodeModel.properties.nodeData,"inputFieldList",E),c.value=null}return qr(()=>{var x;typeof((x=t.nodeModel.properties.nodeData)==null?void 0:x.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),Te.set(t.nodeModel,"validate",b),setTimeout(()=>{v.value=!0},100)}),(x,E)=>{const j=ee("Plus"),D=ee("el-icon"),V=ee("el-button"),U=ee("auto-tooltip"),L=ee("el-tag"),F=ee("el-input"),X=ee("el-form-item"),q=ee("el-text"),H=ee("el-card"),B=ee("el-tooltip"),G=ee("el-switch"),Z=ee("el-form");return Se(),lt(Fo,{nodeModel:x.nodeModel},{default:N(()=>[K("h5",Zq,_e(x.$t("views.applicationWorkflow.nodeSetting")),1),K("div",Jq,[K("h5",Qq,_e(x.$t("common.param.inputParam")),1),k(V,{link:"",type:"primary",onClick:E[0]||(E[0]=Q=>S())},{default:N(()=>[k(D,{class:"mr-4"},{default:N(()=>[k(j)]),_:1}),ot(" "+_e(x.$t("common.add")),1)]),_:1})]),k(Z,{onSubmit:E[4]||(E[4]=Qt(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:g,model:f.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:N(()=>[k(H,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:N(()=>{var Q;return[((Q=f.value.inputFieldList)==null?void 0:Q.length)>0?(Se(),en("div",eY,[(Se(!0),en(Sr,null,ao(f.value.inputFieldList,(fe,se)=>(Se(),lt(X,{key:se,label:fe.name,prop:"inputFieldList."+se+".value",rules:{required:fe.isRequired,message:fe.source==="reference"?x.$t("views.tool.form.param.selectPlaceholder"):x.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:N(()=>[K("div",tY,[K("div",nY,[K("span",rY,[k(U,{content:fe.name,style:{"max-width":"130px"}},{default:N(()=>[ot(_e(fe.name),1)]),_:2},1032,["content"]),fe.isRequired?(Se(),en("span",oY,"*")):kn("",!0)]),k(L,{type:"info",class:"info-tag ml-4"},{default:N(()=>[ot(_e(fe.type),1)]),_:2},1024)]),K("div",null,[k(V,{text:"",onClick:Qt(ce=>S(fe,se),["stop"])},{default:N(()=>[k(gr,{iconName:"app-edit"})]),_:2},1032,["onClick"]),k(V,{text:"",onClick:ce=>A(se),style:{"margin-left":"4px !important"}},{default:N(()=>[k(gr,{iconName:"app-delete"})]),_:2},1032,["onClick"])])])]),default:N(()=>[fe.source==="reference"?(Se(),lt(oo,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.tool.form.param.selectPlaceholder"),modelValue:fe.value,"onUpdate:modelValue":ce=>fe.value=ce,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Se(),lt(F,{key:1,modelValue:fe.value,"onUpdate:modelValue":ce=>fe.value=ce,placeholder:x.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Se(),lt(q,{key:1,type:"info"},{default:N(()=>[ot(_e(x.$t("common.noData")),1)]),_:1}))]}),_:1}),K("h5",iY,_e(x.$t("views.tool.form.param.code")),1),v.value?(Se(),en("div",aY,[k(pI,{title:x.$t("views.tool.form.param.code"),modelValue:f.value.code,"onUpdate:modelValue":E[1]||(E[1]=Q=>f.value.code=Q),onWheel:n,style:{height:"130px !important"},onSubmitDialog:_},null,8,["title","modelValue"])])):kn("",!0),k(X,{label:x.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:E[3]||(E[3]=Qt(()=>{},["prevent"]))},{label:N(()=>[K("div",lY,[K("div",sY,[K("div",uY,[K("span",null,_e(x.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(B,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:N(()=>[ot(_e(x.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:N(()=>[k(gr,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})]),K("div",cY,[k(G,{size:"small",modelValue:f.value.isResult,"onUpdate:modelValue":E[2]||(E[2]=Q=>f.value.isResult=Q)},null,8,["modelValue"])])])]),_:1},8,["label"])]),_:1},8,["model"]),k(e8,{ref_key:"FieldFormDialogRef",ref:a,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}});class dY extends Uo{constructor(t){super(t,fY)}}const pY={type:"tool-node",model:Vo,view:dY},hY=Object.freeze(Object.defineProperty({__proto__:null,default:pY},Symbol.toStringTag,{value:"Module"})),vY={class:"title-decoration-1 mb-8"},mY={class:"flex-between lighter"},yY={key:0,class:"mt-8"},gY=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:fl(),type:"选项 1",option:""}]},a=(b,_,S)=>{const M=Te.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(x=>x.id===_.id?{...x,height:b.height,index:S}:x);Te.set(t.nodeModel.properties,"branchConditionList",M),f(t.nodeModel.properties.nodeData.branch,!0)},r=Zn({get:()=>(t.nodeModel.properties.nodeData||(Te.set(t.nodeModel.properties,"nodeData",n),f(n.branch,!0)),t.nodeModel.properties.nodeData),set:b=>{Te.set(t.nodeModel.properties,"nodeData",b)}}),s=$e();$e();const c=()=>{var _;const b=[(_=s.value)==null?void 0:_.validate()];return Promise.all(b).catch(S=>Promise.reject({node:t.nodeModel,errMessage:S}))};function v(){const b=Te.cloneDeep(t.nodeModel.properties.nodeData.branch),_={type:"选项 "+(b.length+1),id:fl(),option:"选项 "+(b.length+1)};b.splice(b.length,0,_),f(b,!0),Te.set(t.nodeModel.properties.nodeData,"branch",b)}function f(b,_){const S=Te.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),A=b.map((M,x)=>{const E=S.find(j=>j.id===M.id);if(E)return{index:x,height:E.height,id:M.id};if(_)return{index:x,height:100,id:M.id}}).filter(M=>M);Te.set(t.nodeModel.properties,"branchConditionList",A),t.nodeModel.refreshBranch()}function g(b){const _=Te.cloneDeep(t.nodeModel.properties.nodeData.branch);if(_[b].conditions.length===0){const A=_.splice(b,1).map(M=>t.nodeModel.id+"_"+M.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(M=>A.includes(M.sourceAnchorId)).map(M=>M.id)),f(_,!1),_.forEach((M,x)=>{M.type="选项 "+(x+1)})}Te.set(t.nodeModel.properties.nodeData,"branch",_)}return qr(()=>{Te.set(t.nodeModel,"validate",c)}),(b,_)=>{const S=ee("el-form-item"),A=ee("el-input"),M=ee("el-col"),x=ee("Delete"),E=ee("el-icon"),j=ee("el-button"),D=ee("el-row"),V=ee("el-card"),U=ee("Plus"),L=ee("el-form"),F=Hd("resize");return Se(),lt(Fo,{nodeModel:b.nodeModel},{default:N(()=>[K("h5",vY,_e(b.$t("views.applicationWorkflow.nodeSetting")),1),k(V,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(L,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:s,onSubmit:_[1]||(_[1]=Qt(()=>{},["prevent"]))},{default:N(()=>[k(S,{label:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:N(()=>[k(os,{title:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":_[0]||(_[0]=X=>r.value.labelName=X),style:{height:"100px"},placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(Se(!0),en(Sr,null,ao(r.value.branch,(X,q)=>Ra((Se(),lt(V,{key:X.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:N(()=>[K("div",mY,_e(X.type),1),q!==r.value.branch.length?(Se(),en("div",yY,[k(D,{gutter:8},{default:N(()=>[k(M,{span:23},{default:N(()=>[k(S,{prop:"branch."+q+".option",rules:{required:!0,message:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:N(()=>[k(A,{modelValue:X.option,"onUpdate:modelValue":H=>X.option=H,placeholder:b.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(M,{span:1},{default:N(()=>[k(j,{disabled:q===0,link:"",type:"info",class:"mt-4",onClick:H=>g(q)},{default:N(()=>[k(E,null,{default:N(()=>[k(x)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):kn("",!0)]),_:2},1024)),[[F,H=>a(H,X,q)]])),128)),k(j,{link:"",type:"primary",onClick:v},{default:N(()=>[k(E,{class:"mr-4"},{default:N(()=>[k(U)]),_:1}),ot(" "+_e(b.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class bY extends Uo{constructor(t){super(t,gY)}}const _Y=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class wY extends Vo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:s,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const b=c[g],_=_Y(c,g);f.push({x:n+r/2-10,y:v?a-s/2+275+_+b.height/2:a-15,id:`${t}_${b.id}_right`,type:"right"})}return f}}const EY={type:"user-select-node",model:wY,view:bY},OY=Object.freeze(Object.defineProperty({__proto__:null,default:EY},Symbol.toStringTag,{value:"Module"})),SY={class:"dialog-footer"},xY=er({__name:"GroupFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e(!1),c=$e(!1),v=$e(null),f=$e({field:"",label:""}),g=ch({label:[{required:!0,message:St("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"}],field:[{required:!0,message:St("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=$e(!1),_=(M,x)=>{M&&(f.value=Te.cloneDeep(M),c.value=!0,v.value=x),b.value=!0},S=()=>{b.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},A=async M=>{M&&await M.validate(x=>{x&&a("refresh",f.value,v.value)})};return t({open:_,close:S}),(M,x)=>{const E=ee("el-input"),j=ee("el-form-item"),D=ee("el-form"),V=ee("el-button"),U=ee("el-dialog");return Se(),lt(U,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableAggregationNode.editGroup"):M.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup"),modelValue:b.value,"onUpdate:modelValue":x[3]||(x[3]=L=>b.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:N(()=>[K("span",SY,[k(V,{onClick:Qt(S,["prevent"])},{default:N(()=>[ot(_e(M.$t("common.cancel")),1)]),_:1}),k(V,{type:"primary",onClick:x[2]||(x[2]=L=>A(r.value)),loading:s.value},{default:N(()=>[ot(_e(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(D,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right"},{default:N(()=>[k(j,{label:M.$t("common.variable"),required:!0,prop:"field",rules:g.field},{default:N(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":x[0]||(x[0]=L=>f.value.field=L),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:N(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":x[1]||(x[1]=L=>f.value.label=L),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),AY={class:"title-decoration-1 mb-8"},TY={class:"flex-between"},MY={class:"flex-between mb-12"},kY={class:"font-bold"},PY={class:"flex align-center",style:{"margin-right":"-3px"}},RY=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(),r=$e(),s={strategy:"first_non_null",groupList:[{id:fl(),label:"Group1",field:"Group1",variableList:[{v_id:fl(),variable:[]}]}]},c=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",s),t.nodeModel.properties.nodeData),set:E=>{Te.set(t.nodeModel.properties,"nodeData",E)}}),v=$e([]);function f(E,j){let D=null;E&&j!==void 0&&(D={field:E.field,label:E.label}),r.value.open(D,j)}function g(E,j){for(let V=0;V<v.value.length;V++)if(v.value[V].field===E.field&&j!==V){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+E.field);return}[void 0,null].includes(j)?(v.value.push(E),M(E)):(v.value.splice(j,1,E),b(E,j)),r.value.close();const D=[...v.value.map(V=>({label:V.label,value:V.field}))];Te.set(t.nodeModel.properties.config,"fields",D)}const b=(E,j)=>{const D=Te.cloneDeep(c.value.groupList);D[j].field=E.field,D[j].label=E.label,c.value.groupList=D},_=E=>{const j=Te.cloneDeep(c.value.groupList);j.splice(E,1),c.value.groupList=j,v.value.splice(E,1);const D=j.map(V=>({label:V.label,value:V.field}));Te.set(t.nodeModel.properties.config,"fields",D)},S=E=>{const j=Te.cloneDeep(c.value.groupList);j[E].variableList.push({v_id:fl(),variable:[]}),c.value.groupList=j},A=(E,j)=>{const D=Te.cloneDeep(c.value.groupList);D[E].variableList.splice(j,1),c.value.groupList=D},M=E=>{const j=Te.cloneDeep(c.value.groupList);j.push({id:fl(),field:E.field,label:E.label,variableList:[{v_id:fl(),variable:[]}]}),c.value.groupList=j},x=async()=>{var j;const E=[...a.value.map(D=>D.validate()),(j=n.value)==null?void 0:j.validate()];return Promise.all(E).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};return qr(()=>{var j;typeof((j=t.nodeModel.properties.nodeData)==null?void 0:j.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),Te.set(t.nodeModel,"validate",x),t.nodeModel.properties.nodeData.groupList&&(v.value=c.value.groupList.map(D=>({label:D.label,field:D.field})));const E=c.value.groupList.map(D=>({label:D.label,value:D.field}));Te.set(t.nodeModel.properties.config,"fields",E)}),(E,j)=>{const D=ee("el-option"),V=ee("el-select"),U=ee("el-form-item"),L=ee("EditPen"),F=ee("el-icon"),X=ee("el-button"),q=ee("el-col"),H=ee("el-row"),B=ee("el-card"),G=ee("el-form");return Se(),lt(Fo,{nodeModel:E.nodeModel},{default:N(()=>[K("h5",AY,_e(E.$t("views.applicationWorkflow.nodeSetting")),1),k(G,{onSubmit:j[2]||(j[2]=Qt(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableAggregationRef",ref:n,"hide-required-asterisk":""},{default:N(()=>[k(U,{label:E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"),rules:{required:!0,trigger:"change"}},{label:N(()=>[K("div",TY,[K("div",null,[K("span",null,[ot(_e(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"))+" ",1),j[3]||(j[3]=K("span",{class:"color-danger"},"*",-1))])])])]),default:N(()=>[k(V,{modelValue:c.value.strategy,"onUpdate:modelValue":j[0]||(j[0]=Z=>c.value.strategy=Z)},{default:N(()=>[k(D,{label:Qn(St)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder"),value:"first_non_null"},null,8,["label"]),k(D,{label:Qn(St)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder1"),value:"variable_to_json"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(Se(!0),en(Sr,null,ao(c.value.groupList,(Z,Q)=>(Se(),en("div",{key:Z.id,class:"mb-8"},[k(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[K("div",MY,[K("span",kY,_e(Z.label),1),K("div",PY,[k(X,{onClick:fe=>f(Z,Q),link:""},{default:N(()=>[k(F,null,{default:N(()=>[k(L)]),_:1})]),_:2},1032,["onClick"]),k(X,{onClick:fe=>_(Q),link:"",disabled:c.value.groupList.length<=1},{default:N(()=>[k(gr,{iconName:"app-delete"})]),_:2},1032,["onClick","disabled"])])]),(Se(!0),en(Sr,null,ao(Z.variableList,(fe,se)=>(Se(),en("div",{key:fe.v_id},[k(H,null,{default:N(()=>[k(q,{span:22},{default:N(()=>[k(U,{prop:`groupList.${Q}.variableList.${se}.variable`,rules:{type:"array",required:!0,message:E.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:N(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:a,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.variable.placeholder"),modelValue:fe.variable,"onUpdate:modelValue":ce=>fe.variable=ce},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(q,{span:2},{default:N(()=>[k(X,{link:"",class:"mt-4 ml-4",disabled:Z.variableList.length<=1,onClick:ce=>A(Q,se)},{default:N(()=>[k(gr,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(X,{onClick:fe=>S(Q),type:"primary",size:"large",link:""},{default:N(()=>[k(gr,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(E.$t("common.add")),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),k(X,{onClick:j[1]||(j[1]=Z=>f()),type:"primary",size:"large",link:""},{default:N(()=>[k(gr,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup")),1)]),_:1})]),_:1},8,["model"]),k(xY,{ref_key:"GroupFieldDialogRef",ref:r,onRefresh:g},null,512)]),_:1},8,["nodeModel"])}}});class NY extends Uo{constructor(t){super(t,RY)}getConfig(t){return t.model.properties.config}}const CY={type:"variable-aggregation-node",model:Vo,view:NY},DY=Object.freeze(Object.defineProperty({__proto__:null,default:CY},Symbol.toStringTag,{value:"Module"})),jY={class:"flex-between"},IY={class:"flex-between mb-8"},LY={class:"lighter"},$Y={key:0,class:"flex w-full"},FY=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],a=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),r={variableList:[{id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:A=>{Te.set(t.nodeModel.properties,"nodeData",A)}}),c=$e(),v=$e(),f=$e(),g=async()=>{var M;let A=[(M=c.value)==null?void 0:M.validate(),...v.value.map(x=>x.validate())];return f.value&&(A=[...A,...v.value.map(x=>x.validate())]),Promise.all(A).catch(x=>Promise.reject({node:t.nodeModel,errMessage:x}))};function b(){const A=Te.cloneDeep(t.nodeModel.properties.nodeData.variableList),M={id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};A.push(M),Te.set(t.nodeModel.properties.nodeData,"variableList",A)}function _(A){const M=Te.cloneDeep(t.nodeModel.properties.nodeData.variableList);M.splice(A,1),Te.set(t.nodeModel.properties.nodeData,"variableList",M)}function S(A){t.nodeModel.graphModel.nodes.map(M=>{M.id==="start-node"&&(M.properties.config.globalFields.forEach(x=>{x.value===A.fields[1]&&(A.name=x.label)}),M.properties.config.chatFields.forEach(x=>{x.value===A.fields[1]&&(A.name=x.label)}))})}return qr(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&Ru(t.nodeModel)&&Te.set(t.nodeModel.properties.nodeData,"isResult",!0),Te.set(t.nodeModel,"validate",g)}),(A,M)=>{const x=ee("AppIcon"),E=ee("el-button"),j=ee("el-form-item"),D=ee("el-option"),V=ee("el-select"),U=ee("el-input"),L=ee("el-input-number"),F=ee("CodemirrorEditor"),X=ee("el-card"),q=ee("Plus"),H=ee("el-icon"),B=ee("el-form");return Se(),lt(Fo,{nodeModel:A.nodeModel},{default:N(()=>[k(B,{onSubmit:M[0]||(M[0]=Qt(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:N(()=>[(Se(!0),en(Sr,null,ao(s.value.variableList,(G,Z)=>(Se(),lt(X,{key:G.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(j,{label:A.$t("views.applicationWorkflow.variable.label")},{label:N(()=>[K("div",jY,[K("div",null,[ot(_e(A.$t("views.applicationWorkflow.variable.label"))+" ",1),M[1]||(M[1]=K("span",{class:"color-danger"},"*",-1))]),s.value.variableList.length>1?(Se(),lt(E,{key:0,text:"",onClick:Q=>_(Z)},{default:N(()=>[k(x,{iconName:"app-delete"})]),_:2},1032,["onClick"])):kn("",!0)])]),default:N(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:G.fields,"onUpdate:modelValue":Q=>G.fields=Q,global:!0,onChange:Q=>S(G)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),K("div",IY,[K("span",LY,[ot(_e(A.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),M[2]||(M[2]=K("span",{class:"color-danger"},"*",-1))]),k(V,{teleported:!1,modelValue:G.source,"onUpdate:modelValue":Q=>G.source=Q,size:"small",style:{width:"85px"}},{default:N(()=>[k(D,{label:A.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(D,{label:A.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),G.source==="custom"?(Se(),en("div",$Y,[k(V,{modelValue:G.type,"onUpdate:modelValue":Q=>G.type=Q,style:{"max-width":"85px"},class:"mr-8",onChange:Q=>s.value.variableList[Z].value=null},{default:N(()=>[(Se(),en(Sr,null,ao(n,Q=>k(D,{key:Q,label:Q,value:Q},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),G.type==="string"?(Se(),lt(j,{key:0,prop:"variableList."+Z+".value",rules:{message:Qn(St)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:N(()=>[k(U,{modelValue:G.value,"onUpdate:modelValue":Q=>G.value=Q,placeholder:A.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:a},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):G.type==="num"?(Se(),lt(j,{key:1,prop:"variableList."+Z+".value",rules:{message:A.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:N(()=>[k(L,{modelValue:G.value,"onUpdate:modelValue":Q=>G.value=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):G.type==="json"?(Se(),lt(j,{key:2,class:"w-full",prop:"variableList."+Z+".value",rules:[{message:A.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(Q,fe,se)=>{try{JSON.parse(fe),se()}catch{se(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:N(()=>[k(F,{title:"JSON",modelValue:G.value,"onUpdate:modelValue":Q=>G.value=Q,style:{height:"100px",width:"155px"},onSubmitDialog:Q=>s.value.variableList[Z].value=Q},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):kn("",!0)])):(Se(),lt(j,{key:1},{default:N(()=>[k(oo,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:f,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:G.reference,"onUpdate:modelValue":Q=>G.reference=Q},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),k(E,{link:"",type:"primary",onClick:b},{default:N(()=>[k(H,{class:"mr-4"},{default:N(()=>[k(q)]),_:1}),ot(" "+_e(A.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class UY extends Uo{constructor(t){super(t,FY)}}const VY={type:"variable-assign-node",model:Vo,view:UY},BY=Object.freeze(Object.defineProperty({__proto__:null,default:VY},Symbol.toStringTag,{value:"Module"})),WY={class:"flex align-center"},GY={class:"mr-4"},zY={class:"flex align-center"},HY={class:"mr-4"},XY={class:"flex align-center"},qY={class:"mr-4"},YY={class:"dialog-footer"},KY=er({__name:"VariableFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=$e(),s=$e(!1),c=$e(!1),v=$e(null),f=$e({field:"",label:"",expression:""}),g=ch({label:[{required:!0,message:St("dynamicsForm.paramForm.name.placeholder"),trigger:"blur"}],field:[{required:!0,message:St("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:St("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}],expression:[{required:!0,message:St("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder"),trigger:"blur"}]}),b=$e(!1),_=(M,x)=>{M&&(f.value=Te.cloneDeep(M),c.value=!0,v.value=x),b.value=!0},S=()=>{b.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},A=async M=>{M&&await M.validate(x=>{x&&a("refresh",f.value,v.value)})};return t({open:_,close:S}),(M,x)=>{const E=ee("el-input"),j=ee("el-form-item"),D=ee("AppIcon"),V=ee("el-tooltip"),U=ee("el-form"),L=ee("el-button"),F=ee("el-dialog");return Se(),lt(F,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableSplittingNode.editVariables"):M.$t("views.applicationWorkflow.nodes.variableSplittingNode.addVariables"),modelValue:b.value,"onUpdate:modelValue":x[4]||(x[4]=X=>b.value=X),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":S,"append-to-body":""},{footer:N(()=>[K("span",YY,[k(L,{onClick:Qt(S,["prevent"])},{default:N(()=>[ot(_e(M.$t("common.cancel")),1)]),_:1}),k(L,{type:"primary",onClick:x[3]||(x[3]=X=>A(r.value)),loading:s.value},{default:N(()=>[ot(_e(M.$t("common.save")),1)]),_:1},8,["loading"])])]),default:N(()=>[k(U,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right","hide-required-asterisk":""},{default:N(()=>[k(j,{prop:"field"},{label:N(()=>[K("div",WY,[K("span",GY,_e(M.$t("common.variable")),1),x[5]||(x[5]=K("span",{class:"color-danger"},"*",-1))])]),default:N(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":x[0]||(x[0]=X=>f.value.field=X),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1}),k(j,{prop:"label"},{label:N(()=>[K("div",zY,[K("span",HY,_e(M.$t("dynamicsForm.paramForm.name.label")),1),x[6]||(x[6]=K("span",{class:"color-danger"},"*",-1))])]),default:N(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":x[1]||(x[1]=X=>f.value.label=X),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),k(j,{prop:"expression"},{label:N(()=>[K("div",XY,[K("span",qY,[ot(_e(M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.label"))+" ",1),x[7]||(x[7]=K("span",{class:"color-danger"},"*",-1))]),k(V,{effect:"dark",content:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.tooltip"),placement:"right"},{default:N(()=>[k(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:N(()=>[k(E,{modelValue:f.value.expression,"onUpdate:modelValue":x[2]||(x[2]=X=>f.value.expression=X),maxlength:64,"show-word-limit":"",placeholder:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),ZY={class:"flex-between w-full"},JY={class:"break-all lighter"},QY={class:"ml-4",style:{"margin-top":"-4px"}},eK=["title"],tK=["title"],nK={class:"mr-4"},rK=er({__name:"VariableFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=$e(),a=$e(),r=$e([]);function s(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1);const g=[{label:St("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];Te.set(t.nodeModel.properties.config,"fields",g)}function v(f,g){for(let _=0;_<r.value.length;_++)if(r.value[_].field===f.field&&g!==_){mi(St("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close();const b=[{label:St("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];Te.set(t.nodeModel.properties.config,"fields",b)}return qr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=Te.cloneDeep(t.nodeModel.properties.nodeData.variableList)),Te.set(t.nodeModel.properties.nodeData,"variableList",r);const f=[{label:St("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];Te.set(t.nodeModel.properties.config,"fields",f)}),(f,g)=>{var x;const b=ee("AppIcon"),_=ee("el-button"),S=ee("el-table-column"),A=ee("el-tooltip"),M=ee("el-table");return Se(),en(Sr,null,[K("div",ZY,[K("h5",JY,[ot(_e(f.$t("views.applicationWorkflow.nodes.variableSplittingNode.splitVariables"))+" ",1),g[1]||(g[1]=K("span",{class:"color-danger"},"*",-1))]),K("span",QY,[k(_,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>s())},{default:N(()=>[k(b,{iconName:"app-add-outlined"})]),_:1})])]),((x=t.nodeModel.properties.nodeData.variableList)==null?void 0:x.length)>0?(Se(),lt(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:N(()=>[k(S,{prop:"field",label:f.$t("common.variable"),width:"95"},{default:N(({row:E})=>[K("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,eK)]),_:1},8,["label"]),k(S,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:N(({row:E})=>[K("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,tK)]),_:1},8,["label"]),k(S,{label:f.$t("common.operation"),align:"left",width:"90"},{default:N(({row:E,$index:j})=>[K("span",nK,[k(A,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:N(()=>[k(_,{type:"primary",text:"",onClick:Qt(D=>s(E,j),["stop"])},{default:N(()=>[k(b,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(A,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:N(()=>[k(_,{type:"primary",text:"",onClick:D=>c(j)},{default:N(()=>[k(b,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):kn("",!0),k(KY,{ref_key:"VariableFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),oK={class:"title-decoration-1 mb-8"},iK={class:"flex-between"},aK=er({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={inputVariable:[],variableList:[]},a=Zn({get:()=>(t.nodeModel.properties.nodeData||Te.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:c=>{Te.set(t.nodeModel.properties,"nodeData",c)}}),r=$e(),s=async()=>r.value.validate();return qr(()=>{Te.set(t.nodeModel,"validate",s)}),(c,v)=>{const f=ee("el-form-item"),g=ee("el-form"),b=ee("el-card");return Se(),lt(Fo,{nodeModel:c.nodeModel},{default:N(()=>[K("h5",oK,_e(c.$t("views.applicationWorkflow.nodeSetting")),1),k(b,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:N(()=>[k(g,{onSubmit:v[1]||(v[1]=Qt(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:r,"hide-required-asterisk":""},{default:N(()=>[k(f,{prop:"inputVariable",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:N(()=>[K("div",iK,[K("div",null,[ot(_e(c.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),v[2]||(v[2]=K("span",{class:"color-danger"},"*",-1))])])]),default:N(()=>[k(oo,{ref:"nodeCascaderRef",nodeModel:c.nodeModel,class:"w-full",placeholder:c.$t("views.applicationWorkflow.variable.placeholder"),modelValue:a.value.inputVariable,"onUpdate:modelValue":v[0]||(v[0]=_=>a.value.inputVariable=_)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(f,{prop:"variableList",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{default:N(()=>[k(rK,{ref:"VariableFieldTableRef","node-model":c.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class lK extends Uo{constructor(t){super(t,aK)}}const sK={type:"variable-splitting-node",model:Vo,view:lK},uK=Object.freeze(Object.defineProperty({__proto__:null,default:sK},Symbol.toStringTag,{value:"Module"})),iA=er({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>Ra((Se(),en("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=Qt(()=>{},["stop"])),onClick:r[1]||(r[1]=Qt(()=>{},["stop"]))},[(Se(),en("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[K("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),K("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[th,t.model.isHovered]])}});function cK(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const fK=32,dK=32;class pK extends vn.BezierEdge{constructor(){super();Ma(this,"isMounted");Ma(this,"customLineApp");Ma(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");cK(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&(zg()?uP(this.targetId(),iA,n,this.props.model,a,(s,c)=>({model:s,graph:c})):(this.customLineApp=rM({render:()=>Rv(iA,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),zg()&&cP(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=fK,customHeight:s=dK}=n.getProperties(),{startPoint:c,endPoint:v,path:f,isAnimation:g,arrowConfig:b}=n,_=n.getEdgeAnimationStyle(),{strokeDasharray:S,stroke:A,strokeDashoffset:M,animationName:x,animationDuration:E,animationIterationCount:j,animationTimingFunction:D,animationDirection:V}=_,U={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},L=n.getEdgeStyle(),F={width:r,height:s};return setTimeout(()=>{const X=document.getElementById(a);X&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(X))},0),delete L.stroke,vn.h("g",{},[vn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),vn.h("path",{d:f,...L,...b,...g?{strokeDasharray:S,stroke:A,style:{strokeDashoffset:M,animationName:x,animationDuration:E,animationIterationCount:j,animationTimingFunction:D,animationDirection:V}}:{}}),vn.h("foreignObject",{...U,y:U.y+5,x:U.x+5,style:{}},[vn.h("div",{id:a,style:{...F},className:"lf-custom-edge-wrapper"})])])}}class hK extends vn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const vK={type:"app-edge",view:pK,model:hK},mK=er({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var f;(f=t.lf)==null||f.zoom(!0,[0,0])}function a(){var f;(f=t.lf)==null||f.zoom(!1,[0,0])}function r(){var f,g,b;(f=t.lf)==null||f.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(b=t.lf)==null||b.fitView()}const s=()=>{var f;(f=t.lf)==null||f.extension.dagre.layout()},c=()=>{var f;(f=t.lf)==null||f.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var f;(f=t.lf)==null||f.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(f,g)=>{const b=ee("ZoomOut"),_=ee("el-icon"),S=ee("el-tooltip"),A=ee("el-button"),M=ee("ZoomIn"),x=ee("AppIcon"),E=ee("el-divider"),j=ee("el-card");return Se(),lt(j,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:N(()=>[k(A,{link:"",onClick:a,style:{border:"none"}},{default:N(()=>[k(S,{effect:"dark",content:f.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:N(()=>[k(_,{size:16,title:f.$t("views.applicationWorkflow.control.zoomOut")},{default:N(()=>[k(b)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:n,style:{border:"none"}},{default:N(()=>[k(S,{effect:"dark",content:f.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:N(()=>[k(_,{size:16,title:f.$t("views.applicationWorkflow.control.zoomIn")},{default:N(()=>[k(M)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:r,style:{border:"none"}},{default:N(()=>[k(S,{effect:"dark",content:f.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:N(()=>[k(x,{iconName:"app-fitview",title:f.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(E,{direction:"vertical"}),k(A,{link:"",onClick:c,style:{border:"none"}},{default:N(()=>[k(S,{effect:"dark",content:f.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:N(()=>[k(x,{style:{"font-size":"16px"},iconName:"app-retract",title:f.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:v,style:{border:"none"}},{default:N(()=>[k(S,{effect:"dark",content:f.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:N(()=>[k(x,{style:{"font-size":"16px"},iconName:"app-extend",title:f.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(A,{link:"",onClick:s,style:{border:"none"}},{default:N(()=>[k(S,{effect:"dark",content:f.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:N(()=>[k(x,{style:{"font-size":"16px"},iconName:"app-beautify",title:f.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let cc=null;function aA(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function lA(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const cv=40;let pg=40;function yK(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var _,S;if(pg=cv,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,f=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(f):!0)||f.nodes.length===0&&f.edges.length===0)return cc=null,!0;const b=f.nodes.filter(A=>A.type===ei.Start||A.type===ei.Base);if(b.length>0){mi(((S=(_=b[0])==null?void 0:_.properties)==null?void 0:S.nodeName)+St("views.applicationWorkflow.tip.cannotCopy"));return}return cc=f,cc.nodes.forEach(A=>aA(A,cv)),cc.edges.forEach(A=>lA(A,cv)),Xd(St("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;if(cc&&(cc.nodes||cc.edges)){e.clearSelectElements();const v=e.addElements(cc,pg);if(!v)return!0;v.nodes.forEach(f=>e.selectElementById(f.id,!0)),v.edges.forEach(f=>e.selectElementById(f.id,!0)),cc.nodes.forEach(f=>aA(f,cv)),cc.edges.forEach(f=>lA(f,cv)),pg=pg+cv}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(b=>e.deleteEdge(b.id));return}const f=v.nodes.filter(b=>["start-node","base-node"].includes(b.type));if(f.length>0){mi(`${(g=f[0].properties)==null?void 0:g.nodeName}${St("views.applicationWorkflow.delete.deleteMessage")}`);return}return nE(St("common.tip"),St("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:St("common.confirm"),confirmButtonClass:"color-danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;v.edges.forEach(b=>e.deleteEdge(b.id)),v.nodes.forEach(b=>e.deleteNode(b.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class gK{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const bK=e=>typeof e=="string",sA=Array.isArray,Zg=e=>typeof e=="number",xP=e=>e!==null&&typeof e=="object",Jg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Jg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Jg(t[n])}),t}return e},fv=(e,t)=>{const n=e[t];return xP(n)?n.cell:n},uA=(e,t,n)=>{let a;return n?a=n:Zg(e)?a=()=>e:a=()=>t,a},_K=(e,t)=>{if(e!=="next"&&e!=="prev")return t},cA=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let wK=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return cA(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&cA(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,_K)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var xv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(xv||(xv={}));function fA(e,t){var n=e.get(t)||0;e.set(t,n+1)}function dA(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function AP(e,t,n,a){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+xv.EDGE_KEY_DELIM+s+xv.EDGE_KEY_DELIM+(a===void 0?xv.DEFAULT_EDGE_NAME:a)}function pA(e,t,n,a){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return a!==void 0&&(c.name=a),c}function C1(e,t){return AP(e,t.v,t.w,t.name)}function hA(e){return typeof e=="function"}var EK=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),s={id:n,value:a,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},OK=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},SK=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:EK(t),edges:OK(t),value:t.graph()};return n.value===void 0&&delete n.value,n},xK=function(t){var n=new qv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function mA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(a){AK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MK(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function kK(e,t,n){return t&&MK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var PK={compound:!1,multigraph:!1,directed:!0},qv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};TK(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=xv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return hA(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var f=s===void 0?t.GRAPH_NODE:s,g=t.parent(f);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,f);var b=t.childrenMap.get(f);return b.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(f,b),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,f=new e({directed:s,multigraph:c,compound:v});if(f.setGraph(t.graph()),t.nodes().forEach(function(b){r(b)&&f.setNode(b,t.node(b))}),t.edges().forEach(function(b){f.hasNode(b.v)&&f.hasNode(b.w)&&f.setEdgeObj(b,t.edge(b))}),v){var g=function(_){for(var S=t.parent(_);S!==void 0&&!f.hasNode(S);)S=t.parent(S);return S};f.nodes().forEach(function(b){f.setParent(b,g(b))})}return f},this.setDefaultEdgeLabel=function(r){return hA(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(C1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has(C1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return SK(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=mA(mA({},PK),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return kK(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,f=this.childrenMap,g=this.inEdgesMap,b=this.outEdgesMap,_=this.predecessorsMap,S=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||s(n)),c()){var A;v==null||v.set(n,this.GRAPH_NODE),f==null||f.set(n,new Map),f!=null&&f.has(this.GRAPH_NODE)||f==null||f.set(this.GRAPH_NODE,new Map),f==null||(A=f.get(this.GRAPH_NODE))===null||A===void 0||A.set(n,!0)}return[g,b,_,S].forEach(function(M){return M.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(E){a.removeEdge(E.v,E.w,E.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,f=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var b,_,S;this.removeFromParentsChildList(n),(b=this.parentMap)===null||b===void 0||b.delete(n),(_=this.children(n))===null||_===void 0||_.forEach(function(x){return a.setParent(x)}),(S=this.childrenMap)===null||S===void 0||S.delete(n)}var A=s.get(n),M=c.get(n);Array.from(A.values()).forEach(function(x){return r(x)}),Array.from(M.values()).forEach(function(x){return r(x)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),f.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,s){var c,v,f=pA(this.isDirected(),n,a,s),g=C1(this.isDirected(),f),b=f.v,_=f.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(_),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(b,_,s)),Object.freeze(f),this.edgesMap.set(g,f);var S=this.predecessorsMap.get(_),A=this.successorsMap.get(b);return fA(S,b),fA(A,_),(c=this.inEdgesMap.get(_))===null||c===void 0||c.set(g,f),(v=this.outEdgesMap.get(b))===null||v===void 0||v.set(g,f),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var s=AP(this.isDirected(),n,a,r),c=this.edgesMap.get(s);if(c){var v=pA(this.isDirected(),n,a,r),f=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var b=this.predecessorsMap.get(g),_=this.successorsMap.get(f);dA(b,f),dA(_,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(f).delete(s),this.edgeCountNum-=1}return this}}]),e}();qv.fromJSON=xK;function RK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function NK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var TP=RK(function e(){var t=this;NK(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,s=t.keyIndice,c=[r[n],r[a]],v=c[0],f=c[1];r[n]=f,r[a]=v,s.set(v.key,a),s.set(f.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=a[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var a=t.arr,r=n<<1,s=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,s<a.length&&(c=a[s].priority<a[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),CK=function(t,n){var a=new qv,r=new Map,s=new TP,c;function v(b){var _=b.v===c?b.w:b.v,S=s.priority(_);if(S!==void 0){var A=n(b);A<S&&(r.set(_,c),s.decrease(_,A))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(b){s.add(b,Number.POSITIVE_INFINITY),a.setNode(b)}),s.decrease(t.nodes()[0],0);for(var f=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(f)throw new Error("Input graph is not connected: "+t.graph());f=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return a},DK=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var f=v.pop();if(!n.has(f)){var g,b;n.add(f),c.push(f),(g=t.successors(f))===null||g===void 0||g.forEach(function(_){return v.push(_)}),(b=t.predecessors(f))===null||b===void 0||b.forEach(function(_){return v.push(_)})}}c.length&&a.push(c)}),a},jK=function e(t,n,a,r,s,c){r.includes(n)||(r.push(n),a||c.push(n),s(n).forEach(function(v){return e(t,v,a,r,s,c)}),a&&c.push(n))},UE=function(t,n,a){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(f){if(t.hasNode(f))jK(t,f,a==="post",v,s,c);else throw new Error("Graph does not have node: "+f)}),c};function IK(e,t){return UK(e)||FK(e,t)||$K(e,t)||LK()}function LK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $K(e,t){if(e){if(typeof e=="string")return yA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yA(e,t)}}function yA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function FK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(f){s=!0,v=f}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return a}}function UK(e){if(Array.isArray(e))return e}var VK=function(){return 1},MP=function(t,n,a,r){return BK(t,n,a||VK,r||function(s){return t.outEdges(s)})},BK=function(t,n,a,r){var s=new Map,c=new TP,v,f,g=function(S){var A=S.v!==v?S.v:S.w,M=s.get(A),x=a(S),E=f.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+x);E<M.distance&&(M.distance=E,M.predecessor=v,c.decrease(A,E))};for(t.nodes().forEach(function(_){var S=_===n?0:Number.POSITIVE_INFINITY;s.set(_,{distance:S}),c.add(_,S)});c.size()>0&&(v=c.removeMin(),f=s.get(v),!(f&&f.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var b={};return Array.from(s.entries()).forEach(function(_){var S=IK(_,2),A=S[0],M=S[1];return b[String(A)]=M,b}),b},WK=function(t,n,a){var r={};return t.nodes().forEach(function(s){return r[String(s)]=MP(t,s,n,a),r}),r},kP=function(t){var n=0,a=[],r=new Map,s=[];function c(v){var f,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,a.push(v),(f=t.successors(v))===null||f===void 0||f.forEach(function(A){var M;if(r.has(A)){if(!((M=r.get(A))===null||M===void 0)&&M.onStack){var E=r.get(A);g.lowlink=Math.min(g.lowlink,E.index)}}else{c(A);var x=r.get(A);g.lowlink=Math.min(g.lowlink,x.lowlink)}}),g.lowlink===g.index){var b=[],_;do{_=a.pop();var S=r.get(_);S.onStack=!1,b.push(_)}while(v!==_);s.push(b)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},GK=function(t){return kP(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function $w(e){"@babel/helpers - typeof";return $w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$w(e)}function zK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function HK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wm(e,t)}function qK(e){var t=PP();return function(){var a=Gm(e),r;if(t){var s=Gm(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return YK(this,r)}}function YK(e,t){if(t&&($w(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KK(e)}function KK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fw(e){var t=typeof Map=="function"?new Map:void 0;return Fw=function(a){if(a===null||!ZK(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return Ag(a,arguments,Gm(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Wm(r,a)},Fw(e)}function Ag(e,t,n){return PP()?Ag=Reflect.construct:Ag=function(r,s,c){var v=[null];v.push.apply(v,s);var f=Function.bind.apply(r,v),g=new f;return c&&Wm(g,c.prototype),g},Ag.apply(null,arguments)}function PP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ZK(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Wm(e,t){return Wm=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Wm(e,t)}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Gm(e)}var Uw=function(e){XK(n,e);var t=qK(n);function n(){return HK(this,n),t.apply(this,arguments)}return zK(n)}(Fw(Error));function RP(e){var t=new Set,n=new Set,a=[];function r(s){if(n.has(s))throw new Uw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),a.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Uw;return a}var JK=function(t){try{RP(t)}catch(n){if(n instanceof Uw)return!1;throw n}return!0},QK=function(t,n){return UE(t,n,"post")},eZ=function(t,n){return UE(t,n,"pre")},tZ=function(){return 1};function nZ(e,t,n){return rZ(e,t||tZ,n||function(a){return e.outEdges(a)})}function rZ(e,t,n){var a={},r=e.nodes();return r.forEach(function(s){var c=String(s);a[c]={},a[c][c]={distance:0},r.forEach(function(v){s!==v&&(a[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var f=v.v===s?v.w:v.v,g=t(v);a[c][String(f)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=a[c];r.forEach(function(f){var g=String(f),b=a[g];r.forEach(function(_){var S=String(_),A=b[c],M=v[S],x=b[S],E=A.distance+M.distance;E<x.distance&&(x.distance=E,x.predecessor=M.predecessor)})})}),a}const oZ=Object.freeze(Object.defineProperty({__proto__:null,components:DK,dfs:UE,dijkstra:MP,dijkstraAll:WK,findCycles:GK,floydWarshall:nZ,isAcyclic:JK,postorder:QK,preorder:eZ,prim:CK,tarjan:kP,topsort:RP},Symbol.toStringTag,{value:"Module"}));class iZ extends wK{}class aZ extends qv{}const lZ=()=>1,sZ=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=cZ(e,t||lZ);return(n=uZ(a.graph,a.buckets,a.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},uZ=(e,t,n)=>{let a=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)D1(e,t,n,c);for(;c=r.dequeue();)D1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){a=a.concat(D1(e,t,n,c,!0));break}}}return a},D1=(e,t,n,a,r)=>{var s,c;const v=[];return(s=e.inEdges(a.v))===null||s===void 0||s.forEach(f=>{const g=e.edge(f),b=e.node(f.v);r&&v.push({v:f.v,w:f.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=g,Vw(t,n,b)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(f=>{const g=e.edge(f),b=f.w,_=e.node(b);_.in===void 0&&(_.in=0),_.in-=g,Vw(t,n,_)}),e.removeNode(a.v),r?v:void 0},cZ=(e,t)=>{const n=new aZ;let a=0,r=0;e.nodes().forEach(f=>{n.setNode(f,{v:f,in:0,out:0})}),e.edges().forEach(f=>{const g=n.edge(f)||0,b=(t==null?void 0:t(f))||1,_=g+b;n.setEdge(f.v,f.w,_),r=Math.max(r,n.node(f.v).out+=b),a=Math.max(a,n.node(f.w).in+=b)});const s=[],c=r+a+3;for(let f=0;f<c;f++)s.push(new iZ);const v=a+1;return n.nodes().forEach(f=>{Vw(s,v,n.node(f))}),{buckets:s,zeroIdx:v,graph:n}},Vw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},fZ=e=>{const t=a=>r=>{var s;return((s=a.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?sZ(e,t(e)):dZ(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},dZ=e=>{const t=[],n={},a={},r=s=>{var c;a[s]||(a[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},pZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},gA={run:fZ,undo:pZ};class If extends qv{}const hZ=(e,t)=>Number(e)-Number(t),Yv=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},vZ=e=>{const t=new If().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},NP=e=>{const t=new If({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},mZ=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),bA=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-a;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let f,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),f=v*r/s,g=v):(r<0&&(c=-c),f=c,g=c*s/r),{x:n+f,y:a+g}},zm=e=>{const t=[],n=CP(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,s)=>{var c,v;return hZ((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},yZ=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},gZ=e=>{const t=e.nodes(),n=t.filter(v=>{var f;return((f=e.node(v))===null||f===void 0?void 0:f.rank)!==void 0}).map(v=>e.node(v).rank),a=Math.min(...n),r=[];t.forEach(v=>{var f;const g=(((f=e.node(v))===null||f===void 0?void 0:f.rank)||0)-a;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const f=r[v];f===void 0?v%c!==0&&(s-=1):s&&(f==null||f.forEach(g=>{const b=e.node(g);b&&(b.rank=b.rank||0,b.rank+=s)}))}},_A=(e,t,n,a)=>{const r={width:0,height:0};return Zg(n)&&Zg(a)&&(r.rank=n,r.order=a),Yv(e,"border",r,t)},CP=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},bZ=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},DP=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},jP=(e,t)=>t(),VE=(e,t)=>e.reduce((n,a)=>{const r=t(n),s=t(a);return r>s?a:n}),_Z=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>wZ(e,t))},wZ=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),f=v.labelRank;if(s===a+1)return;e.removeEdgeObj(t);const g=e.graph();let b,_,S;for(S=0,++a;a<s;++S,++a)v.points=[],_={edgeLabel:v,width:0,height:0,edgeObj:t,rank:a},b=Yv(e,"edge",_,"_d"),a===f&&(_.width=v.width,_.height=v.height,_.dummy="edge-label",_.labelpos=v.labelpos),e.setEdge(n,b,{weight:v.weight},c),S===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(b)),n=b;e.setEdge(n,r,{weight:v.weight},c)},EZ=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let s;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=s,a=e.node(c)})},wA={run:_Z,undo:EZ},IP=e=>{var t;const n={},a=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(f=>{const g=a(f.w),b=e.edge(f).minlen,_=g-b;_&&(v===void 0||_<v)&&(v=_)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},OZ=e=>{var t;const n={};let a;const r=v=>{var f;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let b;return(f=e.outEdges(v))===null||f===void 0||f.forEach(_=>{const S=r(_.w),A=e.edge(_).minlen,M=S-A;M&&(b===void 0||M<b)&&(b=M)}),b||(b=0),(a===void 0||b<a)&&(a=b),g.rank=b,b};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),a===void 0&&(a=0);const s={},c=(v,f)=>{var g;const b=e.node(v),_=isNaN(b.layer)?f:b.layer;(b.rank===void 0||b.rank<_)&&(b.rank=_),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(S=>{c(S.w,_+e.edge(S).minlen)}))};e.nodes().forEach(v=>{const f=e.node(v);f&&(isNaN(f.layer)?f.rank-=a:c(v,f.layer))})},Yd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,SZ=e=>{const t=new If({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,s;for(;xZ(t,e)<a;)r=LP(t,e),s=t.hasNode(r.v)?Yd(e,r):-Yd(e,r),$P(t,e,s);return t},xZ=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const s=r.v,c=a===s?r.w:s;!e.hasNode(c)&&!Yd(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},AZ=e=>{const t=new If({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;TZ(t,e)<a;)r=LP(t,e),s=t.hasNode(r.v)?Yd(e,r):-Yd(e,r),$P(t,e,s);return t},TZ=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(s=>{const c=s.v,v=a===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Yd(t,s))&&(e.setNode(v,{}),e.setEdge(a,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},LP=(e,t)=>VE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Yd(t,n):1/0),$P=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:MZ,postorder:kZ}=oZ,PZ=e=>{const t=vZ(e);IP(t);const n=SZ(t);UP(n),FP(n,t);let a,r;for(;a=CZ(n);)r=DZ(n,t,a),jZ(n,t,a,r)},FP=(e,t)=>{let n=kZ(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{RZ(e,t,a)})},RZ=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=NZ(e,t,n)},NZ=(e,t,n)=>{var a;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),f=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),f=v.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(g=>{const b=g.v===n,_=b?g.w:g.v;if(_!==s){const S=b===c,A=t.edge(g).weight;if(f+=S?A:-A,LZ(e,n,_)){const M=e.edgeFromArgs(n,_).cutvalue;f+=S?-M:M}}}),f},UP=(e,t=e.nodes()[0])=>{VP(e,{},1,t)},VP=(e,t,n,a,r)=>{var s;const c=n;let v=n;const f=e.node(a);return t[a]=!0,(s=e.neighbors(a))===null||s===void 0||s.forEach(g=>{t[g]||(v=VP(e,t,v,g,a))}),f.low=c,f.lim=v++,r?f.parent=r:delete f.parent,v},CZ=e=>e.edges().find(t=>e.edge(t).cutvalue<0),DZ=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const s=e.node(a),c=e.node(r);let v=s,f=!1;s.lim>c.lim&&(v=c,f=!0);const g=t.edges().filter(b=>f===EA(e,e.node(b.v),v)&&f!==EA(e,e.node(b.w),v));return VE(g,b=>Yd(t,b))},jZ=(e,t,n,a)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(a.v,a.w,{}),UP(e),FP(e,t),IZ(e,t)},IZ=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let a=MZ(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},LZ=(e,t,n)=>e.hasEdge(t,n),EA=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,$Z=e=>{switch(e.graph().ranker){case"network-simplex":UZ(e);break;case"tight-tree":OA(e);break;case"longest-path":FZ(e);break;default:OA(e)}},FZ=IP,OA=e=>{OZ(e),AZ(e)},UZ=e=>{PZ(e)},VZ=e=>{var t;const n={};let a=0;const r=s=>{var c;const v=a;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},BZ=(e,t,n,a)=>{const r=[],s=[],c=Math.min(t[n].low,t[a].low),v=Math.max(t[n].lim,t[a].lim);let f,g;f=n;do f=e.parent(f),r.push(f);while(f&&(t[f].low>c||v>t[f].lim));for(g=f,f=a;f&&f!==g;)s.push(f),f=e.parent(f);return{lca:g,path:r.concat(s.reverse())}},WZ=e=>{var t;const n=VZ(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,s;let c=a,v=e.node(c);const f=v.edgeObj;if(!f)return;const g=BZ(e,n,f.v,f.w),b=g.path,_=g.lca;let S=0,A=b[S],M=!0;for(;c!==f.w;){if(v=e.node(c),M){for(;A!==_&&((r=e.node(A))===null||r===void 0?void 0:r.maxRank)<v.rank;)S++,A=b[S];A===_&&(M=!1)}if(!M){for(;S<b.length-1&&((s=e.node(b[S+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)S++;A=b[S]}e.setParent(c,A),c=e.successors(c)[0]}})},GZ=e=>{var t;const n=Yv(e,"root",{},"_root"),a=zZ(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(f=>{e.edge(f).minlen*=c});const v=HZ(e)+1;(t=e.children())===null||t===void 0||t.forEach(f=>{BP(e,n,c,v,s,a,f)}),e.graph().nodeRankFactor=c},BP=(e,t,n,a,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const f=_A(e,"_bt"),g=_A(e,"_bb"),b=e.node(c);e.setParent(f,c),b.borderTop=f,e.setParent(g,c),b.borderBottom=g,v==null||v.forEach(_=>{BP(e,t,n,a,r,s,_);const S=e.node(_),A=S.borderTop?S.borderTop:_,M=S.borderBottom?S.borderBottom:_,x=S.borderTop?a:2*a,E=A!==M?1:r-s[c]+1;e.setEdge(f,A,{minlen:E,weight:x,nestingEdge:!0}),e.setEdge(M,g,{minlen:E,weight:x,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,f,{weight:0,minlen:r+s[c]})},zZ=e=>{var t;const n={},a=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>a(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},HZ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},XZ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},SA={run:GZ,cleanup:XZ},qZ=e=>{var t;const n=a=>{const r=e.children(a),s=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)xA(e,"borderLeft","_bl",a,s,c),xA(e,"borderRight","_br",a,s,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},xA=(e,t,n,a,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],f=Yv(e,"border",c,n);r[t][s]=f,e.setParent(f,a),v&&e.setEdge(v,f,{weight:1})},YZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&WP(e)},KZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&ZZ(e),(n==="lr"||n==="rl")&&(JZ(e),WP(e))},WP=e=>{e.nodes().forEach(t=>{AA(e.node(t))}),e.edges().forEach(t=>{AA(e.edge(t))})},AA=e=>{const t=e.width;e.width=e.height,e.height=t},ZZ=e=>{e.nodes().forEach(t=>{j1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>j1(r)),a.hasOwnProperty("y")&&j1(a)})},j1=e=>{e!=null&&e.y&&(e.y=-e.y)},JZ=e=>{e.nodes().forEach(t=>{I1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>I1(r)),a.hasOwnProperty("x")&&I1(a)})},I1=e=>{const t=e.x;e.x=e.y,e.y=t},TA={adjust:YZ,undo:KZ};function QZ(e){return Array.isArray(e)}function Bw(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const MA=function(e){if(QZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},kA=e=>{const t={},n=e.nodes().filter(b=>{var _;return!(!((_=e.children(b))===null||_===void 0)&&_.length)}),a=n.map(b=>e.node(b).rank),r=Bw(a),s=[];for(let b=0;b<r+1;b++)s.push([]);const c=b=>{var _;if(t.hasOwnProperty(b))return;t[b]=!0;const S=e.node(b);isNaN(S.rank)||s[S.rank].push(b),(_=e.successors(b))===null||_===void 0||_.forEach(A=>c(A))},v=n.sort((b,_)=>e.node(b).rank-e.node(_).rank),g=v.filter(b=>e.node(b).fixorder!==void 0).sort((b,_)=>e.node(b).fixorder-e.node(_).fixorder);return g==null||g.forEach(b=>{isNaN(e.node(b).rank)||s[e.node(b).rank].push(b),t[b]=!0}),v==null||v.forEach(c),s},eJ=(e,t,n)=>{const a=mZ(n,n.map((b,_)=>_)),s=t.map(b=>{var _;const S=(_=e.outEdges(b))===null||_===void 0?void 0:_.map(A=>({pos:a[A.w]||0,weight:e.edge(A).weight}));return S==null?void 0:S.sort((A,M)=>A.pos-M.pos)}).flat().filter(b=>b!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const f=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(b=>{if(b){let _=b.pos+c;f[_]+=b.weight;let S=0;for(;_>0;)_%2&&(S+=f[_+1]),_=_-1>>1,f[_]+=b.weight;g+=b.weight*S}}),g},PA=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=eJ(e,t[a-1],t[a]);return n},tJ=(e,t,n)=>{const a=nJ(e),r=new If({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),f=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,f||a),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const b=g.v===s?g.w:g.v,_=r.edgeFromArgs(b,s),S=_!==void 0?_.weight:0;r.setEdge(b,s,{weight:e.edge(g).weight+S})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},nJ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},rJ=(e,t,n)=>{const a={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,f;for(;c;){if(v=e.parent(c),v?(f=a[v],a[v]=c):(f=r,r=c),f&&f!==c){t.setEdge(f,c);return}c=v}})},oJ=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),iJ=(e,t)=>{var n,a,r;const s={};e==null||e.forEach((v,f)=>{s[v.v]={i:f,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const f=s[v.v],g=s[v.w];f!==void 0&&g!==void 0&&(g.indegree++,f.out.push(s[v.w]))});const c=(r=(a=Object.values(s)).filter)===null||r===void 0?void 0:r.call(a,v=>!v.indegree);return aJ(c)},aJ=e=>{var t,n;const a=[],r=f=>g=>{g.merged||(g.barycenter===void 0||f.barycenter===void 0||g.barycenter>=f.barycenter)&&lJ(f,g)},s=f=>g=>{g.in.push(f),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const f=e.pop();a.push(f),(t=f.in.reverse())===null||t===void 0||t.forEach(g=>r(f)(g)),(n=f.out)===null||n===void 0||n.forEach(g=>s(f)(g))}const c=a.filter(f=>!f.merged),v=["vs","i","barycenter","weight"];return c.map(f=>{const g={};return v==null||v.forEach(b=>{f[b]!==void 0&&(g[b]=f[b])}),g})},lJ=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},sJ=(e,t,n,a)=>{const r=bZ(e,S=>{const A=S.hasOwnProperty("fixorder")&&!isNaN(S.fixorder);return a?!A&&S.hasOwnProperty("barycenter"):A||S.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((S,A)=>-S.i- -A.i),v=[];let f=0,g=0,b=0;s==null||s.sort(uJ(!!t,!!n)),b=RA(v,c,b),s==null||s.forEach(S=>{var A;b+=(A=S.vs)===null||A===void 0?void 0:A.length,v.push(S.vs),f+=S.barycenter*S.weight,g+=S.weight,b=RA(v,c,b)});const _={vs:v.flat()};return g&&(_.barycenter=f/g,_.weight=g),_},RA=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},uJ=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},GP=(e,t,n,a,r,s)=>{var c,v,f,g;let b=e.children(t);const _=e.node(t),S=_?_.borderLeft:void 0,A=_?_.borderRight:void 0,M={};S&&(b=b==null?void 0:b.filter(D=>D!==S&&D!==A));const x=oJ(e,b||[]);x==null||x.forEach(D=>{var V;if(!((V=e.children(D.v))===null||V===void 0)&&V.length){const U=GP(e,D.v,n,a,s);M[D.v]=U,U.hasOwnProperty("barycenter")&&fJ(D,U)}});const E=iJ(x,n);cJ(E,M),(c=E.filter(D=>D.vs.length>0))===null||c===void 0||c.forEach(D=>{const V=e.node(D.vs[0]);V&&(D.fixorder=V.fixorder,D.order=V.order)});const j=sJ(E,a,r,s);if(S&&(j.vs=[S,j.vs,A].flat(),!((v=e.predecessors(S))===null||v===void 0)&&v.length)){const D=e.node(((f=e.predecessors(S))===null||f===void 0?void 0:f[0])||""),V=e.node(((g=e.predecessors(A))===null||g===void 0?void 0:g[0])||"");j.hasOwnProperty("barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+D.order+V.order)/(j.weight+2),j.weight+=2}return j},cJ=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},fJ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},dJ=(e,t)=>{const n=CP(e),a=[],r=[];for(let b=1;b<n+1;b++)a.push(b);for(let b=n-1;b>-1;b--)r.push(b);const s=NA(e,a,"inEdges"),c=NA(e,r,"outEdges");let v=kA(e);L1(e,v);let f=Number.POSITIVE_INFINITY,g;for(let b=0,_=0;_<4;++b,++_){CA(b%2?s:c,b%4>=2,!1,t),v=zm(e);const S=PA(e,v);S<f&&(_=0,g=Jg(v),f=S)}v=kA(e),L1(e,v);for(let b=0,_=0;_<4;++b,++_){CA(b%2?s:c,b%4>=2,!0,t),v=zm(e);const S=PA(e,v);S<f&&(_=0,g=Jg(v),f=S)}L1(e,g)},NA=(e,t,n)=>t.map(a=>tJ(e,a,n)),CA=(e,t,n,a)=>{const r=new If;e==null||e.forEach(s=>{var c;const v=s.graph().root,f=GP(s,v,r,t,n,a);for(let g=0;g<((c=f.vs)===null||c===void 0?void 0:c.length);g++){const b=s.node(f.vs[g]);b&&(b.order=g)}rJ(s,r,f.vs)})},L1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class pJ extends qv{}const hJ=(e,t)=>{const n={},a=(r,s)=>{let c=0,v=0;const f=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((b,_)=>{var S;const A=mJ(e,b),M=A?e.node(A).order:f;(A||b===g)&&((S=s.slice(v,_+1))===null||S===void 0||S.forEach(x=>{var E;(E=e.predecessors(x))===null||E===void 0||E.forEach(j=>{var D;const V=e.node(j),U=V.order;(U<c||M<U)&&!(V.dummy&&(!((D=e.node(x))===null||D===void 0)&&D.dummy))&&zP(n,j,x)})}),v=_+1,c=M)}),s};return t!=null&&t.length&&t.reduce(a),n},vJ=(e,t)=>{const n={};function a(v,f,g,b,_){var S,A;let M;for(let x=f;x<g;x++)M=v[x],!((S=e.node(M))===null||S===void 0)&&S.dummy&&((A=e.predecessors(M))===null||A===void 0||A.forEach(E=>{const j=e.node(E);j.dummy&&(j.order<b||j.order>_)&&zP(n,E,M)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,f){const g=r(v);f.get(g)||(a(...v),f.set(g,!0))}const c=(v,f)=>{let g=-1,b,_=0;const S=new Map;return f==null||f.forEach((A,M)=>{var x;if(((x=e.node(A))===null||x===void 0?void 0:x.dummy)==="border"){const E=e.predecessors(A)||[];E.length&&(b=e.node(E[0]).order,s([f,_,M,g,b],S),_=M,g=b)}s([f,_,f.length,b,v.length],S)}),f};return t!=null&&t.length&&t.reduce(c),n},mJ=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},zP=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let s=e[a];s||(e[a]=s={}),s[r]=!0},yJ=(e,t,n)=>{let a=t,r=n;if(a>r){const s=t;a=r,r=s}return!!e[a]},gJ=(e,t,n,a)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((f,g)=>{r[f]=f,s[f]=f,c[f]=g})}),t==null||t.forEach(v=>{let f=-1;v==null||v.forEach(g=>{let b=a(g);if(b.length){b=b.sort((S,A)=>c[S]-c[A]);const _=(b.length-1)/2;for(let S=Math.floor(_),A=Math.ceil(_);S<=A;++S){const M=b[S];s[g]===g&&f<c[M]&&!yJ(n,g,M)&&(s[M]=g,s[g]=r[g]=r[M],f=c[M])}}})}),{root:r,align:s}},bJ=(e,t,n,a,r)=>{var s;const c={},v=_J(e,t,n,r),f=r?"borderLeft":"borderRight",g=(S,A)=>{let M=v.nodes(),x=M.pop();const E={};for(;x;)E[x]?S(x):(E[x]=!0,M.push(x),M=M.concat(A(x))),x=M.pop()},b=S=>{c[S]=(v.inEdges(S)||[]).reduce((A,M)=>Math.max(A,(c[M.v]||0)+v.edge(M)),0)},_=S=>{const A=(v.outEdges(S)||[]).reduce((x,E)=>Math.min(x,(c[E.w]||0)-v.edge(E)),Number.POSITIVE_INFINITY),M=e.node(S);A!==Number.POSITIVE_INFINITY&&M.borderType!==f&&(c[S]=Math.max(c[S],A))};return g(b,v.predecessors.bind(v)),g(_,v.successors.bind(v)),(s=Object.values(a))===null||s===void 0||s.forEach(S=>{c[S]=c[n[S]]}),c},_J=(e,t,n,a)=>{const r=new pJ,s=e.graph(),c=SJ(s.nodesep,s.edgesep,a);return t==null||t.forEach(v=>{let f;v==null||v.forEach(g=>{const b=n[g];if(r.setNode(b),f){const _=n[f],S=r.edgeFromArgs(_,b);r.setEdge(_,b,Math.max(c(e,g,f),S||0))}f=g})}),r},wJ=(e,t)=>VE(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const v=n[c],f=xJ(e,c)/2;r=Math.max(v+f,r),s=Math.min(v-f,s)}),r-s});function EJ(e,t){const n=Object.values(t),a=MA(n),r=Bw(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,f=e[v];let g;if(f===t)return;const b=Object.values(f);g=c==="l"?a-MA(b):r-Bw(b),g&&(e[v]={},Object.keys(f).forEach(_=>{e[v][_]=f[_]+g}))})})}const OJ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(s=>s[a]);n[a]=(r[0]+r[1])/2}}),n},SJ=(e,t,n)=>(a,r,s)=>{const c=a.node(r),v=a.node(s);let f=0,g;if(f+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(f+=n?g:-g),g=0,f+=(c.dummy?t:e)/2,f+=(v.dummy?t:e)/2,f+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(f+=n?g:-g),g=0,f},xJ=(e,t)=>e.node(t).width||0,AJ=e=>{const t=zm(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=a+c/2}),a+=c+n})},TJ=e=>{const t=zm(e),n=Object.assign(hJ(e,t),vJ(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(_=>Object.values(_).reverse()));const f=(c==="u"?e.predecessors:e.successors).bind(e),g=gJ(e,r,n,f),b=bJ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(b).forEach(_=>b[_]=-b[_]),a[c+v]=b})});const s=wJ(e,a);return s&&EJ(a,s),OJ(a,e.graph().align)},MJ=e=>{var t;const n=NP(e);AJ(n);const a=TJ(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},kJ=(e,t)=>{const a=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...a),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},PJ=(e,t)=>{const n=t&&t.debugTiming?DP:jP;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{NJ(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>UJ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{VJ(a)});try{n("  runLayout",()=>{RJ(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{CJ(e,a)})})},RJ=(e,t,n)=>{t("    removeSelfEdges",()=>{KJ(e)}),t("    acyclic",()=>{gA.run(e)}),t("    nestingGraph.run",()=>{SA.run(e)}),t("    rank",()=>{$Z(NP(e))}),t("    injectEdgeLabelProxies",()=>{BJ(e)}),t("    removeEmptyRanks",()=>{gZ(e)}),t("    nestingGraph.cleanup",()=>{SA.cleanup(e)}),t("    normalizeRanks",()=>{yZ(e)}),t("    assignRankMinMax",()=>{WJ(e)}),t("    removeEdgeLabelProxies",()=>{GJ(e)}),t("    normalize.run",()=>{wA.run(e)}),t("    parentDummyChains",()=>{WZ(e)}),t("    addBorderSegments",()=>{qZ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{kJ(e,n.nodeOrder)}),t("    order",()=>{dJ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{ZJ(e)}),t("    adjustCoordinateSystem",()=>{TA.adjust(e)}),t("    position",()=>{MJ(e)}),t("    positionSelfEdges",()=>{JJ(e)}),t("    removeBorderNodes",()=>{YJ(e)}),t("    normalize.undo",()=>{wA.undo(e)}),t("    fixupEdgeLabelCoords",()=>{XJ(e)}),t("    undoCoordinateSystem",()=>{TA.undo(e)}),t("    translateGraph",()=>{zJ(e)}),t("    assignNodeIntersects",()=>{HJ(e)}),t("    reversePoints",()=>{qJ(e)}),t("    acyclic.undo",()=>{gA.undo(e)})},NJ=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},CJ=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},DJ=["nodesep","edgesep","ranksep","marginx","marginy"],jJ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$1=["acyclicer","ranker","rankdir","align"],IJ=["width","height","layer","fixorder"],LJ={width:0,height:0},$J=["minlen","weight","width","height","labeloffset"],FJ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},F1=["labelpos"],UJ=e=>{const t=new If({multigraph:!0,compound:!0}),n=V1(e.graph()),a={};return $1==null||$1.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},jJ,U1(n,DJ),a)),e.nodes().forEach(r=>{const s=V1(e.node(r)),c=Object.assign(Object.assign({},LJ),s),v=U1(c,IJ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=V1(e.edge(r)),c={};F1==null||F1.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},FJ,U1(s,$J),c))}),t},VJ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},BJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-a.rank)/2+a.rank};Yv(e,"edge-proxy",s,"_ep")}})},WJ=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const s=e.node(n);s.borderTop&&(s.minRank=(a=e.node(s.borderTop))===null||a===void 0?void 0:a.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},GJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},zJ=e=>{let t,n=0,a,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,f=g=>{if(!g)return;const b=g.x,_=g.y,S=g.width,A=g.height;!isNaN(b)&&!isNaN(S)&&(t===void 0&&(t=b-S/2),t=Math.min(t,b-S/2),n=Math.max(n,b+S/2)),!isNaN(_)&&!isNaN(A)&&(a===void 0&&(a=_-A/2),a=Math.min(a,_-A/2),r=Math.max(r,_+A/2))};e.nodes().forEach(g=>{f(e.node(g))}),e.edges().forEach(g=>{const b=e.edge(g);b!=null&&b.hasOwnProperty("x")&&f(b)}),t-=c,a-=v,e.nodes().forEach(g=>{const b=e.node(g);b&&(b.x-=t,b.y-=a)}),e.edges().forEach(g=>{var b;const _=e.edge(g);(b=_.points)===null||b===void 0||b.forEach(S=>{S.x-=t,S.y-=a}),_.hasOwnProperty("x")&&(_.x-=t),_.hasOwnProperty("y")&&(_.y-=a)}),s.width=n-t+c,s.height=r-a+v},HJ=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=a),n.points.unshift(bA(a,s)),n.points.push(bA(r,c))})},XJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},qJ=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},YJ=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),f=e.node(s.borderLeft[((a=s.borderLeft)===null||a===void 0?void 0:a.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(f==null?void 0:f.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((f==null?void 0:f.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},KJ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},ZJ=e=>{const t=zm(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+a,(c=v.selfEdges)===null||c===void 0||c.forEach(f=>{Yv(e,"selfedge",{width:f.label.width,height:f.label.height,rank:v.rank,order:s+ ++a,e:f.e,label:f.label},"_se")}),delete v.selfEdges})})},JJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,s=a.y,c=n.x-r,v=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},U1=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},V1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},QJ={layout:PJ,util:{time:DP,notime:jP}};class eQ extends gK{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const s=this,{nodes:c,nodeSize:v,rankdir:f,combos:g,begin:b,radial:_,comboEdges:S=[],vedges:A=[]}=s;if(!c)return;const M=s.edges||[],x=new If({multigraph:!0,compound:!0});s.nodeMap={};const E={};c.forEach(Z=>{s.nodeMap[Z.id]=Z,Z.comboId&&(E[Z.comboId]=E[Z.comboId]||[],E[Z.comboId].push(Z.id))});let j=[];const D={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(Z=>{D[Z]=!0,j.push(s.nodeMap[Z])}),c.forEach(Z=>{D[Z.id]||j.push(Z)})):j=c;let V;v?sA(v)?V=()=>v:V=()=>[v,v]:V=Z=>Z.size?sA(Z.size)?Z.size:xP(Z.size)?[Z.size.width||40,Z.size.height||40]:[Z.size,Z.size]:[40,40];const U=uA(s.ranksep,50,s.ranksepFunc),L=uA(s.nodesep,50,s.nodesepFunc);let F=L,X=U;(f==="LR"||f==="RL")&&(F=U,X=L),x.setDefaultEdgeLabel(()=>({})),x.setGraph(s);const q={};this.sortByCombo&&g&&g.forEach(Z=>{if(q[Z.id]=Z,Z.collapsed){const Q=V(Z),fe=X(Z),se=F(Z),ce=Q[0]+2*se,be=Q[1]+2*fe;x.setNode(Z.id,{width:ce,height:be})}Z.parentId&&(q[Z.parentId]||x.setNode(Z.parentId,{}),x.setParent(Z.id,Z.parentId))}),j.filter(Z=>Z.layout!==!1).forEach(Z=>{const Q=V(Z),fe=X(Z),se=F(Z),ce=Q[0]+2*se,be=Q[1]+2*fe,we=Z.layer;Zg(we)?x.setNode(Z.id,{width:ce,height:be,layer:we}):x.setNode(Z.id,{width:ce,height:be}),this.sortByCombo&&Z.comboId&&(q[Z.comboId]||(q[Z.comboId]={id:Z.comboId},x.setNode(Z.comboId,{})),x.setParent(Z.id,Z.comboId))}),M.forEach(Z=>{const Q=fv(Z,"source"),fe=fv(Z,"target");this.layoutNode(Q)&&this.layoutNode(fe)&&x.setEdge(Q,fe,{weight:Z.weight||1})}),(n=S==null?void 0:S.concat(A||[]))===null||n===void 0||n.forEach(Z=>{var Q,fe;const{source:se,target:ce}=Z,be=!((Q=q[se])===null||Q===void 0)&&Q.collapsed?[se]:E[se]||[se],we=!((fe=q[ce])===null||fe===void 0)&&fe.collapsed?[ce]:E[ce]||[ce];be.forEach(me=>{we.forEach(He=>{x.setEdge(me,He,{weight:Z.weight||1})})})});let H;!((a=s.preset)===null||a===void 0)&&a.nodes&&(H=new If({multigraph:!0,compound:!0}),s.preset.nodes.forEach(Z=>{H==null||H.setNode(Z.id,Z)})),QJ.layout(x,{prevGraph:H,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const B=[0,0];if(b){let Z=1/0,Q=1/0;x.nodes().forEach(fe=>{const se=x.node(fe);Z>se.x&&(Z=se.x),Q>se.y&&(Q=se.y)}),x.edges().forEach(fe=>{var se;(se=x.edge(fe).points)===null||se===void 0||se.forEach(be=>{Z>be.x&&(Z=be.x),Q>be.y&&(Q=be.y)})}),B[0]=b[0]-Z,B[1]=b[1]-Q}const G=f==="LR"||f==="RL";if(_){const{focusNode:Z,ranksep:Q,getRadialPos:fe}=this,se=bK(Z)?Z:Z==null?void 0:Z.id,ce=se?(r=x.node(se))===null||r===void 0?void 0:r._rank:0,be=[],we=G?"y":"x",me=G?"height":"width";let He=1/0,Je=-1/0;x.nodes().forEach(xe=>{const Ce=x.node(xe);if(!s.nodeMap[xe])return;const qe=L(s.nodeMap[xe]);if(ce===0)be[Ce._rank]||(be[Ce._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),be[Ce._rank].nodes.push(xe),be[Ce._rank].totalWidth+=qe*2+Ce[me],be[Ce._rank].maxSize<Math.max(Ce.width,Ce.height)&&(be[Ce._rank].maxSize=Math.max(Ce.width,Ce.height));else{const wt=Ce._rank-ce;if(wt===0)be[wt]||(be[wt]={nodes:[],totalWidth:0,maxSize:-1/0}),be[wt].nodes.push(xe),be[wt].totalWidth+=qe*2+Ce[me],be[wt].maxSize<Math.max(Ce.width,Ce.height)&&(be[wt].maxSize=Math.max(Ce.width,Ce.height));else{const rn=Math.abs(wt);be[rn]||(be[rn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),be[rn].totalWidth+=qe*2+Ce[me],be[rn].maxSize<Math.max(Ce.width,Ce.height)&&(be[rn].maxSize=Math.max(Ce.width,Ce.height)),wt<0?be[rn].left.push(xe):be[rn].right.push(xe)}}const _t=Ce[we]-Ce[me]/2-qe,ht=Ce[we]+Ce[me]/2+qe;_t<He&&(He=_t),ht>Je&&(Je=ht)});let yt=Q||50;const Be={},Yt=(Je-He)/.9,Kt=[(He+Je-Yt)*.5,(He+Je+Yt)*.5],Lt=(xe,Ce,qe=-1/0,_t=[0,1])=>{let ht=qe;return xe.forEach(wt=>{const rn=x.node(wt);Be[wt]=Ce;const{x:an,y:Xt}=fe(rn[we],Kt,Yt,Ce,_t);if(!s.nodeMap[wt])return;s.nodeMap[wt].x=an+B[0],s.nodeMap[wt].y=Xt+B[1],s.nodeMap[wt]._order=rn._order;const nt=U(s.nodeMap[wt]);ht<nt&&(ht=nt)}),ht};let An=!0;const Ve=0;be.forEach(xe=>{var Ce,qe,_t,ht,wt,rn,an;if(!(!((Ce=xe==null?void 0:xe.nodes)===null||Ce===void 0)&&Ce.length)&&!(!((qe=xe==null?void 0:xe.left)===null||qe===void 0)&&qe.length)&&!(!((_t=xe==null?void 0:xe.right)===null||_t===void 0)&&_t.length))return;if(An&&xe.nodes.length===1){const nt=xe.nodes[0];if(!s.nodeMap[nt])return;s.nodeMap[nt].x=B[0],s.nodeMap[nt].y=B[1],Be[xe.nodes[0]]=0,yt=U(s.nodeMap[nt]),An=!1;return}yt=Math.max(yt,xe.totalWidth/(2*Math.PI));let Xt=-1/0;if(ce===0||!((ht=xe.nodes)===null||ht===void 0)&&ht.length)Xt=Lt(xe.nodes,yt,Xt,[0,1]);else{const nt=((wt=xe.left)===null||wt===void 0?void 0:wt.length)/(((rn=xe.left)===null||rn===void 0?void 0:rn.length)+((an=xe.right)===null||an===void 0?void 0:an.length));Xt=Lt(xe.left,yt,Xt,[0,nt]),Xt=Lt(xe.right,yt,Xt,[nt+.05,1])}yt+=Xt,An=!1,Ve-xe.maxSize}),x.edges().forEach(xe=>{var Ce,qe,_t;const ht=x.edge(xe),wt=M.findIndex(rn=>{const an=fv(rn,"source"),Xt=fv(rn,"target");return an===xe.v&&Xt===xe.w});if(!(wt<=-1)&&s.edgeLabelSpace&&s.controlPoints&&M[wt].type!=="loop"){const rn=we==="x"?"y":"x",an=(Ce=ht==null?void 0:ht.points)===null||Ce===void 0?void 0:Ce.slice(1,ht.points.length-1),Xt=[],nt=(qe=x.node(xe.v))===null||qe===void 0?void 0:qe[rn],fn=nt-((_t=x.node(xe.w))===null||_t===void 0?void 0:_t[rn]),Ue=Be[xe.v],_n=Ue-Be[xe.w];an==null||an.forEach(Jn=>{const ie=(Jn[rn]-nt)/fn*_n+Ue,tr=fe(Jn[we],Kt,Yt,ie);Xt.push({x:tr.x+B[0],y:tr.y+B[1]})}),M[wt].controlPoints=Xt}})}else{const Z=new Set,fe=f==="BT"||f==="RL"?(we,me)=>me-we:(we,me)=>we-me;x.nodes().forEach(we=>{const me=x.node(we);if(!me)return;let He=this.nodeMap[we];He||(He=g==null?void 0:g.find(Je=>Je.id===we)),He&&(He.x=me.x+B[0],He.y=me.y+B[1],He._order=me._order,Z.add(G?He.x:He.y))});const se=Array.from(Z).sort(fe),ce=G?(we,me)=>we.x!==me.x:(we,me)=>we.y!==me.y,be=G?(we,me,He)=>{const Je=Math.max(me.y,He.y),yt=Math.min(me.y,He.y);return we.filter(Be=>Be.y<=Je&&Be.y>=yt)}:(we,me,He)=>{const Je=Math.max(me.x,He.x),yt=Math.min(me.x,He.x);return we.filter(Be=>Be.x<=Je&&Be.x>=yt)};x.edges().forEach(we=>{var me;const He=x.edge(we),Je=M.findIndex(yt=>{const Be=fv(yt,"source"),Yt=fv(yt,"target");return Be===we.v&&Yt===we.w});if(!(Je<=-1)&&s.edgeLabelSpace&&s.controlPoints&&M[Je].type!=="loop"){(me=He==null?void 0:He.points)===null||me===void 0||me.forEach(Yt=>{Yt.x+=B[0],Yt.y+=B[1]});const yt=s.nodeMap[we.v],Be=s.nodeMap[we.w];M[Je].controlPoints=tQ(He==null?void 0:He.points,yt,Be,se,G,ce,be)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:M}}getRadialPos(t,n,a,r,s=[0,1]){let c=(t-n[0])/a;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const tQ=(e,t,n,a,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:f,y:g}=t,{x:b,y:_}=n;if(r&&(f=t.y,g=t.x,b=n.y,_=n.x),_!==g&&f!==b){const S=a.indexOf(g),A=a[S+1];if(A){const E=v[0],j=r?{x:(g+A)/2,y:(E==null?void 0:E.y)||b}:{x:(E==null?void 0:E.x)||b,y:(g+A)/2};(!E||s(E,j))&&v.unshift(j)}const M=a.indexOf(_),x=Math.abs(M-S);if(x===1)v=c(v,t,n),v.length||v.push(r?{x:(g+_)/2,y:f}:{x:f,y:(g+_)/2});else if(x>1){const E=a[M-1];if(E){const j=v[v.length-1],D=r?{x:(_+E)/2,y:(j==null?void 0:j.y)||b}:{x:(j==null?void 0:j.x)||f,y:(_+E)/2};(!j||s(j,D))&&v.push(D)}}}}return v};var DA,jA,IA,LA;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(DA||(DA={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jA||(jA={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IA||(IA={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LA||(LA={}));var hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BE(e,t){return e(t={exports:{}},t.exports),t.exports}var nQ=function(){this.__data__=[],this.size=0},Kv=function(e,t){return e===t||e!=e&&t!=t},kb=function(e,t){for(var n=e.length;n--;)if(Kv(e[n][0],t))return n;return-1},rQ=Array.prototype.splice,oQ=function(e){var t=this.__data__,n=kb(t,e);return!(n<0)&&(n==t.length-1?t.pop():rQ.call(t,n,1),--this.size,!0)},iQ=function(e){var t=this.__data__,n=kb(t,e);return n<0?void 0:t[n][1]},aQ=function(e){return kb(this.__data__,e)>-1},lQ=function(e,t){var n=this.__data__,a=kb(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function hv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}hv.prototype.clear=nQ,hv.prototype.delete=oQ,hv.prototype.get=iQ,hv.prototype.has=aQ,hv.prototype.set=lQ;var Pb=hv,sQ=function(){this.__data__=new Pb,this.size=0},uQ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},cQ=function(e){return this.__data__.get(e)},fQ=function(e){return this.__data__.has(e)},HP=typeof hg=="object"&&hg&&hg.Object===Object&&hg,dQ=typeof self=="object"&&self&&self.Object===Object&&self,Nu=HP||dQ||Function("return this")(),$s=Nu.Symbol,XP=Object.prototype,pQ=XP.hasOwnProperty,hQ=XP.toString,Em=$s?$s.toStringTag:void 0,vQ=function(e){var t=pQ.call(e,Em),n=e[Em];try{e[Em]=void 0;var a=!0}catch{}var r=hQ.call(e);return a&&(t?e[Em]=n:delete e[Em]),r},mQ=Object.prototype.toString,yQ=function(e){return mQ.call(e)},$A=$s?$s.toStringTag:void 0,ep=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":$A&&$A in Object(e)?vQ(e):yQ(e)},Cl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},FA,ay=function(e){if(!Cl(e))return!1;var t=ep(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},B1=Nu["__core-js_shared__"],UA=(FA=/[^.]+$/.exec(B1&&B1.keys&&B1.keys.IE_PROTO||""))?"Symbol(src)_1."+FA:"",gQ=function(e){return!!UA&&UA in e},bQ=Function.prototype.toString,hh=function(e){if(e!=null){try{return bQ.call(e)}catch{}try{return e+""}catch{}}return""},_Q=/^\[object .+?Constructor\]$/,wQ=Function.prototype,EQ=Object.prototype,OQ=wQ.toString,SQ=EQ.hasOwnProperty,xQ=RegExp("^"+OQ.call(SQ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),AQ=function(e){return!(!Cl(e)||gQ(e))&&(ay(e)?xQ:_Q).test(hh(e))},TQ=function(e,t){return e==null?void 0:e[t]},vh=function(e,t){var n=TQ(e,t);return AQ(n)?n:void 0},Hm=vh(Nu,"Map"),Xm=vh(Object,"create"),MQ=function(){this.__data__=Xm?Xm(null):{},this.size=0},kQ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},PQ=Object.prototype.hasOwnProperty,RQ=function(e){var t=this.__data__;if(Xm){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return PQ.call(t,e)?t[e]:void 0},NQ=Object.prototype.hasOwnProperty,CQ=function(e){var t=this.__data__;return Xm?t[e]!==void 0:NQ.call(t,e)},DQ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Xm&&t===void 0?"__lodash_hash_undefined__":t,this};function vv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}vv.prototype.clear=MQ,vv.prototype.delete=kQ,vv.prototype.get=RQ,vv.prototype.has=CQ,vv.prototype.set=DQ;var VA=vv,jQ=function(){this.size=0,this.__data__={hash:new VA,map:new(Hm||Pb),string:new VA}},IQ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Rb=function(e,t){var n=e.__data__;return IQ(t)?n[typeof t=="string"?"string":"hash"]:n.map},LQ=function(e){var t=Rb(this,e).delete(e);return this.size-=t?1:0,t},$Q=function(e){return Rb(this,e).get(e)},FQ=function(e){return Rb(this,e).has(e)},UQ=function(e,t){var n=Rb(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function mv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}mv.prototype.clear=jQ,mv.prototype.delete=LQ,mv.prototype.get=$Q,mv.prototype.has=FQ,mv.prototype.set=UQ;var Nb=mv,VQ=function(e,t){var n=this.__data__;if(n instanceof Pb){var a=n.__data__;if(!Hm||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nb(a)}return n.set(e,t),this.size=n.size,this};function yv(e){var t=this.__data__=new Pb(e);this.size=t.size}yv.prototype.clear=sQ,yv.prototype.delete=uQ,yv.prototype.get=cQ,yv.prototype.has=fQ,yv.prototype.set=VQ;var Av=yv,WE=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},Qg=function(){try{var e=vh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Cb=function(e,t,n){t=="__proto__"&&Qg?Qg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},BQ=Object.prototype.hasOwnProperty,Db=function(e,t,n){var a=e[t];BQ.call(e,t)&&Kv(a,n)&&(n!==void 0||t in e)||Cb(e,t,n)},ly=function(e,t,n,a){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],f=void 0;f===void 0&&(f=e[v]),r?Cb(n,v,f):Db(n,v,f)}return n},WQ=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Mu=function(e){return e!=null&&typeof e=="object"},BA=function(e){return Mu(e)&&ep(e)=="[object Arguments]"},qP=Object.prototype,GQ=qP.hasOwnProperty,zQ=qP.propertyIsEnumerable,jv=BA(function(){return arguments}())?BA:function(e){return Mu(e)&&GQ.call(e,"callee")&&!zQ.call(e,"callee")},Di=Array.isArray,HQ=function(){return!1},nh=BE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Nu.Buffer:void 0,s=(r?r.isBuffer:void 0)||HQ;e.exports=s}),XQ=/^(?:0|[1-9]\d*)$/,jb=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&XQ.test(e))&&e>-1&&e%1==0&&e<t},GE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ai={};ai["[object Float32Array]"]=ai["[object Float64Array]"]=ai["[object Int8Array]"]=ai["[object Int16Array]"]=ai["[object Int32Array]"]=ai["[object Uint8Array]"]=ai["[object Uint8ClampedArray]"]=ai["[object Uint16Array]"]=ai["[object Uint32Array]"]=!0,ai["[object Arguments]"]=ai["[object Array]"]=ai["[object ArrayBuffer]"]=ai["[object Boolean]"]=ai["[object DataView]"]=ai["[object Date]"]=ai["[object Error]"]=ai["[object Function]"]=ai["[object Map]"]=ai["[object Number]"]=ai["[object Object]"]=ai["[object RegExp]"]=ai["[object Set]"]=ai["[object String]"]=ai["[object WeakMap]"]=!1;var qQ=function(e){return Mu(e)&&GE(e.length)&&!!ai[ep(e)]},Ib=function(e){return function(t){return e(t)}},Iv=BE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&HP.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),WA=Iv&&Iv.isTypedArray,sy=WA?Ib(WA):qQ,YQ=Object.prototype.hasOwnProperty,YP=function(e,t){var n=Di(e),a=!n&&jv(e),r=!n&&!a&&nh(e),s=!n&&!a&&!r&&sy(e),c=n||a||r||s,v=c?WQ(e.length,String):[],f=v.length;for(var g in e)!t&&!YQ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||jb(g,f))||v.push(g);return v},KQ=Object.prototype,Lb=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||KQ)},KP=function(e,t){return function(n){return e(t(n))}},ZQ=KP(Object.keys,Object),JQ=Object.prototype.hasOwnProperty,zE=function(e){if(!Lb(e))return ZQ(e);var t=[];for(var n in Object(e))JQ.call(e,n)&&n!="constructor"&&t.push(n);return t},Ff=function(e){return e!=null&&GE(e.length)&&!ay(e)},tp=function(e){return Ff(e)?YP(e):zE(e)},QQ=function(e,t){return e&&ly(t,tp(t),e)},eee=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},tee=Object.prototype.hasOwnProperty,nee=function(e){if(!Cl(e))return eee(e);var t=Lb(e),n=[];for(var a in e)(a!="constructor"||!t&&tee.call(e,a))&&n.push(a);return n},mh=function(e){return Ff(e)?YP(e,!0):nee(e)},ree=function(e,t){return e&&ly(t,mh(t),e)},ZP=BE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Nu.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var f=c.length,g=s?s(f):new c.constructor(f);return c.copy(g),g}}),JP=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},QP=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,s=[];++n<a;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},eR=function(){return[]},oee=Object.prototype.propertyIsEnumerable,GA=Object.getOwnPropertySymbols,HE=GA?function(e){return e==null?[]:(e=Object(e),QP(GA(e),function(t){return oee.call(e,t)}))}:eR,iee=function(e,t){return ly(e,HE(e),t)},XE=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},$b=KP(Object.getPrototypeOf,Object),tR=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)XE(t,HE(e)),e=$b(e);return t}:eR,aee=function(e,t){return ly(e,tR(e),t)},nR=function(e,t,n){var a=t(e);return Di(e)?a:XE(a,n(e))},Ww=function(e){return nR(e,tp,HE)},lee=function(e){return nR(e,mh,tR)},Gw=vh(Nu,"DataView"),zw=vh(Nu,"Promise"),Tv=vh(Nu,"Set"),Hw=vh(Nu,"WeakMap"),see=hh(Gw),uee=hh(Hm),cee=hh(zw),fee=hh(Tv),dee=hh(Hw),Kp=ep;(Gw&&Kp(new Gw(new ArrayBuffer(1)))!="[object DataView]"||Hm&&Kp(new Hm)!="[object Map]"||zw&&Kp(zw.resolve())!="[object Promise]"||Tv&&Kp(new Tv)!="[object Set]"||Hw&&Kp(new Hw)!="[object WeakMap]")&&(Kp=function(e){var t=ep(e),n=t=="[object Object]"?e.constructor:void 0,a=n?hh(n):"";if(a)switch(a){case see:return"[object DataView]";case uee:return"[object Map]";case cee:return"[object Promise]";case fee:return"[object Set]";case dee:return"[object WeakMap]"}return t});var rh=Kp,pee=Object.prototype.hasOwnProperty,hee=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&pee.call(e,"index")&&(n.index=e.index,n.input=e.input),n},eb=Nu.Uint8Array,qE=function(e){var t=new e.constructor(e.byteLength);return new eb(t).set(new eb(e)),t},vee=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},mee=/\w*$/,yee=function(e){var t=new e.constructor(e.source,mee.exec(e));return t.lastIndex=e.lastIndex,t},zA=$s?$s.prototype:void 0,HA=zA?zA.valueOf:void 0,gee=function(e){return HA?Object(HA.call(e)):{}},rR=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},bee=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return qE(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return vee(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rR(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return yee(e);case"[object Set]":return new a;case"[object Symbol]":return gee(e)}},XA=Object.create,oR=function(){function e(){}return function(t){if(!Cl(t))return{};if(XA)return XA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),iR=function(e){return typeof e.constructor!="function"||Lb(e)?{}:oR($b(e))},_ee=function(e){return Mu(e)&&rh(e)=="[object Map]"},qA=Iv&&Iv.isMap,wee=qA?Ib(qA):_ee,Eee=function(e){return Mu(e)&&rh(e)=="[object Set]"},YA=Iv&&Iv.isSet,Oee=YA?Ib(YA):Eee,Qo={};Qo["[object Arguments]"]=Qo["[object Array]"]=Qo["[object ArrayBuffer]"]=Qo["[object DataView]"]=Qo["[object Boolean]"]=Qo["[object Date]"]=Qo["[object Float32Array]"]=Qo["[object Float64Array]"]=Qo["[object Int8Array]"]=Qo["[object Int16Array]"]=Qo["[object Int32Array]"]=Qo["[object Map]"]=Qo["[object Number]"]=Qo["[object Object]"]=Qo["[object RegExp]"]=Qo["[object Set]"]=Qo["[object String]"]=Qo["[object Symbol]"]=Qo["[object Uint8Array]"]=Qo["[object Uint8ClampedArray]"]=Qo["[object Uint16Array]"]=Qo["[object Uint32Array]"]=!0,Qo["[object Error]"]=Qo["[object Function]"]=Qo["[object WeakMap]"]=!1;var aR=function e(t,n,a,r,s,c){var v,f=1&n,g=2&n,b=4&n;if(v!==void 0)return v;if(!Cl(t))return t;var _=Di(t);if(_){if(v=hee(t),!f)return JP(t,v)}else{var S=rh(t),A=S=="[object Function]"||S=="[object GeneratorFunction]";if(nh(t))return ZP(t,f);if(S=="[object Object]"||S=="[object Arguments]"||A&&!s){if(v=g||A?{}:iR(t),!f)return g?aee(t,ree(v,t)):iee(t,QQ(v,t))}else{if(!Qo[S])return s?t:{};v=bee(t,S,f)}}c||(c=new Av);var M=c.get(t);if(M)return M;c.set(t,v),Oee(t)?t.forEach(function(E){v.add(e(E,n,a,E,t,c))}):wee(t)&&t.forEach(function(E,j){v.set(j,e(E,n,a,j,t,c))});var x=_?void 0:(b?g?lee:Ww:g?mh:tp)(t);return WE(x||t,function(E,j){x&&(E=t[j=E]),Db(v,j,e(E,n,a,j,t,c))}),v},See=function(e){return aR(e,4)},YE=function(e){return function(){return e}},KE=function(e){return function(t,n,a){for(var r=-1,s=Object(t),c=a(t),v=c.length;v--;){var f=c[++r];if(n(s[f],f,s)===!1)break}return t}}(),ZE=function(e,t){return e&&KE(e,t,tp)},Fb=function(e,t){return function(n,a){if(n==null)return n;if(!Ff(n))return e(n,a);for(var r=n.length,s=-1,c=Object(n);++s<r&&a(c[s],s,c)!==!1;);return n}}(ZE),yh=function(e){return e},lR=function(e){return typeof e=="function"?e:yh},sR=function(e,t){return(Di(e)?WE:Fb)(e,lR(t))},uR=sR,xee=function(e,t){var n=[];return Fb(e,function(a,r,s){t(a,r,s)&&n.push(a)}),n},Aee=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Tee=function(e){return this.__data__.has(e)};function Tg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Nb;++t<n;)this.add(e[t])}Tg.prototype.add=Tg.prototype.push=Aee,Tg.prototype.has=Tee;var cR=Tg,Mee=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},fR=function(e,t){return e.has(t)},dR=function(e,t,n,a,r,s){var c=1&n,v=e.length,f=t.length;if(v!=f&&!(c&&f>v))return!1;var g=s.get(e),b=s.get(t);if(g&&b)return g==t&&b==e;var _=-1,S=!0,A=2&n?new cR:void 0;for(s.set(e,t),s.set(t,e);++_<v;){var M=e[_],x=t[_];if(a)var E=c?a(x,M,_,t,e,s):a(M,x,_,e,t,s);if(E!==void 0){if(E)continue;S=!1;break}if(A){if(!Mee(t,function(j,D){if(!fR(A,D)&&(M===j||r(M,j,n,a,s)))return A.push(D)})){S=!1;break}}else if(M!==x&&!r(M,x,n,a,s)){S=!1;break}}return s.delete(e),s.delete(t),S},kee=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},JE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},KA=$s?$s.prototype:void 0,W1=KA?KA.valueOf:void 0,Pee=function(e,t,n,a,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new eb(e),new eb(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Kv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=kee;case"[object Set]":var f=1&a;if(v||(v=JE),e.size!=t.size&&!f)return!1;var g=c.get(e);if(g)return g==t;a|=2,c.set(e,t);var b=dR(v(e),v(t),a,r,s,c);return c.delete(e),b;case"[object Symbol]":if(W1)return W1.call(e)==W1.call(t)}return!1},Ree=Object.prototype.hasOwnProperty,Nee=function(e,t,n,a,r,s){var c=1&n,v=Ww(e),f=v.length;if(f!=Ww(t).length&&!c)return!1;for(var g=f;g--;){var b=v[g];if(!(c?b in t:Ree.call(t,b)))return!1}var _=s.get(e),S=s.get(t);if(_&&S)return _==t&&S==e;var A=!0;s.set(e,t),s.set(t,e);for(var M=c;++g<f;){var x=e[b=v[g]],E=t[b];if(a)var j=c?a(E,x,b,t,e,s):a(x,E,b,e,t,s);if(!(j===void 0?x===E||r(x,E,n,a,s):j)){A=!1;break}M||(M=b=="constructor")}if(A&&!M){var D=e.constructor,V=t.constructor;D==V||!("constructor"in e)||!("constructor"in t)||typeof D=="function"&&D instanceof D&&typeof V=="function"&&V instanceof V||(A=!1)}return s.delete(e),s.delete(t),A},ZA=Object.prototype.hasOwnProperty,Cee=function(e,t,n,a,r,s){var c=Di(e),v=Di(t),f=c?"[object Array]":rh(e),g=v?"[object Array]":rh(t),b=(f=f=="[object Arguments]"?"[object Object]":f)=="[object Object]",_=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",S=f==g;if(S&&nh(e)){if(!nh(t))return!1;c=!0,b=!1}if(S&&!b)return s||(s=new Av),c||sy(e)?dR(e,t,n,a,r,s):Pee(e,t,f,n,a,r,s);if(!(1&n)){var A=b&&ZA.call(e,"__wrapped__"),M=_&&ZA.call(t,"__wrapped__");if(A||M){var x=A?e.value():e,E=M?t.value():t;return s||(s=new Av),r(x,E,n,a,s)}}return!!S&&(s||(s=new Av),Nee(e,t,n,a,r,s))},pR=function e(t,n,a,r,s){return t===n||(t==null||n==null||!Mu(t)&&!Mu(n)?t!=t&&n!=n:Cee(t,n,a,r,e,s))},Dee=function(e,t,n,a){var r=n.length,s=r;if(e==null)return!s;for(e=Object(e);r--;){var c=n[r];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<s;){var v=(c=n[r])[0],f=e[v],g=c[1];if(c[2]){if(f===void 0&&!(v in e))return!1}else{var b=new Av,_;if(!(_===void 0?pR(g,f,3,a,b):_))return!1}}return!0},hR=function(e){return e==e&&!Cl(e)},jee=function(e){for(var t=tp(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,hR(r)]}return t},vR=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},Iee=function(e){var t=jee(e);return t.length==1&&t[0][2]?vR(t[0][0],t[0][1]):function(n){return n===e||Dee(n,e,t)}},oh=function(e){return typeof e=="symbol"||Mu(e)&&ep(e)=="[object Symbol]"},Lee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$ee=/^\w*$/,QE=function(e,t){if(Di(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!oh(e))||$ee.test(e)||!Lee.test(e)||t!=null&&e in Object(t)};function e2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,a);return n.cache=s.set(r,c)||s,c};return n.cache=new(e2.Cache||Nb),n}e2.Cache=Nb;var Fee=e2,Uee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vee=/\\(\\)?/g,Bee=function(e){var t=Fee(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Uee,function(n,a,r,s){t.push(r?s.replace(Vee,"$1"):a||n)}),t}),Mv=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},JA=$s?$s.prototype:void 0,QA=JA?JA.toString:void 0,Wee=function e(t){if(typeof t=="string")return t;if(Di(t))return Mv(t,e)+"";if(oh(t))return QA?QA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},mR=function(e){return e==null?"":Wee(e)},Ub=function(e,t){return Di(e)?e:QE(e,t)?[e]:Bee(mR(e))},uy=function(e){if(typeof e=="string"||oh(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Vb=function(e,t){for(var n=0,a=(t=Ub(t,e)).length;e!=null&&n<a;)e=e[uy(t[n++])];return n&&n==a?e:void 0},Gee=function(e,t,n){var a=e==null?void 0:Vb(e,t);return a===void 0?n:a},zee=function(e,t){return e!=null&&t in Object(e)},yR=function(e,t,n){for(var a=-1,r=(t=Ub(t,e)).length,s=!1;++a<r;){var c=uy(t[a]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++a!=r?s:!!(r=e==null?0:e.length)&&GE(r)&&jb(c,r)&&(Di(e)||jv(e))},gR=function(e,t){return e!=null&&yR(e,t,zee)},Hee=function(e,t){return QE(e)&&hR(t)?vR(uy(e),t):function(n){var a=Gee(n,e);return a===void 0&&a===t?gR(n,e):pR(t,a,3)}},bR=function(e){return function(t){return t==null?void 0:t[e]}},Xee=function(e){return function(t){return Vb(t,e)}},qee=function(e){return QE(e)?bR(uy(e)):Xee(e)},Uf=function(e){return typeof e=="function"?e:e==null?yh:typeof e=="object"?Di(e)?Hee(e[0],e[1]):Iee(e):qee(e)},_R=function(e,t){return(Di(e)?QP:xee)(e,Uf(t))},Yee=Object.prototype.hasOwnProperty,Kee=function(e,t){return e!=null&&Yee.call(e,t)},wR=function(e,t){return e!=null&&yR(e,t,Kee)},Zee=Object.prototype.hasOwnProperty,Jee=function(e){if(e==null)return!0;if(Ff(e)&&(Di(e)||typeof e=="string"||typeof e.splice=="function"||nh(e)||sy(e)||jv(e)))return!e.length;var t=rh(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Lb(e))return!zE(e).length;for(var n in e)if(Zee.call(e,n))return!1;return!0},ER=function(e){return e===void 0},OR=function(e,t){var n=-1,a=Ff(e)?Array(e.length):[];return Fb(e,function(r,s,c){a[++n]=t(r,s,c)}),a},SR=function(e,t){return(Di(e)?Mv:OR)(e,Uf(t))},Qee=function(e,t,n,a){var r=-1,s=e==null?0:e.length;for(a&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},ete=function(e,t,n,a,r){return r(e,function(s,c,v){n=a?(a=!1,s):t(n,s,c,v)}),n},xR=function(e,t,n){var a=Di(e)?Qee:ete,r=arguments.length<3;return a(e,Uf(t),n,r,Fb)},tte=function(e){return typeof e=="string"||!Di(e)&&Mu(e)&&ep(e)=="[object String]"},nte=bR("length"),rte=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ote=function(e){return rte.test(e)},ite="[\\ud800-\\udfff]",Xw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qw="\\ud83c[\\udffb-\\udfff]",AR="[^\\ud800-\\udfff]",TR="(?:\\ud83c[\\udde6-\\uddff]){2}",MR="[\\ud800-\\udbff][\\udc00-\\udfff]",eT="(?:"+Xw+"|"+qw+")?",ate="[\\ufe0e\\ufe0f]?"+eT+("(?:\\u200d(?:"+[AR,TR,MR].join("|")+")[\\ufe0e\\ufe0f]?"+eT+")*"),lte="(?:"+[AR+Xw+"?",Xw,TR,MR,ite].join("|")+")",tT=RegExp(qw+"(?="+qw+")|"+lte+ate,"g"),ste=function(e){for(var t=tT.lastIndex=0;tT.test(e);)++t;return t},ute=function(e){return ote(e)?ste(e):nte(e)},cte=function(e){if(e==null)return 0;if(Ff(e))return tte(e)?ute(e):e.length;var t=rh(e);return t=="[object Map]"||t=="[object Set]"?e.size:zE(e).length},fte=function(e,t,n){var a=Di(e),r=a||nh(e)||sy(e);if(t=Uf(t),n==null){var s=e&&e.constructor;n=r?a?new s:[]:Cl(e)&&ay(s)?oR($b(e)):{}}return(r?WE:ZE)(e,function(c,v,f){return t(n,c,v,f)}),n},nT=$s?$s.isConcatSpreadable:void 0,dte=function(e){return Di(e)||jv(e)||!!(nT&&e&&e[nT])},t2=function(t,n,a,r,s){var c=-1,v=t.length;for(a||(a=dte),s||(s=[]);++c<v;){var f=t[c];a(f)?XE(s,f):r||(s[s.length]=f)}return s},pte=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rT=Math.max,kR=function(e,t,n){return t=rT(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,s=rT(a.length-t,0),c=Array(s);++r<s;)c[r]=a[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=a[r];return v[t]=n(c),pte(e,this,v)}},hte=Qg?function(e,t){return Qg(e,"toString",{configurable:!0,enumerable:!1,value:YE(t),writable:!0})}:yh,vte=Date.now,PR=function(e){var t=0,n=0;return function(){var a=vte(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(hte),Bb=function(e,t){return PR(kR(e,t,yh),e+"")},RR=function(e,t,n,a){for(var r=e.length,s=n+-1;++s<r;)if(t(e[s],s,e))return s;return-1},mte=function(e){return e!=e},yte=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},gte=function(e,t,n){return t==t?yte(e,t,n):RR(e,mte,n)},bte=function(e,t){return!!(e!=null&&e.length)&&gte(e,t,0)>-1},_te=function(){},wte=Tv&&1/JE(new Tv([,-0]))[1]==1/0?function(e){return new Tv(e)}:_te,Ete=function(e,t,n){var a=-1,r=bte,s=e.length,c=!0,v=[],f=v;if(s>=200){var g=wte(e);if(g)return JE(g);c=!1,r=fR,f=new cR}else f=v;e:for(;++a<s;){var b=e[a],_=b;if(b=b!==0?b:0,c&&_==_){for(var S=f.length;S--;)if(f[S]===_)continue e;v.push(b)}else r(f,_,n)||(f!==v&&f.push(_),v.push(b))}return v},NR=function(e){return Mu(e)&&Ff(e)},Ote=Bb(function(e){return Ete(t2(e,1,NR,!0))}),Ste=function(e,t){return Mv(t,function(n){return e[n]})},tb,CR=function(e){return e==null?[]:Ste(e,tp(e))};try{tb={clone:See,constant:YE,each:uR,filter:_R,has:wR,isArray:Di,isEmpty:Jee,isFunction:ay,isUndefined:ER,keys:tp,map:SR,reduce:xR,size:cte,transform:fte,union:Ote,values:CR}}catch{}tb||(tb=window._);var xn=tb,n2=Wr;function Wr(e){this._isDirected=!xn.has(e,"directed")||e.directed,this._isMultigraph=!!xn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!xn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=xn.constant(void 0),this._defaultEdgeLabelFn=xn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oT(e,t){e[t]?e[t]++:e[t]=1}function iT(e,t){--e[t]||delete e[t]}function km(e,t,n,a){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(xn.isUndefined(a)?"\0":a)}function xte(e,t,n,a){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return a&&(v.name=a),v}function G1(e,t){return km(e,t.v,t.w,t.name)}Wr.prototype._nodeCount=0,Wr.prototype._edgeCount=0,Wr.prototype.isDirected=function(){return this._isDirected},Wr.prototype.isMultigraph=function(){return this._isMultigraph},Wr.prototype.isCompound=function(){return this._isCompound},Wr.prototype.setGraph=function(e){return this._label=e,this},Wr.prototype.graph=function(){return this._label},Wr.prototype.setDefaultNodeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultNodeLabelFn=e,this},Wr.prototype.nodeCount=function(){return this._nodeCount},Wr.prototype.nodes=function(){return xn.keys(this._nodes)},Wr.prototype.sources=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._in[t])})},Wr.prototype.sinks=function(){var e=this;return xn.filter(this.nodes(),function(t){return xn.isEmpty(e._out[t])})},Wr.prototype.setNodes=function(e,t){var n=arguments,a=this;return xn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Wr.prototype.setNode=function(e,t){return xn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Wr.prototype.node=function(e){return this._nodes[e]},Wr.prototype.hasNode=function(e){return xn.has(this._nodes,e)},Wr.prototype.removeNode=function(e){var t=this;if(xn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],xn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),xn.each(xn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],xn.each(xn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Wr.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(xn.isUndefined(t))t="\0";else{for(var n=t+="";!xn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Wr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Wr.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Wr.prototype.children=function(e){if(xn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return xn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Wr.prototype.predecessors=function(e){var t=this._preds[e];if(t)return xn.keys(t)},Wr.prototype.successors=function(e){var t=this._sucs[e];if(t)return xn.keys(t)},Wr.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return xn.union(t,this.successors(e))},Wr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Wr.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;xn.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),xn.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var a={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(a[s]=c,c):c in a?a[c]:r(c)}return this._isCompound&&xn.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Wr.prototype.setDefaultEdgeLabel=function(e){return xn.isFunction(e)||(e=xn.constant(e)),this._defaultEdgeLabelFn=e,this},Wr.prototype.edgeCount=function(){return this._edgeCount},Wr.prototype.edges=function(){return xn.values(this._edgeObjs)},Wr.prototype.setPath=function(e,t){var n=this,a=arguments;return xn.reduce(e,function(r,s){return a.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Wr.prototype.setEdge=function(){var e,t,n,a,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,xn.isUndefined(n)||(n=""+n);var c=km(this._isDirected,e,t,n);if(xn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!xn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var v=xte(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,oT(this._preds[t],e),oT(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Wr.prototype.edge=function(e,t,n){var a=arguments.length===1?G1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n);return this._edgeLabels[a]},Wr.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?G1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n);return xn.has(this._edgeLabels,a)},Wr.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?G1(this._isDirected,arguments[0]):km(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],iT(this._preds[t],e),iT(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Wr.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.v===t}):a}},Wr.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=xn.values(n);return t?xn.filter(a,function(r){return r.w===t}):a}},Wr.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aT={Graph:n2,version:"2.1.8"},Ate={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Tte(e),edges:Mte(e)};return xn.isUndefined(e.graph())||(t.value=xn.clone(e.graph())),t},read:function(e){var t=new n2(e.options).setGraph(e.value);return xn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),xn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Tte(e){return xn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return xn.isUndefined(n)||(r.value=n),xn.isUndefined(a)||(r.parent=a),r})}function Mte(e){return xn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return xn.isUndefined(t.name)||(a.name=t.name),xn.isUndefined(n)||(a.value=n),a})}var kte=function(e){var t,n={},a=[];function r(s){xn.has(n,s)||(n[s]=!0,t.push(s),xn.each(e.successors(s),r),xn.each(e.predecessors(s),r))}return xn.each(e.nodes(),function(s){t=[],r(s),t.length&&a.push(t)}),a},DR=Rs;function Rs(){this._arr=[],this._keyIndices={}}Rs.prototype.size=function(){return this._arr.length},Rs.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Rs.prototype.has=function(e){return xn.has(this._keyIndices,e)},Rs.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Rs.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Rs.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!xn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},Rs.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Rs.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Rs.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Rs.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},Rs.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,a[s.key]=e,a[r.key]=t};var jR=function(e,t,n,a){return function(r,s,c,v){var f,g,b={},_=new DR,S=function(A){var M=A.v!==f?A.v:A.w,x=b[M],E=c(A),j=g.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+A+" Weight: "+E);j<x.distance&&(x.distance=j,x.predecessor=f,_.decrease(M,j))};for(r.nodes().forEach(function(A){var M=A===s?0:Number.POSITIVE_INFINITY;b[A]={distance:M},_.add(A,M)});_.size()>0&&(f=_.removeMin(),(g=b[f]).distance!==Number.POSITIVE_INFINITY);)v(f).forEach(S);return b}(e,String(t),n||Pte,a||function(r){return e.outEdges(r)})},Pte=xn.constant(1),Rte=function(e,t,n){return xn.transform(e.nodes(),function(a,r){a[r]=jR(e,r,t,n)},{})},IR=function(e){var t=0,n=[],a={},r=[];function s(c){var v=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(b){xn.has(a,b)?a[b].onStack&&(v.lowlink=Math.min(v.lowlink,a[b].index)):(s(b),v.lowlink=Math.min(v.lowlink,a[b].lowlink))}),v.lowlink===v.index){var f,g=[];do f=n.pop(),a[f].onStack=!1,g.push(f);while(c!==f);r.push(g)}}return e.nodes().forEach(function(c){xn.has(a,c)||s(c)}),r},Nte=function(e){return xn.filter(IR(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},Cte=function(e,t,n){return function(a,r,s){var c={},v=a.nodes();return v.forEach(function(f){c[f]={},c[f][f]={distance:0},v.forEach(function(g){f!==g&&(c[f][g]={distance:Number.POSITIVE_INFINITY})}),s(f).forEach(function(g){var b=g.v===f?g.w:g.v,_=r(g);c[f][b]={distance:_,predecessor:f}})}),v.forEach(function(f){var g=c[f];v.forEach(function(b){var _=c[b];v.forEach(function(S){var A=_[f],M=g[S],x=_[S],E=A.distance+M.distance;E<x.distance&&(x.distance=E,x.predecessor=M.predecessor)})})}),c}(e,t||Dte,n||function(a){return e.outEdges(a)})},Dte=xn.constant(1),z1=LR;function LR(e){var t={},n={},a=[];if(xn.each(e.sinks(),function r(s){if(xn.has(n,s))throw new nb;xn.has(t,s)||(n[s]=!0,t[s]=!0,xn.each(e.predecessors(s),r),delete n[s],a.push(s))}),xn.size(t)!==e.nodeCount())throw new nb;return a}function nb(){}LR.CycleException=nb,nb.prototype=new Error;var lT=function(e,t,n){xn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return xn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);$R(e,c,n==="post",s,a,r)}),r};function $R(e,t,n,a,r,s){xn.has(a,t)||(a[t]=!0,n||s.push(t),xn.each(r(t),function(c){$R(e,c,n,a,r,s)}),n&&s.push(t))}var rb,jte={Graph:aT.Graph,json:Ate,alg:{components:kte,dijkstra:jR,dijkstraAll:Rte,findCycles:Nte,floydWarshall:Cte,isAcyclic:function(e){try{z1(e)}catch(t){if(t instanceof z1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lT(e,t,"post")},preorder:function(e,t){return lT(e,t,"pre")},prim:function(e,t){var n,a=new n2,r={},s=new DR;function c(f){var g=f.v===n?f.w:f.v,b=s.priority(g);if(b!==void 0){var _=t(f);_<b&&(r[g]=n,s.decrease(g,_))}}if(e.nodeCount()===0)return a;xn.each(e.nodes(),function(f){s.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),xn.has(r,n))a.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:IR,topsort:z1},version:aT.version};try{rb=jte}catch{}rb||(rb=window.graphlib);var _c=rb,Ite=function(e){return aR(e,5)},qm=function(e,t,n){if(!Cl(n))return!1;var a=typeof t;return!!(a=="number"?Ff(n)&&jb(t,n.length):a=="string"&&t in n)&&Kv(n[t],e)},FR=Object.prototype,Lte=FR.hasOwnProperty,$te=Bb(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&qm(t[0],t[1],r)&&(a=1);++n<a;)for(var s=t[n],c=mh(s),v=-1,f=c.length;++v<f;){var g=c[v],b=e[g];(b===void 0||Kv(b,FR[g])&&!Lte.call(e,g))&&(e[g]=s[g])}return e}),Fte=function(e){return function(t,n,a){var r=Object(t);if(!Ff(t)){var s=Uf(n);t=tp(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,a);return c>-1?r[s?t[c]:c]:void 0}},Ute=/^\s+|\s+$/g,Vte=/^[-+]0x[0-9a-f]+$/i,Bte=/^0b[01]+$/i,Wte=/^0o[0-7]+$/i,Gte=parseInt,zte=function(e){if(typeof e=="number")return e;if(oh(e))return NaN;if(Cl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Ute,"");var n=Bte.test(e);return n||Wte.test(e)?Gte(e.slice(2),n?2:8):Vte.test(e)?NaN:+e},Mg=function(e){return e?(e=zte(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},Hte=function(e){var t=Mg(e),n=t%1;return t==t?n?t-n:t:0},Xte=Math.max,qte=Fte(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Hte(n);return r<0&&(r=Xte(a+r,0)),RR(e,Uf(t),r)}),UR=function(e){return e!=null&&e.length?t2(e):[]},Yte=function(e,t){return e==null?e:KE(e,lR(t),mh)},Kte=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Zte=function(e,t){var n={};return t=Uf(t),ZE(e,function(a,r,s){Cb(n,r,t(a,r,s))}),n},r2=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var s=e[a],c=t(s);if(c!=null&&(v===void 0?c==c&&!oh(c):n(c,v)))var v=c,f=s}return f},Jte=function(e,t){return e>t},Qte=function(e){return e&&e.length?r2(e,yh,Jte):void 0},Yw=function(e,t,n){(n!==void 0&&!Kv(e[t],n)||n===void 0&&!(t in e))&&Cb(e,t,n)},ene=Function.prototype,tne=Object.prototype,VR=ene.toString,nne=tne.hasOwnProperty,rne=VR.call(Object),one=function(e){if(!Mu(e)||ep(e)!="[object Object]")return!1;var t=$b(e);if(t===null)return!0;var n=nne.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&VR.call(n)==rne},sT=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},ine=function(e){return ly(e,mh(e))},ane=function(e,t,n,a,r,s,c){var v=sT(e,n),f=sT(t,n),g=c.get(f);if(g)Yw(e,n,g);else{var b=void 0,_=b===void 0;if(_){var S=Di(f),A=!S&&nh(f),M=!S&&!A&&sy(f);b=f,S||A||M?Di(v)?b=v:NR(v)?b=JP(v):A?(_=!1,b=ZP(f,!0)):M?(_=!1,b=rR(f,!0)):b=[]:one(f)||jv(f)?(b=v,jv(v)?b=ine(v):Cl(v)&&!ay(v)||(b=iR(f))):_=!1}_&&(c.set(f,b),r(b,f,a,s,c),c.delete(f)),Yw(e,n,b)}},lne=function e(t,n,a,r,s){t!==n&&KE(n,function(c,v){if(s||(s=new Av),Cl(c))ane(t,n,v,a,e,r,s);else{var f=void 0;f===void 0&&(f=c),Yw(t,v,f)}},mh)},sne=function(e){return Bb(function(t,n){var a=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&qm(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++a<r;){var v=n[a];v&&e(t,v,a,s)}return t})}(function(e,t,n){lne(e,t,n)}),BR=function(e,t){return e<t},une=function(e){return e&&e.length?r2(e,yh,BR):void 0},cne=function(e,t){return e&&e.length?r2(e,Uf(t),BR):void 0},fne=function(){return Nu.Date.now()},dne=function(e,t,n,a){if(!Cl(e))return e;for(var r=-1,s=(t=Ub(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var f=uy(t[r]),g=n;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(r!=c){var b=v[f];(g=void 0)==void 0&&(g=Cl(b)?b:jb(t[r+1])?[]:{})}Db(v,f,g),v=v[f]}return e},pne=function(e,t,n){for(var a=-1,r=t.length,s={};++a<r;){var c=t[a],v=Vb(e,c);n(v,c)&&dne(s,Ub(c,e),v)}return s},hne=function(e,t){return pne(e,t,function(n,a){return gR(e,a)})},vne=function(e){return PR(kR(e,void 0,UR),e+"")}(function(e,t){return e==null?{}:hne(e,t)}),mne=Math.ceil,yne=Math.max,gne=function(e,t,n,a){for(var r=-1,s=yne(mne((t-e)/(n||1)),0),c=Array(s);s--;)c[++r]=e,e+=n;return c},bne=function(e){return function(t,n,a){return a&&typeof a!="number"&&qm(t,n,a)&&(n=a=void 0),t=Mg(t),n===void 0?(n=t,t=0):n=Mg(n),a=a===void 0?t<n?1:-1:Mg(a),gne(t,n,a)}}(),_ne=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},wne=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,s=oh(e),c=t!==void 0,v=t===null,f=t==t,g=oh(t);if(!v&&!g&&!s&&e>t||s&&c&&f&&!v&&!g||a&&c&&f||!n&&f||!r)return 1;if(!a&&!s&&!g&&e<t||g&&n&&r&&!a&&!s||v&&n&&r||!c&&r||!f)return-1}return 0},Ene=function(e,t,n){for(var a=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++a<c;){var f=wne(r[a],s[a]);if(f)return a>=v?f:f*(n[a]=="desc"?-1:1)}return e.index-t.index},One=function(e,t,n){t=t.length?Mv(t,function(s){return Di(s)?function(c){return Vb(c,s.length===1?s[0]:s)}:s}):[yh];var a=-1;t=Mv(t,Ib(Uf));var r=OR(e,function(s,c,v){return{criteria:Mv(t,function(f){return f(s)}),index:++a,value:s}});return _ne(r,function(s,c){return Ene(s,c,n)})},Sne=Bb(function(e,t){if(e==null)return[];var n=t.length;return n>1&&qm(e,t[0],t[1])?t=[]:n>2&&qm(t[0],t[1],t[2])&&(t=[t[0]]),One(e,t2(t),[])}),xne=0,Ane=function(e){var t=++xne;return mR(e)+t},Tne=function(e,t,n){for(var a=-1,r=e.length,s=t.length,c={};++a<r;){var v=a<s?t[a]:void 0;n(c,e[a],v)}return c},ob,Mne=function(e,t){return Tne(e||[],t||[],Db)};try{ob={cloneDeep:Ite,constant:YE,defaults:$te,each:uR,filter:_R,find:qte,flatten:UR,forEach:sR,forIn:Yte,has:wR,isUndefined:ER,last:Kte,map:SR,mapValues:Zte,max:Qte,merge:sne,min:une,minBy:cne,now:fne,pick:vne,range:bne,reduce:xR,sortBy:Sne,uniqueId:Ane,values:CR,zipObject:Mne}}catch{}ob||(ob=window._);var kne=ob;_c.Graph;kne.constant(1);_c.Graph;_c.Graph;_c.alg.preorder;_c.alg.postorder;_c.Graph;_c.Graph;_c.Graph;_c.Graph;_c.Graph;var H1,uT;function Pne(){if(uT)return H1;uT=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return H1=t,H1}var X1,cT;function Rne(){if(cT)return X1;cT=1;var e=oE(),t=Pne(),n=iE(),a="[object Arguments]",r="[object Array]",s="[object Boolean]",c="[object Date]",v="[object Error]",f="[object Function]",g="[object Map]",b="[object Number]",_="[object Object]",S="[object RegExp]",A="[object Set]",M="[object String]",x="[object WeakMap]",E="[object ArrayBuffer]",j="[object DataView]",D="[object Float32Array]",V="[object Float64Array]",U="[object Int8Array]",L="[object Int16Array]",F="[object Int32Array]",X="[object Uint8Array]",q="[object Uint8ClampedArray]",H="[object Uint16Array]",B="[object Uint32Array]",G={};G[D]=G[V]=G[U]=G[L]=G[F]=G[X]=G[q]=G[H]=G[B]=!0,G[a]=G[r]=G[E]=G[s]=G[j]=G[c]=G[v]=G[f]=G[g]=G[b]=G[_]=G[S]=G[A]=G[M]=G[x]=!1;function Z(Q){return n(Q)&&t(Q.length)&&!!G[e(Q)]}return X1=Z,X1}var q1,fT;function Nne(){if(fT)return q1;fT=1;function e(t){return function(n){return t(n)}}return q1=e,q1}var Pm={exports:{}};Pm.exports;var dT;function Cne(){return dT||(dT=1,function(e,t){var n=hI(),a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===a,c=s&&n.process,v=function(){try{var f=r&&r.require&&r.require("util").types;return f||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v}(Pm,Pm.exports)),Pm.exports}var Y1,pT;function Dne(){if(pT)return Y1;pT=1;var e=Rne(),t=Nne(),n=Cne(),a=n&&n.isTypedArray,r=a?t(a):e;return Y1=r,Y1}Dne();var K1,hT;function jne(){if(hT)return K1;hT=1;var e=oE(),t=iE(),n="[object Number]";function a(r){return typeof r=="number"||t(r)&&e(r)==n}return K1=a,K1}jne();var Z1={exports:{}},J1={exports:{}},vT;function WR(){return vT||(vT=1,function(e){function t(n,a){this.v=n,this.k=a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(J1)),J1.exports}var Q1={exports:{}},ew={exports:{}},mT;function GR(){return mT||(mT=1,function(e){function t(n,a,r,s){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(f,g,b,_){function S(A,M){t(f,A,function(x){return this._invoke(A,M,x)})}g?c?c(f,g,{value:b,enumerable:!_,configurable:!_,writable:!_}):f[g]=b:(S("next",0),S("throw",1),S("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,a,r,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}var yT;function zR(){return yT||(yT=1,function(e){var t=GR();function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",v=s.toStringTag||"@@toStringTag";function f(E,j,D,V){var U=j&&j.prototype instanceof b?j:b,L=Object.create(U.prototype);return t(L,"_invoke",function(F,X,q){var H,B,G,Z=0,Q=q||[],fe=!1,se={p:0,n:0,v:a,a:ce,f:ce.bind(a,4),d:function(we,me){return H=we,B=0,G=a,se.n=me,g}};function ce(be,we){for(B=be,G=we,r=0;!fe&&Z&&!me&&r<Q.length;r++){var me,He=Q[r],Je=se.p,yt=He[2];be>3?(me=yt===we)&&(G=He[(B=He[4])?5:(B=3,3)],He[4]=He[5]=a):He[0]<=Je&&((me=be<2&&Je<He[1])?(B=0,se.v=we,se.n=He[1]):Je<yt&&(me=be<3||He[0]>we||we>yt)&&(He[4]=be,He[5]=we,se.n=yt,B=0))}if(me||be>1)return g;throw fe=!0,we}return function(be,we,me){if(Z>1)throw TypeError("Generator is already running");for(fe&&we===1&&ce(we,me),B=we,G=me;(r=B<2?a:G)||!fe;){H||(B?B<3?(B>1&&(se.n=-1),ce(B,G)):se.n=G:se.v=G);try{if(Z=2,H){if(B||(be="next"),r=H[be]){if(!(r=r.call(H,G)))throw TypeError("iterator result is not an object");if(!r.done)return r;G=r.value,B<2&&(B=0)}else B===1&&(r=H.return)&&r.call(H),B<2&&(G=TypeError("The iterator does not provide a '"+be+"' method"),B=1);H=a}else if((r=(fe=se.n<0)?G:F.call(X,se))!==g)break}catch(He){H=a,B=1,G=He}finally{Z=1}}return{value:r,done:fe}}}(E,D,V),!0),L}var g={};function b(){}function _(){}function S(){}r=Object.getPrototypeOf;var A=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),M=S.prototype=b.prototype=Object.create(A);function x(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,S):(E.__proto__=S,t(E,v,"GeneratorFunction")),E.prototype=Object.create(M),E}return _.prototype=S,t(M,"constructor",S),t(S,"constructor",_),_.displayName="GeneratorFunction",t(S,v,"GeneratorFunction"),t(M),t(M,v,"Generator"),t(M,c,function(){return this}),t(M,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:f,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Q1)),Q1.exports}var tw={exports:{}},nw={exports:{}},rw={exports:{}},gT;function HR(){return gT||(gT=1,function(e){var t=WR(),n=GR();function a(r,s){function c(f,g,b,_){try{var S=r[f](g),A=S.value;return A instanceof t?s.resolve(A.v).then(function(M){c("next",M,b,_)},function(M){c("throw",M,b,_)}):s.resolve(A).then(function(M){S.value=M,b(S)},function(M){return c("throw",M,b,_)})}catch(M){_(M)}}var v;this.next||(n(a.prototype),n(a.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(f,g,b){function _(){return new s(function(S,A){c(f,b,S,A)})}return v=v?v.then(_,_):_()},!0)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(rw)),rw.exports}var bT;function XR(){return bT||(bT=1,function(e){var t=zR(),n=HR();function a(r,s,c,v,f){return new n(t().w(r,s,c,v),f||Promise)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(nw)),nw.exports}var _T;function Ine(){return _T||(_T=1,function(e){var t=XR();function n(a,r,s,c,v){var f=t(a,r,s,c,v);return f.next().then(function(g){return g.done?g.value:f.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(tw)),tw.exports}var ow={exports:{}},wT;function Lne(){return wT||(wT=1,function(e){function t(n){var a=Object(n),r=[];for(var s in a)r.unshift(s);return function c(){for(;r.length;)if((s=r.pop())in a)return c.value=s,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ow)),ow.exports}var iw={exports:{}},aw={exports:{}},ET;function $ne(){return ET||(ET=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(aw)),aw.exports}var OT;function Fne(){return OT||(OT=1,function(e){var t=$ne().default;function n(a){if(a!=null){var r=a[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length))return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}}}throw new TypeError(t(a)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(iw)),iw.exports}var ST;function Une(){return ST||(ST=1,function(e){var t=WR(),n=zR(),a=Ine(),r=XR(),s=HR(),c=Lne(),v=Fne();function f(){var g=n(),b=g.m(f),_=(Object.getPrototypeOf?Object.getPrototypeOf(b):b.__proto__).constructor;function S(x){var E=typeof x=="function"&&x.constructor;return!!E&&(E===_||(E.displayName||E.name)==="GeneratorFunction")}var A={throw:1,return:2,break:3,continue:3};function M(x){var E,j;return function(D){E||(E={stop:function(){return j(D.a,2)},catch:function(){return D.v},abrupt:function(U,L){return j(D.a,A[U],L)},delegateYield:function(U,L,F){return E.resultName=L,j(D.d,v(U),F)},finish:function(U){return j(D.f,U)}},j=function(U,L,F){D.p=E.prev,D.n=E.next;try{return U(L,F)}finally{E.next=D.n}}),E.resultName&&(E[E.resultName]=D.v,E.resultName=void 0),E.sent=D.v,E.next=D.n;try{return x.call(this,E)}finally{D.p=E.prev,D.n=E.next}}}return(e.exports=f=function(){return{wrap:function(j,D,V,U){return g.w(M(j),D,V,U&&U.reverse())},isGeneratorFunction:S,mark:g.m,awrap:function(j,D){return new t(j,D)},AsyncIterator:s,async:function(j,D,V,U,L){return(S(D)?r:a)(M(j),D,V,U,L)},keys:c,values:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports}(Z1)),Z1.exports}var lw,xT;function Vne(){if(xT)return lw;xT=1;var e=Une()();lw=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return lw}Vne();var sn;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(sn||(sn={}));var AT;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(AT||(AT={}));var TT;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(TT||(TT={}));var MT;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(MT||(MT={}));var kT;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(kT||(kT={}));var kg={exports:{}},Bne=kg.exports,PT;function Wne(){return PT||(PT=1,function(e,t){(function(n,a){e.exports=a()})(Bne,function(){var n=function(W){return W instanceof Uint8Array||W instanceof Uint16Array||W instanceof Uint32Array||W instanceof Int8Array||W instanceof Int16Array||W instanceof Int32Array||W instanceof Float32Array||W instanceof Float64Array||W instanceof Uint8ClampedArray},a=function(W,le){for(var Oe=Object.keys(le),rt=0;rt<Oe.length;++rt)W[Oe[rt]]=le[Oe[rt]];return W},r=`
`;function s(W){return typeof atob<"u"?atob(W):"base64:"+W}function c(W){var le=new Error("(regl) "+W);throw console.error(le),le}function v(W,le){W||c(le)}function f(W){return W?": "+W:""}function g(W,le,Oe){W in le||c("unknown parameter ("+W+")"+f(Oe)+". possible values: "+Object.keys(le).join())}function b(W,le){n(W)||c("invalid parameter type"+f(le)+". must be a typed array")}function _(W,le){switch(le){case"number":return typeof W=="number";case"object":return typeof W=="object";case"string":return typeof W=="string";case"boolean":return typeof W=="boolean";case"function":return typeof W=="function";case"undefined":return typeof W>"u";case"symbol":return typeof W=="symbol"}}function S(W,le,Oe){_(W,le)||c("invalid parameter type"+f(Oe)+". expected "+le+", got "+typeof W)}function A(W,le){W>=0&&(W|0)===W||c("invalid parameter type, ("+W+")"+f(le)+". must be a nonnegative integer")}function M(W,le,Oe){le.indexOf(W)<0&&c("invalid value"+f(Oe)+". must be one of: "+le)}var x=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(W){Object.keys(W).forEach(function(le){x.indexOf(le)<0&&c('invalid regl constructor argument "'+le+'". must be one of '+x)})}function j(W,le){for(W=W+"";W.length<le;)W=" "+W;return W}function D(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function V(W,le){this.number=W,this.line=le,this.errors=[]}function U(W,le,Oe){this.file=W,this.line=le,this.message=Oe}function L(){var W=new Error,le=(W.stack||W).toString(),Oe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(le);if(Oe)return Oe[1];var rt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(le);return rt?rt[1]:"unknown"}function F(){var W=new Error,le=(W.stack||W).toString(),Oe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(le);if(Oe)return Oe[1];var rt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(le);return rt?rt[1]:"unknown"}function X(W,le){var Oe=W.split(`
`),rt=1,vt=0,et={unknown:new D,0:new D};et.unknown.name=et[0].name=le||L(),et.unknown.lines.push(new V(0,""));for(var pt=0;pt<Oe.length;++pt){var Rt=Oe[pt],$t=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Rt);if($t)switch($t[1]){case"line":var Nt=/(\d+)(\s+\d+)?/.exec($t[2]);Nt&&(rt=Nt[1]|0,Nt[2]&&(vt=Nt[2]|0,vt in et||(et[vt]=new D)));break;case"define":var ft=/SHADER_NAME(_B64)?\s+(.*)$/.exec($t[2]);ft&&(et[vt].name=ft[1]?s(ft[2]):ft[2]);break}et[vt].lines.push(new V(rt++,Rt))}return Object.keys(et).forEach(function(Ht){var Vt=et[Ht];Vt.lines.forEach(function(Ct){Vt.index[Ct.number]=Ct})}),et}function q(W){var le=[];return W.split(`
`).forEach(function(Oe){if(!(Oe.length<5)){var rt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Oe);rt?le.push(new U(rt[1]|0,rt[2]|0,rt[3].trim())):Oe.length>0&&le.push(new U("unknown",0,Oe))}}),le}function H(W,le){le.forEach(function(Oe){var rt=W[Oe.file];if(rt){var vt=rt.index[Oe.line];if(vt){vt.errors.push(Oe),rt.hasErrors=!0;return}}W.unknown.hasErrors=!0,W.unknown.lines[0].errors.push(Oe)})}function B(W,le,Oe,rt,vt){if(!W.getShaderParameter(le,W.COMPILE_STATUS)){var et=W.getShaderInfoLog(le),pt=rt===W.FRAGMENT_SHADER?"fragment":"vertex";be(Oe,"string",pt+" shader source must be a string",vt);var Rt=X(Oe,vt),$t=q(et);H(Rt,$t),Object.keys(Rt).forEach(function(Nt){var ft=Rt[Nt];if(!ft.hasErrors)return;var Ht=[""],Vt=[""];function Ct(Ot,Ze){Ht.push(Ot),Vt.push(Ze||"")}Ct("file number "+Nt+": "+ft.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ft.lines.forEach(function(Ot){if(Ot.errors.length>0){Ct(j(Ot.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ct(Ot.line+r,"color:red; background-color:yellow; font-weight:bold");var Ze=0;Ot.errors.forEach(function(ct){var It=ct.message,Jt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(It);if(Jt){var At=Jt[1];switch(It=Jt[2],At){case"assign":At="=";break}Ze=Math.max(Ot.line.indexOf(At,Ze),0)}else Ze=0;Ct(j("| ",6)),Ct(j("^^^",Ze+3)+r,"font-weight:bold"),Ct(j("| ",6)),Ct(It+r,"font-weight:bold")}),Ct(j("| ",6)+r)}else Ct(j(Ot.number,4)+"|  "),Ct(Ot.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Vt[0]=Ht.join("%c"),console.log.apply(console,Vt)):console.log(Ht.join(""))}),v.raise("Error compiling "+pt+" shader, "+Rt[0].name)}}function G(W,le,Oe,rt,vt){if(!W.getProgramParameter(le,W.LINK_STATUS)){var et=W.getProgramInfoLog(le),pt=X(Oe,vt),Rt=X(rt,vt),$t='Error linking program with vertex shader, "'+Rt[0].name+'", and fragment shader "'+pt[0].name+'"';typeof document<"u"?console.log("%c"+$t+r+"%c"+et,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log($t+r+et),v.raise($t)}}function Z(W){W._commandRef=L()}function Q(W,le,Oe,rt){Z(W);function vt($t){return $t?rt.id($t):0}W._fragId=vt(W.static.frag),W._vertId=vt(W.static.vert);function et($t,Nt){Object.keys(Nt).forEach(function(ft){$t[rt.id(ft)]=!0})}var pt=W._uniformSet={};et(pt,le.static),et(pt,le.dynamic);var Rt=W._attributeSet={};et(Rt,Oe.static),et(Rt,Oe.dynamic),W._hasCount="count"in W.static||"count"in W.dynamic||"elements"in W.static||"elements"in W.dynamic}function fe(W,le){var Oe=F();c(W+" in command "+(le||L())+(Oe==="unknown"?"":" called from "+Oe))}function se(W,le,Oe){W||fe(le,Oe||L())}function ce(W,le,Oe,rt){W in le||fe("unknown parameter ("+W+")"+f(Oe)+". possible values: "+Object.keys(le).join(),rt||L())}function be(W,le,Oe,rt){_(W,le)||fe("invalid parameter type"+f(Oe)+". expected "+le+", got "+typeof W,rt||L())}function we(W){W()}function me(W,le,Oe){W.texture?M(W.texture._texture.internalformat,le,"unsupported texture format for attachment"):M(W.renderbuffer._renderbuffer.format,Oe,"unsupported renderbuffer format for attachment")}var He=33071,Je=9728,yt=9984,Be=9985,Yt=9986,Kt=9987,Lt=5120,An=5121,Ve=5122,xe=5123,Ce=5124,qe=5125,_t=5126,ht=32819,wt=32820,rn=33635,an=34042,Xt=36193,nt={};nt[Lt]=nt[An]=1,nt[Ve]=nt[xe]=nt[Xt]=nt[rn]=nt[ht]=nt[wt]=2,nt[Ce]=nt[qe]=nt[_t]=nt[an]=4;function fn(W,le){return W===wt||W===ht||W===rn?2:W===an?4:nt[W]*le}function Ue(W){return!(W&W-1)&&!!W}function _n(W,le,Oe){var rt,vt=le.width,et=le.height,pt=le.channels;v(vt>0&&vt<=Oe.maxTextureSize&&et>0&&et<=Oe.maxTextureSize,"invalid texture shape"),(W.wrapS!==He||W.wrapT!==He)&&v(Ue(vt)&&Ue(et),"incompatible wrap mode for texture, both width and height must be power of 2"),le.mipmask===1?vt!==1&&et!==1&&v(W.minFilter!==yt&&W.minFilter!==Yt&&W.minFilter!==Be&&W.minFilter!==Kt,"min filter requires mipmap"):(v(Ue(vt)&&Ue(et),"texture must be a square power of 2 to support mipmapping"),v(le.mipmask===(vt<<1)-1,"missing or incomplete mipmap data")),le.type===_t&&(Oe.extensions.indexOf("oes_texture_float_linear")<0&&v(W.minFilter===Je&&W.magFilter===Je,"filter not supported, must enable oes_texture_float_linear"),v(!W.genMipmaps,"mipmap generation not supported with float textures"));var Rt=le.images;for(rt=0;rt<16;++rt)if(Rt[rt]){var $t=vt>>rt,Nt=et>>rt;v(le.mipmask&1<<rt,"missing mipmap data");var ft=Rt[rt];if(v(ft.width===$t&&ft.height===Nt,"invalid shape for mip images"),v(ft.format===le.format&&ft.internalformat===le.internalformat&&ft.type===le.type,"incompatible type for mip image"),!ft.compressed)if(ft.data){var Ht=Math.ceil(fn(ft.type,pt)*$t/ft.unpackAlignment)*ft.unpackAlignment;v(ft.data.byteLength===Ht*Nt,"invalid data for image, buffer size is inconsistent with image format")}else ft.element||ft.copy}else W.genMipmaps||v((le.mipmask&1<<rt)===0,"extra mipmap data");le.compressed&&v(!W.genMipmaps,"mipmap generation for compressed images not supported")}function Jn(W,le,Oe,rt){var vt=W.width,et=W.height,pt=W.channels;v(vt>0&&vt<=rt.maxTextureSize&&et>0&&et<=rt.maxTextureSize,"invalid texture shape"),v(vt===et,"cube map must be square"),v(le.wrapS===He&&le.wrapT===He,"wrap mode not supported by cube map");for(var Rt=0;Rt<Oe.length;++Rt){var $t=Oe[Rt];v($t.width===vt&&$t.height===et,"inconsistent cube map face shape"),le.genMipmaps&&(v(!$t.compressed,"can not generate mipmap for compressed textures"),v($t.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Nt=$t.images,ft=0;ft<16;++ft){var Ht=Nt[ft];if(Ht){var Vt=vt>>ft,Ct=et>>ft;v($t.mipmask&1<<ft,"missing mipmap data"),v(Ht.width===Vt&&Ht.height===Ct,"invalid shape for mip images"),v(Ht.format===W.format&&Ht.internalformat===W.internalformat&&Ht.type===W.type,"incompatible type for mip image"),Ht.compressed||(Ht.data?v(Ht.data.byteLength===Vt*Ct*Math.max(fn(Ht.type,pt),Ht.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ht.element||Ht.copy)}}}}var ie=a(v,{optional:we,raise:c,commandRaise:fe,command:se,parameter:g,commandParameter:ce,constructor:E,type:S,commandType:be,isTypedArray:b,nni:A,oneOf:M,shaderError:B,linkError:G,callSite:F,saveCommandRef:Z,saveDrawInfo:Q,framebufferFormat:me,guessCommand:L,texture2D:_n,textureCube:Jn}),tr=0,Rr=0,Gr=5,co=6;function $n(W,le){this.id=tr++,this.type=W,this.data=le}function _o(W){return W.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Me(W){if(W.length===0)return[];var le=W.charAt(0),Oe=W.charAt(W.length-1);if(W.length>1&&le===Oe&&(le==='"'||le==="'"))return['"'+_o(W.substr(1,W.length-2))+'"'];var rt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(W);if(rt)return Me(W.substr(0,rt.index)).concat(Me(rt[1])).concat(Me(W.substr(rt.index+rt[0].length)));var vt=W.split(".");if(vt.length===1)return['"'+_o(W)+'"'];for(var et=[],pt=0;pt<vt.length;++pt)et=et.concat(Me(vt[pt]));return et}function Ke(W){return"["+Me(W).join("][")+"]"}function Ie(W,le){return new $n(W,Ke(le+""))}function ut(W){return typeof W=="function"&&!W._reglType||W instanceof $n}function nn(W,le){if(typeof W=="function")return new $n(Rr,W);if(typeof W=="number"||typeof W=="boolean")return new $n(Gr,W);if(Array.isArray(W))return new $n(co,W.map((Oe,rt)=>nn(Oe,le+"["+rt+"]")));if(W instanceof $n)return W;ie(!1,"invalid option type in uniform "+le)}var Zt={DynamicVariable:$n,define:Ie,isDynamic:ut,unbox:nn,accessor:Ke},Nn={next:typeof requestAnimationFrame=="function"?function(W){return requestAnimationFrame(W)}:function(W){return setTimeout(W,16)},cancel:typeof cancelAnimationFrame=="function"?function(W){return cancelAnimationFrame(W)}:clearTimeout},Or=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function li(){var W={"":0},le=[""];return{id:function(Oe){var rt=W[Oe];return rt||(rt=W[Oe]=le.length,le.push(Oe),rt)},str:function(Oe){return le[Oe]}}}function Si(W,le,Oe){var rt=document.createElement("canvas");a(rt.style,{border:0,margin:0,padding:0,top:0,left:0}),W.appendChild(rt),W===document.body&&(rt.style.position="absolute",a(W.style,{margin:0,padding:0}));function vt(){var Rt=window.innerWidth,$t=window.innerHeight;if(W!==document.body){var Nt=W.getBoundingClientRect();Rt=Nt.right-Nt.left,$t=Nt.bottom-Nt.top}rt.width=Oe*Rt,rt.height=Oe*$t,a(rt.style,{width:Rt+"px",height:$t+"px"})}var et;W!==document.body&&typeof ResizeObserver=="function"?(et=new ResizeObserver(function(){setTimeout(vt)}),et.observe(W)):window.addEventListener("resize",vt,!1);function pt(){et?et.disconnect():window.removeEventListener("resize",vt),W.removeChild(rt)}return vt(),{canvas:rt,onDestroy:pt}}function Yo(W,le){function Oe(rt){try{return W.getContext(rt,le)}catch{return null}}return Oe("webgl")||Oe("experimental-webgl")||Oe("webgl-experimental")}function ti(W){return typeof W.nodeName=="string"&&typeof W.appendChild=="function"&&typeof W.getBoundingClientRect=="function"}function Tn(W){return typeof W.drawArrays=="function"||typeof W.drawElements=="function"}function Fn(W){return typeof W=="string"?W.split():(ie(Array.isArray(W),"invalid extension array"),W)}function Hn(W){return typeof W=="string"?(ie(typeof document<"u","not supported outside of DOM"),document.querySelector(W)):W}function lr(W){var le=W||{},Oe,rt,vt,et,pt={},Rt=[],$t=[],Nt=typeof window>"u"?1:window.devicePixelRatio,ft=!1,Ht=function(Ot){Ot&&ie.raise(Ot)},Vt=function(){};if(typeof le=="string"?(ie(typeof document<"u","selector queries only supported in DOM enviroments"),Oe=document.querySelector(le),ie(Oe,"invalid query string for element")):typeof le=="object"?ti(le)?Oe=le:Tn(le)?(et=le,vt=et.canvas):(ie.constructor(le),"gl"in le?et=le.gl:"canvas"in le?vt=Hn(le.canvas):"container"in le&&(rt=Hn(le.container)),"attributes"in le&&(pt=le.attributes,ie.type(pt,"object","invalid context attributes")),"extensions"in le&&(Rt=Fn(le.extensions)),"optionalExtensions"in le&&($t=Fn(le.optionalExtensions)),"onDone"in le&&(ie.type(le.onDone,"function","invalid or missing onDone callback"),Ht=le.onDone),"profile"in le&&(ft=!!le.profile),"pixelRatio"in le&&(Nt=+le.pixelRatio,ie(Nt>0,"invalid pixel ratio"))):ie.raise("invalid arguments to regl"),Oe&&(Oe.nodeName.toLowerCase()==="canvas"?vt=Oe:rt=Oe),!et){if(!vt){ie(typeof document<"u","must manually specify webgl context outside of DOM environments");var Ct=Si(rt||document.body,Ht,Nt);if(!Ct)return null;vt=Ct.canvas,Vt=Ct.onDestroy}pt.premultipliedAlpha===void 0&&(pt.premultipliedAlpha=!0),et=Yo(vt,pt)}return et?{gl:et,canvas:vt,container:rt,extensions:Rt,optionalExtensions:$t,pixelRatio:Nt,profile:ft,onDone:Ht,onDestroy:Vt}:(Vt(),Ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function to(W,le){var Oe={};function rt(pt){ie.type(pt,"string","extension name must be string");var Rt=pt.toLowerCase(),$t;try{$t=Oe[Rt]=W.getExtension(Rt)}catch{}return!!$t}for(var vt=0;vt<le.extensions.length;++vt){var et=le.extensions[vt];if(!rt(et))return le.onDestroy(),le.onDone('"'+et+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return le.optionalExtensions.forEach(rt),{extensions:Oe,restore:function(){Object.keys(Oe).forEach(function(pt){if(Oe[pt]&&!rt(pt))throw new Error("(regl): error restoring extension "+pt)})}}}function jr(W,le){for(var Oe=Array(W),rt=0;rt<W;++rt)Oe[rt]=le(rt);return Oe}var ml=5120,Ha=5121,yl=5122,as=5123,np=5124,wc=5125,va=5126;function Us(W){for(var le=16;le<=1<<28;le*=16)if(W<=le)return le;return 0}function Rn(W){var le,Oe;return le=(W>65535)<<4,W>>>=le,Oe=(W>255)<<3,W>>>=Oe,le|=Oe,Oe=(W>15)<<2,W>>>=Oe,le|=Oe,Oe=(W>3)<<1,W>>>=Oe,le|=Oe,le|W>>1}function Vf(){var W=jr(8,function(){return[]});function le(et){var pt=Us(et),Rt=W[Rn(pt)>>2];return Rt.length>0?Rt.pop():new ArrayBuffer(pt)}function Oe(et){W[Rn(et.byteLength)>>2].push(et)}function rt(et,pt){var Rt=null;switch(et){case ml:Rt=new Int8Array(le(pt),0,pt);break;case Ha:Rt=new Uint8Array(le(pt),0,pt);break;case yl:Rt=new Int16Array(le(2*pt),0,pt);break;case as:Rt=new Uint16Array(le(2*pt),0,pt);break;case np:Rt=new Int32Array(le(4*pt),0,pt);break;case wc:Rt=new Uint32Array(le(4*pt),0,pt);break;case va:Rt=new Float32Array(le(4*pt),0,pt);break;default:return null}return Rt.length!==pt?Rt.subarray(0,pt):Rt}function vt(et){Oe(et.buffer)}return{alloc:le,free:Oe,allocType:rt,freeType:vt}}var wo=Vf();wo.zero=Vf();var Ec=3408,Ji=3410,la=3411,Cu=3412,Ca=3413,ma=3414,Da=3415,Oc=33901,Sc=33902,Bf=3379,Vs=3386,Wf=34921,xc=36347,rp=36348,jl=35661,Gf=35660,gl=34930,Ac=36349,Du=34076,Tc=34024,Mc=7936,op=7937,zf=7938,Yr=35724,zr=34047,Hf=36063,ls=34852,ya=3553,ju=34067,Xf=34069,Bo=33984,Il=6408,Ll=5126,Iu=5121,ss=36160,xi=36053,kc=36064,qf=16384,Pc=function(W,le){var Oe=1;le.ext_texture_filter_anisotropic&&(Oe=W.getParameter(zr));var rt=1,vt=1;le.webgl_draw_buffers&&(rt=W.getParameter(ls),vt=W.getParameter(Hf));var et=!!le.oes_texture_float;if(et){var pt=W.createTexture();W.bindTexture(ya,pt),W.texImage2D(ya,0,Il,1,1,0,Il,Ll,null);var Rt=W.createFramebuffer();if(W.bindFramebuffer(ss,Rt),W.framebufferTexture2D(ss,kc,ya,pt,0),W.bindTexture(ya,null),W.checkFramebufferStatus(ss)!==xi)et=!1;else{W.viewport(0,0,1,1),W.clearColor(1,0,0,1),W.clear(qf);var $t=wo.allocType(Ll,4);W.readPixels(0,0,1,1,Il,Ll,$t),W.getError()?et=!1:(W.deleteFramebuffer(Rt),W.deleteTexture(pt),et=$t[0]===1),wo.freeType($t)}}var Nt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ft=!0;if(!Nt){var Ht=W.createTexture(),Vt=wo.allocType(Iu,36);W.activeTexture(Bo),W.bindTexture(ju,Ht),W.texImage2D(Xf,0,Il,3,3,0,Il,Iu,Vt),wo.freeType(Vt),W.bindTexture(ju,null),W.deleteTexture(Ht),ft=!W.getError()}return{colorBits:[W.getParameter(Ji),W.getParameter(la),W.getParameter(Cu),W.getParameter(Ca)],depthBits:W.getParameter(ma),stencilBits:W.getParameter(Da),subpixelBits:W.getParameter(Ec),extensions:Object.keys(le).filter(function(Ct){return!!le[Ct]}),maxAnisotropic:Oe,maxDrawbuffers:rt,maxColorAttachments:vt,pointSizeDims:W.getParameter(Oc),lineWidthDims:W.getParameter(Sc),maxViewportDims:W.getParameter(Vs),maxCombinedTextureUnits:W.getParameter(jl),maxCubeMapSize:W.getParameter(Du),maxRenderbufferSize:W.getParameter(Tc),maxTextureUnits:W.getParameter(gl),maxTextureSize:W.getParameter(Bf),maxAttributes:W.getParameter(Wf),maxVertexUniforms:W.getParameter(xc),maxVertexTextureUnits:W.getParameter(Gf),maxVaryingVectors:W.getParameter(rp),maxFragmentUniforms:W.getParameter(Ac),glsl:W.getParameter(Yr),renderer:W.getParameter(op),vendor:W.getParameter(Mc),version:W.getParameter(zf),readFloat:et,npotTextureCube:ft}};function Fi(W){return!!W&&typeof W=="object"&&Array.isArray(W.shape)&&Array.isArray(W.stride)&&typeof W.offset=="number"&&W.shape.length===W.stride.length&&(Array.isArray(W.data)||n(W.data))}var si=function(W){return Object.keys(W).map(function(le){return W[le]})},ga={shape:Vi,flatten:Kf};function lo(W,le,Oe){for(var rt=0;rt<le;++rt)Oe[rt]=W[rt]}function ip(W,le,Oe,rt){for(var vt=0,et=0;et<le;++et)for(var pt=W[et],Rt=0;Rt<Oe;++Rt)rt[vt++]=pt[Rt]}function Ui(W,le,Oe,rt,vt,et){for(var pt=et,Rt=0;Rt<le;++Rt)for(var $t=W[Rt],Nt=0;Nt<Oe;++Nt)for(var ft=$t[Nt],Ht=0;Ht<rt;++Ht)vt[pt++]=ft[Ht]}function Yf(W,le,Oe,rt,vt){for(var et=1,pt=Oe+1;pt<le.length;++pt)et*=le[pt];var Rt=le[Oe];if(le.length-Oe===4){var $t=le[Oe+1],Nt=le[Oe+2],ft=le[Oe+3];for(pt=0;pt<Rt;++pt)Ui(W[pt],$t,Nt,ft,rt,vt),vt+=et}else for(pt=0;pt<Rt;++pt)Yf(W[pt],le,Oe+1,rt,vt),vt+=et}function Kf(W,le,Oe,rt){var vt=1;if(le.length)for(var et=0;et<le.length;++et)vt*=le[et];else vt=0;var pt=rt||wo.allocType(Oe,vt);switch(le.length){case 0:break;case 1:lo(W,le[0],pt);break;case 2:ip(W,le[0],le[1],pt);break;case 3:Ui(W,le[0],le[1],le[2],pt,0);break;default:Yf(W,le,0,pt,0)}return pt}function Vi(W){for(var le=[],Oe=W;Oe.length;Oe=Oe[0])le.push(Oe.length);return le}var Qi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Rc=5120,Fr=5122,ui=5124,Lu=5121,Zf=5123,Nc=5125,$u=5126,Xa=5126,Bi={int8:Rc,int16:Fr,int32:ui,uint8:Lu,uint16:Zf,uint32:Nc,float:$u,float32:Xa},us=35048,ea=35040,ba={dynamic:us,stream:ea,static:35044},Nr=ga.flatten,Wi=ga.shape,ja=35044,yi=35040,cs=5121,$l=5126,Ia=[];Ia[5120]=1,Ia[5122]=2,Ia[5124]=4,Ia[5121]=1,Ia[5123]=2,Ia[5125]=4,Ia[5126]=4;function ho(W){return Qi[Object.prototype.toString.call(W)]|0}function Bs(W,le){for(var Oe=0;Oe<le.length;++Oe)W[Oe]=le[Oe]}function qa(W,le,Oe,rt,vt,et,pt){for(var Rt=0,$t=0;$t<Oe;++$t)for(var Nt=0;Nt<rt;++Nt)W[Rt++]=le[vt*$t+et*Nt+pt]}function _a(W,le,Oe,rt){var vt=0,et={};function pt(Ze){this.id=vt++,this.buffer=W.createBuffer(),this.type=Ze,this.usage=ja,this.byteLength=0,this.dimension=1,this.dtype=cs,this.persistentData=null,Oe.profile&&(this.stats={size:0})}pt.prototype.bind=function(){W.bindBuffer(this.type,this.buffer)},pt.prototype.destroy=function(){Vt(this)};var Rt=[];function $t(Ze,ct){var It=Rt.pop();return It||(It=new pt(Ze)),It.bind(),Ht(It,ct,yi,0,1,!1),It}function Nt(Ze){Rt.push(Ze)}function ft(Ze,ct,It){Ze.byteLength=ct.byteLength,W.bufferData(Ze.type,ct,It)}function Ht(Ze,ct,It,Jt,At,on){var Mt;if(Ze.usage=It,Array.isArray(ct)){if(Ze.dtype=Jt||$l,ct.length>0){var Gt;if(Array.isArray(ct[0])){Mt=Wi(ct);for(var Tt=1,qt=1;qt<Mt.length;++qt)Tt*=Mt[qt];Ze.dimension=Tt,Gt=Nr(ct,Mt,Ze.dtype),ft(Ze,Gt,It),on?Ze.persistentData=Gt:wo.freeType(Gt)}else if(typeof ct[0]=="number"){Ze.dimension=At;var Pn=wo.allocType(Ze.dtype,ct.length);Bs(Pn,ct),ft(Ze,Pn,It),on?Ze.persistentData=Pn:wo.freeType(Pn)}else n(ct[0])?(Ze.dimension=ct[0].length,Ze.dtype=Jt||ho(ct[0])||$l,Gt=Nr(ct,[ct.length,ct[0].length],Ze.dtype),ft(Ze,Gt,It),on?Ze.persistentData=Gt:wo.freeType(Gt)):ie.raise("invalid buffer data")}}else if(n(ct))Ze.dtype=Jt||ho(ct),Ze.dimension=At,ft(Ze,ct,It),on&&(Ze.persistentData=new Uint8Array(new Uint8Array(ct.buffer)));else if(Fi(ct)){Mt=ct.shape;var Bn=ct.stride,Dt=ct.offset,kt=0,xt=0,jn=0,rr=0;Mt.length===1?(kt=Mt[0],xt=1,jn=Bn[0],rr=0):Mt.length===2?(kt=Mt[0],xt=Mt[1],jn=Bn[0],rr=Bn[1]):ie.raise("invalid shape"),Ze.dtype=Jt||ho(ct.data)||$l,Ze.dimension=xt;var pn=wo.allocType(Ze.dtype,kt*xt);qa(pn,ct.data,kt,xt,jn,rr,Dt),ft(Ze,pn,It),on?Ze.persistentData=pn:wo.freeType(pn)}else ct instanceof ArrayBuffer?(Ze.dtype=cs,Ze.dimension=At,ft(Ze,ct,It),on&&(Ze.persistentData=new Uint8Array(new Uint8Array(ct)))):ie.raise("invalid buffer data")}function Vt(Ze){le.bufferCount--,rt(Ze);var ct=Ze.buffer;ie(ct,"buffer must not be deleted already"),W.deleteBuffer(ct),Ze.buffer=null,delete et[Ze.id]}function Ct(Ze,ct,It,Jt){le.bufferCount++;var At=new pt(ct);et[At.id]=At;function on(Tt){var qt=ja,Pn=null,Bn=0,Dt=0,kt=1;return Array.isArray(Tt)||n(Tt)||Fi(Tt)||Tt instanceof ArrayBuffer?Pn=Tt:typeof Tt=="number"?Bn=Tt|0:Tt&&(ie.type(Tt,"object","buffer arguments must be an object, a number or an array"),"data"in Tt&&(ie(Pn===null||Array.isArray(Pn)||n(Pn)||Fi(Pn),"invalid data for buffer"),Pn=Tt.data),"usage"in Tt&&(ie.parameter(Tt.usage,ba,"invalid buffer usage"),qt=ba[Tt.usage]),"type"in Tt&&(ie.parameter(Tt.type,Bi,"invalid buffer type"),Dt=Bi[Tt.type]),"dimension"in Tt&&(ie.type(Tt.dimension,"number","invalid dimension"),kt=Tt.dimension|0),"length"in Tt&&(ie.nni(Bn,"buffer length must be a nonnegative integer"),Bn=Tt.length|0)),At.bind(),Pn?Ht(At,Pn,qt,Dt,kt,Jt):(Bn&&W.bufferData(At.type,Bn,qt),At.dtype=Dt||cs,At.usage=qt,At.dimension=kt,At.byteLength=Bn),Oe.profile&&(At.stats.size=At.byteLength*Ia[At.dtype]),on}function Mt(Tt,qt){ie(qt+Tt.byteLength<=At.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Tt.byteLength+" starting from offset "+qt+" to a buffer of size "+At.byteLength),W.bufferSubData(At.type,qt,Tt)}function Gt(Tt,qt){var Pn=(qt||0)|0,Bn;if(At.bind(),n(Tt)||Tt instanceof ArrayBuffer)Mt(Tt,Pn);else if(Array.isArray(Tt)){if(Tt.length>0)if(typeof Tt[0]=="number"){var Dt=wo.allocType(At.dtype,Tt.length);Bs(Dt,Tt),Mt(Dt,Pn),wo.freeType(Dt)}else if(Array.isArray(Tt[0])||n(Tt[0])){Bn=Wi(Tt);var kt=Nr(Tt,Bn,At.dtype);Mt(kt,Pn),wo.freeType(kt)}else ie.raise("invalid buffer data")}else if(Fi(Tt)){Bn=Tt.shape;var xt=Tt.stride,jn=0,rr=0,pn=0,sr=0;Bn.length===1?(jn=Bn[0],rr=1,pn=xt[0],sr=0):Bn.length===2?(jn=Bn[0],rr=Bn[1],pn=xt[0],sr=xt[1]):ie.raise("invalid shape");var Wn=Array.isArray(Tt.data)?At.dtype:ho(Tt.data),ir=wo.allocType(Wn,jn*rr);qa(ir,Tt.data,jn,rr,pn,sr,Tt.offset),Mt(ir,Pn),wo.freeType(ir)}else ie.raise("invalid data for buffer subdata");return on}return It||on(Ze),on._reglType="buffer",on._buffer=At,on.subdata=Gt,Oe.profile&&(on.stats=At.stats),on.destroy=function(){Vt(At)},on}function Ot(){si(et).forEach(function(Ze){Ze.buffer=W.createBuffer(),W.bindBuffer(Ze.type,Ze.buffer),W.bufferData(Ze.type,Ze.persistentData||Ze.byteLength,Ze.usage)})}return Oe.profile&&(le.getTotalBufferSize=function(){var Ze=0;return Object.keys(et).forEach(function(ct){Ze+=et[ct].stats.size}),Ze}),{create:Ct,createStream:$t,destroyStream:Nt,clear:function(){si(et).forEach(Vt),Rt.forEach(Vt)},getBuffer:function(Ze){return Ze&&Ze._buffer instanceof pt?Ze._buffer:null},restore:Ot,_initBuffer:Ht}}var Cc=0,ap=0,Dc=1,Ko=1,Ws=4,Ya=4,ni={points:Cc,point:ap,lines:Dc,line:Ko,triangles:Ws,triangle:Ya,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},jc=0,sa=1,wa=4,Fu=5120,Gi=5121,ta=5122,ci=5123,ua=5124,Ii=5125,dt=34963,Ft=35040,Ut=35044;function mn(W,le,Oe,rt){var vt={},et=0,pt={uint8:Gi,uint16:ci};le.oes_element_index_uint&&(pt.uint32=Ii);function Rt(Ot){this.id=et++,vt[this.id]=this,this.buffer=Ot,this.primType=wa,this.vertCount=0,this.type=0}Rt.prototype.bind=function(){this.buffer.bind()};var $t=[];function Nt(Ot){var Ze=$t.pop();return Ze||(Ze=new Rt(Oe.create(null,dt,!0,!1)._buffer)),Ht(Ze,Ot,Ft,-1,-1,0,0),Ze}function ft(Ot){$t.push(Ot)}function Ht(Ot,Ze,ct,It,Jt,At,on){Ot.buffer.bind();var Mt;if(Ze){var Gt=on;!on&&(!n(Ze)||Fi(Ze)&&!n(Ze.data))&&(Gt=le.oes_element_index_uint?Ii:ci),Oe._initBuffer(Ot.buffer,Ze,ct,Gt,3)}else W.bufferData(dt,At,ct),Ot.buffer.dtype=Mt||Gi,Ot.buffer.usage=ct,Ot.buffer.dimension=3,Ot.buffer.byteLength=At;if(Mt=on,!on){switch(Ot.buffer.dtype){case Gi:case Fu:Mt=Gi;break;case ci:case ta:Mt=ci;break;case Ii:case ua:Mt=Ii;break;default:ie.raise("unsupported type for element array")}Ot.buffer.dtype=Mt}Ot.type=Mt,ie(Mt!==Ii||!!le.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Tt=Jt;Tt<0&&(Tt=Ot.buffer.byteLength,Mt===ci?Tt>>=1:Mt===Ii&&(Tt>>=2)),Ot.vertCount=Tt;var qt=It;if(It<0){qt=wa;var Pn=Ot.buffer.dimension;Pn===1&&(qt=jc),Pn===2&&(qt=sa),Pn===3&&(qt=wa)}Ot.primType=qt}function Vt(Ot){rt.elementsCount--,ie(Ot.buffer!==null,"must not double destroy elements"),delete vt[Ot.id],Ot.buffer.destroy(),Ot.buffer=null}function Ct(Ot,Ze){var ct=Oe.create(null,dt,!0),It=new Rt(ct._buffer);rt.elementsCount++;function Jt(At){if(!At)ct(),It.primType=wa,It.vertCount=0,It.type=Gi;else if(typeof At=="number")ct(At),It.primType=wa,It.vertCount=At|0,It.type=Gi;else{var on=null,Mt=Ut,Gt=-1,Tt=-1,qt=0,Pn=0;Array.isArray(At)||n(At)||Fi(At)?on=At:(ie.type(At,"object","invalid arguments for elements"),"data"in At&&(on=At.data,ie(Array.isArray(on)||n(on)||Fi(on),"invalid data for element buffer")),"usage"in At&&(ie.parameter(At.usage,ba,"invalid element buffer usage"),Mt=ba[At.usage]),"primitive"in At&&(ie.parameter(At.primitive,ni,"invalid element buffer primitive"),Gt=ni[At.primitive]),"count"in At&&(ie(typeof At.count=="number"&&At.count>=0,"invalid vertex count for elements"),Tt=At.count|0),"type"in At&&(ie.parameter(At.type,pt,"invalid buffer type"),Pn=pt[At.type]),"length"in At?qt=At.length|0:(qt=Tt,Pn===ci||Pn===ta?qt*=2:(Pn===Ii||Pn===ua)&&(qt*=4))),Ht(It,on,Mt,Gt,Tt,qt,Pn)}return Jt}return Jt(Ot),Jt._reglType="elements",Jt._elements=It,Jt.subdata=function(At,on){return ct.subdata(At,on),Jt},Jt.destroy=function(){Vt(It)},Jt}return{create:Ct,createStream:Nt,destroyStream:ft,getElements:function(Ot){return typeof Ot=="function"&&Ot._elements instanceof Rt?Ot._elements:null},clear:function(){si(vt).forEach(Vt)}}}var fr=new Float32Array(1),Cr=new Uint32Array(fr.buffer),vo=5123;function P(W){for(var le=wo.allocType(vo,W.length),Oe=0;Oe<W.length;++Oe)if(isNaN(W[Oe]))le[Oe]=65535;else if(W[Oe]===1/0)le[Oe]=31744;else if(W[Oe]===-1/0)le[Oe]=64512;else{fr[0]=W[Oe];var rt=Cr[0],vt=rt>>>31<<15,et=(rt<<1>>>24)-127,pt=rt>>13&1023;if(et<-24)le[Oe]=vt;else if(et<-14){var Rt=-14-et;le[Oe]=vt+(pt+1024>>Rt)}else et>15?le[Oe]=vt+31744:le[Oe]=vt+(et+15<<10)+pt}return le}function R(W){return Array.isArray(W)||n(W)}var z=function(W){return!(W&W-1)&&!!W},oe=34467,Ee=3553,Ye=34067,gt=34069,zt=6408,En=6406,wr=6407,dn=6409,Hr=6410,mr=32854,Lr=32855,ca=36194,Ao=32819,na=32820,bl=33635,_l=34042,Fl=6402,fs=34041,Ka=35904,ds=35906,ri=36193,Ul=33776,wl=33777,Za=33778,Ja=33779,Gs=35986,gh=35987,bh=34798,lp=35840,Ic=35841,zs=35842,Jf=35843,_h=36196,Hs=5121,Lc=5123,Qf=5125,Wo=5126,zi=10242,ed=10243,td=10497,Uu=33071,Zv=33648,Vu=10240,Bu=10241,$c=9728,Xs=9729,ps=9984,Wu=9985,Fc=9986,hs=9987,Jv=33170,Uc=4352,Qv=4353,em=4354,wh=34046,nd=3317,Li=37440,Eh=37441,ae=37443,qs=37444,Vl=33984,La=[ps,Fc,Wu,hs],Dr=[0,dn,Hr,wr,zt],Ai={};Ai[dn]=Ai[En]=Ai[Fl]=1,Ai[fs]=Ai[Hr]=2,Ai[wr]=Ai[Ka]=3,Ai[zt]=Ai[ds]=4;function Ur(W){return"[object "+W+"]"}var Qa=Ur("HTMLCanvasElement"),Bl=Ur("OffscreenCanvas"),Ea=Ur("CanvasRenderingContext2D"),rd=Ur("ImageBitmap"),od=Ur("HTMLImageElement"),sp=Ur("HTMLVideoElement"),Oh=Object.keys(Qi).concat([Qa,Bl,Ea,rd,od,sp]),Wl=[];Wl[Hs]=1,Wl[Wo]=4,Wl[ri]=2,Wl[Lc]=2,Wl[Qf]=4;var Go=[];Go[mr]=2,Go[Lr]=2,Go[ca]=2,Go[fs]=4,Go[Ul]=.5,Go[wl]=.5,Go[Za]=1,Go[Ja]=1,Go[Gs]=.5,Go[gh]=1,Go[bh]=1,Go[lp]=.5,Go[Ic]=.25,Go[zs]=.5,Go[Jf]=.25,Go[_h]=.5;function Gu(W){return Array.isArray(W)&&(W.length===0||typeof W[0]=="number")}function up(W){if(!Array.isArray(W))return!1;var le=W.length;return!(le===0||!R(W[0]))}function Gl(W){return Object.prototype.toString.call(W)}function el(W){return Gl(W)===Qa}function Vc(W){return Gl(W)===Bl}function vs(W){return Gl(W)===Ea}function Oa(W){return Gl(W)===rd}function cp(W){return Gl(W)===od}function fp(W){return Gl(W)===sp}function tl(W){if(!W)return!1;var le=Gl(W);return Oh.indexOf(le)>=0?!0:Gu(W)||up(W)||Fi(W)}function Eo(W){return Qi[Object.prototype.toString.call(W)]|0}function Sh(W,le){var Oe=le.length;switch(W.type){case Hs:case Lc:case Qf:case Wo:var rt=wo.allocType(W.type,Oe);rt.set(le),W.data=rt;break;case ri:W.data=P(le);break;default:ie.raise("unsupported texture type, must specify a typed array")}}function dp(W,le){return wo.allocType(W.type===ri?Wo:W.type,le)}function zo(W,le){W.type===ri?(W.data=P(le),wo.freeType(le)):W.data=le}function Kr(W,le,Oe,rt,vt,et){for(var pt=W.width,Rt=W.height,$t=W.channels,Nt=pt*Rt*$t,ft=dp(W,Nt),Ht=0,Vt=0;Vt<Rt;++Vt)for(var Ct=0;Ct<pt;++Ct)for(var Ot=0;Ot<$t;++Ot)ft[Ht++]=le[Oe*Ct+rt*Vt+vt*Ot+et];zo(W,ft)}function oi(W,le,Oe,rt,vt,et){var pt;if(typeof Go[W]<"u"?pt=Go[W]:pt=Ai[W]*Wl[le],et&&(pt*=6),vt){for(var Rt=0,$t=Oe;$t>=1;)Rt+=pt*$t*$t,$t/=2;return Rt}else return pt*Oe*rt}function Ar(W,le,Oe,rt,vt,et,pt){var Rt={"don't care":Uc,"dont care":Uc,nice:em,fast:Qv},$t={repeat:td,clamp:Uu,mirror:Zv},Nt={nearest:$c,linear:Xs},ft=a({mipmap:hs,"nearest mipmap nearest":ps,"linear mipmap nearest":Wu,"nearest mipmap linear":Fc,"linear mipmap linear":hs},Nt),Ht={none:0,browser:qs},Vt={uint8:Hs,rgba4:Ao,rgb565:bl,"rgb5 a1":na},Ct={alpha:En,luminance:dn,"luminance alpha":Hr,rgb:wr,rgba:zt,rgba4:mr,"rgb5 a1":Lr,rgb565:ca},Ot={};le.ext_srgb&&(Ct.srgb=Ka,Ct.srgba=ds),le.oes_texture_float&&(Vt.float32=Vt.float=Wo),le.oes_texture_half_float&&(Vt.float16=Vt["half float"]=ri),le.webgl_depth_texture&&(a(Ct,{depth:Fl,"depth stencil":fs}),a(Vt,{uint16:Lc,uint32:Qf,"depth stencil":_l})),le.webgl_compressed_texture_s3tc&&a(Ot,{"rgb s3tc dxt1":Ul,"rgba s3tc dxt1":wl,"rgba s3tc dxt3":Za,"rgba s3tc dxt5":Ja}),le.webgl_compressed_texture_atc&&a(Ot,{"rgb atc":Gs,"rgba atc explicit alpha":gh,"rgba atc interpolated alpha":bh}),le.webgl_compressed_texture_pvrtc&&a(Ot,{"rgb pvrtc 4bppv1":lp,"rgb pvrtc 2bppv1":Ic,"rgba pvrtc 4bppv1":zs,"rgba pvrtc 2bppv1":Jf}),le.webgl_compressed_texture_etc1&&(Ot["rgb etc1"]=_h);var Ze=Array.prototype.slice.call(W.getParameter(oe));Object.keys(Ot).forEach(function(ye){var it=Ot[ye];Ze.indexOf(it)>=0&&(Ct[ye]=it)});var ct=Object.keys(Ct);Oe.textureFormats=ct;var It=[];Object.keys(Ct).forEach(function(ye){var it=Ct[ye];It[it]=ye});var Jt=[];Object.keys(Vt).forEach(function(ye){var it=Vt[ye];Jt[it]=ye});var At=[];Object.keys(Nt).forEach(function(ye){var it=Nt[ye];At[it]=ye});var on=[];Object.keys(ft).forEach(function(ye){var it=ft[ye];on[it]=ye});var Mt=[];Object.keys($t).forEach(function(ye){var it=$t[ye];Mt[it]=ye});var Gt=ct.reduce(function(ye,it){var tt=Ct[it];return tt===dn||tt===En||tt===dn||tt===Hr||tt===Fl||tt===fs||le.ext_srgb&&(tt===Ka||tt===ds)?ye[tt]=tt:tt===Lr||it.indexOf("rgba")>=0?ye[tt]=zt:ye[tt]=wr,ye},{});function Tt(){this.internalformat=zt,this.format=zt,this.type=Hs,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=qs,this.width=0,this.height=0,this.channels=0}function qt(ye,it){ye.internalformat=it.internalformat,ye.format=it.format,ye.type=it.type,ye.compressed=it.compressed,ye.premultiplyAlpha=it.premultiplyAlpha,ye.flipY=it.flipY,ye.unpackAlignment=it.unpackAlignment,ye.colorSpace=it.colorSpace,ye.width=it.width,ye.height=it.height,ye.channels=it.channels}function Pn(ye,it){if(!(typeof it!="object"||!it)){if("premultiplyAlpha"in it&&(ie.type(it.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ye.premultiplyAlpha=it.premultiplyAlpha),"flipY"in it&&(ie.type(it.flipY,"boolean","invalid texture flip"),ye.flipY=it.flipY),"alignment"in it&&(ie.oneOf(it.alignment,[1,2,4,8],"invalid texture unpack alignment"),ye.unpackAlignment=it.alignment),"colorSpace"in it&&(ie.parameter(it.colorSpace,Ht,"invalid colorSpace"),ye.colorSpace=Ht[it.colorSpace]),"type"in it){var tt=it.type;ie(le.oes_texture_float||!(tt==="float"||tt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ie(le.oes_texture_half_float||!(tt==="half float"||tt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ie(le.webgl_depth_texture||!(tt==="uint16"||tt==="uint32"||tt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ie.parameter(tt,Vt,"invalid texture type"),ye.type=Vt[tt]}var un=ye.width,dr=ye.height,he=ye.channels,re=!1;"shape"in it?(ie(Array.isArray(it.shape)&&it.shape.length>=2,"shape must be an array"),un=it.shape[0],dr=it.shape[1],it.shape.length===3&&(he=it.shape[2],ie(he>0&&he<=4,"invalid number of channels"),re=!0),ie(un>=0&&un<=Oe.maxTextureSize,"invalid width"),ie(dr>=0&&dr<=Oe.maxTextureSize,"invalid height")):("radius"in it&&(un=dr=it.radius,ie(un>=0&&un<=Oe.maxTextureSize,"invalid radius")),"width"in it&&(un=it.width,ie(un>=0&&un<=Oe.maxTextureSize,"invalid width")),"height"in it&&(dr=it.height,ie(dr>=0&&dr<=Oe.maxTextureSize,"invalid height")),"channels"in it&&(he=it.channels,ie(he>0&&he<=4,"invalid number of channels"),re=!0)),ye.width=un|0,ye.height=dr|0,ye.channels=he|0;var Re=!1;if("format"in it){var We=it.format;ie(le.webgl_depth_texture||!(We==="depth"||We==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ie.parameter(We,Ct,"invalid texture format");var Qe=ye.internalformat=Ct[We];ye.format=Gt[Qe],We in Vt&&("type"in it||(ye.type=Vt[We])),We in Ot&&(ye.compressed=!0),Re=!0}!re&&Re?ye.channels=Ai[ye.format]:re&&!Re?ye.channels!==Dr[ye.format]&&(ye.format=ye.internalformat=Dr[ye.channels]):Re&&re&&ie(ye.channels===Ai[ye.format],"number of channels inconsistent with specified format")}}function Bn(ye){W.pixelStorei(Li,ye.flipY),W.pixelStorei(Eh,ye.premultiplyAlpha),W.pixelStorei(ae,ye.colorSpace),W.pixelStorei(nd,ye.unpackAlignment)}function Dt(){Tt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(ye,it){var tt=null;if(tl(it)?tt=it:it&&(ie.type(it,"object","invalid pixel data type"),Pn(ye,it),"x"in it&&(ye.xOffset=it.x|0),"y"in it&&(ye.yOffset=it.y|0),tl(it.data)&&(tt=it.data)),ie(!ye.compressed||tt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),it.copy){ie(!tt,"can not specify copy and data field for the same texture");var un=vt.viewportWidth,dr=vt.viewportHeight;ye.width=ye.width||un-ye.xOffset,ye.height=ye.height||dr-ye.yOffset,ye.needsCopy=!0,ie(ye.xOffset>=0&&ye.xOffset<un&&ye.yOffset>=0&&ye.yOffset<dr&&ye.width>0&&ye.width<=un&&ye.height>0&&ye.height<=dr,"copy texture read out of bounds")}else if(!tt)ye.width=ye.width||1,ye.height=ye.height||1,ye.channels=ye.channels||4;else if(n(tt))ye.channels=ye.channels||4,ye.data=tt,!("type"in it)&&ye.type===Hs&&(ye.type=Eo(tt));else if(Gu(tt))ye.channels=ye.channels||4,Sh(ye,tt),ye.alignment=1,ye.needsFree=!0;else if(Fi(tt)){var he=tt.data;!Array.isArray(he)&&ye.type===Hs&&(ye.type=Eo(he));var re=tt.shape,Re=tt.stride,We,Qe,De,Ne,Le,pe;re.length===3?(De=re[2],pe=Re[2]):(ie(re.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,pe=1),We=re[0],Qe=re[1],Ne=Re[0],Le=Re[1],ye.alignment=1,ye.width=We,ye.height=Qe,ye.channels=De,ye.format=ye.internalformat=Dr[De],ye.needsFree=!0,Kr(ye,he,Ne,Le,pe,tt.offset)}else if(el(tt)||Vc(tt)||vs(tt))el(tt)||Vc(tt)?ye.element=tt:ye.element=tt.canvas,ye.width=ye.element.width,ye.height=ye.element.height,ye.channels=4;else if(Oa(tt))ye.element=tt,ye.width=tt.width,ye.height=tt.height,ye.channels=4;else if(cp(tt))ye.element=tt,ye.width=tt.naturalWidth,ye.height=tt.naturalHeight,ye.channels=4;else if(fp(tt))ye.element=tt,ye.width=tt.videoWidth,ye.height=tt.videoHeight,ye.channels=4;else if(up(tt)){var ke=ye.width||tt[0].length,de=ye.height||tt.length,Ge=ye.channels;R(tt[0][0])?Ge=Ge||tt[0][0].length:Ge=Ge||1;for(var ze=ga.shape(tt),p=1,y=0;y<ze.length;++y)p*=ze[y];var O=dp(ye,p);ga.flatten(tt,ze,"",O),zo(ye,O),ye.alignment=1,ye.width=ke,ye.height=de,ye.channels=Ge,ye.format=ye.internalformat=Dr[Ge],ye.needsFree=!0}ye.type===Wo?ie(Oe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ye.type===ri&&ie(Oe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function xt(ye,it,tt){var un=ye.element,dr=ye.data,he=ye.internalformat,re=ye.format,Re=ye.type,We=ye.width,Qe=ye.height;Bn(ye),un?W.texImage2D(it,tt,re,re,Re,un):ye.compressed?W.compressedTexImage2D(it,tt,he,We,Qe,0,dr):ye.needsCopy?(rt(),W.copyTexImage2D(it,tt,re,ye.xOffset,ye.yOffset,We,Qe,0)):W.texImage2D(it,tt,re,We,Qe,0,re,Re,dr||null)}function jn(ye,it,tt,un,dr){var he=ye.element,re=ye.data,Re=ye.internalformat,We=ye.format,Qe=ye.type,De=ye.width,Ne=ye.height;Bn(ye),he?W.texSubImage2D(it,dr,tt,un,We,Qe,he):ye.compressed?W.compressedTexSubImage2D(it,dr,tt,un,Re,De,Ne,re):ye.needsCopy?(rt(),W.copyTexSubImage2D(it,dr,tt,un,ye.xOffset,ye.yOffset,De,Ne)):W.texSubImage2D(it,dr,tt,un,De,Ne,We,Qe,re)}var rr=[];function pn(){return rr.pop()||new Dt}function sr(ye){ye.needsFree&&wo.freeType(ye.data),Dt.call(ye),rr.push(ye)}function Wn(){Tt.call(this),this.genMipmaps=!1,this.mipmapHint=Uc,this.mipmask=0,this.images=Array(16)}function ir(ye,it,tt){var un=ye.images[0]=pn();ye.mipmask=1,un.width=ye.width=it,un.height=ye.height=tt,un.channels=ye.channels=4}function _r(ye,it){var tt=null;if(tl(it))tt=ye.images[0]=pn(),qt(tt,ye),kt(tt,it),ye.mipmask=1;else if(Pn(ye,it),Array.isArray(it.mipmap))for(var un=it.mipmap,dr=0;dr<un.length;++dr)tt=ye.images[dr]=pn(),qt(tt,ye),tt.width>>=dr,tt.height>>=dr,kt(tt,un[dr]),ye.mipmask|=1<<dr;else tt=ye.images[0]=pn(),qt(tt,ye),kt(tt,it),ye.mipmask=1;qt(ye,ye.images[0]),ye.compressed&&(ye.internalformat===Ul||ye.internalformat===wl||ye.internalformat===Za||ye.internalformat===Ja)&&ie(ye.width%4===0&&ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function jo(ye,it){for(var tt=ye.images,un=0;un<tt.length;++un){if(!tt[un])return;xt(tt[un],it,un)}}var Po=[];function or(){var ye=Po.pop()||new Wn;Tt.call(ye),ye.mipmask=0;for(var it=0;it<16;++it)ye.images[it]=null;return ye}function Zo(ye){for(var it=ye.images,tt=0;tt<it.length;++tt)it[tt]&&sr(it[tt]),it[tt]=null;Po.push(ye)}function so(){this.minFilter=$c,this.magFilter=$c,this.wrapS=Uu,this.wrapT=Uu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Uc}function Io(ye,it){if("min"in it){var tt=it.min;ie.parameter(tt,ft),ye.minFilter=ft[tt],La.indexOf(ye.minFilter)>=0&&!("faces"in it)&&(ye.genMipmaps=!0)}if("mag"in it){var un=it.mag;ie.parameter(un,Nt),ye.magFilter=Nt[un]}var dr=ye.wrapS,he=ye.wrapT;if("wrap"in it){var re=it.wrap;typeof re=="string"?(ie.parameter(re,$t),dr=he=$t[re]):Array.isArray(re)&&(ie.parameter(re[0],$t),ie.parameter(re[1],$t),dr=$t[re[0]],he=$t[re[1]])}else{if("wrapS"in it){var Re=it.wrapS;ie.parameter(Re,$t),dr=$t[Re]}if("wrapT"in it){var We=it.wrapT;ie.parameter(We,$t),he=$t[We]}}if(ye.wrapS=dr,ye.wrapT=he,"anisotropic"in it){var Qe=it.anisotropic;ie(typeof Qe=="number"&&Qe>=1&&Qe<=Oe.maxAnisotropic,"aniso samples must be between 1 and "),ye.anisotropic=it.anisotropic}if("mipmap"in it){var De=!1;switch(typeof it.mipmap){case"string":ie.parameter(it.mipmap,Rt,"invalid mipmap hint"),ye.mipmapHint=Rt[it.mipmap],ye.genMipmaps=!0,De=!0;break;case"boolean":De=ye.genMipmaps=it.mipmap;break;case"object":ie(Array.isArray(it.mipmap),"invalid mipmap type"),ye.genMipmaps=!1,De=!0;break;default:ie.raise("invalid mipmap type")}De&&!("min"in it)&&(ye.minFilter=ps)}}function qo(ye,it){W.texParameteri(it,Bu,ye.minFilter),W.texParameteri(it,Vu,ye.magFilter),W.texParameteri(it,zi,ye.wrapS),W.texParameteri(it,ed,ye.wrapT),le.ext_texture_filter_anisotropic&&W.texParameteri(it,wh,ye.anisotropic),ye.genMipmaps&&(W.hint(Jv,ye.mipmapHint),W.generateMipmap(it))}var ii=0,di={},Jo=Oe.maxTextureUnits,mo=Array(Jo).map(function(){return null});function Yn(ye){Tt.call(this),this.mipmask=0,this.internalformat=zt,this.id=ii++,this.refCount=1,this.target=ye,this.texture=W.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new so,pt.profile&&(this.stats={size:0})}function pi(ye){W.activeTexture(Vl),W.bindTexture(ye.target,ye.texture)}function Mr(){var ye=mo[0];ye?W.bindTexture(ye.target,ye.texture):W.bindTexture(Ee,null)}function Dn(ye){var it=ye.texture;ie(it,"must not double destroy texture");var tt=ye.unit,un=ye.target;tt>=0&&(W.activeTexture(Vl+tt),W.bindTexture(un,null),mo[tt]=null),W.deleteTexture(it),ye.texture=null,ye.params=null,ye.pixels=null,ye.refCount=0,delete di[ye.id],et.textureCount--}a(Yn.prototype,{bind:function(){var ye=this;ye.bindCount+=1;var it=ye.unit;if(it<0){for(var tt=0;tt<Jo;++tt){var un=mo[tt];if(un){if(un.bindCount>0)continue;un.unit=-1}mo[tt]=ye,it=tt;break}it>=Jo&&ie.raise("insufficient number of texture units"),pt.profile&&et.maxTextureUnits<it+1&&(et.maxTextureUnits=it+1),ye.unit=it,W.activeTexture(Vl+it),W.bindTexture(ye.target,ye.texture)}return it},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Dn(this)}});function hr(ye,it){var tt=new Yn(Ee);di[tt.id]=tt,et.textureCount++;function un(re,Re){var We=tt.texInfo;so.call(We);var Qe=or();return typeof re=="number"?typeof Re=="number"?ir(Qe,re|0,Re|0):ir(Qe,re|0,re|0):re?(ie.type(re,"object","invalid arguments to regl.texture"),Io(We,re),_r(Qe,re)):ir(Qe,1,1),We.genMipmaps&&(Qe.mipmask=(Qe.width<<1)-1),tt.mipmask=Qe.mipmask,qt(tt,Qe),ie.texture2D(We,Qe,Oe),tt.internalformat=Qe.internalformat,un.width=Qe.width,un.height=Qe.height,pi(tt),jo(Qe,Ee),qo(We,Ee),Mr(),Zo(Qe),pt.profile&&(tt.stats.size=oi(tt.internalformat,tt.type,Qe.width,Qe.height,We.genMipmaps,!1)),un.format=It[tt.internalformat],un.type=Jt[tt.type],un.mag=At[We.magFilter],un.min=on[We.minFilter],un.wrapS=Mt[We.wrapS],un.wrapT=Mt[We.wrapT],un}function dr(re,Re,We,Qe){ie(!!re,"must specify image data");var De=Re|0,Ne=We|0,Le=Qe|0,pe=pn();return qt(pe,tt),pe.width=0,pe.height=0,kt(pe,re),pe.width=pe.width||(tt.width>>Le)-De,pe.height=pe.height||(tt.height>>Le)-Ne,ie(tt.type===pe.type&&tt.format===pe.format&&tt.internalformat===pe.internalformat,"incompatible format for texture.subimage"),ie(De>=0&&Ne>=0&&De+pe.width<=tt.width&&Ne+pe.height<=tt.height,"texture.subimage write out of bounds"),ie(tt.mipmask&1<<Le,"missing mipmap data"),ie(pe.data||pe.element||pe.needsCopy,"missing image data"),pi(tt),jn(pe,Ee,De,Ne,Le),Mr(),sr(pe),un}function he(re,Re){var We=re|0,Qe=Re|0||We;if(We===tt.width&&Qe===tt.height)return un;un.width=tt.width=We,un.height=tt.height=Qe,pi(tt);for(var De=0;tt.mipmask>>De;++De){var Ne=We>>De,Le=Qe>>De;if(!Ne||!Le)break;W.texImage2D(Ee,De,tt.format,Ne,Le,0,tt.format,tt.type,null)}return Mr(),pt.profile&&(tt.stats.size=oi(tt.internalformat,tt.type,We,Qe,!1,!1)),un}return un(ye,it),un.subimage=dr,un.resize=he,un._reglType="texture2d",un._texture=tt,pt.profile&&(un.stats=tt.stats),un.destroy=function(){tt.decRef()},un}function Kn(ye,it,tt,un,dr,he){var re=new Yn(Ye);di[re.id]=re,et.cubeCount++;var Re=new Array(6);function We(Ne,Le,pe,ke,de,Ge){var ze,p=re.texInfo;for(so.call(p),ze=0;ze<6;++ze)Re[ze]=or();if(typeof Ne=="number"||!Ne){var y=Ne|0||1;for(ze=0;ze<6;++ze)ir(Re[ze],y,y)}else if(typeof Ne=="object")if(Le)_r(Re[0],Ne),_r(Re[1],Le),_r(Re[2],pe),_r(Re[3],ke),_r(Re[4],de),_r(Re[5],Ge);else if(Io(p,Ne),Pn(re,Ne),"faces"in Ne){var O=Ne.faces;for(ie(Array.isArray(O)&&O.length===6,"cube faces must be a length 6 array"),ze=0;ze<6;++ze)ie(typeof O[ze]=="object"&&!!O[ze],"invalid input for cube map face"),qt(Re[ze],re),_r(Re[ze],O[ze])}else for(ze=0;ze<6;++ze)_r(Re[ze],Ne);else ie.raise("invalid arguments to cube map");for(qt(re,Re[0]),Oe.npotTextureCube||ie(z(re.width)&&z(re.height),"your browser does not support non power or two texture dimensions"),p.genMipmaps?re.mipmask=(Re[0].width<<1)-1:re.mipmask=Re[0].mipmask,ie.textureCube(re,p,Re,Oe),re.internalformat=Re[0].internalformat,We.width=Re[0].width,We.height=Re[0].height,pi(re),ze=0;ze<6;++ze)jo(Re[ze],gt+ze);for(qo(p,Ye),Mr(),pt.profile&&(re.stats.size=oi(re.internalformat,re.type,We.width,We.height,p.genMipmaps,!0)),We.format=It[re.internalformat],We.type=Jt[re.type],We.mag=At[p.magFilter],We.min=on[p.minFilter],We.wrapS=Mt[p.wrapS],We.wrapT=Mt[p.wrapT],ze=0;ze<6;++ze)Zo(Re[ze]);return We}function Qe(Ne,Le,pe,ke,de){ie(!!Le,"must specify image data"),ie(typeof Ne=="number"&&Ne===(Ne|0)&&Ne>=0&&Ne<6,"invalid face");var Ge=pe|0,ze=ke|0,p=de|0,y=pn();return qt(y,re),y.width=0,y.height=0,kt(y,Le),y.width=y.width||(re.width>>p)-Ge,y.height=y.height||(re.height>>p)-ze,ie(re.type===y.type&&re.format===y.format&&re.internalformat===y.internalformat,"incompatible format for texture.subimage"),ie(Ge>=0&&ze>=0&&Ge+y.width<=re.width&&ze+y.height<=re.height,"texture.subimage write out of bounds"),ie(re.mipmask&1<<p,"missing mipmap data"),ie(y.data||y.element||y.needsCopy,"missing image data"),pi(re),jn(y,gt+Ne,Ge,ze,p),Mr(),sr(y),We}function De(Ne){var Le=Ne|0;if(Le!==re.width){We.width=re.width=Le,We.height=re.height=Le,pi(re);for(var pe=0;pe<6;++pe)for(var ke=0;re.mipmask>>ke;++ke)W.texImage2D(gt+pe,ke,re.format,Le>>ke,Le>>ke,0,re.format,re.type,null);return Mr(),pt.profile&&(re.stats.size=oi(re.internalformat,re.type,We.width,We.height,!1,!0)),We}}return We(ye,it,tt,un,dr,he),We.subimage=Qe,We.resize=De,We._reglType="textureCube",We._texture=re,pt.profile&&(We.stats=re.stats),We.destroy=function(){re.decRef()},We}function yo(){for(var ye=0;ye<Jo;++ye)W.activeTexture(Vl+ye),W.bindTexture(Ee,null),mo[ye]=null;si(di).forEach(Dn),et.cubeCount=0,et.textureCount=0}pt.profile&&(et.getTotalTextureSize=function(){var ye=0;return Object.keys(di).forEach(function(it){ye+=di[it].stats.size}),ye});function Ml(){for(var ye=0;ye<Jo;++ye){var it=mo[ye];it&&(it.bindCount=0,it.unit=-1,mo[ye]=null)}si(di).forEach(function(tt){tt.texture=W.createTexture(),W.bindTexture(tt.target,tt.texture);for(var un=0;un<32;++un)if((tt.mipmask&1<<un)!==0)if(tt.target===Ee)W.texImage2D(Ee,un,tt.internalformat,tt.width>>un,tt.height>>un,0,tt.internalformat,tt.type,null);else for(var dr=0;dr<6;++dr)W.texImage2D(gt+dr,un,tt.internalformat,tt.width>>un,tt.height>>un,0,tt.internalformat,tt.type,null);qo(tt.texInfo,tt.target)})}function So(){for(var ye=0;ye<Jo;++ye){var it=mo[ye];it&&(it.bindCount=0,it.unit=-1,mo[ye]=null),W.activeTexture(Vl+ye),W.bindTexture(Ee,null),W.bindTexture(Ye,null)}}return{create2D:hr,createCube:Kn,clear:yo,getTexture:function(ye){return null},restore:Ml,refresh:So}}var fo=36161,Cn=32854,po=32855,Bc=36194,El=33189,id=36168,To=34041,Ro=35907,pp=34836,hp=34842,Wc=34843,Hi=[];Hi[Cn]=2,Hi[po]=2,Hi[Bc]=2,Hi[El]=2,Hi[id]=1,Hi[To]=4,Hi[Ro]=4,Hi[pp]=16,Hi[hp]=8,Hi[Wc]=6;function ad(W,le,Oe){return Hi[W]*le*Oe}var zu=function(W,le,Oe,rt,vt){var et={rgba4:Cn,rgb565:Bc,"rgb5 a1":po,depth:El,stencil:id,"depth stencil":To};le.ext_srgb&&(et.srgba=Ro),le.ext_color_buffer_half_float&&(et.rgba16f=hp,et.rgb16f=Wc),le.webgl_color_buffer_float&&(et.rgba32f=pp);var pt=[];Object.keys(et).forEach(function(Ct){var Ot=et[Ct];pt[Ot]=Ct});var Rt=0,$t={};function Nt(Ct){this.id=Rt++,this.refCount=1,this.renderbuffer=Ct,this.format=Cn,this.width=0,this.height=0,vt.profile&&(this.stats={size:0})}Nt.prototype.decRef=function(){--this.refCount<=0&&ft(this)};function ft(Ct){var Ot=Ct.renderbuffer;ie(Ot,"must not double destroy renderbuffer"),W.bindRenderbuffer(fo,null),W.deleteRenderbuffer(Ot),Ct.renderbuffer=null,Ct.refCount=0,delete $t[Ct.id],rt.renderbufferCount--}function Ht(Ct,Ot){var Ze=new Nt(W.createRenderbuffer());$t[Ze.id]=Ze,rt.renderbufferCount++;function ct(Jt,At){var on=0,Mt=0,Gt=Cn;if(typeof Jt=="object"&&Jt){var Tt=Jt;if("shape"in Tt){var qt=Tt.shape;ie(Array.isArray(qt)&&qt.length>=2,"invalid renderbuffer shape"),on=qt[0]|0,Mt=qt[1]|0}else"radius"in Tt&&(on=Mt=Tt.radius|0),"width"in Tt&&(on=Tt.width|0),"height"in Tt&&(Mt=Tt.height|0);"format"in Tt&&(ie.parameter(Tt.format,et,"invalid renderbuffer format"),Gt=et[Tt.format])}else typeof Jt=="number"?(on=Jt|0,typeof At=="number"?Mt=At|0:Mt=on):Jt?ie.raise("invalid arguments to renderbuffer constructor"):on=Mt=1;if(ie(on>0&&Mt>0&&on<=Oe.maxRenderbufferSize&&Mt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),!(on===Ze.width&&Mt===Ze.height&&Gt===Ze.format))return ct.width=Ze.width=on,ct.height=Ze.height=Mt,Ze.format=Gt,W.bindRenderbuffer(fo,Ze.renderbuffer),W.renderbufferStorage(fo,Gt,on,Mt),ie(W.getError()===0,"invalid render buffer format"),vt.profile&&(Ze.stats.size=ad(Ze.format,Ze.width,Ze.height)),ct.format=pt[Ze.format],ct}function It(Jt,At){var on=Jt|0,Mt=At|0||on;return on===Ze.width&&Mt===Ze.height||(ie(on>0&&Mt>0&&on<=Oe.maxRenderbufferSize&&Mt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),ct.width=Ze.width=on,ct.height=Ze.height=Mt,W.bindRenderbuffer(fo,Ze.renderbuffer),W.renderbufferStorage(fo,Ze.format,on,Mt),ie(W.getError()===0,"invalid render buffer format"),vt.profile&&(Ze.stats.size=ad(Ze.format,Ze.width,Ze.height))),ct}return ct(Ct,Ot),ct.resize=It,ct._reglType="renderbuffer",ct._renderbuffer=Ze,vt.profile&&(ct.stats=Ze.stats),ct.destroy=function(){Ze.decRef()},ct}vt.profile&&(rt.getTotalRenderbufferSize=function(){var Ct=0;return Object.keys($t).forEach(function(Ot){Ct+=$t[Ot].stats.size}),Ct});function Vt(){si($t).forEach(function(Ct){Ct.renderbuffer=W.createRenderbuffer(),W.bindRenderbuffer(fo,Ct.renderbuffer),W.renderbufferStorage(fo,Ct.format,Ct.width,Ct.height)}),W.bindRenderbuffer(fo,null)}return{create:Ht,clear:function(){si($t).forEach(ft)},restore:Vt}},$a=36160,ms=36161,zl=3553,Fa=34069,xh=36064,Ol=36096,Sa=36128,vp=33306,mp=36053,ld=36054,Ah=36055,Th=36057,Mh=36061,sd=36193,yp=5121,gp=5126,Gc=6407,Tr=6408,tm=6402,bp=[Gc,Tr],Ys=[];Ys[Tr]=4,Ys[Gc]=3;var zc=[];zc[yp]=1,zc[gp]=4,zc[sd]=2;var nm=32854,kh=32855,xa=36194,rm=33189,Hc=36168,ud=34041,_p=35907,Ph=34836,fa=34842,ys=34843,cd=[nm,kh,xa,_p,fa,ys,Ph],Ks={};Ks[mp]="complete",Ks[ld]="incomplete attachment",Ks[Th]="incomplete dimensions",Ks[Ah]="incomplete, missing attachment",Ks[Mh]="unsupported";function fd(W,le,Oe,rt,vt,et){var pt={cur:null,next:null,dirty:!1,setFBO:null},Rt=["rgba"],$t=["rgba4","rgb565","rgb5 a1"];le.ext_srgb&&$t.push("srgba"),le.ext_color_buffer_half_float&&$t.push("rgba16f","rgb16f"),le.webgl_color_buffer_float&&$t.push("rgba32f");var Nt=["uint8"];le.oes_texture_half_float&&Nt.push("half float","float16"),le.oes_texture_float&&Nt.push("float","float32");function ft(Dt,kt,xt){this.target=Dt,this.texture=kt,this.renderbuffer=xt;var jn=0,rr=0;kt?(jn=kt.width,rr=kt.height):xt&&(jn=xt.width,rr=xt.height),this.width=jn,this.height=rr}function Ht(Dt){Dt&&(Dt.texture&&Dt.texture._texture.decRef(),Dt.renderbuffer&&Dt.renderbuffer._renderbuffer.decRef())}function Vt(Dt,kt,xt){if(Dt)if(Dt.texture){var jn=Dt.texture._texture,rr=Math.max(1,jn.width),pn=Math.max(1,jn.height);ie(rr===kt&&pn===xt,"inconsistent width/height for supplied texture"),jn.refCount+=1}else{var sr=Dt.renderbuffer._renderbuffer;ie(sr.width===kt&&sr.height===xt,"inconsistent width/height for renderbuffer"),sr.refCount+=1}}function Ct(Dt,kt){kt&&(kt.texture?W.framebufferTexture2D($a,Dt,kt.target,kt.texture._texture.texture,0):W.framebufferRenderbuffer($a,Dt,ms,kt.renderbuffer._renderbuffer.renderbuffer))}function Ot(Dt){var kt=zl,xt=null,jn=null,rr=Dt;typeof Dt=="object"&&(rr=Dt.data,"target"in Dt&&(kt=Dt.target|0)),ie.type(rr,"function","invalid attachment data");var pn=rr._reglType;return pn==="texture2d"?(xt=rr,ie(kt===zl)):pn==="textureCube"?(xt=rr,ie(kt>=Fa&&kt<Fa+6,"invalid cube map target")):pn==="renderbuffer"?(jn=rr,kt=ms):ie.raise("invalid regl object for attachment"),new ft(kt,xt,jn)}function Ze(Dt,kt,xt,jn,rr){if(xt){var pn=rt.create2D({width:Dt,height:kt,format:jn,type:rr});return pn._texture.refCount=0,new ft(zl,pn,null)}else{var sr=vt.create({width:Dt,height:kt,format:jn});return sr._renderbuffer.refCount=0,new ft(ms,null,sr)}}function ct(Dt){return Dt&&(Dt.texture||Dt.renderbuffer)}function It(Dt,kt,xt){Dt&&(Dt.texture?Dt.texture.resize(kt,xt):Dt.renderbuffer&&Dt.renderbuffer.resize(kt,xt),Dt.width=kt,Dt.height=xt)}var Jt=0,At={};function on(){this.id=Jt++,At[this.id]=this,this.framebuffer=W.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Mt(Dt){Dt.colorAttachments.forEach(Ht),Ht(Dt.depthAttachment),Ht(Dt.stencilAttachment),Ht(Dt.depthStencilAttachment)}function Gt(Dt){var kt=Dt.framebuffer;ie(kt,"must not double destroy framebuffer"),W.deleteFramebuffer(kt),Dt.framebuffer=null,et.framebufferCount--,delete At[Dt.id]}function Tt(Dt){var kt;W.bindFramebuffer($a,Dt.framebuffer);var xt=Dt.colorAttachments;for(kt=0;kt<xt.length;++kt)Ct(xh+kt,xt[kt]);for(kt=xt.length;kt<Oe.maxColorAttachments;++kt)W.framebufferTexture2D($a,xh+kt,zl,null,0);W.framebufferTexture2D($a,vp,zl,null,0),W.framebufferTexture2D($a,Ol,zl,null,0),W.framebufferTexture2D($a,Sa,zl,null,0),Ct(Ol,Dt.depthAttachment),Ct(Sa,Dt.stencilAttachment),Ct(vp,Dt.depthStencilAttachment);var jn=W.checkFramebufferStatus($a);!W.isContextLost()&&jn!==mp&&ie.raise("framebuffer configuration not supported, status = "+Ks[jn]),W.bindFramebuffer($a,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,W.getError()}function qt(Dt,kt){var xt=new on;et.framebufferCount++;function jn(pn,sr){var Wn;ie(pt.next!==xt,"can not update framebuffer which is currently in use");var ir=0,_r=0,jo=!0,Po=!0,or=null,Zo=!0,so="rgba",Io="uint8",qo=1,ii=null,di=null,Jo=null,mo=!1;if(typeof pn=="number")ir=pn|0,_r=sr|0||ir;else if(!pn)ir=_r=1;else{ie.type(pn,"object","invalid arguments for framebuffer");var Yn=pn;if("shape"in Yn){var pi=Yn.shape;ie(Array.isArray(pi)&&pi.length>=2,"invalid shape for framebuffer"),ir=pi[0],_r=pi[1]}else"radius"in Yn&&(ir=_r=Yn.radius),"width"in Yn&&(ir=Yn.width),"height"in Yn&&(_r=Yn.height);("color"in Yn||"colors"in Yn)&&(or=Yn.color||Yn.colors,Array.isArray(or)&&ie(or.length===1||le.webgl_draw_buffers,"multiple render targets not supported")),or||("colorCount"in Yn&&(qo=Yn.colorCount|0,ie(qo>0,"invalid color buffer count")),"colorTexture"in Yn&&(Zo=!!Yn.colorTexture,so="rgba4"),"colorType"in Yn&&(Io=Yn.colorType,Zo?(ie(le.oes_texture_float||!(Io==="float"||Io==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ie(le.oes_texture_half_float||!(Io==="half float"||Io==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Io==="half float"||Io==="float16"?(ie(le.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),so="rgba16f"):(Io==="float"||Io==="float32")&&(ie(le.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),so="rgba32f"),ie.oneOf(Io,Nt,"invalid color type")),"colorFormat"in Yn&&(so=Yn.colorFormat,Rt.indexOf(so)>=0?Zo=!0:$t.indexOf(so)>=0?Zo=!1:Zo?ie.oneOf(Yn.colorFormat,Rt,"invalid color format for texture"):ie.oneOf(Yn.colorFormat,$t,"invalid color format for renderbuffer"))),("depthTexture"in Yn||"depthStencilTexture"in Yn)&&(mo=!!(Yn.depthTexture||Yn.depthStencilTexture),ie(!mo||le.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Yn&&(typeof Yn.depth=="boolean"?jo=Yn.depth:(ii=Yn.depth,Po=!1)),"stencil"in Yn&&(typeof Yn.stencil=="boolean"?Po=Yn.stencil:(di=Yn.stencil,jo=!1)),"depthStencil"in Yn&&(typeof Yn.depthStencil=="boolean"?jo=Po=Yn.depthStencil:(Jo=Yn.depthStencil,jo=!1,Po=!1))}var Mr=null,Dn=null,hr=null,Kn=null;if(Array.isArray(or))Mr=or.map(Ot);else if(or)Mr=[Ot(or)];else for(Mr=new Array(qo),Wn=0;Wn<qo;++Wn)Mr[Wn]=Ze(ir,_r,Zo,so,Io);ie(le.webgl_draw_buffers||Mr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ie(Mr.length<=Oe.maxColorAttachments,"too many color attachments, not supported"),ir=ir||Mr[0].width,_r=_r||Mr[0].height,ii?Dn=Ot(ii):jo&&!Po&&(Dn=Ze(ir,_r,mo,"depth","uint32")),di?hr=Ot(di):Po&&!jo&&(hr=Ze(ir,_r,!1,"stencil","uint8")),Jo?Kn=Ot(Jo):!ii&&!di&&Po&&jo&&(Kn=Ze(ir,_r,mo,"depth stencil","depth stencil")),ie(!!ii+!!di+!!Jo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var yo=null;for(Wn=0;Wn<Mr.length;++Wn)if(Vt(Mr[Wn],ir,_r),ie(!Mr[Wn]||Mr[Wn].texture&&bp.indexOf(Mr[Wn].texture._texture.format)>=0||Mr[Wn].renderbuffer&&cd.indexOf(Mr[Wn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Wn+" is invalid"),Mr[Wn]&&Mr[Wn].texture){var Ml=Ys[Mr[Wn].texture._texture.format]*zc[Mr[Wn].texture._texture.type];yo===null?yo=Ml:ie(yo===Ml,"all color attachments much have the same number of bits per pixel.")}return Vt(Dn,ir,_r),ie(!Dn||Dn.texture&&Dn.texture._texture.format===tm||Dn.renderbuffer&&Dn.renderbuffer._renderbuffer.format===rm,"invalid depth attachment for framebuffer object"),Vt(hr,ir,_r),ie(!hr||hr.renderbuffer&&hr.renderbuffer._renderbuffer.format===Hc,"invalid stencil attachment for framebuffer object"),Vt(Kn,ir,_r),ie(!Kn||Kn.texture&&Kn.texture._texture.format===ud||Kn.renderbuffer&&Kn.renderbuffer._renderbuffer.format===ud,"invalid depth-stencil attachment for framebuffer object"),Mt(xt),xt.width=ir,xt.height=_r,xt.colorAttachments=Mr,xt.depthAttachment=Dn,xt.stencilAttachment=hr,xt.depthStencilAttachment=Kn,jn.color=Mr.map(ct),jn.depth=ct(Dn),jn.stencil=ct(hr),jn.depthStencil=ct(Kn),jn.width=xt.width,jn.height=xt.height,Tt(xt),jn}function rr(pn,sr){ie(pt.next!==xt,"can not resize a framebuffer which is currently in use");var Wn=Math.max(pn|0,1),ir=Math.max(sr|0||Wn,1);if(Wn===xt.width&&ir===xt.height)return jn;for(var _r=xt.colorAttachments,jo=0;jo<_r.length;++jo)It(_r[jo],Wn,ir);return It(xt.depthAttachment,Wn,ir),It(xt.stencilAttachment,Wn,ir),It(xt.depthStencilAttachment,Wn,ir),xt.width=jn.width=Wn,xt.height=jn.height=ir,Tt(xt),jn}return jn(Dt,kt),a(jn,{resize:rr,_reglType:"framebuffer",_framebuffer:xt,destroy:function(){Gt(xt),Mt(xt)},use:function(pn){pt.setFBO({framebuffer:jn},pn)}})}function Pn(Dt){var kt=Array(6);function xt(rr){var pn;ie(kt.indexOf(pt.next)<0,"can not update framebuffer which is currently in use");var sr={color:null},Wn=0,ir=null,_r="rgba",jo="uint8",Po=1;if(typeof rr=="number")Wn=rr|0;else if(!rr)Wn=1;else{ie.type(rr,"object","invalid arguments for framebuffer");var or=rr;if("shape"in or){var Zo=or.shape;ie(Array.isArray(Zo)&&Zo.length>=2,"invalid shape for framebuffer"),ie(Zo[0]===Zo[1],"cube framebuffer must be square"),Wn=Zo[0]}else"radius"in or&&(Wn=or.radius|0),"width"in or?(Wn=or.width|0,"height"in or&&ie(or.height===Wn,"must be square")):"height"in or&&(Wn=or.height|0);("color"in or||"colors"in or)&&(ir=or.color||or.colors,Array.isArray(ir)&&ie(ir.length===1||le.webgl_draw_buffers,"multiple render targets not supported")),ir||("colorCount"in or&&(Po=or.colorCount|0,ie(Po>0,"invalid color buffer count")),"colorType"in or&&(ie.oneOf(or.colorType,Nt,"invalid color type"),jo=or.colorType),"colorFormat"in or&&(_r=or.colorFormat,ie.oneOf(or.colorFormat,Rt,"invalid color format for texture"))),"depth"in or&&(sr.depth=or.depth),"stencil"in or&&(sr.stencil=or.stencil),"depthStencil"in or&&(sr.depthStencil=or.depthStencil)}var so;if(ir)if(Array.isArray(ir))for(so=[],pn=0;pn<ir.length;++pn)so[pn]=ir[pn];else so=[ir];else{so=Array(Po);var Io={radius:Wn,format:_r,type:jo};for(pn=0;pn<Po;++pn)so[pn]=rt.createCube(Io)}for(sr.color=Array(so.length),pn=0;pn<so.length;++pn){var qo=so[pn];ie(typeof qo=="function"&&qo._reglType==="textureCube","invalid cube map"),Wn=Wn||qo.width,ie(qo.width===Wn&&qo.height===Wn,"invalid cube map shape"),sr.color[pn]={target:Fa,data:so[pn]}}for(pn=0;pn<6;++pn){for(var ii=0;ii<so.length;++ii)sr.color[ii].target=Fa+pn;pn>0&&(sr.depth=kt[0].depth,sr.stencil=kt[0].stencil,sr.depthStencil=kt[0].depthStencil),kt[pn]?kt[pn](sr):kt[pn]=qt(sr)}return a(xt,{width:Wn,height:Wn,color:so})}function jn(rr){var pn,sr=rr|0;if(ie(sr>0&&sr<=Oe.maxCubeMapSize,"invalid radius for cube fbo"),sr===xt.width)return xt;var Wn=xt.color;for(pn=0;pn<Wn.length;++pn)Wn[pn].resize(sr);for(pn=0;pn<6;++pn)kt[pn].resize(sr);return xt.width=xt.height=sr,xt}return xt(Dt),a(xt,{faces:kt,resize:jn,_reglType:"framebufferCube",destroy:function(){kt.forEach(function(rr){rr.destroy()})}})}function Bn(){pt.cur=null,pt.next=null,pt.dirty=!0,si(At).forEach(function(Dt){Dt.framebuffer=W.createFramebuffer(),Tt(Dt)})}return a(pt,{getFramebuffer:function(Dt){if(typeof Dt=="function"&&Dt._reglType==="framebuffer"){var kt=Dt._framebuffer;if(kt instanceof on)return kt}return null},create:qt,createCube:Pn,clear:function(){si(At).forEach(Gt)},restore:Bn})}var wp=5126,dd=34962;function Xc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=wp,this.offset=0,this.stride=0,this.divisor=0}function pd(W,le,Oe,rt,vt){for(var et=Oe.maxAttributes,pt=new Array(et),Rt=0;Rt<et;++Rt)pt[Rt]=new Xc;var $t=0,Nt={},ft={Record:Xc,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Vt()?At:function(){},createVAO:on,getVAO:Ot,destroyBuffer:Ht,setVAO:Vt()?Ze:ct,clear:Vt()?It:function(){}};function Ht(Mt){for(var Gt=0;Gt<pt.length;++Gt){var Tt=pt[Gt];Tt.buffer===Mt&&(W.disableVertexAttribArray(Gt),Tt.buffer=null)}}function Vt(){return le.oes_vertex_array_object}function Ct(){return le.angle_instanced_arrays}function Ot(Mt){return typeof Mt=="function"&&Mt._vao?Mt._vao:null}function Ze(Mt){if(Mt!==ft.currentVAO){var Gt=Vt();Mt?Gt.bindVertexArrayOES(Mt.vao):Gt.bindVertexArrayOES(null),ft.currentVAO=Mt}}function ct(Mt){if(Mt!==ft.currentVAO){if(Mt)Mt.bindAttrs();else for(var Gt=Ct(),Tt=0;Tt<pt.length;++Tt){var qt=pt[Tt];qt.buffer?(W.enableVertexAttribArray(Tt),W.vertexAttribPointer(Tt,qt.size,qt.type,qt.normalized,qt.stride,qt.offfset),Gt&&qt.divisor&&Gt.vertexAttribDivisorANGLE(Tt,qt.divisor)):(W.disableVertexAttribArray(Tt),W.vertexAttrib4f(Tt,qt.x,qt.y,qt.z,qt.w))}ft.currentVAO=Mt}}function It(){si(Nt).forEach(function(Mt){Mt.destroy()})}function Jt(){this.id=++$t,this.attributes=[];var Mt=Vt();Mt?this.vao=Mt.createVertexArrayOES():this.vao=null,Nt[this.id]=this,this.buffers=[]}Jt.prototype.bindAttrs=function(){for(var Mt=Ct(),Gt=this.attributes,Tt=0;Tt<Gt.length;++Tt){var qt=Gt[Tt];qt.buffer?(W.enableVertexAttribArray(Tt),W.bindBuffer(dd,qt.buffer.buffer),W.vertexAttribPointer(Tt,qt.size,qt.type,qt.normalized,qt.stride,qt.offset),Mt&&qt.divisor&&Mt.vertexAttribDivisorANGLE(Tt,qt.divisor)):(W.disableVertexAttribArray(Tt),W.vertexAttrib4f(Tt,qt.x,qt.y,qt.z,qt.w))}for(var Pn=Gt.length;Pn<et;++Pn)W.disableVertexAttribArray(Pn)},Jt.prototype.refresh=function(){var Mt=Vt();Mt&&(Mt.bindVertexArrayOES(this.vao),this.bindAttrs(),ft.currentVAO=this)},Jt.prototype.destroy=function(){if(this.vao){var Mt=Vt();this===ft.currentVAO&&(ft.currentVAO=null,Mt.bindVertexArrayOES(null)),Mt.deleteVertexArrayOES(this.vao),this.vao=null}Nt[this.id]&&(delete Nt[this.id],rt.vaoCount-=1)};function At(){var Mt=Vt();Mt&&si(Nt).forEach(function(Gt){Gt.refresh()})}function on(Mt){var Gt=new Jt;rt.vaoCount+=1;function Tt(qt){ie(Array.isArray(qt),"arguments to vertex array constructor must be an array"),ie(qt.length<et,"too many attributes"),ie(qt.length>0,"must specify at least one attribute");var Pn={},Bn=Gt.attributes;Bn.length=qt.length;for(var Dt=0;Dt<qt.length;++Dt){var kt=qt[Dt],xt=Bn[Dt]=new Xc,jn=kt.data||kt;if(Array.isArray(jn)||n(jn)||Fi(jn)){var rr;Gt.buffers[Dt]&&(rr=Gt.buffers[Dt],n(jn)&&rr._buffer.byteLength>=jn.byteLength?rr.subdata(jn):(rr.destroy(),Gt.buffers[Dt]=null)),Gt.buffers[Dt]||(rr=Gt.buffers[Dt]=vt.create(kt,dd,!1,!0)),xt.buffer=vt.getBuffer(rr),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1,Pn[Dt]=1}else vt.getBuffer(kt)?(xt.buffer=vt.getBuffer(kt),xt.size=xt.buffer.dimension|0,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1):vt.getBuffer(kt.buffer)?(xt.buffer=vt.getBuffer(kt.buffer),xt.size=(+kt.size||xt.buffer.dimension)|0,xt.normalized=!!kt.normalized||!1,"type"in kt?(ie.parameter(kt.type,Bi,"invalid buffer type"),xt.type=Bi[kt.type]):xt.type=xt.buffer.dtype,xt.offset=(kt.offset||0)|0,xt.stride=(kt.stride||0)|0,xt.divisor=(kt.divisor||0)|0,xt.state=1,ie(xt.size>=1&&xt.size<=4,"size must be between 1 and 4"),ie(xt.offset>=0,"invalid offset"),ie(xt.stride>=0&&xt.stride<=255,"stride must be between 0 and 255"),ie(xt.divisor>=0,"divisor must be positive"),ie(!xt.divisor||!!le.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in kt?(ie(Dt>0,"first attribute must not be a constant"),xt.x=+kt.x||0,xt.y=+kt.y||0,xt.z=+kt.z||0,xt.w=+kt.w||0,xt.state=2):ie(!1,"invalid attribute spec for location "+Dt)}for(var pn=0;pn<Gt.buffers.length;++pn)!Pn[pn]&&Gt.buffers[pn]&&(Gt.buffers[pn].destroy(),Gt.buffers[pn]=null);return Gt.refresh(),Tt}return Tt.destroy=function(){for(var qt=0;qt<Gt.buffers.length;++qt)Gt.buffers[qt]&&Gt.buffers[qt].destroy();Gt.buffers.length=0,Gt.destroy()},Tt._vao=Gt,Tt._reglType="vao",Tt(Mt)}return ft}var hd=35632,Xr=35633,om=35718,no=35721;function vd(W,le,Oe,rt){var vt={},et={};function pt(Ze,ct,It,Jt){this.name=Ze,this.id=ct,this.location=It,this.info=Jt}function Rt(Ze,ct){for(var It=0;It<Ze.length;++It)if(Ze[It].id===ct.id){Ze[It].location=ct.location;return}Ze.push(ct)}function $t(Ze,ct,It){var Jt=Ze===hd?vt:et,At=Jt[ct];if(!At){var on=le.str(ct);At=W.createShader(Ze),W.shaderSource(At,on),W.compileShader(At),ie.shaderError(W,At,on,Ze,It),Jt[ct]=At}return At}var Nt={},ft=[],Ht=0;function Vt(Ze,ct){this.id=Ht++,this.fragId=Ze,this.vertId=ct,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ct(Ze,ct,It){var Jt,At,on=$t(hd,Ze.fragId),Mt=$t(Xr,Ze.vertId),Gt=Ze.program=W.createProgram();if(W.attachShader(Gt,on),W.attachShader(Gt,Mt),It)for(Jt=0;Jt<It.length;++Jt){var Tt=It[Jt];W.bindAttribLocation(Gt,Tt[0],Tt[1])}W.linkProgram(Gt),ie.linkError(W,Gt,le.str(Ze.fragId),le.str(Ze.vertId),ct);var qt=W.getProgramParameter(Gt,om);rt.profile&&(Ze.stats.uniformsCount=qt);var Pn=Ze.uniforms;for(Jt=0;Jt<qt;++Jt)if(At=W.getActiveUniform(Gt,Jt),At)if(At.size>1)for(var Bn=0;Bn<At.size;++Bn){var Dt=At.name.replace("[0]","["+Bn+"]");Rt(Pn,new pt(Dt,le.id(Dt),W.getUniformLocation(Gt,Dt),At))}else Rt(Pn,new pt(At.name,le.id(At.name),W.getUniformLocation(Gt,At.name),At));var kt=W.getProgramParameter(Gt,no);rt.profile&&(Ze.stats.attributesCount=kt);var xt=Ze.attributes;for(Jt=0;Jt<kt;++Jt)At=W.getActiveAttrib(Gt,Jt),At&&Rt(xt,new pt(At.name,le.id(At.name),W.getAttribLocation(Gt,At.name),At))}rt.profile&&(Oe.getMaxUniformsCount=function(){var Ze=0;return ft.forEach(function(ct){ct.stats.uniformsCount>Ze&&(Ze=ct.stats.uniformsCount)}),Ze},Oe.getMaxAttributesCount=function(){var Ze=0;return ft.forEach(function(ct){ct.stats.attributesCount>Ze&&(Ze=ct.stats.attributesCount)}),Ze});function Ot(){vt={},et={};for(var Ze=0;Ze<ft.length;++Ze)Ct(ft[Ze],null,ft[Ze].attributes.map(function(ct){return[ct.location,ct.name]}))}return{clear:function(){var Ze=W.deleteShader.bind(W);si(vt).forEach(Ze),vt={},si(et).forEach(Ze),et={},ft.forEach(function(ct){W.deleteProgram(ct.program)}),ft.length=0,Nt={},Oe.shaderCount=0},program:function(Ze,ct,It,Jt){ie.command(Ze>=0,"missing vertex shader",It),ie.command(ct>=0,"missing fragment shader",It);var At=Nt[ct];At||(At=Nt[ct]={});var on=At[Ze];if(on&&(on.refCount++,!Jt))return on;var Mt=new Vt(ct,Ze);return Oe.shaderCount++,Ct(Mt,It,Jt),on||(At[Ze]=Mt),ft.push(Mt),a(Mt,{destroy:function(){if(Mt.refCount--,Mt.refCount<=0){W.deleteProgram(Mt.program);var Gt=ft.indexOf(Mt);ft.splice(Gt,1),Oe.shaderCount--}At[Mt.vertId].refCount<=0&&(W.deleteShader(et[Mt.vertId]),delete et[Mt.vertId],delete Nt[Mt.fragId][Mt.vertId]),Object.keys(Nt[Mt.fragId]).length||(W.deleteShader(vt[Mt.fragId]),delete vt[Mt.fragId],delete Nt[Mt.fragId])}})},restore:Ot,shader:$t,frag:-1,vert:-1}}var Rh=6408,Zs=5121,Nh=3333,Hu=5126;function Ch(W,le,Oe,rt,vt,et,pt){function Rt(ft){var Ht;le.next===null?(ie(vt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ht=Zs):(ie(le.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ht=le.next.colorAttachments[0].texture._texture.type,et.oes_texture_float?(ie(Ht===Zs||Ht===Hu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ht===Hu&&ie(pt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ie(Ht===Zs,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Vt=0,Ct=0,Ot=rt.framebufferWidth,Ze=rt.framebufferHeight,ct=null;n(ft)?ct=ft:ft&&(ie.type(ft,"object","invalid arguments to regl.read()"),Vt=ft.x|0,Ct=ft.y|0,ie(Vt>=0&&Vt<rt.framebufferWidth,"invalid x offset for regl.read"),ie(Ct>=0&&Ct<rt.framebufferHeight,"invalid y offset for regl.read"),Ot=(ft.width||rt.framebufferWidth-Vt)|0,Ze=(ft.height||rt.framebufferHeight-Ct)|0,ct=ft.data||null),ct&&(Ht===Zs?ie(ct instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ht===Hu&&ie(ct instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ie(Ot>0&&Ot+Vt<=rt.framebufferWidth,"invalid width for read pixels"),ie(Ze>0&&Ze+Ct<=rt.framebufferHeight,"invalid height for read pixels"),Oe();var It=Ot*Ze*4;return ct||(Ht===Zs?ct=new Uint8Array(It):Ht===Hu&&(ct=ct||new Float32Array(It))),ie.isTypedArray(ct,"data buffer for regl.read() must be a typedarray"),ie(ct.byteLength>=It,"data buffer for regl.read() too small"),W.pixelStorei(Nh,4),W.readPixels(Vt,Ct,Ot,Ze,Rh,Ht,ct),ct}function $t(ft){var Ht;return le.setFBO({framebuffer:ft.framebuffer},function(){Ht=Rt(ft)}),Ht}function Nt(ft){return!ft||!("framebuffer"in ft)?Rt(ft):$t(ft)}return Nt}function Js(W){return Array.prototype.slice.call(W)}function gi(W){return Js(W).join("")}function nl(){var W=0,le=[],Oe=[];function rt(Ht){for(var Vt=0;Vt<Oe.length;++Vt)if(Oe[Vt]===Ht)return le[Vt];var Ct="g"+W++;return le.push(Ct),Oe.push(Ht),Ct}function vt(){var Ht=[];function Vt(){Ht.push.apply(Ht,Js(arguments))}var Ct=[];function Ot(){var Ze="v"+W++;return Ct.push(Ze),arguments.length>0&&(Ht.push(Ze,"="),Ht.push.apply(Ht,Js(arguments)),Ht.push(";")),Ze}return a(Vt,{def:Ot,toString:function(){return gi([Ct.length>0?"var "+Ct.join(",")+";":"",gi(Ht)])}})}function et(){var Ht=vt(),Vt=vt(),Ct=Ht.toString,Ot=Vt.toString;function Ze(ct,It){Vt(ct,It,"=",Ht.def(ct,It),";")}return a(function(){Ht.apply(Ht,Js(arguments))},{def:Ht.def,entry:Ht,exit:Vt,save:Ze,set:function(ct,It,Jt){Ze(ct,It),Ht(ct,It,"=",Jt,";")},toString:function(){return Ct()+Ot()}})}function pt(){var Ht=gi(arguments),Vt=et(),Ct=et(),Ot=Vt.toString,Ze=Ct.toString;return a(Vt,{then:function(){return Vt.apply(Vt,Js(arguments)),this},else:function(){return Ct.apply(Ct,Js(arguments)),this},toString:function(){var ct=Ze();return ct&&(ct="else{"+ct+"}"),gi(["if(",Ht,"){",Ot(),"}",ct])}})}var Rt=vt(),$t={};function Nt(Ht,Vt){var Ct=[];function Ot(){var At="a"+Ct.length;return Ct.push(At),At}Vt=Vt||0;for(var Ze=0;Ze<Vt;++Ze)Ot();var ct=et(),It=ct.toString,Jt=$t[Ht]=a(ct,{arg:Ot,toString:function(){return gi(["function(",Ct.join(),"){",It(),"}"])}});return Jt}function ft(){var Ht=['"use strict";',Rt,"return {"];Object.keys($t).forEach(function(Ot){Ht.push('"',Ot,'":',$t[Ot].toString(),",")}),Ht.push("}");var Vt=gi(Ht).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ct=Function.apply(null,le.concat(Vt));return Ct.apply(null,Oe)}return{global:Rt,link:rt,block:vt,proc:Nt,scope:et,cond:pt,compile:ft}}var Hl="xyzw".split(""),Qs=5121,eu=1,tu=2,md=0,Xl=1,nu=2,yd=3,rl=4,qc=5,Yc=6,Xu="dither",qu="blend.enable",Yu="blend.color",gd="blend.equation",Ku="blend.func",Ep="depth.enable",bd="depth.func",Dh="depth.range",Op="depth.mask",ol="colorMask",Sp="cull.enable",xp="cull.face",Ap="frontFace",Zu="lineWidth",Sl="polygonOffset.enable",Kc="polygonOffset.offset",_d="sample.alpha",wd="sample.enable",gs="sample.coverage",bs="stencil.enable",nr="stencil.mask",Ju="stencil.func",Zc="stencil.opFront",il="stencil.opBack",fi="scissor.enable",ru="scissor.box",No="viewport",_s="profile",ra="framebuffer",Jc="vert",$i="frag",Ho="elements",xl="primitive",Al="count",Ed="offset",Pt="instances",ou="vao",Qc="Width",ef="Height",ws=ra+Qc,iu=ra+ef,Od=No+Qc,Tp=No+ef,au="drawingBuffer",tf=au+Qc,Sd=au+ef,Mp=[Ku,gd,Ju,Zc,il,gs,No,ru,Kc],Tl=34962,kp=34963,al=35632,Es=35633,xd=3553,jh=34067,Ih=2884,Lh=3042,Pp=3024,Ad=2960,nf=2929,$h=3089,ll=32823,Os=32926,im=32928,Oo=5126,rf=35664,lu=35665,of=35666,Qu=5124,af=35667,lf=35668,sf=35669,su=35670,ql=35671,bi=35672,Td=35673,uf=35674,uu=35675,ec=35676,Ti=35678,Mo=35680,cf=4,Xi=1028,Un=1029,Md=2304,ff=2305,kd=32775,Rp=32776,Fh=519,Ss=7680,Uh=0,cu=1,Vh=32774,Np=513,df=36160,Bh=36064,Ua={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Cp={frag:al,vert:Es},tc={cw:Md,ccw:ff};function Kl(W){return Array.isArray(W)||n(W)||Fi(W)}function pf(W){return W.sort(function(le,Oe){return le===No?-1:Oe===No?1:le<Oe?-1:1})}function qi(W,le,Oe,rt){this.thisDep=W,this.contextDep=le,this.propDep=Oe,this.append=rt}function sl(W){return W&&!(W.thisDep||W.contextDep||W.propDep)}function Co(W){return new qi(!1,!1,!1,W)}function da(W,le){var Oe=W.type;if(Oe===md){var rt=W.data.length;return new qi(!0,rt>=1,rt>=2,le)}else if(Oe===rl){var vt=W.data;return new qi(vt.thisDep,vt.contextDep,vt.propDep,le)}else{if(Oe===qc)return new qi(!1,!1,!1,le);if(Oe===Yc){for(var et=!1,pt=!1,Rt=!1,$t=0;$t<W.data.length;++$t){var Nt=W.data[$t];if(Nt.type===Xl)Rt=!0;else if(Nt.type===nu)pt=!0;else if(Nt.type===yd)et=!0;else if(Nt.type===md){et=!0;var ft=Nt.data;ft>=1&&(pt=!0),ft>=2&&(Rt=!0)}else Nt.type===rl&&(et=et||Nt.data.thisDep,pt=pt||Nt.data.contextDep,Rt=Rt||Nt.data.propDep)}return new qi(et,pt,Rt,le)}else return new qi(Oe===yd,Oe===nu,Oe===Xl,le)}}var Va=new qi(!1,!1,!1,function(){});function am(W,le,Oe,rt,vt,et,pt,Rt,$t,Nt,ft,Ht,Vt,Ct,Ot){var Ze=Nt.Record,ct={add:32774,subtract:32778,"reverse subtract":32779};Oe.ext_blend_minmax&&(ct.min=kd,ct.max=Rp);var It=Oe.angle_instanced_arrays,Jt=Oe.webgl_draw_buffers,At={dirty:!0,profile:Ot.profile},on={},Mt=[],Gt={},Tt={};function qt(he){return he.replace(".","_")}function Pn(he,re,Re){var We=qt(he);Mt.push(he),on[We]=At[We]=!!Re,Gt[We]=re}function Bn(he,re,Re){var We=qt(he);Mt.push(he),Array.isArray(Re)?(At[We]=Re.slice(),on[We]=Re.slice()):At[We]=on[We]=Re,Tt[We]=re}Pn(Xu,Pp),Pn(qu,Lh),Bn(Yu,"blendColor",[0,0,0,0]),Bn(gd,"blendEquationSeparate",[Vh,Vh]),Bn(Ku,"blendFuncSeparate",[cu,Uh,cu,Uh]),Pn(Ep,nf,!0),Bn(bd,"depthFunc",Np),Bn(Dh,"depthRange",[0,1]),Bn(Op,"depthMask",!0),Bn(ol,ol,[!0,!0,!0,!0]),Pn(Sp,Ih),Bn(xp,"cullFace",Un),Bn(Ap,Ap,ff),Bn(Zu,Zu,1),Pn(Sl,ll),Bn(Kc,"polygonOffset",[0,0]),Pn(_d,Os),Pn(wd,im),Bn(gs,"sampleCoverage",[1,!1]),Pn(bs,Ad),Bn(nr,"stencilMask",-1),Bn(Ju,"stencilFunc",[Fh,0,-1]),Bn(Zc,"stencilOpSeparate",[Xi,Ss,Ss,Ss]),Bn(il,"stencilOpSeparate",[Un,Ss,Ss,Ss]),Pn(fi,$h),Bn(ru,"scissor",[0,0,W.drawingBufferWidth,W.drawingBufferHeight]),Bn(No,No,[0,0,W.drawingBufferWidth,W.drawingBufferHeight]);var Dt={gl:W,context:Vt,strings:le,next:on,current:At,draw:Ht,elements:et,buffer:vt,shader:ft,attributes:Nt.state,vao:Nt,uniforms:$t,framebuffer:Rt,extensions:Oe,timer:Ct,isBufferArgs:Kl},kt={primTypes:ni,compareFuncs:xs,blendFuncs:Ua,blendEquations:ct,stencilOps:Vn,glTypes:Bi,orientationType:tc};ie.optional(function(){Dt.isArrayLike=R}),Jt&&(kt.backBuffer=[Un],kt.drawBuffer=jr(rt.maxDrawbuffers,function(he){return he===0?[0]:jr(he,function(re){return Bh+re})}));var xt=0;function jn(){var he=nl(),re=he.link,Re=he.global;he.id=xt++,he.batchId="0";var We=re(Dt),Qe=he.shared={props:"a0"};Object.keys(Dt).forEach(function(ke){Qe[ke]=Re.def(We,".",ke)}),ie.optional(function(){he.CHECK=re(ie),he.commandStr=ie.guessCommand(),he.command=re(he.commandStr),he.assert=function(ke,de,Ge){ke("if(!(",de,"))",this.CHECK,".commandRaise(",re(Ge),",",this.command,");")},kt.invalidBlendCombinations=Yl});var De=he.next={},Ne=he.current={};Object.keys(Tt).forEach(function(ke){Array.isArray(At[ke])&&(De[ke]=Re.def(Qe.next,".",ke),Ne[ke]=Re.def(Qe.current,".",ke))});var Le=he.constants={};Object.keys(kt).forEach(function(ke){Le[ke]=Re.def(JSON.stringify(kt[ke]))}),he.invoke=function(ke,de){switch(de.type){case md:var Ge=["this",Qe.context,Qe.props,he.batchId];return ke.def(re(de.data),".call(",Ge.slice(0,Math.max(de.data.length+1,4)),")");case Xl:return ke.def(Qe.props,de.data);case nu:return ke.def(Qe.context,de.data);case yd:return ke.def("this",de.data);case rl:return de.data.append(he,ke),de.data.ref;case qc:return de.data.toString();case Yc:return de.data.map(function(ze){return he.invoke(ke,ze)})}},he.attribCache={};var pe={};return he.scopeAttrib=function(ke){var de=le.id(ke);if(de in pe)return pe[de];var Ge=Nt.scope[de];Ge||(Ge=Nt.scope[de]=new Ze);var ze=pe[de]=re(Ge);return ze},he}function rr(he){var re=he.static,Re=he.dynamic,We;if(_s in re){var Qe=!!re[_s];We=Co(function(Ne,Le){return Qe}),We.enable=Qe}else if(_s in Re){var De=Re[_s];We=da(De,function(Ne,Le){return Ne.invoke(Le,De)})}return We}function pn(he,re){var Re=he.static,We=he.dynamic;if(ra in Re){var Qe=Re[ra];return Qe?(Qe=Rt.getFramebuffer(Qe),ie.command(Qe,"invalid framebuffer object"),Co(function(Ne,Le){var pe=Ne.link(Qe),ke=Ne.shared;Le.set(ke.framebuffer,".next",pe);var de=ke.context;return Le.set(de,"."+ws,pe+".width"),Le.set(de,"."+iu,pe+".height"),pe})):Co(function(Ne,Le){var pe=Ne.shared;Le.set(pe.framebuffer,".next","null");var ke=pe.context;return Le.set(ke,"."+ws,ke+"."+tf),Le.set(ke,"."+iu,ke+"."+Sd),"null"})}else if(ra in We){var De=We[ra];return da(De,function(Ne,Le){var pe=Ne.invoke(Le,De),ke=Ne.shared,de=ke.framebuffer,Ge=Le.def(de,".getFramebuffer(",pe,")");ie.optional(function(){Ne.assert(Le,"!"+pe+"||"+Ge,"invalid framebuffer object")}),Le.set(de,".next",Ge);var ze=ke.context;return Le.set(ze,"."+ws,Ge+"?"+Ge+".width:"+ze+"."+tf),Le.set(ze,"."+iu,Ge+"?"+Ge+".height:"+ze+"."+Sd),Ge})}else return null}function sr(he,re,Re){var We=he.static,Qe=he.dynamic;function De(pe){if(pe in We){var ke=We[pe];ie.commandType(ke,"object","invalid "+pe,Re.commandStr);var de=!0,Ge=ke.x|0,ze=ke.y|0,p,y;return"width"in ke?(p=ke.width|0,ie.command(p>=0,"invalid "+pe,Re.commandStr)):de=!1,"height"in ke?(y=ke.height|0,ie.command(y>=0,"invalid "+pe,Re.commandStr)):de=!1,new qi(!de&&re&&re.thisDep,!de&&re&&re.contextDep,!de&&re&&re.propDep,function(Y,ne){var ve=Y.shared.context,Ae=p;"width"in ke||(Ae=ne.def(ve,".",ws,"-",Ge));var Fe=y;return"height"in ke||(Fe=ne.def(ve,".",iu,"-",ze)),[Ge,ze,Ae,Fe]})}else if(pe in Qe){var O=Qe[pe],I=da(O,function(Y,ne){var ve=Y.invoke(ne,O);ie.optional(function(){Y.assert(ne,ve+"&&typeof "+ve+'==="object"',"invalid "+pe)});var Ae=Y.shared.context,Fe=ne.def(ve,".x|0"),mt=ne.def(ve,".y|0"),Et=ne.def('"width" in ',ve,"?",ve,".width|0:","(",Ae,".",ws,"-",Fe,")"),Wt=ne.def('"height" in ',ve,"?",ve,".height|0:","(",Ae,".",iu,"-",mt,")");return ie.optional(function(){Y.assert(ne,Et+">=0&&"+Wt+">=0","invalid "+pe)}),[Fe,mt,Et,Wt]});return re&&(I.thisDep=I.thisDep||re.thisDep,I.contextDep=I.contextDep||re.contextDep,I.propDep=I.propDep||re.propDep),I}else return re?new qi(re.thisDep,re.contextDep,re.propDep,function(Y,ne){var ve=Y.shared.context;return[0,0,ne.def(ve,".",ws),ne.def(ve,".",iu)]}):null}var Ne=De(No);if(Ne){var Le=Ne;Ne=new qi(Ne.thisDep,Ne.contextDep,Ne.propDep,function(pe,ke){var de=Le.append(pe,ke),Ge=pe.shared.context;return ke.set(Ge,"."+Od,de[2]),ke.set(Ge,"."+Tp,de[3]),de})}return{viewport:Ne,scissor_box:De(ru)}}function Wn(he,re){var Re=he.static,We=typeof Re[$i]=="string"&&typeof Re[Jc]=="string";if(We){if(Object.keys(re.dynamic).length>0)return null;var Qe=re.static,De=Object.keys(Qe);if(De.length>0&&typeof Qe[De[0]]=="number"){for(var Ne=[],Le=0;Le<De.length;++Le)ie(typeof Qe[De[Le]]=="number","must specify all vertex attribute locations when using vaos"),Ne.push([Qe[De[Le]]|0,De[Le]]);return Ne}}return null}function ir(he,re,Re){var We=he.static,Qe=he.dynamic;function De(de){if(de in We){var Ge=le.id(We[de]);ie.optional(function(){ft.shader(Cp[de],Ge,ie.guessCommand())});var ze=Co(function(){return Ge});return ze.id=Ge,ze}else if(de in Qe){var p=Qe[de];return da(p,function(y,O){var I=y.invoke(O,p),Y=O.def(y.shared.strings,".id(",I,")");return ie.optional(function(){O(y.shared.shader,".shader(",Cp[de],",",Y,",",y.command,");")}),Y})}return null}var Ne=De($i),Le=De(Jc),pe=null,ke;return sl(Ne)&&sl(Le)?(pe=ft.program(Le.id,Ne.id,null,Re),ke=Co(function(de,Ge){return de.link(pe)})):ke=new qi(Ne&&Ne.thisDep||Le&&Le.thisDep,Ne&&Ne.contextDep||Le&&Le.contextDep,Ne&&Ne.propDep||Le&&Le.propDep,function(de,Ge){var ze=de.shared.shader,p;Ne?p=Ne.append(de,Ge):p=Ge.def(ze,".",$i);var y;Le?y=Le.append(de,Ge):y=Ge.def(ze,".",Jc);var O=ze+".program("+y+","+p;return ie.optional(function(){O+=","+de.command}),Ge.def(O+")")}),{frag:Ne,vert:Le,progVar:ke,program:pe}}function _r(he,re){var Re=he.static,We=he.dynamic;function Qe(){if(Ho in Re){var de=Re[Ho];Kl(de)?de=et.getElements(et.create(de,!0)):de&&(de=et.getElements(de),ie.command(de,"invalid elements",re.commandStr));var Ge=Co(function(p,y){if(de){var O=p.link(de);return p.ELEMENTS=O,O}return p.ELEMENTS=null,null});return Ge.value=de,Ge}else if(Ho in We){var ze=We[Ho];return da(ze,function(p,y){var O=p.shared,I=O.isBufferArgs,Y=O.elements,ne=p.invoke(y,ze),ve=y.def("null"),Ae=y.def(I,"(",ne,")"),Fe=p.cond(Ae).then(ve,"=",Y,".createStream(",ne,");").else(ve,"=",Y,".getElements(",ne,");");return ie.optional(function(){p.assert(Fe.else,"!"+ne+"||"+ve,"invalid elements")}),y.entry(Fe),y.exit(p.cond(Ae).then(Y,".destroyStream(",ve,");")),p.ELEMENTS=ve,ve})}return null}var De=Qe();function Ne(){if(xl in Re){var de=Re[xl];return ie.commandParameter(de,ni,"invalid primitve",re.commandStr),Co(function(ze,p){return ni[de]})}else if(xl in We){var Ge=We[xl];return da(Ge,function(ze,p){var y=ze.constants.primTypes,O=ze.invoke(p,Ge);return ie.optional(function(){ze.assert(p,O+" in "+y,"invalid primitive, must be one of "+Object.keys(ni))}),p.def(y,"[",O,"]")})}else if(De)return sl(De)?De.value?Co(function(ze,p){return p.def(ze.ELEMENTS,".primType")}):Co(function(){return cf}):new qi(De.thisDep,De.contextDep,De.propDep,function(ze,p){var y=ze.ELEMENTS;return p.def(y,"?",y,".primType:",cf)});return null}function Le(de,Ge){if(de in Re){var ze=Re[de]|0;return ie.command(!Ge||ze>=0,"invalid "+de,re.commandStr),Co(function(y,O){return Ge&&(y.OFFSET=ze),ze})}else if(de in We){var p=We[de];return da(p,function(y,O){var I=y.invoke(O,p);return Ge&&(y.OFFSET=I,ie.optional(function(){y.assert(O,I+">=0","invalid "+de)})),I})}else if(Ge&&De)return Co(function(y,O){return y.OFFSET="0",0});return null}var pe=Le(Ed,!0);function ke(){if(Al in Re){var de=Re[Al]|0;return ie.command(typeof de=="number"&&de>=0,"invalid vertex count",re.commandStr),Co(function(){return de})}else if(Al in We){var Ge=We[Al];return da(Ge,function(y,O){var I=y.invoke(O,Ge);return ie.optional(function(){y.assert(O,"typeof "+I+'==="number"&&'+I+">=0&&"+I+"===("+I+"|0)","invalid vertex count")}),I})}else if(De)if(sl(De)){if(De)return pe?new qi(pe.thisDep,pe.contextDep,pe.propDep,function(y,O){var I=O.def(y.ELEMENTS,".vertCount-",y.OFFSET);return ie.optional(function(){y.assert(O,I+">=0","invalid vertex offset/element buffer too small")}),I}):Co(function(y,O){return O.def(y.ELEMENTS,".vertCount")});var ze=Co(function(){return-1});return ie.optional(function(){ze.MISSING=!0}),ze}else{var p=new qi(De.thisDep||pe.thisDep,De.contextDep||pe.contextDep,De.propDep||pe.propDep,function(y,O){var I=y.ELEMENTS;return y.OFFSET?O.def(I,"?",I,".vertCount-",y.OFFSET,":-1"):O.def(I,"?",I,".vertCount:-1")});return ie.optional(function(){p.DYNAMIC=!0}),p}return null}return{elements:De,primitive:Ne(),count:ke(),instances:Le(Pt,!1),offset:pe}}function jo(he,re){var Re=he.static,We=he.dynamic,Qe={};return Mt.forEach(function(De){var Ne=qt(De);function Le(pe,ke){if(De in Re){var de=pe(Re[De]);Qe[Ne]=Co(function(){return de})}else if(De in We){var Ge=We[De];Qe[Ne]=da(Ge,function(ze,p){return ke(ze,p,ze.invoke(p,Ge))})}}switch(De){case Sp:case qu:case Xu:case bs:case Ep:case fi:case Sl:case _d:case wd:case Op:return Le(function(pe){return ie.commandType(pe,"boolean",De,re.commandStr),pe},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,"typeof "+de+'==="boolean"',"invalid flag "+De,pe.commandStr)}),de});case bd:return Le(function(pe){return ie.commandParameter(pe,xs,"invalid "+De,re.commandStr),xs[pe]},function(pe,ke,de){var Ge=pe.constants.compareFuncs;return ie.optional(function(){pe.assert(ke,de+" in "+Ge,"invalid "+De+", must be one of "+Object.keys(xs))}),ke.def(Ge,"[",de,"]")});case Dh:return Le(function(pe){return ie.command(R(pe)&&pe.length===2&&typeof pe[0]=="number"&&typeof pe[1]=="number"&&pe[0]<=pe[1],"depth range is 2d array",re.commandStr),pe},function(pe,ke,de){ie.optional(function(){pe.assert(ke,pe.shared.isArrayLike+"("+de+")&&"+de+".length===2&&typeof "+de+'[0]==="number"&&typeof '+de+'[1]==="number"&&'+de+"[0]<="+de+"[1]","depth range must be a 2d array")});var Ge=ke.def("+",de,"[0]"),ze=ke.def("+",de,"[1]");return[Ge,ze]});case Ku:return Le(function(pe){ie.commandType(pe,"object","blend.func",re.commandStr);var ke="srcRGB"in pe?pe.srcRGB:pe.src,de="srcAlpha"in pe?pe.srcAlpha:pe.src,Ge="dstRGB"in pe?pe.dstRGB:pe.dst,ze="dstAlpha"in pe?pe.dstAlpha:pe.dst;return ie.commandParameter(ke,Ua,Ne+".srcRGB",re.commandStr),ie.commandParameter(de,Ua,Ne+".srcAlpha",re.commandStr),ie.commandParameter(Ge,Ua,Ne+".dstRGB",re.commandStr),ie.commandParameter(ze,Ua,Ne+".dstAlpha",re.commandStr),ie.command(Yl.indexOf(ke+", "+Ge)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ke+", "+Ge+")",re.commandStr),[Ua[ke],Ua[Ge],Ua[de],Ua[ze]]},function(pe,ke,de){var Ge=pe.constants.blendFuncs;ie.optional(function(){pe.assert(ke,de+"&&typeof "+de+'==="object"',"invalid blend func, must be an object")});function ze(ve,Ae){var Fe=ke.def('"',ve,Ae,'" in ',de,"?",de,".",ve,Ae,":",de,".",ve);return ie.optional(function(){pe.assert(ke,Fe+" in "+Ge,"invalid "+De+"."+ve+Ae+", must be one of "+Object.keys(Ua))}),Fe}var p=ze("src","RGB"),y=ze("dst","RGB");ie.optional(function(){var ve=pe.constants.invalidBlendCombinations;pe.assert(ke,ve+".indexOf("+p+'+", "+'+y+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var O=ke.def(Ge,"[",p,"]"),I=ke.def(Ge,"[",ze("src","Alpha"),"]"),Y=ke.def(Ge,"[",y,"]"),ne=ke.def(Ge,"[",ze("dst","Alpha"),"]");return[O,Y,I,ne]});case gd:return Le(function(pe){if(typeof pe=="string")return ie.commandParameter(pe,ct,"invalid "+De,re.commandStr),[ct[pe],ct[pe]];if(typeof pe=="object")return ie.commandParameter(pe.rgb,ct,De+".rgb",re.commandStr),ie.commandParameter(pe.alpha,ct,De+".alpha",re.commandStr),[ct[pe.rgb],ct[pe.alpha]];ie.commandRaise("invalid blend.equation",re.commandStr)},function(pe,ke,de){var Ge=pe.constants.blendEquations,ze=ke.def(),p=ke.def(),y=pe.cond("typeof ",de,'==="string"');return ie.optional(function(){function O(I,Y,ne){pe.assert(I,ne+" in "+Ge,"invalid "+Y+", must be one of "+Object.keys(ct))}O(y.then,De,de),pe.assert(y.else,de+"&&typeof "+de+'==="object"',"invalid "+De),O(y.else,De+".rgb",de+".rgb"),O(y.else,De+".alpha",de+".alpha")}),y.then(ze,"=",p,"=",Ge,"[",de,"];"),y.else(ze,"=",Ge,"[",de,".rgb];",p,"=",Ge,"[",de,".alpha];"),ke(y),[ze,p]});case Yu:return Le(function(pe){return ie.command(R(pe)&&pe.length===4,"blend.color must be a 4d array",re.commandStr),jr(4,function(ke){return+pe[ke]})},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,pe.shared.isArrayLike+"("+de+")&&"+de+".length===4","blend.color must be a 4d array")}),jr(4,function(Ge){return ke.def("+",de,"[",Ge,"]")})});case nr:return Le(function(pe){return ie.commandType(pe,"number",Ne,re.commandStr),pe|0},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,"typeof "+de+'==="number"',"invalid stencil.mask")}),ke.def(de,"|0")});case Ju:return Le(function(pe){ie.commandType(pe,"object",Ne,re.commandStr);var ke=pe.cmp||"keep",de=pe.ref||0,Ge="mask"in pe?pe.mask:-1;return ie.commandParameter(ke,xs,De+".cmp",re.commandStr),ie.commandType(de,"number",De+".ref",re.commandStr),ie.commandType(Ge,"number",De+".mask",re.commandStr),[xs[ke],de,Ge]},function(pe,ke,de){var Ge=pe.constants.compareFuncs;ie.optional(function(){function O(){pe.assert(ke,Array.prototype.join.call(arguments,""),"invalid stencil.func")}O(de+"&&typeof ",de,'==="object"'),O('!("cmp" in ',de,")||(",de,".cmp in ",Ge,")")});var ze=ke.def('"cmp" in ',de,"?",Ge,"[",de,".cmp]",":",Ss),p=ke.def(de,".ref|0"),y=ke.def('"mask" in ',de,"?",de,".mask|0:-1");return[ze,p,y]});case Zc:case il:return Le(function(pe){ie.commandType(pe,"object",Ne,re.commandStr);var ke=pe.fail||"keep",de=pe.zfail||"keep",Ge=pe.zpass||"keep";return ie.commandParameter(ke,Vn,De+".fail",re.commandStr),ie.commandParameter(de,Vn,De+".zfail",re.commandStr),ie.commandParameter(Ge,Vn,De+".zpass",re.commandStr),[De===il?Un:Xi,Vn[ke],Vn[de],Vn[Ge]]},function(pe,ke,de){var Ge=pe.constants.stencilOps;ie.optional(function(){pe.assert(ke,de+"&&typeof "+de+'==="object"',"invalid "+De)});function ze(p){return ie.optional(function(){pe.assert(ke,'!("'+p+'" in '+de+")||("+de+"."+p+" in "+Ge+")","invalid "+De+"."+p+", must be one of "+Object.keys(Vn))}),ke.def('"',p,'" in ',de,"?",Ge,"[",de,".",p,"]:",Ss)}return[De===il?Un:Xi,ze("fail"),ze("zfail"),ze("zpass")]});case Kc:return Le(function(pe){ie.commandType(pe,"object",Ne,re.commandStr);var ke=pe.factor|0,de=pe.units|0;return ie.commandType(ke,"number",Ne+".factor",re.commandStr),ie.commandType(de,"number",Ne+".units",re.commandStr),[ke,de]},function(pe,ke,de){ie.optional(function(){pe.assert(ke,de+"&&typeof "+de+'==="object"',"invalid "+De)});var Ge=ke.def(de,".factor|0"),ze=ke.def(de,".units|0");return[Ge,ze]});case xp:return Le(function(pe){var ke=0;return pe==="front"?ke=Xi:pe==="back"&&(ke=Un),ie.command(!!ke,Ne,re.commandStr),ke},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,de+'==="front"||'+de+'==="back"',"invalid cull.face")}),ke.def(de,'==="front"?',Xi,":",Un)});case Zu:return Le(function(pe){return ie.command(typeof pe=="number"&&pe>=rt.lineWidthDims[0]&&pe<=rt.lineWidthDims[1],"invalid line width, must be a positive number between "+rt.lineWidthDims[0]+" and "+rt.lineWidthDims[1],re.commandStr),pe},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,"typeof "+de+'==="number"&&'+de+">="+rt.lineWidthDims[0]+"&&"+de+"<="+rt.lineWidthDims[1],"invalid line width")}),de});case Ap:return Le(function(pe){return ie.commandParameter(pe,tc,Ne,re.commandStr),tc[pe]},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,de+'==="cw"||'+de+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ke.def(de+'==="cw"?'+Md+":"+ff)});case ol:return Le(function(pe){return ie.command(R(pe)&&pe.length===4,"color.mask must be length 4 array",re.commandStr),pe.map(function(ke){return!!ke})},function(pe,ke,de){return ie.optional(function(){pe.assert(ke,pe.shared.isArrayLike+"("+de+")&&"+de+".length===4","invalid color.mask")}),jr(4,function(Ge){return"!!"+de+"["+Ge+"]"})});case gs:return Le(function(pe){ie.command(typeof pe=="object"&&pe,Ne,re.commandStr);var ke="value"in pe?pe.value:1,de=!!pe.invert;return ie.command(typeof ke=="number"&&ke>=0&&ke<=1,"sample.coverage.value must be a number between 0 and 1",re.commandStr),[ke,de]},function(pe,ke,de){ie.optional(function(){pe.assert(ke,de+"&&typeof "+de+'==="object"',"invalid sample.coverage")});var Ge=ke.def('"value" in ',de,"?+",de,".value:1"),ze=ke.def("!!",de,".invert");return[Ge,ze]})}}),Qe}function Po(he,re){var Re=he.static,We=he.dynamic,Qe={};return Object.keys(Re).forEach(function(De){var Ne=Re[De],Le;if(typeof Ne=="number"||typeof Ne=="boolean")Le=Co(function(){return Ne});else if(typeof Ne=="function"){var pe=Ne._reglType;pe==="texture2d"||pe==="textureCube"?Le=Co(function(ke){return ke.link(Ne)}):pe==="framebuffer"||pe==="framebufferCube"?(ie.command(Ne.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',re.commandStr),Le=Co(function(ke){return ke.link(Ne.color[0])})):ie.commandRaise('invalid data for uniform "'+De+'"',re.commandStr)}else R(Ne)?Le=Co(function(ke){var de=ke.global.def("[",jr(Ne.length,function(Ge){return ie.command(typeof Ne[Ge]=="number"||typeof Ne[Ge]=="boolean","invalid uniform "+De,ke.commandStr),Ne[Ge]}),"]");return de}):ie.commandRaise('invalid or missing data for uniform "'+De+'"',re.commandStr);Le.value=Ne,Qe[De]=Le}),Object.keys(We).forEach(function(De){var Ne=We[De];Qe[De]=da(Ne,function(Le,pe){return Le.invoke(pe,Ne)})}),Qe}function or(he,re){var Re=he.static,We=he.dynamic,Qe={};return Object.keys(Re).forEach(function(De){var Ne=Re[De],Le=le.id(De),pe=new Ze;if(Kl(Ne))pe.state=eu,pe.buffer=vt.getBuffer(vt.create(Ne,Tl,!1,!0)),pe.type=0;else{var ke=vt.getBuffer(Ne);if(ke)pe.state=eu,pe.buffer=ke,pe.type=0;else if(ie.command(typeof Ne=="object"&&Ne,"invalid data for attribute "+De,re.commandStr),"constant"in Ne){var de=Ne.constant;pe.buffer="null",pe.state=tu,typeof de=="number"?pe.x=de:(ie.command(R(de)&&de.length>0&&de.length<=4,"invalid constant for attribute "+De,re.commandStr),Hl.forEach(function(Y,ne){ne<de.length&&(pe[Y]=de[ne])}))}else{Kl(Ne.buffer)?ke=vt.getBuffer(vt.create(Ne.buffer,Tl,!1,!0)):ke=vt.getBuffer(Ne.buffer),ie.command(!!ke,'missing buffer for attribute "'+De+'"',re.commandStr);var Ge=Ne.offset|0;ie.command(Ge>=0,'invalid offset for attribute "'+De+'"',re.commandStr);var ze=Ne.stride|0;ie.command(ze>=0&&ze<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',re.commandStr);var p=Ne.size|0;ie.command(!("size"in Ne)||p>0&&p<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',re.commandStr);var y=!!Ne.normalized,O=0;"type"in Ne&&(ie.commandParameter(Ne.type,Bi,"invalid type for attribute "+De,re.commandStr),O=Bi[Ne.type]);var I=Ne.divisor|0;"divisor"in Ne&&(ie.command(I===0||It,'cannot specify divisor for attribute "'+De+'", instancing not supported',re.commandStr),ie.command(I>=0,'invalid divisor for attribute "'+De+'"',re.commandStr)),ie.optional(function(){var Y=re.commandStr,ne=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ne).forEach(function(ve){ie.command(ne.indexOf(ve)>=0,'unknown parameter "'+ve+'" for attribute pointer "'+De+'" (valid parameters are '+ne+")",Y)})}),pe.buffer=ke,pe.state=eu,pe.size=p,pe.normalized=y,pe.type=O||ke.dtype,pe.offset=Ge,pe.stride=ze,pe.divisor=I}}Qe[De]=Co(function(Y,ne){var ve=Y.attribCache;if(Le in ve)return ve[Le];var Ae={isStream:!1};return Object.keys(pe).forEach(function(Fe){Ae[Fe]=pe[Fe]}),pe.buffer&&(Ae.buffer=Y.link(pe.buffer),Ae.type=Ae.type||Ae.buffer+".dtype"),ve[Le]=Ae,Ae})}),Object.keys(We).forEach(function(De){var Ne=We[De];function Le(pe,ke){var de=pe.invoke(ke,Ne),Ge=pe.shared,ze=pe.constants,p=Ge.isBufferArgs,y=Ge.buffer;ie.optional(function(){pe.assert(ke,de+"&&(typeof "+de+'==="object"||typeof '+de+'==="function")&&('+p+"("+de+")||"+y+".getBuffer("+de+")||"+y+".getBuffer("+de+".buffer)||"+p+"("+de+'.buffer)||("constant" in '+de+"&&(typeof "+de+'.constant==="number"||'+Ge.isArrayLike+"("+de+".constant))))",'invalid dynamic attribute "'+De+'"')});var O={isStream:ke.def(!1)},I=new Ze;I.state=eu,Object.keys(I).forEach(function(Ae){O[Ae]=ke.def(""+I[Ae])});var Y=O.buffer,ne=O.type;ke("if(",p,"(",de,")){",O.isStream,"=true;",Y,"=",y,".createStream(",Tl,",",de,");",ne,"=",Y,".dtype;","}else{",Y,"=",y,".getBuffer(",de,");","if(",Y,"){",ne,"=",Y,".dtype;",'}else if("constant" in ',de,"){",O.state,"=",tu,";","if(typeof "+de+'.constant === "number"){',O[Hl[0]],"=",de,".constant;",Hl.slice(1).map(function(Ae){return O[Ae]}).join("="),"=0;","}else{",Hl.map(function(Ae,Fe){return O[Ae]+"="+de+".constant.length>"+Fe+"?"+de+".constant["+Fe+"]:0;"}).join(""),"}}else{","if(",p,"(",de,".buffer)){",Y,"=",y,".createStream(",Tl,",",de,".buffer);","}else{",Y,"=",y,".getBuffer(",de,".buffer);","}",ne,'="type" in ',de,"?",ze.glTypes,"[",de,".type]:",Y,".dtype;",O.normalized,"=!!",de,".normalized;");function ve(Ae){ke(O[Ae],"=",de,".",Ae,"|0;")}return ve("size"),ve("offset"),ve("stride"),ve("divisor"),ke("}}"),ke.exit("if(",O.isStream,"){",y,".destroyStream(",Y,");","}"),O}Qe[De]=da(Ne,Le)}),Qe}function Zo(he,re){var Re=he.static,We=he.dynamic;if(ou in Re){var Qe=Re[ou];return Qe!==null&&Nt.getVAO(Qe)===null&&(Qe=Nt.createVAO(Qe)),Co(function(Ne){return Ne.link(Nt.getVAO(Qe))})}else if(ou in We){var De=We[ou];return da(De,function(Ne,Le){var pe=Ne.invoke(Le,De);return Le.def(Ne.shared.vao+".getVAO("+pe+")")})}return null}function so(he){var re=he.static,Re=he.dynamic,We={};return Object.keys(re).forEach(function(Qe){var De=re[Qe];We[Qe]=Co(function(Ne,Le){return typeof De=="number"||typeof De=="boolean"?""+De:Ne.link(De)})}),Object.keys(Re).forEach(function(Qe){var De=Re[Qe];We[Qe]=da(De,function(Ne,Le){return Ne.invoke(Le,De)})}),We}function Io(he,re,Re,We,Qe){var De=he.static,Ne=he.dynamic;ie.optional(function(){var ve=[ra,Jc,$i,Ho,xl,Ed,Al,Pt,_s,ou].concat(Mt);function Ae(Fe){Object.keys(Fe).forEach(function(mt){ie.command(ve.indexOf(mt)>=0,'unknown parameter "'+mt+'"',Qe.commandStr)})}Ae(De),Ae(Ne)});var Le=Wn(he,re),pe=pn(he),ke=sr(he,pe,Qe),de=_r(he,Qe),Ge=jo(he,Qe),ze=ir(he,Qe,Le);function p(ve){var Ae=ke[ve];Ae&&(Ge[ve]=Ae)}p(No),p(qt(ru));var y=Object.keys(Ge).length>0,O={framebuffer:pe,draw:de,shader:ze,state:Ge,dirty:y,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(O.profile=rr(he),O.uniforms=Po(Re,Qe),O.drawVAO=O.scopeVAO=Zo(he),!O.drawVAO&&ze.program&&!Le&&Oe.angle_instanced_arrays){var I=!0,Y=ze.program.attributes.map(function(ve){var Ae=re.static[ve];return I=I&&!!Ae,Ae});if(I&&Y.length>0){var ne=Nt.getVAO(Nt.createVAO(Y));O.drawVAO=new qi(null,null,null,function(ve,Ae){return ve.link(ne)}),O.useVAO=!0}}return Le?O.useVAO=!0:O.attributes=or(re,Qe),O.context=so(We),O}function qo(he,re,Re){var We=he.shared,Qe=We.context,De=he.scope();Object.keys(Re).forEach(function(Ne){re.save(Qe,"."+Ne);var Le=Re[Ne],pe=Le.append(he,re);Array.isArray(pe)?De(Qe,".",Ne,"=[",pe.join(),"];"):De(Qe,".",Ne,"=",pe,";")}),re(De)}function ii(he,re,Re,We){var Qe=he.shared,De=Qe.gl,Ne=Qe.framebuffer,Le;Jt&&(Le=re.def(Qe.extensions,".webgl_draw_buffers"));var pe=he.constants,ke=pe.drawBuffer,de=pe.backBuffer,Ge;Re?Ge=Re.append(he,re):Ge=re.def(Ne,".next"),We||re("if(",Ge,"!==",Ne,".cur){"),re("if(",Ge,"){",De,".bindFramebuffer(",df,",",Ge,".framebuffer);"),Jt&&re(Le,".drawBuffersWEBGL(",ke,"[",Ge,".colorAttachments.length]);"),re("}else{",De,".bindFramebuffer(",df,",null);"),Jt&&re(Le,".drawBuffersWEBGL(",de,");"),re("}",Ne,".cur=",Ge,";"),We||re("}")}function di(he,re,Re){var We=he.shared,Qe=We.gl,De=he.current,Ne=he.next,Le=We.current,pe=We.next,ke=he.cond(Le,".dirty");Mt.forEach(function(de){var Ge=qt(de);if(!(Ge in Re.state)){var ze,p;if(Ge in Ne){ze=Ne[Ge],p=De[Ge];var y=jr(At[Ge].length,function(I){return ke.def(ze,"[",I,"]")});ke(he.cond(y.map(function(I,Y){return I+"!=="+p+"["+Y+"]"}).join("||")).then(Qe,".",Tt[Ge],"(",y,");",y.map(function(I,Y){return p+"["+Y+"]="+I}).join(";"),";"))}else{ze=ke.def(pe,".",Ge);var O=he.cond(ze,"!==",Le,".",Ge);ke(O),Ge in Gt?O(he.cond(ze).then(Qe,".enable(",Gt[Ge],");").else(Qe,".disable(",Gt[Ge],");"),Le,".",Ge,"=",ze,";"):O(Qe,".",Tt[Ge],"(",ze,");",Le,".",Ge,"=",ze,";")}}}),Object.keys(Re.state).length===0&&ke(Le,".dirty=false;"),re(ke)}function Jo(he,re,Re,We){var Qe=he.shared,De=he.current,Ne=Qe.current,Le=Qe.gl;pf(Object.keys(Re)).forEach(function(pe){var ke=Re[pe];if(!(We&&!We(ke))){var de=ke.append(he,re);if(Gt[pe]){var Ge=Gt[pe];sl(ke)?de?re(Le,".enable(",Ge,");"):re(Le,".disable(",Ge,");"):re(he.cond(de).then(Le,".enable(",Ge,");").else(Le,".disable(",Ge,");")),re(Ne,".",pe,"=",de,";")}else if(R(de)){var ze=De[pe];re(Le,".",Tt[pe],"(",de,");",de.map(function(p,y){return ze+"["+y+"]="+p}).join(";"),";")}else re(Le,".",Tt[pe],"(",de,");",Ne,".",pe,"=",de,";")}})}function mo(he,re){It&&(he.instancing=re.def(he.shared.extensions,".angle_instanced_arrays"))}function Yn(he,re,Re,We,Qe){var De=he.shared,Ne=he.stats,Le=De.current,pe=De.timer,ke=Re.profile;function de(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ge,ze;function p(ve){Ge=re.def(),ve(Ge,"=",de(),";"),typeof Qe=="string"?ve(Ne,".count+=",Qe,";"):ve(Ne,".count++;"),Ct&&(We?(ze=re.def(),ve(ze,"=",pe,".getNumPendingQueries();")):ve(pe,".beginQuery(",Ne,");"))}function y(ve){ve(Ne,".cpuTime+=",de(),"-",Ge,";"),Ct&&(We?ve(pe,".pushScopeStats(",ze,",",pe,".getNumPendingQueries(),",Ne,");"):ve(pe,".endQuery();"))}function O(ve){var Ae=re.def(Le,".profile");re(Le,".profile=",ve,";"),re.exit(Le,".profile=",Ae,";")}var I;if(ke){if(sl(ke)){ke.enable?(p(re),y(re.exit),O("true")):O("false");return}I=ke.append(he,re),O(I)}else I=re.def(Le,".profile");var Y=he.block();p(Y),re("if(",I,"){",Y,"}");var ne=he.block();y(ne),re.exit("if(",I,"){",ne,"}")}function pi(he,re,Re,We,Qe){var De=he.shared;function Ne(pe){switch(pe){case rf:case af:case ql:return 2;case lu:case lf:case bi:return 3;case of:case sf:case Td:return 4;default:return 1}}function Le(pe,ke,de){var Ge=De.gl,ze=re.def(pe,".location"),p=re.def(De.attributes,"[",ze,"]"),y=de.state,O=de.buffer,I=[de.x,de.y,de.z,de.w],Y=["buffer","normalized","offset","stride"];function ne(){re("if(!",p,".buffer){",Ge,".enableVertexAttribArray(",ze,");}");var Ae=de.type,Fe;if(de.size?Fe=re.def(de.size,"||",ke):Fe=ke,re("if(",p,".type!==",Ae,"||",p,".size!==",Fe,"||",Y.map(function(Et){return p+"."+Et+"!=="+de[Et]}).join("||"),"){",Ge,".bindBuffer(",Tl,",",O,".buffer);",Ge,".vertexAttribPointer(",[ze,Fe,Ae,de.normalized,de.stride,de.offset],");",p,".type=",Ae,";",p,".size=",Fe,";",Y.map(function(Et){return p+"."+Et+"="+de[Et]+";"}).join(""),"}"),It){var mt=de.divisor;re("if(",p,".divisor!==",mt,"){",he.instancing,".vertexAttribDivisorANGLE(",[ze,mt],");",p,".divisor=",mt,";}")}}function ve(){re("if(",p,".buffer){",Ge,".disableVertexAttribArray(",ze,");",p,".buffer=null;","}if(",Hl.map(function(Ae,Fe){return p+"."+Ae+"!=="+I[Fe]}).join("||"),"){",Ge,".vertexAttrib4f(",ze,",",I,");",Hl.map(function(Ae,Fe){return p+"."+Ae+"="+I[Fe]+";"}).join(""),"}")}y===eu?ne():y===tu?ve():(re("if(",y,"===",eu,"){"),ne(),re("}else{"),ve(),re("}"))}We.forEach(function(pe){var ke=pe.name,de=Re.attributes[ke],Ge;if(de){if(!Qe(de))return;Ge=de.append(he,re)}else{if(!Qe(Va))return;var ze=he.scopeAttrib(ke);ie.optional(function(){he.assert(re,ze+".state","missing attribute "+ke)}),Ge={},Object.keys(new Ze).forEach(function(p){Ge[p]=re.def(ze,".",p)})}Le(he.link(pe),Ne(pe.info.type),Ge)})}function Mr(he,re,Re,We,Qe){for(var De=he.shared,Ne=De.gl,Le,pe=0;pe<We.length;++pe){var ke=We[pe],de=ke.name,Ge=ke.info.type,ze=Re.uniforms[de],p=he.link(ke),y=p+".location",O;if(ze){if(!Qe(ze))continue;if(sl(ze)){var I=ze.value;if(ie.command(I!==null&&typeof I<"u",'missing uniform "'+de+'"',he.commandStr),Ge===Ti||Ge===Mo){ie.command(typeof I=="function"&&(Ge===Ti&&(I._reglType==="texture2d"||I._reglType==="framebuffer")||Ge===Mo&&(I._reglType==="textureCube"||I._reglType==="framebufferCube")),"invalid texture for uniform "+de,he.commandStr);var Y=he.link(I._texture||I.color[0]._texture);re(Ne,".uniform1i(",y,",",Y+".bind());"),re.exit(Y,".unbind();")}else if(Ge===uf||Ge===uu||Ge===ec){ie.optional(function(){ie.command(R(I),"invalid matrix for uniform "+de,he.commandStr),ie.command(Ge===uf&&I.length===4||Ge===uu&&I.length===9||Ge===ec&&I.length===16,"invalid length for matrix uniform "+de,he.commandStr)});var ne=he.global.def("new Float32Array(["+Array.prototype.slice.call(I)+"])"),ve=2;Ge===uu?ve=3:Ge===ec&&(ve=4),re(Ne,".uniformMatrix",ve,"fv(",y,",false,",ne,");")}else{switch(Ge){case Oo:ie.commandType(I,"number","uniform "+de,he.commandStr),Le="1f";break;case rf:ie.command(R(I)&&I.length===2,"uniform "+de,he.commandStr),Le="2f";break;case lu:ie.command(R(I)&&I.length===3,"uniform "+de,he.commandStr),Le="3f";break;case of:ie.command(R(I)&&I.length===4,"uniform "+de,he.commandStr),Le="4f";break;case su:ie.commandType(I,"boolean","uniform "+de,he.commandStr),Le="1i";break;case Qu:ie.commandType(I,"number","uniform "+de,he.commandStr),Le="1i";break;case ql:ie.command(R(I)&&I.length===2,"uniform "+de,he.commandStr),Le="2i";break;case af:ie.command(R(I)&&I.length===2,"uniform "+de,he.commandStr),Le="2i";break;case bi:ie.command(R(I)&&I.length===3,"uniform "+de,he.commandStr),Le="3i";break;case lf:ie.command(R(I)&&I.length===3,"uniform "+de,he.commandStr),Le="3i";break;case Td:ie.command(R(I)&&I.length===4,"uniform "+de,he.commandStr),Le="4i";break;case sf:ie.command(R(I)&&I.length===4,"uniform "+de,he.commandStr),Le="4i";break}re(Ne,".uniform",Le,"(",y,",",R(I)?Array.prototype.slice.call(I):I,");")}continue}else O=ze.append(he,re)}else{if(!Qe(Va))continue;O=re.def(De.uniforms,"[",le.id(de),"]")}Ge===Ti?(ie(!Array.isArray(O),"must specify a scalar prop for textures"),re("if(",O,"&&",O,'._reglType==="framebuffer"){',O,"=",O,".color[0];","}")):Ge===Mo&&(ie(!Array.isArray(O),"must specify a scalar prop for cube maps"),re("if(",O,"&&",O,'._reglType==="framebufferCube"){',O,"=",O,".color[0];","}")),ie.optional(function(){function Wt(jt,tn){he.assert(re,jt,'bad data or missing for uniform "'+de+'".  '+tn)}function wn(jt){ie(!Array.isArray(O),"must not specify an array type for uniform"),Wt("typeof "+O+'==="'+jt+'"',"invalid type, expected "+jt)}function On(jt,tn){Array.isArray(O)?ie(O.length===jt,"must have length "+jt):Wt(De.isArrayLike+"("+O+")&&"+O+".length==="+jt,"invalid vector, should have length "+jt,he.commandStr)}function Gn(jt){ie(!Array.isArray(O),"must not specify a value type"),Wt("typeof "+O+'==="function"&&'+O+'._reglType==="texture'+(jt===xd?"2d":"Cube")+'"',"invalid texture type",he.commandStr)}switch(Ge){case Qu:wn("number");break;case af:On(2);break;case lf:On(3);break;case sf:On(4);break;case Oo:wn("number");break;case rf:On(2);break;case lu:On(3);break;case of:On(4);break;case su:wn("boolean");break;case ql:On(2);break;case bi:On(3);break;case Td:On(4);break;case uf:On(4);break;case uu:On(9);break;case ec:On(16);break;case Ti:Gn(xd);break;case Mo:Gn(jh);break}});var Ae=1;switch(Ge){case Ti:case Mo:var Fe=re.def(O,"._texture");re(Ne,".uniform1i(",y,",",Fe,".bind());"),re.exit(Fe,".unbind();");continue;case Qu:case su:Le="1i";break;case af:case ql:Le="2i",Ae=2;break;case lf:case bi:Le="3i",Ae=3;break;case sf:case Td:Le="4i",Ae=4;break;case Oo:Le="1f";break;case rf:Le="2f",Ae=2;break;case lu:Le="3f",Ae=3;break;case of:Le="4f",Ae=4;break;case uf:Le="Matrix2fv";break;case uu:Le="Matrix3fv";break;case ec:Le="Matrix4fv";break}if(re(Ne,".uniform",Le,"(",y,","),Le.charAt(0)==="M"){var mt=Math.pow(Ge-uf+2,2),Et=he.global.def("new Float32Array(",mt,")");Array.isArray(O)?re("false,(",jr(mt,function(Wt){return Et+"["+Wt+"]="+O[Wt]}),",",Et,")"):re("false,(Array.isArray(",O,")||",O," instanceof Float32Array)?",O,":(",jr(mt,function(Wt){return Et+"["+Wt+"]="+O+"["+Wt+"]"}),",",Et,")")}else Ae>1?re(jr(Ae,function(Wt){return Array.isArray(O)?O[Wt]:O+"["+Wt+"]"})):(ie(!Array.isArray(O),"uniform value must not be an array"),re(O));re(");")}}function Dn(he,re,Re,We){var Qe=he.shared,De=Qe.gl,Ne=Qe.draw,Le=We.draw;function pe(){var Fe=Le.elements,mt,Et=re;return Fe?((Fe.contextDep&&We.contextDynamic||Fe.propDep)&&(Et=Re),mt=Fe.append(he,Et)):mt=Et.def(Ne,".",Ho),mt&&Et("if("+mt+")"+De+".bindBuffer("+kp+","+mt+".buffer.buffer);"),mt}function ke(){var Fe=Le.count,mt,Et=re;return Fe?((Fe.contextDep&&We.contextDynamic||Fe.propDep)&&(Et=Re),mt=Fe.append(he,Et),ie.optional(function(){Fe.MISSING&&he.assert(re,"false","missing vertex count"),Fe.DYNAMIC&&he.assert(Et,mt+">=0","missing vertex count")})):(mt=Et.def(Ne,".",Al),ie.optional(function(){he.assert(Et,mt+">=0","missing vertex count")})),mt}var de=pe();function Ge(Fe){var mt=Le[Fe];return mt?mt.contextDep&&We.contextDynamic||mt.propDep?mt.append(he,Re):mt.append(he,re):re.def(Ne,".",Fe)}var ze=Ge(xl),p=Ge(Ed),y=ke();if(typeof y=="number"){if(y===0)return}else Re("if(",y,"){"),Re.exit("}");var O,I;It&&(O=Ge(Pt),I=he.instancing);var Y=de+".type",ne=Le.elements&&sl(Le.elements);function ve(){function Fe(){Re(I,".drawElementsInstancedANGLE(",[ze,y,Y,p+"<<(("+Y+"-"+Qs+")>>1)",O],");")}function mt(){Re(I,".drawArraysInstancedANGLE(",[ze,p,y,O],");")}de?ne?Fe():(Re("if(",de,"){"),Fe(),Re("}else{"),mt(),Re("}")):mt()}function Ae(){function Fe(){Re(De+".drawElements("+[ze,y,Y,p+"<<(("+Y+"-"+Qs+")>>1)"]+");")}function mt(){Re(De+".drawArrays("+[ze,p,y]+");")}de?ne?Fe():(Re("if(",de,"){"),Fe(),Re("}else{"),mt(),Re("}")):mt()}It&&(typeof O!="number"||O>=0)?typeof O=="string"?(Re("if(",O,">0){"),ve(),Re("}else if(",O,"<0){"),Ae(),Re("}")):ve():Ae()}function hr(he,re,Re,We,Qe){var De=jn(),Ne=De.proc("body",Qe);return ie.optional(function(){De.commandStr=re.commandStr,De.command=De.link(re.commandStr)}),It&&(De.instancing=Ne.def(De.shared.extensions,".angle_instanced_arrays")),he(De,Ne,Re,We),De.compile().body}function Kn(he,re,Re,We){mo(he,re),Re.useVAO?Re.drawVAO?re(he.shared.vao,".setVAO(",Re.drawVAO.append(he,re),");"):re(he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"):(re(he.shared.vao,".setVAO(null);"),pi(he,re,Re,We.attributes,function(){return!0})),Mr(he,re,Re,We.uniforms,function(){return!0}),Dn(he,re,re,Re)}function yo(he,re){var Re=he.proc("draw",1);mo(he,Re),qo(he,Re,re.context),ii(he,Re,re.framebuffer),di(he,Re,re),Jo(he,Re,re.state),Yn(he,Re,re,!1,!0);var We=re.shader.progVar.append(he,Re);if(Re(he.shared.gl,".useProgram(",We,".program);"),re.shader.program)Kn(he,Re,re,re.shader.program);else{Re(he.shared.vao,".setVAO(null);");var Qe=he.global.def("{}"),De=Re.def(We,".id"),Ne=Re.def(Qe,"[",De,"]");Re(he.cond(Ne).then(Ne,".call(this,a0);").else(Ne,"=",Qe,"[",De,"]=",he.link(function(Le){return hr(Kn,he,re,Le,1)}),"(",We,");",Ne,".call(this,a0);"))}Object.keys(re.state).length>0&&Re(he.shared.current,".dirty=true;")}function Ml(he,re,Re,We){he.batchId="a1",mo(he,re);function Qe(){return!0}pi(he,re,Re,We.attributes,Qe),Mr(he,re,Re,We.uniforms,Qe),Dn(he,re,re,Re)}function So(he,re,Re,We){mo(he,re);var Qe=Re.contextDep,De=re.def(),Ne="a0",Le="a1",pe=re.def();he.shared.props=pe,he.batchId=De;var ke=he.scope(),de=he.scope();re(ke.entry,"for(",De,"=0;",De,"<",Le,";++",De,"){",pe,"=",Ne,"[",De,"];",de,"}",ke.exit);function Ge(Y){return Y.contextDep&&Qe||Y.propDep}function ze(Y){return!Ge(Y)}if(Re.needsContext&&qo(he,de,Re.context),Re.needsFramebuffer&&ii(he,de,Re.framebuffer),Jo(he,de,Re.state,Ge),Re.profile&&Ge(Re.profile)&&Yn(he,de,Re,!1,!0),We)Re.useVAO?Re.drawVAO?Ge(Re.drawVAO)?de(he.shared.vao,".setVAO(",Re.drawVAO.append(he,de),");"):ke(he.shared.vao,".setVAO(",Re.drawVAO.append(he,ke),");"):ke(he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"):(ke(he.shared.vao,".setVAO(null);"),pi(he,ke,Re,We.attributes,ze),pi(he,de,Re,We.attributes,Ge)),Mr(he,ke,Re,We.uniforms,ze),Mr(he,de,Re,We.uniforms,Ge),Dn(he,ke,de,Re);else{var p=he.global.def("{}"),y=Re.shader.progVar.append(he,de),O=de.def(y,".id"),I=de.def(p,"[",O,"]");de(he.shared.gl,".useProgram(",y,".program);","if(!",I,"){",I,"=",p,"[",O,"]=",he.link(function(Y){return hr(Ml,he,Re,Y,2)}),"(",y,");}",I,".call(this,a0[",De,"],",De,");")}}function ye(he,re){var Re=he.proc("batch",2);he.batchId="0",mo(he,Re);var We=!1,Qe=!0;Object.keys(re.context).forEach(function(p){We=We||re.context[p].propDep}),We||(qo(he,Re,re.context),Qe=!1);var De=re.framebuffer,Ne=!1;De?(De.propDep?We=Ne=!0:De.contextDep&&We&&(Ne=!0),Ne||ii(he,Re,De)):ii(he,Re,null),re.state.viewport&&re.state.viewport.propDep&&(We=!0);function Le(p){return p.contextDep&&We||p.propDep}di(he,Re,re),Jo(he,Re,re.state,function(p){return!Le(p)}),(!re.profile||!Le(re.profile))&&Yn(he,Re,re,!1,"a1"),re.contextDep=We,re.needsContext=Qe,re.needsFramebuffer=Ne;var pe=re.shader.progVar;if(pe.contextDep&&We||pe.propDep)So(he,Re,re,null);else{var ke=pe.append(he,Re);if(Re(he.shared.gl,".useProgram(",ke,".program);"),re.shader.program)So(he,Re,re,re.shader.program);else{Re(he.shared.vao,".setVAO(null);");var de=he.global.def("{}"),Ge=Re.def(ke,".id"),ze=Re.def(de,"[",Ge,"]");Re(he.cond(ze).then(ze,".call(this,a0,a1);").else(ze,"=",de,"[",Ge,"]=",he.link(function(p){return hr(So,he,re,p,2)}),"(",ke,");",ze,".call(this,a0,a1);"))}}Object.keys(re.state).length>0&&Re(he.shared.current,".dirty=true;")}function it(he,re){var Re=he.proc("scope",3);he.batchId="a2";var We=he.shared,Qe=We.current;qo(he,Re,re.context),re.framebuffer&&re.framebuffer.append(he,Re),pf(Object.keys(re.state)).forEach(function(Ne){var Le=re.state[Ne],pe=Le.append(he,Re);R(pe)?pe.forEach(function(ke,de){Re.set(he.next[Ne],"["+de+"]",ke)}):Re.set(We.next,"."+Ne,pe)}),Yn(he,Re,re,!0,!0),[Ho,Ed,Al,Pt,xl].forEach(function(Ne){var Le=re.draw[Ne];Le&&Re.set(We.draw,"."+Ne,""+Le.append(he,Re))}),Object.keys(re.uniforms).forEach(function(Ne){var Le=re.uniforms[Ne].append(he,Re);Array.isArray(Le)&&(Le="["+Le.join()+"]"),Re.set(We.uniforms,"["+le.id(Ne)+"]",Le)}),Object.keys(re.attributes).forEach(function(Ne){var Le=re.attributes[Ne].append(he,Re),pe=he.scopeAttrib(Ne);Object.keys(new Ze).forEach(function(ke){Re.set(pe,"."+ke,Le[ke])})}),re.scopeVAO&&Re.set(We.vao,".targetVAO",re.scopeVAO.append(he,Re));function De(Ne){var Le=re.shader[Ne];Le&&Re.set(We.shader,"."+Ne,Le.append(he,Re))}De(Jc),De($i),Object.keys(re.state).length>0&&(Re(Qe,".dirty=true;"),Re.exit(Qe,".dirty=true;")),Re("a1(",he.shared.context,",a0,",he.batchId,");")}function tt(he){if(!(typeof he!="object"||R(he))){for(var re=Object.keys(he),Re=0;Re<re.length;++Re)if(Zt.isDynamic(he[re[Re]]))return!0;return!1}}function un(he,re,Re){var We=re.static[Re];if(!We||!tt(We))return;var Qe=he.global,De=Object.keys(We),Ne=!1,Le=!1,pe=!1,ke=he.global.def("{}");De.forEach(function(Ge){var ze=We[Ge];if(Zt.isDynamic(ze)){typeof ze=="function"&&(ze=We[Ge]=Zt.unbox(ze));var p=da(ze,null);Ne=Ne||p.thisDep,pe=pe||p.propDep,Le=Le||p.contextDep}else{switch(Qe(ke,".",Ge,"="),typeof ze){case"number":Qe(ze);break;case"string":Qe('"',ze,'"');break;case"object":Array.isArray(ze)&&Qe("[",ze.join(),"]");break;default:Qe(he.link(ze));break}Qe(";")}});function de(Ge,ze){De.forEach(function(p){var y=We[p];if(Zt.isDynamic(y)){var O=Ge.invoke(ze,y);ze(ke,".",p,"=",O,";")}})}re.dynamic[Re]=new Zt.DynamicVariable(rl,{thisDep:Ne,contextDep:Le,propDep:pe,ref:ke,append:de}),delete re.static[Re]}function dr(he,re,Re,We,Qe){var De=jn();De.stats=De.link(Qe),Object.keys(re.static).forEach(function(Le){un(De,re,Le)}),Mp.forEach(function(Le){un(De,he,Le)});var Ne=Io(he,re,Re,We,De);return yo(De,Ne),it(De,Ne),ye(De,Ne),a(De.compile(),{destroy:function(){Ne.shader.program.destroy()}})}return{next:on,current:At,procs:function(){var he=jn(),re=he.proc("poll"),Re=he.proc("refresh"),We=he.block();re(We),Re(We);var Qe=he.shared,De=Qe.gl,Ne=Qe.next,Le=Qe.current;We(Le,".dirty=false;"),ii(he,re),ii(he,Re,null,!0);var pe;It&&(pe=he.link(It)),Oe.oes_vertex_array_object&&Re(he.link(Oe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ke=0;ke<rt.maxAttributes;++ke){var de=Re.def(Qe.attributes,"[",ke,"]"),Ge=he.cond(de,".buffer");Ge.then(De,".enableVertexAttribArray(",ke,");",De,".bindBuffer(",Tl,",",de,".buffer.buffer);",De,".vertexAttribPointer(",ke,",",de,".size,",de,".type,",de,".normalized,",de,".stride,",de,".offset);").else(De,".disableVertexAttribArray(",ke,");",De,".vertexAttrib4f(",ke,",",de,".x,",de,".y,",de,".z,",de,".w);",de,".buffer=null;"),Re(Ge),It&&Re(pe,".vertexAttribDivisorANGLE(",ke,",",de,".divisor);")}return Re(he.shared.vao,".currentVAO=null;",he.shared.vao,".setVAO(",he.shared.vao,".targetVAO);"),Object.keys(Gt).forEach(function(ze){var p=Gt[ze],y=We.def(Ne,".",ze),O=he.block();O("if(",y,"){",De,".enable(",p,")}else{",De,".disable(",p,")}",Le,".",ze,"=",y,";"),Re(O),re("if(",y,"!==",Le,".",ze,"){",O,"}")}),Object.keys(Tt).forEach(function(ze){var p=Tt[ze],y=At[ze],O,I,Y=he.block();if(Y(De,".",p,"("),R(y)){var ne=y.length;O=he.global.def(Ne,".",ze),I=he.global.def(Le,".",ze),Y(jr(ne,function(ve){return O+"["+ve+"]"}),");",jr(ne,function(ve){return I+"["+ve+"]="+O+"["+ve+"];"}).join("")),re("if(",jr(ne,function(ve){return O+"["+ve+"]!=="+I+"["+ve+"]"}).join("||"),"){",Y,"}")}else O=We.def(Ne,".",ze),I=We.def(Le,".",ze),Y(O,");",Le,".",ze,"=",O,";"),re("if(",O,"!==",I,"){",Y,"}");Re(Y)}),he.compile()}(),compile:dr}}function hf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var fu=34918,br=34919,Wh=35007,pa=function(W,le){if(!le.ext_disjoint_timer_query)return null;var Oe=[];function rt(){return Oe.pop()||le.ext_disjoint_timer_query.createQueryEXT()}function vt(It){Oe.push(It)}var et=[];function pt(It){var Jt=rt();le.ext_disjoint_timer_query.beginQueryEXT(Wh,Jt),et.push(Jt),Ct(et.length-1,et.length,It)}function Rt(){le.ext_disjoint_timer_query.endQueryEXT(Wh)}function $t(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Nt=[];function ft(){return Nt.pop()||new $t}function Ht(It){Nt.push(It)}var Vt=[];function Ct(It,Jt,At){var on=ft();on.startQueryIndex=It,on.endQueryIndex=Jt,on.sum=0,on.stats=At,Vt.push(on)}var Ot=[],Ze=[];function ct(){var It,Jt,At=et.length;if(At!==0){Ze.length=Math.max(Ze.length,At+1),Ot.length=Math.max(Ot.length,At+1),Ot[0]=0,Ze[0]=0;var on=0;for(It=0,Jt=0;Jt<et.length;++Jt){var Mt=et[Jt];le.ext_disjoint_timer_query.getQueryObjectEXT(Mt,br)?(on+=le.ext_disjoint_timer_query.getQueryObjectEXT(Mt,fu),vt(Mt)):et[It++]=Mt,Ot[Jt+1]=on,Ze[Jt+1]=It}for(et.length=It,It=0,Jt=0;Jt<Vt.length;++Jt){var Gt=Vt[Jt],Tt=Gt.startQueryIndex,qt=Gt.endQueryIndex;Gt.sum+=Ot[qt]-Ot[Tt];var Pn=Ze[Tt],Bn=Ze[qt];Bn===Pn?(Gt.stats.gpuTime+=Gt.sum/1e6,Ht(Gt)):(Gt.startQueryIndex=Pn,Gt.endQueryIndex=Bn,Vt[It++]=Gt)}Vt.length=It}}return{beginQuery:pt,endQuery:Rt,pushScopeStats:Ct,update:ct,getNumPendingQueries:function(){return et.length},clear:function(){Oe.push.apply(Oe,et);for(var It=0;It<Oe.length;It++)le.ext_disjoint_timer_query.deleteQueryEXT(Oe[It]);et.length=0,Oe.length=0},restore:function(){et.length=0,Oe.length=0}}},ko=16384,oa=256,Dp=1024,Mi=34962,Aa="webglcontextlost",du="webglcontextrestored",vf=1,Do=2,Xo=3;function Pd(W,le){for(var Oe=0;Oe<W.length;++Oe)if(W[Oe]===le)return Oe;return-1}function jp(W){var le=lr(W);if(!le)return null;var Oe=le.gl,rt=Oe.getContextAttributes(),vt=Oe.isContextLost(),et=to(Oe,le);if(!et)return null;var pt=li(),Rt=hf(),$t=et.extensions,Nt=pa(Oe,$t),ft=Or(),Ht=Oe.drawingBufferWidth,Vt=Oe.drawingBufferHeight,Ct={tick:0,time:0,viewportWidth:Ht,viewportHeight:Vt,framebufferWidth:Ht,framebufferHeight:Vt,drawingBufferWidth:Ht,drawingBufferHeight:Vt,pixelRatio:le.pixelRatio},Ot={},Ze={elements:null,primitive:4,count:-1,offset:0,instances:-1},ct=Pc(Oe,$t),It=_a(Oe,Rt,le,At),Jt=pd(Oe,$t,ct,Rt,It);function At(Dn){return Jt.destroyBuffer(Dn)}var on=mn(Oe,$t,It,Rt),Mt=vd(Oe,pt,Rt,le),Gt=Ar(Oe,$t,ct,function(){Pn.procs.poll()},Ct,Rt,le),Tt=zu(Oe,$t,ct,Rt,le),qt=fd(Oe,$t,ct,Gt,Tt,Rt),Pn=am(Oe,pt,$t,ct,It,on,Gt,qt,Ot,Jt,Mt,Ze,Ct,Nt,le),Bn=Ch(Oe,qt,Pn.procs.poll,Ct,rt,$t,ct),Dt=Pn.next,kt=Oe.canvas,xt=[],jn=[],rr=[],pn=[le.onDestroy],sr=null;function Wn(){if(xt.length===0){Nt&&Nt.update(),sr=null;return}sr=Nn.next(Wn),Jo();for(var Dn=xt.length-1;Dn>=0;--Dn){var hr=xt[Dn];hr&&hr(Ct,null,0)}Oe.flush(),Nt&&Nt.update()}function ir(){!sr&&xt.length>0&&(sr=Nn.next(Wn))}function _r(){sr&&(Nn.cancel(Wn),sr=null)}function jo(Dn){Dn.preventDefault(),vt=!0,_r(),jn.forEach(function(hr){hr()})}function Po(Dn){Oe.getError(),vt=!1,et.restore(),Mt.restore(),It.restore(),Gt.restore(),Tt.restore(),qt.restore(),Jt.restore(),Nt&&Nt.restore(),Pn.procs.refresh(),ir(),rr.forEach(function(hr){hr()})}kt&&(kt.addEventListener(Aa,jo,!1),kt.addEventListener(du,Po,!1));function or(){xt.length=0,_r(),kt&&(kt.removeEventListener(Aa,jo),kt.removeEventListener(du,Po)),Mt.clear(),qt.clear(),Tt.clear(),Gt.clear(),on.clear(),It.clear(),Jt.clear(),Nt&&Nt.clear(),pn.forEach(function(Dn){Dn()})}function Zo(Dn){ie(!!Dn,"invalid args to regl({...})"),ie.type(Dn,"object","invalid args to regl({...})");function hr(Qe){var De=a({},Qe);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Ne(Le){if(Le in De){var pe=De[Le];delete De[Le],Object.keys(pe).forEach(function(ke){De[Le+"."+ke]=pe[ke]})}}return Ne("blend"),Ne("depth"),Ne("cull"),Ne("stencil"),Ne("polygonOffset"),Ne("scissor"),Ne("sample"),"vao"in Qe&&(De.vao=Qe.vao),De}function Kn(Qe,De){var Ne={},Le={};return Object.keys(Qe).forEach(function(pe){var ke=Qe[pe];if(Zt.isDynamic(ke)){Le[pe]=Zt.unbox(ke,pe);return}else if(De&&Array.isArray(ke)){for(var de=0;de<ke.length;++de)if(Zt.isDynamic(ke[de])){Le[pe]=Zt.unbox(ke,pe);return}}Ne[pe]=ke}),{dynamic:Le,static:Ne}}var yo=Kn(Dn.context||{},!0),Ml=Kn(Dn.uniforms||{},!0),So=Kn(Dn.attributes||{},!1),ye=Kn(hr(Dn),!1),it={gpuTime:0,cpuTime:0,count:0},tt=Pn.compile(ye,So,Ml,yo,it),un=tt.draw,dr=tt.batch,he=tt.scope,re=[];function Re(Qe){for(;re.length<Qe;)re.push(null);return re}function We(Qe,De){var Ne;if(vt&&ie.raise("context lost"),typeof Qe=="function")return he.call(this,null,Qe,0);if(typeof De=="function")if(typeof Qe=="number")for(Ne=0;Ne<Qe;++Ne)he.call(this,null,De,Ne);else if(Array.isArray(Qe))for(Ne=0;Ne<Qe.length;++Ne)he.call(this,Qe[Ne],De,Ne);else return he.call(this,Qe,De,0);else if(typeof Qe=="number"){if(Qe>0)return dr.call(this,Re(Qe|0),Qe|0)}else if(Array.isArray(Qe)){if(Qe.length)return dr.call(this,Qe,Qe.length)}else return un.call(this,Qe)}return a(We,{stats:it,destroy:function(){tt.destroy()}})}var so=qt.setFBO=Zo({framebuffer:Zt.define.call(null,vf,"framebuffer")});function Io(Dn,hr){var Kn=0;Pn.procs.poll();var yo=hr.color;yo&&(Oe.clearColor(+yo[0]||0,+yo[1]||0,+yo[2]||0,+yo[3]||0),Kn|=ko),"depth"in hr&&(Oe.clearDepth(+hr.depth),Kn|=oa),"stencil"in hr&&(Oe.clearStencil(hr.stencil|0),Kn|=Dp),ie(!!Kn,"called regl.clear with no buffer specified"),Oe.clear(Kn)}function qo(Dn){if(ie(typeof Dn=="object"&&Dn,"regl.clear() takes an object as input"),"framebuffer"in Dn)if(Dn.framebuffer&&Dn.framebuffer_reglType==="framebufferCube")for(var hr=0;hr<6;++hr)so(a({framebuffer:Dn.framebuffer.faces[hr]},Dn),Io);else so(Dn,Io);else Io(null,Dn)}function ii(Dn){ie.type(Dn,"function","regl.frame() callback must be a function"),xt.push(Dn);function hr(){var Kn=Pd(xt,Dn);ie(Kn>=0,"cannot cancel a frame twice");function yo(){var Ml=Pd(xt,yo);xt[Ml]=xt[xt.length-1],xt.length-=1,xt.length<=0&&_r()}xt[Kn]=yo}return ir(),{cancel:hr}}function di(){var Dn=Dt.viewport,hr=Dt.scissor_box;Dn[0]=Dn[1]=hr[0]=hr[1]=0,Ct.viewportWidth=Ct.framebufferWidth=Ct.drawingBufferWidth=Dn[2]=hr[2]=Oe.drawingBufferWidth,Ct.viewportHeight=Ct.framebufferHeight=Ct.drawingBufferHeight=Dn[3]=hr[3]=Oe.drawingBufferHeight}function Jo(){Ct.tick+=1,Ct.time=Yn(),di(),Pn.procs.poll()}function mo(){Gt.refresh(),di(),Pn.procs.refresh(),Nt&&Nt.update()}function Yn(){return(Or()-ft)/1e3}mo();function pi(Dn,hr){ie.type(hr,"function","listener callback must be a function");var Kn;switch(Dn){case"frame":return ii(hr);case"lost":Kn=jn;break;case"restore":Kn=rr;break;case"destroy":Kn=pn;break;default:ie.raise("invalid event, must be one of frame,lost,restore,destroy")}return Kn.push(hr),{cancel:function(){for(var yo=0;yo<Kn.length;++yo)if(Kn[yo]===hr){Kn[yo]=Kn[Kn.length-1],Kn.pop();return}}}}var Mr=a(Zo,{clear:qo,prop:Zt.define.bind(null,vf),context:Zt.define.bind(null,Do),this:Zt.define.bind(null,Xo),draw:Zo({}),buffer:function(Dn){return It.create(Dn,Mi,!1,!1)},elements:function(Dn){return on.create(Dn,!1)},texture:Gt.create2D,cube:Gt.createCube,renderbuffer:Tt.create,framebuffer:qt.create,framebufferCube:qt.createCube,vao:Jt.createVAO,attributes:rt,frame:ii,on:pi,limits:ct,hasExtension:function(Dn){return ct.extensions.indexOf(Dn.toLowerCase())>=0},read:Bn,destroy:or,_gl:Oe,_refresh:mo,poll:function(){Jo(),Nt&&Nt.update()},now:Yn,stats:Rt});return le.onDone(null,Mr),Mr}return jp})}(kg)),kg.exports}Wne();var Mf,Om,kf,Ps,Sm,Vd,xm,vg,fc,qp,ka,dc,pc,mg;Mf={},cn(Mf,sn.POINTS,"points"),cn(Mf,sn.LINES,"lines"),cn(Mf,sn.LINE_LOOP,"line loop"),cn(Mf,sn.LINE_STRIP,"line strip"),cn(Mf,sn.TRIANGLES,"triangles"),cn(Mf,sn.TRIANGLE_FAN,"triangle fan"),cn(Mf,sn.TRIANGLE_STRIP,"triangle strip");Om={},cn(Om,sn.STATIC_DRAW,"static"),cn(Om,sn.DYNAMIC_DRAW,"dynamic"),cn(Om,sn.STREAM_DRAW,"stream");kf={},cn(kf,sn.BYTE,"int8"),cn(kf,sn.UNSIGNED_INT,"int16"),cn(kf,sn.INT,"int32"),cn(kf,sn.UNSIGNED_BYTE,"uint8"),cn(kf,sn.UNSIGNED_SHORT,"uint16"),cn(kf,sn.UNSIGNED_INT,"uint32"),cn(kf,sn.FLOAT,"float");Ps={},cn(Ps,sn.ALPHA,"alpha"),cn(Ps,sn.LUMINANCE,"luminance"),cn(Ps,sn.LUMINANCE_ALPHA,"luminance alpha"),cn(Ps,sn.RGB,"rgb"),cn(Ps,sn.RGBA,"rgba"),cn(Ps,sn.RGBA4,"rgba4"),cn(Ps,sn.RGB5_A1,"rgb5 a1"),cn(Ps,sn.RGB565,"rgb565"),cn(Ps,sn.DEPTH_COMPONENT,"depth"),cn(Ps,sn.DEPTH_STENCIL,"depth stencil");Sm={},cn(Sm,sn.DONT_CARE,"dont care"),cn(Sm,sn.NICEST,"nice"),cn(Sm,sn.FASTEST,"fast");Vd={},cn(Vd,sn.NEAREST,"nearest"),cn(Vd,sn.LINEAR,"linear"),cn(Vd,sn.LINEAR_MIPMAP_LINEAR,"mipmap"),cn(Vd,sn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),cn(Vd,sn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),cn(Vd,sn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");xm={},cn(xm,sn.REPEAT,"repeat"),cn(xm,sn.CLAMP_TO_EDGE,"clamp"),cn(xm,sn.MIRRORED_REPEAT,"mirror");vg={},cn(vg,sn.NONE,"none"),cn(vg,sn.BROWSER_DEFAULT_WEBGL,"browser");fc={},cn(fc,sn.NEVER,"never"),cn(fc,sn.ALWAYS,"always"),cn(fc,sn.LESS,"less"),cn(fc,sn.LEQUAL,"lequal"),cn(fc,sn.GREATER,"greater"),cn(fc,sn.GEQUAL,"gequal"),cn(fc,sn.EQUAL,"equal"),cn(fc,sn.NOTEQUAL,"notequal");qp={},cn(qp,sn.FUNC_ADD,"add"),cn(qp,sn.MIN_EXT,"min"),cn(qp,sn.MAX_EXT,"max"),cn(qp,sn.FUNC_SUBTRACT,"subtract"),cn(qp,sn.FUNC_REVERSE_SUBTRACT,"reverse subtract");ka={},cn(ka,sn.ZERO,"zero"),cn(ka,sn.ONE,"one"),cn(ka,sn.SRC_COLOR,"src color"),cn(ka,sn.ONE_MINUS_SRC_COLOR,"one minus src color"),cn(ka,sn.SRC_ALPHA,"src alpha"),cn(ka,sn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),cn(ka,sn.DST_COLOR,"dst color"),cn(ka,sn.ONE_MINUS_DST_COLOR,"one minus dst color"),cn(ka,sn.DST_ALPHA,"dst alpha"),cn(ka,sn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),cn(ka,sn.CONSTANT_COLOR,"constant color"),cn(ka,sn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),cn(ka,sn.CONSTANT_ALPHA,"constant alpha"),cn(ka,sn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),cn(ka,sn.SRC_ALPHA_SATURATE,"src alpha saturate");dc={},cn(dc,sn.NEVER,"never"),cn(dc,sn.ALWAYS,"always"),cn(dc,sn.LESS,"less"),cn(dc,sn.LEQUAL,"lequal"),cn(dc,sn.GREATER,"greater"),cn(dc,sn.GEQUAL,"gequal"),cn(dc,sn.EQUAL,"equal"),cn(dc,sn.NOTEQUAL,"notequal");pc={},cn(pc,sn.ZERO,"zero"),cn(pc,sn.KEEP,"keep"),cn(pc,sn.REPLACE,"replace"),cn(pc,sn.INVERT,"invert"),cn(pc,sn.INCR,"increment"),cn(pc,sn.DECR,"decrement"),cn(pc,sn.INCR_WRAP,"increment wrap"),cn(pc,sn.DECR_WRAP,"decrement wrap");mg={},cn(mg,sn.FRONT,"front"),cn(mg,sn.BACK,"back");var sw,RT;function Gne(){if(RT)return sw;RT=1;function e(t,n){return function(a){return t(n(a))}}return sw=e,sw}var uw,NT;function zne(){if(NT)return uw;NT=1;var e=Gne(),t=e(Object.getPrototypeOf,Object);return uw=t,uw}var cw,CT;function Hne(){if(CT)return cw;CT=1;var e=oE(),t=zne(),n=iE(),a="[object Object]",r=Function.prototype,s=Object.prototype,c=r.toString,v=s.hasOwnProperty,f=c.call(Object);function g(b){if(!n(b)||e(b)!=a)return!1;var _=t(b);if(_===null)return!0;var S=v.call(_,"constructor")&&_.constructor;return typeof S=="function"&&S instanceof S&&c.call(S)==f}return cw=g,cw}Hne();class qR{constructor(){Ma(this,"lf");Ma(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new eQ(this.option).layout({nodes:n.map(b=>({id:b.id,size:{width:b.width,height:b.height},model:b})),edges:a.map(b=>({source:b.sourceNodeId,target:b.targetNodeId,model:b}))}).nodes)==null||g.forEach(b=>{const{model:_}=b;_.set_position({x:b.x,y:b.y})}),this.lf.fitView()}}Ma(qR,"pluginName","dagre");const Xne=er({name:"WorkFlow"}),qne=er({...Xne,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":pB,"./nodes/application-node/index.ts":EB,"./nodes/base-node/index.ts":aG,"./nodes/condition-node/index.ts":yG,"./nodes/database-node/index.ts":kG,"./nodes/document-extract-node/index.ts":DG,"./nodes/form-node/index.ts":ez,"./nodes/http-node/index.ts":pz,"./nodes/image-generate/index.ts":Tz,"./nodes/image-understand/index.ts":Bz,"./nodes/intent-classify-node/index.ts":Zz,"./nodes/mcp-node/index.ts":gH,"./nodes/nl2sql-node/index.ts":PH,"./nodes/parameter-extraction-node/index.ts":HH,"./nodes/question-node/index.ts":oX,"./nodes/reply-node/index.ts":pX,"./nodes/reranker-node/index.ts":MX,"./nodes/search-document-node/index.ts":GX,"./nodes/search-knowledge-node/index.ts":nq,"./nodes/speech-to-text-node/index.ts":mq,"./nodes/start-node/index.ts":Sq,"./nodes/text-to-speech-node/index.ts":jq,"./nodes/tool-lib-node/index.ts":Kq,"./nodes/tool-node/index.ts":hY,"./nodes/user-select-node/index.ts":OY,"./nodes/variable-aggregation-node/index.ts":DY,"./nodes/variable-assign-node/index.ts":BY,"./nodes/variable-splitting/index.ts":uK}),a=uB(),r=$e(""),s=e,c={nodes:[...EI]};Zn({get:()=>s.data?s.data:c,set:x=>x});const v=$e();qr(()=>{g()});const f=x=>{v.value.render(x)},g=x=>{const E=document.querySelector("#container");E&&(v.value=new sV({plugins:[qR],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:E}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),yK(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(j=>n[j].default),vK]),v.value.setDefaultEdgeType("app-edge"),v.value.render(x||{}),v.value.graphModel.eventCenter.on("delete_edge",j=>{j.forEach(D=>{v.value.deleteEdge(D)})}),v.value.graphModel.eventCenter.on("anchor:drop",j=>{j.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var j;(j=v.value)==null||j.fitView()},500))};return t({onmousedown:x=>{x.type&&v.value.dnd.startDrag({type:x.type,properties:{...x.properties}}),x.callback&&x.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(x=>{var E;return(E=x==null?void 0:x.validate)==null?void 0:E.call(x)})),getGraphData:()=>v.value.getGraphData(),addNode:x=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:E,virtualRectCenterPositionY:j}=v.value.graphModel.getVirtualRectSize(),D=v.value.graphModel.addNode({type:x.type,properties:x.properties,x:E,y:j-v.value.graphModel.height/2});D.isSelected=!0,D.isHovered=!0,v.value.toFront(D.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:f}),(x,E)=>(Se(),en(Sr,null,[E[0]||(E[0]=K("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(Se(),lt(mK,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):kn("",!0),k(Qn(a),{"flow-id":r.value},null,8,["flow-id"])],64))}}),Yne={class:"workflow-publish-history border-l white-bg"},Kne={class:"border-b p-16-24"},Zne={class:"list-height pt-0"},Jne={class:"p-8 pt-0"},Qne={class:"flex-between"},ere={style:{"max-width":"80%"}},tre={class:"text-center"},nre=er({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=Zi(),{params:{id:a}}=n,r=Zn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),s=t,c=$e(!1),v=$e([]),f=$e("");function g(E){f.value=E.id}function b(E){s("click",E)}function _(E){s("refreshVersion",E)}function S(E){E.writeStatus=!0}function A(E){E.writeStatus=!1}function M(E,j){if(E){const D={name:E};go({type:"workflowVersion",systemType:r.value}).putWorkFlowVersion(a,j.id,D,c).then(()=>{Xd(St("common.modifySuccess")),j.writeStatus=!1,x()})}else mi(St("views.applicationWorkflow.tip.nameMessage"))}function x(){go({type:"workflowVersion",systemType:r.value}).getWorkFlowVersion(a,c).then(E=>{v.value=E.data})}return qr(()=>{x()}),(E,j)=>{const D=ee("ReadWrite"),V=ee("el-tag"),U=ee("UserFilled"),L=ee("el-icon"),F=ee("el-avatar"),X=ee("el-text"),q=ee("el-button"),H=ee("el-dropdown-item"),B=ee("RefreshLeft"),G=ee("el-dropdown-menu"),Z=ee("el-dropdown"),Q=ee("common-list"),fe=ee("el-scrollbar"),se=Hd("loading");return Se(),en("div",Yne,[K("h4",Kne,_e(E.$t("views.applicationWorkflow.setting.releaseHistory")),1),K("div",Zne,[k(fe,null,{default:N(()=>[K("div",Jne,[Ra((Se(),lt(Q,{data:v.value,class:"mt-8",onClick:b,onMouseenter:g,onMouseleave:j[1]||(j[1]=ce=>f.value="")},{default:N(({row:ce,index:be})=>[K("div",Qne,[K("div",ere,[K("h5",{class:Ds([be===0?"primary":"","flex align-center"])},[k(D,{onChange:we=>M(we,ce),data:ce.name||Qn(mw)(ce.updateTime),trigger:"manual",write:ce.writeStatus,onClose:we=>A(ce)},null,8,["onChange","data","write","onClose"]),be===0?(Se(),lt(V,{key:0,class:"default-tag ml-4"},{default:N(()=>[ot(_e(E.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):kn("",!0)],2),k(X,{type:"info",class:"color-secondary flex align-center mt-8"},{default:N(()=>[k(F,{size:20,class:"avatar-grey mr-4"},{default:N(()=>[k(L,null,{default:N(()=>[k(U)]),_:1})]),_:1}),ot(" "+_e(ce.publishUserName),1)]),_:2},1024)]),Ra(K("div",{onClick:j[0]||(j[0]=Qt(()=>{},["stop"]))},[k(Z,{trigger:"click",teleported:!1},{dropdown:N(()=>[k(G,null,{default:N(()=>[k(H,{onClick:Qt(we=>S(ce),["stop"])},{default:N(()=>[k(gr,{iconName:"app-edit",class:"color-secondary"}),ot(" "+_e(E.$t("common.edit")),1)]),_:2},1032,["onClick"]),k(H,{onClick:we=>_(ce)},{default:N(()=>[k(L,{class:"color-secondary"},{default:N(()=>[k(B)]),_:1}),ot(" "+_e(E.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:N(()=>[k(q,{text:""},{default:N(()=>[k(gr,{iconName:"app-more"})]),_:1})]),_:2},1024)],512),[[th,f.value===ce.id]])])]),empty:N(()=>[K("div",tre,[k(X,{type:"info"},{default:N(()=>[ot(_e(E.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[se,c.value]])])]),_:1})])])}}}),rre=Zd(nre,[["__scopeId","data-v-15e4f736"]]),DT=[ei.AiChat,ei.Reply,ei.ToolLib,ei.ToolLibCustom,ei.ImageUnderstandNode,ei.Application,ei.SpeechToTextNode,ei.TextToSpeechNode,ei.ImageGenerateNode];class jT{constructor(t){Ma(this,"nodes");Ma(this,"edges");Ma(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===ei.Start);if(t.length==0)throw St("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw St("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===ei.Base);if(t.length==0)throw St("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw St("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===ei.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===ei.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==ei.Start&&n.id!==ei.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${St("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(a.length==0&&!DT.includes(t.type))throw St("views.applicationWorkflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==ei.Base&&t.type!==ei.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${St("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===ei.Condition){const n=t.properties.nodeData.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.needConnect1")}${a.type}${St("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(a=>a.sourceNodeId==t.id).length==0&&!DT.includes(t.type))throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${St("views.applicationWorkflow.validate.nodeUnavailable")}`}}const ore={class:"application-workflow"},ire={class:"header border-b flex-between p-12-24 white-bg"},are={class:"flex align-center"},lre=["title"],sre={key:0},ure={key:0},cre={key:1},fre=["href"],dre={class:"ml-4"},pre={class:"flex-between"},hre={class:"flex align-center"},vre={class:"mr-12 ml-24 flex"},mre=["src"],yre=["title"],gre={class:"mr-16"},bre={class:"scrollbar-height"},jre=er({__name:"index",setup(e){gI("getApplicationDetail",()=>A);const{theme:t}=tE(),n=vI(),a=Zi(),{params:{id:r,from:s}}=a,c=Zn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),v=Zn(()=>tM.application[c.value]),f=Zn(()=>t.isDefaultTheme());let g;const b=$e(),_=$e(),S=$e(!1),A=$e(null),M=$e(!1),x=$e(!1),E=$e(!1),j=$e(""),D=$e(!1),V=$e(!1),U=$e(!1),L=$e({}),F=$e(null),X=$e([]),q=Zn(()=>US(X.value)?"?"+US(X.value):""),H=Zn(()=>{var qe;return`${window.location.origin}/chat/`+((qe=A.value)==null?void 0:qe.accessToken)+q.value});function B(){JSON.stringify(F.value)!==JSON.stringify(Be())?nE(St("common.tip"),St("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:St("views.applicationWorkflow.setting.exitSave"),cancelButtonText:St("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{Kt(!0,!0)}).catch(qe=>{qe==="cancel"&&Lt()}):Lt()}function G(){U.value||(V.value=!1,U.value=!1)}function Z(qe){qe&&fe(qe),V.value=!1,U.value=!1}function Q(qe){U.value=!0,L.value=qe,fe(qe),Ce()}function fe(qe){var _t;qe.workFlow.nodes.map(ht=>{ht.properties.noRender=!0}),A.value.workFlow=qe.workFlow,j.value=qe==null?void 0:qe.update_time,(_t=b.value)==null||_t.clearGraphData(),Nv(()=>{var ht;(ht=b.value)==null||ht.render(qe.workFlow)})}function se(){Yt(),D.value&&xe(),V.value=!1,U.value=!1}function ce(){V.value=!0}function be(qe){qe?xe():Ce(),localStorage.setItem("workflowAutoSave",qe.toString())}function we(qe){M.value=!1}function me(qe){M.value=!1}function He(){M.value=!1}const Je=()=>{var qe;(qe=b.value)==null||qe.validate().then(()=>{const _t=Be(),ht=new jT(_t);try{ht.is_valid()}catch(wt){mi(wt.toString());return}go({type:"application",systemType:c.value}).putApplication(r,{workFlow:_t},S).then(()=>go({type:"application",systemType:c.value}).publish(r,{},S)).then(wt=>{A.value.name=wt.data.name,Xd(St("views.application.tip.publishSuccess"))}).catch(wt=>{var Xt,nt,fn,Ue;const rn=wt.node,an=wt.errMessage;if(typeof an=="string")mi(((Xt=wt.node.properties)==null?void 0:Xt.nodeName)+` ${St("views.applicationWorkflow.node").toLowerCase()} `+an.toLowerCase());else{const _n=Object.keys(an);mi(((nt=rn.properties)==null?void 0:nt.nodeName)+` ${St("views.applicationWorkflow.node").toLowerCase()} `+((Ue=(fn=an[_n[0]])==null?void 0:fn[0])==null?void 0:Ue.message.toLowerCase()))}})}).catch(_t=>{var rn,an,Xt,nt;const ht=_t.node,wt=_t.errMessage;if(typeof wt=="string")mi(((rn=_t.node.properties)==null?void 0:rn.nodeName)+` ${St("views.applicationWorkflow.node")}，`+wt);else{const fn=Object.keys(wt);mi(((an=ht.properties)==null?void 0:an.nodeName)+` ${St("views.applicationWorkflow.node")}，`+((nt=(Xt=wt[fn[0]])==null?void 0:Xt[0])==null?void 0:nt.message))}})},yt=()=>{var qe;(qe=b.value)==null||qe.validate().then(()=>{var wt;const _t=Be(),ht=new jT(_t);try{ht.is_valid(),A.value={...A.value,type:"WORK_FLOW",...(wt=ht.get_base_node())==null?void 0:wt.properties.nodeData,workFlow:Be()},x.value=!0}catch(rn){mi(rn.toString())}}).catch(_t=>{var rn,an,Xt,nt;const ht=_t.node,wt=_t.errMessage;if(typeof wt=="string")mi(((rn=_t.node.properties)==null?void 0:rn.nodeName)+` ${St("views.applicationWorkflow.node")}，`+wt);else{const fn=Object.keys(wt);mi(((an=ht.properties)==null?void 0:an.nodeName)+` ${St("views.applicationWorkflow.node")}，`+((nt=(Xt=wt[fn[0]])==null?void 0:Xt[0])==null?void 0:nt.message))}})};function Be(){var qe;return(qe=b.value)==null?void 0:qe.getGraphData()}function Yt(){go({type:"application",systemType:c.value}).getApplicationDetail(r).then(qe=>{var _t,ht,wt,rn,an;(_t=qe.data)==null||_t.workFlow.nodes.map(Xt=>{Xt.properties.noRender=!0}),A.value=qe.data,A.value.stt_model_id=qe.data.stt_model,A.value.ttsModelId=qe.data.tts_model,A.value.ttsType=qe.data.ttsType,j.value=(ht=qe.data)==null?void 0:ht.update_time,(rn=(wt=A.value.workFlow)==null?void 0:wt.nodes)==null||rn.filter(Xt=>Xt.id==="base-node").map(Xt=>{X.value=Xt.properties.api_input_field_list?Xt.properties.api_input_field_list.map(nt=>({name:nt.variable,value:nt.default_value})):Xt.properties.inputFieldList?Xt.properties.inputFieldList.filter(nt=>nt.assignment_method==="api_input").map(nt=>({name:nt.variable,value:nt.default_value})):[]}),go({type:"application",systemType:c.value}).getAccessToken(r,S).then(Xt=>{A.value={...A.value,...Xt.data}}),(an=b.value)==null||an.clearGraphData(),Nv(()=>{var Xt;(Xt=b.value)==null||Xt.render(A.value.workFlow),F.value=Be()}),Tf([Pl.IS_EE,Pl.IS_PE],"OR")&&go({type:"application",systemType:c.value}).getApplicationSetting(r).then(Xt=>{A.value={...A.value,...Xt.data}})})}function Kt(qe,_t){const ht={workFlow:Be()};S.value=_t||!1,go({type:"application",systemType:c.value}).putApplication(r,ht).then(()=>{j.value=new Date,qe&&(F.value=Be(),Xd(St("common.saveSuccess")),_t&&Lt())}).catch(()=>{S.value=!1})}const Lt=()=>a.path.includes("workspace")?n.push({path:Ve()}):n.push({path:An()}),An=()=>Tf([_u.ADMIN,Ga.RESOURCE_APPLICATION_OVERVIEW_READ],"OR")?`/application/${s}/${r}/WORK_FLOW/overview`:Tf([_u.ADMIN,Ga.RESOURCE_APPLICATION_ACCESS_READ],"OR")?`/application/${s}/${r}/WORK_FLOW/access`:Tf([_u.ADMIN,Ga.RESOURCE_APPLICATION_CHAT_USER_READ],"OR")?`/application/${s}/${r}/WORK_FLOW/chat-user`:Tf([_u.ADMIN,Ga.RESOURCE_APPLICATION_CHAT_LOG_READ],"OR")?`/application/${s}/${r}/WORK_FLOW/chat-log`:"/system/resource-management/application",Ve=()=>Tf([new Ud([_u.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),_u.WORKSPACE_MANAGE.getWorkspaceRole,Ga.APPLICATION_OVERVIEW_READ.getWorkspacePermissionWorkspaceManageRole,Ga.APPLICATION_OVERVIEW_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${s}/${r}/WORK_FLOW/overview`:Tf([new Ud([_u.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new Ud([_u.WORKSPACE_MANAGE.getWorkspaceRole],[Ga.APPLICATION_ACCESS_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new Ud([],[Ga.APPLICATION_ACCESS_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${s}/${r}/WORK_FLOW/access`:Tf([new Ud([_u.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new Ud([_u.WORKSPACE_MANAGE.getWorkspaceRole],[Ga.APPLICATION_CHAT_USER_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new Ud([],[Ga.APPLICATION_CHAT_USER_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${s}/${r}/WORK_FLOW/chat-user`:Tf([new Ud([_u.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),Ga.APPLICATION_CHAT_LOG_READ.getWorkspacePermissionWorkspaceManageRole,Ga.APPLICATION_CHAT_LOG_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${s}/${r}/WORK_FLOW/chat-log`:"/application",xe=()=>{g=setInterval(()=>{Kt()},6e4)},Ce=()=>{g&&clearInterval(g)};return qr(()=>{Yt();const qe=localStorage.getItem("workflowAutoSave");D.value=qe==="true",D.value&&xe()}),mI(()=>{var qe;Ce(),(qe=b.value)==null||qe.clearGraphData()}),(qe,_t)=>{var $n,_o,Me;const ht=ee("el-text"),wt=ee("el-button"),rn=ee("el-divider"),an=ee("Close"),Xt=ee("el-icon"),nt=ee("el-dropdown-item"),fn=ee("el-switch"),Ue=ee("el-dropdown-menu"),_n=ee("el-dropdown"),Jn=ee("el-collapse-transition"),ie=ee("el-avatar"),tr=ee("LogoIcon"),Rr=ee("AiChat"),Gr=Hd("click-outside"),co=Hd("loading");return Ra((Se(),en("div",ore,[K("div",ire,[K("div",are,[k(yI,{onClick:B}),K("h4",{class:"ellipsis",style:{"max-width":"300px"},title:($n=A.value)==null?void 0:$n.name},_e((_o=A.value)==null?void 0:_o.name),9,lre),V.value&&U.value?(Se(),en("div",sre,[k(ht,{type:"info",class:"ml-16 color-secondary"},{default:N(()=>[ot(_e(qe.$t("views.applicationWorkflow.info.previewVersion"))+" "+_e(L.value.name||Qn(mw)(L.value.update_time)),1)]),_:1})])):j.value?(Se(),lt(ht,{key:1,type:"info",class:"ml-16 color-secondary"},{default:N(()=>[ot(_e(qe.$t("views.applicationWorkflow.info.saveTime"))+_e(Qn(mw)(j.value)),1)]),_:1})):kn("",!0)]),V.value&&U.value?(Se(),en("div",ure,[k(wt,{type:"primary",class:"mr-8",onClick:_t[0]||(_t[0]=Ke=>Z())},{default:N(()=>[ot(_e(qe.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),k(rn,{direction:"vertical"}),k(wt,{text:"",onClick:se},{default:N(()=>[k(Xt,null,{default:N(()=>[k(an)]),_:1})]),_:1})])):(Se(),en("div",cre,[k(wt,{icon:"Plus",onClick:_t[1]||(_t[1]=Ke=>M.value=!M.value)},{default:N(()=>[ot(_e(qe.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),v.value.debug(Qn(r))?(Se(),lt(wt,{key:0,onClick:yt,disabled:x.value},{default:N(()=>[k(gr,{iconName:"app-debug-outlined",class:"mr-4"}),ot(" "+_e(qe.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"])):kn("",!0),k(wt,{onClick:_t[2]||(_t[2]=Ke=>Kt(!0))},{default:N(()=>[k(gr,{iconName:"app-save-outlined",class:"mr-4"}),ot(" "+_e(qe.$t("common.save")),1)]),_:1}),k(wt,{type:"primary",onClick:Je},{default:N(()=>[ot(_e(qe.$t("views.application.operation.publish")),1)]),_:1}),k(_n,{trigger:"click"},{dropdown:N(()=>[k(Ue,null,{default:N(()=>[K("a",{href:H.value,target:"_blank"},[k(nt,null,{default:N(()=>[k(gr,{iconName:"app-create-chat",class:"color-secondary"}),ot(" "+_e(qe.$t("views.application.operation.toChat")),1)]),_:1})],8,fre),k(nt,{onClick:ce},{default:N(()=>[k(gr,{iconName:"app-history-outlined",class:"color-secondary"}),ot(" "+_e(qe.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),k(nt,null,{default:N(()=>[k(gr,{iconName:"app-save-outlined",class:"color-secondary"}),ot(" "+_e(qe.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),K("div",dre,[k(fn,{size:"small",modelValue:D.value,"onUpdate:modelValue":_t[4]||(_t[4]=Ke=>D.value=Ke),onChange:be},null,8,["modelValue"])])]),_:1})]),_:1})]),default:N(()=>[k(wt,{text:"",onClick:_t[3]||(_t[3]=Qt(()=>{},["stop"])),class:"ml-8 mt-4"},{default:N(()=>[k(gr,{iconName:"app-more",class:"rotate-90"})]),_:1})]),_:1})]))]),k(Jn,null,{default:N(()=>[Ra(k(Nk,{show:M.value,id:Qn(r),onClickNodes:we,onOnmousedown:me,workflowRef:b.value},null,8,["show","id","workflowRef"]),[[Gr,He]])]),_:1}),K("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:_},[A.value?(Se(),lt(qne,{key:0,ref_key:"workflowRef",ref:b,data:(Me=A.value)==null?void 0:Me.workFlow},null,8,["data"])):kn("",!0)],512),k(Jn,null,{default:N(()=>{var Ke,Ie,ut;return[x.value?(Se(),en("div",{key:0,class:Ds(["workflow-debug-container",E.value?"enlarge":""])},[K("div",{class:Ds(["workflow-debug-header",f.value?"":"custom-header"])},[K("div",pre,[K("div",hre,[K("div",vre,[Qn(dw)((Ke=A.value)==null?void 0:Ke.icon)?(Se(),lt(ie,{key:0,shape:"square",size:32,style:{background:"none"}},{default:N(()=>{var nn;return[K("img",{src:Qn(Qp)((nn=A.value)==null?void 0:nn.icon),alt:""},null,8,mre)]}),_:1})):(Se(),lt(tr,{key:1,height:"32px"}))]),K("h4",{class:"ellipsis",style:{"max-width":"270px"},title:(Ie=A.value)==null?void 0:Ie.name},_e(((ut=A.value)==null?void 0:ut.name)||qe.$t("views.application.form.appName.label")),9,yre)]),K("div",gre,[k(wt,{link:"",onClick:_t[5]||(_t[5]=nn=>E.value=!E.value)},{default:N(()=>[k(gr,{iconName:E.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),k(wt,{link:"",onClick:_t[6]||(_t[6]=nn=>x.value=!1)},{default:N(()=>[k(Xt,{size:20,class:"color-secondary"},{default:N(()=>[k(an)]),_:1})]),_:1})])])],2),K("div",bre,[k(Rr,{"application-details":A.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):kn("",!0)]}),_:1}),V.value?Ra((Se(),lt(rre,{key:0,onClick:Q,onRefreshVersion:Z},null,512)),[[Gr,G]]):kn("",!0)])),[[co,S.value]])}}});export{jre as default};
