import{aJ as C,aK as O,aP as L,aR as l,aS as p,d0 as E,aL as h,aU as k,aM as a,aT as m,cI as v,cG as F,cH as z,cU as G,aX as A,aN as N,aO as T,cM as R,cP as J,aQ as Q,ex as W,cE as V,cT as X,dI as j,aV as H,cK as U,dT as x,dx as Y,c_ as q,eb as Z}from"./admin-BK8mZVyy.js";const ee={key:0,class:"sidebar-item"},ae={key:1},te=C({__name:"SidebarItem",props:{menu:{},activeMenu:{}},setup(S){const n=S,i=O(),c=L(),{params:{id:d,type:t,from:f}}=c;function y(){return R(t)?n.menu.name!=="AppHitTest":!0}function w(e){R(t)&&(e==null?void 0:e.name)==="AppSetting"&&i.push({path:`/application/${f}/${d}/workflow`})}const o=l(()=>{var e,r,u,b,g;return n.activeMenu===n.menu.path?((e=n.menu.meta)==null?void 0:e.iconActive)||((u=(r=n.menu)==null?void 0:r.meta)==null?void 0:u.icon):(g=(b=n.menu)==null?void 0:b.meta)==null?void 0:g.icon});return(e,r)=>{var I,M;const u=p("AppIcon"),b=p("el-icon"),g=p("sidebar-item",!0),P=p("el-sub-menu"),_=p("el-menu-item"),D=E("hasPermission");return(!e.menu.meta||!e.menu.meta.hidden)&&y()?(a(),h("div",ee,[(I=e.menu)!=null&&I.children&&((M=e.menu)==null?void 0:M.children.length)>0?(a(),m(P,{key:0,index:e.menu.path,"popper-class":"sidebar-container-popper"},{title:v(()=>{var s;return[A(b,null,{default:v(()=>[e.menu.meta&&e.menu.meta.icon?(a(),m(u,{key:0,iconName:o.value,class:"sidebar-icon"},null,8,["iconName"])):k("",!0)]),_:1}),N("span",null,T(e.$t((s=e.menu.meta)==null?void 0:s.title)),1)]}),default:v(()=>{var s;return[(a(!0),h(F,null,z((s=e.menu)==null?void 0:s.children,($,B)=>{var K;return G((a(),m(g,{key:B,menu:$,activeMenu:e.activeMenu},null,8,["menu","activeMenu"])),[[D,(K=$.meta)==null?void 0:K.permission]])}),128))]}),_:1},8,["index"])):(a(),m(_,{key:1,ref:"subMenu",index:e.menu.path,"popper-class":"sidebar-popper",onClick:r[0]||(r[0]=s=>w(e.menu))},{title:v(()=>{var s;return[e.menu.meta&&e.menu.meta.icon?(a(),m(u,{key:0,iconName:o.value,class:"sidebar-icon"},null,8,["iconName"])):k("",!0),e.menu.meta&&e.menu.meta.title?(a(),h("span",ae,T(e.$t((s=e.menu.meta)==null?void 0:s.title)),1)):k("",!0)]}),_:1},8,["index"]))])):k("",!0)}}}),ne=J(te,[["__scopeId","data-v-0d71bc99"]]),se={class:"breadcrumb ml-4 mt-4 mb-12 flex"},oe={class:"flex align-center"},re=["src"],ue=["title"],ie=C({__name:"index",setup(S){const{common:n}=Q(),i=L(),{meta:{activeMenu:c},params:{id:d,folderId:t},query:{isShared:f}}=i,y=l(()=>i.path.includes("shared")?"systemShare":i.path.includes("resource-management")?"systemManage":"workspace"),w=l(()=>t==="share"||f==="true");W((_,D)=>{n.saveBreadcrumb(null)});const o=V(!1),e=V(null),r=l(()=>c.includes("application")),u=l(()=>c.includes("knowledge")),b=l(()=>i.path.includes("shared")?"/system/shared"+c:i.path.includes("resource-management")?"/system/resource-management"+c:c);function g(){o.value=!0,q({type:"knowledge",isShared:w.value,systemType:y.value}).getKnowledgeDetail(d).then(_=>{e.value=_.data,o.value=!1}).catch(()=>{o.value=!1})}function P(){o.value=!0,q({type:"application",systemType:y.value}).getApplicationDetail(d).then(_=>{e.value=_.data,o.value=!1}).catch(()=>{o.value=!1})}return X(()=>{u.value?g():r.value&&P()}),(_,D)=>{var M,s,$;const I=p("el-avatar");return a(),h("div",se,[A(j,{to:b.value,class:"mt-4"},null,8,["to"]),N("div",oe,[r.value?(a(),m(I,{key:0,shape:"square",size:24,style:{background:"none"},class:"mr-8"},{default:v(()=>{var B;return[N("img",{src:H(U)((B=e.value)==null?void 0:B.icon,H(U)("./favicon.ico")),alt:""},null,8,re)]}),_:1})):r.value?(a(),m(x,{key:1,height:"28px",style:{width:"28px",height:"28px",display:"block"},class:"mr-8"})):u.value?(a(),m(Y,{key:2,type:(M=e.value)==null?void 0:M.type,class:"mr-8"},null,8,["type"])):k("",!0),N("div",{class:"ellipsis",title:(s=e.value)==null?void 0:s.name},T(($=e.value)==null?void 0:$.name),9,ue)])])}}}),ce=J(ie,[["__scopeId","data-v-52e69a04"]]),le={class:"sidebar p-8"},me={key:0},de=C({__name:"index",setup(S){const n=L(),i=l(()=>{const{meta:t}=n;return t==null?void 0:t.breadcrumb}),c=l(()=>{const{meta:t}=n;return Z(t.parentPath,t.parentName)}),d=l(()=>{const{path:t,meta:f}=n;return f.active||t});return(t,f)=>{const y=p("el-menu"),w=p("el-scrollbar"),o=E("hasPermission");return a(),h("div",le,[i.value?(a(),h("div",me,[A(ce)])):k("",!0),A(w,{"wrap-class":"scrollbar-wrapper"},{default:v(()=>[A(y,{"default-active":d.value,router:""},{default:v(()=>[(a(!0),h(F,null,z(c.value,(e,r)=>{var u;return G((a(),m(ne,{key:r,menu:e,activeMenu:d.value},null,8,["menu","activeMenu"])),[[o,(u=e.meta)==null?void 0:u.permission]])}),128))]),_:1},8,["default-active"])]),_:1})])}}});export{de as _};
