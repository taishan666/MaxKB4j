import{aJ as h,cE as n,db as D,d4 as u,cF as E,cT as V,eo as B,aS as p,d0 as T,cU as _,aT as $,aM as N,cI as i,aX as d,d7 as q,c_ as S,c$ as F}from"./admin-DL2q8v1-.js";const C=h({__name:"BaseForm",props:{data:{},apiType:{}},setup(f,{expose:b}){const t=f,l=n({name:"",desc:"",embeddingModelId:""}),g=n(""),M=D({name:[{required:!0,message:u("views.knowledge.form.knowledgeName.requiredMessage"),trigger:"blur"}],desc:[{required:!0,message:u("views.knowledge.form.knowledgeDescription.requiredMessage"),trigger:"blur"}],embeddingModelId:[{required:!0,message:u("views.knowledge.form.EmbeddingModel.requiredMessage"),trigger:"change"}]}),r=n(),s=n(!1),c=n([]);E(()=>t.data,e=>{e&&JSON.stringify(e)!=="{}"&&(l.value.name=e.name,l.value.desc=e.desc,l.value.embeddingModelId=e.embeddingModelId,g.value=e.workspaceId||"",v())},{immediate:!0});function k(){if(r.value)return r.value.validate(e=>e)}function v(){s.value=!0;const e=t.apiType==="systemManage"?{modelType:"EMBEDDING",workspaceId:g.value}:{modelType:"EMBEDDING"};S({type:"model",systemType:t.apiType}).getSelectModelList(e).then(o=>{c.value=F.groupBy(o==null?void 0:o.data,"provider"),s.value=!1}).catch(()=>{s.value=!1})}return V(()=>{t.apiType!=="systemManage"&&v()}),B(()=>{var e;l.value={name:"",desc:"",embeddingModelId:""},(e=r.value)==null||e.clearValidate()}),b({validate:k,form:l}),(e,o)=>{const w=p("el-input"),m=p("el-form-item"),y=p("el-form"),I=T("loading");return _((N(),$(y,{ref_key:"FormRef",ref:r,model:l.value,rules:M,"label-position":"top","require-asterisk-position":"right"},{default:i(()=>[d(m,{label:e.$t("views.knowledge.form.knowledgeName.label"),prop:"name"},{default:i(()=>[d(w,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.name=a),placeholder:e.$t("views.knowledge.form.knowledgeName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:o[1]||(o[1]=a=>l.value.name=l.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(m,{label:e.$t("views.knowledge.form.knowledgeDescription.label"),prop:"desc"},{default:i(()=>[d(w,{modelValue:l.value.desc,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.desc=a),type:"textarea",placeholder:e.$t("views.knowledge.form.knowledgeDescription.placeholder"),maxlength:"256","show-word-limit":"",autosize:{minRows:3},onBlur:o[3]||(o[3]=a=>l.value.desc=l.value.desc.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(m,{label:e.$t("views.knowledge.form.EmbeddingModel.label"),prop:"embeddingModelId"},{default:i(()=>[d(q,{modelValue:l.value.embeddingModelId,"onUpdate:modelValue":o[4]||(o[4]=a=>l.value.embeddingModelId=a),placeholder:e.$t("views.knowledge.form.EmbeddingModel.placeholder"),options:c.value,"model-type":"EMBEDDING",showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[I,s.value]])}}});export{C as _};
