var XD=Object.defineProperty;var qD=(e,t,n)=>t in e?XD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ka=(e,t,n)=>qD(e,typeof t!="symbol"?t+"":t,n);import{aY as kv,aZ as Os,a_ as Vr,a$ as IS,b0 as ah,b1 as Jm,b2 as zd,b3 as lh,b4 as IT,b5 as Cu,b6 as Lu,af as Oi,b7 as YD,b8 as mc,b9 as Zw,ba as KD,bb as Qm,bc as Du,bd as ey,be as ZD,bf as Lv,bg as u_,aE as Ms,bh as JD,bi as uh,bj as LT,bk as sh,bl as Kd,z as Jw,bm as oo,bn as s_,bo as ty,bp as Ss,bq as Lo,br as Rf,bs as yc,bt as $v,bu as ny,bv as ks,bw as Ra,bx as eo,by as c_,bz as QD,bA as $T,bB as Df,bC as FT,bD as UT,bE as hw,bF as aa,ag as xs,bG as ej,bH as tj,bI as f_,bJ as VT,bK as ch,bL as BT,ab as Qw,bM as Fv,A as Uv,bN as Bm,bO as ry,ae as WT,bP as GT,bQ as nj,bR as Pv,bS as rj,bT as zT,bU as HT,bV as XT,bW as oj,bX as ij,bY as aj,bZ as lj,b_ as uj,b$ as sj,c0 as cj,c1 as Cg,c2 as fj,c3 as dj,c4 as qT,c5 as YT,c6 as KT,c7 as ZT,c8 as eE,c9 as pj,ca as oy,cb as JT,cc as hj,cd as QT,ce as eM,cf as vj,cg as mj,ch as yj,ci as Qp,ad as gj,cj as _j,ck as bj,aF as wj,cl as Ej,cm as Oj,cn as Sj,co as xj,cp as Aj,cq as Tj,cr as Mj,aa as kj,ah as Pj,cs as Nj,aG as Rj,ct as Cj,cu as Dj,cv as jj,cw as Ij,cx as Lj,cy as $j,a9 as Fj,ai as Uj,cz as Vj,p as Bj,cA as Wj,cB as Gj,cC as zj,cD as Hj,aJ as Jn,cE as Le,cF as eh,aS as Z,aL as tn,aM as be,cG as br,aX as k,aN as J,aT as et,cH as Jr,cI as R,aU as En,aV as Qn,cJ as vw,cK as Pf,cL as LS,aO as _e,cM as tE,cN as ot,cO as nn,cP as Zd,cQ as $u,aP as Zi,aQ as d_,cR as Xj,aR as Yn,cS as tM,cT as Hr,cU as va,cV as qj,cW as th,cX as Wm,cY as Gm,cZ as $S,c_ as ho,c$ as ke,d0 as Hd,aW as Es,d1 as Yj,d2 as mw,d3 as li,d4 as Ot,d5 as nE,d6 as ei,d7 as Kj,d8 as Zj,d9 as Jj,da as Qj,db as nh,dc as co,dd as pc,de as ou,Q as eI,df as fh,dg as Nv,dh as tI,di as nI,dj as nM,dk as rM,dl as rI,dm as oI,dn as iI,dp as aI,dq as lI,dr as uI,ds as rE,dt as sI,du as cI,dv as Rv,dw as fI,dx as Xd,dy as fl,dz as dI,dA as FS,dB as pI,dC as hI,dD as vI,dE as mI,dF as oE,dG as iE,dH as yI,dI as yw,aK as gI,dJ as US,dK as _I,dL as Tf,dM as Pl,dN as _s,dO as Ga,dP as Ud,dQ as bI}from"./admin-48J_jRcQ.js";import{g as wI,t as VS,a as BS,i as gc,n as EI,c as OI,b as SI}from"./data-BuL-KG3k.js";import{_ as Vv,a as xI,b as oM,c as iM,d as AI}from"./ReasoningParamSettingDialog.vue_vue_type_script_setup_true_lang-BnJuYoWs.js";import{b as aM,c as dh,v as Bv,d as TI,e as MI,g as lM,a as kI,f as PI,r as NI,h as RI}from"./reduce-CfnSLhwN.js";import{h as CI,i as uM,j as DI,k as jI,l as II,n as LI,o as $I,p as FI,z as UI,q as VI,s as BI,f as WI,a as GI,m as zI,b as HI,d as XI,c as qI,e as YI,g as KI,r as ZI,u as JI}from"./zipObject-Jv5zh51j.js";import{l as QI,_ as e8}from"./vue-draggable-plus-DOVtu8Tp.js";import{_ as t8}from"./FieldFormDialog.vue_vue_type_script_setup_true_lang-Bg32Yuc1.js";import{_ as fn}from"./defineProperty-DbXIQDXj.js";import"./typeof-QjJsDpFa.js";var n8=NaN;function WS(e){return typeof e=="number"?e:kv(e)?n8:+e}function p_(e,t){return function(n,a){var r;if(n===void 0&&a===void 0)return t;if(n!==void 0&&(r=n),a!==void 0){if(r===void 0)return a;typeof n=="string"||typeof a=="string"?(n=Os(n),a=Os(a)):(n=WS(n),a=WS(a)),r=e(n,a)}return r}}var r8=p_(function(e,t){return e+t},0),o8="Expected a function";function i8(e,t){if(typeof t!="function")throw new TypeError(o8);return e=Vr(e),function(){if(--e<1)return t.apply(this,arguments)}}var Dg=IS&&new IS,sM=Dg?function(e,t){return Dg.set(e,t),e}:ah;function zm(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Jm(e.prototype),a=e.apply(n,t);return zd(a)?a:n}}var a8=1;function l8(e,t,n){var a=t&a8,r=zm(e);function u(){var c=this&&this!==lh&&this instanceof u?r:e;return c.apply(a?n:this,arguments)}return u}var u8=Math.max;function cM(e,t,n,a){for(var r=-1,u=e.length,c=n.length,v=-1,f=t.length,g=u8(u-c,0),_=Array(f+g),b=!a;++v<f;)_[v]=t[v];for(;++r<c;)(b||r<u)&&(_[n[r]]=e[r]);for(;g--;)_[v++]=e[r++];return _}var s8=Math.max;function fM(e,t,n,a){for(var r=-1,u=e.length,c=-1,v=n.length,f=-1,g=t.length,_=s8(u-v,0),b=Array(_+g),O=!a;++r<_;)b[r]=e[r];for(var x=r;++f<g;)b[x+f]=t[f];for(;++c<v;)(O||r<u)&&(b[x+n[c]]=e[r++]);return b}function c8(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function h_(){}var f8=4294967295;function Qr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f8,this.__views__=[]}Qr.prototype=Jm(h_.prototype);Qr.prototype.constructor=Qr;var aE=Dg?function(e){return Dg.get(e)}:IT,wv={},d8=Object.prototype,p8=d8.hasOwnProperty;function bg(e){for(var t=e.name+"",n=wv[t],a=p8.call(wv,t)?n.length:0;a--;){var r=n[a],u=r.func;if(u==null||u==e)return r.name}return t}function ju(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}ju.prototype=Jm(h_.prototype);ju.prototype.constructor=ju;function dM(e){if(e instanceof Qr)return e.clone();var t=new ju(e.__wrapped__,e.__chain__);return t.__actions__=Cu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var h8=Object.prototype,v8=h8.hasOwnProperty;function fe(e){if(Lu(e)&&!Oi(e)&&!(e instanceof Qr)){if(e instanceof ju)return e;if(v8.call(e,"__wrapped__"))return dM(e)}return new ju(e)}fe.prototype=h_.prototype;fe.prototype.constructor=fe;function gw(e){var t=bg(e),n=fe[t];if(typeof n!="function"||!(t in Qr.prototype))return!1;if(e===n)return!0;var a=aE(n);return!!a&&e===a[0]}var pM=YD(sM),m8=/\{\n\/\* \[wrapped with (.+)\] \*/,y8=/,? & /;function g8(e){var t=e.match(m8);return t?t[1].split(y8):[]}var _8=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function b8(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(_8,`{
/* [wrapped with `+t+`] */
`)}var w8=1,E8=2,O8=8,S8=16,x8=32,A8=64,T8=128,M8=256,k8=512,P8=[["ary",T8],["bind",w8],["bindKey",E8],["curry",O8],["curryRight",S8],["flip",k8],["partial",x8],["partialRight",A8],["rearg",M8]];function N8(e,t){return mc(P8,function(n){var a="_."+n[0];t&n[1]&&!Zw(e,a)&&e.push(a)}),e.sort()}function hM(e,t,n){var a=t+"";return KD(e,b8(a,N8(g8(a),n)))}var R8=4,C8=8,GS=32,zS=64;function vM(e,t,n,a,r,u,c,v,f,g){var _=t&C8,b=_?c:void 0,O=_?void 0:c,x=_?u:void 0,M=_?void 0:u;t|=_?GS:zS,t&=~(_?zS:GS),t&R8||(t&=-4);var A=[e,t,r,x,b,M,O,v,f,g],E=n.apply(void 0,A);return gw(e)&&pM(E,A),E.placeholder=a,hM(E,e,t)}function Wv(e){var t=e;return t.placeholder}var D8=Math.min;function j8(e,t){for(var n=e.length,a=D8(t.length,n),r=Cu(e);a--;){var u=t[a];e[a]=Qm(u,n)?r[u]:void 0}return e}var HS="__lodash_placeholder__";function qd(e,t){for(var n=-1,a=e.length,r=0,u=[];++n<a;){var c=e[n];(c===t||c===HS)&&(e[n]=HS,u[r++]=n)}return u}var I8=1,L8=2,$8=8,F8=16,U8=128,V8=512;function v_(e,t,n,a,r,u,c,v,f,g){var _=t&U8,b=t&I8,O=t&L8,x=t&($8|F8),M=t&V8,A=O?void 0:zm(e);function E(){for(var D=arguments.length,j=Array(D),U=D;U--;)j[U]=arguments[U];if(x)var F=Wv(E),I=c8(j,F);if(a&&(j=cM(j,a,r,x)),u&&(j=fM(j,u,c,x)),D-=I,x&&D<g){var V=qd(j,F);return vM(e,t,v_,E.placeholder,n,j,V,v,f,g-D)}var Y=b?n:this,K=O?Y[e]:e;return D=j.length,v?j=j8(j,v):M&&D>1&&j.reverse(),_&&f<D&&(j.length=f),this&&this!==lh&&this instanceof E&&(K=A||zm(K)),K.apply(Y,j)}return E}function B8(e,t,n){var a=zm(e);function r(){for(var u=arguments.length,c=Array(u),v=u,f=Wv(r);v--;)c[v]=arguments[v];var g=u<3&&c[0]!==f&&c[u-1]!==f?[]:qd(c,f);if(u-=g.length,u<n)return vM(e,t,v_,r.placeholder,void 0,c,g,void 0,void 0,n-u);var _=this&&this!==lh&&this instanceof r?a:e;return Du(_,this,c)}return r}var W8=1;function G8(e,t,n,a){var r=t&W8,u=zm(e);function c(){for(var v=-1,f=arguments.length,g=-1,_=a.length,b=Array(_+f),O=this&&this!==lh&&this instanceof c?u:e;++g<_;)b[g]=a[g];for(;f--;)b[g++]=arguments[++v];return Du(O,r?n:this,b)}return c}var XS="__lodash_placeholder__",S1=1,z8=2,H8=4,qS=8,Em=128,YS=256,X8=Math.min;function q8(e,t){var n=e[1],a=t[1],r=n|a,u=r<(S1|z8|Em),c=a==Em&&n==qS||a==Em&&n==YS&&e[7].length<=t[8]||a==(Em|YS)&&t[7].length<=t[8]&&n==qS;if(!(u||c))return e;a&S1&&(e[2]=t[2],r|=n&S1?0:H8);var v=t[3];if(v){var f=e[3];e[3]=f?cM(f,v,t[4]):v,e[4]=f?qd(e[3],XS):t[4]}return v=t[5],v&&(f=e[5],e[5]=f?fM(f,v,t[6]):v,e[6]=f?qd(e[5],XS):t[6]),v=t[7],v&&(e[7]=v),a&Em&&(e[8]=e[8]==null?t[8]:X8(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var Y8="Expected a function",KS=1,K8=2,ZS=8,JS=16,QS=32,Z8=64,ex=Math.max;function Lf(e,t,n,a,r,u,c,v){var f=t&K8;if(!f&&typeof e!="function")throw new TypeError(Y8);var g=a?a.length:0;if(g||(t&=-97,a=r=void 0),c=c===void 0?c:ex(Vr(c),0),v=v===void 0?v:Vr(v),g-=r?r.length:0,t&Z8){var _=a,b=r;a=r=void 0}var O=f?void 0:aE(e),x=[e,t,n,a,r,_,b,u,c,v];if(O&&q8(x,O),e=x[0],t=x[1],n=x[2],a=x[3],r=x[4],v=x[9]=x[9]===void 0?f?0:e.length:ex(x[9]-g,0),!v&&t&(ZS|JS)&&(t&=-25),!t||t==KS)var M=l8(e,t,n);else t==ZS||t==JS?M=B8(e,t,v):(t==QS||t==(KS|QS))&&!r.length?M=G8(e,t,n,a):M=v_.apply(void 0,x);var A=O?sM:pM;return hM(A(M,x),e,t)}var J8=128;function mM(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,Lf(e,J8,void 0,void 0,void 0,void 0,t)}var Q8=Object.prototype,eL=Q8.hasOwnProperty,tL=ey(function(e,t){if(ZD(t)||Lv(t)){u_(t,Ms(t),e);return}for(var n in t)eL.call(t,n)&&JD(e,n,t[n])}),nL=ey(function(e,t){u_(t,uh(t),e)}),_w=ey(function(e,t,n,a){u_(t,uh(t),e,a)}),rL=ey(function(e,t,n,a){u_(t,Ms(t),e,a)});function lE(e,t){for(var n=-1,a=t.length,r=Array(a),u=e==null;++n<a;)r[n]=u?void 0:LT(e,t[n]);return r}var oL=sh(lE),iL="[object DOMException]",aL="[object Error]";function uE(e){if(!Lu(e))return!1;var t=Kd(e);return t==aL||t==iL||typeof e.message=="string"&&typeof e.name=="string"&&!Jw(e)}var yM=oo(function(e,t){try{return Du(e,void 0,t)}catch(n){return uE(n)?n:new Error(n)}}),lL="Expected a function";function gM(e,t){var n;if(typeof t!="function")throw new TypeError(lL);return e=Vr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var uL=1,sL=32,m_=oo(function(e,t,n){var a=uL;if(n.length){var r=qd(n,Wv(m_));a|=sL}return Lf(e,a,t,n,r)});m_.placeholder={};var cL=sh(function(e,t){return mc(t,function(n){n=s_(n),ty(e,n,m_(e[n],e))}),e}),fL=1,dL=2,pL=32,sE=oo(function(e,t,n){var a=fL|dL;if(n.length){var r=qd(n,Wv(sE));a|=pL}return Lf(t,a,e,n,r)});sE.placeholder={};function Jd(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:Ss(e,t,n)}var hL="\\ud800-\\udfff",vL="\\u0300-\\u036f",mL="\\ufe20-\\ufe2f",yL="\\u20d0-\\u20ff",gL=vL+mL+yL,_L="\\ufe0e\\ufe0f",bL="\\u200d",wL=RegExp("["+bL+hL+gL+_L+"]");function Gv(e){return wL.test(e)}function EL(e){return e.split("")}var _M="\\ud800-\\udfff",OL="\\u0300-\\u036f",SL="\\ufe20-\\ufe2f",xL="\\u20d0-\\u20ff",AL=OL+SL+xL,TL="\\ufe0e\\ufe0f",ML="["+_M+"]",bw="["+AL+"]",ww="\\ud83c[\\udffb-\\udfff]",kL="(?:"+bw+"|"+ww+")",bM="[^"+_M+"]",wM="(?:\\ud83c[\\udde6-\\uddff]){2}",EM="[\\ud800-\\udbff][\\udc00-\\udfff]",PL="\\u200d",OM=kL+"?",SM="["+TL+"]?",NL="(?:"+PL+"(?:"+[bM,wM,EM].join("|")+")"+SM+OM+")*",RL=SM+OM+NL,CL="(?:"+[bM+bw+"?",bw,wM,EM,ML].join("|")+")",DL=RegExp(ww+"(?="+ww+")|"+CL+RL,"g");function jL(e){return e.match(DL)||[]}function As(e){return Gv(e)?jL(e):EL(e)}function xM(e){return function(t){t=Lo(t);var n=Gv(t)?As(t):void 0,a=n?n[0]:t.charAt(0),r=n?Jd(n,1).join(""):t.slice(1);return a[e]()+r}}var cE=xM("toUpperCase");function AM(e){return cE(Lo(e).toLowerCase())}function fE(e){return function(t){return e==null?void 0:e[t]}}var IL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},LL=fE(IL),$L=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,FL="\\u0300-\\u036f",UL="\\ufe20-\\ufe2f",VL="\\u20d0-\\u20ff",BL=FL+UL+VL,WL="["+BL+"]",GL=RegExp(WL,"g");function TM(e){return e=Lo(e),e&&e.replace($L,LL).replace(GL,"")}var zL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function HL(e){return e.match(zL)||[]}var XL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function qL(e){return XL.test(e)}var MM="\\ud800-\\udfff",YL="\\u0300-\\u036f",KL="\\ufe20-\\ufe2f",ZL="\\u20d0-\\u20ff",JL=YL+KL+ZL,kM="\\u2700-\\u27bf",PM="a-z\\xdf-\\xf6\\xf8-\\xff",QL="\\xac\\xb1\\xd7\\xf7",e4="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",t4="\\u2000-\\u206f",n4=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",NM="A-Z\\xc0-\\xd6\\xd8-\\xde",r4="\\ufe0e\\ufe0f",RM=QL+e4+t4+n4,CM="['’]",tx="["+RM+"]",o4="["+JL+"]",DM="\\d+",i4="["+kM+"]",jM="["+PM+"]",IM="[^"+MM+RM+DM+kM+PM+NM+"]",a4="\\ud83c[\\udffb-\\udfff]",l4="(?:"+o4+"|"+a4+")",u4="[^"+MM+"]",LM="(?:\\ud83c[\\udde6-\\uddff]){2}",$M="[\\ud800-\\udbff][\\udc00-\\udfff]",dv="["+NM+"]",s4="\\u200d",nx="(?:"+jM+"|"+IM+")",c4="(?:"+dv+"|"+IM+")",rx="(?:"+CM+"(?:d|ll|m|re|s|t|ve))?",ox="(?:"+CM+"(?:D|LL|M|RE|S|T|VE))?",FM=l4+"?",UM="["+r4+"]?",f4="(?:"+s4+"(?:"+[u4,LM,$M].join("|")+")"+UM+FM+")*",d4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",p4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",h4=UM+FM+f4,v4="(?:"+[i4,LM,$M].join("|")+")"+h4,m4=RegExp([dv+"?"+jM+"+"+rx+"(?="+[tx,dv,"$"].join("|")+")",c4+"+"+ox+"(?="+[tx,dv+nx,"$"].join("|")+")",dv+"?"+nx+"+"+rx,dv+"+"+ox,p4,d4,DM,v4].join("|"),"g");function y4(e){return e.match(m4)||[]}function VM(e,t,n){return e=Lo(e),t=n?void 0:t,t===void 0?qL(e)?y4(e):HL(e):e.match(t)||[]}var g4="['’]",_4=RegExp(g4,"g");function zv(e){return function(t){return aM(VM(TM(t).replace(_4,"")),e,"")}}var b4=zv(function(e,t,n){return t=t.toLowerCase(),e+(n?AM(t):t)}),w4=lh.isFinite,E4=Math.min;function dE(e){var t=Math[e];return function(n,a){if(n=Rf(n),a=a==null?0:E4(Vr(a),292),a&&w4(n)){var r=(Lo(n)+"e").split("e"),u=t(r[0]+"e"+(+r[1]+a));return r=(Lo(u)+"e").split("e"),+(r[0]+"e"+(+r[1]-a))}return t(n)}}var O4=dE("ceil");function BM(e){var t=fe(e);return t.__chain__=!0,t}var S4=Math.ceil,x4=Math.max;function A4(e,t,n){(n?yc(e,t,n):t===void 0)?t=1:t=x4(Vr(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var r=0,u=0,c=Array(S4(a/t));r<a;)c[u++]=Ss(e,r,r+=t);return c}function ph(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function T4(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Rf(n),n=n===n?n:0),t!==void 0&&(t=Rf(t),t=t===t?t:0),ph(Rf(e),t,n)}var M4=1,k4=4;function P4(e,t){return t=typeof t=="function"?t:void 0,$v(e,M4|k4,t)}var N4=4;function R4(e,t){return t=typeof t=="function"?t:void 0,$v(e,N4,t)}function C4(){return new ju(this.value(),this.__chain__)}function D4(e){for(var t=-1,n=e==null?0:e.length,a=0,r=[];++t<n;){var u=e[t];u&&(r[a++]=u)}return r}function j4(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return ny(Oi(n)?Cu(n):[n],ks(t,1))}var I4="Expected a function";function L4(e){var t=e==null?0:e.length,n=eo;return e=t?Ra(e,function(a){if(typeof a[1]!="function")throw new TypeError(I4);return[n(a[0]),a[1]]}):[],oo(function(a){for(var r=-1;++r<t;){var u=e[r];if(Du(u[0],this,a))return Du(u[1],this,a)}})}function WM(e,t,n){var a=n.length;if(e==null)return!a;for(e=Object(e);a--;){var r=n[a],u=t[r],c=e[r];if(c===void 0&&!(r in e)||!u(c))return!1}return!0}function $4(e){var t=Ms(e);return function(n){return WM(n,e,t)}}var F4=1;function U4(e){return $4($v(e,F4))}function V4(e,t){return t==null||WM(e,t,Ms(t))}function B4(e,t,n,a){for(var r=-1,u=e==null?0:e.length;++r<u;){var c=e[r];t(a,c,n(c),e)}return a}function W4(e,t,n,a){return c_(e,function(r,u,c){t(a,r,n(r),c)}),a}function y_(e,t){return function(n,a){var r=Oi(n)?B4:W4,u=t?t():{};return r(n,e,eo(a),u)}}var G4=Object.prototype,z4=G4.hasOwnProperty,H4=y_(function(e,t,n){z4.call(e,n)?++e[n]:ty(e,n,1)});function X4(e,t){var n=Jm(e);return t==null?n:QD(n,t)}var q4=8;function pE(e,t,n){t=n?void 0:t;var a=Lf(e,q4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=pE.placeholder,a}pE.placeholder={};var Y4=16;function hE(e,t,n){t=n?void 0:t;var a=Lf(e,Y4,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=hE.placeholder,a}hE.placeholder={};function K4(e,t){return e==null||e!==e?t:e}function GM(e,t,n,a,r,u){return zd(e)&&zd(t)&&(u.set(t,e),$T(e,t,void 0,GM,u),u.delete(t)),e}var zM=ey(function(e,t,n,a){$T(e,t,n,a)}),Z4=oo(function(e){return e.push(void 0,GM),Du(zM,void 0,e)}),J4="Expected a function";function HM(e,t,n){if(typeof e!="function")throw new TypeError(J4);return setTimeout(function(){e.apply(void 0,n)},t)}var Q4=oo(function(e,t){return HM(e,1,t)}),e6=oo(function(e,t,n){return HM(e,Rf(t)||0,n)}),t6=200;function iy(e,t,n,a){var r=-1,u=Zw,c=!0,v=e.length,f=[],g=t.length;if(!v)return f;n&&(t=Ra(t,Df(n))),a?(u=UT,c=!1):t.length>=t6&&(u=hw,c=!1,t=new FT(t));e:for(;++r<v;){var _=e[r],b=n==null?_:n(_);if(_=a||_!==0?_:0,c&&b===b){for(var O=g;O--;)if(t[O]===b)continue e;f.push(_)}else u(t,b,a)||f.push(_)}return f}var n6=oo(function(e,t){return aa(e)?iy(e,ks(t,1,aa,!0)):[]}),r6=oo(function(e,t){var n=xs(t);return aa(n)&&(n=void 0),aa(e)?iy(e,ks(t,1,aa,!0),eo(n)):[]}),o6=oo(function(e,t){var n=xs(t);return aa(n)&&(n=void 0),aa(e)?iy(e,ks(t,1,aa,!0),void 0,n):[]}),i6=p_(function(e,t){return e/t},1);function a6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Vr(t),Ss(e,t<0?0:t,a)):[]}function l6(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Vr(t),t=a-t,Ss(e,0,t<0?0:t)):[]}function g_(e,t,n,a){for(var r=e.length,u=a?r:-1;(a?u--:++u<r)&&t(e[u],u,e););return n?Ss(e,a?0:u,a?u+1:r):Ss(e,a?u+1:0,a?r:u)}function u6(e,t){return e&&e.length?g_(e,eo(t),!0,!0):[]}function s6(e,t){return e&&e.length?g_(e,eo(t),!0):[]}function c6(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var XM=ej(!0);function vE(e,t){return e&&XM(e,t,Ms)}var qM=tj(vE,!0);function f6(e,t){var n=Oi(e)?c6:qM;return n(e,dh(t))}function d6(e,t,n){e=Lo(e),t=Os(t);var a=e.length;n=n===void 0?a:ph(Vr(n),0,a);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function p6(e,t){return Ra(t,function(n){return[n,e[n]]})}function h6(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var v6="[object Map]",m6="[object Set]";function YM(e){return function(t){var n=f_(t);return n==v6?VT(t):n==m6?h6(t):p6(t,e(t))}}var y6=YM(Ms),g6=YM(uh),_6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b6=fE(_6),KM=/[&<>"']/g,w6=RegExp(KM.source);function ZM(e){return e=Lo(e),e&&w6.test(e)?e.replace(KM,b6):e}var JM=/[\\^$.*+?()[\]{}|]/g,E6=RegExp(JM.source);function O6(e){return e=Lo(e),e&&E6.test(e)?e.replace(JM,"\\$&"):e}function QM(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function S6(e,t){var n=!0;return c_(e,function(a,r,u){return n=!!t(a,r,u),n}),n}function x6(e,t,n){var a=Oi(e)?QM:S6;return n&&yc(e,t,n)&&(t=void 0),a(e,eo(t))}var A6=4294967295;function ek(e){return e?ph(Vr(e),0,A6):0}function T6(e,t,n,a){var r=e.length;for(n=Vr(n),n<0&&(n=-n>r?0:r+n),a=a===void 0||a>r?r:Vr(a),a<0&&(a+=r),a=n>a?0:ek(a);n<a;)e[n++]=t;return e}function M6(e,t,n,a){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&yc(e,t,n)&&(n=0,a=r),T6(e,t,n,a)):[]}function tk(e,t,n){var a;return n(e,function(r,u,c){if(t(r,u,c))return a=u,!1}),a}function k6(e,t){return tk(e,eo(t),ch)}var P6=CI(BT);function N6(e,t){return tk(e,eo(t),vE)}function R6(e){return e&&e.length?e[0]:void 0}var C6=1/0;function D6(e,t){return ks(Qw(e,t),C6)}function j6(e,t,n){return n=n===void 0?1:Vr(n),ks(Qw(e,t),n)}function I6(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Vr(t),ks(e,t)):[]}var L6=512;function $6(e){return Lf(e,L6)}var F6=dE("floor"),U6="Expected a function",V6=8,B6=32,W6=128,G6=256;function nk(e){return sh(function(t){var n=t.length,a=n,r=ju.prototype.thru;for(e&&t.reverse();a--;){var u=t[a];if(typeof u!="function")throw new TypeError(U6);if(r&&!c&&bg(u)=="wrapper")var c=new ju([],!0)}for(a=c?a:n;++a<n;){u=t[a];var v=bg(u),f=v=="wrapper"?aE(u):void 0;f&&gw(f[0])&&f[1]==(W6|V6|B6|G6)&&!f[4].length&&f[9]==1?c=c[bg(f[0])].apply(c,f[3]):c=u.length==1&&gw(u)?c[v]():c.thru(u)}return function(){var g=arguments,_=g[0];if(c&&g.length==1&&Oi(_))return c.plant(_).value();for(var b=0,O=n?t[b].apply(this,g):_;++b<n;)O=t[b].call(this,O);return O}})}var z6=nk(),H6=nk(!0);function X6(e,t){return e==null?e:XM(e,dh(t),uh)}function q6(e,t){return e&&vE(e,dh(t))}function __(e,t){return Fv(t,function(n){return Uv(e[n])})}function Y6(e){return e==null?[]:__(e,Ms(e))}function K6(e){return e==null?[]:__(e,uh(e))}var Z6=Object.prototype,J6=Z6.hasOwnProperty,Q6=y_(function(e,t,n){J6.call(e,n)?e[n].push(t):ty(e,n,[t])});function b_(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rf(t),n=Rf(n)),e(t,n)}}var e5=b_(uM),t5=b_(function(e,t){return e>=t}),n5=Math.max,r5=Math.min;function o5(e,t,n){return e>=r5(t,n)&&e<n5(t,n)}function i5(e,t,n){return t=Bm(t),n===void 0?(n=t,t=0):n=Bm(n),e=Rf(e),o5(e,t,n)}var a5="[object String]";function w_(e){return typeof e=="string"||!Oi(e)&&Lu(e)&&Kd(e)==a5}var l5=Math.max;function u5(e,t,n,a){e=Lv(e)?e:Bv(e),n=n&&!a?Vr(n):0;var r=e.length;return n<0&&(n=l5(r+n,0)),w_(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&ry(e,t,n)>-1}var s5=Math.max;function c5(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Vr(n);return r<0&&(r=s5(a+r,0)),ry(e,t,r)}function f5(e){var t=e==null?0:e.length;return t?Ss(e,0,-1):[]}var d5=Math.min;function mE(e,t,n){for(var a=n?UT:Zw,r=e[0].length,u=e.length,c=u,v=Array(u),f=1/0,g=[];c--;){var _=e[c];c&&t&&(_=Ra(_,Df(t))),f=d5(_.length,f),v[c]=!n&&(t||r>=120&&_.length>=120)?new FT(c&&_):void 0}_=e[0];var b=-1,O=v[0];e:for(;++b<r&&g.length<f;){var x=_[b],M=t?t(x):x;if(x=n||x!==0?x:0,!(O?hw(O,M):a(g,M,n))){for(c=u;--c;){var A=v[c];if(!(A?hw(A,M):a(e[c],M,n)))continue e}O&&O.push(M),g.push(x)}}return g}function yE(e){return aa(e)?e:[]}var p5=oo(function(e){var t=Ra(e,yE);return t.length&&t[0]===e[0]?mE(t):[]}),h5=oo(function(e){var t=xs(e),n=Ra(e,yE);return t===xs(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mE(n,eo(t)):[]}),v5=oo(function(e){var t=xs(e),n=Ra(e,yE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?mE(n,void 0,t):[]});function m5(e,t,n,a){return ch(e,function(r,u,c){t(a,n(r),u,c)}),a}function rk(e,t){return function(n,a){return m5(n,e,t(a),{})}}var y5=Object.prototype,g5=y5.toString,_5=rk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=g5.call(t)),e[t]=n},WT(ah)),ok=Object.prototype,b5=ok.hasOwnProperty,w5=ok.toString,E5=rk(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=w5.call(t)),b5.call(e,t)?e[t].push(n):e[t]=[n]},eo);function ay(e,t,n){t=GT(t,e),e=nj(e,t);var a=e==null?e:e[s_(xs(t))];return a==null?void 0:Du(a,e,n)}var O5=oo(ay),S5=oo(function(e,t,n){var a=-1,r=typeof t=="function",u=Lv(e)?Array(e.length):[];return c_(e,function(c){u[++a]=r?Du(t,c,n):ay(c,t,n)}),u}),x5="[object ArrayBuffer]";function A5(e){return Lu(e)&&Kd(e)==x5}var ix=Pv&&Pv.isArrayBuffer,T5=ix?Df(ix):A5,M5="[object Boolean]";function k5(e){return e===!0||e===!1||Lu(e)&&Kd(e)==M5}var P5="[object Date]";function N5(e){return Lu(e)&&Kd(e)==P5}var ax=Pv&&Pv.isDate,R5=ax?Df(ax):N5;function C5(e){return Lu(e)&&e.nodeType===1&&!Jw(e)}function D5(e,t,n){n=typeof n=="function"?n:void 0;var a=n?n(e,t):void 0;return a===void 0?rj(e,t,void 0,n):!!a}var j5=lh.isFinite;function I5(e){return typeof e=="number"&&j5(e)}function ik(e){return typeof e=="number"&&e==Vr(e)}function L5(e,t){return e===t||zT(e,t,HT(t))}function $5(e,t,n){return n=typeof n=="function"?n:void 0,zT(e,t,HT(t),n)}var F5="[object Number]";function ak(e){return typeof e=="number"||Lu(e)&&Kd(e)==F5}function U5(e){return ak(e)&&e!=+e}var V5=oj?Uv:XT,B5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function W5(e){if(V5(e))throw new Error(B5);return ij(e)}var G5="[object RegExp]";function z5(e){return Lu(e)&&Kd(e)==G5}var lx=Pv&&Pv.isRegExp,gE=lx?Df(lx):z5,ux=9007199254740991;function H5(e){return ik(e)&&e>=-ux&&e<=ux}var X5="[object WeakMap]";function q5(e){return Lu(e)&&f_(e)==X5}var Y5="[object WeakSet]";function K5(e){return Lu(e)&&Kd(e)==Y5}var Z5=1;function J5(e){return eo(typeof e=="function"?e:$v(e,Z5))}var Q5=Array.prototype,e$=Q5.join;function t$(e,t){return e==null?"":e$.call(e,t)}var n$=zv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),r$=y_(function(e,t,n){ty(e,n,t)});function o$(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}var i$=Math.max,a$=Math.min;function l$(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=a;return n!==void 0&&(r=Vr(n),r=r<0?i$(a+r,0):a$(r,a-1)),t===t?o$(e,t,r):aj(e,lj,r,!0)}var u$=zv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),s$=xM("toLowerCase"),c$=b_(DI),f$=b_(function(e,t){return e<=t});function d$(e,t){var n={};return t=eo(t),ch(e,function(a,r,u){ty(n,t(a,r,u),a)}),n}var p$=1;function h$(e){return uj($v(e,p$))}var v$=1;function m$(e,t){return sj(e,$v(t,v$))}function y$(e,t){return e&&e.length?jI(e,eo(t),uM):void 0}function _E(e,t){for(var n,a=-1,r=e.length;++a<r;){var u=t(e[a]);u!==void 0&&(n=n===void 0?u:n+u)}return n}var g$=NaN;function lk(e,t){var n=e==null?0:e.length;return n?_E(e,t)/n:g$}function _$(e){return lk(e,ah)}function b$(e,t){return lk(e,eo(t))}var w$=oo(function(e,t){return function(n){return ay(n,e,t)}}),E$=oo(function(e,t){return function(n){return ay(e,n,t)}});function O$(e,t,n){var a=Ms(t),r=__(t,a),u=!(zd(n)&&"chain"in n)||!!n.chain,c=Uv(e);return mc(r,function(v){var f=t[v];e[v]=f,c&&(e.prototype[v]=function(){var g=this.__chain__;if(u||g){var _=e(this.__wrapped__),b=_.__actions__=Cu(this.__actions__);return b.push({func:f,args:arguments,thisArg:e}),_.__chain__=g,_}return f.apply(e,ny([this.value()],arguments))})}),e}var S$=p_(function(e,t){return e*t},1),x$="Expected a function";function E_(e){if(typeof e!="function")throw new TypeError(x$);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function A$(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var T$="[object Map]",M$="[object Set]",x1=Cg?Cg.iterator:void 0;function uk(e){if(!e)return[];if(Lv(e))return w_(e)?As(e):Cu(e);if(x1&&e[x1])return A$(e[x1]());var t=f_(e),n=t==T$?VT:t==M$?cj:Bv;return n(e)}function k$(){this.__values__===void 0&&(this.__values__=uk(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function sk(e,t){var n=e.length;if(n)return t+=t<0?n:0,Qm(t,n)?e[t]:void 0}function P$(e,t){return e&&e.length?sk(e,Vr(t)):void 0}function N$(e){return e=Vr(e),oo(function(t){return sk(t,e)})}function ck(e,t){if(e==null)return{};var n=Ra(fj(e),function(a){return[a]});return t=eo(t),dj(e,n,function(a,r){return t(a,r[0])})}function R$(e,t){return ck(e,E_(eo(t)))}function C$(e){return gM(2,e)}function D$(e,t,n,a){return e==null?[]:(Oi(t)||(t=t==null?[]:[t]),n=a?void 0:n,Oi(n)||(n=n==null?[]:[n]),II(e,t,n))}function bE(e){return sh(function(t){return t=Ra(t,Df(eo)),oo(function(n){var a=this;return e(t,function(r){return Du(r,a,n)})})})}var j$=bE(Ra),I$=oo,L$=Math.min,$$=I$(function(e,t){t=t.length==1&&Oi(t[0])?Ra(t[0],Df(eo)):Ra(ks(t,1),Df(eo));var n=t.length;return oo(function(a){for(var r=-1,u=L$(a.length,n);++r<u;)a[r]=t[r].call(this,a[r]);return Du(e,this,a)})}),F$=bE(QM),U$=bE(qT),V$=9007199254740991,B$=Math.floor;function Ew(e,t){var n="";if(!e||t<1||t>V$)return n;do t%2&&(n+=e),t=B$(t/2),t&&(e+=e);while(t);return n}var W$=YT("length"),fk="\\ud800-\\udfff",G$="\\u0300-\\u036f",z$="\\ufe20-\\ufe2f",H$="\\u20d0-\\u20ff",X$=G$+z$+H$,q$="\\ufe0e\\ufe0f",Y$="["+fk+"]",Ow="["+X$+"]",Sw="\\ud83c[\\udffb-\\udfff]",K$="(?:"+Ow+"|"+Sw+")",dk="[^"+fk+"]",pk="(?:\\ud83c[\\udde6-\\uddff]){2}",hk="[\\ud800-\\udbff][\\udc00-\\udfff]",Z$="\\u200d",vk=K$+"?",mk="["+q$+"]?",J$="(?:"+Z$+"(?:"+[dk,pk,hk].join("|")+")"+mk+vk+")*",Q$=mk+vk+J$,eF="(?:"+[dk+Ow+"?",Ow,pk,hk,Y$].join("|")+")",sx=RegExp(Sw+"(?="+Sw+")|"+eF+Q$,"g");function tF(e){for(var t=sx.lastIndex=0;sx.test(e);)++t;return t}function Hv(e){return Gv(e)?tF(e):W$(e)}var nF=Math.ceil;function jg(e,t){t=t===void 0?" ":Os(t);var n=t.length;if(n<2)return n?Ew(t,e):t;var a=Ew(t,nF(e/Hv(t)));return Gv(t)?Jd(As(a),0,e).join(""):a.slice(0,e)}var rF=Math.ceil,oF=Math.floor;function iF(e,t,n){e=Lo(e),t=Vr(t);var a=t?Hv(e):0;if(!t||a>=t)return e;var r=(t-a)/2;return jg(oF(r),n)+e+jg(rF(r),n)}function aF(e,t,n){e=Lo(e),t=Vr(t);var a=t?Hv(e):0;return t&&a<t?e+jg(t-a,n):e}function lF(e,t,n){e=Lo(e),t=Vr(t);var a=t?Hv(e):0;return t&&a<t?jg(t-a,n)+e:e}var uF=/^\s+/,sF=lh.parseInt;function cF(e,t,n){return n||t==null?t=0:t&&(t=+t),sF(Lo(e).replace(uF,""),t||0)}var fF=32,O_=oo(function(e,t){var n=qd(t,Wv(O_));return Lf(e,fF,void 0,t,n)});O_.placeholder={};var dF=64,wE=oo(function(e,t){var n=qd(t,Wv(wE));return Lf(e,dF,void 0,t,n)});wE.placeholder={};var pF=y_(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function hF(e){for(var t,n=this;n instanceof h_;){var a=dM(n);a.__index__=0,a.__values__=void 0,t?r.__wrapped__=a:t=a;var r=a;n=n.__wrapped__}return r.__wrapped__=e,t}function vF(e){return function(t){return e==null?void 0:KT(e,t)}}function mF(e,t,n,a){for(var r=n-1,u=e.length;++r<u;)if(a(e[r],t))return r;return-1}var yF=Array.prototype,cx=yF.splice;function EE(e,t,n,a){var r=a?mF:ry,u=-1,c=t.length,v=e;for(e===t&&(t=Cu(t)),n&&(v=Ra(e,Df(n)));++u<c;)for(var f=0,g=t[u],_=n?n(g):g;(f=r(v,_,f,a))>-1;)v!==e&&cx.call(v,f,1),cx.call(e,f,1);return e}function yk(e,t){return e&&e.length&&t&&t.length?EE(e,t):e}var gF=oo(yk);function _F(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,eo(n)):e}function bF(e,t,n){return e&&e.length&&t&&t.length?EE(e,t,void 0,n):e}var wF=Array.prototype,EF=wF.splice;function gk(e,t){for(var n=e?t.length:0,a=n-1;n--;){var r=t[n];if(n==a||r!==u){var u=r;Qm(r)?EF.call(e,r,1):ZT(e,r)}}return e}var OF=sh(function(e,t){var n=e==null?0:e.length,a=lE(e,t);return gk(e,Ra(t,function(r){return Qm(r,n)?+r:r}).sort(LI)),a}),SF=Math.floor,xF=Math.random;function OE(e,t){return e+SF(xF()*(t-e+1))}var AF=parseFloat,TF=Math.min,MF=Math.random;function kF(e,t,n){if(n&&typeof n!="boolean"&&yc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Bm(e),t===void 0?(t=e,e=0):t=Bm(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var r=MF();return TF(e+r*(t-e+AF("1e-"+((r+"").length-1))),t)}return OE(e,t)}var PF=$I(!0),NF=256,RF=sh(function(e,t){return Lf(e,NF,void 0,void 0,void 0,t)});function CF(e,t,n,a){var r=e==null?0:e.length;for(a&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function DF(e,t,n){var a=Oi(e)?CF:TI,r=arguments.length<3;return a(e,eo(t),n,r,qM)}function jF(e,t){var n=Oi(e)?Fv:MI;return n(e,E_(eo(t)))}function IF(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,r=[],u=e.length;for(t=eo(t);++a<u;){var c=e[a];t(c,a,e)&&(n.push(c),r.push(a))}return gk(e,r),n}function LF(e,t,n){return(n?yc(e,t,n):t===void 0)?t=1:t=Vr(t),Ew(Lo(e),t)}function $F(){var e=arguments,t=Lo(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var FF="Expected a function";function UF(e,t){if(typeof e!="function")throw new TypeError(FF);return t=t===void 0?t:Vr(t),oo(e,t)}function VF(e,t,n){t=GT(t,e);var a=-1,r=t.length;for(r||(r=1,e=void 0);++a<r;){var u=e==null?void 0:e[s_(t[a])];u===void 0&&(a=r,u=n),e=Uv(u)?u.call(e):u}return e}var BF=Array.prototype,WF=BF.reverse;function xw(e){return e==null?e:WF.call(e)}var GF=dE("round");function _k(e){var t=e.length;return t?e[OE(0,t-1)]:void 0}function zF(e){return _k(Bv(e))}function HF(e){var t=Oi(e)?_k:zF;return t(e)}function S_(e,t){var n=-1,a=e.length,r=a-1;for(t=t===void 0?a:t;++n<t;){var u=OE(n,r),c=e[u];e[u]=e[n],e[n]=c}return e.length=t,e}function XF(e,t){return S_(Cu(e),ph(t,0,e.length))}function qF(e,t){var n=Bv(e);return S_(n,ph(t,0,n.length))}function YF(e,t,n){(n?yc(e,t,n):t===void 0)?t=1:t=Vr(t);var a=Oi(e)?XF:qF;return a(e,t)}function KF(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:eE(e,t,n,a)}function ZF(e){return S_(Cu(e))}function JF(e){return S_(Bv(e))}function QF(e){var t=Oi(e)?ZF:JF;return t(e)}var e9="[object Map]",t9="[object Set]";function n9(e){if(e==null)return 0;if(Lv(e))return w_(e)?Hv(e):e.length;var t=f_(e);return t==e9||t==t9?e.size:pj(e).length}function r9(e,t,n){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&yc(e,t,n)?(t=0,n=a):(t=t==null?0:Vr(t),n=n===void 0?a:Vr(n)),Ss(e,t,n)):[]}var o9=zv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function i9(e,t){var n;return c_(e,function(a,r,u){return n=t(a,r,u),!n}),!!n}function a9(e,t,n){var a=Oi(e)?qT:i9;return n&&yc(e,t,n)&&(t=void 0),a(e,eo(t))}var l9=4294967295,u9=l9-1,s9=Math.floor,c9=Math.min;function SE(e,t,n,a){var r=0,u=e==null?0:e.length;if(u===0)return 0;t=n(t);for(var c=t!==t,v=t===null,f=kv(t),g=t===void 0;r<u;){var _=s9((r+u)/2),b=n(e[_]),O=b!==void 0,x=b===null,M=b===b,A=kv(b);if(c)var E=a||M;else g?E=M&&(a||O):v?E=M&&O&&(a||!x):f?E=M&&O&&!x&&(a||!A):x||A?E=!1:E=a?b<=t:b<t;E?r=_+1:u=_}return c9(u,u9)}var f9=4294967295,d9=f9>>>1;function x_(e,t,n){var a=0,r=e==null?a:e.length;if(typeof t=="number"&&t===t&&r<=d9){for(;a<r;){var u=a+r>>>1,c=e[u];c!==null&&!kv(c)&&(n?c<=t:c<t)?a=u+1:r=u}return r}return SE(e,t,ah,n)}function p9(e,t){return x_(e,t)}function h9(e,t,n){return SE(e,t,eo(n))}function v9(e,t){var n=e==null?0:e.length;if(n){var a=x_(e,t);if(a<n&&oy(e[a],t))return a}return-1}function m9(e,t){return x_(e,t,!0)}function y9(e,t,n){return SE(e,t,eo(n),!0)}function g9(e,t){var n=e==null?0:e.length;if(n){var a=x_(e,t,!0)-1;if(oy(e[a],t))return a}return-1}function bk(e,t){for(var n=-1,a=e.length,r=0,u=[];++n<a;){var c=e[n],v=t?t(c):c;if(!n||!oy(v,f)){var f=v;u[r++]=c===0?0:c}}return u}function _9(e){return e&&e.length?bk(e):[]}function b9(e,t){return e&&e.length?bk(e,eo(t)):[]}var w9=4294967295;function E9(e,t,n){return n&&typeof n!="number"&&yc(e,t,n)&&(t=n=void 0),n=n===void 0?w9:n>>>0,n?(e=Lo(e),e&&(typeof t=="string"||t!=null&&!gE(t))&&(t=Os(t),!t&&Gv(e))?Jd(As(e),0,n):e.split(t,n)):[]}var O9="Expected a function",S9=Math.max;function x9(e,t){if(typeof e!="function")throw new TypeError(O9);return t=t==null?0:S9(Vr(t),0),oo(function(n){var a=n[t],r=Jd(n,0,t);return a&&ny(r,a),Du(e,this,r)})}var A9=zv(function(e,t,n){return e+(n?" ":"")+cE(t)});function T9(e,t,n){return e=Lo(e),n=n==null?0:ph(Vr(n),0,e.length),t=Os(t),e.slice(n,n+t.length)==t}function M9(){return{}}function k9(){return""}function P9(){return!0}var N9=p_(function(e,t){return e-t},0);function R9(e){return e&&e.length?_E(e,ah):0}function C9(e,t){return e&&e.length?_E(e,eo(t)):0}function D9(e){var t=e==null?0:e.length;return t?Ss(e,1,t):[]}function j9(e,t,n){return e&&e.length?(t=n||t===void 0?1:Vr(t),Ss(e,0,t<0?0:t)):[]}function I9(e,t,n){var a=e==null?0:e.length;return a?(t=n||t===void 0?1:Vr(t),t=a-t,Ss(e,t<0?0:t,a)):[]}function L9(e,t){return e&&e.length?g_(e,eo(t),!1,!0):[]}function $9(e,t){return e&&e.length?g_(e,eo(t)):[]}function F9(e,t){return t(e),e}var wk=Object.prototype,U9=wk.hasOwnProperty;function fx(e,t,n,a){return e===void 0||oy(e,wk[n])&&!U9.call(a,n)?t:e}var V9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function B9(e){return"\\"+V9[e]}var Ek=/<%=([\s\S]+?)%>/g,W9=/<%-([\s\S]+?)%>/g,G9=/<%([\s\S]+?)%>/g,Aw={escape:W9,evaluate:G9,interpolate:Ek,variable:"",imports:{_:{escape:ZM}}},z9="Invalid `variable` option passed into `_.template`",H9=/\b__p \+= '';/g,X9=/\b(__p \+=) '' \+/g,q9=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y9=/[()=,{}\[\]\/\s]/,K9=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sg=/($^)/,Z9=/['\n\r\u2028\u2029\\]/g,J9=Object.prototype,dx=J9.hasOwnProperty;function Q9(e,t,n){var a=Aw.imports._.templateSettings||Aw;n&&yc(e,t,n)&&(t=void 0),e=Lo(e),t=_w({},t,a,fx);var r=_w({},t.imports,a.imports,fx),u=Ms(r),c=lM(r,u),v,f,g=0,_=t.interpolate||sg,b="__p += '",O=RegExp((t.escape||sg).source+"|"+_.source+"|"+(_===Ek?K9:sg).source+"|"+(t.evaluate||sg).source+"|$","g"),x=dx.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(E,D,j,U,F,I){return j||(j=U),b+=e.slice(g,I).replace(Z9,B9),D&&(v=!0,b+=`' +
__e(`+D+`) +
'`),F&&(f=!0,b+=`';
`+F+`;
__p += '`),j&&(b+=`' +
((__t = (`+j+`)) == null ? '' : __t) +
'`),g=I+E.length,E}),b+=`';
`;var M=dx.call(t,"variable")&&t.variable;if(!M)b=`with (obj) {
`+b+`
}
`;else if(Y9.test(M))throw new Error(z9);b=(f?b.replace(H9,""):b).replace(X9,"$1").replace(q9,"$1;"),b="function("+(M||"obj")+`) {
`+(M?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var A=yM(function(){return Function(u,x+"return "+b).apply(void 0,c)});if(A.source=b,uE(A))throw A;return A}function A_(e,t){return t(e)}var e7=9007199254740991,A1=4294967295,t7=Math.min;function n7(e,t){if(e=Vr(e),e<1||e>e7)return[];var n=A1,a=t7(e,A1);t=dh(t),e-=A1;for(var r=JT(a,t);++n<e;)t(n);return r}function r7(){return this}function Ok(e,t){var n=e;return n instanceof Qr&&(n=n.value()),aM(t,function(a,r){return r.func.apply(r.thisArg,ny([a],r.args))},n)}function o7(){return Ok(this.__wrapped__,this.__actions__)}function i7(e){return Lo(e).toLowerCase()}function a7(e){return Oi(e)?Ra(e,s_):kv(e)?[e]:Cu(hj(Lo(e)))}var px=9007199254740991;function l7(e){return e?ph(Vr(e),-px,px):e===0?e:0}function u7(e){return Lo(e).toUpperCase()}function s7(e,t,n){var a=Oi(e),r=a||QT(e)||eM(e);if(t=eo(t),n==null){var u=e&&e.constructor;r?n=a?new u:[]:zd(e)?n=Uv(u)?Jm(vj(e)):{}:n={}}return(r?mc:ch)(e,function(c,v,f){return t(n,c,v,f)}),n}function Sk(e,t){for(var n=e.length;n--&&ry(t,e[n],0)>-1;);return n}function xk(e,t){for(var n=-1,a=e.length;++n<a&&ry(t,e[n],0)>-1;);return n}function c7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return mj(e);if(!e||!(t=Os(t)))return e;var a=As(e),r=As(t),u=xk(a,r),c=Sk(a,r)+1;return Jd(a,u,c).join("")}function f7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return e.slice(0,yj(e)+1);if(!e||!(t=Os(t)))return e;var a=As(e),r=Sk(a,As(t))+1;return Jd(a,0,r).join("")}var d7=/^\s+/;function p7(e,t,n){if(e=Lo(e),e&&(n||t===void 0))return e.replace(d7,"");if(!e||!(t=Os(t)))return e;var a=As(e),r=xk(a,As(t));return Jd(a,r).join("")}var h7=30,v7="...",m7=/\w*$/;function y7(e,t){var n=h7,a=v7;if(zd(t)){var r="separator"in t?t.separator:r;n="length"in t?Vr(t.length):n,a="omission"in t?Os(t.omission):a}e=Lo(e);var u=e.length;if(Gv(e)){var c=As(e);u=c.length}if(n>=u)return e;var v=n-Hv(a);if(v<1)return a;var f=c?Jd(c,0,v).join(""):e.slice(0,v);if(r===void 0)return f+a;if(c&&(v+=f.length-v),gE(r)){if(e.slice(v).search(r)){var g,_=f;for(r.global||(r=RegExp(r.source,Lo(m7.exec(r))+"g")),r.lastIndex=0;g=r.exec(_);)var b=g.index;f=f.slice(0,b===void 0?v:b)}}else if(e.indexOf(Os(r),v)!=v){var O=f.lastIndexOf(r);O>-1&&(f=f.slice(0,O))}return f+a}function g7(e){return mM(e,1)}var _7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},b7=fE(_7),Ak=/&(?:amp|lt|gt|quot|#39);/g,w7=RegExp(Ak.source);function E7(e){return e=Lo(e),e&&w7.test(e)?e.replace(Ak,b7):e}var O7=oo(function(e){var t=xs(e);return aa(t)&&(t=void 0),Qp(ks(e,1,aa,!0),eo(t))}),S7=oo(function(e){var t=xs(e);return t=typeof t=="function"?t:void 0,Qp(ks(e,1,aa,!0),void 0,t)});function x7(e){return e&&e.length?Qp(e):[]}function A7(e,t){return e&&e.length?Qp(e,eo(t)):[]}function T7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?Qp(e,void 0,t):[]}function M7(e,t){return e==null?!0:ZT(e,t)}var k7=Math.max;function xE(e){if(!(e&&e.length))return[];var t=0;return e=Fv(e,function(n){if(aa(n))return t=k7(n.length,t),!0}),JT(t,function(n){return Ra(e,YT(n))})}function Tk(e,t){if(!(e&&e.length))return[];var n=xE(e);return t==null?n:Ra(n,function(a){return Du(t,void 0,a)})}function Mk(e,t,n,a){return eE(e,t,n(KT(e,t)),a)}function P7(e,t,n){return e==null?e:Mk(e,t,dh(n))}function N7(e,t,n,a){return a=typeof a=="function"?a:void 0,e==null?e:Mk(e,t,dh(n),a)}var R7=zv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});function C7(e){return e==null?[]:lM(e,uh(e))}var D7=oo(function(e,t){return aa(e)?iy(e,t):[]});function j7(e,t){return O_(dh(t),e)}var I7=sh(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,r=function(u){return lE(u,e)};return t>1||this.__actions__.length||!(a instanceof Qr)||!Qm(n)?this.thru(r):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:A_,args:[r],thisArg:void 0}),new ju(a,this.__chain__).thru(function(u){return t&&!u.length&&u.push(void 0),u}))});function L7(){return BM(this)}function $7(){var e=this.__wrapped__;if(e instanceof Qr){var t=e;return this.__actions__.length&&(t=new Qr(this)),t=t.reverse(),t.__actions__.push({func:A_,args:[xw],thisArg:void 0}),new ju(t,this.__chain__)}return this.thru(xw)}function AE(e,t,n){var a=e.length;if(a<2)return a?Qp(e[0]):[];for(var r=-1,u=Array(a);++r<a;)for(var c=e[r],v=-1;++v<a;)v!=r&&(u[r]=iy(u[r]||c,e[v],t,n));return Qp(ks(u,1),t,n)}var F7=oo(function(e){return AE(Fv(e,aa))}),U7=oo(function(e){var t=xs(e);return aa(t)&&(t=void 0),AE(Fv(e,aa),eo(t))}),V7=oo(function(e){var t=xs(e);return t=typeof t=="function"?t:void 0,AE(Fv(e,aa),void 0,t)}),B7=oo(xE);function W7(e,t){return FI(e||[],t||[],eE)}var G7=oo(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,Tk(e,n)});const Ln={chunk:A4,compact:D4,concat:j4,difference:n6,differenceBy:r6,differenceWith:o6,drop:a6,dropRight:l6,dropRightWhile:u6,dropWhile:s6,fill:M6,findIndex:VI,findLastIndex:BT,flatten:gj,flattenDeep:_j,flattenDepth:I6,fromPairs:bj,head:R6,indexOf:c5,initial:f5,intersection:p5,intersectionBy:h5,intersectionWith:v5,join:t$,lastIndexOf:l$,nth:P$,pull:gF,pullAll:yk,pullAllBy:_F,pullAllWith:bF,pullAt:OF,remove:IF,reverse:xw,slice:r9,sortedIndex:p9,sortedIndexBy:h9,sortedIndexOf:v9,sortedLastIndex:m9,sortedLastIndexBy:y9,sortedLastIndexOf:g9,sortedUniq:_9,sortedUniqBy:b9,tail:D9,take:j9,takeRight:I9,takeRightWhile:L9,takeWhile:$9,union:wj,unionBy:O7,unionWith:S7,uniq:x7,uniqBy:A7,uniqWith:T7,unzip:xE,unzipWith:Tk,without:D7,xor:F7,xorBy:U7,xorWith:V7,zip:B7,zipObject:UI,zipObjectDeep:W7,zipWith:G7},$o={countBy:H4,every:x6,filter:kI,find:WI,findLast:P6,flatMap:Ej,flatMapDeep:D6,flatMapDepth:j6,forEach:PI,forEachRight:f6,groupBy:Q6,includes:u5,invokeMap:S5,keyBy:r$,map:Qw,orderBy:D$,partition:pF,reduce:NI,reduceRight:DF,reject:jF,sample:HF,sampleSize:YF,shuffle:QF,size:n9,some:a9,sortBy:BI},z7={now:Oj},ji={after:i8,ary:mM,before:gM,bind:m_,bindKey:sE,curry:pE,curryRight:hE,debounce:Sj,defer:Q4,delay:e6,flip:$6,memoize:xj,once:C$,overArgs:$$,partial:O_,partialRight:wE,rearg:RF,rest:UF,spread:x9,throttle:Aj,unary:g7,wrap:j7},cr={castArray:Tj,clone:kj,cloneDeep:Pj,cloneDeepWith:P4,cloneWith:R4,conformsTo:V4,eq:oy,gt:e5,gte:t5,isArguments:Nj,isArrayBuffer:T5,isArrayLike:Lv,isArrayLikeObject:aa,isBoolean:k5,isBuffer:QT,isDate:R5,isElement:C5,isEmpty:Rj,isEqual:Cj,isEqualWith:D5,isError:uE,isFinite:I5,isFunction:Uv,isInteger:ik,isLength:Dj,isMap:jj,isMatch:L5,isMatchWith:$5,isNaN:U5,isNative:W5,isNil:Ij,isNull:Lj,isNumber:ak,isObjectLike:Lu,isPlainObject:Jw,isRegExp:gE,isSafeInteger:H5,isSet:$j,isString:w_,isSymbol:kv,isTypedArray:eM,isUndefined:Fj,isWeakMap:q5,isWeakSet:K5,lt:c$,lte:f$,toArray:uk,toFinite:Bm,toLength:ek,toNumber:Rf,toPlainObject:Mj,toSafeInteger:l7,toString:Lo},pl={add:r8,ceil:O4,divide:i6,floor:F6,max:GI,maxBy:y$,mean:_$,meanBy:b$,min:zI,minBy:HI,multiply:S$,round:GF,subtract:N9,sum:R9,sumBy:C9},TE={clamp:T4,inRange:i5,random:kF},Sr={assign:tL,assignIn:nL,assignInWith:_w,assignWith:rL,at:oL,create:X4,defaults:XI,defaultsDeep:Z4,findKey:k6,findLastKey:N6,forIn:YI,forInRight:X6,forOwn:KI,forOwnRight:q6,functions:Y6,functionsIn:K6,get:LT,has:RI,hasIn:Gj,invert:_5,invertBy:E5,invoke:O5,keysIn:uh,mapKeys:d$,mapValues:qI,merge:Uj,mergeWith:zM,omit:Vj,omitBy:R$,pick:Bj,pickBy:ck,result:VF,set:Wj,setWith:KF,toPairs:y6,toPairsIn:g6,transform:s7,unset:M7,update:P7,updateWith:N7,values:Bv,valuesIn:C7},_c={at:I7,chain:BM,commit:C4,next:k$,plant:hF,reverse:$7,tap:F9,toIterator:r7,value:o7,wrapperChain:L7},_o={camelCase:b4,capitalize:AM,deburr:TM,endsWith:d6,escape:ZM,escapeRegExp:O6,kebabCase:n$,lowerCase:u$,lowerFirst:s$,pad:iF,padEnd:aF,padStart:lF,parseInt:cF,repeat:LF,replace:$F,snakeCase:o9,split:E9,startCase:A9,startsWith:T9,template:Q9,templateSettings:Aw,toLower:i7,toUpper:u7,trim:c7,trimEnd:f7,trimStart:p7,truncate:y7,unescape:E7,upperCase:R7,upperFirst:cE,words:VM},xo={attempt:yM,bindAll:cL,cond:L4,conforms:U4,constant:WT,defaultTo:K4,flow:z6,flowRight:H6,iteratee:J5,matches:h$,matchesProperty:m$,method:w$,methodOf:E$,noop:IT,nthArg:N$,over:j$,overEvery:F$,overSome:U$,property:zj,propertyOf:vF,range:ZI,rangeRight:PF,stubArray:Hj,stubFalse:XT,stubObject:M9,stubString:k9,stubTrue:P9,times:n7,toPath:a7,uniqueId:JI};function H7(){var e=new Qr(this.__wrapped__);return e.__actions__=Cu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Cu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Cu(this.__views__),e}function X7(){if(this.__filtered__){var e=new Qr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var q7=Math.max,Y7=Math.min;function K7(e,t,n){for(var a=-1,r=n.length;++a<r;){var u=n[a],c=u.size;switch(u.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=Y7(t,e+c);break;case"takeRight":e=q7(e,t-c);break}}return{start:e,end:t}}var Z7=1,J7=2,Q7=Math.min;function eU(){var e=this.__wrapped__.value(),t=this.__dir__,n=Oi(e),a=t<0,r=n?e.length:0,u=K7(0,r,this.__views__),c=u.start,v=u.end,f=v-c,g=a?v:c-1,_=this.__iteratees__,b=_.length,O=0,x=Q7(f,this.__takeCount__);if(!n||!a&&r==f&&x==f)return Ok(e,this.__actions__);var M=[];e:for(;f--&&O<x;){g+=t;for(var A=-1,E=e[g];++A<b;){var D=_[A],j=D.iteratee,U=D.type,F=j(E);if(U==J7)E=F;else if(!F){if(U==Z7)continue e;break e}}M[O++]=E}return M}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var tU="4.17.21",nU=2,rU=1,oU=3,kk=4294967295,iU=Array.prototype,aU=Object.prototype,Pk=aU.hasOwnProperty,hx=Cg?Cg.iterator:void 0,lU=Math.max,vx=Math.min,ME=function(e){return function(t,n,a){if(a==null){var r=zd(n),u=r&&Ms(n),c=u&&u.length&&__(n,u);(c?c.length:r)||(a=n,n=t,t=this)}return e(t,n,a)}}(O$);fe.after=ji.after;fe.ary=ji.ary;fe.assign=Sr.assign;fe.assignIn=Sr.assignIn;fe.assignInWith=Sr.assignInWith;fe.assignWith=Sr.assignWith;fe.at=Sr.at;fe.before=ji.before;fe.bind=ji.bind;fe.bindAll=xo.bindAll;fe.bindKey=ji.bindKey;fe.castArray=cr.castArray;fe.chain=_c.chain;fe.chunk=Ln.chunk;fe.compact=Ln.compact;fe.concat=Ln.concat;fe.cond=xo.cond;fe.conforms=xo.conforms;fe.constant=xo.constant;fe.countBy=$o.countBy;fe.create=Sr.create;fe.curry=ji.curry;fe.curryRight=ji.curryRight;fe.debounce=ji.debounce;fe.defaults=Sr.defaults;fe.defaultsDeep=Sr.defaultsDeep;fe.defer=ji.defer;fe.delay=ji.delay;fe.difference=Ln.difference;fe.differenceBy=Ln.differenceBy;fe.differenceWith=Ln.differenceWith;fe.drop=Ln.drop;fe.dropRight=Ln.dropRight;fe.dropRightWhile=Ln.dropRightWhile;fe.dropWhile=Ln.dropWhile;fe.fill=Ln.fill;fe.filter=$o.filter;fe.flatMap=$o.flatMap;fe.flatMapDeep=$o.flatMapDeep;fe.flatMapDepth=$o.flatMapDepth;fe.flatten=Ln.flatten;fe.flattenDeep=Ln.flattenDeep;fe.flattenDepth=Ln.flattenDepth;fe.flip=ji.flip;fe.flow=xo.flow;fe.flowRight=xo.flowRight;fe.fromPairs=Ln.fromPairs;fe.functions=Sr.functions;fe.functionsIn=Sr.functionsIn;fe.groupBy=$o.groupBy;fe.initial=Ln.initial;fe.intersection=Ln.intersection;fe.intersectionBy=Ln.intersectionBy;fe.intersectionWith=Ln.intersectionWith;fe.invert=Sr.invert;fe.invertBy=Sr.invertBy;fe.invokeMap=$o.invokeMap;fe.iteratee=xo.iteratee;fe.keyBy=$o.keyBy;fe.keys=Ms;fe.keysIn=Sr.keysIn;fe.map=$o.map;fe.mapKeys=Sr.mapKeys;fe.mapValues=Sr.mapValues;fe.matches=xo.matches;fe.matchesProperty=xo.matchesProperty;fe.memoize=ji.memoize;fe.merge=Sr.merge;fe.mergeWith=Sr.mergeWith;fe.method=xo.method;fe.methodOf=xo.methodOf;fe.mixin=ME;fe.negate=E_;fe.nthArg=xo.nthArg;fe.omit=Sr.omit;fe.omitBy=Sr.omitBy;fe.once=ji.once;fe.orderBy=$o.orderBy;fe.over=xo.over;fe.overArgs=ji.overArgs;fe.overEvery=xo.overEvery;fe.overSome=xo.overSome;fe.partial=ji.partial;fe.partialRight=ji.partialRight;fe.partition=$o.partition;fe.pick=Sr.pick;fe.pickBy=Sr.pickBy;fe.property=xo.property;fe.propertyOf=xo.propertyOf;fe.pull=Ln.pull;fe.pullAll=Ln.pullAll;fe.pullAllBy=Ln.pullAllBy;fe.pullAllWith=Ln.pullAllWith;fe.pullAt=Ln.pullAt;fe.range=xo.range;fe.rangeRight=xo.rangeRight;fe.rearg=ji.rearg;fe.reject=$o.reject;fe.remove=Ln.remove;fe.rest=ji.rest;fe.reverse=Ln.reverse;fe.sampleSize=$o.sampleSize;fe.set=Sr.set;fe.setWith=Sr.setWith;fe.shuffle=$o.shuffle;fe.slice=Ln.slice;fe.sortBy=$o.sortBy;fe.sortedUniq=Ln.sortedUniq;fe.sortedUniqBy=Ln.sortedUniqBy;fe.split=_o.split;fe.spread=ji.spread;fe.tail=Ln.tail;fe.take=Ln.take;fe.takeRight=Ln.takeRight;fe.takeRightWhile=Ln.takeRightWhile;fe.takeWhile=Ln.takeWhile;fe.tap=_c.tap;fe.throttle=ji.throttle;fe.thru=A_;fe.toArray=cr.toArray;fe.toPairs=Sr.toPairs;fe.toPairsIn=Sr.toPairsIn;fe.toPath=xo.toPath;fe.toPlainObject=cr.toPlainObject;fe.transform=Sr.transform;fe.unary=ji.unary;fe.union=Ln.union;fe.unionBy=Ln.unionBy;fe.unionWith=Ln.unionWith;fe.uniq=Ln.uniq;fe.uniqBy=Ln.uniqBy;fe.uniqWith=Ln.uniqWith;fe.unset=Sr.unset;fe.unzip=Ln.unzip;fe.unzipWith=Ln.unzipWith;fe.update=Sr.update;fe.updateWith=Sr.updateWith;fe.values=Sr.values;fe.valuesIn=Sr.valuesIn;fe.without=Ln.without;fe.words=_o.words;fe.wrap=ji.wrap;fe.xor=Ln.xor;fe.xorBy=Ln.xorBy;fe.xorWith=Ln.xorWith;fe.zip=Ln.zip;fe.zipObject=Ln.zipObject;fe.zipObjectDeep=Ln.zipObjectDeep;fe.zipWith=Ln.zipWith;fe.entries=Sr.toPairs;fe.entriesIn=Sr.toPairsIn;fe.extend=Sr.assignIn;fe.extendWith=Sr.assignInWith;ME(fe,fe);fe.add=pl.add;fe.attempt=xo.attempt;fe.camelCase=_o.camelCase;fe.capitalize=_o.capitalize;fe.ceil=pl.ceil;fe.clamp=TE.clamp;fe.clone=cr.clone;fe.cloneDeep=cr.cloneDeep;fe.cloneDeepWith=cr.cloneDeepWith;fe.cloneWith=cr.cloneWith;fe.conformsTo=cr.conformsTo;fe.deburr=_o.deburr;fe.defaultTo=xo.defaultTo;fe.divide=pl.divide;fe.endsWith=_o.endsWith;fe.eq=cr.eq;fe.escape=_o.escape;fe.escapeRegExp=_o.escapeRegExp;fe.every=$o.every;fe.find=$o.find;fe.findIndex=Ln.findIndex;fe.findKey=Sr.findKey;fe.findLast=$o.findLast;fe.findLastIndex=Ln.findLastIndex;fe.findLastKey=Sr.findLastKey;fe.floor=pl.floor;fe.forEach=$o.forEach;fe.forEachRight=$o.forEachRight;fe.forIn=Sr.forIn;fe.forInRight=Sr.forInRight;fe.forOwn=Sr.forOwn;fe.forOwnRight=Sr.forOwnRight;fe.get=Sr.get;fe.gt=cr.gt;fe.gte=cr.gte;fe.has=Sr.has;fe.hasIn=Sr.hasIn;fe.head=Ln.head;fe.identity=ah;fe.includes=$o.includes;fe.indexOf=Ln.indexOf;fe.inRange=TE.inRange;fe.invoke=Sr.invoke;fe.isArguments=cr.isArguments;fe.isArray=Oi;fe.isArrayBuffer=cr.isArrayBuffer;fe.isArrayLike=cr.isArrayLike;fe.isArrayLikeObject=cr.isArrayLikeObject;fe.isBoolean=cr.isBoolean;fe.isBuffer=cr.isBuffer;fe.isDate=cr.isDate;fe.isElement=cr.isElement;fe.isEmpty=cr.isEmpty;fe.isEqual=cr.isEqual;fe.isEqualWith=cr.isEqualWith;fe.isError=cr.isError;fe.isFinite=cr.isFinite;fe.isFunction=cr.isFunction;fe.isInteger=cr.isInteger;fe.isLength=cr.isLength;fe.isMap=cr.isMap;fe.isMatch=cr.isMatch;fe.isMatchWith=cr.isMatchWith;fe.isNaN=cr.isNaN;fe.isNative=cr.isNative;fe.isNil=cr.isNil;fe.isNull=cr.isNull;fe.isNumber=cr.isNumber;fe.isObject=zd;fe.isObjectLike=cr.isObjectLike;fe.isPlainObject=cr.isPlainObject;fe.isRegExp=cr.isRegExp;fe.isSafeInteger=cr.isSafeInteger;fe.isSet=cr.isSet;fe.isString=cr.isString;fe.isSymbol=cr.isSymbol;fe.isTypedArray=cr.isTypedArray;fe.isUndefined=cr.isUndefined;fe.isWeakMap=cr.isWeakMap;fe.isWeakSet=cr.isWeakSet;fe.join=Ln.join;fe.kebabCase=_o.kebabCase;fe.last=xs;fe.lastIndexOf=Ln.lastIndexOf;fe.lowerCase=_o.lowerCase;fe.lowerFirst=_o.lowerFirst;fe.lt=cr.lt;fe.lte=cr.lte;fe.max=pl.max;fe.maxBy=pl.maxBy;fe.mean=pl.mean;fe.meanBy=pl.meanBy;fe.min=pl.min;fe.minBy=pl.minBy;fe.stubArray=xo.stubArray;fe.stubFalse=xo.stubFalse;fe.stubObject=xo.stubObject;fe.stubString=xo.stubString;fe.stubTrue=xo.stubTrue;fe.multiply=pl.multiply;fe.nth=Ln.nth;fe.noop=xo.noop;fe.now=z7.now;fe.pad=_o.pad;fe.padEnd=_o.padEnd;fe.padStart=_o.padStart;fe.parseInt=_o.parseInt;fe.random=TE.random;fe.reduce=$o.reduce;fe.reduceRight=$o.reduceRight;fe.repeat=_o.repeat;fe.replace=_o.replace;fe.result=Sr.result;fe.round=pl.round;fe.sample=$o.sample;fe.size=$o.size;fe.snakeCase=_o.snakeCase;fe.some=$o.some;fe.sortedIndex=Ln.sortedIndex;fe.sortedIndexBy=Ln.sortedIndexBy;fe.sortedIndexOf=Ln.sortedIndexOf;fe.sortedLastIndex=Ln.sortedLastIndex;fe.sortedLastIndexBy=Ln.sortedLastIndexBy;fe.sortedLastIndexOf=Ln.sortedLastIndexOf;fe.startCase=_o.startCase;fe.startsWith=_o.startsWith;fe.subtract=pl.subtract;fe.sum=pl.sum;fe.sumBy=pl.sumBy;fe.template=_o.template;fe.times=xo.times;fe.toFinite=cr.toFinite;fe.toInteger=Vr;fe.toLength=cr.toLength;fe.toLower=_o.toLower;fe.toNumber=cr.toNumber;fe.toSafeInteger=cr.toSafeInteger;fe.toString=cr.toString;fe.toUpper=_o.toUpper;fe.trim=_o.trim;fe.trimEnd=_o.trimEnd;fe.trimStart=_o.trimStart;fe.truncate=_o.truncate;fe.unescape=_o.unescape;fe.uniqueId=xo.uniqueId;fe.upperCase=_o.upperCase;fe.upperFirst=_o.upperFirst;fe.each=$o.forEach;fe.eachRight=$o.forEachRight;fe.first=Ln.head;ME(fe,function(){var e={};return ch(fe,function(t,n){Pk.call(fe.prototype,n)||(e[n]=t)}),e}(),{chain:!1});fe.VERSION=tU;(fe.templateSettings=_o.templateSettings).imports._=fe;mc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){fe[e].placeholder=fe});mc(["drop","take"],function(e,t){Qr.prototype[e]=function(n){n=n===void 0?1:lU(Vr(n),0);var a=this.__filtered__&&!t?new Qr(this):this.clone();return a.__filtered__?a.__takeCount__=vx(n,a.__takeCount__):a.__views__.push({size:vx(n,kk),type:e+(a.__dir__<0?"Right":"")}),a},Qr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});mc(["filter","map","takeWhile"],function(e,t){var n=t+1,a=n==rU||n==oU;Qr.prototype[e]=function(r){var u=this.clone();return u.__iteratees__.push({iteratee:eo(r),type:n}),u.__filtered__=u.__filtered__||a,u}});mc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Qr.prototype[e]=function(){return this[n](1).value()[0]}});mc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Qr.prototype[e]=function(){return this.__filtered__?new Qr(this):this[n](1)}});Qr.prototype.compact=function(){return this.filter(ah)};Qr.prototype.find=function(e){return this.filter(e).head()};Qr.prototype.findLast=function(e){return this.reverse().find(e)};Qr.prototype.invokeMap=oo(function(e,t){return typeof e=="function"?new Qr(this):this.map(function(n){return ay(n,e,t)})});Qr.prototype.reject=function(e){return this.filter(E_(eo(e)))};Qr.prototype.slice=function(e,t){e=Vr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Qr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Vr(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Qr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Qr.prototype.toArray=function(){return this.take(kk)};ch(Qr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),r=fe[a?"take"+(t=="last"?"Right":""):t],u=a||/^find/.test(t);r&&(fe.prototype[t]=function(){var c=this.__wrapped__,v=a?[1]:arguments,f=c instanceof Qr,g=v[0],_=f||Oi(c),b=function(D){var j=r.apply(fe,ny([D],v));return a&&O?j[0]:j};_&&n&&typeof g=="function"&&g.length!=1&&(f=_=!1);var O=this.__chain__,x=!!this.__actions__.length,M=u&&!O,A=f&&!x;if(!u&&_){c=A?c:new Qr(this);var E=e.apply(c,v);return E.__actions__.push({func:A_,args:[b],thisArg:void 0}),new ju(E,O)}return M&&A?e.apply(this,v):(E=this.thru(b),M?a?E.value()[0]:E.value():E)})});mc(["pop","push","shift","sort","splice","unshift"],function(e){var t=iU[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);fe.prototype[e]=function(){var r=arguments;if(a&&!this.__chain__){var u=this.value();return t.apply(Oi(u)?u:[],r)}return this[n](function(c){return t.apply(Oi(c)?c:[],r)})}});ch(Qr.prototype,function(e,t){var n=fe[t];if(n){var a=n.name+"";Pk.call(wv,a)||(wv[a]=[]),wv[a].push({name:t,func:n})}});wv[v_(void 0,nU).name]=[{name:"wrapper",func:void 0}];Qr.prototype.clone=H7;Qr.prototype.reverse=X7;Qr.prototype.value=eU;fe.prototype.at=_c.at;fe.prototype.chain=_c.wrapperChain;fe.prototype.commit=_c.commit;fe.prototype.next=_c.next;fe.prototype.plant=_c.plant;fe.prototype.reverse=_c.reverse;fe.prototype.toJSON=fe.prototype.valueOf=fe.prototype.value=_c.value;fe.prototype.first=fe.prototype.head;hx&&(fe.prototype[hx]=_c.toIterator);const uU="data:image/svg+xml,%3csvg%20width='27'%20height='20'%20viewBox='0%200%2027%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.6667%203.33329H3.66667V16.6666H23.6667V3.33329ZM3.66667%201.66663C2.74619%201.66663%202%202.41282%202%203.33329V16.6666C2%2017.5871%202.74619%2018.3333%203.66667%2018.3333H23.6667C24.5871%2018.3333%2025.3333%2017.5871%2025.3333%2016.6666V3.33329C25.3333%202.41282%2024.5871%201.66663%2023.6667%201.66663H3.66667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.2196%206.91331H18.2767L19.4%209.89549L20.4758%206.91331L22.5375%206.83044L19.4%2014.8138L17.3565%2014.8966L18.437%2012.3756L16.2196%206.91331Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.1034%207.06327C13.1302%207.04839%2013.1574%207.03404%2013.1848%207.02023C13.5166%206.84295%2013.8759%206.77344%2014.2468%206.77344C14.9611%206.77344%2015.5729%206.97047%2015.9992%207.43635C16.419%207.89521%2016.5934%208.54454%2016.5934%209.3101V12.9168H14.7001V9.4001C14.7001%209.01738%2014.6103%208.80651%2014.5052%208.69229C14.4059%208.58445%2014.2319%208.49677%2013.9067%208.49677C13.7078%208.49677%2013.5468%208.55932%2013.4114%208.69473C13.2534%208.85274%2013.1382%209.08146%2013.1034%209.41091V12.9168H11.2101V6.91344H13.1034V7.06327Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.01665%2012.6833V12.9168H10.83V9.2001C10.83%208.50266%2010.6523%207.90623%2010.247%207.47482L10.2458%207.47354C9.77726%206.97898%209.08554%206.77344%208.26332%206.77344C7.58671%206.77344%206.97894%206.88784%206.50606%207.18452C5.95355%207.51308%205.61381%208.04132%205.48446%208.69979L5.39493%209.15558L6.60828%209.25958C6.45695%209.32645%206.3157%209.40545%206.18578%209.49774C5.6067%209.89006%205.31665%2010.4724%205.31665%2011.1801C5.31665%2011.727%205.52656%2012.1949%205.95194%2012.5464C6.34831%2012.8992%206.87585%2013.0568%207.48332%2013.0568C7.99851%2013.0568%208.45994%2012.9557%208.86073%2012.7671L8.86966%2012.7628C8.91982%2012.7377%208.96882%2012.7112%209.01665%2012.6833ZM7.33362%209.04021C7.60234%208.98907%207.88998%208.96154%208.19236%208.95358L8.93243%208.93444C8.90662%208.77431%208.84911%208.68249%208.7882%208.62627C8.69958%208.54447%208.527%208.46677%208.19332%208.46677C7.90772%208.46677%207.72064%208.51963%207.60769%208.58739L7.60328%208.59004C7.46993%208.66783%207.38847%208.77506%207.35134%208.95452L7.33362%209.04021ZM8.93782%2010.5386L8.28478%2010.5566L8.28191%2010.5567C7.83203%2010.566%207.5658%2010.6502%207.4222%2010.7499C7.3054%2010.831%207.23998%2010.9409%207.23998%2011.1401C7.23998%2011.2037%207.25413%2011.2438%207.32642%2011.2991L7.3313%2011.3029L7.33606%2011.3067C7.40443%2011.3623%207.52395%2011.4134%207.72332%2011.4134C8.07815%2011.4134%208.36218%2011.3062%208.60462%2011.1017C8.80129%2010.9357%208.90794%2010.7499%208.93782%2010.5386Z'%20fill='%23646A73'/%3e%3c/svg%3e",sU="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.6667%203.33329H3.33335V16.6666H16.6667V3.33329ZM3.33335%201.66663C2.41288%201.66663%201.66669%202.41282%201.66669%203.33329V16.6666C1.66669%2017.5871%202.41288%2018.3333%203.33335%2018.3333H16.6667C17.5872%2018.3333%2018.3334%2017.5871%2018.3334%2016.6666V3.33329C18.3334%202.41282%2017.5872%201.66663%2016.6667%201.66663H3.33335Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13.33%205.83667H15.2233V13.95H13.33V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.83%205.83667H12.7233V13.95H10.83V5.83667Z'%20fill='%23646A73'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.51665%2013.7165V13.95H10.33V10.2333C10.33%209.53587%2010.1523%208.93943%209.747%208.50803L9.7458%208.50675C9.27726%208.01218%208.58554%207.80664%207.76332%207.80664C7.08671%207.80664%206.47894%207.92104%206.00606%208.21772C5.45355%208.54628%205.11381%209.07452%204.98446%209.733L4.89493%2010.1888L6.10828%2010.2928C5.95695%2010.3597%205.8157%2010.4386%205.68578%2010.5309C5.1067%2010.9233%204.81665%2011.5057%204.81665%2012.2133C4.81665%2012.7602%205.02656%2013.2281%205.45194%2013.5796C5.84831%2013.9324%206.37585%2014.09%206.98332%2014.09C7.49851%2014.09%207.95994%2013.9889%208.36073%2013.8003L8.36966%2013.796C8.41982%2013.7709%208.46882%2013.7444%208.51665%2013.7165ZM6.83361%2010.0734C7.10234%2010.0223%207.38998%209.99474%207.69236%209.98678L8.43243%209.96764C8.40662%209.80751%208.3491%209.71569%208.2882%209.65948C8.19958%209.57767%208.027%209.49997%207.69332%209.49997C7.40772%209.49997%207.22064%209.55283%207.10769%209.6206L7.10328%209.62324C6.96993%209.70103%206.88847%209.80826%206.85134%209.98773L6.83361%2010.0734ZM8.43782%2011.5718L7.78478%2011.5898L7.78191%2011.5899C7.33203%2011.5992%207.0658%2011.6834%206.9222%2011.7831C6.8054%2011.8642%206.73998%2011.9741%206.73998%2012.1733C6.73998%2012.2369%206.75413%2012.277%206.82642%2012.3323L6.8313%2012.3361L6.83606%2012.3399C6.90443%2012.3955%207.02395%2012.4466%207.22332%2012.4466C7.57815%2012.4466%207.86218%2012.3394%208.10462%2012.1349C8.30129%2011.9689%208.40794%2011.7831%208.43782%2011.5718Z'%20fill='%23646A73'/%3e%3c/svg%3e",cU={class:"list flex-wrap"},fU=["onClick","onMousedown"],dU=["src"],pU=["title"],hU={class:"flex-between"},vU={class:"flex align-center"},mU=["src"],yU=["title"],gU={key:0,class:"status-tag",style:{"margin-left":"auto"}},_U=Jn({__name:"NodeContent",props:{list:{}},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=e,a=t,r=Le(""),u=Le([]);function c(v,f){return f.length?v.filter(g=>g.name.toLowerCase().includes(f.toLowerCase())):v}return eh([()=>r.value,()=>n.list],()=>{u.value=c(n.list,r.value)}),(v,f)=>{const g=Z("el-input"),_=Z("el-avatar"),b=Z("el-tag"),O=Z("el-text"),x=Z("el-popover"),M=Z("el-empty");return be(),tn(br,null,[k(g,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=A=>r.value=A),modelModifiers:{trim:!0},placeholder:v.$t("common.search"),"prefix-icon":"Search",clearable:"",style:{padding:"12px 12px 0 12px"}},null,8,["modelValue","placeholder"]),J("div",cU,[u.value.length?(be(!0),tn(br,{key:0},Jr(u.value,A=>(be(),et(x,{key:A.id,placement:"right",width:280,"show-after":500},{reference:R(()=>[J("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:nn(E=>a("clickNodes",A),["stop"]),onMousedown:nn(E=>a("onmousedown",A),["stop"])},[Qn(vw)(A==null?void 0:A.icon)?(be(),et(_,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[J("img",{src:Qn(Pf)(A==null?void 0:A.icon,Qn(Pf)("./favicon.ico")),alt:""},null,8,dU)]),_:2},1024)):(be(),et(_,{key:1,class:"avatar-green",shape:"square",size:20},{default:R(()=>f[1]||(f[1]=[J("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[1]})),J("span",{class:"ml-8 ellipsis",title:A.name},_e(A.name),9,pU)],40,fU)]),default:R(()=>[J("div",hU,[J("div",vU,[Qn(vw)(A==null?void 0:A.icon)?(be(),et(_,{key:0,shape:"square",size:20,style:{background:"none"}},{default:R(()=>[J("img",{src:Qn(Pf)(A==null?void 0:A.icon,Qn(Pf)("./favicon.ico")),alt:""},null,8,mU)]),_:2},1024)):(be(),et(_,{key:1,class:"avatar-green",shape:"square",size:20},{default:R(()=>f[2]||(f[2]=[J("img",{src:LS,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})),J("span",{class:"font-medium ml-8 break-all",title:A.name},_e(A.name),9,yU)]),A.type?(be(),tn("div",gU,[Qn(tE)(A.type)?(be(),et(b,{key:0,class:"warning-tag"},{default:R(()=>[ot(_e(v.$t("views.application.workflow")),1)]),_:1})):(be(),et(b,{key:1,class:"blue-tag"},{default:R(()=>[ot(_e(v.$t("views.application.simple")),1)]),_:1}))])):En("",!0)]),k(O,{type:"info",size:"small",class:"mt-4"},{default:R(()=>[ot(_e(A.desc),1)]),_:2},1024)]),_:2},1024))),128)):(be(),et(M,{key:1,description:v.$t("common.noData")},null,8,["description"]))])],64)}}}),mx=Zd(_U,[["__scopeId","data-v-deb1c287"]]),bU={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-12 mt-12"},wU={key:0},EU={class:"flex-wrap",style:{gap:"12px",padding:"12px"}},OU=["onClick","onMousedown"],SU={class:"lighter"},xU={class:"flex align-center mb-8"},AU={class:"lighter color-text-primary"},TU={key:1,class:"ml-16 mt-8"},MU=Jn({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=$u("workflowMode"),a=Zi(),{user:r,folder:u}=d_(),c=wI(n||Xj.Application),v=Le(""),f=e,g=t,_=Yn(()=>a.path.includes("resource-management")?"systemManage":"workspace");Yn(()=>tM.tool[_.value]);const b=Le(!1),O=Le("base"),x=Yn(()=>{if(!v.value)return c||[];const H=v.value.toLowerCase();return(c||[]).reduce((B,z)=>{const X=z.list.filter(ee=>ee.label.toLowerCase().includes(H));return X.length&&B.push({...z,list:X}),B},[])});function M(H,B,z){var X;B&&(H.properties.nodeName=B.name,z=="tool"&&(H.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(ee=>({...ee,value:ee.source=="reference"?[]:""}))}),z=="application"&&(H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id})),(X=f.workflowRef)==null||X.addNode(H),g("clickNodes",H)}function A(H,B,z){var X;B&&(H.properties.nodeName=B.name,z=="tool"&&(H.properties.nodeData={...B,toolLibId:B.id,inputFieldList:B.inputFieldList.map(ee=>({...ee,value:ee.source=="reference"?[]:""}))}),z=="application"&&(tE(B.type)?(B.work_flow.nodes[0].properties.nodeData.file_upload_setting,H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id}):H.properties.nodeData={name:B.name,icon:B.icon,applicationId:B.id})),(X=f.workflowRef)==null||X.onmousedown(H),g("onmousedown",H)}const E=Le([]),D=Le([]);async function j(){var B;const H=await u.asyncGetFolder($S.TOOL,{},b);E.value=H.data,u.setCurrentFolder(((B=H.data)==null?void 0:B[0])||{})}async function U(){var B,z,X,ee;const H=await ho({type:"tool",isShared:((B=u.currentFolder)==null?void 0:B.id)==="share",systemType:"workspace"}).getToolList({folderId:((z=u.currentFolder)==null?void 0:z.id)||r.getWorkspaceId(),toolType:"CUSTOM"});D.value=((X=H.data)==null?void 0:X.tools)||H.data||[],D.value=(ee=D.value)==null?void 0:ee.filter(pe=>pe.isActive)}const F=Le([]),I=Le([]);function V(){u.asyncGetFolder($S.APPLICATION,{},b).then(H=>{var B;F.value=H.data,u.setCurrentFolder(((B=H.data)==null?void 0:B[0])||{})})}async function Y(){var B;const H=await ho({type:"application",systemType:"workspace"}).getAllApplication({folderId:((B=u.currentFolder)==null?void 0:B.id)||r.getWorkspaceId()});I.value=H.data.filter(z=>z.id!==f.id&&z.isPublish)}async function K(H){H==="tool"?(await j(),U()):H==="application"&&(V(),Y())}return Hr(()=>{}),(H,B)=>{const z=Z("search"),X=Z("el-icon"),ee=Z("el-input"),pe=Z("el-text"),ce=Z("el-popover"),Pe=Z("el-scrollbar"),Ee=Z("el-tab-pane"),le=Z("el-tabs");return va((be(),tn("div",{class:"workflow-dropdown-menu border border-r-6 white-bg",style:qj({width:(O.value==="base","400px")})},[k(le,{modelValue:O.value,"onUpdate:modelValue":B[5]||(B[5]=ie=>O.value=ie),class:"workflow-dropdown-tabs",onTabChange:K},{default:R(()=>[va(J("div",bU,[k(ee,{modelValue:v.value,"onUpdate:modelValue":B[0]||(B[0]=ie=>v.value=ie),class:"mr-12 ml-12",placeholder:H.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:R(()=>[k(X,{class:"el-input__icon"},{default:R(()=>[k(z)]),_:1})]),_:1},8,["modelValue","placeholder"])],512),[[th,O.value==="base"]]),k(Ee,{label:H.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:R(()=>[k(Pe,{height:"400"},{default:R(()=>[x.value.length>0?(be(),tn("div",wU,[(be(!0),tn(br,null,Jr(x.value,(ie,$e)=>(be(),tn(br,{key:$e},[k(pe,{type:"info",size:"small",class:"color-secondary ml-12"},{default:R(()=>[ot(_e(ie.label),1)]),_:2},1024),J("div",EU,[(be(!0),tn(br,null,Jr(ie.list,(Ge,ht)=>(be(),et(ce,{key:ht,placement:"right",width:280,"show-after":500},{reference:R(()=>[J("div",{class:"list-item flex align-center border border-r-6 p-8-12 cursor",style:{width:"calc(50% - 6px)"},onClick:nn(Fe=>M(Ge),["stop"]),onMousedown:nn(Fe=>A(Ge),["stop"])},[(be(),et(Wm(Qn(Gm)(`${Ge.type}-icon`)),{class:"mr-8",size:20})),J("div",SU,_e(Ge.label),1)],40,OU)]),default:R(()=>[J("div",xU,[(be(),et(Wm(Qn(Gm)(`${Ge.type}-icon`)),{class:"mr-8",size:32})),J("div",AU,_e(Ge.label),1)]),k(pe,{type:"info",size:"small",class:"color-secondary lighter"},{default:R(()=>[ot(_e(Ge.text),1)]),_:2},1024)]),_:2},1024))),128))])],64))),128))])):(be(),tn("div",TU,[k(pe,{type:"info"},{default:R(()=>[ot(_e(H.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),k(Ee,{label:H.$t("views.tool.title"),name:"tool"},{default:R(()=>[k(Pe,{height:"450"},{default:R(()=>[k(mx,{list:D.value,onClickNodes:B[1]||(B[1]=ie=>M(Qn(VS),ie,"tool")),onOnmousedown:B[2]||(B[2]=ie=>A(Qn(VS),ie,"tool"))},null,8,["list"])]),_:1})]),_:1},8,["label"]),k(Ee,{label:H.$t("views.application.title"),name:"application"},{default:R(()=>[k(Pe,{height:"450"},{default:R(()=>[k(mx,{list:I.value,onClickNodes:B[3]||(B[3]=ie=>M(Qn(BS),ie,"application")),onOnmousedown:B[4]||(B[4]=ie=>A(Qn(BS),ie,"application"))},null,8,["list"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],4)),[[th,e.show]])}}}),Nk=Zd(MU,[["__scopeId","data-v-2b2bdfb7"]]),kU={class:"flex-between"},PU={class:"ellipsis-1 break-all"},NU={key:0,src:uU,alt:""},RU={key:1,src:sU,alt:""},CU={style:{width:"280px"},class:"p-12-16"},DU={class:"mt-8 lighter"},jU={class:"title-decoration-1 mb-8 mt-8"},IU=["onMouseenter"],LU={class:"break-all"},$U={class:"dialog-footer"},FU=Jn({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const t=Zi(),{params:{id:n}}=t,a=Le({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),r=Le(!1),u=Le(),c=Le(),v=Le(!1),f=Le({title:""}),g=Yn({set:B=>{ke.set(I.nodeModel.properties,"condition",B)},get:()=>I.nodeModel.properties.condition?I.nodeModel.properties.condition:(ke.set(I.nodeModel.properties,"condition","AND"),!0)}),_=Yn({set:B=>{ke.set(I.nodeModel.properties,"showNode",B)},get:()=>I.nodeModel.properties.showNode!==void 0?I.nodeModel.properties.showNode:(ke.set(I.nodeModel.properties,"showNode",!0),!0)}),b=B=>{B.ctrlKey||B.metaKey||B.stopPropagation()},O=Yn(()=>I.nodeModel.properties.status?I.nodeModel.properties.status:200);function x(){f.value.title=I.nodeModel.properties.nodeName,v.value=!0}const M=async B=>{B&&await B.validate(z=>{var X;z&&((X=I.nodeModel.graphModel.nodes.filter(ee=>ee.id!==I.nodeModel.id))!=null&&X.some(ee=>ee.properties.nodeName===f.value.title)?li(Ot("views.applicationWorkflow.tip.repeatedNodeError")):(ke.set(I.nodeModel.properties,"nodeName",f.value.title),v.value=!1,B.resetFields()))})},A=B=>{B!=null&&B.shiftKey||I.nodeModel.graphModel.clearSelectElements(),ke.set(I.nodeModel,"isSelected",!I.nodeModel.isSelected),ke.set(I.nodeModel,"isHovered",!I.nodeModel.isSelected),I.nodeModel.graphModel.toFront(I.nodeModel.id)},E=Le(null),D=()=>{I.nodeModel.graphModel.clearSelectElements();const B=I.nodeModel.graphModel.cloneNode(I.nodeModel.id);ke.set(B,"isSelected",!0),ke.set(B,"isHovered",!0),I.nodeModel.graphModel.toFront(B.id)},j=()=>{nE(Ot("common.tip"),Ot("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Ot("common.confirm"),confirmButtonClass:"danger"}).then(()=>{I.nodeModel.type===ei.LoopNode&&I.nodeModel.graphModel.getNodeOutgoingNode(I.nodeModel.id).forEach(z=>{z.type==="loop-body-node"&&I.nodeModel.graphModel.deleteNode(z.id)}),I.nodeModel.graphModel.deleteNode(I.nodeModel.id)}),I.nodeModel.graphModel.eventCenter.emit("delete_node")},U=B=>{B.height&&(I.nodeModel.virtual||(a.value.stepContainerHeight=B.height,I.nodeModel.setHeight(a.value.stepContainerHeight)))};function F(B){var ee,pe,ce;const z=B.properties.width?B.properties.width:214,X=I.nodeModel.graphModel.addNode({type:B.type,properties:B.properties,x:((ee=u.value)==null?void 0:ee.x)+z/2+200,y:((pe=u.value)==null?void 0:pe.y)-B.height});I.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:I.nodeModel.id,sourceAnchorId:(ce=u.value)==null?void 0:ce.id,targetNodeId:X.id,targetAnchorId:X.id+"_left"}),H()}const I=e,V=Yn(()=>{var B;return I.nodeModel.properties.config.fields?(B=I.nodeModel.properties.config.fields)==null?void 0:B.map(X=>({label:X.label,value:X.value,globeLabel:`{{${I.nodeModel.properties.nodeName}.${X.value}}}`,globeValue:`{{context['${I.nodeModel.id}'].${X.value}}}`})):[]});function Y(B){return![ei.Start,ei.Base,ei.LoopStartNode.toString()].includes(B)}const K=B=>{r.value=!0,u.value=B},H=()=>{r.value=!1,u.value=void 0};return Hr(()=>{ke.set(I.nodeModel,"openNodeMenu",B=>{r.value?H():K(B)})}),(B,z)=>{var Se;const X=Z("ArrowDownBold"),ee=Z("el-icon"),pe=Z("el-button"),ce=Z("el-option"),Pe=Z("el-select"),Ee=Z("el-dropdown"),le=Z("AppIcon"),ie=Z("el-dropdown-item"),$e=Z("el-dropdown-menu"),Ge=Z("el-alert"),ht=Z("el-tooltip"),Fe=Z("el-collapse-transition"),Nt=Z("el-input"),Yt=Z("el-form-item"),kt=Z("el-form"),On=Z("el-dialog"),Be=Hd("resize");return be(),tn("div",{onMousedown:A,class:"workflow-node-container p-16",style:{overflow:"visible"}},[J("div",{class:Es(["step-container app-card p-16",{isSelected:I.nodeModel.isSelected,error:O.value!==200}]),style:{overflow:"visible"}},[va((be(),tn("div",null,[J("div",kU,[J("div",{class:"flex align-center",onDragstart:z[0]||(z[0]=nn(()=>{},["prevent"])),onDrag:z[1]||(z[1]=nn(()=>{},["prevent"])),onDragover:z[2]||(z[2]=nn(()=>{},["prevent"])),onDragend:z[3]||(z[3]=nn(()=>{},["prevent"])),style:{width:"69%"}},[(be(),et(Wm(Qn(Gm)(`${B.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(Se=B.nodeModel)==null?void 0:Se.properties.node_data},null,8,["item"])),J("h4",PU,_e(B.nodeModel.properties.nodeName),1)],32),J("div",{onMousemove:z[6]||(z[6]=nn(()=>{},["stop"])),onMousedown:z[7]||(z[7]=nn(()=>{},["stop"])),onKeydown:z[8]||(z[8]=nn(()=>{},["stop"])),onClick:z[9]||(z[9]=nn(()=>{},["stop"]))},[k(pe,{text:"",onClick:z[4]||(z[4]=Ce=>_.value=!_.value)},{default:R(()=>[k(ee,{class:Es(["arrow-icon color-secondary",_.value?"rotate-180":""])},{default:R(()=>[k(X)]),_:1},8,["class"])]),_:1}),Y(B.nodeModel.type)?(be(),et(Ee,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:R(()=>[J("div",CU,[J("h5",null,_e(B.$t("views.applicationWorkflow.condition.title")),1),J("p",DU,[J("span",null,_e(B.$t("views.applicationWorkflow.condition.front")),1),k(Pe,{modelValue:g.value,"onUpdate:modelValue":z[5]||(z[5]=Ce=>g.value=Ce),size:"small",style:{width:"60px",margin:"0 8px"}},{default:R(()=>[k(ce,{label:B.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),k(ce,{label:B.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),J("span",null,_e(B.$t("views.applicationWorkflow.condition.text")),1)])])]),default:R(()=>[k(pe,{text:""},{default:R(()=>[g.value==="OR"?(be(),tn("img",NU)):En("",!0),g.value==="AND"?(be(),tn("img",RU)):En("",!0)]),_:1})]),_:1})):En("",!0),Y(B.nodeModel.type)?(be(),et(Ee,{key:1,teleported:!1,trigger:"click"},{dropdown:R(()=>[k($e,{style:{"min-width":"80px"}},{default:R(()=>[k(ie,{onClick:x,class:"p-8"},{default:R(()=>[ot(_e(B.$t("common.rename")),1)]),_:1}),k(ie,{onClick:D,class:"p-8"},{default:R(()=>[ot(_e(B.$t("common.copy")),1)]),_:1}),k(ie,{onClick:j,class:"border-t p-8"},{default:R(()=>[ot(_e(B.$t("common.delete")),1)]),_:1})]),_:1})]),default:R(()=>[k(pe,{text:""},{default:R(()=>[k(le,{iconName:"app-more",class:"color-secondary"})]),_:1})]),_:1})):En("",!0)],32)]),k(Fe,null,{default:R(()=>[va(J("div",{onMousedown:z[11]||(z[11]=nn(()=>{},["stop"])),onKeydown:z[12]||(z[12]=nn(()=>{},["stop"])),onClick:z[13]||(z[13]=nn(()=>{},["stop"])),class:"mt-16"},[O.value!=200?(be(),et(Ge,{key:0,class:"mb-16",title:I.nodeModel.type==="application-node"?B.$t("views.applicationWorkflow.tip.applicationNodeError"):B.$t("views.applicationWorkflow.tip.toolNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):En("",!0),Yj(B.$slots,"default",{},void 0,!0),V.value.length>0?(be(),tn(br,{key:1},[J("h5",jU,_e(B.$t("common.param.outputParam")),1),(be(!0),tn(br,null,Jr(V.value,(Ce,Ye)=>(be(),tn("div",{key:Ye,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:bt=>E.value=Ye,onMouseleave:z[10]||(z[10]=bt=>E.value=null)},[J("span",LU,_e(Ce.label)+" "+_e("{"+Ce.value+"}"),1),E.value===Ye?(be(),et(ht,{key:0,effect:"dark",content:B.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(pe,{link:"",onClick:bt=>Qn(mw)(Ce.globeLabel),style:{padding:"0"}},{default:R(()=>[k(le,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):En("",!0)],40,IU))),128))],64)):En("",!0)],544),[[th,_.value]])]),_:3})])),[[Be,U]])],2),k(Fe,null,{default:R(()=>[r.value?(be(),et(Nk,{key:0,onMousemove:z[14]||(z[14]=nn(()=>{},["stop"])),onMousedown:z[15]||(z[15]=nn(()=>{},["stop"])),onClick:z[16]||(z[16]=nn(()=>{},["stop"])),onWheel:b,show:r.value,id:Qn(n),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:F},null,8,["show","id"])):En("",!0)]),_:1}),k(On,{title:B.$t("views.applicationWorkflow.nodeName"),modelValue:v.value,"onUpdate:modelValue":z[21]||(z[21]=Ce=>v.value=Ce),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:z[22]||(z[22]=nn(()=>{},["prevent"]))},{footer:R(()=>[J("span",$U,[k(pe,{onClick:z[19]||(z[19]=nn(Ce=>v.value=!1,["prevent"]))},{default:R(()=>[ot(_e(B.$t("common.cancel")),1)]),_:1}),k(pe,{type:"primary",onClick:z[20]||(z[20]=Ce=>M(c.value))},{default:R(()=>[ot(_e(B.$t("common.save")),1)]),_:1})])]),default:R(()=>[k(kt,{"label-position":"top",ref_key:"titleFormRef",ref:c,model:f.value},{default:R(()=>[k(Yt,{prop:"title",rules:[{required:!0,message:B.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:R(()=>[k(Nt,{modelValue:f.value.title,"onUpdate:modelValue":z[17]||(z[17]=Ce=>f.value.title=Ce),onBlur:z[18]||(z[18]=Ce=>f.value.title=f.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}}),Ho=Zd(FU,[["__scopeId","data-v-67b9020e"]]),UU={class:"flex-between mb-8"},VU={class:"flex"},BU=["id"],WU={class:"p-8"},GU={class:"layout-bg"},zU={class:"flex-between p-16 ml-8"},HU={class:"p-16-24 pt-0",style:{height:"calc(100vh - 200px)"}},XU=["src"],qU=["title"],YU={class:"flex-between"},KU={class:"flex"},ZU=Jn({__name:"ToolDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=Zi(),r=n,{folder:u,user:c}=d_();Yn(()=>a.path.includes("shared")?"systemShare":a.path.includes("resource-management")?"systemManage":"workspace");const v=Le(!1),f=Le([]),g=Le(""),_=Le([]),b=Le([]),O=Le(!1);eh(v,K=>{K||(f.value=[],g.value="",_.value=[],b.value=[])}),eh(g,K=>{K?_.value=b.value.filter(H=>H.name.includes(K)):_.value=b.value});function x(){}function M(){f.value=[]}const A=K=>{f.value=K||[],V(),v.value=!0},E=()=>{r("refresh",{toolIds:f.value}),v.value=!1},D=()=>{g.value="",b.value=[],Y()},j=Le([]),U=Le({}),F=Le(!1);function I(K){var H;K.id!==((H=U.value)==null?void 0:H.id)&&(U.value=K,Y())}function V(){const K={};u.asyncGetFolder("TOOL",K,F).then(H=>{var B;j.value=H.data,U.value=((B=H.data)==null?void 0:B[0])||{},Y()})}function Y(){var H;const K=((H=U.value)==null?void 0:H.id)||c.getWorkspaceId();ho({type:"tool",isShared:K==="share",systemType:"workspace"}).getToolList({folderId:K,toolType:"CUSTOM"}).then(B=>{var z,X,ee;b.value=((z=B.data)==null?void 0:z.tools)||B.data||[],b.value=(X=b.value)==null?void 0:X.filter(pe=>pe.isActive),_.value=B.data.tools||B.data,_.value=(ee=_.value)==null?void 0:ee.filter(pe=>pe.isActive)})}return t({open:A}),(K,H)=>{const B=Z("Refresh"),z=Z("el-icon"),X=Z("el-button"),ee=Z("el-input"),pe=Z("el-avatar"),ce=Z("ToolIcon"),Pe=Z("el-col"),Ee=Z("el-row"),le=Z("el-empty"),ie=Z("el-scrollbar"),$e=Z("el-text"),Ge=Z("el-dialog"),ht=Hd("loading");return be(),et(Ge,{modelValue:v.value,"onUpdate:modelValue":H[3]||(H[3]=Fe=>v.value=Fe),width:"1000","append-to-body":"",class:"addTool-dialog","align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1},{header:R(({titleId:Fe,titleClass:Nt})=>[J("div",UU,[J("div",VU,[J("h4",{id:Fe,class:Es([Nt,"mr-8"])},_e(K.$t("views.tool.settingTool")),11,BU)]),k(X,{link:"",class:"mr-24",onClick:D},{default:R(()=>[k(z,{size:18},{default:R(()=>[k(B)]),_:1})]),_:1})])]),footer:R(()=>[J("div",YU,[J("div",KU,[f.value.length>0?(be(),et($e,{key:0,type:"info",class:"color-secondary mr-8"},{default:R(()=>[ot(_e(K.$t("common.selected"))+" "+_e(f.value.length),1)]),_:1})):En("",!0),f.value.length>0?(be(),et(X,{key:1,link:"",type:"primary",onClick:M},{default:R(()=>[ot(_e(K.$t("common.clear")),1)]),_:1})):En("",!0)]),J("span",null,[k(X,{onClick:H[2]||(H[2]=nn(Fe=>v.value=!1,["prevent"]))},{default:R(()=>[ot(_e(K.$t("common.cancel")),1)]),_:1}),k(X,{type:"primary",onClick:E},{default:R(()=>[ot(_e(K.$t("common.add")),1)]),_:1})])])]),default:R(()=>[k(Jj,{showCollapse:"",class:"application-manage"},{left:R(()=>{var Fe;return[J("div",WU,[va(k(Zj,{data:j.value,currentNodeKey:(Fe=U.value)==null?void 0:Fe.id,onHandleNodeClick:I,canOperation:!1,showShared:"",shareTitle:K.$t("views.shared.shared_tool"),treeStyle:{height:"calc(100vh - 240px)"}},null,8,["data","currentNodeKey","shareTitle"]),[[ht,F.value]])])]}),default:R(()=>{var Fe;return[J("div",GU,[J("div",zU,[J("h4",null,_e((Fe=U.value)==null?void 0:Fe.name),1),k(ee,{modelValue:g.value,"onUpdate:modelValue":H[0]||(H[0]=Nt=>g.value=Nt),placeholder:K.$t("common.search"),"prefix-icon":"Search",class:"w-240 mr-8",clearable:""},null,8,["modelValue","placeholder"])]),k(ie,null,{default:R(()=>[J("div",HU,[_.value.length?va((be(),et(Ee,{key:0,gutter:12},{default:R(()=>[(be(!0),tn(br,null,Jr(_.value,(Nt,Yt)=>(be(),et(Pe,{span:8,key:Yt,class:"mb-16"},{default:R(()=>[k(Kj,{"value-field":"id",data:Nt,modelValue:f.value,"onUpdate:modelValue":H[1]||(H[1]=kt=>f.value=kt),onChange:x},{icon:R(()=>[Nt!=null&&Nt.icon?(be(),et(pe,{key:0,shape:"square",size:32,style:{background:"none"},class:"mr-8"},{default:R(()=>[J("img",{src:Qn(Pf)(Nt==null?void 0:Nt.icon),alt:""},null,8,XU)]),_:2},1024)):(be(),et(ce,{key:1,size:32,type:Nt==null?void 0:Nt.toolType},null,8,["type"]))]),default:R(()=>[J("span",{class:"ellipsis cursor ml-12",title:Nt.name},_e(Nt.name),9,qU)]),_:2},1032,["data","modelValue"])]),_:2},1024))),128))]),_:1})),[[ht,O.value]]):(be(),et(le,{key:1,description:K.$t("common.noData")},null,8,["description"]))])]),_:1})])]}),_:1})]),_:1},8,["modelValue"])}}}),JU={class:"flex align-center"},QU=["src"],eV={class:"dialog-footer"},tV=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,nV=Jn({__name:"McpServersDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le({mcpServers:"",mcpToolId:"",mcpSource:"referencing"}),c=Le([]),v=Le(!1),f=Le(!1);eh(v,O=>{var x;O||(u.value={mcpServers:"",mcpToolId:"",mcpSource:"referencing"},(x=r.value)==null||x.clearValidate())});function g(){u.value.mcpSource==="referencing"?u.value.mcpServers="":u.value.mcpToolId=""}const _=(O,x)=>{u.value={...u.value,...O},O.mcpServers?u.value.mcpSource="custom":O.mcpToolId?(u.value.mcpSource="referencing",u.value.mcpToolId=O.mcpToolId,u.value.mcpServers=""):u.value.mcpSource=O.mcpSource||"referencing",v.value=!0,c.value=x||[]},b=()=>{r.value.validate(O=>{if(O){try{JSON.parse(u.value.mcpServers||"{}")}catch{li(Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}a("refresh",u.value),v.value=!1}})};return t({open:_}),(O,x)=>{const M=Z("el-radio"),A=Z("el-radio-group"),E=Z("el-form-item"),D=Z("el-avatar"),j=Z("el-tag"),U=Z("el-option"),F=Z("el-select"),I=Z("el-text"),V=Z("el-input"),Y=Z("el-form"),K=Z("el-button"),H=Z("el-dialog");return be(),et(H,{"align-center":"",title:O.$t("common.setting"),modelValue:v.value,"onUpdate:modelValue":x[6]||(x[6]=B=>v.value=B),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:R(()=>[J("span",eV,[k(K,{onClick:x[4]||(x[4]=nn(B=>v.value=!1,["prevent"]))},{default:R(()=>[ot(_e(O.$t("common.cancel")),1)]),_:1}),k(K,{type:"primary",onClick:x[5]||(x[5]=B=>b()),loading:f.value},{default:R(()=>[ot(_e(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(Y,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:u.value,"require-asterisk-position":"right","hide-required-asterisk":"",onSubmit:x[3]||(x[3]=nn(()=>{},["prevent"]))},{default:R(()=>[k(E,null,{default:R(()=>[k(A,{modelValue:u.value.mcpSource,"onUpdate:modelValue":x[0]||(x[0]=B=>u.value.mcpSource=B),onChange:g},{default:R(()=>[k(M,{value:"referencing"},{default:R(()=>[ot(_e(O.$t("views.applicationWorkflow.nodes.mcpNode.reference")),1)]),_:1}),k(M,{value:"custom"},{default:R(()=>[ot(_e(O.$t("common.custom")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),u.value.mcpSource==="referencing"?(be(),et(E,{key:0,rules:[{required:!0,message:O.$t("common.selectPlaceholder")+` MCP ${O.$t("views.tool.title")}`}],prop:"mcpToolId"},{label:R(()=>[ot(_e(`MCP ${O.$t("views.tool.title")}`)+" ",1),x[7]||(x[7]=J("span",{class:"color-danger"},"*",-1))]),default:R(()=>[k(F,{modelValue:u.value.mcpToolId,"onUpdate:modelValue":x[1]||(x[1]=B=>u.value.mcpToolId=B),filterable:""},{default:R(()=>[(be(!0),tn(br,null,Jr(c.value,B=>(be(),et(U,{key:B.id,label:B.name,value:B.id},{default:R(()=>[J("div",JU,[B!=null&&B.icon?(be(),et(D,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:R(()=>[J("img",{src:Qn(Pf)(B==null?void 0:B.icon),alt:""},null,8,QU)]),_:2},1024)):(be(),et(D,{key:1,shape:"square",size:20,class:"mr-8"},{default:R(()=>x[8]||(x[8]=[J("img",{src:Qj,style:{width:"75%"},alt:""},null,-1)])),_:1,__:[8]})),J("span",null,_e(B.name),1),B.scope==="SHARED"?(be(),et(j,{key:2,type:"info",class:"info-tag ml-8 mt-4"},{default:R(()=>[ot(_e(O.$t("views.shared.title")),1)]),_:1})):En("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])):(be(),et(E,{key:1,prop:"mcpServers",rules:[{required:!0,message:O.$t("common.inputPlaceholder")+" "+O.$t("views.tool.form.mcp.label")}]},{label:R(()=>[ot(_e(O.$t("views.tool.form.mcp.label"))+" ",1),x[9]||(x[9]=J("span",{class:"color-danger"},"*",-1)),k(I,{type:"info",class:"color-secondary"},{default:R(()=>[ot(" （"+_e(O.$t("views.tool.form.mcp.tip"))+"） ",1)]),_:1})]),default:R(()=>[k(V,{modelValue:u.value.mcpServers,"onUpdate:modelValue":x[2]||(x[2]=B=>u.value.mcpServers=B),rows:6,type:"textarea",placeholder:tV},null,8,["modelValue"])]),_:1},8,["rules"]))]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),rV={class:"title-decoration-1 mb-8"},oV={class:"flex-between w-full"},iV={class:"flex align-center"},aV={class:"mr-4"},lV={class:"flex-between"},uV={class:"flex-between mb-16"},sV={key:0,class:"w-full mb-16"},cV={key:0,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},fV={class:"flex align-center",style:{"line-height":"20px"}},dV=["title"],pV={class:"flex-between mb-16"},hV={class:"lighter"},vV={key:1,class:"w-full mb-16"},mV={class:"flex align-center",style:{"line-height":"20px"}},yV=["src"],gV=["title"],_V={class:"flex-between"},bV={class:"mr-4"},wV={class:"flex"},EV={class:"flex-between w-full"},OV={class:"flex align-center"},SV={class:"mr-4"},xV=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=le=>le.ctrlKey===!0?(le.preventDefault(),!0):(le.stopPropagation(),!0);function c(le){ke.set(O.nodeModel.properties.nodeData,"system",le)}function v(le){ke.set(O.nodeModel.properties.nodeData,"prompt",le)}const f=le=>{var ie;le?(ie=A.value)==null||ie.reset_default(le,a):I({})},_={modelId:"",system:"",prompt:`${Ot("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Ot("views.applicationWorkflow.nodes.searchKnowledgeNode.label")}.data}}
${Ot("views.problem.title")}：
{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:1,isResult:!0,temperature:null,maxTokens:null,dialogueType:"WORKFLOW",modelSetting:{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}},b=Yn({get:()=>O.nodeModel.properties.nodeData?(O.nodeModel.properties.nodeData.modelSetting||ke.set(O.nodeModel.properties.nodeData,"modelSetting",{reasoningContent_start:"<think>",reasoningContent_end:"</think>",reasoningContentEnable:!1}),O.nodeModel.properties.nodeData):(ke.set(O.nodeModel.properties,"nodeData",_),O.nodeModel.properties.nodeData),set:le=>{ke.set(O.nodeModel.properties,"nodeData",le)}}),O=e,x=Le(),M=Le(null),A=Le(),E=Le(),D=()=>{var le;return(le=x.value)==null?void 0:le.validate().catch(ie=>Promise.reject({node:O.nodeModel,errMessage:ie}))},j=t();function U(){var ie;const le=r.value==="systemManage"?{modelType:"LLM",workspaceId:(ie=j.value)==null?void 0:ie.workspaceId}:{modelType:"LLM"};ho({type:"model",systemType:r.value}).getSelectModelList(le).then($e=>{M.value=ke.groupBy($e==null?void 0:$e.data,"provider")})}const F=le=>{var ie;le&&((ie=A.value)==null||ie.open(le,a,b.value.modelParamsSetting))};function I(le){ke.set(O.nodeModel.properties.nodeData,"modelParamsSetting",le)}function V(le){let ie=ke.cloneDeep(O.nodeModel.properties.nodeData.modelSetting);ie={...ie,...le},ke.set(O.nodeModel.properties.nodeData,"modelSetting",ie)}const Y=Le();function K(){const le={mcpServers:b.value.mcpServers,mcpToolId:b.value.mcpToolId,mcpSource:b.value.mcpSource};Y.value.open(le,Pe.value)}function H(le){ke.set(O.nodeModel.properties.nodeData,"mcpServers",le.mcpServers),ke.set(O.nodeModel.properties.nodeData,"mcpToolId",le.mcpToolId),ke.set(O.nodeModel.properties.nodeData,"mcpSource",le.mcpSource)}const B=Le();function z(){B.value.open(b.value.toolIds)}function X(le){ke.set(O.nodeModel.properties.nodeData,"toolIds",le.toolIds)}function ee(le){const ie=O.nodeModel.properties.nodeData.toolIds.filter($e=>$e!==le);ke.set(O.nodeModel.properties.nodeData,"toolIds",ie)}const pe=Le([]);function ce(){var ie;const le=r.value==="systemManage"?{scope:"WORKSPACE",toolType:"CUSTOM",workspaceId:(ie=j.value)==null?void 0:ie.workspaceId}:{scope:"WORKSPACE",toolType:"CUSTOM"};ho({type:"tool",systemType:r.value}).getAllToolList(le).then($e=>{pe.value=[...$e.data.shared_tools,...$e.data.tools].filter(Ge=>Ge.isActive)})}const Pe=Le([]);function Ee(){var ie;const le=r.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(ie=j.value)==null?void 0:ie.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};ho({type:"tool",systemType:r.value}).getAllToolList(le).then($e=>{Pe.value=[...$e.data.shared_tools,...$e.data.tools].filter(Ge=>Ge.isActive)})}return Hr(()=>{var le,ie,$e,Ge;U(),typeof((le=O.nodeModel.properties.nodeData)==null?void 0:le.isResult)>"u"&&gc(O.nodeModel)&&ke.set(O.nodeModel.properties.nodeData,"isResult",!0),ke.set(O.nodeModel,"validate",D),b.value.dialogueType||(b.value.dialogueType="WORKFLOW"),(ie=O.nodeModel.properties.nodeData)!=null&&ie.mcpToolId&&(ke.set(O.nodeModel.properties.nodeData,"mcp_tool_ids",[($e=O.nodeModel.properties.nodeData)==null?void 0:$e.mcpToolId]),ke.set(O.nodeModel.properties.nodeData,"mcp_tool_id",void 0)),((Ge=O.nodeModel.properties.nodeData)==null?void 0:Ge.mcpOutputEnable)===void 0&&ke.set(O.nodeModel.properties.nodeData,"mcpOutputEnable",!0),ce(),Ee()}),(le,ie)=>{const $e=Z("el-button"),Ge=Z("el-form-item"),ht=Z("el-tooltip"),Fe=Z("el-option"),Nt=Z("el-select"),Yt=Z("el-input-number"),kt=Z("el-switch"),On=Z("ToolIcon"),Be=Z("Close"),Se=Z("el-icon"),Ce=Z("el-avatar"),Ye=Z("el-form"),bt=Z("el-card");return be(),et(Ho,{nodeModel:le.nodeModel},{default:R(()=>[J("h5",rV,_e(le.$t("views.applicationWorkflow.nodeSetting")),1),k(bt,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(Ye,{onSubmit:ie[15]||(ie[15]=nn(()=>{},["prevent"])),model:b.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:x,"hide-required-asterisk":""},{default:R(()=>{var vt,Wt,Qt;return[k(Ge,{label:le.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:le.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[J("div",oV,[J("div",null,[J("span",null,[ot(_e(le.$t("views.application.form.aiModel.label")),1),ie[16]||(ie[16]=J("span",{class:"color-danger"},"*",-1))])]),k($e,{disabled:!b.value.modelId,type:"primary",link:"",onClick:ie[0]||(ie[0]=Gt=>F(b.value.modelId)),onRefreshForm:I},{default:R(()=>[k(co,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(nh,{onChange:f,onWheel:u,teleported:!1,modelValue:b.value.modelId,"onUpdate:modelValue":ie[1]||(ie[1]=Gt=>b.value.modelId=Gt),placeholder:le.$t("views.application.form.aiModel.placeholder"),options:M.value,onSubmitModel:U,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(Ge,{label:le.$t("views.application.form.roleSettings.label")},{default:R(()=>[k(pc,{title:le.$t("views.application.form.roleSettings.label"),modelValue:b.value.system,"onUpdate:modelValue":ie[2]||(ie[2]=Gt=>b.value.system=Gt),style:{height:"100px"},onSubmitDialog:c,placeholder:le.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(Ge,{label:le.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:le.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[J("div",iV,[J("div",aV,[J("span",null,[ot(_e(le.$t("views.application.form.prompt.label")),1),ie[17]||(ie[17]=J("span",{class:"color-danger"},"*",-1))])]),k(ht,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(le.$t("views.application.form.prompt.tooltip")),1)]),default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(pc,{onWheel:u,title:le.$t("views.application.form.prompt.label"),modelValue:b.value.prompt,"onUpdate:modelValue":ie[3]||(ie[3]=Gt=>b.value.prompt=Gt),style:{height:"150px"},onSubmitDialog:v},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(Ge,{label:le.$t("views.application.form.historyRecord.label")},{label:R(()=>[J("div",lV,[J("div",null,_e(le.$t("views.application.form.historyRecord.label")),1),k(Nt,{modelValue:b.value.dialogueType,"onUpdate:modelValue":ie[4]||(ie[4]=Gt=>b.value.dialogueType=Gt),type:"small",style:{width:"100px"}},{default:R(()=>[k(Fe,{label:le.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(Fe,{label:le.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[k(Yt,{modelValue:b.value.dialogueNumber,"onUpdate:modelValue":ie[5]||(ie[5]=Gt=>b.value.dialogueNumber=Gt),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),J("div",uV,[ie[18]||(ie[18]=J("div",{class:"lighter"},"MCP",-1)),J("div",null,[b.value.mcpEnable?(be(),et($e,{key:0,type:"primary",class:"mr-4",link:"",onClick:K,onRefreshForm:I},{default:R(()=>[k(co,{iconName:"app-setting"})]),_:1})):En("",!0),k(kt,{size:"small",modelValue:b.value.mcpEnable,"onUpdate:modelValue":ie[6]||(ie[6]=Gt=>b.value.mcpEnable=Gt)},null,8,["modelValue"])])]),b.value.mcpToolId||b.value.mcpServers&&b.value.mcpServers.length>0?(be(),tn("div",sV,[Qn(ou)(Pe.value,b.value.mcpToolId,"id")?(be(),tn("div",cV,[J("div",fV,[k(On,{type:"MCP",class:"mr-8",size:20}),J("div",{class:"ellipsis",title:(vt=Qn(ou)(Pe.value,b.value.mcpToolId,"id"))==null?void 0:vt.name},_e(((Wt=Qn(ou)(Pe.value,b.value.mcpToolId,"id"))==null?void 0:Wt.name)||le.$t("common.custom")+" MCP")+"-456 ",9,dV)]),k($e,{text:"",onClick:ie[7]||(ie[7]=Gt=>b.value.mcpToolId="")},{default:R(()=>[k(Se,null,{default:R(()=>[k(Be)]),_:1})]),_:1})])):En("",!0)])):En("",!0),J("div",pV,[J("div",hV,_e(le.$t("views.tool.title")),1),J("div",null,[b.value.toolEnable?(be(),et($e,{key:0,type:"primary",class:"mr-4",link:"",onClick:z,onRefreshForm:I},{default:R(()=>[k(co,{iconName:"app-setting"})]),_:1})):En("",!0),k(kt,{size:"small",modelValue:b.value.toolEnable,"onUpdate:modelValue":ie[8]||(ie[8]=Gt=>b.value.toolEnable=Gt)},null,8,["modelValue"])])]),((Qt=b.value.toolIds)==null?void 0:Qt.length)>0?(be(),tn("div",vV,[(be(!0),tn(br,null,Jr(b.value.toolIds,(Gt,Kt)=>{var rt,cn,We;return be(),tn("div",{key:Kt,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[J("div",mV,[(rt=Qn(ou)(pe.value,Gt,"id"))!=null&&rt.icon?(be(),et(Ce,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:R(()=>{var dn;return[J("img",{src:Qn(Pf)((dn=Qn(ou)(pe.value,Gt,"id"))==null?void 0:dn.icon),alt:""},null,8,yV)]}),_:2},1024)):(be(),et(On,{key:1,class:"mr-8",size:20})),J("div",{class:"ellipsis",title:(cn=Qn(ou)(pe.value,Gt,"id"))==null?void 0:cn.name},_e((We=Qn(ou)(pe.value,Gt,"id"))==null?void 0:We.name),9,gV)]),k($e,{text:"",onClick:dn=>ee(Gt)},{default:R(()=>[k(Se,null,{default:R(()=>[k(Be)]),_:1})]),_:2},1032,["onClick"])])}),128))])):En("",!0),b.value.mcpEnable||b.value.toolEnable?(be(),et(Ge,{key:2,onClick:ie[10]||(ie[10]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",_V,[J("span",bV,_e(le.$t("views.application.form.mcp_output_enable")),1),J("div",wV,[k(kt,{class:"ml-8",size:"small",modelValue:b.value.mcpOutputEnable,"onUpdate:modelValue":ie[9]||(ie[9]=Gt=>b.value.mcpOutputEnable=Gt)},null,8,["modelValue"])])])]),_:1})):En("",!0),k(Ge,{onClick:ie[12]||(ie[12]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",EV,[J("div",null,[J("span",null,_e(le.$t("views.application.form.reasoningContent.label")),1)]),J("div",null,[k(kt,{size:"small",modelValue:b.value.modelSetting.reasoningContentEnable,"onUpdate:modelValue":ie[11]||(ie[11]=Gt=>b.value.modelSetting.reasoningContentEnable=Gt)},null,8,["modelValue"])])])]),_:1}),k(Ge,{onClick:ie[14]||(ie[14]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",OV,[J("div",SV,[J("span",null,_e(le.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(ht,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(le.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(kt,{size:"small",modelValue:b.value.isResult,"onUpdate:modelValue":ie[13]||(ie[13]=Gt=>b.value.isResult=Gt)},null,8,["modelValue"])]),_:1})]}),_:1},8,["model"])]),_:1}),k(Vv,{ref_key:"AIModeParamSettingDialogRef",ref:A,onRefresh:I},null,512),k(xI,{ref_key:"ReasoningParamSettingDialogRef",ref:E,onRefresh:V},null,512),k(nV,{ref_key:"mcpServersDialogRef",ref:Y,onRefresh:H},null,512),k(ZU,{ref_key:"toolDialogRef",ref:B,onRefresh:X},null,512)]),_:1},8,["nodeModel"])}}});var cg={exports:{}},yx;function AV(){return yx||(yx=1,function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(n){var a={};function r(u){if(a[u])return a[u].exports;var c=a[u]={i:u,l:!1,exports:{}};return n[u].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=a,r.d=function(u,c,v){r.o(u,c)||Object.defineProperty(u,c,{enumerable:!0,get:v})},r.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},r.t=function(u,c){if(1&c&&(u=r(u)),8&c||4&c&&typeof u=="object"&&u&&u.__esModule)return u;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:u}),2&c&&typeof u!="string")for(var f in u)r.d(v,f,(function(g){return u[g]}).bind(null,f));return v},r.n=function(u){var c=u&&u.__esModule?function(){return u.default}:function(){return u};return r.d(c,"a",c),c},r.o=function(u,c){return Object.prototype.hasOwnProperty.call(u,c)},r.p="",r(r.s=222)}([function(n,a,r){r.d(a,"a",function(){return I}),r.d(a,"b",function(){return F}),r.d(a,"c",function(){return kt}),r.d(a,"d",function(){return On}),r.d(a,"e",function(){return D}),r.d(a,"f",function(){return U}),r.d(a,"g",function(){return D}),r.d(a,"h",function(){return Yt}),r.d(a,"i",function(){return c}),r.d(a,"j",function(){return Nt}),r.d(a,"k",function(){return X});var u,c,v,f,g,_,b,O={},x=[],M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(Be,Se){for(var Ce in Se)Be[Ce]=Se[Ce];return Be}function E(Be){var Se=Be.parentNode;Se&&Se.removeChild(Be)}function D(Be,Se,Ce){var Ye,bt,vt,Wt={};for(vt in Se)vt=="key"?Ye=Se[vt]:vt=="ref"?bt=Se[vt]:Wt[vt]=Se[vt];if(arguments.length>2&&(Wt.children=arguments.length>3?u.call(arguments,2):Ce),typeof Be=="function"&&Be.defaultProps!=null)for(vt in Be.defaultProps)Wt[vt]===void 0&&(Wt[vt]=Be.defaultProps[vt]);return j(Be,Wt,Ye,bt,null)}function j(Be,Se,Ce,Ye,bt){var vt={type:Be,props:Se,key:Ce,ref:Ye,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:bt??++v};return bt==null&&c.vnode!=null&&c.vnode(vt),vt}function U(){return{current:null}}function F(Be){return Be.children}function I(Be,Se){this.props=Be,this.context=Se}function V(Be,Se){if(Se==null)return Be.__?V(Be.__,Be.__.__k.indexOf(Be)+1):null;for(var Ce;Se<Be.__k.length;Se++)if((Ce=Be.__k[Se])!=null&&Ce.__e!=null)return Ce.__e;return typeof Be.type=="function"?V(Be):null}function Y(Be){var Se,Ce;if((Be=Be.__)!=null&&Be.__c!=null){for(Be.__e=Be.__c.base=null,Se=0;Se<Be.__k.length;Se++)if((Ce=Be.__k[Se])!=null&&Ce.__e!=null){Be.__e=Be.__c.base=Ce.__e;break}return Y(Be)}}function K(Be){(!Be.__d&&(Be.__d=!0)&&f.push(Be)&&!H.__r++||_!==c.debounceRendering)&&((_=c.debounceRendering)||g)(H)}function H(){for(var Be;H.__r=f.length;)Be=f.sort(function(Se,Ce){return Se.__v.__b-Ce.__v.__b}),f=[],Be.some(function(Se){var Ce,Ye,bt,vt,Wt,Qt;Se.__d&&(Wt=(vt=(Ce=Se).__v).__e,(Qt=Ce.__P)&&(Ye=[],(bt=A({},vt)).__v=vt.__v+1,le(Qt,vt,bt,Ce.__n,Qt.ownerSVGElement!==void 0,vt.__h!=null?[Wt]:null,Ye,Wt??V(vt),vt.__h),ie(Ye,vt),vt.__e!=Wt&&Y(vt)))})}function B(Be,Se,Ce,Ye,bt,vt,Wt,Qt,Gt,Kt){var rt,cn,We,dn,er,ae,tr,Pr=Ye&&Ye.__k||x,Xr=Pr.length;for(Ce.__k=[],rt=0;rt<Se.length;rt++)if((dn=Ce.__k[rt]=(dn=Se[rt])==null||typeof dn=="boolean"?null:typeof dn=="string"||typeof dn=="number"||typeof dn=="bigint"?j(null,dn,null,null,dn):Array.isArray(dn)?j(F,{children:dn},null,null,null):dn.__b>0?j(dn.type,dn.props,dn.key,null,dn.__v):dn)!=null){if(dn.__=Ce,dn.__b=Ce.__b+1,(We=Pr[rt])===null||We&&dn.key==We.key&&dn.type===We.type)Pr[rt]=void 0;else for(cn=0;cn<Xr;cn++){if((We=Pr[cn])&&dn.key==We.key&&dn.type===We.type){Pr[cn]=void 0;break}We=null}le(Be,dn,We=We||O,bt,vt,Wt,Qt,Gt,Kt),er=dn.__e,(cn=dn.ref)&&We.ref!=cn&&(tr||(tr=[]),We.ref&&tr.push(We.ref,null,dn),tr.push(cn,dn.__c||er,dn)),er!=null?(ae==null&&(ae=er),typeof dn.type=="function"&&dn.__k===We.__k?dn.__d=Gt=z(dn,Gt,Be):Gt=ee(Be,dn,We,Pr,er,Gt),typeof Ce.type=="function"&&(Ce.__d=Gt)):Gt&&We.__e==Gt&&Gt.parentNode!=Be&&(Gt=V(We))}for(Ce.__e=ae,rt=Xr;rt--;)Pr[rt]!=null&&(typeof Ce.type=="function"&&Pr[rt].__e!=null&&Pr[rt].__e==Ce.__d&&(Ce.__d=V(Ye,rt+1)),ht(Pr[rt],Pr[rt]));if(tr)for(rt=0;rt<tr.length;rt++)Ge(tr[rt],tr[++rt],tr[++rt])}function z(Be,Se,Ce){for(var Ye,bt=Be.__k,vt=0;bt&&vt<bt.length;vt++)(Ye=bt[vt])&&(Ye.__=Be,Se=typeof Ye.type=="function"?z(Ye,Se,Ce):ee(Ce,Ye,Ye,bt,Ye.__e,Se));return Se}function X(Be,Se){return Se=Se||[],Be==null||typeof Be=="boolean"||(Array.isArray(Be)?Be.some(function(Ce){X(Ce,Se)}):Se.push(Be)),Se}function ee(Be,Se,Ce,Ye,bt,vt){var Wt,Qt,Gt;if(Se.__d!==void 0)Wt=Se.__d,Se.__d=void 0;else if(Ce==null||bt!=vt||bt.parentNode==null)e:if(vt==null||vt.parentNode!==Be)Be.appendChild(bt),Wt=null;else{for(Qt=vt,Gt=0;(Qt=Qt.nextSibling)&&Gt<Ye.length;Gt+=2)if(Qt==bt)break e;Be.insertBefore(bt,vt),Wt=vt}return Wt!==void 0?Wt:bt.nextSibling}function pe(Be,Se,Ce){Se[0]==="-"?Be.setProperty(Se,Ce):Be[Se]=Ce==null?"":typeof Ce!="number"||M.test(Se)?Ce:Ce+"px"}function ce(Be,Se,Ce,Ye,bt){var vt;e:if(Se==="style")if(typeof Ce=="string")Be.style.cssText=Ce;else{if(typeof Ye=="string"&&(Be.style.cssText=Ye=""),Ye)for(Se in Ye)Ce&&Se in Ce||pe(Be.style,Se,"");if(Ce)for(Se in Ce)Ye&&Ce[Se]===Ye[Se]||pe(Be.style,Se,Ce[Se])}else if(Se[0]==="o"&&Se[1]==="n")vt=Se!==(Se=Se.replace(/Capture$/,"")),Se=Se.toLowerCase()in Be?Se.toLowerCase().slice(2):Se.slice(2),Be.l||(Be.l={}),Be.l[Se+vt]=Ce,Ce?Ye||Be.addEventListener(Se,vt?Ee:Pe,vt):Be.removeEventListener(Se,vt?Ee:Pe,vt);else if(Se!=="dangerouslySetInnerHTML"){if(bt)Se=Se.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Se!=="href"&&Se!=="list"&&Se!=="form"&&Se!=="tabIndex"&&Se!=="download"&&Se in Be)try{Be[Se]=Ce??"";break e}catch{}typeof Ce=="function"||(Ce!=null&&(Ce!==!1||Se[0]==="a"&&Se[1]==="r")?Be.setAttribute(Se,Ce):Be.removeAttribute(Se))}}function Pe(Be){this.l[Be.type+!1](c.event?c.event(Be):Be)}function Ee(Be){this.l[Be.type+!0](c.event?c.event(Be):Be)}function le(Be,Se,Ce,Ye,bt,vt,Wt,Qt,Gt){var Kt,rt,cn,We,dn,er,ae,tr,Pr,Xr,ao,Un=Se.type;if(Se.constructor!==void 0)return null;Ce.__h!=null&&(Gt=Ce.__h,Qt=Se.__e=Ce.__e,Se.__h=null,vt=[Qt]),(Kt=c.__b)&&Kt(Se);try{e:if(typeof Un=="function"){if(tr=Se.props,Pr=(Kt=Un.contextType)&&Ye[Kt.__c],Xr=Kt?Pr?Pr.props.value:Kt.__:Ye,Ce.__c?ae=(rt=Se.__c=Ce.__c).__=rt.__E:("prototype"in Un&&Un.prototype.render?Se.__c=rt=new Un(tr,Xr):(Se.__c=rt=new I(tr,Xr),rt.constructor=Un,rt.render=Fe),Pr&&Pr.sub(rt),rt.props=tr,rt.state||(rt.state={}),rt.context=Xr,rt.__n=Ye,cn=rt.__d=!0,rt.__h=[]),rt.__s==null&&(rt.__s=rt.state),Un.getDerivedStateFromProps!=null&&(rt.__s==rt.state&&(rt.__s=A({},rt.__s)),A(rt.__s,Un.getDerivedStateFromProps(tr,rt.__s))),We=rt.props,dn=rt.state,cn)Un.getDerivedStateFromProps==null&&rt.componentWillMount!=null&&rt.componentWillMount(),rt.componentDidMount!=null&&rt.__h.push(rt.componentDidMount);else{if(Un.getDerivedStateFromProps==null&&tr!==We&&rt.componentWillReceiveProps!=null&&rt.componentWillReceiveProps(tr,Xr),!rt.__e&&rt.shouldComponentUpdate!=null&&rt.shouldComponentUpdate(tr,rt.__s,Xr)===!1||Se.__v===Ce.__v){rt.props=tr,rt.state=rt.__s,Se.__v!==Ce.__v&&(rt.__d=!1),rt.__v=Se,Se.__e=Ce.__e,Se.__k=Ce.__k,Se.__k.forEach(function(bo){bo&&(bo.__=Se)}),rt.__h.length&&Wt.push(rt);break e}rt.componentWillUpdate!=null&&rt.componentWillUpdate(tr,rt.__s,Xr),rt.componentDidUpdate!=null&&rt.__h.push(function(){rt.componentDidUpdate(We,dn,er)})}rt.context=Xr,rt.props=tr,rt.state=rt.__s,(Kt=c.__r)&&Kt(Se),rt.__d=!1,rt.__v=Se,rt.__P=Be,Kt=rt.render(rt.props,rt.state,rt.context),rt.state=rt.__s,rt.getChildContext!=null&&(Ye=A(A({},Ye),rt.getChildContext())),cn||rt.getSnapshotBeforeUpdate==null||(er=rt.getSnapshotBeforeUpdate(We,dn)),ao=Kt!=null&&Kt.type===F&&Kt.key==null?Kt.props.children:Kt,B(Be,Array.isArray(ao)?ao:[ao],Se,Ce,Ye,bt,vt,Wt,Qt,Gt),rt.base=Se.__e,Se.__h=null,rt.__h.length&&Wt.push(rt),ae&&(rt.__E=rt.__=null),rt.__e=!1}else vt==null&&Se.__v===Ce.__v?(Se.__k=Ce.__k,Se.__e=Ce.__e):Se.__e=$e(Ce.__e,Se,Ce,Ye,bt,vt,Wt,Gt);(Kt=c.diffed)&&Kt(Se)}catch(bo){Se.__v=null,(Gt||vt!=null)&&(Se.__e=Qt,Se.__h=!!Gt,vt[vt.indexOf(Qt)]=null),c.__e(bo,Se,Ce)}}function ie(Be,Se){c.__c&&c.__c(Se,Be),Be.some(function(Ce){try{Be=Ce.__h,Ce.__h=[],Be.some(function(Ye){Ye.call(Ce)})}catch(Ye){c.__e(Ye,Ce.__v)}})}function $e(Be,Se,Ce,Ye,bt,vt,Wt,Qt){var Gt,Kt,rt,cn=Ce.props,We=Se.props,dn=Se.type,er=0;if(dn==="svg"&&(bt=!0),vt!=null){for(;er<vt.length;er++)if((Gt=vt[er])&&"setAttribute"in Gt==!!dn&&(dn?Gt.localName===dn:Gt.nodeType===3)){Be=Gt,vt[er]=null;break}}if(Be==null){if(dn===null)return document.createTextNode(We);Be=bt?document.createElementNS("http://www.w3.org/2000/svg",dn):document.createElement(dn,We.is&&We),vt=null,Qt=!1}if(dn===null)cn===We||Qt&&Be.data===We||(Be.data=We);else{if(vt=vt&&u.call(Be.childNodes),Kt=(cn=Ce.props||O).dangerouslySetInnerHTML,rt=We.dangerouslySetInnerHTML,!Qt){if(vt!=null)for(cn={},er=0;er<Be.attributes.length;er++)cn[Be.attributes[er].name]=Be.attributes[er].value;(rt||Kt)&&(rt&&(Kt&&rt.__html==Kt.__html||rt.__html===Be.innerHTML)||(Be.innerHTML=rt&&rt.__html||""))}if(function(ae,tr,Pr,Xr,ao){var Un;for(Un in Pr)Un==="children"||Un==="key"||Un in tr||ce(ae,Un,null,Pr[Un],Xr);for(Un in tr)ao&&typeof tr[Un]!="function"||Un==="children"||Un==="key"||Un==="value"||Un==="checked"||Pr[Un]===tr[Un]||ce(ae,Un,tr[Un],Pr[Un],Xr)}(Be,We,cn,bt,Qt),rt)Se.__k=[];else if(er=Se.props.children,B(Be,Array.isArray(er)?er:[er],Se,Ce,Ye,bt&&dn!=="foreignObject",vt,Wt,vt?vt[0]:Ce.__k&&V(Ce,0),Qt),vt!=null)for(er=vt.length;er--;)vt[er]!=null&&E(vt[er]);Qt||("value"in We&&(er=We.value)!==void 0&&(er!==cn.value||er!==Be.value||dn==="progress"&&!er)&&ce(Be,"value",er,cn.value,!1),"checked"in We&&(er=We.checked)!==void 0&&er!==Be.checked&&ce(Be,"checked",er,cn.checked,!1))}return Be}function Ge(Be,Se,Ce){try{typeof Be=="function"?Be(Se):Be.current=Se}catch(Ye){c.__e(Ye,Ce)}}function ht(Be,Se,Ce){var Ye,bt;if(c.unmount&&c.unmount(Be),(Ye=Be.ref)&&(Ye.current&&Ye.current!==Be.__e||Ge(Ye,null,Se)),(Ye=Be.__c)!=null){if(Ye.componentWillUnmount)try{Ye.componentWillUnmount()}catch(vt){c.__e(vt,Se)}Ye.base=Ye.__P=null}if(Ye=Be.__k)for(bt=0;bt<Ye.length;bt++)Ye[bt]&&ht(Ye[bt],Se,typeof Be.type!="function");Ce||Be.__e==null||E(Be.__e),Be.__e=Be.__d=void 0}function Fe(Be,Se,Ce){return this.constructor(Be,Ce)}function Nt(Be,Se,Ce){var Ye,bt,vt;c.__&&c.__(Be,Se),bt=(Ye=typeof Ce=="function")?null:Ce&&Ce.__k||Se.__k,vt=[],le(Se,Be=(!Ye&&Ce||Se).__k=D(F,null,[Be]),bt||O,O,Se.ownerSVGElement!==void 0,!Ye&&Ce?[Ce]:bt?null:Se.firstChild?u.call(Se.childNodes):null,vt,!Ye&&Ce?Ce:bt?bt.__e:Se.firstChild,Ye),ie(vt,Be)}function Yt(Be,Se){Nt(Be,Se,Yt)}function kt(Be,Se,Ce){var Ye,bt,vt,Wt=A({},Be.props);for(vt in Se)vt=="key"?Ye=Se[vt]:vt=="ref"?bt=Se[vt]:Wt[vt]=Se[vt];return arguments.length>2&&(Wt.children=arguments.length>3?u.call(arguments,2):Ce),j(Be.type,Wt,Ye||Be.key,bt||Be.ref,null)}function On(Be,Se){var Ce={__c:Se="__cC"+b++,__:Be,Consumer:function(Ye,bt){return Ye.children(bt)},Provider:function(Ye){var bt,vt;return this.getChildContext||(bt=[],(vt={})[Se]=this,this.getChildContext=function(){return vt},this.shouldComponentUpdate=function(Wt){this.props.value!==Wt.value&&bt.some(K)},this.sub=function(Wt){bt.push(Wt);var Qt=Wt.componentWillUnmount;Wt.componentWillUnmount=function(){bt.splice(bt.indexOf(Wt),1),Qt&&Qt.call(Wt)}}),Ye.children}};return Ce.Provider.__=Ce.Consumer.contextType=Ce}u=x.slice,c={__e:function(Be,Se){for(var Ce,Ye,bt;Se=Se.__;)if((Ce=Se.__c)&&!Ce.__)try{if((Ye=Ce.constructor)&&Ye.getDerivedStateFromError!=null&&(Ce.setState(Ye.getDerivedStateFromError(Be)),bt=Ce.__d),Ce.componentDidCatch!=null&&(Ce.componentDidCatch(Be),bt=Ce.__d),bt)return Ce.__E=Ce}catch(vt){Be=vt}throw Be}},v=0,I.prototype.setState=function(Be,Se){var Ce;Ce=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof Be=="function"&&(Be=Be(A({},Ce),this.props)),Be&&A(Ce,Be),Be!=null&&this.__v&&(Se&&this.__h.push(Se),K(this))},I.prototype.forceUpdate=function(Be){this.__v&&(this.__e=!0,Be&&this.__h.push(Be),K(this))},I.prototype.render=F,f=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,H.__r=0,b=0},function(n,a,r){(function(u,c){r.d(a,"a",function(){return K}),r.d(a,"b",function(){return Dc}),r.d(a,"c",function(){return Da}),r.d(a,"d",function(){return Hn}),r.d(a,"e",function(){return Jt}),r.d(a,"f",function(){return on}),r.d(a,"g",function(){return $n}),r.d(a,"h",function(){return Ii}),r.d(a,"i",function(){return ao}),r.d(a,"j",function(){return Mn}),r.d(a,"k",function(){return gl}),r.d(a,"l",function(){return Mc}),r.d(a,"m",function(){return ae}),r.d(a,"n",function(){return au}),r.d(a,"o",function(){return z}),r.d(a,"p",function(){return ip}),r.d(a,"q",function(){return ga}),r.d(a,"r",function(){return lu}),r.d(a,"s",function(){return sa}),r.d(a,"t",function(){return Fo}),r.d(a,"u",function(){return Rs}),r.d(a,"v",function(){return qf}),r.d(a,"w",function(){return Pc}),r.d(a,"x",function(){return si}),r.d(a,"y",function(){return wa}),r.d(a,"z",function(){return Ko}),r.d(a,"A",function(){return fi}),r.d(a,"B",function(){return _a}),r.d(a,"C",function(){return Kt}),r.d(a,"D",function(){return Yf}),r.d(a,"E",function(){return Wr}),r.d(a,"F",function(){return qr}),r.d(a,"G",function(){return Ac}),r.d(a,"H",function(){return xc}),r.d(a,"I",function(){return Nc}),r.d(a,"J",function(){return ci}),r.d(a,"K",function(){return Qe}),r.d(a,"L",function(){return lo}),r.d(a,"M",function(){return js});var v=[];Object.freeze(v);var f={};function g(){return++Nn.mobxGuid}function _(P){throw b(!1,P),"X"}function b(P,N){if(!P)throw new Error("[mobx] "+(N||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(f);function O(P){var N=!1;return function(){if(!N)return N=!0,P.apply(this,arguments)}}var x=function(){};function M(P){return P!==null&&typeof P=="object"}function A(P){if(P===null||typeof P!="object")return!1;var N=Object.getPrototypeOf(P);return N===Object.prototype||N===null}function E(P,N,G){Object.defineProperty(P,N,{enumerable:!1,writable:!0,configurable:!0,value:G})}function D(P,N){var G="isMobX"+P;return N.prototype[G]=!0,function(oe){return M(oe)&&oe[G]===!0}}function j(P){return P instanceof Map}function U(P){return P instanceof Set}function F(P){var N=new Set;for(var G in P)N.add(G);return Object.getOwnPropertySymbols(P).forEach(function(oe){Object.getOwnPropertyDescriptor(P,oe).enumerable&&N.add(oe)}),Array.from(N)}function I(P){return P&&P.toString?P.toString():new String(P).toString()}function V(P){return P===null?null:typeof P=="object"?""+P:P}var Y=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:Object.getOwnPropertyNames,K=Symbol("mobx administration"),H=function(){function P(N){N===void 0&&(N="Atom@"+g()),this.name=N,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=cn.NOT_TRACKING}return P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(N){return N()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(N){return N()})},P.prototype.reportObserved=function(){return Ns(this)},P.prototype.reportChanged=function(){Ji(),function(N){N.lowestObserverState!==cn.STALE&&(N.lowestObserverState=cn.STALE,N.observers.forEach(function(G){G.dependenciesState===cn.UP_TO_DATE&&(G.isTracing!==We.NONE&&Ca(G,N),G.onBecomeStale()),G.dependenciesState=cn.STALE}))}(this),la()},P.prototype.toString=function(){return this.name},P}(),B=D("Atom",H);function z(P,N,G){N===void 0&&(N=x),G===void 0&&(G=x);var oe,we=new H(P);return N!==x&&Hf("onBecomeObserved",we,N,oe),G!==x&&Wr(we,G),we}var X={structural:function(P,N){return Ft(P,N)},default:function(P,N){return Object.is(P,N)}},ee=function(P,N){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,oe){G.__proto__=oe}||function(G,oe){for(var we in oe)oe.hasOwnProperty(we)&&(G[we]=oe[we])},ee(P,N)};/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */var pe=function(){return pe=Object.assign||function(P){for(var N,G=1,oe=arguments.length;G<oe;G++)for(var we in N=arguments[G])Object.prototype.hasOwnProperty.call(N,we)&&(P[we]=N[we]);return P},pe.apply(this,arguments)};function ce(P){var N=typeof Symbol=="function"&&P[Symbol.iterator],G=0;return N?N.call(P):{next:function(){return P&&G>=P.length&&(P=void 0),{value:P&&P[G++],done:!P}}}}function Pe(P,N){var G=typeof Symbol=="function"&&P[Symbol.iterator];if(!G)return P;var oe,we,Ke=G.call(P),gt=[];try{for(;(N===void 0||N-- >0)&&!(oe=Ke.next()).done;)gt.push(oe.value)}catch(Xt){we={error:Xt}}finally{try{oe&&!oe.done&&(G=Ke.return)&&G.call(Ke)}finally{if(we)throw we.error}}return gt}function Ee(){for(var P=[],N=0;N<arguments.length;N++)P=P.concat(Pe(arguments[N]));return P}var le=Symbol("mobx did run lazy initializers"),ie=Symbol("mobx pending decorators"),$e={},Ge={};function ht(P,N){var G=N?$e:Ge;return G[P]||(G[P]={configurable:!0,enumerable:N,get:function(){return Fe(this),this[P]},set:function(oe){Fe(this),this[P]=oe}})}function Fe(P){var N,G;if(P[le]!==!0){var oe=P[ie];if(oe){E(P,le,!0);var we=Ee(Object.getOwnPropertySymbols(oe),Object.keys(oe));try{for(var Ke=ce(we),gt=Ke.next();!gt.done;gt=Ke.next()){var Xt=oe[gt.value];Xt.propertyCreator(P,Xt.prop,Xt.descriptor,Xt.decoratorTarget,Xt.decoratorArguments)}}catch(Sn){N={error:Sn}}finally{try{gt&&!gt.done&&(G=Ke.return)&&G.call(Ke)}finally{if(N)throw N.error}}}}}function Nt(P,N){return function(){var G,oe=function(we,Ke,gt,Xt){if(Xt===!0)return N(we,Ke,gt,we,G),null;if(!Object.prototype.hasOwnProperty.call(we,ie)){var Sn=we[ie];E(we,ie,pe({},Sn))}return we[ie][Ke]={prop:Ke,propertyCreator:N,descriptor:gt,decoratorTarget:we,decoratorArguments:G},ht(Ke,P)};return Yt(arguments)?(G=v,oe.apply(null,arguments)):(G=Array.prototype.slice.call(arguments),oe)}}function Yt(P){return(P.length===2||P.length===3)&&(typeof P[1]=="string"||typeof P[1]=="symbol")||P.length===4&&P[3]===!0}function kt(P,N,G){return si(P)?P:Array.isArray(P)?Kt.array(P,{name:G}):A(P)?Kt.object(P,void 0,{name:G}):j(P)?Kt.map(P,{name:G}):U(P)?Kt.set(P,{name:G}):P}function On(P){return P}function Be(P){b(P);var N=Nt(!0,function(oe,we,Ke,gt,Xt){var Sn=Ke?Ke.initializer?Ke.initializer.call(oe):Ke.value:void 0;ua(oe).addObservableProp(we,Sn,P)}),G=(u!==void 0&&u.env,N);return G.enhancer=P,G}var Se={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ce(P){return P==null?Se:typeof P=="string"?{name:P,deep:!0,proxy:!0}:P}Object.freeze(Se);var Ye=Be(kt),bt=Be(function(P,N,G){return P==null||fi(P)||wa(P)||Ko(P)||ni(P)?P:Array.isArray(P)?Kt.array(P,{name:G,deep:!1}):A(P)?Kt.object(P,void 0,{name:G,deep:!1}):j(P)?Kt.map(P,{name:G,deep:!1}):U(P)?Kt.set(P,{name:G,deep:!1}):_(!1)}),vt=Be(On),Wt=Be(function(P,N,G){return Ft(P,N)?N:P});function Qt(P){return P.defaultDecorator?P.defaultDecorator.enhancer:P.deep===!1?On:kt}var Gt={box:function(P,N){arguments.length>2&&rt("box");var G=Ce(N);return new Dr(P,Qt(G),G.name,!0,G.equals)},array:function(P,N){arguments.length>2&&rt("array");var G=Ce(N);return $l(P,Qt(G),G.name)},map:function(P,N){arguments.length>2&&rt("map");var G=Ce(N);return new Dc(P,Qt(G),G.name)},set:function(P,N){arguments.length>2&&rt("set");var G=Ce(N);return new Ya(P,Qt(G),G.name)},object:function(P,N,G){typeof arguments[1]=="string"&&rt("object");var oe=Ce(G);if(oe.proxy===!1)return ga({},P,N,oe);var we=Cs(oe),Ke=ga({},void 0,void 0,oe),gt=uu(Ke);return Xf(gt,P,N,we),gt},ref:vt,shallow:bt,deep:Ye,struct:Wt},Kt=function(P,N,G){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return Ye.apply(null,arguments);if(si(P))return P;var oe=A(P)?Kt.object(P,N,G):Array.isArray(P)?Kt.array(P,N):j(P)?Kt.map(P,N):U(P)?Kt.set(P,N):P;if(oe!==P)return oe;_(!1)};function rt(P){_("Expected one or two arguments to observable."+P+". Did you accidentally try to use observable."+P+" as decorator?")}Object.keys(Gt).forEach(function(P){return Kt[P]=Gt[P]});var cn,We,dn=Nt(!1,function(P,N,G,oe,we){var Ke=G.get,gt=G.set,Xt=we[0]||{};ua(P).addComputedProp(P,N,pe({get:Ke,set:gt,context:P},Xt))}),er=dn({equals:X.structural}),ae=function(P,N,G){if(typeof N=="string"||P!==null&&typeof P=="object"&&arguments.length===1)return dn.apply(null,arguments);var oe=typeof N=="object"?N:{};return oe.get=P,oe.set=typeof N=="function"?N:oe.set,oe.name=oe.name||P.name||"",new Ha(oe)};ae.struct=er,function(P){P[P.NOT_TRACKING=-1]="NOT_TRACKING",P[P.UP_TO_DATE=0]="UP_TO_DATE",P[P.POSSIBLY_STALE=1]="POSSIBLY_STALE",P[P.STALE=2]="STALE"}(cn||(cn={})),function(P){P[P.NONE=0]="NONE",P[P.LOG=1]="LOG",P[P.BREAK=2]="BREAK"}(We||(We={}));var tr=function(P){this.cause=P};function Pr(P){return P instanceof tr}function Xr(P){switch(P.dependenciesState){case cn.UP_TO_DATE:return!1;case cn.NOT_TRACKING:case cn.STALE:return!0;case cn.POSSIBLY_STALE:for(var N=on(!0),G=je(),oe=P.observing,we=oe.length,Ke=0;Ke<we;Ke++){var gt=oe[Ke];if(yl(gt)){if(Nn.disableErrorBoundaries)gt.get();else try{gt.get()}catch{return st(G),Jt(N),!0}if(P.dependenciesState===cn.STALE)return st(G),Jt(N),!0}}return Rn(P),st(G),Jt(N),!1}}function ao(){return Nn.trackingDerivation!==null}function Un(P){var N=P.observers.size>0;Nn.computationDepth>0&&N&&_(!1),Nn.allowStateChanges||!N&&Nn.enforceActions!=="strict"||_(!1)}function bo(P,N,G){var oe=on(!0);Rn(P),P.newObserving=new Array(P.observing.length+100),P.unboundDepsCount=0,P.runId=++Nn.runId;var we,Ke=Nn.trackingDerivation;if(Nn.trackingDerivation=P,Nn.disableErrorBoundaries===!0)we=N.call(G);else try{we=N.call(G)}catch(gt){we=new tr(gt)}return Nn.trackingDerivation=Ke,function(gt){for(var Xt=gt.observing,Sn=gt.observing=gt.newObserving,wr=cn.UP_TO_DATE,pn=0,Gr=gt.unboundDepsCount,mr=0;mr<Gr;mr++)(Ir=Sn[mr]).diffValue===0&&(Ir.diffValue=1,pn!==mr&&(Sn[pn]=Ir),pn++),Ir.dependenciesState>wr&&(wr=Ir.dependenciesState);for(Sn.length=pn,gt.newObserving=null,Gr=Xt.length;Gr--;)(Ir=Xt[Gr]).diffValue===0&&wo(Ir,gt),Ir.diffValue=0;for(;pn--;){var Ir;(Ir=Sn[pn]).diffValue===1&&(Ir.diffValue=0,Vf(Ir,gt))}wr!==cn.UP_TO_DATE&&(gt.dependenciesState=wr,gt.onBecomeStale())}(P),Jt(oe),we}function Ae(P){var N=P.observing;P.observing=[];for(var G=N.length;G--;)wo(N[G],P);P.dependenciesState=cn.NOT_TRACKING}function Qe(P){var N=je();try{return P()}finally{st(N)}}function je(){var P=Nn.trackingDerivation;return Nn.trackingDerivation=null,P}function st(P){Nn.trackingDerivation=P}function on(P){var N=Nn.allowStateReads;return Nn.allowStateReads=P,N}function Jt(P){Nn.allowStateReads=P}function Rn(P){if(P.dependenciesState!==cn.UP_TO_DATE){P.dependenciesState=cn.UP_TO_DATE;for(var N=P.observing,G=N.length;G--;)N[G].lowestObserverState=cn.UP_TO_DATE}}var Or=0,ui=1,Si=Object.getOwnPropertyDescriptor(function(){},"name");Si&&Si.configurable;function Yo(P,N,G){var oe=function(){return ti(P,N,G||this,arguments)};return oe.isMobxAction=!0,oe}function ti(P,N,G,oe){var we=Mn();try{return N.apply(G,oe)}catch(Ke){throw we.error=Ke,Ke}finally{$n(we)}}function Mn(P,N,G){var oe=0,we=je();Ji();var Ke={prevDerivation:we,prevAllowStateChanges:lr(!0),prevAllowStateReads:on(!0),notifySpy:!1,startTime:oe,actionId:ui++,parentActionId:Or};return Or=Ke.actionId,Ke}function $n(P){Or!==P.actionId&&_("invalid action stack. did you forget to finish an action?"),Or=P.parentActionId,P.error!==void 0&&(Nn.suppressReactionErrors=!0),to(P.prevAllowStateChanges),Jt(P.prevAllowStateReads),la(),st(P.prevDerivation),P.notifySpy,Nn.suppressReactionErrors=!1}function Hn(P,N){var G,oe=lr(P);try{G=N()}finally{to(oe)}return G}function lr(P){var N=Nn.allowStateChanges;return Nn.allowStateChanges=P,N}function to(P){Nn.allowStateChanges=P}var Dr=function(P){function N(G,oe,we,Ke,gt){we===void 0&&(we="ObservableValue@"+g()),gt===void 0&&(gt=X.default);var Xt=P.call(this,we)||this;return Xt.enhancer=oe,Xt.name=we,Xt.equals=gt,Xt.hasUnreportedChange=!1,Xt.value=oe(G,void 0,we),Xt}return function(G,oe){function we(){this.constructor=G}ee(G,oe),G.prototype=oe===null?Object.create(oe):(we.prototype=oe.prototype,new we)}(N,P),N.prototype.dehanceValue=function(G){return this.dehancer!==void 0?this.dehancer(G):G},N.prototype.set=function(G){this.value,(G=this.prepareNewValue(G))!==Nn.UNCHANGED&&this.setNewValue(G)},N.prototype.prepareNewValue=function(G){if(Un(this),ea(this)){var oe=Nr(this,{object:this,type:"update",newValue:G});if(!oe)return Nn.UNCHANGED;G=oe.newValue}return G=this.enhancer(G,this.value,this.name),this.equals(this.value,G)?Nn.UNCHANGED:G},N.prototype.setNewValue=function(G){var oe=this.value;this.value=G,this.reportChanged(),Wi(this)&&yi(this,{type:"update",object:this,newValue:G,oldValue:oe})},N.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},N.prototype.intercept=function(G){return ba(this,G)},N.prototype.observe=function(G,oe){return oe&&G({object:this,type:"update",newValue:this.value,oldValue:void 0}),ja(this,G)},N.prototype.toJSON=function(){return this.get()},N.prototype.toString=function(){return this.name+"["+this.value+"]"},N.prototype.valueOf=function(){return V(this.get())},N.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},N}(H),ml=D("ObservableValue",Dr),Ha=function(){function P(N){this.dependenciesState=cn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=cn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new tr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=We.NONE,b(N.get,"missing option for computed: get"),this.derivation=N.get,this.name=N.name||"ComputedValue@"+g(),N.set&&(this.setter=Yo(this.name+"-setter",N.set)),this.equals=N.equals||(N.compareStructural||N.struct?X.structural:X.default),this.scope=N.context,this.requiresReaction=!!N.requiresReaction,this.keepAlive=!!N.keepAlive}return P.prototype.onBecomeStale=function(){(function(N){N.lowestObserverState===cn.UP_TO_DATE&&(N.lowestObserverState=cn.POSSIBLY_STALE,N.observers.forEach(function(G){G.dependenciesState===cn.UP_TO_DATE&&(G.dependenciesState=cn.POSSIBLY_STALE,G.isTracing!==We.NONE&&Ca(G,N),G.onBecomeStale())}))})(this)},P.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(N){return N()})},P.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(N){return N()})},P.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),Nn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Ns(this),Xr(this)&&this.trackAndCompute()&&function(G){G.lowestObserverState!==cn.STALE&&(G.lowestObserverState=cn.STALE,G.observers.forEach(function(oe){oe.dependenciesState===cn.POSSIBLY_STALE?oe.dependenciesState=cn.STALE:oe.dependenciesState===cn.UP_TO_DATE&&(G.lowestObserverState=cn.UP_TO_DATE)}))}(this)):Xr(this)&&(this.warnAboutUntrackedRead(),Ji(),this.value=this.computeValue(!1),la());var N=this.value;if(Pr(N))throw N.cause;return N},P.prototype.peek=function(){var N=this.computeValue(!1);if(Pr(N))throw N.cause;return N},P.prototype.set=function(N){if(this.setter){b(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,N)}finally{this.isRunningSetter=!1}}else b(!1,!1)},P.prototype.trackAndCompute=function(){var N=this.value,G=this.dependenciesState===cn.NOT_TRACKING,oe=this.computeValue(!0),we=G||Pr(N)||Pr(oe)||!this.equals(N,oe);return we&&(this.value=oe),we},P.prototype.computeValue=function(N){var G;if(this.isComputing=!0,Nn.computationDepth++,N)G=bo(this,this.derivation,this.scope);else if(Nn.disableErrorBoundaries===!0)G=this.derivation.call(this.scope);else try{G=this.derivation.call(this.scope)}catch(oe){G=new tr(oe)}return Nn.computationDepth--,this.isComputing=!1,G},P.prototype.suspend=function(){this.keepAlive||(Ae(this),this.value=void 0)},P.prototype.observe=function(N,G){var oe=this,we=!0,Ke=void 0;return Mc(function(){var gt=oe.get();if(!we||G){var Xt=je();N({type:"update",object:oe,newValue:gt,oldValue:Ke}),st(Xt)}we=!1,Ke=gt})},P.prototype.warnAboutUntrackedRead=function(){},P.prototype.toJSON=function(){return this.get()},P.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},P.prototype.valueOf=function(){return V(this.get())},P.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},P}(),yl=D("ComputedValue",Ha),iu=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},np={};function wc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:np}var ma=!0,Fu=!1,Nn=function(){var P=wc();return P.__mobxInstanceCount>0&&!P.__mobxGlobals&&(ma=!1),P.__mobxGlobals&&P.__mobxGlobals.version!==new iu().version&&(ma=!1),ma?P.__mobxGlobals?(P.__mobxInstanceCount+=1,P.__mobxGlobals.UNCHANGED||(P.__mobxGlobals.UNCHANGED={}),P.__mobxGlobals):(P.__mobxInstanceCount=1,P.__mobxGlobals=new iu):(setTimeout(function(){Fu||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new iu)}();function Vf(P,N){P.observers.add(N),P.lowestObserverState>N.dependenciesState&&(P.lowestObserverState=N.dependenciesState)}function wo(P,N){P.observers.delete(N),P.observers.size===0&&Ec(P)}function Ec(P){P.isPendingUnobservation===!1&&(P.isPendingUnobservation=!0,Nn.pendingUnobservations.push(P))}function Ji(){Nn.inBatch++}function la(){if(--Nn.inBatch==0){Sc();for(var P=Nn.pendingUnobservations,N=0;N<P.length;N++){var G=P[N];G.isPendingUnobservation=!1,G.observers.size===0&&(G.isBeingObserved&&(G.isBeingObserved=!1,G.onBecomeUnobserved()),G instanceof Ha&&G.suspend())}Nn.pendingUnobservations=[]}}function Ns(P){var N=Nn.trackingDerivation;return N!==null?(N.runId!==P.lastAccessedBy&&(P.lastAccessedBy=N.runId,N.newObserving[N.unboundDepsCount++]=P,P.isBeingObserved||(P.isBeingObserved=!0,P.onBecomeObserved())),!0):(P.observers.size===0&&Nn.inBatch>0&&Ec(P),!1)}function Ca(P,N){if(P.isTracing===We.BREAK){var G=[];ya(Fo(P),G,1),new Function(`debugger;
/*
Tracing '`+P.name+`'

You are entering this break point because derivation '`+P.name+"' is being traced and '"+N.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(P instanceof Ha?P.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+G.join(`
`)+`
*/
    `)()}}function ya(P,N,G){N.length>=1e3?N.push("(and many more)"):(N.push(""+new Array(G).join("	")+P.name),P.dependencies&&P.dependencies.forEach(function(oe){return ya(oe,N,G+1)}))}var Da=function(){function P(N,G,oe,we){N===void 0&&(N="Reaction@"+g()),we===void 0&&(we=!1),this.name=N,this.onInvalidate=G,this.errorHandler=oe,this.requiresObservable=we,this.observing=[],this.newObserving=[],this.dependenciesState=cn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=We.NONE}return P.prototype.onBecomeStale=function(){this.schedule()},P.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Nn.pendingReactions.push(this),Sc())},P.prototype.isScheduled=function(){return this._isScheduled},P.prototype.runReaction=function(){if(!this.isDisposed){if(Ji(),this._isScheduled=!1,Xr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(N){this.reportExceptionInDerivation(N)}}la()}},P.prototype.track=function(N){if(!this.isDisposed){Ji(),this._isRunning=!0;var G=bo(this,N,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ae(this),Pr(G)&&this.reportExceptionInDerivation(G.cause),la()}},P.prototype.reportExceptionInDerivation=function(N){var G=this;if(this.errorHandler)this.errorHandler(N,this);else{if(Nn.disableErrorBoundaries)throw N;Nn.suppressReactionErrors,Nn.globalReactionErrorHandlers.forEach(function(oe){return oe(N,G)})}},P.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ji(),Ae(this),la()))},P.prototype.getDisposer=function(){var N=this.dispose.bind(this);return N[K]=this,N},P.prototype.toString=function(){return"Reaction["+this.name+"]"},P.prototype.trace=function(N){N===void 0&&(N=!1),function(){for(var G=[],oe=0;oe<arguments.length;oe++)G[oe]=arguments[oe];var we=!1;typeof G[G.length-1]=="boolean"&&(we=G.pop());var Ke=$r(G);if(!Ke)return _(!1);Ke.isTracing,We.NONE,Ke.isTracing=we?We.BREAK:We.LOG}(this,N)},P}(),Oc=function(P){return P()};function Sc(){Nn.inBatch>0||Nn.isRunningReactions||Oc(Bf)}function Bf(){Nn.isRunningReactions=!0;for(var P=Nn.pendingReactions,N=0;P.length>0;){++N==100&&P.splice(0);for(var G=P.splice(0),oe=0,we=G.length;oe<we;oe++)G[oe].runReaction()}Nn.isRunningReactions=!1}var Uu=D("Reaction",Da);function Wf(P){var N=Oc;Oc=function(G){return P(function(){return N(G)})}}function xc(P){return function(){}}function rp(){_(!1)}function jl(P){return function(N,G,oe){if(oe){if(oe.value)return{value:Yo(P,oe.value),enumerable:!1,configurable:!0,writable:!0};var we=oe.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Yo(P,we.call(this))}}}return Gf(P).apply(this,arguments)}}function Gf(P){return function(N,G,oe){Object.defineProperty(N,G,{configurable:!0,enumerable:!1,get:function(){},set:function(we){E(this,G,gl(P,we))}})}}var gl=function(P,N,G,oe){return arguments.length===1&&typeof P=="function"?Yo(P.name||"<unnamed action>",P):arguments.length===2&&typeof N=="function"?Yo(P,N):arguments.length===1&&typeof P=="string"?jl(P):oe!==!0?jl(N).apply(null,arguments):void E(P,N,Yo(P.name||N,G.value,this))};function Ac(P,N){return ti(typeof P=="string"?P:P.name||"<unnamed action>",typeof P=="function"?P:N,this,void 0)}function Rs(P){return typeof P=="function"&&P.isMobxAction===!0}function Tc(P,N,G){E(P,N,Yo(N,G.bind(P)))}function Mc(P,N){N===void 0&&(N=f);var G,oe=N&&N.name||P.name||"Autorun@"+g();if(!N.scheduler&&!N.delay)G=new Da(oe,function(){this.track(gt)},N.onError,N.requiresObservable);else{var we=zf(N),Ke=!1;G=new Da(oe,function(){Ke||(Ke=!0,we(function(){Ke=!1,G.isDisposed||G.track(gt)}))},N.onError,N.requiresObservable)}function gt(){P(G)}return G.schedule(),G.getDisposer()}gl.bound=function(P,N,G,oe){return oe===!0?(Tc(P,N,G.value),null):G?{configurable:!0,enumerable:!1,get:function(){return Tc(this,N,G.value||G.initializer.call(this)),this[N]},set:rp}:{enumerable:!1,configurable:!0,set:function(we){Tc(this,N,we)},get:function(){}}};var op=function(P){return P()};function zf(P){return P.scheduler?P.scheduler:P.delay?function(N){return setTimeout(N,P.delay)}:op}function qr(P,N,G){G===void 0&&(G=f);var oe,we,Ke,gt=G.name||"Reaction@"+g(),Xt=gl(gt,G.onError?(oe=G.onError,we=N,function(){try{return we.apply(this,arguments)}catch(Ao){oe.call(this,Ao)}}):N),Sn=!G.scheduler&&!G.delay,wr=zf(G),pn=!0,Gr=!1,mr=G.compareStructural?X.structural:G.equals||X.default,Ir=new Da(gt,function(){pn||Sn?ca():Gr||(Gr=!0,wr(ca))},G.onError,G.requiresObservable);function ca(){if(Gr=!1,!Ir.isDisposed){var Ao=!1;Ir.track(function(){var na=P(Ir);Ao=pn||!mr(Ke,na),Ke=na}),pn&&G.fireImmediately&&Xt(Ke,Ir),pn||Ao!==!0||Xt(Ke,Ir),pn&&(pn=!1)}}return Ir.schedule(),Ir.getDisposer()}function Wr(P,N,G){return Hf("onBecomeUnobserved",P,N,G)}function Hf(P,N,G,oe){var we=typeof oe=="function"?sa(N,G):sa(N),Ke=typeof oe=="function"?oe:G,gt=P+"Listeners";return we[gt]?we[gt].add(Ke):we[gt]=new Set([Ke]),typeof we[P]!="function"?_(!1):function(){var Xt=we[gt];Xt&&(Xt.delete(Ke),Xt.size===0&&delete we[gt])}}function au(P){var N=P.enforceActions,G=P.computedRequiresReaction,oe=P.computedConfigurable,we=P.disableErrorBoundaries,Ke=P.reactionScheduler,gt=P.reactionRequiresObservable,Xt=P.observableRequiresReaction;if(P.isolateGlobalState===!0&&((Nn.pendingReactions.length||Nn.inBatch||Nn.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),Fu=!0,ma&&(--wc().__mobxInstanceCount==0&&(wc().__mobxGlobals=void 0),Nn=new iu)),N!==void 0){var Sn=void 0;switch(N){case!0:case"observed":Sn=!0;break;case!1:case"never":Sn=!1;break;case"strict":case"always":Sn="strict";break;default:_("Invalid value for 'enforceActions': '"+N+"', expected 'never', 'always' or 'observed'")}Nn.enforceActions=Sn,Nn.allowStateChanges=Sn!==!0&&Sn!=="strict"}G!==void 0&&(Nn.computedRequiresReaction=!!G),gt!==void 0&&(Nn.reactionRequiresObservable=!!gt),Xt!==void 0&&(Nn.observableRequiresReaction=!!Xt,Nn.allowStateReads=!Nn.observableRequiresReaction),oe!==void 0&&(Nn.computedConfigurable=!!oe),we!==void 0&&(Nn.disableErrorBoundaries=!!we),Ke&&Wf(Ke)}function ga(P,N,G,oe){var we=Cs(oe=Ce(oe));return Fe(P),ua(P,oe.name,we.enhancer),N&&Xf(P,N,G,we),P}function Cs(P){return P.defaultDecorator||(P.deep===!1?vt:Ye)}function Xf(P,N,G,oe){var we,Ke;Ji();try{var gt=Y(N);try{for(var Xt=ce(gt),Sn=Xt.next();!Sn.done;Sn=Xt.next()){var wr=Sn.value,pn=Object.getOwnPropertyDescriptor(N,wr),Gr=(G&&wr in G?G[wr]:pn.get?dn:oe)(P,wr,pn,!0);Gr&&Object.defineProperty(P,wr,Gr)}}catch(mr){we={error:mr}}finally{try{Sn&&!Sn.done&&(Ke=Xt.return)&&Ke.call(Xt)}finally{if(we)throw we.error}}}finally{la()}}function Fo(P,N){return Il(sa(P,N))}function Il(P){var N,G,oe={name:P.name};return P.observing&&P.observing.length>0&&(oe.dependencies=(N=P.observing,G=[],N.forEach(function(we){G.indexOf(we)===-1&&G.push(we)}),G).map(Il)),oe}var Ll=0;function Ds(){this.message="FLOW_CANCELLED"}function lu(P){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var N=P.name||"<unnamed flow>";return function(){var G,oe=this,we=arguments,Ke=++Ll,gt=gl(N+" - runid: "+Ke+" - init",P).apply(oe,we),Xt=void 0,Sn=new Promise(function(wr,pn){var Gr=0;function mr(Ao){var na;Xt=void 0;try{na=gl(N+" - runid: "+Ke+" - yield "+Gr++,gt.next).call(gt,Ao)}catch(_l){return pn(_l)}ca(na)}function Ir(Ao){var na;Xt=void 0;try{na=gl(N+" - runid: "+Ke+" - yield "+Gr++,gt.throw).call(gt,Ao)}catch(_l){return pn(_l)}ca(na)}function ca(Ao){if(!Ao||typeof Ao.then!="function")return Ao.done?wr(Ao.value):(Xt=Promise.resolve(Ao.value)).then(mr,Ir);Ao.then(ca,pn)}G=pn,mr(void 0)});return Sn.cancel=gl(N+" - runid: "+Ke+" - cancel",function(){try{Xt&&xi(Xt);var wr=gt.return(void 0),pn=Promise.resolve(wr.value);pn.then(x,x),xi(pn),G(new Ds)}catch(Gr){G(Gr)}}),Sn}}function xi(P){typeof P.cancel=="function"&&P.cancel()}function kc(P,N){if(P==null)return!1;if(N!==void 0){if(fi(P)===!1||!P[K].values.has(N))return!1;var G=sa(P,N);return yl(G)}return yl(P)}function qf(P){return arguments.length>1?_(!1):kc(P)}function Pc(P,N){return typeof N!="string"?_(!1):kc(P,N)}function Fi(P,N){return P!=null&&(N!==void 0?!!fi(P)&&P[K].values.has(N):fi(P)||!!P[K]||B(P)||Uu(P)||yl(P))}function si(P){return arguments.length!==1&&_(!1),Fi(P)}function _a(P){return fi(P)?P[K].getKeys():Ko(P)||ni(P)?Array.from(P.keys()):wa(P)?P.map(function(N,G){return G}):_(!1)}function lo(P){return fi(P)?_a(P).map(function(N){return P[N]}):Ko(P)?_a(P).map(function(N){return P.get(N)}):ni(P)?Array.from(P.values()):wa(P)?P.slice():_(!1)}function ip(P){return fi(P)?_a(P).map(function(N){return[N,P[N]]}):Ko(P)?_a(P).map(function(N){return[N,P.get(N)]}):ni(P)?Array.from(P.entries()):wa(P)?P.map(function(N,G){return[G,N]}):_(!1)}function Ui(P,N,G){if(arguments.length!==2||ni(P))if(fi(P)){var oe=P[K],we=oe.values.get(N);we?oe.write(N,G):oe.addObservableProp(N,G,oe.defaultEnhancer)}else if(Ko(P))P.set(N,G);else if(ni(P))P.add(N);else{if(!wa(P))return _(!1);typeof N!="number"&&(N=parseInt(N,10)),b(N>=0,"Not a valid index: '"+N+"'"),Ji(),N>=P.length&&(P.length=N+1),P[N]=G,la()}else{Ji();var Ke=N;try{for(var gt in Ke)Ui(P,gt,Ke[gt])}finally{la()}}}function Yf(P,N,G,oe){return typeof G=="function"?function(we,Ke,gt,Xt){return Ii(we,Ke).observe(gt,Xt)}(P,N,G,oe):function(we,Ke,gt){return Ii(we).observe(Ke,gt)}(P,N,G)}Ds.prototype=Object.create(Error.prototype);var Kf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Vi(P,N,G,oe){return oe.detectCycles&&P.set(N,G),G}function Qi(P,N,G){if(!N.recurseEverything&&!si(P)||typeof P!="object")return P;if(P===null)return null;if(P instanceof Date)return P;if(ml(P))return Qi(P.get(),N,G);if(si(P)&&_a(P),N.detectCycles===!0&&P!==null&&G.has(P))return G.get(P);if(wa(P)||Array.isArray(P)){var oe=Vi(G,P,[],N),we=P.map(function(mr){return Qi(mr,N,G)});oe.length=we.length;for(var Ke=0,gt=we.length;Ke<gt;Ke++)oe[Ke]=we[Ke];return oe}if(ni(P)||Object.getPrototypeOf(P)===Set.prototype){if(N.exportMapsAsObjects===!1){var Xt=Vi(G,P,new Set,N);return P.forEach(function(mr){Xt.add(Qi(mr,N,G))}),Xt}var Sn=Vi(G,P,[],N);return P.forEach(function(mr){Sn.push(Qi(mr,N,G))}),Sn}if(Ko(P)||Object.getPrototypeOf(P)===Map.prototype){if(N.exportMapsAsObjects===!1){var wr=Vi(G,P,new Map,N);return P.forEach(function(mr,Ir){wr.set(Ir,Qi(mr,N,G))}),wr}var pn=Vi(G,P,{},N);return P.forEach(function(mr,Ir){pn[Ir]=Qi(mr,N,G)}),pn}var Gr=Vi(G,P,{},N);return F(P).forEach(function(mr){Gr[mr]=Qi(P[mr],N,G)}),Gr}function Nc(P,N){var G;return typeof N=="boolean"&&(N={detectCycles:N}),N||(N=Kf),N.detectCycles=N.detectCycles===void 0?N.recurseEverything===!0:N.detectCycles===!0,N.detectCycles&&(G=new Map),Qi(P,N,G)}function $r(P){switch(P.length){case 0:return Nn.trackingDerivation;case 1:return sa(P[0]);case 2:return sa(P[0],P[1])}}function ci(P,N){N===void 0&&(N=void 0),Ji();try{return P.apply(N)}finally{la()}}function js(P,N,G){return arguments.length===1||N&&typeof N=="object"?Rc(P,N):Zf(P,N,G||{})}function Zf(P,N,G){var oe;typeof G.timeout=="number"&&(oe=setTimeout(function(){if(!Ke[K].isDisposed){Ke();var gt=new Error("WHEN_TIMEOUT");if(!G.onError)throw gt;G.onError(gt)}},G.timeout)),G.name=G.name||"When@"+g();var we=Yo(G.name+"-effect",N),Ke=Mc(function(gt){P()&&(gt.dispose(),oe&&clearTimeout(oe),we())},G);return Ke}function Rc(P,N){var G,oe=new Promise(function(we,Ke){var gt=Zf(P,we,pe(pe({},N),{onError:Ke}));G=function(){gt(),Ke("WHEN_CANCELLED")}});return oe.cancel=G,oe}function Is(P){return P[K]}function Xa(P){return typeof P=="string"||typeof P=="number"||typeof P=="symbol"}var Bi={has:function(P,N){if(N===K||N==="constructor"||N===le)return!0;var G=Is(P);return Xa(N)?G.has(N):N in P},get:function(P,N){if(N===K||N==="constructor"||N===le)return P[N];var G=Is(P),oe=G.values.get(N);if(oe instanceof H){var we=oe.get();return we===void 0&&G.has(N),we}return Xa(N)&&G.has(N),P[N]},set:function(P,N,G){return!!Xa(N)&&(Ui(P,N,G),!0)},deleteProperty:function(P,N){return!!Xa(N)&&(Is(P).remove(N),!0)},ownKeys:function(P){return Is(P).keysAtom.reportObserved(),Reflect.ownKeys(P)},preventExtensions:function(P){return _("Dynamic observable objects cannot be frozen"),!1}};function uu(P){var N=new Proxy(P,Bi);return P[K].proxy=N,N}function ea(P){return P.interceptors!==void 0&&P.interceptors.length>0}function ba(P,N){var G=P.interceptors||(P.interceptors=[]);return G.push(N),O(function(){var oe=G.indexOf(N);oe!==-1&&G.splice(oe,1)})}function Nr(P,N){var G=je();try{for(var oe=Ee(P.interceptors||[]),we=0,Ke=oe.length;we<Ke&&(b(!(N=oe[we](N))||N.type,"Intercept handlers should return nothing or a change object"),N);we++);return N}finally{st(G)}}function Wi(P){return P.changeListeners!==void 0&&P.changeListeners.length>0}function ja(P,N){var G=P.changeListeners||(P.changeListeners=[]);return G.push(N),O(function(){var oe=G.indexOf(N);oe!==-1&&G.splice(oe,1)})}function yi(P,N){var G=je(),oe=P.changeListeners;if(oe){for(var we=0,Ke=(oe=oe.slice()).length;we<Ke;we++)oe[we](N);st(G)}}var su={get:function(P,N){return N===K?P[K]:N==="length"?P[K].getArrayLength():typeof N=="number"?vo.get.call(P,N):typeof N!="string"||isNaN(N)?vo.hasOwnProperty(N)?vo[N]:P[N]:vo.get.call(P,parseInt(N))},set:function(P,N,G){return N==="length"&&P[K].setArrayLength(G),typeof N=="number"&&vo.set.call(P,N,G),typeof N=="symbol"||isNaN(N)?P[N]=G:vo.set.call(P,parseInt(N),G),!0},preventExtensions:function(P){return _("Observable arrays cannot be frozen"),!1}};function $l(P,N,G,oe){G===void 0&&(G="ObservableArray@"+g()),oe===void 0&&(oe=!1);var we,Ke,gt,Xt=new Ia(G,N,oe);we=Xt.values,Ke=K,gt=Xt,Object.defineProperty(we,Ke,{enumerable:!1,writable:!1,configurable:!0,value:gt});var Sn=new Proxy(Xt.values,su);if(Xt.proxy=Sn,P&&P.length){var wr=lr(!0);Xt.spliceWithArray(0,0,P),to(wr)}return Sn}var Ia=function(){function P(N,G,oe){this.owned=oe,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new H(N||"ObservableArray@"+g()),this.enhancer=function(we,Ke){return G(we,Ke,N+"[..]")}}return P.prototype.dehanceValue=function(N){return this.dehancer!==void 0?this.dehancer(N):N},P.prototype.dehanceValues=function(N){return this.dehancer!==void 0&&N.length>0?N.map(this.dehancer):N},P.prototype.intercept=function(N){return ba(this,N)},P.prototype.observe=function(N,G){return G===void 0&&(G=!1),G&&N({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ja(this,N)},P.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},P.prototype.setArrayLength=function(N){if(typeof N!="number"||N<0)throw new Error("[mobx.array] Out of range: "+N);var G=this.values.length;if(N!==G)if(N>G){for(var oe=new Array(N-G),we=0;we<N-G;we++)oe[we]=void 0;this.spliceWithArray(G,0,oe)}else this.spliceWithArray(N,G-N)},P.prototype.updateArrayLength=function(N,G){if(N!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=G},P.prototype.spliceWithArray=function(N,G,oe){var we=this;Un(this.atom);var Ke=this.values.length;if(N===void 0?N=0:N>Ke?N=Ke:N<0&&(N=Math.max(0,Ke+N)),G=arguments.length===1?Ke-N:G==null?0:Math.max(0,Math.min(G,Ke-N)),oe===void 0&&(oe=v),ea(this)){var gt=Nr(this,{object:this.proxy,type:"splice",index:N,removedCount:G,added:oe});if(!gt)return v;G=gt.removedCount,oe=gt.added}oe=oe.length===0?oe:oe.map(function(Sn){return we.enhancer(Sn,void 0)});var Xt=this.spliceItemsIntoValues(N,G,oe);return G===0&&oe.length===0||this.notifyArraySplice(N,oe,Xt),this.dehanceValues(Xt)},P.prototype.spliceItemsIntoValues=function(N,G,oe){var we;if(oe.length<1e4)return(we=this.values).splice.apply(we,Ee([N,G],oe));var Ke=this.values.slice(N,N+G);return this.values=this.values.slice(0,N).concat(oe,this.values.slice(N+G)),Ke},P.prototype.notifyArrayChildUpdate=function(N,G,oe){var we=!this.owned&&!1,Ke=Wi(this),gt=Ke||we?{object:this.proxy,type:"update",index:N,newValue:G,oldValue:oe}:null;this.atom.reportChanged(),Ke&&yi(this,gt)},P.prototype.notifyArraySplice=function(N,G,oe){var we=!this.owned&&!1,Ke=Wi(this),gt=Ke||we?{object:this.proxy,type:"splice",index:N,removed:oe,added:G,removedCount:oe.length,addedCount:G.length}:null;this.atom.reportChanged(),Ke&&yi(this,gt)},P}(),vo={intercept:function(P){return this[K].intercept(P)},observe:function(P,N){return N===void 0&&(N=!1),this[K].observe(P,N)},clear:function(){return this.splice(0)},replace:function(P){var N=this[K];return N.spliceWithArray(0,N.values.length,P)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(P,N){for(var G=[],oe=2;oe<arguments.length;oe++)G[oe-2]=arguments[oe];var we=this[K];switch(arguments.length){case 0:return[];case 1:return we.spliceWithArray(P);case 2:return we.spliceWithArray(P,N)}return we.spliceWithArray(P,N,G)},spliceWithArray:function(P,N,G){return this[K].spliceWithArray(P,N,G)},push:function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];var G=this[K];return G.spliceWithArray(G.values.length,0,P),G.values.length},pop:function(){return this.splice(Math.max(this[K].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];var G=this[K];return G.spliceWithArray(0,0,P),G.values.length},reverse:function(){var P=this.slice();return P.reverse.apply(P,arguments)},sort:function(P){var N=this.slice();return N.sort.apply(N,arguments)},remove:function(P){var N=this[K],G=N.dehanceValues(N.values).indexOf(P);return G>-1&&(this.splice(G,1),!0)},get:function(P){var N=this[K];if(N&&P<N.values.length)return N.atom.reportObserved(),N.dehanceValue(N.values[P])},set:function(P,N){var G=this[K],oe=G.values;if(P<oe.length){Un(G.atom);var we=oe[P];if(ea(G)){var Ke=Nr(G,{type:"update",object:G.proxy,index:P,newValue:N});if(!Ke)return;N=Ke.newValue}(N=G.enhancer(N,we))!==we&&(oe[P]=N,G.notifyArrayChildUpdate(P,N,we))}else{if(P!==oe.length)throw new Error("[mobx.array] Index out of bounds, "+P+" is larger than "+oe.length);G.spliceWithArray(P,0,[N])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(P){typeof Array.prototype[P]=="function"&&(vo[P]=function(){var N=this[K];N.atom.reportObserved();var G=N.dehanceValues(N.values);return G[P].apply(G,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(P){typeof Array.prototype[P]=="function"&&(vo[P]=function(N,G){var oe=this,we=this[K];return we.atom.reportObserved(),we.dehanceValues(we.values)[P](function(Ke,gt){return N.call(G,Ke,gt,oe)},G)})}),["reduce","reduceRight"].forEach(function(P){vo[P]=function(){var N=this,G=this[K];G.atom.reportObserved();var oe=arguments[0];return arguments[0]=function(we,Ke,gt){return Ke=G.dehanceValue(Ke),oe(we,Ke,gt,N)},G.values[P].apply(G.values,arguments)}});var Vu,qa=D("ObservableArrayAdministration",Ia);function wa(P){return M(P)&&qa(P[K])}var Cc,ap={},Dc=function(){function P(N,G,oe){if(G===void 0&&(G=kt),oe===void 0&&(oe="ObservableMap@"+g()),this.enhancer=G,this.name=oe,this[Vu]=ap,this._keysAtom=z(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(N)}return P.prototype._has=function(N){return this._data.has(N)},P.prototype.has=function(N){var G=this;if(!Nn.trackingDerivation)return this._has(N);var oe=this._hasMap.get(N);if(!oe){var we=oe=new Dr(this._has(N),On,this.name+"."+I(N)+"?",!1);this._hasMap.set(N,we),Wr(we,function(){return G._hasMap.delete(N)})}return oe.get()},P.prototype.set=function(N,G){var oe=this._has(N);if(ea(this)){var we=Nr(this,{type:oe?"update":"add",object:this,newValue:G,name:N});if(!we)return this;G=we.newValue}return oe?this._updateValue(N,G):this._addValue(N,G),this},P.prototype.delete=function(N){var G=this;if(Un(this._keysAtom),ea(this)&&!(we=Nr(this,{type:"delete",object:this,name:N})))return!1;if(this._has(N)){var oe=Wi(this),we=oe?{type:"delete",object:this,oldValue:this._data.get(N).value,name:N}:null;return ci(function(){G._keysAtom.reportChanged(),G._updateHasMapEntry(N,!1),G._data.get(N).setNewValue(void 0),G._data.delete(N)}),oe&&yi(this,we),!0}return!1},P.prototype._updateHasMapEntry=function(N,G){var oe=this._hasMap.get(N);oe&&oe.setNewValue(G)},P.prototype._updateValue=function(N,G){var oe=this._data.get(N);if((G=oe.prepareNewValue(G))!==Nn.UNCHANGED){var we=Wi(this),Ke=we?{type:"update",object:this,oldValue:oe.value,name:N,newValue:G}:null;oe.setNewValue(G),we&&yi(this,Ke)}},P.prototype._addValue=function(N,G){var oe=this;Un(this._keysAtom),ci(function(){var gt=new Dr(G,oe.enhancer,oe.name+"."+I(N),!1);oe._data.set(N,gt),G=gt.value,oe._updateHasMapEntry(N,!0),oe._keysAtom.reportChanged()});var we=Wi(this),Ke=we?{type:"add",object:this,name:N,newValue:G}:null;we&&yi(this,Ke)},P.prototype.get=function(N){return this.has(N)?this.dehanceValue(this._data.get(N).get()):this.dehanceValue(void 0)},P.prototype.dehanceValue=function(N){return this.dehancer!==void 0?this.dehancer(N):N},P.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},P.prototype.values=function(){var N=this,G=this.keys();return Rr({next:function(){var oe=G.next(),we=oe.done,Ke=oe.value;return{done:we,value:we?void 0:N.get(Ke)}}})},P.prototype.entries=function(){var N=this,G=this.keys();return Rr({next:function(){var oe=G.next(),we=oe.done,Ke=oe.value;return{done:we,value:we?void 0:[Ke,N.get(Ke)]}}})},P.prototype[Vu=K,Symbol.iterator]=function(){return this.entries()},P.prototype.forEach=function(N,G){var oe,we;try{for(var Ke=ce(this),gt=Ke.next();!gt.done;gt=Ke.next()){var Xt=Pe(gt.value,2),Sn=Xt[0],wr=Xt[1];N.call(G,wr,Sn,this)}}catch(pn){oe={error:pn}}finally{try{gt&&!gt.done&&(we=Ke.return)&&we.call(Ke)}finally{if(oe)throw oe.error}}},P.prototype.merge=function(N){var G=this;return Ko(N)&&(N=N.toJS()),ci(function(){var oe=lr(!0);try{A(N)?F(N).forEach(function(we){return G.set(we,N[we])}):Array.isArray(N)?N.forEach(function(we){var Ke=Pe(we,2),gt=Ke[0],Xt=Ke[1];return G.set(gt,Xt)}):j(N)?(N.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+N.constructor.name),N.forEach(function(we,Ke){return G.set(Ke,we)})):N!=null&&_("Cannot initialize map from "+N)}finally{to(oe)}}),this},P.prototype.clear=function(){var N=this;ci(function(){Qe(function(){var G,oe;try{for(var we=ce(N.keys()),Ke=we.next();!Ke.done;Ke=we.next()){var gt=Ke.value;N.delete(gt)}}catch(Xt){G={error:Xt}}finally{try{Ke&&!Ke.done&&(oe=we.return)&&oe.call(we)}finally{if(G)throw G.error}}})})},P.prototype.replace=function(N){var G=this;return ci(function(){var oe,we,Ke,gt,Xt=function(ri){if(j(ri)||Ko(ri))return ri;if(Array.isArray(ri))return new Map(ri);if(A(ri)){var Ul=new Map;for(var wl in ri)Ul.set(wl,ri[wl]);return Ul}return _("Cannot convert to map from '"+ri+"'")}(N),Sn=new Map,wr=!1;try{for(var pn=ce(G._data.keys()),Gr=pn.next();!Gr.done;Gr=pn.next()){var mr=Gr.value;if(!Xt.has(mr))if(G.delete(mr))wr=!0;else{var Ir=G._data.get(mr);Sn.set(mr,Ir)}}}catch(ri){oe={error:ri}}finally{try{Gr&&!Gr.done&&(we=pn.return)&&we.call(pn)}finally{if(oe)throw oe.error}}try{for(var ca=ce(Xt.entries()),Ao=ca.next();!Ao.done;Ao=ca.next()){var na=Pe(Ao.value,2),_l=(mr=na[0],Ir=na[1],G._data.has(mr));if(G.set(mr,Ir),G._data.has(mr)){var bl=G._data.get(mr);Sn.set(mr,bl),_l||(wr=!0)}}}catch(ri){Ke={error:ri}}finally{try{Ao&&!Ao.done&&(gt=ca.return)&&gt.call(ca)}finally{if(Ke)throw Ke.error}}if(!wr)if(G._data.size!==Sn.size)G._keysAtom.reportChanged();else for(var Fl=G._data.keys(),cu=Sn.keys(),Ka=Fl.next(),fu=cu.next();!Ka.done;){if(Ka.value!==fu.value){G._keysAtom.reportChanged();break}Ka=Fl.next(),fu=cu.next()}G._data=Sn}),this},Object.defineProperty(P.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.toPOJO=function(){var N,G,oe={};try{for(var we=ce(this),Ke=we.next();!Ke.done;Ke=we.next()){var gt=Pe(Ke.value,2),Xt=gt[0],Sn=gt[1];oe[typeof Xt=="symbol"?Xt:I(Xt)]=Sn}}catch(wr){N={error:wr}}finally{try{Ke&&!Ke.done&&(G=we.return)&&G.call(we)}finally{if(N)throw N.error}}return oe},P.prototype.toJS=function(){return new Map(this)},P.prototype.toJSON=function(){return this.toPOJO()},P.prototype.toString=function(){var N=this;return this.name+"[{ "+Array.from(this.keys()).map(function(G){return I(G)+": "+N.get(G)}).join(", ")+" }]"},P.prototype.observe=function(N,G){return ja(this,N)},P.prototype.intercept=function(N){return ba(this,N)},P}(),Ko=D("ObservableMap",Dc),Bu={},Ya=function(){function P(N,G,oe){if(G===void 0&&(G=kt),oe===void 0&&(oe="ObservableSet@"+g()),this.name=oe,this[Cc]=Bu,this._data=new Set,this._atom=z(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(we,Ke){return G(we,Ke,oe)},N&&this.replace(N)}return P.prototype.dehanceValue=function(N){return this.dehancer!==void 0?this.dehancer(N):N},P.prototype.clear=function(){var N=this;ci(function(){Qe(function(){var G,oe;try{for(var we=ce(N._data.values()),Ke=we.next();!Ke.done;Ke=we.next()){var gt=Ke.value;N.delete(gt)}}catch(Xt){G={error:Xt}}finally{try{Ke&&!Ke.done&&(oe=we.return)&&oe.call(we)}finally{if(G)throw G.error}}})})},P.prototype.forEach=function(N,G){var oe,we;try{for(var Ke=ce(this),gt=Ke.next();!gt.done;gt=Ke.next()){var Xt=gt.value;N.call(G,Xt,Xt,this)}}catch(Sn){oe={error:Sn}}finally{try{gt&&!gt.done&&(we=Ke.return)&&we.call(Ke)}finally{if(oe)throw oe.error}}},Object.defineProperty(P.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),P.prototype.add=function(N){var G=this;if(Un(this._atom),ea(this)&&!(we=Nr(this,{type:"add",object:this,newValue:N})))return this;if(!this.has(N)){ci(function(){G._data.add(G.enhancer(N,void 0)),G._atom.reportChanged()});var oe=Wi(this),we=oe?{type:"add",object:this,newValue:N}:null;oe&&yi(this,we)}return this},P.prototype.delete=function(N){var G=this;if(ea(this)&&!(we=Nr(this,{type:"delete",object:this,oldValue:N})))return!1;if(this.has(N)){var oe=Wi(this),we=oe?{type:"delete",object:this,oldValue:N}:null;return ci(function(){G._atom.reportChanged(),G._data.delete(N)}),oe&&yi(this,we),!0}return!1},P.prototype.has=function(N){return this._atom.reportObserved(),this._data.has(this.dehanceValue(N))},P.prototype.entries=function(){var N=0,G=Array.from(this.keys()),oe=Array.from(this.values());return Rr({next:function(){var we=N;return N+=1,we<oe.length?{value:[G[we],oe[we]],done:!1}:{done:!0}}})},P.prototype.keys=function(){return this.values()},P.prototype.values=function(){this._atom.reportObserved();var N=this,G=0,oe=Array.from(this._data.values());return Rr({next:function(){return G<oe.length?{value:N.dehanceValue(oe[G++]),done:!1}:{done:!0}}})},P.prototype.replace=function(N){var G=this;return ni(N)&&(N=N.toJS()),ci(function(){var oe=lr(!0);try{Array.isArray(N)||U(N)?(G.clear(),N.forEach(function(we){return G.add(we)})):N!=null&&_("Cannot initialize set from "+N)}finally{to(oe)}}),this},P.prototype.observe=function(N,G){return ja(this,N)},P.prototype.intercept=function(N){return ba(this,N)},P.prototype.toJS=function(){return new Set(this)},P.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},P.prototype[Cc=K,Symbol.iterator]=function(){return this.values()},P}(),ni=D("ObservableSet",Ya),jc=function(){function P(N,G,oe,we){G===void 0&&(G=new Map),this.target=N,this.values=G,this.name=oe,this.defaultEnhancer=we,this.keysAtom=new H(oe+".keys")}return P.prototype.read=function(N){return this.values.get(N).get()},P.prototype.write=function(N,G){var oe=this.target,we=this.values.get(N);if(we instanceof Ha)we.set(G);else{if(ea(this)){if(!(gt=Nr(this,{type:"update",object:this.proxy||oe,name:N,newValue:G})))return;G=gt.newValue}if((G=we.prepareNewValue(G))!==Nn.UNCHANGED){var Ke=Wi(this),gt=Ke?{type:"update",object:this.proxy||oe,oldValue:we.value,name:N,newValue:G}:null;we.setNewValue(G),Ke&&yi(this,gt)}}},P.prototype.has=function(N){var G=this.pendingKeys||(this.pendingKeys=new Map),oe=G.get(N);if(oe)return oe.get();var we=!!this.values.get(N);return oe=new Dr(we,On,this.name+"."+I(N)+"?",!1),G.set(N,oe),oe.get()},P.prototype.addObservableProp=function(N,G,oe){oe===void 0&&(oe=this.defaultEnhancer);var we=this.target;if(ea(this)){var Ke=Nr(this,{object:this.proxy||we,name:N,type:"add",newValue:G});if(!Ke)return;G=Ke.newValue}var gt=new Dr(G,oe,this.name+"."+I(N),!1);this.values.set(N,gt),G=gt.value,Object.defineProperty(we,N,function(Xt){return Ea[Xt]||(Ea[Xt]={configurable:!0,enumerable:!0,get:function(){return this[K].read(Xt)},set:function(Sn){this[K].write(Xt,Sn)}})}(N)),this.notifyPropertyAddition(N,G)},P.prototype.addComputedProp=function(N,G,oe){var we,Ke,gt,Xt=this.target;oe.name=oe.name||this.name+"."+I(G),this.values.set(G,new Ha(oe)),(N===Xt||(we=N,Ke=G,!(gt=Object.getOwnPropertyDescriptor(we,Ke))||gt.configurable!==!1&&gt.writable!==!1))&&Object.defineProperty(N,G,function(Sn){return Ls[Sn]||(Ls[Sn]={configurable:Nn.computedConfigurable,enumerable:!1,get:function(){return Gi(this).read(Sn)},set:function(wr){Gi(this).write(Sn,wr)}})}(G))},P.prototype.remove=function(N){if(this.values.has(N)){var G=this.target;if(ea(this)&&!(Sn=Nr(this,{object:this.proxy||G,name:N,type:"remove"})))return;try{Ji();var oe=Wi(this),we=!1,Ke=this.values.get(N),gt=Ke&&Ke.get();if(Ke&&Ke.set(void 0),this.keysAtom.reportChanged(),this.values.delete(N),this.pendingKeys){var Xt=this.pendingKeys.get(N);Xt&&Xt.set(!1)}delete this.target[N];var Sn=oe?{type:"remove",object:this.proxy||G,oldValue:gt,name:N}:null;oe&&yi(this,Sn)}finally{la()}}},P.prototype.illegalAccess=function(N,G){},P.prototype.observe=function(N,G){return ja(this,N)},P.prototype.intercept=function(N){return ba(this,N)},P.prototype.notifyPropertyAddition=function(N,G){var oe=Wi(this),we=oe?{type:"add",object:this.proxy||this.target,name:N,newValue:G}:null;if(oe&&yi(this,we),this.pendingKeys){var Ke=this.pendingKeys.get(N);Ke&&Ke.set(!0)}this.keysAtom.reportChanged()},P.prototype.getKeys=function(){var N,G;this.keysAtom.reportObserved();var oe=[];try{for(var we=ce(this.values),Ke=we.next();!Ke.done;Ke=we.next()){var gt=Pe(Ke.value,2),Xt=gt[0];gt[1]instanceof Dr&&oe.push(Xt)}}catch(Sn){N={error:Sn}}finally{try{Ke&&!Ke.done&&(G=we.return)&&G.call(we)}finally{if(N)throw N.error}}return oe},P}();function ua(P,N,G){if(N===void 0&&(N=""),G===void 0&&(G=kt),Object.prototype.hasOwnProperty.call(P,K))return P[K];A(P)||(N=(P.constructor.name||"ObservableObject")+"@"+g()),N||(N="ObservableObject@"+g());var oe=new jc(P,new Map,I(N),G);return E(P,K,oe),oe}var Ea=Object.create(null),Ls=Object.create(null);function Gi(P){var N=P[K];return N||(Fe(P),P[K])}var ta=D("ObservableObjectAdministration",jc);function fi(P){return!!M(P)&&(Fe(P),ta(P[K]))}function sa(P,N){if(typeof P=="object"&&P!==null){if(wa(P))return N!==void 0&&_(!1),P[K].atom;if(ni(P))return P[K];if(Ko(P)){var G=P;return N===void 0?G._keysAtom:((oe=G._data.get(N)||G._hasMap.get(N))||_(!1),oe)}var oe;if(Fe(P),N&&!P[K]&&P[N],fi(P))return N?((oe=P[K].values.get(N))||_(!1),oe):_(!1);if(B(P)||yl(P)||Uu(P))return P}else if(typeof P=="function"&&Uu(P[K]))return P[K];return _(!1)}function Ii(P,N){return P||_("Expecting some object"),N!==void 0?Ii(sa(P,N)):B(P)||yl(P)||Uu(P)||Ko(P)||ni(P)?P:(Fe(P),P[K]?P[K]:void _(!1))}var dt=Object.prototype.toString;function Ft(P,N,G){return G===void 0&&(G=-1),Ut(P,N,G)}function Ut(P,N,G,oe,we){if(P===N)return P!==0||1/P==1/N;if(P==null||N==null)return!1;if(P!=P)return N!=N;var Ke=typeof P;if(Ke!=="function"&&Ke!=="object"&&typeof N!="object")return!1;var gt=dt.call(P);if(gt!==dt.call(N))return!1;switch(gt){case"[object RegExp]":case"[object String]":return""+P==""+N;case"[object Number]":return+P!=+P?+N!=+N:+P==0?1/+P==1/N:+P==+N;case"[object Date]":case"[object Boolean]":return+P==+N;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(P)===Symbol.valueOf.call(N);case"[object Map]":case"[object Set]":G>=0&&G++}P=yn(P),N=yn(N);var Xt=gt==="[object Array]";if(!Xt){if(typeof P!="object"||typeof N!="object")return!1;var Sn=P.constructor,wr=N.constructor;if(Sn!==wr&&!(typeof Sn=="function"&&Sn instanceof Sn&&typeof wr=="function"&&wr instanceof wr)&&"constructor"in P&&"constructor"in N)return!1}if(G===0)return!1;G<0&&(G=-1),we=we||[];for(var pn=(oe=oe||[]).length;pn--;)if(oe[pn]===P)return we[pn]===N;if(oe.push(P),we.push(N),Xt){if((pn=P.length)!==N.length)return!1;for(;pn--;)if(!Ut(P[pn],N[pn],G-1,oe,we))return!1}else{var Gr=Object.keys(P),mr=void 0;if(pn=Gr.length,Object.keys(N).length!==pn)return!1;for(;pn--;)if(!fr(N,mr=Gr[pn])||!Ut(P[mr],N[mr],G-1,oe,we))return!1}return oe.pop(),we.pop(),!0}function yn(P){return wa(P)?P.slice():j(P)||Ko(P)||U(P)||ni(P)?Array.from(P.entries()):P}function fr(P,N){return Object.prototype.hasOwnProperty.call(P,N)}function Rr(P){return P[Symbol.iterator]=mo,P}function mo(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:xc,extras:{getDebugName:function(P,N){return(N!==void 0?sa(P,N):fi(P)||Ko(P)||ni(P)?Ii(P):sa(P)).name}},$mobx:K})}).call(this,r(163),r(68))},function(n,a,r){var u=r(113),c=r(42),v=r(179);u||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,a,r){var u=r(41),c=r(100),v=r(80),f=r(58),g=r(116),_="Array Iterator",b=f.set,O=f.getterFor(_);n.exports=g(Array,"Array",function(x,M){b(this,{type:_,target:u(x),index:0,kind:M})},function(){var x=O(this),M=x.target,A=x.kind,E=x.index++;return!M||E>=M.length?(x.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:E,done:!1}:A=="values"?{value:M[E],done:!1}:{value:[E,M[E]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,a,r){var u=r(16),c=r(7),v=r(46),f=r(76),g=r(34),_=r(15),b=r(71),O=r(36),x=r(108),M=r(18),A=r(35),E=r(96),D=r(30),j=r(33),U=r(54),F=r(87),I=r(32),V=r(40),Y=r(41),K=r(86),H=r(39),B=r(69),z=r(60),X=r(77),ee=r(74),pe=r(139),ce=r(112),Pe=r(50),Ee=r(38),le=r(84),ie=r(98),$e=r(42),Ge=r(89),ht=r(93),Fe=r(72),Nt=r(90),Yt=r(28),kt=r(140),On=r(141),Be=r(78),Se=r(58),Ce=r(79).forEach,Ye=ht("hidden"),bt="Symbol",vt=Yt("toPrimitive"),Wt=Se.set,Qt=Se.getterFor(bt),Gt=Object.prototype,Kt=c.Symbol,rt=Kt&&Kt.prototype,cn=c.TypeError,We=c.QObject,dn=v("JSON","stringify"),er=Pe.f,ae=Ee.f,tr=pe.f,Pr=le.f,Xr=_([].push),ao=Ge("symbols"),Un=Ge("op-symbols"),bo=Ge("string-to-symbol-registry"),Ae=Ge("symbol-to-string-registry"),Qe=Ge("wks"),je=!We||!We.prototype||!We.prototype.findChild,st=O&&M(function(){return z(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a!=7})?function(Mn,$n,Hn){var lr=er(Gt,$n);lr&&delete Gt[$n],ae(Mn,$n,Hn),lr&&Mn!==Gt&&ae(Gt,$n,lr)}:ae,on=function(Mn,$n){var Hn=ao[Mn]=z(rt);return Wt(Hn,{type:bt,tag:Mn,description:$n}),O||(Hn.description=$n),Hn},Jt=function(Mn,$n,Hn){Mn===Gt&&Jt(Un,$n,Hn),I(Mn);var lr=K($n);return I(Hn),A(ao,lr)?(Hn.enumerable?(A(Mn,Ye)&&Mn[Ye][lr]&&(Mn[Ye][lr]=!1),Hn=z(Hn,{enumerable:B(0,!1)})):(A(Mn,Ye)||ae(Mn,Ye,B(1,{})),Mn[Ye][lr]=!0),st(Mn,lr,Hn)):ae(Mn,lr,Hn)},Rn=function(Mn,$n){I(Mn);var Hn=Y($n),lr=X(Hn).concat(Yo(Hn));return Ce(lr,function(to){O&&!g(Or,Hn,to)||Jt(Mn,to,Hn[to])}),Mn},Or=function(Mn){var $n=K(Mn),Hn=g(Pr,this,$n);return!(this===Gt&&A(ao,$n)&&!A(Un,$n))&&(!(Hn||!A(this,$n)||!A(ao,$n)||A(this,Ye)&&this[Ye][$n])||Hn)},ui=function(Mn,$n){var Hn=Y(Mn),lr=K($n);if(Hn!==Gt||!A(ao,lr)||A(Un,lr)){var to=er(Hn,lr);return!to||!A(ao,lr)||A(Hn,Ye)&&Hn[Ye][lr]||(to.enumerable=!0),to}},Si=function(Mn){var $n=tr(Y(Mn)),Hn=[];return Ce($n,function(lr){A(ao,lr)||A(Fe,lr)||Xr(Hn,lr)}),Hn},Yo=function(Mn){var $n=Mn===Gt,Hn=tr($n?Un:Y(Mn)),lr=[];return Ce(Hn,function(to){!A(ao,to)||$n&&!A(Gt,to)||Xr(lr,ao[to])}),lr};if(x||(Kt=function(){if(U(rt,this))throw cn("Symbol is not a constructor");var Mn=arguments.length&&arguments[0]!==void 0?H(arguments[0]):void 0,$n=Nt(Mn),Hn=function(lr){this===Gt&&g(Hn,Un,lr),A(this,Ye)&&A(this[Ye],$n)&&(this[Ye][$n]=!1),st(this,$n,B(1,lr))};return O&&je&&st(Gt,$n,{configurable:!0,set:Hn}),on($n,Mn)},$e(rt=Kt.prototype,"toString",function(){return Qt(this).tag}),$e(Kt,"withoutSetter",function(Mn){return on(Nt(Mn),Mn)}),le.f=Or,Ee.f=Jt,Pe.f=ui,ee.f=pe.f=Si,ce.f=Yo,kt.f=function(Mn){return on(Yt(Mn),Mn)},O&&(ae(rt,"description",{configurable:!0,get:function(){return Qt(this).description}}),b||$e(Gt,"propertyIsEnumerable",Or,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!x,sham:!x},{Symbol:Kt}),Ce(X(Qe),function(Mn){On(Mn)}),u({target:bt,stat:!0,forced:!x},{for:function(Mn){var $n=H(Mn);if(A(bo,$n))return bo[$n];var Hn=Kt($n);return bo[$n]=Hn,Ae[Hn]=$n,Hn},keyFor:function(Mn){if(!F(Mn))throw cn(Mn+" is not a symbol");if(A(Ae,Mn))return Ae[Mn]},useSetter:function(){je=!0},useSimple:function(){je=!1}}),u({target:"Object",stat:!0,forced:!x,sham:!O},{create:function(Mn,$n){return $n===void 0?z(Mn):Rn(z(Mn),$n)},defineProperty:Jt,defineProperties:Rn,getOwnPropertyDescriptor:ui}),u({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:Si,getOwnPropertySymbols:Yo}),u({target:"Object",stat:!0,forced:M(function(){ce.f(1)})},{getOwnPropertySymbols:function(Mn){return ce.f(V(Mn))}}),dn&&u({target:"JSON",stat:!0,forced:!x||M(function(){var Mn=Kt();return dn([Mn])!="[null]"||dn({a:Mn})!="{}"||dn(Object(Mn))!="{}"})},{stringify:function(Mn,$n,Hn){var lr=ie(arguments),to=$n;if((j($n)||Mn!==void 0)&&!F(Mn))return E($n)||($n=function(Dr,ml){if(D(to)&&(ml=g(to,this,Dr,ml)),!F(ml))return ml}),lr[1]=$n,f(dn,null,lr)}}),!rt[vt]){var ti=rt.valueOf;$e(rt,vt,function(Mn){return g(ti,this)})}Be(Kt,bt),Fe[Ye]=!0},function(n,a,r){var u=r(7),c=r(152),v=r(153),f=r(3),g=r(57),_=r(28),b=_("iterator"),O=_("toStringTag"),x=f.values,M=function(E,D){if(E){if(E[b]!==x)try{g(E,b,x)}catch{E[b]=x}if(E[O]||g(E,O,D),c[D]){for(var j in f)if(E[j]!==f[j])try{g(E,j,f[j])}catch{E[j]=f[j]}}}};for(var A in c)M(u[A]&&u[A].prototype,A);M(v,"DOMTokenList")},function(n,a,r){var u=r(151).charAt,c=r(39),v=r(58),f=r(116),g="String Iterator",_=v.set,b=v.getterFor(g);f(String,"String",function(O){_(this,{type:g,string:c(O),index:0})},function(){var O,x=b(this),M=x.string,A=x.index;return A>=M.length?{value:void 0,done:!0}:(O=u(M,A),x.index+=O.length,{value:O,done:!1})})},function(n,a,r){(function(u){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof u=="object"&&u)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,a,r){var u=r(16),c=r(36),v=r(7),f=r(15),g=r(35),_=r(30),b=r(54),O=r(39),x=r(38).f,M=r(134),A=v.Symbol,E=A&&A.prototype;if(c&&_(A)&&(!("description"in E)||A().description!==void 0)){var D={},j=function(){var H=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),B=b(E,this)?new A(H):H===void 0?A():A(H);return H===""&&(D[B]=!0),B};M(j,A),j.prototype=E,E.constructor=j;var U=String(A("test"))=="Symbol(test)",F=f(E.toString),I=f(E.valueOf),V=/^Symbol\((.*)\)[^)]+$/,Y=f("".replace),K=f("".slice);x(E,"description",{configurable:!0,get:function(){var H=I(this),B=F(H);if(g(D,H))return"";var z=U?K(B,7,-1):Y(B,V,"$1");return z===""?void 0:z}}),u({global:!0,forced:!0},{Symbol:j})}},function(n,a,r){r(141)("iterator")},function(n,a,r){r.d(a,"a",function(){return f.a}),r.d(a,"c",function(){return f.e}),r.d(a,"h",function(){return V}),r.d(a,"i",function(){return U}),r.d(a,"j",function(){return D}),r.d(a,"b",function(){return Pe}),r.d(a,"e",function(){return $e}),r.d(a,"f",function(){return Ee}),r.d(a,"g",function(){return ao});var u,c,v,f=r(0),g=0,_=[],b=f.i.__b,O=f.i.__r,x=f.i.diffed,M=f.i.__c,A=f.i.unmount;function E(Ae,Qe){f.i.__h&&f.i.__h(c,Ae,g||Qe),g=0;var je=c.__H||(c.__H={__:[],__h:[]});return Ae>=je.__.length&&je.__.push({}),je.__[Ae]}function D(Ae){return g=1,j(ee,Ae)}function j(Ae,Qe,je){var st=E(u++,2);return st.t=Ae,st.__c||(st.__=[je?je(Qe):ee(void 0,Qe),function(on){var Jt=st.t(st.__[0],on);st.__[0]!==Jt&&(st.__=[Jt,st.__[1]],st.__c.setState({}))}],st.__c=c),st.__}function U(Ae,Qe){var je=E(u++,3);!f.i.__s&&X(je.__H,Qe)&&(je.__=Ae,je.__H=Qe,c.__H.__h.push(je))}function F(Ae,Qe){var je=E(u++,4);!f.i.__s&&X(je.__H,Qe)&&(je.__=Ae,je.__H=Qe,c.__h.push(je))}function I(Ae,Qe){var je=E(u++,7);return X(je.__H,Qe)&&(je.__=Ae(),je.__H=Qe,je.__h=Ae),je.__}function V(Ae,Qe){return g=8,I(function(){return Ae},Qe)}function Y(){var Ae;for(_.sort(function(Qe,je){return Qe.__v.__b-je.__v.__b});Ae=_.pop();)if(Ae.__P)try{Ae.__H.__h.forEach(B),Ae.__H.__h.forEach(z),Ae.__H.__h=[]}catch(Qe){Ae.__H.__h=[],f.i.__e(Qe,Ae.__v)}}f.i.__b=function(Ae){c=null,b&&b(Ae)},f.i.__r=function(Ae){O&&O(Ae),u=0;var Qe=(c=Ae.__c).__H;Qe&&(Qe.__h.forEach(B),Qe.__h.forEach(z),Qe.__h=[])},f.i.diffed=function(Ae){x&&x(Ae);var Qe=Ae.__c;Qe&&Qe.__H&&Qe.__H.__h.length&&(_.push(Qe)!==1&&v===f.i.requestAnimationFrame||((v=f.i.requestAnimationFrame)||H)(Y)),c=null},f.i.__c=function(Ae,Qe){Qe.some(function(je){try{je.__h.forEach(B),je.__h=je.__h.filter(function(st){return!st.__||z(st)})}catch(st){Qe.some(function(on){on.__h&&(on.__h=[])}),Qe=[],f.i.__e(st,je.__v)}}),M&&M(Ae,Qe)},f.i.unmount=function(Ae){A&&A(Ae);var Qe,je=Ae.__c;je&&je.__H&&(je.__H.__.forEach(function(st){try{B(st)}catch(on){Qe=on}}),Qe&&f.i.__e(Qe,je.__v))};var K=typeof requestAnimationFrame=="function";function H(Ae){var Qe,je=function(){clearTimeout(st),K&&cancelAnimationFrame(Qe),setTimeout(Ae)},st=setTimeout(je,100);K&&(Qe=requestAnimationFrame(je))}function B(Ae){var Qe=c,je=Ae.__c;typeof je=="function"&&(Ae.__c=void 0,je()),c=Qe}function z(Ae){var Qe=c;Ae.__c=Ae.__(),c=Qe}function X(Ae,Qe){return!Ae||Ae.length!==Qe.length||Qe.some(function(je,st){return je!==Ae[st]})}function ee(Ae,Qe){return typeof Qe=="function"?Qe(Ae):Qe}function pe(Ae,Qe){for(var je in Qe)Ae[je]=Qe[je];return Ae}function ce(Ae,Qe){for(var je in Ae)if(je!=="__source"&&!(je in Qe))return!0;for(var st in Qe)if(st!=="__source"&&Ae[st]!==Qe[st])return!0;return!1}function Pe(Ae){this.props=Ae}function Ee(Ae,Qe){function je(on){var Jt=this.props.ref,Rn=Jt==on.ref;return!Rn&&Jt&&(Jt.call?Jt(null):Jt.current=null),Qe?!Qe(this.props,on)||!Rn:ce(this.props,on)}function st(on){return this.shouldComponentUpdate=je,Object(f.e)(Ae,on)}return st.displayName="Memo("+(Ae.displayName||Ae.name)+")",st.prototype.isReactComponent=!0,st.__f=!0,st}(Pe.prototype=new f.a).isPureReactComponent=!0,Pe.prototype.shouldComponentUpdate=function(Ae,Qe){return ce(this.props,Ae)||ce(this.state,Qe)};var le=f.i.__b;f.i.__b=function(Ae){Ae.type&&Ae.type.__f&&Ae.ref&&(Ae.props.ref=Ae.ref,Ae.ref=null),le&&le(Ae)};var ie=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function $e(Ae){function Qe(je,st){var on=pe({},je);return delete on.ref,Ae(on,!(st=je.ref||st)||typeof st=="object"&&!("current"in st)?null:st)}return Qe.$$typeof=ie,Qe.render=Qe,Qe.prototype.isReactComponent=Qe.__f=!0,Qe.displayName="ForwardRef("+(Ae.displayName||Ae.name)+")",Qe}var Ge=function(Ae,Qe){return Ae==null?null:Object(f.k)(Object(f.k)(Ae).map(Qe))},ht={map:Ge,forEach:Ge,count:function(Ae){return Ae?Object(f.k)(Ae).length:0},only:function(Ae){var Qe=Object(f.k)(Ae);if(Qe.length!==1)throw"Children.only";return Qe[0]},toArray:f.k},Fe=f.i.__e;f.i.__e=function(Ae,Qe,je){if(Ae.then){for(var st,on=Qe;on=on.__;)if((st=on.__c)&&st.__c)return Qe.__e==null&&(Qe.__e=je.__e,Qe.__k=je.__k),st.__c(Ae,Qe)}Fe(Ae,Qe,je)};var Nt=f.i.unmount;function Yt(Ae,Qe,je){return Ae&&(Ae.__c&&Ae.__c.__H&&(Ae.__c.__H.__.forEach(function(st){typeof st.__c=="function"&&st.__c()}),Ae.__c.__H=null),(Ae=pe({},Ae)).__c!=null&&(Ae.__c.__P===je&&(Ae.__c.__P=Qe),Ae.__c=null),Ae.__k=Ae.__k&&Ae.__k.map(function(st){return Yt(st,Qe,je)})),Ae}function kt(Ae,Qe,je){return Ae&&(Ae.__v=null,Ae.__k=Ae.__k&&Ae.__k.map(function(st){return kt(st,Qe,je)}),Ae.__c&&Ae.__c.__P===Qe&&(Ae.__e&&je.insertBefore(Ae.__e,Ae.__d),Ae.__c.__e=!0,Ae.__c.__P=je)),Ae}function On(){this.__u=0,this.t=null,this.__b=null}function Be(Ae){var Qe=Ae.__.__c;return Qe&&Qe.__e&&Qe.__e(Ae)}function Se(){this.u=null,this.o=null}f.i.unmount=function(Ae){var Qe=Ae.__c;Qe&&Qe.__R&&Qe.__R(),Qe&&Ae.__h===!0&&(Ae.type=null),Nt&&Nt(Ae)},(On.prototype=new f.a).__c=function(Ae,Qe){var je=Qe.__c,st=this;st.t==null&&(st.t=[]),st.t.push(je);var on=Be(st.__v),Jt=!1,Rn=function(){Jt||(Jt=!0,je.__R=null,on?on(Or):Or())};je.__R=Rn;var Or=function(){if(!--st.__u){if(st.state.__e){var Si=st.state.__e;st.__v.__k[0]=kt(Si,Si.__c.__P,Si.__c.__O)}var Yo;for(st.setState({__e:st.__b=null});Yo=st.t.pop();)Yo.forceUpdate()}},ui=Qe.__h===!0;st.__u++||ui||st.setState({__e:st.__b=st.__v.__k[0]}),Ae.then(Rn,Rn)},On.prototype.componentWillUnmount=function(){this.t=[]},On.prototype.render=function(Ae,Qe){if(this.__b){if(this.__v.__k){var je=document.createElement("div"),st=this.__v.__k[0].__c;this.__v.__k[0]=Yt(this.__b,je,st.__O=st.__P)}this.__b=null}var on=Qe.__e&&Object(f.e)(f.b,null,Ae.fallback);return on&&(on.__h=null),[Object(f.e)(f.b,null,Qe.__e?null:Ae.children),on]};var Ce=function(Ae,Qe,je){if(++je[1]===je[0]&&Ae.o.delete(Qe),Ae.props.revealOrder&&(Ae.props.revealOrder[0]!=="t"||!Ae.o.size))for(je=Ae.u;je;){for(;je.length>3;)je.pop()();if(je[1]<je[0])break;Ae.u=je=je[2]}};function Ye(Ae){return this.getChildContext=function(){return Ae.context},Ae.children}function bt(Ae){var Qe=this,je=Ae.i;Qe.componentWillUnmount=function(){Object(f.j)(null,Qe.l),Qe.l=null,Qe.i=null},Qe.i&&Qe.i!==je&&Qe.componentWillUnmount(),Ae.__v?(Qe.l||(Qe.i=je,Qe.l={nodeType:1,parentNode:je,childNodes:[],appendChild:function(st){this.childNodes.push(st),Qe.i.appendChild(st)},insertBefore:function(st,on){this.childNodes.push(st),Qe.i.appendChild(st)},removeChild:function(st){this.childNodes.splice(this.childNodes.indexOf(st)>>>1,1),Qe.i.removeChild(st)}}),Object(f.j)(Object(f.e)(Ye,{context:Qe.context},Ae.__v),Qe.l)):Qe.l&&Qe.componentWillUnmount()}(Se.prototype=new f.a).__e=function(Ae){var Qe=this,je=Be(Qe.__v),st=Qe.o.get(Ae);return st[0]++,function(on){var Jt=function(){Qe.props.revealOrder?(st.push(on),Ce(Qe,Ae,st)):on()};je?je(Jt):Jt()}},Se.prototype.render=function(Ae){this.u=null,this.o=new Map;var Qe=Object(f.k)(Ae.children);Ae.revealOrder&&Ae.revealOrder[0]==="b"&&Qe.reverse();for(var je=Qe.length;je--;)this.o.set(Qe[je],this.u=[1,0,this.u]);return Ae.children},Se.prototype.componentDidUpdate=Se.prototype.componentDidMount=function(){var Ae=this;this.o.forEach(function(Qe,je){Ce(Ae,je,Qe)})};var vt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Wt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Qt=typeof document<"u",Gt=function(Ae){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Ae)};f.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Ae){Object.defineProperty(f.a.prototype,Ae,{configurable:!0,get:function(){return this["UNSAFE_"+Ae]},set:function(Qe){Object.defineProperty(this,Ae,{configurable:!0,writable:!0,value:Qe})}})});var Kt=f.i.event;function rt(){}function cn(){return this.cancelBubble}function We(){return this.defaultPrevented}f.i.event=function(Ae){return Kt&&(Ae=Kt(Ae)),Ae.persist=rt,Ae.isPropagationStopped=cn,Ae.isDefaultPrevented=We,Ae.nativeEvent=Ae};var dn,er={configurable:!0,get:function(){return this.class}},ae=f.i.vnode;f.i.vnode=function(Ae){var Qe=Ae.type,je=Ae.props,st=je;if(typeof Qe=="string"){var on=Qe.indexOf("-")===-1;for(var Jt in st={},je){var Rn=je[Jt];Qt&&Jt==="children"&&Qe==="noscript"||Jt==="value"&&"defaultValue"in je&&Rn==null||(Jt==="defaultValue"&&"value"in je&&je.value==null?Jt="value":Jt==="download"&&Rn===!0?Rn="":/ondoubleclick/i.test(Jt)?Jt="ondblclick":/^onchange(textarea|input)/i.test(Jt+Qe)&&!Gt(je.type)?Jt="oninput":/^onfocus$/i.test(Jt)?Jt="onfocusin":/^onblur$/i.test(Jt)?Jt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Jt)?Jt=Jt.toLowerCase():on&&Wt.test(Jt)?Jt=Jt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Rn===null&&(Rn=void 0),st[Jt]=Rn)}Qe=="select"&&st.multiple&&Array.isArray(st.value)&&(st.value=Object(f.k)(je.children).forEach(function(Or){Or.props.selected=st.value.indexOf(Or.props.value)!=-1})),Qe=="select"&&st.defaultValue!=null&&(st.value=Object(f.k)(je.children).forEach(function(Or){Or.props.selected=st.multiple?st.defaultValue.indexOf(Or.props.value)!=-1:st.defaultValue==Or.props.value})),Ae.props=st,je.class!=je.className&&(er.enumerable="className"in je,je.className!=null&&(st.class=je.className),Object.defineProperty(st,"className",er))}Ae.$$typeof=vt,ae&&ae(Ae)};var tr=f.i.__r;f.i.__r=function(Ae){tr&&tr(Ae),dn=Ae.__c};var Pr={ReactCurrentDispatcher:{current:{readContext:function(Ae){return dn.__n[Ae.__c].props.value}}}};function Xr(Ae){return!!Ae&&Ae.$$typeof===vt}var ao=function(Ae,Qe){return Ae(Qe)},Un=f.b,bo={useState:D,useReducer:j,useEffect:U,useLayoutEffect:F,useRef:function(Ae){return g=5,I(function(){return{current:Ae}},[])},useImperativeHandle:function(Ae,Qe,je){g=6,F(function(){typeof Ae=="function"?Ae(Qe()):Ae&&(Ae.current=Qe())},je==null?je:je.concat(Ae))},useMemo:I,useCallback:V,useContext:function(Ae){var Qe=c.context[Ae.__c],je=E(u++,9);return je.c=Ae,Qe?(je.__==null&&(je.__=!0,Qe.sub(c)),Qe.props.value):Ae.__},useDebugValue:function(Ae,Qe){f.i.useDebugValue&&f.i.useDebugValue(Qe?Qe(Ae):Ae)},version:"17.0.2",Children:ht,render:function(Ae,Qe,je){return Qe.__k==null&&(Qe.textContent=""),Object(f.j)(Ae,Qe),typeof je=="function"&&je(),Ae?Ae.__c:null},hydrate:function(Ae,Qe,je){return Object(f.h)(Ae,Qe),typeof je=="function"&&je(),Ae?Ae.__c:null},unmountComponentAtNode:function(Ae){return!!Ae.__k&&(Object(f.j)(null,Ae),!0)},createPortal:function(Ae,Qe){return Object(f.e)(bt,{__v:Ae,i:Qe})},createElement:f.e,createContext:f.d,createFactory:function(Ae){return f.e.bind(null,Ae)},cloneElement:function(Ae){return Xr(Ae)?f.c.apply(null,arguments):Ae},createRef:f.f,Fragment:f.b,isValidElement:Xr,findDOMNode:function(Ae){return Ae&&(Ae.base||Ae.nodeType===1&&Ae)||null},Component:f.a,PureComponent:Pe,memo:Ee,forwardRef:$e,flushSync:function(Ae,Qe){return Ae(Qe)},unstable_batchedUpdates:ao,StrictMode:Un,Suspense:On,SuspenseList:Se,lazy:function(Ae){var Qe,je,st;function on(Jt){if(Qe||(Qe=Ae()).then(function(Rn){je=Rn.default||Rn},function(Rn){st=Rn}),st)throw st;if(!je)throw Qe;return Object(f.e)(je,Jt)}return on.displayName="Lazy",on.__f=!0,on},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Pr};a.d=bo},function(n,a,r){var u=r(7),c=r(152),v=r(153),f=r(187),g=r(57),_=function(O){if(O&&O.forEach!==f)try{g(O,"forEach",f)}catch{O.forEach=f}};for(var b in c)c[b]&&_(u[b]&&u[b].prototype);_(v)},function(n,a,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,a,r){var u=r(16),c=r(18),v=r(40),f=r(101),g=r(143);u({target:"Object",stat:!0,forced:c(function(){f(1)}),sham:!g},{getPrototypeOf:function(_){return f(v(_))}})},function(n,a,r){var u=r(16),c=r(46),v=r(76),f=r(203),g=r(165),_=r(32),b=r(33),O=r(60),x=r(18),M=c("Reflect","construct"),A=Object.prototype,E=[].push,D=x(function(){function F(){}return!(M(function(){},[],F)instanceof F)}),j=!x(function(){M(function(){})}),U=D||j;u({target:"Reflect",stat:!0,forced:U,sham:U},{construct:function(F,I){g(F),_(I);var V=arguments.length<3?F:g(arguments[2]);if(j&&!D)return M(F,I,V);if(F==V){switch(I.length){case 0:return new F;case 1:return new F(I[0]);case 2:return new F(I[0],I[1]);case 3:return new F(I[0],I[1],I[2]);case 4:return new F(I[0],I[1],I[2],I[3])}var Y=[null];return v(E,Y,I),new(v(f,F,Y))}var K=V.prototype,H=O(b(K)?K:A),B=v(F,H,I);return b(B)?B:H}})},function(n,a){var r=Function.prototype,u=r.bind,c=r.call,v=u&&u.bind(c);n.exports=u?function(f){return f&&v(c,f)}:function(f){return f&&function(){return c.apply(f,arguments)}}},function(n,a,r){var u=r(7),c=r(50).f,v=r(57),f=r(42),g=r(110),_=r(134),b=r(95);n.exports=function(O,x){var M,A,E,D,j,U=O.target,F=O.global,I=O.stat;if(M=F?u:I?u[U]||g(U,{}):(u[U]||{}).prototype)for(A in x){if(D=x[A],E=O.noTargetGet?(j=c(M,A))&&j.value:M[A],!b(F?A:U+(I?".":"#")+A,O.forced)&&E!==void 0){if(typeof D==typeof E)continue;_(D,E)}(O.sham||E&&E.sham)&&v(D,"sham",!0),f(M,A,D,O)}}},function(n,a,r){var u=r(16),c=r(7),v=r(96),f=r(99),g=r(33),_=r(75),b=r(45),O=r(41),x=r(63),M=r(28),A=r(81),E=r(98),D=A("slice"),j=M("species"),U=c.Array,F=Math.max;u({target:"Array",proto:!0,forced:!D},{slice:function(I,V){var Y,K,H,B=O(this),z=b(B),X=_(I,z),ee=_(V===void 0?z:V,z);if(v(B)&&(Y=B.constructor,(f(Y)&&(Y===U||v(Y.prototype))||g(Y)&&(Y=Y[j])===null)&&(Y=void 0),Y===U||Y===void 0))return E(B,X,ee);for(K=new(Y===void 0?U:Y)(F(ee-X,0)),H=0;X<ee;X++,H++)X in B&&x(K,H,B[X]);return K.length=H,K}})},function(n,a){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,a,r){var u=r(16),c=r(103);u({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,a,r){var u=r(16),c=r(40),v=r(77);u({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(f){return v(c(f))}})},function(n,a,r){var u=r(36),c=r(73).EXISTS,v=r(15),f=r(38).f,g=Function.prototype,_=v(g.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=v(b.exec);u&&!c&&f(g,"name",{configurable:!0,get:function(){try{return O(b,_(this))[1]}catch{return""}}})},function(n,a,r){var u=r(16),c=r(18),v=r(41),f=r(50).f,g=r(36),_=c(function(){f(1)});u({target:"Object",stat:!0,forced:!g||_,sham:!g},{getOwnPropertyDescriptor:function(b,O){return f(v(b),O)}})},function(n,a,r){var u=r(16),c=r(188);u({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,a,r){var u=r(16),c=r(79).filter;u({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(16),c=r(36),v=r(135),f=r(41),g=r(50),_=r(63);u({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(b){for(var O,x,M=f(b),A=g.f,E=v(M),D={},j=0;E.length>j;)(x=A(M,O=E[j++]))!==void 0&&_(D,O,x);return D}})},,function(n,a,r){var u=r(16),c=r(7),v=r(18),f=r(96),g=r(33),_=r(40),b=r(45),O=r(63),x=r(115),M=r(81),A=r(28),E=r(70),D=A("isConcatSpreadable"),j=9007199254740991,U="Maximum allowed index exceeded",F=c.TypeError,I=E>=51||!v(function(){var K=[];return K[D]=!1,K.concat()[0]!==K}),V=M("concat"),Y=function(K){if(!g(K))return!1;var H=K[D];return H!==void 0?!!H:f(K)};u({target:"Array",proto:!0,forced:!I||!V},{concat:function(K){var H,B,z,X,ee,pe=_(this),ce=x(pe,0),Pe=0;for(H=-1,z=arguments.length;H<z;H++)if(Y(ee=H===-1?pe:arguments[H])){if(Pe+(X=b(ee))>j)throw F(U);for(B=0;B<X;B++,Pe++)B in ee&&O(ce,Pe,ee[B])}else{if(Pe>=j)throw F(U);O(ce,Pe++,ee)}return ce.length=Pe,ce}})},function(n,a,r){var u=r(7),c=r(89),v=r(35),f=r(90),g=r(108),_=r(132),b=c("wks"),O=u.Symbol,x=O&&O.for,M=_?O:O&&O.withoutSetter||f;n.exports=function(A){if(!v(b,A)||!g&&typeof b[A]!="string"){var E="Symbol."+A;g&&v(O,A)?b[A]=O[A]:b[A]=_&&x?x(E):M(E)}return b[A]}},function(n,a,r){var u=r(16),c=r(202);u({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,a){n.exports=function(r){return typeof r=="function"}},function(n,a,r){var u=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=u.a||c||Function("return this")();a.a=v},function(n,a,r){var u=r(7),c=r(33),v=u.String,f=u.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not an object")}},function(n,a,r){var u=r(30);n.exports=function(c){return typeof c=="object"?c!==null:u(c)}},function(n,a){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,a,r){var u=r(15),c=r(40),v=u({}.hasOwnProperty);n.exports=Object.hasOwn||function(f,g){return v(c(f),g)}},function(n,a,r){var u=r(18);n.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,a,r){var u=r(16),c=r(79).map;u({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(7),c=r(36),v=r(133),f=r(32),g=r(86),_=u.TypeError,b=Object.defineProperty;a.f=c?b:function(O,x,M){if(f(O),x=g(x),f(M),v)try{return b(O,x,M)}catch{}if("get"in M||"set"in M)throw _("Accessors not supported");return"value"in M&&(O[x]=M.value),O}},function(n,a,r){var u=r(7),c=r(97),v=u.String;n.exports=function(f){if(c(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(f)}},function(n,a,r){var u=r(7),c=r(44),v=u.Object;n.exports=function(f){return v(c(f))}},function(n,a,r){var u=r(85),c=r(44);n.exports=function(v){return u(c(v))}},function(n,a,r){var u=r(7),c=r(30),v=r(35),f=r(57),g=r(110),_=r(92),b=r(58),O=r(73).CONFIGURABLE,x=b.get,M=b.enforce,A=String(String).split("String");(n.exports=function(E,D,j,U){var F,I=!!U&&!!U.unsafe,V=!!U&&!!U.enumerable,Y=!!U&&!!U.noTargetGet,K=U&&U.name!==void 0?U.name:D;c(j)&&(String(K).slice(0,7)==="Symbol("&&(K="["+String(K).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(j,"name")||O&&j.name!==K)&&f(j,"name",K),(F=M(j)).source||(F.source=A.join(typeof K=="string"?K:""))),E!==u?(I?!Y&&E[D]&&(V=!0):delete E[D],V?E[D]=j:f(E,D,j)):V?E[D]=j:g(D,j)})(Function.prototype,"toString",function(){return c(this)&&x(this).source||_(this)})},function(n,a,r){(function(u){r.d(a,"d",function(){return f}),r.d(a,"c",function(){return g}),r.d(a,"b",function(){return _}),r.d(a,"a",function(){return O});var c=r(10),v=function(x,M){var A=typeof Symbol=="function"&&x[Symbol.iterator];if(!A)return x;var E,D,j=A.call(x),U=[];try{for(;(M===void 0||M-- >0)&&!(E=j.next()).done;)U.push(E.value)}catch(F){D={error:F}}finally{try{E&&!E.done&&(A=j.return)&&A.call(j)}finally{if(D)throw D.error}}return U};function f(){var x=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){x(function(M){return M+1})},[])}function g(x){if(!x||typeof x!="object")return!1;var M=Object.getPrototypeOf(x);return!M||M===Object.prototype}function _(x){return typeof Symbol=="function"?Symbol.for(x):"__$mobx-react "+x+"__"}var b={};function O(){return typeof window<"u"?window:u!==void 0?u:typeof self<"u"?self:b}}).call(this,r(68))},function(n,a,r){var u=r(7).TypeError;n.exports=function(c){if(c==null)throw u("Can't call method on "+c);return c}},function(n,a,r){var u=r(94);n.exports=function(c){return u(c.length)}},function(n,a,r){var u=r(7),c=r(30),v=function(f){return c(f)?f:void 0};n.exports=function(f,g){return arguments.length<2?v(u[f]):u[f]&&u[f][g]}},function(n,a,r){var u=r(16),c=r(34),v=r(33),f=r(32),g=r(204),_=r(50),b=r(101);u({target:"Reflect",stat:!0},{get:function O(x,M){var A,E,D=arguments.length<3?x:arguments[2];return f(x)===D?x[M]:(A=_.f(x,M))?g(A)?A.value:A.get===void 0?void 0:c(A.get,D):v(E=b(x))?O(E,M,D):void 0}})},function(n,a,r){(function(u){var c=r(31),v=r(171),f=t&&!t.nodeType&&t,g=f&&typeof u=="object"&&u&&!u.nodeType&&u,_=g&&g.exports===f?c.a.Buffer:void 0,b=(_?_.isBuffer:void 0)||v.a;a.a=b}).call(this,r(122)(n))},function(n,a,r){(function(u){var c=r(106),v=t&&!t.nodeType&&t,f=v&&typeof u=="object"&&u&&!u.nodeType&&u,g=f&&f.exports===v&&c.a.process,_=function(){try{var b=f&&f.require&&f.require("util").types;return b||g&&g.binding&&g.binding("util")}catch{}}();a.a=_}).call(this,r(122)(n))},function(n,a,r){var u=r(36),c=r(34),v=r(84),f=r(69),g=r(41),_=r(86),b=r(35),O=r(133),x=Object.getOwnPropertyDescriptor;a.f=u?x:function(M,A){if(M=g(M),A=_(A),O)try{return x(M,A)}catch{}if(b(M,A))return f(!c(v.f,M,A),M[A])}},function(n,a,r){var u=r(15),c=u({}.toString),v=u("".slice);n.exports=function(f){return v(c(f),8,-1)}},function(n,a,r){r(182)("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,a,r){var u=r(16),c=r(220).entries;u({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,a,r){var u=r(15);n.exports=u({}.isPrototypeOf)},function(n,a,r){var u=r(46);n.exports=u("navigator","userAgent")||""},function(n,a,r){var u=r(7),c=r(30),v=r(88),f=u.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not a function")}},function(n,a,r){var u=r(36),c=r(38),v=r(69);n.exports=u?function(f,g,_){return c.f(f,g,v(1,_))}:function(f,g,_){return f[g]=_,f}},function(n,a,r){var u,c,v,f=r(175),g=r(7),_=r(15),b=r(33),O=r(57),x=r(35),M=r(109),A=r(93),E=r(72),D="Object already initialized",j=g.TypeError,U=g.WeakMap;if(f||M.state){var F=M.state||(M.state=new U),I=_(F.get),V=_(F.has),Y=_(F.set);u=function(H,B){if(V(F,H))throw new j(D);return B.facade=H,Y(F,H,B),B},c=function(H){return I(F,H)||{}},v=function(H){return V(F,H)}}else{var K=A("state");E[K]=!0,u=function(H,B){if(x(H,K))throw new j(D);return B.facade=H,O(H,K,B),B},c=function(H){return x(H,K)?H[K]:{}},v=function(H){return x(H,K)}}n.exports={set:u,get:c,has:v,enforce:function(H){return v(H)?c(H):u(H,{})},getterFor:function(H){return function(B){var z;if(!b(B)||(z=c(B)).type!==H)throw j("Incompatible receiver, "+H+" required");return z}}}},function(n,a){var r=Math.ceil,u=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?u:r)(v)}},function(n,a,r){var u,c=r(32),v=r(176),f=r(111),g=r(72),_=r(138),b=r(91),O=r(93),x=O("IE_PROTO"),M=function(){},A=function(j){return"<script>"+j+"<\/script>"},E=function(j){j.write(A("")),j.close();var U=j.parentWindow.Object;return j=null,U},D=function(){try{u=new ActiveXObject("htmlfile")}catch{}var j,U;D=typeof document<"u"?document.domain&&u?E(u):((U=b("iframe")).style.display="none",_.appendChild(U),U.src="javascript:",(j=U.contentWindow.document).open(),j.write(A("document.F=Object")),j.close(),j.F):E(u);for(var F=f.length;F--;)delete D.prototype[f[F]];return D()};g[x]=!0,n.exports=Object.create||function(j,U){var F;return j!==null?(M.prototype=c(j),F=new M,M.prototype=null,F[x]=j):F=D(),U===void 0?F:v(F,U)}},function(n,a,r){var u=r(36),c=r(7),v=r(15),f=r(95),g=r(42),_=r(35),b=r(148),O=r(54),x=r(87),M=r(131),A=r(18),E=r(74).f,D=r(50).f,j=r(38).f,U=r(160),F=r(161).trim,I="Number",V=c.Number,Y=V.prototype,K=c.TypeError,H=v("".slice),B=v("".charCodeAt),z=function(Ee){var le=M(Ee,"number");return typeof le=="bigint"?le:X(le)},X=function(Ee){var le,ie,$e,Ge,ht,Fe,Nt,Yt,kt=M(Ee,"number");if(x(kt))throw K("Cannot convert a Symbol value to a number");if(typeof kt=="string"&&kt.length>2){if(kt=F(kt),(le=B(kt,0))===43||le===45){if((ie=B(kt,2))===88||ie===120)return NaN}else if(le===48){switch(B(kt,1)){case 66:case 98:$e=2,Ge=49;break;case 79:case 111:$e=8,Ge=55;break;default:return+kt}for(Fe=(ht=H(kt,2)).length,Nt=0;Nt<Fe;Nt++)if((Yt=B(ht,Nt))<48||Yt>Ge)return NaN;return parseInt(ht,$e)}}return+kt};if(f(I,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var ee,pe=function(Ee){var le=arguments.length<1?0:V(z(Ee)),ie=this;return O(Y,ie)&&A(function(){U(ie)})?b(Object(le),ie,pe):le},ce=u?E(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Pe=0;ce.length>Pe;Pe++)_(V,ee=ce[Pe])&&!_(pe,ee)&&j(pe,ee,D(V,ee));pe.prototype=Y,Y.constructor=pe,g(c,I,pe)}},function(n,a,r){var u=r(56);n.exports=function(c,v){var f=c[v];return f==null?void 0:u(f)}},function(n,a,r){var u=r(86),c=r(38),v=r(69);n.exports=function(f,g,_){var b=u(g);b in f?c.f(f,b,v(0,_)):f[b]=_}},function(n,a,r){var u=r(15),c=r(56),v=u(u.bind);n.exports=function(f,g){return c(f),g===void 0?f:v?v(f,g):function(){return f.apply(g,arguments)}}},function(n,a,r){var u=r(16),c=r(15),v=r(85),f=r(41),g=r(121),_=c([].join),b=v!=Object,O=g("join",",");u({target:"Array",proto:!0,forced:b||!O},{join:function(x){return _(f(this),x===void 0?",":x)}})},function(n,a,r){var u=r(15),c=r(73).PROPER,v=r(42),f=r(32),g=r(54),_=r(39),b=r(18),O=r(154),x="toString",M=RegExp.prototype,A=M.toString,E=u(O),D=b(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),j=c&&A.name!=x;(D||j)&&v(RegExp.prototype,x,function(){var U=f(this),F=_(U.source),I=U.flags;return"/"+F+"/"+_(I===void 0&&g(M,U)&&!("flags"in M)?E(U):I)},{unsafe:!0})},function(n,a,r){var u=r(16),c=r(217),v=r(100);u({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,a){n.exports=function(r,u){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:u}}},function(n,a,r){var u,c,v=r(7),f=r(55),g=v.process,_=v.Deno,b=g&&g.versions||_&&_.version,O=b&&b.v8;O&&(c=(u=O.split("."))[0]>0&&u[0]<4?1:+(u[0]+u[1])),!c&&f&&(!(u=f.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=f.match(/Chrome\/(\d+)/))&&(c=+u[1]),n.exports=c},function(n,a){n.exports=!1},function(n,a){n.exports={}},function(n,a,r){var u=r(36),c=r(35),v=Function.prototype,f=u&&Object.getOwnPropertyDescriptor,g=c(v,"name"),_=g&&(function(){}).name==="something",b=g&&(!u||u&&f(v,"name").configurable);n.exports={EXISTS:g,PROPER:_,CONFIGURABLE:b}},function(n,a,r){var u=r(136),c=r(111).concat("length","prototype");a.f=Object.getOwnPropertyNames||function(v){return u(v,c)}},function(n,a,r){var u=r(59),c=Math.max,v=Math.min;n.exports=function(f,g){var _=u(f);return _<0?c(_+g,0):v(_,g)}},function(n,a){var r=Function.prototype,u=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(u):function(){return v.apply(u,arguments)})},function(n,a,r){var u=r(136),c=r(111);n.exports=Object.keys||function(v){return u(v,c)}},function(n,a,r){var u=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(f,g,_){f&&!c(f=_?f:f.prototype,v)&&u(f,v,{configurable:!0,value:g})}},function(n,a,r){var u=r(64),c=r(15),v=r(85),f=r(40),g=r(45),_=r(115),b=c([].push),O=function(x){var M=x==1,A=x==2,E=x==3,D=x==4,j=x==6,U=x==7,F=x==5||j;return function(I,V,Y,K){for(var H,B,z=f(I),X=v(z),ee=u(V,Y),pe=g(X),ce=0,Pe=K||_,Ee=M?Pe(I,pe):A||U?Pe(I,0):void 0;pe>ce;ce++)if((F||ce in X)&&(B=ee(H=X[ce],ce,z),x))if(M)Ee[ce]=B;else if(B)switch(x){case 3:return!0;case 5:return H;case 6:return ce;case 2:b(Ee,H)}else switch(x){case 4:return!1;case 7:b(Ee,H)}return j?-1:E||D?D:Ee}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,a){n.exports={}},function(n,a,r){var u=r(18),c=r(28),v=r(70),f=c("species");n.exports=function(g){return v>=51||!u(function(){var _=[];return(_.constructor={})[f]=function(){return{foo:1}},_[g](Boolean).foo!==1})}},function(n,a,r){var u=r(76),c=r(34),v=r(15),f=r(123),g=r(159),_=r(32),b=r(44),O=r(164),x=r(124),M=r(94),A=r(39),E=r(62),D=r(114),j=r(125),U=r(103),F=r(155),I=r(18),V=F.UNSUPPORTED_Y,Y=4294967295,K=Math.min,H=[].push,B=v(/./.exec),z=v(H),X=v("".slice),ee=!I(function(){var pe=/(?:)/,ce=pe.exec;pe.exec=function(){return ce.apply(this,arguments)};var Pe="ab".split(pe);return Pe.length!==2||Pe[0]!=="a"||Pe[1]!=="b"});f("split",function(pe,ce,Pe){var Ee;return Ee="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(le,ie){var $e=A(b(this)),Ge=ie===void 0?Y:ie>>>0;if(Ge===0)return[];if(le===void 0)return[$e];if(!g(le))return c(ce,$e,le,Ge);for(var ht,Fe,Nt,Yt=[],kt=(le.ignoreCase?"i":"")+(le.multiline?"m":"")+(le.unicode?"u":"")+(le.sticky?"y":""),On=0,Be=new RegExp(le.source,kt+"g");(ht=c(U,Be,$e))&&!((Fe=Be.lastIndex)>On&&(z(Yt,X($e,On,ht.index)),ht.length>1&&ht.index<$e.length&&u(H,Yt,D(ht,1)),Nt=ht[0].length,On=Fe,Yt.length>=Ge));)Be.lastIndex===ht.index&&Be.lastIndex++;return On===$e.length?!Nt&&B(Be,"")||z(Yt,""):z(Yt,X($e,On)),Yt.length>Ge?D(Yt,0,Ge):Yt}:"0".split(void 0,0).length?function(le,ie){return le===void 0&&ie===0?[]:c(ce,this,le,ie)}:ce,[function(le,ie){var $e=b(this),Ge=le==null?void 0:E(le,pe);return Ge?c(Ge,le,$e,ie):c(Ee,A($e),le,ie)},function(le,ie){var $e=_(this),Ge=A(le),ht=Pe(Ee,$e,Ge,ie,Ee!==ce);if(ht.done)return ht.value;var Fe=O($e,RegExp),Nt=$e.unicode,Yt=($e.ignoreCase?"i":"")+($e.multiline?"m":"")+($e.unicode?"u":"")+(V?"g":"y"),kt=new Fe(V?"^(?:"+$e.source+")":$e,Yt),On=ie===void 0?Y:ie>>>0;if(On===0)return[];if(Ge.length===0)return j(kt,Ge)===null?[Ge]:[];for(var Be=0,Se=0,Ce=[];Se<Ge.length;){kt.lastIndex=V?0:Se;var Ye,bt=j(kt,V?X(Ge,Se):Ge);if(bt===null||(Ye=K(M(kt.lastIndex+(V?Se:0)),Ge.length))===Be)Se=x(Ge,Se,Nt);else{if(z(Ce,X(Ge,Be,Se)),Ce.length===On)return Ce;for(var vt=1;vt<=bt.length-1;vt++)if(z(Ce,bt[vt]),Ce.length===On)return Ce;Se=Be=Ye}}return z(Ce,X(Ge,Be)),Ce}]},!ee,V)},function(n,a,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,a,r){var u={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!u.call({1:2},1);a.f=v?function(f){var g=c(this,f);return!!g&&g.enumerable}:u},function(n,a,r){var u=r(7),c=r(15),v=r(18),f=r(51),g=u.Object,_=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(b){return f(b)=="String"?_(b,""):g(b)}:g},function(n,a,r){var u=r(131),c=r(87);n.exports=function(v){var f=u(v,"string");return c(f)?f:f+""}},function(n,a,r){var u=r(7),c=r(46),v=r(30),f=r(54),g=r(132),_=u.Object;n.exports=g?function(b){return typeof b=="symbol"}:function(b){var O=c("Symbol");return v(O)&&f(O.prototype,_(b))}},function(n,a,r){var u=r(7).String;n.exports=function(c){try{return u(c)}catch{return"Object"}}},function(n,a,r){var u=r(71),c=r(109);(n.exports=function(v,f){return c[v]||(c[v]=f!==void 0?f:{})})("versions",[]).push({version:"3.19.3",mode:u?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,a,r){var u=r(15),c=0,v=Math.random(),f=u(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+f(++c+v,36)}},function(n,a,r){var u=r(7),c=r(33),v=u.document,f=c(v)&&c(v.createElement);n.exports=function(g){return f?v.createElement(g):{}}},function(n,a,r){var u=r(15),c=r(30),v=r(109),f=u(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return f(g)}),n.exports=v.inspectSource},function(n,a,r){var u=r(89),c=r(90),v=u("keys");n.exports=function(f){return v[f]||(v[f]=c(f))}},function(n,a,r){var u=r(59),c=Math.min;n.exports=function(v){return v>0?c(u(v),9007199254740991):0}},function(n,a,r){var u=r(18),c=r(30),v=/#|\.prototype\./,f=function(x,M){var A=_[g(x)];return A==O||A!=b&&(c(M)?u(M):!!M)},g=f.normalize=function(x){return String(x).replace(v,".").toLowerCase()},_=f.data={},b=f.NATIVE="N",O=f.POLYFILL="P";n.exports=f},function(n,a,r){var u=r(51);n.exports=Array.isArray||function(c){return u(c)=="Array"}},function(n,a,r){var u=r(7),c=r(113),v=r(30),f=r(51),g=r(28)("toStringTag"),_=u.Object,b=f(function(){return arguments}())=="Arguments";n.exports=c?f:function(O){var x,M,A;return O===void 0?"Undefined":O===null?"Null":typeof(M=function(E,D){try{return E[D]}catch{}}(x=_(O),g))=="string"?M:b?f(x):(A=f(x))=="Object"&&v(x.callee)?"Arguments":A}},function(n,a,r){var u=r(15);n.exports=u([].slice)},function(n,a,r){var u=r(15),c=r(18),v=r(30),f=r(97),g=r(46),_=r(92),b=function(){},O=[],x=g("Reflect","construct"),M=/^\s*(?:class|function)\b/,A=u(M.exec),E=!M.exec(b),D=function(j){if(!v(j))return!1;try{return x(b,O,j),!0}catch{return!1}};n.exports=!x||c(function(){var j;return D(D.call)||!D(Object)||!D(function(){j=!0})||j})?function(j){if(!v(j))return!1;switch(f(j)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return E||!!A(M,_(j))}:D},function(n,a,r){var u=r(28),c=r(60),v=r(38),f=u("unscopables"),g=Array.prototype;g[f]==null&&v.f(g,f,{configurable:!0,value:c(null)}),n.exports=function(_){g[f][_]=!0}},function(n,a,r){var u=r(7),c=r(35),v=r(30),f=r(40),g=r(93),_=r(143),b=g("IE_PROTO"),O=u.Object,x=O.prototype;n.exports=_?O.getPrototypeOf:function(M){var A=f(M);if(c(A,b))return A[b];var E=A.constructor;return v(E)&&A instanceof E?E.prototype:A instanceof O?x:null}},function(n,a,r){var u=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,g=!1,_={};try{(f=u(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),g=_ instanceof Array}catch{}return function(b,O){return c(b),v(O),g?f(b,O):b.__proto__=O,b}}():void 0)},function(n,a,r){var u,c,v=r(34),f=r(15),g=r(39),_=r(154),b=r(155),O=r(89),x=r(60),M=r(58).get,A=r(190),E=r(191),D=O("native-string-replace",String.prototype.replace),j=RegExp.prototype.exec,U=j,F=f("".charAt),I=f("".indexOf),V=f("".replace),Y=f("".slice),K=(c=/b*/g,v(j,u=/a/,"a"),v(j,c,"a"),u.lastIndex!==0||c.lastIndex!==0),H=b.BROKEN_CARET,B=/()??/.exec("")[1]!==void 0;(K||B||H||A||E)&&(U=function(z){var X,ee,pe,ce,Pe,Ee,le,ie=this,$e=M(ie),Ge=g(z),ht=$e.raw;if(ht)return ht.lastIndex=ie.lastIndex,X=v(U,ht,Ge),ie.lastIndex=ht.lastIndex,X;var Fe=$e.groups,Nt=H&&ie.sticky,Yt=v(_,ie),kt=ie.source,On=0,Be=Ge;if(Nt&&(Yt=V(Yt,"y",""),I(Yt,"g")===-1&&(Yt+="g"),Be=Y(Ge,ie.lastIndex),ie.lastIndex>0&&(!ie.multiline||ie.multiline&&F(Ge,ie.lastIndex-1)!==`
`)&&(kt="(?: "+kt+")",Be=" "+Be,On++),ee=new RegExp("^(?:"+kt+")",Yt)),B&&(ee=new RegExp("^"+kt+"$(?!\\s)",Yt)),K&&(pe=ie.lastIndex),ce=v(j,Nt?ee:ie,Be),Nt?ce?(ce.input=Y(ce.input,On),ce[0]=Y(ce[0],On),ce.index=ie.lastIndex,ie.lastIndex+=ce[0].length):ie.lastIndex=0:K&&ce&&(ie.lastIndex=ie.global?ce.index+ce[0].length:pe),B&&ce&&ce.length>1&&v(D,ce[0],ee,function(){for(Pe=1;Pe<arguments.length-2;Pe++)arguments[Pe]===void 0&&(ce[Pe]=void 0)}),ce&&Fe)for(ce.groups=Ee=x(null),Pe=0;Pe<Fe.length;Pe++)Ee[(le=Fe[Pe])[0]]=ce[le[1]];return ce}),n.exports=U},function(n,a,r){var u=r(16),c=r(7),v=r(75),f=r(59),g=r(45),_=r(40),b=r(115),O=r(63),x=r(81)("splice"),M=c.TypeError,A=Math.max,E=Math.min,D=9007199254740991,j="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!x},{splice:function(U,F){var I,V,Y,K,H,B,z=_(this),X=g(z),ee=v(U,X),pe=arguments.length;if(pe===0?I=V=0:pe===1?(I=0,V=X-ee):(I=pe-2,V=E(A(f(F),0),X-ee)),X+I-V>D)throw M(j);for(Y=b(z,V),K=0;K<V;K++)(H=ee+K)in z&&O(Y,K,z[H]);if(Y.length=V,I<V){for(K=ee;K<X-V;K++)B=K+I,(H=K+V)in z?z[B]=z[H]:delete z[B];for(K=X;K>X-V+I;K--)delete z[K-1]}else if(I>V)for(K=X-V;K>ee;K--)B=K+I-1,(H=K+V-1)in z?z[B]=z[H]:delete z[B];for(K=0;K<I;K++)z[K+ee]=arguments[K+2];return z.length=X-V+I,Y}})},function(n,a,r){var u=r(16),c=r(205);u({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,a,r){(function(u){var c=typeof u=="object"&&u&&u.Object===Object&&u;a.a=c}).call(this,r(68))},function(n,a,r){(function(u){var c=r(31),v=t&&!t.nodeType&&t,f=v&&typeof u=="object"&&u&&!u.nodeType&&u,g=f&&f.exports===v?c.a.Buffer:void 0,_=g?g.allocUnsafe:void 0;a.a=function(b,O){if(O)return b.slice();var x=b.length,M=_?_(x):new b.constructor(x);return b.copy(M),M}}).call(this,r(122)(n))},function(n,a,r){var u=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&u&&u<41})},function(n,a,r){var u=r(7),c=r(110),v="__core-js_shared__",f=u[v]||c(v,{});n.exports=f},function(n,a,r){var u=r(7),c=Object.defineProperty;n.exports=function(v,f){try{c(u,v,{value:f,configurable:!0,writable:!0})}catch{u[v]=f}return f}},function(n,a){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,a){a.f=Object.getOwnPropertySymbols},function(n,a,r){var u={};u[r(28)("toStringTag")]="z",n.exports=String(u)==="[object z]"},function(n,a,r){var u=r(7),c=r(75),v=r(45),f=r(63),g=u.Array,_=Math.max;n.exports=function(b,O,x){for(var M=v(b),A=c(O,M),E=c(x===void 0?M:x,M),D=g(_(E-A,0)),j=0;A<E;A++,j++)f(D,j,b[A]);return D.length=j,D}},function(n,a,r){var u=r(178);n.exports=function(c,v){return new(u(c))(v===0?0:v)}},function(n,a,r){var u=r(16),c=r(34),v=r(71),f=r(73),g=r(30),_=r(180),b=r(101),O=r(102),x=r(78),M=r(57),A=r(42),E=r(28),D=r(80),j=r(142),U=f.PROPER,F=f.CONFIGURABLE,I=j.IteratorPrototype,V=j.BUGGY_SAFARI_ITERATORS,Y=E("iterator"),K="keys",H="values",B="entries",z=function(){return this};n.exports=function(X,ee,pe,ce,Pe,Ee,le){_(pe,ee,ce);var ie,$e,Ge,ht=function(Se){if(Se===Pe&&On)return On;if(!V&&Se in Yt)return Yt[Se];switch(Se){case K:case H:case B:return function(){return new pe(this,Se)}}return function(){return new pe(this)}},Fe=ee+" Iterator",Nt=!1,Yt=X.prototype,kt=Yt[Y]||Yt["@@iterator"]||Pe&&Yt[Pe],On=!V&&kt||ht(Pe),Be=ee=="Array"&&Yt.entries||kt;if(Be&&(ie=b(Be.call(new X)))!==Object.prototype&&ie.next&&(v||b(ie)===I||(O?O(ie,I):g(ie[Y])||A(ie,Y,z)),x(ie,Fe,!0,!0),v&&(D[Fe]=z)),U&&Pe==H&&kt&&kt.name!==H&&(!v&&F?M(Yt,"name",H):(Nt=!0,On=function(){return c(kt,this)})),Pe)if($e={values:ht(H),keys:Ee?On:ht(K),entries:ht(B)},le)for(Ge in $e)(V||Nt||!(Ge in Yt))&&A(Yt,Ge,$e[Ge]);else u({target:ee,proto:!0,forced:V||Nt},$e);return v&&!le||Yt[Y]===On||A(Yt,Y,On,{name:Pe}),D[ee]=On,$e}},function(n,a,r){var u=r(7),c=r(64),v=r(34),f=r(32),g=r(88),_=r(145),b=r(45),O=r(54),x=r(146),M=r(118),A=r(147),E=u.TypeError,D=function(U,F){this.stopped=U,this.result=F},j=D.prototype;n.exports=function(U,F,I){var V,Y,K,H,B,z,X,ee=I&&I.that,pe=!(!I||!I.AS_ENTRIES),ce=!(!I||!I.IS_ITERATOR),Pe=!(!I||!I.INTERRUPTED),Ee=c(F,ee),le=function($e){return V&&A(V,"normal",$e),new D(!0,$e)},ie=function($e){return pe?(f($e),Pe?Ee($e[0],$e[1],le):Ee($e[0],$e[1])):Pe?Ee($e,le):Ee($e)};if(ce)V=U;else{if(!(Y=M(U)))throw E(g(U)+" is not iterable");if(_(Y)){for(K=0,H=b(U);H>K;K++)if((B=ie(U[K]))&&O(j,B))return B;return new D(!1)}V=x(U,Y)}for(z=V.next;!(X=v(z,V)).done;){try{B=ie(X.value)}catch($e){A(V,"throw",$e)}if(typeof B=="object"&&B&&O(j,B))return B}return new D(!1)}},function(n,a,r){var u=r(97),c=r(62),v=r(80),f=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,f)||c(g,"@@iterator")||v[u(g)]}},function(n,a,r){var u=r(7),c=r(54),v=u.TypeError;n.exports=function(f,g){if(c(g,f))return f;throw v("Incorrect invocation")}},function(n,a,r){var u=r(28)("iterator"),c=!1;try{var v=0,f={next:function(){return{done:!!v++}},return:function(){c=!0}};f[u]=function(){return this},Array.from(f,function(){throw 2})}catch{}n.exports=function(g,_){if(!_&&!c)return!1;var b=!1;try{var O={};O[u]=function(){return{next:function(){return{done:b=!0}}}},g(O)}catch{}return b}},function(n,a,r){var u=r(18);n.exports=function(c,v){var f=[][c];return!!f&&u(function(){f.call(null,v||function(){throw 1},1)})}},function(n,a){n.exports=function(r){if(!r.webpackPolyfill){var u=Object.create(r);u.children||(u.children=[]),Object.defineProperty(u,"loaded",{enumerable:!0,get:function(){return u.l}}),Object.defineProperty(u,"id",{enumerable:!0,get:function(){return u.i}}),Object.defineProperty(u,"exports",{enumerable:!0}),u.webpackPolyfill=1}return u}},function(n,a,r){r(19);var u=r(15),c=r(42),v=r(103),f=r(18),g=r(28),_=r(57),b=g("species"),O=RegExp.prototype;n.exports=function(x,M,A,E){var D=g(x),j=!f(function(){var V={};return V[D]=function(){return 7},""[x](V)!=7}),U=j&&!f(function(){var V=!1,Y=/a/;return x==="split"&&((Y={}).constructor={},Y.constructor[b]=function(){return Y},Y.flags="",Y[D]=/./[D]),Y.exec=function(){return V=!0,null},Y[D](""),!V});if(!j||!U||A){var F=u(/./[D]),I=M(D,""[x],function(V,Y,K,H,B){var z=u(V),X=Y.exec;return X===v||X===O.exec?j&&!B?{done:!0,value:F(Y,K,H)}:{done:!0,value:z(K,Y,H)}:{done:!1}});c(String.prototype,x,I[0]),c(O,D,I[1])}E&&_(O[D],"sham",!0)}},function(n,a,r){var u=r(151).charAt;n.exports=function(c,v,f){return v+(f?u(c,v).length:1)}},function(n,a,r){var u=r(7),c=r(34),v=r(32),f=r(30),g=r(51),_=r(103),b=u.TypeError;n.exports=function(O,x){var M=O.exec;if(f(M)){var A=c(M,O,x);return A!==null&&v(A),A}if(g(O)==="RegExp")return c(_,O,x);throw b("RegExp#exec called on incompatible receiver")}},function(n,a,r){var u=r(76),c=r(34),v=r(15),f=r(123),g=r(18),_=r(32),b=r(30),O=r(59),x=r(94),M=r(39),A=r(44),E=r(124),D=r(62),j=r(201),U=r(125),F=r(28)("replace"),I=Math.max,V=Math.min,Y=v([].concat),K=v([].push),H=v("".indexOf),B=v("".slice),z="a".replace(/./,"$0")==="$0",X=!!/./[F]&&/./[F]("a","$0")==="";f("replace",function(ee,pe,ce){var Pe=X?"$":"$0";return[function(Ee,le){var ie=A(this),$e=Ee==null?void 0:D(Ee,F);return $e?c($e,Ee,ie,le):c(pe,M(ie),Ee,le)},function(Ee,le){var ie=_(this),$e=M(Ee);if(typeof le=="string"&&H(le,Pe)===-1&&H(le,"$<")===-1){var Ge=ce(pe,ie,$e,le);if(Ge.done)return Ge.value}var ht=b(le);ht||(le=M(le));var Fe=ie.global;if(Fe){var Nt=ie.unicode;ie.lastIndex=0}for(var Yt=[];;){var kt=U(ie,$e);if(kt===null||(K(Yt,kt),!Fe))break;M(kt[0])===""&&(ie.lastIndex=E($e,x(ie.lastIndex),Nt))}for(var On,Be="",Se=0,Ce=0;Ce<Yt.length;Ce++){for(var Ye=M((kt=Yt[Ce])[0]),bt=I(V(O(kt.index),$e.length),0),vt=[],Wt=1;Wt<kt.length;Wt++)K(vt,(On=kt[Wt])===void 0?On:String(On));var Qt=kt.groups;if(ht){var Gt=Y([Ye],vt,bt,$e);Qt!==void 0&&K(Gt,Qt);var Kt=M(u(le,void 0,Gt))}else Kt=j(Ye,$e,bt,vt,Qt,le);bt>=Se&&(Be+=B($e,Se,bt)+Kt,Se=bt+Ye.length)}return Be+B($e,Se)}]},!!g(function(){var ee=/./;return ee.exec=function(){var pe=[];return pe.groups={a:"7"},pe},"".replace(ee,"$<a>")!=="7"})||!z||X)},function(n,a,r){var u=r(16),c=Math.hypot,v=Math.abs,f=Math.sqrt;u({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,_){for(var b,O,x=0,M=0,A=arguments.length,E=0;M<A;)E<(b=v(arguments[M++]))?(x=x*(O=E/b)*O+1,E=b):x+=b>0?(O=b/E)*O:b;return E===1/0?1/0:E*f(x)}})},function(n,a,r){var u=r(51),c=r(7);n.exports=u(c.process)=="process"},function(n,a,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,a,r){(function(u,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var f,g="Expected a function",_="__lodash_hash_undefined__",b="__lodash_placeholder__",O=16,x=32,M=64,A=128,E=256,D=1/0,j=9007199254740991,U=NaN,F=4294967295,I=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",x],["partialRight",M],["rearg",E]],V="[object Arguments]",Y="[object Array]",K="[object Boolean]",H="[object Date]",B="[object Error]",z="[object Function]",X="[object GeneratorFunction]",ee="[object Map]",pe="[object Number]",ce="[object Object]",Pe="[object Promise]",Ee="[object RegExp]",le="[object Set]",ie="[object String]",$e="[object Symbol]",Ge="[object WeakMap]",ht="[object ArrayBuffer]",Fe="[object DataView]",Nt="[object Float32Array]",Yt="[object Float64Array]",kt="[object Int8Array]",On="[object Int16Array]",Be="[object Int32Array]",Se="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Ye="[object Uint16Array]",bt="[object Uint32Array]",vt=/\b__p \+= '';/g,Wt=/\b(__p \+=) '' \+/g,Qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gt=/&(?:amp|lt|gt|quot|#39);/g,Kt=/[&<>"']/g,rt=RegExp(Gt.source),cn=RegExp(Kt.source),We=/<%-([\s\S]+?)%>/g,dn=/<%([\s\S]+?)%>/g,er=/<%=([\s\S]+?)%>/g,ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tr=/^\w*$/,Pr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/[\\^$.*+?()[\]{}|]/g,ao=RegExp(Xr.source),Un=/^\s+/,bo=/\s/,Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,on=/[()=,{}\[\]\/\s]/,Jt=/\\(\\)?/g,Rn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,ui=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,Yo=/^\[object .+?Constructor\]$/,ti=/^0o[0-7]+$/i,Mn=/^(?:0|[1-9]\d*)$/,$n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,lr=/['\n\r\u2028\u2029\\]/g,to="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Dr="\\u2700-\\u27bf",ml="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="A-Z\\xc0-\\xd6\\xd8-\\xde",yl="\\ufe0e\\ufe0f",iu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",np="['’]",wc="[\\ud800-\\udfff]",ma="["+iu+"]",Fu="["+to+"]",Nn="\\d+",Vf="[\\u2700-\\u27bf]",wo="["+ml+"]",Ec="[^\\ud800-\\udfff"+iu+Nn+Dr+ml+Ha+"]",Ji="\\ud83c[\\udffb-\\udfff]",la="[^\\ud800-\\udfff]",Ns="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",ya="["+Ha+"]",Da="(?:"+wo+"|"+Ec+")",Oc="(?:"+ya+"|"+Ec+")",Sc="(?:['’](?:d|ll|m|re|s|t|ve))?",Bf="(?:['’](?:D|LL|M|RE|S|T|VE))?",Uu="(?:"+Fu+"|"+Ji+")?",Wf="[\\ufe0e\\ufe0f]?",xc=Wf+Uu+("(?:\\u200d(?:"+[la,Ns,Ca].join("|")+")"+Wf+Uu+")*"),rp="(?:"+[Vf,Ns,Ca].join("|")+")"+xc,jl="(?:"+[la+Fu+"?",Fu,Ns,Ca,wc].join("|")+")",Gf=RegExp(np,"g"),gl=RegExp(Fu,"g"),Ac=RegExp(Ji+"(?="+Ji+")|"+jl+xc,"g"),Rs=RegExp([ya+"?"+wo+"+"+Sc+"(?="+[ma,ya,"$"].join("|")+")",Oc+"+"+Bf+"(?="+[ma,ya+Da,"$"].join("|")+")",ya+"?"+Da+"+"+Sc,ya+"+"+Bf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nn,rp].join("|"),"g"),Tc=RegExp("[\\u200d\\ud800-\\udfff"+to+yl+"]"),Mc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,op=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zf=-1,qr={};qr[Nt]=qr[Yt]=qr[kt]=qr[On]=qr[Be]=qr[Se]=qr[Ce]=qr[Ye]=qr[bt]=!0,qr[V]=qr[Y]=qr[ht]=qr[K]=qr[Fe]=qr[H]=qr[B]=qr[z]=qr[ee]=qr[pe]=qr[ce]=qr[Ee]=qr[le]=qr[ie]=qr[Ge]=!1;var Wr={};Wr[V]=Wr[Y]=Wr[ht]=Wr[Fe]=Wr[K]=Wr[H]=Wr[Nt]=Wr[Yt]=Wr[kt]=Wr[On]=Wr[Be]=Wr[ee]=Wr[pe]=Wr[ce]=Wr[Ee]=Wr[le]=Wr[ie]=Wr[$e]=Wr[Se]=Wr[Ce]=Wr[Ye]=Wr[bt]=!0,Wr[B]=Wr[z]=Wr[Ge]=!1;var Hf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},au=parseFloat,ga=parseInt,Cs=typeof u=="object"&&u&&u.Object===Object&&u,Xf=typeof self=="object"&&self&&self.Object===Object&&self,Fo=Cs||Xf||Function("return this")(),Il=a&&!a.nodeType&&a,Ll=Il&&typeof c=="object"&&c&&!c.nodeType&&c,Ds=Ll&&Ll.exports===Il,lu=Ds&&Cs.process,xi=function(){try{var dt=Ll&&Ll.require&&Ll.require("util").types;return dt||lu&&lu.binding&&lu.binding("util")}catch{}}(),kc=xi&&xi.isArrayBuffer,qf=xi&&xi.isDate,Pc=xi&&xi.isMap,Fi=xi&&xi.isRegExp,si=xi&&xi.isSet,_a=xi&&xi.isTypedArray;function lo(dt,Ft,Ut){switch(Ut.length){case 0:return dt.call(Ft);case 1:return dt.call(Ft,Ut[0]);case 2:return dt.call(Ft,Ut[0],Ut[1]);case 3:return dt.call(Ft,Ut[0],Ut[1],Ut[2])}return dt.apply(Ft,Ut)}function ip(dt,Ft,Ut,yn){for(var fr=-1,Rr=dt==null?0:dt.length;++fr<Rr;){var mo=dt[fr];Ft(yn,mo,Ut(mo),dt)}return yn}function Ui(dt,Ft){for(var Ut=-1,yn=dt==null?0:dt.length;++Ut<yn&&Ft(dt[Ut],Ut,dt)!==!1;);return dt}function Yf(dt,Ft){for(var Ut=dt==null?0:dt.length;Ut--&&Ft(dt[Ut],Ut,dt)!==!1;);return dt}function Kf(dt,Ft){for(var Ut=-1,yn=dt==null?0:dt.length;++Ut<yn;)if(!Ft(dt[Ut],Ut,dt))return!1;return!0}function Vi(dt,Ft){for(var Ut=-1,yn=dt==null?0:dt.length,fr=0,Rr=[];++Ut<yn;){var mo=dt[Ut];Ft(mo,Ut,dt)&&(Rr[fr++]=mo)}return Rr}function Qi(dt,Ft){return!!(dt!=null&&dt.length)&&uu(dt,Ft,0)>-1}function Nc(dt,Ft,Ut){for(var yn=-1,fr=dt==null?0:dt.length;++yn<fr;)if(Ut(Ft,dt[yn]))return!0;return!1}function $r(dt,Ft){for(var Ut=-1,yn=dt==null?0:dt.length,fr=Array(yn);++Ut<yn;)fr[Ut]=Ft(dt[Ut],Ut,dt);return fr}function ci(dt,Ft){for(var Ut=-1,yn=Ft.length,fr=dt.length;++Ut<yn;)dt[fr+Ut]=Ft[Ut];return dt}function js(dt,Ft,Ut,yn){var fr=-1,Rr=dt==null?0:dt.length;for(yn&&Rr&&(Ut=dt[++fr]);++fr<Rr;)Ut=Ft(Ut,dt[fr],fr,dt);return Ut}function Zf(dt,Ft,Ut,yn){var fr=dt==null?0:dt.length;for(yn&&fr&&(Ut=dt[--fr]);fr--;)Ut=Ft(Ut,dt[fr],fr,dt);return Ut}function Rc(dt,Ft){for(var Ut=-1,yn=dt==null?0:dt.length;++Ut<yn;)if(Ft(dt[Ut],Ut,dt))return!0;return!1}var Is=Wi("length");function Xa(dt,Ft,Ut){var yn;return Ut(dt,function(fr,Rr,mo){if(Ft(fr,Rr,mo))return yn=Rr,!1}),yn}function Bi(dt,Ft,Ut,yn){for(var fr=dt.length,Rr=Ut+(yn?1:-1);yn?Rr--:++Rr<fr;)if(Ft(dt[Rr],Rr,dt))return Rr;return-1}function uu(dt,Ft,Ut){return Ft==Ft?function(yn,fr,Rr){for(var mo=Rr-1,P=yn.length;++mo<P;)if(yn[mo]===fr)return mo;return-1}(dt,Ft,Ut):Bi(dt,ba,Ut)}function ea(dt,Ft,Ut,yn){for(var fr=Ut-1,Rr=dt.length;++fr<Rr;)if(yn(dt[fr],Ft))return fr;return-1}function ba(dt){return dt!=dt}function Nr(dt,Ft){var Ut=dt==null?0:dt.length;return Ut?su(dt,Ft)/Ut:U}function Wi(dt){return function(Ft){return Ft==null?f:Ft[dt]}}function ja(dt){return function(Ft){return dt==null?f:dt[Ft]}}function yi(dt,Ft,Ut,yn,fr){return fr(dt,function(Rr,mo,P){Ut=yn?(yn=!1,Rr):Ft(Ut,Rr,mo,P)}),Ut}function su(dt,Ft){for(var Ut,yn=-1,fr=dt.length;++yn<fr;){var Rr=Ft(dt[yn]);Rr!==f&&(Ut=Ut===f?Rr:Ut+Rr)}return Ut}function $l(dt,Ft){for(var Ut=-1,yn=Array(dt);++Ut<dt;)yn[Ut]=Ft(Ut);return yn}function Ia(dt){return dt&&dt.slice(0,fi(dt)+1).replace(Un,"")}function vo(dt){return function(Ft){return dt(Ft)}}function Vu(dt,Ft){return $r(Ft,function(Ut){return dt[Ut]})}function qa(dt,Ft){return dt.has(Ft)}function wa(dt,Ft){for(var Ut=-1,yn=dt.length;++Ut<yn&&uu(Ft,dt[Ut],0)>-1;);return Ut}function Cc(dt,Ft){for(var Ut=dt.length;Ut--&&uu(Ft,dt[Ut],0)>-1;);return Ut}function ap(dt,Ft){for(var Ut=dt.length,yn=0;Ut--;)dt[Ut]===Ft&&++yn;return yn}var Dc=ja({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ko=ja({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bu(dt){return"\\"+Hf[dt]}function Ya(dt){return Tc.test(dt)}function ni(dt){var Ft=-1,Ut=Array(dt.size);return dt.forEach(function(yn,fr){Ut[++Ft]=[fr,yn]}),Ut}function jc(dt,Ft){return function(Ut){return dt(Ft(Ut))}}function ua(dt,Ft){for(var Ut=-1,yn=dt.length,fr=0,Rr=[];++Ut<yn;){var mo=dt[Ut];mo!==Ft&&mo!==b||(dt[Ut]=b,Rr[fr++]=Ut)}return Rr}function Ea(dt){var Ft=-1,Ut=Array(dt.size);return dt.forEach(function(yn){Ut[++Ft]=yn}),Ut}function Ls(dt){var Ft=-1,Ut=Array(dt.size);return dt.forEach(function(yn){Ut[++Ft]=[yn,yn]}),Ut}function Gi(dt){return Ya(dt)?function(Ft){for(var Ut=Ac.lastIndex=0;Ac.test(Ft);)++Ut;return Ut}(dt):Is(dt)}function ta(dt){return Ya(dt)?function(Ft){return Ft.match(Ac)||[]}(dt):function(Ft){return Ft.split("")}(dt)}function fi(dt){for(var Ft=dt.length;Ft--&&bo.test(dt.charAt(Ft)););return Ft}var sa=ja({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function dt(Ft){var Ut,yn=(Ft=Ft==null?Fo:Ii.defaults(Fo.Object(),Ft,Ii.pick(Fo,op))).Array,fr=Ft.Date,Rr=Ft.Error,mo=Ft.Function,P=Ft.Math,N=Ft.Object,G=Ft.RegExp,oe=Ft.String,we=Ft.TypeError,Ke=yn.prototype,gt=mo.prototype,Xt=N.prototype,Sn=Ft["__core-js_shared__"],wr=gt.toString,pn=Xt.hasOwnProperty,Gr=0,mr=(Ut=/[^.]+$/.exec(Sn&&Sn.keys&&Sn.keys.IE_PROTO||""))?"Symbol(src)_1."+Ut:"",Ir=Xt.toString,ca=wr.call(N),Ao=Fo._,na=G("^"+wr.call(pn).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_l=Ds?Ft.Buffer:f,bl=Ft.Symbol,Fl=Ft.Uint8Array,cu=_l?_l.allocUnsafe:f,Ka=jc(N.getPrototypeOf,N),fu=N.create,ri=Xt.propertyIsEnumerable,Ul=Ke.splice,wl=bl?bl.isConcatSpreadable:f,Za=bl?bl.iterator:f,Ja=bl?bl.toStringTag:f,Wu=function(){try{var p=il(N,"defineProperty");return p({},"",{}),p}catch{}}(),gh=Ft.clearTimeout!==Fo.clearTimeout&&Ft.clearTimeout,_h=fr&&fr.now!==Fo.Date.now&&fr.now,lp=Ft.setTimeout!==Fo.setTimeout&&Ft.setTimeout,Ic=P.ceil,Gu=P.floor,Jf=N.getOwnPropertySymbols,bh=_l?_l.isBuffer:f,zu=Ft.isFinite,Lc=Ke.join,Qf=jc(N.keys,N),Uo=P.max,zi=P.min,ed=fr.now,td=Ft.parseInt,$s=P.random,Jv=Ke.reverse,Fs=il(Ft,"DataView"),Us=il(Ft,"Map"),$c=il(Ft,"Promise"),Hu=il(Ft,"Set"),du=il(Ft,"WeakMap"),Vs=il(N,"create"),Fc=du&&new du,pu={},Qv=wu(Fs),Uc=wu(Us),em=wu($c),tm=wu(Hu),wh=wu(du),nd=bl?bl.prototype:f,Li=nd?nd.valueOf:f,Eh=nd?nd.toString:f;function ue(p){if(Go(p)&&!gr(p)&&!(p instanceof Cr)){if(p instanceof La)return p;if(pn.call(p,"__wrapped__"))return xd(p)}return new La(p)}var Xu=function(){function p(){}return function(y){if(!Do(y))return{};if(fu)return fu(y);p.prototype=y;var S=new p;return p.prototype=f,S}}();function Vl(){}function La(p,y){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=f}function Cr(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function Ai(p){var y=-1,S=p==null?0:p.length;for(this.clear();++y<S;){var L=p[y];this.set(L[0],L[1])}}function Fr(p){var y=-1,S=p==null?0:p.length;for(this.clear();++y<S;){var L=p[y];this.set(L[0],L[1])}}function Qa(p){var y=-1,S=p==null?0:p.length;for(this.clear();++y<S;){var L=p[y];this.set(L[0],L[1])}}function Bl(p){var y=-1,S=p==null?0:p.length;for(this.__data__=new Qa;++y<S;)this.add(p[y])}function Oa(p){var y=this.__data__=new Fr(p);this.size=y.size}function rd(p,y){var S=gr(p),L=!S&&cs(p),q=!S&&!L&&oa(p),ne=!S&&!L&&!q&&tt(p),me=S||L||q||ne,xe=me?$l(p.length,oe):[],Ve=xe.length;for(var yt in p)!y&&!pn.call(p,yt)||me&&(yt=="length"||q&&(yt=="offset"||yt=="parent")||ne&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||$i(yt,Ve))||xe.push(yt);return xe}function od(p){var y=p.length;return y?p[gp(0,y-1)]:f}function up(p,y){return Tl(gi(p),hu(y,0,p.length))}function Oh(p){return Tl(gi(p))}function Wl(p,y,S){(S!==f&&!Va(p[y],S)||S===f&&!(y in p))&&el(p,y,S)}function Vo(p,y,S){var L=p[y];pn.call(p,y)&&Va(L,S)&&(S!==f||y in p)||el(p,y,S)}function Bs(p,y){for(var S=p.length;S--;)if(Va(p[S][0],y))return S;return-1}function sp(p,y,S,L){return Eo(p,function(q,ne,me){y(L,q,S(q),me)}),L}function Gl(p,y){return p&&nl(y,jt(y),p)}function el(p,y,S){y=="__proto__"&&Wu?Wu(p,y,{configurable:!0,enumerable:!0,value:S,writable:!0}):p[y]=S}function Vc(p,y){for(var S=-1,L=y.length,q=yn(L),ne=p==null;++S<L;)q[S]=ne?f:Ht(p,y[S]);return q}function hu(p,y,S){return p==p&&(S!==f&&(p=p<=S?p:S),y!==f&&(p=p>=y?p:y)),p}function Sa(p,y,S,L,q,ne){var me,xe=1&y,Ve=2&y,yt=4&y;if(S&&(me=q?S(p,L,q,ne):S(p)),me!==f)return me;if(!Do(p))return p;var wt=gr(p);if(wt){if(me=function(It){var rn=It.length,ar=new It.constructor(rn);return rn&&typeof It[0]=="string"&&pn.call(It,"index")&&(ar.index=It.index,ar.input=It.input),ar}(p),!xe)return gi(p,me)}else{var zt=Ro(p),wn=zt==z||zt==X;if(oa(p))return Nh(p,xe);if(zt==ce||zt==V||wn&&!q){if(me=Ve||wn?{}:ra(p),!xe)return Ve?function(It,rn){return nl(It,ns(It),rn)}(p,function(It,rn){return It&&nl(rn,Mt(rn),It)}(me,p)):function(It,rn){return nl(It,di(It),rn)}(p,Gl(me,p))}else{if(!Wr[zt])return q?p:{};me=function(It,rn,ar){var kn=It.constructor;switch(rn){case ht:return Ku(It);case K:case H:return new kn(+It);case Fe:return function(vr,Lr){var Xn=Lr?Ku(vr.buffer):vr.buffer;return new vr.constructor(Xn,vr.byteOffset,vr.byteLength)}(It,ar);case Nt:case Yt:case kt:case On:case Be:case Se:case Ce:case Ye:case bt:return Rh(It,ar);case ee:return new kn;case pe:case ie:return new kn(It);case Ee:return function(vr){var Lr=new vr.constructor(vr.source,Or.exec(vr));return Lr.lastIndex=vr.lastIndex,Lr}(It);case le:return new kn;case $e:return qe=It,Li?N(Li.call(qe)):{}}var qe}(p,zt,xe)}}ne||(ne=new Oa);var xn=ne.get(p);if(xn)return xn;ne.set(p,me),Oe(p)?p.forEach(function(It){me.add(Sa(It,y,S,It,p,ne))}):Pd(p)&&p.forEach(function(It,rn){me.set(rn,Sa(It,y,S,rn,p,ne))});var Gn=wt?f:(yt?Ve?bd:Kc:Ve?Mt:jt)(p);return Ui(Gn||p,function(It,rn){Gn&&(It=p[rn=It]),Vo(me,rn,Sa(It,y,S,rn,p,ne))}),me}function cp(p,y,S){var L=S.length;if(p==null)return!L;for(p=N(p);L--;){var q=S[L],ne=y[q],me=p[q];if(me===f&&!(q in p)||!ne(me))return!1}return!0}function fp(p,y,S){if(typeof p!="function")throw new we(g);return is(function(){p.apply(f,S)},y)}function tl(p,y,S,L){var q=-1,ne=Qi,me=!0,xe=p.length,Ve=[],yt=y.length;if(!xe)return Ve;S&&(y=$r(y,vo(S))),L?(ne=Nc,me=!1):y.length>=200&&(ne=qa,me=!1,y=new Bl(y));e:for(;++q<xe;){var wt=p[q],zt=S==null?wt:S(wt);if(wt=L||wt!==0?wt:0,me&&zt==zt){for(var wn=yt;wn--;)if(y[wn]===zt)continue e;Ve.push(wt)}else ne(y,zt,L)||Ve.push(wt)}return Ve}ue.templateSettings={escape:We,evaluate:dn,interpolate:er,variable:"",imports:{_:ue}},ue.prototype=Vl.prototype,ue.prototype.constructor=ue,La.prototype=Xu(Vl.prototype),La.prototype.constructor=La,Cr.prototype=Xu(Vl.prototype),Cr.prototype.constructor=Cr,Ai.prototype.clear=function(){this.__data__=Vs?Vs(null):{},this.size=0},Ai.prototype.delete=function(p){var y=this.has(p)&&delete this.__data__[p];return this.size-=y?1:0,y},Ai.prototype.get=function(p){var y=this.__data__;if(Vs){var S=y[p];return S===_?f:S}return pn.call(y,p)?y[p]:f},Ai.prototype.has=function(p){var y=this.__data__;return Vs?y[p]!==f:pn.call(y,p)},Ai.prototype.set=function(p,y){var S=this.__data__;return this.size+=this.has(p)?0:1,S[p]=Vs&&y===f?_:y,this},Fr.prototype.clear=function(){this.__data__=[],this.size=0},Fr.prototype.delete=function(p){var y=this.__data__,S=Bs(y,p);return!(S<0)&&(S==y.length-1?y.pop():Ul.call(y,S,1),--this.size,!0)},Fr.prototype.get=function(p){var y=this.__data__,S=Bs(y,p);return S<0?f:y[S][1]},Fr.prototype.has=function(p){return Bs(this.__data__,p)>-1},Fr.prototype.set=function(p,y){var S=this.__data__,L=Bs(S,p);return L<0?(++this.size,S.push([p,y])):S[L][1]=y,this},Qa.prototype.clear=function(){this.size=0,this.__data__={hash:new Ai,map:new(Us||Fr),string:new Ai}},Qa.prototype.delete=function(p){var y=Ks(this,p).delete(p);return this.size-=y?1:0,y},Qa.prototype.get=function(p){return Ks(this,p).get(p)},Qa.prototype.has=function(p){return Ks(this,p).has(p)},Qa.prototype.set=function(p,y){var S=Ks(this,p),L=S.size;return S.set(p,y),this.size+=S.size==L?0:1,this},Bl.prototype.add=Bl.prototype.push=function(p){return this.__data__.set(p,_),this},Bl.prototype.has=function(p){return this.__data__.has(p)},Oa.prototype.clear=function(){this.__data__=new Fr,this.size=0},Oa.prototype.delete=function(p){var y=this.__data__,S=y.delete(p);return this.size=y.size,S},Oa.prototype.get=function(p){return this.__data__.get(p)},Oa.prototype.has=function(p){return this.__data__.has(p)},Oa.prototype.set=function(p,y){var S=this.__data__;if(S instanceof Fr){var L=S.__data__;if(!Us||L.length<199)return L.push([p,y]),this.size=++S.size,this;S=this.__data__=new Qa(L)}return S.set(p,y),this.size=S.size,this};var Eo=Qu(Cn),Sh=Qu(po,!0);function dp(p,y){var S=!0;return Eo(p,function(L,q,ne){return S=!!y(L,q,ne)}),S}function Bo(p,y,S){for(var L=-1,q=p.length;++L<q;){var ne=p[L],me=y(ne);if(me!=null&&(xe===f?me==me&&!mt(me):S(me,xe)))var xe=me,Ve=ne}return Ve}function Yr(p,y){var S=[];return Eo(p,function(L,q,ne){y(L,q,ne)&&S.push(L)}),S}function oi(p,y,S,L,q){var ne=-1,me=p.length;for(S||(S=Jc),q||(q=[]);++ne<me;){var xe=p[ne];y>0&&S(xe)?y>1?oi(xe,y-1,S,L,q):ci(q,xe):L||(q[q.length]=xe)}return q}var xr=es(),fo=es(!0);function Cn(p,y){return p&&xr(p,y,jt)}function po(p,y){return p&&fo(p,y,jt)}function Bc(p,y){return Vi(y,function(S){return Ta(p[S])})}function El(p,y){for(var S=0,L=(y=zr(y,p)).length;p!=null&&S<L;)p=p[al(y[S++])];return S&&S==L?p:f}function id(p,y,S){var L=y(p);return gr(p)?L:ci(L,S(p))}function To(p){return p==null?p===f?"[object Undefined]":"[object Null]":Ja&&Ja in N(p)?function(y){var S=pn.call(y,Ja),L=y[Ja];try{y[Ja]=f;var q=!0}catch{}var ne=Ir.call(y);return q&&(S?y[Ja]=L:delete y[Ja]),ne}(p):function(y){return Ir.call(y)}(p)}function No(p,y){return p>y}function pp(p,y){return p!=null&&pn.call(p,y)}function hp(p,y){return p!=null&&y in N(p)}function Wc(p,y,S){for(var L=S?Nc:Qi,q=p[0].length,ne=p.length,me=ne,xe=yn(ne),Ve=1/0,yt=[];me--;){var wt=p[me];me&&y&&(wt=$r(wt,vo(y))),Ve=zi(wt.length,Ve),xe[me]=!S&&(y||q>=120&&wt.length>=120)?new Bl(me&&wt):f}wt=p[0];var zt=-1,wn=xe[0];e:for(;++zt<q&&yt.length<Ve;){var xn=wt[zt],Gn=y?y(xn):xn;if(xn=S||xn!==0?xn:0,!(wn?qa(wn,Gn):L(yt,Gn,S))){for(me=ne;--me;){var It=xe[me];if(!(It?qa(It,Gn):L(p[me],Gn,S)))continue e}wn&&wn.push(Gn),yt.push(xn)}}return yt}function Hi(p,y,S){var L=(p=bu(p,y=zr(y,p)))==null?p:p[al(Oo(y))];return L==null?f:lo(L,p,S)}function ad(p){return Go(p)&&To(p)==V}function Ws(p,y,S,L,q){return p===y||(p==null||y==null||!Go(p)&&!Go(y)?p!=p&&y!=y:function(ne,me,xe,Ve,yt,wt){var zt=gr(ne),wn=gr(me),xn=zt?Y:Ro(ne),Gn=wn?Y:Ro(me),It=(xn=xn==V?ce:xn)==ce,rn=(Gn=Gn==V?ce:Gn)==ce,ar=xn==Gn;if(ar&&oa(ne)){if(!oa(me))return!1;zt=!0,It=!1}if(ar&&!It)return wt||(wt=new Oa),zt||tt(ne)?Ys(ne,me,xe,Ve,yt,wt):function(Xn,sr,ki,Ba,Zl,Pi,xu){switch(ki){case Fe:if(Xn.byteLength!=sr.byteLength||Xn.byteOffset!=sr.byteOffset)return!1;Xn=Xn.buffer,sr=sr.buffer;case ht:return!(Xn.byteLength!=sr.byteLength||!Pi(new Fl(Xn),new Fl(sr)));case K:case H:case pe:return Va(+Xn,+sr);case B:return Xn.name==sr.name&&Xn.message==sr.message;case Ee:case ie:return Xn==sr+"";case ee:var ds=ni;case le:var Nd=1&Ba;if(ds||(ds=Ea),Xn.size!=sr.size&&!Nd)return!1;var Ip=xu.get(Xn);if(Ip)return Ip==sr;Ba|=2,xu.set(Xn,sr);var Au=Ys(ds(Xn),ds(sr),Ba,Zl,Pi,xu);return xu.delete(Xn),Au;case $e:if(Li)return Li.call(Xn)==Li.call(sr)}return!1}(ne,me,xn,xe,Ve,yt,wt);if(!(1&xe)){var kn=It&&pn.call(ne,"__wrapped__"),qe=rn&&pn.call(me,"__wrapped__");if(kn||qe){var vr=kn?ne.value():ne,Lr=qe?me.value():me;return wt||(wt=new Oa),yt(vr,Lr,xe,Ve,wt)}}return ar?(wt||(wt=new Oa),function(Xn,sr,ki,Ba,Zl,Pi){var xu=1&ki,ds=Kc(Xn),Nd=ds.length,Ip=Kc(sr).length;if(Nd!=Ip&&!xu)return!1;for(var Au=Nd;Au--;){var ec=ds[Au];if(!(xu?ec in sr:pn.call(sr,ec)))return!1}var um=Pi.get(Xn),Rd=Pi.get(sr);if(um&&Rd)return um==sr&&Rd==Xn;var Lp=!0;Pi.set(Xn,sr),Pi.set(sr,Xn);for(var sm=xu;++Au<Nd;){var $p=Xn[ec=ds[Au]],mf=sr[ec];if(Ba)var yf=xu?Ba(mf,$p,ec,sr,Xn,Pi):Ba($p,mf,ec,Xn,sr,Pi);if(!(yf===f?$p===mf||Zl($p,mf,ki,Ba,Pi):yf)){Lp=!1;break}sm||(sm=ec=="constructor")}if(Lp&&!sm){var ps=Xn.constructor,Fp=sr.constructor;ps==Fp||!("constructor"in Xn)||!("constructor"in sr)||typeof ps=="function"&&ps instanceof ps&&typeof Fp=="function"&&Fp instanceof Fp||(Lp=!1)}return Pi.delete(Xn),Pi.delete(sr),Lp}(ne,me,xe,Ve,yt,wt)):!1}(p,y,S,L,Ws,q))}function $a(p,y,S,L){var q=S.length,ne=q,me=!L;if(p==null)return!ne;for(p=N(p);q--;){var xe=S[q];if(me&&xe[2]?xe[1]!==p[xe[0]]:!(xe[0]in p))return!1}for(;++q<ne;){var Ve=(xe=S[q])[0],yt=p[Ve],wt=xe[1];if(me&&xe[2]){if(yt===f&&!(Ve in p))return!1}else{var zt=new Oa;if(L)var wn=L(yt,wt,Ve,p,y,zt);if(!(wn===f?Ws(wt,yt,3,L,zt):wn))return!1}}return!0}function vu(p){return!(!Do(p)||(y=p,mr&&mr in y))&&(Ta(p)?na:Yo).test(wu(p));var y}function zl(p){return typeof p=="function"?p:p==null?Zn:typeof p=="object"?gr(p)?mp(p[0],p[1]):vp(p):ve(p)}function Fa(p){if(!Pt(p))return Qf(p);var y=[];for(var S in N(p))pn.call(p,S)&&S!="constructor"&&y.push(S);return y}function xh(p){if(!Do(p))return function(q){var ne=[];if(q!=null)for(var me in N(q))ne.push(me);return ne}(p);var y=Pt(p),S=[];for(var L in p)(L!="constructor"||!y&&pn.call(p,L))&&S.push(L);return S}function Ol(p,y){return p<y}function xa(p,y){var S=-1,L=pa(p)?yn(p.length):[];return Eo(p,function(q,ne,me){L[++S]=y(q,ne,me)}),L}function vp(p){var y=Zc(p);return y.length==1&&y[0][2]?Qc(y[0][0],y[0][1]):function(S){return S===p||$a(S,p,y)}}function mp(p,y){return xl(p)&&rs(y)?Qc(al(p),y):function(S){var L=Ht(S,p);return L===f&&L===y?At(S,p):Ws(y,L,3)}}function ld(p,y,S,L,q){p!==y&&xr(y,function(ne,me){if(q||(q=new Oa),Do(ne))(function(Ve,yt,wt,zt,wn,xn,Gn){var It=Od(Ve,wt),rn=Od(yt,wt),ar=Gn.get(rn);if(ar)return void Wl(Ve,wt,ar);var kn=xn?xn(It,rn,wt+"",Ve,yt,Gn):f,qe=kn===f;if(qe){var vr=gr(rn),Lr=!vr&&oa(rn),Xn=!vr&&!Lr&&tt(rn);kn=rn,vr||Lr||Xn?gr(It)?kn=It:ko(It)?kn=gi(It):Lr?(qe=!1,kn=Nh(rn,!0)):Xn?(qe=!1,kn=Rh(rn,!0)):kn=[]:W(rn)||cs(rn)?(kn=It,cs(It)?kn=Dt(It):Do(It)&&!Ta(It)||(kn=ra(rn))):qe=!1}qe&&(Gn.set(rn,kn),wn(kn,rn,zt,xn,Gn),Gn.delete(rn)),Wl(Ve,wt,kn)})(p,y,me,S,ld,L,q);else{var xe=L?L(Od(p,me),ne,me+"",p,y,q):f;xe===f&&(xe=ne),Wl(p,me,xe)}},Mt)}function Ah(p,y){var S=p.length;if(S)return $i(y+=y<0?S:0,S)?p[y]:f}function Th(p,y,S){y=y.length?$r(y,function(ne){return gr(ne)?function(me){return El(me,ne.length===1?ne[0]:ne)}:ne}):[Zn];var L=-1;y=$r(y,vo(nr()));var q=xa(p,function(ne,me,xe){var Ve=$r(y,function(yt){return yt(ne)});return{criteria:Ve,index:++L,value:ne}});return function(ne,me){var xe=ne.length;for(ne.sort(me);xe--;)ne[xe]=ne[xe].value;return ne}(q,function(ne,me){return function(xe,Ve,yt){for(var wt=-1,zt=xe.criteria,wn=Ve.criteria,xn=zt.length,Gn=yt.length;++wt<xn;){var It=Gs(zt[wt],wn[wt]);if(It)return wt>=Gn?It:It*(yt[wt]=="desc"?-1:1)}return xe.index-Ve.index}(ne,me,S)})}function Mh(p,y,S){for(var L=-1,q=y.length,ne={};++L<q;){var me=y[L],xe=El(p,me);S(xe,me)&&qu(ne,zr(me,p),xe)}return ne}function ud(p,y,S,L){var q=L?ea:uu,ne=-1,me=y.length,xe=p;for(p===y&&(y=gi(y)),S&&(xe=$r(p,vo(S)));++ne<me;)for(var Ve=0,yt=y[ne],wt=S?S(yt):yt;(Ve=q(xe,wt,Ve,L))>-1;)xe!==p&&Ul.call(xe,Ve,1),Ul.call(p,Ve,1);return p}function yp(p,y){for(var S=p?y.length:0,L=S-1;S--;){var q=y[S];if(S==L||q!==ne){var ne=q;$i(q)?Ul.call(p,q,1):cd(p,q)}}return p}function gp(p,y){return p+Gu($s()*(y-p+1))}function Gc(p,y){var S="";if(!p||y<1||y>j)return S;do y%2&&(S+=p),(y=Gu(y/2))&&(p+=p);while(y);return S}function Ar(p,y){return tf(ef(p,y,Zn),p+"")}function nm(p){return od(_r(p))}function _p(p,y){var S=_r(p);return Tl(S,hu(y,0,S.length))}function qu(p,y,S,L){if(!Do(p))return p;for(var q=-1,ne=(y=zr(y,p)).length,me=ne-1,xe=p;xe!=null&&++q<ne;){var Ve=al(y[q]),yt=S;if(Ve==="__proto__"||Ve==="constructor"||Ve==="prototype")return p;if(q!=me){var wt=xe[Ve];(yt=L?L(wt,Ve,xe):f)===f&&(yt=Do(wt)?wt:$i(y[q+1])?[]:{})}Vo(xe,Ve,yt),xe=xe[Ve]}return p}var zc=Fc?function(p,y){return Fc.set(p,y),p}:Zn,rm=Wu?function(p,y){return Wu(p,"toString",{configurable:!0,enumerable:!1,value:Tr(y),writable:!0})}:Zn;function kh(p){return Tl(_r(p))}function Aa(p,y,S){var L=-1,q=p.length;y<0&&(y=-y>q?0:q+y),(S=S>q?q:S)<0&&(S+=q),q=y>S?0:S-y>>>0,y>>>=0;for(var ne=yn(q);++L<q;)ne[L]=p[L+y];return ne}function om(p,y){var S;return Eo(p,function(L,q,ne){return!(S=y(L,q,ne))}),!!S}function Hc(p,y,S){var L=0,q=p==null?L:p.length;if(typeof y=="number"&&y==y&&q<=2147483647){for(;L<q;){var ne=L+q>>>1,me=p[ne];me!==null&&!mt(me)&&(S?me<=y:me<y)?L=ne+1:q=ne}return q}return sd(p,y,Zn,S)}function sd(p,y,S,L){var q=0,ne=p==null?0:p.length;if(ne===0)return 0;for(var me=(y=S(y))!=y,xe=y===null,Ve=mt(y),yt=y===f;q<ne;){var wt=Gu((q+ne)/2),zt=S(p[wt]),wn=zt!==f,xn=zt===null,Gn=zt==zt,It=mt(zt);if(me)var rn=L||Gn;else rn=yt?Gn&&(L||wn):xe?Gn&&wn&&(L||!xn):Ve?Gn&&wn&&!xn&&(L||!It):!xn&&!It&&(L?zt<=y:zt<y);rn?q=wt+1:ne=wt}return zi(ne,4294967294)}function bp(p,y){for(var S=-1,L=p.length,q=0,ne=[];++S<L;){var me=p[S],xe=y?y(me):me;if(!S||!Va(xe,Ve)){var Ve=xe;ne[q++]=me===0?0:me}}return ne}function Ph(p){return typeof p=="number"?p:mt(p)?U:+p}function fa(p){if(typeof p=="string")return p;if(gr(p))return $r(p,fa)+"";if(mt(p))return Eh?Eh.call(p):"";var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function mu(p,y,S){var L=-1,q=Qi,ne=p.length,me=!0,xe=[],Ve=xe;if(S)me=!1,q=Nc;else if(ne>=200){var yt=y?null:Dh(p);if(yt)return Ea(yt);me=!1,q=qa,Ve=new Bl}else Ve=y?[]:xe;e:for(;++L<ne;){var wt=p[L],zt=y?y(wt):wt;if(wt=S||wt!==0?wt:0,me&&zt==zt){for(var wn=Ve.length;wn--;)if(Ve[wn]===zt)continue e;y&&Ve.push(zt),xe.push(wt)}else q(Ve,zt,S)||(Ve!==xe&&Ve.push(zt),xe.push(wt))}return xe}function cd(p,y){return(p=bu(p,y=zr(y,p)))==null||delete p[al(Oo(y))]}function Yu(p,y,S,L){return qu(p,y,S(El(p,y)),L)}function fd(p,y,S,L){for(var q=p.length,ne=L?q:-1;(L?ne--:++ne<q)&&y(p[ne],ne,p););return S?Aa(p,L?0:ne,L?ne+1:q):Aa(p,L?ne+1:0,L?q:ne)}function wp(p,y){var S=p;return S instanceof Cr&&(S=S.value()),js(y,function(L,q){return q.func.apply(q.thisArg,ci([L],q.args))},S)}function dd(p,y,S){var L=p.length;if(L<2)return L?mu(p[0]):[];for(var q=-1,ne=yn(L);++q<L;)for(var me=p[q],xe=-1;++xe<L;)xe!=q&&(ne[q]=tl(ne[q]||me,p[xe],y,S));return mu(oi(ne,1),y,S)}function Xc(p,y,S){for(var L=-1,q=p.length,ne=y.length,me={};++L<q;){var xe=L<ne?y[L]:f;S(me,p[L],xe)}return me}function pd(p){return ko(p)?p:[]}function hd(p){return typeof p=="function"?p:Zn}function zr(p,y){return gr(p)?p:xl(p,y)?[p]:kp(Et(p))}var im=Ar;function no(p,y,S){var L=p.length;return S=S===f?L:S,!y&&S>=L?p:Aa(p,y,S)}var vd=gh||function(p){return Fo.clearTimeout(p)};function Nh(p,y){if(y)return p.slice();var S=p.length,L=cu?cu(S):new p.constructor(S);return p.copy(L),L}function Ku(p){var y=new p.constructor(p.byteLength);return new Fl(y).set(new Fl(p)),y}function Rh(p,y){var S=y?Ku(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.length)}function Gs(p,y){if(p!==y){var S=p!==f,L=p===null,q=p==p,ne=mt(p),me=y!==f,xe=y===null,Ve=y==y,yt=mt(y);if(!xe&&!yt&&!ne&&p>y||ne&&me&&Ve&&!xe&&!yt||L&&me&&Ve||!S&&Ve||!q)return 1;if(!L&&!ne&&!yt&&p<y||yt&&S&&q&&!L&&!ne||xe&&S&&q||!me&&q||!Ve)return-1}return 0}function Ch(p,y,S,L){for(var q=-1,ne=p.length,me=S.length,xe=-1,Ve=y.length,yt=Uo(ne-me,0),wt=yn(Ve+yt),zt=!L;++xe<Ve;)wt[xe]=y[xe];for(;++q<me;)(zt||q<ne)&&(wt[S[q]]=p[q]);for(;yt--;)wt[xe++]=p[q++];return wt}function Zu(p,y,S,L){for(var q=-1,ne=p.length,me=-1,xe=S.length,Ve=-1,yt=y.length,wt=Uo(ne-xe,0),zt=yn(wt+yt),wn=!L;++q<wt;)zt[q]=p[q];for(var xn=q;++Ve<yt;)zt[xn+Ve]=y[Ve];for(;++me<xe;)(wn||q<ne)&&(zt[xn+S[me]]=p[q++]);return zt}function gi(p,y){var S=-1,L=p.length;for(y||(y=yn(L));++S<L;)y[S]=p[S];return y}function nl(p,y,S,L){var q=!S;S||(S={});for(var ne=-1,me=y.length;++ne<me;){var xe=y[ne],Ve=L?L(S[xe],p[xe],xe,S,p):f;Ve===f&&(Ve=p[xe]),q?el(S,xe,Ve):Vo(S,xe,Ve)}return S}function Hl(p,y){return function(S,L){var q=gr(S)?ip:sp,ne=y?y():{};return q(S,p,nr(L,2),ne)}}function Ju(p){return Ar(function(y,S){var L=-1,q=S.length,ne=q>1?S[q-1]:f,me=q>2?S[2]:f;for(ne=p.length>3&&typeof ne=="function"?(q--,ne):f,me&&Wo(S[0],S[1],me)&&(ne=q<3?f:ne,q=1),y=N(y);++L<q;){var xe=S[L];xe&&p(y,xe,L,ne)}return y})}function Qu(p,y){return function(S,L){if(S==null)return S;if(!pa(S))return p(S,L);for(var q=S.length,ne=y?q:-1,me=N(S);(y?ne--:++ne<q)&&L(me[ne],ne,me)!==!1;);return S}}function es(p){return function(y,S,L){for(var q=-1,ne=N(y),me=L(y),xe=me.length;xe--;){var Ve=me[p?xe:++q];if(S(ne[Ve],Ve,ne)===!1)break}return y}}function md(p){return function(y){var S=Ya(y=Et(y))?ta(y):f,L=S?S[0]:y.charAt(0),q=S?no(S,1).join(""):y.slice(1);return L[p]()+q}}function Xl(p){return function(y){return js(yo(or(y).replace(Gf,"")),p,"")}}function ts(p){return function(){var y=arguments;switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3]);case 5:return new p(y[0],y[1],y[2],y[3],y[4]);case 6:return new p(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new p(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var S=Xu(p.prototype),L=p.apply(S,y);return Do(L)?L:S}}function yd(p){return function(y,S,L){var q=N(y);if(!pa(y)){var ne=nr(S,3);y=jt(y),S=function(xe){return ne(q[xe],xe,q)}}var me=p(y,S,L);return me>-1?q[ne?y[me]:me]:f}}function rl(p){return Sl(function(y){var S=y.length,L=S,q=La.prototype.thru;for(p&&y.reverse();L--;){var ne=y[L];if(typeof ne!="function")throw new we(g);if(q&&!me&&yu(ne)=="wrapper")var me=new La([],!0)}for(L=me?L:S;++L<S;){var xe=yu(ne=y[L]),Ve=xe=="wrapper"?wd(ne):f;me=Ve&&Al(Ve[0])&&Ve[1]==424&&!Ve[4].length&&Ve[9]==1?me[yu(Ve[0])].apply(me,Ve[3]):ne.length==1&&Al(ne)?me[xe]():me.thru(ne)}return function(){var yt=arguments,wt=yt[0];if(me&&yt.length==1&&gr(wt))return me.plant(wt).value();for(var zt=0,wn=S?y[zt].apply(this,yt):wt;++zt<S;)wn=y[zt].call(this,wn);return wn}})}function qc(p,y,S,L,q,ne,me,xe,Ve,yt){var wt=y&A,zt=1&y,wn=2&y,xn=24&y,Gn=512&y,It=wn?f:ts(p);return function rn(){for(var ar=arguments.length,kn=yn(ar),qe=ar;qe--;)kn[qe]=arguments[qe];if(xn)var vr=gu(rn),Lr=ap(kn,vr);if(L&&(kn=Ch(kn,L,q,xn)),ne&&(kn=Zu(kn,ne,me,xn)),ar-=Lr,xn&&ar<yt){var Xn=ua(kn,vr);return Ep(p,y,qc,rn.placeholder,S,kn,Xn,xe,Ve,yt-ar)}var sr=zt?S:this,ki=wn?sr[p]:p;return ar=kn.length,xe?kn=os(kn,xe):Gn&&ar>1&&kn.reverse(),wt&&Ve<ar&&(kn.length=Ve),this&&this!==Fo&&this instanceof rn&&(ki=It||ts(ki)),ki.apply(sr,kn)}}function Yc(p,y){return function(S,L){return function(q,ne,me,xe){return Cn(q,function(Ve,yt,wt){ne(xe,me(Ve),yt,wt)}),xe}(S,p,y(L),{})}}function zs(p,y){return function(S,L){var q;if(S===f&&L===f)return y;if(S!==f&&(q=S),L!==f){if(q===f)return L;typeof S=="string"||typeof L=="string"?(S=fa(S),L=fa(L)):(S=Ph(S),L=Ph(L)),q=p(S,L)}return q}}function Hs(p){return Sl(function(y){return y=$r(y,vo(nr())),Ar(function(S){var L=this;return p(y,function(q){return lo(q,L,S)})})})}function Xs(p,y){var S=(y=y===f?" ":fa(y)).length;if(S<2)return S?Gc(y,p):y;var L=Gc(y,Ic(p/Gi(y)));return Ya(y)?no(ta(L),0,p).join(""):L.slice(0,p)}function gd(p){return function(y,S,L){return L&&typeof L!="number"&&Wo(y,S,L)&&(S=L=f),y=Ct(y),S===f?(S=y,y=0):S=Ct(S),function(q,ne,me,xe){for(var Ve=-1,yt=Uo(Ic((ne-q)/(me||1)),0),wt=yn(yt);yt--;)wt[xe?yt:++Ve]=q,q+=me;return wt}(y,S,L=L===f?y<S?1:-1:Ct(L),p)}}function qs(p){return function(y,S){return typeof y=="string"&&typeof S=="string"||(y=Vt(y),S=Vt(S)),p(y,S)}}function Ep(p,y,S,L,q,ne,me,xe,Ve,yt){var wt=8&y;y|=wt?x:M,4&(y&=~(wt?M:x))||(y&=-4);var zt=[p,y,q,wt?ne:f,wt?me:f,wt?f:ne,wt?f:me,xe,Ve,yt],wn=S.apply(f,zt);return Al(p)&&Tp(wn,zt),wn.placeholder=L,Sd(wn,p,y)}function _d(p){var y=P[p];return function(S,L){if(S=Vt(S),(L=L==null?0:zi(ft(L),292))&&zu(S)){var q=(Et(S)+"e").split("e");return+((q=(Et(y(q[0]+"e"+(+q[1]+L)))+"e").split("e"))[0]+"e"+(+q[1]-L))}return y(S)}}var Dh=Hu&&1/Ea(new Hu([,-0]))[1]==D?function(p){return new Hu(p)}:at;function Op(p){return function(y){var S=Ro(y);return S==ee?ni(y):S==le?Ls(y):function(L,q){return $r(q,function(ne){return[ne,L[ne]]})}(y,p(y))}}function ol(p,y,S,L,q,ne,me,xe){var Ve=2&y;if(!Ve&&typeof p!="function")throw new we(g);var yt=L?L.length:0;if(yt||(y&=-97,L=q=f),me=me===f?me:Uo(ft(me),0),xe=xe===f?xe:ft(xe),yt-=q?q.length:0,y&M){var wt=L,zt=q;L=q=f}var wn=Ve?f:wd(p),xn=[p,y,S,L,q,wt,zt,ne,me,xe];if(wn&&function(It,rn){var ar=It[1],kn=rn[1],qe=ar|kn,vr=qe<131,Lr=kn==A&&ar==8||kn==A&&ar==E&&It[7].length<=rn[8]||kn==384&&rn[7].length<=rn[8]&&ar==8;if(!vr&&!Lr)return It;1&kn&&(It[2]=rn[2],qe|=1&ar?0:4);var Xn=rn[3];if(Xn){var sr=It[3];It[3]=sr?Ch(sr,Xn,rn[4]):Xn,It[4]=sr?ua(It[3],b):rn[4]}(Xn=rn[5])&&(sr=It[5],It[5]=sr?Zu(sr,Xn,rn[6]):Xn,It[6]=sr?ua(It[5],b):rn[6]),(Xn=rn[7])&&(It[7]=Xn),kn&A&&(It[8]=It[8]==null?rn[8]:zi(It[8],rn[8])),It[9]==null&&(It[9]=rn[9]),It[0]=rn[0],It[1]=qe}(xn,wn),p=xn[0],y=xn[1],S=xn[2],L=xn[3],q=xn[4],!(xe=xn[9]=xn[9]===f?Ve?0:p.length:Uo(xn[9]-yt,0))&&24&y&&(y&=-25),y&&y!=1)Gn=y==8||y==O?function(It,rn,ar){var kn=ts(It);return function qe(){for(var vr=arguments.length,Lr=yn(vr),Xn=vr,sr=gu(qe);Xn--;)Lr[Xn]=arguments[Xn];var ki=vr<3&&Lr[0]!==sr&&Lr[vr-1]!==sr?[]:ua(Lr,sr);return(vr-=ki.length)<ar?Ep(It,rn,qc,qe.placeholder,f,Lr,ki,f,f,ar-vr):lo(this&&this!==Fo&&this instanceof qe?kn:It,this,Lr)}}(p,y,xe):y!=x&&y!=33||q.length?qc.apply(f,xn):function(It,rn,ar,kn){var qe=1&rn,vr=ts(It);return function Lr(){for(var Xn=-1,sr=arguments.length,ki=-1,Ba=kn.length,Zl=yn(Ba+sr),Pi=this&&this!==Fo&&this instanceof Lr?vr:It;++ki<Ba;)Zl[ki]=kn[ki];for(;sr--;)Zl[ki++]=arguments[++Xn];return lo(Pi,qe?ar:this,Zl)}}(p,y,S,L);else var Gn=function(It,rn,ar){var kn=1&rn,qe=ts(It);return function vr(){return(this&&this!==Fo&&this instanceof vr?qe:It).apply(kn?ar:this,arguments)}}(p,y,S);return Sd((wn?zc:Tp)(Gn,xn),p,y)}function Sp(p,y,S,L){return p===f||Va(p,Xt[S])&&!pn.call(L,S)?y:p}function xp(p,y,S,L,q,ne){return Do(p)&&Do(y)&&(ne.set(y,p),ld(p,y,f,xp,ne),ne.delete(y)),p}function Ap(p){return W(p)?f:p}function Ys(p,y,S,L,q,ne){var me=1&S,xe=p.length,Ve=y.length;if(xe!=Ve&&!(me&&Ve>xe))return!1;var yt=ne.get(p),wt=ne.get(y);if(yt&&wt)return yt==y&&wt==p;var zt=-1,wn=!0,xn=2&S?new Bl:f;for(ne.set(p,y),ne.set(y,p);++zt<xe;){var Gn=p[zt],It=y[zt];if(L)var rn=me?L(It,Gn,zt,y,p,ne):L(Gn,It,zt,p,y,ne);if(rn!==f){if(rn)continue;wn=!1;break}if(xn){if(!Rc(y,function(ar,kn){if(!qa(xn,kn)&&(Gn===ar||q(Gn,ar,S,L,ne)))return xn.push(kn)})){wn=!1;break}}else if(Gn!==It&&!q(Gn,It,S,L,ne)){wn=!1;break}}return ne.delete(p),ne.delete(y),wn}function Sl(p){return tf(ef(p,f,nf),p+"")}function Kc(p){return id(p,jt,di)}function bd(p){return id(p,Mt,ns)}var wd=Fc?function(p){return Fc.get(p)}:at;function yu(p){for(var y=p.name+"",S=pu[y],L=pn.call(pu,y)?S.length:0;L--;){var q=S[L],ne=q.func;if(ne==null||ne==p)return q.name}return y}function gu(p){return(pn.call(ue,"placeholder")?ue:p).placeholder}function nr(){var p=ue.iteratee||go;return p=p===go?zl:p,arguments.length?p(arguments[0],arguments[1]):p}function Ks(p,y){var S,L,q=p.__data__;return((L=typeof(S=y))=="string"||L=="number"||L=="symbol"||L=="boolean"?S!=="__proto__":S===null)?q[typeof y=="string"?"string":"hash"]:q.map}function Zc(p){for(var y=jt(p),S=y.length;S--;){var L=y[S],q=p[L];y[S]=[L,q,rs(q)]}return y}function il(p,y){var S=function(L,q){return L==null?f:L[q]}(p,y);return vu(S)?S:f}var di=Jf?function(p){return p==null?[]:(p=N(p),Vi(Jf(p),function(y){return ri.call(p,y)}))}:ze,ns=Jf?function(p){for(var y=[];p;)ci(y,di(p)),p=Ka(p);return y}:ze,Ro=To;function _u(p,y,S){for(var L=-1,q=(y=zr(y,p)).length,ne=!1;++L<q;){var me=al(y[L]);if(!(ne=p!=null&&S(p,me)))break;p=p[me]}return ne||++L!=q?ne:!!(q=p==null?0:p.length)&&vf(q)&&$i(me,q)&&(gr(p)||cs(p))}function ra(p){return typeof p.constructor!="function"||Pt(p)?{}:Xu(Ka(p))}function Jc(p){return gr(p)||cs(p)||!!(wl&&p&&p[wl])}function $i(p,y){var S=typeof p;return!!(y=y??j)&&(S=="number"||S!="symbol"&&Mn.test(p))&&p>-1&&p%1==0&&p<y}function Wo(p,y,S){if(!Do(S))return!1;var L=typeof y;return!!(L=="number"?pa(S)&&$i(y,S.length):L=="string"&&y in S)&&Va(S[y],p)}function xl(p,y){if(gr(p))return!1;var S=typeof p;return!(S!="number"&&S!="symbol"&&S!="boolean"&&p!=null&&!mt(p))||tr.test(p)||!ae.test(p)||y!=null&&p in N(y)}function Al(p){var y=yu(p),S=ue[y];if(typeof S!="function"||!(y in Cr.prototype))return!1;if(p===S)return!0;var L=wd(S);return!!L&&p===L[0]}(Fs&&Ro(new Fs(new ArrayBuffer(1)))!=Fe||Us&&Ro(new Us)!=ee||$c&&Ro($c.resolve())!=Pe||Hu&&Ro(new Hu)!=le||du&&Ro(new du)!=Ge)&&(Ro=function(p){var y=To(p),S=y==ce?p.constructor:f,L=S?wu(S):"";if(L)switch(L){case Qv:return Fe;case Uc:return ee;case em:return Pe;case tm:return le;case wh:return Ge}return y});var Ed=Sn?Ta:Je;function Pt(p){var y=p&&p.constructor;return p===(typeof y=="function"&&y.prototype||Xt)}function rs(p){return p==p&&!Do(p)}function Qc(p,y){return function(S){return S!=null&&S[p]===y&&(y!==f||p in N(S))}}function ef(p,y,S){return y=Uo(y===f?p.length-1:y,0),function(){for(var L=arguments,q=-1,ne=Uo(L.length-y,0),me=yn(ne);++q<ne;)me[q]=L[y+q];q=-1;for(var xe=yn(y+1);++q<y;)xe[q]=L[q];return xe[y]=S(me),lo(p,this,xe)}}function bu(p,y){return y.length<2?p:El(p,Aa(y,0,-1))}function os(p,y){for(var S=p.length,L=zi(y.length,S),q=gi(p);L--;){var ne=y[L];p[L]=$i(ne,S)?q[ne]:f}return p}function Od(p,y){if((y!=="constructor"||typeof p[y]!="function")&&y!="__proto__")return p[y]}var Tp=Mp(zc),is=lp||function(p,y){return Fo.setTimeout(p,y)},tf=Mp(rm);function Sd(p,y,S){var L=y+"";return tf(p,function(q,ne){var me=ne.length;if(!me)return q;var xe=me-1;return ne[xe]=(me>1?"& ":"")+ne[xe],ne=ne.join(me>2?", ":" "),q.replace(Ae,`{
/* [wrapped with `+ne+`] */
`)}(L,function(q,ne){return Ui(I,function(me){var xe="_."+me[0];ne&me[1]&&!Qi(q,xe)&&q.push(xe)}),q.sort()}(function(q){var ne=q.match(Qe);return ne?ne[1].split(je):[]}(L),S)))}function Mp(p){var y=0,S=0;return function(){var L=ed(),q=16-(L-S);if(S=L,q>0){if(++y>=800)return arguments[0]}else y=0;return p.apply(f,arguments)}}function Tl(p,y){var S=-1,L=p.length,q=L-1;for(y=y===f?L:y;++S<y;){var ne=gp(S,q),me=p[ne];p[ne]=p[S],p[S]=me}return p.length=y,p}var kp=function(p){var y=Kl(p,function(L){return S.size===500&&S.clear(),L}),S=y.cache;return y}(function(p){var y=[];return p.charCodeAt(0)===46&&y.push(""),p.replace(Pr,function(S,L,q,ne){y.push(q?ne.replace(Jt,"$1"):L||S)}),y});function al(p){if(typeof p=="string"||mt(p))return p;var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}function wu(p){if(p!=null){try{return wr.call(p)}catch{}try{return p+""}catch{}}return""}function xd(p){if(p instanceof Cr)return p.clone();var y=new La(p.__wrapped__,p.__chain__);return y.__actions__=gi(p.__actions__),y.__index__=p.__index__,y.__values__=p.__values__,y}var jh=Ar(function(p,y){return ko(p)?tl(p,oi(y,1,ko,!0)):[]}),Ih=Ar(function(p,y){var S=Oo(y);return ko(S)&&(S=f),ko(p)?tl(p,oi(y,1,ko,!0),nr(S,2)):[]}),Lh=Ar(function(p,y){var S=Oo(y);return ko(S)&&(S=f),ko(p)?tl(p,oi(y,1,ko,!0),f,S):[]});function Pp(p,y,S){var L=p==null?0:p.length;if(!L)return-1;var q=S==null?0:ft(S);return q<0&&(q=Uo(L+q,0)),Bi(p,nr(y,3),q)}function Ad(p,y,S){var L=p==null?0:p.length;if(!L)return-1;var q=L-1;return S!==f&&(q=ft(S),q=S<0?Uo(L+q,0):zi(q,L-1)),Bi(p,nr(y,3),q,!0)}function nf(p){return p!=null&&p.length?oi(p,1):[]}function $h(p){return p&&p.length?p[0]:f}var ll=Ar(function(p){var y=$r(p,pd);return y.length&&y[0]===p[0]?Wc(y):[]}),Eu=Ar(function(p){var y=Oo(p),S=$r(p,pd);return y===Oo(S)?y=f:S.pop(),S.length&&S[0]===p[0]?Wc(S,nr(y,2)):[]}),am=Ar(function(p){var y=Oo(p),S=$r(p,pd);return(y=typeof y=="function"?y:f)&&S.pop(),S.length&&S[0]===p[0]?Wc(S,f,y):[]});function Oo(p){var y=p==null?0:p.length;return y?p[y-1]:f}var rf=Ar(as);function as(p,y){return p&&p.length&&y&&y.length?ud(p,y):p}var of=Sl(function(p,y){var S=p==null?0:p.length,L=Vc(p,y);return yp(p,$r(y,function(q){return $i(q,S)?+q:q}).sort(Gs)),L});function Zs(p){return p==null?p:Jv.call(p)}var af=Ar(function(p){return mu(oi(p,1,ko,!0))}),lf=Ar(function(p){var y=Oo(p);return ko(y)&&(y=f),mu(oi(p,1,ko,!0),nr(y,2))}),uf=Ar(function(p){var y=Oo(p);return y=typeof y=="function"?y:f,mu(oi(p,1,ko,!0),f,y)});function ls(p){if(!p||!p.length)return[];var y=0;return p=Vi(p,function(S){if(ko(S))return y=Uo(S.length,y),!0}),$l(y,function(S){return $r(p,Wi(S))})}function ql(p,y){if(!p||!p.length)return[];var S=ls(p);return y==null?S:$r(S,function(L){return lo(y,f,L)})}var _i=Ar(function(p,y){return ko(p)?tl(p,y):[]}),Td=Ar(function(p){return dd(Vi(p,ko))}),sf=Ar(function(p){var y=Oo(p);return ko(y)&&(y=f),dd(Vi(p,ko),nr(y,2))}),us=Ar(function(p){var y=Oo(p);return y=typeof y=="function"?y:f,dd(Vi(p,ko),f,y)}),Js=Ar(ls),Ti=Ar(function(p){var y=p.length,S=y>1?p[y-1]:f;return S=typeof S=="function"?(p.pop(),S):f,ql(p,S)});function Mo(p){var y=ue(p);return y.__chain__=!0,y}function cf(p,y){return y(p)}var Xi=Sl(function(p){var y=p.length,S=y?p[0]:0,L=this.__wrapped__,q=function(ne){return Vc(ne,p)};return!(y>1||this.__actions__.length)&&L instanceof Cr&&$i(S)?((L=L.slice(S,+S+(y?1:0))).__actions__.push({func:cf,args:[q],thisArg:f}),new La(L,this.__chain__).thru(function(ne){return y&&!ne.length&&ne.push(f),ne})):this.thru(q)}),Fn=Hl(function(p,y,S){pn.call(p,S)?++p[S]:el(p,S,1)}),Md=yd(Pp),ff=yd(Ad);function kd(p,y){return(gr(p)?Ui:Eo)(p,nr(y,3))}function Np(p,y){return(gr(p)?Yf:Sh)(p,nr(y,3))}var Fh=Hl(function(p,y,S){pn.call(p,S)?p[S].push(y):el(p,S,[y])}),Ou=Ar(function(p,y,S){var L=-1,q=typeof y=="function",ne=pa(p)?yn(p.length):[];return Eo(p,function(me){ne[++L]=q?lo(y,me,S):Hi(me,y,S)}),ne}),Uh=Hl(function(p,y,S){el(p,S,y)});function ss(p,y){return(gr(p)?$r:xa)(p,nr(y,3))}var Vh=Hl(function(p,y,S){p[S?0:1].push(y)},function(){return[[],[]]}),Rp=Ar(function(p,y){if(p==null)return[];var S=y.length;return S>1&&Wo(p,y[0],y[1])?y=[]:S>2&&Wo(y[0],y[1],y[2])&&(y=[y[0]]),Th(p,oi(y,1),[])}),df=_h||function(){return Fo.Date.now()};function Bh(p,y,S){return y=S?f:y,y=p&&y==null?p.length:y,ol(p,A,f,f,f,f,y)}function Ua(p,y){var S;if(typeof y!="function")throw new we(g);return p=ft(p),function(){return--p>0&&(S=y.apply(this,arguments)),p<=1&&(y=f),S}}var Yl=Ar(function(p,y,S){var L=1;if(S.length){var q=ua(S,gu(Yl));L|=x}return ol(p,L,y,S,q)}),Su=Ar(function(p,y,S){var L=3;if(S.length){var q=ua(S,gu(Su));L|=x}return ol(y,L,p,S,q)});function Vn(p,y,S){var L,q,ne,me,xe,Ve,yt=0,wt=!1,zt=!1,wn=!0;if(typeof p!="function")throw new we(g);function xn(qe){var vr=L,Lr=q;return L=q=f,yt=qe,me=p.apply(Lr,vr)}function Gn(qe){return yt=qe,xe=is(rn,y),wt?xn(qe):me}function It(qe){var vr=qe-Ve;return Ve===f||vr>=y||vr<0||zt&&qe-yt>=ne}function rn(){var qe=df();if(It(qe))return ar(qe);xe=is(rn,function(vr){var Lr=y-(vr-Ve);return zt?zi(Lr,ne-(vr-yt)):Lr}(qe))}function ar(qe){return xe=f,wn&&L?xn(qe):(L=q=f,me)}function kn(){var qe=df(),vr=It(qe);if(L=arguments,q=this,Ve=qe,vr){if(xe===f)return Gn(Ve);if(zt)return vd(xe),xe=is(rn,y),xn(Ve)}return xe===f&&(xe=is(rn,y)),me}return y=Vt(y)||0,Do(S)&&(wt=!!S.leading,ne=(zt="maxWait"in S)?Uo(Vt(S.maxWait)||0,y):ne,wn="trailing"in S?!!S.trailing:wn),kn.cancel=function(){xe!==f&&vd(xe),yt=0,L=Ve=q=xe=f},kn.flush=function(){return xe===f?me:ar(df())},kn}var Cp=Ar(function(p,y){return fp(p,1,y)}),Qs=Ar(function(p,y,S){return fp(p,Vt(y)||0,S)});function Kl(p,y){if(typeof p!="function"||y!=null&&typeof y!="function")throw new we(g);var S=function(){var L=arguments,q=y?y.apply(this,L):L[0],ne=S.cache;if(ne.has(q))return ne.get(q);var me=p.apply(this,L);return S.cache=ne.set(q,me)||ne,me};return S.cache=new(Kl.Cache||Qa),S}function pf(p){if(typeof p!="function")throw new we(g);return function(){var y=arguments;switch(y.length){case 0:return!p.call(this);case 1:return!p.call(this,y[0]);case 2:return!p.call(this,y[0],y[1]);case 3:return!p.call(this,y[0],y[1],y[2])}return!p.apply(this,y)}}Kl.Cache=Qa;var qi=im(function(p,y){var S=(y=y.length==1&&gr(y[0])?$r(y[0],vo(nr())):$r(oi(y,1),vo(nr()))).length;return Ar(function(L){for(var q=-1,ne=zi(L.length,S);++q<ne;)L[q]=y[q].call(this,L[q]);return lo(p,this,L)})}),ul=Ar(function(p,y){var S=ua(y,gu(ul));return ol(p,x,f,y,S)}),Co=Ar(function(p,y){var S=ua(y,gu(Co));return ol(p,M,f,y,S)}),da=Sl(function(p,y){return ol(p,E,f,f,f,y)});function Va(p,y){return p===y||p!=p&&y!=y}var lm=qs(No),hf=qs(function(p,y){return p>=y}),cs=ad(function(){return arguments}())?ad:function(p){return Go(p)&&pn.call(p,"callee")&&!ri.call(p,"callee")},gr=yn.isArray,Wh=kc?vo(kc):function(p){return Go(p)&&To(p)==ht};function pa(p){return p!=null&&vf(p.length)&&!Ta(p)}function ko(p){return Go(p)&&pa(p)}var oa=bh||Je,Dp=qf?vo(qf):function(p){return Go(p)&&To(p)==H};function Mi(p){if(!Go(p))return!1;var y=To(p);return y==B||y=="[object DOMException]"||typeof p.message=="string"&&typeof p.name=="string"&&!W(p)}function Ta(p){if(!Do(p))return!1;var y=To(p);return y==z||y==X||y=="[object AsyncFunction]"||y=="[object Proxy]"}function fs(p){return typeof p=="number"&&p==ft(p)}function vf(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=j}function Do(p){var y=typeof p;return p!=null&&(y=="object"||y=="function")}function Go(p){return p!=null&&typeof p=="object"}var Pd=Pc?vo(Pc):function(p){return Go(p)&&Ro(p)==ee};function jp(p){return typeof p=="number"||Go(p)&&To(p)==pe}function W(p){if(!Go(p)||To(p)!=ce)return!1;var y=Ka(p);if(y===null)return!0;var S=pn.call(y,"constructor")&&y.constructor;return typeof S=="function"&&S instanceof S&&wr.call(S)==ca}var se=Fi?vo(Fi):function(p){return Go(p)&&To(p)==Ee},Oe=si?vo(si):function(p){return Go(p)&&Ro(p)==le};function it(p){return typeof p=="string"||!gr(p)&&Go(p)&&To(p)==ie}function mt(p){return typeof p=="symbol"||Go(p)&&To(p)==$e}var tt=_a?vo(_a):function(p){return Go(p)&&vf(p.length)&&!!qr[To(p)]},pt=qs(Ol),Rt=qs(function(p,y){return p<=y});function $t(p){if(!p)return[];if(pa(p))return it(p)?ta(p):gi(p);if(Za&&p[Za])return function(S){for(var L,q=[];!(L=S.next()).done;)q.push(L.value);return q}(p[Za]());var y=Ro(p);return(y==ee?ni:y==le?Ea:_r)(p)}function Ct(p){return p?(p=Vt(p))===D||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}function ft(p){var y=Ct(p),S=y%1;return y==y?S?y-S:y:0}function qt(p){return p?hu(ft(p),0,F):0}function Vt(p){if(typeof p=="number")return p;if(mt(p))return U;if(Do(p)){var y=typeof p.valueOf=="function"?p.valueOf():p;p=Do(y)?y+"":y}if(typeof p!="string")return p===0?p:+p;p=Ia(p);var S=Si.test(p);return S||ti.test(p)?ga(p.slice(2),S?2:8):ui.test(p)?U:+p}function Dt(p){return nl(p,Mt(p))}function Et(p){return p==null?"":fa(p)}var Ze=Ju(function(p,y){if(Pt(y)||pa(y))nl(y,jt(y),p);else for(var S in y)pn.call(y,S)&&Vo(p,S,y[S])}),ct=Ju(function(p,y){nl(y,Mt(y),p)}),Lt=Ju(function(p,y,S,L){nl(y,Mt(y),p,L)}),en=Ju(function(p,y,S,L){nl(y,jt(y),p,L)}),xt=Sl(Vc),an=Ar(function(p,y){p=N(p);var S=-1,L=y.length,q=L>2?y[2]:f;for(q&&Wo(y[0],y[1],q)&&(L=1);++S<L;)for(var ne=y[S],me=Mt(ne),xe=-1,Ve=me.length;++xe<Ve;){var yt=me[xe],wt=p[yt];(wt===f||Va(wt,Xt[yt])&&!pn.call(p,yt))&&(p[yt]=ne[yt])}return p}),Tt=Ar(function(p){return p.push(f,xp),lo(jn,f,p)});function Ht(p,y,S){var L=p==null?f:El(p,y);return L===f?S:L}function At(p,y){return p!=null&&_u(p,y,hp)}var Zt=Yc(function(p,y,S){y!=null&&typeof y.toString!="function"&&(y=Ir.call(y)),p[y]=S},Tr(Zn)),Pn=Yc(function(p,y,S){y!=null&&typeof y.toString!="function"&&(y=Ir.call(y)),pn.call(p,y)?p[y].push(S):p[y]=[S]},nr),Bn=Ar(Hi);function jt(p){return pa(p)?rd(p):Fa(p)}function Mt(p){return pa(p)?rd(p,!0):xh(p)}var St=Ju(function(p,y,S){ld(p,y,S)}),jn=Ju(function(p,y,S,L){ld(p,y,S,L)}),rr=Sl(function(p,y){var S={};if(p==null)return S;var L=!1;y=$r(y,function(ne){return ne=zr(ne,p),L||(L=ne.length>1),ne}),nl(p,bd(p),S),L&&(S=Sa(S,7,Ap));for(var q=y.length;q--;)cd(S,y[q]);return S}),hn=Sl(function(p,y){return p==null?{}:function(S,L){return Mh(S,L,function(q,ne){return At(S,ne)})}(p,y)});function ur(p,y){if(p==null)return{};var S=$r(bd(p),function(L){return[L]});return y=nr(y),Mh(p,S,function(L,q){return y(L,q[0])})}var Wn=Op(jt),ir=Op(Mt);function _r(p){return p==null?[]:Vu(p,jt(p))}var jo=Xl(function(p,y,S){return y=y.toLowerCase(),p+(S?Po(y):y)});function Po(p){return Jo(Et(p).toLowerCase())}function or(p){return(p=Et(p))&&p.replace($n,Dc).replace(gl,"")}var Zo=Xl(function(p,y,S){return p+(S?"-":"")+y.toLowerCase()}),uo=Xl(function(p,y,S){return p+(S?" ":"")+y.toLowerCase()}),Io=md("toLowerCase"),zo=Xl(function(p,y,S){return p+(S?"_":"")+y.toLowerCase()}),ii=Xl(function(p,y,S){return p+(S?" ":"")+Jo(y)}),pi=Xl(function(p,y,S){return p+(S?" ":"")+y.toUpperCase()}),Jo=md("toUpperCase");function yo(p,y,S){return p=Et(p),(y=S?f:y)===f?function(L){return Mc.test(L)}(p)?function(L){return L.match(Rs)||[]}(p):function(L){return L.match(st)||[]}(p):p.match(y)||[]}var Kn=Ar(function(p,y){try{return lo(p,f,y)}catch(S){return Mi(S)?S:new Rr(S)}}),hi=Sl(function(p,y){return Ui(y,function(S){S=al(S),el(p,S,Yl(p[S],p))}),p});function Tr(p){return function(){return p}}var Dn=rl(),hr=rl(!0);function Zn(p){return p}function go(p){return zl(typeof p=="function"?p:Sa(p,1))}var Ml=Ar(function(p,y){return function(S){return Hi(S,p,y)}}),So=Ar(function(p,y){return function(S){return Hi(p,S,y)}});function ye(p,y,S){var L=jt(y),q=Bc(y,L);S!=null||Do(y)&&(q.length||!L.length)||(S=y,y=p,p=this,q=Bc(y,jt(y)));var ne=!(Do(S)&&"chain"in S&&!S.chain),me=Ta(p);return Ui(q,function(xe){var Ve=y[xe];p[xe]=Ve,me&&(p.prototype[xe]=function(){var yt=this.__chain__;if(ne||yt){var wt=p(this.__wrapped__),zt=wt.__actions__=gi(this.__actions__);return zt.push({func:Ve,args:arguments,thisArg:p}),wt.__chain__=yt,wt}return Ve.apply(p,ci([this.value()],arguments))})}),p}function at(){}var nt=Hs($r),sn=Hs(Kf),dr=Hs(Rc);function ve(p){return xl(p)?Wi(al(p)):function(y){return function(S){return El(S,y)}}(p)}var re=gd(),Ne=gd(!0);function ze(){return[]}function Je(){return!1}var De=zs(function(p,y){return p+y},0),Re=_d("ceil"),Ue=zs(function(p,y){return p/y},1),he=_d("floor"),Te,de=zs(function(p,y){return p*y},1),He=_d("round"),Xe=zs(function(p,y){return p-y},0);return ue.after=function(p,y){if(typeof y!="function")throw new we(g);return p=ft(p),function(){if(--p<1)return y.apply(this,arguments)}},ue.ary=Bh,ue.assign=Ze,ue.assignIn=ct,ue.assignInWith=Lt,ue.assignWith=en,ue.at=xt,ue.before=Ua,ue.bind=Yl,ue.bindAll=hi,ue.bindKey=Su,ue.castArray=function(){if(!arguments.length)return[];var p=arguments[0];return gr(p)?p:[p]},ue.chain=Mo,ue.chunk=function(p,y,S){y=(S?Wo(p,y,S):y===f)?1:Uo(ft(y),0);var L=p==null?0:p.length;if(!L||y<1)return[];for(var q=0,ne=0,me=yn(Ic(L/y));q<L;)me[ne++]=Aa(p,q,q+=y);return me},ue.compact=function(p){for(var y=-1,S=p==null?0:p.length,L=0,q=[];++y<S;){var ne=p[y];ne&&(q[L++]=ne)}return q},ue.concat=function(){var p=arguments.length;if(!p)return[];for(var y=yn(p-1),S=arguments[0],L=p;L--;)y[L-1]=arguments[L];return ci(gr(S)?gi(S):[S],oi(y,1))},ue.cond=function(p){var y=p==null?0:p.length,S=nr();return p=y?$r(p,function(L){if(typeof L[1]!="function")throw new we(g);return[S(L[0]),L[1]]}):[],Ar(function(L){for(var q=-1;++q<y;){var ne=p[q];if(lo(ne[0],this,L))return lo(ne[1],this,L)}})},ue.conforms=function(p){return function(y){var S=jt(y);return function(L){return cp(L,y,S)}}(Sa(p,1))},ue.constant=Tr,ue.countBy=Fn,ue.create=function(p,y){var S=Xu(p);return y==null?S:Gl(S,y)},ue.curry=function p(y,S,L){var q=ol(y,8,f,f,f,f,f,S=L?f:S);return q.placeholder=p.placeholder,q},ue.curryRight=function p(y,S,L){var q=ol(y,O,f,f,f,f,f,S=L?f:S);return q.placeholder=p.placeholder,q},ue.debounce=Vn,ue.defaults=an,ue.defaultsDeep=Tt,ue.defer=Cp,ue.delay=Qs,ue.difference=jh,ue.differenceBy=Ih,ue.differenceWith=Lh,ue.drop=function(p,y,S){var L=p==null?0:p.length;return L?Aa(p,(y=S||y===f?1:ft(y))<0?0:y,L):[]},ue.dropRight=function(p,y,S){var L=p==null?0:p.length;return L?Aa(p,0,(y=L-(y=S||y===f?1:ft(y)))<0?0:y):[]},ue.dropRightWhile=function(p,y){return p&&p.length?fd(p,nr(y,3),!0,!0):[]},ue.dropWhile=function(p,y){return p&&p.length?fd(p,nr(y,3),!0):[]},ue.fill=function(p,y,S,L){var q=p==null?0:p.length;return q?(S&&typeof S!="number"&&Wo(p,y,S)&&(S=0,L=q),function(ne,me,xe,Ve){var yt=ne.length;for((xe=ft(xe))<0&&(xe=-xe>yt?0:yt+xe),(Ve=Ve===f||Ve>yt?yt:ft(Ve))<0&&(Ve+=yt),Ve=xe>Ve?0:qt(Ve);xe<Ve;)ne[xe++]=me;return ne}(p,y,S,L)):[]},ue.filter=function(p,y){return(gr(p)?Vi:Yr)(p,nr(y,3))},ue.flatMap=function(p,y){return oi(ss(p,y),1)},ue.flatMapDeep=function(p,y){return oi(ss(p,y),D)},ue.flatMapDepth=function(p,y,S){return S=S===f?1:ft(S),oi(ss(p,y),S)},ue.flatten=nf,ue.flattenDeep=function(p){return p!=null&&p.length?oi(p,D):[]},ue.flattenDepth=function(p,y){return p!=null&&p.length?oi(p,y=y===f?1:ft(y)):[]},ue.flip=function(p){return ol(p,512)},ue.flow=Dn,ue.flowRight=hr,ue.fromPairs=function(p){for(var y=-1,S=p==null?0:p.length,L={};++y<S;){var q=p[y];L[q[0]]=q[1]}return L},ue.functions=function(p){return p==null?[]:Bc(p,jt(p))},ue.functionsIn=function(p){return p==null?[]:Bc(p,Mt(p))},ue.groupBy=Fh,ue.initial=function(p){return p!=null&&p.length?Aa(p,0,-1):[]},ue.intersection=ll,ue.intersectionBy=Eu,ue.intersectionWith=am,ue.invert=Zt,ue.invertBy=Pn,ue.invokeMap=Ou,ue.iteratee=go,ue.keyBy=Uh,ue.keys=jt,ue.keysIn=Mt,ue.map=ss,ue.mapKeys=function(p,y){var S={};return y=nr(y,3),Cn(p,function(L,q,ne){el(S,y(L,q,ne),L)}),S},ue.mapValues=function(p,y){var S={};return y=nr(y,3),Cn(p,function(L,q,ne){el(S,q,y(L,q,ne))}),S},ue.matches=function(p){return vp(Sa(p,1))},ue.matchesProperty=function(p,y){return mp(p,Sa(y,1))},ue.memoize=Kl,ue.merge=St,ue.mergeWith=jn,ue.method=Ml,ue.methodOf=So,ue.mixin=ye,ue.negate=pf,ue.nthArg=function(p){return p=ft(p),Ar(function(y){return Ah(y,p)})},ue.omit=rr,ue.omitBy=function(p,y){return ur(p,pf(nr(y)))},ue.once=function(p){return Ua(2,p)},ue.orderBy=function(p,y,S,L){return p==null?[]:(gr(y)||(y=y==null?[]:[y]),gr(S=L?f:S)||(S=S==null?[]:[S]),Th(p,y,S))},ue.over=nt,ue.overArgs=qi,ue.overEvery=sn,ue.overSome=dr,ue.partial=ul,ue.partialRight=Co,ue.partition=Vh,ue.pick=hn,ue.pickBy=ur,ue.property=ve,ue.propertyOf=function(p){return function(y){return p==null?f:El(p,y)}},ue.pull=rf,ue.pullAll=as,ue.pullAllBy=function(p,y,S){return p&&p.length&&y&&y.length?ud(p,y,nr(S,2)):p},ue.pullAllWith=function(p,y,S){return p&&p.length&&y&&y.length?ud(p,y,f,S):p},ue.pullAt=of,ue.range=re,ue.rangeRight=Ne,ue.rearg=da,ue.reject=function(p,y){return(gr(p)?Vi:Yr)(p,pf(nr(y,3)))},ue.remove=function(p,y){var S=[];if(!p||!p.length)return S;var L=-1,q=[],ne=p.length;for(y=nr(y,3);++L<ne;){var me=p[L];y(me,L,p)&&(S.push(me),q.push(L))}return yp(p,q),S},ue.rest=function(p,y){if(typeof p!="function")throw new we(g);return Ar(p,y=y===f?y:ft(y))},ue.reverse=Zs,ue.sampleSize=function(p,y,S){return y=(S?Wo(p,y,S):y===f)?1:ft(y),(gr(p)?up:_p)(p,y)},ue.set=function(p,y,S){return p==null?p:qu(p,y,S)},ue.setWith=function(p,y,S,L){return L=typeof L=="function"?L:f,p==null?p:qu(p,y,S,L)},ue.shuffle=function(p){return(gr(p)?Oh:kh)(p)},ue.slice=function(p,y,S){var L=p==null?0:p.length;return L?(S&&typeof S!="number"&&Wo(p,y,S)?(y=0,S=L):(y=y==null?0:ft(y),S=S===f?L:ft(S)),Aa(p,y,S)):[]},ue.sortBy=Rp,ue.sortedUniq=function(p){return p&&p.length?bp(p):[]},ue.sortedUniqBy=function(p,y){return p&&p.length?bp(p,nr(y,2)):[]},ue.split=function(p,y,S){return S&&typeof S!="number"&&Wo(p,y,S)&&(y=S=f),(S=S===f?F:S>>>0)?(p=Et(p))&&(typeof y=="string"||y!=null&&!se(y))&&!(y=fa(y))&&Ya(p)?no(ta(p),0,S):p.split(y,S):[]},ue.spread=function(p,y){if(typeof p!="function")throw new we(g);return y=y==null?0:Uo(ft(y),0),Ar(function(S){var L=S[y],q=no(S,0,y);return L&&ci(q,L),lo(p,this,q)})},ue.tail=function(p){var y=p==null?0:p.length;return y?Aa(p,1,y):[]},ue.take=function(p,y,S){return p&&p.length?Aa(p,0,(y=S||y===f?1:ft(y))<0?0:y):[]},ue.takeRight=function(p,y,S){var L=p==null?0:p.length;return L?Aa(p,(y=L-(y=S||y===f?1:ft(y)))<0?0:y,L):[]},ue.takeRightWhile=function(p,y){return p&&p.length?fd(p,nr(y,3),!1,!0):[]},ue.takeWhile=function(p,y){return p&&p.length?fd(p,nr(y,3)):[]},ue.tap=function(p,y){return y(p),p},ue.throttle=function(p,y,S){var L=!0,q=!0;if(typeof p!="function")throw new we(g);return Do(S)&&(L="leading"in S?!!S.leading:L,q="trailing"in S?!!S.trailing:q),Vn(p,y,{leading:L,maxWait:y,trailing:q})},ue.thru=cf,ue.toArray=$t,ue.toPairs=Wn,ue.toPairsIn=ir,ue.toPath=function(p){return gr(p)?$r(p,al):mt(p)?[p]:gi(kp(Et(p)))},ue.toPlainObject=Dt,ue.transform=function(p,y,S){var L=gr(p),q=L||oa(p)||tt(p);if(y=nr(y,4),S==null){var ne=p&&p.constructor;S=q?L?new ne:[]:Do(p)&&Ta(ne)?Xu(Ka(p)):{}}return(q?Ui:Cn)(p,function(me,xe,Ve){return y(S,me,xe,Ve)}),S},ue.unary=function(p){return Bh(p,1)},ue.union=af,ue.unionBy=lf,ue.unionWith=uf,ue.uniq=function(p){return p&&p.length?mu(p):[]},ue.uniqBy=function(p,y){return p&&p.length?mu(p,nr(y,2)):[]},ue.uniqWith=function(p,y){return y=typeof y=="function"?y:f,p&&p.length?mu(p,f,y):[]},ue.unset=function(p,y){return p==null||cd(p,y)},ue.unzip=ls,ue.unzipWith=ql,ue.update=function(p,y,S){return p==null?p:Yu(p,y,hd(S))},ue.updateWith=function(p,y,S,L){return L=typeof L=="function"?L:f,p==null?p:Yu(p,y,hd(S),L)},ue.values=_r,ue.valuesIn=function(p){return p==null?[]:Vu(p,Mt(p))},ue.without=_i,ue.words=yo,ue.wrap=function(p,y){return ul(hd(y),p)},ue.xor=Td,ue.xorBy=sf,ue.xorWith=us,ue.zip=Js,ue.zipObject=function(p,y){return Xc(p||[],y||[],Vo)},ue.zipObjectDeep=function(p,y){return Xc(p||[],y||[],qu)},ue.zipWith=Ti,ue.entries=Wn,ue.entriesIn=ir,ue.extend=ct,ue.extendWith=Lt,ye(ue,ue),ue.add=De,ue.attempt=Kn,ue.camelCase=jo,ue.capitalize=Po,ue.ceil=Re,ue.clamp=function(p,y,S){return S===f&&(S=y,y=f),S!==f&&(S=(S=Vt(S))==S?S:0),y!==f&&(y=(y=Vt(y))==y?y:0),hu(Vt(p),y,S)},ue.clone=function(p){return Sa(p,4)},ue.cloneDeep=function(p){return Sa(p,5)},ue.cloneDeepWith=function(p,y){return Sa(p,5,y=typeof y=="function"?y:f)},ue.cloneWith=function(p,y){return Sa(p,4,y=typeof y=="function"?y:f)},ue.conformsTo=function(p,y){return y==null||cp(p,y,jt(y))},ue.deburr=or,ue.defaultTo=function(p,y){return p==null||p!=p?y:p},ue.divide=Ue,ue.endsWith=function(p,y,S){p=Et(p),y=fa(y);var L=p.length,q=S=S===f?L:hu(ft(S),0,L);return(S-=y.length)>=0&&p.slice(S,q)==y},ue.eq=Va,ue.escape=function(p){return(p=Et(p))&&cn.test(p)?p.replace(Kt,Ko):p},ue.escapeRegExp=function(p){return(p=Et(p))&&ao.test(p)?p.replace(Xr,"\\$&"):p},ue.every=function(p,y,S){var L=gr(p)?Kf:dp;return S&&Wo(p,y,S)&&(y=f),L(p,nr(y,3))},ue.find=Md,ue.findIndex=Pp,ue.findKey=function(p,y){return Xa(p,nr(y,3),Cn)},ue.findLast=ff,ue.findLastIndex=Ad,ue.findLastKey=function(p,y){return Xa(p,nr(y,3),po)},ue.floor=he,ue.forEach=kd,ue.forEachRight=Np,ue.forIn=function(p,y){return p==null?p:xr(p,nr(y,3),Mt)},ue.forInRight=function(p,y){return p==null?p:fo(p,nr(y,3),Mt)},ue.forOwn=function(p,y){return p&&Cn(p,nr(y,3))},ue.forOwnRight=function(p,y){return p&&po(p,nr(y,3))},ue.get=Ht,ue.gt=lm,ue.gte=hf,ue.has=function(p,y){return p!=null&&_u(p,y,pp)},ue.hasIn=At,ue.head=$h,ue.identity=Zn,ue.includes=function(p,y,S,L){p=pa(p)?p:_r(p),S=S&&!L?ft(S):0;var q=p.length;return S<0&&(S=Uo(q+S,0)),it(p)?S<=q&&p.indexOf(y,S)>-1:!!q&&uu(p,y,S)>-1},ue.indexOf=function(p,y,S){var L=p==null?0:p.length;if(!L)return-1;var q=S==null?0:ft(S);return q<0&&(q=Uo(L+q,0)),uu(p,y,q)},ue.inRange=function(p,y,S){return y=Ct(y),S===f?(S=y,y=0):S=Ct(S),function(L,q,ne){return L>=zi(q,ne)&&L<Uo(q,ne)}(p=Vt(p),y,S)},ue.invoke=Bn,ue.isArguments=cs,ue.isArray=gr,ue.isArrayBuffer=Wh,ue.isArrayLike=pa,ue.isArrayLikeObject=ko,ue.isBoolean=function(p){return p===!0||p===!1||Go(p)&&To(p)==K},ue.isBuffer=oa,ue.isDate=Dp,ue.isElement=function(p){return Go(p)&&p.nodeType===1&&!W(p)},ue.isEmpty=function(p){if(p==null)return!0;if(pa(p)&&(gr(p)||typeof p=="string"||typeof p.splice=="function"||oa(p)||tt(p)||cs(p)))return!p.length;var y=Ro(p);if(y==ee||y==le)return!p.size;if(Pt(p))return!Fa(p).length;for(var S in p)if(pn.call(p,S))return!1;return!0},ue.isEqual=function(p,y){return Ws(p,y)},ue.isEqualWith=function(p,y,S){var L=(S=typeof S=="function"?S:f)?S(p,y):f;return L===f?Ws(p,y,f,S):!!L},ue.isError=Mi,ue.isFinite=function(p){return typeof p=="number"&&zu(p)},ue.isFunction=Ta,ue.isInteger=fs,ue.isLength=vf,ue.isMap=Pd,ue.isMatch=function(p,y){return p===y||$a(p,y,Zc(y))},ue.isMatchWith=function(p,y,S){return S=typeof S=="function"?S:f,$a(p,y,Zc(y),S)},ue.isNaN=function(p){return jp(p)&&p!=+p},ue.isNative=function(p){if(Ed(p))throw new Rr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return vu(p)},ue.isNil=function(p){return p==null},ue.isNull=function(p){return p===null},ue.isNumber=jp,ue.isObject=Do,ue.isObjectLike=Go,ue.isPlainObject=W,ue.isRegExp=se,ue.isSafeInteger=function(p){return fs(p)&&p>=-9007199254740991&&p<=j},ue.isSet=Oe,ue.isString=it,ue.isSymbol=mt,ue.isTypedArray=tt,ue.isUndefined=function(p){return p===f},ue.isWeakMap=function(p){return Go(p)&&Ro(p)==Ge},ue.isWeakSet=function(p){return Go(p)&&To(p)=="[object WeakSet]"},ue.join=function(p,y){return p==null?"":Lc.call(p,y)},ue.kebabCase=Zo,ue.last=Oo,ue.lastIndexOf=function(p,y,S){var L=p==null?0:p.length;if(!L)return-1;var q=L;return S!==f&&(q=(q=ft(S))<0?Uo(L+q,0):zi(q,L-1)),y==y?function(ne,me,xe){for(var Ve=xe+1;Ve--;)if(ne[Ve]===me)return Ve;return Ve}(p,y,q):Bi(p,ba,q,!0)},ue.lowerCase=uo,ue.lowerFirst=Io,ue.lt=pt,ue.lte=Rt,ue.max=function(p){return p&&p.length?Bo(p,Zn,No):f},ue.maxBy=function(p,y){return p&&p.length?Bo(p,nr(y,2),No):f},ue.mean=function(p){return Nr(p,Zn)},ue.meanBy=function(p,y){return Nr(p,nr(y,2))},ue.min=function(p){return p&&p.length?Bo(p,Zn,Ol):f},ue.minBy=function(p,y){return p&&p.length?Bo(p,nr(y,2),Ol):f},ue.stubArray=ze,ue.stubFalse=Je,ue.stubObject=function(){return{}},ue.stubString=function(){return""},ue.stubTrue=function(){return!0},ue.multiply=de,ue.nth=function(p,y){return p&&p.length?Ah(p,ft(y)):f},ue.noConflict=function(){return Fo._===this&&(Fo._=Ao),this},ue.noop=at,ue.now=df,ue.pad=function(p,y,S){p=Et(p);var L=(y=ft(y))?Gi(p):0;if(!y||L>=y)return p;var q=(y-L)/2;return Xs(Gu(q),S)+p+Xs(Ic(q),S)},ue.padEnd=function(p,y,S){p=Et(p);var L=(y=ft(y))?Gi(p):0;return y&&L<y?p+Xs(y-L,S):p},ue.padStart=function(p,y,S){p=Et(p);var L=(y=ft(y))?Gi(p):0;return y&&L<y?Xs(y-L,S)+p:p},ue.parseInt=function(p,y,S){return S||y==null?y=0:y&&(y=+y),td(Et(p).replace(Un,""),y||0)},ue.random=function(p,y,S){if(S&&typeof S!="boolean"&&Wo(p,y,S)&&(y=S=f),S===f&&(typeof y=="boolean"?(S=y,y=f):typeof p=="boolean"&&(S=p,p=f)),p===f&&y===f?(p=0,y=1):(p=Ct(p),y===f?(y=p,p=0):y=Ct(y)),p>y){var L=p;p=y,y=L}if(S||p%1||y%1){var q=$s();return zi(p+q*(y-p+au("1e-"+((q+"").length-1))),y)}return gp(p,y)},ue.reduce=function(p,y,S){var L=gr(p)?js:yi,q=arguments.length<3;return L(p,nr(y,4),S,q,Eo)},ue.reduceRight=function(p,y,S){var L=gr(p)?Zf:yi,q=arguments.length<3;return L(p,nr(y,4),S,q,Sh)},ue.repeat=function(p,y,S){return y=(S?Wo(p,y,S):y===f)?1:ft(y),Gc(Et(p),y)},ue.replace=function(){var p=arguments,y=Et(p[0]);return p.length<3?y:y.replace(p[1],p[2])},ue.result=function(p,y,S){var L=-1,q=(y=zr(y,p)).length;for(q||(q=1,p=f);++L<q;){var ne=p==null?f:p[al(y[L])];ne===f&&(L=q,ne=S),p=Ta(ne)?ne.call(p):ne}return p},ue.round=He,ue.runInContext=dt,ue.sample=function(p){return(gr(p)?od:nm)(p)},ue.size=function(p){if(p==null)return 0;if(pa(p))return it(p)?Gi(p):p.length;var y=Ro(p);return y==ee||y==le?p.size:Fa(p).length},ue.snakeCase=zo,ue.some=function(p,y,S){var L=gr(p)?Rc:om;return S&&Wo(p,y,S)&&(y=f),L(p,nr(y,3))},ue.sortedIndex=function(p,y){return Hc(p,y)},ue.sortedIndexBy=function(p,y,S){return sd(p,y,nr(S,2))},ue.sortedIndexOf=function(p,y){var S=p==null?0:p.length;if(S){var L=Hc(p,y);if(L<S&&Va(p[L],y))return L}return-1},ue.sortedLastIndex=function(p,y){return Hc(p,y,!0)},ue.sortedLastIndexBy=function(p,y,S){return sd(p,y,nr(S,2),!0)},ue.sortedLastIndexOf=function(p,y){if(p!=null&&p.length){var S=Hc(p,y,!0)-1;if(Va(p[S],y))return S}return-1},ue.startCase=ii,ue.startsWith=function(p,y,S){return p=Et(p),S=S==null?0:hu(ft(S),0,p.length),y=fa(y),p.slice(S,S+y.length)==y},ue.subtract=Xe,ue.sum=function(p){return p&&p.length?su(p,Zn):0},ue.sumBy=function(p,y){return p&&p.length?su(p,nr(y,2)):0},ue.template=function(p,y,S){var L=ue.templateSettings;S&&Wo(p,y,S)&&(y=f),p=Et(p),y=Lt({},y,L,Sp);var q,ne,me=Lt({},y.imports,L.imports,Sp),xe=jt(me),Ve=Vu(me,xe),yt=0,wt=y.interpolate||Hn,zt="__p += '",wn=G((y.escape||Hn).source+"|"+wt.source+"|"+(wt===er?Rn:Hn).source+"|"+(y.evaluate||Hn).source+"|$","g"),xn="//# sourceURL="+(pn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zf+"]")+`
`;p.replace(wn,function(rn,ar,kn,qe,vr,Lr){return kn||(kn=qe),zt+=p.slice(yt,Lr).replace(lr,Bu),ar&&(q=!0,zt+=`' +
__e(`+ar+`) +
'`),vr&&(ne=!0,zt+=`';
`+vr+`;
__p += '`),kn&&(zt+=`' +
((__t = (`+kn+`)) == null ? '' : __t) +
'`),yt=Lr+rn.length,rn}),zt+=`';
`;var Gn=pn.call(y,"variable")&&y.variable;if(Gn){if(on.test(Gn))throw new Rr("Invalid `variable` option passed into `_.template`")}else zt=`with (obj) {
`+zt+`
}
`;zt=(ne?zt.replace(vt,""):zt).replace(Wt,"$1").replace(Qt,"$1;"),zt="function("+(Gn||"obj")+`) {
`+(Gn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+zt+`return __p
}`;var It=Kn(function(){return mo(xe,xn+"return "+zt).apply(f,Ve)});if(It.source=zt,Mi(It))throw It;return It},ue.times=function(p,y){if((p=ft(p))<1||p>j)return[];var S=F,L=zi(p,F);y=nr(y),p-=F;for(var q=$l(L,y);++S<p;)y(S);return q},ue.toFinite=Ct,ue.toInteger=ft,ue.toLength=qt,ue.toLower=function(p){return Et(p).toLowerCase()},ue.toNumber=Vt,ue.toSafeInteger=function(p){return p?hu(ft(p),-9007199254740991,j):p===0?p:0},ue.toString=Et,ue.toUpper=function(p){return Et(p).toUpperCase()},ue.trim=function(p,y,S){if((p=Et(p))&&(S||y===f))return Ia(p);if(!p||!(y=fa(y)))return p;var L=ta(p),q=ta(y);return no(L,wa(L,q),Cc(L,q)+1).join("")},ue.trimEnd=function(p,y,S){if((p=Et(p))&&(S||y===f))return p.slice(0,fi(p)+1);if(!p||!(y=fa(y)))return p;var L=ta(p);return no(L,0,Cc(L,ta(y))+1).join("")},ue.trimStart=function(p,y,S){if((p=Et(p))&&(S||y===f))return p.replace(Un,"");if(!p||!(y=fa(y)))return p;var L=ta(p);return no(L,wa(L,ta(y))).join("")},ue.truncate=function(p,y){var S=30,L="...";if(Do(y)){var q="separator"in y?y.separator:q;S="length"in y?ft(y.length):S,L="omission"in y?fa(y.omission):L}var ne=(p=Et(p)).length;if(Ya(p)){var me=ta(p);ne=me.length}if(S>=ne)return p;var xe=S-Gi(L);if(xe<1)return L;var Ve=me?no(me,0,xe).join(""):p.slice(0,xe);if(q===f)return Ve+L;if(me&&(xe+=Ve.length-xe),se(q)){if(p.slice(xe).search(q)){var yt,wt=Ve;for(q.global||(q=G(q.source,Et(Or.exec(q))+"g")),q.lastIndex=0;yt=q.exec(wt);)var zt=yt.index;Ve=Ve.slice(0,zt===f?xe:zt)}}else if(p.indexOf(fa(q),xe)!=xe){var wn=Ve.lastIndexOf(q);wn>-1&&(Ve=Ve.slice(0,wn))}return Ve+L},ue.unescape=function(p){return(p=Et(p))&&rt.test(p)?p.replace(Gt,sa):p},ue.uniqueId=function(p){var y=++Gr;return Et(p)+y},ue.upperCase=pi,ue.upperFirst=Jo,ue.each=kd,ue.eachRight=Np,ue.first=$h,ye(ue,(Te={},Cn(ue,function(p,y){pn.call(ue.prototype,y)||(Te[y]=p)}),Te),{chain:!1}),ue.VERSION="4.17.21",Ui(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){ue[p].placeholder=ue}),Ui(["drop","take"],function(p,y){Cr.prototype[p]=function(S){S=S===f?1:Uo(ft(S),0);var L=this.__filtered__&&!y?new Cr(this):this.clone();return L.__filtered__?L.__takeCount__=zi(S,L.__takeCount__):L.__views__.push({size:zi(S,F),type:p+(L.__dir__<0?"Right":"")}),L},Cr.prototype[p+"Right"]=function(S){return this.reverse()[p](S).reverse()}}),Ui(["filter","map","takeWhile"],function(p,y){var S=y+1,L=S==1||S==3;Cr.prototype[p]=function(q){var ne=this.clone();return ne.__iteratees__.push({iteratee:nr(q,3),type:S}),ne.__filtered__=ne.__filtered__||L,ne}}),Ui(["head","last"],function(p,y){var S="take"+(y?"Right":"");Cr.prototype[p]=function(){return this[S](1).value()[0]}}),Ui(["initial","tail"],function(p,y){var S="drop"+(y?"":"Right");Cr.prototype[p]=function(){return this.__filtered__?new Cr(this):this[S](1)}}),Cr.prototype.compact=function(){return this.filter(Zn)},Cr.prototype.find=function(p){return this.filter(p).head()},Cr.prototype.findLast=function(p){return this.reverse().find(p)},Cr.prototype.invokeMap=Ar(function(p,y){return typeof p=="function"?new Cr(this):this.map(function(S){return Hi(S,p,y)})}),Cr.prototype.reject=function(p){return this.filter(pf(nr(p)))},Cr.prototype.slice=function(p,y){p=ft(p);var S=this;return S.__filtered__&&(p>0||y<0)?new Cr(S):(p<0?S=S.takeRight(-p):p&&(S=S.drop(p)),y!==f&&(S=(y=ft(y))<0?S.dropRight(-y):S.take(y-p)),S)},Cr.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Cr.prototype.toArray=function(){return this.take(F)},Cn(Cr.prototype,function(p,y){var S=/^(?:filter|find|map|reject)|While$/.test(y),L=/^(?:head|last)$/.test(y),q=ue[L?"take"+(y=="last"?"Right":""):y],ne=L||/^find/.test(y);q&&(ue.prototype[y]=function(){var me=this.__wrapped__,xe=L?[1]:arguments,Ve=me instanceof Cr,yt=xe[0],wt=Ve||gr(me),zt=function(ar){var kn=q.apply(ue,ci([ar],xe));return L&&wn?kn[0]:kn};wt&&S&&typeof yt=="function"&&yt.length!=1&&(Ve=wt=!1);var wn=this.__chain__,xn=!!this.__actions__.length,Gn=ne&&!wn,It=Ve&&!xn;if(!ne&&wt){me=It?me:new Cr(this);var rn=p.apply(me,xe);return rn.__actions__.push({func:cf,args:[zt],thisArg:f}),new La(rn,wn)}return Gn&&It?p.apply(this,xe):(rn=this.thru(zt),Gn?L?rn.value()[0]:rn.value():rn)})}),Ui(["pop","push","shift","sort","splice","unshift"],function(p){var y=Ke[p],S=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",L=/^(?:pop|shift)$/.test(p);ue.prototype[p]=function(){var q=arguments;if(L&&!this.__chain__){var ne=this.value();return y.apply(gr(ne)?ne:[],q)}return this[S](function(me){return y.apply(gr(me)?me:[],q)})}}),Cn(Cr.prototype,function(p,y){var S=ue[y];if(S){var L=S.name+"";pn.call(pu,L)||(pu[L]=[]),pu[L].push({name:y,func:S})}}),pu[qc(f,2).name]=[{name:"wrapper",func:f}],Cr.prototype.clone=function(){var p=new Cr(this.__wrapped__);return p.__actions__=gi(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=gi(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=gi(this.__views__),p},Cr.prototype.reverse=function(){if(this.__filtered__){var p=new Cr(this);p.__dir__=-1,p.__filtered__=!0}else(p=this.clone()).__dir__*=-1;return p},Cr.prototype.value=function(){var p=this.__wrapped__.value(),y=this.__dir__,S=gr(p),L=y<0,q=S?p.length:0,ne=function(Lr,Xn,sr){for(var ki=-1,Ba=sr.length;++ki<Ba;){var Zl=sr[ki],Pi=Zl.size;switch(Zl.type){case"drop":Lr+=Pi;break;case"dropRight":Xn-=Pi;break;case"take":Xn=zi(Xn,Lr+Pi);break;case"takeRight":Lr=Uo(Lr,Xn-Pi)}}return{start:Lr,end:Xn}}(0,q,this.__views__),me=ne.start,xe=ne.end,Ve=xe-me,yt=L?xe:me-1,wt=this.__iteratees__,zt=wt.length,wn=0,xn=zi(Ve,this.__takeCount__);if(!S||!L&&q==Ve&&xn==Ve)return wp(p,this.__actions__);var Gn=[];e:for(;Ve--&&wn<xn;){for(var It=-1,rn=p[yt+=y];++It<zt;){var ar=wt[It],kn=ar.iteratee,qe=ar.type,vr=kn(rn);if(qe==2)rn=vr;else if(!vr){if(qe==1)continue e;break e}}Gn[wn++]=rn}return Gn},ue.prototype.at=Xi,ue.prototype.chain=function(){return Mo(this)},ue.prototype.commit=function(){return new La(this.value(),this.__chain__)},ue.prototype.next=function(){this.__values__===f&&(this.__values__=$t(this.value()));var p=this.__index__>=this.__values__.length;return{done:p,value:p?f:this.__values__[this.__index__++]}},ue.prototype.plant=function(p){for(var y,S=this;S instanceof Vl;){var L=xd(S);L.__index__=0,L.__values__=f,y?q.__wrapped__=L:y=L;var q=L;S=S.__wrapped__}return q.__wrapped__=p,y},ue.prototype.reverse=function(){var p=this.__wrapped__;if(p instanceof Cr){var y=p;return this.__actions__.length&&(y=new Cr(this)),(y=y.reverse()).__actions__.push({func:cf,args:[Zs],thisArg:f}),new La(y,this.__chain__)}return this.thru(Zs)},ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=function(){return wp(this.__wrapped__,this.__actions__)},ue.prototype.first=ue.prototype.head,Za&&(ue.prototype[Za]=function(){return this}),ue}();Fo._=Ii,(v=(function(){return Ii}).call(a,r,a,c))===f||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,a,r){var u=r(7),c=r(34),v=r(33),f=r(87),g=r(62),_=r(174),b=r(28),O=u.TypeError,x=b("toPrimitive");n.exports=function(M,A){if(!v(M)||f(M))return M;var E,D=g(M,x);if(D){if(A===void 0&&(A="default"),E=c(D,M,A),!v(E)||f(E))return E;throw O("Can't convert object to primitive value")}return A===void 0&&(A="number"),_(M,A)}},function(n,a,r){var u=r(108);n.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,a,r){var u=r(36),c=r(18),v=r(91);n.exports=!u&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,a,r){var u=r(35),c=r(135),v=r(50),f=r(38);n.exports=function(g,_){for(var b=c(_),O=f.f,x=v.f,M=0;M<b.length;M++){var A=b[M];u(g,A)||O(g,A,x(_,A))}}},function(n,a,r){var u=r(46),c=r(15),v=r(74),f=r(112),g=r(32),_=c([].concat);n.exports=u("Reflect","ownKeys")||function(b){var O=v.f(g(b)),x=f.f;return x?_(O,x(b)):O}},function(n,a,r){var u=r(15),c=r(35),v=r(41),f=r(137).indexOf,g=r(72),_=u([].push);n.exports=function(b,O){var x,M=v(b),A=0,E=[];for(x in M)!c(g,x)&&c(M,x)&&_(E,x);for(;O.length>A;)c(M,x=O[A++])&&(~f(E,x)||_(E,x));return E}},function(n,a,r){var u=r(41),c=r(75),v=r(45),f=function(g){return function(_,b,O){var x,M=u(_),A=v(M),E=c(O,A);if(g&&b!=b){for(;A>E;)if((x=M[E++])!=x)return!0}else for(;A>E;E++)if((g||E in M)&&M[E]===b)return g||E||0;return!g&&-1}};n.exports={includes:f(!0),indexOf:f(!1)}},function(n,a,r){var u=r(46);n.exports=u("document","documentElement")},function(n,a,r){var u=r(51),c=r(41),v=r(74).f,f=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(_){return g&&u(_)=="Window"?function(b){try{return v(b)}catch{return f(g)}}(_):v(c(_))}},function(n,a,r){var u=r(28);a.f=u},function(n,a,r){var u=r(177),c=r(35),v=r(140),f=r(38).f;n.exports=function(g){var _=u.Symbol||(u.Symbol={});c(_,g)||f(_,g,{value:v.f(g)})}},function(n,a,r){var u,c,v,f=r(18),g=r(30),_=r(60),b=r(101),O=r(42),x=r(28),M=r(71),A=x("iterator"),E=!1;[].keys&&("next"in(v=[].keys())?(c=b(b(v)))!==Object.prototype&&(u=c):E=!0),u==null||f(function(){var D={};return u[A].call(D)!==D})?u={}:M&&(u=_(u)),g(u[A])||O(u,A,function(){return this}),n.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:E}},function(n,a,r){var u=r(18);n.exports=!u(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,a,r){var u=r(16),c=r(15),v=r(72),f=r(33),g=r(35),_=r(38).f,b=r(74),O=r(139),x=r(183),M=r(90),A=r(185),E=!1,D=M("meta"),j=0,U=function(I){_(I,D,{value:{objectID:"O"+j++,weakData:{}}})},F=n.exports={enable:function(){F.enable=function(){},E=!0;var I=b.f,V=c([].splice),Y={};Y[D]=1,I(Y).length&&(b.f=function(K){for(var H=I(K),B=0,z=H.length;B<z;B++)if(H[B]===D){V(H,B,1);break}return H},u({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(I,V){if(!f(I))return typeof I=="symbol"?I:(typeof I=="string"?"S":"P")+I;if(!g(I,D)){if(!x(I))return"F";if(!V)return"E";U(I)}return I[D].objectID},getWeakData:function(I,V){if(!g(I,D)){if(!x(I))return!0;if(!V)return!1;U(I)}return I[D].weakData},onFreeze:function(I){return A&&E&&x(I)&&!g(I,D)&&U(I),I}};v[D]=!0},function(n,a,r){var u=r(28),c=r(80),v=u("iterator"),f=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||f[v]===g)}},function(n,a,r){var u=r(7),c=r(34),v=r(56),f=r(32),g=r(88),_=r(118),b=u.TypeError;n.exports=function(O,x){var M=arguments.length<2?_(O):x;if(v(M))return f(c(M,O));throw b(g(O)+" is not iterable")}},function(n,a,r){var u=r(34),c=r(32),v=r(62);n.exports=function(f,g,_){var b,O;c(f);try{if(!(b=v(f,"return"))){if(g==="throw")throw _;return _}b=u(b,f)}catch(x){O=!0,b=x}if(g==="throw")throw _;if(O)throw b;return c(b),_}},function(n,a,r){var u=r(30),c=r(33),v=r(102);n.exports=function(f,g,_){var b,O;return v&&u(b=g.constructor)&&b!==_&&c(O=b.prototype)&&O!==_.prototype&&v(f,O),f}},function(n,a,r){var u=r(42);n.exports=function(c,v,f){for(var g in v)u(c,g,v[g],f);return c}},function(n,a,r){var u=r(46),c=r(38),v=r(28),f=r(36),g=v("species");n.exports=function(_){var b=u(_),O=c.f;f&&b&&!b[g]&&O(b,g,{configurable:!0,get:function(){return this}})}},function(n,a,r){var u=r(15),c=r(59),v=r(39),f=r(44),g=u("".charAt),_=u("".charCodeAt),b=u("".slice),O=function(x){return function(M,A){var E,D,j=v(f(M)),U=c(A),F=j.length;return U<0||U>=F?x?"":void 0:(E=_(j,U))<55296||E>56319||U+1===F||(D=_(j,U+1))<56320||D>57343?x?g(j,U):E:x?b(j,U,U+2):D-56320+(E-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,a){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,a,r){var u=r(91)("span").classList,c=u&&u.constructor&&u.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,a,r){var u=r(32);n.exports=function(){var c=u(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,a,r){var u=r(18),c=r(7).RegExp,v=u(function(){var _=c("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),f=v||u(function(){return!c("a","y").sticky}),g=v||u(function(){var _=c("^r","gy");return _.lastIndex=2,_.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:f,UNSUPPORTED_Y:v}},function(n,a,r){var u=r(16),c=r(79).find,v=r(100),f="find",g=!0;f in[]&&Array(1).find(function(){g=!1}),u({target:"Array",proto:!0,forced:g},{find:function(_){return c(this,_,arguments.length>1?arguments[1]:void 0)}}),v(f)},function(n,a,r){var u=r(16),c=r(137).includes,v=r(100);u({target:"Array",proto:!0},{includes:function(f){return c(this,f,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,a,r){var u=r(16),c=r(15),v=r(197),f=r(44),g=r(39),_=r(198),b=c("".indexOf);u({target:"String",proto:!0,forced:!_("includes")},{includes:function(O){return!!~b(g(f(this)),g(v(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,a,r){var u=r(33),c=r(51),v=r(28)("match");n.exports=function(f){var g;return u(f)&&((g=f[v])!==void 0?!!g:c(f)=="RegExp")}},function(n,a,r){var u=r(15);n.exports=u(1 .valueOf)},function(n,a,r){var u=r(15),c=r(44),v=r(39),f=r(162),g=u("".replace),_="["+f+"]",b=RegExp("^"+_+_+"*"),O=RegExp(_+_+"*$"),x=function(M){return function(A){var E=v(c(A));return 1&M&&(E=g(E,b,"")),2&M&&(E=g(E,O,"")),E}};n.exports={start:x(1),end:x(2),trim:x(3)}},function(n,a){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,a){var r,u,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function g(j){if(r===setTimeout)return setTimeout(j,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(j,0);try{return r(j,0)}catch{try{return r.call(null,j,0)}catch{return r.call(this,j,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{u=typeof clearTimeout=="function"?clearTimeout:f}catch{u=f}})();var _,b=[],O=!1,x=-1;function M(){O&&_&&(O=!1,_.length?b=_.concat(b):x=-1,b.length&&A())}function A(){if(!O){var j=g(M);O=!0;for(var U=b.length;U;){for(_=b,b=[];++x<U;)_&&_[x].run();x=-1,U=b.length}_=null,O=!1,function(F){if(u===clearTimeout)return clearTimeout(F);if((u===f||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(F);try{u(F)}catch{try{return u.call(null,F)}catch{return u.call(this,F)}}}(j)}}function E(j,U){this.fun=j,this.array=U}function D(){}c.nextTick=function(j){var U=new Array(arguments.length-1);if(arguments.length>1)for(var F=1;F<arguments.length;F++)U[F-1]=arguments[F];b.push(new E(j,U)),b.length!==1||O||g(A)},E.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=D,c.addListener=D,c.once=D,c.off=D,c.removeListener=D,c.removeAllListeners=D,c.emit=D,c.prependListener=D,c.prependOnceListener=D,c.listeners=function(j){return[]},c.binding=function(j){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(j){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,a,r){var u=r(32),c=r(165),v=r(28)("species");n.exports=function(f,g){var _,b=u(f).constructor;return b===void 0||(_=u(b)[v])==null?g:c(_)}},function(n,a,r){var u=r(7),c=r(99),v=r(88),f=u.TypeError;n.exports=function(g){if(c(g))return g;throw f(v(g)+" is not a constructor")}},function(n,a,r){var u=r(16),c=r(161).trim;u({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,a,r){var u=r(34),c=r(123),v=r(32),f=r(94),g=r(39),_=r(44),b=r(62),O=r(124),x=r(125);c("match",function(M,A,E){return[function(D){var j=_(this),U=D==null?void 0:b(D,M);return U?u(U,D,j):new RegExp(D)[M](g(j))},function(D){var j=v(this),U=g(D),F=E(A,j,U);if(F.done)return F.value;if(!j.global)return x(j,U);var I=j.unicode;j.lastIndex=0;for(var V,Y=[],K=0;(V=x(j,U))!==null;){var H=g(V[0]);Y[K]=H,H===""&&(j.lastIndex=O(U,f(j.lastIndex),I)),K++}return K===0?null:Y}]})},function(n,a,r){var u,c,v,f,g=r(7),_=r(76),b=r(64),O=r(30),x=r(35),M=r(18),A=r(138),E=r(98),D=r(91),j=r(169),U=r(128),F=g.setImmediate,I=g.clearImmediate,V=g.process,Y=g.Dispatch,K=g.Function,H=g.MessageChannel,B=g.String,z=0,X={},ee="onreadystatechange";try{u=g.location}catch{}var pe=function(le){if(x(X,le)){var ie=X[le];delete X[le],ie()}},ce=function(le){return function(){pe(le)}},Pe=function(le){pe(le.data)},Ee=function(le){g.postMessage(B(le),u.protocol+"//"+u.host)};F&&I||(F=function(le){var ie=E(arguments,1);return X[++z]=function(){_(O(le)?le:K(le),void 0,ie)},c(z),z},I=function(le){delete X[le]},U?c=function(le){V.nextTick(ce(le))}:Y&&Y.now?c=function(le){Y.now(ce(le))}:H&&!j?(f=(v=new H).port2,v.port1.onmessage=Pe,c=b(f.postMessage,f)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&u&&u.protocol!=="file:"&&!M(Ee)?(c=Ee,g.addEventListener("message",Pe,!1)):c=ee in D("script")?function(le){A.appendChild(D("script")).onreadystatechange=function(){A.removeChild(this),pe(le)}}:function(le){setTimeout(ce(le),0)}),n.exports={set:F,clear:I}},function(n,a,r){var u=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(u)},function(n,a,r){var u=r(56),c=function(v){var f,g;this.promise=new v(function(_,b){if(f!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");f=_,g=b}),this.resolve=u(f),this.reject=u(g)};n.exports.f=function(v){return new c(v)}},function(n,a,r){a.a=function(){return!1}},function(n,a,r){(function(u){r.d(a,"a",function(){return V});var c=r(1);function v(H){throw new Error("[mobx-utils] "+H)}function f(H,B){B===void 0&&(B="Illegal state"),H||v(B)}var g=function(H){return H&&H!==Object.prototype&&Object.getOwnPropertyNames(H).concat(g(Object.getPrototypeOf(H))||[])},_=function(H){return function(B){var z=g(B);return z.filter(function(X,ee){return z.indexOf(X)===ee})}(H).filter(function(B){return B!=="constructor"&&!~B.indexOf("__")})},b="pending",O="fulfilled",x="rejected";function M(H){switch(this.state){case b:return H.pending&&H.pending(this.value);case x:return H.rejected&&H.rejected(this.value);case O:return H.fulfilled?H.fulfilled(this.value):this.value}}function A(H,B){if(f(arguments.length<=2,"fromPromise expects up to two arguments"),f(typeof H=="function"||typeof H=="object"&&H&&typeof H.then=="function","Please pass a promise or function to fromPromise"),H.isPromiseBasedObservable===!0)return H;typeof H=="function"&&(H=new Promise(H));var z=H;H.then(Object(c.k)("observableFromPromise-resolve",function(ee){z.value=ee,z.state=O}),Object(c.k)("observableFromPromise-reject",function(ee){z.value=ee,z.state=x})),z.isPromiseBasedObservable=!0,z.case=M;var X=B&&B.state===O?B.value:void 0;return Object(c.q)(z,{value:X,state:b},{},{deep:!1}),z}(function(H){H.reject=Object(c.k)("fromPromise.reject",function(B){var z=H(Promise.reject(B));return z.state=x,z.value=B,z}),H.resolve=Object(c.k)("fromPromise.resolve",function(B){B===void 0&&(B=void 0);var z=H(Promise.resolve(B));return z.state=O,z.value=B,z})})(A||(A={}));var E=function(H,B,z,X){var ee,pe=arguments.length,ce=pe<3?B:X===null?X=Object.getOwnPropertyDescriptor(B,z):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(H,B,z,X);else for(var Pe=H.length-1;Pe>=0;Pe--)(ee=H[Pe])&&(ce=(pe<3?ee(ce):pe>3?ee(B,z,ce):ee(B,z))||ce);return pe>3&&ce&&Object.defineProperty(B,z,ce),ce};(function(){function H(B,z){var X=this;Object(c.G)(function(){X.current=z,X.subscription=B.subscribe(X)})}H.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},H.prototype.next=function(B){this.current=B},H.prototype.complete=function(){this.dispose()},H.prototype.error=function(B){this.current=B,this.dispose()},E([c.C.ref],H.prototype,"current",void 0),E([c.k.bound],H.prototype,"next",null),E([c.k.bound],H.prototype,"complete",null),E([c.k.bound],H.prototype,"error",null)})();var D=function(){return D=Object.assign||function(H){for(var B,z=1,X=arguments.length;z<X;z++)for(var ee in B=arguments[z])Object.prototype.hasOwnProperty.call(B,ee)&&(H[ee]=B[ee]);return H},D.apply(this,arguments)},j=function(H,B,z,X){var ee,pe=arguments.length,ce=pe<3?B:X===null?X=Object.getOwnPropertyDescriptor(B,z):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(H,B,z,X);else for(var Pe=H.length-1;Pe>=0;Pe--)(ee=H[Pe])&&(ce=(pe<3?ee(ce):pe>3?ee(B,z,ce):ee(B,z))||ce);return pe>3&&ce&&Object.defineProperty(B,z,ce),ce},U=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function H(B){var z=this;this.model=B,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(X){return z.localValues.has(X)},f(Object(c.A)(B),"createViewModel expects an observable object"),_(B).forEach(function(X){if(X!==c.a&&X!=="__mobxDidRunLazyInitializers"){if(f(U.indexOf(X)===-1,"The propertyname "+X+" is reserved and cannot be used with viewModels"),Object(c.w)(B,X)){var ee=Object(c.h)(B,X).derivation;z.localComputedValues.set(X,Object(c.m)(ee.bind(z)))}var pe=Object.getOwnPropertyDescriptor(B,X),ce=pe?{enumerable:pe.enumerable}:{};Object.defineProperty(z,X,D(D({},ce),{configurable:!0,get:function(){return Object(c.w)(B,X)?z.localComputedValues.get(X).get():z.isPropertyDirty(X)?z.localValues.get(X):z.model[X]},set:Object(c.k)(function(Pe){Pe!==z.model[X]?z.localValues.set(X,Pe):z.localValues.delete(X)})}))}})}Object.defineProperty(H.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),H.prototype.submit=function(){var B=this;Object(c.B)(this.localValues).forEach(function(z){var X=B.localValues.get(z),ee=B.model[z];Object(c.y)(ee)?ee.replace(X):Object(c.z)(ee)?(ee.clear(),ee.merge(X)):Object(c.v)(X)||(B.model[z]=X)}),this.localValues.clear()},H.prototype.reset=function(){this.localValues.clear()},H.prototype.resetProperty=function(B){this.localValues.delete(B)},j([c.m],H.prototype,"isDirty",null),j([c.m],H.prototype,"changedValues",null),j([c.k.bound],H.prototype,"submit",null),j([c.k.bound],H.prototype,"reset",null),j([c.k.bound],H.prototype,"resetProperty",null)})();function F(H){if(!H)return"ROOT";for(var B=[];H.parent;)B.push(H.path),H=H.parent;return B.reverse().join("/")}function I(H){return Object(c.A)(H)||Object(c.y)(H)||Object(c.z)(H)}function V(H,B){var z=new WeakMap;function X(ce){var Pe=z.get(ce.object);(function(Ee,le){switch(Ee.type){case"add":ee(Ee.newValue,le,Ee.name);break;case"update":pe(Ee.oldValue),ee(Ee.newValue,le,Ee.name||""+Ee.index);break;case"remove":case"delete":pe(Ee.oldValue);break;case"splice":Ee.removed.map(pe),Ee.added.forEach(function(Ge,ht){return ee(Ge,le,""+(Ee.index+ht))});for(var ie=Ee.index+Ee.addedCount;ie<Ee.object.length;ie++)if(I(Ee.object[ie])){var $e=z.get(Ee.object[ie]);$e&&($e.path=""+ie)}}})(ce,Pe),B(ce,F(Pe),H)}function ee(ce,Pe,Ee){if(I(ce)){var le=z.get(ce);if(le){if(le.parent!==Pe||le.path!==Ee)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+F(Pe)+"/"+Ee+"', but it already exists at '"+F(le.parent)+"/"+le.path+"'")}else{var ie={parent:Pe,path:Ee,dispose:Object(c.D)(ce,X)};z.set(ce,ie),Object(c.p)(ce).forEach(function($e){var Ge=$e[0];return ee($e[1],ie,Ge)})}}}function pe(ce){if(I(ce)){var Pe=z.get(ce);if(!Pe)return;z.delete(ce),Pe.dispose(),Object(c.L)(ce).forEach(pe)}}return ee(H,void 0,""),function(){pe(H)}}var Y,K=(Y=function(H,B){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,X){z.__proto__=X}||function(z,X){for(var ee in X)X.hasOwnProperty(ee)&&(z[ee]=X[ee])},Y(H,B)},function(H,B){function z(){this.constructor=H}Y(H,B),H.prototype=B===null?Object.create(B):(z.prototype=B.prototype,new z)});(function(H){function B(z,X,ee){var pe=ee===void 0?{}:ee,ce=pe.name,Pe=ce===void 0?"ogm"+(1e3*Math.random()|0):ce,Ee=pe.keyToName,le=Ee===void 0?function(Ge){return""+Ge}:Ee,ie=H.call(this)||this;ie._keyToName=le,ie._groupBy=X,ie._ogmInfoKey=Symbol("ogmInfo"+Pe),ie._base=z;for(var $e=0;$e<z.length;$e++)ie._addItem(z[$e]);return ie._disposeBaseObserver=Object(c.D)(ie._base,function(Ge){if(Ge.type==="splice")Object(c.J)(function(){for(var ht=0,Fe=Ge.removed;ht<Fe.length;ht++){var Nt=Fe[ht];ie._removeItem(Nt)}for(var Yt=0,kt=Ge.added;Yt<kt.length;Yt++){var On=kt[Yt];ie._addItem(On)}});else{if(Ge.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ie._removeItem(Ge.oldValue),ie._addItem(Ge.newValue)})}}),ie}K(B,H),B.prototype.clear=function(){throw new Error("not supported")},B.prototype.delete=function(z){throw new Error("not supported")},B.prototype.set=function(z,X){throw new Error("not supported")},B.prototype.dispose=function(){this._disposeBaseObserver();for(var z=0;z<this._base.length;z++){var X=this._base[z];X[this._ogmInfoKey].reaction(),delete X[this._ogmInfoKey]}},B.prototype._getGroupArr=function(z){var X=H.prototype.get.call(this,z);return X===void 0&&(X=Object(c.C)([],{name:"GroupArray["+this._keyToName(z)+"]",deep:!1}),H.prototype.set.call(this,z,X)),X},B.prototype._removeFromGroupArr=function(z,X){var ee=H.prototype.get.call(this,z);ee.length===1?H.prototype.delete.call(this,z):(X===ee.length-1||(ee[X]=ee[ee.length-1],ee[X][this._ogmInfoKey].groupArrIndex=X),ee.length--)},B.prototype._addItem=function(z){var X=this,ee=this._groupBy(z),pe=this._getGroupArr(ee),ce={groupByValue:ee,groupArrIndex:pe.length,reaction:Object(c.F)(function(){return X._groupBy(z)},function(Pe,Ee){var le=z[X._ogmInfoKey];X._removeFromGroupArr(le.groupByValue,le.groupArrIndex);var ie=X._getGroupArr(Pe),$e=ie.length;ie.push(z),le.groupByValue=Pe,le.groupArrIndex=$e})};Object.defineProperty(z,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ce}),pe.push(z)},B.prototype._removeItem=function(z){var X=z[this._ogmInfoKey];this._removeFromGroupArr(X.groupByValue,X.groupArrIndex),X.reaction(),delete z[this._ogmInfoKey]}})(c.b),function(){function H(B,z){this.base=B,this.args=z,this.closestIdx=0,this.isDisposed=!1;for(var X=this.closest=this.root=B,ee=0;ee<this.args.length-1&&(X=X.get(z[ee]));ee++)this.closest=X;this.closestIdx=ee}return H.prototype.exists=function(){this.assertNotDisposed();var B=this.args.length;return this.closestIdx>=B-1&&this.closest.has(this.args[B-1])},H.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},H.prototype.set=function(B){this.assertNotDisposed();for(var z=this.args.length,X=this.closest,ee=this.closestIdx;ee<z-1;ee++){var pe=new Map;X.set(this.args[ee],pe),X=pe}this.closestIdx=z-1,this.closest=X,X.set(this.args[z-1],B)},H.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var B=this.args.length;this.closest.delete(this.args[B-1]);for(var z=this.root,X=[z],ee=0;ee<B-1;ee++)z=z.get(this.args[ee]),X.push(z);for(ee=X.length-1;ee>0;ee--)X[ee].size===0&&X[ee-1].delete(this.args[ee-1]);this.isDisposed=!0},H.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},H}(),Promise.resolve(),typeof queueMicrotask<"u"||u!==void 0&&u.nextTick}).call(this,r(163))},function(n,a,r){var u;(function(c,v,f){if(c){for(var g,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M=1;M<20;++M)_[111+M]="f"+M;for(M=0;M<=9;++M)_[M+96]=M.toString();I.prototype.bind=function(V,Y,K){var H=this;return V=V instanceof Array?V:[V],H._bindMultiple.call(H,V,Y,K),H},I.prototype.unbind=function(V,Y){return this.bind.call(this,V,function(){},Y)},I.prototype.trigger=function(V,Y){var K=this;return K._directMap[V+":"+Y]&&K._directMap[V+":"+Y]({},V),K},I.prototype.reset=function(){var V=this;return V._callbacks={},V._directMap={},V},I.prototype.stopCallback=function(V,Y){if((" "+Y.className+" ").indexOf(" mousetrap ")>-1||F(Y,this.target))return!1;if("composedPath"in V&&typeof V.composedPath=="function"){var K=V.composedPath()[0];K!==V.target&&(Y=K)}return Y.tagName=="INPUT"||Y.tagName=="SELECT"||Y.tagName=="TEXTAREA"||Y.isContentEditable},I.prototype.handleKey=function(){var V=this;return V._handleKey.apply(V,arguments)},I.addKeycodes=function(V){for(var Y in V)V.hasOwnProperty(Y)&&(_[Y]=V[Y]);g=null},I.init=function(){var V=I(v);for(var Y in V)Y.charAt(0)!=="_"&&(I[Y]=function(K){return function(){return V[K].apply(V,arguments)}}(Y))},I.init(),c.Mousetrap=I,n.exports&&(n.exports=I),(u=(function(){return I}).call(a,r,a,n))===void 0||(n.exports=u)}function A(V,Y,K){V.addEventListener?V.addEventListener(Y,K,!1):V.attachEvent("on"+Y,K)}function E(V){if(V.type=="keypress"){var Y=String.fromCharCode(V.which);return V.shiftKey||(Y=Y.toLowerCase()),Y}return _[V.which]?_[V.which]:b[V.which]?b[V.which]:String.fromCharCode(V.which).toLowerCase()}function D(V){return V=="shift"||V=="ctrl"||V=="alt"||V=="meta"}function j(V,Y,K){return K||(K=function(){if(!g)for(var H in g={},_)H>95&&H<112||_.hasOwnProperty(H)&&(g[_[H]]=H);return g}()[V]?"keydown":"keypress"),K=="keypress"&&Y.length&&(K="keydown"),K}function U(V,Y){var K,H,B,z=[];for(K=function(X){return X==="+"?["+"]:(X=X.replace(/\+{2}/g,"+plus")).split("+")}(V),B=0;B<K.length;++B)H=K[B],x[H]&&(H=x[H]),Y&&Y!="keypress"&&O[H]&&(H=O[H],z.push("shift")),D(H)&&z.push(H);return{key:H,modifiers:z,action:Y=j(H,z,Y)}}function F(V,Y){return V!==null&&V!==v&&(V===Y||F(V.parentNode,Y))}function I(V){var Y=this;if(V=V||v,!(Y instanceof I))return new I(V);Y.target=V,Y._callbacks={},Y._directMap={};var K,H={},B=!1,z=!1,X=!1;function ee(ie){ie=ie||{};var $e,Ge=!1;for($e in H)ie[$e]?Ge=!0:H[$e]=0;Ge||(X=!1)}function pe(ie,$e,Ge,ht,Fe,Nt){var Yt,kt,On,Be,Se=[],Ce=Ge.type;if(!Y._callbacks[ie])return[];for(Ce=="keyup"&&D(ie)&&($e=[ie]),Yt=0;Yt<Y._callbacks[ie].length;++Yt)if(kt=Y._callbacks[ie][Yt],(ht||!kt.seq||H[kt.seq]==kt.level)&&Ce==kt.action&&(Ce=="keypress"&&!Ge.metaKey&&!Ge.ctrlKey||(On=$e,Be=kt.modifiers,On.sort().join(",")===Be.sort().join(",")))){var Ye=!ht&&kt.combo==Fe,bt=ht&&kt.seq==ht&&kt.level==Nt;(Ye||bt)&&Y._callbacks[ie].splice(Yt,1),Se.push(kt)}return Se}function ce(ie,$e,Ge,ht){Y.stopCallback($e,$e.target||$e.srcElement,Ge,ht)||ie($e,Ge)===!1&&(function(Fe){Fe.preventDefault?Fe.preventDefault():Fe.returnValue=!1}($e),function(Fe){Fe.stopPropagation?Fe.stopPropagation():Fe.cancelBubble=!0}($e))}function Pe(ie){typeof ie.which!="number"&&(ie.which=ie.keyCode);var $e=E(ie);$e&&(ie.type!="keyup"||B!==$e?Y.handleKey($e,function(Ge){var ht=[];return Ge.shiftKey&&ht.push("shift"),Ge.altKey&&ht.push("alt"),Ge.ctrlKey&&ht.push("ctrl"),Ge.metaKey&&ht.push("meta"),ht}(ie),ie):B=!1)}function Ee(ie,$e,Ge,ht){function Fe(On){return function(){X=On,++H[ie],clearTimeout(K),K=setTimeout(ee,1e3)}}function Nt(On){ce(Ge,On,ie),ht!=="keyup"&&(B=E(On)),setTimeout(ee,10)}H[ie]=0;for(var Yt=0;Yt<$e.length;++Yt){var kt=Yt+1===$e.length?Nt:Fe(ht||U($e[Yt+1]).action);le($e[Yt],kt,ht,ie,Yt)}}function le(ie,$e,Ge,ht,Fe){Y._directMap[ie+":"+Ge]=$e;var Nt,Yt=(ie=ie.replace(/\s+/g," ")).split(" ");Yt.length>1?Ee(ie,Yt,$e,Ge):(Nt=U(ie,Ge),Y._callbacks[Nt.key]=Y._callbacks[Nt.key]||[],pe(Nt.key,Nt.modifiers,{type:Nt.action},ht,ie,Fe),Y._callbacks[Nt.key][ht?"unshift":"push"]({callback:$e,modifiers:Nt.modifiers,action:Nt.action,seq:ht,level:Fe,combo:ie}))}Y._handleKey=function(ie,$e,Ge){var ht,Fe=pe(ie,$e,Ge),Nt={},Yt=0,kt=!1;for(ht=0;ht<Fe.length;++ht)Fe[ht].seq&&(Yt=Math.max(Yt,Fe[ht].level));for(ht=0;ht<Fe.length;++ht)if(Fe[ht].seq){if(Fe[ht].level!=Yt)continue;kt=!0,Nt[Fe[ht].seq]=1,ce(Fe[ht].callback,Ge,Fe[ht].combo,Fe[ht].seq)}else kt||ce(Fe[ht].callback,Ge,Fe[ht].combo);var On=Ge.type=="keypress"&&z;Ge.type!=X||D(ie)||On||ee(Nt),z=kt&&Ge.type=="keydown"},Y._bindMultiple=function(ie,$e,Ge){for(var ht=0;ht<ie.length;++ht)le(ie[ht],$e,Ge)},A(V,"keypress",Pe),A(V,"keydown",Pe),A(V,"keyup",Pe)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,a,r){var u=r(7),c=r(34),v=r(30),f=r(33),g=u.TypeError;n.exports=function(_,b){var O,x;if(b==="string"&&v(O=_.toString)&&!f(x=c(O,_))||v(O=_.valueOf)&&!f(x=c(O,_))||b!=="string"&&v(O=_.toString)&&!f(x=c(O,_)))return x;throw g("Can't convert object to primitive value")}},function(n,a,r){var u=r(7),c=r(30),v=r(92),f=u.WeakMap;n.exports=c(f)&&/native code/.test(v(f))},function(n,a,r){var u=r(36),c=r(38),v=r(32),f=r(41),g=r(77);n.exports=u?Object.defineProperties:function(_,b){v(_);for(var O,x=f(b),M=g(b),A=M.length,E=0;A>E;)c.f(_,O=M[E++],x[O]);return _}},function(n,a,r){var u=r(7);n.exports=u},function(n,a,r){var u=r(7),c=r(96),v=r(99),f=r(33),g=r(28)("species"),_=u.Array;n.exports=function(b){var O;return c(b)&&(O=b.constructor,(v(O)&&(O===_||c(O.prototype))||f(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?_:O}},function(n,a,r){var u=r(113),c=r(97);n.exports=u?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,a,r){var u=r(142).IteratorPrototype,c=r(60),v=r(69),f=r(78),g=r(80),_=function(){return this};n.exports=function(b,O,x,M){var A=O+" Iterator";return b.prototype=c(u,{next:v(+!M,x)}),f(b,A,!1,!0),g[A]=_,b}},function(n,a,r){var u=r(7),c=r(30),v=u.String,f=u.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw f("Can't set "+v(g)+" as a prototype")}},function(n,a,r){var u=r(16),c=r(7),v=r(15),f=r(95),g=r(42),_=r(144),b=r(117),O=r(119),x=r(30),M=r(33),A=r(18),E=r(120),D=r(78),j=r(148);n.exports=function(U,F,I){var V=U.indexOf("Map")!==-1,Y=U.indexOf("Weak")!==-1,K=V?"set":"add",H=c[U],B=H&&H.prototype,z=H,X={},ee=function(ie){var $e=v(B[ie]);g(B,ie,ie=="add"?function(Ge){return $e(this,Ge===0?0:Ge),this}:ie=="delete"?function(Ge){return!(Y&&!M(Ge))&&$e(this,Ge===0?0:Ge)}:ie=="get"?function(Ge){return Y&&!M(Ge)?void 0:$e(this,Ge===0?0:Ge)}:ie=="has"?function(Ge){return!(Y&&!M(Ge))&&$e(this,Ge===0?0:Ge)}:function(Ge,ht){return $e(this,Ge===0?0:Ge,ht),this})};if(f(U,!x(H)||!(Y||B.forEach&&!A(function(){new H().entries().next()}))))z=I.getConstructor(F,U,V,K),_.enable();else if(f(U,!0)){var pe=new z,ce=pe[K](Y?{}:-0,1)!=pe,Pe=A(function(){pe.has(1)}),Ee=E(function(ie){new H(ie)}),le=!Y&&A(function(){for(var ie=new H,$e=5;$e--;)ie[K]($e,$e);return!ie.has(-0)});Ee||((z=F(function(ie,$e){O(ie,B);var Ge=j(new H,ie,z);return $e!=null&&b($e,Ge[K],{that:Ge,AS_ENTRIES:V}),Ge})).prototype=B,B.constructor=z),(Pe||le)&&(ee("delete"),ee("has"),V&&ee("get")),(le||ce)&&ee(K),Y&&B.clear&&delete B.clear}return X[U]=z,u({global:!0,forced:z!=H},X),D(z,U),Y||I.setStrong(z,U,V),z}},function(n,a,r){var u=r(18),c=r(33),v=r(51),f=r(184),g=Object.isExtensible,_=u(function(){});n.exports=_||f?function(b){return!!c(b)&&(!f||v(b)!="ArrayBuffer")&&(!g||g(b))}:g},function(n,a,r){var u=r(18);n.exports=u(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,a,r){var u=r(18);n.exports=!u(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,a,r){var u=r(38).f,c=r(60),v=r(149),f=r(64),g=r(119),_=r(117),b=r(116),O=r(150),x=r(36),M=r(144).fastKey,A=r(58),E=A.set,D=A.getterFor;n.exports={getConstructor:function(j,U,F,I){var V=j(function(z,X){g(z,Y),E(z,{type:U,index:c(null),first:void 0,last:void 0,size:0}),x||(z.size=0),X!=null&&_(X,z[I],{that:z,AS_ENTRIES:F})}),Y=V.prototype,K=D(U),H=function(z,X,ee){var pe,ce,Pe=K(z),Ee=B(z,X);return Ee?Ee.value=ee:(Pe.last=Ee={index:ce=M(X,!0),key:X,value:ee,previous:pe=Pe.last,next:void 0,removed:!1},Pe.first||(Pe.first=Ee),pe&&(pe.next=Ee),x?Pe.size++:z.size++,ce!=="F"&&(Pe.index[ce]=Ee)),z},B=function(z,X){var ee,pe=K(z),ce=M(X);if(ce!=="F")return pe.index[ce];for(ee=pe.first;ee;ee=ee.next)if(ee.key==X)return ee};return v(Y,{clear:function(){for(var z=K(this),X=z.index,ee=z.first;ee;)ee.removed=!0,ee.previous&&(ee.previous=ee.previous.next=void 0),delete X[ee.index],ee=ee.next;z.first=z.last=void 0,x?z.size=0:this.size=0},delete:function(z){var X=this,ee=K(X),pe=B(X,z);if(pe){var ce=pe.next,Pe=pe.previous;delete ee.index[pe.index],pe.removed=!0,Pe&&(Pe.next=ce),ce&&(ce.previous=Pe),ee.first==pe&&(ee.first=ce),ee.last==pe&&(ee.last=Pe),x?ee.size--:X.size--}return!!pe},forEach:function(z){for(var X,ee=K(this),pe=f(z,arguments.length>1?arguments[1]:void 0);X=X?X.next:ee.first;)for(pe(X.value,X.key,this);X&&X.removed;)X=X.previous},has:function(z){return!!B(this,z)}}),v(Y,F?{get:function(z){var X=B(this,z);return X&&X.value},set:function(z,X){return H(this,z===0?0:z,X)}}:{add:function(z){return H(this,z=z===0?0:z,z)}}),x&&u(Y,"size",{get:function(){return K(this).size}}),V},setStrong:function(j,U,F){var I=U+" Iterator",V=D(U),Y=D(I);b(j,U,function(K,H){E(this,{type:I,target:K,state:V(K),kind:H,last:void 0})},function(){for(var K=Y(this),H=K.kind,B=K.last;B&&B.removed;)B=B.previous;return K.target&&(K.last=B=B?B.next:K.state.first)?H=="keys"?{value:B.key,done:!1}:H=="values"?{value:B.value,done:!1}:{value:[B.key,B.value],done:!1}:(K.target=void 0,{value:void 0,done:!0})},F?"entries":"values",!F,!0),O(U)}}},function(n,a,r){var u=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return u(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,a,r){var u=r(7),c=r(64),v=r(34),f=r(40),g=r(189),_=r(145),b=r(99),O=r(45),x=r(63),M=r(146),A=r(118),E=u.Array;n.exports=function(D){var j=f(D),U=b(this),F=arguments.length,I=F>1?arguments[1]:void 0,V=I!==void 0;V&&(I=c(I,F>2?arguments[2]:void 0));var Y,K,H,B,z,X,ee=A(j),pe=0;if(!ee||this==E&&_(ee))for(Y=O(j),K=U?new this(Y):E(Y);Y>pe;pe++)X=V?I(j[pe],pe):j[pe],x(K,pe,X);else for(z=(B=M(j,ee)).next,K=U?new this:[];!(H=v(z,B)).done;pe++)X=V?g(B,I,[H.value,pe],!0):H.value,x(K,pe,X);return K.length=pe,K}},function(n,a,r){var u=r(32),c=r(147);n.exports=function(v,f,g,_){try{return _?f(u(g)[0],g[1]):f(g)}catch(b){c(v,"throw",b)}}},function(n,a,r){var u=r(18),c=r(7).RegExp;n.exports=u(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,a,r){var u=r(18),c=r(7).RegExp;n.exports=u(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,a,r){var u=r(16),c=r(15),v=r(56),f=r(40),g=r(45),_=r(39),b=r(18),O=r(193),x=r(121),M=r(194),A=r(195),E=r(70),D=r(196),j=[],U=c(j.sort),F=c(j.push),I=b(function(){j.sort(void 0)}),V=b(function(){j.sort(null)}),Y=x("sort"),K=!b(function(){if(E)return E<70;if(!(M&&M>3)){if(A)return!0;if(D)return D<603;var H,B,z,X,ee="";for(H=65;H<76;H++){switch(B=String.fromCharCode(H),H){case 66:case 69:case 70:case 72:z=3;break;case 68:case 71:z=4;break;default:z=2}for(X=0;X<47;X++)j.push({k:B+X,v:z})}for(j.sort(function(pe,ce){return ce.v-pe.v}),X=0;X<j.length;X++)B=j[X].k.charAt(0),ee.charAt(ee.length-1)!==B&&(ee+=B);return ee!=="DGBEFHACIJK"}});u({target:"Array",proto:!0,forced:I||!V||!Y||!K},{sort:function(H){H!==void 0&&v(H);var B=f(this);if(K)return H===void 0?U(B):U(B,H);var z,X,ee=[],pe=g(B);for(X=0;X<pe;X++)X in B&&F(ee,B[X]);for(O(ee,function(ce){return function(Pe,Ee){return Ee===void 0?-1:Pe===void 0?1:ce!==void 0?+ce(Pe,Ee)||0:_(Pe)>_(Ee)?1:-1}}(H)),z=ee.length,X=0;X<z;)B[X]=ee[X++];for(;X<pe;)delete B[X++];return B}})},function(n,a,r){var u=r(114),c=Math.floor,v=function(_,b){var O=_.length,x=c(O/2);return O<8?f(_,b):g(_,v(u(_,0,x),b),v(u(_,x),b),b)},f=function(_,b){for(var O,x,M=_.length,A=1;A<M;){for(x=A,O=_[A];x&&b(_[x-1],O)>0;)_[x]=_[--x];x!==A++&&(_[x]=O)}return _},g=function(_,b,O,x){for(var M=b.length,A=O.length,E=0,D=0;E<M||D<A;)_[E+D]=E<M&&D<A?x(b[E],O[D])<=0?b[E++]:O[D++]:E<M?b[E++]:O[D++];return _};n.exports=v},function(n,a,r){var u=r(55).match(/firefox\/(\d+)/i);n.exports=!!u&&+u[1]},function(n,a,r){var u=r(55);n.exports=/MSIE|Trident/.test(u)},function(n,a,r){var u=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!u&&+u[1]},function(n,a,r){var u=r(7),c=r(159),v=u.TypeError;n.exports=function(f){if(c(f))throw v("The method doesn't accept regular expressions");return f}},function(n,a,r){var u=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[u]=!1,"/./"[c](v)}catch{}}return!1}},function(n,a,r){r(16)({target:"Number",stat:!0},{isNaN:function(u){return u!=u}})},function(n,a,r){var u=r(73).PROPER,c=r(18),v=r(162);n.exports=function(f){return c(function(){return!!v[f]()||"​᠎"[f]()!=="​᠎"||u&&v[f].name!==f})}},function(n,a,r){var u=r(15),c=r(40),v=Math.floor,f=u("".charAt),g=u("".replace),_=u("".slice),b=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(x,M,A,E,D,j){var U=A+x.length,F=E.length,I=O;return D!==void 0&&(D=c(D),I=b),g(j,I,function(V,Y){var K;switch(f(Y,0)){case"$":return"$";case"&":return x;case"`":return _(M,0,A);case"'":return _(M,U);case"<":K=D[_(Y,1,-1)];break;default:var H=+Y;if(H===0)return V;if(H>F){var B=v(H/10);return B===0?V:B<=F?E[B-1]===void 0?f(Y,1):E[B-1]+f(Y,1):V}K=E[H-1]}return K===void 0?"":K})}},function(n,a,r){var u=r(36),c=r(15),v=r(34),f=r(18),g=r(77),_=r(112),b=r(84),O=r(40),x=r(85),M=Object.assign,A=Object.defineProperty,E=c([].concat);n.exports=!M||f(function(){if(u&&M({b:1},M(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},j={},U=Symbol(),F="abcdefghijklmnopqrst";return D[U]=7,F.split("").forEach(function(I){j[I]=I}),M({},D)[U]!=7||g(M({},j)).join("")!=F})?function(D,j){for(var U=O(D),F=arguments.length,I=1,V=_.f,Y=b.f;F>I;)for(var K,H=x(arguments[I++]),B=V?E(g(H),V(H)):g(H),z=B.length,X=0;z>X;)K=B[X++],u&&!v(Y,H,K)||(U[K]=H[K]);return U}:M},function(n,a,r){var u=r(7),c=r(15),v=r(56),f=r(33),g=r(35),_=r(98),b=u.Function,O=c([].concat),x=c([].join),M={},A=function(E,D,j){if(!g(M,D)){for(var U=[],F=0;F<D;F++)U[F]="a["+F+"]";M[D]=b("C,a","return new C("+x(U,",")+")")}return M[D](E,j)};n.exports=b.bind||function(E){var D=v(this),j=D.prototype,U=_(arguments,1),F=function(){var I=O(U,_(arguments));return this instanceof F?A(D,I.length,I):D.apply(E,I)};return f(j)&&(F.prototype=j),F}},function(n,a,r){var u=r(35);n.exports=function(c){return c!==void 0&&(u(c,"value")||u(c,"writable"))}},function(n,a,r){var u=r(15),c=r(44),v=r(39),f=/"/g,g=u("".replace);n.exports=function(_,b,O,x){var M=v(c(_)),A="<"+b;return O!==""&&(A+=" "+O+'="'+g(v(x),f,"&quot;")+'"'),A+">"+M+"</"+b+">"}},function(n,a,r){var u=r(18);n.exports=function(c){return u(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,a,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,a,r){var u,c,v,f,g=r(16),_=r(71),b=r(7),O=r(46),x=r(34),M=r(209),A=r(42),E=r(149),D=r(102),j=r(78),U=r(150),F=r(56),I=r(30),V=r(33),Y=r(119),K=r(92),H=r(117),B=r(120),z=r(164),X=r(168).set,ee=r(210),pe=r(213),ce=r(214),Pe=r(170),Ee=r(215),le=r(58),ie=r(95),$e=r(28),Ge=r(216),ht=r(128),Fe=r(70),Nt=$e("species"),Yt="Promise",kt=le.getterFor(Yt),On=le.set,Be=le.getterFor(Yt),Se=M&&M.prototype,Ce=M,Ye=Se,bt=b.TypeError,vt=b.document,Wt=b.process,Qt=Pe.f,Gt=Qt,Kt=!!(vt&&vt.createEvent&&b.dispatchEvent),rt=I(b.PromiseRejectionEvent),cn="unhandledrejection",We=!1,dn=ie(Yt,function(){var je=K(Ce),st=je!==String(Ce);if(!st&&Fe===66||_&&!Ye.finally)return!0;if(Fe>=51&&/native code/.test(je))return!1;var on=new Ce(function(Rn){Rn(1)}),Jt=function(Rn){Rn(function(){},function(){})};return(on.constructor={})[Nt]=Jt,!(We=on.then(function(){})instanceof Jt)||!st&&Ge&&!rt}),er=dn||!B(function(je){Ce.all(je).catch(function(){})}),ae=function(je){var st;return!(!V(je)||!I(st=je.then))&&st},tr=function(je,st){if(!je.notified){je.notified=!0;var on=je.reactions;ee(function(){for(var Jt=je.value,Rn=je.state==1,Or=0;on.length>Or;){var ui,Si,Yo,ti=on[Or++],Mn=Rn?ti.ok:ti.fail,$n=ti.resolve,Hn=ti.reject,lr=ti.domain;try{Mn?(Rn||(je.rejection===2&&Un(je),je.rejection=1),Mn===!0?ui=Jt:(lr&&lr.enter(),ui=Mn(Jt),lr&&(lr.exit(),Yo=!0)),ui===ti.promise?Hn(bt("Promise-chain cycle")):(Si=ae(ui))?x(Si,ui,$n,Hn):$n(ui)):Hn(Jt)}catch(to){lr&&!Yo&&lr.exit(),Hn(to)}}je.reactions=[],je.notified=!1,st&&!je.rejection&&Xr(je)})}},Pr=function(je,st,on){var Jt,Rn;Kt?((Jt=vt.createEvent("Event")).promise=st,Jt.reason=on,Jt.initEvent(je,!1,!0),b.dispatchEvent(Jt)):Jt={promise:st,reason:on},!rt&&(Rn=b["on"+je])?Rn(Jt):je===cn&&ce("Unhandled promise rejection",on)},Xr=function(je){x(X,b,function(){var st,on=je.facade,Jt=je.value;if(ao(je)&&(st=Ee(function(){ht?Wt.emit("unhandledRejection",Jt,on):Pr(cn,on,Jt)}),je.rejection=ht||ao(je)?2:1,st.error))throw st.value})},ao=function(je){return je.rejection!==1&&!je.parent},Un=function(je){x(X,b,function(){var st=je.facade;ht?Wt.emit("rejectionHandled",st):Pr("rejectionhandled",st,je.value)})},bo=function(je,st,on){return function(Jt){je(st,Jt,on)}},Ae=function(je,st,on){je.done||(je.done=!0,on&&(je=on),je.value=st,je.state=2,tr(je,!0))},Qe=function(je,st,on){if(!je.done){je.done=!0,on&&(je=on);try{if(je.facade===st)throw bt("Promise can't be resolved itself");var Jt=ae(st);Jt?ee(function(){var Rn={done:!1};try{x(Jt,st,bo(Qe,Rn,je),bo(Ae,Rn,je))}catch(Or){Ae(Rn,Or,je)}}):(je.value=st,je.state=1,tr(je,!1))}catch(Rn){Ae({done:!1},Rn,je)}}};if(dn&&(Ye=(Ce=function(je){Y(this,Ye),F(je),x(u,this);var st=kt(this);try{je(bo(Qe,st),bo(Ae,st))}catch(on){Ae(st,on)}}).prototype,(u=function(je){On(this,{type:Yt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=E(Ye,{then:function(je,st){var on=Be(this),Jt=on.reactions,Rn=Qt(z(this,Ce));return Rn.ok=!I(je)||je,Rn.fail=I(st)&&st,Rn.domain=ht?Wt.domain:void 0,on.parent=!0,Jt[Jt.length]=Rn,on.state!=0&&tr(on,!1),Rn.promise},catch:function(je){return this.then(void 0,je)}}),c=function(){var je=new u,st=kt(je);this.promise=je,this.resolve=bo(Qe,st),this.reject=bo(Ae,st)},Pe.f=Qt=function(je){return je===Ce||je===v?new c(je):Gt(je)},!_&&I(M)&&Se!==Object.prototype)){f=Se.then,We||(A(Se,"then",function(je,st){var on=this;return new Ce(function(Jt,Rn){x(f,on,Jt,Rn)}).then(je,st)},{unsafe:!0}),A(Se,"catch",Ye.catch,{unsafe:!0}));try{delete Se.constructor}catch{}D&&D(Se,Ye)}g({global:!0,wrap:!0,forced:dn},{Promise:Ce}),j(Ce,Yt,!1,!0),U(Yt),v=O(Yt),g({target:Yt,stat:!0,forced:dn},{reject:function(je){var st=Qt(this);return x(st.reject,void 0,je),st.promise}}),g({target:Yt,stat:!0,forced:_||dn},{resolve:function(je){return pe(_&&this===v?Ce:this,je)}}),g({target:Yt,stat:!0,forced:er},{all:function(je){var st=this,on=Qt(st),Jt=on.resolve,Rn=on.reject,Or=Ee(function(){var ui=F(st.resolve),Si=[],Yo=0,ti=1;H(je,function(Mn){var $n=Yo++,Hn=!1;ti++,x(ui,st,Mn).then(function(lr){Hn||(Hn=!0,Si[$n]=lr,--ti||Jt(Si))},Rn)}),--ti||Jt(Si)});return Or.error&&Rn(Or.value),on.promise},race:function(je){var st=this,on=Qt(st),Jt=on.reject,Rn=Ee(function(){var Or=F(st.resolve);H(je,function(ui){x(Or,st,ui).then(on.resolve,Jt)})});return Rn.error&&Jt(Rn.value),on.promise}})},function(n,a,r){var u=r(7);n.exports=u.Promise},function(n,a,r){var u,c,v,f,g,_,b,O,x=r(7),M=r(64),A=r(50).f,E=r(168).set,D=r(169),j=r(211),U=r(212),F=r(128),I=x.MutationObserver||x.WebKitMutationObserver,V=x.document,Y=x.process,K=x.Promise,H=A(x,"queueMicrotask"),B=H&&H.value;B||(u=function(){var z,X;for(F&&(z=Y.domain)&&z.exit();c;){X=c.fn,c=c.next;try{X()}catch(ee){throw c?f():v=void 0,ee}}v=void 0,z&&z.enter()},D||F||U||!I||!V?!j&&K&&K.resolve?((b=K.resolve(void 0)).constructor=K,O=M(b.then,b),f=function(){O(u)}):F?f=function(){Y.nextTick(u)}:(E=M(E,x),f=function(){E(u)}):(g=!0,_=V.createTextNode(""),new I(u).observe(_,{characterData:!0}),f=function(){_.data=g=!g})),n.exports=B||function(z){var X={fn:z,next:void 0};v&&(v.next=X),c||(c=X,f()),v=X}},function(n,a,r){var u=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(u)&&c.Pebble!==void 0},function(n,a,r){var u=r(55);n.exports=/web0s(?!.*chrome)/i.test(u)},function(n,a,r){var u=r(32),c=r(33),v=r(170);n.exports=function(f,g){if(u(f),c(g)&&g.constructor===f)return g;var _=v.f(f);return(0,_.resolve)(g),_.promise}},function(n,a,r){var u=r(7);n.exports=function(c,v){var f=u.console;f&&f.error&&(arguments.length==1?f.error(c):f.error(c,v))}},function(n,a){n.exports=function(r){try{return{error:!1,value:r()}}catch(u){return{error:!0,value:u}}}},function(n,a){n.exports=typeof window=="object"},function(n,a,r){var u=r(40),c=r(75),v=r(45);n.exports=function(f){for(var g=u(this),_=v(g),b=arguments.length,O=c(b>1?arguments[1]:void 0,_),x=b>2?arguments[2]:void 0,M=x===void 0?_:c(x,_);M>O;)g[O++]=f;return g}},function(n,a,r){var u=r(16),c=r(7),v=r(15),f=r(59),g=r(160),_=r(219),b=r(18),O=c.RangeError,x=c.String,M=Math.floor,A=v(_),E=v("".slice),D=v(1 .toFixed),j=function(V,Y,K){return Y===0?K:Y%2==1?j(V,Y-1,K*V):j(V*V,Y/2,K)},U=function(V,Y,K){for(var H=-1,B=K;++H<6;)B+=Y*V[H],V[H]=B%1e7,B=M(B/1e7)},F=function(V,Y){for(var K=6,H=0;--K>=0;)H+=V[K],V[K]=M(H/Y),H=H%Y*1e7},I=function(V){for(var Y=6,K="";--Y>=0;)if(K!==""||Y===0||V[Y]!==0){var H=x(V[Y]);K=K===""?H:K+A("0",7-H.length)+H}return K};u({target:"Number",proto:!0,forced:b(function(){return D(8e-5,3)!=="0.000"||D(.9,0)!=="1"||D(1.255,2)!=="1.25"||D(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!b(function(){D({})})},{toFixed:function(V){var Y,K,H,B,z=g(this),X=f(V),ee=[0,0,0,0,0,0],pe="",ce="0";if(X<0||X>20)throw O("Incorrect fraction digits");if(z!=z)return"NaN";if(z<=-1e21||z>=1e21)return x(z);if(z<0&&(pe="-",z=-z),z>1e-21)if(K=(Y=function(Pe){for(var Ee=0,le=Pe;le>=4096;)Ee+=12,le/=4096;for(;le>=2;)Ee+=1,le/=2;return Ee}(z*j(2,69,1))-69)<0?z*j(2,-Y,1):z/j(2,Y,1),K*=4503599627370496,(Y=52-Y)>0){for(U(ee,0,K),H=X;H>=7;)U(ee,1e7,0),H-=7;for(U(ee,j(10,H,1),0),H=Y-1;H>=23;)F(ee,1<<23),H-=23;F(ee,1<<H),U(ee,1,1),F(ee,2),ce=I(ee)}else U(ee,0,K),U(ee,1<<-Y,0),ce=I(ee)+A("0",X);return ce=X>0?pe+((B=ce.length)<=X?"0."+A("0",X-B)+ce:E(ce,0,B-X)+"."+E(ce,B-X)):pe+ce}})},function(n,a,r){var u=r(7),c=r(59),v=r(39),f=r(44),g=u.RangeError;n.exports=function(_){var b=v(f(this)),O="",x=c(_);if(x<0||x==1/0)throw g("Wrong number of repetitions");for(;x>0;(x>>>=1)&&(b+=b))1&x&&(O+=b);return O}},function(n,a,r){var u=r(36),c=r(15),v=r(77),f=r(41),g=c(r(84).f),_=c([].push),b=function(O){return function(x){for(var M,A=f(x),E=v(A),D=E.length,j=0,U=[];D>j;)M=E[j++],u&&!g(A,M)||_(U,O?[M,A[M]]:A[M]);return U}};n.exports={entries:b(!0),values:b(!1)}},function(n,a){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,a,r){r.r(a),r.d(a,"observer",function(){return gs}),r.d(a,"LogicFlow",function(){return O1}),r.d(a,"h",function(){return We.g}),r.d(a,"LogicFlowUtil",function(){return u}),r.d(a,"BaseNode",function(){return Ef}),r.d(a,"RectNode",function(){return h0}),r.d(a,"CircleNode",function(){return g0}),r.d(a,"PolygonNode",function(){return O0}),r.d(a,"DiamondNode",function(){return T0}),r.d(a,"EllipseNode",function(){return R0}),r.d(a,"TextNode",function(){return j0}),r.d(a,"HtmlNode",function(){return F0}),r.d(a,"BaseEdge",function(){return _m}),r.d(a,"LineEdge",function(){return Q0}),r.d(a,"PolylineEdge",function(){return o1}),r.d(a,"BezierEdge",function(){return u1}),r.d(a,"Arrow",function(){return ED}),r.d(a,"BaseEdgeModel",function(){return Md}),r.d(a,"BezierEdgeModel",function(){return bb}),r.d(a,"LineEdgeModel",function(){return Qs}),r.d(a,"PolylineEdgeModel",function(){return Ta}),r.d(a,"BaseNodeModel",function(){return wf}),r.d(a,"CircleNodeModel",function(){return Ab}),r.d(a,"DiamondNodeModel",function(){return Nb}),r.d(a,"EllipseNodeModel",function(){return jb}),r.d(a,"PolygonNodeModel",function(){return Vb}),r.d(a,"RectNodeModel",function(){return zb}),r.d(a,"TextNodeModel",function(){return Yb}),r.d(a,"HtmlNodeModel",function(){return Jb}),r.d(a,"EditConfigModel",function(){return id}),r.d(a,"GraphModel",function(){return a2}),r.d(a,"SnaplineModel",function(){return WO}),r.d(a,"Keyboard",function(){return kS}),r.d(a,"get",function(){return k2}),r.d(a,"defaults",function(){return N2}),r.d(a,"ElementState",function(){return Yr}),r.d(a,"ModelType",function(){return xr}),r.d(a,"ElementType",function(){return fo}),r.d(a,"EventType",function(){return Cn}),r.d(a,"formateAnchorConnectValidateData",function(){return ql});var u={};r.r(u),r.d(u,"createUuid",function(){return ra}),r.d(u,"refreshGraphId",function(){return Jc}),r.d(u,"StepDrag",function(){return ye}),r.d(u,"setupEdgeModel",function(){return $t}),r.d(u,"isBboxOverLapping",function(){return Ct}),r.d(u,"filterRepeatPoints",function(){return ft}),r.d(u,"getSimplePolyline",function(){return qt}),r.d(u,"getExpandedBBox",function(){return Vt}),r.d(u,"pointDirection",function(){return Dt}),r.d(u,"getExpandedBBoxPoint",function(){return Et}),r.d(u,"mergeBBox",function(){return Ze}),r.d(u,"getBBoxOfPoints",function(){return ct}),r.d(u,"getPointsFromBBox",function(){return Lt}),r.d(u,"isPointOutsideBBox",function(){return en}),r.d(u,"getBBoxXCrossPoints",function(){return xt}),r.d(u,"getBBoxYCrossPoints",function(){return an}),r.d(u,"getBBoxCrossPointsByPoint",function(){return Tt}),r.d(u,"estimateDistance",function(){return Ht}),r.d(u,"costByPoints",function(){return At}),r.d(u,"heuristicCostEstimate",function(){return Zt}),r.d(u,"rebuildPath",function(){return Pn}),r.d(u,"removeClosePointFromOpenList",function(){return Bn}),r.d(u,"isSegmentsIntersected",function(){return jt}),r.d(u,"isSegmentCrossingBBox",function(){return Mt}),r.d(u,"getNextNeighborPoints",function(){return St}),r.d(u,"pathFinder",function(){return jn}),r.d(u,"getBoxByOriginNode",function(){return rr}),r.d(u,"pointFilter",function(){return hn}),r.d(u,"getPolylinePoints",function(){return ur}),r.d(u,"getLongestEdge",function(){return Wn}),r.d(u,"isSegmentsInNode",function(){return ir}),r.d(u,"isSegmentsCrossNode",function(){return _r}),r.d(u,"getCrossPointInRect",function(){return jo}),r.d(u,"segmentDirection",function(){return Po}),r.d(u,"points2PointsList",function(){return or}),r.d(u,"getSimplePoints",function(){return Zo}),r.d(u,"getBytesLength",function(){return Io}),r.d(u,"getTextWidth",function(){return ii}),r.d(u,"getAppendAttributes",function(){return pi}),r.d(u,"getBezierControlPoints",function(){return Jo}),r.d(u,"getBezierPoints",function(){return yo}),r.d(u,"getEndTangent",function(){return hi}),r.d(u,"getClosestPointOfPolyline",function(){return Tr}),r.d(u,"pickEdgeConfig",function(){return Dn}),r.d(u,"twoPointDistance",function(){return hr}),r.d(u,"createEdgeGenerator",function(){return Zn}),r.d(u,"snapToGrid",function(){return rl}),r.d(u,"getGridOffset",function(){return qc}),r.d(u,"sampleCubic",function(){return Do}),r.d(u,"getThetaOfVector",function(){return Pd}),r.d(u,"degrees",function(){return jp}),r.d(u,"Vector",function(){return Xe}),r.d(u,"Point",function(){return p}),r.d(u,"Matrix",function(){return Au}),r.d(u,"RotateMatrix",function(){return ec}),r.d(u,"ScaleMatrix",function(){return um}),r.d(u,"TranslateMatrix",function(){return Rd});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var f=r(43),g=Object(f.b)("observerBatching");function _(i){i()}var b=!1;function O(){return b}function x(i){return Object(c.t)(i)}var M,A=1e4,E=new Set;function D(){M===void 0&&(M=setTimeout(j,1e4))}function j(){M=void 0;var i=Date.now();E.forEach(function(o){var l=o.current;l&&i>=l.cleanAt&&(l.reaction.dispose(),o.current=null,E.delete(o))}),E.size>0&&D()}var U=!1,F=[],I={};function V(i){return"observer"+i}function Y(i,o,l){o===void 0&&(o="observed"),l===void 0&&(l=I),O();var s,h=function(C){return function(){U?F.push(C):C()}}((l.useForceUpdate||f.d)()),d=v.d.useRef(null);if(!d.current){var m=new c.c(V(o),function(){w.mounted?h():(m.dispose(),d.current=null)}),w=function(C){return{cleanAt:Date.now()+A,reaction:C}}(m);d.current=w,s=d,E.add(s),D()}var T=d.current.reaction;return v.d.useDebugValue(T,x),v.d.useEffect(function(){var C;return C=d,E.delete(C),d.current?d.current.mounted=!0:(d.current={reaction:new c.c(V(o),function(){h()}),cleanAt:1/0},h()),function(){d.current.reaction.dispose(),d.current=null}},[]),function(C){U=!0,F=[];try{var $=C();U=!1;var Q=F.length>0?F:void 0;return v.d.useLayoutEffect(function(){Q&&Q.forEach(function(te){return te()})},[Q]),$}finally{U=!1}}(function(){var C,$;if(T.track(function(){try{C=i()}catch(Q){$=Q}}),$)throw $;return C})}var K=function(){return K=Object.assign||function(i){for(var o,l=1,s=arguments.length;l<s;l++)for(var h in o=arguments[l])Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h]);return i},K.apply(this,arguments)};function H(i,o){var l,s,h,d=K({forwardRef:!1},o),m=i.displayName||i.name,w=function(T,C){return Y(function(){return i(T,C)},m)};return w.displayName=m,l=d.forwardRef?Object(v.f)(Object(v.e)(w)):Object(v.f)(w),s=i,h=l,Object.keys(s).forEach(function(T){B[T]||Object.defineProperty(h,T,Object.getOwnPropertyDescriptor(s,T))}),l.displayName=m,l}var B={$$typeof:!0,render:!0,compare:!0,type:!0};function z(i){var o=i.children,l=i.render,s=o||l;return typeof s!="function"?null:Y(s)}function X(i,o,l,s,h){var d=o==="children"?"render":"children",m=typeof i[o]=="function",w=typeof i[d]=="function";return m&&w?new Error("MobX Observer: Do not use children and render in the same time in`"+l):m||w?null:new Error("Invalid prop `"+h+"` of type `"+typeof i[o]+"` supplied to `"+l+"`, expected `function`.")}z.propTypes={children:X,render:X},z.displayName="Observer";var ee;(ee=v.g)||(ee=_),Object(c.n)({reactionScheduler:ee}),Object(f.a)()[g]=!0;var pe=0,ce={};function Pe(i){return ce[i]||(ce[i]=function(o){if(typeof Symbol=="function")return Symbol(o);var l="__$mobx-react "+o+" ("+pe+")";return pe++,l}(i)),ce[i]}function Ee(i,o){if(le(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),s=Object.keys(o);if(l.length!==s.length)return!1;for(var h=0;h<l.length;h++)if(!Object.hasOwnProperty.call(o,l[h])||!le(i[l[h]],o[l[h]]))return!1;return!0}function le(i,o){return i===o?i!==0||1/i==1/o:i!=i&&o!=o}function ie(i,o,l){Object.hasOwnProperty.call(i,o)?i[o]=l:Object.defineProperty(i,o,{enumerable:!1,configurable:!0,writable:!0,value:l})}var $e=Pe("patchMixins"),Ge=Pe("patchedDefinition");function ht(i,o){for(var l=this,s=arguments.length,h=new Array(s>2?s-2:0),d=2;d<s;d++)h[d-2]=arguments[d];o.locks++;try{var m;return i!=null&&(m=i.apply(this,h)),m}finally{o.locks--,o.locks===0&&o.methods.forEach(function(w){w.apply(l,h)})}}function Fe(i,o){return function(){for(var l=arguments.length,s=new Array(l),h=0;h<l;h++)s[h]=arguments[h];ht.call.apply(ht,[this,i,o].concat(s))}}function Nt(i,o,l){var s=function(w,T){var C=w[$e]=w[$e]||{},$=C[T]=C[T]||{};return $.locks=$.locks||0,$.methods=$.methods||[],$}(i,o);s.methods.indexOf(l)<0&&s.methods.push(l);var h=Object.getOwnPropertyDescriptor(i,o);if(!h||!h[Ge]){var d=i[o],m=Yt(i,o,h?h.enumerable:void 0,s,d);Object.defineProperty(i,o,m)}}function Yt(i,o,l,s,h){var d,m=Fe(h,s);return(d={})[Ge]=!0,d.get=function(){return m},d.set=function(w){if(this===i)m=Fe(w,s);else{var T=Yt(this,o,l,s,w);Object.defineProperty(this,o,T)}},d.configurable=!0,d.enumerable=l,d}var kt=c.a||"$mobx",On=Pe("isMobXReactObserver"),Be=Pe("isUnmounted"),Se=Pe("skipRender"),Ce=Pe("isForcingUpdate");function Ye(i){var o=i.prototype;if(i[On]?bt(o):i[On]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i.__proto__!==v.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==Wt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=Wt;Qt(o,"props"),Qt(o,"state");var l=o.render;return o.render=function(){return vt.call(this,l)},Nt(o,"componentWillUnmount",function(){var s;(s=this.render[kt])===null||s===void 0||s.dispose(),this[Be]=!0,!this.render[kt]&&bt(this)}),i}function bt(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function vt(i){var o=this;ie(this,Se,!1),ie(this,Ce,!1);var l=bt(this),s=i.bind(this),h=!1,d=new c.c(l+".render()",function(){if(!h&&(h=!0,o[Be]!==!0)){var w=!0;try{ie(o,Ce,!0),o[Se]||v.a.prototype.forceUpdate.call(o),w=!1}finally{ie(o,Ce,!1),w&&d.dispose()}}});function m(){h=!1;var w=void 0,T=void 0;if(d.track(function(){try{T=Object(c.d)(!1,s)}catch(C){w=C}}),w)throw w;return T}return d.reactComponent=this,m[kt]=d,this.render=m,m.call(this)}function Wt(i,o){return this.state!==o||!Ee(this.props,i)}function Qt(i,o){var l=Pe("reactProp_"+o+"_valueHolder"),s=Pe("reactProp_"+o+"_atomHolder");function h(){return this[s]||ie(this,s,Object(c.o)("reactive "+o)),this[s]}Object.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){var d=!1;return c.f&&c.e&&(d=Object(c.f)(!0)),h.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(d),this[l]},set:function(d){this[Ce]||Ee(this[l],d)?ie(this,l,d):(ie(this,l,d),ie(this,Se,!0),h.call(this).reportChanged(),ie(this,Se,!1))}})}var Gt=typeof Symbol=="function"&&Symbol.for,Kt=Gt?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(i){return null}).$$typeof,rt=Gt?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(i){return null}).$$typeof;function cn(i){if(i.isMobxInjector,rt&&i.$$typeof===rt)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Kt&&i.$$typeof===Kt){var o=i.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(z,null,function(){return o.apply(void 0,l)})})}return typeof i!="function"||i.prototype&&i.prototype.render||i.isReactClass||Object.prototype.isPrototypeOf.call(v.a,i)?Ye(i):H(i)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var We=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var dn=function(i,o){for(var l=-1,s=i==null?0:i.length,h=Array(s);++l<s;)h[l]=o(i[l],l,i);return h},er=function(){this.__data__=[],this.size=0},ae=function(i,o){return i===o||i!=i&&o!=o},tr=function(i,o){for(var l=i.length;l--;)if(ae(i[l][0],o))return l;return-1},Pr=Array.prototype.splice,Xr=function(i){var o=this.__data__,l=tr(o,i);return!(l<0)&&(l==o.length-1?o.pop():Pr.call(o,l,1),--this.size,!0)},ao=function(i){var o=this.__data__,l=tr(o,i);return l<0?void 0:o[l][1]},Un=function(i){return tr(this.__data__,i)>-1},bo=function(i,o){var l=this.__data__,s=tr(l,i);return s<0?(++this.size,l.push([i,o])):l[s][1]=o,this};function Ae(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}Ae.prototype.clear=er,Ae.prototype.delete=Xr,Ae.prototype.get=ao,Ae.prototype.has=Un,Ae.prototype.set=bo;var Qe=Ae,je=function(){this.__data__=new Qe,this.size=0},st=function(i){var o=this.__data__,l=o.delete(i);return this.size=o.size,l},on=function(i){return this.__data__.get(i)},Jt=function(i){return this.__data__.has(i)},Rn=r(31),Or=Rn.a.Symbol,ui=Object.prototype,Si=ui.hasOwnProperty,Yo=ui.toString,ti=Or?Or.toStringTag:void 0,Mn=function(i){var o=Si.call(i,ti),l=i[ti];try{i[ti]=void 0;var s=!0}catch{}var h=Yo.call(i);return s&&(o?i[ti]=l:delete i[ti]),h},$n=Object.prototype.toString,Hn=function(i){return $n.call(i)},lr=Or?Or.toStringTag:void 0,to=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":lr&&lr in Object(i)?Mn(i):Hn(i)},Dr=function(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")},ml,Ha=function(i){if(!Dr(i))return!1;var o=to(i);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},yl=Rn.a["__core-js_shared__"],iu=(ml=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||""))?"Symbol(src)_1."+ml:"",np=function(i){return!!iu&&iu in i},wc=Function.prototype.toString,ma=function(i){if(i!=null){try{return wc.call(i)}catch{}try{return i+""}catch{}}return""},Fu=/^\[object .+?Constructor\]$/,Nn=Function.prototype,Vf=Object.prototype,wo=Nn.toString,Ec=Vf.hasOwnProperty,Ji=RegExp("^"+wo.call(Ec).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),la=function(i){return!(!Dr(i)||np(i))&&(Ha(i)?Ji:Fu).test(ma(i))},Ns=function(i,o){return i==null?void 0:i[o]},Ca=function(i,o){var l=Ns(i,o);return la(l)?l:void 0},ya=Ca(Rn.a,"Map"),Da=Ca(Object,"create"),Oc=function(){this.__data__=Da?Da(null):{},this.size=0},Sc=function(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o},Bf=Object.prototype.hasOwnProperty,Uu=function(i){var o=this.__data__;if(Da){var l=o[i];return l==="__lodash_hash_undefined__"?void 0:l}return Bf.call(o,i)?o[i]:void 0},Wf=Object.prototype.hasOwnProperty,xc=function(i){var o=this.__data__;return Da?o[i]!==void 0:Wf.call(o,i)},rp=function(i,o){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Da&&o===void 0?"__lodash_hash_undefined__":o,this};function jl(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}jl.prototype.clear=Oc,jl.prototype.delete=Sc,jl.prototype.get=Uu,jl.prototype.has=xc,jl.prototype.set=rp;var Gf=jl,gl=function(){this.size=0,this.__data__={hash:new Gf,map:new(ya||Qe),string:new Gf}},Ac=function(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null},Rs=function(i,o){var l=i.__data__;return Ac(o)?l[typeof o=="string"?"string":"hash"]:l.map},Tc=function(i){var o=Rs(this,i).delete(i);return this.size-=o?1:0,o},Mc=function(i){return Rs(this,i).get(i)},op=function(i){return Rs(this,i).has(i)},zf=function(i,o){var l=Rs(this,i),s=l.size;return l.set(i,o),this.size+=l.size==s?0:1,this};function qr(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}qr.prototype.clear=gl,qr.prototype.delete=Tc,qr.prototype.get=Mc,qr.prototype.has=op,qr.prototype.set=zf;var Wr=qr,Hf=function(i,o){var l=this.__data__;if(l instanceof Qe){var s=l.__data__;if(!ya||s.length<199)return s.push([i,o]),this.size=++l.size,this;l=this.__data__=new Wr(s)}return l.set(i,o),this.size=l.size,this};function au(i){var o=this.__data__=new Qe(i);this.size=o.size}au.prototype.clear=je,au.prototype.delete=st,au.prototype.get=on,au.prototype.has=Jt,au.prototype.set=Hf;var ga=au,Cs=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},Xf=function(i){return this.__data__.has(i)};function Fo(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new Wr;++o<l;)this.add(i[o])}Fo.prototype.add=Fo.prototype.push=Cs,Fo.prototype.has=Xf;var Il=Fo,Ll=function(i,o){for(var l=-1,s=i==null?0:i.length;++l<s;)if(o(i[l],l,i))return!0;return!1},Ds=function(i,o){return i.has(o)},lu=function(i,o,l,s,h,d){var m=1&l,w=i.length,T=o.length;if(w!=T&&!(m&&T>w))return!1;var C=d.get(i),$=d.get(o);if(C&&$)return C==o&&$==i;var Q=-1,te=!0,ge=2&l?new Il:void 0;for(d.set(i,o),d.set(o,i);++Q<w;){var Me=i[Q],Ie=o[Q];if(s)var ut=m?s(Ie,Me,Q,o,i,d):s(Me,Ie,Q,i,o,d);if(ut!==void 0){if(ut)continue;te=!1;break}if(ge){if(!Ll(o,function(lt,_t){if(!Ds(ge,_t)&&(Me===lt||h(Me,lt,l,s,d)))return ge.push(_t)})){te=!1;break}}else if(Me!==Ie&&!h(Me,Ie,l,s,d)){te=!1;break}}return d.delete(i),d.delete(o),te},xi=Rn.a.Uint8Array,kc=function(i){var o=-1,l=Array(i.size);return i.forEach(function(s,h){l[++o]=[h,s]}),l},qf=function(i){var o=-1,l=Array(i.size);return i.forEach(function(s){l[++o]=s}),l},Pc=Or?Or.prototype:void 0,Fi=Pc?Pc.valueOf:void 0,si=function(i,o,l,s,h,d,m){switch(l){case"[object DataView]":if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=o.byteLength||!d(new xi(i),new xi(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ae(+i,+o);case"[object Error]":return i.name==o.name&&i.message==o.message;case"[object RegExp]":case"[object String]":return i==o+"";case"[object Map]":var w=kc;case"[object Set]":var T=1&s;if(w||(w=qf),i.size!=o.size&&!T)return!1;var C=m.get(i);if(C)return C==o;s|=2,m.set(i,o);var $=lu(w(i),w(o),s,h,d,m);return m.delete(i),$;case"[object Symbol]":if(Fi)return Fi.call(i)==Fi.call(o)}return!1},_a=function(i,o){for(var l=-1,s=o.length,h=i.length;++l<s;)i[h+l]=o[l];return i},lo=Array.isArray,ip=function(i,o,l){var s=o(i);return lo(i)?s:_a(s,l(i))},Ui=function(i,o){for(var l=-1,s=i==null?0:i.length,h=0,d=[];++l<s;){var m=i[l];o(m,l,i)&&(d[h++]=m)}return d},Yf=function(){return[]},Kf=Object.prototype.propertyIsEnumerable,Vi=Object.getOwnPropertySymbols,Qi=Vi?function(i){return i==null?[]:(i=Object(i),Ui(Vi(i),function(o){return Kf.call(i,o)}))}:Yf,Nc=function(i,o){for(var l=-1,s=Array(i);++l<i;)s[l]=o(l);return s},$r=function(i){return i!=null&&typeof i=="object"},ci=function(i){return $r(i)&&to(i)=="[object Arguments]"},js=Object.prototype,Zf=js.hasOwnProperty,Rc=js.propertyIsEnumerable,Is=ci(function(){return arguments}())?ci:function(i){return $r(i)&&Zf.call(i,"callee")&&!Rc.call(i,"callee")},Xa=Is,Bi=r(48),uu=/^(?:0|[1-9]\d*)$/,ea=function(i,o){var l=typeof i;return!!(o=o??9007199254740991)&&(l=="number"||l!="symbol"&&uu.test(i))&&i>-1&&i%1==0&&i<o},ba=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991},Nr={};Nr["[object Float32Array]"]=Nr["[object Float64Array]"]=Nr["[object Int8Array]"]=Nr["[object Int16Array]"]=Nr["[object Int32Array]"]=Nr["[object Uint8Array]"]=Nr["[object Uint8ClampedArray]"]=Nr["[object Uint16Array]"]=Nr["[object Uint32Array]"]=!0,Nr["[object Arguments]"]=Nr["[object Array]"]=Nr["[object ArrayBuffer]"]=Nr["[object Boolean]"]=Nr["[object DataView]"]=Nr["[object Date]"]=Nr["[object Error]"]=Nr["[object Function]"]=Nr["[object Map]"]=Nr["[object Number]"]=Nr["[object Object]"]=Nr["[object RegExp]"]=Nr["[object Set]"]=Nr["[object String]"]=Nr["[object WeakMap]"]=!1;var Wi=function(i){return $r(i)&&ba(i.length)&&!!Nr[to(i)]},ja=function(i){return function(o){return i(o)}},yi=r(49),su=yi.a&&yi.a.isTypedArray,$l=su?ja(su):Wi,Ia=Object.prototype.hasOwnProperty,vo=function(i,o){var l=lo(i),s=!l&&Xa(i),h=!l&&!s&&Object(Bi.a)(i),d=!l&&!s&&!h&&$l(i),m=l||s||h||d,w=m?Nc(i.length,String):[],T=w.length;for(var C in i)!o&&!Ia.call(i,C)||m&&(C=="length"||h&&(C=="offset"||C=="parent")||d&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||ea(C,T))||w.push(C);return w},Vu=Object.prototype,qa=function(i){var o=i&&i.constructor;return i===(typeof o=="function"&&o.prototype||Vu)},wa=function(i,o){return function(l){return i(o(l))}},Cc=wa(Object.keys,Object),ap=Object.prototype.hasOwnProperty,Dc=function(i){if(!qa(i))return Cc(i);var o=[];for(var l in Object(i))ap.call(i,l)&&l!="constructor"&&o.push(l);return o},Ko=function(i){return i!=null&&ba(i.length)&&!Ha(i)},Bu=function(i){return Ko(i)?vo(i):Dc(i)},Ya=function(i){return ip(i,Bu,Qi)},ni=Object.prototype.hasOwnProperty,jc=function(i,o,l,s,h,d){var m=1&l,w=Ya(i),T=w.length;if(T!=Ya(o).length&&!m)return!1;for(var C=T;C--;){var $=w[C];if(!(m?$ in o:ni.call(o,$)))return!1}var Q=d.get(i),te=d.get(o);if(Q&&te)return Q==o&&te==i;var ge=!0;d.set(i,o),d.set(o,i);for(var Me=m;++C<T;){var Ie=i[$=w[C]],ut=o[$];if(s)var lt=m?s(ut,Ie,$,o,i,d):s(Ie,ut,$,i,o,d);if(!(lt===void 0?Ie===ut||h(Ie,ut,l,s,d):lt)){ge=!1;break}Me||(Me=$=="constructor")}if(ge&&!Me){var _t=i.constructor,Bt=o.constructor;_t==Bt||!("constructor"in i)||!("constructor"in o)||typeof _t=="function"&&_t instanceof _t&&typeof Bt=="function"&&Bt instanceof Bt||(ge=!1)}return d.delete(i),d.delete(o),ge},ua=Ca(Rn.a,"DataView"),Ea=Ca(Rn.a,"Promise"),Ls=Ca(Rn.a,"Set"),Gi=Ca(Rn.a,"WeakMap"),ta="[object Map]",fi="[object Promise]",sa="[object Set]",Ii="[object WeakMap]",dt="[object DataView]",Ft=ma(ua),Ut=ma(ya),yn=ma(Ea),fr=ma(Ls),Rr=ma(Gi),mo=to;(ua&&mo(new ua(new ArrayBuffer(1)))!=dt||ya&&mo(new ya)!=ta||Ea&&mo(Ea.resolve())!=fi||Ls&&mo(new Ls)!=sa||Gi&&mo(new Gi)!=Ii)&&(mo=function(i){var o=to(i),l=o=="[object Object]"?i.constructor:void 0,s=l?ma(l):"";if(s)switch(s){case Ft:return dt;case Ut:return ta;case yn:return fi;case fr:return sa;case Rr:return Ii}return o});var P=mo,N="[object Arguments]",G="[object Array]",oe="[object Object]",we=Object.prototype.hasOwnProperty,Ke=function(i,o,l,s,h,d){var m=lo(i),w=lo(o),T=m?G:P(i),C=w?G:P(o),$=(T=T==N?oe:T)==oe,Q=(C=C==N?oe:C)==oe,te=T==C;if(te&&Object(Bi.a)(i)){if(!Object(Bi.a)(o))return!1;m=!0,$=!1}if(te&&!$)return d||(d=new ga),m||$l(i)?lu(i,o,l,s,h,d):si(i,o,T,l,s,h,d);if(!(1&l)){var ge=$&&we.call(i,"__wrapped__"),Me=Q&&we.call(o,"__wrapped__");if(ge||Me){var Ie=ge?i.value():i,ut=Me?o.value():o;return d||(d=new ga),h(Ie,ut,l,s,d)}}return!!te&&(d||(d=new ga),jc(i,o,l,s,h,d))},gt=function i(o,l,s,h,d){return o===l||(o==null||l==null||!$r(o)&&!$r(l)?o!=o&&l!=l:Ke(o,l,s,h,i,d))},Xt=function(i,o,l,s){var h=l.length,d=h;if(i==null)return!d;for(i=Object(i);h--;){var m=l[h];if(m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++h<d;){var w=(m=l[h])[0],T=i[w],C=m[1];if(m[2]){if(T===void 0&&!(w in i))return!1}else{var $=new ga,Q;if(!(Q===void 0?gt(C,T,3,s,$):Q))return!1}}return!0},Sn=function(i){return i==i&&!Dr(i)},wr=function(i){for(var o=Bu(i),l=o.length;l--;){var s=o[l],h=i[s];o[l]=[s,h,Sn(h)]}return o},pn=function(i,o){return function(l){return l!=null&&l[i]===o&&(o!==void 0||i in Object(l))}},Gr=function(i){var o=wr(i);return o.length==1&&o[0][2]?pn(o[0][0],o[0][1]):function(l){return l===i||Xt(l,i,o)}},mr=function(i){return typeof i=="symbol"||$r(i)&&to(i)=="[object Symbol]"},Ir=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/,Ao=function(i,o){if(lo(i))return!1;var l=typeof i;return!(l!="number"&&l!="symbol"&&l!="boolean"&&i!=null&&!mr(i))||ca.test(i)||!Ir.test(i)||o!=null&&i in Object(o)};function na(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var l=function(){var s=arguments,h=o?o.apply(this,s):s[0],d=l.cache;if(d.has(h))return d.get(h);var m=i.apply(this,s);return l.cache=d.set(h,m)||d,m};return l.cache=new(na.Cache||Wr),l}na.Cache=Wr;var _l=na,bl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fl=/\\(\\)?/g,cu=function(i){var o=_l(i,function(s){return l.size===500&&l.clear(),s}),l=o.cache;return o}(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(bl,function(l,s,h,d){o.push(h?d.replace(Fl,"$1"):s||l)}),o}),Ka=Or?Or.prototype:void 0,fu=Ka?Ka.toString:void 0,ri=function i(o){if(typeof o=="string")return o;if(lo(o))return dn(o,i)+"";if(mr(o))return fu?fu.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l},Ul=function(i){return i==null?"":ri(i)},wl=function(i,o){return lo(i)?i:Ao(i,o)?[i]:cu(Ul(i))},Za=function(i){if(typeof i=="string"||mr(i))return i;var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},Ja=function(i,o){for(var l=0,s=(o=wl(o,i)).length;i!=null&&l<s;)i=i[Za(o[l++])];return l&&l==s?i:void 0},Wu=function(i,o,l){var s=i==null?void 0:Ja(i,o);return s===void 0?l:s},gh=function(i,o){return i!=null&&o in Object(i)},_h=function(i,o,l){for(var s=-1,h=(o=wl(o,i)).length,d=!1;++s<h;){var m=Za(o[s]);if(!(d=i!=null&&l(i,m)))break;i=i[m]}return d||++s!=h?d:!!(h=i==null?0:i.length)&&ba(h)&&ea(m,h)&&(lo(i)||Xa(i))},lp=function(i,o){return i!=null&&_h(i,o,gh)},Ic=function(i,o){return Ao(i)&&Sn(o)?pn(Za(i),o):function(l){var s=Wu(l,i);return s===void 0&&s===o?lp(l,i):gt(o,s,3)}},Gu=function(i){return i},Jf=function(i){return function(o){return o==null?void 0:o[i]}},bh=function(i){return function(o){return Ja(o,i)}},zu=function(i){return Ao(i)?Jf(Za(i)):bh(i)},Lc=function(i){return typeof i=="function"?i:i==null?Gu:typeof i=="object"?lo(i)?Ic(i[0],i[1]):Gr(i):zu(i)},Qf=function(i){return function(o,l,s){for(var h=-1,d=Object(o),m=s(o),w=m.length;w--;){var T=m[++h];if(l(d[T],T,d)===!1)break}return o}}(),Uo=function(i,o){return function(l,s){if(l==null)return l;if(!Ko(l))return i(l,s);for(var h=l.length,d=-1,m=Object(l);++d<h&&s(m[d],d,m)!==!1;);return l}}(function(i,o){return i&&Qf(i,o,Bu)}),zi=function(i,o){var l=-1,s=Ko(i)?Array(i.length):[];return Uo(i,function(h,d,m){s[++l]=o(h,d,m)}),s},ed=function(i,o){return(lo(i)?dn:zi)(i,Lc(o))};Object(c.n)({isolateGlobalState:!0});var td=function(){try{var i=Ca(Object,"defineProperty");return i({},"",{}),i}catch{}}(),$s=function(i,o,l){o=="__proto__"&&td?td(i,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[o]=l},Jv=Object.prototype.hasOwnProperty,Fs=function(i,o,l){var s=i[o];Jv.call(i,o)&&ae(s,l)&&(l!==void 0||o in i)||$s(i,o,l)},Us=function(i,o,l,s){var h=!l;l||(l={});for(var d=-1,m=o.length;++d<m;){var w=o[d],T=void 0;T===void 0&&(T=i[w]),h?$s(l,w,T):Fs(l,w,T)}return l},$c=function(i,o,l){switch(l.length){case 0:return i.call(o);case 1:return i.call(o,l[0]);case 2:return i.call(o,l[0],l[1]);case 3:return i.call(o,l[0],l[1],l[2])}return i.apply(o,l)},Hu=Math.max,du=function(i,o,l){return o=Hu(o===void 0?i.length-1:o,0),function(){for(var s=arguments,h=-1,d=Hu(s.length-o,0),m=Array(d);++h<d;)m[h]=s[o+h];h=-1;for(var w=Array(o+1);++h<o;)w[h]=s[h];return w[o]=l(m),$c(i,this,w)}},Vs=function(i){return function(){return i}},Fc=td?function(i,o){return td(i,"toString",{configurable:!0,enumerable:!1,value:Vs(o),writable:!0})}:Gu,pu=Date.now,Qv=function(i){var o=0,l=0;return function(){var s=pu(),h=16-(s-l);if(l=s,h>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}},Uc=Qv(Fc),em=function(i,o){return Uc(du(i,o,Gu),i+"")},tm=function(i,o,l){if(!Dr(l))return!1;var s=typeof o;return!!(s=="number"?Ko(l)&&ea(o,l.length):s=="string"&&o in l)&&ae(l[o],i)},wh=function(i){return em(function(o,l){var s=-1,h=l.length,d=h>1?l[h-1]:void 0,m=h>2?l[2]:void 0;for(d=i.length>3&&typeof d=="function"?(h--,d):void 0,m&&tm(l[0],l[1],m)&&(d=h<3?void 0:d,h=1),o=Object(o);++s<h;){var w=l[s];w&&i(o,w,s,d)}return o})},nd=Object.prototype.hasOwnProperty,Li=wh(function(i,o){if(qa(o)||Ko(o))Us(o,Bu(o),i);else for(var l in o)nd.call(o,l)&&Fs(i,l,o[l])}),Eh=function(i,o,l,s){if(!Dr(i))return i;for(var h=-1,d=(o=wl(o,i)).length,m=d-1,w=i;w!=null&&++h<d;){var T=Za(o[h]),C=l;if(T==="__proto__"||T==="constructor"||T==="prototype")return i;if(h!=m){var $=w[T];(C=void 0)==void 0&&(C=Dr($)?$:ea(o[h+1])?[]:{})}Fs(w,T,C),w=w[T]}return i},ue=function(i,o,l){for(var s=-1,h=o.length,d={};++s<h;){var m=o[s],w=Ja(i,m);l(w,m)&&Eh(d,wl(m,i),w)}return d},Xu=function(i,o){return ue(i,o,function(l,s){return lp(i,s)})},Vl=Or?Or.isConcatSpreadable:void 0,La=function(i){return lo(i)||Xa(i)||!!(Vl&&i&&i[Vl])},Cr=function(o,l,s,h,d){var m=-1,w=o.length;for(s||(s=La),d||(d=[]);++m<w;){var T=o[m];s(T)?_a(d,T):d[d.length]=T}return d},Ai=function(i){return i!=null&&i.length?Cr(i):[]},Fr,Qa,Bl,Oa,rd,od,up,Oh,Wl,Vo,Bs,sp,Gl,el,Vc,hu,Sa,cp,fp,tl=function(i){return Uc(du(i,void 0,Ai),i+"")}(function(i,o){return i==null?{}:Xu(i,o)});function Eo(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Sh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Bo(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Yr,oi,xr,fo,Cn,po,Bc={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},El=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],id=(Qa=Bo((Fr=function(){function i(s){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),Eo(this,"isSilentMode",Qa,this),Eo(this,"stopZoomGraph",Bl,this),Eo(this,"stopScrollGraph",Oa,this),Eo(this,"stopMoveGraph",rd,this),Eo(this,"adjustEdge",od,this),Eo(this,"adjustEdgeMiddle",up,this),Eo(this,"adjustEdgeStartAndEnd",Oh,this),Eo(this,"adjustNodePosition",Wl,this),Eo(this,"hideAnchors",Vo,this),Eo(this,"allowRotation",Bs,this),Eo(this,"hoverOutline",sp,this),Eo(this,"nodeSelectedOutline",Gl,this),Eo(this,"edgeSelectedOutline",el,this),Eo(this,"nodeTextEdit",Vc,this),Eo(this,"edgeTextEdit",hu,this),Eo(this,"nodeTextDraggable",Sa,this),Eo(this,"edgeTextDraggable",cp,this),Eo(this,"autoExpand",fp,this),dp(this,"multipleSelectKey",""),dp(this,"defaultConfig",{}),Li(this,this.getConfigDetail(s))}var o,l;return o=i,(l=[{key:"updateEditConfig",value:function(s){var h=this.getConfigDetail(s);Li(this,h)}},{key:"getConfigDetail",value:function(s){var h=s.isSilentMode,d=s.textEdit,m={};if(h===!1&&Li(m,this.defaultConfig),h===!0&&h!==this.isSilentMode){var w=tl(Bc,El);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Li(m,w)}d===!1&&Li(m,{nodeTextEdit:!1,edgeTextEdit:!1});var T=tl(s,El);return Li(m,T)}},{key:"getConfig",value:function(){return tl(this,El)}}])&&Sh(o.prototype,l),i}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bl=Bo(Fr.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oa=Bo(Fr.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rd=Bo(Fr.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),od=Bo(Fr.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),up=Bo(Fr.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oh=Bo(Fr.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wl=Bo(Fr.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vo=Bo(Fr.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bs=Bo(Fr.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sp=Bo(Fr.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gl=Bo(Fr.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),el=Bo(Fr.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vc=Bo(Fr.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hu=Bo(Fr.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sa=Bo(Fr.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cp=Bo(Fr.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fp=Bo(Fr.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bo(Fr.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Fr.prototype,"updateEditConfig"),Fr.prototype),Fr);r(65),r(66),function(i){i[i.DEFAULT=1]="DEFAULT",i[i.TEXT_EDIT=2]="TEXT_EDIT",i[i.SHOW_MENU=3]="SHOW_MENU",i[i.ALLOW_CONNECT=4]="ALLOW_CONNECT",i[i.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Yr||(Yr={})),function(i){i.KEY="logic-flow",i.NODE_NAME="lf-node",i.EDGE_NAME="lf-edge"}(oi||(oi={})),function(i){i.NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.HTML_NODE="html-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph"}(xr||(xr={})),function(i){i.NODE="node",i.EDGE="edge",i.GRAPH="graph"}(fo||(fo={})),function(i){i.ELEMENT_CLICK="element:click",i.NODE_CLICK="node:click",i.NODE_DBCLICK="node:dbclick",i.NODE_DELETE="node:delete",i.NODE_ADD="node:add",i.NODE_GROUP_COPY="node:group-copy-add",i.NODE_DND_ADD="node:dnd-add",i.NODE_DND_DRAG="node:dnd-drag",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DROP="node:drop",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_ROTATE="node:rotate",i.EDGE_DELETE="edge:delete",i.EDGE_ADD="edge:add",i.EDGE_CLICK="edge:click",i.EDGE_DBCLICK="edge:dbclick",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_ADJUST="edge:adjust",i.EDGE_EXCHANGE_NODE="edge:exchange-node",i.ANCHOR_DRAGSTART="anchor:dragstart",i.ANCHOR_DRAG="anchor:drag",i.ANCHOR_DROP="anchor:drop",i.ANCHOR_DRAGEND="anchor:dragend",i.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",i.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",i.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",i.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",i.ADJUST_POINT_DRAG="adjustPoint:drag",i.ADJUST_POINT_DROP="adjustPoint:drop",i.ADJUST_POINT_DRAGEND="adjustPoint:dragend",i.BLANK_MOUSEDOWN="blank:mousedown",i.BLANK_DRAGSTART="blank:dragstart",i.BLANK_DRAG="blank:drag",i.BLANK_DROP="blank:drop",i.BLANK_MOUSEMOVE="blank:mousemove",i.BLANK_MOUSEUP="blank:mouseup",i.BLANK_CLICK="blank:click",i.BLANK_CONTEXTMENU="blank:contextmenu",i.SELECTION_MOUSEDOWN="selection:mousedown",i.SELECTION_DRAGSTART="selection:dragstart",i.SELECTION_DRAG="selection:drag",i.SELECTION_DROP="selection:drop",i.SELECTION_MOUSEMOVE="selection:mousemove",i.SELECTION_MOUSEUP="selection:mouseup",i.SELECTION_CONTEXTMENU="selection:contextmenu",i.CONNECTION_NOT_ALLOWED="connection:not-allowed",i.HISTORY_CHANGE="history:change",i.TEXT_UPDATE="text:update",i.GRAPH_TRANSFORM="graph:transform",i.GRAPH_RENDERED="graph:rendered"}(Cn||(Cn={})),function(i){i.HORIZONTAL="horizontal",i.VERTICAL="vertical"}(po||(po={}));var To,No,pp,hp,Wc,Hi,ad,Ws,$a;function vu(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return zl(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zl(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zl(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Fa(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function xh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ol(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function xa(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.INCREASE=1]="INCREASE"})(To||(To={}));var vp={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},mp=(No=function(){function i(s,h){(function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")})(this,i),Ol(this,"MINI_SCALE_SIZE",.2),Ol(this,"MAX_SCALE_SIZE",16),Fa(this,"SCALE_X",pp,this),Fa(this,"SKEW_Y",hp,this),Fa(this,"SKEW_X",Wc,this),Fa(this,"SCALE_Y",Hi,this),Fa(this,"TRANSLATE_X",ad,this),Fa(this,"TRANSLATE_Y",Ws,this),Fa(this,"ZOOM_SIZE",$a,this),Ol(this,"eventCenter",void 0),Ol(this,"translateLimitMinX",void 0),Ol(this,"translateLimitMinY",void 0),Ol(this,"translateLimitMaxX",void 0),Ol(this,"translateLimitMaxY",void 0),this.eventCenter=s;var d=h.stopMoveGraph,m=d!==void 0&&d;this.updateTranslateLimits(m)}var o,l;return o=i,l=[{key:"setZoomMiniSize",value:function(s){this.MINI_SCALE_SIZE=s}},{key:"setZoomMaxSize",value:function(s){this.MAX_SCALE_SIZE=s}},{key:"HtmlPointToCanvasPoint",value:function(s){var h=vu(s,2),d=h[0],m=h[1];return[(d-this.TRANSLATE_X)/this.SCALE_X,(m-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(s){var h=vu(s,2),d=h[0],m=h[1];return[d*this.SCALE_X+this.TRANSLATE_X,m*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(s,h,d){var m=vu(s,2),w=m[0],T=m[1];return[w+h/this.SCALE_X,T+d/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(s,h){return[s/this.SCALE_X,h/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var s=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(s,")")}}},{key:"zoom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],h=arguments.length>1?arguments[1]:void 0,d=this.SCALE_X,m=this.SCALE_Y;return s===!0?(d+=this.ZOOM_SIZE,m+=this.ZOOM_SIZE):s===!1?(d-=this.ZOOM_SIZE,m-=this.ZOOM_SIZE):typeof s=="number"&&(d=s,m=s),d<this.MINI_SCALE_SIZE||d>this.MAX_SCALE_SIZE||(h&&(this.TRANSLATE_X-=(d-this.SCALE_X)*h[0],this.TRANSLATE_Y-=(m-this.SCALE_Y)*h[1]),this.SCALE_X=d,this.SCALE_Y=m,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(s){this.eventCenter.emit(Cn.GRAPH_TRANSFORM,{type:s,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(s,h){this.TRANSLATE_X+s<=this.translateLimitMaxX&&this.TRANSLATE_X+s>=this.translateLimitMinX&&(this.TRANSLATE_X+=s),this.TRANSLATE_Y+h<=this.translateLimitMaxY&&this.TRANSLATE_Y+h>=this.translateLimitMinY&&(this.TRANSLATE_Y+=h),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(s,h,d,m){var w=vu(this.CanvasPointToHtmlPoint([s,h]),2),T=d/2-w[0],C=m/2-w[1];this.TRANSLATE_X+=T,this.TRANSLATE_Y+=C,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(s){var h=vu(Array.isArray(s)&&s.length===4?s:vp[s.toString()],4);this.translateLimitMinX=h[0],this.translateLimitMinY=h[1],this.translateLimitMaxX=h[2],this.translateLimitMaxY=h[3]}}],l&&xh(o.prototype,l),i}(),pp=xa(No.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),hp=xa(No.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wc=xa(No.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hi=xa(No.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ad=xa(No.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ws=xa(No.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$a=xa(No.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),xa(No.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"zoom"),No.prototype),xa(No.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"resetZoom"),No.prototype),xa(No.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"translate"),No.prototype),xa(No.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(No.prototype,"focusOn"),No.prototype),No),ld=function(i,o){for(var l=-1,s=i==null?0:i.length;++l<s&&o(i[l],l,i)!==!1;);return i},Ah=function(i){var o=[];if(i!=null)for(var l in Object(i))o.push(l);return o},Th=Object.prototype.hasOwnProperty,Mh=function(i){if(!Dr(i))return Ah(i);var o=qa(i),l=[];for(var s in i)(s!="constructor"||!o&&Th.call(i,s))&&l.push(s);return l},ud=function(i){return Ko(i)?vo(i,!0):Mh(i)},yp=r(107),gp=function(i,o){var l=-1,s=i.length;for(o||(o=Array(s));++l<s;)o[l]=i[l];return o},Gc=wa(Object.getPrototypeOf,Object),Ar=Object.prototype.hasOwnProperty,nm=function(i){var o=i.length,l=new i.constructor(o);return o&&typeof i[0]=="string"&&Ar.call(i,"index")&&(l.index=i.index,l.input=i.input),l},_p=function(i){var o=new i.constructor(i.byteLength);return new xi(o).set(new xi(i)),o},qu=function(i,o){var l=_p(i.buffer);return new i.constructor(l,i.byteOffset,i.byteLength)},zc=/\w*$/,rm=function(i){var o=new i.constructor(i.source,zc.exec(i));return o.lastIndex=i.lastIndex,o},kh=Or?Or.prototype:void 0,Aa=kh?kh.valueOf:void 0,om=function(i){return Aa?Object(Aa.call(i)):{}},Hc=function(i,o){var l=o?_p(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)},sd=function(i,o,l){var s=i.constructor;switch(o){case"[object ArrayBuffer]":return _p(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return qu(i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hc(i,l);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return rm(i);case"[object Symbol]":return om(i)}},bp=Object.create,Ph=function(){function i(){}return function(o){if(!Dr(o))return{};if(bp)return bp(o);i.prototype=o;var l=new i;return i.prototype=void 0,l}}(),fa=function(i){return typeof i.constructor!="function"||qa(i)?{}:Ph(Gc(i))},mu=function(i){return $r(i)&&P(i)=="[object Map]"},cd=yi.a&&yi.a.isMap,Yu=cd?ja(cd):mu,fd=function(i){return $r(i)&&P(i)=="[object Set]"},wp=yi.a&&yi.a.isSet,dd=wp?ja(wp):fd,Xc="[object Arguments]",pd="[object Function]",hd="[object Object]",zr={};zr[Xc]=zr["[object Array]"]=zr["[object ArrayBuffer]"]=zr["[object DataView]"]=zr["[object Boolean]"]=zr["[object Date]"]=zr["[object Float32Array]"]=zr["[object Float64Array]"]=zr["[object Int8Array]"]=zr["[object Int16Array]"]=zr["[object Int32Array]"]=zr["[object Map]"]=zr["[object Number]"]=zr["[object Object]"]=zr["[object RegExp]"]=zr["[object Set]"]=zr["[object String]"]=zr["[object Symbol]"]=zr["[object Uint8Array]"]=zr["[object Uint8ClampedArray]"]=zr["[object Uint16Array]"]=zr["[object Uint32Array]"]=!0,zr["[object Error]"]=zr[pd]=zr["[object WeakMap]"]=!1;var im=function i(o,l,s,h,d,m){var w,T=1&l;if(w!==void 0)return w;if(!Dr(o))return o;var C=lo(o);if(C)w=nm(o);else{var $=P(o),Q=$==pd||$=="[object GeneratorFunction]";if(Object(Bi.a)(o))return Object(yp.a)(o,T);if($==hd||$==Xc||Q&&!d)w=Q?{}:fa(o);else{if(!zr[$])return d?o:{};w=sd(o,$,T)}}m||(m=new ga);var te=m.get(o);if(te)return te;m.set(o,w),dd(o)?o.forEach(function(Me){w.add(i(Me,l,s,Me,o,m))}):Yu(o)&&o.forEach(function(Me,Ie){w.set(Ie,i(Me,l,s,Ie,o,m))});var ge=C?void 0:Ya(o);return ld(ge||o,function(Me,Ie){ge&&(Me=o[Ie=Me]),Fs(w,Ie,i(Me,l,s,Ie,o,m))}),w},no=function(i){return im(i,5)},vd=function(i,o,l){(l!==void 0&&!ae(i[o],l)||l===void 0&&!(o in i))&&$s(i,o,l)},Nh=function(i){return $r(i)&&Ko(i)},Ku=Function.prototype,Rh=Object.prototype,Gs=Ku.toString,Ch=Rh.hasOwnProperty,Zu=Gs.call(Object),gi=function(i){if(!$r(i)||to(i)!="[object Object]")return!1;var o=Gc(i);if(o===null)return!0;var l=Ch.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Gs.call(l)==Zu},nl=function(i,o){if((o!=="constructor"||typeof i[o]!="function")&&o!="__proto__")return i[o]},Hl=function(i){return Us(i,ud(i))},Ju=function(i,o,l,s,h,d,m){var w=nl(i,l),T=nl(o,l),C=m.get(T);if(C)vd(i,l,C);else{var $=void 0,Q=$===void 0;if(Q){var te=lo(T),ge=!te&&Object(Bi.a)(T),Me=!te&&!ge&&$l(T);$=T,te||ge||Me?lo(w)?$=w:Nh(w)?$=gp(w):ge?(Q=!1,$=Object(yp.a)(T,!0)):Me?(Q=!1,$=Hc(T,!0)):$=[]:gi(T)||Xa(T)?($=w,Xa(w)?$=Hl(w):Dr(w)&&!Ha(w)||($=fa(T))):Q=!1}Q&&(m.set(T,$),h($,T,s,d,m),m.delete(T)),vd(i,l,$)}},Qu=function i(o,l,s,h,d){o!==l&&Qf(l,function(m,w){if(d||(d=new ga),Dr(m))Ju(o,l,w,s,i,h,d);else{var T=void 0;T===void 0&&(T=m),vd(o,w,T)}},ud)},es=wh(function(i,o,l){Qu(i,o,l)}),md={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Xl=function(i){var o=no(md);return i&&(o=es(o,i)),o};r(82),r(166);function ts(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}var yd=function(){function i(){var s,h,d;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),d={},(h="_events")in(s=this)?Object.defineProperty(s,h,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[h]=d}var o,l;return o=i,(l=[{key:"on",value:function(s,h,d){var m=this;return s==null||s.split(",").forEach(function(w){w=w.trim(),m._events[w]||(m._events[w]=[]),m._events[w].push({callback:h,once:!!d})}),this}},{key:"once",value:function(s,h){var d=this;s==null||s.split(",").forEach(function(m){return m=m.trim(),d.on(m,h,!0)})}},{key:"emit",value:function(s,h){var d=this;s==null||s.split(",").forEach(function(m){var w=d._events[m]||[],T=d._events["*"]||[],C=function($){for(var Q=$.length,te=0;te<Q;te++)if($[te]){var ge=$[te],Me=ge.callback;ge.once&&($.splice(te,1),$.length===0&&delete d._events[m],Q--,te--),Me.apply(d,[h])}};C(w),C(T)})}},{key:"off",value:function(s,h){var d=this;return s||(this._events={}),s.split(",").forEach(function(m){if(h){for(var w=d._events[m]||[],T=w.length,C=0;C<T;C++)w[C].callback===h&&(w.splice(C,1),T--,C--);w.length===0&&delete d._events[m]}else delete d._events[m]}),this}},{key:"getEvents",value:function(){return this._events}}])&&ts(o.prototype,l),i}();function rl(i,o){return o*Math.round(i/o)||i}function qc(i,o){return i%o}function Yc(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return zs(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return zs(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zs(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var Hs=function(i,o,l){var s=Yc(i,2),h=s[0],d=s[1],m=Yc(o,2),w=m[0],T=m[1],C=Yc(l,2),$=C[0],Q=C[1];return h>w&&h<$&&d>T&&d<Q},Xs=function(i,o){var l=!1;switch(o.multipleSelectKey){case"meta":l=i.metaKey;break;case"alt":l=i.altKey;break;case"shift":l=i.shiftKey;break;case"ctrl":l=i.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var gd=function(i){return function(o,l,s){var h=Object(o);if(!Ko(o)){var d=Lc(l);o=Bu(o),l=function(w){return d(h[w],w,h)}}var m=i(o,l,s);return m>-1?h[d?o[m]:m]:void 0}},qs=function(i,o,l,s){for(var h=i.length,d=l+-1;++d<h;)if(o(i[d],d,i))return d;return-1},Ep=/\s/,_d=function(i){for(var o=i.length;o--&&Ep.test(i.charAt(o)););return o},Dh=/^\s+/,Op=function(i){return i&&i.slice(0,_d(i)+1).replace(Dh,"")},ol=/^[-+]0x[0-9a-f]+$/i,Sp=/^0b[01]+$/i,xp=/^0o[0-7]+$/i,Ap=parseInt,Ys=function(i){if(typeof i=="number")return i;if(mr(i))return NaN;if(Dr(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=Dr(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=Op(i);var l=Sp.test(i);return l||xp.test(i)?Ap(i.slice(2),l?2:8):ol.test(i)?NaN:+i},Sl=1/0,Kc=function(i){return i?(i=Ys(i))===Sl||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:i===0?i:0},bd=function(i){var o=Kc(i),l=o%1;return o==o?l?o-l:o:0},wd=Math.max,yu,gu=gd(function(i,o,l){var s=i==null?0:i.length;if(!s)return-1;var h=l==null?0:bd(l);return h<0&&(h=wd(s+h,0)),qs(i,Lc(o),h)}),nr=new Uint8Array(16);function Ks(){if(!yu&&!(yu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yu(nr)}for(var Zc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,il=function(i){return typeof i=="string"&&Zc.test(i)},di=[],ns=0;ns<256;++ns)di.push((ns+256).toString(16).substr(1));var Ro=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(di[i[o+0]]+di[i[o+1]]+di[i[o+2]]+di[i[o+3]]+"-"+di[i[o+4]]+di[i[o+5]]+"-"+di[i[o+6]]+di[i[o+7]]+"-"+di[i[o+8]]+di[i[o+9]]+"-"+di[i[o+10]]+di[i[o+11]]+di[i[o+12]]+di[i[o+13]]+di[i[o+14]]+di[i[o+15]]).toLowerCase();if(!il(l))throw TypeError("Stringified UUID is invalid");return l},_u=function(i,o,l){var s=(i=i||{}).random||(i.rng||Ks)();return s[6]=15&s[6]|64,s[8]=63&s[8]|128,Ro(s)},ra=function(){return _u()},Jc=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=i.nodes.reduce(function(s,h){return s[h.id]=o+_u(),h.id=s[h.id],s},{});return i.edges.forEach(function(s){s.id=o+_u(),s.sourceNodeId=l[s.sourceNodeId],s.targetNodeId=l[s.targetNodeId]}),i},$i=(r(105),r(127),r(207),function(i,o,l){var s=i.x,h=i.y,d=o.x,m=o.y,w=l.x,T=l.y,C=(T-m)/(w-d),$=m-C*d;return s>=d&&s<=w&&h>=m&&h<=T&&Math.abs(h-C*s+$)<Number.EPSILON});function Wo(i){return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Wo(i)}function xl(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Al(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xl(Object(l),!0).forEach(function(s){Ed(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xl(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Ed(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Pt,rs,Qc,ef,bu,os,Od,Tp,is,tf,Sd,Mp,Tl,kp,al,wu,xd,jh,Ih,Lh,Pp,Ad=function(i){return i.anchors},nf=function(i,o){for(var l,s=o.nodes,h=s.length-1;h>=0;h--){var d=s[h];if(am(i,d)){var m=d.getTargetAnchor(i);if(m){var w={node:d,anchorIndex:m.index,anchor:m.anchor};l&&!$h(d,l.node,o)||(l=w)}}}return l},$h=function(i,o,l){return i.zIndex>o.zIndex||l.nodesMap[i.id].index>l.nodesMap[o.id].index},ll=function(i,o,l,s){return Math.hypot(i-l,o-s)},Eu=function(i,o){var l=!1,s=Oo(o);return i.x>=s.minX-0&&i.x<=s.maxX+0&&i.y>=s.minY-0&&i.y<=s.maxY+0&&(l=!0),l},am=function(i,o){var l=!1,s=Oo(o);return i.x>=s.minX-5&&i.x<=s.maxX+5&&i.y>=s.minY-5&&i.y<=s.maxY+5&&(l=!0),l},Oo=function(i){var o=i.x,l=i.y,s=i.width,h=i.height;return{minX:o-s/2,minY:l-h/2,maxX:o+s/2,maxY:l+h/2,x:o,y:l,width:s,height:h,centerX:o,centerY:l}},rf=function(i,o,l){var s,h=function(m){var w=m,T=w.x,C=w.y,$=w.width,Q=w.height,te=w.radius;return[{x:T-$/2+te,y:C-Q/2+te,r:te},{x:T+$/2-te,y:C-Q/2+te,r:te},{x:T-$/2+te,y:C+Q/2-te,r:te},{x:T+$/2-te,y:C+Q/2-te,r:te}]}(l),d=Number.MAX_SAFE_INTEGER;return h.forEach(function(m){var w=ll(i.x,i.y,m.x,m.y);w<d&&(d=w,s=m)}),as(i,o,s)},as=function(i,o,l){var s,h=l,d=h.x,m=h.y,w=h.r;if(o===po.HORIZONTAL){var T=d-Math.sqrt(w*w-(i.y-m)*(i.y-m)),C=d+Math.sqrt(w*w-(i.y-m)*(i.y-m));s={x:Math.abs(T-i.x)<Math.abs(C-i.x)?T:C,y:i.y}}else if(o===po.VERTICAL){var $=m-Math.sqrt(w*w-(i.x-d)*(i.x-d)),Q=m+Math.sqrt(w*w-(i.x-d)*(i.x-d)),te=Math.abs($-i.y)<Math.abs(Q-i.y)?$:Q;s={x:i.x,y:te}}return s},of=function(i,o){var l=o,s=!1,h=l.x-l.width/2+l.radius,d=l.x+l.width/2-l.radius,m=l.y-l.height/2+l.radius,w=l.y+l.height/2-l.radius,T=l.x,C=l.y,$=l.width,Q=l.height;return i.y===C+Q/2||i.y===C-Q/2?s=i.x>h&&i.x<d:i.x!==T+$/2&&i.x!==T-$/2||(s=i.y>m&&i.y<w),s},Zs=function(i,o,l){var s,h=l,d=h.x,m=h.y,w=h.rx,T=h.ry;if(o===po.HORIZONTAL){var C=d-Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T)),$=d+Math.sqrt(w*w-(i.y-m)*(i.y-m)*w*w/(T*T));s={x:Math.abs(C-i.x)<Math.abs($-i.x)?C:$,y:i.y}}else if(o===po.VERTICAL){var Q=m-Math.sqrt(T*T-(i.x-d)*(i.x-d)*T*T/(w*w)),te=m+Math.sqrt(T*T-(i.x-d)*(i.x-d)*T*T/(w*w)),ge=Math.abs(Q-i.y)<Math.abs(te-i.y)?Q:te;s={x:i.x,y:ge}}return s},af=function(i,o,l){for(var s,h=l.pointsPosition,d=Number.MAX_SAFE_INTEGER,m=[],w=0;w<h.length;w++)m.push({start:h[w],end:h[(w+1)%h.length]});return m.forEach(function(T){var C=T.start,$=T.end,Q=C,te=$;C.x>$.x&&(Q=$,te=C);var ge={x:i.x,y:i.y};if(Q.x===te.x&&o===po.HORIZONTAL&&(ge={x:Q.x,y:i.y}),Q.y===te.y&&o===po.VERTICAL&&(ge={x:i.x,y:Q.y}),Q.x!==te.x&&Q.y!==te.y){var Me=(te.y-Q.y)/(te.x-Q.x),Ie=(Q.x*te.y-te.x*Q.y)/(Q.x-te.x);o===po.HORIZONTAL?ge={x:(i.y-Ie)/Me,y:i.y}:o===po.VERTICAL&&(ge={x:i.x,y:Me*i.x+Ie})}if($i(ge,C,$)){var ut=ll(ge.x,ge.y,i.x,i.y);ut<d&&(d=ut,s=ge)}}),s},lf=function(i,o,l,s){var h=i.x,d=i.y;return o.x>i.x?h=i.x+l/2:o.x<i.x&&(h=i.x-l/2),o.y>i.y?d=i.y+s/2:o.y<i.y&&(d=i.y-s/2),{x:h,y:d}},uf=function(i){var o=i.rows,l=i.style,s=i.rowsLength,h=i.className,d=document.createElement("div");d.style.fontSize=l.fontSize,d.style.width=l.width,d.className=h,d.style.lineHeight=l.lineHeight,d.style.padding=l.padding,l.fontFamily&&(d.style.fontFamily=l.fontFamily),s>1?o.forEach(function(w){var T=document.createElement("div");T.textContent=w,d.appendChild(T)}):d.textContent=o,document.body.appendChild(d);var m=d.clientHeight;return document.body.removeChild(d),m},ls=function(i){var o=i.rows,l=i.rowsLength,s=i.fontSize,h=0;return o&&o.forEach(function(d){var m=Io(d);h=m>h?m:h}),{width:Math.ceil(h/2)*s+s/4,height:l*(s+2)+s/4}},ql=function(i){return Wo(i)!=="object"?{isAllPass:!!i,msg:i?"":"不允许连接"}:i},_i=function(i){try{return JSON.parse(JSON.stringify(i))}catch{return i}},Td=1e3,sf=999,us=function(){return++Td};function Js(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ti(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Js(Object(l),!0).forEach(function(s){Xi(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Js(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Mo(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function cf(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Xi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Fn(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Md=(Pt=function(){function i(s,h){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),Xi(this,"id",""),Mo(this,"type",rs,this),Mo(this,"sourceNodeId",Qc,this),Mo(this,"targetNodeId",ef,this),Mo(this,"startPoint",bu,this),Mo(this,"endPoint",os,this),Mo(this,"text",Od,this),Mo(this,"properties",Tp,this),Mo(this,"points",is,this),Mo(this,"pointsList",tf,this),Mo(this,"isSelected",Sd,this),Mo(this,"isHovered",Mp,this),Mo(this,"isHitable",Tl,this),Mo(this,"draggable",kp,this),Mo(this,"visible",al,this),Xi(this,"virtual",!1),Mo(this,"isAnimation",wu,this),Mo(this,"isShowAdjustPoint",xd,this),Xi(this,"graphModel",void 0),Mo(this,"zIndex",jh,this),Xi(this,"BaseType",fo.EDGE),Xi(this,"modelType",xr.EDGE),Mo(this,"state",Ih,this),Xi(this,"additionStateData",void 0),Xi(this,"sourceAnchorId",""),Xi(this,"targetAnchorId",""),Xi(this,"menu",void 0),Xi(this,"customTextPosition",!1),Mo(this,"style",Lh,this),Mo(this,"arrowConfig",Pp,this),this.graphModel=h,this.initEdgeData(s),this.setAttributes()}var o,l;return o=i,l=[{key:"initEdgeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var h=this.graphModel.idGenerator,d=h&&h(s.type),m=this.createId();s.id=m||d||ra()}this.arrowConfig.markerEnd="url(#marker-end-".concat(s.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(s.id,")");var w=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=w,Li(this,Dn(s)),this.graphModel.overlapMode===To.INCREASE&&(this.zIndex=s.zIndex||us()),this.setAnchors(),this.initPoints(),this.formatText(s)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ti(Ti({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ti({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.edgeText;return no(s)}},{key:"getEdgeAnimationStyle",value:function(){var s=this.graphModel.theme.edgeAnimation;return no(s)}},{key:"getArrowStyle",value:function(){var s=this.getEdgeStyle(),h=this.getEdgeAnimationStyle(),d=this.graphModel.theme.arrow,m=this.isAnimation?h.stroke:s.stroke;return Ti(Ti({},s),{},{fill:m,stroke:m},d)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return no(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var s,h;return(s=this.graphModel)===null||s===void 0||(h=s.nodesMap[this.sourceNodeId])===null||h===void 0?void 0:h.model}},{key:"targetNode",get:function(){var s,h;return(s=this.graphModel)===null||s===void 0||(h=s.nodesMap[this.targetNodeId])===null||h===void 0?void 0:h.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(s,h,d){var m,w,T=Ad(s);return d&&(m=gu(T,function(C){return C.id===d}))||T.forEach(function(C){var $=hr(C,h);(w===void 0||$<w)&&(w=$,m=C)}),m}},{key:"getEndAnchor",value:function(s,h){var d,m,w=this,T=Ad(s);return h&&(d=gu(T,function(C){return C.id===h}))||T.forEach(function(C){var $=hr(C,w.startPoint);(m===void 0||$<m)&&(m=$,d=C)}),d}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var s=this.text,h=s.x,d=s.y,m=s.value,w={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return m&&(w.text={x:h,y:d,value:m}),this.graphModel.overlapMode===To.INCREASE&&(w.zIndex=this.zIndex),w}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(s,h){this.properties[s]=_i(h),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=Ti(Ti({},Object(c.I)(this.properties)),_i(s)),this.setAttributes()}},{key:"changeEdgeId",value:function(s){var h=this.arrowConfig,d=h.markerEnd,m=h.markerStart;m&&m==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(s,")")),d&&d==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(s,")")),this.id=s}},{key:"setStyle",value:function(s,h){this.style=Ti(Ti({},this.style),{},Xi({},s,_i(h)))}},{key:"setStyles",value:function(s){this.style=Ti(Ti({},this.style),_i(s))}},{key:"updateStyles",value:function(s){this.style=Ti({},_i(s))}},{key:"formatText",value:function(s){var h=this.textPosition,d=h.x,m=h.y;s.text&&typeof s.text!="string"?Object.prototype.toString.call(s.text)==="[object Object]"&&(this.text={x:s.text.x||d,y:s.text.y||m,value:s.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:s.text||"",x:d,y:m,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var s=this.textPosition,h=s.x,d=s.y;this.text.x=h,this.text.y=d}},{key:"moveText",value:function(s,h){if(this.text){var d=this.text,m=d.x,w=d.y,T=d.value,C=d.draggable,$=d.editable;this.text={value:T,draggable:C,x:m+s,y:w+h,editable:$}}}},{key:"setText",value:function(s){s&&Li(this.text,s)}},{key:"updateText",value:function(s){this.text=Ti(Ti({},Object(c.I)(this.text)),{},{value:s})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var s=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!s)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:s.x,y:s.y}),this.sourceAnchorId||(this.sourceAnchorId=s.id)}if(!this.targetAnchorId||!this.endPoint){var h=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!h)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:h.x,y:h.y}),this.targetAnchorId||(this.targetAnchorId=h.id)}}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(s,h){this.state=s,this.additionStateData=h}},{key:"updateStartPoint",value:function(s){this.startPoint=s}},{key:"moveStartPoint",value:function(s,h){this.startPoint.x+=s,this.startPoint.y+=h}},{key:"updateEndPoint",value:function(s){this.endPoint=s}},{key:"moveEndPoint",value:function(s,h){this.endPoint.x+=s,this.endPoint.y+=h}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=s}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(s){Li(this,s)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var h=s.startPoint,d=s.endPoint;this.updateStartPoint({x:h.x,y:h.y}),this.updateEndPoint({x:d.x,y:d.y})}}],l&&cf(o.prototype,l),i}(),rs=Fn(Pt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=Fn(Pt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Fn(Pt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),bu=Fn(Pt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),os=Fn(Pt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Od=Fn(Pt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Tp=Fn(Pt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),is=Fn(Pt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tf=Fn(Pt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sd=Fn(Pt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mp=Fn(Pt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tl=Fn(Pt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kp=Fn(Pt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=Fn(Pt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wu=Fn(Pt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xd=Fn(Pt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jh=Fn(Pt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ih=Fn(Pt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Lh=Fn(Pt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pp=Fn(Pt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Fn(Pt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"sourceNode"),Pt.prototype),Fn(Pt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"targetNode"),Pt.prototype),Fn(Pt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Pt.prototype,"textPosition"),Pt.prototype),Fn(Pt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperty"),Pt.prototype),Fn(Pt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"deleteProperty"),Pt.prototype),Fn(Pt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setProperties"),Pt.prototype),Fn(Pt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"changeEdgeId"),Pt.prototype),Fn(Pt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyle"),Pt.prototype),Fn(Pt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setStyles"),Pt.prototype),Fn(Pt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStyles"),Pt.prototype),Fn(Pt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"formatText"),Pt.prototype),Fn(Pt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"resetTextPosition"),Pt.prototype),Fn(Pt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveText"),Pt.prototype),Fn(Pt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setText"),Pt.prototype),Fn(Pt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateText"),Pt.prototype),Fn(Pt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setAnchors"),Pt.prototype),Fn(Pt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setSelected"),Pt.prototype),Fn(Pt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHovered"),Pt.prototype),Fn(Pt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setHitable"),Pt.prototype),Fn(Pt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"openEdgeAnimation"),Pt.prototype),Fn(Pt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"closeEdgeAnimation"),Pt.prototype),Fn(Pt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setElementState"),Pt.prototype),Fn(Pt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateStartPoint"),Pt.prototype),Fn(Pt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveStartPoint"),Pt.prototype),Fn(Pt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateEndPoint"),Pt.prototype),Fn(Pt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"moveEndPoint"),Pt.prototype),Fn(Pt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"setZIndex"),Pt.prototype),Fn(Pt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"initPoints"),Pt.prototype),Fn(Pt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAttributes"),Pt.prototype),Fn(Pt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustStart"),Pt.prototype),Fn(Pt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"getAdjustEnd"),Pt.prototype),Fn(Pt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Pt.prototype,"updateAfterAdjustStartAndEnd"),Pt.prototype),Pt),ff=Md;function kd(i){return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},kd(i)}function Np(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Fh(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Np(Object(l),!0).forEach(function(s){Su(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Np(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Ou(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function Uh(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ss(){return ss=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=Vh(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},ss.apply(this,arguments)}function Vh(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yl(i))!==null;);return i}function Rp(i,o){return Rp=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Rp(i,o)}function df(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yl(i);if(o){var h=Yl(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Bh(this,l)}}function Bh(i,o){if(o&&(kd(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ua(i)}function Ua(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yl(i){return Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yl(i)}function Su(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Vn,Cp,Qs=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Rp(d,m)})(h,i);var o,l,s=df(h);function h(){var d;Ou(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Su(Ua(d=s.call.apply(s,[this].concat(w))),"modelType",xr.LINE_EDGE),d}return o=h,(l=[{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.line;return Fh(Fh({},ss(Yl(h.prototype),"getEdgeStyle",this).call(this)),no(d))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Uh(o.prototype,l),h}(ff);function Kl(i){return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kl(i)}function pf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return qi(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qi(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qi(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ul(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Co(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ul(Object(l),!0).forEach(function(s){Dp(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ul(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function da(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function Va(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function lm(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function hf(){return hf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=cs(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},hf.apply(this,arguments)}function cs(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=oa(i))!==null;);return i}function gr(i,o){return gr=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},gr(i,o)}function Wh(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=oa(i);if(o){var h=oa(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return pa(this,l)}}function pa(i,o){if(o&&(Kl(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ko(i)}function ko(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function oa(i){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},oa(i)}function Dp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mi(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Ta=(Vn=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&gr(d,m)})(h,i);var o,l,s=Wh(h);function h(){var d;Va(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return Dp(ko(d=s.call.apply(s,[this].concat(w))),"modelType",xr.POLYLINE_EDGE),Dp(ko(d),"draggingPointList",void 0),da(ko(d),"dbClickPosition",Cp,ko(d)),d}return o=h,(l=[{key:"initEdgeData",value:function(d){this.offset=30,hf(oa(h.prototype),"initEdgeData",this).call(this,d)}},{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.polyline;return Co(Co({},hf(oa(h.prototype),"getEdgeStyle",this).call(this)),no(d))}},{key:"getTextPosition",value:function(){var d,m=(d=this.text)===null||d===void 0?void 0:d.value;if(this.dbClickPosition&&!m){var w=this.dbClickPosition;return{x:w.x,y:w.y}}var T=or(this.points),C=pf(Wn(T),2),$=C[0],Q=C[1];return{x:($.x+Q.x)/2,y:($.y+Q.y)/2}}},{key:"getAfterAnchor",value:function(d,m,w){var T,C;return w.forEach(function($){var Q;d===po.HORIZONTAL?Q=Math.abs(m.y-$.y):d===po.VERTICAL&&(Q=Math.abs(m.x-$.x)),(!C||C>Q)&&(C=Q,T=$)}),T}},{key:"getCrossPoint",value:function(d,m,w){var T;return d===po.HORIZONTAL?T={x:w.x,y:m.y}:d===po.VERTICAL&&(T={x:m.x,y:w.y}),T}},{key:"removeCrossPoints",value:function(d,m,w){var T=w.map(function(lt){return lt});if(d===1){var C=T[d],$=T[m],Q=T[d-1];if(ir(Q,C,this.sourceNode)){if(_r(C,$,this.sourceNode)){var te=jo(C,$,this.sourceNode);te&&(T[d]=te,T.splice(d-1,1),d--,m--)}}else this.sourceNode.anchors.forEach(function(lt){(lt.x===Q.x&&lt.x===C.x||lt.y===Q.y&&lt.y===C.y)&&ll(lt.x,lt.y,C.x,C.y)<ll(Q.x,Q.y,C.x,C.y)&&(T[d-1]=lt)})}if(m===w.length-2){var ge=T[d],Me=T[m],Ie=T[m+1];if(ir(Me,Ie,this.targetNode)){if(_r(ge,Me,this.targetNode)){var ut=jo(ge,Me,this.targetNode);ut&&(T[m]=ut,T.splice(m+1,1))}}else this.targetNode.anchors.forEach(function(lt){(lt.x===Ie.x&&lt.x===Me.x||lt.y===Ie.y&&lt.y===Me.y)&&ll(lt.x,lt.y,Me.x,Me.y)<ll(Ie.x,Ie.y,Me.x,Me.y)&&(T[m+1]=lt)})}return T}},{key:"getDraggingPoints",value:function(d,m,w,T,C){var $=C.map(function(ge){return ge}),Q=this.getAfterAnchor(d,w,T),te=this.getCrossPoint(d,w,Q);return m==="start"?($.unshift(te),$.unshift(Q)):($.push(te),$.push(Q)),$}},{key:"updateCrossPoints",value:function(d){var m=d.map(function(Bt){return Bt}),w=d[0],T=d[1],C=d[m.length-2],$=d[m.length-1],Q=this.sourceNode,te=this.targetNode,ge=Q.modelType,Me=te.modelType,Ie=Po(w,T),ut=m[0];switch(ge){case xr.RECT_NODE:Q.radius!==0&&(of(w,Q)||(ut=rf(w,Ie,Q)));break;case xr.CIRCLE_NODE:ut=as(w,Ie,Q);break;case xr.ELLIPSE_NODE:ut=Zs(w,Ie,Q);break;case xr.DIAMOND_NODE:case xr.POLYGON_NODE:ut=af(w,Ie,Q)}ut&&(m[0]=ut);var lt=Po(C,$),_t=m[m.length-1];switch(Me){case xr.RECT_NODE:te.radius!==0&&(of($,te)||(_t=rf($,lt,te)));break;case xr.CIRCLE_NODE:_t=as($,lt,te);break;case xr.ELLIPSE_NODE:_t=Zs($,lt,te);break;case xr.DIAMOND_NODE:case xr.POLYGON_NODE:_t=af($,lt,te)}return _t&&(m[m.length-1]=_t),m}},{key:"getData",value:function(){var d=hf(oa(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Object.assign({},d,{pointsList:m})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(d){return"".concat(d.x,",").concat(d.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var d=ur({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=d,this.points=d.map(function(m){return"".concat(m.x,",").concat(m.y)}).join(" ")}},{key:"updateStartPoint",value:function(d){this.startPoint=Object.assign({},d),this.updatePoints()}},{key:"moveStartPoint",value:function(d,m){this.startPoint.x+=d,this.startPoint.y+=m,this.updatePoints()}},{key:"updateEndPoint",value:function(d){this.endPoint=Object.assign({},d),this.updatePoints()}},{key:"moveEndPoint",value:function(d,m){this.endPoint.x+=d,this.endPoint.y+=m,this.updatePoints()}},{key:"updatePointsList",value:function(d,m){this.pointsList.forEach(function(C){C.x+=d,C.y+=m});var w=this.pointsList[0];this.startPoint=Object.assign({},w);var T=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},T),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(d){return d})}},{key:"dragAppendSimple",value:function(d,m){this.isDragging=!0;var w=d.start,T=d.end,C=d.startIndex,$=d.endIndex,Q=d.direction,te=this.pointsList,ge=te;return Q===po.HORIZONTAL?(te[C]={x:w.x,y:w.y+m.y},te[$]={x:T.x,y:T.y+m.y},ge=this.pointsList.map(function(Me){return Me})):Q===po.VERTICAL&&(te[C]={x:w.x+m.x,y:w.y},te[$]={x:T.x+m.x,y:T.y},ge=this.pointsList.map(function(Me){return Me})),this.updatePointsAfterDrag(ge),this.draggingPointList=ge,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[C]),end:Object.assign({},te[$]),startIndex:C,endIndex:$,direction:Q}}},{key:"dragAppend",value:function(d,m){this.isDragging=!0;var w=d.start,T=d.end,C=d.startIndex,$=d.endIndex,Q=d.direction,te=this.pointsList;if(Q===po.HORIZONTAL){te[C]={x:w.x,y:w.y+m.y},te[$]={x:T.x,y:T.y+m.y};var ge=this.pointsList.map(function(vn){return vn});if(C!==0&&$!==this.pointsList.length-1&&(ge=this.removeCrossPoints(C,$,ge)),C===0){var Me={x:w.x,y:w.y+m.y};if(!Eu(Me,this.sourceNode)){var Ie=this.sourceNode.anchors;ge=this.getDraggingPoints(Q,"start",Me,Ie,ge)}}if($===this.pointsList.length-1){var ut={x:T.x,y:T.y+m.y};if(!Eu(ut,this.targetNode)){var lt=this.targetNode.anchors;ge=this.getDraggingPoints(Q,"end",ut,lt,ge)}}this.updatePointsAfterDrag(ge),this.draggingPointList=ge}else if(Q===po.VERTICAL){te[C]={x:w.x+m.x,y:w.y},te[$]={x:T.x+m.x,y:T.y};var _t=this.pointsList.map(function(vn){return vn});if(C!==0&&$!==this.pointsList.length-1&&(_t=this.removeCrossPoints(C,$,_t)),C===0){var Bt={x:w.x+m.x,y:w.y};if(!Eu(Bt,this.sourceNode)){var _n=this.sourceNode.anchors;_t=this.getDraggingPoints(Q,"start",Bt,_n,_t)}}if($===this.pointsList.length-1){var gn={x:T.x+m.x,y:T.y};if(!Eu(gn,this.targetNode)){var zn=this.targetNode.anchors;_t=this.getDraggingPoints(Q,"end",gn,zn,_t)}}this.updatePointsAfterDrag(_t),this.draggingPointList=_t}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},te[C]),end:Object.assign({},te[$]),startIndex:C,endIndex:$,direction:Q}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var d=hn(or(this.points));this.pointsList=d.map(function(T){return T}),this.draggingPointList=[];var m=d[0];this.startPoint=Object.assign({},m);var w=d[d.length-1];this.endPoint=Object.assign({},w)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(d){var m=this.updateCrossPoints(d);this.points=m.map(function(w){return"".concat(w.x,",").concat(w.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var d=this.pointsList;return d[d.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(d){var m=d.startPoint,w=d.endPoint,T=d.sourceNode,C=d.targetNode,$=ur({x:m.x,y:m.y},{x:w.x,y:w.y},T,C,this.offset||0);this.pointsList=$,this.initPoints()}}])&&lm(o.prototype,l),h}(ff),Cp=Mi(Vn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi(Vn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"initPoints"),Vn.prototype),Mi(Vn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePoints"),Vn.prototype),Mi(Vn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateStartPoint"),Vn.prototype),Mi(Vn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"moveStartPoint"),Vn.prototype),Mi(Vn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateEndPoint"),Vn.prototype),Mi(Vn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"moveEndPoint"),Vn.prototype),Mi(Vn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePointsList"),Vn.prototype),Mi(Vn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendStart"),Vn.prototype),Mi(Vn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendSimple"),Vn.prototype),Mi(Vn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppend"),Vn.prototype),Mi(Vn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"dragAppendEnd"),Vn.prototype),Mi(Vn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updatePointsAfterDrag"),Vn.prototype),Mi(Vn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"getAdjustStart"),Vn.prototype),Mi(Vn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"getAdjustEnd"),Vn.prototype),Mi(Vn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Vn.prototype,"updateAfterAdjustStartAndEnd"),Vn.prototype),Vn),fs=function(i){var o=i.start,l=i.end,s=i.offset,h=i.verticalLength,d=i.type,m={leftX:0,leftY:0,rightX:0,rightY:0},w=Math.atan((l.y-o.y)/(l.x-o.x)),T=Math.atan(s/h),C=Math.sqrt(h*h+s*s);return d==="start"?l.x>=o.x?(m.leftX=o.x+C*Math.sin(w+T),m.leftY=o.y-C*Math.cos(w+T),m.rightX=o.x-C*Math.sin(w-T),m.rightY=o.y+C*Math.cos(w-T)):(m.leftX=o.x-C*Math.sin(w+T),m.leftY=o.y+C*Math.cos(w+T),m.rightX=o.x+C*Math.sin(w-T),m.rightY=o.y-C*Math.cos(w-T)):d==="end"&&(l.x>=o.x?(m.leftX=l.x+C*Math.sin(w-T),m.leftY=l.y-C*Math.cos(w-T),m.rightX=l.x-C*Math.sin(w+T),m.rightY=l.y+C*Math.cos(w+T)):(m.leftX=l.x-C*Math.sin(w-T),m.leftY=l.y+C*Math.cos(w-T),m.rightX=l.x+C*Math.sin(w+T),m.rightY=l.y-C*Math.cos(w+T))),m},vf={x:1,y:0,z:0};function Do(i,o,l,s,h){for(var d=function(Me){if(Me<0||Me>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:i.x*Math.pow(1-Me,3)+3*o.x*Me*Math.pow(1-Me,2)+3*l.x*Math.pow(Me,2)*(1-Me)+s.x*Math.pow(Me,3),y:i.y*Math.pow(1-Me,3)+3*o.y*Me*Math.pow(1-Me,2)+3*l.y*Math.pow(Me,2)*(1-Me)+s.y*Math.pow(Me,3)}},m=0,w=2,T=s.x,C=s.y,$=s;m<h&&w<50;){var Q=$=d(1-w/100),te=Q.x,ge=Q.y;m=ll(T,C,te,ge),w++}return $}function Go(i){var o=Math.hypot(i.x,i.y);return{x:i.x/o,y:i.y/o,z:0}}function Pd(i){return s=function(d,m){return d.x*m.y-d.y*m.x}(o=vf,l=i),h=Math.acos(function(d,m){var w=[d.x,d.y,d.z];return[m.x,m.y,m.z].reduce(function(T,C,$){return T+C*w[$]})}(Go(o),Go(l))),s>=0?h:-h;var o,l,s,h}function jp(i){return i*(180/Math.PI)}function W(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function se(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?W(Object(l),!0).forEach(function(s){Oe(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):W(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Oe(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function it(i){return function(o){if(Array.isArray(o))return Rt(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||pt(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mt(i){return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},mt(i)}function tt(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||pt(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(i,o){if(i){if(typeof i=="string")return Rt(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Rt(i,o):void 0}}function Rt(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var $t=function(i,o){var l;switch(i.type){case"line":default:l=new Qs(i,o);break;case"polyline":l=new Ta(i,o)}return l},Ct=function(i,o){return 2*Math.abs(i.centerX-o.centerX)<i.width+o.width&&2*Math.abs(i.centerY-o.centerY)<i.height+o.height},ft=function(i){var o=[],l={};return i.forEach(function(s){var h="".concat(s.x,"-").concat(s.y);s.id=h,l[h]=s}),Object.keys(l).forEach(function(s){o.push(l[s])}),o},qt=function(i,o){var l=[i,{x:i.x,y:o.y},o];return ft(l)},Vt=function(i,o){return i.width===0&&i.height===0?i:{centerX:i.centerX,centerY:i.centerY,minX:i.minX-o,minY:i.minY-o,maxX:i.maxX+o,maxY:i.maxY+o,height:i.height+2*o,width:i.width+2*o}},Dt=function(i,o){var l=Math.abs(i.x-o.centerX),s=Math.abs(i.y-o.centerY);return l/o.width>s/o.height?po.HORIZONTAL:po.VERTICAL},Et=function(i,o,l){return Dt(l,o)===po.HORIZONTAL?{x:l.x>i.centerX?i.maxX:i.minX,y:l.y}:{x:l.x,y:l.y>i.centerY?i.maxY:i.minY}},Ze=function(i,o){var l=Math.min(i.minX,o.minX),s=Math.min(i.minY,o.minY),h=Math.max(i.maxX,o.maxX),d=Math.max(i.maxY,o.maxY);return{centerX:(l+h)/2,centerY:(s+d)/2,minX:l,minY:s,maxX:h,maxY:d,height:d-s,width:h-l}},ct=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=[],s=[];i.forEach(function($){l.push($.x),s.push($.y)});var h=Math.min.apply(Math,l),d=Math.max.apply(Math,l),m=Math.min.apply(Math,s),w=Math.max.apply(Math,s),T=d-h,C=w-m;return o&&(T+=o,C+=o),{centerX:(h+d)/2,centerY:(m+w)/2,maxX:d,maxY:w,minX:h,minY:m,x:(h+d)/2,y:(m+w)/2,height:C,width:T}},Lt=function(i){var o=i.minX,l=i.minY,s=i.maxX,h=i.maxY;return[{x:o,y:l},{x:s,y:l},{x:s,y:h},{x:o,y:h}]},en=function(i,o){var l=i.x,s=i.y;return l<o.minX||l>o.maxX||s<o.minY||s>o.maxY},xt=function(i,o){return o<i.minX||o>i.maxX?[]:[{x:o,y:i.minY},{x:o,y:i.maxY}]},an=function(i,o){return o<i.minY||o>i.maxY?[]:[{x:i.minX,y:o},{x:i.maxX,y:o}]},Tt=function(i,o){return xt(i,o.x).concat(an(i,o.y))},Ht=function(i,o){return Math.abs(i.x-o.x)+Math.abs(i.y-o.y)},At=function(i,o){var l=0;return o.forEach(function(s){s&&(i.x===s.x&&(l+=-2),i.y===s.y&&(l+=-2))}),l},Zt=function(i,o,l,s,h){return Ht(i,o)+Ht(i,l)+At(i,[o,l,s,h])},Pn=function i(o,l,s,h,d){d||(d=0),o.unshift(l[h]),s[h]&&s[h]!==h&&d<=100&&i(o,l,s,s[h],d+1)},Bn=function(i,o){var l=i.indexOf(o);l>-1&&i.splice(l,1)},jt=function(i,o,l,s){var h=o.x-i.x,d=o.y-i.y,m=s.x-l.x,w=s.y-l.y,T=(-d*(i.x-l.x)+h*(i.y-l.y))/(-m*d+h*w),C=(m*(i.y-l.y)-w*(i.x-l.x))/(-m*d+h*w);return T>=0&&T<=1&&C>=0&&C<=1},Mt=function(i,o,l){if(l.width===0&&l.height===0)return!1;var s=tt(Lt(l),4),h=s[0],d=s[1],m=s[2],w=s[3];return jt(i,o,h,d)||jt(i,o,h,w)||jt(i,o,d,m)||jt(i,o,m,w)},St=function(i,o,l,s){var h=[];return i.forEach(function(d){d!==o&&(d.x!==o.x&&d.y!==o.y||Mt(d,o,l)||Mt(d,o,s)||h.push(d))}),ft(h)},jn=function(i,o,l,s,h,d,m){var w=[],T=[o],C={},$={},Q={};$[o.id]=0,Q[o.id]=Zt(o,l,o);var te={};i.forEach(function(Ie){te[Ie.id]=Ie});for(var ge=function(){var Ie=void 0,ut=1/0;if(T.forEach(function(_t){Q[_t.id]<ut&&(ut=Q[_t.id],Ie=_t)}),Ie===l){var lt=[];return Pn(lt,te,C,l.id),{v:lt}}Bn(T,Ie),w.push(Ie),St(i,Ie,s,h).forEach(function(_t){if(w.indexOf(_t)===-1){T.indexOf(_t)===-1&&T.push(_t);var Bt=Q[Ie.id]+Ht(Ie,_t);$[_t.id]&&Bt>=$[_t.id]||(C[_t.id]=Ie.id,$[_t.id]=Bt,Q[_t.id]=$[_t.id]+Zt(_t,l,o,d,m))}})};T.length;){var Me=ge();if(mt(Me)==="object")return Me.v}return[o,l]},rr=function(i){return Oo(i)},hn=function(i){for(var o=1;o<i.length-1;){var l=i[o-1],s=i[o],h=i[o+1];l.x===s.x&&s.x===h.x||l.y===s.y&&s.y===h.y?i.splice(o,1):o++}return i},ur=function(i,o,l,s,h){var d=rr(l),m=rr(s),w=Vt(d,h),T=Vt(m,h),C=Et(w,d,i),$=Et(T,m,o);if(Ct(w,T)){var Q=Zo(i,o,C,$);return[i,C].concat(it(Q),[$,o])}var te=ct([C,$]),ge=Ze(w,te),Me=Ze(T,te),Ie=[];Ie=(Ie=Ie.concat(Lt(ge))).concat(Lt(Me));var ut={x:(i.x+o.x)/2,y:(i.y+o.y)/2};[te,ge,Me].forEach(function(_t){Ie=Ie.concat(Tt(_t,ut).filter(function(Bt){return en(Bt,w)&&en(Bt,T)}))}),[{x:C.x,y:$.y},{x:$.x,y:C.y}].forEach(function(_t){en(_t,w)&&en(_t,T)&&Ie.push(_t)}),Ie.unshift(C),Ie.push($),Ie=ft(Ie);var lt=jn(Ie,C,$,d,m,i,o);return lt.unshift(i),lt.push(o),lt.length>2&&(lt=hn(lt)),ft(lt)},Wn=function(i){var o;if(i.length===1)o=[i[0],i[0]];else if(i.length>=2){for(var l=i[0],s=i[1],h=ll(l.x,l.y,s.x,s.y),d=1;d<i.length-1;d++){var m=i[d],w=i[d+1],T=ll(m.x,m.y,w.x,w.y);T>h&&(h=T,l=m,s=w)}o=[l,s]}return o},ir=function(i,o,l){var s=Eu(i,l),h=Eu(o,l);return s&&h},_r=function(i,o,l){var s=Eu(i,l),h=Eu(o,l);return!(s&&h)&&(s||h)},jo=function(i,o,l){for(var s,h,d=Oo(l),m=Lt(d),w=0;w<m.length;w++)jt(i,o,m[w],m[(w+1)%m.length])&&(h=[m[w],m[(w+1)%m.length]]);return h&&(s=function(T,C,$,Q){var te=(C.y-T.y)*(Q.x-$.x)-(T.x-C.x)*($.y-Q.y);if(te===0)return!1;var ge=((C.x-T.x)*(Q.x-$.x)*($.y-T.y)+(C.y-T.y)*(Q.x-$.x)*T.x-(Q.y-$.y)*(C.x-T.x)*$.x)/te,Me=-((C.y-T.y)*(Q.y-$.y)*($.x-T.x)+(C.x-T.x)*(Q.y-$.y)*T.y-(Q.x-$.x)*(C.y-T.y)*$.y)/te;return(ge-T.x)*(ge-C.x)<=0&&(Me-T.y)*(Me-C.y)<=0&&(ge-$.x)*(ge-Q.x)<=0&&(Me-$.y)*(Me-Q.y)<=0&&{x:ge,y:Me}}(i,o,h[0],h[1])),s},Po=function(i,o){var l;return i.x===o.x?l=po.VERTICAL:i.y===o.y&&(l=po.HORIZONTAL),l},or=function(i){var o=i.split(" "),l=[];return o&&o.forEach(function(s){var h=tt(s.split(","),2),d=h[0],m=h[1];l.push({x:Number(d),y:Number(m)})}),l},Zo=function(i,o,l,s){var h=[];if(Po(i,l)===Po(o,s))i.y===l.y?(h.push({x:l.x,y:(l.y+s.y)/2}),h.push({x:s.x,y:(l.y+s.y)/2})):(h.push({x:(l.x+s.x)/2,y:l.y}),h.push({x:(l.x+s.x)/2,y:s.y}));else{var d={x:l.x,y:s.y},m=$i(d,i,l),w=$i(d,o,s);if(m||w)d={x:s.x,y:l.y};else{var T=uo(d,i,l),C=uo(d,o,s);T&&C&&(d={x:s.x,y:l.y})}h.push(d)}return h},uo=function(i,o,l){return i.x===o.x&&i.x===l.x||i.y===o.y&&i.y===l.y},Io=function(i){if(!i)return 0;for(var o=0,l=0;l<i.length;l++){var s=i.charCodeAt(l);i.match(/[A-Z]/)?o+=1.5:o+=s>=1&&s<=126||s>=65376&&s<=65439?1:2}return o},zo=null,ii=function(i,o){zo||(zo=document.createElement("canvas"));var l=zo.getContext("2d");return l.font=o,l.measureText(i).width},pi=function(i){var o,l=i.start,s=i.end;if(l.x===s.x&&l.y===s.y)o="";else{var h={start:l,end:s,offset:10,verticalLength:5},d=fs(se(se({},h),{},{type:"start"})),m=fs(se(se({},h),{},{type:"end"}));o="M".concat(d.leftX," ").concat(d.leftY,` 
    L`).concat(d.rightX," ").concat(d.rightY,` 
    L`).concat(m.rightX," ").concat(m.rightY,`
    L`).concat(m.leftX," ").concat(m.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Jo=function(i){var o=i.start,l=i.end,s=i.sourceNode,h=i.targetNode,d=i.offset,m=Oo(s),w=Oo(h),T=Vt(m,d),C=Vt(w,d);return{sNext:Et(T,m,o),ePre:Et(C,w,l)}},yo=function(i){var o=i.replace(/M/g,"").replace(/C/g,",").split(",");return[Kn(o[0]),Kn(o[1]),Kn(o[2]),Kn(o[3])]},Kn=function(i){var o=tt(i.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},hi=function(i,o){var l=tt(i,4);return[Do(l[0],l[1],l[2],l[3],o),i[3]]},Tr=function(i,o){for(var l,s=i.x,h=i.y,d=or(o),m=Number.MAX_SAFE_INTEGER,w=[],T=0;T<d.length;T++)w.push({start:d[T],end:d[(T+1)%d.length]});if(w.forEach(function(te){var ge=te.start,Me=te.end;if(ge.x===Me.x){var Ie={x:ge.x,y:h};if($i(Ie,ge,Me)){var ut=Math.abs(ge.x-s);ut<m&&(m=ut,l=Ie)}}else if(ge.y===Me.y){var lt={x:s,y:ge.y};if($i(lt,ge,Me)){var _t=Math.abs(ge.y-h);_t<m&&(m=_t,l=lt)}}}),!l){var C=w[0],$=C.start,Q=C.end;l={x:$.x+(Q.x-$.x)/2,y:$.y+(Q.y-$.y)/2}}return l},Dn=function(i){return tl(i,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},hr=function(i,o){return Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2))};function Zn(i,o){return typeof o!="function"?function(l,s,h){return Object.assign({type:i.edgeType},h)}:function(l,s,h){var d=o(l,s,h);return d?typeof d=="string"?Object.assign({},h,{type:d}):Object.assign({type:d},h):{type:i.edgeType}}}r(208);var go=function(){};function Ml(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function So(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ye=function(){function i(s){var h=this,d=s.onDragStart,m=d===void 0?go:d,w=s.onDragging,T=w===void 0?go:w,C=s.onDragEnd,$=C===void 0?go:C,Q=s.eventType,te=Q===void 0?"":Q,ge=s.eventCenter,Me=ge===void 0?null:ge,Ie=s.step,ut=Ie===void 0?1:Ie,lt=s.isStopPropagation,_t=lt===void 0||lt,Bt=s.model,_n=Bt===void 0?null:Bt,gn=s.data,zn=gn===void 0?null:gn;(function(vn,In){if(!(vn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,i),So(this,"onDragStart",void 0),So(this,"onDragging",void 0),So(this,"onDragEnd",void 0),So(this,"step",void 0),So(this,"isStopPropagation",void 0),So(this,"isDragging",!1),So(this,"isStartDragging",!1),So(this,"startX",0),So(this,"startY",0),So(this,"sumDeltaX",0),So(this,"sumDeltaY",0),So(this,"eventType",void 0),So(this,"eventCenter",void 0),So(this,"model",void 0),So(this,"data",void 0),So(this,"startTime",void 0),So(this,"handleMouseDown",function(vn){var In,An,jr,Ur=(In=window)===null||In===void 0?void 0:In.document;if(vn.button===0){h.isStopPropagation&&vn.stopPropagation(),h.isStartDragging=!0,h.startX=vn.clientX,h.startY=vn.clientY,Ur.addEventListener("mousemove",h.handleMouseMove,!1),Ur.addEventListener("mouseup",h.handleMouseUp,!1);var pr=(An=h.model)===null||An===void 0?void 0:An.getData();(jr=h.eventCenter)===null||jr===void 0||jr.emit(Cn["".concat(h.eventType,"_MOUSEDOWN")],{e:vn,data:h.data||pr}),h.startTime=new Date().getTime()}}),So(this,"handleMouseMove",function(vn){if(h.isStopPropagation&&vn.stopPropagation(),h.isStartDragging&&(h.sumDeltaX+=vn.clientX-h.startX,h.sumDeltaY+=vn.clientY-h.startY,h.startX=vn.clientX,h.startY=vn.clientY,h.step<=1||Math.abs(h.sumDeltaX)>h.step||Math.abs(h.sumDeltaY)>h.step)){var In,An=h.sumDeltaX%h.step,jr=h.sumDeltaY%h.step,Ur=h.sumDeltaX-An,pr=h.sumDeltaY-jr;h.sumDeltaX=An,h.sumDeltaY=jr;var Kr,bi=(In=h.model)===null||In===void 0?void 0:In.getData();h.isDragging||((Kr=h.eventCenter)===null||Kr===void 0||Kr.emit(Cn["".concat(h.eventType,"_DRAGSTART")],{e:vn,data:h.data||bi}),h.onDragStart({event:vn})),h.isDragging=!0,Promise.resolve().then(function(){var wi,Ma;h.onDragging({deltaX:Ur,deltaY:pr,event:vn}),(wi=h.eventCenter)===null||wi===void 0||wi.emit(Cn["".concat(h.eventType,"_MOUSEMOVE")],{e:vn,data:h.data||bi}),(Ma=h.eventCenter)===null||Ma===void 0||Ma.emit(Cn["".concat(h.eventType,"_DRAG")],{e:vn,data:h.data||bi})})}}),So(this,"handleMouseUp",function(vn){var In=window.document;h.isStartDragging=!1,h.isStopPropagation&&vn.stopPropagation(),Promise.resolve().then(function(){var An,jr,Ur;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1);var pr=(An=h.model)===null||An===void 0?void 0:An.getData();(jr=h.eventCenter)===null||jr===void 0||jr.emit(Cn["".concat(h.eventType,"_MOUSEUP")],{e:vn,data:h.data||pr}),h.isDragging&&(h.isDragging=!1,h.onDragEnd({event:vn}),(Ur=h.eventCenter)===null||Ur===void 0||Ur.emit(Cn["".concat(h.eventType,"_DROP")],{e:vn,data:h.data||pr}))})}),So(this,"cancelDrag",function(){var vn,In=(vn=window)===null||vn===void 0?void 0:vn.document;In.removeEventListener("mousemove",h.handleMouseMove,!1),In.removeEventListener("mouseup",h.handleMouseUp,!1),h.onDragEnd({event:null}),h.isDragging=!1}),this.onDragStart=m,this.onDragging=T,this.onDragEnd=$,this.step=ut,this.isStopPropagation=_t,this.eventType=te,this.eventCenter=Me,this.model=_n,this.data=zn}var o,l;return o=i,(l=[{key:"setStep",value:function(s){this.step=s}},{key:"setModel",value:function(s){this.model=s}}])&&Ml(o.prototype,l),i}();function at(i){return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},at(i)}function nt(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sn(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function dr(i,o,l){return o&&sn(i.prototype,o),i}function ve(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&Ue(i,o)}function re(i){var o=Re();return function(){var l,s=he(i);if(o){var h=he(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Ne(this,l)}}function Ne(i,o){if(o&&(at(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ze(i)}function ze(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Je(i){var o=typeof Map=="function"?new Map:void 0;return Je=function(l){if(l===null||(s=l,Function.toString.call(s).indexOf("[native code]")===-1))return l;var s;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return De(l,arguments,he(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),Ue(h,l)},Je(i)}function De(i,o,l){return De=Re()?Reflect.construct:function(s,h,d){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(s,m));return d&&Ue(w,d.prototype),w},De.apply(null,arguments)}function Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ue(i,o){return Ue=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Ue(i,o)}function he(i){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},he(i)}function Te(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function de(i,o){return i instanceof Xe&&o instanceof Xe}var He=function(i){ve(l,i);var o=re(l);function l(s,h,d){var m;return nt(this,l),Te(ze(m=o.call(this,3)),"x",void 0),Te(ze(m),"y",void 0),Te(ze(m),"z",void 0),m[0]=s,m[1]=h,m[2]=d,m.x=s,m.y=h,m.z=d,Object.setPrototypeOf(ze(m),l.prototype),m}return dr(l,[{key:"add",value:function(s){if(de(this,s))return new Xe(this.x+s.x,this.y+s.y);var h=this.z+s.z;return new p((this.x+s.x)/h,(this.y+s.y)/h)}},{key:"subtract",value:function(s){if(de(this,s))return new Xe(this.x-s.x,this.y-s.y);var h=this.z-s.z;return h===0?new Xe(this.x-s.x,this.y-s.y):new p((this.x-s.x)/h,(this.y-s.y)/h)}}]),l}(Je(Array)),Xe=function(i){ve(l,i);var o=re(l);function l(s,h,d){var m;return nt(this,l),m=o.call(this,s,h,d??0),Object.setPrototypeOf(ze(m),l.prototype),m}return dr(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(s){var h=this;return s.reduce(function(d,m,w){return d+m*h[w]})}},{key:"cross",value:function(s){return new l(this.y*s.z-this.z*s.y,this.z*s.x-this.x*s.z,this.x*s.y-this.y*s.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var s=this.getLength();return new l(this.x/s,this.y/s)}},{key:"crossZ",value:function(s){return this.x*s.y-this.y*s.x}},{key:"angle",value:function(s){var h=this.crossZ(s),d=Math.acos(this.normalize().dot(s.normalize()));return h>=0?d:-d}}]),l}(He),p=function(i){ve(l,i);var o=re(l);function l(s,h){var d;return nt(this,l),d=o.call(this,s,h,1),Object.setPrototypeOf(ze(d),l.prototype),d}return dr(l,[{key:"toString",value:function(){return"Point"}}]),l}(He);r(67),r(218);function y(i){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},y(i)}function S(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||q(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(i){return function(o){if(Array.isArray(o))return ne(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||q(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q(i,o){if(i){if(typeof i=="string")return ne(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?ne(i,o):void 0}}function ne(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function me(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xe(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ve(i,o,l){return o&&xe(i.prototype,o),i}function yt(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&rn(i,o)}function wt(i){var o=It();return function(){var l,s=ar(i);if(o){var h=ar(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return zt(this,l)}}function zt(i,o){if(o&&(y(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn(i)}function wn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function xn(i){var o=typeof Map=="function"?new Map:void 0;return xn=function(l){if(l===null||(s=l,Function.toString.call(s).indexOf("[native code]")===-1))return l;var s;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(l))return o.get(l);o.set(l,h)}function h(){return Gn(l,arguments,ar(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),rn(h,l)},xn(i)}function Gn(i,o,l){return Gn=It()?Reflect.construct:function(s,h,d){var m=[null];m.push.apply(m,h);var w=new(Function.bind.apply(s,m));return d&&rn(w,d.prototype),w},Gn.apply(null,arguments)}function It(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rn(i,o){return rn=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},rn(i,o)}function ar(i){return ar=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ar(i)}function kn(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var qe,vr,Lr,Xn,sr,ki,Ba,Zl,Pi,xu,ds,Nd,Ip,Au=function(i){yt(l,i);var o=wt(l);function l(){var s;me(this,l);for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return kn(wn(s=o.call(this,d.length)),"rows",void 0),kn(wn(s),"columns",void 0),s.fill(new Array(3)),d.forEach(function(w,T){s[T]=w}),s.columns=d[0].length,s.rows=d.length,Object.setPrototypeOf(wn(s),l.prototype),s}return Ve(l,[{key:"getRow",value:function(s){return this[s]}},{key:"getColumn",value:function(s){return L(this.map(function(h){return h[s]}))}},{key:"transpose",value:function(){for(var s=[],h=0;h<this.columns;h++)s.push(this.getColumn(h));return Gn(l,s)}},{key:"cross",value:function(s){var h=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===s.rows)for(var d=0;d<this.rows;d++)for(var m=this.getRow(d),w=function(C){var $=s.getColumn(C);h[d][C]=m.reduce(function(Q,te,ge){return Q+te*$[ge]},0)},T=0;T<s.columns;T++)w(T);return Gn(l,L(h))}},{key:"to2D",value:function(){return this.map(function(s){return[s[0],s[1]]})}},{key:"toPoints",value:function(){return this.map(function(s){return new p(s[0],s[1])})}},{key:"toString",value:function(){var s=S(this[0],2),h=s[0],d=s[1],m=S(this[1],2),w=m[0],T=m[1],C=S(this[2],2),$=C[0],Q=C[1];return"matrix(".concat(h," ").concat(d," ").concat(w," ").concat(T," ").concat($," ").concat(Q,")")}},{key:"translate",value:function(s,h){return this.cross(new Rd(s,h))}},{key:"rotate",value:function(s){return this.cross(new ec(s))}},{key:"scale",value:function(s,h){return this.cross(new um(s,h))}}]),l}(xn(Array)),ec=function(i){yt(l,i);var o=wt(l);function l(s){var h;return me(this,l),h=o.call(this,new Xe(+Math.cos(s).toFixed(2),+Math.sin(s).toFixed(2),0),new Xe(-Math.sin(s).toFixed(2),+Math.cos(s).toFixed(2),0),new Xe(0,0,1)),Object.setPrototypeOf(wn(h),l.prototype),h}return Ve(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Au),um=function(i){yt(l,i);var o=wt(l);function l(s,h){var d;return me(this,l),kn(wn(d=o.call(this,new Xe(s,0,0),new Xe(0,h,0),new Xe(0,0,1))),"sx",void 0),kn(wn(d),"sy",void 0),d.sx=s,d.sy=h,Object.setPrototypeOf(wn(d),l.prototype),d}return Ve(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Au),Rd=function(i){yt(l,i);var o=wt(l);function l(s,h){var d;return me(this,l),kn(wn(d=o.call(this,new Xe(1,0,0),new Xe(0,1,0),new Xe(s,h,1))),"tx",void 0),kn(wn(d),"ty",void 0),d.tx=s,d.ty=h,Object.setPrototypeOf(wn(d),l.prototype),d}return Ve(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Au),Lp={node:!1,edge:!1},sm={node:!0,edge:!0};function $p(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function mf(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?$p(Object(l),!0).forEach(function(s){hs(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):$p(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function yf(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||Fp(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ps(i){return function(o){if(Array.isArray(o))return H_(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||Fp(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fp(i,o){if(i){if(typeof i=="string")return H_(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?H_(i,o):void 0}}function H_(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function py(i){return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},py(i)}function Tu(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function qN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function hs(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function qn(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var o2,i2=200,a2=(qe=function(){function i(s){(function(ge,Me){if(!(ge instanceof Me))throw new TypeError("Cannot call a class as a function")})(this,i),hs(this,"rootEl",void 0),Tu(this,"width",vr,this),Tu(this,"height",Lr,this),hs(this,"theme",void 0),hs(this,"eventCenter",void 0),hs(this,"modelMap",new Map),hs(this,"topElement",void 0),hs(this,"animation",void 0),hs(this,"idGenerator",void 0),hs(this,"edgeGenerator",void 0),hs(this,"nodeMoveRules",[]),hs(this,"customTrajectory",void 0),Tu(this,"edgeType",Xn,this),Tu(this,"nodes",sr,this),Tu(this,"edges",ki,this),Tu(this,"overlapMode",Ba,this),Tu(this,"background",Zl,this),Tu(this,"transformModel",Pi,this),Tu(this,"editConfigModel",xu,this),Tu(this,"gridSize",ds,this),Tu(this,"partial",Nd,this),Tu(this,"fakerNode",Ip,this);var h,d=s.container,m=s.background,w=m===void 0?{}:m,T=s.grid,C=s.idGenerator,$=s.edgeGenerator,Q=s.animation,te=s.customTrajectory;this.background=w,py(T)==="object"&&(this.gridSize=T.size),this.rootEl=d,this.editConfigModel=new id(s),this.eventCenter=new yd,this.transformModel=new mp(this.eventCenter,s),this.theme=Xl(s.style),this.edgeType=s.edgeType||"polyline",this.width=s.width,this.height=s.height,this.animation=(h=Q)&&typeof h!="boolean"?es(no(Lp),h):no(h===!0?sm:Lp),this.partial=s.partial,this.overlapMode=s.overlapMode||0,this.idGenerator=C,this.customTrajectory=te,this.edgeGenerator=Zn(this,$),this.width=s.width||this.rootEl.getBoundingClientRect().width,this.height=s.height||this.rootEl.getBoundingClientRect().height,this.flowId=ra()}var o,l;return o=i,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(s,h,d){return s[h.id]={index:d,model:h},s},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(s,h,d){return s[h.id]={index:d,model:h},s},{})}},{key:"modelsMap",get:function(){return[].concat(ps(this.nodes),ps(this.edges)).reduce(function(s,h){return s[h.id]=h,s},{})}},{key:"sortElements",get:function(){var s=[];this.nodes.forEach(function(C){return s.push(C)}),this.edges.forEach(function(C){return s.push(C)}),s=s.sort(function(C,$){return C.zIndex-$.zIndex});for(var h=[],d=[-200,-200],m=[this.width+i2,this.height+i2],w=0;w<s.length;w++){var T=s[w];T.visible&&(!this.partial||T.isSelected||this.isElementInArea(T,d,m,!1,!1))&&h.push(T)}return h}},{key:"textEditElement",get:function(){var s=this.nodes.find(function(d){return d.state===Yr.TEXT_EDIT}),h=this.edges.find(function(d){return d.state===Yr.TEXT_EDIT});return s||h}},{key:"selectElements",get:function(){var s=new Map;return this.nodes.forEach(function(h){h.isSelected&&s.set(h.id,h)}),this.edges.forEach(function(h){h.isSelected&&s.set(h.id,h)}),s}},{key:"selectNodes",get:function(){var s=[];return this.nodes.forEach(function(h){h.isSelected&&s.push(h)}),s}},{key:"getAreaElement",value:function(s,h){var d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=arguments.length>4&&arguments[4]!==void 0&&arguments[4],T=[],C=[];this.nodes.forEach(function(te){return C.push(te)}),this.edges.forEach(function(te){return C.push(te)});for(var $=0;$<C.length;$++){var Q=C[$];w&&!Q.visible||!this.isElementInArea(Q,s,h,d,m)||T.push(Q)}return T}},{key:"getModel",value:function(s){return this.modelMap.get(s)}},{key:"getNodeModelById",value:function(s){var h;return this.fakerNode&&s===this.fakerNode.id?this.fakerNode:(h=this.nodesMap[s])===null||h===void 0?void 0:h.model}},{key:"getPointByClient",value:function(s){var h=s.x,d=s.y,m=this.rootEl.getBoundingClientRect(),w={x:h-m.left,y:d-m.top},T=yf(this.transformModel.HtmlPointToCanvasPoint([w.x,w.y]),2);return{domOverlayPosition:w,canvasOverlayPosition:{x:T[0],y:T[1]}}}},{key:"isElementInArea",value:function(s,h,d){var m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],w=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(s.BaseType===fo.NODE){for(var T=Oo(s=s),C=T.minX,$=T.minY,Q=T.maxX,te=T.maxY,ge=[{x:C,y:$},{x:Q,y:$},{x:Q,y:te},{x:C,y:te}],Me=w,Ie=0;Ie<ge.length;Ie++){var ut=ge[Ie],lt=ut.x,_t=ut.y,Bt=this.transformModel.CanvasPointToHtmlPoint([lt,_t]),_n=yf(Bt,2);if(lt=_n[0],_t=_n[1],Hs([lt,_t],h,d)!==w){Me=!w;break}}return Me}if(s.BaseType===fo.EDGE){var gn=s=s,zn=gn.startPoint,vn=gn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([zn.x,zn.y]),An=this.transformModel.CanvasPointToHtmlPoint([vn.x,vn.y]),jr=Hs(In,h,d),Ur=Hs(An,h,d);return m?jr&&Ur:jr||Ur}return!1}},{key:"graphDataToModel",value:function(s){var h=this;if(this.width&&this.height||this.resize(),!s)return this.nodes=[],void(this.edges=[]);s.nodes?this.nodes=ed(s.nodes,function(d){return h.getModelAfterSnapToGrid(d)}):this.nodes=[],s.edges?this.edges=ed(s.edges,function(d){var m=h.getModel(d.type);if(!m)throw new Error("找不到".concat(d.type,"对应的边。"));return new m(d,h)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var s=[];this.edges.forEach(function(d){var m=d.getData();m&&!d.virtual&&s.push(m)});var h=[];return this.nodes.forEach(function(d){var m=d.getData();m&&!d.virtual&&h.push(m)}),{nodes:h,edges:s}}},{key:"modelToHistoryData",value:function(){for(var s=!1,h=[],d=0;d<this.nodes.length;d++){var m=this.nodes[d];if(m.isDragging){s=!0;break}h.push(m.getHistoryData())}if(s)return!1;for(var w=!1,T=[],C=0;C<this.edges.length;C++){var $=this.edges[C];if($.isDragging){w=!0;break}T.push($.getHistoryData())}return!w&&{nodes:h,edges:T}}},{key:"getEdgeModelById",value:function(s){var h;return(h=this.edgesMap[s])===null||h===void 0?void 0:h.model}},{key:"getElement",value:function(s){return this.modelsMap[s]}},{key:"getNodeEdges",value:function(s){for(var h=[],d=0;d<this.edges.length;d++){var m=this.edges[d],w=this.edges[d].sourceNodeId===s,T=this.edges[d].targetNodeId===s;(w||T)&&h.push(m)}return h}},{key:"getSelectElements",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],h=this.selectElements,d={nodes:[],edges:[]};return h.forEach(function(m){if(m.BaseType===fo.NODE&&d.nodes.push(m.getData()),m.BaseType===fo.EDGE){var w=m.getData(),T=h.get(w.sourceNodeId)&&h.get(w.targetNodeId);(s||T)&&d.edges.push(w)}}),d}},{key:"updateAttributes",value:function(s,h){this.getElement(s).updateAttributes(h)}},{key:"changeNodeId",value:function(s,h){return h||(h=ra()),this.nodesMap[h]?"":this.nodesMap[s]?(this.edges.forEach(function(d){d.sourceNodeId===s&&(d.sourceNodeId=h),d.targetNodeId===s&&(d.targetNodeId=h)}),this.nodesMap[s].model.id=h,this.nodesMap[h]=this.nodesMap[s],h):""}},{key:"changeEdgeId",value:function(s,h){return h||(h=ra()),this.edgesMap[h]?"":this.edgesMap[s]?(this.edges.forEach(function(d){d.id===s&&d.changeEdgeId(h)}),h):""}},{key:"setFakerNode",value:function(s){this.fakerNode=s}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(s,h){return this.modelMap.set(s,h)}},{key:"toFront",value:function(s){var h,d,m,w=((h=this.nodesMap[s])===null||h===void 0?void 0:h.model)||((d=this.edgesMap[s])===null||d===void 0?void 0:d.model);w&&(this.overlapMode===To.DEFAULT&&((m=this.topElement)===null||m===void 0||m.setZIndex(),w.setZIndex(9999),this.topElement=w),this.overlapMode===To.INCREASE&&this.setElementZIndex(s,"top"))}},{key:"setElementZIndex",value:function(s,h){var d,m,w,T=((d=this.nodesMap[s])===null||d===void 0?void 0:d.model)||((m=this.edgesMap[s])===null||m===void 0?void 0:m.model);T&&(typeof h=="number"&&(w=h),h==="top"&&(w=us()),h==="bottom"&&(w=--sf),T.setZIndex(w))}},{key:"deleteNode",value:function(s){var h=this.nodesMap[s].model.getData();this.deleteEdgeBySource(s),this.deleteEdgeByTarget(s),this.nodes.splice(this.nodesMap[s].index,1),this.eventCenter.emit(Cn.NODE_DELETE,{data:h})}},{key:"addNode",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,d=arguments.length>2?arguments[2]:void 0,m=_i(s);m.id&&this.nodesMap[s.id]&&delete m.id;var w=this.getModelAfterSnapToGrid(m);this.nodes.push(w);var T=w.getData(),C={data:T};return d&&(C.e=d),this.eventCenter.emit(h,C),w}},{key:"getModelAfterSnapToGrid",value:function(s){var h=this.getModel(s.type);if(!h)throw new Error("找不到".concat(s.type,"对应的节点，请确认是否已注册此类型节点。"));var d=s.x,m=s.y;return d&&m&&(s.x=rl(d,this.gridSize),s.y=rl(m,this.gridSize),py(s.text)==="object"&&(s.text.x+=s.x-d,s.text.y+=s.y-m)),new h(s,this)}},{key:"cloneNode",value:function(s){var h=this.getNodeModelById(s),d=h.getData();d.x+=30,d.y+=30,delete d.id,d.text&&(d.text.x+=30,d.text.y+=30);var m=this.addNode(d);return m.setSelected(!0),h.setSelected(!1),m.getData()}},{key:"moveNode",value:function(s,h,d){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[s];if(w){var T=w.model,C=T.getMoveDistance(h,d,m),$=yf(C,2);h=$[0],d=$[1],this.moveEdge(s,h,d)}}},{key:"moveNode2Coordinate",value:function(s,h,d){var m=arguments.length>3&&arguments[3]!==void 0&&arguments[3],w=this.nodesMap[s];if(w){var T=w.model,C=T.x,$=T.y,Q=h-C,te=d-$;this.moveNode(s,Q,te,m)}}},{key:"editText",value:function(s){this.setElementStateById(s,Yr.TEXT_EDIT)}},{key:"addEdge",value:function(s){var h=_i(s),d=h.type;d||(d=this.edgeType),h.id&&this.edgesMap[h.id]&&delete h.id;var m=this.getModel(d);if(!m)throw new Error("找不到".concat(d,"对应的边，请确认是否已注册此类型边。"));var w=new m(mf(mf({},h),{},{type:d}),this),T=w.getData();return this.edges.push(w),this.eventCenter.emit(Cn.EDGE_ADD,{data:T}),w}},{key:"moveEdge",value:function(s,h,d){for(var m=0;m<this.edges.length;m++){var w=this.edges[m],T=w.textPosition,C=T.x,$=T.y,Q=this.edges[m].sourceNodeId===s,te=this.edges[m].targetNodeId===s;Q&&w.moveStartPoint(h,d),te&&w.moveEndPoint(h,d),(Q||te)&&this.handleEdgeTextMove(w,C,$)}}},{key:"handleEdgeTextMove",value:function(s,h,d){var m;if(s.customTextPosition===!0)s.resetTextPosition();else if(s.modelType===xr.POLYLINE_EDGE&&(m=s.text)!==null&&m!==void 0&&m.value){var w=s.text,T=Tr(w,s.points);s.moveText(T.x-w.x,T.y-w.y)}else{var C=s.textPosition,$=C.x,Q=C.y;s.moveText($-h,Q-d)}}},{key:"deleteEdgeBySourceAndTarget",value:function(s,h){for(var d=0;d<this.edges.length;d++)if(this.edges[d].sourceNodeId===s&&this.edges[d].targetNodeId===h){var m=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:m})}}},{key:"deleteEdgeById",value:function(s){if(this.edgesMap[s]){var h=this.edgesMap[s].index,d=this.edgesMap[s].model.getData();this.edges.splice(h,1),this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeBySource",value:function(s){for(var h=0;h<this.edges.length;h++)if(this.edges[h].sourceNodeId===s){var d=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeByTarget",value:function(s){for(var h=0;h<this.edges.length;h++)if(this.edges[h].targetNodeId===s){var d=this.edges[h].getData();this.edges.splice(h,1),h--,this.eventCenter.emit(Cn.EDGE_DELETE,{data:d})}}},{key:"setElementStateById",value:function(s,h,d){this.nodes.forEach(function(m){m.id===s?m.setElementState(h,d):m.setElementState(Yr.DEFAULT)}),this.edges.forEach(function(m){m.id===s?m.setElementState(h,d):m.setElementState(Yr.DEFAULT)})}},{key:"updateText",value:function(s,h){this.nodes.forEach(function(d){d.id===s&&d.updateText(h)}),this.edges.forEach(function(d){d.id===s&&d.updateText(h)})}},{key:"selectNodeById",value:function(s){var h,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var m=(h=this.nodesMap[s])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectEdgeById",value:function(s){var h,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var m=(h=this.edgesMap[s])===null||h===void 0?void 0:h.model;m==null||m.setSelected(!0)}},{key:"selectElementById",value:function(s){var h=arguments.length>1&&arguments[1]!==void 0&&arguments[1];h||this.clearSelectElements();var d=this.getElement(s);d==null||d.setSelected(!0)}},{key:"clearSelectElements",value:function(){var s;this.selectElements.forEach(function(h){h==null||h.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===To.DEFAULT&&((s=this.topElement)===null||s===void 0||s.setZIndex())}},{key:"moveNodes",value:function(s,h,d){for(var m=this,w=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=s.reduce(function(gn,zn){var vn=m.nodesMap[zn].model.getMoveDistance(h,d,w);return gn[zn]=vn,gn},{}),C=0;C<this.edges.length;C++){var $=this.edges[C],Q=$.textPosition,te=Q.x,ge=Q.y,Me=T[$.sourceNodeId],Ie=T[$.targetNodeId],ut=void 0,lt=void 0;if(Me&&Ie&&$.modelType===xr.POLYLINE_EDGE){var _t=yf(Me,2);ut=_t[0],lt=_t[1],$.updatePointsList(ut,lt)}else{if(Me){var Bt=yf(Me,2);ut=Bt[0],lt=Bt[1],$.moveStartPoint(ut,lt)}if(Ie){var _n=yf(Ie,2);ut=_n[0],lt=_n[1],$.moveEndPoint(ut,lt)}}(Me||Ie)&&this.handleEdgeTextMove($,te,ge)}}},{key:"addNodeMoveRules",value:function(s){this.nodeMoveRules.includes(s)||this.nodeMoveRules.push(s)}},{key:"setDefaultEdgeType",value:function(s){this.edgeType=s}},{key:"changeNodeType",value:function(s,h){var d=this.getNodeModelById(s);if(d){var m=d.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));var T=new w(m,this);this.nodes.splice(this.nodesMap[s].index,1,T),this.getNodeEdges(s).forEach(function(C){if(C.sourceNodeId===s){var $=lf(T,C.startPoint,T.width,T.height);C.updateStartPoint($)}if(C.targetNodeId===s){var Q=lf(T,C.endPoint,T.width,T.height);C.updateEndPoint(Q)}})}}},{key:"changeEdgeType",value:function(s,h){var d=this.getEdgeModelById(s);if(d&&d.type!==h){var m=d.getData();m.type=h;var w=this.getModel(h);if(!w)throw new Error("找不到".concat(h,"对应的节点，请确认是否已注册此类型节点。"));delete m.pointsList;var T=new w(m,this);this.edges.splice(this.edgesMap[s].index,1,T)}}},{key:"getNodeIncomingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.targetNodeId===s&&h.push(d)}),h}},{key:"getNodeOutgoingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.sourceNodeId===s&&h.push(d)}),h}},{key:"getAnchorIncomingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.targetAnchorId===s&&h.push(d)}),h}},{key:"getAnchorOutcomingEdge",value:function(s){var h=[];return this.edges.forEach(function(d){d.sourceAnchorId===s&&h.push(d)}),h}},{key:"getNodeIncomingNode",value:function(s){var h=this,d=[];return this.edges.forEach(function(m){m.targetNodeId===s&&d.push(h.nodesMap[m.sourceNodeId].model)}),d}},{key:"getNodeOutgoingNode",value:function(s){var h=this,d=[];return this.edges.forEach(function(m){m.sourceNodeId===s&&d.push(h.nodesMap[m.targetNodeId].model)}),d}},{key:"setTheme",value:function(s){this.theme=Xl(mf(mf({},this.theme),s))}},{key:"resize",value:function(s,h){this.width=s||this.rootEl.getBoundingClientRect().width,this.height=h||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var s=this.nodes,h=[],d=[];s.forEach(function(Q){var te=Q.x,ge=Q.y,Me=Q.width,Ie=Q.height,ut=Q.getNodeStyle().strokeWidth,lt=ut===void 0?0:ut,_t=te+Me/2+lt,Bt=te-Me/2-lt,_n=ge+Ie/2+lt,gn=ge-Ie/2-lt;h=h.concat([_t,Bt].filter(function(zn){return!Number.isNaN(zn)})),d=d.concat([_n,gn].filter(function(zn){return!Number.isNaN(zn)}))});var m=Math.min.apply(Math,ps(h)),w=Math.max.apply(Math,ps(h)),T=Math.min.apply(Math,ps(d)),C=w-m||0,$=Math.max.apply(Math,ps(d))-T||0;return{virtualRectWidth:C,virtualRectHeight:$,virtualRectCenterPositionX:m+C/2,virtualRectCenterPositionY:T+$/2}}},{key:"translateCenter",value:function(){var s=this.nodes,h=this.width,d=this.height,m=this.rootEl,w=this.transformModel;if(s.length){var T=h||m.clientWidth,C=d||m.clientHeight,$=this.getVirtualRectSize(),Q=$.virtualRectCenterPositionX,te=$.virtualRectCenterPositionY;w.focusOn(Q,te,T,C)}}},{key:"fitView",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,d=this.nodes,m=this.width,w=this.height,T=this.rootEl,C=this.transformModel;if(d.length){var $=m||T.clientWidth,Q=w||T.clientHeight,te=this.getVirtualRectSize(),ge=te.virtualRectWidth,Me=te.virtualRectHeight,Ie=te.virtualRectCenterPositionX,ut=te.virtualRectCenterPositionY,lt=(ge+h)/$,_t=(Me+s)/Q,Bt=0;Bt=1/Math.max(lt,_t);var _n=[$/2,Q/2];C.zoom(Bt,_n),C.focusOn(Ie,ut,$,Q)}}},{key:"openEdgeAnimation",value:function(s){this.getEdgeModelById(s).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(s){this.getEdgeModelById(s).closeEdgeAnimation()}}],l&&qN(o.prototype,l),i}(),vr=qn(qe.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr=qn(qe.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xn=qn(qe.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=qn(qe.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=qn(qe.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ba=qn(qe.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return To.DEFAULT}}),Zl=qn(qe.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=qn(qe.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xu=qn(qe.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ds=qn(qe.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Nd=qn(qe.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ip=qn(qe.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(qe.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"nodesMap"),qe.prototype),qn(qe.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"edgesMap"),qe.prototype),qn(qe.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"modelsMap"),qe.prototype),qn(qe.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"sortElements"),qe.prototype),qn(qe.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"textEditElement"),qe.prototype),qn(qe.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"selectElements"),qe.prototype),qn(qe.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(qe.prototype,"selectNodes"),qe.prototype),qn(qe.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"setFakerNode"),qe.prototype),qn(qe.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"removeFakerNode"),qe.prototype),qn(qe.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"setModel"),qe.prototype),qn(qe.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"toFront"),qe.prototype),qn(qe.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"setElementZIndex"),qe.prototype),qn(qe.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"deleteNode"),qe.prototype),qn(qe.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"addNode"),qe.prototype),qn(qe.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"cloneNode"),qe.prototype),qn(qe.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"moveNode"),qe.prototype),qn(qe.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"moveNode2Coordinate"),qe.prototype),qn(qe.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"editText"),qe.prototype),qn(qe.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"addEdge"),qe.prototype),qn(qe.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"moveEdge"),qe.prototype),qn(qe.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"deleteEdgeBySourceAndTarget"),qe.prototype),qn(qe.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"deleteEdgeById"),qe.prototype),qn(qe.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"deleteEdgeBySource"),qe.prototype),qn(qe.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"deleteEdgeByTarget"),qe.prototype),qn(qe.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"setElementStateById"),qe.prototype),qn(qe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"updateText"),qe.prototype),qn(qe.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"selectNodeById"),qe.prototype),qn(qe.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"selectEdgeById"),qe.prototype),qn(qe.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"selectElementById"),qe.prototype),qn(qe.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"clearSelectElements"),qe.prototype),qn(qe.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"moveNodes"),qe.prototype),qn(qe.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"setDefaultEdgeType"),qe.prototype),qn(qe.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"changeNodeType"),qe.prototype),qn(qe.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"changeEdgeType"),qe.prototype),qn(qe.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"getNodeIncomingEdge"),qe.prototype),qn(qe.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"getNodeOutgoingEdge"),qe.prototype),qn(qe.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"getAnchorIncomingEdge"),qe.prototype),qn(qe.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"getAnchorOutcomingEdge"),qe.prototype),qn(qe.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"getNodeIncomingNode"),qe.prototype),qn(qe.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"getNodeOutgoingNode"),qe.prototype),qn(qe.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"setTheme"),qe.prototype),qn(qe.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"resize"),qe.prototype),qn(qe.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"clearData"),qe.prototype),qn(qe.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"translateCenter"),qe.prototype),qn(qe.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"fitView"),qe.prototype),qn(qe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"openEdgeAnimation"),qe.prototype),qn(qe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(qe.prototype,"closeEdgeAnimation"),qe.prototype),qe),YN=a2;function X_(i){return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X_(i)}function q_(){return q_=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},q_.apply(this,arguments)}function KN(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Y_(i,o){return Y_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Y_(i,o)}function ZN(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=hy(i);if(o){var h=hy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JN(this,l)}}function JN(i,o){if(o&&(X_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tc(i)}function tc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function hy(i){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},hy(i)}function gf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var l2,QN=gs(o2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Y_(d,m)})(h,i);var o,l,s=ZN(h);function h(d){var m;(function($,Q){if(!($ instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,h),gf(tc(m=s.call(this)),"stepDrag",void 0),gf(tc(m),"stepScrollX",0),gf(tc(m),"stepScrollY",0),gf(tc(m),"onDragging",function($){var Q=$.deltaX,te=$.deltaY;m.setState({isDragging:!0});var ge=m.props.graphModel,Me=ge.transformModel;ge.editConfigModel.stopMoveGraph!==!0&&Me.translate(Q,te)}),gf(tc(m),"onDragEnd",function(){m.setState({isDragging:!1})}),gf(tc(m),"zoomHandler",function($){var Q=m.props,te=Q.graphModel,ge=te.editConfigModel,Me=te.transformModel,Ie=te.gridSize,ut=Q.graphModel,lt=$.deltaX,_t=$.deltaY;if(ge.stopScrollGraph||$.ctrlKey===!0){if(!ge.stopZoomGraph){$.preventDefault();var Bt=ut.getPointByClient({x:$.clientX,y:$.clientY}).canvasOverlayPosition,_n=Bt.x,gn=Bt.y;Me.zoom($.deltaY<0,[_n,gn])}}else{if($.preventDefault(),m.stepScrollX+=lt,m.stepScrollY+=_t,Math.abs(m.stepScrollX)>=Ie){var zn=m.stepScrollX%Ie,vn=m.stepScrollX-zn;Me.translate(-vn*Me.SCALE_X,0),m.stepScrollX=zn}if(Math.abs(m.stepScrollY)>=Ie){var In=m.stepScrollY%Ie,An=m.stepScrollY-In;Me.translate(0,-An*Me.SCALE_Y),m.stepScrollY=In}}}),gf(tc(m),"clickHandler",function($){if($.target.getAttribute("name")==="canvas-overlay"){var Q=m.props.graphModel;Q.selectElements.size>0&&Q.clearSelectElements(),Q.eventCenter.emit(Cn.BLANK_CLICK,{e:$})}}),gf(tc(m),"handleContextMenu",function($){if($.target.getAttribute("name")==="canvas-overlay"){$.preventDefault();var Q=m.props.graphModel,te=Q.getPointByClient({x:$.clientX,y:$.clientY});Q.eventCenter.emit(Cn.BLANK_CONTEXTMENU,{e:$,position:te})}}),gf(tc(m),"mouseDownHandler",function($){var Q=m.props.graphModel,te=Q.eventCenter,ge=Q.editConfigModel,Me=Q.transformModel.SCALE_X,Ie=Q.gridSize,ut=$.target,lt=!ge.adjustEdge&&!ge.adjustNodePosition;(ut.getAttribute("name")==="canvas-overlay"||lt)&&(ge.stopMoveGraph!==!0?(m.stepDrag.setStep(Ie*Me),m.stepDrag.handleMouseDown($)):te.emit(Cn.BLANK_MOUSEDOWN,{e:$}),m.clickHandler($))});var w=d.graphModel,T=w.gridSize,C=w.eventCenter;return m.stepDrag=new ye({onDragging:m.onDragging,onDragEnd:m.onDragEnd,step:T,eventType:"BLANK",isStopPropagation:!1,eventCenter:C,model:null}),m.state={isDragging:!1},m}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props,w=m.children,T=m.dnd,C=this.state.isDragging;return Object(We.g)("svg",q_({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:C?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},T.eventMap()),Object(We.g)("g",{transform:d},w))}}])&&KN(o.prototype,l),h}(We.a))||o2;function K_(i){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},K_(i)}function eR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function tR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Z_(i,o){return Z_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Z_(i,o)}function nR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=vy(i);if(o){var h=vy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return rR(this,l)}}function rR(i,o){if(o&&(K_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function vy(i){return vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},vy(i)}var oR=gs(l2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Z_(d,m)})(h,i);var o,l,s=nR(h);function h(){return eR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var d=this.props,m=d.tool,w=d.graphModel,T=m.getTools().map(function(C){return Object(We.g)(C,{graphModel:w,logicFlow:m.instance})});return m.components=T,T}},{key:"triggerToolRender",value:function(){var d=this.props,m=d.tool,w=d.graphModel,T=document.querySelector("#ToolOverlay_".concat(w.flowId)),C=m.getInstance();C.components.forEach(function($){return $(C,T)}),C.components=[]}},{key:"render",value:function(){var d=this.props.graphModel;return Object(We.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(d.flowId)},this.getTools())}}])&&tR(o.prototype,l),h}(We.a))||l2;function J_(i){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},J_(i)}function iR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function aR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Q_(i,o){return Q_=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Q_(i,o)}function lR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=my(i);if(o){var h=my(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return uR(this,l)}}function uR(i,o){if(o&&(J_(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function my(i){return my=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},my(i)}var u2,sR=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Q_(d,m)})(h,i);var o,l,s=lR(h);function h(){return iR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.background;return Object(We.g)("div",{className:"lf-background"},Object(We.g)("div",{style:d,className:"lf-background-area"}))}}])&&aR(o.prototype,l),h}(We.a);function eb(i){return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},eb(i)}function cR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function fR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function tb(i,o){return tb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},tb(i,o)}function dR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=yy(i);if(o){var h=yy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return pR(this,l)}}function pR(i,o){if(o&&(eb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s2(i)}function s2(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function yy(i){return yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},yy(i)}function hR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var c2=gs(u2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&tb(d,m)})(h,i);var o,l,s=dR(h);function h(){var d;cR(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return hR(s2(d=s.call.apply(s,[this].concat(w))),"id",ra()),d}return o=h,(l=[{key:"renderDot",value:function(){var d=this.props,m=d.config,w=m.color,T=m.thickness,C=T===void 0?2:T,$=d.size,Q=d.visible,te=Math.min(Math.max(2,C),$/2),ge=1;return Q||(ge=0),Object(We.g)("rect",{width:te,height:te,rx:te/2,ry:te/2,fill:w,opacity:ge})}},{key:"renderMesh",value:function(){var d=this.props,m=d.config,w=m.color,T=m.thickness,C=T===void 0?1:T,$=d.size,Q=d.visible,te=Math.min(Math.max(1,C),$/2),ge="M ".concat($," 0 H0 M0 0 V0 ").concat($),Me=1;return Q||(Me=0),Object(We.g)("path",{d:ge,stroke:w,strokeWidth:te,opacity:Me})}},{key:"render",value:function(){var d=this.props,m=d.type,w=d.size,T=d.graphModel.transformModel,C=[T.SCALE_X,T.SKEW_Y,T.SKEW_X,T.SCALE_Y,T.TRANSLATE_X,T.TRANSLATE_Y].join(","),$="matrix(".concat(C,")");return Object(We.g)("div",{className:"lf-grid"},Object(We.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(We.g)("defs",null,Object(We.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:$,x:"0",y:"0",width:w,height:w},m==="dot"&&this.renderDot(),m==="mesh"&&this.renderMesh())),Object(We.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&fR(o.prototype,l),h}(We.a))||u2;c2.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function nb(i){return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},nb(i)}function vR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return f2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return f2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var d2,Gh=function(i){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(i).forEach(function(l){var s=vR(l,2),h=s[0],d=s[1];(h==="style"||nb(d)!=="object")&&(o[h]=d)}),Object(We.g)("line",o)};function rb(i){return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},rb(i)}function p2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function gy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?p2(Object(l),!0).forEach(function(s){mR(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):p2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function mR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function yR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function gR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ob(i,o){return ob=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},ob(i,o)}function _R(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=_y(i);if(o){var h=_y(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return bR(this,l)}}function bR(i,o){if(o&&(rb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function _y(i){return _y=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_y(i)}var h2,wR=gs(d2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&ob(d,m)})(h,i);var o,l,s=_R(h);function h(){return yR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.snaplineModel,m=d.position,w=d.isShowHorizontal,T=d.isShowVertical,C=d.getStyle(),$=m.x,Q=$===void 0?0:$,te=m.y,ge=te===void 0?0:te,Me=gy(gy({x1:-1e5,y1:ge,x2:1e5,y2:ge},C),{},{stroke:w?C.stroke:"none"}),Ie=gy(gy({x1:Q,y1:-1e5,x2:Q,y2:1e5},C),{},{stroke:T?C.stroke:"none"});return Object(We.g)("g",{className:"lf-snapline"},Object(We.g)(Gh,Me),Object(We.g)(Gh,Ie))}}])&&gR(o.prototype,l),h}(We.a))||d2;function ib(i){return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ib(i)}function ER(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return v2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return v2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Cd(i){var o=i.x,l=i.y,s=i.width,h=i.height,d=i.className,m=i.radius,w=o-s/2,T=l-h/2,C={};return Object.entries(i).forEach(function($){var Q=ER($,2),te=Q[0],ge=Q[1];ib(ge)!=="object"&&(C[te]=ge)}),C.className=d?"lf-basic-shape ".concat(d):"lf-basic-shape",m&&(C.rx=m,C.ry=m),C.x=w,C.y=T,Object(We.g)("rect",C)}function ab(i){return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ab(i)}function zh(){return zh=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},zh.apply(this,arguments)}function m2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function y2(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?m2(Object(l),!0).forEach(function(s){OR(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):m2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function OR(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function SR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function xR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function lb(i,o){return lb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},lb(i,o)}function AR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=by(i);if(o){var h=by(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return TR(this,l)}}function TR(i,o){if(o&&(ab(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function by(i){return by=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},by(i)}Cd.defaultProps={className:"",radius:""};var g2,MR=gs(h2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&lb(d,m)})(h,i);var o,l,s=AR(h);function h(){return SR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getNodesOutline",value:function(){var d=this.props.graphModel,m=d.nodes,w=d.editConfigModel,T=w.hoverOutline,C=w.nodeSelectedOutline,$=[];return m.forEach(function(Q){if(Q.isHovered||Q.isSelected){var te=Q.isHovered,ge=Q.isSelected,Me=Q.x,Ie=Q.y,ut=Q.width,lt=Q.height;if(C&&ge||T&&te){var _t=Q.getOutlineStyle(),Bt={};if(Object.keys(_t).forEach(function(gn){gn!=="hover"&&(Bt[gn]=_t[gn])}),te){var _n=_t.hover;Bt=y2(y2({},Bt),_n)}$.push(Object(We.g)(Cd,zh({transform:Q.transform,className:"lf-outline-node",x:Me,y:Ie,width:ut+10,height:lt+10},Bt)))}}}),$}},{key:"getEdgeOutline",value:function(){for(var d=this.props.graphModel,m=d.edges,w=d.editConfigModel,T=w.edgeSelectedOutline,C=w.hoverOutline,$=[],Q=0;Q<m.length;Q++){var te=m[Q];(T&&te.isSelected||C&&te.isHovered)&&(te.modelType===xr.LINE_EDGE?$.push(this.getLineOutline(te)):te.modelType===xr.POLYLINE_EDGE?$.push(this.getPolylineOutline(te)):te.modelType===xr.BEZIER_EDGE&&$.push(this.getBezierOutline(te)))}return $}},{key:"getLineOutline",value:function(d){var m=d.startPoint,w=d.endPoint,T=(m.x+w.x)/2,C=(m.y+w.y)/2,$=Math.abs(m.x-w.x)+10,Q=Math.abs(m.y-w.y)+10,te=d.getOutlineStyle();return Object(We.g)(Cd,zh({className:"lf-outline-edge",x:T,y:C,width:$,height:Q},te))}},{key:"getPolylineOutline",value:function(d){var m=d.points,w=or(m),T=ct(w,8),C=T.x,$=T.y,Q=T.width,te=T.height,ge=d.getOutlineStyle();return Object(We.g)(Cd,zh({className:"lf-outline",x:C,y:$,width:Q,height:te},ge))}},{key:"getBezierOutline",value:function(d){var m=d.path,w=yo(m),T=ct(w,8),C=T.x,$=T.y,Q=T.width,te=T.height,ge=d.getOutlineStyle();return Object(We.g)(Cd,zh({className:"lf-outline",x:C,y:$,width:Q,height:te},ge))}},{key:"render",value:function(){return Object(We.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&xR(o.prototype,l),h}(We.a))||h2;function ub(i){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ub(i)}function kR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return _2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Hh(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,d=i.r,m=d===void 0?4:d,w=i.className,T={cx:l,cy:h,r:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(C){var $=kR(C,2),Q=$[0],te=$[1];ub(te)!=="object"&&(T[Q]=te)}),T.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(We.g)("circle",T)}function sb(i){return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},sb(i)}function PR(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return b2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return b2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function cm(){return cm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},cm.apply(this,arguments)}function w2(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function NR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E2(i,o,l){return o&&NR(i.prototype,o),i}function O2(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&cb(i,o)}function cb(i,o){return cb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},cb(i,o)}function S2(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ey(i);if(o){var h=Ey(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return RR(this,l)}}function RR(i,o){if(o&&(sb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wy(i)}function wy(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ey(i){return Ey=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ey(i)}function fb(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var x2,A2=function(i){O2(l,i);var o=S2(l);function l(){var s;return w2(this,l),fb(wy(s=o.call(this)),"dragHandler",void 0),fb(wy(s),"onDragging",function(h){var d=h.event,m=s.props,w=m.graphModel,T=m.bezierModel,C=m.type,$=w.getPointByClient({x:d.clientX,y:d.clientY}).canvasOverlayPosition,Q=$.x,te=$.y;T.updateAdjustAnchor({x:Q,y:te},C),w.eventCenter.emit(Cn.EDGE_ADJUST,{data:T.getData()})}),fb(wy(s),"onDragEnd",function(){s.props.bezierModel.isDragging=!1}),s.dragHandler=new ye({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return E2(l,[{key:"render",value:function(){var s=this,h=this.props.position,d=h.x,m=h.y,w=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(We.g)(Hh,cm({className:"lf-bezier-adjust-anchor",x:d,y:m},w,{onMouseDown:function(T){s.dragHandler.handleMouseDown(T)}}))}}]),l}(We.a),CR=gs(g2=function(i){O2(l,i);var o=S2(l);function l(){return w2(this,l),o.apply(this,arguments)}return E2(l,[{key:"getBezierAdjust",value:function(s,h){var d=s.path,m=s.id,w=PR(yo(d),4),T=w[0],C=w[1],$=w[2],Q=w[3],te=s.getEdgeStyle().adjustLine,ge=[];return ge.push(Object(We.g)(Gh,cm({x1:T.x,y1:T.y,x2:C.x,y2:C.y},te))),ge.push(Object(We.g)(A2,{position:C,bezierModel:s,graphModel:h,key:"".concat(m,"_ePre"),type:"sNext"})),ge.push(Object(We.g)(Gh,cm({x1:Q.x,y1:Q.y,x2:$.x,y2:$.y},te))),ge.push(Object(We.g)(A2,{position:$,bezierModel:s,graphModel:h,key:"".concat(m,"_sNext"),type:"ePre"})),ge}},{key:"selectedBezierEdge",value:function(){for(var s=this.props.graphModel,h=s.edges,d=[],m=0;m<h.length;m++){var w=h[m];w.isSelected&&w.modelType===xr.BEZIER_EDGE&&w.draggable&&d.push(this.getBezierAdjust(w,s))}return d}},{key:"render",value:function(){return Object(We.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(We.a))||g2;function db(i){return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},db(i)}function DR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function jR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function pb(i,o){return pb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},pb(i,o)}function IR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Oy(i);if(o){var h=Oy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return LR(this,l)}}function LR(i,o){if(o&&(db(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Oy(i){return Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Oy(i)}var T2,$R=gs(x2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&pb(d,m)})(h,i);var o,l,s=IR(h);function h(){return DR(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel.transformModel.getTransformStyle().transform,m=this.props.children;return Object(We.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(We.g)("g",{transform:d},m))}}])&&jR(o.prototype,l),h}(We.a))||x2;function hb(i){return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},hb(i)}function vb(){return vb=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},vb.apply(this,arguments)}function FR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function UR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function mb(i,o){return mb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},mb(i,o)}function VR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Sy(i);if(o){var h=Sy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return BR(this,l)}}function BR(i,o){if(o&&(hb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Sy(i){return Sy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Sy(i)}var WR=gs(T2=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&mb(d,m)})(h,i);var o,l,s=VR(h);function h(){return FR(this,h),s.apply(this,arguments)}return o=h,l=[{key:"getComponent",value:function(d,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",T=this.props.getView,C=T(d.type);return Object(We.g)(C,{key:d.id,model:d,graphModel:m,overlay:w})}},{key:"render",value:function(){var d=this,m=this.props,w=m.graphModel,T=m.tool,C=m.options,$=m.dnd,Q=m.snaplineModel,te={};C.width&&(te.width="".concat(w.width,"px")),C.height&&(te.height="".concat(w.height,"px"));var ge=C.grid,Me=w.fakerNode,Ie=w.editConfigModel.adjustEdge;return Object(We.g)("div",{className:"lf-graph","flow-id":w.flowId,style:te},Object(We.g)(QN,{graphModel:w,dnd:$},Object(We.g)("g",{className:"lf-base"},ed(w.sortElements,function(ut){return d.getComponent(ut,w)})),Me?this.getComponent(Me,w):""),Object(We.g)($R,{graphModel:w},Object(We.g)(MR,{graphModel:w}),Ie?Object(We.g)(CR,{graphModel:w}):"",C.snapline!==!1?Object(We.g)(wR,{snaplineModel:Q}):""),Object(We.g)(oR,{graphModel:w,tool:T}),C.background&&Object(We.g)(sR,{background:C.background}),C.grid&&Object(We.g)(c2,vb({},ge,{graphModel:w})))}}],l&&UR(o.prototype,l),h}(We.a))||T2,GR=WR;function M2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function xy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?M2(Object(l),!0).forEach(function(s){_f(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):M2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function zR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _f(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var HR=function(){function i(s){var h=this;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),_f(this,"nodeConfig",void 0),_f(this,"lf",void 0),_f(this,"fakerNode",void 0),_f(this,"stopDrag",function(){h.nodeConfig=null,window.document.removeEventListener("mouseup",h.stopDrag)}),_f(this,"dragEnter",function(m){h.nodeConfig&&!h.fakerNode&&(h.fakerNode=h.lf.createFakerNode(xy(xy({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY}))))}),_f(this,"onDragOver",function(m){if(m.preventDefault(),h.fakerNode){var w=h.clientToLocalPoint({x:m.clientX,y:m.clientY}),T=w.x,C=w.y;h.fakerNode.moveTo(T,C);var $=h.fakerNode.getData();h.lf.setNodeSnapLine($),h.lf.graphModel.eventCenter.emit(Cn.NODE_DND_DRAG,{data:$})}return!1}),_f(this,"onDragLeave",function(){h.fakerNode&&(h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)}),_f(this,"onDrop",function(m){h.lf.graphModel&&m&&h.nodeConfig&&(h.lf.addNode(xy(xy({},h.nodeConfig),h.clientToLocalPoint({x:m.clientX,y:m.clientY})),Cn.NODE_DND_ADD,m),m.preventDefault(),m.stopPropagation(),h.nodeConfig=null,h.lf.removeNodeSnapLine(),h.lf.graphModel.removeFakerNode(),h.fakerNode=null)});var d=s.lf;this.lf=d}var o,l;return o=i,(l=[{key:"clientToLocalPoint",value:function(s){var h=s.x,d=s.y,m=Wu(this.lf.options,["grid","size"]),w=this.lf.graphModel.getPointByClient({x:h,y:d}).canvasOverlayPosition,T=w.x,C=w.y;return{x:rl(T,m),y:rl(C,m)}}},{key:"startDrag",value:function(s){var h=this.lf.graphModel.editConfigModel;h!=null&&h.isSilentMode||(this.nodeConfig=s,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&zR(o.prototype,l),i}();function k2(i){var o=i.container,l=i.grid,s=i.width,h=i.height;if(!o)throw new Error("请检查 container 参数是否有效");if(typeof s=="string"||typeof h=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(i.grid=es({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),es({},N2,i)}var so,P2,N2={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function yb(i){return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yb(i)}function gb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return R2(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return R2(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R2(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function C2(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Ay(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?C2(Object(l),!0).forEach(function(s){D2(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):C2(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function XR(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function qR(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function YR(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function fm(){return fm=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=KR(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},fm.apply(this,arguments)}function KR(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Dd(i))!==null;);return i}function _b(i,o){return _b=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},_b(i,o)}function ZR(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Dd(i);if(o){var h=Dd(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JR(this,l)}}function JR(i,o){if(o&&(yb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ty(i)}function Ty(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dd(i){return Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dd(i)}function D2(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function vs(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var bb=(so=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&_b(d,m)})(h,i);var o,l,s=ZR(h);function h(){var d;qR(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return D2(Ty(d=s.call.apply(s,[this].concat(w))),"modelType",xr.BEZIER_EDGE),XR(Ty(d),"path",P2,Ty(d)),d}return o=h,(l=[{key:"initEdgeData",value:function(d){this.offset=100,fm(Dd(h.prototype),"initEdgeData",this).call(this,d)}},{key:"getEdgeStyle",value:function(){var d=this.graphModel.theme.bezier;return Ay(Ay({},fm(Dd(h.prototype),"getEdgeStyle",this).call(this)),no(d))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var d=0,m=0;return this.pointsList.forEach(function(w){var T=w.x,C=w.y;d+=T,m+=C}),{x:d/this.pointsList.length,y:m/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var d=fm(Dd(h.prototype),"getData",this).call(this),m=this.pointsList.map(function(w){return{x:w.x,y:w.y}});return Ay(Ay({},d),{},{pointsList:m})}},{key:"getControls",value:function(){var d=this.startPoint,m=this.endPoint;return Jo({start:d,end:m,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(d){var m=gb(d,4),w=m[0],T=m[1],C=m[2],$=m[3];return"M ".concat(w.x," ").concat(w.y,`
    C `).concat(T.x," ").concat(T.y,`,
    `).concat(C.x," ").concat(C.y,`,
    `).concat($.x," ").concat($.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var d=this.getControls(),m=d.sNext,w=d.ePre;this.updatePath(m,w)}},{key:"updatePath",value:function(d,m){d=no(d),m=no(m);var w={x:this.startPoint.x,y:this.startPoint.y},T={x:this.endPoint.x,y:this.endPoint.y};if(!d||!m){var C=this.getControls();d=C.sNext,m=C.ePre}this.pointsList=[w,d,m,T],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(d){this.startPoint=Object.assign({},d),this.updatePoints()}},{key:"updateEndPoint",value:function(d){this.endPoint=Object.assign({},d),this.updatePoints()}},{key:"moveStartPoint",value:function(d,m){this.startPoint.x+=d,this.startPoint.y+=m;var w=gb(this.pointsList,3),T=w[1],C=w[2];T.x+=d,T.y+=m,this.updatePath(T,C)}},{key:"moveEndPoint",value:function(d,m){this.endPoint.x+=d,this.endPoint.y+=m;var w=gb(this.pointsList,3),T=w[1],C=w[2];C.x+=d,C.y+=m,this.updatePath(T,C)}},{key:"updateAdjustAnchor",value:function(d,m){m==="sNext"?this.pointsList[1]=d:m==="ePre"&&(this.pointsList[2]=d),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var d=this.pointsList;return d[d.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(d){var m=d.startPoint,w=d.endPoint,T=d.sourceNode,C=d.targetNode,$=Jo({start:m,end:w,sourceNode:T,targetNode:C,offset:this.offset}),Q=$.sNext,te=$.ePre;this.pointsList=[m,Q,te,w],this.initPoints()}}])&&YR(o.prototype,l),h}(ff),P2=vs(so.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vs(so.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"initPoints"),so.prototype),vs(so.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updatePoints"),so.prototype),vs(so.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateStartPoint"),so.prototype),vs(so.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateEndPoint"),so.prototype),vs(so.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"moveStartPoint"),so.prototype),vs(so.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"moveEndPoint"),so.prototype),vs(so.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateAdjustAnchor"),so.prototype),vs(so.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"getAdjustStart"),so.prototype),vs(so.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"getAdjustEnd"),so.prototype),vs(so.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(so.prototype,"updateAfterAdjustStartAndEnd"),so.prototype),so),ln,j2,I2,L2,$2,F2,U2,V2,B2,W2,G2,z2,H2,X2,q2,Y2,K2,Z2,J2,Q2,eO,tO,nO,QR=function(i){return i==null};function eC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||rO(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wb(i){return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wb(i)}function rO(i,o){if(i){if(typeof i=="string")return oO(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?oO(i,o):void 0}}function oO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function iO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function sl(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?iO(Object(l),!0).forEach(function(s){kl(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):iO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function Ni(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function tC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function kl(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Mr(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var bf,aO,wf=(ln=function(){function i(s,h){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),kl(this,"id",""),Ni(this,"type",j2,this),Ni(this,"x",I2,this),Ni(this,"y",L2,this),Ni(this,"text",$2,this),Ni(this,"properties",F2,this),Ni(this,"_width",U2,this),Ni(this,"_height",V2,this),Ni(this,"anchorsOffset",B2,this),Ni(this,"isSelected",W2,this),Ni(this,"isHovered",G2,this),Ni(this,"isShowAnchor",z2,this),Ni(this,"isDragging",H2,this),Ni(this,"isHitable",X2,this),Ni(this,"draggable",q2,this),Ni(this,"visible",Y2,this),Ni(this,"enableRotate",K2,this),kl(this,"virtual",!1),kl(this,"graphModel",void 0),Ni(this,"zIndex",Z2,this),Ni(this,"state",J2,this),Ni(this,"autoToFront",Q2,this),Ni(this,"style",eO,this),Ni(this,"transform",tO,this),Ni(this,"_rotate",nO,this),kl(this,"BaseType",fo.NODE),kl(this,"modelType",xr.NODE),kl(this,"additionStateData",void 0),kl(this,"targetRules",[]),kl(this,"sourceRules",[]),kl(this,"moveRules",[]),kl(this,"hasSetTargetRules",!1),kl(this,"hasSetSourceRules",!1),this.graphModel=h,this.initNodeData(s),this.setAttributes()}var o,l;return o=i,l=[{key:"width",get:function(){return this._width},set:function(s){this._width=s}},{key:"height",get:function(){return this._height},set:function(s){this._height=s}},{key:"rotate",get:function(){return this._rotate},set:function(s){this._rotate=s;var h=this.x,d=h===void 0?0:h,m=this.y,w=m===void 0?0:m;this.transform=new Rd(-d,-w).rotate(s).translate(d,w).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(s){if(s.properties||(s.properties={}),!s.id){var h=this.graphModel.idGenerator,d=h&&h(s.type),m=this.createId();s.id=m||d||ra()}this.formatText(s),Li(this,function(w){return tl(w,["id","type","x","y","text","properties","virtual","rotate"])}(s)),this.graphModel.overlapMode===To.INCREASE&&(this.zIndex=s.zIndex||us())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(s){s.text||(s.text={value:"",x:s.x,y:s.y,draggable:!1,editable:!0}),s.text&&typeof s.text=="string"?s.text={value:s.text,x:s.x,y:s.y,draggable:!1,editable:!0}:s.text&&s.text.editable===void 0&&(s.text.editable=!0)}},{key:"getData",value:function(){var s=this.text,h=s.x,d=s.y,m=s.value,w=this.properties;Object(c.x)(w)&&(w=Object(c.I)(w));var T={id:this.id,type:this.type,x:this.x,y:this.y,properties:w};return this.rotate&&(T.rotate=this.rotate),this.graphModel.overlapMode===To.INCREASE&&(T.zIndex=this.zIndex),m&&(T.text={x:h,y:d,value:m}),T}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return sl(sl({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var s=this.graphModel.theme.nodeText;return no(s)}},{key:"getRotateControlStyle",value:function(){var s=this.graphModel.theme.rotateControl;return no(s)}},{key:"getAnchorStyle",value:function(s){var h=this.graphModel.theme.anchor;return no(h)}},{key:"getAnchorLineStyle",value:function(s){var h=this.graphModel.theme.anchorLine;return no(h)}},{key:"getOutlineStyle",value:function(){var s=this.graphModel.theme.outline;return no(s)}},{key:"isAllowConnectedAsSource",value:function(s,h,d,m){var w=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var T,C=!0,$=0;$<w.length;$++){var Q=w[$];if(!Q.validate.call(this,this,s,h,d,m)){C=!1,T=Q.message;break}}return{isAllPass:C,msg:T}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(s,h,d,m){var w=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var T,C=!0,$=0;$<w.length;$++){var Q=w[$];if(!Q.validate.call(this,s,this,h,d,m)){C=!1,T=Q.message;break}}return{isAllPass:C,msg:T}}},{key:"isAllowMoveNode",value:function(s,h){var d,m=!0,w=!0,T=function(Q,te){var ge=typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(!ge){if(Array.isArray(Q)||(ge=rO(Q))||te){ge&&(Q=ge);var Me=0,Ie=function(){};return{s:Ie,n:function(){return Me>=Q.length?{done:!0}:{done:!1,value:Q[Me++]}},e:function(Bt){throw Bt},f:Ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ut,lt=!0,_t=!1;return{s:function(){ge=ge.call(Q)},n:function(){var Bt=ge.next();return lt=Bt.done,Bt},e:function(Bt){_t=!0,ut=Bt},f:function(){try{lt||ge.return==null||ge.return()}finally{if(_t)throw ut}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(T.s();!(d=T.n()).done;){var C=(0,d.value)(this,s,h);if(!C)return!1;if(wb(C)==="object"){var $=C;if($.x===!1&&$.y===!1)return!1;m=m&&$.x,w=w&&$.y}}}catch(Q){T.e(Q)}finally{T.f()}return{x:m,y:w}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var s=this.anchorsOffset,h=this.id,d=this.x,m=this.y;return s&&s.length>0?s.map(function(w,T){return w.length?(w=w,{id:"".concat(h,"_").concat(T),x:d+w[0],y:m+w[1]}):sl(sl({},w=w),{},{x:d+w.x,y:m+w.y,id:w.id||"".concat(h,"_").concat(T)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(s){return function(h,d){for(var m,w=Ad(d),T=Number.MAX_SAFE_INTEGER,C=0;C<w.length;C++){var $=ll(h.x,h.y,w[C].x,w[C].y);$<T&&(T=$,m={index:C,anchor:Al(Al({},w[C]),{},{x:w[C].x,y:w[C].y,id:w[C].id})})}return m}(s,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var s=this.getAnchorsByOffset(),h=this.x,d=this.y,m=this.rotate;return s.forEach(function(w){var T=w.x,C=w.y,$=eC(new Au([T,C,1]).translate(-h,-d).rotate(m).translate(h,d)[0],2),Q=$[0],te=$[1];w.x=Q,w.y=te}),s}},{key:"getAnchorInfo",value:function(s){if(!QR(s))for(var h=0;h<this.anchors.length;h++){var d=this.anchors[h];if(d.id===s)return d}}},{key:"addNodeMoveRules",value:function(s){this.moveRules.includes(s)||this.moveRules.push(s)}},{key:"move",value:function(s,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1;if(d)m=!0,w=!0;else{var T=this.isAllowMoveNode(s,h);typeof T=="boolean"?(m=T,w=T):(m=T.x,w=T.y)}if(m){var C=this.x+s;this.x=C,this.text&&this.moveText(s,0)}if(w){var $=this.y+h;this.y=$,this.text&&this.moveText(0,h)}return m||w}},{key:"getMoveDistance",value:function(s,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=!1,w=!1,T=0,C=0;if(d)m=!0,w=!0;else{var $=this.isAllowMoveNode(s,h);typeof $=="boolean"?(m=$,w=$):(m=$.x,w=$.y)}if(m&&s){var Q=this.x+s;this.x=Q,this.text&&this.moveText(s,0),T=s}if(w&&h){var te=this.y+h;this.y=te,this.text&&this.moveText(0,h),C=h}return[T,C]}},{key:"moveTo",value:function(s,h){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],m=s-this.x,w=h-this.y;return!(!d&&!this.isAllowMoveNode(m,w)||(this.text&&this.text&&this.moveText(m,w),this.x=s,this.y=h,0))}},{key:"moveText",value:function(s,h){var d=this.text,m=d.x,w=d.y,T=d.value,C=d.draggable,$=d.editable;this.text={value:T,editable:$,draggable:C,x:m+s,y:w+h}}},{key:"updateText",value:function(s){this.text=sl(sl({},Object(c.I)(this.text)),{},{value:s})}},{key:"setSelected",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=s}},{key:"setHovered",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=s,this.setIsShowAnchor(s)}},{key:"setIsShowAnchor",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=s}},{key:"setEnableRotate",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=s}},{key:"setHitable",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=s}},{key:"setElementState",value:function(s,h){this.state=s,this.additionStateData=h}},{key:"setProperty",value:function(s,h){this.properties=sl(sl({},Object(c.I)(this.properties)),{},kl({},s,_i(h))),this.setAttributes()}},{key:"setProperties",value:function(s){this.properties=sl(sl({},Object(c.I)(this.properties)),_i(s)),this.setAttributes()}},{key:"deleteProperty",value:function(s){delete this.properties[s],this.setAttributes()}},{key:"setStyle",value:function(s,h){this.style=sl(sl({},this.style),{},kl({},s,_i(h)))}},{key:"setStyles",value:function(s){this.style=sl(sl({},this.style),_i(s))}},{key:"updateStyles",value:function(s){this.style=sl({},_i(s))}},{key:"setZIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=s}},{key:"updateAttributes",value:function(s){Li(this,s)}}],l&&tC(o.prototype,l),i}(),j2=Mr(ln.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I2=Mr(ln.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L2=Mr(ln.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$2=Mr(ln.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),F2=Mr(ln.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),U2=Mr(ln.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),V2=Mr(ln.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),B2=Mr(ln.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W2=Mr(ln.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G2=Mr(ln.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z2=Mr(ln.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H2=Mr(ln.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X2=Mr(ln.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q2=Mr(ln.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y2=Mr(ln.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K2=Mr(ln.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z2=Mr(ln.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J2=Mr(ln.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q2=Mr(ln.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),eO=Mr(ln.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tO=Mr(ln.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nO=Mr(ln.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mr(ln.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(ln.prototype,"incoming"),ln.prototype),Mr(ln.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(ln.prototype,"outgoing"),ln.prototype),Mr(ln.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"addNodeMoveRules"),ln.prototype),Mr(ln.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"move"),ln.prototype),Mr(ln.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"getMoveDistance"),ln.prototype),Mr(ln.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"moveTo"),ln.prototype),Mr(ln.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"moveText"),ln.prototype),Mr(ln.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateText"),ln.prototype),Mr(ln.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setSelected"),ln.prototype),Mr(ln.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setHovered"),ln.prototype),Mr(ln.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setIsShowAnchor"),ln.prototype),Mr(ln.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setEnableRotate"),ln.prototype),Mr(ln.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setHitable"),ln.prototype),Mr(ln.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setElementState"),ln.prototype),Mr(ln.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setProperty"),ln.prototype),Mr(ln.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setProperties"),ln.prototype),Mr(ln.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"deleteProperty"),ln.prototype),Mr(ln.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setStyle"),ln.prototype),Mr(ln.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setStyles"),ln.prototype),Mr(ln.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateStyles"),ln.prototype),Mr(ln.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"setZIndex"),ln.prototype),Mr(ln.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(ln.prototype,"updateAttributes"),ln.prototype),ln);function Eb(i){return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Eb(i)}function lO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function uO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lO(Object(l),!0).forEach(function(s){sO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function nC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function rC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function oC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ob(){return Ob=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=iC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},Ob.apply(this,arguments)}function iC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Xh(i))!==null;);return i}function Sb(i,o){return Sb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Sb(i,o)}function aC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Xh(i);if(o){var h=Xh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return lC(this,l)}}function lC(i,o){if(o&&(Eb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return My(i)}function My(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xh(i){return Xh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xh(i)}function sO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function xb(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Wa,cO,fO,Ab=(bf=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Sb(d,m)})(h,i);var o,l,s=aC(h);function h(){var d;rC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return sO(My(d=s.call.apply(s,[this].concat(w))),"modelType",xr.CIRCLE_NODE),nC(My(d),"r",aO,My(d)),d}return o=h,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var d=Ob(Xh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.circle;return uO(uO({},d),no(m))}},{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.r;return[{x:d,y:m-w,id:"".concat(this.id,"_0")},{x:d+w,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+w,id:"".concat(this.id,"_2")},{x:d-w,y:m,id:"".concat(this.id,"_3")}]}}])&&oC(o.prototype,l),h}(wf),aO=xb(bf.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),xb(bf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(bf.prototype,"width"),bf.prototype),xb(bf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(bf.prototype,"height"),bf.prototype),bf);r(129);function Tb(i){return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Tb(i)}function Mb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return dO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function pO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function hO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pO(Object(l),!0).forEach(function(s){mO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function vO(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function uC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function sC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function kb(){return kb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=cC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},kb.apply(this,arguments)}function cC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Yh(i))!==null;);return i}function Pb(i,o){return Pb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Pb(i,o)}function fC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yh(i);if(o){var h=Yh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return dC(this,l)}}function dC(i,o){if(o&&(Tb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qh(i)}function qh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yh(i){return Yh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yh(i)}function mO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Kh(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var nc,yO,gO,Nb=(Wa=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Pb(d,m)})(h,i);var o,l,s=fC(h);function h(){var d;uC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return mO(qh(d=s.call.apply(s,[this].concat(w))),"modelType",xr.DIAMOND_NODE),vO(qh(d),"rx",cO,qh(d)),vO(qh(d),"ry",fO,qh(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=kb(Yh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.diamond;return hO(hO({},d),no(m))}},{key:"points",get:function(){var d=this.x,m=this.y,w=this.rx,T=this.ry;return[[d,m-T],[d+w,m],[d,m+T],[d-w,m]]}},{key:"pointsPosition",get:function(){return this.points.map(function(d){return{x:d[0],y:d[1]}})}},{key:"width",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Mb(w,1)[0];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"height",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Mb(w,2)[1];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"getDefaultAnchor",value:function(){var d=this;return this.points.map(function(m,w){var T=Mb(m,2);return{x:T[0],y:T[1],id:"".concat(d.id,"_").concat(w)}})}}])&&sC(o.prototype,l),h}(wf),cO=Kh(Wa.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),fO=Kh(Wa.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Kh(Wa.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"points"),Wa.prototype),Kh(Wa.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"pointsPosition"),Wa.prototype),Kh(Wa.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"width"),Wa.prototype),Kh(Wa.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Wa.prototype,"height"),Wa.prototype),Wa);function Rb(i){return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Rb(i)}function _O(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function bO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?_O(Object(l),!0).forEach(function(s){EO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):_O(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function wO(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function pC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Cb(){return Cb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=vC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},Cb.apply(this,arguments)}function vC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Jh(i))!==null;);return i}function Db(i,o){return Db=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Db(i,o)}function mC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Jh(i);if(o){var h=Jh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return yC(this,l)}}function yC(i,o){if(o&&(Rb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zh(i)}function Zh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jh(i){return Jh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jh(i)}function EO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function ky(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Mu,OO,jb=(nc=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Db(d,m)})(h,i);var o,l,s=mC(h);function h(){var d;pC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return EO(Zh(d=s.call.apply(s,[this].concat(w))),"modelType",xr.ELLIPSE_NODE),wO(Zh(d),"rx",yO,Zh(d)),wO(Zh(d),"ry",gO,Zh(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=Cb(Jh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.ellipse;return bO(bO({},d),no(m))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.rx,T=this.ry;return[{x:d,y:m-T,id:"".concat(this.id,"_0")},{x:d+w,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T,id:"".concat(this.id,"_2")},{x:d-w,y:m,id:"".concat(this.id,"_3")}]}}])&&hC(o.prototype,l),h}(wf),yO=ky(nc.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),gO=ky(nc.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),ky(nc.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(nc.prototype,"width"),nc.prototype),ky(nc.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(nc.prototype,"height"),nc.prototype),nc);function Ib(i){return Ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ib(i)}function Lb(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return SO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return SO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function SO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function xO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function AO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?xO(Object(l),!0).forEach(function(s){TO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):xO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function gC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function _C(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function bC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function $b(){return $b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=wC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},$b.apply(this,arguments)}function wC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=Qh(i))!==null;);return i}function Fb(i,o){return Fb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Fb(i,o)}function EC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Qh(i);if(o){var h=Qh(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return OC(this,l)}}function OC(i,o){if(o&&(Ib(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Py(i)}function Py(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Qh(i){return Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Qh(i)}function TO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function Ny(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Ub,MO,Vb=(Mu=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Fb(d,m)})(h,i);var o,l,s=EC(h);function h(){var d;_C(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return TO(Py(d=s.call.apply(s,[this].concat(w))),"modelType",xr.POLYGON_NODE),gC(Py(d),"points",OO,Py(d)),d}return o=h,(l=[{key:"getNodeStyle",value:function(){var d=$b(Qh(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.polygon;return AO(AO({},d),no(m))}},{key:"pointsPosition",get:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return this.points.map(function(C){return{x:C[0]+d-w/2,y:C[1]+m-T/2}})}},{key:"width",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Lb(w,1)[0];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"height",get:function(){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(w){var T=Lb(w,2)[1];T<d&&(d=T),T>m&&(m=T)}),m-d}},{key:"getDefaultAnchor",value:function(){var d=this,m=this.x,w=this.y,T=this.width,C=this.height;return this.points.map(function($,Q){var te=Lb($,2),ge=te[0],Me=te[1];return{x:m+ge-T/2,y:w+Me-C/2,id:"".concat(d.id,"_").concat(Q)}})}}])&&bC(o.prototype,l),h}(wf),OO=Ny(Mu.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Ny(Mu.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Mu.prototype,"pointsPosition"),Mu.prototype),Ny(Mu.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Mu.prototype,"width"),Mu.prototype),Ny(Mu.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Mu.prototype,"height"),Mu.prototype),Mu);function Bb(i){return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Bb(i)}function kO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function PO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?kO(Object(l),!0).forEach(function(s){NO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):kO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function SC(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function xC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function AC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Wb(){return Wb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=TC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},Wb.apply(this,arguments)}function TC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=ev(i))!==null;);return i}function Gb(i,o){return Gb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Gb(i,o)}function MC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ev(i);if(o){var h=ev(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return kC(this,l)}}function kC(i,o){if(o&&(Bb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ry(i)}function Ry(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ev(i){return ev=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ev(i)}function NO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var jd,zb=(Ub=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Gb(d,m)})(h,i);var o,l,s=MC(h);function h(){var d;xC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return NO(Ry(d=s.call.apply(s,[this].concat(w))),"modelType",xr.RECT_NODE),SC(Ry(d),"radius",MO,Ry(d)),d}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return[{x:d,y:m-T/2,id:"".concat(this.id,"_0")},{x:d+w/2,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T/2,id:"".concat(this.id,"_2")},{x:d-w/2,y:m,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var d=Wb(ev(h.prototype),"getNodeStyle",this).call(this),m=this.graphModel.theme.rect;return PO(PO({},d),no(m))}}])&&AC(o.prototype,l),h}(wf),MO=function(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}(Ub.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ub);function Hb(i){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Hb(i)}function RO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function CO(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?RO(Object(l),!0).forEach(function(s){jO(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):RO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function PC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function NC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Xb(){return Xb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,o,l){var s=RC(i,o);if(s){var h=Object.getOwnPropertyDescriptor(s,o);return h.get?h.get.call(arguments.length<3?i:l):h.value}},Xb.apply(this,arguments)}function RC(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&(i=tv(i))!==null;);return i}function qb(i,o){return qb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},qb(i,o)}function CC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=tv(i);if(o){var h=tv(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return DC(this,l)}}function DC(i,o){if(o&&(Hb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DO(i)}function DO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tv(i){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tv(i)}function jO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function IO(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var Yb=(jd=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&qb(d,m)})(h,i);var o,l,s=CC(h);function h(){var d;PC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return jO(DO(d=s.call.apply(s,[this].concat(w))),"modelType",xr.TEXT_NODE),d}return o=h,(l=[{key:"getTextStyle",value:function(){var d=Xb(tv(h.prototype),"getTextStyle",this).call(this),m=this.graphModel.theme.text;return CO(CO({},d),no(m))}},{key:"width",get:function(){var d=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return ls({rows:d,fontSize:m,rowsLength:d.length}).width}},{key:"height",get:function(){var d=String(this.text.value).split(/[\r\n]/g),m=this.getTextStyle().fontSize;return ls({rows:d,fontSize:m,rowsLength:d.length}).height}}])&&NC(o.prototype,l),h}(wf),IO(jd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(jd.prototype,"width"),jd.prototype),IO(jd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(jd.prototype,"height"),jd.prototype),jd);function Kb(i){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kb(i)}function jC(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function IC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Zb(i,o){return Zb=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Zb(i,o)}function LC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Cy(i);if(o){var h=Cy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return $C(this,l)}}function $C(i,o){if(o&&(Kb(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LO(i)}function LO(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cy(i){return Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cy(i)}function FC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ms,$O,FO,UO,Jb=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&Zb(d,m)})(h,i);var o,l,s=LC(h);function h(){var d;jC(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return FC(LO(d=s.call.apply(s,[this].concat(w))),"modelType",xr.HTML_NODE),d}return o=h,(l=[{key:"getDefaultAnchor",value:function(){var d=this.x,m=this.y,w=this.width,T=this.height;return[{x:d,y:m-T/2,id:"".concat(this.id,"_0")},{x:d+w/2,y:m,id:"".concat(this.id,"_1")},{x:d,y:m+T/2,id:"".concat(this.id,"_2")},{x:d-w/2,y:m,id:"".concat(this.id,"_3")}]}}])&&IC(o.prototype,l),h}(wf);function VO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Qb(i,o,l,s){l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0})}function UC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function BO(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function dm(i,o,l,s,h){var d={};return Object.keys(s).forEach(function(m){d[m]=s[m]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce(function(m,w){return w(i,o,m)||m},d),h&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(h):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(i,o,d),d=null),d}var WO=(ms=function(){function i(s){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),BO(this,"graphModel",void 0),Qb(this,"isShowHorizontal",$O,this),Qb(this,"isShowVertical",FO,this),Qb(this,"position",UO,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=s}var o,l;return o=i,l=[{key:"getStyle",value:function(){return function(s){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?VO(Object(d),!0).forEach(function(m){BO(s,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(d)):VO(Object(d)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(d,m))})}return s}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(s,h){for(var d=s.x,m=s.y,w=!1,T=!1,C=0;C<h.length;C++){var $=h[C];if($.id!==s.id&&(d===$.x&&(w=!0),m===$.y&&(T=!0),w&&T))break}return{isShowVertical:w,isShowHorizontal:T,position:{x:d,y:m}}}},{key:"getHorizontalSnapline",value:function(s,h){var d,m,w=!1,T=s.id;if(T){var C=this.graphModel.fakerNode;if(C&&C.id===T)m=Oo(C);else{var $=this.graphModel.getNodeModelById(T);m=Oo($)}}for(var Q=0;Q<h.length;Q++){var te=h[Q];if(te.id!==s.id){var ge=Oo(te);if(ge.minY===m.minY||ge.maxY===m.minY){w=!0,d=m.minY;break}if(ge.minY===m.maxY||ge.maxY===m.maxY){w=!0,d=m.maxY;break}}}return Li({isShowHorizontal:w,position:{y:d}})}},{key:"getVerticalSnapline",value:function(s,h){var d,m,w=!1,T=s.id;if(T){var C=this.graphModel.fakerNode;if(C&&C.id===T)m=Oo(C);else{var $=this.graphModel.getNodeModelById(T);m=Oo($)}}for(var Q=0;Q<h.length;Q++){var te=h[Q];if(te.id!==s.id){var ge=Oo(te);if(ge.minX===m.minX||ge.maxX===m.minX){w=!0,d=m.minX;break}if(ge.minX===m.maxX||ge.maxX===m.maxX){w=!0,d=m.maxX;break}}}return Li({isShowVertical:w,position:{x:d}})}},{key:"getSnapLinePosition",value:function(s,h){var d=this.getCenterSnapLine(s,h),m=d.isShowHorizontal,w=d.isShowVertical;if(!m){var T=this.getHorizontalSnapline(s,h);T.isShowHorizontal&&(d.isShowHorizontal=T.isShowHorizontal,d.position.y=T.position.y)}if(!w){var C=this.getVerticalSnapline(s,h);C.isShowVertical&&(d.isShowVertical=C.isShowVertical,d.position.x=C.position.x)}return d}},{key:"setSnaplineInfo",value:function(s){var h=s.isShowHorizontal,d=s.isShowVertical,m=s.position;this.position=m,this.isShowHorizontal=h,this.isShowVertical=d}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(s){var h=this.graphModel.nodes,d=this.getSnapLinePosition(s,h);this.setSnaplineInfo(d)}}],l&&UC(o.prototype,l),i}(),$O=dm(ms.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FO=dm(ms.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UO=dm(ms.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dm(ms.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(ms.prototype,"clearSnapline"),ms.prototype),dm(ms.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(ms.prototype,"setNodeSnapLine"),ms.prototype),ms),pm=new Map,GO=function(i){var o=ra(),l=window.requestAnimationFrame(function s(){if(i(),pm.get(o)){var h=window.requestAnimationFrame(s);pm.set(o,h)}});return pm.set(o,l),o},Dy=function(i){var o=pm.get(i);o&&(window.cancelAnimationFrame(o),pm.delete(i))};function e0(i){return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e0(i)}function hm(){return hm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},hm.apply(this,arguments)}function zO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function vm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?zO(Object(l),!0).forEach(function(s){oc(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):zO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function VC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return HO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return HO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function HO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function BC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function t0(i,o){return t0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},t0(i,o)}function WC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=jy(i);if(o){var h=jy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return GC(this,l)}}function GC(i,o){if(o&&(e0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rc(i)}function rc(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jy(i){return jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jy(i)}function oc(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var zC=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&t0(d,m)})(h,i);var o,l,s=WC(h);function h(){var d;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),oc(rc(d=s.call(this)),"preTargetNode",void 0),oc(rc(d),"sourceRuleResults",void 0),oc(rc(d),"targetRuleResults",void 0),oc(rc(d),"dragHandler",void 0),oc(rc(d),"t",void 0),oc(rc(d),"onDragStart",function(m){var w=m.event,T=d.props,C=T.anchorData,$=T.nodeModel,Q=T.graphModel;Q.overlapMode,Q.selectNodeById($.id),$.autoToFront&&Q.toFront($.id),Q.eventCenter.emit(Cn.ANCHOR_DRAGSTART,{data:C,e:w,nodeModel:$}),d.setState({startX:C.x,startY:C.y,endX:C.x,endY:C.y})}),oc(rc(d),"onDragging",function(m){var w=m.event,T=d.props,C=T.graphModel,$=T.nodeModel,Q=T.anchorData,te=C.transformModel,ge=C.eventCenter,Me=C.width,Ie=C.height,ut=C.editConfigModel,lt=ut.autoExpand,_t=ut.stopMoveGraph,Bt=w.clientX,_n=w.clientY,gn=C.getPointByClient({x:Bt,y:_n}),zn=gn.domOverlayPosition,vn=zn.x,In=zn.y,An=gn.canvasOverlayPosition,jr=An.x,Ur=An.y;d.t&&Dy(d.t);var pr=[];vn<10?pr=[10,0]:vn+10>Me?pr=[-10,0]:In<10?pr=[0,10]:In+10>Ie&&(pr=[0,-10]),d.setState({endX:jr,endY:Ur,dragging:!0}),d.moveAnchorEnd(jr,Ur),pr.length>0&&!_t&&lt&&(d.t=GO(function(){var Kr=VC(pr,2),bi=Kr[0],wi=Kr[1];te.translate(bi,wi);var Ma=d.state,eu=Ma.endX,tu=Ma.endY;d.setState({endX:eu-bi,endY:tu-wi}),d.moveAnchorEnd(eu-bi,tu-wi)})),ge.emit(Cn.ANCHOR_DRAG,{data:Q,e:w,nodeModel:$})}),oc(rc(d),"onDragEnd",function(m){var w=m.event;d.t&&Dy(d.t);var T=d.checkEnd(w);d.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),d.sourceRuleResults.clear(),d.targetRuleResults.clear();var C=d.props,$=C.graphModel,Q=C.nodeModel,te=C.anchorData;$.eventCenter.emit(Cn.ANCHOR_DRAGEND,{data:te,e:w,nodeModel:Q,edgeModel:T})}),oc(rc(d),"checkEnd",function(m){var w=d.props,T=w.graphModel,C=w.nodeModel,$=w.anchorData,Q=$.x,te=$.y,ge=$.id,Me=(T.edgeType,d.state),Ie=Me.endX,ut=Me.endY,lt=Me.dragging,_t=nf({x:Ie,y:ut},T);if(d.preTargetNode&&d.preTargetNode.state!==Yr.DEFAULT&&d.preTargetNode.setElementState(Yr.DEFAULT),lt&&_t&&_t.node){var Bt=_t.node,_n=_t.anchor.id,gn="".concat(C.id,"_").concat(Bt.id,"_").concat(_n,"_").concat(ge),zn=d.sourceRuleResults.get(gn)||{},vn=zn.isAllPass,In=zn.msg,An=d.targetRuleResults.get(gn)||{},jr=An.isAllPass,Ur=An.msg;if(vn&&jr){Bt.setElementState(Yr.DEFAULT);var pr=T.edgeGenerator(C.getData(),T.getNodeModelById(_t.node.id).getData()),Kr=T.addEdge(vm(vm({},pr),{},{sourceNodeId:C.id,sourceAnchorId:ge,startPoint:{x:Q,y:te},targetNodeId:_t.node.id,targetAnchorId:_t.anchor.id,endPoint:{x:_t.anchor.x,y:_t.anchor.y}})),bi=d.props.anchorData;return T.eventCenter.emit(Cn.ANCHOR_DROP,{data:bi,e:m,nodeModel:C,edgeModel:Kr}),Kr}var wi=Bt.getData();return T.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:wi,msg:Ur||In||"不允许添加连线"}),null}}),d.sourceRuleResults=new Map,d.targetRuleResults=new Map,d.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},d.dragHandler=new ye({onDragStart:d.onDragStart,onDragging:d.onDragging,onDragEnd:d.onDragEnd}),d}return o=h,(l=[{key:"getAnchorShape",value:function(){var d=this.props,m=d.anchorData,w=d.style,T=d.node.getAnchorShape(m);if(T)return T;var C=m.x,$=m.y,Q=vm(vm({},w),w.hover);return Object(We.g)("g",null,Object(We.g)(Hh,hm({className:"lf-node-anchor-hover"},Q,{x:C,y:$})),Object(We.g)(Hh,hm({className:"lf-node-anchor"},w,{x:C,y:$})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var d=this.props,m=d.graphModel,w=m.getAnchorIncomingEdge,T=m.getAnchorOutcomingEdge,C=d.anchorData.id;return{incomingEdgeList:w(C),outcomingEdgeList:T(C)}}},{key:"moveAnchorEnd",value:function(d,m){var w=this.props,T=w.graphModel,C=w.nodeModel,$=w.anchorData,Q=nf({x:d,y:m},T);if(Q){var te=Q.node,ge=Q.anchor.id;if(this.preTargetNode&&this.preTargetNode!==Q.node&&this.preTargetNode.setElementState(Yr.DEFAULT),$.id===ge)return;this.preTargetNode=te;var Me="".concat(C.id,"_").concat(te.id,"_").concat(ge,"_").concat($.id);if(!this.targetRuleResults.has(Me)){var Ie=Q.anchor,ut=C.isAllowConnectedAsSource(te,$,Ie),lt=te.isAllowConnectedAsTarget(C,$,Ie);this.sourceRuleResults.set(Me,ql(ut)),this.targetRuleResults.set(Me,ql(lt))}var _t=this.sourceRuleResults.get(Me).isAllPass,Bt=this.targetRuleResults.get(Me).isAllPass;_t&&Bt?te.setElementState(Yr.ALLOW_CONNECT):te.setElementState(Yr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Yr.DEFAULT&&this.preTargetNode.setElementState(Yr.DEFAULT)}},{key:"isShowLine",value:function(){var d=this.state,m=d.startX,w=d.startY,T=d.endX,C=d.endY;return ll(m,w,T,C)>10}},{key:"render",value:function(){var d=this,m=this.state,w=m.startX,T=m.startY,C=m.endX,$=m.endY,Q=this.props,te=Q.anchorData.edgeAddable,ge=Q.edgeStyle;return Object(We.g)("g",{className:"lf-anchor"},Object(We.g)("g",{onMouseDown:function(Me){te!==!1&&d.dragHandler.handleMouseDown(Me)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(vm({sourcePoint:{x:w,y:T},targetPoint:{x:C,y:$}},ge)):Object(We.g)(Gh,hm({x1:w,y1:T,x2:C,y2:$},ge,{"pointer-events":"none"}))))}}])&&BC(o.prototype,l),h}(We.a);function XO(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function HC(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?XO(Object(l),!0).forEach(function(s){XC(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):XO(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function XC(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function n0(i){return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n0(i)}function qC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return qO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return qO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function YO(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,d=i.value,m=i.fontSize,w=i.fill,T=w===void 0?"currentColor":w,C=i.overflowMode,$=C===void 0?"default":C,Q=i.textWidth,te=Q===void 0?"":Q,ge=i.model,Me={textAnchor:"middle","dominant-baseline":"middle",x:l,y:h,fill:T};if(Object.entries(i).forEach(function(_n){var gn=qC(_n,2),zn=gn[0],vn=gn[1];n0(vn)!=="object"&&(Me[zn]=vn)}),d){var Ie=String(d).split(/[\r\n]/g),ut=Ie.length;if($!=="default"){var lt=ge.BaseType,_t=ge.modelType;if(lt===fo.NODE&&_t!==xr.TEXT_NODE||lt===fo.EDGE&&te)return function(_n){var gn=_n.value,zn=_n.fontSize,vn=_n.model,In=_n.fontFamily,An=In===void 0?"":In,jr=_n.lineHeight,Ur=_n.wrapPadding,pr=Ur===void 0?"0, 0":Ur,Kr=_n.overflowMode,bi=_n.x,wi=_n.y,Ma=vn.width,eu=vn.textHeight,tu=_n.textWidth||Ma,lc=String(gn).split(/[\r\n]/g),Gp=lc.length,ag=uf({rows:lc,style:{fontSize:"".concat(zn,"px"),width:"".concat(tu,"px"),fontFamily:An,lineHeight:jr,padding:pr},rowsLength:Gp,className:"lf-get-text-height"}),zp=vn.height>ag?vn.height:ag;eu&&(zp=eu);var $d=Kr==="ellipsis";return $d&&(zp=zn+2),Object(We.g)("g",null,Object(We.g)("foreignObject",{width:tu,height:zp,x:bi-tu/2,y:wi-zp/2},Object(We.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:zp,width:tu,padding:pr}},Object(We.g)("div",{className:$d?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:$d?lc.join(""):"",style:HC({},_n)},lc.map(function(Fd){return Object(We.g)("div",{className:"lf-node-text--auto-wrap-inner"},Fd)})))))}(i)}if(ut>1){var Bt=Ie.map(function(_n,gn){var zn=(gn-(ut-1)/2)*(m+2);return Object(We.g)("tspan",{className:"lf-text-tspan",x:l,y:h+zn},_n)});return Object(We.g)("text",Me,Bt)}return Object(We.g)("text",Me,d)}}function r0(i){return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r0(i)}function o0(){return o0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},o0.apply(this,arguments)}function YC(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return KO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return KO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function KO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function KC(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function i0(i,o){return i0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},i0(i,o)}function ZC(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Iy(i);if(o){var h=Iy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return JC(this,l)}}function JC(i,o){if(o&&(r0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Id(i)}function Id(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Iy(i){return Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Iy(i)}function Up(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var ZO=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&i0(d,m)})(h,i);var o,l,s=ZC(h);function h(d){var m;(function(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")})(this,h),Up(Id(m=s.call(this)),"dragHandler",void 0),Up(Id(m),"sumDeltaX",0),Up(Id(m),"sumDeltaY",0),Up(Id(m),"stepDrag",void 0),Up(Id(m),"onDragging",function(T){var C=T.deltaX,$=T.deltaY,Q=m.props,te=Q.model,ge=YC(Q.graphModel.transformModel.fixDeltaXY(C,$),2),Me=ge[0],Ie=ge[1];te.moveText(Me,Ie)}),Up(Id(m),"dblClickHandler",function(){m.props.editable&&m.props.model.setElementState(Yr.TEXT_EDIT)}),Up(Id(m),"mouseDownHandle",function(T){var C=m.props,$=C.draggable,Q=C.model,te=C.graphModel.editConfigModel.nodeTextDraggable;($||te)&&(m.stepDrag.model=Q,m.stepDrag.handleMouseDown(T))}),d.model;var w=d.draggable;return m.stepDrag=new ye({onDragging:m.onDragging,step:1,isStopPropagation:w}),m}return o=h,(l=[{key:"getShape",value:function(){var d=this.props,m=d.model,w=d.graphModel,T=m.text,C=w.editConfigModel,$=T.value,Q=T.x,te=T.y,ge=T.editable,Me=T.draggable,Ie={x:Q,y:te,className:"",value:$};ge?Ie.className="lf-element-text":Me||C.nodeTextDraggable?Ie.className="lf-text-draggable":Ie.className="lf-text-disabled";var ut=m.getTextStyle();return Object(We.g)(YO,o0({},Ie,ut,{model:m}))}},{key:"render",value:function(){if(this.props.model.text)return Object(We.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&KC(o.prototype,l),h}(We.a),QC=Wu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,JO=r(130);function a0(i){return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a0(i)}function l0(){return l0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},l0.apply(this,arguments)}function e3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function u0(i,o){return u0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},u0(i,o)}function t3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ly(i);if(o){var h=Ly(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return n3(this,l)}}function n3(i,o){if(o&&(a0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nv(i)}function nv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ly(i){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ly(i)}function mm(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var r3=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&u0(d,m)})(h,i);var o,l,s=t3(h);function h(d){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),mm(nv(m=s.call(this,d)),"style",{}),mm(nv(m),"defaultAngle",void 0),mm(nv(m),"normal",void 0),mm(nv(m),"stepperDrag",void 0),mm(nv(m),"onDragging",function(w){var T,C=w.event,$=m.props,Q=$.graphModel,te=$.nodeModel,ge=$.eventCenter,Me=Q.selectNodes,Ie=te.x,ut=te.y,lt=C.clientX,_t=C.clientY,Bt=Q.getPointByClient({x:lt,y:_t}).canvasOverlayPosition,_n=Bt.x,gn=Bt.y,zn=new Xe(_n-Ie,gn-ut),vn=((T=m.normal)===null||T===void 0?void 0:T.angle(zn))-m.defaultAngle,In=new Rd(-Ie,-ut).rotate(vn).translate(Ie,ut).toString();te.transform=In,te.rotate=vn;var An=Object(JO.map)(Me,function(Ur){return Ur.id});An.indexOf(te.id)===-1&&(An=[te.id]);var jr=Object(JO.reduce)(An,function(Ur,pr){var Kr=Q.getNodeModelById(pr);return Ur[pr]=Kr==null?void 0:Kr.getMoveDistance(0,0,!1),Ur},{});An.forEach(function(Ur){Q.getNodeEdges(Ur).forEach(function(pr){if(jr[pr.sourceNodeId]){var Kr=Q.getNodeModelById(pr.sourceNodeId).anchors.find(function(wi){return wi.id===pr.sourceAnchorId});pr.updateStartPoint(Kr)}if(jr[pr.targetNodeId]){var bi=Q.getNodeModelById(pr.targetNodeId).anchors.find(function(wi){return wi.id===pr.targetAnchorId});pr.updateEndPoint(bi)}})}),ge.emit(Cn.NODE_ROTATE,{e:C,nodeModel:te})}),m.style=d.style,m.stepperDrag=new ye({onDragging:m.onDragging}),m}return o=h,(l=[{key:"render",value:function(){var d=this,m=this.props.nodeModel,w=m.x,T=m.y,C=w+m.width/2+20,$=T-m.height/2-20;return this.normal=new Xe(1,0),this.defaultAngle=this.normal.angle(new Xe(C-w,$-T)),m.defaultAngle=this.defaultAngle,Object(We.g)("g",{className:"lf-rotate-control"},Object(We.g)("g",{onMouseDown:function(Q){d.stepperDrag.handleMouseDown(Q)}},Object(We.g)(Hh,l0({},this.style,{cx:C,cy:$}))))}}])&&e3(o.prototype,l),h}(We.a);function s0(i){return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},s0(i)}var o3=["className"];function $y(){return $y=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},$y.apply(this,arguments)}function i3(i,o){if(i==null)return{};var l,s,h=function(m,w){if(m==null)return{};var T,C,$={},Q=Object.keys(m);for(C=0;C<Q.length;C++)T=Q[C],w.indexOf(T)>=0||($[T]=m[T]);return $}(i,o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(s=0;s<d.length;s++)l=d[s],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function Fy(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return QO(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return QO(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QO(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function eS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function c0(i,o){return c0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},c0(i,o)}function a3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Uy(i);if(o){var h=Uy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return l3(this,l)}}function l3(i,o){if(o&&(s0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ia(i)}function ia(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Uy(i){return Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Uy(i)}function ha(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var Ef=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&c0(m,w)})(d,i);var o,l,s,h=a3(d);function d(m){var w;(function(te,ge){if(!(te instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,d),ha(ia(w=h.call(this)),"t",void 0),ha(ia(w),"moveOffset",void 0),ha(ia(w),"stepDrag",void 0),ha(ia(w),"contextMenuTime",void 0),ha(ia(w),"mouseUpDrag",void 0),ha(ia(w),"startTime",void 0),ha(ia(w),"clickTimer",void 0),ha(ia(w),"modelDisposer",void 0),ha(ia(w),"onDragStart",function(te){var ge=te.event,Me=ge.clientX,Ie=ge.clientY,ut=w.props,lt=ut.model,_t=ut.graphModel.getPointByClient({x:Me,y:Ie}).canvasOverlayPosition,Bt=_t.x,_n=_t.y;w.moveOffset={x:lt.x-Bt,y:lt.y-_n}}),ha(ia(w),"onDragging",function(te){var ge=te.event,Me=w.props,Ie=Me.model,ut=Me.graphModel,lt=ut.editConfigModel,_t=lt.stopMoveGraph,Bt=lt.autoExpand,_n=ut.transformModel,gn=ut.selectNodes,zn=ut.width,vn=ut.height,In=ut.gridSize;Ie.isDragging=!0;var An=ge.clientX,jr=ge.clientY,Ur=ut.getPointByClient({x:An,y:jr}).canvasOverlayPosition,pr=Ur.x,Kr=Ur.y,bi=Fy(_n.CanvasPointToHtmlPoint([pr,Kr]),2),wi=bi[0],Ma=bi[1];if(pr+=w.moveOffset.x,Kr+=w.moveOffset.y,pr=rl(pr,In),Kr=rl(Kr,In),zn&&vn){if(!Bt||_t||!(wi<0||Ma<0||wi>zn||Ma>vn)){var eu=Fy(_n.CanvasPointToHtmlPoint([pr-Ie.width/2,Kr-Ie.height/2]),2),tu=eu[0],lc=eu[1],Gp=Fy(_n.CanvasPointToHtmlPoint([pr+Ie.width/2,Kr+Ie.height/2]),2),ag=Gp[0],zp=Gp[1],$d=Math.max(In,20),Fd=[];tu<0?Fd=[$d,0]:ag>ut.width?Fd=[-$d,0]:lc<0?Fd=[0,$d]:zp>ut.height&&(Fd=[0,-$d]),w.t&&Dy(w.t);var GD=new Rd(-pr,-Kr).rotate(Ie.rotate).translate(pr,Kr).toString();Ie.transform=GD;var lg=gn.map(function(ug){return ug.id});lg.indexOf(Ie.id)===-1&&(lg=[Ie.id]),Fd.length>0&&!_t&&Bt?w.t=GO(function(){var ug=Fy(Fd,2),DS=ug[0],jS=ug[1];_n.translate(DS,jS);var zD=-DS/_n.SCALE_X,HD=-jS/_n.SCALE_X;ut.moveNodes(lg,zD,HD)}):ut.moveNodes(lg,pr-Ie.x,Kr-Ie.y)}}else ut.moveNode2Coordinate(Ie.id,pr,Kr)}),ha(ia(w),"onDragEnd",function(){w.t&&Dy(w.t),w.props.model.isDragging=!1}),ha(ia(w),"handleMouseUp",function(){var te=w.props.model;w.mouseUpDrag=te.isDragging}),ha(ia(w),"handleClick",function(te){var ge=w.mouseUpDrag===!1;if(w.startTime){var Me=w.props,Ie=Me.model,ut=Me.graphModel;if(ge){var lt={data:Ie.getData(),e:te,position:ut.getPointByClient({x:te.clientX,y:te.clientY}),isSelected:!1,isMultiple:!1},_t=te.button===2,Bt=te.detail===2;if(!_t){var _n=ut.editConfigModel,gn=Xs(te,_n);lt.isMultiple=gn,Ie.isSelected&&!Bt&&gn?(lt.isSelected=!1,Ie.setSelected(!1)):(ut.selectNodeById(Ie.id,gn),lt.isSelected=!0,w.toFront()),Bt?(_n.nodeTextEdit&&Ie.text.editable&&(Ie.setSelected(!1),ut.setElementStateById(Ie.id,Yr.TEXT_EDIT)),ut.eventCenter.emit(Cn.NODE_DBCLICK,lt)):(ut.eventCenter.emit(Cn.ELEMENT_CLICK,lt),ut.eventCenter.emit(Cn.NODE_CLICK,lt))}}}}),ha(ia(w),"handleContextMenu",function(te){te.preventDefault();var ge=w.props,Me=ge.model,Ie=ge.graphModel,ut=Me.getData(),lt=Ie.getPointByClient({x:te.clientX,y:te.clientY});Ie.setElementStateById(Me.id,Yr.SHOW_MENU,lt.domOverlayPosition),Me.isSelected||Ie.selectNodeById(Me.id),Ie.eventCenter.emit(Cn.NODE_CONTEXTMENU,{data:ut,e:te,position:lt}),w.toFront()}),ha(ia(w),"handleMouseDown",function(te){var ge=w.props,Me=ge.model,Ie=ge.graphModel;w.startTime=new Date().getTime(),Ie.editConfigModel.adjustNodePosition&&Me.draggable&&w.stepDrag&&w.stepDrag.handleMouseDown(te)}),ha(ia(w),"setHoverON",function(te){var ge=w.props,Me=ge.model,Ie=ge.graphModel;if(!Me.isHovered){var ut=Me.getData();Me.setHovered(!0),Ie.eventCenter.emit(Cn.NODE_MOUSEENTER,{data:ut,e:te})}}),ha(ia(w),"setHoverOFF",function(te){var ge=w.props,Me=ge.model,Ie=ge.graphModel,ut=Me.getData();Me.isHovered&&(Me.setHovered(!1),Ie.eventCenter.emit(Cn.NODE_MOUSELEAVE,{data:ut,e:te}))}),ha(ia(w),"onMouseOut",function(te){QC&&w.setHoverOFF(te)});var T=m.graphModel,C=T.gridSize,$=T.eventCenter,Q=m.model;return w.stepDrag=new ye({onDragStart:w.onDragStart,onDragging:w.onDragging,onDragEnd:w.onDragEnd,step:C,eventType:"NODE",isStopPropagation:!1,eventCenter:$,model:Q}),w.modelDisposer=Object(c.F)(function(){return w.props},function(te){te&&te.model&&w.stepDrag.setModel(te.model)}),w}return o=d,s=[{key:"getModel",value:function(m){return m}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(m){return null}},{key:"getAnchors",value:function(){var m=this,w=this.props,T=w.model,C=w.graphModel,$=T.isSelected,Q=T.isHitable,te=T.isDragging,ge=T.isShowAnchor;return Q&&($||ge)&&!te?ed(T.anchors,function(Me,Ie){var ut=T.getAnchorLineStyle(Me),lt=T.getAnchorStyle(Me);return Object(We.g)(zC,{anchorData:Me,node:m,style:lt,edgeStyle:ut,anchorIndex:Ie,nodeModel:T,graphModel:C,setHoverOFF:m.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var m=this.props,w=m.model,T=m.graphModel,C=w.isSelected,$=w.isHitable,Q=w.enableRotate,te=w.isHovered,ge=w.getRotateControlStyle().style;if($&&(C||te)&&Q)return Object(We.g)(r3,{graphModel:T,nodeModel:w,eventCenter:T.eventCenter,style:ge})}},{key:"getText",value:function(){var m=this.props,w=m.model,T=m.graphModel;if(w.state===Yr.TEXT_EDIT)return"";if(w.text){var C=T.editConfigModel,$=!1;return(w.text.draggable||C.nodeTextDraggable)&&($=!0),Object(We.g)(ZO,{editable:C.nodeTextEdit&&w.text.editable,model:w,graphModel:T,draggable:$})}}},{key:"getStateClassName",value:function(){var m=this.props.model,w=m.state,T=m.isDragging,C=m.isSelected,$="lf-node";switch(w){case Yr.ALLOW_CONNECT:$+=" lf-node-allow";break;case Yr.NOT_ALLOW_CONNECT:$+=" lf-node-not-allow";break;default:$+=" lf-node-default"}return T&&($+=" lf-isDragging"),C&&($+=" lf-node-selected"),$}},{key:"toFront",value:function(){var m=this.props,w=m.model,T=m.graphModel;w.autoToFront&&T.toFront(w.id)}},{key:"render",value:function(){var m,w=this.props,T=w.model,C=w.graphModel,$=C.editConfigModel,Q=$.hideAnchors,te=$.adjustNodePosition,ge=$.allowRotation,Me=C.gridSize,Ie=C.transformModel.SCALE_X,ut=T.isHitable,lt=T.draggable,_t=T.transform,Bt=T.getOuterGAttributes(),_n=Bt.className,gn=_n===void 0?"":_n,zn=i3(Bt,o3),vn=Object(We.g)("g",{className:"lf-node-content"},Object(We.g)("g",{transform:_t},this.getShape(),this.getText(),ge&&this.getRotateControl()),!Q&&this.getAnchors());return ut?(te&&lt&&this.stepDrag.setStep(Me*Ie),m=Object(We.g)("g",$y({className:"".concat(this.getStateClassName()," ").concat(gn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},zn),vn)):m=Object(We.g)("g",$y({className:"".concat(this.getStateClassName()," ").concat(gn)},zn),vn),m}}])&&eS(o.prototype,l),s&&eS(o,s),d}(We.a);function f0(i){return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},f0(i)}function d0(){return d0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},d0.apply(this,arguments)}function u3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function s3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function p0(i,o){return p0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},p0(i,o)}function c3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Vy(i);if(o){var h=Vy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return f3(this,l)}}function f3(i,o){if(o&&(f0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Vy(i){return Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Vy(i)}var h0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&p0(d,m)})(h,i);var o,l,s=c3(h);function h(){return u3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(We.g)(Cd,d0({},m,{x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius}))}}])&&s3(o.prototype,l),h}(Ef);function v0(i){return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},v0(i)}function m0(){return m0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},m0.apply(this,arguments)}function d3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function p3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function y0(i,o){return y0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},y0(i,o)}function h3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=By(i);if(o){var h=By(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return v3(this,l)}}function v3(i,o){if(o&&(v0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function By(i){return By=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},By(i)}var g0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&y0(d,m)})(h,i);var o,l,s=h3(h);function h(){return d3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.r,C=d.getNodeStyle();return Object(We.g)(Hh,m0({},C,{x:m,y:w,r:T}))}}])&&p3(o.prototype,l),h}(Ef);function _0(i){return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_0(i)}function m3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return tS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return tS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function nS(i){var o=i.points,l=i.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(i).forEach(function(h){var d=m3(h,2),m=d[0],w=d[1];_0(w)!=="object"&&(s[m]=w)}),s.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",s.points=o.map(function(h){return h.join(",")}).join(" "),Object(We.g)("polygon",s)}function b0(i){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},b0(i)}function w0(){return w0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},w0.apply(this,arguments)}function y3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function g3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function E0(i,o){return E0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},E0(i,o)}function _3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Wy(i);if(o){var h=Wy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return b3(this,l)}}function b3(i,o){if(o&&(b0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Wy(i){return Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wy(i)}var O0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&E0(d,m)})(h,i);var o,l,s=_3(h);function h(){return y3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.width,C=d.height,$=d.points,Q=d.getNodeStyle(),te={transform:"matrix(1 0 0 1 ".concat(m-T/2," ").concat(w-C/2,")")};return Object(We.g)("g",te,Object(We.g)(nS,w0({},Q,{points:$,x:m,y:w})))}}])&&g3(o.prototype,l),h}(Ef);function S0(i){return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},S0(i)}function x0(){return x0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},x0.apply(this,arguments)}function w3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function E3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function A0(i,o){return A0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},A0(i,o)}function O3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Gy(i);if(o){var h=Gy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return S3(this,l)}}function S3(i,o){if(o&&(S0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Gy(i){return Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Gy(i)}var T0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&A0(d,m)})(h,i);var o,l,s=O3(h);function h(){return w3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(We.g)("g",null,Object(We.g)(nS,x0({},m,{points:d.points,x:d.x,y:d.y})))}}])&&E3(o.prototype,l),h}(Ef);function M0(i){return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},M0(i)}function x3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return rS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return rS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function A3(i){var o=i.x,l=o===void 0?0:o,s=i.y,h=s===void 0?0:s,d=i.rx,m=d===void 0?4:d,w=i.ry,T=w===void 0?4:w,C=i.className,$={cx:l,cy:h,rx:m,ry:T,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(i).forEach(function(Q){var te=x3(Q,2),ge=te[0],Me=te[1];M0(Me)!=="object"&&($[ge]=Me)}),$.className=C?"lf-basic-shape ".concat(C):"lf-basic-shape",Object(We.g)("ellipse",$)}function k0(i){return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},k0(i)}function P0(){return P0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},P0.apply(this,arguments)}function T3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function M3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function N0(i,o){return N0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},N0(i,o)}function k3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=zy(i);if(o){var h=zy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return P3(this,l)}}function P3(i,o){if(o&&(k0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function zy(i){return zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zy(i)}var R0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&N0(d,m)})(h,i);var o,l,s=k3(h);function h(){return T3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getShape",value:function(){var d=this.props.model,m=d.getNodeStyle();return Object(We.g)(A3,P0({},m,{x:d.x,y:d.y,rx:d.rx,ry:d.ry}))}}])&&M3(o.prototype,l),h}(Ef);function C0(i){return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},C0(i)}function oS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function iS(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?oS(Object(l),!0).forEach(function(s){N3(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):oS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function N3(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function R3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function C3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function D0(i,o){return D0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},D0(i,o)}function D3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Hy(i);if(o){var h=Hy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return j3(this,l)}}function j3(i,o){if(o&&(C0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Hy(i){return Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hy(i)}var j0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&D0(d,m)})(h,i);var o,l,s=D3(h);function h(){return R3(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getBackground",value:function(){var d=this.props.model,m=d.getTextStyle(),w=d.width,T=d.height,C=d.x,$=d.y,Q=iS(iS({},m.background),{},{x:C,y:$-1,width:w,height:T});return Object(We.g)(Cd,Q)}},{key:"getShape",value:function(){return Object(We.g)("g",null,this.getBackground())}}])&&C3(o.prototype,l),h}(Ef);function I0(i){return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},I0(i)}function L0(){return L0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},L0.apply(this,arguments)}function I3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function L3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function $0(i,o){return $0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},$0(i,o)}function $3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Xy(i);if(o){var h=Xy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return F3(this,l)}}function F3(i,o){if(o&&(I0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ym(i)}function ym(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xy(i){return Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xy(i)}function qy(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var F0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&$0(d,m)})(h,i);var o,l,s=$3(h);function h(){var d;I3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return qy(ym(d=s.call.apply(s,[this].concat(w))),"ref",void 0),qy(ym(d),"currentProperties",void 0),qy(ym(d),"preProperties",void 0),qy(ym(d),"setRef",function(C){d.ref=C}),d}return o=h,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(d){d.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var d=this.props.model,m=d.x,w=d.y,T=d.height,C=d.width,$=d.getNodeStyle();return this.currentProperties=JSON.stringify(d.properties),Object(We.g)("foreignObject",L0({},$,{x:m-C/2,y:w-T/2,width:C,height:T,ref:this.setRef}))}}])&&L3(o.prototype,l),h}(Ef);function U0(i){return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U0(i)}function V0(){return V0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},V0.apply(this,arguments)}function aS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Vp(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?aS(Object(l),!0).forEach(function(s){G0(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):aS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function U3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function B0(i,o){return B0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},B0(i,o)}function V3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Yy(i);if(o){var h=Yy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return B3(this,l)}}function B3(i,o){if(o&&(U0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0(i)}function W0(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yy(i){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yy(i)}function G0(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var W3=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&B0(d,m)})(h,i);var o,l,s=V3(h);function h(d){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,h),G0(W0(m=s.call(this,d)),"setHoverON",function(){m.setState({isHovered:!0})}),G0(W0(m),"setHoverOFF",function(){m.setState({isHovered:!1})}),m.state={isHovered:!1},m}return o=h,(l=[{key:"getBackground",value:function(){var d=this.props.model,m=d.getTextStyle(),w=d.text,T=d.width,C=m.background||{};if(this.state.isHovered&&m.hover&&m.hover.background&&(C=Vp(Vp({},C),m.hover.background)),w&&w.value&&C.fill!=="transparent"){var $,Q=m.fontSize,te=m.overflowMode,ge=m.lineHeight,Me=m.wrapPadding,Ie=m.textWidth,ut=w.value,lt=w.x,_t=w.y,Bt=String(ut).split(/[\r\n]/g),_n=Bt.length;if(te==="autoWrap"&&Ie){var gn=uf({rows:Bt,style:{fontSize:"".concat(Q,"px"),width:"".concat(Ie,"px"),lineHeight:ge,padding:Me},rowsLength:_n,className:"lf-get-text-height"});$=Vp(Vp({},C),{},{x:lt-1,y:_t-1,width:Ie,height:gn})}else{Bt&&Bt.forEach(function(jr){Io(jr)});var zn=ls({rows:Bt,fontSize:Q,rowsLength:_n}),vn=zn.width,In=zn.height;if(te==="ellipsis"&&(vn=Ie||T,In=Q+2),typeof C.wrapPadding=="string"){var An=C.wrapPadding.split(",").filter(function(jr){return jr.trim()}).map(function(jr){return parseFloat(jr.trim())});An.length>0&&An.length<=4&&(An.length===1?An=[An[0],An[0],An[0],An[0]]:An.length===2?An=[An[0],An[1],An[0],An[1]]:An.length===3&&(An=[An[0],An[1],An[2],An[1]]),vn+=An[1]+An[3],In+=An[0]+An[2],lt+=(An[1]-An[3])/2,_t+=(An[2]-An[0])/2)}$=Vp(Vp({},C),{},{x:lt-1,y:_t-1,width:vn,height:In})}return Object(We.g)(Cd,$)}}},{key:"getShape",value:function(){var d=this.props.model,m=d.text,w=m.value,T=m.x,C=m.y;if(w){var $=Vp({x:T,y:C,className:"lf-element-text",value:w},d.getTextStyle());return Object(We.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(We.g)(YO,V0({},$,{model:d})))}}}])&&U3(o.prototype,l),h}(ZO);function z0(i){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z0(i)}var ic,G3=["text","sourceAnchorId","targetAnchorId"];function lS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Of(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?lS(Object(l),!0).forEach(function(s){Ql(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):lS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function z3(i,o){if(i==null)return{};var l,s,h=function(m,w){if(m==null)return{};var T,C,$={},Q=Object.keys(m);for(C=0;C<Q.length;C++)T=Q[C],w.indexOf(T)>=0||($[T]=m[T]);return $}(i,o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);for(s=0;s<d.length;s++)l=d[s],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(i,l)&&(h[l]=i[l])}return h}function H3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return uS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return uS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function X3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function H0(i,o){return H0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},H0(i,o)}function q3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Ky(i);if(o){var h=Ky(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return Y3(this,l)}}function Y3(i,o){if(o&&(z0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(i)}function Jl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ky(i){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ky(i)}function Ql(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(ic||(ic={}));var sS=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&H0(d,m)})(h,i);var o,l,s=q3(h);function h(d){var m;(function($,Q){if(!($ instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,h),Ql(Jl(m=s.call(this)),"stepDragData",void 0),Ql(Jl(m),"stepDrag",void 0),Ql(Jl(m),"oldEdge",void 0),Ql(Jl(m),"preTargetNode",void 0),Ql(Jl(m),"targetRuleResults",void 0),Ql(Jl(m),"sourceRuleResults",void 0),Ql(Jl(m),"handleMouseDown",function($){m.stepDrag&&m.stepDrag.handleMouseDown($)}),Ql(Jl(m),"onDragStart",function(){var $=m.props,Q=$.x,te=$.y,ge=$.edgeModel,Me=ge.startPoint,Ie=ge.endPoint,ut=ge.pointsList;m.oldEdge={startPoint:Me,endPoint:Ie,pointsList:ut},m.setState({endX:Q,endY:te,dragging:!0})}),Ql(Jl(m),"onDragging",function($){var Q=$.deltaX,te=$.deltaY,ge=m.state,Me=ge.endX,Ie=ge.endY,ut=m.props,lt=ut.graphModel,_t=ut.type,Bt=lt.transformModel,_n=lt.editConfigModel,gn=H3(Bt.moveCanvasPointByHtml([Me,Ie],Q,te),2),zn=gn[0],vn=gn[1];m.setState({endX:zn,endY:vn,dragging:!0});var In=m.props.edgeModel,An=nf({x:Me,y:Ie},lt);if(An&&An.node&&m.isAllowAdjust(An).pass){var jr,Ur=In.startPoint,pr=In.endPoint,Kr=In.sourceNode,bi=In.targetNode;_t===ic.SOURCE?jr={startPoint:{x:An.anchor.x,y:An.anchor.y},endPoint:{x:pr.x,y:pr.y},sourceNode:An.node,targetNode:bi}:_t===ic.TARGET&&(jr={startPoint:{x:Ur.x,y:Ur.y},endPoint:{x:An.anchor.x,y:An.anchor.y},sourceNode:Kr,targetNode:An.node}),In.updateAfterAdjustStartAndEnd(jr)}else _t===ic.SOURCE?In.updateStartPoint({x:zn,y:vn}):_t===ic.TARGET&&In.updateEndPoint({x:zn,y:vn});In.text.value&&_n.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),Ql(Jl(m),"onDragEnd",function($){var Q=$.event;try{var te;m.setState({dragging:!1});var ge=m.props,Me=ge.graphModel,Ie=ge.edgeModel,ut=ge.type,lt=m.state,_t=lt.endX,Bt=lt.endY,_n=lt.dragging,gn=nf({x:_t,y:Bt},Me);if(!_n)return;var zn,vn=!1;if(gn&&gn.node){var In=m.isAllowAdjust(gn),An=In.pass,jr=In.msg,Ur=In.newTargetNode;if(An){var pr=Ie.getData(),Kr=pr.text,bi=pr.sourceAnchorId,wi=bi===void 0?"":bi,Ma=pr.targetAnchorId;zn=Of(Of({sourceAnchorId:wi,targetAnchorId:Ma===void 0?"":Ma},z3(pr,G3)),{},{text:(Kr==null?void 0:Kr.value)||""}),ut===ic.SOURCE?(zn=Of(Of({},Me.edgeGenerator(Me.getNodeModelById(gn.node.id).getData(),Me.getNodeModelById(Ie.targetNodeId).getData(),zn)),{},{sourceNodeId:gn.node.id,sourceAnchorId:gn.anchor.id,startPoint:{x:gn.anchor.x,y:gn.anchor.y},targetNodeId:Ie.targetNodeId,endPoint:Of({},Ie.endPoint)}),Ie.sourceNodeId===gn.node.id&&Ie.sourceAnchorId===gn.anchor.id&&(vn=!0)):ut===ic.TARGET&&(zn=Of(Of({},Me.edgeGenerator(Me.getNodeModelById(Ie.sourceNodeId).getData(),Me.getNodeModelById(gn.node.id).getData(),zn)),{},{sourceNodeId:Ie.sourceNodeId,startPoint:Of({},Ie.startPoint),targetNodeId:gn.node.id,targetAnchorId:gn.anchor.id,endPoint:{x:gn.anchor.x,y:gn.anchor.y}}),Ie.targetNodeId===gn.node.id&&Ie.targetAnchorId===gn.anchor.id&&(vn=!0))}else{vn=!0;var eu=Ur.getData();Me.eventCenter.emit(Cn.CONNECTION_NOT_ALLOWED,{data:eu,msg:jr})}}else vn=!0;if(vn)m.recoveryEdge();else{var tu=Ie.getData();Me.deleteEdgeById(Ie.id);var lc=Me.addEdge(Of({},zn));Me.eventCenter.emit(Cn.EDGE_EXCHANGE_NODE,{data:{newEdge:lc.getData(),oldEdge:tu}})}(te=m.preTargetNode)===null||te===void 0||te.setElementState(Yr.DEFAULT)}finally{m.props.graphModel.eventCenter.emit(Cn.ADJUST_POINT_DRAGEND,{e:Q,data:m.stepDragData})}}),Ql(Jl(m),"recoveryEdge",function(){var $=m.props.edgeModel,Q=m.oldEdge,te=Q.startPoint,ge=Q.endPoint,Me=Q.pointsList;$.updateStartPoint(te),$.updateEndPoint(ge),$.modelType!==xr.LINE_EDGE&&($.pointsList=Me,$.initPoints())}),Ql(Jl(m),"getAdjustPointStyle",function(){var $=m.props,Q=$.graphModel.theme;return $.edgeModel,Q.edgeAdjust}),m.state={dragging:!1,endX:0,endY:0},m.targetRuleResults=new Map,m.sourceRuleResults=new Map;var w=d.type,T=d.edgeModel,C=d.graphModel.eventCenter;return m.stepDragData={type:w,edgeData:T.getData()},m.stepDrag=new ye({onDragStart:m.onDragStart,onDragging:m.onDragging,onDragEnd:m.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:C,data:m.stepDragData}),m}return o=h,(l=[{key:"isAllowAdjust",value:function(d){var m=this.props,w=m.edgeModel,T=w.id,C=w.sourceNode,$=w.targetNode,Q=w.sourceAnchorId,te=w.targetAnchorId,ge=m.type,Me=null,Ie=null,ut=null,lt=null;if(ge===ic.SOURCE?(Me=d.node,Ie=$,ut=d.anchor,lt=$.getAnchorInfo(te)):(Me=C,Ie=d.node,lt=d.anchor,ut=C.getAnchorInfo(Q)),this.preTargetNode&&this.preTargetNode!==d.node&&this.preTargetNode.setElementState(Yr.DEFAULT),this.preTargetNode=d.node,lt.id===ut.id)return{pass:!1,msg:"",newTargetNode:Ie};var _t="".concat(Me.id,"_").concat(Ie.id,"_").concat(ut.id,"_").concat(lt.id);if(!this.targetRuleResults.has(_t)){var Bt=Me.isAllowConnectedAsSource(Ie,ut,lt,T),_n=Ie.isAllowConnectedAsTarget(Me,ut,lt,T);this.sourceRuleResults.set(_t,ql(Bt)),this.targetRuleResults.set(_t,ql(_n))}var gn=this.sourceRuleResults.get(_t),zn=gn.isAllPass,vn=gn.msg,In=this.targetRuleResults.get(_t),An=In.isAllPass,jr=In.msg,Ur=zn&&An?Yr.ALLOW_CONNECT:Yr.NOT_ALLOW_CONNECT;return ge===ic.SOURCE?Me.setElementState(Ur):Ie.setElementState(Ur),{pass:zn&&An,msg:jr||vn,newTargetNode:Ie}}},{key:"render",value:function(){var d=this.props,m=d.x,w=d.y,T=d.getAdjustPointShape,C=d.edgeModel,$=this.state.dragging;return Object(We.g)("g",{pointerEvents:$?"none":"",onMouseDown:this.handleMouseDown},$?"":T(m,w,C))}}])&&X3(o.prototype,l),h}(We.a);function X0(i){return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},X0(i)}function gm(){return gm=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},gm.apply(this,arguments)}function K3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return cS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return cS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function Z3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function J3(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function q0(i,o){return q0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},q0(i,o)}function Q3(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Zy(i);if(o){var h=Zy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return eD(this,l)}}function eD(i,o){if(o&&(X0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ys(i)}function ys(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zy(i){return Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Zy(i)}function ac(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var _m=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&q0(d,m)})(h,i);var o,l,s=Q3(h);function h(){var d;Z3(this,h);for(var m=arguments.length,w=new Array(m),T=0;T<m;T++)w[T]=arguments[T];return ac(ys(d=s.call.apply(s,[this].concat(w))),"startTime",void 0),ac(ys(d),"contextMenuTime",void 0),ac(ys(d),"clickTimer",void 0),ac(ys(d),"textRef",Object(We.f)()),ac(ys(d),"handleHover",function(C,$){var Q=d.props,te=Q.model,ge=Q.graphModel.eventCenter;te.setHovered(C);var Me=C?Cn.EDGE_MOUSEENTER:Cn.EDGE_MOUSELEAVE,Ie=te.getData();ge.emit(Me,{data:Ie,e:$})}),ac(ys(d),"setHoverON",function(C){d.props.model.isHovered||(d.textRef&&d.textRef.current&&d.textRef.current.setHoverON(),d.handleHover(!0,C))}),ac(ys(d),"setHoverOFF",function(C){d.props.model.isHovered&&(d.textRef&&d.textRef.current&&d.textRef.current.setHoverOFF(),d.handleHover(!1,C))}),ac(ys(d),"handleContextMenu",function(C){C.preventDefault(),d.contextMenuTime=new Date().getTime(),d.clickTimer&&clearTimeout(d.clickTimer);var $=d.props,Q=$.model,te=$.graphModel,ge=te.getPointByClient({x:C.clientX,y:C.clientY});te.setElementStateById(Q.id,Yr.SHOW_MENU,ge.domOverlayPosition),d.toFront(),Q.isSelected||te.selectEdgeById(Q.id);var Me=Q==null?void 0:Q.getData();te.eventCenter.emit(Cn.EDGE_CONTEXTMENU,{data:Me,e:C,position:ge})}),ac(ys(d),"handleMouseDown",function(C){C.stopPropagation(),d.startTime=new Date().getTime()}),ac(ys(d),"handleMouseUp",function(C){if(d.startTime&&!(new Date().getTime()-d.startTime>200||C.button===2)){var $=C.detail===2,Q=d.props,te=Q.model,ge=Q.graphModel,Me=te==null?void 0:te.getData(),Ie=ge.getPointByClient({x:C.clientX,y:C.clientY});if($){var ut=ge.editConfigModel,lt=ge.textEditElement;if(lt&&lt.id===te.id&&ge.setElementStateById(te.id,Yr.DEFAULT),ut.edgeTextEdit&&te.text.editable&&ge.setElementStateById(te.id,Yr.TEXT_EDIT),te.modelType===xr.POLYLINE_EDGE){var _t=te,Bt=ge.getPointByClient({x:C.x,y:C.y}).canvasOverlayPosition,_n=Bt.x,gn=Bt.y,zn=Tr({x:_n,y:gn},_t.points);_t.dbClickPosition=zn}ge.eventCenter.emit(Cn.EDGE_DBCLICK,{data:Me,e:C,position:Ie})}else ge.eventCenter.emit(Cn.ELEMENT_CLICK,{data:Me,e:C,position:Ie}),ge.eventCenter.emit(Cn.EDGE_CLICK,{data:Me,e:C,position:Ie});var vn=ge.editConfigModel;ge.selectEdgeById(te.id,Xs(C,vn)),d.toFront()}}),d}return o=h,(l=[{key:"getShape",value:function(){return Object(We.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var d=this.props,m=d.model,w=d.graphModel;if(m.state===Yr.TEXT_EDIT)return null;var T=!1,C=w.editConfigModel;return(m.text.draggable||C.edgeTextDraggable)&&(T=!0),Object(We.g)(W3,{ref:this.textRef,editable:C.edgeTextEdit&&m.text.editable,model:m,graphModel:w,draggable:T})}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=d.isSelected;return{start:m,end:w,hover:this.state.hover,isSelected:T}}},{key:"getLastTwoPoints",value:function(){var d=this.props.model;return[d.startPoint,d.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var d=this.props.model,m=d.id,w=d.getArrowStyle(),T=w.refY,C=T===void 0?0:T,$=w.refX,Q=$===void 0?2:$,te=K3(this.getLastTwoPoints(),2),ge=te[0],Me=te[1],Ie="auto";return ge!==null&&Me!==null&&(Ie=jp(Pd({x:Me.x-ge.x,y:Me.y-ge.y,z:0}))),Object(We.g)("g",null,Object(We.g)("defs",null,Object(We.g)("marker",{id:"marker-start-".concat(m),refX:-Q,refY:C,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(We.g)("marker",{id:"marker-end-".concat(m),refX:Q,refY:C,overflow:"visible",orient:Ie,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var d=this.props.model.getArrowStyle();return d.stroke,d.strokeWidth,d.offset,d.verticalLength,Object(We.g)("path",null)}},{key:"getEndArrow",value:function(){var d=this.props.model.getArrowStyle(),m=d.stroke,w=d.strokeWidth,T=d.offset,C=d.verticalLength;return Object(We.g)("path",{stroke:m,fill:m,strokeWidth:w,transform:"rotate(180)",d:"M 0 0 L ".concat(T," -").concat(C," L ").concat(T," ").concat(C," Z")})}},{key:"getAdjustPointShape",value:function(d,m,w){var T=w.getAdjustPointStyle();return Object(We.g)(Hh,gm({className:"lf-edge-adjust-point"},T,{x:d,y:m}))}},{key:"getAdjustPoints",value:function(){var d=this.props,m=d.model,w=d.graphModel,T=m.getAdjustStart(),C=m.getAdjustEnd();return Object(We.g)("g",null,Object(We.g)(sS,gm({type:"SOURCE"},T,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})),Object(We.g)(sS,gm({type:"TARGET"},C,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:m,graphModel:w})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(We.g)("g",null)}},{key:"getAppend",value:function(){return Object(We.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var d=this.props,m=d.graphModel,w=d.model;m.toFront(w.id)}},{key:"render",value:function(){var d=this.props,m=d.model,w=m.isSelected,T=m.isHitable,C=m.isShowAdjustPoint;return d.graphModel.animation,Object(We.g)("g",null,Object(We.g)("g",{className:["lf-edge",!T&&"pointer-none",w&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),C&&w?this.getAdjustPoints():"")}}])&&J3(o.prototype,l),h}(We.a);function Y0(i){return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Y0(i)}function tD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return fS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return fS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var bm=function(i){var o={d:""};return Object.entries(i).forEach(function(l){var s=tD(l,2),h=s[0],d=s[1],m=Y0(d);h!=="style"&&m==="object"||(o[h]=d)}),Object(We.g)("path",o)};function K0(i){return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},K0(i)}function Z0(){return Z0=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},Z0.apply(this,arguments)}function nD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function rD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function J0(i,o){return J0=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},J0(i,o)}function oD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=Jy(i);if(o){var h=Jy(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return iD(this,l)}}function iD(i,o){if(o&&(K0(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function Jy(i){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Jy(i)}var Q0=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&J0(d,m)})(h,i);var o,l,s=oD(h);function h(){return nD(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=d.isAnimation,C=d.arrowConfig,$=d.getEdgeStyle(),Q=d.getEdgeAnimationStyle(),te=Q.strokeDasharray,ge=Q.stroke,Me=Q.strokeDashoffset,Ie=Q.animationName,ut=Q.animationDuration,lt=Q.animationIterationCount,_t=Q.animationTimingFunction,Bt=Q.animationDirection;return Object(We.g)(Gh,Z0({},$,{x1:m.x,y1:m.y,x2:w.x,y2:w.y},C,T?{strokeDasharray:te,stroke:ge,style:{strokeDashoffset:Me,animationName:Ie,animationDuration:ut,animationIterationCount:lt,animationTimingFunction:_t,animationDirection:Bt}}:{}))}},{key:"getAppendWidth",value:function(){var d=this.props.model,m=d.startPoint,w=d.endPoint,T=pi({start:m,end:w}),C=T.d,$=T.strokeWidth,Q=T.fill,te=T.strokeDasharray,ge=T.stroke;return Object(We.g)(bm,{d:C,fill:Q,strokeWidth:$,stroke:ge,strokeDasharray:te})}}])&&rD(o.prototype,l),h}(_m);function e1(i){return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e1(i)}function aD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return dS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return dS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}var lD=function(i){var o={points:"",fill:"none"};return Object.entries(i).forEach(function(l){var s=aD(l,2),h=s[0],d=s[1];(h==="style"||e1(d)!=="object")&&(o[h]=d)}),Object(We.g)("polyline",o)};function t1(i){return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t1(i)}function pS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Qy(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?pS(Object(l),!0).forEach(function(s){xf(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):pS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function n1(){return n1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},n1.apply(this,arguments)}function uD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return hS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return hS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function sD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function r1(i,o){return r1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},r1(i,o)}function cD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=eg(i);if(o){var h=eg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return fD(this,l)}}function fD(i,o){if(o&&(t1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sf(i)}function Sf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function eg(i){return eg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},eg(i)}function xf(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var o1=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&r1(d,m)})(h,i);var o,l,s=cD(h);function h(){var d;return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),xf(Sf(d=s.call(this)),"drag",void 0),xf(Sf(d),"isDragging",void 0),xf(Sf(d),"isShowAdjustPointTemp",void 0),xf(Sf(d),"appendInfo",void 0),xf(Sf(d),"onDragStart",function(){var m=d.props.model;m.dragAppendStart(),d.isShowAdjustPointTemp=m.isShowAdjustPoint,m.isShowAdjustPoint=!1}),xf(Sf(d),"onDragging",function(m){var w=m.deltaX,T=m.deltaY,C=d.props,$=C.model,Q=C.graphModel;d.isDragging=!0;var te=Q.transformModel,ge=Q.editConfigModel,Me=uD(te.fixDeltaXY(w,T),2),Ie=Me[0],ut=Me[1],lt=$,_t=ge.adjustEdgeMiddle;d.appendInfo=_t?lt.dragAppendSimple(d.appendInfo,{x:Ie,y:ut}):lt.dragAppend(d.appendInfo,{x:Ie,y:ut})}),xf(Sf(d),"onDragEnd",function(){var m=d.props,w=m.model,T=m.graphModel.eventCenter,C=w;C.dragAppendEnd(),d.isDragging=!1,C.isShowAdjustPoint=d.isShowAdjustPointTemp,d.appendInfo=void 0,T.emit(Cn.EDGE_ADJUST,{data:C.getData()})}),xf(Sf(d),"beforeDragStart",function(m,w){w.dragAble&&d.drag.handleMouseDown(m),d.appendInfo=w}),d.drag=new ye({onDragStart:d.onDragStart,onDragging:d.onDragging,onDragEnd:d.onDragEnd,isStopPropagation:!1}),d}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.points,w=d.isAnimation,T=d.arrowConfig,C=d.getEdgeStyle(),$=d.getEdgeAnimationStyle(),Q=$.strokeDasharray,te=$.stroke,ge=$.strokeDashoffset,Me=$.animationName,Ie=$.animationDuration,ut=$.animationIterationCount,lt=$.animationTimingFunction,_t=$.animationDirection;return Object(We.g)(lD,n1({points:m},C,T,w?{strokeDasharray:Q,stroke:te,style:{strokeDashoffset:ge,animationName:Me,animationDuration:Ie,animationIterationCount:ut,animationTimingFunction:lt,animationDirection:_t}}:{}))}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=d.points,w=d.isSelected,T={start:null,end:null,hover:this.state.hover,isSelected:w},C=or(m);return C.length>=2&&(T.start=C[C.length-2],T.end=C[C.length-1]),T}},{key:"getLastTwoPoints",value:function(){var d=this.props.model.points,m=or(d);return m.length>=2?[m[m.length-2],m[m.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(d){var m,w=d.start,T=d.end;if(w.x===T.x&&w.y===T.y)m="";else{var C={start:w,end:T,offset:10,verticalLength:5},$=fs(Qy(Qy({},C),{},{type:"start"})),Q=fs(Qy(Qy({},C),{},{type:"end"}));m="M".concat($.leftX," ").concat($.leftY,` 
      L`).concat($.rightX," ").concat($.rightY,` 
      L`).concat(Q.rightX," ").concat(Q.rightY,`
      L`).concat(Q.leftX," ").concat(Q.leftY," z")}return{d:m,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(d){var m=this.getAppendAttributes(d),w=m.d,T=m.strokeWidth,C=m.fill,$=m.strokeDasharray,Q=m.stroke;return Object(We.g)(bm,{d:w,fill:C,strokeWidth:T,stroke:Q,strokeDasharray:$})}},{key:"getAppendWidth",value:function(){for(var d=this,m=this.props,w=m.model,T=m.graphModel,C=w.pointsList,$=w.draggable,Q=[],te=C.length,ge=function(Ie){var ut="lf-polyline-append",lt={start:{x:C[Ie].x,y:C[Ie].y},end:{x:C[Ie+1].x,y:C[Ie+1].y},startIndex:Ie,endIndex:Ie+1,direction:"",dragAble:!0},_t=Object(We.g)("g",{className:ut},d.getAppendShape(lt)),Bt=T.editConfigModel,_n=Bt.adjustEdge,gn=Bt.adjustEdgeMiddle;if(_n&&$){var zn=lt.startIndex,vn=lt.endIndex,In=gn&&(zn===0||vn===te-1);lt.dragAble=!In,lt.start.x===lt.end.x?(lt.dragAble&&(ut+="-ew-resize"),lt.direction=po.VERTICAL):lt.start.y===lt.end.y&&(lt.dragAble&&(ut+="-ns-resize"),lt.direction=po.HORIZONTAL),_t=Object(We.g)("g",{className:d.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(An){return d.beforeDragStart(An,lt)}},Object(We.g)("g",{className:ut},d.getAppendShape(lt)))}Q.push(_t)},Me=0;Me<te-1;Me++)ge(Me);return Object(We.g)("g",null,Q)}}])&&sD(o.prototype,l),h}(_m);function i1(i){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i1(i)}function dD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return vS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return vS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function a1(){return a1=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i},a1.apply(this,arguments)}function pD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function hD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function l1(i,o){return l1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},l1(i,o)}function vD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=tg(i);if(o){var h=tg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return mD(this,l)}}function mD(i,o){if(o&&(i1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function tg(i){return tg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},tg(i)}var u1=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&l1(d,m)})(h,i);var o,l,s=vD(h);function h(){return pD(this,h),s.apply(this,arguments)}return o=h,(l=[{key:"getEdge",value:function(){var d=this.props.model,m=d.getEdgeStyle(),w=d.path,T=d.isAnimation,C=d.arrowConfig,$=d.getEdgeAnimationStyle(),Q=$.strokeDasharray,te=$.stroke,ge=$.strokeDashoffset,Me=$.animationName,Ie=$.animationDuration,ut=$.animationIterationCount,lt=$.animationTimingFunction,_t=$.animationDirection;return Object(We.g)(bm,a1({d:w},m,C,T?{strokeDasharray:Q,stroke:te,style:{strokeDashoffset:ge,animationName:Me,animationDuration:Ie,animationIterationCount:ut,animationTimingFunction:lt,animationDirection:_t}}:{}))}},{key:"getAppendWidth",value:function(){var d=this.props.model.path;return Object(We.g)(bm,{d,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var d=this.props.model,m=this.state.hover,w=d.isSelected,T=d.getArrowStyle().offset,C=d.pointsList.map(function(Q){return{x:Q.x,y:Q.y}}),$=dD(hi(C,T),2);return{start:$[0],end:$[1],hover:m,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var d=this.props.model,m=d.getArrowStyle().offset,w=d.pointsList.map(function(T){return{x:T.x,y:T.y}});return hi(w,m)}}])&&hD(o.prototype,l),h}(_m);function s1(i){return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},s1(i)}function mS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function yD(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}function gD(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _D(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function c1(i,o){return c1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},c1(i,o)}function bD(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=ng(i);if(o){var h=ng(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return wD(this,l)}}function wD(i,o){if(o&&(s1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i)}function ng(i){return ng=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ng(i)}var ED=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&c1(d,m)})(h,i);var o,l,s=bD(h);function h(){return gD(this,h),s.apply(this,arguments)}return o=h,l=[{key:"getArrowAttributes",value:function(){var d=this.props,m=d.arrowInfo,w=d.style,T=m.start,C=m.end,$={start:T,end:C,offset:w.offset,verticalLength:w.verticalLength,type:"end"},Q=fs($),te=Q.leftX,ge=Q.leftY,Me=Q.rightX,Ie=Q.rightY;return function(ut){for(var lt=1;lt<arguments.length;lt++){var _t=arguments[lt]!=null?arguments[lt]:{};lt%2?mS(Object(_t),!0).forEach(function(Bt){yD(ut,Bt,_t[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(_t)):mS(Object(_t)).forEach(function(Bt){Object.defineProperty(ut,Bt,Object.getOwnPropertyDescriptor(_t,Bt))})}return ut}({d:"M".concat(te," ").concat(ge," L").concat(C.x," ").concat(C.y," L").concat(Me," ").concat(Ie," z")},w)}},{key:"getShape",value:function(){var d=this.getArrowAttributes(),m=d.d,w=d.strokeWidth,T=d.stroke,C=d.fill;return Object(We.g)(bm,{d:m,fill:C,strokeWidth:w,stroke:T})}},{key:"render",value:function(){return Object(We.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&_D(o.prototype,l),h}(We.a),yS=function(i,o){return gt(i,o)},OD=function(i){var o=i==null?0:i.length;return o?i[o-1]:void 0},f1=function(){return Rn.a.Date.now()},SD=Math.max,xD=Math.min,AD=function(i,o,l){var s,h,d,m,w,T,C=0,$=!1,Q=!1,te=!0;if(typeof i!="function")throw new TypeError("Expected a function");function ge(Bt){var _n=s,gn=h;return s=h=void 0,C=Bt,m=i.apply(gn,_n)}function Me(Bt){return C=Bt,w=setTimeout(ut,o),$?ge(Bt):m}function Ie(Bt){var _n=Bt-T;return T===void 0||_n>=o||_n<0||Q&&Bt-C>=d}function ut(){var Bt=f1();if(Ie(Bt))return lt(Bt);w=setTimeout(ut,function(_n){var gn=o-(_n-T);return Q?xD(gn,d-(_n-C)):gn}(Bt))}function lt(Bt){return w=void 0,te&&s?ge(Bt):(s=h=void 0,m)}function _t(){var Bt=f1(),_n=Ie(Bt);if(s=arguments,h=this,T=Bt,_n){if(w===void 0)return Me(T);if(Q)return clearTimeout(w),w=setTimeout(ut,o),ge(T)}return w===void 0&&(w=setTimeout(ut,o)),m}return o=Ys(o)||0,Dr(l)&&($=!!l.leading,d=(Q="maxWait"in l)?SD(Ys(l.maxWait)||0,o):d,te="trailing"in l?!!l.trailing:te),_t.cancel=function(){w!==void 0&&clearTimeout(w),C=0,s=T=h=w=void 0},_t.flush=function(){return w===void 0?m:lt(f1())},_t},TD=r(172);function MD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ld(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var gS,_S,bS,kD=function(){function i(s){(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i),Ld(this,"undos",[]),Ld(this,"redos",[]),Ld(this,"callbacks",[]),Ld(this,"stopWatch",null),Ld(this,"curData",null),Ld(this,"maxSize",50),Ld(this,"waitTime",100),Ld(this,"eventCenter",void 0),this.eventCenter=s}var o,l;return o=i,(l=[{key:"add",value:function(s){yS(OD(this.undos),s)||(this.undos.push(s),yS(this.curData,s)||(this.redos=[]),this.eventCenter.emit(Cn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var s=this.undos.pop();this.redos.push(s);var h=this.undos.pop();return this.curData=no(h),h}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var s=this.redos.pop();return this.curData=no(s),s}}},{key:"watch",value:function(s){var h=this;this.stopWatch&&this.stopWatch(),this.undos.push(s.modelToGraphData()),this.stopWatch=Object(TD.a)(s,AD(function(){var d=s.modelToHistoryData();d&&h.add(d)},this.waitTime))}}])&&MD(o.prototype,l),i}();function d1(i){return d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},d1(i)}function PD(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||function(l,s){if(l){if(typeof l=="string")return wS(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return wS(l,s)}}(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wS(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function ES(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function Bp(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?ES(Object(l),!0).forEach(function(s){Wp(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):ES(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function OS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function p1(i,o){return p1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},p1(i,o)}function ND(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=rg(i);if(o){var h=rg(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return RD(this,l)}}function RD(i,o){if(o&&(d1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rv(i)}function rv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function rg(i){return rg=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},rg(i)}function Wp(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var SS,xS,AS,h1=gs((bS=_S=function(i){(function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),w&&p1(m,w)})(d,i);var o,l,s,h=ND(d);function d(){var m;return function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}(this,d),Wp(rv(m=h.call(this)),"ref",Object(We.f)()),Wp(rv(m),"__prevText",{type:"",text:"",id:""}),Wp(rv(m),"keyupHandler",function(w){var T=m.props.graphModel.textEditElement;w.key==="Enter"&&w.altKey&&T.setElementState(0)}),Wp(rv(m),"inputHandler",function(w){var T=w.target.innerText,C=m.props.graphModel.textEditElement;m.__prevText={type:C.type,text:T.replace(/(\r\n)+$|(\n)+$/,""),id:C.id}}),Wp(rv(m),"keydownHandler",function(w){w.stopPropagation()}),m.state={style:{left:0,top:0}},m}return o=d,s=[{key:"getDerivedStateFromProps",value:function(m){var w,T=m.graphModel,C=T.transformModel,$=T.theme,Q=$.inputText,te=T.textEditElement;if(te){var ge;if((ge=te.text)===null||ge===void 0||!ge.value)if(te.BaseType===fo.EDGE){var Me=(te=te).text,Ie=te.textPosition,ut=Ie.x,lt=Ie.y;Me.x=ut,Me.y=lt,te.setText(Me)}else te=te;var _t={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(te.BaseType===fo.EDGE){var Bt=$.edgeText,_n=Bt.overflowMode,gn=Bt.lineHeight,zn=Bt.wrapPadding,vn=Bt.textWidth;vn&&_n==="autoWrap"&&(w=Bp(Bp({},_t),{},{width:vn,minWidth:vn,lineHeight:gn,padding:zn}))}else if(te.BaseType===fo.NODE){var In=$.nodeText,An=In.overflowMode,jr=In.lineHeight,Ur=In.wrapPadding,pr=In.textWidth,Kr=te,bi=Kr.width,wi=Kr.modelType,Ma=Kr.textWidth||pr||bi;(wi!==xr.TEXT_NODE&&An==="autoWrap"||wi===xr.TEXT_NODE&&pr)&&(w=Bp(Bp({},_t),{},{width:Ma,minWidth:Ma,lineHeight:jr,padding:Ur}))}var eu=te.text,tu=eu.x,lc=eu.y,Gp=PD(C.CanvasPointToHtmlPoint([tu,lc]),2);return{style:Bp(Bp({left:Gp[0],top:Gp[1]},w),Q)}}}}],(l=[{key:"componentDidUpdate",value:function(){var m=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var w=this.__prevText,T=w.text,C=w.id;m.updateText(C,T),m.eventCenter.emit(Cn.TEXT_UPDATE,Bp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(m){if(window.getSelection!==void 0&&document.createRange!==void 0){var w=document.createRange();w.selectNodeContents(m),w.collapse(!1);var T=window.getSelection();T.removeAllRanges(),T.addRange(w)}}},{key:"render",value:function(){var m,w=this.props.graphModel.textEditElement,T=this.state.style;return w?Object(We.g)("div",{contentEditable:!0,className:"lf-text-input",style:T,ref:this.ref,key:w.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(m=w.text)===null||m===void 0?void 0:m.value):null}}])&&OS(o.prototype,l),s&&OS(o,s),d}(We.a),Wp(_S,"toolName","textEdit"),gS=bS))||gS,CD=function(i){return i.modelType===xr.LINE_EDGE?function(o){var l=o.startPoint,s=o.endPoint,h=(l.x+s.x)/2,d=(l.y+s.y)/2,m=Math.abs(l.x-s.x)+10,w=Math.abs(l.y-s.y)+10;return{x:h-m/2,y:d-w/2,x1:h+m/2,y1:d+w/2}}(i):i.modelType===xr.POLYLINE_EDGE?function(o){var l=o.points,s=or(l),h=ct(s,8),d=h.x,m=h.y,w=h.width,T=h.height;return{x:d-w/2,y:m-T/2,x1:d+w/2,y1:m+T/2}}(i):i.modelType===xr.BEZIER_EDGE?function(o){var l=o.path,s=yo(l),h=ct(s,8),d=h.x,m=h.y,w=h.width,T=h.height;return{x:d-w/2,y:m-T/2,x1:d+w/2,y1:m+T/2}}(i):void 0};function v1(i){return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},v1(i)}function TS(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,s){var h=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var d,m,w=[],T=!0,C=!1;try{for(h=h.call(l);!(T=(d=h.next()).done)&&(w.push(d.value),!s||w.length!==s);T=!0);}catch($){C=!0,m=$}finally{try{T||h.return==null||h.return()}finally{if(C)throw m}}return w}}(i,o)||MS(i,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function DD(i){return function(o){if(Array.isArray(o))return m1(o)}(i)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||MS(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function MS(i,o){if(i){if(typeof i=="string")return m1(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?m1(i,o):void 0}}function m1(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,s=new Array(o);l<o;l++)s[l]=i[l];return s}function jD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function y1(i,o){return y1=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},y1(i,o)}function ID(i){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,s=og(i);if(o){var h=og(this).constructor;l=Reflect.construct(s,arguments,h)}else l=s.apply(this,arguments);return LD(this,l)}}function LD(i,o){if(o&&(v1(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ov(i)}function ov(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function og(i){return og=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},og(i)}function iv(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var g1=gs((AS=xS=function(i){(function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),m&&y1(d,m)})(h,i);var o,l,s=ID(h);function h(d){var m;(function($,Q){if(!($ instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,h),iv(ov(m=s.call(this)),"stepDrag",void 0),iv(ov(m),"handleMouseDown",function($){m.stepDrag.handleMouseDown($)}),iv(ov(m),"handleWheelEvent",function($){var Q,te;$.preventDefault();var ge=$.deltaX,Me=$.deltaY,Ie=$.clientX,ut=$.clientY,lt=$.ctrlKey,_t=new WheelEvent("wheel",{deltaX:ge,deltaY:Me,clientX:Ie,clientY:ut,ctrlKey:lt});(Q=m.props.logicFlow.container)===null||Q===void 0||(te=Q.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||te===void 0||te.dispatchEvent(_t)}),iv(ov(m),"onDragging",function($){var Q=$.deltaX,te=$.deltaY,ge=m.props.graphModel,Me=ge.getSelectElements(!0);ge.moveNodes(Me.nodes.map(function(Ie){return Ie.id}),Q,te)}),iv(ov(m),"handleContextMenu",function($){$.preventDefault();var Q=m.props,te=Q.graphModel,ge=Q.graphModel,Me=ge.eventCenter,Ie=ge.selectElements,ut=te.getPointByClient({x:$.clientX,y:$.clientY}),lt={nodes:[],edges:[]};DD(Ie.values()).forEach(function(_t){_t.BaseType===fo.NODE&&lt.nodes.push(_t.getData()),_t.BaseType===fo.EDGE&&lt.edges.push(_t.getData())}),Me.emit(Cn.SELECTION_CONTEXTMENU,{data:lt,e:$,position:ut})});var w=d.graphModel,T=w.gridSize,C=w.eventCenter;return m.stepDrag=new ye({onDragging:m.onDragging,step:T,eventType:"SELECTION",eventCenter:C}),m}return o=h,(l=[{key:"render",value:function(){var d=this.props.graphModel,m=d.selectElements,w=d.transformModel;if(!(m.size<=1)){var T=Number.MAX_SAFE_INTEGER,C=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,Q=Number.MIN_SAFE_INTEGER;m.forEach(function(Ie){var ut={x:0,y:0,x1:0,y1:0};Ie.BaseType===fo.NODE&&(ut=function(lt){var _t=lt.x,Bt=lt.y,_n=lt.width,gn=lt.height;return{x:_t-_n/2,y:Bt-gn/2,x1:_t+_n/2,y1:Bt+gn/2}}(Ie)),Ie.BaseType===fo.EDGE&&(ut=CD(Ie)),T=Math.min(T,ut.x),C=Math.min(C,ut.y),$=Math.max($,ut.x1),Q=Math.max(Q,ut.y1)});var te=TS(w.CanvasPointToHtmlPoint([T,C]),2);T=te[0],C=te[1];var ge=TS(w.CanvasPointToHtmlPoint([$,Q]),2);$=ge[0],Q=ge[1];var Me={left:"".concat(T-10,"px"),top:"".concat(C-10,"px"),width:"".concat($-T+20,"px"),height:"".concat(Q-C+20,"px")};return Object(We.g)("div",{className:"lf-multiple-select",style:Me,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&jD(o.prototype,l),h}(We.a),iv(xS,"toolName","multipleSelect"),SS=AS))||SS;function $D(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ig(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var FD=function(){function i(s){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),ig(this,"tools",void 0),ig(this,"components",void 0),ig(this,"toolMap",new Map),ig(this,"instance",void 0),this.instance=s,this.isDisabledTool(h1.toolName)||this.registerTool(h1.toolName,h1),this.isDisabledTool(g1.toolName)||this.registerTool(g1.toolName,g1);var h=s.graphModel;h.eventCenter.on("".concat(Cn.GRAPH_TRANSFORM,",").concat(Cn.NODE_CLICK,",").concat(Cn.BLANK_CLICK," "),function(){var d=h.textEditElement,m=h.editConfigModel,w=m.edgeTextEdit,T=m.nodeTextEdit;(w||T)&&d&&h.textEditElement.setElementState(Yr.DEFAULT)})}var o,l;return o=i,(l=[{key:"isDisabledTool",value:function(s){return this.instance.options.disabledTools.indexOf(s)!==-1}},{key:"registerTool",value:function(s,h){this.toolMap.set(s,h)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&$D(o.prototype,l),i}(),UD=r(173),VD=r.n(UD);function BD(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _1(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var kS=function(){function i(s){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,i),_1(this,"mousetrap",void 0),_1(this,"options",void 0),_1(this,"target",void 0),s.keyboard||(s.keyboard={enabled:!1}),this.options=s;var h=s.lf;this.target=h.container,this.mousetrap=new VD.a(this.target),s.keyboard.enabled&&!h.options.isSilentMode&&this.enable(!0)}var o,l;return o=i,(l=[{key:"initShortcuts",value:function(){var s=this,h=this.options.keyboard.shortcuts;if(h)if(lo(h))h.forEach(function(T){var C=T.keys,$=T.callback,Q=T.action;return s.on(C,$,Q)});else{var d=h.keys,m=h.callback,w=h.action;this.on(d,m,w)}}},{key:"on",value:function(s,h,d){this.mousetrap.bind(this.getKeys(s),h,d)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(s,h){this.mousetrap.unbind(this.getKeys(s),h)}},{key:"enable",value:function(s){(this.disabled||s)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(s){var h=this;return(Array.isArray(s)?s:[s]).map(function(d){return h.formatKey(d)})}},{key:"formatKey",value:function(s){return s.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&BD(o.prototype,l),i}(),WD=kS,Af=null;function PS(i,o){return i.x+=o,i.y+=o,i.text&&(i.text.x+=o,i.text.y+=o),i}function NS(i,o){return i.startPoint&&(i.startPoint.x+=o,i.startPoint.y+=o),i.endPoint&&(i.endPoint.x+=o,i.endPoint.y+=o),i.pointsList&&i.pointsList.length>0&&i.pointsList.forEach(function(l){l.x+=o,l.y+=o}),i.text&&(i.text.x+=o,i.text.y+=o),i}var av=40,b1=40;function w1(i){return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},w1(i)}function RS(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),l.push.apply(l,s)}return l}function wm(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?RS(Object(l),!0).forEach(function(s){vi(i,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):RS(Object(l)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(l,s))})}return i}function CS(i,o){for(var l=0;l<o.length;l++){var s=o[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function vi(i,o,l){return o in i?Object.defineProperty(i,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[o]=l,i}var E1=Symbol("plugin register by Logicflow.use"),O1=function(){function i(h){var d,m,w=this;(function(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")})(this,i),vi(this,"container",void 0),vi(this,"width",void 0),vi(this,"height",void 0),vi(this,"graphModel",void 0),vi(this,"history",void 0),vi(this,"viewMap",new Map),vi(this,"tool",void 0),vi(this,"keyboard",void 0),vi(this,"dnd",void 0),vi(this,"options",void 0),vi(this,"snaplineModel",void 0),vi(this,"components",[]),vi(this,"plugins",void 0),vi(this,"extension",{}),vi(this,"adapterIn",void 0),vi(this,"adapterOut",void 0),vi(this,"getView",function(T){return w.viewMap.get(T)}),h=k2(h),this.options=h,this.container=this.initContainer(h.container),this.plugins=h.plugins,this.graphModel=new YN(wm({},h)),this.tool=new FD(this),this.history=new kD(this.graphModel.eventCenter),this.dnd=new HR({lf:this}),this.keyboard=new WD({lf:this,keyboard:h.keyboard}),h.snapline!==!1&&(this.snaplineModel=new WO(this.graphModel),d=this.graphModel.eventCenter,m=this.snaplineModel,d.on("node:mousemove",function(T){var C=T.data;m.setNodeSnapLine(C)}),d.on("node:mouseup",function(){m.clearSnapline()})),function(T,C){var $=T.keyboard,Q=$.options.keyboard;$.on(["cmd + c","ctrl + c"],function(){if(b1=av,!Q.enabled||C.textEditElement)return!0;var te=T.options.guards,ge=C.getSelectElements(!1);return te&&te.beforeClone&&!te.beforeClone(ge)||ge.nodes.length===0&&ge.edges.length===0?(Af=null,!0):((Af=ge).nodes.forEach(function(Me){return PS(Me,av)}),Af.edges.forEach(function(Me){return NS(Me,av)}),!1)}),$.on(["cmd + v","ctrl + v"],function(){if(!Q.enabled||C.textEditElement)return!0;if(Af&&(Af.nodes||Af.edges)){T.clearSelectElements();var te=T.addElements(Af,b1);if(!te)return!0;te.nodes.forEach(function(ge){return T.selectElementById(ge.id,!0)}),te.edges.forEach(function(ge){return T.selectElementById(ge.id,!0)}),Af.nodes.forEach(function(ge){return PS(ge,av)}),Af.edges.forEach(function(ge){return NS(ge,av)}),b1+=av}return!1}),$.on(["cmd + z","ctrl + z"],function(){return!Q.enabled||!!C.textEditElement||(T.undo(),!1)}),$.on(["cmd + y","ctrl + y"],function(){return!Q.enabled||!!C.textEditElement||(T.redo(),!1)}),$.on(["backspace"],function(){if(!Q.enabled||C.textEditElement)return!0;var te=C.getSelectElements(!0);return T.clearSelectElements(),te.edges.forEach(function(ge){return T.deleteEdge(ge.id)}),te.nodes.forEach(function(ge){return T.deleteNode(ge.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(h.disabledPlugins)}var o,l,s;return o=i,l=[{key:"register",value:function(h,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof h=="string"){var w={BaseEdge:_m,BaseEdgeModel:Md,BaseNode:Ef,BaseNodeModel:wf,RectNode:h0,RectNodeModel:zb,CircleNode:g0,CircleNodeModel:Ab,PolygonNode:O0,PolygonNodeModel:Vb,TextNode:j0,TextNodeModel:Yb,LineEdge:Q0,LineEdgeModel:Qs,DiamondNode:T0,DiamondNodeModel:Nb,PolylineEdge:o1,PolylineEdgeModel:Ta,BezierEdge:u1,BezierEdgeModel:bb,EllipseNode:R0,EllipseNodeModel:jb,HtmlNode:F0,HtmlNodeModel:Jb,h:We.g,type:h};this.viewMap.forEach(function(te){var ge=te.extendKey;ge&&(w[ge]=te)}),this.graphModel.modelMap.forEach(function(te){var ge=te.extendKey;ge&&(w[ge]=te)});var T=d(w),C=T.view,$=T.model,Q=C;m&&!Q.isObervered&&(Q.isObervered=!0,Q=cn(Q)),this.setView(h,Q),this.graphModel.setModel(h,$)}else this.registerElement(h)}},{key:"registerElement",value:function(h){var d=h.view;h.isObserverView===!1||d.isObervered||(d.isObervered=!0,d=cn(d)),this.setView(h.type,d),this.graphModel.setModel(h.type,h.model)}},{key:"batchRegister",value:function(){var h=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];d.forEach(function(m){h.registerElement(m)})}},{key:"defaultRegister",value:function(){this.registerElement({view:h0,model:zb,type:"rect"}),this.registerElement({type:"circle",view:g0,model:Ab}),this.registerElement({type:"polygon",view:O0,model:Vb}),this.registerElement({type:"line",view:Q0,model:Qs}),this.registerElement({type:"polyline",view:o1,model:Ta}),this.registerElement({type:"bezier",view:u1,model:bb}),this.registerElement({type:"text",view:j0,model:Yb}),this.registerElement({type:"ellipse",view:R0,model:jb}),this.registerElement({type:"diamond",view:T0,model:Nb}),this.registerElement({type:"html",view:F0,model:Jb})}},{key:"selectElementById",value:function(h){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(h,d),!d&&m&&this.graphModel.toFront(h)}},{key:"focusOn",value:function(h){var d=this.graphModel.transformModel,m=h.coordinate,w=h.id;if(!m){var T=this.getNodeModelById(w);T&&(m=T.getData());var C=this.getEdgeModelById(w);C&&(m=C.textPosition)}var $=m,Q=$.x,te=$.y;d.focusOn(Q,te,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(h){this.graphModel.setTheme(h)}},{key:"resize",value:function(h,d){this.graphModel.resize(h,d),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(h){this.graphModel.setDefaultEdgeType(h)}},{key:"updateText",value:function(h,d){this.graphModel.updateText(h,d)}},{key:"deleteElement",value:function(h){var d,m,w,T=this.getModelById(h);return!!T&&(m=(w=(vi(d={},fo.NODE,this.deleteNode),vi(d,fo.EDGE,this.deleteEdge),d)[T.BaseType])===null||w===void 0?void 0:w.call(this,h))!==null&&m!==void 0&&m}},{key:"getModelById",value:function(h){return this.graphModel.getElement(h)}},{key:"getDataById",value:function(h){var d;return(d=this.graphModel.getElement(h))===null||d===void 0?void 0:d.getData()}},{key:"changeNodeType",value:function(h,d){this.graphModel.changeNodeType(h,d)}},{key:"changeEdgeType",value:function(h,d){this.graphModel.changeEdgeType(h,d)}},{key:"getNodeEdges",value:function(h){return this.graphModel.getNodeEdges(h)}},{key:"addNode",value:function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cn.NODE_ADD,m=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(h,d,m)}},{key:"deleteNode",value:function(h){var d=this.graphModel.getNodeModelById(h);if(!d)return!1;var m=d.getData(),w=this.options.guards,T=!w||!w.beforeDelete||w.beforeDelete(m);return T&&this.graphModel.deleteNode(h),T}},{key:"cloneNode",value:function(h){var d=this.graphModel.getNodeModelById(h).getData(),m=this.options.guards;if(!m||!m.beforeClone||m.beforeClone(d))return this.graphModel.cloneNode(h)}},{key:"changeNodeId",value:function(h,d){return this.graphModel.changeNodeId(h,d)}},{key:"getNodeModelById",value:function(h){return this.graphModel.getNodeModelById(h)}},{key:"getNodeDataById",value:function(h){var d;return(d=this.graphModel.getNodeModelById(h))===null||d===void 0?void 0:d.getData()}},{key:"addEdge",value:function(h){return this.graphModel.addEdge(h)}},{key:"deleteEdge",value:function(h){var d=this.options.guards,m=this.graphModel.edgesMap[h];if(!m)return!1;var w=m.model.getData(),T=!d||!d.beforeDelete||d.beforeDelete(w);return T&&this.graphModel.deleteEdgeById(h),T}},{key:"deleteEdgeByNodeId",value:function(h){var d=h.sourceNodeId,m=h.targetNodeId;d&&m?this.graphModel.deleteEdgeBySourceAndTarget(d,m):d?this.graphModel.deleteEdgeBySource(d):m&&this.graphModel.deleteEdgeByTarget(m)}},{key:"changeEdgeId",value:function(h,d){return this.graphModel.changeEdgeId(h,d)}},{key:"getEdgeModelById",value:function(h){var d;return(d=this.graphModel.edgesMap[h])===null||d===void 0?void 0:d.model}},{key:"getEdgeModels",value:function(h){var d=this.graphModel.edges,m=h.sourceNodeId,w=h.targetNodeId;if(m&&w){var T=[];return d.forEach(function(Q){Q.sourceNodeId===m&&Q.targetNodeId===w&&T.push(Q)}),T}if(m){var C=[];return d.forEach(function(Q){Q.sourceNodeId===m&&C.push(Q)}),C}if(w){var $=[];return d.forEach(function(Q){Q.targetNodeId===w&&$.push(Q)}),$}return[]}},{key:"getEdgeDataById",value:function(h){var d;return(d=this.getEdgeModelById(h))===null||d===void 0?void 0:d.getData()}},{key:"getNodeIncomingEdge",value:function(h){return this.graphModel.getNodeIncomingEdge(h)}},{key:"getNodeOutgoingEdge",value:function(h){return this.graphModel.getNodeOutgoingEdge(h)}},{key:"getNodeIncomingNode",value:function(h){return this.graphModel.getNodeIncomingNode(h)}},{key:"getNodeOutgoingNode",value:function(h){return this.graphModel.getNodeOutgoingNode(h)}},{key:"editText",value:function(h){this.graphModel.editText(h)}},{key:"setProperties",value:function(h,d){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.setProperties(_i(d))}},{key:"deleteProperty",value:function(h,d){var m;(m=this.graphModel.getElement(h))===null||m===void 0||m.deleteProperty(d)}},{key:"getProperties",value:function(h){var d;return(d=this.graphModel.getElement(h))===null||d===void 0?void 0:d.getProperties()}},{key:"toFront",value:function(h){this.graphModel.toFront(h)}},{key:"setElementZIndex",value:function(h,d){return this.graphModel.setElementZIndex(h,d)}},{key:"addElements",value:function(h){for(var d=this,m=h.nodes,w=h.edges,T={},C={nodes:[],edges:[]},$=0;$<m.length;$++){var Q=m[$],te=Q.id,ge=this.addNode(Q);if(!ge)return;te&&(T[te]=ge.id),C.nodes.push(ge)}return w.forEach(function(Me){var Ie=Me.sourceNodeId,ut=Me.targetNodeId;T[Ie]&&(Ie=T[Ie]),T[ut]&&(ut=T[ut]);var lt=d.graphModel.addEdge(wm(wm({},Me),{},{sourceNodeId:Ie,targetNodeId:ut}));C.edges.push(lt)}),C}},{key:"getAreaElement",value:function(h,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],T=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(h,d,m,w,T).map(function(C){return C.getData()})}},{key:"getSelectElements",value:function(){var h=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(h)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var h=this.graphModel.modelToGraphData();if(this.adapterOut){for(var d=arguments.length,m=new Array(d),w=0;w<d;w++)m[w]=arguments[w];return this.adapterOut.apply(this,[h].concat(m))}return h}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(h){var d=this.graphModel,m=d.editConfigModel,w=d.transformModel;m.updateEditConfig(h),(h==null?void 0:h.stopMoveGraph)!==void 0&&w.updateTranslateLimits(h.stopMoveGraph),h!=null&&h.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(h,d){return this.graphModel.getPointByClient({x:h,y:d})}},{key:"undo",value:function(){if(this.history.undoAble()){var h=_i(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"redo",value:function(){if(this.history.redoAble()){var h=_i(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(h)}}},{key:"zoom",value:function(h,d){return this.graphModel.transformModel.zoom(h,d)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(h){this.graphModel.transformModel.setZoomMiniSize(h)}},{key:"setZoomMaxSize",value:function(h){this.graphModel.transformModel.setZoomMaxSize(h)}},{key:"getTransform",value:function(){var h=this.graphModel.transformModel;return{SCALE_X:h.SCALE_X,SCALE_Y:h.SCALE_Y,TRANSLATE_X:h.TRANSLATE_X,TRANSLATE_Y:h.TRANSLATE_Y}}},{key:"translate",value:function(h,d){this.graphModel.transformModel.translate(h,d)}},{key:"resetTranslate",value:function(){var h=this.graphModel.transformModel,d=h.TRANSLATE_X,m=h.TRANSLATE_Y;this.translate(-d,-m)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(h,d){d===void 0&&(d=h),this.graphModel.fitView(h,d)}},{key:"openEdgeAnimation",value:function(h){this.graphModel.openEdgeAnimation(h)}},{key:"closeEdgeAnimation",value:function(h){this.graphModel.closeEdgeAnimation(h)}},{key:"on",value:function(h,d){this.graphModel.eventCenter.on(h,d)}},{key:"off",value:function(h,d){this.graphModel.eventCenter.off(h,d)}},{key:"once",value:function(h,d){this.graphModel.eventCenter.once(h,d)}},{key:"emit",value:function(h,d){this.graphModel.eventCenter.emit(h,d)}},{key:"initContainer",value:function(h){var d=document.createElement("div");return d.style.position="relative",d.style.width="100%",d.style.height="100%",h.innerHTML="",h.appendChild(d),d}},{key:"installPlugins",value:function(){var h,d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=(h=this.plugins)!==null&&h!==void 0?h:i.extensions;w.forEach(function(T){var C=null,$=null;T[E1]?(C=T.extension,$=T.props):C=T;var Q=C.pluginName||C.name;m.indexOf(Q)===-1&&d.installPlugin(C,$)})}},{key:"installPlugin",value:function(h,d){if(w1(h)==="object"){var m=h.install,w=h.render;return m&&m.call(h,this,i),w&&this.components.push(w.bind(h)),void(this.extension[h.pluginName]=h)}var T=h,C=new T({lf:this,LogicFlow:i,options:this.options.pluginsOptions,props:d});C.render&&this.components.push(C.render.bind(C)),this.extension[T.pluginName]=C}},{key:"updateAttributes",value:function(h,d){this.graphModel.updateAttributes(h,d)}},{key:"createFakerNode",value:function(h){var d=this.graphModel.modelMap.get(h.type);if(d){var m=new d(wm(wm({},h),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(m),m}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(h){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(h)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(h,d){this.viewMap.set(h,d)}},{key:"renderRawData",value:function(h){this.graphModel.graphDataToModel(_i(h)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(We.j)(Object(We.g)(GR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Cn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(h=this.adapterIn(h)),this.renderRawData(h)}}],s=[{key:"use",value:function(h,d){var m,w,T=h.pluginName;T||(T=h.name);var C=(m=this.extensions.get(T))===null||m===void 0?void 0:m.extension;C&&C.destroy&&C.destroy(),this.extensions.set(T,(vi(w={},E1,E1),vi(w,"extension",h),vi(w,"props",d),w))}}],l&&CS(o.prototype,l),s&&CS(o,s),i}();function gs(i){return cn(i)}vi(O1,"extensions",new Map),a.default=O1}])})}(cg,cg.exports)),cg.exports}var mn=AV();const TV=eI(mn);var MV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),kV=(globalThis==null?void 0:globalThis._ids)||new MV;function Xv(){return kV.next()}var Rk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Rk(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Xv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),a={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(a),n},t.extendKey="StartEventModel",t})(mn.CircleNodeModel);(function(e){Rk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(mn.CircleNode);var Ck=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ig=function(){return Ig=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ig.apply(this,arguments)};(function(e){Ck(t,e);function t(n,a){var r=this;return n.id||(n.id="Event_"+Xv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),a={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(a),n},t.extendKey="EndEventModel",t})(mn.CircleNodeModel);(function(e){Ck(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,a=n.getNodeStyle(),r=n.x,u=n.y,c=n.r,v=e.prototype.getShape.call(this);return mn.h("g",{},v,mn.h("circle",Ig(Ig({},a),{cx:r,cy:u,r:c-5})))},t.extendKey="EndEventView",t})(mn.CircleNode);var Dk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rm=function(){return Rm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rm.apply(this,arguments)};(function(e){Dk(t,e);function t(n,a){var r=this;return n.id||(n.id="Gateway_"+Xv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,a)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(mn.PolygonNodeModel);(function(e){Dk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.points,f=n.getNodeStyle();return mn.h("g",{transform:"matrix(1 0 0 1 "+(a-u/2)+" "+(r-c/2)+")"},mn.h("polygon",Rm(Rm({},f),{x:a,y:r,points:v})),mn.h("path",Rm({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},f)))},t.extendKey="ExclusiveGatewayNode",t})(mn.PolygonNode);var jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Lg=function(){return Lg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lg.apply(this,arguments)};(function(e){jk(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Xv()),r=e.call(this,n,a)||this,r}return t.extendKey="UserTaskModel",t})(mn.RectNodeModel);(function(e){jk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getNodeStyle();return mn.h("svg",{x:a-u/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},mn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.radius,f=n.getNodeStyle();return mn.h("g",{},[mn.h("rect",Lg(Lg({},f),{x:a-u/2,y:r-c/2,rx:v,ry:v,width:u,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(mn.RectNode);var Ik=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Tw=function(){return Tw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tw.apply(this,arguments)};(function(e){Ik(t,e);function t(n,a){var r=this;return n.id||(n.id="Activity_"+Xv()),r=e.call(this,n,a)||this,r}return t.extendKey="ServiceTaskModel",t})(mn.RectNodeModel);(function(e){Ik(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getNodeStyle();return mn.h("svg",{x:a-u/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},mn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.radius,f=n.getNodeStyle();return mn.h("g",{},[mn.h("rect",Tw({x:a-u/2,y:r-c/2,rx:v,ry:v,width:u,height:c},f)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(mn.RectNode);var Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Lk(t,e);function t(n,a){var r=this;return n.id||(n.id="Flow_"+Xv()),r=e.call(this,n,a)||this,r}return t.extendKey="SequenceFlowModel",t})(mn.PolylineEdgeModel);(function(e){Lk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(mn.PolylineEdge);var gx={width:40,height:40},_x={width:40,height:40},bx={width:40,height:40},wx={width:100,height:80},Ex={width:100,height:80},PV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),NV=(globalThis==null?void 0:globalThis._ids)||new PV;function Ox(){return NV.next()}function $k(e){return Object.prototype.toString.call(e)}function RV(e){return"  ".repeat(e)}function $g(e){var t=e;return $k(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var a=n;n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=$g(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,a){t[a]=$g(n)})),t}function CV(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify($g(e)).replace(/"/g,"'")}return t}var lv=`	
`;function wg(e,t,n){var a=RV(n),r="";if(t==="#text")return lv+a+e;if(t==="#cdata-section")return lv+a+"<![CDATA["+e+"]]>";if(t==="#comment")return lv+a+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+CV(e)+'"';if(Array.isArray(e))e.forEach(function(f){r+=wg(f,t,n+1)});else if($k(e)==="[object Object]"){var u=Object.keys(e),c="",v="";r+=(n===0?"":lv+a)+"<"+t,u.forEach(function(f){f.charAt(0)==="-"?c+=wg(e[f],f,n+1):v+=wg(e[f],f,n+1)}),r+=c+(v!==""?">"+v+(lv+a)+"</"+t+">":" />")}else r+=lv+a+("<"+t+">"+e.toString()+"</"+t+">");return r}function DV(e){var t="";for(var n in e)t+=wg(e[n],n,0);return t}var hl=function(){};hl.ObjTree=function(){return this};hl.ObjTree.VERSION="0.23";hl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;hl.ObjTree.prototype.attr_prefix="-";hl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};hl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var u=this,c=n,v=a.onComplete;a.onComplete=function(_){var b;_&&_.responseXML&&_.responseXML.documentElement&&(b=u.parseDOM(_.responseXML.documentElement)),c(b,_),v&&v(_)}}else a.asynchronous=!1;var f;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(f=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(f=g.transport)}if(n)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement)};hl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var a={};a[e.nodeName]=n,n=a}return n}};hl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var u=e.attributes[r].nodeName;if(typeof u=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(u=this.attr_prefix+u,typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var f=e.childNodes[r].nodeType;f==3||f==4||f==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var u=e.childNodes[r].nodeName;if(typeof u=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}}else n===null&&(n={});return n}};hl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=a):n==1?e[t]=a:n==2?e[t]=[e[t],a]:e[t][e[t].length]=a};hl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};hl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t.hasOwnProperty(r)){var u=t[r];r.charAt(0)!=this.attr_prefix?typeof u>"u"||u==null?n[n.length]="<"+r+" />":typeof u=="object"&&u.constructor==Array?n[n.length]=this.array_to_xml(r,u):typeof u=="object"?n[n.length]=this.hash_to_xml(r,u):n[n.length]=this.scalar_to_xml(r,u):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(u)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};hl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};hl.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};hl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var jV=function(e){return new hl.ObjTree().parseXML(e)},IV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Mw=function(){return Mw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Mw.apply(this,arguments)},T_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},hc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(hc||(hc={}));var Fk=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Sx=["properties","startPoint","endPoint","pointsList"];function xx(e){var t=e?Sx.concat(e):Sx;return function(n){function a(r){var u={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return a(c)}):(Object.entries(r).forEach(function(c){var v=T_(c,2),f=v[0],g=v[1];typeof g!="object"?f.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(f)?u[f]=g:u["-"+f]=g:t.includes(f)?u["-"+f]=a(g):u[f]=a(g)}),u)}return a(n)}}function Fg(e){var t={};return Object.entries(e).forEach(function(n){var a=T_(n,2),r=a[0],u=a[1];r.indexOf("-")===0?t[r.substring(1)]=$g(u):typeof u=="string"?t[r]=u:Object.prototype.toString.call(u)==="[object Object]"?t[r]=Fg(u):Array.isArray(u)?t[r]=u.map(function(c){return Fg(c)}):t[r]=u}),t}function LV(e,t,n){var a=new Map;t.nodes.forEach(function(u){var c,v={"-id":u.id};if(!((c=u.text)===null||c===void 0)&&c.value&&(v["-name"]=u.text.value),u.properties){var f=xx(n)(u.properties);Object.assign(v,f)}a.set(u.id,v),e[u.type]?Array.isArray(e[u.type])?e[u.type].push(v):e[u.type]=[e[u.type],v]:e[u.type]=v});var r=t.edges.map(function(u){var c,v,f=a.get(u.targetNodeId);f["bpmn:incoming"]?Array.isArray(f["bpmn:incoming"])?f["bpmn:incoming"].push(u.id):f["bpmn:incoming"]=[f["bpmn:incoming"],u.id]:f["bpmn:incoming"]=u.id;var g={"-id":u.id,"-sourceRef":u.sourceNodeId,"-targetRef":u.targetNodeId};if(!((c=u.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=u.text)===null||v===void 0?void 0:v.value),u.properties){var _=xx(n)(u.properties);Object.assign(g,_)}return g});t.edges.forEach(function(u){var c=a.get(u.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(u.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],u.id]:c["bpmn:outgoing"]=u.id}),e[hc.FLOW]=r}function $V(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,u=n.pointsList.map(function(v){var f=v.x,g=v.y;return{"-x":f,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":u};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,u=100,c=80,v=n.x,f=n.y,g=Qd.shapeConfigMap.get(n.type);g&&(u=g.width,c=g.height),v-=u/2,f-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":f,"-width":u,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}function FV(e){var t=[],n=[],a=e["bpmn:definitions"];if(a){var r=a["bpmn:process"];Object.keys(r).forEach(function(u){if(u.indexOf("bpmn:")===0){var c=r[u];if(u===hc.FLOW){var v=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=VV(c,v)}else{var f=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(UV(c,f,u))}}})}return{nodes:t,edges:n}}function UV(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var f=Ax(v,n,c);a.push(f)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var u=Ax(r,n,e);a.push(u)}return a}function Ax(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),u=n["-name"],c=Qd.shapeConfigMap.get(t);c&&(a+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(b){var O=T_(b,2),x=O[0],M=O[1];Fk.indexOf(x)===-1&&(v||(v={}),v[x]=M)}),v&&(v=Fg(v));var f;if(u&&(f={x:a,y:r,value:u},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];f.x=Number(g["-x"])+Number(g["-width"])/2,f.y=Number(g["-y"])+Number(g["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:a,y:r,properties:v};return f&&(_.text=f),_}function VV(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var u;Array.isArray(t)?u=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):u=t,n.push(Tx(u,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(Tx(a,e))}return n}function Tx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],u=0;a.split(`
`).forEach(function(f){u<f.length&&(u=f.length)}),n={value:a,x:Number(r["-x"])+u*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(f){var g=T_(f,2),_=g[0],b=g[1];Fk.indexOf(_)===-1&&(c||(c={}),c[_]=b)}),c&&(c=Fg(c));var v={id:t["-id"],type:hc.FLOW,pointsList:e["di:waypoint"].map(function(f){return{x:Number(f["-x"]),y:Number(f["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Qd=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,u){var c=Mw({},n.processAttributes);LV(c,r,u);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};$V(v,r);var f=n.definitionAttributes;f["bpmn:process"]=c,f["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":f};return g},this.adapterIn=function(r){if(r)return FV(r)},a.adapterIn=function(r){return n.adapterIn(r)},a.adapterOut=function(r,u){return n.adapterOut(r,u)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Ox()},this.definitionAttributes={"-id":"Definitions_"+Ox(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Qd.shapeConfigMap.set(hc.START,{width:gx.width,height:gx.height});Qd.shapeConfigMap.set(hc.END,{width:_x.width,height:_x.height});Qd.shapeConfigMap.set(hc.GATEWAY,{width:bx.width,height:bx.height});Qd.shapeConfigMap.set(hc.SYSTEM,{width:wx.width,height:wx.height});Qd.shapeConfigMap.set(hc.USER,{width:Ex.width,height:Ex.height});(function(e){IV(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(u){var c=jV(u);return a.adapterIn(c)},a.adapterXmlOut=function(u,c){var v=a.adapterOut(u,c);return DV(v)};var r=n.lf;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a}return t.pluginName="bpmnXmlAdapter",t})(Qd);var BV=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var a=Math.random()*16|0,r=n==="x"?a:a&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),WV=(globalThis==null?void 0:globalThis._ids)||new BV;function GV(){return WV.next()}mn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),mn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),mn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});mn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});mn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var kE,Ci,Uk,Zp,Mx,Vk,Bk,Wk,PE,kw,Pw,Nw={},Gk=[],zV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,M_=Array.isArray;function Nf(e,t){for(var n in t)e[n]=t[n];return e}function NE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Cm(e,t,n){var a,r,u,c={};for(u in t)u=="key"?a=t[u]:u=="ref"?r=t[u]:c[u]=t[u];if(arguments.length>2&&(c.children=arguments.length>3?kE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(u in e.defaultProps)c[u]===void 0&&(c[u]=e.defaultProps[u]);return Eg(e,c,a,r,null)}function Eg(e,t,n,a,r){var u={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Uk,__i:-1,__u:0};return r==null&&Ci.vnode!=null&&Ci.vnode(u),u}function RE(e){return e.children}function Ev(e,t){this.props=e,this.context=t}function Cv(e,t){if(t==null)return e.__?Cv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Cv(e):null}function zk(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return zk(e)}}function kx(e){(!e.__d&&(e.__d=!0)&&Zp.push(e)&&!Ug.__r++||Mx!=Ci.debounceRendering)&&((Mx=Ci.debounceRendering)||Vk)(Ug)}function Ug(){for(var e,t,n,a,r,u,c,v=1;Zp.length;)Zp.length>v&&Zp.sort(Bk),e=Zp.shift(),v=Zp.length,e.__d&&(n=void 0,r=(a=(t=e).__v).__e,u=[],c=[],t.__P&&((n=Nf({},a)).__v=a.__v+1,Ci.vnode&&Ci.vnode(n),qk(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[r]:null,u,r??Cv(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,qV(u,n,c),n.__e!=r&&zk(n)));Ug.__r=0}function Hk(e,t,n,a,r,u,c,v,f,g,_){var b,O,x,M,A,E,D=a&&a.__k||Gk,j=t.length;for(f=HV(n,t,D,f,j),b=0;b<j;b++)(x=n.__k[b])!=null&&(O=x.__i==-1?Nw:D[x.__i]||Nw,x.__i=b,E=qk(e,x,O,r,u,c,v,f,g,_),M=x.__e,x.ref&&O.ref!=x.ref&&(O.ref&&CE(O.ref,null,x),_.push(x.ref,x.__c||M,x)),A==null&&M!=null&&(A=M),4&x.__u||O.__k===x.__k?f=Xk(x,f,e):typeof x.type=="function"&&E!==void 0?f=E:M&&(f=M.nextSibling),x.__u&=-7);return n.__e=A,f}function HV(e,t,n,a,r){var u,c,v,f,g,_=n.length,b=_,O=0;for(e.__k=new Array(r),u=0;u<r;u++)(c=t[u])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=u+O,(c=e.__k[u]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?Eg(null,c,null,null,null):M_(c)?Eg(RE,{children:c},null,null,null):c.constructor==null&&c.__b>0?Eg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=XV(c,n,f,b))!=-1&&(b--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>_?O--:r<_&&O++),typeof c.type!="function"&&(c.__u|=4)):g!=f&&(g==f-1?O--:g==f+1?O++:(g>f?O--:O++,c.__u|=4))):e.__k[u]=null;if(b)for(u=0;u<_;u++)(v=n[u])!=null&&(2&v.__u)==0&&(v.__e==a&&(a=Cv(v)),Kk(v,v));return a}function Xk(e,t,n){var a,r;if(typeof e.type=="function"){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=Xk(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Cv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function XV(e,t,n,a){var r,u,c=e.key,v=e.type,f=t[n];if(f===null&&e.key==null||f&&c==f.key&&v==f.type&&(2&f.__u)==0)return n;if(a>(f!=null&&(2&f.__u)==0?1:0))for(r=n-1,u=n+1;r>=0||u<t.length;){if(r>=0){if((f=t[r])&&(2&f.__u)==0&&c==f.key&&v==f.type)return r;r--}if(u<t.length){if((f=t[u])&&(2&f.__u)==0&&c==f.key&&v==f.type)return u;u++}}return-1}function Px(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||zV.test(t)?n:n+"px"}function fg(e,t,n,a,r){var u,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Px(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||Px(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")u=t!=(t=t.replace(Wk,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+u]=n,n?a?n.u=a.u:(n.u=PE,e.addEventListener(t,u?Pw:kw,u)):e.removeEventListener(t,u?Pw:kw,u);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Nx(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=PE++;else if(t.t<n.u)return;return n(Ci.event?Ci.event(t):t)}}}function qk(e,t,n,a,r,u,c,v,f,g){var _,b,O,x,M,A,E,D,j,U,F,I,V,Y,K,H,B,z=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),u=[v=t.__e=n.__e]),(_=Ci.__b)&&_(t);e:if(typeof z=="function")try{if(D=t.props,j="prototype"in z&&z.prototype.render,U=(_=z.contextType)&&a[_.__c],F=_?U?U.props.value:_.__:a,n.__c?E=(b=t.__c=n.__c).__=b.__E:(j?t.__c=b=new z(D,F):(t.__c=b=new Ev(D,F),b.constructor=z,b.render=KV),U&&U.sub(b),b.props=D,b.state||(b.state={}),b.context=F,b.__n=a,O=b.__d=!0,b.__h=[],b._sb=[]),j&&b.__s==null&&(b.__s=b.state),j&&z.getDerivedStateFromProps!=null&&(b.__s==b.state&&(b.__s=Nf({},b.__s)),Nf(b.__s,z.getDerivedStateFromProps(D,b.__s))),x=b.props,M=b.state,b.__v=t,O)j&&z.getDerivedStateFromProps==null&&b.componentWillMount!=null&&b.componentWillMount(),j&&b.componentDidMount!=null&&b.__h.push(b.componentDidMount);else{if(j&&z.getDerivedStateFromProps==null&&D!==x&&b.componentWillReceiveProps!=null&&b.componentWillReceiveProps(D,F),!b.__e&&b.shouldComponentUpdate!=null&&b.shouldComponentUpdate(D,b.__s,F)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(b.props=D,b.state=b.__s,b.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(X){X&&(X.__=t)}),I=0;I<b._sb.length;I++)b.__h.push(b._sb[I]);b._sb=[],b.__h.length&&c.push(b);break e}b.componentWillUpdate!=null&&b.componentWillUpdate(D,b.__s,F),j&&b.componentDidUpdate!=null&&b.__h.push(function(){b.componentDidUpdate(x,M,A)})}if(b.context=F,b.props=D,b.__P=e,b.__e=!1,V=Ci.__r,Y=0,j){for(b.state=b.__s,b.__d=!1,V&&V(t),_=b.render(b.props,b.state,b.context),K=0;K<b._sb.length;K++)b.__h.push(b._sb[K]);b._sb=[]}else do b.__d=!1,V&&V(t),_=b.render(b.props,b.state,b.context),b.state=b.__s;while(b.__d&&++Y<25);b.state=b.__s,b.getChildContext!=null&&(a=Nf(Nf({},a),b.getChildContext())),j&&!O&&b.getSnapshotBeforeUpdate!=null&&(A=b.getSnapshotBeforeUpdate(x,M)),H=_,_!=null&&_.type===RE&&_.key==null&&(H=Yk(_.props.children)),v=Hk(e,M_(H)?H:[H],t,n,a,r,u,c,v,f,g),b.base=t.__e,t.__u&=-161,b.__h.length&&c.push(b),E&&(b.__E=b.__=null)}catch(X){if(t.__v=null,f||u!=null)if(X.then){for(t.__u|=f?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;u[u.indexOf(v)]=null,t.__e=v}else for(B=u.length;B--;)NE(u[B]);else t.__e=n.__e,t.__k=n.__k;Ci.__e(X,t,n)}else u==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=YV(n.__e,t,n,a,r,u,c,f,g);return(_=Ci.diffed)&&_(t),128&t.__u?void 0:v}function qV(e,t,n){for(var a=0;a<n.length;a++)CE(n[a],n[++a],n[++a]);Ci.__c&&Ci.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(u){u.call(r)})}catch(u){Ci.__e(u,r.__v)}})}function Yk(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:M_(e)?e.map(Yk):Nf({},e)}function YV(e,t,n,a,r,u,c,v,f){var g,_,b,O,x,M,A,E=n.props,D=t.props,j=t.type;if(j=="svg"?r="http://www.w3.org/2000/svg":j=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),u!=null){for(g=0;g<u.length;g++)if((x=u[g])&&"setAttribute"in x==!!j&&(j?x.localName==j:x.nodeType==3)){e=x,u[g]=null;break}}if(e==null){if(j==null)return document.createTextNode(D);e=document.createElementNS(r,j,D.is&&D),v&&(Ci.__m&&Ci.__m(t,u),v=!1),u=null}if(j==null)E===D||v&&e.data==D||(e.data=D);else{if(u=u&&kE.call(e.childNodes),E=n.props||Nw,!v&&u!=null)for(E={},g=0;g<e.attributes.length;g++)E[(x=e.attributes[g]).name]=x.value;for(g in E)if(x=E[g],g!="children"){if(g=="dangerouslySetInnerHTML")b=x;else if(!(g in D)){if(g=="value"&&"defaultValue"in D||g=="checked"&&"defaultChecked"in D)continue;fg(e,g,null,x,r)}}for(g in D)x=D[g],g=="children"?O=x:g=="dangerouslySetInnerHTML"?_=x:g=="value"?M=x:g=="checked"?A=x:v&&typeof x!="function"||E[g]===x||fg(e,g,x,E[g],r);if(_)v||b&&(_.__html==b.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(b&&(e.innerHTML=""),Hk(t.type=="template"?e.content:e,M_(O)?O:[O],t,n,a,j=="foreignObject"?"http://www.w3.org/1999/xhtml":r,u,c,u?u[0]:n.__k&&Cv(n,0),v,f),u!=null)for(g=u.length;g--;)NE(u[g]);v||(g="value",j=="progress"&&M==null?e.removeAttribute("value"):M!=null&&(M!==e[g]||j=="progress"&&!M||j=="option"&&M!=E[g])&&fg(e,g,M,E[g],r),g="checked",A!=null&&A!=e[g]&&fg(e,g,A,E[g],r))}return e}function CE(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ci.__e(r,n)}}function Kk(e,t,n){var a,r;if(Ci.unmount&&Ci.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||CE(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(u){Ci.__e(u,t)}a.base=a.__P=null}if(a=e.__k)for(r=0;r<a.length;r++)a[r]&&Kk(a[r],t,n||typeof e.type!="function");n||NE(e.__e),e.__c=e.__=e.__e=void 0}function KV(e,t,n){return this.constructor(e,n)}kE=Gk.slice,Ci={__e:function(e,t,n,a){for(var r,u,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((u=r.constructor)&&u.getDerivedStateFromError!=null&&(r.setState(u.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,a||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},Uk=0,Ev.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Nf({},this.state),typeof e=="function"&&(e=e(Nf({},n),this.props)),e&&Nf(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),kx(this))},Ev.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),kx(this))},Ev.prototype.render=RE,Zp=[],Vk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Bk=function(e,t){return e.__v.__b-t.__v.__b},Ug.__r=0,Wk=/(PointerCapture)$|Capture$/i,PE=0,kw=Nx(!1),Pw=Nx(!0);var Dm=function(){return Dm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dm.apply(this,arguments)};function DE(e){var t=e.x,n=e.y,a=e.width,r=e.height,u=e.radius,c=e.className,v=t-a/2,f=n-r/2,g=Dm(Dm({width:10,height:10,cx:0,cy:0,rx:u||0,ry:u||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:f});return mn.h("rect",Dm({},g))}DE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var gv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(gv||(gv={}));var ZV=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Jp=function(){return Jp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Jp.apply(this,arguments)},JV=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},QV=mn.LogicFlowUtil.StepDrag,eB=function(e){ZV(t,e);function t(n){var a=e.call(this)||this;return a.updatePosition=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.x,g=v.y;a.nodeModel.x=f+u/2,a.nodeModel.y=g+c/2,a.nodeModel.moveText(u/2,c/2)},a.getResize=function(r){var u=r.index,c=r.deltaX,v=r.deltaY,f=r.width,g=r.height,_=r.PCTResizeInfo,b=r.pct,O=b===void 0?1:b,x=r.freezeWidth,M=x===void 0?!1:x,A=r.freezeHeight,E=A===void 0?!1:A,D={width:f,height:g,deltaX:c,deltaY:v};if(_){var j=4,U=0,F=0;switch(u){case 0:F=(c*-1-v)/j;break;case 1:F=(c-v)/j;break;case 2:F=(c+v)/j;break;case 3:F=(c*-1+v)/j;break}F!==0&&(U=Math.round(F/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+U,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+U,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var I=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),V=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(u){case 0:c=f-I,v=g-V;break;case 1:c=I-f,v=g-V;break;case 2:c=I-f,v=V-g;break;case 3:c=f-I,v=V-g;break}return D.width=I,D.height=V,D.deltaX=c/O,D.deltaY=v/O,D}switch(u){case 0:D.width=M?f:f-c*O,D.height=E?g:g-v*O;break;case 1:D.width=M?f:f+c*O,D.height=E?g:g-v*O;break;case 2:D.width=M?f:f+c*O,D.height=E?g:g+v*O;break;case 3:D.width=M?f:f-c*O,D.height=E?g:g+v*O;break}return D},a.updateEdgePointByAnchors=function(){var r=a.nodeModel,u=r.id,c=r.anchors,v=a.getNodeEdges(u);v.sourceEdges.forEach(function(f){var g=c.find(function(_){return _.id===f.sourceAnchorId});f.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(f){var g=c.find(function(_){return _.id===f.targetAnchorId});f.updateEndPoint({x:g.x,y:g.y})})},a.updateRect=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.id,g=v.x,_=v.y,b=v.width,O=v.height,x=v.radius,M=v.PCTResizeInfo,A=a.nodeModel,E=A.minWidth,D=A.minHeight,j=A.maxWidth,U=A.maxHeight,F=a.index,I=E===j,V=D===U,Y=a.getResize({index:F,deltaX:u,deltaY:c,width:b,height:O,PCTResizeInfo:M,pct:1,freezeWidth:I,freezeHeight:V});if(Y.width<E||Y.width>j||Y.height<D||Y.height>U){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:I?0:Y.deltaX,deltaY:V?0:Y.deltaY}),a.nodeModel.width=Y.width,a.nodeModel.height=Y.height,a.nodeModel.setProperties({nodeSize:{width:Y.width,height:Y.height}}),a.getNodeEdges(f);var K={x:g,y:_,width:b,height:O,radius:x},H={x:a.nodeModel.x,y:a.nodeModel.y,width:a.nodeModel.width,height:a.nodeModel.height,radius:x};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:K,afterNode:H})},a.updateEllipse=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel,f=v.id,g=v.rx,_=v.ry,b=v.x,O=v.y,x=v.PCTResizeInfo,M=a.index,A=a.nodeModel,E=A.minWidth,D=A.minHeight,j=A.maxWidth,U=A.maxHeight,F=E===j,I=D===U,V=g,Y=_,K=a.getResize({index:M,deltaX:u,deltaY:c,width:V,height:Y,PCTResizeInfo:x,pct:1/2,freezeWidth:F,freezeHeight:I});if(K.width<E/2||K.width>j/2||K.height<D/2||K.height>U/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:F?0:K.deltaX,deltaY:I?0:K.deltaY}),a.nodeModel.rx=K.width,a.nodeModel.ry=K.height,a.nodeModel.setProperties({nodeSize:{rx:K.width,ry:K.height}}),a.getNodeEdges(f);var H={x:b,y:O},B={rx:K.width,ry:K.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:Jp(Jp({},H),{rx:g,ry:_}),afterNode:B})},a.updateDiamond=function(r){var u=r.deltaX,c=r.deltaY,v=a.nodeModel;v.id;var f=v.rx,g=v.ry,_=v.x,b=v.y,O=v.PCTResizeInfo,x=a.index,M=a.nodeModel,A=M.minWidth,E=M.minHeight,D=M.maxWidth,j=M.maxHeight,U=A===D,F=E===j,I=f,V=g,Y=a.getResize({index:x,deltaX:u,deltaY:c,width:I,height:V,PCTResizeInfo:O,pct:1/2,freezeWidth:U,freezeHeight:F});if(Y.width<A/2||Y.width>D/2||Y.height<E/2||Y.height>j/2){a.dragHandler.cancelDrag();return}a.updatePosition({deltaX:U?0:Y.deltaX,deltaY:F?0:Y.deltaY}),a.nodeModel.rx=Y.width,a.nodeModel.ry=Y.height,a.nodeModel.setProperties({nodeSize:{rx:Y.width,ry:Y.height}});var K={x:_,y:b,rx:f,ry:g},H={rx:Y.width,ry:Y.height,x:a.nodeModel.x,y:a.nodeModel.y};a.updateEdgePointByAnchors(),a.eventEmit({beforeNode:K,afterNode:H})},a.eventEmit=function(r){var u=r.beforeNode,c=r.afterNode,v=a.nodeModel,f=v.id,g=v.modelType,_=v.type,b=Jp({id:f,modelType:g,type:_},u),O=Jp({id:f,modelType:g,type:_},c);a.graphModel.eventCenter.emit("node:resize",{oldNodeSize:b,newNodeSize:O})},a.onDragging=function(r){var u,c=r.deltaX,v=r.deltaY,f=a.graphModel.transformModel,g=a.nodeModel.modelType;u=JV(f.fixDeltaXY(c,v),2),c=u[0],v=u[1],g===gv.RECT_NODE||g===gv.HTML_NODE?a.updateRect({deltaX:c,deltaY:v}):g===gv.ELLIPSE_NODE?a.updateEllipse({deltaX:c,deltaY:v}):g===gv.DIAMOND_NODE&&a.updateDiamond({deltaX:c,deltaY:v})},a.onDragEnd=function(){var r=a.graphModel.gridSize,u=r===void 0?1:r,c=u*Math.round(a.nodeModel.x/u),v=u*Math.round(a.nodeModel.y/u);a.nodeModel.moveTo(c,v),a.updateEdgePointByAnchors()},a.index=n.index,a.nodeModel=n.model,a.graphModel=n.graphModel,a.state={},a.dragHandler=new QV({onDragging:a.onDragging,onDragEnd:a.onDragEnd,step:1}),a}return t.prototype.getNodeEdges=function(n){for(var a=this.graphModel,r=a.edges,u=[],c=[],v=0;v<r.length;v++){var f=r[v];f.sourceNodeId===n?u.push(f):r[v].targetNodeId===n&&c.push(f)}return{sourceEdges:u,targetEdges:c}},t.prototype.render=function(){var n=this.props,a=n.x,r=n.y,u=n.index,c=n.model,v=c.getControlPointStyle();return Cm("g",{className:"lf-resize-control-"+u},Cm(DE,Jp({className:"lf-node-control"},{x:a,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(Ev),tB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Vg=function(){return Vg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vg.apply(this,arguments)},k_=function(e){tB(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,a=n.model,r=n.graphModel,u=a.x,c=a.y,v=a.width,f=a.height,g={minX:u-v/2,minY:c-f/2,maxX:u+v/2,maxY:c+f/2},_=g.minX,b=g.minY,O=g.maxX,x=g.maxY,M=[{x:_,y:b},{x:O,y:b},{x:O,y:x},{x:_,y:x}];return M.map(function(A,E){return Cm(eB,Vg({index:E},A,{model:a,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,a=n.x,r=n.y,u=n.width,c=n.height,v=n.getResizeOutlineStyle();return Cm(DE,Vg({fill:"none"},v,{x:a,y:r,width:u,height:c}))},t.prototype.render=function(){return Cm("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(Ev),Zk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),nB=function(e){Zk(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.width=u.width,r.height=u.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,a){console.log(n,a)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},u={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t}(mn.RectNodeModel),rB=function(e){Zk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return mn.h(k_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return mn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(mn.RectNode),Jk={view:rB,model:nB},Qk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();(function(e){Qk(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.rx=u.rx,r.ry=u.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},u={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t})(mn.EllipseNodeModel);(function(e){Qk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return mn.h(k_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model,r=n.graphModel.editConfigModel.isSilentMode;return mn.h("g",null,this.getResizeShape(),a.isSelected&&!r?this.getControlGroup():"")},t})(mn.EllipseNode);var Rw=function(){return Rw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rw.apply(this,arguments)};function oB(e){var t=e.fillOpacity,n=t===void 0?1:t,a=e.strokeWidth,r=a===void 0?1:a,u=e.strokeOpacity,c=u===void 0?1:u,v=e.fill,f=v===void 0?"transparent":v,g=e.stroke,_=g===void 0?"#000":g,b=e.points,O=e.className,x=O===void 0?"lf-basic-shape":O,M={fill:f,fillOpacity:n,strokeWidth:r,stroke:_,strokeOpacity:c,points:"",className:x};return M.points=b.map(function(A){return A.join(",")}).join(" "),mn.h("polygon",Rw({},M))}var eP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Cw=function(){return Cw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cw.apply(this,arguments)};(function(e){eP(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.rx=u.rx,r.ry=u.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},u={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t})(mn.DiamondNodeModel);(function(e){eP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return mn.h(k_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,a=n.points,r=n.getNodeStyle();return mn.h("g",null,mn.h(oB,Cw({},r,{points:a})))},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return mn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t})(mn.DiamondNode);var tP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),iB=function(e){tP(t,e);function t(n,a){var r=e.call(this,n,a)||this,u=r.properties.nodeSize;return u&&(r.width=u.width,r.height=u.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),a=this.graphModel.editConfigModel.isSilentMode;return a||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var a={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},u={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:a,ResizeBasis:r,ScaleLimit:u}}else delete this.PCTResizeInfo},t}(mn.HtmlNodeModel),aB=function(e){tP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,a=n.model,r=n.graphModel;return mn.h(k_,{model:a,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,a=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return mn.h("g",null,this.getResizeShape(),a&&!r?this.getControlGroup():"")},t}(mn.HtmlNode),nP={view:aB,model:iB},rP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Bg=function(){return Bg=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Bg.apply(this,arguments)},lB=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},uB=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(lB(arguments[t]));return e},Rx=500,Cx=300,sB=-1e4;(function(e){rP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=Rx,n.unfoldedHight=Cx,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var a=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=Rx,this.height=Cx,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=sB,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){a.isFolded&&a.foldGroup(a.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var a=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(u){var c=a.graphModel.getElement(u),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var f=a.childrenLastFoldStatus[u];f!==void 0&&f!==c.isFolded&&c.foldGroup(f)}a.childrenLastFoldStatus[u]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var a=e.prototype.getAnchorStyle.call(this,n);return a.stroke="transparent",a.fill="transparent",a.hover.fill="transparent",a.hover.stroke="transparent",a},t.prototype.foldEdge=function(n,a){var r=this;a.forEach(function(u,c){var v=u.id,f=u.sourceNodeId,g=u.targetNodeId,_=u.startPoint,b=u.endPoint,O=u.type,x=u.text,M=u.getProperties(),A={id:v+"__"+c,sourceNodeId:f,targetNodeId:g,startPoint:_,endPoint:b,type:O,properties:M,text:x==null?void 0:x.value};u.virtual&&r.graphModel.deleteEdgeById(u.id);var E=r.graphModel.group.getNodeGroup(g);E||(E=r.graphModel.getNodeModelById(g));var D=r.graphModel.group.getNodeGroup(f);D||(D=r.graphModel.getNodeModelById(f)),n&&u.visible!==!1&&(r.children.has(f)||r.id===f?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(E.id!==r.id||D.id!==r.id)&&r.createVirtualEdge(A),u.visible=!1),!n&&u.visible===!1&&(E&&E.isGroup&&E.isFolded?(A.targetNodeId=E.id,A.endPoint=void 0,r.createVirtualEdge(A)):D&&D.isGroup&&D.isFolded?(A.sourceNodeId=D.id,A.startPoint=void 0,r.createVirtualEdge(A)):u.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var a=this.graphModel.addEdge(n);a.virtual=!0,a.text.editable=!1,a.isFoldedEdge=!0},t.prototype.isInRange=function(n){var a=n.x1,r=n.y1,u=n.x2,c=n.y2;return a>=this.x-this.width/2&&u<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var a=n.x1,r=n.y1,u=n.x2,c=n.y2;return{x:a>=this.x-this.width/2&&u<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,a=e.prototype.getData.call(this);a.children=[],this.children.forEach(function(u){var c=n.graphModel.getNodeModelById(u);c&&!c.virtual&&a.children.push(u)});var r=a.properties;return delete r.groupAddable,delete r.isFolded,a},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=uB(this.children),n.isGroup=!0;var a=n.properties;return delete a.groupAddable,a.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(Jk.model);(function(e){rP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,a=n.resizable,r=n.properties;return a&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,a=n.width,r=n.height,u=n.x,c=n.y,v=n.radius,f=n.properties;if(!f.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),b=a+g+8,O=r+g+8;return mn.h("rect",Bg(Bg({},_),{width:b,height:O,x:u-b/2,y:c-O/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,a=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var u=mn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" M"+(a+7)+","+(r+2)+" "+(a+7)+","+(r+10):"M "+(a+3)+","+(r+6)+" "+(a+11)+","+(r+6)+" "});return mn.h("g",{},[mn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),u])},t.prototype.getResizeShape=function(){return mn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(Jk.view);var Dx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),jm=function(){return jm=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jm.apply(this,arguments)};function cB(e){var t=function(a){Dx(r,a);function r(u,c){var v=this;u.id||(u.id="Flow_"+GV());var f=jm(jm(jm({},{}),u.properties),{isDefaultFlow:!1});return u.properties=f,v=a.call(this,u,c)||this,v}return r.extendKey="SequenceFlowModel",r}(mn.PolylineEdgeModel),n=function(a){Dx(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var u=this.props.model,c=u.properties.isDefaultFlow;return c?mn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):mn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(mn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}cB();var jx={width:40,height:40},Ix={width:40,height:40},Lx={width:100,height:80},Wg={width:100,height:80},$x={width:100,height:80},Fx={width:100,height:80},Ux={width:100,height:80},Vx={width:100,height:80},Bx={width:100,height:80},Wx={width:100,height:80},vl=function(){};vl.ObjTree=function(){return this};vl.ObjTree.VERSION="0.23";vl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;vl.ObjTree.prototype.attr_prefix="-";vl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,a=n.parseFromString(e,"application/xml");if(!a)return;t=a.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};vl.ObjTree.prototype.parseHTTP=function(e,t,n){var a={};for(var r in t)a[r]=t[r];if(a.method||(typeof a.postBody>"u"&&typeof a.postbody>"u"&&typeof a.parameters>"u"?a.method="get":a.method="post"),n){a.asynchronous=!0;var u=this,c=n,v=a.onComplete;a.onComplete=function(_){var b;_&&_.responseXML&&_.responseXML.documentElement&&(b=u.parseDOM(_.responseXML.documentElement)),c(b,_),v&&v(_)}}else a.asynchronous=!1;var f;if(typeof HTTP<"u"&&HTTP.Request){a.uri=e;var g=new HTTP.Request(a);g&&(f=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,a);g&&(f=g.transport)}if(n)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement)};vl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var a={};a[e.nodeName]=n,n=a}return n}};vl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,a={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var u=e.attributes[r].nodeName;if(typeof u=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(u=this.attr_prefix+u,typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var f=e.childNodes[r].nodeType;f===3||f===4||f===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var u=e.childNodes[r].nodeName;if(typeof u=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof a[u]>"u"&&(a[u]=0),a[u]++,this.addNode(n,u,a[u],c))}}}}else n===null&&(n={});return n}};vl.ObjTree.prototype.addNode=function(e,t,n,a){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=a):n===1?e[t]=a:n===2?e[t]=[e[t],a]:e[t][e[t].length]=a};vl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};vl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],a=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var u=t[r];r.charAt(0)!==this.attr_prefix?typeof u>"u"||u==null?n[n.length]="<"+r+" />":typeof u=="object"&&u.constructor===Array?n[n.length]=this.array_to_xml(r,u):typeof u=="object"?n[n.length]=this.hash_to_xml(r,u):n[n.length]=this.scalar_to_xml(r,u):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(u)+'"'}var c=a.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};vl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};vl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};vl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var fB=function(e){return new vl.ObjTree().parseXML(e)};function oP(e){return Object.prototype.toString.call(e)}function Gx(e){return"  ".repeat(e)}function Gg(e){return oP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var a=n;return n.charAt(0)==="-"&&(a=n.substring(1)),t[a]=Gg(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Gg(t)}):e}function dB(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Gg(e)).replace(/"/g,"'")}return t}var zx=`	
`;function Og(e,t,n){var a=Gx(n),r="",u=zx+a;if(t==="-json")return"";if(t==="#text")return u+e;if(t==="#cdata-section")return u+"<![CDATA["+e+"]]>";if(t==="#comment")return u+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+dB(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return Og(g,t,n+1)}).join("");else if(oP(e)==="[object Object]"){var c=Object.keys(e),v="",f=e["-json"]?zx+Gx(n+1)+e["-json"]:"";r+=(n===0?"":u)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=Og(e[g],g,n+1):f+=Og(e[g],g,n+1)}),r+=v+(f!==""?">"+f+u+"</"+t+">":" />")}else r+=u+"<"+t+">"+e.toString()+"</"+t+">";return r}function pB(e){var t="";for(var n in e)t+=Og(e[n],n,0);return t}var hB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),Dw=function(){return Dw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Dw.apply(this,arguments)},Hx=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},jE=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qv=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},Ov=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(qv(arguments[t]));return e},dl;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(dl||(dl={}));var iP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],vB=["properties","startPoint","endPoint","pointsList"],zg={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},aP=function(e,t){var n=Object.keys(t||{});return n.forEach(function(a){if(e[a]){var r=t[a],u=r.in,c=r.out;u&&(e[a].in=u),c&&(e[a].out=c)}else e[a]=t[a]}),e},Ru={"bpmn:startEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ru[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ru[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ru[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,a=e.properties;return((n=(t=Ru[a.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,a=t.condition;return a?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+a+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+a+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,a=t.timerValue,r=t.definitionId,u=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+a+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&a?">"+u()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,a,r,u,c=e,v=t["-id"],f="",g="";try{for(var _=jE(Object.keys(t)),b=_.next();!b.done;b=_.next()){var O=b.value;O.includes("bpmn:")&&(r=qv(O.split(":"),2),f=r[1],g=(u=t[O])===null||u===void 0?void 0:u["#text"])}}catch(x){n={error:x}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":f,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,a="",r="";return t["#cdata-section"]?(r="cdata",a=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",a=t["#text"]),{"-condition":a,"-expressionType":r}}}};function mB(e){var t=e??{},n=t.retainedAttrsFields,a=t.excludeFields,r=t.transformer,u=new Set(Ov(vB,n||[])),c={in:new Set(Ov(zg.in,(a==null?void 0:a.in)||[])),out:new Set(Ov(zg.out,(a==null?void 0:a.out)||[]))};return Ru=aP(Ru,r),function(v){var f=v.nodes,g=v.edges;function _(b,O){var x,M,A;if((b==null?void 0:b.flag)!==1){var E;if((E=Ru[b.type])&&E.out){var D=E.out(b),j=Object.keys(D);j.length>0&&j.forEach(function(B){b[B]=D[B]})}b!=null&&b.children&&(b.children=b.children.map(function(B){var z=f.find(function(X){return X.id===B})||g.find(function(X){return X.id===B});return z||{}}));var U={};if(typeof b=="string")return b;if(Array.isArray(b))return b.map(function(B){return _(B,"")}).filter(function(B){return B!=null});try{for(var F=jE(Object.entries(b)),I=F.next();!I.done;I=F.next()){var V=qv(I.value,2),Y=V[0],K=V[1];if(((A=K)===null||A===void 0?void 0:A.flag)===1)return;var H=[O,Y].filter(function(B){return B}).join(".");c.out.has(H)||(typeof K!="object"?Y.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(Y)?U[Y]=K:U["-"+Y]=K:u.has(H)?U["-"+Y]=_(K,H):U[Y]=_(K,H))}}catch(B){x={error:B}}finally{try{I&&!I.done&&(M=F.return)&&M.call(F)}finally{if(x)throw x.error}}return U}}return _(v,"")}}function Hg(e){var t,n,a={};try{for(var r=jE(Object.entries(e)),u=r.next();!u.done;u=r.next()){var c=qv(u.value,2),v=c[0],f=c[1];v.indexOf("-")===0?a[v.substring(1)]=Gg(f):typeof f=="string"?a[v]=f:Object.prototype.toString.call(f)==="[object Object]"?a[v]=Hg(f):Array.isArray(f)?a[v]=f.map(function(g){return Hg(g)}):a[v]=f}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a}function yB(e,t,n){var a,r=new Map,u=mB(n)(t);u.nodes.forEach(function(v){var f=v["-id"],g=v["-type"],_=v.text,b=v.children,O=Hx(v,["-id","-type","text","children"]),x={"-id":f};_!=null&&_["-value"]&&(x["-name"]=_["-value"]),O["-json"]&&(x["-json"]=O["-json"]),O["-properties"]&&Object.assign(x,O["-properties"]),b&&(x.children=b),e[g]||(e[g]=[]),e[g].push(x),r.set(f,x)});var c=u.edges.map(function(v){var f=v["-id"];v["-type"];var g=v["-sourceNodeId"],_=v["-targetNodeId"],b=v.text,O=Hx(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),x=r.get(_);x["bpmn:incoming"]||(x["bpmn:incoming"]=[]),x["bpmn:incoming"].push(f);var M={"-id":f,"-sourceRef":g,"-targetRef":_};return b!=null&&b["-value"]&&(M["-name"]=b["-value"]),O["-json"]&&(M["-json"]=O["-json"]),O["-properties"]&&Object.assign(M,O["-properties"]),M});return t.edges.forEach(function(v){var f=v.sourceNodeId,g=v.id,_=r.get(f);_["bpmn:outgoing"]||(_["bpmn:outgoing"]=[]),_["bpmn:outgoing"].push(g)}),(a=e["bpmn:subProcess"])===null||a===void 0||a.forEach(function(v){var f={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(A){var E,D=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(U){D[U]&&D[U].forEach(function(F){f[U].add(F)})});var j=(E=e[A["-type"]])===null||E===void 0?void 0:E.findIndex(function(U){return U["-id"]===A["-id"]});j>=0&&e[A["-type"]].splice(j,1),r.delete(A["-id"]),v[A["-type"]]||(v[A["-type"]]=[]),v[A["-type"]].push(D)});var _=f["bpmn:incoming"],b=f["bpmn:outgoing"];b.forEach(function(A){_.has(A)&&g.push(A)});for(var O=function(A){var E=c.findIndex(function(D){return D["-id"]===g[A]});E>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[E]),c.splice(E,1)):A++,x=A},x,M=0;M<g.length;)O(M),M=x;delete v.children}),e[dl.FLOW]=c,e}function gB(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var a,r=n.id,u=n.pointsList.map(function(v){var f=v.x,g=v.y;return{"-x":f,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":u};return!((a=n.text)===null||a===void 0)&&a.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var a,r=n.id,u=100,c=80,v=n.x,f=n.y,g=Dl.shapeConfigMap.get(n.type);g&&(u=g.width,c=g.height),v-=u/2,f-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":f,"-width":u,"-height":c}};return!((a=n.text)===null||a===void 0)&&a.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}var _B=["bpmn:incoming","bpmn:outgoing"];function bB(e,t){var n=[],a=[],r=new Map,u=t??{},c=u.transformer,v=u.excludeFields,f={in:new Set(Ov(zg.in,(v==null?void 0:v.in)||[])),out:new Set(Ov(zg.out,(v==null?void 0:v.out)||[]))};Ru=aP(Ru,c);var g=e["bpmn:definitions"];if(g){var _=g["bpmn:process"];(function(O,x){x.forEach(function(M){try{Object.keys(O).forEach(function(A){try{M(A)}catch(E){console.error(E)}})}catch(A){console.error(A)}})})(_,[function(O){function x(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(E){var D;E.indexOf("bpmn:")===0&&!_B.includes(E)&&(_[E]||(_[E]=[]),!Array.isArray(_[E])&&(_[E]=[_[E]]),Array.isArray(A[E])?(D=_[E]).push.apply(D,Ov(A[E])):_[E].push(A[E]),Array.isArray(A[E])?A[E].forEach(function(j){!E.includes("Flow")&&A["-children"].push(j["-id"])}):!E.includes("Flow")&&A["-children"].push(A[E]["-id"]),delete A[E])})}if(O==="bpmn:subProcess"){var M=_[O];Array.isArray(M)?M.forEach(function(A){O==="bpmn:subProcess"&&x(A)}):x(M)}},function(O){var x=function(A){Object.keys(A).forEach(function(E){var D,j;if(E.includes("bpmn:")){var U={};Ru[E]&&Ru[E].in?(U=(j=(D=Ru[E]).in)===null||j===void 0?void 0:j.call(D,E,fe.cloneDeep(A[E])),delete A[E]):M(A[E]);var F=void 0;(F=Reflect.ownKeys(U)).length>0&&F.forEach(function(I){Reflect.set(A,I,U[I])})}})};function M(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(E){M(E)}):typeof A=="object"&&x(A)}M(_[O])},function(O){if(O.indexOf("bpmn:")===0){var x=_[O];if(O==="bpmn:sequenceFlow"){var M=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=EB(x,M)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var E=_[O],D=function(j){var U=j["-attachedToRef"],F=r.get(U);F["-boundaryEvents"]||(F["-boundaryEvents"]=[]),F["-boundaryEvents"].push(j["-id"])};Array.isArray(E)?E.forEach(function(j){D(j)}):D(E)}n=n.concat(wB(x,A,O))}}}])}var b=function(O,x,M){Object.keys(O).forEach(function(A){var E=M?M+"."+A:A;x.has(E)?delete O[A]:typeof O[A]=="object"&&b(O[A],x,E)})};return n.forEach(function(O){var x,M;if(!((x=t==null?void 0:t.mapping)===null||x===void 0)&&x.in){var A=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,E=O.type;A[E]&&(O.type=A[E])}b(O,f.in,"")}),a.forEach(function(O){var x,M;if(!((x=t==null?void 0:t.mapping)===null||x===void 0)&&x.in){var A=(M=t==null?void 0:t.mapping)===null||M===void 0?void 0:M.in,E=O.type;A[E]&&(O.type=A[E])}b(O,f.in,"")}),{nodes:n,edges:a}}function wB(e,t,n){var a=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var f=Xx(v,n,c);a.push(f)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var u=Xx(r,n,e);a.push(u)}return a}function Xx(e,t,n){var a=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),u=n["-children"],c=n["-name"],v=Dl.shapeConfigMap.get(t);v&&(a+=v.width/2,r+=v.height/2);var f={};Object.entries(n).forEach(function(O){var x=qv(O,2),M=x[0],A=x[1];iP.includes(M)||(f[M]=A)}),f=Hg(f);var g;if(c&&(g={x:a,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(_["-x"])+Number(_["-width"])/2,g.y=Number(_["-y"])+Number(_["-height"])/2}var b={id:e["-bpmnElement"],type:t,x:a,y:r,properties:f};return u&&(b.children=u),g&&(b.text=g),b}function EB(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var u;Array.isArray(t)?u=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):u=t,n.push(qx(u,r))});else{var a=void 0;Array.isArray(t)?a=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):a=t,n.push(qx(a,e))}return n}function qx(e,t){var n,a=t["-name"];if(a){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],u=0;a.split(`
`).forEach(function(g){u<g.length&&(u=g.length)}),n={value:a,x:Number(r["-x"])+u*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var _=qv(g,2),b=_[0],O=_[1];iP.includes(b)||(c[b]=O)}),c=Hg(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),f={id:t["-id"],type:dl.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(f.text=n),f}var Dl=function(){function e(t){var n=this,a=t.lf;this.adapterOut=function(r,u){var c,v,f=Dw({},n.processAttributes);yB(f,r,u);var g={"-id":"BPMNPlane_1","-bpmnElement":f["-id"]};gB(g,r);var _=n.definitionAttributes;_["bpmn:process"]=f,_["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var b={"bpmn:definitions":_};if(!((c=u==null?void 0:u.mapping)===null||c===void 0)&&c.out){var O=(v=u==null?void 0:u.mapping)===null||v===void 0?void 0:v.out,x=function(M){Array.isArray(M)&&M.forEach(function(A){return x(A)}),typeof M=="object"&&Object.keys(M).forEach(function(A){var E;(E=O[A])?(M[E]=fe.cloneDeep(M[A]),delete M[A],x(M[E])):x(M[A])})};x(b)}return b},this.adapterIn=function(r,u){if(r)return bB(r,u)},a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Dl.shapeConfigMap.set(dl.START,{width:jx.width,height:jx.height});Dl.shapeConfigMap.set(dl.END,{width:Ix.width,height:Ix.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_CATCH,{width:Wg.width,height:Wg.height});Dl.shapeConfigMap.set(dl.INTERMEDIATE_THROW,{width:Wg.width,height:Wg.height});Dl.shapeConfigMap.set(dl.BOUNDARY,{width:Lx.width,height:Lx.height});Dl.shapeConfigMap.set(dl.PARALLEL_GATEWAY,{width:$x.width,height:$x.height});Dl.shapeConfigMap.set(dl.INCLUSIVE_GATEWAY,{width:Fx.width,height:Fx.height});Dl.shapeConfigMap.set(dl.EXCLUSIVE_GATEWAY,{width:Ux.width,height:Ux.height});Dl.shapeConfigMap.set(dl.SYSTEM,{width:Vx.width,height:Vx.height});Dl.shapeConfigMap.set(dl.USER,{width:Bx.width,height:Bx.height});Dl.shapeConfigMap.set(dl.SUBPROCESS,{width:Wx.width,height:Wx.height});(function(e){hB(t,e);function t(n){var a=e.call(this,n)||this;a.adapterXmlIn=function(c){var v=fB(c);return a.adapterIn(v,a.props)},a.adapterXmlOut=function(c){var v=a.adapterOut(c,a.props);return pB(v)};var r=n.lf,u=n.props;return r.adapterIn=a.adapterXmlIn,r.adapterOut=a.adapterXmlOut,a.props=u,a}return t.pluginName="BPMNAdapter",t})(Dl);var Yx;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Yx||(Yx={}));var lP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var u in r)r.hasOwnProperty(u)&&(a[u]=r[u])},e(t,n)};return function(t,n){e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),_v=function(){return _v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_v.apply(this,arguments)},Im=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,u=[],c;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(c)throw c.error}}return u},OB={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function SB(e){for(var t=e,n=1;n<t.length-1;){var a=Im(t[n-1],2),r=a[0],u=a[1],c=Im(t[n],2),v=c[0],f=c[1],g=Im(t[n+1],2),_=g[0],b=g[1];r===v&&v===_||u===f&&f===b?t.splice(n,1):n++}return t}function xB(e,t,n,a){var r=[e[0],e[1]],u=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=a,u[0]+=a):t==="lb"&&(r[0]+=a,u[1]+=a),[r,u];case"tr":return t==="tl"?(r[1]+=a,u[0]-=a):t==="rb"&&(r[0]-=a,u[1]+=a),[r,u];case"bl":return t==="br"?(r[1]-=a,u[0]+=a):t==="lt"&&(r[0]+=a,u[1]-=a),[r,u];case"br":return t==="bl"?(r[1]-=a,u[0]-=a):t==="rt"&&(r[0]-=a,u[1]-=a),[r,u];default:return[]}}function AB(e,t,n,a){var r,u="",c="";e[0]===t[0]?u=e[1]>t[1]?"t":"b":e[1]===t[1]&&(u=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,a)||1/5*a,f=""+u+c,g=OB[f]||"-",_="L "+e[0]+" "+e[1];if(g==="-")_+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var b=Im(xB(t,f,g,v),2),O=b[0],x=b[1];O&&x&&(_+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+x[0]+" "+x[1],r=Im(x,2),t[0]=r[0],t[1]=r[1])}return _}function TB(e,t){var n=0,a="";if(e.length===2)a+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(a+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],u=e[n],c=e[n+++1];a+=AB(r,u,c,t)}a+="L "+e[n][0]+" "+e[n][1]}return a}(function(e){lP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,a=n.points,r=n.isAnimation,u=n.arrowConfig,c=n.radius,v=c===void 0?5:c,f=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),_=SB(a.split(" ").map(function(x){return x.split(",").map(function(M){return+M})})),b=TB(_,v),O=_v(_v(_v({style:r?g:{}},f),u),{fill:"none"});return mn.h("path",_v({d:b},O))},t})(mn.PolylineEdge);(function(e){lP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(mn.PolylineEdgeModel);let P_=!1;const Xg=fh({});function uP(e,t,n,a,r,u){u||(u=(c,v)=>({nodeModel:c,graph:v})),P_&&(Xg[e]=tI(Jn({render:()=>Nv(nI,{to:n},[Nv(t,u(a,r))]),provide:()=>({getNode:()=>a,getGraph:()=>r})})))}function sP(e){P_&&delete Xg[e]}function qg(){return P_}function MB(){return P_=!0,Jn({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Xg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Xg[n])}),Nv(br,{},t.map(n=>Nv(n)))}}})}const kB=(e,t)=>{let n=0,a=t;for(;;){if(n>0&&(a=t+n,console.log(a)),!e.some(r=>r.properties.nodeName===a.trim()))return a;n++}};class Xo extends nP.view{constructor(n,a){super(n);ka(this,"isMounted");ka(this,"r");ka(this,"component");ka(this,"app");ka(this,"root");ka(this,"VueNode");ka(this,"up_node_field_dict");this.component=a,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender?delete n.model.properties.noRender:n.model.properties.nodeName=kB(n.graphModel.nodes.filter(r=>r.id!==n.model.id),n.model.properties.nodeName),n.model.properties.config=EI[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var a,r,u,c,v,f;const n=[];return this.props.model.type==="start-node"&&(n.push({value:"global",label:Ot("views.applicationWorkflow.variable.global"),type:"global",children:((r=(a=this.props.model.properties)==null?void 0:a.config)==null?void 0:r.globalFields)||[]}),n.push({value:"chat",label:Ot("views.applicationWorkflow.variable.chat"),type:"chat",children:((c=(u=this.props.model.properties)==null?void 0:u.config)==null?void 0:c.chatFields)||[]})),n.push({value:this.props.model.id,label:this.props.model.properties.nodeName,type:this.props.model.type,children:((f=(v=this.props.model.properties)==null?void 0:v.config)==null?void 0:f.fields)||[]}),n}get_up_node_field_dict(n,a){if(!this.up_node_field_dict||!a){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(u=>u.id!="start-node").map(u=>u.get_up_node_field_dict(!0,a)).reduce((u,c)=>({...u,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,a){const r=Object.values(this.get_up_node_field_dict(n,a)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:a,y:r,type:u}=n;let c=!1;return u=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),mn.h("foreignObject",{...n,x:a-10,y:r-12,width:30,height:30},[mn.h("div",{style:{zindex:0},onClick:()=>{u=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const a=document.createElement("div");n.appendChild(a),this.renderVueComponent(a)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var u;this.unmountVueComponent(),this.root=n;const{model:a,graphModel:r}=this.props;if(n)if(qg())uP(this.targetId(),this.component,n,a,r);else{this.r=Nv(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=rM({render(){return this.r},provide(){return{getNode:()=>a,getGraph:()=>r}}}),this.app.use(rI,{locale:oI}),this.app.use(iI),this.app.use(aI),this.app.use(nM);for(const[c,v]of Object.entries(lI))this.app.component(c,v);(u=this.app)==null||u.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){qg()&&sP(this.targetId()),this.unmountVueComponent()}}class qo extends nP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:a}=t;n&&(this.x=n),a&&(this.y=a),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,a=t+100;this.height=a,this.properties.height=a,this.move(0,(a-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=nM.global;this.width=this.get_width();const n=(r,u)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const f=c[v];if(f.id===u)return!0;if(n(f.id,u))return!0}return!1},a={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,u,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,u,c,v)=>!this.graphModel.getNodeIncomingNode(u.id).find(_=>_.id==r.id)&&!n(r.id,u.id)}),this.sourceRules.push(a),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,u,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r}=this,u=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==ei.Base&&(this.type!==ei.Start&&c.push({x:n-r/2+10,y:u?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:u?a:a-15,id:`${t}_right`,type:"right"})),c}}let PB=class extends Xo{constructor(t){super(t,xV)}};const NB={type:"ai-chat-node",model:qo,view:PB},RB=Object.freeze(Object.defineProperty({__proto__:null,default:NB},Symbol.toStringTag,{value:"Module"})),CB={class:"flex align-center"},io=Jn({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const a=e,r=n,u=Yn({set:b=>{r("update:modelValue",b)},get:()=>a.modelValue}),c=Yn(()=>{if(!u.value||u.value.length<1)return null;const b=u.value[0],O=v.value.find(x=>x.value===b);return O?O.type:null}),v=Le([]),f=b=>b.ctrlKey===!0?(b.preventDefault(),!0):(b.stopPropagation(),!0);function g(b){b&&(v.value=a.global?a.nodeModel.get_up_node_field_list(!1,!0).filter(O=>["global","chat"].includes(O.value)&&O.children&&O.children.length>0):a.nodeModel.get_up_node_field_list(!1,!0).filter(O=>O.children&&O.children.length>0))}return t({validate:()=>{const b=a.nodeModel.get_up_node_field_list(!1,!0);if(!u.value||u.value.length===0)return Promise.reject(Ot("views.applicationWorkflow.variable.ReferencingRequired"));if(u.value.length<2)return Promise.reject(Ot("views.applicationWorkflow.variable.ReferencingError"));const O=u.value[0],x=u.value[1],M=b.find(A=>A.value===O);return M?M.children.some(A=>A.value===x)?Promise.resolve(""):(u.value=[],Promise.reject(Ot("views.applicationWorkflow.variable.NoReferencing"))):(u.value=[],Promise.reject(Ot("views.applicationWorkflow.variable.NoReferencing")))}}),Hr(()=>{v.value=a.global?a.nodeModel.get_up_node_field_list(!1,!0).filter(b=>["global","chat"].includes(b.value)&&b.children&&b.children.length>0):a.nodeModel.get_up_node_field_list(!1,!0)}),(b,O)=>{const x=Z("el-cascader");return be(),et(x,uI({onWheel:f,teleported:!1,options:v.value,onVisibleChange:g},b.$attrs,{modelValue:u.value,"onUpdate:modelValue":O[0]||(O[0]=M=>u.value=M),separator:" > "}),{default:R(({node:M,data:A})=>[J("span",{class:"flex align-center",onWheel:f},[(be(),et(Wm(Qn(Gm)(`${A.type}-icon`)),{class:"mr-8",size:18})),ot(_e(A.label),1)],32)]),prefix:R(()=>[J("span",CB,[(be(),et(Wm(Qn(Gm)(`${c.value}-icon`)),{size:18}))])]),_:1},16,["options","modelValue"])}}}),DB={class:"title-decoration-1 mb-8"},jB={class:"flex align-center"},IB={class:"mr-4"},LB=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),n=Yn(()=>t.path.includes("resource-management")?"systemManage":"workspace"),a={questionReferenceAddress:["start-node","question"],api_input_field_list:[],user_input_field_list:[],documentList:["start-node","document"],imageList:["start-node","image"],audioList:["start-node","audio"]},r=Le(),u=Yn({get:()=>(f.nodeModel.properties.nodeData||ke.set(f.nodeModel.properties,"nodeData",a),f.nodeModel.properties.nodeData),set:_=>{ke.set(f.nodeModel.properties,"nodeData",_)}});function c(_,b){const O=`${_}List`;b?(console.log("listKey",O),f.nodeModel.properties.nodeData[O]||ke.set(f.nodeModel.properties.nodeData,O,[])):delete f.nodeModel.properties.nodeData[O]}const v=()=>{if(!f.nodeModel.properties.nodeData.applicationId){ke.set(f.nodeModel.properties,"status",500);return}ho({type:"application",systemType:n.value}).getApplicationDetail(f.nodeModel.properties.nodeData.applicationId).then(_=>{const b=ke.cloneDeep(f.nodeModel.properties.nodeData.api_input_field_list),O=ke.cloneDeep(f.nodeModel.properties.nodeData.user_input_field_list);if(tE(_.data.type)){const x=_.data.workFlow.nodes[0].properties.nodeData,M=ke.cloneDeep(_.data.workFlow.nodes[0].properties.api_input_field_list),A=ke.cloneDeep(_.data.workFlow.nodes[0].properties.user_input_field_list),E=(M||[]).map(F=>{const I=b==null?void 0:b.find(V=>V.variable==F.variable);return I?{...F,value:I.value,label:typeof F.label=="object"&&F.label!=null?F.label.label:F.label}:F});ke.set(f.nodeModel.properties.nodeData,"api_input_field_list",E);const D=(A||[]).map(F=>{const I=O==null?void 0:O.find(V=>V.field==F.field);return I?{...F,value:I.value,label:typeof F.label=="object"&&F.label!=null?F.label.label:F.label}:F});ke.set(f.nodeModel.properties.nodeData,"user_input_field_list",D),console.log("nodeData",x);const j=x.fileUploadEnable,U=x.fileUploadSetting;j?(c("document",U.document),c("image",U.image),c("audio",U.audio)):["documentList","imageList","audioList"].forEach(F=>{delete f.nodeModel.properties.nodeData[F]}),ke.set(f.nodeModel.properties,"status",_.data.id?200:500)}}).catch(_=>{console.log(_),ke.set(f.nodeModel.properties,"status",500)})},f=e,g=()=>{var _;return(_=r.value)==null?void 0:_.validate().catch(b=>Promise.reject({node:f.nodeModel,errMessage:b}))};return Hr(()=>{v(),ke.set(f.nodeModel,"validate",g)}),(_,b)=>{const O=Z("el-form-item"),x=Z("el-tooltip"),M=Z("el-switch"),A=Z("el-form"),E=Z("el-card");return be(),et(Ho,{nodeModel:_.nodeModel},{default:R(()=>[J("h5",DB,_e(_.$t("views.applicationWorkflow.nodeSetting")),1),k(E,{shadow:"never",class:"card-never"},{default:R(()=>[k(A,{onSubmit:b[6]||(b[6]=nn(()=>{},["prevent"])),model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:r},{default:R(()=>[k(O,{label:_.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"questionReferenceAddress",rules:{message:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(io,{ref_key:"applicationNodeFormRef",ref:r,nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.questionReferenceAddress,"onUpdate:modelValue":b[0]||(b[0]=D=>u.value.questionReferenceAddress=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),u.value.hasOwnProperty("documentList")||"documentList"in u.value?(be(),et(O,{key:0,label:_.$t("views.problem.relateParagraph.selectDocument"),prop:"documentList",rules:{message:_.$t("views.chatLog.documentPlaceholder"),trigger:"blur",required:!1}},{default:R(()=>[k(io,{ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.chatLog.documentPlaceholder"),modelValue:u.value.documentList,"onUpdate:modelValue":b[1]||(b[1]=D=>u.value.documentList=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):En("",!0),u.value.hasOwnProperty("imageList")||"imageList"in u.value?(be(),et(O,{key:1,label:_.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"imageList",rules:{message:_.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:R(()=>[k(io,{ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:u.value.imageList,"onUpdate:modelValue":b[2]||(b[2]=D=>u.value.imageList=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):En("",!0),u.value.hasOwnProperty("audioList")||"audioList"in u.value?(be(),et(O,{key:2,label:_.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:_.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:R(()=>[k(io,{ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:u.value.audioList,"onUpdate:modelValue":b[3]||(b[3]=D=>u.value.audioList=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):En("",!0),(be(!0),tn(br,null,Jr(u.value.api_input_field_list,(D,j)=>(be(),tn("div",{key:"api-input-"+j},[k(O,{label:D.variable,prop:"api_input_field_list."+j+".value",rules:[{required:D.isRequired,message:`${_.$t("common.inputPlaceholder")}${D.variable}`,trigger:"blur"}]},{default:R(()=>[k(io,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.api_input_field_list[j].value,"onUpdate:modelValue":U=>u.value.api_input_field_list[j].value=U},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(be(!0),tn(br,null,Jr(u.value.user_input_field_list,(D,j)=>(be(),tn("div",{key:"user-input-"+j},[k(O,{label:D.label,prop:"user_input_field_list."+j+".value",rules:[{required:D.required,message:`${_.$t("common.inputPlaceholder")}${D.label}`,trigger:"blur"}]},{default:R(()=>[k(io,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:u.value.user_input_field_list[j].value,"onUpdate:modelValue":U=>u.value.user_input_field_list[j].value=U},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),k(O,{label:_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[5]||(b[5]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",jB,[J("div",IB,[J("span",null,_e(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(x,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(M,{size:"small",modelValue:u.value.isResult,"onUpdate:modelValue":b[4]||(b[4]=D=>u.value.isResult=D)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class $B extends Xo{constructor(t){super(t,LB)}}const FB={type:"application-node",model:qo,view:$B},UB=Object.freeze(Object.defineProperty({__proto__:null,default:FB},Symbol.toStringTag,{value:"Module"}));/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function vc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kx(Object(n),!0).forEach(function(a){VB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kx(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Sg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sg=function(t){return typeof t}:Sg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function VB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jf(){return jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jf.apply(this,arguments)}function BB(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,u;for(u=0;u<a.length;u++)r=a[u],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function WB(e,t){if(e==null)return{};var n=BB(e,t),a,r;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)a=u[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var GB="1.15.6";function Cf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var $f=Cf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ly=Cf(/Edge/i),Zx=Cf(/firefox/i),Lm=Cf(/safari/i)&&!Cf(/chrome/i)&&!Cf(/android/i),IE=Cf(/iP(ad|od|hone)/i),cP=Cf(/chrome/i)&&Cf(/android/i),fP={capture:!1,passive:!1};function ro(e,t,n){e.addEventListener(t,n,!$f&&fP)}function Zr(e,t,n){e.removeEventListener(t,n,!$f&&fP)}function Yg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function dP(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ws(e,t,n,a){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Yg(e,t):Yg(e,t))||a&&e===n)return e;if(e===n)break}while(e=dP(e))}return null}var Jx=/\s+/g;function nu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Jx," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Jx," ")}}function Er(e,t,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in a)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),a[t]=n+(typeof n=="string"?"":"px")}}function Sv(e,t){var n="";if(typeof e=="string")n=e;else do{var a=Er(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function pP(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,u=a.length;if(n)for(;r<u;r++)n(a[r],r);return a}return[]}function dc(){var e=document.scrollingElement;return e||document.documentElement}function Ki(e,t,n,a,r){if(!(!e.getBoundingClientRect&&e!==window)){var u,c,v,f,g,_,b;if(e!==window&&e.parentNode&&e!==dc()?(u=e.getBoundingClientRect(),c=u.top,v=u.left,f=u.bottom,g=u.right,_=u.height,b=u.width):(c=0,v=0,f=window.innerHeight,g=window.innerWidth,_=window.innerHeight,b=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!$f))do if(r&&r.getBoundingClientRect&&(Er(r,"transform")!=="none"||n&&Er(r,"position")!=="static")){var O=r.getBoundingClientRect();c-=O.top+parseInt(Er(r,"border-top-width")),v-=O.left+parseInt(Er(r,"border-left-width")),f=c+u.height,g=v+u.width;break}while(r=r.parentNode);if(a&&e!==window){var x=Sv(r||e),M=x&&x.a,A=x&&x.d;x&&(c/=A,v/=M,b/=M,_/=A,f=c+_,g=v+b)}return{top:c,left:v,bottom:f,right:g,width:b,height:_}}}function Qx(e,t,n){for(var a=Gd(e,!0),r=Ki(e)[t];a;){var u=Ki(a)[n],c=void 0;if(c=r>=u,!c)return a;if(a===dc())break;a=Gd(a,!1)}return!1}function Dv(e,t,n,a){for(var r=0,u=0,c=e.children;u<c.length;){if(c[u].style.display!=="none"&&c[u]!==yr.ghost&&(a||c[u]!==yr.dragged)&&ws(c[u],n.draggable,e,!1)){if(r===t)return c[u];r++}u++}return null}function LE(e,t){for(var n=e.lastElementChild;n&&(n===yr.ghost||Er(n,"display")==="none"||t&&!Yg(n,t));)n=n.previousElementSibling;return n||null}function Nu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==yr.clone&&(!t||Yg(e,t))&&n++;return n}function eA(e){var t=0,n=0,a=dc();if(e)do{var r=Sv(e),u=r.a,c=r.d;t+=e.scrollLeft*u,n+=e.scrollTop*c}while(e!==a&&(e=e.parentNode));return[t,n]}function zB(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n)}return-1}function Gd(e,t){if(!e||!e.getBoundingClientRect)return dc();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Er(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return dc();if(a||t)return n;a=!0}}while(n=n.parentNode);return dc()}function HB(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function T1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var $m;function hP(e,t){return function(){if(!$m){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),$m=setTimeout(function(){$m=void 0},t)}}}function XB(){clearTimeout($m),$m=void 0}function vP(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function mP(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function yP(e,t,n){var a={};return Array.from(e.children).forEach(function(r){var u,c,v,f;if(!(!ws(r,t.draggable,e,!1)||r.animated||r===n)){var g=Ki(r);a.left=Math.min((u=a.left)!==null&&u!==void 0?u:1/0,g.left),a.top=Math.min((c=a.top)!==null&&c!==void 0?c:1/0,g.top),a.right=Math.max((v=a.right)!==null&&v!==void 0?v:-1/0,g.right),a.bottom=Math.max((f=a.bottom)!==null&&f!==void 0?f:-1/0,g.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Rl="Sortable"+new Date().getTime();function qB(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(r){if(!(Er(r,"display")==="none"||r===yr.ghost)){e.push({target:r,rect:Ki(r)});var u=vc({},e[e.length-1].rect);if(r.thisAnimationDuration){var c=Sv(r,!0);c&&(u.top-=c.f,u.left-=c.e)}r.fromRect=u}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(zB(e,{target:a}),1)},animateAll:function(a){var r=this;if(!this.options.animation){clearTimeout(t),typeof a=="function"&&a();return}var u=!1,c=0;e.forEach(function(v){var f=0,g=v.target,_=g.fromRect,b=Ki(g),O=g.prevFromRect,x=g.prevToRect,M=v.rect,A=Sv(g,!0);A&&(b.top-=A.f,b.left-=A.e),g.toRect=b,g.thisAnimationDuration&&T1(O,b)&&!T1(_,b)&&(M.top-b.top)/(M.left-b.left)===(_.top-b.top)/(_.left-b.left)&&(f=KB(M,O,x,r.options)),T1(b,_)||(g.prevFromRect=_,g.prevToRect=b,f||(f=r.options.animation),r.animate(g,M,b,f)),f&&(u=!0,c=Math.max(c,f),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},f),g.thisAnimationDuration=f)}),clearTimeout(t),u?t=setTimeout(function(){typeof a=="function"&&a()},c):typeof a=="function"&&a(),e=[]},animate:function(a,r,u,c){if(c){Er(a,"transition",""),Er(a,"transform","");var v=Sv(this.el),f=v&&v.a,g=v&&v.d,_=(r.left-u.left)/(f||1),b=(r.top-u.top)/(g||1);a.animatingX=!!_,a.animatingY=!!b,Er(a,"transform","translate3d("+_+"px,"+b+"px,0)"),this.forRepaintDummy=YB(a),Er(a,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),Er(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Er(a,"transition",""),Er(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},c)}}}}function YB(e){return e.offsetWidth}function KB(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var uv=[],M1={initializeByDefault:!0},uy={mount:function(t){for(var n in M1)M1.hasOwnProperty(n)&&!(n in t)&&(t[n]=M1[n]);uv.forEach(function(a){if(a.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),uv.push(t)},pluginEvent:function(t,n,a){var r=this;this.eventCanceled=!1,a.cancel=function(){r.eventCanceled=!0};var u=t+"Global";uv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][u]&&n[c.pluginName][u](vc({sortable:n},a)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](vc({sortable:n},a)))})},initializePlugins:function(t,n,a,r){uv.forEach(function(v){var f=v.pluginName;if(!(!t.options[f]&&!v.initializeByDefault)){var g=new v(t,n,t.options);g.sortable=t,g.options=t.options,t[f]=g,jf(a,g.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var c=this.modifyOption(t,u,t.options[u]);typeof c<"u"&&(t.options[u]=c)}},getEventProperties:function(t,n){var a={};return uv.forEach(function(r){typeof r.eventProperties=="function"&&jf(a,r.eventProperties.call(n[r.pluginName],t))}),a},modifyOption:function(t,n,a){var r;return uv.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[n]=="function"&&(r=u.optionListeners[n].call(t[u.pluginName],a))}),r}};function ZB(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,u=e.cloneEl,c=e.toEl,v=e.fromEl,f=e.oldIndex,g=e.newIndex,_=e.oldDraggableIndex,b=e.newDraggableIndex,O=e.originalEvent,x=e.putSortable,M=e.extraEventProperties;if(t=t||n&&n[Rl],!!t){var A,E=t.options,D="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!$f&&!ly?A=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(a,!0,!0)),A.to=c||n,A.from=v||n,A.item=r||n,A.clone=u,A.oldIndex=f,A.newIndex=g,A.oldDraggableIndex=_,A.newDraggableIndex=b,A.originalEvent=O,A.pullMode=x?x.lastPutMode:void 0;var j=vc(vc({},M),uy.getEventProperties(a,t));for(var U in j)A[U]=j[U];n&&n.dispatchEvent(A),E[D]&&E[D].call(t,A)}}var JB=["evt"],Nl=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=a.evt,u=WB(a,JB);uy.pluginEvent.bind(yr)(t,n,vc({dragEl:bn,parentEl:Ri,ghostEl:kr,rootEl:mi,nextEl:Yp,lastDownEl:xg,cloneEl:Ei,cloneHidden:Wd,dragStarted:Tm,putSortable:Na,activeSortable:yr.active,originalEvent:r,oldIndex:bv,oldDraggableIndex:Fm,newIndex:ru,newDraggableIndex:Bd,hideGhostForTarget:wP,unhideGhostForTarget:EP,cloneNowHidden:function(){Wd=!0},cloneNowShown:function(){Wd=!1},dispatchSortableEvent:function(v){cl({sortable:n,name:v,originalEvent:r})}},u))};function cl(e){ZB(vc({putSortable:Na,cloneEl:Ei,targetEl:bn,rootEl:mi,oldIndex:bv,oldDraggableIndex:Fm,newIndex:ru,newDraggableIndex:Bd},e))}var bn,Ri,kr,mi,Yp,xg,Ei,Wd,bv,ru,Fm,Bd,dg,Na,pv=!1,Kg=!1,Zg=[],Hp,bs,k1,P1,tA,nA,Tm,sv,Um,Vm=!1,pg=!1,Ag,za,N1=[],jw=!1,Jg=[],N_=typeof document<"u",hg=IE,rA=ly||$f?"cssFloat":"float",QB=N_&&!cP&&!IE&&"draggable"in document.createElement("div"),gP=function(){if(N_){if($f)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),_P=function(t,n){var a=Er(t),r=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),u=Dv(t,0,n),c=Dv(t,1,n),v=u&&Er(u),f=c&&Er(c),g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Ki(u).width,_=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Ki(c).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&v.float&&v.float!=="none"){var b=v.float==="left"?"left":"right";return c&&(f.clear==="both"||f.clear===b)?"vertical":"horizontal"}return u&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||g>=r&&a[rA]==="none"||c&&a[rA]==="none"&&g+_>r)?"vertical":"horizontal"},eW=function(t,n,a){var r=a?t.left:t.top,u=a?t.right:t.bottom,c=a?t.width:t.height,v=a?n.left:n.top,f=a?n.right:n.bottom,g=a?n.width:n.height;return r===v||u===f||r+c/2===v+g/2},tW=function(t,n){var a;return Zg.some(function(r){var u=r[Rl].options.emptyInsertThreshold;if(!(!u||LE(r))){var c=Ki(r),v=t>=c.left-u&&t<=c.right+u,f=n>=c.top-u&&n<=c.bottom+u;if(v&&f)return a=r}}),a},bP=function(t){function n(u,c){return function(v,f,g,_){var b=v.options.group.name&&f.options.group.name&&v.options.group.name===f.options.group.name;if(u==null&&(c||b))return!0;if(u==null||u===!1)return!1;if(c&&u==="clone")return u;if(typeof u=="function")return n(u(v,f,g,_),c)(v,f,g,_);var O=(c?v:f).options.group.name;return u===!0||typeof u=="string"&&u===O||u.join&&u.indexOf(O)>-1}}var a={},r=t.group;(!r||Sg(r)!="object")&&(r={name:r}),a.name=r.name,a.checkPull=n(r.pull,!0),a.checkPut=n(r.put),a.revertClone=r.revertClone,t.group=a},wP=function(){!gP&&kr&&Er(kr,"display","none")},EP=function(){!gP&&kr&&Er(kr,"display","")};N_&&!cP&&document.addEventListener("click",function(e){if(Kg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Kg=!1,!1},!0);var Xp=function(t){if(bn){t=t.touches?t.touches[0]:t;var n=tW(t.clientX,t.clientY);if(n){var a={};for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[Rl]._onDragOver(a)}}},nW=function(t){bn&&bn.parentNode[Rl]._isOutsideThisEl(t.target)};function yr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=jf({},t),e[Rl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _P(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,v){c.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yr.supportPointer!==!1&&"PointerEvent"in window&&(!Lm||IE),emptyInsertThreshold:5};uy.initializePlugins(this,e,n);for(var a in n)!(a in t)&&(t[a]=n[a]);bP(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:QB,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ro(e,"pointerdown",this._onTapStart):(ro(e,"mousedown",this._onTapStart),ro(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ro(e,"dragover",this),ro(e,"dragenter",this)),Zg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),jf(this,qB())}yr.prototype={constructor:yr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(sv=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,bn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,a=this.el,r=this.options,u=r.preventOnFilter,c=t.type,v=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(v||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,_=r.filter;if(cW(a),!bn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&Lm&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=ws(f,r.draggable,a,!1),!(f&&f.animated)&&xg!==f)){if(bv=Nu(f),Fm=Nu(f,r.draggable),typeof _=="function"){if(_.call(this,t,f,this)){cl({sortable:n,rootEl:g,name:"filter",targetEl:f,toEl:a,fromEl:a}),Nl("filter",n,{evt:t}),u&&t.preventDefault();return}}else if(_&&(_=_.split(",").some(function(b){if(b=ws(g,b.trim(),a,!1),b)return cl({sortable:n,rootEl:b,name:"filter",targetEl:f,fromEl:a,toEl:a}),Nl("filter",n,{evt:t}),!0}),_)){u&&t.preventDefault();return}r.handle&&!ws(g,r.handle,a,!1)||this._prepareDragStart(t,v,f)}}},_prepareDragStart:function(t,n,a){var r=this,u=r.el,c=r.options,v=u.ownerDocument,f;if(a&&!bn&&a.parentNode===u){var g=Ki(a);if(mi=u,bn=a,Ri=bn.parentNode,Yp=bn.nextSibling,xg=a,dg=c.group,yr.dragged=bn,Hp={target:bn,clientX:(n||t).clientX,clientY:(n||t).clientY},tA=Hp.clientX-g.left,nA=Hp.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,bn.style["will-change"]="all",f=function(){if(Nl("delayEnded",r,{evt:t}),yr.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Zx&&r.nativeDraggable&&(bn.draggable=!0),r._triggerDragStart(t,n),cl({sortable:r,name:"choose",originalEvent:t}),nu(bn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(_){pP(bn,_.trim(),R1)}),ro(v,"dragover",Xp),ro(v,"mousemove",Xp),ro(v,"touchmove",Xp),c.supportPointer?(ro(v,"pointerup",r._onDrop),!this.nativeDraggable&&ro(v,"pointercancel",r._onDrop)):(ro(v,"mouseup",r._onDrop),ro(v,"touchend",r._onDrop),ro(v,"touchcancel",r._onDrop)),Zx&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bn.draggable=!0),Nl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ly||$f))){if(yr.eventCanceled){this._onDrop();return}c.supportPointer?(ro(v,"pointerup",r._disableDelayedDrag),ro(v,"pointercancel",r._disableDelayedDrag)):(ro(v,"mouseup",r._disableDelayedDrag),ro(v,"touchend",r._disableDelayedDrag),ro(v,"touchcancel",r._disableDelayedDrag)),ro(v,"mousemove",r._delayedDragTouchMoveHandler),ro(v,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&ro(v,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(f,c.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bn&&R1(bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Zr(t,"mouseup",this._disableDelayedDrag),Zr(t,"touchend",this._disableDelayedDrag),Zr(t,"touchcancel",this._disableDelayedDrag),Zr(t,"pointerup",this._disableDelayedDrag),Zr(t,"pointercancel",this._disableDelayedDrag),Zr(t,"mousemove",this._delayedDragTouchMoveHandler),Zr(t,"touchmove",this._delayedDragTouchMoveHandler),Zr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?ro(document,"pointermove",this._onTouchMove):n?ro(document,"touchmove",this._onTouchMove):ro(document,"mousemove",this._onTouchMove):(ro(bn,"dragend",this),ro(mi,"dragstart",this._onDragStart));try{document.selection?Tg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(pv=!1,mi&&bn){Nl("dragStarted",this,{evt:n}),this.nativeDraggable&&ro(document,"dragover",nW);var a=this.options;!t&&nu(bn,a.dragClass,!1),nu(bn,a.ghostClass,!0),yr.active=this,t&&this._appendGhost(),cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(bs){this._lastX=bs.clientX,this._lastY=bs.clientY,wP();for(var t=document.elementFromPoint(bs.clientX,bs.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(bs.clientX,bs.clientY),t!==n);)n=t;if(bn.parentNode[Rl]._isOutsideThisEl(t),n)do{if(n[Rl]){var a=void 0;if(a=n[Rl]._onDragOver({clientX:bs.clientX,clientY:bs.clientY,target:t,rootEl:n}),a&&!this.options.dragoverBubble)break}t=n}while(n=dP(n));EP()}},_onTouchMove:function(t){if(Hp){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,u=t.touches?t.touches[0]:t,c=kr&&Sv(kr,!0),v=kr&&c&&c.a,f=kr&&c&&c.d,g=hg&&za&&eA(za),_=(u.clientX-Hp.clientX+r.x)/(v||1)+(g?g[0]-N1[0]:0)/(v||1),b=(u.clientY-Hp.clientY+r.y)/(f||1)+(g?g[1]-N1[1]:0)/(f||1);if(!yr.active&&!pv){if(a&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(kr){c?(c.e+=_-(k1||0),c.f+=b-(P1||0)):c={a:1,b:0,c:0,d:1,e:_,f:b};var O="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");Er(kr,"webkitTransform",O),Er(kr,"mozTransform",O),Er(kr,"msTransform",O),Er(kr,"transform",O),k1=_,P1=b,bs=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!kr){var t=this.options.fallbackOnBody?document.body:mi,n=Ki(bn,!0,hg,!0,t),a=this.options;if(hg){for(za=t;Er(za,"position")==="static"&&Er(za,"transform")==="none"&&za!==document;)za=za.parentNode;za!==document.body&&za!==document.documentElement?(za===document&&(za=dc()),n.top+=za.scrollTop,n.left+=za.scrollLeft):za=dc(),N1=eA(za)}kr=bn.cloneNode(!0),nu(kr,a.ghostClass,!1),nu(kr,a.fallbackClass,!0),nu(kr,a.dragClass,!0),Er(kr,"transition",""),Er(kr,"transform",""),Er(kr,"box-sizing","border-box"),Er(kr,"margin",0),Er(kr,"top",n.top),Er(kr,"left",n.left),Er(kr,"width",n.width),Er(kr,"height",n.height),Er(kr,"opacity","0.8"),Er(kr,"position",hg?"absolute":"fixed"),Er(kr,"zIndex","100000"),Er(kr,"pointerEvents","none"),yr.ghost=kr,t.appendChild(kr),Er(kr,"transform-origin",tA/parseInt(kr.style.width)*100+"% "+nA/parseInt(kr.style.height)*100+"%")}},_onDragStart:function(t,n){var a=this,r=t.dataTransfer,u=a.options;if(Nl("dragStart",this,{evt:t}),yr.eventCanceled){this._onDrop();return}Nl("setupClone",this),yr.eventCanceled||(Ei=mP(bn),Ei.removeAttribute("id"),Ei.draggable=!1,Ei.style["will-change"]="",this._hideClone(),nu(Ei,this.options.chosenClass,!1),yr.clone=Ei),a.cloneId=Tg(function(){Nl("clone",a),!yr.eventCanceled&&(a.options.removeCloneOnHide||mi.insertBefore(Ei,bn),a._hideClone(),cl({sortable:a,name:"clone"}))}),!n&&nu(bn,u.dragClass,!0),n?(Kg=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Zr(document,"mouseup",a._onDrop),Zr(document,"touchend",a._onDrop),Zr(document,"touchcancel",a._onDrop),r&&(r.effectAllowed="move",u.setData&&u.setData.call(a,r,bn)),ro(document,"drop",a),Er(bn,"transform","translateZ(0)")),pv=!0,a._dragStartId=Tg(a._dragStarted.bind(a,n,t)),ro(document,"selectstart",a),Tm=!0,window.getSelection().removeAllRanges(),Lm&&Er(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,a=t.target,r,u,c,v=this.options,f=v.group,g=yr.active,_=dg===f,b=v.sort,O=Na||g,x,M=this,A=!1;if(jw)return;function E(le,ie){Nl(le,M,vc({evt:t,isOwner:_,axis:x?"vertical":"horizontal",revert:c,dragRect:r,targetRect:u,canSort:b,fromSortable:O,target:a,completed:j,onMove:function(Ge,ht){return vg(mi,n,bn,r,Ge,Ki(Ge),t,ht)},changed:U},ie))}function D(){E("dragOverAnimationCapture"),M.captureAnimationState(),M!==O&&O.captureAnimationState()}function j(le){return E("dragOverCompleted",{insertion:le}),le&&(_?g._hideClone():g._showClone(M),M!==O&&(nu(bn,Na?Na.options.ghostClass:g.options.ghostClass,!1),nu(bn,v.ghostClass,!0)),Na!==M&&M!==yr.active?Na=M:M===yr.active&&Na&&(Na=null),O===M&&(M._ignoreWhileAnimating=a),M.animateAll(function(){E("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(a===bn&&!bn.animated||a===n&&!a.animated)&&(sv=null),!v.dragoverBubble&&!t.rootEl&&a!==document&&(bn.parentNode[Rl]._isOutsideThisEl(t.target),!le&&Xp(t)),!v.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),A=!0}function U(){ru=Nu(bn),Bd=Nu(bn,v.draggable),cl({sortable:M,name:"change",toEl:n,newIndex:ru,newDraggableIndex:Bd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),a=ws(a,v.draggable,n,!0),E("dragOver"),yr.eventCanceled)return A;if(bn.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||M._ignoreWhileAnimating===a)return j(!1);if(Kg=!1,g&&!v.disabled&&(_?b||(c=Ri!==mi):Na===this||(this.lastPutMode=dg.checkPull(this,g,bn,t))&&f.checkPut(this,g,bn,t))){if(x=this._getDirection(t,a)==="vertical",r=Ki(bn),E("dragOverValid"),yr.eventCanceled)return A;if(c)return Ri=mi,D(),this._hideClone(),E("revert"),yr.eventCanceled||(Yp?mi.insertBefore(bn,Yp):mi.appendChild(bn)),j(!0);var F=LE(n,v.draggable);if(!F||aW(t,x,this)&&!F.animated){if(F===bn)return j(!1);if(F&&n===t.target&&(a=F),a&&(u=Ki(a)),vg(mi,n,bn,r,a,u,t,!!a)!==!1)return D(),F&&F.nextSibling?n.insertBefore(bn,F.nextSibling):n.appendChild(bn),Ri=n,U(),j(!0)}else if(F&&iW(t,x,this)){var I=Dv(n,0,v,!0);if(I===bn)return j(!1);if(a=I,u=Ki(a),vg(mi,n,bn,r,a,u,t,!1)!==!1)return D(),n.insertBefore(bn,I),Ri=n,U(),j(!0)}else if(a.parentNode===n){u=Ki(a);var V=0,Y,K=bn.parentNode!==n,H=!eW(bn.animated&&bn.toRect||r,a.animated&&a.toRect||u,x),B=x?"top":"left",z=Qx(a,"top","top")||Qx(bn,"top","top"),X=z?z.scrollTop:void 0;sv!==a&&(Y=u[B],Vm=!1,pg=!H&&v.invertSwap||K),V=lW(t,a,u,x,H?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,pg,sv===a);var ee;if(V!==0){var pe=Nu(bn);do pe-=V,ee=Ri.children[pe];while(ee&&(Er(ee,"display")==="none"||ee===kr))}if(V===0||ee===a)return j(!1);sv=a,Um=V;var ce=a.nextElementSibling,Pe=!1;Pe=V===1;var Ee=vg(mi,n,bn,r,a,u,t,Pe);if(Ee!==!1)return(Ee===1||Ee===-1)&&(Pe=Ee===1),jw=!0,setTimeout(oW,30),D(),Pe&&!ce?n.appendChild(bn):a.parentNode.insertBefore(bn,Pe?ce:a),z&&vP(z,0,X-z.scrollTop),Ri=bn.parentNode,Y!==void 0&&!pg&&(Ag=Math.abs(Y-Ki(a)[B])),U(),j(!0)}if(n.contains(bn))return j(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Zr(document,"mousemove",this._onTouchMove),Zr(document,"touchmove",this._onTouchMove),Zr(document,"pointermove",this._onTouchMove),Zr(document,"dragover",Xp),Zr(document,"mousemove",Xp),Zr(document,"touchmove",Xp)},_offUpEvents:function(){var t=this.el.ownerDocument;Zr(t,"mouseup",this._onDrop),Zr(t,"touchend",this._onDrop),Zr(t,"pointerup",this._onDrop),Zr(t,"pointercancel",this._onDrop),Zr(t,"touchcancel",this._onDrop),Zr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;if(ru=Nu(bn),Bd=Nu(bn,a.draggable),Nl("drop",this,{evt:t}),Ri=bn&&bn.parentNode,ru=Nu(bn),Bd=Nu(bn,a.draggable),yr.eventCanceled){this._nulling();return}pv=!1,pg=!1,Vm=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Iw(this.cloneId),Iw(this._dragStartId),this.nativeDraggable&&(Zr(document,"drop",this),Zr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Lm&&Er(document.body,"user-select",""),Er(bn,"transform",""),t&&(Tm&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),kr&&kr.parentNode&&kr.parentNode.removeChild(kr),(mi===Ri||Na&&Na.lastPutMode!=="clone")&&Ei&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),bn&&(this.nativeDraggable&&Zr(bn,"dragend",this),R1(bn),bn.style["will-change"]="",Tm&&!pv&&nu(bn,Na?Na.options.ghostClass:this.options.ghostClass,!1),nu(bn,this.options.chosenClass,!1),cl({sortable:this,name:"unchoose",toEl:Ri,newIndex:null,newDraggableIndex:null,originalEvent:t}),mi!==Ri?(ru>=0&&(cl({rootEl:Ri,name:"add",toEl:Ri,fromEl:mi,originalEvent:t}),cl({sortable:this,name:"remove",toEl:Ri,originalEvent:t}),cl({rootEl:Ri,name:"sort",toEl:Ri,fromEl:mi,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),Na&&Na.save()):ru!==bv&&ru>=0&&(cl({sortable:this,name:"update",toEl:Ri,originalEvent:t}),cl({sortable:this,name:"sort",toEl:Ri,originalEvent:t})),yr.active&&((ru==null||ru===-1)&&(ru=bv,Bd=Fm),cl({sortable:this,name:"end",toEl:Ri,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Nl("nulling",this),mi=bn=Ri=kr=Yp=Ei=xg=Wd=Hp=bs=Tm=ru=Bd=bv=Fm=sv=Um=Na=dg=yr.dragged=yr.ghost=yr.clone=yr.active=null,Jg.forEach(function(t){t.checked=!0}),Jg.length=k1=P1=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":bn&&(this._onDragOver(t),rW(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,a=this.el.children,r=0,u=a.length,c=this.options;r<u;r++)n=a[r],ws(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||sW(n));return t},sort:function(t,n){var a={},r=this.el;this.toArray().forEach(function(u,c){var v=r.children[c];ws(v,this.options.draggable,r,!1)&&(a[u]=v)},this),n&&this.captureAnimationState(),t.forEach(function(u){a[u]&&(r.removeChild(a[u]),r.appendChild(a[u]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return ws(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var a=this.options;if(n===void 0)return a[t];var r=uy.modifyOption(this,t,n);typeof r<"u"?a[t]=r:a[t]=n,t==="group"&&bP(a)},destroy:function(){Nl("destroy",this);var t=this.el;t[Rl]=null,Zr(t,"mousedown",this._onTapStart),Zr(t,"touchstart",this._onTapStart),Zr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Zr(t,"dragover",this),Zr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Zg.splice(Zg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Wd){if(Nl("hideClone",this),yr.eventCanceled)return;Er(Ei,"display","none"),this.options.removeCloneOnHide&&Ei.parentNode&&Ei.parentNode.removeChild(Ei),Wd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Wd){if(Nl("showClone",this),yr.eventCanceled)return;bn.parentNode==mi&&!this.options.group.revertClone?mi.insertBefore(Ei,bn):Yp?mi.insertBefore(Ei,Yp):mi.appendChild(Ei),this.options.group.revertClone&&this.animate(bn,Ei),Er(Ei,"display",""),Wd=!1}}};function rW(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function vg(e,t,n,a,r,u,c,v){var f,g=e[Rl],_=g.options.onMove,b;return window.CustomEvent&&!$f&&!ly?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=a,f.related=r||t,f.relatedRect=u||Ki(t),f.willInsertAfter=v,f.originalEvent=c,e.dispatchEvent(f),_&&(b=_.call(g,f,c)),b}function R1(e){e.draggable=!1}function oW(){jw=!1}function iW(e,t,n){var a=Ki(Dv(n.el,0,n.options,!0)),r=yP(n.el,n.options,kr),u=10;return t?e.clientX<r.left-u||e.clientY<a.top&&e.clientX<a.right:e.clientY<r.top-u||e.clientY<a.bottom&&e.clientX<a.left}function aW(e,t,n){var a=Ki(LE(n.el,n.options.draggable)),r=yP(n.el,n.options,kr),u=10;return t?e.clientX>r.right+u||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>r.bottom+u||e.clientX>a.right&&e.clientY>a.top}function lW(e,t,n,a,r,u,c,v){var f=a?e.clientY:e.clientX,g=a?n.height:n.width,_=a?n.top:n.left,b=a?n.bottom:n.right,O=!1;if(!c){if(v&&Ag<g*r){if(!Vm&&(Um===1?f>_+g*u/2:f<b-g*u/2)&&(Vm=!0),Vm)O=!0;else if(Um===1?f<_+Ag:f>b-Ag)return-Um}else if(f>_+g*(1-r)/2&&f<b-g*(1-r)/2)return uW(t)}return O=O||c,O&&(f<_+g*u/2||f>b-g*u/2)?f>_+g/2?1:-1:0}function uW(e){return Nu(bn)<Nu(e)?1:-1}function sW(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function cW(e){Jg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&Jg.push(a)}}function Tg(e){return setTimeout(e,0)}function Iw(e){return clearTimeout(e)}N_&&ro(document,"touchmove",function(e){(yr.active||pv)&&e.cancelable&&e.preventDefault()});yr.utils={on:ro,off:Zr,css:Er,find:pP,is:function(t,n){return!!ws(t,n,t,!1)},extend:HB,throttle:hP,closest:ws,toggleClass:nu,clone:mP,index:Nu,nextTick:Tg,cancelNextTick:Iw,detectDirection:_P,getChild:Dv,expando:Rl};yr.get=function(e){return e[Rl]};yr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(yr.utils=vc(vc({},yr.utils),a.utils)),uy.mount(a)})};yr.create=function(e,t){return new yr(e,t)};yr.version=GB;var Yi=[],Mm,Lw,$w=!1,C1,D1,Qg,km;function fW(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?ro(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ro(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ro(document,"touchmove",this._handleFallbackAutoScroll):ro(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?Zr(document,"dragover",this._handleAutoScroll):(Zr(document,"pointermove",this._handleFallbackAutoScroll),Zr(document,"touchmove",this._handleFallbackAutoScroll),Zr(document,"mousemove",this._handleFallbackAutoScroll)),oA(),Mg(),XB()},nulling:function(){Qg=Lw=Mm=$w=km=C1=D1=null,Yi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var r=this,u=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(u,c);if(Qg=n,a||this.options.forceAutoScrollFallback||ly||$f||Lm){j1(n,this.options,v,a);var f=Gd(v,!0);$w&&(!km||u!==C1||c!==D1)&&(km&&oA(),km=setInterval(function(){var g=Gd(document.elementFromPoint(u,c),!0);g!==f&&(f=g,Mg()),j1(n,r.options,g,a)},10),C1=u,D1=c)}else{if(!this.options.bubbleScroll||Gd(v,!0)===dc()){Mg();return}j1(n,this.options,Gd(v,!1),!1)}}},jf(e,{pluginName:"scroll",initializeByDefault:!0})}function Mg(){Yi.forEach(function(e){clearInterval(e.pid)}),Yi=[]}function oA(){clearInterval(km)}var j1=hP(function(e,t,n,a){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,f=dc(),g=!1,_;Lw!==n&&(Lw=n,Mg(),Mm=t.scroll,_=t.scrollFn,Mm===!0&&(Mm=Gd(n,!0)));var b=0,O=Mm;do{var x=O,M=Ki(x),A=M.top,E=M.bottom,D=M.left,j=M.right,U=M.width,F=M.height,I=void 0,V=void 0,Y=x.scrollWidth,K=x.scrollHeight,H=Er(x),B=x.scrollLeft,z=x.scrollTop;x===f?(I=U<Y&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),V=F<K&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(I=U<Y&&(H.overflowX==="auto"||H.overflowX==="scroll"),V=F<K&&(H.overflowY==="auto"||H.overflowY==="scroll"));var X=I&&(Math.abs(j-r)<=c&&B+U<Y)-(Math.abs(D-r)<=c&&!!B),ee=V&&(Math.abs(E-u)<=c&&z+F<K)-(Math.abs(A-u)<=c&&!!z);if(!Yi[b])for(var pe=0;pe<=b;pe++)Yi[pe]||(Yi[pe]={});(Yi[b].vx!=X||Yi[b].vy!=ee||Yi[b].el!==x)&&(Yi[b].el=x,Yi[b].vx=X,Yi[b].vy=ee,clearInterval(Yi[b].pid),(X!=0||ee!=0)&&(g=!0,Yi[b].pid=setInterval((function(){a&&this.layer===0&&yr.active._onTouchMove(Qg);var ce=Yi[this.layer].vy?Yi[this.layer].vy*v:0,Pe=Yi[this.layer].vx?Yi[this.layer].vx*v:0;typeof _=="function"&&_.call(yr.dragged.parentNode[Rl],Pe,ce,e,Qg,Yi[this.layer].el)!=="continue"||vP(Yi[this.layer].el,Pe,ce)}).bind({layer:b}),24))),b++}while(t.bubbleScroll&&O!==f&&(O=Gd(O,!1)));$w=g}},30),OP=function(t){var n=t.originalEvent,a=t.putSortable,r=t.dragEl,u=t.activeSortable,c=t.dispatchSortableEvent,v=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var g=a||u;v();var _=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,b=document.elementFromPoint(_.clientX,_.clientY);f(),g&&!g.el.contains(b)&&(c("spill"),this.onSpill({dragEl:r,putSortable:a}))}};function $E(){}$E.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var r=Dv(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:OP};jf($E,{pluginName:"revertOnSpill"});function FE(){}FE.prototype={onSpill:function(t){var n=t.dragEl,a=t.putSortable,r=a||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:OP};jf(FE,{pluginName:"removeOnSpill"});yr.mount(new fW);yr.mount(FE,$E);const dW={class:"dialog-footer"},pW=Jn({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le(!1),c=Le(!1),v=Le({name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""}),f=fh({name:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Ot("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=Le(!1);eh(g,x=>{x||(v.value={name:"",variable:"",type:"input",isRequired:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const _=x=>{x&&(v.value=ke.cloneDeep(x),c.value=!0),g.value=!0},b=()=>{g.value=!1,c.value=!1},O=async x=>{x&&await x.validate(M=>{M&&a("refresh",v.value)})};return t({open:_,close:b}),(x,M)=>{const A=Z("el-input"),E=Z("el-form-item"),D=Z("el-switch"),j=Z("el-form"),U=Z("el-button"),F=Z("el-dialog");return be(),et(F,{title:c.value?x.$t("common.param.editParam"):x.$t("common.param.addParam"),modelValue:g.value,"onUpdate:modelValue":M[8]||(M[8]=I=>g.value=I),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":b,"append-to-body":""},{footer:R(()=>[J("span",dW,[k(U,{onClick:M[6]||(M[6]=nn(I=>g.value=!1,["prevent"]))},{default:R(()=>[ot(_e(x.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:M[7]||(M[7]=I=>O(r.value)),loading:u.value},{default:R(()=>[ot(_e(c.value?x.$t("common.save"):x.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:f,model:v.value,"require-asterisk-position":"right"},{default:R(()=>[k(E,{label:x.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:R(()=>[k(A,{modelValue:v.value.variable,"onUpdate:modelValue":M[0]||(M[0]=I=>v.value.variable=I),placeholder:x.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:M[1]||(M[1]=I=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(E,{label:x.$t("dynamicsForm.paramForm.required.label"),onClick:M[3]||(M[3]=nn(()=>{},["prevent"]))},{default:R(()=>[k(D,{size:"small",modelValue:v.value.isRequired,"onUpdate:modelValue":M[2]||(M[2]=I=>v.value.isRequired=I)},null,8,["modelValue"])]),_:1},8,["label"]),k(E,{label:x.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.isRequired,message:x.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:R(()=>[k(A,{modelValue:v.value.default_value,"onUpdate:modelValue":M[4]||(M[4]=I=>v.value.default_value=I),placeholder:x.$t("dynamicsForm.default.placeholder"),onBlur:M[5]||(M[5]=I=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),hW={class:"flex-between mb-16"},vW={class:"lighter"},mW=["title"],yW=["title"],gW={class:"mr-4"},_W=Jn({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(null),r=Le(),u=Le([]);function c(_,b){typeof b<"u"&&(a.value=b),r.value.open(_)}function v(_){u.value.splice(_,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function f(_){for(let O=0;O<u.value.length;O++)if(u.value[O].variable===_.variable&&a.value!==O){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}const b=t.nodeModel.properties.user_input_field_list;for(let O=0;O<b.length;O++)if(b[O].field===_.variable){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}a.value!==null?u.value.splice(a.value,1,_):u.value.push(_),a.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const b=n.value.$el.querySelector(".el-table__body-wrapper tbody");b&&yr.create(b,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const x=[...u.value],[M]=x.splice(O.oldIndex,1);x.splice(O.newIndex,0,M),u.value=x,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Hr(()=>{t.nodeModel.properties.api_input_field_list?u.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(_=>_.assignment_method==="api_input").forEach(_=>{u.value.push(_)}),ke.set(t.nodeModel.properties,"api_input_field_list",u)}),(_,b)=>{var F;const O=Z("Plus"),x=Z("el-icon"),M=Z("el-button"),A=Z("el-table-column"),E=Z("el-switch"),D=Z("AppIcon"),j=Z("el-tooltip"),U=Z("el-table");return be(),tn(br,null,[J("div",hW,[J("h5",vW,_e(_.$t("views.model.modelForm.title.apiParamPassing")),1),k(M,{link:"",type:"primary",onClick:b[0]||(b[0]=I=>c())},{default:R(()=>[k(x,{class:"mr-4"},{default:R(()=>[k(O)]),_:1}),ot(" "+_e(_.$t("common.add")),1)]),_:1})]),((F=t.nodeModel.properties.api_input_field_list)==null?void 0:F.length)>0?(be(),et(U,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(A,{prop:"variable",label:_.$t("dynamicsForm.paramForm.field.label")},{default:R(({row:I})=>[J("span",{class:"ellipsis-1",title:I.variable},_e(I.variable),9,mW)]),_:1},8,["label"]),k(A,{prop:"default_value",label:_.$t("dynamicsForm.default.label")},{default:R(({row:I})=>[J("span",{class:"ellipsis-1",title:I.default_value},_e(I.default_value),9,yW)]),_:1},8,["label"]),k(A,{label:_.$t("common.required")},{default:R(({row:I})=>[J("div",{onClick:b[1]||(b[1]=nn(()=>{},["stop"]))},[k(E,{disabled:"",size:"small",modelValue:I.isRequired,"onUpdate:modelValue":V=>I.isRequired=V},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(A,{label:_.$t("common.operation"),align:"left",width:"90"},{default:R(({row:I,$index:V})=>[J("span",gW,[k(j,{effect:"dark",content:_.$t("common.modify"),placement:"top"},{default:R(()=>[k(M,{type:"primary",text:"",onClick:nn(Y=>c(I,V),["stop"])},{default:R(()=>[k(D,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(j,{effect:"dark",content:_.$t("common.delete"),placement:"top"},{default:R(()=>[k(M,{type:"primary",text:"",onClick:Y=>v(V)},{default:R(()=>[k(D,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):En("",!0),k(pW,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:f},null,512)],64)}}}),bW={class:"dialog-footer"},wW=Jn({__name:"UserFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le(!1),c=Le(!1),v=Le(),f=(E,D)=>E.every(j=>sI.get(D,j,void 0)!==void 0),g=Yn(()=>{if(v.value){const E=v.value;switch(E.type){case"input":return f(["field","input_type","label","required","attrs"],v.value)?v.value:{attrs:E.attrs||{maxlength:200,minlength:0},field:E.field||E.variable,input_type:"TextInput",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired};case"select":return f(["field","input_type","label","required","option_list"],v.value)?v.value:{attrs:E.attrs||{},field:E.field||E.variable,input_type:"SingleSelect",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,option_list:E.option_list?E.option_list:E.optionList.map(D=>({key:D,value:D}))};case"date":return f(["field","input_type","label","required","attrs.format","attrs.value-format","attrs.type"],v.value)?v.value:{field:E.field||E.variable,input_type:"DatePicker",label:E.label||E.name,default_value:E.default_value,required:E.required!=null?E.required:E.isRequired,attrs:{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime"}};default:return v.value}}else return{input_type:"TextInput",required:!1,attrs:{maxlength:200,minlength:0},show_default_value:!0}}),_=Le(null),b=Le([{label:Ot("dynamicsForm.input_type_list.TextInput"),value:"TextInputConstructor"},{label:Ot("dynamicsForm.input_type_list.PasswordInput"),value:"PasswordInputConstructor"},{label:Ot("dynamicsForm.input_type_list.SingleSelect"),value:"SingleSelectConstructor"},{label:Ot("dynamicsForm.input_type_list.MultiSelect"),value:"MultiSelectConstructor"},{label:Ot("dynamicsForm.input_type_list.RadioCard"),value:"RadioCardConstructor"},{label:Ot("dynamicsForm.input_type_list.DatePicker"),value:"DatePickerConstructor"},{label:Ot("dynamicsForm.input_type_list.SwitchInput"),value:"SwitchInputConstructor"}]),O=Le(!1),x=(E,D)=>{O.value=!0,E?(c.value=!0,v.value=ke.cloneDeep(E),_.value=D):v.value=null},M=()=>{O.value=!1,c.value=!1,_.value=null,v.value=null},A=async()=>{const E=r.value;E&&await E.validate().then(()=>{a("refresh",E==null?void 0:E.getData(),_.value),c.value=!1,v.value=null,_.value=null})};return t({open:x,close:M}),(E,D)=>{const j=Z("el-button"),U=Z("el-dialog");return be(),et(U,{title:c.value?E.$t("common.param.editParam"):E.$t("common.param.addParam"),modelValue:O.value,"onUpdate:modelValue":D[2]||(D[2]=F=>O.value=F),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":M,"append-to-body":""},{footer:R(()=>[J("span",bW,[k(j,{onClick:nn(M,["prevent"])},{default:R(()=>[ot(_e(E.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:D[1]||(D[1]=F=>A()),loading:u.value},{default:R(()=>[ot(_e(c.value?E.$t("common.save"):E.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(rE,{modelValue:g.value,"onUpdate:modelValue":D[0]||(D[0]=F=>g.value=F),"label-position":"top","require-asterisk-position":"right",input_type_list:b.value,ref_key:"DynamicsFormConstructorRef",ref:r},null,8,["modelValue","input_type_list"])]),_:1},8,["title","modelValue"])}}}),EW={class:"dialog-footer"},OW=Jn({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le(!1),c=Le({title:Ot("chat.userInput")}),v=fh({title:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),f=Le(!1),g=O=>{O&&(c.value=ke.cloneDeep(O)),f.value=!0},_=()=>{f.value=!1},b=async O=>{O&&await O.validate(x=>{x&&a("refresh",c.value)})};return t({open:g,close:_}),(O,x)=>{const M=Z("el-input"),A=Z("el-form-item"),E=Z("el-form"),D=Z("el-button"),j=Z("el-dialog");return be(),et(j,{title:O.$t("common.setting"),modelValue:f.value,"onUpdate:modelValue":x[4]||(x[4]=U=>f.value=U),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:R(()=>[J("span",EW,[k(D,{onClick:x[2]||(x[2]=nn(U=>f.value=!1,["prevent"]))},{default:R(()=>[ot(_e(O.$t("common.cancel")),1)]),_:1}),k(D,{type:"primary",onClick:x[3]||(x[3]=U=>b(r.value)),loading:u.value},{default:R(()=>[ot(_e(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(E,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:R(()=>[k(A,{label:O.$t("common.title"),prop:"title"},{default:R(()=>[k(M,{modelValue:c.value.title,"onUpdate:modelValue":x[0]||(x[0]=U=>c.value.title=U),maxlength:"64","show-word-limit":"",onBlur:x[1]||(x[1]=U=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),SW={class:"flex-between mb-16"},xW=["title"],AW={class:"ml-4"},TW=["title"],MW={key:0},kW=["title"],PW={key:1},NW=["title"],RW=["title"],CW={class:"mr-4"},DW=Jn({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(),r=Le(),u=Le([]),c=Le({title:Ot("chat.userInput")});function v(M,A){a.value.open(M,A)}function f(){r.value.open(c.value)}function g(M){u.value.splice(M,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),x()}function _(M,A){for(let D=0;D<u.value.length;D++)if(u.value[D].field===M.field&&A!==D){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}const E=t.nodeModel.properties.api_input_field_list;for(let D=0;D<E.length;D++)if(E[D].variable===M.field){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+M.field);return}A!==null?u.value.splice(A,1,M):u.value.push(M),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),x()}function b(M){c.value=M,r.value.close()}const O=M=>{var A;if(M.input_type==="PasswordInput")return"******";if(M.default_value){const E=(A=M.option_list)==null?void 0:A.filter(D=>M.default_value.indexOf(D.value)>-1).map(D=>D.label).join(",");return E||M.default_value}if(M.default_value!==void 0)return M.default_value};function x(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&yr.create(A,{animation:150,ghostClass:"ghost-row",onEnd:E=>{if(E.oldIndex===void 0||E.newIndex===void 0)return;const D=[...u.value],[j]=D.splice(E.oldIndex,1);D.splice(E.newIndex,0,j),u.value=D,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Hr(()=>{t.nodeModel.properties.user_input_field_list?u.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.inputFieldList&&t.nodeModel.properties.inputFieldList.filter(M=>M.assignment_method==="user_input").forEach(M=>{u.value.push(M)}),u.value.forEach((M,A)=>{switch(M.label=M.label||M.name,M.field=M.field||M.variable,M.required=M.required||M.isRequired,M.type){case"input":M.input_type="TextInput";break;case"select":M.input_type="SingleSelect";break;case"date":M.input_type="DatePicker";break}}),ke.set(t.nodeModel.properties,"user_input_field_list",u),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),ke.set(t.nodeModel.properties,"user_input_config",c),x()}),(M,A)=>{var H;const E=Z("AppIcon"),D=Z("el-button"),j=Z("Plus"),U=Z("el-icon"),F=Z("el-table-column"),I=Z("el-tag"),V=Z("el-switch"),Y=Z("el-tooltip"),K=Z("el-table");return be(),tn(br,null,[J("div",SW,[J("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},_e(c.value.title),9,xW),J("div",null,[k(D,{type:"primary",link:"",onClick:f},{default:R(()=>[k(E,{iconName:"app-setting"})]),_:1}),J("span",AW,[k(D,{link:"",type:"primary",onClick:A[0]||(A[0]=B=>v())},{default:R(()=>[k(U,{class:"mr-4"},{default:R(()=>[k(j)]),_:1}),ot(" "+_e(M.$t("common.add")),1)]),_:1})])])]),((H=t.nodeModel.properties.user_input_field_list)==null?void 0:H.length)>0?(be(),et(K,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(F,{prop:"field",label:M.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:B})=>[J("span",{title:B.field,class:"ellipsis-1"},_e(B.field),9,TW)]),_:1},8,["label"]),k(F,{prop:"label",label:M.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:B})=>[B.label&&B.label.input_type==="TooltipLabel"?(be(),tn("span",MW,[J("span",{title:B.label.label,class:"ellipsis-1"},_e(B.label.label),9,kW)])):(be(),tn("span",PW,[J("span",{title:B.label,class:"ellipsis-1"},_e(B.label),9,NW)]))]),_:1},8,["label"]),k(F,{label:M.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:R(({row:B})=>[B.input_type==="TextInput"?(be(),et(I,{key:0,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):En("",!0),B.input_type==="PasswordInput"?(be(),et(I,{key:1,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):En("",!0),B.input_type==="Slider"?(be(),et(I,{key:2,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):En("",!0),B.input_type==="SwitchInput"?(be(),et(I,{key:3,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):En("",!0),B.input_type==="SingleSelect"?(be(),et(I,{key:4,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):En("",!0),B.input_type==="MultiSelect"?(be(),et(I,{key:5,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):En("",!0),B.input_type==="RadioCard"?(be(),et(I,{key:6,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):En("",!0),B.input_type==="DatePicker"?(be(),et(I,{key:7,type:"info",class:"info-tag"},{default:R(()=>[ot(_e(M.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):En("",!0)]),_:1},8,["label"]),k(F,{prop:"default_value",label:M.$t("dynamicsForm.default.label")},{default:R(({row:B})=>[J("span",{title:B.default_value,class:"ellipsis-1"},_e(O(B)),9,RW)]),_:1},8,["label"]),k(F,{label:M.$t("common.required")},{default:R(({row:B})=>[J("div",{onClick:A[1]||(A[1]=nn(()=>{},["stop"]))},[k(V,{disabled:"",size:"small",modelValue:B.required,"onUpdate:modelValue":z=>B.required=z},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(F,{label:M.$t("common.operation"),align:"left",width:"90"},{default:R(({row:B,$index:z})=>[J("span",CW,[k(Y,{effect:"dark",content:M.$t("common.modify"),placement:"top"},{default:R(()=>[k(D,{type:"primary",text:"",onClick:nn(X=>v(B,z),["stop"])},{default:R(()=>[k(E,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(Y,{effect:"dark",content:M.$t("common.delete"),placement:"top"},{default:R(()=>[k(D,{type:"primary",text:"",onClick:X=>g(z)},{default:R(()=>[k(E,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):En("",!0),k(wW,{ref_key:"UserFieldFormDialogRef",ref:a,onRefresh:_},null,512),k(OW,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:b},null,512)],64)}}}),jW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.8146C19.9934%202%2020.1647%202.07183%2020.29%202.19934L26.4756%208.49255C26.5982%208.61722%2026.6668%208.78505%2026.6668%208.95987V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.02637C20.1089%202.05793%2020.2089%202.11704%2020.2899%202.19936L26.4755%208.49256C26.5261%208.54408%2026.5675%208.60297%2026.5987%208.66668H21.5135C20.6776%208.66668%2020%207.98906%2020%207.15317V2.02637Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M10.7636%2013.5757H20.8727C20.9932%2013.5757%2021.0909%2013.6734%2021.0909%2013.7939V14.8121C21.0909%2014.9326%2020.9932%2015.0303%2020.8727%2015.0303H10.7636C10.6431%2015.0303%2010.5454%2014.9326%2010.5454%2014.8121V13.7939C10.5454%2013.6734%2010.6431%2013.5757%2010.7636%2013.5757ZM10.7636%2017.9394H20.8727C20.9932%2017.9394%2021.0909%2018.0371%2021.0909%2018.1576V19.1757C21.0909%2019.2962%2020.9932%2019.3939%2020.8727%2019.3939H10.7636C10.6431%2019.3939%2010.5454%2019.2962%2010.5454%2019.1757V18.1576C10.5454%2018.0371%2010.6431%2017.9394%2010.7636%2017.9394ZM10.7636%2022.303H16.1454C16.2659%2022.303%2016.3636%2022.4007%2016.3636%2022.5212V23.5394C16.3636%2023.6599%2016.2659%2023.7576%2016.1454%2023.7576H10.7636C10.6431%2023.7576%2010.5454%2023.6599%2010.5454%2023.5394V22.5212C10.5454%2022.4007%2010.6431%2022.303%2010.7636%2022.303Z'%20fill='white'/%3e%3c/svg%3e",IW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%2314C0FF'/%3e%3cpath%20d='M20%202.05988C20.072%202.09264%2020.1383%202.13825%2020.1953%202.19526L26.4714%208.4714C26.5284%208.52841%2026.574%208.59467%2026.6068%208.66666H21.3333C20.597%208.66666%2020%208.06971%2020%207.33333V2.05988Z'%20fill='%2311A3D9'/%3e%3cpath%20d='M11.3335%2016C12.4381%2016%2013.3335%2015.1046%2013.3335%2014C13.3335%2012.8954%2012.4381%2012%2011.3335%2012C10.2289%2012%209.3335%2012.8954%209.3335%2014C9.3335%2015.1046%2010.2289%2016%2011.3335%2016Z'%20fill='white'/%3e%3cpath%20d='M22.2785%2014.9317C22.4218%2014.7884%2022.6668%2014.8899%2022.6668%2015.0925V24.0645C22.6668%2024.1901%2022.565%2024.2919%2022.4394%2024.2919H13.4674L13.4587%2024.2918H9.56142C9.35877%2024.2918%209.25728%2024.0468%209.40058%2023.9035L14.366%2018.938C14.4549%2018.8492%2014.5989%2018.8492%2014.6877%2018.938L16.48%2020.7302L22.2785%2014.9317Z'%20fill='white'/%3e%3c/svg%3e",LW="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.3335%203.33333C5.3335%202.59695%205.93045%202%206.66683%202H19.724C19.9008%202%2020.0704%202.07024%2020.1954%202.19526L26.4716%208.47141C26.5966%208.59643%2026.6668%208.766%2026.6668%208.94281V28.6667C26.6668%2029.403%2026.0699%2030%2025.3335%2030H6.66683C5.93045%2030%205.3335%2029.403%205.3335%2028.6667V3.33333Z'%20fill='%233370FF'/%3e%3cpath%20d='M20%202.05994C20.072%202.0927%2020.1383%202.13831%2020.1953%202.19532L26.4714%208.47146C26.5284%208.52847%2026.574%208.59473%2026.6068%208.66672H21.3333C20.597%208.66672%2020%208.06977%2020%207.33339V2.05994Z'%20fill='%232B5FD9'/%3e%3cpath%20d='M19.976%2012.8794C20.254%2012.9447%2020.4595%2013.1796%2020.4872%2013.4638L20.6106%2014.7297C20.6546%2015.1805%2020.2459%2015.5429%2019.8037%2015.4455L16.7344%2014.7691C16.5577%2014.7302%2016.3944%2014.8747%2016.4116%2015.0548L17.1297%2022.5884C17.1297%2022.7046%2017.1151%2022.7812%2017.0891%2022.8249C17.0254%2024.3752%2015.7484%2025.6124%2014.1825%2025.6124C12.5759%2025.6124%2011.2734%2024.31%2011.2734%2022.7033C11.2734%2021.0967%2012.5759%2019.7942%2014.1825%2019.7942C14.8467%2019.7942%2015.4589%2020.0168%2015.9485%2020.3914L15.274%2012.6749C15.2345%2012.2228%2015.6485%2011.8642%2016.0904%2011.9678L19.976%2012.8794Z'%20fill='white'/%3e%3c/svg%3e",$W="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%202.5C4%201.94772%204.44772%201.5%205%201.5H14.7929C14.9255%201.5%2015.0527%201.55268%2015.1464%201.64645L19.8536%206.35355C19.9473%206.44732%2020%206.5745%2020%206.70711V21.5C20%2022.0523%2019.5523%2022.5%2019%2022.5H5C4.44772%2022.5%204%2022.0523%204%2021.5V2.5Z'%20fill='%238F959E'/%3e%3cpath%20d='M15%201.54492C15.054%201.56949%2015.1037%201.6037%2015.1464%201.64646L19.8536%206.35357C19.8963%206.39632%2019.9305%206.44602%2019.9551%206.50001H16C15.4477%206.50001%2015%206.0523%2015%205.50001V1.54492Z'%20fill='%23646A73'/%3e%3cpath%20d='M14.288%209.86441C13.7422%209.34739%2013.026%209.09082%2012.1353%209.09082C11.1347%209.09082%2010.3505%209.41162%209.78235%2010.065C9.30108%2010.6265%209.04179%2011.1646%209.00471%2012.013C9.00384%2012.033%209.00309%2012.0697%209.00247%2012.1122C9.00043%2012.2508%209.11287%2012.3635%209.25147%2012.3635H9.84253C9.98%2012.3635%2010.0914%2012.2525%2010.0936%2012.1151C10.0943%2012.0737%2010.0951%2012.038%2010.0961%2012.0189C10.1251%2011.4328%2010.278%2011.1262%2010.5508%2010.7851C10.8953%2010.3259%2011.4006%2010.0999%2012.0943%2010.0999C12.7134%2010.0999%2013.1776%2010.2578%2013.4979%2010.5782C13.8033%2010.8963%2013.9625%2011.3294%2013.9625%2011.8726C13.9625%2012.2435%2013.8281%2012.5967%2013.5549%2012.948C13.4678%2013.0568%2013.3425%2013.1862%2012.9388%2013.5899C12.3012%2014.1474%2011.9073%2014.601%2011.6993%2015.0468C11.5282%2015.3888%2011.441%2015.7775%2011.441%2016.1954V16.4772C11.441%2016.6153%2011.5529%2016.7272%2011.691%2016.7272H12.2956C12.4336%2016.7272%2012.5456%2016.6153%2012.5456%2016.4772V16.1954C12.5456%2015.8413%2012.6327%2015.5237%2012.8133%2015.2141C12.9486%2014.9841%2013.1223%2014.8038%2013.4251%2014.5389C14.0321%2013.9897%2014.3689%2013.6625%2014.5198%2013.4705C14.8821%2012.9923%2015.0671%2012.4446%2015.0671%2011.8454C15.0671%2011.0185%2014.8075%2010.355%2014.288%209.86441ZM11.7046%2017.8181C11.5666%2017.8181%2011.4546%2017.93%2011.4546%2018.0681V18.659C11.4546%2018.7971%2011.5666%2018.909%2011.7046%2018.909H12.2956C12.4336%2018.909%2012.5456%2018.7971%2012.5456%2018.659V18.0681C12.5456%2017.93%2012.4336%2017.8181%2012.2956%2017.8181H11.7046Z'%20fill='white'/%3e%3c/svg%3e",FW={class:"flex-between"},UW={class:"flex align-center"},VW={class:"line-height-22 mt-4"},BW={class:"flex-between"},WW={class:"flex align-center"},GW={class:"line-height-22 mt-4"},zW={class:"flex-between"},HW={class:"flex align-center"},XW={class:"line-height-22 mt-4"},qW={class:"flex-between"},YW={class:"flex align-center"},KW={class:"line-height-22 mt-4"},ZW={class:"dialog-footer"},JW=Jn({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=e,u=Le(!1),c=Le(!1),v=Le(""),f=Le(!1),g=Le(),_=Le(),b=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],O=["JPG","JPEG","PNG","GIF"],x=["MP3","WAV","OGG","ACC","M4A"],M=Le({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function A(I){u.value=!0,Rv(()=>{M.value={...M.value,...I}})}function E(){u.value=!1}const D=I=>{M.value.otherExtensions=M.value.otherExtensions.filter(V=>V!==I)},j=()=>{c.value=!0,Rv(()=>{_.value.input.focus()})},U=()=>{if(v.value){if(v.value=v.value.toUpperCase(),M.value.otherExtensions.includes(v.value)||b.includes(v.value)||O.includes(v.value)||x.includes(v.value)){c.value=!1,v.value="",fI(Ot("common.fileUpload.existingExtensionsTip"));return}M.value.otherExtensions.push(v.value)}c.value=!1,v.value=""};async function F(){const I=g.value;I&&await I.validate().then(()=>{const V=ke.cloneDeep(M.value);a("refresh",V),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),u.value=!1})}return t({open:A}),(I,V)=>{const Y=Z("el-slider"),K=Z("el-form-item"),H=Z("el-text"),B=Z("el-checkbox"),z=Z("el-card"),X=Z("el-tag"),ee=Z("el-input"),pe=Z("el-button"),ce=Z("el-space"),Pe=Z("el-form"),Ee=Z("el-dialog");return be(),et(Ee,{title:I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:u.value,"onUpdate:modelValue":V[16]||(V[16]=le=>u.value=le),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":E,"append-to-body":"",width:"800"},{footer:R(()=>[J("span",ZW,[k(pe,{onClick:nn(E,["prevent"])},{default:R(()=>[ot(_e(I.$t("common.cancel")),1)]),_:1}),k(pe,{type:"primary",onClick:V[15]||(V[15]=le=>F()),loading:f.value},{default:R(()=>[ot(_e(I.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(Pe,{"label-position":"top",ref_key:"fieldFormRef",ref:g,model:M.value,"require-asterisk-position":"right"},{default:R(()=>[k(K,{label:I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:R(()=>[k(Y,{modelValue:M.value.maxFiles,"onUpdate:modelValue":V[0]||(V[0]=le=>M.value.maxFiles=le),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),k(K,{label:I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:R(()=>[k(Y,{modelValue:M.value.fileLimit,"onUpdate:modelValue":V[1]||(V[1]=le=>M.value.fileLimit=le),"show-input":"","show-input-controls":!1,min:1,max:1e3},null,8,["modelValue"])]),_:1},8,["label"]),k(K,{label:I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:R(()=>[k(z,{shadow:"hover",class:Es(["card-checkbox cursor w-full mb-8",M.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:V[4]||(V[4]=nn(le=>M.value.document=!M.value.document,["stop"]))},{default:R(()=>[J("div",FW,[J("div",UW,[V[17]||(V[17]=J("img",{class:"mr-12",src:jW,alt:""},null,-1)),J("div",null,[J("p",VW,[ot(_e(I.$t("common.fileUpload.document"))+" ",1),k(H,{class:"color-secondary"},{default:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),J("p",null,_e(b.join("、")),1)])]),k(B,{modelValue:M.value.document,"onUpdate:modelValue":V[2]||(V[2]=le=>M.value.document=le),onChange:V[3]||(V[3]=le=>M.value.document=!M.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),k(z,{shadow:"hover",class:Es(["card-checkbox cursor w-full mb-8",M.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:V[7]||(V[7]=nn(le=>M.value.image=!M.value.image,["stop"]))},{default:R(()=>[J("div",BW,[J("div",WW,[V[18]||(V[18]=J("img",{class:"mr-12",src:IW,alt:""},null,-1)),J("div",null,[J("p",GW,[ot(_e(I.$t("common.fileUpload.image"))+" ",1),k(H,{class:"color-secondary"},{default:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),J("p",null,_e(O.join("、")),1)])]),k(B,{modelValue:M.value.image,"onUpdate:modelValue":V[5]||(V[5]=le=>M.value.image=le),onChange:V[6]||(V[6]=le=>M.value.image=!M.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),k(z,{shadow:"hover",class:Es(["card-checkbox cursor w-full mb-8",M.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:V[10]||(V[10]=nn(le=>M.value.audio=!M.value.audio,["stop"]))},{default:R(()=>[J("div",zW,[J("div",HW,[V[19]||(V[19]=J("img",{class:"mr-12",src:LW,alt:""},null,-1)),J("div",null,[J("p",XW,[ot(_e(I.$t("common.fileUpload.audio"))+" ",1),k(H,{class:"color-secondary"},{default:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),J("p",null,_e(x.join("、")),1)])]),k(B,{modelValue:M.value.audio,"onUpdate:modelValue":V[8]||(V[8]=le=>M.value.audio=le),onChange:V[9]||(V[9]=le=>M.value.audio=!M.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),k(z,{shadow:"hover",class:Es(["card-checkbox cursor w-full mb-8",M.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:V[14]||(V[14]=nn(le=>M.value.other=!M.value.other,["stop"]))},{default:R(()=>[J("div",qW,[J("div",YW,[V[20]||(V[20]=J("img",{class:"mr-12",width:32,src:$W,alt:""},null,-1)),J("div",null,[J("p",KW,[ot(_e(I.$t("common.fileUpload.other"))+" ",1),k(H,{class:"color-secondary"},{default:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),k(ce,{wrap:"",size:2,class:"mt-4"},{default:R(()=>[(be(!0),tn(br,null,Jr(M.value.otherExtensions,le=>(be(),et(X,{key:le,closable:"","disable-transitions":!1,onClose:ie=>D(le),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:R(()=>[ot(_e(le),1)]),_:2},1032,["onClose"]))),128)),c.value?(be(),et(ee,{key:0,ref_key:"InputRef",ref:_,modelValue:v.value,"onUpdate:modelValue":V[11]||(V[11]=le=>v.value=le),size:"small",onKeyup:cI(U,["enter"]),onBlur:U},null,8,["modelValue"])):(be(),et(pe,{key:1,class:"button-new-tag",size:"small",onClick:nn(j,["stop"])},{default:R(()=>[ot(" + "+_e(I.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),k(B,{modelValue:M.value.other,"onUpdate:modelValue":V[12]||(V[12]=le=>M.value.other=le),onChange:V[13]||(V[13]=le=>M.value.other=!M.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),QW={class:"dialog-footer"},eG=Jn({__name:"ChatFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le(!1),c=Le(!1),v=Le(null),f=Le({field:"",label:""}),g=fh({label:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:Ot("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=Le(!1),b=(M,A)=>{M&&(f.value=ke.cloneDeep(M),c.value=!0,v.value=A),_.value=!0},O=()=>{_.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},x=async M=>{M&&await M.validate(A=>{A&&a("refresh",f.value,v.value)})};return t({open:b,close:O}),(M,A)=>{const E=Z("el-input"),D=Z("el-form-item"),j=Z("el-form"),U=Z("el-button"),F=Z("el-dialog");return be(),et(F,{title:c.value?M.$t("common.param.editParam"):M.$t("common.param.addParam"),modelValue:_.value,"onUpdate:modelValue":A[3]||(A[3]=I=>_.value=I),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":O,"append-to-body":""},{footer:R(()=>[J("span",QW,[k(U,{onClick:nn(O,["prevent"])},{default:R(()=>[ot(_e(M.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:A[2]||(A[2]=I=>x(r.value)),loading:u.value},{default:R(()=>[ot(_e(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right"},{default:R(()=>[k(D,{label:M.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:g.field},{default:R(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":A[0]||(A[0]=I=>f.value.field=I),maxlength:64,placeholder:M.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:R(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":A[1]||(A[1]=I=>f.value.label=I),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),tG={class:"flex-between mb-16"},nG={class:"break-all ellipsis lighter",style:{"max-width":"80%"}},rG={class:"ml-4"},oG=["title"],iG=["title"],aG={class:"mr-4"},lG=Jn({__name:"ChatFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(),r=Le([]);function u(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}function v(f,g){for(let _=0;_<r.value.length;_++)if(r.value[_].field===f.field&&g!==_){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close(),t.nodeModel.graphModel.eventCenter.emit("chatFieldList")}return Hr(()=>{t.nodeModel.properties.chat_input_field_list&&(r.value=ke.cloneDeep(t.nodeModel.properties.chat_input_field_list)),ke.set(t.nodeModel.properties,"chat_input_field_list",r)}),(f,g)=>{var A;const _=Z("AppIcon"),b=Z("el-button"),O=Z("el-table-column"),x=Z("el-tooltip"),M=Z("el-table");return be(),tn(br,null,[J("div",tG,[J("h5",nG,_e(f.$t("views.applicationWorkflow.variable.chat")),1),J("div",null,[J("span",rG,[k(b,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>u())},{default:R(()=>[k(_,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(f.$t("common.add")),1)]),_:1})])])]),((A=t.nodeModel.properties.chat_input_field_list)==null?void 0:A.length)>0?(be(),et(M,{key:0,data:t.nodeModel.properties.chat_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:R(()=>[k(O,{prop:"field",label:f.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:E})=>[J("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,oG)]),_:1},8,["label"]),k(O,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:E})=>[J("span",null,[J("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,iG)])]),_:1},8,["label"]),k(O,{label:f.$t("common.operation"),align:"left",width:"90"},{default:R(({row:E,$index:D})=>[J("span",aG,[k(x,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:nn(j=>u(E,D),["stop"])},{default:R(()=>[k(_,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(x,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:j=>c(D)},{default:R(()=>[k(_,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):En("",!0),k(eG,{ref_key:"ChatFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),uG={class:"flex-between"},sG={class:"flex align-center"},cG={class:"mr-4"},fG={class:"flex-between"},dG={class:"mr-4"},pG={class:"flex"},hG={class:"flex-between"},vG={class:"mr-4"},mG={class:"flex"},yG={class:"w-full"},gG={class:"flex-between w-full"},_G=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Le(null),v=Le(null),f=Le(),g=Le(),_=Le(),b=Le(),O={name:"",desc:"",prologue:Ot("views.application.form.defaultPrologue")},x=ee=>ee.ctrlKey===!0?(ee.preventDefault(),!0):(ee.stopPropagation(),!0);function M(ee){ke.set(u.nodeModel.properties.nodeData,"prologue",ee)}const A=Yn({get:()=>(u.nodeModel.properties.nodeData||ke.set(u.nodeModel.properties,"nodeData",O),u.nodeModel.properties.nodeData),set:ee=>{ke.set(u.nodeModel.properties,"nodeData",ee)}}),E=Le(),D=()=>{var ee;return A.value.ttsModelEnable&&!A.value.ttsModelId&&A.value.ttsType==="TTS"?Promise.reject({node:u.nodeModel,errMessage:Ot("views.application.form.voicePlay.requiredMessage")}):A.value.sttModelEnable&&!A.value.sttModelId?Promise.reject({node:u.nodeModel,errMessage:Ot("views.application.form.voiceInput.requiredMessage")}):(ee=E.value)==null?void 0:ee.validate().catch(pe=>Promise.reject({node:u.nodeModel,errMessage:pe}))},j=t();function U(){var pe;const ee=r.value==="systemManage"?{modelType:"STT",workspaceId:(pe=j.value)==null?void 0:pe.workspaceId}:{modelType:"STT"};ho({type:"model",systemType:r.value}).getSelectModelList(ee).then(ce=>{c.value=ke.groupBy(ce==null?void 0:ce.data,"provider")})}function F(){var pe;const ee=r.value==="systemManage"?{modelType:"TTS",workspaceId:(pe=j.value)==null?void 0:pe.workspaceId}:{modelType:"TTS"};ho({type:"model",systemType:r.value}).getSelectModelList(ee).then(ce=>{v.value=ke.groupBy(ce==null?void 0:ce.data,"provider")})}function I(){Rv(()=>{var ee;A.value.ttsModelId?(ee=f.value)==null||ee.reset_default(A.value.ttsModelId,a):H({})})}function V(){A.value.ttsModelEnable||(A.value.ttsModelId="",A.value.ttsType="BROWSER")}function Y(){A.value.sttModelEnable||(A.value.sttModelId="")}const K=()=>{var pe;const ee=A.value.ttsModelId;if(!ee){Xd(Ot("views.application.form.voicePlay.requiredMessage"));return}(pe=f.value)==null||pe.open(ee,a,A.value.ttsModelParamsSetting)},H=ee=>{A.value.ttsModelParamsSetting=ee},B=()=>{const ee={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["ppt","doc"]};A.value.fileUploadEnable&&(A.value.fileUploadSetting=A.value.fileUploadSetting||ee),u.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},z=()=>{var ee;(ee=b.value)==null||ee.open(A.value.fileUploadSetting)},X=ee=>{A.value.fileUploadSetting=ee};return Hr(()=>{ke.set(u.nodeModel,"validate",D),u.nodeModel.properties.nodeData.ttsType||ke.set(u.nodeModel.properties.nodeData,"ttsType","BROWSER"),F(),U()}),(ee,pe)=>{const ce=Z("el-input"),Pe=Z("el-form-item"),Ee=Z("el-tooltip"),le=Z("el-button"),ie=Z("el-switch"),$e=Z("el-checkbox"),Ge=Z("el-radio"),ht=Z("el-radio-group"),Fe=Z("Operation"),Nt=Z("el-icon"),Yt=Z("el-form");return be(),et(Ho,{nodeModel:ee.nodeModel},{default:R(()=>[k(Yt,{onSubmit:pe[13]||(pe[13]=nn(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:E},{default:R(()=>[k(Pe,{label:ee.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:Qn(Ot)("views.application.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(ce,{modelValue:A.value.name,"onUpdate:modelValue":pe[0]||(pe[0]=kt=>A.value.name=kt),maxlength:"64",placeholder:Qn(Ot)("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:pe[1]||(pe[1]=kt=>{var On;return A.value.name=(On=A.value.name)==null?void 0:On.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(Pe,{label:ee.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:R(()=>[k(ce,{modelValue:A.value.desc,"onUpdate:modelValue":pe[2]||(pe[2]=kt=>A.value.desc=kt),placeholder:ee.$t("views.application.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),k(Pe,{label:ee.$t("views.application.form.prologue")},{default:R(()=>[k(pc,{onWheel:x,title:ee.$t("views.application.form.prologue"),modelValue:A.value.prologue,"onUpdate:modelValue":pe[3]||(pe[3]=kt=>A.value.prologue=kt),style:{height:"150px"},onSubmitDialog:M},null,8,["title","modelValue"])]),_:1},8,["label"]),k(Pe,null,{label:R(()=>[J("div",uG,[J("div",sG,[J("span",cG,_e(ee.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),k(Ee,{effect:"dark",content:ee.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),J("div",null,[A.value.fileUploadEnable?(be(),et(le,{key:0,type:"primary",link:"",onClick:z,class:"mr-4"},{default:R(()=>[k(co,{iconName:"app-setting",class:"mr-4"})]),_:1})):En("",!0),k(ie,{size:"small",modelValue:A.value.fileUploadEnable,"onUpdate:modelValue":pe[4]||(pe[4]=kt=>A.value.fileUploadEnable=kt),onChange:B},null,8,["modelValue"])])])]),_:1}),k(DW,{ref_key:"UserInputFieldTableFef",ref:g,"node-model":ee.nodeModel},null,8,["node-model"]),k(_W,{ref_key:"ApiInputFieldTableFef",ref:_,"node-model":ee.nodeModel},null,8,["node-model"]),k(lG,{ref:"ChatFieldTeble","node-model":ee.nodeModel},null,8,["node-model"]),k(Pe,null,{label:R(()=>[J("div",fG,[J("span",dG,_e(ee.$t("views.application.form.voiceInput.label")),1),J("div",pG,[A.value.sttModelEnable?(be(),et($e,{key:0,modelValue:A.value.sttAutoSend,"onUpdate:modelValue":pe[5]||(pe[5]=kt=>A.value.sttAutoSend=kt)},{default:R(()=>[ot(_e(ee.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):En("",!0),k(ie,{class:"ml-8",size:"small",modelValue:A.value.sttModelEnable,"onUpdate:modelValue":pe[6]||(pe[6]=kt=>A.value.sttModelEnable=kt),onChange:Y},null,8,["modelValue"])])])]),default:R(()=>[va(k(nh,{onWheel:x,modelValue:A.value.sttModelId,"onUpdate:modelValue":pe[7]||(pe[7]=kt=>A.value.sttModelId=kt),placeholder:ee.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[th,A.value.sttModelEnable]])]),_:1}),k(Pe,null,{label:R(()=>[J("div",hG,[J("span",vG,_e(ee.$t("views.application.form.voicePlay.label")),1),J("div",mG,[A.value.ttsModelEnable?(be(),et($e,{key:0,modelValue:A.value.ttsAutoplay,"onUpdate:modelValue":pe[8]||(pe[8]=kt=>A.value.ttsAutoplay=kt)},{default:R(()=>[ot(_e(ee.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):En("",!0),k(ie,{class:"ml-8",size:"small",modelValue:A.value.ttsModelEnable,"onUpdate:modelValue":pe[9]||(pe[9]=kt=>A.value.ttsModelEnable=kt),onChange:V},null,8,["modelValue"])])])]),default:R(()=>[J("div",yG,[va(k(ht,{modelValue:A.value.ttsType,"onUpdate:modelValue":pe[10]||(pe[10]=kt=>A.value.ttsType=kt)},{default:R(()=>[k(Ge,{label:ee.$t("views.application.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),k(Ge,{label:ee.$t("views.application.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[th,A.value.ttsModelEnable]])]),J("div",gG,[A.value.ttsType==="TTS"&&A.value.ttsModelEnable?(be(),et(nh,{key:0,onWheel:x,modelValue:A.value.ttsModelId,"onUpdate:modelValue":pe[11]||(pe[11]=kt=>A.value.ttsModelId=kt),placeholder:ee.$t("views.application.form.voicePlay.placeholder"),options:v.value,onChange:pe[12]||(pe[12]=kt=>I()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):En("",!0),A.value.ttsType==="TTS"&&A.value.ttsModelEnable?(be(),et(le,{key:1,onClick:K,disabled:!A.value.ttsModelId,class:"ml-8"},{default:R(()=>[k(Nt,null,{default:R(()=>[k(Nt,null,{default:R(()=>[k(Fe)]),_:1})]),_:1})]),_:1},8,["disabled"])):En("",!0)])]),_:1})]),_:1},8,["model"]),k(oM,{ref_key:"TTSModeParamSettingDialogRef",ref:f,onRefresh:H},null,512),k(JW,{ref_key:"FileUploadSettingDialogRef",ref:b,"node-model":ee.nodeModel,onRefresh:X},null,8,["node-model"])]),_:1},8,["nodeModel"])}}}),bG=Zd(_G,[["__scopeId","data-v-9868f90e"]]);class wG extends Xo{constructor(t){super(t,bG)}}class EG extends qo{constructor(t,n){super(t,n)}get_width(){return 600}}const OG={type:"base-node",model:EG,view:wG},SG=Object.freeze(Object.defineProperty({__proto__:null,default:OG},Symbol.toStringTag,{value:"Module"})),xG={class:"handle flex-between lighter"},AG={class:"flex align-center"},TG={key:0,class:"info"},MG={key:0,class:"mt-8"},kG=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:fl(),type:"IF",condition:"and"},{conditions:[],id:fl(),type:"ELSE",condition:"and"}]},a=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),r=(A,E,D)=>{const U=ke.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(F=>F.id===E.id?{...F,height:A.height,index:D}:F);ke.set(t.nodeModel.properties,"branch_condition_list",U),b(t.nodeModel.properties.nodeData.branch,!0)},u=Yn({get:()=>(t.nodeModel.properties.nodeData||(ke.set(t.nodeModel.properties,"nodeData",n),b(n.branch,!0)),t.nodeModel.properties.nodeData),set:A=>{ke.set(t.nodeModel.properties,"nodeData",A)}}),c=Le(),v=Le(),f=()=>{var E;const A=[(E=c.value)==null?void 0:E.validate(),...v.value.map(D=>D.validate())];return Promise.all(A).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};function g(A){const{oldIndex:E,newIndex:D}=A;if(E===void 0||D===void 0)return;const j=ke.cloneDeep(t.nodeModel.properties.nodeData.branch);if(E===j.length-1||D===j.length-1)return;const U={...j[E],type:j[D].type,id:j[D].id},F={...j[D],type:j[E].type,id:j[E].id};j[D]=U,j[E]=F,ke.set(t.nodeModel.properties.nodeData,"branch",j)}function _(){const A=ke.cloneDeep(t.nodeModel.properties.nodeData.branch),E={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(A.length-1),id:fl(),condition:"and"};A.splice(A.length-1,0,E),b(A,!0),ke.set(t.nodeModel.properties.nodeData,"branch",A)}function b(A,E){const D=ke.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),j=A.map((U,F)=>{const I=D.find(V=>V.id===U.id);if(I)return{index:F,height:I.height,id:U.id};if(E)return{index:F,height:12,id:U.id}}).filter(U=>U);ke.set(t.nodeModel.properties,"branch_condition_list",j),t.nodeModel.refreshBranch()}function O(A){const E=ke.cloneDeep(t.nodeModel.properties.nodeData.branch);E[A].conditions.push({field:[],compare:"",value:""}),ke.set(t.nodeModel.properties.nodeData,"branch",E)}function x(A,E){const D=ke.cloneDeep(t.nodeModel.properties.nodeData.branch);if(D[A].conditions.splice(E,1),D[A].conditions.length===0){const U=D.splice(A,1).map(F=>t.nodeModel.id+"_"+F.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(F=>U.includes(F.sourceAnchorId)).map(F=>F.id)),b(D,!1),D.forEach((F,I)=>{F.type==="ELSE IF "+(I+1)&&(F.type="ELSE IF "+I)})}ke.set(t.nodeModel.properties.nodeData,"branch",D)}function M(A,E,D){if(["is_null","is_not_null","is_true","is_not_true"].includes(A)){const j=ke.cloneDeep(t.nodeModel.properties.nodeData.branch);j[E].conditions[D].value=1,ke.set(t.nodeModel.properties.nodeData,"branch",j)}}return Hr(()=>{ke.set(t.nodeModel,"validate",f)}),(A,E)=>{const D=Z("el-option"),j=Z("el-select"),U=Z("el-form-item"),F=Z("el-col"),I=Z("el-input"),V=Z("AppIcon"),Y=Z("el-button"),K=Z("el-row"),H=Z("Plus"),B=Z("el-icon"),z=Z("el-card"),X=Z("el-form"),ee=Hd("resize");return be(),et(Ho,{nodeModel:A.nodeModel},{default:R(()=>[k(X,{model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:E[0]||(E[0]=nn(()=>{},["prevent"]))},{default:R(()=>[k(Qn(QI),{ref:"el",modelValue:u.value.branch,disabled:u.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:g},{default:R(()=>[(be(!0),tn(br,null,Jr(u.value.branch,(pe,ce)=>va((be(),et(z,{key:pe.id,shadow:"never",class:Es(["drag-card card-never mb-8",{"no-drag":ce===u.value.branch.length-1||u.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:R(()=>[J("div",xG,[J("span",AG,[E[1]||(E[1]=J("img",{src:e8,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),ot(" "+_e(pe.type),1)]),pe.conditions.length>1?(be(),tn("div",TG,[J("span",null,_e(A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),k(j,{teleported:!1,modelValue:pe.condition,"onUpdate:modelValue":Pe=>pe.condition=Pe,size:"small",style:{width:"60px",margin:"0 8px"}},{default:R(()=>[k(D,{label:A.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),k(D,{label:A.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),J("span",null,_e(A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):En("",!0)]),ce!==u.value.branch.length-1?(be(),tn("div",MG,[(be(!0),tn(br,null,Jr(pe.conditions,(Pe,Ee)=>(be(),et(K,{key:Ee,gutter:8},{default:R(()=>[k(F,{span:11},{default:R(()=>[k(U,{prop:"branch."+ce+".conditions."+Ee+".field",rules:{type:"array",required:!0,message:A.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:R(()=>[k(io,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Pe.field,"onUpdate:modelValue":le=>Pe.field=le},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(F,{span:6},{default:R(()=>[k(U,{prop:"branch."+ce+".conditions."+Ee+".compare",rules:{required:!0,message:A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:R(()=>[k(j,{onWheel:a,teleported:!1,modelValue:Pe.compare,"onUpdate:modelValue":le=>Pe.compare=le,placeholder:A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:le=>M(le,ce,Ee)},{default:R(()=>[(be(!0),tn(br,null,Jr(Qn(OI),(le,ie)=>(be(),et(D,{key:ie,label:le.label,value:le.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(F,{span:6},{default:R(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(Pe.compare)?En("",!0):(be(),et(U,{key:0,prop:"branch."+ce+".conditions."+Ee+".value",rules:{required:!0,message:A.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:R(()=>[k(I,{modelValue:Pe.value,"onUpdate:modelValue":le=>Pe.value=le,placeholder:A.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),k(F,{span:1},{default:R(()=>[k(Y,{disabled:ce===0&&Ee===0,link:"",type:"info",class:"mt-4",onClick:le=>x(ce,Ee)},{default:R(()=>[k(V,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):En("",!0),ce!==u.value.branch.length-1?(be(),et(Y,{key:1,link:"",type:"primary",onClick:Pe=>O(ce)},{default:R(()=>[k(B,{class:"mr-4"},{default:R(()=>[k(H)]),_:1}),ot(" "+_e(A.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):En("",!0)]),_:2},1032,["class"])),[[ee,Pe=>r(Pe,pe,ce)]])),128))]),_:1},8,["modelValue","disabled"]),k(Y,{link:"",type:"primary",onClick:_},{default:R(()=>[k(B,{class:"mr-4"},{default:R(()=>[k(H)]),_:1}),ot(" "+_e(A.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}}),PG=Zd(kG,[["__scopeId","data-v-05396cf6"]]);class NG extends Xo{constructor(t){super(t,PG)}}const RG=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class CG extends qo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],b=RG(c,g);f.push({x:n+r/2-10,y:v?a-u/2+75+b+_.height/2:a-15,id:`${t}_${_.id}_right`,type:"right"})}return f}}const DG={type:"condition-node",model:CG,view:NG},jG=Object.freeze(Object.defineProperty({__proto__:null,default:DG},Symbol.toStringTag,{value:"Module"})),IG={class:"flex-between"},LG={class:"mr-4"},$G={class:"flex-between"},FG={class:"flex-between"},UG={class:"flex-between"},VG={class:"flex-between"},BG={class:"flex-between"},WG={class:"flex-between"},GG=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=f=>f.ctrlKey===!0?(f.preventDefault(),!0):(f.stopPropagation(),!0),a={databaseTypeType:"content",databaseType:"mysql",databaseTypeReference:[],hostType:"content",host:"",hostReference:[],portType:"content",port:3306,portReference:[],databaseNameType:"content",databaseName:"",databaseNameReference:[],usernameType:"content",username:"",usernameReference:[],passwordType:"content",password:"",passwordReference:[],sqlType:"content",sql:"",sqlReference:[],isResult:!1},r=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:f=>{ke.set(t.nodeModel.properties,"nodeData",f)}}),u=Le(),c=Le(),v=()=>{var f;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(f=u.value)==null?void 0:f.validate()]).catch(g=>Promise.reject({node:t.nodeModel,errMessage:g}))};return Hr(()=>{var f;typeof((f=t.nodeModel.properties.nodeData)==null?void 0:f.isResult)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"isResult",!0),ke.set(t.nodeModel,"validate",v)}),(f,g)=>{const _=Z("el-option"),b=Z("el-select"),O=Z("el-form-item"),x=Z("el-input"),M=Z("el-form"),A=Z("el-card");return be(),et(Ho,{nodeModel:f.nodeModel},{default:R(()=>[k(A,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(M,{onSubmit:g[21]||(g[21]=nn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"databaseNodeFormRef",ref:u},{default:R(()=>[k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")},{label:R(()=>[J("div",IG,[J("div",LG,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.label")),1)]),k(b,{teleported:!1,modelValue:r.value.databaseTypeType,"onUpdate:modelValue":g[0]||(g[0]=E=>r.value.databaseTypeType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.databaseTypeType==="content"?(be(),et(b,{key:0,teleported:!1,modelValue:r.value.databaseType,"onUpdate:modelValue":g[1]||(g[1]=E=>r.value.databaseType=E),size:"small"},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.mysql"),value:"mysql"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.postgresql"),value:"postgresql"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseType.sqlserver"),value:"sqlserver"},null,8,["label"])]),_:1},8,["modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseTypeReference,"onUpdate:modelValue":g[2]||(g[2]=E=>r.value.databaseTypeReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.host.label")},{label:R(()=>[J("div",$G,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.host.label")),1),k(b,{teleported:!1,modelValue:r.value.hostType,"onUpdate:modelValue":g[3]||(g[3]=E=>r.value.hostType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.hostType==="content"?(be(),et(x,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.host.placeholder"),"show-word-limit":"",modelValue:r.value.host,"onUpdate:modelValue":g[4]||(g[4]=E=>r.value.host=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.hostReference,"onUpdate:modelValue":g[5]||(g[5]=E=>r.value.hostReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.port.label")},{label:R(()=>[J("div",FG,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.port.label")),1),k(b,{teleported:!1,modelValue:r.value.portType,"onUpdate:modelValue":g[6]||(g[6]=E=>r.value.portType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.portType==="content"?(be(),et(x,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.port.placeholder"),"show-word-limit":"",modelValue:r.value.port,"onUpdate:modelValue":g[7]||(g[7]=E=>r.value.port=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.portReference,"onUpdate:modelValue":g[8]||(g[8]=E=>r.value.portReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")},{label:R(()=>[J("div",UG,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.label")),1),k(b,{teleported:!1,modelValue:r.value.databaseNameType,"onUpdate:modelValue":g[9]||(g[9]=E=>r.value.databaseNameType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.databaseNameType==="content"?(be(),et(x,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.databaseName.placeholder"),"show-word-limit":"",modelValue:r.value.databaseName,"onUpdate:modelValue":g[10]||(g[10]=E=>r.value.databaseName=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.databaseNameReference,"onUpdate:modelValue":g[11]||(g[11]=E=>r.value.databaseNameReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.username.label")},{label:R(()=>[J("div",VG,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.username.label")),1),k(b,{teleported:!1,modelValue:r.value.usernameType,"onUpdate:modelValue":g[12]||(g[12]=E=>r.value.usernameType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.usernameType==="content"?(be(),et(x,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.username.placeholder"),"show-word-limit":"",modelValue:r.value.username,"onUpdate:modelValue":g[13]||(g[13]=E=>r.value.username=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.usernameReference,"onUpdate:modelValue":g[14]||(g[14]=E=>r.value.usernameReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.password.label")},{label:R(()=>[J("div",BG,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.password.label")),1),k(b,{teleported:!1,modelValue:r.value.passwordType,"onUpdate:modelValue":g[15]||(g[15]=E=>r.value.passwordType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.passwordType==="content"?(be(),et(x,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.password.placeholder"),"show-word-limit":"",modelValue:r.value.password,"onUpdate:modelValue":g[16]||(g[16]=E=>r.value.password=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.passwordReference,"onUpdate:modelValue":g[17]||(g[17]=E=>r.value.passwordReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(O,{label:f.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")},{label:R(()=>[J("div",WG,[J("span",null,_e(f.$t("views.applicationWorkflow.nodes.databaseNode.sql.label")),1),k(b,{teleported:!1,modelValue:r.value.sqlType,"onUpdate:modelValue":g[18]||(g[18]=E=>r.value.sqlType=E),size:"small",style:{width:"85px"}},{default:R(()=>[k(_,{label:f.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"]),k(_,{label:f.$t("views.applicationWorkflow.variable.ManualInput"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.sqlType==="content"?(be(),et(x,{key:0,placeholder:f.$t("views.applicationWorkflow.nodes.databaseNode.sql.placeholder"),"show-word-limit":"",modelValue:r.value.sql,"onUpdate:modelValue":g[19]||(g[19]=E=>r.value.sql=E),clearable:"",onWheel:n},null,8,["placeholder","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:c,nodeModel:f.nodeModel,class:"w-full",placeholder:f.$t("views.applicationWorkflow.variable.placeholder"),modelValue:r.value.sqlReference,"onUpdate:modelValue":g[20]||(g[20]=E=>r.value.sqlReference=E)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class zG extends Xo{constructor(t){super(t,GG)}}const HG={type:"database-node",model:qo,view:zG},XG=Object.freeze(Object.defineProperty({__proto__:null,default:HG},Symbol.toStringTag,{value:"Module"})),qG={class:"title-decoration-1 mb-8"},YG=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={documentList:["start-node","document"]},a=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:r=>{ke.set(t.nodeModel.properties,"nodeData",r)}});return(r,u)=>{const c=Z("el-form-item"),v=Z("el-form"),f=Z("el-card");return be(),et(Ho,{nodeModel:r.nodeModel},{default:R(()=>[J("h5",qG,_e(r.$t("views.applicationWorkflow.nodeSetting")),1),k(f,{shadow:"never",class:"card-never"},{default:R(()=>[k(v,{onSubmit:u[1]||(u[1]=nn(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto"},{default:R(()=>[k(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.chatLog.documentPlaceholder"),trigger:"change"}},{default:R(()=>[k(io,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.chatLog.documentPlaceholder"),modelValue:a.value.documentList,"onUpdate:modelValue":u[0]||(u[0]=g=>a.value.documentList=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let KG=class extends Xo{constructor(t){super(t,YG)}};const ZG={type:"document-extract-node",model:qo,view:KG},JG=Object.freeze(Object.defineProperty({__proto__:null,default:ZG},Symbol.toStringTag,{value:"Module"})),QG={class:"dialog-footer"},ez=Jn({__name:"AddFormCollect",props:{title:{default:Ot("common.param.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Le(!1),u=Le(),c=Le({}),v=Le(!1),f=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},_=()=>{var b;(b=u.value)==null||b.validate().then(()=>{var O;a.addFormField((O=u.value)==null?void 0:O.getData()),g()})};return t({close:g,open:f}),(b,O)=>{const x=Z("el-button"),M=Z("el-dialog");return be(),et(M,{title:b.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:R(()=>[J("span",QG,[k(x,{onClick:O[1]||(O[1]=nn(A=>r.value=!1,["prevent"]))},{default:R(()=>[ot(_e(b.$t("common.cancel")),1)]),_:1}),k(x,{type:"primary",onClick:O[2]||(O[2]=A=>_()),loading:v.value},{default:R(()=>[ot(_e(b.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(rE,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:u},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),tz={class:"dialog-footer"},nz=Jn({__name:"EditFormCollect",props:{title:{default:Ot("common.param.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const a=e,r=Le(!1),u=Le(),c=Le({}),v=Le(0),f=Le(!1),g=(O,x)=>{r.value=!0,c.value=O,v.value=x},_=()=>{r.value=!1,c.value={}},b=()=>{var O;(O=u.value)==null||O.validate().then(()=>{var x;a.editFormField((x=u.value)==null?void 0:x.getData(),v.value),_()})};return t({close:_,open:g}),(O,x)=>{const M=Z("el-button"),A=Z("el-dialog");return be(),et(A,{title:O.title,modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=E=>r.value=E),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:R(()=>[J("span",tz,[k(M,{onClick:x[1]||(x[1]=nn(E=>r.value=!1,["prevent"]))},{default:R(()=>[ot(_e(O.$t("common.cancel")),1)]),_:1}),k(M,{type:"primary",onClick:x[2]||(x[2]=E=>b()),loading:f.value},{default:R(()=>[ot(_e(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(rE,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=E=>c.value=E),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:u},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),rz={class:"title-decoration-1 mb-8"},oz={class:"flex align-center"},iz={class:"mr-4"},az={class:"flex-between"},lz={class:"lighter"},uz=["title"],sz={key:0},cz=["title"],fz={key:1},dz=["title"],pz=["title"],hz={class:"mr-4"},vz=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(),r=(j,U)=>{const F=x.value.form_field_list.map((I,V)=>U===V?ke.cloneDeep(j):ke.cloneDeep(I));x.value.form_field_list=F,c()},u=j=>{if(x.value.form_field_list.some(U=>U.field===j.field)){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+j.field);return}x.value.form_field_list=ke.cloneDeep([...x.value.form_field_list,j]),c()},c=()=>{const j=[{label:Ot("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...x.value.form_field_list.map(U=>({value:U.field,label:typeof U.label=="string"?U.label:U.label.label}))];ke.set(t.nodeModel.properties.config,"fields",j),t.nodeModel.clear_next_node_field(!1),D()},v=Le(),f=Le(),g=()=>{var j;(j=v.value)==null||j.open()},_=(j,U)=>{var F;(F=f.value)==null||F.open(ke.cloneDeep(j),U)},b=j=>{x.value.form_field_list=x.value.form_field_list.filter(U=>U.field!==j.field),c()},O=Le({isResult:!0,form_content_format:`${Ot("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Ot("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),x=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",O.value),t.nodeModel.properties.nodeData),set:j=>{ke.set(t.nodeModel.properties,"nodeData",j)}}),M=j=>{var U;if(j.default_value){const F=(U=j.option_list)==null?void 0:U.filter(I=>j.default_value.indexOf(I.value)>-1).map(I=>I.label).join(",");return F||j.default_value}if(j.default_value!==void 0)return j.default_value},A=()=>{var j;return(j=n.value)==null?void 0:j.validate()};function E(j){ke.set(t.nodeModel.properties.nodeData,"form_content_format",j)}function D(){if(!a.value)return;const U=a.value.$el.querySelector(".el-table__body-wrapper tbody");U&&yr.create(U,{animation:150,ghostClass:"ghost-row",onEnd:F=>{if(F.oldIndex===void 0||F.newIndex===void 0)return;const I=[...x.value.form_field_list],[V]=I.splice(F.oldIndex,1);I.splice(F.newIndex,0,V),x.value.form_field_list=I,c()}})}return Hr(()=>{ke.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(j,U)=>{const F=Z("AppIcon"),I=Z("el-tooltip"),V=Z("MdEditorMagnify"),Y=Z("el-form-item"),K=Z("Plus"),H=Z("el-icon"),B=Z("el-button"),z=Z("el-table-column"),X=Z("el-tag"),ee=Z("el-switch"),pe=Z("el-table"),ce=Z("el-form"),Pe=Z("el-card");return be(),et(Ho,{nodeModel:j.nodeModel},{default:R(()=>[J("h5",rz,_e(j.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(ce,{onSubmit:U[4]||(U[4]=nn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[k(Y,{label:j.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:j.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:R(()=>[J("div",oz,[J("div",iz,[J("span",null,[ot(_e(j.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),U[5]||(U[5]=J("span",{class:"color-danger"},"*",-1))])]),k(I,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(j.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:R(()=>[k(F,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(V,{title:j.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:x.value.form_content_format,"onUpdate:modelValue":U[0]||(U[0]=Ee=>x.value.form_content_format=Ee),style:{height:"150px"},onSubmitDialog:E},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(Y,{label:j.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:U[3]||(U[3]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",az,[J("h5",lz,_e(j.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),k(B,{link:"",type:"primary",onClick:U[1]||(U[1]=Ee=>g())},{default:R(()=>[k(H,{class:"mr-4"},{default:R(()=>[k(K)]),_:1}),ot(" "+_e(j.$t("common.add")),1)]),_:1})])]),default:R(()=>[x.value.form_field_list.length>0?(be(),et(pe,{key:0,class:"border",data:x.value.form_field_list,ref_key:"tableRef",ref:a,"row-key":"field"},{default:R(()=>[k(z,{prop:"field",label:j.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:R(({row:Ee})=>[J("span",{title:Ee.field,class:"ellipsis-1"},_e(Ee.field),9,uz)]),_:1},8,["label"]),k(z,{prop:"label",label:j.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:Ee})=>[Ee.label&&Ee.label.input_type==="TooltipLabel"?(be(),tn("span",sz,[J("span",{title:Ee.label.label,class:"ellipsis-1"},_e(Ee.label.label),9,cz)])):(be(),tn("span",fz,[J("span",{title:Ee.label,class:"ellipsis-1"},_e(Ee.label),9,dz)]))]),_:1},8,["label"]),k(z,{label:j.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:R(({row:Ee})=>[k(X,{type:"info",class:"info-tag"},{default:R(()=>{var le;return[ot(_e((le=Qn(dI).find(ie=>ie.value===Ee.input_type))==null?void 0:le.label),1)]}),_:2},1024)]),_:1},8,["label"]),k(z,{prop:"default_value",label:j.$t("dynamicsForm.default.label")},{default:R(({row:Ee})=>[J("span",{title:Ee.default_value,class:"ellipsis-1"},_e(M(Ee)),9,pz)]),_:1},8,["label"]),k(z,{label:j.$t("common.required"),width:"85"},{default:R(({row:Ee})=>[J("div",{onClick:U[2]||(U[2]=nn(()=>{},["stop"]))},[k(ee,{disabled:"",size:"small",modelValue:Ee.required,"onUpdate:modelValue":le=>Ee.required=le},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),k(z,{label:j.$t("common.operation"),align:"left",width:"90"},{default:R(({row:Ee,$index:le})=>[J("span",hz,[k(I,{effect:"dark",content:j.$t("common.modify"),placement:"top"},{default:R(()=>[k(B,{type:"primary",text:"",onClick:nn(ie=>_(Ee,le),["stop"])},{default:R(()=>[k(F,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(I,{effect:"dark",content:j.$t("common.delete"),placement:"top"},{default:R(()=>[k(B,{type:"primary",text:"",onClick:ie=>b(Ee)},{default:R(()=>[k(F,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):En("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(ez,{ref_key:"addFormCollectRef",ref:v,addFormField:u},null,512),k(nz,{ref_key:"editFormCollectRef",ref:f,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class mz extends Xo{constructor(t){super(t,vz)}}const yz={type:"form-node",model:qo,view:mz},gz=Object.freeze(Object.defineProperty({__proto__:null,default:yz},Symbol.toStringTag,{value:"Module"})),_z={class:"title-decoration-1 mb-8"},bz={class:"flex-between mb-8"},wz={class:"lighter"},Ez={class:"flex w-full"},Oz={class:"flex-between mb-8"},Sz={class:"lighter"},xz={class:"flex-between mb-8"},Az={class:"lighter"},Tz=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=["GET","POST","PUT","DELETE","PATCH"],r=["none","form-data","x-www-form-urlencoded","json","xml","raw-text"],u=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),c=Le({activeTab:"params",method:"GET",url:"",timeout:30,headers:[{}],params:[{}],contentType:"json",authType:"none",token:"",username:"",password:"",body:""}),v=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",c.value),t.nodeModel.properties.nodeData),set:O=>{ke.set(t.nodeModel.properties,"nodeData",O)}}),f=()=>{var O;return(O=n.value)==null?void 0:O.validate()},g=()=>{const O=v.value.activeTab,x=v.value.contentType,M={...v.value};O==="params"?M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]):O==="headers"?M.headers[v.value.headers.length-1].name.trim()!==""&&(M.headers=[...M.headers||[],{name:"",value:""}]):O==="body"&&["form-data","x-www-form-urlencoded"].includes(x)&&M.params[v.value.params.length-1].name.trim()!==""&&(M.params=[...M.params||[],{name:"",value:""}]),v.value=M};function _(O){const x=v.value.activeTab,M=v.value.contentType,A={...v.value};x==="params"?A.params=(A.params||[]).filter((E,D)=>D!==O):x==="headers"?A.headers=(A.headers||[]).filter((E,D)=>D!==O):x==="body"&&["form-data","x-www-form-urlencoded"].includes(M)&&(A.params=(A.params||[]).filter((E,D)=>D!==O)),v.value=A}function b(O){ke.set(t.nodeModel.properties.nodeData,"body",O)}return Hr(()=>{ke.set(t.nodeModel,"validate",f),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(O,x)=>{const M=Z("el-option"),A=Z("el-select"),E=Z("el-input"),D=Z("el-form-item"),j=Z("el-input-number"),U=Z("el-table-column"),F=Z("Delete"),I=Z("el-icon"),V=Z("el-button"),Y=Z("el-tooltip"),K=Z("el-table"),H=Z("el-tab-pane"),B=Z("el-radio"),z=Z("el-radio-group"),X=Z("el-tabs"),ee=Z("el-form"),pe=Z("el-card");return be(),et(Ho,{nodeModel:O.nodeModel},{default:R(()=>[J("h5",_z,_e(O.$t("views.applicationWorkflow.nodeSetting")),1),k(pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(ee,{onSubmit:x[11]||(x[11]=nn(()=>{},["prevent"])),model:v.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[J("div",bz,[J("span",wz,[ot(_e(O.$t("views.applicationWorkflow.nodes.httpNode.configuration")),1),x[12]||(x[12]=J("span",{class:"color-danger"},"*",-1))])]),J("div",Ez,[k(A,{modelValue:c.value.method,"onUpdate:modelValue":x[0]||(x[0]=ce=>c.value.method=ce),style:{"max-width":"85px"},class:"mr-8",onChange:x[1]||(x[1]=ce=>c.value.method=null)},{default:R(()=>[(be(),tn(br,null,Jr(a,ce=>k(M,{key:ce,label:ce,value:ce},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),k(D,{prop:"url",rules:{message:Qn(Ot)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:R(()=>[k(E,{modelValue:v.value.url,"onUpdate:modelValue":x[2]||(x[2]=ce=>v.value.url=ce),placeholder:O.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:u,style:{"min-width":"400px"}},null,8,["modelValue","placeholder"])]),_:1},8,["rules"])]),J("div",Oz,[J("span",Sz,[ot(_e(O.$t("views.applicationWorkflow.nodes.httpNode.timeout")),1),x[13]||(x[13]=J("span",{class:"color-danger"},"*",-1))]),k(j,{modelValue:c.value.timeout,"onUpdate:modelValue":x[3]||(x[3]=ce=>c.value.timeout=ce)},null,8,["modelValue"])]),J("div",xz,[J("span",Az,[ot(_e(O.$t("views.applicationWorkflow.nodes.httpNode.params")),1),x[14]||(x[14]=J("span",{class:"color-danger"},"*",-1))])]),k(X,{modelValue:v.value.activeTab,"onUpdate:modelValue":x[10]||(x[10]=ce=>v.value.activeTab=ce),class:"w-full"},{default:R(()=>[k(H,{name:"params",label:"Params"},{default:R(()=>[k(K,{data:v.value.params,border:"",style:{width:"100%"}},{default:R(()=>[k(U,{prop:"name",label:"Name"},{default:R(ce=>[k(E,{modelValue:ce.row.name,"onUpdate:modelValue":Pe=>ce.row.name=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{prop:"value",label:"Value"},{default:R(ce=>[k(E,{modelValue:ce.row.value,"onUpdate:modelValue":Pe=>ce.row.value=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{label:"",width:"50"},{default:R(ce=>[ce.$index!==v.value.params.length-1?(be(),et(Y,{key:0,effect:"dark",content:O.$t("common.delete"),placement:"top"},{default:R(()=>[k(V,{type:"primary",text:"",onClick:Pe=>_(ce.$index)},{default:R(()=>[k(I,null,{default:R(()=>[k(F)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):En("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(H,{name:"authorization",label:"Authorization"},{default:R(()=>[k(z,{modelValue:v.value.authType,"onUpdate:modelValue":x[7]||(x[7]=ce=>v.value.authType=ce)},{default:R(()=>[k(B,{label:"No Auth",value:"none"}),k(B,{label:"Bearer Token",value:"bearer"}),k(B,{label:"Basic Auth",value:"basic"}),v.value.authType==="bearer"?(be(),et(E,{key:0,placeholder:O.$t("views.applicationWorkflow.nodes.httpNode.authToken"),"show-word-limit":"",modelValue:v.value.token,"onUpdate:modelValue":x[4]||(x[4]=ce=>v.value.token=ce),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):En("",!0),v.value.authType==="basic"?(be(),et(E,{key:1,placeholder:O.$t("views.applicationWorkflow.nodes.httpNode.authUsername"),"show-word-limit":"",modelValue:v.value.username,"onUpdate:modelValue":x[5]||(x[5]=ce=>v.value.username=ce),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):En("",!0),v.value.authType==="basic"?(be(),et(E,{key:2,placeholder:O.$t("views.applicationWorkflow.nodes.httpNode.authPassword"),"show-word-limit":"",modelValue:v.value.password,"onUpdate:modelValue":x[6]||(x[6]=ce=>v.value.password=ce),clearable:"",onWheel:u},null,8,["placeholder","modelValue"])):En("",!0)]),_:1},8,["modelValue"])]),_:1}),k(H,{name:"headers",label:"Headers"},{default:R(()=>[k(K,{data:v.value.headers,border:"",style:{width:"100%"}},{default:R(()=>[k(U,{prop:"name",label:"Name"},{default:R(ce=>[k(E,{modelValue:ce.row.name,"onUpdate:modelValue":Pe=>ce.row.name=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{prop:"value",label:"Value"},{default:R(ce=>[k(E,{modelValue:ce.row.value,"onUpdate:modelValue":Pe=>ce.row.value=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{label:"",width:"50"},{default:R(ce=>[ce.$index!==v.value.headers.length-1?(be(),et(Y,{key:0,effect:"dark",content:O.$t("common.delete"),placement:"top"},{default:R(()=>[k(V,{type:"primary",text:"",onClick:Pe=>_(ce.$index)},{default:R(()=>[k(I,null,{default:R(()=>[k(F)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):En("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),k(H,{name:"body",label:"Body"},{default:R(()=>[k(z,{modelValue:v.value.contentType,"onUpdate:modelValue":x[9]||(x[9]=ce=>v.value.contentType=ce)},{default:R(()=>[(be(),tn(br,null,Jr(r,ce=>k(B,{key:ce,label:ce,value:ce},null,8,["label","value"])),64)),["form-data","x-www-form-urlencoded"].includes(v.value.contentType)?(be(),et(K,{key:0,data:v.value.params,border:"",style:{width:"100%"}},{default:R(()=>[k(U,{prop:"name",label:"Name"},{default:R(ce=>[k(E,{modelValue:ce.row.name,"onUpdate:modelValue":Pe=>ce.row.name=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{prop:"value",label:"Value"},{default:R(ce=>[k(E,{modelValue:ce.row.value,"onUpdate:modelValue":Pe=>ce.row.value=Pe,placeholder:"输入/可选择变量",onClick:g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),k(U,{label:"",width:"50"},{default:R(ce=>[ce.$index!==0?(be(),et(Y,{key:0,effect:"dark",content:O.$t("common.delete"),placement:"top"},{default:R(()=>[k(V,{type:"primary",text:"",onClick:Pe=>_(ce.$index)},{default:R(()=>[k(I,null,{default:R(()=>[k(F)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):En("",!0)]),_:1})]),_:1},8,["data"])):En("",!0),["json","xml","raw-text"].includes(v.value.contentType)?(be(),et(pc,{key:1,title:O.$t("views.applicationWorkflow.nodes.httpNode.body"),modelValue:v.value.body,"onUpdate:modelValue":x[8]||(x[8]=ce=>v.value.body=ce),style:{height:"150px"},onSubmitDialog:b},null,8,["title","modelValue"])):En("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}}),Mz=Zd(Tz,[["__scopeId","data-v-ac24d5c2"]]);class kz extends Xo{constructor(t){super(t,Mz)}}const Pz={type:"http-node",model:qo,view:kz},Nz=Object.freeze(Object.defineProperty({__proto__:null,default:Pz},Symbol.toStringTag,{value:"Module"})),Rz={class:"title-decoration-1 mb-8"},Cz={class:"flex-between w-full"},Dz={class:"flex align-center"},jz={class:"mr-4"},Iz={class:"flex align-center"},Lz={class:"mr-4"},$z={class:"flex align-center"},Fz={class:"mr-4"},Uz=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Le(null),v=Le(),f=Le(),g=()=>{var I;return(I=f.value)==null?void 0:I.validate().catch(V=>Promise.reject({node:u.nodeModel,errMessage:V}))},_=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),O={modelId:"",system:"",prompt:`{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null},x=Yn({get:()=>(u.nodeModel.properties.nodeData||ke.set(u.nodeModel.properties,"nodeData",O),u.nodeModel.properties.nodeData),set:I=>{ke.set(u.nodeModel.properties,"nodeData",I)}}),M=t();function A(){var V;const I=r.value==="systemManage"?{modelType:"TTI",workspaceId:(V=M.value)==null?void 0:V.workspaceId}:{modelType:"TTI"};ho({type:"model",systemType:r.value}).getSelectModelList(I).then(Y=>{c.value=ke.groupBy(Y==null?void 0:Y.data,"provider")})}const E=()=>{Rv(()=>{var I;x.value.modelId?(I=v.value)==null||I.reset_default(x.value.modelId,a):j({})})},D=I=>{var V;I&&((V=v.value)==null||V.open(I,a,x.value.modelParamsSetting))};function j(I){ke.set(u.nodeModel.properties.nodeData,"modelParamsSetting",I)}function U(I){ke.set(u.nodeModel.properties.nodeData,"prompt",I)}function F(I){ke.set(u.nodeModel.properties.nodeData,"negative_prompt",I)}return Hr(()=>{A(),ke.set(u.nodeModel,"validate",g)}),(I,V)=>{const Y=Z("AppIcon"),K=Z("el-button"),H=Z("ModelSelect"),B=Z("el-form-item"),z=Z("el-tooltip"),X=Z("el-switch"),ee=Z("el-form"),pe=Z("el-card");return be(),et(Ho,{"node-model":I.nodeModel},{default:R(()=>[J("h5",Rz,_e(I.$t("views.applicationWorkflow.nodeSetting")),1),k(pe,{shadow:"never",class:"card-never"},{default:R(()=>[k(ee,{onSubmit:V[6]||(V[6]=nn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:R(()=>[k(B,{label:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:R(()=>[J("div",Cz,[J("div",null,[J("span",null,[ot(_e(I.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),V[7]||(V[7]=J("span",{class:"color-danger"},"*",-1))])]),k(K,{disabled:!x.value.modelId,type:"primary",link:"",onClick:V[0]||(V[0]=ce=>D(x.value.modelId)),onRefreshForm:j},{default:R(()=>[k(Y,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(H,{onChange:E,onWheel:_,teleported:!1,modelValue:x.value.modelId,"onUpdate:modelValue":V[1]||(V[1]=ce=>x.value.modelId=ce),placeholder:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(B,{label:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:I.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[J("div",Dz,[J("div",jz,[J("span",null,[ot(_e(I.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),V[8]||(V[8]=J("span",{class:"color-danger"},"*",-1))])]),k(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(pc,{onWheel:_,title:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:x.value.prompt,"onUpdate:modelValue":V[2]||(V[2]=ce=>x.value.prompt=ce),style:{height:"150px"},onSubmitDialog:U},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(B,{label:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:I.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[J("div",Iz,[J("div",Lz,[J("span",null,_e(I.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),k(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(pc,{onWheel:_,title:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:x.value.negative_prompt,"onUpdate:modelValue":V[3]||(V[3]=ce=>x.value.negative_prompt=ce),placeholder:I.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:F},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),k(B,{label:I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:V[5]||(V[5]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",$z,[J("div",Fz,[J("span",null,_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(X,{size:"small",modelValue:x.value.isResult,"onUpdate:modelValue":V[4]||(V[4]=ce=>x.value.isResult=ce)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(Vv,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:j},null,512)]),_:1},8,["node-model"])}}});let Vz=class extends Xo{constructor(t){super(t,Uz)}};const Bz={type:"image-generate-node",model:qo,view:Vz},Wz=Object.freeze(Object.defineProperty({__proto__:null,default:Bz},Symbol.toStringTag,{value:"Module"})),Gz={class:"title-decoration-1 mb-8"},zz={class:"flex-between w-full"},Hz={class:"flex align-center"},Xz={class:"mr-4"},qz={class:"flex-between"},Yz={class:"flex align-center"},Kz={class:"mr-4"},Zz=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Le(null),v=Le(),f=Le(),g=Le(),_=()=>{var I;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(I=f.value)==null?void 0:I.validate()]).catch(V=>Promise.reject({node:u.nodeModel,errMessage:V}))},b=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),x={modelId:"",system:"",prompt:`{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogueNumber:0,dialogue_type:"NODE",isResult:!0,temperature:null,maxTokens:null,imageList:["start-node","image"]},M=Yn({get:()=>(u.nodeModel.properties.nodeData||ke.set(u.nodeModel.properties,"nodeData",x),u.nodeModel.properties.nodeData),set:I=>{ke.set(u.nodeModel.properties,"nodeData",I)}}),A=t();function E(){var V;const I=r.value==="systemManage"?{modelType:"IMAGE",workspaceId:(V=A.value)==null?void 0:V.workspaceId}:{modelType:"IMAGE"};ho({type:"model",systemType:r.value}).getSelectModelList(I).then(Y=>{c.value=ke.groupBy(Y==null?void 0:Y.data,"provider")})}function D(I){ke.set(u.nodeModel.properties.nodeData,"system",I)}function j(I){ke.set(u.nodeModel.properties.nodeData,"prompt",I)}const U=I=>{var V;I&&((V=v.value)==null||V.open(I,a,M.value.modelParamsSetting))};function F(I){ke.set(u.nodeModel.properties.nodeData,"modelParamsSetting",I)}return Hr(()=>{E(),ke.set(u.nodeModel,"validate",_)}),(I,V)=>{const Y=Z("AppIcon"),K=Z("el-button"),H=Z("el-form-item"),B=Z("el-tooltip"),z=Z("el-option"),X=Z("el-select"),ee=Z("el-input-number"),pe=Z("el-switch"),ce=Z("el-form"),Pe=Z("el-card");return be(),et(Ho,{"node-model":I.nodeModel},{default:R(()=>[J("h5",Gz,_e(I.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never"},{default:R(()=>[k(ce,{onSubmit:V[9]||(V[9]=nn(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:R(()=>[k(H,{label:I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:R(()=>[J("div",zz,[J("div",null,[J("span",null,[ot(_e(Qn(Ot)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),V[10]||(V[10]=J("span",{class:"color-danger"},"*",-1))])]),k(K,{disabled:!M.value.modelId,type:"primary",link:"",onClick:V[0]||(V[0]=Ee=>U(M.value.modelId)),onRefreshForm:F},{default:R(()=>[k(Y,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(nh,{onWheel:b,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":V[1]||(V[1]=Ee=>M.value.modelId=Ee),placeholder:I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:c.value,showFooter:"","model-type":"IMAGE"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{label:I.$t("views.application.form.roleSettings.label")},{default:R(()=>[k(pc,{title:I.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":V[2]||(V[2]=Ee=>M.value.system=Ee),style:{height:"100px"},onSubmitDialog:D,placeholder:I.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(H,{label:I.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:I.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:R(()=>[J("div",Hz,[J("div",Xz,[J("span",null,[ot(_e(I.$t("views.application.form.prompt.label")),1),V[11]||(V[11]=J("span",{class:"color-danger"},"*",-1))])]),k(B,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.application.form.prompt.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(pc,{onWheel:b,title:I.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":V[3]||(V[3]=Ee=>M.value.prompt=Ee),style:{height:"150px"},onSubmitDialog:j},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(H,null,{label:R(()=>[J("div",qz,[J("div",null,_e(I.$t("views.application.form.historyRecord.label")),1),k(X,{modelValue:M.value.dialogue_type,"onUpdate:modelValue":V[4]||(V[4]=Ee=>M.value.dialogue_type=Ee),type:"small",style:{width:"100px"}},{default:R(()=>[k(z,{label:I.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),k(z,{label:I.$t("views.applicationWorkflow.workflow"),value:"WORK_FLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[k(ee,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":V[5]||(V[5]=Ee=>M.value.dialogueNumber=Ee),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),k(H,{label:I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),V[12]||(V[12]=J("span",{class:"color-danger"},"*",-1))]),default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:g,nodeModel:I.nodeModel,class:"w-full",placeholder:I.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:M.value.imageList,"onUpdate:modelValue":V[6]||(V[6]=Ee=>M.value.imageList=Ee)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:V[8]||(V[8]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",Yz,[J("div",Kz,[J("span",null,_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(B,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(pe,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":V[7]||(V[7]=Ee=>M.value.isResult=Ee)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(Vv,{ref_key:"AIModeParamSettingDialogRef",ref:v,onRefresh:F},null,512)]),_:1},8,["node-model"])}}});let Jz=class extends Xo{constructor(t){super(t,Zz)}};const Qz={type:"image-understand-node",model:qo,view:Jz},eH=Object.freeze(Object.defineProperty({__proto__:null,default:Qz},Symbol.toStringTag,{value:"Module"})),tH={class:"title-decoration-1 mb-8"},nH={class:"flex-between"},rH={class:"flex-between"},oH={class:"flex-between"},iH=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Le(),c=Le();function v(){const V=ke.cloneDeep(E.nodeModel.properties.nodeData.branch),Y={id:fl(),content:"",isOther:!1};V.splice(V.length-1,0,Y),g(V,!0),ke.set(E.nodeModel.properties.nodeData,"branch",V),E.nodeModel.refreshBranch()}function f(V){var ee;const Y=ke.cloneDeep(E.nodeModel.properties.nodeData.branch),K=Y.find(pe=>pe.id===V);if(!K||K.isOther||Y.filter(pe=>!pe.isOther).length<=1)return;const B=`${E.nodeModel.id}_${V}_right`,z=(((ee=E.nodeModel.outgoing)==null?void 0:ee.edges)||[]).filter(pe=>pe.sourceAnchorId===B).map(pe=>pe.id);z.length>0&&E.nodeModel.graphModel.eventCenter.emit("delete_edge",z);const X=Y.filter(pe=>pe.id!==V);ke.set(E.nodeModel.properties.nodeData,"branch",X),g(X,!1)}function g(V,Y){const K=ke.cloneDeep(E.nodeModel.properties.branch_condition_list?E.nodeModel.properties.branch_condition_list:[]),H=V.map((B,z)=>{const X=K.find(ee=>ee.id===B.id);if(X)return{index:z,height:X.height,id:B.id};if(Y)return{index:z,height:12,id:B.id}}).filter(B=>B);ke.set(E.nodeModel.properties,"branch_condition_list",H),E.nodeModel.refreshBranch()}const _=V=>V.ctrlKey===!0?(V.preventDefault(),!0):(V.stopPropagation(),!0),b=V=>{var Y;V?(Y=c.value)==null||Y.reset_default(V,a):x({})},O={modelId:"",branch:[{id:fl(),content:"",isOther:!1},{id:fl(),content:Ot("views.applicationWorkflow.nodes.intentNode.other"),isOther:!0}],dialogueNumber:1,contentList:[]};function x(V){ke.set(E.nodeModel.properties.nodeData,"modelParamsSetting",V)}const M=V=>{var Y;V&&((Y=c.value)==null||Y.open(V,a,A.value.modelParamsSetting))},A=Yn({get:()=>(E.nodeModel.properties.nodeData||(ke.set(E.nodeModel.properties,"nodeData",O),g(O.branch,!0)),E.nodeModel.properties.nodeData),set:V=>{ke.set(E.nodeModel.properties,"nodeData",V)}}),E=e,D=Le(),j=Le(null),U=()=>{var V;return Promise.all([u.value?u.value.validate():Promise.resolve(""),(V=D.value)==null?void 0:V.validate()]).then(()=>{if(A.value.branch.length!=new Set(A.value.branch.map(Y=>Y.content)).size)throw Ot("views.applicationWorkflow.nodes.intentNode.error2")}).catch(Y=>Promise.reject({node:E.nodeModel,errMessage:Y}))},F=t();function I(){var Y;const V=r.value==="systemManage"?{modelType:"LLM",workspaceId:(Y=F.value)==null?void 0:Y.workspaceId}:{modelType:"LLM"};ho({type:"model",systemType:r.value}).getSelectModelList(V).then(K=>{j.value=ke.groupBy(K==null?void 0:K.data,"provider")})}return Hr(()=>{var V;I(),typeof((V=E.nodeModel.properties.nodeData)==null?void 0:V.is_result)>"u"&&gc(E.nodeModel)&&ke.set(E.nodeModel.properties.nodeData,"is_result",!0),ke.set(E.nodeModel,"validate",U)}),(V,Y)=>{const K=Z("el-button"),H=Z("el-form-item"),B=Z("el-input-number"),z=Z("Plus"),X=Z("el-icon"),ee=Z("el-input"),pe=Z("el-col"),ce=Z("Delete"),Pe=Z("el-row"),Ee=Z("el-form"),le=Z("el-card");return be(),et(Ho,{nodeModel:V.nodeModel},{default:R(()=>[J("h5",tH,_e(V.$t("views.applicationWorkflow.nodeSetting")),1),k(le,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(Ee,{onSubmit:Y[4]||(Y[4]=nn(()=>{},["prevent"])),model:A.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"IntentClassifyNodeFormRef",ref:D,"hide-required-asterisk":""},{default:R(()=>[k(H,{label:V.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:V.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[J("div",nH,[J("div",null,[J("span",null,[ot(_e(V.$t("views.application.form.aiModel.label")),1),Y[5]||(Y[5]=J("span",{class:"color-danger"},"*",-1))])]),k(K,{type:"primary",link:"",disabled:!A.value.modelId,onClick:Y[0]||(Y[0]=ie=>M(A.value.modelId)),onRefreshForm:x},{default:R(()=>[k(co,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(nh,{onChange:b,onWheel:_,teleported:!1,modelValue:A.value.modelId,"onUpdate:modelValue":Y[1]||(Y[1]=ie=>A.value.modelId=ie),placeholder:V.$t("views.application.form.aiModel.placeholder"),options:j.value,onSubmitModel:I,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{prop:"contentList",label:V.$t("views.applicationWorkflow.nodes.intentNode.input.label"),rules:{message:V.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"change",required:!0}},{label:R(()=>[J("div",rH,[J("div",null,[J("span",null,[ot(_e(V.$t("views.applicationWorkflow.nodes.intentNode.input.label")),1),Y[6]||(Y[6]=J("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:u,nodeModel:V.nodeModel,class:"w-full",placeholder:V.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:A.value.contentList,"onUpdate:modelValue":Y[2]||(Y[2]=ie=>A.value.contentList=ie)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:V.$t("views.application.form.historyRecord.label")},{default:R(()=>[k(B,{modelValue:A.value.dialogueNumber,"onUpdate:modelValue":Y[3]||(Y[3]=ie=>A.value.dialogueNumber=ie),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(H,null,{label:R(()=>[J("div",oH,[J("div",null,[J("span",null,[ot(_e(V.$t("views.applicationWorkflow.nodes.intentNode.classify.label")),1),Y[7]||(Y[7]=J("span",{class:"color-danger"},"*",-1))])]),k(K,{onClick:v,type:"primary",size:"large",link:""},{default:R(()=>[k(X,null,{default:R(()=>[k(z)]),_:1})]),_:1})])]),default:R(()=>[J("div",null,[(be(!0),tn(br,null,Jr(A.value.branch,(ie,$e)=>(be(),tn("div",{key:ie.id,class:"mb-8"},[k(H,{prop:`branch.${$e}.content`,rules:{message:V.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder"),trigger:"change",required:!0}},{default:R(()=>[k(Pe,{gutter:12,align:"middle"},{default:R(()=>[k(pe,{span:21},{default:R(()=>[k(ee,{modelValue:ie.content,"onUpdate:modelValue":Ge=>ie.content=Ge,style:{width:"210px"},disabled:ie.isOther,placeholder:V.$t("views.applicationWorkflow.nodes.intentNode.classify.placeholder")},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:2},1024),k(pe,{span:3},{default:R(()=>[ie.isOther?En("",!0):(be(),et(K,{key:0,link:"",size:"large",disabled:A.value.branch.filter(Ge=>!Ge.isOther).length<=1,onClick:Ge=>f(ie.id)},{default:R(()=>[k(X,null,{default:R(()=>[k(ce)]),_:1})]),_:2},1032,["disabled","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["prop","rules"])]))),128))])]),_:1})]),_:1},8,["model"])]),_:1}),k(Vv,{ref_key:"AIModeParamSettingDialogRef",ref:c,onRefresh:x},null,512)]),_:1},8,["nodeModel"])}}});class aH extends Xo{constructor(t){super(t,iH)}}class lH extends qo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let _=0;_<c.length;_++){const b=c[_];f.push({x:n+r/2-10,y:v?a-u/2+397+_*41.36:a-15,id:`${t}_${b.id}_right`,type:"right"}),console.log(a-u/2+397+100/2)}return f}}const uH={type:"intent-node",model:lH,view:aH},sH=Object.freeze(Object.defineProperty({__proto__:null,default:uH},Symbol.toStringTag,{value:"Module"})),cH={class:"title-decoration-1 mb-8"},fH={class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},dH={class:"flex-between"},pH={class:"flex align-center"},hH=["src"],vH={class:"flex-between"},mH={class:"ml-4"},yH={class:"title-decoration-1 mb-8"},gH={key:0,class:"p-8-12"},_H={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},bH={class:"flex-between"},wH={key:0,class:"color-danger"},EH={key:0,class:"p-8-12"},OH={key:1,class:"border-r-6 p-8-12 mb-8 layout-bg lighter"},SH={class:"flex-between"},xH={key:0,class:"color-danger"},AH=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,TH=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e;d_();const n=Zi(),{params:{id:a}}=n,u=$u("getApplicationDetail")(),c=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),v=Le(),f=Le(!1),g=F=>F.ctrlKey===!0?(F.preventDefault(),!0):(F.stopPropagation(),!0),_={mcpTool:"",mcpTools:[],mcpServers:"",mcpServer:"",mcpSource:"referencing",mcpToolId:"",toolParams:{},tool_form_field:[],params_nested:""},b=Le([]);function O(F){ke.set(t.nodeModel.properties.nodeData,"mcpServers",F)}async function x(){const F=await ho({type:"tool",systemType:c.value}).getToolById(E.value.mcpToolId,f);E.value.mcpServers=F.data.code}function M(){if(E.value.mcpSource==="referencing"&&!E.value.mcpToolId){li(Ot("views.applicationWorkflow.nodes.mcpNode.mcpToolTip"));return}if(E.value.mcpSource==="custom"&&!E.value.mcpServers){li(Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(E.value.mcpServers)}catch{li(Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}ho({type:"application",systemType:c.value}).getMcpTools(a,E.value.mcpServers,f).then(F=>{var I;E.value.mcpTools=F.data,Xd(Ot("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),E.value.mcpServer=(I=E.value.mcpTools.find(V=>V.name===E.value.mcpTool))==null?void 0:I.server})}function A(){var I,V,Y,K,H,B;E.value.mcpServer=(I=E.value.mcpTools.find(z=>z.name===E.value.mcpTool))==null?void 0:I.server;const F=(V=E.value.mcpTools.find(z=>z.name===E.value.mcpTool))==null?void 0:V.args_schema;E.value.tool_form_field=[];for(const z in F==null?void 0:F.properties){const X=F==null?void 0:F.properties[z].properties;if(X){E.value.params_nested=z;for(const ee in X){let pe="TextInput";X[ee].type==="string"?pe="TextInput":X[ee].type==="number"?pe="NumberInput":X[ee].type==="boolean"?pe="SwitchInput":(X[ee].type==="array"||X[ee].type==="object")&&(pe="JsonInput"),E.value.tool_form_field.push({field:ee,label:{input_type:"TooltipLabel",label:ee,attrs:{tooltip:X[ee].description},props_info:{}},input_type:pe,source:"referencing",required:((Y=F.properties[z].required)==null?void 0:Y.indexOf(ee))!==-1,props_info:{rules:[{required:((K=F.properties[z].required)==null?void 0:K.indexOf(ee))!==-1,message:Ot("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{E.value.params_nested="";let ee="TextInput";F.properties[z].type==="string"?ee="TextInput":F.properties[z].type==="number"?ee="NumberInput":F.properties[z].type==="boolean"?ee="SwitchInput":(F.properties[z].type==="array"||F.properties[z].type==="object")&&(ee="JsonInput"),E.value.tool_form_field.push({field:z,label:{input_type:"TooltipLabel",label:z,attrs:{tooltip:F.properties[z].description},props_info:{}},input_type:ee,source:"referencing",required:((H=F.required)==null?void 0:H.indexOf(z))!==-1,props_info:{rules:[{required:((B=F.required)==null?void 0:B.indexOf(z))!==-1,message:Ot("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}E.value.params_nested?E.value.toolParams={[E.value.params_nested]:{}}:E.value.toolParams={}}const E=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",_),t.nodeModel.properties.nodeData),set:F=>{ke.set(t.nodeModel.properties,"nodeData",F)}}),D=Le(),j=async()=>{if(v.value){const F=E.value.tool_form_field.filter(I=>I.required).map(I=>I.label.label);if(F.length>0){for(const I of F)if(E.value.params_nested){if(!E.value.toolParams[E.value.params_nested][I])return Promise.reject({node:t.nodeModel,errMessage:I+Ot("dynamicsForm.tip.requiredMessage")})}else if(!E.value.toolParams[I])return Promise.reject({node:t.nodeModel,errMessage:I+Ot("dynamicsForm.tip.requiredMessage")})}}if(D.value){const F=ke.cloneDeep(E.value);if(!F.mcpServers)return Promise.reject({node:t.nodeModel,errMessage:Ot("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!F.mcpTool)return Promise.reject({node:t.nodeModel,errMessage:Ot("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};function U(){var I;const F=c.value==="systemManage"?{scope:"WORKSPACE",toolType:"MCP",workspaceId:(I=u.value)==null?void 0:I.workspaceId}:{scope:"WORKSPACE",toolType:"MCP"};ho({type:"tool",systemType:c.value}).getAllToolList(F,f).then(V=>{b.value=[...V.data.shared_tools,...V.data.tools].filter(Y=>Y.isActive)})}return Hr(()=>{var F;typeof((F=t.nodeModel.properties.nodeData)==null?void 0:F.isResult)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"isResult",!0),U(),ke.set(t.nodeModel,"validate",j)}),(F,I)=>{const V=Z("el-option"),Y=Z("el-select"),K=Z("el-avatar"),H=Z("ToolIcon"),B=Z("el-tag"),z=Z("el-form-item"),X=Z("Plus"),ee=Z("el-icon"),pe=Z("el-button"),ce=Z("AppIcon"),Pe=Z("el-tooltip"),Ee=Z("el-form"),le=Z("el-text"),ie=Z("el-input"),$e=Z("el-input-number"),Ge=Z("el-switch"),ht=Hd("loading");return be(),et(Ho,{nodeModel:F.nodeModel},{default:R(()=>[J("h5",cH,_e(F.$t("views.applicationWorkflow.nodeSetting")),1),J("div",fH,[k(Ee,{onSubmit:I[5]||(I[5]=nn(()=>{},["prevent"])),model:E.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:D,"hide-required-asterisk":""},{default:R(()=>[k(z,{label:"MCP Server Config"},{label:R(()=>[J("div",dH,[I[9]||(I[9]=J("div",null,[ot(" MCP Server Config "),J("span",{class:"color-danger"},"*")],-1)),k(Y,{teleported:!1,modelValue:E.value.mcpSource,"onUpdate:modelValue":I[0]||(I[0]=Fe=>E.value.mcpSource=Fe),size:"small",style:{width:"85px"}},{default:R(()=>[k(V,{label:F.$t("views.applicationWorkflow.nodes.mcpNode.reference"),value:"referencing"},null,8,["label"]),k(V,{label:F.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[E.value.mcpSource==="custom"?(be(),et(pc,{key:0,onWheel:g,title:"MCP Server Config",modelValue:E.value.mcpServers,"onUpdate:modelValue":I[1]||(I[1]=Fe=>E.value.mcpServers=Fe),style:{height:"150px"},onSubmitDialog:O,placeholder:AH},null,8,["modelValue"])):(be(),et(Y,{key:1,modelValue:E.value.mcpToolId,"onUpdate:modelValue":I[2]||(I[2]=Fe=>E.value.mcpToolId=Fe),filterable:"",onChange:x},{default:R(()=>[(be(!0),tn(br,null,Jr(b.value,Fe=>(be(),et(V,{key:Fe.id,label:Fe.name,value:Fe.id},{default:R(()=>[J("div",pH,[Fe!=null&&Fe.icon?(be(),et(K,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:R(()=>[J("img",{src:Qn(Pf)(Fe==null?void 0:Fe.icon),alt:""},null,8,hH)]),_:2},1024)):(be(),et(H,{key:1,size:20,type:Fe==null?void 0:Fe.toolType,class:"mr-8"},null,8,["type"])),J("span",null,_e(Fe.name),1),Fe.scope==="SHARED"?(be(),et(B,{key:2,type:"info",class:"info-tag ml-8"},{default:R(()=>[ot(_e(Qn(Ot)("views.shared.title")),1)]),_:1})):En("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),k(z,null,{label:R(()=>[J("div",vH,[J("span",null,_e(F.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),k(pe,{type:"primary",link:"",onClick:I[3]||(I[3]=Fe=>M())},{default:R(()=>[k(ee,{class:"mr-4"},{default:R(()=>[k(X)]),_:1}),ot(" "+_e(F.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:R(()=>[k(Y,{modelValue:E.value.mcpTool,"onUpdate:modelValue":I[4]||(I[4]=Fe=>E.value.mcpTool=Fe),onChange:A,filterable:""},{default:R(()=>[(be(!0),tn(br,null,Jr(E.value.mcpTools,Fe=>(be(),et(V,{key:Fe.value,label:Fe.name,value:Fe.name,class:"flex align-center"},{default:R(()=>[k(Pe,{effect:"dark",content:Fe.description,placement:"top-start","popper-class":"max-w-350"},{default:R(()=>[k(ce,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),J("span",mH,_e(Fe.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),J("h5",yH,_e(F.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),E.value.toolParams[E.value.params_nested]?(be(),tn(br,{key:0},[E.value.mcpTool?(be(),tn("div",_H,[E.value.mcpTool?va((be(),et(Ee,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:I[7]||(I[7]=nn(()=>{},["prevent"]))},{default:R(()=>[(be(!0),tn(br,null,Jr(E.value.tool_form_field,Fe=>(be(),et(z,{key:Fe.field,required:Fe.required},{label:R(()=>[J("div",bH,[J("div",null,[k(FS,{label:Fe.label.label,tooltip:Fe.label.attrs.tooltip},null,8,["label","tooltip"]),Fe.required?(be(),tn("span",wH,"*")):En("",!0)]),k(Y,{teleported:!1,modelValue:Fe.source,"onUpdate:modelValue":Nt=>Fe.source=Nt,size:"small",style:{width:"85px"},onChange:I[6]||(I[6]=Nt=>E.value.toolParams[E.value.params_nested]={})},{default:R(()=>[k(V,{label:F.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(V,{label:F.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:R(()=>[Fe.source==="custom"&&Fe.input_type==="TextInput"?(be(),et(ie,{key:0,modelValue:E.value.toolParams[E.value.params_nested][Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[E.value.params_nested][Fe.label.label]=Nt},null,8,["modelValue","onUpdate:modelValue"])):Fe.source==="custom"&&Fe.input_type==="NumberInput"?(be(),et($e,{key:1,modelValue:E.value.toolParams[E.value.params_nested][Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[E.value.params_nested][Fe.label.label]=Nt},null,8,["modelValue","onUpdate:modelValue"])):Fe.source==="custom"&&Fe.input_type==="SwitchInput"?(be(),et(Ge,{key:2,modelValue:E.value.toolParams[E.value.params_nested][Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[E.value.params_nested][Fe.label.label]=Nt},null,8,["modelValue","onUpdate:modelValue"])):Fe.source==="custom"&&Fe.input_type==="JsonInput"?(be(),et(ie,{key:3,modelValue:E.value.toolParams[E.value.params_nested][Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[E.value.params_nested][Fe.label.label]=Nt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):En("",!0),Fe.source==="referencing"?(be(),et(io,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:F.nodeModel,class:"w-full",placeholder:F.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[E.value.params_nested][Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[E.value.params_nested][Fe.label.label]=Nt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):En("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[ht,f.value]]):En("",!0)])):(be(),tn("div",gH,[k(le,{type:"info"},{default:R(()=>[ot(_e(F.$t("common.noData")),1)]),_:1})]))],64)):(be(),tn(br,{key:1},[E.value.mcpTool?(be(),tn("div",OH,[E.value.mcpTool?va((be(),et(Ee,{key:0,ref_key:"dynamicsFormRef",ref:v,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:I[8]||(I[8]=nn(()=>{},["prevent"]))},{default:R(()=>[(be(!0),tn(br,null,Jr(E.value.tool_form_field,Fe=>(be(),et(z,{key:Fe.field,required:Fe.required},{label:R(()=>[J("div",SH,[J("div",null,[k(FS,{label:Fe.label.label,tooltip:Fe.label.attrs.tooltip},null,8,["label","tooltip"]),Fe.required?(be(),tn("span",xH,"*")):En("",!0)]),k(Y,{teleported:!1,modelValue:Fe.source,"onUpdate:modelValue":Nt=>Fe.source=Nt,size:"small",style:{width:"85px"}},{default:R(()=>[k(V,{label:F.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(V,{label:F.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:R(()=>[Fe.source==="custom"&&Fe.input_type==="TextInput"?(be(),et(ie,{key:0,modelValue:E.value.toolParams[Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[Fe.label.label]=Nt},null,8,["modelValue","onUpdate:modelValue"])):Fe.source==="custom"&&Fe.input_type==="NumberInput"?(be(),et($e,{key:1,modelValue:E.value.toolParams[Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[Fe.label.label]=Nt},null,8,["modelValue","onUpdate:modelValue"])):Fe.source==="custom"&&Fe.input_type==="SwitchInput"?(be(),et(Ge,{key:2,modelValue:E.value.toolParams[Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[Fe.label.label]=Nt},null,8,["modelValue","onUpdate:modelValue"])):Fe.source==="custom"&&Fe.input_type==="JsonInput"?(be(),et(ie,{key:3,modelValue:E.value.toolParams[Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[Fe.label.label]=Nt,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):En("",!0),Fe.source==="referencing"?(be(),et(io,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:F.nodeModel,class:"w-full",placeholder:F.$t("views.applicationWorkflow.variable.placeholder"),modelValue:E.value.toolParams[Fe.label.label],"onUpdate:modelValue":Nt=>E.value.toolParams[Fe.label.label]=Nt},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):En("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[ht,f.value]]):En("",!0)])):(be(),tn("div",EH,[k(le,{type:"info"},{default:R(()=>[ot(_e(F.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class MH extends Xo{constructor(t){super(t,TH)}}const kH={type:"mcp-node",model:qo,view:MH},PH=Object.freeze(Object.defineProperty({__proto__:null,default:kH},Symbol.toStringTag,{value:"Module"})),NH={class:"dialog-footer"},RH=Jn({__name:"ParametersFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array"}],u=Le(),c=Le(!1),v=Le(!1),f=Le(null),g=Le({field:"",label:"",parameterType:"",desc:""}),_=fh({label:[{required:!0,message:Ot("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],field:[{required:!0,message:Ot("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),b=Le(!1),O=(A,E)=>{A&&(g.value=ke.cloneDeep(A),v.value=!0,f.value=E),b.value=!0},x=()=>{b.value=!1,v.value=!1,f.value=null,g.value={field:"",label:""}},M=async A=>{A&&await A.validate(E=>{E&&a("refresh",g.value,f.value)})};return t({open:O,close:x}),(A,E)=>{const D=Z("el-input"),j=Z("el-form-item"),U=Z("el-option"),F=Z("el-select"),I=Z("el-form"),V=Z("el-button"),Y=Z("el-dialog");return be(),et(Y,{title:v.value?A.$t("common.param.editParam"):A.$t("common.param.addParam"),modelValue:b.value,"onUpdate:modelValue":E[5]||(E[5]=K=>b.value=K),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":x,"append-to-body":""},{footer:R(()=>[J("span",NH,[k(V,{onClick:nn(x,["prevent"])},{default:R(()=>[ot(_e(A.$t("common.cancel")),1)]),_:1}),k(V,{type:"primary",onClick:E[4]||(E[4]=K=>M(u.value)),loading:c.value},{default:R(()=>[ot(_e(A.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(I,{"label-position":"top",ref_key:"fieldFormRef",ref:u,rules:_,model:g.value,"require-asterisk-position":"right"},{default:R(()=>[k(j,{label:A.$t("dynamicsForm.paramForm.field.label"),required:!0,prop:"field",rules:_.field},{default:R(()=>[k(D,{modelValue:g.value.field,"onUpdate:modelValue":E[0]||(E[0]=K=>g.value.field=K),maxlength:64,placeholder:A.$t("dynamicsForm.paramForm.field.placeholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:A.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:_.label},{default:R(()=>[k(D,{modelValue:g.value.label,"onUpdate:modelValue":E[1]||(E[1]=K=>g.value.label=K),maxlength:64,"show-word-limit":"",placeholder:A.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:A.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),required:!0,prop:"parameterType",rules:_.label},{default:R(()=>[k(F,{modelValue:g.value.parameterType,"onUpdate:modelValue":E[2]||(E[2]=K=>g.value.parameterType=K),placeholder:A.$t("common.selectPlaceholder")+A.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType"),style:{width:"100%"}},{default:R(()=>[(be(),tn(br,null,Jr(r,K=>k(U,{key:K.value,label:K.label,value:K.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(j,{label:A.$t("common.desc"),prop:"desc"},{default:R(()=>[k(D,{modelValue:g.value.desc,"onUpdate:modelValue":E[3]||(E[3]=K=>g.value.desc=K),style:{width:"100%"},rows:2,type:"textarea",placeholder:A.$t("common.descPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),CH={class:"flex-between w-full"},DH={class:"break-all lighter"},jH={class:"ml-4",style:{"margin-top":"-4px"}},IH=["title"],LH=["title"],$H={class:"mr-4"},FH=Jn({__name:"ParametersFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(),r=Le([]);function u(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1);const g=[{label:Ot("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];ke.set(t.nodeModel.properties.config,"fields",g)}function v(f,g){for(let b=0;b<r.value.length;b++)if(r.value[b].field===f.field&&g!==b){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close();const _=[{label:Ot("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];ke.set(t.nodeModel.properties.config,"fields",_)}return Hr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=ke.cloneDeep(t.nodeModel.properties.nodeData.variableList)),ke.set(t.nodeModel.properties.nodeData,"variableList",r);const f=[{label:Ot("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];ke.set(t.nodeModel.properties.config,"fields",f)}),(f,g)=>{var A;const _=Z("el-button"),b=Z("el-table-column"),O=Z("el-tag"),x=Z("el-tooltip"),M=Z("el-table");return be(),tn(br,null,[J("div",CH,[J("h5",DH,[ot(_e(f.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"))+" ",1),g[1]||(g[1]=J("span",{class:"color-danger"},"*",-1))]),J("span",jH,[k(_,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>u())},{default:R(()=>[k(co,{iconName:"app-add-outlined",class:"mr-4"})]),_:1})])]),((A=t.nodeModel.properties.nodeData.variableList)==null?void 0:A.length)>0?(be(),et(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:R(()=>[k(b,{prop:"field",label:f.$t("dynamicsForm.paramForm.field.label"),width:"90"},{default:R(({row:E})=>[J("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,IH)]),_:1},8,["label"]),k(b,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:E})=>[J("span",null,[J("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,LH)])]),_:1},8,["label"]),k(b,{prop:"label",label:f.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.parameterType")},{default:R(({row:E})=>[k(O,{type:"info",class:"info-tag"},{default:R(()=>[ot(_e(E.parameterType),1)]),_:2},1024)]),_:1},8,["label"]),k(b,{label:f.$t("common.operation"),align:"left",width:"80"},{default:R(({row:E,$index:D})=>[J("span",$H,[k(x,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:R(()=>[k(_,{type:"primary",text:"",onClick:nn(j=>u(E,D),["stop"])},{default:R(()=>[k(co,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(x,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:R(()=>[k(_,{type:"primary",text:"",onClick:j=>c(D)},{default:R(()=>[k(co,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):En("",!0),k(RH,{ref_key:"ParametersFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),UH={class:"title-decoration-1 mb-8"},VH={class:"flex-between w-full"},BH={class:"flex-between"},WH=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=e,a=Le(),r=Zi(),{params:{id:u}}=r,c=j=>{var U;j&&((U=a.value)==null||U.open(j,u,M.value.modelParamsSetting))};function v(j){ke.set(n.nodeModel.properties.nodeData,"modelParamsSetting",j)}const f=t(),g=Le(null),_=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),b=Yn(()=>r.path.includes("resource-management")?"systemManage":"workspace");function O(){var U;const j=b.value==="systemManage"?{modelType:"LLM",workspace_id:(U=f.value)==null?void 0:U.workspace_id}:{modelType:"LLM"};ho({type:"model",systemType:b.value}).getSelectModelList(j).then(F=>{g.value=ke.groupBy(F==null?void 0:F.data,"provider")})}const x={inputVariable:[],modelParamsSetting:{},modelId:"",variableList:[]},M=Yn({get:()=>(n.nodeModel.properties.nodeData||ke.set(n.nodeModel.properties,"nodeData",x),n.nodeModel.properties.nodeData),set:j=>{ke.set(n.nodeModel.properties,"nodeData",j)}}),A=j=>{var U;j?(U=a.value)==null||U.reset_default(j,u):v({})},E=Le(),D=async()=>E.value.validate();return Hr(()=>{O(),ke.set(n.nodeModel,"validate",D)}),(j,U)=>{const F=Z("el-button"),I=Z("el-form-item"),V=Z("el-form"),Y=Z("el-card");return be(),et(Ho,{nodeModel:j.nodeModel},{default:R(()=>[J("h5",UH,_e(j.$t("views.applicationWorkflow.nodeSetting")),1),k(Y,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(V,{onSubmit:U[3]||(U[3]=nn(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:E,"hide-required-asterisk":""},{default:R(()=>[k(I,{label:j.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:j.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[J("div",VH,[J("div",null,[J("span",null,[ot(_e(j.$t("views.application.form.aiModel.label")),1),U[4]||(U[4]=J("span",{class:"color-danger ml-4"},"*",-1))])]),k(F,{disabled:!M.value.modelId,type:"primary",link:"",onClick:U[0]||(U[0]=K=>c(M.value.modelId)),onRefreshForm:v},{default:R(()=>[k(co,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(nh,{onChange:A,onWheel:_,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":U[1]||(U[1]=K=>M.value.modelId=K),placeholder:j.$t("views.application.form.aiModel.placeholder"),options:g.value,onSubmitModel:O,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(I,{prop:"inputVariable",rules:{message:j.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:R(()=>[J("div",BH,[J("div",null,[ot(_e(j.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),U[5]||(U[5]=J("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(io,{ref:"nodeCascaderRef",nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.variable.placeholder"),modelValue:M.value.inputVariable,"onUpdate:modelValue":U[2]||(U[2]=K=>M.value.inputVariable=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(I,{prop:"variableList",rules:{message:j.$t("views.applicationWorkflow.nodes.parameterExtractionNode.extractParameters.label"),trigger:"blur",required:!0}},{default:R(()=>[k(FH,{ref:"ParametersFieldTableRef","node-model":j.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1}),k(Vv,{ref_key:"AIModeParamSettingDialogRef",ref:a,onRefresh:v},null,512)]),_:1},8,["nodeModel"])}}});class GH extends Xo{constructor(t){super(t,WH)}}const zH={type:"parameter-extraction-node",model:qo,view:GH},HH=Object.freeze(Object.defineProperty({__proto__:null,default:zH},Symbol.toStringTag,{value:"Module"})),XH={class:"title-decoration-1 mb-8"},qH={class:"flex-between"},YH={class:"flex align-center"},KH={class:"mr-4"},ZH={class:"flex align-center"},JH={class:"mr-4"},QH=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=Le(),c=I=>I.ctrlKey===!0?(I.preventDefault(),!0):(I.stopPropagation(),!0),v=I=>{var V;I?(V=u.value)==null||V.reset_default(I,a):O({})};function f(I){ke.set(A.nodeModel.properties.nodeData,"prompt",I)}function g(I){ke.set(A.nodeModel.properties.nodeData,"system",I)}const _=`${Ot("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Ot("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Ot("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,b={modelId:"",system:Ot("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:_,dialogueNumber:1,isResult:!1};function O(I){ke.set(A.nodeModel.properties.nodeData,"modelParamsSetting",I)}const x=I=>{var V;I&&((V=u.value)==null||V.open(I,a,M.value.modelParamsSetting))},M=Yn({get:()=>(A.nodeModel.properties.nodeData||ke.set(A.nodeModel.properties,"nodeData",b),A.nodeModel.properties.nodeData),set:I=>{ke.set(A.nodeModel.properties,"nodeData",I)}}),A=e,E=Le(),D=Le(null),j=()=>{var I;return(I=E.value)==null?void 0:I.validate().catch(V=>Promise.reject({node:A.nodeModel,errMessage:V}))},U=t();function F(){var V;const I=r.value==="systemManage"?{modelType:"LLM",workspaceId:(V=U.value)==null?void 0:V.workspaceId}:{modelType:"LLM"};ho({type:"model",systemType:r.value}).getSelectModelList(I).then(Y=>{D.value=ke.groupBy(Y==null?void 0:Y.data,"provider")})}return Hr(()=>{var I;F(),typeof((I=A.nodeModel.properties.nodeData)==null?void 0:I.isResult)>"u"&&gc(A.nodeModel)&&ke.set(A.nodeModel.properties.nodeData,"isResult",!0),ke.set(A.nodeModel,"validate",j)}),(I,V)=>{const Y=Z("AppIcon"),K=Z("el-button"),H=Z("ModelSelect"),B=Z("el-form-item"),z=Z("MdEditorMagnify"),X=Z("el-tooltip"),ee=Z("el-input-number"),pe=Z("el-switch"),ce=Z("el-form"),Pe=Z("el-card");return be(),et(Ho,{nodeModel:I.nodeModel},{default:R(()=>[J("h5",XH,_e(I.$t("views.applicationWorkflow.nodeSetting")),1),k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(ce,{onSubmit:V[7]||(V[7]=nn(()=>{},["prevent"])),model:M.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"questionNodeFormRef",ref:E,"hide-required-asterisk":""},{default:R(()=>[k(B,{label:I.$t("views.application.form.aiModel.label"),prop:"modelId",rules:{required:!0,message:I.$t("views.application.form.aiModel.placeholder"),trigger:"change"}},{label:R(()=>[J("div",qH,[J("div",null,[J("span",null,[ot(_e(I.$t("views.application.form.aiModel.label")),1),V[8]||(V[8]=J("span",{class:"color-danger"},"*",-1))])]),k(K,{type:"primary",link:"",disabled:!M.value.modelId,onClick:V[0]||(V[0]=Ee=>x(M.value.modelId)),onRefreshForm:O},{default:R(()=>[k(Y,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(H,{onChange:v,onWheel:c,teleported:!1,modelValue:M.value.modelId,"onUpdate:modelValue":V[1]||(V[1]=Ee=>M.value.modelId=Ee),placeholder:I.$t("views.application.form.aiModel.placeholder"),options:D.value,onSubmitModel:F,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(B,{label:I.$t("views.application.form.roleSettings.label")},{default:R(()=>[k(z,{title:I.$t("views.application.form.roleSettings.label"),modelValue:M.value.system,"onUpdate:modelValue":V[2]||(V[2]=Ee=>M.value.system=Ee),style:{height:"100px"},onSubmitDialog:g,placeholder:I.$t("views.application.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),k(B,{label:I.$t("views.application.form.prompt.label"),prop:"prompt",rules:{required:!0,message:I.$t("views.application.form.prompt.tooltip"),trigger:"blur"}},{label:R(()=>[J("div",YH,[J("div",KH,[J("span",null,[ot(_e(I.$t("views.application.form.prompt.label")),1),V[9]||(V[9]=J("span",{class:"color-danger"},"*",-1))])]),k(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.application.form.prompt.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(z,{onWheel:c,title:I.$t("views.application.form.prompt.label"),modelValue:M.value.prompt,"onUpdate:modelValue":V[3]||(V[3]=Ee=>M.value.prompt=Ee),style:{height:"150px"},onSubmitDialog:f},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),k(B,{label:I.$t("views.application.form.historyRecord.label")},{default:R(()=>[k(ee,{modelValue:M.value.dialogueNumber,"onUpdate:modelValue":V[4]||(V[4]=Ee=>M.value.dialogueNumber=Ee),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),k(B,{label:I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:V[6]||(V[6]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",ZH,[J("div",JH,[J("span",null,_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(I.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(pe,{size:"small",modelValue:M.value.isResult,"onUpdate:modelValue":V[5]||(V[5]=Ee=>M.value.isResult=Ee)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(Vv,{ref_key:"AIModeParamSettingDialogRef",ref:u,onRefresh:O},null,512)]),_:1},8,["nodeModel"])}}});class eX extends Xo{constructor(t){super(t,QH)}}const tX={type:"question-node",model:qo,view:eX},nX=Object.freeze(Object.defineProperty({__proto__:null,default:tX},Symbol.toStringTag,{value:"Module"})),rX={class:"flex-between"},oX={class:"flex align-center"},iX={class:"mr-4"},aX=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),a={replyType:"content",content:"",fields:[],isResult:!0},r=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:g=>{ke.set(t.nodeModel.properties,"nodeData",g)}});function u(g){ke.set(t.nodeModel.properties.nodeData,"content",g)}const c=Le(),v=Le(),f=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))};return Hr(()=>{var g;typeof((g=t.nodeModel.properties.nodeData)==null?void 0:g.isResult)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"isResult",!0),ke.set(t.nodeModel,"validate",f)}),(g,_)=>{const b=Z("el-option"),O=Z("el-select"),x=Z("MdEditorMagnify"),M=Z("el-form-item"),A=Z("AppIcon"),E=Z("el-tooltip"),D=Z("el-switch"),j=Z("el-form"),U=Z("el-card");return be(),et(Ho,{nodeModel:g.nodeModel},{default:R(()=>[k(U,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(j,{onSubmit:_[5]||(_[5]=nn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:R(()=>[k(M,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:R(()=>[J("div",rX,[J("span",null,_e(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),k(O,{teleported:!1,modelValue:r.value.replyType,"onUpdate:modelValue":_[0]||(_[0]=F=>r.value.replyType=F),size:"small",style:{width:"85px"}},{default:R(()=>[k(b,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(b,{label:g.$t("common.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:R(()=>[r.value.replyType==="content"?(be(),et(x,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":_[1]||(_[1]=F=>r.value.content=F),style:{height:"150px"},onSubmitDialog:u},null,8,["title","modelValue"])):(be(),et(io,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":_[2]||(_[2]=F=>r.value.fields=F)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),k(M,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[4]||(_[4]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",oX,[J("div",iX,[J("span",null,_e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(E,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(A,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(D,{size:"small",modelValue:r.value.isResult,"onUpdate:modelValue":_[3]||(_[3]=F=>r.value.isResult=F)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class lX extends Xo{constructor(t){super(t,aX)}}const uX={type:"reply-node",model:qo,view:lX},sX=Object.freeze(Object.defineProperty({__proto__:null,default:uX},Symbol.toStringTag,{value:"Module"})),cX={class:"flex align-center"},fX={class:"mr-4"},dX={class:"dialog-footer"},pX=Jn({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le({topN:3,similarity:0,maxParagraphCharNumber:5e3}),c=Le(!1),v=Le(!1);eh(c,_=>{_||(u.value={topN:3,similarity:0,maxParagraphCharNumber:5e3})});const f=_=>{u.value={...u.value,...ke.cloneDeep(_)},c.value=!0},g=()=>{var _;(_=r==null?void 0:r.value)==null||_.validate((b,O)=>{b&&(a("refresh",ke.cloneDeep(u.value)),c.value=!1)})};return t({open:f}),(_,b)=>{const O=Z("AppIcon"),x=Z("el-tooltip"),M=Z("el-input-number"),A=Z("el-form-item"),E=Z("el-col"),D=Z("el-row"),j=Z("el-slider"),U=Z("el-form"),F=Z("el-button"),I=Z("el-dialog");return be(),et(I,{"align-center":"",title:_.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":b[5]||(b[5]=V=>c.value=V),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:R(()=>[J("span",dX,[k(F,{onClick:b[3]||(b[3]=nn(V=>c.value=!1,["prevent"]))},{default:R(()=>[ot(_e(_.$t("common.cancel")),1)]),_:1}),k(F,{type:"primary",onClick:b[4]||(b[4]=V=>g()),loading:v.value},{default:R(()=>[ot(_e(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(U,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:u.value},{default:R(()=>[k(D,{gutter:12},{default:R(()=>[k(E,{span:12},{default:R(()=>[k(A,null,{label:R(()=>[J("div",cX,[J("span",fX,"Score "+_e(_.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),k(x,{effect:"dark",content:_.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:R(()=>[k(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:R(()=>[k(M,{modelValue:u.value.similarity,"onUpdate:modelValue":b[0]||(b[0]=V=>u.value.similarity=V),min:0,max:u.value.searchMode==="hybrid"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),k(E,{span:12},{default:R(()=>[k(A,{label:_.$t("views.application.dialog.topReferences")},{default:R(()=>[k(M,{modelValue:u.value.topN,"onUpdate:modelValue":b[1]||(b[1]=V=>u.value.topN=V),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),k(A,{label:_.$t("views.application.dialog.maxCharacters")},{default:R(()=>[k(j,{modelValue:u.value.maxParagraphCharNumber,"onUpdate:modelValue":b[2]||(b[2]=V=>u.value.maxParagraphCharNumber=V),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),hX={class:"flex-between"},vX={class:"flex-between"},mX={class:"w-full"},yX={class:"flex-between"},gX={class:"flex-between"},_X=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Le(),v={reranker_reference_list:[[]],reranker_model_id:"",questionReferenceAddress:[],reranker_setting:{topN:3,similarity:0,maxParagraphCharNumber:5e3},show_knowledge:!1},f=Le(null),g=()=>{var F;(F=c.value)==null||F.open(O.value.reranker_setting)},_=F=>{const I=ke.cloneDeep(u.nodeModel.properties.nodeData.reranker_reference_list);I.splice(F,1),ke.set(u.nodeModel.properties.nodeData,"reranker_reference_list",I)},b=F=>F.ctrlKey===!0?(F.preventDefault(),!0):(F.stopPropagation(),!0),O=Yn({get:()=>(u.nodeModel.properties.nodeData||ke.set(u.nodeModel.properties,"nodeData",v),u.nodeModel.properties.nodeData),set:F=>{ke.set(u.nodeModel.properties,"nodeData",F)}});function x(F){ke.set(u.nodeModel.properties.nodeData,"reranker_setting",F)}const M=t();function A(){var I;const F=r.value==="systemManage"?{modelType:"RERANKER",workspaceId:(I=M.value)==null?void 0:I.workspaceId}:{modelType:"RERANKER"};ho({type:"model",systemType:r.value}).getSelectModelList(F).then(V=>{f.value=ke.groupBy(V==null?void 0:V.data,"provider")})}const E=()=>{const F=ke.cloneDeep(u.nodeModel.properties.nodeData.reranker_reference_list);F.push([]),ke.set(u.nodeModel.properties.nodeData,"reranker_reference_list",F)},D=Le(),j=Le(),U=()=>{var F;return Promise.all([j.value?j.value.validate():Promise.resolve(""),(F=D.value)==null?void 0:F.validate()]).catch(I=>Promise.reject({node:u.nodeModel,errMessage:I}))};return Hr(()=>{A(),ke.set(u.nodeModel,"validate",U)}),(F,I)=>{const V=Z("Plus"),Y=Z("el-icon"),K=Z("el-button"),H=Z("el-form-item"),B=Z("el-col"),z=Z("AppIcon"),X=Z("el-row"),ee=Z("ModelSelect"),pe=Z("el-switch"),ce=Z("el-form"),Pe=Z("el-card");return be(),et(Ho,{nodeModel:F.nodeModel},{default:R(()=>[k(Pe,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(ce,{onSubmit:I[4]||(I[4]=nn(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:D,"hide-required-asterisk":""},{default:R(()=>[k(H,{label:F.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:F.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:R(()=>[J("div",hX,[J("span",null,[ot(_e(F.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),I[5]||(I[5]=J("span",{class:"color-danger"},"*",-1))]),k(K,{onClick:E,link:"",type:"primary"},{default:R(()=>[k(Y,{class:"mr-4"},{default:R(()=>[k(V)]),_:1})]),_:1})])]),default:R(()=>[(be(!0),tn(br,null,Jr(O.value.reranker_reference_list,(Ee,le)=>(be(),et(X,{gutter:8,style:{"margin-bottom":"8px"},key:le,class:"w-full"},{default:R(()=>[k(B,{span:22},{default:R(()=>[k(H,{prop:"reranker_reference_list."+le,rules:{type:"array",required:!0,message:F.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:R(()=>[(be(),et(io,{key:le,nodeModel:F.nodeModel,class:"w-full",placeholder:F.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:O.value.reranker_reference_list[le],"onUpdate:modelValue":ie=>O.value.reranker_reference_list[le]=ie},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),k(B,{span:2},{default:R(()=>[k(K,{link:"",type:"info",onClick:ie=>_(le)},{default:R(()=>[k(z,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),k(H,{label:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:R(()=>[J("div",vX,[J("span",null,_e(F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(K,{type:"primary",link:"",onClick:g},{default:R(()=>[k(z,{iconName:"app-setting"})]),_:1})])]),default:R(()=>[J("div",mX,[k(X,null,{default:R(()=>[k(B,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(" Score "+_e(F.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),k(B,{span:12,class:"lighter"},{default:R(()=>{var Ee;return[ot(_e((Ee=O.value.reranker_setting.similarity)==null?void 0:Ee.toFixed(3)),1)]}),_:1}),k(B,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(_e(F.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),k(B,{span:12,class:"lighter"},{default:R(()=>[ot(_e(O.value.reranker_setting.topN),1)]),_:1}),k(B,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(_e(F.$t("views.applicationWorkflow.nodes.rerankerNode.maxParagraphCharNumber")),1)]),_:1}),k(B,{span:12,class:"lighter"},{default:R(()=>[ot(_e(O.value.reranker_setting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(H,{label:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:R(()=>[J("div",yX,[J("span",null,[ot(_e(F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label")),1),I[6]||(I[6]=J("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:j,nodeModel:F.nodeModel,class:"w-full",placeholder:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),modelValue:O.value.questionReferenceAddress,"onUpdate:modelValue":I[0]||(I[0]=Ee=>O.value.questionReferenceAddress=Ee)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(H,{label:F.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:F.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:R(()=>[J("div",gX,[J("span",null,[ot(_e(F.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),I[7]||(I[7]=J("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(ee,{onWheel:b,teleported:!1,modelValue:O.value.reranker_model_id,"onUpdate:modelValue":I[1]||(I[1]=Ee=>O.value.reranker_model_id=Ee),placeholder:F.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:f.value,onSubmitModel:A,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(H,{label:F.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label"),prop:"show_knowledge",required:"",onClick:I[3]||(I[3]=nn(()=>{},["prevent"]))},{default:R(()=>[k(pe,{size:"small",modelValue:O.value.show_knowledge,"onUpdate:modelValue":I[2]||(I[2]=Ee=>O.value.show_knowledge=Ee)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(pX,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:x},null,512)]),_:1},8,["nodeModel"])}}}),bX=Zd(_X,[["__scopeId","data-v-85717907"]]);class wX extends Xo{constructor(t){super(t,bX)}}const EX={type:"reranker-node",model:qo,view:wX},OX=Object.freeze(Object.defineProperty({__proto__:null,default:EX},Symbol.toStringTag,{value:"Module"})),SX={class:"title-decoration-1 mb-8"},xX={class:"flex-between"},AX={key:0,class:"w-full"},TX={class:"flex align-center",style:{"line-height":"20px"}},MX=["title"],kX={key:1,class:"w-full"},PX={class:"flex-between"},NX={class:"flex align-center"},RX={class:"flex align-center"},CX={class:"w-full"},DX={key:1},jX={class:"flex align-center mb-8"},IX=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=Zi(),n=e,a=Le(),r=[{value:"contain",label:Ot("views.applicationWorkflow.compare.contain")},{value:"not_contain",label:Ot("views.applicationWorkflow.compare.not_contain")},{value:"eq",label:Ot("views.applicationWorkflow.compare.eq")}],u=Yn(()=>t.path.includes("shared")?"systemShare":t.path.includes("resource-management")?"systemManage":t.path.includes("share/")?"workspaceShare":"workspace"),c={knowledge_id_list:[],search_scope_type:"custom",search_scope_source:"knowledge",search_scope_reference:[],search_mode:"auto",question_reference:[],search_condition_type:"AND",search_condition_list:[],knowledge_tags:[]},v=Yn({get:()=>(n.nodeModel.properties.nodeData||ke.set(n.nodeModel.properties,"nodeData",c),n.nodeModel.properties.nodeData),set:U=>{ke.set(n.nodeModel.properties,"nodeData",U)}}),f=Le(),g=Le(),_=Le([]),b=Le(!1);function O(U){const F=n.nodeModel.properties.nodeData.knowledge_id_list.filter(I=>I!==U);ke.set(n.nodeModel.properties.nodeData,"knowledge_id_list",F)}function x(U){ke.set(n.nodeModel.properties.nodeData,"knowledge_id_list",U.map(F=>F.id)),ke.set(n.nodeModel.properties.nodeData,"knowledge_list",U),_.value=U}function M(){g.value&&g.value.open(v.value.knowledge_id_list)}function A(){const U=ke.cloneDeep(v.value.search_condition_list);U.push({key:"",compare:"contain",value:""}),ke.set(v.value,"search_condition_list",U)}function E(U){const F=ke.cloneDeep(v.value.search_condition_list);F.splice(U,1),ke.set(v.value,"search_condition_list",F)}function D(U){if(U.length===0){ke.set(v.value,"knowledge_tags",[]);return}ho({type:"knowledge",systemType:u.value}).getAllTags({knowledge_ids:U},{}).then(F=>{ke.set(v.value,"knowledge_tags",F.data)})}eh(()=>v.value.knowledge_id_list,U=>{D(U)});const j=()=>{var U,F;return Promise.all([(U=a.value)==null?void 0:U.validate(),(F=f.value)==null?void 0:F.validate()]).catch(I=>Promise.reject({node:n.nodeModel,errMessage:I}))};return Hr(()=>{_.value=n.nodeModel.properties.nodeData.knowledge_list,ke.set(n.nodeModel,"validate",j)}),(U,F)=>{const I=Z("el-button"),V=Z("el-option"),Y=Z("el-select"),K=Z("el-text"),H=Z("KnowledgeIcon"),B=Z("Close"),z=Z("el-icon"),X=Z("el-form-item"),ee=Z("el-tooltip"),pe=Z("el-radio"),ce=Z("el-radio-group"),Pe=Z("el-col"),Ee=Z("el-input"),le=Z("el-row"),ie=Z("el-form"),$e=Z("el-card");return be(),et(Ho,{nodeModel:U.nodeModel},{default:R(()=>[J("h5",SX,_e(U.$t("views.applicationWorkflow.nodeSetting")),1),k($e,{shadow:"never",class:"card-never"},{default:R(()=>[k(ie,{onSubmit:F[7]||(F[7]=nn(()=>{},["prevent"])),model:v.value,"label-position":"top","hide-required-asterisk":"","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:f},{default:R(()=>[k(X,{label:U.$t("views.chatLog.selectKnowledge")},{label:R(()=>[J("div",xX,[J("span",null,_e(U.$t("views.applicationWorkflow.nodes.searchDocumentNode.selectKnowledge")),1),J("span",null,[v.value.search_scope_type==="custom"?(be(),et(I,{key:0,type:"primary",link:"",onClick:M},{default:R(()=>[k(co,{iconName:"app-add-outlined"})]),_:1})):En("",!0),k(Y,{teleported:!1,size:"small",modelValue:v.value.search_scope_type,"onUpdate:modelValue":F[0]||(F[0]=Ge=>v.value.search_scope_type=Ge),style:{width:"85px"}},{default:R(()=>[k(V,{label:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.custom"),value:"custom"},null,8,["label"]),k(V,{label:U.$t("views.applicationWorkflow.variable.Referencing"),value:"referencing"},null,8,["label"])]),_:1},8,["modelValue"])])])]),default:R(()=>{var Ge;return[v.value.search_scope_type==="custom"?(be(),tn("div",AX,[((Ge=v.value.knowledge_id_list)==null?void 0:Ge.length)===0?(be(),et(K,{key:0,type:"info"},{default:R(()=>[ot(_e(U.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(be(!0),tn(br,{key:1},Jr(v.value.knowledge_id_list,(ht,Fe)=>{var Nt,Yt,kt;return be(),tn("div",{key:Fe,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[J("div",TX,[k(H,{type:(Nt=Qn(ou)(_.value,ht,"id"))==null?void 0:Nt.type,class:"mr-8",size:20},null,8,["type"]),J("div",{class:"ellipsis",title:(Yt=Qn(ou)(_.value,ht,"id"))==null?void 0:Yt.name},_e((kt=Qn(ou)(_.value,ht,"id"))==null?void 0:kt.name),9,MX)]),k(I,{text:"",onClick:On=>O(ht)},{default:R(()=>[k(z,null,{default:R(()=>[k(B)]),_:1})]),_:2},1032,["onClick"])])}),128))])):(be(),tn("div",kX,[k(X,{prop:"search_scope_reference",rules:{message:U.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:R(()=>[J("div",PX,[J("span",null,[ot(_e(U.$t("views.applicationWorkflow.nodes.searchDocumentNode.select_variable"))+" ",1),F[8]||(F[8]=J("span",{class:"color-danger"},"*",-1))]),J("span",null,[k(Y,{teleported:!1,size:"small",modelValue:v.value.search_scope_source,"onUpdate:modelValue":F[1]||(F[1]=ht=>v.value.search_scope_source=ht),style:{width:"95px"},onChange:F[2]||(F[2]=ht=>v.value.search_scope_reference=[])},{default:R(()=>[k(V,{label:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.knowledge_list"),value:"knowledge"},null,8,["label"]),k(V,{label:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.document_list"),value:"document"},null,8,["label"])]),_:1},8,["modelValue"])])])]),default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:a,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.variable.placeholder"),modelValue:v.value.search_scope_reference,"onUpdate:modelValue":F[3]||(F[3]=ht=>v.value.search_scope_reference=ht)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"])]))]}),_:1},8,["label"]),k(X,{label:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.searchSetting")},{default:R(()=>[k(ce,{modelValue:v.value.search_mode,"onUpdate:modelValue":F[4]||(F[4]=Ge=>v.value.search_mode=Ge)},{default:R(()=>[k(pe,{value:"auto"},{default:R(()=>[J("span",NX,[ot(_e(U.$t("views.applicationWorkflow.nodes.searchDocumentNode.auto"))+" ",1),k(ee,{content:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.autoTooltip"),placement:"top"},{default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])])]),_:1}),v.value.search_scope_type==="custom"?(be(),et(pe,{key:0,value:"custom"},{default:R(()=>[J("span",RX,[ot(_e(U.$t("views.applicationWorkflow.nodes.searchDocumentNode.custom"))+" ",1),k(ee,{c:"",content:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.customTooltip"),placement:"top"},{default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])])]),_:1})):En("",!0)]),_:1},8,["modelValue"])]),_:1},8,["label"]),J("div",CX,[v.value.search_mode==="auto"?(be(),et(X,{key:0,label:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"question_reference",rules:{message:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:a,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:v.value.question_reference,"onUpdate:modelValue":F[5]||(F[5]=Ge=>v.value.question_reference=Ge)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):(be(),tn("div",DX,[J("div",jX,[k(K,{type:"info",class:"lighter",size:"small"},{default:R(()=>[ot(_e(U.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1)]),_:1}),k(Y,{modelValue:v.value.search_condition_type,"onUpdate:modelValue":F[6]||(F[6]=Ge=>v.value.search_condition_type=Ge),size:"small",style:{width:"60px",margin:"0 8px"}},{default:R(()=>[k(V,{label:U.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),k(V,{label:U.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),k(K,{type:"info",class:"lighter",size:"small"},{default:R(()=>[ot(_e(U.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)]),_:1})]),(be(!0),tn(br,null,Jr(v.value.search_condition_list,(Ge,ht)=>(be(),tn("div",{key:ht},[k(le,{gutter:8,class:"mb-8"},{default:R(()=>[k(Pe,{span:8},{default:R(()=>[k(Y,{modelValue:Ge.key,"onUpdate:modelValue":Fe=>Ge.key=Fe,filterable:""},{default:R(()=>[(be(!0),tn(br,null,Jr(v.value.knowledge_tags,Fe=>(be(),et(V,{key:Fe,label:Fe.key,value:Fe.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(Pe,{span:7},{default:R(()=>[k(Y,{modelValue:Ge.compare,"onUpdate:modelValue":Fe=>Ge.compare=Fe},{default:R(()=>[(be(),tn(br,null,Jr(r,Fe=>k(V,{key:Fe.value,value:Fe.value,label:Fe.label},null,8,["value","label"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(Pe,{span:8},{default:R(()=>[k(Ee,{modelValue:Ge.value,"onUpdate:modelValue":Fe=>Ge.value=Fe,placeholder:U.$t("views.applicationWorkflow.nodes.searchDocumentNode.valueMessage",{name:"{变量}"})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),k(Pe,{span:1},{default:R(()=>[k(I,{link:"",onClick:Fe=>E(ht),type:"info",class:"mt-4"},{default:R(()=>[k(co,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(I,{link:"",type:"primary",onClick:A,class:"mt-8"},{default:R(()=>[k(co,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(U.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:1})]))])]),_:1},8,["model"])]),_:1}),k(iM,{ref_key:"AddKnowledgeDialogRef",ref:g,onAddData:x,data:_.value,loading:b.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class LX extends Xo{constructor(t){super(t,IX)}}const $X={type:"search-document-node",model:qo,view:LX},FX=Object.freeze(Object.defineProperty({__proto__:null,default:$X},Symbol.toStringTag,{value:"Module"})),UX={class:"title-decoration-1 mb-8"},VX={class:"flex-between"},BX={class:"w-full"},WX={class:"flex align-center",style:{"line-height":"20px"}},GX=["title"],zX={class:"flex-between"},HX={class:"w-full"},XX=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a={knowledgeIdList:[],knowledgeSetting:{topN:3,similarity:.6,maxParagraphCharNumber:5e3,searchMode:"embedding"},questionReferenceAddress:[],showKnowledge:!1},r=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",a),t.nodeModel.properties.nodeData),set:E=>{ke.set(t.nodeModel.properties,"nodeData",E)}}),u=Le(),c=Le(),v=Le(),f=Le([]),g=Le(!1);function _(E){ke.set(t.nodeModel.properties.nodeData,"knowledgeSetting",E.knowledgeSetting)}const b=()=>{var E;(E=c.value)==null||E.open(r.value,"WORK_FLOW")};function O(E){const D=t.nodeModel.properties.nodeData.knowledgeIdList.filter(j=>j!==E);ke.set(t.nodeModel.properties.nodeData,"knowledgeIdList",D)}function x(E){ke.set(t.nodeModel.properties.nodeData,"knowledgeIdList",E.map(D=>D.id)),f.value=E}function M(){v.value&&v.value.open(r.value.knowledgeIdList)}const A=()=>{var E;return Promise.all([n.value.validate(),(E=u.value)==null?void 0:E.validate()]).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};return Hr(()=>{f.value=t.nodeModel.properties.nodeData.knowledgeList,ke.set(t.nodeModel,"validate",A)}),(E,D)=>{const j=Z("Plus"),U=Z("el-icon"),F=Z("el-button"),I=Z("el-text"),V=Z("Close"),Y=Z("el-form-item"),K=Z("el-col"),H=Z("el-row"),B=Z("el-switch"),z=Z("el-form"),X=Z("el-card");return be(),et(Ho,{nodeModel:E.nodeModel},{default:R(()=>[J("h5",UX,_e(E.$t("views.applicationWorkflow.nodeSetting")),1),k(X,{shadow:"never",class:"card-never"},{default:R(()=>[k(z,{onSubmit:D[3]||(D[3]=nn(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"knowledgeNodeFormRef",ref:u},{default:R(()=>[k(Y,{label:E.$t("views.chatLog.selectKnowledge")},{label:R(()=>[J("div",VX,[J("span",null,_e(E.$t("views.chatLog.selectKnowledge")),1),k(F,{type:"primary",link:"",onClick:M},{default:R(()=>[k(U,null,{default:R(()=>[k(j)]),_:1})]),_:1})])]),default:R(()=>{var ee;return[J("div",BX,[((ee=r.value.knowledgeIdList)==null?void 0:ee.length)===0?(be(),et(I,{key:0,type:"info"},{default:R(()=>[ot(_e(E.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(be(!0),tn(br,{key:1},Jr(r.value.knowledgeIdList,(pe,ce)=>{var Pe,Ee,le;return be(),tn("div",{key:ce,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},[J("div",WX,[k(pI,{type:(Pe=Qn(ou)(f.value,pe,"id"))==null?void 0:Pe.type,class:"mr-8",size:20},null,8,["type"]),J("div",{class:"ellipsis",title:(Ee=Qn(ou)(f.value,pe,"id"))==null?void 0:Ee.name},_e((le=Qn(ou)(f.value,pe,"id"))==null?void 0:le.name),9,GX)]),k(F,{text:"",onClick:ie=>O(pe)},{default:R(()=>[k(U,null,{default:R(()=>[k(V)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),k(Y,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")},{label:R(()=>[J("div",zX,[J("span",null,_e(E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchParam")),1),k(F,{type:"primary",link:"",onClick:b},{default:R(()=>[k(co,{iconName:"app-setting"})]),_:1})])]),default:R(()=>[J("div",HX,[k(H,null,{default:R(()=>[k(K,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(_e(E.$t("views.application.dialog.selectSearchMode")),1)]),_:1}),k(K,{span:12,class:"lighter"},{default:R(()=>[ot(_e(E.$t(Qn(hI)[r.value.knowledgeSetting.searchMode])),1)]),_:1}),k(K,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(_e(E.$t("views.application.dialog.similarityThreshold")),1)]),_:1}),k(K,{span:12,class:"lighter"},{default:R(()=>{var ee;return[ot(_e((ee=r.value.knowledgeSetting.similarity)==null?void 0:ee.toFixed(3)),1)]}),_:1}),k(K,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(_e(E.$t("views.application.dialog.topReferences")),1)]),_:1}),k(K,{span:12,class:"lighter"},{default:R(()=>[ot(_e(r.value.knowledgeSetting.topN),1)]),_:1}),k(K,{span:12,class:"color-secondary lighter"},{default:R(()=>[ot(_e(E.$t("views.application.dialog.maxCharacters")),1)]),_:1}),k(K,{span:12,class:"lighter"},{default:R(()=>[ot(_e(r.value.knowledgeSetting.maxParagraphCharNumber),1)]),_:1})]),_:1})])]),_:1},8,["label"]),k(Y,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.label"),prop:"questionReferenceAddress",rules:{message:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:n,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.searchQuestion.placeholder"),modelValue:r.value.questionReferenceAddress,"onUpdate:modelValue":D[0]||(D[0]=ee=>r.value.questionReferenceAddress=ee)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(Y,{label:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.label"),prop:"showKnowledge",rules:{message:E.$t("views.applicationWorkflow.nodes.searchKnowledgeNode.showKnowledge.requiredMessage"),trigger:"blur",required:!0},onClick:D[2]||(D[2]=nn(()=>{},["prevent"]))},{default:R(()=>[k(B,{size:"small",modelValue:r.value.showKnowledge,"onUpdate:modelValue":D[1]||(D[1]=ee=>r.value.showKnowledge=ee)},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),k(AI,{ref_key:"ParamSettingDialogRef",ref:c,onRefresh:_},null,512),k(iM,{ref_key:"AddKnowledgeDialogRef",ref:v,onAddData:x,data:f.value,loading:g.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class qX extends Xo{constructor(t){super(t,XX)}}const YX={type:"search-knowledge-node",model:qo,view:qX},KX=Object.freeze(Object.defineProperty({__proto__:null,default:YX},Symbol.toStringTag,{value:"Module"})),ZX={class:"flex-between"},JX={class:"dialog-footer"},QX=Jn({__name:"STTModelParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=Zi(),{params:{id:r}}=a,u=Yn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),c=Le(!1),v=Le({}),f=Le(),g=Le(""),_=Le(!1),b=Le([]),O=n,x=(E,D,j)=>{v.value={},g.value=E,ho({type:"model",systemType:u.value}).getModelParamsForm(E,_).then(U=>{var I;b.value=U.data;const F=U.data.map(V=>({[V.field]:V.show_default_value!==!1?V.default_value:void 0})).reduce((V,Y)=>({...V,...Y}),{});j&&Object.keys(j).forEach(V=>{V in F||delete j[V]}),j={...F,...j},(I=f.value)==null||I.render(b.value,j)}),c.value=!0},M=async()=>{var E;(E=f.value)==null||E.validate().then(()=>{O("refresh",v.value),c.value=!1})};return t({open:x,reset_default:(E,D)=>{ho({type:"model",systemType:u.value}).getModelParamsForm(E,_).then(j=>{b.value=j.data;const U=j.data.map(F=>({[F.field]:F.show_default_value!==!1?F.default_value:void 0})).reduce((F,I)=>({...F,...I}),{});O("refresh",U)})}}),(E,D)=>{const j=Z("el-button"),U=Z("el-dialog");return be(),et(U,{"align-center":"",title:E.$t("common.paramSetting"),modelValue:c.value,"onUpdate:modelValue":D[2]||(D[2]=F=>c.value=F),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:R(()=>[J("div",ZX,[J("span",JX,[k(j,{onClick:D[1]||(D[1]=nn(F=>c.value=!1,["prevent"]))},{default:R(()=>[ot(_e(E.$t("common.cancel")),1)]),_:1}),k(j,{type:"primary",onClick:M,loading:_.value},{default:R(()=>[ot(_e(E.$t("common.confirm")),1)]),_:1},8,["loading"])])])]),default:R(()=>[k(vI,{modelValue:v.value,"onUpdate:modelValue":D[0]||(D[0]=F=>v.value=F),model:v.value,"label-position":"top","require-asterisk-position":"right",render_data:b.value,ref_key:"dynamicsFormRef",ref:f},null,8,["modelValue","model","render_data"])]),_:1},8,["title","modelValue"])}}}),eq={class:"title-decoration-1 mb-8"},tq={class:"flex-between w-full"},nq={class:"flex-between w-full"},rq={class:"flex align-center"},oq={class:"mr-4"},iq=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Le(null),v=Le(),f=Le(),g=Le(),_=()=>{var U;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(U=f.value)==null?void 0:U.validate()]).catch(F=>Promise.reject({node:u.nodeModel,errMessage:F}))},b=U=>U.ctrlKey===!0?(U.preventDefault(),!0):(U.stopPropagation(),!0),O={stt_model_id:"",is_result:!0,audioList:[],modelParamsSetting:{}},x=Yn({get:()=>(u.nodeModel.properties.nodeData||ke.set(u.nodeModel.properties,"nodeData",O),u.nodeModel.properties.nodeData),set:U=>{ke.set(u.nodeModel.properties,"nodeData",U)}}),M=()=>{var F;const U=x.value.stt_model_id;if(!U){Xd(Ot("views.application.form.voiceInput.requiredMessage"));return}(F=v.value)==null||F.open(U,a,x.value.modelParamsSetting)},A=U=>{ke.set(u.nodeModel.properties.nodeData,"modelParamsSetting",U)};function E(U){var F;U?(F=v.value)==null||F.reset_default(U,a):A({})}const D=t();function j(){var F;const U=r.value==="systemManage"?{modelType:"STT",workspace_id:(F=D.value)==null?void 0:F.workspace_id}:{modelType:"STT"};ho({type:"model",systemType:r.value}).getSelectModelList(U).then(I=>{c.value=ke.groupBy(I==null?void 0:I.data,"provider")})}return Hr(()=>{j(),ke.set(u.nodeModel,"validate",_)}),(U,F)=>{const I=Z("AppIcon"),V=Z("el-button"),Y=Z("el-form-item"),K=Z("el-tooltip"),H=Z("el-switch"),B=Z("el-form"),z=Z("el-card");return be(),et(Ho,{"node-model":U.nodeModel},{default:R(()=>[J("h5",eq,_e(U.$t("views.applicationWorkflow.nodeSetting")),1),k(z,{shadow:"never",class:"card-never"},{default:R(()=>[k(B,{onSubmit:F[4]||(F[4]=nn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:R(()=>[k(Y,{label:U.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:U.$t("views.application.form.voiceInput.placeholder"),trigger:"change"}},{label:R(()=>[J("div",tq,[J("div",null,[J("span",null,[ot(_e(U.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),F[5]||(F[5]=J("span",{class:"color-danger"},"*",-1))])]),k(V,{type:"primary",link:"",onClick:M,disabled:!x.value.stt_model_id,class:"mr-4"},{default:R(()=>[k(I,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(nh,{onWheel:b,teleported:!1,onChange:E,modelValue:x.value.stt_model_id,"onUpdate:modelValue":F[0]||(F[0]=X=>x.value.stt_model_id=X),placeholder:U.$t("views.application.form.voiceInput.placeholder"),options:c.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(Y,{label:U.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audioList",rules:{message:U.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:R(()=>[J("div",nq,[J("div",null,[J("span",null,[ot(_e(U.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),F[6]||(F[6]=J("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:g,nodeModel:U.nodeModel,class:"w-full",placeholder:U.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:x.value.audioList,"onUpdate:modelValue":F[1]||(F[1]=X=>x.value.audioList=X)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(Y,{label:U.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:F[3]||(F[3]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",rq,[J("div",oq,[J("span",null,_e(U.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(U.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(I,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(H,{size:"small",modelValue:x.value.is_result,"onUpdate:modelValue":F[2]||(F[2]=X=>x.value.is_result=X)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(QX,{ref_key:"STTModeParamSettingDialogRef",ref:v,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});class aq extends Xo{constructor(t){super(t,iq)}}const lq={type:"speech-to-text-node",model:qo,view:aq},uq=Object.freeze(Object.defineProperty({__proto__:null,default:lq},Symbol.toStringTag,{value:"Module"})),sq={class:"title-decoration-1 mb-8"},cq={class:"break-all"},fq={class:"title-decoration-1 mb-8"},dq={class:"break-all"},pq=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Le(!1),a=[{label:Ot("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Ot("views.application.form.historyRecord.label"),value:"historyContext"},{label:Ot("chat.chatId"),value:"chatId"},{label:Ot("chat.chatUserId"),value:"chatUserId"},{label:Ot("chat.chatUserType"),value:"chatUserType"},{label:Ot("chat.chatUser"),value:"chatUser"}],r=()=>{const f=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").map(_=>ke.cloneDeep(_.properties.user_input_field_list)).reduce((_,b)=>[..._,...b],[]).map(_=>_.label&&_.label.input_type==="TooltipLabel"?{label:_.label.label,value:_.field||_.variable}:{label:_.label||_.name,value:_.field||_.variable}),g=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").map(_=>ke.cloneDeep(_.properties.api_input_field_list)).reduce((_,b)=>[..._,...b],[]).map(_=>({label:_.name||_.variable,value:_.variable}));return[...f,...g]},u=()=>{const f=r();ke.set(t.nodeModel.properties.config,"globalFields",[...a,...f])},c=()=>{const f=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>ke.cloneDeep(g.properties.chat_input_field_list)).reduce((g,_)=>[...g,..._],[]).map(g=>({label:g.label,value:g.field}));ke.set(t.nodeModel.properties.config,"chatFields",f)};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",u),t.nodeModel.graphModel.eventCenter.on("chatFieldList",c);const v=()=>{let f=ke.cloneDeep(t.nodeModel.properties.config.fields);const g=t.nodeModel.graphModel.nodes.filter(b=>b.id==="base-node").filter(b=>b.properties.nodeData.fileUploadEnable).map(b=>ke.cloneDeep(b.properties.nodeData.fileUploadSetting)).filter(b=>b);if(f=f.filter(b=>b.value!=="image"&&b.value!=="document"&&b.value!=="audio"&&b.value!=="video"&&b.value!=="other"),g.length===0){ke.set(t.nodeModel.properties.config,"fields",f);return}const _=[];g[0].document&&_.push({label:Ot("common.fileUpload.document"),value:"document"}),g[0].image&&_.push({label:Ot("common.fileUpload.image"),value:"image"}),g[0].audio&&_.push({label:Ot("common.fileUpload.audio"),value:"audio"}),g[0].video&&_.push({label:Ot("common.fileUpload.video"),value:"video"}),g[0].other&&_.push({label:Ot("common.fileUpload.other"),value:"other"}),ke.set(t.nodeModel.properties.config,"fields",[...f,..._])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",v),Hr(()=>{c(),u(),v()}),(f,g)=>{const _=Z("el-button"),b=Z("el-tooltip");return be(),et(Ho,{nodeModel:f.nodeModel},{default:R(()=>[J("h5",sq,_e(f.$t("views.applicationWorkflow.variable.global")),1),(be(!0),tn(br,null,Jr(f.nodeModel.properties.config.globalFields,(O,x)=>(be(),tn("div",{key:x,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[0]||(g[0]=M=>n.value=!0),onMouseleave:g[1]||(g[1]=M=>n.value=!1)},[J("span",cq,_e(O.label)+" "+_e("{"+O.value+"}"),1),n.value===!0?(be(),et(b,{key:0,effect:"dark",content:f.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(_,{link:"",onClick:M=>Qn(mw)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:R(()=>[k(co,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):En("",!0)],32))),128)),f.nodeModel.properties.config.chatFields?(be(),tn(br,{key:0},[J("h5",fq,_e(f.$t("views.applicationWorkflow.variable.chat")),1),(be(!0),tn(br,null,Jr(f.nodeModel.properties.config.chatFields?f.nodeModel.properties.config.chatFields:[],(O,x)=>(be(),tn("div",{key:x,class:"flex-between border-r-6 p-8-12 mb-8 layout-bg lighter",onMouseenter:g[2]||(g[2]=M=>n.value=!0),onMouseleave:g[3]||(g[3]=M=>n.value=!1)},[J("span",dq,_e(O.label)+" "+_e("{"+O.value+"}"),1),n.value===!0?(be(),et(b,{key:0,effect:"dark",content:f.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:R(()=>[k(_,{link:"",onClick:M=>Qn(mw)(`{{chat.${O.value}}}`),style:{padding:"0"}},{default:R(()=>[k(co,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):En("",!0)],32))),128))],64)):En("",!0)]),_:1},8,["nodeModel"])}}});class hq extends Xo{constructor(t){super(t,pq)}}const vq={type:"start-node",model:qo,view:hq},mq=Object.freeze(Object.defineProperty({__proto__:null,default:vq},Symbol.toStringTag,{value:"Module"})),yq={class:"title-decoration-1 mb-8"},gq={class:"flex-between w-full"},_q={class:"flex-between w-full"},bq={class:"flex align-center"},wq={class:"mr-4"},Eq=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=$u("getApplicationDetail"),n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=e,c=Le(),v=Le(null),f=Le(),g=Le(),_=()=>{var j;return Promise.all([g.value?g.value.validate():Promise.resolve(""),(j=f.value)==null?void 0:j.validate()]).catch(U=>Promise.reject({node:u.nodeModel,errMessage:U}))},b=j=>j.ctrlKey===!0?(j.preventDefault(),!0):(j.stopPropagation(),!0),O={ttsModelId:"",isResult:!0,content_list:[],modelParamsSetting:{}},x=Yn({get:()=>(u.nodeModel.properties.nodeData||ke.set(u.nodeModel.properties,"nodeData",O),u.nodeModel.properties.nodeData),set:j=>{ke.set(u.nodeModel.properties,"nodeData",j)}}),M=t();function A(){var U;const j=r.value==="systemManage"?{modelType:"TTS",workspaceId:(U=M.value)==null?void 0:U.workspaceId}:{modelType:"TTS"};ho({type:"model",systemType:r.value}).getSelectModelList(j).then(F=>{v.value=ke.groupBy(F==null?void 0:F.data,"provider")})}const E=()=>{var U;const j=x.value.ttsModelId;if(!j){Xd(Ot("views.application.form.voicePlay.requiredMessage"));return}(U=c.value)==null||U.open(j,a,x.value.modelParamsSetting)},D=j=>{x.value.modelParamsSetting=j};return Hr(()=>{A(),ke.set(u.nodeModel,"validate",_)}),(j,U)=>{const F=Z("AppIcon"),I=Z("el-button"),V=Z("ModelSelect"),Y=Z("el-form-item"),K=Z("el-tooltip"),H=Z("el-switch"),B=Z("el-form"),z=Z("el-card");return be(),et(Ho,{"node-model":j.nodeModel},{default:R(()=>[J("h5",yq,_e(j.$t("views.applicationWorkflow.nodeSetting")),1),k(z,{shadow:"never",class:"card-never"},{default:R(()=>[k(B,{onSubmit:U[4]||(U[4]=nn(()=>{},["prevent"])),model:x.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:f,"hide-required-asterisk":""},{default:R(()=>[k(Y,{label:j.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"ttsModelId",rules:{required:!0,message:j.$t("views.application.form.voicePlay.placeholder"),trigger:"change"}},{label:R(()=>[J("div",gq,[J("div",null,[J("span",null,[ot(_e(j.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),U[5]||(U[5]=J("span",{class:"color-danger"},"*",-1))])]),k(I,{type:"primary",link:"",onClick:E,disabled:!x.value.ttsModelId,class:"mr-4"},{default:R(()=>[k(F,{iconName:"app-setting"})]),_:1},8,["disabled"])])]),default:R(()=>[k(V,{onWheel:b,teleported:!1,modelValue:x.value.ttsModelId,"onUpdate:modelValue":U[0]||(U[0]=X=>x.value.ttsModelId=X),placeholder:j.$t("views.application.form.voicePlay.placeholder"),options:v.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),k(Y,{prop:"content_list",label:j.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:j.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:R(()=>[J("div",_q,[J("div",null,[J("span",null,[ot(_e(j.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),U[6]||(U[6]=J("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(io,{ref_key:"nodeCascaderRef",ref:g,nodeModel:j.nodeModel,class:"w-full",placeholder:j.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:x.value.content_list,"onUpdate:modelValue":U[1]||(U[1]=X=>x.value.content_list=X)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),k(Y,{label:j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:U[3]||(U[3]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",bq,[J("div",wq,[J("span",null,_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(j.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(F,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(H,{size:"small",modelValue:x.value.isResult,"onUpdate:modelValue":U[2]||(U[2]=X=>x.value.isResult=X)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),k(oM,{ref_key:"TTSModeParamSettingDialogRef",ref:c,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});class Oq extends Xo{constructor(t){super(t,Eq)}}const Sq={type:"text-to-speech-node",model:qo,view:Oq},xq=Object.freeze(Object.defineProperty({__proto__:null,default:Sq},Symbol.toStringTag,{value:"Module"})),Aq={class:"title-decoration-1 mb-16"},Tq={class:"lighter mb-8"},Mq={key:0},kq={class:"flex-between"},Pq={class:"flex"},Nq={class:"flex"},Rq={key:0,class:"color-danger"},Cq={class:"flex align-center"},Dq={class:"mr-4"},jq=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Zi(),a=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),r=Le(),u={inputFieldList:[],isResult:!1},c=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:_=>{ke.set(t.nodeModel.properties,"nodeData",_)}}),v=Le(),f=()=>{var _;return(_=v.value)==null?void 0:_.validate().catch(b=>Promise.reject({node:t.nodeModel,errMessage:b}))},g=()=>{if(!t.nodeModel.properties.nodeData.toolLibId){ke.set(t.nodeModel.properties,"status",500);return}ho({type:"tool",systemType:a.value}).getToolById(t.nodeModel.properties.nodeData.toolLibId).then(_=>{const b=t.nodeModel.properties.nodeData.inputFieldList,O=_.data.inputFieldList.map(x=>{const M=b.find(A=>A.name==x.name);return M&&M.source==x.source?{...x,value:JSON.parse(JSON.stringify(M.value))}:{...x,value:x.source=="reference"?[]:""}});ke.set(t.nodeModel.properties.nodeData,"inputFieldList",O),ke.set(t.nodeModel.properties,"status",_.data.isActive?200:500)}).catch(()=>{ke.set(t.nodeModel.properties,"status",500)})};return Hr(()=>{var _;typeof((_=t.nodeModel.properties.nodeData)==null?void 0:_.isResult)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"isResult",!0),g(),ke.set(t.nodeModel,"validate",f)}),(_,b)=>{const O=Z("el-tag"),x=Z("el-option"),M=Z("el-select"),A=Z("el-input"),E=Z("el-form-item"),D=Z("el-text"),j=Z("el-card"),U=Z("el-tooltip"),F=Z("el-switch"),I=Z("el-form");return be(),et(Ho,{nodeModel:_.nodeModel},{default:R(()=>[J("h5",Aq,_e(_.$t("views.applicationWorkflow.nodeSetting")),1),J("h5",Tq,_e(_.$t("common.param.inputParam")),1),k(I,{onSubmit:b[2]||(b[2]=nn(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:v,model:c.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:R(()=>[k(j,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:R(()=>{var V;return[((V=c.value.inputFieldList)==null?void 0:V.length)>0?(be(),tn("div",Mq,[(be(!0),tn(br,null,Jr(c.value.inputFieldList,(Y,K)=>(be(),et(E,{key:Y.name,label:Y.name,prop:"inputFieldList."+K+".value",rules:{required:Y.isRequired,message:Y.source==="reference"?_.$t("views.tool.form.param.selectPlaceholder"):_.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:R(()=>[J("div",kq,[J("div",Pq,[J("span",Nq,[k(mI,{content:Y.name,style:{"max-width":"130px"}},{default:R(()=>[ot(_e(Y.name),1)]),_:2},1032,["content"]),Y.isRequired?(be(),tn("span",Rq,"*")):En("",!0)]),k(O,{type:"info",class:"info-tag ml-4"},{default:R(()=>[ot(_e(Y.type),1)]),_:2},1024)]),k(M,{teleported:!1,modelValue:Y.source,"onUpdate:modelValue":H=>Y.source=H,size:"small",style:{width:"85px"}},{default:R(()=>[k(x,{label:_.$t("common.reference"),value:"reference"},null,8,["label"]),k(x,{label:_.$t("common.custom"),value:"content"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:R(()=>[Y.source==="reference"?(be(),et(io,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:_.nodeModel,class:"w-full",placeholder:_.$t("views.tool.form.param.selectPlaceholder"),modelValue:Y.value,"onUpdate:modelValue":H=>Y.value=H},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(be(),et(A,{key:1,modelValue:Y.value,"onUpdate:modelValue":H=>Y.value=H,placeholder:_.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(be(),et(D,{key:1,type:"info"},{default:R(()=>[ot(_e(_.$t("common.noData")),1)]),_:1}))]}),_:1}),k(E,{label:_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:b[1]||(b[1]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",Cq,[J("div",Dq,[J("span",null,_e(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(U,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(_.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(co,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(F,{size:"small",modelValue:c.value.isResult,"onUpdate:modelValue":b[0]||(b[0]=V=>c.value.isResult=V)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class Iq extends Xo{constructor(t){super(t,jq)}}const Lq={type:"tool-lib-node",model:qo,view:Iq},$q=Object.freeze(Object.defineProperty({__proto__:null,default:Lq},Symbol.toStringTag,{value:"Module"})),Fq={class:"title-decoration-1 mb-16"},Uq={class:"flex-between"},Vq={class:"lighter mb-8"},Bq={key:0},Wq={class:"flex-between"},Gq={class:"flex"},zq={class:"flex"},Hq={key:0,class:"color-danger"},Xq={class:"lighter mb-8"},qq={key:0,class:"mb-8"},Yq={class:"flex align-center"},Kq={class:"mr-4"},Zq=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),a=Le(),r=Le(),u={code:"",inputFieldList:[],isResult:!1},c=Le(null),v=Le(!1),f=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:A=>{ke.set(t.nodeModel.properties,"nodeData",A)}}),g=Le(),_=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(E=>Promise.reject({node:t.nodeModel,errMessage:E}))};function b(A){ke.set(t.nodeModel.properties.nodeData,"code",A)}function O(A,E){typeof E<"u"&&(c.value=E),a.value.open(A)}function x(A){const E=ke.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList);E.splice(A,1),ke.set(t.nodeModel.properties.nodeData,"inputFieldList",E)}function M(A){const E=ke.cloneDeep(t.nodeModel.properties.nodeData.inputFieldList),D={...A,value:A.source==="reference"?[]:""};c.value!==null?E.splice(c.value,1,D):E.push(D),ke.set(t.nodeModel.properties.nodeData,"inputFieldList",E),c.value=null}return Hr(()=>{var A;typeof((A=t.nodeModel.properties.nodeData)==null?void 0:A.isResult)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"isResult",!0),ke.set(t.nodeModel,"validate",_),setTimeout(()=>{v.value=!0},100)}),(A,E)=>{const D=Z("Plus"),j=Z("el-icon"),U=Z("el-button"),F=Z("auto-tooltip"),I=Z("el-tag"),V=Z("AppIcon"),Y=Z("el-input"),K=Z("el-form-item"),H=Z("el-text"),B=Z("el-card"),z=Z("CodemirrorEditor"),X=Z("el-tooltip"),ee=Z("el-switch"),pe=Z("el-form");return be(),et(Ho,{nodeModel:A.nodeModel},{default:R(()=>[J("h5",Fq,_e(A.$t("views.applicationWorkflow.nodeSetting")),1),J("div",Uq,[J("h5",Vq,_e(A.$t("common.param.inputParam")),1),k(U,{link:"",type:"primary",onClick:E[0]||(E[0]=ce=>O())},{default:R(()=>[k(j,{class:"mr-4"},{default:R(()=>[k(D)]),_:1}),ot(" "+_e(A.$t("common.add")),1)]),_:1})]),k(pe,{onSubmit:E[4]||(E[4]=nn(()=>{},["prevent"])),ref_key:"ToolNodeFormRef",ref:g,model:f.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:R(()=>[k(B,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:R(()=>{var ce;return[((ce=f.value.inputFieldList)==null?void 0:ce.length)>0?(be(),tn("div",Bq,[(be(!0),tn(br,null,Jr(f.value.inputFieldList,(Pe,Ee)=>(be(),et(K,{key:Ee,label:Pe.name,prop:"inputFieldList."+Ee+".value",rules:{required:Pe.isRequired,message:Pe.source==="reference"?A.$t("views.tool.form.param.selectPlaceholder"):A.$t("views.tool.form.param.inputPlaceholder"),trigger:"blur"}},{label:R(()=>[J("div",Wq,[J("div",Gq,[J("span",zq,[k(F,{content:Pe.name,style:{"max-width":"130px"}},{default:R(()=>[ot(_e(Pe.name),1)]),_:2},1032,["content"]),Pe.isRequired?(be(),tn("span",Hq,"*")):En("",!0)]),k(I,{type:"info",class:"info-tag ml-4"},{default:R(()=>[ot(_e(Pe.type),1)]),_:2},1024)]),J("div",null,[k(U,{text:"",onClick:nn(le=>O(Pe,Ee),["stop"])},{default:R(()=>[k(V,{iconName:"app-edit"})]),_:2},1032,["onClick"]),k(U,{text:"",onClick:le=>x(Ee),style:{"margin-left":"4px !important"}},{default:R(()=>[k(V,{iconName:"app-delete"})]),_:2},1032,["onClick"])])])]),default:R(()=>[Pe.source==="reference"?(be(),et(io,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.tool.form.param.selectPlaceholder"),modelValue:Pe.value,"onUpdate:modelValue":le=>Pe.value=le,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(be(),et(Y,{key:1,modelValue:Pe.value,"onUpdate:modelValue":le=>Pe.value=le,placeholder:A.$t("views.tool.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(be(),et(H,{key:1,type:"info"},{default:R(()=>[ot(_e(A.$t("common.noData")),1)]),_:1}))]}),_:1}),J("h5",Xq,_e(A.$t("views.tool.form.param.code")),1),v.value?(be(),tn("div",qq,[k(z,{title:A.$t("views.tool.form.param.code"),modelValue:f.value.code,"onUpdate:modelValue":E[1]||(E[1]=ce=>f.value.code=ce),onWheel:n,style:{height:"130px !important"},onSubmitDialog:b},null,8,["title","modelValue"])])):En("",!0),k(K,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:E[3]||(E[3]=nn(()=>{},["prevent"]))},{label:R(()=>[J("div",Yq,[J("div",Kq,[J("span",null,_e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),k(X,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:R(()=>[ot(_e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:R(()=>[k(V,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:R(()=>[k(ee,{size:"small",modelValue:f.value.isResult,"onUpdate:modelValue":E[2]||(E[2]=ce=>f.value.isResult=ce)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),k(t8,{ref_key:"FieldFormDialogRef",ref:a,onRefresh:M},null,512)]),_:1},8,["nodeModel"])}}});class Jq extends Xo{constructor(t){super(t,Zq)}}const Qq={type:"tool-node",model:qo,view:Jq},eY=Object.freeze(Object.defineProperty({__proto__:null,default:Qq},Symbol.toStringTag,{value:"Module"})),tY={class:"title-decoration-1 mb-8"},nY={class:"flex-between lighter"},rY={key:0,class:"mt-8"},oY=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={isResult:!0,labelName:"",branch:[{id:fl(),type:"选项 1",option:""}]},a=(_,b,O)=>{const M=ke.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]).map(A=>A.id===b.id?{...A,height:_.height,index:O}:A);ke.set(t.nodeModel.properties,"branchConditionList",M),f(t.nodeModel.properties.nodeData.branch,!0)},r=Yn({get:()=>(t.nodeModel.properties.nodeData||(ke.set(t.nodeModel.properties,"nodeData",n),f(n.branch,!0)),t.nodeModel.properties.nodeData),set:_=>{ke.set(t.nodeModel.properties,"nodeData",_)}}),u=Le();Le();const c=()=>{var b;const _=[(b=u.value)==null?void 0:b.validate()];return Promise.all(_).catch(O=>Promise.reject({node:t.nodeModel,errMessage:O}))};function v(){const _=ke.cloneDeep(t.nodeModel.properties.nodeData.branch),b={type:"选项 "+(_.length+1),id:fl(),option:"选项 "+(_.length+1)};_.splice(_.length,0,b),f(_,!0),ke.set(t.nodeModel.properties.nodeData,"branch",_)}function f(_,b){const O=ke.cloneDeep(t.nodeModel.properties.branchConditionList?t.nodeModel.properties.branchConditionList:[]),x=_.map((M,A)=>{const E=O.find(D=>D.id===M.id);if(E)return{index:A,height:E.height,id:M.id};if(b)return{index:A,height:100,id:M.id}}).filter(M=>M);ke.set(t.nodeModel.properties,"branchConditionList",x),t.nodeModel.refreshBranch()}function g(_){const b=ke.cloneDeep(t.nodeModel.properties.nodeData.branch);if(b[_].conditions.length===0){const x=b.splice(_,1).map(M=>t.nodeModel.id+"_"+M.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(M=>x.includes(M.sourceAnchorId)).map(M=>M.id)),f(b,!1),b.forEach((M,A)=>{M.type="选项 "+(A+1)})}ke.set(t.nodeModel.properties.nodeData,"branch",b)}return Hr(()=>{ke.set(t.nodeModel,"validate",c)}),(_,b)=>{const O=Z("el-form-item"),x=Z("el-input"),M=Z("el-col"),A=Z("Delete"),E=Z("el-icon"),D=Z("el-button"),j=Z("el-row"),U=Z("el-card"),F=Z("Plus"),I=Z("el-form"),V=Hd("resize");return be(),et(Ho,{nodeModel:_.nodeModel},{default:R(()=>[J("h5",tY,_e(_.$t("views.applicationWorkflow.nodeSetting")),1),k(U,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(I,{model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"UserSelectNodeFormRef",ref:u,onSubmit:b[1]||(b[1]=nn(()=>{},["prevent"]))},{default:R(()=>[k(O,{label:_.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},{default:R(()=>[k(pc,{title:_.$t("views.applicationWorkflow.nodes.userSelectNode.caption"),modelValue:r.value.labelName,"onUpdate:modelValue":b[0]||(b[0]=Y=>r.value.labelName=Y),style:{height:"100px"},placeholder:_.$t("views.applicationWorkflow.nodes.userSelectNode.caption")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),(be(!0),tn(br,null,Jr(r.value.branch,(Y,K)=>va((be(),et(U,{key:Y.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:R(()=>[J("div",nY,_e(Y.type),1),K!==r.value.branch.length?(be(),tn("div",rY,[k(j,{gutter:8},{default:R(()=>[k(M,{span:23},{default:R(()=>[k(O,{prop:"branch."+K+".option",rules:{required:!0,message:_.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage"),trigger:"blur"}},{default:R(()=>[k(x,{modelValue:Y.option,"onUpdate:modelValue":H=>Y.option=H,placeholder:_.$t("views.applicationWorkflow.nodes.userSelectNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(M,{span:1},{default:R(()=>[k(D,{disabled:K===0,link:"",type:"info",class:"mt-4",onClick:H=>g(K)},{default:R(()=>[k(E,null,{default:R(()=>[k(A)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])):En("",!0)]),_:2},1024)),[[V,H=>a(H,Y,K)]])),128)),k(D,{link:"",type:"primary",onClick:v},{default:R(()=>[k(E,{class:"mr-4"},{default:R(()=>[k(F)]),_:1}),ot(" "+_e(_.$t("views.applicationWorkflow.nodes.userSelectNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class iY extends Xo{constructor(t){super(t,oY)}}const aY=(e,t)=>e.filter((n,a)=>a<t).map(n=>n.height+8).reduce((n,a)=>n+a,0);class lY extends qo{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:a,width:r,height:u,properties:{branchConditionList:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,f=[];if(f.push({x:n-r/2+10,y:v?a:a-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],b=aY(c,g);f.push({x:n+r/2-10,y:v?a-u/2+275+b+_.height/2:a-15,id:`${t}_${_.id}_right`,type:"right"})}return f}}const uY={type:"user-select-node",model:lY,view:iY},sY=Object.freeze(Object.defineProperty({__proto__:null,default:uY},Symbol.toStringTag,{value:"Module"})),cY={class:"dialog-footer"},fY=Jn({__name:"GroupFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le(!1),c=Le(!1),v=Le(null),f=Le({field:"",label:""}),g=fh({label:[{required:!0,message:Ot("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"}],field:[{required:!0,message:Ot("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),_=Le(!1),b=(M,A)=>{M&&(f.value=ke.cloneDeep(M),c.value=!0,v.value=A),_.value=!0},O=()=>{_.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},x=async M=>{M&&await M.validate(A=>{A&&a("refresh",f.value,v.value)})};return t({open:b,close:O}),(M,A)=>{const E=Z("el-input"),D=Z("el-form-item"),j=Z("el-form"),U=Z("el-button"),F=Z("el-dialog");return be(),et(F,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableAggregationNode.editGroup"):M.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup"),modelValue:_.value,"onUpdate:modelValue":A[3]||(A[3]=I=>_.value=I),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":O,"append-to-body":""},{footer:R(()=>[J("span",cY,[k(U,{onClick:nn(O,["prevent"])},{default:R(()=>[ot(_e(M.$t("common.cancel")),1)]),_:1}),k(U,{type:"primary",onClick:A[2]||(A[2]=I=>x(r.value)),loading:u.value},{default:R(()=>[ot(_e(c.value?M.$t("common.save"):M.$t("common.add")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(j,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right"},{default:R(()=>[k(D,{label:M.$t("common.variable"),required:!0,prop:"field",rules:g.field},{default:R(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":A[0]||(A[0]=I=>f.value.field=I),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),k(D,{label:M.$t("dynamicsForm.paramForm.name.label"),required:!0,prop:"label",rules:g.label},{default:R(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":A[1]||(A[1]=I=>f.value.label=I),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),dY={class:"title-decoration-1 mb-8"},pY={class:"flex-between"},hY={class:"flex-between mb-12"},vY={class:"font-bold"},mY={class:"flex align-center",style:{"margin-right":"-3px"}},yY=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(),r=Le(),u={strategy:"first_non_null",groupList:[{id:fl(),label:"Group1",field:"Group1",variableList:[{v_id:fl(),variable:[]}]}]},c=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",u),t.nodeModel.properties.nodeData),set:E=>{ke.set(t.nodeModel.properties,"nodeData",E)}}),v=Le([]);function f(E,D){let j=null;E&&D!==void 0&&(j={field:E.field,label:E.label}),r.value.open(j,D)}function g(E,D){for(let U=0;U<v.value.length;U++)if(v.value[U].field===E.field&&D!==U){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+E.field);return}[void 0,null].includes(D)?(v.value.push(E),M(E)):(v.value.splice(D,1,E),_(E,D)),r.value.close();const j=[...v.value.map(U=>({label:U.label,value:U.field}))];ke.set(t.nodeModel.properties.config,"fields",j)}const _=(E,D)=>{const j=ke.cloneDeep(c.value.groupList);j[D].field=E.field,j[D].label=E.label,c.value.groupList=j},b=E=>{const D=ke.cloneDeep(c.value.groupList);D.splice(E,1),c.value.groupList=D,v.value.splice(E,1);const j=D.map(U=>({label:U.label,value:U.field}));ke.set(t.nodeModel.properties.config,"fields",j)},O=E=>{const D=ke.cloneDeep(c.value.groupList);D[E].variableList.push({v_id:fl(),variable:[]}),c.value.groupList=D},x=(E,D)=>{const j=ke.cloneDeep(c.value.groupList);j[E].variableList.splice(D,1),c.value.groupList=j},M=E=>{const D=ke.cloneDeep(c.value.groupList);D.push({id:fl(),field:E.field,label:E.label,variableList:[{v_id:fl(),variable:[]}]}),c.value.groupList=D},A=async()=>{var D;const E=[...a.value.map(j=>j.validate()),(D=n.value)==null?void 0:D.validate()];return Promise.all(E).catch(j=>Promise.reject({node:t.nodeModel,errMessage:j}))};return Hr(()=>{var D;typeof((D=t.nodeModel.properties.nodeData)==null?void 0:D.is_result)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"is_result",!0),ke.set(t.nodeModel,"validate",A),t.nodeModel.properties.nodeData.groupList&&(v.value=c.value.groupList.map(j=>({label:j.label,field:j.field})));const E=c.value.groupList.map(j=>({label:j.label,value:j.field}));ke.set(t.nodeModel.properties.config,"fields",E)}),(E,D)=>{const j=Z("el-option"),U=Z("el-select"),F=Z("el-form-item"),I=Z("EditPen"),V=Z("el-icon"),Y=Z("el-button"),K=Z("el-col"),H=Z("el-row"),B=Z("el-card"),z=Z("el-form");return be(),et(Ho,{nodeModel:E.nodeModel},{default:R(()=>[J("h5",dY,_e(E.$t("views.applicationWorkflow.nodeSetting")),1),k(z,{onSubmit:D[2]||(D[2]=nn(()=>{},["prevent"])),model:c.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableAggregationRef",ref:n,"hide-required-asterisk":""},{default:R(()=>[k(F,{label:E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"),rules:{required:!0,trigger:"change"}},{label:R(()=>[J("div",pY,[J("div",null,[J("span",null,[ot(_e(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.Strategy"))+" ",1),D[3]||(D[3]=J("span",{class:"color-danger"},"*",-1))])])])]),default:R(()=>[k(U,{modelValue:c.value.strategy,"onUpdate:modelValue":D[0]||(D[0]=X=>c.value.strategy=X)},{default:R(()=>[k(j,{label:Qn(Ot)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder"),value:"first_non_null"},null,8,["label"]),k(j,{label:Qn(Ot)("views.applicationWorkflow.nodes.variableAggregationNode.placeholder1"),value:"variable_to_json"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),(be(!0),tn(br,null,Jr(c.value.groupList,(X,ee)=>(be(),tn("div",{key:X.id,class:"mb-8"},[k(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[J("div",hY,[J("span",vY,_e(X.label),1),J("div",mY,[k(Y,{onClick:pe=>f(X,ee),link:""},{default:R(()=>[k(V,null,{default:R(()=>[k(I)]),_:1})]),_:2},1032,["onClick"]),k(Y,{onClick:pe=>b(ee),link:"",disabled:c.value.groupList.length<=1},{default:R(()=>[k(co,{iconName:"app-delete"})]),_:2},1032,["onClick","disabled"])])]),(be(!0),tn(br,null,Jr(X.variableList,(pe,ce)=>(be(),tn("div",{key:pe.v_id},[k(H,null,{default:R(()=>[k(K,{span:22},{default:R(()=>[k(F,{prop:`groupList.${ee}.variableList.${ce}.variable`,rules:{type:"array",required:!0,message:E.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:R(()=>[k(io,{ref_for:!0,ref_key:"nodeCascaderRef",ref:a,nodeModel:E.nodeModel,class:"w-full",placeholder:E.$t("views.applicationWorkflow.variable.placeholder"),modelValue:pe.variable,"onUpdate:modelValue":Pe=>pe.variable=Pe},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),k(K,{span:2},{default:R(()=>[k(Y,{link:"",class:"mt-4 ml-4",disabled:X.variableList.length<=1,onClick:Pe=>x(ee,ce)},{default:R(()=>[k(co,{iconName:"app-delete"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),k(Y,{onClick:pe=>O(ee),type:"primary",size:"large",link:""},{default:R(()=>[k(co,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(E.$t("common.add")),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),k(Y,{onClick:D[1]||(D[1]=X=>f()),type:"primary",size:"large",link:""},{default:R(()=>[k(co,{iconName:"app-add-outlined",class:"mr-4"}),ot(" "+_e(E.$t("views.applicationWorkflow.nodes.variableAggregationNode.addGroup")),1)]),_:1})]),_:1},8,["model"]),k(fY,{ref_key:"GroupFieldDialogRef",ref:r,onRefresh:g},null,512)]),_:1},8,["nodeModel"])}}});class gY extends Xo{constructor(t){super(t,yY)}getConfig(t){return t.model.properties.config}}const _Y={type:"variable-aggregation-node",model:qo,view:gY},bY=Object.freeze(Object.defineProperty({__proto__:null,default:_Y},Symbol.toStringTag,{value:"Module"})),wY={class:"flex-between"},EY={class:"flex-between mb-8"},OY={class:"lighter"},SY={key:0,class:"flex w-full"},xY=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],a=x=>x.ctrlKey===!0?(x.preventDefault(),!0):(x.stopPropagation(),!0),r={variableList:[{id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},u=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",r),t.nodeModel.properties.nodeData),set:x=>{ke.set(t.nodeModel.properties,"nodeData",x)}}),c=Le(),v=Le(),f=Le(),g=async()=>{var M;let x=[(M=c.value)==null?void 0:M.validate(),...v.value.map(A=>A.validate())];return f.value&&(x=[...x,...v.value.map(A=>A.validate())]),Promise.all(x).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function _(){const x=ke.cloneDeep(t.nodeModel.properties.nodeData.variableList),M={id:fl(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};x.push(M),ke.set(t.nodeModel.properties.nodeData,"variableList",x)}function b(x){const M=ke.cloneDeep(t.nodeModel.properties.nodeData.variableList);M.splice(x,1),ke.set(t.nodeModel.properties.nodeData,"variableList",M)}function O(x){t.nodeModel.graphModel.nodes.map(M=>{M.id==="start-node"&&(M.properties.config.globalFields.forEach(A=>{A.value===x.fields[1]&&(x.name=A.label)}),M.properties.config.chatFields.forEach(A=>{A.value===x.fields[1]&&(x.name=A.label)}))})}return Hr(()=>{var x;typeof((x=t.nodeModel.properties.nodeData)==null?void 0:x.isResult)>"u"&&gc(t.nodeModel)&&ke.set(t.nodeModel.properties.nodeData,"isResult",!0),ke.set(t.nodeModel,"validate",g)}),(x,M)=>{const A=Z("AppIcon"),E=Z("el-button"),D=Z("el-form-item"),j=Z("el-option"),U=Z("el-select"),F=Z("el-input"),I=Z("el-input-number"),V=Z("CodemirrorEditor"),Y=Z("el-card"),K=Z("Plus"),H=Z("el-icon"),B=Z("el-form");return be(),et(Ho,{nodeModel:x.nodeModel},{default:R(()=>[k(B,{onSubmit:M[0]||(M[0]=nn(()=>{},["prevent"])),model:u.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:R(()=>[(be(!0),tn(br,null,Jr(u.value.variableList,(z,X)=>(be(),et(Y,{key:z.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(D,{label:x.$t("views.applicationWorkflow.variable.label")},{label:R(()=>[J("div",wY,[J("div",null,[ot(_e(x.$t("views.applicationWorkflow.variable.label"))+" ",1),M[1]||(M[1]=J("span",{class:"color-danger"},"*",-1))]),u.value.variableList.length>1?(be(),et(E,{key:0,text:"",onClick:ee=>b(X)},{default:R(()=>[k(A,{iconName:"app-delete"})]),_:2},1032,["onClick"])):En("",!0)])]),default:R(()=>[k(io,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.applicationWorkflow.variable.placeholder"),modelValue:z.fields,"onUpdate:modelValue":ee=>z.fields=ee,global:!0,onChange:ee=>O(z)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),J("div",EY,[J("span",OY,[ot(_e(x.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),M[2]||(M[2]=J("span",{class:"color-danger"},"*",-1))]),k(U,{teleported:!1,modelValue:z.source,"onUpdate:modelValue":ee=>z.source=ee,size:"small",style:{width:"85px"}},{default:R(()=>[k(j,{label:x.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),k(j,{label:x.$t("common.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),z.source==="custom"?(be(),tn("div",SY,[k(U,{modelValue:z.type,"onUpdate:modelValue":ee=>z.type=ee,style:{"max-width":"85px"},class:"mr-8",onChange:ee=>u.value.variableList[X].value=null},{default:R(()=>[(be(),tn(br,null,Jr(n,ee=>k(j,{key:ee,label:ee,value:ee},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),z.type==="string"?(be(),et(D,{key:0,prop:"variableList."+X+".value",rules:{message:Qn(Ot)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:R(()=>[k(F,{modelValue:z.value,"onUpdate:modelValue":ee=>z.value=ee,placeholder:x.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:a},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):z.type==="num"?(be(),et(D,{key:1,prop:"variableList."+X+".value",rules:{message:x.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:R(()=>[k(I,{modelValue:z.value,"onUpdate:modelValue":ee=>z.value=ee},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):z.type==="json"?(be(),et(D,{key:2,class:"w-full",prop:"variableList."+X+".value",rules:[{message:x.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(ee,pe,ce)=>{try{JSON.parse(pe),ce()}catch{ce(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:R(()=>[k(V,{title:"JSON",modelValue:z.value,"onUpdate:modelValue":ee=>z.value=ee,style:{height:"100px",width:"155px"},onSubmitDialog:ee=>u.value.variableList[X].value=ee},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):En("",!0)])):(be(),et(D,{key:1},{default:R(()=>[k(io,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:f,nodeModel:x.nodeModel,class:"w-full",placeholder:x.$t("views.applicationWorkflow.variable.placeholder"),modelValue:z.reference,"onUpdate:modelValue":ee=>z.reference=ee},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),k(E,{link:"",type:"primary",onClick:_},{default:R(()=>[k(H,{class:"mr-4"},{default:R(()=>[k(K)]),_:1}),ot(" "+_e(x.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class AY extends Xo{constructor(t){super(t,xY)}}const TY={type:"variable-assign-node",model:qo,view:AY},MY=Object.freeze(Object.defineProperty({__proto__:null,default:TY},Symbol.toStringTag,{value:"Module"})),kY={class:"flex align-center"},PY={class:"mr-4"},NY={class:"flex align-center"},RY={class:"mr-4"},CY={class:"flex align-center"},DY={class:"mr-4"},jY={class:"dialog-footer"},IY=Jn({__name:"VariableFieldDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const a=n,r=Le(),u=Le(!1),c=Le(!1),v=Le(null),f=Le({field:"",label:"",expression:""}),g=fh({label:[{required:!0,message:Ot("dynamicsForm.paramForm.name.placeholder"),trigger:"blur"}],field:[{required:!0,message:Ot("views.applicationWorkflow.variable.inputPlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Ot("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}],expression:[{required:!0,message:Ot("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder"),trigger:"blur"}]}),_=Le(!1),b=(M,A)=>{M&&(f.value=ke.cloneDeep(M),c.value=!0,v.value=A),_.value=!0},O=()=>{_.value=!1,c.value=!1,v.value=null,f.value={field:"",label:""}},x=async M=>{M&&await M.validate(A=>{A&&a("refresh",f.value,v.value)})};return t({open:b,close:O}),(M,A)=>{const E=Z("el-input"),D=Z("el-form-item"),j=Z("AppIcon"),U=Z("el-tooltip"),F=Z("el-form"),I=Z("el-button"),V=Z("el-dialog");return be(),et(V,{title:c.value?M.$t("views.applicationWorkflow.nodes.variableSplittingNode.editVariables"):M.$t("views.applicationWorkflow.nodes.variableSplittingNode.addVariables"),modelValue:_.value,"onUpdate:modelValue":A[4]||(A[4]=Y=>_.value=Y),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":O,"append-to-body":""},{footer:R(()=>[J("span",jY,[k(I,{onClick:nn(O,["prevent"])},{default:R(()=>[ot(_e(M.$t("common.cancel")),1)]),_:1}),k(I,{type:"primary",onClick:A[3]||(A[3]=Y=>x(r.value)),loading:u.value},{default:R(()=>[ot(_e(M.$t("common.save")),1)]),_:1},8,["loading"])])]),default:R(()=>[k(F,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:g,model:f.value,"require-asterisk-position":"right","hide-required-asterisk":""},{default:R(()=>[k(D,{prop:"field"},{label:R(()=>[J("div",kY,[J("span",PY,_e(M.$t("common.variable")),1),A[5]||(A[5]=J("span",{class:"color-danger"},"*",-1))])]),default:R(()=>[k(E,{modelValue:f.value.field,"onUpdate:modelValue":A[0]||(A[0]=Y=>f.value.field=Y),maxlength:64,placeholder:M.$t("views.applicationWorkflow.variable.inputPlaceholder"),"show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1}),k(D,{prop:"label"},{label:R(()=>[J("div",NY,[J("span",RY,_e(M.$t("dynamicsForm.paramForm.name.label")),1),A[6]||(A[6]=J("span",{class:"color-danger"},"*",-1))])]),default:R(()=>[k(E,{modelValue:f.value.label,"onUpdate:modelValue":A[1]||(A[1]=Y=>f.value.label=Y),maxlength:64,"show-word-limit":"",placeholder:M.$t("dynamicsForm.paramForm.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),k(D,{prop:"expression"},{label:R(()=>[J("div",CY,[J("span",DY,[ot(_e(M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.label"))+" ",1),A[7]||(A[7]=J("span",{class:"color-danger"},"*",-1))]),k(U,{effect:"dark",content:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.tooltip"),placement:"right"},{default:R(()=>[k(j,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:R(()=>[k(E,{modelValue:f.value.expression,"onUpdate:modelValue":A[2]||(A[2]=Y=>f.value.expression=Y),maxlength:64,"show-word-limit":"",placeholder:M.$t("views.applicationWorkflow.nodes.variableSplittingNode.expression.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),LY={class:"flex-between w-full"},$Y={class:"break-all lighter"},FY={class:"ml-4",style:{"margin-top":"-4px"}},UY=["title"],VY=["title"],BY={class:"mr-4"},WY=Jn({__name:"VariableFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=Le(),a=Le(),r=Le([]);function u(f,g){a.value.open(f,g)}function c(f){r.value.splice(f,1);const g=[{label:Ot("common.result"),value:"result"},...r.value.map(_=>({label:_.label,value:_.field}))];ke.set(t.nodeModel.properties.config,"fields",g)}function v(f,g){for(let b=0;b<r.value.length;b++)if(r.value[b].field===f.field&&g!==b){li(Ot("views.applicationWorkflow.tip.paramErrorMessage")+f.field);return}[void 0,null].includes(g)?r.value.push(f):r.value.splice(g,1,f),a.value.close();const _=[{label:Ot("common.result"),value:"result"},...r.value.map(b=>({label:b.label,value:b.field}))];ke.set(t.nodeModel.properties.config,"fields",_)}return Hr(()=>{t.nodeModel.properties.nodeData.variableList&&(r.value=ke.cloneDeep(t.nodeModel.properties.nodeData.variableList)),ke.set(t.nodeModel.properties.nodeData,"variableList",r);const f=[{label:Ot("common.result"),value:"result"},...r.value.map(g=>({label:g.label,value:g.field}))];ke.set(t.nodeModel.properties.config,"fields",f)}),(f,g)=>{var A;const _=Z("AppIcon"),b=Z("el-button"),O=Z("el-table-column"),x=Z("el-tooltip"),M=Z("el-table");return be(),tn(br,null,[J("div",LY,[J("h5",$Y,[ot(_e(f.$t("views.applicationWorkflow.nodes.variableSplittingNode.splitVariables"))+" ",1),g[1]||(g[1]=J("span",{class:"color-danger"},"*",-1))]),J("span",FY,[k(b,{link:"",type:"primary",onClick:g[0]||(g[0]=E=>u())},{default:R(()=>[k(_,{iconName:"app-add-outlined"})]),_:1})])]),((A=t.nodeModel.properties.nodeData.variableList)==null?void 0:A.length)>0?(be(),et(M,{key:0,data:t.nodeModel.properties.nodeData.variableList,ref_key:"tableRef",ref:n,"row-key":"field",class:"border-l border-r"},{default:R(()=>[k(O,{prop:"field",label:f.$t("common.variable"),width:"95"},{default:R(({row:E})=>[J("span",{title:E.field,class:"ellipsis-1"},_e(E.field),9,UY)]),_:1},8,["label"]),k(O,{prop:"label",label:f.$t("dynamicsForm.paramForm.name.label")},{default:R(({row:E})=>[J("span",{title:E.label,class:"ellipsis-1"},_e(E.label),9,VY)]),_:1},8,["label"]),k(O,{label:f.$t("common.operation"),align:"left",width:"90"},{default:R(({row:E,$index:D})=>[J("span",BY,[k(x,{effect:"dark",content:f.$t("common.modify"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:nn(j=>u(E,D),["stop"])},{default:R(()=>[k(_,{iconName:"app-edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),k(x,{effect:"dark",content:f.$t("common.delete"),placement:"top"},{default:R(()=>[k(b,{type:"primary",text:"",onClick:j=>c(D)},{default:R(()=>[k(_,{iconName:"app-delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):En("",!0),k(IY,{ref_key:"VariableFieldDialogRef",ref:a,onRefresh:v},null,512)],64)}}}),GY={class:"title-decoration-1 mb-8"},zY={class:"flex-between"},HY=Jn({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={inputVariable:[],variableList:[]},a=Yn({get:()=>(t.nodeModel.properties.nodeData||ke.set(t.nodeModel.properties,"nodeData",n),t.nodeModel.properties.nodeData),set:c=>{ke.set(t.nodeModel.properties,"nodeData",c)}}),r=Le(),u=async()=>r.value.validate();return Hr(()=>{ke.set(t.nodeModel,"validate",u)}),(c,v)=>{const f=Z("el-form-item"),g=Z("el-form"),_=Z("el-card");return be(),et(Ho,{nodeModel:c.nodeModel},{default:R(()=>[J("h5",GY,_e(c.$t("views.applicationWorkflow.nodeSetting")),1),k(_,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:R(()=>[k(g,{onSubmit:v[1]||(v[1]=nn(()=>{},["prevent"])),model:a.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"VariableSplittingRef",ref:r,"hide-required-asterisk":""},{default:R(()=>[k(f,{prop:"inputVariable",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{label:R(()=>[J("div",zY,[J("div",null,[ot(_e(c.$t("views.applicationWorkflow.nodes.variableSplittingNode.inputVariables"))+" ",1),v[2]||(v[2]=J("span",{class:"color-danger"},"*",-1))])])]),default:R(()=>[k(io,{ref:"nodeCascaderRef",nodeModel:c.nodeModel,class:"w-full",placeholder:c.$t("views.applicationWorkflow.variable.placeholder"),modelValue:a.value.inputVariable,"onUpdate:modelValue":v[0]||(v[0]=b=>a.value.inputVariable=b)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["rules"]),k(f,{prop:"variableList",rules:{message:c.$t("views.applicationWorkflow.variable.placeholder"),trigger:"blur",required:!0}},{default:R(()=>[k(WY,{ref:"VariableFieldTableRef","node-model":c.nodeModel},null,8,["node-model"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class XY extends Xo{constructor(t){super(t,HY)}}const qY={type:"variable-splitting-node",model:qo,view:XY},YY=Object.freeze(Object.defineProperty({__proto__:null,default:qY},Symbol.toStringTag,{value:"Module"})),iA=Jn({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(a,r)=>va((be(),tn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=nn(()=>{},["stop"])),onClick:r[1]||(r[1]=nn(()=>{},["stop"]))},[(be(),tn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[J("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),J("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[th,t.model.isHovered]])}});function KY(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const ZY=32,JY=32;class QY extends mn.BezierEdge{constructor(){super();ka(this,"isMounted");ka(this,"customLineApp");ka(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const a=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");KY(a,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:a}=this.props;n&&(qg()?uP(this.targetId(),iA,n,this.props.model,a,(u,c)=>({model:u,graph:c})):(this.customLineApp=rM({render:()=>Nv(iA,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),qg()&&sP(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,a=n.id,{customWidth:r=ZY,customHeight:u=JY}=n.getProperties(),{startPoint:c,endPoint:v,path:f,isAnimation:g,arrowConfig:_}=n,b=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:x,strokeDashoffset:M,animationName:A,animationDuration:E,animationIterationCount:D,animationTimingFunction:j,animationDirection:U}=b,F={x:(c.x+v.x-r)/2,y:(c.y+v.y-u)/2,width:r,height:u},I=n.getEdgeStyle(),V={width:r,height:u};return setTimeout(()=>{const Y=document.getElementById(a);Y&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(Y))},0),delete I.stroke,mn.h("g",{},[mn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),mn.h("path",{d:f,...I,..._,...g?{strokeDasharray:O,stroke:x,style:{strokeDashoffset:M,animationName:A,animationDuration:E,animationIterationCount:D,animationTimingFunction:j,animationDirection:U}}:{}}),mn.h("foreignObject",{...F,y:F.y+5,x:F.x+5,style:{}},[mn.h("div",{id:a,style:{...V},className:"lf-custom-edge-wrapper"})])])}}class eK extends mn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(u=>u.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(u=>u.id===this.targetAnchorId);if(n&&r){const u={x:n.x,y:n.y};this.updateStartPoint(u);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const tK={type:"app-edge",view:QY,model:eK},nK=Jn({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var f;(f=t.lf)==null||f.zoom(!0,[0,0])}function a(){var f;(f=t.lf)==null||f.zoom(!1,[0,0])}function r(){var f,g,_;(f=t.lf)==null||f.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(_=t.lf)==null||_.fitView()}const u=()=>{var f;(f=t.lf)==null||f.extension.dagre.layout()},c=()=>{var f;(f=t.lf)==null||f.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var f;(f=t.lf)==null||f.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(f,g)=>{const _=Z("ZoomOut"),b=Z("el-icon"),O=Z("el-tooltip"),x=Z("el-button"),M=Z("ZoomIn"),A=Z("AppIcon"),E=Z("el-divider"),D=Z("el-card");return be(),et(D,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:R(()=>[k(x,{link:"",onClick:a,style:{border:"none"}},{default:R(()=>[k(O,{effect:"dark",content:f.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:R(()=>[k(b,{size:16,title:f.$t("views.applicationWorkflow.control.zoomOut")},{default:R(()=>[k(_)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(x,{link:"",onClick:n,style:{border:"none"}},{default:R(()=>[k(O,{effect:"dark",content:f.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:R(()=>[k(b,{size:16,title:f.$t("views.applicationWorkflow.control.zoomIn")},{default:R(()=>[k(M)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),k(x,{link:"",onClick:r,style:{border:"none"}},{default:R(()=>[k(O,{effect:"dark",content:f.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:R(()=>[k(A,{iconName:"app-fitview",title:f.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(E,{direction:"vertical"}),k(x,{link:"",onClick:c,style:{border:"none"}},{default:R(()=>[k(O,{effect:"dark",content:f.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:R(()=>[k(A,{style:{"font-size":"16px"},iconName:"app-retract",title:f.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(x,{link:"",onClick:v,style:{border:"none"}},{default:R(()=>[k(O,{effect:"dark",content:f.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:R(()=>[k(A,{style:{"font-size":"16px"},iconName:"app-extend",title:f.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),k(x,{link:"",onClick:u,style:{border:"none"}},{default:R(()=>[k(O,{effect:"dark",content:f.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:R(()=>[k(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:f.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let uc=null;function aA(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function lA(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const cv=40;let mg=40;function rK(e,t){const{keyboard:n}=e,{options:{keyboard:a}}=n,r=()=>{var b,O;if(mg=cv,!(a!=null&&a.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,f=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(f):!0)||f.nodes.length===0&&f.edges.length===0)return uc=null,!0;const _=f.nodes.filter(x=>x.type===ei.Start||x.type===ei.Base);if(_.length>0){li(((O=(b=_[0])==null?void 0:b.properties)==null?void 0:O.nodeName)+Ot("views.applicationWorkflow.tip.cannotCopy"));return}return uc=f,uc.nodes.forEach(x=>aA(x,cv)),uc.edges.forEach(x=>lA(x,cv)),Xd(Ot("views.applicationWorkflow.tip.copyError")),!1},u=()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;if(uc&&(uc.nodes||uc.edges)){e.clearSelectElements();const v=e.addElements(uc,mg);if(!v)return!0;v.nodes.forEach(f=>e.selectElementById(f.id,!0)),v.edges.forEach(f=>e.selectElementById(f.id,!0)),uc.nodes.forEach(f=>aA(f,cv)),uc.edges.forEach(f=>lA(f,cv)),mg=mg+cv}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(_=>e.deleteEdge(_.id));return}const f=v.nodes.filter(_=>["start-node","base-node"].includes(_.type));if(f.length>0){li(`${(g=f[0].properties)==null?void 0:g.nodeName}${Ot("views.applicationWorkflow.delete.deleteMessage")}`);return}return nE(Ot("common.tip"),Ot("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Ot("common.confirm"),confirmButtonClass:"color-danger"}).then(()=>{if(!(a!=null&&a.enabled)||t.textEditElement)return!0;v.edges.forEach(_=>e.deleteEdge(_.id)),v.nodes.forEach(_=>e.deleteNode(_.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],u),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(a!=null&&a.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class oK{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const iK=e=>typeof e=="string",uA=Array.isArray,e_=e=>typeof e=="number",SP=e=>e!==null&&typeof e=="object",t_=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>t_(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=t_(t[n])}),t}return e},fv=(e,t)=>{const n=e[t];return SP(n)?n.cell:n},sA=(e,t,n)=>{let a;return n?a=n:e_(e)?a=()=>e:a=()=>t,a},aK=(e,t)=>{if(e!=="next"&&e!=="prev")return t},cA=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let lK=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return cA(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&cA(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let a=n.prev;for(;a!==n;)t.push(JSON.stringify(a,aK)),a=a==null?void 0:a.prev;return`[${t.join(", ")}]`}};var xv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(xv||(xv={}));function fA(e,t){var n=e.get(t)||0;e.set(t,n+1)}function dA(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function xP(e,t,n,a){var r=String(t),u=String(n);if(!e&&r>u){var c=r;r=u,u=c}return r+xv.EDGE_KEY_DELIM+u+xv.EDGE_KEY_DELIM+(a===void 0?xv.DEFAULT_EDGE_NAME:a)}function pA(e,t,n,a){var r=String(t),u=String(n),c={v:t,w:n};if(!e&&r>u){var v=c.v;c.v=c.w,c.w=v}return a!==void 0&&(c.name=a),c}function I1(e,t){return xP(e,t.v,t.w,t.name)}function hA(e){return typeof e=="function"}var uK=function(t){return t.nodes().map(function(n){var a=t.node(n),r=t.parent(n),u={id:n,value:a,parent:r};return u.value===void 0&&delete u.value,u.parent===void 0&&delete u.parent,u})},sK=function(t){return t.edges().map(function(n){var a=t.edge(n),r={v:n.v,w:n.w,value:a,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},cK=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:uK(t),edges:sK(t),value:t.graph()};return n.value===void 0&&delete n.value,n},fK=function(t){var n=new Yv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(a){n.setNode(a.id,a.value),a.parent&&n.setParent(a.id,a.parent)}),t.edges.forEach(function(a){n.setEdge(a.v,a.w,a.value,a.name)}),n};function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function mA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(a){dK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hK(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function vK(e,t,n){return t&&hK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var mK={compound:!1,multigraph:!1,directed:!0},Yv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pK(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=xv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return hA(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var u;return!(!((u=t.inEdgesMap.get(r))===null||u===void 0)&&u.size)})},this.sinks=function(){return t.nodes().filter(function(r){var u;return!(!((u=t.outEdgesMap.get(r))===null||u===void 0)&&u.size)})},this.setNodes=function(r,u){return r.map(function(c){return t.setNode(c,u)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var u,c=(u=t.parentMap)===null||u===void 0?void 0:u.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var u=t.parentMap.get(r);t.childrenMap.get(u).delete(r)},this.setParent=function(r,u){var c,v;t.checkCompound();for(var f=u===void 0?t.GRAPH_NODE:u,g=t.parent(f);g;){if(r===g)throw new Error("Setting "+u+" as parent of "+r+" would create a cycle");g=t.parent(g)}u&&t.setNode(u),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,f);var _=t.childrenMap.get(f);return _.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(f,_),t},this.children=function(r){var u=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(u);return v?Array.from(v.keys()):void 0}if(u===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var u=t.predecessorsMap.get(r);return u?Array.from(u.keys()):void 0},this.successors=function(r){var u=t.successorsMap.get(r);return u?Array.from(u.keys()):void 0},this.neighbors=function(r){var u;if(t.hasNode(r))return Array.from(new Set((u=t.predecessors(r))===null||u===void 0?void 0:u.concat(t.successors(r))))},this.isLeaf=function(r){var u;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((u=t.neighbors(r))===null||u===void 0)&&u.length)},this.filterNodes=function(r){var u=t.directed,c=t.multigraph,v=t.compound,f=new e({directed:u,multigraph:c,compound:v});if(f.setGraph(t.graph()),t.nodes().forEach(function(_){r(_)&&f.setNode(_,t.node(_))}),t.edges().forEach(function(_){f.hasNode(_.v)&&f.hasNode(_.w)&&f.setEdgeObj(_,t.edge(_))}),v){var g=function(b){for(var O=t.parent(b);O!==void 0&&!f.hasNode(O);)O=t.parent(O);return O};f.nodes().forEach(function(_){f.setParent(_,g(_))})}return f},this.setDefaultEdgeLabel=function(r){return hA(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,u){return t.setEdge(r.v,r.w,u,r.name)},this.setPath=function(r,u){return r.reduce(function(c,v){return t.setEdge(c,v,u),v}),t},this.edgeFromArgs=function(r,u,c){return t.edge({v:r,w:u,name:c})},this.edge=function(r){return t.edgesLabelsMap.get(I1(t.isDirected(),r))},this.hasEdge=function(r,u,c){return t.edgesLabelsMap.has(I1(t.isDirected(),{v:r,w:u,name:c}))},this.removeEdgeObj=function(r){var u=r.v,c=r.w,v=r.name;return t.removeEdge(u,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,u){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!u||v.v===u})},this.outEdges=function(r,u){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!u||v.w===u})},this.nodeEdges=function(r,u){var c;if(t.hasNode(r))return(c=t.inEdges(r,u))===null||c===void 0?void 0:c.concat(t.outEdges(r,u))},this.toJSON=function(){return cK(t)},this.nodeInDegree=function(r){var u=t.inEdgesMap.get(r);return u?u.size:0},this.nodeOutDegree=function(r){var u=t.outEdgesMap.get(r);return u?u.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var a=mA(mA({},mK),n);this.compound=a.compound,this.directed=a.directed,this.multigraph=a.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return vK(e,[{key:"setNode",value:function(n,a){var r=this.nodesLabelMap,u=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,f=this.childrenMap,g=this.inEdgesMap,_=this.outEdgesMap,b=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return a!==void 0&&r.set(n,a),this;if(r.set(n,a||u(n)),c()){var x;v==null||v.set(n,this.GRAPH_NODE),f==null||f.set(n,new Map),f!=null&&f.has(this.GRAPH_NODE)||f==null||f.set(this.GRAPH_NODE,new Map),f==null||(x=f.get(this.GRAPH_NODE))===null||x===void 0||x.set(n,!0)}return[g,_,b,O].forEach(function(M){return M.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var a=this;if(this.hasNode(n)){var r=function(E){a.removeEdge(E.v,E.w,E.name)},u=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,f=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var _,b,O;this.removeFromParentsChildList(n),(_=this.parentMap)===null||_===void 0||_.delete(n),(b=this.children(n))===null||b===void 0||b.forEach(function(A){return a.setParent(A)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var x=u.get(n),M=c.get(n);Array.from(x.values()).forEach(function(A){return r(A)}),Array.from(M.values()).forEach(function(A){return r(A)}),g.delete(n),u.delete(n),c.delete(n),v.delete(n),f.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,a,r,u){var c,v,f=pA(this.isDirected(),n,a,u),g=I1(this.isDirected(),f),_=f.v,b=f.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(u!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(b),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(_,b,u)),Object.freeze(f),this.edgesMap.set(g,f);var O=this.predecessorsMap.get(b),x=this.successorsMap.get(_);return fA(O,_),fA(x,b),(c=this.inEdgesMap.get(b))===null||c===void 0||c.set(g,f),(v=this.outEdgesMap.get(_))===null||v===void 0||v.set(g,f),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,a,r){var u=xP(this.isDirected(),n,a,r),c=this.edgesMap.get(u);if(c){var v=pA(this.isDirected(),n,a,r),f=v.v,g=v.w;this.edgesLabelsMap.delete(u),this.edgesMap.delete(u);var _=this.predecessorsMap.get(g),b=this.successorsMap.get(f);dA(_,f),dA(b,g),this.inEdgesMap.get(g).delete(u),this.outEdgesMap.get(f).delete(u),this.edgeCountNum-=1}return this}}]),e}();Yv.fromJSON=fK;function yK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function gK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var AP=yK(function e(){var t=this;gK(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var a=t.keyIndice.get(n);if(a!==void 0)return t.arr[a].priority},this.swap=function(n,a){var r=t.arr,u=t.keyIndice,c=[r[n],r[a]],v=c[0],f=c[1];r[n]=f,r[a]=v,u.set(v.key,a),u.set(f.key,n)},this.innerDecrease=function(n){for(var a=t.arr,r=a[n].priority,u,c=n;c!==0;){var v;if(u=c>>1,((v=a[u])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,u),c=u}},this.heapify=function(n){var a=t.arr,r=n<<1,u=r+1,c=n;r<a.length&&(c=a[r].priority<a[c].priority?r:c,u<a.length&&(c=a[u].priority<a[c].priority?u:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,a){var r=t.keyIndice,u=t.arr;if(!r.has(n)){var c=u.length;return r.set(n,c),u.push({key:n,priority:a}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,a){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(a>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(a));t.arr[r].priority=a,t.innerDecrease(r)}}),_K=function(t,n){var a=new Yv,r=new Map,u=new AP,c;function v(_){var b=_.v===c?_.w:_.v,O=u.priority(b);if(O!==void 0){var x=n(_);x<O&&(r.set(b,c),u.decrease(b,x))}}if(t.nodeCount()===0)return a;t.nodes().forEach(function(_){u.add(_,Number.POSITIVE_INFINITY),a.setNode(_)}),u.decrease(t.nodes()[0],0);for(var f=!1;u.size()>0;){var g;if(c=u.removeMin(),r.has(c))a.setEdge(c,r.get(c));else{if(f)throw new Error("Input graph is not connected: "+t.graph());f=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return a},bK=function(t){var n=new Set,a=[],r=t.nodes();return r.forEach(function(u){for(var c=[],v=[u];v.length>0;){var f=v.pop();if(!n.has(f)){var g,_;n.add(f),c.push(f),(g=t.successors(f))===null||g===void 0||g.forEach(function(b){return v.push(b)}),(_=t.predecessors(f))===null||_===void 0||_.forEach(function(b){return v.push(b)})}}c.length&&a.push(c)}),a},wK=function e(t,n,a,r,u,c){r.includes(n)||(r.push(n),a||c.push(n),u(n).forEach(function(v){return e(t,v,a,r,u,c)}),a&&c.push(n))},UE=function(t,n,a){var r=Array.isArray(n)?n:[n],u=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(f){if(t.hasNode(f))wK(t,f,a==="post",v,u,c);else throw new Error("Graph does not have node: "+f)}),c};function EK(e,t){return AK(e)||xK(e,t)||SK(e,t)||OK()}function OK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SK(e,t){if(e){if(typeof e=="string")return yA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yA(e,t)}}function yA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function xK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],r=!0,u=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(a.push(c.value),!(t&&a.length===t));r=!0);}catch(f){u=!0,v=f}finally{try{!r&&n.return!=null&&n.return()}finally{if(u)throw v}}return a}}function AK(e){if(Array.isArray(e))return e}var TK=function(){return 1},TP=function(t,n,a,r){return MK(t,n,a||TK,r||function(u){return t.outEdges(u)})},MK=function(t,n,a,r){var u=new Map,c=new AP,v,f,g=function(O){var x=O.v!==v?O.v:O.w,M=u.get(x),A=a(O),E=f.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+A);E<M.distance&&(M.distance=E,M.predecessor=v,c.decrease(x,E))};for(t.nodes().forEach(function(b){var O=b===n?0:Number.POSITIVE_INFINITY;u.set(b,{distance:O}),c.add(b,O)});c.size()>0&&(v=c.removeMin(),f=u.get(v),!(f&&f.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var _={};return Array.from(u.entries()).forEach(function(b){var O=EK(b,2),x=O[0],M=O[1];return _[String(x)]=M,_}),_},kK=function(t,n,a){var r={};return t.nodes().forEach(function(u){return r[String(u)]=TP(t,u,n,a),r}),r},MP=function(t){var n=0,a=[],r=new Map,u=[];function c(v){var f,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,a.push(v),(f=t.successors(v))===null||f===void 0||f.forEach(function(x){var M;if(r.has(x)){if(!((M=r.get(x))===null||M===void 0)&&M.onStack){var E=r.get(x);g.lowlink=Math.min(g.lowlink,E.index)}}else{c(x);var A=r.get(x);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var _=[],b;do{b=a.pop();var O=r.get(b);O.onStack=!1,_.push(b)}while(v!==b);u.push(_)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),u},PK=function(t){return MP(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Fw(e){"@babel/helpers - typeof";return Fw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fw(e)}function NK(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function RK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hm(e,t)}function DK(e){var t=kP();return function(){var a=Xm(e),r;if(t){var u=Xm(this).constructor;r=Reflect.construct(a,arguments,u)}else r=a.apply(this,arguments);return jK(this,r)}}function jK(e,t){if(t&&(Fw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IK(e)}function IK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uw(e){var t=typeof Map=="function"?new Map:void 0;return Uw=function(a){if(a===null||!LK(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(a))return t.get(a);t.set(a,r)}function r(){return kg(a,arguments,Xm(this).constructor)}return r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Hm(r,a)},Uw(e)}function kg(e,t,n){return kP()?kg=Reflect.construct:kg=function(r,u,c){var v=[null];v.push.apply(v,u);var f=Function.bind.apply(r,v),g=new f;return c&&Hm(g,c.prototype),g},kg.apply(null,arguments)}function kP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function LK(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Hm(e,t){return Hm=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Hm(e,t)}function Xm(e){return Xm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Xm(e)}var Vw=function(e){CK(n,e);var t=DK(n);function n(){return RK(this,n),t.apply(this,arguments)}return NK(n)}(Uw(Error));function PP(e){var t=new Set,n=new Set,a=[];function r(u){if(n.has(u))throw new Vw;if(!t.has(u)){var c;n.add(u),t.add(u),(c=e.predecessors(u))===null||c===void 0||c.forEach(r),n.delete(u),a.push(u)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Vw;return a}var $K=function(t){try{PP(t)}catch(n){if(n instanceof Vw)return!1;throw n}return!0},FK=function(t,n){return UE(t,n,"post")},UK=function(t,n){return UE(t,n,"pre")},VK=function(){return 1};function BK(e,t,n){return WK(e,t||VK,n||function(a){return e.outEdges(a)})}function WK(e,t,n){var a={},r=e.nodes();return r.forEach(function(u){var c=String(u);a[c]={},a[c][c]={distance:0},r.forEach(function(v){u!==v&&(a[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(u).forEach(function(v){var f=v.v===u?v.w:v.v,g=t(v);a[c][String(f)]={distance:g,predecessor:u}})}),r.forEach(function(u){var c=String(u),v=a[c];r.forEach(function(f){var g=String(f),_=a[g];r.forEach(function(b){var O=String(b),x=_[c],M=v[O],A=_[O],E=x.distance+M.distance;E<A.distance&&(A.distance=E,A.predecessor=M.predecessor)})})}),a}const GK=Object.freeze(Object.defineProperty({__proto__:null,components:bK,dfs:UE,dijkstra:TP,dijkstraAll:kK,findCycles:PK,floydWarshall:BK,isAcyclic:$K,postorder:FK,preorder:UK,prim:_K,tarjan:MP,topsort:PP},Symbol.toStringTag,{value:"Module"}));class zK extends lK{}class HK extends Yv{}const XK=()=>1,qK=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const a=KK(e,t||XK);return(n=YK(a.graph,a.buckets,a.zeroIdx).map(u=>e.outEdges(u.v,u.w)))===null||n===void 0?void 0:n.flat()},YK=(e,t,n)=>{let a=[];const r=t[t.length-1],u=t[0];let c;for(;e.nodeCount();){for(;c=u.dequeue();)L1(e,t,n,c);for(;c=r.dequeue();)L1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){a=a.concat(L1(e,t,n,c,!0));break}}}return a},L1=(e,t,n,a,r)=>{var u,c;const v=[];return(u=e.inEdges(a.v))===null||u===void 0||u.forEach(f=>{const g=e.edge(f),_=e.node(f.v);r&&v.push({v:f.v,w:f.w,in:0,out:0}),_.out===void 0&&(_.out=0),_.out-=g,Bw(t,n,_)}),(c=e.outEdges(a.v))===null||c===void 0||c.forEach(f=>{const g=e.edge(f),_=f.w,b=e.node(_);b.in===void 0&&(b.in=0),b.in-=g,Bw(t,n,b)}),e.removeNode(a.v),r?v:void 0},KK=(e,t)=>{const n=new HK;let a=0,r=0;e.nodes().forEach(f=>{n.setNode(f,{v:f,in:0,out:0})}),e.edges().forEach(f=>{const g=n.edge(f)||0,_=(t==null?void 0:t(f))||1,b=g+_;n.setEdge(f.v,f.w,b),r=Math.max(r,n.node(f.v).out+=_),a=Math.max(a,n.node(f.w).in+=_)});const u=[],c=r+a+3;for(let f=0;f<c;f++)u.push(new zK);const v=a+1;return n.nodes().forEach(f=>{Bw(u,v,n.node(f))}),{buckets:u,zeroIdx:v,graph:n}},Bw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},ZK=e=>{const t=a=>r=>{var u;return((u=a.edge(r))===null||u===void 0?void 0:u.weight)||1},n=e.graph().acyclicer==="greedy"?qK(e,t(e)):JK(e);n==null||n.forEach(a=>{const r=e.edge(a);e.removeEdgeObj(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,`rev-${Math.random()}`)})},JK=e=>{const t=[],n={},a={},r=u=>{var c;a[u]||(a[u]=!0,n[u]=!0,(c=e.outEdges(u))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[u])};return e.nodes().forEach(r),t},QK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})},gA={run:ZK,undo:QK};class If extends Yv{}const eZ=(e,t)=>Number(e)-Number(t),Kv=(e,t,n,a)=>{let r;do r=`${a}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},tZ=e=>{const t=new If().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const a=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t},NP=e=>{const t=new If({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var a;!((a=e.children(n))===null||a===void 0)&&a.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},nZ=(e,t)=>e==null?void 0:e.reduce((n,a,r)=>(n[a]=t[r],n),{}),_A=(e,t)=>{const n=Number(e.x),a=Number(e.y),r=Number(t.x)-n,u=Number(t.y)-a;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!u)return{x:0,y:0};let f,g;return Math.abs(u)*c>Math.abs(r)*v?(u<0&&(v=-v),f=v*r/u,g=v):(r<0&&(c=-c),f=c,g=c*u/r),{x:n+f,y:a+g}},qm=e=>{const t=[],n=RP(e)+1;for(let a=0;a<n;a++)t.push([]);e.nodes().forEach(a=>{const r=e.node(a);if(!r)return;const u=r.rank;u!==void 0&&t[u]&&t[u].push(a)});for(let a=0;a<n;a++)t[a]=t[a].sort((r,u)=>{var c,v;return eZ((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(u))===null||v===void 0?void 0:v.order)});return t},rZ=e=>{const t=e.nodes().filter(a=>{var r;return((r=e.node(a))===null||r===void 0?void 0:r.rank)!==void 0}).map(a=>e.node(a).rank),n=Math.min(...t);e.nodes().forEach(a=>{const r=e.node(a);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},oZ=e=>{const t=e.nodes(),n=t.filter(v=>{var f;return((f=e.node(v))===null||f===void 0?void 0:f.rank)!==void 0}).map(v=>e.node(v).rank),a=Math.min(...n),r=[];t.forEach(v=>{var f;const g=(((f=e.node(v))===null||f===void 0?void 0:f.rank)||0)-a;r[g]||(r[g]=[]),r[g].push(v)});let u=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const f=r[v];f===void 0?v%c!==0&&(u-=1):u&&(f==null||f.forEach(g=>{const _=e.node(g);_&&(_.rank=_.rank||0,_.rank+=u)}))}},bA=(e,t,n,a)=>{const r={width:0,height:0};return e_(n)&&e_(a)&&(r.rank=n,r.order=a),Kv(e,"border",r,t)},RP=e=>{let t;return e.nodes().forEach(n=>{var a;const r=(a=e.node(n))===null||a===void 0?void 0:a.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},iZ=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(a=>{t(a)?n.lhs.push(a):n.rhs.push(a)}),n},CP=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},DP=(e,t)=>t(),VE=(e,t)=>e.reduce((n,a)=>{const r=t(n),u=t(a);return r>u?a:n}),aZ=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>lZ(e,t))},lZ=(e,t)=>{let n=t.v,a=e.node(n).rank;const r=t.w,u=e.node(r).rank,c=t.name,v=e.edge(t),f=v.labelRank;if(u===a+1)return;e.removeEdgeObj(t);const g=e.graph();let _,b,O;for(O=0,++a;a<u;++O,++a)v.points=[],b={edgeLabel:v,width:0,height:0,edgeObj:t,rank:a},_=Kv(e,"edge",b,"_d"),a===f&&(b.width=v.width,b.height=v.height,b.dummy="edge-label",b.labelpos=v.labelpos),e.setEdge(n,_,{weight:v.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(_)),n=_;e.setEdge(n,r,{weight:v.weight},c)},uZ=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let a=e.node(n);const r=a.edgeLabel;let u;a.edgeObj&&e.setEdgeObj(a.edgeObj,r);let c=n;for(;a.dummy;)u=e.successors(c)[0],e.removeNode(c),r.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height),c=u,a=e.node(c)})},wA={run:aZ,undo:uZ},jP=e=>{var t;const n={},a=r=>{var u;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(u=e.outEdges(r))===null||u===void 0||u.forEach(f=>{const g=a(f.w),_=e.edge(f).minlen,b=g-_;b&&(v===void 0||b<v)&&(v=b)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>a(r))},sZ=e=>{var t;const n={};let a;const r=v=>{var f;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let _;return(f=e.outEdges(v))===null||f===void 0||f.forEach(b=>{const O=r(b.w),x=e.edge(b).minlen,M=O-x;M&&(_===void 0||M<_)&&(_=M)}),_||(_=0),(a===void 0||_<a)&&(a=_),g.rank=_,_};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),a===void 0&&(a=0);const u={},c=(v,f)=>{var g;const _=e.node(v),b=isNaN(_.layer)?f:_.layer;(_.rank===void 0||_.rank<b)&&(_.rank=b),!u[v]&&(u[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(O=>{c(O.w,b+e.edge(O).minlen)}))};e.nodes().forEach(v=>{const f=e.node(v);f&&(isNaN(f.layer)?f.rank-=a:c(v,f.layer))})},Yd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,cZ=e=>{const t=new If({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});let r,u;for(;fZ(t,e)<a;)r=IP(t,e),u=t.hasNode(r.v)?Yd(e,r):-Yd(e,r),LP(t,e,u);return t},fZ=(e,t)=>{const n=a=>{t.nodeEdges(a).forEach(r=>{const u=r.v,c=a===u?r.w:u;!e.hasNode(c)&&!Yd(t,r)&&(e.setNode(c,{}),e.setEdge(a,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},dZ=e=>{const t=new If({directed:!1}),n=e.nodes()[0],a=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,u;for(;pZ(t,e)<a;)r=IP(t,e),u=t.hasNode(r.v)?Yd(e,r):-Yd(e,r),LP(t,e,u);return t},pZ=(e,t)=>{const n=a=>{var r;(r=t.nodeEdges(a))===null||r===void 0||r.forEach(u=>{const c=u.v,v=a===c?u.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Yd(t,u))&&(e.setNode(v,{}),e.setEdge(a,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},IP=(e,t)=>VE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Yd(t,n):1/0),LP=(e,t,n)=>{e.nodes().forEach(a=>{t.node(a).rank||(t.node(a).rank=0),t.node(a).rank+=n})},{preorder:hZ,postorder:vZ}=GK,mZ=e=>{const t=tZ(e);jP(t);const n=cZ(t);FP(n),$P(n,t);let a,r;for(;a=_Z(n);)r=bZ(n,t,a),wZ(n,t,a,r)},$P=(e,t)=>{let n=vZ(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(a=>{yZ(e,t,a)})},yZ=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=gZ(e,t,n)},gZ=(e,t,n)=>{var a;const u=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,u),f=0;return v||(c=!1,v=t.edgeFromArgs(u,n)),f=v.weight,(a=t.nodeEdges(n))===null||a===void 0||a.forEach(g=>{const _=g.v===n,b=_?g.w:g.v;if(b!==u){const O=_===c,x=t.edge(g).weight;if(f+=O?x:-x,OZ(e,n,b)){const M=e.edgeFromArgs(n,b).cutvalue;f+=O?-M:M}}}),f},FP=(e,t=e.nodes()[0])=>{UP(e,{},1,t)},UP=(e,t,n,a,r)=>{var u;const c=n;let v=n;const f=e.node(a);return t[a]=!0,(u=e.neighbors(a))===null||u===void 0||u.forEach(g=>{t[g]||(v=UP(e,t,v,g,a))}),f.low=c,f.lim=v++,r?f.parent=r:delete f.parent,v},_Z=e=>e.edges().find(t=>e.edge(t).cutvalue<0),bZ=(e,t,n)=>{let a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);const u=e.node(a),c=e.node(r);let v=u,f=!1;u.lim>c.lim&&(v=c,f=!0);const g=t.edges().filter(_=>f===EA(e,e.node(_.v),v)&&f!==EA(e,e.node(_.w),v));return VE(g,_=>Yd(t,_))},wZ=(e,t,n,a)=>{const r=n.v,u=n.w;e.removeEdge(r,u),e.setEdge(a.v,a.w,{}),FP(e),$P(e,t),EZ(e,t)},EZ=(e,t)=>{const n=e.nodes().find(r=>{var u;return!(!((u=t.node(r))===null||u===void 0)&&u.parent)});let a=hZ(e,n);a=a==null?void 0:a.slice(1),a==null||a.forEach(r=>{const u=e.node(r).parent;let c=t.edgeFromArgs(r,u),v=!1;c||(c=t.edgeFromArgs(u,r),v=!0),t.node(r).rank=t.node(u).rank+(v?c.minlen:-c.minlen)})},OZ=(e,t,n)=>e.hasEdge(t,n),EA=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,SZ=e=>{switch(e.graph().ranker){case"network-simplex":AZ(e);break;case"tight-tree":OA(e);break;case"longest-path":xZ(e);break;default:OA(e)}},xZ=jP,OA=e=>{sZ(e),dZ(e)},AZ=e=>{mZ(e)},TZ=e=>{var t;const n={};let a=0;const r=u=>{var c;const v=a;(c=e.children(u))===null||c===void 0||c.forEach(r),n[u]={low:v,lim:a++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},MZ=(e,t,n,a)=>{const r=[],u=[],c=Math.min(t[n].low,t[a].low),v=Math.max(t[n].lim,t[a].lim);let f,g;f=n;do f=e.parent(f),r.push(f);while(f&&(t[f].low>c||v>t[f].lim));for(g=f,f=a;f&&f!==g;)u.push(f),f=e.parent(f);return{lca:g,path:r.concat(u.reverse())}},kZ=e=>{var t;const n=TZ(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(a=>{var r,u;let c=a,v=e.node(c);const f=v.edgeObj;if(!f)return;const g=MZ(e,n,f.v,f.w),_=g.path,b=g.lca;let O=0,x=_[O],M=!0;for(;c!==f.w;){if(v=e.node(c),M){for(;x!==b&&((r=e.node(x))===null||r===void 0?void 0:r.maxRank)<v.rank;)O++,x=_[O];x===b&&(M=!1)}if(!M){for(;O<_.length-1&&((u=e.node(_[O+1]))===null||u===void 0?void 0:u.minRank)<=v.rank;)O++;x=_[O]}e.setParent(c,x),c=e.successors(c)[0]}})},PZ=e=>{var t;const n=Kv(e,"root",{},"_root"),a=NZ(e);let r=Math.max(...Object.values(a));Math.abs(r)===1/0&&(r=1);const u=r-1,c=2*u+1;e.graph().nestingRoot=n,e.edges().forEach(f=>{e.edge(f).minlen*=c});const v=RZ(e)+1;(t=e.children())===null||t===void 0||t.forEach(f=>{VP(e,n,c,v,u,a,f)}),e.graph().nodeRankFactor=c},VP=(e,t,n,a,r,u,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const f=bA(e,"_bt"),g=bA(e,"_bb"),_=e.node(c);e.setParent(f,c),_.borderTop=f,e.setParent(g,c),_.borderBottom=g,v==null||v.forEach(b=>{VP(e,t,n,a,r,u,b);const O=e.node(b),x=O.borderTop?O.borderTop:b,M=O.borderBottom?O.borderBottom:b,A=O.borderTop?a:2*a,E=x!==M?1:r-u[c]+1;e.setEdge(f,x,{minlen:E,weight:A,nestingEdge:!0}),e.setEdge(M,g,{minlen:E,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,f,{weight:0,minlen:r+u[c]})},NZ=e=>{var t;const n={},a=(r,u)=>{const c=e.children(r);c==null||c.forEach(v=>a(v,u+1)),n[r]=u};return(t=e.children())===null||t===void 0||t.forEach(r=>a(r,1)),n},RZ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},CZ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},SA={run:PZ,cleanup:CZ},DZ=e=>{var t;const n=a=>{const r=e.children(a),u=e.node(a);if(r!=null&&r.length&&r.forEach(c=>n(c)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let c=u.minRank,v=u.maxRank+1;c<v;c+=1)xA(e,"borderLeft","_bl",a,u,c),xA(e,"borderRight","_br",a,u,c)}};(t=e.children())===null||t===void 0||t.forEach(a=>n(a))},xA=(e,t,n,a,r,u)=>{const c={rank:u,borderType:t,width:0,height:0},v=r[t][u-1],f=Kv(e,"border",c,n);r[t][u]=f,e.setParent(f,a),v&&e.setEdge(v,f,{weight:1})},jZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&BP(e)},IZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&LZ(e),(n==="lr"||n==="rl")&&($Z(e),BP(e))},BP=e=>{e.nodes().forEach(t=>{AA(e.node(t))}),e.edges().forEach(t=>{AA(e.edge(t))})},AA=e=>{const t=e.width;e.width=e.height,e.height=t},LZ=e=>{e.nodes().forEach(t=>{$1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>$1(r)),a.hasOwnProperty("y")&&$1(a)})},$1=e=>{e!=null&&e.y&&(e.y=-e.y)},$Z=e=>{e.nodes().forEach(t=>{F1(e.node(t))}),e.edges().forEach(t=>{var n;const a=e.edge(t);(n=a.points)===null||n===void 0||n.forEach(r=>F1(r)),a.hasOwnProperty("x")&&F1(a)})},F1=e=>{const t=e.x;e.x=e.y,e.y=t},TA={adjust:jZ,undo:IZ};function FZ(e){return Array.isArray(e)}function Ww(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],a=1;a<t;a++)n=Math.max(n,e[a]);return n}const MA=function(e){if(FZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},kA=e=>{const t={},n=e.nodes().filter(_=>{var b;return!(!((b=e.children(_))===null||b===void 0)&&b.length)}),a=n.map(_=>e.node(_).rank),r=Ww(a),u=[];for(let _=0;_<r+1;_++)u.push([]);const c=_=>{var b;if(t.hasOwnProperty(_))return;t[_]=!0;const O=e.node(_);isNaN(O.rank)||u[O.rank].push(_),(b=e.successors(_))===null||b===void 0||b.forEach(x=>c(x))},v=n.sort((_,b)=>e.node(_).rank-e.node(b).rank),g=v.filter(_=>e.node(_).fixorder!==void 0).sort((_,b)=>e.node(_).fixorder-e.node(b).fixorder);return g==null||g.forEach(_=>{isNaN(e.node(_).rank)||u[e.node(_).rank].push(_),t[_]=!0}),v==null||v.forEach(c),u},UZ=(e,t,n)=>{const a=nZ(n,n.map((_,b)=>b)),u=t.map(_=>{var b;const O=(b=e.outEdges(_))===null||b===void 0?void 0:b.map(x=>({pos:a[x.w]||0,weight:e.edge(x).weight}));return O==null?void 0:O.sort((x,M)=>x.pos-M.pos)}).flat().filter(_=>_!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const f=Array(v).fill(0,0,v);let g=0;return u==null||u.forEach(_=>{if(_){let b=_.pos+c;f[b]+=_.weight;let O=0;for(;b>0;)b%2&&(O+=f[b+1]),b=b-1>>1,f[b]+=_.weight;g+=_.weight*O}}),g},PA=(e,t)=>{let n=0;for(let a=1;a<(t==null?void 0:t.length);a+=1)n+=UZ(e,t[a-1],t[a]);return n},VZ=(e,t,n)=>{const a=BZ(e),r=new If({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(u=>e.node(u));return e.nodes().forEach(u=>{var c;const v=e.node(u),f=e.parent(u);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(u),r.setParent(u,f||a),(c=e[n](u))===null||c===void 0||c.forEach(g=>{const _=g.v===u?g.w:g.v,b=r.edgeFromArgs(_,u),O=b!==void 0?b.weight:0;r.setEdge(_,u,{weight:e.edge(g).weight+O})}),v.hasOwnProperty("minRank")&&r.setNode(u,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},BZ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},WZ=(e,t,n)=>{const a={};let r;n==null||n.forEach(u=>{let c=e.parent(u),v,f;for(;c;){if(v=e.parent(c),v?(f=a[v],a[v]=c):(f=r,r=c),f&&f!==c){t.setEdge(f,c);return}c=v}})},GZ=(e,t)=>t.map(n=>{const a=e.inEdges(n);if(!(a!=null&&a.length))return{v:n};{const r={sum:0,weight:0};return a==null||a.forEach(u=>{const c=e.edge(u),v=e.node(u.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),zZ=(e,t)=>{var n,a,r;const u={};e==null||e.forEach((v,f)=>{u[v.v]={i:f,indegree:0,in:[],out:[],vs:[v.v]};const g=u[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const f=u[v.v],g=u[v.w];f!==void 0&&g!==void 0&&(g.indegree++,f.out.push(u[v.w]))});const c=(r=(a=Object.values(u)).filter)===null||r===void 0?void 0:r.call(a,v=>!v.indegree);return HZ(c)},HZ=e=>{var t,n;const a=[],r=f=>g=>{g.merged||(g.barycenter===void 0||f.barycenter===void 0||g.barycenter>=f.barycenter)&&XZ(f,g)},u=f=>g=>{g.in.push(f),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const f=e.pop();a.push(f),(t=f.in.reverse())===null||t===void 0||t.forEach(g=>r(f)(g)),(n=f.out)===null||n===void 0||n.forEach(g=>u(f)(g))}const c=a.filter(f=>!f.merged),v=["vs","i","barycenter","weight"];return c.map(f=>{const g={};return v==null||v.forEach(_=>{f[_]!==void 0&&(g[_]=f[_])}),g})},XZ=(e,t)=>{var n;let a=0,r=0;e.weight&&(a+=e.barycenter*e.weight,r+=e.weight),t.weight&&(a+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=a/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},qZ=(e,t,n,a)=>{const r=iZ(e,O=>{const x=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return a?!x&&O.hasOwnProperty("barycenter"):x||O.hasOwnProperty("barycenter")}),u=r.lhs,c=r.rhs.sort((O,x)=>-O.i- -x.i),v=[];let f=0,g=0,_=0;u==null||u.sort(YZ(!!t,!!n)),_=NA(v,c,_),u==null||u.forEach(O=>{var x;_+=(x=O.vs)===null||x===void 0?void 0:x.length,v.push(O.vs),f+=O.barycenter*O.weight,g+=O.weight,_=NA(v,c,_)});const b={vs:v.flat()};return g&&(b.barycenter=f/g,b.weight=g),b},NA=(e,t,n)=>{let a=n,r;for(;t.length&&(r=t[t.length-1]).i<=a;)t.pop(),e==null||e.push(r.vs),a++;return a},YZ=(e,t)=>(n,a)=>{if(n.fixorder!==void 0&&a.fixorder!==void 0)return n.fixorder-a.fixorder;if(n.barycenter<a.barycenter)return-1;if(n.barycenter>a.barycenter)return 1;if(t&&n.order!==void 0&&a.order!==void 0){if(n.order<a.order)return-1;if(n.order>a.order)return 1}return e?a.i-n.i:n.i-a.i},WP=(e,t,n,a,r,u)=>{var c,v,f,g;let _=e.children(t);const b=e.node(t),O=b?b.borderLeft:void 0,x=b?b.borderRight:void 0,M={};O&&(_=_==null?void 0:_.filter(j=>j!==O&&j!==x));const A=GZ(e,_||[]);A==null||A.forEach(j=>{var U;if(!((U=e.children(j.v))===null||U===void 0)&&U.length){const F=WP(e,j.v,n,a,u);M[j.v]=F,F.hasOwnProperty("barycenter")&&ZZ(j,F)}});const E=zZ(A,n);KZ(E,M),(c=E.filter(j=>j.vs.length>0))===null||c===void 0||c.forEach(j=>{const U=e.node(j.vs[0]);U&&(j.fixorder=U.fixorder,j.order=U.order)});const D=qZ(E,a,r,u);if(O&&(D.vs=[O,D.vs,x].flat(),!((v=e.predecessors(O))===null||v===void 0)&&v.length)){const j=e.node(((f=e.predecessors(O))===null||f===void 0?void 0:f[0])||""),U=e.node(((g=e.predecessors(x))===null||g===void 0?void 0:g[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+j.order+U.order)/(D.weight+2),D.weight+=2}return D},KZ=(e,t)=>{e==null||e.forEach(n=>{var a;const r=(a=n.vs)===null||a===void 0?void 0:a.map(u=>t[u]?t[u].vs:u);n.vs=r.flat()})},ZZ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},JZ=(e,t)=>{const n=RP(e),a=[],r=[];for(let _=1;_<n+1;_++)a.push(_);for(let _=n-1;_>-1;_--)r.push(_);const u=RA(e,a,"inEdges"),c=RA(e,r,"outEdges");let v=kA(e);U1(e,v);let f=Number.POSITIVE_INFINITY,g;for(let _=0,b=0;b<4;++_,++b){CA(_%2?u:c,_%4>=2,!1,t),v=qm(e);const O=PA(e,v);O<f&&(b=0,g=t_(v),f=O)}v=kA(e),U1(e,v);for(let _=0,b=0;b<4;++_,++b){CA(_%2?u:c,_%4>=2,!0,t),v=qm(e);const O=PA(e,v);O<f&&(b=0,g=t_(v),f=O)}U1(e,g)},RA=(e,t,n)=>t.map(a=>VZ(e,a,n)),CA=(e,t,n,a)=>{const r=new If;e==null||e.forEach(u=>{var c;const v=u.graph().root,f=WP(u,v,r,t,n,a);for(let g=0;g<((c=f.vs)===null||c===void 0?void 0:c.length);g++){const _=u.node(f.vs[g]);_&&(_.order=g)}WZ(u,r,f.vs)})},U1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((a,r)=>{e.node(a).order=r})})};class QZ extends Yv{}const eJ=(e,t)=>{const n={},a=(r,u)=>{let c=0,v=0;const f=r.length,g=u==null?void 0:u[(u==null?void 0:u.length)-1];return u==null||u.forEach((_,b)=>{var O;const x=nJ(e,_),M=x?e.node(x).order:f;(x||_===g)&&((O=u.slice(v,b+1))===null||O===void 0||O.forEach(A=>{var E;(E=e.predecessors(A))===null||E===void 0||E.forEach(D=>{var j;const U=e.node(D),F=U.order;(F<c||M<F)&&!(U.dummy&&(!((j=e.node(A))===null||j===void 0)&&j.dummy))&&GP(n,D,A)})}),v=b+1,c=M)}),u};return t!=null&&t.length&&t.reduce(a),n},tJ=(e,t)=>{const n={};function a(v,f,g,_,b){var O,x;let M;for(let A=f;A<g;A++)M=v[A],!((O=e.node(M))===null||O===void 0)&&O.dummy&&((x=e.predecessors(M))===null||x===void 0||x.forEach(E=>{const D=e.node(E);D.dummy&&(D.order<_||D.order>b)&&GP(n,E,M)}))}function r(v){return JSON.stringify(v.slice(1))}function u(v,f){const g=r(v);f.get(g)||(a(...v),f.set(g,!0))}const c=(v,f)=>{let g=-1,_,b=0;const O=new Map;return f==null||f.forEach((x,M)=>{var A;if(((A=e.node(x))===null||A===void 0?void 0:A.dummy)==="border"){const E=e.predecessors(x)||[];E.length&&(_=e.node(E[0]).order,u([f,b,M,g,_],O),b=M,g=_)}u([f,b,f.length,_,v.length],O)}),f};return t!=null&&t.length&&t.reduce(c),n},nJ=(e,t)=>{var n,a;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(a=e.predecessors(t))===null||a===void 0?void 0:a.find(r=>e.node(r).dummy)},GP=(e,t,n)=>{let a=t,r=n;if(a>r){const c=a;a=r,r=c}let u=e[a];u||(e[a]=u={}),u[r]=!0},rJ=(e,t,n)=>{let a=t,r=n;if(a>r){const u=t;a=r,r=u}return!!e[a]},oJ=(e,t,n,a)=>{const r={},u={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((f,g)=>{r[f]=f,u[f]=f,c[f]=g})}),t==null||t.forEach(v=>{let f=-1;v==null||v.forEach(g=>{let _=a(g);if(_.length){_=_.sort((O,x)=>c[O]-c[x]);const b=(_.length-1)/2;for(let O=Math.floor(b),x=Math.ceil(b);O<=x;++O){const M=_[O];u[g]===g&&f<c[M]&&!rJ(n,g,M)&&(u[M]=g,u[g]=r[g]=r[M],f=c[M])}}})}),{root:r,align:u}},iJ=(e,t,n,a,r)=>{var u;const c={},v=aJ(e,t,n,r),f=r?"borderLeft":"borderRight",g=(O,x)=>{let M=v.nodes(),A=M.pop();const E={};for(;A;)E[A]?O(A):(E[A]=!0,M.push(A),M=M.concat(x(A))),A=M.pop()},_=O=>{c[O]=(v.inEdges(O)||[]).reduce((x,M)=>Math.max(x,(c[M.v]||0)+v.edge(M)),0)},b=O=>{const x=(v.outEdges(O)||[]).reduce((A,E)=>Math.min(A,(c[E.w]||0)-v.edge(E)),Number.POSITIVE_INFINITY),M=e.node(O);x!==Number.POSITIVE_INFINITY&&M.borderType!==f&&(c[O]=Math.max(c[O],x))};return g(_,v.predecessors.bind(v)),g(b,v.successors.bind(v)),(u=Object.values(a))===null||u===void 0||u.forEach(O=>{c[O]=c[n[O]]}),c},aJ=(e,t,n,a)=>{const r=new QZ,u=e.graph(),c=cJ(u.nodesep,u.edgesep,a);return t==null||t.forEach(v=>{let f;v==null||v.forEach(g=>{const _=n[g];if(r.setNode(_),f){const b=n[f],O=r.edgeFromArgs(b,_);r.setEdge(b,_,Math.max(c(e,g,f),O||0))}f=g})}),r},lJ=(e,t)=>VE(Object.values(t),n=>{var a;let r=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(a=Object.keys(n))===null||a===void 0||a.forEach(c=>{const v=n[c],f=fJ(e,c)/2;r=Math.max(v+f,r),u=Math.min(v-f,u)}),r-u});function uJ(e,t){const n=Object.values(t),a=MA(n),r=Ww(n);["u","d"].forEach(u=>{["l","r"].forEach(c=>{const v=u+c,f=e[v];let g;if(f===t)return;const _=Object.values(f);g=c==="l"?a-MA(_):r-Ww(_),g&&(e[v]={},Object.keys(f).forEach(b=>{e[v][b]=f[b]+g}))})})}const sJ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(a=>{if(t)n[a]=e[t.toLowerCase()][a];else{const r=Object.values(e).map(u=>u[a]);n[a]=(r[0]+r[1])/2}}),n},cJ=(e,t,n)=>(a,r,u)=>{const c=a.node(r),v=a.node(u);let f=0,g;if(f+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(f+=n?g:-g),g=0,f+=(c.dummy?t:e)/2,f+=(v.dummy?t:e)/2,f+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(f+=n?g:-g),g=0,f},fJ=(e,t)=>e.node(t).width||0,dJ=e=>{const t=qm(e),n=e.graph().ranksep;let a=0;t==null||t.forEach(r=>{const u=r.map(v=>e.node(v).height),c=Math.max(...u,0);r==null||r.forEach(v=>{e.node(v).y=a+c/2}),a+=c+n})},pJ=e=>{const t=qm(e),n=Object.assign(eJ(e,t),tJ(e,t)),a={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(b=>Object.values(b).reverse()));const f=(c==="u"?e.predecessors:e.successors).bind(e),g=oJ(e,r,n,f),_=iJ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(_).forEach(b=>_[b]=-_[b]),a[c+v]=_})});const u=lJ(e,a);return u&&uJ(a,u),sJ(a,e.graph().align)},hJ=e=>{var t;const n=NP(e);dJ(n);const a=pJ(n);(t=Object.keys(a))===null||t===void 0||t.forEach(r=>{n.node(r).x=a[r]})},vJ=(e,t)=>{const a=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...a),u=[];for(let c=0;c<r+1;c++)u[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=u[v.rank].length,u[v.rank].push(c))})},mJ=(e,t)=>{const n=t&&t.debugTiming?CP:DP;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{gJ(e,t.prevGraph)});const a=n("  buildLayoutGraph",()=>AJ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{TJ(a)});try{n("  runLayout",()=>{yJ(a,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{_J(e,a)})})},yJ=(e,t,n)=>{t("    removeSelfEdges",()=>{IJ(e)}),t("    acyclic",()=>{gA.run(e)}),t("    nestingGraph.run",()=>{SA.run(e)}),t("    rank",()=>{SZ(NP(e))}),t("    injectEdgeLabelProxies",()=>{MJ(e)}),t("    removeEmptyRanks",()=>{oZ(e)}),t("    nestingGraph.cleanup",()=>{SA.cleanup(e)}),t("    normalizeRanks",()=>{rZ(e)}),t("    assignRankMinMax",()=>{kJ(e)}),t("    removeEdgeLabelProxies",()=>{PJ(e)}),t("    normalize.run",()=>{wA.run(e)}),t("    parentDummyChains",()=>{kZ(e)}),t("    addBorderSegments",()=>{DZ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{vJ(e,n.nodeOrder)}),t("    order",()=>{JZ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{LJ(e)}),t("    adjustCoordinateSystem",()=>{TA.adjust(e)}),t("    position",()=>{hJ(e)}),t("    positionSelfEdges",()=>{$J(e)}),t("    removeBorderNodes",()=>{jJ(e)}),t("    normalize.undo",()=>{wA.undo(e)}),t("    fixupEdgeLabelCoords",()=>{CJ(e)}),t("    undoCoordinateSystem",()=>{TA.undo(e)}),t("    translateGraph",()=>{NJ(e)}),t("    assignNodeIntersects",()=>{RJ(e)}),t("    reversePoints",()=>{DJ(e)}),t("    acyclic.undo",()=>{gA.undo(e)})},gJ=(e,t)=>{e.nodes().forEach(n=>{const a=e.node(n),r=t.node(n);r!==void 0?(a.fixorder=r._order,delete r._order):delete a.fixorder})},_J=(e,t)=>{e.nodes().forEach(n=>{var a;const r=e.node(n);if(r){const u=t.node(n);r.x=u.x,r.y=u.y,r._order=u.order,r._rank=u.rank,!((a=t.children(n))===null||a===void 0)&&a.length&&(r.width=u.width,r.height=u.height)}}),e.edges().forEach(n=>{const a=e.edge(n),r=t.edge(n);a.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},bJ=["nodesep","edgesep","ranksep","marginx","marginy"],wJ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},V1=["acyclicer","ranker","rankdir","align"],EJ=["width","height","layer","fixorder"],OJ={width:0,height:0},SJ=["minlen","weight","width","height","labeloffset"],xJ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},B1=["labelpos"],AJ=e=>{const t=new If({multigraph:!0,compound:!0}),n=G1(e.graph()),a={};return V1==null||V1.forEach(r=>{n[r]!==void 0&&(a[r]=n[r])}),t.setGraph(Object.assign({},wJ,W1(n,bJ),a)),e.nodes().forEach(r=>{const u=G1(e.node(r)),c=Object.assign(Object.assign({},OJ),u),v=W1(c,EJ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const u=G1(e.edge(r)),c={};B1==null||B1.forEach(v=>{u[v]!==void 0&&(c[v]=u[v])}),t.setEdgeObj(r,Object.assign({},xJ,W1(u,SJ),c))}),t},TJ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const a=e.node(n);isNaN(a.layer)||a.layer||(a.layer=0)}),e.edges().forEach(n=>{var a;const r=e.edge(n);r.minlen*=2,((a=r.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},MJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const a=e.node(t.v),r=e.node(t.w),u={e:t,rank:(r.rank-a.rank)/2+a.rank};Kv(e,"edge-proxy",u,"_ep")}})},kJ=e=>{let t=0;e.nodes().forEach(n=>{var a,r;const u=e.node(n);u.borderTop&&(u.minRank=(a=e.node(u.borderTop))===null||a===void 0?void 0:a.rank,u.maxRank=(r=e.node(u.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,u.maxRank||-1/0))}),e.graph().maxRank=t},PJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},NJ=e=>{let t,n=0,a,r=0;const u=e.graph(),c=u.marginx||0,v=u.marginy||0,f=g=>{if(!g)return;const _=g.x,b=g.y,O=g.width,x=g.height;!isNaN(_)&&!isNaN(O)&&(t===void 0&&(t=_-O/2),t=Math.min(t,_-O/2),n=Math.max(n,_+O/2)),!isNaN(b)&&!isNaN(x)&&(a===void 0&&(a=b-x/2),a=Math.min(a,b-x/2),r=Math.max(r,b+x/2))};e.nodes().forEach(g=>{f(e.node(g))}),e.edges().forEach(g=>{const _=e.edge(g);_!=null&&_.hasOwnProperty("x")&&f(_)}),t-=c,a-=v,e.nodes().forEach(g=>{const _=e.node(g);_&&(_.x-=t,_.y-=a)}),e.edges().forEach(g=>{var _;const b=e.edge(g);(_=b.points)===null||_===void 0||_.forEach(O=>{O.x-=t,O.y-=a}),b.hasOwnProperty("x")&&(b.x-=t),b.hasOwnProperty("y")&&(b.y-=a)}),u.width=n-t+c,u.height=r-a+v},RJ=e=>{e.edges().forEach(t=>{const n=e.edge(t),a=e.node(t.v),r=e.node(t.w);let u,c;n.points?(u=n.points[0],c=n.points[n.points.length-1]):(n.points=[],u=r,c=a),n.points.unshift(_A(a,u)),n.points.push(_A(r,c))})},CJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},DJ=e=>{e.edges().forEach(t=>{var n;const a=e.edge(t);a.reversed&&((n=a.points)===null||n===void 0||n.reverse())})},jJ=e=>{e.nodes().forEach(t=>{var n,a,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const u=e.node(t),c=e.node(u.borderTop),v=e.node(u.borderBottom),f=e.node(u.borderLeft[((a=u.borderLeft)===null||a===void 0?void 0:a.length)-1]),g=e.node(u.borderRight[((r=u.borderRight)===null||r===void 0?void 0:r.length)-1]);u.width=Math.abs((g==null?void 0:g.x)-(f==null?void 0:f.x))||10,u.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,u.x=((f==null?void 0:f.x)||0)+u.width/2,u.y=((c==null?void 0:c.y)||0)+u.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},IJ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},LJ=e=>{const t=qm(e);t==null||t.forEach(n=>{let a=0;n==null||n.forEach((r,u)=>{var c;const v=e.node(r);v.order=u+a,(c=v.selfEdges)===null||c===void 0||c.forEach(f=>{Kv(e,"selfedge",{width:f.label.width,height:f.label.height,rank:v.rank,order:u+ ++a,e:f.e,label:f.label},"_se")}),delete v.selfEdges})})},$J=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const a=e.node(n.e.v),r=a.x+a.width/2,u=a.y,c=n.x-r,v=a.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:u-v},{x:r+5*c/6,y:u-v},{y:u,x:r+c},{x:r+5*c/6,y:u+v},{x:r+2*c/3,y:u+v}],n.label.x=n.x,n.label.y=n.y}})},W1=(e,t)=>{const n={};return t==null||t.forEach(a=>{e[a]!==void 0&&(n[a]=+e[a])}),n},G1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},FJ={layout:mJ,util:{time:CP,notime:DP}};class UJ extends oK{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const a=this,{nodes:r}=a,u=r.find(c=>c.id===n);return u?u.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,a,r;const u=this,{nodes:c,nodeSize:v,rankdir:f,combos:g,begin:_,radial:b,comboEdges:O=[],vedges:x=[]}=u;if(!c)return;const M=u.edges||[],A=new If({multigraph:!0,compound:!0});u.nodeMap={};const E={};c.forEach(X=>{u.nodeMap[X.id]=X,X.comboId&&(E[X.comboId]=E[X.comboId]||[],E[X.comboId].push(X.id))});let D=[];const j={};!((t=u.nodeOrder)===null||t===void 0)&&t.length?(u.nodeOrder.forEach(X=>{j[X]=!0,D.push(u.nodeMap[X])}),c.forEach(X=>{j[X.id]||D.push(X)})):D=c;let U;v?uA(v)?U=()=>v:U=()=>[v,v]:U=X=>X.size?uA(X.size)?X.size:SP(X.size)?[X.size.width||40,X.size.height||40]:[X.size,X.size]:[40,40];const F=sA(u.ranksep,50,u.ranksepFunc),I=sA(u.nodesep,50,u.nodesepFunc);let V=I,Y=F;(f==="LR"||f==="RL")&&(V=F,Y=I),A.setDefaultEdgeLabel(()=>({})),A.setGraph(u);const K={};this.sortByCombo&&g&&g.forEach(X=>{if(K[X.id]=X,X.collapsed){const ee=U(X),pe=Y(X),ce=V(X),Pe=ee[0]+2*ce,Ee=ee[1]+2*pe;A.setNode(X.id,{width:Pe,height:Ee})}X.parentId&&(K[X.parentId]||A.setNode(X.parentId,{}),A.setParent(X.id,X.parentId))}),D.filter(X=>X.layout!==!1).forEach(X=>{const ee=U(X),pe=Y(X),ce=V(X),Pe=ee[0]+2*ce,Ee=ee[1]+2*pe,le=X.layer;e_(le)?A.setNode(X.id,{width:Pe,height:Ee,layer:le}):A.setNode(X.id,{width:Pe,height:Ee}),this.sortByCombo&&X.comboId&&(K[X.comboId]||(K[X.comboId]={id:X.comboId},A.setNode(X.comboId,{})),A.setParent(X.id,X.comboId))}),M.forEach(X=>{const ee=fv(X,"source"),pe=fv(X,"target");this.layoutNode(ee)&&this.layoutNode(pe)&&A.setEdge(ee,pe,{weight:X.weight||1})}),(n=O==null?void 0:O.concat(x||[]))===null||n===void 0||n.forEach(X=>{var ee,pe;const{source:ce,target:Pe}=X,Ee=!((ee=K[ce])===null||ee===void 0)&&ee.collapsed?[ce]:E[ce]||[ce],le=!((pe=K[Pe])===null||pe===void 0)&&pe.collapsed?[Pe]:E[Pe]||[Pe];Ee.forEach(ie=>{le.forEach($e=>{A.setEdge(ie,$e,{weight:X.weight||1})})})});let H;!((a=u.preset)===null||a===void 0)&&a.nodes&&(H=new If({multigraph:!0,compound:!0}),u.preset.nodes.forEach(X=>{H==null||H.setNode(X.id,X)})),FJ.layout(A,{prevGraph:H,edgeLabelSpace:u.edgeLabelSpace,keepNodeOrder:!!u.nodeOrder,nodeOrder:u.nodeOrder});const B=[0,0];if(_){let X=1/0,ee=1/0;A.nodes().forEach(pe=>{const ce=A.node(pe);X>ce.x&&(X=ce.x),ee>ce.y&&(ee=ce.y)}),A.edges().forEach(pe=>{var ce;(ce=A.edge(pe).points)===null||ce===void 0||ce.forEach(Ee=>{X>Ee.x&&(X=Ee.x),ee>Ee.y&&(ee=Ee.y)})}),B[0]=_[0]-X,B[1]=_[1]-ee}const z=f==="LR"||f==="RL";if(b){const{focusNode:X,ranksep:ee,getRadialPos:pe}=this,ce=iK(X)?X:X==null?void 0:X.id,Pe=ce?(r=A.node(ce))===null||r===void 0?void 0:r._rank:0,Ee=[],le=z?"y":"x",ie=z?"height":"width";let $e=1/0,Ge=-1/0;A.nodes().forEach(Se=>{const Ce=A.node(Se);if(!u.nodeMap[Se])return;const Ye=I(u.nodeMap[Se]);if(Pe===0)Ee[Ce._rank]||(Ee[Ce._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ee[Ce._rank].nodes.push(Se),Ee[Ce._rank].totalWidth+=Ye*2+Ce[ie],Ee[Ce._rank].maxSize<Math.max(Ce.width,Ce.height)&&(Ee[Ce._rank].maxSize=Math.max(Ce.width,Ce.height));else{const Wt=Ce._rank-Pe;if(Wt===0)Ee[Wt]||(Ee[Wt]={nodes:[],totalWidth:0,maxSize:-1/0}),Ee[Wt].nodes.push(Se),Ee[Wt].totalWidth+=Ye*2+Ce[ie],Ee[Wt].maxSize<Math.max(Ce.width,Ce.height)&&(Ee[Wt].maxSize=Math.max(Ce.width,Ce.height));else{const Qt=Math.abs(Wt);Ee[Qt]||(Ee[Qt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ee[Qt].totalWidth+=Ye*2+Ce[ie],Ee[Qt].maxSize<Math.max(Ce.width,Ce.height)&&(Ee[Qt].maxSize=Math.max(Ce.width,Ce.height)),Wt<0?Ee[Qt].left.push(Se):Ee[Qt].right.push(Se)}}const bt=Ce[le]-Ce[ie]/2-Ye,vt=Ce[le]+Ce[ie]/2+Ye;bt<$e&&($e=bt),vt>Ge&&(Ge=vt)});let ht=ee||50;const Fe={},Nt=(Ge-$e)/.9,Yt=[($e+Ge-Nt)*.5,($e+Ge+Nt)*.5],kt=(Se,Ce,Ye=-1/0,bt=[0,1])=>{let vt=Ye;return Se.forEach(Wt=>{const Qt=A.node(Wt);Fe[Wt]=Ce;const{x:Gt,y:Kt}=pe(Qt[le],Yt,Nt,Ce,bt);if(!u.nodeMap[Wt])return;u.nodeMap[Wt].x=Gt+B[0],u.nodeMap[Wt].y=Kt+B[1],u.nodeMap[Wt]._order=Qt._order;const rt=F(u.nodeMap[Wt]);vt<rt&&(vt=rt)}),vt};let On=!0;const Be=0;Ee.forEach(Se=>{var Ce,Ye,bt,vt,Wt,Qt,Gt;if(!(!((Ce=Se==null?void 0:Se.nodes)===null||Ce===void 0)&&Ce.length)&&!(!((Ye=Se==null?void 0:Se.left)===null||Ye===void 0)&&Ye.length)&&!(!((bt=Se==null?void 0:Se.right)===null||bt===void 0)&&bt.length))return;if(On&&Se.nodes.length===1){const rt=Se.nodes[0];if(!u.nodeMap[rt])return;u.nodeMap[rt].x=B[0],u.nodeMap[rt].y=B[1],Fe[Se.nodes[0]]=0,ht=F(u.nodeMap[rt]),On=!1;return}ht=Math.max(ht,Se.totalWidth/(2*Math.PI));let Kt=-1/0;if(Pe===0||!((vt=Se.nodes)===null||vt===void 0)&&vt.length)Kt=kt(Se.nodes,ht,Kt,[0,1]);else{const rt=((Wt=Se.left)===null||Wt===void 0?void 0:Wt.length)/(((Qt=Se.left)===null||Qt===void 0?void 0:Qt.length)+((Gt=Se.right)===null||Gt===void 0?void 0:Gt.length));Kt=kt(Se.left,ht,Kt,[0,rt]),Kt=kt(Se.right,ht,Kt,[rt+.05,1])}ht+=Kt,On=!1,Be-Se.maxSize}),A.edges().forEach(Se=>{var Ce,Ye,bt;const vt=A.edge(Se),Wt=M.findIndex(Qt=>{const Gt=fv(Qt,"source"),Kt=fv(Qt,"target");return Gt===Se.v&&Kt===Se.w});if(!(Wt<=-1)&&u.edgeLabelSpace&&u.controlPoints&&M[Wt].type!=="loop"){const Qt=le==="x"?"y":"x",Gt=(Ce=vt==null?void 0:vt.points)===null||Ce===void 0?void 0:Ce.slice(1,vt.points.length-1),Kt=[],rt=(Ye=A.node(Se.v))===null||Ye===void 0?void 0:Ye[Qt],cn=rt-((bt=A.node(Se.w))===null||bt===void 0?void 0:bt[Qt]),We=Fe[Se.v],dn=We-Fe[Se.w];Gt==null||Gt.forEach(er=>{const ae=(er[Qt]-rt)/cn*dn+We,tr=pe(er[le],Yt,Nt,ae);Kt.push({x:tr.x+B[0],y:tr.y+B[1]})}),M[Wt].controlPoints=Kt}})}else{const X=new Set,pe=f==="BT"||f==="RL"?(le,ie)=>ie-le:(le,ie)=>le-ie;A.nodes().forEach(le=>{const ie=A.node(le);if(!ie)return;let $e=this.nodeMap[le];$e||($e=g==null?void 0:g.find(Ge=>Ge.id===le)),$e&&($e.x=ie.x+B[0],$e.y=ie.y+B[1],$e._order=ie._order,X.add(z?$e.x:$e.y))});const ce=Array.from(X).sort(pe),Pe=z?(le,ie)=>le.x!==ie.x:(le,ie)=>le.y!==ie.y,Ee=z?(le,ie,$e)=>{const Ge=Math.max(ie.y,$e.y),ht=Math.min(ie.y,$e.y);return le.filter(Fe=>Fe.y<=Ge&&Fe.y>=ht)}:(le,ie,$e)=>{const Ge=Math.max(ie.x,$e.x),ht=Math.min(ie.x,$e.x);return le.filter(Fe=>Fe.x<=Ge&&Fe.x>=ht)};A.edges().forEach(le=>{var ie;const $e=A.edge(le),Ge=M.findIndex(ht=>{const Fe=fv(ht,"source"),Nt=fv(ht,"target");return Fe===le.v&&Nt===le.w});if(!(Ge<=-1)&&u.edgeLabelSpace&&u.controlPoints&&M[Ge].type!=="loop"){(ie=$e==null?void 0:$e.points)===null||ie===void 0||ie.forEach(Nt=>{Nt.x+=B[0],Nt.y+=B[1]});const ht=u.nodeMap[le.v],Fe=u.nodeMap[le.w];M[Ge].controlPoints=VJ($e==null?void 0:$e.points,ht,Fe,ce,z,Pe,Ee)}})}return u.onLayoutEnd&&u.onLayoutEnd(),{nodes:c,edges:M}}getRadialPos(t,n,a,r,u=[0,1]){let c=(t-n[0])/a;c=c*(u[1]-u[0])+u[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const VJ=(e,t,n,a,r,u,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:f,y:g}=t,{x:_,y:b}=n;if(r&&(f=t.y,g=t.x,_=n.y,b=n.x),b!==g&&f!==_){const O=a.indexOf(g),x=a[O+1];if(x){const E=v[0],D=r?{x:(g+x)/2,y:(E==null?void 0:E.y)||_}:{x:(E==null?void 0:E.x)||_,y:(g+x)/2};(!E||u(E,D))&&v.unshift(D)}const M=a.indexOf(b),A=Math.abs(M-O);if(A===1)v=c(v,t,n),v.length||v.push(r?{x:(g+b)/2,y:f}:{x:f,y:(g+b)/2});else if(A>1){const E=a[M-1];if(E){const D=v[v.length-1],j=r?{x:(b+E)/2,y:(D==null?void 0:D.y)||_}:{x:(D==null?void 0:D.x)||f,y:(b+E)/2};(!D||u(D,j))&&v.push(j)}}}}return v};var DA,jA,IA,LA;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(DA||(DA={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(jA||(jA={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(IA||(IA={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(LA||(LA={}));var yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BE(e,t){return e(t={exports:{}},t.exports),t.exports}var BJ=function(){this.__data__=[],this.size=0},Zv=function(e,t){return e===t||e!=e&&t!=t},R_=function(e,t){for(var n=e.length;n--;)if(Zv(e[n][0],t))return n;return-1},WJ=Array.prototype.splice,GJ=function(e){var t=this.__data__,n=R_(t,e);return!(n<0)&&(n==t.length-1?t.pop():WJ.call(t,n,1),--this.size,!0)},zJ=function(e){var t=this.__data__,n=R_(t,e);return n<0?void 0:t[n][1]},HJ=function(e){return R_(this.__data__,e)>-1},XJ=function(e,t){var n=this.__data__,a=R_(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};function hv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}hv.prototype.clear=BJ,hv.prototype.delete=GJ,hv.prototype.get=zJ,hv.prototype.has=HJ,hv.prototype.set=XJ;var C_=hv,qJ=function(){this.__data__=new C_,this.size=0},YJ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},KJ=function(e){return this.__data__.get(e)},ZJ=function(e){return this.__data__.has(e)},zP=typeof yg=="object"&&yg&&yg.Object===Object&&yg,JJ=typeof self=="object"&&self&&self.Object===Object&&self,Ps=zP||JJ||Function("return this")(),Iu=Ps.Symbol,HP=Object.prototype,QJ=HP.hasOwnProperty,eQ=HP.toString,Om=Iu?Iu.toStringTag:void 0,tQ=function(e){var t=QJ.call(e,Om),n=e[Om];try{e[Om]=void 0;var a=!0}catch{}var r=eQ.call(e);return a&&(t?e[Om]=n:delete e[Om]),r},nQ=Object.prototype.toString,rQ=function(e){return nQ.call(e)},$A=Iu?Iu.toStringTag:void 0,ep=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":$A&&$A in Object(e)?tQ(e):rQ(e)},Cl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},FA,sy=function(e){if(!Cl(e))return!1;var t=ep(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},z1=Ps["__core-js_shared__"],UA=(FA=/[^.]+$/.exec(z1&&z1.keys&&z1.keys.IE_PROTO||""))?"Symbol(src)_1."+FA:"",oQ=function(e){return!!UA&&UA in e},iQ=Function.prototype.toString,hh=function(e){if(e!=null){try{return iQ.call(e)}catch{}try{return e+""}catch{}}return""},aQ=/^\[object .+?Constructor\]$/,lQ=Function.prototype,uQ=Object.prototype,sQ=lQ.toString,cQ=uQ.hasOwnProperty,fQ=RegExp("^"+sQ.call(cQ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dQ=function(e){return!(!Cl(e)||oQ(e))&&(sy(e)?fQ:aQ).test(hh(e))},pQ=function(e,t){return e==null?void 0:e[t]},vh=function(e,t){var n=pQ(e,t);return dQ(n)?n:void 0},Ym=vh(Ps,"Map"),Km=vh(Object,"create"),hQ=function(){this.__data__=Km?Km(null):{},this.size=0},vQ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},mQ=Object.prototype.hasOwnProperty,yQ=function(e){var t=this.__data__;if(Km){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return mQ.call(t,e)?t[e]:void 0},gQ=Object.prototype.hasOwnProperty,_Q=function(e){var t=this.__data__;return Km?t[e]!==void 0:gQ.call(t,e)},bQ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Km&&t===void 0?"__lodash_hash_undefined__":t,this};function vv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}vv.prototype.clear=hQ,vv.prototype.delete=vQ,vv.prototype.get=yQ,vv.prototype.has=_Q,vv.prototype.set=bQ;var VA=vv,wQ=function(){this.size=0,this.__data__={hash:new VA,map:new(Ym||C_),string:new VA}},EQ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},D_=function(e,t){var n=e.__data__;return EQ(t)?n[typeof t=="string"?"string":"hash"]:n.map},OQ=function(e){var t=D_(this,e).delete(e);return this.size-=t?1:0,t},SQ=function(e){return D_(this,e).get(e)},xQ=function(e){return D_(this,e).has(e)},AQ=function(e,t){var n=D_(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function mv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}mv.prototype.clear=wQ,mv.prototype.delete=OQ,mv.prototype.get=SQ,mv.prototype.has=xQ,mv.prototype.set=AQ;var j_=mv,TQ=function(e,t){var n=this.__data__;if(n instanceof C_){var a=n.__data__;if(!Ym||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new j_(a)}return n.set(e,t),this.size=n.size,this};function yv(e){var t=this.__data__=new C_(e);this.size=t.size}yv.prototype.clear=qJ,yv.prototype.delete=YJ,yv.prototype.get=KJ,yv.prototype.has=ZJ,yv.prototype.set=TQ;var Av=yv,WE=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e},n_=function(){try{var e=vh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),I_=function(e,t,n){t=="__proto__"&&n_?n_(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},MQ=Object.prototype.hasOwnProperty,L_=function(e,t,n){var a=e[t];MQ.call(e,t)&&Zv(a,n)&&(n!==void 0||t in e)||I_(e,t,n)},cy=function(e,t,n,a){var r=!n;n||(n={});for(var u=-1,c=t.length;++u<c;){var v=t[u],f=void 0;f===void 0&&(f=e[v]),r?I_(n,v,f):L_(n,v,f)}return n},kQ=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},Ts=function(e){return e!=null&&typeof e=="object"},BA=function(e){return Ts(e)&&ep(e)=="[object Arguments]"},XP=Object.prototype,PQ=XP.hasOwnProperty,NQ=XP.propertyIsEnumerable,jv=BA(function(){return arguments}())?BA:function(e){return Ts(e)&&PQ.call(e,"callee")&&!NQ.call(e,"callee")},Di=Array.isArray,RQ=function(){return!1},rh=BE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Ps.Buffer:void 0,u=(r?r.isBuffer:void 0)||RQ;e.exports=u}),CQ=/^(?:0|[1-9]\d*)$/,$_=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&CQ.test(e))&&e>-1&&e%1==0&&e<t},GE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ai={};ai["[object Float32Array]"]=ai["[object Float64Array]"]=ai["[object Int8Array]"]=ai["[object Int16Array]"]=ai["[object Int32Array]"]=ai["[object Uint8Array]"]=ai["[object Uint8ClampedArray]"]=ai["[object Uint16Array]"]=ai["[object Uint32Array]"]=!0,ai["[object Arguments]"]=ai["[object Array]"]=ai["[object ArrayBuffer]"]=ai["[object Boolean]"]=ai["[object DataView]"]=ai["[object Date]"]=ai["[object Error]"]=ai["[object Function]"]=ai["[object Map]"]=ai["[object Number]"]=ai["[object Object]"]=ai["[object RegExp]"]=ai["[object Set]"]=ai["[object String]"]=ai["[object WeakMap]"]=!1;var DQ=function(e){return Ts(e)&&GE(e.length)&&!!ai[ep(e)]},F_=function(e){return function(t){return e(t)}},Iv=BE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&zP.process,u=function(){try{var c=a&&a.require&&a.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=u}),WA=Iv&&Iv.isTypedArray,fy=WA?F_(WA):DQ,jQ=Object.prototype.hasOwnProperty,qP=function(e,t){var n=Di(e),a=!n&&jv(e),r=!n&&!a&&rh(e),u=!n&&!a&&!r&&fy(e),c=n||a||r||u,v=c?kQ(e.length,String):[],f=v.length;for(var g in e)!t&&!jQ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||u&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||$_(g,f))||v.push(g);return v},IQ=Object.prototype,U_=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||IQ)},YP=function(e,t){return function(n){return e(t(n))}},LQ=YP(Object.keys,Object),$Q=Object.prototype.hasOwnProperty,zE=function(e){if(!U_(e))return LQ(e);var t=[];for(var n in Object(e))$Q.call(e,n)&&n!="constructor"&&t.push(n);return t},Ff=function(e){return e!=null&&GE(e.length)&&!sy(e)},tp=function(e){return Ff(e)?qP(e):zE(e)},FQ=function(e,t){return e&&cy(t,tp(t),e)},UQ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},VQ=Object.prototype.hasOwnProperty,BQ=function(e){if(!Cl(e))return UQ(e);var t=U_(e),n=[];for(var a in e)(a!="constructor"||!t&&VQ.call(e,a))&&n.push(a);return n},mh=function(e){return Ff(e)?qP(e,!0):BQ(e)},WQ=function(e,t){return e&&cy(t,mh(t),e)},KP=BE(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Ps.Buffer:void 0,u=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var f=c.length,g=u?u(f):new c.constructor(f);return c.copy(g),g}}),ZP=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t},JP=function(e,t){for(var n=-1,a=e==null?0:e.length,r=0,u=[];++n<a;){var c=e[n];t(c,n,e)&&(u[r++]=c)}return u},QP=function(){return[]},GQ=Object.prototype.propertyIsEnumerable,GA=Object.getOwnPropertySymbols,HE=GA?function(e){return e==null?[]:(e=Object(e),JP(GA(e),function(t){return GQ.call(e,t)}))}:QP,zQ=function(e,t){return cy(e,HE(e),t)},XE=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e},V_=YP(Object.getPrototypeOf,Object),eN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)XE(t,HE(e)),e=V_(e);return t}:QP,HQ=function(e,t){return cy(e,eN(e),t)},tN=function(e,t,n){var a=t(e);return Di(e)?a:XE(a,n(e))},Gw=function(e){return tN(e,tp,HE)},XQ=function(e){return tN(e,mh,eN)},zw=vh(Ps,"DataView"),Hw=vh(Ps,"Promise"),Tv=vh(Ps,"Set"),Xw=vh(Ps,"WeakMap"),qQ=hh(zw),YQ=hh(Ym),KQ=hh(Hw),ZQ=hh(Tv),JQ=hh(Xw),Kp=ep;(zw&&Kp(new zw(new ArrayBuffer(1)))!="[object DataView]"||Ym&&Kp(new Ym)!="[object Map]"||Hw&&Kp(Hw.resolve())!="[object Promise]"||Tv&&Kp(new Tv)!="[object Set]"||Xw&&Kp(new Xw)!="[object WeakMap]")&&(Kp=function(e){var t=ep(e),n=t=="[object Object]"?e.constructor:void 0,a=n?hh(n):"";if(a)switch(a){case qQ:return"[object DataView]";case YQ:return"[object Map]";case KQ:return"[object Promise]";case ZQ:return"[object Set]";case JQ:return"[object WeakMap]"}return t});var oh=Kp,QQ=Object.prototype.hasOwnProperty,eee=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&QQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},r_=Ps.Uint8Array,qE=function(e){var t=new e.constructor(e.byteLength);return new r_(t).set(new r_(e)),t},tee=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},nee=/\w*$/,ree=function(e){var t=new e.constructor(e.source,nee.exec(e));return t.lastIndex=e.lastIndex,t},zA=Iu?Iu.prototype:void 0,HA=zA?zA.valueOf:void 0,oee=function(e){return HA?Object(HA.call(e)):{}},nN=function(e,t){var n=t?qE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},iee=function(e,t,n){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return qE(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return tee(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nN(e,n);case"[object Map]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return ree(e);case"[object Set]":return new a;case"[object Symbol]":return oee(e)}},XA=Object.create,rN=function(){function e(){}return function(t){if(!Cl(t))return{};if(XA)return XA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),oN=function(e){return typeof e.constructor!="function"||U_(e)?{}:rN(V_(e))},aee=function(e){return Ts(e)&&oh(e)=="[object Map]"},qA=Iv&&Iv.isMap,lee=qA?F_(qA):aee,uee=function(e){return Ts(e)&&oh(e)=="[object Set]"},YA=Iv&&Iv.isSet,see=YA?F_(YA):uee,Qo={};Qo["[object Arguments]"]=Qo["[object Array]"]=Qo["[object ArrayBuffer]"]=Qo["[object DataView]"]=Qo["[object Boolean]"]=Qo["[object Date]"]=Qo["[object Float32Array]"]=Qo["[object Float64Array]"]=Qo["[object Int8Array]"]=Qo["[object Int16Array]"]=Qo["[object Int32Array]"]=Qo["[object Map]"]=Qo["[object Number]"]=Qo["[object Object]"]=Qo["[object RegExp]"]=Qo["[object Set]"]=Qo["[object String]"]=Qo["[object Symbol]"]=Qo["[object Uint8Array]"]=Qo["[object Uint8ClampedArray]"]=Qo["[object Uint16Array]"]=Qo["[object Uint32Array]"]=!0,Qo["[object Error]"]=Qo["[object Function]"]=Qo["[object WeakMap]"]=!1;var iN=function e(t,n,a,r,u,c){var v,f=1&n,g=2&n,_=4&n;if(v!==void 0)return v;if(!Cl(t))return t;var b=Di(t);if(b){if(v=eee(t),!f)return ZP(t,v)}else{var O=oh(t),x=O=="[object Function]"||O=="[object GeneratorFunction]";if(rh(t))return KP(t,f);if(O=="[object Object]"||O=="[object Arguments]"||x&&!u){if(v=g||x?{}:oN(t),!f)return g?HQ(t,WQ(v,t)):zQ(t,FQ(v,t))}else{if(!Qo[O])return u?t:{};v=iee(t,O,f)}}c||(c=new Av);var M=c.get(t);if(M)return M;c.set(t,v),see(t)?t.forEach(function(E){v.add(e(E,n,a,E,t,c))}):lee(t)&&t.forEach(function(E,D){v.set(D,e(E,n,a,D,t,c))});var A=b?void 0:(_?g?XQ:Gw:g?mh:tp)(t);return WE(A||t,function(E,D){A&&(E=t[D=E]),L_(v,D,e(E,n,a,D,t,c))}),v},cee=function(e){return iN(e,4)},YE=function(e){return function(){return e}},KE=function(e){return function(t,n,a){for(var r=-1,u=Object(t),c=a(t),v=c.length;v--;){var f=c[++r];if(n(u[f],f,u)===!1)break}return t}}(),ZE=function(e,t){return e&&KE(e,t,tp)},B_=function(e,t){return function(n,a){if(n==null)return n;if(!Ff(n))return e(n,a);for(var r=n.length,u=-1,c=Object(n);++u<r&&a(c[u],u,c)!==!1;);return n}}(ZE),yh=function(e){return e},aN=function(e){return typeof e=="function"?e:yh},lN=function(e,t){return(Di(e)?WE:B_)(e,aN(t))},uN=lN,fee=function(e,t){var n=[];return B_(e,function(a,r,u){t(a,r,u)&&n.push(a)}),n},dee=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},pee=function(e){return this.__data__.has(e)};function Pg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new j_;++t<n;)this.add(e[t])}Pg.prototype.add=Pg.prototype.push=dee,Pg.prototype.has=pee;var sN=Pg,hee=function(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1},cN=function(e,t){return e.has(t)},fN=function(e,t,n,a,r,u){var c=1&n,v=e.length,f=t.length;if(v!=f&&!(c&&f>v))return!1;var g=u.get(e),_=u.get(t);if(g&&_)return g==t&&_==e;var b=-1,O=!0,x=2&n?new sN:void 0;for(u.set(e,t),u.set(t,e);++b<v;){var M=e[b],A=t[b];if(a)var E=c?a(A,M,b,t,e,u):a(M,A,b,e,t,u);if(E!==void 0){if(E)continue;O=!1;break}if(x){if(!hee(t,function(D,j){if(!cN(x,j)&&(M===D||r(M,D,n,a,u)))return x.push(j)})){O=!1;break}}else if(M!==A&&!r(M,A,n,a,u)){O=!1;break}}return u.delete(e),u.delete(t),O},vee=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a,r){n[++t]=[r,a]}),n},JE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n},KA=Iu?Iu.prototype:void 0,H1=KA?KA.valueOf:void 0,mee=function(e,t,n,a,r,u,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new r_(e),new r_(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Zv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=vee;case"[object Set]":var f=1&a;if(v||(v=JE),e.size!=t.size&&!f)return!1;var g=c.get(e);if(g)return g==t;a|=2,c.set(e,t);var _=fN(v(e),v(t),a,r,u,c);return c.delete(e),_;case"[object Symbol]":if(H1)return H1.call(e)==H1.call(t)}return!1},yee=Object.prototype.hasOwnProperty,gee=function(e,t,n,a,r,u){var c=1&n,v=Gw(e),f=v.length;if(f!=Gw(t).length&&!c)return!1;for(var g=f;g--;){var _=v[g];if(!(c?_ in t:yee.call(t,_)))return!1}var b=u.get(e),O=u.get(t);if(b&&O)return b==t&&O==e;var x=!0;u.set(e,t),u.set(t,e);for(var M=c;++g<f;){var A=e[_=v[g]],E=t[_];if(a)var D=c?a(E,A,_,t,e,u):a(A,E,_,e,t,u);if(!(D===void 0?A===E||r(A,E,n,a,u):D)){x=!1;break}M||(M=_=="constructor")}if(x&&!M){var j=e.constructor,U=t.constructor;j==U||!("constructor"in e)||!("constructor"in t)||typeof j=="function"&&j instanceof j&&typeof U=="function"&&U instanceof U||(x=!1)}return u.delete(e),u.delete(t),x},ZA=Object.prototype.hasOwnProperty,_ee=function(e,t,n,a,r,u){var c=Di(e),v=Di(t),f=c?"[object Array]":oh(e),g=v?"[object Array]":oh(t),_=(f=f=="[object Arguments]"?"[object Object]":f)=="[object Object]",b=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=f==g;if(O&&rh(e)){if(!rh(t))return!1;c=!0,_=!1}if(O&&!_)return u||(u=new Av),c||fy(e)?fN(e,t,n,a,r,u):mee(e,t,f,n,a,r,u);if(!(1&n)){var x=_&&ZA.call(e,"__wrapped__"),M=b&&ZA.call(t,"__wrapped__");if(x||M){var A=x?e.value():e,E=M?t.value():t;return u||(u=new Av),r(A,E,n,a,u)}}return!!O&&(u||(u=new Av),gee(e,t,n,a,r,u))},dN=function e(t,n,a,r,u){return t===n||(t==null||n==null||!Ts(t)&&!Ts(n)?t!=t&&n!=n:_ee(t,n,a,r,e,u))},bee=function(e,t,n,a){var r=n.length,u=r;if(e==null)return!u;for(e=Object(e);r--;){var c=n[r];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<u;){var v=(c=n[r])[0],f=e[v],g=c[1];if(c[2]){if(f===void 0&&!(v in e))return!1}else{var _=new Av,b;if(!(b===void 0?dN(g,f,3,a,_):b))return!1}}return!0},pN=function(e){return e==e&&!Cl(e)},wee=function(e){for(var t=tp(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,pN(r)]}return t},hN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},Eee=function(e){var t=wee(e);return t.length==1&&t[0][2]?hN(t[0][0],t[0][1]):function(n){return n===e||bee(n,e,t)}},ih=function(e){return typeof e=="symbol"||Ts(e)&&ep(e)=="[object Symbol]"},Oee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,See=/^\w*$/,QE=function(e,t){if(Di(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!ih(e))||See.test(e)||!Oee.test(e)||t!=null&&e in Object(t)};function e2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],u=n.cache;if(u.has(r))return u.get(r);var c=e.apply(this,a);return n.cache=u.set(r,c)||u,c};return n.cache=new(e2.Cache||j_),n}e2.Cache=j_;var xee=e2,Aee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tee=/\\(\\)?/g,Mee=function(e){var t=xee(e,function(a){return n.size===500&&n.clear(),a}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Aee,function(n,a,r,u){t.push(r?u.replace(Tee,"$1"):a||n)}),t}),Mv=function(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r},JA=Iu?Iu.prototype:void 0,QA=JA?JA.toString:void 0,kee=function e(t){if(typeof t=="string")return t;if(Di(t))return Mv(t,e)+"";if(ih(t))return QA?QA.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},vN=function(e){return e==null?"":kee(e)},W_=function(e,t){return Di(e)?e:QE(e,t)?[e]:Mee(vN(e))},dy=function(e){if(typeof e=="string"||ih(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},G_=function(e,t){for(var n=0,a=(t=W_(t,e)).length;e!=null&&n<a;)e=e[dy(t[n++])];return n&&n==a?e:void 0},Pee=function(e,t,n){var a=e==null?void 0:G_(e,t);return a===void 0?n:a},Nee=function(e,t){return e!=null&&t in Object(e)},mN=function(e,t,n){for(var a=-1,r=(t=W_(t,e)).length,u=!1;++a<r;){var c=dy(t[a]);if(!(u=e!=null&&n(e,c)))break;e=e[c]}return u||++a!=r?u:!!(r=e==null?0:e.length)&&GE(r)&&$_(c,r)&&(Di(e)||jv(e))},yN=function(e,t){return e!=null&&mN(e,t,Nee)},Ree=function(e,t){return QE(e)&&pN(t)?hN(dy(e),t):function(n){var a=Pee(n,e);return a===void 0&&a===t?yN(n,e):dN(t,a,3)}},gN=function(e){return function(t){return t==null?void 0:t[e]}},Cee=function(e){return function(t){return G_(t,e)}},Dee=function(e){return QE(e)?gN(dy(e)):Cee(e)},Uf=function(e){return typeof e=="function"?e:e==null?yh:typeof e=="object"?Di(e)?Ree(e[0],e[1]):Eee(e):Dee(e)},_N=function(e,t){return(Di(e)?JP:fee)(e,Uf(t))},jee=Object.prototype.hasOwnProperty,Iee=function(e,t){return e!=null&&jee.call(e,t)},bN=function(e,t){return e!=null&&mN(e,t,Iee)},Lee=Object.prototype.hasOwnProperty,$ee=function(e){if(e==null)return!0;if(Ff(e)&&(Di(e)||typeof e=="string"||typeof e.splice=="function"||rh(e)||fy(e)||jv(e)))return!e.length;var t=oh(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(U_(e))return!zE(e).length;for(var n in e)if(Lee.call(e,n))return!1;return!0},wN=function(e){return e===void 0},EN=function(e,t){var n=-1,a=Ff(e)?Array(e.length):[];return B_(e,function(r,u,c){a[++n]=t(r,u,c)}),a},ON=function(e,t){return(Di(e)?Mv:EN)(e,Uf(t))},Fee=function(e,t,n,a){var r=-1,u=e==null?0:e.length;for(a&&u&&(n=e[++r]);++r<u;)n=t(n,e[r],r,e);return n},Uee=function(e,t,n,a,r){return r(e,function(u,c,v){n=a?(a=!1,u):t(n,u,c,v)}),n},SN=function(e,t,n){var a=Di(e)?Fee:Uee,r=arguments.length<3;return a(e,Uf(t),n,r,B_)},Vee=function(e){return typeof e=="string"||!Di(e)&&Ts(e)&&ep(e)=="[object String]"},Bee=gN("length"),Wee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Gee=function(e){return Wee.test(e)},zee="[\\ud800-\\udfff]",qw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Yw="\\ud83c[\\udffb-\\udfff]",xN="[^\\ud800-\\udfff]",AN="(?:\\ud83c[\\udde6-\\uddff]){2}",TN="[\\ud800-\\udbff][\\udc00-\\udfff]",eT="(?:"+qw+"|"+Yw+")?",Hee="[\\ufe0e\\ufe0f]?"+eT+("(?:\\u200d(?:"+[xN,AN,TN].join("|")+")[\\ufe0e\\ufe0f]?"+eT+")*"),Xee="(?:"+[xN+qw+"?",qw,AN,TN,zee].join("|")+")",tT=RegExp(Yw+"(?="+Yw+")|"+Xee+Hee,"g"),qee=function(e){for(var t=tT.lastIndex=0;tT.test(e);)++t;return t},Yee=function(e){return Gee(e)?qee(e):Bee(e)},Kee=function(e){if(e==null)return 0;if(Ff(e))return Vee(e)?Yee(e):e.length;var t=oh(e);return t=="[object Map]"||t=="[object Set]"?e.size:zE(e).length},Zee=function(e,t,n){var a=Di(e),r=a||rh(e)||fy(e);if(t=Uf(t),n==null){var u=e&&e.constructor;n=r?a?new u:[]:Cl(e)&&sy(u)?rN(V_(e)):{}}return(r?WE:ZE)(e,function(c,v,f){return t(n,c,v,f)}),n},nT=Iu?Iu.isConcatSpreadable:void 0,Jee=function(e){return Di(e)||jv(e)||!!(nT&&e&&e[nT])},t2=function(t,n,a,r,u){var c=-1,v=t.length;for(a||(a=Jee),u||(u=[]);++c<v;){var f=t[c];a(f)?XE(u,f):r||(u[u.length]=f)}return u},Qee=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},rT=Math.max,MN=function(e,t,n){return t=rT(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,u=rT(a.length-t,0),c=Array(u);++r<u;)c[r]=a[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=a[r];return v[t]=n(c),Qee(e,this,v)}},ete=n_?function(e,t){return n_(e,"toString",{configurable:!0,enumerable:!1,value:YE(t),writable:!0})}:yh,tte=Date.now,kN=function(e){var t=0,n=0;return function(){var a=tte(),r=16-(a-n);if(n=a,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ete),z_=function(e,t){return kN(MN(e,t,yh),e+"")},PN=function(e,t,n,a){for(var r=e.length,u=n+-1;++u<r;)if(t(e[u],u,e))return u;return-1},nte=function(e){return e!=e},rte=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1},ote=function(e,t,n){return t==t?rte(e,t,n):PN(e,nte,n)},ite=function(e,t){return!!(e!=null&&e.length)&&ote(e,t,0)>-1},ate=function(){},lte=Tv&&1/JE(new Tv([,-0]))[1]==1/0?function(e){return new Tv(e)}:ate,ute=function(e,t,n){var a=-1,r=ite,u=e.length,c=!0,v=[],f=v;if(u>=200){var g=lte(e);if(g)return JE(g);c=!1,r=cN,f=new sN}else f=v;e:for(;++a<u;){var _=e[a],b=_;if(_=_!==0?_:0,c&&b==b){for(var O=f.length;O--;)if(f[O]===b)continue e;v.push(_)}else r(f,b,n)||(f!==v&&f.push(b),v.push(_))}return v},NN=function(e){return Ts(e)&&Ff(e)},ste=z_(function(e){return ute(t2(e,1,NN,!0))}),cte=function(e,t){return Mv(t,function(n){return e[n]})},o_,RN=function(e){return e==null?[]:cte(e,tp(e))};try{o_={clone:cee,constant:YE,each:uN,filter:_N,has:bN,isArray:Di,isEmpty:$ee,isFunction:sy,isUndefined:wN,keys:tp,map:ON,reduce:SN,size:Kee,transform:Zee,union:ste,values:RN}}catch{}o_||(o_=window._);var Tn=o_,n2=Br;function Br(e){this._isDirected=!Tn.has(e,"directed")||e.directed,this._isMultigraph=!!Tn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Tn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Tn.constant(void 0),this._defaultEdgeLabelFn=Tn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function oT(e,t){e[t]?e[t]++:e[t]=1}function iT(e,t){--e[t]||delete e[t]}function Pm(e,t,n,a){var r=""+t,u=""+n;if(!e&&r>u){var c=r;r=u,u=c}return r+""+u+""+(Tn.isUndefined(a)?"\0":a)}function fte(e,t,n,a){var r=""+t,u=""+n;if(!e&&r>u){var c=r;r=u,u=c}var v={v:r,w:u};return a&&(v.name=a),v}function X1(e,t){return Pm(e,t.v,t.w,t.name)}Br.prototype._nodeCount=0,Br.prototype._edgeCount=0,Br.prototype.isDirected=function(){return this._isDirected},Br.prototype.isMultigraph=function(){return this._isMultigraph},Br.prototype.isCompound=function(){return this._isCompound},Br.prototype.setGraph=function(e){return this._label=e,this},Br.prototype.graph=function(){return this._label},Br.prototype.setDefaultNodeLabel=function(e){return Tn.isFunction(e)||(e=Tn.constant(e)),this._defaultNodeLabelFn=e,this},Br.prototype.nodeCount=function(){return this._nodeCount},Br.prototype.nodes=function(){return Tn.keys(this._nodes)},Br.prototype.sources=function(){var e=this;return Tn.filter(this.nodes(),function(t){return Tn.isEmpty(e._in[t])})},Br.prototype.sinks=function(){var e=this;return Tn.filter(this.nodes(),function(t){return Tn.isEmpty(e._out[t])})},Br.prototype.setNodes=function(e,t){var n=arguments,a=this;return Tn.each(e,function(r){n.length>1?a.setNode(r,t):a.setNode(r)}),this},Br.prototype.setNode=function(e,t){return Tn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Br.prototype.node=function(e){return this._nodes[e]},Br.prototype.hasNode=function(e){return Tn.has(this._nodes,e)},Br.prototype.removeNode=function(e){var t=this;if(Tn.has(this._nodes,e)){var n=function(a){t.removeEdge(t._edgeObjs[a])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Tn.each(this.children(e),function(a){t.setParent(a)}),delete this._children[e]),Tn.each(Tn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],Tn.each(Tn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Br.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Tn.isUndefined(t))t="\0";else{for(var n=t+="";!Tn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Br.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Br.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Br.prototype.children=function(e){if(Tn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return Tn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Br.prototype.predecessors=function(e){var t=this._preds[e];if(t)return Tn.keys(t)},Br.prototype.successors=function(e){var t=this._sucs[e];if(t)return Tn.keys(t)},Br.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return Tn.union(t,this.successors(e))},Br.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Br.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Tn.each(this._nodes,function(u,c){e(c)&&t.setNode(c,u)}),Tn.each(this._edgeObjs,function(u){t.hasNode(u.v)&&t.hasNode(u.w)&&t.setEdge(u,n.edge(u))});var a={};function r(u){var c=n.parent(u);return c===void 0||t.hasNode(c)?(a[u]=c,c):c in a?a[c]:r(c)}return this._isCompound&&Tn.each(t.nodes(),function(u){t.setParent(u,r(u))}),t},Br.prototype.setDefaultEdgeLabel=function(e){return Tn.isFunction(e)||(e=Tn.constant(e)),this._defaultEdgeLabelFn=e,this},Br.prototype.edgeCount=function(){return this._edgeCount},Br.prototype.edges=function(){return Tn.values(this._edgeObjs)},Br.prototype.setPath=function(e,t){var n=this,a=arguments;return Tn.reduce(e,function(r,u){return a.length>1?n.setEdge(r,u,t):n.setEdge(r,u),u}),this},Br.prototype.setEdge=function(){var e,t,n,a,r=!1,u=arguments[0];typeof u=="object"&&u!==null&&"v"in u?(e=u.v,t=u.w,n=u.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=u,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,Tn.isUndefined(n)||(n=""+n);var c=Pm(this._isDirected,e,t,n);if(Tn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=a),this;if(!Tn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?a:this._defaultEdgeLabelFn(e,t,n);var v=fte(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,oT(this._preds[t],e),oT(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Br.prototype.edge=function(e,t,n){var a=arguments.length===1?X1(this._isDirected,arguments[0]):Pm(this._isDirected,e,t,n);return this._edgeLabels[a]},Br.prototype.hasEdge=function(e,t,n){var a=arguments.length===1?X1(this._isDirected,arguments[0]):Pm(this._isDirected,e,t,n);return Tn.has(this._edgeLabels,a)},Br.prototype.removeEdge=function(e,t,n){var a=arguments.length===1?X1(this._isDirected,arguments[0]):Pm(this._isDirected,e,t,n),r=this._edgeObjs[a];return r&&(e=r.v,t=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],iT(this._preds[t],e),iT(this._sucs[e],t),delete this._in[t][a],delete this._out[e][a],this._edgeCount--),this},Br.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var a=Tn.values(n);return t?Tn.filter(a,function(r){return r.v===t}):a}},Br.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var a=Tn.values(n);return t?Tn.filter(a,function(r){return r.w===t}):a}},Br.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var aT={Graph:n2,version:"2.1.8"},dte={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:pte(e),edges:hte(e)};return Tn.isUndefined(e.graph())||(t.value=Tn.clone(e.graph())),t},read:function(e){var t=new n2(e.options).setGraph(e.value);return Tn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),Tn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function pte(e){return Tn.map(e.nodes(),function(t){var n=e.node(t),a=e.parent(t),r={v:t};return Tn.isUndefined(n)||(r.value=n),Tn.isUndefined(a)||(r.parent=a),r})}function hte(e){return Tn.map(e.edges(),function(t){var n=e.edge(t),a={v:t.v,w:t.w};return Tn.isUndefined(t.name)||(a.name=t.name),Tn.isUndefined(n)||(a.value=n),a})}var vte=function(e){var t,n={},a=[];function r(u){Tn.has(n,u)||(n[u]=!0,t.push(u),Tn.each(e.successors(u),r),Tn.each(e.predecessors(u),r))}return Tn.each(e.nodes(),function(u){t=[],r(u),t.length&&a.push(t)}),a},CN=Pu;function Pu(){this._arr=[],this._keyIndices={}}Pu.prototype.size=function(){return this._arr.length},Pu.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Pu.prototype.has=function(e){return Tn.has(this._keyIndices,e)},Pu.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Pu.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Pu.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!Tn.has(n,e)){var a=this._arr,r=a.length;return n[e]=r,a.push({key:e,priority:t}),this._decrease(r),!0}return!1},Pu.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Pu.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Pu.prototype._heapify=function(e){var t=this._arr,n=2*e,a=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,a<t.length&&(r=t[a].priority<t[r].priority?a:r),r!==e&&(this._swap(e,r),this._heapify(r)))},Pu.prototype._decrease=function(e){for(var t,n=this._arr,a=n[e].priority;e!==0&&!(n[t=e>>1].priority<a);)this._swap(e,t),e=t},Pu.prototype._swap=function(e,t){var n=this._arr,a=this._keyIndices,r=n[e],u=n[t];n[e]=u,n[t]=r,a[u.key]=e,a[r.key]=t};var DN=function(e,t,n,a){return function(r,u,c,v){var f,g,_={},b=new CN,O=function(x){var M=x.v!==f?x.v:x.w,A=_[M],E=c(x),D=g.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+E);D<A.distance&&(A.distance=D,A.predecessor=f,b.decrease(M,D))};for(r.nodes().forEach(function(x){var M=x===u?0:Number.POSITIVE_INFINITY;_[x]={distance:M},b.add(x,M)});b.size()>0&&(f=b.removeMin(),(g=_[f]).distance!==Number.POSITIVE_INFINITY);)v(f).forEach(O);return _}(e,String(t),n||mte,a||function(r){return e.outEdges(r)})},mte=Tn.constant(1),yte=function(e,t,n){return Tn.transform(e.nodes(),function(a,r){a[r]=DN(e,r,t,n)},{})},jN=function(e){var t=0,n=[],a={},r=[];function u(c){var v=a[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(_){Tn.has(a,_)?a[_].onStack&&(v.lowlink=Math.min(v.lowlink,a[_].index)):(u(_),v.lowlink=Math.min(v.lowlink,a[_].lowlink))}),v.lowlink===v.index){var f,g=[];do f=n.pop(),a[f].onStack=!1,g.push(f);while(c!==f);r.push(g)}}return e.nodes().forEach(function(c){Tn.has(a,c)||u(c)}),r},gte=function(e){return Tn.filter(jN(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},_te=function(e,t,n){return function(a,r,u){var c={},v=a.nodes();return v.forEach(function(f){c[f]={},c[f][f]={distance:0},v.forEach(function(g){f!==g&&(c[f][g]={distance:Number.POSITIVE_INFINITY})}),u(f).forEach(function(g){var _=g.v===f?g.w:g.v,b=r(g);c[f][_]={distance:b,predecessor:f}})}),v.forEach(function(f){var g=c[f];v.forEach(function(_){var b=c[_];v.forEach(function(O){var x=b[f],M=g[O],A=b[O],E=x.distance+M.distance;E<A.distance&&(A.distance=E,A.predecessor=M.predecessor)})})}),c}(e,t||bte,n||function(a){return e.outEdges(a)})},bte=Tn.constant(1),q1=IN;function IN(e){var t={},n={},a=[];if(Tn.each(e.sinks(),function r(u){if(Tn.has(n,u))throw new i_;Tn.has(t,u)||(n[u]=!0,t[u]=!0,Tn.each(e.predecessors(u),r),delete n[u],a.push(u))}),Tn.size(t)!==e.nodeCount())throw new i_;return a}function i_(){}IN.CycleException=i_,i_.prototype=new Error;var lT=function(e,t,n){Tn.isArray(t)||(t=[t]);var a=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],u={};return Tn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);LN(e,c,n==="post",u,a,r)}),r};function LN(e,t,n,a,r,u){Tn.has(a,t)||(a[t]=!0,n||u.push(t),Tn.each(r(t),function(c){LN(e,c,n,a,r,u)}),n&&u.push(t))}var a_,wte={Graph:aT.Graph,json:dte,alg:{components:vte,dijkstra:DN,dijkstraAll:yte,findCycles:gte,floydWarshall:_te,isAcyclic:function(e){try{q1(e)}catch(t){if(t instanceof q1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return lT(e,t,"post")},preorder:function(e,t){return lT(e,t,"pre")},prim:function(e,t){var n,a=new n2,r={},u=new CN;function c(f){var g=f.v===n?f.w:f.v,_=u.priority(g);if(_!==void 0){var b=t(f);b<_&&(r[g]=n,u.decrease(g,b))}}if(e.nodeCount()===0)return a;Tn.each(e.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(e.nodes()[0],0);for(var v=!1;u.size()>0;){if(n=u.removeMin(),Tn.has(r,n))a.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return a},tarjan:jN,topsort:q1},version:aT.version};try{a_=wte}catch{}a_||(a_=window.graphlib);var bc=a_,Ete=function(e){return iN(e,5)},Zm=function(e,t,n){if(!Cl(n))return!1;var a=typeof t;return!!(a=="number"?Ff(n)&&$_(t,n.length):a=="string"&&t in n)&&Zv(n[t],e)},$N=Object.prototype,Ote=$N.hasOwnProperty,Ste=z_(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&Zm(t[0],t[1],r)&&(a=1);++n<a;)for(var u=t[n],c=mh(u),v=-1,f=c.length;++v<f;){var g=c[v],_=e[g];(_===void 0||Zv(_,$N[g])&&!Ote.call(e,g))&&(e[g]=u[g])}return e}),xte=function(e){return function(t,n,a){var r=Object(t);if(!Ff(t)){var u=Uf(n);t=tp(t),n=function(v){return u(r[v],v,r)}}var c=e(t,n,a);return c>-1?r[u?t[c]:c]:void 0}},Ate=/^\s+|\s+$/g,Tte=/^[-+]0x[0-9a-f]+$/i,Mte=/^0b[01]+$/i,kte=/^0o[0-7]+$/i,Pte=parseInt,Nte=function(e){if(typeof e=="number")return e;if(ih(e))return NaN;if(Cl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Ate,"");var n=Mte.test(e);return n||kte.test(e)?Pte(e.slice(2),n?2:8):Tte.test(e)?NaN:+e},Ng=function(e){return e?(e=Nte(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},Rte=function(e){var t=Ng(e),n=t%1;return t==t?n?t-n:t:0},Cte=Math.max,Dte=xte(function(e,t,n){var a=e==null?0:e.length;if(!a)return-1;var r=n==null?0:Rte(n);return r<0&&(r=Cte(a+r,0)),PN(e,Uf(t),r)}),FN=function(e){return e!=null&&e.length?t2(e):[]},jte=function(e,t){return e==null?e:KE(e,aN(t),mh)},Ite=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Lte=function(e,t){var n={};return t=Uf(t),ZE(e,function(a,r,u){I_(n,r,t(a,r,u))}),n},r2=function(e,t,n){for(var a=-1,r=e.length;++a<r;){var u=e[a],c=t(u);if(c!=null&&(v===void 0?c==c&&!ih(c):n(c,v)))var v=c,f=u}return f},$te=function(e,t){return e>t},Fte=function(e){return e&&e.length?r2(e,yh,$te):void 0},Kw=function(e,t,n){(n!==void 0&&!Zv(e[t],n)||n===void 0&&!(t in e))&&I_(e,t,n)},Ute=Function.prototype,Vte=Object.prototype,UN=Ute.toString,Bte=Vte.hasOwnProperty,Wte=UN.call(Object),Gte=function(e){if(!Ts(e)||ep(e)!="[object Object]")return!1;var t=V_(e);if(t===null)return!0;var n=Bte.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&UN.call(n)==Wte},uT=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},zte=function(e){return cy(e,mh(e))},Hte=function(e,t,n,a,r,u,c){var v=uT(e,n),f=uT(t,n),g=c.get(f);if(g)Kw(e,n,g);else{var _=void 0,b=_===void 0;if(b){var O=Di(f),x=!O&&rh(f),M=!O&&!x&&fy(f);_=f,O||x||M?Di(v)?_=v:NN(v)?_=ZP(v):x?(b=!1,_=KP(f,!0)):M?(b=!1,_=nN(f,!0)):_=[]:Gte(f)||jv(f)?(_=v,jv(v)?_=zte(v):Cl(v)&&!sy(v)||(_=oN(f))):b=!1}b&&(c.set(f,_),r(_,f,a,u,c),c.delete(f)),Kw(e,n,_)}},Xte=function e(t,n,a,r,u){t!==n&&KE(n,function(c,v){if(u||(u=new Av),Cl(c))Hte(t,n,v,a,e,r,u);else{var f=void 0;f===void 0&&(f=c),Kw(t,v,f)}},mh)},qte=function(e){return z_(function(t,n){var a=-1,r=n.length,u=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(u=e.length>3&&typeof u=="function"?(r--,u):void 0,c&&Zm(n[0],n[1],c)&&(u=r<3?void 0:u,r=1),t=Object(t);++a<r;){var v=n[a];v&&e(t,v,a,u)}return t})}(function(e,t,n){Xte(e,t,n)}),VN=function(e,t){return e<t},Yte=function(e){return e&&e.length?r2(e,yh,VN):void 0},Kte=function(e,t){return e&&e.length?r2(e,Uf(t),VN):void 0},Zte=function(){return Ps.Date.now()},Jte=function(e,t,n,a){if(!Cl(e))return e;for(var r=-1,u=(t=W_(t,e)).length,c=u-1,v=e;v!=null&&++r<u;){var f=dy(t[r]),g=n;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(r!=c){var _=v[f];(g=void 0)==void 0&&(g=Cl(_)?_:$_(t[r+1])?[]:{})}L_(v,f,g),v=v[f]}return e},Qte=function(e,t,n){for(var a=-1,r=t.length,u={};++a<r;){var c=t[a],v=G_(e,c);n(v,c)&&Jte(u,W_(c,e),v)}return u},ene=function(e,t){return Qte(e,t,function(n,a){return yN(e,a)})},tne=function(e){return kN(MN(e,void 0,FN),e+"")}(function(e,t){return e==null?{}:ene(e,t)}),nne=Math.ceil,rne=Math.max,one=function(e,t,n,a){for(var r=-1,u=rne(nne((t-e)/(n||1)),0),c=Array(u);u--;)c[++r]=e,e+=n;return c},ine=function(e){return function(t,n,a){return a&&typeof a!="number"&&Zm(t,n,a)&&(n=a=void 0),t=Ng(t),n===void 0?(n=t,t=0):n=Ng(n),a=a===void 0?t<n?1:-1:Ng(a),one(t,n,a)}}(),ane=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},lne=function(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e==e,u=ih(e),c=t!==void 0,v=t===null,f=t==t,g=ih(t);if(!v&&!g&&!u&&e>t||u&&c&&f&&!v&&!g||a&&c&&f||!n&&f||!r)return 1;if(!a&&!u&&!g&&e<t||g&&n&&r&&!a&&!u||v&&n&&r||!c&&r||!f)return-1}return 0},une=function(e,t,n){for(var a=-1,r=e.criteria,u=t.criteria,c=r.length,v=n.length;++a<c;){var f=lne(r[a],u[a]);if(f)return a>=v?f:f*(n[a]=="desc"?-1:1)}return e.index-t.index},sne=function(e,t,n){t=t.length?Mv(t,function(u){return Di(u)?function(c){return G_(c,u.length===1?u[0]:u)}:u}):[yh];var a=-1;t=Mv(t,F_(Uf));var r=EN(e,function(u,c,v){return{criteria:Mv(t,function(f){return f(u)}),index:++a,value:u}});return ane(r,function(u,c){return une(u,c,n)})},cne=z_(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Zm(e,t[0],t[1])?t=[]:n>2&&Zm(t[0],t[1],t[2])&&(t=[t[0]]),sne(e,t2(t),[])}),fne=0,dne=function(e){var t=++fne;return vN(e)+t},pne=function(e,t,n){for(var a=-1,r=e.length,u=t.length,c={};++a<r;){var v=a<u?t[a]:void 0;n(c,e[a],v)}return c},l_,hne=function(e,t){return pne(e||[],t||[],L_)};try{l_={cloneDeep:Ete,constant:YE,defaults:Ste,each:uN,filter:_N,find:Dte,flatten:FN,forEach:lN,forIn:jte,has:bN,isUndefined:wN,last:Ite,map:ON,mapValues:Lte,max:Fte,merge:qte,min:Yte,minBy:Kte,now:Zte,pick:tne,range:ine,reduce:SN,sortBy:cne,uniqueId:dne,values:RN,zipObject:hne}}catch{}l_||(l_=window._);var vne=l_;bc.Graph;vne.constant(1);bc.Graph;bc.Graph;bc.alg.preorder;bc.alg.postorder;bc.Graph;bc.Graph;bc.Graph;bc.Graph;bc.Graph;var Y1,sT;function mne(){if(sT)return Y1;sT=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Y1=t,Y1}var K1,cT;function yne(){if(cT)return K1;cT=1;var e=oE(),t=mne(),n=iE(),a="[object Arguments]",r="[object Array]",u="[object Boolean]",c="[object Date]",v="[object Error]",f="[object Function]",g="[object Map]",_="[object Number]",b="[object Object]",O="[object RegExp]",x="[object Set]",M="[object String]",A="[object WeakMap]",E="[object ArrayBuffer]",D="[object DataView]",j="[object Float32Array]",U="[object Float64Array]",F="[object Int8Array]",I="[object Int16Array]",V="[object Int32Array]",Y="[object Uint8Array]",K="[object Uint8ClampedArray]",H="[object Uint16Array]",B="[object Uint32Array]",z={};z[j]=z[U]=z[F]=z[I]=z[V]=z[Y]=z[K]=z[H]=z[B]=!0,z[a]=z[r]=z[E]=z[u]=z[D]=z[c]=z[v]=z[f]=z[g]=z[_]=z[b]=z[O]=z[x]=z[M]=z[A]=!1;function X(ee){return n(ee)&&t(ee.length)&&!!z[e(ee)]}return K1=X,K1}var Z1,fT;function gne(){if(fT)return Z1;fT=1;function e(t){return function(n){return t(n)}}return Z1=e,Z1}var Nm={exports:{}};Nm.exports;var dT;function _ne(){return dT||(dT=1,function(e,t){var n=yI(),a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,u=r&&r.exports===a,c=u&&n.process,v=function(){try{var f=r&&r.require&&r.require("util").types;return f||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v}(Nm,Nm.exports)),Nm.exports}var J1,pT;function bne(){if(pT)return J1;pT=1;var e=yne(),t=gne(),n=_ne(),a=n&&n.isTypedArray,r=a?t(a):e;return J1=r,J1}bne();var Q1,hT;function wne(){if(hT)return Q1;hT=1;var e=oE(),t=iE(),n="[object Number]";function a(r){return typeof r=="number"||t(r)&&e(r)==n}return Q1=a,Q1}wne();var ew={exports:{}},tw={exports:{}},vT;function BN(){return vT||(vT=1,function(e){function t(n,a){this.v=n,this.k=a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(tw)),tw.exports}var nw={exports:{}},rw={exports:{}},mT;function WN(){return mT||(mT=1,function(e){function t(n,a,r,u){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(f,g,_,b){function O(x,M){t(f,x,function(A){return this._invoke(x,M,A)})}g?c?c(f,g,{value:_,enumerable:!b,configurable:!b,writable:!b}):f[g]=_:(O("next",0),O("throw",1),O("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,a,r,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(rw)),rw.exports}var yT;function GN(){return yT||(yT=1,function(e){var t=WN();function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",v=u.toStringTag||"@@toStringTag";function f(E,D,j,U){var F=D&&D.prototype instanceof _?D:_,I=Object.create(F.prototype);return t(I,"_invoke",function(V,Y,K){var H,B,z,X=0,ee=K||[],pe=!1,ce={p:0,n:0,v:a,a:Pe,f:Pe.bind(a,4),d:function(le,ie){return H=le,B=0,z=a,ce.n=ie,g}};function Pe(Ee,le){for(B=Ee,z=le,r=0;!pe&&X&&!ie&&r<ee.length;r++){var ie,$e=ee[r],Ge=ce.p,ht=$e[2];Ee>3?(ie=ht===le)&&(z=$e[(B=$e[4])?5:(B=3,3)],$e[4]=$e[5]=a):$e[0]<=Ge&&((ie=Ee<2&&Ge<$e[1])?(B=0,ce.v=le,ce.n=$e[1]):Ge<ht&&(ie=Ee<3||$e[0]>le||le>ht)&&($e[4]=Ee,$e[5]=le,ce.n=ht,B=0))}if(ie||Ee>1)return g;throw pe=!0,le}return function(Ee,le,ie){if(X>1)throw TypeError("Generator is already running");for(pe&&le===1&&Pe(le,ie),B=le,z=ie;(r=B<2?a:z)||!pe;){H||(B?B<3?(B>1&&(ce.n=-1),Pe(B,z)):ce.n=z:ce.v=z);try{if(X=2,H){if(B||(Ee="next"),r=H[Ee]){if(!(r=r.call(H,z)))throw TypeError("iterator result is not an object");if(!r.done)return r;z=r.value,B<2&&(B=0)}else B===1&&(r=H.return)&&r.call(H),B<2&&(z=TypeError("The iterator does not provide a '"+Ee+"' method"),B=1);H=a}else if((r=(pe=ce.n<0)?z:V.call(Y,ce))!==g)break}catch($e){H=a,B=1,z=$e}finally{X=1}}return{value:r,done:pe}}}(E,j,U),!0),I}var g={};function _(){}function b(){}function O(){}r=Object.getPrototypeOf;var x=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),M=O.prototype=_.prototype=Object.create(x);function A(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,O):(E.__proto__=O,t(E,v,"GeneratorFunction")),E.prototype=Object.create(M),E}return b.prototype=O,t(M,"constructor",O),t(O,"constructor",b),b.displayName="GeneratorFunction",t(O,v,"GeneratorFunction"),t(M),t(M,v,"Generator"),t(M,c,function(){return this}),t(M,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:f,m:A}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(nw)),nw.exports}var ow={exports:{}},iw={exports:{}},aw={exports:{}},gT;function zN(){return gT||(gT=1,function(e){var t=BN(),n=WN();function a(r,u){function c(f,g,_,b){try{var O=r[f](g),x=O.value;return x instanceof t?u.resolve(x.v).then(function(M){c("next",M,_,b)},function(M){c("throw",M,_,b)}):u.resolve(x).then(function(M){O.value=M,_(O)},function(M){return c("throw",M,_,b)})}catch(M){b(M)}}var v;this.next||(n(a.prototype),n(a.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(f,g,_){function b(){return new u(function(O,x){c(f,_,O,x)})}return v=v?v.then(b,b):b()},!0)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(aw)),aw.exports}var _T;function HN(){return _T||(_T=1,function(e){var t=GN(),n=zN();function a(r,u,c,v,f){return new n(t().w(r,u,c,v),f||Promise)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(iw)),iw.exports}var bT;function Ene(){return bT||(bT=1,function(e){var t=HN();function n(a,r,u,c,v){var f=t(a,r,u,c,v);return f.next().then(function(g){return g.done?g.value:f.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ow)),ow.exports}var lw={exports:{}},wT;function One(){return wT||(wT=1,function(e){function t(n){var a=Object(n),r=[];for(var u in a)r.unshift(u);return function c(){for(;r.length;)if((u=r.pop())in a)return c.value=u,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(lw)),lw.exports}var uw={exports:{}},sw={exports:{}},ET;function Sne(){return ET||(ET=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(sw)),sw.exports}var OT;function xne(){return OT||(OT=1,function(e){var t=Sne().default;function n(a){if(a!=null){var r=a[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],u=0;if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length))return{next:function(){return a&&u>=a.length&&(a=void 0),{value:a&&a[u++],done:!a}}}}throw new TypeError(t(a)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(uw)),uw.exports}var ST;function Ane(){return ST||(ST=1,function(e){var t=BN(),n=GN(),a=Ene(),r=HN(),u=zN(),c=One(),v=xne();function f(){var g=n(),_=g.m(f),b=(Object.getPrototypeOf?Object.getPrototypeOf(_):_.__proto__).constructor;function O(A){var E=typeof A=="function"&&A.constructor;return!!E&&(E===b||(E.displayName||E.name)==="GeneratorFunction")}var x={throw:1,return:2,break:3,continue:3};function M(A){var E,D;return function(j){E||(E={stop:function(){return D(j.a,2)},catch:function(){return j.v},abrupt:function(F,I){return D(j.a,x[F],I)},delegateYield:function(F,I,V){return E.resultName=I,D(j.d,v(F),V)},finish:function(F){return D(j.f,F)}},D=function(F,I,V){j.p=E.prev,j.n=E.next;try{return F(I,V)}finally{E.next=j.n}}),E.resultName&&(E[E.resultName]=j.v,E.resultName=void 0),E.sent=j.v,E.next=j.n;try{return A.call(this,E)}finally{j.p=E.prev,j.n=E.next}}}return(e.exports=f=function(){return{wrap:function(D,j,U,F){return g.w(M(D),j,U,F&&F.reverse())},isGeneratorFunction:O,mark:g.m,awrap:function(D,j){return new t(D,j)},AsyncIterator:u,async:function(D,j,U,F,I){return(O(j)?r:a)(M(D),j,U,F,I)},keys:c,values:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}var cw,xT;function Tne(){if(xT)return cw;xT=1;var e=Ane()();cw=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return cw}Tne();var un;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(un||(un={}));var AT;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(AT||(AT={}));var TT;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(TT||(TT={}));var MT;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(MT||(MT={}));var kT;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(kT||(kT={}));var Rg={exports:{}},Mne=Rg.exports,PT;function kne(){return PT||(PT=1,function(e,t){(function(n,a){e.exports=a()})(Mne,function(){var n=function(W){return W instanceof Uint8Array||W instanceof Uint16Array||W instanceof Uint32Array||W instanceof Int8Array||W instanceof Int16Array||W instanceof Int32Array||W instanceof Float32Array||W instanceof Float64Array||W instanceof Uint8ClampedArray},a=function(W,se){for(var Oe=Object.keys(se),it=0;it<Oe.length;++it)W[Oe[it]]=se[Oe[it]];return W},r=`
`;function u(W){return typeof atob<"u"?atob(W):"base64:"+W}function c(W){var se=new Error("(regl) "+W);throw console.error(se),se}function v(W,se){W||c(se)}function f(W){return W?": "+W:""}function g(W,se,Oe){W in se||c("unknown parameter ("+W+")"+f(Oe)+". possible values: "+Object.keys(se).join())}function _(W,se){n(W)||c("invalid parameter type"+f(se)+". must be a typed array")}function b(W,se){switch(se){case"number":return typeof W=="number";case"object":return typeof W=="object";case"string":return typeof W=="string";case"boolean":return typeof W=="boolean";case"function":return typeof W=="function";case"undefined":return typeof W>"u";case"symbol":return typeof W=="symbol"}}function O(W,se,Oe){b(W,se)||c("invalid parameter type"+f(Oe)+". expected "+se+", got "+typeof W)}function x(W,se){W>=0&&(W|0)===W||c("invalid parameter type, ("+W+")"+f(se)+". must be a nonnegative integer")}function M(W,se,Oe){se.indexOf(W)<0&&c("invalid value"+f(Oe)+". must be one of: "+se)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(W){Object.keys(W).forEach(function(se){A.indexOf(se)<0&&c('invalid regl constructor argument "'+se+'". must be one of '+A)})}function D(W,se){for(W=W+"";W.length<se;)W=" "+W;return W}function j(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function U(W,se){this.number=W,this.line=se,this.errors=[]}function F(W,se,Oe){this.file=W,this.line=se,this.message=Oe}function I(){var W=new Error,se=(W.stack||W).toString(),Oe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(se);if(Oe)return Oe[1];var it=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(se);return it?it[1]:"unknown"}function V(){var W=new Error,se=(W.stack||W).toString(),Oe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(se);if(Oe)return Oe[1];var it=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(se);return it?it[1]:"unknown"}function Y(W,se){var Oe=W.split(`
`),it=1,mt=0,tt={unknown:new j,0:new j};tt.unknown.name=tt[0].name=se||I(),tt.unknown.lines.push(new U(0,""));for(var pt=0;pt<Oe.length;++pt){var Rt=Oe[pt],$t=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Rt);if($t)switch($t[1]){case"line":var Ct=/(\d+)(\s+\d+)?/.exec($t[2]);Ct&&(it=Ct[1]|0,Ct[2]&&(mt=Ct[2]|0,mt in tt||(tt[mt]=new j)));break;case"define":var ft=/SHADER_NAME(_B64)?\s+(.*)$/.exec($t[2]);ft&&(tt[mt].name=ft[1]?u(ft[2]):ft[2]);break}tt[mt].lines.push(new U(it++,Rt))}return Object.keys(tt).forEach(function(qt){var Vt=tt[qt];Vt.lines.forEach(function(Dt){Vt.index[Dt.number]=Dt})}),tt}function K(W){var se=[];return W.split(`
`).forEach(function(Oe){if(!(Oe.length<5)){var it=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Oe);it?se.push(new F(it[1]|0,it[2]|0,it[3].trim())):Oe.length>0&&se.push(new F("unknown",0,Oe))}}),se}function H(W,se){se.forEach(function(Oe){var it=W[Oe.file];if(it){var mt=it.index[Oe.line];if(mt){mt.errors.push(Oe),it.hasErrors=!0;return}}W.unknown.hasErrors=!0,W.unknown.lines[0].errors.push(Oe)})}function B(W,se,Oe,it,mt){if(!W.getShaderParameter(se,W.COMPILE_STATUS)){var tt=W.getShaderInfoLog(se),pt=it===W.FRAGMENT_SHADER?"fragment":"vertex";Ee(Oe,"string",pt+" shader source must be a string",mt);var Rt=Y(Oe,mt),$t=K(tt);H(Rt,$t),Object.keys(Rt).forEach(function(Ct){var ft=Rt[Ct];if(!ft.hasErrors)return;var qt=[""],Vt=[""];function Dt(Et,Ze){qt.push(Et),Vt.push(Ze||"")}Dt("file number "+Ct+": "+ft.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ft.lines.forEach(function(Et){if(Et.errors.length>0){Dt(D(Et.number,4)+"|  ","background-color:yellow; font-weight:bold"),Dt(Et.line+r,"color:red; background-color:yellow; font-weight:bold");var Ze=0;Et.errors.forEach(function(ct){var Lt=ct.message,en=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lt);if(en){var xt=en[1];switch(Lt=en[2],xt){case"assign":xt="=";break}Ze=Math.max(Et.line.indexOf(xt,Ze),0)}else Ze=0;Dt(D("| ",6)),Dt(D("^^^",Ze+3)+r,"font-weight:bold"),Dt(D("| ",6)),Dt(Lt+r,"font-weight:bold")}),Dt(D("| ",6)+r)}else Dt(D(Et.number,4)+"|  "),Dt(Et.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Vt[0]=qt.join("%c"),console.log.apply(console,Vt)):console.log(qt.join(""))}),v.raise("Error compiling "+pt+" shader, "+Rt[0].name)}}function z(W,se,Oe,it,mt){if(!W.getProgramParameter(se,W.LINK_STATUS)){var tt=W.getProgramInfoLog(se),pt=Y(Oe,mt),Rt=Y(it,mt),$t='Error linking program with vertex shader, "'+Rt[0].name+'", and fragment shader "'+pt[0].name+'"';typeof document<"u"?console.log("%c"+$t+r+"%c"+tt,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log($t+r+tt),v.raise($t)}}function X(W){W._commandRef=I()}function ee(W,se,Oe,it){X(W);function mt($t){return $t?it.id($t):0}W._fragId=mt(W.static.frag),W._vertId=mt(W.static.vert);function tt($t,Ct){Object.keys(Ct).forEach(function(ft){$t[it.id(ft)]=!0})}var pt=W._uniformSet={};tt(pt,se.static),tt(pt,se.dynamic);var Rt=W._attributeSet={};tt(Rt,Oe.static),tt(Rt,Oe.dynamic),W._hasCount="count"in W.static||"count"in W.dynamic||"elements"in W.static||"elements"in W.dynamic}function pe(W,se){var Oe=V();c(W+" in command "+(se||I())+(Oe==="unknown"?"":" called from "+Oe))}function ce(W,se,Oe){W||pe(se,Oe||I())}function Pe(W,se,Oe,it){W in se||pe("unknown parameter ("+W+")"+f(Oe)+". possible values: "+Object.keys(se).join(),it||I())}function Ee(W,se,Oe,it){b(W,se)||pe("invalid parameter type"+f(Oe)+". expected "+se+", got "+typeof W,it||I())}function le(W){W()}function ie(W,se,Oe){W.texture?M(W.texture._texture.internalformat,se,"unsupported texture format for attachment"):M(W.renderbuffer._renderbuffer.format,Oe,"unsupported renderbuffer format for attachment")}var $e=33071,Ge=9728,ht=9984,Fe=9985,Nt=9986,Yt=9987,kt=5120,On=5121,Be=5122,Se=5123,Ce=5124,Ye=5125,bt=5126,vt=32819,Wt=32820,Qt=33635,Gt=34042,Kt=36193,rt={};rt[kt]=rt[On]=1,rt[Be]=rt[Se]=rt[Kt]=rt[Qt]=rt[vt]=rt[Wt]=2,rt[Ce]=rt[Ye]=rt[bt]=rt[Gt]=4;function cn(W,se){return W===Wt||W===vt||W===Qt?2:W===Gt?4:rt[W]*se}function We(W){return!(W&W-1)&&!!W}function dn(W,se,Oe){var it,mt=se.width,tt=se.height,pt=se.channels;v(mt>0&&mt<=Oe.maxTextureSize&&tt>0&&tt<=Oe.maxTextureSize,"invalid texture shape"),(W.wrapS!==$e||W.wrapT!==$e)&&v(We(mt)&&We(tt),"incompatible wrap mode for texture, both width and height must be power of 2"),se.mipmask===1?mt!==1&&tt!==1&&v(W.minFilter!==ht&&W.minFilter!==Nt&&W.minFilter!==Fe&&W.minFilter!==Yt,"min filter requires mipmap"):(v(We(mt)&&We(tt),"texture must be a square power of 2 to support mipmapping"),v(se.mipmask===(mt<<1)-1,"missing or incomplete mipmap data")),se.type===bt&&(Oe.extensions.indexOf("oes_texture_float_linear")<0&&v(W.minFilter===Ge&&W.magFilter===Ge,"filter not supported, must enable oes_texture_float_linear"),v(!W.genMipmaps,"mipmap generation not supported with float textures"));var Rt=se.images;for(it=0;it<16;++it)if(Rt[it]){var $t=mt>>it,Ct=tt>>it;v(se.mipmask&1<<it,"missing mipmap data");var ft=Rt[it];if(v(ft.width===$t&&ft.height===Ct,"invalid shape for mip images"),v(ft.format===se.format&&ft.internalformat===se.internalformat&&ft.type===se.type,"incompatible type for mip image"),!ft.compressed)if(ft.data){var qt=Math.ceil(cn(ft.type,pt)*$t/ft.unpackAlignment)*ft.unpackAlignment;v(ft.data.byteLength===qt*Ct,"invalid data for image, buffer size is inconsistent with image format")}else ft.element||ft.copy}else W.genMipmaps||v((se.mipmask&1<<it)===0,"extra mipmap data");se.compressed&&v(!W.genMipmaps,"mipmap generation for compressed images not supported")}function er(W,se,Oe,it){var mt=W.width,tt=W.height,pt=W.channels;v(mt>0&&mt<=it.maxTextureSize&&tt>0&&tt<=it.maxTextureSize,"invalid texture shape"),v(mt===tt,"cube map must be square"),v(se.wrapS===$e&&se.wrapT===$e,"wrap mode not supported by cube map");for(var Rt=0;Rt<Oe.length;++Rt){var $t=Oe[Rt];v($t.width===mt&&$t.height===tt,"inconsistent cube map face shape"),se.genMipmaps&&(v(!$t.compressed,"can not generate mipmap for compressed textures"),v($t.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ct=$t.images,ft=0;ft<16;++ft){var qt=Ct[ft];if(qt){var Vt=mt>>ft,Dt=tt>>ft;v($t.mipmask&1<<ft,"missing mipmap data"),v(qt.width===Vt&&qt.height===Dt,"invalid shape for mip images"),v(qt.format===W.format&&qt.internalformat===W.internalformat&&qt.type===W.type,"incompatible type for mip image"),qt.compressed||(qt.data?v(qt.data.byteLength===Vt*Dt*Math.max(cn(qt.type,pt),qt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):qt.element||qt.copy)}}}}var ae=a(v,{optional:le,raise:c,commandRaise:pe,command:ce,parameter:g,commandParameter:Pe,constructor:E,type:O,commandType:Ee,isTypedArray:_,nni:x,oneOf:M,shaderError:B,linkError:z,callSite:V,saveCommandRef:X,saveDrawInfo:ee,framebufferFormat:ie,guessCommand:I,texture2D:dn,textureCube:er}),tr=0,Pr=0,Xr=5,ao=6;function Un(W,se){this.id=tr++,this.type=W,this.data=se}function bo(W){return W.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ae(W){if(W.length===0)return[];var se=W.charAt(0),Oe=W.charAt(W.length-1);if(W.length>1&&se===Oe&&(se==='"'||se==="'"))return['"'+bo(W.substr(1,W.length-2))+'"'];var it=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(W);if(it)return Ae(W.substr(0,it.index)).concat(Ae(it[1])).concat(Ae(W.substr(it.index+it[0].length)));var mt=W.split(".");if(mt.length===1)return['"'+bo(W)+'"'];for(var tt=[],pt=0;pt<mt.length;++pt)tt=tt.concat(Ae(mt[pt]));return tt}function Qe(W){return"["+Ae(W).join("][")+"]"}function je(W,se){return new Un(W,Qe(se+""))}function st(W){return typeof W=="function"&&!W._reglType||W instanceof Un}function on(W,se){if(typeof W=="function")return new Un(Pr,W);if(typeof W=="number"||typeof W=="boolean")return new Un(Xr,W);if(Array.isArray(W))return new Un(ao,W.map((Oe,it)=>on(Oe,se+"["+it+"]")));if(W instanceof Un)return W;ae(!1,"invalid option type in uniform "+se)}var Jt={DynamicVariable:Un,define:je,isDynamic:st,unbox:on,accessor:Qe},Rn={next:typeof requestAnimationFrame=="function"?function(W){return requestAnimationFrame(W)}:function(W){return setTimeout(W,16)},cancel:typeof cancelAnimationFrame=="function"?function(W){return cancelAnimationFrame(W)}:clearTimeout},Or=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ui(){var W={"":0},se=[""];return{id:function(Oe){var it=W[Oe];return it||(it=W[Oe]=se.length,se.push(Oe),it)},str:function(Oe){return se[Oe]}}}function Si(W,se,Oe){var it=document.createElement("canvas");a(it.style,{border:0,margin:0,padding:0,top:0,left:0}),W.appendChild(it),W===document.body&&(it.style.position="absolute",a(W.style,{margin:0,padding:0}));function mt(){var Rt=window.innerWidth,$t=window.innerHeight;if(W!==document.body){var Ct=W.getBoundingClientRect();Rt=Ct.right-Ct.left,$t=Ct.bottom-Ct.top}it.width=Oe*Rt,it.height=Oe*$t,a(it.style,{width:Rt+"px",height:$t+"px"})}var tt;W!==document.body&&typeof ResizeObserver=="function"?(tt=new ResizeObserver(function(){setTimeout(mt)}),tt.observe(W)):window.addEventListener("resize",mt,!1);function pt(){tt?tt.disconnect():window.removeEventListener("resize",mt),W.removeChild(it)}return mt(),{canvas:it,onDestroy:pt}}function Yo(W,se){function Oe(it){try{return W.getContext(it,se)}catch{return null}}return Oe("webgl")||Oe("experimental-webgl")||Oe("webgl-experimental")}function ti(W){return typeof W.nodeName=="string"&&typeof W.appendChild=="function"&&typeof W.getBoundingClientRect=="function"}function Mn(W){return typeof W.drawArrays=="function"||typeof W.drawElements=="function"}function $n(W){return typeof W=="string"?W.split():(ae(Array.isArray(W),"invalid extension array"),W)}function Hn(W){return typeof W=="string"?(ae(typeof document<"u","not supported outside of DOM"),document.querySelector(W)):W}function lr(W){var se=W||{},Oe,it,mt,tt,pt={},Rt=[],$t=[],Ct=typeof window>"u"?1:window.devicePixelRatio,ft=!1,qt=function(Et){Et&&ae.raise(Et)},Vt=function(){};if(typeof se=="string"?(ae(typeof document<"u","selector queries only supported in DOM enviroments"),Oe=document.querySelector(se),ae(Oe,"invalid query string for element")):typeof se=="object"?ti(se)?Oe=se:Mn(se)?(tt=se,mt=tt.canvas):(ae.constructor(se),"gl"in se?tt=se.gl:"canvas"in se?mt=Hn(se.canvas):"container"in se&&(it=Hn(se.container)),"attributes"in se&&(pt=se.attributes,ae.type(pt,"object","invalid context attributes")),"extensions"in se&&(Rt=$n(se.extensions)),"optionalExtensions"in se&&($t=$n(se.optionalExtensions)),"onDone"in se&&(ae.type(se.onDone,"function","invalid or missing onDone callback"),qt=se.onDone),"profile"in se&&(ft=!!se.profile),"pixelRatio"in se&&(Ct=+se.pixelRatio,ae(Ct>0,"invalid pixel ratio"))):ae.raise("invalid arguments to regl"),Oe&&(Oe.nodeName.toLowerCase()==="canvas"?mt=Oe:it=Oe),!tt){if(!mt){ae(typeof document<"u","must manually specify webgl context outside of DOM environments");var Dt=Si(it||document.body,qt,Ct);if(!Dt)return null;mt=Dt.canvas,Vt=Dt.onDestroy}pt.premultipliedAlpha===void 0&&(pt.premultipliedAlpha=!0),tt=Yo(mt,pt)}return tt?{gl:tt,canvas:mt,container:it,extensions:Rt,optionalExtensions:$t,pixelRatio:Ct,profile:ft,onDone:qt,onDestroy:Vt}:(Vt(),qt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function to(W,se){var Oe={};function it(pt){ae.type(pt,"string","extension name must be string");var Rt=pt.toLowerCase(),$t;try{$t=Oe[Rt]=W.getExtension(Rt)}catch{}return!!$t}for(var mt=0;mt<se.extensions.length;++mt){var tt=se.extensions[mt];if(!it(tt))return se.onDestroy(),se.onDone('"'+tt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return se.optionalExtensions.forEach(it),{extensions:Oe,restore:function(){Object.keys(Oe).forEach(function(pt){if(Oe[pt]&&!it(pt))throw new Error("(regl): error restoring extension "+pt)})}}}function Dr(W,se){for(var Oe=Array(W),it=0;it<W;++it)Oe[it]=se(it);return Oe}var ml=5120,Ha=5121,yl=5122,iu=5123,np=5124,wc=5125,ma=5126;function Fu(W){for(var se=16;se<=1<<28;se*=16)if(W<=se)return se;return 0}function Nn(W){var se,Oe;return se=(W>65535)<<4,W>>>=se,Oe=(W>255)<<3,W>>>=Oe,se|=Oe,Oe=(W>15)<<2,W>>>=Oe,se|=Oe,Oe=(W>3)<<1,W>>>=Oe,se|=Oe,se|W>>1}function Vf(){var W=Dr(8,function(){return[]});function se(tt){var pt=Fu(tt),Rt=W[Nn(pt)>>2];return Rt.length>0?Rt.pop():new ArrayBuffer(pt)}function Oe(tt){W[Nn(tt.byteLength)>>2].push(tt)}function it(tt,pt){var Rt=null;switch(tt){case ml:Rt=new Int8Array(se(pt),0,pt);break;case Ha:Rt=new Uint8Array(se(pt),0,pt);break;case yl:Rt=new Int16Array(se(2*pt),0,pt);break;case iu:Rt=new Uint16Array(se(2*pt),0,pt);break;case np:Rt=new Int32Array(se(4*pt),0,pt);break;case wc:Rt=new Uint32Array(se(4*pt),0,pt);break;case ma:Rt=new Float32Array(se(4*pt),0,pt);break;default:return null}return Rt.length!==pt?Rt.subarray(0,pt):Rt}function mt(tt){Oe(tt.buffer)}return{alloc:se,free:Oe,allocType:it,freeType:mt}}var wo=Vf();wo.zero=Vf();var Ec=3408,Ji=3410,la=3411,Ns=3412,Ca=3413,ya=3414,Da=3415,Oc=33901,Sc=33902,Bf=3379,Uu=3386,Wf=34921,xc=36347,rp=36348,jl=35661,Gf=35660,gl=34930,Ac=36349,Rs=34076,Tc=34024,Mc=7936,op=7937,zf=7938,qr=35724,Wr=34047,Hf=36063,au=34852,ga=3553,Cs=34067,Xf=34069,Fo=33984,Il=6408,Ll=5126,Ds=5121,lu=36160,xi=36053,kc=36064,qf=16384,Pc=function(W,se){var Oe=1;se.ext_texture_filter_anisotropic&&(Oe=W.getParameter(Wr));var it=1,mt=1;se.webgl_draw_buffers&&(it=W.getParameter(au),mt=W.getParameter(Hf));var tt=!!se.oes_texture_float;if(tt){var pt=W.createTexture();W.bindTexture(ga,pt),W.texImage2D(ga,0,Il,1,1,0,Il,Ll,null);var Rt=W.createFramebuffer();if(W.bindFramebuffer(lu,Rt),W.framebufferTexture2D(lu,kc,ga,pt,0),W.bindTexture(ga,null),W.checkFramebufferStatus(lu)!==xi)tt=!1;else{W.viewport(0,0,1,1),W.clearColor(1,0,0,1),W.clear(qf);var $t=wo.allocType(Ll,4);W.readPixels(0,0,1,1,Il,Ll,$t),W.getError()?tt=!1:(W.deleteFramebuffer(Rt),W.deleteTexture(pt),tt=$t[0]===1),wo.freeType($t)}}var Ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ft=!0;if(!Ct){var qt=W.createTexture(),Vt=wo.allocType(Ds,36);W.activeTexture(Fo),W.bindTexture(Cs,qt),W.texImage2D(Xf,0,Il,3,3,0,Il,Ds,Vt),wo.freeType(Vt),W.bindTexture(Cs,null),W.deleteTexture(qt),ft=!W.getError()}return{colorBits:[W.getParameter(Ji),W.getParameter(la),W.getParameter(Ns),W.getParameter(Ca)],depthBits:W.getParameter(ya),stencilBits:W.getParameter(Da),subpixelBits:W.getParameter(Ec),extensions:Object.keys(se).filter(function(Dt){return!!se[Dt]}),maxAnisotropic:Oe,maxDrawbuffers:it,maxColorAttachments:mt,pointSizeDims:W.getParameter(Oc),lineWidthDims:W.getParameter(Sc),maxViewportDims:W.getParameter(Uu),maxCombinedTextureUnits:W.getParameter(jl),maxCubeMapSize:W.getParameter(Rs),maxRenderbufferSize:W.getParameter(Tc),maxTextureUnits:W.getParameter(gl),maxTextureSize:W.getParameter(Bf),maxAttributes:W.getParameter(Wf),maxVertexUniforms:W.getParameter(xc),maxVertexTextureUnits:W.getParameter(Gf),maxVaryingVectors:W.getParameter(rp),maxFragmentUniforms:W.getParameter(Ac),glsl:W.getParameter(qr),renderer:W.getParameter(op),vendor:W.getParameter(Mc),version:W.getParameter(zf),readFloat:tt,npotTextureCube:ft}};function Fi(W){return!!W&&typeof W=="object"&&Array.isArray(W.shape)&&Array.isArray(W.stride)&&typeof W.offset=="number"&&W.shape.length===W.stride.length&&(Array.isArray(W.data)||n(W.data))}var si=function(W){return Object.keys(W).map(function(se){return W[se]})},_a={shape:Vi,flatten:Kf};function lo(W,se,Oe){for(var it=0;it<se;++it)Oe[it]=W[it]}function ip(W,se,Oe,it){for(var mt=0,tt=0;tt<se;++tt)for(var pt=W[tt],Rt=0;Rt<Oe;++Rt)it[mt++]=pt[Rt]}function Ui(W,se,Oe,it,mt,tt){for(var pt=tt,Rt=0;Rt<se;++Rt)for(var $t=W[Rt],Ct=0;Ct<Oe;++Ct)for(var ft=$t[Ct],qt=0;qt<it;++qt)mt[pt++]=ft[qt]}function Yf(W,se,Oe,it,mt){for(var tt=1,pt=Oe+1;pt<se.length;++pt)tt*=se[pt];var Rt=se[Oe];if(se.length-Oe===4){var $t=se[Oe+1],Ct=se[Oe+2],ft=se[Oe+3];for(pt=0;pt<Rt;++pt)Ui(W[pt],$t,Ct,ft,it,mt),mt+=tt}else for(pt=0;pt<Rt;++pt)Yf(W[pt],se,Oe+1,it,mt),mt+=tt}function Kf(W,se,Oe,it){var mt=1;if(se.length)for(var tt=0;tt<se.length;++tt)mt*=se[tt];else mt=0;var pt=it||wo.allocType(Oe,mt);switch(se.length){case 0:break;case 1:lo(W,se[0],pt);break;case 2:ip(W,se[0],se[1],pt);break;case 3:Ui(W,se[0],se[1],se[2],pt,0);break;default:Yf(W,se,0,pt,0)}return pt}function Vi(W){for(var se=[],Oe=W;Oe.length;Oe=Oe[0])se.push(Oe.length);return se}var Qi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Nc=5120,$r=5122,ci=5124,js=5121,Zf=5123,Rc=5125,Is=5126,Xa=5126,Bi={int8:Nc,int16:$r,int32:ci,uint8:js,uint16:Zf,uint32:Rc,float:Is,float32:Xa},uu=35048,ea=35040,ba={dynamic:uu,stream:ea,static:35044},Nr=_a.flatten,Wi=_a.shape,ja=35044,yi=35040,su=5121,$l=5126,Ia=[];Ia[5120]=1,Ia[5122]=2,Ia[5124]=4,Ia[5121]=1,Ia[5123]=2,Ia[5125]=4,Ia[5126]=4;function vo(W){return Qi[Object.prototype.toString.call(W)]|0}function Vu(W,se){for(var Oe=0;Oe<se.length;++Oe)W[Oe]=se[Oe]}function qa(W,se,Oe,it,mt,tt,pt){for(var Rt=0,$t=0;$t<Oe;++$t)for(var Ct=0;Ct<it;++Ct)W[Rt++]=se[mt*$t+tt*Ct+pt]}function wa(W,se,Oe,it){var mt=0,tt={};function pt(Ze){this.id=mt++,this.buffer=W.createBuffer(),this.type=Ze,this.usage=ja,this.byteLength=0,this.dimension=1,this.dtype=su,this.persistentData=null,Oe.profile&&(this.stats={size:0})}pt.prototype.bind=function(){W.bindBuffer(this.type,this.buffer)},pt.prototype.destroy=function(){Vt(this)};var Rt=[];function $t(Ze,ct){var Lt=Rt.pop();return Lt||(Lt=new pt(Ze)),Lt.bind(),qt(Lt,ct,yi,0,1,!1),Lt}function Ct(Ze){Rt.push(Ze)}function ft(Ze,ct,Lt){Ze.byteLength=ct.byteLength,W.bufferData(Ze.type,ct,Lt)}function qt(Ze,ct,Lt,en,xt,an){var Tt;if(Ze.usage=Lt,Array.isArray(ct)){if(Ze.dtype=en||$l,ct.length>0){var Ht;if(Array.isArray(ct[0])){Tt=Wi(ct);for(var At=1,Zt=1;Zt<Tt.length;++Zt)At*=Tt[Zt];Ze.dimension=At,Ht=Nr(ct,Tt,Ze.dtype),ft(Ze,Ht,Lt),an?Ze.persistentData=Ht:wo.freeType(Ht)}else if(typeof ct[0]=="number"){Ze.dimension=xt;var Pn=wo.allocType(Ze.dtype,ct.length);Vu(Pn,ct),ft(Ze,Pn,Lt),an?Ze.persistentData=Pn:wo.freeType(Pn)}else n(ct[0])?(Ze.dimension=ct[0].length,Ze.dtype=en||vo(ct[0])||$l,Ht=Nr(ct,[ct.length,ct[0].length],Ze.dtype),ft(Ze,Ht,Lt),an?Ze.persistentData=Ht:wo.freeType(Ht)):ae.raise("invalid buffer data")}}else if(n(ct))Ze.dtype=en||vo(ct),Ze.dimension=xt,ft(Ze,ct,Lt),an&&(Ze.persistentData=new Uint8Array(new Uint8Array(ct.buffer)));else if(Fi(ct)){Tt=ct.shape;var Bn=ct.stride,jt=ct.offset,Mt=0,St=0,jn=0,rr=0;Tt.length===1?(Mt=Tt[0],St=1,jn=Bn[0],rr=0):Tt.length===2?(Mt=Tt[0],St=Tt[1],jn=Bn[0],rr=Bn[1]):ae.raise("invalid shape"),Ze.dtype=en||vo(ct.data)||$l,Ze.dimension=St;var hn=wo.allocType(Ze.dtype,Mt*St);qa(hn,ct.data,Mt,St,jn,rr,jt),ft(Ze,hn,Lt),an?Ze.persistentData=hn:wo.freeType(hn)}else ct instanceof ArrayBuffer?(Ze.dtype=su,Ze.dimension=xt,ft(Ze,ct,Lt),an&&(Ze.persistentData=new Uint8Array(new Uint8Array(ct)))):ae.raise("invalid buffer data")}function Vt(Ze){se.bufferCount--,it(Ze);var ct=Ze.buffer;ae(ct,"buffer must not be deleted already"),W.deleteBuffer(ct),Ze.buffer=null,delete tt[Ze.id]}function Dt(Ze,ct,Lt,en){se.bufferCount++;var xt=new pt(ct);tt[xt.id]=xt;function an(At){var Zt=ja,Pn=null,Bn=0,jt=0,Mt=1;return Array.isArray(At)||n(At)||Fi(At)||At instanceof ArrayBuffer?Pn=At:typeof At=="number"?Bn=At|0:At&&(ae.type(At,"object","buffer arguments must be an object, a number or an array"),"data"in At&&(ae(Pn===null||Array.isArray(Pn)||n(Pn)||Fi(Pn),"invalid data for buffer"),Pn=At.data),"usage"in At&&(ae.parameter(At.usage,ba,"invalid buffer usage"),Zt=ba[At.usage]),"type"in At&&(ae.parameter(At.type,Bi,"invalid buffer type"),jt=Bi[At.type]),"dimension"in At&&(ae.type(At.dimension,"number","invalid dimension"),Mt=At.dimension|0),"length"in At&&(ae.nni(Bn,"buffer length must be a nonnegative integer"),Bn=At.length|0)),xt.bind(),Pn?qt(xt,Pn,Zt,jt,Mt,en):(Bn&&W.bufferData(xt.type,Bn,Zt),xt.dtype=jt||su,xt.usage=Zt,xt.dimension=Mt,xt.byteLength=Bn),Oe.profile&&(xt.stats.size=xt.byteLength*Ia[xt.dtype]),an}function Tt(At,Zt){ae(Zt+At.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+At.byteLength+" starting from offset "+Zt+" to a buffer of size "+xt.byteLength),W.bufferSubData(xt.type,Zt,At)}function Ht(At,Zt){var Pn=(Zt||0)|0,Bn;if(xt.bind(),n(At)||At instanceof ArrayBuffer)Tt(At,Pn);else if(Array.isArray(At)){if(At.length>0)if(typeof At[0]=="number"){var jt=wo.allocType(xt.dtype,At.length);Vu(jt,At),Tt(jt,Pn),wo.freeType(jt)}else if(Array.isArray(At[0])||n(At[0])){Bn=Wi(At);var Mt=Nr(At,Bn,xt.dtype);Tt(Mt,Pn),wo.freeType(Mt)}else ae.raise("invalid buffer data")}else if(Fi(At)){Bn=At.shape;var St=At.stride,jn=0,rr=0,hn=0,ur=0;Bn.length===1?(jn=Bn[0],rr=1,hn=St[0],ur=0):Bn.length===2?(jn=Bn[0],rr=Bn[1],hn=St[0],ur=St[1]):ae.raise("invalid shape");var Wn=Array.isArray(At.data)?xt.dtype:vo(At.data),ir=wo.allocType(Wn,jn*rr);qa(ir,At.data,jn,rr,hn,ur,At.offset),Tt(ir,Pn),wo.freeType(ir)}else ae.raise("invalid data for buffer subdata");return an}return Lt||an(Ze),an._reglType="buffer",an._buffer=xt,an.subdata=Ht,Oe.profile&&(an.stats=xt.stats),an.destroy=function(){Vt(xt)},an}function Et(){si(tt).forEach(function(Ze){Ze.buffer=W.createBuffer(),W.bindBuffer(Ze.type,Ze.buffer),W.bufferData(Ze.type,Ze.persistentData||Ze.byteLength,Ze.usage)})}return Oe.profile&&(se.getTotalBufferSize=function(){var Ze=0;return Object.keys(tt).forEach(function(ct){Ze+=tt[ct].stats.size}),Ze}),{create:Dt,createStream:$t,destroyStream:Ct,clear:function(){si(tt).forEach(Vt),Rt.forEach(Vt)},getBuffer:function(Ze){return Ze&&Ze._buffer instanceof pt?Ze._buffer:null},restore:Et,_initBuffer:qt}}var Cc=0,ap=0,Dc=1,Ko=1,Bu=4,Ya=4,ni={points:Cc,point:ap,lines:Dc,line:Ko,triangles:Bu,triangle:Ya,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},jc=0,ua=1,Ea=4,Ls=5120,Gi=5121,ta=5122,fi=5123,sa=5124,Ii=5125,dt=34963,Ft=35040,Ut=35044;function yn(W,se,Oe,it){var mt={},tt=0,pt={uint8:Gi,uint16:fi};se.oes_element_index_uint&&(pt.uint32=Ii);function Rt(Et){this.id=tt++,mt[this.id]=this,this.buffer=Et,this.primType=Ea,this.vertCount=0,this.type=0}Rt.prototype.bind=function(){this.buffer.bind()};var $t=[];function Ct(Et){var Ze=$t.pop();return Ze||(Ze=new Rt(Oe.create(null,dt,!0,!1)._buffer)),qt(Ze,Et,Ft,-1,-1,0,0),Ze}function ft(Et){$t.push(Et)}function qt(Et,Ze,ct,Lt,en,xt,an){Et.buffer.bind();var Tt;if(Ze){var Ht=an;!an&&(!n(Ze)||Fi(Ze)&&!n(Ze.data))&&(Ht=se.oes_element_index_uint?Ii:fi),Oe._initBuffer(Et.buffer,Ze,ct,Ht,3)}else W.bufferData(dt,xt,ct),Et.buffer.dtype=Tt||Gi,Et.buffer.usage=ct,Et.buffer.dimension=3,Et.buffer.byteLength=xt;if(Tt=an,!an){switch(Et.buffer.dtype){case Gi:case Ls:Tt=Gi;break;case fi:case ta:Tt=fi;break;case Ii:case sa:Tt=Ii;break;default:ae.raise("unsupported type for element array")}Et.buffer.dtype=Tt}Et.type=Tt,ae(Tt!==Ii||!!se.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var At=en;At<0&&(At=Et.buffer.byteLength,Tt===fi?At>>=1:Tt===Ii&&(At>>=2)),Et.vertCount=At;var Zt=Lt;if(Lt<0){Zt=Ea;var Pn=Et.buffer.dimension;Pn===1&&(Zt=jc),Pn===2&&(Zt=ua),Pn===3&&(Zt=Ea)}Et.primType=Zt}function Vt(Et){it.elementsCount--,ae(Et.buffer!==null,"must not double destroy elements"),delete mt[Et.id],Et.buffer.destroy(),Et.buffer=null}function Dt(Et,Ze){var ct=Oe.create(null,dt,!0),Lt=new Rt(ct._buffer);it.elementsCount++;function en(xt){if(!xt)ct(),Lt.primType=Ea,Lt.vertCount=0,Lt.type=Gi;else if(typeof xt=="number")ct(xt),Lt.primType=Ea,Lt.vertCount=xt|0,Lt.type=Gi;else{var an=null,Tt=Ut,Ht=-1,At=-1,Zt=0,Pn=0;Array.isArray(xt)||n(xt)||Fi(xt)?an=xt:(ae.type(xt,"object","invalid arguments for elements"),"data"in xt&&(an=xt.data,ae(Array.isArray(an)||n(an)||Fi(an),"invalid data for element buffer")),"usage"in xt&&(ae.parameter(xt.usage,ba,"invalid element buffer usage"),Tt=ba[xt.usage]),"primitive"in xt&&(ae.parameter(xt.primitive,ni,"invalid element buffer primitive"),Ht=ni[xt.primitive]),"count"in xt&&(ae(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),At=xt.count|0),"type"in xt&&(ae.parameter(xt.type,pt,"invalid buffer type"),Pn=pt[xt.type]),"length"in xt?Zt=xt.length|0:(Zt=At,Pn===fi||Pn===ta?Zt*=2:(Pn===Ii||Pn===sa)&&(Zt*=4))),qt(Lt,an,Tt,Ht,At,Zt,Pn)}return en}return en(Et),en._reglType="elements",en._elements=Lt,en.subdata=function(xt,an){return ct.subdata(xt,an),en},en.destroy=function(){Vt(Lt)},en}return{create:Dt,createStream:Ct,destroyStream:ft,getElements:function(Et){return typeof Et=="function"&&Et._elements instanceof Rt?Et._elements:null},clear:function(){si(mt).forEach(Vt)}}}var fr=new Float32Array(1),Rr=new Uint32Array(fr.buffer),mo=5123;function P(W){for(var se=wo.allocType(mo,W.length),Oe=0;Oe<W.length;++Oe)if(isNaN(W[Oe]))se[Oe]=65535;else if(W[Oe]===1/0)se[Oe]=31744;else if(W[Oe]===-1/0)se[Oe]=64512;else{fr[0]=W[Oe];var it=Rr[0],mt=it>>>31<<15,tt=(it<<1>>>24)-127,pt=it>>13&1023;if(tt<-24)se[Oe]=mt;else if(tt<-14){var Rt=-14-tt;se[Oe]=mt+(pt+1024>>Rt)}else tt>15?se[Oe]=mt+31744:se[Oe]=mt+(tt+15<<10)+pt}return se}function N(W){return Array.isArray(W)||n(W)}var G=function(W){return!(W&W-1)&&!!W},oe=34467,we=3553,Ke=34067,gt=34069,Xt=6408,Sn=6406,wr=6407,pn=6409,Gr=6410,mr=32854,Ir=32855,ca=36194,Ao=32819,na=32820,_l=33635,bl=34042,Fl=6402,cu=34041,Ka=35904,fu=35906,ri=36193,Ul=33776,wl=33777,Za=33778,Ja=33779,Wu=35986,gh=35987,_h=34798,lp=35840,Ic=35841,Gu=35842,Jf=35843,bh=36196,zu=5121,Lc=5123,Qf=5125,Uo=5126,zi=10242,ed=10243,td=10497,$s=33071,Jv=33648,Fs=10240,Us=10241,$c=9728,Hu=9729,du=9984,Vs=9985,Fc=9986,pu=9987,Qv=33170,Uc=4352,em=4353,tm=4354,wh=34046,nd=3317,Li=37440,Eh=37441,ue=37443,Xu=37444,Vl=33984,La=[du,Fc,Vs,pu],Cr=[0,pn,Gr,wr,Xt],Ai={};Ai[pn]=Ai[Sn]=Ai[Fl]=1,Ai[cu]=Ai[Gr]=2,Ai[wr]=Ai[Ka]=3,Ai[Xt]=Ai[fu]=4;function Fr(W){return"[object "+W+"]"}var Qa=Fr("HTMLCanvasElement"),Bl=Fr("OffscreenCanvas"),Oa=Fr("CanvasRenderingContext2D"),rd=Fr("ImageBitmap"),od=Fr("HTMLImageElement"),up=Fr("HTMLVideoElement"),Oh=Object.keys(Qi).concat([Qa,Bl,Oa,rd,od,up]),Wl=[];Wl[zu]=1,Wl[Uo]=4,Wl[ri]=2,Wl[Lc]=2,Wl[Qf]=4;var Vo=[];Vo[mr]=2,Vo[Ir]=2,Vo[ca]=2,Vo[cu]=4,Vo[Ul]=.5,Vo[wl]=.5,Vo[Za]=1,Vo[Ja]=1,Vo[Wu]=.5,Vo[gh]=1,Vo[_h]=1,Vo[lp]=.5,Vo[Ic]=.25,Vo[Gu]=.5,Vo[Jf]=.25,Vo[bh]=.5;function Bs(W){return Array.isArray(W)&&(W.length===0||typeof W[0]=="number")}function sp(W){if(!Array.isArray(W))return!1;var se=W.length;return!(se===0||!N(W[0]))}function Gl(W){return Object.prototype.toString.call(W)}function el(W){return Gl(W)===Qa}function Vc(W){return Gl(W)===Bl}function hu(W){return Gl(W)===Oa}function Sa(W){return Gl(W)===rd}function cp(W){return Gl(W)===od}function fp(W){return Gl(W)===up}function tl(W){if(!W)return!1;var se=Gl(W);return Oh.indexOf(se)>=0?!0:Bs(W)||sp(W)||Fi(W)}function Eo(W){return Qi[Object.prototype.toString.call(W)]|0}function Sh(W,se){var Oe=se.length;switch(W.type){case zu:case Lc:case Qf:case Uo:var it=wo.allocType(W.type,Oe);it.set(se),W.data=it;break;case ri:W.data=P(se);break;default:ae.raise("unsupported texture type, must specify a typed array")}}function dp(W,se){return wo.allocType(W.type===ri?Uo:W.type,se)}function Bo(W,se){W.type===ri?(W.data=P(se),wo.freeType(se)):W.data=se}function Yr(W,se,Oe,it,mt,tt){for(var pt=W.width,Rt=W.height,$t=W.channels,Ct=pt*Rt*$t,ft=dp(W,Ct),qt=0,Vt=0;Vt<Rt;++Vt)for(var Dt=0;Dt<pt;++Dt)for(var Et=0;Et<$t;++Et)ft[qt++]=se[Oe*Dt+it*Vt+mt*Et+tt];Bo(W,ft)}function oi(W,se,Oe,it,mt,tt){var pt;if(typeof Vo[W]<"u"?pt=Vo[W]:pt=Ai[W]*Wl[se],tt&&(pt*=6),mt){for(var Rt=0,$t=Oe;$t>=1;)Rt+=pt*$t*$t,$t/=2;return Rt}else return pt*Oe*it}function xr(W,se,Oe,it,mt,tt,pt){var Rt={"don't care":Uc,"dont care":Uc,nice:tm,fast:em},$t={repeat:td,clamp:$s,mirror:Jv},Ct={nearest:$c,linear:Hu},ft=a({mipmap:pu,"nearest mipmap nearest":du,"linear mipmap nearest":Vs,"nearest mipmap linear":Fc,"linear mipmap linear":pu},Ct),qt={none:0,browser:Xu},Vt={uint8:zu,rgba4:Ao,rgb565:_l,"rgb5 a1":na},Dt={alpha:Sn,luminance:pn,"luminance alpha":Gr,rgb:wr,rgba:Xt,rgba4:mr,"rgb5 a1":Ir,rgb565:ca},Et={};se.ext_srgb&&(Dt.srgb=Ka,Dt.srgba=fu),se.oes_texture_float&&(Vt.float32=Vt.float=Uo),se.oes_texture_half_float&&(Vt.float16=Vt["half float"]=ri),se.webgl_depth_texture&&(a(Dt,{depth:Fl,"depth stencil":cu}),a(Vt,{uint16:Lc,uint32:Qf,"depth stencil":bl})),se.webgl_compressed_texture_s3tc&&a(Et,{"rgb s3tc dxt1":Ul,"rgba s3tc dxt1":wl,"rgba s3tc dxt3":Za,"rgba s3tc dxt5":Ja}),se.webgl_compressed_texture_atc&&a(Et,{"rgb atc":Wu,"rgba atc explicit alpha":gh,"rgba atc interpolated alpha":_h}),se.webgl_compressed_texture_pvrtc&&a(Et,{"rgb pvrtc 4bppv1":lp,"rgb pvrtc 2bppv1":Ic,"rgba pvrtc 4bppv1":Gu,"rgba pvrtc 2bppv1":Jf}),se.webgl_compressed_texture_etc1&&(Et["rgb etc1"]=bh);var Ze=Array.prototype.slice.call(W.getParameter(oe));Object.keys(Et).forEach(function(ye){var at=Et[ye];Ze.indexOf(at)>=0&&(Dt[ye]=at)});var ct=Object.keys(Dt);Oe.textureFormats=ct;var Lt=[];Object.keys(Dt).forEach(function(ye){var at=Dt[ye];Lt[at]=ye});var en=[];Object.keys(Vt).forEach(function(ye){var at=Vt[ye];en[at]=ye});var xt=[];Object.keys(Ct).forEach(function(ye){var at=Ct[ye];xt[at]=ye});var an=[];Object.keys(ft).forEach(function(ye){var at=ft[ye];an[at]=ye});var Tt=[];Object.keys($t).forEach(function(ye){var at=$t[ye];Tt[at]=ye});var Ht=ct.reduce(function(ye,at){var nt=Dt[at];return nt===pn||nt===Sn||nt===pn||nt===Gr||nt===Fl||nt===cu||se.ext_srgb&&(nt===Ka||nt===fu)?ye[nt]=nt:nt===Ir||at.indexOf("rgba")>=0?ye[nt]=Xt:ye[nt]=wr,ye},{});function At(){this.internalformat=Xt,this.format=Xt,this.type=zu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Xu,this.width=0,this.height=0,this.channels=0}function Zt(ye,at){ye.internalformat=at.internalformat,ye.format=at.format,ye.type=at.type,ye.compressed=at.compressed,ye.premultiplyAlpha=at.premultiplyAlpha,ye.flipY=at.flipY,ye.unpackAlignment=at.unpackAlignment,ye.colorSpace=at.colorSpace,ye.width=at.width,ye.height=at.height,ye.channels=at.channels}function Pn(ye,at){if(!(typeof at!="object"||!at)){if("premultiplyAlpha"in at&&(ae.type(at.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ye.premultiplyAlpha=at.premultiplyAlpha),"flipY"in at&&(ae.type(at.flipY,"boolean","invalid texture flip"),ye.flipY=at.flipY),"alignment"in at&&(ae.oneOf(at.alignment,[1,2,4,8],"invalid texture unpack alignment"),ye.unpackAlignment=at.alignment),"colorSpace"in at&&(ae.parameter(at.colorSpace,qt,"invalid colorSpace"),ye.colorSpace=qt[at.colorSpace]),"type"in at){var nt=at.type;ae(se.oes_texture_float||!(nt==="float"||nt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ae(se.oes_texture_half_float||!(nt==="half float"||nt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ae(se.webgl_depth_texture||!(nt==="uint16"||nt==="uint32"||nt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ae.parameter(nt,Vt,"invalid texture type"),ye.type=Vt[nt]}var sn=ye.width,dr=ye.height,ve=ye.channels,re=!1;"shape"in at?(ae(Array.isArray(at.shape)&&at.shape.length>=2,"shape must be an array"),sn=at.shape[0],dr=at.shape[1],at.shape.length===3&&(ve=at.shape[2],ae(ve>0&&ve<=4,"invalid number of channels"),re=!0),ae(sn>=0&&sn<=Oe.maxTextureSize,"invalid width"),ae(dr>=0&&dr<=Oe.maxTextureSize,"invalid height")):("radius"in at&&(sn=dr=at.radius,ae(sn>=0&&sn<=Oe.maxTextureSize,"invalid radius")),"width"in at&&(sn=at.width,ae(sn>=0&&sn<=Oe.maxTextureSize,"invalid width")),"height"in at&&(dr=at.height,ae(dr>=0&&dr<=Oe.maxTextureSize,"invalid height")),"channels"in at&&(ve=at.channels,ae(ve>0&&ve<=4,"invalid number of channels"),re=!0)),ye.width=sn|0,ye.height=dr|0,ye.channels=ve|0;var Ne=!1;if("format"in at){var ze=at.format;ae(se.webgl_depth_texture||!(ze==="depth"||ze==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ae.parameter(ze,Dt,"invalid texture format");var Je=ye.internalformat=Dt[ze];ye.format=Ht[Je],ze in Vt&&("type"in at||(ye.type=Vt[ze])),ze in Et&&(ye.compressed=!0),Ne=!0}!re&&Ne?ye.channels=Ai[ye.format]:re&&!Ne?ye.channels!==Cr[ye.format]&&(ye.format=ye.internalformat=Cr[ye.channels]):Ne&&re&&ae(ye.channels===Ai[ye.format],"number of channels inconsistent with specified format")}}function Bn(ye){W.pixelStorei(Li,ye.flipY),W.pixelStorei(Eh,ye.premultiplyAlpha),W.pixelStorei(ue,ye.colorSpace),W.pixelStorei(nd,ye.unpackAlignment)}function jt(){At.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(ye,at){var nt=null;if(tl(at)?nt=at:at&&(ae.type(at,"object","invalid pixel data type"),Pn(ye,at),"x"in at&&(ye.xOffset=at.x|0),"y"in at&&(ye.yOffset=at.y|0),tl(at.data)&&(nt=at.data)),ae(!ye.compressed||nt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),at.copy){ae(!nt,"can not specify copy and data field for the same texture");var sn=mt.viewportWidth,dr=mt.viewportHeight;ye.width=ye.width||sn-ye.xOffset,ye.height=ye.height||dr-ye.yOffset,ye.needsCopy=!0,ae(ye.xOffset>=0&&ye.xOffset<sn&&ye.yOffset>=0&&ye.yOffset<dr&&ye.width>0&&ye.width<=sn&&ye.height>0&&ye.height<=dr,"copy texture read out of bounds")}else if(!nt)ye.width=ye.width||1,ye.height=ye.height||1,ye.channels=ye.channels||4;else if(n(nt))ye.channels=ye.channels||4,ye.data=nt,!("type"in at)&&ye.type===zu&&(ye.type=Eo(nt));else if(Bs(nt))ye.channels=ye.channels||4,Sh(ye,nt),ye.alignment=1,ye.needsFree=!0;else if(Fi(nt)){var ve=nt.data;!Array.isArray(ve)&&ye.type===zu&&(ye.type=Eo(ve));var re=nt.shape,Ne=nt.stride,ze,Je,De,Re,Ue,he;re.length===3?(De=re[2],he=Ne[2]):(ae(re.length===2,"invalid ndarray pixel data, must be 2 or 3D"),De=1,he=1),ze=re[0],Je=re[1],Re=Ne[0],Ue=Ne[1],ye.alignment=1,ye.width=ze,ye.height=Je,ye.channels=De,ye.format=ye.internalformat=Cr[De],ye.needsFree=!0,Yr(ye,ve,Re,Ue,he,nt.offset)}else if(el(nt)||Vc(nt)||hu(nt))el(nt)||Vc(nt)?ye.element=nt:ye.element=nt.canvas,ye.width=ye.element.width,ye.height=ye.element.height,ye.channels=4;else if(Sa(nt))ye.element=nt,ye.width=nt.width,ye.height=nt.height,ye.channels=4;else if(cp(nt))ye.element=nt,ye.width=nt.naturalWidth,ye.height=nt.naturalHeight,ye.channels=4;else if(fp(nt))ye.element=nt,ye.width=nt.videoWidth,ye.height=nt.videoHeight,ye.channels=4;else if(sp(nt)){var Te=ye.width||nt[0].length,de=ye.height||nt.length,He=ye.channels;N(nt[0][0])?He=He||nt[0][0].length:He=He||1;for(var Xe=_a.shape(nt),p=1,y=0;y<Xe.length;++y)p*=Xe[y];var S=dp(ye,p);_a.flatten(nt,Xe,"",S),Bo(ye,S),ye.alignment=1,ye.width=Te,ye.height=de,ye.channels=He,ye.format=ye.internalformat=Cr[He],ye.needsFree=!0}ye.type===Uo?ae(Oe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ye.type===ri&&ae(Oe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function St(ye,at,nt){var sn=ye.element,dr=ye.data,ve=ye.internalformat,re=ye.format,Ne=ye.type,ze=ye.width,Je=ye.height;Bn(ye),sn?W.texImage2D(at,nt,re,re,Ne,sn):ye.compressed?W.compressedTexImage2D(at,nt,ve,ze,Je,0,dr):ye.needsCopy?(it(),W.copyTexImage2D(at,nt,re,ye.xOffset,ye.yOffset,ze,Je,0)):W.texImage2D(at,nt,re,ze,Je,0,re,Ne,dr||null)}function jn(ye,at,nt,sn,dr){var ve=ye.element,re=ye.data,Ne=ye.internalformat,ze=ye.format,Je=ye.type,De=ye.width,Re=ye.height;Bn(ye),ve?W.texSubImage2D(at,dr,nt,sn,ze,Je,ve):ye.compressed?W.compressedTexSubImage2D(at,dr,nt,sn,Ne,De,Re,re):ye.needsCopy?(it(),W.copyTexSubImage2D(at,dr,nt,sn,ye.xOffset,ye.yOffset,De,Re)):W.texSubImage2D(at,dr,nt,sn,De,Re,ze,Je,re)}var rr=[];function hn(){return rr.pop()||new jt}function ur(ye){ye.needsFree&&wo.freeType(ye.data),jt.call(ye),rr.push(ye)}function Wn(){At.call(this),this.genMipmaps=!1,this.mipmapHint=Uc,this.mipmask=0,this.images=Array(16)}function ir(ye,at,nt){var sn=ye.images[0]=hn();ye.mipmask=1,sn.width=ye.width=at,sn.height=ye.height=nt,sn.channels=ye.channels=4}function _r(ye,at){var nt=null;if(tl(at))nt=ye.images[0]=hn(),Zt(nt,ye),Mt(nt,at),ye.mipmask=1;else if(Pn(ye,at),Array.isArray(at.mipmap))for(var sn=at.mipmap,dr=0;dr<sn.length;++dr)nt=ye.images[dr]=hn(),Zt(nt,ye),nt.width>>=dr,nt.height>>=dr,Mt(nt,sn[dr]),ye.mipmask|=1<<dr;else nt=ye.images[0]=hn(),Zt(nt,ye),Mt(nt,at),ye.mipmask=1;Zt(ye,ye.images[0]),ye.compressed&&(ye.internalformat===Ul||ye.internalformat===wl||ye.internalformat===Za||ye.internalformat===Ja)&&ae(ye.width%4===0&&ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function jo(ye,at){for(var nt=ye.images,sn=0;sn<nt.length;++sn){if(!nt[sn])return;St(nt[sn],at,sn)}}var Po=[];function or(){var ye=Po.pop()||new Wn;At.call(ye),ye.mipmask=0;for(var at=0;at<16;++at)ye.images[at]=null;return ye}function Zo(ye){for(var at=ye.images,nt=0;nt<at.length;++nt)at[nt]&&ur(at[nt]),at[nt]=null;Po.push(ye)}function uo(){this.minFilter=$c,this.magFilter=$c,this.wrapS=$s,this.wrapT=$s,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Uc}function Io(ye,at){if("min"in at){var nt=at.min;ae.parameter(nt,ft),ye.minFilter=ft[nt],La.indexOf(ye.minFilter)>=0&&!("faces"in at)&&(ye.genMipmaps=!0)}if("mag"in at){var sn=at.mag;ae.parameter(sn,Ct),ye.magFilter=Ct[sn]}var dr=ye.wrapS,ve=ye.wrapT;if("wrap"in at){var re=at.wrap;typeof re=="string"?(ae.parameter(re,$t),dr=ve=$t[re]):Array.isArray(re)&&(ae.parameter(re[0],$t),ae.parameter(re[1],$t),dr=$t[re[0]],ve=$t[re[1]])}else{if("wrapS"in at){var Ne=at.wrapS;ae.parameter(Ne,$t),dr=$t[Ne]}if("wrapT"in at){var ze=at.wrapT;ae.parameter(ze,$t),ve=$t[ze]}}if(ye.wrapS=dr,ye.wrapT=ve,"anisotropic"in at){var Je=at.anisotropic;ae(typeof Je=="number"&&Je>=1&&Je<=Oe.maxAnisotropic,"aniso samples must be between 1 and "),ye.anisotropic=at.anisotropic}if("mipmap"in at){var De=!1;switch(typeof at.mipmap){case"string":ae.parameter(at.mipmap,Rt,"invalid mipmap hint"),ye.mipmapHint=Rt[at.mipmap],ye.genMipmaps=!0,De=!0;break;case"boolean":De=ye.genMipmaps=at.mipmap;break;case"object":ae(Array.isArray(at.mipmap),"invalid mipmap type"),ye.genMipmaps=!1,De=!0;break;default:ae.raise("invalid mipmap type")}De&&!("min"in at)&&(ye.minFilter=du)}}function zo(ye,at){W.texParameteri(at,Us,ye.minFilter),W.texParameteri(at,Fs,ye.magFilter),W.texParameteri(at,zi,ye.wrapS),W.texParameteri(at,ed,ye.wrapT),se.ext_texture_filter_anisotropic&&W.texParameteri(at,wh,ye.anisotropic),ye.genMipmaps&&(W.hint(Qv,ye.mipmapHint),W.generateMipmap(at))}var ii=0,pi={},Jo=Oe.maxTextureUnits,yo=Array(Jo).map(function(){return null});function Kn(ye){At.call(this),this.mipmask=0,this.internalformat=Xt,this.id=ii++,this.refCount=1,this.target=ye,this.texture=W.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new uo,pt.profile&&(this.stats={size:0})}function hi(ye){W.activeTexture(Vl),W.bindTexture(ye.target,ye.texture)}function Tr(){var ye=yo[0];ye?W.bindTexture(ye.target,ye.texture):W.bindTexture(we,null)}function Dn(ye){var at=ye.texture;ae(at,"must not double destroy texture");var nt=ye.unit,sn=ye.target;nt>=0&&(W.activeTexture(Vl+nt),W.bindTexture(sn,null),yo[nt]=null),W.deleteTexture(at),ye.texture=null,ye.params=null,ye.pixels=null,ye.refCount=0,delete pi[ye.id],tt.textureCount--}a(Kn.prototype,{bind:function(){var ye=this;ye.bindCount+=1;var at=ye.unit;if(at<0){for(var nt=0;nt<Jo;++nt){var sn=yo[nt];if(sn){if(sn.bindCount>0)continue;sn.unit=-1}yo[nt]=ye,at=nt;break}at>=Jo&&ae.raise("insufficient number of texture units"),pt.profile&&tt.maxTextureUnits<at+1&&(tt.maxTextureUnits=at+1),ye.unit=at,W.activeTexture(Vl+at),W.bindTexture(ye.target,ye.texture)}return at},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Dn(this)}});function hr(ye,at){var nt=new Kn(we);pi[nt.id]=nt,tt.textureCount++;function sn(re,Ne){var ze=nt.texInfo;uo.call(ze);var Je=or();return typeof re=="number"?typeof Ne=="number"?ir(Je,re|0,Ne|0):ir(Je,re|0,re|0):re?(ae.type(re,"object","invalid arguments to regl.texture"),Io(ze,re),_r(Je,re)):ir(Je,1,1),ze.genMipmaps&&(Je.mipmask=(Je.width<<1)-1),nt.mipmask=Je.mipmask,Zt(nt,Je),ae.texture2D(ze,Je,Oe),nt.internalformat=Je.internalformat,sn.width=Je.width,sn.height=Je.height,hi(nt),jo(Je,we),zo(ze,we),Tr(),Zo(Je),pt.profile&&(nt.stats.size=oi(nt.internalformat,nt.type,Je.width,Je.height,ze.genMipmaps,!1)),sn.format=Lt[nt.internalformat],sn.type=en[nt.type],sn.mag=xt[ze.magFilter],sn.min=an[ze.minFilter],sn.wrapS=Tt[ze.wrapS],sn.wrapT=Tt[ze.wrapT],sn}function dr(re,Ne,ze,Je){ae(!!re,"must specify image data");var De=Ne|0,Re=ze|0,Ue=Je|0,he=hn();return Zt(he,nt),he.width=0,he.height=0,Mt(he,re),he.width=he.width||(nt.width>>Ue)-De,he.height=he.height||(nt.height>>Ue)-Re,ae(nt.type===he.type&&nt.format===he.format&&nt.internalformat===he.internalformat,"incompatible format for texture.subimage"),ae(De>=0&&Re>=0&&De+he.width<=nt.width&&Re+he.height<=nt.height,"texture.subimage write out of bounds"),ae(nt.mipmask&1<<Ue,"missing mipmap data"),ae(he.data||he.element||he.needsCopy,"missing image data"),hi(nt),jn(he,we,De,Re,Ue),Tr(),ur(he),sn}function ve(re,Ne){var ze=re|0,Je=Ne|0||ze;if(ze===nt.width&&Je===nt.height)return sn;sn.width=nt.width=ze,sn.height=nt.height=Je,hi(nt);for(var De=0;nt.mipmask>>De;++De){var Re=ze>>De,Ue=Je>>De;if(!Re||!Ue)break;W.texImage2D(we,De,nt.format,Re,Ue,0,nt.format,nt.type,null)}return Tr(),pt.profile&&(nt.stats.size=oi(nt.internalformat,nt.type,ze,Je,!1,!1)),sn}return sn(ye,at),sn.subimage=dr,sn.resize=ve,sn._reglType="texture2d",sn._texture=nt,pt.profile&&(sn.stats=nt.stats),sn.destroy=function(){nt.decRef()},sn}function Zn(ye,at,nt,sn,dr,ve){var re=new Kn(Ke);pi[re.id]=re,tt.cubeCount++;var Ne=new Array(6);function ze(Re,Ue,he,Te,de,He){var Xe,p=re.texInfo;for(uo.call(p),Xe=0;Xe<6;++Xe)Ne[Xe]=or();if(typeof Re=="number"||!Re){var y=Re|0||1;for(Xe=0;Xe<6;++Xe)ir(Ne[Xe],y,y)}else if(typeof Re=="object")if(Ue)_r(Ne[0],Re),_r(Ne[1],Ue),_r(Ne[2],he),_r(Ne[3],Te),_r(Ne[4],de),_r(Ne[5],He);else if(Io(p,Re),Pn(re,Re),"faces"in Re){var S=Re.faces;for(ae(Array.isArray(S)&&S.length===6,"cube faces must be a length 6 array"),Xe=0;Xe<6;++Xe)ae(typeof S[Xe]=="object"&&!!S[Xe],"invalid input for cube map face"),Zt(Ne[Xe],re),_r(Ne[Xe],S[Xe])}else for(Xe=0;Xe<6;++Xe)_r(Ne[Xe],Re);else ae.raise("invalid arguments to cube map");for(Zt(re,Ne[0]),Oe.npotTextureCube||ae(G(re.width)&&G(re.height),"your browser does not support non power or two texture dimensions"),p.genMipmaps?re.mipmask=(Ne[0].width<<1)-1:re.mipmask=Ne[0].mipmask,ae.textureCube(re,p,Ne,Oe),re.internalformat=Ne[0].internalformat,ze.width=Ne[0].width,ze.height=Ne[0].height,hi(re),Xe=0;Xe<6;++Xe)jo(Ne[Xe],gt+Xe);for(zo(p,Ke),Tr(),pt.profile&&(re.stats.size=oi(re.internalformat,re.type,ze.width,ze.height,p.genMipmaps,!0)),ze.format=Lt[re.internalformat],ze.type=en[re.type],ze.mag=xt[p.magFilter],ze.min=an[p.minFilter],ze.wrapS=Tt[p.wrapS],ze.wrapT=Tt[p.wrapT],Xe=0;Xe<6;++Xe)Zo(Ne[Xe]);return ze}function Je(Re,Ue,he,Te,de){ae(!!Ue,"must specify image data"),ae(typeof Re=="number"&&Re===(Re|0)&&Re>=0&&Re<6,"invalid face");var He=he|0,Xe=Te|0,p=de|0,y=hn();return Zt(y,re),y.width=0,y.height=0,Mt(y,Ue),y.width=y.width||(re.width>>p)-He,y.height=y.height||(re.height>>p)-Xe,ae(re.type===y.type&&re.format===y.format&&re.internalformat===y.internalformat,"incompatible format for texture.subimage"),ae(He>=0&&Xe>=0&&He+y.width<=re.width&&Xe+y.height<=re.height,"texture.subimage write out of bounds"),ae(re.mipmask&1<<p,"missing mipmap data"),ae(y.data||y.element||y.needsCopy,"missing image data"),hi(re),jn(y,gt+Re,He,Xe,p),Tr(),ur(y),ze}function De(Re){var Ue=Re|0;if(Ue!==re.width){ze.width=re.width=Ue,ze.height=re.height=Ue,hi(re);for(var he=0;he<6;++he)for(var Te=0;re.mipmask>>Te;++Te)W.texImage2D(gt+he,Te,re.format,Ue>>Te,Ue>>Te,0,re.format,re.type,null);return Tr(),pt.profile&&(re.stats.size=oi(re.internalformat,re.type,ze.width,ze.height,!1,!0)),ze}}return ze(ye,at,nt,sn,dr,ve),ze.subimage=Je,ze.resize=De,ze._reglType="textureCube",ze._texture=re,pt.profile&&(ze.stats=re.stats),ze.destroy=function(){re.decRef()},ze}function go(){for(var ye=0;ye<Jo;++ye)W.activeTexture(Vl+ye),W.bindTexture(we,null),yo[ye]=null;si(pi).forEach(Dn),tt.cubeCount=0,tt.textureCount=0}pt.profile&&(tt.getTotalTextureSize=function(){var ye=0;return Object.keys(pi).forEach(function(at){ye+=pi[at].stats.size}),ye});function Ml(){for(var ye=0;ye<Jo;++ye){var at=yo[ye];at&&(at.bindCount=0,at.unit=-1,yo[ye]=null)}si(pi).forEach(function(nt){nt.texture=W.createTexture(),W.bindTexture(nt.target,nt.texture);for(var sn=0;sn<32;++sn)if((nt.mipmask&1<<sn)!==0)if(nt.target===we)W.texImage2D(we,sn,nt.internalformat,nt.width>>sn,nt.height>>sn,0,nt.internalformat,nt.type,null);else for(var dr=0;dr<6;++dr)W.texImage2D(gt+dr,sn,nt.internalformat,nt.width>>sn,nt.height>>sn,0,nt.internalformat,nt.type,null);zo(nt.texInfo,nt.target)})}function So(){for(var ye=0;ye<Jo;++ye){var at=yo[ye];at&&(at.bindCount=0,at.unit=-1,yo[ye]=null),W.activeTexture(Vl+ye),W.bindTexture(we,null),W.bindTexture(Ke,null)}}return{create2D:hr,createCube:Zn,clear:go,getTexture:function(ye){return null},restore:Ml,refresh:So}}var fo=36161,Cn=32854,po=32855,Bc=36194,El=33189,id=36168,To=34041,No=35907,pp=34836,hp=34842,Wc=34843,Hi=[];Hi[Cn]=2,Hi[po]=2,Hi[Bc]=2,Hi[El]=2,Hi[id]=1,Hi[To]=4,Hi[No]=4,Hi[pp]=16,Hi[hp]=8,Hi[Wc]=6;function ad(W,se,Oe){return Hi[W]*se*Oe}var Ws=function(W,se,Oe,it,mt){var tt={rgba4:Cn,rgb565:Bc,"rgb5 a1":po,depth:El,stencil:id,"depth stencil":To};se.ext_srgb&&(tt.srgba=No),se.ext_color_buffer_half_float&&(tt.rgba16f=hp,tt.rgb16f=Wc),se.webgl_color_buffer_float&&(tt.rgba32f=pp);var pt=[];Object.keys(tt).forEach(function(Dt){var Et=tt[Dt];pt[Et]=Dt});var Rt=0,$t={};function Ct(Dt){this.id=Rt++,this.refCount=1,this.renderbuffer=Dt,this.format=Cn,this.width=0,this.height=0,mt.profile&&(this.stats={size:0})}Ct.prototype.decRef=function(){--this.refCount<=0&&ft(this)};function ft(Dt){var Et=Dt.renderbuffer;ae(Et,"must not double destroy renderbuffer"),W.bindRenderbuffer(fo,null),W.deleteRenderbuffer(Et),Dt.renderbuffer=null,Dt.refCount=0,delete $t[Dt.id],it.renderbufferCount--}function qt(Dt,Et){var Ze=new Ct(W.createRenderbuffer());$t[Ze.id]=Ze,it.renderbufferCount++;function ct(en,xt){var an=0,Tt=0,Ht=Cn;if(typeof en=="object"&&en){var At=en;if("shape"in At){var Zt=At.shape;ae(Array.isArray(Zt)&&Zt.length>=2,"invalid renderbuffer shape"),an=Zt[0]|0,Tt=Zt[1]|0}else"radius"in At&&(an=Tt=At.radius|0),"width"in At&&(an=At.width|0),"height"in At&&(Tt=At.height|0);"format"in At&&(ae.parameter(At.format,tt,"invalid renderbuffer format"),Ht=tt[At.format])}else typeof en=="number"?(an=en|0,typeof xt=="number"?Tt=xt|0:Tt=an):en?ae.raise("invalid arguments to renderbuffer constructor"):an=Tt=1;if(ae(an>0&&Tt>0&&an<=Oe.maxRenderbufferSize&&Tt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),!(an===Ze.width&&Tt===Ze.height&&Ht===Ze.format))return ct.width=Ze.width=an,ct.height=Ze.height=Tt,Ze.format=Ht,W.bindRenderbuffer(fo,Ze.renderbuffer),W.renderbufferStorage(fo,Ht,an,Tt),ae(W.getError()===0,"invalid render buffer format"),mt.profile&&(Ze.stats.size=ad(Ze.format,Ze.width,Ze.height)),ct.format=pt[Ze.format],ct}function Lt(en,xt){var an=en|0,Tt=xt|0||an;return an===Ze.width&&Tt===Ze.height||(ae(an>0&&Tt>0&&an<=Oe.maxRenderbufferSize&&Tt<=Oe.maxRenderbufferSize,"invalid renderbuffer size"),ct.width=Ze.width=an,ct.height=Ze.height=Tt,W.bindRenderbuffer(fo,Ze.renderbuffer),W.renderbufferStorage(fo,Ze.format,an,Tt),ae(W.getError()===0,"invalid render buffer format"),mt.profile&&(Ze.stats.size=ad(Ze.format,Ze.width,Ze.height))),ct}return ct(Dt,Et),ct.resize=Lt,ct._reglType="renderbuffer",ct._renderbuffer=Ze,mt.profile&&(ct.stats=Ze.stats),ct.destroy=function(){Ze.decRef()},ct}mt.profile&&(it.getTotalRenderbufferSize=function(){var Dt=0;return Object.keys($t).forEach(function(Et){Dt+=$t[Et].stats.size}),Dt});function Vt(){si($t).forEach(function(Dt){Dt.renderbuffer=W.createRenderbuffer(),W.bindRenderbuffer(fo,Dt.renderbuffer),W.renderbufferStorage(fo,Dt.format,Dt.width,Dt.height)}),W.bindRenderbuffer(fo,null)}return{create:qt,clear:function(){si($t).forEach(ft)},restore:Vt}},$a=36160,vu=36161,zl=3553,Fa=34069,xh=36064,Ol=36096,xa=36128,vp=33306,mp=36053,ld=36054,Ah=36055,Th=36057,Mh=36061,ud=36193,yp=5121,gp=5126,Gc=6407,Ar=6408,nm=6402,_p=[Gc,Ar],qu=[];qu[Ar]=4,qu[Gc]=3;var zc=[];zc[yp]=1,zc[gp]=4,zc[ud]=2;var rm=32854,kh=32855,Aa=36194,om=33189,Hc=36168,sd=34041,bp=35907,Ph=34836,fa=34842,mu=34843,cd=[rm,kh,Aa,bp,fa,mu,Ph],Yu={};Yu[mp]="complete",Yu[ld]="incomplete attachment",Yu[Th]="incomplete dimensions",Yu[Ah]="incomplete, missing attachment",Yu[Mh]="unsupported";function fd(W,se,Oe,it,mt,tt){var pt={cur:null,next:null,dirty:!1,setFBO:null},Rt=["rgba"],$t=["rgba4","rgb565","rgb5 a1"];se.ext_srgb&&$t.push("srgba"),se.ext_color_buffer_half_float&&$t.push("rgba16f","rgb16f"),se.webgl_color_buffer_float&&$t.push("rgba32f");var Ct=["uint8"];se.oes_texture_half_float&&Ct.push("half float","float16"),se.oes_texture_float&&Ct.push("float","float32");function ft(jt,Mt,St){this.target=jt,this.texture=Mt,this.renderbuffer=St;var jn=0,rr=0;Mt?(jn=Mt.width,rr=Mt.height):St&&(jn=St.width,rr=St.height),this.width=jn,this.height=rr}function qt(jt){jt&&(jt.texture&&jt.texture._texture.decRef(),jt.renderbuffer&&jt.renderbuffer._renderbuffer.decRef())}function Vt(jt,Mt,St){if(jt)if(jt.texture){var jn=jt.texture._texture,rr=Math.max(1,jn.width),hn=Math.max(1,jn.height);ae(rr===Mt&&hn===St,"inconsistent width/height for supplied texture"),jn.refCount+=1}else{var ur=jt.renderbuffer._renderbuffer;ae(ur.width===Mt&&ur.height===St,"inconsistent width/height for renderbuffer"),ur.refCount+=1}}function Dt(jt,Mt){Mt&&(Mt.texture?W.framebufferTexture2D($a,jt,Mt.target,Mt.texture._texture.texture,0):W.framebufferRenderbuffer($a,jt,vu,Mt.renderbuffer._renderbuffer.renderbuffer))}function Et(jt){var Mt=zl,St=null,jn=null,rr=jt;typeof jt=="object"&&(rr=jt.data,"target"in jt&&(Mt=jt.target|0)),ae.type(rr,"function","invalid attachment data");var hn=rr._reglType;return hn==="texture2d"?(St=rr,ae(Mt===zl)):hn==="textureCube"?(St=rr,ae(Mt>=Fa&&Mt<Fa+6,"invalid cube map target")):hn==="renderbuffer"?(jn=rr,Mt=vu):ae.raise("invalid regl object for attachment"),new ft(Mt,St,jn)}function Ze(jt,Mt,St,jn,rr){if(St){var hn=it.create2D({width:jt,height:Mt,format:jn,type:rr});return hn._texture.refCount=0,new ft(zl,hn,null)}else{var ur=mt.create({width:jt,height:Mt,format:jn});return ur._renderbuffer.refCount=0,new ft(vu,null,ur)}}function ct(jt){return jt&&(jt.texture||jt.renderbuffer)}function Lt(jt,Mt,St){jt&&(jt.texture?jt.texture.resize(Mt,St):jt.renderbuffer&&jt.renderbuffer.resize(Mt,St),jt.width=Mt,jt.height=St)}var en=0,xt={};function an(){this.id=en++,xt[this.id]=this,this.framebuffer=W.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Tt(jt){jt.colorAttachments.forEach(qt),qt(jt.depthAttachment),qt(jt.stencilAttachment),qt(jt.depthStencilAttachment)}function Ht(jt){var Mt=jt.framebuffer;ae(Mt,"must not double destroy framebuffer"),W.deleteFramebuffer(Mt),jt.framebuffer=null,tt.framebufferCount--,delete xt[jt.id]}function At(jt){var Mt;W.bindFramebuffer($a,jt.framebuffer);var St=jt.colorAttachments;for(Mt=0;Mt<St.length;++Mt)Dt(xh+Mt,St[Mt]);for(Mt=St.length;Mt<Oe.maxColorAttachments;++Mt)W.framebufferTexture2D($a,xh+Mt,zl,null,0);W.framebufferTexture2D($a,vp,zl,null,0),W.framebufferTexture2D($a,Ol,zl,null,0),W.framebufferTexture2D($a,xa,zl,null,0),Dt(Ol,jt.depthAttachment),Dt(xa,jt.stencilAttachment),Dt(vp,jt.depthStencilAttachment);var jn=W.checkFramebufferStatus($a);!W.isContextLost()&&jn!==mp&&ae.raise("framebuffer configuration not supported, status = "+Yu[jn]),W.bindFramebuffer($a,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,W.getError()}function Zt(jt,Mt){var St=new an;tt.framebufferCount++;function jn(hn,ur){var Wn;ae(pt.next!==St,"can not update framebuffer which is currently in use");var ir=0,_r=0,jo=!0,Po=!0,or=null,Zo=!0,uo="rgba",Io="uint8",zo=1,ii=null,pi=null,Jo=null,yo=!1;if(typeof hn=="number")ir=hn|0,_r=ur|0||ir;else if(!hn)ir=_r=1;else{ae.type(hn,"object","invalid arguments for framebuffer");var Kn=hn;if("shape"in Kn){var hi=Kn.shape;ae(Array.isArray(hi)&&hi.length>=2,"invalid shape for framebuffer"),ir=hi[0],_r=hi[1]}else"radius"in Kn&&(ir=_r=Kn.radius),"width"in Kn&&(ir=Kn.width),"height"in Kn&&(_r=Kn.height);("color"in Kn||"colors"in Kn)&&(or=Kn.color||Kn.colors,Array.isArray(or)&&ae(or.length===1||se.webgl_draw_buffers,"multiple render targets not supported")),or||("colorCount"in Kn&&(zo=Kn.colorCount|0,ae(zo>0,"invalid color buffer count")),"colorTexture"in Kn&&(Zo=!!Kn.colorTexture,uo="rgba4"),"colorType"in Kn&&(Io=Kn.colorType,Zo?(ae(se.oes_texture_float||!(Io==="float"||Io==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ae(se.oes_texture_half_float||!(Io==="half float"||Io==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Io==="half float"||Io==="float16"?(ae(se.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),uo="rgba16f"):(Io==="float"||Io==="float32")&&(ae(se.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),uo="rgba32f"),ae.oneOf(Io,Ct,"invalid color type")),"colorFormat"in Kn&&(uo=Kn.colorFormat,Rt.indexOf(uo)>=0?Zo=!0:$t.indexOf(uo)>=0?Zo=!1:Zo?ae.oneOf(Kn.colorFormat,Rt,"invalid color format for texture"):ae.oneOf(Kn.colorFormat,$t,"invalid color format for renderbuffer"))),("depthTexture"in Kn||"depthStencilTexture"in Kn)&&(yo=!!(Kn.depthTexture||Kn.depthStencilTexture),ae(!yo||se.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Kn&&(typeof Kn.depth=="boolean"?jo=Kn.depth:(ii=Kn.depth,Po=!1)),"stencil"in Kn&&(typeof Kn.stencil=="boolean"?Po=Kn.stencil:(pi=Kn.stencil,jo=!1)),"depthStencil"in Kn&&(typeof Kn.depthStencil=="boolean"?jo=Po=Kn.depthStencil:(Jo=Kn.depthStencil,jo=!1,Po=!1))}var Tr=null,Dn=null,hr=null,Zn=null;if(Array.isArray(or))Tr=or.map(Et);else if(or)Tr=[Et(or)];else for(Tr=new Array(zo),Wn=0;Wn<zo;++Wn)Tr[Wn]=Ze(ir,_r,Zo,uo,Io);ae(se.webgl_draw_buffers||Tr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ae(Tr.length<=Oe.maxColorAttachments,"too many color attachments, not supported"),ir=ir||Tr[0].width,_r=_r||Tr[0].height,ii?Dn=Et(ii):jo&&!Po&&(Dn=Ze(ir,_r,yo,"depth","uint32")),pi?hr=Et(pi):Po&&!jo&&(hr=Ze(ir,_r,!1,"stencil","uint8")),Jo?Zn=Et(Jo):!ii&&!pi&&Po&&jo&&(Zn=Ze(ir,_r,yo,"depth stencil","depth stencil")),ae(!!ii+!!pi+!!Jo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var go=null;for(Wn=0;Wn<Tr.length;++Wn)if(Vt(Tr[Wn],ir,_r),ae(!Tr[Wn]||Tr[Wn].texture&&_p.indexOf(Tr[Wn].texture._texture.format)>=0||Tr[Wn].renderbuffer&&cd.indexOf(Tr[Wn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Wn+" is invalid"),Tr[Wn]&&Tr[Wn].texture){var Ml=qu[Tr[Wn].texture._texture.format]*zc[Tr[Wn].texture._texture.type];go===null?go=Ml:ae(go===Ml,"all color attachments much have the same number of bits per pixel.")}return Vt(Dn,ir,_r),ae(!Dn||Dn.texture&&Dn.texture._texture.format===nm||Dn.renderbuffer&&Dn.renderbuffer._renderbuffer.format===om,"invalid depth attachment for framebuffer object"),Vt(hr,ir,_r),ae(!hr||hr.renderbuffer&&hr.renderbuffer._renderbuffer.format===Hc,"invalid stencil attachment for framebuffer object"),Vt(Zn,ir,_r),ae(!Zn||Zn.texture&&Zn.texture._texture.format===sd||Zn.renderbuffer&&Zn.renderbuffer._renderbuffer.format===sd,"invalid depth-stencil attachment for framebuffer object"),Tt(St),St.width=ir,St.height=_r,St.colorAttachments=Tr,St.depthAttachment=Dn,St.stencilAttachment=hr,St.depthStencilAttachment=Zn,jn.color=Tr.map(ct),jn.depth=ct(Dn),jn.stencil=ct(hr),jn.depthStencil=ct(Zn),jn.width=St.width,jn.height=St.height,At(St),jn}function rr(hn,ur){ae(pt.next!==St,"can not resize a framebuffer which is currently in use");var Wn=Math.max(hn|0,1),ir=Math.max(ur|0||Wn,1);if(Wn===St.width&&ir===St.height)return jn;for(var _r=St.colorAttachments,jo=0;jo<_r.length;++jo)Lt(_r[jo],Wn,ir);return Lt(St.depthAttachment,Wn,ir),Lt(St.stencilAttachment,Wn,ir),Lt(St.depthStencilAttachment,Wn,ir),St.width=jn.width=Wn,St.height=jn.height=ir,At(St),jn}return jn(jt,Mt),a(jn,{resize:rr,_reglType:"framebuffer",_framebuffer:St,destroy:function(){Ht(St),Tt(St)},use:function(hn){pt.setFBO({framebuffer:jn},hn)}})}function Pn(jt){var Mt=Array(6);function St(rr){var hn;ae(Mt.indexOf(pt.next)<0,"can not update framebuffer which is currently in use");var ur={color:null},Wn=0,ir=null,_r="rgba",jo="uint8",Po=1;if(typeof rr=="number")Wn=rr|0;else if(!rr)Wn=1;else{ae.type(rr,"object","invalid arguments for framebuffer");var or=rr;if("shape"in or){var Zo=or.shape;ae(Array.isArray(Zo)&&Zo.length>=2,"invalid shape for framebuffer"),ae(Zo[0]===Zo[1],"cube framebuffer must be square"),Wn=Zo[0]}else"radius"in or&&(Wn=or.radius|0),"width"in or?(Wn=or.width|0,"height"in or&&ae(or.height===Wn,"must be square")):"height"in or&&(Wn=or.height|0);("color"in or||"colors"in or)&&(ir=or.color||or.colors,Array.isArray(ir)&&ae(ir.length===1||se.webgl_draw_buffers,"multiple render targets not supported")),ir||("colorCount"in or&&(Po=or.colorCount|0,ae(Po>0,"invalid color buffer count")),"colorType"in or&&(ae.oneOf(or.colorType,Ct,"invalid color type"),jo=or.colorType),"colorFormat"in or&&(_r=or.colorFormat,ae.oneOf(or.colorFormat,Rt,"invalid color format for texture"))),"depth"in or&&(ur.depth=or.depth),"stencil"in or&&(ur.stencil=or.stencil),"depthStencil"in or&&(ur.depthStencil=or.depthStencil)}var uo;if(ir)if(Array.isArray(ir))for(uo=[],hn=0;hn<ir.length;++hn)uo[hn]=ir[hn];else uo=[ir];else{uo=Array(Po);var Io={radius:Wn,format:_r,type:jo};for(hn=0;hn<Po;++hn)uo[hn]=it.createCube(Io)}for(ur.color=Array(uo.length),hn=0;hn<uo.length;++hn){var zo=uo[hn];ae(typeof zo=="function"&&zo._reglType==="textureCube","invalid cube map"),Wn=Wn||zo.width,ae(zo.width===Wn&&zo.height===Wn,"invalid cube map shape"),ur.color[hn]={target:Fa,data:uo[hn]}}for(hn=0;hn<6;++hn){for(var ii=0;ii<uo.length;++ii)ur.color[ii].target=Fa+hn;hn>0&&(ur.depth=Mt[0].depth,ur.stencil=Mt[0].stencil,ur.depthStencil=Mt[0].depthStencil),Mt[hn]?Mt[hn](ur):Mt[hn]=Zt(ur)}return a(St,{width:Wn,height:Wn,color:uo})}function jn(rr){var hn,ur=rr|0;if(ae(ur>0&&ur<=Oe.maxCubeMapSize,"invalid radius for cube fbo"),ur===St.width)return St;var Wn=St.color;for(hn=0;hn<Wn.length;++hn)Wn[hn].resize(ur);for(hn=0;hn<6;++hn)Mt[hn].resize(ur);return St.width=St.height=ur,St}return St(jt),a(St,{faces:Mt,resize:jn,_reglType:"framebufferCube",destroy:function(){Mt.forEach(function(rr){rr.destroy()})}})}function Bn(){pt.cur=null,pt.next=null,pt.dirty=!0,si(xt).forEach(function(jt){jt.framebuffer=W.createFramebuffer(),At(jt)})}return a(pt,{getFramebuffer:function(jt){if(typeof jt=="function"&&jt._reglType==="framebuffer"){var Mt=jt._framebuffer;if(Mt instanceof an)return Mt}return null},create:Zt,createCube:Pn,clear:function(){si(xt).forEach(Ht)},restore:Bn})}var wp=5126,dd=34962;function Xc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=wp,this.offset=0,this.stride=0,this.divisor=0}function pd(W,se,Oe,it,mt){for(var tt=Oe.maxAttributes,pt=new Array(tt),Rt=0;Rt<tt;++Rt)pt[Rt]=new Xc;var $t=0,Ct={},ft={Record:Xc,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Vt()?xt:function(){},createVAO:an,getVAO:Et,destroyBuffer:qt,setVAO:Vt()?Ze:ct,clear:Vt()?Lt:function(){}};function qt(Tt){for(var Ht=0;Ht<pt.length;++Ht){var At=pt[Ht];At.buffer===Tt&&(W.disableVertexAttribArray(Ht),At.buffer=null)}}function Vt(){return se.oes_vertex_array_object}function Dt(){return se.angle_instanced_arrays}function Et(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null}function Ze(Tt){if(Tt!==ft.currentVAO){var Ht=Vt();Tt?Ht.bindVertexArrayOES(Tt.vao):Ht.bindVertexArrayOES(null),ft.currentVAO=Tt}}function ct(Tt){if(Tt!==ft.currentVAO){if(Tt)Tt.bindAttrs();else for(var Ht=Dt(),At=0;At<pt.length;++At){var Zt=pt[At];Zt.buffer?(W.enableVertexAttribArray(At),W.vertexAttribPointer(At,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offfset),Ht&&Zt.divisor&&Ht.vertexAttribDivisorANGLE(At,Zt.divisor)):(W.disableVertexAttribArray(At),W.vertexAttrib4f(At,Zt.x,Zt.y,Zt.z,Zt.w))}ft.currentVAO=Tt}}function Lt(){si(Ct).forEach(function(Tt){Tt.destroy()})}function en(){this.id=++$t,this.attributes=[];var Tt=Vt();Tt?this.vao=Tt.createVertexArrayOES():this.vao=null,Ct[this.id]=this,this.buffers=[]}en.prototype.bindAttrs=function(){for(var Tt=Dt(),Ht=this.attributes,At=0;At<Ht.length;++At){var Zt=Ht[At];Zt.buffer?(W.enableVertexAttribArray(At),W.bindBuffer(dd,Zt.buffer.buffer),W.vertexAttribPointer(At,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offset),Tt&&Zt.divisor&&Tt.vertexAttribDivisorANGLE(At,Zt.divisor)):(W.disableVertexAttribArray(At),W.vertexAttrib4f(At,Zt.x,Zt.y,Zt.z,Zt.w))}for(var Pn=Ht.length;Pn<tt;++Pn)W.disableVertexAttribArray(Pn)},en.prototype.refresh=function(){var Tt=Vt();Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ft.currentVAO=this)},en.prototype.destroy=function(){if(this.vao){var Tt=Vt();this===ft.currentVAO&&(ft.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}Ct[this.id]&&(delete Ct[this.id],it.vaoCount-=1)};function xt(){var Tt=Vt();Tt&&si(Ct).forEach(function(Ht){Ht.refresh()})}function an(Tt){var Ht=new en;it.vaoCount+=1;function At(Zt){ae(Array.isArray(Zt),"arguments to vertex array constructor must be an array"),ae(Zt.length<tt,"too many attributes"),ae(Zt.length>0,"must specify at least one attribute");var Pn={},Bn=Ht.attributes;Bn.length=Zt.length;for(var jt=0;jt<Zt.length;++jt){var Mt=Zt[jt],St=Bn[jt]=new Xc,jn=Mt.data||Mt;if(Array.isArray(jn)||n(jn)||Fi(jn)){var rr;Ht.buffers[jt]&&(rr=Ht.buffers[jt],n(jn)&&rr._buffer.byteLength>=jn.byteLength?rr.subdata(jn):(rr.destroy(),Ht.buffers[jt]=null)),Ht.buffers[jt]||(rr=Ht.buffers[jt]=mt.create(Mt,dd,!1,!0)),St.buffer=mt.getBuffer(rr),St.size=St.buffer.dimension|0,St.normalized=!1,St.type=St.buffer.dtype,St.offset=0,St.stride=0,St.divisor=0,St.state=1,Pn[jt]=1}else mt.getBuffer(Mt)?(St.buffer=mt.getBuffer(Mt),St.size=St.buffer.dimension|0,St.normalized=!1,St.type=St.buffer.dtype,St.offset=0,St.stride=0,St.divisor=0,St.state=1):mt.getBuffer(Mt.buffer)?(St.buffer=mt.getBuffer(Mt.buffer),St.size=(+Mt.size||St.buffer.dimension)|0,St.normalized=!!Mt.normalized||!1,"type"in Mt?(ae.parameter(Mt.type,Bi,"invalid buffer type"),St.type=Bi[Mt.type]):St.type=St.buffer.dtype,St.offset=(Mt.offset||0)|0,St.stride=(Mt.stride||0)|0,St.divisor=(Mt.divisor||0)|0,St.state=1,ae(St.size>=1&&St.size<=4,"size must be between 1 and 4"),ae(St.offset>=0,"invalid offset"),ae(St.stride>=0&&St.stride<=255,"stride must be between 0 and 255"),ae(St.divisor>=0,"divisor must be positive"),ae(!St.divisor||!!se.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Mt?(ae(jt>0,"first attribute must not be a constant"),St.x=+Mt.x||0,St.y=+Mt.y||0,St.z=+Mt.z||0,St.w=+Mt.w||0,St.state=2):ae(!1,"invalid attribute spec for location "+jt)}for(var hn=0;hn<Ht.buffers.length;++hn)!Pn[hn]&&Ht.buffers[hn]&&(Ht.buffers[hn].destroy(),Ht.buffers[hn]=null);return Ht.refresh(),At}return At.destroy=function(){for(var Zt=0;Zt<Ht.buffers.length;++Zt)Ht.buffers[Zt]&&Ht.buffers[Zt].destroy();Ht.buffers.length=0,Ht.destroy()},At._vao=Ht,At._reglType="vao",At(Tt)}return ft}var hd=35632,zr=35633,im=35718,no=35721;function vd(W,se,Oe,it){var mt={},tt={};function pt(Ze,ct,Lt,en){this.name=Ze,this.id=ct,this.location=Lt,this.info=en}function Rt(Ze,ct){for(var Lt=0;Lt<Ze.length;++Lt)if(Ze[Lt].id===ct.id){Ze[Lt].location=ct.location;return}Ze.push(ct)}function $t(Ze,ct,Lt){var en=Ze===hd?mt:tt,xt=en[ct];if(!xt){var an=se.str(ct);xt=W.createShader(Ze),W.shaderSource(xt,an),W.compileShader(xt),ae.shaderError(W,xt,an,Ze,Lt),en[ct]=xt}return xt}var Ct={},ft=[],qt=0;function Vt(Ze,ct){this.id=qt++,this.fragId=Ze,this.vertId=ct,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,it.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Dt(Ze,ct,Lt){var en,xt,an=$t(hd,Ze.fragId),Tt=$t(zr,Ze.vertId),Ht=Ze.program=W.createProgram();if(W.attachShader(Ht,an),W.attachShader(Ht,Tt),Lt)for(en=0;en<Lt.length;++en){var At=Lt[en];W.bindAttribLocation(Ht,At[0],At[1])}W.linkProgram(Ht),ae.linkError(W,Ht,se.str(Ze.fragId),se.str(Ze.vertId),ct);var Zt=W.getProgramParameter(Ht,im);it.profile&&(Ze.stats.uniformsCount=Zt);var Pn=Ze.uniforms;for(en=0;en<Zt;++en)if(xt=W.getActiveUniform(Ht,en),xt)if(xt.size>1)for(var Bn=0;Bn<xt.size;++Bn){var jt=xt.name.replace("[0]","["+Bn+"]");Rt(Pn,new pt(jt,se.id(jt),W.getUniformLocation(Ht,jt),xt))}else Rt(Pn,new pt(xt.name,se.id(xt.name),W.getUniformLocation(Ht,xt.name),xt));var Mt=W.getProgramParameter(Ht,no);it.profile&&(Ze.stats.attributesCount=Mt);var St=Ze.attributes;for(en=0;en<Mt;++en)xt=W.getActiveAttrib(Ht,en),xt&&Rt(St,new pt(xt.name,se.id(xt.name),W.getAttribLocation(Ht,xt.name),xt))}it.profile&&(Oe.getMaxUniformsCount=function(){var Ze=0;return ft.forEach(function(ct){ct.stats.uniformsCount>Ze&&(Ze=ct.stats.uniformsCount)}),Ze},Oe.getMaxAttributesCount=function(){var Ze=0;return ft.forEach(function(ct){ct.stats.attributesCount>Ze&&(Ze=ct.stats.attributesCount)}),Ze});function Et(){mt={},tt={};for(var Ze=0;Ze<ft.length;++Ze)Dt(ft[Ze],null,ft[Ze].attributes.map(function(ct){return[ct.location,ct.name]}))}return{clear:function(){var Ze=W.deleteShader.bind(W);si(mt).forEach(Ze),mt={},si(tt).forEach(Ze),tt={},ft.forEach(function(ct){W.deleteProgram(ct.program)}),ft.length=0,Ct={},Oe.shaderCount=0},program:function(Ze,ct,Lt,en){ae.command(Ze>=0,"missing vertex shader",Lt),ae.command(ct>=0,"missing fragment shader",Lt);var xt=Ct[ct];xt||(xt=Ct[ct]={});var an=xt[Ze];if(an&&(an.refCount++,!en))return an;var Tt=new Vt(ct,Ze);return Oe.shaderCount++,Dt(Tt,Lt,en),an||(xt[Ze]=Tt),ft.push(Tt),a(Tt,{destroy:function(){if(Tt.refCount--,Tt.refCount<=0){W.deleteProgram(Tt.program);var Ht=ft.indexOf(Tt);ft.splice(Ht,1),Oe.shaderCount--}xt[Tt.vertId].refCount<=0&&(W.deleteShader(tt[Tt.vertId]),delete tt[Tt.vertId],delete Ct[Tt.fragId][Tt.vertId]),Object.keys(Ct[Tt.fragId]).length||(W.deleteShader(mt[Tt.fragId]),delete mt[Tt.fragId],delete Ct[Tt.fragId])}})},restore:Et,shader:$t,frag:-1,vert:-1}}var Nh=6408,Ku=5121,Rh=3333,Gs=5126;function Ch(W,se,Oe,it,mt,tt,pt){function Rt(ft){var qt;se.next===null?(ae(mt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),qt=Ku):(ae(se.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),qt=se.next.colorAttachments[0].texture._texture.type,tt.oes_texture_float?(ae(qt===Ku||qt===Gs,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),qt===Gs&&ae(pt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ae(qt===Ku,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Vt=0,Dt=0,Et=it.framebufferWidth,Ze=it.framebufferHeight,ct=null;n(ft)?ct=ft:ft&&(ae.type(ft,"object","invalid arguments to regl.read()"),Vt=ft.x|0,Dt=ft.y|0,ae(Vt>=0&&Vt<it.framebufferWidth,"invalid x offset for regl.read"),ae(Dt>=0&&Dt<it.framebufferHeight,"invalid y offset for regl.read"),Et=(ft.width||it.framebufferWidth-Vt)|0,Ze=(ft.height||it.framebufferHeight-Dt)|0,ct=ft.data||null),ct&&(qt===Ku?ae(ct instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):qt===Gs&&ae(ct instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ae(Et>0&&Et+Vt<=it.framebufferWidth,"invalid width for read pixels"),ae(Ze>0&&Ze+Dt<=it.framebufferHeight,"invalid height for read pixels"),Oe();var Lt=Et*Ze*4;return ct||(qt===Ku?ct=new Uint8Array(Lt):qt===Gs&&(ct=ct||new Float32Array(Lt))),ae.isTypedArray(ct,"data buffer for regl.read() must be a typedarray"),ae(ct.byteLength>=Lt,"data buffer for regl.read() too small"),W.pixelStorei(Rh,4),W.readPixels(Vt,Dt,Et,Ze,Nh,qt,ct),ct}function $t(ft){var qt;return se.setFBO({framebuffer:ft.framebuffer},function(){qt=Rt(ft)}),qt}function Ct(ft){return!ft||!("framebuffer"in ft)?Rt(ft):$t(ft)}return Ct}function Zu(W){return Array.prototype.slice.call(W)}function gi(W){return Zu(W).join("")}function nl(){var W=0,se=[],Oe=[];function it(qt){for(var Vt=0;Vt<Oe.length;++Vt)if(Oe[Vt]===qt)return se[Vt];var Dt="g"+W++;return se.push(Dt),Oe.push(qt),Dt}function mt(){var qt=[];function Vt(){qt.push.apply(qt,Zu(arguments))}var Dt=[];function Et(){var Ze="v"+W++;return Dt.push(Ze),arguments.length>0&&(qt.push(Ze,"="),qt.push.apply(qt,Zu(arguments)),qt.push(";")),Ze}return a(Vt,{def:Et,toString:function(){return gi([Dt.length>0?"var "+Dt.join(",")+";":"",gi(qt)])}})}function tt(){var qt=mt(),Vt=mt(),Dt=qt.toString,Et=Vt.toString;function Ze(ct,Lt){Vt(ct,Lt,"=",qt.def(ct,Lt),";")}return a(function(){qt.apply(qt,Zu(arguments))},{def:qt.def,entry:qt,exit:Vt,save:Ze,set:function(ct,Lt,en){Ze(ct,Lt),qt(ct,Lt,"=",en,";")},toString:function(){return Dt()+Et()}})}function pt(){var qt=gi(arguments),Vt=tt(),Dt=tt(),Et=Vt.toString,Ze=Dt.toString;return a(Vt,{then:function(){return Vt.apply(Vt,Zu(arguments)),this},else:function(){return Dt.apply(Dt,Zu(arguments)),this},toString:function(){var ct=Ze();return ct&&(ct="else{"+ct+"}"),gi(["if(",qt,"){",Et(),"}",ct])}})}var Rt=mt(),$t={};function Ct(qt,Vt){var Dt=[];function Et(){var xt="a"+Dt.length;return Dt.push(xt),xt}Vt=Vt||0;for(var Ze=0;Ze<Vt;++Ze)Et();var ct=tt(),Lt=ct.toString,en=$t[qt]=a(ct,{arg:Et,toString:function(){return gi(["function(",Dt.join(),"){",Lt(),"}"])}});return en}function ft(){var qt=['"use strict";',Rt,"return {"];Object.keys($t).forEach(function(Et){qt.push('"',Et,'":',$t[Et].toString(),",")}),qt.push("}");var Vt=gi(qt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Dt=Function.apply(null,se.concat(Vt));return Dt.apply(null,Oe)}return{global:Rt,link:it,block:mt,proc:Ct,scope:tt,cond:pt,compile:ft}}var Hl="xyzw".split(""),Ju=5121,Qu=1,es=2,md=0,Xl=1,ts=2,yd=3,rl=4,qc=5,Yc=6,zs="dither",Hs="blend.enable",Xs="blend.color",gd="blend.equation",qs="blend.func",Ep="depth.enable",_d="depth.func",Dh="depth.range",Op="depth.mask",ol="colorMask",Sp="cull.enable",xp="cull.face",Ap="frontFace",Ys="lineWidth",Sl="polygonOffset.enable",Kc="polygonOffset.offset",bd="sample.alpha",wd="sample.enable",yu="sample.coverage",gu="stencil.enable",nr="stencil.mask",Ks="stencil.func",Zc="stencil.opFront",il="stencil.opBack",di="scissor.enable",ns="scissor.box",Ro="viewport",_u="profile",ra="framebuffer",Jc="vert",$i="frag",Wo="elements",xl="primitive",Al="count",Ed="offset",Pt="instances",rs="vao",Qc="Width",ef="Height",bu=ra+Qc,os=ra+ef,Od=Ro+Qc,Tp=Ro+ef,is="drawingBuffer",tf=is+Qc,Sd=is+ef,Mp=[qs,gd,Ks,Zc,il,yu,Ro,ns,Kc],Tl=34962,kp=34963,al=35632,wu=35633,xd=3553,jh=34067,Ih=2884,Lh=3042,Pp=3024,Ad=2960,nf=2929,$h=3089,ll=32823,Eu=32926,am=32928,Oo=5126,rf=35664,as=35665,of=35666,Zs=5124,af=35667,lf=35668,uf=35669,ls=35670,ql=35671,_i=35672,Td=35673,sf=35674,us=35675,Js=35676,Ti=35678,Mo=35680,cf=4,Xi=1028,Fn=1029,Md=2304,ff=2305,kd=32775,Np=32776,Fh=519,Ou=7680,Uh=0,ss=1,Vh=32774,Rp=513,df=36160,Bh=36064,Ua={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Su={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Cp={frag:al,vert:wu},Qs={cw:Md,ccw:ff};function Kl(W){return Array.isArray(W)||n(W)||Fi(W)}function pf(W){return W.sort(function(se,Oe){return se===Ro?-1:Oe===Ro?1:se<Oe?-1:1})}function qi(W,se,Oe,it){this.thisDep=W,this.contextDep=se,this.propDep=Oe,this.append=it}function ul(W){return W&&!(W.thisDep||W.contextDep||W.propDep)}function Co(W){return new qi(!1,!1,!1,W)}function da(W,se){var Oe=W.type;if(Oe===md){var it=W.data.length;return new qi(!0,it>=1,it>=2,se)}else if(Oe===rl){var mt=W.data;return new qi(mt.thisDep,mt.contextDep,mt.propDep,se)}else{if(Oe===qc)return new qi(!1,!1,!1,se);if(Oe===Yc){for(var tt=!1,pt=!1,Rt=!1,$t=0;$t<W.data.length;++$t){var Ct=W.data[$t];if(Ct.type===Xl)Rt=!0;else if(Ct.type===ts)pt=!0;else if(Ct.type===yd)tt=!0;else if(Ct.type===md){tt=!0;var ft=Ct.data;ft>=1&&(pt=!0),ft>=2&&(Rt=!0)}else Ct.type===rl&&(tt=tt||Ct.data.thisDep,pt=pt||Ct.data.contextDep,Rt=Rt||Ct.data.propDep)}return new qi(tt,pt,Rt,se)}else return new qi(Oe===yd,Oe===ts,Oe===Xl,se)}}var Va=new qi(!1,!1,!1,function(){});function lm(W,se,Oe,it,mt,tt,pt,Rt,$t,Ct,ft,qt,Vt,Dt,Et){var Ze=Ct.Record,ct={add:32774,subtract:32778,"reverse subtract":32779};Oe.ext_blend_minmax&&(ct.min=kd,ct.max=Np);var Lt=Oe.angle_instanced_arrays,en=Oe.webgl_draw_buffers,xt={dirty:!0,profile:Et.profile},an={},Tt=[],Ht={},At={};function Zt(ve){return ve.replace(".","_")}function Pn(ve,re,Ne){var ze=Zt(ve);Tt.push(ve),an[ze]=xt[ze]=!!Ne,Ht[ze]=re}function Bn(ve,re,Ne){var ze=Zt(ve);Tt.push(ve),Array.isArray(Ne)?(xt[ze]=Ne.slice(),an[ze]=Ne.slice()):xt[ze]=an[ze]=Ne,At[ze]=re}Pn(zs,Pp),Pn(Hs,Lh),Bn(Xs,"blendColor",[0,0,0,0]),Bn(gd,"blendEquationSeparate",[Vh,Vh]),Bn(qs,"blendFuncSeparate",[ss,Uh,ss,Uh]),Pn(Ep,nf,!0),Bn(_d,"depthFunc",Rp),Bn(Dh,"depthRange",[0,1]),Bn(Op,"depthMask",!0),Bn(ol,ol,[!0,!0,!0,!0]),Pn(Sp,Ih),Bn(xp,"cullFace",Fn),Bn(Ap,Ap,ff),Bn(Ys,Ys,1),Pn(Sl,ll),Bn(Kc,"polygonOffset",[0,0]),Pn(bd,Eu),Pn(wd,am),Bn(yu,"sampleCoverage",[1,!1]),Pn(gu,Ad),Bn(nr,"stencilMask",-1),Bn(Ks,"stencilFunc",[Fh,0,-1]),Bn(Zc,"stencilOpSeparate",[Xi,Ou,Ou,Ou]),Bn(il,"stencilOpSeparate",[Fn,Ou,Ou,Ou]),Pn(di,$h),Bn(ns,"scissor",[0,0,W.drawingBufferWidth,W.drawingBufferHeight]),Bn(Ro,Ro,[0,0,W.drawingBufferWidth,W.drawingBufferHeight]);var jt={gl:W,context:Vt,strings:se,next:an,current:xt,draw:qt,elements:tt,buffer:mt,shader:ft,attributes:Ct.state,vao:Ct,uniforms:$t,framebuffer:Rt,extensions:Oe,timer:Dt,isBufferArgs:Kl},Mt={primTypes:ni,compareFuncs:Su,blendFuncs:Ua,blendEquations:ct,stencilOps:Vn,glTypes:Bi,orientationType:Qs};ae.optional(function(){jt.isArrayLike=N}),en&&(Mt.backBuffer=[Fn],Mt.drawBuffer=Dr(it.maxDrawbuffers,function(ve){return ve===0?[0]:Dr(ve,function(re){return Bh+re})}));var St=0;function jn(){var ve=nl(),re=ve.link,Ne=ve.global;ve.id=St++,ve.batchId="0";var ze=re(jt),Je=ve.shared={props:"a0"};Object.keys(jt).forEach(function(Te){Je[Te]=Ne.def(ze,".",Te)}),ae.optional(function(){ve.CHECK=re(ae),ve.commandStr=ae.guessCommand(),ve.command=re(ve.commandStr),ve.assert=function(Te,de,He){Te("if(!(",de,"))",this.CHECK,".commandRaise(",re(He),",",this.command,");")},Mt.invalidBlendCombinations=Yl});var De=ve.next={},Re=ve.current={};Object.keys(At).forEach(function(Te){Array.isArray(xt[Te])&&(De[Te]=Ne.def(Je.next,".",Te),Re[Te]=Ne.def(Je.current,".",Te))});var Ue=ve.constants={};Object.keys(Mt).forEach(function(Te){Ue[Te]=Ne.def(JSON.stringify(Mt[Te]))}),ve.invoke=function(Te,de){switch(de.type){case md:var He=["this",Je.context,Je.props,ve.batchId];return Te.def(re(de.data),".call(",He.slice(0,Math.max(de.data.length+1,4)),")");case Xl:return Te.def(Je.props,de.data);case ts:return Te.def(Je.context,de.data);case yd:return Te.def("this",de.data);case rl:return de.data.append(ve,Te),de.data.ref;case qc:return de.data.toString();case Yc:return de.data.map(function(Xe){return ve.invoke(Te,Xe)})}},ve.attribCache={};var he={};return ve.scopeAttrib=function(Te){var de=se.id(Te);if(de in he)return he[de];var He=Ct.scope[de];He||(He=Ct.scope[de]=new Ze);var Xe=he[de]=re(He);return Xe},ve}function rr(ve){var re=ve.static,Ne=ve.dynamic,ze;if(_u in re){var Je=!!re[_u];ze=Co(function(Re,Ue){return Je}),ze.enable=Je}else if(_u in Ne){var De=Ne[_u];ze=da(De,function(Re,Ue){return Re.invoke(Ue,De)})}return ze}function hn(ve,re){var Ne=ve.static,ze=ve.dynamic;if(ra in Ne){var Je=Ne[ra];return Je?(Je=Rt.getFramebuffer(Je),ae.command(Je,"invalid framebuffer object"),Co(function(Re,Ue){var he=Re.link(Je),Te=Re.shared;Ue.set(Te.framebuffer,".next",he);var de=Te.context;return Ue.set(de,"."+bu,he+".width"),Ue.set(de,"."+os,he+".height"),he})):Co(function(Re,Ue){var he=Re.shared;Ue.set(he.framebuffer,".next","null");var Te=he.context;return Ue.set(Te,"."+bu,Te+"."+tf),Ue.set(Te,"."+os,Te+"."+Sd),"null"})}else if(ra in ze){var De=ze[ra];return da(De,function(Re,Ue){var he=Re.invoke(Ue,De),Te=Re.shared,de=Te.framebuffer,He=Ue.def(de,".getFramebuffer(",he,")");ae.optional(function(){Re.assert(Ue,"!"+he+"||"+He,"invalid framebuffer object")}),Ue.set(de,".next",He);var Xe=Te.context;return Ue.set(Xe,"."+bu,He+"?"+He+".width:"+Xe+"."+tf),Ue.set(Xe,"."+os,He+"?"+He+".height:"+Xe+"."+Sd),He})}else return null}function ur(ve,re,Ne){var ze=ve.static,Je=ve.dynamic;function De(he){if(he in ze){var Te=ze[he];ae.commandType(Te,"object","invalid "+he,Ne.commandStr);var de=!0,He=Te.x|0,Xe=Te.y|0,p,y;return"width"in Te?(p=Te.width|0,ae.command(p>=0,"invalid "+he,Ne.commandStr)):de=!1,"height"in Te?(y=Te.height|0,ae.command(y>=0,"invalid "+he,Ne.commandStr)):de=!1,new qi(!de&&re&&re.thisDep,!de&&re&&re.contextDep,!de&&re&&re.propDep,function(q,ne){var me=q.shared.context,xe=p;"width"in Te||(xe=ne.def(me,".",bu,"-",He));var Ve=y;return"height"in Te||(Ve=ne.def(me,".",os,"-",Xe)),[He,Xe,xe,Ve]})}else if(he in Je){var S=Je[he],L=da(S,function(q,ne){var me=q.invoke(ne,S);ae.optional(function(){q.assert(ne,me+"&&typeof "+me+'==="object"',"invalid "+he)});var xe=q.shared.context,Ve=ne.def(me,".x|0"),yt=ne.def(me,".y|0"),wt=ne.def('"width" in ',me,"?",me,".width|0:","(",xe,".",bu,"-",Ve,")"),zt=ne.def('"height" in ',me,"?",me,".height|0:","(",xe,".",os,"-",yt,")");return ae.optional(function(){q.assert(ne,wt+">=0&&"+zt+">=0","invalid "+he)}),[Ve,yt,wt,zt]});return re&&(L.thisDep=L.thisDep||re.thisDep,L.contextDep=L.contextDep||re.contextDep,L.propDep=L.propDep||re.propDep),L}else return re?new qi(re.thisDep,re.contextDep,re.propDep,function(q,ne){var me=q.shared.context;return[0,0,ne.def(me,".",bu),ne.def(me,".",os)]}):null}var Re=De(Ro);if(Re){var Ue=Re;Re=new qi(Re.thisDep,Re.contextDep,Re.propDep,function(he,Te){var de=Ue.append(he,Te),He=he.shared.context;return Te.set(He,"."+Od,de[2]),Te.set(He,"."+Tp,de[3]),de})}return{viewport:Re,scissor_box:De(ns)}}function Wn(ve,re){var Ne=ve.static,ze=typeof Ne[$i]=="string"&&typeof Ne[Jc]=="string";if(ze){if(Object.keys(re.dynamic).length>0)return null;var Je=re.static,De=Object.keys(Je);if(De.length>0&&typeof Je[De[0]]=="number"){for(var Re=[],Ue=0;Ue<De.length;++Ue)ae(typeof Je[De[Ue]]=="number","must specify all vertex attribute locations when using vaos"),Re.push([Je[De[Ue]]|0,De[Ue]]);return Re}}return null}function ir(ve,re,Ne){var ze=ve.static,Je=ve.dynamic;function De(de){if(de in ze){var He=se.id(ze[de]);ae.optional(function(){ft.shader(Cp[de],He,ae.guessCommand())});var Xe=Co(function(){return He});return Xe.id=He,Xe}else if(de in Je){var p=Je[de];return da(p,function(y,S){var L=y.invoke(S,p),q=S.def(y.shared.strings,".id(",L,")");return ae.optional(function(){S(y.shared.shader,".shader(",Cp[de],",",q,",",y.command,");")}),q})}return null}var Re=De($i),Ue=De(Jc),he=null,Te;return ul(Re)&&ul(Ue)?(he=ft.program(Ue.id,Re.id,null,Ne),Te=Co(function(de,He){return de.link(he)})):Te=new qi(Re&&Re.thisDep||Ue&&Ue.thisDep,Re&&Re.contextDep||Ue&&Ue.contextDep,Re&&Re.propDep||Ue&&Ue.propDep,function(de,He){var Xe=de.shared.shader,p;Re?p=Re.append(de,He):p=He.def(Xe,".",$i);var y;Ue?y=Ue.append(de,He):y=He.def(Xe,".",Jc);var S=Xe+".program("+y+","+p;return ae.optional(function(){S+=","+de.command}),He.def(S+")")}),{frag:Re,vert:Ue,progVar:Te,program:he}}function _r(ve,re){var Ne=ve.static,ze=ve.dynamic;function Je(){if(Wo in Ne){var de=Ne[Wo];Kl(de)?de=tt.getElements(tt.create(de,!0)):de&&(de=tt.getElements(de),ae.command(de,"invalid elements",re.commandStr));var He=Co(function(p,y){if(de){var S=p.link(de);return p.ELEMENTS=S,S}return p.ELEMENTS=null,null});return He.value=de,He}else if(Wo in ze){var Xe=ze[Wo];return da(Xe,function(p,y){var S=p.shared,L=S.isBufferArgs,q=S.elements,ne=p.invoke(y,Xe),me=y.def("null"),xe=y.def(L,"(",ne,")"),Ve=p.cond(xe).then(me,"=",q,".createStream(",ne,");").else(me,"=",q,".getElements(",ne,");");return ae.optional(function(){p.assert(Ve.else,"!"+ne+"||"+me,"invalid elements")}),y.entry(Ve),y.exit(p.cond(xe).then(q,".destroyStream(",me,");")),p.ELEMENTS=me,me})}return null}var De=Je();function Re(){if(xl in Ne){var de=Ne[xl];return ae.commandParameter(de,ni,"invalid primitve",re.commandStr),Co(function(Xe,p){return ni[de]})}else if(xl in ze){var He=ze[xl];return da(He,function(Xe,p){var y=Xe.constants.primTypes,S=Xe.invoke(p,He);return ae.optional(function(){Xe.assert(p,S+" in "+y,"invalid primitive, must be one of "+Object.keys(ni))}),p.def(y,"[",S,"]")})}else if(De)return ul(De)?De.value?Co(function(Xe,p){return p.def(Xe.ELEMENTS,".primType")}):Co(function(){return cf}):new qi(De.thisDep,De.contextDep,De.propDep,function(Xe,p){var y=Xe.ELEMENTS;return p.def(y,"?",y,".primType:",cf)});return null}function Ue(de,He){if(de in Ne){var Xe=Ne[de]|0;return ae.command(!He||Xe>=0,"invalid "+de,re.commandStr),Co(function(y,S){return He&&(y.OFFSET=Xe),Xe})}else if(de in ze){var p=ze[de];return da(p,function(y,S){var L=y.invoke(S,p);return He&&(y.OFFSET=L,ae.optional(function(){y.assert(S,L+">=0","invalid "+de)})),L})}else if(He&&De)return Co(function(y,S){return y.OFFSET="0",0});return null}var he=Ue(Ed,!0);function Te(){if(Al in Ne){var de=Ne[Al]|0;return ae.command(typeof de=="number"&&de>=0,"invalid vertex count",re.commandStr),Co(function(){return de})}else if(Al in ze){var He=ze[Al];return da(He,function(y,S){var L=y.invoke(S,He);return ae.optional(function(){y.assert(S,"typeof "+L+'==="number"&&'+L+">=0&&"+L+"===("+L+"|0)","invalid vertex count")}),L})}else if(De)if(ul(De)){if(De)return he?new qi(he.thisDep,he.contextDep,he.propDep,function(y,S){var L=S.def(y.ELEMENTS,".vertCount-",y.OFFSET);return ae.optional(function(){y.assert(S,L+">=0","invalid vertex offset/element buffer too small")}),L}):Co(function(y,S){return S.def(y.ELEMENTS,".vertCount")});var Xe=Co(function(){return-1});return ae.optional(function(){Xe.MISSING=!0}),Xe}else{var p=new qi(De.thisDep||he.thisDep,De.contextDep||he.contextDep,De.propDep||he.propDep,function(y,S){var L=y.ELEMENTS;return y.OFFSET?S.def(L,"?",L,".vertCount-",y.OFFSET,":-1"):S.def(L,"?",L,".vertCount:-1")});return ae.optional(function(){p.DYNAMIC=!0}),p}return null}return{elements:De,primitive:Re(),count:Te(),instances:Ue(Pt,!1),offset:he}}function jo(ve,re){var Ne=ve.static,ze=ve.dynamic,Je={};return Tt.forEach(function(De){var Re=Zt(De);function Ue(he,Te){if(De in Ne){var de=he(Ne[De]);Je[Re]=Co(function(){return de})}else if(De in ze){var He=ze[De];Je[Re]=da(He,function(Xe,p){return Te(Xe,p,Xe.invoke(p,He))})}}switch(De){case Sp:case Hs:case zs:case gu:case Ep:case di:case Sl:case bd:case wd:case Op:return Ue(function(he){return ae.commandType(he,"boolean",De,re.commandStr),he},function(he,Te,de){return ae.optional(function(){he.assert(Te,"typeof "+de+'==="boolean"',"invalid flag "+De,he.commandStr)}),de});case _d:return Ue(function(he){return ae.commandParameter(he,Su,"invalid "+De,re.commandStr),Su[he]},function(he,Te,de){var He=he.constants.compareFuncs;return ae.optional(function(){he.assert(Te,de+" in "+He,"invalid "+De+", must be one of "+Object.keys(Su))}),Te.def(He,"[",de,"]")});case Dh:return Ue(function(he){return ae.command(N(he)&&he.length===2&&typeof he[0]=="number"&&typeof he[1]=="number"&&he[0]<=he[1],"depth range is 2d array",re.commandStr),he},function(he,Te,de){ae.optional(function(){he.assert(Te,he.shared.isArrayLike+"("+de+")&&"+de+".length===2&&typeof "+de+'[0]==="number"&&typeof '+de+'[1]==="number"&&'+de+"[0]<="+de+"[1]","depth range must be a 2d array")});var He=Te.def("+",de,"[0]"),Xe=Te.def("+",de,"[1]");return[He,Xe]});case qs:return Ue(function(he){ae.commandType(he,"object","blend.func",re.commandStr);var Te="srcRGB"in he?he.srcRGB:he.src,de="srcAlpha"in he?he.srcAlpha:he.src,He="dstRGB"in he?he.dstRGB:he.dst,Xe="dstAlpha"in he?he.dstAlpha:he.dst;return ae.commandParameter(Te,Ua,Re+".srcRGB",re.commandStr),ae.commandParameter(de,Ua,Re+".srcAlpha",re.commandStr),ae.commandParameter(He,Ua,Re+".dstRGB",re.commandStr),ae.commandParameter(Xe,Ua,Re+".dstAlpha",re.commandStr),ae.command(Yl.indexOf(Te+", "+He)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Te+", "+He+")",re.commandStr),[Ua[Te],Ua[He],Ua[de],Ua[Xe]]},function(he,Te,de){var He=he.constants.blendFuncs;ae.optional(function(){he.assert(Te,de+"&&typeof "+de+'==="object"',"invalid blend func, must be an object")});function Xe(me,xe){var Ve=Te.def('"',me,xe,'" in ',de,"?",de,".",me,xe,":",de,".",me);return ae.optional(function(){he.assert(Te,Ve+" in "+He,"invalid "+De+"."+me+xe+", must be one of "+Object.keys(Ua))}),Ve}var p=Xe("src","RGB"),y=Xe("dst","RGB");ae.optional(function(){var me=he.constants.invalidBlendCombinations;he.assert(Te,me+".indexOf("+p+'+", "+'+y+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var S=Te.def(He,"[",p,"]"),L=Te.def(He,"[",Xe("src","Alpha"),"]"),q=Te.def(He,"[",y,"]"),ne=Te.def(He,"[",Xe("dst","Alpha"),"]");return[S,q,L,ne]});case gd:return Ue(function(he){if(typeof he=="string")return ae.commandParameter(he,ct,"invalid "+De,re.commandStr),[ct[he],ct[he]];if(typeof he=="object")return ae.commandParameter(he.rgb,ct,De+".rgb",re.commandStr),ae.commandParameter(he.alpha,ct,De+".alpha",re.commandStr),[ct[he.rgb],ct[he.alpha]];ae.commandRaise("invalid blend.equation",re.commandStr)},function(he,Te,de){var He=he.constants.blendEquations,Xe=Te.def(),p=Te.def(),y=he.cond("typeof ",de,'==="string"');return ae.optional(function(){function S(L,q,ne){he.assert(L,ne+" in "+He,"invalid "+q+", must be one of "+Object.keys(ct))}S(y.then,De,de),he.assert(y.else,de+"&&typeof "+de+'==="object"',"invalid "+De),S(y.else,De+".rgb",de+".rgb"),S(y.else,De+".alpha",de+".alpha")}),y.then(Xe,"=",p,"=",He,"[",de,"];"),y.else(Xe,"=",He,"[",de,".rgb];",p,"=",He,"[",de,".alpha];"),Te(y),[Xe,p]});case Xs:return Ue(function(he){return ae.command(N(he)&&he.length===4,"blend.color must be a 4d array",re.commandStr),Dr(4,function(Te){return+he[Te]})},function(he,Te,de){return ae.optional(function(){he.assert(Te,he.shared.isArrayLike+"("+de+")&&"+de+".length===4","blend.color must be a 4d array")}),Dr(4,function(He){return Te.def("+",de,"[",He,"]")})});case nr:return Ue(function(he){return ae.commandType(he,"number",Re,re.commandStr),he|0},function(he,Te,de){return ae.optional(function(){he.assert(Te,"typeof "+de+'==="number"',"invalid stencil.mask")}),Te.def(de,"|0")});case Ks:return Ue(function(he){ae.commandType(he,"object",Re,re.commandStr);var Te=he.cmp||"keep",de=he.ref||0,He="mask"in he?he.mask:-1;return ae.commandParameter(Te,Su,De+".cmp",re.commandStr),ae.commandType(de,"number",De+".ref",re.commandStr),ae.commandType(He,"number",De+".mask",re.commandStr),[Su[Te],de,He]},function(he,Te,de){var He=he.constants.compareFuncs;ae.optional(function(){function S(){he.assert(Te,Array.prototype.join.call(arguments,""),"invalid stencil.func")}S(de+"&&typeof ",de,'==="object"'),S('!("cmp" in ',de,")||(",de,".cmp in ",He,")")});var Xe=Te.def('"cmp" in ',de,"?",He,"[",de,".cmp]",":",Ou),p=Te.def(de,".ref|0"),y=Te.def('"mask" in ',de,"?",de,".mask|0:-1");return[Xe,p,y]});case Zc:case il:return Ue(function(he){ae.commandType(he,"object",Re,re.commandStr);var Te=he.fail||"keep",de=he.zfail||"keep",He=he.zpass||"keep";return ae.commandParameter(Te,Vn,De+".fail",re.commandStr),ae.commandParameter(de,Vn,De+".zfail",re.commandStr),ae.commandParameter(He,Vn,De+".zpass",re.commandStr),[De===il?Fn:Xi,Vn[Te],Vn[de],Vn[He]]},function(he,Te,de){var He=he.constants.stencilOps;ae.optional(function(){he.assert(Te,de+"&&typeof "+de+'==="object"',"invalid "+De)});function Xe(p){return ae.optional(function(){he.assert(Te,'!("'+p+'" in '+de+")||("+de+"."+p+" in "+He+")","invalid "+De+"."+p+", must be one of "+Object.keys(Vn))}),Te.def('"',p,'" in ',de,"?",He,"[",de,".",p,"]:",Ou)}return[De===il?Fn:Xi,Xe("fail"),Xe("zfail"),Xe("zpass")]});case Kc:return Ue(function(he){ae.commandType(he,"object",Re,re.commandStr);var Te=he.factor|0,de=he.units|0;return ae.commandType(Te,"number",Re+".factor",re.commandStr),ae.commandType(de,"number",Re+".units",re.commandStr),[Te,de]},function(he,Te,de){ae.optional(function(){he.assert(Te,de+"&&typeof "+de+'==="object"',"invalid "+De)});var He=Te.def(de,".factor|0"),Xe=Te.def(de,".units|0");return[He,Xe]});case xp:return Ue(function(he){var Te=0;return he==="front"?Te=Xi:he==="back"&&(Te=Fn),ae.command(!!Te,Re,re.commandStr),Te},function(he,Te,de){return ae.optional(function(){he.assert(Te,de+'==="front"||'+de+'==="back"',"invalid cull.face")}),Te.def(de,'==="front"?',Xi,":",Fn)});case Ys:return Ue(function(he){return ae.command(typeof he=="number"&&he>=it.lineWidthDims[0]&&he<=it.lineWidthDims[1],"invalid line width, must be a positive number between "+it.lineWidthDims[0]+" and "+it.lineWidthDims[1],re.commandStr),he},function(he,Te,de){return ae.optional(function(){he.assert(Te,"typeof "+de+'==="number"&&'+de+">="+it.lineWidthDims[0]+"&&"+de+"<="+it.lineWidthDims[1],"invalid line width")}),de});case Ap:return Ue(function(he){return ae.commandParameter(he,Qs,Re,re.commandStr),Qs[he]},function(he,Te,de){return ae.optional(function(){he.assert(Te,de+'==="cw"||'+de+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Te.def(de+'==="cw"?'+Md+":"+ff)});case ol:return Ue(function(he){return ae.command(N(he)&&he.length===4,"color.mask must be length 4 array",re.commandStr),he.map(function(Te){return!!Te})},function(he,Te,de){return ae.optional(function(){he.assert(Te,he.shared.isArrayLike+"("+de+")&&"+de+".length===4","invalid color.mask")}),Dr(4,function(He){return"!!"+de+"["+He+"]"})});case yu:return Ue(function(he){ae.command(typeof he=="object"&&he,Re,re.commandStr);var Te="value"in he?he.value:1,de=!!he.invert;return ae.command(typeof Te=="number"&&Te>=0&&Te<=1,"sample.coverage.value must be a number between 0 and 1",re.commandStr),[Te,de]},function(he,Te,de){ae.optional(function(){he.assert(Te,de+"&&typeof "+de+'==="object"',"invalid sample.coverage")});var He=Te.def('"value" in ',de,"?+",de,".value:1"),Xe=Te.def("!!",de,".invert");return[He,Xe]})}}),Je}function Po(ve,re){var Ne=ve.static,ze=ve.dynamic,Je={};return Object.keys(Ne).forEach(function(De){var Re=Ne[De],Ue;if(typeof Re=="number"||typeof Re=="boolean")Ue=Co(function(){return Re});else if(typeof Re=="function"){var he=Re._reglType;he==="texture2d"||he==="textureCube"?Ue=Co(function(Te){return Te.link(Re)}):he==="framebuffer"||he==="framebufferCube"?(ae.command(Re.color.length>0,'missing color attachment for framebuffer sent to uniform "'+De+'"',re.commandStr),Ue=Co(function(Te){return Te.link(Re.color[0])})):ae.commandRaise('invalid data for uniform "'+De+'"',re.commandStr)}else N(Re)?Ue=Co(function(Te){var de=Te.global.def("[",Dr(Re.length,function(He){return ae.command(typeof Re[He]=="number"||typeof Re[He]=="boolean","invalid uniform "+De,Te.commandStr),Re[He]}),"]");return de}):ae.commandRaise('invalid or missing data for uniform "'+De+'"',re.commandStr);Ue.value=Re,Je[De]=Ue}),Object.keys(ze).forEach(function(De){var Re=ze[De];Je[De]=da(Re,function(Ue,he){return Ue.invoke(he,Re)})}),Je}function or(ve,re){var Ne=ve.static,ze=ve.dynamic,Je={};return Object.keys(Ne).forEach(function(De){var Re=Ne[De],Ue=se.id(De),he=new Ze;if(Kl(Re))he.state=Qu,he.buffer=mt.getBuffer(mt.create(Re,Tl,!1,!0)),he.type=0;else{var Te=mt.getBuffer(Re);if(Te)he.state=Qu,he.buffer=Te,he.type=0;else if(ae.command(typeof Re=="object"&&Re,"invalid data for attribute "+De,re.commandStr),"constant"in Re){var de=Re.constant;he.buffer="null",he.state=es,typeof de=="number"?he.x=de:(ae.command(N(de)&&de.length>0&&de.length<=4,"invalid constant for attribute "+De,re.commandStr),Hl.forEach(function(q,ne){ne<de.length&&(he[q]=de[ne])}))}else{Kl(Re.buffer)?Te=mt.getBuffer(mt.create(Re.buffer,Tl,!1,!0)):Te=mt.getBuffer(Re.buffer),ae.command(!!Te,'missing buffer for attribute "'+De+'"',re.commandStr);var He=Re.offset|0;ae.command(He>=0,'invalid offset for attribute "'+De+'"',re.commandStr);var Xe=Re.stride|0;ae.command(Xe>=0&&Xe<256,'invalid stride for attribute "'+De+'", must be integer betweeen [0, 255]',re.commandStr);var p=Re.size|0;ae.command(!("size"in Re)||p>0&&p<=4,'invalid size for attribute "'+De+'", must be 1,2,3,4',re.commandStr);var y=!!Re.normalized,S=0;"type"in Re&&(ae.commandParameter(Re.type,Bi,"invalid type for attribute "+De,re.commandStr),S=Bi[Re.type]);var L=Re.divisor|0;"divisor"in Re&&(ae.command(L===0||Lt,'cannot specify divisor for attribute "'+De+'", instancing not supported',re.commandStr),ae.command(L>=0,'invalid divisor for attribute "'+De+'"',re.commandStr)),ae.optional(function(){var q=re.commandStr,ne=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Re).forEach(function(me){ae.command(ne.indexOf(me)>=0,'unknown parameter "'+me+'" for attribute pointer "'+De+'" (valid parameters are '+ne+")",q)})}),he.buffer=Te,he.state=Qu,he.size=p,he.normalized=y,he.type=S||Te.dtype,he.offset=He,he.stride=Xe,he.divisor=L}}Je[De]=Co(function(q,ne){var me=q.attribCache;if(Ue in me)return me[Ue];var xe={isStream:!1};return Object.keys(he).forEach(function(Ve){xe[Ve]=he[Ve]}),he.buffer&&(xe.buffer=q.link(he.buffer),xe.type=xe.type||xe.buffer+".dtype"),me[Ue]=xe,xe})}),Object.keys(ze).forEach(function(De){var Re=ze[De];function Ue(he,Te){var de=he.invoke(Te,Re),He=he.shared,Xe=he.constants,p=He.isBufferArgs,y=He.buffer;ae.optional(function(){he.assert(Te,de+"&&(typeof "+de+'==="object"||typeof '+de+'==="function")&&('+p+"("+de+")||"+y+".getBuffer("+de+")||"+y+".getBuffer("+de+".buffer)||"+p+"("+de+'.buffer)||("constant" in '+de+"&&(typeof "+de+'.constant==="number"||'+He.isArrayLike+"("+de+".constant))))",'invalid dynamic attribute "'+De+'"')});var S={isStream:Te.def(!1)},L=new Ze;L.state=Qu,Object.keys(L).forEach(function(xe){S[xe]=Te.def(""+L[xe])});var q=S.buffer,ne=S.type;Te("if(",p,"(",de,")){",S.isStream,"=true;",q,"=",y,".createStream(",Tl,",",de,");",ne,"=",q,".dtype;","}else{",q,"=",y,".getBuffer(",de,");","if(",q,"){",ne,"=",q,".dtype;",'}else if("constant" in ',de,"){",S.state,"=",es,";","if(typeof "+de+'.constant === "number"){',S[Hl[0]],"=",de,".constant;",Hl.slice(1).map(function(xe){return S[xe]}).join("="),"=0;","}else{",Hl.map(function(xe,Ve){return S[xe]+"="+de+".constant.length>"+Ve+"?"+de+".constant["+Ve+"]:0;"}).join(""),"}}else{","if(",p,"(",de,".buffer)){",q,"=",y,".createStream(",Tl,",",de,".buffer);","}else{",q,"=",y,".getBuffer(",de,".buffer);","}",ne,'="type" in ',de,"?",Xe.glTypes,"[",de,".type]:",q,".dtype;",S.normalized,"=!!",de,".normalized;");function me(xe){Te(S[xe],"=",de,".",xe,"|0;")}return me("size"),me("offset"),me("stride"),me("divisor"),Te("}}"),Te.exit("if(",S.isStream,"){",y,".destroyStream(",q,");","}"),S}Je[De]=da(Re,Ue)}),Je}function Zo(ve,re){var Ne=ve.static,ze=ve.dynamic;if(rs in Ne){var Je=Ne[rs];return Je!==null&&Ct.getVAO(Je)===null&&(Je=Ct.createVAO(Je)),Co(function(Re){return Re.link(Ct.getVAO(Je))})}else if(rs in ze){var De=ze[rs];return da(De,function(Re,Ue){var he=Re.invoke(Ue,De);return Ue.def(Re.shared.vao+".getVAO("+he+")")})}return null}function uo(ve){var re=ve.static,Ne=ve.dynamic,ze={};return Object.keys(re).forEach(function(Je){var De=re[Je];ze[Je]=Co(function(Re,Ue){return typeof De=="number"||typeof De=="boolean"?""+De:Re.link(De)})}),Object.keys(Ne).forEach(function(Je){var De=Ne[Je];ze[Je]=da(De,function(Re,Ue){return Re.invoke(Ue,De)})}),ze}function Io(ve,re,Ne,ze,Je){var De=ve.static,Re=ve.dynamic;ae.optional(function(){var me=[ra,Jc,$i,Wo,xl,Ed,Al,Pt,_u,rs].concat(Tt);function xe(Ve){Object.keys(Ve).forEach(function(yt){ae.command(me.indexOf(yt)>=0,'unknown parameter "'+yt+'"',Je.commandStr)})}xe(De),xe(Re)});var Ue=Wn(ve,re),he=hn(ve),Te=ur(ve,he,Je),de=_r(ve,Je),He=jo(ve,Je),Xe=ir(ve,Je,Ue);function p(me){var xe=Te[me];xe&&(He[me]=xe)}p(Ro),p(Zt(ns));var y=Object.keys(He).length>0,S={framebuffer:he,draw:de,shader:Xe,state:He,dirty:y,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(S.profile=rr(ve),S.uniforms=Po(Ne,Je),S.drawVAO=S.scopeVAO=Zo(ve),!S.drawVAO&&Xe.program&&!Ue&&Oe.angle_instanced_arrays){var L=!0,q=Xe.program.attributes.map(function(me){var xe=re.static[me];return L=L&&!!xe,xe});if(L&&q.length>0){var ne=Ct.getVAO(Ct.createVAO(q));S.drawVAO=new qi(null,null,null,function(me,xe){return me.link(ne)}),S.useVAO=!0}}return Ue?S.useVAO=!0:S.attributes=or(re,Je),S.context=uo(ze),S}function zo(ve,re,Ne){var ze=ve.shared,Je=ze.context,De=ve.scope();Object.keys(Ne).forEach(function(Re){re.save(Je,"."+Re);var Ue=Ne[Re],he=Ue.append(ve,re);Array.isArray(he)?De(Je,".",Re,"=[",he.join(),"];"):De(Je,".",Re,"=",he,";")}),re(De)}function ii(ve,re,Ne,ze){var Je=ve.shared,De=Je.gl,Re=Je.framebuffer,Ue;en&&(Ue=re.def(Je.extensions,".webgl_draw_buffers"));var he=ve.constants,Te=he.drawBuffer,de=he.backBuffer,He;Ne?He=Ne.append(ve,re):He=re.def(Re,".next"),ze||re("if(",He,"!==",Re,".cur){"),re("if(",He,"){",De,".bindFramebuffer(",df,",",He,".framebuffer);"),en&&re(Ue,".drawBuffersWEBGL(",Te,"[",He,".colorAttachments.length]);"),re("}else{",De,".bindFramebuffer(",df,",null);"),en&&re(Ue,".drawBuffersWEBGL(",de,");"),re("}",Re,".cur=",He,";"),ze||re("}")}function pi(ve,re,Ne){var ze=ve.shared,Je=ze.gl,De=ve.current,Re=ve.next,Ue=ze.current,he=ze.next,Te=ve.cond(Ue,".dirty");Tt.forEach(function(de){var He=Zt(de);if(!(He in Ne.state)){var Xe,p;if(He in Re){Xe=Re[He],p=De[He];var y=Dr(xt[He].length,function(L){return Te.def(Xe,"[",L,"]")});Te(ve.cond(y.map(function(L,q){return L+"!=="+p+"["+q+"]"}).join("||")).then(Je,".",At[He],"(",y,");",y.map(function(L,q){return p+"["+q+"]="+L}).join(";"),";"))}else{Xe=Te.def(he,".",He);var S=ve.cond(Xe,"!==",Ue,".",He);Te(S),He in Ht?S(ve.cond(Xe).then(Je,".enable(",Ht[He],");").else(Je,".disable(",Ht[He],");"),Ue,".",He,"=",Xe,";"):S(Je,".",At[He],"(",Xe,");",Ue,".",He,"=",Xe,";")}}}),Object.keys(Ne.state).length===0&&Te(Ue,".dirty=false;"),re(Te)}function Jo(ve,re,Ne,ze){var Je=ve.shared,De=ve.current,Re=Je.current,Ue=Je.gl;pf(Object.keys(Ne)).forEach(function(he){var Te=Ne[he];if(!(ze&&!ze(Te))){var de=Te.append(ve,re);if(Ht[he]){var He=Ht[he];ul(Te)?de?re(Ue,".enable(",He,");"):re(Ue,".disable(",He,");"):re(ve.cond(de).then(Ue,".enable(",He,");").else(Ue,".disable(",He,");")),re(Re,".",he,"=",de,";")}else if(N(de)){var Xe=De[he];re(Ue,".",At[he],"(",de,");",de.map(function(p,y){return Xe+"["+y+"]="+p}).join(";"),";")}else re(Ue,".",At[he],"(",de,");",Re,".",he,"=",de,";")}})}function yo(ve,re){Lt&&(ve.instancing=re.def(ve.shared.extensions,".angle_instanced_arrays"))}function Kn(ve,re,Ne,ze,Je){var De=ve.shared,Re=ve.stats,Ue=De.current,he=De.timer,Te=Ne.profile;function de(){return typeof performance>"u"?"Date.now()":"performance.now()"}var He,Xe;function p(me){He=re.def(),me(He,"=",de(),";"),typeof Je=="string"?me(Re,".count+=",Je,";"):me(Re,".count++;"),Dt&&(ze?(Xe=re.def(),me(Xe,"=",he,".getNumPendingQueries();")):me(he,".beginQuery(",Re,");"))}function y(me){me(Re,".cpuTime+=",de(),"-",He,";"),Dt&&(ze?me(he,".pushScopeStats(",Xe,",",he,".getNumPendingQueries(),",Re,");"):me(he,".endQuery();"))}function S(me){var xe=re.def(Ue,".profile");re(Ue,".profile=",me,";"),re.exit(Ue,".profile=",xe,";")}var L;if(Te){if(ul(Te)){Te.enable?(p(re),y(re.exit),S("true")):S("false");return}L=Te.append(ve,re),S(L)}else L=re.def(Ue,".profile");var q=ve.block();p(q),re("if(",L,"){",q,"}");var ne=ve.block();y(ne),re.exit("if(",L,"){",ne,"}")}function hi(ve,re,Ne,ze,Je){var De=ve.shared;function Re(he){switch(he){case rf:case af:case ql:return 2;case as:case lf:case _i:return 3;case of:case uf:case Td:return 4;default:return 1}}function Ue(he,Te,de){var He=De.gl,Xe=re.def(he,".location"),p=re.def(De.attributes,"[",Xe,"]"),y=de.state,S=de.buffer,L=[de.x,de.y,de.z,de.w],q=["buffer","normalized","offset","stride"];function ne(){re("if(!",p,".buffer){",He,".enableVertexAttribArray(",Xe,");}");var xe=de.type,Ve;if(de.size?Ve=re.def(de.size,"||",Te):Ve=Te,re("if(",p,".type!==",xe,"||",p,".size!==",Ve,"||",q.map(function(wt){return p+"."+wt+"!=="+de[wt]}).join("||"),"){",He,".bindBuffer(",Tl,",",S,".buffer);",He,".vertexAttribPointer(",[Xe,Ve,xe,de.normalized,de.stride,de.offset],");",p,".type=",xe,";",p,".size=",Ve,";",q.map(function(wt){return p+"."+wt+"="+de[wt]+";"}).join(""),"}"),Lt){var yt=de.divisor;re("if(",p,".divisor!==",yt,"){",ve.instancing,".vertexAttribDivisorANGLE(",[Xe,yt],");",p,".divisor=",yt,";}")}}function me(){re("if(",p,".buffer){",He,".disableVertexAttribArray(",Xe,");",p,".buffer=null;","}if(",Hl.map(function(xe,Ve){return p+"."+xe+"!=="+L[Ve]}).join("||"),"){",He,".vertexAttrib4f(",Xe,",",L,");",Hl.map(function(xe,Ve){return p+"."+xe+"="+L[Ve]+";"}).join(""),"}")}y===Qu?ne():y===es?me():(re("if(",y,"===",Qu,"){"),ne(),re("}else{"),me(),re("}"))}ze.forEach(function(he){var Te=he.name,de=Ne.attributes[Te],He;if(de){if(!Je(de))return;He=de.append(ve,re)}else{if(!Je(Va))return;var Xe=ve.scopeAttrib(Te);ae.optional(function(){ve.assert(re,Xe+".state","missing attribute "+Te)}),He={},Object.keys(new Ze).forEach(function(p){He[p]=re.def(Xe,".",p)})}Ue(ve.link(he),Re(he.info.type),He)})}function Tr(ve,re,Ne,ze,Je){for(var De=ve.shared,Re=De.gl,Ue,he=0;he<ze.length;++he){var Te=ze[he],de=Te.name,He=Te.info.type,Xe=Ne.uniforms[de],p=ve.link(Te),y=p+".location",S;if(Xe){if(!Je(Xe))continue;if(ul(Xe)){var L=Xe.value;if(ae.command(L!==null&&typeof L<"u",'missing uniform "'+de+'"',ve.commandStr),He===Ti||He===Mo){ae.command(typeof L=="function"&&(He===Ti&&(L._reglType==="texture2d"||L._reglType==="framebuffer")||He===Mo&&(L._reglType==="textureCube"||L._reglType==="framebufferCube")),"invalid texture for uniform "+de,ve.commandStr);var q=ve.link(L._texture||L.color[0]._texture);re(Re,".uniform1i(",y,",",q+".bind());"),re.exit(q,".unbind();")}else if(He===sf||He===us||He===Js){ae.optional(function(){ae.command(N(L),"invalid matrix for uniform "+de,ve.commandStr),ae.command(He===sf&&L.length===4||He===us&&L.length===9||He===Js&&L.length===16,"invalid length for matrix uniform "+de,ve.commandStr)});var ne=ve.global.def("new Float32Array(["+Array.prototype.slice.call(L)+"])"),me=2;He===us?me=3:He===Js&&(me=4),re(Re,".uniformMatrix",me,"fv(",y,",false,",ne,");")}else{switch(He){case Oo:ae.commandType(L,"number","uniform "+de,ve.commandStr),Ue="1f";break;case rf:ae.command(N(L)&&L.length===2,"uniform "+de,ve.commandStr),Ue="2f";break;case as:ae.command(N(L)&&L.length===3,"uniform "+de,ve.commandStr),Ue="3f";break;case of:ae.command(N(L)&&L.length===4,"uniform "+de,ve.commandStr),Ue="4f";break;case ls:ae.commandType(L,"boolean","uniform "+de,ve.commandStr),Ue="1i";break;case Zs:ae.commandType(L,"number","uniform "+de,ve.commandStr),Ue="1i";break;case ql:ae.command(N(L)&&L.length===2,"uniform "+de,ve.commandStr),Ue="2i";break;case af:ae.command(N(L)&&L.length===2,"uniform "+de,ve.commandStr),Ue="2i";break;case _i:ae.command(N(L)&&L.length===3,"uniform "+de,ve.commandStr),Ue="3i";break;case lf:ae.command(N(L)&&L.length===3,"uniform "+de,ve.commandStr),Ue="3i";break;case Td:ae.command(N(L)&&L.length===4,"uniform "+de,ve.commandStr),Ue="4i";break;case uf:ae.command(N(L)&&L.length===4,"uniform "+de,ve.commandStr),Ue="4i";break}re(Re,".uniform",Ue,"(",y,",",N(L)?Array.prototype.slice.call(L):L,");")}continue}else S=Xe.append(ve,re)}else{if(!Je(Va))continue;S=re.def(De.uniforms,"[",se.id(de),"]")}He===Ti?(ae(!Array.isArray(S),"must specify a scalar prop for textures"),re("if(",S,"&&",S,'._reglType==="framebuffer"){',S,"=",S,".color[0];","}")):He===Mo&&(ae(!Array.isArray(S),"must specify a scalar prop for cube maps"),re("if(",S,"&&",S,'._reglType==="framebufferCube"){',S,"=",S,".color[0];","}")),ae.optional(function(){function zt(It,rn){ve.assert(re,It,'bad data or missing for uniform "'+de+'".  '+rn)}function wn(It){ae(!Array.isArray(S),"must not specify an array type for uniform"),zt("typeof "+S+'==="'+It+'"',"invalid type, expected "+It)}function xn(It,rn){Array.isArray(S)?ae(S.length===It,"must have length "+It):zt(De.isArrayLike+"("+S+")&&"+S+".length==="+It,"invalid vector, should have length "+It,ve.commandStr)}function Gn(It){ae(!Array.isArray(S),"must not specify a value type"),zt("typeof "+S+'==="function"&&'+S+'._reglType==="texture'+(It===xd?"2d":"Cube")+'"',"invalid texture type",ve.commandStr)}switch(He){case Zs:wn("number");break;case af:xn(2);break;case lf:xn(3);break;case uf:xn(4);break;case Oo:wn("number");break;case rf:xn(2);break;case as:xn(3);break;case of:xn(4);break;case ls:wn("boolean");break;case ql:xn(2);break;case _i:xn(3);break;case Td:xn(4);break;case sf:xn(4);break;case us:xn(9);break;case Js:xn(16);break;case Ti:Gn(xd);break;case Mo:Gn(jh);break}});var xe=1;switch(He){case Ti:case Mo:var Ve=re.def(S,"._texture");re(Re,".uniform1i(",y,",",Ve,".bind());"),re.exit(Ve,".unbind();");continue;case Zs:case ls:Ue="1i";break;case af:case ql:Ue="2i",xe=2;break;case lf:case _i:Ue="3i",xe=3;break;case uf:case Td:Ue="4i",xe=4;break;case Oo:Ue="1f";break;case rf:Ue="2f",xe=2;break;case as:Ue="3f",xe=3;break;case of:Ue="4f",xe=4;break;case sf:Ue="Matrix2fv";break;case us:Ue="Matrix3fv";break;case Js:Ue="Matrix4fv";break}if(re(Re,".uniform",Ue,"(",y,","),Ue.charAt(0)==="M"){var yt=Math.pow(He-sf+2,2),wt=ve.global.def("new Float32Array(",yt,")");Array.isArray(S)?re("false,(",Dr(yt,function(zt){return wt+"["+zt+"]="+S[zt]}),",",wt,")"):re("false,(Array.isArray(",S,")||",S," instanceof Float32Array)?",S,":(",Dr(yt,function(zt){return wt+"["+zt+"]="+S+"["+zt+"]"}),",",wt,")")}else xe>1?re(Dr(xe,function(zt){return Array.isArray(S)?S[zt]:S+"["+zt+"]"})):(ae(!Array.isArray(S),"uniform value must not be an array"),re(S));re(");")}}function Dn(ve,re,Ne,ze){var Je=ve.shared,De=Je.gl,Re=Je.draw,Ue=ze.draw;function he(){var Ve=Ue.elements,yt,wt=re;return Ve?((Ve.contextDep&&ze.contextDynamic||Ve.propDep)&&(wt=Ne),yt=Ve.append(ve,wt)):yt=wt.def(Re,".",Wo),yt&&wt("if("+yt+")"+De+".bindBuffer("+kp+","+yt+".buffer.buffer);"),yt}function Te(){var Ve=Ue.count,yt,wt=re;return Ve?((Ve.contextDep&&ze.contextDynamic||Ve.propDep)&&(wt=Ne),yt=Ve.append(ve,wt),ae.optional(function(){Ve.MISSING&&ve.assert(re,"false","missing vertex count"),Ve.DYNAMIC&&ve.assert(wt,yt+">=0","missing vertex count")})):(yt=wt.def(Re,".",Al),ae.optional(function(){ve.assert(wt,yt+">=0","missing vertex count")})),yt}var de=he();function He(Ve){var yt=Ue[Ve];return yt?yt.contextDep&&ze.contextDynamic||yt.propDep?yt.append(ve,Ne):yt.append(ve,re):re.def(Re,".",Ve)}var Xe=He(xl),p=He(Ed),y=Te();if(typeof y=="number"){if(y===0)return}else Ne("if(",y,"){"),Ne.exit("}");var S,L;Lt&&(S=He(Pt),L=ve.instancing);var q=de+".type",ne=Ue.elements&&ul(Ue.elements);function me(){function Ve(){Ne(L,".drawElementsInstancedANGLE(",[Xe,y,q,p+"<<(("+q+"-"+Ju+")>>1)",S],");")}function yt(){Ne(L,".drawArraysInstancedANGLE(",[Xe,p,y,S],");")}de?ne?Ve():(Ne("if(",de,"){"),Ve(),Ne("}else{"),yt(),Ne("}")):yt()}function xe(){function Ve(){Ne(De+".drawElements("+[Xe,y,q,p+"<<(("+q+"-"+Ju+")>>1)"]+");")}function yt(){Ne(De+".drawArrays("+[Xe,p,y]+");")}de?ne?Ve():(Ne("if(",de,"){"),Ve(),Ne("}else{"),yt(),Ne("}")):yt()}Lt&&(typeof S!="number"||S>=0)?typeof S=="string"?(Ne("if(",S,">0){"),me(),Ne("}else if(",S,"<0){"),xe(),Ne("}")):me():xe()}function hr(ve,re,Ne,ze,Je){var De=jn(),Re=De.proc("body",Je);return ae.optional(function(){De.commandStr=re.commandStr,De.command=De.link(re.commandStr)}),Lt&&(De.instancing=Re.def(De.shared.extensions,".angle_instanced_arrays")),ve(De,Re,Ne,ze),De.compile().body}function Zn(ve,re,Ne,ze){yo(ve,re),Ne.useVAO?Ne.drawVAO?re(ve.shared.vao,".setVAO(",Ne.drawVAO.append(ve,re),");"):re(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(re(ve.shared.vao,".setVAO(null);"),hi(ve,re,Ne,ze.attributes,function(){return!0})),Tr(ve,re,Ne,ze.uniforms,function(){return!0}),Dn(ve,re,re,Ne)}function go(ve,re){var Ne=ve.proc("draw",1);yo(ve,Ne),zo(ve,Ne,re.context),ii(ve,Ne,re.framebuffer),pi(ve,Ne,re),Jo(ve,Ne,re.state),Kn(ve,Ne,re,!1,!0);var ze=re.shader.progVar.append(ve,Ne);if(Ne(ve.shared.gl,".useProgram(",ze,".program);"),re.shader.program)Zn(ve,Ne,re,re.shader.program);else{Ne(ve.shared.vao,".setVAO(null);");var Je=ve.global.def("{}"),De=Ne.def(ze,".id"),Re=Ne.def(Je,"[",De,"]");Ne(ve.cond(Re).then(Re,".call(this,a0);").else(Re,"=",Je,"[",De,"]=",ve.link(function(Ue){return hr(Zn,ve,re,Ue,1)}),"(",ze,");",Re,".call(this,a0);"))}Object.keys(re.state).length>0&&Ne(ve.shared.current,".dirty=true;")}function Ml(ve,re,Ne,ze){ve.batchId="a1",yo(ve,re);function Je(){return!0}hi(ve,re,Ne,ze.attributes,Je),Tr(ve,re,Ne,ze.uniforms,Je),Dn(ve,re,re,Ne)}function So(ve,re,Ne,ze){yo(ve,re);var Je=Ne.contextDep,De=re.def(),Re="a0",Ue="a1",he=re.def();ve.shared.props=he,ve.batchId=De;var Te=ve.scope(),de=ve.scope();re(Te.entry,"for(",De,"=0;",De,"<",Ue,";++",De,"){",he,"=",Re,"[",De,"];",de,"}",Te.exit);function He(q){return q.contextDep&&Je||q.propDep}function Xe(q){return!He(q)}if(Ne.needsContext&&zo(ve,de,Ne.context),Ne.needsFramebuffer&&ii(ve,de,Ne.framebuffer),Jo(ve,de,Ne.state,He),Ne.profile&&He(Ne.profile)&&Kn(ve,de,Ne,!1,!0),ze)Ne.useVAO?Ne.drawVAO?He(Ne.drawVAO)?de(ve.shared.vao,".setVAO(",Ne.drawVAO.append(ve,de),");"):Te(ve.shared.vao,".setVAO(",Ne.drawVAO.append(ve,Te),");"):Te(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(Te(ve.shared.vao,".setVAO(null);"),hi(ve,Te,Ne,ze.attributes,Xe),hi(ve,de,Ne,ze.attributes,He)),Tr(ve,Te,Ne,ze.uniforms,Xe),Tr(ve,de,Ne,ze.uniforms,He),Dn(ve,Te,de,Ne);else{var p=ve.global.def("{}"),y=Ne.shader.progVar.append(ve,de),S=de.def(y,".id"),L=de.def(p,"[",S,"]");de(ve.shared.gl,".useProgram(",y,".program);","if(!",L,"){",L,"=",p,"[",S,"]=",ve.link(function(q){return hr(Ml,ve,Ne,q,2)}),"(",y,");}",L,".call(this,a0[",De,"],",De,");")}}function ye(ve,re){var Ne=ve.proc("batch",2);ve.batchId="0",yo(ve,Ne);var ze=!1,Je=!0;Object.keys(re.context).forEach(function(p){ze=ze||re.context[p].propDep}),ze||(zo(ve,Ne,re.context),Je=!1);var De=re.framebuffer,Re=!1;De?(De.propDep?ze=Re=!0:De.contextDep&&ze&&(Re=!0),Re||ii(ve,Ne,De)):ii(ve,Ne,null),re.state.viewport&&re.state.viewport.propDep&&(ze=!0);function Ue(p){return p.contextDep&&ze||p.propDep}pi(ve,Ne,re),Jo(ve,Ne,re.state,function(p){return!Ue(p)}),(!re.profile||!Ue(re.profile))&&Kn(ve,Ne,re,!1,"a1"),re.contextDep=ze,re.needsContext=Je,re.needsFramebuffer=Re;var he=re.shader.progVar;if(he.contextDep&&ze||he.propDep)So(ve,Ne,re,null);else{var Te=he.append(ve,Ne);if(Ne(ve.shared.gl,".useProgram(",Te,".program);"),re.shader.program)So(ve,Ne,re,re.shader.program);else{Ne(ve.shared.vao,".setVAO(null);");var de=ve.global.def("{}"),He=Ne.def(Te,".id"),Xe=Ne.def(de,"[",He,"]");Ne(ve.cond(Xe).then(Xe,".call(this,a0,a1);").else(Xe,"=",de,"[",He,"]=",ve.link(function(p){return hr(So,ve,re,p,2)}),"(",Te,");",Xe,".call(this,a0,a1);"))}}Object.keys(re.state).length>0&&Ne(ve.shared.current,".dirty=true;")}function at(ve,re){var Ne=ve.proc("scope",3);ve.batchId="a2";var ze=ve.shared,Je=ze.current;zo(ve,Ne,re.context),re.framebuffer&&re.framebuffer.append(ve,Ne),pf(Object.keys(re.state)).forEach(function(Re){var Ue=re.state[Re],he=Ue.append(ve,Ne);N(he)?he.forEach(function(Te,de){Ne.set(ve.next[Re],"["+de+"]",Te)}):Ne.set(ze.next,"."+Re,he)}),Kn(ve,Ne,re,!0,!0),[Wo,Ed,Al,Pt,xl].forEach(function(Re){var Ue=re.draw[Re];Ue&&Ne.set(ze.draw,"."+Re,""+Ue.append(ve,Ne))}),Object.keys(re.uniforms).forEach(function(Re){var Ue=re.uniforms[Re].append(ve,Ne);Array.isArray(Ue)&&(Ue="["+Ue.join()+"]"),Ne.set(ze.uniforms,"["+se.id(Re)+"]",Ue)}),Object.keys(re.attributes).forEach(function(Re){var Ue=re.attributes[Re].append(ve,Ne),he=ve.scopeAttrib(Re);Object.keys(new Ze).forEach(function(Te){Ne.set(he,"."+Te,Ue[Te])})}),re.scopeVAO&&Ne.set(ze.vao,".targetVAO",re.scopeVAO.append(ve,Ne));function De(Re){var Ue=re.shader[Re];Ue&&Ne.set(ze.shader,"."+Re,Ue.append(ve,Ne))}De(Jc),De($i),Object.keys(re.state).length>0&&(Ne(Je,".dirty=true;"),Ne.exit(Je,".dirty=true;")),Ne("a1(",ve.shared.context,",a0,",ve.batchId,");")}function nt(ve){if(!(typeof ve!="object"||N(ve))){for(var re=Object.keys(ve),Ne=0;Ne<re.length;++Ne)if(Jt.isDynamic(ve[re[Ne]]))return!0;return!1}}function sn(ve,re,Ne){var ze=re.static[Ne];if(!ze||!nt(ze))return;var Je=ve.global,De=Object.keys(ze),Re=!1,Ue=!1,he=!1,Te=ve.global.def("{}");De.forEach(function(He){var Xe=ze[He];if(Jt.isDynamic(Xe)){typeof Xe=="function"&&(Xe=ze[He]=Jt.unbox(Xe));var p=da(Xe,null);Re=Re||p.thisDep,he=he||p.propDep,Ue=Ue||p.contextDep}else{switch(Je(Te,".",He,"="),typeof Xe){case"number":Je(Xe);break;case"string":Je('"',Xe,'"');break;case"object":Array.isArray(Xe)&&Je("[",Xe.join(),"]");break;default:Je(ve.link(Xe));break}Je(";")}});function de(He,Xe){De.forEach(function(p){var y=ze[p];if(Jt.isDynamic(y)){var S=He.invoke(Xe,y);Xe(Te,".",p,"=",S,";")}})}re.dynamic[Ne]=new Jt.DynamicVariable(rl,{thisDep:Re,contextDep:Ue,propDep:he,ref:Te,append:de}),delete re.static[Ne]}function dr(ve,re,Ne,ze,Je){var De=jn();De.stats=De.link(Je),Object.keys(re.static).forEach(function(Ue){sn(De,re,Ue)}),Mp.forEach(function(Ue){sn(De,ve,Ue)});var Re=Io(ve,re,Ne,ze,De);return go(De,Re),at(De,Re),ye(De,Re),a(De.compile(),{destroy:function(){Re.shader.program.destroy()}})}return{next:an,current:xt,procs:function(){var ve=jn(),re=ve.proc("poll"),Ne=ve.proc("refresh"),ze=ve.block();re(ze),Ne(ze);var Je=ve.shared,De=Je.gl,Re=Je.next,Ue=Je.current;ze(Ue,".dirty=false;"),ii(ve,re),ii(ve,Ne,null,!0);var he;Lt&&(he=ve.link(Lt)),Oe.oes_vertex_array_object&&Ne(ve.link(Oe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Te=0;Te<it.maxAttributes;++Te){var de=Ne.def(Je.attributes,"[",Te,"]"),He=ve.cond(de,".buffer");He.then(De,".enableVertexAttribArray(",Te,");",De,".bindBuffer(",Tl,",",de,".buffer.buffer);",De,".vertexAttribPointer(",Te,",",de,".size,",de,".type,",de,".normalized,",de,".stride,",de,".offset);").else(De,".disableVertexAttribArray(",Te,");",De,".vertexAttrib4f(",Te,",",de,".x,",de,".y,",de,".z,",de,".w);",de,".buffer=null;"),Ne(He),Lt&&Ne(he,".vertexAttribDivisorANGLE(",Te,",",de,".divisor);")}return Ne(ve.shared.vao,".currentVAO=null;",ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"),Object.keys(Ht).forEach(function(Xe){var p=Ht[Xe],y=ze.def(Re,".",Xe),S=ve.block();S("if(",y,"){",De,".enable(",p,")}else{",De,".disable(",p,")}",Ue,".",Xe,"=",y,";"),Ne(S),re("if(",y,"!==",Ue,".",Xe,"){",S,"}")}),Object.keys(At).forEach(function(Xe){var p=At[Xe],y=xt[Xe],S,L,q=ve.block();if(q(De,".",p,"("),N(y)){var ne=y.length;S=ve.global.def(Re,".",Xe),L=ve.global.def(Ue,".",Xe),q(Dr(ne,function(me){return S+"["+me+"]"}),");",Dr(ne,function(me){return L+"["+me+"]="+S+"["+me+"];"}).join("")),re("if(",Dr(ne,function(me){return S+"["+me+"]!=="+L+"["+me+"]"}).join("||"),"){",q,"}")}else S=ze.def(Re,".",Xe),L=ze.def(Ue,".",Xe),q(S,");",Ue,".",Xe,"=",S,";"),re("if(",S,"!==",L,"){",q,"}");Ne(q)}),ve.compile()}(),compile:dr}}function hf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var cs=34918,gr=34919,Wh=35007,pa=function(W,se){if(!se.ext_disjoint_timer_query)return null;var Oe=[];function it(){return Oe.pop()||se.ext_disjoint_timer_query.createQueryEXT()}function mt(Lt){Oe.push(Lt)}var tt=[];function pt(Lt){var en=it();se.ext_disjoint_timer_query.beginQueryEXT(Wh,en),tt.push(en),Dt(tt.length-1,tt.length,Lt)}function Rt(){se.ext_disjoint_timer_query.endQueryEXT(Wh)}function $t(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ct=[];function ft(){return Ct.pop()||new $t}function qt(Lt){Ct.push(Lt)}var Vt=[];function Dt(Lt,en,xt){var an=ft();an.startQueryIndex=Lt,an.endQueryIndex=en,an.sum=0,an.stats=xt,Vt.push(an)}var Et=[],Ze=[];function ct(){var Lt,en,xt=tt.length;if(xt!==0){Ze.length=Math.max(Ze.length,xt+1),Et.length=Math.max(Et.length,xt+1),Et[0]=0,Ze[0]=0;var an=0;for(Lt=0,en=0;en<tt.length;++en){var Tt=tt[en];se.ext_disjoint_timer_query.getQueryObjectEXT(Tt,gr)?(an+=se.ext_disjoint_timer_query.getQueryObjectEXT(Tt,cs),mt(Tt)):tt[Lt++]=Tt,Et[en+1]=an,Ze[en+1]=Lt}for(tt.length=Lt,Lt=0,en=0;en<Vt.length;++en){var Ht=Vt[en],At=Ht.startQueryIndex,Zt=Ht.endQueryIndex;Ht.sum+=Et[Zt]-Et[At];var Pn=Ze[At],Bn=Ze[Zt];Bn===Pn?(Ht.stats.gpuTime+=Ht.sum/1e6,qt(Ht)):(Ht.startQueryIndex=Pn,Ht.endQueryIndex=Bn,Vt[Lt++]=Ht)}Vt.length=Lt}}return{beginQuery:pt,endQuery:Rt,pushScopeStats:Dt,update:ct,getNumPendingQueries:function(){return tt.length},clear:function(){Oe.push.apply(Oe,tt);for(var Lt=0;Lt<Oe.length;Lt++)se.ext_disjoint_timer_query.deleteQueryEXT(Oe[Lt]);tt.length=0,Oe.length=0},restore:function(){tt.length=0,Oe.length=0}}},ko=16384,oa=256,Dp=1024,Mi=34962,Ta="webglcontextlost",fs="webglcontextrestored",vf=1,Do=2,Go=3;function Pd(W,se){for(var Oe=0;Oe<W.length;++Oe)if(W[Oe]===se)return Oe;return-1}function jp(W){var se=lr(W);if(!se)return null;var Oe=se.gl,it=Oe.getContextAttributes(),mt=Oe.isContextLost(),tt=to(Oe,se);if(!tt)return null;var pt=ui(),Rt=hf(),$t=tt.extensions,Ct=pa(Oe,$t),ft=Or(),qt=Oe.drawingBufferWidth,Vt=Oe.drawingBufferHeight,Dt={tick:0,time:0,viewportWidth:qt,viewportHeight:Vt,framebufferWidth:qt,framebufferHeight:Vt,drawingBufferWidth:qt,drawingBufferHeight:Vt,pixelRatio:se.pixelRatio},Et={},Ze={elements:null,primitive:4,count:-1,offset:0,instances:-1},ct=Pc(Oe,$t),Lt=wa(Oe,Rt,se,xt),en=pd(Oe,$t,ct,Rt,Lt);function xt(Dn){return en.destroyBuffer(Dn)}var an=yn(Oe,$t,Lt,Rt),Tt=vd(Oe,pt,Rt,se),Ht=xr(Oe,$t,ct,function(){Pn.procs.poll()},Dt,Rt,se),At=Ws(Oe,$t,ct,Rt,se),Zt=fd(Oe,$t,ct,Ht,At,Rt),Pn=lm(Oe,pt,$t,ct,Lt,an,Ht,Zt,Et,en,Tt,Ze,Dt,Ct,se),Bn=Ch(Oe,Zt,Pn.procs.poll,Dt,it,$t,ct),jt=Pn.next,Mt=Oe.canvas,St=[],jn=[],rr=[],hn=[se.onDestroy],ur=null;function Wn(){if(St.length===0){Ct&&Ct.update(),ur=null;return}ur=Rn.next(Wn),Jo();for(var Dn=St.length-1;Dn>=0;--Dn){var hr=St[Dn];hr&&hr(Dt,null,0)}Oe.flush(),Ct&&Ct.update()}function ir(){!ur&&St.length>0&&(ur=Rn.next(Wn))}function _r(){ur&&(Rn.cancel(Wn),ur=null)}function jo(Dn){Dn.preventDefault(),mt=!0,_r(),jn.forEach(function(hr){hr()})}function Po(Dn){Oe.getError(),mt=!1,tt.restore(),Tt.restore(),Lt.restore(),Ht.restore(),At.restore(),Zt.restore(),en.restore(),Ct&&Ct.restore(),Pn.procs.refresh(),ir(),rr.forEach(function(hr){hr()})}Mt&&(Mt.addEventListener(Ta,jo,!1),Mt.addEventListener(fs,Po,!1));function or(){St.length=0,_r(),Mt&&(Mt.removeEventListener(Ta,jo),Mt.removeEventListener(fs,Po)),Tt.clear(),Zt.clear(),At.clear(),Ht.clear(),an.clear(),Lt.clear(),en.clear(),Ct&&Ct.clear(),hn.forEach(function(Dn){Dn()})}function Zo(Dn){ae(!!Dn,"invalid args to regl({...})"),ae.type(Dn,"object","invalid args to regl({...})");function hr(Je){var De=a({},Je);delete De.uniforms,delete De.attributes,delete De.context,delete De.vao,"stencil"in De&&De.stencil.op&&(De.stencil.opBack=De.stencil.opFront=De.stencil.op,delete De.stencil.op);function Re(Ue){if(Ue in De){var he=De[Ue];delete De[Ue],Object.keys(he).forEach(function(Te){De[Ue+"."+Te]=he[Te]})}}return Re("blend"),Re("depth"),Re("cull"),Re("stencil"),Re("polygonOffset"),Re("scissor"),Re("sample"),"vao"in Je&&(De.vao=Je.vao),De}function Zn(Je,De){var Re={},Ue={};return Object.keys(Je).forEach(function(he){var Te=Je[he];if(Jt.isDynamic(Te)){Ue[he]=Jt.unbox(Te,he);return}else if(De&&Array.isArray(Te)){for(var de=0;de<Te.length;++de)if(Jt.isDynamic(Te[de])){Ue[he]=Jt.unbox(Te,he);return}}Re[he]=Te}),{dynamic:Ue,static:Re}}var go=Zn(Dn.context||{},!0),Ml=Zn(Dn.uniforms||{},!0),So=Zn(Dn.attributes||{},!1),ye=Zn(hr(Dn),!1),at={gpuTime:0,cpuTime:0,count:0},nt=Pn.compile(ye,So,Ml,go,at),sn=nt.draw,dr=nt.batch,ve=nt.scope,re=[];function Ne(Je){for(;re.length<Je;)re.push(null);return re}function ze(Je,De){var Re;if(mt&&ae.raise("context lost"),typeof Je=="function")return ve.call(this,null,Je,0);if(typeof De=="function")if(typeof Je=="number")for(Re=0;Re<Je;++Re)ve.call(this,null,De,Re);else if(Array.isArray(Je))for(Re=0;Re<Je.length;++Re)ve.call(this,Je[Re],De,Re);else return ve.call(this,Je,De,0);else if(typeof Je=="number"){if(Je>0)return dr.call(this,Ne(Je|0),Je|0)}else if(Array.isArray(Je)){if(Je.length)return dr.call(this,Je,Je.length)}else return sn.call(this,Je)}return a(ze,{stats:at,destroy:function(){nt.destroy()}})}var uo=Zt.setFBO=Zo({framebuffer:Jt.define.call(null,vf,"framebuffer")});function Io(Dn,hr){var Zn=0;Pn.procs.poll();var go=hr.color;go&&(Oe.clearColor(+go[0]||0,+go[1]||0,+go[2]||0,+go[3]||0),Zn|=ko),"depth"in hr&&(Oe.clearDepth(+hr.depth),Zn|=oa),"stencil"in hr&&(Oe.clearStencil(hr.stencil|0),Zn|=Dp),ae(!!Zn,"called regl.clear with no buffer specified"),Oe.clear(Zn)}function zo(Dn){if(ae(typeof Dn=="object"&&Dn,"regl.clear() takes an object as input"),"framebuffer"in Dn)if(Dn.framebuffer&&Dn.framebuffer_reglType==="framebufferCube")for(var hr=0;hr<6;++hr)uo(a({framebuffer:Dn.framebuffer.faces[hr]},Dn),Io);else uo(Dn,Io);else Io(null,Dn)}function ii(Dn){ae.type(Dn,"function","regl.frame() callback must be a function"),St.push(Dn);function hr(){var Zn=Pd(St,Dn);ae(Zn>=0,"cannot cancel a frame twice");function go(){var Ml=Pd(St,go);St[Ml]=St[St.length-1],St.length-=1,St.length<=0&&_r()}St[Zn]=go}return ir(),{cancel:hr}}function pi(){var Dn=jt.viewport,hr=jt.scissor_box;Dn[0]=Dn[1]=hr[0]=hr[1]=0,Dt.viewportWidth=Dt.framebufferWidth=Dt.drawingBufferWidth=Dn[2]=hr[2]=Oe.drawingBufferWidth,Dt.viewportHeight=Dt.framebufferHeight=Dt.drawingBufferHeight=Dn[3]=hr[3]=Oe.drawingBufferHeight}function Jo(){Dt.tick+=1,Dt.time=Kn(),pi(),Pn.procs.poll()}function yo(){Ht.refresh(),pi(),Pn.procs.refresh(),Ct&&Ct.update()}function Kn(){return(Or()-ft)/1e3}yo();function hi(Dn,hr){ae.type(hr,"function","listener callback must be a function");var Zn;switch(Dn){case"frame":return ii(hr);case"lost":Zn=jn;break;case"restore":Zn=rr;break;case"destroy":Zn=hn;break;default:ae.raise("invalid event, must be one of frame,lost,restore,destroy")}return Zn.push(hr),{cancel:function(){for(var go=0;go<Zn.length;++go)if(Zn[go]===hr){Zn[go]=Zn[Zn.length-1],Zn.pop();return}}}}var Tr=a(Zo,{clear:zo,prop:Jt.define.bind(null,vf),context:Jt.define.bind(null,Do),this:Jt.define.bind(null,Go),draw:Zo({}),buffer:function(Dn){return Lt.create(Dn,Mi,!1,!1)},elements:function(Dn){return an.create(Dn,!1)},texture:Ht.create2D,cube:Ht.createCube,renderbuffer:At.create,framebuffer:Zt.create,framebufferCube:Zt.createCube,vao:en.createVAO,attributes:it,frame:ii,on:hi,limits:ct,hasExtension:function(Dn){return ct.extensions.indexOf(Dn.toLowerCase())>=0},read:Bn,destroy:or,_gl:Oe,_refresh:yo,poll:function(){Jo(),Ct&&Ct.update()},now:Kn,stats:Rt});return se.onDone(null,Tr),Tr}return jp})}(Rg)),Rg.exports}kne();var Mf,Sm,kf,ku,xm,Vd,Am,gg,sc,qp,Pa,cc,fc,_g;Mf={},fn(Mf,un.POINTS,"points"),fn(Mf,un.LINES,"lines"),fn(Mf,un.LINE_LOOP,"line loop"),fn(Mf,un.LINE_STRIP,"line strip"),fn(Mf,un.TRIANGLES,"triangles"),fn(Mf,un.TRIANGLE_FAN,"triangle fan"),fn(Mf,un.TRIANGLE_STRIP,"triangle strip");Sm={},fn(Sm,un.STATIC_DRAW,"static"),fn(Sm,un.DYNAMIC_DRAW,"dynamic"),fn(Sm,un.STREAM_DRAW,"stream");kf={},fn(kf,un.BYTE,"int8"),fn(kf,un.UNSIGNED_INT,"int16"),fn(kf,un.INT,"int32"),fn(kf,un.UNSIGNED_BYTE,"uint8"),fn(kf,un.UNSIGNED_SHORT,"uint16"),fn(kf,un.UNSIGNED_INT,"uint32"),fn(kf,un.FLOAT,"float");ku={},fn(ku,un.ALPHA,"alpha"),fn(ku,un.LUMINANCE,"luminance"),fn(ku,un.LUMINANCE_ALPHA,"luminance alpha"),fn(ku,un.RGB,"rgb"),fn(ku,un.RGBA,"rgba"),fn(ku,un.RGBA4,"rgba4"),fn(ku,un.RGB5_A1,"rgb5 a1"),fn(ku,un.RGB565,"rgb565"),fn(ku,un.DEPTH_COMPONENT,"depth"),fn(ku,un.DEPTH_STENCIL,"depth stencil");xm={},fn(xm,un.DONT_CARE,"dont care"),fn(xm,un.NICEST,"nice"),fn(xm,un.FASTEST,"fast");Vd={},fn(Vd,un.NEAREST,"nearest"),fn(Vd,un.LINEAR,"linear"),fn(Vd,un.LINEAR_MIPMAP_LINEAR,"mipmap"),fn(Vd,un.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),fn(Vd,un.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),fn(Vd,un.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");Am={},fn(Am,un.REPEAT,"repeat"),fn(Am,un.CLAMP_TO_EDGE,"clamp"),fn(Am,un.MIRRORED_REPEAT,"mirror");gg={},fn(gg,un.NONE,"none"),fn(gg,un.BROWSER_DEFAULT_WEBGL,"browser");sc={},fn(sc,un.NEVER,"never"),fn(sc,un.ALWAYS,"always"),fn(sc,un.LESS,"less"),fn(sc,un.LEQUAL,"lequal"),fn(sc,un.GREATER,"greater"),fn(sc,un.GEQUAL,"gequal"),fn(sc,un.EQUAL,"equal"),fn(sc,un.NOTEQUAL,"notequal");qp={},fn(qp,un.FUNC_ADD,"add"),fn(qp,un.MIN_EXT,"min"),fn(qp,un.MAX_EXT,"max"),fn(qp,un.FUNC_SUBTRACT,"subtract"),fn(qp,un.FUNC_REVERSE_SUBTRACT,"reverse subtract");Pa={},fn(Pa,un.ZERO,"zero"),fn(Pa,un.ONE,"one"),fn(Pa,un.SRC_COLOR,"src color"),fn(Pa,un.ONE_MINUS_SRC_COLOR,"one minus src color"),fn(Pa,un.SRC_ALPHA,"src alpha"),fn(Pa,un.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),fn(Pa,un.DST_COLOR,"dst color"),fn(Pa,un.ONE_MINUS_DST_COLOR,"one minus dst color"),fn(Pa,un.DST_ALPHA,"dst alpha"),fn(Pa,un.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),fn(Pa,un.CONSTANT_COLOR,"constant color"),fn(Pa,un.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),fn(Pa,un.CONSTANT_ALPHA,"constant alpha"),fn(Pa,un.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),fn(Pa,un.SRC_ALPHA_SATURATE,"src alpha saturate");cc={},fn(cc,un.NEVER,"never"),fn(cc,un.ALWAYS,"always"),fn(cc,un.LESS,"less"),fn(cc,un.LEQUAL,"lequal"),fn(cc,un.GREATER,"greater"),fn(cc,un.GEQUAL,"gequal"),fn(cc,un.EQUAL,"equal"),fn(cc,un.NOTEQUAL,"notequal");fc={},fn(fc,un.ZERO,"zero"),fn(fc,un.KEEP,"keep"),fn(fc,un.REPLACE,"replace"),fn(fc,un.INVERT,"invert"),fn(fc,un.INCR,"increment"),fn(fc,un.DECR,"decrement"),fn(fc,un.INCR_WRAP,"increment wrap"),fn(fc,un.DECR_WRAP,"decrement wrap");_g={},fn(_g,un.FRONT,"front"),fn(_g,un.BACK,"back");var fw,NT;function Pne(){if(NT)return fw;NT=1;function e(t,n){return function(a){return t(n(a))}}return fw=e,fw}var dw,RT;function Nne(){if(RT)return dw;RT=1;var e=Pne(),t=e(Object.getPrototypeOf,Object);return dw=t,dw}var pw,CT;function Rne(){if(CT)return pw;CT=1;var e=oE(),t=Nne(),n=iE(),a="[object Object]",r=Function.prototype,u=Object.prototype,c=r.toString,v=u.hasOwnProperty,f=c.call(Object);function g(_){if(!n(_)||e(_)!=a)return!1;var b=t(_);if(b===null)return!0;var O=v.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&c.call(O)==f}return pw=g,pw}Rne();class XN{constructor(){ka(this,"lf");ka(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:a,gridSize:r}=this.lf.graphModel;let u=40,c=40;r>20&&(u=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:u,ranksep:c,begin:[120,120],...t},(g=new UJ(this.option).layout({nodes:n.map(_=>({id:_.id,size:{width:_.width,height:_.height},model:_})),edges:a.map(_=>({source:_.sourceNodeId,target:_.targetNodeId,model:_}))}).nodes)==null||g.forEach(_=>{const{model:b}=_;b.set_position({x:_.x,y:_.y})}),this.lf.fitView()}}ka(XN,"pluginName","dagre");const Cne=Jn({name:"WorkFlow"}),Dne=Jn({...Cne,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":RB,"./nodes/application-node/index.ts":UB,"./nodes/base-node/index.ts":SG,"./nodes/condition-node/index.ts":jG,"./nodes/database-node/index.ts":XG,"./nodes/document-extract-node/index.ts":JG,"./nodes/form-node/index.ts":gz,"./nodes/http-node/index.ts":Nz,"./nodes/image-generate/index.ts":Wz,"./nodes/image-understand/index.ts":eH,"./nodes/intent-classify-node/index.ts":sH,"./nodes/mcp-node/index.ts":PH,"./nodes/parameter-extraction-node/index.ts":HH,"./nodes/question-node/index.ts":nX,"./nodes/reply-node/index.ts":sX,"./nodes/reranker-node/index.ts":OX,"./nodes/search-document-node/index.ts":FX,"./nodes/search-knowledge-node/index.ts":KX,"./nodes/speech-to-text-node/index.ts":uq,"./nodes/start-node/index.ts":mq,"./nodes/text-to-speech-node/index.ts":xq,"./nodes/tool-lib-node/index.ts":$q,"./nodes/tool-node/index.ts":eY,"./nodes/user-select-node/index.ts":sY,"./nodes/variable-aggregation-node/index.ts":bY,"./nodes/variable-assign-node/index.ts":MY,"./nodes/variable-splitting/index.ts":YY}),a=MB(),r=Le(""),u=e,c={nodes:[...SI]};Yn({get:()=>u.data?u.data:c,set:A=>A});const v=Le();Hr(()=>{g()});const f=A=>{v.value.render(A)},g=A=>{const E=document.querySelector("#container");E&&(v.value=new TV({plugins:[XN],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:E}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),rK(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(D=>n[D].default),tK]),v.value.setDefaultEdgeType("app-edge"),v.value.render(A||{}),v.value.graphModel.eventCenter.on("delete_edge",D=>{D.forEach(j=>{v.value.deleteEdge(j)})}),v.value.graphModel.eventCenter.on("anchor:drop",D=>{D.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var D;(D=v.value)==null||D.fitView()},500))};return t({onmousedown:A=>{A.type&&v.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(A=>{var E;return(E=A==null?void 0:A.validate)==null?void 0:E.call(A)})),getGraphData:()=>v.value.getGraphData(),addNode:A=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:E,virtualRectCenterPositionY:D}=v.value.graphModel.getVirtualRectSize(),j=v.value.graphModel.addNode({type:A.type,properties:A.properties,x:E,y:D-v.value.graphModel.height/2});j.isSelected=!0,j.isHovered=!0,v.value.toFront(j.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:f}),(A,E)=>(be(),tn(br,null,[E[0]||(E[0]=J("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(be(),et(nK,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):En("",!0),k(Qn(a),{"flow-id":r.value},null,8,["flow-id"])],64))}}),jne={class:"workflow-publish-history border-l white-bg"},Ine={class:"border-b p-16-24"},Lne={class:"list-height pt-0"},$ne={class:"p-8 pt-0"},Fne={class:"flex-between"},Une={style:{"max-width":"80%"}},Vne={class:"text-center"},Bne=Jn({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=Zi(),{params:{id:a}}=n,r=Yn(()=>n.path.includes("resource-management")?"systemManage":"workspace"),u=t,c=Le(!1),v=Le([]),f=Le("");function g(E){f.value=E.id}function _(E){u("click",E)}function b(E){u("refreshVersion",E)}function O(E){E.writeStatus=!0}function x(E){E.writeStatus=!1}function M(E,D){if(E){const j={name:E};ho({type:"workflowVersion",systemType:r.value}).putWorkFlowVersion(a,D.id,j,c).then(()=>{Xd(Ot("common.modifySuccess")),D.writeStatus=!1,A()})}else li(Ot("views.applicationWorkflow.tip.nameMessage"))}function A(){ho({type:"workflowVersion",systemType:r.value}).getWorkFlowVersion(a,c).then(E=>{v.value=E.data})}return Hr(()=>{A()}),(E,D)=>{const j=Z("ReadWrite"),U=Z("el-tag"),F=Z("UserFilled"),I=Z("el-icon"),V=Z("el-avatar"),Y=Z("el-text"),K=Z("AppIcon"),H=Z("el-button"),B=Z("el-dropdown-item"),z=Z("RefreshLeft"),X=Z("el-dropdown-menu"),ee=Z("el-dropdown"),pe=Z("common-list"),ce=Z("el-scrollbar"),Pe=Hd("loading");return be(),tn("div",jne,[J("h4",Ine,_e(E.$t("views.applicationWorkflow.setting.releaseHistory")),1),J("div",Lne,[k(ce,null,{default:R(()=>[J("div",$ne,[va((be(),et(pe,{data:v.value,class:"mt-8",onClick:_,onMouseenter:g,onMouseleave:D[1]||(D[1]=Ee=>f.value="")},{default:R(({row:Ee,index:le})=>[J("div",Fne,[J("div",Une,[J("h5",{class:Es([le===0?"primary":"","flex align-center"])},[k(j,{onChange:ie=>M(ie,Ee),data:Ee.name||Qn(yw)(Ee.update_time),trigger:"manual",write:Ee.writeStatus,onClose:ie=>x(Ee)},null,8,["onChange","data","write","onClose"]),le===0?(be(),et(U,{key:0,class:"default-tag ml-4"},{default:R(()=>[ot(_e(E.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):En("",!0)],2),k(Y,{type:"info",class:"color-secondary flex align-center mt-8"},{default:R(()=>[k(V,{size:20,class:"avatar-grey mr-4"},{default:R(()=>[k(I,null,{default:R(()=>[k(F)]),_:1})]),_:1}),ot(" "+_e(Ee.publish_user_name),1)]),_:2},1024)]),va(J("div",{onClick:D[0]||(D[0]=nn(()=>{},["stop"]))},[k(ee,{trigger:"click",teleported:!1},{dropdown:R(()=>[k(X,null,{default:R(()=>[k(B,{onClick:nn(ie=>O(Ee),["stop"])},{default:R(()=>[k(K,{iconName:"app-edit",class:"color-secondary"}),ot(" "+_e(E.$t("common.edit")),1)]),_:2},1032,["onClick"]),k(B,{onClick:ie=>b(Ee)},{default:R(()=>[k(I,{class:"color-secondary"},{default:R(()=>[k(z)]),_:1}),ot(" "+_e(E.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:R(()=>[k(H,{text:""},{default:R(()=>[k(K,{iconName:"app-more"})]),_:1})]),_:2},1024)],512),[[th,f.value===Ee.id]])])]),empty:R(()=>[J("div",Vne,[k(Y,{type:"info"},{default:R(()=>[ot(_e(E.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Pe,c.value]])])]),_:1})])])}}}),Wne=Zd(Bne,[["__scopeId","data-v-85be1165"]]),DT=[ei.AiChat,ei.Reply,ei.ToolLib,ei.ToolLibCustom,ei.ImageUnderstandNode,ei.Application,ei.SpeechToTextNode,ei.TextToSpeechNode,ei.ImageGenerateNode];class jT{constructor(t){ka(this,"nodes");ka(this,"edges");ka(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===ei.Start);if(t.length==0)throw Ot("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Ot("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===ei.Base);if(t.length==0)throw Ot("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Ot("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===ei.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===ei.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const a of n)this._is_valid_work_flow(a)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==ei.Start&&n.id!==ei.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Ot("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.nodeName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const a=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(u=>u.id==r.targetNodeId)).reduce((r,u)=>[...r,...u],[]);if(a.length==0&&!DT.includes(t.type))throw Ot("views.applicationWorkflow.validate.noNextNode");return a}is_valid_nodes(){for(const t of this.nodes)if(t.type!==ei.Base&&t.type!==ei.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Ot("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.nodeName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===ei.Condition){const n=t.properties.nodeData.branch;for(const a of n){const r=`${t.id}_${a.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.needConnect1")}${a.type}${Ot("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(a=>a.sourceNodeId==t.id).length==0&&!DT.includes(t.type))throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.nodeName} ${Ot("views.applicationWorkflow.validate.nodeUnavailable")}`}}const Gne={class:"application-workflow"},zne={class:"header border-b flex-between p-12-24 white-bg"},Hne={class:"flex align-center"},Xne=["title"],qne={key:0},Yne={key:0},Kne={key:1},Zne=["href"],Jne={class:"ml-4"},Qne={class:"flex-between"},ere={class:"flex align-center"},tre={class:"mr-12 ml-24 flex"},nre=["src"],rre=["title"],ore={class:"mr-16"},ire={class:"scrollbar-height"},wre=Jn({__name:"index",setup(e){bI("getApplicationDetail",()=>x);const{theme:t}=d_(),n=gI(),a=Zi(),{params:{id:r,from:u}}=a,c=Yn(()=>a.path.includes("resource-management")?"systemManage":"workspace"),v=Yn(()=>tM.application[c.value]),f=Yn(()=>t.isDefaultTheme());let g;const _=Le(),b=Le(),O=Le(!1),x=Le(null),M=Le(!1),A=Le(!1),E=Le(!1),D=Le(""),j=Le(!1),U=Le(!1),F=Le(!1),I=Le({}),V=Le(null),Y=Le([]),K=Yn(()=>US(Y.value)?"?"+US(Y.value):""),H=Yn(()=>{var Ye;return`${window.location.origin}/chat/`+((Ye=x.value)==null?void 0:Ye.accessToken)+K.value});function B(){JSON.stringify(V.value)!==JSON.stringify(Fe())?nE(Ot("common.tip"),Ot("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Ot("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Ot("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{Yt(!0,!0)}).catch(Ye=>{Ye==="cancel"&&kt()}):kt()}function z(){F.value||(U.value=!1,F.value=!1)}function X(Ye){Ye&&pe(Ye),U.value=!1,F.value=!1}function ee(Ye){F.value=!0,I.value=Ye,pe(Ye),Ce()}function pe(Ye){var bt;Ye.workFlow.nodes.map(vt=>{vt.properties.noRender=!0}),x.value.workFlow=Ye.workFlow,D.value=Ye==null?void 0:Ye.update_time,(bt=_.value)==null||bt.clearGraphData(),Rv(()=>{var vt;(vt=_.value)==null||vt.render(Ye.workFlow)})}function ce(){Nt(),j.value&&Se(),U.value=!1,F.value=!1}function Pe(){U.value=!0}function Ee(Ye){Ye?Se():Ce(),localStorage.setItem("workflowAutoSave",Ye.toString())}function le(Ye){M.value=!1}function ie(Ye){M.value=!1}function $e(){M.value=!1}const Ge=()=>{var Ye;(Ye=_.value)==null||Ye.validate().then(()=>{const bt=Fe(),vt=new jT(bt);try{vt.is_valid()}catch(Wt){li(Wt.toString());return}ho({type:"application",systemType:c.value}).putApplication(r,{workFlow:bt},O).then(()=>ho({type:"application",systemType:c.value}).publish(r,{},O)).then(Wt=>{x.value.name=Wt.data.name,Xd(Ot("views.application.tip.publishSuccess"))}).catch(Wt=>{var Kt,rt,cn,We;const Qt=Wt.node,Gt=Wt.errMessage;if(typeof Gt=="string")li(((Kt=Wt.node.properties)==null?void 0:Kt.nodeName)+` ${Ot("views.applicationWorkflow.node").toLowerCase()} `+Gt.toLowerCase());else{const dn=Object.keys(Gt);li(((rt=Qt.properties)==null?void 0:rt.nodeName)+` ${Ot("views.applicationWorkflow.node").toLowerCase()} `+((We=(cn=Gt[dn[0]])==null?void 0:cn[0])==null?void 0:We.message.toLowerCase()))}})}).catch(bt=>{var Qt,Gt,Kt,rt;const vt=bt.node,Wt=bt.errMessage;if(typeof Wt=="string")li(((Qt=bt.node.properties)==null?void 0:Qt.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+Wt);else{const cn=Object.keys(Wt);li(((Gt=vt.properties)==null?void 0:Gt.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+((rt=(Kt=Wt[cn[0]])==null?void 0:Kt[0])==null?void 0:rt.message))}})},ht=()=>{var Ye;(Ye=_.value)==null||Ye.validate().then(()=>{var Wt;const bt=Fe(),vt=new jT(bt);try{vt.is_valid(),x.value={...x.value,type:"WORK_FLOW",...(Wt=vt.get_base_node())==null?void 0:Wt.properties.nodeData,workFlow:Fe()},A.value=!0}catch(Qt){li(Qt.toString())}}).catch(bt=>{var Qt,Gt,Kt,rt;const vt=bt.node,Wt=bt.errMessage;if(typeof Wt=="string")li(((Qt=bt.node.properties)==null?void 0:Qt.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+Wt);else{const cn=Object.keys(Wt);li(((Gt=vt.properties)==null?void 0:Gt.nodeName)+` ${Ot("views.applicationWorkflow.node")}，`+((rt=(Kt=Wt[cn[0]])==null?void 0:Kt[0])==null?void 0:rt.message))}})};function Fe(){var Ye;return(Ye=_.value)==null?void 0:Ye.getGraphData()}function Nt(){ho({type:"application",systemType:c.value}).getApplicationDetail(r).then(Ye=>{var bt,vt,Wt,Qt,Gt;(bt=Ye.data)==null||bt.workFlow.nodes.map(Kt=>{Kt.properties.noRender=!0}),x.value=Ye.data,x.value.stt_model_id=Ye.data.stt_model,x.value.ttsModelId=Ye.data.tts_model,x.value.ttsType=Ye.data.ttsType,D.value=(vt=Ye.data)==null?void 0:vt.update_time,(Qt=(Wt=x.value.workFlow)==null?void 0:Wt.nodes)==null||Qt.filter(Kt=>Kt.id==="base-node").map(Kt=>{Y.value=Kt.properties.api_input_field_list?Kt.properties.api_input_field_list.map(rt=>({name:rt.variable,value:rt.default_value})):Kt.properties.inputFieldList?Kt.properties.inputFieldList.filter(rt=>rt.assignment_method==="api_input").map(rt=>({name:rt.variable,value:rt.default_value})):[]}),ho({type:"application",systemType:c.value}).getAccessToken(r,O).then(Kt=>{x.value={...x.value,...Kt.data}}),(Gt=_.value)==null||Gt.clearGraphData(),Rv(()=>{var Kt;(Kt=_.value)==null||Kt.render(x.value.workFlow),V.value=Fe()}),Tf([Pl.IS_EE,Pl.IS_PE],"OR")&&ho({type:"application",systemType:c.value}).getApplicationSetting(r).then(Kt=>{x.value={...x.value,...Kt.data}})})}function Yt(Ye,bt){const vt={workFlow:Fe()};O.value=bt||!1,ho({type:"application",systemType:c.value}).putApplication(r,vt).then(()=>{D.value=new Date,Ye&&(V.value=Fe(),Xd(Ot("common.saveSuccess")),bt&&kt())}).catch(()=>{O.value=!1})}const kt=()=>a.path.includes("workspace")?n.push({path:Be()}):n.push({path:On()}),On=()=>Tf([_s.ADMIN,Ga.RESOURCE_APPLICATION_OVERVIEW_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/overview`:Tf([_s.ADMIN,Ga.RESOURCE_APPLICATION_ACCESS_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/access`:Tf([_s.ADMIN,Ga.RESOURCE_APPLICATION_CHAT_USER_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-user`:Tf([_s.ADMIN,Ga.RESOURCE_APPLICATION_CHAT_LOG_READ],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-log`:"/system/resource-management/application",Be=()=>Tf([new Ud([_s.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),_s.WORKSPACE_MANAGE.getWorkspaceRole,Ga.APPLICATION_OVERVIEW_READ.getWorkspacePermissionWorkspaceManageRole,Ga.APPLICATION_OVERVIEW_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${u}/${r}/WORK_FLOW/overview`:Tf([new Ud([_s.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new Ud([_s.WORKSPACE_MANAGE.getWorkspaceRole],[Ga.APPLICATION_ACCESS_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new Ud([],[Ga.APPLICATION_ACCESS_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${u}/${r}/WORK_FLOW/access`:Tf([new Ud([_s.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"AND"),new Ud([_s.WORKSPACE_MANAGE.getWorkspaceRole],[Ga.APPLICATION_CHAT_USER_READ.getWorkspacePermissionWorkspaceManageRole],[Pl.IS_EE,Pl.IS_PE],"OR"),new Ud([],[Ga.APPLICATION_CHAT_USER_READ.getApplicationWorkspaceResourcePermission(r)],[Pl.IS_EE,Pl.IS_PE],"OR")],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-user`:Tf([new Ud([_s.USER],[Ga.APPLICATION.getApplicationWorkspaceResourcePermission(r)],[],"AND"),Ga.APPLICATION_CHAT_LOG_READ.getWorkspacePermissionWorkspaceManageRole,Ga.APPLICATION_CHAT_LOG_READ.getApplicationWorkspaceResourcePermission(r)],"OR")?`/application/${u}/${r}/WORK_FLOW/chat-log`:"/application",Se=()=>{g=setInterval(()=>{Yt()},6e4)},Ce=()=>{g&&clearInterval(g)};return Hr(()=>{Nt();const Ye=localStorage.getItem("workflowAutoSave");j.value=Ye==="true",j.value&&Se()}),_I(()=>{var Ye;Ce(),(Ye=_.value)==null||Ye.clearGraphData()}),(Ye,bt)=>{var bo,Ae,Qe;const vt=Z("back-button"),Wt=Z("el-text"),Qt=Z("el-button"),Gt=Z("el-divider"),Kt=Z("Close"),rt=Z("el-icon"),cn=Z("el-dropdown-item"),We=Z("el-switch"),dn=Z("el-dropdown-menu"),er=Z("el-dropdown"),ae=Z("el-collapse-transition"),tr=Z("el-avatar"),Pr=Z("LogoIcon"),Xr=Z("AiChat"),ao=Hd("click-outside"),Un=Hd("loading");return va((be(),tn("div",Gne,[J("div",zne,[J("div",Hne,[k(vt,{onClick:B}),J("h4",{class:"ellipsis",style:{"max-width":"300px"},title:(bo=x.value)==null?void 0:bo.name},_e((Ae=x.value)==null?void 0:Ae.name),9,Xne),U.value&&F.value?(be(),tn("div",qne,[k(Wt,{type:"info",class:"ml-16 color-secondary"},{default:R(()=>[ot(_e(Ye.$t("views.applicationWorkflow.info.previewVersion"))+" "+_e(I.value.name||Qn(yw)(I.value.update_time)),1)]),_:1})])):D.value?(be(),et(Wt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:R(()=>[ot(_e(Ye.$t("views.applicationWorkflow.info.saveTime"))+_e(Qn(yw)(D.value)),1)]),_:1})):En("",!0)]),U.value&&F.value?(be(),tn("div",Yne,[k(Qt,{type:"primary",class:"mr-8",onClick:bt[0]||(bt[0]=je=>X())},{default:R(()=>[ot(_e(Ye.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),k(Gt,{direction:"vertical"}),k(Qt,{text:"",onClick:ce},{default:R(()=>[k(rt,null,{default:R(()=>[k(Kt)]),_:1})]),_:1})])):(be(),tn("div",Kne,[k(Qt,{icon:"Plus",onClick:bt[1]||(bt[1]=je=>M.value=!M.value)},{default:R(()=>[ot(_e(Ye.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),v.value.debug(Qn(r))?(be(),et(Qt,{key:0,onClick:ht,disabled:A.value},{default:R(()=>[k(co,{iconName:"app-debug-outlined",class:"mr-4"}),ot(" "+_e(Ye.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"])):En("",!0),k(Qt,{onClick:bt[2]||(bt[2]=je=>Yt(!0))},{default:R(()=>[k(co,{iconName:"app-save-outlined",class:"mr-4"}),ot(" "+_e(Ye.$t("common.save")),1)]),_:1}),k(Qt,{type:"primary",onClick:Ge},{default:R(()=>[ot(_e(Ye.$t("views.application.operation.publish")),1)]),_:1}),k(er,{trigger:"click"},{dropdown:R(()=>[k(dn,null,{default:R(()=>[J("a",{href:H.value,target:"_blank"},[k(cn,null,{default:R(()=>[k(co,{iconName:"app-create-chat",class:"color-secondary"}),ot(" "+_e(Ye.$t("views.application.operation.toChat")),1)]),_:1})],8,Zne),k(cn,{onClick:Pe},{default:R(()=>[k(co,{iconName:"app-history-outlined",class:"color-secondary"}),ot(" "+_e(Ye.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),k(cn,null,{default:R(()=>[k(co,{iconName:"app-save-outlined",class:"color-secondary"}),ot(" "+_e(Ye.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),J("div",Jne,[k(We,{size:"small",modelValue:j.value,"onUpdate:modelValue":bt[4]||(bt[4]=je=>j.value=je),onChange:Ee},null,8,["modelValue"])])]),_:1})]),_:1})]),default:R(()=>[k(Qt,{text:"",onClick:bt[3]||(bt[3]=nn(()=>{},["stop"])),class:"ml-8 mt-4"},{default:R(()=>[k(co,{iconName:"app-more",class:"rotate-90"})]),_:1})]),_:1})]))]),k(ae,null,{default:R(()=>[va(k(Nk,{show:M.value,id:Qn(r),onClickNodes:le,onOnmousedown:ie,workflowRef:_.value},null,8,["show","id","workflowRef"]),[[ao,$e]])]),_:1}),J("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:b},[x.value?(be(),et(Dne,{key:0,ref_key:"workflowRef",ref:_,data:(Qe=x.value)==null?void 0:Qe.workFlow},null,8,["data"])):En("",!0)],512),k(ae,null,{default:R(()=>{var je,st,on;return[A.value?(be(),tn("div",{key:0,class:Es(["workflow-debug-container",E.value?"enlarge":""])},[J("div",{class:Es(["workflow-debug-header",f.value?"":"custom-header"])},[J("div",Qne,[J("div",ere,[J("div",tre,[Qn(vw)((je=x.value)==null?void 0:je.icon)?(be(),et(tr,{key:0,shape:"square",size:32,style:{background:"none"}},{default:R(()=>{var Jt;return[J("img",{src:Qn(Pf)((Jt=x.value)==null?void 0:Jt.icon),alt:""},null,8,nre)]}),_:1})):(be(),et(Pr,{key:1,height:"32px"}))]),J("h4",{class:"ellipsis",style:{"max-width":"270px"},title:(st=x.value)==null?void 0:st.name},_e(((on=x.value)==null?void 0:on.name)||Ye.$t("views.application.form.appName.label")),9,rre)]),J("div",ore,[k(Qt,{link:"",onClick:bt[5]||(bt[5]=Jt=>E.value=!E.value)},{default:R(()=>[k(co,{iconName:E.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),k(Qt,{link:"",onClick:bt[6]||(bt[6]=Jt=>A.value=!1)},{default:R(()=>[k(rt,{size:20,class:"color-secondary"},{default:R(()=>[k(Kt)]),_:1})]),_:1})])])],2),J("div",ire,[k(Xr,{"application-details":x.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):En("",!0)]}),_:1}),U.value?va((be(),et(Wne,{key:0,onClick:ee,onRefreshVersion:X},null,512)),[[ao,z]]):En("",!0)])),[[Un,O.value]])}}});export{wre as default};
