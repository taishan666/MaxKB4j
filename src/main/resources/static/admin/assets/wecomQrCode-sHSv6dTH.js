import{ay as d,az as m,aA as _,aB as c,aT as u,aF as f,bK as w,cL as h,ca as C,co as L}from"./admin-MH3gc4KS.js";import{P as k,T as x,M as y,A as t,_ as z}from"./wecom.prod-DKW5jE45.js";const I={id:"wecom-qr",class:"wecom-qr flex"},B=d({__name:"wecomQrCode",props:{config:{}},setup(r){const s=m(),{login:i}=_(),l=c({}),p=c({isWeComLogin:!1}),n=r;return(async()=>{await w();const e={corpId:n.config.corp_id,agentId:n.config.agent_id},a=localStorage.getItem("MaxKB-locale")||h()||"en-US",g=window.location.origin;try{l.value=k({el:"#wecom-qr",params:{login_type:z.corpApp,appid:e.corpId||"",agentid:e.agentId,redirect_uri:g,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?t.zh:t.en,redirect_type:y.callback,panel_size:x.small},onCheckWeComLogin:p.value,async onLoginSuccess({code:o}){i.wecomCallback(o).then(()=>{setTimeout(()=>{s.push({name:"home"})})})},onLoginFail(o){C(`${o.errMsg}`)}})}catch(o){console.error("Error initializing login panel:",o)}})(),(e,a)=>(f(),u("div",I))}}),q=L(B,[["__scopeId","data-v-1f970287"]]);export{q as default};
